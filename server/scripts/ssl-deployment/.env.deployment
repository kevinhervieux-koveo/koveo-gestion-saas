# SSL Certificate Deployment Configuration
# Copy this file to .env and customize for your environment

# =============================================================================
# Nginx Configuration
# =============================================================================

# Nginx directories and files
NGINX_SITES_AVAILABLE=/etc/nginx/sites-available
NGINX_SITES_ENABLED=/etc/nginx/sites-enabled
NGINX_CONFIG_FILE=default

# Nginx service management commands
NGINX_RESTART_CMD="systemctl restart nginx"
NGINX_RELOAD_CMD="systemctl reload nginx"
NGINX_TEST_CMD="nginx -t"

# =============================================================================
# SSL Certificate Storage
# =============================================================================

# SSL directories
SSL_CERT_DIR=/etc/ssl/certs
SSL_KEY_DIR=/etc/ssl/private
SSL_BACKUP_DIR=/etc/ssl/backups

# SSL file permissions and ownership
SSL_CERT_PERMISSIONS=644
SSL_KEY_PERMISSIONS=600
SSL_KEY_OWNER=root:root

# =============================================================================
# SSL Renewal Job Configuration
# =============================================================================

# Job schedule (cron format) - daily at 2 AM by default
SSL_RENEWAL_SCHEDULE="0 2 * * *"

# Days before expiry to attempt renewal (default: 30 days)
SSL_RENEWAL_THRESHOLD_DAYS=30

# Maximum retry attempts for failed renewals (default: 3)
SSL_MAX_RETRY_ATTEMPTS=3

# Enable/disable SSL renewal job (default: enabled)
SSL_RENEWAL_ENABLED=true

# Batch size for processing multiple certificates (default: 5)
SSL_RENEWAL_BATCH_SIZE=5

# Log level for renewal job (error, warn, info, debug)
SSL_RENEWAL_LOG_LEVEL=info

# Run renewal check on startup (default: false)
SSL_RUN_ON_STARTUP=false

# =============================================================================
# SSL Certificate Expiry Monitoring & Notifications
# =============================================================================

# Enable SSL certificate expiry notifications (default: enabled)
SSL_EXPIRY_NOTIFICATIONS_ENABLED=true

# Days before expiry to send first notification (default: 7 days)
SSL_EXPIRY_NOTIFICATION_THRESHOLD_DAYS=7

# Notification email for SSL alerts
SSL_NOTIFICATION_EMAIL=admin@koveo-gestion.com

# =============================================================================
# SSL Service Configuration
# =============================================================================

# Use Let's Encrypt staging environment for testing (default: false)
SSL_STAGING=false

# RSA key size for certificate generation (default: 2048)
SSL_KEY_SIZE=2048

# Directory to store SSL certificates and keys
SSL_STORAGE_DIR=./ssl-certificates

# =============================================================================
# Deployment Options
# =============================================================================

# Enable/disable backup of existing certificates
BACKUP_ENABLED=true

# Dry run mode - set to 'true' to test without making changes
DRY_RUN=false

# Verbose logging
VERBOSE=false

# =============================================================================
# Security Settings
# =============================================================================

# Nginx document root
NGINX_DOCUMENT_ROOT=/var/www/html

# Log file paths
NGINX_ACCESS_LOG=/var/log/nginx/access.log
NGINX_ERROR_LOG=/var/log/nginx/error.log

# =============================================================================
# Ansible-specific Configuration
# =============================================================================

# Ansible inventory file path
ANSIBLE_INVENTORY=./ansible-inventory.ini

# SSH configuration for Ansible
ANSIBLE_SSH_PRIVATE_KEY_FILE=~/.ssh/id_rsa
ANSIBLE_REMOTE_USER=root

# Python interpreter path on remote hosts
ANSIBLE_PYTHON_INTERPRETER=/usr/bin/python3