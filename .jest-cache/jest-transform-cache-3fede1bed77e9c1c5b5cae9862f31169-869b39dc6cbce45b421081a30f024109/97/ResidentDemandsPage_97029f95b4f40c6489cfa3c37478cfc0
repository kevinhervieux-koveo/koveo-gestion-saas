c5651302514c7f81c707960e72f28b11
"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
exports.default = ResidentDemandsPage;
const jsx_runtime_1 = require("react/jsx-runtime");
const react_1 = require("react");
const react_query_1 = require("@tanstack/react-query");
const lucide_react_1 = require("lucide-react");
const button_1 = require("@/components/ui/button");
const card_1 = require("@/components/ui/card");
const badge_1 = require("@/components/ui/badge");
const select_1 = require("@/components/ui/select");
const dialog_1 = require("@/components/ui/dialog");
const textarea_1 = require("@/components/ui/textarea");
const react_hook_form_1 = require("react-hook-form");
const zod_1 = require("@hookform/resolvers/zod");
const form_1 = require("@/components/ui/form");
const queryClient_1 = require("@/lib/queryClient");
const use_toast_1 = require("@/hooks/use-toast");
const toastUtils_1 = require("@/lib/toastUtils");
const header_1 = require("@/components/layout/header");
const demand_details_popup_1 = __importDefault(require("@/components/demands/demand-details-popup"));
const DemandFilters_1 = require("@/components/common/DemandFilters");
const file_upload_1 = require("@/components/ui/file-upload");
const use_language_1 = require("@/hooks/use-language");
const validations_1 = require("@/lib/validations");
// Form schemas
const demandSchema = validations_1.schemas.demand;
const statusColors = {
    submitted: 'bg-blue-100 text-blue-800',
    under_review: 'bg-yellow-100 text-yellow-800',
    approved: 'bg-green-100 text-green-800',
    rejected: 'bg-red-100 text-red-800',
    in_progress: 'bg-purple-100 text-purple-800',
    completed: 'bg-emerald-100 text-emerald-800',
    cancelled: 'bg-gray-100 text-gray-800',
};
const typeLabels = {
    maintenance: 'Maintenance',
    complaint: 'Complaint',
    information: 'Information',
    other: 'Other',
};
/**
 *
 */
function ResidentDemandsPage() {
    const { t } = (0, use_language_1.useLanguage)();
    const { toast } = (0, use_toast_1.useToast)();
    const [searchTerm, setSearchTerm] = (0, react_1.useState)('');
    const [statusFilter, setStatusFilter] = (0, react_1.useState)('all');
    const [typeFilter, setTypeFilter] = (0, react_1.useState)('all');
    const [selectedDemand, setSelectedDemand] = (0, react_1.useState)(null);
    const [isNewDemandOpen, setIsNewDemandOpen] = (0, react_1.useState)(false);
    const [isDetailsOpen, setIsDetailsOpen] = (0, react_1.useState)(false);
    const [currentPage, setCurrentPage] = (0, react_1.useState)(1);
    const [selectedFiles, setSelectedFiles] = (0, react_1.useState)([]);
    const [uploadedAttachments, setUploadedAttachments] = (0, react_1.useState)([]);
    const itemsPerPage = 10;
    // Fetch demands
    const { data: demands = [], isLoading } = (0, react_query_1.useQuery)({
        queryKey: ['/api/demands'],
        refetchInterval: 30000, // Refresh every 30 seconds
    });
    // Fetch buildings
    const { data: buildings = [] } = (0, react_query_1.useQuery)({
        queryKey: ['/api/manager/buildings'],
        select: (data) => data?.buildings || [],
    });
    // Fetch residences
    const { data: residences = [] } = (0, react_query_1.useQuery)({
        queryKey: ['/api/residences'],
    });
    // Fetch current user
    const { data: currentUser } = (0, react_query_1.useQuery)({
        queryKey: ['/api/auth/user'],
    });
    // Provide default user to prevent type errors
    const defaultUser = currentUser &&
        typeof currentUser === 'object' &&
        'id' in currentUser &&
        'role' in currentUser &&
        'email' in currentUser
        ? currentUser
        : { id: '', role: 'tenant', email: '' };
    // File upload helper function
    const uploadFiles = async (files) => {
        if (files.length === 0)
            return [];
        const formData = new FormData();
        files.forEach((file) => {
            formData.append('file', file);
        });
        const response = await fetch('/api/upload', {
            method: 'POST',
            body: formData,
        });
        if (!response.ok) {
            throw new Error('Failed to upload files');
        }
        const result = await response.json();
        return result.fileUrls || [];
    };
    // Create demand mutation
    const createDemandMutation = (0, react_query_1.useMutation)({
        mutationFn: async (data) => {
            // Upload files first if any are selected
            const attachments = selectedFiles.length > 0 ? await uploadFiles(selectedFiles) : [];
            const response = await fetch('/api/demands', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify({
                    ...data,
                    attachments,
                    status: 'submitted',
                    // Convert empty strings to undefined for optional UUID fields
                    buildingId: data.buildingId || undefined,
                    residenceId: data.residenceId || undefined,
                    assignationBuildingId: data.assignationBuildingId || undefined,
                    assignationResidenceId: data.assignationResidenceId || undefined,
                }),
            });
            if (!response.ok) {
                throw new Error('Failed to create demand');
            }
            return response.json();
        },
        onSuccess: () => {
            queryClient_1.queryClient.invalidateQueries({ queryKey: ['/api/demands'] });
            setIsNewDemandOpen(false);
            newDemandForm.reset();
            setSelectedFiles([]);
            setUploadedAttachments([]);
            toastUtils_1.toastUtils.createSuccess('Demand');
        },
        onError: () => {
            toastUtils_1.toastUtils.createError('demand');
        },
    });
    // Forms
    const newDemandForm = (0, react_hook_form_1.useForm)({
        resolver: (0, zod_1.zodResolver)(demandSchema),
        defaultValues: {
            type: 'maintenance',
            description: '',
            buildingId: undefined,
            residenceId: undefined,
            assignationBuildingId: undefined,
            assignationResidenceId: undefined,
        },
    });
    // Filter demands
    const filteredDemands = demands.filter((demand) => {
        const matchesSearch = demand.description.toLowerCase().includes(searchTerm.toLowerCase()) ||
            typeLabels[demand.type].toLowerCase().includes(searchTerm.toLowerCase());
        const matchesStatus = statusFilter === 'all' || demand.status === statusFilter;
        const matchesType = typeFilter === 'all' || demand.type === typeFilter;
        return matchesSearch && matchesStatus && matchesType;
    });
    // Group demands by status (no draft demands since we removed draft logic)
    const activeDemands = filteredDemands.filter((d) => ['submitted', 'under_review', 'approved', 'in_progress'].includes(d.status));
    const completedDemands = filteredDemands.filter((d) => ['completed', 'rejected', 'cancelled'].includes(d.status));
    // Pagination calculations
    const totalPages = Math.ceil(filteredDemands.length / itemsPerPage);
    const startIndex = (currentPage - 1) * itemsPerPage;
    const endIndex = startIndex + itemsPerPage;
    const currentDemands = filteredDemands.slice(startIndex, endIndex);
    const handlePreviousPage = () => {
        setCurrentPage((prev) => Math.max(1, prev - 1));
    };
    const handleNextPage = () => {
        setCurrentPage((prev) => Math.min(totalPages, prev + 1));
    };
    const handlePageClick = (page) => {
        setCurrentPage(page);
    };
    const handleCreateDemand = (data) => {
        // Create demand directly as submitted (no draft logic)
        createDemandMutation.mutate(data);
    };
    const handleDemandClick = (demand) => {
        setSelectedDemand(demand);
        setIsDetailsOpen(true);
    };
    const handleDemandUpdated = () => {
        queryClient_1.queryClient.invalidateQueries({ queryKey: ['/api/demands'] });
    };
    const DemandCard = ({ demand }) => {
        const building = buildings.find((b) => b.id === demand.buildingId);
        const residence = residences.find((r) => r.id === demand.residenceId);
        return ((0, jsx_runtime_1.jsxs)(card_1.Card, { className: 'cursor-pointer hover:shadow-md transition-shadow', onClick: () => handleDemandClick(demand), children: [(0, jsx_runtime_1.jsxs)(card_1.CardHeader, { className: 'pb-3', children: [(0, jsx_runtime_1.jsx)("div", { className: 'flex items-center justify-between', children: (0, jsx_runtime_1.jsxs)("div", { className: 'flex items-center gap-2', children: [(0, jsx_runtime_1.jsx)(badge_1.Badge, { variant: 'outline', children: typeLabels[demand.type] }), (0, jsx_runtime_1.jsx)(badge_1.Badge, { className: statusColors[demand.status], children: demand.status.replace('_', ' ') })] }) }), (0, jsx_runtime_1.jsxs)(card_1.CardTitle, { className: 'text-base line-clamp-2', children: [demand.description.substring(0, 100), demand.description.length > 100 && '...'] })] }), (0, jsx_runtime_1.jsx)(card_1.CardContent, { className: 'pt-0', children: (0, jsx_runtime_1.jsxs)("div", { className: 'text-sm text-muted-foreground space-y-1', children: [(0, jsx_runtime_1.jsxs)("p", { children: [(0, jsx_runtime_1.jsx)("strong", { children: "Building:" }), " ", building?.name || 'Unknown'] }), residence && ((0, jsx_runtime_1.jsxs)("p", { children: [(0, jsx_runtime_1.jsx)("strong", { children: "Residence:" }), " ", residence.name] })), (0, jsx_runtime_1.jsxs)("p", { children: [(0, jsx_runtime_1.jsx)("strong", { children: "Created:" }), " ", new Date(demand.createdAt).toLocaleDateString()] })] }) })] }));
    }; /**
     * If function.
     * @param isLoading - IsLoading parameter.
     */ /**
    * If function.
    * @param isLoading - IsLoading parameter.
    */
    if (isLoading) {
        return ((0, jsx_runtime_1.jsxs)("div", { className: 'flex-1 flex flex-col overflow-hidden', children: [(0, jsx_runtime_1.jsx)(header_1.Header, { title: t('myDemands'), subtitle: t('submitAndTrackRequests') }), (0, jsx_runtime_1.jsx)("div", { className: 'flex-1 overflow-auto p-6', children: (0, jsx_runtime_1.jsx)("div", { className: 'flex items-center justify-center h-64', children: (0, jsx_runtime_1.jsx)("div", { className: 'text-center', children: "Loading demands..." }) }) })] }));
    }
    return ((0, jsx_runtime_1.jsxs)("div", { className: 'flex-1 flex flex-col overflow-hidden', children: [(0, jsx_runtime_1.jsx)(header_1.Header, { title: t('myDemands'), subtitle: t('submitAndTrackRequests') }), (0, jsx_runtime_1.jsx)("div", { className: 'flex-1 overflow-auto p-6', children: (0, jsx_runtime_1.jsxs)("div", { className: 'max-w-7xl mx-auto space-y-6', children: [(0, jsx_runtime_1.jsx)("div", { className: 'flex items-center justify-end', children: (0, jsx_runtime_1.jsxs)(dialog_1.Dialog, { open: isNewDemandOpen, onOpenChange: setIsNewDemandOpen, children: [(0, jsx_runtime_1.jsx)(dialog_1.DialogTrigger, { asChild: true, children: (0, jsx_runtime_1.jsxs)(button_1.Button, { children: [(0, jsx_runtime_1.jsx)(lucide_react_1.Plus, { className: 'h-4 w-4 mr-2' }), t('newDemand')] }) }), (0, jsx_runtime_1.jsxs)(dialog_1.DialogContent, { className: 'max-w-lg max-h-[90vh] overflow-y-auto', children: [(0, jsx_runtime_1.jsxs)(dialog_1.DialogHeader, { children: [(0, jsx_runtime_1.jsx)(dialog_1.DialogTitle, { children: t('createNewDemand') }), (0, jsx_runtime_1.jsx)(dialog_1.DialogDescription, { children: "Submit a new request or complaint" })] }), (0, jsx_runtime_1.jsx)(form_1.Form, { ...newDemandForm, children: (0, jsx_runtime_1.jsxs)("form", { onSubmit: newDemandForm.handleSubmit(handleCreateDemand), className: 'space-y-4', children: [(0, jsx_runtime_1.jsx)(form_1.FormField, { control: newDemandForm.control, name: 'type', render: ({ field }) => ((0, jsx_runtime_1.jsxs)(form_1.FormItem, { children: [(0, jsx_runtime_1.jsx)(form_1.FormLabel, { children: "Type" }), (0, jsx_runtime_1.jsxs)(select_1.Select, { onValueChange: field.onChange, value: field.value, children: [(0, jsx_runtime_1.jsx)(form_1.FormControl, { children: (0, jsx_runtime_1.jsx)(select_1.SelectTrigger, { children: (0, jsx_runtime_1.jsx)(select_1.SelectValue, { placeholder: t('selectType') }) }) }), (0, jsx_runtime_1.jsxs)(select_1.SelectContent, { children: [(0, jsx_runtime_1.jsx)(select_1.SelectItem, { value: 'maintenance', children: "Maintenance" }), (0, jsx_runtime_1.jsx)(select_1.SelectItem, { value: 'complaint', children: "Complaint" }), (0, jsx_runtime_1.jsx)(select_1.SelectItem, { value: 'information', children: "Information" }), (0, jsx_runtime_1.jsx)(select_1.SelectItem, { value: 'other', children: "Other" })] })] }), (0, jsx_runtime_1.jsx)(form_1.FormMessage, {})] })) }), (0, jsx_runtime_1.jsx)(form_1.FormField, { control: newDemandForm.control, name: 'buildingId', render: ({ field }) => ((0, jsx_runtime_1.jsxs)(form_1.FormItem, { children: [(0, jsx_runtime_1.jsx)(form_1.FormLabel, { children: "Building" }), (0, jsx_runtime_1.jsxs)(select_1.Select, { onValueChange: field.onChange, value: field.value, children: [(0, jsx_runtime_1.jsx)(form_1.FormControl, { children: (0, jsx_runtime_1.jsx)(select_1.SelectTrigger, { children: (0, jsx_runtime_1.jsx)(select_1.SelectValue, { placeholder: t('selectBuilding') }) }) }), (0, jsx_runtime_1.jsx)(select_1.SelectContent, { children: buildings.map((building) => ((0, jsx_runtime_1.jsx)(select_1.SelectItem, { value: building.id, children: building.name }, building.id))) })] }), (0, jsx_runtime_1.jsx)(form_1.FormMessage, {})] })) }), (0, jsx_runtime_1.jsx)(form_1.FormField, { control: newDemandForm.control, name: 'description', render: ({ field }) => ((0, jsx_runtime_1.jsxs)(form_1.FormItem, { children: [(0, jsx_runtime_1.jsx)(form_1.FormLabel, { children: "Description" }), (0, jsx_runtime_1.jsx)(form_1.FormControl, { children: (0, jsx_runtime_1.jsx)(textarea_1.Textarea, { placeholder: t('describeRequestDetail'), className: 'min-h-[100px]', ...field, value: field.value }) }), (0, jsx_runtime_1.jsx)(form_1.FormMessage, {})] })) }), (0, jsx_runtime_1.jsxs)("div", { className: 'space-y-2', children: [(0, jsx_runtime_1.jsx)("label", { className: 'text-sm font-medium', children: "Attachments (Optional)" }), (0, jsx_runtime_1.jsx)(file_upload_1.FileUpload, { onFilesSelect: (files) => {
                                                                        setSelectedFiles(files);
                                                                    }, maxFiles: 5, maxSize: 10, acceptedTypes: [
                                                                        'image/*',
                                                                        '.pdf',
                                                                        '.doc',
                                                                        '.docx',
                                                                        '.txt'
                                                                    ], allowPaste: true, className: 'border-dashed border-2 border-gray-300 rounded-lg p-4' }), (0, jsx_runtime_1.jsx)("p", { className: 'text-xs text-muted-foreground', children: "You can upload up to 5 files (10MB each). Images, PDFs, and documents are supported. You can also paste screenshots directly (Ctrl+V)." })] }), (0, jsx_runtime_1.jsx)(dialog_1.DialogFooter, { children: (0, jsx_runtime_1.jsx)(button_1.Button, { type: 'submit', disabled: createDemandMutation.isPending, "data-testid": "button-create-demand", children: createDemandMutation.isPending ? 'Creating...' : 'Create Demand' }) })] }) })] })] }) }), (0, jsx_runtime_1.jsx)(DemandFilters_1.DemandFilters, { filters: {
                                searchTerm,
                                statusFilter,
                                typeFilter,
                            }, handlers: {
                                onSearchChange: setSearchTerm,
                                onStatusChange: setStatusFilter,
                                onTypeChange: setTypeFilter,
                            }, userRole: 'resident' }), (0, jsx_runtime_1.jsxs)("div", { className: 'space-y-6', children: [totalPages > 1 && ((0, jsx_runtime_1.jsxs)("div", { className: 'flex items-center justify-center gap-2', children: [(0, jsx_runtime_1.jsxs)(button_1.Button, { variant: 'outline', size: 'sm', onClick: handlePreviousPage, disabled: currentPage === 1, children: [(0, jsx_runtime_1.jsx)(lucide_react_1.ChevronLeft, { className: 'h-4 w-4' }), "Previous"] }), (0, jsx_runtime_1.jsx)("div", { className: 'flex gap-1', children: Array.from({ length: Math.min(5, totalPages) }, (_, i) => {
                                                let pageNum;
                                                if (totalPages <= 5) {
                                                    pageNum = i + 1;
                                                }
                                                else if (currentPage <= 3) {
                                                    pageNum = i + 1;
                                                }
                                                else if (currentPage >= totalPages - 2) {
                                                    pageNum = totalPages - 4 + i;
                                                }
                                                else {
                                                    pageNum = currentPage - 2 + i;
                                                }
                                                return ((0, jsx_runtime_1.jsx)(button_1.Button, { variant: currentPage === pageNum ? 'default' : 'outline', size: 'sm', onClick: () => handlePageClick(pageNum), children: pageNum }, pageNum));
                                            }) }), (0, jsx_runtime_1.jsxs)(button_1.Button, { variant: 'outline', size: 'sm', onClick: handleNextPage, disabled: currentPage === totalPages, children: ["Next", (0, jsx_runtime_1.jsx)(lucide_react_1.ChevronRight, { className: 'h-4 w-4' })] })] })), filteredDemands.length > 0 && ((0, jsx_runtime_1.jsxs)("div", { className: 'text-center text-sm text-muted-foreground', children: ["Showing ", startIndex + 1, " to ", Math.min(endIndex, filteredDemands.length), " of", ' ', filteredDemands.length, " demands"] })), currentDemands.length === 0 ? ((0, jsx_runtime_1.jsx)(card_1.Card, { children: (0, jsx_runtime_1.jsx)(card_1.CardContent, { className: 'p-6 text-center', children: (0, jsx_runtime_1.jsx)("p", { className: 'text-muted-foreground', children: t('noDemandsFound') }) }) })) : ((0, jsx_runtime_1.jsx)("div", { className: 'grid gap-4 md:grid-cols-2 lg:grid-cols-3', children: currentDemands.map((demand) => ((0, jsx_runtime_1.jsx)(DemandCard, { demand: demand }, demand.id))) }))] }), (0, jsx_runtime_1.jsx)(demand_details_popup_1.default, { demand: selectedDemand, isOpen: isDetailsOpen, onClose: () => setIsDetailsOpen(false), user: defaultUser, onDemandUpdated: handleDemandUpdated })] }) })] }));
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiL2hvbWUvcnVubmVyL3dvcmtzcGFjZS9jbGllbnQvc3JjL3BhZ2VzL1Jlc2lkZW50RGVtYW5kc1BhZ2UudHN4IiwibWFwcGluZ3MiOiI7Ozs7O0FBd0lBLHNDQWllQzs7QUF6bUJELGlDQUFpQztBQUNqQyx1REFBOEQ7QUFDOUQsK0NBQXVFO0FBQ3ZFLG1EQUFnRDtBQUVoRCwrQ0FBZ0Y7QUFDaEYsaURBQThDO0FBRTlDLG1EQU1nQztBQUNoQyxtREFRZ0M7QUFDaEMsdURBQW9EO0FBQ3BELHFEQUEwQztBQUMxQyxpREFBc0Q7QUFFdEQsK0NBTzhCO0FBQzlCLG1EQUFnRDtBQUNoRCxpREFBNkM7QUFDN0MsaURBQThDO0FBQzlDLHVEQUFvRDtBQUNwRCxxR0FBMkU7QUFJM0UscUVBQWtFO0FBQ2xFLDZEQUF5RDtBQUN6RCx1REFBbUQ7QUFDbkQsbURBQXdEO0FBNkR4RCxlQUFlO0FBQ2YsTUFBTSxZQUFZLEdBQUcscUJBQU8sQ0FBQyxNQUFNLENBQUM7QUFPcEMsTUFBTSxZQUFZLEdBQUc7SUFDbkIsU0FBUyxFQUFFLDJCQUEyQjtJQUN0QyxZQUFZLEVBQUUsK0JBQStCO0lBQzdDLFFBQVEsRUFBRSw2QkFBNkI7SUFDdkMsUUFBUSxFQUFFLHlCQUF5QjtJQUNuQyxXQUFXLEVBQUUsK0JBQStCO0lBQzVDLFNBQVMsRUFBRSxpQ0FBaUM7SUFDNUMsU0FBUyxFQUFFLDJCQUEyQjtDQUN2QyxDQUFDO0FBRUYsTUFBTSxVQUFVLEdBQUc7SUFDakIsV0FBVyxFQUFFLGFBQWE7SUFDMUIsU0FBUyxFQUFFLFdBQVc7SUFDdEIsV0FBVyxFQUFFLGFBQWE7SUFDMUIsS0FBSyxFQUFFLE9BQU87Q0FDZixDQUFDO0FBRUY7O0dBRUc7QUFDSCxTQU1BLG1CQUFtQjtJQUNqQixNQUFNLEVBQUUsQ0FBQyxFQUFFLEdBQUcsSUFBQSwwQkFBVyxHQUFFLENBQUM7SUFDNUIsTUFBTSxFQUFFLEtBQUssRUFBRSxHQUFHLElBQUEsb0JBQVEsR0FBRSxDQUFDO0lBQzdCLE1BQU0sQ0FBQyxVQUFVLEVBQUUsYUFB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QUFDLDJDQUEyQyx5QkFDL0MsVUFBVSxHQUFHLENBQUMsVUFBTSxJQUFJLENBQUMsR0FBRyxDQUFDLFFBQVEsRUFBRSxlQUFlLENBQUMsTUFBTSxDQUFDLFNBQUssR0FBRyxFQUM5RSxlQUFlLENBQUMsTUFBTSxnQkFDbkIsQ0FDUCxFQUdBLGNBQWMsQ0FBQyxNQUFNLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUM3Qix1QkFBQyxXQUFJLGNBQ0gsdUJBQUMsa0JBQVcsSUFBQyxTQUFTLEVBQUMsaUJBQWlCLFlBQ3RDLDhCQUFHLFNBQVMsRUFBQyx1QkFBdUIsWUFBRSxDQUFDLENBQUMsZ0JBQWdCLENBQUMsR0FBSyxHQUNsRCxHQUNULENBQ1IsQ0FBQyxDQUFDLENBQUMsQ0FDRixnQ0FBSyxTQUFTLEVBQUMsMENBQTBDLFlBQ3RELGNBQWMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxNQUFjLEVBQUUsRUFBRSxDQUFDLENBQ3RDLHVCQUFDLFVBQVUsSUFBaUIsTUFBTSxFQUFFLE1BQU0sSUFBekIsTUFBTSxDQUFDLEVBQUUsQ0FBb0IsQ0FDL0MsQ0FBQyxHQUNFLENBQ1AsSUFDRyxFQUdOLHVCQUFDLDhCQUFrQixJQUNqQixNQUFNLEVBQUUsY0FBYyxFQUN0QixNQUFNLEVBQUUsYUFBYSxFQUNyQixPQUFPLEVBQUUsR0FBRyxFQUFFLENBQUMsZ0JBQWdCLENBQUMsS0FBSyxDQUFDLEVBQ3RDLElBQUksRUFBRSxXQUFXLEVBQ2pCLGVBQWUsRUFBRSxtQkFBbUIsR0FDcEMsSUFDRSxHQUNGLElBQ0YsQ0FDUCxDQUFDO0FBQ0osQ0FBQyIsIm5hbWVzIjpbXSwic291cmNlcyI6WyIvaG9tZS9ydW5uZXIvd29ya3NwYWNlL2NsaWVudC9zcmMvcGFnZXMvUmVzaWRlbnREZW1hbmRzUGFnZS50c3giXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgdXNlU3RhdGUgfSBmcm9tICdyZWFjdCc7XG5pbXBvcnQgeyB1c2VRdWVyeSwgdXNlTXV0YXRpb24gfSBmcm9tICdAdGFuc3RhY2svcmVhY3QtcXVlcnknO1xuaW1wb3J0IHsgUGx1cywgU2VhcmNoLCBDaGV2cm9uTGVmdCwgQ2hldnJvblJpZ2h0IH0gZnJvbSAnbHVjaWRlLXJlYWN0JztcbmltcG9ydCB7IEJ1dHRvbiB9IGZyb20gJ0AvY29tcG9uZW50cy91aS9idXR0b24nO1xuaW1wb3J0IHsgSW5wdXQgfSBmcm9tICdAL2NvbXBvbmVudHMvdWkvaW5wdXQnO1xuaW1wb3J0IHsgQ2FyZCwgQ2FyZENvbnRlbnQsIENhcmRIZWFkZXIsIENhcmRUaXRsZSB9IGZyb20gJ0AvY29tcG9uZW50cy91aS9jYXJkJztcbmltcG9ydCB7IEJhZGdlIH0gZnJvbSAnQC9jb21wb25lbnRzL3VpL2JhZGdlJztcbmltcG9ydCB7IFRhYnMsIFRhYnNDb250ZW50LCBUYWJzTGlzdCwgVGFic1RyaWdnZXIgfSBmcm9tICdAL2NvbXBvbmVudHMvdWkvdGFicyc7XG5pbXBvcnQge1xuICBTZWxlY3QsXG4gIFNlbGVjdENvbnRlbnQsXG4gIFNlbGVjdEl0ZW0sXG4gIFNlbGVjdFRyaWdnZXIsXG4gIFNlbGVjdFZhbHVlLFxufSBmcm9tICdAL2NvbXBvbmVudHMvdWkvc2VsZWN0JztcbmltcG9ydCB7XG4gIERpYWxvZyxcbiAgRGlhbG9nQ29udGVudCxcbiAgRGlhbG9nRGVzY3JpcHRpb24sXG4gIERpYWxvZ0Zvb3RlcixcbiAgRGlhbG9nSGVhZGVyLFxuICBEaWFsb2dUaXRsZSxcbiAgRGlhbG9nVHJpZ2dlcixcbn0gZnJvbSAnQC9jb21wb25lbnRzL3VpL2RpYWxvZyc7XG5pbXBvcnQgeyBUZXh0YXJlYSB9IGZyb20gJ0AvY29tcG9uZW50cy91aS90ZXh0YXJlYSc7XG5pbXBvcnQgeyB1c2VGb3JtIH0gZnJvbSAncmVhY3QtaG9vay1mb3JtJztcbmltcG9ydCB7IHpvZFJlc29sdmVyIH0gZnJvbSAnQGhvb2tmb3JtL3Jlc29sdmVycy96b2QnO1xuaW1wb3J0IHsgeiB9IGZyb20gJ3pvZCc7XG5pbXBvcnQge1xuICBGb3JtLFxuICBGb3JtQ29udHJvbCxcbiAgRm9ybUZpZWxkLFxuICBGb3JtSXRlbSxcbiAgRm9ybUxhYmVsLFxuICBGb3JtTWVzc2FnZSxcbn0gZnJvbSAnQC9jb21wb25lbnRzL3VpL2Zvcm0nO1xuaW1wb3J0IHsgcXVlcnlDbGllbnQgfSBmcm9tICdAL2xpYi9xdWVyeUNsaWVudCc7XG5pbXBvcnQgeyB1c2VUb2FzdCB9IGZyb20gJ0AvaG9va3MvdXNlLXRvYXN0JztcbmltcG9ydCB7IHRvYXN0VXRpbHMgfSBmcm9tICdAL2xpYi90b2FzdFV0aWxzJztcbmltcG9ydCB7IEhlYWRlciB9IGZyb20gJ0AvY29tcG9uZW50cy9sYXlvdXQvaGVhZGVyJztcbmltcG9ydCBEZW1hbmREZXRhaWxzUG9wdXAgZnJvbSAnQC9jb21wb25lbnRzL2RlbWFuZHMvZGVtYW5kLWRldGFpbHMtcG9wdXAnO1xuaW1wb3J0IHsgU2VhcmNoSW5wdXQgfSBmcm9tICdAL2NvbXBvbmVudHMvY29tbW9uL1NlYXJjaElucHV0JztcbmltcG9ydCB7IEZpbHRlckRyb3Bkb3duIH0gZnJvbSAnQC9jb21wb25lbnRzL2NvbW1vbi9GaWx0ZXJEcm9wZG93bic7XG5pbXBvcnQgeyBEZW1hbmRDYXJkIH0gZnJvbSAnQC9jb21wb25lbnRzL2NvbW1vbi9EZW1hbmRDYXJkJztcbmltcG9ydCB7IERlbWFuZEZpbHRlcnMgfSBmcm9tICdAL2NvbXBvbmVudHMvY29tbW9uL0RlbWFuZEZpbHRlcnMnO1xuaW1wb3J0IHsgRmlsZVVwbG9hZCB9IGZyb20gJ0AvY29tcG9uZW50cy91aS9maWxlLXVwbG9hZCc7XG5pbXBvcnQgeyB1c2VMYW5ndWFnZSB9IGZyb20gJ0AvaG9va3MvdXNlLWxhbmd1YWdlJztcbmltcG9ydCB7IHNjaGVtYXMsIGVudW1GaWVsZHMgfSBmcm9tICdAL2xpYi92YWxpZGF0aW9ucyc7XG5cbi8vIFR5cGVzXG4vKipcbiAqXG4gKi9cbmludGVyZmFjZSBEZW1hbmQge1xuICBpZDogc3RyaW5nO1xuICB0eXBlOiAnbWFpbnRlbmFuY2UnIHwgJ2NvbXBsYWludCcgfCAnaW5mb3JtYXRpb24nIHwgJ290aGVyJztcbiAgZGVzY3JpcHRpb246IHN0cmluZztcbiAgc3RhdHVzOlxuICAgIHwgJ3N1Ym1pdHRlZCdcbiAgICB8ICd1bmRlcl9yZXZpZXcnXG4gICAgfCAnYXBwcm92ZWQnXG4gICAgfCAncmVqZWN0ZWQnXG4gICAgfCAnaW5fcHJvZ3Jlc3MnXG4gICAgfCAnY29tcGxldGVkJ1xuICAgIHwgJ2NhbmNlbGxlZCc7XG4gIHN1Ym1pdHRlcklkOiBzdHJpbmc7XG4gIGJ1aWxkaW5nSWQ6IHN0cmluZztcbiAgcmVzaWRlbmNlSWQ/OiBzdHJpbmc7XG4gIGFzc2lnbmF0aW9uQnVpbGRpbmdJZD86IHN0cmluZztcbiAgYXNzaWduYXRpb25SZXNpZGVuY2VJZD86IHN0cmluZztcbiAgY3JlYXRlZEF0OiBzdHJpbmc7XG4gIHVwZGF0ZWRBdDogc3RyaW5nO1xuICByZXZpZXdOb3Rlcz86IHN0cmluZztcbiAgc3VibWl0dGVyPzoge1xuICAgIGlkOiBzdHJpbmc7XG4gICAgZmlyc3ROYW1lOiBzdHJpbmc7XG4gICAgbGFzdE5hbWU6IHN0cmluZztcbiAgICBlbWFpbDogc3RyaW5nO1xuICB9O1xuICByZXNpZGVuY2U/OiB7XG4gICAgaWQ6IHN0cmluZztcbiAgICB1bml0TnVtYmVyOiBzdHJpbmc7XG4gICAgYnVpbGRpbmdJZDogc3RyaW5nO1xuICB9O1xuICBidWlsZGluZz86IHtcbiAgICBpZDogc3RyaW5nO1xuICAgIG5hbWU6IHN0cmluZztcbiAgICBhZGRyZXNzOiBzdHJpbmc7XG4gIH07XG59XG5cbi8qKlxuICpcbiAqL1xuaW50ZXJmYWNlIEJ1aWxkaW5nIHtcbiAgaWQ6IHN0cmluZztcbiAgbmFtZTogc3RyaW5nO1xufVxuXG4vKipcbiAqXG4gKi9cbmludGVyZmFjZSBSZXNpZGVuY2Uge1xuICBpZDogc3RyaW5nO1xuICBuYW1lOiBzdHJpbmc7XG4gIGJ1aWxkaW5nSWQ6IHN0cmluZztcbn1cblxuLy8gRm9ybSBzY2hlbWFzXG5jb25zdCBkZW1hbmRTY2hlbWEgPSBzY2hlbWFzLmRlbWFuZDtcblxuLyoqXG4gKlxuICovXG50eXBlIERlbWFuZEZvcm1EYXRhID0gei5pbmZlcjx0eXBlb2YgZGVtYW5kU2NoZW1hPjtcblxuY29uc3Qgc3RhdHVzQ29sb3JzID0ge1xuICBzdWJtaXR0ZWQ6ICdiZy1ibHVlLTEwMCB0ZXh0LWJsdWUtODAwJyxcbiAgdW5kZXJfcmV2aWV3OiAnYmcteWVsbG93LTEwMCB0ZXh0LXllbGxvdy04MDAnLFxuICBhcHByb3ZlZDogJ2JnLWdyZWVuLTEwMCB0ZXh0LWdyZWVuLTgwMCcsXG4gIHJlamVjdGVkOiAnYmctcmVkLTEwMCB0ZXh0LXJlZC04MDAnLFxuICBpbl9wcm9ncmVzczogJ2JnLXB1cnBsZS0xMDAgdGV4dC1wdXJwbGUtODAwJyxcbiAgY29tcGxldGVkOiAnYmctZW1lcmFsZC0xMDAgdGV4dC1lbWVyYWxkLTgwMCcsXG4gIGNhbmNlbGxlZDogJ2JnLWdyYXktMTAwIHRleHQtZ3JheS04MDAnLFxufTtcblxuY29uc3QgdHlwZUxhYmVscyA9IHtcbiAgbWFpbnRlbmFuY2U6ICdNYWludGVuYW5jZScsXG4gIGNvbXBsYWludDogJ0NvbXBsYWludCcsXG4gIGluZm9ybWF0aW9uOiAnSW5mb3JtYXRpb24nLFxuICBvdGhlcjogJ090aGVyJyxcbn07XG5cbi8qKlxuICpcbiAqL1xuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gLyoqXG4gKiBSZXNpZGVudCBkZW1hbmRzIHBhZ2UgZnVuY3Rpb24uXG4gKi8gLyoqXG4gKiBSZXNpZGVudCBkZW1hbmRzIHBhZ2UgZnVuY3Rpb24uXG4gKi9cblxuUmVzaWRlbnREZW1hbmRzUGFnZSgpIHtcbiAgY29uc3QgeyB0IH0gPSB1c2VMYW5ndWFnZSgpO1xuICBjb25zdCB7IHRvYXN0IH0gPSB1c2VUb2FzdCgpO1xuICBjb25zdCBbc2VhcmNoVGVybSwgc2V0U2VhcmNoVGVybV0gPSB1c2VTdGF0ZSgnJyk7XG4gIGNvbnN0IFtzdGF0dXNGaWx0ZXIsIHNldFN0YXR1c0ZpbHRlcl0gPSB1c2VTdGF0ZTxzdHJpbmc+KCdhbGwnKTtcbiAgY29uc3QgW3R5cGVGaWx0ZXIsIHNldFR5cGVGaWx0ZXJdID0gdXNlU3RhdGU8c3RyaW5nPignYWxsJyk7XG4gIGNvbnN0IFtzZWxlY3RlZERlbWFuZCwgc2V0U2VsZWN0ZWREZW1hbmRdID0gdXNlU3RhdGU8RGVtYW5kIHwgbnVsbD4obnVsbCk7XG4gIGNvbnN0IFtpc05ld0RlbWFuZE9wZW4sIHNldElzTmV3RGVtYW5kT3Blbl0gPSB1c2VTdGF0ZShmYWxzZSk7XG4gIGNvbnN0IFtpc0RldGFpbHNPcGVuLCBzZXRJc0RldGFpbHNPcGVuXSA9IHVzZVN0YXRlKGZhbHNlKTtcbiAgY29uc3QgW2N1cnJlbnRQYWdlLCBzZXRDdXJyZW50UGFnZV0gPSB1c2VTdGF0ZSgxKTtcbiAgY29uc3QgW3NlbGVjdGVkRmlsZXMsIHNldFNlbGVjdGVkRmlsZXNdID0gdXNlU3RhdGU8RmlsZVtdPihbXSk7XG4gIGNvbnN0IFt1cGxvYWRlZEF0dGFjaG1lbnRzLCBzZXRVcGxvYWRlZEF0dGFjaG1lbnRzXSA9IHVzZVN0YXRlPHN0cmluZ1tdPihbXSk7XG4gIGNvbnN0IGl0ZW1zUGVyUGFnZSA9IDEwO1xuXG4gIC8vIEZldGNoIGRlbWFuZHNcbiAgY29uc3QgeyBkYXRhOiBkZW1hbmRzID0gW10sIGlzTG9hZGluZyB9ID0gdXNlUXVlcnkoe1xuICAgIHF1ZXJ5S2V5OiBbJy9hcGkvZGVtYW5kcyddLFxuICAgIHJlZmV0Y2hJbnRlcnZhbDogMzAwMDAsIC8vIFJlZnJlc2ggZXZlcnkgMzAgc2Vjb25kc1xuICB9KTtcblxuICAvLyBGZXRjaCBidWlsZGluZ3NcbiAgY29uc3QgeyBkYXRhOiBidWlsZGluZ3MgPSBbXSB9ID0gdXNlUXVlcnk8QnVpbGRpbmdbXT4oe1xuICAgIHF1ZXJ5S2V5OiBbJy9hcGkvbWFuYWdlci9idWlsZGluZ3MnXSxcbiAgICBzZWxlY3Q6IChkYXRhOiBhbnkpID0+IGRhdGE/LmJ1aWxkaW5ncyB8fCBbXSxcbiAgfSk7XG5cbiAgLy8gRmV0Y2ggcmVzaWRlbmNlc1xuICBjb25zdCB7IGRhdGE6IHJlc2lkZW5jZXMgPSBbXSB9ID0gdXNlUXVlcnk8UmVzaWRlbmNlW10+KHtcbiAgICBxdWVyeUtleTogWycvYXBpL3Jlc2lkZW5jZXMnXSxcbiAgfSk7XG5cbiAgLy8gRmV0Y2ggY3VycmVudCB1c2VyXG4gIGNvbnN0IHsgZGF0YTogY3VycmVudFVzZXIgfSA9IHVzZVF1ZXJ5KHtcbiAgICBxdWVyeUtleTogWycvYXBpL2F1dGgvdXNlciddLFxuICB9KTtcblxuICAvLyBQcm92aWRlIGRlZmF1bHQgdXNlciB0byBwcmV2ZW50IHR5cGUgZXJyb3JzXG4gIGNvbnN0IGRlZmF1bHRVc2VyOiB7XG4gICAgaWQ6IHN0cmluZztcbiAgICByb2xlOiBzdHJpbmc7XG4gICAgZW1haWw6IHN0cmluZztcbiAgICBmaXJzdE5hbWU/OiBzdHJpbmc7XG4gICAgbGFzdE5hbWU/OiBzdHJpbmc7XG4gIH0gPVxuICAgIGN1cnJlbnRVc2VyICYmXG4gICAgdHlwZW9mIGN1cnJlbnRVc2VyID09PSAnb2JqZWN0JyAmJlxuICAgICdpZCcgaW4gY3VycmVudFVzZXIgJiZcbiAgICAncm9sZScgaW4gY3VycmVudFVzZXIgJiZcbiAgICAnZW1haWwnIGluIGN1cnJlbnRVc2VyXG4gICAgICA/IChjdXJyZW50VXNlciBhcyB7XG4gICAgICAgICAgaWQ6IHN0cmluZztcbiAgICAgICAgICByb2xlOiBzdHJpbmc7XG4gICAgICAgICAgZW1haWw6IHN0cmluZztcbiAgICAgICAgICBmaXJzdE5hbWU/OiBzdHJpbmc7XG4gICAgICAgICAgbGFzdE5hbWU/OiBzdHJpbmc7XG4gICAgICAgIH0pXG4gICAgICA6IHsgaWQ6ICcnLCByb2xlOiAndGVuYW50JywgZW1haWw6ICcnIH07XG5cbiAgLy8gRmlsZSB1cGxvYWQgaGVscGVyIGZ1bmN0aW9uXG4gIGNvbnN0IHVwbG9hZEZpbGVzID0gYXN5bmMgKGZpbGVzOiBGaWxlW10pOiBQcm9taXNlPHN0cmluZ1tdPiA9PiB7XG4gICAgaWYgKGZpbGVzLmxlbmd0aCA9PT0gMCkgcmV0dXJuIFtdO1xuICAgIFxuICAgIGNvbnN0IGZvcm1EYXRhID0gbmV3IEZvcm1EYXRhKCk7XG4gICAgZmlsZXMuZm9yRWFjaCgoZmlsZSkgPT4ge1xuICAgICAgZm9ybURhdGEuYXBwZW5kKCdmaWxlJywgZmlsZSk7XG4gICAgfSk7XG4gICAgXG4gICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaCgnL2FwaS91cGxvYWQnLCB7XG4gICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgIGJvZHk6IGZvcm1EYXRhLFxuICAgIH0pO1xuICAgIFxuICAgIGlmICghcmVzcG9uc2Uub2spIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignRmFpbGVkIHRvIHVwbG9hZCBmaWxlcycpO1xuICAgIH1cbiAgICBcbiAgICBjb25zdCByZXN1bHQgPSBhd2FpdCByZXNwb25zZS5qc29uKCk7XG4gICAgcmV0dXJuIHJlc3VsdC5maWxlVXJscyB8fCBbXTtcbiAgfTtcblxuICAvLyBDcmVhdGUgZGVtYW5kIG11dGF0aW9uXG4gIGNvbnN0IGNyZWF0ZURlbWFuZE11dGF0aW9uID0gdXNlTXV0YXRpb24oe1xuICAgIG11dGF0aW9uRm46IGFzeW5jIChkYXRhOiBEZW1hbmRGb3JtRGF0YSkgPT4ge1xuICAgICAgLy8gVXBsb2FkIGZpbGVzIGZpcnN0IGlmIGFueSBhcmUgc2VsZWN0ZWRcbiAgICAgIGNvbnN0IGF0dGFjaG1lbnRzID0gc2VsZWN0ZWRGaWxlcy5sZW5ndGggPiAwID8gYXdhaXQgdXBsb2FkRmlsZXMoc2VsZWN0ZWRGaWxlcykgOiBbXTtcbiAgICAgIFxuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaCgnL2FwaS9kZW1hbmRzJywge1xuICAgICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICAgIH0sXG4gICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgICAuLi5kYXRhLFxuICAgICAgICAgIGF0dGFjaG1lbnRzLFxuICAgICAgICAgIHN0YXR1czogJ3N1Ym1pdHRlZCcsXG4gICAgICAgICAgLy8gQ29udmVydCBlbXB0eSBzdHJpbmdzIHRvIHVuZGVmaW5lZCBmb3Igb3B0aW9uYWwgVVVJRCBmaWVsZHNcbiAgICAgICAgICBidWlsZGluZ0lkOiBkYXRhLmJ1aWxkaW5nSWQgfHwgdW5kZWZpbmVkLFxuICAgICAgICAgIHJlc2lkZW5jZUlkOiBkYXRhLnJlc2lkZW5jZUlkIHx8IHVuZGVmaW5lZCxcbiAgICAgICAgICBhc3NpZ25hdGlvbkJ1aWxkaW5nSWQ6IGRhdGEuYXNzaWduYXRpb25CdWlsZGluZ0lkIHx8IHVuZGVmaW5lZCxcbiAgICAgICAgICBhc3NpZ25hdGlvblJlc2lkZW5jZUlkOiBkYXRhLmFzc2lnbmF0aW9uUmVzaWRlbmNlSWQgfHwgdW5kZWZpbmVkLFxuICAgICAgICB9KSxcbiAgICAgIH0pO1xuXG4gICAgICBpZiAoIXJlc3BvbnNlLm9rKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignRmFpbGVkIHRvIGNyZWF0ZSBkZW1hbmQnKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiByZXNwb25zZS5qc29uKCk7XG4gICAgfSxcbiAgICBvblN1Y2Nlc3M6ICgpID0+IHtcbiAgICAgIHF1ZXJ5Q2xpZW50LmludmFsaWRhdGVRdWVyaWVzKHsgcXVlcnlLZXk6IFsnL2FwaS9kZW1hbmRzJ10gfSk7XG4gICAgICBzZXRJc05ld0RlbWFuZE9wZW4oZmFsc2UpO1xuICAgICAgbmV3RGVtYW5kRm9ybS5yZXNldCgpO1xuICAgICAgc2V0U2VsZWN0ZWRGaWxlcyhbXSk7XG4gICAgICBzZXRVcGxvYWRlZEF0dGFjaG1lbnRzKFtdKTtcbiAgICAgIHRvYXN0VXRpbHMuY3JlYXRlU3VjY2VzcygnRGVtYW5kJyk7XG4gICAgfSxcbiAgICBvbkVycm9yOiAoKSA9PiB7XG4gICAgICB0b2FzdFV0aWxzLmNyZWF0ZUVycm9yKCdkZW1hbmQnKTtcbiAgICB9LFxuICB9KTtcblxuICAvLyBGb3Jtc1xuICBjb25zdCBuZXdEZW1hbmRGb3JtID0gdXNlRm9ybTxEZW1hbmRGb3JtRGF0YT4oe1xuICAgIHJlc29sdmVyOiB6b2RSZXNvbHZlcihkZW1hbmRTY2hlbWEpLFxuICAgIGRlZmF1bHRWYWx1ZXM6IHtcbiAgICAgIHR5cGU6ICdtYWludGVuYW5jZScsXG4gICAgICBkZXNjcmlwdGlvbjogJycsXG4gICAgICBidWlsZGluZ0lkOiB1bmRlZmluZWQsXG4gICAgICByZXNpZGVuY2VJZDogdW5kZWZpbmVkLFxuICAgICAgYXNzaWduYXRpb25CdWlsZGluZ0lkOiB1bmRlZmluZWQsXG4gICAgICBhc3NpZ25hdGlvblJlc2lkZW5jZUlkOiB1bmRlZmluZWQsXG4gICAgfSxcbiAgfSk7XG5cbiAgLy8gRmlsdGVyIGRlbWFuZHNcbiAgY29uc3QgZmlsdGVyZWREZW1hbmRzID0gKGRlbWFuZHMgYXMgRGVtYW5kW10pLmZpbHRlcigoZGVtYW5kOiBEZW1hbmQpID0+IHtcbiAgICBjb25zdCBtYXRjaGVzU2VhcmNoID1cbiAgICAgIGRlbWFuZC5kZXNjcmlwdGlvbi50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKHNlYXJjaFRlcm0udG9Mb3dlckNhc2UoKSkgfHxcbiAgICAgIHR5cGVMYWJlbHNbZGVtYW5kLnR5cGVdLnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMoc2VhcmNoVGVybS50b0xvd2VyQ2FzZSgpKTtcbiAgICBjb25zdCBtYXRjaGVzU3RhdHVzID0gc3RhdHVzRmlsdGVyID09PSAnYWxsJyB8fCBkZW1hbmQuc3RhdHVzID09PSBzdGF0dXNGaWx0ZXI7XG4gICAgY29uc3QgbWF0Y2hlc1R5cGUgPSB0eXBlRmlsdGVyID09PSAnYWxsJyB8fCBkZW1hbmQudHlwZSA9PT0gdHlwZUZpbHRlcjtcblxuICAgIHJldHVybiBtYXRjaGVzU2VhcmNoICYmIG1hdGNoZXNTdGF0dXMgJiYgbWF0Y2hlc1R5cGU7XG4gIH0pO1xuXG4gIC8vIEdyb3VwIGRlbWFuZHMgYnkgc3RhdHVzIChubyBkcmFmdCBkZW1hbmRzIHNpbmNlIHdlIHJlbW92ZWQgZHJhZnQgbG9naWMpXG4gIGNvbnN0IGFjdGl2ZURlbWFuZHMgPSBmaWx0ZXJlZERlbWFuZHMuZmlsdGVyKChkOiBEZW1hbmQpID0+XG4gICAgWydzdWJtaXR0ZWQnLCAndW5kZXJfcmV2aWV3JywgJ2FwcHJvdmVkJywgJ2luX3Byb2dyZXNzJ10uaW5jbHVkZXMoZC5zdGF0dXMpXG4gICk7XG4gIGNvbnN0IGNvbXBsZXRlZERlbWFuZHMgPSBmaWx0ZXJlZERlbWFuZHMuZmlsdGVyKChkOiBEZW1hbmQpID0+XG4gICAgWydjb21wbGV0ZWQnLCAncmVqZWN0ZWQnLCAnY2FuY2VsbGVkJ10uaW5jbHVkZXMoZC5zdGF0dXMpXG4gICk7XG5cbiAgLy8gUGFnaW5hdGlvbiBjYWxjdWxhdGlvbnNcbiAgY29uc3QgdG90YWxQYWdlcyA9IE1hdGguY2VpbChmaWx0ZXJlZERlbWFuZHMubGVuZ3RoIC8gaXRlbXNQZXJQYWdlKTtcbiAgY29uc3Qgc3RhcnRJbmRleCA9IChjdXJyZW50UGFnZSAtIDEpICogaXRlbXNQZXJQYWdlO1xuICBjb25zdCBlbmRJbmRleCA9IHN0YXJ0SW5kZXggKyBpdGVtc1BlclBhZ2U7XG4gIGNvbnN0IGN1cnJlbnREZW1hbmRzID0gZmlsdGVyZWREZW1hbmRzLnNsaWNlKHN0YXJ0SW5kZXgsIGVuZEluZGV4KTtcblxuICBjb25zdCBoYW5kbGVQcmV2aW91c1BhZ2UgPSAoKSA9PiB7XG4gICAgc2V0Q3VycmVudFBhZ2UoKHByZXYpID0+IE1hdGgubWF4KDEsIHByZXYgLSAxKSk7XG4gIH07XG5cbiAgY29uc3QgaGFuZGxlTmV4dFBhZ2UgPSAoKSA9PiB7XG4gICAgc2V0Q3VycmVudFBhZ2UoKHByZXYpID0+IE1hdGgubWluKHRvdGFsUGFnZXMsIHByZXYgKyAxKSk7XG4gIH07XG5cbiAgY29uc3QgaGFuZGxlUGFnZUNsaWNrID0gKHBhZ2U6IG51bWJlcikgPT4ge1xuICAgIHNldEN1cnJlbnRQYWdlKHBhZ2UpO1xuICB9O1xuXG4gIGNvbnN0IGhhbmRsZUNyZWF0ZURlbWFuZCA9IChkYXRhOiBEZW1hbmRGb3JtRGF0YSkgPT4ge1xuICAgIC8vIENyZWF0ZSBkZW1hbmQgZGlyZWN0bHkgYXMgc3VibWl0dGVkIChubyBkcmFmdCBsb2dpYylcbiAgICBjcmVhdGVEZW1hbmRNdXRhdGlvbi5tdXRhdGUoZGF0YSk7XG4gIH07XG5cbiAgY29uc3QgaGFuZGxlRGVtYW5kQ2xpY2sgPSAoZGVtYW5kOiBEZW1hbmQpID0+IHtcbiAgICBzZXRTZWxlY3RlZERlbWFuZChkZW1hbmQpO1xuICAgIHNldElzRGV0YWlsc09wZW4odHJ1ZSk7XG4gIH07XG5cbiAgY29uc3QgaGFuZGxlRGVtYW5kVXBkYXRlZCA9ICgpID0+IHtcbiAgICBxdWVyeUNsaWVudC5pbnZhbGlkYXRlUXVlcmllcyh7IHF1ZXJ5S2V5OiBbJy9hcGkvZGVtYW5kcyddIH0pO1xuICB9O1xuXG4gIGNvbnN0IERlbWFuZENhcmQgPSAoeyBkZW1hbmQgfTogeyBkZW1hbmQ6IERlbWFuZCB9KSA9PiB7XG4gICAgY29uc3QgYnVpbGRpbmcgPSBidWlsZGluZ3MuZmluZCgoYikgPT4gYi5pZCA9PT0gZGVtYW5kLmJ1aWxkaW5nSWQpO1xuICAgIGNvbnN0IHJlc2lkZW5jZSA9IHJlc2lkZW5jZXMuZmluZCgocikgPT4gci5pZCA9PT0gZGVtYW5kLnJlc2lkZW5jZUlkKTtcblxuICAgIHJldHVybiAoXG4gICAgICA8Q2FyZFxuICAgICAgICBjbGFzc05hbWU9J2N1cnNvci1wb2ludGVyIGhvdmVyOnNoYWRvdy1tZCB0cmFuc2l0aW9uLXNoYWRvdydcbiAgICAgICAgb25DbGljaz17KCkgPT4gaGFuZGxlRGVtYW5kQ2xpY2soZGVtYW5kKX1cbiAgICAgID5cbiAgICAgICAgPENhcmRIZWFkZXIgY2xhc3NOYW1lPSdwYi0zJz5cbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0nZmxleCBpdGVtcy1jZW50ZXIganVzdGlmeS1iZXR3ZWVuJz5cbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSdmbGV4IGl0ZW1zLWNlbnRlciBnYXAtMic+XG4gICAgICAgICAgICAgIDxCYWRnZSB2YXJpYW50PSdvdXRsaW5lJz57dHlwZUxhYmVsc1tkZW1hbmQudHlwZV19PC9CYWRnZT5cbiAgICAgICAgICAgICAgPEJhZGdlIGNsYXNzTmFtZT17c3RhdHVzQ29sb3JzW2RlbWFuZC5zdGF0dXNdfT5cbiAgICAgICAgICAgICAgICB7ZGVtYW5kLnN0YXR1cy5yZXBsYWNlKCdfJywgJyAnKX1cbiAgICAgICAgICAgICAgPC9CYWRnZT5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIDxDYXJkVGl0bGUgY2xhc3NOYW1lPSd0ZXh0LWJhc2UgbGluZS1jbGFtcC0yJz5cbiAgICAgICAgICAgIHtkZW1hbmQuZGVzY3JpcHRpb24uc3Vic3RyaW5nKDAsIDEwMCl9XG4gICAgICAgICAgICB7ZGVtYW5kLmRlc2NyaXB0aW9uLmxlbmd0aCA+IDEwMCAmJiAnLi4uJ31cbiAgICAgICAgICA8L0NhcmRUaXRsZT5cbiAgICAgICAgPC9DYXJkSGVhZGVyPlxuICAgICAgICA8Q2FyZENvbnRlbnQgY2xhc3NOYW1lPSdwdC0wJz5cbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0ndGV4dC1zbSB0ZXh0LW11dGVkLWZvcmVncm91bmQgc3BhY2UteS0xJz5cbiAgICAgICAgICAgIDxwPlxuICAgICAgICAgICAgICA8c3Ryb25nPkJ1aWxkaW5nOjwvc3Ryb25nPiB7YnVpbGRpbmc/Lm5hbWUgfHwgJ1Vua25vd24nfVxuICAgICAgICAgICAgPC9wPlxuICAgICAgICAgICAge3Jlc2lkZW5jZSAmJiAoXG4gICAgICAgICAgICAgIDxwPlxuICAgICAgICAgICAgICAgIDxzdHJvbmc+UmVzaWRlbmNlOjwvc3Ryb25nPiB7cmVzaWRlbmNlLm5hbWV9XG4gICAgICAgICAgICAgIDwvcD5cbiAgICAgICAgICAgICl9XG4gICAgICAgICAgICA8cD5cbiAgICAgICAgICAgICAgPHN0cm9uZz5DcmVhdGVkOjwvc3Ryb25nPiB7bmV3IERhdGUoZGVtYW5kLmNyZWF0ZWRBdCkudG9Mb2NhbGVEYXRlU3RyaW5nKCl9XG4gICAgICAgICAgICA8L3A+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgIDwvQ2FyZENvbnRlbnQ+XG4gICAgICA8L0NhcmQ+XG4gICAgKTtcbiAgfTsgLyoqXG4gICAqIElmIGZ1bmN0aW9uLlxuICAgKiBAcGFyYW0gaXNMb2FkaW5nIC0gSXNMb2FkaW5nIHBhcmFtZXRlci5cbiAgICovIC8qKlxuICAgKiBJZiBmdW5jdGlvbi5cbiAgICogQHBhcmFtIGlzTG9hZGluZyAtIElzTG9hZGluZyBwYXJhbWV0ZXIuXG4gICAqL1xuXG4gIGlmIChpc0xvYWRpbmcpIHtcbiAgICByZXR1cm4gKFxuICAgICAgPGRpdiBjbGFzc05hbWU9J2ZsZXgtMSBmbGV4IGZsZXgtY29sIG92ZXJmbG93LWhpZGRlbic+XG4gICAgICAgIDxIZWFkZXIgdGl0bGU9e3QoJ215RGVtYW5kcycpfSBzdWJ0aXRsZT17dCgnc3VibWl0QW5kVHJhY2tSZXF1ZXN0cycpfSAvPlxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT0nZmxleC0xIG92ZXJmbG93LWF1dG8gcC02Jz5cbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0nZmxleCBpdGVtcy1jZW50ZXIganVzdGlmeS1jZW50ZXIgaC02NCc+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0ndGV4dC1jZW50ZXInPkxvYWRpbmcgZGVtYW5kcy4uLjwvZGl2PlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICA8L2Rpdj5cbiAgICAgIDwvZGl2PlxuICAgICk7XG4gIH1cblxuICByZXR1cm4gKFxuICAgIDxkaXYgY2xhc3NOYW1lPSdmbGV4LTEgZmxleCBmbGV4LWNvbCBvdmVyZmxvdy1oaWRkZW4nPlxuICAgICAgPEhlYWRlciB0aXRsZT17dCgnbXlEZW1hbmRzJyl9IHN1YnRpdGxlPXt0KCdzdWJtaXRBbmRUcmFja1JlcXVlc3RzJyl9IC8+XG5cbiAgICAgIDxkaXYgY2xhc3NOYW1lPSdmbGV4LTEgb3ZlcmZsb3ctYXV0byBwLTYnPlxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT0nbWF4LXctN3hsIG14LWF1dG8gc3BhY2UteS02Jz5cbiAgICAgICAgICB7LyogSGVhZGVyIEFjdGlvbnMgKi99XG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9J2ZsZXggaXRlbXMtY2VudGVyIGp1c3RpZnktZW5kJz5cbiAgICAgICAgICAgIDxEaWFsb2cgb3Blbj17aXNOZXdEZW1hbmRPcGVufSBvbk9wZW5DaGFuZ2U9e3NldElzTmV3RGVtYW5kT3Blbn0+XG4gICAgICAgICAgICAgIDxEaWFsb2dUcmlnZ2VyIGFzQ2hpbGQ+XG4gICAgICAgICAgICAgICAgPEJ1dHRvbj5cbiAgICAgICAgICAgICAgICAgIDxQbHVzIGNsYXNzTmFtZT0naC00IHctNCBtci0yJyAvPlxuICAgICAgICAgICAgICAgICAge3QoJ25ld0RlbWFuZCcpfVxuICAgICAgICAgICAgICAgIDwvQnV0dG9uPlxuICAgICAgICAgICAgICA8L0RpYWxvZ1RyaWdnZXI+XG5cbiAgICAgICAgICAgICAgPERpYWxvZ0NvbnRlbnQgY2xhc3NOYW1lPSdtYXgtdy1sZyBtYXgtaC1bOTB2aF0gb3ZlcmZsb3cteS1hdXRvJz5cbiAgICAgICAgICAgICAgICA8RGlhbG9nSGVhZGVyPlxuICAgICAgICAgICAgICAgICAgPERpYWxvZ1RpdGxlPnt0KCdjcmVhdGVOZXdEZW1hbmQnKX08L0RpYWxvZ1RpdGxlPlxuICAgICAgICAgICAgICAgICAgPERpYWxvZ0Rlc2NyaXB0aW9uPlN1Ym1pdCBhIG5ldyByZXF1ZXN0IG9yIGNvbXBsYWludDwvRGlhbG9nRGVzY3JpcHRpb24+XG4gICAgICAgICAgICAgICAgPC9EaWFsb2dIZWFkZXI+XG4gICAgICAgICAgICAgICAgPEZvcm0gey4uLm5ld0RlbWFuZEZvcm19PlxuICAgICAgICAgICAgICAgICAgPGZvcm0gb25TdWJtaXQ9e25ld0RlbWFuZEZvcm0uaGFuZGxlU3VibWl0KGhhbmRsZUNyZWF0ZURlbWFuZCl9IGNsYXNzTmFtZT0nc3BhY2UteS00Jz5cbiAgICAgICAgICAgICAgICAgICAgPEZvcm1GaWVsZFxuICAgICAgICAgICAgICAgICAgICAgIGNvbnRyb2w9e25ld0RlbWFuZEZvcm0uY29udHJvbH1cbiAgICAgICAgICAgICAgICAgICAgICBuYW1lPSd0eXBlJ1xuICAgICAgICAgICAgICAgICAgICAgIHJlbmRlcj17KHsgZmllbGQgfSkgPT4gKFxuICAgICAgICAgICAgICAgICAgICAgICAgPEZvcm1JdGVtPlxuICAgICAgICAgICAgICAgICAgICAgICAgICA8Rm9ybUxhYmVsPlR5cGU8L0Zvcm1MYWJlbD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPFNlbGVjdCBvblZhbHVlQ2hhbmdlPXtmaWVsZC5vbkNoYW5nZX0gdmFsdWU9e2ZpZWxkLnZhbHVlIGFzIHN0cmluZ30+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPEZvcm1Db250cm9sPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPFNlbGVjdFRyaWdnZXI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxTZWxlY3RWYWx1ZSBwbGFjZWhvbGRlcj17dCgnc2VsZWN0VHlwZScpfSAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9TZWxlY3RUcmlnZ2VyPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvRm9ybUNvbnRyb2w+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPFNlbGVjdENvbnRlbnQ+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8U2VsZWN0SXRlbSB2YWx1ZT0nbWFpbnRlbmFuY2UnPk1haW50ZW5hbmNlPC9TZWxlY3RJdGVtPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPFNlbGVjdEl0ZW0gdmFsdWU9J2NvbXBsYWludCc+Q29tcGxhaW50PC9TZWxlY3RJdGVtPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPFNlbGVjdEl0ZW0gdmFsdWU9J2luZm9ybWF0aW9uJz5JbmZvcm1hdGlvbjwvU2VsZWN0SXRlbT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxTZWxlY3RJdGVtIHZhbHVlPSdvdGhlcic+T3RoZXI8L1NlbGVjdEl0ZW0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9TZWxlY3RDb250ZW50PlxuICAgICAgICAgICAgICAgICAgICAgICAgICA8L1NlbGVjdD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPEZvcm1NZXNzYWdlIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICA8L0Zvcm1JdGVtPlxuICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgIDxGb3JtRmllbGRcbiAgICAgICAgICAgICAgICAgICAgICBjb250cm9sPXtuZXdEZW1hbmRGb3JtLmNvbnRyb2x9XG4gICAgICAgICAgICAgICAgICAgICAgbmFtZT0nYnVpbGRpbmdJZCdcbiAgICAgICAgICAgICAgICAgICAgICByZW5kZXI9eyh7IGZpZWxkIH0pID0+IChcbiAgICAgICAgICAgICAgICAgICAgICAgIDxGb3JtSXRlbT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPEZvcm1MYWJlbD5CdWlsZGluZzwvRm9ybUxhYmVsPlxuICAgICAgICAgICAgICAgICAgICAgICAgICA8U2VsZWN0IG9uVmFsdWVDaGFuZ2U9e2ZpZWxkLm9uQ2hhbmdlfSB2YWx1ZT17ZmllbGQudmFsdWUgYXMgc3RyaW5nfT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8Rm9ybUNvbnRyb2w+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8U2VsZWN0VHJpZ2dlcj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPFNlbGVjdFZhbHVlIHBsYWNlaG9sZGVyPXt0KCdzZWxlY3RCdWlsZGluZycpfSAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9TZWxlY3RUcmlnZ2VyPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvRm9ybUNvbnRyb2w+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPFNlbGVjdENvbnRlbnQ+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7YnVpbGRpbmdzLm1hcCgoYnVpbGRpbmcpID0+IChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPFNlbGVjdEl0ZW0ga2V5PXtidWlsZGluZy5pZH0gdmFsdWU9e2J1aWxkaW5nLmlkfT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7YnVpbGRpbmcubmFtZX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9TZWxlY3RJdGVtPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9TZWxlY3RDb250ZW50PlxuICAgICAgICAgICAgICAgICAgICAgICAgICA8L1NlbGVjdD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPEZvcm1NZXNzYWdlIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICA8L0Zvcm1JdGVtPlxuICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgIDxGb3JtRmllbGRcbiAgICAgICAgICAgICAgICAgICAgICBjb250cm9sPXtuZXdEZW1hbmRGb3JtLmNvbnRyb2x9XG4gICAgICAgICAgICAgICAgICAgICAgbmFtZT0nZGVzY3JpcHRpb24nXG4gICAgICAgICAgICAgICAgICAgICAgcmVuZGVyPXsoeyBmaWVsZCB9KSA9PiAoXG4gICAgICAgICAgICAgICAgICAgICAgICA8Rm9ybUl0ZW0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgIDxGb3JtTGFiZWw+RGVzY3JpcHRpb248L0Zvcm1MYWJlbD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPEZvcm1Db250cm9sPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxUZXh0YXJlYVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI9e3QoJ2Rlc2NyaWJlUmVxdWVzdERldGFpbCcpfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPSdtaW4taC1bMTAwcHhdJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgey4uLmZpZWxkfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU9e2ZpZWxkLnZhbHVlIGFzIHN0cmluZ31cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICA8L0Zvcm1Db250cm9sPlxuICAgICAgICAgICAgICAgICAgICAgICAgICA8Rm9ybU1lc3NhZ2UgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvRm9ybUl0ZW0+XG4gICAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9J3NwYWNlLXktMic+XG4gICAgICAgICAgICAgICAgICAgICAgPGxhYmVsIGNsYXNzTmFtZT0ndGV4dC1zbSBmb250LW1lZGl1bSc+QXR0YWNobWVudHMgKE9wdGlvbmFsKTwvbGFiZWw+XG4gICAgICAgICAgICAgICAgICAgICAgPEZpbGVVcGxvYWRcbiAgICAgICAgICAgICAgICAgICAgICAgIG9uRmlsZXNTZWxlY3Q9eyhmaWxlcykgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRTZWxlY3RlZEZpbGVzKGZpbGVzKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICBtYXhGaWxlcz17NX1cbiAgICAgICAgICAgICAgICAgICAgICAgIG1heFNpemU9ezEwfVxuICAgICAgICAgICAgICAgICAgICAgICAgYWNjZXB0ZWRUeXBlcz17W1xuICAgICAgICAgICAgICAgICAgICAgICAgICAnaW1hZ2UvKicsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICcucGRmJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgJy5kb2MnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAnLmRvY3gnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAnLnR4dCdcbiAgICAgICAgICAgICAgICAgICAgICAgIF19XG4gICAgICAgICAgICAgICAgICAgICAgICBhbGxvd1Bhc3RlPXt0cnVlfVxuICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPSdib3JkZXItZGFzaGVkIGJvcmRlci0yIGJvcmRlci1ncmF5LTMwMCByb3VuZGVkLWxnIHAtNCdcbiAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT0ndGV4dC14cyB0ZXh0LW11dGVkLWZvcmVncm91bmQnPlxuICAgICAgICAgICAgICAgICAgICAgICAgWW91IGNhbiB1cGxvYWQgdXAgdG8gNSBmaWxlcyAoMTBNQiBlYWNoKS4gSW1hZ2VzLCBQREZzLCBhbmQgZG9jdW1lbnRzIGFyZSBzdXBwb3J0ZWQuIFlvdSBjYW4gYWxzbyBwYXN0ZSBzY3JlZW5zaG90cyBkaXJlY3RseSAoQ3RybCtWKS5cbiAgICAgICAgICAgICAgICAgICAgICA8L3A+XG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICA8RGlhbG9nRm9vdGVyPlxuICAgICAgICAgICAgICAgICAgICAgIDxCdXR0b24gXG4gICAgICAgICAgICAgICAgICAgICAgICB0eXBlPSdzdWJtaXQnIFxuICAgICAgICAgICAgICAgICAgICAgICAgZGlzYWJsZWQ9e2NyZWF0ZURlbWFuZE11dGF0aW9uLmlzUGVuZGluZ31cbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGEtdGVzdGlkPVwiYnV0dG9uLWNyZWF0ZS1kZW1hbmRcIlxuICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgIHtjcmVhdGVEZW1hbmRNdXRhdGlvbi5pc1BlbmRpbmcgPyAnQ3JlYXRpbmcuLi4nIDogJ0NyZWF0ZSBEZW1hbmQnfVxuICAgICAgICAgICAgICAgICAgICAgIDwvQnV0dG9uPlxuICAgICAgICAgICAgICAgICAgICA8L0RpYWxvZ0Zvb3Rlcj5cbiAgICAgICAgICAgICAgICAgIDwvZm9ybT5cbiAgICAgICAgICAgICAgICA8L0Zvcm0+XG4gICAgICAgICAgICAgIDwvRGlhbG9nQ29udGVudD5cbiAgICAgICAgICAgIDwvRGlhbG9nPlxuICAgICAgICAgIDwvZGl2PlxuXG4gICAgICAgICAgey8qIEZpbHRlcnMgKi99XG4gICAgICAgICAgPERlbWFuZEZpbHRlcnNcbiAgICAgICAgICAgIGZpbHRlcnM9e3tcbiAgICAgICAgICAgICAgc2VhcmNoVGVybSxcbiAgICAgICAgICAgICAgc3RhdHVzRmlsdGVyLFxuICAgICAgICAgICAgICB0eXBlRmlsdGVyLFxuICAgICAgICAgICAgfX1cbiAgICAgICAgICAgIGhhbmRsZXJzPXt7XG4gICAgICAgICAgICAgIG9uU2VhcmNoQ2hhbmdlOiBzZXRTZWFyY2hUZXJtLFxuICAgICAgICAgICAgICBvblN0YXR1c0NoYW5nZTogc2V0U3RhdHVzRmlsdGVyLFxuICAgICAgICAgICAgICBvblR5cGVDaGFuZ2U6IHNldFR5cGVGaWx0ZXIsXG4gICAgICAgICAgICB9fVxuICAgICAgICAgICAgdXNlclJvbGU9J3Jlc2lkZW50J1xuICAgICAgICAgIC8+XG5cbiAgICAgICAgICB7LyogRGVtYW5kcyBMaXN0ICovfVxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSdzcGFjZS15LTYnPlxuICAgICAgICAgICAgey8qIFBhZ2luYXRpb24gKi99XG4gICAgICAgICAgICB7dG90YWxQYWdlcyA+IDEgJiYgKFxuICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0nZmxleCBpdGVtcy1jZW50ZXIganVzdGlmeS1jZW50ZXIgZ2FwLTInPlxuICAgICAgICAgICAgICAgIDxCdXR0b25cbiAgICAgICAgICAgICAgICAgIHZhcmlhbnQ9J291dGxpbmUnXG4gICAgICAgICAgICAgICAgICBzaXplPSdzbSdcbiAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9e2hhbmRsZVByZXZpb3VzUGFnZX1cbiAgICAgICAgICAgICAgICAgIGRpc2FibGVkPXtjdXJyZW50UGFnZSA9PT0gMX1cbiAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICA8Q2hldnJvbkxlZnQgY2xhc3NOYW1lPSdoLTQgdy00JyAvPlxuICAgICAgICAgICAgICAgICAgUHJldmlvdXNcbiAgICAgICAgICAgICAgICA8L0J1dHRvbj5cblxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSdmbGV4IGdhcC0xJz5cbiAgICAgICAgICAgICAgICAgIHtBcnJheS5mcm9tKHsgbGVuZ3RoOiBNYXRoLm1pbig1LCB0b3RhbFBhZ2VzKSB9LCAoXywgaSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBsZXQgcGFnZU51bTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRvdGFsUGFnZXMgPD0gNSkge1xuICAgICAgICAgICAgICAgICAgICAgIHBhZ2VOdW0gPSBpICsgMTtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChjdXJyZW50UGFnZSA8PSAzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgcGFnZU51bSA9IGkgKyAxO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGN1cnJlbnRQYWdlID49IHRvdGFsUGFnZXMgLSAyKSB7XG4gICAgICAgICAgICAgICAgICAgICAgcGFnZU51bSA9IHRvdGFsUGFnZXMgLSA0ICsgaTtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICBwYWdlTnVtID0gY3VycmVudFBhZ2UgLSAyICsgaTtcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICAgICAgICAgICAgPEJ1dHRvblxuICAgICAgICAgICAgICAgICAgICAgICAga2V5PXtwYWdlTnVtfVxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyaWFudD17Y3VycmVudFBhZ2UgPT09IHBhZ2VOdW0gPyAnZGVmYXVsdCcgOiAnb3V0bGluZSd9XG4gICAgICAgICAgICAgICAgICAgICAgICBzaXplPSdzbSdcbiAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IGhhbmRsZVBhZ2VDbGljayhwYWdlTnVtKX1cbiAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICB7cGFnZU51bX1cbiAgICAgICAgICAgICAgICAgICAgICA8L0J1dHRvbj5cbiAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICAgIH0pfVxuICAgICAgICAgICAgICAgIDwvZGl2PlxuXG4gICAgICAgICAgICAgICAgPEJ1dHRvblxuICAgICAgICAgICAgICAgICAgdmFyaWFudD0nb3V0bGluZSdcbiAgICAgICAgICAgICAgICAgIHNpemU9J3NtJ1xuICAgICAgICAgICAgICAgICAgb25DbGljaz17aGFuZGxlTmV4dFBhZ2V9XG4gICAgICAgICAgICAgICAgICBkaXNhYmxlZD17Y3VycmVudFBhZ2UgPT09IHRvdGFsUGFnZXN9XG4gICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgTmV4dFxuICAgICAgICAgICAgICAgICAgPENoZXZyb25SaWdodCBjbGFzc05hbWU9J2gtNCB3LTQnIC8+XG4gICAgICAgICAgICAgICAgPC9CdXR0b24+XG4gICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgKX1cblxuICAgICAgICAgICAgey8qIFBhZ2UgaW5mbyAqL31cbiAgICAgICAgICAgIHtmaWx0ZXJlZERlbWFuZHMubGVuZ3RoID4gMCAmJiAoXG4gICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSd0ZXh0LWNlbnRlciB0ZXh0LXNtIHRleHQtbXV0ZWQtZm9yZWdyb3VuZCc+XG4gICAgICAgICAgICAgICAgU2hvd2luZyB7c3RhcnRJbmRleCArIDF9IHRvIHtNYXRoLm1pbihlbmRJbmRleCwgZmlsdGVyZWREZW1hbmRzLmxlbmd0aCl9IG9meycgJ31cbiAgICAgICAgICAgICAgICB7ZmlsdGVyZWREZW1hbmRzLmxlbmd0aH0gZGVtYW5kc1xuICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICl9XG5cbiAgICAgICAgICAgIHsvKiBDdXJyZW50IHBhZ2UgZGVtYW5kcyAqL31cbiAgICAgICAgICAgIHtjdXJyZW50RGVtYW5kcy5sZW5ndGggPT09IDAgPyAoXG4gICAgICAgICAgICAgIDxDYXJkPlxuICAgICAgICAgICAgICAgIDxDYXJkQ29udGVudCBjbGFzc05hbWU9J3AtNiB0ZXh0LWNlbnRlcic+XG4gICAgICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9J3RleHQtbXV0ZWQtZm9yZWdyb3VuZCc+e3QoJ25vRGVtYW5kc0ZvdW5kJyl9PC9wPlxuICAgICAgICAgICAgICAgIDwvQ2FyZENvbnRlbnQ+XG4gICAgICAgICAgICAgIDwvQ2FyZD5cbiAgICAgICAgICAgICkgOiAoXG4gICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSdncmlkIGdhcC00IG1kOmdyaWQtY29scy0yIGxnOmdyaWQtY29scy0zJz5cbiAgICAgICAgICAgICAgICB7Y3VycmVudERlbWFuZHMubWFwKChkZW1hbmQ6IERlbWFuZCkgPT4gKFxuICAgICAgICAgICAgICAgICAgPERlbWFuZENhcmQga2V5PXtkZW1hbmQuaWR9IGRlbWFuZD17ZGVtYW5kfSAvPlxuICAgICAgICAgICAgICAgICkpfVxuICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICl9XG4gICAgICAgICAgPC9kaXY+XG5cbiAgICAgICAgICB7LyogRGVtYW5kIERldGFpbHMgUG9wdXAgKi99XG4gICAgICAgICAgPERlbWFuZERldGFpbHNQb3B1cFxuICAgICAgICAgICAgZGVtYW5kPXtzZWxlY3RlZERlbWFuZH1cbiAgICAgICAgICAgIGlzT3Blbj17aXNEZXRhaWxzT3Blbn1cbiAgICAgICAgICAgIG9uQ2xvc2U9eygpID0+IHNldElzRGV0YWlsc09wZW4oZmFsc2UpfVxuICAgICAgICAgICAgdXNlcj17ZGVmYXVsdFVzZXJ9XG4gICAgICAgICAgICBvbkRlbWFuZFVwZGF0ZWQ9e2hhbmRsZURlbWFuZFVwZGF0ZWR9XG4gICAgICAgICAgLz5cbiAgICAgICAgPC9kaXY+XG4gICAgICA8L2Rpdj5cbiAgICA8L2Rpdj5cbiAgKTtcbn1cbiJdLCJ2ZXJzaW9uIjozfQ==