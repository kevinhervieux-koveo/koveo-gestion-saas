ae90b71ba73c0660547d6ebc95ecb655
"use strict";
var __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {
    if (k2 === undefined) k2 = k;
    var desc = Object.getOwnPropertyDescriptor(m, k);
    if (!desc || ("get" in desc ? !m.__esModule : desc.writable || desc.configurable)) {
      desc = { enumerable: true, get: function() { return m[k]; } };
    }
    Object.defineProperty(o, k2, desc);
}) : (function(o, m, k, k2) {
    if (k2 === undefined) k2 = k;
    o[k2] = m[k];
}));
var __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {
    Object.defineProperty(o, "default", { enumerable: true, value: v });
}) : function(o, v) {
    o["default"] = v;
});
var __importStar = (this && this.__importStar) || (function () {
    var ownKeys = function(o) {
        ownKeys = Object.getOwnPropertyNames || function (o) {
            var ar = [];
            for (var k in o) if (Object.prototype.hasOwnProperty.call(o, k)) ar[ar.length] = k;
            return ar;
        };
        return ownKeys(o);
    };
    return function (mod) {
        if (mod && mod.__esModule) return mod;
        var result = {};
        if (mod != null) for (var k = ownKeys(mod), i = 0; i < k.length; i++) if (k[i] !== "default") __createBinding(result, mod, k[i]);
        __setModuleDefault(result, mod);
        return result;
    };
})();
var __setFunctionName = (this && this.__setFunctionName) || function (f, name, prefix) {
    if (typeof name === "symbol") name = name.description ? "[".concat(name.description, "]") : "";
    return Object.defineProperty(f, "name", { configurable: true, value: prefix ? "".concat(prefix, " ", name) : name });
};
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
var _a, _b;
Object.defineProperty(exports, "__esModule", { value: true });
exports.server = exports.app = void 0;
var __defProp = Object.defineProperty;
var __getOwnPropNames = Object.getOwnPropertyNames;
var __require = /* @__PURE__ */ ((x) => typeof require !== "undefined" ? require : typeof Proxy !== "undefined" ? new Proxy(x, {
    get: (a, b) => (typeof require !== "undefined" ? require : a)[b]
}) : x)(function (x) {
    if (typeof require !== "undefined")
        return require.apply(this, arguments);
    throw Error('Dynamic require of "' + x + '" is not supported');
});
var __esm = (fn, res) => function __init() {
    return fn && (res = (0, fn[__getOwnPropNames(fn)[0]])(fn = 0)), res;
};
var __export = (target, all) => {
    for (var name in all)
        __defProp(target, name, { get: all[name], enumerable: true });
};
// vite.config.ts
const vite_1 = require("vite");
const plugin_react_1 = __importDefault(require("@vitejs/plugin-react"));
const path_1 = __importDefault(require("path"));
const vite_plugin_runtime_error_modal_1 = __importDefault(require("@replit/vite-plugin-runtime-error-modal"));
var vite_config_default;
var init_vite_config = __esm({
    async "vite.config.ts"() {
        vite_config_default = (0, vite_1.defineConfig)({
            plugins: [
                (0, plugin_react_1.default)(),
                (0, vite_plugin_runtime_error_modal_1.default)(),
                ...process.env.NODE_ENV !== "production" && process.env.REPL_ID !== void 0 ? [await Promise.resolve().then(() => __importStar(require("@replit/vite-plugin-cartographer"))).then((m) => m.cartographer())] : []
            ],
            resolve: {
                alias: {
                    "@": path_1.default.resolve(import.meta.dirname, "client", "src"),
                    "@shared": path_1.default.resolve(import.meta.dirname, "shared"),
                    "@assets": path_1.default.resolve(import.meta.dirname, "attached_assets")
                }
            },
            root: path_1.default.resolve(import.meta.dirname, "client"),
            build: {
                outDir: path_1.default.resolve(import.meta.dirname, "dist/public"),
                emptyOutDir: true
            },
            server: {
                host: "0.0.0.0",
                fs: {
                    strict: true,
                    deny: ["**/.*"]
                }
            }
        });
    }
});
// server/vite.ts
var vite_exports = {};
__export(vite_exports, {
    log: () => log,
    serveStatic: () => serveStatic,
    setupVite: () => setupVite
});
const express_1 = __importDefault(require("express"));
const fs_1 = __importDefault(require("fs"));
const path_2 = __importDefault(require("path"));
const vite_2 = require("vite");
const nanoid_1 = require("nanoid");
function log(message, source = "express") {
    const formattedTime = ( /* @__PURE__ */new Date()).toLocaleTimeString("en-US", {
        hour: "numeric",
        minute: "2-digit",
        second: "2-digit",
        hour12: true
    });
}
async function setupVite(app2, server2) {
    const serverOptions = {
        middlewareMode: true,
        hmr: { server: server2 },
        allowedHosts: true
    };
    const vite = await (0, vite_2.createServer)({
        ...vite_config_default,
        configFile: false,
        customLogger: {
            ...viteLogger,
            error: (msg, _options) => {
                viteLogger.error(msg, _options);
                process.exit(1);
            }
        },
        server: serverOptions,
        appType: "custom"
    });
    app2.use(vite.middlewares);
    app2.use("*", async (req, res, next) => {
        if (req.originalUrl.startsWith("/api/")) {
            return next();
        }
        const url = req.originalUrl;
        try {
            const clientTemplate = path_2.default.resolve(import.meta.dirname, "..", "client", "index.html");
            let template = await fs_1.default.promises.readFile(clientTemplate, "utf-8");
            template = template.replace(`src="/src/main.tsx"`, `src="/src/main.tsx?v=${(0, nanoid_1.nanoid)()}"`);
            const page = await vite.transformIndexHtml(url, template);
            res.status(200).set({ "Content-Type": "text/html" }).end(page);
        }
        catch (___e) {
            vite.ssrFixStacktrace(___e);
            next(___e);
        }
    });
}
function serveStatic(app2) {
    const distPath = path_2.default.resolve(process.cwd(), "dist", "public");
    if (!fs_1.default.existsSync(distPath)) {
        throw new Error(`Could not find the build directory: ${distPath}, make sure to build the client first`);
    }
    app2.use(express_1.default.static(distPath));
    app2.use("*", (req, res, next) => {
        if (req.originalUrl.startsWith("/api/")) {
            return next();
        }
        res.sendFile(path_2.default.resolve(distPath, "index.html"));
    });
}
var viteLogger;
var init_vite = __esm({
    async "server/vite.ts"() {
        await init_vite_config();
        viteLogger = (0, vite_2.createLogger)();
    }
});
// server/config/index.ts
const zod_1 = require("zod");
var envSchema, env, detectEnvironment, envConfig, config;
var init_config = __esm({
    "server/config/index.ts"() {
        envSchema = zod_1.z.object({
            PORT: zod_1.z.string().transform(Number).default(5e3),
            DATABASE_URL: zod_1.z.string().min(1, "DATABASE_URL is required"),
            DATABASE_URL_KOVEO: zod_1.z.string().optional(),
            // Production database
            SESSION_SECRET: zod_1.z.string().optional(),
            REPL_SLUG: zod_1.z.string().optional(),
            REPL_OWNER: zod_1.z.string().optional(),
            // Email configuration
            SENDGRID_API_KEY: zod_1.z.string().optional(),
            FROM_EMAIL: zod_1.z.string().email().optional(),
            // SSL configuration
            SSL_ENABLED: zod_1.z.string().transform((v) => v === "true").default(false),
            SSL_STAGING: zod_1.z.string().transform((v) => v === "true").default(true),
            // Performance configuration
            CACHE_TTL: zod_1.z.string().transform(Number).default(300),
            // 5 minutes
            MAX_CACHE_SIZE: zod_1.z.string().transform(Number).default(100),
            // Security configuration
            RATE_LIMIT_WINDOW: zod_1.z.string().transform(Number).default(9e5),
            // 15 minutes
            RATE_LIMIT_MAX: zod_1.z.string().transform(Number).default(100),
            // Database optimization
            DB_POOL_SIZE: zod_1.z.string().transform(Number).default(10),
            QUERY_TIMEOUT: zod_1.z.string().transform(Number).default(3e4)
            // 30 seconds
        });
        env = envSchema.parse(process.env);
        detectEnvironment = () => {
            const replDomain = env.REPL_SLUG && env.REPL_OWNER ? `${env.REPL_SLUG}.${env.REPL_OWNER}.repl.co` : null;
            const hostDomain = process.env.REPLIT_DOMAINS || process.env.HOST || process.env.DOMAIN;
            const requestHost = process.env.REQUEST_HOST || process.env.HTTP_HOST;
            const serverName = process.env.SERVER_NAME;
            const domain = requestHost || serverName || hostDomain || replDomain || "localhost";
            const productionDomains = ["koveo-gestion.com", "www.koveo-gestion.com", "app.koveo-gestion.com"];
            const isExplicitProduction = process.env.NODE_ENV === "production";
            const isDomainProduction = productionDomains.some((prodDomain) => domain.includes(prodDomain) || domain === prodDomain);
            const isKoveoProduction = domain.includes("koveo-gestion.com");
            const isProduction = isExplicitProduction || isKoveoProduction || isDomainProduction;
            const isDevelopment = !isProduction;
            console.log(`\u{1F30D} Environment detected: ${isDevelopment ? "development" : "production"} (domain: ${domain}, koveo: ${isKoveoProduction})`);
            return {
                environment: isDevelopment ? "development" : "production",
                isDevelopment,
                isProduction,
                isTest: false,
                domain
            };
        };
        envConfig = detectEnvironment();
        config = {
            // Server configuration
            server: {
                port: env.PORT,
                nodeEnv: envConfig.environment,
                isDevelopment: envConfig.isDevelopment,
                isProduction: envConfig.isProduction,
                isTest: envConfig.isTest,
                domain: envConfig.domain
            },
            // Database configuration
            database: {
                // Use DATABASE_URL_KOVEO for production (koveo-gestion.com), DATABASE_URL for development
                url: envConfig.isProduction && env.DATABASE_URL_KOVEO ? env.DATABASE_URL_KOVEO : env.DATABASE_URL,
                poolSize: env.DB_POOL_SIZE,
                queryTimeout: env.QUERY_TIMEOUT,
                // Helper function to get database URL at runtime based on request
                getRuntimeDatabaseUrl: (requestDomain) => {
                    const isKoveoRequest = requestDomain?.includes("koveo-gestion.com");
                    const shouldUseProduction = envConfig.isProduction || isKoveoRequest;
                    return shouldUseProduction && env.DATABASE_URL_KOVEO ? env.DATABASE_URL_KOVEO : env.DATABASE_URL;
                }
            },
            // Session configuration
            session: {
                secret: env.SESSION_SECRET || "koveo-gestion-secret-key",
                maxAge: 24 * 60 * 60 * 1e3,
                // 24 hours
                secure: envConfig.isProduction,
                httpOnly: true,
                sameSite: "strict"
            },
            // Email configuration
            email: {
                apiKey: env.SENDGRID_API_KEY,
                fromEmail: env.FROM_EMAIL || "noreply@koveo.ca",
                enabled: !!env.SENDGRID_API_KEY
            },
            // SSL configuration
            ssl: {
                enabled: env.SSL_ENABLED,
                staging: env.SSL_STAGING
            },
            // Cache configuration
            cache: {
                ttl: env.CACHE_TTL,
                maxSize: env.MAX_CACHE_SIZE
            },
            // Rate limiting configuration
            rateLimit: {
                windowMs: env.RATE_LIMIT_WINDOW,
                max: env.RATE_LIMIT_MAX
            },
            // Quebec compliance settings
            quebec: {
                defaultLanguage: "fr",
                supportedLanguages: ["en", "fr"],
                requireBilingual: true,
                law25Compliance: true
            }
        };
    }
});
// shared/schemas/core.ts
const drizzle_orm_1 = require("drizzle-orm");
const pg_core_1 = require("drizzle-orm/pg-core");
const zod_2 = require("zod");
var userRoleEnum, invitationStatusEnum, users, organizations, userOrganizations, invitations, passwordResetTokens, invitationAuditLog, resourceTypeEnum, actionEnum, permissions, rolePermissions, userPermissions, insertUserSchema, insertOrganizationSchema, insertUserOrganizationSchema, insertInvitationSchema, insertPasswordResetTokenSchema, insertInvitationAuditLogSchema, insertPermissionSchema, insertRolePermissionSchema, insertUserPermissionSchema;
var init_core = __esm({
    "shared/schemas/core.ts"() {
        userRoleEnum = (0, pg_core_1.pgEnum)("user_role", [
            "admin",
            "manager",
            "tenant",
            "resident",
            "demo_manager",
            "demo_tenant",
            "demo_resident"
        ]);
        invitationStatusEnum = (0, pg_core_1.pgEnum)("invitation_status", [
            "pending",
            "accepted",
            "expired",
            "cancelled"
        ]);
        users = (0, pg_core_1.pgTable)("users", {
            id: (0, pg_core_1.varchar)("id").primaryKey().default((0, drizzle_orm_1.sql) `gen_random_uuid()`),
            username: (0, pg_core_1.text)("username").notNull().unique(),
            // Username field required by database
            email: (0, pg_core_1.text)("email").notNull().unique(),
            password: (0, pg_core_1.text)("password").notNull(),
            firstName: (0, pg_core_1.text)("first_name").notNull(),
            lastName: (0, pg_core_1.text)("last_name").notNull(),
            phone: (0, pg_core_1.text)("phone"),
            profileImage: (0, pg_core_1.text)("profile_image"),
            language: (0, pg_core_1.text)("language").notNull().default("fr"),
            // Default to French for Quebec
            role: userRoleEnum("role").notNull().default("tenant"),
            isActive: (0, pg_core_1.boolean)("is_active").notNull().default(true),
            lastLoginAt: (0, pg_core_1.timestamp)("last_login_at"),
            createdAt: (0, pg_core_1.timestamp)("created_at").defaultNow(),
            updatedAt: (0, pg_core_1.timestamp)("updated_at").defaultNow()
        });
        organizations = (0, pg_core_1.pgTable)("organizations", {
            id: (0, pg_core_1.varchar)("id").primaryKey().default((0, drizzle_orm_1.sql) `gen_random_uuid()`),
            name: (0, pg_core_1.text)("name").notNull(),
            type: (0, pg_core_1.text)("type").notNull(),
            // 'management_company', 'syndicate', 'cooperative', 'condo_association', 'demo'
            address: (0, pg_core_1.text)("address").notNull(),
            city: (0, pg_core_1.text)("city").notNull(),
            province: (0, pg_core_1.text)("province").notNull().default("QC"),
            postalCode: (0, pg_core_1.text)("postal_code").notNull(),
            phone: (0, pg_core_1.text)("phone"),
            email: (0, pg_core_1.text)("email"),
            website: (0, pg_core_1.text)("website"),
            registrationNumber: (0, pg_core_1.text)("registration_number"),
            // Quebec business registration
            isActive: (0, pg_core_1.boolean)("is_active").notNull().default(true),
            createdAt: (0, pg_core_1.timestamp)("created_at").defaultNow(),
            updatedAt: (0, pg_core_1.timestamp)("updated_at").defaultNow()
        });
        userOrganizations = (0, pg_core_1.pgTable)("user_organizations", {
            id: (0, pg_core_1.varchar)("id").primaryKey().default((0, drizzle_orm_1.sql) `gen_random_uuid()`),
            userId: (0, pg_core_1.varchar)("user_id").notNull().references(() => users.id, { onDelete: "cascade" }),
            organizationId: (0, pg_core_1.varchar)("organization_id").notNull().references(() => organizations.id, { onDelete: "cascade" }),
            organizationRole: userRoleEnum("organization_role").notNull().default("tenant"),
            isActive: (0, pg_core_1.boolean)("is_active").notNull().default(true),
            canAccessAllOrganizations: (0, pg_core_1.boolean)("can_access_all_organizations").notNull().default(false),
            createdAt: (0, pg_core_1.timestamp)("created_at").defaultNow(),
            updatedAt: (0, pg_core_1.timestamp)("updated_at").defaultNow()
        });
        invitations = (0, pg_core_1.pgTable)("invitations", {
            id: (0, pg_core_1.varchar)("id").primaryKey().default((0, drizzle_orm_1.sql) `gen_random_uuid()`),
            organizationId: (0, pg_core_1.varchar)("organization_id"),
            buildingId: (0, pg_core_1.varchar)("building_id"),
            residenceId: (0, pg_core_1.text)("residence_id"),
            email: (0, pg_core_1.text)("email").notNull(),
            token: (0, pg_core_1.text)("token").notNull().unique(),
            role: userRoleEnum("role").notNull(),
            status: invitationStatusEnum("status").notNull().default("pending"),
            invitedByUserId: (0, pg_core_1.varchar)("invited_by_user_id").notNull(),
            expiresAt: (0, pg_core_1.timestamp)("expires_at").notNull(),
            tokenHash: (0, pg_core_1.text)("token_hash").notNull(),
            usageCount: (0, pg_core_1.integer)("usage_count").notNull().default(0),
            maxUsageCount: (0, pg_core_1.integer)("max_usage_count").notNull().default(1),
            personalMessage: (0, pg_core_1.text)("personal_message"),
            invitationContext: (0, pg_core_1.json)("invitation_context"),
            securityLevel: (0, pg_core_1.text)("security_level"),
            requires2fa: (0, pg_core_1.boolean)("requires_2fa").notNull().default(false),
            acceptedAt: (0, pg_core_1.timestamp)("accepted_at"),
            acceptedBy: (0, pg_core_1.varchar)("accepted_by_user_id"),
            createdAt: (0, pg_core_1.timestamp)("created_at").defaultNow(),
            updatedAt: (0, pg_core_1.timestamp)("updated_at").defaultNow(),
            lastAccessedAt: (0, pg_core_1.timestamp)("last_accessed_at"),
            ipAddress: (0, pg_core_1.text)("ip_address"),
            userAgent: (0, pg_core_1.text)("user_agent")
        });
        passwordResetTokens = (0, pg_core_1.pgTable)("password_reset_tokens", {
            id: (0, pg_core_1.varchar)("id").primaryKey().default((0, drizzle_orm_1.sql) `gen_random_uuid()`),
            userId: (0, pg_core_1.varchar)("user_id").notNull().references(() => users.id, { onDelete: "cascade" }),
            token: (0, pg_core_1.text)("token").notNull().unique(),
            tokenHash: (0, pg_core_1.text)("token_hash").notNull(),
            // Hashed version for security
            expiresAt: (0, pg_core_1.timestamp)("expires_at").notNull(),
            usedAt: (0, pg_core_1.timestamp)("used_at"),
            isUsed: (0, pg_core_1.boolean)("is_used").notNull().default(false),
            ipAddress: (0, pg_core_1.text)("ip_address"),
            userAgent: (0, pg_core_1.text)("user_agent"),
            createdAt: (0, pg_core_1.timestamp)("created_at").defaultNow()
        });
        invitationAuditLog = (0, pg_core_1.pgTable)("invitation_audit_log", {
            id: (0, pg_core_1.varchar)("id").primaryKey().default((0, drizzle_orm_1.sql) `gen_random_uuid()`),
            invitationId: (0, pg_core_1.varchar)("invitation_id").references(() => invitations.id, { onDelete: "cascade" }),
            action: (0, pg_core_1.text)("action").notNull(),
            performedBy: (0, pg_core_1.varchar)("performed_by").references(() => users.id),
            ipAddress: (0, pg_core_1.text)("ip_address"),
            userAgent: (0, pg_core_1.text)("user_agent"),
            details: (0, pg_core_1.json)("details"),
            previousStatus: invitationStatusEnum("previous_status"),
            newStatus: invitationStatusEnum("new_status"),
            createdAt: (0, pg_core_1.timestamp)("created_at").defaultNow()
        });
        resourceTypeEnum = (0, pg_core_1.pgEnum)("resource_type", [
            "user",
            "users",
            // Added to handle existing production data
            "organization",
            "building",
            "residence",
            "bill",
            "budget",
            "maintenance_request",
            "document",
            "audit_log",
            "system_settings",
            "development_pillar",
            "quality_metric",
            "feature",
            "actionable_item",
            "improvement_suggestion"
        ]);
        actionEnum = (0, pg_core_1.pgEnum)("action", [
            "read",
            "create",
            "update",
            "delete",
            "manage",
            "approve",
            "assign",
            "share",
            "export",
            "backup",
            "restore"
        ]);
        permissions = (0, pg_core_1.pgTable)("permissions", {
            id: (0, pg_core_1.uuid)("id").primaryKey().default((0, drizzle_orm_1.sql) `gen_random_uuid()`),
            name: (0, pg_core_1.text)("name").notNull().unique(),
            displayName: (0, pg_core_1.text)("display_name").notNull(),
            description: (0, pg_core_1.text)("description"),
            resourceType: resourceTypeEnum("resource_type").notNull(),
            action: actionEnum("action").notNull(),
            conditions: (0, pg_core_1.json)("conditions"),
            isActive: (0, pg_core_1.boolean)("is_active").notNull().default(true),
            createdAt: (0, pg_core_1.timestamp)("created_at").defaultNow(),
            updatedAt: (0, pg_core_1.timestamp)("updated_at").defaultNow()
        });
        rolePermissions = (0, pg_core_1.pgTable)("role_permissions", {
            id: (0, pg_core_1.uuid)("id").primaryKey().default((0, drizzle_orm_1.sql) `gen_random_uuid()`),
            role: userRoleEnum("role").notNull(),
            permissionId: (0, pg_core_1.uuid)("permission_id").notNull().references(() => permissions.id),
            grantedBy: (0, pg_core_1.varchar)("granted_by").references(() => users.id),
            grantedAt: (0, pg_core_1.timestamp)("granted_at").defaultNow(),
            createdAt: (0, pg_core_1.timestamp)("created_at").defaultNow()
        });
        userPermissions = (0, pg_core_1.pgTable)("user_permissions", {
            id: (0, pg_core_1.uuid)("id").primaryKey().default((0, drizzle_orm_1.sql) `gen_random_uuid()`),
            userId: (0, pg_core_1.varchar)("user_id").notNull().references(() => users.id),
            permissionId: (0, pg_core_1.uuid)("permission_id").notNull().references(() => permissions.id),
            granted: (0, pg_core_1.boolean)("granted").notNull().default(true),
            createdAt: (0, pg_core_1.timestamp)("created_at").defaultNow(),
            updatedAt: (0, pg_core_1.timestamp)("updated_at").defaultNow()
        });
        insertUserSchema = zod_2.z.object({
            username: zod_2.z.string().min(1).max(50, "Username must be between 1-50 characters"),
            email: zod_2.z.string().email("Must be a valid email address").toLowerCase(),
            password: zod_2.z.string().min(8, "Password must be at least 8 characters").regex(/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[!@#$%^&*(),.?":{}|<>])/, "Password must contain uppercase, lowercase, number, and special character"),
            firstName: zod_2.z.string().min(1).max(100, "First name must be 1-100 characters").trim(),
            lastName: zod_2.z.string().min(1).max(100, "Last name must be 1-100 characters").trim(),
            phone: zod_2.z.string().optional().refine((phone) => !phone || /^(\+1\s?)?(\([0-9]{3}\)|[0-9]{3})[\s.-]?[0-9]{3}[\s.-]?[0-9]{4}$/.test(phone), "Phone must be a valid North American format (e.g., 514-123-4567 or (514) 123-4567)"),
            profileImage: zod_2.z.string().optional(),
            language: zod_2.z.string().default("fr"),
            role: zod_2.z.enum([
                "admin",
                "manager",
                "tenant",
                "resident",
                "demo_manager",
                "demo_tenant",
                "demo_resident"
            ]).default("tenant")
        });
        insertOrganizationSchema = zod_2.z.object({
            name: zod_2.z.string().min(1),
            type: zod_2.z.string(),
            address: zod_2.z.string(),
            city: zod_2.z.string(),
            province: zod_2.z.string().default("QC"),
            postalCode: zod_2.z.string(),
            phone: zod_2.z.string().optional(),
            email: zod_2.z.string().email().optional(),
            website: zod_2.z.string().url().optional(),
            registrationNumber: zod_2.z.string().optional()
        });
        insertUserOrganizationSchema = zod_2.z.object({
            userId: zod_2.z.string().uuid(),
            organizationId: zod_2.z.string().uuid(),
            organizationRole: zod_2.z.enum([
                "admin",
                "manager",
                "tenant",
                "resident",
                "demo_manager",
                "demo_tenant",
                "demo_resident"
            ]).default("tenant"),
            canAccessAllOrganizations: zod_2.z.boolean().default(false)
        });
        insertInvitationSchema = zod_2.z.object({
            organizationId: zod_2.z.string().uuid().optional(),
            residenceId: zod_2.z.union([zod_2.z.string().uuid(), zod_2.z.null()]).optional(),
            email: zod_2.z.string().email(),
            role: zod_2.z.enum([
                "admin",
                "manager",
                "tenant",
                "resident",
                "demo_manager",
                "demo_tenant",
                "demo_resident"
            ]),
            invitedByUserId: zod_2.z.string().uuid(),
            expiresAt: zod_2.z.union([
                zod_2.z.date(),
                zod_2.z.string().datetime().transform((str) => new Date(str))
            ])
        });
        insertPasswordResetTokenSchema = zod_2.z.object({
            userId: zod_2.z.string().uuid(),
            token: zod_2.z.string(),
            tokenHash: zod_2.z.string(),
            expiresAt: zod_2.z.date(),
            ipAddress: zod_2.z.string().optional(),
            userAgent: zod_2.z.string().optional()
        });
        insertInvitationAuditLogSchema = zod_2.z.object({
            invitationId: zod_2.z.string().uuid(),
            action: zod_2.z.string(),
            performedBy: zod_2.z.string().uuid(),
            ipAddress: zod_2.z.string().optional(),
            userAgent: zod_2.z.string().optional(),
            details: zod_2.z.record(zod_2.z.string(), zod_2.z.any()).optional(),
            previousStatus: zod_2.z.string().optional(),
            newStatus: zod_2.z.string().optional()
        });
        insertPermissionSchema = zod_2.z.object({
            name: zod_2.z.string(),
            displayName: zod_2.z.string(),
            description: zod_2.z.string().optional(),
            resourceType: zod_2.z.string(),
            action: zod_2.z.string(),
            conditions: zod_2.z.record(zod_2.z.string(), zod_2.z.any()).optional(),
            isActive: zod_2.z.boolean().default(true)
        });
        insertRolePermissionSchema = zod_2.z.object({
            role: zod_2.z.enum([
                "admin",
                "manager",
                "tenant",
                "resident",
                "demo_manager",
                "demo_tenant",
                "demo_resident"
            ]),
            permissionId: zod_2.z.string().uuid()
        });
        insertUserPermissionSchema = zod_2.z.object({
            userId: zod_2.z.string().uuid(),
            permissionId: zod_2.z.string().uuid(),
            granted: zod_2.z.boolean().default(true)
        });
    }
});
// shared/schemas/property.ts
const drizzle_orm_2 = require("drizzle-orm");
const pg_core_2 = require("drizzle-orm/pg-core");
const zod_3 = require("zod");
var buildingTypeEnum, contactEntityEnum, contactCategoryEnum, bookingStatusEnum, buildings, residences, userResidences, contacts, commonSpaces, bookings, userBookingRestrictions, userTimeLimits, insertBuildingSchema, insertResidenceSchema, insertUserResidenceSchema, insertContactSchema, insertCommonSpaceSchema, insertBookingSchema, insertUserBookingRestrictionSchema, insertUserTimeLimitSchema;
var init_property = __esm({
    "shared/schemas/property.ts"() {
        init_core();
        buildingTypeEnum = (0, pg_core_2.pgEnum)("building_type", ["apartment", "condo", "rental"]);
        contactEntityEnum = (0, pg_core_2.pgEnum)("contact_entity", [
            "organization",
            "building",
            "residence"
        ]);
        contactCategoryEnum = (0, pg_core_2.pgEnum)("contact_category", [
            "resident",
            "manager",
            "tenant",
            "maintenance",
            "emergency",
            "other"
        ]);
        bookingStatusEnum = (0, pg_core_2.pgEnum)("booking_status", ["confirmed", "cancelled"]);
        buildings = (0, pg_core_2.pgTable)("buildings", {
            id: (0, pg_core_2.varchar)("id").primaryKey().default((0, drizzle_orm_2.sql) `gen_random_uuid()`),
            organizationId: (0, pg_core_2.varchar)("organization_id").notNull().references(() => organizations.id, { onDelete: "cascade" }),
            name: (0, pg_core_2.text)("name").notNull(),
            address: (0, pg_core_2.text)("address").notNull(),
            city: (0, pg_core_2.text)("city").notNull(),
            province: (0, pg_core_2.text)("province").notNull().default("QC"),
            postalCode: (0, pg_core_2.text)("postal_code").notNull(),
            buildingType: buildingTypeEnum("building_type").notNull(),
            yearBuilt: (0, pg_core_2.integer)("year_built"),
            totalUnits: (0, pg_core_2.integer)("total_units").notNull(),
            totalFloors: (0, pg_core_2.integer)("total_floors"),
            parkingSpaces: (0, pg_core_2.integer)("parking_spaces"),
            storageSpaces: (0, pg_core_2.integer)("storage_spaces"),
            amenities: (0, pg_core_2.jsonb)("amenities"),
            // Array of amenities
            managementCompany: (0, pg_core_2.text)("management_company"),
            bankAccountNumber: (0, pg_core_2.text)("bank_account_number"),
            bankAccountNotes: (0, pg_core_2.text)("bank_account_notes"),
            // For reconciliation notes when updating account number
            bankAccountUpdatedAt: (0, pg_core_2.timestamp)("bank_account_updated_at"),
            bankAccountStartDate: (0, pg_core_2.timestamp)("bank_account_start_date"),
            // Date when account started tracking
            bankAccountStartAmount: (0, pg_core_2.numeric)("bank_account_start_amount", { precision: 10, scale: 2 }),
            // Starting balance
            bankAccountMinimums: (0, pg_core_2.text)("bank_account_minimums"),
            // JSON string of minimum balance settings
            inflationSettings: (0, pg_core_2.text)("inflation_settings"),
            // JSON string of inflation configuration by category
            isActive: (0, pg_core_2.boolean)("is_active").notNull().default(true),
            createdAt: (0, pg_core_2.timestamp)("created_at").defaultNow(),
            updatedAt: (0, pg_core_2.timestamp)("updated_at").defaultNow()
        });
        residences = (0, pg_core_2.pgTable)("residences", {
            id: (0, pg_core_2.varchar)("id").primaryKey().default((0, drizzle_orm_2.sql) `gen_random_uuid()`),
            buildingId: (0, pg_core_2.varchar)("building_id").notNull().references(() => buildings.id, { onDelete: "cascade" }),
            unitNumber: (0, pg_core_2.text)("unit_number").notNull(),
            floor: (0, pg_core_2.integer)("floor"),
            squareFootage: (0, pg_core_2.decimal)("square_footage", { precision: 8, scale: 2 }),
            bedrooms: (0, pg_core_2.integer)("bedrooms"),
            bathrooms: (0, pg_core_2.decimal)("bathrooms", { precision: 3, scale: 1 }),
            balcony: (0, pg_core_2.boolean)("balcony").default(false),
            parkingSpaceNumbers: (0, pg_core_2.text)("parking_space_numbers").array(),
            storageSpaceNumbers: (0, pg_core_2.text)("storage_space_numbers").array(),
            ownershipPercentage: (0, pg_core_2.decimal)("ownership_percentage", { precision: 5, scale: 2 }),
            // For condos, 0-100 scale
            monthlyFees: (0, pg_core_2.decimal)("monthly_fees", { precision: 10, scale: 2 }),
            isActive: (0, pg_core_2.boolean)("is_active").notNull().default(true),
            createdAt: (0, pg_core_2.timestamp)("created_at").defaultNow(),
            updatedAt: (0, pg_core_2.timestamp)("updated_at").defaultNow()
        });
        userResidences = (0, pg_core_2.pgTable)("user_residences", {
            id: (0, pg_core_2.varchar)("id").primaryKey().default((0, drizzle_orm_2.sql) `gen_random_uuid()`),
            userId: (0, pg_core_2.varchar)("user_id").notNull().references(() => users.id, { onDelete: "cascade" }),
            residenceId: (0, pg_core_2.varchar)("residence_id").notNull().references(() => residences.id, { onDelete: "cascade" }),
            relationshipType: (0, pg_core_2.text)("relationship_type").notNull(),
            // 'owner', 'tenant', 'occupant'
            startDate: (0, pg_core_2.date)("start_date").notNull(),
            endDate: (0, pg_core_2.date)("end_date"),
            isActive: (0, pg_core_2.boolean)("is_active").notNull().default(true),
            createdAt: (0, pg_core_2.timestamp)("created_at").defaultNow(),
            updatedAt: (0, pg_core_2.timestamp)("updated_at").defaultNow()
        });
        contacts = (0, pg_core_2.pgTable)("contacts", {
            id: (0, pg_core_2.uuid)("id").primaryKey().default((0, drizzle_orm_2.sql) `gen_random_uuid()`),
            name: (0, pg_core_2.text)("name").notNull(),
            email: (0, pg_core_2.text)("email"),
            phone: (0, pg_core_2.text)("phone"),
            entity: contactEntityEnum("entity").notNull(),
            entityId: (0, pg_core_2.varchar)("entity_id").notNull(),
            contactCategory: contactCategoryEnum("contact_category").notNull(),
            isActive: (0, pg_core_2.boolean)("is_active").notNull().default(true),
            createdAt: (0, pg_core_2.timestamp)("created_at").defaultNow(),
            updatedAt: (0, pg_core_2.timestamp)("updated_at").defaultNow()
        });
        commonSpaces = (0, pg_core_2.pgTable)("common_spaces", {
            id: (0, pg_core_2.varchar)("id").primaryKey().default((0, drizzle_orm_2.sql) `gen_random_uuid()`),
            name: (0, pg_core_2.varchar)("name", { length: 255 }).notNull(),
            description: (0, pg_core_2.text)("description"),
            buildingId: (0, pg_core_2.varchar)("building_id").notNull().references(() => buildings.id, { onDelete: "cascade" }),
            isReservable: (0, pg_core_2.boolean)("is_reservable").notNull().default(false),
            capacity: (0, pg_core_2.integer)("capacity"),
            contactPersonId: (0, pg_core_2.varchar)("contact_person_id").references(() => users.id, { onDelete: "set null" }),
            openingHours: (0, pg_core_2.jsonb)("opening_hours"),
            bookingRules: (0, pg_core_2.text)("booking_rules"),
            createdAt: (0, pg_core_2.timestamp)("created_at").defaultNow(),
            updatedAt: (0, pg_core_2.timestamp)("updated_at").defaultNow()
        });
        bookings = (0, pg_core_2.pgTable)("bookings", {
            id: (0, pg_core_2.varchar)("id").primaryKey().default((0, drizzle_orm_2.sql) `gen_random_uuid()`),
            commonSpaceId: (0, pg_core_2.varchar)("common_space_id").notNull().references(() => commonSpaces.id, { onDelete: "cascade" }),
            userId: (0, pg_core_2.varchar)("user_id").notNull().references(() => users.id, { onDelete: "cascade" }),
            startTime: (0, pg_core_2.timestamp)("start_time", { withTimezone: true }).notNull(),
            endTime: (0, pg_core_2.timestamp)("end_time", { withTimezone: true }).notNull(),
            status: bookingStatusEnum("status").notNull().default("confirmed"),
            createdAt: (0, pg_core_2.timestamp)("created_at").defaultNow(),
            updatedAt: (0, pg_core_2.timestamp)("updated_at").defaultNow()
        });
        userBookingRestrictions = (0, pg_core_2.pgTable)("user_booking_restrictions", {
            id: (0, pg_core_2.varchar)("id").primaryKey().default((0, drizzle_orm_2.sql) `gen_random_uuid()`),
            userId: (0, pg_core_2.varchar)("user_id").notNull().references(() => users.id, { onDelete: "cascade" }),
            commonSpaceId: (0, pg_core_2.varchar)("common_space_id").notNull().references(() => commonSpaces.id, { onDelete: "cascade" }),
            isBlocked: (0, pg_core_2.boolean)("is_blocked").notNull().default(true),
            reason: (0, pg_core_2.text)("reason"),
            createdAt: (0, pg_core_2.timestamp)("created_at").defaultNow(),
            updatedAt: (0, pg_core_2.timestamp)("updated_at").defaultNow()
        });
        userTimeLimits = (0, pg_core_2.pgTable)("user_time_limits", {
            id: (0, pg_core_2.varchar)("id").primaryKey().default((0, drizzle_orm_2.sql) `gen_random_uuid()`),
            userId: (0, pg_core_2.varchar)("user_id").notNull().references(() => users.id, { onDelete: "cascade" }),
            commonSpaceId: (0, pg_core_2.varchar)("common_space_id").references(() => commonSpaces.id, { onDelete: "cascade" }),
            // null means applies to all spaces
            limitType: (0, pg_core_2.varchar)("limit_type", { length: 20 }).notNull(),
            // 'monthly' or 'yearly'
            limitHours: (0, pg_core_2.integer)("limit_hours").notNull(),
            // Maximum hours allowed
            createdAt: (0, pg_core_2.timestamp)("created_at").defaultNow(),
            updatedAt: (0, pg_core_2.timestamp)("updated_at").defaultNow()
        });
        insertBuildingSchema = zod_3.z.object({
            organizationId: zod_3.z.string().uuid(),
            name: zod_3.z.string().min(1),
            address: zod_3.z.string(),
            city: zod_3.z.string(),
            province: zod_3.z.string().default("QC"),
            postalCode: zod_3.z.string(),
            buildingType: zod_3.z.string(),
            yearBuilt: zod_3.z.number().int().optional(),
            totalUnits: zod_3.z.number().int().optional(),
            totalFloors: zod_3.z.number().int().optional(),
            parkingSpaces: zod_3.z.number().int().optional(),
            storageSpaces: zod_3.z.number().int().optional(),
            amenities: zod_3.z.array(zod_3.z.string()).optional(),
            managementCompany: zod_3.z.string().optional(),
            bankAccountNumber: zod_3.z.string().optional(),
            bankAccountNotes: zod_3.z.string().optional(),
            bankAccountStartDate: zod_3.z.date().optional(),
            bankAccountStartAmount: zod_3.z.number().optional(),
            bankAccountMinimums: zod_3.z.record(zod_3.z.string(), zod_3.z.number()).optional()
        });
        insertResidenceSchema = zod_3.z.object({
            buildingId: zod_3.z.string().uuid(),
            unitNumber: zod_3.z.string(),
            floor: zod_3.z.number().int().optional(),
            squareFootage: zod_3.z.number().optional(),
            bedrooms: zod_3.z.number().int().optional(),
            bathrooms: zod_3.z.number().optional(),
            balcony: zod_3.z.boolean().optional(),
            parkingSpaceNumbers: zod_3.z.array(zod_3.z.string()).optional(),
            storageSpaceNumbers: zod_3.z.array(zod_3.z.string()).optional(),
            ownershipPercentage: zod_3.z.number().optional(),
            monthlyFees: zod_3.z.number().optional()
        });
        insertUserResidenceSchema = zod_3.z.object({
            userId: zod_3.z.string().uuid(),
            residenceId: zod_3.z.string().uuid(),
            relationshipType: zod_3.z.string(),
            startDate: zod_3.z.date(),
            endDate: zod_3.z.date().optional()
        });
        insertContactSchema = zod_3.z.object({
            name: zod_3.z.string(),
            email: zod_3.z.string().email().optional(),
            phone: zod_3.z.string().optional(),
            entity: zod_3.z.string(),
            entityId: zod_3.z.string().uuid(),
            contactCategory: zod_3.z.string()
        });
        insertCommonSpaceSchema = zod_3.z.object({
            name: zod_3.z.string().min(1).max(255),
            description: zod_3.z.string().optional(),
            buildingId: zod_3.z.string().uuid(),
            isReservable: zod_3.z.boolean().default(false),
            capacity: zod_3.z.number().int().optional(),
            contactPersonId: zod_3.z.string().uuid().optional(),
            openingHours: zod_3.z.array(zod_3.z.object({
                day: zod_3.z.string(),
                open: zod_3.z.string(),
                close: zod_3.z.string()
            })).optional(),
            bookingRules: zod_3.z.string().optional()
        });
        insertBookingSchema = zod_3.z.object({
            commonSpaceId: zod_3.z.string().uuid(),
            userId: zod_3.z.string().uuid(),
            startTime: zod_3.z.date(),
            endTime: zod_3.z.date(),
            status: zod_3.z.enum(["confirmed", "cancelled"]).default("confirmed")
        });
        insertUserBookingRestrictionSchema = zod_3.z.object({
            userId: zod_3.z.string().uuid(),
            commonSpaceId: zod_3.z.string().uuid(),
            isBlocked: zod_3.z.boolean().default(true),
            reason: zod_3.z.string().optional()
        });
        insertUserTimeLimitSchema = zod_3.z.object({
            userId: zod_3.z.string().uuid(),
            commonSpaceId: zod_3.z.string().uuid().optional(),
            // null means applies to all spaces
            limitType: zod_3.z.enum(["monthly", "yearly"]),
            limitHours: zod_3.z.number().int().min(1).max(8760)
            // Max 1 year worth of hours
        });
    }
});
// shared/schemas/financial.ts
const drizzle_orm_3 = require("drizzle-orm");
const pg_core_3 = require("drizzle-orm/pg-core");
const drizzle_zod_1 = require("drizzle-zod");
const zod_4 = require("zod");
var billStatusEnum, oldBillTypeEnum, billCategoryEnum, paymentTypeEnum, schedulePaymentEnum, bills, oldBills, budgets, monthlyBudgets, insertBillSchema, insertOldBillSchema, insertBudgetSchema, insertMonthlyBudgetSchema;
var init_financial = __esm({
    "shared/schemas/financial.ts"() {
        init_core();
        init_property();
        billStatusEnum = (0, pg_core_3.pgEnum)("bill_status", [
            "draft",
            "sent",
            "overdue",
            "paid",
            "cancelled"
        ]);
        oldBillTypeEnum = (0, pg_core_3.pgEnum)("old_bill_type", [
            "condo_fees",
            "special_assessment",
            "utility",
            "maintenance",
            "other"
        ]);
        billCategoryEnum = (0, pg_core_3.pgEnum)("bill_category", [
            "insurance",
            "maintenance",
            "salary",
            "utilities",
            "cleaning",
            "security",
            "landscaping",
            "professional_services",
            "administration",
            "repairs",
            "supplies",
            "taxes",
            "technology",
            "reserves",
            "other"
        ]);
        paymentTypeEnum = (0, pg_core_3.pgEnum)("payment_type", ["unique", "recurrent"]);
        schedulePaymentEnum = (0, pg_core_3.pgEnum)("schedule_payment", [
            "weekly",
            "monthly",
            "quarterly",
            "yearly",
            "custom"
        ]);
        bills = (0, pg_core_3.pgTable)("bills", {
            id: (0, pg_core_3.varchar)("id").primaryKey().default((0, drizzle_orm_3.sql) `gen_random_uuid()`),
            buildingId: (0, pg_core_3.varchar)("building_id").notNull().references(() => buildings.id),
            billNumber: (0, pg_core_3.text)("bill_number").notNull().unique(),
            title: (0, pg_core_3.text)("title").notNull(),
            description: (0, pg_core_3.text)("description"),
            category: billCategoryEnum("category").notNull(),
            vendor: (0, pg_core_3.text)("vendor"),
            // Company or service provider
            paymentType: paymentTypeEnum("payment_type").notNull(),
            // unique or recurrent
            schedulePayment: schedulePaymentEnum("schedule_payment"),
            // Only for recurrent payments
            scheduleCustom: (0, pg_core_3.date)("schedule_custom").array(),
            // Custom dates for custom schedules
            costs: (0, pg_core_3.decimal)("costs", { precision: 12, scale: 2 }).array().notNull(),
            // Array of costs for payment plan
            totalAmount: (0, pg_core_3.decimal)("total_amount", { precision: 12, scale: 2 }).notNull(),
            startDate: (0, pg_core_3.date)("start_date").notNull(),
            // When the bill series starts
            endDate: (0, pg_core_3.date)("end_date"),
            // For recurrent bills, when they end (optional for ongoing)
            status: billStatusEnum("status").notNull().default("draft"),
            documentPath: (0, pg_core_3.text)("document_path"),
            // Path to uploaded bill document
            documentName: (0, pg_core_3.text)("document_name"),
            // Original filename
            isAiAnalyzed: (0, pg_core_3.boolean)("is_ai_analyzed").default(false),
            aiAnalysisData: (0, pg_core_3.jsonb)("ai_analysis_data"),
            // Store AI-extracted data
            notes: (0, pg_core_3.text)("notes"),
            autoGenerated: (0, pg_core_3.boolean)("auto_generated").notNull().default(false),
            // Indicates if this bill was auto-generated
            reference: (0, pg_core_3.varchar)("reference").references(() => bills.id),
            // References the original bill for auto-generated bills
            createdBy: (0, pg_core_3.varchar)("created_by").notNull().references(() => users.id),
            createdAt: (0, pg_core_3.timestamp)("created_at").defaultNow(),
            updatedAt: (0, pg_core_3.timestamp)("updated_at").defaultNow()
        });
        oldBills = (0, pg_core_3.pgTable)("old_bills", {
            id: (0, pg_core_3.uuid)("id").primaryKey().default((0, drizzle_orm_3.sql) `gen_random_uuid()`),
            residenceId: (0, pg_core_3.varchar)("residence_id").notNull().references(() => residences.id),
            billNumber: (0, pg_core_3.text)("bill_number").notNull().unique(),
            type: oldBillTypeEnum("type").notNull(),
            description: (0, pg_core_3.text)("description").notNull(),
            amount: (0, pg_core_3.decimal)("amount", { precision: 12, scale: 2 }).notNull(),
            dueDate: (0, pg_core_3.date)("due_date").notNull(),
            issueDate: (0, pg_core_3.date)("issue_date").notNull(),
            status: billStatusEnum("status").notNull().default("draft"),
            notes: (0, pg_core_3.text)("notes"),
            lateFeeAmount: (0, pg_core_3.decimal)("late_fee_amount", { precision: 10, scale: 2 }),
            discountAmount: (0, pg_core_3.decimal)("discount_amount", { precision: 10, scale: 2 }),
            finalAmount: (0, pg_core_3.decimal)("final_amount", { precision: 12, scale: 2 }).notNull(),
            paymentReceivedDate: (0, pg_core_3.date)("payment_received_date"),
            createdBy: (0, pg_core_3.varchar)("created_by").notNull().references(() => users.id),
            createdAt: (0, pg_core_3.timestamp)("created_at").defaultNow(),
            updatedAt: (0, pg_core_3.timestamp)("updated_at").defaultNow()
        });
        budgets = (0, pg_core_3.pgTable)("budgets", {
            id: (0, pg_core_3.varchar)("id").primaryKey().default((0, drizzle_orm_3.sql) `gen_random_uuid()`),
            buildingId: (0, pg_core_3.varchar)("building_id").notNull().references(() => buildings.id),
            year: (0, pg_core_3.integer)("year").notNull(),
            name: (0, pg_core_3.text)("name").notNull(),
            description: (0, pg_core_3.text)("description"),
            category: (0, pg_core_3.text)("category").notNull(),
            // 'operational', 'reserve', 'special_project'
            budgetedAmount: (0, pg_core_3.decimal)("budgeted_amount", { precision: 12, scale: 2 }).notNull(),
            actualAmount: (0, pg_core_3.decimal)("actual_amount", { precision: 12, scale: 2 }).default("0"),
            variance: (0, pg_core_3.decimal)("variance", { precision: 12, scale: 2 }).default("0"),
            approvedBy: (0, pg_core_3.varchar)("approved_by").references(() => users.id),
            approvedDate: (0, pg_core_3.date)("approved_date"),
            isActive: (0, pg_core_3.boolean)("is_active").notNull().default(true),
            createdBy: (0, pg_core_3.varchar)("created_by").notNull().references(() => users.id),
            createdAt: (0, pg_core_3.timestamp)("created_at").defaultNow(),
            updatedAt: (0, pg_core_3.timestamp)("updated_at").defaultNow()
        });
        monthlyBudgets = (0, pg_core_3.pgTable)("monthly_budgets", {
            id: (0, pg_core_3.varchar)("id").primaryKey().default((0, drizzle_orm_3.sql) `gen_random_uuid()`),
            buildingId: (0, pg_core_3.varchar)("building_id").notNull().references(() => buildings.id),
            year: (0, pg_core_3.integer)("year").notNull(),
            month: (0, pg_core_3.integer)("month").notNull(),
            // 1-12
            incomeTypes: (0, pg_core_3.text)("income_types").array().notNull(),
            // Array of income categories from money_flow
            incomes: (0, pg_core_3.decimal)("incomes", { precision: 12, scale: 2 }).array().notNull(),
            // Array of income amounts corresponding to incomeTypes
            spendingTypes: (0, pg_core_3.text)("spending_types").array().notNull(),
            // Array of expense categories from money_flow
            spendings: (0, pg_core_3.decimal)("spendings", { precision: 12, scale: 2 }).array().notNull(),
            // Array of spending amounts corresponding to spendingTypes
            approved: (0, pg_core_3.boolean)("approved").notNull().default(false),
            approvedBy: (0, pg_core_3.varchar)("approved_by").references(() => users.id),
            approvedDate: (0, pg_core_3.timestamp)("approved_date"),
            originalBudgetId: (0, pg_core_3.varchar)("original_budget_id").references(() => monthlyBudgets.id),
            // References the original budget if this is an approved copy
            createdAt: (0, pg_core_3.timestamp)("created_at").defaultNow(),
            updatedAt: (0, pg_core_3.timestamp)("updated_at").defaultNow()
        });
        insertBillSchema = (0, drizzle_zod_1.createInsertSchema)(bills, {
            // Custom validations for strict schema compliance
            billNumber: zod_4.z.string().min(1, "Bill number is required"),
            title: zod_4.z.string().min(1, "Title is required"),
            category: zod_4.z.enum(["insurance", "maintenance", "salary", "utilities", "cleaning", "security", "landscaping", "professional_services", "administration", "repairs", "supplies", "taxes", "technology", "reserves", "other"]),
            paymentType: zod_4.z.enum(["unique", "recurrent"]),
            schedulePayment: zod_4.z.enum(["weekly", "monthly", "quarterly", "yearly", "custom"]).optional(),
            scheduleCustom: zod_4.z.array(zod_4.z.coerce.date()).optional().refine((dates) => !dates || dates.length === 0 || dates.every((date6) => date6 instanceof Date && !isNaN(date6.getTime())), "All custom schedule dates must be valid dates"),
            costs: zod_4.z.array(zod_4.z.coerce.number().positive("All costs must be positive")).min(1, "At least one cost is required"),
            totalAmount: zod_4.z.coerce.number().positive("Total amount must be positive"),
            startDate: zod_4.z.coerce.date(),
            endDate: zod_4.z.coerce.date().optional(),
            status: zod_4.z.enum(["draft", "sent", "overdue", "paid", "cancelled"]).default("draft"),
            autoGenerated: zod_4.z.boolean().default(false)
        }).omit({
            id: true,
            createdAt: true,
            updatedAt: true
        });
        insertOldBillSchema = zod_4.z.object({
            residenceId: zod_4.z.string().uuid(),
            billNumber: zod_4.z.string(),
            type: zod_4.z.string(),
            description: zod_4.z.string().optional(),
            amount: zod_4.z.number(),
            dueDate: zod_4.z.date(),
            issueDate: zod_4.z.date().optional(),
            status: zod_4.z.string().default("unpaid"),
            notes: zod_4.z.string().optional(),
            lateFeeAmount: zod_4.z.number().optional(),
            discountAmount: zod_4.z.number().optional(),
            finalAmount: zod_4.z.number().optional(),
            paymentReceivedDate: zod_4.z.date().optional(),
            createdBy: zod_4.z.string().uuid()
        });
        insertBudgetSchema = zod_4.z.object({
            buildingId: zod_4.z.string().uuid(),
            year: zod_4.z.number().int(),
            name: zod_4.z.string(),
            description: zod_4.z.string().optional(),
            category: zod_4.z.string(),
            budgetedAmount: zod_4.z.number(),
            actualAmount: zod_4.z.number().optional(),
            createdBy: zod_4.z.string().uuid()
        });
        insertMonthlyBudgetSchema = (0, drizzle_zod_1.createInsertSchema)(monthlyBudgets).omit({
            id: true,
            createdAt: true,
            updatedAt: true
        });
    }
});
// shared/schemas/operations.ts
const drizzle_orm_4 = require("drizzle-orm");
const pg_core_4 = require("drizzle-orm/pg-core");
const zod_5 = require("zod");
var maintenanceStatusEnum, maintenancePriorityEnum, notificationTypeEnum, demandTypeEnum, demandStatusEnum, bugStatusEnum, bugPriorityEnum, bugCategoryEnum, featureRequestStatusEnum, featureRequestCategoryEnum, maintenanceRequests, notifications, demands, demandComments, bugs, featureRequests, featureRequestUpvotes, insertMaintenanceRequestSchema, insertNotificationSchema, insertDemandSchema, insertDemandCommentSchema, insertBugSchema, insertFeatureRequestSchema, insertFeatureRequestUpvoteSchema;
var init_operations = __esm({
    "shared/schemas/operations.ts"() {
        init_core();
        init_property();
        maintenanceStatusEnum = (0, pg_core_4.pgEnum)("maintenance_status", [
            "submitted",
            "acknowledged",
            "in_progress",
            "completed",
            "cancelled"
        ]);
        maintenancePriorityEnum = (0, pg_core_4.pgEnum)("maintenance_priority", [
            "low",
            "medium",
            "high",
            "urgent",
            "emergency"
        ]);
        notificationTypeEnum = (0, pg_core_4.pgEnum)("notification_type", [
            "bill_reminder",
            "maintenance_update",
            "announcement",
            "system",
            "emergency"
        ]);
        demandTypeEnum = (0, pg_core_4.pgEnum)("demand_type", [
            "maintenance",
            "complaint",
            "information",
            "other"
        ]);
        demandStatusEnum = (0, pg_core_4.pgEnum)("demand_status", [
            "draft",
            "submitted",
            "under_review",
            "approved",
            "in_progress",
            "completed",
            "rejected",
            "cancelled"
        ]);
        bugStatusEnum = (0, pg_core_4.pgEnum)("bug_status", [
            "new",
            "acknowledged",
            "in_progress",
            "resolved",
            "closed"
        ]);
        bugPriorityEnum = (0, pg_core_4.pgEnum)("bug_priority", ["low", "medium", "high", "critical"]);
        bugCategoryEnum = (0, pg_core_4.pgEnum)("bug_category", [
            "ui_ux",
            "functionality",
            "performance",
            "data",
            "security",
            "integration",
            "other"
        ]);
        featureRequestStatusEnum = (0, pg_core_4.pgEnum)("feature_request_status", [
            "submitted",
            "under_review",
            "planned",
            "in_progress",
            "completed",
            "rejected"
        ]);
        featureRequestCategoryEnum = (0, pg_core_4.pgEnum)("feature_request_category", [
            "dashboard",
            "property_management",
            "resident_management",
            "financial_management",
            "maintenance",
            "document_management",
            "communication",
            "reports",
            "mobile_app",
            "integrations",
            "security",
            "performance",
            "other"
        ]);
        maintenanceRequests = (0, pg_core_4.pgTable)("maintenance_requests", {
            id: (0, pg_core_4.uuid)("id").primaryKey().default((0, drizzle_orm_4.sql) `gen_random_uuid()`),
            residenceId: (0, pg_core_4.varchar)("residence_id").notNull().references(() => residences.id),
            submittedBy: (0, pg_core_4.varchar)("submitted_by").notNull().references(() => users.id),
            assignedTo: (0, pg_core_4.varchar)("assigned_to").references(() => users.id),
            title: (0, pg_core_4.text)("title").notNull(),
            description: (0, pg_core_4.text)("description").notNull(),
            category: (0, pg_core_4.text)("category").notNull(),
            // 'plumbing', 'electrical', 'hvac', 'general', etc.
            priority: maintenancePriorityEnum("priority").notNull().default("medium"),
            status: maintenanceStatusEnum("status").notNull().default("submitted"),
            estimatedCost: (0, pg_core_4.decimal)("estimated_cost", { precision: 10, scale: 2 }),
            actualCost: (0, pg_core_4.decimal)("actual_cost", { precision: 10, scale: 2 }),
            scheduledDate: (0, pg_core_4.timestamp)("scheduled_date"),
            completedDate: (0, pg_core_4.timestamp)("completed_date"),
            notes: (0, pg_core_4.text)("notes"),
            images: (0, pg_core_4.jsonb)("images"),
            // Array of image URLs
            createdAt: (0, pg_core_4.timestamp)("created_at").defaultNow(),
            updatedAt: (0, pg_core_4.timestamp)("updated_at").defaultNow()
        });
        notifications = (0, pg_core_4.pgTable)("notifications", {
            id: (0, pg_core_4.varchar)("id").primaryKey().default((0, drizzle_orm_4.sql) `gen_random_uuid()`),
            userId: (0, pg_core_4.varchar)("user_id").notNull().references(() => users.id),
            type: notificationTypeEnum("type").notNull(),
            title: (0, pg_core_4.text)("title").notNull(),
            message: (0, pg_core_4.text)("message").notNull(),
            relatedEntityId: (0, pg_core_4.varchar)("related_entity_id"),
            // ID of related bill, maintenance request, etc.
            relatedEntityType: (0, pg_core_4.text)("related_entity_type"),
            // 'bill', 'maintenance_request', etc.
            isRead: (0, pg_core_4.boolean)("is_read").notNull().default(false),
            readAt: (0, pg_core_4.timestamp)("read_at"),
            createdAt: (0, pg_core_4.timestamp)("created_at").defaultNow()
        });
        demands = (0, pg_core_4.pgTable)("demands", {
            id: (0, pg_core_4.uuid)("id").primaryKey().default((0, drizzle_orm_4.sql) `gen_random_uuid()`),
            submitterId: (0, pg_core_4.varchar)("submitter_id").notNull().references(() => users.id),
            type: demandTypeEnum("type").notNull(),
            assignationResidenceId: (0, pg_core_4.varchar)("assignation_residence_id").references(() => residences.id),
            assignationBuildingId: (0, pg_core_4.varchar)("assignation_building_id").references(() => buildings.id),
            description: (0, pg_core_4.text)("description").notNull(),
            attachments: (0, pg_core_4.text)("attachments").array(),
            // Array of file URLs/paths for uploaded documents and images
            residenceId: (0, pg_core_4.varchar)("residence_id").references(() => residences.id),
            buildingId: (0, pg_core_4.varchar)("building_id").notNull().references(() => buildings.id),
            status: demandStatusEnum("status").notNull().default("draft"),
            reviewedBy: (0, pg_core_4.varchar)("reviewed_by").references(() => users.id),
            reviewedAt: (0, pg_core_4.timestamp)("reviewed_at"),
            reviewNotes: (0, pg_core_4.text)("review_notes"),
            createdAt: (0, pg_core_4.timestamp)("created_at").defaultNow(),
            updatedAt: (0, pg_core_4.timestamp)("updated_at").defaultNow()
        });
        demandComments = (0, pg_core_4.pgTable)("demands_comments", {
            id: (0, pg_core_4.text)("id").primaryKey().default((0, drizzle_orm_4.sql) `gen_random_uuid()`),
            demandId: (0, pg_core_4.uuid)("demand_id").notNull().references(() => demands.id),
            commenterId: (0, pg_core_4.text)("commenter_id").notNull().references(() => users.id),
            commentText: (0, pg_core_4.text)("comment_text").notNull(),
            commentType: (0, pg_core_4.text)("comment_type"),
            isInternal: (0, pg_core_4.boolean)("is_internal").default(false),
            createdAt: (0, pg_core_4.timestamp)("created_at").defaultNow(),
            updatedAt: (0, pg_core_4.timestamp)("updated_at").defaultNow()
        });
        bugs = (0, pg_core_4.pgTable)("bugs", {
            id: (0, pg_core_4.varchar)("id").primaryKey().default((0, drizzle_orm_4.sql) `gen_random_uuid()`),
            createdBy: (0, pg_core_4.varchar)("created_by").notNull().references(() => users.id),
            title: (0, pg_core_4.text)("title").notNull(),
            description: (0, pg_core_4.text)("description").notNull(),
            category: bugCategoryEnum("category").notNull(),
            page: (0, pg_core_4.text)("page").notNull(),
            // The page where the bug was found
            priority: bugPriorityEnum("priority").notNull().default("medium"),
            status: bugStatusEnum("status").notNull().default("new"),
            assignedTo: (0, pg_core_4.varchar)("assigned_to").references(() => users.id),
            resolvedAt: (0, pg_core_4.timestamp)("resolved_at"),
            resolvedBy: (0, pg_core_4.varchar)("resolved_by").references(() => users.id),
            notes: (0, pg_core_4.text)("notes"),
            // Internal notes for resolution
            reproductionSteps: (0, pg_core_4.text)("reproduction_steps"),
            // Steps to reproduce the bug
            environment: (0, pg_core_4.text)("environment"),
            // Browser, OS, device info
            createdAt: (0, pg_core_4.timestamp)("created_at").defaultNow(),
            updatedAt: (0, pg_core_4.timestamp)("updated_at").defaultNow()
        });
        featureRequests = (0, pg_core_4.pgTable)("feature_requests", {
            id: (0, pg_core_4.varchar)("id").primaryKey().default((0, drizzle_orm_4.sql) `gen_random_uuid()`),
            createdBy: (0, pg_core_4.varchar)("created_by").notNull().references(() => users.id),
            title: (0, pg_core_4.text)("title").notNull(),
            description: (0, pg_core_4.text)("description").notNull(),
            need: (0, pg_core_4.text)("need").notNull(),
            // The specific need this feature addresses
            category: featureRequestCategoryEnum("category").notNull(),
            page: (0, pg_core_4.text)("page").notNull(),
            // The page/section where this feature should be added
            status: featureRequestStatusEnum("status").notNull().default("submitted"),
            upvoteCount: (0, pg_core_4.integer)("upvote_count").notNull().default(0),
            assignedTo: (0, pg_core_4.varchar)("assigned_to").references(() => users.id),
            reviewedBy: (0, pg_core_4.varchar)("reviewed_by").references(() => users.id),
            reviewedAt: (0, pg_core_4.timestamp)("reviewed_at"),
            adminNotes: (0, pg_core_4.text)("admin_notes"),
            // Internal notes for admins only
            mergedIntoId: (0, pg_core_4.varchar)("merged_into_id"),
            // If merged into another request
            createdAt: (0, pg_core_4.timestamp)("created_at").defaultNow(),
            updatedAt: (0, pg_core_4.timestamp)("updated_at").defaultNow()
        });
        featureRequestUpvotes = (0, pg_core_4.pgTable)("feature_request_upvotes", {
            id: (0, pg_core_4.varchar)("id").primaryKey().default((0, drizzle_orm_4.sql) `gen_random_uuid()`),
            featureRequestId: (0, pg_core_4.varchar)("feature_request_id").notNull().references(() => featureRequests.id),
            userId: (0, pg_core_4.varchar)("user_id").notNull().references(() => users.id),
            createdAt: (0, pg_core_4.timestamp)("created_at").defaultNow()
        });
        insertMaintenanceRequestSchema = zod_5.z.object({
            residenceId: zod_5.z.string().uuid(),
            submittedBy: zod_5.z.string().uuid(),
            assignedTo: zod_5.z.string().uuid().optional(),
            title: zod_5.z.string(),
            description: zod_5.z.string(),
            category: zod_5.z.string(),
            priority: zod_5.z.string().default("medium"),
            estimatedCost: zod_5.z.number().optional(),
            scheduledDate: zod_5.z.date().optional(),
            notes: zod_5.z.string().optional(),
            images: zod_5.z.array(zod_5.z.string()).optional()
        });
        insertNotificationSchema = zod_5.z.object({
            userId: zod_5.z.string().uuid(),
            type: zod_5.z.enum(["bill_reminder", "maintenance_update", "announcement", "system", "emergency"]),
            title: zod_5.z.string(),
            message: zod_5.z.string(),
            relatedEntityId: zod_5.z.string().uuid().optional(),
            relatedEntityType: zod_5.z.string().optional()
        });
        insertDemandSchema = zod_5.z.object({
            submitterId: zod_5.z.string().uuid(),
            type: zod_5.z.enum(["maintenance", "complaint", "information", "other"]),
            assignationResidenceId: zod_5.z.string().uuid().optional(),
            assignationBuildingId: zod_5.z.string().uuid().optional(),
            description: zod_5.z.string().min(10, "Description must be at least 10 characters").max(2e3, "Description must not exceed 2000 characters"),
            attachments: zod_5.z.array(zod_5.z.string()).optional(),
            // Array of file URLs/paths
            residenceId: zod_5.z.string().uuid().optional(),
            buildingId: zod_5.z.string().uuid().optional(),
            status: zod_5.z.string().default("submitted"),
            reviewNotes: zod_5.z.string().optional()
        });
        insertDemandCommentSchema = zod_5.z.object({
            demandId: zod_5.z.string().uuid(),
            commenterId: zod_5.z.string().uuid(),
            commentText: zod_5.z.string().min(1, "Comment content is required").max(1e3, "Comment must not exceed 1000 characters"),
            commentType: zod_5.z.string().optional(),
            isInternal: zod_5.z.boolean().default(false)
        });
        insertBugSchema = zod_5.z.object({
            createdBy: zod_5.z.string().uuid(),
            title: zod_5.z.string().min(1, "Title is required").max(200, "Title must not exceed 200 characters"),
            description: zod_5.z.string().min(10, "Description must be at least 10 characters").max(2e3, "Description must not exceed 2000 characters"),
            category: zod_5.z.enum([
                "ui_ux",
                "functionality",
                "performance",
                "data",
                "security",
                "integration",
                "other"
            ]),
            page: zod_5.z.string().min(1, "Page is required"),
            priority: zod_5.z.enum(["low", "medium", "high", "critical"]).default("medium"),
            reproductionSteps: zod_5.z.string().optional(),
            environment: zod_5.z.string().optional()
        });
        insertFeatureRequestSchema = zod_5.z.object({
            createdBy: zod_5.z.string().uuid(),
            title: zod_5.z.string().min(1, "Title is required").max(200, "Title must not exceed 200 characters"),
            description: zod_5.z.string().min(10, "Description must be at least 10 characters").max(2e3, "Description must not exceed 2000 characters"),
            need: zod_5.z.string().min(5, "Need must be at least 5 characters").max(500, "Need must not exceed 500 characters"),
            category: zod_5.z.enum([
                "dashboard",
                "property_management",
                "resident_management",
                "financial_management",
                "maintenance",
                "document_management",
                "communication",
                "reports",
                "mobile_app",
                "integrations",
                "security",
                "performance",
                "other"
            ]),
            page: zod_5.z.string().min(1, "Page is required")
        });
        insertFeatureRequestUpvoteSchema = zod_5.z.object({
            featureRequestId: zod_5.z.string().uuid(),
            userId: zod_5.z.string().uuid()
        });
    }
});
// shared/schemas/documents.ts
const drizzle_orm_5 = require("drizzle-orm");
const pg_core_5 = require("drizzle-orm/pg-core");
const zod_6 = require("zod");
var documents, insertDocumentSchema, attachDocumentSchema, DOCUMENT_TYPES, ATTACHABLE_ENTITY_TYPES;
var init_documents = __esm({
    "shared/schemas/documents.ts"() {
        init_property();
        documents = (0, pg_core_5.pgTable)("documents", {
            id: (0, pg_core_5.varchar)("id").primaryKey().default((0, drizzle_orm_5.sql) `gen_random_uuid()`),
            name: (0, pg_core_5.text)("name").notNull(),
            description: (0, pg_core_5.text)("description"),
            documentType: (0, pg_core_5.text)("document_type").notNull(),
            filePath: (0, pg_core_5.text)("file_path").notNull().unique(),
            fileName: (0, pg_core_5.text)("file_name"),
            // Original filename
            fileSize: (0, pg_core_5.varchar)("file_size"),
            // File size in bytes
            mimeType: (0, pg_core_5.text)("mime_type"),
            // MIME type for proper handling
            isVisibleToTenants: (0, pg_core_5.boolean)("is_visible_to_tenants").default(false).notNull(),
            residenceId: (0, pg_core_5.varchar)("residence_id").references(() => residences.id),
            buildingId: (0, pg_core_5.varchar)("building_id").references(() => buildings.id),
            uploadedById: (0, pg_core_5.varchar)("uploaded_by_id").notNull(),
            // Support for document attachments to forms
            attachedToType: (0, pg_core_5.text)("attached_to_type"),
            // 'bill', 'feature_request', 'bug_report', etc.
            attachedToId: (0, pg_core_5.varchar)("attached_to_id"),
            // ID of the entity this document is attached to
            createdAt: (0, pg_core_5.timestamp)("created_at").defaultNow().notNull(),
            updatedAt: (0, pg_core_5.timestamp)("updated_at").defaultNow().notNull()
        });
        insertDocumentSchema = zod_6.z.object({
            name: zod_6.z.string().min(1, "Document name is required"),
            description: zod_6.z.string().optional(),
            documentType: zod_6.z.string().min(1, "Document type is required"),
            filePath: zod_6.z.string().min(1, "File path is required"),
            fileName: zod_6.z.string().optional(),
            fileSize: zod_6.z.string().optional(),
            mimeType: zod_6.z.string().optional(),
            isVisibleToTenants: zod_6.z.boolean().default(false),
            residenceId: zod_6.z.string().uuid().optional(),
            buildingId: zod_6.z.string().uuid().optional(),
            uploadedById: zod_6.z.string().uuid().min(1, "Uploaded by user ID is required"),
            attachedToType: zod_6.z.string().optional(),
            attachedToId: zod_6.z.string().uuid().optional()
        });
        attachDocumentSchema = zod_6.z.object({
            name: zod_6.z.string().min(1, "Document name is required"),
            description: zod_6.z.string().optional(),
            documentType: zod_6.z.enum(["attachment", "screenshot", "evidence", "supporting_document"]).default("attachment"),
            fileName: zod_6.z.string().min(1, "File name is required"),
            fileSize: zod_6.z.string().optional(),
            mimeType: zod_6.z.string().optional(),
            attachedToType: zod_6.z.enum(["bill", "feature_request", "bug_report", "maintenance_request"]),
            attachedToId: zod_6.z.string().uuid().min(1, "Attached entity ID is required"),
            uploadedById: zod_6.z.string().uuid().min(1, "Uploaded by user ID is required")
        });
        DOCUMENT_TYPES = {
            // Building/Residence documents
            BYLAW: "bylaw",
            FINANCIAL: "financial",
            MAINTENANCE: "maintenance",
            LEGAL: "legal",
            MEETING_MINUTES: "meeting_minutes",
            INSURANCE: "insurance",
            CONTRACTS: "contracts",
            PERMITS: "permits",
            INSPECTION: "inspection",
            LEASE: "lease",
            CORRESPONDENCE: "correspondence",
            UTILITIES: "utilities",
            OTHER: "other",
            // Form attachments
            ATTACHMENT: "attachment",
            SCREENSHOT: "screenshot",
            EVIDENCE: "evidence",
            SUPPORTING_DOCUMENT: "supporting_document"
        };
        ATTACHABLE_ENTITY_TYPES = {
            BILL: "bill",
            FEATURE_REQUEST: "feature_request",
            BUG_REPORT: "bug_report",
            MAINTENANCE_REQUEST: "maintenance_request"
        };
    }
});
// shared/schemas/development.ts
const drizzle_orm_6 = require("drizzle-orm");
const pg_core_6 = require("drizzle-orm/pg-core");
const zod_7 = require("zod");
var suggestionCategoryEnum, suggestionPriorityEnum, suggestionStatusEnum, featureStatusEnum, featurePriorityEnum, featureCategoryEnum, actionableItemStatusEnum, improvementSuggestions, features, actionableItems, developmentPillars, workspaceStatus, qualityMetrics, frameworkConfiguration, insertImprovementSuggestionSchema, insertFeatureSchema, insertActionableItemSchema, insertPillarSchema, insertWorkspaceStatusSchema, insertQualityMetricSchema, insertFrameworkConfigSchema;
var init_development = __esm({
    "shared/schemas/development.ts"() {
        init_core();
        suggestionCategoryEnum = (0, pg_core_6.pgEnum)("suggestion_category", [
            "Code Quality",
            "Security",
            "Testing",
            "Documentation",
            "Performance",
            "Continuous Improvement",
            "Replit AI Agent Monitoring",
            "Replit App"
        ]);
        suggestionPriorityEnum = (0, pg_core_6.pgEnum)("suggestion_priority", [
            "Low",
            "Medium",
            "High",
            "Critical"
        ]);
        suggestionStatusEnum = (0, pg_core_6.pgEnum)("suggestion_status", ["New", "Acknowledged", "Done"]);
        featureStatusEnum = (0, pg_core_6.pgEnum)("feature_status", [
            "submitted",
            "planned",
            "in-progress",
            "ai-analyzed",
            "completed",
            "cancelled"
        ]);
        featurePriorityEnum = (0, pg_core_6.pgEnum)("feature_priority", [
            "low",
            "medium",
            "high",
            "critical"
        ]);
        featureCategoryEnum = (0, pg_core_6.pgEnum)("feature_category", [
            "Dashboard & Home",
            "Property Management",
            "Resident Management",
            "Financial Management",
            "Maintenance & Requests",
            "Document Management",
            "Communication",
            "AI & Automation",
            "Compliance & Security",
            "Analytics & Reporting",
            "Integration & API",
            "Infrastructure & Performance",
            "Website"
        ]);
        actionableItemStatusEnum = (0, pg_core_6.pgEnum)("actionable_item_status", [
            "pending",
            "in-progress",
            "completed",
            "blocked"
        ]);
        improvementSuggestions = (0, pg_core_6.pgTable)("improvement_suggestions", {
            id: (0, pg_core_6.uuid)("id").primaryKey().default((0, drizzle_orm_6.sql) `gen_random_uuid()`),
            title: (0, pg_core_6.text)("title").notNull(),
            description: (0, pg_core_6.text)("description").notNull(),
            category: suggestionCategoryEnum("category").notNull(),
            priority: suggestionPriorityEnum("priority").notNull(),
            status: suggestionStatusEnum("status").notNull().default("New"),
            filePath: (0, pg_core_6.text)("file_path"),
            technicalDetails: (0, pg_core_6.text)("technical_details"),
            businessImpact: (0, pg_core_6.text)("business_impact"),
            implementationEffort: (0, pg_core_6.text)("implementation_effort"),
            quebecComplianceRelevance: (0, pg_core_6.text)("quebec_compliance_relevance"),
            suggestedBy: (0, pg_core_6.varchar)("suggested_by").references(() => users.id),
            assignedTo: (0, pg_core_6.varchar)("assigned_to").references(() => users.id),
            createdAt: (0, pg_core_6.timestamp)("created_at").defaultNow(),
            updatedAt: (0, pg_core_6.timestamp)("updated_at").defaultNow(),
            acknowledgedAt: (0, pg_core_6.timestamp)("acknowledged_at"),
            completedAt: (0, pg_core_6.timestamp)("completed_at")
        });
        features = (0, pg_core_6.pgTable)("features", {
            id: (0, pg_core_6.uuid)("id").primaryKey().default((0, drizzle_orm_6.sql) `gen_random_uuid()`),
            name: (0, pg_core_6.text)("name").notNull(),
            description: (0, pg_core_6.text)("description").notNull(),
            category: featureCategoryEnum("category").notNull(),
            status: featureStatusEnum("status").notNull().default("submitted"),
            priority: featurePriorityEnum("priority").notNull().default("medium"),
            requestedBy: (0, pg_core_6.text)("requested_by"),
            assignedTo: (0, pg_core_6.text)("assigned_to"),
            estimatedHours: (0, pg_core_6.integer)("estimated_hours"),
            actualHours: (0, pg_core_6.integer)("actual_hours"),
            startDate: (0, pg_core_6.date)("start_date"),
            completedDate: (0, pg_core_6.date)("completed_date"),
            isPublicRoadmap: (0, pg_core_6.boolean)("is_public_roadmap").notNull().default(true),
            tags: (0, pg_core_6.jsonb)("tags"),
            metadata: (0, pg_core_6.jsonb)("metadata"),
            createdAt: (0, pg_core_6.timestamp)("created_at").defaultNow(),
            updatedAt: (0, pg_core_6.timestamp)("updated_at").defaultNow(),
            businessObjective: (0, pg_core_6.text)("business_objective"),
            targetUsers: (0, pg_core_6.text)("target_users"),
            successMetrics: (0, pg_core_6.text)("success_metrics"),
            technicalComplexity: (0, pg_core_6.text)("technical_complexity"),
            dependencies: (0, pg_core_6.text)("dependencies"),
            userFlow: (0, pg_core_6.text)("user_flow"),
            aiAnalysisResult: (0, pg_core_6.jsonb)("ai_analysis_result"),
            aiAnalyzedAt: (0, pg_core_6.timestamp)("ai_analyzed_at"),
            isStrategicPath: (0, pg_core_6.boolean)("is_strategic_path").notNull().default(false),
            syncedAt: (0, pg_core_6.timestamp)("synced_at")
        });
        actionableItems = (0, pg_core_6.pgTable)("actionable_items", {
            id: (0, pg_core_6.uuid)("id").primaryKey().default((0, drizzle_orm_6.sql) `gen_random_uuid()`),
            featureId: (0, pg_core_6.uuid)("feature_id").notNull().references(() => features.id),
            title: (0, pg_core_6.text)("title").notNull(),
            description: (0, pg_core_6.text)("description").notNull(),
            type: (0, pg_core_6.text)("type").notNull(),
            // 'code', 'test', 'documentation', 'design', etc.
            status: actionableItemStatusEnum("status").notNull().default("pending"),
            estimatedHours: (0, pg_core_6.integer)("estimated_hours"),
            actualHours: (0, pg_core_6.integer)("actual_hours"),
            assignedTo: (0, pg_core_6.varchar)("assigned_to").references(() => users.id),
            dependencies: (0, pg_core_6.jsonb)("dependencies"),
            // Array of other actionable item IDs
            acceptanceCriteria: (0, pg_core_6.text)("acceptance_criteria"),
            implementation_notes: (0, pg_core_6.text)("implementation_notes"),
            // AI-generated analysis fields
            technicalDetails: (0, pg_core_6.text)("technical_details"),
            implementationPrompt: (0, pg_core_6.text)("implementation_prompt"),
            testingRequirements: (0, pg_core_6.text)("testing_requirements"),
            estimatedEffort: (0, pg_core_6.text)("estimated_effort"),
            orderIndex: (0, pg_core_6.integer)("order_index").default(0).notNull(),
            createdAt: (0, pg_core_6.timestamp)("created_at").defaultNow(),
            updatedAt: (0, pg_core_6.timestamp)("updated_at").defaultNow(),
            startedAt: (0, pg_core_6.timestamp)("started_at"),
            completedAt: (0, pg_core_6.timestamp)("completed_at")
        });
        developmentPillars = (0, pg_core_6.pgTable)("development_pillars", {
            id: (0, pg_core_6.varchar)("id").primaryKey().default((0, drizzle_orm_6.sql) `gen_random_uuid()`),
            name: (0, pg_core_6.text)("name").notNull(),
            description: (0, pg_core_6.text)("description").notNull(),
            status: (0, pg_core_6.text)("status").notNull().default("pending"),
            // 'pending', 'in-progress', 'complete'
            order: (0, pg_core_6.text)("order").notNull(),
            configuration: (0, pg_core_6.jsonb)("configuration"),
            createdAt: (0, pg_core_6.timestamp)("created_at").defaultNow(),
            updatedAt: (0, pg_core_6.timestamp)("updated_at").defaultNow()
        });
        workspaceStatus = (0, pg_core_6.pgTable)("workspace_status", {
            id: (0, pg_core_6.varchar)("id").primaryKey().default((0, drizzle_orm_6.sql) `gen_random_uuid()`),
            component: (0, pg_core_6.text)("component").notNull(),
            status: (0, pg_core_6.text)("status").notNull().default("pending"),
            // 'pending', 'in-progress', 'complete'
            lastUpdated: (0, pg_core_6.timestamp)("last_updated").defaultNow()
        });
        qualityMetrics = (0, pg_core_6.pgTable)("quality_metrics", {
            id: (0, pg_core_6.varchar)("id").primaryKey().default((0, drizzle_orm_6.sql) `gen_random_uuid()`),
            metricType: (0, pg_core_6.text)("metric_type").notNull(),
            _value: (0, pg_core_6.text)("value").notNull(),
            timestamp: (0, pg_core_6.timestamp)("timestamp").defaultNow()
        });
        frameworkConfiguration = (0, pg_core_6.pgTable)("framework_configuration", {
            id: (0, pg_core_6.varchar)("id").primaryKey().default((0, drizzle_orm_6.sql) `gen_random_uuid()`),
            _key: (0, pg_core_6.text)("key").notNull().unique(),
            _value: (0, pg_core_6.text)("value").notNull(),
            description: (0, pg_core_6.text)("description"),
            createdAt: (0, pg_core_6.timestamp)("created_at").defaultNow(),
            updatedAt: (0, pg_core_6.timestamp)("updated_at").defaultNow()
        });
        insertImprovementSuggestionSchema = zod_7.z.object({
            title: zod_7.z.string(),
            description: zod_7.z.string(),
            category: zod_7.z.string(),
            priority: zod_7.z.string().default("medium"),
            status: zod_7.z.string().default("new"),
            filePath: zod_7.z.string().optional(),
            technicalDetails: zod_7.z.string().optional(),
            businessImpact: zod_7.z.string().optional(),
            implementationEffort: zod_7.z.string().optional(),
            quebecComplianceRelevance: zod_7.z.string().optional(),
            suggestedBy: zod_7.z.string().uuid().optional(),
            assignedTo: zod_7.z.string().uuid().optional()
        });
        insertFeatureSchema = zod_7.z.object({
            name: zod_7.z.string(),
            description: zod_7.z.string(),
            category: zod_7.z.string(),
            status: zod_7.z.string().default("planned"),
            priority: zod_7.z.string().default("medium"),
            requestedBy: zod_7.z.string().uuid().optional(),
            assignedTo: zod_7.z.string().uuid().optional(),
            estimatedHours: zod_7.z.number().optional(),
            businessObjective: zod_7.z.string().optional(),
            targetUsers: zod_7.z.string().optional(),
            successMetrics: zod_7.z.string().optional(),
            technicalComplexity: zod_7.z.string().optional(),
            dependencies: zod_7.z.array(zod_7.z.string()).optional(),
            userFlow: zod_7.z.string().optional()
        });
        insertActionableItemSchema = zod_7.z.object({
            featureId: zod_7.z.string().uuid().optional(),
            title: zod_7.z.string(),
            description: zod_7.z.string(),
            type: zod_7.z.string(),
            status: zod_7.z.string().default("pending"),
            estimatedHours: zod_7.z.number().optional(),
            assignedTo: zod_7.z.string().uuid().optional(),
            dependencies: zod_7.z.array(zod_7.z.string()).optional(),
            acceptanceCriteria: zod_7.z.string().optional(),
            implementation_notes: zod_7.z.string().optional()
        });
        insertPillarSchema = zod_7.z.object({
            name: zod_7.z.string(),
            description: zod_7.z.string().optional(),
            status: zod_7.z.string().default("pending"),
            order: zod_7.z.number().int(),
            configuration: zod_7.z.record(zod_7.z.string(), zod_7.z.any()).optional()
        });
        insertWorkspaceStatusSchema = zod_7.z.object({
            component: zod_7.z.string(),
            status: zod_7.z.string().default("pending")
        });
        insertQualityMetricSchema = zod_7.z.object({
            metricType: zod_7.z.string(),
            _value: zod_7.z.string()
        });
        insertFrameworkConfigSchema = zod_7.z.object({
            _key: zod_7.z.string(),
            _value: zod_7.z.string(),
            description: zod_7.z.string().optional()
        });
    }
});
// shared/schemas/monitoring.ts
const drizzle_orm_7 = require("drizzle-orm");
const pg_core_7 = require("drizzle-orm/pg-core");
const zod_8 = require("zod");
var validationStatusEnum, issueSeverityEnum, metricTypeEnum, metricEffectivenessTracking, metricPredictions, predictionValidations, metricCalibrationData, qualityIssues, insertMetricEffectivenessTrackingSchema, insertMetricPredictionSchema, insertPredictionValidationSchema, insertMetricCalibrationDataSchema, insertQualityIssueSchema;
var init_monitoring = __esm({
    "shared/schemas/monitoring.ts"() {
        init_core();
        validationStatusEnum = (0, pg_core_7.pgEnum)("validation_status", [
            "pending",
            "true_positive",
            // Metric correctly predicted an issue
            "false_positive",
            // Metric predicted issue but none found
            "true_negative",
            // Metric correctly predicted no issue
            "false_negative"
            // Metric missed a real issue
        ]);
        issueSeverityEnum = (0, pg_core_7.pgEnum)("issue_severity", [
            "info",
            // Minor suggestions
            "low",
            // Non-critical improvements
            "medium",
            // Important but not urgent
            "high",
            // Significant issues affecting operations
            "critical",
            // Severe issues affecting compliance or safety
            "quebec_compliance"
            // Issues affecting Quebec Law 25 or provincial regulations
        ]);
        metricTypeEnum = (0, pg_core_7.pgEnum)("metric_type", [
            "code_coverage",
            "code_quality",
            "security_vulnerabilities",
            "build_time",
            "translation_coverage",
            "api_response_time",
            "memory_usage",
            "bundle_size",
            "database_query_time",
            "page_load_time",
            "accessibility_score",
            "seo_score",
            "quebec_compliance_score"
        ]);
        metricEffectivenessTracking = (0, pg_core_7.pgTable)("metric_effectiveness_tracking", {
            id: (0, pg_core_7.uuid)("id").primaryKey().default((0, drizzle_orm_7.sql) `gen_random_uuid()`),
            metricType: metricTypeEnum("metric_type").notNull(),
            calculatedValue: (0, pg_core_7.decimal)("calculated_value", { precision: 10, scale: 4 }).notNull(),
            actualOutcome: (0, pg_core_7.text)("actual_outcome").notNull(),
            accuracy: (0, pg_core_7.decimal)("accuracy", { precision: 5, scale: 4 }).notNull(),
            precision: (0, pg_core_7.decimal)("precision", { precision: 5, scale: 4 }).notNull(),
            recall: (0, pg_core_7.decimal)("recall", { precision: 5, scale: 4 }).notNull(),
            f1Score: (0, pg_core_7.decimal)("f1_score", { precision: 5, scale: 4 }).notNull(),
            calibrationScore: (0, pg_core_7.decimal)("calibration_score", { precision: 5, scale: 4 }),
            predictionConfidence: (0, pg_core_7.decimal)("prediction_confidence", { precision: 5, scale: 4 }),
            validationDate: (0, pg_core_7.date)("validation_date").notNull(),
            quebecComplianceImpact: (0, pg_core_7.boolean)("quebec_compliance_impact").notNull().default(false),
            propertyManagementContext: (0, pg_core_7.text)("property_management_context"),
            createdAt: (0, pg_core_7.timestamp)("created_at").defaultNow(),
            updatedAt: (0, pg_core_7.timestamp)("updated_at").defaultNow()
        });
        metricPredictions = (0, pg_core_7.pgTable)("metric_predictions", {
            id: (0, pg_core_7.uuid)("id").primaryKey().default((0, drizzle_orm_7.sql) `gen_random_uuid()`),
            metricType: metricTypeEnum("metric_type").notNull(),
            predictedValue: (0, pg_core_7.decimal)("predicted_value", { precision: 10, scale: 4 }).notNull(),
            confidenceLevel: (0, pg_core_7.decimal)("confidence_level", { precision: 5, scale: 4 }).notNull(),
            thresholdUsed: (0, pg_core_7.decimal)("threshold_used", { precision: 10, scale: 4 }).notNull(),
            contextData: (0, pg_core_7.jsonb)("context_data"),
            predictionReason: (0, pg_core_7.text)("prediction_reason"),
            expectedSeverity: issueSeverityEnum("expected_severity").notNull(),
            quebecComplianceRelevant: (0, pg_core_7.boolean)("quebec_compliance_relevant").notNull().default(false),
            propertyManagementCategory: (0, pg_core_7.text)("property_management_category"),
            filePath: (0, pg_core_7.text)("file_path"),
            lineNumber: (0, pg_core_7.integer)("line_number"),
            createdAt: (0, pg_core_7.timestamp)("created_at").defaultNow()
        });
        predictionValidations = (0, pg_core_7.pgTable)("prediction_validations", {
            id: (0, pg_core_7.uuid)("id").primaryKey().default((0, drizzle_orm_7.sql) `gen_random_uuid()`),
            predictionId: (0, pg_core_7.uuid)("prediction_id").notNull().references(() => metricPredictions.id),
            validationStatus: validationStatusEnum("validation_status").notNull(),
            actualOutcome: (0, pg_core_7.text)("actual_outcome").notNull(),
            validationMethod: (0, pg_core_7.text)("validation_method").notNull(),
            validatorId: (0, pg_core_7.varchar)("validator_id").references(() => users.id),
            timeTaken: (0, pg_core_7.integer)("time_taken"),
            // Hours to validate
            impactLevel: issueSeverityEnum("impact_level"),
            resolutionActions: (0, pg_core_7.text)("resolution_actions"),
            quebecComplianceNotes: (0, pg_core_7.text)("quebec_compliance_notes"),
            costImpact: (0, pg_core_7.decimal)("cost_impact", { precision: 10, scale: 2 }),
            validatedAt: (0, pg_core_7.timestamp)("validated_at").notNull(),
            createdAt: (0, pg_core_7.timestamp)("created_at").defaultNow()
        });
        metricCalibrationData = (0, pg_core_7.pgTable)("metric_calibration_data", {
            id: (0, pg_core_7.uuid)("id").primaryKey().default((0, drizzle_orm_7.sql) `gen_random_uuid()`),
            metricType: metricTypeEnum("metric_type").notNull(),
            calibrationModel: (0, pg_core_7.text)("calibration_model").notNull(),
            trainingDataSize: (0, pg_core_7.integer)("training_data_size").notNull(),
            accuracy: (0, pg_core_7.decimal)("accuracy", { precision: 5, scale: 4 }).notNull(),
            precision: (0, pg_core_7.decimal)("precision", { precision: 5, scale: 4 }).notNull(),
            recall: (0, pg_core_7.decimal)("recall", { precision: 5, scale: 4 }).notNull(),
            f1Score: (0, pg_core_7.decimal)("f1_score", { precision: 5, scale: 4 }).notNull(),
            crossValidationScore: (0, pg_core_7.decimal)("cross_validation_score", { precision: 5, scale: 4 }),
            featureImportance: (0, pg_core_7.jsonb)("feature_importance"),
            hyperparameters: (0, pg_core_7.jsonb)("hyperparameters"),
            quebecSpecificFactors: (0, pg_core_7.jsonb)("quebec_specific_factors"),
            lastTrainingDate: (0, pg_core_7.date)("last_training_date").notNull(),
            modelVersion: (0, pg_core_7.text)("model_version").notNull(),
            isActive: (0, pg_core_7.boolean)("is_active").notNull().default(true),
            performanceMetrics: (0, pg_core_7.jsonb)("performance_metrics"),
            createdAt: (0, pg_core_7.timestamp)("created_at").defaultNow(),
            updatedAt: (0, pg_core_7.timestamp)("updated_at").defaultNow()
        });
        qualityIssues = (0, pg_core_7.pgTable)("quality_issues", {
            id: (0, pg_core_7.uuid)("id").primaryKey().default((0, drizzle_orm_7.sql) `gen_random_uuid()`),
            title: (0, pg_core_7.text)("title").notNull(),
            description: (0, pg_core_7.text)("description").notNull(),
            category: (0, pg_core_7.text)("category").notNull(),
            severity: issueSeverityEnum("severity").notNull(),
            filePath: (0, pg_core_7.text)("file_path").notNull(),
            lineNumber: (0, pg_core_7.integer)("line_number"),
            detectionMethod: (0, pg_core_7.text)("detection_method").notNull(),
            detectedBy: (0, pg_core_7.varchar)("detected_by").references(() => users.id),
            relatedMetricType: metricTypeEnum("related_metric_type"),
            wasPredicted: (0, pg_core_7.boolean)("was_predicted").notNull().default(false),
            predictionId: (0, pg_core_7.uuid)("prediction_id").references(() => metricPredictions.id),
            resolutionStatus: (0, pg_core_7.text)("resolution_status").notNull().default("open"),
            resolutionTime: (0, pg_core_7.integer)("resolution_time"),
            // Hours to resolve
            resolutionActions: (0, pg_core_7.text)("resolution_actions"),
            quebecComplianceRelated: (0, pg_core_7.boolean)("quebec_compliance_related").notNull().default(false),
            propertyManagementImpact: (0, pg_core_7.text)("property_management_impact"),
            costToFix: (0, pg_core_7.decimal)("cost_to_fix", { precision: 10, scale: 2 }),
            actualCost: (0, pg_core_7.decimal)("actual_cost", { precision: 10, scale: 2 }),
            discoveredAt: (0, pg_core_7.timestamp)("discovered_at").notNull(),
            resolvedAt: (0, pg_core_7.timestamp)("resolved_at"),
            createdAt: (0, pg_core_7.timestamp)("created_at").defaultNow(),
            updatedAt: (0, pg_core_7.timestamp)("updated_at").defaultNow()
        });
        insertMetricEffectivenessTrackingSchema = zod_8.z.object({
            metricType: zod_8.z.enum([
                "code_coverage",
                "code_quality",
                "security_vulnerabilities",
                "build_time",
                "translation_coverage",
                "api_response_time",
                "deployment_success_rate",
                "user_satisfaction",
                "performance_score",
                "test_reliability",
                "quebec_compliance_score",
                "maintenance_productivity"
            ]),
            calculatedValue: zod_8.z.number(),
            actualOutcome: zod_8.z.number(),
            accuracy: zod_8.z.number(),
            precision: zod_8.z.number(),
            recall: zod_8.z.number(),
            f1Score: zod_8.z.number(),
            calibrationScore: zod_8.z.number(),
            predictionConfidence: zod_8.z.number(),
            validationDate: zod_8.z.date(),
            quebecComplianceImpact: zod_8.z.string().optional(),
            propertyManagementContext: zod_8.z.string().optional()
        });
        insertMetricPredictionSchema = zod_8.z.object({
            metricType: zod_8.z.enum([
                "code_coverage",
                "code_quality",
                "security_vulnerabilities",
                "build_time",
                "translation_coverage",
                "api_response_time",
                "deployment_success_rate",
                "user_satisfaction",
                "performance_score",
                "test_reliability",
                "quebec_compliance_score",
                "maintenance_productivity"
            ]),
            predictedValue: zod_8.z.number(),
            confidenceLevel: zod_8.z.number(),
            thresholdUsed: zod_8.z.number(),
            contextData: zod_8.z.record(zod_8.z.string(), zod_8.z.any()).optional(),
            predictionReason: zod_8.z.string(),
            expectedSeverity: zod_8.z.string(),
            quebecComplianceRelevant: zod_8.z.boolean().default(false),
            propertyManagementCategory: zod_8.z.string().optional(),
            filePath: zod_8.z.string(),
            lineNumber: zod_8.z.number().int().optional()
        });
        insertPredictionValidationSchema = zod_8.z.object({
            predictionId: zod_8.z.string().uuid(),
            validationStatus: zod_8.z.enum(["validated", "failed", "partially_validated", "needs_review"]),
            actualOutcome: zod_8.z.number(),
            validationMethod: zod_8.z.string(),
            validatorId: zod_8.z.string().uuid().optional(),
            timeTaken: zod_8.z.number().optional(),
            impactLevel: zod_8.z.string().optional(),
            resolutionActions: zod_8.z.string().optional(),
            quebecComplianceNotes: zod_8.z.string().optional(),
            costImpact: zod_8.z.number().optional(),
            validatedAt: zod_8.z.date()
        });
        insertMetricCalibrationDataSchema = zod_8.z.object({
            metricType: zod_8.z.string(),
            calibrationModel: zod_8.z.string(),
            trainingDataSize: zod_8.z.number().int(),
            accuracy: zod_8.z.number(),
            precision: zod_8.z.number(),
            recall: zod_8.z.number(),
            f1Score: zod_8.z.number(),
            crossValidationScore: zod_8.z.number(),
            featureImportance: zod_8.z.record(zod_8.z.string(), zod_8.z.number()).optional(),
            hyperparameters: zod_8.z.record(zod_8.z.string(), zod_8.z.any()).optional(),
            quebecSpecificFactors: zod_8.z.record(zod_8.z.string(), zod_8.z.any()).optional(),
            lastTrainingDate: zod_8.z.date(),
            modelVersion: zod_8.z.string(),
            isActive: zod_8.z.boolean().default(true),
            performanceMetrics: zod_8.z.record(zod_8.z.string(), zod_8.z.number()).optional()
        });
        insertQualityIssueSchema = zod_8.z.object({
            title: zod_8.z.string(),
            description: zod_8.z.string(),
            category: zod_8.z.string(),
            severity: zod_8.z.string(),
            filePath: zod_8.z.string(),
            lineNumber: zod_8.z.number().int().optional(),
            detectionMethod: zod_8.z.string(),
            detectedBy: zod_8.z.string().uuid().optional(),
            relatedMetricType: zod_8.z.string().optional(),
            wasPredicted: zod_8.z.boolean().default(false),
            predictionId: zod_8.z.string().uuid().optional(),
            resolutionStatus: zod_8.z.string().default("open"),
            resolutionTime: zod_8.z.number().int().optional(),
            resolutionActions: zod_8.z.string().optional(),
            quebecComplianceRelated: zod_8.z.boolean().default(false),
            propertyManagementImpact: zod_8.z.string().optional(),
            costToFix: zod_8.z.number().optional(),
            actualCost: zod_8.z.number().optional(),
            discoveredAt: zod_8.z.date(),
            resolvedAt: zod_8.z.date().optional()
        });
    }
});
// shared/schemas/infrastructure.ts
const drizzle_orm_8 = require("drizzle-orm");
const pg_core_8 = require("drizzle-orm/pg-core");
const zod_9 = require("zod");
var sslStatusEnum, sslCertificates, sessions, insertSslCertificateSchema, insertSessionSchema;
var init_infrastructure = __esm({
    "shared/schemas/infrastructure.ts"() {
        init_core();
        sslStatusEnum = (0, pg_core_8.pgEnum)("ssl_status", [
            "active",
            "pending",
            "expired",
            "revoked",
            "failed"
        ]);
        sslCertificates = (0, pg_core_8.pgTable)("ssl_certificates", {
            id: (0, pg_core_8.uuid)("id").primaryKey().default((0, drizzle_orm_8.sql) `gen_random_uuid()`),
            domain: (0, pg_core_8.text)("domain").notNull().unique(),
            certificateData: (0, pg_core_8.text)("certificate_data").notNull(),
            privateKey: (0, pg_core_8.text)("private_key").notNull(),
            issuer: (0, pg_core_8.text)("issuer").notNull(),
            subject: (0, pg_core_8.text)("subject").notNull(),
            serialNumber: (0, pg_core_8.text)("serial_number").notNull(),
            fingerprint: (0, pg_core_8.text)("fingerprint").notNull(),
            validFrom: (0, pg_core_8.timestamp)("valid_from").notNull(),
            validTo: (0, pg_core_8.timestamp)("valid_to").notNull(),
            status: sslStatusEnum("status").notNull().default("pending"),
            autoRenew: (0, pg_core_8.boolean)("auto_renew").notNull().default(true),
            renewalAttempts: (0, pg_core_8.integer)("renewal_attempts").notNull().default(0),
            maxRenewalAttempts: (0, pg_core_8.integer)("max_renewal_attempts").notNull().default(3),
            dnsProvider: (0, pg_core_8.text)("dns_provider"),
            lastRenewalAttempt: (0, pg_core_8.timestamp)("last_renewal_attempt"),
            nextRenewalDate: (0, pg_core_8.timestamp)("next_renewal_date"),
            // Additional SSL management fields
            certificateChain: (0, pg_core_8.text)("certificate_chain"),
            renewalError: (0, pg_core_8.text)("renewal_error"),
            dnsCredentials: (0, pg_core_8.text)("dns_credentials"),
            notificationEmails: (0, pg_core_8.text)("notification_emails"),
            createdBy: (0, pg_core_8.varchar)("created_by").notNull().references(() => users.id),
            createdAt: (0, pg_core_8.timestamp)("created_at").defaultNow(),
            updatedAt: (0, pg_core_8.timestamp)("updated_at").defaultNow()
        });
        sessions = (0, pg_core_8.pgTable)("session", {
            sid: (0, pg_core_8.varchar)("sid").primaryKey().notNull(),
            sess: (0, pg_core_8.json)("sess").notNull(),
            expire: (0, pg_core_8.timestamp)("expire", { precision: 6 }).notNull()
        });
        insertSslCertificateSchema = zod_9.z.object({
            domain: zod_9.z.string(),
            certificateData: zod_9.z.string(),
            privateKey: zod_9.z.string(),
            issuer: zod_9.z.string(),
            subject: zod_9.z.string(),
            serialNumber: zod_9.z.string(),
            fingerprint: zod_9.z.string(),
            validFrom: zod_9.z.date(),
            validTo: zod_9.z.date(),
            status: zod_9.z.string().default("pending"),
            autoRenew: zod_9.z.boolean().default(true),
            renewalAttempts: zod_9.z.number().int().default(0),
            maxRenewalAttempts: zod_9.z.number().int().default(3),
            dnsProvider: zod_9.z.string().optional(),
            lastRenewalAttempt: zod_9.z.date().optional(),
            nextRenewalDate: zod_9.z.date().optional(),
            createdBy: zod_9.z.string().uuid()
        });
        insertSessionSchema = zod_9.z.object({
            sid: zod_9.z.string(),
            sess: zod_9.z.any(),
            // JSON data
            expire: zod_9.z.date()
        });
    }
});
// shared/schema.ts
var schema_exports = {};
__export(schema_exports, {
    ATTACHABLE_ENTITY_TYPES: () => ATTACHABLE_ENTITY_TYPES,
    DOCUMENT_TYPES: () => DOCUMENT_TYPES,
    actionEnum: () => actionEnum,
    actionableItemStatusEnum: () => actionableItemStatusEnum,
    actionableItems: () => actionableItems,
    attachDocumentSchema: () => attachDocumentSchema,
    billCategoryEnum: () => billCategoryEnum,
    billStatusEnum: () => billStatusEnum,
    bills: () => bills,
    bookingStatusEnum: () => bookingStatusEnum,
    bookings: () => bookings,
    budgets: () => budgets,
    bugCategoryEnum: () => bugCategoryEnum,
    bugPriorityEnum: () => bugPriorityEnum,
    bugStatusEnum: () => bugStatusEnum,
    bugs: () => bugs,
    buildingTypeEnum: () => buildingTypeEnum,
    buildings: () => buildings,
    commonSpaces: () => commonSpaces,
    contactCategoryEnum: () => contactCategoryEnum,
    contactEntityEnum: () => contactEntityEnum,
    contacts: () => contacts,
    demandComments: () => demandComments,
    demandStatusEnum: () => demandStatusEnum,
    demandTypeEnum: () => demandTypeEnum,
    demands: () => demands,
    developmentPillars: () => developmentPillars,
    documents: () => documents,
    featureCategoryEnum: () => featureCategoryEnum,
    featurePriorityEnum: () => featurePriorityEnum,
    featureRequestCategoryEnum: () => featureRequestCategoryEnum,
    featureRequestStatusEnum: () => featureRequestStatusEnum,
    featureRequestUpvotes: () => featureRequestUpvotes,
    featureRequests: () => featureRequests,
    featureStatusEnum: () => featureStatusEnum,
    features: () => features,
    frameworkConfiguration: () => frameworkConfiguration,
    improvementSuggestions: () => improvementSuggestions,
    insertActionableItemSchema: () => insertActionableItemSchema,
    insertBillSchema: () => insertBillSchema,
    insertBookingSchema: () => insertBookingSchema,
    insertBudgetSchema: () => insertBudgetSchema,
    insertBugSchema: () => insertBugSchema,
    insertBuildingSchema: () => insertBuildingSchema,
    insertCommonSpaceSchema: () => insertCommonSpaceSchema,
    insertContactSchema: () => insertContactSchema,
    insertDemandCommentSchema: () => insertDemandCommentSchema,
    insertDemandSchema: () => insertDemandSchema,
    insertDocumentSchema: () => insertDocumentSchema,
    insertFeatureRequestSchema: () => insertFeatureRequestSchema,
    insertFeatureRequestUpvoteSchema: () => insertFeatureRequestUpvoteSchema,
    insertFeatureSchema: () => insertFeatureSchema,
    insertFrameworkConfigSchema: () => insertFrameworkConfigSchema,
    insertImprovementSuggestionSchema: () => insertImprovementSuggestionSchema,
    insertInvitationAuditLogSchema: () => insertInvitationAuditLogSchema,
    insertInvitationSchema: () => insertInvitationSchema,
    insertMaintenanceRequestSchema: () => insertMaintenanceRequestSchema,
    insertMetricCalibrationDataSchema: () => insertMetricCalibrationDataSchema,
    insertMetricEffectivenessTrackingSchema: () => insertMetricEffectivenessTrackingSchema,
    insertMetricPredictionSchema: () => insertMetricPredictionSchema,
    insertMonthlyBudgetSchema: () => insertMonthlyBudgetSchema,
    insertNotificationSchema: () => insertNotificationSchema,
    insertOldBillSchema: () => insertOldBillSchema,
    insertOrganizationSchema: () => insertOrganizationSchema,
    insertPasswordResetTokenSchema: () => insertPasswordResetTokenSchema,
    insertPermissionSchema: () => insertPermissionSchema,
    insertPillarSchema: () => insertPillarSchema,
    insertPredictionValidationSchema: () => insertPredictionValidationSchema,
    insertQualityIssueSchema: () => insertQualityIssueSchema,
    insertQualityMetricSchema: () => insertQualityMetricSchema,
    insertResidenceSchema: () => insertResidenceSchema,
    insertRolePermissionSchema: () => insertRolePermissionSchema,
    insertSessionSchema: () => insertSessionSchema,
    insertSslCertificateSchema: () => insertSslCertificateSchema,
    insertUserBookingRestrictionSchema: () => insertUserBookingRestrictionSchema,
    insertUserOrganizationSchema: () => insertUserOrganizationSchema,
    insertUserPermissionSchema: () => insertUserPermissionSchema,
    insertUserResidenceSchema: () => insertUserResidenceSchema,
    insertUserSchema: () => insertUserSchema,
    insertUserTimeLimitSchema: () => insertUserTimeLimitSchema,
    insertWorkspaceStatusSchema: () => insertWorkspaceStatusSchema,
    invitationAuditLog: () => invitationAuditLog,
    invitationStatusEnum: () => invitationStatusEnum,
    invitations: () => invitations,
    issueSeverityEnum: () => issueSeverityEnum,
    maintenancePriorityEnum: () => maintenancePriorityEnum,
    maintenanceRequests: () => maintenanceRequests,
    maintenanceStatusEnum: () => maintenanceStatusEnum,
    metricCalibrationData: () => metricCalibrationData,
    metricEffectivenessTracking: () => metricEffectivenessTracking,
    metricPredictions: () => metricPredictions,
    metricTypeEnum: () => metricTypeEnum,
    monthlyBudgets: () => monthlyBudgets,
    notificationTypeEnum: () => notificationTypeEnum,
    notifications: () => notifications,
    oldBillTypeEnum: () => oldBillTypeEnum,
    oldBills: () => oldBills,
    organizations: () => organizations,
    passwordResetTokens: () => passwordResetTokens,
    paymentTypeEnum: () => paymentTypeEnum,
    permissions: () => permissions,
    predictionValidations: () => predictionValidations,
    qualityIssues: () => qualityIssues,
    qualityMetrics: () => qualityMetrics,
    residences: () => residences,
    resourceTypeEnum: () => resourceTypeEnum,
    rolePermissions: () => rolePermissions,
    schedulePaymentEnum: () => schedulePaymentEnum,
    sessions: () => sessions,
    sslCertificates: () => sslCertificates,
    sslStatusEnum: () => sslStatusEnum,
    suggestionCategoryEnum: () => suggestionCategoryEnum,
    suggestionPriorityEnum: () => suggestionPriorityEnum,
    suggestionStatusEnum: () => suggestionStatusEnum,
    userBookingRestrictions: () => userBookingRestrictions,
    userOrganizations: () => userOrganizations,
    userPermissions: () => userPermissions,
    userResidences: () => userResidences,
    userRoleEnum: () => userRoleEnum,
    userTimeLimits: () => userTimeLimits,
    users: () => users,
    validationStatusEnum: () => validationStatusEnum,
    workspaceStatus: () => workspaceStatus
});
var init_schema = __esm({
    "shared/schema.ts"() {
        init_core();
        init_property();
        init_financial();
        init_operations();
        init_documents();
        init_development();
        init_monitoring();
        init_infrastructure();
        init_operations();
        init_documents();
        init_development();
        init_infrastructure();
    }
});
// server/db.ts
var db_exports = {};
__export(db_exports, {
    db: () => db,
    pool: () => pool,
    sql: () => sql10
});
const serverless_1 = require("@neondatabase/serverless");
const neon_http_1 = require("drizzle-orm/neon-http");
var databaseUrl, isUsingKoveoDb, sql10, schema, db, pool;
var init_db = __esm({
    "server/db.ts"() {
        init_config();
        init_schema();
        databaseUrl = config.database.url;
        if (!databaseUrl) {
            throw new Error("DATABASE_URL must be set. Did you forget to provision a database?");
        }
        isUsingKoveoDb = databaseUrl.includes("DATABASE_URL_KOVEO") || config.server.isProduction && process.env.DATABASE_URL_KOVEO;
        console.log("\u{1F517} Connecting to database with URL:", databaseUrl.substring(0, 50) + "...");
        console.log("\u{1F30D} Environment:", config.server.nodeEnv);
        console.log(`\u{1F4CA} Database: Using ${config.server.isProduction ? "PRODUCTION (DATABASE_URL_KOVEO)" : "DEVELOPMENT (DATABASE_URL)"} database`);
        sql10 = (0, serverless_1.neon)(databaseUrl, {
            arrayMode: false,
            fullResults: false
        });
        (async () => {
            try {
                const result = await sql10 `SELECT version()`;
                console.log("\u2705 Database connection successful:", result[0].version.substring(0, 50) + "...");
            }
            catch (error) {
                console.error("\u274C Database connection failed:", error.message);
            }
        })();
        schema = {
            users,
            organizations,
            buildings,
            residences,
            userOrganizations,
            userResidences,
            invitations,
            documents,
            bills,
            demands,
            commonSpaces,
            passwordResetTokens,
            maintenanceRequests,
            permissions,
            userPermissions,
            rolePermissions,
            budgets,
            monthlyBudgets
        };
        db = (0, neon_http_1.drizzle)(sql10, { schema });
        console.log("\u{1F4CA} Database initialized with", Object.keys(schema).length, "tables");
        pool = sql10;
    }
});
// server/database-optimization.ts
var database_optimization_exports = {};
__export(database_optimization_exports, {
    DatabaseMaintenance: () => DatabaseMaintenance,
    DatabaseOptimization: () => DatabaseOptimization,
    PaginationHelper: () => PaginationHelper,
    QueryOptimizer: () => QueryOptimizer
});
const drizzle_orm_9 = require("drizzle-orm");
var PaginationHelper, DatabaseOptimization, QueryOptimizer, DatabaseMaintenance;
var init_database_optimization = __esm({
    "server/database-optimization.ts"() {
        PaginationHelper = class {
            /**
             * Generates LIMIT and OFFSET clause for pagination.
             * @param options
             * @param _options
             */
            static getPaginationClause(_options) {
                const offset = (_options.page - 1) * _options.pageSize;
                return `LIMIT ${_options.pageSize} OFFSET ${offset}`;
            }
            /**
             * Generates ORDER BY clause for sorting.
             * @param options
             * @param _options
             */
            static getSortClause(_options) {
                if (!_options.sortBy) {
                    return "";
                }
                return `ORDER BY ${_options.sortBy} ${_options.sortDirection || "ASC"}`;
            }
            /**
             * Calculates total pages for pagination controls.
             * @param totalRecords
             * @param pageSize
             */
            static calculateTotalPages(totalRecords, pageSize) {
                return Math.ceil(totalRecords / pageSize);
            }
            /**
             * Validates pagination parameters.
             * @param options
             * @param _options
             */
            static validatePagination(_options) {
                if (_options.page < 1) {
                    throw new Error("Page number must be 1 or greater");
                }
                if (_options.pageSize < 1 || _options.pageSize > 1e3) {
                    throw new Error("Page size must be between 1 and 1000");
                }
            }
        };
        DatabaseOptimization = {
            /**
             * Core indexes for frequently queried foreign keys and search fields.
             * These indexes target the most common query patterns in property management.
             */
            coreIndexes: [
                // Users table indexes
                "CREATE INDEX CONCURRENTLY IF NOT EXISTS idx_users_email ON users(email)",
                "CREATE INDEX CONCURRENTLY IF NOT EXISTS idx_users_role ON users(role)",
                "CREATE INDEX CONCURRENTLY IF NOT EXISTS idx_users_active ON users(is_active)",
                "CREATE INDEX CONCURRENTLY IF NOT EXISTS idx_users_last_login ON users(last_login_at)",
                // Organizations table indexes
                "CREATE INDEX CONCURRENTLY IF NOT EXISTS idx_organizations_type ON organizations(type)",
                "CREATE INDEX CONCURRENTLY IF NOT EXISTS idx_organizations_active ON organizations(is_active)",
                "CREATE INDEX CONCURRENTLY IF NOT EXISTS idx_organizations_city ON organizations(city)",
                // Buildings table indexes
                "CREATE INDEX CONCURRENTLY IF NOT EXISTS idx_buildings_org_id ON buildings(organization_id)",
                "CREATE INDEX CONCURRENTLY IF NOT EXISTS idx_buildings_type ON buildings(building_type)",
                "CREATE INDEX CONCURRENTLY IF NOT EXISTS idx_buildings_active ON buildings(is_active)",
                "CREATE INDEX CONCURRENTLY IF NOT EXISTS idx_buildings_city ON buildings(city)",
                "CREATE INDEX CONCURRENTLY IF NOT EXISTS idx_buildings_postal ON buildings(postal_code)",
                // Residences table indexes
                "CREATE INDEX CONCURRENTLY IF NOT EXISTS idx_residences_building_id ON residences(building_id)",
                "CREATE INDEX CONCURRENTLY IF NOT EXISTS idx_residences_unit ON residences(unit_number)",
                "CREATE INDEX CONCURRENTLY IF NOT EXISTS idx_residences_active ON residences(is_active)",
                "CREATE INDEX CONCURRENTLY IF NOT EXISTS idx_residences_floor ON residences(floor)",
                // User-Residences relationship indexes
                "CREATE INDEX CONCURRENTLY IF NOT EXISTS idx_user_residences_user_id ON user_residences(user_id)",
                "CREATE INDEX CONCURRENTLY IF NOT EXISTS idx_user_residences_residence_id ON user_residences(residence_id)",
                "CREATE INDEX CONCURRENTLY IF NOT EXISTS idx_user_residences_active ON user_residences(is_active)",
                "CREATE INDEX CONCURRENTLY IF NOT EXISTS idx_user_residences_relationship ON user_residences(relationship_type)",
                "CREATE INDEX CONCURRENTLY IF NOT EXISTS idx_user_residences_dates ON user_residences(start_date, end_date)",
                // Bills table indexes
                "CREATE INDEX CONCURRENTLY IF NOT EXISTS idx_bills_residence_id ON bills(residence_id)",
                "CREATE INDEX CONCURRENTLY IF NOT EXISTS idx_bills_number ON bills(bill_number)",
                "CREATE INDEX CONCURRENTLY IF NOT EXISTS idx_bills_status ON bills(status)",
                "CREATE INDEX CONCURRENTLY IF NOT EXISTS idx_bills_type ON bills(type)",
                "CREATE INDEX CONCURRENTLY IF NOT EXISTS idx_bills_due_date ON bills(due_date)",
                "CREATE INDEX CONCURRENTLY IF NOT EXISTS idx_bills_created_by ON bills(created_by)",
                "CREATE INDEX CONCURRENTLY IF NOT EXISTS idx_bills_issue_date ON bills(issue_date)",
                // Maintenance requests indexes
                "CREATE INDEX CONCURRENTLY IF NOT EXISTS idx_maintenance_residence_id ON maintenance_requests(residence_id)",
                "CREATE INDEX CONCURRENTLY IF NOT EXISTS idx_maintenance_submitted_by ON maintenance_requests(submitted_by)",
                "CREATE INDEX CONCURRENTLY IF NOT EXISTS idx_maintenance_assigned_to ON maintenance_requests(assigned_to)",
                "CREATE INDEX CONCURRENTLY IF NOT EXISTS idx_maintenance_status ON maintenance_requests(status)",
                "CREATE INDEX CONCURRENTLY IF NOT EXISTS idx_maintenance_priority ON maintenance_requests(priority)",
                "CREATE INDEX CONCURRENTLY IF NOT EXISTS idx_maintenance_category ON maintenance_requests(category)",
                "CREATE INDEX CONCURRENTLY IF NOT EXISTS idx_maintenance_scheduled ON maintenance_requests(scheduled_date)",
                // Budgets table indexes
                "CREATE INDEX CONCURRENTLY IF NOT EXISTS idx_budgets_building_id ON budgets(building_id)",
                "CREATE INDEX CONCURRENTLY IF NOT EXISTS idx_budgets_year ON budgets(year)",
                "CREATE INDEX CONCURRENTLY IF NOT EXISTS idx_budgets_category ON budgets(category)",
                "CREATE INDEX CONCURRENTLY IF NOT EXISTS idx_budgets_active ON budgets(is_active)",
                "CREATE INDEX CONCURRENTLY IF NOT EXISTS idx_budgets_created_by ON budgets(created_by)",
                // Documents table indexes
                "CREATE INDEX CONCURRENTLY IF NOT EXISTS idx_documents_org_id ON documents(organization_id)",
                "CREATE INDEX CONCURRENTLY IF NOT EXISTS idx_documents_building_id ON documents(building_id)",
                "CREATE INDEX CONCURRENTLY IF NOT EXISTS idx_documents_residence_id ON documents(residence_id)",
                "CREATE INDEX CONCURRENTLY IF NOT EXISTS idx_documents_category ON documents(category)",
                "CREATE INDEX CONCURRENTLY IF NOT EXISTS idx_documents_public ON documents(is_public)",
                "CREATE INDEX CONCURRENTLY IF NOT EXISTS idx_documents_uploaded_by ON documents(uploaded_by)",
                // Notifications table indexes
                "CREATE INDEX CONCURRENTLY IF NOT EXISTS idx_notifications_user_id ON notifications(user_id)",
                "CREATE INDEX CONCURRENTLY IF NOT EXISTS idx_notifications_type ON notifications(type)",
                "CREATE INDEX CONCURRENTLY IF NOT EXISTS idx_notifications_read ON notifications(is_read)",
                "CREATE INDEX CONCURRENTLY IF NOT EXISTS idx_notifications_entity ON notifications(related_entity_id, related_entity_type)",
                "CREATE INDEX CONCURRENTLY IF NOT EXISTS idx_notifications_created ON notifications(created_at)"
            ],
            /**
             * Development framework indexes for quality metrics and pillars.
             */
            frameworkIndexes: [
                // Quality metrics indexes
                "CREATE INDEX CONCURRENTLY IF NOT EXISTS idx_quality_metrics_type ON quality_metrics(metric_type)",
                "CREATE INDEX CONCURRENTLY IF NOT EXISTS idx_quality_metrics_timestamp ON quality_metrics(timestamp)",
                // Framework configuration indexes
                "CREATE INDEX CONCURRENTLY IF NOT EXISTS idx_framework_config_key ON framework_configuration(_key)",
                "CREATE INDEX CONCURRENTLY IF NOT EXISTS idx_framework_config_updated ON framework_configuration(updated_at)",
                // Workspace status indexes
                "CREATE INDEX CONCURRENTLY IF NOT EXISTS idx_workspace_component ON workspace_status(component)",
                "CREATE INDEX CONCURRENTLY IF NOT EXISTS idx_workspace_status ON workspace_status(status)",
                "CREATE INDEX CONCURRENTLY IF NOT EXISTS idx_workspace_updated ON workspace_status(last_updated)",
                // Development pillars indexes
                "CREATE INDEX CONCURRENTLY IF NOT EXISTS idx_pillars_status ON development_pillars(status)",
                'CREATE INDEX CONCURRENTLY IF NOT EXISTS idx_pillars_order ON development_pillars("order")',
                // Metric effectiveness tracking indexes
                "CREATE INDEX CONCURRENTLY IF NOT EXISTS idx_metric_effectiveness_type ON metric_effectiveness_tracking(metric_type)",
                "CREATE INDEX CONCURRENTLY IF NOT EXISTS idx_metric_effectiveness_validation ON metric_effectiveness_tracking(validation_date)",
                "CREATE INDEX CONCURRENTLY IF NOT EXISTS idx_metric_effectiveness_compliance ON metric_effectiveness_tracking(quebec_compliance_impact)",
                // Metric predictions indexes
                "CREATE INDEX CONCURRENTLY IF NOT EXISTS idx_metric_predictions_type ON metric_predictions(metric_type)",
                "CREATE INDEX CONCURRENTLY IF NOT EXISTS idx_metric_predictions_created ON metric_predictions(created_at)",
                "CREATE INDEX CONCURRENTLY IF NOT EXISTS idx_metric_predictions_compliance ON metric_predictions(quebec_compliance_relevant)",
                "CREATE INDEX CONCURRENTLY IF NOT EXISTS idx_metric_predictions_category ON metric_predictions(property_management_category)",
                // Prediction validations indexes
                "CREATE INDEX CONCURRENTLY IF NOT EXISTS idx_prediction_validations_prediction_id ON prediction_validations(prediction_id)",
                "CREATE INDEX CONCURRENTLY IF NOT EXISTS idx_prediction_validations_status ON prediction_validations(validation_status)",
                "CREATE INDEX CONCURRENTLY IF NOT EXISTS idx_prediction_validations_validated ON prediction_validations(validated_at)",
                // Features table indexes
                "CREATE INDEX CONCURRENTLY IF NOT EXISTS idx_features_status ON features(status)",
                "CREATE INDEX CONCURRENTLY IF NOT EXISTS idx_features_priority ON features(priority)",
                "CREATE INDEX CONCURRENTLY IF NOT EXISTS idx_features_category ON features(category)",
                "CREATE INDEX CONCURRENTLY IF NOT EXISTS idx_features_strategic ON features(is_strategic_path)",
                "CREATE INDEX CONCURRENTLY IF NOT EXISTS idx_features_roadmap ON features(show_on_roadmap)",
                "CREATE INDEX CONCURRENTLY IF NOT EXISTS idx_features_created ON features(created_at)",
                "CREATE INDEX CONCURRENTLY IF NOT EXISTS idx_features_synced ON features(synced_at)",
                // Actionable items indexes
                "CREATE INDEX CONCURRENTLY IF NOT EXISTS idx_actionable_items_feature_id ON actionable_items(feature_id)",
                "CREATE INDEX CONCURRENTLY IF NOT EXISTS idx_actionable_items_status ON actionable_items(status)",
                // Improvement suggestions indexes
                "CREATE INDEX CONCURRENTLY IF NOT EXISTS idx_improvement_suggestions_category ON improvement_suggestions(category)",
                "CREATE INDEX CONCURRENTLY IF NOT EXISTS idx_improvement_suggestions_priority ON improvement_suggestions(priority)",
                "CREATE INDEX CONCURRENTLY IF NOT EXISTS idx_improvement_suggestions_status ON improvement_suggestions(status)",
                "CREATE INDEX CONCURRENTLY IF NOT EXISTS idx_improvement_suggestions_created ON improvement_suggestions(created_at)"
            ],
            /**
             * Composite indexes for complex query patterns.
             */
            compositeIndexes: [
                // User residence active relationships
                "CREATE INDEX CONCURRENTLY IF NOT EXISTS idx_user_residences_active_relationship ON user_residences(user_id, residence_id) WHERE is_active = true",
                // Active bills by residence and status
                "CREATE INDEX CONCURRENTLY IF NOT EXISTS idx_bills_residence_status ON bills(residence_id, status, due_date)",
                // Active maintenance requests by residence
                "CREATE INDEX CONCURRENTLY IF NOT EXISTS idx_maintenance_residence_status ON maintenance_requests(residence_id, status, priority)",
                // Active buildings by organization
                "CREATE INDEX CONCURRENTLY IF NOT EXISTS idx_buildings_org_active ON buildings(organization_id, is_active)",
                // Active residences by building
                "CREATE INDEX CONCURRENTLY IF NOT EXISTS idx_residences_building_active ON residences(building_id, is_active)",
                // Unread notifications by user
                "CREATE INDEX CONCURRENTLY IF NOT EXISTS idx_notifications_user_unread ON notifications(user_id, created_at) WHERE is_read = false",
                // Current year budgets by building
                "CREATE INDEX CONCURRENTLY IF NOT EXISTS idx_budgets_building_year ON budgets(building_id, year, is_active)",
                // Recent features for roadmap
                "CREATE INDEX CONCURRENTLY IF NOT EXISTS idx_features_roadmap_recent ON features(show_on_roadmap, created_at) WHERE show_on_roadmap = true"
            ],
            /**
             * Partial indexes for improved performance on filtered queries.
             */
            partialIndexes: [
                // Only index active records for frequently filtered tables
                "CREATE INDEX CONCURRENTLY IF NOT EXISTS idx_users_active_email ON users(email) WHERE is_active = true",
                "CREATE INDEX CONCURRENTLY IF NOT EXISTS idx_organizations_active_type ON organizations(type) WHERE is_active = true",
                "CREATE INDEX CONCURRENTLY IF NOT EXISTS idx_buildings_active_org ON buildings(organization_id) WHERE is_active = true",
                "CREATE INDEX CONCURRENTLY IF NOT EXISTS idx_residences_active_building ON residences(building_id) WHERE is_active = true",
                // Unpaid bills only
                "CREATE INDEX CONCURRENTLY IF NOT EXISTS idx_bills_unpaid ON bills(residence_id, due_date) WHERE status IN ('sent', 'overdue')",
                // Open maintenance requests only
                "CREATE INDEX CONCURRENTLY IF NOT EXISTS idx_maintenance_open ON maintenance_requests(residence_id, priority) WHERE status IN ('submitted', 'acknowledged', 'in_progress')",
                // Unread notifications only
                "CREATE INDEX CONCURRENTLY IF NOT EXISTS idx_notifications_unread ON notifications(user_id, created_at) WHERE is_read = false"
            ],
            /**
             * Covering indexes for SELECT-heavy queries to avoid table lookups.
             */
            coveringIndexes: [
                // User lookup with common fields
                "CREATE INDEX CONCURRENTLY IF NOT EXISTS idx_users_covering ON users(email) INCLUDE (first_name, last_name, role, is_active)",
                // Building details with organization info
                "CREATE INDEX CONCURRENTLY IF NOT EXISTS idx_buildings_covering ON buildings(organization_id) INCLUDE (name, address, city, building_type, is_active)",
                // Residence details with building info
                "CREATE INDEX CONCURRENTLY IF NOT EXISTS idx_residences_covering ON residences(building_id) INCLUDE (unit_number, floor, square_footage, is_active)",
                // Bill details for resident portals
                "CREATE INDEX CONCURRENTLY IF NOT EXISTS idx_bills_covering ON bills(residence_id, status) INCLUDE (bill_number, amount, due_date, type)",
                // Maintenance request details
                "CREATE INDEX CONCURRENTLY IF NOT EXISTS idx_maintenance_covering ON maintenance_requests(residence_id, status) INCLUDE (title, priority, category, scheduled_date)",
                // Notification details for user dashboards
                "CREATE INDEX CONCURRENTLY IF NOT EXISTS idx_notifications_covering ON notifications(user_id, is_read) INCLUDE (title, message, type, created_at)"
            ],
            /**
             * Materialized views for complex aggregations to improve dashboard performance.
             */
            materializedViews: [
                // Building dashboard statistics
                `CREATE MATERIALIZED VIEW IF NOT EXISTS mv_building_stats AS
     SELECT 
       b.id as building_id,
       b.name as building_name,
       COUNT(DISTINCT r.id) as total_residences,
       COUNT(DISTINCT ur.user_id) as total_residents,
       COUNT(DISTINCT CASE WHEN bill.status = 'overdue' THEN bill.id END) as overdue_bills,
       COUNT(DISTINCT CASE WHEN mr.status IN ('submitted', 'acknowledged', 'in_progress') THEN mr.id END) as open_maintenance,
       AVG(r.square_footage) as avg_square_footage,
       MAX(b.updated_at) as last_updated
     FROM buildings b
     LEFT JOIN residences r ON b.id = r.building_id AND r.is_active = true
     LEFT JOIN user_residences ur ON r.id = ur.residence_id AND ur.is_active = true
     LEFT JOIN bills bill ON r.id = bill.residence_id
     LEFT JOIN maintenance_requests mr ON r.id = mr.residence_id
     WHERE b.is_active = true
     GROUP BY b.id, b.name`,
                // Organization dashboard overview
                `CREATE MATERIALIZED VIEW IF NOT EXISTS mv_organization_overview AS
     SELECT 
       o.id as organization_id,
       o.name as organization_name,
       COUNT(DISTINCT b.id) as total_buildings,
       COUNT(DISTINCT r.id) as total_residences,
       COUNT(DISTINCT ur.user_id) as total_users,
       SUM(CASE WHEN bill.status = 'paid' THEN bill.amount ELSE 0 END) as paid_amount,
       SUM(CASE WHEN bill.status IN ('sent', 'overdue') THEN bill.amount ELSE 0 END) as outstanding_amount,
       COUNT(CASE WHEN mr.status IN ('submitted', 'acknowledged', 'in_progress') THEN 1 END) as open_requests
     FROM organizations o
     LEFT JOIN buildings b ON o.id = b.organization_id AND b.is_active = true
     LEFT JOIN residences r ON b.id = r.building_id AND r.is_active = true
     LEFT JOIN user_residences ur ON r.id = ur.residence_id AND ur.is_active = true
     LEFT JOIN bills bill ON r.id = bill.residence_id
     LEFT JOIN maintenance_requests mr ON r.id = mr.residence_id
     WHERE o.is_active = true
     GROUP BY o.id, o.name`,
                // Financial summary for budgeting
                `CREATE MATERIALIZED VIEW IF NOT EXISTS mv_financial_summary AS
     SELECT 
       b.building_id,
       DATE_TRUNC('month', bill.due_date) as month,
       SUM(CASE WHEN bill.status = 'paid' THEN bill.amount ELSE 0 END) as revenue,
       SUM(CASE WHEN bill.status IN ('sent', 'overdue') THEN bill.amount ELSE 0 END) as outstanding,
       COUNT(DISTINCT bill.residence_id) as billed_residences,
       AVG(bill.amount) as avg_bill_amount
     FROM bills bill
     JOIN residences r ON bill.residence_id = r.id
     JOIN buildings b ON r.building_id = b.id
     WHERE bill.due_date >= DATE_TRUNC('year', CURRENT_DATE)
     GROUP BY b.building_id, DATE_TRUNC('month', bill.due_date)`
            ]
        };
        QueryOptimizer = class {
            /**
             * Check if database indexes are already set up
             */
            static async areIndexesSetup() {
                try {
                    const result = await (0, drizzle_orm_9.sql) `
        SELECT COUNT(*) as count
        FROM pg_indexes 
        WHERE indexname IN (
          'idx_users_email',
          'idx_buildings_org_id', 
          'idx_residences_building_id',
          'idx_bills_residence_id'
        )
      `;
                    const row = Array.isArray(result) ? result[0] : result;
                    if (!row || typeof row.count === "undefined") {
                        if (process.env.NODE_ENV !== "production") {
                        }
                        return false;
                    }
                    const indexCount = parseInt(String(row.count));
                    return indexCount >= 4;
                }
                catch (error) {
                    console.error("\u274C Error checking database indexes:", error);
                    return false;
                }
            }
            /**
             * Applies all core database indexes for Quebec property management.
             */
            static async applyCoreOptimizations() {
                const allIndexes = [
                    ...DatabaseOptimization.coreIndexes,
                    ...DatabaseOptimization.frameworkIndexes,
                    ...DatabaseOptimization.compositeIndexes,
                    ...DatabaseOptimization.partialIndexes
                ];
                for (const indexQuery of allIndexes) {
                    try {
                        await (0, drizzle_orm_9.sql) `${indexQuery}`;
                    }
                    catch (error) {
                        console.error("\u274C Error applying core index:", error);
                    }
                }
                for (const indexQuery of DatabaseOptimization.coveringIndexes) {
                    try {
                        await (0, drizzle_orm_9.sql) `${indexQuery}`;
                    }
                    catch (error) {
                        console.error("\u274C Error applying covering index:", error);
                    }
                }
                for (const viewQuery of DatabaseOptimization.materializedViews) {
                    try {
                        await (0, drizzle_orm_9.sql) `${viewQuery}`;
                    }
                    catch (error) {
                        console.error("\u274C Error creating materialized view:", error);
                    }
                }
            }
            /**
             * Analyzes query performance and suggests optimizations.
             */
            static async analyzeQueryPerformance() {
                try {
                    await (0, drizzle_orm_9.sql) `SET log_min_duration_statement = 100`;
                    await (0, drizzle_orm_9.sql) `SET log_statement = 'all'`;
                    const slowQueries = await (0, drizzle_orm_9.sql) `
        SELECT query, mean_exec_time, calls, total_exec_time
        FROM pg_stat_statements
        WHERE mean_exec_time > 100
        ORDER BY mean_exec_time DESC
        LIMIT 10
      `;
                    const indexUsage = await (0, drizzle_orm_9.sql) `
        SELECT schemaname, tablename, indexname, idx_tup_read, idx_tup_fetch
        FROM pg_stat_user_indexes
        WHERE idx_tup_read > 0
        ORDER BY idx_tup_read DESC
        LIMIT 20
      `;
                }
                catch (error) {
                    console.error("\u274C Error analyzing query performance:", error);
                }
            }
            /**
             * Provides query optimization suggestions.
             */
            static getOptimizationSuggestions() {
                return [
                    "\u2705 Add indexes on frequently queried foreign keys",
                    "\u2705 Use partial indexes for filtered queries (e.g., WHERE is_active = true)",
                    "\u2705 Implement query result caching for expensive operations",
                    "\u2705 Use LIMIT clauses for large result sets",
                    "\u2705 Consider materialized views for complex aggregations",
                    "\u2705 Optimize JOIN order in complex queries",
                    "\u2705 Use EXISTS instead of IN for subqueries",
                    "\u2705 Implement pagination for large datasets",
                    "\u2705 Add covering indexes for SELECT-heavy queries",
                    "\u2705 Regular VACUUM and ANALYZE maintenance"
                ];
            }
            /**
             * Optimizes query structure for better performance.
             * @param baseQuery
             * @param options
             * @param _options
             */
            static optimizeQuery(baseQuery, _options = {}) {
                let optimizedQuery = baseQuery;
                if (_options.limit && !optimizedQuery.toLowerCase().includes("limit")) {
                    optimizedQuery += ` LIMIT ${_options.limit}`;
                }
                if (_options.useExists && optimizedQuery.toLowerCase().includes(" in (")) {
                }
                if (optimizedQuery.toLowerCase().includes("join") && _options.optimizeJoins) {
                }
                return optimizedQuery;
            }
            /**
             * Refreshes materialized views for up-to-date aggregated data.
             */
            static async refreshMaterializedViews() {
                const views = ["mv_building_stats", "mv_organization_overview", "mv_financial_summary"];
                for (const view of views) {
                    try {
                        await (0, drizzle_orm_9.sql) `REFRESH MATERIALIZED VIEW CONCURRENTLY ${view}`;
                    }
                    catch (error) {
                        console.error(`\u274C Error refreshing materialized view ${view}:`, error);
                    }
                }
            }
        };
        DatabaseMaintenance = class {
            /**
             * Performs routine database maintenance for optimal performance.
             */
            static async performMaintenance() {
                try {
                    await (0, drizzle_orm_9.sql) `ANALYZE`;
                    await (0, drizzle_orm_9.sql) `VACUUM`;
                    await (0, drizzle_orm_9.sql) `REINDEX DATABASE CONCURRENTLY ${process.env.PGDATABASE}`;
                    await QueryOptimizer.refreshMaterializedViews();
                }
                catch (error) {
                    console.error("\u274C Error performing database maintenance:", error);
                }
            }
            /**
             * Monitors database performance metrics.
             */
            static async getPerformanceMetrics() {
                try {
                    const metrics = await (0, drizzle_orm_9.sql) `
        SELECT 
          'connections' as metric,
          count(*) as value
        FROM pg_stat_activity
        UNION ALL
        SELECT 
          'slow_queries' as metric,
          count(*) as value
        FROM pg_stat_statements
        WHERE mean_exec_time > 100
        UNION ALL
        SELECT 
          'cache_hit_ratio' as metric,
          round(100.0 * sum(blks_hit) / (sum(blks_hit) + sum(blks_read)), 2) as value
        FROM pg_stat_database
        WHERE datname = current_database()
      `;
                    return metrics;
                }
                catch (error) {
                    console.error("\u274C Error getting performance metrics:", error);
                    return [];
                }
            }
        };
    }
});
// server/query-cache.ts
const lru_cache_1 = require("lru-cache");
var CACHE_CONFIGS, QueryCacheManager, queryCache, CacheInvalidator;
var init_query_cache = __esm({
    "server/query-cache.ts"() {
        CACHE_CONFIGS = {
            // User data - frequently accessed, moderate changes
            users: { maxSize: 1e3, ttl: 5 * 60 * 1e3 },
            // 5 minutes
            // Organization data - stable, infrequent changes
            organizations: { maxSize: 100, ttl: 30 * 60 * 1e3 },
            // 30 minutes
            // Building data - relatively stable
            buildings: { maxSize: 500, ttl: 15 * 60 * 1e3 },
            // 15 minutes
            // Residence data - stable structure, occasional updates
            residences: { maxSize: 2e3, ttl: 10 * 60 * 1e3 },
            // 10 minutes
            // Bills - time-sensitive, frequent updates
            bills: { maxSize: 1e3, ttl: 2 * 60 * 1e3 },
            // 2 minutes
            // Maintenance requests - dynamic, frequent status changes
            maintenance: { maxSize: 500, ttl: 1 * 60 * 1e3 },
            // 1 minute
            // Notifications - real-time, short cache
            notifications: { maxSize: 500, ttl: 30 * 1e3 },
            // 30 seconds
            // Quality metrics - stable for periods
            metrics: { maxSize: 200, ttl: 5 * 60 * 1e3 },
            // 5 minutes
            // Features and roadmap - moderately stable
            features: { maxSize: 300, ttl: 3 * 60 * 1e3 },
            // 3 minutes
            // Framework configuration - very stable
            config: { maxSize: 100, ttl: 60 * 60 * 1e3 },
            // 1 hour
            // Bug reports - moderate changes, user-specific
            bugs: { maxSize: 500, ttl: 2 * 60 * 1e3 }
            // 2 minutes
        };
        QueryCacheManager = class {
            /**
             *
             */
            constructor() {
                this.caches = /* @__PURE__ */ new Map();
                this.hitCounts = /* @__PURE__ */ new Map();
                this.missCounts = /* @__PURE__ */ new Map();
                Object.entries(CACHE_CONFIGS).forEach(([type, config2]) => {
                    this.caches.set(type, new lru_cache_1.LRUCache({
                        max: config2.maxSize,
                        ttl: config2.ttl,
                        updateAgeOnGet: true,
                        updateAgeOnHas: true
                    }));
                    this.hitCounts.set(type, 0);
                    this.missCounts.set(type, 0);
                });
            }
            /**
             * Gets cached data if available.
             * @param cacheType Type of cache (users, buildings, etc.).
             * @param key Cache key.
             * @param _key
             * @returns Cached data or undefined.
             */
            get(cacheType, _key) {
                const cache = this.caches.get(cacheType);
                if (!cache) {
                    return void 0;
                }
                const result = cache.get(_key);
                if (result !== void 0) {
                    this.hitCounts.set(cacheType, (this.hitCounts.get(cacheType) || 0) + 1);
                    return result;
                }
                this.missCounts.set(cacheType, (this.missCounts.get(cacheType) || 0) + 1);
                return void 0;
            }
            /**
             * Stores data in cache.
             * @param cacheType Type of cache.
             * @param key Cache key.
             * @param data Data to cache.
             * @param _key
             * @param _data
             */
            set(cacheType, _key, _data) {
                const cache = this.caches.get(cacheType);
                if (!cache) {
                    return;
                }
                cache.set(_key, _data);
            }
            /**
             * Invalidates cache entries by pattern.
             * @param cacheType Type of cache.
             * @param pattern Key pattern to invalidate (supports wildcards).
             */
            invalidate(cacheType, pattern) {
                const cache = this.caches.get(cacheType);
                if (!cache) {
                    return;
                }
                if (pattern) {
                    for (const key of cache.keys()) {
                        if (this.matchesPattern(key, pattern)) {
                            cache.delete(key);
                        }
                    }
                }
                else {
                    cache.clear();
                }
            }
            /**
             * Gets cache performance statistics.
             */
            getStats() {
                const stats = {};
                for (const [_type, cache] of this.caches) {
                    const hits = this.hitCounts.get(_type) || 0;
                    const misses = this.missCounts.get(_type) || 0;
                    const total = hits + misses;
                    const hitRate = total > 0 ? (hits / total * 100).toFixed(2) : "0.00";
                    stats[_type] = {
                        size: cache.size,
                        maxSize: cache.max,
                        hits,
                        misses,
                        hitRate: `${hitRate}%`,
                        memoryUsage: this.estimateMemoryUsage(cache)
                    };
                }
                return stats;
            }
            /**
             * Clears all caches.
             */
            clearAll() {
                for (const [_type, cache] of this.caches) {
                    cache.clear();
                    this.hitCounts.set(_type, 0);
                    this.missCounts.set(_type, 0);
                }
            }
            /**
             * Pattern matching for cache key invalidation.
             * @param key
             * @param _key
             * @param pattern
             */
            matchesPattern(_key, pattern) {
                const regex = new RegExp(pattern.replace(/\*/g, ".*"));
                return regex.test(_key);
            }
            /**
             * Estimates memory usage of a cache.
             * @param cache
             */
            estimateMemoryUsage(cache) {
                let totalSize = 0;
                for (const value of cache.values()) {
                    totalSize += JSON.stringify(value).length * 2;
                }
                return `${(totalSize / 1024).toFixed(2)} KB`;
            }
        };
        queryCache = new QueryCacheManager();
        CacheInvalidator = class {
            /**
             * Invalidates user-related caches when user data changes.
             * @param userId
             */
            static invalidateUserCaches(userId) {
                queryCache.invalidate("users", `user:${userId}*`);
                queryCache.invalidate("residences", `user_residences:${userId}*`);
                queryCache.invalidate("notifications", `user_notifications:${userId}*`);
            }
            /**
             * Invalidates building-related caches when building data changes.
             * @param buildingId
             */
            static invalidateBuildingCaches(buildingId) {
                queryCache.invalidate("buildings", `building:${buildingId}*`);
                queryCache.invalidate("residences", `building_residences:${buildingId}*`);
                queryCache.invalidate("budgets", `building_budgets:${buildingId}*`);
            }
            /**
             * Invalidates residence-related caches when residence data changes.
             * @param residenceId
             */
            static invalidateResidenceCaches(residenceId) {
                queryCache.invalidate("residences", `residence:${residenceId}*`);
                queryCache.invalidate("bills", `residence_bills:${residenceId}*`);
                queryCache.invalidate("maintenance", `residence_maintenance:${residenceId}*`);
            }
            /**
             * Invalidates all caches (use sparingly).
             */
            static invalidateAll() {
                queryCache.clearAll();
            }
        };
    }
});
// server/performance-monitoring.ts
const perf_hooks_1 = require("perf_hooks");
var DatabasePerformanceMonitor, dbPerformanceMonitor;
var init_performance_monitoring = __esm({
    "server/performance-monitoring.ts"() {
        DatabasePerformanceMonitor = class {
            constructor() {
                this.queryTimes = [];
                this.slowQueries = [];
                this.SLOW_QUERY_THRESHOLD = 100;
            }
            // ms
            /**
             * Tracks execution time of a database operation.
             * @param queryName
             * @param operation
             */
            trackQuery(queryName, operation) {
                const startTime = perf_hooks_1.performance.now();
                return operation().then((result) => {
                    const duration = perf_hooks_1.performance.now() - startTime;
                    this.recordQueryTime(queryName, duration);
                    return result;
                }).catch((error) => {
                    const duration = perf_hooks_1.performance.now() - startTime;
                    this.recordQueryTime(queryName, duration);
                    throw error;
                });
            }
            /**
             * Records query execution time.
             * @param queryName
             * @param duration
             */
            recordQueryTime(queryName, duration) {
                this.queryTimes.push(duration);
                if (this.queryTimes.length > 1e3) {
                    this.queryTimes.shift();
                }
                if (duration > this.SLOW_QUERY_THRESHOLD) {
                    this.slowQueries.push({
                        query: queryName,
                        duration,
                        timestamp: /* @__PURE__ */ new Date()
                    });
                    if (this.slowQueries.length > 100) {
                        this.slowQueries.shift();
                    }
                }
            }
            /**
             * Gets average query time.
             */
            getAverageQueryTime() {
                if (this.queryTimes.length === 0) {
                    return 0;
                }
                return this.queryTimes.reduce((a, b) => a + b, 0) / this.queryTimes.length;
            }
            /**
             * Gets performance statistics.
             */
            getPerformanceStats() {
                const avg = this.getAverageQueryTime();
                const max = Math.max(...this.queryTimes);
                const min = Math.min(...this.queryTimes);
                return {
                    averageQueryTime: `${avg.toFixed(2)}ms`,
                    maxQueryTime: `${max.toFixed(2)}ms`,
                    minQueryTime: `${min.toFixed(2)}ms`,
                    totalQueries: this.queryTimes.length,
                    slowQueries: this.slowQueries.length,
                    recentSlowQueries: this.slowQueries.slice(-10)
                };
            }
            /**
             * Provides optimization recommendations.
             */
            getOptimizationRecommendations() {
                const avg = this.getAverageQueryTime();
                const recommendations = [];
                if (avg > 100) {
                    recommendations.push("Average query time exceeds 100ms. Consider adding database indexes.");
                }
                if (this.slowQueries.length > 10) {
                    recommendations.push("Multiple slow queries detected. Review and optimize frequent queries.");
                }
                const commonSlowQueries = this.getCommonSlowQueries();
                if (commonSlowQueries.length > 0) {
                    recommendations.push(`Common slow queries: ${commonSlowQueries.join(", ")}`);
                }
                return recommendations;
            }
            /**
             * Identifies commonly slow queries.
             */
            getCommonSlowQueries() {
                const queryFrequency = {};
                this.slowQueries.forEach(({ query }) => {
                    queryFrequency[query] = (queryFrequency[query] || 0) + 1;
                });
                return Object.entries(queryFrequency).filter(([, count4]) => count4 > 2).map(([query]) => query);
            }
            /**
             * Resets performance tracking data.
             */
            reset() {
                this.queryTimes = [];
                this.slowQueries = [];
            }
        };
        dbPerformanceMonitor = new DatabasePerformanceMonitor();
    }
});
// server/optimized-db-storage.ts
const drizzle_orm_10 = require("drizzle-orm");
const crypto_1 = __importDefault(require("crypto"));
const drizzle_orm_11 = require("drizzle-orm");
var OptimizedDatabaseStorage;
var init_optimized_db_storage = __esm({
    "server/optimized-db-storage.ts"() {
        init_db();
        init_schema();
        init_database_optimization();
        init_query_cache();
        init_performance_monitoring();
        OptimizedDatabaseStorage = class {
            /**
             *
             */
            constructor() {
                if (process.env.TEST_ENV !== "integration" && !process.env.DISABLE_DB_OPTIMIZATIONS && process.env.NODE_ENV !== "test" && !process.env.JEST_WORKER_ID) {
                    this.initializeOptimizations();
                }
            }
            /**
             * Initializes database optimizations.
             */
            async initializeOptimizations() {
                if (process.env.NODE_ENV === "test" || process.env.JEST_WORKER_ID || process.env.SKIP_DB_OPTIMIZATION) {
                    return;
                }
                try {
                    await QueryOptimizer.applyCoreOptimizations();
                }
                catch (error) {
                    console.error("\u274C Error initializing database optimizations:", error);
                }
            }
            /**
             * Wrapper for performance tracking and caching.
             * @param operation
             * @param cacheKey
             * @param cacheType
             * @param fn
             */
            async withOptimizations(operation, cacheKey, cacheType, fn) {
                if (cacheKey) {
                    const cached = queryCache.get(cacheType, cacheKey);
                    if (cached !== void 0) {
                        return cached;
                    }
                }
                const result = await dbPerformanceMonitor.trackQuery(operation, fn);
                if (cacheKey && result !== void 0) {
                    queryCache.set(cacheType, cacheKey, result);
                }
                return result;
            }
            // User operations with optimization
            /**
             * Retrieves all active users with caching and performance tracking.
             */
            async getUsers() {
                return this.withOptimizations("getUsers", "all_users", "users", () => db.select().from(users).where((0, drizzle_orm_10.eq)(users.isActive, true)).limit(100).orderBy((0, drizzle_orm_10.desc)(users.createdAt)));
            }
            /**
             * Retrieves all active users with their assignments (organizations, buildings, residences).
             */
            async getUsersWithAssignments() {
                queryCache.invalidate("users", "all_users_assignments_v2");
                queryCache.invalidate("users", "all_users_assignments_v3");
                try {
                    const users5 = await db.select().from(users).where((0, drizzle_orm_10.eq)(users.isActive, true)).limit(100).orderBy((0, drizzle_orm_10.desc)(users.createdAt));
                    const batchSize = 5;
                    const usersWithAssignments = [];
                    for (let i = 0; i < users5.length; i += batchSize) {
                        const batch = users5.slice(i, i + batchSize);
                        const batchResults = await Promise.all(batch.map(async (user) => {
                            try {
                                const userOrgs = await db.select({
                                    id: organizations.id,
                                    name: organizations.name,
                                    type: organizations.type
                                }).from(userOrganizations).innerJoin(organizations, (0, drizzle_orm_10.eq)(userOrganizations.organizationId, organizations.id)).where((0, drizzle_orm_10.and)((0, drizzle_orm_10.eq)(userOrganizations.userId, user.id), (0, drizzle_orm_10.eq)(userOrganizations.isActive, true), (0, drizzle_orm_10.eq)(organizations.isActive, true)));
                                const userBuildings = await db.select({
                                    id: buildings.id,
                                    name: buildings.name
                                }).from(userOrganizations).innerJoin(buildings, (0, drizzle_orm_10.eq)(userOrganizations.organizationId, buildings.organizationId)).where((0, drizzle_orm_10.and)((0, drizzle_orm_10.eq)(userOrganizations.userId, user.id), (0, drizzle_orm_10.eq)(userOrganizations.isActive, true), (0, drizzle_orm_10.eq)(buildings.isActive, true)));
                                const userResidences4 = await db.select({
                                    id: residences.id,
                                    unitNumber: residences.unitNumber,
                                    buildingId: residences.buildingId,
                                    buildingName: buildings.name
                                }).from(userResidences).innerJoin(residences, (0, drizzle_orm_10.eq)(userResidences.residenceId, residences.id)).innerJoin(buildings, (0, drizzle_orm_10.eq)(residences.buildingId, buildings.id)).where((0, drizzle_orm_10.and)((0, drizzle_orm_10.eq)(userResidences.userId, user.id), (0, drizzle_orm_10.eq)(userResidences.isActive, true), (0, drizzle_orm_10.eq)(residences.isActive, true)));
                                const result = {
                                    ...user,
                                    organizations: userOrgs || [],
                                    buildings: userBuildings || [],
                                    residences: userResidences4 || []
                                };
                                return result;
                            }
                            catch (error) {
                                console.error("\u274C Error getting user assignments:", error);
                                return {
                                    ...user,
                                    organizations: [],
                                    buildings: [],
                                    residences: []
                                };
                            }
                        }));
                        usersWithAssignments.push(...batchResults);
                    }
                    return usersWithAssignments;
                }
                catch (error) {
                    console.error("\u274C Critical error getting users with assignments:", error);
                    return [];
                }
            }
            /**
             * Retrieves users from organizations that a specific user has access to.
             * @param userId
             */
            async getUsersByOrganizations(userId) {
                return this.withOptimizations("getUsersByOrganizations", `users_by_org:${userId}`, "users", async () => {
                    const userOrgs = await db.select({ organizationId: userOrganizations.organizationId }).from(userOrganizations).where((0, drizzle_orm_10.and)((0, drizzle_orm_10.eq)(userOrganizations.userId, userId), (0, drizzle_orm_10.eq)(userOrganizations.isActive, true)));
                    if (userOrgs.length === 0) {
                        return [];
                    }
                    const organizationIds = userOrgs.map((org) => org.organizationId);
                    return db.select({
                        id: users.id,
                        username: users.username,
                        password: users.password,
                        email: users.email,
                        firstName: users.firstName,
                        lastName: users.lastName,
                        phone: users.phone,
                        profileImage: users.profileImage,
                        language: users.language,
                        role: users.role,
                        isActive: users.isActive,
                        lastLoginAt: users.lastLoginAt,
                        createdAt: users.createdAt,
                        updatedAt: users.updatedAt
                    }).from(users).innerJoin(userOrganizations, (0, drizzle_orm_10.eq)(users.id, userOrganizations.userId)).where((0, drizzle_orm_10.and)((0, drizzle_orm_10.eq)(users.isActive, true), (0, drizzle_orm_10.eq)(userOrganizations.isActive, true), (0, drizzle_orm_10.inArray)(userOrganizations.organizationId, organizationIds))).orderBy(users.firstName, users.lastName);
                });
            }
            /**
             * Gets paginated users with optimized query structure.
             * @param options
             * @param _options
             */
            async getPaginatedUsers(_options) {
                PaginationHelper.validatePagination(_options);
                const cacheKey = `paginated_users:${_options.page}:${_options.pageSize}:${_options.sortBy}:${_options.sortDirection}`;
                const cached = queryCache.get("users", cacheKey);
                if (cached) {
                    return cached;
                }
                const [{ count: total }] = await db.select({ count: (0, drizzle_orm_10.count)() }).from(users).where((0, drizzle_orm_10.eq)(users.isActive, true));
                const users5 = await db.select().from(users).where((0, drizzle_orm_10.eq)(users.isActive, true)).orderBy(_options.sortDirection === "DESC" ? (0, drizzle_orm_10.desc)(users.createdAt) : users.createdAt).limit(_options.pageSize).offset((_options.page - 1) * _options.pageSize);
                const result = { users: users5, total };
                queryCache.set("users", cacheKey, result);
                return result;
            }
            /**
             * Gets buildings with residents using EXISTS instead of IN subquery.
             * @param organizationId
             * @param limit
             */
            async getBuildingsWithResidents(organizationId, limit = 50) {
                const cacheKey = `buildings_with_residents:${organizationId}:${limit}`;
                return this.withOptimizations("getBuildingsWithResidents", cacheKey, "buildings", () => db.select().from(buildings).where((0, drizzle_orm_10.and)((0, drizzle_orm_10.eq)(buildings.organizationId, organizationId), (0, drizzle_orm_10.eq)(buildings.isActive, true), (0, drizzle_orm_11.exists)(db.select().from(residences).where((0, drizzle_orm_10.and)((0, drizzle_orm_10.eq)(residences.buildingId, buildings.id), (0, drizzle_orm_10.eq)(residences.isActive, true)))))).limit(limit)
                // Always use LIMIT for large result sets
                );
            }
            /**
             * Searches users with optimized covering index and LIMIT.
             * @param query
             * @param limit
             */
            async searchUsers(query, limit = 20) {
                const cacheKey = `search_users:${query}:${limit}`;
                return this.withOptimizations("searchUsers", cacheKey, "users", () => db.select().from(users).where((0, drizzle_orm_10.and)((0, drizzle_orm_10.eq)(users.isActive, true), (0, drizzle_orm_10.or)((0, drizzle_orm_10.like)(users.email, `%${query}%`), (0, drizzle_orm_10.like)(users.firstName, `%${query}%`), (0, drizzle_orm_10.like)(users.lastName, `%${query}%`)))).limit(limit).orderBy(users.lastName, users.firstName));
            }
            /**
             * Gets financial summary using materialized view for complex aggregations.
             * @param buildingId
             */
            async getFinancialSummary(buildingId) {
                const cacheKey = `financial_summary:${buildingId}`;
                return this.withOptimizations("getFinancialSummary", cacheKey, "financial", async () => {
                    const summary = await db.execute((0, drizzle_orm_11.sql) `SELECT * FROM mv_financial_summary WHERE building_id = ${buildingId} ORDER BY month DESC LIMIT 12`);
                    return summary.rows;
                });
            }
            /**
             * Gets building statistics using materialized view.
             * @param buildingId
             */
            async getBuildingStats(buildingId) {
                const cacheKey = `building_stats:${buildingId}`;
                return this.withOptimizations("getBuildingStats", cacheKey, "buildings", async () => {
                    const stats = await db.execute((0, drizzle_orm_11.sql) `SELECT * FROM mv_building_stats WHERE building_id = ${buildingId}`);
                    return stats.rows[0];
                });
            }
            /**
             * Retrieves a specific user by ID with caching.
             * @param id
             */
            async getUser(id) {
                return this.withOptimizations("getUser", `user:${id}`, "users", async () => {
                    const result = await db.select().from(users).where((0, drizzle_orm_10.eq)(users.id, id));
                    if (result.length > 0) {
                        console.log(`\u{1F50D} Storage.getUser: Found user:`, {
                            id: result[0].id,
                            email: result[0].email,
                            role: result[0].role
                        });
                    }
                    else {
                    }
                    return result[0];
                });
            }
            /**
             * Retrieves a user by email with caching.
             * @param email
             */
            async getUserByEmail(email) {
                return this.withOptimizations("getUserByEmail", `user_email:${email}`, "users", async () => {
                    const result = await db.select().from(users).where((0, drizzle_orm_10.eq)(users.email, email));
                    return result[0];
                });
            }
            /**
             * Creates a new user with cache invalidation.
             * @param insertUser
             */
            async createUser(insertUser) {
                const result = await dbPerformanceMonitor.trackQuery("createUser", async () => {
                    let password = insertUser.password;
                    const isDemoRole = ["demo_manager", "demo_tenant", "demo_resident"].includes(insertUser.role);
                    if (isDemoRole) {
                        password = "$2b$12$cOc/QjMjzlhqAQqF2b/MTOZr2QAtERbXJGd4OSa1CXMlF04FC3F02";
                        console.log("\u{1F3AD} Setting demo password for user with role:", insertUser.role);
                    }
                    const userData = {
                        username: insertUser.username,
                        email: insertUser.email,
                        password,
                        firstName: insertUser.firstName,
                        lastName: insertUser.lastName,
                        phone: insertUser.phone || "",
                        profileImage: insertUser.profileImage,
                        language: insertUser.language || "fr",
                        role: insertUser.role,
                        isActive: true
                        // Default value for new users
                    };
                    console.log("\u{1F50D} Creating user with data:", {
                        username: userData.username,
                        email: userData.email,
                        firstName: userData.firstName,
                        lastName: userData.lastName,
                        role: userData.role,
                        language: userData.language,
                        hasPassword: !!userData.password
                    });
                    try {
                        const inserted = await db.insert(users).values([userData]).returning();
                        return inserted;
                    }
                    catch (error) {
                        console.error("\u274C Error creating user:", error);
                        throw error;
                    }
                });
                CacheInvalidator.invalidateUserCaches("*");
                return result[0];
            }
            /**
             * Updates a user with cache invalidation.
             * @param id
             * @param updates
             */
            async updateUser(id, updates) {
                const result = await dbPerformanceMonitor.trackQuery("updateUser", async () => {
                    return db.update(users).set({ ...updates, updatedAt: /* @__PURE__ */ new Date() }).where((0, drizzle_orm_10.eq)(users.id, id)).returning();
                });
                CacheInvalidator.invalidateUserCaches(id);
                return result[0];
            }
            /**
             * Retrieves organizations for a specific user.
             * @param userId
             */
            async getUserOrganizations(userId) {
                return this.withOptimizations("getUserOrganizations", `user_orgs:${userId}`, "users", async () => {
                    const result = await db.select({
                        organizationId: userOrganizations.organizationId
                    }).from(userOrganizations).where((0, drizzle_orm_10.and)((0, drizzle_orm_10.eq)(userOrganizations.userId, userId), (0, drizzle_orm_10.eq)(userOrganizations.isActive, true)));
                    return result;
                });
            }
            /**
             * Retrieves residences for a specific user.
             * @param userId
             */
            async getUserResidences(userId) {
                return this.withOptimizations("getUserResidences", `user_residences:${userId}`, "residences", async () => {
                    const result = await db.select({
                        residenceId: userResidences.residenceId
                    }).from(userResidences).where((0, drizzle_orm_10.and)((0, drizzle_orm_10.eq)(userResidences.userId, userId), (0, drizzle_orm_10.eq)(userResidences.isActive, true)));
                    return result;
                });
            }
            // Organization operations with optimization
            /**
             * Retrieves all active organizations with caching.
             */
            async getOrganizations() {
                return this.withOptimizations("getOrganizations", "all_organizations", "organizations", () => db.select().from(organizations).where((0, drizzle_orm_10.eq)(organizations.isActive, true)));
            }
            /**
             * Retrieves an organization by ID with caching.
             * @param id
             */
            async getOrganization(id) {
                return this.withOptimizations("getOrganization", `organization:${id}`, "organizations", async () => {
                    const result = await db.select().from(organizations).where((0, drizzle_orm_10.eq)(organizations.id, id));
                    return result[0];
                });
            }
            /**
             * Creates a new organization with cache invalidation.
             * @param insertOrganization
             */
            async createOrganization(insertOrganization) {
                const result = await dbPerformanceMonitor.trackQuery("createOrganization", async () => {
                    return db.insert(organizations).values(insertOrganization).returning();
                });
                queryCache.invalidate("organizations");
                return result[0];
            }
            // Building operations with optimization
            /**
             * Retrieves buildings by organization with caching.
             * @param organizationId
             */
            async getBuildingsByOrganization(organizationId) {
                return this.withOptimizations("getBuildingsByOrganization", `org_buildings:${organizationId}`, "buildings", () => db.select().from(buildings).where((0, drizzle_orm_10.and)((0, drizzle_orm_10.eq)(buildings.organizationId, organizationId), (0, drizzle_orm_10.eq)(buildings.isActive, true))));
            }
            /**
             * Retrieves a building by ID with caching.
             * @param id
             */
            async getBuilding(id) {
                return this.withOptimizations("getBuilding", `building:${id}`, "buildings", async () => {
                    const result = await db.select().from(buildings).where((0, drizzle_orm_10.eq)(buildings.id, id));
                    return result[0];
                });
            }
            /**
             * Creates a new building with cache invalidation.
             * @param insertBuilding
             */
            async createBuilding(insertBuilding) {
                const result = await dbPerformanceMonitor.trackQuery("createBuilding", async () => {
                    return db.insert(buildings).values([insertBuilding]).returning();
                });
                CacheInvalidator.invalidateBuildingCaches("*");
                return result[0];
            }
            // Residence operations with optimization
            /**
             * Retrieves residences by building with caching.
             * @param buildingId
             */
            async getResidencesByBuilding(buildingId) {
                return this.withOptimizations("getResidencesByBuilding", `building_residences:${buildingId}`, "residences", () => db.select().from(residences).where((0, drizzle_orm_10.and)((0, drizzle_orm_10.eq)(residences.buildingId, buildingId), (0, drizzle_orm_10.eq)(residences.isActive, true))).orderBy(residences.unitNumber));
            }
            /**
             * Retrieves a residence by ID with caching.
             * @param id
             */
            async getResidence(id) {
                return this.withOptimizations("getResidence", `residence:${id}`, "residences", async () => {
                    const result = await db.select().from(residences).where((0, drizzle_orm_10.eq)(residences.id, id));
                    return result[0];
                });
            }
            /**
             * Creates a new residence with cache invalidation.
             * @param insertResidence
             */
            async createResidence(insertResidence) {
                const result = await dbPerformanceMonitor.trackQuery("createResidence", async () => {
                    return db.insert(residences).values([insertResidence]).returning();
                });
                CacheInvalidator.invalidateResidenceCaches("*");
                return result[0];
            }
            // Additional optimized methods for frequently accessed data
            /**
             * Gets user residences with full details - for complex residence views.
             * @param userId
             */
            async getUserResidencesWithDetails(userId) {
                return this.withOptimizations("getUserResidencesWithDetails", `user_residences_details:${userId}`, "residences", () => db.select({
                    residence: residences,
                    building: buildings,
                    userResidence: userResidences
                }).from(userResidences).innerJoin(residences, (0, drizzle_orm_10.eq)(userResidences.residenceId, residences.id)).innerJoin(buildings, (0, drizzle_orm_10.eq)(residences.buildingId, buildings.id)).where((0, drizzle_orm_10.and)((0, drizzle_orm_10.eq)(userResidences.userId, userId), (0, drizzle_orm_10.eq)(userResidences.isActive, true))));
            }
            /**
             * Gets active bills for a residence - frequently queried.
             * @param residenceId
             */
            async getActiveBillsByResidence(residenceId) {
                return this.withOptimizations("getActiveBillsByResidence", `residence_bills:${residenceId}`, "bills", () => db.select().from(bills).where((0, drizzle_orm_10.and)((0, drizzle_orm_10.eq)(bills.residenceId, residenceId), (0, drizzle_orm_10.or)((0, drizzle_orm_10.eq)(bills.status, "sent"), (0, drizzle_orm_10.eq)(bills.status, "overdue")))).orderBy((0, drizzle_orm_10.desc)(bills.dueDate)));
            }
            /**
             * Gets maintenance requests for a residence - frequently accessed.
             * @param residenceId
             */
            async getMaintenanceRequestsByResidence(residenceId) {
                return this.withOptimizations("getMaintenanceRequestsByResidence", `residence_maintenance:${residenceId}`, "maintenance", () => db.select().from(maintenanceRequests).where((0, drizzle_orm_10.eq)(maintenanceRequests.residenceId, residenceId)).orderBy((0, drizzle_orm_10.desc)(maintenanceRequests.createdAt)));
            }
            // Missing Organization operations
            /**
             * Gets organization by name with caching.
             * @param name
             */
            async getOrganizationByName(name) {
                return this.withOptimizations("getOrganizationByName", `org_name:${name}`, "organizations", async () => {
                    const result = await db.select().from(organizations).where((0, drizzle_orm_10.eq)(organizations.name, name));
                    return result[0];
                });
            }
            /**
             * Updates organization with cache invalidation.
             * @param id
             * @param updates
             */
            async updateOrganization(id, updates) {
                const result = await dbPerformanceMonitor.trackQuery("updateOrganization", async () => {
                    return db.update(organizations).set({ ...updates, updatedAt: /* @__PURE__ */ new Date() }).where((0, drizzle_orm_10.eq)(organizations.id, id)).returning();
                });
                CacheInvalidator.invalidateUserCaches("*");
                return result[0];
            }
            // Missing Building operations
            /**
             * Gets all buildings with caching.
             */
            async getBuildings() {
                return this.withOptimizations("getBuildings", "all_buildings", "buildings", () => db.select().from(buildings).where((0, drizzle_orm_10.eq)(buildings.isActive, true)));
            }
            /**
             * Updates building with cache invalidation.
             * @param id
             * @param updates
             */
            async updateBuilding(id, updates) {
                const result = await dbPerformanceMonitor.trackQuery("updateBuilding", async () => {
                    return db.update(buildings).set({ ...updates, updatedAt: /* @__PURE__ */ new Date() }).where((0, drizzle_orm_10.eq)(buildings.id, id)).returning();
                });
                CacheInvalidator.invalidateBuildingCaches(id);
                return result[0];
            }
            /**
             * Deletes building (soft delete).
             * @param id
             */
            async deleteBuilding(id) {
                const result = await dbPerformanceMonitor.trackQuery("deleteBuilding", async () => {
                    return db.update(buildings).set({ isActive: false, updatedAt: /* @__PURE__ */ new Date() }).where((0, drizzle_orm_10.eq)(buildings.id, id)).returning();
                });
                CacheInvalidator.invalidateBuildingCaches(id);
                return result.length > 0;
            }
            // Missing Residence operations
            /**
             * Gets all residences with caching.
             */
            async getResidences() {
                return this.withOptimizations("getResidences", "all_residences", "residences", () => db.select().from(residences).where((0, drizzle_orm_10.eq)(residences.isActive, true)));
            }
            /**
             * Updates residence with cache invalidation.
             * @param id
             * @param updates
             */
            async updateResidence(id, updates) {
                const result = await dbPerformanceMonitor.trackQuery("updateResidence", async () => {
                    return db.update(residences).set({ ...updates, updatedAt: /* @__PURE__ */ new Date() }).where((0, drizzle_orm_10.eq)(residences.id, id)).returning();
                });
                CacheInvalidator.invalidateResidenceCaches(id);
                return result[0];
            }
            /**
             * Deletes residence (soft delete).
             * @param id
             */
            async deleteResidence(id) {
                const result = await dbPerformanceMonitor.trackQuery("deleteResidence", async () => {
                    return db.update(residences).set({ isActive: false, updatedAt: /* @__PURE__ */ new Date() }).where((0, drizzle_orm_10.eq)(residences.id, id)).returning();
                });
                CacheInvalidator.invalidateResidenceCaches(id);
                return result.length > 0;
            }
            // Development Pillar operations
            /**
             * Gets all development pillars.
             */
            async getPillars() {
                return this.withOptimizations("getPillars", "all_pillars", "pillars", () => db.select().from(developmentPillars));
            }
            /**
             * Gets development pillar by ID.
             * @param id
             */
            async getPillar(id) {
                return this.withOptimizations("getPillar", `pillar:${id}`, "pillars", async () => {
                    const result = await db.select().from(developmentPillars).where((0, drizzle_orm_10.eq)(developmentPillars.id, id));
                    return result[0];
                });
            }
            /**
             * Creates development pillar.
             * @param pillar
             */
            async createPillar(pillar) {
                const result = await dbPerformanceMonitor.trackQuery("createPillar", async () => {
                    return db.insert(developmentPillars).values(pillar).returning();
                });
                queryCache.invalidate("pillars");
                return result[0];
            }
            /**
             * Updates development pillar.
             * @param id
             * @param pillar
             */
            async updatePillar(id, pillar) {
                const result = await dbPerformanceMonitor.trackQuery("updatePillar", async () => {
                    return db.update(developmentPillars).set({ ...pillar, updatedAt: /* @__PURE__ */ new Date() }).where((0, drizzle_orm_10.eq)(developmentPillars.id, id)).returning();
                });
                queryCache.invalidate("pillars");
                return result[0];
            }
            // Workspace Status operations
            /**
             * Gets all workspace statuses.
             */
            async getWorkspaceStatuses() {
                return this.withOptimizations("getWorkspaceStatuses", "all_workspace_statuses", "workspace_status", () => db.select().from(workspaceStatus));
            }
            /**
             * Gets workspace status by component.
             * @param component
             */
            async getWorkspaceStatus(component) {
                return this.withOptimizations("getWorkspaceStatus", `workspace_status:${component}`, "workspace_status", async () => {
                    const result = await db.select().from(workspaceStatus).where((0, drizzle_orm_10.eq)(workspaceStatus.component, component));
                    return result[0];
                });
            }
            /**
             * Creates workspace status.
             * @param status
             */
            async createWorkspaceStatus(status) {
                const result = await dbPerformanceMonitor.trackQuery("createWorkspaceStatus", async () => {
                    return db.insert(workspaceStatus).values(status).returning();
                });
                queryCache.invalidate("workspace_status");
                return result[0];
            }
            /**
             * Updates workspace status.
             * @param component
             * @param status
             */
            async updateWorkspaceStatus(component, status) {
                const result = await dbPerformanceMonitor.trackQuery("updateWorkspaceStatus", async () => {
                    return db.update(workspaceStatus).set({ status }).where((0, drizzle_orm_10.eq)(workspaceStatus.component, component)).returning();
                });
                queryCache.invalidate("workspace_status");
                return result[0];
            }
            // Quality Metrics operations
            /**
             * Gets all quality metrics.
             */
            async getQualityMetrics() {
                return this.withOptimizations("getQualityMetrics", "all_quality_metrics", "quality_metrics", () => db.select().from(qualityMetrics));
            }
            /**
             * Creates quality metric.
             * @param metric
             */
            async createQualityMetric(metric) {
                const result = await dbPerformanceMonitor.trackQuery("createQualityMetric", async () => {
                    return db.insert(qualityMetrics).values(metric).returning();
                });
                queryCache.invalidate("quality_metrics");
                return result[0];
            }
            // Framework Configuration operations
            /**
             * Gets all framework configurations.
             */
            async getFrameworkConfigs() {
                return this.withOptimizations("getFrameworkConfigs", "all_framework_configs", "framework_configs", () => db.select().from(frameworkConfiguration));
            }
            /**
             * Gets framework config by key.
             * @param key
             * @param _key
             */
            async getFrameworkConfig(_key) {
                return this.withOptimizations("getFrameworkConfig", `framework_config:${_key}`, "framework_configs", async () => {
                    const result = await db.select().from(frameworkConfiguration).where((0, drizzle_orm_10.eq)(frameworkConfiguration._key, _key));
                    return result[0];
                });
            }
            /**
             * Sets framework configuration.
             * @param config
             */
            async setFrameworkConfig(config2) {
                const result = await dbPerformanceMonitor.trackQuery("setFrameworkConfig", async () => {
                    return db.insert(frameworkConfiguration).values(config2).onConflictDoUpdate({
                        target: frameworkConfiguration._key,
                        set: { _value: config2._value, updatedAt: /* @__PURE__ */ new Date() }
                    }).returning();
                });
                queryCache.invalidate("framework_configs");
                return result[0];
            }
            // Improvement Suggestions operations
            /**
             * Gets all improvement suggestions.
             */
            async getImprovementSuggestions() {
                return this.withOptimizations("getImprovementSuggestions", "all_improvement_suggestions", "improvement_suggestions", () => db.select().from(improvementSuggestions));
            }
            /**
             * Gets top improvement suggestions.
             * @param limit
             */
            async getTopImprovementSuggestions(limit) {
                return this.withOptimizations("getTopImprovementSuggestions", `top_suggestions:${limit}`, "improvement_suggestions", () => db.select().from(improvementSuggestions).orderBy((0, drizzle_orm_10.desc)(improvementSuggestions.priority), (0, drizzle_orm_10.desc)(improvementSuggestions.createdAt)).limit(limit));
            }
            /**
             * Creates improvement suggestion.
             * @param suggestion
             */
            async createImprovementSuggestion(suggestion) {
                const result = await dbPerformanceMonitor.trackQuery("createImprovementSuggestion", async () => {
                    return db.insert(improvementSuggestions).values([
                        {
                            ...suggestion,
                            category: suggestion.category
                        }
                    ]).returning();
                });
                queryCache.invalidate("improvement_suggestions");
                return result[0];
            }
            /**
             * Clears new suggestions.
             */
            async clearNewSuggestions() {
                await dbPerformanceMonitor.trackQuery("clearNewSuggestions", async () => {
                    return db.update(improvementSuggestions).set({ status: "Acknowledged" }).where((0, drizzle_orm_10.eq)(improvementSuggestions.status, "New"));
                });
                queryCache.invalidate("improvement_suggestions");
            }
            /**
             * Updates suggestion status.
             * @param id
             * @param status
             */
            async updateSuggestionStatus(id, status) {
                const result = await dbPerformanceMonitor.trackQuery("updateSuggestionStatus", async () => {
                    return db.update(improvementSuggestions).set({ status }).where((0, drizzle_orm_10.eq)(improvementSuggestions.id, id)).returning();
                });
                queryCache.invalidate("improvement_suggestions");
                return result[0];
            }
            // Features operations
            /**
             * Gets all features.
             */
            async getFeatures() {
                return this.withOptimizations("getFeatures", "all_features", "features", () => db.select().from(features));
            }
            /**
             * Gets features by status.
             * @param status
             */
            async getFeaturesByStatus(status) {
                return this.withOptimizations("getFeaturesByStatus", `features_status:${status}`, "features", () => db.select().from(features).where((0, drizzle_orm_10.eq)(features.status, status)));
            }
            /**
             * Gets features by category.
             * @param category
             */
            async getFeaturesByCategory(category) {
                return this.withOptimizations("getFeaturesByCategory", `features_category:${category}`, "features", () => db.select().from(features).where((0, drizzle_orm_10.eq)(features.category, category)));
            }
            /**
             * Gets public roadmap features.
             */
            async getPublicRoadmapFeatures() {
                return this.withOptimizations("getPublicRoadmapFeatures", "public_roadmap_features", "features", () => db.select().from(features).where((0, drizzle_orm_10.eq)(features.isPublicRoadmap, true)));
            }
            /**
             * Creates feature.
             * @param feature
             */
            async createFeature(feature) {
                const result = await dbPerformanceMonitor.trackQuery("createFeature", async () => {
                    return db.insert(features).values([feature]).returning();
                });
                queryCache.invalidate("features");
                return result[0];
            }
            /**
             * Updates feature.
             * @param id
             * @param updates
             */
            async updateFeature(id, updates) {
                const result = await dbPerformanceMonitor.trackQuery("updateFeature", async () => {
                    return db.update(features).set(updates).where((0, drizzle_orm_10.eq)(features.id, id)).returning();
                });
                queryCache.invalidate("features");
                return result[0];
            }
            /**
             * Deletes feature.
             * @param id
             */
            async deleteFeature(id) {
                const result = await dbPerformanceMonitor.trackQuery("deleteFeature", async () => {
                    return db.delete(features).where((0, drizzle_orm_10.eq)(features.id, id)).returning();
                });
                queryCache.invalidate("features");
                return result.length > 0;
            }
            // Actionable Items operations
            /**
             * Gets actionable items by feature.
             * @param featureId
             */
            async getActionableItemsByFeature(featureId) {
                return this.withOptimizations("getActionableItemsByFeature", `actionable_items:${featureId}`, "actionable_items", () => db.select().from(actionableItems).where((0, drizzle_orm_10.eq)(actionableItems.featureId, featureId)));
            }
            /**
             * Gets actionable item by ID.
             * @param id
             */
            async getActionableItem(id) {
                return this.withOptimizations("getActionableItem", `actionable_item:${id}`, "actionable_items", async () => {
                    const result = await db.select().from(actionableItems).where((0, drizzle_orm_10.eq)(actionableItems.id, id));
                    return result[0];
                });
            }
            /**
             * Creates actionable item.
             * @param item
             */
            async createActionableItem(item) {
                const result = await dbPerformanceMonitor.trackQuery("createActionableItem", async () => {
                    return db.insert(actionableItems).values([item]).returning();
                });
                queryCache.invalidate("actionable_items");
                return result[0];
            }
            /**
             * Creates multiple actionable items.
             * @param items
             */
            async createActionableItems(items) {
                const result = await dbPerformanceMonitor.trackQuery("createActionableItems", async () => {
                    return db.insert(actionableItems).values(items).returning();
                });
                queryCache.invalidate("actionable_items");
                return result;
            }
            /**
             * Updates actionable item.
             * @param id
             * @param updates
             */
            async updateActionableItem(id, updates) {
                const result = await dbPerformanceMonitor.trackQuery("updateActionableItem", async () => {
                    return db.update(actionableItems).set(updates).where((0, drizzle_orm_10.eq)(actionableItems.id, id)).returning();
                });
                queryCache.invalidate("actionable_items");
                return result[0];
            }
            /**
             * Deletes actionable item.
             * @param id
             */
            async deleteActionableItem(id) {
                const result = await dbPerformanceMonitor.trackQuery("deleteActionableItem", async () => {
                    return db.delete(actionableItems).where((0, drizzle_orm_10.eq)(actionableItems.id, id)).returning();
                });
                queryCache.invalidate("actionable_items");
                return result.length > 0;
            }
            /**
             * Deletes actionable items by feature.
             * @param featureId
             */
            async deleteActionableItemsByFeature(featureId) {
                const result = await dbPerformanceMonitor.trackQuery("deleteActionableItemsByFeature", async () => {
                    return db.delete(actionableItems).where((0, drizzle_orm_10.eq)(actionableItems.featureId, featureId)).returning();
                });
                queryCache.invalidate("actionable_items");
                return result.length > 0;
            }
            // Invitation operations
            /**
             * Gets all invitations.
             */
            async getInvitations() {
                return this.withOptimizations("getInvitations", "all_invitations", "invitations", () => db.select().from(invitations));
            }
            /**
             * Gets invitation by ID.
             * @param id
             */
            async getInvitation(id) {
                return this.withOptimizations("getInvitation", `invitation:${id}`, "invitations", async () => {
                    const result = await db.select().from(invitations).where((0, drizzle_orm_10.eq)(invitations.id, id));
                    return result[0];
                });
            }
            /**
             * Gets invitation by token.
             * @param token
             */
            async getInvitationByToken(token) {
                return this.withOptimizations("getInvitationByToken", `invitation_token:${token}`, "invitations", async () => {
                    const result = await db.select().from(invitations).where((0, drizzle_orm_10.eq)(invitations.token, token));
                    return result[0];
                });
            }
            /**
             * Gets invitations by email.
             * @param email
             */
            async getInvitationsByEmail(email) {
                return this.withOptimizations("getInvitationsByEmail", `invitations_email:${email}`, "invitations", () => db.select().from(invitations).where((0, drizzle_orm_10.eq)(invitations.email, email)));
            }
            /**
             * Gets invitations by inviter.
             * @param userId
             */
            async getInvitationsByInviter(userId) {
                return this.withOptimizations("getInvitationsByInviter", `invitations_inviter:${userId}`, "invitations", () => db.select().from(invitations).where((0, drizzle_orm_10.eq)(invitations.invitedByUserId, userId)));
            }
            /**
             * Gets invitations by status.
             * @param status
             */
            async getInvitationsByStatus(status) {
                return this.withOptimizations("getInvitationsByStatus", `invitations_status:${status}`, "invitations", () => db.select().from(invitations).where((0, drizzle_orm_10.eq)(invitations.status, status)));
            }
            /**
             * Creates invitation.
             * @param invitation
             */
            async createInvitation(invitation) {
                const result = await dbPerformanceMonitor.trackQuery("createInvitation", async () => {
                    return db.insert(invitations).values([invitation]).returning();
                });
                queryCache.invalidate("invitations");
                return result[0];
            }
            /**
             * Updates invitation.
             * @param id
             * @param updates
             */
            async updateInvitation(id, updates) {
                const result = await dbPerformanceMonitor.trackQuery("updateInvitation", async () => {
                    return db.update(invitations).set(updates).where((0, drizzle_orm_10.eq)(invitations.id, id)).returning();
                });
                queryCache.invalidate("invitations");
                return result[0];
            }
            /**
             * Accepts invitation.
             * @param token
             * @param userData
             * @param userData.firstName
             * @param ipAddress
             * @param userData.lastName
             * @param userAgent
             * @param userData.password
             */
            async acceptInvitation(token, userData, ipAddress, userAgent) {
                return dbPerformanceMonitor.trackQuery("acceptInvitation", async () => {
                    const invitation = await this.getInvitationByToken(token);
                    if (!invitation || invitation.status !== "pending") {
                        return null;
                    }
                    const user = await this.createUser({
                        username: invitation.email.split("@")[0],
                        // Use email prefix as username
                        email: invitation.email,
                        firstName: userData.firstName,
                        lastName: userData.lastName,
                        password: userData.password,
                        // This should be hashed
                        language: "en",
                        // Default language
                        role: invitation.role
                    });
                    const updatedInvitation = await this.updateInvitation(invitation.id, {
                        status: "accepted",
                        acceptedAt: /* @__PURE__ */ new Date()
                    });
                    return { user, invitation: updatedInvitation };
                });
            }
            /**
             * Cancels invitation.
             * @param id
             * @param cancelledBy
             */
            async cancelInvitation(id, cancelledBy) {
                const result = await dbPerformanceMonitor.trackQuery("cancelInvitation", async () => {
                    return db.update(invitations).set({
                        status: "cancelled",
                        cancelledBy,
                        cancelledAt: /* @__PURE__ */ new Date(),
                        updatedAt: /* @__PURE__ */ new Date()
                    }).where((0, drizzle_orm_10.eq)(invitations.id, id)).returning();
                });
                queryCache.invalidate("invitations");
                return result[0];
            }
            /**
             * Expires old invitations.
             */
            async expireInvitations() {
                const result = await dbPerformanceMonitor.trackQuery("expireInvitations", async () => {
                    return db.update(invitations).set({ status: "expired", updatedAt: /* @__PURE__ */ new Date() }).where((0, drizzle_orm_10.and)((0, drizzle_orm_10.eq)(invitations.status, "pending"), (0, drizzle_orm_10.lte)(invitations.expiresAt, /* @__PURE__ */ new Date()))).returning();
                });
                queryCache.invalidate("invitations");
                return result.length;
            }
            /**
             * Deletes invitation.
             * @param id
             */
            async deleteInvitation(id) {
                const result = await dbPerformanceMonitor.trackQuery("deleteInvitation", async () => {
                    return db.delete(invitations).where((0, drizzle_orm_10.eq)(invitations.id, id)).returning();
                });
                queryCache.invalidate("invitations");
                return result.length > 0;
            }
            // Invitation Audit Log operations
            /**
             * Gets invitation audit logs.
             * @param invitationId
             */
            async getInvitationAuditLogs(invitationId) {
                return this.withOptimizations("getInvitationAuditLogs", `invitation_logs:${invitationId}`, "invitation_logs", () => db.select().from(invitationAuditLog).where((0, drizzle_orm_10.eq)(invitationAuditLog.invitationId, invitationId)).orderBy((0, drizzle_orm_10.desc)(invitationAuditLog.createdAt)));
            }
            /**
             * Creates invitation audit log.
             * @param logEntry
             */
            async createInvitationAuditLog(logEntry) {
                const result = await dbPerformanceMonitor.trackQuery("createInvitationAuditLog", async () => {
                    return db.insert(invitationAuditLog).values(logEntry).returning();
                });
                queryCache.invalidate("invitation_logs");
                return result[0];
            }
            // Permission operations
            /**
             * Gets all permissions.
             */
            async getPermissions() {
                return this.withOptimizations("getPermissions", "permissions:all", "permissions", () => db.select().from(permissions).where((0, drizzle_orm_10.eq)(permissions.isActive, true)).orderBy(permissions.resourceType, permissions.action));
            }
            /**
             * Gets all role permissions.
             */
            async getRolePermissions() {
                return this.withOptimizations("getRolePermissions", "role_permissions:all", "role_permissions", () => db.select().from(rolePermissions).innerJoin(permissions, (0, drizzle_orm_10.eq)(rolePermissions.permissionId, permissions.id)).where((0, drizzle_orm_10.eq)(permissions.isActive, true)).orderBy(rolePermissions.role, permissions.resourceType));
            }
            /**
             * Gets all user permissions.
             */
            async getUserPermissions() {
                try {
                    const results = await db.select().from(userPermissions).innerJoin(permissions, (0, drizzle_orm_10.eq)(userPermissions.permissionId, permissions.id)).where((0, drizzle_orm_10.eq)(permissions.isActive, true)).orderBy(userPermissions.userId);
                    return results || [];
                }
                catch (error) {
                    console.error("\u274C Error getting user permissions:", error);
                    return [];
                }
            }
            // Old building document methods removed - using unified documents table
            // Unified Document operations
            async getDocuments(filters) {
                return this.withOptimizations("getDocuments", `documents:${JSON.stringify(filters)}`, "documents", async () => {
                    let query = db.select().from(documents);
                    const conditions = [];
                    if (filters?.buildingId) {
                        conditions.push((0, drizzle_orm_10.eq)(documents.buildingId, filters.buildingId));
                    }
                    if (filters?.residenceId) {
                        conditions.push((0, drizzle_orm_10.eq)(documents.residenceId, filters.residenceId));
                    }
                    if (filters?.documentType) {
                        conditions.push((0, drizzle_orm_10.eq)(documents.documentType, filters.documentType));
                    }
                    if (conditions.length > 0) {
                        query = query.where((0, drizzle_orm_10.and)(...conditions));
                    }
                    const result = await query.orderBy((0, drizzle_orm_10.desc)(documents.createdAt));
                    return result || [];
                });
            }
            async getDocument(id) {
                return this.withOptimizations("getDocument", `document:${id}`, "documents", async () => {
                    const result = await db.select().from(documents).where((0, drizzle_orm_10.eq)(documents.id, id)).limit(1);
                    return result[0];
                });
            }
            async createDocument(document) {
                return dbPerformanceMonitor.trackQuery("createDocument", async () => {
                    const result = await db.insert(documents).values(document).returning();
                    if (document.buildingId) {
                        queryCache.invalidate("documents", `*buildingId*${document.buildingId}*`);
                    }
                    if (document.residenceId) {
                        queryCache.invalidate("documents", `*residenceId*${document.residenceId}*`);
                    }
                    return result[0];
                });
            }
            async updateDocument(id, updates) {
                return dbPerformanceMonitor.trackQuery("updateDocument", async () => {
                    const result = await db.update(documents).set({ ...updates, updatedAt: /* @__PURE__ */ new Date() }).where((0, drizzle_orm_10.eq)(documents.id, id)).returning();
                    if (result[0]) {
                        queryCache.invalidate("documents", `document:${id}`);
                        queryCache.invalidate("documents", "*");
                    }
                    return result[0];
                });
            }
            async deleteDocument(id) {
                return dbPerformanceMonitor.trackQuery("deleteDocument", async () => {
                    const result = await db.delete(documents).where((0, drizzle_orm_10.eq)(documents.id, id)).returning({ id: documents.id });
                    if (result.length > 0) {
                        queryCache.invalidate("documents", `document:${id}`);
                        queryCache.invalidate("documents", "*");
                        return true;
                    }
                    return false;
                });
            }
            // Old resident document methods removed - using unified documents table
            // Legacy Document operations (kept for migration purposes)
            /**
             * Gets legacy documents for user.
             * @param userId
             * @param userRole
             * @param organizationId
             * @param residenceIds
             */
            async getDocumentsForUser(userId, userRole, organizationId, residenceIds) {
                return this.withOptimizations("getDocumentsForUser", `legacy_docs:${userId}:${userRole}`, "documents", async () => {
                    return await db.select().from(documents).orderBy((0, drizzle_orm_10.desc)(documents.createdAt));
                });
            }
            // Password reset operations
            /**
             *
             * @param token
             */
            async createPasswordResetToken(token) {
                const result = await db.insert(passwordResetTokens).values(token).returning();
                return result[0];
            }
            /**
             *
             * @param tokenValue
             */
            async getPasswordResetToken(tokenValue) {
                return this.withOptimizations("getPasswordResetToken", `token_${tokenValue}`, "password_reset_tokens", async () => {
                    const result = await db.select().from(passwordResetTokens).where((0, drizzle_orm_10.eq)(passwordResetTokens.token, tokenValue)).limit(1);
                    return result[0];
                });
            }
            /**
             *
             * @param tokenId
             */
            async markPasswordResetTokenAsUsed(tokenId) {
                const result = await db.update(passwordResetTokens).set({
                    isUsed: true,
                    usedAt: /* @__PURE__ */ new Date()
                }).where((0, drizzle_orm_10.eq)(passwordResetTokens.id, tokenId)).returning();
                return result[0];
            }
            /**
             *
             */
            async cleanupExpiredPasswordResetTokens() {
                const result = await db.delete(passwordResetTokens).where((0, drizzle_orm_10.lte)(passwordResetTokens.expiresAt, /* @__PURE__ */ new Date())).returning();
                return result.length;
            }
            // Contact operations
            /**
             * Gets all contacts.
             */
            async getContacts() {
                return this.withOptimizations("getContacts", "all_contacts", "contacts", () => db.select().from(contacts).where((0, drizzle_orm_10.eq)(contacts.isActive, true)));
            }
            /**
             * Gets contacts by entity.
             * @param entityId
             * @param entity
             */
            async getContactsByEntity(entityId, entity) {
                return this.withOptimizations("getContactsByEntity", `contacts_entity:${entity}_${entityId}`, "contacts", () => db.select().from(contacts).where((0, drizzle_orm_10.and)((0, drizzle_orm_10.eq)(contacts.entityId, entityId), (0, drizzle_orm_10.eq)(contacts.entity, entity), (0, drizzle_orm_10.eq)(contacts.isActive, true))));
            }
            /**
             * Gets contacts for residence with user data.
             * @param residenceId
             */
            async getContactsForResidence(residenceId) {
                return this.withOptimizations("getContactsForResidence", `contacts_residence:${residenceId}`, "contacts", () => db.select().from(contacts).innerJoin(users, (0, drizzle_orm_10.eq)(contacts.name, users.email)).where((0, drizzle_orm_10.and)((0, drizzle_orm_10.eq)(contacts.entityId, residenceId), (0, drizzle_orm_10.eq)(contacts.entity, "residence"), (0, drizzle_orm_10.eq)(contacts.isActive, true))));
            }
            /**
             * Creates a new contact.
             * @param contact
             */
            async createContact(contact) {
                const result = await dbPerformanceMonitor.trackQuery("createContact", async () => {
                    return db.insert(contacts).values(contact).returning();
                });
                queryCache.invalidate("contacts");
                return result[0];
            }
            /**
             * Updates a contact.
             * @param id
             * @param updates
             */
            async updateContact(id, updates) {
                const result = await dbPerformanceMonitor.trackQuery("updateContact", async () => {
                    return db.update(contacts).set(updates).where((0, drizzle_orm_10.eq)(contacts.id, id)).returning();
                });
                queryCache.invalidate("contacts");
                return result[0];
            }
            /**
             * Deletes a contact.
             * @param id
             */
            async deleteContact(id) {
                const result = await dbPerformanceMonitor.trackQuery("deleteContact", async () => {
                    return db.update(contacts).set({ isActive: false }).where((0, drizzle_orm_10.eq)(contacts.id, id)).returning();
                });
                queryCache.invalidate("contacts");
                return result.length > 0;
            }
            /**
             * Gets demands for a user.
             * @param userId
             */
            async getDemandsForUser(userId) {
                return this.withOptimizations("getDemandsForUser", `demands_user:${userId}`, "demands", () => db.select().from(demands).where((0, drizzle_orm_10.eq)(demands.userId, userId)));
            }
            /**
             * Gets a specific demand.
             * @param id
             */
            async getDemand(id) {
                return this.withOptimizations("getDemand", `demand:${id}`, "demands", async () => {
                    const result = await db.select().from(demands).where((0, drizzle_orm_10.eq)(demands.id, id));
                    return result[0];
                });
            }
            // Bug operations implementation
            /**
             *
             * @param userId
             * @param userRole
             * @param organizationId
             */
            async getBugsForUser(userId, userRole, organizationId) {
                return this.withOptimizations("getBugsForUser", `bugs:${userRole}:${userId}`, "bugs", async () => {
                    let results;
                    if (userRole === "admin") {
                        results = await db.select().from(bugs).orderBy((0, drizzle_orm_10.desc)(bugs.createdAt));
                    }
                    else if (userRole === "manager" && organizationId) {
                        results = await db.select().from(bugs).orderBy((0, drizzle_orm_10.desc)(bugs.createdAt));
                    }
                    else {
                        results = await db.select().from(bugs).where((0, drizzle_orm_10.eq)(bugs.createdBy, userId)).orderBy((0, drizzle_orm_10.desc)(bugs.createdAt));
                    }
                    const bugsWithAttachments = await Promise.all(results.map(async (bug) => {
                        const attachments = await db.select({
                            id: documents.id,
                            name: documents.name,
                            fileName: documents.fileName,
                            fileSize: documents.fileSize,
                            filePath: documents.filePath
                        }).from(documents).where((0, drizzle_orm_10.and)((0, drizzle_orm_10.eq)(documents.attachedToType, "bug"), (0, drizzle_orm_10.eq)(documents.attachedToId, bug.id)));
                        return {
                            ...bug,
                            attachmentCount: attachments.length,
                            attachments: attachments.map((att) => ({
                                id: att.id,
                                name: att.fileName || att.name,
                                size: parseInt(att.fileSize || "0"),
                                url: `/api/documents/${att.id}/file`,
                                type: att.fileName ? att.fileName.split(".").pop()?.toLowerCase() || "unknown" : "unknown"
                            }))
                        };
                    }));
                    return bugsWithAttachments;
                });
            }
            /**
             *
             * @param id
             * @param userId
             * @param userRole
             * @param organizationId
             */
            async getBug(id, userId, userRole, organizationId) {
                const key = `bug:${id}:user:${userId}:${userRole}`;
                return queryCache.get(key, async () => {
                    const result = await db.select().from(bugs).where((0, drizzle_orm_10.eq)(bugs.id, id));
                    const bug = result[0];
                    if (!bug) {
                        return void 0;
                    }
                    if (userRole === "admin") {
                        return bug;
                    }
                    if (userRole === "manager") {
                        return bug;
                    }
                    return bug.createdBy === userId ? bug : void 0;
                });
            }
            /**
             *
             * @param bugData
             */
            async createBug(bugData) {
                const result = await db.insert(bugs).values({
                    ...bugData,
                    id: crypto_1.default.randomUUID(),
                    status: "new",
                    assignedTo: null,
                    resolvedAt: null,
                    resolvedBy: null,
                    notes: null,
                    createdAt: /* @__PURE__ */ new Date(),
                    updatedAt: /* @__PURE__ */ new Date()
                }).returning();
                queryCache.invalidate("bugs");
                return result[0];
            }
            /**
             *
             * @param id
             * @param updates
             * @param userId
             * @param userRole
             */
            async updateBug(id, updates, userId, userRole) {
                const [existingBug] = await db.select().from(bugs).where((0, drizzle_orm_10.eq)(bugs.id, id));
                if (!existingBug) {
                    return void 0;
                }
                const canEdit = userRole === "admin" || userRole === "manager" || existingBug.createdBy === userId;
                if (!canEdit) {
                    return void 0;
                }
                const result = await db.update(bugs).set({
                    ...updates,
                    updatedAt: /* @__PURE__ */ new Date()
                }).where((0, drizzle_orm_10.eq)(bugs.id, id)).returning();
                if (result[0]) {
                    queryCache.invalidate("bugs");
                }
                return result[0];
            }
            /**
             *
             * @param id
             * @param userId
             * @param userRole
             */
            async deleteBug(id, userId, userRole) {
                const [existingBug] = await db.select().from(bugs).where((0, drizzle_orm_10.eq)(bugs.id, id));
                if (!existingBug) {
                    return false;
                }
                const canDelete = userRole === "admin" || existingBug.createdBy === userId;
                if (!canDelete) {
                    return false;
                }
                const result = await db.delete(bugs).where((0, drizzle_orm_10.eq)(bugs.id, id)).returning();
                if (result.length > 0) {
                    queryCache.invalidate("bugs");
                    return true;
                }
                return false;
            }
            // Feature Request operations with optimization
            /**
             * Retrieves feature requests for a user with role-based access control.
             * @param userId
             * @param userRole
             * @param organizationId
             */
            async getFeatureRequestsForUser(userId, userRole, organizationId) {
                return this.withOptimizations("getFeatureRequestsForUser", `feature_requests:${userRole}:${userId}`, "feature_requests", async () => {
                    const results = await db.select().from(featureRequests).orderBy((0, drizzle_orm_10.desc)(featureRequests.createdAt));
                    const requestsWithAttachments = await Promise.all(results.map(async (request) => {
                        const attachments = await db.select({
                            id: documents.id,
                            name: documents.name,
                            filePath: documents.filePath,
                            fileSize: documents.fileSize,
                            mimeType: documents.mimeType
                        }).from(documents).where((0, drizzle_orm_10.and)((0, drizzle_orm_10.eq)(documents.attachedToType, "feature_request"), (0, drizzle_orm_10.eq)(documents.attachedToId, request.id)));
                        return {
                            ...request,
                            attachmentCount: attachments.length,
                            attachments: attachments.map((att) => ({
                                id: att.id,
                                name: att.name,
                                url: `/api/documents/${att.id}/file`,
                                size: att.fileSize ? parseInt(att.fileSize) : 0,
                                mimeType: att.mimeType
                            }))
                        };
                    }));
                    if (userRole === "admin") {
                        return requestsWithAttachments;
                    }
                    return requestsWithAttachments.map((request) => ({
                        ...request,
                        createdBy: null
                    }));
                });
            }
            /**
             * Retrieves a specific feature request by ID with role-based access control.
             * @param id
             * @param userId
             * @param userRole
             * @param organizationId
             */
            async getFeatureRequest(id, userId, userRole, organizationId) {
                return this.withOptimizations("getFeatureRequest", `feature_request:${id}:${userRole}`, "feature_requests", async () => {
                    const result = await db.select().from(featureRequests).where((0, drizzle_orm_10.eq)(featureRequests.id, id));
                    const featureRequest = result[0];
                    if (!featureRequest) {
                        return void 0;
                    }
                    if (userRole === "admin") {
                        return featureRequest;
                    }
                    return {
                        ...featureRequest,
                        createdBy: null
                    };
                });
            }
            /**
             * Creates a new feature request.
             * @param featureRequestData
             */
            async createFeatureRequest(featureRequestData) {
                const result = await dbPerformanceMonitor.trackQuery("createFeatureRequest", async () => {
                    return db.insert(featureRequests).values({
                        ...featureRequestData,
                        id: crypto_1.default.randomUUID(),
                        status: "submitted",
                        upvoteCount: 0,
                        assignedTo: null,
                        reviewedBy: null,
                        reviewedAt: null,
                        adminNotes: null,
                        mergedIntoId: null,
                        createdAt: /* @__PURE__ */ new Date(),
                        updatedAt: /* @__PURE__ */ new Date()
                    }).returning();
                });
                queryCache.invalidate("feature_requests");
                return result[0];
            }
            /**
             * Updates a feature request (admin only).
             * @param id
             * @param updates
             * @param userId
             * @param userRole
             */
            async updateFeatureRequest(id, updates, userId, userRole) {
                if (userRole !== "admin") {
                    return void 0;
                }
                const result = await dbPerformanceMonitor.trackQuery("updateFeatureRequest", async () => {
                    return db.update(featureRequests).set({
                        ...updates,
                        updatedAt: /* @__PURE__ */ new Date()
                    }).where((0, drizzle_orm_10.eq)(featureRequests.id, id)).returning();
                });
                if (result[0]) {
                    queryCache.invalidate("feature_requests");
                }
                return result[0];
            }
            /**
             * Deletes a feature request (admin only).
             * @param id
             * @param userId
             * @param userRole
             */
            async deleteFeatureRequest(id, userId, userRole) {
                if (userRole !== "admin") {
                    return false;
                }
                await db.delete(featureRequestUpvotes).where((0, drizzle_orm_10.eq)(featureRequestUpvotes.featureRequestId, id));
                const result = await db.delete(featureRequests).where((0, drizzle_orm_10.eq)(featureRequests.id, id)).returning();
                if (result.length > 0) {
                    queryCache.invalidate("feature_requests");
                    queryCache.invalidate("feature_request_upvotes");
                    return true;
                }
                return false;
            }
            /**
             * Upvotes a feature request.
             * @param upvoteData
             */
            async upvoteFeatureRequest(upvoteData) {
                const { featureRequestId, userId } = upvoteData;
                try {
                    const featureRequestResult = await db.select().from(featureRequests).where((0, drizzle_orm_10.eq)(featureRequests.id, featureRequestId));
                    if (featureRequestResult.length === 0) {
                        return {
                            success: false,
                            message: "Feature request not found"
                        };
                    }
                    const existingUpvote = await db.select().from(featureRequestUpvotes).where((0, drizzle_orm_10.and)((0, drizzle_orm_10.eq)(featureRequestUpvotes.featureRequestId, featureRequestId), (0, drizzle_orm_10.eq)(featureRequestUpvotes.userId, userId)));
                    if (existingUpvote.length > 0) {
                        return {
                            success: false,
                            message: "You have already upvoted this feature request"
                        };
                    }
                    const upvoteResult = await db.insert(featureRequestUpvotes).values({
                        ...upvoteData,
                        id: crypto_1.default.randomUUID(),
                        createdAt: /* @__PURE__ */ new Date()
                    }).returning();
                    const updatedFeatureRequest = await db.update(featureRequests).set({
                        upvoteCount: sql `${featureRequests.upvoteCount} + 1`,
                        updatedAt: /* @__PURE__ */ new Date()
                    }).where((0, drizzle_orm_10.eq)(featureRequests.id, featureRequestId)).returning();
                    queryCache.invalidate("feature_requests");
                    queryCache.invalidate("feature_request_upvotes");
                    return {
                        success: true,
                        message: "Feature request upvoted successfully",
                        data: {
                            upvote: upvoteResult[0],
                            featureRequest: updatedFeatureRequest[0]
                        }
                    };
                }
                catch (error) {
                    console.error("\u274C Error upvoting feature request:", error);
                    return {
                        success: false,
                        message: "Failed to upvote feature request"
                    };
                }
            }
            /**
             * Removes an upvote from a feature request.
             * @param featureRequestId
             * @param userId
             */
            async removeFeatureRequestUpvote(featureRequestId, userId) {
                try {
                    const featureRequestResult = await db.select().from(featureRequests).where((0, drizzle_orm_10.eq)(featureRequests.id, featureRequestId));
                    if (featureRequestResult.length === 0) {
                        return {
                            success: false,
                            message: "Feature request not found"
                        };
                    }
                    const removedUpvote = await db.delete(featureRequestUpvotes).where((0, drizzle_orm_10.and)((0, drizzle_orm_10.eq)(featureRequestUpvotes.featureRequestId, featureRequestId), (0, drizzle_orm_10.eq)(featureRequestUpvotes.userId, userId))).returning();
                    if (removedUpvote.length === 0) {
                        return {
                            success: false,
                            message: "You have not upvoted this feature request"
                        };
                    }
                    const updatedFeatureRequest = await db.update(featureRequests).set({
                        upvoteCount: sql `GREATEST(0, ${featureRequests.upvoteCount} - 1)`,
                        updatedAt: /* @__PURE__ */ new Date()
                    }).where((0, drizzle_orm_10.eq)(featureRequests.id, featureRequestId)).returning();
                    queryCache.invalidate("feature_requests");
                    queryCache.invalidate("feature_request_upvotes");
                    return {
                        success: true,
                        message: "Upvote removed successfully",
                        data: {
                            featureRequest: updatedFeatureRequest[0]
                        }
                    };
                }
                catch (error) {
                    console.error("\u274C Error removing feature request upvote:", error);
                    return {
                        success: false,
                        message: "Failed to remove upvote"
                    };
                }
            }
        };
    }
});
// server/storage.ts
var storage_exports = {};
__export(storage_exports, {
    MemStorage: () => MemStorage,
    OptimizedDatabaseStorage: () => OptimizedDatabaseStorage,
    storage: () => storage
});
const crypto_2 = require("crypto");
var MemStorage, storage;
var init_storage = __esm({
    "server/storage.ts"() {
        init_optimized_db_storage();
        init_optimized_db_storage();
        MemStorage = class {
            constructor() {
                this.users = /* @__PURE__ */ new Map();
                this.organizations = /* @__PURE__ */ new Map();
                this.buildings = /* @__PURE__ */ new Map();
                this.residences = /* @__PURE__ */ new Map();
                this.pillars = /* @__PURE__ */ new Map();
                this.workspaceStatuses = /* @__PURE__ */ new Map();
                this.qualityMetrics = /* @__PURE__ */ new Map();
                this.frameworkConfigs = /* @__PURE__ */ new Map();
                this.improvementSuggestions = /* @__PURE__ */ new Map();
                this.features = /* @__PURE__ */ new Map();
                this.actionableItems = /* @__PURE__ */ new Map();
                this.invitations = /* @__PURE__ */ new Map();
                this.invitationAuditLogs = /* @__PURE__ */ new Map();
                this.bugs = /* @__PURE__ */ new Map();
                this.featureRequests = /* @__PURE__ */ new Map();
                this.featureRequestUpvotes = /* @__PURE__ */ new Map();
                this.initializeTestUser().catch(console.error);
            }
            async initializeTestUser() {
                const bcrypt3 = __require("bcryptjs");
                const securePassword = await bcrypt3.hash("admin123", 12);
                const user = {
                    id: "550e8400-e29b-41d4-a716-446655440000",
                    username: "kevin.hervieux@koveo-gestion.com",
                    email: "kevin.hervieux@koveo-gestion.com",
                    password: securePassword,
                    firstName: "Kevin",
                    lastName: "Hervieux",
                    phone: "",
                    profileImage: "",
                    language: "fr",
                    role: "admin",
                    isActive: true,
                    lastLoginAt: null,
                    createdAt: /* @__PURE__ */ new Date(),
                    updatedAt: /* @__PURE__ */ new Date()
                };
                this.users.set(user.id, user);
            }
            // User operations
            async getUsers() {
                return Array.from(this.users.values());
            }
            async getUsersWithAssignments() {
                const users5 = Array.from(this.users.values());
                return users5.map((user) => ({
                    ...user,
                    organizations: [],
                    buildings: [],
                    residences: []
                }));
            }
            async getUsersByOrganizations(_userId) {
                return [];
            }
            async getUser(id) {
                return this.users.get(id);
            }
            async getUserOrganizations(_userId) {
                return [];
            }
            async getUserResidences(_userId) {
                return [];
            }
            async getUserByEmail(email) {
                return Array.from(this.users.values()).find((user) => user.email === email);
            }
            async createUser(insertUser) {
                const id = (0, crypto_2.randomUUID)();
                const user = {
                    ...insertUser,
                    id,
                    phone: insertUser.phone || null,
                    profileImage: insertUser.profileImage || "",
                    role: insertUser.role || "tenant",
                    language: insertUser.language || "fr",
                    isActive: true,
                    lastLoginAt: null,
                    createdAt: /* @__PURE__ */ new Date(),
                    updatedAt: /* @__PURE__ */ new Date()
                };
                this.users.set(id, user);
                return user;
            }
            async updateUser(id, updates) {
                const existingUser = this.users.get(id);
                if (!existingUser) {
                    return void 0;
                }
                const updatedUser = {
                    ...existingUser,
                    ...updates,
                    updatedAt: /* @__PURE__ */ new Date()
                };
                this.users.set(id, updatedUser);
                return updatedUser;
            }
            // Minimal implementations for other required methods
            async createPasswordResetToken(_token) {
                return {
                    ..._token,
                    id: (0, crypto_2.randomUUID)(),
                    createdAt: /* @__PURE__ */ new Date(),
                    usedAt: null,
                    isUsed: false,
                    ipAddress: _token.ipAddress || "",
                    userAgent: _token.userAgent || ""
                };
            }
            async getPasswordResetToken(_token) {
                return void 0;
            }
            async markPasswordResetTokenAsUsed(_tokenId) {
                return void 0;
            }
            async cleanupExpiredPasswordResetTokens() {
                return 0;
            }
            async getOrganizations() {
                return Array.from(this.organizations.values());
            }
            async getOrganization(id) {
                return this.organizations.get(id);
            }
            async getOrganizationByName(name) {
                return Array.from(this.organizations.values()).find((org) => org.name === name);
            }
            async createOrganization(org) {
                const id = (0, crypto_2.randomUUID)();
                const organization = {
                    ...org,
                    id,
                    phone: org.phone || "",
                    email: org.email || "",
                    website: org.website || "",
                    registrationNumber: org.registrationNumber || "",
                    isActive: true,
                    createdAt: /* @__PURE__ */ new Date(),
                    updatedAt: /* @__PURE__ */ new Date()
                };
                this.organizations.set(id, organization);
                return organization;
            }
            async updateOrganization(id, updates) {
                const existing = this.organizations.get(id);
                if (!existing)
                    return void 0;
                const updated = { ...existing, ...updates, updatedAt: /* @__PURE__ */ new Date() };
                this.organizations.set(id, updated);
                return updated;
            }
            async getBuildingsByOrganization(orgId) {
                return Array.from(this.buildings.values()).filter((b) => b.organizationId === orgId);
            }
            async getBuildings() {
                return Array.from(this.buildings.values());
            }
            async getBuilding(id) {
                return this.buildings.get(id);
            }
            async createBuilding(building) {
                const id = (0, crypto_2.randomUUID)();
                const newBuilding = {
                    ...building,
                    id,
                    isActive: true,
                    createdAt: /* @__PURE__ */ new Date(),
                    updatedAt: /* @__PURE__ */ new Date(),
                    totalUnits: building.totalUnits || 0,
                    totalFloors: building.totalFloors || 0,
                    yearBuilt: building.yearBuilt || 0,
                    buildingType: building.buildingType,
                    bankAccountNumber: building.bankAccountNumber || "",
                    bankAccountMinimums: building.bankAccountMinimums ? JSON.stringify(building.bankAccountMinimums) : "",
                    bankAccountUpdatedAt: /* @__PURE__ */ new Date(),
                    inflationSettings: "",
                    parkingSpaces: building.parkingSpaces || 0,
                    storageSpaces: building.storageSpaces || 0,
                    amenities: building.amenities || null,
                    managementCompany: building.managementCompany || null,
                    bankAccountNotes: null,
                    bankAccountStartDate: null,
                    bankAccountStartAmount: null
                };
                this.buildings.set(id, newBuilding);
                return newBuilding;
            }
            async updateBuilding(id, updates) {
                const existing = this.buildings.get(id);
                if (!existing)
                    return void 0;
                const updated = { ...existing, ...updates, updatedAt: /* @__PURE__ */ new Date() };
                this.buildings.set(id, updated);
                return updated;
            }
            async deleteBuilding(id) {
                const building = this.buildings.get(id);
                if (!building) {
                    return false;
                }
                const updatedBuilding = {
                    ...building,
                    isActive: false,
                    updatedAt: /* @__PURE__ */ new Date()
                };
                this.buildings.set(id, updatedBuilding);
                return true;
            }
            async getResidences() {
                return Array.from(this.residences.values());
            }
            async getResidence(id) {
                return this.residences.get(id);
            }
            async getResidencesByBuilding(buildingId) {
                return Array.from(this.residences.values()).filter((r) => r.buildingId === buildingId);
            }
            async createResidence(residence) {
                const id = (0, crypto_2.randomUUID)();
                const newResidence = {
                    ...residence,
                    id,
                    isActive: true,
                    createdAt: /* @__PURE__ */ new Date(),
                    updatedAt: /* @__PURE__ */ new Date(),
                    floor: residence.floor || 0,
                    squareFootage: residence.squareFootage?.toString() || "0",
                    bedrooms: residence.bedrooms || 0,
                    bathrooms: residence.bathrooms?.toString() || "0",
                    balcony: residence.balcony || false,
                    parkingSpaceNumbers: residence.parkingSpaceNumbers || [],
                    storageSpaceNumbers: residence.storageSpaceNumbers || [],
                    ownershipPercentage: residence.ownershipPercentage?.toString() || "0",
                    monthlyFees: residence.monthlyFees?.toString() || "0"
                };
                this.residences.set(id, newResidence);
                return newResidence;
            }
            async updateResidence(id, updates) {
                const existing = this.residences.get(id);
                if (!existing)
                    return void 0;
                const updated = { ...existing, ...updates, updatedAt: /* @__PURE__ */ new Date() };
                this.residences.set(id, updated);
                return updated;
            }
            async deleteResidence(id) {
                return this.residences.delete(id);
            }
            async getContacts() {
                return [];
            }
            async getContactsByEntity() {
                return [];
            }
            async getContactsForResidence() {
                return [];
            }
            async createContact(contact) {
                const id = (0, crypto_2.randomUUID)();
                return {
                    ...contact,
                    id,
                    name: contact.name,
                    email: contact.email || "",
                    phone: contact.phone || "",
                    entity: contact.entity,
                    entityId: contact.entityId,
                    contactCategory: contact.contactCategory,
                    isActive: true,
                    createdAt: /* @__PURE__ */ new Date(),
                    updatedAt: /* @__PURE__ */ new Date()
                };
            }
            async updateContact() {
                return void 0;
            }
            async deleteContact() {
                return false;
            }
            async getDocuments(_filters) {
                return [];
            }
            async getDocument(_id) {
                return void 0;
            }
            async createDocument(doc) {
                const id = (0, crypto_2.randomUUID)();
                return {
                    ...doc,
                    id,
                    description: doc.description || "",
                    buildingId: doc.buildingId || "",
                    residenceId: doc.residenceId || "",
                    fileName: doc.fileName || "",
                    fileSize: doc.fileSize || "",
                    mimeType: doc.mimeType || "",
                    attachedToType: doc.attachedToType || "",
                    attachedToId: doc.attachedToId || "",
                    createdAt: /* @__PURE__ */ new Date(),
                    updatedAt: /* @__PURE__ */ new Date()
                };
            }
            async updateDocument(_id, _updates) {
                return void 0;
            }
            async deleteDocument(_id) {
                return false;
            }
            async getPermissions() {
                return [];
            }
            async getRolePermissions() {
                return [];
            }
            async getUserPermissions() {
                return [];
            }
            async getPillars() {
                return Array.from(this.pillars.values()).sort((a, b) => parseInt(a.order) - parseInt(b.order));
            }
            async getPillar(id) {
                return this.pillars.get(id);
            }
            async createPillar(pillar) {
                const id = (0, crypto_2.randomUUID)();
                const newPillar = {
                    ...pillar,
                    id,
                    name: pillar.name,
                    description: pillar.description || "",
                    status: pillar.status || "pending",
                    order: pillar.order.toString(),
                    configuration: pillar.configuration || null,
                    createdAt: /* @__PURE__ */ new Date(),
                    updatedAt: /* @__PURE__ */ new Date()
                };
                this.pillars.set(id, newPillar);
                return newPillar;
            }
            async updatePillar(id, updates) {
                const existing = this.pillars.get(id);
                if (!existing)
                    return void 0;
                const updated = { ...existing, ...updates, updatedAt: /* @__PURE__ */ new Date() };
                this.pillars.set(id, updated);
                return updated;
            }
            async getWorkspaceStatuses() {
                return Array.from(this.workspaceStatuses.values());
            }
            async getWorkspaceStatus(component) {
                return this.workspaceStatuses.get(component);
            }
            async createWorkspaceStatus(status) {
                const id = (0, crypto_2.randomUUID)();
                const newStatus = {
                    ...status,
                    id,
                    status: status.status,
                    component: status.component,
                    lastUpdated: /* @__PURE__ */ new Date()
                };
                this.workspaceStatuses.set(status.component, newStatus);
                return newStatus;
            }
            async updateWorkspaceStatus(component, updates) {
                const existing = this.workspaceStatuses.get(component);
                if (!existing)
                    return void 0;
                const updated = { ...existing, ...updates, updatedAt: /* @__PURE__ */ new Date() };
                this.workspaceStatuses.set(component, updated);
                return updated;
            }
            async getQualityMetrics() {
                return Array.from(this.qualityMetrics.values());
            }
            async createQualityMetric(metric) {
                const id = (0, crypto_2.randomUUID)();
                const newMetric = {
                    ...metric,
                    id,
                    timestamp: /* @__PURE__ */ new Date()
                };
                this.qualityMetrics.set(id, newMetric);
                return newMetric;
            }
            async getFrameworkConfigurations() {
                return Array.from(this.frameworkConfigs.values());
            }
            async createFrameworkConfiguration(config2) {
                const id = (0, crypto_2.randomUUID)();
                const newConfig = {
                    ...config2,
                    id,
                    description: config2.description || "",
                    createdAt: /* @__PURE__ */ new Date(),
                    updatedAt: /* @__PURE__ */ new Date()
                };
                this.frameworkConfigs.set(config2._key, newConfig);
                return newConfig;
            }
            async updateFrameworkConfiguration(key, updates) {
                const existing = this.frameworkConfigs.get(key);
                if (!existing)
                    return void 0;
                const updated = { ...existing, ...updates, updatedAt: /* @__PURE__ */ new Date() };
                this.frameworkConfigs.set(key, updated);
                return updated;
            }
            async getImprovementSuggestions() {
                return Array.from(this.improvementSuggestions.values());
            }
            async createImprovementSuggestion(suggestion) {
                const id = (0, crypto_2.randomUUID)();
                const newSuggestion = {
                    ...suggestion,
                    id,
                    filePath: suggestion.filePath || null,
                    status: suggestion.status,
                    category: suggestion.category,
                    priority: suggestion.priority || "Medium",
                    assignedTo: suggestion.assignedTo || null,
                    technicalDetails: suggestion.technicalDetails || null,
                    businessImpact: suggestion.businessImpact || null,
                    implementationEffort: suggestion.implementationEffort || null,
                    quebecComplianceRelevance: suggestion.quebecComplianceRelevance || null,
                    suggestedBy: suggestion.suggestedBy || null,
                    createdAt: /* @__PURE__ */ new Date(),
                    updatedAt: /* @__PURE__ */ new Date(),
                    acknowledgedAt: null,
                    completedAt: null
                };
                this.improvementSuggestions.set(id, newSuggestion);
                return newSuggestion;
            }
            async updateImprovementSuggestion(id, updates) {
                const existing = this.improvementSuggestions.get(id);
                if (!existing)
                    return void 0;
                const updated = { ...existing, ...updates, updatedAt: /* @__PURE__ */ new Date() };
                this.improvementSuggestions.set(id, updated);
                return updated;
            }
            async getTopImprovementSuggestions(limit) {
                const suggestions = Array.from(this.improvementSuggestions.values());
                const priorityOrder = { "Critical": 0, "High": 1, "Medium": 2, "Low": 3 };
                return suggestions.sort((a, b) => {
                    const priorityA = priorityOrder[a.priority] ?? 999;
                    const priorityB = priorityOrder[b.priority] ?? 999;
                    const priorityDiff = priorityA - priorityB;
                    if (priorityDiff !== 0)
                        return priorityDiff;
                    return new Date(a.createdAt).getTime() - new Date(b.createdAt).getTime();
                }).slice(0, limit);
            }
            async clearNewSuggestions() {
                for (const [id, suggestion] of this.improvementSuggestions.entries()) {
                    if (suggestion.status === "New") {
                        this.improvementSuggestions.delete(id);
                    }
                }
            }
            async updateSuggestionStatus(id, status) {
                const suggestion = this.improvementSuggestions.get(id);
                if (!suggestion)
                    return void 0;
                const updatedSuggestion = {
                    ...suggestion,
                    status,
                    updatedAt: /* @__PURE__ */ new Date()
                };
                this.improvementSuggestions.set(id, updatedSuggestion);
                return updatedSuggestion;
            }
            async getFeatures() {
                return Array.from(this.features.values());
            }
            async getFeature(id) {
                return this.features.get(id);
            }
            async createFeature(feature) {
                const id = (0, crypto_2.randomUUID)();
                const newFeature = {
                    ...feature,
                    id,
                    isPublicRoadmap: true,
                    createdAt: /* @__PURE__ */ new Date(),
                    updatedAt: /* @__PURE__ */ new Date(),
                    requestedBy: feature.requestedBy || null,
                    assignedTo: feature.assignedTo || null,
                    estimatedHours: feature.estimatedHours || null,
                    businessObjective: feature.businessObjective || null,
                    targetUsers: feature.targetUsers || null,
                    successMetrics: feature.successMetrics || null,
                    technicalComplexity: feature.technicalComplexity || null,
                    dependencies: feature.dependencies?.join(",") || null,
                    userFlow: feature.userFlow || null,
                    actualHours: null,
                    startDate: null,
                    completedDate: null,
                    tags: null,
                    metadata: null,
                    aiAnalysisResult: null,
                    aiAnalyzedAt: null,
                    isStrategicPath: false,
                    syncedAt: null
                };
                this.features.set(id, newFeature);
                return newFeature;
            }
            async updateFeature(id, updates) {
                const existing = this.features.get(id);
                if (!existing)
                    return void 0;
                const updated = { ...existing, ...updates, updatedAt: /* @__PURE__ */ new Date() };
                this.features.set(id, updated);
                return updated;
            }
            async getFeaturesByStatus(status) {
                return Array.from(this.features.values()).filter((f) => f.status === status);
            }
            async getPublicRoadmapFeatures() {
                return Array.from(this.features.values()).filter((f) => f.isPublicRoadmap);
            }
            async getActionableItems() {
                return Array.from(this.actionableItems.values());
            }
            async createActionableItem(item) {
                const id = (0, crypto_2.randomUUID)();
                const newItem = {
                    ...item,
                    id,
                    featureId: item.featureId || (0, crypto_2.randomUUID)(),
                    createdAt: /* @__PURE__ */ new Date(),
                    updatedAt: /* @__PURE__ */ new Date(),
                    estimatedHours: item.estimatedHours || null,
                    actualHours: null,
                    dependencies: item.dependencies || null,
                    technicalDetails: null,
                    implementationPrompt: null,
                    testingRequirements: null,
                    estimatedEffort: null,
                    orderIndex: 0,
                    startedAt: null,
                    completedAt: null
                };
                this.actionableItems.set(id, newItem);
                return newItem;
            }
            async updateActionableItem(id, updates) {
                const existing = this.actionableItems.get(id);
                if (!existing)
                    return void 0;
                const updated = { ...existing, ...updates, updatedAt: /* @__PURE__ */ new Date() };
                this.actionableItems.set(id, updated);
                return updated;
            }
            async deleteActionableItem(id) {
                return this.actionableItems.delete(id);
            }
            async getInvitations() {
                return Array.from(this.invitations.values());
            }
            async createInvitation(invitation) {
                const id = (0, crypto_2.randomUUID)();
                const newInvitation = {
                    ...invitation,
                    id,
                    token: (0, crypto_2.randomUUID)(),
                    createdAt: /* @__PURE__ */ new Date(),
                    updatedAt: /* @__PURE__ */ new Date(),
                    status: "pending",
                    ipAddress: "",
                    userAgent: "",
                    tokenHash: null,
                    usedAt: null,
                    createdByUserId: invitation.invitedByUserId,
                    acceptedByUserId: null,
                    acceptedAt: null,
                    revokedAt: null,
                    revokedByUserId: null,
                    lastAccessedAt: null
                };
                this.invitations.set(id, newInvitation);
                return newInvitation;
            }
            async getInvitationByToken(token) {
                return Array.from(this.invitations.values()).find((inv) => inv.token === token);
            }
            async updateInvitation(id, updates) {
                const existing = this.invitations.get(id);
                if (!existing)
                    return void 0;
                const updated = { ...existing, ...updates, updatedAt: /* @__PURE__ */ new Date() };
                this.invitations.set(id, updated);
                return updated;
            }
            async getInvitationAuditLogs() {
                return Array.from(this.invitationAuditLogs.values());
            }
            async createInvitationAuditLog(log2) {
                const id = (0, crypto_2.randomUUID)();
                const newLog = {
                    ...log2,
                    id,
                    createdAt: /* @__PURE__ */ new Date(),
                    ipAddress: log2.ipAddress || "",
                    userAgent: log2.userAgent || "",
                    details: log2.details || {},
                    previousStatus: log2.previousStatus || "pending",
                    newStatus: log2.newStatus || "pending"
                };
                this.invitationAuditLogs.set(id, newLog);
                return newLog;
            }
            async getCommentsByDemand() {
                return [];
            }
            async createDemandComment(comment) {
                const id = (0, crypto_2.randomUUID)();
                return {
                    ...comment,
                    id,
                    createdAt: /* @__PURE__ */ new Date(),
                    updatedAt: /* @__PURE__ */ new Date()
                };
            }
            async getBugs() {
                return Array.from(this.bugs.values());
            }
            async getBugsForUser(userId, userRole, organizationId) {
                const allBugs = Array.from(this.bugs.values());
                if (userRole === "admin") {
                    return allBugs;
                }
                else if (userRole === "manager" && organizationId) {
                    return allBugs;
                }
                else {
                    return allBugs.filter((bug) => bug.createdBy === userId);
                }
            }
            async getBug(id, userId, role, organizationId) {
                const bug = this.bugs.get(id);
                if (!bug)
                    return void 0;
                if (userId && role) {
                    if (role === "admin") {
                        return bug;
                    }
                    else if (role === "manager" && organizationId) {
                        return bug;
                    }
                    else if (bug.createdBy === userId) {
                        return bug;
                    }
                    else {
                        return void 0;
                    }
                }
                return bug;
            }
            async createBug(bug) {
                const id = (0, crypto_2.randomUUID)();
                const newBug = {
                    ...bug,
                    id,
                    status: "new",
                    createdAt: /* @__PURE__ */ new Date(),
                    updatedAt: /* @__PURE__ */ new Date(),
                    reproductionSteps: bug.reproductionSteps || "",
                    assignedTo: null,
                    resolvedAt: null,
                    resolvedBy: null,
                    notes: null,
                    environment: bug.environment || ""
                };
                this.bugs.set(id, newBug);
                return newBug;
            }
            async updateBug(id, updates, userId, role) {
                const existing = this.bugs.get(id);
                if (!existing)
                    return void 0;
                if (userId && role) {
                    if (role === "admin" || role === "manager") {
                    }
                    else if (existing.createdBy === userId) {
                    }
                    else {
                        return void 0;
                    }
                }
                const updated = { ...existing, ...updates, updatedAt: /* @__PURE__ */ new Date() };
                this.bugs.set(id, updated);
                return updated;
            }
            async deleteBug(id, userId, role) {
                const existing = this.bugs.get(id);
                if (!existing)
                    return false;
                if (role === "admin" || existing.createdBy === userId) {
                    this.bugs.delete(id);
                    return true;
                }
                return false;
            }
            async getFeatureRequests() {
                const featureRequests2 = Array.from(this.featureRequests.values());
                const enrichedRequests = await Promise.all(featureRequests2.map(async (request) => {
                    const attachments = [];
                    return {
                        ...request,
                        attachmentCount: attachments.length,
                        attachments: []
                    };
                }));
                return enrichedRequests;
            }
            async getFeatureRequestsForUser(userId, role, organizationId) {
                return this.getFeatureRequests();
            }
            async getFeatureRequest(id, userId, role, organizationId) {
                const request = this.featureRequests.get(id);
                if (!request)
                    return void 0;
                const attachments = [];
                return {
                    ...request,
                    attachmentCount: attachments.length,
                    attachments: []
                };
            }
            async createFeatureRequest(request) {
                const id = (0, crypto_2.randomUUID)();
                const newRequest = {
                    ...request,
                    id,
                    status: "submitted",
                    createdAt: /* @__PURE__ */ new Date(),
                    updatedAt: /* @__PURE__ */ new Date(),
                    upvoteCount: 0,
                    assignedTo: null,
                    reviewedBy: null,
                    reviewedAt: null,
                    estimatedHours: null,
                    mergedIntoId: null
                };
                this.featureRequests.set(id, newRequest);
                return newRequest;
            }
            async updateFeatureRequest(id, updates) {
                const existing = this.featureRequests.get(id);
                if (!existing)
                    return void 0;
                const updated = { ...existing, ...updates, updatedAt: /* @__PURE__ */ new Date() };
                this.featureRequests.set(id, updated);
                return updated;
            }
            async addFeatureRequestUpvote() {
                return { success: true, message: "Upvote added" };
            }
            async removeFeatureRequestUpvote() {
                return { success: true, message: "Upvote removed" };
            }
        };
        storage = new OptimizedDatabaseStorage();
    }
});
// server/api/buildings/operations.ts
var operations_exports = {};
__export(operations_exports, {
    addResidencesAutomatically: () => addResidencesAutomatically,
    adjustResidenceCount: () => adjustResidenceCount,
    buildingExists: () => buildingExists,
    cascadeDeleteBuilding: () => cascadeDeleteBuilding,
    createBuilding: () => createBuilding,
    deleteBuilding: () => deleteBuilding,
    deleteSelectedResidences: () => deleteSelectedResidences,
    getResidencesForSelection: () => getResidencesForSelection,
    updateBuilding: () => updateBuilding
});
const drizzle_orm_12 = require("drizzle-orm");
const crypto_3 = __importDefault(require("crypto"));
async function createBuilding(buildingData) {
    const buildingId = crypto_3.default.randomUUID();
    const newBuilding = await db.insert(buildings).values({
        name: buildingData.name,
        address: buildingData.address || "",
        city: buildingData.city || "",
        province: buildingData.province || "QC",
        postalCode: buildingData.postalCode || "",
        buildingType: buildingData.buildingType || "condo",
        yearBuilt: buildingData.yearBuilt,
        totalUnits: buildingData.totalUnits || 0,
        totalFloors: buildingData.totalFloors,
        parkingSpaces: buildingData.parkingSpaces,
        storageSpaces: buildingData.storageSpaces,
        amenities: buildingData.amenities,
        managementCompany: buildingData.managementCompany,
        organizationId: buildingData.organizationId,
        isActive: true
    }).returning();
    if (buildingData.totalUnits && buildingData.totalUnits > 0 && buildingData.totalUnits <= 300) {
        try {
            const totalUnits = buildingData.totalUnits;
            const totalFloors = buildingData.totalFloors || 1;
            const unitsPerFloor = Math.ceil(totalUnits / totalFloors);
            const residencesToCreate = [];
            for (let unit = 1; unit <= totalUnits; unit++) {
                const floor = Math.ceil(unit / unitsPerFloor);
                const unitOnFloor = (unit - 1) % unitsPerFloor + 1;
                const unitNumber = `${floor}${unitOnFloor.toString().padStart(2, "0")}`;
                residencesToCreate.push({
                    buildingId: newBuilding[0].id,
                    unitNumber,
                    floor,
                    isActive: true
                });
            }
            const createdResidences = await db.insert(residences).values(residencesToCreate).returning();
        }
        catch (___residenceError) {
            console.error("\u26A0\uFE0F Error auto-generating residences:", ___residenceError);
        }
    }
    return newBuilding[0];
}
async function adjustResidenceCount(buildingId, organizationId, newTotalUnits, currentTotalUnits, totalFloors) {
    const currentActiveResidences = await db.select({ id: residences.id, unitNumber: residences.unitNumber }).from(residences).where((0, drizzle_orm_12.and)((0, drizzle_orm_12.eq)(residences.buildingId, buildingId), (0, drizzle_orm_12.eq)(residences.isActive, true)));
    const currentActiveCount = currentActiveResidences.length;
    if (newTotalUnits > currentActiveCount) {
        await addResidencesAutomatically(buildingId, newTotalUnits - currentActiveCount, totalFloors, currentActiveResidences);
        return { action: "increased" };
    }
    else if (newTotalUnits < currentActiveCount) {
        const deletableResidences = await getResidencesForSelection(buildingId, currentActiveCount - newTotalUnits);
        return { action: "decreased", residencesToSelect: deletableResidences };
    }
    return { action: "none" };
}
async function addResidencesAutomatically(buildingId, residencesToAdd, totalFloors, existingResidences) {
    const existingUnitNumbers = new Set(existingResidences.map((r) => r.unitNumber));
    const unitsPerFloor = Math.ceil((existingResidences.length + residencesToAdd) / totalFloors);
    const residencesToCreate = [];
    let unitCounter = 1;
    let created = 0;
    while (created < residencesToAdd) {
        const floor = Math.ceil(unitCounter / unitsPerFloor);
        const unitOnFloor = (unitCounter - 1) % unitsPerFloor + 1;
        const unitNumber = `${floor}${unitOnFloor.toString().padStart(2, "0")}`;
        if (!existingUnitNumbers.has(unitNumber)) {
            residencesToCreate.push({
                buildingId,
                unitNumber,
                floor,
                isActive: true
            });
            existingUnitNumbers.add(unitNumber);
            created++;
        }
        unitCounter++;
    }
    if (residencesToCreate.length > 0) {
        await db.insert(residences).values(residencesToCreate);
        console.log(`\u2705 Auto-created ${residencesToCreate.length} residences for building ${buildingId}`);
    }
}
async function getResidencesForSelection(buildingId, maxToSelect) {
    const allActiveResidences = await db.select({
        id: residences.id,
        unitNumber: residences.unitNumber,
        floor: residences.floor
    }).from(residences).where((0, drizzle_orm_12.and)((0, drizzle_orm_12.eq)(residences.buildingId, buildingId), (0, drizzle_orm_12.eq)(residences.isActive, true))).orderBy(residences.unitNumber);
    const residenceDetails = await Promise.all(allActiveResidences.map(async (residence) => {
        const docs = await db.select({ id: documents.id }).from(documents).where((0, drizzle_orm_12.eq)(documents.residenceId, residence.id)).limit(1);
        const userRels = await db.select({ id: userResidences.id }).from(userResidences).where((0, drizzle_orm_12.and)((0, drizzle_orm_12.eq)(userResidences.residenceId, residence.id), (0, drizzle_orm_12.eq)(userResidences.isActive, true))).limit(1);
        return {
            id: residence.id,
            unitNumber: residence.unitNumber,
            hasDocuments: docs.length > 0,
            hasUsers: userRels.length > 0
        };
    }));
    return residenceDetails.sort((a, b) => {
        const aScore = (a.hasDocuments ? 1 : 0) + (a.hasUsers ? 1 : 0);
        const bScore = (b.hasDocuments ? 1 : 0) + (b.hasUsers ? 1 : 0);
        return aScore - bScore;
    });
}
async function deleteSelectedResidences(buildingId, residenceIds, userRole) {
    if (userRole !== "admin") {
        throw new Error("Only admins can delete residences");
    }
    const documentsToDelete = await db.select({ id: documents.id }).from(documents).where((0, drizzle_orm_12.inArray)(documents.residenceId, residenceIds));
    await db.delete(documents).where((0, drizzle_orm_12.inArray)(documents.residenceId, residenceIds));
    await db.update(userResidences).set({ isActive: false, updatedAt: /* @__PURE__ */ new Date() }).where((0, drizzle_orm_12.and)((0, drizzle_orm_12.inArray)(userResidences.residenceId, residenceIds), (0, drizzle_orm_12.eq)(userResidences.isActive, true)));
    await db.update(residences).set({ isActive: false, updatedAt: /* @__PURE__ */ new Date() }).where((0, drizzle_orm_12.and)((0, drizzle_orm_12.inArray)(residences.id, residenceIds), (0, drizzle_orm_12.eq)(residences.buildingId, buildingId)));
    console.log(`\u{1F5D1}\uFE0F Deleted ${residenceIds.length} residences and ${documentsToDelete.length} documents for building ${buildingId}`);
    return {
        deletedCount: residenceIds.length,
        documentsDeleted: documentsToDelete.length
    };
}
async function updateBuilding(buildingId, buildingData) {
    const currentBuilding = await db.select({ totalUnits: buildings.totalUnits, totalFloors: buildings.totalFloors, organizationId: buildings.organizationId }).from(buildings).where((0, drizzle_orm_12.eq)(buildings.id, buildingId)).limit(1);
    if (currentBuilding.length === 0) {
        throw new Error("Building not found");
    }
    const updatedBuilding = await db.update(buildings).set({
        name: buildingData.name,
        address: buildingData.address || "",
        city: buildingData.city || "",
        province: buildingData.province || "QC",
        postalCode: buildingData.postalCode || "",
        buildingType: buildingData.buildingType || "condo",
        yearBuilt: buildingData.yearBuilt,
        totalUnits: buildingData.totalUnits || 0,
        totalFloors: buildingData.totalFloors,
        parkingSpaces: buildingData.parkingSpaces,
        storageSpaces: buildingData.storageSpaces,
        amenities: buildingData.amenities ? JSON.stringify(buildingData.amenities) : null,
        managementCompany: buildingData.managementCompany,
        organizationId: buildingData.organizationId,
        updatedAt: /* @__PURE__ */ new Date()
    }).where((0, drizzle_orm_12.eq)(buildings.id, buildingId)).returning();
    if (buildingData.totalUnits && buildingData.totalUnits !== currentBuilding[0].totalUnits) {
        await adjustResidenceCount(buildingId, currentBuilding[0].organizationId, buildingData.totalUnits, currentBuilding[0].totalUnits, buildingData.totalFloors || currentBuilding[0].totalFloors || 1);
    }
    return updatedBuilding[0];
}
async function deleteBuilding(buildingId) {
    const deletedBuilding = await db.update(buildings).set({
        isActive: false,
        updatedAt: /* @__PURE__ */ new Date()
    }).where((0, drizzle_orm_12.eq)(buildings.id, buildingId)).returning();
    return deletedBuilding[0];
}
async function cascadeDeleteBuilding(buildingId) {
    const building = await db.select({ id: buildings.id, name: buildings.name }).from(buildings).where((0, drizzle_orm_12.and)((0, drizzle_orm_12.eq)(buildings.id, buildingId), (0, drizzle_orm_12.eq)(buildings.isActive, true))).limit(1);
    if (building.length === 0) {
        throw new Error("Building not found");
    }
    await db.transaction(async (tx) => {
        const buildingResidences = await tx.select({ id: residences.id }).from(residences).where((0, drizzle_orm_12.and)((0, drizzle_orm_12.eq)(residences.buildingId, buildingId), (0, drizzle_orm_12.eq)(residences.isActive, true)));
        const residenceIds = buildingResidences.map((r) => r.id);
        if (residenceIds.length > 0) {
            await tx.delete(documents).where((0, drizzle_orm_12.inArray)(documents.residenceId, residenceIds));
            await tx.update(userResidences).set({ isActive: false, updatedAt: /* @__PURE__ */ new Date() }).where((0, drizzle_orm_12.inArray)(userResidences.residenceId, residenceIds));
            console.log("\u26A0\uFE0F  User deletion disabled for data safety - users will be preserved");
            await tx.update(residences).set({ isActive: false, updatedAt: /* @__PURE__ */ new Date() }).where((0, drizzle_orm_12.inArray)(residences.id, residenceIds));
        }
        await tx.update(buildings).set({ isActive: false, updatedAt: /* @__PURE__ */ new Date() }).where((0, drizzle_orm_12.eq)(buildings.id, buildingId));
    });
    return building[0];
}
async function buildingExists(buildingId) {
    const result = await db.select({ id: buildings.id }).from(buildings).where((0, drizzle_orm_12.and)((0, drizzle_orm_12.eq)(buildings.id, buildingId), (0, drizzle_orm_12.eq)(buildings.isActive, true))).limit(1);
    return result.length > 0;
}
var init_operations2 = __esm({
    "server/api/buildings/operations.ts"() {
        init_db();
        init_schema();
    }
});
// server/index.ts
const express_2 = __importDefault(require("express"));
const helmet_1 = __importDefault(require("helmet"));
// server/health-check.ts
function createFastHealthCheck() {
    return (req, res) => {
        req.setTimeout(200, () => {
            if (!res.headersSent) {
                res.status(200).send("OK");
            }
        });
        res.set({
            "Cache-Control": "no-cache, no-store, must-revalidate",
            Connection: "close",
            "Content-Type": "text/plain",
            "X-Health-Check": "OK",
            "X-Response-Time": Date.now().toString()
        });
        res.status(200).send("OK");
    };
}
function createStatusCheck() {
    return (req, res) => {
        req.setTimeout(200, () => {
            if (!res.headersSent) {
                res.status(200).json({ status: "ok" });
            }
        });
        res.set({
            "Cache-Control": "no-cache, no-store, must-revalidate",
            Connection: "close",
            "Content-Type": "application/json"
        });
        res.status(200).json({
            status: "ok",
            timestamp: Date.now()
        });
    };
}
// server/index.ts
await init_vite();
// server/routes.ts
const express_3 = __importDefault(require("express"));
// server/auth.ts
init_storage();
init_db();
init_config();
init_schema();
const express_session_1 = __importDefault(require("express-session"));
const connect_pg_simple_1 = __importDefault(require("connect-pg-simple"));
const crypto_4 = require("crypto");
const bcrypt = __importStar(require("bcryptjs"));
const serverless_2 = require("@neondatabase/serverless");
const drizzle_orm_13 = require("drizzle-orm");
// server/services/email-service.ts
const mail_1 = require("@sendgrid/mail");
var EmailService = class {
    /**
     * Initializes the EmailService with SendGrid configuration.
     * Validates that the SENDGRID_API_KEY environment variable is set.
     *
     * @throws {Error} When SENDGRID_API_KEY environment variable is not set.
     *
     * @example
     * ```typescript
     * const emailService = new EmailService();
     * await emailService.sendPasswordResetEmail('user@example.com', 'John', 'https://reset-url');
     * ```
     */
    constructor() {
        this.fromEmail = "info@koveo-gestion.com";
        this.fromName = "Koveo Gestion";
        if (!process.env.SENDGRID_API_KEY) {
            throw new Error("SENDGRID_API_KEY environment variable must be set");
        }
        this.mailService = new mail_1.MailService();
        this.mailService.setApiKey(process.env.SENDGRID_API_KEY);
    }
    /**
     * Sends password reset email in French or English with Quebec Law 25 compliance.
     * Link tracking is disabled for direct URL access as required by security protocols.
     *
     * @param {string} to - Recipient email address.
     * @param {string} userName - User's display name for personalization.
     * @param {string} resetUrl - Complete password reset URL with token.
     * @param {'fr' | 'en'} [language='fr'] - Email language (defaults to French for Quebec).
     * @returns {Promise<boolean>} Promise resolving to true if email sent successfully.
     *
     * @throws {Error} When SendGrid API fails or invalid parameters provided.
     *
     * @example
     * ```typescript
     * const emailService = new EmailService();
     * const success = await emailService.sendPasswordResetEmail(
     *   'user@example.com',
     *   'Jean Dupont',
     *   'https://app.koveo.com/reset-password?token=abc123',
     *   'fr'
     * );
     * ```
     */
    async sendPasswordResetEmail(to, userName, resetUrl, language = "fr") {
        try {
            const templates = {
                fr: {
                    subject: "R\xE9initialisation de votre mot de passe - Koveo Gestion",
                    html: `
            <!DOCTYPE html>
            <html>
            <head>
              <meta charset="UTF-8">
              <title>R\xE9initialisation de mot de passe</title>
            </head>
            <body style="font-family: Arial, sans-serif; max-width: 600px; margin: 0 auto; padding: 20px;">
              <div style="background: #f8f9fa; padding: 30px; border-radius: 8px;">
                <h1 style="color: #2563eb; margin-bottom: 20px;">Koveo Gestion</h1>
                
                <h2 style="color: #374151;">R\xE9initialisation de votre mot de passe</h2>
                
                <p>Bonjour ${userName},</p>
                
                <p>Vous avez demand\xE9 la r\xE9initialisation de votre mot de passe pour votre compte Koveo Gestion.</p>
                
                <p>Copiez et collez ce lien dans votre navigateur pour r\xE9initialiser votre mot de passe :</p>
                
                <div style="background: #f3f4f6; padding: 15px; border-radius: 6px; margin: 20px 0; word-break: break-all;">
                  <code style="font-size: 14px; color: #374151;">${resetUrl}</code>
                </div>
                
                <p style="text-align: center; margin: 20px 0;">
                  <strong style="color: #dc2626;">Important:</strong> Ce lien expire dans 1 heure.
                </p>
                
                <p><strong>Ce lien expire dans 1 heure pour votre s\xE9curit\xE9.</strong></p>
                
                <p>Si vous n'avez pas demand\xE9 cette r\xE9initialisation, ignorez ce courriel.</p>
                
                <hr style="border: none; border-top: 1px solid #e5e7eb; margin: 30px 0;">
                
                <div style="font-size: 12px; color: #6b7280;">
                  <p><strong>Confidentialit\xE9 & S\xE9curit\xE9</strong></p>
                  <p>Conforme \xE0 la Loi 25 du Qu\xE9bec. Vos donn\xE9es personnelles sont prot\xE9g\xE9es selon les normes de s\xE9curit\xE9 les plus strictes.</p>
                  
                  <p>\xA9 2025 Koveo Gestion. Tous droits r\xE9serv\xE9s.</p>
                </div>
              </div>
            </body>
            </html>
          `,
                    text: `R\xE9initialisation de votre mot de passe - Koveo Gestion

Bonjour ${userName},

Vous avez demand\xE9 la r\xE9initialisation de votre mot de passe pour votre compte Koveo Gestion.

Cliquez sur ce lien pour cr\xE9er un nouveau mot de passe :
${resetUrl}

Ce lien expire dans 1 heure pour votre s\xE9curit\xE9.

Si vous n'avez pas demand\xE9 cette r\xE9initialisation, ignorez ce courriel.

Conforme \xE0 la Loi 25 du Qu\xE9bec. Vos donn\xE9es personnelles sont prot\xE9g\xE9es selon les normes de s\xE9curit\xE9 les plus strictes.

\xA9 2025 Koveo Gestion. Tous droits r\xE9serv\xE9s.`
                },
                en: {
                    subject: "Password Reset - Koveo Gestion",
                    html: `
            <!DOCTYPE html>
            <html>
            <head>
              <meta charset="UTF-8">
              <title>Password Reset</title>
            </head>
            <body style="font-family: Arial, sans-serif; max-width: 600px; margin: 0 auto; padding: 20px;">
              <div style="background: #f8f9fa; padding: 30px; border-radius: 8px;">
                <h1 style="color: #2563eb; margin-bottom: 20px;">Koveo Gestion</h1>
                
                <h2 style="color: #374151;">Reset Your Password</h2>
                
                <p>Hello ${userName},</p>
                
                <p>You have requested to reset your password for your Koveo Gestion account.</p>
                
                <p>Copy and paste this link into your browser to reset your password:</p>
                
                <div style="background: #f3f4f6; padding: 15px; border-radius: 6px; margin: 20px 0; word-break: break-all;">
                  <code style="font-size: 14px; color: #374151;">${resetUrl}</code>
                </div>
                
                <p style="text-align: center; margin: 20px 0;">
                  <strong style="color: #dc2626;">Important:</strong> This link expires in 1 hour.
                </p>
                
                <p><strong>This link expires in 1 hour for your security.</strong></p>
                
                <p>If you did not request this reset, please ignore this email.</p>
                
                <hr style="border: none; border-top: 1px solid #e5e7eb; margin: 30px 0;">
                
                <div style="font-size: 12px; color: #6b7280;">
                  <p><strong>Privacy & Security</strong></p>
                  <p>Quebec Law 25 compliant. Your personal data is protected according to the strictest security standards.</p>
                  
                  <p>\xA9 2025 Koveo Gestion. All rights reserved.</p>
                </div>
              </div>
            </body>
            </html>
          `,
                    text: `Password Reset - Koveo Gestion

Hello ${userName},

You have requested to reset your password for your Koveo Gestion account.

Click this link to create a new password:
${resetUrl}

This link expires in 1 hour for your security.

If you did not request this reset, please ignore this email.

Quebec Law 25 compliant. Your personal data is protected according to the strictest security standards.

\xA9 2025 Koveo Gestion. All rights reserved.`
                }
            };
            const template = templates[language];
            await this.mailService.send({
                to,
                from: {
                    email: this.fromEmail,
                    name: this.fromName
                },
                subject: template.subject,
                text: template.text,
                html: template.html,
                mailSettings: {
                    bypassListManagement: {
                        enable: false
                    },
                    footer: {
                        enable: false
                    },
                    sandboxMode: {
                        enable: false
                    }
                },
                trackingSettings: {
                    clickTracking: {
                        enable: false,
                        enableText: false
                    },
                    openTracking: {
                        enable: false
                    },
                    subscriptionTracking: {
                        enable: false
                    },
                    ganalytics: {
                        enable: false
                    }
                }
            });
            return true;
        }
        catch (error) {
            console.error("\u274C Error sending email:", error);
            return false;
        }
    }
    /**
     * Sends an invitation email to a new user with their invitation link.
     *
     * @param {string} to - Recipient's email address.
     * @param {string} recipientName - Name of the person being invited.
     * @param {string} token - Invitation token for the registration URL.
     * @param {string} organizationName - Name of the organization they're being invited to.
     * @param {string} inviterName - Name of the person sending the invitation.
     * @param {Date} expiresAt - When the invitation expires.
     * @param {string} language - Language preference (en/fr).
     * @param {string} personalMessage - Optional personal message from inviter.
     * @returns {Promise<boolean>} Promise resolving to true if email sent successfully.
     */
    async sendInvitationEmail(to, recipientName, token, organizationName, inviterName, expiresAt, language = "fr", personalMessage) {
        try {
            const isDevelopment = process.env.NODE_ENV !== "production";
            let baseUrl;
            if (isDevelopment) {
                const replitUrl = process.env.REPLIT_DOMAINS ? `https://${process.env.REPLIT_DOMAINS}` : null;
                baseUrl = replitUrl || "http://localhost:5000";
            }
            else {
                baseUrl = process.env.FRONTEND_URL || "http://localhost:5000";
            }
            const invitationUrl = `${baseUrl}/register?invitation=${token}`;
            const expiryDate = expiresAt.toLocaleDateString(language === "fr" ? "fr-CA" : "en-CA");
            const isFrench = language === "fr";
            const subject = isFrench ? `Invitation \xE0 rejoindre ${organizationName} - Koveo Gestion` : `Invitation to join ${organizationName} - Koveo Gestion`;
            const htmlContent = `
        <div style="font-family: Arial, sans-serif; max-width: 600px; margin: 0 auto;">
          <h2 style="color: #2563eb;">${isFrench ? "Invitation \xE0 Koveo Gestion" : "Koveo Gestion Invitation"}</h2>
          
          <p>${isFrench ? "Bonjour" : "Hello"} ${recipientName},</p>
          
          <p>${isFrench ? `${inviterName} vous invite \xE0 rejoindre <strong>${organizationName}</strong> sur Koveo Gestion.` : `${inviterName} has invited you to join <strong>${organizationName}</strong> on Koveo Gestion.`}</p>

          ${personalMessage ? `<div style="background: #f3f4f6; padding: 15px; border-radius: 8px; margin: 20px 0;">
            <p style="margin: 0;"><strong>${isFrench ? "Message personnel" : "Personal message"}:</strong></p>
            <p style="margin: 10px 0 0 0; font-style: italic;">"${personalMessage}"</p>
          </div>` : ""}
          
          <p>${isFrench ? "Pour cr\xE9er votre compte et accepter cette invitation, cliquez sur le bouton ci-dessous :" : "To create your account and accept this invitation, click the button below:"}</p>
          
          <div style="text-align: center; margin: 30px 0;">
            <a href="${invitationUrl}" 
               style="background-color: #2563eb; color: white; padding: 12px 24px; text-decoration: none; border-radius: 6px; display: inline-block;">
              ${isFrench ? "Cr\xE9er mon compte" : "Create My Account"}
            </a>
          </div>
          
          <p style="color: #6b7280; font-size: 14px;">
            ${isFrench ? `Cette invitation expire le ${expiryDate}. Si vous ne pouvez pas cliquer sur le bouton, copiez et collez ce lien dans votre navigateur :` : `This invitation expires on ${expiryDate}. If you can't click the button, copy and paste this link into your browser:`}
          </p>
          
          <p style="word-break: break-all; background: #f9f9f9; padding: 10px; border-radius: 4px; font-size: 12px;">
            ${invitationUrl}
          </p>
          
          <hr style="margin: 30px 0; border: none; border-top: 1px solid #e5e7eb;">
          
          <p style="color: #9ca3af; font-size: 12px;">
            ${isFrench ? "Cet email a \xE9t\xE9 envoy\xE9 par Koveo Gestion. Si vous n'avez pas demand\xE9 cette invitation, vous pouvez ignorer cet email." : "This email was sent by Koveo Gestion. If you did not request this invitation, you can safely ignore this email."}
          </p>
        </div>
      `;
            const textContent = `
        ${isFrench ? "Bonjour" : "Hello"} ${recipientName},

        ${isFrench ? `${inviterName} vous invite \xE0 rejoindre ${organizationName} sur Koveo Gestion.` : `${inviterName} has invited you to join ${organizationName} on Koveo Gestion.`}

        ${personalMessage ? `${isFrench ? "Message personnel" : "Personal message"}: "${personalMessage}"` : ""}

        ${isFrench ? "Pour cr\xE9er votre compte et accepter cette invitation, visitez :" : "To create your account and accept this invitation, visit:"}
        ${invitationUrl}

        ${isFrench ? `Cette invitation expire le ${expiryDate}.` : `This invitation expires on ${expiryDate}.`}

        ${isFrench ? "Si vous n'avez pas demand\xE9 cette invitation, vous pouvez ignorer cet email." : "If you did not request this invitation, you can safely ignore this email."}
      `;
            await this.mailService.send({
                to,
                from: {
                    email: this.fromEmail,
                    name: this.fromName
                },
                subject,
                text: textContent.trim(),
                html: htmlContent,
                trackingSettings: {
                    clickTracking: {
                        enable: false
                    },
                    openTracking: {
                        enable: false
                    },
                    subscriptionTracking: {
                        enable: false
                    },
                    ganalytics: {
                        enable: false
                    }
                }
            });
            return true;
        }
        catch (error) {
            console.error("\u274C Error details:", JSON.stringify(error, null, 2));
            return false;
        }
    }
    /**
     * Sends a reminder email for pending invitations.
     *
     * @param {string} to - Recipient's email address.
     * @param {string} recipientName - Name of the person being reminded.
     * @param {string} token - Invitation token for the registration URL.
     * @param {string} organizationName - Name of the organization they're being invited to.
     * @param {Date} expiresAt - When the invitation expires.
     * @param {string} language - Language preference (en/fr).
     * @returns {Promise<boolean>} Promise resolving to true if email sent successfully.
     */
    async sendReminderEmail(to, recipientName, token, organizationName, expiresAt, language = "fr") {
        try {
            const isDevelopment = process.env.NODE_ENV !== "production";
            let baseUrl;
            if (isDevelopment) {
                const replitUrl = process.env.REPLIT_DOMAINS ? `https://${process.env.REPLIT_DOMAINS}` : null;
                baseUrl = replitUrl || "http://localhost:5000";
            }
            else {
                baseUrl = process.env.FRONTEND_URL || "http://localhost:5000";
            }
            const invitationUrl = `${baseUrl}/register?invitation=${token}`;
            const expiryDate = expiresAt.toLocaleDateString(language === "fr" ? "fr-CA" : "en-CA");
            const isFrench = language === "fr";
            const subject = isFrench ? `Rappel: Invitation \xE0 rejoindre ${organizationName} - Koveo Gestion` : `Reminder: Invitation to join ${organizationName} - Koveo Gestion`;
            const htmlContent = `
        <div style="font-family: Arial, sans-serif; max-width: 600px; margin: 0 auto;">
          <h2 style="color: #2563eb;">${isFrench ? "Rappel d'invitation - Koveo Gestion" : "Invitation Reminder - Koveo Gestion"}</h2>
          
          <p>${isFrench ? "Bonjour" : "Hello"} ${recipientName},</p>
          
          <p>${isFrench ? `Ceci est un rappel concernant votre invitation \xE0 rejoindre <strong>${organizationName}</strong> sur Koveo Gestion.` : `This is a reminder about your invitation to join <strong>${organizationName}</strong> on Koveo Gestion.`}</p>
          
          <p>${isFrench ? "Votre invitation expire bient\xF4t. Pour cr\xE9er votre compte, cliquez sur le bouton ci-dessous :" : "Your invitation expires soon. To create your account, click the button below:"}</p>
          
          <div style="text-align: center; margin: 30px 0;">
            <a href="${invitationUrl}" 
               style="background-color: #2563eb; color: white; padding: 12px 24px; text-decoration: none; border-radius: 6px; display: inline-block;">
              ${isFrench ? "Cr\xE9er mon compte" : "Create My Account"}
            </a>
          </div>
          
          <p style="color: #dc2626; font-weight: bold;">
            ${isFrench ? `\u26A0\uFE0F Cette invitation expire le ${expiryDate}.` : `\u26A0\uFE0F This invitation expires on ${expiryDate}.`}
          </p>
          
          <p style="word-break: break-all; background: #f9f9f9; padding: 10px; border-radius: 4px; font-size: 12px;">
            ${invitationUrl}
          </p>
          
          <hr style="margin: 30px 0; border: none; border-top: 1px solid #e5e7eb;">
          
          <p style="color: #9ca3af; font-size: 12px;">
            ${isFrench ? "Cet email a \xE9t\xE9 envoy\xE9 par Koveo Gestion." : "This email was sent by Koveo Gestion."}
          </p>
        </div>
      `;
            const textContent = `
        ${isFrench ? "Bonjour" : "Hello"} ${recipientName},

        ${isFrench ? `Ceci est un rappel concernant votre invitation \xE0 rejoindre ${organizationName} sur Koveo Gestion.` : `This is a reminder about your invitation to join ${organizationName} on Koveo Gestion.`}

        ${isFrench ? "Pour cr\xE9er votre compte et accepter cette invitation, visitez :" : "To create your account and accept this invitation, visit:"}
        ${invitationUrl}

        ${isFrench ? `Cette invitation expire le ${expiryDate}.` : `This invitation expires on ${expiryDate}.`}
      `;
            await this.mailService.send({
                to,
                from: {
                    email: this.fromEmail,
                    name: this.fromName
                },
                subject,
                text: textContent.trim(),
                html: htmlContent,
                trackingSettings: {
                    clickTracking: {
                        enable: false
                    },
                    openTracking: {
                        enable: false
                    },
                    subscriptionTracking: {
                        enable: false
                    },
                    ganalytics: {
                        enable: false
                    }
                }
            });
            return true;
        }
        catch (error) {
            console.error("\u274C Error sending reminder email:", error);
            return false;
        }
    }
    /**
     * Verifies an unsubscribe token for security.
     *
     * @param {string} email - Email address to verify token for.
     * @param {string} token - Unsubscribe token to verify.
     * @returns {boolean} True if token is valid.
     */
    verifyUnsubscribeToken(email, token) {
        try {
            const expectedToken = Buffer.from(email).toString("base64");
            return token === expectedToken;
        }
        catch (error) {
            console.error("\u274C Error verifying unsubscribe token:", error);
            return false;
        }
    }
    /**
     * Sends a test email to verify SendGrid configuration and connectivity.
     * Used for troubleshooting email delivery issues and validating API setup.
     *
     * @param {string} to - Recipient email address for the test email.
     * @returns {Promise<boolean>} Promise resolving to true if test email sent successfully.
     *
     * @example
     * ```typescript
     * const emailService = new EmailService();
     * const success = await emailService.sendTestEmail('admin@example.com');
     * if (success) {
     * }
     * ```
     */
    async sendTestEmail(to) {
        try {
            await this.mailService.send({
                to,
                from: {
                    email: this.fromEmail,
                    name: this.fromName
                },
                subject: "Test Email - Koveo Gestion",
                text: "This is a test email to verify SendGrid configuration.",
                html: "<p>This is a test email to verify SendGrid configuration.</p>"
            });
            return true;
        }
        catch (error) {
            console.error("\u274C Error sending email:", error);
            return false;
        }
    }
};
var emailService = new EmailService();
// server/auth.ts
init_query_cache();
async function checkUserPermission(userRole, permissionName) {
    try {
        const permissionExists = await db.select().from(permissions).where((0, drizzle_orm_13.eq)(permissions.name, permissionName)).limit(1);
        const rolePermissions2 = await db.select().from(rolePermissions).where((0, drizzle_orm_13.eq)(rolePermissions.role, userRole));
        const result = await db.select().from(rolePermissions).leftJoin(permissions, (0, drizzle_orm_13.eq)(rolePermissions.permissionId, permissions.id)).where((0, drizzle_orm_13.and)((0, drizzle_orm_13.eq)(rolePermissions.role, userRole), (0, drizzle_orm_13.eq)(permissions.name, permissionName))).limit(1);
        if (result.length === 0) {
            if (userRole === "admin") {
                const adminPerms = await db.select({ name: permissions.name }).from(rolePermissions).leftJoin(permissions, (0, drizzle_orm_13.eq)(rolePermissions.permissionId, permissions.id)).where((0, drizzle_orm_13.eq)(rolePermissions.role, "admin"));
            }
        }
        return result.length > 0;
    }
    catch (error) {
        console.error("\u274C Permission check failed:", error);
        return false;
    }
}
var emailService2 = new EmailService();
var PostgreSqlStore = (0, connect_pg_simple_1.default)(express_session_1.default);
function getDatabaseUrl(requestDomain) {
    const selectedUrl = config.database.getRuntimeDatabaseUrl(requestDomain);
    const isKoveoRequest = requestDomain?.includes("koveo-gestion.com");
    const isProduction = config.server.isProduction || isKoveoRequest;
    console.log(`\u{1F517} Session store using ${isProduction ? "PRODUCTION" : "DEVELOPMENT"} database: ${selectedUrl?.substring(0, 50)}... (domain: ${requestDomain || "unknown"})`);
    if (!selectedUrl) {
        throw new Error("No database URL available for session store");
    }
    return selectedUrl;
}
function createSessionStore(requestDomain) {
    try {
        const sessionPool = new serverless_2.Pool({
            connectionString: getDatabaseUrl(requestDomain),
            max: 2,
            // Small pool for sessions
            min: 1,
            maxUses: 7500,
            // Maximum number of times a connection can be reused
            idleTimeoutMillis: 3e4,
            // 30 seconds idle timeout
            allowExitOnIdle: true
            // Allow pool to close when idle
        });
        const store = new PostgreSqlStore({
            pool: sessionPool,
            tableName: "session",
            createTableIfMissing: true,
            // Auto-create table in production if missing
            errorLog: process.env.NODE_ENV === "test" ? () => {
            } : console.error,
            // Suppress error logging in tests
            // Add explicit configuration for session retrieval
            pruneSessionInterval: process.env.NODE_ENV === "test" ? false : 60 * 1e3,
            // Disable pruning in tests
            schemaName: "public"
            // Explicitly set schema
        });
        console.log("\u2705 Session store: PostgreSQL session store created with proper pool");
        if (process.env.NODE_ENV !== "test") {
            store.get("test-session-id", (err, session2) => {
                if (err) {
                    console.error("\u274C Session store connection test failed:", err);
                }
                else {
                    console.log("\u2705 Session store connection test passed");
                }
            });
        }
        return store;
    }
    catch (error) {
        console.error("\u274C Session store creation failed:", error);
        console.log("\u26A0\uFE0F Falling back to memory store (sessions will not persist)");
        return void 0;
    }
}
var sessionStore;
try {
    sessionStore = createSessionStore();
}
catch (error) {
    console.error("\u274C Failed to create initial session store:", error);
    sessionStore = void 0;
}
var sessionConfig = (0, express_session_1.default)({
    store: sessionStore,
    // Use PostgreSQL session store for persistence
    secret: process.env.SESSION_SECRET || "fallback-secret-change-in-production",
    resave: false,
    // Don't save unchanged sessions
    saveUninitialized: false,
    rolling: true,
    // Reset expiry on each request
    cookie: {
        secure: false,
        // Keep false for development to ensure cookies work
        httpOnly: true,
        maxAge: 7 * 24 * 60 * 60 * 1e3,
        // 7 days - longer session duration
        sameSite: "lax",
        path: "/"
        // Explicitly set path
    },
    name: "koveo.sid",
    proxy: false
});
async function hashPassword(password) {
    const saltRounds = 12;
    return await bcrypt.hash(password, saltRounds);
}
async function verifyPassword(password, hashedPassword) {
    return await bcrypt.compare(password, hashedPassword);
}
async function requireAuth(req, res, next) {
    if (!req.session?.userId) {
        return res.status(401).json({
            message: "Authentication required",
            code: "AUTH_REQUIRED"
        });
    }
    try {
        if (req.session && req.session.touch && req.session.cookie) {
            const now = Date.now();
            const sessionAge = now - (req.session.cookie.originalMaxAge || 0) + (req.session.cookie.maxAge || 0);
            const sessionLifetime = req.session.cookie.originalMaxAge || 7 * 24 * 60 * 60 * 1e3;
            if (sessionAge > sessionLifetime * 0.25) {
                req.session.touch();
            }
        }
        queryCache.invalidate("users", `user:${req.session.userId}`);
        queryCache.invalidate("users", `user_email:*`);
        const user = await storage.getUser(req.session.userId);
        if (!user || !user.isActive) {
            req.session.destroy((err) => {
                if (err) {
                }
            });
            return res.status(401).json({
                message: "User account not found or inactive",
                code: "USER_INACTIVE"
            });
        }
        req.session.role = user.role;
        let userOrganizations5 = [];
        try {
            userOrganizations5 = await db.select({
                organizationId: userOrganizations.organizationId,
                canAccessAllOrganizations: userOrganizations.canAccessAllOrganizations
            }).from(userOrganizations).where((0, drizzle_orm_13.and)((0, drizzle_orm_13.eq)(userOrganizations.userId, user.id), (0, drizzle_orm_13.eq)(userOrganizations.isActive, true)));
        }
        catch (orgError) {
            userOrganizations5 = [];
        }
        req.user = {
            ...user,
            organizations: userOrganizations5.map((uo) => uo.organizationId),
            canAccessAllOrganizations: userOrganizations5.some((uo) => uo.canAccessAllOrganizations)
        };
        if (user.role?.startsWith("demo_") && (!req.user.organizations || req.user.organizations.length === 0)) {
            try {
                const demoOrgs = await db.select({ id: organizations.id }).from(organizations).where((0, drizzle_orm_13.eq)(organizations.type, "demo")).limit(1);
                if (demoOrgs.length > 0) {
                    req.user.organizations = [demoOrgs[0].id];
                    req.user.canAccessAllOrganizations = false;
                }
            }
            catch (demoOrgError) {
            }
        }
        next();
    }
    catch (error) {
        console.error("\u274C Authentication error:", error);
        return res.status(500).json({
            message: "Authentication error",
            code: "AUTH_ERROR"
        });
    }
}
function requireRole(allowedRoles) {
    return async (req, res, next) => {
        if (!req.user) {
            return res.status(401).json({
                message: "Authentication required",
                code: "AUTH_REQUIRED"
            });
        }
        if (!allowedRoles.includes(req.user.role)) {
            return res.status(403).json({
                message: "Insufficient permissions",
                code: "INSUFFICIENT_PERMISSIONS",
                required: allowedRoles,
                current: req.user.role
            });
        }
        next();
    };
}
function authorize(permission) {
    return async (req, res, next) => {
        if (!req.user) {
            return res.status(401).json({
                message: "Authentication required",
                code: "AUTH_REQUIRED"
            });
        }
        try {
            const hasPermission = await checkUserPermission(req.user.role, permission);
            if (!hasPermission) {
                return res.status(403).json({
                    message: "Insufficient permissions",
                    code: "PERMISSION_DENIED",
                    required: permission,
                    userRole: req.user.role,
                    details: `User with role '${req.user.role}' does not have permission '${permission}'`
                });
            }
            next();
        }
        catch (error) {
            console.error("\u274C Authorization error:", error);
            return res.status(500).json({
                message: "Authorization check failed",
                code: "AUTHORIZATION_ERROR"
            });
        }
    };
}
function setupAuthRoutes(app2) {
    app2.post("/api/auth/login", async (req, res) => {
        try {
            const { email, password } = req.body;
            if (!email || !password) {
                return res.status(400).json({
                    message: "Email and password are required",
                    code: "MISSING_CREDENTIALS"
                });
            }
            const user = await storage.getUserByEmail(email.toLowerCase());
            if (!user) {
                return res.status(401).json({
                    message: "Invalid credentials",
                    code: "INVALID_CREDENTIALS"
                });
            }
            if (!user.isActive) {
                return res.status(401).json({
                    message: "Account is inactive",
                    code: "ACCOUNT_INACTIVE"
                });
            }
            const isValidPassword = await verifyPassword(password, user.password);
            if (!isValidPassword) {
                return res.status(401).json({
                    message: "Invalid credentials",
                    code: "INVALID_CREDENTIALS"
                });
            }
            await storage.updateUser(user.id, { lastLoginAt: /* @__PURE__ */ new Date() });
            req.session.userId = user.id;
            req.session.userRole = user.role;
            req.session.role = user.role;
            req.session.user = user;
            req.session.save((err) => {
                if (err) {
                    console.error("\u274C Session save error:", err);
                    return res.status(500).json({
                        message: "Session save failed",
                        code: "SESSION_SAVE_ERROR"
                    });
                }
                const { password: _, ...userData } = user;
                res.json({
                    user: userData,
                    message: "Login successful"
                });
            });
        }
        catch (_error) {
            console.error("Login error:", {
                error: _error,
                email: req.body?.email,
                hasPassword: !!req.body?.password,
                databaseUrl: !!process.env.DATABASE_URL,
                sessionSecret: !!process.env.SESSION_SECRET
            });
            res.status(500).json({
                message: "Login failed",
                code: "LOGIN_ERROR",
                ...process.env.NODE_ENV === "development" && { details: _error }
            });
        }
    });
    app2.post("/api/auth/logout", (req, res) => {
        req.session.destroy((err) => {
            if (err) {
                console.error("Logout _error:", err);
                return res.status(500).json({
                    message: "Logout failed",
                    code: "LOGOUT_ERROR"
                });
            }
            const cookieOptions = {
                httpOnly: true,
                secure: process.env.NODE_ENV === "production",
                sameSite: "lax"
            };
            res.clearCookie("koveo.sid", cookieOptions);
            res.json({ message: "Logout successful" });
        });
    });
    app2.get("/api/auth/user", async (req, res) => {
        try {
            if (!req.session?.userId) {
                return res.status(401).json({
                    message: "Not authenticated",
                    code: "NOT_AUTHENTICATED"
                });
            }
            try {
                const user = await storage.getUser(req.session.userId);
                if (!user || !user.isActive) {
                    req.session.destroy((err) => {
                        if (err) {
                            console.error("Session destruction error:", err);
                        }
                    });
                    return res.status(401).json({
                        message: "User account not found or inactive",
                        code: "USER_INACTIVE"
                    });
                }
                if (req.session && req.session.touch && req.session.cookie) {
                    const now = Date.now();
                    const sessionAge = now - (req.session.cookie.originalMaxAge || 0) + (req.session.cookie.maxAge || 0);
                    const sessionLifetime = req.session.cookie.originalMaxAge || 7 * 24 * 60 * 60 * 1e3;
                    if (sessionAge > sessionLifetime * 0.25) {
                        req.session.touch();
                    }
                }
                const { password: _, ...userData } = user;
                res.json(userData);
            }
            catch (userError) {
                console.error("Database error getting user:", userError);
                return res.status(500).json({
                    message: "Authentication check failed",
                    code: "AUTH_CHECK_ERROR"
                });
            }
        }
        catch (error) {
            console.error("\u274C Auth check error:", error);
            res.status(500).json({
                message: "Authentication check failed",
                code: "AUTH_CHECK_ERROR"
            });
        }
    });
    app2.get("/api/auth/debug", async (req, res) => {
        const debugInfo = {
            hasSession: !!req.session,
            sessionId: req.sessionID,
            userId: req.session?.userId,
            userRole: req.session?.userRole,
            nodeEnv: process.env.NODE_ENV,
            hasDatabaseUrl: !!process.env.DATABASE_URL,
            hasSessionSecret: !!process.env.SESSION_SECRET,
            cookies: req.headers.cookie ? "present" : "missing",
            cookieHeader: req.headers.cookie,
            sessionStore: req.session?.store?.constructor?.name || "unknown",
            userAgent: req.headers["user-agent"],
            host: req.headers.host,
            protocol: req.protocol,
            secure: req.secure,
            trustProxy: !!req.app.get("trust proxy")
        };
        console.log("Auth debug info:", debugInfo);
        res.json(debugInfo);
    });
    app2.post("/api/auth/test-cookie", (req, res) => {
        req.session.testValue = "test-" + Date.now();
        req.session.save((err) => {
            if (err) {
                return res.status(500).json({ error: "Failed to save session", details: err.message });
            }
            res.json({
                message: "Test cookie set",
                sessionId: req.sessionID,
                testValue: req.session.testValue,
                cookieSettings: {
                    secure: process.env.NODE_ENV === "production",
                    httpOnly: true,
                    sameSite: "lax"
                }
            });
        });
    });
    app2.post("/api/auth/register", requireAuth, requireRole(["admin"]), async (req, res) => {
        try {
            const { email, password, firstName, lastName, role = "tenant", language = "fr" } = req.body;
            if (!email || !password || !firstName || !lastName) {
                return res.status(400).json({
                    message: "All fields are required",
                    code: "MISSING_FIELDS"
                });
            }
            const existingUser = await storage.getUserByEmail(email.toLowerCase());
            if (existingUser) {
                return res.status(409).json({
                    message: "User already exists",
                    code: "USER_EXISTS"
                });
            }
            const hashedPassword = await hashPassword(password);
            const newUser = await storage.createUser({
                email: email.toLowerCase(),
                password: hashedPassword,
                firstName,
                lastName,
                username: email.toLowerCase(),
                // Use email as username
                role,
                language
            });
            const { password: _, ...userData } = newUser;
            res.status(201).json({
                user: userData,
                message: "User created successfully"
            });
        }
        catch (error) {
            console.error("\u274C Registration error:", error);
            res.status(500).json({
                message: "Registration failed",
                code: "REGISTRATION_ERROR"
            });
        }
    });
    app2.post("/api/auth/forgot-password", async (req, res) => {
        try {
            const { email } = req.body;
            if (!email) {
                return res.status(400).json({
                    message: "Email is required",
                    code: "MISSING_EMAIL"
                });
            }
            const user = await storage.getUserByEmail(email.toLowerCase());
            if (!user || !user.isActive) {
                return res.json({
                    message: "If this email exists, a password reset link has been sent.",
                    success: true
                });
            }
            const resetToken = (0, crypto_4.randomBytes)(32).toString("hex");
            const tokenHash = (0, crypto_4.createHash)("sha256").update(resetToken).digest("hex");
            const expiresAt = /* @__PURE__ */ new Date();
            expiresAt.setHours(expiresAt.getHours() + 1);
            await storage.createPasswordResetToken({
                userId: user.id,
                token: resetToken,
                tokenHash,
                expiresAt,
                ipAddress: req.ip || req.connection?.remoteAddress || "unknown",
                userAgent: req.headers["user-agent"] || "unknown"
            });
            const host2 = req.get("host") || "";
            let frontendUrl;
            if (host2.includes("replit.dev") || host2.includes("replit.com") || host2.includes("replit.co") || process.env.NODE_ENV === "development") {
                frontendUrl = `${req.protocol}://${host2}`;
            }
            else {
                if (host2.includes("koveo-gestion.com")) {
                    frontendUrl = `https://${host2}`;
                }
                else {
                    frontendUrl = process.env.FRONTEND_URL || "https://koveo-gestion.com";
                }
            }
            const cleanUrl = frontendUrl.endsWith("/") ? frontendUrl.slice(0, -1) : frontendUrl;
            const resetUrl = `${cleanUrl}/reset-password?token=${resetToken}`;
            const emailSent = await emailService2.sendPasswordResetEmail(email.toLowerCase(), `${user.firstName} ${user.lastName}`, resetUrl);
            if (!emailSent) {
                console.error("Failed to send password reset email to:", email);
                return res.status(500).json({
                    message: "Failed to send password reset email",
                    code: "EMAIL_SEND_FAILED"
                });
            }
            res.json({
                message: "If this email exists, a password reset link has been sent.",
                success: true
            });
        }
        catch (error) {
            console.error("\u274C Password reset request error:", error);
            res.status(500).json({
                message: "Password reset request failed",
                code: "PASSWORD_RESET_REQUEST_ERROR"
            });
        }
    });
    app2.post("/api/auth/reset-password", async (req, res) => {
        try {
            const { token, password } = req.body;
            if (!token || !password) {
                return res.status(400).json({
                    message: "Token and password are required",
                    code: "MISSING_FIELDS"
                });
            }
            if (password.length < 8) {
                return res.status(400).json({
                    message: "Password must be at least 8 characters long",
                    code: "PASSWORD_TOO_SHORT"
                });
            }
            const hasUpperCase = /[A-Z]/.test(password);
            const hasLowerCase = /[a-z]/.test(password);
            const hasNumbers = /\d/.test(password);
            if (!hasUpperCase || !hasLowerCase || !hasNumbers) {
                return res.status(400).json({
                    message: "Password must contain at least one uppercase letter, one lowercase letter, and one number",
                    code: "PASSWORD_TOO_WEAK"
                });
            }
            const resetToken = await storage.getPasswordResetToken(token);
            if (!resetToken) {
                return res.status(400).json({
                    message: "Invalid or expired password reset token",
                    code: "INVALID_TOKEN"
                });
            }
            if ( /* @__PURE__ */new Date() > resetToken.expiresAt) {
                return res.status(400).json({
                    message: "Password reset token has expired",
                    code: "TOKEN_EXPIRED"
                });
            }
            if (resetToken.isUsed) {
                return res.status(400).json({
                    message: "Password reset token has already been used",
                    code: "TOKEN_ALREADY_USED"
                });
            }
            const tokenHash = (0, crypto_4.createHash)("sha256").update(token).digest("hex");
            if (tokenHash !== resetToken.tokenHash) {
                return res.status(400).json({
                    message: "Invalid password reset token",
                    code: "INVALID_TOKEN_HASH"
                });
            }
            const user = await storage.getUser(resetToken.userId);
            if (!user || !user.isActive) {
                return res.status(400).json({
                    message: "User account not found or inactive",
                    code: "USER_NOT_FOUND"
                });
            }
            const hashedPassword = await hashPassword(password);
            await storage.updateUser(user.id, {
                password: hashedPassword,
                updatedAt: /* @__PURE__ */ new Date()
            });
            await storage.markPasswordResetTokenAsUsed(resetToken.id);
            await storage.cleanupExpiredPasswordResetTokens();
            res.json({
                message: "Password has been reset successfully",
                success: true
            });
        }
        catch (error) {
            console.error("\u274C Password reset error:", error);
            res.status(500).json({
                message: "Password reset failed",
                code: "PASSWORD_RESET_ERROR"
            });
        }
    });
}
// server/api/organizations.ts
init_db();
init_schema();
const drizzle_orm_14 = require("drizzle-orm");
function registerOrganizationRoutes(app2) {
    app2.get("/api/organizations", requireAuth, async (req, res) => {
        try {
            const currentUser = req.user || req.session?.user;
            if (!currentUser) {
                return res.status(401).json({
                    message: "Authentication required",
                    code: "AUTH_REQUIRED"
                });
            }
            console.log(`\u{1F4CA} Fetching organizations for user ${currentUser.id} with role ${currentUser.role}`);
            let organizationsQuery;
            if (currentUser.role === "admin") {
                organizationsQuery = db.select({
                    id: organizations.id,
                    name: organizations.name,
                    type: organizations.type,
                    address: organizations.address,
                    city: organizations.city,
                    province: organizations.province,
                    postalCode: organizations.postalCode,
                    phone: organizations.phone,
                    email: organizations.email,
                    website: organizations.website,
                    registrationNumber: organizations.registrationNumber,
                    isActive: organizations.isActive,
                    createdAt: organizations.createdAt
                }).from(organizations).where((0, drizzle_orm_14.eq)(organizations.isActive, true)).orderBy(organizations.name);
            }
            else {
                organizationsQuery = db.select({
                    id: organizations.id,
                    name: organizations.name,
                    type: organizations.type,
                    address: organizations.address,
                    city: organizations.city,
                    province: organizations.province,
                    postalCode: organizations.postalCode,
                    phone: organizations.phone,
                    email: organizations.email,
                    website: organizations.website,
                    registrationNumber: organizations.registrationNumber,
                    isActive: organizations.isActive,
                    createdAt: organizations.createdAt
                }).from(organizations).innerJoin(userOrganizations, (0, drizzle_orm_14.eq)(organizations.id, userOrganizations.organizationId)).where((0, drizzle_orm_14.and)((0, drizzle_orm_14.eq)(organizations.isActive, true), (0, drizzle_orm_14.eq)(userOrganizations.userId, currentUser.id), (0, drizzle_orm_14.eq)(userOrganizations.isActive, true))).orderBy(organizations.name);
            }
            const accessibleOrganizations = await organizationsQuery;
            console.log(`\u2705 Found ${accessibleOrganizations.length} organizations for user ${currentUser.id}`);
            res.json(accessibleOrganizations);
        }
        catch (error) {
            console.error("\u274C Error fetching organizations:", error);
            res.status(500).json({
                _error: "Internal server error",
                message: "Failed to fetch organizations"
            });
        }
    });
    app2.get("/api/admin/organizations", requireAuth, async (req, res) => {
        try {
            const currentUser = req.user || req.session?.user;
            if (!currentUser) {
                return res.status(401).json({
                    message: "Authentication required",
                    code: "AUTH_REQUIRED"
                });
            }
            if (currentUser.role !== "admin") {
                return res.status(403).json({
                    message: "Admin access required",
                    code: "ADMIN_REQUIRED"
                });
            }
            const allOrganizations = await db.select({
                id: organizations.id,
                name: organizations.name,
                type: organizations.type,
                address: organizations.address,
                city: organizations.city,
                province: organizations.province,
                postalCode: organizations.postalCode,
                phone: organizations.phone,
                email: organizations.email,
                website: organizations.website,
                registrationNumber: organizations.registrationNumber,
                isActive: organizations.isActive,
                createdAt: organizations.createdAt
            }).from(organizations).where((0, drizzle_orm_14.eq)(organizations.isActive, true)).orderBy(organizations.name);
            res.json({
                organizations: allOrganizations
            });
        }
        catch (error) {
            console.error("\u274C Error fetching organizations:", error);
            res.status(500).json({
                _error: "Internal server error",
                message: "Failed to fetch organizations"
            });
        }
    });
    app2.post("/api/organizations", requireAuth, async (req, res) => {
        try {
            const currentUser = req.user || req.session?.user;
            if (!currentUser) {
                return res.status(401).json({
                    message: "Authentication required",
                    code: "AUTH_REQUIRED"
                });
            }
            if (currentUser.role !== "admin") {
                return res.status(403).json({
                    message: "Admin access required to create organizations",
                    code: "ADMIN_REQUIRED"
                });
            }
            const organizationData = req.body;
            const [newOrganization] = await db.insert(organizations).values({
                name: organizationData.name,
                type: organizationData.type,
                address: organizationData.address,
                city: organizationData.city,
                province: organizationData.province || "QC",
                postalCode: organizationData.postalCode,
                phone: organizationData.phone || null,
                email: organizationData.email || null,
                website: organizationData.website || null,
                registrationNumber: organizationData.registrationNumber || null
            }).returning({
                id: organizations.id,
                name: organizations.name,
                type: organizations.type,
                address: organizations.address,
                city: organizations.city,
                province: organizations.province,
                postalCode: organizations.postalCode,
                phone: organizations.phone,
                email: organizations.email,
                website: organizations.website,
                registrationNumber: organizations.registrationNumber,
                isActive: organizations.isActive,
                createdAt: organizations.createdAt
            });
            console.log("Organization created - storage hierarchy will be created on first document upload");
            res.status(201).json(newOrganization);
        }
        catch (error) {
            console.error("\u274C Error creating organization:", error);
            res.status(500).json({
                _error: "Internal server error",
                message: "Failed to create organization"
            });
        }
    });
    app2.get("/api/organizations/:id", requireAuth, async (req, res) => {
        try {
            const currentUser = req.user || req.session?.user;
            if (!currentUser) {
                return res.status(401).json({
                    message: "Authentication required",
                    code: "AUTH_REQUIRED"
                });
            }
            const organizationId = req.params.id;
            const [organization] = await db.select().from(organizations).where((0, drizzle_orm_14.eq)(organizations.id, organizationId));
            if (!organization) {
                return res.status(404).json({
                    message: "Organization not found",
                    code: "NOT_FOUND"
                });
            }
            res.json(organization);
        }
        catch (error) {
            console.error("\u274C Error fetching organization:", error);
            res.status(500).json({
                message: "Failed to fetch organization",
                code: "SERVER_ERROR"
            });
        }
    });
    app2.put("/api/organizations/:id", requireAuth, async (req, res) => {
        try {
            const currentUser = req.user || req.session?.user;
            if (!currentUser) {
                return res.status(401).json({
                    message: "Authentication required",
                    code: "AUTH_REQUIRED"
                });
            }
            if (currentUser.role !== "admin") {
                return res.status(403).json({
                    message: "Admin access required to update organizations",
                    code: "ADMIN_REQUIRED"
                });
            }
            const organizationId = req.params.id;
            const updateData = req.body;
            const existingOrg = await db.select().from(organizations).where((0, drizzle_orm_14.and)((0, drizzle_orm_14.eq)(organizations.id, organizationId), (0, drizzle_orm_14.eq)(organizations.isActive, true))).limit(1);
            if (existingOrg.length === 0) {
                return res.status(404).json({
                    message: "Organization not found",
                    code: "NOT_FOUND"
                });
            }
            const [updatedOrganization] = await db.update(organizations).set({
                name: updateData.name,
                type: updateData.type,
                address: updateData.address,
                city: updateData.city,
                province: updateData.province || "QC",
                postalCode: updateData.postalCode,
                phone: updateData.phone || null,
                email: updateData.email || null,
                website: updateData.website || null,
                registrationNumber: updateData.registrationNumber || null,
                updatedAt: /* @__PURE__ */ new Date()
            }).where((0, drizzle_orm_14.eq)(organizations.id, organizationId)).returning({
                id: organizations.id,
                name: organizations.name,
                type: organizations.type,
                address: organizations.address,
                city: organizations.city,
                province: organizations.province,
                postalCode: organizations.postalCode,
                phone: organizations.phone,
                email: organizations.email,
                website: organizations.website,
                registrationNumber: organizations.registrationNumber,
                isActive: organizations.isActive,
                createdAt: organizations.createdAt,
                updatedAt: organizations.updatedAt
            });
            res.json(updatedOrganization);
        }
        catch (error) {
            console.error("\u274C Error updating organization:", error);
            res.status(500).json({
                error: "Internal server error",
                message: "Failed to update organization"
            });
        }
    });
    app2.get("/api/organizations/:id/deletion-impact", requireAuth, async (req, res) => {
        const organizationId = req.params.id;
        try {
            const currentUser = req.user || req.session?.user;
            if (!currentUser) {
                return res.status(401).json({
                    message: "Authentication required",
                    code: "AUTH_REQUIRED"
                });
            }
            if (currentUser.role !== "admin") {
                return res.status(403).json({
                    message: "Admin access required",
                    code: "ADMIN_REQUIRED"
                });
            }
            const organization = await db.select({ id: organizations.id, name: organizations.name }).from(organizations).where((0, drizzle_orm_14.and)((0, drizzle_orm_14.eq)(organizations.id, organizationId), (0, drizzle_orm_14.eq)(organizations.isActive, true))).limit(1);
            if (organization.length === 0) {
                return res.status(404).json({
                    _error: "Not found",
                    message: "Organization not found"
                });
            }
            const buildingsCount = await db.select({ count: (0, drizzle_orm_14.count)() }).from(buildings).where((0, drizzle_orm_14.and)((0, drizzle_orm_14.eq)(buildings.organizationId, organizationId), (0, drizzle_orm_14.eq)(buildings.isActive, true)));
            const residencesCount = await db.select({ count: (0, drizzle_orm_14.count)() }).from(residences).innerJoin(buildings, (0, drizzle_orm_14.eq)(residences.buildingId, buildings.id)).where((0, drizzle_orm_14.and)((0, drizzle_orm_14.eq)(buildings.organizationId, organizationId), (0, drizzle_orm_14.eq)(buildings.isActive, true), (0, drizzle_orm_14.eq)(residences.isActive, true)));
            let totalInvitations = 0;
            try {
                const invitationsCount = await db.select({ count: (0, drizzle_orm_14.count)() }).from(invitations).where((0, drizzle_orm_14.eq)(invitations.organizationId, organizationId));
                totalInvitations = invitationsCount[0]?.count || 0;
            }
            catch (___invError) {
                totalInvitations = 0;
            }
            const potentialOrphansCount = await db.select({ count: (0, drizzle_orm_14.count)() }).from(userOrganizations).innerJoin(users, (0, drizzle_orm_14.eq)(userOrganizations.userId, users.id)).where((0, drizzle_orm_14.and)((0, drizzle_orm_14.eq)(userOrganizations.organizationId, organizationId), (0, drizzle_orm_14.eq)(userOrganizations.isActive, true), (0, drizzle_orm_14.eq)(users.isActive, true)));
            const impact = {
                organization: organization[0],
                buildings: buildingsCount[0]?.count || 0,
                residences: residencesCount[0]?.count || 0,
                invitations: totalInvitations,
                potentialOrphanedUsers: potentialOrphansCount[0]?.count || 0
            };
            res.json(impact);
        }
        catch (error) {
            console.error("\u274C Error analyzing deletion impact:", error);
            res.status(500).json({
                _error: "Internal server error",
                message: "Failed to analyze deletion impact"
            });
        }
    });
    app2.delete("/api/organizations/:id", requireAuth, async (req, res) => {
        try {
            const currentUser = req.user || req.session?.user;
            if (!currentUser) {
                return res.status(401).json({
                    message: "Authentication required",
                    code: "AUTH_REQUIRED"
                });
            }
            if (currentUser.role !== "admin") {
                return res.status(403).json({
                    message: "Admin access required",
                    code: "ADMIN_REQUIRED"
                });
            }
            const organizationId = req.params.id;
            const organization = await db.select({ id: organizations.id, name: organizations.name }).from(organizations).where((0, drizzle_orm_14.and)((0, drizzle_orm_14.eq)(organizations.id, organizationId), (0, drizzle_orm_14.eq)(organizations.isActive, true))).limit(1);
            if (organization.length === 0) {
                return res.status(404).json({
                    _error: "Not found",
                    message: "Organization not found"
                });
            }
            console.log(`\u{1F5D1}\uFE0F Deleting organization ${organizationId} with cascade delete...`);
            const orgBuildings = await db.select({ id: buildings.id }).from(buildings).where((0, drizzle_orm_14.eq)(buildings.organizationId, organizationId));
            if (orgBuildings.length > 0) {
                const orgBuildingIds = orgBuildings.map((b) => b.id);
                const affectedResidences = await db.update(residences).set({ isActive: false, updatedAt: /* @__PURE__ */ new Date() }).where((0, drizzle_orm_14.inArray)(residences.buildingId, orgBuildingIds)).returning({ id: residences.id, unitNumber: residences.unitNumber });
                console.log(`\u{1F5D1}\uFE0F Soft deleted ${affectedResidences.length} residences in buildings: ${orgBuildingIds.join(", ")}`);
                const affectedBuildings = await db.update(buildings).set({ isActive: false, updatedAt: /* @__PURE__ */ new Date() }).where((0, drizzle_orm_14.inArray)(buildings.id, orgBuildingIds)).returning({ id: buildings.id, name: buildings.name });
                console.log(`\u{1F5D1}\uFE0F Soft deleted ${affectedBuildings.length} buildings: ${affectedBuildings.map((b) => b.name).join(", ")}`);
            }
            await db.delete(userOrganizations).where((0, drizzle_orm_14.eq)(userOrganizations.organizationId, organizationId));
            console.log("\u26A0\uFE0F  User deletion disabled for data safety - users will be preserved");
            const affectedUsers = await db.select({
                id: users.id,
                email: users.email,
                firstName: users.firstName,
                lastName: users.lastName
            }).from(users).leftJoin(userOrganizations, (0, drizzle_orm_14.and)((0, drizzle_orm_14.eq)(users.id, userOrganizations.userId), (0, drizzle_orm_14.eq)(userOrganizations.isActive, true))).where((0, drizzle_orm_14.and)((0, drizzle_orm_14.eq)(users.isActive, true), (0, drizzle_orm_14.isNull)(userOrganizations.userId)));
            if (affectedUsers.length > 0) {
                console.log(`\u26A0\uFE0F  ${affectedUsers.length} users are now without organization assignments but have been preserved:`, affectedUsers.map((u) => u.email));
            }
            await db.update(organizations).set({ isActive: false, updatedAt: /* @__PURE__ */ new Date() }).where((0, drizzle_orm_14.eq)(organizations.id, organizationId));
            try {
                console.log("Organization deleted - storage cleanup will be handled automatically");
            }
            catch (storageError) {
                console.error("\u26A0\uFE0F Object storage cleanup failed, but organization deletion succeeded:", storageError);
            }
            res.json({
                message: "Organization and related entities deleted successfully",
                deletedOrganization: organization[0].name
            });
        }
        catch (error) {
            console.error("\u274C Error deleting organization:", error);
            res.status(500).json({
                _error: "Internal server error",
                message: "Failed to delete organization and related entities"
            });
        }
    });
}
// server/api/users.ts
init_storage();
init_schema();
const zod_10 = require("zod");
init_db();
init_schema();
const crypto_5 = require("crypto");
const bcrypt2 = __importStar(require("bcryptjs"));
const drizzle_orm_15 = require("drizzle-orm");
// server/utils/input-sanitization.ts
function sanitizeString(input) {
    if (!input)
        return "";
    return input.trim().replace(/[<>]/g, "").replace(/['";]/g, "").substring(0, 500);
}
function normalizeEmail(email) {
    if (!email)
        return "";
    return email.toLowerCase().trim();
}
function sanitizeName(name) {
    if (!name)
        return "";
    return name.trim().replace(/[^a-zA-ZÀ-ÿ\s'-]/g, "").replace(/\s+/g, " ").substring(0, 100);
}
function generateUsernameFromEmail(email) {
    if (!email)
        return "";
    return email.split("@")[0].toLowerCase().replace(/[^a-z0-9]/g, "").substring(0, 30);
}
function validatePasswordStrength(password) {
    if (!password) {
        return { isValid: false, message: "Password is required" };
    }
    if (password.length < 8) {
        return { isValid: false, message: "Password must be at least 8 characters long" };
    }
    const hasUppercase = /[A-Z]/.test(password);
    const hasLowercase = /[a-z]/.test(password);
    const hasNumber = /\d/.test(password);
    const hasSpecialChar = /[@$!%*?&]/.test(password);
    if (!hasUppercase || !hasLowercase || !hasNumber || !hasSpecialChar) {
        return {
            isValid: false,
            message: "Password must contain uppercase, lowercase, number, and special character (@$!%*?&)"
        };
    }
    return { isValid: true };
}
// server/utils/user-creation-logger.ts
function logUserCreation(event) {
    const logData = {
        event: "user_creation",
        userId: event.userId,
        email: event.email.toLowerCase(),
        role: event.role,
        method: event.method,
        success: event.success,
        error: event.error,
        timestamp: event.timestamp.toISOString(),
        ipAddress: event.ipAddress,
        userAgent: event.userAgent
    };
    if (event.success) {
        console.log("\u2705 User creation successful:", JSON.stringify(logData));
    }
    else {
        console.error("\u274C User creation failed:", JSON.stringify(logData));
    }
}
// server/api/users.ts
init_query_cache();
function registerUserRoutes(app2) {
    app2.get("/api/users", requireAuth, async (req, res) => {
        try {
            const currentUser = req.user || req.session?.user;
            if (!currentUser) {
                return res.status(401).json({
                    message: "Authentication required",
                    code: "AUTH_REQUIRED"
                });
            }
            const usersWithAssignments = await storage.getUsersWithAssignments();
            let filteredUsers;
            if (currentUser.role === "admin") {
                filteredUsers = usersWithAssignments;
            }
            else if (["demo_manager", "demo_tenant", "demo_resident"].includes(currentUser.role)) {
                filteredUsers = usersWithAssignments.filter((user) => ["demo_manager", "demo_tenant", "demo_resident"].includes(user.role));
            }
            else {
                const userOrgIds = (await storage.getUserOrganizations(currentUser.id)).map((org) => org.organizationId);
                filteredUsers = usersWithAssignments.filter((user) => {
                    if (["demo_manager", "demo_tenant", "demo_resident"].includes(user.role)) {
                        return false;
                    }
                    const hasAccess = user.organizations?.some((org) => userOrgIds.includes(org.id)) || false;
                    return hasAccess;
                });
            }
            res.json(filteredUsers);
        }
        catch (error) {
            console.error("\u274C Error fetching users:", error);
            res.status(500).json({
                error: "Internal server error",
                message: "Failed to fetch users"
            });
        }
    });
    app2.get("/api/users/:id", async (req, res) => {
        try {
            const { id } = req.params;
            if (!id) {
                return res.status(400).json({
                    _error: "Bad request",
                    message: "User ID is required"
                });
            }
            const user = await storage.getUser(id);
            if (!user) {
                return res.status(404).json({
                    _error: "Not found",
                    message: "User not found"
                });
            }
            const { password, ...userWithoutPassword } = user;
            res.json(userWithoutPassword);
        }
        catch (error) {
            console.error("\u274C Error fetching user:", error);
            res.status(500).json({
                error: "Internal server error",
                message: "Failed to fetch user"
            });
        }
    });
    app2.get("/api/users/email/:email", async (req, res) => {
        try {
            const { email } = req.params;
            if (!email) {
                return res.status(400).json({
                    _error: "Bad request",
                    message: "Email is required"
                });
            }
            const user = await storage.getUserByEmail(email);
            if (!user) {
                return res.status(404).json({
                    _error: "Not found",
                    message: "User not found"
                });
            }
            const { password, ...userWithoutPassword } = user;
            res.json(userWithoutPassword);
        }
        catch (error) {
            console.error("\u274C Error fetching user by email:", error);
            res.status(500).json({
                error: "Internal server error",
                message: "Failed to fetch user"
            });
        }
    });
    app2.post("/api/users", async (req, res) => {
        try {
            if (req.body.password) {
                const passwordValidation = validatePasswordStrength(req.body.password);
                if (!passwordValidation.isValid) {
                    return res.status(400).json({
                        error: "Validation error",
                        message: passwordValidation.message,
                        code: "WEAK_PASSWORD"
                    });
                }
            }
            const normalizedData = {
                ...req.body,
                email: normalizeEmail(req.body.email || ""),
                firstName: sanitizeName(req.body.firstName || ""),
                lastName: sanitizeName(req.body.lastName || ""),
                phone: req.body.phone ? sanitizeString(req.body.phone) : "",
                language: req.body.language || "fr"
            };
            if (!normalizedData.username && normalizedData.email) {
                const baseUsername = generateUsernameFromEmail(normalizedData.email);
                let username = baseUsername;
                let usernameCounter = 1;
                let existingUsername = await db.select({ username: users.username }).from(users).where((0, drizzle_orm_15.eq)(users.username, username)).limit(1);
                while (existingUsername.length > 0) {
                    username = `${baseUsername}${usernameCounter}`;
                    usernameCounter++;
                    existingUsername = await db.select({ username: users.username }).from(users).where((0, drizzle_orm_15.eq)(users.username, username)).limit(1);
                }
                normalizedData.username = username;
            }
            const validatedData = insertUserSchema.parse(normalizedData);
            const existingUser = await storage.getUserByEmail(validatedData.email);
            if (existingUser) {
                return res.status(409).json({
                    _error: "Conflict",
                    message: "User with this email already exists"
                });
            }
            const user = await storage.createUser(validatedData);
            logUserCreation({
                userId: user.id,
                email: user.email,
                role: user.role,
                method: "direct",
                success: true,
                timestamp: /* @__PURE__ */ new Date(),
                ipAddress: req.ip,
                userAgent: req.get("User-Agent")
            });
            const { password, ...userWithoutPassword } = user;
            res.status(201).json(userWithoutPassword);
        }
        catch (error) {
            logUserCreation({
                email: req.body.email || "unknown",
                role: req.body.role || "unknown",
                method: "direct",
                success: false,
                error: error instanceof Error ? error.message : "Unknown error",
                timestamp: /* @__PURE__ */ new Date(),
                ipAddress: req.ip,
                userAgent: req.get("User-Agent")
            });
            if (error instanceof zod_10.z.ZodError) {
                return res.status(400).json({
                    error: "Validation error",
                    message: "Invalid user data",
                    details: error.issues
                });
            }
            console.error("\u274C Error creating user:", error);
            res.status(500).json({
                error: "Internal server error",
                message: "Failed to create user"
            });
        }
    });
    app2.put("/api/users/:id", requireAuth, async (req, res) => {
        try {
            const { id } = req.params;
            const currentUser = req.user || req.session?.user;
            if (!currentUser) {
                return res.status(401).json({
                    message: "Authentication required",
                    code: "AUTH_REQUIRED"
                });
            }
            if (!id) {
                return res.status(400).json({
                    error: "Bad request",
                    message: "User ID is required"
                });
            }
            const targetUser = await storage.getUser(id);
            if (!targetUser) {
                return res.status(404).json({
                    error: "Not found",
                    message: "User not found"
                });
            }
            const { role: newRole } = req.body;
            if (newRole && newRole !== targetUser.role) {
                if (currentUser.role === "admin") {
                }
                else if (currentUser.role === "manager") {
                    if (newRole === "admin") {
                        return res.status(403).json({
                            error: "Permission denied",
                            message: "Managers cannot assign admin role",
                            code: "ROLE_ESCALATION_DENIED"
                        });
                    }
                    if (!["manager", "tenant", "resident"].includes(newRole)) {
                        return res.status(403).json({
                            error: "Permission denied",
                            message: "Managers can only assign manager, tenant, or resident roles",
                            code: "INVALID_ROLE_ASSIGNMENT"
                        });
                    }
                }
                else if (currentUser.role === "demo_manager") {
                    if (!["demo_manager", "demo_tenant", "demo_resident"].includes(newRole)) {
                        return res.status(403).json({
                            error: "Permission denied",
                            message: "Demo managers can only assign demo roles",
                            code: "INVALID_DEMO_ROLE_ASSIGNMENT"
                        });
                    }
                }
                else {
                    return res.status(403).json({
                        error: "Permission denied",
                        message: "Insufficient permissions to assign roles",
                        code: "INSUFFICIENT_PERMISSIONS"
                    });
                }
                if (currentUser.role === "manager" || currentUser.role === "demo_manager") {
                    const currentUserOrgs = await storage.getUserOrganizations(currentUser.id);
                    const currentUserOrgIds = currentUserOrgs.map((org) => org.organizationId);
                    const targetUserOrgs = await storage.getUserOrganizations(id);
                    const targetUserOrgIds = targetUserOrgs.map((org) => org.organizationId);
                    const hasAccessToTargetOrgs = targetUserOrgIds.some((orgId) => currentUserOrgIds.includes(orgId));
                    if (!hasAccessToTargetOrgs && targetUserOrgIds.length > 0) {
                        return res.status(403).json({
                            error: "Permission denied",
                            message: "Cannot modify users outside your organization scope",
                            code: "ORGANIZATION_SCOPE_VIOLATION"
                        });
                    }
                    if (currentUser.role === "demo_manager") {
                        const targetOrgs = await db.select().from(organizations).where((0, drizzle_orm_15.inArray)(organizations.id, targetUserOrgIds));
                        const hasNonDemoOrgs = targetOrgs.some((org) => org.type !== "demo");
                        if (hasNonDemoOrgs) {
                            return res.status(403).json({
                                error: "Permission denied",
                                message: "Demo managers cannot assign roles to users in non-demo organizations",
                                code: "DEMO_SCOPE_VIOLATION"
                            });
                        }
                    }
                }
            }
            const updateSchema = insertUserSchema.partial().omit({ password: true });
            const validatedData = updateSchema.parse(req.body);
            const user = await storage.updateUser(id, {
                ...validatedData,
                updatedAt: /* @__PURE__ */ new Date()
            });
            if (!user) {
                return res.status(404).json({
                    error: "Not found",
                    message: "User not found"
                });
            }
            queryCache.invalidate("users", "all_users");
            queryCache.invalidate("users", `user:${id}`);
            const { password, ...userWithoutPassword } = user;
            res.json(userWithoutPassword);
        }
        catch (error) {
            if (error instanceof zod_10.z.ZodError) {
                return res.status(400).json({
                    error: "Validation error",
                    message: "Invalid user data",
                    details: error.issues
                });
            }
            console.error("\u274C Error updating user:", error);
            res.status(500).json({
                error: "Internal server error",
                message: "Failed to update user"
            });
        }
    });
    app2.delete("/api/users/:id", async (req, res) => {
        try {
            const { id } = req.params;
            if (!id) {
                return res.status(400).json({
                    _error: "Bad request",
                    message: "User ID is required"
                });
            }
            const user = await storage.updateUser(id, {
                isActive: false,
                updatedAt: /* @__PURE__ */ new Date()
            });
            if (!user) {
                return res.status(404).json({
                    _error: "Not found",
                    message: "User not found"
                });
            }
            res.json({
                message: "User deactivated successfully",
                id: user.id
            });
        }
        catch (error) {
            console.error("\u274C Error deactivating user:", error);
            res.status(500).json({
                error: "Internal server error",
                message: "Failed to deactivate user"
            });
        }
    });
    app2.get("/api/user-organizations", requireAuth, async (req, res) => {
        try {
            const currentUser = req.user || req.session?.user;
            if (!currentUser) {
                return res.status(401).json({
                    message: "Authentication required",
                    code: "AUTH_REQUIRED"
                });
            }
            const organizations3 = await storage.getUserOrganizations(currentUser.id);
            res.json(organizations3);
        }
        catch (error) {
            console.error("\u274C Error getting user organizations:", error);
            res.status(500).json({
                error: "Internal server error",
                message: "Failed to get user organizations"
            });
        }
    });
    app2.get("/api/user-residences", requireAuth, async (req, res) => {
        try {
            const currentUser = req.user || req.session?.user;
            if (!currentUser) {
                return res.status(401).json({
                    message: "Authentication required",
                    code: "AUTH_REQUIRED"
                });
            }
            const residences2 = await storage.getUserResidences(currentUser.id);
            res.json(residences2);
        }
        catch (error) {
            console.error("\u274C Error getting user residences:", error);
            res.status(500).json({
                error: "Internal server error",
                message: "Failed to get user residences"
            });
        }
    });
    app2.get("/api/admin/all-user-organizations", requireAuth, async (req, res) => {
        console.log("\u{1F50D} [API] all-user-organizations endpoint called by user:", req.user?.email);
        try {
            const currentUser = req.user || req.session?.user;
            if (!currentUser) {
                return res.status(401).json({
                    message: "Authentication required",
                    code: "AUTH_REQUIRED"
                });
            }
            if (!["admin", "manager"].includes(currentUser.role)) {
                return res.status(403).json({
                    message: "Insufficient permissions to view user assignments",
                    code: "INSUFFICIENT_PERMISSIONS"
                });
            }
            let userOrganizations5;
            if (currentUser.role === "admin") {
                userOrganizations5 = await db.select({
                    userId: userOrganizations.userId,
                    organizationId: userOrganizations.organizationId,
                    organizationRole: userOrganizations.organizationRole,
                    isActive: userOrganizations.isActive
                }).from(userOrganizations).where((0, drizzle_orm_15.eq)(userOrganizations.isActive, true));
            }
            else {
                const managerOrgs = await db.select({ organizationId: userOrganizations.organizationId }).from(userOrganizations).where((0, drizzle_orm_15.and)((0, drizzle_orm_15.eq)(userOrganizations.userId, currentUser.id), (0, drizzle_orm_15.eq)(userOrganizations.isActive, true)));
                const orgIds = managerOrgs.map((org) => org.organizationId);
                if (orgIds.length === 0) {
                    return res.json([]);
                }
                userOrganizations5 = await db.select({
                    userId: userOrganizations.userId,
                    organizationId: userOrganizations.organizationId,
                    organizationRole: userOrganizations.organizationRole,
                    isActive: userOrganizations.isActive
                }).from(userOrganizations).where((0, drizzle_orm_15.and)((0, drizzle_orm_15.eq)(userOrganizations.isActive, true), (0, drizzle_orm_15.inArray)(userOrganizations.organizationId, orgIds)));
            }
            res.json(userOrganizations5);
        }
        catch (error) {
            console.error("\u274C Error getting all user organizations:", error);
            res.status(500).json({
                error: "Internal server error",
                message: "Failed to get user organizations"
            });
        }
    });
    app2.get("/api/admin/all-user-residences", requireAuth, async (req, res) => {
        console.log("\u{1F50D} [API] all-user-residences endpoint called by user:", req.user?.email);
        try {
            const currentUser = req.user || req.session?.user;
            if (!currentUser) {
                return res.status(401).json({
                    message: "Authentication required",
                    code: "AUTH_REQUIRED"
                });
            }
            if (!["admin", "manager"].includes(currentUser.role)) {
                return res.status(403).json({
                    message: "Insufficient permissions to view user assignments",
                    code: "INSUFFICIENT_PERMISSIONS"
                });
            }
            let userResidences4;
            if (currentUser.role === "admin") {
                userResidences4 = await db.select({
                    userId: userResidences.userId,
                    residenceId: userResidences.residenceId,
                    relationshipType: userResidences.relationshipType,
                    startDate: userResidences.startDate,
                    endDate: userResidences.endDate,
                    isActive: userResidences.isActive
                }).from(userResidences).where((0, drizzle_orm_15.eq)(userResidences.isActive, true));
            }
            else {
                const managerOrgs = await db.select({ organizationId: userOrganizations.organizationId }).from(userOrganizations).where((0, drizzle_orm_15.and)((0, drizzle_orm_15.eq)(userOrganizations.userId, currentUser.id), (0, drizzle_orm_15.eq)(userOrganizations.isActive, true)));
                const orgIds = managerOrgs.map((org) => org.organizationId);
                if (orgIds.length === 0) {
                    return res.json([]);
                }
                const accessibleResidences = await db.select({ residenceId: residences.id }).from(residences).innerJoin(buildings, (0, drizzle_orm_15.eq)(residences.buildingId, buildings.id)).where((0, drizzle_orm_15.and)((0, drizzle_orm_15.inArray)(buildings.organizationId, orgIds), (0, drizzle_orm_15.eq)(residences.isActive, true)));
                const residenceIds = accessibleResidences.map((res2) => res2.residenceId);
                if (residenceIds.length === 0) {
                    return res.json([]);
                }
                userResidences4 = await db.select({
                    userId: userResidences.userId,
                    residenceId: userResidences.residenceId,
                    relationshipType: userResidences.relationshipType,
                    startDate: userResidences.startDate,
                    endDate: userResidences.endDate,
                    isActive: userResidences.isActive
                }).from(userResidences).where((0, drizzle_orm_15.and)((0, drizzle_orm_15.eq)(userResidences.isActive, true), (0, drizzle_orm_15.inArray)(userResidences.residenceId, residenceIds)));
            }
            res.json(userResidences4);
        }
        catch (error) {
            console.error("\u274C Error getting all user residences:", error);
            res.status(500).json({
                error: "Internal server error",
                message: "Failed to get user residences"
            });
        }
    });
    app2.get("/api/user/permissions", requireAuth, async (req, res) => {
        try {
            const userRole = req.user?.role;
            if (!userRole) {
                return res.status(400).json({
                    _error: "Bad request",
                    message: "User role not found in session"
                });
            }
            const rolePermissions2 = await storage.getRolePermissions();
            const userPermissions2 = rolePermissions2.filter((rp) => rp.role === userRole).map((rp) => rp.permission?.name).filter(Boolean);
            const responseData = {
                role: userRole,
                permissions: userPermissions2,
                permissionCount: userPermissions2.length
            };
            const permissionsResponseSchema = zod_10.z.object({
                role: zod_10.z.enum(["admin", "manager", "tenant", "resident"]),
                permissions: zod_10.z.array(zod_10.z.string()),
                permissionCount: zod_10.z.number()
            });
            const validatedResponse = permissionsResponseSchema.parse(responseData);
            res.json(validatedResponse);
        }
        catch (error) {
            if (error instanceof zod_10.z.ZodError) {
                return res.status(500).json({
                    error: "Internal server error",
                    message: "Failed to validate permissions response",
                    details: error.issues
                });
            }
            console.error("\u274C Error fetching user permissions:", error);
            res.status(500).json({
                error: "Internal server error",
                message: "Failed to fetch user permissions"
            });
        }
    });
    app2.put("/api/users/:id/organizations", requireAuth, async (req, res) => {
        try {
            const currentUser = req.user || req.session?.user;
            const { id: userId } = req.params;
            const { organizationIds } = req.body;
            if (!currentUser) {
                return res.status(401).json({
                    message: "Authentication required",
                    code: "AUTH_REQUIRED"
                });
            }
            if (currentUser.role !== "admin") {
                return res.status(403).json({
                    message: "Only administrators can modify organization assignments",
                    code: "INSUFFICIENT_PERMISSIONS"
                });
            }
            if (!userId || !Array.isArray(organizationIds)) {
                return res.status(400).json({
                    message: "User ID and organization IDs array are required",
                    code: "INVALID_REQUEST"
                });
            }
            const user = await storage.getUser(userId);
            if (!user) {
                return res.status(404).json({
                    message: "User not found",
                    code: "USER_NOT_FOUND"
                });
            }
            await db.delete(userOrganizations).where((0, drizzle_orm_15.eq)(userOrganizations.userId, userId));
            if (organizationIds.length > 0) {
                const newAssignments = organizationIds.map((orgId) => ({
                    userId,
                    organizationId: orgId,
                    organizationRole: user.role,
                    isActive: true
                }));
                await db.insert(userOrganizations).values(newAssignments);
            }
            res.json({
                message: "Organization assignments updated successfully",
                userId,
                organizationIds
            });
        }
        catch (error) {
            console.error("\u274C Error updating organization assignments:", error);
            res.status(500).json({
                error: "Internal server error",
                message: "Failed to update organization assignments"
            });
        }
    });
    app2.put("/api/users/:id/buildings", requireAuth, async (req, res) => {
        try {
            const currentUser = req.user || req.session?.user;
            const { id: userId } = req.params;
            const { buildingIds } = req.body;
            if (!currentUser) {
                return res.status(401).json({
                    message: "Authentication required",
                    code: "AUTH_REQUIRED"
                });
            }
            if (!["admin", "manager"].includes(currentUser.role)) {
                return res.status(403).json({
                    message: "Only administrators and managers can modify building assignments",
                    code: "INSUFFICIENT_PERMISSIONS"
                });
            }
            if (!userId || !Array.isArray(buildingIds)) {
                return res.status(400).json({
                    message: "User ID and building IDs array are required",
                    code: "INVALID_REQUEST"
                });
            }
            const user = await storage.getUser(userId);
            if (!user) {
                return res.status(404).json({
                    message: "User not found",
                    code: "USER_NOT_FOUND"
                });
            }
            const residences2 = await db.select().from(residences).where((0, drizzle_orm_15.inArray)(residences.buildingId, buildingIds));
            await db.delete(userResidences).where((0, drizzle_orm_15.eq)(userResidences.userId, userId));
            if (residences2.length > 0) {
                const buildingToResidence = /* @__PURE__ */ new Map();
                residences2.forEach((residence) => {
                    if (!buildingToResidence.has(residence.buildingId)) {
                        buildingToResidence.set(residence.buildingId, residence);
                    }
                });
                const newAssignments = Array.from(buildingToResidence.values()).map((residence) => ({
                    userId,
                    residenceId: residence.id,
                    relationshipType: user.role === "manager" ? "manager" : "tenant",
                    startDate: ( /* @__PURE__ */new Date()).toISOString().split("T")[0],
                    isActive: true
                }));
                await db.insert(userResidences).values(newAssignments);
            }
            res.json({
                message: "Building assignments updated successfully",
                userId,
                buildingIds
            });
        }
        catch (error) {
            console.error("\u274C Error updating building assignments:", error);
            res.status(500).json({
                error: "Internal server error",
                message: "Failed to update building assignments"
            });
        }
    });
    app2.get("/api/users/:id/residences", requireAuth, async (req, res) => {
        try {
            const currentUser = req.user || req.session?.user;
            const { id: userId } = req.params;
            if (!currentUser) {
                return res.status(401).json({
                    message: "Authentication required",
                    code: "AUTH_REQUIRED"
                });
            }
            if (currentUser.id !== userId && !["admin", "manager"].includes(currentUser.role)) {
                return res.status(403).json({
                    message: "Insufficient permissions",
                    code: "INSUFFICIENT_PERMISSIONS"
                });
            }
            const residencesWithDetails = await storage.getUserResidencesWithDetails(userId);
            const residences2 = residencesWithDetails.map((item) => ({
                id: item.residence.id,
                unitNumber: item.residence.unitNumber,
                floor: item.residence.floor,
                squareFootage: item.residence.squareFootage,
                bedrooms: item.residence.bedrooms,
                bathrooms: item.residence.bathrooms,
                balcony: item.residence.balcony,
                parkingSpaceNumbers: item.residence.parkingSpaceNumbers,
                storageSpaceNumbers: item.residence.storageSpaceNumbers,
                isActive: item.residence.isActive,
                buildingId: item.residence.buildingId,
                building: {
                    id: item.building.id,
                    name: item.building.name,
                    address: item.building.address,
                    city: item.building.city,
                    province: item.building.province,
                    postalCode: item.building.postalCode
                }
            }));
            res.json(residences2);
        }
        catch (error) {
            console.error("\u274C Error getting user residences:", error);
            res.status(500).json({
                error: "Internal server error",
                message: "Failed to get user residences"
            });
        }
    });
    app2.get("/api/users/:id/buildings", requireAuth, async (req, res) => {
        try {
            const currentUser = req.user || req.session?.user;
            const { id: userId } = req.params;
            if (!currentUser) {
                return res.status(401).json({
                    message: "Authentication required",
                    code: "AUTH_REQUIRED"
                });
            }
            if (currentUser.id !== userId && !["admin", "manager"].includes(currentUser.role)) {
                return res.status(403).json({
                    message: "Insufficient permissions",
                    code: "INSUFFICIENT_PERMISSIONS"
                });
            }
            const userResidences4 = await db.select({
                residenceId: userResidences.residenceId,
                buildingId: residences.buildingId
            }).from(userResidences).innerJoin(residences, (0, drizzle_orm_15.eq)(userResidences.residenceId, residences.id)).where((0, drizzle_orm_15.and)((0, drizzle_orm_15.eq)(userResidences.userId, userId), (0, drizzle_orm_15.eq)(userResidences.isActive, true), (0, drizzle_orm_15.eq)(residences.isActive, true)));
            if (!userResidences4 || userResidences4.length === 0) {
                return res.json({ buildings: [] });
            }
            const buildingIds = [...new Set(userResidences4.map((ur) => ur.buildingId).filter(Boolean))];
            if (buildingIds.length === 0) {
                return res.json({ buildings: [] });
            }
            const buildingDetails = await db.select({
                id: buildings.id,
                name: buildings.name,
                address: buildings.address,
                city: buildings.city,
                province: buildings.province,
                postalCode: buildings.postalCode,
                buildingType: buildings.buildingType,
                yearBuilt: buildings.yearBuilt,
                totalFloors: buildings.totalFloors,
                parkingSpaces: buildings.parkingSpaces,
                storageSpaces: buildings.storageSpaces,
                managementCompany: buildings.managementCompany,
                amenities: buildings.amenities,
                organizationId: buildings.organizationId,
                organizationName: organizations.name,
                organizationType: organizations.type
            }).from(buildings).leftJoin(organizations, (0, drizzle_orm_15.eq)(buildings.organizationId, organizations.id)).where((0, drizzle_orm_15.and)((0, drizzle_orm_15.inArray)(buildings.id, buildingIds), (0, drizzle_orm_15.eq)(buildings.isActive, true)));
            const buildingsWithStats = await Promise.all(buildingDetails.map(async (building) => {
                const [totalUnits, occupiedUnits] = await Promise.all([
                    db.select({ count: (0, drizzle_orm_15.sql) `count(*)` }).from(residences).where((0, drizzle_orm_15.and)((0, drizzle_orm_15.eq)(residences.buildingId, building.id), (0, drizzle_orm_15.eq)(residences.isActive, true))).then((result) => result[0]?.count || 0),
                    db.select({ count: (0, drizzle_orm_15.sql) `count(distinct ${residences.id})` }).from(residences).leftJoin(userResidences, (0, drizzle_orm_15.eq)(userResidences.residenceId, residences.id)).where((0, drizzle_orm_15.and)((0, drizzle_orm_15.eq)(residences.buildingId, building.id), (0, drizzle_orm_15.eq)(residences.isActive, true), (0, drizzle_orm_15.eq)(userResidences.isActive, true))).then((result) => result[0]?.count || 0)
                ]);
                const vacantUnits = totalUnits - occupiedUnits;
                const occupancyRate = totalUnits > 0 ? occupiedUnits / totalUnits * 100 : 0;
                return {
                    ...building,
                    totalUnits,
                    occupiedUnits,
                    vacantUnits,
                    occupancyRate
                };
            }));
            res.json({ buildings: buildingsWithStats });
        }
        catch (error) {
            console.error("\u274C Error getting user buildings:", error);
            res.status(500).json({
                error: "Internal server error",
                message: "Failed to get user buildings"
            });
        }
    });
    app2.put("/api/users/:id/residences", requireAuth, async (req, res) => {
        try {
            const currentUser = req.user || req.session?.user;
            const { id: userId } = req.params;
            const { residenceAssignments } = req.body;
            if (!currentUser) {
                return res.status(401).json({
                    message: "Authentication required",
                    code: "AUTH_REQUIRED"
                });
            }
            if (!["admin", "manager"].includes(currentUser.role)) {
                return res.status(403).json({
                    message: "Insufficient permissions to modify residence assignments",
                    code: "INSUFFICIENT_PERMISSIONS"
                });
            }
            if (!userId || !Array.isArray(residenceAssignments)) {
                return res.status(400).json({
                    message: "User ID and residence assignments array are required",
                    code: "INVALID_REQUEST"
                });
            }
            const user = await storage.getUser(userId);
            if (!user) {
                return res.status(404).json({
                    message: "User not found",
                    code: "USER_NOT_FOUND"
                });
            }
            if (currentUser.role === "manager") {
                for (const assignment of residenceAssignments) {
                    const residence = await db.select({ buildingId: residences.buildingId }).from(residences).where((0, drizzle_orm_15.eq)(residences.id, assignment.residenceId)).limit(1);
                    if (residence.length === 0) {
                        return res.status(404).json({
                            message: `Residence ${assignment.residenceId} not found`,
                            code: "RESIDENCE_NOT_FOUND"
                        });
                    }
                    const managerOrgs = await db.select({ organizationId: userOrganizations.organizationId }).from(userOrganizations).where((0, drizzle_orm_15.and)((0, drizzle_orm_15.eq)(userOrganizations.userId, currentUser.id), (0, drizzle_orm_15.eq)(userOrganizations.isActive, true)));
                    const orgIds = managerOrgs.map((org) => org.organizationId);
                    const accessibleBuildings = orgIds.length > 0 ? await db.select({ id: buildings.id }).from(buildings).where((0, drizzle_orm_15.and)((0, drizzle_orm_15.inArray)(buildings.organizationId, orgIds), (0, drizzle_orm_15.eq)(buildings.isActive, true))) : [];
                    const hasAccess = accessibleBuildings.some((b) => b.id === residence[0].buildingId);
                    if (!hasAccess) {
                        return res.status(403).json({
                            message: `Insufficient permissions for residence ${assignment.residenceId}`,
                            code: "INSUFFICIENT_PERMISSIONS"
                        });
                    }
                }
            }
            await db.delete(userResidences).where((0, drizzle_orm_15.eq)(userResidences.userId, userId));
            if (residenceAssignments.length > 0) {
                const newAssignments = residenceAssignments.map((assignment) => ({
                    userId,
                    residenceId: assignment.residenceId,
                    relationshipType: assignment.relationshipType || "tenant",
                    startDate: assignment.startDate || ( /* @__PURE__ */new Date()).toISOString().split("T")[0],
                    endDate: assignment.endDate || null,
                    isActive: true
                }));
                await db.insert(userResidences).values(newAssignments);
            }
            res.json({
                message: "Residence assignments updated successfully",
                userId,
                assignmentCount: residenceAssignments.length
            });
        }
        catch (error) {
            console.error("\u274C Error updating residence assignments:", error);
            res.status(500).json({
                error: "Internal server error",
                message: "Failed to update residence assignments"
            });
        }
    });
    app2.get("/api/users/me/organizations", requireAuth, async (req, res) => {
        try {
            const currentUser = req.user || req.session?.user;
            if (!currentUser) {
                return res.status(401).json({
                    message: "Authentication required",
                    code: "AUTH_REQUIRED"
                });
            }
            console.log(`\u{1F4CA} Fetching user-accessible organizations for ${currentUser.email} (${currentUser.role})`);
            let organizationsQuery;
            if (currentUser.role === "admin") {
                organizationsQuery = db.select({
                    id: organizations.id,
                    name: organizations.name,
                    type: organizations.type,
                    address: organizations.address,
                    city: organizations.city,
                    province: organizations.province,
                    postalCode: organizations.postalCode,
                    phone: organizations.phone,
                    email: organizations.email,
                    website: organizations.website,
                    registrationNumber: organizations.registrationNumber,
                    isActive: organizations.isActive,
                    createdAt: organizations.createdAt
                }).from(organizations).where((0, drizzle_orm_15.eq)(organizations.isActive, true)).orderBy(organizations.name);
            }
            else {
                organizationsQuery = db.select({
                    id: organizations.id,
                    name: organizations.name,
                    type: organizations.type,
                    address: organizations.address,
                    city: organizations.city,
                    province: organizations.province,
                    postalCode: organizations.postalCode,
                    phone: organizations.phone,
                    email: organizations.email,
                    website: organizations.website,
                    registrationNumber: organizations.registrationNumber,
                    isActive: organizations.isActive,
                    createdAt: organizations.createdAt
                }).from(organizations).innerJoin(userOrganizations, (0, drizzle_orm_15.eq)(organizations.id, userOrganizations.organizationId)).where((0, drizzle_orm_15.and)((0, drizzle_orm_15.eq)(organizations.isActive, true), (0, drizzle_orm_15.eq)(userOrganizations.userId, currentUser.id), (0, drizzle_orm_15.eq)(userOrganizations.isActive, true))).orderBy(organizations.name);
            }
            const accessibleOrganizations = await organizationsQuery;
            console.log(`\u2705 Found ${accessibleOrganizations.length} organizations for user ${currentUser.id}`);
            res.json(accessibleOrganizations);
        }
        catch (error) {
            console.error("\u274C Error fetching user organizations:", error);
            res.status(500).json({
                error: "Internal server error",
                message: "Failed to fetch user organizations"
            });
        }
    });
    app2.get("/api/users/me/data-export", requireAuth, async (req, res) => {
        try {
            const currentUser = req.user || req.session?.user;
            if (!currentUser) {
                return res.status(401).json({
                    message: "Authentication required",
                    code: "AUTH_REQUIRED"
                });
            }
            const userData = await storage.getUser(currentUser.id);
            if (!userData) {
                return res.status(404).json({
                    message: "User not found",
                    code: "USER_NOT_FOUND"
                });
            }
            const { password, ...userDataExport } = userData;
            const [organizations3, residences2, bills3, documents2, notifications2, maintenanceRequests2] = await Promise.all([
                db.select().from(userOrganizations).where((0, drizzle_orm_15.eq)(userOrganizations.userId, currentUser.id)),
                db.select().from(userResidences).where((0, drizzle_orm_15.eq)(userResidences.userId, currentUser.id)),
                db.select().from(bills).innerJoin(userResidences, (0, drizzle_orm_15.eq)(bills.residenceId, userResidences.residenceId)).where((0, drizzle_orm_15.eq)(userResidences.userId, currentUser.id)),
                db.select().from(documents).where((0, drizzle_orm_15.eq)(documents.uploadedById, currentUser.id)),
                db.select().from(notifications).where((0, drizzle_orm_15.eq)(notifications.userId, currentUser.id)),
                db.select().from(maintenanceRequests).where((0, drizzle_orm_15.eq)(maintenanceRequests.submittedBy, currentUser.id))
            ]);
            const exportData = {
                personalInformation: userDataExport,
                organizations: organizations3,
                residences: residences2,
                bills: bills3.map((b) => b.bills),
                documents: documents2,
                notifications: notifications2,
                maintenanceRequests: maintenanceRequests2,
                exportDate: ( /* @__PURE__ */new Date()).toISOString(),
                note: "This export contains all personal data we have on file for you in compliance with Quebec Law 25."
            };
            res.setHeader("Content-Type", "application/json");
            res.setHeader("Content-Disposition", `attachment; filename="user-data-export-${currentUser.id}-${( /* @__PURE__ */new Date()).toISOString().split("T")[0]}.json"`);
            res.json(exportData);
        }
        catch (error) {
            console.error("\u274C Error exporting user data:", error);
            res.status(500).json({
                error: "Internal server error",
                message: "Failed to export user data"
            });
        }
    });
    app2.post("/api/users/me/delete-account", requireAuth, async (req, res) => {
        try {
            const currentUser = req.user || req.session?.user;
            if (!currentUser) {
                return res.status(401).json({
                    message: "Authentication required",
                    code: "AUTH_REQUIRED"
                });
            }
            const { confirmEmail, reason } = req.body;
            if (confirmEmail !== currentUser.email) {
                return res.status(400).json({
                    message: "Email confirmation does not match",
                    code: "EMAIL_MISMATCH"
                });
            }
            await Promise.all([
                // Delete user relationships
                db.delete(userOrganizations).where((0, drizzle_orm_15.eq)(userOrganizations.userId, currentUser.id)),
                db.delete(userResidences).where((0, drizzle_orm_15.eq)(userResidences.userId, currentUser.id)),
                db.delete(documents).where((0, drizzle_orm_15.eq)(documents.uploadedById, currentUser.id)),
                // Delete user-created content
                db.delete(notifications).where((0, drizzle_orm_15.eq)(notifications.userId, currentUser.id)),
                db.delete(maintenanceRequests).where((0, drizzle_orm_15.eq)(maintenanceRequests.submittedBy, currentUser.id)),
                // Delete invitations
                db.delete(invitations).where((0, drizzle_orm_15.eq)(invitations.email, currentUser.email))
            ]);
            await db.delete(users).where((0, drizzle_orm_15.eq)(users.id, currentUser.id));
            console.log(`User account deleted: ${currentUser.email} (${currentUser.id}). Reason: ${reason || "Not provided"}`);
            if (req.session) {
                req.session.destroy((err) => {
                    if (err) {
                        console.error("Failed to destroy session after account deletion:", err);
                    }
                });
            }
            res.json({
                message: "Account successfully deleted. All personal data has been permanently removed from our systems.",
                deletionDate: ( /* @__PURE__ */new Date()).toISOString()
            });
        }
        catch (error) {
            console.error("\u274C Error deleting account:", error);
            res.status(500).json({
                error: "Internal server error",
                message: "Failed to delete account. Please contact support."
            });
        }
    });
    app2.put("/api/users/me", requireAuth, async (req, res) => {
        try {
            const currentUser = req.user || req.session?.user;
            if (!currentUser) {
                return res.status(401).json({
                    message: "Authentication required",
                    code: "AUTH_REQUIRED"
                });
            }
            const updateSchema = insertUserSchema.partial().omit({ password: true, id: true, role: true });
            const validatedData = updateSchema.parse(req.body);
            const user = await storage.updateUser(currentUser.id, {
                ...validatedData,
                updatedAt: /* @__PURE__ */ new Date()
            });
            if (!user) {
                return res.status(404).json({
                    message: "User not found",
                    code: "USER_NOT_FOUND"
                });
            }
            const { password, ...userWithoutPassword } = user;
            res.json(userWithoutPassword);
        }
        catch (error) {
            console.error("\u274C Error updating user profile:", error);
            res.status(500).json({
                error: "Internal server error",
                message: "Failed to update profile"
            });
        }
    });
    app2.post("/api/users/:id/delete-account", requireAuth, async (req, res) => {
        try {
            const currentUser = req.user || req.session?.user;
            const { id: targetUserId } = req.params;
            if (!currentUser) {
                return res.status(401).json({
                    message: "Authentication required",
                    code: "AUTH_REQUIRED"
                });
            }
            if (currentUser.role !== "admin") {
                return res.status(403).json({
                    message: "Only administrators can delete user accounts",
                    code: "INSUFFICIENT_PERMISSIONS"
                });
            }
            console.warn(`\u26A0\uFE0F  CRITICAL: Admin ${currentUser.email} attempting to delete user ${targetUserId}`);
            if (!targetUserId) {
                return res.status(400).json({
                    message: "User ID is required",
                    code: "INVALID_REQUEST"
                });
            }
            const targetUser = await storage.getUser(targetUserId);
            if (!targetUser) {
                return res.status(404).json({
                    message: "User not found",
                    code: "USER_NOT_FOUND"
                });
            }
            const { confirmEmail, reason } = req.body;
            if (confirmEmail !== targetUser.email) {
                return res.status(400).json({
                    message: "Email confirmation does not match",
                    code: "EMAIL_MISMATCH"
                });
            }
            const deletionPromises = [
                // Delete user relationships
                db.delete(userOrganizations).where((0, drizzle_orm_15.eq)(userOrganizations.userId, targetUserId)),
                db.delete(userResidences).where((0, drizzle_orm_15.eq)(userResidences.userId, targetUserId)),
                db.delete(documents).where((0, drizzle_orm_15.eq)(documents.uploadedById, targetUserId)),
                // Delete invitations
                db.delete(invitations).where((0, drizzle_orm_15.eq)(invitations.email, targetUser.email))
            ];
            const optionalDeletions = [
                async () => {
                    try {
                        await db.delete(notifications).where((0, drizzle_orm_15.eq)(notifications.userId, targetUserId));
                    }
                    catch (error) {
                        if (error.cause?.code === "42P01") {
                            console.log("Notifications table not found, skipping...");
                        }
                        else {
                            throw error;
                        }
                    }
                },
                async () => {
                    try {
                        await db.delete(maintenanceRequests).where((0, drizzle_orm_15.eq)(maintenanceRequests.submittedBy, targetUserId));
                    }
                    catch (error) {
                        if (error.cause?.code === "42P01") {
                            console.log("Maintenance requests table not found, skipping...");
                        }
                        else {
                            throw error;
                        }
                    }
                }
            ];
            await Promise.all(deletionPromises);
            await Promise.all(optionalDeletions.map((fn) => fn()));
            await db.delete(users).where((0, drizzle_orm_15.eq)(users.id, targetUserId));
            queryCache.invalidate("users", "all_users");
            queryCache.invalidate("users", `user:${targetUserId}`);
            queryCache.invalidate("users", `user_email:${targetUser.email}`);
            console.log(`User account deleted by admin ${currentUser.email} (${currentUser.id}): ${targetUser.email} (${targetUserId}). Reason: ${reason || "Not provided"}`);
            res.json({
                message: "User account and all associated data have been permanently deleted",
                deletedUserId: targetUserId,
                deletedUserEmail: targetUser.email
            });
        }
        catch (error) {
            console.error("\u274C Error deleting user account:", error);
            res.status(500).json({
                error: "Internal server error",
                message: "Failed to delete user account"
            });
        }
    });
    app2.post("/api/users/me/change-password", requireAuth, async (req, res) => {
        try {
            const currentUser = req.user || req.session?.user;
            if (!currentUser) {
                return res.status(401).json({
                    message: "Authentication required",
                    code: "AUTH_REQUIRED"
                });
            }
            const { currentPassword, newPassword } = req.body;
            if (!currentPassword || !newPassword) {
                return res.status(400).json({
                    message: "Current password and new password are required",
                    code: "INVALID_INPUT"
                });
            }
            const user = await storage.getUser(currentUser.id);
            if (!user || !await bcrypt2.compare(currentPassword, user.password)) {
                return res.status(400).json({
                    message: "Current password is incorrect",
                    code: "INVALID_PASSWORD"
                });
            }
            const hashedPassword = await bcrypt2.hash(newPassword, 12);
            await storage.updateUser(currentUser.id, {
                password: hashedPassword,
                updatedAt: /* @__PURE__ */ new Date()
            });
            res.json({
                message: "Password changed successfully"
            });
        }
        catch (error) {
            console.error("\u274C Error changing password:", error);
            res.status(500).json({
                error: "Internal server error",
                message: "Failed to change password"
            });
        }
    });
    app2.post("/api/users/demo", requireAuth, async (req, res) => {
        try {
            const currentUser = req.user || req.session?.user;
            if (!currentUser) {
                return res.status(401).json({
                    message: "Authentication required",
                    code: "AUTH_REQUIRED"
                });
            }
            if (!["admin", "manager"].includes(currentUser.role)) {
                return res.status(403).json({
                    message: "Insufficient permissions",
                    code: "INSUFFICIENT_PERMISSIONS"
                });
            }
            const { firstName, lastName, role, organizationId, residenceId } = req.body;
            if (!["demo_manager", "demo_tenant", "demo_resident"].includes(role)) {
                return res.status(400).json({
                    message: "Invalid demo role",
                    code: "INVALID_ROLE"
                });
            }
            if (!firstName || !lastName || !organizationId) {
                return res.status(400).json({
                    message: "First name, last name, and organization are required",
                    code: "MISSING_REQUIRED_FIELDS"
                });
            }
            const email = `${firstName.toLowerCase()}.${lastName.toLowerCase()}@demo.com`;
            const existingUser = await storage.getUserByEmail(email);
            if (existingUser) {
                return res.status(400).json({
                    message: "Demo user with this name already exists",
                    code: "USER_EXISTS"
                });
            }
            const randomPassword = (0, crypto_5.randomBytes)(12).toString("base64");
            const hashedPassword = await bcrypt2.hash(`Demo${randomPassword}!`, 12);
            const userData = {
                firstName: sanitizeName(firstName),
                lastName: sanitizeName(lastName),
                email: normalizeEmail(email),
                username: generateUsernameFromEmail(email),
                password: hashedPassword,
                language: "fr",
                // Default to French for Quebec
                role,
                isActive: true
            };
            const newUser = await storage.createUser(userData);
            logUserCreation({
                userId: newUser.id,
                email: newUser.email,
                method: "direct",
                role,
                success: true,
                timestamp: /* @__PURE__ */ new Date()
            });
            queryCache.invalidate("users", "all_users");
            res.status(201).json({
                message: "Demo user created successfully",
                user: {
                    id: newUser.id,
                    firstName: newUser.firstName,
                    lastName: newUser.lastName,
                    email: newUser.email,
                    role: newUser.role
                }
            });
        }
        catch (error) {
            console.error("\u274C Error creating demo user:", error);
            res.status(500).json({
                error: "Internal server error",
                message: "Failed to create demo user"
            });
        }
    });
    app2.post("/api/invitations", requireAuth, async (req, res) => {
        try {
            const currentUser = req.user || req.session?.user;
            if (!currentUser) {
                return res.status(401).json({
                    message: "Authentication required",
                    code: "AUTH_REQUIRED"
                });
            }
            if (!["admin", "manager"].includes(currentUser.role)) {
                return res.status(403).json({
                    message: "Insufficient permissions",
                    code: "INSUFFICIENT_PERMISSIONS"
                });
            }
            const { organizationId, residenceId, email, role, invitedByUserId, expiresAt, personalMessage } = req.body;
            if (!organizationId || !email || !role || !expiresAt) {
                return res.status(400).json({
                    message: "Organization, email, role, and expiry date are required",
                    code: "MISSING_REQUIRED_FIELDS"
                });
            }
            const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
            if (!emailRegex.test(email)) {
                return res.status(400).json({
                    message: "Invalid email format",
                    code: "INVALID_EMAIL"
                });
            }
            if (currentUser.role === "manager") {
                if (role === "admin") {
                    return res.status(403).json({
                        message: "Managers can only invite resident, tenant, and manager roles",
                        code: "ROLE_PERMISSION_DENIED"
                    });
                }
                const targetOrg = await db.select().from(organizations).where((0, drizzle_orm_15.eq)(organizations.id, organizationId)).limit(1);
                if (targetOrg.length > 0 && targetOrg[0].type === "Demo") {
                    if (!["resident", "tenant", "manager"].includes(role)) {
                        return res.status(403).json({
                            message: "Invalid role for demo organization",
                            code: "INVALID_DEMO_ROLE"
                        });
                    }
                }
                else {
                    if (!["resident", "tenant", "manager"].includes(role)) {
                        return res.status(403).json({
                            message: "Managers can only invite resident, tenant, and manager roles",
                            code: "ROLE_PERMISSION_DENIED"
                        });
                    }
                }
            }
            const existingUser = await storage.getUserByEmail(email);
            if (existingUser) {
                return res.status(400).json({
                    message: "User with this email already exists",
                    code: "USER_EXISTS"
                });
            }
            const existingInvitations = await db.select().from(invitations).where((0, drizzle_orm_15.and)((0, drizzle_orm_15.eq)(invitations.email, email), (0, drizzle_orm_15.eq)(invitations.organizationId, organizationId), (0, drizzle_orm_15.eq)(invitations.status, "pending")));
            if (existingInvitations.length > 0) {
                console.log(`\u{1F504} Replacing ${existingInvitations.length} existing invitation(s) for email: ${email}`);
                await db.delete(invitations).where((0, drizzle_orm_15.and)((0, drizzle_orm_15.eq)(invitations.email, email), (0, drizzle_orm_15.eq)(invitations.organizationId, organizationId), (0, drizzle_orm_15.eq)(invitations.status, "pending")));
            }
            const token = (0, crypto_5.randomBytes)(32).toString("hex");
            const tokenHash = (0, crypto_5.createHash)("sha256").update(token).digest("hex");
            const invitationData = {
                organizationId,
                residenceId: residenceId || null,
                email,
                token,
                tokenHash,
                role,
                invitedByUserId: currentUser.id,
                expiresAt: new Date(expiresAt),
                personalMessage: personalMessage || null
            };
            const [newInvitation] = await db.insert(invitations).values(invitationData).returning();
            const [organization] = await db.select().from(organizations).where((0, drizzle_orm_15.eq)(organizations.id, organizationId)).limit(1);
            const recipientName = email.split("@")[0];
            const organizationName = organization?.name || "Koveo Gestion";
            const inviterName = `${currentUser.firstName || currentUser.email} ${currentUser.lastName || ""}`.trim();
            const emailSent = await emailService.sendInvitationEmail(email, recipientName, token, 
            // Use the unhashed token for the email URL
            organizationName, inviterName, new Date(expiresAt), "fr", 
            // Default to French for Quebec
            personalMessage);
            console.log("\u2705 Invitation created:", {
                id: newInvitation.id,
                email,
                role,
                organizationId,
                invitedBy: currentUser.email,
                emailSent
            });
            if (!emailSent && process.env.NODE_ENV !== "test") {
                console.error("\u26A0\uFE0F Invitation created but email failed to send");
                return res.status(207).json({
                    message: "Invitation created but email failed to send",
                    invitationId: newInvitation.id,
                    emailSent: false
                });
            }
            res.status(201).json({
                message: "Invitation sent successfully",
                invitationId: newInvitation.id,
                emailSent: true
            });
        }
        catch (error) {
            console.error("\u274C Error creating invitation:", error);
            res.status(500).json({
                error: "Internal server error",
                message: "Failed to create invitation"
            });
        }
    });
    app2.get("/api/invitations", requireAuth, async (req, res) => {
        try {
            const currentUser = req.user || req.session?.user;
            if (!currentUser) {
                return res.status(401).json({
                    message: "Authentication required",
                    code: "AUTH_REQUIRED"
                });
            }
            if (!["admin", "manager"].includes(currentUser.role)) {
                return res.status(403).json({
                    message: "Insufficient permissions",
                    code: "INSUFFICIENT_PERMISSIONS"
                });
            }
            let invitations2;
            if (currentUser.role === "admin") {
                invitations2 = await db.select().from(invitations).orderBy(invitations.createdAt);
            }
            else {
                invitations2 = await db.select().from(invitations).where((0, drizzle_orm_15.eq)(invitations.invitedByUserId, currentUser.id)).orderBy(invitations.createdAt);
            }
            res.json(invitations2);
        }
        catch (error) {
            console.error("\u274C Error fetching invitations:", error);
            res.status(500).json({
                error: "Internal server error",
                message: "Failed to fetch invitations"
            });
        }
    });
    app2.post("/api/invitations/validate", async (req, res) => {
        try {
            const { token } = req.body;
            if (!token) {
                return res.status(400).json({
                    isValid: false,
                    message: "Token is required",
                    code: "TOKEN_REQUIRED"
                });
            }
            const [invitation] = await db.select().from(invitations).where((0, drizzle_orm_15.eq)(invitations.token, token)).limit(1);
            if (!invitation) {
                return res.status(404).json({
                    isValid: false,
                    message: "Invitation not found or invalid token",
                    code: "INVITATION_NOT_FOUND"
                });
            }
            const now = /* @__PURE__ */ new Date();
            const expiresAt = new Date(invitation.expiresAt);
            if (now > expiresAt) {
                return res.status(400).json({
                    isValid: false,
                    message: "Invitation has expired",
                    code: "INVITATION_EXPIRED"
                });
            }
            if (invitation.status === "accepted") {
                return res.status(400).json({
                    isValid: false,
                    message: "Invitation has already been used",
                    code: "INVITATION_ALREADY_USED"
                });
            }
            const [organization] = await db.select().from(organizations).where((0, drizzle_orm_15.eq)(organizations.id, invitation.organizationId)).limit(1);
            const [inviter] = await db.select({
                id: users.id,
                firstName: users.firstName,
                lastName: users.lastName,
                email: users.email
            }).from(users).where((0, drizzle_orm_15.eq)(users.id, invitation.invitedByUserId)).limit(1);
            res.json({
                isValid: true,
                invitation: {
                    id: invitation.id,
                    email: invitation.email,
                    role: invitation.role,
                    expiresAt: invitation.expiresAt,
                    createdAt: invitation.createdAt
                },
                organizationName: organization?.name || "Unknown Organization",
                inviterName: inviter ? `${inviter.firstName} ${inviter.lastName}`.trim() : "Unknown User"
            });
        }
        catch (error) {
            console.error("\u274C Error validating invitation:", error);
            res.status(500).json({
                isValid: false,
                message: "Internal server error during validation",
                code: "VALIDATION_ERROR"
            });
        }
    });
    app2.post("/api/invitations/accept/:token", async (req, res) => {
        try {
            const { token } = req.params;
            const { firstName, lastName, password, phone, language, dataCollectionConsent, marketingConsent, analyticsConsent, thirdPartyConsent, acknowledgedRights } = req.body;
            if (!token) {
                return res.status(400).json({
                    message: "Token is required",
                    code: "TOKEN_REQUIRED"
                });
            }
            const [invitation] = await db.select().from(invitations).where((0, drizzle_orm_15.eq)(invitations.token, token)).limit(1);
            if (!invitation) {
                return res.status(404).json({
                    message: "Invitation not found or invalid token",
                    code: "INVITATION_NOT_FOUND"
                });
            }
            const now = /* @__PURE__ */ new Date();
            const expiresAt = new Date(invitation.expiresAt);
            if (now > expiresAt) {
                return res.status(400).json({
                    message: "Invitation has expired",
                    code: "INVITATION_EXPIRED"
                });
            }
            if (invitation.status === "accepted") {
                return res.status(400).json({
                    message: "Invitation has already been used",
                    code: "INVITATION_ALREADY_USED"
                });
            }
            if (!firstName || !lastName || !password) {
                return res.status(400).json({
                    message: "First name, last name, and password are required",
                    code: "MISSING_REQUIRED_FIELDS"
                });
            }
            if (!dataCollectionConsent || !acknowledgedRights) {
                return res.status(400).json({
                    message: "Required privacy consents must be given",
                    code: "MISSING_REQUIRED_CONSENTS"
                });
            }
            const hashedPassword = await bcrypt2.hash(password, 12);
            const userData = {
                firstName: sanitizeName(firstName),
                lastName: sanitizeName(lastName),
                email: normalizeEmail(invitation.email),
                username: generateUsernameFromEmail(invitation.email),
                password: hashedPassword,
                phone: phone ? sanitizeString(phone) : "",
                language: language || "fr",
                role: invitation.role,
                isActive: true,
                organizationId: invitation.organizationId
            };
            const newUser = await storage.createUser(userData);
            if (invitation.organizationId) {
                await db.insert(userOrganizations).values({
                    userId: newUser.id,
                    organizationId: invitation.organizationId,
                    organizationRole: invitation.role,
                    isActive: true
                });
                console.log("\u2705 User assigned to organization:", {
                    userId: newUser.id,
                    organizationId: invitation.organizationId,
                    role: invitation.role
                });
            }
            if (invitation.residenceId) {
                await db.insert(userResidences).values({
                    userId: newUser.id,
                    residenceId: invitation.residenceId,
                    relationshipType: invitation.role === "tenant" ? "tenant" : "occupant",
                    startDate: /* @__PURE__ */ new Date(),
                    isActive: true
                });
                console.log("\u2705 User assigned to residence:", {
                    userId: newUser.id,
                    residenceId: invitation.residenceId,
                    relationshipType: invitation.role === "tenant" ? "tenant" : "occupant"
                });
            }
            await db.update(invitations).set({
                status: "accepted",
                acceptedAt: /* @__PURE__ */ new Date(),
                acceptedBy: newUser.id,
                updatedAt: /* @__PURE__ */ new Date()
            }).where((0, drizzle_orm_15.eq)(invitations.id, invitation.id));
            logUserCreation({
                userId: newUser.id,
                email: newUser.email,
                method: "invitation",
                role: invitation.role,
                success: true,
                timestamp: /* @__PURE__ */ new Date()
            });
            queryCache.invalidate("users", "all_users");
            queryCache.invalidate("invitations");
            console.log("\u2705 User created via invitation acceptance:", {
                userId: newUser.id,
                email: newUser.email,
                role: newUser.role,
                organizationId: invitation.organizationId,
                residenceId: invitation.residenceId,
                assignedToOrganization: !!invitation.organizationId,
                assignedToResidence: !!invitation.residenceId
            });
            res.status(201).json({
                message: "Account created successfully",
                user: {
                    id: newUser.id,
                    firstName: newUser.firstName,
                    lastName: newUser.lastName,
                    email: newUser.email,
                    role: newUser.role,
                    language: newUser.language
                }
            });
        }
        catch (error) {
            console.error("\u274C Error accepting invitation:", error);
            res.status(500).json({
                message: "Internal server error during account creation",
                code: "INVITATION_ACCEPT_ERROR"
            });
        }
    });
    app2.post("/api/invitations/:id/resend", requireAuth, async (req, res) => {
        try {
            const currentUser = req.user || req.session?.user;
            if (!currentUser) {
                return res.status(401).json({
                    message: "Authentication required",
                    code: "AUTH_REQUIRED"
                });
            }
            const { id } = req.params;
            const [invitation] = await db.select().from(invitations).where((0, drizzle_orm_15.eq)(invitations.id, id)).limit(1);
            if (!invitation) {
                return res.status(404).json({
                    message: "Invitation not found",
                    code: "INVITATION_NOT_FOUND"
                });
            }
            if (currentUser.role !== "admin" && invitation.invitedByUserId !== currentUser.id) {
                return res.status(403).json({
                    message: "Can only resend your own invitations",
                    code: "INSUFFICIENT_PERMISSIONS"
                });
            }
            const newExpiresAt = /* @__PURE__ */ new Date();
            newExpiresAt.setDate(newExpiresAt.getDate() + 7);
            await db.update(invitations).set({
                expiresAt: newExpiresAt,
                status: "pending",
                updatedAt: /* @__PURE__ */ new Date()
            }).where((0, drizzle_orm_15.eq)(invitations.id, id));
            const [organization] = await db.select().from(organizations).where((0, drizzle_orm_15.eq)(organizations.id, invitation.organizationId)).limit(1);
            const recipientName = invitation.email.split("@")[0];
            const organizationName = organization?.name || "Koveo Gestion";
            const inviterName = `${currentUser.firstName || currentUser.email} ${currentUser.lastName || ""}`.trim();
            const emailSent = await emailService.sendInvitationEmail(invitation.email, recipientName, invitation.token, 
            // Use the existing token
            organizationName, inviterName, newExpiresAt, "fr", 
            // Default to French for Quebec
            invitation.personalMessage);
            console.log("\u2705 Invitation resent:", {
                id,
                email: invitation.email,
                newExpiresAt,
                emailSent
            });
            if (!emailSent) {
                console.error("\u26A0\uFE0F Invitation updated but email failed to resend");
                return res.status(207).json({
                    message: "Invitation updated but email failed to resend",
                    emailSent: false
                });
            }
            res.json({
                message: "Invitation resent successfully",
                emailSent: true
            });
        }
        catch (error) {
            console.error("\u274C Error resending invitation:", error);
            res.status(500).json({
                error: "Internal server error",
                message: "Failed to resend invitation"
            });
        }
    });
    app2.get("/api/invitations/pending", requireAuth, async (req, res) => {
        try {
            const currentUser = req.user || req.session?.user;
            if (!currentUser) {
                return res.status(401).json({
                    message: "Authentication required",
                    code: "AUTH_REQUIRED"
                });
            }
            if (!["admin", "manager"].includes(currentUser.role)) {
                return res.status(403).json({
                    message: "Insufficient permissions to view invitations",
                    code: "INSUFFICIENT_PERMISSIONS"
                });
            }
            let invitationsQuery;
            if (currentUser.role === "admin") {
                invitationsQuery = db.select({
                    id: invitations.id,
                    email: invitations.email,
                    role: invitations.role,
                    status: invitations.status,
                    expiresAt: invitations.expiresAt,
                    createdAt: invitations.createdAt,
                    organizationId: invitations.organizationId,
                    buildingId: invitations.buildingId,
                    residenceId: invitations.residenceId,
                    organizationName: organizations.name,
                    buildingName: (0, drizzle_orm_15.sql) `buildings.name`,
                    residenceUnitNumber: (0, drizzle_orm_15.sql) `residences.unit_number`,
                    invitedByName: (0, drizzle_orm_15.sql) `CONCAT(users.first_name, ' ', users.last_name)`
                }).from(invitations).leftJoin(organizations, (0, drizzle_orm_15.eq)(invitations.organizationId, organizations.id)).leftJoin((0, drizzle_orm_15.sql) `buildings`, (0, drizzle_orm_15.sql) `invitations.building_id = buildings.id`).leftJoin((0, drizzle_orm_15.sql) `residences`, (0, drizzle_orm_15.sql) `invitations.residence_id = residences.id`).leftJoin(users, (0, drizzle_orm_15.eq)(invitations.invitedByUserId, users.id)).where((0, drizzle_orm_15.eq)(invitations.status, "pending"));
            }
            else {
                const managerOrgs = await db.select({ organizationId: userOrganizations.organizationId }).from(userOrganizations).where((0, drizzle_orm_15.and)((0, drizzle_orm_15.eq)(userOrganizations.userId, currentUser.id), (0, drizzle_orm_15.eq)(userOrganizations.isActive, true)));
                const orgIds = managerOrgs.map((org) => org.organizationId);
                if (orgIds.length === 0) {
                    return res.json([]);
                }
                invitationsQuery = db.select({
                    id: invitations.id,
                    email: invitations.email,
                    role: invitations.role,
                    status: invitations.status,
                    expiresAt: invitations.expiresAt,
                    createdAt: invitations.createdAt,
                    organizationId: invitations.organizationId,
                    buildingId: invitations.buildingId,
                    residenceId: invitations.residenceId,
                    organizationName: organizations.name,
                    buildingName: (0, drizzle_orm_15.sql) `buildings.name`,
                    residenceUnitNumber: (0, drizzle_orm_15.sql) `residences.unit_number`,
                    invitedByName: (0, drizzle_orm_15.sql) `CONCAT(users.first_name, ' ', users.last_name)`
                }).from(invitations).leftJoin(organizations, (0, drizzle_orm_15.eq)(invitations.organizationId, organizations.id)).leftJoin((0, drizzle_orm_15.sql) `buildings`, (0, drizzle_orm_15.sql) `invitations.building_id = buildings.id`).leftJoin((0, drizzle_orm_15.sql) `residences`, (0, drizzle_orm_15.sql) `invitations.residence_id = residences.id`).leftJoin(users, (0, drizzle_orm_15.eq)(invitations.invitedByUserId, users.id)).where((0, drizzle_orm_15.and)((0, drizzle_orm_15.eq)(invitations.status, "pending"), (0, drizzle_orm_15.inArray)(invitations.organizationId, orgIds)));
            }
            const invitations2 = await invitationsQuery;
            res.json(invitations2);
        }
        catch (error) {
            console.error("\u274C Error fetching pending invitations:", error);
            res.status(500).json({
                error: "Internal server error",
                message: "Failed to fetch pending invitations"
            });
        }
    });
    app2.delete("/api/invitations/:id", requireAuth, async (req, res) => {
        try {
            const currentUser = req.user || req.session?.user;
            const { id: invitationId } = req.params;
            if (!currentUser) {
                return res.status(401).json({
                    message: "Authentication required",
                    code: "AUTH_REQUIRED"
                });
            }
            if (!["admin", "manager"].includes(currentUser.role)) {
                return res.status(403).json({
                    message: "Insufficient permissions to delete invitations",
                    code: "INSUFFICIENT_PERMISSIONS"
                });
            }
            if (!invitationId) {
                return res.status(400).json({
                    message: "Invitation ID is required",
                    code: "INVALID_REQUEST"
                });
            }
            const invitation = await db.select().from(invitations).where((0, drizzle_orm_15.eq)(invitations.id, invitationId)).limit(1);
            if (invitation.length === 0) {
                return res.status(404).json({
                    message: "Invitation not found",
                    code: "INVITATION_NOT_FOUND"
                });
            }
            const invitationData = invitation[0];
            if (currentUser.role === "manager") {
                const managerOrgs = await db.select({ organizationId: userOrganizations.organizationId }).from(userOrganizations).where((0, drizzle_orm_15.and)((0, drizzle_orm_15.eq)(userOrganizations.userId, currentUser.id), (0, drizzle_orm_15.eq)(userOrganizations.isActive, true)));
                const orgIds = managerOrgs.map((org) => org.organizationId);
                if (!invitationData.organizationId || !orgIds.includes(invitationData.organizationId)) {
                    return res.status(403).json({
                        message: "You can only delete invitations from your organizations",
                        code: "INSUFFICIENT_PERMISSIONS"
                    });
                }
            }
            await db.delete(invitations).where((0, drizzle_orm_15.eq)(invitations.id, invitationId));
            res.json({
                message: "Invitation deleted successfully",
                invitationId
            });
        }
        catch (error) {
            console.error("\u274C Error deleting invitation:", error);
            res.status(500).json({
                error: "Internal server error",
                message: "Failed to delete invitation"
            });
        }
    });
}
// server/api/buildings.ts
init_db();
init_schema();
const drizzle_orm_16 = require("drizzle-orm");
const crypto_6 = __importDefault(require("crypto"));
function registerBuildingRoutes(app2) {
    app2.get("/api/buildings", requireAuth, async (req, res) => {
        try {
            const user = req.user;
            if (!user) {
                return res.status(401).json({
                    message: "Authentication required",
                    code: "AUTH_REQUIRED"
                });
            }
            if (![
                "admin",
                "manager",
                "demo_manager",
                "demo_tenant",
                "demo_resident",
                "tenant",
                "resident"
            ].includes(user.role)) {
                return res.status(403).json({
                    message: "Access denied. Insufficient permissions.",
                    code: "INSUFFICIENT_PERMISSIONS"
                });
            }
            console.log("\u{1F3E2} [Buildings API] User accessing buildings:", {
                id: user.id,
                role: user.role,
                organizations: user.organizations,
                canAccessAllOrganizations: user.canAccessAllOrganizations
            });
            let buildingsQuery;
            if (user.role === "admin") {
                console.log(`\u{1F3E2} [BUILDINGS DEBUG] Admin user detected - granting access to ALL buildings`);
                buildingsQuery = db.select({
                    id: buildings.id,
                    name: buildings.name,
                    address: buildings.address,
                    city: buildings.city,
                    province: buildings.province,
                    postalCode: buildings.postalCode,
                    buildingType: buildings.buildingType,
                    yearBuilt: buildings.yearBuilt,
                    totalUnits: buildings.totalUnits,
                    totalFloors: buildings.totalFloors,
                    parkingSpaces: buildings.parkingSpaces,
                    storageSpaces: buildings.storageSpaces,
                    organizationId: buildings.organizationId,
                    isActive: buildings.isActive,
                    createdAt: buildings.createdAt,
                    organizationName: organizations.name
                }).from(buildings).innerJoin(organizations, (0, drizzle_orm_16.eq)(buildings.organizationId, organizations.id)).where((0, drizzle_orm_16.eq)(buildings.isActive, true)).orderBy(organizations.name, buildings.name);
            }
            else {
                console.log(`\u{1F50D} [BUILDINGS DEBUG] Non-admin user (${user.role}) - checking organization access. User ${user.id} organizations:`, user.organizations);
                if (!user.organizations || user.organizations.length === 0) {
                    console.log(`\u{1F50D} [BUILDINGS DEBUG] User ${user.id} has no organizations, checking residence access...`);
                    if (["tenant", "resident", "demo_tenant", "demo_resident"].includes(user.role)) {
                        const userResidencesList = await db.select({
                            buildingId: residences.buildingId
                        }).from(userResidences).innerJoin(residences, (0, drizzle_orm_16.eq)(userResidences.residenceId, residences.id)).where((0, drizzle_orm_16.and)((0, drizzle_orm_16.eq)(userResidences.userId, user.id), (0, drizzle_orm_16.eq)(userResidences.isActive, true)));
                        console.log(`\u{1F50D} [BUILDINGS DEBUG] Found ${userResidencesList.length} residences for user ${user.id}`);
                        if (userResidencesList.length === 0) {
                            return res.json([]);
                        }
                        const accessibleBuildingIds = [
                            ...new Set(userResidencesList.map((ur) => ur.buildingId))
                        ];
                        console.log(`\u{1F50D} [BUILDINGS DEBUG] Accessible building IDs:`, accessibleBuildingIds);
                        buildingsQuery = db.select({
                            id: buildings.id,
                            name: buildings.name,
                            address: buildings.address,
                            city: buildings.city,
                            province: buildings.province,
                            postalCode: buildings.postalCode,
                            buildingType: buildings.buildingType,
                            yearBuilt: buildings.yearBuilt,
                            totalUnits: buildings.totalUnits,
                            totalFloors: buildings.totalFloors,
                            parkingSpaces: buildings.parkingSpaces,
                            storageSpaces: buildings.storageSpaces,
                            organizationId: buildings.organizationId,
                            isActive: buildings.isActive,
                            createdAt: buildings.createdAt,
                            organizationName: organizations.name
                        }).from(buildings).innerJoin(organizations, (0, drizzle_orm_16.eq)(buildings.organizationId, organizations.id)).where((0, drizzle_orm_16.and)((0, drizzle_orm_16.eq)(buildings.isActive, true), (0, drizzle_orm_16.inArray)(buildings.id, accessibleBuildingIds))).orderBy(organizations.name, buildings.name);
                    }
                    else {
                        console.log(`\u{1F50D} [BUILDINGS DEBUG] Manager/other role user ${user.id} has no organizations - returning empty result`);
                        return res.json([]);
                    }
                }
                else {
                    buildingsQuery = db.select({
                        id: buildings.id,
                        name: buildings.name,
                        address: buildings.address,
                        city: buildings.city,
                        province: buildings.province,
                        postalCode: buildings.postalCode,
                        buildingType: buildings.buildingType,
                        yearBuilt: buildings.yearBuilt,
                        totalUnits: buildings.totalUnits,
                        totalFloors: buildings.totalFloors,
                        parkingSpaces: buildings.parkingSpaces,
                        storageSpaces: buildings.storageSpaces,
                        organizationId: buildings.organizationId,
                        isActive: buildings.isActive,
                        createdAt: buildings.createdAt,
                        organizationName: organizations.name
                    }).from(buildings).innerJoin(organizations, (0, drizzle_orm_16.eq)(buildings.organizationId, organizations.id)).where((0, drizzle_orm_16.and)((0, drizzle_orm_16.eq)(buildings.isActive, true), (0, drizzle_orm_16.inArray)(buildings.organizationId, user.organizations))).orderBy(organizations.name, buildings.name);
                }
            }
            const result = await buildingsQuery;
            res.json(result);
        }
        catch (error) {
            console.error("\u274C Error fetching buildings:", error);
            res.status(500).json({
                _error: "Internal server error",
                message: "Failed to fetch buildings"
            });
        }
    });
    app2.get("/api/manager/buildings", async (req, res) => {
        if (!req.session?.userId && !req.session?.user) {
            return res.status(401).json({
                message: "Authentication required",
                code: "AUTH_REQUIRED"
            });
        }
        try {
            let currentUser = req.user || req.session?.user;
            if (!currentUser && req.session?.userId) {
                const { storage: storage3 } = await Promise.resolve().then(() => (init_storage(), storage_exports));
                currentUser = await storage3.getUser(req.session.userId);
            }
            if (!currentUser) {
                return res.status(401).json({
                    message: "User not found",
                    code: "USER_NOT_FOUND"
                });
            }
            console.log(`\u{1F4CA} Fetching buildings for user ${currentUser.id} with role ${currentUser.role}`);
            const accessibleBuildings = [];
            const buildingIds = /* @__PURE__ */ new Set();
            const userOrgs = await db.select({
                organizationId: userOrganizations.organizationId,
                organizationName: organizations.name,
                canAccessAllOrganizations: userOrganizations.canAccessAllOrganizations
            }).from(userOrganizations).innerJoin(organizations, (0, drizzle_orm_16.eq)(userOrganizations.organizationId, organizations.id)).where((0, drizzle_orm_16.and)((0, drizzle_orm_16.eq)(userOrganizations.userId, currentUser.id), (0, drizzle_orm_16.eq)(userOrganizations.isActive, true)));
            const hasGlobalAccess = currentUser.role === "admin" || userOrgs.some((org) => org.organizationName === "Koveo" || org.canAccessAllOrganizations);
            if (hasGlobalAccess) {
                console.log(`\u{1F31F} Admin user or user with global access detected - granting access to ALL buildings`);
                const allBuildings = await db.select({
                    id: buildings.id,
                    name: buildings.name,
                    address: buildings.address,
                    city: buildings.city,
                    province: buildings.province,
                    postalCode: buildings.postalCode,
                    buildingType: buildings.buildingType,
                    yearBuilt: buildings.yearBuilt,
                    totalUnits: buildings.totalUnits,
                    totalFloors: buildings.totalFloors,
                    parkingSpaces: buildings.parkingSpaces,
                    storageSpaces: buildings.storageSpaces,
                    amenities: buildings.amenities,
                    managementCompany: buildings.managementCompany,
                    organizationId: buildings.organizationId,
                    isActive: buildings.isActive,
                    createdAt: buildings.createdAt,
                    updatedAt: buildings.updatedAt,
                    organizationName: organizations.name,
                    organizationType: organizations.type
                }).from(buildings).innerJoin(organizations, (0, drizzle_orm_16.eq)(buildings.organizationId, organizations.id)).where((0, drizzle_orm_16.eq)(buildings.isActive, true)).orderBy(organizations.name, buildings.name);
                allBuildings.forEach((building) => {
                    if (!buildingIds.has(building.id)) {
                        buildingIds.add(building.id);
                        accessibleBuildings.push({
                            ...building,
                            accessType: "koveo-global"
                            // Special access type for Koveo users
                        });
                    }
                });
            }
            else {
                if (currentUser.role === "admin" || currentUser.role === "manager") {
                    if (userOrgs.length > 0) {
                        const orgIds = userOrgs.map((uo) => uo.organizationId);
                        const orgBuildings = await db.select({
                            id: buildings.id,
                            name: buildings.name,
                            address: buildings.address,
                            city: buildings.city,
                            province: buildings.province,
                            postalCode: buildings.postalCode,
                            buildingType: buildings.buildingType,
                            yearBuilt: buildings.yearBuilt,
                            totalUnits: buildings.totalUnits,
                            totalFloors: buildings.totalFloors,
                            parkingSpaces: buildings.parkingSpaces,
                            storageSpaces: buildings.storageSpaces,
                            amenities: buildings.amenities,
                            managementCompany: buildings.managementCompany,
                            organizationId: buildings.organizationId,
                            isActive: buildings.isActive,
                            createdAt: buildings.createdAt,
                            updatedAt: buildings.updatedAt,
                            organizationName: organizations.name,
                            organizationType: organizations.type
                        }).from(buildings).innerJoin(organizations, (0, drizzle_orm_16.eq)(buildings.organizationId, organizations.id)).where((0, drizzle_orm_16.and)((0, drizzle_orm_16.inArray)(buildings.organizationId, orgIds), (0, drizzle_orm_16.eq)(buildings.isActive, true)));
                        orgBuildings.forEach((building) => {
                            if (!buildingIds.has(building.id)) {
                                buildingIds.add(building.id);
                                accessibleBuildings.push({
                                    ...building,
                                    accessType: "organization"
                                    // Track how user has access
                                });
                            }
                        });
                    }
                }
            }
            const userResidenceRecords = await db.select({
                residenceId: userResidences.residenceId,
                relationshipType: userResidences.relationshipType
            }).from(userResidences).where((0, drizzle_orm_16.and)((0, drizzle_orm_16.eq)(userResidences.userId, currentUser.id), (0, drizzle_orm_16.eq)(userResidences.isActive, true)));
            if (userResidenceRecords.length > 0) {
                const residenceIds = userResidenceRecords.map((ur) => ur.residenceId);
                const residenceBuildings = await db.select({
                    id: buildings.id,
                    name: buildings.name,
                    address: buildings.address,
                    city: buildings.city,
                    province: buildings.province,
                    postalCode: buildings.postalCode,
                    buildingType: buildings.buildingType,
                    yearBuilt: buildings.yearBuilt,
                    totalUnits: buildings.totalUnits,
                    totalFloors: buildings.totalFloors,
                    parkingSpaces: buildings.parkingSpaces,
                    storageSpaces: buildings.storageSpaces,
                    amenities: buildings.amenities,
                    managementCompany: buildings.managementCompany,
                    organizationId: buildings.organizationId,
                    isActive: buildings.isActive,
                    createdAt: buildings.createdAt,
                    updatedAt: buildings.updatedAt,
                    organizationName: organizations.name,
                    organizationType: organizations.type,
                    residenceId: residences.id,
                    unitNumber: residences.unitNumber,
                    floor: residences.floor
                }).from(residences).innerJoin(buildings, (0, drizzle_orm_16.eq)(residences.buildingId, buildings.id)).innerJoin(organizations, (0, drizzle_orm_16.eq)(buildings.organizationId, organizations.id)).where((0, drizzle_orm_16.and)((0, drizzle_orm_16.inArray)(residences.id, residenceIds), (0, drizzle_orm_16.eq)(buildings.isActive, true)));
                residenceBuildings.forEach((building) => {
                    if (!buildingIds.has(building.id)) {
                        buildingIds.add(building.id);
                        accessibleBuildings.push({
                            id: building.id,
                            name: building.name,
                            address: building.address,
                            city: building.city,
                            province: building.province,
                            postalCode: building.postalCode,
                            buildingType: building.buildingType,
                            yearBuilt: building.yearBuilt,
                            totalUnits: building.totalUnits,
                            totalFloors: building.totalFloors,
                            parkingSpaces: building.parkingSpaces,
                            storageSpaces: building.storageSpaces,
                            amenities: building.amenities,
                            managementCompany: building.managementCompany,
                            organizationId: building.organizationId,
                            isActive: building.isActive,
                            createdAt: building.createdAt,
                            updatedAt: building.updatedAt,
                            organizationName: building.organizationName,
                            organizationType: building.organizationType,
                            accessType: "residence",
                            // Track how user has access
                            userResidence: {
                                residenceId: building.residenceId,
                                unitNumber: building.unitNumber,
                                floor: building.floor
                            }
                        });
                    }
                    else {
                        const existingBuilding = accessibleBuildings.find((b) => b.id === building.id);
                        if (existingBuilding && !existingBuilding.userResidence) {
                            existingBuilding.userResidence = {
                                residenceId: building.residenceId,
                                unitNumber: building.unitNumber,
                                floor: building.floor
                            };
                            if (existingBuilding.accessType === "organization") {
                                existingBuilding.accessType = "both";
                            }
                        }
                    }
                });
            }
            const buildingsWithStats = await Promise.all(accessibleBuildings.map(async (building) => {
                const residenceCount = await db.select({ count: (0, drizzle_orm_16.sql) `count(*)::int` }).from(residences).where((0, drizzle_orm_16.and)((0, drizzle_orm_16.eq)(residences.buildingId, building.id), (0, drizzle_orm_16.eq)(residences.isActive, true)));
                const occupiedUnits = residenceCount[0]?.count || 0;
                const occupancyRate = building.totalUnits > 0 ? Math.round(occupiedUnits / building.totalUnits * 100) : 0;
                return {
                    ...building,
                    statistics: {
                        totalUnits: building.totalUnits,
                        occupiedUnits,
                        occupancyRate,
                        vacantUnits: building.totalUnits - occupiedUnits
                    }
                };
            }));
            buildingsWithStats.sort((a, b) => a.name.localeCompare(b.name));
            console.log(`\u2705 Found ${buildingsWithStats.length} accessible buildings for user ${currentUser.id}`);
            res.json({
                buildings: buildingsWithStats,
                meta: {
                    total: buildingsWithStats.length,
                    userRole: currentUser.role,
                    userId: currentUser.id
                }
            });
        }
        catch (error) {
            console.error("\u274C Error fetching manager buildings:", error);
            res.status(500).json({
                _error: "Internal server error",
                message: "Failed to fetch buildings"
            });
        }
    });
    app2.get("/api/manager/buildings/:id", requireAuth, async (req, res) => {
        try {
            const currentUser = req.user;
            const buildingId = req.params.id;
            if (!currentUser) {
                return res.status(401).json({
                    _error: "Unauthorized",
                    message: "Authentication required"
                });
            }
            console.log(`\u{1F4CA} Fetching building ${buildingId} for user ${currentUser.id} with role ${currentUser.role}`);
            let hasAccess = false;
            let accessType = "";
            const userOrgs = await db.select({
                organizationId: userOrganizations.organizationId,
                organizationName: organizations.name,
                canAccessAllOrganizations: userOrganizations.canAccessAllOrganizations
            }).from(userOrganizations).innerJoin(organizations, (0, drizzle_orm_16.eq)(userOrganizations.organizationId, organizations.id)).where((0, drizzle_orm_16.and)((0, drizzle_orm_16.eq)(userOrganizations.userId, currentUser.id), (0, drizzle_orm_16.eq)(userOrganizations.isActive, true)));
            const hasGlobalAccess = currentUser.role === "admin" || userOrgs.some((org) => org.organizationName === "Koveo" || org.canAccessAllOrganizations);
            if (hasGlobalAccess) {
                hasAccess = true;
                accessType = "global";
            }
            else {
                if (currentUser.role === "admin" || currentUser.role === "manager") {
                    if (userOrgs.length > 0) {
                        const orgIds = userOrgs.map((uo) => uo.organizationId);
                        const buildingOrg = await db.select({ id: buildings.id }).from(buildings).where((0, drizzle_orm_16.and)((0, drizzle_orm_16.eq)(buildings.id, buildingId), (0, drizzle_orm_16.inArray)(buildings.organizationId, orgIds), (0, drizzle_orm_16.eq)(buildings.isActive, true)));
                        if (buildingOrg.length > 0) {
                            hasAccess = true;
                            accessType = "organization";
                        }
                    }
                }
            }
            if (!hasAccess) {
                const userResidenceAccess = await db.select({ residenceId: userResidences.residenceId }).from(userResidences).innerJoin(residences, (0, drizzle_orm_16.eq)(userResidences.residenceId, residences.id)).where((0, drizzle_orm_16.and)((0, drizzle_orm_16.eq)(userResidences.userId, currentUser.id), (0, drizzle_orm_16.eq)(residences.buildingId, buildingId), (0, drizzle_orm_16.eq)(userResidences.isActive, true)));
                if (userResidenceAccess.length > 0) {
                    hasAccess = true;
                    accessType = accessType ? "both" : "residence";
                }
            }
            if (!hasAccess) {
                return res.status(403).json({
                    _error: "Forbidden",
                    message: "You do not have access to this building"
                });
            }
            const buildingData = await db.select({
                id: buildings.id,
                name: buildings.name,
                address: buildings.address,
                city: buildings.city,
                province: buildings.province,
                postalCode: buildings.postalCode,
                buildingType: buildings.buildingType,
                yearBuilt: buildings.yearBuilt,
                totalUnits: buildings.totalUnits,
                totalFloors: buildings.totalFloors,
                parkingSpaces: buildings.parkingSpaces,
                storageSpaces: buildings.storageSpaces,
                amenities: buildings.amenities,
                managementCompany: buildings.managementCompany,
                organizationId: buildings.organizationId,
                isActive: buildings.isActive,
                createdAt: buildings.createdAt,
                updatedAt: buildings.updatedAt,
                organizationName: organizations.name,
                organizationType: organizations.type,
                organizationAddress: organizations.address,
                organizationCity: organizations.city,
                organizationPhone: organizations.phone,
                organizationEmail: organizations.email
            }).from(buildings).innerJoin(organizations, (0, drizzle_orm_16.eq)(buildings.organizationId, organizations.id)).where((0, drizzle_orm_16.eq)(buildings.id, buildingId));
            if (buildingData.length === 0) {
                return res.status(404).json({
                    _error: "Not found",
                    message: "Building not found"
                });
            }
            const building = buildingData[0];
            const buildingResidences = await db.select({
                id: residences.id,
                unitNumber: residences.unitNumber,
                floor: residences.floor,
                squareFootage: residences.squareFootage,
                bedrooms: residences.bedrooms,
                bathrooms: residences.bathrooms,
                balcony: residences.balcony,
                parkingSpaceNumbers: residences.parkingSpaceNumbers,
                storageSpaceNumbers: residences.storageSpaceNumbers,
                monthlyFees: residences.monthlyFees,
                isActive: residences.isActive
            }).from(residences).where((0, drizzle_orm_16.and)((0, drizzle_orm_16.eq)(residences.buildingId, buildingId), (0, drizzle_orm_16.eq)(residences.isActive, true)));
            let userResidencesInBuilding = [];
            const userResidenceRecords = await db.select({
                residenceId: userResidences.residenceId,
                relationshipType: userResidences.relationshipType,
                startDate: userResidences.startDate,
                endDate: userResidences.endDate
            }).from(userResidences).innerJoin(residences, (0, drizzle_orm_16.eq)(userResidences.residenceId, residences.id)).where((0, drizzle_orm_16.and)((0, drizzle_orm_16.eq)(userResidences.userId, currentUser.id), (0, drizzle_orm_16.eq)(residences.buildingId, buildingId), (0, drizzle_orm_16.eq)(userResidences.isActive, true)));
            if (userResidenceRecords.length > 0) {
                userResidencesInBuilding = userResidenceRecords.map((ur) => {
                    const residence = buildingResidences.find((r) => r.id === ur.residenceId);
                    return {
                        ...residence,
                        relationshipType: ur.relationshipType,
                        startDate: ur.startDate,
                        endDate: ur.endDate
                    };
                });
            }
            const occupiedUnits = buildingResidences.length;
            const occupancyRate = building.totalUnits > 0 ? Math.round(occupiedUnits / building.totalUnits * 100) : 0;
            res.json({
                ...building,
                accessType,
                statistics: {
                    totalUnits: building.totalUnits,
                    occupiedUnits,
                    occupancyRate,
                    vacantUnits: building.totalUnits - occupiedUnits,
                    totalResidences: buildingResidences.length
                },
                userResidences: userResidencesInBuilding,
                // Only include full residence list for managers/admins
                residences: currentUser.role === "admin" || currentUser.role === "manager" ? buildingResidences : void 0
            });
        }
        catch (error) {
            console.error("\u274C Error fetching building details:", error);
            res.status(500).json({
                _error: "Internal server error",
                message: "Failed to fetch building details"
            });
        }
    });
    app2.post("/api/admin/buildings", requireAuth, async (req, res) => {
        try {
            const currentUser = req.user || req.session?.user;
            if (!currentUser) {
                return res.status(401).json({
                    message: "Authentication required",
                    code: "AUTH_REQUIRED"
                });
            }
            if (currentUser.role !== "admin") {
                return res.status(403).json({
                    message: "Admin access required",
                    code: "ADMIN_REQUIRED"
                });
            }
            const buildingData = req.body;
            if (!buildingData.name || !buildingData.organizationId) {
                return res.status(400).json({
                    _error: "Validation error",
                    message: "Building name and organization are required"
                });
            }
            const buildingId = crypto_6.default.randomUUID();
            const newBuilding = await db.insert(buildings).values({
                id: buildingId,
                name: buildingData.name,
                address: buildingData.address || "",
                city: buildingData.city || "",
                province: buildingData.province || "QC",
                postalCode: buildingData.postalCode || "",
                buildingType: buildingData.buildingType || "condo",
                yearBuilt: buildingData.yearBuilt,
                totalUnits: buildingData.totalUnits || 0,
                totalFloors: buildingData.totalFloors,
                parkingSpaces: buildingData.parkingSpaces,
                storageSpaces: buildingData.storageSpaces,
                amenities: buildingData.amenities ? JSON.stringify(buildingData.amenities) : null,
                managementCompany: buildingData.managementCompany,
                organizationId: buildingData.organizationId,
                isActive: true,
                createdAt: /* @__PURE__ */ new Date(),
                updatedAt: /* @__PURE__ */ new Date()
            }).returning();
            console.log("Building created - storage hierarchy will be created on first document upload");
            if (buildingData.totalUnits && buildingData.totalUnits > 0 && buildingData.totalUnits <= 300) {
                try {
                    const totalUnits = buildingData.totalUnits;
                    const totalFloors = buildingData.totalFloors || 1;
                    const unitsPerFloor = Math.ceil(totalUnits / totalFloors);
                    const residencesToCreate = [];
                    for (let unit = 1; unit <= totalUnits; unit++) {
                        const floor = Math.ceil(unit / unitsPerFloor);
                        const unitOnFloor = (unit - 1) % unitsPerFloor + 1;
                        const unitNumber = `${floor}${unitOnFloor.toString().padStart(2, "0")}`;
                        residencesToCreate.push({
                            buildingId,
                            unitNumber,
                            floor,
                            isActive: true
                        });
                    }
                    const createdResidences = await db.insert(residences).values(residencesToCreate).returning();
                    console.log(`\u2705 Auto-generated ${createdResidences.length} residences for building ${buildingId}`);
                }
                catch (___residenceError) {
                    console.error("\u26A0\uFE0F Error auto-generating residences:", ___residenceError);
                }
            }
            res.status(201).json({
                message: "Building created successfully",
                building: newBuilding[0]
            });
        }
        catch (error) {
            console.error("\u274C Error creating building:", error);
            res.status(500).json({
                _error: "Internal server error",
                message: "Failed to create building"
            });
        }
    });
    app2.get("/api/buildings/:id/residences-for-deletion", requireAuth, async (req, res) => {
        try {
            const user = req.user;
            const buildingId = req.params.id;
            const maxToSelect = parseInt(req.query.maxToSelect) || 10;
            if (!user) {
                return res.status(401).json({ message: "Authentication required" });
            }
            if (user.role !== "admin") {
                return res.status(403).json({ message: "Only admins can access residence deletion options" });
            }
            const { getResidencesForSelection: getResidencesForSelection2 } = await Promise.resolve().then(() => (init_operations2(), operations_exports));
            const residencesToSelect = await getResidencesForSelection2(buildingId, maxToSelect);
            res.json({
                residences: residencesToSelect,
                message: `Found ${residencesToSelect.length} residences available for deletion`
            });
        }
        catch (error) {
            console.error("\u274C Error fetching residences for deletion:", error);
            res.status(500).json({ message: "Failed to fetch residences for deletion" });
        }
    });
    app2.delete("/api/buildings/:id/residences", requireAuth, async (req, res) => {
        try {
            const user = req.user;
            const buildingId = req.params.id;
            const { residenceIds } = req.body;
            if (!user) {
                return res.status(401).json({ message: "Authentication required" });
            }
            if (user.role !== "admin") {
                return res.status(403).json({ message: "Only admins can delete residences" });
            }
            if (!Array.isArray(residenceIds) || residenceIds.length === 0) {
                return res.status(400).json({ message: "residenceIds array is required" });
            }
            const { deleteSelectedResidences: deleteSelectedResidences2 } = await Promise.resolve().then(() => (init_operations2(), operations_exports));
            const result = await deleteSelectedResidences2(buildingId, residenceIds, user.role);
            res.json({
                success: true,
                deletedCount: result.deletedCount,
                documentsDeleted: result.documentsDeleted,
                message: `Successfully deleted ${result.deletedCount} residences and ${result.documentsDeleted} associated documents`
            });
        }
        catch (error) {
            console.error("\u274C Error deleting residences:", error);
            res.status(500).json({ message: error.message || "Failed to delete residences" });
        }
    });
    app2.put("/api/admin/buildings/:id", requireAuth, async (req, res) => {
        try {
            const currentUser = req.user || req.session?.user;
            if (!currentUser) {
                return res.status(401).json({
                    message: "Authentication required",
                    code: "AUTH_REQUIRED"
                });
            }
            if (currentUser.role !== "admin" && currentUser.role !== "manager") {
                return res.status(403).json({
                    message: "Admin or Manager access required",
                    code: "ADMIN_MANAGER_REQUIRED"
                });
            }
            const buildingId = req.params.id;
            const buildingData = req.body;
            if (!buildingData.name || !buildingData.organizationId) {
                return res.status(400).json({
                    _error: "Validation error",
                    message: "Building name and organization are required"
                });
            }
            const existingBuilding = await db.select().from(buildings).where((0, drizzle_orm_16.eq)(buildings.id, buildingId)).limit(1);
            if (existingBuilding.length === 0) {
                return res.status(404).json({
                    _error: "Not found",
                    message: "Building not found"
                });
            }
            const currentResidences = await db.select({ count: (0, drizzle_orm_16.sql) `count(*)::int` }).from(residences).where((0, drizzle_orm_16.and)((0, drizzle_orm_16.eq)(residences.buildingId, buildingId), (0, drizzle_orm_16.eq)(residences.isActive, true)));
            const currentResidenceCount = currentResidences[0]?.count || 0;
            const newTotalUnits = buildingData.totalUnits || 0;
            const previousTotalUnits = existingBuilding[0].totalUnits || 0;
            console.log(`\u{1F504} Building ${buildingId}: ${previousTotalUnits} \u2192 ${newTotalUnits} units (currently has ${currentResidenceCount} active residences)`);
            const updatedBuilding = await db.update(buildings).set({
                name: buildingData.name,
                address: buildingData.address || "",
                city: buildingData.city || "",
                province: buildingData.province || "QC",
                postalCode: buildingData.postalCode || "",
                buildingType: buildingData.buildingType || "condo",
                yearBuilt: buildingData.yearBuilt,
                totalUnits: newTotalUnits,
                totalFloors: buildingData.totalFloors,
                parkingSpaces: buildingData.parkingSpaces,
                storageSpaces: buildingData.storageSpaces,
                amenities: buildingData.amenities ? JSON.stringify(buildingData.amenities) : null,
                managementCompany: buildingData.managementCompany,
                organizationId: buildingData.organizationId,
                updatedAt: /* @__PURE__ */ new Date()
            }).where((0, drizzle_orm_16.eq)(buildings.id, buildingId)).returning();
            if (newTotalUnits !== previousTotalUnits) {
                console.log(`\u{1F3E0} Building units changed from ${previousTotalUnits} to ${newTotalUnits}, adjusting residences...`);
                if (currentUser.role !== "admin") {
                    return res.status(403).json({
                        message: "Only admins can increase or decrease building residence counts",
                        code: "ADMIN_REQUIRED_FOR_RESIDENCE_CHANGES"
                    });
                }
                const { adjustResidenceCount: adjustResidenceCount2 } = await Promise.resolve().then(() => (init_operations2(), operations_exports));
                const adjustmentResult = await adjustResidenceCount2(buildingId, existingBuilding[0].organizationId, newTotalUnits, previousTotalUnits, buildingData.totalFloors || existingBuilding[0].totalFloors || 1);
                if (adjustmentResult.action === "decreased" && adjustmentResult.residencesToSelect) {
                    return res.json({
                        message: "Building updated, but residence count needs to be reduced",
                        buildingUpdated: true,
                        needsResidenceSelection: true,
                        residencesToSelect: adjustmentResult.residencesToSelect,
                        instruction: `Please select ${previousTotalUnits - newTotalUnits} residences to delete from the list provided. Use DELETE /api/buildings/${buildingId}/residences with the selected residence IDs.`
                    });
                }
            }
            res.json({
                message: "Building updated successfully",
                building: updatedBuilding[0]
            });
        }
        catch (error) {
            console.error("\u274C Error updating building:", error);
            res.status(500).json({
                _error: "Internal server error",
                message: "Failed to update building"
            });
        }
    });
    app2.delete("/api/admin/buildings/:id", requireAuth, async (req, res) => {
        try {
            const currentUser = req.user || req.session?.user;
            if (!currentUser) {
                return res.status(401).json({
                    message: "Authentication required",
                    code: "AUTH_REQUIRED"
                });
            }
            if (currentUser.role !== "admin") {
                return res.status(403).json({
                    message: "Admin access required",
                    code: "ADMIN_REQUIRED"
                });
            }
            const buildingId = req.params.id;
            const existingBuilding = await db.select().from(buildings).where((0, drizzle_orm_16.eq)(buildings.id, buildingId)).limit(1);
            if (existingBuilding.length === 0) {
                return res.status(404).json({
                    _error: "Not found",
                    message: "Building not found"
                });
            }
            await db.update(buildings).set({
                isActive: false,
                updatedAt: /* @__PURE__ */ new Date()
            }).where((0, drizzle_orm_16.eq)(buildings.id, buildingId));
            console.log("Building deleted - storage cleanup will be handled automatically");
            res.json({
                message: "Building deleted successfully"
            });
        }
        catch (error) {
            console.error("\u274C Error deleting building:", error);
            res.status(500).json({
                _error: "Internal server error",
                message: "Failed to delete building"
            });
        }
    });
    app2.get("/api/admin/buildings/:id/deletion-impact", requireAuth, async (req, res) => {
        try {
            const currentUser = req.user || req.session?.user;
            if (!currentUser) {
                return res.status(401).json({
                    message: "Authentication required",
                    code: "AUTH_REQUIRED"
                });
            }
            if (currentUser.role !== "admin") {
                return res.status(403).json({
                    message: "Admin access required",
                    code: "ADMIN_REQUIRED"
                });
            }
            const buildingId = req.params.id;
            const building = await db.select({ id: buildings.id, name: buildings.name }).from(buildings).where((0, drizzle_orm_16.and)((0, drizzle_orm_16.eq)(buildings.id, buildingId), (0, drizzle_orm_16.eq)(buildings.isActive, true))).limit(1);
            if (building.length === 0) {
                return res.status(404).json({
                    _error: "Not found",
                    message: "Building not found"
                });
            }
            const residencesCount = await db.select({ count: (0, drizzle_orm_16.sql) `count(*)` }).from(residences).where((0, drizzle_orm_16.and)((0, drizzle_orm_16.eq)(residences.buildingId, buildingId), (0, drizzle_orm_16.eq)(residences.isActive, true)));
            const documentsCount = await db.select({ count: (0, drizzle_orm_16.sql) `count(*)` }).from(documents).where((0, drizzle_orm_16.or)((0, drizzle_orm_16.eq)(documents.buildingId, buildingId), (0, drizzle_orm_16.sql) `${documents.residenceId} IN (SELECT id FROM residences WHERE building_id = ${buildingId})`));
            const potentialOrphansCount = await db.select({ count: (0, drizzle_orm_16.sql) `count(distinct ${userResidences.userId})` }).from(userResidences).innerJoin(residences, (0, drizzle_orm_16.eq)(userResidences.residenceId, residences.id)).innerJoin(users, (0, drizzle_orm_16.eq)(userResidences.userId, users.id)).where((0, drizzle_orm_16.and)((0, drizzle_orm_16.eq)(residences.buildingId, buildingId), (0, drizzle_orm_16.eq)(residences.isActive, true), (0, drizzle_orm_16.eq)(userResidences.isActive, true), (0, drizzle_orm_16.eq)(users.isActive, true)));
            const impact = {
                building: building[0],
                residences: residencesCount[0]?.count || 0,
                documents: documentsCount[0]?.count || 0,
                potentialOrphanedUsers: potentialOrphansCount[0]?.count || 0
            };
            res.json(impact);
        }
        catch (error) {
            console.error("\u274C Error analyzing deletion impact:", error);
            res.status(500).json({
                _error: "Internal server error",
                message: "Failed to analyze deletion impact"
            });
        }
    });
    app2.delete("/api/admin/buildings/:id/cascade", requireAuth, async (req, res) => {
        try {
            const currentUser = req.user || req.session?.user;
            if (!currentUser) {
                return res.status(401).json({
                    message: "Authentication required",
                    code: "AUTH_REQUIRED"
                });
            }
            if (currentUser.role !== "admin") {
                return res.status(403).json({
                    message: "Admin access required",
                    code: "ADMIN_REQUIRED"
                });
            }
            const buildingId = req.params.id;
            const building = await db.select({ id: buildings.id, name: buildings.name }).from(buildings).where((0, drizzle_orm_16.and)((0, drizzle_orm_16.eq)(buildings.id, buildingId), (0, drizzle_orm_16.eq)(buildings.isActive, true))).limit(1);
            if (building.length === 0) {
                return res.status(404).json({
                    _error: "Not found",
                    message: "Building not found"
                });
            }
            await db.transaction(async (tx) => {
                const buildingResidences = await tx.select({ id: residences.id }).from(residences).where((0, drizzle_orm_16.and)((0, drizzle_orm_16.eq)(residences.buildingId, buildingId), (0, drizzle_orm_16.eq)(residences.isActive, true)));
                const residenceIds = buildingResidences.map((r) => r.id);
                if (residenceIds.length > 0) {
                    await tx.delete(documents).where((0, drizzle_orm_16.or)((0, drizzle_orm_16.eq)(documents.buildingId, buildingId), (0, drizzle_orm_16.inArray)(documents.residenceId, residenceIds)));
                    await tx.update(userResidences).set({ isActive: false, updatedAt: /* @__PURE__ */ new Date() }).where((0, drizzle_orm_16.inArray)(userResidences.residenceId, residenceIds));
                    const orphanedUsers = await tx.select({ id: users.id }).from(users).leftJoin(userOrganizations, (0, drizzle_orm_16.and)((0, drizzle_orm_16.eq)(users.id, userOrganizations.userId), (0, drizzle_orm_16.eq)(userOrganizations.isActive, true))).leftJoin(userResidences, (0, drizzle_orm_16.and)((0, drizzle_orm_16.eq)(users.id, userResidences.userId), (0, drizzle_orm_16.eq)(userResidences.isActive, true))).where((0, drizzle_orm_16.and)((0, drizzle_orm_16.eq)(users.isActive, true), (0, drizzle_orm_16.isNull)(userOrganizations.userId), (0, drizzle_orm_16.isNull)(userResidences.userId)));
                    if (orphanedUsers.length > 0) {
                        const orphanedUserIds = orphanedUsers.map((u) => u.id);
                        await tx.update(users).set({ isActive: false, updatedAt: /* @__PURE__ */ new Date() }).where((0, drizzle_orm_16.inArray)(users.id, orphanedUserIds));
                    }
                    await tx.update(residences).set({ isActive: false, updatedAt: /* @__PURE__ */ new Date() }).where((0, drizzle_orm_16.inArray)(residences.id, residenceIds));
                }
                else {
                    await tx.delete(documents).where((0, drizzle_orm_16.eq)(documents.buildingId, buildingId));
                }
                await tx.update(buildings).set({ isActive: false, updatedAt: /* @__PURE__ */ new Date() }).where((0, drizzle_orm_16.eq)(buildings.id, buildingId));
            });
            const buildingOrg = await db.select({ organizationId: buildings.organizationId }).from(buildings).where((0, drizzle_orm_16.eq)(buildings.id, buildingId)).limit(1);
            if (buildingOrg.length > 0) {
                console.log("Building deleted - storage cleanup will be handled automatically");
            }
            res.json({
                message: "Building and related entities deleted successfully",
                deletedBuilding: building[0].name
            });
        }
        catch (error) {
            console.error("\u274C Error during cascade delete:", error);
            res.status(500).json({
                _error: "Internal server error",
                message: "Failed to delete building and related entities"
            });
        }
    });
}
// server/api/documents.ts
init_storage();
init_documents();
init_db();
const zod_11 = require("zod");
const multer_1 = __importDefault(require("multer"));
const path_3 = __importDefault(require("path"));
const fs_2 = __importDefault(require("fs"));
const crypto_7 = __importDefault(require("crypto"));
const uuid_1 = require("uuid");
const drizzle_orm_17 = require("drizzle-orm");
var upload = (0, multer_1.default)({
    dest: "/tmp/uploads/",
    limits: {
        fileSize: 50 * 1024 * 1024
        // 50MB limit
    },
    fileFilter: (req, file, cb) => {
        const allowedTypes = /\.(pdf|doc|docx|xls|xlsx|ppt|pptx|txt|jpg|jpeg|png|gif|bmp|tiff)$/i;
        if (allowedTypes.test(file.originalname)) {
            cb(null, true);
        }
        else {
            cb(new Error("Invalid file type. Only documents and images are allowed."));
        }
    }
});
var DOCUMENT_CATEGORIES = [
    "bylaw",
    "financial",
    "maintenance",
    "legal",
    "meeting_minutes",
    "insurance",
    "contracts",
    "permits",
    "inspection",
    "lease",
    "correspondence",
    "utilities",
    "other"
];
var createDocumentSchema = insertDocumentSchema.extend({
    category: zod_11.z.enum(DOCUMENT_CATEGORIES),
    title: zod_11.z.string().min(1).max(255),
    description: zod_11.z.string().optional(),
    isVisibleToTenants: zod_11.z.boolean().default(false)
});
var createBuildingDocumentSchema = insertDocumentSchema.extend({
    type: zod_11.z.enum(DOCUMENT_CATEGORIES),
    title: zod_11.z.string().min(1).max(255).optional(),
    description: zod_11.z.string().optional()
});
var createResidentDocumentSchema = insertDocumentSchema.extend({
    type: zod_11.z.enum(DOCUMENT_CATEGORIES),
    title: zod_11.z.string().min(1).max(255).optional(),
    description: zod_11.z.string().optional()
});
var uploadDocumentRecordSchema = zod_11.z.object({
    name: zod_11.z.string().min(1).max(255),
    description: zod_11.z.string().optional(),
    documentType: zod_11.z.enum(DOCUMENT_CATEGORIES),
    isVisibleToTenants: zod_11.z.boolean().default(false),
    residenceId: zod_11.z.string().uuid().optional(),
    buildingId: zod_11.z.string().uuid().optional(),
    attachedToType: zod_11.z.string().optional(),
    attachedToId: zod_11.z.string().optional()
});
function registerDocumentRoutes(app2) {
    console.log(`[${( /* @__PURE__ */new Date()).toISOString()}] \u{1F527} Registering document routes...`);
    const errorLog = [];
    const testDatabaseConnection = async () => {
        try {
            const result = await db.execute((0, drizzle_orm_17.sql) `SELECT 1 as test`);
            return {
                success: true,
                result: result.rows[0],
                url_truncated: process.env.DATABASE_URL?.substring(0, 50) + "..."
            };
        }
        catch (error) {
            return {
                success: false,
                error: error.message,
                url_truncated: process.env.DATABASE_URL?.substring(0, 50) + "..."
            };
        }
    };
    const testSampleQuery = async () => {
        try {
            const result = await db.execute((0, drizzle_orm_17.sql) `
        SELECT COUNT(*) as document_count 
        FROM documents 
        LIMIT 1
      `);
            return {
                success: true,
                document_count: result.rows[0]?.document_count || 0
            };
        }
        catch (error) {
            return {
                success: false,
                error: error.message,
                stack: error.stack?.substring(0, 200) + "..."
            };
        }
    };
    const checkEnumValues = async () => {
        try {
            const result = await db.execute((0, drizzle_orm_17.sql) `
        SELECT enumlabel 
        FROM pg_enum 
        WHERE enumtypid = (
          SELECT oid 
          FROM pg_type 
          WHERE typname = 'user_role'
        )
        ORDER BY enumsortorder
      `);
            return {
                success: true,
                production_enum_values: result.rows.map((row) => row.enumlabel)
            };
        }
        catch (error) {
            return {
                success: false,
                error: error.message
            };
        }
    };
    const checkUserOrganizationLinks = async () => {
        try {
            const userCount = await db.execute((0, drizzle_orm_17.sql) `SELECT COUNT(*) as total FROM users WHERE is_active = true`);
            const orgCount = await db.execute((0, drizzle_orm_17.sql) `SELECT COUNT(*) as total FROM organizations WHERE is_active = true`);
            const linkCount = await db.execute((0, drizzle_orm_17.sql) `SELECT COUNT(*) as total FROM user_organizations WHERE is_active = true`);
            const orphanUsers = await db.execute((0, drizzle_orm_17.sql) `
        SELECT u.id, u.email, u.role 
        FROM users u 
        LEFT JOIN user_organizations uo ON u.id = uo.user_id AND uo.is_active = true
        WHERE u.is_active = true AND uo.user_id IS NULL
        LIMIT 10
      `);
            const testUser = await db.execute((0, drizzle_orm_17.sql) `
        SELECT u.email, u.role, uo.organization_id, o.name as org_name
        FROM users u
        LEFT JOIN user_organizations uo ON u.id = uo.user_id AND uo.is_active = true  
        LEFT JOIN organizations o ON uo.organization_id = o.id
        WHERE u.id = '222f5a0d-6bc6-4f28-9f4d-32c133eed333'
      `);
            return {
                success: true,
                stats: {
                    total_users: userCount.rows[0]?.total || 0,
                    total_organizations: orgCount.rows[0]?.total || 0,
                    total_links: linkCount.rows[0]?.total || 0,
                    orphan_user_count: orphanUsers.rows.length
                },
                orphan_users: orphanUsers.rows,
                test_user_status: testUser.rows[0] || null
            };
        }
        catch (error) {
            return {
                success: false,
                error: error.message
            };
        }
    };
    app2.post("/api/documents/cleanup-enum", async (req, res) => {
        try {
            const userCheck = await db.execute((0, drizzle_orm_17.sql) `
        SELECT COUNT(*) as owner_count 
        FROM users 
        WHERE role = 'owner'
      `);
            const ownerCount = Number(userCheck.rows[0]?.owner_count) || 0;
            if (ownerCount > 0) {
                return res.status(400).json({
                    error: "Cannot remove owner role - users still assigned to it",
                    owner_count: ownerCount
                });
            }
            await db.execute((0, drizzle_orm_17.sql) `
        ALTER TYPE user_role DROP VALUE IF EXISTS 'owner'
      `);
            res.json({
                message: "Successfully removed unused owner role",
                safe_to_push_schema: true,
                timestamp: ( /* @__PURE__ */new Date()).toISOString()
            });
        }
        catch (error) {
            console.error("\u274C Error during enum cleanup:", error);
            res.status(500).json({
                error: "Enum cleanup failed",
                message: error.message,
                suggestion: "Try running npm run db:push --force instead"
            });
        }
    });
    app2.post("/api/documents/fix-user-links", async (req, res) => {
        try {
            const orphanUsers = await db.execute((0, drizzle_orm_17.sql) `
        SELECT u.id, u.email, u.role 
        FROM users u 
        LEFT JOIN user_organizations uo ON u.id = uo.user_id AND uo.is_active = true
        WHERE u.is_active = true AND uo.user_id IS NULL
      `);
            if (orphanUsers.rows.length === 0) {
                return res.json({
                    message: "All users already have organization links",
                    action_taken: "none",
                    timestamp: ( /* @__PURE__ */new Date()).toISOString()
                });
            }
            let defaultOrg = await db.execute((0, drizzle_orm_17.sql) `
        SELECT id, name FROM organizations WHERE is_active = true LIMIT 1
      `);
            let organizationId;
            let organizationName;
            if (defaultOrg.rows.length === 0) {
                organizationId = crypto_7.default.randomUUID();
                organizationName = "Default Organization";
                await db.execute((0, drizzle_orm_17.sql) `
          INSERT INTO organizations (id, name, type, address, phone, email, is_active, created_at, updated_at)
          VALUES (${organizationId}, ${organizationName}, 'condominium', '123 Main St', '514-555-0100', 'admin@koveo.ca', true, NOW(), NOW())
        `);
            }
            else {
                organizationId = defaultOrg.rows[0].id;
                organizationName = defaultOrg.rows[0].name;
            }
            const linkPromises = orphanUsers.rows.map((user) => {
                const linkId = crypto_7.default.randomUUID();
                return db.execute((0, drizzle_orm_17.sql) `
          INSERT INTO user_organizations (id, user_id, organization_id, role, is_active, created_at, updated_at)
          VALUES (${linkId}, ${user.id}, ${organizationId}, ${user.role}, true, NOW(), NOW())
        `);
            });
            await Promise.all(linkPromises);
            res.json({
                message: "Successfully linked users to organizations",
                users_linked: orphanUsers.rows.length,
                organization_id: organizationId,
                organization_name: organizationName,
                linked_users: orphanUsers.rows.map((u) => ({ id: u.id, email: u.email, role: u.role })),
                timestamp: ( /* @__PURE__ */new Date()).toISOString()
            });
        }
        catch (error) {
            console.error("\u274C Error fixing user-organization links:", error);
            res.status(500).json({
                error: "Failed to fix user-organization links",
                message: error.message,
                timestamp: ( /* @__PURE__ */new Date()).toISOString()
            });
        }
    });
    app2.post("/api/documents/fix-enum-migration", async (req, res) => {
        try {
            const enumCheck = await db.execute((0, drizzle_orm_17.sql) `
        SELECT enumlabel, enumsortorder 
        FROM pg_enum 
        WHERE enumtypid = (SELECT oid FROM pg_type WHERE typname = 'user_role')
        ORDER BY enumsortorder
      `);
            const currentEnumValues = enumCheck.rows.map((row) => row.enumlabel);
            const userRoleUsage = await db.execute((0, drizzle_orm_17.sql) `
        SELECT role, COUNT(*) as count 
        FROM users 
        GROUP BY role
      `);
            const targetEnumValues = ["admin", "manager", "tenant", "resident", "demo_manager", "demo_tenant", "demo_resident"];
            const orderMatches = JSON.stringify(currentEnumValues) === JSON.stringify(targetEnumValues);
            if (orderMatches) {
                return res.json({
                    message: "Enum values already in correct order",
                    current_values: currentEnumValues,
                    target_values: targetEnumValues,
                    migration_needed: false
                });
            }
            await db.execute((0, drizzle_orm_17.sql) `CREATE TYPE user_role_new AS ENUM ('admin', 'manager', 'tenant', 'resident', 'demo_manager', 'demo_tenant', 'demo_resident')`);
            await db.execute((0, drizzle_orm_17.sql) `
        ALTER TABLE users 
        ALTER COLUMN role TYPE user_role_new 
        USING role::text::user_role_new
      `);
            await db.execute((0, drizzle_orm_17.sql) `
        ALTER TABLE user_organizations 
        ALTER COLUMN organization_role TYPE user_role_new 
        USING organization_role::text::user_role_new
      `);
            await db.execute((0, drizzle_orm_17.sql) `
        ALTER TABLE role_permissions 
        ALTER COLUMN role TYPE user_role_new 
        USING role::text::user_role_new
      `);
            await db.execute((0, drizzle_orm_17.sql) `DROP TYPE user_role`);
            await db.execute((0, drizzle_orm_17.sql) `ALTER TYPE user_role_new RENAME TO user_role`);
            res.json({
                message: "Successfully migrated user_role enum",
                old_values: currentEnumValues,
                new_values: targetEnumValues,
                user_role_usage: userRoleUsage.rows,
                timestamp: ( /* @__PURE__ */new Date()).toISOString()
            });
        }
        catch (error) {
            console.error("\u274C Error during enum migration:", error);
            res.status(500).json({
                error: "Enum migration failed",
                message: error.message,
                suggestion: "This is a complex migration - may need manual intervention",
                timestamp: ( /* @__PURE__ */new Date()).toISOString()
            });
        }
    });
    app2.post("/api/documents/fix-invitations-dependency", async (req, res) => {
        try {
            const invitationsSchema = await db.execute((0, drizzle_orm_17.sql) `
        SELECT column_name, data_type, column_default
        FROM information_schema.columns 
        WHERE table_name = 'invitations' AND column_name = 'role'
      `);
            await db.execute((0, drizzle_orm_17.sql) `
        ALTER TABLE invitations 
        ALTER COLUMN role DROP DEFAULT
      `);
            const enumDependencies = await db.execute((0, drizzle_orm_17.sql) `
        SELECT 
          t.table_name,
          c.column_name,
          c.column_default
        FROM information_schema.tables t
        JOIN information_schema.columns c ON t.table_name = c.table_name
        WHERE c.data_type = 'USER-DEFINED' 
        AND c.udt_name = 'user_role'
        AND c.column_default IS NOT NULL
      `);
            res.json({
                message: "Successfully removed invitations table enum dependency",
                removed_defaults: invitationsSchema.rows,
                remaining_dependencies: enumDependencies.rows,
                next_step: "Run npm run db:push now, then call /api/documents/restore-invitations-default",
                timestamp: ( /* @__PURE__ */new Date()).toISOString()
            });
        }
        catch (error) {
            console.error("\u274C Error fixing invitations dependency:", error);
            res.status(500).json({
                error: "Failed to fix invitations dependency",
                message: error.message,
                timestamp: ( /* @__PURE__ */new Date()).toISOString()
            });
        }
    });
    app2.post("/api/documents/restore-invitations-default", async (req, res) => {
        try {
            await db.execute((0, drizzle_orm_17.sql) `
        ALTER TABLE invitations 
        ALTER COLUMN role SET DEFAULT 'tenant'
      `);
            const verification = await db.execute((0, drizzle_orm_17.sql) `
        SELECT column_name, column_default
        FROM information_schema.columns 
        WHERE table_name = 'invitations' AND column_name = 'role'
      `);
            res.json({
                message: "Successfully restored invitations role default to tenant",
                current_default: verification.rows[0]?.column_default,
                timestamp: ( /* @__PURE__ */new Date()).toISOString()
            });
        }
        catch (error) {
            console.error("\u274C Error restoring invitations default:", error);
            res.status(500).json({
                error: "Failed to restore invitations default",
                message: error.message,
                timestamp: ( /* @__PURE__ */new Date()).toISOString()
            });
        }
    });
    app2.post("/api/documents/migrate-owner-to-admin", async (req, res) => {
        try {
            const ownerUsersCheck = await db.execute((0, drizzle_orm_17.sql) `
        SELECT id, email, first_name, last_name 
        FROM users 
        WHERE role = 'owner'
      `);
            const ownerCount = ownerUsersCheck.rows.length;
            if (ownerCount === 0) {
                return res.json({
                    message: "No owner users found - migration not needed",
                    owner_count: 0,
                    timestamp: ( /* @__PURE__ */new Date()).toISOString()
                });
            }
            await db.execute((0, drizzle_orm_17.sql) `
        UPDATE users 
        SET role = 'admin' 
        WHERE role = 'owner'
      `);
            try {
                await db.execute((0, drizzle_orm_17.sql) `
          UPDATE user_organizations 
          SET organization_role = 'admin' 
          WHERE organization_role = 'owner'
        `);
            }
            catch (e) {
            }
            await db.execute((0, drizzle_orm_17.sql) `
        ALTER TYPE user_role RENAME TO user_role_old
      `);
            await db.execute((0, drizzle_orm_17.sql) `
        CREATE TYPE user_role AS ENUM ('admin', 'manager', 'tenant', 'resident', 'demo_manager', 'demo_tenant', 'demo_resident')
      `);
            await db.execute((0, drizzle_orm_17.sql) `
        ALTER TABLE users 
        ALTER COLUMN role TYPE user_role 
        USING role::text::user_role
      `);
            try {
                await db.execute((0, drizzle_orm_17.sql) `
          ALTER TABLE user_organizations 
          ALTER COLUMN organization_role TYPE user_role 
          USING organization_role::text::user_role
        `);
            }
            catch (e) {
            }
            try {
                await db.execute((0, drizzle_orm_17.sql) `
          ALTER TABLE role_permissions 
          ALTER COLUMN role TYPE user_role 
          USING role::text::user_role
        `);
            }
            catch (e) {
            }
            try {
                await db.execute((0, drizzle_orm_17.sql) `
          ALTER TABLE invitations 
          ALTER COLUMN role TYPE user_role 
          USING role::text::user_role
        `);
            }
            catch (e) {
            }
            await db.execute((0, drizzle_orm_17.sql) `DROP TYPE user_role_old`);
            res.json({
                message: "Successfully migrated owner users to admin",
                migrated_users: ownerUsersCheck.rows,
                owner_count: ownerCount,
                new_enum_values: ["admin", "manager", "tenant", "resident", "demo_manager", "demo_tenant", "demo_resident"],
                timestamp: ( /* @__PURE__ */new Date()).toISOString()
            });
        }
        catch (error) {
            console.error("\u274C Error migrating owner users to admin:", error);
            res.status(500).json({
                error: "Owner to admin migration failed",
                message: error.message,
                timestamp: ( /* @__PURE__ */new Date()).toISOString()
            });
        }
    });
    app2.post("/api/documents/remove-all-enum-dependencies", async (req, res) => {
        try {
            const results = [];
            try {
                await db.execute((0, drizzle_orm_17.sql) `
          ALTER TABLE users 
          ALTER COLUMN role DROP DEFAULT
        `);
                results.push("users.role default removed");
            }
            catch (e) {
                results.push(`users.role: ${e.message}`);
            }
            try {
                await db.execute((0, drizzle_orm_17.sql) `
          ALTER TABLE user_organizations 
          ALTER COLUMN organization_role DROP DEFAULT
        `);
                results.push("user_organizations.organization_role default removed");
            }
            catch (e) {
                results.push(`user_organizations.organization_role: ${e.message}`);
            }
            const remainingDeps = await db.execute((0, drizzle_orm_17.sql) `
        SELECT 
          t.table_name,
          c.column_name,
          c.column_default
        FROM information_schema.tables t
        JOIN information_schema.columns c ON t.table_name = c.table_name
        WHERE c.data_type = 'USER-DEFINED' 
        AND c.udt_name = 'user_role'
        AND c.column_default IS NOT NULL
      `);
            res.json({
                message: "Removed all enum dependencies",
                operations: results,
                remaining_dependencies: remainingDeps.rows,
                next_step: "Run npm run db:push now",
                timestamp: ( /* @__PURE__ */new Date()).toISOString()
            });
        }
        catch (error) {
            console.error("\u274C Error removing enum dependencies:", error);
            res.status(500).json({
                error: "Failed to remove enum dependencies",
                message: error.message,
                timestamp: ( /* @__PURE__ */new Date()).toISOString()
            });
        }
    });
    app2.post("/api/documents/restore-all-defaults", async (req, res) => {
        try {
            const results = [];
            try {
                await db.execute((0, drizzle_orm_17.sql) `
          ALTER TABLE users 
          ALTER COLUMN role SET DEFAULT 'tenant'
        `);
                results.push("users.role default restored to tenant");
            }
            catch (e) {
                results.push(`users.role restore failed: ${e.message}`);
            }
            try {
                await db.execute((0, drizzle_orm_17.sql) `
          ALTER TABLE user_organizations 
          ALTER COLUMN organization_role SET DEFAULT 'tenant'
        `);
                results.push("user_organizations.organization_role default restored to tenant");
            }
            catch (e) {
                results.push(`user_organizations.organization_role restore failed: ${e.message}`);
            }
            try {
                await db.execute((0, drizzle_orm_17.sql) `
          ALTER TABLE invitations 
          ALTER COLUMN role SET DEFAULT 'tenant'
        `);
                results.push("invitations.role default restored to tenant");
            }
            catch (e) {
                results.push(`invitations.role restore failed: ${e.message}`);
            }
            res.json({
                message: "Restored all default values",
                operations: results,
                timestamp: ( /* @__PURE__ */new Date()).toISOString()
            });
        }
        catch (error) {
            console.error("\u274C Error restoring defaults:", error);
            res.status(500).json({
                error: "Failed to restore defaults",
                message: error.message,
                timestamp: ( /* @__PURE__ */new Date()).toISOString()
            });
        }
    });
    app2.post("/api/documents/complete-schema-sync", async (req, res) => {
        try {
            const results = [];
            try {
                await db.execute((0, drizzle_orm_17.sql) `ALTER TABLE users ALTER COLUMN role DROP DEFAULT`);
                results.push("\u2713 Removed users.role default");
            }
            catch (e) {
                results.push(`users.role: ${e.message}`);
            }
            try {
                await db.execute((0, drizzle_orm_17.sql) `ALTER TABLE user_organizations ALTER COLUMN organization_role DROP DEFAULT`);
                results.push("\u2713 Removed user_organizations.organization_role default");
            }
            catch (e) {
                results.push(`user_organizations.organization_role: ${e.message}`);
            }
            try {
                await db.execute((0, drizzle_orm_17.sql) `ALTER TABLE invitations ALTER COLUMN role DROP DEFAULT`);
                results.push("\u2713 Removed invitations.role default");
            }
            catch (e) {
                results.push(`invitations.role: ${e.message}`);
            }
            const ownerUsers = await db.execute((0, drizzle_orm_17.sql) `SELECT count(*) as count FROM users WHERE role = 'owner'`);
            const ownerCount = Number(ownerUsers.rows[0]?.count || 0);
            if (ownerCount > 0) {
                await db.execute((0, drizzle_orm_17.sql) `UPDATE users SET role = 'admin' WHERE role = 'owner'`);
                results.push(`\u2713 Migrated ${ownerCount} owner users to admin`);
            }
            try {
                await db.execute((0, drizzle_orm_17.sql) `UPDATE user_organizations SET organization_role = 'admin' WHERE organization_role = 'owner'`);
                results.push("\u2713 Updated user_organizations owner roles to admin");
            }
            catch (e) {
                results.push(`user_organizations owner update: ${e.message}`);
            }
            try {
                await db.execute((0, drizzle_orm_17.sql) `ALTER TYPE user_role RENAME TO user_role_old`);
                await db.execute((0, drizzle_orm_17.sql) `
          CREATE TYPE user_role AS ENUM (
            'admin', 'manager', 'tenant', 'resident', 
            'demo_manager', 'demo_tenant', 'demo_resident'
          )
        `);
                await db.execute((0, drizzle_orm_17.sql) `ALTER TABLE users ALTER COLUMN role TYPE user_role USING role::text::user_role`);
                await db.execute((0, drizzle_orm_17.sql) `ALTER TABLE user_organizations ALTER COLUMN organization_role TYPE user_role USING organization_role::text::user_role`);
                await db.execute((0, drizzle_orm_17.sql) `ALTER TABLE invitations ALTER COLUMN role TYPE user_role USING role::text::user_role`);
                try {
                    await db.execute((0, drizzle_orm_17.sql) `ALTER TABLE role_permissions ALTER COLUMN role TYPE user_role USING role::text::user_role`);
                    results.push("\u2713 Updated role_permissions enum");
                }
                catch (e) {
                    results.push(`role_permissions: ${e.message}`);
                }
                await db.execute((0, drizzle_orm_17.sql) `DROP TYPE user_role_old`);
                results.push("\u2713 Successfully updated user_role enum");
            }
            catch (e) {
                results.push(`Enum update failed: ${e.message}`);
            }
            try {
                await db.execute((0, drizzle_orm_17.sql) `ALTER TABLE users ALTER COLUMN role SET DEFAULT 'tenant'`);
                results.push("\u2713 Restored users.role default to tenant");
            }
            catch (e) {
                results.push(`users.role default restore: ${e.message}`);
            }
            try {
                await db.execute((0, drizzle_orm_17.sql) `ALTER TABLE user_organizations ALTER COLUMN organization_role SET DEFAULT 'tenant'`);
                results.push("\u2713 Restored user_organizations.organization_role default to tenant");
            }
            catch (e) {
                results.push(`user_organizations.organization_role default restore: ${e.message}`);
            }
            try {
                await db.execute((0, drizzle_orm_17.sql) `ALTER TABLE invitations ALTER COLUMN role SET DEFAULT 'tenant'`);
                results.push("\u2713 Restored invitations.role default to tenant");
            }
            catch (e) {
                results.push(`invitations.role default restore: ${e.message}`);
            }
            try {
                await db.execute((0, drizzle_orm_17.sql) `
          ALTER TABLE invitation_audit_log 
          ADD COLUMN IF NOT EXISTS created_at TIMESTAMP DEFAULT NOW()
        `);
                results.push("\u2713 Added created_at to invitation_audit_log");
            }
            catch (e) {
                results.push(`invitation_audit_log.created_at: ${e.message}`);
            }
            res.json({
                message: "Database schema synchronization complete",
                operations: results,
                timestamp: ( /* @__PURE__ */new Date()).toISOString(),
                success: true
            });
        }
        catch (error) {
            console.error("\u274C Error during schema synchronization:", error);
            res.status(500).json({
                error: "Schema synchronization failed",
                message: error.message,
                timestamp: ( /* @__PURE__ */new Date()).toISOString(),
                success: false
            });
        }
    });
    app2.get("/api/documents/diagnostic", async (req, res) => {
        try {
            let tableExists = false;
            let tableSchema = null;
            try {
                const result = await db.execute((0, drizzle_orm_17.sql) `
          SELECT column_name, data_type, is_nullable, column_default 
          FROM information_schema.columns 
          WHERE table_name = 'documents' 
          ORDER BY ordinal_position
        `);
                tableExists = result.rows.length > 0;
                tableSchema = result.rows;
            }
            catch (schemaError) {
                console.error("Schema check error:", schemaError);
            }
            res.json({
                message: "Document API diagnostic",
                gcs_disabled: true,
                session_fix_applied: true,
                timestamp: ( /* @__PURE__ */new Date()).toISOString(),
                environment: process.env.NODE_ENV,
                version: "v2.1-gcs-disabled",
                recent_errors: errorLog.slice(-5),
                // Last 5 errors
                storage_status: {
                    exists: !!storage,
                    type: storage?.constructor?.name,
                    methods: Object.getOwnPropertyNames(Object.getPrototypeOf(storage || {}))
                },
                database_status: {
                    documents_table_exists: tableExists,
                    documents_table_schema: tableSchema,
                    schema_columns_count: tableSchema?.length || 0,
                    connection_test: await testDatabaseConnection(),
                    sample_query_test: await testSampleQuery(),
                    enum_check: await checkEnumValues(),
                    user_organization_links: await checkUserOrganizationLinks()
                }
            });
        }
        catch (error) {
            console.error("\u274C Error running diagnostic:", error);
            res.status(500).json({
                error: "Diagnostic failed",
                message: error.message
            });
        }
    });
    const logError = (endpoint, error, user) => {
        const errorEntry = {
            timestamp: ( /* @__PURE__ */new Date()).toISOString(),
            endpoint,
            error: {
                message: error.message,
                stack: error.stack,
                name: error.name,
                details: error.toString()
            },
            user: user ? { id: user.id, role: user.role } : null
        };
        errorLog.push(errorEntry);
        if (errorLog.length > 50)
            errorLog.shift();
        console.error(`[${errorEntry.timestamp}] \u{1F6A8} ERROR in ${endpoint}:`, errorEntry);
        return errorEntry;
    };
    app2.get("/api/documents", requireAuth, async (req, res) => {
        const timestamp9 = ( /* @__PURE__ */new Date()).toISOString();
        console.log(`[${timestamp9}] \u{1F4C4} GET /api/documents - Starting request`, {
            userId: req.user?.id,
            userRole: req.user?.role,
            query: req.query,
            url: req.url,
            method: req.method
        });
        try {
            const user = req.user;
            const userRole = user.role;
            const userId = user.id;
            console.log(`[${timestamp9}] \u{1F50D} User data extracted:`, {
                userId,
                userRole,
                hasValidUser: !!user
            });
            console.log(`[${timestamp9}] \u{1F4BE} Storage check:`, {
                storageExists: !!storage,
                storageType: storage?.constructor?.name,
                storageMethod: typeof storage?.getDocuments
            });
            const documentType = req.query.type;
            const specificResidenceId = req.query.residenceId;
            const specificBuildingId = req.query.buildingId;
            console.log(`[${timestamp9}] \u{1F50D} Fetching user data from storage...`);
            console.log(`[${timestamp9}] \u{1F4CB} Calling getUserOrganizations(${userId})...`);
            const organizations3 = await storage.getUserOrganizations(userId);
            console.log(`[${timestamp9}] \u2705 getUserOrganizations SUCCESS - Found ${organizations3.length} organizations`);
            console.log(`[${timestamp9}] \u{1F4CB} Calling getUserResidences(${userId})...`);
            const userResidences4 = await storage.getUserResidences(userId);
            console.log(`[${timestamp9}] \u2705 getUserResidences SUCCESS - Found ${userResidences4.length} user residences`);
            console.log(`[${timestamp9}] \u{1F4CB} Calling getBuildings()...`);
            const buildings5 = await storage.getBuildings();
            console.log(`[${timestamp9}] \u2705 getBuildings SUCCESS - Found ${buildings5.length} buildings`);
            const organizationId = organizations3.length > 0 ? organizations3[0].organizationId : void 0;
            console.log(`[${timestamp9}] \u{1F3E2} Organization ID determined:`, organizationId);
            let residenceIds;
            if (specificResidenceId) {
                if (userRole === "admin" || userRole === "manager") {
                    residenceIds = [specificResidenceId];
                }
                else {
                    const hasAccess = userResidences4.some((ur) => {
                        if (ur.residenceId === specificResidenceId) {
                            return true;
                        }
                        if (ur.userResidence?.residenceId === specificResidenceId) {
                            return true;
                        }
                        if (ur.residence?.id === specificResidenceId) {
                            return true;
                        }
                        return false;
                    });
                    if (!hasAccess) {
                        return res.status(403).json({ message: "Access denied to this residence" });
                    }
                    residenceIds = [specificResidenceId];
                }
            }
            else {
                residenceIds = userResidences4.map((ur) => {
                    if (ur.residenceId) {
                        return ur.residenceId;
                    }
                    if (ur.userResidence?.residenceId) {
                        return ur.userResidence.residenceId;
                    }
                    if (ur.residence?.id) {
                        return ur.residence.id;
                    }
                    return null;
                }).filter((id) => id !== null);
            }
            const buildingIds = buildings5.map((b) => b.id);
            const allDocumentRecords = [];
            const filters = {
                userId,
                userRole
            };
            if (specificResidenceId) {
                filters.residenceId = specificResidenceId;
            }
            if (specificBuildingId) {
                filters.buildingId = specificBuildingId;
            }
            else if (documentType === "building") {
                if (buildingIds.length > 0) {
                }
            }
            else if (documentType === "resident") {
                if (residenceIds.length > 0) {
                }
            }
            console.log(`[${timestamp9}] \u{1F3AF} CRITICAL: About to call storage.getDocuments with filters:`, filters);
            console.log(`[${timestamp9}] \u{1F527} Storage instance:`, storage.constructor.name);
            console.log(`[${timestamp9}] \u{1F4CA} Filters being passed:`, JSON.stringify(filters, null, 2));
            const documents2 = await storage.getDocuments(filters);
            console.log(`[${timestamp9}] \u2705 CRITICAL: storage.getDocuments SUCCESS - returned ${documents2?.length || 0} documents`);
            console.log(`[${timestamp9}] \u{1F4CB} Document preview:`, documents2?.slice(0, 3)?.map((d) => ({
                id: d.id,
                name: d.name,
                uploadedById: d.uploadedById,
                buildingId: d.buildingId,
                residenceId: d.residenceId
            })));
            console.log("\u{1F50D} [DOCUMENTS API DEBUG]:", {
                filters,
                documentsFound: documents2?.length || 0,
                specificResidenceId,
                userRole,
                userId
            });
            const filteredDocumentRecords = documents2.filter((doc) => {
                if (specificBuildingId) {
                    if (doc.buildingId !== specificBuildingId) {
                        return false;
                    }
                }
                if (userRole === "admin") {
                    return true;
                }
                if (userRole === "manager" && organizationId) {
                    if (doc.buildingId && buildingIds.includes(doc.buildingId)) {
                        return true;
                    }
                    if (doc.residenceId && residenceIds.includes(doc.residenceId)) {
                        return true;
                    }
                }
                if (userRole === "resident") {
                    if (doc.residenceId && residenceIds.includes(doc.residenceId)) {
                        return true;
                    }
                    if (doc.buildingId) {
                        const userBuildingIds = userResidences4.map((ur) => ur.residence?.buildingId || ur.userResidence?.residence?.buildingId).filter(Boolean);
                        return userBuildingIds.includes(doc.buildingId);
                    }
                }
                if (userRole === "tenant") {
                    if (!doc.isVisibleToTenants) {
                        return false;
                    }
                    if (doc.residenceId && residenceIds.includes(doc.residenceId)) {
                        return true;
                    }
                    if (doc.buildingId) {
                        const userBuildingIds = userResidences4.map((ur) => ur.residence?.buildingId || ur.userResidence?.residence?.buildingId).filter(Boolean);
                        return userBuildingIds.includes(doc.buildingId);
                    }
                }
                return false;
            });
            const enhancedDocumentRecords = filteredDocumentRecords.map((doc) => ({
                ...doc,
                documentCategory: doc.buildingId ? "building" : "resident",
                entityType: doc.buildingId ? "building" : "residence",
                entityId: doc.buildingId || doc.residenceId,
                uploadDate: doc.createdAt
                // For backward compatibility
            }));
            allDocumentRecords.push(...enhancedDocumentRecords);
            allDocumentRecords.sort((a, b) => new Date(b.uploadDate).getTime() - new Date(a.uploadDate).getTime());
            const response = {
                documents: allDocumentRecords,
                total: allDocumentRecords.length,
                buildingCount: allDocumentRecords.filter((d) => d.documentCategory === "building").length,
                residentCount: allDocumentRecords.filter((d) => d.documentCategory === "resident").length,
                legacyCount: allDocumentRecords.filter((d) => d.documentCategory === "legacy").length
            };
            res.json(response);
        }
        catch (_error) {
            const errorEntry = logError("GET /api/documents", _error, req.user);
            res.status(500).json({
                message: "Failed to fetch documents",
                error_id: errorEntry.timestamp,
                debug_info: process.env.NODE_ENV === "development" ? _error.message : void 0
            });
        }
    });
    app2.get("/api/documents/:id", requireAuth, async (req, res) => {
        try {
            const user = req.user;
            const userRole = user.role;
            const userId = user.id;
            const documentId = req.params.id;
            const documentType = req.query.type;
            const organizations3 = await storage.getUserOrganizations(userId);
            const residences2 = await storage.getUserResidences(userId);
            const buildings5 = await storage.getBuildings();
            const organizationId = organizations3.length > 0 ? organizations3[0].organizationId : void 0;
            const residenceIds = residences2.map((ur) => ur.residenceId);
            const buildingIds = buildings5.map((b) => b.id);
            let document = null;
            const hasNewDocumentRecordMethods = "getBuildingDocumentRecord" in storage;
            if (hasNewDocumentRecordMethods) {
                if (!documentType || documentType === "building") {
                    try {
                        document = await storage.getBuildingDocumentRecord(documentId, userId, userRole, organizationId, buildingIds);
                        if (document) {
                            document.documentCategory = "building";
                            document.entityType = "building";
                            document.entityId = document.buildingId;
                        }
                    }
                    catch (e) {
                        console.warn("\u26A0\uFE0F Error fetching building document:", e);
                    }
                }
                if (!document && (!documentType || documentType === "resident")) {
                    try {
                        document = await storage.getResidentDocumentRecord(documentId, userId, userRole, organizationId, residenceIds);
                        if (document) {
                            document.documentCategory = "resident";
                            document.entityType = "residence";
                            document.entityId = document.residenceId;
                        }
                    }
                    catch (e) {
                        console.warn("\u26A0\uFE0F Error fetching resident document:", e);
                    }
                }
            }
            if (!document && !documentType) {
                try {
                    document = await storage.getDocument(documentId);
                    if (document) {
                        document.documentCategory = "legacy";
                        document.entityType = "legacy";
                        document.entityId = null;
                    }
                }
                catch (e) {
                    console.warn("\u26A0\uFE0F Error fetching legacy document:", e);
                }
            }
            if (!document) {
                return res.status(404).json({ message: "DocumentRecord not found or access denied" });
            }
            res.json(document);
        }
        catch (error) {
            console.error("\u274C Error fetching document:", error);
            res.status(500).json({ message: "Failed to fetch document" });
        }
    });
    app2.post("/api/documents", requireAuth, upload.single("file"), async (req, res) => {
        try {
            const user = req.user;
            const userRole = user.role;
            const userId = user.id;
            const { documentType, buildingId, residenceId, textContent, ...otherData } = req.body;
            if (!["admin", "manager", "resident"].includes(userRole)) {
                return res.status(403).json({ message: "Insufficient permissions to create documents" });
            }
            const isTextDocumentRecord = !req.file && textContent;
            const isFileDocumentRecord = !!req.file;
            if (!isTextDocumentRecord && !isFileDocumentRecord) {
                return res.status(400).json({ message: "Either a file or text content is required" });
            }
            if (isTextDocumentRecord) {
                const documentData = {
                    name: otherData.name || "Untitled DocumentRecord",
                    description: otherData.description || textContent.substring(0, 200) + (textContent.length > 200 ? "..." : ""),
                    documentType: documentType || "other",
                    filePath: `text-documents/${userId}/${(0, uuid_1.v4)()}.txt`,
                    // Virtual path for text documents
                    isVisibleToTenants: otherData.isVisibleToTenants === "true" || otherData.isVisibleToTenants === true,
                    residenceId: residenceId || void 0,
                    buildingId: buildingId || void 0,
                    uploadedById: userId
                };
                if (buildingId && userRole === "manager") {
                    const organizations3 = await storage.getUserOrganizations(userId);
                    const organizationId = organizations3.length > 0 ? organizations3[0].organizationId : void 0;
                    const building = await storage.getBuilding(buildingId);
                    if (!building || building.organizationId !== organizationId) {
                        return res.status(403).json({ message: "Cannot assign document to building outside your organization" });
                    }
                }
                if (residenceId && userRole === "resident") {
                    const residences2 = await storage.getUserResidences(userId);
                    const residenceIds = residences2.map((ur) => ur.residenceId);
                    if (!residenceIds.includes(residenceId)) {
                        return res.status(403).json({ message: "Cannot assign document to residence you do not own" });
                    }
                }
                let fileName;
                try {
                    const textFilePath = path_3.default.join(process.cwd(), "uploads", "text-documents", userId);
                    if (!fs_2.default.existsSync(textFilePath)) {
                        fs_2.default.mkdirSync(textFilePath, { recursive: true });
                    }
                    fileName = `${(0, uuid_1.v4)()}.txt`;
                    const fullPath = path_3.default.join(textFilePath, fileName);
                    fs_2.default.writeFileSync(fullPath, textContent, "utf8");
                }
                catch (fsError) {
                    console.error("Error saving text document to filesystem:", fsError);
                    return res.status(500).json({ message: "Failed to save text document" });
                }
                documentData.filePath = `text-documents/${userId}/${fileName}`;
                const document = await storage.createDocument(documentData);
                return res.status(201).json({
                    message: "Text document created successfully",
                    document: {
                        ...document,
                        documentCategory: buildingId ? "building" : "resident",
                        entityType: buildingId ? "building" : "residence",
                        entityId: buildingId || residenceId
                    }
                });
            }
            let finalDocumentRecordType = documentType;
            if (!finalDocumentRecordType) {
                if (buildingId && !residenceId) {
                    finalDocumentRecordType = "building";
                }
                else if (residenceId && !buildingId) {
                    finalDocumentRecordType = "resident";
                }
                else if (buildingId && residenceId) {
                    return res.status(400).json({
                        message: "Please specify documentType when providing both buildingId and residenceId"
                    });
                }
                else {
                    return res.status(400).json({
                        message: "Must provide either buildingId (for building documents) or residenceId (for resident documents)"
                    });
                }
            }
            if (finalDocumentRecordType === "building") {
                if (!buildingId) {
                    return res.status(400).json({ message: "buildingId is required for building documents" });
                }
                const validatedData = createBuildingDocumentSchema.parse({
                    ...otherData,
                    buildingId,
                    uploadedById: userId,
                    filePath: req.file ? req.file.path : void 0
                    // fileName is handled via name field
                });
                if (userRole === "manager") {
                    const organizations3 = await storage.getUserOrganizations(userId);
                    const organizationId = organizations3.length > 0 ? organizations3[0].organizationId : void 0;
                    const building = await storage.getBuilding(buildingId);
                    if (!building || building.organizationId !== organizationId) {
                        return res.status(403).json({ message: "Cannot assign document to building outside your organization" });
                    }
                }
                if (userRole === "resident") {
                    const residences2 = await storage.getUserResidences(userId);
                    const hasResidenceInBuilding = await Promise.all(residences2.map(async (ur) => {
                        const residence = await storage.getResidence(ur.residenceId);
                        return residence && residence.buildingId === buildingId;
                    }));
                    if (!hasResidenceInBuilding.some(Boolean)) {
                        return res.status(403).json({ message: "Cannot assign document to building where you have no residence" });
                    }
                }
                const unifiedDocument = {
                    name: validatedData.name || validatedData.title || "Untitled",
                    description: validatedData.description,
                    documentType: validatedData.type,
                    filePath: validatedData.filePath || `temp-path-${Date.now()}`,
                    isVisibleToTenants: validatedData.isVisibleToTenants || false,
                    residenceId: void 0,
                    buildingId: validatedData.buildingId,
                    uploadedById: validatedData.uploadedById
                };
                const document = await storage.createDocument(unifiedDocument);
                if (req.file?.path) {
                    try {
                        fs_2.default.unlinkSync(req.file.path);
                    }
                    catch (cleanupError) {
                    }
                }
                res.status(201).json({
                    ...document,
                    documentCategory: "building",
                    entityType: "building",
                    entityId: document.buildingId
                });
            }
            else if (finalDocumentRecordType === "resident") {
                if (!residenceId) {
                    return res.status(400).json({ message: "residenceId is required for resident documents" });
                }
                const validatedData = createResidentDocumentSchema.parse({
                    ...otherData,
                    residenceId,
                    uploadedById: userId,
                    filePath: req.file ? req.file.path : void 0
                    // fileName is handled via name field
                });
                if (userRole === "manager") {
                    const organizations3 = await storage.getUserOrganizations(userId);
                    const organizationId = organizations3.length > 0 ? organizations3[0].organizationId : void 0;
                    const residence = await storage.getResidence(residenceId);
                    if (residence) {
                        const building = await storage.getBuilding(residence.buildingId);
                        if (!building || building.organizationId !== organizationId) {
                            return res.status(403).json({ message: "Cannot assign document to residence outside your organization" });
                        }
                    }
                    else {
                        return res.status(404).json({ message: "Residence not found" });
                    }
                }
                if (userRole === "resident") {
                    const residences2 = await storage.getUserResidences(userId);
                    const residenceIds = residences2.map((ur) => ur.residenceId);
                    if (!residenceIds.includes(residenceId)) {
                        return res.status(403).json({ message: "Cannot assign document to residence you do not own" });
                    }
                }
                const unifiedDocument = {
                    name: validatedData.name,
                    description: void 0,
                    documentType: validatedData.type,
                    filePath: validatedData.filePath || `temp-path-${Date.now()}`,
                    isVisibleToTenants: validatedData.isVisibleToTenants,
                    residenceId: validatedData.residenceId,
                    buildingId: void 0,
                    uploadedById: validatedData.uploadedById
                };
                const document = await storage.createDocument(unifiedDocument);
                console.log("\u{1F4DD} Created resident document:", document);
                console.log("\u{1F4DD} DocumentRecord ID:", document.id);
                const response = {
                    ...document,
                    documentCategory: "resident",
                    entityType: "residence",
                    entityId: document.residenceId
                };
                console.log("\u{1F4E4} Sending response:", response);
                res.status(201).json(response);
            }
            else {
                return res.status(400).json({
                    message: 'Invalid documentType. Must be either "building" or "resident"'
                });
            }
        }
        catch (_error) {
            if (req.file?.path) {
                try {
                    fs_2.default.unlinkSync(req.file.path);
                }
                catch (cleanupError) {
                    console.warn("\u26A0\uFE0F Failed to cleanup temporary file:", cleanupError);
                }
            }
            console.error("\u274C Error creating document:", _error);
            if (_error instanceof zod_11.z.ZodError) {
                return res.status(400).json({
                    message: "Invalid document data",
                    errors: _error.issues
                });
            }
            res.status(500).json({ message: "Failed to create document" });
        }
    });
    app2.put("/api/documents/:id", requireAuth, async (req, res) => {
        try {
            const user = req.user;
            const userRole = user.role;
            const userId = user.id;
            const documentId = req.params.id;
            const documentType = req.query.type;
            const organizations3 = await storage.getUserOrganizations(userId);
            const residences2 = await storage.getUserResidences(userId);
            const buildings5 = await storage.getBuildings();
            const organizationId = organizations3.length > 0 ? organizations3[0].organizationId : void 0;
            const residenceIds = residences2.map((ur) => ur.residenceId);
            const buildingIds = buildings5.map((b) => b.id);
            let updatedDocument = null;
            try {
                const validatedData = createDocumentSchema.partial().parse(req.body);
                updatedDocument = await storage.updateDocument(documentId, validatedData);
                if (updatedDocument) {
                    updatedDocument.documentCategory = updatedDocument.buildingId ? "building" : "resident";
                    updatedDocument.entityType = updatedDocument.buildingId ? "building" : "residence";
                    updatedDocument.entityId = updatedDocument.buildingId || updatedDocument.residenceId;
                }
            }
            catch (e) {
                console.warn("\u26A0\uFE0F Error in document update:", e);
            }
            if (!updatedDocument) {
                return res.status(404).json({ message: "DocumentRecord not found or access denied" });
            }
            res.json(updatedDocument);
        }
        catch (_error) {
            console.error("\u274C Error updating document:", _error);
            if (_error instanceof zod_11.z.ZodError) {
                return res.status(400).json({
                    message: "Invalid document data",
                    errors: _error.issues
                });
            }
            res.status(500).json({ message: "Failed to update document" });
        }
    });
    app2.delete("/api/documents/:id", requireAuth, async (req, res) => {
        try {
            const user = req.user;
            const userRole = user.role;
            const userId = user.id;
            const documentId = req.params.id;
            const documentType = req.query.type;
            const organizations3 = await storage.getUserOrganizations(userId);
            const organizationId = organizations3.length > 0 ? organizations3[0].organizationId : void 0;
            let deleted = false;
            try {
                deleted = await storage.deleteDocument(documentId);
            }
            catch (e) {
                console.warn("\u26A0\uFE0F Error deleting document:", e);
            }
            if (!deleted) {
                return res.status(404).json({ message: "DocumentRecord not found or access denied" });
            }
            res.status(204).send();
        }
        catch (error) {
            console.error("\u274C Error in document deletion:", error);
            res.status(500).json({ message: "Failed to delete document" });
        }
    });
    app2.post("/api/documents/:id/upload", requireAuth, upload.single("file"), async (req, res) => {
        try {
            const user = req.user;
            const userRole = user.role;
            const userId = user.id;
            const documentId = req.params.id;
            const { documentType = "resident", residenceId, ...otherData } = req.body;
            console.log("\u{1F4E4} Upload request received:", {
                documentId,
                userId,
                userRole,
                hasFile: !!req.file,
                fileInfo: req.file ? {
                    fieldname: req.file.fieldname,
                    originalname: req.file.originalname,
                    encoding: req.file.encoding,
                    mimetype: req.file.mimetype,
                    size: req.file.size,
                    path: req.file.path
                } : null,
                bodyKeys: Object.keys(req.body),
                contentType: req.headers["content-type"]
            });
            if (!["admin", "manager", "resident"].includes(userRole)) {
                return res.status(403).json({ message: "Insufficient permissions to create documents" });
            }
            if (!req.file) {
                console.error("\u274C No file received in upload request");
                return res.status(400).json({ message: "File is required for upload" });
            }
            const documents2 = await storage.getDocuments({
                userId,
                userRole
            });
            const existingDocument = documents2.find((doc) => doc.id === documentId);
            if (!existingDocument) {
                return res.status(404).json({ message: "DocumentRecord not found" });
            }
            let organizationId;
            if (existingDocument.buildingId) {
                const building = await storage.getBuilding(existingDocument.buildingId);
                if (!building) {
                    return res.status(404).json({ message: "Building not found" });
                }
                organizationId = building.organizationId;
            }
            else if (existingDocument.residenceId) {
                const residence = await storage.getResidence(existingDocument.residenceId);
                if (!residence) {
                    return res.status(404).json({ message: "Residence not found" });
                }
                const building = await storage.getBuilding(residence.buildingId);
                if (!building) {
                    return res.status(404).json({ message: "Building not found" });
                }
                organizationId = building.organizationId;
            }
            else {
                return res.status(400).json({ message: "DocumentRecord must be associated with a building or residence" });
            }
            const updatedDocument = await storage.updateDocument(documentId, {
                filePath: `prod_org_${organizationId}/${req.file.originalname}`,
                name: req.file.originalname
                // Remove mimeType as it's not in schema
            });
            if (req.file && req.file.path && fs_2.default.existsSync(req.file.path)) {
                fs_2.default.unlinkSync(req.file.path);
            }
            res.status(200).json({
                document: updatedDocument,
                message: "File uploaded successfully"
            });
        }
        catch (error) {
            const errorTimestamp = ( /* @__PURE__ */new Date()).toISOString();
            console.error(`[${errorTimestamp}] Error type:`, error.constructor.name);
            console.error(`[${errorTimestamp}] Error message:`, error.message);
            console.error(`[${errorTimestamp}] Error stack:`, error.stack);
            if (req.file && req.file.path && fs_2.default.existsSync(req.file.path)) {
                try {
                    fs_2.default.unlinkSync(req.file.path);
                }
                catch (cleanupError) {
                    console.error(`[${errorTimestamp}] Error cleaning up file:`, cleanupError);
                }
            }
            if (error.name === "ZodError") {
                return res.status(400).json({
                    message: "Validation error",
                    errors: error.errors
                });
            }
            res.status(500).json({ message: "Failed to upload document" });
        }
    });
    app2.post("/api/documents/upload", requireAuth, upload.single("file"), async (req, res) => {
        const timestamp9 = ( /* @__PURE__ */new Date()).toISOString();
        console.log(`[${timestamp9}] \u{1F4CB} POST /api/documents/upload - Starting upload`, {
            hasFile: !!req.file,
            fileName: req.file?.originalname,
            fileSize: req.file?.size,
            body: req.body,
            userId: req.user?.id
        });
        try {
            if (!req.file) {
                return res.status(400).json({ message: "No file uploaded" });
            }
            const formData = {
                name: req.body.name,
                description: req.body.description || "",
                documentType: req.body.documentType || req.body.type,
                // Handle both field names
                isVisibleToTenants: req.body.isVisibleToTenants === "true",
                residenceId: req.body.residenceId || void 0,
                buildingId: req.body.buildingId || void 0,
                attachedToType: req.body.attachedToType || void 0,
                attachedToId: req.body.attachedToId || void 0
            };
            if (process.env.NODE_ENV === "production") {
                console.log("[PROD DEBUG] Form data before validation:", formData);
            }
            const validatedData = uploadDocumentRecordSchema.parse(formData);
            console.log(`[${timestamp9}] \u{1F50D} VALIDATION DEBUG: Form data before validation:`, formData);
            console.log(`[${timestamp9}] \u{1F50D} VALIDATION DEBUG: Validated data:`, {
                ...validatedData,
                hasAttachedToType: !!validatedData.attachedToType,
                hasAttachedToId: !!validatedData.attachedToId
            });
            if (process.env.NODE_ENV === "production") {
                console.log("[PROD DEBUG] Form data validation passed:", validatedData);
            }
            const userId = req.user?.id;
            if (!userId) {
                return res.status(401).json({ message: "User not authenticated" });
            }
            console.log("\u{1F4C1} GCS disabled - skipping bucket configuration check");
            const fileExtension = path_3.default.extname(req.file.originalname);
            const baseFileName = path_3.default.basename(req.file.originalname, fileExtension);
            const uniqueFileName = `${(0, uuid_1.v4)()}-${baseFileName}${fileExtension}`;
            let filePath;
            if (validatedData.residenceId) {
                filePath = `residences/${validatedData.residenceId}/${uniqueFileName}`;
            }
            else if (validatedData.buildingId) {
                filePath = `buildings/${validatedData.buildingId}/${uniqueFileName}`;
            }
            else {
                filePath = `general/${uniqueFileName}`;
            }
            console.log("\u{1F4C1} GCS disabled - using local storage for all document operations");
            try {
                const localStoragePath = path_3.default.join(process.cwd(), "uploads");
                try {
                    if (!fs_2.default.existsSync(localStoragePath)) {
                        fs_2.default.mkdirSync(localStoragePath, { recursive: true });
                        console.log(`\u{1F4C1} Created uploads directory: ${localStoragePath}`);
                    }
                }
                catch (dirError) {
                    console.error("Failed to create uploads directory:", dirError);
                    throw new Error("Cannot create uploads directory - check permissions");
                }
                const localFilePath = path_3.default.join(localStoragePath, filePath);
                const localFileDir = path_3.default.dirname(localFilePath);
                try {
                    if (!fs_2.default.existsSync(localFileDir)) {
                        fs_2.default.mkdirSync(localFileDir, { recursive: true });
                        console.log(`\u{1F4C1} Created subdirectory: ${localFileDir}`);
                    }
                }
                catch (subdirError) {
                    console.error("Failed to create file subdirectory:", subdirError);
                    throw new Error("Cannot create file directory - check permissions");
                }
                try {
                    fs_2.default.copyFileSync(req.file.path, localFilePath);
                    console.log(`\u{1F4C1} File saved successfully at ${localFilePath}`);
                }
                catch (copyError) {
                    console.error("Failed to copy file:", copyError);
                    throw new Error("Cannot save file - check disk space and permissions");
                }
            }
            catch (localError) {
                console.error("Local storage error:", localError);
                throw new Error("Failed to save file locally");
            }
            const documentData = {
                name: validatedData.name,
                description: validatedData.description,
                documentType: validatedData.documentType,
                filePath,
                isVisibleToTenants: validatedData.isVisibleToTenants,
                residenceId: validatedData.residenceId,
                buildingId: validatedData.buildingId,
                uploadedById: userId,
                attachedToType: validatedData.attachedToType,
                attachedToId: validatedData.attachedToId
            };
            console.log(`[${timestamp9}] \u{1F3AF} CRITICAL: About to create document in database:`, {
                name: documentData.name,
                type: documentData.documentType,
                buildingId: documentData.buildingId,
                residenceId: documentData.residenceId,
                uploadedById: documentData.uploadedById,
                attachedToType: documentData.attachedToType,
                attachedToId: documentData.attachedToId
            });
            const newDocument = await storage.createDocument(documentData);
            console.log(`[${timestamp9}] \u2705 CRITICAL: DocumentRecord created successfully:`, {
                id: newDocument?.id,
                name: newDocument?.name,
                filePath: newDocument?.filePath
            });
            if (fs_2.default.existsSync(req.file.path)) {
                fs_2.default.unlinkSync(req.file.path);
            }
            res.status(201).json({
                message: "DocumentRecord uploaded successfully",
                document: newDocument
            });
        }
        catch (error) {
            const errorEntry = logError("POST /api/documents/upload", error, req.user);
            if (req.file && req.file.path && fs_2.default.existsSync(req.file.path)) {
                try {
                    fs_2.default.unlinkSync(req.file.path);
                }
                catch (cleanupError) {
                    console.error("Error cleaning up temporary file:", cleanupError);
                }
            }
            if (error.name === "ZodError") {
                return res.status(400).json({
                    message: "Validation error",
                    errors: error.errors,
                    error_id: errorEntry.timestamp
                });
            }
            if (error.message && error.message.includes("Google Cloud Storage")) {
                return res.status(500).json({
                    message: "File upload failed",
                    error: "Storage service error",
                    error_id: errorEntry.timestamp
                });
            }
            if (error?.message?.includes("unique constraint") || error?.code === "23505") {
                return res.status(409).json({
                    message: "DocumentRecord path conflict - please try uploading again",
                    error: "Path already exists",
                    error_id: errorEntry.timestamp
                });
            }
            if (error.message && error.message.includes("database")) {
                return res.status(500).json({
                    message: "Failed to save document record",
                    error: "Database error",
                    error_id: errorEntry.timestamp
                });
            }
            res.status(500).json({
                message: "Internal server error",
                error: "DocumentRecord upload failed",
                error_id: errorEntry.timestamp,
                debug_info: process.env.NODE_ENV === "development" ? error.message : void 0
            });
        }
    });
    app2.get("/api/documents/:id/file", requireAuth, async (req, res) => {
        try {
            const user = req.user;
            const userRole = user.role;
            const userId = user.id;
            const documentId = req.params.id;
            const isDownload = req.query.download === "true";
            const organizations3 = await storage.getUserOrganizations(userId);
            const residences2 = await storage.getUserResidences(userId);
            const buildings5 = await storage.getBuildings();
            const organizationId = organizations3.length > 0 ? organizations3[0].organizationId : void 0;
            const residenceIds = residences2.map((ur) => ur.residenceId || ur.userResidence?.residenceId || ur.residence?.id).filter(Boolean);
            const buildingIds = buildings5.map((b) => b.id);
            const filters = {
                userId,
                userRole
            };
            const documents2 = await storage.getDocuments(filters);
            const document = documents2.find((doc) => doc.id === documentId);
            if (!document) {
                return res.status(404).json({ message: "DocumentRecord not found" });
            }
            let hasAccess = false;
            if (userRole === "admin") {
                hasAccess = true;
            }
            else if (userRole === "manager" && organizationId) {
                if (document.buildingId && buildingIds.includes(document.buildingId)) {
                    hasAccess = true;
                }
                if (document.residenceId && residenceIds.includes(document.residenceId)) {
                    hasAccess = true;
                }
            }
            else if (userRole === "resident") {
                if (document.residenceId && residenceIds.includes(document.residenceId)) {
                    hasAccess = true;
                }
                if (document.buildingId) {
                    const userBuildingIds = residences2.map((ur) => ur.residence?.buildingId || ur.userResidence?.residence?.buildingId).filter(Boolean);
                    if (userBuildingIds.includes(document.buildingId)) {
                        hasAccess = true;
                    }
                }
            }
            else if (userRole === "tenant") {
                if (!document.isVisibleToTenants) {
                    hasAccess = false;
                }
                else {
                    if (document.residenceId && residenceIds.includes(document.residenceId)) {
                        hasAccess = true;
                    }
                    if (document.buildingId) {
                        const userBuildingIds = residences2.map((ur) => ur.residence?.buildingId || ur.userResidence?.residence?.buildingId).filter(Boolean);
                        if (userBuildingIds.includes(document.buildingId)) {
                            hasAccess = true;
                        }
                    }
                }
            }
            if (!hasAccess) {
                return res.status(403).json({ message: "Access denied" });
            }
            if (document.filePath) {
                console.log("\u{1F4C1} GCS disabled - serving from local storage");
                try {
                    let filePathToServe = document.filePath;
                    if (document.filePath.startsWith("/")) {
                        filePathToServe = document.filePath;
                    }
                    else if (document.filePath.includes("residences/") || document.filePath.includes("buildings/") || document.filePath.includes("text-documents/") || document.filePath.includes("general/")) {
                        const possiblePaths = [
                            path_3.default.join(process.cwd(), "uploads", document.filePath),
                            // Main fallback location
                            `/tmp/uploads/${document.filePath}`,
                            `/uploads/${document.filePath}`,
                            `./uploads/${document.filePath}`,
                            path_3.default.join("/tmp", document.filePath)
                        ];
                        for (const possiblePath of possiblePaths) {
                            if (fs_2.default.existsSync(possiblePath)) {
                                filePathToServe = possiblePath;
                                console.log(`\u{1F4C2} Found file at: ${filePathToServe}`);
                                break;
                            }
                        }
                    }
                    else if (document.filePath.includes("tmp")) {
                        filePathToServe = document.filePath;
                    }
                    if (fs_2.default.existsSync(filePathToServe)) {
                        let fileName = document.fileName || document.name || path_3.default.basename(document.filePath);
                        if (!path_3.default.extname(fileName) && document.filePath) {
                            const originalExt = path_3.default.extname(document.filePath);
                            if (originalExt) {
                                fileName += originalExt;
                            }
                        }
                        if (isDownload) {
                            res.setHeader("Content-Disposition", `attachment; filename="${fileName}"`);
                        }
                        else {
                            res.setHeader("Content-Disposition", `inline; filename="${fileName}"`);
                        }
                        const ext = path_3.default.extname(fileName).toLowerCase();
                        if (ext === ".pdf") {
                            res.setHeader("Content-Type", "application/pdf");
                        }
                        else if (ext === ".jpg" || ext === ".jpeg") {
                            res.setHeader("Content-Type", "image/jpeg");
                        }
                        else if (ext === ".png") {
                            res.setHeader("Content-Type", "image/png");
                        }
                        else if (ext === ".gif") {
                            res.setHeader("Content-Type", "image/gif");
                        }
                        else if (ext === ".doc" || ext === ".docx") {
                            res.setHeader("Content-Type", "application/vnd.openxmlformats-officedocument.wordprocessingml.document");
                        }
                        else if (ext === ".txt") {
                            res.setHeader("Content-Type", "text/plain; charset=utf-8");
                        }
                        else {
                            res.setHeader("Content-Type", "application/octet-stream");
                        }
                        if (process.env.NODE_ENV === "production") {
                            const fileStats = fs_2.default.statSync(filePathToServe);
                            res.set({
                                "Cache-Control": "no-cache, no-store, must-revalidate",
                                "Pragma": "no-cache",
                                "Expires": "0",
                                "ETag": `"${document.id}-${fileStats.mtime.getTime()}"`,
                                "Last-Modified": fileStats.mtime.toUTCString()
                            });
                        }
                        console.log(`\u{1F4C2} Serving file: ${filePathToServe} as ${fileName}`);
                        return res.sendFile(path_3.default.resolve(filePathToServe));
                    }
                    console.log(`\u274C File not found at filePath: ${document.filePath}`);
                    console.log(`\u274C Tried filePath: ${filePathToServe}`);
                    return res.status(404).json({ message: "File not found on server" });
                }
                catch (fileError) {
                    console.error("\u274C Error serving file:", fileError);
                    return res.status(500).json({ message: "Failed to serve file" });
                }
            }
            return res.status(404).json({ message: "No file associated with this document" });
        }
        catch (error) {
            console.error("\u274C Error serving document file:", error);
            res.status(500).json({ message: "Failed to serve document file" });
        }
    });
}
// server/api/bugs.ts
init_storage();
init_schema();
const zod_12 = require("zod");
const multer_2 = __importDefault(require("multer"));
const path_4 = __importDefault(require("path"));
const fs_3 = __importDefault(require("fs"));
const uuid_2 = require("uuid");
var storage_config = multer_2.default.diskStorage({
    destination: (req, file, cb) => {
        const uploadDir = path_4.default.join(process.cwd(), "uploads", "general");
        if (!fs_3.default.existsSync(uploadDir)) {
            fs_3.default.mkdirSync(uploadDir, { recursive: true });
        }
        cb(null, uploadDir);
    },
    filename: (req, file, cb) => {
        const uniqueId = (0, uuid_2.v4)();
        const originalName = file.originalname.replace(/[^a-zA-Z0-9.-]/g, "_");
        const fileName = `${uniqueId}-${originalName}`;
        cb(null, fileName);
    }
});
var upload2 = (0, multer_2.default)({ storage: storage_config });
function registerBugRoutes(app2) {
    app2.get("/api/bugs", requireAuth, async (req, res) => {
        try {
            const currentUser = req.user || req.session?.user;
            if (!currentUser) {
                return res.status(401).json({
                    message: "Authentication required",
                    code: "AUTH_REQUIRED"
                });
            }
            console.log(`\u{1F4CB} Fetching bugs for user ${currentUser.id} with role ${currentUser.role}`);
            const bugs2 = await storage.getBugsForUser(currentUser.id, currentUser.role, currentUser.organizationId);
            console.log(`\u2705 Found ${bugs2.length} bugs for user ${currentUser.id}`);
            res.json(bugs2);
        }
        catch (error) {
            console.error("\u274C Error fetching bugs:", error);
            res.status(500).json({
                error: "Internal server error",
                message: "Failed to fetch bugs"
            });
        }
    });
    app2.get("/api/bugs/:id", requireAuth, async (req, res) => {
        try {
            const { id } = req.params;
            const currentUser = req.user || req.session?.user;
            if (!currentUser) {
                return res.status(401).json({
                    message: "Authentication required",
                    code: "AUTH_REQUIRED"
                });
            }
            if (!id) {
                return res.status(400).json({
                    error: "Bad request",
                    message: "Bug ID is required"
                });
            }
            const bug = await storage.getBug(id, currentUser.id, currentUser.role, currentUser.organizationId);
            if (!bug) {
                return res.status(404).json({
                    error: "Not found",
                    message: "Bug not found or access denied"
                });
            }
            res.json(bug);
        }
        catch (error) {
            console.error("\u274C Error fetching bug:", error);
            res.status(500).json({
                error: "Internal server error",
                message: "Failed to fetch bug"
            });
        }
    });
    app2.post("/api/bugs", requireAuth, upload2.array("attachments", 10), async (req, res) => {
        try {
            const currentUser = req.user || req.session?.user;
            if (!currentUser) {
                return res.status(401).json({
                    message: "Authentication required",
                    code: "AUTH_REQUIRED"
                });
            }
            const validation = insertBugSchema.safeParse({
                ...req.body,
                createdBy: currentUser.id
            });
            if (!validation.success) {
                return res.status(400).json({
                    error: "Validation failed",
                    message: "Invalid bug data",
                    details: validation.error.issues
                });
            }
            const bugData = validation.data;
            const bug = await storage.createBug(bugData);
            if (req.files && req.files.length > 0) {
                console.log(`\u{1F4CE} Processing ${req.files.length} attachments for bug ${bug.id}`);
                for (const file of req.files) {
                    const documentData = {
                        name: file.originalname,
                        description: `Attachment for bug: ${bug.title}`,
                        documentType: "attachment",
                        filePath: `general/${file.filename}`,
                        fileName: file.originalname,
                        fileSize: file.size.toString(),
                        attachedToType: "bug",
                        attachedToId: bug.id,
                        uploadedById: currentUser.id
                    };
                    await storage.createDocument({
                        ...documentData,
                        isVisibleToTenants: false
                    });
                    console.log(`\u{1F4C4} Created attachment document for bug ${bug.id}: ${file.originalname}`);
                }
            }
            console.log(`\u{1F41B} Created new bug ${bug.id} by user ${currentUser.id}`);
            res.status(201).json(bug);
        }
        catch (error) {
            console.error("\u274C Error creating bug:", error);
            res.status(500).json({
                error: "Internal server error",
                message: "Failed to create bug"
            });
        }
    });
    app2.patch("/api/bugs/:id", requireAuth, async (req, res) => {
        try {
            const { id } = req.params;
            const currentUser = req.user || req.session?.user;
            if (!currentUser) {
                return res.status(401).json({
                    message: "Authentication required",
                    code: "AUTH_REQUIRED"
                });
            }
            if (!id) {
                return res.status(400).json({
                    error: "Bad request",
                    message: "Bug ID is required"
                });
            }
            const updateSchema = zod_12.z.object({
                title: zod_12.z.string().min(1, "Title is required").max(200, "Title must not exceed 200 characters").optional(),
                description: zod_12.z.string().min(10, "Description must be at least 10 characters").max(2e3, "Description must not exceed 2000 characters").optional(),
                category: zod_12.z.enum([
                    "ui_ux",
                    "functionality",
                    "performance",
                    "data",
                    "security",
                    "integration",
                    "other"
                ]).optional(),
                page: zod_12.z.string().min(1, "Page is required").optional(),
                priority: zod_12.z.enum(["low", "medium", "high", "critical"]).optional(),
                reproductionSteps: zod_12.z.string().optional(),
                environment: zod_12.z.string().optional(),
                status: zod_12.z.enum(["new", "acknowledged", "in_progress", "resolved", "closed"]).optional(),
                assignedTo: zod_12.z.string().uuid().nullable().optional(),
                notes: zod_12.z.string().optional(),
                resolvedBy: zod_12.z.string().uuid().nullable().optional(),
                resolvedAt: zod_12.z.date().nullable().optional()
            });
            const validation = updateSchema.safeParse(req.body);
            if (!validation.success) {
                return res.status(400).json({
                    error: "Validation failed",
                    message: "Invalid update data",
                    details: validation.error.issues
                });
            }
            const updates = validation.data;
            const bug = await storage.updateBug(id, updates, currentUser.id, currentUser.role);
            if (!bug) {
                return res.status(404).json({
                    error: "Not found",
                    message: "Bug not found or access denied"
                });
            }
            console.log(`\u{1F4DD} Updated bug ${id} by user ${currentUser.id}`);
            res.json(bug);
        }
        catch (error) {
            console.error("\u274C Error updating bug:", error);
            res.status(500).json({
                error: "Internal server error",
                message: "Failed to update bug"
            });
        }
    });
    app2.delete("/api/bugs/:id", requireAuth, async (req, res) => {
        try {
            const { id } = req.params;
            const currentUser = req.user || req.session?.user;
            if (!currentUser) {
                return res.status(401).json({
                    message: "Authentication required",
                    code: "AUTH_REQUIRED"
                });
            }
            if (!id) {
                return res.status(400).json({
                    error: "Bad request",
                    message: "Bug ID is required"
                });
            }
            const deleted = await storage.deleteBug(id, currentUser.id, currentUser.role);
            if (!deleted) {
                return res.status(404).json({
                    error: "Not found",
                    message: "Bug not found or access denied"
                });
            }
            console.log(`\u{1F5D1}\uFE0F Deleted bug ${id} by user ${currentUser.id}`);
            res.status(204).send();
        }
        catch (error) {
            console.error("\u274C Error deleting bug:", error);
            res.status(500).json({
                error: "Internal server error",
                message: "Failed to delete bug"
            });
        }
    });
}
// server/api/bills.ts
init_db();
const drizzle_orm_18 = require("drizzle-orm");
init_storage();
const zod_13 = require("zod");
// server/services/bill-generation-service.ts
init_db();
init_financial();
init_schema();
const drizzle_orm_19 = require("drizzle-orm");
const uuid_3 = require("uuid");
var BillGenerationService = class {
    /**
     * Get bills by reference (auto-generated bills linked to a parent).
     * @param parentBillId
     */
    async getBillsByReference(parentBillId) {
        try {
            const existingBills = await db.select().from(bills).where((0, drizzle_orm_19.eq)(bills.reference, parentBillId));
            return existingBills;
        }
        catch (error) {
            console.error("\u274C Error getting bills by reference:", error);
            return [];
        }
    }
    /**
     * Set end date for a recurrent bill (stops future auto-generation).
     * @param billId
     * @param endDate
     */
    async setRecurrenceEndDate(billId, endDate) {
        try {
            await db.update(bills).set({
                endDate: endDate.toISOString().split("T")[0],
                updatedAt: /* @__PURE__ */ new Date()
            }).where((0, drizzle_orm_19.eq)(bills.id, billId));
        }
        catch (error) {
            console.error("\u274C Error setting recurrence end date:", error);
            throw error;
        }
    }
    /**
     * Generate future bill instances for a recurrent bill up to 3 years.
     * Creates actual bill records that users can interact with individually.
     * @param parentBill
     */
    async generateFutureBillInstances(parentBill) {
        if (parentBill.paymentType !== "recurrent") {
            throw new Error("Only recurrent bills can generate future instances");
        }
        const startDate = new Date(parentBill.startDate);
        startDate.setFullYear(startDate.getFullYear() + 1);
        let endDate;
        if (parentBill.endDate) {
            endDate = new Date(parentBill.endDate);
        }
        else {
            endDate = /* @__PURE__ */ new Date();
            endDate.setFullYear(endDate.getFullYear() + 3);
        }
        const existingBills = await this.getBillsByReference(parentBill.id);
        if (existingBills.length > 0) {
            console.log(`\u26A0\uFE0F Found ${existingBills.length} existing auto-generated bills, skipping generation`);
            return {
                billsCreated: 0,
                generatedUntil: endDate.toISOString().split("T")[0]
            };
        }
        const generatedBills = [];
        const currentDate = new Date(startDate);
        let billsCreated = 0;
        const scheduleType = this.detectScheduleType(parentBill);
        const occurrences = this.calculateOccurrences(currentDate, endDate, scheduleType);
        for (const occurrenceDate of occurrences) {
            const paymentParts = this.calculatePaymentParts(parentBill, occurrenceDate);
            for (let partIndex = 0; partIndex < paymentParts.length; partIndex++) {
                const paymentPart = paymentParts[partIndex];
                const generatedBill = {
                    id: (0, uuid_3.v4)(),
                    buildingId: parentBill.buildingId,
                    billNumber: this.generateBillNumber(parentBill, occurrenceDate, partIndex),
                    title: this.generateBillTitle(parentBill, occurrenceDate, partIndex, paymentParts.length),
                    description: `Auto-generated from: ${parentBill.title}`,
                    category: parentBill.category,
                    vendor: parentBill.vendor || "Auto-Generated",
                    paymentType: "unique",
                    // Generated bills are unique payments
                    schedulePayment: "unique",
                    costs: [paymentPart.amount.toString()],
                    totalAmount: paymentPart.amount.toString(),
                    startDate: paymentPart.dueDate.toISOString().split("T")[0],
                    endDate: null,
                    status: "draft",
                    documentPath: null,
                    documentName: null,
                    isAiAnalyzed: false,
                    aiAnalysisData: null,
                    notes: `Auto-generated from: ${parentBill.title} (Bill #${parentBill.billNumber}). Generated as part ${partIndex + 1}/${paymentParts.length} for ${occurrenceDate.toLocaleDateString()}.`,
                    autoGenerated: true,
                    reference: parentBill.id,
                    createdBy: parentBill.createdBy,
                    createdAt: /* @__PURE__ */ new Date(),
                    updatedAt: /* @__PURE__ */ new Date()
                };
                generatedBills.push(generatedBill);
                billsCreated++;
                if (generatedBills.length >= 100) {
                    await this.insertBillsBatch(generatedBills);
                    generatedBills.length = 0;
                }
            }
        }
        if (generatedBills.length > 0) {
            await this.insertBillsBatch(generatedBills);
        }
        return {
            billsCreated,
            generatedUntil: endDate.toISOString().split("T")[0]
        };
    }
    /**
     * Handle multiple payment logic for bills.
     * Examples:
     * - 60% now, 40% in 2 months
     * - 12 monthly payments of equal amounts
     * - Quarterly payments with varying amounts.
     * @param parentBill
     * @param occurrenceDate
     */
    calculatePaymentParts(parentBill, occurrenceDate) {
        const costs = parentBill.costs.map((cost) => parseFloat(cost));
        const paymentParts = [];
        if (costs.length === 1) {
            paymentParts.push({
                amount: costs[0],
                dueDate: new Date(occurrenceDate),
                partNumber: 1
            });
        }
        else {
            costs.forEach((amount, _index) => {
                const dueDate = new Date(occurrenceDate);
                dueDate.setMonth(dueDate.getMonth() + _index);
                paymentParts.push({
                    amount,
                    dueDate,
                    partNumber: _index + 1
                });
            });
        }
        return paymentParts;
    }
    /**
     * Detect schedule type from parent bill characteristics.
     * @param parentBill
     */
    detectScheduleType(parentBill) {
        const costs = parentBill.costs || [];
        if (costs.length === 12) {
            return "monthly";
        }
        else if (costs.length === 4) {
            return "quarterly";
        }
        else if (costs.length === 2) {
            return "yearly";
        }
        else if (costs.length === 1) {
            const title = parentBill.title.toLowerCase();
            if (title.includes("annual") || title.includes("yearly")) {
                return "yearly";
            }
            else if (title.includes("quarterly")) {
                return "quarterly";
            }
            else if (title.includes("monthly")) {
                return "monthly";
            }
            else {
                return "yearly";
            }
        }
        return "yearly";
    }
    /**
     * Calculate all occurrence dates based on schedule type.
     * @param startDate
     * @param endDate
     * @param scheduleType
     */
    calculateOccurrences(startDate, endDate, scheduleType) {
        const occurrences = [];
        const currentDate = new Date(startDate);
        while (currentDate <= endDate) {
            occurrences.push(new Date(currentDate));
            switch (scheduleType) {
                case "weekly":
                    currentDate.setDate(currentDate.getDate() + 7);
                    break;
                case "monthly":
                    currentDate.setMonth(currentDate.getMonth() + 1);
                    break;
                case "quarterly":
                    currentDate.setMonth(currentDate.getMonth() + 3);
                    break;
                case "yearly":
                    currentDate.setFullYear(currentDate.getFullYear() + 1);
                    break;
                default:
                    throw new Error(`Unknown schedule type: ${scheduleType}`);
            }
            if (occurrences.length > 1e4) {
                break;
            }
        }
        return occurrences;
    }
    /**
     * Handle custom recurring dates (yearly repetition).
     * @param startDate
     * @param endDate
     * @param customDates
     */
    calculateCustomOccurrences(startDate, endDate, customDates) {
        const occurrences = [];
        const startYear = startDate.getFullYear();
        const endYear = endDate.getFullYear();
        for (let year = startYear; year <= endYear; year++) {
            for (const dateStr of customDates) {
                const customDate = new Date(dateStr);
                customDate.setFullYear(year);
                if (customDate >= startDate && customDate <= endDate) {
                    occurrences.push(new Date(customDate));
                }
            }
        }
        return occurrences.sort((a, b) => a.getTime() - b.getTime());
    }
    /**
     * Generate unique bill number for auto-generated bills.
     * @param parentBill
     * @param occurrenceDate
     * @param partIndex
     */
    generateBillNumber(parentBill, occurrenceDate, partIndex) {
        const dateStr = occurrenceDate.toISOString().slice(0, 7);
        const partSuffix = partIndex > 0 ? `-P${partIndex + 1}` : "";
        return `${parentBill.billNumber}-${dateStr}${partSuffix}`;
    }
    /**
     * Generate descriptive title for auto-generated bills.
     * @param parentBill
     * @param occurrenceDate
     * @param partIndex
     * @param totalParts
     */
    generateBillTitle(parentBill, occurrenceDate, partIndex, totalParts) {
        const monthYear = occurrenceDate.toLocaleDateString("en-US", {
            month: "long",
            year: "numeric"
        });
        if (totalParts > 1) {
            return `${parentBill.title} ${monthYear} (Auto-Generated)`;
        }
        else {
            return `${parentBill.title} ${monthYear} (Auto-Generated)`;
        }
    }
    /**
     * Clean up existing auto-generated bills for a parent bill.
     * @param parentBillId
     */
    async cleanupExistingGeneratedBills(parentBillId) {
        try {
            const result = await db.delete(bills).where((0, drizzle_orm_19.and)((0, drizzle_orm_19.eq)(bills.reference, parentBillId), (0, drizzle_orm_19.eq)(bills.autoGenerated, true), (0, drizzle_orm_19.or)((0, drizzle_orm_19.eq)(bills.status, "draft"), (0, drizzle_orm_19.eq)(bills.status, "sent"))));
            console.log(`\u{1F5D1}\uFE0F Cleaned up auto-generated bills for parent bill ${parentBillId}`);
        }
        catch (error) {
            console.error("\u274C Error cleaning up generated bills:", error);
            throw error;
        }
    }
    /**
     * Batch insert bills for performance.
     * @param billBatch
     */
    async insertBillsBatch(billBatch) {
        try {
            await db.insert(bills).values(billBatch);
            console.log(`\u2705 Batch inserted ${billBatch.length} bills`);
        }
        catch (error) {
            console.error("\u274C Error inserting bill batch:", error);
            throw error;
        }
    }
    /**
     * Update all future auto-generated bills when the parent bill is modified.
     * @param parentBillId
     * @param updates
     */
    async updateGeneratedBillsFromParent(parentBillId, updates) {
        const generatedBills = await db.select().from(bills).where((0, drizzle_orm_19.and)((0, drizzle_orm_19.eq)(bills.reference, parentBillId), (0, drizzle_orm_19.eq)(bills.autoGenerated, true)));
        let billsUpdated = 0;
        for (const generatedBill of generatedBills) {
            const updatedFields = {};
            if (updates.title) {
                const titleParts = generatedBill.title.split(" - ");
                if (titleParts.length >= 2) {
                    updatedFields.title = `${updates.title} - ${titleParts.slice(1).join(" - ")}`;
                }
            }
            if (updates.category) {
                updatedFields.category = updates.category;
            }
            if (updates.vendor) {
                updatedFields.vendor = updates.vendor;
            }
            if (updates.notes) {
                updatedFields.notes = `Auto-generated bill - ${updates.notes}`;
            }
            if (Object.keys(updatedFields).length > 0) {
                updatedFields.updatedAt = /* @__PURE__ */ new Date();
                await db.update(bills).set(updatedFields).where((0, drizzle_orm_19.eq)(bills.id, generatedBill.id));
                billsUpdated++;
            }
        }
        return { billsUpdated };
    }
    /**
     * Delete future auto-generated bills with cascade options.
     * @param parentBillId
     * @param deleteAllFuture
     */
    async deleteGeneratedBills(parentBillId, deleteAllFuture = false) {
        console.log(`\u{1F5D1}\uFE0F Deleting generated bills for parent ${parentBillId}, deleteAllFuture: ${deleteAllFuture}`);
        let whereCondition;
        if (deleteAllFuture) {
            whereCondition = (0, drizzle_orm_19.and)((0, drizzle_orm_19.eq)(bills.reference, parentBillId), (0, drizzle_orm_19.eq)(bills.autoGenerated, true), (0, drizzle_orm_19.gte)(bills.startDate, ( /* @__PURE__ */new Date()).toISOString().split("T")[0]));
        }
        else {
            whereCondition = (0, drizzle_orm_19.and)((0, drizzle_orm_19.eq)(bills.reference, parentBillId), (0, drizzle_orm_19.eq)(bills.autoGenerated, true), (0, drizzle_orm_19.or)((0, drizzle_orm_19.eq)(bills.status, "draft"), (0, drizzle_orm_19.eq)(bills.status, "sent")));
        }
        const result = await db.delete(bills).where(whereCondition);
        const billsDeleted = result.rowCount || 0;
        return { billsDeleted };
    }
    /**
     * Get statistics about generated bills for a parent bill.
     * @param parentBillId
     */
    async getGeneratedBillsStats(parentBillId) {
        const generatedBills = await db.select().from(bills).where((0, drizzle_orm_19.and)((0, drizzle_orm_19.eq)(bills.reference, parentBillId), (0, drizzle_orm_19.eq)(bills.autoGenerated, true)));
        const today = ( /* @__PURE__ */new Date()).toISOString().split("T")[0];
        const stats = {
            totalGenerated: generatedBills.length,
            paidBills: 0,
            pendingBills: 0,
            futureBills: 0,
            totalAmount: 0,
            paidAmount: 0
        };
        for (const bill of generatedBills) {
            const billAmount = parseFloat(bill.totalAmount);
            stats.totalAmount += billAmount;
            if (bill.status === "paid") {
                stats.paidBills++;
                stats.paidAmount += billAmount;
            }
            else if (bill.startDate > today) {
                stats.futureBills++;
            }
            else {
                stats.pendingBills++;
            }
        }
        return stats;
    }
    /**
     * Mark a bill as paid and update related tracking.
     * @param billId
     * @param paymentDate
     */
    async markBillAsPaid(billId, paymentDate) {
        const paymentReceivedDate = paymentDate || /* @__PURE__ */ new Date();
        await db.update(bills).set({
            status: "paid",
            notes: `Payment confirmed on ${paymentReceivedDate.toLocaleDateString()}`,
            updatedAt: /* @__PURE__ */ new Date()
        }).where((0, drizzle_orm_19.eq)(bills.id, billId));
    }
    /**
     * Get a system user for automated operations.
     */
    async getSystemUser() {
        const systemUsers = await db.select({ id: users.id }).from(users).where((0, drizzle_orm_19.eq)(users.role, "admin")).limit(1);
        if (systemUsers.length === 0) {
            throw new Error("No active users found for system operations");
        }
        return systemUsers[0];
    }
};
var billGenerationService = new BillGenerationService();
// server/services/money-flow-automation.ts
var moneyFlowAutomationService = {
    async generateForBill(billId) {
        return 0;
    },
    async generateForResidence(residenceId) {
        return 0;
    },
    async getMoneyFlowStatistics() {
        return {
            totalEntries: 0,
            billEntries: 0,
            residenceEntries: 0,
            lastGeneratedAt: null
        };
    }
};
// server/services/monthly-budget-service.ts
init_db();
init_schema();
const drizzle_orm_20 = require("drizzle-orm");
var { monthlyBudgets: monthlyBudgets2, moneyFlow, buildings: buildings2, users: users3 } = schema_exports;
var MonthlyBudgetService = class {
    constructor() {
        this.YEARS_TO_PROJECT = 3;
    }
    /**
     * Populate monthly budget entries for all buildings.
     * Creates entries from construction date to 3 years in the future.
     */
    async populateAllMonthlyBudgets() {
        let budgetsCreated = 0;
        let buildingsProcessed = 0;
        try {
            const activeBuildings = await db.select().from(buildings2).where((0, drizzle_orm_20.eq)(buildings2.isActive, true));
            for (const building of activeBuildings) {
                try {
                    const buildingBudgets = await this.populateBudgetsForBuilding(building);
                    budgetsCreated += buildingBudgets;
                    buildingsProcessed++;
                    console.log(`\u2705 Created ${buildingBudgets} budget entries for building: ${building.name}`);
                }
                catch (error) {
                    console.error(`\u274C Error processing building ${building.name}:`, error);
                }
            }
            console.log(`\u{1F4CA} Monthly budget population completed:
        - Buildings processed: ${buildingsProcessed}
        - Budget entries created: ${budgetsCreated}`);
            return {
                budgetsCreated,
                buildingsProcessed
            };
        }
        catch (error) {
            console.error("\u274C Error populating monthly budgets:", error);
            throw error;
        }
    }
    /**
     * Populate monthly budget entries for a specific building.
     * @param building
     */
    async populateBudgetsForBuilding(building) {
        const constructionDate = /* @__PURE__ */ new Date();
        if (building.yearBuilt) {
            constructionDate.setFullYear(building.yearBuilt, 0, 1);
        }
        else {
            constructionDate.setFullYear(constructionDate.getFullYear(), 0, 1);
        }
        const endDate = /* @__PURE__ */ new Date();
        endDate.setFullYear(endDate.getFullYear() + this.YEARS_TO_PROJECT, 11, 31);
        console.log(`\u{1F4C5} Processing building ${building.name} from ${constructionDate.toISOString().slice(0, 10)} to ${endDate.toISOString().slice(0, 10)}`);
        const { incomeCategories, expenseCategories } = await this.getCategoriesForBuilding(building.id);
        console.log(`\u{1F4CA} Found ${incomeCategories.length} income categories and ${expenseCategories.length} expense categories`);
        await this.cleanupExistingBudgets(building.id);
        const budgetEntries = [];
        const systemUser = await this.getSystemUser();
        const currentDate = new Date(constructionDate);
        while (currentDate <= endDate) {
            const year = currentDate.getFullYear();
            const month = currentDate.getMonth() + 1;
            const { incomes, spendings } = await this.getAggregatedAmountsForMonth(building.id, year, month, incomeCategories, expenseCategories);
            budgetEntries.push({
                buildingId: building.id,
                year,
                month,
                incomeTypes: incomeCategories,
                incomes,
                // Keep as number array
                spendingTypes: expenseCategories,
                spendings,
                // Keep as number array
                approved: false,
                approvedBy: void 0,
                originalBudgetId: void 0
            });
            currentDate.setMonth(currentDate.getMonth() + 1);
            if (budgetEntries.length > 5e3) {
                break;
            }
        }
        if (budgetEntries.length > 0) {
            await this.insertBudgetEntriesInBatches(budgetEntries);
        }
        return budgetEntries.length;
    }
    /**
     * Get distinct income and expense categories from money_flow for a specific building.
     * @param buildingId
     */
    async getCategoriesForBuilding(buildingId) {
        const incomeResult = await db.selectDistinct({ category: moneyFlow.category }).from(moneyFlow).where((0, drizzle_orm_20.and)((0, drizzle_orm_20.eq)(moneyFlow.buildingId, buildingId), (0, drizzle_orm_20.eq)(moneyFlow.type, "income")));
        const expenseResult = await db.selectDistinct({ category: moneyFlow.category }).from(moneyFlow).where((0, drizzle_orm_20.and)((0, drizzle_orm_20.eq)(moneyFlow.buildingId, buildingId), (0, drizzle_orm_20.eq)(moneyFlow.type, "expense")));
        const incomeCategories = incomeResult.map((r) => r.category);
        const expenseCategories = expenseResult.map((r) => r.category);
        const defaultIncomeCategories = [
            "monthly_fees",
            "special_assessment",
            "late_fees",
            "parking_fees",
            "utility_reimbursement",
            "insurance_claim",
            "other_income"
        ];
        const defaultExpenseCategories = [
            "bill_payment",
            "maintenance_expense",
            "administrative_expense",
            "professional_services",
            "other_expense"
        ];
        return {
            incomeCategories: incomeCategories.length > 0 ? incomeCategories : defaultIncomeCategories,
            expenseCategories: expenseCategories.length > 0 ? expenseCategories : defaultExpenseCategories
        };
    }
    /**
     * Get aggregated income and expense amounts for a specific month/year.
     * @param buildingId
     * @param year
     * @param month
     * @param incomeCategories
     * @param expenseCategories
     */
    async getAggregatedAmountsForMonth(buildingId, year, month, incomeCategories, expenseCategories) {
        const startDate = new Date(year, month - 1, 1);
        const endDate = new Date(year, month, 0);
        const startDateStr = startDate.toISOString().split("T")[0];
        const endDateStr = endDate.toISOString().split("T")[0];
        const incomes = [];
        for (const category of incomeCategories) {
            const result = await db.select({
                total: (0, drizzle_orm_20.sql) `COALESCE(SUM(CAST(${moneyFlow.amount} AS DECIMAL)), 0)`
            }).from(moneyFlow).where((0, drizzle_orm_20.and)((0, drizzle_orm_20.eq)(moneyFlow.buildingId, buildingId), (0, drizzle_orm_20.eq)(moneyFlow.type, "income"), (0, drizzle_orm_20.eq)(moneyFlow.category, category), (0, drizzle_orm_20.gte)(moneyFlow.transactionDate, startDateStr), (0, drizzle_orm_20.lte)(moneyFlow.transactionDate, endDateStr)));
            incomes.push(parseFloat(result[0]?.total || "0"));
        }
        const spendings = [];
        for (const category of expenseCategories) {
            const result = await db.select({
                total: (0, drizzle_orm_20.sql) `COALESCE(SUM(CAST(${moneyFlow.amount} AS DECIMAL)), 0)`
            }).from(moneyFlow).where((0, drizzle_orm_20.and)((0, drizzle_orm_20.eq)(moneyFlow.buildingId, buildingId), (0, drizzle_orm_20.eq)(moneyFlow.type, "expense"), (0, drizzle_orm_20.eq)(moneyFlow.category, category), (0, drizzle_orm_20.gte)(moneyFlow.transactionDate, startDateStr), (0, drizzle_orm_20.lte)(moneyFlow.transactionDate, endDateStr)));
            spendings.push(parseFloat(result[0]?.total || "0"));
        }
        return { incomes, spendings };
    }
    /**
     * Clean up existing budget entries for a building to avoid duplicates.
     * @param buildingId
     */
    async cleanupExistingBudgets(buildingId) {
        await db.delete(monthlyBudgets2).where((0, drizzle_orm_20.eq)(monthlyBudgets2.buildingId, buildingId));
    }
    /**
     * Insert budget entries in batches to avoid database constraints.
     * @param entries
     * @param batchSize
     */
    async insertBudgetEntriesInBatches(entries, batchSize = 100) {
        for (let i = 0; i < entries.length; i += batchSize) {
            const batch = entries.slice(i, i + batchSize);
            try {
                await db.insert(monthlyBudgets2).values(batch);
            }
            catch (error) {
                console.error(`\u274C Error inserting batch at index ${i}:`, error);
                for (const entry of batch) {
                    try {
                        await db.insert(monthlyBudgets2).values(entry);
                    }
                    catch (individualError) {
                        console.error(`\u274C Error inserting individual budget entry:`, individualError);
                    }
                }
            }
        }
    }
    /**
     * Get or create a system user for automated entries.
     */
    async getSystemUser() {
        const existingUser = await db.select({ id: users3.id }).from(users3).where((0, drizzle_orm_20.eq)(users3.email, "system@koveo-gestion.com")).limit(1);
        if (existingUser.length > 0) {
            return existingUser[0];
        }
        const adminUser = await db.select({ id: users3.id }).from(users3).where((0, drizzle_orm_20.eq)(users3.role, "admin")).limit(1);
        if (adminUser.length > 0) {
            return adminUser[0];
        }
        const anyUser = await db.select({ id: users3.id }).from(users3).where((0, drizzle_orm_20.eq)(users3.isActive, true)).limit(1);
        if (anyUser.length > 0) {
            return anyUser[0];
        }
        throw new Error("No active users found for system operations");
    }
    /**
     * Repopulate budgets for a specific building (useful when money flow data changes).
     * @param buildingId
     */
    async repopulateBudgetsForBuilding(buildingId) {
        const building = await db.select().from(buildings2).where((0, drizzle_orm_20.eq)(buildings2.id, buildingId)).limit(1);
        if (building.length === 0) {
            throw new Error(`Building ${buildingId} not found`);
        }
        const budgetsCreated = await this.populateBudgetsForBuilding(building[0]);
        console.log(`\u2705 Repopulated ${budgetsCreated} budget entries for building ${building[0].name}`);
        return budgetsCreated;
    }
    /**
     * Get budget statistics.
     */
    async getBudgetStatistics() {
        const [totalResult] = await db.select({ count: (0, drizzle_orm_20.sql) `count(*)::int` }).from(monthlyBudgets2);
        const [buildingsResult] = await db.select({ count: (0, drizzle_orm_20.sql) `count(DISTINCT ${monthlyBudgets2.buildingId})::int` }).from(monthlyBudgets2);
        const [oldestResult] = await db.select({
            year: monthlyBudgets2.year,
            month: monthlyBudgets2.month
        }).from(monthlyBudgets2).orderBy(monthlyBudgets2.year, monthlyBudgets2.month).limit(1);
        const [newestResult] = await db.select({
            year: monthlyBudgets2.year,
            month: monthlyBudgets2.month
        }).from(monthlyBudgets2).orderBy((0, drizzle_orm_20.sql) `${monthlyBudgets2.year} DESC, ${monthlyBudgets2.month} DESC`).limit(1);
        const oldestDate = oldestResult ? `${oldestResult.year}-${String(oldestResult.month).padStart(2, "0")}` : null;
        const newestDate = newestResult ? `${newestResult.year}-${String(newestResult.month).padStart(2, "0")}` : null;
        return {
            totalBudgetEntries: totalResult.count,
            buildingsWithBudgets: buildingsResult.count,
            oldestBudgetDate: oldestDate,
            newestBudgetDate: newestDate
        };
    }
};
var monthlyBudgetService = new MonthlyBudgetService();
// server/services/delayed-update-service.ts
var DelayedUpdateService = class _DelayedUpdateService {
    /**
     *
     */
    constructor() {
        this.DELAY_MINUTES = 15;
        this.DELAY_MS = this.DELAY_MINUTES * 60 * 1e3;
        // 15 minutes in milliseconds
        // Track pending updates to avoid duplicates
        this.pendingBillUpdates = /* @__PURE__ */ new Set();
        this.pendingResidenceUpdates = /* @__PURE__ */ new Set();
        this.pendingBuildingBudgetUpdates = /* @__PURE__ */ new Set();
    }
    /**
     *
     */
    static getInstance() {
        if (!_DelayedUpdateService.instance) {
            _DelayedUpdateService.instance = new _DelayedUpdateService();
        }
        return _DelayedUpdateService.instance;
    }
    /**
     * Schedule money flow update for a bill after 15-minute delay.
     * @param billId
     */
    scheduleBillUpdate(billId) {
        if (this.pendingBillUpdates.has(billId)) {
            return;
        }
        this.pendingBillUpdates.add(billId);
        console.log(`\u23F0 Scheduling money flow update for bill ${billId} in ${this.DELAY_MINUTES} minutes`);
        setTimeout(async () => {
            try {
                const moneyFlowEntries = await moneyFlowAutomationService.generateForBill(billId);
                const buildingId = await this.getBuildingIdFromBill(billId);
                if (buildingId) {
                    await this.scheduleBudgetUpdate(buildingId);
                }
            }
            finally {
                this.pendingBillUpdates.delete(billId);
            }
        }, this.DELAY_MS);
    }
    /**
     * Schedule money flow update for a residence after 15-minute delay.
     * @param residenceId
     */
    scheduleResidenceUpdate(residenceId) {
        if (this.pendingResidenceUpdates.has(residenceId)) {
            return;
        }
        this.pendingResidenceUpdates.add(residenceId);
        console.log(`\u23F0 Scheduling money flow update for residence ${residenceId} in ${this.DELAY_MINUTES} minutes`);
        setTimeout(async () => {
            try {
                const moneyFlowEntries = await moneyFlowAutomationService.generateForResidence(residenceId);
                console.log(`\u{1F4B0} Generated ${moneyFlowEntries} money flow entries for residence ${residenceId}`);
                const buildingId = await this.getBuildingIdFromResidence(residenceId);
                if (buildingId) {
                    await this.scheduleBudgetUpdate(buildingId);
                }
            }
            finally {
                this.pendingResidenceUpdates.delete(residenceId);
            }
        }, this.DELAY_MS);
    }
    /**
     * Schedule budget update for a building after money flow changes.
     * This is called internally after money flow updates complete.
     * @param buildingId
     */
    async scheduleBudgetUpdate(buildingId) {
        if (this.pendingBuildingBudgetUpdates.has(buildingId)) {
            console.log(`\u{1F3E2} Building ${buildingId} already has a pending budget update, skipping duplicate`);
            return;
        }
        this.pendingBuildingBudgetUpdates.add(buildingId);
        console.log(`\u23F0 Scheduling budget update for building ${buildingId} in ${this.DELAY_MINUTES} minutes`);
        setTimeout(async () => {
            try {
                const budgetEntries = await monthlyBudgetService.repopulateBudgetsForBuilding(buildingId);
            }
            finally {
                this.pendingBuildingBudgetUpdates.delete(buildingId);
            }
        }, this.DELAY_MS);
    }
    /**
     * Get building ID from bill ID.
     * @param billId
     */
    async getBuildingIdFromBill(billId) {
        try {
            const { db: db2 } = await Promise.resolve().then(() => (init_db(), db_exports));
            const { bills: bills3 } = await Promise.resolve().then(() => (init_schema(), schema_exports));
            const { eq: eq15 } = await Promise.resolve().then(() => __importStar(require("drizzle-orm")));
            const result = await db2.select({ buildingId: bills3.buildingId }).from(bills3).where(eq15(bills3.id, billId)).limit(1);
            return result.length > 0 ? result[0].buildingId : null;
        }
        catch (error) {
            console.error("\u274C Error getting building ID:", error);
            return null;
        }
    }
    /**
     * Get building ID from residence ID.
     * @param residenceId
     */
    async getBuildingIdFromResidence(residenceId) {
        try {
            const { db: db2 } = await Promise.resolve().then(() => (init_db(), db_exports));
            const { residences: residences2 } = await Promise.resolve().then(() => (init_schema(), schema_exports));
            const { eq: eq15 } = await Promise.resolve().then(() => __importStar(require("drizzle-orm")));
            const result = await db2.select({ buildingId: residences2.buildingId }).from(residences2).where(eq15(residences2.id, residenceId)).limit(1);
            return result.length > 0 ? result[0].buildingId : null;
        }
        catch (error) {
            console.error("\u274C Error getting building ID:", error);
            return null;
        }
    }
    /**
     * Force immediate update (for testing or urgent updates).
     * @param billId
     */
    async forceImmediateBillUpdate(billId) {
        const moneyFlowEntries = await moneyFlowAutomationService.generateForBill(billId);
        const buildingId = await this.getBuildingIdFromBill(billId);
        if (buildingId) {
            const budgetEntries = await monthlyBudgetService.repopulateBudgetsForBuilding(buildingId);
        }
    }
    /**
     * Force immediate update (for testing or urgent updates).
     * @param residenceId
     */
    async forceImmediateResidenceUpdate(residenceId) {
        const moneyFlowEntries = await moneyFlowAutomationService.generateForResidence(residenceId);
        console.log(`\u{1F4B0} Generated ${moneyFlowEntries} money flow entries for residence ${residenceId}`);
        const buildingId = await this.getBuildingIdFromResidence(residenceId);
        if (buildingId) {
            const budgetEntries = await monthlyBudgetService.repopulateBudgetsForBuilding(buildingId);
        }
    }
    /**
     * Get current status of pending updates.
     */
    getStatus() {
        return {
            delayMinutes: this.DELAY_MINUTES,
            pendingBillUpdates: this.pendingBillUpdates.size,
            pendingResidenceUpdates: this.pendingResidenceUpdates.size,
            pendingBudgetUpdates: this.pendingBuildingBudgetUpdates.size
        };
    }
};
var delayedUpdateService = DelayedUpdateService.getInstance();
// server/services/gemini-bill-analyzer.ts
const fs4 = __importStar(require("fs"));
const genai_1 = require("@google/genai");
var ai = new genai_1.GoogleGenAI({ apiKey: process.env.GEMINI_API_KEY || "" });
var GeminiBillAnalyzer = class {
    /**
     * Analyze a bill document using Gemini 2.5 Pro.
     * @param imagePath
     */
    async analyzeBillDocument(imagePath) {
        try {
            const imageBytes = fs4.readFileSync(imagePath);
            const systemPrompt = `You are an expert bill analysis AI. Analyze this bill/invoice document and extract key information.
      
      Extract the following information and respond with JSON in this exact format:
      {
        "title": "Brief descriptive title for this bill",
        "vendor": "Company or service provider name",
        "totalAmount": "Total amount as decimal string (e.g., '1234.56')",
        "category": "One of: insurance, maintenance, salary, utilities, cleaning, security, landscaping, professional_services, administration, repairs, supplies, taxes, technology, reserves, other",
        "description": "Brief description of services/products",
        "dueDate": "Due date in YYYY-MM-DD format if found",
        "issueDate": "Issue date in YYYY-MM-DD format if found", 
        "billNumber": "Bill/invoice number if found",
        "confidence": 0.85
      }
      
      Guidelines:
      - Use clear, concise titles (e.g., "Hydro-Qu\xE9bec Electricity Bill", "Property Insurance Premium")
      - Map categories intelligently (electricity = utilities, legal fees = professional_services, etc.)
      - Extract exact amounts without currency symbols
      - Confidence should reflect how clear the document is (0.0-1.0)
      - If information is unclear, use best guess but lower confidence
      `;
            const contents = [
                {
                    inlineData: {
                        _data: imageBytes.toString("base64"),
                        mimeType: "image/jpeg"
                    }
                },
                `Analyze this bill/invoice document and extract the key information as specified.`
            ];
            const response = await ai.models.generateContent({
                model: "gemini-2.5-pro",
                config: {
                    systemInstruction: systemPrompt,
                    responseMimeType: "application/json",
                    responseSchema: {
                        type: "object",
                        properties: {
                            title: { type: "string" },
                            vendor: { type: "string" },
                            totalAmount: { type: "string" },
                            category: {
                                type: "string",
                                enum: [
                                    "insurance",
                                    "maintenance",
                                    "salary",
                                    "utilities",
                                    "cleaning",
                                    "security",
                                    "landscaping",
                                    "professional_services",
                                    "administration",
                                    "repairs",
                                    "supplies",
                                    "taxes",
                                    "technology",
                                    "reserves",
                                    "other"
                                ]
                            },
                            description: { type: "string" },
                            dueDate: { type: "string" },
                            issueDate: { type: "string" },
                            billNumber: { type: "string" },
                            confidence: { type: "number" }
                        },
                        required: ["title", "vendor", "totalAmount", "category", "confidence"]
                    }
                },
                contents
            });
            const rawJson = response.text;
            if (rawJson) {
                const analysis = JSON.parse(rawJson);
                analysis.confidence = Math.max(0, Math.min(1, analysis.confidence));
                analysis.totalAmount = this.sanitizeAmount(analysis.totalAmount);
                return analysis;
            }
            else {
                throw new Error("Empty response from Gemini");
            }
        }
        catch (error) {
            console.error("\u274C Error analyzing bill document:", error);
            throw new Error(`Failed to analyze bill document: ${error}`);
        }
    }
    /**
     * Sanitize and validate amount string.
     * @param amount
     */
    sanitizeAmount(amount) {
        const cleaned = amount.replace(/[^0-9.-]/g, "");
        const parsed = parseFloat(cleaned);
        if (isNaN(parsed)) {
            return "0.00";
        }
        return parsed.toFixed(2);
    }
    /**
     * Get suggested payment schedule based on bill type and amount.
     * @param category
     * @param amount
     */
    async suggestPaymentSchedule(category, amount) {
        try {
            const prompt = `Based on this bill category "${category}" and amount $${amount}, suggest the most appropriate payment schedule.
      
      Common patterns:
      - Utilities: Usually monthly recurring
      - Insurance: Usually yearly recurring  
      - Maintenance: Usually unique payments
      - Professional services: Usually unique payments
      - Supplies: Usually unique payments
      - Taxes: Usually yearly recurring
      
      Respond with JSON:
      {
        "paymentType": "unique" or "recurrent",
        "schedulePayment": "monthly", "quarterly", or "yearly" (only if recurrent),
        "reasoning": "Brief explanation of the recommendation"
      }`;
            const response = await ai.models.generateContent({
                model: "gemini-2.5-flash",
                config: {
                    responseMimeType: "application/json",
                    responseSchema: {
                        type: "object",
                        properties: {
                            paymentType: { type: "string", enum: ["unique", "recurrent"] },
                            schedulePayment: { type: "string", enum: ["monthly", "quarterly", "yearly"] },
                            reasoning: { type: "string" }
                        },
                        required: ["paymentType", "reasoning"]
                    }
                },
                contents: prompt
            });
            const result = JSON.parse(response.text || "{}");
            return result;
        }
        catch (error) {
            console.error("\u274C Error suggesting payment schedule:", error);
            return {
                paymentType: "unique",
                reasoning: "Default to unique payment due to analysis error"
            };
        }
    }
};
var geminiBillAnalyzer = new GeminiBillAnalyzer();
// server/api/bills.ts
init_schema();
const multer_3 = __importDefault(require("multer"));
const fs_4 = __importDefault(require("fs"));
var { buildings: buildings3, bills: bills2 } = schema_exports;
var billFilterSchema = zod_13.z.object({
    buildingId: zod_13.z.string().uuid(),
    category: zod_13.z.string().optional(),
    year: zod_13.z.string().optional(),
    status: zod_13.z.enum(["all", "draft", "sent", "overdue", "paid", "cancelled"]).optional(),
    months: zod_13.z.string().optional()
    // Comma-separated month numbers (e.g., "1,3,6,12")
});
var createBillSchema = zod_13.z.object({
    buildingId: zod_13.z.string().uuid(),
    title: zod_13.z.string().min(1),
    description: zod_13.z.string().optional(),
    category: zod_13.z.enum([
        "insurance",
        "maintenance",
        "salary",
        "utilities",
        "cleaning",
        "security",
        "landscaping",
        "professional_services",
        "administration",
        "repairs",
        "supplies",
        "taxes",
        "technology",
        "reserves",
        "other"
    ]),
    vendor: zod_13.z.string().optional(),
    paymentType: zod_13.z.enum(["unique", "recurrent"]),
    schedulePayment: zod_13.z.enum(["weekly", "monthly", "quarterly", "yearly", "custom"]).optional(),
    scheduleCustom: zod_13.z.array(zod_13.z.string()).optional(),
    costs: zod_13.z.array(zod_13.z.string()),
    totalAmount: zod_13.z.string(),
    startDate: zod_13.z.string(),
    endDate: zod_13.z.string().optional(),
    status: zod_13.z.enum(["draft", "sent", "overdue", "paid", "cancelled"]),
    notes: zod_13.z.string().optional()
});
var updateBillSchema = createBillSchema.partial();
var upload3 = (0, multer_3.default)({
    dest: "/tmp/uploads/",
    fileFilter: (req, file, cb) => {
        const allowedTypes = ["image/jpeg", "image/png", "image/gif", "application/pdf"];
        if (allowedTypes.includes(file.mimetype)) {
            cb(null, true);
        }
        else {
            cb(new Error("Only image and PDF files are allowed"));
        }
    },
    limits: {
        fileSize: 10 * 1024 * 1024
        // 10MB limit
    }
});
function registerBillRoutes(app2) {
    app2.get("/api/bills", requireAuth, async (req, res) => {
        try {
            const { buildingId, category, year, status = "all", months } = req.query;
            const conditions = [];
            if (buildingId && buildingId !== "all") {
                conditions.push((0, drizzle_orm_18.eq)(bills2.buildingId, buildingId));
            }
            if (category && category !== "all") {
                conditions.push((0, drizzle_orm_18.eq)(bills2.category, category));
            }
            if (year) {
                conditions.push((0, drizzle_orm_18.sql) `EXTRACT(YEAR FROM ${bills2.startDate}) = ${year}`);
            }
            if (status && status !== "all") {
                conditions.push((0, drizzle_orm_18.eq)(bills2.status, status));
            }
            if (months) {
                const monthNumbers = months.split(",").map((m) => parseInt(m.trim()));
                const monthConditions = monthNumbers.map((month) => (0, drizzle_orm_18.sql) `EXTRACT(MONTH FROM ${bills2.startDate}) = ${month}`);
                conditions.push((0, drizzle_orm_18.sql) `(${drizzle_orm_18.sql.join(monthConditions, (0, drizzle_orm_18.sql) ` OR `)})`);
            }
            const whereClause = conditions.length > 0 ? (0, drizzle_orm_18.and)(...conditions) : void 0;
            const billsList = await db.select({
                id: bills2.id,
                buildingId: bills2.buildingId,
                billNumber: bills2.billNumber,
                title: bills2.title,
                description: bills2.description,
                category: bills2.category,
                vendor: bills2.vendor,
                paymentType: bills2.paymentType,
                costs: bills2.costs,
                totalAmount: bills2.totalAmount,
                startDate: bills2.startDate,
                status: bills2.status,
                notes: bills2.notes,
                createdBy: bills2.createdBy,
                createdAt: bills2.createdAt,
                updatedAt: bills2.updatedAt
            }).from(bills2).where(whereClause).orderBy((0, drizzle_orm_18.desc)(bills2.startDate));
            res.json(billsList);
        }
        catch (_error) {
            console.error("\u274C Error fetching bills:", _error);
            res.status(500).json({
                message: "Failed to fetch bills",
                _error: _error instanceof Error ? _error.message : "Unknown error"
            });
        }
    });
    app2.get("/api/bills/:id", requireAuth, async (req, res) => {
        try {
            const { id } = req.params;
            const bill = await db.select({
                id: bills2.id,
                buildingId: bills2.buildingId,
                billNumber: bills2.billNumber,
                title: bills2.title,
                description: bills2.description,
                category: bills2.category,
                vendor: bills2.vendor,
                paymentType: bills2.paymentType,
                costs: bills2.costs,
                totalAmount: bills2.totalAmount,
                startDate: bills2.startDate,
                status: bills2.status,
                notes: bills2.notes,
                createdBy: bills2.createdBy,
                createdAt: bills2.createdAt,
                updatedAt: bills2.updatedAt
            }).from(bills2).where((0, drizzle_orm_18.eq)(bills2.id, id)).limit(1);
            if (bill.length === 0) {
                return res.status(404).json({
                    message: "Bill not found"
                });
            }
            res.json(bill[0]);
        }
        catch (_error) {
            console.error("\u274C Error fetching bill:", _error);
            res.status(500).json({
                message: "Failed to fetch bill",
                _error: _error instanceof Error ? _error.message : "Unknown error"
            });
        }
    });
    app2.post("/api/bills", requireAuth, async (req, res) => {
        try {
            const validation = createBillSchema.safeParse(req.body);
            if (!validation.success) {
                return res.status(400).json({
                    message: "Invalid bill data",
                    errors: validation.error.issues
                });
            }
            const billData = validation.data;
            const newBill = await db.insert(bills2).values({
                buildingId: billData.buildingId,
                billNumber: `BILL-${Date.now()}`,
                title: billData.title,
                description: billData.description,
                category: billData.category,
                vendor: billData.vendor,
                paymentType: billData.paymentType,
                schedulePayment: billData.schedulePayment,
                scheduleCustom: billData.scheduleCustom,
                costs: billData.costs.map((cost) => parseFloat(cost)),
                totalAmount: parseFloat(billData.totalAmount),
                startDate: billData.startDate,
                endDate: billData.endDate,
                status: billData.status,
                notes: billData.notes,
                createdBy: req.user.id
            }).returning();
            try {
                delayedUpdateService.scheduleBillUpdate(newBill[0].id);
            }
            catch (schedulingError) {
                console.warn("\u26A0\uFE0F Failed to schedule bill update:", schedulingError);
            }
            res.status(201).json(newBill[0]);
        }
        catch (_error) {
            console.error("\u274C Error creating bill:", _error);
            res.status(500).json({
                message: "Failed to create bill",
                _error: _error instanceof Error ? _error.message : "Unknown error"
            });
        }
    });
    app2.patch("/api/bills/:id", requireAuth, async (req, res) => {
        try {
            const { id } = req.params;
            const validation = updateBillSchema.safeParse(req.body);
            if (!validation.success) {
                return res.status(400).json({
                    message: "Invalid bill data",
                    errors: validation.error.issues
                });
            }
            const billData = validation.data;
            const updateData = {};
            if (billData.title) {
                updateData.title = billData.title;
            }
            if (billData.description) {
                updateData.description = billData.description;
            }
            if (billData.category) {
                updateData.category = billData.category;
            }
            if (billData.vendor) {
                updateData.vendor = billData.vendor;
            }
            if (billData.paymentType) {
                updateData.paymentType = billData.paymentType;
            }
            if (billData.costs) {
                updateData.costs = billData.costs.map((cost) => parseFloat(cost));
            }
            if (billData.totalAmount) {
                updateData.totalAmount = parseFloat(billData.totalAmount);
            }
            if (billData.startDate) {
                updateData.startDate = billData.startDate;
            }
            if (billData.endDate) {
                updateData.endDate = billData.endDate;
            }
            if (billData.status) {
                updateData.status = billData.status;
            }
            if (billData.notes) {
                updateData.notes = billData.notes;
            }
            updateData.updatedAt = /* @__PURE__ */ new Date();
            const updatedBill = await db.update(bills2).set(updateData).where((0, drizzle_orm_18.eq)(bills2.id, id)).returning();
            if (updatedBill.length === 0) {
                return res.status(404).json({
                    message: "Bill not found"
                });
            }
            res.json(updatedBill[0]);
        }
        catch (_error) {
            console.error("\u274C Error updating bill (PATCH):", _error);
            res.status(500).json({
                message: "Failed to update bill",
                _error: _error instanceof Error ? _error.message : "Unknown error"
            });
        }
    });
    app2.put("/api/bills/:id", requireAuth, async (req, res) => {
        try {
            const { id } = req.params;
            const validation = updateBillSchema.safeParse(req.body);
            if (!validation.success) {
                return res.status(400).json({
                    message: "Invalid bill data",
                    errors: validation.error.issues
                });
            }
            const billData = validation.data;
            const updateData = {};
            if (billData.title) {
                updateData.title = billData.title;
            }
            if (billData.description) {
                updateData.description = billData.description;
            }
            if (billData.category) {
                updateData.category = billData.category;
            }
            if (billData.vendor) {
                updateData.vendor = billData.vendor;
            }
            if (billData.paymentType) {
                updateData.paymentType = billData.paymentType;
            }
            if (billData.costs) {
                updateData.costs = billData.costs.map((cost) => parseFloat(cost));
            }
            if (billData.totalAmount) {
                updateData.totalAmount = parseFloat(billData.totalAmount);
            }
            if (billData.startDate) {
                updateData.startDate = billData.startDate;
            }
            if (billData.status) {
                updateData.status = billData.status;
            }
            if (billData.notes) {
                updateData.notes = billData.notes;
            }
            updateData.updatedAt = /* @__PURE__ */ new Date();
            const updatedBill = await db.update(bills2).set(updateData).where((0, drizzle_orm_18.eq)(bills2.id, id)).returning();
            if (updatedBill.length === 0) {
                return res.status(404).json({
                    message: "Bill not found"
                });
            }
            try {
                delayedUpdateService.scheduleBillUpdate(id);
            }
            catch (schedulingError) {
                console.warn("\u26A0\uFE0F Failed to schedule bill update:", schedulingError);
            }
            res.json(updatedBill[0]);
        }
        catch (_error) {
            console.error("\u274C Error updating bill (PUT):", _error);
            res.status(500).json({
                message: "Failed to update bill",
                _error: _error instanceof Error ? _error.message : "Unknown error"
            });
        }
    });
    app2.delete("/api/bills/:id", requireAuth, async (req, res) => {
        try {
            const { id } = req.params;
            const deletedBill = await db.delete(bills2).where((0, drizzle_orm_18.eq)(bills2.id, id)).returning();
            if (deletedBill.length === 0) {
                return res.status(404).json({
                    message: "Bill not found"
                });
            }
            res.json({
                message: "Bill deleted successfully",
                bill: deletedBill[0]
            });
        }
        catch (_error) {
            console.error("\u274C Error deleting bill:", _error);
            res.status(500).json({
                message: "Failed to delete bill",
                _error: _error instanceof Error ? _error.message : "Unknown error"
            });
        }
    });
    app2.post("/api/bills/:id/upload-document", requireAuth, upload3.single("document"), async (req, res) => {
        try {
            const { id } = req.params;
            if (!req.file) {
                return res.status(400).json({ message: "No file uploaded" });
            }
            const organizations3 = await storage.getUserOrganizations(req.user.id);
            const organizationId = organizations3.length > 0 ? organizations3[0].organizationId : "default";
            const documentPath = `prod_org_${organizationId}/${req.file.originalname}`;
            let analysisResult = null;
            if (req.file.mimetype.startsWith("image/")) {
                try {
                    analysisResult = await geminiBillAnalyzer.analyzeBillDocument(req.file.path);
                }
                catch (aiError) {
                    console.warn("\u26A0\uFE0F AI analysis failed, continuing without analysis:", aiError);
                }
            }
            const updateData = {
                documentPath,
                documentName: req.file.originalname,
                isAiAnalyzed: !!analysisResult,
                aiAnalysisData: analysisResult,
                updatedAt: /* @__PURE__ */ new Date()
            };
            const updatedBill = await db.update(bills2).set(updateData).where((0, drizzle_orm_18.eq)(bills2.id, id)).returning();
            fs_4.default.unlinkSync(req.file.path);
            res.json({
                message: "Document uploaded and analyzed successfully",
                bill: updatedBill[0],
                analysisResult
            });
        }
        catch (_error) {
            console.error("\u274C Error uploading document:", _error);
            if (req.file?.path) {
                try {
                    fs_4.default.unlinkSync(req.file.path);
                }
                catch (___cleanupError) {
                    console.error("Error cleaning up temp file:", ___cleanupError);
                }
            }
            res.status(500).json({
                message: "Failed to upload document",
                _error: _error instanceof Error ? _error.message : "Unknown error"
            });
        }
    });
    app2.get("/api/bills/:id/download-document", requireAuth, async (req, res) => {
        try {
            const { id } = req.params;
            const bill = await db.select().from(bills2).where((0, drizzle_orm_18.eq)(bills2.id, id)).limit(1);
            if (bill.length === 0) {
                return res.status(404).json({ message: "Bill not found" });
            }
            const billData = bill[0];
            if (!billData.documentPath || !billData.documentName) {
                return res.status(404).json({ message: "No document associated with this bill" });
            }
            const organizations3 = await storage.getUserOrganizations(req.user.id);
            const organizationId = organizations3.length > 0 ? organizations3[0].organizationId : "default";
            res.status(404).json({
                message: "Document download functionality has been disabled"
            });
        }
        catch (_error) {
            console.error("\u274C Error downloading document:", _error);
            res.status(500).json({
                message: "Failed to generate document download URL",
                _error: _error instanceof Error ? _error.message : "Unknown error"
            });
        }
    });
    app2.post("/api/bills/:id/apply-ai-analysis", requireAuth, async (req, res) => {
        try {
            const { id } = req.params;
            const bill = await db.select().from(bills2).where((0, drizzle_orm_18.eq)(bills2.id, id)).limit(1);
            if (bill.length === 0) {
                return res.status(404).json({ message: "Bill not found" });
            }
            const billData = bill[0];
            if (!billData.isAiAnalyzed || !billData.aiAnalysisData) {
                return res.status(400).json({ message: "No AI analysis data available for this bill" });
            }
            const analysis = billData.aiAnalysisData;
            const scheduleSignestion = await geminiBillAnalyzer.suggestPaymentSchedule(analysis.category, parseFloat(analysis.totalAmount));
            const updateData = {
                title: analysis.title,
                vendor: analysis.vendor,
                totalAmount: parseFloat(analysis.totalAmount),
                category: analysis.category,
                description: analysis.description,
                paymentType: scheduleSignestion.paymentType,
                schedulePayment: scheduleSignestion.schedulePayment,
                costs: [parseFloat(analysis.totalAmount)],
                startDate: analysis.issueDate || analysis.dueDate || billData.startDate,
                notes: `AI-analyzed document. Original bill number: ${analysis.billNumber || "N/A"}. Confidence: ${(analysis.confidence * 100).toFixed(1)}%. ${scheduleSignestion.reasoning}`,
                updatedAt: /* @__PURE__ */ new Date()
            };
            const updatedBill = await db.update(bills2).set(updateData).where((0, drizzle_orm_18.eq)(bills2.id, id)).returning();
            res.json({
                message: "AI analysis applied successfully",
                bill: updatedBill[0],
                analysis,
                scheduleSignestion
            });
        }
        catch (_error) {
            console.error("\u274C Error applying AI analysis:", _error);
            res.status(500).json({
                message: "Failed to apply AI analysis",
                _error: _error instanceof Error ? _error.message : "Unknown error"
            });
        }
    });
    app2.post("/api/bills/:id/generate-future", requireAuth, async (req, res) => {
        try {
            const { id } = req.params;
            const bill = await db.select({
                id: bills2.id,
                buildingId: bills2.buildingId,
                billNumber: bills2.billNumber,
                title: bills2.title,
                description: bills2.description,
                category: bills2.category,
                vendor: bills2.vendor,
                paymentType: bills2.paymentType,
                costs: bills2.costs,
                totalAmount: bills2.totalAmount,
                startDate: bills2.startDate,
                status: bills2.status,
                notes: bills2.notes,
                createdBy: bills2.createdBy,
                createdAt: bills2.createdAt,
                updatedAt: bills2.updatedAt
            }).from(bills2).where((0, drizzle_orm_18.eq)(bills2.id, id)).limit(1);
            if (bill.length === 0) {
                return res.status(404).json({
                    message: "Bill not found"
                });
            }
            const building = await db.select({
                id: buildings3.id,
                name: buildings3.name,
                organizationId: buildings3.organizationId
            }).from(buildings3).where((0, drizzle_orm_18.eq)(buildings3.id, bill[0].buildingId)).limit(1);
            if (building.length === 0) {
                return res.status(403).json({
                    message: "Access denied to generate future bills",
                    code: "ACCESS_DENIED"
                });
            }
            if (bill[0].paymentType !== "recurrent") {
                return res.status(400).json({
                    message: "Only recurrent bills can generate future instances"
                });
            }
            const result = await billGenerationService.generateFutureBillInstances(bill[0]);
            res.json({
                message: "Future bills generated successfully",
                billsCreated: result.billsCreated,
                generatedUntil: result.generatedUntil
            });
        }
        catch (_error) {
            console.error("\u274C Error generating future bills:", _error);
            res.status(500).json({
                message: "Failed to generate future bills",
                _error: _error instanceof Error ? _error.message : "Unknown error"
            });
        }
    });
    app2.get("/api/bills/categories", requireAuth, async (req, res) => {
        try {
            const categories = [
                "insurance",
                "maintenance",
                "salary",
                "utilities",
                "cleaning",
                "security",
                "landscaping",
                "professional_services",
                "administration",
                "repairs",
                "supplies",
                "taxes",
                "technology",
                "reserves",
                "other"
            ];
            res.json(categories);
        }
        catch (_error) {
            console.error("\u274C Error fetching bill categories:", _error);
            res.status(500).json({
                message: "Failed to fetch bill categories",
                _error: _error instanceof Error ? _error.message : "Unknown error"
            });
        }
    });
    app2.get("/api/bills/:id/generated-stats", requireAuth, async (req, res) => {
        try {
            const { id } = req.params;
            const bill = await db.select({
                id: bills2.id,
                buildingId: bills2.buildingId,
                billNumber: bills2.billNumber,
                title: bills2.title,
                description: bills2.description,
                category: bills2.category,
                vendor: bills2.vendor,
                paymentType: bills2.paymentType,
                costs: bills2.costs,
                totalAmount: bills2.totalAmount,
                startDate: bills2.startDate,
                status: bills2.status,
                notes: bills2.notes,
                createdBy: bills2.createdBy,
                createdAt: bills2.createdAt,
                updatedAt: bills2.updatedAt
            }).from(bills2).where((0, drizzle_orm_18.eq)(bills2.id, id)).limit(1);
            if (bill.length === 0) {
                return res.status(404).json({
                    message: "Bill not found"
                });
            }
            const generatedBills = await db.select({
                id: bills2.id,
                buildingId: bills2.buildingId,
                billNumber: bills2.billNumber,
                title: bills2.title,
                description: bills2.description,
                category: bills2.category,
                vendor: bills2.vendor,
                paymentType: bills2.paymentType,
                costs: bills2.costs,
                totalAmount: bills2.totalAmount,
                startDate: bills2.startDate,
                status: bills2.status,
                notes: bills2.notes,
                createdBy: bills2.createdBy,
                createdAt: bills2.createdAt,
                updatedAt: bills2.updatedAt
            }).from(bills2).where((0, drizzle_orm_18.sql) `bills.notes LIKE '%Auto-generated from:%'`).orderBy(bills2.startDate);
            const stats = generatedBills.map((genBill) => ({
                id: genBill.id,
                title: genBill.title,
                amount: genBill.totalAmount,
                startDate: genBill.startDate,
                status: genBill.status,
                billNumber: genBill.billNumber
            }));
            res.json({
                parentBill: bill[0],
                generatedBills: stats
            });
        }
        catch (_error) {
            console.error("\u274C Error getting generated bills statistics:", _error);
            res.status(500).json({
                message: "Failed to get generated bills statistics",
                _error: _error instanceof Error ? _error.message : "Unknown error"
            });
        }
    });
}
// server/api/residences.ts
init_db();
init_schema();
const drizzle_orm_21 = require("drizzle-orm");
// server/auth/invitation-rbac.ts
init_schema();
const drizzle_orm_22 = require("drizzle-orm");
const serverless_3 = require("@neondatabase/serverless");
init_db();
const ws_1 = __importDefault(require("ws"));
if (typeof serverless_3.neonConfig !== "undefined" && serverless_3.neonConfig) {
    serverless_3.neonConfig.webSocketConstructor = ws_1.default;
}
if (!process.env.DATABASE_URL) {
    throw new Error("DATABASE_URL must be set. Did you forget to provision a database?");
}
var InvitationSecurityMonitor = (_a = class {
        /**
         * Register callback for security alerts.
         * @param callback
         */
        static onAlert(callback) {
            this.alertCallbacks.push(callback);
        }
        /**
         * Trigger a security alert.
         * @param alert
         */
        static async triggerAlert(alert) {
            console.log("\u{1F6A8} Security Alert:", {
                description: alert.description,
                userId: alert.userId,
                ipAddress: alert.ipAddress,
                metadata: alert.metadata
            });
            this.alertCallbacks.forEach((callback) => {
                try {
                    callback(alert);
                }
                catch (error) {
                    console.error("\u274C Error in security alert callback:", error);
                }
            });
            try {
                await db.insert(invitationAuditLog).values({
                    invitationId: alert.metadata?.invitationId || null,
                    action: "security_alert",
                    performedBy: alert.userId || null,
                    ipAddress: alert.ipAddress,
                    userAgent: alert.metadata?.userAgent,
                    details: {
                        alertLevel: alert.level,
                        alertType: alert.type,
                        description: alert.description,
                        metadata: alert.metadata
                    },
                    previousStatus: null,
                    newStatus: null
                });
            }
            catch (error) {
                console.error("\u274C Error logging security alert to database:", error);
            }
        }
        /**
         * Monitor invitation access patterns for suspicious activity.
         * @param userId
         * @param action
         * @param ipAddress
         * @param userAgent
         * @param metadata
         */
        static async monitorInvitationAccess(userId, action, ipAddress, userAgent, metadata) {
            const key = `${userId}:${action}`;
            const now = Date.now();
            const windowStart = now - 5 * 60 * 1e3;
            const recentActions = await db.select({ count: (0, drizzle_orm_22.sql) `count(*)` }).from(invitationAuditLog).where((0, drizzle_orm_22.and)((0, drizzle_orm_22.eq)(invitationAuditLog.performedBy, userId), (0, drizzle_orm_22.eq)(invitationAuditLog.action, action), (0, drizzle_orm_22.gte)(invitationAuditLog.createdAt, new Date(windowStart))));
            const actionCount = recentActions[0]?.count || 0;
            if (actionCount > 10) {
                await this.triggerAlert({
                    level: "high" /* HIGH */,
                    type: "excessive_invitation_actions",
                    description: `User ${userId} performed ${actionCount} ${action} actions in 5 minutes`,
                    userId,
                    ipAddress,
                    metadata: { action, count: actionCount, userAgent, ...metadata }
                });
            }
            if (action === "validation_failed" && actionCount > 5) {
                await this.triggerAlert({
                    level: "medium" /* MEDIUM */,
                    type: "multiple_validation_failures",
                    description: `User ${userId} had ${actionCount} failed token validations`,
                    userId,
                    ipAddress,
                    metadata: { action, count: actionCount, userAgent, ...metadata }
                });
            }
            if (ipAddress) {
                const ipActions = await db.select({ count: (0, drizzle_orm_22.sql) `count(*)` }).from(invitationAuditLog).where((0, drizzle_orm_22.and)((0, drizzle_orm_22.eq)(invitationAuditLog.ipAddress, ipAddress), (0, drizzle_orm_22.eq)(invitationAuditLog.action, action), (0, drizzle_orm_22.gte)(invitationAuditLog.createdAt, new Date(windowStart))));
                const ipActionCount = ipActions[0]?.count || 0;
                if (ipActionCount > 20) {
                    await this.triggerAlert({
                        level: "critical" /* CRITICAL */,
                        type: "ip_based_attack",
                        description: `IP ${ipAddress} performed ${ipActionCount} ${action} actions in 5 minutes`,
                        ipAddress,
                        metadata: { action, count: ipActionCount, userAgent, ...metadata }
                    });
                }
            }
        }
    },
    __setFunctionName(_a, "InvitationSecurityMonitor"),
    (() => {
        _a.alertCallbacks = [];
    })(),
    _a);
InvitationSecurityMonitor.onAlert((alert) => {
});
// server/api/residences.ts
function registerResidenceRoutes(app2) {
    app2.get("/api/user/residences", requireAuth, async (req, res) => {
        try {
            const user = req.user;
            const userResidencesList = await db.select({
                residenceId: userResidences.residenceId
            }).from(userResidences).where((0, drizzle_orm_21.and)((0, drizzle_orm_21.eq)(userResidences.userId, user.id), (0, drizzle_orm_21.eq)(userResidences.isActive, true)));
            res.json(userResidencesList);
        }
        catch (error) {
            console.error("\u274C Error fetching user residences:", error);
            res.status(500).json({ message: "Failed to fetch user residences" });
        }
    });
    app2.get("/api/residences/:residenceId/assigned-users", requireAuth, async (req, res) => {
        try {
            const { residenceId } = req.params;
            const currentUser = req.user;
            const assignedUsers = await db.select({
                id: users.id,
                username: users.username,
                email: users.email,
                firstName: users.firstName,
                lastName: users.lastName,
                phone: users.phone,
                relationshipType: userResidences.relationshipType,
                startDate: userResidences.startDate,
                endDate: userResidences.endDate,
                isActive: userResidences.isActive
            }).from(userResidences).innerJoin(users, (0, drizzle_orm_21.eq)(userResidences.userId, users.id)).where((0, drizzle_orm_21.and)((0, drizzle_orm_21.eq)(userResidences.residenceId, residenceId), (0, drizzle_orm_21.eq)(userResidences.isActive, true)));
            res.json(assignedUsers);
        }
        catch (error) {
            console.error("\u274C Error fetching assigned users:", error);
            res.status(500).json({ message: "Failed to fetch assigned users" });
        }
    });
    app2.put("/api/residences/:residenceId/assigned-users/:userId", requireAuth, async (req, res) => {
        try {
            const { userId } = req.params;
            const { firstName, lastName, email, phone } = req.body;
            const currentUser = req.user;
            await db.update(users).set({
                firstName,
                lastName,
                email,
                phone,
                updatedAt: /* @__PURE__ */ new Date()
            }).where((0, drizzle_orm_21.eq)(users.id, userId));
            res.json({ message: "User updated successfully" });
        }
        catch (error) {
            console.error("\u274C Error updating assigned user:", error);
            res.status(500).json({ message: "Failed to update assigned user" });
        }
    });
    app2.get("/api/residences", requireAuth, async (req, res) => {
        try {
            const user = req.user;
            const { search, buildingId, floor } = req.query;
            const conditions = [(0, drizzle_orm_21.eq)(residences.isActive, true)];
            if (buildingId) {
                conditions.push((0, drizzle_orm_21.eq)(residences.buildingId, buildingId));
            }
            if (floor) {
                conditions.push((0, drizzle_orm_21.eq)(residences.floor, parseInt(floor)));
            }
            const accessibleBuildingIds = /* @__PURE__ */ new Set();
            const userOrgs = await db.select({
                organizationId: organizations.id,
                organizationName: organizations.name,
                canAccessAllOrganizations: userOrganizations.canAccessAllOrganizations
            }).from(organizations).innerJoin(userOrganizations, (0, drizzle_orm_21.eq)(userOrganizations.organizationId, organizations.id)).where((0, drizzle_orm_21.and)((0, drizzle_orm_21.eq)(userOrganizations.userId, user.id), (0, drizzle_orm_21.eq)(userOrganizations.isActive, true)));
            const hasGlobalAccess = user.role === "admin" || userOrgs.some((org) => org.organizationName === "Koveo" || org.canAccessAllOrganizations);
            if (hasGlobalAccess) {
                console.log(`\u{1F31F} Admin user or user with global access detected - granting access to ALL residences`);
                const allBuildings = await db.select({ id: buildings.id }).from(buildings).where((0, drizzle_orm_21.eq)(buildings.isActive, true));
                allBuildings.forEach((building) => {
                    accessibleBuildingIds.add(building.id);
                });
            }
            else {
                if (user.role === "admin" || user.role === "manager" || user.role === "demo_manager") {
                    if (userOrgs.length > 0) {
                        const orgIds = userOrgs.map((uo) => uo.organizationId);
                        const orgBuildings = await db.select({ id: buildings.id }).from(buildings).where((0, drizzle_orm_21.and)((0, drizzle_orm_21.inArray)(buildings.organizationId, orgIds), (0, drizzle_orm_21.eq)(buildings.isActive, true)));
                        orgBuildings.forEach((building) => {
                            accessibleBuildingIds.add(building.id);
                        });
                    }
                }
                console.log(`\u{1F50D} [ACCESS DEBUG] Checking residence access for user ${user.id} with role ${user.role}`);
                const userResidenceRecords = await db.select({
                    residenceId: userResidences.residenceId
                }).from(userResidences).where((0, drizzle_orm_21.and)((0, drizzle_orm_21.eq)(userResidences.userId, user.id), (0, drizzle_orm_21.eq)(userResidences.isActive, true)));
                console.log(`\u{1F50D} [ACCESS DEBUG] Found ${userResidenceRecords.length} residence records for user ${user.id}`);
                if (userResidenceRecords.length > 0) {
                    const residenceIds2 = userResidenceRecords.map((ur) => ur.residenceId);
                    const residenceBuildings = await db.select({ id: buildings.id }).from(residences).innerJoin(buildings, (0, drizzle_orm_21.eq)(residences.buildingId, buildings.id)).where((0, drizzle_orm_21.and)((0, drizzle_orm_21.inArray)(residences.id, residenceIds2), (0, drizzle_orm_21.eq)(buildings.isActive, true)));
                    residenceBuildings.forEach((building) => {
                        accessibleBuildingIds.add(building.id);
                    });
                }
            }
            console.log(`\u{1F50D} [ACCESS DEBUG] User ${user.id} has access to ${accessibleBuildingIds.size} buildings:`, Array.from(accessibleBuildingIds));
            if (accessibleBuildingIds.size > 0) {
                conditions.push((0, drizzle_orm_21.inArray)(residences.buildingId, Array.from(accessibleBuildingIds)));
            }
            else {
                return res.json([]);
            }
            const baseQuery = db.select({
                residence: residences,
                building: buildings,
                organization: organizations
            }).from(residences).leftJoin(buildings, (0, drizzle_orm_21.eq)(residences.buildingId, buildings.id)).leftJoin(organizations, (0, drizzle_orm_21.eq)(buildings.organizationId, organizations.id)).where((0, drizzle_orm_21.and)(...conditions));
            let results = await baseQuery;
            if (search) {
                const searchLower = search.toLowerCase();
                results = results.filter((result) => result.residence.unitNumber.toLowerCase().includes(searchLower) || result.building?.name.toLowerCase().includes(searchLower));
            }
            const residenceIds = results.map((r) => r.residence.id);
            const tenants = residenceIds.length > 0 ? await db.select({
                residenceId: userResidences.residenceId,
                tenant: users
            }).from(userResidences).innerJoin(users, (0, drizzle_orm_21.eq)(userResidences.userId, users.id)).where((0, drizzle_orm_21.and)((0, drizzle_orm_21.inArray)(userResidences.residenceId, residenceIds), (0, drizzle_orm_21.eq)(userResidences.isActive, true))) : [];
            const tenantsByResidence = tenants.reduce((acc, { residenceId, tenant }) => {
                if (!acc[residenceId]) {
                    acc[residenceId] = [];
                }
                acc[residenceId].push({
                    id: tenant.id,
                    firstName: tenant.firstName,
                    lastName: tenant.lastName,
                    email: tenant.email
                });
                return acc;
            }, {});
            const residencesList = results.map((result) => ({
                ...result.residence,
                building: result.building,
                organization: result.organization,
                tenants: tenantsByResidence[result.residence.id] || []
            }));
            res.json(residencesList);
        }
        catch (error) {
            console.error("\u274C Error fetching residences:", error);
            res.status(500).json({ message: "Failed to fetch residences" });
        }
    });
    app2.get("/api/residences/:id", requireAuth, async (req, res) => {
        try {
            const { id } = req.params;
            const user = req.user;
            const result = await db.select({
                residence: residences,
                building: buildings,
                organization: organizations
            }).from(residences).leftJoin(buildings, (0, drizzle_orm_21.eq)(residences.buildingId, buildings.id)).leftJoin(organizations, (0, drizzle_orm_21.eq)(buildings.organizationId, organizations.id)).where((0, drizzle_orm_21.and)((0, drizzle_orm_21.eq)(residences.id, id), (0, drizzle_orm_21.eq)(residences.isActive, true)));
            if (result.length === 0) {
                return res.status(404).json({ message: "Residence not found" });
            }
            const residence = result[0];
            if (user.role !== "admin" && !user.canAccessAllOrganizations) {
                const userHasAccess = await db.select({ count: (0, drizzle_orm_21.sql) `count(*)` }).from(userResidences).leftJoin(residences, (0, drizzle_orm_21.eq)(userResidences.residenceId, residences.id)).leftJoin(buildings, (0, drizzle_orm_21.eq)(residences.buildingId, buildings.id)).where((0, drizzle_orm_21.and)((0, drizzle_orm_21.eq)(userResidences.userId, user.id), (0, drizzle_orm_21.eq)(buildings.organizationId, residence.organization.id)));
                if (userHasAccess[0].count === 0) {
                    return res.status(403).json({ message: "Access denied" });
                }
            }
            const tenants = await db.select({
                id: users.id,
                firstName: users.firstName,
                lastName: users.lastName,
                email: users.email,
                relationshipType: userResidences.relationshipType,
                startDate: userResidences.startDate,
                endDate: userResidences.endDate
            }).from(userResidences).leftJoin(users, (0, drizzle_orm_21.eq)(userResidences.userId, users.id)).where((0, drizzle_orm_21.and)((0, drizzle_orm_21.eq)(userResidences.residenceId, id), (0, drizzle_orm_21.eq)(userResidences.isActive, true)));
            res.json({
                ...residence.residence,
                building: residence.building,
                organization: residence.organization,
                tenants
            });
        }
        catch (error) {
            console.error("\u274C Error fetching residence:", error);
            res.status(500).json({ message: "Failed to fetch residence" });
        }
    });
    app2.put("/api/residences/:id", requireAuth, async (req, res) => {
        try {
            const { id } = req.params;
            const updateData = req.body;
            console.log(`\u{1F3E0} Updating residence ${id} with data:`, updateData);
            delete updateData.id;
            delete updateData.createdAt;
            delete updateData.buildingId;
            const processedData = {
                ...updateData,
                updatedAt: /* @__PURE__ */ new Date()
            };
            if (processedData.squareFootage === null || processedData.squareFootage === "") {
                processedData.squareFootage = null;
            }
            if (processedData.bathrooms === null || processedData.bathrooms === "") {
                processedData.bathrooms = null;
            }
            if (processedData.ownershipPercentage === null || processedData.ownershipPercentage === "") {
                processedData.ownershipPercentage = null;
            }
            if (processedData.monthlyFees === null || processedData.monthlyFees === "") {
                processedData.monthlyFees = null;
            }
            console.log(`\u{1F3E0} Processed data for residence ${id}:`, processedData);
            const updated = await db.update(residences).set(processedData).where((0, drizzle_orm_21.eq)(residences.id, id)).returning();
            if (updated.length === 0) {
                return res.status(404).json({ message: "Residence not found" });
            }
            console.log(`\u2705 Successfully updated residence ${id}`);
            try {
                delayedUpdateService.scheduleResidenceUpdate(id);
            }
            catch (e) {
                console.warn("\u26A0\uFE0F Failed to schedule residence update:", e);
            }
            res.json(updated[0]);
        }
        catch (error) {
            console.error("\u274C Error updating residence:", error);
            console.error("\u274C Error details:", error.message);
            console.error("\u274C Error stack:", error.stack);
            res.status(500).json({
                message: "Failed to update residence",
                error: error.message,
                details: process.env.NODE_ENV === "development" ? error.stack : void 0
            });
        }
    });
    app2.post("/api/buildings/:buildingId/generate-residences", requireAuth, async (req, res) => {
        try {
            const { buildingId } = req.params;
            const building = await db.select().from(buildings).where((0, drizzle_orm_21.eq)(buildings.id, buildingId)).limit(1);
            if (building.length === 0) {
                return res.status(404).json({ message: "Building not found" });
            }
            const buildingData = building[0];
            const totalUnits = buildingData.totalUnits;
            const totalFloors = buildingData.totalFloors || 1;
            if (totalUnits > 300) {
                return res.status(400).json({ message: "Cannot create more than 300 residences per building" });
            }
            const existingResidences = await db.select({ count: (0, drizzle_orm_21.sql) `count(*)` }).from(residences).where((0, drizzle_orm_21.eq)(residences.buildingId, buildingId));
            if (existingResidences[0].count > 0) {
                return res.status(400).json({ message: "Residences already exist for this building" });
            }
            const residencesToCreate = [];
            const unitsPerFloor = Math.ceil(totalUnits / totalFloors);
            for (let unit = 1; unit <= totalUnits; unit++) {
                const floor = Math.ceil(unit / unitsPerFloor);
                const unitOnFloor = (unit - 1) % unitsPerFloor + 1;
                const unitNumber = `${floor}${unitOnFloor.toString().padStart(2, "0")}`;
                residencesToCreate.push({
                    buildingId,
                    unitNumber,
                    floor,
                    isActive: true
                });
            }
            const createdResidences = await db.insert(residences).values(residencesToCreate).returning();
            res.json({
                message: `Successfully created ${createdResidences.length} residences`,
                residences: createdResidences
            });
        }
        catch (error) {
            console.error("\u274C Error generating residences:", error);
            res.status(500).json({ message: "Failed to generate residences" });
        }
    });
}
// server/api/demands.ts
init_db();
init_schema();
const drizzle_orm_23 = require("drizzle-orm");
init_operations();
function registerDemandRoutes(app2) {
    app2.get("/api/demands", requireAuth, async (req, res) => {
        try {
            const user = req.user;
            const { buildingId, residenceId, type, status, search } = req.query;
            let query = db.select({
                id: demands.id,
                submitterId: demands.submitterId,
                type: demands.type,
                assignationResidenceId: demands.assignationResidenceId,
                assignationBuildingId: demands.assignationBuildingId,
                description: demands.description,
                attachments: demands.attachments,
                residenceId: demands.residenceId,
                buildingId: demands.buildingId,
                status: demands.status,
                reviewedBy: demands.reviewedBy,
                reviewedAt: demands.reviewedAt,
                reviewNotes: demands.reviewNotes,
                createdAt: demands.createdAt,
                updatedAt: demands.updatedAt,
                submitter: {
                    id: users.id,
                    firstName: users.firstName,
                    lastName: users.lastName,
                    email: users.email
                },
                residence: {
                    id: residences.id,
                    unitNumber: residences.unitNumber,
                    buildingId: residences.buildingId
                },
                building: {
                    id: buildings.id,
                    name: buildings.name,
                    address: buildings.address
                }
            }).from(demands).innerJoin(users, (0, drizzle_orm_23.eq)(demands.submitterId, users.id)).innerJoin(residences, (0, drizzle_orm_23.eq)(demands.residenceId, residences.id)).innerJoin(buildings, (0, drizzle_orm_23.eq)(demands.buildingId, buildings.id));
            const conditions = [(0, drizzle_orm_23.eq)(demands.submitterId, user.id)];
            if (buildingId) {
                conditions.push((0, drizzle_orm_23.eq)(demands.buildingId, buildingId));
            }
            if (residenceId) {
                conditions.push((0, drizzle_orm_23.eq)(demands.residenceId, residenceId));
            }
            if (type) {
                conditions.push((0, drizzle_orm_23.eq)(demands.type, type));
            }
            if (status) {
                conditions.push((0, drizzle_orm_23.eq)(demands.status, status));
            }
            let finalQuery;
            if (conditions.length > 0) {
                finalQuery = query.where((0, drizzle_orm_23.and)(...conditions));
            }
            else {
                finalQuery = query;
            }
            const results = await finalQuery.orderBy((0, drizzle_orm_23.desc)(demands.createdAt));
            let filteredResults = results;
            if (search) {
                const searchTerm = search.toLowerCase();
                filteredResults = results.filter((demand) => demand.description.toLowerCase().includes(searchTerm) || demand.submitter.firstName?.toLowerCase().includes(searchTerm) || demand.submitter.lastName?.toLowerCase().includes(searchTerm) || demand.residence.unitNumber.toLowerCase().includes(searchTerm) || demand.building.name.toLowerCase().includes(searchTerm));
            }
            res.json(filteredResults);
        }
        catch (error) {
            res.status(500).json({ message: "Failed to fetch demands" });
        }
    });
    app2.get("/api/demands/:id", requireAuth, async (req, res) => {
        try {
            const { id } = req.params;
            const user = req.user;
            const demand = await db.select({
                id: demands.id,
                submitterId: demands.submitterId,
                type: demands.type,
                assignationResidenceId: demands.assignationResidenceId,
                assignationBuildingId: demands.assignationBuildingId,
                description: demands.description,
                attachments: demands.attachments,
                residenceId: demands.residenceId,
                buildingId: demands.buildingId,
                status: demands.status,
                reviewedBy: demands.reviewedBy,
                reviewedAt: demands.reviewedAt,
                reviewNotes: demands.reviewNotes,
                createdAt: demands.createdAt,
                updatedAt: demands.updatedAt,
                submitter: {
                    id: users.id,
                    firstName: users.firstName,
                    lastName: users.lastName,
                    email: users.email
                },
                residence: {
                    id: residences.id,
                    unitNumber: residences.unitNumber,
                    buildingId: residences.buildingId
                },
                building: {
                    id: buildings.id,
                    name: buildings.name,
                    address: buildings.address
                }
            }).from(demands).innerJoin(users, (0, drizzle_orm_23.eq)(demands.submitterId, users.id)).innerJoin(residences, (0, drizzle_orm_23.eq)(demands.residenceId, residences.id)).innerJoin(buildings, (0, drizzle_orm_23.eq)(demands.buildingId, buildings.id)).where((0, drizzle_orm_23.eq)(demands.id, id)).limit(1);
            if (demand.length === 0) {
                return res.status(404).json({ message: "Demand not found" });
            }
            const demandData = demand[0];
            if (demandData.submitterId !== user.id) {
                return res.status(403).json({ message: "Access denied" });
            }
            res.json(demandData);
        }
        catch (error) {
            res.status(500).json({ message: "Failed to fetch demand" });
        }
    });
    app2.post("/api/demands", requireAuth, async (req, res) => {
        try {
            const user = req.user;
            const demandData = req.body;
            const demandInputSchema = insertDemandSchema.omit({ submitterId: true });
            const validatedData = demandInputSchema.parse(demandData);
            console.log("\u2705 Demand validation passed:", validatedData);
            if (!validatedData.residenceId || !validatedData.buildingId) {
                const userResidenceData = await db.select({
                    residenceId: userResidences.residenceId,
                    buildingId: residences.buildingId
                }).from(userResidences).innerJoin(residences, (0, drizzle_orm_23.eq)(userResidences.residenceId, residences.id)).where((0, drizzle_orm_23.eq)(userResidences.userId, user.id)).limit(1);
                if (userResidenceData.length === 0) {
                    return res.status(400).json({ message: "User must be assigned to a residence to create demands" });
                }
                validatedData.residenceId = validatedData.residenceId || userResidenceData[0].residenceId;
                validatedData.buildingId = validatedData.buildingId || userResidenceData[0].buildingId;
            }
            if (!validatedData.buildingId || !validatedData.residenceId) {
                return res.status(400).json({
                    message: "Building and residence are required to create a demand"
                });
            }
            console.log("\u2705 Final demand data before insertion:", {
                buildingId: validatedData.buildingId,
                residenceId: validatedData.residenceId,
                type: validatedData.type,
                description: validatedData.description
            });
            const demandInsertData = {
                ...validatedData,
                buildingId: validatedData.buildingId,
                residenceId: validatedData.residenceId,
                submitterId: user.id,
                status: validatedData.status || "submitted"
            };
            const newDemand = await db.insert(demands).values([demandInsertData]).returning();
            res.status(201).json(newDemand[0]);
        }
        catch (error) {
            if (error.name === "ZodError") {
                return res.status(400).json({ message: "Invalid demand data", errors: error.errors });
            }
            res.status(500).json({ message: "Failed to create demand" });
        }
    });
    app2.put("/api/demands/:id", requireAuth, async (req, res) => {
        try {
            const { id } = req.params;
            const user = req.user;
            const updates = req.body;
            const currentDemand = await db.select().from(demands).where((0, drizzle_orm_23.eq)(demands.id, id)).limit(1);
            if (currentDemand.length === 0) {
                return res.status(404).json({ message: "Demand not found" });
            }
            const demand = currentDemand[0];
            if (demand.submitterId !== user.id) {
                return res.status(403).json({ message: "Access denied" });
            }
            const updatedDemand = await db.update(demands).set({ ...updates, updatedAt: /* @__PURE__ */ new Date() }).where((0, drizzle_orm_23.eq)(demands.id, id)).returning();
            res.json(updatedDemand[0]);
        }
        catch (error) {
            res.status(500).json({ message: "Failed to update demand" });
        }
    });
    app2.delete("/api/demands/:id", requireAuth, async (req, res) => {
        try {
            const { id } = req.params;
            const user = req.user;
            const currentDemand = await db.select().from(demands).where((0, drizzle_orm_23.eq)(demands.id, id)).limit(1);
            if (currentDemand.length === 0) {
                return res.status(404).json({ message: "Demand not found" });
            }
            const demand = currentDemand[0];
            if (demand.submitterId !== user.id) {
                return res.status(403).json({ message: "Access denied" });
            }
            await db.delete(demands).where((0, drizzle_orm_23.eq)(demands.id, id));
            res.json({ message: "Demand deleted successfully" });
        }
        catch (error) {
            res.status(500).json({ message: "Failed to delete demand" });
        }
    });
    app2.get("/api/demands/:id/comments", requireAuth, async (req, res) => {
        try {
            const { id } = req.params;
            const user = req.user;
            const demand = await db.select().from(demands).where((0, drizzle_orm_23.eq)(demands.id, id)).limit(1);
            if (demand.length === 0) {
                return res.status(404).json({ message: "Demand not found" });
            }
            const comments = await db.select({
                id: demandComments.id,
                demandId: demandComments.demandId,
                commentText: demandComments.commentText,
                commentType: demandComments.commentType,
                isInternal: demandComments.isInternal,
                commenterId: demandComments.commenterId,
                createdAt: demandComments.createdAt,
                author: {
                    id: users.id,
                    firstName: users.firstName,
                    lastName: users.lastName,
                    email: users.email
                }
            }).from(demandComments).innerJoin(users, (0, drizzle_orm_23.eq)(demandComments.commenterId, users.id)).where((0, drizzle_orm_23.eq)(demandComments.demandId, id)).orderBy((0, drizzle_orm_23.asc)(demandComments.createdAt));
            res.json(comments);
        }
        catch (error) {
            res.status(500).json({ message: "Failed to fetch demand comments" });
        }
    });
    app2.post("/api/demands/:id/comments", requireAuth, async (req, res) => {
        try {
            const { id } = req.params;
            const user = req.user;
            const commentData = req.body;
            const validatedData = insertDemandCommentSchema.parse({
                ...commentData,
                demandId: id,
                commenterId: user.id
            });
            const demand = await db.select().from(demands).where((0, drizzle_orm_23.eq)(demands.id, id)).limit(1);
            if (demand.length === 0) {
                return res.status(404).json({ message: "Demand not found" });
            }
            const newComment = await db.insert(demandComments).values(validatedData).returning();
            res.status(201).json(newComment[0]);
        }
        catch (error) {
            if (error.name === "ZodError") {
                return res.status(400).json({ message: "Invalid comment data", errors: error.errors });
            }
            res.status(500).json({ message: "Failed to create comment" });
        }
    });
}
// server/api/feature-requests.ts
init_storage();
init_schema();
const zod_14 = require("zod");
function registerFeatureRequestRoutes(app2) {
    app2.get("/api/feature-requests", requireAuth, async (req, res) => {
        try {
            const currentUser = req.user || req.session?.user;
            if (!currentUser) {
                return res.status(401).json({
                    message: "Authentication required",
                    code: "AUTH_REQUIRED"
                });
            }
            console.log(`\u{1F4CB} Fetching feature requests for user ${currentUser.id} with role ${currentUser.role}`);
            const featureRequests2 = await storage.getFeatureRequestsForUser(currentUser.id, currentUser.role, currentUser.organizationId);
            console.log(`\u2705 Found ${featureRequests2.length} feature requests for user ${currentUser.id}`);
            res.json(featureRequests2);
        }
        catch (error) {
            console.error("\u274C Error fetching feature requests:", error);
            res.status(500).json({
                error: "Internal server error",
                message: "Failed to fetch feature requests"
            });
        }
    });
    app2.get("/api/feature-requests/:id", requireAuth, async (req, res) => {
        try {
            const { id } = req.params;
            const currentUser = req.user || req.session?.user;
            if (!currentUser) {
                return res.status(401).json({
                    message: "Authentication required",
                    code: "AUTH_REQUIRED"
                });
            }
            if (!id) {
                return res.status(400).json({
                    error: "Bad request",
                    message: "Feature request ID is required"
                });
            }
            const featureRequest = await storage.getFeatureRequest(id, currentUser.id, currentUser.role, currentUser.organizationId);
            if (!featureRequest) {
                return res.status(404).json({
                    error: "Not found",
                    message: "Feature request not found or access denied"
                });
            }
            res.json(featureRequest);
        }
        catch (error) {
            console.error("\u274C Error fetching feature request:", error);
            res.status(500).json({
                error: "Internal server error",
                message: "Failed to fetch feature request"
            });
        }
    });
    app2.post("/api/feature-requests", requireAuth, async (req, res) => {
        try {
            const currentUser = req.user || req.session?.user;
            if (!currentUser) {
                return res.status(401).json({
                    message: "Authentication required",
                    code: "AUTH_REQUIRED"
                });
            }
            const validation = insertFeatureRequestSchema.safeParse({
                ...req.body,
                createdBy: currentUser.id
            });
            if (!validation.success) {
                return res.status(400).json({
                    error: "Validation failed",
                    message: "Invalid feature request data",
                    details: validation.error.issues
                });
            }
            const featureRequestData = validation.data;
            const featureRequest = await storage.createFeatureRequest(featureRequestData);
            console.log(`\u{1F4A1} Created new feature request ${featureRequest.id} by user ${currentUser.id}`);
            res.status(201).json(featureRequest);
        }
        catch (error) {
            console.error("\u274C Error creating feature request:", error);
            res.status(500).json({
                error: "Internal server error",
                message: "Failed to create feature request"
            });
        }
    });
    app2.patch("/api/feature-requests/:id", requireAuth, async (req, res) => {
        try {
            const { id } = req.params;
            const currentUser = req.user || req.session?.user;
            if (!currentUser) {
                return res.status(401).json({
                    message: "Authentication required",
                    code: "AUTH_REQUIRED"
                });
            }
            if (currentUser.role !== "admin") {
                return res.status(403).json({
                    error: "Forbidden",
                    message: "Only administrators can edit feature requests"
                });
            }
            if (!id) {
                return res.status(400).json({
                    error: "Bad request",
                    message: "Feature request ID is required"
                });
            }
            const updateSchema = zod_14.z.object({
                title: zod_14.z.string().min(1, "Title is required").max(200, "Title must not exceed 200 characters").optional(),
                description: zod_14.z.string().min(10, "Description must be at least 10 characters").max(2e3, "Description must not exceed 2000 characters").optional(),
                need: zod_14.z.string().min(5, "Need must be at least 5 characters").max(500, "Need must not exceed 500 characters").optional(),
                category: zod_14.z.enum([
                    "dashboard",
                    "property_management",
                    "resident_management",
                    "financial_management",
                    "maintenance",
                    "document_management",
                    "communication",
                    "reports",
                    "mobile_app",
                    "integrations",
                    "security",
                    "performance",
                    "other"
                ]).optional(),
                page: zod_14.z.string().min(1, "Page is required").optional(),
                status: zod_14.z.enum(["submitted", "under_review", "planned", "in_progress", "completed", "rejected"]).optional(),
                assignedTo: zod_14.z.string().uuid().nullable().optional(),
                adminNotes: zod_14.z.string().optional(),
                mergedIntoId: zod_14.z.string().uuid().nullable().optional()
            });
            const validation = updateSchema.safeParse(req.body);
            if (!validation.success) {
                return res.status(400).json({
                    error: "Validation failed",
                    message: "Invalid update data",
                    details: validation.error.issues
                });
            }
            const updates = validation.data;
            const featureRequest = await storage.updateFeatureRequest(id, updates, currentUser.id, currentUser.role);
            if (!featureRequest) {
                return res.status(404).json({
                    error: "Not found",
                    message: "Feature request not found or access denied"
                });
            }
            console.log(`\u{1F4DD} Updated feature request ${id} by user ${currentUser.id}`);
            res.json(featureRequest);
        }
        catch (error) {
            console.error("\u274C Error updating feature request:", error);
            res.status(500).json({
                error: "Internal server error",
                message: "Failed to update feature request"
            });
        }
    });
    app2.delete("/api/feature-requests/:id", requireAuth, async (req, res) => {
        try {
            const { id } = req.params;
            const currentUser = req.user || req.session?.user;
            if (!currentUser) {
                return res.status(401).json({
                    message: "Authentication required",
                    code: "AUTH_REQUIRED"
                });
            }
            if (currentUser.role !== "admin") {
                return res.status(403).json({
                    error: "Forbidden",
                    message: "Only administrators can delete feature requests"
                });
            }
            if (!id) {
                return res.status(400).json({
                    error: "Bad request",
                    message: "Feature request ID is required"
                });
            }
            const deleted = await storage.deleteFeatureRequest(id, currentUser.id, currentUser.role);
            if (!deleted) {
                return res.status(404).json({
                    error: "Not found",
                    message: "Feature request not found or access denied"
                });
            }
            console.log(`\u{1F5D1}\uFE0F Deleted feature request ${id} by user ${currentUser.id}`);
            res.status(204).send();
        }
        catch (error) {
            console.error("\u274C Error deleting feature request:", error);
            res.status(500).json({
                error: "Internal server error",
                message: "Failed to delete feature request"
            });
        }
    });
    app2.post("/api/feature-requests/:id/upvote", requireAuth, async (req, res) => {
        try {
            const { id } = req.params;
            const currentUser = req.user || req.session?.user;
            if (!currentUser) {
                return res.status(401).json({
                    message: "Authentication required",
                    code: "AUTH_REQUIRED"
                });
            }
            if (!id) {
                return res.status(400).json({
                    error: "Bad request",
                    message: "Feature request ID is required"
                });
            }
            const validation = insertFeatureRequestUpvoteSchema.safeParse({
                featureRequestId: id,
                userId: currentUser.id
            });
            if (!validation.success) {
                return res.status(400).json({
                    error: "Validation failed",
                    message: "Invalid upvote data",
                    details: validation.error.issues
                });
            }
            const upvoteData = validation.data;
            const result = await storage.upvoteFeatureRequest(upvoteData);
            if (!result.success) {
                return res.status(400).json({
                    error: "Upvote failed",
                    message: result.message
                });
            }
            console.log(`\u{1F44D} User ${currentUser.id} upvoted feature request ${id}`);
            res.json(result.data);
        }
        catch (error) {
            console.error("\u274C Error upvoting feature request:", error);
            res.status(500).json({
                error: "Internal server error",
                message: "Failed to upvote feature request"
            });
        }
    });
    app2.delete("/api/feature-requests/:id/upvote", requireAuth, async (req, res) => {
        try {
            const { id } = req.params;
            const currentUser = req.user || req.session?.user;
            if (!currentUser) {
                return res.status(401).json({
                    message: "Authentication required",
                    code: "AUTH_REQUIRED"
                });
            }
            if (!id) {
                return res.status(400).json({
                    error: "Bad request",
                    message: "Feature request ID is required"
                });
            }
            const result = await storage.removeFeatureRequestUpvote(id, currentUser.id);
            if (!result.success) {
                return res.status(400).json({
                    error: "Remove upvote failed",
                    message: result.message
                });
            }
            console.log(`\u{1F44E} User ${currentUser.id} removed upvote from feature request ${id}`);
            res.json(result.data);
        }
        catch (error) {
            console.error("\u274C Error removing upvote from feature request:", error);
            res.status(500).json({
                error: "Internal server error",
                message: "Failed to remove upvote from feature request"
            });
        }
    });
}
// server/api/contacts.ts
init_db();
init_schema();
const drizzle_orm_24 = require("drizzle-orm");
function registerContactRoutes(app2) {
    app2.get("/api/contacts/:entity/:entityId", requireAuth, async (req, res) => {
        try {
            const { entity, entityId } = req.params;
            const user = req.user;
            if (!["organization", "building", "residence"].includes(entity)) {
                return res.status(400).json({ message: "Invalid entity type" });
            }
            const entityContacts = await db.select().from(contacts).where((0, drizzle_orm_24.and)((0, drizzle_orm_24.eq)(contacts.entity, entity), (0, drizzle_orm_24.eq)(contacts.entityId, entityId), (0, drizzle_orm_24.eq)(contacts.isActive, true)));
            res.json(entityContacts);
        }
        catch (error) {
            console.error("\u274C Error fetching entity contacts:", error);
            res.status(500).json({ message: "Failed to fetch contacts" });
        }
    });
    app2.get("/api/residences/:residenceId/contacts", requireAuth, async (req, res) => {
        try {
            const { residenceId } = req.params;
            const user = req.user;
            if (user.role !== "admin") {
                const hasAccess = await db.select().from(residences).innerJoin(buildings, (0, drizzle_orm_24.eq)(residences.buildingId, buildings.id)).innerJoin(organizations, (0, drizzle_orm_24.eq)(buildings.organizationId, organizations.id)).where((0, drizzle_orm_24.and)((0, drizzle_orm_24.eq)(residences.id, residenceId), (0, drizzle_orm_24.eq)(residences.isActive, true)));
                if (hasAccess.length === 0) {
                    return res.status(403).json({ message: "Access denied" });
                }
            }
            const residenceContacts = await db.select().from(contacts).where((0, drizzle_orm_24.and)((0, drizzle_orm_24.eq)(contacts.entity, "residence"), (0, drizzle_orm_24.eq)(contacts.entityId, residenceId), (0, drizzle_orm_24.eq)(contacts.isActive, true)));
            res.json(residenceContacts);
        }
        catch (error) {
            console.error("\u274C Error fetching residence contacts:", error);
            res.status(500).json({ message: "Failed to fetch residence contacts" });
        }
    });
    app2.get("/api/contacts", requireAuth, async (req, res) => {
        try {
            const { entity, entityId } = req.query;
            const user = req.user;
            if (!entity || !entityId) {
                return res.json([]);
            }
            if (entity === "building") {
                const hasAccess = await db.select().from(buildings).innerJoin(organizations, (0, drizzle_orm_24.eq)(buildings.organizationId, organizations.id)).where((0, drizzle_orm_24.and)((0, drizzle_orm_24.eq)(buildings.id, entityId), (0, drizzle_orm_24.eq)(buildings.isActive, true)));
                if (hasAccess.length === 0) {
                    return res.status(404).json({ message: "Building not found" });
                }
            }
            const entityContacts = await db.select().from(contacts).where((0, drizzle_orm_24.and)((0, drizzle_orm_24.eq)(contacts.entity, entity), (0, drizzle_orm_24.eq)(contacts.entityId, entityId), (0, drizzle_orm_24.eq)(contacts.isActive, true)));
            res.json(entityContacts);
        }
        catch (error) {
            console.error("\u274C Error fetching contacts:", error);
            res.status(500).json({ message: "Failed to fetch contacts" });
        }
    });
    app2.post("/api/contacts", requireAuth, async (req, res) => {
        try {
            const user = req.user;
            const validatedData = insertContactSchema.parse(req.body);
            const { entity, entityId, name, email, phone, contactCategory } = validatedData;
            if (entity === "building" && user.role !== "admin" && user.role !== "manager") {
                return res.status(403).json({ message: "Only managers and admins can add building contacts" });
            }
            if (entity === "residence") {
                const residence = await db.select().from(residences).where((0, drizzle_orm_24.eq)(residences.id, entityId)).limit(1);
                if (residence.length === 0) {
                    return res.status(400).json({ message: "Residence not found" });
                }
            }
            else if (entity === "building") {
                const building = await db.select().from(buildings).where((0, drizzle_orm_24.eq)(buildings.id, entityId)).limit(1);
                if (building.length === 0) {
                    return res.status(400).json({ message: "Building not found" });
                }
            }
            const [newContact] = await db.insert(contacts).values([
                {
                    ...validatedData,
                    entity: validatedData.entity,
                    contactCategory: validatedData.contactCategory
                }
            ]).returning();
            res.status(201).json(newContact);
        }
        catch (error) {
            console.error("\u274C Error creating contact:", error);
            res.status(500).json({ message: "Failed to create contact" });
        }
    });
    app2.patch("/api/contacts/:id", requireAuth, async (req, res) => {
        try {
            const { id } = req.params;
            const user = req.user;
            const updates = req.body;
            const existing = await db.select().from(contacts).where((0, drizzle_orm_24.eq)(contacts.id, id)).limit(1);
            if (existing.length === 0) {
                return res.status(404).json({ message: "Contact not found" });
            }
            const contact = existing[0];
            if (user.role !== "admin" && user.role !== "manager") {
                return res.status(403).json({ message: "Access denied" });
            }
            const [updatedContact] = await db.update(contacts).set({
                ...updates,
                updatedAt: /* @__PURE__ */ new Date()
            }).where((0, drizzle_orm_24.eq)(contacts.id, id)).returning();
            res.json(updatedContact);
        }
        catch (error) {
            console.error("\u274C Error updating contact:", error);
            res.status(500).json({ message: "Failed to update contact" });
        }
    });
    app2.delete("/api/contacts/:id", requireAuth, async (req, res) => {
        try {
            const { id } = req.params;
            const user = req.user;
            const existing = await db.select().from(contacts).where((0, drizzle_orm_24.eq)(contacts.id, id)).limit(1);
            if (existing.length === 0) {
                return res.status(404).json({ message: "Contact not found" });
            }
            const contact = existing[0];
            if (user.role !== "admin" && user.role !== "manager" && user.role !== "resident") {
                return res.status(403).json({ message: "Access denied" });
            }
            await db.update(contacts).set({
                isActive: false,
                updatedAt: /* @__PURE__ */ new Date()
            }).where((0, drizzle_orm_24.eq)(contacts.id, id));
            res.json({ message: "Contact deleted successfully" });
        }
        catch (error) {
            console.error("\u274C Error deleting contact:", error);
            res.status(500).json({ message: "Failed to delete contact" });
        }
    });
}
// server/api/common-spaces.ts
init_db();
const drizzle_orm_25 = require("drizzle-orm");
init_schema();
const zod_15 = require("zod");
var { commonSpaces: commonSpaces2, bookings: bookings2, userBookingRestrictions: userBookingRestrictions2, userTimeLimits: userTimeLimits2, buildings: buildings4, users: users4, userResidences: userResidences3, userOrganizations: userOrganizations4 } = schema_exports;
var commonSpaceFilterSchema = zod_15.z.object({
    building_id: zod_15.z.string().uuid().optional()
});
var bookingFilterSchema = zod_15.z.object({
    start_date: zod_15.z.string().datetime().optional(),
    end_date: zod_15.z.string().datetime().optional()
});
var calendarQuerySchema = zod_15.z.object({
    start_date: zod_15.z.string().datetime(),
    end_date: zod_15.z.string().datetime(),
    view: zod_15.z.enum(["month", "week", "day"]).optional().default("month")
});
var buildingCalendarSchema = zod_15.z.object({
    buildingId: zod_15.z.string().uuid()
});
var createBookingSchema = zod_15.z.object({
    start_time: zod_15.z.string().datetime(),
    end_time: zod_15.z.string().datetime()
});
var createRestrictionSchema = zod_15.z.object({
    common_space_id: zod_15.z.string().uuid(),
    is_blocked: zod_15.z.boolean(),
    reason: zod_15.z.string().optional()
});
var createCommonSpaceSchema = zod_15.z.object({
    name: zod_15.z.string().min(1, "Name is required").max(100, "Name too long"),
    description: zod_15.z.string().optional(),
    building_id: zod_15.z.string().uuid("Building ID must be a valid UUID"),
    is_reservable: zod_15.z.boolean().default(true),
    capacity: zod_15.z.number().int().min(1).max(200).optional(),
    opening_hours: zod_15.z.object({
        start: zod_15.z.string().regex(/^\d{2}:\d{2}$/, "Invalid time format"),
        end: zod_15.z.string().regex(/^\d{2}:\d{2}$/, "Invalid time format")
    }).optional()
});
var setTimeLimitSchema = zod_15.z.object({
    user_id: zod_15.z.string().uuid(),
    common_space_id: zod_15.z.string().uuid().optional(),
    // null means applies to all spaces
    limit_type: zod_15.z.enum(["monthly", "yearly"]),
    limit_hours: zod_15.z.number().int().min(1).max(8760)
    // Max 1 year worth of hours
});
var spaceIdSchema = zod_15.z.object({
    spaceId: zod_15.z.string().uuid()
});
var bookingIdSchema = zod_15.z.object({
    bookingId: zod_15.z.string().uuid()
});
var userIdSchema = zod_15.z.object({
    userId: zod_15.z.string().uuid()
});
async function getAccessibleBuildingIds(user) {
    if (user.role === "admin") {
        const allBuildings = await db.select({ buildingId: buildings4.id }).from(buildings4).where((0, drizzle_orm_25.eq)(buildings4.isActive, true));
        return allBuildings.map((b) => b.buildingId);
    }
    const userOrgs = await db.select({
        organizationId: organizations.id,
        organizationName: organizations.name,
        canAccessAllOrganizations: userOrganizations4.canAccessAllOrganizations
    }).from(organizations).innerJoin(userOrganizations4, (0, drizzle_orm_25.eq)(userOrganizations4.organizationId, organizations.id)).where((0, drizzle_orm_25.and)((0, drizzle_orm_25.eq)(userOrganizations4.userId, user.id), (0, drizzle_orm_25.eq)(userOrganizations4.isActive, true)));
    const hasGlobalAccess = userOrgs.some((org) => org.organizationName === "Koveo" || org.canAccessAllOrganizations);
    if (hasGlobalAccess) {
        const allBuildings = await db.select({ buildingId: buildings4.id }).from(buildings4).where((0, drizzle_orm_25.eq)(buildings4.isActive, true));
        return allBuildings.map((b) => b.buildingId);
    }
    if (user.role === "manager") {
        if (userOrgs.length > 0) {
            const orgIds = userOrgs.map((uo) => uo.organizationId);
            const orgBuildings = await db.select({ buildingId: buildings4.id }).from(buildings4).where((0, drizzle_orm_25.and)((0, drizzle_orm_25.inArray)(buildings4.organizationId, orgIds), (0, drizzle_orm_25.eq)(buildings4.isActive, true)));
            return orgBuildings.map((b) => b.buildingId);
        }
    }
    const userBuildingIds = await db.select({ buildingId: residences.buildingId }).from(userResidences3).innerJoin(residences, (0, drizzle_orm_25.eq)(userResidences3.residenceId, residences.id)).where((0, drizzle_orm_25.and)((0, drizzle_orm_25.eq)(userResidences3.userId, user.id), (0, drizzle_orm_25.eq)(userResidences3.isActive, true)));
    return userBuildingIds.map((b) => b.buildingId);
}
async function getUserBookingHours(userId, commonSpaceId, limitType) {
    const now = /* @__PURE__ */ new Date();
    let startDate;
    if (limitType === "monthly") {
        startDate = new Date(now.getFullYear(), now.getMonth(), 1);
    }
    else {
        startDate = new Date(now.getFullYear(), 0, 1);
    }
    const conditions = [
        (0, drizzle_orm_25.eq)(bookings2.userId, userId),
        (0, drizzle_orm_25.eq)(bookings2.status, "confirmed"),
        (0, drizzle_orm_25.gte)(bookings2.startTime, startDate)
    ];
    if (commonSpaceId) {
        conditions.push((0, drizzle_orm_25.eq)(bookings2.commonSpaceId, commonSpaceId));
    }
    const userBookings = await db.select({
        totalHours: (0, drizzle_orm_25.sql) `EXTRACT(EPOCH FROM SUM(${bookings2.endTime} - ${bookings2.startTime})) / 3600`
    }).from(bookings2).where((0, drizzle_orm_25.and)(...conditions));
    return userBookings[0]?.totalHours || 0;
}
async function checkUserTimeLimit(userId, commonSpaceId, newBookingHours) {
    const timeLimits = await db.select().from(userTimeLimits2).where((0, drizzle_orm_25.and)((0, drizzle_orm_25.eq)(userTimeLimits2.userId, userId), (0, drizzle_orm_25.or)((0, drizzle_orm_25.eq)(userTimeLimits2.commonSpaceId, commonSpaceId), (0, drizzle_orm_25.sql) `${userTimeLimits2.commonSpaceId} IS NULL`))).orderBy(userTimeLimits2.commonSpaceId);
    if (timeLimits.length === 0) {
        return { withinLimit: true };
    }
    const activeLimit = timeLimits[0];
    const currentHours = await getUserBookingHours(userId, activeLimit.commonSpaceId, activeLimit.limitType);
    const totalAfterBooking = currentHours + newBookingHours;
    const remainingHours = Math.max(0, activeLimit.limitHours - currentHours);
    if (totalAfterBooking > activeLimit.limitHours) {
        const limitPeriod = activeLimit.limitType === "monthly" ? "ce mois" : "cette ann\xE9e";
        return {
            withinLimit: false,
            message: `Limite de temps d\xE9pass\xE9e. Vous avez utilis\xE9 ${Math.round(currentHours)}h sur ${activeLimit.limitHours}h autoris\xE9es pour ${limitPeriod}. Il vous reste ${Math.round(remainingHours)}h disponibles.`,
            remainingHours
        };
    }
    return { withinLimit: true, remainingHours };
}
async function hasOverlappingBookings(commonSpaceId, startTime, endTime, excludeBookingId) {
    const conditions = [
        (0, drizzle_orm_25.eq)(bookings2.commonSpaceId, commonSpaceId),
        (0, drizzle_orm_25.eq)(bookings2.status, "confirmed"),
        (0, drizzle_orm_25.or)(
        // New booking starts during existing booking
        (0, drizzle_orm_25.and)((0, drizzle_orm_25.gte)(bookings2.startTime, startTime), (0, drizzle_orm_25.lte)(bookings2.startTime, endTime)), 
        // New booking ends during existing booking
        (0, drizzle_orm_25.and)((0, drizzle_orm_25.gte)(bookings2.endTime, startTime), (0, drizzle_orm_25.lte)(bookings2.endTime, endTime)), 
        // New booking completely contains existing booking
        (0, drizzle_orm_25.and)((0, drizzle_orm_25.lte)(bookings2.startTime, startTime), (0, drizzle_orm_25.gte)(bookings2.endTime, endTime)), 
        // Existing booking completely contains new booking
        (0, drizzle_orm_25.and)((0, drizzle_orm_25.gte)(bookings2.startTime, startTime), (0, drizzle_orm_25.lte)(bookings2.endTime, endTime)))
    ];
    if (excludeBookingId) {
        conditions.push((0, drizzle_orm_25.sql) `${bookings2.id} != ${excludeBookingId}`);
    }
    const overlapping = await db.select({ id: bookings2.id }).from(bookings2).where((0, drizzle_orm_25.and)(...conditions)).limit(1);
    return overlapping.length > 0;
}
async function isUserBlocked(userId, commonSpaceId) {
    const restriction = await db.select({ isBlocked: userBookingRestrictions2.isBlocked }).from(userBookingRestrictions2).where((0, drizzle_orm_25.and)((0, drizzle_orm_25.eq)(userBookingRestrictions2.userId, userId), (0, drizzle_orm_25.eq)(userBookingRestrictions2.commonSpaceId, commonSpaceId))).limit(1);
    return restriction.length > 0 && restriction[0].isBlocked;
}
function isWithinOpeningHours(startTime, endTime, openingHours) {
    if (!openingHours || openingHours.length === 0) {
        return true;
    }
    const startDay = startTime.toLocaleDateString("en-US", { weekday: "long" });
    const endDay = endTime.toLocaleDateString("en-US", { weekday: "long" });
    if (startDay !== endDay) {
        return false;
    }
    const dayHours = openingHours.find((oh) => oh.day === startDay);
    if (!dayHours) {
        return false;
    }
    const startTimeStr = startTime.toTimeString().slice(0, 5);
    const endTimeStr = endTime.toTimeString().slice(0, 5);
    return startTimeStr >= dayHours.open && endTimeStr <= dayHours.close;
}
function registerCommonSpacesRoutes(app2) {
    app2.get("/api/common-spaces", requireAuth, async (req, res) => {
        try {
            const user = req.user || req.session?.user;
            if (!user) {
                return res.status(401).json({
                    message: "Authentication required",
                    code: "AUTH_REQUIRED"
                });
            }
            const queryValidation = commonSpaceFilterSchema.safeParse(req.query);
            if (!queryValidation.success) {
                return res.status(400).json({
                    message: "Invalid query parameters",
                    errors: queryValidation.error.issues
                });
            }
            const { building_id } = queryValidation.data;
            const accessibleBuildingIds = await getAccessibleBuildingIds(user);
            if (accessibleBuildingIds.length === 0) {
                return res.json([]);
            }
            const conditions = [(0, drizzle_orm_25.eq)(buildings4.isActive, true)];
            if (building_id) {
                if (!accessibleBuildingIds.includes(building_id)) {
                    return res.status(403).json({
                        message: "Access denied to this building",
                        code: "INSUFFICIENT_PERMISSIONS"
                    });
                }
                conditions.push((0, drizzle_orm_25.eq)(commonSpaces2.buildingId, building_id));
            }
            else {
                conditions.push((0, drizzle_orm_25.inArray)(commonSpaces2.buildingId, accessibleBuildingIds));
            }
            const spaces = await db.select({
                id: commonSpaces2.id,
                name: commonSpaces2.name,
                description: commonSpaces2.description,
                buildingId: commonSpaces2.buildingId,
                buildingName: buildings4.name,
                isReservable: commonSpaces2.isReservable,
                capacity: commonSpaces2.capacity,
                contactPersonId: commonSpaces2.contactPersonId,
                contactPersonName: (0, drizzle_orm_25.sql) `CONCAT(${users4.firstName}, ' ', ${users4.lastName})`,
                openingHours: commonSpaces2.openingHours,
                bookingRules: commonSpaces2.bookingRules,
                createdAt: commonSpaces2.createdAt,
                updatedAt: commonSpaces2.updatedAt
            }).from(commonSpaces2).innerJoin(buildings4, (0, drizzle_orm_25.eq)(commonSpaces2.buildingId, buildings4.id)).leftJoin(users4, (0, drizzle_orm_25.eq)(commonSpaces2.contactPersonId, users4.id)).where((0, drizzle_orm_25.and)(...conditions)).orderBy(buildings4.name, commonSpaces2.name);
            res.json(spaces);
        }
        catch (error) {
            res.status(500).json({
                message: "Failed to fetch common spaces",
                error: error instanceof Error ? error.message : "Unknown error"
            });
        }
    });
    app2.get("/api/common-spaces/:spaceId/bookings", requireAuth, async (req, res) => {
        try {
            const user = req.user || req.session?.user;
            if (!user) {
                return res.status(401).json({
                    message: "Authentication required",
                    code: "AUTH_REQUIRED"
                });
            }
            const paramValidation = spaceIdSchema.safeParse(req.params);
            if (!paramValidation.success) {
                return res.status(400).json({
                    message: "Invalid space ID",
                    errors: paramValidation.error.issues
                });
            }
            const queryValidation = bookingFilterSchema.safeParse(req.query);
            if (!queryValidation.success) {
                return res.status(400).json({
                    message: "Invalid query parameters",
                    errors: queryValidation.error.issues
                });
            }
            const { spaceId } = paramValidation.data;
            const { start_date, end_date } = queryValidation.data;
            const space = await db.select({
                id: commonSpaces2.id,
                buildingId: commonSpaces2.buildingId
            }).from(commonSpaces2).where((0, drizzle_orm_25.eq)(commonSpaces2.id, spaceId)).limit(1);
            if (space.length === 0) {
                return res.status(404).json({
                    message: "Common space not found",
                    code: "NOT_FOUND"
                });
            }
            const accessibleBuildingIds = await getAccessibleBuildingIds(user);
            if (!accessibleBuildingIds.includes(space[0].buildingId)) {
                return res.status(403).json({
                    message: "Access denied to this common space",
                    code: "INSUFFICIENT_PERMISSIONS"
                });
            }
            const conditions = [(0, drizzle_orm_25.eq)(bookings2.commonSpaceId, spaceId)];
            if (start_date) {
                conditions.push((0, drizzle_orm_25.gte)(bookings2.startTime, new Date(start_date)));
            }
            if (end_date) {
                conditions.push((0, drizzle_orm_25.lte)(bookings2.endTime, new Date(end_date)));
            }
            const spaceBookings = await db.select({
                id: bookings2.id,
                commonSpaceId: bookings2.commonSpaceId,
                userId: bookings2.userId,
                userName: (0, drizzle_orm_25.sql) `CONCAT(${users4.firstName}, ' ', ${users4.lastName})`,
                userEmail: users4.email,
                startTime: bookings2.startTime,
                endTime: bookings2.endTime,
                status: bookings2.status,
                createdAt: bookings2.createdAt,
                updatedAt: bookings2.updatedAt
            }).from(bookings2).innerJoin(users4, (0, drizzle_orm_25.eq)(bookings2.userId, users4.id)).where((0, drizzle_orm_25.and)(...conditions)).orderBy(bookings2.startTime);
            res.json(spaceBookings);
        }
        catch (error) {
            console.error("\u274C Error fetching bookings:", error);
            res.status(500).json({
                message: "Failed to fetch bookings",
                error: error instanceof Error ? error.message : "Unknown error"
            });
        }
    });
    app2.post("/api/common-spaces/:spaceId/bookings", requireAuth, async (req, res) => {
        try {
            const user = req.user || req.session?.user;
            if (!user) {
                return res.status(401).json({
                    message: "Authentication required",
                    code: "AUTH_REQUIRED"
                });
            }
            const paramValidation = spaceIdSchema.safeParse(req.params);
            if (!paramValidation.success) {
                return res.status(400).json({
                    message: "Invalid space ID",
                    errors: paramValidation.error.issues
                });
            }
            const bodyValidation = createBookingSchema.safeParse(req.body);
            if (!bodyValidation.success) {
                return res.status(400).json({
                    message: "Invalid booking data",
                    errors: bodyValidation.error.issues
                });
            }
            const { spaceId } = paramValidation.data;
            const { start_time, end_time } = bodyValidation.data;
            const startTime = new Date(start_time);
            const endTime = new Date(end_time);
            if (startTime >= endTime) {
                return res.status(400).json({
                    message: "Start time must be before end time",
                    code: "INVALID_TIME_RANGE"
                });
            }
            const now = /* @__PURE__ */ new Date();
            const fiveMinutesAgo = new Date(now.getTime() - 5 * 60 * 1e3);
            if (startTime < fiveMinutesAgo) {
                return res.status(400).json({
                    message: "Cannot book in the past",
                    code: "INVALID_TIME_RANGE"
                });
            }
            const space = await db.select({
                id: commonSpaces2.id,
                name: commonSpaces2.name,
                buildingId: commonSpaces2.buildingId,
                isReservable: commonSpaces2.isReservable,
                openingHours: commonSpaces2.openingHours
            }).from(commonSpaces2).where((0, drizzle_orm_25.eq)(commonSpaces2.id, spaceId)).limit(1);
            if (space.length === 0) {
                return res.status(404).json({
                    message: "Common space not found",
                    code: "NOT_FOUND"
                });
            }
            const commonSpace = space[0];
            if (!commonSpace.isReservable) {
                return res.status(400).json({
                    message: "This common space is not reservable",
                    code: "NOT_RESERVABLE"
                });
            }
            const accessibleBuildingIds = await getAccessibleBuildingIds(user);
            if (!accessibleBuildingIds.includes(commonSpace.buildingId)) {
                return res.status(403).json({
                    message: "Access denied to this common space",
                    code: "INSUFFICIENT_PERMISSIONS"
                });
            }
            const blocked = await isUserBlocked(user.id, spaceId);
            if (blocked) {
                return res.status(403).json({
                    message: "You are blocked from booking this space",
                    code: "USER_BLOCKED"
                });
            }
            if (commonSpace.openingHours && !isWithinOpeningHours(startTime, endTime, commonSpace.openingHours)) {
                return res.status(400).json({
                    message: "Booking time is outside opening hours",
                    code: "OUTSIDE_OPENING_HOURS"
                });
            }
            const hasOverlap = await hasOverlappingBookings(spaceId, startTime, endTime);
            if (hasOverlap) {
                return res.status(409).json({
                    message: "Time slot is already booked",
                    code: "TIME_CONFLICT"
                });
            }
            const bookingDurationHours = (endTime.getTime() - startTime.getTime()) / (1e3 * 60 * 60);
            const timeLimitCheck = await checkUserTimeLimit(user.id, spaceId, bookingDurationHours);
            if (!timeLimitCheck.withinLimit) {
                return res.status(403).json({
                    message: timeLimitCheck.message,
                    code: "TIME_LIMIT_EXCEEDED",
                    remainingHours: timeLimitCheck.remainingHours
                });
            }
            const newBooking = await db.insert(bookings2).values({
                commonSpaceId: spaceId,
                userId: user.id,
                startTime,
                endTime,
                status: "confirmed"
            }).returning();
            res.status(201).json({
                message: "Booking created successfully",
                booking: newBooking[0]
            });
        }
        catch (error) {
            console.error("\u274C Error creating booking:", error);
            res.status(500).json({
                message: "Failed to create booking",
                error: error instanceof Error ? error.message : "Unknown error"
            });
        }
    });
    app2.get("/api/common-spaces/calendar/:spaceId", requireAuth, async (req, res) => {
        try {
            const user = req.user || req.session?.user;
            if (!user) {
                return res.status(401).json({
                    message: "Authentication required",
                    code: "AUTH_REQUIRED"
                });
            }
            const paramValidation = spaceIdSchema.safeParse(req.params);
            if (!paramValidation.success) {
                return res.status(400).json({
                    message: "Invalid space ID",
                    errors: paramValidation.error.issues
                });
            }
            const queryValidation = calendarQuerySchema.safeParse(req.query);
            if (!queryValidation.success) {
                return res.status(400).json({
                    message: "Invalid query parameters",
                    errors: queryValidation.error.issues
                });
            }
            const { spaceId } = paramValidation.data;
            const { start_date, end_date, view } = queryValidation.data;
            const space = await db.select({
                id: commonSpaces2.id,
                name: commonSpaces2.name,
                buildingId: commonSpaces2.buildingId,
                isReservable: commonSpaces2.isReservable,
                openingHours: commonSpaces2.openingHours,
                capacity: commonSpaces2.capacity
            }).from(commonSpaces2).where((0, drizzle_orm_25.eq)(commonSpaces2.id, spaceId)).limit(1);
            if (space.length === 0) {
                return res.status(404).json({
                    message: "Common space not found",
                    code: "NOT_FOUND"
                });
            }
            const commonSpace = space[0];
            const accessibleBuildingIds = await getAccessibleBuildingIds(user);
            if (!accessibleBuildingIds.includes(commonSpace.buildingId)) {
                return res.status(403).json({
                    message: "Access denied to this common space",
                    code: "INSUFFICIENT_PERMISSIONS"
                });
            }
            const conditions = [
                (0, drizzle_orm_25.eq)(bookings2.commonSpaceId, spaceId),
                (0, drizzle_orm_25.eq)(bookings2.status, "confirmed"),
                (0, drizzle_orm_25.gte)(bookings2.startTime, new Date(start_date)),
                (0, drizzle_orm_25.lte)(bookings2.endTime, new Date(end_date))
            ];
            const spaceBookings = await db.select({
                id: bookings2.id,
                startTime: bookings2.startTime,
                endTime: bookings2.endTime,
                status: bookings2.status,
                userId: bookings2.userId,
                userName: (0, drizzle_orm_25.sql) `CONCAT(${users4.firstName}, ' ', ${users4.lastName})`,
                userEmail: users4.email,
                userRole: users4.role
            }).from(bookings2).innerJoin(users4, (0, drizzle_orm_25.eq)(bookings2.userId, users4.id)).where((0, drizzle_orm_25.and)(...conditions)).orderBy(bookings2.startTime);
            const canViewDetails = ["admin", "manager"].includes(user.role);
            const events = spaceBookings.map((booking) => ({
                id: booking.id,
                startTime: booking.startTime.toISOString(),
                endTime: booking.endTime.toISOString(),
                status: booking.status,
                userId: booking.userId,
                userName: canViewDetails || booking.userId === user.id ? booking.userName : "D\xE9j\xE0 R\xE9serv\xE9",
                userEmail: canViewDetails || booking.userId === user.id ? booking.userEmail : null,
                isOwnBooking: booking.userId === user.id,
                spaceId,
                spaceName: commonSpace.name,
                userRole: booking.userRole
            }));
            const totalBookings = events.length;
            const totalHours = events.reduce((sum, event) => {
                const duration = (new Date(event.endTime).getTime() - new Date(event.startTime).getTime()) / (1e3 * 60 * 60);
                return sum + duration;
            }, 0);
            const uniqueUsers = new Set(events.map((e) => e.userId)).size;
            const calendarData = {
                space: {
                    id: commonSpace.id,
                    name: commonSpace.name,
                    isReservable: commonSpace.isReservable,
                    openingHours: commonSpace.openingHours
                },
                calendar: {
                    view,
                    startDate: start_date,
                    endDate: end_date,
                    events
                },
                permissions: {
                    canViewDetails,
                    canCreateBookings: commonSpace.isReservable && !await isUserBlocked(user.id, spaceId)
                },
                summary: {
                    totalBookings,
                    totalHours: Math.round(totalHours * 10) / 10,
                    uniqueUsers
                }
            };
            res.json(calendarData);
        }
        catch (error) {
            console.error("\u274C Error fetching calendar data:", error);
            res.status(500).json({
                message: "Failed to fetch calendar data",
                error: error instanceof Error ? error.message : "Unknown error"
            });
        }
    });
    app2.get("/api/common-spaces/my-bookings", requireAuth, async (req, res) => {
        try {
            const user = req.user;
            const userBookings = await db.select({
                id: bookings2.id,
                commonSpaceId: bookings2.commonSpaceId,
                startTime: bookings2.startTime,
                endTime: bookings2.endTime,
                status: bookings2.status,
                createdAt: bookings2.createdAt,
                commonSpaceName: commonSpaces2.name,
                buildingName: buildings4.name,
                buildingAddress: buildings4.address
            }).from(bookings2).innerJoin(commonSpaces2, (0, drizzle_orm_25.eq)(bookings2.commonSpaceId, commonSpaces2.id)).innerJoin(buildings4, (0, drizzle_orm_25.eq)(commonSpaces2.buildingId, buildings4.id)).where((0, drizzle_orm_25.and)((0, drizzle_orm_25.eq)(bookings2.userId, user.id), (0, drizzle_orm_25.eq)(bookings2.status, "confirmed"))).orderBy((0, drizzle_orm_25.desc)(bookings2.startTime));
            res.json(userBookings);
        }
        catch (error) {
            console.error("\u274C Error fetching user bookings:", error);
            res.status(500).json({
                message: "Failed to fetch user bookings",
                details: error instanceof Error ? error.message : "Unknown error"
            });
        }
    });
    app2.delete("/api/common-spaces/bookings/:bookingId", requireAuth, async (req, res) => {
        try {
            const user = req.user || req.session?.user;
            if (!user) {
                return res.status(401).json({
                    message: "Authentication required",
                    code: "AUTH_REQUIRED"
                });
            }
            const paramValidation = bookingIdSchema.safeParse(req.params);
            if (!paramValidation.success) {
                return res.status(400).json({
                    message: "Invalid booking ID",
                    errors: paramValidation.error.issues
                });
            }
            const { bookingId } = paramValidation.data;
            const booking = await db.select({
                id: bookings2.id,
                userId: bookings2.userId,
                commonSpaceId: bookings2.commonSpaceId,
                buildingId: commonSpaces2.buildingId,
                status: bookings2.status
            }).from(bookings2).innerJoin(commonSpaces2, (0, drizzle_orm_25.eq)(bookings2.commonSpaceId, commonSpaces2.id)).where((0, drizzle_orm_25.eq)(bookings2.id, bookingId)).limit(1);
            if (booking.length === 0) {
                return res.status(404).json({
                    message: "Booking not found",
                    code: "NOT_FOUND"
                });
            }
            const bookingDetails = booking[0];
            let canCancel = false;
            if (bookingDetails.userId === user.id) {
                canCancel = true;
            }
            else if (["admin", "manager"].includes(user.role)) {
                const accessibleBuildingIds = await getAccessibleBuildingIds(user);
                canCancel = accessibleBuildingIds.includes(bookingDetails.buildingId);
            }
            if (!canCancel) {
                return res.status(403).json({
                    message: "Can only cancel your own bookings",
                    code: "INSUFFICIENT_PERMISSIONS"
                });
            }
            await db.update(bookings2).set({
                status: "cancelled",
                updatedAt: /* @__PURE__ */ new Date()
            }).where((0, drizzle_orm_25.eq)(bookings2.id, bookingId));
            res.json({
                message: "Booking cancelled successfully"
            });
        }
        catch (error) {
            console.error("\u274C Error cancelling booking:", error);
            res.status(500).json({
                message: "Failed to cancel booking",
                error: error instanceof Error ? error.message : "Unknown error"
            });
        }
    });
    app2.get("/api/common-spaces/:spaceId/stats", requireAuth, requireRole(["admin", "manager"]), async (req, res) => {
        try {
            const user = req.user || req.session?.user;
            if (!user) {
                return res.status(401).json({
                    message: "Authentication required",
                    code: "AUTH_REQUIRED"
                });
            }
            const paramValidation = spaceIdSchema.safeParse(req.params);
            if (!paramValidation.success) {
                return res.status(400).json({
                    message: "Invalid space ID",
                    errors: paramValidation.error.issues
                });
            }
            const { spaceId } = paramValidation.data;
            const space = await db.select({
                id: commonSpaces2.id,
                buildingId: commonSpaces2.buildingId,
                name: commonSpaces2.name
            }).from(commonSpaces2).where((0, drizzle_orm_25.eq)(commonSpaces2.id, spaceId)).limit(1);
            if (space.length === 0) {
                return res.status(404).json({
                    message: "Common space not found",
                    code: "NOT_FOUND"
                });
            }
            const accessibleBuildingIds = await getAccessibleBuildingIds(user);
            if (!accessibleBuildingIds.includes(space[0].buildingId)) {
                return res.status(403).json({
                    message: "Access denied to this common space",
                    code: "INSUFFICIENT_PERMISSIONS"
                });
            }
            const oneYearAgo = /* @__PURE__ */ new Date();
            oneYearAgo.setFullYear(oneYearAgo.getFullYear() - 1);
            const stats = await db.select({
                userId: bookings2.userId,
                userName: (0, drizzle_orm_25.sql) `CONCAT(${users4.firstName}, ' ', ${users4.lastName})`,
                userEmail: users4.email,
                totalHours: (0, drizzle_orm_25.sql) `EXTRACT(EPOCH FROM SUM(${bookings2.endTime} - ${bookings2.startTime})) / 3600`,
                totalBookings: (0, drizzle_orm_25.sql) `COUNT(${bookings2.id})`
            }).from(bookings2).innerJoin(users4, (0, drizzle_orm_25.eq)(bookings2.userId, users4.id)).where((0, drizzle_orm_25.and)((0, drizzle_orm_25.eq)(bookings2.commonSpaceId, spaceId), (0, drizzle_orm_25.eq)(bookings2.status, "confirmed"), (0, drizzle_orm_25.gte)(bookings2.startTime, oneYearAgo))).groupBy(bookings2.userId, users4.firstName, users4.lastName, users4.email).orderBy((0, drizzle_orm_25.desc)((0, drizzle_orm_25.sql) `EXTRACT(EPOCH FROM SUM(${bookings2.endTime} - ${bookings2.startTime})) / 3600`));
            const totalStats = await db.select({
                totalBookings: (0, drizzle_orm_25.sql) `COUNT(${bookings2.id})`,
                totalHours: (0, drizzle_orm_25.sql) `EXTRACT(EPOCH FROM SUM(${bookings2.endTime} - ${bookings2.startTime})) / 3600`,
                uniqueUsers: (0, drizzle_orm_25.sql) `COUNT(DISTINCT ${bookings2.userId})`
            }).from(bookings2).where((0, drizzle_orm_25.and)((0, drizzle_orm_25.eq)(bookings2.commonSpaceId, spaceId), (0, drizzle_orm_25.eq)(bookings2.status, "confirmed"), (0, drizzle_orm_25.gte)(bookings2.startTime, oneYearAgo)));
            res.json({
                spaceName: space[0].name,
                period: "Last 12 months",
                summary: totalStats[0],
                userStats: stats
            });
        }
        catch (error) {
            console.error("\u274C Error fetching space statistics:", error);
            res.status(500).json({
                message: "Failed to fetch space statistics",
                error: error instanceof Error ? error.message : "Unknown error"
            });
        }
    });
    app2.post("/api/common-spaces/users/:userId/restrictions", requireAuth, requireRole(["admin", "manager"]), async (req, res) => {
        try {
            const user = req.user || req.session?.user;
            if (!user) {
                return res.status(401).json({
                    message: "Authentication required",
                    code: "AUTH_REQUIRED"
                });
            }
            const paramValidation = userIdSchema.safeParse(req.params);
            if (!paramValidation.success) {
                return res.status(400).json({
                    message: "Invalid user ID",
                    errors: paramValidation.error.issues.map((issue) => ({
                        field: issue.path.join("."),
                        message: issue.message
                    }))
                });
            }
            const bodyValidation = createRestrictionSchema.safeParse(req.body);
            if (!bodyValidation.success) {
                return res.status(400).json({
                    message: "Invalid restriction data",
                    errors: bodyValidation.error.issues.map((issue) => ({
                        field: issue.path.join("."),
                        message: issue.message
                    }))
                });
            }
            const { userId } = paramValidation.data;
            const { common_space_id, is_blocked, reason } = bodyValidation.data;
            const targetUser = await db.select({ id: users4.id }).from(users4).where((0, drizzle_orm_25.eq)(users4.id, userId)).limit(1);
            if (targetUser.length === 0) {
                return res.status(404).json({
                    message: "User not found",
                    code: "NOT_FOUND"
                });
            }
            const space = await db.select({
                id: commonSpaces2.id,
                buildingId: commonSpaces2.buildingId
            }).from(commonSpaces2).where((0, drizzle_orm_25.eq)(commonSpaces2.id, common_space_id)).limit(1);
            if (space.length === 0) {
                return res.status(404).json({
                    message: "Common space not found",
                    code: "NOT_FOUND"
                });
            }
            const accessibleBuildingIds = await getAccessibleBuildingIds(user);
            if (!accessibleBuildingIds.includes(space[0].buildingId)) {
                return res.status(403).json({
                    message: "Access denied to this common space",
                    code: "INSUFFICIENT_PERMISSIONS"
                });
            }
            const existingRestriction = await db.select({ id: userBookingRestrictions2.id }).from(userBookingRestrictions2).where((0, drizzle_orm_25.and)((0, drizzle_orm_25.eq)(userBookingRestrictions2.userId, userId), (0, drizzle_orm_25.eq)(userBookingRestrictions2.commonSpaceId, common_space_id))).limit(1);
            if (existingRestriction.length > 0) {
                await db.update(userBookingRestrictions2).set({
                    isBlocked: is_blocked,
                    reason,
                    updatedAt: /* @__PURE__ */ new Date()
                }).where((0, drizzle_orm_25.eq)(userBookingRestrictions2.id, existingRestriction[0].id));
            }
            else {
                await db.insert(userBookingRestrictions2).values({
                    userId,
                    commonSpaceId: common_space_id,
                    isBlocked: is_blocked,
                    reason
                });
            }
            res.json({
                message: `User ${is_blocked ? "blocked from" : "unblocked from"} booking this space`
            });
        }
        catch (error) {
            console.error("\u274C Error managing user restriction:", error);
            res.status(500).json({
                message: "Failed to manage user restriction",
                error: error instanceof Error ? error.message : "Unknown error"
            });
        }
    });
    app2.post("/api/common-spaces", requireAuth, requireRole(["admin", "manager"]), async (req, res) => {
        try {
            const user = req.user;
            if (!user) {
                return res.status(401).json({
                    message: "Authentication required",
                    code: "AUTH_REQUIRED"
                });
            }
            const validationResult = createCommonSpaceSchema.safeParse(req.body);
            if (!validationResult.success) {
                return res.status(400).json({
                    message: "Invalid request data",
                    errors: validationResult.error.issues.map((issue) => ({
                        field: issue.path.join("."),
                        message: issue.message
                    }))
                });
            }
            const { name, description, building_id, is_reservable, capacity, opening_hours } = validationResult.data;
            const accessibleBuildingIds = await getAccessibleBuildingIds(user);
            if (!accessibleBuildingIds.includes(building_id)) {
                return res.status(403).json({
                    message: "Access denied. You can only create spaces in buildings you manage.",
                    code: "INSUFFICIENT_PERMISSIONS"
                });
            }
            const building = await db.select({ id: buildings4.id, name: buildings4.name }).from(buildings4).where((0, drizzle_orm_25.and)((0, drizzle_orm_25.eq)(buildings4.id, building_id), (0, drizzle_orm_25.eq)(buildings4.isActive, true))).limit(1);
            if (building.length === 0) {
                return res.status(404).json({
                    message: "Building not found or inactive",
                    code: "BUILDING_NOT_FOUND"
                });
            }
            const existingSpace = await db.select({ id: commonSpaces2.id }).from(commonSpaces2).where((0, drizzle_orm_25.and)((0, drizzle_orm_25.eq)(commonSpaces2.name, name), (0, drizzle_orm_25.eq)(commonSpaces2.buildingId, building_id))).limit(1);
            if (existingSpace.length > 0) {
                return res.status(409).json({
                    message: "A common space with this name already exists in this building",
                    code: "DUPLICATE_NAME"
                });
            }
            const newSpace = await db.insert(commonSpaces2).values({
                name,
                description: description || null,
                buildingId: building_id,
                isReservable: is_reservable,
                capacity: capacity || null,
                openingHours: opening_hours ? `${opening_hours.start}-${opening_hours.end}` : null
            }).returning();
            console.log(`\u2705 Created new common space: ${name} in building ${building[0].name}`);
            res.status(201).json({
                message: "Common space created successfully",
                space: {
                    id: newSpace[0].id,
                    name: newSpace[0].name,
                    description: newSpace[0].description,
                    buildingId: newSpace[0].buildingId,
                    buildingName: building[0].name,
                    isReservable: newSpace[0].isReservable,
                    capacity: newSpace[0].capacity,
                    openingHours: newSpace[0].openingHours,
                    createdAt: newSpace[0].createdAt
                }
            });
        }
        catch (error) {
            console.error("\u274C Error creating common space:", error);
            res.status(500).json({
                message: "Failed to create common space",
                error: error instanceof Error ? error.message : "Unknown error"
            });
        }
    });
    app2.post("/api/common-spaces/users/:userId/time-limits", requireAuth, requireRole(["admin", "manager"]), async (req, res) => {
        try {
            const user = req.user;
            if (!user) {
                return res.status(401).json({
                    message: "Authentication required",
                    code: "AUTH_REQUIRED"
                });
            }
            const paramValidation = userIdSchema.safeParse(req.params);
            if (!paramValidation.success) {
                return res.status(400).json({
                    message: "Invalid user ID",
                    errors: paramValidation.error.issues.map((issue) => ({
                        field: issue.path.join("."),
                        message: issue.message
                    }))
                });
            }
            const validationResult = setTimeLimitSchema.safeParse(req.body);
            if (!validationResult.success) {
                return res.status(400).json({
                    message: "Invalid time limit data",
                    errors: validationResult.error.issues.map((issue) => ({
                        field: issue.path.join("."),
                        message: issue.message
                    }))
                });
            }
            const { userId } = paramValidation.data;
            const { user_id, common_space_id, limit_type, limit_hours } = validationResult.data;
            const targetUser = await db.select({ id: users4.id, firstName: users4.firstName, lastName: users4.lastName }).from(users4).where((0, drizzle_orm_25.eq)(users4.id, userId)).limit(1);
            if (targetUser.length === 0) {
                return res.status(404).json({
                    message: "User not found",
                    code: "USER_NOT_FOUND"
                });
            }
            if (common_space_id) {
                const space = await db.select({
                    id: commonSpaces2.id,
                    name: commonSpaces2.name,
                    buildingId: commonSpaces2.buildingId
                }).from(commonSpaces2).where((0, drizzle_orm_25.eq)(commonSpaces2.id, common_space_id)).limit(1);
                if (space.length === 0) {
                    return res.status(404).json({
                        message: "Common space not found",
                        code: "SPACE_NOT_FOUND"
                    });
                }
                const accessibleBuildingIds = await getAccessibleBuildingIds(user);
                if (!accessibleBuildingIds.includes(space[0].buildingId)) {
                    return res.status(403).json({
                        message: "Access denied to this common space",
                        code: "INSUFFICIENT_PERMISSIONS"
                    });
                }
            }
            const existingLimit = await db.select({ id: userTimeLimits2.id }).from(userTimeLimits2).where((0, drizzle_orm_25.and)((0, drizzle_orm_25.eq)(userTimeLimits2.userId, userId), common_space_id ? (0, drizzle_orm_25.eq)(userTimeLimits2.commonSpaceId, common_space_id) : (0, drizzle_orm_25.sql) `${userTimeLimits2.commonSpaceId} IS NULL`, (0, drizzle_orm_25.eq)(userTimeLimits2.limitType, limit_type))).limit(1);
            if (existingLimit.length > 0) {
                await db.update(userTimeLimits2).set({
                    limitHours: limit_hours,
                    updatedAt: /* @__PURE__ */ new Date()
                }).where((0, drizzle_orm_25.eq)(userTimeLimits2.id, existingLimit[0].id));
            }
            else {
                await db.insert(userTimeLimits2).values({
                    userId,
                    commonSpaceId: common_space_id || null,
                    limitType: limit_type,
                    limitHours: limit_hours
                });
            }
            console.log(`\u2705 Set time limit for user ${targetUser[0].firstName} ${targetUser[0].lastName}: ${limit_hours}h per ${limit_type}`);
            res.json({
                message: "Time limit set successfully",
                user: {
                    id: targetUser[0].id,
                    name: `${targetUser[0].firstName} ${targetUser[0].lastName}`,
                    limitType: limit_type,
                    limitHours: limit_hours,
                    spaceId: common_space_id
                }
            });
        }
        catch (error) {
            console.error("\u274C Error setting time limit:", error);
            res.status(500).json({
                message: "Failed to set time limit",
                error: error instanceof Error ? error.message : "Unknown error"
            });
        }
    });
    app2.get("/api/common-spaces/users/:userId/time-limits", requireAuth, requireRole(["admin", "manager"]), async (req, res) => {
        try {
            const user = req.user;
            if (!user) {
                return res.status(401).json({
                    message: "Authentication required",
                    code: "AUTH_REQUIRED"
                });
            }
            const { userId } = req.params;
            const limits = await db.select({
                id: userTimeLimits2.id,
                userId: userTimeLimits2.userId,
                commonSpaceId: userTimeLimits2.commonSpaceId,
                spaceName: commonSpaces2.name,
                limitType: userTimeLimits2.limitType,
                limitHours: userTimeLimits2.limitHours,
                createdAt: userTimeLimits2.createdAt,
                updatedAt: userTimeLimits2.updatedAt
            }).from(userTimeLimits2).leftJoin(commonSpaces2, (0, drizzle_orm_25.eq)(userTimeLimits2.commonSpaceId, commonSpaces2.id)).where((0, drizzle_orm_25.eq)(userTimeLimits2.userId, userId)).orderBy(userTimeLimits2.limitType, userTimeLimits2.commonSpaceId);
            const limitsWithUsage = await Promise.all(limits.map(async (limit) => {
                const currentHours = await getUserBookingHours(userId, limit.commonSpaceId, limit.limitType);
                return {
                    ...limit,
                    currentHours: Math.round(currentHours * 100) / 100,
                    remainingHours: Math.max(0, limit.limitHours - currentHours)
                };
            }));
            res.json({
                limits: limitsWithUsage
            });
        }
        catch (error) {
            console.error("\u274C Error fetching time limits:", error);
            res.status(500).json({
                message: "Failed to fetch time limits",
                error: error instanceof Error ? error.message : "Unknown error"
            });
        }
    });
    app2.get("/api/common-spaces/user-calendar", requireAuth, async (req, res) => {
        try {
            const user = req.user || req.session?.user;
            if (!user) {
                return res.status(401).json({
                    message: "Authentication required",
                    code: "AUTH_REQUIRED"
                });
            }
            const queryValidation = calendarQuerySchema.safeParse(req.query);
            if (!queryValidation.success) {
                return res.status(400).json({
                    message: "Invalid calendar query parameters",
                    errors: queryValidation.error.issues.map((issue) => ({
                        field: issue.path.join("."),
                        message: issue.message
                    }))
                });
            }
            const { start_date, end_date, view } = queryValidation.data;
            const userBookings = await db.select({
                id: bookings2.id,
                startTime: bookings2.startTime,
                endTime: bookings2.endTime,
                status: bookings2.status,
                spaceName: commonSpaces2.name,
                spaceId: commonSpaces2.id,
                buildingName: buildings4.name,
                buildingId: buildings4.id
            }).from(bookings2).innerJoin(commonSpaces2, (0, drizzle_orm_25.eq)(bookings2.commonSpaceId, commonSpaces2.id)).innerJoin(buildings4, (0, drizzle_orm_25.eq)(commonSpaces2.buildingId, buildings4.id)).where((0, drizzle_orm_25.and)((0, drizzle_orm_25.eq)(bookings2.userId, user.id), (0, drizzle_orm_25.eq)(bookings2.status, "confirmed"), (0, drizzle_orm_25.gte)(bookings2.startTime, new Date(start_date)), (0, drizzle_orm_25.lte)(bookings2.endTime, new Date(end_date)))).orderBy(bookings2.startTime);
            res.json({
                user: {
                    id: user.id,
                    name: `${user.firstName} ${user.lastName}`,
                    role: user.role
                },
                calendar: {
                    view,
                    startDate: start_date,
                    endDate: end_date,
                    bookings: userBookings
                },
                summary: {
                    totalBookings: userBookings.length,
                    totalHours: userBookings.reduce((total, booking) => {
                        const duration = (new Date(booking.endTime).getTime() - new Date(booking.startTime).getTime()) / (1e3 * 60 * 60);
                        return total + duration;
                    }, 0)
                }
            });
        }
        catch (error) {
            console.error("\u274C Error fetching user calendar:", error);
            res.status(500).json({
                message: "Failed to fetch user calendar",
                error: error instanceof Error ? error.message : "Unknown error"
            });
        }
    });
    app2.get("/api/common-spaces/calendar/building/:buildingId", requireAuth, requireRole(["admin", "manager"]), async (req, res) => {
        try {
            const user = req.user || req.session?.user;
            if (!user) {
                return res.status(401).json({
                    message: "Authentication required",
                    code: "AUTH_REQUIRED"
                });
            }
            const paramValidation = zod_15.z.object({ buildingId: zod_15.z.string().uuid() }).safeParse(req.params);
            if (!paramValidation.success) {
                return res.status(400).json({
                    message: "Invalid building ID",
                    errors: paramValidation.error.issues.map((issue) => ({
                        field: issue.path.join("."),
                        message: issue.message
                    }))
                });
            }
            const queryValidation = calendarQuerySchema.safeParse(req.query);
            if (!queryValidation.success) {
                return res.status(400).json({
                    message: "Invalid calendar query parameters",
                    errors: queryValidation.error.issues.map((issue) => ({
                        field: issue.path.join("."),
                        message: issue.message
                    }))
                });
            }
            const { buildingId } = paramValidation.data;
            const { start_date, end_date, view } = queryValidation.data;
            const accessibleBuildingIds = await getAccessibleBuildingIds(user);
            if (!accessibleBuildingIds.includes(buildingId)) {
                return res.status(403).json({
                    message: "Access denied to this building",
                    code: "INSUFFICIENT_PERMISSIONS"
                });
            }
            const building = await db.select({
                id: buildings4.id,
                name: buildings4.name,
                address: buildings4.address
            }).from(buildings4).where((0, drizzle_orm_25.eq)(buildings4.id, buildingId)).limit(1);
            if (building.length === 0) {
                return res.status(404).json({
                    message: "Building not found",
                    code: "NOT_FOUND"
                });
            }
            const buildingBookings = await db.select({
                id: bookings2.id,
                startTime: bookings2.startTime,
                endTime: bookings2.endTime,
                status: bookings2.status,
                spaceName: commonSpaces2.name,
                spaceId: commonSpaces2.id,
                userId: bookings2.userId,
                userName: (0, drizzle_orm_25.sql) `CONCAT(${users4.firstName}, ' ', ${users4.lastName})`,
                userEmail: users4.email,
                userRole: users4.role
            }).from(bookings2).innerJoin(commonSpaces2, (0, drizzle_orm_25.eq)(bookings2.commonSpaceId, commonSpaces2.id)).innerJoin(users4, (0, drizzle_orm_25.eq)(bookings2.userId, users4.id)).where((0, drizzle_orm_25.and)((0, drizzle_orm_25.eq)(commonSpaces2.buildingId, buildingId), (0, drizzle_orm_25.eq)(bookings2.status, "confirmed"), (0, drizzle_orm_25.gte)(bookings2.startTime, new Date(start_date)), (0, drizzle_orm_25.lte)(bookings2.endTime, new Date(end_date)))).orderBy(bookings2.startTime);
            const buildingSpaces = await db.select({
                id: commonSpaces2.id,
                name: commonSpaces2.name,
                isReservable: commonSpaces2.isReservable,
                capacity: commonSpaces2.capacity
            }).from(commonSpaces2).where((0, drizzle_orm_25.eq)(commonSpaces2.buildingId, buildingId)).orderBy(commonSpaces2.name);
            const spaceUsage = buildingSpaces.map((space) => {
                const spaceBookings = buildingBookings.filter((booking) => booking.spaceId === space.id);
                const totalHours = spaceBookings.reduce((total, booking) => {
                    const duration = (new Date(booking.endTime).getTime() - new Date(booking.startTime).getTime()) / (1e3 * 60 * 60);
                    return total + duration;
                }, 0);
                return {
                    ...space,
                    bookingCount: spaceBookings.length,
                    totalHours: Math.round(totalHours * 10) / 10,
                    uniqueUsers: [...new Set(spaceBookings.map((b) => b.userId))].length
                };
            });
            res.json({
                building: building[0],
                calendar: {
                    view,
                    startDate: start_date,
                    endDate: end_date,
                    events: buildingBookings
                },
                spaces: spaceUsage,
                summary: {
                    totalBookings: buildingBookings.length,
                    totalSpaces: buildingSpaces.length,
                    activeSpaces: buildingSpaces.filter((s) => s.isReservable).length,
                    uniqueUsers: [...new Set(buildingBookings.map((b) => b.userId))].length
                }
            });
        }
        catch (error) {
            console.error("\u274C Error fetching building calendar:", error);
            res.status(500).json({
                message: "Failed to fetch building calendar",
                error: error instanceof Error ? error.message : "Unknown error"
            });
        }
    });
}
// server/api/permissions.ts
init_storage();
function registerPermissionsRoutes(app2) {
    app2.get("/api/permissions", requireAuth, authorize("read:users"), async (req, res) => {
        try {
            const permissions2 = await storage.getPermissions();
            res.json(permissions2);
        }
        catch (error) {
            console.error("\u274C Error fetching permissions:", error);
            res.status(500).json({ message: "Failed to fetch permissions" });
        }
    });
    app2.get("/api/role-permissions", requireAuth, authorize("read:users"), async (req, res) => {
        try {
            const rolePermissions2 = await storage.getRolePermissions();
            res.json(rolePermissions2);
        }
        catch (error) {
            console.error("\u274C Error fetching role permissions:", error);
            res.status(500).json({ message: "Failed to fetch role permissions" });
        }
    });
    app2.get("/api/permissions-matrix", requireAuth, authorize("read:users"), async (req, res) => {
        try {
            const permissions2 = await storage.getPermissions();
            const rolePermissions2 = await storage.getRolePermissions();
            const permissionsByResource = permissions2.reduce((acc, permission) => {
                if (!acc[permission.resourceType]) {
                    acc[permission.resourceType] = [];
                }
                acc[permission.resourceType].push(permission);
                return acc;
            }, {});
            const roleMatrix = ["admin", "manager", "resident", "tenant"].reduce((acc, role) => {
                acc[role] = rolePermissions2.filter((rp) => rp.role === role).map((rp) => rp.permissionId);
                return acc;
            }, {});
            res.json({
                permissionsByResource,
                roleMatrix,
                permissions: permissions2,
                rolePermissions: rolePermissions2
            });
        }
        catch (error) {
            console.error("\u274C Error fetching permissions matrix:", error);
            res.status(500).json({ message: "Failed to fetch permissions matrix" });
        }
    });
    app2.get("/api/user-permissions", requireAuth, authorize("read:users"), async (req, res) => {
        try {
            const userPermissions2 = await storage.getUserPermissions();
            res.json(userPermissions2);
        }
        catch (error) {
            console.error("\u274C Error fetching user permissions:", error);
            res.status(500).json({ message: "Failed to fetch user permissions" });
        }
    });
    app2.post("/api/user-permissions", requireAuth, authorize("manage_permissions:users"), async (req, res) => {
        try {
            const { userId, permissionId, reason } = req.body;
            if (!userId || !permissionId) {
                return res.status(400).json({
                    message: "userId and permissionId are required"
                });
            }
            const permission = await storage.getPermissions().then((perms) => perms.find((p) => p.id === permissionId || p.name === permissionId));
            if (!permission) {
                return res.status(400).json({
                    message: "Invalid permission"
                });
            }
            res.status(501).json({
                message: "User permission overrides not yet implemented",
                note: "This feature requires additional database schema for user_permission_overrides table"
            });
        }
        catch (error) {
            console.error("\u274C Error granting user permission:", error);
            res.status(500).json({ message: "Failed to grant user permission" });
        }
    });
    app2.delete("/api/user-permissions/:userId/:permissionId", requireAuth, authorize("manage:user_roles"), async (req, res) => {
        try {
            const { userId, permissionId } = req.params;
            res.status(501).json({
                message: "User permission overrides not yet implemented",
                note: "This feature requires additional database schema for user_permission_overrides table"
            });
        }
        catch (error) {
            console.error("\u274C Error revoking user permission:", error);
            res.status(500).json({ message: "Failed to revoke user permission" });
        }
    });
    app2.patch("/api/role-permissions/:role", requireAuth, authorize("manage:user_roles"), async (req, res) => {
        try {
            const { role } = req.params;
            const { permissions: permissions2 } = req.body;
            if (!["admin", "manager", "tenant", "resident"].includes(role)) {
                return res.status(400).json({ message: "Invalid role" });
            }
            if (!Array.isArray(permissions2)) {
                return res.status(400).json({ message: "Permissions must be an array" });
            }
            res.status(501).json({
                message: "Role permission updates not yet implemented",
                note: "This feature requires implementing a mechanism to update permissions.json or move permissions to database"
            });
        }
        catch (error) {
            console.error("\u274C Error updating role permissions:", error);
            res.status(500).json({ message: "Failed to update role permissions" });
        }
    });
    app2.get("/api/permission-categories", requireAuth, authorize("read:users"), async (req, res) => {
        try {
            const permissions2 = await storage.getPermissions();
            const categoryMap = {};
            permissions2.forEach((permission) => {
                const categoryName = {
                    users: "User Management",
                    organizations: "Organization Management",
                    buildings: "Building Management",
                    residences: "Residence Management",
                    bills: "Financial Management",
                    budgets: "Financial Management",
                    maintenance_requests: "Maintenance Management",
                    documents: "Document Management",
                    notifications: "Communication",
                    features: "System Features",
                    reports: "Reports & Analytics"
                }[permission.resourceType] || "Other";
                if (!categoryMap[categoryName]) {
                    categoryMap[categoryName] = [];
                }
                categoryMap[categoryName].push(permission);
            });
            const categories = Object.entries(categoryMap).map(([name, perms]) => ({
                id: name.toLowerCase().replace(/\s+/g, "-"),
                name,
                permissions: perms,
                count: perms.length
            }));
            res.json(categories);
        }
        catch (error) {
            console.error("\u274C Error fetching permission categories:", error);
            res.status(500).json({ message: "Failed to fetch permission categories" });
        }
    });
    app2.post("/api/permissions/validate", requireAuth, async (req, res) => {
        try {
            const { permission } = req.body;
            if (!permission) {
                return res.status(400).json({ message: "Permission is required" });
            }
            const rolePermissions2 = await storage.getRolePermissions();
            const hasPermission = rolePermissions2.some((rp) => rp.role === req.user.role && rp.permission && rp.permission.name === permission);
            res.json({
                hasPermission,
                role: req.user.role,
                permission,
                message: hasPermission ? "Permission granted" : "Permission denied"
            });
        }
        catch (error) {
            console.error("\u274C Error validating permission:", error);
            res.status(500).json({ message: "Failed to validate permission" });
        }
    });
}
// server/services/demo-management-service.ts
var DemoManagementService = (_b = class {
        /**
         * Check if demo organizations are healthy and properly configured.
         */
        static async checkDemoHealth() {
            return {
                healthy: true,
                status: { message: "Demo sync functionality removed" },
                message: "Demo organizations managed locally only",
                timestamp: ( /* @__PURE__ */new Date()).toISOString()
            };
        }
        /**
         * Ensure demo organizations exist and are properly configured.
         * This is a safe operation that can be called during application startup.
         * DISABLED: Demo organization creation has been disabled per user request.
         */
        static async ensureDemoOrganizations() {
            console.log("\u2705 Demo organizations functionality disabled (skipped)");
            return {
                success: true,
                message: "Demo organizations functionality disabled - skipping all database operations"
            };
        }
        /**
         * Force recreation of demo organizations.
         * DISABLED: Demo organization functionality has been disabled per user request.
         */
        static async recreateDemoOrganizations() {
            console.log("\u2705 Demo organizations recreation skipped (disabled)");
            return {
                success: true,
                message: "Demo organizations functionality disabled - recreation skipped"
            };
        }
        /**
         * Get demo organization information.
         * DISABLED: Demo organization functionality has been disabled per user request.
         */
        static async getDemoOrganizationInfo() {
            console.log("\u2705 Demo organizations info retrieval skipped (disabled)");
            return {
                stats: {
                    demoBuildings: 0,
                    demoUsers: 0,
                    openDemoBuildings: 0,
                    openDemoUsers: 0
                }
            };
        }
        /**
         * Initialize demo organizations during application startup.
         * DISABLED: Demo organization functionality has been disabled per user request.
         */
        static async initializeDemoOrganizations() {
            console.log("\u2705 Demo organizations initialization skipped (disabled)");
            return;
        }
        /**
         * PRODUCTION FIX: Create basic demo organizations if they don't exist.
         * This ensures the database has the required organizations for production.
         */
        static async createBasicOrganizationsIfMissing() {
            try {
                const { Pool: Pool3 } = await Promise.resolve().then(() => __importStar(require("@neondatabase/serverless")));
                const { drizzle: drizzle2 } = await Promise.resolve().then(() => __importStar(require("drizzle-orm/neon-serverless")));
                const { eq: eq15 } = await Promise.resolve().then(() => __importStar(require("drizzle-orm")));
                const schema2 = await Promise.resolve().then(() => (init_schema(), schema_exports));
                const { db: db2 } = await Promise.resolve().then(() => (init_db(), db_exports));
                const existingDemo = await db2.select().from(schema2.organizations).where(eq15(schema2.organizations.name, "Demo")).limit(1);
                if (existingDemo.length === 0) {
                    console.log("\u{1F4DD} Creating Demo organization...");
                    await db2.insert(schema2.organizations).values({
                        name: "Demo",
                        type: "demo",
                        address: "123 Demo Street",
                        city: "Montreal",
                        province: "QC",
                        postalCode: "H1A 1A1",
                        isActive: true
                    });
                }
                const existingOpenDemo = await db2.select().from(schema2.organizations).where(eq15(schema2.organizations.name, "Open Demo")).limit(1);
                if (existingOpenDemo.length === 0) {
                    console.log("\u{1F4DD} Creating Open Demo organization...");
                    await db2.insert(schema2.organizations).values({
                        name: "Open Demo",
                        type: "demo",
                        address: "456 Demo Avenue",
                        city: "Montreal",
                        province: "QC",
                        postalCode: "H1B 1B1",
                        isActive: true
                    });
                }
                console.log("\u2705 Demo organizations are properly configured");
            }
            catch (error) {
                console.log("\u26A0\uFE0F Demo organizations setup failed, but continuing...");
            }
        }
        /**
         * Scheduled maintenance for demo organizations.
         * This can be called periodically to ensure demo data stays fresh.
         */
        static async scheduledMaintenance() {
            const actions = [];
            try {
                console.log("\u{1F527} Running scheduled demo maintenance...");
                const health = await this.checkDemoHealth();
                actions.push(`Health check: ${health.healthy ? "HEALTHY" : "UNHEALTHY"}`);
                if (!health.healthy) {
                    actions.push("Demo sync functionality removed - local management only");
                    const newHealth = await this.checkDemoHealth();
                    actions.push(`Post-sync health: ${newHealth.healthy ? "HEALTHY" : "STILL_UNHEALTHY"}`);
                }
                console.log("\u2705 Scheduled demo maintenance completed");
                return {
                    success: true,
                    message: "Scheduled maintenance completed successfully",
                    actions
                };
            }
            catch (error) {
                return {
                    success: false,
                    message: `Scheduled maintenance failed: ${error instanceof Error ? error.message : "Unknown error"}`,
                    actions
                };
            }
        }
    },
    __setFunctionName(_b, "DemoManagementService"),
    (() => {
        _b.DEMO_ORG_NAME = "Demo";
    })(),
    (() => {
        _b.OPEN_DEMO_ORG_NAME = "Open Demo";
    })(),
    _b);
var demo_management_service_default = DemoManagementService;
// server/api/demo-management.ts
function registerDemoManagementRoutes(app2) {
    app2.get("/api/demo/health", async (req, res) => {
        try {
            const health = await demo_management_service_default.checkDemoHealth();
            res.status(health.healthy ? 200 : 503).json({
                success: true,
                data: health
            });
        }
        catch (error) {
            res.status(500).json({
                success: false,
                message: "Demo health check failed",
                error: error instanceof Error ? error.message : "Unknown error"
            });
        }
    });
    app2.get("/api/demo/users", async (req, res) => {
        try {
            const { db: db2 } = await Promise.resolve().then(() => (init_db(), db_exports));
            const { eq: eq15, and: and15, inArray: inArray10 } = await Promise.resolve().then(() => __importStar(require("drizzle-orm")));
            const schema2 = await Promise.resolve().then(() => (init_schema(), schema_exports));
            const demoOrgs = await db2.query.organizations.findMany({
                where: eq15(schema2.organizations.type, "demo")
            });
            if (demoOrgs.length === 0) {
                return res.status(404).json({
                    success: false,
                    message: "No demo organizations found"
                });
            }
            const demoUsers = await db2.query.users.findMany({
                where: and15(eq15(schema2.users.isActive, true), inArray10(schema2.users.role, ["demo_manager", "demo_tenant", "demo_resident"])),
                columns: {
                    id: true,
                    email: true,
                    firstName: true,
                    lastName: true,
                    role: true
                }
            });
            const usersByRole = {
                demo_manager: demoUsers.filter((user) => user.role === "demo_manager"),
                demo_tenant: demoUsers.filter((user) => user.role === "demo_tenant"),
                demo_resident: demoUsers.filter((user) => user.role === "demo_resident")
            };
            res.json({
                success: true,
                data: usersByRole
            });
        }
        catch (error) {
            console.error("\u274C Error fetching demo users:", error);
            res.status(500).json({
                success: false,
                message: "Failed to fetch demo users",
                error: error instanceof Error ? error.message : "Unknown error"
            });
        }
    });
    app2.get("/api/demo/status", requireAuth, async (req, res) => {
        try {
            const info = await demo_management_service_default.getDemoOrganizationInfo();
            res.json({
                success: true,
                data: info
            });
        }
        catch (error) {
            res.status(500).json({
                success: false,
                message: "Failed to get demo status",
                error: error instanceof Error ? error.message : "Unknown error"
            });
        }
    });
    app2.post("/api/demo/ensure", requireAuth, requireRole(["admin"]), async (req, res) => {
        try {
            const result = await demo_management_service_default.ensureDemoOrganizations();
            res.status(result.success ? 200 : 500).json({
                success: result.success,
                message: result.message,
                data: {
                    demoOrgId: result.demoOrgId,
                    openDemoOrgId: result.openDemoOrgId
                }
            });
        }
        catch (error) {
            res.status(500).json({
                success: false,
                message: "Failed to ensure demo organizations",
                error: error instanceof Error ? error.message : "Unknown error"
            });
        }
    });
    app2.post("/api/demo/recreate", requireAuth, requireRole(["admin"]), async (req, res) => {
        try {
            const result = await demo_management_service_default.recreateDemoOrganizations();
            res.status(result.success ? 200 : 500).json({
                success: result.success,
                message: result.message,
                data: {
                    demoOrgId: result.demoOrgId,
                    openDemoOrgId: result.openDemoOrgId
                }
            });
        }
        catch (error) {
            res.status(500).json({
                success: false,
                message: "Failed to recreate demo organizations",
                error: error instanceof Error ? error.message : "Unknown error"
            });
        }
    });
    app2.post("/api/demo/maintenance", requireAuth, requireRole(["admin"]), async (req, res) => {
        try {
            const result = await demo_management_service_default.scheduledMaintenance();
            res.status(result.success ? 200 : 500).json({
                success: result.success,
                message: result.message,
                data: {
                    actions: result.actions
                }
            });
        }
        catch (error) {
            res.status(500).json({
                success: false,
                message: "Failed to run demo maintenance",
                error: error instanceof Error ? error.message : "Unknown error"
            });
        }
    });
    console.log("\u2705 Demo management API routes registered");
}
// server/api/trial-request.ts
const express_4 = __importDefault(require("express"));
const zod_16 = require("zod");
const mail_2 = require("@sendgrid/mail");
var router = express_4.default.Router();
if (!process.env.SENDGRID_API_KEY) {
    console.warn("\u26A0\uFE0F SENDGRID_API_KEY environment variable is not set");
}
var mailService = new mail_2.MailService();
if (process.env.SENDGRID_API_KEY) {
    mailService.setApiKey(process.env.SENDGRID_API_KEY);
}
var trialRequestSchema = zod_16.z.object({
    firstName: zod_16.z.string().min(1, "First name is required"),
    lastName: zod_16.z.string().min(1, "Last name is required"),
    email: zod_16.z.string().email("Invalid email format"),
    phone: zod_16.z.string().min(1, "Phone number is required"),
    company: zod_16.z.string().min(1, "Company name is required"),
    address: zod_16.z.string().optional(),
    city: zod_16.z.string().optional(),
    province: zod_16.z.string().optional(),
    postalCode: zod_16.z.string().optional(),
    numberOfBuildings: zod_16.z.string().refine((val) => parseInt(val) > 0, "Must be a positive number"),
    numberOfResidences: zod_16.z.string().refine((val) => parseInt(val) > 0, "Must be a positive number"),
    message: zod_16.z.string().optional()
});
router.post("/trial-request", async (req, res) => {
    try {
        const validationResult = trialRequestSchema.safeParse(req.body);
        if (!validationResult.success) {
            return res.status(400).json({
                message: "Invalid request data",
                errors: validationResult.error.issues
            });
        }
        const data = validationResult.data;
        if (!process.env.SENDGRID_API_KEY) {
            return res.status(500).json({
                message: "Email service not configured"
            });
        }
        const emailSubject = `Nouvelle demande d'essai gratuit - ${data.company}`;
        const emailText = `
Nouvelle demande d'essai gratuit pour Koveo Gestion

INFORMATIONS DU CONTACT:
- Nom: ${data.firstName} ${data.lastName}
- Entreprise: ${data.company}
- Courriel: ${data.email}
- T\xE9l\xE9phone: ${data.phone}

ADRESSE:
${data.address ? `- Adresse: ${data.address}` : ""}
${data.city ? `- Ville: ${data.city}` : ""}
${data.province ? `- Province: ${data.province}` : ""}
${data.postalCode ? `- Code postal: ${data.postalCode}` : ""}

INFORMATIONS SUR LES PROPRI\xC9T\xC9S:
- Nombre de b\xE2timents: ${data.numberOfBuildings}
- Nombre de r\xE9sidences: ${data.numberOfResidences}

${data.message ? `MESSAGE ADDITIONNEL:
${data.message}` : ""}

---
Cette demande a \xE9t\xE9 soumise via le site web Koveo Gestion.
    `.trim();
        const emailHtml = `
<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Nouvelle demande d'essai gratuit</title>
  <style>
    body { font-family: Arial, sans-serif; line-height: 1.6; color: #333; }
    .container { max-width: 600px; margin: 0 auto; padding: 20px; }
    .header { background-color: #2563eb; color: white; padding: 20px; text-align: center; }
    .content { padding: 20px; background-color: #f9fafb; }
    .section { margin-bottom: 20px; }
    .section h3 { color: #2563eb; margin-bottom: 10px; }
    .info-grid { display: grid; grid-template-columns: 1fr 2fr; gap: 10px; margin-bottom: 10px; }
    .label { font-weight: bold; }
    .highlight { background-color: #dbeafe; padding: 15px; border-radius: 5px; }
    .footer { text-align: center; color: #666; font-size: 12px; margin-top: 30px; }
  </style>
</head>
<body>
  <div class="container">
    <div class="header">
      <h1>Nouvelle demande d'essai gratuit</h1>
      <p>Koveo Gestion</p>
    </div>
    
    <div class="content">
      <div class="section">
        <h3>Informations du contact</h3>
        <div class="info-grid">
          <span class="label">Nom:</span>
          <span>${data.firstName} ${data.lastName}</span>
          <span class="label">Entreprise:</span>
          <span>${data.company}</span>
          <span class="label">Courriel:</span>
          <span><a href="mailto:${data.email}">${data.email}</a></span>
          <span class="label">T\xE9l\xE9phone:</span>
          <span><a href="tel:${data.phone}">${data.phone}</a></span>
        </div>
      </div>

      ${data.address || data.city || data.province || data.postalCode ? `
      <div class="section">
        <h3>Adresse</h3>
        <div class="info-grid">
          ${data.address ? `<span class="label">Adresse:</span><span>${data.address}</span>` : ""}
          ${data.city ? `<span class="label">Ville:</span><span>${data.city}</span>` : ""}
          ${data.province ? `<span class="label">Province:</span><span>${data.province}</span>` : ""}
          ${data.postalCode ? `<span class="label">Code postal:</span><span>${data.postalCode}</span>` : ""}
        </div>
      </div>
      ` : ""}

      <div class="section highlight">
        <h3>Informations sur les propri\xE9t\xE9s</h3>
        <div class="info-grid">
          <span class="label">Nombre de b\xE2timents:</span>
          <span><strong>${data.numberOfBuildings}</strong></span>
          <span class="label">Nombre de r\xE9sidences:</span>
          <span><strong>${data.numberOfResidences}</strong></span>
        </div>
      </div>

      ${data.message ? `
      <div class="section">
        <h3>Message additionnel</h3>
        <p>${data.message.replace(/\n/g, "<br>")}</p>
      </div>
      ` : ""}
      
      <div class="footer">
        <p>Cette demande a \xE9t\xE9 soumise via le site web Koveo Gestion</p>
        <p>Date: ${( /* @__PURE__ */new Date()).toLocaleDateString("fr-CA", {
            year: "numeric",
            month: "long",
            day: "numeric",
            hour: "2-digit",
            minute: "2-digit",
            timeZone: "America/Toronto"
        })}</p>
      </div>
    </div>
  </div>
</body>
</html>
    `.trim();
        const emailData = {
            to: "info@koveo-gestion.com",
            from: {
                email: "noreply@koveo-gestion.com",
                name: "Koveo Gestion - Demandes d'essai"
            },
            replyTo: {
                email: data.email,
                name: `${data.firstName} ${data.lastName}`
            },
            subject: emailSubject,
            text: emailText,
            html: emailHtml,
            trackingSettings: {
                clickTracking: { enable: false },
                openTracking: { enable: false },
                subscriptionTracking: { enable: false }
            },
            mailSettings: {
                sandboxMode: { enable: false }
            }
        };
        await mailService.send(emailData);
        console.log(`\u2705 Trial request sent successfully for ${data.company} (${data.email})`);
        res.status(200).json({
            message: "Trial request sent successfully",
            success: true
        });
    }
    catch (error) {
        console.error("\u274C Error processing trial request:", error);
        if (error.code) {
            const sgError = error;
            console.error("SendGrid error details:", sgError);
            return res.status(500).json({
                message: "Failed to send trial request email",
                error: "Email service error"
            });
        }
        res.status(500).json({
            message: "Internal server error",
            error: "Failed to process request"
        });
    }
});
function registerTrialRequestRoutes(app2) {
    app2.use("/api", router);
}
// server/routes.ts
const multer_4 = __importDefault(require("multer"));
const path_5 = __importDefault(require("path"));
const fs_5 = __importDefault(require("fs"));
var storage2 = multer_4.default.diskStorage({
    destination: (req, file, cb) => {
        const uploadDir = path_5.default.join(process.cwd(), "uploads", "demands");
        if (!fs_5.default.existsSync(uploadDir)) {
            fs_5.default.mkdirSync(uploadDir, { recursive: true });
        }
        cb(null, uploadDir);
    },
    filename: (req, file, cb) => {
        const uniqueSuffix = Date.now() + "-" + Math.round(Math.random() * 1e9);
        const extension = path_5.default.extname(file.originalname);
        cb(null, `demand-${uniqueSuffix}${extension}`);
    }
});
var upload4 = (0, multer_4.default)({
    storage: storage2,
    limits: {
        fileSize: 10 * 1024 * 1024,
        // 10MB limit
        files: 5
        // Maximum 5 files
    },
    fileFilter: (req, file, cb) => {
        const allowedTypes = [
            "image/jpeg",
            "image/jpg",
            "image/png",
            "image/gif",
            "image/webp",
            "application/pdf",
            "application/msword",
            "application/vnd.openxmlformats-officedocument.wordprocessingml.document",
            "text/plain"
        ];
        if (allowedTypes.includes(file.mimetype)) {
            cb(null, true);
        }
        else {
            cb(new Error(`File type ${file.mimetype} not allowed`));
        }
    }
});
async function registerRoutes(app2) {
    console.log("\u{1F504} Setting up session middleware...");
    app2.use(sessionConfig);
    console.log("\u2705 Session middleware configured");
    console.log("\u{1F504} Loading authentication routes...");
    setupAuthRoutes(app2);
    console.log("\u2705 Authentication routes loaded on /api/auth/");
    console.log("\u{1F504} Loading API routes...");
    registerOrganizationRoutes(app2);
    registerUserRoutes(app2);
    registerBuildingRoutes(app2);
    registerDocumentRoutes(app2);
    registerBugRoutes(app2);
    registerBillRoutes(app2);
    registerResidenceRoutes(app2);
    registerDemandRoutes(app2);
    registerFeatureRequestRoutes(app2);
    registerContactRoutes(app2);
    registerCommonSpacesRoutes(app2);
    registerPermissionsRoutes(app2);
    registerDemoManagementRoutes(app2);
    registerTrialRequestRoutes(app2);
    console.log("\u2705 All API routes registered");
    app2.get("/api/health", (req, res) => {
        res.json({ status: "ok", timestamp: ( /* @__PURE__ */new Date()).toISOString() });
    });
    app2.post("/api/test", (req, res) => {
        res.json({ message: "API working", body: req.body });
    });
    app2.post("/api/upload", requireAuth, upload4.array("file", 5), async (req, res) => {
        try {
            const files = req.files;
            if (!files || files.length === 0) {
                return res.status(400).json({ message: "No files uploaded" });
            }
            const fileUrls = files.map((file) => {
                return `/uploads/demands/${file.filename}`;
            });
            console.log(`\u2705 Successfully uploaded ${files.length} files for user ${req.user.id}:`, fileUrls);
            res.json({
                message: "Files uploaded successfully",
                fileUrls,
                fileCount: files.length
            });
        }
        catch (error) {
            console.error("\u274C File upload error:", error);
            res.status(500).json({
                message: "Failed to upload files",
                error: error.message
            });
        }
    });
    app2.use("/uploads", express_3.default.static(path_5.default.join(process.cwd(), "uploads")));
    app2.get("/api/debug/simple", (req, res) => {
        console.log("\u{1F50D} Simple debug endpoint called");
        res.json({
            status: "working",
            timestamp: ( /* @__PURE__ */new Date()).toISOString(),
            environment: process.env.NODE_ENV || "unknown",
            databaseUrl: process.env.DATABASE_URL ? "present" : "missing"
        });
    });
    app2.get("/api/debug/storage", async (req, res) => {
        const timestamp9 = ( /* @__PURE__ */new Date()).toISOString();
        console.log(`[${timestamp9}] \u{1F50D} Storage debug endpoint called`);
        try {
            console.log(`[${timestamp9}] \u{1F4E6} Testing storage import...`);
            const { storage: storage3 } = await Promise.resolve().then(() => (init_storage(), storage_exports));
            console.log(`[${timestamp9}] \u2705 Storage imported successfully`);
            console.log(`[${timestamp9}] \u{1F9EA} Testing basic storage method...`);
            const testResult = await storage3.getDocuments({ residenceId: "e27ac924-8120-4904-a791-d1e9db544d58" });
            console.log(`[${timestamp9}] \u2705 Storage test successful`);
            res.json({
                success: true,
                timestamp: timestamp9,
                documentsCount: testResult.length,
                storageType: storage3.constructor.name
            });
        }
        catch (error) {
            res.status(500).json({
                success: false,
                timestamp: timestamp9,
                error: error.message,
                stack: error.stack
            });
        }
    });
    app2.get("/api/debug/user-info", async (req, res) => {
        try {
            if (!req.session?.userId && !req.session?.user) {
                return res.status(401).json({
                    message: "No session found",
                    session: req.session
                });
            }
            const user = req.user || req.session?.user;
            const userId = req.session?.userId;
            const { db: db2 } = await Promise.resolve().then(() => (init_db(), db_exports));
            const { users: users5, userOrganizations: userOrganizations5, organizations: organizations3 } = await Promise.resolve().then(() => (init_schema(), schema_exports));
            const { eq: eq15 } = await Promise.resolve().then(() => __importStar(require("drizzle-orm")));
            const userFromDb = await db2.select().from(users5).where(eq15(users5.id, userId));
            const userOrgs = await db2.select({
                organizationId: userOrganizations5.organizationId,
                organizationName: organizations3.name,
                canAccessAllOrganizations: userOrganizations5.canAccessAllOrganizations,
                isActive: userOrganizations5.isActive
            }).from(userOrganizations5).innerJoin(organizations3, eq15(userOrganizations5.organizationId, organizations3.id)).where(eq15(userOrganizations5.userId, userId));
            res.json({
                session: {
                    userId: req.session?.userId,
                    hasUser: !!user,
                    userRole: req.session?.userRole
                },
                userFromMiddleware: user,
                userFromDatabase: userFromDb[0],
                userOrganizations: userOrgs,
                rawSession: req.session
            });
        }
        catch (error) {
            res.status(500).json({
                error: error.message,
                stack: error.stack
            });
        }
    });
    const distPath = path_5.default.resolve(process.cwd(), "dist", "public");
    if (fs_5.default.existsSync(distPath)) {
        console.log("\u2705 Setting up static file serving from", distPath);
        app2.use(express_3.default.static(distPath, {
            // Disable caching for development to ensure fresh files
            setHeaders: (res, path6) => {
                if (process.env.NODE_ENV === "development") {
                    res.setHeader("Cache-Control", "no-cache, no-store, must-revalidate");
                    res.setHeader("Pragma", "no-cache");
                    res.setHeader("Expires", "0");
                }
                else {
                    if (path6.endsWith(".html")) {
                        res.setHeader("Cache-Control", "no-cache, must-revalidate");
                    }
                    else {
                        res.setHeader("Cache-Control", "public, max-age=300, must-revalidate");
                    }
                }
            }
        }));
        app2.get("*", (req, res) => {
            if (req.path.startsWith("/api/")) {
                return res.status(404).json({ message: "API endpoint not found", error: "API endpoint not found" });
            }
            const indexPath = path_5.default.join(distPath, "index.html");
            if (fs_5.default.existsSync(indexPath)) {
                res.setHeader("Cache-Control", "no-cache, no-store, must-revalidate");
                res.setHeader("Pragma", "no-cache");
                res.setHeader("Expires", "0");
                res.sendFile(indexPath);
            }
            else {
                res.status(404).send("Application not found - build missing");
            }
        });
    }
    else {
        console.log("\u26A0\uFE0F Static files not found, only API routes available");
        app2.get("*", (req, res) => {
            if (req.path.startsWith("/api/")) {
                return res.status(404).json({ message: "API endpoint not found", error: "API endpoint not found" });
            }
            res.status(503).send("Application is starting up...");
        });
    }
    console.log("\u2705 All routes registered successfully");
}
// server/index.ts
console.log("\u{1F680} Server starting with enhanced debugging...");
process.on("uncaughtException", (error) => {
    console.error("\u274C Uncaught Exception:", error);
    if (process.env.NODE_ENV !== "development") {
        setTimeout(() => process.exit(1), 1e3);
    }
});
process.on("unhandledRejection", (reason, promise) => {
    console.error("\u274C Unhandled Rejection at:", promise, "reason:", reason);
    if (process.env.NODE_ENV !== "development") {
        setTimeout(() => process.exit(1), 1e3);
    }
});
process.on("SIGTERM", () => {
    console.log("\u{1F504} SIGTERM received, gracefully shutting down...");
    if (server) {
        server.close(() => {
            console.log("\u2705 Server closed gracefully");
            process.exit(0);
        });
    }
});
process.on("SIGINT", () => {
    console.log("\u{1F504} SIGINT received, gracefully shutting down...");
    if (server) {
        server.close(() => {
            console.log("\u2705 Server closed gracefully");
            process.exit(0);
        });
    }
});
var app = (0, express_2.default)();
exports.app = app;
var port = parseInt(process.env.PORT || (process.env.NODE_ENV === "production" ? "80" : "5000"), 10);
var host = "0.0.0.0";
if (isNaN(port) || port < 1 || port > 65535) {
    const fallback = process.env.NODE_ENV === "production" ? "5000" : "5000";
    console.error(`Invalid port configuration. Using default ${fallback}.`);
    if (process.env.NODE_ENV === "production" && process.env.TEST_ENV !== "integration") {
        process.exit(1);
    }
}
app.set("trust proxy", ["loopback", "linklocal", "uniquelocal"]);
app.use((0, helmet_1.default)({
    contentSecurityPolicy: {
        directives: {
            defaultSrc: ["'self'"],
            scriptSrc: ["'self'", "'unsafe-inline'", "https://replit.com"],
            styleSrc: ["'self'", "'unsafe-inline'", "https://fonts.googleapis.com"],
            imgSrc: ["'self'", "data:", "https:"],
            connectSrc: ["'self'"],
            fontSrc: ["'self'", "https://fonts.gstatic.com", "data:"],
            objectSrc: ["'none'"],
            mediaSrc: ["'self'"],
            frameSrc: ["'none'"]
        }
    },
    crossOriginEmbedderPolicy: false
    // Allow for development
}));
if (process.env.NODE_ENV === "production") {
    app.use((req, res, next) => {
        if (req.url.match(/\.(js|css|png|jpg|jpeg|gif|ico|svg|woff|woff2|ttf|eot)$/)) {
            res.set({
                "Cache-Control": "public, max-age=31536000, immutable",
                // 1 year for hashed assets
                "ETag": `"${Date.now()}-${Math.random()}"`
                // Generate unique ETag
            });
        }
        else if (req.url.match(/\.html$/)) {
            res.set({
                "Cache-Control": "no-cache, no-store, must-revalidate",
                "Pragma": "no-cache",
                "Expires": "0"
            });
        }
        else if (req.url.startsWith("/api/")) {
            res.set({
                "Cache-Control": "no-cache, no-store, must-revalidate",
                "Pragma": "no-cache",
                "Expires": "0",
                "ETag": `"api-${Date.now()}-${Math.random()}"`
            });
        }
        next();
    });
}
app.use((req, res, next) => {
    const host2 = req.get("host") || req.get("x-forwarded-host") || req.get("x-original-host");
    const proto = req.get("x-forwarded-proto") || req.protocol;
    req.domain = host2 || "localhost";
    req.isKoveoProduction = host2?.includes("koveo-gestion.com") || false;
    if (req.isKoveoProduction) {
        console.log(`\u{1F310} Koveo production request detected: ${req.domain} (${req.method} ${req.path})`);
    }
    next();
});
app.use(express_2.default.json({ limit: "10mb" }));
app.use(express_2.default.urlencoded({ extended: true, limit: "10mb" }));
app.use((req, res, next) => {
    const timeout = process.env.NODE_ENV === "development" ? 3e4 : 5e3;
    req.setTimeout(timeout, () => {
        if (!res.headersSent) {
            console.warn(`\u26A0\uFE0F Request timeout after ${timeout}ms: ${req.method} ${req.url}`);
            res.status(408).json({ error: "Request Timeout", url: req.url });
        }
    });
    res.on("error", (err) => {
        console.error("\u274C Response error:", err);
    });
    next();
});
app.get("/api/health", (req, res) => {
    res.json({
        status: "healthy",
        timestamp: ( /* @__PURE__ */new Date()).toISOString(),
        uptime: process.uptime(),
        environment: process.env.NODE_ENV || "development"
    });
});
app.get("/health", createFastHealthCheck());
app.get("/healthz", createFastHealthCheck());
app.get("/ready", createFastHealthCheck());
app.get("/ping", (req, res) => {
    res.set("Connection", "close");
    res.status(200).send("pong");
});
app.get("/status", createStatusCheck());
app.get("/api", (req, res) => {
    res.json({
        status: "ok",
        message: "Koveo Gestion API is running",
        version: "1.0.0",
        environment: process.env.NODE_ENV || "development",
        port,
        host
    });
});
app.get("/api/health", (req, res) => {
    res.json({
        status: "healthy",
        timestamp: ( /* @__PURE__ */new Date()).toISOString(),
        uptime: process.uptime(),
        environment: process.env.NODE_ENV || "development",
        port,
        host
    });
});
var server;
if (process.env.NODE_ENV !== "test" && !process.env.JEST_WORKER_ID) {
    try {
        if (process.env.NODE_ENV === "production") {
            log("\u{1F3ED} Production mode detected - applying production configurations");
            if (!process.env.DATABASE_URL) {
                log("\u274C DATABASE_URL is required in production", "error");
                process.exit(1);
            }
            process.env.NODE_TLS_REJECT_UNAUTHORIZED = "1";
            log("\u2705 Production checks passed");
        }
        exports.server = server = app.listen(port, host, async () => {
            log(`\u{1F680} Server ready and health checks available on port ${port}`);
            log(`\u{1F310} Health check URLs:`);
            log(`   - http://${host}:${port}/health`);
            log(`   - http://${host}:${port}/healthz`);
            log(`   - http://${host}:${port}/ready`);
            log(`   - http://${host}:${port}/ping`);
            log(`   - http://${host}:${port}/status`);
            log(`   - http://${host}:${port}/api/health`);
            log(`\u{1F680} Server listening on http://${host}:${port} - Health checks ready`);
            log(`\u{1F527} Environment: ${process.env.NODE_ENV || "development"}`);
            log(`\u{1F3D7}\uFE0F  Build mode: ${process.env.NODE_ENV === "production" ? "Production" : "Development"}`);
            if (process.env.NODE_ENV === "development") {
                log("\u{1F504} Development mode: Setting up frontend immediately...");
                setTimeout(async () => {
                    try {
                        await loadFullApplication();
                        log("\u2705 Development setup complete with frontend serving");
                    }
                    catch (error) {
                        log(`\u274C Frontend setup failed: ${error.message}`, "error");
                        log(`\u274C Stack trace: ${error.stack}`, "error");
                    }
                }, 100);
            }
            else {
                log("\u{1F504} Production mode: Loading application features...");
                setTimeout(async () => {
                    try {
                        await loadFullApplication();
                        log("\u2705 Production setup complete");
                    }
                    catch (error) {
                        log(`\u274C Application load failed in production: ${error.message}`, "error");
                        log(`\u274C Stack trace: ${error.stack}`, "error");
                    }
                }, 10);
            }
        });
        server.keepAliveTimeout = 3e4;
        server.headersTimeout = 35e3;
        server.requestTimeout = 1e4;
        server.timeout = 15e3;
        server.on("error", (error) => {
            log(`\u274C Server error: ${error?.message || error}`, "error");
            log(`\u274C Error code: ${error?.code}`, "error");
            log(`\u274C Error details: ${JSON.stringify(error, null, 2)}`, "error");
            if (error?.code === "EADDRINUSE") {
                log(`\u274C Port ${port} is already in use. Cannot start server.`, "error");
                process.exit(1);
            }
            else if (error?.code === "EACCES") {
                log(`\u274C Permission denied for port ${port}. Try a different port.`, "error");
                process.exit(1);
            }
            else {
                log(`\u274C Unexpected server error occurred.`, "error");
                process.exit(1);
            }
        });
        server.on("listening", () => {
            const addr = server.address();
            log(`\u2705 Server successfully bound to ${addr?.address}:${addr?.port}`);
            log(`\u2705 Server ready for connections`);
        });
        process.on("SIGTERM", () => {
            log("SIGTERM received, shutting down gracefully");
            server.close(() => {
                log("Server closed");
                process.exit(0);
            });
            setTimeout(() => process.exit(1), 1e4);
        });
    }
    catch (error) {
        log(`\u274C Critical failure starting server: ${error.message}`, "error");
        log(`\u274C Error stack: ${error.stack}`, "error");
        log(`\u274C Environment: ${process.env.NODE_ENV}`, "error");
        log(`\u274C Port: ${port}`, "error");
        log(`\u274C Host: ${host}`, "error");
        process.exit(1);
    }
}
process.on("uncaughtException", (error) => {
    log(`\u274C Uncaught Exception: ${error.message}`, "error");
    log(`\u274C Stack: ${error.stack}`, "error");
    process.exit(1);
});
process.on("unhandledRejection", (reason, promise) => {
    log(`\u274C Unhandled Rejection at: ${promise}`, "error");
    log(`\u274C Reason: ${reason}`, "error");
    process.exit(1);
});
if (process.env.NODE_ENV === "production") {
    setInterval(() => {
        const memUsage = process.memoryUsage();
        const memMB = Math.round(memUsage.rss / 1024 / 1024);
        log(`\u{1F4CA} Memory usage: ${memMB}MB`);
    }, 6e4);
}
async function loadFullApplication() {
    try {
        log("\u{1F504} Loading full application features...");
        if (process.env.NODE_ENV === "production") {
            log("\u{1F50D} Production validation: Checking application requirements...");
            const requiredEnvVars = ["DATABASE_URL"];
            for (const envVar of requiredEnvVars) {
                if (!process.env[envVar]) {
                    throw new Error(`Missing required environment variable: ${envVar}`);
                }
            }
            log("\u2705 Production environment validation passed");
        }
        log("\u{1F4E5} Setting up essential API routes...");
        try {
            await registerRoutes(app);
            log("\u2705 Full application routes loaded including authentication");
        }
        catch (routesError) {
            log(`\u274C Failed to load full routes: ${routesError.message}`, "error");
            app.get("/api/health", (req, res) => {
                res.json({ status: "ok", timestamp: ( /* @__PURE__ */new Date()).toISOString() });
            });
            app.post("/api/test", (req, res) => {
                res.json({ message: "API working", body: req.body });
            });
            log("\u2705 Essential API routes loaded (minimal setup)");
        }
        const fs7 = await Promise.resolve().then(() => __importStar(require("fs")));
        const pathModule = await Promise.resolve().then(() => __importStar(require("path")));
        const hasProductionBuild = fs7.existsSync(pathModule.resolve(process.cwd(), "dist", "public"));
        const isActualProduction = process.env.NODE_ENV === "production" && (hasProductionBuild || process.env.FORCE_PRODUCTION_SERVE === "true");
        const isViteDevMode = !isActualProduction;
        log(`\u{1F50D} Environment check: NODE_ENV=${process.env.NODE_ENV}, REPLIT_DOMAINS=${!!process.env.REPLIT_DOMAINS}, isViteDevMode=${isViteDevMode}`);
        if (isViteDevMode) {
            log("\u{1F504} Setting up Vite development server...");
            try {
                const { setupVite: setupVite2 } = await init_vite().then(() => vite_exports);
                await setupVite2(app, server);
                log("\u2705 Vite development server configured");
            }
            catch (frontendError) {
                log(`\u274C Vite setup failed: ${frontendError.message}`, "error");
                throw frontendError;
            }
        }
        else {
            log("\u{1F504} Setting up production static file serving (deployment detected)...");
            const distPath = pathModule.resolve(process.cwd(), "dist", "public");
            if (!fs7.existsSync(distPath)) {
                log(`\u26A0\uFE0F Build directory not found at: ${distPath}`, "error");
                log("\u26A0\uFE0F Continuing without static file serving - API routes still available", "error");
            }
            else {
                log(`\u2705 Found build directory: ${distPath}`);
            }
            log("\u2705 Production static file serving configured with API route protection");
        }
        const dbDelay = process.env.NODE_ENV === "production" ? 500 : 1e3;
        setTimeout(async () => {
            try {
                await initializeDatabaseInBackground();
                log("\u2705 Background database initialization completed");
            }
            catch (error) {
                log(`\u26A0\uFE0F Background database initialization failed: ${error.message}`, "error");
                if (process.env.NODE_ENV === "production") {
                    log("\u26A0\uFE0F Continuing in production mode despite database optimization failure");
                }
            }
        }, dbDelay);
    }
    catch (error) {
        log(`\u274C Failed to load full application: ${error.message}`, "error");
        log(`\u274C Stack trace: ${error.stack}`, "error");
        if (process.env.NODE_ENV === "production") {
            log("\u274C Critical application failure in production", "error");
            log("\u26A0\uFE0F Health checks may still be available");
        }
    }
}
async function initializeDatabaseInBackground() {
    try {
        if (process.env.NODE_ENV !== "test" && !process.env.DISABLE_DB_OPTIMIZATIONS) {
            log("\u{1F504} Checking database optimization status...");
            if (process.env.NODE_ENV === "production") {
                log("\u{1F3ED} Production mode: Performing safe database checks...");
            }
            const { QueryOptimizer: QueryOptimizer2 } = await Promise.resolve().then(() => (init_database_optimization(), database_optimization_exports));
            let indexesExist = false;
            try {
                const indexCheckPromise = QueryOptimizer2.areIndexesSetup();
                const timeoutPromise = new Promise((_, reject) => setTimeout(() => reject(new Error("Database check timeout")), 1e4));
                indexesExist = await Promise.race([indexCheckPromise, timeoutPromise]);
            }
            catch (dbError) {
                if (process.env.NODE_ENV === "production") {
                    log(`\u26A0\uFE0F Production: Database connection failed, skipping optimization: ${dbError.message}`);
                    return;
                }
                else {
                    log(`\u26A0\uFE0F Development: Database check failed: ${dbError.message}`);
                }
            }
            if (indexesExist) {
                log("\u2705 Database indexes already exist - skipping optimization");
                log("\u{1F680} Database is ready for high performance queries");
            }
            else {
                if (process.env.NODE_ENV === "production") {
                    log("\u{1F527} Production mode: Using existing database configuration");
                }
                else {
                    log("\u{1F504} Setting up database indexes for first time...");
                    await QueryOptimizer2.applyCoreOptimizations();
                    log("\u2705 Database optimizations complete");
                }
            }
        }
        log("\u{1F504} Background work complete - all routes already loaded");
    }
    catch (error) {
        if (process.env.NODE_ENV === "production") {
            log(`\u26A0\uFE0F Production: Background initialization failed (non-critical): ${error.message}`, "error");
        }
        else {
            log(`\u26A0\uFE0F Background initialization failed: ${error.message}`, "error");
        }
    }
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUMsR0FBRyxDQUFDLFFBQVEsS0FBSyxZQUFZLEVBQUUsQ0FBQztvQkFDMUMsR0FBRyxDQUFDLGtFQUFrRSxDQUFDLENBQUM7Z0JBQzFFLENBQUM7cUJBQU0sQ0FBQztvQkFDTixHQUFHLENBQUMseURBQXlELENBQUMsQ0FBQztvQkFDL0QsTUFBTSxlQUFlLENBQUMsc0JBQXNCLEVBQUUsQ0FBQztvQkFDL0MsR0FBRyxDQUFDLHdDQUF3QyxDQUFDLENBQUM7Z0JBQ2hELENBQUM7WUFDSCxDQUFDO1FBQ0gsQ0FBQztRQUNELEdBQUcsQ0FBQyxnRUFBZ0UsQ0FBQyxDQUFDO0lBQ3hFLENBQUM7SUFBQyxPQUFPLEtBQUssRUFBRSxDQUFDO1FBQ2YsSUFBSSxPQUFPLENBQUMsR0FBRyxDQUFDLFFBQVEsS0FBSyxZQUFZLEVBQUUsQ0FBQztZQUMxQyxHQUFHLENBQ0QsNkVBQTZFLEtBQUssQ0FBQyxPQUFPLEVBQUUsRUFDNUYsT0FBTyxDQUNSLENBQUM7UUFDSixDQUFDO2FBQU0sQ0FBQztZQUNOLEdBQUcsQ0FBQyxrREFBa0QsS0FBSyxDQUFDLE9BQU8sRUFBRSxFQUFFLE9BQU8sQ0FBQyxDQUFDO1FBQ2xGLENBQUM7SUFDSCxDQUFDO0FBQ0gsQ0FBQyIsIm5hbWVzIjpbXSwic291cmNlcyI6WyIvaG9tZS9ydW5uZXIvd29ya3NwYWNlL2Rpc3QvaW5kZXguanMiXSwic291cmNlc0NvbnRlbnQiOlsidmFyIF9fZGVmUHJvcCA9IE9iamVjdC5kZWZpbmVQcm9wZXJ0eTtcbnZhciBfX2dldE93blByb3BOYW1lcyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzO1xudmFyIF9fcmVxdWlyZSA9IC8qIEBfX1BVUkVfXyAqLyAoKHgpID0+IHR5cGVvZiByZXF1aXJlICE9PSBcInVuZGVmaW5lZFwiID8gcmVxdWlyZSA6IHR5cGVvZiBQcm94eSAhPT0gXCJ1bmRlZmluZWRcIiA/IG5ldyBQcm94eSh4LCB7XG4gIGdldDogKGEsIGIpID0+ICh0eXBlb2YgcmVxdWlyZSAhPT0gXCJ1bmRlZmluZWRcIiA/IHJlcXVpcmUgOiBhKVtiXVxufSkgOiB4KShmdW5jdGlvbih4KSB7XG4gIGlmICh0eXBlb2YgcmVxdWlyZSAhPT0gXCJ1bmRlZmluZWRcIikgcmV0dXJuIHJlcXVpcmUuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgdGhyb3cgRXJyb3IoJ0R5bmFtaWMgcmVxdWlyZSBvZiBcIicgKyB4ICsgJ1wiIGlzIG5vdCBzdXBwb3J0ZWQnKTtcbn0pO1xudmFyIF9fZXNtID0gKGZuLCByZXMpID0+IGZ1bmN0aW9uIF9faW5pdCgpIHtcbiAgcmV0dXJuIGZuICYmIChyZXMgPSAoMCwgZm5bX19nZXRPd25Qcm9wTmFtZXMoZm4pWzBdXSkoZm4gPSAwKSksIHJlcztcbn07XG52YXIgX19leHBvcnQgPSAodGFyZ2V0LCBhbGwpID0+IHtcbiAgZm9yICh2YXIgbmFtZSBpbiBhbGwpXG4gICAgX19kZWZQcm9wKHRhcmdldCwgbmFtZSwgeyBnZXQ6IGFsbFtuYW1lXSwgZW51bWVyYWJsZTogdHJ1ZSB9KTtcbn07XG5cbi8vIHZpdGUuY29uZmlnLnRzXG5pbXBvcnQgeyBkZWZpbmVDb25maWcgfSBmcm9tIFwidml0ZVwiO1xuaW1wb3J0IHJlYWN0IGZyb20gXCJAdml0ZWpzL3BsdWdpbi1yZWFjdFwiO1xuaW1wb3J0IHBhdGggZnJvbSBcInBhdGhcIjtcbmltcG9ydCBydW50aW1lRXJyb3JPdmVybGF5IGZyb20gXCJAcmVwbGl0L3ZpdGUtcGx1Z2luLXJ1bnRpbWUtZXJyb3ItbW9kYWxcIjtcbnZhciB2aXRlX2NvbmZpZ19kZWZhdWx0O1xudmFyIGluaXRfdml0ZV9jb25maWcgPSBfX2VzbSh7XG4gIGFzeW5jIFwidml0ZS5jb25maWcudHNcIigpIHtcbiAgICB2aXRlX2NvbmZpZ19kZWZhdWx0ID0gZGVmaW5lQ29uZmlnKHtcbiAgICAgIHBsdWdpbnM6IFtcbiAgICAgICAgcmVhY3QoKSxcbiAgICAgICAgcnVudGltZUVycm9yT3ZlcmxheSgpLFxuICAgICAgICAuLi5wcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCIgJiYgcHJvY2Vzcy5lbnYuUkVQTF9JRCAhPT0gdm9pZCAwID8gW2F3YWl0IGltcG9ydChcIkByZXBsaXQvdml0ZS1wbHVnaW4tY2FydG9ncmFwaGVyXCIpLnRoZW4oKG0pID0+IG0uY2FydG9ncmFwaGVyKCkpXSA6IFtdXG4gICAgICBdLFxuICAgICAgcmVzb2x2ZToge1xuICAgICAgICBhbGlhczoge1xuICAgICAgICAgIFwiQFwiOiBwYXRoLnJlc29sdmUoaW1wb3J0Lm1ldGEuZGlybmFtZSwgXCJjbGllbnRcIiwgXCJzcmNcIiksXG4gICAgICAgICAgXCJAc2hhcmVkXCI6IHBhdGgucmVzb2x2ZShpbXBvcnQubWV0YS5kaXJuYW1lLCBcInNoYXJlZFwiKSxcbiAgICAgICAgICBcIkBhc3NldHNcIjogcGF0aC5yZXNvbHZlKGltcG9ydC5tZXRhLmRpcm5hbWUsIFwiYXR0YWNoZWRfYXNzZXRzXCIpXG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgICByb290OiBwYXRoLnJlc29sdmUoaW1wb3J0Lm1ldGEuZGlybmFtZSwgXCJjbGllbnRcIiksXG4gICAgICBidWlsZDoge1xuICAgICAgICBvdXREaXI6IHBhdGgucmVzb2x2ZShpbXBvcnQubWV0YS5kaXJuYW1lLCBcImRpc3QvcHVibGljXCIpLFxuICAgICAgICBlbXB0eU91dERpcjogdHJ1ZVxuICAgICAgfSxcbiAgICAgIHNlcnZlcjoge1xuICAgICAgICBob3N0OiBcIjAuMC4wLjBcIixcbiAgICAgICAgZnM6IHtcbiAgICAgICAgICBzdHJpY3Q6IHRydWUsXG4gICAgICAgICAgZGVueTogW1wiKiovLipcIl1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0pO1xuICB9XG59KTtcblxuLy8gc2VydmVyL3ZpdGUudHNcbnZhciB2aXRlX2V4cG9ydHMgPSB7fTtcbl9fZXhwb3J0KHZpdGVfZXhwb3J0cywge1xuICBsb2c6ICgpID0+IGxvZyxcbiAgc2VydmVTdGF0aWM6ICgpID0+IHNlcnZlU3RhdGljLFxuICBzZXR1cFZpdGU6ICgpID0+IHNldHVwVml0ZVxufSk7XG5pbXBvcnQgZXhwcmVzcyBmcm9tIFwiZXhwcmVzc1wiO1xuaW1wb3J0IGZzIGZyb20gXCJmc1wiO1xuaW1wb3J0IHBhdGgyIGZyb20gXCJwYXRoXCI7XG5pbXBvcnQgeyBjcmVhdGVTZXJ2ZXIgYXMgY3JlYXRlVml0ZVNlcnZlciwgY3JlYXRlTG9nZ2VyIH0gZnJvbSBcInZpdGVcIjtcbmltcG9ydCB7IG5hbm9pZCB9IGZyb20gXCJuYW5vaWRcIjtcbmZ1bmN0aW9uIGxvZyhtZXNzYWdlLCBzb3VyY2UgPSBcImV4cHJlc3NcIikge1xuICBjb25zdCBmb3JtYXR0ZWRUaW1lID0gKC8qIEBfX1BVUkVfXyAqLyBuZXcgRGF0ZSgpKS50b0xvY2FsZVRpbWVTdHJpbmcoXCJlbi1VU1wiLCB7XG4gICAgaG91cjogXCJudW1lcmljXCIsXG4gICAgbWludXRlOiBcIjItZGlnaXRcIixcbiAgICBzZWNvbmQ6IFwiMi1kaWdpdFwiLFxuICAgIGhvdXIxMjogdHJ1ZVxuICB9KTtcbn1cbmFzeW5jIGZ1bmN0aW9uIHNldHVwVml0ZShhcHAyLCBzZXJ2ZXIyKSB7XG4gIGNvbnN0IHNlcnZlck9wdGlvbnMgPSB7XG4gICAgbWlkZGxld2FyZU1vZGU6IHRydWUsXG4gICAgaG1yOiB7IHNlcnZlcjogc2VydmVyMiB9LFxuICAgIGFsbG93ZWRIb3N0czogdHJ1ZVxuICB9O1xuICBjb25zdCB2aXRlID0gYXdhaXQgY3JlYXRlVml0ZVNlcnZlcih7XG4gICAgLi4udml0ZV9jb25maWdfZGVmYXVsdCxcbiAgICBjb25maWdGaWxlOiBmYWxzZSxcbiAgICBjdXN0b21Mb2dnZXI6IHtcbiAgICAgIC4uLnZpdGVMb2dnZXIsXG4gICAgICBlcnJvcjogKG1zZywgX29wdGlvbnMpID0+IHtcbiAgICAgICAgdml0ZUxvZ2dlci5lcnJvcihtc2csIF9vcHRpb25zKTtcbiAgICAgICAgcHJvY2Vzcy5leGl0KDEpO1xuICAgICAgfVxuICAgIH0sXG4gICAgc2VydmVyOiBzZXJ2ZXJPcHRpb25zLFxuICAgIGFwcFR5cGU6IFwiY3VzdG9tXCJcbiAgfSk7XG4gIGFwcDIudXNlKHZpdGUubWlkZGxld2FyZXMpO1xuICBhcHAyLnVzZShcIipcIiwgYXN5bmMgKHJlcSwgcmVzLCBuZXh0KSA9PiB7XG4gICAgaWYgKHJlcS5vcmlnaW5hbFVybC5zdGFydHNXaXRoKFwiL2FwaS9cIikpIHtcbiAgICAgIHJldHVybiBuZXh0KCk7XG4gICAgfVxuICAgIGNvbnN0IHVybCA9IHJlcS5vcmlnaW5hbFVybDtcbiAgICB0cnkge1xuICAgICAgY29uc3QgY2xpZW50VGVtcGxhdGUgPSBwYXRoMi5yZXNvbHZlKGltcG9ydC5tZXRhLmRpcm5hbWUsIFwiLi5cIiwgXCJjbGllbnRcIiwgXCJpbmRleC5odG1sXCIpO1xuICAgICAgbGV0IHRlbXBsYXRlID0gYXdhaXQgZnMucHJvbWlzZXMucmVhZEZpbGUoY2xpZW50VGVtcGxhdGUsIFwidXRmLThcIik7XG4gICAgICB0ZW1wbGF0ZSA9IHRlbXBsYXRlLnJlcGxhY2UoYHNyYz1cIi9zcmMvbWFpbi50c3hcImAsIGBzcmM9XCIvc3JjL21haW4udHN4P3Y9JHtuYW5vaWQoKX1cImApO1xuICAgICAgY29uc3QgcGFnZSA9IGF3YWl0IHZpdGUudHJhbnNmb3JtSW5kZXhIdG1sKHVybCwgdGVtcGxhdGUpO1xuICAgICAgcmVzLnN0YXR1cygyMDApLnNldCh7IFwiQ29udGVudC1UeXBlXCI6IFwidGV4dC9odG1sXCIgfSkuZW5kKHBhZ2UpO1xuICAgIH0gY2F0Y2ggKF9fX2UpIHtcbiAgICAgIHZpdGUuc3NyRml4U3RhY2t0cmFjZShfX19lKTtcbiAgICAgIG5leHQoX19fZSk7XG4gICAgfVxuICB9KTtcbn1cbmZ1bmN0aW9uIHNlcnZlU3RhdGljKGFwcDIpIHtcbiAgY29uc3QgZGlzdFBhdGggPSBwYXRoMi5yZXNvbHZlKHByb2Nlc3MuY3dkKCksIFwiZGlzdFwiLCBcInB1YmxpY1wiKTtcbiAgaWYgKCFmcy5leGlzdHNTeW5jKGRpc3RQYXRoKSkge1xuICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgIGBDb3VsZCBub3QgZmluZCB0aGUgYnVpbGQgZGlyZWN0b3J5OiAke2Rpc3RQYXRofSwgbWFrZSBzdXJlIHRvIGJ1aWxkIHRoZSBjbGllbnQgZmlyc3RgXG4gICAgKTtcbiAgfVxuICBhcHAyLnVzZShleHByZXNzLnN0YXRpYyhkaXN0UGF0aCkpO1xuICBhcHAyLnVzZShcIipcIiwgKHJlcSwgcmVzLCBuZXh0KSA9PiB7XG4gICAgaWYgKHJlcS5vcmlnaW5hbFVybC5zdGFydHNXaXRoKFwiL2FwaS9cIikpIHtcbiAgICAgIHJldHVybiBuZXh0KCk7XG4gICAgfVxuICAgIHJlcy5zZW5kRmlsZShwYXRoMi5yZXNvbHZlKGRpc3RQYXRoLCBcImluZGV4Lmh0bWxcIikpO1xuICB9KTtcbn1cbnZhciB2aXRlTG9nZ2VyO1xudmFyIGluaXRfdml0ZSA9IF9fZXNtKHtcbiAgYXN5bmMgXCJzZXJ2ZXIvdml0ZS50c1wiKCkge1xuICAgIGF3YWl0IGluaXRfdml0ZV9jb25maWcoKTtcbiAgICB2aXRlTG9nZ2VyID0gY3JlYXRlTG9nZ2VyKCk7XG4gIH1cbn0pO1xuXG4vLyBzZXJ2ZXIvY29uZmlnL2luZGV4LnRzXG5pbXBvcnQgeyB6IH0gZnJvbSBcInpvZFwiO1xudmFyIGVudlNjaGVtYSwgZW52LCBkZXRlY3RFbnZpcm9ubWVudCwgZW52Q29uZmlnLCBjb25maWc7XG52YXIgaW5pdF9jb25maWcgPSBfX2VzbSh7XG4gIFwic2VydmVyL2NvbmZpZy9pbmRleC50c1wiKCkge1xuICAgIGVudlNjaGVtYSA9IHoub2JqZWN0KHtcbiAgICAgIFBPUlQ6IHouc3RyaW5nKCkudHJhbnNmb3JtKE51bWJlcikuZGVmYXVsdCg1ZTMpLFxuICAgICAgREFUQUJBU0VfVVJMOiB6LnN0cmluZygpLm1pbigxLCBcIkRBVEFCQVNFX1VSTCBpcyByZXF1aXJlZFwiKSxcbiAgICAgIERBVEFCQVNFX1VSTF9LT1ZFTzogei5zdHJpbmcoKS5vcHRpb25hbCgpLFxuICAgICAgLy8gUHJvZHVjdGlvbiBkYXRhYmFzZVxuICAgICAgU0VTU0lPTl9TRUNSRVQ6IHouc3RyaW5nKCkub3B0aW9uYWwoKSxcbiAgICAgIFJFUExfU0xVRzogei5zdHJpbmcoKS5vcHRpb25hbCgpLFxuICAgICAgUkVQTF9PV05FUjogei5zdHJpbmcoKS5vcHRpb25hbCgpLFxuICAgICAgLy8gRW1haWwgY29uZmlndXJhdGlvblxuICAgICAgU0VOREdSSURfQVBJX0tFWTogei5zdHJpbmcoKS5vcHRpb25hbCgpLFxuICAgICAgRlJPTV9FTUFJTDogei5zdHJpbmcoKS5lbWFpbCgpLm9wdGlvbmFsKCksXG4gICAgICAvLyBTU0wgY29uZmlndXJhdGlvblxuICAgICAgU1NMX0VOQUJMRUQ6IHouc3RyaW5nKCkudHJhbnNmb3JtKCh2KSA9PiB2ID09PSBcInRydWVcIikuZGVmYXVsdChmYWxzZSksXG4gICAgICBTU0xfU1RBR0lORzogei5zdHJpbmcoKS50cmFuc2Zvcm0oKHYpID0+IHYgPT09IFwidHJ1ZVwiKS5kZWZhdWx0KHRydWUpLFxuICAgICAgLy8gUGVyZm9ybWFuY2UgY29uZmlndXJhdGlvblxuICAgICAgQ0FDSEVfVFRMOiB6LnN0cmluZygpLnRyYW5zZm9ybShOdW1iZXIpLmRlZmF1bHQoMzAwKSxcbiAgICAgIC8vIDUgbWludXRlc1xuICAgICAgTUFYX0NBQ0hFX1NJWkU6IHouc3RyaW5nKCkudHJhbnNmb3JtKE51bWJlcikuZGVmYXVsdCgxMDApLFxuICAgICAgLy8gU2VjdXJpdHkgY29uZmlndXJhdGlvblxuICAgICAgUkFURV9MSU1JVF9XSU5ET1c6IHouc3RyaW5nKCkudHJhbnNmb3JtKE51bWJlcikuZGVmYXVsdCg5ZTUpLFxuICAgICAgLy8gMTUgbWludXRlc1xuICAgICAgUkFURV9MSU1JVF9NQVg6IHouc3RyaW5nKCkudHJhbnNmb3JtKE51bWJlcikuZGVmYXVsdCgxMDApLFxuICAgICAgLy8gRGF0YWJhc2Ugb3B0aW1pemF0aW9uXG4gICAgICBEQl9QT09MX1NJWkU6IHouc3RyaW5nKCkudHJhbnNmb3JtKE51bWJlcikuZGVmYXVsdCgxMCksXG4gICAgICBRVUVSWV9USU1FT1VUOiB6LnN0cmluZygpLnRyYW5zZm9ybShOdW1iZXIpLmRlZmF1bHQoM2U0KVxuICAgICAgLy8gMzAgc2Vjb25kc1xuICAgIH0pO1xuICAgIGVudiA9IGVudlNjaGVtYS5wYXJzZShwcm9jZXNzLmVudik7XG4gICAgZGV0ZWN0RW52aXJvbm1lbnQgPSAoKSA9PiB7XG4gICAgICBjb25zdCByZXBsRG9tYWluID0gZW52LlJFUExfU0xVRyAmJiBlbnYuUkVQTF9PV05FUiA/IGAke2Vudi5SRVBMX1NMVUd9LiR7ZW52LlJFUExfT1dORVJ9LnJlcGwuY29gIDogbnVsbDtcbiAgICAgIGNvbnN0IGhvc3REb21haW4gPSBwcm9jZXNzLmVudi5SRVBMSVRfRE9NQUlOUyB8fCBwcm9jZXNzLmVudi5IT1NUIHx8IHByb2Nlc3MuZW52LkRPTUFJTjtcbiAgICAgIGNvbnN0IHJlcXVlc3RIb3N0ID0gcHJvY2Vzcy5lbnYuUkVRVUVTVF9IT1NUIHx8IHByb2Nlc3MuZW52LkhUVFBfSE9TVDtcbiAgICAgIGNvbnN0IHNlcnZlck5hbWUgPSBwcm9jZXNzLmVudi5TRVJWRVJfTkFNRTtcbiAgICAgIGNvbnN0IGRvbWFpbiA9IHJlcXVlc3RIb3N0IHx8IHNlcnZlck5hbWUgfHwgaG9zdERvbWFpbiB8fCByZXBsRG9tYWluIHx8IFwibG9jYWxob3N0XCI7XG4gICAgICBjb25zdCBwcm9kdWN0aW9uRG9tYWlucyA9IFtcImtvdmVvLWdlc3Rpb24uY29tXCIsIFwid3d3LmtvdmVvLWdlc3Rpb24uY29tXCIsIFwiYXBwLmtvdmVvLWdlc3Rpb24uY29tXCJdO1xuICAgICAgY29uc3QgaXNFeHBsaWNpdFByb2R1Y3Rpb24gPSBwcm9jZXNzLmVudi5OT0RFX0VOViA9PT0gXCJwcm9kdWN0aW9uXCI7XG4gICAgICBjb25zdCBpc0RvbWFpblByb2R1Y3Rpb24gPSBwcm9kdWN0aW9uRG9tYWlucy5zb21lKFxuICAgICAgICAocHJvZERvbWFpbikgPT4gZG9tYWluLmluY2x1ZGVzKHByb2REb21haW4pIHx8IGRvbWFpbiA9PT0gcHJvZERvbWFpblxuICAgICAgKTtcbiAgICAgIGNvbnN0IGlzS292ZW9Qcm9kdWN0aW9uID0gZG9tYWluLmluY2x1ZGVzKFwia292ZW8tZ2VzdGlvbi5jb21cIik7XG4gICAgICBjb25zdCBpc1Byb2R1Y3Rpb24gPSBpc0V4cGxpY2l0UHJvZHVjdGlvbiB8fCBpc0tvdmVvUHJvZHVjdGlvbiB8fCBpc0RvbWFpblByb2R1Y3Rpb247XG4gICAgICBjb25zdCBpc0RldmVsb3BtZW50ID0gIWlzUHJvZHVjdGlvbjtcbiAgICAgIGNvbnNvbGUubG9nKFxuICAgICAgICBgXFx1ezFGMzBEfSBFbnZpcm9ubWVudCBkZXRlY3RlZDogJHtpc0RldmVsb3BtZW50ID8gXCJkZXZlbG9wbWVudFwiIDogXCJwcm9kdWN0aW9uXCJ9IChkb21haW46ICR7ZG9tYWlufSwga292ZW86ICR7aXNLb3Zlb1Byb2R1Y3Rpb259KWBcbiAgICAgICk7XG4gICAgICByZXR1cm4ge1xuICAgICAgICBlbnZpcm9ubWVudDogaXNEZXZlbG9wbWVudCA/IFwiZGV2ZWxvcG1lbnRcIiA6IFwicHJvZHVjdGlvblwiLFxuICAgICAgICBpc0RldmVsb3BtZW50LFxuICAgICAgICBpc1Byb2R1Y3Rpb24sXG4gICAgICAgIGlzVGVzdDogZmFsc2UsXG4gICAgICAgIGRvbWFpblxuICAgICAgfTtcbiAgICB9O1xuICAgIGVudkNvbmZpZyA9IGRldGVjdEVudmlyb25tZW50KCk7XG4gICAgY29uZmlnID0ge1xuICAgICAgLy8gU2VydmVyIGNvbmZpZ3VyYXRpb25cbiAgICAgIHNlcnZlcjoge1xuICAgICAgICBwb3J0OiBlbnYuUE9SVCxcbiAgICAgICAgbm9kZUVudjogZW52Q29uZmlnLmVudmlyb25tZW50LFxuICAgICAgICBpc0RldmVsb3BtZW50OiBlbnZDb25maWcuaXNEZXZlbG9wbWVudCxcbiAgICAgICAgaXNQcm9kdWN0aW9uOiBlbnZDb25maWcuaXNQcm9kdWN0aW9uLFxuICAgICAgICBpc1Rlc3Q6IGVudkNvbmZpZy5pc1Rlc3QsXG4gICAgICAgIGRvbWFpbjogZW52Q29uZmlnLmRvbWFpblxuICAgICAgfSxcbiAgICAgIC8vIERhdGFiYXNlIGNvbmZpZ3VyYXRpb25cbiAgICAgIGRhdGFiYXNlOiB7XG4gICAgICAgIC8vIFVzZSBEQVRBQkFTRV9VUkxfS09WRU8gZm9yIHByb2R1Y3Rpb24gKGtvdmVvLWdlc3Rpb24uY29tKSwgREFUQUJBU0VfVVJMIGZvciBkZXZlbG9wbWVudFxuICAgICAgICB1cmw6IGVudkNvbmZpZy5pc1Byb2R1Y3Rpb24gJiYgZW52LkRBVEFCQVNFX1VSTF9LT1ZFTyA/IGVudi5EQVRBQkFTRV9VUkxfS09WRU8gOiBlbnYuREFUQUJBU0VfVVJMLFxuICAgICAgICBwb29sU2l6ZTogZW52LkRCX1BPT0xfU0laRSxcbiAgICAgICAgcXVlcnlUaW1lb3V0OiBlbnYuUVVFUllfVElNRU9VVCxcbiAgICAgICAgLy8gSGVscGVyIGZ1bmN0aW9uIHRvIGdldCBkYXRhYmFzZSBVUkwgYXQgcnVudGltZSBiYXNlZCBvbiByZXF1ZXN0XG4gICAgICAgIGdldFJ1bnRpbWVEYXRhYmFzZVVybDogKHJlcXVlc3REb21haW4pID0+IHtcbiAgICAgICAgICBjb25zdCBpc0tvdmVvUmVxdWVzdCA9IHJlcXVlc3REb21haW4/LmluY2x1ZGVzKFwia292ZW8tZ2VzdGlvbi5jb21cIik7XG4gICAgICAgICAgY29uc3Qgc2hvdWxkVXNlUHJvZHVjdGlvbiA9IGVudkNvbmZpZy5pc1Byb2R1Y3Rpb24gfHwgaXNLb3Zlb1JlcXVlc3Q7XG4gICAgICAgICAgcmV0dXJuIHNob3VsZFVzZVByb2R1Y3Rpb24gJiYgZW52LkRBVEFCQVNFX1VSTF9LT1ZFTyA/IGVudi5EQVRBQkFTRV9VUkxfS09WRU8gOiBlbnYuREFUQUJBU0VfVVJMO1xuICAgICAgICB9XG4gICAgICB9LFxuICAgICAgLy8gU2Vzc2lvbiBjb25maWd1cmF0aW9uXG4gICAgICBzZXNzaW9uOiB7XG4gICAgICAgIHNlY3JldDogZW52LlNFU1NJT05fU0VDUkVUIHx8IFwia292ZW8tZ2VzdGlvbi1zZWNyZXQta2V5XCIsXG4gICAgICAgIG1heEFnZTogMjQgKiA2MCAqIDYwICogMWUzLFxuICAgICAgICAvLyAyNCBob3Vyc1xuICAgICAgICBzZWN1cmU6IGVudkNvbmZpZy5pc1Byb2R1Y3Rpb24sXG4gICAgICAgIGh0dHBPbmx5OiB0cnVlLFxuICAgICAgICBzYW1lU2l0ZTogXCJzdHJpY3RcIlxuICAgICAgfSxcbiAgICAgIC8vIEVtYWlsIGNvbmZpZ3VyYXRpb25cbiAgICAgIGVtYWlsOiB7XG4gICAgICAgIGFwaUtleTogZW52LlNFTkRHUklEX0FQSV9LRVksXG4gICAgICAgIGZyb21FbWFpbDogZW52LkZST01fRU1BSUwgfHwgXCJub3JlcGx5QGtvdmVvLmNhXCIsXG4gICAgICAgIGVuYWJsZWQ6ICEhZW52LlNFTkRHUklEX0FQSV9LRVlcbiAgICAgIH0sXG4gICAgICAvLyBTU0wgY29uZmlndXJhdGlvblxuICAgICAgc3NsOiB7XG4gICAgICAgIGVuYWJsZWQ6IGVudi5TU0xfRU5BQkxFRCxcbiAgICAgICAgc3RhZ2luZzogZW52LlNTTF9TVEFHSU5HXG4gICAgICB9LFxuICAgICAgLy8gQ2FjaGUgY29uZmlndXJhdGlvblxuICAgICAgY2FjaGU6IHtcbiAgICAgICAgdHRsOiBlbnYuQ0FDSEVfVFRMLFxuICAgICAgICBtYXhTaXplOiBlbnYuTUFYX0NBQ0hFX1NJWkVcbiAgICAgIH0sXG4gICAgICAvLyBSYXRlIGxpbWl0aW5nIGNvbmZpZ3VyYXRpb25cbiAgICAgIHJhdGVMaW1pdDoge1xuICAgICAgICB3aW5kb3dNczogZW52LlJBVEVfTElNSVRfV0lORE9XLFxuICAgICAgICBtYXg6IGVudi5SQVRFX0xJTUlUX01BWFxuICAgICAgfSxcbiAgICAgIC8vIFF1ZWJlYyBjb21wbGlhbmNlIHNldHRpbmdzXG4gICAgICBxdWViZWM6IHtcbiAgICAgICAgZGVmYXVsdExhbmd1YWdlOiBcImZyXCIsXG4gICAgICAgIHN1cHBvcnRlZExhbmd1YWdlczogW1wiZW5cIiwgXCJmclwiXSxcbiAgICAgICAgcmVxdWlyZUJpbGluZ3VhbDogdHJ1ZSxcbiAgICAgICAgbGF3MjVDb21wbGlhbmNlOiB0cnVlXG4gICAgICB9XG4gICAgfTtcbiAgfVxufSk7XG5cbi8vIHNoYXJlZC9zY2hlbWFzL2NvcmUudHNcbmltcG9ydCB7IHNxbCBhcyBzcWwyIH0gZnJvbSBcImRyaXp6bGUtb3JtXCI7XG5pbXBvcnQge1xuICBwZ1RhYmxlLFxuICB0ZXh0LFxuICB2YXJjaGFyLFxuICB0aW1lc3RhbXAsXG4gIHV1aWQsXG4gIHBnRW51bSxcbiAgYm9vbGVhbixcbiAgaW50ZWdlcixcbiAganNvblxufSBmcm9tIFwiZHJpenpsZS1vcm0vcGctY29yZVwiO1xuaW1wb3J0IHsgeiBhcyB6MiB9IGZyb20gXCJ6b2RcIjtcbnZhciB1c2VyUm9sZUVudW0sIGludml0YXRpb25TdGF0dXNFbnVtLCB1c2Vycywgb3JnYW5pemF0aW9ucywgdXNlck9yZ2FuaXphdGlvbnMsIGludml0YXRpb25zLCBwYXNzd29yZFJlc2V0VG9rZW5zLCBpbnZpdGF0aW9uQXVkaXRMb2csIHJlc291cmNlVHlwZUVudW0sIGFjdGlvbkVudW0sIHBlcm1pc3Npb25zLCByb2xlUGVybWlzc2lvbnMsIHVzZXJQZXJtaXNzaW9ucywgaW5zZXJ0VXNlclNjaGVtYSwgaW5zZXJ0T3JnYW5pemF0aW9uU2NoZW1hLCBpbnNlcnRVc2VyT3JnYW5pemF0aW9uU2NoZW1hLCBpbnNlcnRJbnZpdGF0aW9uU2NoZW1hLCBpbnNlcnRQYXNzd29yZFJlc2V0VG9rZW5TY2hlbWEsIGluc2VydEludml0YXRpb25BdWRpdExvZ1NjaGVtYSwgaW5zZXJ0UGVybWlzc2lvblNjaGVtYSwgaW5zZXJ0Um9sZVBlcm1pc3Npb25TY2hlbWEsIGluc2VydFVzZXJQZXJtaXNzaW9uU2NoZW1hO1xudmFyIGluaXRfY29yZSA9IF9fZXNtKHtcbiAgXCJzaGFyZWQvc2NoZW1hcy9jb3JlLnRzXCIoKSB7XG4gICAgdXNlclJvbGVFbnVtID0gcGdFbnVtKFwidXNlcl9yb2xlXCIsIFtcbiAgICAgIFwiYWRtaW5cIixcbiAgICAgIFwibWFuYWdlclwiLFxuICAgICAgXCJ0ZW5hbnRcIixcbiAgICAgIFwicmVzaWRlbnRcIixcbiAgICAgIFwiZGVtb19tYW5hZ2VyXCIsXG4gICAgICBcImRlbW9fdGVuYW50XCIsXG4gICAgICBcImRlbW9fcmVzaWRlbnRcIlxuICAgIF0pO1xuICAgIGludml0YXRpb25TdGF0dXNFbnVtID0gcGdFbnVtKFwiaW52aXRhdGlvbl9zdGF0dXNcIiwgW1xuICAgICAgXCJwZW5kaW5nXCIsXG4gICAgICBcImFjY2VwdGVkXCIsXG4gICAgICBcImV4cGlyZWRcIixcbiAgICAgIFwiY2FuY2VsbGVkXCJcbiAgICBdKTtcbiAgICB1c2VycyA9IHBnVGFibGUoXCJ1c2Vyc1wiLCB7XG4gICAgICBpZDogdmFyY2hhcihcImlkXCIpLnByaW1hcnlLZXkoKS5kZWZhdWx0KHNxbDJgZ2VuX3JhbmRvbV91dWlkKClgKSxcbiAgICAgIHVzZXJuYW1lOiB0ZXh0KFwidXNlcm5hbWVcIikubm90TnVsbCgpLnVuaXF1ZSgpLFxuICAgICAgLy8gVXNlcm5hbWUgZmllbGQgcmVxdWlyZWQgYnkgZGF0YWJhc2VcbiAgICAgIGVtYWlsOiB0ZXh0KFwiZW1haWxcIikubm90TnVsbCgpLnVuaXF1ZSgpLFxuICAgICAgcGFzc3dvcmQ6IHRleHQoXCJwYXNzd29yZFwiKS5ub3ROdWxsKCksXG4gICAgICBmaXJzdE5hbWU6IHRleHQoXCJmaXJzdF9uYW1lXCIpLm5vdE51bGwoKSxcbiAgICAgIGxhc3ROYW1lOiB0ZXh0KFwibGFzdF9uYW1lXCIpLm5vdE51bGwoKSxcbiAgICAgIHBob25lOiB0ZXh0KFwicGhvbmVcIiksXG4gICAgICBwcm9maWxlSW1hZ2U6IHRleHQoXCJwcm9maWxlX2ltYWdlXCIpLFxuICAgICAgbGFuZ3VhZ2U6IHRleHQoXCJsYW5ndWFnZVwiKS5ub3ROdWxsKCkuZGVmYXVsdChcImZyXCIpLFxuICAgICAgLy8gRGVmYXVsdCB0byBGcmVuY2ggZm9yIFF1ZWJlY1xuICAgICAgcm9sZTogdXNlclJvbGVFbnVtKFwicm9sZVwiKS5ub3ROdWxsKCkuZGVmYXVsdChcInRlbmFudFwiKSxcbiAgICAgIGlzQWN0aXZlOiBib29sZWFuKFwiaXNfYWN0aXZlXCIpLm5vdE51bGwoKS5kZWZhdWx0KHRydWUpLFxuICAgICAgbGFzdExvZ2luQXQ6IHRpbWVzdGFtcChcImxhc3RfbG9naW5fYXRcIiksXG4gICAgICBjcmVhdGVkQXQ6IHRpbWVzdGFtcChcImNyZWF0ZWRfYXRcIikuZGVmYXVsdE5vdygpLFxuICAgICAgdXBkYXRlZEF0OiB0aW1lc3RhbXAoXCJ1cGRhdGVkX2F0XCIpLmRlZmF1bHROb3coKVxuICAgIH0pO1xuICAgIG9yZ2FuaXphdGlvbnMgPSBwZ1RhYmxlKFwib3JnYW5pemF0aW9uc1wiLCB7XG4gICAgICBpZDogdmFyY2hhcihcImlkXCIpLnByaW1hcnlLZXkoKS5kZWZhdWx0KHNxbDJgZ2VuX3JhbmRvbV91dWlkKClgKSxcbiAgICAgIG5hbWU6IHRleHQoXCJuYW1lXCIpLm5vdE51bGwoKSxcbiAgICAgIHR5cGU6IHRleHQoXCJ0eXBlXCIpLm5vdE51bGwoKSxcbiAgICAgIC8vICdtYW5hZ2VtZW50X2NvbXBhbnknLCAnc3luZGljYXRlJywgJ2Nvb3BlcmF0aXZlJywgJ2NvbmRvX2Fzc29jaWF0aW9uJywgJ2RlbW8nXG4gICAgICBhZGRyZXNzOiB0ZXh0KFwiYWRkcmVzc1wiKS5ub3ROdWxsKCksXG4gICAgICBjaXR5OiB0ZXh0KFwiY2l0eVwiKS5ub3ROdWxsKCksXG4gICAgICBwcm92aW5jZTogdGV4dChcInByb3ZpbmNlXCIpLm5vdE51bGwoKS5kZWZhdWx0KFwiUUNcIiksXG4gICAgICBwb3N0YWxDb2RlOiB0ZXh0KFwicG9zdGFsX2NvZGVcIikubm90TnVsbCgpLFxuICAgICAgcGhvbmU6IHRleHQoXCJwaG9uZVwiKSxcbiAgICAgIGVtYWlsOiB0ZXh0KFwiZW1haWxcIiksXG4gICAgICB3ZWJzaXRlOiB0ZXh0KFwid2Vic2l0ZVwiKSxcbiAgICAgIHJlZ2lzdHJhdGlvbk51bWJlcjogdGV4dChcInJlZ2lzdHJhdGlvbl9udW1iZXJcIiksXG4gICAgICAvLyBRdWViZWMgYnVzaW5lc3MgcmVnaXN0cmF0aW9uXG4gICAgICBpc0FjdGl2ZTogYm9vbGVhbihcImlzX2FjdGl2ZVwiKS5ub3ROdWxsKCkuZGVmYXVsdCh0cnVlKSxcbiAgICAgIGNyZWF0ZWRBdDogdGltZXN0YW1wKFwiY3JlYXRlZF9hdFwiKS5kZWZhdWx0Tm93KCksXG4gICAgICB1cGRhdGVkQXQ6IHRpbWVzdGFtcChcInVwZGF0ZWRfYXRcIikuZGVmYXVsdE5vdygpXG4gICAgfSk7XG4gICAgdXNlck9yZ2FuaXphdGlvbnMgPSBwZ1RhYmxlKFwidXNlcl9vcmdhbml6YXRpb25zXCIsIHtcbiAgICAgIGlkOiB2YXJjaGFyKFwiaWRcIikucHJpbWFyeUtleSgpLmRlZmF1bHQoc3FsMmBnZW5fcmFuZG9tX3V1aWQoKWApLFxuICAgICAgdXNlcklkOiB2YXJjaGFyKFwidXNlcl9pZFwiKS5ub3ROdWxsKCkucmVmZXJlbmNlcygoKSA9PiB1c2Vycy5pZCwgeyBvbkRlbGV0ZTogXCJjYXNjYWRlXCIgfSksXG4gICAgICBvcmdhbml6YXRpb25JZDogdmFyY2hhcihcIm9yZ2FuaXphdGlvbl9pZFwiKS5ub3ROdWxsKCkucmVmZXJlbmNlcygoKSA9PiBvcmdhbml6YXRpb25zLmlkLCB7IG9uRGVsZXRlOiBcImNhc2NhZGVcIiB9KSxcbiAgICAgIG9yZ2FuaXphdGlvblJvbGU6IHVzZXJSb2xlRW51bShcIm9yZ2FuaXphdGlvbl9yb2xlXCIpLm5vdE51bGwoKS5kZWZhdWx0KFwidGVuYW50XCIpLFxuICAgICAgaXNBY3RpdmU6IGJvb2xlYW4oXCJpc19hY3RpdmVcIikubm90TnVsbCgpLmRlZmF1bHQodHJ1ZSksXG4gICAgICBjYW5BY2Nlc3NBbGxPcmdhbml6YXRpb25zOiBib29sZWFuKFwiY2FuX2FjY2Vzc19hbGxfb3JnYW5pemF0aW9uc1wiKS5ub3ROdWxsKCkuZGVmYXVsdChmYWxzZSksXG4gICAgICBjcmVhdGVkQXQ6IHRpbWVzdGFtcChcImNyZWF0ZWRfYXRcIikuZGVmYXVsdE5vdygpLFxuICAgICAgdXBkYXRlZEF0OiB0aW1lc3RhbXAoXCJ1cGRhdGVkX2F0XCIpLmRlZmF1bHROb3coKVxuICAgIH0pO1xuICAgIGludml0YXRpb25zID0gcGdUYWJsZShcImludml0YXRpb25zXCIsIHtcbiAgICAgIGlkOiB2YXJjaGFyKFwiaWRcIikucHJpbWFyeUtleSgpLmRlZmF1bHQoc3FsMmBnZW5fcmFuZG9tX3V1aWQoKWApLFxuICAgICAgb3JnYW5pemF0aW9uSWQ6IHZhcmNoYXIoXCJvcmdhbml6YXRpb25faWRcIiksXG4gICAgICBidWlsZGluZ0lkOiB2YXJjaGFyKFwiYnVpbGRpbmdfaWRcIiksXG4gICAgICByZXNpZGVuY2VJZDogdGV4dChcInJlc2lkZW5jZV9pZFwiKSxcbiAgICAgIGVtYWlsOiB0ZXh0KFwiZW1haWxcIikubm90TnVsbCgpLFxuICAgICAgdG9rZW46IHRleHQoXCJ0b2tlblwiKS5ub3ROdWxsKCkudW5pcXVlKCksXG4gICAgICByb2xlOiB1c2VyUm9sZUVudW0oXCJyb2xlXCIpLm5vdE51bGwoKSxcbiAgICAgIHN0YXR1czogaW52aXRhdGlvblN0YXR1c0VudW0oXCJzdGF0dXNcIikubm90TnVsbCgpLmRlZmF1bHQoXCJwZW5kaW5nXCIpLFxuICAgICAgaW52aXRlZEJ5VXNlcklkOiB2YXJjaGFyKFwiaW52aXRlZF9ieV91c2VyX2lkXCIpLm5vdE51bGwoKSxcbiAgICAgIGV4cGlyZXNBdDogdGltZXN0YW1wKFwiZXhwaXJlc19hdFwiKS5ub3ROdWxsKCksXG4gICAgICB0b2tlbkhhc2g6IHRleHQoXCJ0b2tlbl9oYXNoXCIpLm5vdE51bGwoKSxcbiAgICAgIHVzYWdlQ291bnQ6IGludGVnZXIoXCJ1c2FnZV9jb3VudFwiKS5ub3ROdWxsKCkuZGVmYXVsdCgwKSxcbiAgICAgIG1heFVzYWdlQ291bnQ6IGludGVnZXIoXCJtYXhfdXNhZ2VfY291bnRcIikubm90TnVsbCgpLmRlZmF1bHQoMSksXG4gICAgICBwZXJzb25hbE1lc3NhZ2U6IHRleHQoXCJwZXJzb25hbF9tZXNzYWdlXCIpLFxuICAgICAgaW52aXRhdGlvbkNvbnRleHQ6IGpzb24oXCJpbnZpdGF0aW9uX2NvbnRleHRcIiksXG4gICAgICBzZWN1cml0eUxldmVsOiB0ZXh0KFwic2VjdXJpdHlfbGV2ZWxcIiksXG4gICAgICByZXF1aXJlczJmYTogYm9vbGVhbihcInJlcXVpcmVzXzJmYVwiKS5ub3ROdWxsKCkuZGVmYXVsdChmYWxzZSksXG4gICAgICBhY2NlcHRlZEF0OiB0aW1lc3RhbXAoXCJhY2NlcHRlZF9hdFwiKSxcbiAgICAgIGFjY2VwdGVkQnk6IHZhcmNoYXIoXCJhY2NlcHRlZF9ieV91c2VyX2lkXCIpLFxuICAgICAgY3JlYXRlZEF0OiB0aW1lc3RhbXAoXCJjcmVhdGVkX2F0XCIpLmRlZmF1bHROb3coKSxcbiAgICAgIHVwZGF0ZWRBdDogdGltZXN0YW1wKFwidXBkYXRlZF9hdFwiKS5kZWZhdWx0Tm93KCksXG4gICAgICBsYXN0QWNjZXNzZWRBdDogdGltZXN0YW1wKFwibGFzdF9hY2Nlc3NlZF9hdFwiKSxcbiAgICAgIGlwQWRkcmVzczogdGV4dChcImlwX2FkZHJlc3NcIiksXG4gICAgICB1c2VyQWdlbnQ6IHRleHQoXCJ1c2VyX2FnZW50XCIpXG4gICAgfSk7XG4gICAgcGFzc3dvcmRSZXNldFRva2VucyA9IHBnVGFibGUoXCJwYXNzd29yZF9yZXNldF90b2tlbnNcIiwge1xuICAgICAgaWQ6IHZhcmNoYXIoXCJpZFwiKS5wcmltYXJ5S2V5KCkuZGVmYXVsdChzcWwyYGdlbl9yYW5kb21fdXVpZCgpYCksXG4gICAgICB1c2VySWQ6IHZhcmNoYXIoXCJ1c2VyX2lkXCIpLm5vdE51bGwoKS5yZWZlcmVuY2VzKCgpID0+IHVzZXJzLmlkLCB7IG9uRGVsZXRlOiBcImNhc2NhZGVcIiB9KSxcbiAgICAgIHRva2VuOiB0ZXh0KFwidG9rZW5cIikubm90TnVsbCgpLnVuaXF1ZSgpLFxuICAgICAgdG9rZW5IYXNoOiB0ZXh0KFwidG9rZW5faGFzaFwiKS5ub3ROdWxsKCksXG4gICAgICAvLyBIYXNoZWQgdmVyc2lvbiBmb3Igc2VjdXJpdHlcbiAgICAgIGV4cGlyZXNBdDogdGltZXN0YW1wKFwiZXhwaXJlc19hdFwiKS5ub3ROdWxsKCksXG4gICAgICB1c2VkQXQ6IHRpbWVzdGFtcChcInVzZWRfYXRcIiksXG4gICAgICBpc1VzZWQ6IGJvb2xlYW4oXCJpc191c2VkXCIpLm5vdE51bGwoKS5kZWZhdWx0KGZhbHNlKSxcbiAgICAgIGlwQWRkcmVzczogdGV4dChcImlwX2FkZHJlc3NcIiksXG4gICAgICB1c2VyQWdlbnQ6IHRleHQoXCJ1c2VyX2FnZW50XCIpLFxuICAgICAgY3JlYXRlZEF0OiB0aW1lc3RhbXAoXCJjcmVhdGVkX2F0XCIpLmRlZmF1bHROb3coKVxuICAgIH0pO1xuICAgIGludml0YXRpb25BdWRpdExvZyA9IHBnVGFibGUoXCJpbnZpdGF0aW9uX2F1ZGl0X2xvZ1wiLCB7XG4gICAgICBpZDogdmFyY2hhcihcImlkXCIpLnByaW1hcnlLZXkoKS5kZWZhdWx0KHNxbDJgZ2VuX3JhbmRvbV91dWlkKClgKSxcbiAgICAgIGludml0YXRpb25JZDogdmFyY2hhcihcImludml0YXRpb25faWRcIikucmVmZXJlbmNlcygoKSA9PiBpbnZpdGF0aW9ucy5pZCwgeyBvbkRlbGV0ZTogXCJjYXNjYWRlXCIgfSksXG4gICAgICBhY3Rpb246IHRleHQoXCJhY3Rpb25cIikubm90TnVsbCgpLFxuICAgICAgcGVyZm9ybWVkQnk6IHZhcmNoYXIoXCJwZXJmb3JtZWRfYnlcIikucmVmZXJlbmNlcygoKSA9PiB1c2Vycy5pZCksXG4gICAgICBpcEFkZHJlc3M6IHRleHQoXCJpcF9hZGRyZXNzXCIpLFxuICAgICAgdXNlckFnZW50OiB0ZXh0KFwidXNlcl9hZ2VudFwiKSxcbiAgICAgIGRldGFpbHM6IGpzb24oXCJkZXRhaWxzXCIpLFxuICAgICAgcHJldmlvdXNTdGF0dXM6IGludml0YXRpb25TdGF0dXNFbnVtKFwicHJldmlvdXNfc3RhdHVzXCIpLFxuICAgICAgbmV3U3RhdHVzOiBpbnZpdGF0aW9uU3RhdHVzRW51bShcIm5ld19zdGF0dXNcIiksXG4gICAgICBjcmVhdGVkQXQ6IHRpbWVzdGFtcChcImNyZWF0ZWRfYXRcIikuZGVmYXVsdE5vdygpXG4gICAgfSk7XG4gICAgcmVzb3VyY2VUeXBlRW51bSA9IHBnRW51bShcInJlc291cmNlX3R5cGVcIiwgW1xuICAgICAgXCJ1c2VyXCIsXG4gICAgICBcInVzZXJzXCIsXG4gICAgICAvLyBBZGRlZCB0byBoYW5kbGUgZXhpc3RpbmcgcHJvZHVjdGlvbiBkYXRhXG4gICAgICBcIm9yZ2FuaXphdGlvblwiLFxuICAgICAgXCJidWlsZGluZ1wiLFxuICAgICAgXCJyZXNpZGVuY2VcIixcbiAgICAgIFwiYmlsbFwiLFxuICAgICAgXCJidWRnZXRcIixcbiAgICAgIFwibWFpbnRlbmFuY2VfcmVxdWVzdFwiLFxuICAgICAgXCJkb2N1bWVudFwiLFxuICAgICAgXCJhdWRpdF9sb2dcIixcbiAgICAgIFwic3lzdGVtX3NldHRpbmdzXCIsXG4gICAgICBcImRldmVsb3BtZW50X3BpbGxhclwiLFxuICAgICAgXCJxdWFsaXR5X21ldHJpY1wiLFxuICAgICAgXCJmZWF0dXJlXCIsXG4gICAgICBcImFjdGlvbmFibGVfaXRlbVwiLFxuICAgICAgXCJpbXByb3ZlbWVudF9zdWdnZXN0aW9uXCJcbiAgICBdKTtcbiAgICBhY3Rpb25FbnVtID0gcGdFbnVtKFwiYWN0aW9uXCIsIFtcbiAgICAgIFwicmVhZFwiLFxuICAgICAgXCJjcmVhdGVcIixcbiAgICAgIFwidXBkYXRlXCIsXG4gICAgICBcImRlbGV0ZVwiLFxuICAgICAgXCJtYW5hZ2VcIixcbiAgICAgIFwiYXBwcm92ZVwiLFxuICAgICAgXCJhc3NpZ25cIixcbiAgICAgIFwic2hhcmVcIixcbiAgICAgIFwiZXhwb3J0XCIsXG4gICAgICBcImJhY2t1cFwiLFxuICAgICAgXCJyZXN0b3JlXCJcbiAgICBdKTtcbiAgICBwZXJtaXNzaW9ucyA9IHBnVGFibGUoXCJwZXJtaXNzaW9uc1wiLCB7XG4gICAgICBpZDogdXVpZChcImlkXCIpLnByaW1hcnlLZXkoKS5kZWZhdWx0KHNxbDJgZ2VuX3JhbmRvbV91dWlkKClgKSxcbiAgICAgIG5hbWU6IHRleHQoXCJuYW1lXCIpLm5vdE51bGwoKS51bmlxdWUoKSxcbiAgICAgIGRpc3BsYXlOYW1lOiB0ZXh0KFwiZGlzcGxheV9uYW1lXCIpLm5vdE51bGwoKSxcbiAgICAgIGRlc2NyaXB0aW9uOiB0ZXh0KFwiZGVzY3JpcHRpb25cIiksXG4gICAgICByZXNvdXJjZVR5cGU6IHJlc291cmNlVHlwZUVudW0oXCJyZXNvdXJjZV90eXBlXCIpLm5vdE51bGwoKSxcbiAgICAgIGFjdGlvbjogYWN0aW9uRW51bShcImFjdGlvblwiKS5ub3ROdWxsKCksXG4gICAgICBjb25kaXRpb25zOiBqc29uKFwiY29uZGl0aW9uc1wiKSxcbiAgICAgIGlzQWN0aXZlOiBib29sZWFuKFwiaXNfYWN0aXZlXCIpLm5vdE51bGwoKS5kZWZhdWx0KHRydWUpLFxuICAgICAgY3JlYXRlZEF0OiB0aW1lc3RhbXAoXCJjcmVhdGVkX2F0XCIpLmRlZmF1bHROb3coKSxcbiAgICAgIHVwZGF0ZWRBdDogdGltZXN0YW1wKFwidXBkYXRlZF9hdFwiKS5kZWZhdWx0Tm93KClcbiAgICB9KTtcbiAgICByb2xlUGVybWlzc2lvbnMgPSBwZ1RhYmxlKFwicm9sZV9wZXJtaXNzaW9uc1wiLCB7XG4gICAgICBpZDogdXVpZChcImlkXCIpLnByaW1hcnlLZXkoKS5kZWZhdWx0KHNxbDJgZ2VuX3JhbmRvbV91dWlkKClgKSxcbiAgICAgIHJvbGU6IHVzZXJSb2xlRW51bShcInJvbGVcIikubm90TnVsbCgpLFxuICAgICAgcGVybWlzc2lvbklkOiB1dWlkKFwicGVybWlzc2lvbl9pZFwiKS5ub3ROdWxsKCkucmVmZXJlbmNlcygoKSA9PiBwZXJtaXNzaW9ucy5pZCksXG4gICAgICBncmFudGVkQnk6IHZhcmNoYXIoXCJncmFudGVkX2J5XCIpLnJlZmVyZW5jZXMoKCkgPT4gdXNlcnMuaWQpLFxuICAgICAgZ3JhbnRlZEF0OiB0aW1lc3RhbXAoXCJncmFudGVkX2F0XCIpLmRlZmF1bHROb3coKSxcbiAgICAgIGNyZWF0ZWRBdDogdGltZXN0YW1wKFwiY3JlYXRlZF9hdFwiKS5kZWZhdWx0Tm93KClcbiAgICB9KTtcbiAgICB1c2VyUGVybWlzc2lvbnMgPSBwZ1RhYmxlKFwidXNlcl9wZXJtaXNzaW9uc1wiLCB7XG4gICAgICBpZDogdXVpZChcImlkXCIpLnByaW1hcnlLZXkoKS5kZWZhdWx0KHNxbDJgZ2VuX3JhbmRvbV91dWlkKClgKSxcbiAgICAgIHVzZXJJZDogdmFyY2hhcihcInVzZXJfaWRcIikubm90TnVsbCgpLnJlZmVyZW5jZXMoKCkgPT4gdXNlcnMuaWQpLFxuICAgICAgcGVybWlzc2lvbklkOiB1dWlkKFwicGVybWlzc2lvbl9pZFwiKS5ub3ROdWxsKCkucmVmZXJlbmNlcygoKSA9PiBwZXJtaXNzaW9ucy5pZCksXG4gICAgICBncmFudGVkOiBib29sZWFuKFwiZ3JhbnRlZFwiKS5ub3ROdWxsKCkuZGVmYXVsdCh0cnVlKSxcbiAgICAgIGNyZWF0ZWRBdDogdGltZXN0YW1wKFwiY3JlYXRlZF9hdFwiKS5kZWZhdWx0Tm93KCksXG4gICAgICB1cGRhdGVkQXQ6IHRpbWVzdGFtcChcInVwZGF0ZWRfYXRcIikuZGVmYXVsdE5vdygpXG4gICAgfSk7XG4gICAgaW5zZXJ0VXNlclNjaGVtYSA9IHoyLm9iamVjdCh7XG4gICAgICB1c2VybmFtZTogejIuc3RyaW5nKCkubWluKDEpLm1heCg1MCwgXCJVc2VybmFtZSBtdXN0IGJlIGJldHdlZW4gMS01MCBjaGFyYWN0ZXJzXCIpLFxuICAgICAgZW1haWw6IHoyLnN0cmluZygpLmVtYWlsKFwiTXVzdCBiZSBhIHZhbGlkIGVtYWlsIGFkZHJlc3NcIikudG9Mb3dlckNhc2UoKSxcbiAgICAgIHBhc3N3b3JkOiB6Mi5zdHJpbmcoKS5taW4oOCwgXCJQYXNzd29yZCBtdXN0IGJlIGF0IGxlYXN0IDggY2hhcmFjdGVyc1wiKS5yZWdleChcbiAgICAgICAgL14oPz0uKlthLXpdKSg/PS4qW0EtWl0pKD89LipcXGQpKD89LipbIUAjJCVeJiooKSwuP1wiOnt9fDw+XSkvLFxuICAgICAgICBcIlBhc3N3b3JkIG11c3QgY29udGFpbiB1cHBlcmNhc2UsIGxvd2VyY2FzZSwgbnVtYmVyLCBhbmQgc3BlY2lhbCBjaGFyYWN0ZXJcIlxuICAgICAgKSxcbiAgICAgIGZpcnN0TmFtZTogejIuc3RyaW5nKCkubWluKDEpLm1heCgxMDAsIFwiRmlyc3QgbmFtZSBtdXN0IGJlIDEtMTAwIGNoYXJhY3RlcnNcIikudHJpbSgpLFxuICAgICAgbGFzdE5hbWU6IHoyLnN0cmluZygpLm1pbigxKS5tYXgoMTAwLCBcIkxhc3QgbmFtZSBtdXN0IGJlIDEtMTAwIGNoYXJhY3RlcnNcIikudHJpbSgpLFxuICAgICAgcGhvbmU6IHoyLnN0cmluZygpLm9wdGlvbmFsKCkucmVmaW5lKFxuICAgICAgICAocGhvbmUpID0+ICFwaG9uZSB8fCAvXihcXCsxXFxzPyk/KFxcKFswLTldezN9XFwpfFswLTldezN9KVtcXHMuLV0/WzAtOV17M31bXFxzLi1dP1swLTldezR9JC8udGVzdChwaG9uZSksXG4gICAgICAgIFwiUGhvbmUgbXVzdCBiZSBhIHZhbGlkIE5vcnRoIEFtZXJpY2FuIGZvcm1hdCAoZS5nLiwgNTE0LTEyMy00NTY3IG9yICg1MTQpIDEyMy00NTY3KVwiXG4gICAgICApLFxuICAgICAgcHJvZmlsZUltYWdlOiB6Mi5zdHJpbmcoKS5vcHRpb25hbCgpLFxuICAgICAgbGFuZ3VhZ2U6IHoyLnN0cmluZygpLmRlZmF1bHQoXCJmclwiKSxcbiAgICAgIHJvbGU6IHoyLmVudW0oW1xuICAgICAgICBcImFkbWluXCIsXG4gICAgICAgIFwibWFuYWdlclwiLFxuICAgICAgICBcInRlbmFudFwiLFxuICAgICAgICBcInJlc2lkZW50XCIsXG4gICAgICAgIFwiZGVtb19tYW5hZ2VyXCIsXG4gICAgICAgIFwiZGVtb190ZW5hbnRcIixcbiAgICAgICAgXCJkZW1vX3Jlc2lkZW50XCJcbiAgICAgIF0pLmRlZmF1bHQoXCJ0ZW5hbnRcIilcbiAgICB9KTtcbiAgICBpbnNlcnRPcmdhbml6YXRpb25TY2hlbWEgPSB6Mi5vYmplY3Qoe1xuICAgICAgbmFtZTogejIuc3RyaW5nKCkubWluKDEpLFxuICAgICAgdHlwZTogejIuc3RyaW5nKCksXG4gICAgICBhZGRyZXNzOiB6Mi5zdHJpbmcoKSxcbiAgICAgIGNpdHk6IHoyLnN0cmluZygpLFxuICAgICAgcHJvdmluY2U6IHoyLnN0cmluZygpLmRlZmF1bHQoXCJRQ1wiKSxcbiAgICAgIHBvc3RhbENvZGU6IHoyLnN0cmluZygpLFxuICAgICAgcGhvbmU6IHoyLnN0cmluZygpLm9wdGlvbmFsKCksXG4gICAgICBlbWFpbDogejIuc3RyaW5nKCkuZW1haWwoKS5vcHRpb25hbCgpLFxuICAgICAgd2Vic2l0ZTogejIuc3RyaW5nKCkudXJsKCkub3B0aW9uYWwoKSxcbiAgICAgIHJlZ2lzdHJhdGlvbk51bWJlcjogejIuc3RyaW5nKCkub3B0aW9uYWwoKVxuICAgIH0pO1xuICAgIGluc2VydFVzZXJPcmdhbml6YXRpb25TY2hlbWEgPSB6Mi5vYmplY3Qoe1xuICAgICAgdXNlcklkOiB6Mi5zdHJpbmcoKS51dWlkKCksXG4gICAgICBvcmdhbml6YXRpb25JZDogejIuc3RyaW5nKCkudXVpZCgpLFxuICAgICAgb3JnYW5pemF0aW9uUm9sZTogejIuZW51bShbXG4gICAgICAgIFwiYWRtaW5cIixcbiAgICAgICAgXCJtYW5hZ2VyXCIsXG4gICAgICAgIFwidGVuYW50XCIsXG4gICAgICAgIFwicmVzaWRlbnRcIixcbiAgICAgICAgXCJkZW1vX21hbmFnZXJcIixcbiAgICAgICAgXCJkZW1vX3RlbmFudFwiLFxuICAgICAgICBcImRlbW9fcmVzaWRlbnRcIlxuICAgICAgXSkuZGVmYXVsdChcInRlbmFudFwiKSxcbiAgICAgIGNhbkFjY2Vzc0FsbE9yZ2FuaXphdGlvbnM6IHoyLmJvb2xlYW4oKS5kZWZhdWx0KGZhbHNlKVxuICAgIH0pO1xuICAgIGluc2VydEludml0YXRpb25TY2hlbWEgPSB6Mi5vYmplY3Qoe1xuICAgICAgb3JnYW5pemF0aW9uSWQ6IHoyLnN0cmluZygpLnV1aWQoKS5vcHRpb25hbCgpLFxuICAgICAgcmVzaWRlbmNlSWQ6IHoyLnVuaW9uKFt6Mi5zdHJpbmcoKS51dWlkKCksIHoyLm51bGwoKV0pLm9wdGlvbmFsKCksXG4gICAgICBlbWFpbDogejIuc3RyaW5nKCkuZW1haWwoKSxcbiAgICAgIHJvbGU6IHoyLmVudW0oW1xuICAgICAgICBcImFkbWluXCIsXG4gICAgICAgIFwibWFuYWdlclwiLFxuICAgICAgICBcInRlbmFudFwiLFxuICAgICAgICBcInJlc2lkZW50XCIsXG4gICAgICAgIFwiZGVtb19tYW5hZ2VyXCIsXG4gICAgICAgIFwiZGVtb190ZW5hbnRcIixcbiAgICAgICAgXCJkZW1vX3Jlc2lkZW50XCJcbiAgICAgIF0pLFxuICAgICAgaW52aXRlZEJ5VXNlcklkOiB6Mi5zdHJpbmcoKS51dWlkKCksXG4gICAgICBleHBpcmVzQXQ6IHoyLnVuaW9uKFtcbiAgICAgICAgejIuZGF0ZSgpLFxuICAgICAgICB6Mi5zdHJpbmcoKS5kYXRldGltZSgpLnRyYW5zZm9ybSgoc3RyKSA9PiBuZXcgRGF0ZShzdHIpKVxuICAgICAgXSlcbiAgICB9KTtcbiAgICBpbnNlcnRQYXNzd29yZFJlc2V0VG9rZW5TY2hlbWEgPSB6Mi5vYmplY3Qoe1xuICAgICAgdXNlcklkOiB6Mi5zdHJpbmcoKS51dWlkKCksXG4gICAgICB0b2tlbjogejIuc3RyaW5nKCksXG4gICAgICB0b2tlbkhhc2g6IHoyLnN0cmluZygpLFxuICAgICAgZXhwaXJlc0F0OiB6Mi5kYXRlKCksXG4gICAgICBpcEFkZHJlc3M6IHoyLnN0cmluZygpLm9wdGlvbmFsKCksXG4gICAgICB1c2VyQWdlbnQ6IHoyLnN0cmluZygpLm9wdGlvbmFsKClcbiAgICB9KTtcbiAgICBpbnNlcnRJbnZpdGF0aW9uQXVkaXRMb2dTY2hlbWEgPSB6Mi5vYmplY3Qoe1xuICAgICAgaW52aXRhdGlvbklkOiB6Mi5zdHJpbmcoKS51dWlkKCksXG4gICAgICBhY3Rpb246IHoyLnN0cmluZygpLFxuICAgICAgcGVyZm9ybWVkQnk6IHoyLnN0cmluZygpLnV1aWQoKSxcbiAgICAgIGlwQWRkcmVzczogejIuc3RyaW5nKCkub3B0aW9uYWwoKSxcbiAgICAgIHVzZXJBZ2VudDogejIuc3RyaW5nKCkub3B0aW9uYWwoKSxcbiAgICAgIGRldGFpbHM6IHoyLnJlY29yZCh6Mi5zdHJpbmcoKSwgejIuYW55KCkpLm9wdGlvbmFsKCksXG4gICAgICBwcmV2aW91c1N0YXR1czogejIuc3RyaW5nKCkub3B0aW9uYWwoKSxcbiAgICAgIG5ld1N0YXR1czogejIuc3RyaW5nKCkub3B0aW9uYWwoKVxuICAgIH0pO1xuICAgIGluc2VydFBlcm1pc3Npb25TY2hlbWEgPSB6Mi5vYmplY3Qoe1xuICAgICAgbmFtZTogejIuc3RyaW5nKCksXG4gICAgICBkaXNwbGF5TmFtZTogejIuc3RyaW5nKCksXG4gICAgICBkZXNjcmlwdGlvbjogejIuc3RyaW5nKCkub3B0aW9uYWwoKSxcbiAgICAgIHJlc291cmNlVHlwZTogejIuc3RyaW5nKCksXG4gICAgICBhY3Rpb246IHoyLnN0cmluZygpLFxuICAgICAgY29uZGl0aW9uczogejIucmVjb3JkKHoyLnN0cmluZygpLCB6Mi5hbnkoKSkub3B0aW9uYWwoKSxcbiAgICAgIGlzQWN0aXZlOiB6Mi5ib29sZWFuKCkuZGVmYXVsdCh0cnVlKVxuICAgIH0pO1xuICAgIGluc2VydFJvbGVQZXJtaXNzaW9uU2NoZW1hID0gejIub2JqZWN0KHtcbiAgICAgIHJvbGU6IHoyLmVudW0oW1xuICAgICAgICBcImFkbWluXCIsXG4gICAgICAgIFwibWFuYWdlclwiLFxuICAgICAgICBcInRlbmFudFwiLFxuICAgICAgICBcInJlc2lkZW50XCIsXG4gICAgICAgIFwiZGVtb19tYW5hZ2VyXCIsXG4gICAgICAgIFwiZGVtb190ZW5hbnRcIixcbiAgICAgICAgXCJkZW1vX3Jlc2lkZW50XCJcbiAgICAgIF0pLFxuICAgICAgcGVybWlzc2lvbklkOiB6Mi5zdHJpbmcoKS51dWlkKClcbiAgICB9KTtcbiAgICBpbnNlcnRVc2VyUGVybWlzc2lvblNjaGVtYSA9IHoyLm9iamVjdCh7XG4gICAgICB1c2VySWQ6IHoyLnN0cmluZygpLnV1aWQoKSxcbiAgICAgIHBlcm1pc3Npb25JZDogejIuc3RyaW5nKCkudXVpZCgpLFxuICAgICAgZ3JhbnRlZDogejIuYm9vbGVhbigpLmRlZmF1bHQodHJ1ZSlcbiAgICB9KTtcbiAgfVxufSk7XG5cbi8vIHNoYXJlZC9zY2hlbWFzL3Byb3BlcnR5LnRzXG5pbXBvcnQgeyBzcWwgYXMgc3FsMyB9IGZyb20gXCJkcml6emxlLW9ybVwiO1xuaW1wb3J0IHtcbiAgcGdUYWJsZSBhcyBwZ1RhYmxlMixcbiAgdGV4dCBhcyB0ZXh0MixcbiAgdGltZXN0YW1wIGFzIHRpbWVzdGFtcDIsXG4gIGpzb25iLFxuICB1dWlkIGFzIHV1aWQyLFxuICBwZ0VudW0gYXMgcGdFbnVtMixcbiAgYm9vbGVhbiBhcyBib29sZWFuMixcbiAgaW50ZWdlciBhcyBpbnRlZ2VyMixcbiAgZGVjaW1hbCxcbiAgbnVtZXJpYyxcbiAgZGF0ZSBhcyBkYXRlMixcbiAgdmFyY2hhciBhcyB2YXJjaGFyMlxufSBmcm9tIFwiZHJpenpsZS1vcm0vcGctY29yZVwiO1xuaW1wb3J0IHsgeiBhcyB6MyB9IGZyb20gXCJ6b2RcIjtcbnZhciBidWlsZGluZ1R5cGVFbnVtLCBjb250YWN0RW50aXR5RW51bSwgY29udGFjdENhdGVnb3J5RW51bSwgYm9va2luZ1N0YXR1c0VudW0sIGJ1aWxkaW5ncywgcmVzaWRlbmNlcywgdXNlclJlc2lkZW5jZXMsIGNvbnRhY3RzLCBjb21tb25TcGFjZXMsIGJvb2tpbmdzLCB1c2VyQm9va2luZ1Jlc3RyaWN0aW9ucywgdXNlclRpbWVMaW1pdHMsIGluc2VydEJ1aWxkaW5nU2NoZW1hLCBpbnNlcnRSZXNpZGVuY2VTY2hlbWEsIGluc2VydFVzZXJSZXNpZGVuY2VTY2hlbWEsIGluc2VydENvbnRhY3RTY2hlbWEsIGluc2VydENvbW1vblNwYWNlU2NoZW1hLCBpbnNlcnRCb29raW5nU2NoZW1hLCBpbnNlcnRVc2VyQm9va2luZ1Jlc3RyaWN0aW9uU2NoZW1hLCBpbnNlcnRVc2VyVGltZUxpbWl0U2NoZW1hO1xudmFyIGluaXRfcHJvcGVydHkgPSBfX2VzbSh7XG4gIFwic2hhcmVkL3NjaGVtYXMvcHJvcGVydHkudHNcIigpIHtcbiAgICBpbml0X2NvcmUoKTtcbiAgICBidWlsZGluZ1R5cGVFbnVtID0gcGdFbnVtMihcImJ1aWxkaW5nX3R5cGVcIiwgW1wiYXBhcnRtZW50XCIsIFwiY29uZG9cIiwgXCJyZW50YWxcIl0pO1xuICAgIGNvbnRhY3RFbnRpdHlFbnVtID0gcGdFbnVtMihcImNvbnRhY3RfZW50aXR5XCIsIFtcbiAgICAgIFwib3JnYW5pemF0aW9uXCIsXG4gICAgICBcImJ1aWxkaW5nXCIsXG4gICAgICBcInJlc2lkZW5jZVwiXG4gICAgXSk7XG4gICAgY29udGFjdENhdGVnb3J5RW51bSA9IHBnRW51bTIoXCJjb250YWN0X2NhdGVnb3J5XCIsIFtcbiAgICAgIFwicmVzaWRlbnRcIixcbiAgICAgIFwibWFuYWdlclwiLFxuICAgICAgXCJ0ZW5hbnRcIixcbiAgICAgIFwibWFpbnRlbmFuY2VcIixcbiAgICAgIFwiZW1lcmdlbmN5XCIsXG4gICAgICBcIm90aGVyXCJcbiAgICBdKTtcbiAgICBib29raW5nU3RhdHVzRW51bSA9IHBnRW51bTIoXCJib29raW5nX3N0YXR1c1wiLCBbXCJjb25maXJtZWRcIiwgXCJjYW5jZWxsZWRcIl0pO1xuICAgIGJ1aWxkaW5ncyA9IHBnVGFibGUyKFwiYnVpbGRpbmdzXCIsIHtcbiAgICAgIGlkOiB2YXJjaGFyMihcImlkXCIpLnByaW1hcnlLZXkoKS5kZWZhdWx0KHNxbDNgZ2VuX3JhbmRvbV91dWlkKClgKSxcbiAgICAgIG9yZ2FuaXphdGlvbklkOiB2YXJjaGFyMihcIm9yZ2FuaXphdGlvbl9pZFwiKS5ub3ROdWxsKCkucmVmZXJlbmNlcygoKSA9PiBvcmdhbml6YXRpb25zLmlkLCB7IG9uRGVsZXRlOiBcImNhc2NhZGVcIiB9KSxcbiAgICAgIG5hbWU6IHRleHQyKFwibmFtZVwiKS5ub3ROdWxsKCksXG4gICAgICBhZGRyZXNzOiB0ZXh0MihcImFkZHJlc3NcIikubm90TnVsbCgpLFxuICAgICAgY2l0eTogdGV4dDIoXCJjaXR5XCIpLm5vdE51bGwoKSxcbiAgICAgIHByb3ZpbmNlOiB0ZXh0MihcInByb3ZpbmNlXCIpLm5vdE51bGwoKS5kZWZhdWx0KFwiUUNcIiksXG4gICAgICBwb3N0YWxDb2RlOiB0ZXh0MihcInBvc3RhbF9jb2RlXCIpLm5vdE51bGwoKSxcbiAgICAgIGJ1aWxkaW5nVHlwZTogYnVpbGRpbmdUeXBlRW51bShcImJ1aWxkaW5nX3R5cGVcIikubm90TnVsbCgpLFxuICAgICAgeWVhckJ1aWx0OiBpbnRlZ2VyMihcInllYXJfYnVpbHRcIiksXG4gICAgICB0b3RhbFVuaXRzOiBpbnRlZ2VyMihcInRvdGFsX3VuaXRzXCIpLm5vdE51bGwoKSxcbiAgICAgIHRvdGFsRmxvb3JzOiBpbnRlZ2VyMihcInRvdGFsX2Zsb29yc1wiKSxcbiAgICAgIHBhcmtpbmdTcGFjZXM6IGludGVnZXIyKFwicGFya2luZ19zcGFjZXNcIiksXG4gICAgICBzdG9yYWdlU3BhY2VzOiBpbnRlZ2VyMihcInN0b3JhZ2Vfc3BhY2VzXCIpLFxuICAgICAgYW1lbml0aWVzOiBqc29uYihcImFtZW5pdGllc1wiKSxcbiAgICAgIC8vIEFycmF5IG9mIGFtZW5pdGllc1xuICAgICAgbWFuYWdlbWVudENvbXBhbnk6IHRleHQyKFwibWFuYWdlbWVudF9jb21wYW55XCIpLFxuICAgICAgYmFua0FjY291bnROdW1iZXI6IHRleHQyKFwiYmFua19hY2NvdW50X251bWJlclwiKSxcbiAgICAgIGJhbmtBY2NvdW50Tm90ZXM6IHRleHQyKFwiYmFua19hY2NvdW50X25vdGVzXCIpLFxuICAgICAgLy8gRm9yIHJlY29uY2lsaWF0aW9uIG5vdGVzIHdoZW4gdXBkYXRpbmcgYWNjb3VudCBudW1iZXJcbiAgICAgIGJhbmtBY2NvdW50VXBkYXRlZEF0OiB0aW1lc3RhbXAyKFwiYmFua19hY2NvdW50X3VwZGF0ZWRfYXRcIiksXG4gICAgICBiYW5rQWNjb3VudFN0YXJ0RGF0ZTogdGltZXN0YW1wMihcImJhbmtfYWNjb3VudF9zdGFydF9kYXRlXCIpLFxuICAgICAgLy8gRGF0ZSB3aGVuIGFjY291bnQgc3RhcnRlZCB0cmFja2luZ1xuICAgICAgYmFua0FjY291bnRTdGFydEFtb3VudDogbnVtZXJpYyhcImJhbmtfYWNjb3VudF9zdGFydF9hbW91bnRcIiwgeyBwcmVjaXNpb246IDEwLCBzY2FsZTogMiB9KSxcbiAgICAgIC8vIFN0YXJ0aW5nIGJhbGFuY2VcbiAgICAgIGJhbmtBY2NvdW50TWluaW11bXM6IHRleHQyKFwiYmFua19hY2NvdW50X21pbmltdW1zXCIpLFxuICAgICAgLy8gSlNPTiBzdHJpbmcgb2YgbWluaW11bSBiYWxhbmNlIHNldHRpbmdzXG4gICAgICBpbmZsYXRpb25TZXR0aW5nczogdGV4dDIoXCJpbmZsYXRpb25fc2V0dGluZ3NcIiksXG4gICAgICAvLyBKU09OIHN0cmluZyBvZiBpbmZsYXRpb24gY29uZmlndXJhdGlvbiBieSBjYXRlZ29yeVxuICAgICAgaXNBY3RpdmU6IGJvb2xlYW4yKFwiaXNfYWN0aXZlXCIpLm5vdE51bGwoKS5kZWZhdWx0KHRydWUpLFxuICAgICAgY3JlYXRlZEF0OiB0aW1lc3RhbXAyKFwiY3JlYXRlZF9hdFwiKS5kZWZhdWx0Tm93KCksXG4gICAgICB1cGRhdGVkQXQ6IHRpbWVzdGFtcDIoXCJ1cGRhdGVkX2F0XCIpLmRlZmF1bHROb3coKVxuICAgIH0pO1xuICAgIHJlc2lkZW5jZXMgPSBwZ1RhYmxlMihcInJlc2lkZW5jZXNcIiwge1xuICAgICAgaWQ6IHZhcmNoYXIyKFwiaWRcIikucHJpbWFyeUtleSgpLmRlZmF1bHQoc3FsM2BnZW5fcmFuZG9tX3V1aWQoKWApLFxuICAgICAgYnVpbGRpbmdJZDogdmFyY2hhcjIoXCJidWlsZGluZ19pZFwiKS5ub3ROdWxsKCkucmVmZXJlbmNlcygoKSA9PiBidWlsZGluZ3MuaWQsIHsgb25EZWxldGU6IFwiY2FzY2FkZVwiIH0pLFxuICAgICAgdW5pdE51bWJlcjogdGV4dDIoXCJ1bml0X251bWJlclwiKS5ub3ROdWxsKCksXG4gICAgICBmbG9vcjogaW50ZWdlcjIoXCJmbG9vclwiKSxcbiAgICAgIHNxdWFyZUZvb3RhZ2U6IGRlY2ltYWwoXCJzcXVhcmVfZm9vdGFnZVwiLCB7IHByZWNpc2lvbjogOCwgc2NhbGU6IDIgfSksXG4gICAgICBiZWRyb29tczogaW50ZWdlcjIoXCJiZWRyb29tc1wiKSxcbiAgICAgIGJhdGhyb29tczogZGVjaW1hbChcImJhdGhyb29tc1wiLCB7IHByZWNpc2lvbjogMywgc2NhbGU6IDEgfSksXG4gICAgICBiYWxjb255OiBib29sZWFuMihcImJhbGNvbnlcIikuZGVmYXVsdChmYWxzZSksXG4gICAgICBwYXJraW5nU3BhY2VOdW1iZXJzOiB0ZXh0MihcInBhcmtpbmdfc3BhY2VfbnVtYmVyc1wiKS5hcnJheSgpLFxuICAgICAgc3RvcmFnZVNwYWNlTnVtYmVyczogdGV4dDIoXCJzdG9yYWdlX3NwYWNlX251bWJlcnNcIikuYXJyYXkoKSxcbiAgICAgIG93bmVyc2hpcFBlcmNlbnRhZ2U6IGRlY2ltYWwoXCJvd25lcnNoaXBfcGVyY2VudGFnZVwiLCB7IHByZWNpc2lvbjogNSwgc2NhbGU6IDIgfSksXG4gICAgICAvLyBGb3IgY29uZG9zLCAwLTEwMCBzY2FsZVxuICAgICAgbW9udGhseUZlZXM6IGRlY2ltYWwoXCJtb250aGx5X2ZlZXNcIiwgeyBwcmVjaXNpb246IDEwLCBzY2FsZTogMiB9KSxcbiAgICAgIGlzQWN0aXZlOiBib29sZWFuMihcImlzX2FjdGl2ZVwiKS5ub3ROdWxsKCkuZGVmYXVsdCh0cnVlKSxcbiAgICAgIGNyZWF0ZWRBdDogdGltZXN0YW1wMihcImNyZWF0ZWRfYXRcIikuZGVmYXVsdE5vdygpLFxuICAgICAgdXBkYXRlZEF0OiB0aW1lc3RhbXAyKFwidXBkYXRlZF9hdFwiKS5kZWZhdWx0Tm93KClcbiAgICB9KTtcbiAgICB1c2VyUmVzaWRlbmNlcyA9IHBnVGFibGUyKFwidXNlcl9yZXNpZGVuY2VzXCIsIHtcbiAgICAgIGlkOiB2YXJjaGFyMihcImlkXCIpLnByaW1hcnlLZXkoKS5kZWZhdWx0KHNxbDNgZ2VuX3JhbmRvbV91dWlkKClgKSxcbiAgICAgIHVzZXJJZDogdmFyY2hhcjIoXCJ1c2VyX2lkXCIpLm5vdE51bGwoKS5yZWZlcmVuY2VzKCgpID0+IHVzZXJzLmlkLCB7IG9uRGVsZXRlOiBcImNhc2NhZGVcIiB9KSxcbiAgICAgIHJlc2lkZW5jZUlkOiB2YXJjaGFyMihcInJlc2lkZW5jZV9pZFwiKS5ub3ROdWxsKCkucmVmZXJlbmNlcygoKSA9PiByZXNpZGVuY2VzLmlkLCB7IG9uRGVsZXRlOiBcImNhc2NhZGVcIiB9KSxcbiAgICAgIHJlbGF0aW9uc2hpcFR5cGU6IHRleHQyKFwicmVsYXRpb25zaGlwX3R5cGVcIikubm90TnVsbCgpLFxuICAgICAgLy8gJ293bmVyJywgJ3RlbmFudCcsICdvY2N1cGFudCdcbiAgICAgIHN0YXJ0RGF0ZTogZGF0ZTIoXCJzdGFydF9kYXRlXCIpLm5vdE51bGwoKSxcbiAgICAgIGVuZERhdGU6IGRhdGUyKFwiZW5kX2RhdGVcIiksXG4gICAgICBpc0FjdGl2ZTogYm9vbGVhbjIoXCJpc19hY3RpdmVcIikubm90TnVsbCgpLmRlZmF1bHQodHJ1ZSksXG4gICAgICBjcmVhdGVkQXQ6IHRpbWVzdGFtcDIoXCJjcmVhdGVkX2F0XCIpLmRlZmF1bHROb3coKSxcbiAgICAgIHVwZGF0ZWRBdDogdGltZXN0YW1wMihcInVwZGF0ZWRfYXRcIikuZGVmYXVsdE5vdygpXG4gICAgfSk7XG4gICAgY29udGFjdHMgPSBwZ1RhYmxlMihcImNvbnRhY3RzXCIsIHtcbiAgICAgIGlkOiB1dWlkMihcImlkXCIpLnByaW1hcnlLZXkoKS5kZWZhdWx0KHNxbDNgZ2VuX3JhbmRvbV91dWlkKClgKSxcbiAgICAgIG5hbWU6IHRleHQyKFwibmFtZVwiKS5ub3ROdWxsKCksXG4gICAgICBlbWFpbDogdGV4dDIoXCJlbWFpbFwiKSxcbiAgICAgIHBob25lOiB0ZXh0MihcInBob25lXCIpLFxuICAgICAgZW50aXR5OiBjb250YWN0RW50aXR5RW51bShcImVudGl0eVwiKS5ub3ROdWxsKCksXG4gICAgICBlbnRpdHlJZDogdmFyY2hhcjIoXCJlbnRpdHlfaWRcIikubm90TnVsbCgpLFxuICAgICAgY29udGFjdENhdGVnb3J5OiBjb250YWN0Q2F0ZWdvcnlFbnVtKFwiY29udGFjdF9jYXRlZ29yeVwiKS5ub3ROdWxsKCksXG4gICAgICBpc0FjdGl2ZTogYm9vbGVhbjIoXCJpc19hY3RpdmVcIikubm90TnVsbCgpLmRlZmF1bHQodHJ1ZSksXG4gICAgICBjcmVhdGVkQXQ6IHRpbWVzdGFtcDIoXCJjcmVhdGVkX2F0XCIpLmRlZmF1bHROb3coKSxcbiAgICAgIHVwZGF0ZWRBdDogdGltZXN0YW1wMihcInVwZGF0ZWRfYXRcIikuZGVmYXVsdE5vdygpXG4gICAgfSk7XG4gICAgY29tbW9uU3BhY2VzID0gcGdUYWJsZTIoXCJjb21tb25fc3BhY2VzXCIsIHtcbiAgICAgIGlkOiB2YXJjaGFyMihcImlkXCIpLnByaW1hcnlLZXkoKS5kZWZhdWx0KHNxbDNgZ2VuX3JhbmRvbV91dWlkKClgKSxcbiAgICAgIG5hbWU6IHZhcmNoYXIyKFwibmFtZVwiLCB7IGxlbmd0aDogMjU1IH0pLm5vdE51bGwoKSxcbiAgICAgIGRlc2NyaXB0aW9uOiB0ZXh0MihcImRlc2NyaXB0aW9uXCIpLFxuICAgICAgYnVpbGRpbmdJZDogdmFyY2hhcjIoXCJidWlsZGluZ19pZFwiKS5ub3ROdWxsKCkucmVmZXJlbmNlcygoKSA9PiBidWlsZGluZ3MuaWQsIHsgb25EZWxldGU6IFwiY2FzY2FkZVwiIH0pLFxuICAgICAgaXNSZXNlcnZhYmxlOiBib29sZWFuMihcImlzX3Jlc2VydmFibGVcIikubm90TnVsbCgpLmRlZmF1bHQoZmFsc2UpLFxuICAgICAgY2FwYWNpdHk6IGludGVnZXIyKFwiY2FwYWNpdHlcIiksXG4gICAgICBjb250YWN0UGVyc29uSWQ6IHZhcmNoYXIyKFwiY29udGFjdF9wZXJzb25faWRcIikucmVmZXJlbmNlcygoKSA9PiB1c2Vycy5pZCwgeyBvbkRlbGV0ZTogXCJzZXQgbnVsbFwiIH0pLFxuICAgICAgb3BlbmluZ0hvdXJzOiBqc29uYihcIm9wZW5pbmdfaG91cnNcIiksXG4gICAgICBib29raW5nUnVsZXM6IHRleHQyKFwiYm9va2luZ19ydWxlc1wiKSxcbiAgICAgIGNyZWF0ZWRBdDogdGltZXN0YW1wMihcImNyZWF0ZWRfYXRcIikuZGVmYXVsdE5vdygpLFxuICAgICAgdXBkYXRlZEF0OiB0aW1lc3RhbXAyKFwidXBkYXRlZF9hdFwiKS5kZWZhdWx0Tm93KClcbiAgICB9KTtcbiAgICBib29raW5ncyA9IHBnVGFibGUyKFwiYm9va2luZ3NcIiwge1xuICAgICAgaWQ6IHZhcmNoYXIyKFwiaWRcIikucHJpbWFyeUtleSgpLmRlZmF1bHQoc3FsM2BnZW5fcmFuZG9tX3V1aWQoKWApLFxuICAgICAgY29tbW9uU3BhY2VJZDogdmFyY2hhcjIoXCJjb21tb25fc3BhY2VfaWRcIikubm90TnVsbCgpLnJlZmVyZW5jZXMoKCkgPT4gY29tbW9uU3BhY2VzLmlkLCB7IG9uRGVsZXRlOiBcImNhc2NhZGVcIiB9KSxcbiAgICAgIHVzZXJJZDogdmFyY2hhcjIoXCJ1c2VyX2lkXCIpLm5vdE51bGwoKS5yZWZlcmVuY2VzKCgpID0+IHVzZXJzLmlkLCB7IG9uRGVsZXRlOiBcImNhc2NhZGVcIiB9KSxcbiAgICAgIHN0YXJ0VGltZTogdGltZXN0YW1wMihcInN0YXJ0X3RpbWVcIiwgeyB3aXRoVGltZXpvbmU6IHRydWUgfSkubm90TnVsbCgpLFxuICAgICAgZW5kVGltZTogdGltZXN0YW1wMihcImVuZF90aW1lXCIsIHsgd2l0aFRpbWV6b25lOiB0cnVlIH0pLm5vdE51bGwoKSxcbiAgICAgIHN0YXR1czogYm9va2luZ1N0YXR1c0VudW0oXCJzdGF0dXNcIikubm90TnVsbCgpLmRlZmF1bHQoXCJjb25maXJtZWRcIiksXG4gICAgICBjcmVhdGVkQXQ6IHRpbWVzdGFtcDIoXCJjcmVhdGVkX2F0XCIpLmRlZmF1bHROb3coKSxcbiAgICAgIHVwZGF0ZWRBdDogdGltZXN0YW1wMihcInVwZGF0ZWRfYXRcIikuZGVmYXVsdE5vdygpXG4gICAgfSk7XG4gICAgdXNlckJvb2tpbmdSZXN0cmljdGlvbnMgPSBwZ1RhYmxlMihcInVzZXJfYm9va2luZ19yZXN0cmljdGlvbnNcIiwge1xuICAgICAgaWQ6IHZhcmNoYXIyKFwiaWRcIikucHJpbWFyeUtleSgpLmRlZmF1bHQoc3FsM2BnZW5fcmFuZG9tX3V1aWQoKWApLFxuICAgICAgdXNlcklkOiB2YXJjaGFyMihcInVzZXJfaWRcIikubm90TnVsbCgpLnJlZmVyZW5jZXMoKCkgPT4gdXNlcnMuaWQsIHsgb25EZWxldGU6IFwiY2FzY2FkZVwiIH0pLFxuICAgICAgY29tbW9uU3BhY2VJZDogdmFyY2hhcjIoXCJjb21tb25fc3BhY2VfaWRcIikubm90TnVsbCgpLnJlZmVyZW5jZXMoKCkgPT4gY29tbW9uU3BhY2VzLmlkLCB7IG9uRGVsZXRlOiBcImNhc2NhZGVcIiB9KSxcbiAgICAgIGlzQmxvY2tlZDogYm9vbGVhbjIoXCJpc19ibG9ja2VkXCIpLm5vdE51bGwoKS5kZWZhdWx0KHRydWUpLFxuICAgICAgcmVhc29uOiB0ZXh0MihcInJlYXNvblwiKSxcbiAgICAgIGNyZWF0ZWRBdDogdGltZXN0YW1wMihcImNyZWF0ZWRfYXRcIikuZGVmYXVsdE5vdygpLFxuICAgICAgdXBkYXRlZEF0OiB0aW1lc3RhbXAyKFwidXBkYXRlZF9hdFwiKS5kZWZhdWx0Tm93KClcbiAgICB9KTtcbiAgICB1c2VyVGltZUxpbWl0cyA9IHBnVGFibGUyKFwidXNlcl90aW1lX2xpbWl0c1wiLCB7XG4gICAgICBpZDogdmFyY2hhcjIoXCJpZFwiKS5wcmltYXJ5S2V5KCkuZGVmYXVsdChzcWwzYGdlbl9yYW5kb21fdXVpZCgpYCksXG4gICAgICB1c2VySWQ6IHZhcmNoYXIyKFwidXNlcl9pZFwiKS5ub3ROdWxsKCkucmVmZXJlbmNlcygoKSA9PiB1c2Vycy5pZCwgeyBvbkRlbGV0ZTogXCJjYXNjYWRlXCIgfSksXG4gICAgICBjb21tb25TcGFjZUlkOiB2YXJjaGFyMihcImNvbW1vbl9zcGFjZV9pZFwiKS5yZWZlcmVuY2VzKCgpID0+IGNvbW1vblNwYWNlcy5pZCwgeyBvbkRlbGV0ZTogXCJjYXNjYWRlXCIgfSksXG4gICAgICAvLyBudWxsIG1lYW5zIGFwcGxpZXMgdG8gYWxsIHNwYWNlc1xuICAgICAgbGltaXRUeXBlOiB2YXJjaGFyMihcImxpbWl0X3R5cGVcIiwgeyBsZW5ndGg6IDIwIH0pLm5vdE51bGwoKSxcbiAgICAgIC8vICdtb250aGx5JyBvciAneWVhcmx5J1xuICAgICAgbGltaXRIb3VyczogaW50ZWdlcjIoXCJsaW1pdF9ob3Vyc1wiKS5ub3ROdWxsKCksXG4gICAgICAvLyBNYXhpbXVtIGhvdXJzIGFsbG93ZWRcbiAgICAgIGNyZWF0ZWRBdDogdGltZXN0YW1wMihcImNyZWF0ZWRfYXRcIikuZGVmYXVsdE5vdygpLFxuICAgICAgdXBkYXRlZEF0OiB0aW1lc3RhbXAyKFwidXBkYXRlZF9hdFwiKS5kZWZhdWx0Tm93KClcbiAgICB9KTtcbiAgICBpbnNlcnRCdWlsZGluZ1NjaGVtYSA9IHozLm9iamVjdCh7XG4gICAgICBvcmdhbml6YXRpb25JZDogejMuc3RyaW5nKCkudXVpZCgpLFxuICAgICAgbmFtZTogejMuc3RyaW5nKCkubWluKDEpLFxuICAgICAgYWRkcmVzczogejMuc3RyaW5nKCksXG4gICAgICBjaXR5OiB6My5zdHJpbmcoKSxcbiAgICAgIHByb3ZpbmNlOiB6My5zdHJpbmcoKS5kZWZhdWx0KFwiUUNcIiksXG4gICAgICBwb3N0YWxDb2RlOiB6My5zdHJpbmcoKSxcbiAgICAgIGJ1aWxkaW5nVHlwZTogejMuc3RyaW5nKCksXG4gICAgICB5ZWFyQnVpbHQ6IHozLm51bWJlcigpLmludCgpLm9wdGlvbmFsKCksXG4gICAgICB0b3RhbFVuaXRzOiB6My5udW1iZXIoKS5pbnQoKS5vcHRpb25hbCgpLFxuICAgICAgdG90YWxGbG9vcnM6IHozLm51bWJlcigpLmludCgpLm9wdGlvbmFsKCksXG4gICAgICBwYXJraW5nU3BhY2VzOiB6My5udW1iZXIoKS5pbnQoKS5vcHRpb25hbCgpLFxuICAgICAgc3RvcmFnZVNwYWNlczogejMubnVtYmVyKCkuaW50KCkub3B0aW9uYWwoKSxcbiAgICAgIGFtZW5pdGllczogejMuYXJyYXkoejMuc3RyaW5nKCkpLm9wdGlvbmFsKCksXG4gICAgICBtYW5hZ2VtZW50Q29tcGFueTogejMuc3RyaW5nKCkub3B0aW9uYWwoKSxcbiAgICAgIGJhbmtBY2NvdW50TnVtYmVyOiB6My5zdHJpbmcoKS5vcHRpb25hbCgpLFxuICAgICAgYmFua0FjY291bnROb3RlczogejMuc3RyaW5nKCkub3B0aW9uYWwoKSxcbiAgICAgIGJhbmtBY2NvdW50U3RhcnREYXRlOiB6My5kYXRlKCkub3B0aW9uYWwoKSxcbiAgICAgIGJhbmtBY2NvdW50U3RhcnRBbW91bnQ6IHozLm51bWJlcigpLm9wdGlvbmFsKCksXG4gICAgICBiYW5rQWNjb3VudE1pbmltdW1zOiB6My5yZWNvcmQoejMuc3RyaW5nKCksIHozLm51bWJlcigpKS5vcHRpb25hbCgpXG4gICAgfSk7XG4gICAgaW5zZXJ0UmVzaWRlbmNlU2NoZW1hID0gejMub2JqZWN0KHtcbiAgICAgIGJ1aWxkaW5nSWQ6IHozLnN0cmluZygpLnV1aWQoKSxcbiAgICAgIHVuaXROdW1iZXI6IHozLnN0cmluZygpLFxuICAgICAgZmxvb3I6IHozLm51bWJlcigpLmludCgpLm9wdGlvbmFsKCksXG4gICAgICBzcXVhcmVGb290YWdlOiB6My5udW1iZXIoKS5vcHRpb25hbCgpLFxuICAgICAgYmVkcm9vbXM6IHozLm51bWJlcigpLmludCgpLm9wdGlvbmFsKCksXG4gICAgICBiYXRocm9vbXM6IHozLm51bWJlcigpLm9wdGlvbmFsKCksXG4gICAgICBiYWxjb255OiB6My5ib29sZWFuKCkub3B0aW9uYWwoKSxcbiAgICAgIHBhcmtpbmdTcGFjZU51bWJlcnM6IHozLmFycmF5KHozLnN0cmluZygpKS5vcHRpb25hbCgpLFxuICAgICAgc3RvcmFnZVNwYWNlTnVtYmVyczogejMuYXJyYXkoejMuc3RyaW5nKCkpLm9wdGlvbmFsKCksXG4gICAgICBvd25lcnNoaXBQZXJjZW50YWdlOiB6My5udW1iZXIoKS5vcHRpb25hbCgpLFxuICAgICAgbW9udGhseUZlZXM6IHozLm51bWJlcigpLm9wdGlvbmFsKClcbiAgICB9KTtcbiAgICBpbnNlcnRVc2VyUmVzaWRlbmNlU2NoZW1hID0gejMub2JqZWN0KHtcbiAgICAgIHVzZXJJZDogejMuc3RyaW5nKCkudXVpZCgpLFxuICAgICAgcmVzaWRlbmNlSWQ6IHozLnN0cmluZygpLnV1aWQoKSxcbiAgICAgIHJlbGF0aW9uc2hpcFR5cGU6IHozLnN0cmluZygpLFxuICAgICAgc3RhcnREYXRlOiB6My5kYXRlKCksXG4gICAgICBlbmREYXRlOiB6My5kYXRlKCkub3B0aW9uYWwoKVxuICAgIH0pO1xuICAgIGluc2VydENvbnRhY3RTY2hlbWEgPSB6My5vYmplY3Qoe1xuICAgICAgbmFtZTogejMuc3RyaW5nKCksXG4gICAgICBlbWFpbDogejMuc3RyaW5nKCkuZW1haWwoKS5vcHRpb25hbCgpLFxuICAgICAgcGhvbmU6IHozLnN0cmluZygpLm9wdGlvbmFsKCksXG4gICAgICBlbnRpdHk6IHozLnN0cmluZygpLFxuICAgICAgZW50aXR5SWQ6IHozLnN0cmluZygpLnV1aWQoKSxcbiAgICAgIGNvbnRhY3RDYXRlZ29yeTogejMuc3RyaW5nKClcbiAgICB9KTtcbiAgICBpbnNlcnRDb21tb25TcGFjZVNjaGVtYSA9IHozLm9iamVjdCh7XG4gICAgICBuYW1lOiB6My5zdHJpbmcoKS5taW4oMSkubWF4KDI1NSksXG4gICAgICBkZXNjcmlwdGlvbjogejMuc3RyaW5nKCkub3B0aW9uYWwoKSxcbiAgICAgIGJ1aWxkaW5nSWQ6IHozLnN0cmluZygpLnV1aWQoKSxcbiAgICAgIGlzUmVzZXJ2YWJsZTogejMuYm9vbGVhbigpLmRlZmF1bHQoZmFsc2UpLFxuICAgICAgY2FwYWNpdHk6IHozLm51bWJlcigpLmludCgpLm9wdGlvbmFsKCksXG4gICAgICBjb250YWN0UGVyc29uSWQ6IHozLnN0cmluZygpLnV1aWQoKS5vcHRpb25hbCgpLFxuICAgICAgb3BlbmluZ0hvdXJzOiB6My5hcnJheShcbiAgICAgICAgejMub2JqZWN0KHtcbiAgICAgICAgICBkYXk6IHozLnN0cmluZygpLFxuICAgICAgICAgIG9wZW46IHozLnN0cmluZygpLFxuICAgICAgICAgIGNsb3NlOiB6My5zdHJpbmcoKVxuICAgICAgICB9KVxuICAgICAgKS5vcHRpb25hbCgpLFxuICAgICAgYm9va2luZ1J1bGVzOiB6My5zdHJpbmcoKS5vcHRpb25hbCgpXG4gICAgfSk7XG4gICAgaW5zZXJ0Qm9va2luZ1NjaGVtYSA9IHozLm9iamVjdCh7XG4gICAgICBjb21tb25TcGFjZUlkOiB6My5zdHJpbmcoKS51dWlkKCksXG4gICAgICB1c2VySWQ6IHozLnN0cmluZygpLnV1aWQoKSxcbiAgICAgIHN0YXJ0VGltZTogejMuZGF0ZSgpLFxuICAgICAgZW5kVGltZTogejMuZGF0ZSgpLFxuICAgICAgc3RhdHVzOiB6My5lbnVtKFtcImNvbmZpcm1lZFwiLCBcImNhbmNlbGxlZFwiXSkuZGVmYXVsdChcImNvbmZpcm1lZFwiKVxuICAgIH0pO1xuICAgIGluc2VydFVzZXJCb29raW5nUmVzdHJpY3Rpb25TY2hlbWEgPSB6My5vYmplY3Qoe1xuICAgICAgdXNlcklkOiB6My5zdHJpbmcoKS51dWlkKCksXG4gICAgICBjb21tb25TcGFjZUlkOiB6My5zdHJpbmcoKS51dWlkKCksXG4gICAgICBpc0Jsb2NrZWQ6IHozLmJvb2xlYW4oKS5kZWZhdWx0KHRydWUpLFxuICAgICAgcmVhc29uOiB6My5zdHJpbmcoKS5vcHRpb25hbCgpXG4gICAgfSk7XG4gICAgaW5zZXJ0VXNlclRpbWVMaW1pdFNjaGVtYSA9IHozLm9iamVjdCh7XG4gICAgICB1c2VySWQ6IHozLnN0cmluZygpLnV1aWQoKSxcbiAgICAgIGNvbW1vblNwYWNlSWQ6IHozLnN0cmluZygpLnV1aWQoKS5vcHRpb25hbCgpLFxuICAgICAgLy8gbnVsbCBtZWFucyBhcHBsaWVzIHRvIGFsbCBzcGFjZXNcbiAgICAgIGxpbWl0VHlwZTogejMuZW51bShbXCJtb250aGx5XCIsIFwieWVhcmx5XCJdKSxcbiAgICAgIGxpbWl0SG91cnM6IHozLm51bWJlcigpLmludCgpLm1pbigxKS5tYXgoODc2MClcbiAgICAgIC8vIE1heCAxIHllYXIgd29ydGggb2YgaG91cnNcbiAgICB9KTtcbiAgfVxufSk7XG5cbi8vIHNoYXJlZC9zY2hlbWFzL2ZpbmFuY2lhbC50c1xuaW1wb3J0IHsgc3FsIGFzIHNxbDQgfSBmcm9tIFwiZHJpenpsZS1vcm1cIjtcbmltcG9ydCB7XG4gIHBnVGFibGUgYXMgcGdUYWJsZTMsXG4gIHRleHQgYXMgdGV4dDMsXG4gIHRpbWVzdGFtcCBhcyB0aW1lc3RhbXAzLFxuICB1dWlkIGFzIHV1aWQzLFxuICBwZ0VudW0gYXMgcGdFbnVtMyxcbiAgYm9vbGVhbiBhcyBib29sZWFuMyxcbiAgaW50ZWdlciBhcyBpbnRlZ2VyMyxcbiAgZGVjaW1hbCBhcyBkZWNpbWFsMixcbiAgZGF0ZSBhcyBkYXRlMyxcbiAganNvbmIgYXMganNvbmIyLFxuICB2YXJjaGFyIGFzIHZhcmNoYXIzXG59IGZyb20gXCJkcml6emxlLW9ybS9wZy1jb3JlXCI7XG5pbXBvcnQgeyBjcmVhdGVJbnNlcnRTY2hlbWEgfSBmcm9tIFwiZHJpenpsZS16b2RcIjtcbmltcG9ydCB7IHogYXMgejQgfSBmcm9tIFwiem9kXCI7XG52YXIgYmlsbFN0YXR1c0VudW0sIG9sZEJpbGxUeXBlRW51bSwgYmlsbENhdGVnb3J5RW51bSwgcGF5bWVudFR5cGVFbnVtLCBzY2hlZHVsZVBheW1lbnRFbnVtLCBiaWxscywgb2xkQmlsbHMsIGJ1ZGdldHMsIG1vbnRobHlCdWRnZXRzLCBpbnNlcnRCaWxsU2NoZW1hLCBpbnNlcnRPbGRCaWxsU2NoZW1hLCBpbnNlcnRCdWRnZXRTY2hlbWEsIGluc2VydE1vbnRobHlCdWRnZXRTY2hlbWE7XG52YXIgaW5pdF9maW5hbmNpYWwgPSBfX2VzbSh7XG4gIFwic2hhcmVkL3NjaGVtYXMvZmluYW5jaWFsLnRzXCIoKSB7XG4gICAgaW5pdF9jb3JlKCk7XG4gICAgaW5pdF9wcm9wZXJ0eSgpO1xuICAgIGJpbGxTdGF0dXNFbnVtID0gcGdFbnVtMyhcImJpbGxfc3RhdHVzXCIsIFtcbiAgICAgIFwiZHJhZnRcIixcbiAgICAgIFwic2VudFwiLFxuICAgICAgXCJvdmVyZHVlXCIsXG4gICAgICBcInBhaWRcIixcbiAgICAgIFwiY2FuY2VsbGVkXCJcbiAgICBdKTtcbiAgICBvbGRCaWxsVHlwZUVudW0gPSBwZ0VudW0zKFwib2xkX2JpbGxfdHlwZVwiLCBbXG4gICAgICBcImNvbmRvX2ZlZXNcIixcbiAgICAgIFwic3BlY2lhbF9hc3Nlc3NtZW50XCIsXG4gICAgICBcInV0aWxpdHlcIixcbiAgICAgIFwibWFpbnRlbmFuY2VcIixcbiAgICAgIFwib3RoZXJcIlxuICAgIF0pO1xuICAgIGJpbGxDYXRlZ29yeUVudW0gPSBwZ0VudW0zKFwiYmlsbF9jYXRlZ29yeVwiLCBbXG4gICAgICBcImluc3VyYW5jZVwiLFxuICAgICAgXCJtYWludGVuYW5jZVwiLFxuICAgICAgXCJzYWxhcnlcIixcbiAgICAgIFwidXRpbGl0aWVzXCIsXG4gICAgICBcImNsZWFuaW5nXCIsXG4gICAgICBcInNlY3VyaXR5XCIsXG4gICAgICBcImxhbmRzY2FwaW5nXCIsXG4gICAgICBcInByb2Zlc3Npb25hbF9zZXJ2aWNlc1wiLFxuICAgICAgXCJhZG1pbmlzdHJhdGlvblwiLFxuICAgICAgXCJyZXBhaXJzXCIsXG4gICAgICBcInN1cHBsaWVzXCIsXG4gICAgICBcInRheGVzXCIsXG4gICAgICBcInRlY2hub2xvZ3lcIixcbiAgICAgIFwicmVzZXJ2ZXNcIixcbiAgICAgIFwib3RoZXJcIlxuICAgIF0pO1xuICAgIHBheW1lbnRUeXBlRW51bSA9IHBnRW51bTMoXCJwYXltZW50X3R5cGVcIiwgW1widW5pcXVlXCIsIFwicmVjdXJyZW50XCJdKTtcbiAgICBzY2hlZHVsZVBheW1lbnRFbnVtID0gcGdFbnVtMyhcInNjaGVkdWxlX3BheW1lbnRcIiwgW1xuICAgICAgXCJ3ZWVrbHlcIixcbiAgICAgIFwibW9udGhseVwiLFxuICAgICAgXCJxdWFydGVybHlcIixcbiAgICAgIFwieWVhcmx5XCIsXG4gICAgICBcImN1c3RvbVwiXG4gICAgXSk7XG4gICAgYmlsbHMgPSBwZ1RhYmxlMyhcImJpbGxzXCIsIHtcbiAgICAgIGlkOiB2YXJjaGFyMyhcImlkXCIpLnByaW1hcnlLZXkoKS5kZWZhdWx0KHNxbDRgZ2VuX3JhbmRvbV91dWlkKClgKSxcbiAgICAgIGJ1aWxkaW5nSWQ6IHZhcmNoYXIzKFwiYnVpbGRpbmdfaWRcIikubm90TnVsbCgpLnJlZmVyZW5jZXMoKCkgPT4gYnVpbGRpbmdzLmlkKSxcbiAgICAgIGJpbGxOdW1iZXI6IHRleHQzKFwiYmlsbF9udW1iZXJcIikubm90TnVsbCgpLnVuaXF1ZSgpLFxuICAgICAgdGl0bGU6IHRleHQzKFwidGl0bGVcIikubm90TnVsbCgpLFxuICAgICAgZGVzY3JpcHRpb246IHRleHQzKFwiZGVzY3JpcHRpb25cIiksXG4gICAgICBjYXRlZ29yeTogYmlsbENhdGVnb3J5RW51bShcImNhdGVnb3J5XCIpLm5vdE51bGwoKSxcbiAgICAgIHZlbmRvcjogdGV4dDMoXCJ2ZW5kb3JcIiksXG4gICAgICAvLyBDb21wYW55IG9yIHNlcnZpY2UgcHJvdmlkZXJcbiAgICAgIHBheW1lbnRUeXBlOiBwYXltZW50VHlwZUVudW0oXCJwYXltZW50X3R5cGVcIikubm90TnVsbCgpLFxuICAgICAgLy8gdW5pcXVlIG9yIHJlY3VycmVudFxuICAgICAgc2NoZWR1bGVQYXltZW50OiBzY2hlZHVsZVBheW1lbnRFbnVtKFwic2NoZWR1bGVfcGF5bWVudFwiKSxcbiAgICAgIC8vIE9ubHkgZm9yIHJlY3VycmVudCBwYXltZW50c1xuICAgICAgc2NoZWR1bGVDdXN0b206IGRhdGUzKFwic2NoZWR1bGVfY3VzdG9tXCIpLmFycmF5KCksXG4gICAgICAvLyBDdXN0b20gZGF0ZXMgZm9yIGN1c3RvbSBzY2hlZHVsZXNcbiAgICAgIGNvc3RzOiBkZWNpbWFsMihcImNvc3RzXCIsIHsgcHJlY2lzaW9uOiAxMiwgc2NhbGU6IDIgfSkuYXJyYXkoKS5ub3ROdWxsKCksXG4gICAgICAvLyBBcnJheSBvZiBjb3N0cyBmb3IgcGF5bWVudCBwbGFuXG4gICAgICB0b3RhbEFtb3VudDogZGVjaW1hbDIoXCJ0b3RhbF9hbW91bnRcIiwgeyBwcmVjaXNpb246IDEyLCBzY2FsZTogMiB9KS5ub3ROdWxsKCksXG4gICAgICBzdGFydERhdGU6IGRhdGUzKFwic3RhcnRfZGF0ZVwiKS5ub3ROdWxsKCksXG4gICAgICAvLyBXaGVuIHRoZSBiaWxsIHNlcmllcyBzdGFydHNcbiAgICAgIGVuZERhdGU6IGRhdGUzKFwiZW5kX2RhdGVcIiksXG4gICAgICAvLyBGb3IgcmVjdXJyZW50IGJpbGxzLCB3aGVuIHRoZXkgZW5kIChvcHRpb25hbCBmb3Igb25nb2luZylcbiAgICAgIHN0YXR1czogYmlsbFN0YXR1c0VudW0oXCJzdGF0dXNcIikubm90TnVsbCgpLmRlZmF1bHQoXCJkcmFmdFwiKSxcbiAgICAgIGRvY3VtZW50UGF0aDogdGV4dDMoXCJkb2N1bWVudF9wYXRoXCIpLFxuICAgICAgLy8gUGF0aCB0byB1cGxvYWRlZCBiaWxsIGRvY3VtZW50XG4gICAgICBkb2N1bWVudE5hbWU6IHRleHQzKFwiZG9jdW1lbnRfbmFtZVwiKSxcbiAgICAgIC8vIE9yaWdpbmFsIGZpbGVuYW1lXG4gICAgICBpc0FpQW5hbHl6ZWQ6IGJvb2xlYW4zKFwiaXNfYWlfYW5hbHl6ZWRcIikuZGVmYXVsdChmYWxzZSksXG4gICAgICBhaUFuYWx5c2lzRGF0YToganNvbmIyKFwiYWlfYW5hbHlzaXNfZGF0YVwiKSxcbiAgICAgIC8vIFN0b3JlIEFJLWV4dHJhY3RlZCBkYXRhXG4gICAgICBub3RlczogdGV4dDMoXCJub3Rlc1wiKSxcbiAgICAgIGF1dG9HZW5lcmF0ZWQ6IGJvb2xlYW4zKFwiYXV0b19nZW5lcmF0ZWRcIikubm90TnVsbCgpLmRlZmF1bHQoZmFsc2UpLFxuICAgICAgLy8gSW5kaWNhdGVzIGlmIHRoaXMgYmlsbCB3YXMgYXV0by1nZW5lcmF0ZWRcbiAgICAgIHJlZmVyZW5jZTogdmFyY2hhcjMoXCJyZWZlcmVuY2VcIikucmVmZXJlbmNlcygoKSA9PiBiaWxscy5pZCksXG4gICAgICAvLyBSZWZlcmVuY2VzIHRoZSBvcmlnaW5hbCBiaWxsIGZvciBhdXRvLWdlbmVyYXRlZCBiaWxsc1xuICAgICAgY3JlYXRlZEJ5OiB2YXJjaGFyMyhcImNyZWF0ZWRfYnlcIikubm90TnVsbCgpLnJlZmVyZW5jZXMoKCkgPT4gdXNlcnMuaWQpLFxuICAgICAgY3JlYXRlZEF0OiB0aW1lc3RhbXAzKFwiY3JlYXRlZF9hdFwiKS5kZWZhdWx0Tm93KCksXG4gICAgICB1cGRhdGVkQXQ6IHRpbWVzdGFtcDMoXCJ1cGRhdGVkX2F0XCIpLmRlZmF1bHROb3coKVxuICAgIH0pO1xuICAgIG9sZEJpbGxzID0gcGdUYWJsZTMoXCJvbGRfYmlsbHNcIiwge1xuICAgICAgaWQ6IHV1aWQzKFwiaWRcIikucHJpbWFyeUtleSgpLmRlZmF1bHQoc3FsNGBnZW5fcmFuZG9tX3V1aWQoKWApLFxuICAgICAgcmVzaWRlbmNlSWQ6IHZhcmNoYXIzKFwicmVzaWRlbmNlX2lkXCIpLm5vdE51bGwoKS5yZWZlcmVuY2VzKCgpID0+IHJlc2lkZW5jZXMuaWQpLFxuICAgICAgYmlsbE51bWJlcjogdGV4dDMoXCJiaWxsX251bWJlclwiKS5ub3ROdWxsKCkudW5pcXVlKCksXG4gICAgICB0eXBlOiBvbGRCaWxsVHlwZUVudW0oXCJ0eXBlXCIpLm5vdE51bGwoKSxcbiAgICAgIGRlc2NyaXB0aW9uOiB0ZXh0MyhcImRlc2NyaXB0aW9uXCIpLm5vdE51bGwoKSxcbiAgICAgIGFtb3VudDogZGVjaW1hbDIoXCJhbW91bnRcIiwgeyBwcmVjaXNpb246IDEyLCBzY2FsZTogMiB9KS5ub3ROdWxsKCksXG4gICAgICBkdWVEYXRlOiBkYXRlMyhcImR1ZV9kYXRlXCIpLm5vdE51bGwoKSxcbiAgICAgIGlzc3VlRGF0ZTogZGF0ZTMoXCJpc3N1ZV9kYXRlXCIpLm5vdE51bGwoKSxcbiAgICAgIHN0YXR1czogYmlsbFN0YXR1c0VudW0oXCJzdGF0dXNcIikubm90TnVsbCgpLmRlZmF1bHQoXCJkcmFmdFwiKSxcbiAgICAgIG5vdGVzOiB0ZXh0MyhcIm5vdGVzXCIpLFxuICAgICAgbGF0ZUZlZUFtb3VudDogZGVjaW1hbDIoXCJsYXRlX2ZlZV9hbW91bnRcIiwgeyBwcmVjaXNpb246IDEwLCBzY2FsZTogMiB9KSxcbiAgICAgIGRpc2NvdW50QW1vdW50OiBkZWNpbWFsMihcImRpc2NvdW50X2Ftb3VudFwiLCB7IHByZWNpc2lvbjogMTAsIHNjYWxlOiAyIH0pLFxuICAgICAgZmluYWxBbW91bnQ6IGRlY2ltYWwyKFwiZmluYWxfYW1vdW50XCIsIHsgcHJlY2lzaW9uOiAxMiwgc2NhbGU6IDIgfSkubm90TnVsbCgpLFxuICAgICAgcGF5bWVudFJlY2VpdmVkRGF0ZTogZGF0ZTMoXCJwYXltZW50X3JlY2VpdmVkX2RhdGVcIiksXG4gICAgICBjcmVhdGVkQnk6IHZhcmNoYXIzKFwiY3JlYXRlZF9ieVwiKS5ub3ROdWxsKCkucmVmZXJlbmNlcygoKSA9PiB1c2Vycy5pZCksXG4gICAgICBjcmVhdGVkQXQ6IHRpbWVzdGFtcDMoXCJjcmVhdGVkX2F0XCIpLmRlZmF1bHROb3coKSxcbiAgICAgIHVwZGF0ZWRBdDogdGltZXN0YW1wMyhcInVwZGF0ZWRfYXRcIikuZGVmYXVsdE5vdygpXG4gICAgfSk7XG4gICAgYnVkZ2V0cyA9IHBnVGFibGUzKFwiYnVkZ2V0c1wiLCB7XG4gICAgICBpZDogdmFyY2hhcjMoXCJpZFwiKS5wcmltYXJ5S2V5KCkuZGVmYXVsdChzcWw0YGdlbl9yYW5kb21fdXVpZCgpYCksXG4gICAgICBidWlsZGluZ0lkOiB2YXJjaGFyMyhcImJ1aWxkaW5nX2lkXCIpLm5vdE51bGwoKS5yZWZlcmVuY2VzKCgpID0+IGJ1aWxkaW5ncy5pZCksXG4gICAgICB5ZWFyOiBpbnRlZ2VyMyhcInllYXJcIikubm90TnVsbCgpLFxuICAgICAgbmFtZTogdGV4dDMoXCJuYW1lXCIpLm5vdE51bGwoKSxcbiAgICAgIGRlc2NyaXB0aW9uOiB0ZXh0MyhcImRlc2NyaXB0aW9uXCIpLFxuICAgICAgY2F0ZWdvcnk6IHRleHQzKFwiY2F0ZWdvcnlcIikubm90TnVsbCgpLFxuICAgICAgLy8gJ29wZXJhdGlvbmFsJywgJ3Jlc2VydmUnLCAnc3BlY2lhbF9wcm9qZWN0J1xuICAgICAgYnVkZ2V0ZWRBbW91bnQ6IGRlY2ltYWwyKFwiYnVkZ2V0ZWRfYW1vdW50XCIsIHsgcHJlY2lzaW9uOiAxMiwgc2NhbGU6IDIgfSkubm90TnVsbCgpLFxuICAgICAgYWN0dWFsQW1vdW50OiBkZWNpbWFsMihcImFjdHVhbF9hbW91bnRcIiwgeyBwcmVjaXNpb246IDEyLCBzY2FsZTogMiB9KS5kZWZhdWx0KFwiMFwiKSxcbiAgICAgIHZhcmlhbmNlOiBkZWNpbWFsMihcInZhcmlhbmNlXCIsIHsgcHJlY2lzaW9uOiAxMiwgc2NhbGU6IDIgfSkuZGVmYXVsdChcIjBcIiksXG4gICAgICBhcHByb3ZlZEJ5OiB2YXJjaGFyMyhcImFwcHJvdmVkX2J5XCIpLnJlZmVyZW5jZXMoKCkgPT4gdXNlcnMuaWQpLFxuICAgICAgYXBwcm92ZWREYXRlOiBkYXRlMyhcImFwcHJvdmVkX2RhdGVcIiksXG4gICAgICBpc0FjdGl2ZTogYm9vbGVhbjMoXCJpc19hY3RpdmVcIikubm90TnVsbCgpLmRlZmF1bHQodHJ1ZSksXG4gICAgICBjcmVhdGVkQnk6IHZhcmNoYXIzKFwiY3JlYXRlZF9ieVwiKS5ub3ROdWxsKCkucmVmZXJlbmNlcygoKSA9PiB1c2Vycy5pZCksXG4gICAgICBjcmVhdGVkQXQ6IHRpbWVzdGFtcDMoXCJjcmVhdGVkX2F0XCIpLmRlZmF1bHROb3coKSxcbiAgICAgIHVwZGF0ZWRBdDogdGltZXN0YW1wMyhcInVwZGF0ZWRfYXRcIikuZGVmYXVsdE5vdygpXG4gICAgfSk7XG4gICAgbW9udGhseUJ1ZGdldHMgPSBwZ1RhYmxlMyhcIm1vbnRobHlfYnVkZ2V0c1wiLCB7XG4gICAgICBpZDogdmFyY2hhcjMoXCJpZFwiKS5wcmltYXJ5S2V5KCkuZGVmYXVsdChzcWw0YGdlbl9yYW5kb21fdXVpZCgpYCksXG4gICAgICBidWlsZGluZ0lkOiB2YXJjaGFyMyhcImJ1aWxkaW5nX2lkXCIpLm5vdE51bGwoKS5yZWZlcmVuY2VzKCgpID0+IGJ1aWxkaW5ncy5pZCksXG4gICAgICB5ZWFyOiBpbnRlZ2VyMyhcInllYXJcIikubm90TnVsbCgpLFxuICAgICAgbW9udGg6IGludGVnZXIzKFwibW9udGhcIikubm90TnVsbCgpLFxuICAgICAgLy8gMS0xMlxuICAgICAgaW5jb21lVHlwZXM6IHRleHQzKFwiaW5jb21lX3R5cGVzXCIpLmFycmF5KCkubm90TnVsbCgpLFxuICAgICAgLy8gQXJyYXkgb2YgaW5jb21lIGNhdGVnb3JpZXMgZnJvbSBtb25leV9mbG93XG4gICAgICBpbmNvbWVzOiBkZWNpbWFsMihcImluY29tZXNcIiwgeyBwcmVjaXNpb246IDEyLCBzY2FsZTogMiB9KS5hcnJheSgpLm5vdE51bGwoKSxcbiAgICAgIC8vIEFycmF5IG9mIGluY29tZSBhbW91bnRzIGNvcnJlc3BvbmRpbmcgdG8gaW5jb21lVHlwZXNcbiAgICAgIHNwZW5kaW5nVHlwZXM6IHRleHQzKFwic3BlbmRpbmdfdHlwZXNcIikuYXJyYXkoKS5ub3ROdWxsKCksXG4gICAgICAvLyBBcnJheSBvZiBleHBlbnNlIGNhdGVnb3JpZXMgZnJvbSBtb25leV9mbG93XG4gICAgICBzcGVuZGluZ3M6IGRlY2ltYWwyKFwic3BlbmRpbmdzXCIsIHsgcHJlY2lzaW9uOiAxMiwgc2NhbGU6IDIgfSkuYXJyYXkoKS5ub3ROdWxsKCksXG4gICAgICAvLyBBcnJheSBvZiBzcGVuZGluZyBhbW91bnRzIGNvcnJlc3BvbmRpbmcgdG8gc3BlbmRpbmdUeXBlc1xuICAgICAgYXBwcm92ZWQ6IGJvb2xlYW4zKFwiYXBwcm92ZWRcIikubm90TnVsbCgpLmRlZmF1bHQoZmFsc2UpLFxuICAgICAgYXBwcm92ZWRCeTogdmFyY2hhcjMoXCJhcHByb3ZlZF9ieVwiKS5yZWZlcmVuY2VzKCgpID0+IHVzZXJzLmlkKSxcbiAgICAgIGFwcHJvdmVkRGF0ZTogdGltZXN0YW1wMyhcImFwcHJvdmVkX2RhdGVcIiksXG4gICAgICBvcmlnaW5hbEJ1ZGdldElkOiB2YXJjaGFyMyhcIm9yaWdpbmFsX2J1ZGdldF9pZFwiKS5yZWZlcmVuY2VzKCgpID0+IG1vbnRobHlCdWRnZXRzLmlkKSxcbiAgICAgIC8vIFJlZmVyZW5jZXMgdGhlIG9yaWdpbmFsIGJ1ZGdldCBpZiB0aGlzIGlzIGFuIGFwcHJvdmVkIGNvcHlcbiAgICAgIGNyZWF0ZWRBdDogdGltZXN0YW1wMyhcImNyZWF0ZWRfYXRcIikuZGVmYXVsdE5vdygpLFxuICAgICAgdXBkYXRlZEF0OiB0aW1lc3RhbXAzKFwidXBkYXRlZF9hdFwiKS5kZWZhdWx0Tm93KClcbiAgICB9KTtcbiAgICBpbnNlcnRCaWxsU2NoZW1hID0gY3JlYXRlSW5zZXJ0U2NoZW1hKGJpbGxzLCB7XG4gICAgICAvLyBDdXN0b20gdmFsaWRhdGlvbnMgZm9yIHN0cmljdCBzY2hlbWEgY29tcGxpYW5jZVxuICAgICAgYmlsbE51bWJlcjogejQuc3RyaW5nKCkubWluKDEsIFwiQmlsbCBudW1iZXIgaXMgcmVxdWlyZWRcIiksXG4gICAgICB0aXRsZTogejQuc3RyaW5nKCkubWluKDEsIFwiVGl0bGUgaXMgcmVxdWlyZWRcIiksXG4gICAgICBjYXRlZ29yeTogejQuZW51bShbXCJpbnN1cmFuY2VcIiwgXCJtYWludGVuYW5jZVwiLCBcInNhbGFyeVwiLCBcInV0aWxpdGllc1wiLCBcImNsZWFuaW5nXCIsIFwic2VjdXJpdHlcIiwgXCJsYW5kc2NhcGluZ1wiLCBcInByb2Zlc3Npb25hbF9zZXJ2aWNlc1wiLCBcImFkbWluaXN0cmF0aW9uXCIsIFwicmVwYWlyc1wiLCBcInN1cHBsaWVzXCIsIFwidGF4ZXNcIiwgXCJ0ZWNobm9sb2d5XCIsIFwicmVzZXJ2ZXNcIiwgXCJvdGhlclwiXSksXG4gICAgICBwYXltZW50VHlwZTogejQuZW51bShbXCJ1bmlxdWVcIiwgXCJyZWN1cnJlbnRcIl0pLFxuICAgICAgc2NoZWR1bGVQYXltZW50OiB6NC5lbnVtKFtcIndlZWtseVwiLCBcIm1vbnRobHlcIiwgXCJxdWFydGVybHlcIiwgXCJ5ZWFybHlcIiwgXCJjdXN0b21cIl0pLm9wdGlvbmFsKCksXG4gICAgICBzY2hlZHVsZUN1c3RvbTogejQuYXJyYXkoejQuY29lcmNlLmRhdGUoKSkub3B0aW9uYWwoKS5yZWZpbmUoXG4gICAgICAgIChkYXRlcykgPT4gIWRhdGVzIHx8IGRhdGVzLmxlbmd0aCA9PT0gMCB8fCBkYXRlcy5ldmVyeSgoZGF0ZTYpID0+IGRhdGU2IGluc3RhbmNlb2YgRGF0ZSAmJiAhaXNOYU4oZGF0ZTYuZ2V0VGltZSgpKSksXG4gICAgICAgIFwiQWxsIGN1c3RvbSBzY2hlZHVsZSBkYXRlcyBtdXN0IGJlIHZhbGlkIGRhdGVzXCJcbiAgICAgICksXG4gICAgICBjb3N0czogejQuYXJyYXkoejQuY29lcmNlLm51bWJlcigpLnBvc2l0aXZlKFwiQWxsIGNvc3RzIG11c3QgYmUgcG9zaXRpdmVcIikpLm1pbigxLCBcIkF0IGxlYXN0IG9uZSBjb3N0IGlzIHJlcXVpcmVkXCIpLFxuICAgICAgdG90YWxBbW91bnQ6IHo0LmNvZXJjZS5udW1iZXIoKS5wb3NpdGl2ZShcIlRvdGFsIGFtb3VudCBtdXN0IGJlIHBvc2l0aXZlXCIpLFxuICAgICAgc3RhcnREYXRlOiB6NC5jb2VyY2UuZGF0ZSgpLFxuICAgICAgZW5kRGF0ZTogejQuY29lcmNlLmRhdGUoKS5vcHRpb25hbCgpLFxuICAgICAgc3RhdHVzOiB6NC5lbnVtKFtcImRyYWZ0XCIsIFwic2VudFwiLCBcIm92ZXJkdWVcIiwgXCJwYWlkXCIsIFwiY2FuY2VsbGVkXCJdKS5kZWZhdWx0KFwiZHJhZnRcIiksXG4gICAgICBhdXRvR2VuZXJhdGVkOiB6NC5ib29sZWFuKCkuZGVmYXVsdChmYWxzZSlcbiAgICB9KS5vbWl0KHtcbiAgICAgIGlkOiB0cnVlLFxuICAgICAgY3JlYXRlZEF0OiB0cnVlLFxuICAgICAgdXBkYXRlZEF0OiB0cnVlXG4gICAgfSk7XG4gICAgaW5zZXJ0T2xkQmlsbFNjaGVtYSA9IHo0Lm9iamVjdCh7XG4gICAgICByZXNpZGVuY2VJZDogejQuc3RyaW5nKCkudXVpZCgpLFxuICAgICAgYmlsbE51bWJlcjogejQuc3RyaW5nKCksXG4gICAgICB0eXBlOiB6NC5zdHJpbmcoKSxcbiAgICAgIGRlc2NyaXB0aW9uOiB6NC5zdHJpbmcoKS5vcHRpb25hbCgpLFxuICAgICAgYW1vdW50OiB6NC5udW1iZXIoKSxcbiAgICAgIGR1ZURhdGU6IHo0LmRhdGUoKSxcbiAgICAgIGlzc3VlRGF0ZTogejQuZGF0ZSgpLm9wdGlvbmFsKCksXG4gICAgICBzdGF0dXM6IHo0LnN0cmluZygpLmRlZmF1bHQoXCJ1bnBhaWRcIiksXG4gICAgICBub3RlczogejQuc3RyaW5nKCkub3B0aW9uYWwoKSxcbiAgICAgIGxhdGVGZWVBbW91bnQ6IHo0Lm51bWJlcigpLm9wdGlvbmFsKCksXG4gICAgICBkaXNjb3VudEFtb3VudDogejQubnVtYmVyKCkub3B0aW9uYWwoKSxcbiAgICAgIGZpbmFsQW1vdW50OiB6NC5udW1iZXIoKS5vcHRpb25hbCgpLFxuICAgICAgcGF5bWVudFJlY2VpdmVkRGF0ZTogejQuZGF0ZSgpLm9wdGlvbmFsKCksXG4gICAgICBjcmVhdGVkQnk6IHo0LnN0cmluZygpLnV1aWQoKVxuICAgIH0pO1xuICAgIGluc2VydEJ1ZGdldFNjaGVtYSA9IHo0Lm9iamVjdCh7XG4gICAgICBidWlsZGluZ0lkOiB6NC5zdHJpbmcoKS51dWlkKCksXG4gICAgICB5ZWFyOiB6NC5udW1iZXIoKS5pbnQoKSxcbiAgICAgIG5hbWU6IHo0LnN0cmluZygpLFxuICAgICAgZGVzY3JpcHRpb246IHo0LnN0cmluZygpLm9wdGlvbmFsKCksXG4gICAgICBjYXRlZ29yeTogejQuc3RyaW5nKCksXG4gICAgICBidWRnZXRlZEFtb3VudDogejQubnVtYmVyKCksXG4gICAgICBhY3R1YWxBbW91bnQ6IHo0Lm51bWJlcigpLm9wdGlvbmFsKCksXG4gICAgICBjcmVhdGVkQnk6IHo0LnN0cmluZygpLnV1aWQoKVxuICAgIH0pO1xuICAgIGluc2VydE1vbnRobHlCdWRnZXRTY2hlbWEgPSBjcmVhdGVJbnNlcnRTY2hlbWEobW9udGhseUJ1ZGdldHMpLm9taXQoe1xuICAgICAgaWQ6IHRydWUsXG4gICAgICBjcmVhdGVkQXQ6IHRydWUsXG4gICAgICB1cGRhdGVkQXQ6IHRydWVcbiAgICB9KTtcbiAgfVxufSk7XG5cbi8vIHNoYXJlZC9zY2hlbWFzL29wZXJhdGlvbnMudHNcbmltcG9ydCB7IHNxbCBhcyBzcWw1IH0gZnJvbSBcImRyaXp6bGUtb3JtXCI7XG5pbXBvcnQge1xuICBwZ1RhYmxlIGFzIHBnVGFibGU0LFxuICB0ZXh0IGFzIHRleHQ0LFxuICB0aW1lc3RhbXAgYXMgdGltZXN0YW1wNCxcbiAganNvbmIgYXMganNvbmIzLFxuICB1dWlkIGFzIHV1aWQ0LFxuICBwZ0VudW0gYXMgcGdFbnVtNCxcbiAgYm9vbGVhbiBhcyBib29sZWFuNCxcbiAgZGVjaW1hbCBhcyBkZWNpbWFsMyxcbiAgaW50ZWdlciBhcyBpbnRlZ2VyNCxcbiAgdmFyY2hhciBhcyB2YXJjaGFyNFxufSBmcm9tIFwiZHJpenpsZS1vcm0vcGctY29yZVwiO1xuaW1wb3J0IHsgeiBhcyB6NSB9IGZyb20gXCJ6b2RcIjtcbnZhciBtYWludGVuYW5jZVN0YXR1c0VudW0sIG1haW50ZW5hbmNlUHJpb3JpdHlFbnVtLCBub3RpZmljYXRpb25UeXBlRW51bSwgZGVtYW5kVHlwZUVudW0sIGRlbWFuZFN0YXR1c0VudW0sIGJ1Z1N0YXR1c0VudW0sIGJ1Z1ByaW9yaXR5RW51bSwgYnVnQ2F0ZWdvcnlFbnVtLCBmZWF0dXJlUmVxdWVzdFN0YXR1c0VudW0sIGZlYXR1cmVSZXF1ZXN0Q2F0ZWdvcnlFbnVtLCBtYWludGVuYW5jZVJlcXVlc3RzLCBub3RpZmljYXRpb25zLCBkZW1hbmRzLCBkZW1hbmRDb21tZW50cywgYnVncywgZmVhdHVyZVJlcXVlc3RzLCBmZWF0dXJlUmVxdWVzdFVwdm90ZXMsIGluc2VydE1haW50ZW5hbmNlUmVxdWVzdFNjaGVtYSwgaW5zZXJ0Tm90aWZpY2F0aW9uU2NoZW1hLCBpbnNlcnREZW1hbmRTY2hlbWEsIGluc2VydERlbWFuZENvbW1lbnRTY2hlbWEsIGluc2VydEJ1Z1NjaGVtYSwgaW5zZXJ0RmVhdHVyZVJlcXVlc3RTY2hlbWEsIGluc2VydEZlYXR1cmVSZXF1ZXN0VXB2b3RlU2NoZW1hO1xudmFyIGluaXRfb3BlcmF0aW9ucyA9IF9fZXNtKHtcbiAgXCJzaGFyZWQvc2NoZW1hcy9vcGVyYXRpb25zLnRzXCIoKSB7XG4gICAgaW5pdF9jb3JlKCk7XG4gICAgaW5pdF9wcm9wZXJ0eSgpO1xuICAgIG1haW50ZW5hbmNlU3RhdHVzRW51bSA9IHBnRW51bTQoXCJtYWludGVuYW5jZV9zdGF0dXNcIiwgW1xuICAgICAgXCJzdWJtaXR0ZWRcIixcbiAgICAgIFwiYWNrbm93bGVkZ2VkXCIsXG4gICAgICBcImluX3Byb2dyZXNzXCIsXG4gICAgICBcImNvbXBsZXRlZFwiLFxuICAgICAgXCJjYW5jZWxsZWRcIlxuICAgIF0pO1xuICAgIG1haW50ZW5hbmNlUHJpb3JpdHlFbnVtID0gcGdFbnVtNChcIm1haW50ZW5hbmNlX3ByaW9yaXR5XCIsIFtcbiAgICAgIFwibG93XCIsXG4gICAgICBcIm1lZGl1bVwiLFxuICAgICAgXCJoaWdoXCIsXG4gICAgICBcInVyZ2VudFwiLFxuICAgICAgXCJlbWVyZ2VuY3lcIlxuICAgIF0pO1xuICAgIG5vdGlmaWNhdGlvblR5cGVFbnVtID0gcGdFbnVtNChcIm5vdGlmaWNhdGlvbl90eXBlXCIsIFtcbiAgICAgIFwiYmlsbF9yZW1pbmRlclwiLFxuICAgICAgXCJtYWludGVuYW5jZV91cGRhdGVcIixcbiAgICAgIFwiYW5ub3VuY2VtZW50XCIsXG4gICAgICBcInN5c3RlbVwiLFxuICAgICAgXCJlbWVyZ2VuY3lcIlxuICAgIF0pO1xuICAgIGRlbWFuZFR5cGVFbnVtID0gcGdFbnVtNChcImRlbWFuZF90eXBlXCIsIFtcbiAgICAgIFwibWFpbnRlbmFuY2VcIixcbiAgICAgIFwiY29tcGxhaW50XCIsXG4gICAgICBcImluZm9ybWF0aW9uXCIsXG4gICAgICBcIm90aGVyXCJcbiAgICBdKTtcbiAgICBkZW1hbmRTdGF0dXNFbnVtID0gcGdFbnVtNChcImRlbWFuZF9zdGF0dXNcIiwgW1xuICAgICAgXCJkcmFmdFwiLFxuICAgICAgXCJzdWJtaXR0ZWRcIixcbiAgICAgIFwidW5kZXJfcmV2aWV3XCIsXG4gICAgICBcImFwcHJvdmVkXCIsXG4gICAgICBcImluX3Byb2dyZXNzXCIsXG4gICAgICBcImNvbXBsZXRlZFwiLFxuICAgICAgXCJyZWplY3RlZFwiLFxuICAgICAgXCJjYW5jZWxsZWRcIlxuICAgIF0pO1xuICAgIGJ1Z1N0YXR1c0VudW0gPSBwZ0VudW00KFwiYnVnX3N0YXR1c1wiLCBbXG4gICAgICBcIm5ld1wiLFxuICAgICAgXCJhY2tub3dsZWRnZWRcIixcbiAgICAgIFwiaW5fcHJvZ3Jlc3NcIixcbiAgICAgIFwicmVzb2x2ZWRcIixcbiAgICAgIFwiY2xvc2VkXCJcbiAgICBdKTtcbiAgICBidWdQcmlvcml0eUVudW0gPSBwZ0VudW00KFwiYnVnX3ByaW9yaXR5XCIsIFtcImxvd1wiLCBcIm1lZGl1bVwiLCBcImhpZ2hcIiwgXCJjcml0aWNhbFwiXSk7XG4gICAgYnVnQ2F0ZWdvcnlFbnVtID0gcGdFbnVtNChcImJ1Z19jYXRlZ29yeVwiLCBbXG4gICAgICBcInVpX3V4XCIsXG4gICAgICBcImZ1bmN0aW9uYWxpdHlcIixcbiAgICAgIFwicGVyZm9ybWFuY2VcIixcbiAgICAgIFwiZGF0YVwiLFxuICAgICAgXCJzZWN1cml0eVwiLFxuICAgICAgXCJpbnRlZ3JhdGlvblwiLFxuICAgICAgXCJvdGhlclwiXG4gICAgXSk7XG4gICAgZmVhdHVyZVJlcXVlc3RTdGF0dXNFbnVtID0gcGdFbnVtNChcImZlYXR1cmVfcmVxdWVzdF9zdGF0dXNcIiwgW1xuICAgICAgXCJzdWJtaXR0ZWRcIixcbiAgICAgIFwidW5kZXJfcmV2aWV3XCIsXG4gICAgICBcInBsYW5uZWRcIixcbiAgICAgIFwiaW5fcHJvZ3Jlc3NcIixcbiAgICAgIFwiY29tcGxldGVkXCIsXG4gICAgICBcInJlamVjdGVkXCJcbiAgICBdKTtcbiAgICBmZWF0dXJlUmVxdWVzdENhdGVnb3J5RW51bSA9IHBnRW51bTQoXCJmZWF0dXJlX3JlcXVlc3RfY2F0ZWdvcnlcIiwgW1xuICAgICAgXCJkYXNoYm9hcmRcIixcbiAgICAgIFwicHJvcGVydHlfbWFuYWdlbWVudFwiLFxuICAgICAgXCJyZXNpZGVudF9tYW5hZ2VtZW50XCIsXG4gICAgICBcImZpbmFuY2lhbF9tYW5hZ2VtZW50XCIsXG4gICAgICBcIm1haW50ZW5hbmNlXCIsXG4gICAgICBcImRvY3VtZW50X21hbmFnZW1lbnRcIixcbiAgICAgIFwiY29tbXVuaWNhdGlvblwiLFxuICAgICAgXCJyZXBvcnRzXCIsXG4gICAgICBcIm1vYmlsZV9hcHBcIixcbiAgICAgIFwiaW50ZWdyYXRpb25zXCIsXG4gICAgICBcInNlY3VyaXR5XCIsXG4gICAgICBcInBlcmZvcm1hbmNlXCIsXG4gICAgICBcIm90aGVyXCJcbiAgICBdKTtcbiAgICBtYWludGVuYW5jZVJlcXVlc3RzID0gcGdUYWJsZTQoXCJtYWludGVuYW5jZV9yZXF1ZXN0c1wiLCB7XG4gICAgICBpZDogdXVpZDQoXCJpZFwiKS5wcmltYXJ5S2V5KCkuZGVmYXVsdChzcWw1YGdlbl9yYW5kb21fdXVpZCgpYCksXG4gICAgICByZXNpZGVuY2VJZDogdmFyY2hhcjQoXCJyZXNpZGVuY2VfaWRcIikubm90TnVsbCgpLnJlZmVyZW5jZXMoKCkgPT4gcmVzaWRlbmNlcy5pZCksXG4gICAgICBzdWJtaXR0ZWRCeTogdmFyY2hhcjQoXCJzdWJtaXR0ZWRfYnlcIikubm90TnVsbCgpLnJlZmVyZW5jZXMoKCkgPT4gdXNlcnMuaWQpLFxuICAgICAgYXNzaWduZWRUbzogdmFyY2hhcjQoXCJhc3NpZ25lZF90b1wiKS5yZWZlcmVuY2VzKCgpID0+IHVzZXJzLmlkKSxcbiAgICAgIHRpdGxlOiB0ZXh0NChcInRpdGxlXCIpLm5vdE51bGwoKSxcbiAgICAgIGRlc2NyaXB0aW9uOiB0ZXh0NChcImRlc2NyaXB0aW9uXCIpLm5vdE51bGwoKSxcbiAgICAgIGNhdGVnb3J5OiB0ZXh0NChcImNhdGVnb3J5XCIpLm5vdE51bGwoKSxcbiAgICAgIC8vICdwbHVtYmluZycsICdlbGVjdHJpY2FsJywgJ2h2YWMnLCAnZ2VuZXJhbCcsIGV0Yy5cbiAgICAgIHByaW9yaXR5OiBtYWludGVuYW5jZVByaW9yaXR5RW51bShcInByaW9yaXR5XCIpLm5vdE51bGwoKS5kZWZhdWx0KFwibWVkaXVtXCIpLFxuICAgICAgc3RhdHVzOiBtYWludGVuYW5jZVN0YXR1c0VudW0oXCJzdGF0dXNcIikubm90TnVsbCgpLmRlZmF1bHQoXCJzdWJtaXR0ZWRcIiksXG4gICAgICBlc3RpbWF0ZWRDb3N0OiBkZWNpbWFsMyhcImVzdGltYXRlZF9jb3N0XCIsIHsgcHJlY2lzaW9uOiAxMCwgc2NhbGU6IDIgfSksXG4gICAgICBhY3R1YWxDb3N0OiBkZWNpbWFsMyhcImFjdHVhbF9jb3N0XCIsIHsgcHJlY2lzaW9uOiAxMCwgc2NhbGU6IDIgfSksXG4gICAgICBzY2hlZHVsZWREYXRlOiB0aW1lc3RhbXA0KFwic2NoZWR1bGVkX2RhdGVcIiksXG4gICAgICBjb21wbGV0ZWREYXRlOiB0aW1lc3RhbXA0KFwiY29tcGxldGVkX2RhdGVcIiksXG4gICAgICBub3RlczogdGV4dDQoXCJub3Rlc1wiKSxcbiAgICAgIGltYWdlczoganNvbmIzKFwiaW1hZ2VzXCIpLFxuICAgICAgLy8gQXJyYXkgb2YgaW1hZ2UgVVJMc1xuICAgICAgY3JlYXRlZEF0OiB0aW1lc3RhbXA0KFwiY3JlYXRlZF9hdFwiKS5kZWZhdWx0Tm93KCksXG4gICAgICB1cGRhdGVkQXQ6IHRpbWVzdGFtcDQoXCJ1cGRhdGVkX2F0XCIpLmRlZmF1bHROb3coKVxuICAgIH0pO1xuICAgIG5vdGlmaWNhdGlvbnMgPSBwZ1RhYmxlNChcIm5vdGlmaWNhdGlvbnNcIiwge1xuICAgICAgaWQ6IHZhcmNoYXI0KFwiaWRcIikucHJpbWFyeUtleSgpLmRlZmF1bHQoc3FsNWBnZW5fcmFuZG9tX3V1aWQoKWApLFxuICAgICAgdXNlcklkOiB2YXJjaGFyNChcInVzZXJfaWRcIikubm90TnVsbCgpLnJlZmVyZW5jZXMoKCkgPT4gdXNlcnMuaWQpLFxuICAgICAgdHlwZTogbm90aWZpY2F0aW9uVHlwZUVudW0oXCJ0eXBlXCIpLm5vdE51bGwoKSxcbiAgICAgIHRpdGxlOiB0ZXh0NChcInRpdGxlXCIpLm5vdE51bGwoKSxcbiAgICAgIG1lc3NhZ2U6IHRleHQ0KFwibWVzc2FnZVwiKS5ub3ROdWxsKCksXG4gICAgICByZWxhdGVkRW50aXR5SWQ6IHZhcmNoYXI0KFwicmVsYXRlZF9lbnRpdHlfaWRcIiksXG4gICAgICAvLyBJRCBvZiByZWxhdGVkIGJpbGwsIG1haW50ZW5hbmNlIHJlcXVlc3QsIGV0Yy5cbiAgICAgIHJlbGF0ZWRFbnRpdHlUeXBlOiB0ZXh0NChcInJlbGF0ZWRfZW50aXR5X3R5cGVcIiksXG4gICAgICAvLyAnYmlsbCcsICdtYWludGVuYW5jZV9yZXF1ZXN0JywgZXRjLlxuICAgICAgaXNSZWFkOiBib29sZWFuNChcImlzX3JlYWRcIikubm90TnVsbCgpLmRlZmF1bHQoZmFsc2UpLFxuICAgICAgcmVhZEF0OiB0aW1lc3RhbXA0KFwicmVhZF9hdFwiKSxcbiAgICAgIGNyZWF0ZWRBdDogdGltZXN0YW1wNChcImNyZWF0ZWRfYXRcIikuZGVmYXVsdE5vdygpXG4gICAgfSk7XG4gICAgZGVtYW5kcyA9IHBnVGFibGU0KFwiZGVtYW5kc1wiLCB7XG4gICAgICBpZDogdXVpZDQoXCJpZFwiKS5wcmltYXJ5S2V5KCkuZGVmYXVsdChzcWw1YGdlbl9yYW5kb21fdXVpZCgpYCksXG4gICAgICBzdWJtaXR0ZXJJZDogdmFyY2hhcjQoXCJzdWJtaXR0ZXJfaWRcIikubm90TnVsbCgpLnJlZmVyZW5jZXMoKCkgPT4gdXNlcnMuaWQpLFxuICAgICAgdHlwZTogZGVtYW5kVHlwZUVudW0oXCJ0eXBlXCIpLm5vdE51bGwoKSxcbiAgICAgIGFzc2lnbmF0aW9uUmVzaWRlbmNlSWQ6IHZhcmNoYXI0KFwiYXNzaWduYXRpb25fcmVzaWRlbmNlX2lkXCIpLnJlZmVyZW5jZXMoKCkgPT4gcmVzaWRlbmNlcy5pZCksXG4gICAgICBhc3NpZ25hdGlvbkJ1aWxkaW5nSWQ6IHZhcmNoYXI0KFwiYXNzaWduYXRpb25fYnVpbGRpbmdfaWRcIikucmVmZXJlbmNlcygoKSA9PiBidWlsZGluZ3MuaWQpLFxuICAgICAgZGVzY3JpcHRpb246IHRleHQ0KFwiZGVzY3JpcHRpb25cIikubm90TnVsbCgpLFxuICAgICAgYXR0YWNobWVudHM6IHRleHQ0KFwiYXR0YWNobWVudHNcIikuYXJyYXkoKSxcbiAgICAgIC8vIEFycmF5IG9mIGZpbGUgVVJMcy9wYXRocyBmb3IgdXBsb2FkZWQgZG9jdW1lbnRzIGFuZCBpbWFnZXNcbiAgICAgIHJlc2lkZW5jZUlkOiB2YXJjaGFyNChcInJlc2lkZW5jZV9pZFwiKS5yZWZlcmVuY2VzKCgpID0+IHJlc2lkZW5jZXMuaWQpLFxuICAgICAgYnVpbGRpbmdJZDogdmFyY2hhcjQoXCJidWlsZGluZ19pZFwiKS5ub3ROdWxsKCkucmVmZXJlbmNlcygoKSA9PiBidWlsZGluZ3MuaWQpLFxuICAgICAgc3RhdHVzOiBkZW1hbmRTdGF0dXNFbnVtKFwic3RhdHVzXCIpLm5vdE51bGwoKS5kZWZhdWx0KFwiZHJhZnRcIiksXG4gICAgICByZXZpZXdlZEJ5OiB2YXJjaGFyNChcInJldmlld2VkX2J5XCIpLnJlZmVyZW5jZXMoKCkgPT4gdXNlcnMuaWQpLFxuICAgICAgcmV2aWV3ZWRBdDogdGltZXN0YW1wNChcInJldmlld2VkX2F0XCIpLFxuICAgICAgcmV2aWV3Tm90ZXM6IHRleHQ0KFwicmV2aWV3X25vdGVzXCIpLFxuICAgICAgY3JlYXRlZEF0OiB0aW1lc3RhbXA0KFwiY3JlYXRlZF9hdFwiKS5kZWZhdWx0Tm93KCksXG4gICAgICB1cGRhdGVkQXQ6IHRpbWVzdGFtcDQoXCJ1cGRhdGVkX2F0XCIpLmRlZmF1bHROb3coKVxuICAgIH0pO1xuICAgIGRlbWFuZENvbW1lbnRzID0gcGdUYWJsZTQoXCJkZW1hbmRzX2NvbW1lbnRzXCIsIHtcbiAgICAgIGlkOiB0ZXh0NChcImlkXCIpLnByaW1hcnlLZXkoKS5kZWZhdWx0KHNxbDVgZ2VuX3JhbmRvbV91dWlkKClgKSxcbiAgICAgIGRlbWFuZElkOiB1dWlkNChcImRlbWFuZF9pZFwiKS5ub3ROdWxsKCkucmVmZXJlbmNlcygoKSA9PiBkZW1hbmRzLmlkKSxcbiAgICAgIGNvbW1lbnRlcklkOiB0ZXh0NChcImNvbW1lbnRlcl9pZFwiKS5ub3ROdWxsKCkucmVmZXJlbmNlcygoKSA9PiB1c2Vycy5pZCksXG4gICAgICBjb21tZW50VGV4dDogdGV4dDQoXCJjb21tZW50X3RleHRcIikubm90TnVsbCgpLFxuICAgICAgY29tbWVudFR5cGU6IHRleHQ0KFwiY29tbWVudF90eXBlXCIpLFxuICAgICAgaXNJbnRlcm5hbDogYm9vbGVhbjQoXCJpc19pbnRlcm5hbFwiKS5kZWZhdWx0KGZhbHNlKSxcbiAgICAgIGNyZWF0ZWRBdDogdGltZXN0YW1wNChcImNyZWF0ZWRfYXRcIikuZGVmYXVsdE5vdygpLFxuICAgICAgdXBkYXRlZEF0OiB0aW1lc3RhbXA0KFwidXBkYXRlZF9hdFwiKS5kZWZhdWx0Tm93KClcbiAgICB9KTtcbiAgICBidWdzID0gcGdUYWJsZTQoXCJidWdzXCIsIHtcbiAgICAgIGlkOiB2YXJjaGFyNChcImlkXCIpLnByaW1hcnlLZXkoKS5kZWZhdWx0KHNxbDVgZ2VuX3JhbmRvbV91dWlkKClgKSxcbiAgICAgIGNyZWF0ZWRCeTogdmFyY2hhcjQoXCJjcmVhdGVkX2J5XCIpLm5vdE51bGwoKS5yZWZlcmVuY2VzKCgpID0+IHVzZXJzLmlkKSxcbiAgICAgIHRpdGxlOiB0ZXh0NChcInRpdGxlXCIpLm5vdE51bGwoKSxcbiAgICAgIGRlc2NyaXB0aW9uOiB0ZXh0NChcImRlc2NyaXB0aW9uXCIpLm5vdE51bGwoKSxcbiAgICAgIGNhdGVnb3J5OiBidWdDYXRlZ29yeUVudW0oXCJjYXRlZ29yeVwiKS5ub3ROdWxsKCksXG4gICAgICBwYWdlOiB0ZXh0NChcInBhZ2VcIikubm90TnVsbCgpLFxuICAgICAgLy8gVGhlIHBhZ2Ugd2hlcmUgdGhlIGJ1ZyB3YXMgZm91bmRcbiAgICAgIHByaW9yaXR5OiBidWdQcmlvcml0eUVudW0oXCJwcmlvcml0eVwiKS5ub3ROdWxsKCkuZGVmYXVsdChcIm1lZGl1bVwiKSxcbiAgICAgIHN0YXR1czogYnVnU3RhdHVzRW51bShcInN0YXR1c1wiKS5ub3ROdWxsKCkuZGVmYXVsdChcIm5ld1wiKSxcbiAgICAgIGFzc2lnbmVkVG86IHZhcmNoYXI0KFwiYXNzaWduZWRfdG9cIikucmVmZXJlbmNlcygoKSA9PiB1c2Vycy5pZCksXG4gICAgICByZXNvbHZlZEF0OiB0aW1lc3RhbXA0KFwicmVzb2x2ZWRfYXRcIiksXG4gICAgICByZXNvbHZlZEJ5OiB2YXJjaGFyNChcInJlc29sdmVkX2J5XCIpLnJlZmVyZW5jZXMoKCkgPT4gdXNlcnMuaWQpLFxuICAgICAgbm90ZXM6IHRleHQ0KFwibm90ZXNcIiksXG4gICAgICAvLyBJbnRlcm5hbCBub3RlcyBmb3IgcmVzb2x1dGlvblxuICAgICAgcmVwcm9kdWN0aW9uU3RlcHM6IHRleHQ0KFwicmVwcm9kdWN0aW9uX3N0ZXBzXCIpLFxuICAgICAgLy8gU3RlcHMgdG8gcmVwcm9kdWNlIHRoZSBidWdcbiAgICAgIGVudmlyb25tZW50OiB0ZXh0NChcImVudmlyb25tZW50XCIpLFxuICAgICAgLy8gQnJvd3NlciwgT1MsIGRldmljZSBpbmZvXG4gICAgICBjcmVhdGVkQXQ6IHRpbWVzdGFtcDQoXCJjcmVhdGVkX2F0XCIpLmRlZmF1bHROb3coKSxcbiAgICAgIHVwZGF0ZWRBdDogdGltZXN0YW1wNChcInVwZGF0ZWRfYXRcIikuZGVmYXVsdE5vdygpXG4gICAgfSk7XG4gICAgZmVhdHVyZVJlcXVlc3RzID0gcGdUYWJsZTQoXCJmZWF0dXJlX3JlcXVlc3RzXCIsIHtcbiAgICAgIGlkOiB2YXJjaGFyNChcImlkXCIpLnByaW1hcnlLZXkoKS5kZWZhdWx0KHNxbDVgZ2VuX3JhbmRvbV91dWlkKClgKSxcbiAgICAgIGNyZWF0ZWRCeTogdmFyY2hhcjQoXCJjcmVhdGVkX2J5XCIpLm5vdE51bGwoKS5yZWZlcmVuY2VzKCgpID0+IHVzZXJzLmlkKSxcbiAgICAgIHRpdGxlOiB0ZXh0NChcInRpdGxlXCIpLm5vdE51bGwoKSxcbiAgICAgIGRlc2NyaXB0aW9uOiB0ZXh0NChcImRlc2NyaXB0aW9uXCIpLm5vdE51bGwoKSxcbiAgICAgIG5lZWQ6IHRleHQ0KFwibmVlZFwiKS5ub3ROdWxsKCksXG4gICAgICAvLyBUaGUgc3BlY2lmaWMgbmVlZCB0aGlzIGZlYXR1cmUgYWRkcmVzc2VzXG4gICAgICBjYXRlZ29yeTogZmVhdHVyZVJlcXVlc3RDYXRlZ29yeUVudW0oXCJjYXRlZ29yeVwiKS5ub3ROdWxsKCksXG4gICAgICBwYWdlOiB0ZXh0NChcInBhZ2VcIikubm90TnVsbCgpLFxuICAgICAgLy8gVGhlIHBhZ2Uvc2VjdGlvbiB3aGVyZSB0aGlzIGZlYXR1cmUgc2hvdWxkIGJlIGFkZGVkXG4gICAgICBzdGF0dXM6IGZlYXR1cmVSZXF1ZXN0U3RhdHVzRW51bShcInN0YXR1c1wiKS5ub3ROdWxsKCkuZGVmYXVsdChcInN1Ym1pdHRlZFwiKSxcbiAgICAgIHVwdm90ZUNvdW50OiBpbnRlZ2VyNChcInVwdm90ZV9jb3VudFwiKS5ub3ROdWxsKCkuZGVmYXVsdCgwKSxcbiAgICAgIGFzc2lnbmVkVG86IHZhcmNoYXI0KFwiYXNzaWduZWRfdG9cIikucmVmZXJlbmNlcygoKSA9PiB1c2Vycy5pZCksXG4gICAgICByZXZpZXdlZEJ5OiB2YXJjaGFyNChcInJldmlld2VkX2J5XCIpLnJlZmVyZW5jZXMoKCkgPT4gdXNlcnMuaWQpLFxuICAgICAgcmV2aWV3ZWRBdDogdGltZXN0YW1wNChcInJldmlld2VkX2F0XCIpLFxuICAgICAgYWRtaW5Ob3RlczogdGV4dDQoXCJhZG1pbl9ub3Rlc1wiKSxcbiAgICAgIC8vIEludGVybmFsIG5vdGVzIGZvciBhZG1pbnMgb25seVxuICAgICAgbWVyZ2VkSW50b0lkOiB2YXJjaGFyNChcIm1lcmdlZF9pbnRvX2lkXCIpLFxuICAgICAgLy8gSWYgbWVyZ2VkIGludG8gYW5vdGhlciByZXF1ZXN0XG4gICAgICBjcmVhdGVkQXQ6IHRpbWVzdGFtcDQoXCJjcmVhdGVkX2F0XCIpLmRlZmF1bHROb3coKSxcbiAgICAgIHVwZGF0ZWRBdDogdGltZXN0YW1wNChcInVwZGF0ZWRfYXRcIikuZGVmYXVsdE5vdygpXG4gICAgfSk7XG4gICAgZmVhdHVyZVJlcXVlc3RVcHZvdGVzID0gcGdUYWJsZTQoXCJmZWF0dXJlX3JlcXVlc3RfdXB2b3Rlc1wiLCB7XG4gICAgICBpZDogdmFyY2hhcjQoXCJpZFwiKS5wcmltYXJ5S2V5KCkuZGVmYXVsdChzcWw1YGdlbl9yYW5kb21fdXVpZCgpYCksXG4gICAgICBmZWF0dXJlUmVxdWVzdElkOiB2YXJjaGFyNChcImZlYXR1cmVfcmVxdWVzdF9pZFwiKS5ub3ROdWxsKCkucmVmZXJlbmNlcygoKSA9PiBmZWF0dXJlUmVxdWVzdHMuaWQpLFxuICAgICAgdXNlcklkOiB2YXJjaGFyNChcInVzZXJfaWRcIikubm90TnVsbCgpLnJlZmVyZW5jZXMoKCkgPT4gdXNlcnMuaWQpLFxuICAgICAgY3JlYXRlZEF0OiB0aW1lc3RhbXA0KFwiY3JlYXRlZF9hdFwiKS5kZWZhdWx0Tm93KClcbiAgICB9KTtcbiAgICBpbnNlcnRNYWludGVuYW5jZVJlcXVlc3RTY2hlbWEgPSB6NS5vYmplY3Qoe1xuICAgICAgcmVzaWRlbmNlSWQ6IHo1LnN0cmluZygpLnV1aWQoKSxcbiAgICAgIHN1Ym1pdHRlZEJ5OiB6NS5zdHJpbmcoKS51dWlkKCksXG4gICAgICBhc3NpZ25lZFRvOiB6NS5zdHJpbmcoKS51dWlkKCkub3B0aW9uYWwoKSxcbiAgICAgIHRpdGxlOiB6NS5zdHJpbmcoKSxcbiAgICAgIGRlc2NyaXB0aW9uOiB6NS5zdHJpbmcoKSxcbiAgICAgIGNhdGVnb3J5OiB6NS5zdHJpbmcoKSxcbiAgICAgIHByaW9yaXR5OiB6NS5zdHJpbmcoKS5kZWZhdWx0KFwibWVkaXVtXCIpLFxuICAgICAgZXN0aW1hdGVkQ29zdDogejUubnVtYmVyKCkub3B0aW9uYWwoKSxcbiAgICAgIHNjaGVkdWxlZERhdGU6IHo1LmRhdGUoKS5vcHRpb25hbCgpLFxuICAgICAgbm90ZXM6IHo1LnN0cmluZygpLm9wdGlvbmFsKCksXG4gICAgICBpbWFnZXM6IHo1LmFycmF5KHo1LnN0cmluZygpKS5vcHRpb25hbCgpXG4gICAgfSk7XG4gICAgaW5zZXJ0Tm90aWZpY2F0aW9uU2NoZW1hID0gejUub2JqZWN0KHtcbiAgICAgIHVzZXJJZDogejUuc3RyaW5nKCkudXVpZCgpLFxuICAgICAgdHlwZTogejUuZW51bShbXCJiaWxsX3JlbWluZGVyXCIsIFwibWFpbnRlbmFuY2VfdXBkYXRlXCIsIFwiYW5ub3VuY2VtZW50XCIsIFwic3lzdGVtXCIsIFwiZW1lcmdlbmN5XCJdKSxcbiAgICAgIHRpdGxlOiB6NS5zdHJpbmcoKSxcbiAgICAgIG1lc3NhZ2U6IHo1LnN0cmluZygpLFxuICAgICAgcmVsYXRlZEVudGl0eUlkOiB6NS5zdHJpbmcoKS51dWlkKCkub3B0aW9uYWwoKSxcbiAgICAgIHJlbGF0ZWRFbnRpdHlUeXBlOiB6NS5zdHJpbmcoKS5vcHRpb25hbCgpXG4gICAgfSk7XG4gICAgaW5zZXJ0RGVtYW5kU2NoZW1hID0gejUub2JqZWN0KHtcbiAgICAgIHN1Ym1pdHRlcklkOiB6NS5zdHJpbmcoKS51dWlkKCksXG4gICAgICB0eXBlOiB6NS5lbnVtKFtcIm1haW50ZW5hbmNlXCIsIFwiY29tcGxhaW50XCIsIFwiaW5mb3JtYXRpb25cIiwgXCJvdGhlclwiXSksXG4gICAgICBhc3NpZ25hdGlvblJlc2lkZW5jZUlkOiB6NS5zdHJpbmcoKS51dWlkKCkub3B0aW9uYWwoKSxcbiAgICAgIGFzc2lnbmF0aW9uQnVpbGRpbmdJZDogejUuc3RyaW5nKCkudXVpZCgpLm9wdGlvbmFsKCksXG4gICAgICBkZXNjcmlwdGlvbjogejUuc3RyaW5nKCkubWluKDEwLCBcIkRlc2NyaXB0aW9uIG11c3QgYmUgYXQgbGVhc3QgMTAgY2hhcmFjdGVyc1wiKS5tYXgoMmUzLCBcIkRlc2NyaXB0aW9uIG11c3Qgbm90IGV4Y2VlZCAyMDAwIGNoYXJhY3RlcnNcIiksXG4gICAgICBhdHRhY2htZW50czogejUuYXJyYXkoejUuc3RyaW5nKCkpLm9wdGlvbmFsKCksXG4gICAgICAvLyBBcnJheSBvZiBmaWxlIFVSTHMvcGF0aHNcbiAgICAgIHJlc2lkZW5jZUlkOiB6NS5zdHJpbmcoKS51dWlkKCkub3B0aW9uYWwoKSxcbiAgICAgIGJ1aWxkaW5nSWQ6IHo1LnN0cmluZygpLnV1aWQoKS5vcHRpb25hbCgpLFxuICAgICAgc3RhdHVzOiB6NS5zdHJpbmcoKS5kZWZhdWx0KFwic3VibWl0dGVkXCIpLFxuICAgICAgcmV2aWV3Tm90ZXM6IHo1LnN0cmluZygpLm9wdGlvbmFsKClcbiAgICB9KTtcbiAgICBpbnNlcnREZW1hbmRDb21tZW50U2NoZW1hID0gejUub2JqZWN0KHtcbiAgICAgIGRlbWFuZElkOiB6NS5zdHJpbmcoKS51dWlkKCksXG4gICAgICBjb21tZW50ZXJJZDogejUuc3RyaW5nKCkudXVpZCgpLFxuICAgICAgY29tbWVudFRleHQ6IHo1LnN0cmluZygpLm1pbigxLCBcIkNvbW1lbnQgY29udGVudCBpcyByZXF1aXJlZFwiKS5tYXgoMWUzLCBcIkNvbW1lbnQgbXVzdCBub3QgZXhjZWVkIDEwMDAgY2hhcmFjdGVyc1wiKSxcbiAgICAgIGNvbW1lbnRUeXBlOiB6NS5zdHJpbmcoKS5vcHRpb25hbCgpLFxuICAgICAgaXNJbnRlcm5hbDogejUuYm9vbGVhbigpLmRlZmF1bHQoZmFsc2UpXG4gICAgfSk7XG4gICAgaW5zZXJ0QnVnU2NoZW1hID0gejUub2JqZWN0KHtcbiAgICAgIGNyZWF0ZWRCeTogejUuc3RyaW5nKCkudXVpZCgpLFxuICAgICAgdGl0bGU6IHo1LnN0cmluZygpLm1pbigxLCBcIlRpdGxlIGlzIHJlcXVpcmVkXCIpLm1heCgyMDAsIFwiVGl0bGUgbXVzdCBub3QgZXhjZWVkIDIwMCBjaGFyYWN0ZXJzXCIpLFxuICAgICAgZGVzY3JpcHRpb246IHo1LnN0cmluZygpLm1pbigxMCwgXCJEZXNjcmlwdGlvbiBtdXN0IGJlIGF0IGxlYXN0IDEwIGNoYXJhY3RlcnNcIikubWF4KDJlMywgXCJEZXNjcmlwdGlvbiBtdXN0IG5vdCBleGNlZWQgMjAwMCBjaGFyYWN0ZXJzXCIpLFxuICAgICAgY2F0ZWdvcnk6IHo1LmVudW0oW1xuICAgICAgICBcInVpX3V4XCIsXG4gICAgICAgIFwiZnVuY3Rpb25hbGl0eVwiLFxuICAgICAgICBcInBlcmZvcm1hbmNlXCIsXG4gICAgICAgIFwiZGF0YVwiLFxuICAgICAgICBcInNlY3VyaXR5XCIsXG4gICAgICAgIFwiaW50ZWdyYXRpb25cIixcbiAgICAgICAgXCJvdGhlclwiXG4gICAgICBdKSxcbiAgICAgIHBhZ2U6IHo1LnN0cmluZygpLm1pbigxLCBcIlBhZ2UgaXMgcmVxdWlyZWRcIiksXG4gICAgICBwcmlvcml0eTogejUuZW51bShbXCJsb3dcIiwgXCJtZWRpdW1cIiwgXCJoaWdoXCIsIFwiY3JpdGljYWxcIl0pLmRlZmF1bHQoXCJtZWRpdW1cIiksXG4gICAgICByZXByb2R1Y3Rpb25TdGVwczogejUuc3RyaW5nKCkub3B0aW9uYWwoKSxcbiAgICAgIGVudmlyb25tZW50OiB6NS5zdHJpbmcoKS5vcHRpb25hbCgpXG4gICAgfSk7XG4gICAgaW5zZXJ0RmVhdHVyZVJlcXVlc3RTY2hlbWEgPSB6NS5vYmplY3Qoe1xuICAgICAgY3JlYXRlZEJ5OiB6NS5zdHJpbmcoKS51dWlkKCksXG4gICAgICB0aXRsZTogejUuc3RyaW5nKCkubWluKDEsIFwiVGl0bGUgaXMgcmVxdWlyZWRcIikubWF4KDIwMCwgXCJUaXRsZSBtdXN0IG5vdCBleGNlZWQgMjAwIGNoYXJhY3RlcnNcIiksXG4gICAgICBkZXNjcmlwdGlvbjogejUuc3RyaW5nKCkubWluKDEwLCBcIkRlc2NyaXB0aW9uIG11c3QgYmUgYXQgbGVhc3QgMTAgY2hhcmFjdGVyc1wiKS5tYXgoMmUzLCBcIkRlc2NyaXB0aW9uIG11c3Qgbm90IGV4Y2VlZCAyMDAwIGNoYXJhY3RlcnNcIiksXG4gICAgICBuZWVkOiB6NS5zdHJpbmcoKS5taW4oNSwgXCJOZWVkIG11c3QgYmUgYXQgbGVhc3QgNSBjaGFyYWN0ZXJzXCIpLm1heCg1MDAsIFwiTmVlZCBtdXN0IG5vdCBleGNlZWQgNTAwIGNoYXJhY3RlcnNcIiksXG4gICAgICBjYXRlZ29yeTogejUuZW51bShbXG4gICAgICAgIFwiZGFzaGJvYXJkXCIsXG4gICAgICAgIFwicHJvcGVydHlfbWFuYWdlbWVudFwiLFxuICAgICAgICBcInJlc2lkZW50X21hbmFnZW1lbnRcIixcbiAgICAgICAgXCJmaW5hbmNpYWxfbWFuYWdlbWVudFwiLFxuICAgICAgICBcIm1haW50ZW5hbmNlXCIsXG4gICAgICAgIFwiZG9jdW1lbnRfbWFuYWdlbWVudFwiLFxuICAgICAgICBcImNvbW11bmljYXRpb25cIixcbiAgICAgICAgXCJyZXBvcnRzXCIsXG4gICAgICAgIFwibW9iaWxlX2FwcFwiLFxuICAgICAgICBcImludGVncmF0aW9uc1wiLFxuICAgICAgICBcInNlY3VyaXR5XCIsXG4gICAgICAgIFwicGVyZm9ybWFuY2VcIixcbiAgICAgICAgXCJvdGhlclwiXG4gICAgICBdKSxcbiAgICAgIHBhZ2U6IHo1LnN0cmluZygpLm1pbigxLCBcIlBhZ2UgaXMgcmVxdWlyZWRcIilcbiAgICB9KTtcbiAgICBpbnNlcnRGZWF0dXJlUmVxdWVzdFVwdm90ZVNjaGVtYSA9IHo1Lm9iamVjdCh7XG4gICAgICBmZWF0dXJlUmVxdWVzdElkOiB6NS5zdHJpbmcoKS51dWlkKCksXG4gICAgICB1c2VySWQ6IHo1LnN0cmluZygpLnV1aWQoKVxuICAgIH0pO1xuICB9XG59KTtcblxuLy8gc2hhcmVkL3NjaGVtYXMvZG9jdW1lbnRzLnRzXG5pbXBvcnQgeyBzcWwgYXMgc3FsNiB9IGZyb20gXCJkcml6emxlLW9ybVwiO1xuaW1wb3J0IHsgcGdUYWJsZSBhcyBwZ1RhYmxlNSwgdGV4dCBhcyB0ZXh0NSwgdGltZXN0YW1wIGFzIHRpbWVzdGFtcDUsIGJvb2xlYW4gYXMgYm9vbGVhbjUsIHZhcmNoYXIgYXMgdmFyY2hhcjUgfSBmcm9tIFwiZHJpenpsZS1vcm0vcGctY29yZVwiO1xuaW1wb3J0IHsgeiBhcyB6NiB9IGZyb20gXCJ6b2RcIjtcbnZhciBkb2N1bWVudHMsIGluc2VydERvY3VtZW50U2NoZW1hLCBhdHRhY2hEb2N1bWVudFNjaGVtYSwgRE9DVU1FTlRfVFlQRVMsIEFUVEFDSEFCTEVfRU5USVRZX1RZUEVTO1xudmFyIGluaXRfZG9jdW1lbnRzID0gX19lc20oe1xuICBcInNoYXJlZC9zY2hlbWFzL2RvY3VtZW50cy50c1wiKCkge1xuICAgIGluaXRfcHJvcGVydHkoKTtcbiAgICBkb2N1bWVudHMgPSBwZ1RhYmxlNShcImRvY3VtZW50c1wiLCB7XG4gICAgICBpZDogdmFyY2hhcjUoXCJpZFwiKS5wcmltYXJ5S2V5KCkuZGVmYXVsdChzcWw2YGdlbl9yYW5kb21fdXVpZCgpYCksXG4gICAgICBuYW1lOiB0ZXh0NShcIm5hbWVcIikubm90TnVsbCgpLFxuICAgICAgZGVzY3JpcHRpb246IHRleHQ1KFwiZGVzY3JpcHRpb25cIiksXG4gICAgICBkb2N1bWVudFR5cGU6IHRleHQ1KFwiZG9jdW1lbnRfdHlwZVwiKS5ub3ROdWxsKCksXG4gICAgICBmaWxlUGF0aDogdGV4dDUoXCJmaWxlX3BhdGhcIikubm90TnVsbCgpLnVuaXF1ZSgpLFxuICAgICAgZmlsZU5hbWU6IHRleHQ1KFwiZmlsZV9uYW1lXCIpLFxuICAgICAgLy8gT3JpZ2luYWwgZmlsZW5hbWVcbiAgICAgIGZpbGVTaXplOiB2YXJjaGFyNShcImZpbGVfc2l6ZVwiKSxcbiAgICAgIC8vIEZpbGUgc2l6ZSBpbiBieXRlc1xuICAgICAgbWltZVR5cGU6IHRleHQ1KFwibWltZV90eXBlXCIpLFxuICAgICAgLy8gTUlNRSB0eXBlIGZvciBwcm9wZXIgaGFuZGxpbmdcbiAgICAgIGlzVmlzaWJsZVRvVGVuYW50czogYm9vbGVhbjUoXCJpc192aXNpYmxlX3RvX3RlbmFudHNcIikuZGVmYXVsdChmYWxzZSkubm90TnVsbCgpLFxuICAgICAgcmVzaWRlbmNlSWQ6IHZhcmNoYXI1KFwicmVzaWRlbmNlX2lkXCIpLnJlZmVyZW5jZXMoKCkgPT4gcmVzaWRlbmNlcy5pZCksXG4gICAgICBidWlsZGluZ0lkOiB2YXJjaGFyNShcImJ1aWxkaW5nX2lkXCIpLnJlZmVyZW5jZXMoKCkgPT4gYnVpbGRpbmdzLmlkKSxcbiAgICAgIHVwbG9hZGVkQnlJZDogdmFyY2hhcjUoXCJ1cGxvYWRlZF9ieV9pZFwiKS5ub3ROdWxsKCksXG4gICAgICAvLyBTdXBwb3J0IGZvciBkb2N1bWVudCBhdHRhY2htZW50cyB0byBmb3Jtc1xuICAgICAgYXR0YWNoZWRUb1R5cGU6IHRleHQ1KFwiYXR0YWNoZWRfdG9fdHlwZVwiKSxcbiAgICAgIC8vICdiaWxsJywgJ2ZlYXR1cmVfcmVxdWVzdCcsICdidWdfcmVwb3J0JywgZXRjLlxuICAgICAgYXR0YWNoZWRUb0lkOiB2YXJjaGFyNShcImF0dGFjaGVkX3RvX2lkXCIpLFxuICAgICAgLy8gSUQgb2YgdGhlIGVudGl0eSB0aGlzIGRvY3VtZW50IGlzIGF0dGFjaGVkIHRvXG4gICAgICBjcmVhdGVkQXQ6IHRpbWVzdGFtcDUoXCJjcmVhdGVkX2F0XCIpLmRlZmF1bHROb3coKS5ub3ROdWxsKCksXG4gICAgICB1cGRhdGVkQXQ6IHRpbWVzdGFtcDUoXCJ1cGRhdGVkX2F0XCIpLmRlZmF1bHROb3coKS5ub3ROdWxsKClcbiAgICB9KTtcbiAgICBpbnNlcnREb2N1bWVudFNjaGVtYSA9IHo2Lm9iamVjdCh7XG4gICAgICBuYW1lOiB6Ni5zdHJpbmcoKS5taW4oMSwgXCJEb2N1bWVudCBuYW1lIGlzIHJlcXVpcmVkXCIpLFxuICAgICAgZGVzY3JpcHRpb246IHo2LnN0cmluZygpLm9wdGlvbmFsKCksXG4gICAgICBkb2N1bWVudFR5cGU6IHo2LnN0cmluZygpLm1pbigxLCBcIkRvY3VtZW50IHR5cGUgaXMgcmVxdWlyZWRcIiksXG4gICAgICBmaWxlUGF0aDogejYuc3RyaW5nKCkubWluKDEsIFwiRmlsZSBwYXRoIGlzIHJlcXVpcmVkXCIpLFxuICAgICAgZmlsZU5hbWU6IHo2LnN0cmluZygpLm9wdGlvbmFsKCksXG4gICAgICBmaWxlU2l6ZTogejYuc3RyaW5nKCkub3B0aW9uYWwoKSxcbiAgICAgIG1pbWVUeXBlOiB6Ni5zdHJpbmcoKS5vcHRpb25hbCgpLFxuICAgICAgaXNWaXNpYmxlVG9UZW5hbnRzOiB6Ni5ib29sZWFuKCkuZGVmYXVsdChmYWxzZSksXG4gICAgICByZXNpZGVuY2VJZDogejYuc3RyaW5nKCkudXVpZCgpLm9wdGlvbmFsKCksXG4gICAgICBidWlsZGluZ0lkOiB6Ni5zdHJpbmcoKS51dWlkKCkub3B0aW9uYWwoKSxcbiAgICAgIHVwbG9hZGVkQnlJZDogejYuc3RyaW5nKCkudXVpZCgpLm1pbigxLCBcIlVwbG9hZGVkIGJ5IHVzZXIgSUQgaXMgcmVxdWlyZWRcIiksXG4gICAgICBhdHRhY2hlZFRvVHlwZTogejYuc3RyaW5nKCkub3B0aW9uYWwoKSxcbiAgICAgIGF0dGFjaGVkVG9JZDogejYuc3RyaW5nKCkudXVpZCgpLm9wdGlvbmFsKClcbiAgICB9KTtcbiAgICBhdHRhY2hEb2N1bWVudFNjaGVtYSA9IHo2Lm9iamVjdCh7XG4gICAgICBuYW1lOiB6Ni5zdHJpbmcoKS5taW4oMSwgXCJEb2N1bWVudCBuYW1lIGlzIHJlcXVpcmVkXCIpLFxuICAgICAgZGVzY3JpcHRpb246IHo2LnN0cmluZygpLm9wdGlvbmFsKCksXG4gICAgICBkb2N1bWVudFR5cGU6IHo2LmVudW0oW1wiYXR0YWNobWVudFwiLCBcInNjcmVlbnNob3RcIiwgXCJldmlkZW5jZVwiLCBcInN1cHBvcnRpbmdfZG9jdW1lbnRcIl0pLmRlZmF1bHQoXCJhdHRhY2htZW50XCIpLFxuICAgICAgZmlsZU5hbWU6IHo2LnN0cmluZygpLm1pbigxLCBcIkZpbGUgbmFtZSBpcyByZXF1aXJlZFwiKSxcbiAgICAgIGZpbGVTaXplOiB6Ni5zdHJpbmcoKS5vcHRpb25hbCgpLFxuICAgICAgbWltZVR5cGU6IHo2LnN0cmluZygpLm9wdGlvbmFsKCksXG4gICAgICBhdHRhY2hlZFRvVHlwZTogejYuZW51bShbXCJiaWxsXCIsIFwiZmVhdHVyZV9yZXF1ZXN0XCIsIFwiYnVnX3JlcG9ydFwiLCBcIm1haW50ZW5hbmNlX3JlcXVlc3RcIl0pLFxuICAgICAgYXR0YWNoZWRUb0lkOiB6Ni5zdHJpbmcoKS51dWlkKCkubWluKDEsIFwiQXR0YWNoZWQgZW50aXR5IElEIGlzIHJlcXVpcmVkXCIpLFxuICAgICAgdXBsb2FkZWRCeUlkOiB6Ni5zdHJpbmcoKS51dWlkKCkubWluKDEsIFwiVXBsb2FkZWQgYnkgdXNlciBJRCBpcyByZXF1aXJlZFwiKVxuICAgIH0pO1xuICAgIERPQ1VNRU5UX1RZUEVTID0ge1xuICAgICAgLy8gQnVpbGRpbmcvUmVzaWRlbmNlIGRvY3VtZW50c1xuICAgICAgQllMQVc6IFwiYnlsYXdcIixcbiAgICAgIEZJTkFOQ0lBTDogXCJmaW5hbmNpYWxcIixcbiAgICAgIE1BSU5URU5BTkNFOiBcIm1haW50ZW5hbmNlXCIsXG4gICAgICBMRUdBTDogXCJsZWdhbFwiLFxuICAgICAgTUVFVElOR19NSU5VVEVTOiBcIm1lZXRpbmdfbWludXRlc1wiLFxuICAgICAgSU5TVVJBTkNFOiBcImluc3VyYW5jZVwiLFxuICAgICAgQ09OVFJBQ1RTOiBcImNvbnRyYWN0c1wiLFxuICAgICAgUEVSTUlUUzogXCJwZXJtaXRzXCIsXG4gICAgICBJTlNQRUNUSU9OOiBcImluc3BlY3Rpb25cIixcbiAgICAgIExFQVNFOiBcImxlYXNlXCIsXG4gICAgICBDT1JSRVNQT05ERU5DRTogXCJjb3JyZXNwb25kZW5jZVwiLFxuICAgICAgVVRJTElUSUVTOiBcInV0aWxpdGllc1wiLFxuICAgICAgT1RIRVI6IFwib3RoZXJcIixcbiAgICAgIC8vIEZvcm0gYXR0YWNobWVudHNcbiAgICAgIEFUVEFDSE1FTlQ6IFwiYXR0YWNobWVudFwiLFxuICAgICAgU0NSRUVOU0hPVDogXCJzY3JlZW5zaG90XCIsXG4gICAgICBFVklERU5DRTogXCJldmlkZW5jZVwiLFxuICAgICAgU1VQUE9SVElOR19ET0NVTUVOVDogXCJzdXBwb3J0aW5nX2RvY3VtZW50XCJcbiAgICB9O1xuICAgIEFUVEFDSEFCTEVfRU5USVRZX1RZUEVTID0ge1xuICAgICAgQklMTDogXCJiaWxsXCIsXG4gICAgICBGRUFUVVJFX1JFUVVFU1Q6IFwiZmVhdHVyZV9yZXF1ZXN0XCIsXG4gICAgICBCVUdfUkVQT1JUOiBcImJ1Z19yZXBvcnRcIixcbiAgICAgIE1BSU5URU5BTkNFX1JFUVVFU1Q6IFwibWFpbnRlbmFuY2VfcmVxdWVzdFwiXG4gICAgfTtcbiAgfVxufSk7XG5cbi8vIHNoYXJlZC9zY2hlbWFzL2RldmVsb3BtZW50LnRzXG5pbXBvcnQgeyBzcWwgYXMgc3FsNyB9IGZyb20gXCJkcml6emxlLW9ybVwiO1xuaW1wb3J0IHtcbiAgcGdUYWJsZSBhcyBwZ1RhYmxlNixcbiAgdGV4dCBhcyB0ZXh0NixcbiAgdmFyY2hhciBhcyB2YXJjaGFyNixcbiAgdGltZXN0YW1wIGFzIHRpbWVzdGFtcDYsXG4gIGpzb25iIGFzIGpzb25iNCxcbiAgdXVpZCBhcyB1dWlkNixcbiAgcGdFbnVtIGFzIHBnRW51bTUsXG4gIGJvb2xlYW4gYXMgYm9vbGVhbjYsXG4gIGludGVnZXIgYXMgaW50ZWdlcjUsXG4gIGRhdGUgYXMgZGF0ZTRcbn0gZnJvbSBcImRyaXp6bGUtb3JtL3BnLWNvcmVcIjtcbmltcG9ydCB7IHogYXMgejcgfSBmcm9tIFwiem9kXCI7XG52YXIgc3VnZ2VzdGlvbkNhdGVnb3J5RW51bSwgc3VnZ2VzdGlvblByaW9yaXR5RW51bSwgc3VnZ2VzdGlvblN0YXR1c0VudW0sIGZlYXR1cmVTdGF0dXNFbnVtLCBmZWF0dXJlUHJpb3JpdHlFbnVtLCBmZWF0dXJlQ2F0ZWdvcnlFbnVtLCBhY3Rpb25hYmxlSXRlbVN0YXR1c0VudW0sIGltcHJvdmVtZW50U3VnZ2VzdGlvbnMsIGZlYXR1cmVzLCBhY3Rpb25hYmxlSXRlbXMsIGRldmVsb3BtZW50UGlsbGFycywgd29ya3NwYWNlU3RhdHVzLCBxdWFsaXR5TWV0cmljcywgZnJhbWV3b3JrQ29uZmlndXJhdGlvbiwgaW5zZXJ0SW1wcm92ZW1lbnRTdWdnZXN0aW9uU2NoZW1hLCBpbnNlcnRGZWF0dXJlU2NoZW1hLCBpbnNlcnRBY3Rpb25hYmxlSXRlbVNjaGVtYSwgaW5zZXJ0UGlsbGFyU2NoZW1hLCBpbnNlcnRXb3Jrc3BhY2VTdGF0dXNTY2hlbWEsIGluc2VydFF1YWxpdHlNZXRyaWNTY2hlbWEsIGluc2VydEZyYW1ld29ya0NvbmZpZ1NjaGVtYTtcbnZhciBpbml0X2RldmVsb3BtZW50ID0gX19lc20oe1xuICBcInNoYXJlZC9zY2hlbWFzL2RldmVsb3BtZW50LnRzXCIoKSB7XG4gICAgaW5pdF9jb3JlKCk7XG4gICAgc3VnZ2VzdGlvbkNhdGVnb3J5RW51bSA9IHBnRW51bTUoXCJzdWdnZXN0aW9uX2NhdGVnb3J5XCIsIFtcbiAgICAgIFwiQ29kZSBRdWFsaXR5XCIsXG4gICAgICBcIlNlY3VyaXR5XCIsXG4gICAgICBcIlRlc3RpbmdcIixcbiAgICAgIFwiRG9jdW1lbnRhdGlvblwiLFxuICAgICAgXCJQZXJmb3JtYW5jZVwiLFxuICAgICAgXCJDb250aW51b3VzIEltcHJvdmVtZW50XCIsXG4gICAgICBcIlJlcGxpdCBBSSBBZ2VudCBNb25pdG9yaW5nXCIsXG4gICAgICBcIlJlcGxpdCBBcHBcIlxuICAgIF0pO1xuICAgIHN1Z2dlc3Rpb25Qcmlvcml0eUVudW0gPSBwZ0VudW01KFwic3VnZ2VzdGlvbl9wcmlvcml0eVwiLCBbXG4gICAgICBcIkxvd1wiLFxuICAgICAgXCJNZWRpdW1cIixcbiAgICAgIFwiSGlnaFwiLFxuICAgICAgXCJDcml0aWNhbFwiXG4gICAgXSk7XG4gICAgc3VnZ2VzdGlvblN0YXR1c0VudW0gPSBwZ0VudW01KFwic3VnZ2VzdGlvbl9zdGF0dXNcIiwgW1wiTmV3XCIsIFwiQWNrbm93bGVkZ2VkXCIsIFwiRG9uZVwiXSk7XG4gICAgZmVhdHVyZVN0YXR1c0VudW0gPSBwZ0VudW01KFwiZmVhdHVyZV9zdGF0dXNcIiwgW1xuICAgICAgXCJzdWJtaXR0ZWRcIixcbiAgICAgIFwicGxhbm5lZFwiLFxuICAgICAgXCJpbi1wcm9ncmVzc1wiLFxuICAgICAgXCJhaS1hbmFseXplZFwiLFxuICAgICAgXCJjb21wbGV0ZWRcIixcbiAgICAgIFwiY2FuY2VsbGVkXCJcbiAgICBdKTtcbiAgICBmZWF0dXJlUHJpb3JpdHlFbnVtID0gcGdFbnVtNShcImZlYXR1cmVfcHJpb3JpdHlcIiwgW1xuICAgICAgXCJsb3dcIixcbiAgICAgIFwibWVkaXVtXCIsXG4gICAgICBcImhpZ2hcIixcbiAgICAgIFwiY3JpdGljYWxcIlxuICAgIF0pO1xuICAgIGZlYXR1cmVDYXRlZ29yeUVudW0gPSBwZ0VudW01KFwiZmVhdHVyZV9jYXRlZ29yeVwiLCBbXG4gICAgICBcIkRhc2hib2FyZCAmIEhvbWVcIixcbiAgICAgIFwiUHJvcGVydHkgTWFuYWdlbWVudFwiLFxuICAgICAgXCJSZXNpZGVudCBNYW5hZ2VtZW50XCIsXG4gICAgICBcIkZpbmFuY2lhbCBNYW5hZ2VtZW50XCIsXG4gICAgICBcIk1haW50ZW5hbmNlICYgUmVxdWVzdHNcIixcbiAgICAgIFwiRG9jdW1lbnQgTWFuYWdlbWVudFwiLFxuICAgICAgXCJDb21tdW5pY2F0aW9uXCIsXG4gICAgICBcIkFJICYgQXV0b21hdGlvblwiLFxuICAgICAgXCJDb21wbGlhbmNlICYgU2VjdXJpdHlcIixcbiAgICAgIFwiQW5hbHl0aWNzICYgUmVwb3J0aW5nXCIsXG4gICAgICBcIkludGVncmF0aW9uICYgQVBJXCIsXG4gICAgICBcIkluZnJhc3RydWN0dXJlICYgUGVyZm9ybWFuY2VcIixcbiAgICAgIFwiV2Vic2l0ZVwiXG4gICAgXSk7XG4gICAgYWN0aW9uYWJsZUl0ZW1TdGF0dXNFbnVtID0gcGdFbnVtNShcImFjdGlvbmFibGVfaXRlbV9zdGF0dXNcIiwgW1xuICAgICAgXCJwZW5kaW5nXCIsXG4gICAgICBcImluLXByb2dyZXNzXCIsXG4gICAgICBcImNvbXBsZXRlZFwiLFxuICAgICAgXCJibG9ja2VkXCJcbiAgICBdKTtcbiAgICBpbXByb3ZlbWVudFN1Z2dlc3Rpb25zID0gcGdUYWJsZTYoXCJpbXByb3ZlbWVudF9zdWdnZXN0aW9uc1wiLCB7XG4gICAgICBpZDogdXVpZDYoXCJpZFwiKS5wcmltYXJ5S2V5KCkuZGVmYXVsdChzcWw3YGdlbl9yYW5kb21fdXVpZCgpYCksXG4gICAgICB0aXRsZTogdGV4dDYoXCJ0aXRsZVwiKS5ub3ROdWxsKCksXG4gICAgICBkZXNjcmlwdGlvbjogdGV4dDYoXCJkZXNjcmlwdGlvblwiKS5ub3ROdWxsKCksXG4gICAgICBjYXRlZ29yeTogc3VnZ2VzdGlvbkNhdGVnb3J5RW51bShcImNhdGVnb3J5XCIpLm5vdE51bGwoKSxcbiAgICAgIHByaW9yaXR5OiBzdWdnZXN0aW9uUHJpb3JpdHlFbnVtKFwicHJpb3JpdHlcIikubm90TnVsbCgpLFxuICAgICAgc3RhdHVzOiBzdWdnZXN0aW9uU3RhdHVzRW51bShcInN0YXR1c1wiKS5ub3ROdWxsKCkuZGVmYXVsdChcIk5ld1wiKSxcbiAgICAgIGZpbGVQYXRoOiB0ZXh0NihcImZpbGVfcGF0aFwiKSxcbiAgICAgIHRlY2huaWNhbERldGFpbHM6IHRleHQ2KFwidGVjaG5pY2FsX2RldGFpbHNcIiksXG4gICAgICBidXNpbmVzc0ltcGFjdDogdGV4dDYoXCJidXNpbmVzc19pbXBhY3RcIiksXG4gICAgICBpbXBsZW1lbnRhdGlvbkVmZm9ydDogdGV4dDYoXCJpbXBsZW1lbnRhdGlvbl9lZmZvcnRcIiksXG4gICAgICBxdWViZWNDb21wbGlhbmNlUmVsZXZhbmNlOiB0ZXh0NihcInF1ZWJlY19jb21wbGlhbmNlX3JlbGV2YW5jZVwiKSxcbiAgICAgIHN1Z2dlc3RlZEJ5OiB2YXJjaGFyNihcInN1Z2dlc3RlZF9ieVwiKS5yZWZlcmVuY2VzKCgpID0+IHVzZXJzLmlkKSxcbiAgICAgIGFzc2lnbmVkVG86IHZhcmNoYXI2KFwiYXNzaWduZWRfdG9cIikucmVmZXJlbmNlcygoKSA9PiB1c2Vycy5pZCksXG4gICAgICBjcmVhdGVkQXQ6IHRpbWVzdGFtcDYoXCJjcmVhdGVkX2F0XCIpLmRlZmF1bHROb3coKSxcbiAgICAgIHVwZGF0ZWRBdDogdGltZXN0YW1wNihcInVwZGF0ZWRfYXRcIikuZGVmYXVsdE5vdygpLFxuICAgICAgYWNrbm93bGVkZ2VkQXQ6IHRpbWVzdGFtcDYoXCJhY2tub3dsZWRnZWRfYXRcIiksXG4gICAgICBjb21wbGV0ZWRBdDogdGltZXN0YW1wNihcImNvbXBsZXRlZF9hdFwiKVxuICAgIH0pO1xuICAgIGZlYXR1cmVzID0gcGdUYWJsZTYoXCJmZWF0dXJlc1wiLCB7XG4gICAgICBpZDogdXVpZDYoXCJpZFwiKS5wcmltYXJ5S2V5KCkuZGVmYXVsdChzcWw3YGdlbl9yYW5kb21fdXVpZCgpYCksXG4gICAgICBuYW1lOiB0ZXh0NihcIm5hbWVcIikubm90TnVsbCgpLFxuICAgICAgZGVzY3JpcHRpb246IHRleHQ2KFwiZGVzY3JpcHRpb25cIikubm90TnVsbCgpLFxuICAgICAgY2F0ZWdvcnk6IGZlYXR1cmVDYXRlZ29yeUVudW0oXCJjYXRlZ29yeVwiKS5ub3ROdWxsKCksXG4gICAgICBzdGF0dXM6IGZlYXR1cmVTdGF0dXNFbnVtKFwic3RhdHVzXCIpLm5vdE51bGwoKS5kZWZhdWx0KFwic3VibWl0dGVkXCIpLFxuICAgICAgcHJpb3JpdHk6IGZlYXR1cmVQcmlvcml0eUVudW0oXCJwcmlvcml0eVwiKS5ub3ROdWxsKCkuZGVmYXVsdChcIm1lZGl1bVwiKSxcbiAgICAgIHJlcXVlc3RlZEJ5OiB0ZXh0NihcInJlcXVlc3RlZF9ieVwiKSxcbiAgICAgIGFzc2lnbmVkVG86IHRleHQ2KFwiYXNzaWduZWRfdG9cIiksXG4gICAgICBlc3RpbWF0ZWRIb3VyczogaW50ZWdlcjUoXCJlc3RpbWF0ZWRfaG91cnNcIiksXG4gICAgICBhY3R1YWxIb3VyczogaW50ZWdlcjUoXCJhY3R1YWxfaG91cnNcIiksXG4gICAgICBzdGFydERhdGU6IGRhdGU0KFwic3RhcnRfZGF0ZVwiKSxcbiAgICAgIGNvbXBsZXRlZERhdGU6IGRhdGU0KFwiY29tcGxldGVkX2RhdGVcIiksXG4gICAgICBpc1B1YmxpY1JvYWRtYXA6IGJvb2xlYW42KFwiaXNfcHVibGljX3JvYWRtYXBcIikubm90TnVsbCgpLmRlZmF1bHQodHJ1ZSksXG4gICAgICB0YWdzOiBqc29uYjQoXCJ0YWdzXCIpLFxuICAgICAgbWV0YWRhdGE6IGpzb25iNChcIm1ldGFkYXRhXCIpLFxuICAgICAgY3JlYXRlZEF0OiB0aW1lc3RhbXA2KFwiY3JlYXRlZF9hdFwiKS5kZWZhdWx0Tm93KCksXG4gICAgICB1cGRhdGVkQXQ6IHRpbWVzdGFtcDYoXCJ1cGRhdGVkX2F0XCIpLmRlZmF1bHROb3coKSxcbiAgICAgIGJ1c2luZXNzT2JqZWN0aXZlOiB0ZXh0NihcImJ1c2luZXNzX29iamVjdGl2ZVwiKSxcbiAgICAgIHRhcmdldFVzZXJzOiB0ZXh0NihcInRhcmdldF91c2Vyc1wiKSxcbiAgICAgIHN1Y2Nlc3NNZXRyaWNzOiB0ZXh0NihcInN1Y2Nlc3NfbWV0cmljc1wiKSxcbiAgICAgIHRlY2huaWNhbENvbXBsZXhpdHk6IHRleHQ2KFwidGVjaG5pY2FsX2NvbXBsZXhpdHlcIiksXG4gICAgICBkZXBlbmRlbmNpZXM6IHRleHQ2KFwiZGVwZW5kZW5jaWVzXCIpLFxuICAgICAgdXNlckZsb3c6IHRleHQ2KFwidXNlcl9mbG93XCIpLFxuICAgICAgYWlBbmFseXNpc1Jlc3VsdDoganNvbmI0KFwiYWlfYW5hbHlzaXNfcmVzdWx0XCIpLFxuICAgICAgYWlBbmFseXplZEF0OiB0aW1lc3RhbXA2KFwiYWlfYW5hbHl6ZWRfYXRcIiksXG4gICAgICBpc1N0cmF0ZWdpY1BhdGg6IGJvb2xlYW42KFwiaXNfc3RyYXRlZ2ljX3BhdGhcIikubm90TnVsbCgpLmRlZmF1bHQoZmFsc2UpLFxuICAgICAgc3luY2VkQXQ6IHRpbWVzdGFtcDYoXCJzeW5jZWRfYXRcIilcbiAgICB9KTtcbiAgICBhY3Rpb25hYmxlSXRlbXMgPSBwZ1RhYmxlNihcImFjdGlvbmFibGVfaXRlbXNcIiwge1xuICAgICAgaWQ6IHV1aWQ2KFwiaWRcIikucHJpbWFyeUtleSgpLmRlZmF1bHQoc3FsN2BnZW5fcmFuZG9tX3V1aWQoKWApLFxuICAgICAgZmVhdHVyZUlkOiB1dWlkNihcImZlYXR1cmVfaWRcIikubm90TnVsbCgpLnJlZmVyZW5jZXMoKCkgPT4gZmVhdHVyZXMuaWQpLFxuICAgICAgdGl0bGU6IHRleHQ2KFwidGl0bGVcIikubm90TnVsbCgpLFxuICAgICAgZGVzY3JpcHRpb246IHRleHQ2KFwiZGVzY3JpcHRpb25cIikubm90TnVsbCgpLFxuICAgICAgdHlwZTogdGV4dDYoXCJ0eXBlXCIpLm5vdE51bGwoKSxcbiAgICAgIC8vICdjb2RlJywgJ3Rlc3QnLCAnZG9jdW1lbnRhdGlvbicsICdkZXNpZ24nLCBldGMuXG4gICAgICBzdGF0dXM6IGFjdGlvbmFibGVJdGVtU3RhdHVzRW51bShcInN0YXR1c1wiKS5ub3ROdWxsKCkuZGVmYXVsdChcInBlbmRpbmdcIiksXG4gICAgICBlc3RpbWF0ZWRIb3VyczogaW50ZWdlcjUoXCJlc3RpbWF0ZWRfaG91cnNcIiksXG4gICAgICBhY3R1YWxIb3VyczogaW50ZWdlcjUoXCJhY3R1YWxfaG91cnNcIiksXG4gICAgICBhc3NpZ25lZFRvOiB2YXJjaGFyNihcImFzc2lnbmVkX3RvXCIpLnJlZmVyZW5jZXMoKCkgPT4gdXNlcnMuaWQpLFxuICAgICAgZGVwZW5kZW5jaWVzOiBqc29uYjQoXCJkZXBlbmRlbmNpZXNcIiksXG4gICAgICAvLyBBcnJheSBvZiBvdGhlciBhY3Rpb25hYmxlIGl0ZW0gSURzXG4gICAgICBhY2NlcHRhbmNlQ3JpdGVyaWE6IHRleHQ2KFwiYWNjZXB0YW5jZV9jcml0ZXJpYVwiKSxcbiAgICAgIGltcGxlbWVudGF0aW9uX25vdGVzOiB0ZXh0NihcImltcGxlbWVudGF0aW9uX25vdGVzXCIpLFxuICAgICAgLy8gQUktZ2VuZXJhdGVkIGFuYWx5c2lzIGZpZWxkc1xuICAgICAgdGVjaG5pY2FsRGV0YWlsczogdGV4dDYoXCJ0ZWNobmljYWxfZGV0YWlsc1wiKSxcbiAgICAgIGltcGxlbWVudGF0aW9uUHJvbXB0OiB0ZXh0NihcImltcGxlbWVudGF0aW9uX3Byb21wdFwiKSxcbiAgICAgIHRlc3RpbmdSZXF1aXJlbWVudHM6IHRleHQ2KFwidGVzdGluZ19yZXF1aXJlbWVudHNcIiksXG4gICAgICBlc3RpbWF0ZWRFZmZvcnQ6IHRleHQ2KFwiZXN0aW1hdGVkX2VmZm9ydFwiKSxcbiAgICAgIG9yZGVySW5kZXg6IGludGVnZXI1KFwib3JkZXJfaW5kZXhcIikuZGVmYXVsdCgwKS5ub3ROdWxsKCksXG4gICAgICBjcmVhdGVkQXQ6IHRpbWVzdGFtcDYoXCJjcmVhdGVkX2F0XCIpLmRlZmF1bHROb3coKSxcbiAgICAgIHVwZGF0ZWRBdDogdGltZXN0YW1wNihcInVwZGF0ZWRfYXRcIikuZGVmYXVsdE5vdygpLFxuICAgICAgc3RhcnRlZEF0OiB0aW1lc3RhbXA2KFwic3RhcnRlZF9hdFwiKSxcbiAgICAgIGNvbXBsZXRlZEF0OiB0aW1lc3RhbXA2KFwiY29tcGxldGVkX2F0XCIpXG4gICAgfSk7XG4gICAgZGV2ZWxvcG1lbnRQaWxsYXJzID0gcGdUYWJsZTYoXCJkZXZlbG9wbWVudF9waWxsYXJzXCIsIHtcbiAgICAgIGlkOiB2YXJjaGFyNihcImlkXCIpLnByaW1hcnlLZXkoKS5kZWZhdWx0KHNxbDdgZ2VuX3JhbmRvbV91dWlkKClgKSxcbiAgICAgIG5hbWU6IHRleHQ2KFwibmFtZVwiKS5ub3ROdWxsKCksXG4gICAgICBkZXNjcmlwdGlvbjogdGV4dDYoXCJkZXNjcmlwdGlvblwiKS5ub3ROdWxsKCksXG4gICAgICBzdGF0dXM6IHRleHQ2KFwic3RhdHVzXCIpLm5vdE51bGwoKS5kZWZhdWx0KFwicGVuZGluZ1wiKSxcbiAgICAgIC8vICdwZW5kaW5nJywgJ2luLXByb2dyZXNzJywgJ2NvbXBsZXRlJ1xuICAgICAgb3JkZXI6IHRleHQ2KFwib3JkZXJcIikubm90TnVsbCgpLFxuICAgICAgY29uZmlndXJhdGlvbjoganNvbmI0KFwiY29uZmlndXJhdGlvblwiKSxcbiAgICAgIGNyZWF0ZWRBdDogdGltZXN0YW1wNihcImNyZWF0ZWRfYXRcIikuZGVmYXVsdE5vdygpLFxuICAgICAgdXBkYXRlZEF0OiB0aW1lc3RhbXA2KFwidXBkYXRlZF9hdFwiKS5kZWZhdWx0Tm93KClcbiAgICB9KTtcbiAgICB3b3Jrc3BhY2VTdGF0dXMgPSBwZ1RhYmxlNihcIndvcmtzcGFjZV9zdGF0dXNcIiwge1xuICAgICAgaWQ6IHZhcmNoYXI2KFwiaWRcIikucHJpbWFyeUtleSgpLmRlZmF1bHQoc3FsN2BnZW5fcmFuZG9tX3V1aWQoKWApLFxuICAgICAgY29tcG9uZW50OiB0ZXh0NihcImNvbXBvbmVudFwiKS5ub3ROdWxsKCksXG4gICAgICBzdGF0dXM6IHRleHQ2KFwic3RhdHVzXCIpLm5vdE51bGwoKS5kZWZhdWx0KFwicGVuZGluZ1wiKSxcbiAgICAgIC8vICdwZW5kaW5nJywgJ2luLXByb2dyZXNzJywgJ2NvbXBsZXRlJ1xuICAgICAgbGFzdFVwZGF0ZWQ6IHRpbWVzdGFtcDYoXCJsYXN0X3VwZGF0ZWRcIikuZGVmYXVsdE5vdygpXG4gICAgfSk7XG4gICAgcXVhbGl0eU1ldHJpY3MgPSBwZ1RhYmxlNihcInF1YWxpdHlfbWV0cmljc1wiLCB7XG4gICAgICBpZDogdmFyY2hhcjYoXCJpZFwiKS5wcmltYXJ5S2V5KCkuZGVmYXVsdChzcWw3YGdlbl9yYW5kb21fdXVpZCgpYCksXG4gICAgICBtZXRyaWNUeXBlOiB0ZXh0NihcIm1ldHJpY190eXBlXCIpLm5vdE51bGwoKSxcbiAgICAgIF92YWx1ZTogdGV4dDYoXCJ2YWx1ZVwiKS5ub3ROdWxsKCksXG4gICAgICB0aW1lc3RhbXA6IHRpbWVzdGFtcDYoXCJ0aW1lc3RhbXBcIikuZGVmYXVsdE5vdygpXG4gICAgfSk7XG4gICAgZnJhbWV3b3JrQ29uZmlndXJhdGlvbiA9IHBnVGFibGU2KFwiZnJhbWV3b3JrX2NvbmZpZ3VyYXRpb25cIiwge1xuICAgICAgaWQ6IHZhcmNoYXI2KFwiaWRcIikucHJpbWFyeUtleSgpLmRlZmF1bHQoc3FsN2BnZW5fcmFuZG9tX3V1aWQoKWApLFxuICAgICAgX2tleTogdGV4dDYoXCJrZXlcIikubm90TnVsbCgpLnVuaXF1ZSgpLFxuICAgICAgX3ZhbHVlOiB0ZXh0NihcInZhbHVlXCIpLm5vdE51bGwoKSxcbiAgICAgIGRlc2NyaXB0aW9uOiB0ZXh0NihcImRlc2NyaXB0aW9uXCIpLFxuICAgICAgY3JlYXRlZEF0OiB0aW1lc3RhbXA2KFwiY3JlYXRlZF9hdFwiKS5kZWZhdWx0Tm93KCksXG4gICAgICB1cGRhdGVkQXQ6IHRpbWVzdGFtcDYoXCJ1cGRhdGVkX2F0XCIpLmRlZmF1bHROb3coKVxuICAgIH0pO1xuICAgIGluc2VydEltcHJvdmVtZW50U3VnZ2VzdGlvblNjaGVtYSA9IHo3Lm9iamVjdCh7XG4gICAgICB0aXRsZTogejcuc3RyaW5nKCksXG4gICAgICBkZXNjcmlwdGlvbjogejcuc3RyaW5nKCksXG4gICAgICBjYXRlZ29yeTogejcuc3RyaW5nKCksXG4gICAgICBwcmlvcml0eTogejcuc3RyaW5nKCkuZGVmYXVsdChcIm1lZGl1bVwiKSxcbiAgICAgIHN0YXR1czogejcuc3RyaW5nKCkuZGVmYXVsdChcIm5ld1wiKSxcbiAgICAgIGZpbGVQYXRoOiB6Ny5zdHJpbmcoKS5vcHRpb25hbCgpLFxuICAgICAgdGVjaG5pY2FsRGV0YWlsczogejcuc3RyaW5nKCkub3B0aW9uYWwoKSxcbiAgICAgIGJ1c2luZXNzSW1wYWN0OiB6Ny5zdHJpbmcoKS5vcHRpb25hbCgpLFxuICAgICAgaW1wbGVtZW50YXRpb25FZmZvcnQ6IHo3LnN0cmluZygpLm9wdGlvbmFsKCksXG4gICAgICBxdWViZWNDb21wbGlhbmNlUmVsZXZhbmNlOiB6Ny5zdHJpbmcoKS5vcHRpb25hbCgpLFxuICAgICAgc3VnZ2VzdGVkQnk6IHo3LnN0cmluZygpLnV1aWQoKS5vcHRpb25hbCgpLFxuICAgICAgYXNzaWduZWRUbzogejcuc3RyaW5nKCkudXVpZCgpLm9wdGlvbmFsKClcbiAgICB9KTtcbiAgICBpbnNlcnRGZWF0dXJlU2NoZW1hID0gejcub2JqZWN0KHtcbiAgICAgIG5hbWU6IHo3LnN0cmluZygpLFxuICAgICAgZGVzY3JpcHRpb246IHo3LnN0cmluZygpLFxuICAgICAgY2F0ZWdvcnk6IHo3LnN0cmluZygpLFxuICAgICAgc3RhdHVzOiB6Ny5zdHJpbmcoKS5kZWZhdWx0KFwicGxhbm5lZFwiKSxcbiAgICAgIHByaW9yaXR5OiB6Ny5zdHJpbmcoKS5kZWZhdWx0KFwibWVkaXVtXCIpLFxuICAgICAgcmVxdWVzdGVkQnk6IHo3LnN0cmluZygpLnV1aWQoKS5vcHRpb25hbCgpLFxuICAgICAgYXNzaWduZWRUbzogejcuc3RyaW5nKCkudXVpZCgpLm9wdGlvbmFsKCksXG4gICAgICBlc3RpbWF0ZWRIb3VyczogejcubnVtYmVyKCkub3B0aW9uYWwoKSxcbiAgICAgIGJ1c2luZXNzT2JqZWN0aXZlOiB6Ny5zdHJpbmcoKS5vcHRpb25hbCgpLFxuICAgICAgdGFyZ2V0VXNlcnM6IHo3LnN0cmluZygpLm9wdGlvbmFsKCksXG4gICAgICBzdWNjZXNzTWV0cmljczogejcuc3RyaW5nKCkub3B0aW9uYWwoKSxcbiAgICAgIHRlY2huaWNhbENvbXBsZXhpdHk6IHo3LnN0cmluZygpLm9wdGlvbmFsKCksXG4gICAgICBkZXBlbmRlbmNpZXM6IHo3LmFycmF5KHo3LnN0cmluZygpKS5vcHRpb25hbCgpLFxuICAgICAgdXNlckZsb3c6IHo3LnN0cmluZygpLm9wdGlvbmFsKClcbiAgICB9KTtcbiAgICBpbnNlcnRBY3Rpb25hYmxlSXRlbVNjaGVtYSA9IHo3Lm9iamVjdCh7XG4gICAgICBmZWF0dXJlSWQ6IHo3LnN0cmluZygpLnV1aWQoKS5vcHRpb25hbCgpLFxuICAgICAgdGl0bGU6IHo3LnN0cmluZygpLFxuICAgICAgZGVzY3JpcHRpb246IHo3LnN0cmluZygpLFxuICAgICAgdHlwZTogejcuc3RyaW5nKCksXG4gICAgICBzdGF0dXM6IHo3LnN0cmluZygpLmRlZmF1bHQoXCJwZW5kaW5nXCIpLFxuICAgICAgZXN0aW1hdGVkSG91cnM6IHo3Lm51bWJlcigpLm9wdGlvbmFsKCksXG4gICAgICBhc3NpZ25lZFRvOiB6Ny5zdHJpbmcoKS51dWlkKCkub3B0aW9uYWwoKSxcbiAgICAgIGRlcGVuZGVuY2llczogejcuYXJyYXkoejcuc3RyaW5nKCkpLm9wdGlvbmFsKCksXG4gICAgICBhY2NlcHRhbmNlQ3JpdGVyaWE6IHo3LnN0cmluZygpLm9wdGlvbmFsKCksXG4gICAgICBpbXBsZW1lbnRhdGlvbl9ub3Rlczogejcuc3RyaW5nKCkub3B0aW9uYWwoKVxuICAgIH0pO1xuICAgIGluc2VydFBpbGxhclNjaGVtYSA9IHo3Lm9iamVjdCh7XG4gICAgICBuYW1lOiB6Ny5zdHJpbmcoKSxcbiAgICAgIGRlc2NyaXB0aW9uOiB6Ny5zdHJpbmcoKS5vcHRpb25hbCgpLFxuICAgICAgc3RhdHVzOiB6Ny5zdHJpbmcoKS5kZWZhdWx0KFwicGVuZGluZ1wiKSxcbiAgICAgIG9yZGVyOiB6Ny5udW1iZXIoKS5pbnQoKSxcbiAgICAgIGNvbmZpZ3VyYXRpb246IHo3LnJlY29yZCh6Ny5zdHJpbmcoKSwgejcuYW55KCkpLm9wdGlvbmFsKClcbiAgICB9KTtcbiAgICBpbnNlcnRXb3Jrc3BhY2VTdGF0dXNTY2hlbWEgPSB6Ny5vYmplY3Qoe1xuICAgICAgY29tcG9uZW50OiB6Ny5zdHJpbmcoKSxcbiAgICAgIHN0YXR1czogejcuc3RyaW5nKCkuZGVmYXVsdChcInBlbmRpbmdcIilcbiAgICB9KTtcbiAgICBpbnNlcnRRdWFsaXR5TWV0cmljU2NoZW1hID0gejcub2JqZWN0KHtcbiAgICAgIG1ldHJpY1R5cGU6IHo3LnN0cmluZygpLFxuICAgICAgX3ZhbHVlOiB6Ny5zdHJpbmcoKVxuICAgIH0pO1xuICAgIGluc2VydEZyYW1ld29ya0NvbmZpZ1NjaGVtYSA9IHo3Lm9iamVjdCh7XG4gICAgICBfa2V5OiB6Ny5zdHJpbmcoKSxcbiAgICAgIF92YWx1ZTogejcuc3RyaW5nKCksXG4gICAgICBkZXNjcmlwdGlvbjogejcuc3RyaW5nKCkub3B0aW9uYWwoKVxuICAgIH0pO1xuICB9XG59KTtcblxuLy8gc2hhcmVkL3NjaGVtYXMvbW9uaXRvcmluZy50c1xuaW1wb3J0IHsgc3FsIGFzIHNxbDggfSBmcm9tIFwiZHJpenpsZS1vcm1cIjtcbmltcG9ydCB7XG4gIHBnVGFibGUgYXMgcGdUYWJsZTcsXG4gIHRleHQgYXMgdGV4dDcsXG4gIHZhcmNoYXIgYXMgdmFyY2hhcjcsXG4gIHRpbWVzdGFtcCBhcyB0aW1lc3RhbXA3LFxuICBqc29uYiBhcyBqc29uYjUsXG4gIHV1aWQgYXMgdXVpZDcsXG4gIHBnRW51bSBhcyBwZ0VudW02LFxuICBib29sZWFuIGFzIGJvb2xlYW43LFxuICBpbnRlZ2VyIGFzIGludGVnZXI2LFxuICBkZWNpbWFsIGFzIGRlY2ltYWw1LFxuICBkYXRlIGFzIGRhdGU1XG59IGZyb20gXCJkcml6emxlLW9ybS9wZy1jb3JlXCI7XG5pbXBvcnQgeyB6IGFzIHo4IH0gZnJvbSBcInpvZFwiO1xudmFyIHZhbGlkYXRpb25TdGF0dXNFbnVtLCBpc3N1ZVNldmVyaXR5RW51bSwgbWV0cmljVHlwZUVudW0sIG1ldHJpY0VmZmVjdGl2ZW5lc3NUcmFja2luZywgbWV0cmljUHJlZGljdGlvbnMsIHByZWRpY3Rpb25WYWxpZGF0aW9ucywgbWV0cmljQ2FsaWJyYXRpb25EYXRhLCBxdWFsaXR5SXNzdWVzLCBpbnNlcnRNZXRyaWNFZmZlY3RpdmVuZXNzVHJhY2tpbmdTY2hlbWEsIGluc2VydE1ldHJpY1ByZWRpY3Rpb25TY2hlbWEsIGluc2VydFByZWRpY3Rpb25WYWxpZGF0aW9uU2NoZW1hLCBpbnNlcnRNZXRyaWNDYWxpYnJhdGlvbkRhdGFTY2hlbWEsIGluc2VydFF1YWxpdHlJc3N1ZVNjaGVtYTtcbnZhciBpbml0X21vbml0b3JpbmcgPSBfX2VzbSh7XG4gIFwic2hhcmVkL3NjaGVtYXMvbW9uaXRvcmluZy50c1wiKCkge1xuICAgIGluaXRfY29yZSgpO1xuICAgIHZhbGlkYXRpb25TdGF0dXNFbnVtID0gcGdFbnVtNihcInZhbGlkYXRpb25fc3RhdHVzXCIsIFtcbiAgICAgIFwicGVuZGluZ1wiLFxuICAgICAgXCJ0cnVlX3Bvc2l0aXZlXCIsXG4gICAgICAvLyBNZXRyaWMgY29ycmVjdGx5IHByZWRpY3RlZCBhbiBpc3N1ZVxuICAgICAgXCJmYWxzZV9wb3NpdGl2ZVwiLFxuICAgICAgLy8gTWV0cmljIHByZWRpY3RlZCBpc3N1ZSBidXQgbm9uZSBmb3VuZFxuICAgICAgXCJ0cnVlX25lZ2F0aXZlXCIsXG4gICAgICAvLyBNZXRyaWMgY29ycmVjdGx5IHByZWRpY3RlZCBubyBpc3N1ZVxuICAgICAgXCJmYWxzZV9uZWdhdGl2ZVwiXG4gICAgICAvLyBNZXRyaWMgbWlzc2VkIGEgcmVhbCBpc3N1ZVxuICAgIF0pO1xuICAgIGlzc3VlU2V2ZXJpdHlFbnVtID0gcGdFbnVtNihcImlzc3VlX3NldmVyaXR5XCIsIFtcbiAgICAgIFwiaW5mb1wiLFxuICAgICAgLy8gTWlub3Igc3VnZ2VzdGlvbnNcbiAgICAgIFwibG93XCIsXG4gICAgICAvLyBOb24tY3JpdGljYWwgaW1wcm92ZW1lbnRzXG4gICAgICBcIm1lZGl1bVwiLFxuICAgICAgLy8gSW1wb3J0YW50IGJ1dCBub3QgdXJnZW50XG4gICAgICBcImhpZ2hcIixcbiAgICAgIC8vIFNpZ25pZmljYW50IGlzc3VlcyBhZmZlY3Rpbmcgb3BlcmF0aW9uc1xuICAgICAgXCJjcml0aWNhbFwiLFxuICAgICAgLy8gU2V2ZXJlIGlzc3VlcyBhZmZlY3RpbmcgY29tcGxpYW5jZSBvciBzYWZldHlcbiAgICAgIFwicXVlYmVjX2NvbXBsaWFuY2VcIlxuICAgICAgLy8gSXNzdWVzIGFmZmVjdGluZyBRdWViZWMgTGF3IDI1IG9yIHByb3ZpbmNpYWwgcmVndWxhdGlvbnNcbiAgICBdKTtcbiAgICBtZXRyaWNUeXBlRW51bSA9IHBnRW51bTYoXCJtZXRyaWNfdHlwZVwiLCBbXG4gICAgICBcImNvZGVfY292ZXJhZ2VcIixcbiAgICAgIFwiY29kZV9xdWFsaXR5XCIsXG4gICAgICBcInNlY3VyaXR5X3Z1bG5lcmFiaWxpdGllc1wiLFxuICAgICAgXCJidWlsZF90aW1lXCIsXG4gICAgICBcInRyYW5zbGF0aW9uX2NvdmVyYWdlXCIsXG4gICAgICBcImFwaV9yZXNwb25zZV90aW1lXCIsXG4gICAgICBcIm1lbW9yeV91c2FnZVwiLFxuICAgICAgXCJidW5kbGVfc2l6ZVwiLFxuICAgICAgXCJkYXRhYmFzZV9xdWVyeV90aW1lXCIsXG4gICAgICBcInBhZ2VfbG9hZF90aW1lXCIsXG4gICAgICBcImFjY2Vzc2liaWxpdHlfc2NvcmVcIixcbiAgICAgIFwic2VvX3Njb3JlXCIsXG4gICAgICBcInF1ZWJlY19jb21wbGlhbmNlX3Njb3JlXCJcbiAgICBdKTtcbiAgICBtZXRyaWNFZmZlY3RpdmVuZXNzVHJhY2tpbmcgPSBwZ1RhYmxlNyhcIm1ldHJpY19lZmZlY3RpdmVuZXNzX3RyYWNraW5nXCIsIHtcbiAgICAgIGlkOiB1dWlkNyhcImlkXCIpLnByaW1hcnlLZXkoKS5kZWZhdWx0KHNxbDhgZ2VuX3JhbmRvbV91dWlkKClgKSxcbiAgICAgIG1ldHJpY1R5cGU6IG1ldHJpY1R5cGVFbnVtKFwibWV0cmljX3R5cGVcIikubm90TnVsbCgpLFxuICAgICAgY2FsY3VsYXRlZFZhbHVlOiBkZWNpbWFsNShcImNhbGN1bGF0ZWRfdmFsdWVcIiwgeyBwcmVjaXNpb246IDEwLCBzY2FsZTogNCB9KS5ub3ROdWxsKCksXG4gICAgICBhY3R1YWxPdXRjb21lOiB0ZXh0NyhcImFjdHVhbF9vdXRjb21lXCIpLm5vdE51bGwoKSxcbiAgICAgIGFjY3VyYWN5OiBkZWNpbWFsNShcImFjY3VyYWN5XCIsIHsgcHJlY2lzaW9uOiA1LCBzY2FsZTogNCB9KS5ub3ROdWxsKCksXG4gICAgICBwcmVjaXNpb246IGRlY2ltYWw1KFwicHJlY2lzaW9uXCIsIHsgcHJlY2lzaW9uOiA1LCBzY2FsZTogNCB9KS5ub3ROdWxsKCksXG4gICAgICByZWNhbGw6IGRlY2ltYWw1KFwicmVjYWxsXCIsIHsgcHJlY2lzaW9uOiA1LCBzY2FsZTogNCB9KS5ub3ROdWxsKCksXG4gICAgICBmMVNjb3JlOiBkZWNpbWFsNShcImYxX3Njb3JlXCIsIHsgcHJlY2lzaW9uOiA1LCBzY2FsZTogNCB9KS5ub3ROdWxsKCksXG4gICAgICBjYWxpYnJhdGlvblNjb3JlOiBkZWNpbWFsNShcImNhbGlicmF0aW9uX3Njb3JlXCIsIHsgcHJlY2lzaW9uOiA1LCBzY2FsZTogNCB9KSxcbiAgICAgIHByZWRpY3Rpb25Db25maWRlbmNlOiBkZWNpbWFsNShcInByZWRpY3Rpb25fY29uZmlkZW5jZVwiLCB7IHByZWNpc2lvbjogNSwgc2NhbGU6IDQgfSksXG4gICAgICB2YWxpZGF0aW9uRGF0ZTogZGF0ZTUoXCJ2YWxpZGF0aW9uX2RhdGVcIikubm90TnVsbCgpLFxuICAgICAgcXVlYmVjQ29tcGxpYW5jZUltcGFjdDogYm9vbGVhbjcoXCJxdWViZWNfY29tcGxpYW5jZV9pbXBhY3RcIikubm90TnVsbCgpLmRlZmF1bHQoZmFsc2UpLFxuICAgICAgcHJvcGVydHlNYW5hZ2VtZW50Q29udGV4dDogdGV4dDcoXCJwcm9wZXJ0eV9tYW5hZ2VtZW50X2NvbnRleHRcIiksXG4gICAgICBjcmVhdGVkQXQ6IHRpbWVzdGFtcDcoXCJjcmVhdGVkX2F0XCIpLmRlZmF1bHROb3coKSxcbiAgICAgIHVwZGF0ZWRBdDogdGltZXN0YW1wNyhcInVwZGF0ZWRfYXRcIikuZGVmYXVsdE5vdygpXG4gICAgfSk7XG4gICAgbWV0cmljUHJlZGljdGlvbnMgPSBwZ1RhYmxlNyhcIm1ldHJpY19wcmVkaWN0aW9uc1wiLCB7XG4gICAgICBpZDogdXVpZDcoXCJpZFwiKS5wcmltYXJ5S2V5KCkuZGVmYXVsdChzcWw4YGdlbl9yYW5kb21fdXVpZCgpYCksXG4gICAgICBtZXRyaWNUeXBlOiBtZXRyaWNUeXBlRW51bShcIm1ldHJpY190eXBlXCIpLm5vdE51bGwoKSxcbiAgICAgIHByZWRpY3RlZFZhbHVlOiBkZWNpbWFsNShcInByZWRpY3RlZF92YWx1ZVwiLCB7IHByZWNpc2lvbjogMTAsIHNjYWxlOiA0IH0pLm5vdE51bGwoKSxcbiAgICAgIGNvbmZpZGVuY2VMZXZlbDogZGVjaW1hbDUoXCJjb25maWRlbmNlX2xldmVsXCIsIHsgcHJlY2lzaW9uOiA1LCBzY2FsZTogNCB9KS5ub3ROdWxsKCksXG4gICAgICB0aHJlc2hvbGRVc2VkOiBkZWNpbWFsNShcInRocmVzaG9sZF91c2VkXCIsIHsgcHJlY2lzaW9uOiAxMCwgc2NhbGU6IDQgfSkubm90TnVsbCgpLFxuICAgICAgY29udGV4dERhdGE6IGpzb25iNShcImNvbnRleHRfZGF0YVwiKSxcbiAgICAgIHByZWRpY3Rpb25SZWFzb246IHRleHQ3KFwicHJlZGljdGlvbl9yZWFzb25cIiksXG4gICAgICBleHBlY3RlZFNldmVyaXR5OiBpc3N1ZVNldmVyaXR5RW51bShcImV4cGVjdGVkX3NldmVyaXR5XCIpLm5vdE51bGwoKSxcbiAgICAgIHF1ZWJlY0NvbXBsaWFuY2VSZWxldmFudDogYm9vbGVhbjcoXCJxdWViZWNfY29tcGxpYW5jZV9yZWxldmFudFwiKS5ub3ROdWxsKCkuZGVmYXVsdChmYWxzZSksXG4gICAgICBwcm9wZXJ0eU1hbmFnZW1lbnRDYXRlZ29yeTogdGV4dDcoXCJwcm9wZXJ0eV9tYW5hZ2VtZW50X2NhdGVnb3J5XCIpLFxuICAgICAgZmlsZVBhdGg6IHRleHQ3KFwiZmlsZV9wYXRoXCIpLFxuICAgICAgbGluZU51bWJlcjogaW50ZWdlcjYoXCJsaW5lX251bWJlclwiKSxcbiAgICAgIGNyZWF0ZWRBdDogdGltZXN0YW1wNyhcImNyZWF0ZWRfYXRcIikuZGVmYXVsdE5vdygpXG4gICAgfSk7XG4gICAgcHJlZGljdGlvblZhbGlkYXRpb25zID0gcGdUYWJsZTcoXCJwcmVkaWN0aW9uX3ZhbGlkYXRpb25zXCIsIHtcbiAgICAgIGlkOiB1dWlkNyhcImlkXCIpLnByaW1hcnlLZXkoKS5kZWZhdWx0KHNxbDhgZ2VuX3JhbmRvbV91dWlkKClgKSxcbiAgICAgIHByZWRpY3Rpb25JZDogdXVpZDcoXCJwcmVkaWN0aW9uX2lkXCIpLm5vdE51bGwoKS5yZWZlcmVuY2VzKCgpID0+IG1ldHJpY1ByZWRpY3Rpb25zLmlkKSxcbiAgICAgIHZhbGlkYXRpb25TdGF0dXM6IHZhbGlkYXRpb25TdGF0dXNFbnVtKFwidmFsaWRhdGlvbl9zdGF0dXNcIikubm90TnVsbCgpLFxuICAgICAgYWN0dWFsT3V0Y29tZTogdGV4dDcoXCJhY3R1YWxfb3V0Y29tZVwiKS5ub3ROdWxsKCksXG4gICAgICB2YWxpZGF0aW9uTWV0aG9kOiB0ZXh0NyhcInZhbGlkYXRpb25fbWV0aG9kXCIpLm5vdE51bGwoKSxcbiAgICAgIHZhbGlkYXRvcklkOiB2YXJjaGFyNyhcInZhbGlkYXRvcl9pZFwiKS5yZWZlcmVuY2VzKCgpID0+IHVzZXJzLmlkKSxcbiAgICAgIHRpbWVUYWtlbjogaW50ZWdlcjYoXCJ0aW1lX3Rha2VuXCIpLFxuICAgICAgLy8gSG91cnMgdG8gdmFsaWRhdGVcbiAgICAgIGltcGFjdExldmVsOiBpc3N1ZVNldmVyaXR5RW51bShcImltcGFjdF9sZXZlbFwiKSxcbiAgICAgIHJlc29sdXRpb25BY3Rpb25zOiB0ZXh0NyhcInJlc29sdXRpb25fYWN0aW9uc1wiKSxcbiAgICAgIHF1ZWJlY0NvbXBsaWFuY2VOb3RlczogdGV4dDcoXCJxdWViZWNfY29tcGxpYW5jZV9ub3Rlc1wiKSxcbiAgICAgIGNvc3RJbXBhY3Q6IGRlY2ltYWw1KFwiY29zdF9pbXBhY3RcIiwgeyBwcmVjaXNpb246IDEwLCBzY2FsZTogMiB9KSxcbiAgICAgIHZhbGlkYXRlZEF0OiB0aW1lc3RhbXA3KFwidmFsaWRhdGVkX2F0XCIpLm5vdE51bGwoKSxcbiAgICAgIGNyZWF0ZWRBdDogdGltZXN0YW1wNyhcImNyZWF0ZWRfYXRcIikuZGVmYXVsdE5vdygpXG4gICAgfSk7XG4gICAgbWV0cmljQ2FsaWJyYXRpb25EYXRhID0gcGdUYWJsZTcoXCJtZXRyaWNfY2FsaWJyYXRpb25fZGF0YVwiLCB7XG4gICAgICBpZDogdXVpZDcoXCJpZFwiKS5wcmltYXJ5S2V5KCkuZGVmYXVsdChzcWw4YGdlbl9yYW5kb21fdXVpZCgpYCksXG4gICAgICBtZXRyaWNUeXBlOiBtZXRyaWNUeXBlRW51bShcIm1ldHJpY190eXBlXCIpLm5vdE51bGwoKSxcbiAgICAgIGNhbGlicmF0aW9uTW9kZWw6IHRleHQ3KFwiY2FsaWJyYXRpb25fbW9kZWxcIikubm90TnVsbCgpLFxuICAgICAgdHJhaW5pbmdEYXRhU2l6ZTogaW50ZWdlcjYoXCJ0cmFpbmluZ19kYXRhX3NpemVcIikubm90TnVsbCgpLFxuICAgICAgYWNjdXJhY3k6IGRlY2ltYWw1KFwiYWNjdXJhY3lcIiwgeyBwcmVjaXNpb246IDUsIHNjYWxlOiA0IH0pLm5vdE51bGwoKSxcbiAgICAgIHByZWNpc2lvbjogZGVjaW1hbDUoXCJwcmVjaXNpb25cIiwgeyBwcmVjaXNpb246IDUsIHNjYWxlOiA0IH0pLm5vdE51bGwoKSxcbiAgICAgIHJlY2FsbDogZGVjaW1hbDUoXCJyZWNhbGxcIiwgeyBwcmVjaXNpb246IDUsIHNjYWxlOiA0IH0pLm5vdE51bGwoKSxcbiAgICAgIGYxU2NvcmU6IGRlY2ltYWw1KFwiZjFfc2NvcmVcIiwgeyBwcmVjaXNpb246IDUsIHNjYWxlOiA0IH0pLm5vdE51bGwoKSxcbiAgICAgIGNyb3NzVmFsaWRhdGlvblNjb3JlOiBkZWNpbWFsNShcImNyb3NzX3ZhbGlkYXRpb25fc2NvcmVcIiwgeyBwcmVjaXNpb246IDUsIHNjYWxlOiA0IH0pLFxuICAgICAgZmVhdHVyZUltcG9ydGFuY2U6IGpzb25iNShcImZlYXR1cmVfaW1wb3J0YW5jZVwiKSxcbiAgICAgIGh5cGVycGFyYW1ldGVyczoganNvbmI1KFwiaHlwZXJwYXJhbWV0ZXJzXCIpLFxuICAgICAgcXVlYmVjU3BlY2lmaWNGYWN0b3JzOiBqc29uYjUoXCJxdWViZWNfc3BlY2lmaWNfZmFjdG9yc1wiKSxcbiAgICAgIGxhc3RUcmFpbmluZ0RhdGU6IGRhdGU1KFwibGFzdF90cmFpbmluZ19kYXRlXCIpLm5vdE51bGwoKSxcbiAgICAgIG1vZGVsVmVyc2lvbjogdGV4dDcoXCJtb2RlbF92ZXJzaW9uXCIpLm5vdE51bGwoKSxcbiAgICAgIGlzQWN0aXZlOiBib29sZWFuNyhcImlzX2FjdGl2ZVwiKS5ub3ROdWxsKCkuZGVmYXVsdCh0cnVlKSxcbiAgICAgIHBlcmZvcm1hbmNlTWV0cmljczoganNvbmI1KFwicGVyZm9ybWFuY2VfbWV0cmljc1wiKSxcbiAgICAgIGNyZWF0ZWRBdDogdGltZXN0YW1wNyhcImNyZWF0ZWRfYXRcIikuZGVmYXVsdE5vdygpLFxuICAgICAgdXBkYXRlZEF0OiB0aW1lc3RhbXA3KFwidXBkYXRlZF9hdFwiKS5kZWZhdWx0Tm93KClcbiAgICB9KTtcbiAgICBxdWFsaXR5SXNzdWVzID0gcGdUYWJsZTcoXCJxdWFsaXR5X2lzc3Vlc1wiLCB7XG4gICAgICBpZDogdXVpZDcoXCJpZFwiKS5wcmltYXJ5S2V5KCkuZGVmYXVsdChzcWw4YGdlbl9yYW5kb21fdXVpZCgpYCksXG4gICAgICB0aXRsZTogdGV4dDcoXCJ0aXRsZVwiKS5ub3ROdWxsKCksXG4gICAgICBkZXNjcmlwdGlvbjogdGV4dDcoXCJkZXNjcmlwdGlvblwiKS5ub3ROdWxsKCksXG4gICAgICBjYXRlZ29yeTogdGV4dDcoXCJjYXRlZ29yeVwiKS5ub3ROdWxsKCksXG4gICAgICBzZXZlcml0eTogaXNzdWVTZXZlcml0eUVudW0oXCJzZXZlcml0eVwiKS5ub3ROdWxsKCksXG4gICAgICBmaWxlUGF0aDogdGV4dDcoXCJmaWxlX3BhdGhcIikubm90TnVsbCgpLFxuICAgICAgbGluZU51bWJlcjogaW50ZWdlcjYoXCJsaW5lX251bWJlclwiKSxcbiAgICAgIGRldGVjdGlvbk1ldGhvZDogdGV4dDcoXCJkZXRlY3Rpb25fbWV0aG9kXCIpLm5vdE51bGwoKSxcbiAgICAgIGRldGVjdGVkQnk6IHZhcmNoYXI3KFwiZGV0ZWN0ZWRfYnlcIikucmVmZXJlbmNlcygoKSA9PiB1c2Vycy5pZCksXG4gICAgICByZWxhdGVkTWV0cmljVHlwZTogbWV0cmljVHlwZUVudW0oXCJyZWxhdGVkX21ldHJpY190eXBlXCIpLFxuICAgICAgd2FzUHJlZGljdGVkOiBib29sZWFuNyhcIndhc19wcmVkaWN0ZWRcIikubm90TnVsbCgpLmRlZmF1bHQoZmFsc2UpLFxuICAgICAgcHJlZGljdGlvbklkOiB1dWlkNyhcInByZWRpY3Rpb25faWRcIikucmVmZXJlbmNlcygoKSA9PiBtZXRyaWNQcmVkaWN0aW9ucy5pZCksXG4gICAgICByZXNvbHV0aW9uU3RhdHVzOiB0ZXh0NyhcInJlc29sdXRpb25fc3RhdHVzXCIpLm5vdE51bGwoKS5kZWZhdWx0KFwib3BlblwiKSxcbiAgICAgIHJlc29sdXRpb25UaW1lOiBpbnRlZ2VyNihcInJlc29sdXRpb25fdGltZVwiKSxcbiAgICAgIC8vIEhvdXJzIHRvIHJlc29sdmVcbiAgICAgIHJlc29sdXRpb25BY3Rpb25zOiB0ZXh0NyhcInJlc29sdXRpb25fYWN0aW9uc1wiKSxcbiAgICAgIHF1ZWJlY0NvbXBsaWFuY2VSZWxhdGVkOiBib29sZWFuNyhcInF1ZWJlY19jb21wbGlhbmNlX3JlbGF0ZWRcIikubm90TnVsbCgpLmRlZmF1bHQoZmFsc2UpLFxuICAgICAgcHJvcGVydHlNYW5hZ2VtZW50SW1wYWN0OiB0ZXh0NyhcInByb3BlcnR5X21hbmFnZW1lbnRfaW1wYWN0XCIpLFxuICAgICAgY29zdFRvRml4OiBkZWNpbWFsNShcImNvc3RfdG9fZml4XCIsIHsgcHJlY2lzaW9uOiAxMCwgc2NhbGU6IDIgfSksXG4gICAgICBhY3R1YWxDb3N0OiBkZWNpbWFsNShcImFjdHVhbF9jb3N0XCIsIHsgcHJlY2lzaW9uOiAxMCwgc2NhbGU6IDIgfSksXG4gICAgICBkaXNjb3ZlcmVkQXQ6IHRpbWVzdGFtcDcoXCJkaXNjb3ZlcmVkX2F0XCIpLm5vdE51bGwoKSxcbiAgICAgIHJlc29sdmVkQXQ6IHRpbWVzdGFtcDcoXCJyZXNvbHZlZF9hdFwiKSxcbiAgICAgIGNyZWF0ZWRBdDogdGltZXN0YW1wNyhcImNyZWF0ZWRfYXRcIikuZGVmYXVsdE5vdygpLFxuICAgICAgdXBkYXRlZEF0OiB0aW1lc3RhbXA3KFwidXBkYXRlZF9hdFwiKS5kZWZhdWx0Tm93KClcbiAgICB9KTtcbiAgICBpbnNlcnRNZXRyaWNFZmZlY3RpdmVuZXNzVHJhY2tpbmdTY2hlbWEgPSB6OC5vYmplY3Qoe1xuICAgICAgbWV0cmljVHlwZTogejguZW51bShbXG4gICAgICAgIFwiY29kZV9jb3ZlcmFnZVwiLFxuICAgICAgICBcImNvZGVfcXVhbGl0eVwiLFxuICAgICAgICBcInNlY3VyaXR5X3Z1bG5lcmFiaWxpdGllc1wiLFxuICAgICAgICBcImJ1aWxkX3RpbWVcIixcbiAgICAgICAgXCJ0cmFuc2xhdGlvbl9jb3ZlcmFnZVwiLFxuICAgICAgICBcImFwaV9yZXNwb25zZV90aW1lXCIsXG4gICAgICAgIFwiZGVwbG95bWVudF9zdWNjZXNzX3JhdGVcIixcbiAgICAgICAgXCJ1c2VyX3NhdGlzZmFjdGlvblwiLFxuICAgICAgICBcInBlcmZvcm1hbmNlX3Njb3JlXCIsXG4gICAgICAgIFwidGVzdF9yZWxpYWJpbGl0eVwiLFxuICAgICAgICBcInF1ZWJlY19jb21wbGlhbmNlX3Njb3JlXCIsXG4gICAgICAgIFwibWFpbnRlbmFuY2VfcHJvZHVjdGl2aXR5XCJcbiAgICAgIF0pLFxuICAgICAgY2FsY3VsYXRlZFZhbHVlOiB6OC5udW1iZXIoKSxcbiAgICAgIGFjdHVhbE91dGNvbWU6IHo4Lm51bWJlcigpLFxuICAgICAgYWNjdXJhY3k6IHo4Lm51bWJlcigpLFxuICAgICAgcHJlY2lzaW9uOiB6OC5udW1iZXIoKSxcbiAgICAgIHJlY2FsbDogejgubnVtYmVyKCksXG4gICAgICBmMVNjb3JlOiB6OC5udW1iZXIoKSxcbiAgICAgIGNhbGlicmF0aW9uU2NvcmU6IHo4Lm51bWJlcigpLFxuICAgICAgcHJlZGljdGlvbkNvbmZpZGVuY2U6IHo4Lm51bWJlcigpLFxuICAgICAgdmFsaWRhdGlvbkRhdGU6IHo4LmRhdGUoKSxcbiAgICAgIHF1ZWJlY0NvbXBsaWFuY2VJbXBhY3Q6IHo4LnN0cmluZygpLm9wdGlvbmFsKCksXG4gICAgICBwcm9wZXJ0eU1hbmFnZW1lbnRDb250ZXh0OiB6OC5zdHJpbmcoKS5vcHRpb25hbCgpXG4gICAgfSk7XG4gICAgaW5zZXJ0TWV0cmljUHJlZGljdGlvblNjaGVtYSA9IHo4Lm9iamVjdCh7XG4gICAgICBtZXRyaWNUeXBlOiB6OC5lbnVtKFtcbiAgICAgICAgXCJjb2RlX2NvdmVyYWdlXCIsXG4gICAgICAgIFwiY29kZV9xdWFsaXR5XCIsXG4gICAgICAgIFwic2VjdXJpdHlfdnVsbmVyYWJpbGl0aWVzXCIsXG4gICAgICAgIFwiYnVpbGRfdGltZVwiLFxuICAgICAgICBcInRyYW5zbGF0aW9uX2NvdmVyYWdlXCIsXG4gICAgICAgIFwiYXBpX3Jlc3BvbnNlX3RpbWVcIixcbiAgICAgICAgXCJkZXBsb3ltZW50X3N1Y2Nlc3NfcmF0ZVwiLFxuICAgICAgICBcInVzZXJfc2F0aXNmYWN0aW9uXCIsXG4gICAgICAgIFwicGVyZm9ybWFuY2Vfc2NvcmVcIixcbiAgICAgICAgXCJ0ZXN0X3JlbGlhYmlsaXR5XCIsXG4gICAgICAgIFwicXVlYmVjX2NvbXBsaWFuY2Vfc2NvcmVcIixcbiAgICAgICAgXCJtYWludGVuYW5jZV9wcm9kdWN0aXZpdHlcIlxuICAgICAgXSksXG4gICAgICBwcmVkaWN0ZWRWYWx1ZTogejgubnVtYmVyKCksXG4gICAgICBjb25maWRlbmNlTGV2ZWw6IHo4Lm51bWJlcigpLFxuICAgICAgdGhyZXNob2xkVXNlZDogejgubnVtYmVyKCksXG4gICAgICBjb250ZXh0RGF0YTogejgucmVjb3JkKHo4LnN0cmluZygpLCB6OC5hbnkoKSkub3B0aW9uYWwoKSxcbiAgICAgIHByZWRpY3Rpb25SZWFzb246IHo4LnN0cmluZygpLFxuICAgICAgZXhwZWN0ZWRTZXZlcml0eTogejguc3RyaW5nKCksXG4gICAgICBxdWViZWNDb21wbGlhbmNlUmVsZXZhbnQ6IHo4LmJvb2xlYW4oKS5kZWZhdWx0KGZhbHNlKSxcbiAgICAgIHByb3BlcnR5TWFuYWdlbWVudENhdGVnb3J5OiB6OC5zdHJpbmcoKS5vcHRpb25hbCgpLFxuICAgICAgZmlsZVBhdGg6IHo4LnN0cmluZygpLFxuICAgICAgbGluZU51bWJlcjogejgubnVtYmVyKCkuaW50KCkub3B0aW9uYWwoKVxuICAgIH0pO1xuICAgIGluc2VydFByZWRpY3Rpb25WYWxpZGF0aW9uU2NoZW1hID0gejgub2JqZWN0KHtcbiAgICAgIHByZWRpY3Rpb25JZDogejguc3RyaW5nKCkudXVpZCgpLFxuICAgICAgdmFsaWRhdGlvblN0YXR1czogejguZW51bShbXCJ2YWxpZGF0ZWRcIiwgXCJmYWlsZWRcIiwgXCJwYXJ0aWFsbHlfdmFsaWRhdGVkXCIsIFwibmVlZHNfcmV2aWV3XCJdKSxcbiAgICAgIGFjdHVhbE91dGNvbWU6IHo4Lm51bWJlcigpLFxuICAgICAgdmFsaWRhdGlvbk1ldGhvZDogejguc3RyaW5nKCksXG4gICAgICB2YWxpZGF0b3JJZDogejguc3RyaW5nKCkudXVpZCgpLm9wdGlvbmFsKCksXG4gICAgICB0aW1lVGFrZW46IHo4Lm51bWJlcigpLm9wdGlvbmFsKCksXG4gICAgICBpbXBhY3RMZXZlbDogejguc3RyaW5nKCkub3B0aW9uYWwoKSxcbiAgICAgIHJlc29sdXRpb25BY3Rpb25zOiB6OC5zdHJpbmcoKS5vcHRpb25hbCgpLFxuICAgICAgcXVlYmVjQ29tcGxpYW5jZU5vdGVzOiB6OC5zdHJpbmcoKS5vcHRpb25hbCgpLFxuICAgICAgY29zdEltcGFjdDogejgubnVtYmVyKCkub3B0aW9uYWwoKSxcbiAgICAgIHZhbGlkYXRlZEF0OiB6OC5kYXRlKClcbiAgICB9KTtcbiAgICBpbnNlcnRNZXRyaWNDYWxpYnJhdGlvbkRhdGFTY2hlbWEgPSB6OC5vYmplY3Qoe1xuICAgICAgbWV0cmljVHlwZTogejguc3RyaW5nKCksXG4gICAgICBjYWxpYnJhdGlvbk1vZGVsOiB6OC5zdHJpbmcoKSxcbiAgICAgIHRyYWluaW5nRGF0YVNpemU6IHo4Lm51bWJlcigpLmludCgpLFxuICAgICAgYWNjdXJhY3k6IHo4Lm51bWJlcigpLFxuICAgICAgcHJlY2lzaW9uOiB6OC5udW1iZXIoKSxcbiAgICAgIHJlY2FsbDogejgubnVtYmVyKCksXG4gICAgICBmMVNjb3JlOiB6OC5udW1iZXIoKSxcbiAgICAgIGNyb3NzVmFsaWRhdGlvblNjb3JlOiB6OC5udW1iZXIoKSxcbiAgICAgIGZlYXR1cmVJbXBvcnRhbmNlOiB6OC5yZWNvcmQoejguc3RyaW5nKCksIHo4Lm51bWJlcigpKS5vcHRpb25hbCgpLFxuICAgICAgaHlwZXJwYXJhbWV0ZXJzOiB6OC5yZWNvcmQoejguc3RyaW5nKCksIHo4LmFueSgpKS5vcHRpb25hbCgpLFxuICAgICAgcXVlYmVjU3BlY2lmaWNGYWN0b3JzOiB6OC5yZWNvcmQoejguc3RyaW5nKCksIHo4LmFueSgpKS5vcHRpb25hbCgpLFxuICAgICAgbGFzdFRyYWluaW5nRGF0ZTogejguZGF0ZSgpLFxuICAgICAgbW9kZWxWZXJzaW9uOiB6OC5zdHJpbmcoKSxcbiAgICAgIGlzQWN0aXZlOiB6OC5ib29sZWFuKCkuZGVmYXVsdCh0cnVlKSxcbiAgICAgIHBlcmZvcm1hbmNlTWV0cmljczogejgucmVjb3JkKHo4LnN0cmluZygpLCB6OC5udW1iZXIoKSkub3B0aW9uYWwoKVxuICAgIH0pO1xuICAgIGluc2VydFF1YWxpdHlJc3N1ZVNjaGVtYSA9IHo4Lm9iamVjdCh7XG4gICAgICB0aXRsZTogejguc3RyaW5nKCksXG4gICAgICBkZXNjcmlwdGlvbjogejguc3RyaW5nKCksXG4gICAgICBjYXRlZ29yeTogejguc3RyaW5nKCksXG4gICAgICBzZXZlcml0eTogejguc3RyaW5nKCksXG4gICAgICBmaWxlUGF0aDogejguc3RyaW5nKCksXG4gICAgICBsaW5lTnVtYmVyOiB6OC5udW1iZXIoKS5pbnQoKS5vcHRpb25hbCgpLFxuICAgICAgZGV0ZWN0aW9uTWV0aG9kOiB6OC5zdHJpbmcoKSxcbiAgICAgIGRldGVjdGVkQnk6IHo4LnN0cmluZygpLnV1aWQoKS5vcHRpb25hbCgpLFxuICAgICAgcmVsYXRlZE1ldHJpY1R5cGU6IHo4LnN0cmluZygpLm9wdGlvbmFsKCksXG4gICAgICB3YXNQcmVkaWN0ZWQ6IHo4LmJvb2xlYW4oKS5kZWZhdWx0KGZhbHNlKSxcbiAgICAgIHByZWRpY3Rpb25JZDogejguc3RyaW5nKCkudXVpZCgpLm9wdGlvbmFsKCksXG4gICAgICByZXNvbHV0aW9uU3RhdHVzOiB6OC5zdHJpbmcoKS5kZWZhdWx0KFwib3BlblwiKSxcbiAgICAgIHJlc29sdXRpb25UaW1lOiB6OC5udW1iZXIoKS5pbnQoKS5vcHRpb25hbCgpLFxuICAgICAgcmVzb2x1dGlvbkFjdGlvbnM6IHo4LnN0cmluZygpLm9wdGlvbmFsKCksXG4gICAgICBxdWViZWNDb21wbGlhbmNlUmVsYXRlZDogejguYm9vbGVhbigpLmRlZmF1bHQoZmFsc2UpLFxuICAgICAgcHJvcGVydHlNYW5hZ2VtZW50SW1wYWN0OiB6OC5zdHJpbmcoKS5vcHRpb25hbCgpLFxuICAgICAgY29zdFRvRml4OiB6OC5udW1iZXIoKS5vcHRpb25hbCgpLFxuICAgICAgYWN0dWFsQ29zdDogejgubnVtYmVyKCkub3B0aW9uYWwoKSxcbiAgICAgIGRpc2NvdmVyZWRBdDogejguZGF0ZSgpLFxuICAgICAgcmVzb2x2ZWRBdDogejguZGF0ZSgpLm9wdGlvbmFsKClcbiAgICB9KTtcbiAgfVxufSk7XG5cbi8vIHNoYXJlZC9zY2hlbWFzL2luZnJhc3RydWN0dXJlLnRzXG5pbXBvcnQgeyBzcWwgYXMgc3FsOSB9IGZyb20gXCJkcml6emxlLW9ybVwiO1xuaW1wb3J0IHsgcGdUYWJsZSBhcyBwZ1RhYmxlOCwgdGV4dCBhcyB0ZXh0OCwgdGltZXN0YW1wIGFzIHRpbWVzdGFtcDgsIHV1aWQgYXMgdXVpZDgsIHBnRW51bSBhcyBwZ0VudW03LCBib29sZWFuIGFzIGJvb2xlYW44LCBpbnRlZ2VyIGFzIGludGVnZXI3LCB2YXJjaGFyIGFzIHZhcmNoYXI4LCBqc29uIGFzIGpzb24yIH0gZnJvbSBcImRyaXp6bGUtb3JtL3BnLWNvcmVcIjtcbmltcG9ydCB7IHogYXMgejkgfSBmcm9tIFwiem9kXCI7XG52YXIgc3NsU3RhdHVzRW51bSwgc3NsQ2VydGlmaWNhdGVzLCBzZXNzaW9ucywgaW5zZXJ0U3NsQ2VydGlmaWNhdGVTY2hlbWEsIGluc2VydFNlc3Npb25TY2hlbWE7XG52YXIgaW5pdF9pbmZyYXN0cnVjdHVyZSA9IF9fZXNtKHtcbiAgXCJzaGFyZWQvc2NoZW1hcy9pbmZyYXN0cnVjdHVyZS50c1wiKCkge1xuICAgIGluaXRfY29yZSgpO1xuICAgIHNzbFN0YXR1c0VudW0gPSBwZ0VudW03KFwic3NsX3N0YXR1c1wiLCBbXG4gICAgICBcImFjdGl2ZVwiLFxuICAgICAgXCJwZW5kaW5nXCIsXG4gICAgICBcImV4cGlyZWRcIixcbiAgICAgIFwicmV2b2tlZFwiLFxuICAgICAgXCJmYWlsZWRcIlxuICAgIF0pO1xuICAgIHNzbENlcnRpZmljYXRlcyA9IHBnVGFibGU4KFwic3NsX2NlcnRpZmljYXRlc1wiLCB7XG4gICAgICBpZDogdXVpZDgoXCJpZFwiKS5wcmltYXJ5S2V5KCkuZGVmYXVsdChzcWw5YGdlbl9yYW5kb21fdXVpZCgpYCksXG4gICAgICBkb21haW46IHRleHQ4KFwiZG9tYWluXCIpLm5vdE51bGwoKS51bmlxdWUoKSxcbiAgICAgIGNlcnRpZmljYXRlRGF0YTogdGV4dDgoXCJjZXJ0aWZpY2F0ZV9kYXRhXCIpLm5vdE51bGwoKSxcbiAgICAgIHByaXZhdGVLZXk6IHRleHQ4KFwicHJpdmF0ZV9rZXlcIikubm90TnVsbCgpLFxuICAgICAgaXNzdWVyOiB0ZXh0OChcImlzc3VlclwiKS5ub3ROdWxsKCksXG4gICAgICBzdWJqZWN0OiB0ZXh0OChcInN1YmplY3RcIikubm90TnVsbCgpLFxuICAgICAgc2VyaWFsTnVtYmVyOiB0ZXh0OChcInNlcmlhbF9udW1iZXJcIikubm90TnVsbCgpLFxuICAgICAgZmluZ2VycHJpbnQ6IHRleHQ4KFwiZmluZ2VycHJpbnRcIikubm90TnVsbCgpLFxuICAgICAgdmFsaWRGcm9tOiB0aW1lc3RhbXA4KFwidmFsaWRfZnJvbVwiKS5ub3ROdWxsKCksXG4gICAgICB2YWxpZFRvOiB0aW1lc3RhbXA4KFwidmFsaWRfdG9cIikubm90TnVsbCgpLFxuICAgICAgc3RhdHVzOiBzc2xTdGF0dXNFbnVtKFwic3RhdHVzXCIpLm5vdE51bGwoKS5kZWZhdWx0KFwicGVuZGluZ1wiKSxcbiAgICAgIGF1dG9SZW5ldzogYm9vbGVhbjgoXCJhdXRvX3JlbmV3XCIpLm5vdE51bGwoKS5kZWZhdWx0KHRydWUpLFxuICAgICAgcmVuZXdhbEF0dGVtcHRzOiBpbnRlZ2VyNyhcInJlbmV3YWxfYXR0ZW1wdHNcIikubm90TnVsbCgpLmRlZmF1bHQoMCksXG4gICAgICBtYXhSZW5ld2FsQXR0ZW1wdHM6IGludGVnZXI3KFwibWF4X3JlbmV3YWxfYXR0ZW1wdHNcIikubm90TnVsbCgpLmRlZmF1bHQoMyksXG4gICAgICBkbnNQcm92aWRlcjogdGV4dDgoXCJkbnNfcHJvdmlkZXJcIiksXG4gICAgICBsYXN0UmVuZXdhbEF0dGVtcHQ6IHRpbWVzdGFtcDgoXCJsYXN0X3JlbmV3YWxfYXR0ZW1wdFwiKSxcbiAgICAgIG5leHRSZW5ld2FsRGF0ZTogdGltZXN0YW1wOChcIm5leHRfcmVuZXdhbF9kYXRlXCIpLFxuICAgICAgLy8gQWRkaXRpb25hbCBTU0wgbWFuYWdlbWVudCBmaWVsZHNcbiAgICAgIGNlcnRpZmljYXRlQ2hhaW46IHRleHQ4KFwiY2VydGlmaWNhdGVfY2hhaW5cIiksXG4gICAgICByZW5ld2FsRXJyb3I6IHRleHQ4KFwicmVuZXdhbF9lcnJvclwiKSxcbiAgICAgIGRuc0NyZWRlbnRpYWxzOiB0ZXh0OChcImRuc19jcmVkZW50aWFsc1wiKSxcbiAgICAgIG5vdGlmaWNhdGlvbkVtYWlsczogdGV4dDgoXCJub3RpZmljYXRpb25fZW1haWxzXCIpLFxuICAgICAgY3JlYXRlZEJ5OiB2YXJjaGFyOChcImNyZWF0ZWRfYnlcIikubm90TnVsbCgpLnJlZmVyZW5jZXMoKCkgPT4gdXNlcnMuaWQpLFxuICAgICAgY3JlYXRlZEF0OiB0aW1lc3RhbXA4KFwiY3JlYXRlZF9hdFwiKS5kZWZhdWx0Tm93KCksXG4gICAgICB1cGRhdGVkQXQ6IHRpbWVzdGFtcDgoXCJ1cGRhdGVkX2F0XCIpLmRlZmF1bHROb3coKVxuICAgIH0pO1xuICAgIHNlc3Npb25zID0gcGdUYWJsZTgoXCJzZXNzaW9uXCIsIHtcbiAgICAgIHNpZDogdmFyY2hhcjgoXCJzaWRcIikucHJpbWFyeUtleSgpLm5vdE51bGwoKSxcbiAgICAgIHNlc3M6IGpzb24yKFwic2Vzc1wiKS5ub3ROdWxsKCksXG4gICAgICBleHBpcmU6IHRpbWVzdGFtcDgoXCJleHBpcmVcIiwgeyBwcmVjaXNpb246IDYgfSkubm90TnVsbCgpXG4gICAgfSk7XG4gICAgaW5zZXJ0U3NsQ2VydGlmaWNhdGVTY2hlbWEgPSB6OS5vYmplY3Qoe1xuICAgICAgZG9tYWluOiB6OS5zdHJpbmcoKSxcbiAgICAgIGNlcnRpZmljYXRlRGF0YTogejkuc3RyaW5nKCksXG4gICAgICBwcml2YXRlS2V5OiB6OS5zdHJpbmcoKSxcbiAgICAgIGlzc3Vlcjogejkuc3RyaW5nKCksXG4gICAgICBzdWJqZWN0OiB6OS5zdHJpbmcoKSxcbiAgICAgIHNlcmlhbE51bWJlcjogejkuc3RyaW5nKCksXG4gICAgICBmaW5nZXJwcmludDogejkuc3RyaW5nKCksXG4gICAgICB2YWxpZEZyb206IHo5LmRhdGUoKSxcbiAgICAgIHZhbGlkVG86IHo5LmRhdGUoKSxcbiAgICAgIHN0YXR1czogejkuc3RyaW5nKCkuZGVmYXVsdChcInBlbmRpbmdcIiksXG4gICAgICBhdXRvUmVuZXc6IHo5LmJvb2xlYW4oKS5kZWZhdWx0KHRydWUpLFxuICAgICAgcmVuZXdhbEF0dGVtcHRzOiB6OS5udW1iZXIoKS5pbnQoKS5kZWZhdWx0KDApLFxuICAgICAgbWF4UmVuZXdhbEF0dGVtcHRzOiB6OS5udW1iZXIoKS5pbnQoKS5kZWZhdWx0KDMpLFxuICAgICAgZG5zUHJvdmlkZXI6IHo5LnN0cmluZygpLm9wdGlvbmFsKCksXG4gICAgICBsYXN0UmVuZXdhbEF0dGVtcHQ6IHo5LmRhdGUoKS5vcHRpb25hbCgpLFxuICAgICAgbmV4dFJlbmV3YWxEYXRlOiB6OS5kYXRlKCkub3B0aW9uYWwoKSxcbiAgICAgIGNyZWF0ZWRCeTogejkuc3RyaW5nKCkudXVpZCgpXG4gICAgfSk7XG4gICAgaW5zZXJ0U2Vzc2lvblNjaGVtYSA9IHo5Lm9iamVjdCh7XG4gICAgICBzaWQ6IHo5LnN0cmluZygpLFxuICAgICAgc2VzczogejkuYW55KCksXG4gICAgICAvLyBKU09OIGRhdGFcbiAgICAgIGV4cGlyZTogejkuZGF0ZSgpXG4gICAgfSk7XG4gIH1cbn0pO1xuXG4vLyBzaGFyZWQvc2NoZW1hLnRzXG52YXIgc2NoZW1hX2V4cG9ydHMgPSB7fTtcbl9fZXhwb3J0KHNjaGVtYV9leHBvcnRzLCB7XG4gIEFUVEFDSEFCTEVfRU5USVRZX1RZUEVTOiAoKSA9PiBBVFRBQ0hBQkxFX0VOVElUWV9UWVBFUyxcbiAgRE9DVU1FTlRfVFlQRVM6ICgpID0+IERPQ1VNRU5UX1RZUEVTLFxuICBhY3Rpb25FbnVtOiAoKSA9PiBhY3Rpb25FbnVtLFxuICBhY3Rpb25hYmxlSXRlbVN0YXR1c0VudW06ICgpID0+IGFjdGlvbmFibGVJdGVtU3RhdHVzRW51bSxcbiAgYWN0aW9uYWJsZUl0ZW1zOiAoKSA9PiBhY3Rpb25hYmxlSXRlbXMsXG4gIGF0dGFjaERvY3VtZW50U2NoZW1hOiAoKSA9PiBhdHRhY2hEb2N1bWVudFNjaGVtYSxcbiAgYmlsbENhdGVnb3J5RW51bTogKCkgPT4gYmlsbENhdGVnb3J5RW51bSxcbiAgYmlsbFN0YXR1c0VudW06ICgpID0+IGJpbGxTdGF0dXNFbnVtLFxuICBiaWxsczogKCkgPT4gYmlsbHMsXG4gIGJvb2tpbmdTdGF0dXNFbnVtOiAoKSA9PiBib29raW5nU3RhdHVzRW51bSxcbiAgYm9va2luZ3M6ICgpID0+IGJvb2tpbmdzLFxuICBidWRnZXRzOiAoKSA9PiBidWRnZXRzLFxuICBidWdDYXRlZ29yeUVudW06ICgpID0+IGJ1Z0NhdGVnb3J5RW51bSxcbiAgYnVnUHJpb3JpdHlFbnVtOiAoKSA9PiBidWdQcmlvcml0eUVudW0sXG4gIGJ1Z1N0YXR1c0VudW06ICgpID0+IGJ1Z1N0YXR1c0VudW0sXG4gIGJ1Z3M6ICgpID0+IGJ1Z3MsXG4gIGJ1aWxkaW5nVHlwZUVudW06ICgpID0+IGJ1aWxkaW5nVHlwZUVudW0sXG4gIGJ1aWxkaW5nczogKCkgPT4gYnVpbGRpbmdzLFxuICBjb21tb25TcGFjZXM6ICgpID0+IGNvbW1vblNwYWNlcyxcbiAgY29udGFjdENhdGVnb3J5RW51bTogKCkgPT4gY29udGFjdENhdGVnb3J5RW51bSxcbiAgY29udGFjdEVudGl0eUVudW06ICgpID0+IGNvbnRhY3RFbnRpdHlFbnVtLFxuICBjb250YWN0czogKCkgPT4gY29udGFjdHMsXG4gIGRlbWFuZENvbW1lbnRzOiAoKSA9PiBkZW1hbmRDb21tZW50cyxcbiAgZGVtYW5kU3RhdHVzRW51bTogKCkgPT4gZGVtYW5kU3RhdHVzRW51bSxcbiAgZGVtYW5kVHlwZUVudW06ICgpID0+IGRlbWFuZFR5cGVFbnVtLFxuICBkZW1hbmRzOiAoKSA9PiBkZW1hbmRzLFxuICBkZXZlbG9wbWVudFBpbGxhcnM6ICgpID0+IGRldmVsb3BtZW50UGlsbGFycyxcbiAgZG9jdW1lbnRzOiAoKSA9PiBkb2N1bWVudHMsXG4gIGZlYXR1cmVDYXRlZ29yeUVudW06ICgpID0+IGZlYXR1cmVDYXRlZ29yeUVudW0sXG4gIGZlYXR1cmVQcmlvcml0eUVudW06ICgpID0+IGZlYXR1cmVQcmlvcml0eUVudW0sXG4gIGZlYXR1cmVSZXF1ZXN0Q2F0ZWdvcnlFbnVtOiAoKSA9PiBmZWF0dXJlUmVxdWVzdENhdGVnb3J5RW51bSxcbiAgZmVhdHVyZVJlcXVlc3RTdGF0dXNFbnVtOiAoKSA9PiBmZWF0dXJlUmVxdWVzdFN0YXR1c0VudW0sXG4gIGZlYXR1cmVSZXF1ZXN0VXB2b3RlczogKCkgPT4gZmVhdHVyZVJlcXVlc3RVcHZvdGVzLFxuICBmZWF0dXJlUmVxdWVzdHM6ICgpID0+IGZlYXR1cmVSZXF1ZXN0cyxcbiAgZmVhdHVyZVN0YXR1c0VudW06ICgpID0+IGZlYXR1cmVTdGF0dXNFbnVtLFxuICBmZWF0dXJlczogKCkgPT4gZmVhdHVyZXMsXG4gIGZyYW1ld29ya0NvbmZpZ3VyYXRpb246ICgpID0+IGZyYW1ld29ya0NvbmZpZ3VyYXRpb24sXG4gIGltcHJvdmVtZW50U3VnZ2VzdGlvbnM6ICgpID0+IGltcHJvdmVtZW50U3VnZ2VzdGlvbnMsXG4gIGluc2VydEFjdGlvbmFibGVJdGVtU2NoZW1hOiAoKSA9PiBpbnNlcnRBY3Rpb25hYmxlSXRlbVNjaGVtYSxcbiAgaW5zZXJ0QmlsbFNjaGVtYTogKCkgPT4gaW5zZXJ0QmlsbFNjaGVtYSxcbiAgaW5zZXJ0Qm9va2luZ1NjaGVtYTogKCkgPT4gaW5zZXJ0Qm9va2luZ1NjaGVtYSxcbiAgaW5zZXJ0QnVkZ2V0U2NoZW1hOiAoKSA9PiBpbnNlcnRCdWRnZXRTY2hlbWEsXG4gIGluc2VydEJ1Z1NjaGVtYTogKCkgPT4gaW5zZXJ0QnVnU2NoZW1hLFxuICBpbnNlcnRCdWlsZGluZ1NjaGVtYTogKCkgPT4gaW5zZXJ0QnVpbGRpbmdTY2hlbWEsXG4gIGluc2VydENvbW1vblNwYWNlU2NoZW1hOiAoKSA9PiBpbnNlcnRDb21tb25TcGFjZVNjaGVtYSxcbiAgaW5zZXJ0Q29udGFjdFNjaGVtYTogKCkgPT4gaW5zZXJ0Q29udGFjdFNjaGVtYSxcbiAgaW5zZXJ0RGVtYW5kQ29tbWVudFNjaGVtYTogKCkgPT4gaW5zZXJ0RGVtYW5kQ29tbWVudFNjaGVtYSxcbiAgaW5zZXJ0RGVtYW5kU2NoZW1hOiAoKSA9PiBpbnNlcnREZW1hbmRTY2hlbWEsXG4gIGluc2VydERvY3VtZW50U2NoZW1hOiAoKSA9PiBpbnNlcnREb2N1bWVudFNjaGVtYSxcbiAgaW5zZXJ0RmVhdHVyZVJlcXVlc3RTY2hlbWE6ICgpID0+IGluc2VydEZlYXR1cmVSZXF1ZXN0U2NoZW1hLFxuICBpbnNlcnRGZWF0dXJlUmVxdWVzdFVwdm90ZVNjaGVtYTogKCkgPT4gaW5zZXJ0RmVhdHVyZVJlcXVlc3RVcHZvdGVTY2hlbWEsXG4gIGluc2VydEZlYXR1cmVTY2hlbWE6ICgpID0+IGluc2VydEZlYXR1cmVTY2hlbWEsXG4gIGluc2VydEZyYW1ld29ya0NvbmZpZ1NjaGVtYTogKCkgPT4gaW5zZXJ0RnJhbWV3b3JrQ29uZmlnU2NoZW1hLFxuICBpbnNlcnRJbXByb3ZlbWVudFN1Z2dlc3Rpb25TY2hlbWE6ICgpID0+IGluc2VydEltcHJvdmVtZW50U3VnZ2VzdGlvblNjaGVtYSxcbiAgaW5zZXJ0SW52aXRhdGlvbkF1ZGl0TG9nU2NoZW1hOiAoKSA9PiBpbnNlcnRJbnZpdGF0aW9uQXVkaXRMb2dTY2hlbWEsXG4gIGluc2VydEludml0YXRpb25TY2hlbWE6ICgpID0+IGluc2VydEludml0YXRpb25TY2hlbWEsXG4gIGluc2VydE1haW50ZW5hbmNlUmVxdWVzdFNjaGVtYTogKCkgPT4gaW5zZXJ0TWFpbnRlbmFuY2VSZXF1ZXN0U2NoZW1hLFxuICBpbnNlcnRNZXRyaWNDYWxpYnJhdGlvbkRhdGFTY2hlbWE6ICgpID0+IGluc2VydE1ldHJpY0NhbGlicmF0aW9uRGF0YVNjaGVtYSxcbiAgaW5zZXJ0TWV0cmljRWZmZWN0aXZlbmVzc1RyYWNraW5nU2NoZW1hOiAoKSA9PiBpbnNlcnRNZXRyaWNFZmZlY3RpdmVuZXNzVHJhY2tpbmdTY2hlbWEsXG4gIGluc2VydE1ldHJpY1ByZWRpY3Rpb25TY2hlbWE6ICgpID0+IGluc2VydE1ldHJpY1ByZWRpY3Rpb25TY2hlbWEsXG4gIGluc2VydE1vbnRobHlCdWRnZXRTY2hlbWE6ICgpID0+IGluc2VydE1vbnRobHlCdWRnZXRTY2hlbWEsXG4gIGluc2VydE5vdGlmaWNhdGlvblNjaGVtYTogKCkgPT4gaW5zZXJ0Tm90aWZpY2F0aW9uU2NoZW1hLFxuICBpbnNlcnRPbGRCaWxsU2NoZW1hOiAoKSA9PiBpbnNlcnRPbGRCaWxsU2NoZW1hLFxuICBpbnNlcnRPcmdhbml6YXRpb25TY2hlbWE6ICgpID0+IGluc2VydE9yZ2FuaXphdGlvblNjaGVtYSxcbiAgaW5zZXJ0UGFzc3dvcmRSZXNldFRva2VuU2NoZW1hOiAoKSA9PiBpbnNlcnRQYXNzd29yZFJlc2V0VG9rZW5TY2hlbWEsXG4gIGluc2VydFBlcm1pc3Npb25TY2hlbWE6ICgpID0+IGluc2VydFBlcm1pc3Npb25TY2hlbWEsXG4gIGluc2VydFBpbGxhclNjaGVtYTogKCkgPT4gaW5zZXJ0UGlsbGFyU2NoZW1hLFxuICBpbnNlcnRQcmVkaWN0aW9uVmFsaWRhdGlvblNjaGVtYTogKCkgPT4gaW5zZXJ0UHJlZGljdGlvblZhbGlkYXRpb25TY2hlbWEsXG4gIGluc2VydFF1YWxpdHlJc3N1ZVNjaGVtYTogKCkgPT4gaW5zZXJ0UXVhbGl0eUlzc3VlU2NoZW1hLFxuICBpbnNlcnRRdWFsaXR5TWV0cmljU2NoZW1hOiAoKSA9PiBpbnNlcnRRdWFsaXR5TWV0cmljU2NoZW1hLFxuICBpbnNlcnRSZXNpZGVuY2VTY2hlbWE6ICgpID0+IGluc2VydFJlc2lkZW5jZVNjaGVtYSxcbiAgaW5zZXJ0Um9sZVBlcm1pc3Npb25TY2hlbWE6ICgpID0+IGluc2VydFJvbGVQZXJtaXNzaW9uU2NoZW1hLFxuICBpbnNlcnRTZXNzaW9uU2NoZW1hOiAoKSA9PiBpbnNlcnRTZXNzaW9uU2NoZW1hLFxuICBpbnNlcnRTc2xDZXJ0aWZpY2F0ZVNjaGVtYTogKCkgPT4gaW5zZXJ0U3NsQ2VydGlmaWNhdGVTY2hlbWEsXG4gIGluc2VydFVzZXJCb29raW5nUmVzdHJpY3Rpb25TY2hlbWE6ICgpID0+IGluc2VydFVzZXJCb29raW5nUmVzdHJpY3Rpb25TY2hlbWEsXG4gIGluc2VydFVzZXJPcmdhbml6YXRpb25TY2hlbWE6ICgpID0+IGluc2VydFVzZXJPcmdhbml6YXRpb25TY2hlbWEsXG4gIGluc2VydFVzZXJQZXJtaXNzaW9uU2NoZW1hOiAoKSA9PiBpbnNlcnRVc2VyUGVybWlzc2lvblNjaGVtYSxcbiAgaW5zZXJ0VXNlclJlc2lkZW5jZVNjaGVtYTogKCkgPT4gaW5zZXJ0VXNlclJlc2lkZW5jZVNjaGVtYSxcbiAgaW5zZXJ0VXNlclNjaGVtYTogKCkgPT4gaW5zZXJ0VXNlclNjaGVtYSxcbiAgaW5zZXJ0VXNlclRpbWVMaW1pdFNjaGVtYTogKCkgPT4gaW5zZXJ0VXNlclRpbWVMaW1pdFNjaGVtYSxcbiAgaW5zZXJ0V29ya3NwYWNlU3RhdHVzU2NoZW1hOiAoKSA9PiBpbnNlcnRXb3Jrc3BhY2VTdGF0dXNTY2hlbWEsXG4gIGludml0YXRpb25BdWRpdExvZzogKCkgPT4gaW52aXRhdGlvbkF1ZGl0TG9nLFxuICBpbnZpdGF0aW9uU3RhdHVzRW51bTogKCkgPT4gaW52aXRhdGlvblN0YXR1c0VudW0sXG4gIGludml0YXRpb25zOiAoKSA9PiBpbnZpdGF0aW9ucyxcbiAgaXNzdWVTZXZlcml0eUVudW06ICgpID0+IGlzc3VlU2V2ZXJpdHlFbnVtLFxuICBtYWludGVuYW5jZVByaW9yaXR5RW51bTogKCkgPT4gbWFpbnRlbmFuY2VQcmlvcml0eUVudW0sXG4gIG1haW50ZW5hbmNlUmVxdWVzdHM6ICgpID0+IG1haW50ZW5hbmNlUmVxdWVzdHMsXG4gIG1haW50ZW5hbmNlU3RhdHVzRW51bTogKCkgPT4gbWFpbnRlbmFuY2VTdGF0dXNFbnVtLFxuICBtZXRyaWNDYWxpYnJhdGlvbkRhdGE6ICgpID0+IG1ldHJpY0NhbGlicmF0aW9uRGF0YSxcbiAgbWV0cmljRWZmZWN0aXZlbmVzc1RyYWNraW5nOiAoKSA9PiBtZXRyaWNFZmZlY3RpdmVuZXNzVHJhY2tpbmcsXG4gIG1ldHJpY1ByZWRpY3Rpb25zOiAoKSA9PiBtZXRyaWNQcmVkaWN0aW9ucyxcbiAgbWV0cmljVHlwZUVudW06ICgpID0+IG1ldHJpY1R5cGVFbnVtLFxuICBtb250aGx5QnVkZ2V0czogKCkgPT4gbW9udGhseUJ1ZGdldHMsXG4gIG5vdGlmaWNhdGlvblR5cGVFbnVtOiAoKSA9PiBub3RpZmljYXRpb25UeXBlRW51bSxcbiAgbm90aWZpY2F0aW9uczogKCkgPT4gbm90aWZpY2F0aW9ucyxcbiAgb2xkQmlsbFR5cGVFbnVtOiAoKSA9PiBvbGRCaWxsVHlwZUVudW0sXG4gIG9sZEJpbGxzOiAoKSA9PiBvbGRCaWxscyxcbiAgb3JnYW5pemF0aW9uczogKCkgPT4gb3JnYW5pemF0aW9ucyxcbiAgcGFzc3dvcmRSZXNldFRva2VuczogKCkgPT4gcGFzc3dvcmRSZXNldFRva2VucyxcbiAgcGF5bWVudFR5cGVFbnVtOiAoKSA9PiBwYXltZW50VHlwZUVudW0sXG4gIHBlcm1pc3Npb25zOiAoKSA9PiBwZXJtaXNzaW9ucyxcbiAgcHJlZGljdGlvblZhbGlkYXRpb25zOiAoKSA9PiBwcmVkaWN0aW9uVmFsaWRhdGlvbnMsXG4gIHF1YWxpdHlJc3N1ZXM6ICgpID0+IHF1YWxpdHlJc3N1ZXMsXG4gIHF1YWxpdHlNZXRyaWNzOiAoKSA9PiBxdWFsaXR5TWV0cmljcyxcbiAgcmVzaWRlbmNlczogKCkgPT4gcmVzaWRlbmNlcyxcbiAgcmVzb3VyY2VUeXBlRW51bTogKCkgPT4gcmVzb3VyY2VUeXBlRW51bSxcbiAgcm9sZVBlcm1pc3Npb25zOiAoKSA9PiByb2xlUGVybWlzc2lvbnMsXG4gIHNjaGVkdWxlUGF5bWVudEVudW06ICgpID0+IHNjaGVkdWxlUGF5bWVudEVudW0sXG4gIHNlc3Npb25zOiAoKSA9PiBzZXNzaW9ucyxcbiAgc3NsQ2VydGlmaWNhdGVzOiAoKSA9PiBzc2xDZXJ0aWZpY2F0ZXMsXG4gIHNzbFN0YXR1c0VudW06ICgpID0+IHNzbFN0YXR1c0VudW0sXG4gIHN1Z2dlc3Rpb25DYXRlZ29yeUVudW06ICgpID0+IHN1Z2dlc3Rpb25DYXRlZ29yeUVudW0sXG4gIHN1Z2dlc3Rpb25Qcmlvcml0eUVudW06ICgpID0+IHN1Z2dlc3Rpb25Qcmlvcml0eUVudW0sXG4gIHN1Z2dlc3Rpb25TdGF0dXNFbnVtOiAoKSA9PiBzdWdnZXN0aW9uU3RhdHVzRW51bSxcbiAgdXNlckJvb2tpbmdSZXN0cmljdGlvbnM6ICgpID0+IHVzZXJCb29raW5nUmVzdHJpY3Rpb25zLFxuICB1c2VyT3JnYW5pemF0aW9uczogKCkgPT4gdXNlck9yZ2FuaXphdGlvbnMsXG4gIHVzZXJQZXJtaXNzaW9uczogKCkgPT4gdXNlclBlcm1pc3Npb25zLFxuICB1c2VyUmVzaWRlbmNlczogKCkgPT4gdXNlclJlc2lkZW5jZXMsXG4gIHVzZXJSb2xlRW51bTogKCkgPT4gdXNlclJvbGVFbnVtLFxuICB1c2VyVGltZUxpbWl0czogKCkgPT4gdXNlclRpbWVMaW1pdHMsXG4gIHVzZXJzOiAoKSA9PiB1c2VycyxcbiAgdmFsaWRhdGlvblN0YXR1c0VudW06ICgpID0+IHZhbGlkYXRpb25TdGF0dXNFbnVtLFxuICB3b3Jrc3BhY2VTdGF0dXM6ICgpID0+IHdvcmtzcGFjZVN0YXR1c1xufSk7XG52YXIgaW5pdF9zY2hlbWEgPSBfX2VzbSh7XG4gIFwic2hhcmVkL3NjaGVtYS50c1wiKCkge1xuICAgIGluaXRfY29yZSgpO1xuICAgIGluaXRfcHJvcGVydHkoKTtcbiAgICBpbml0X2ZpbmFuY2lhbCgpO1xuICAgIGluaXRfb3BlcmF0aW9ucygpO1xuICAgIGluaXRfZG9jdW1lbnRzKCk7XG4gICAgaW5pdF9kZXZlbG9wbWVudCgpO1xuICAgIGluaXRfbW9uaXRvcmluZygpO1xuICAgIGluaXRfaW5mcmFzdHJ1Y3R1cmUoKTtcbiAgICBpbml0X29wZXJhdGlvbnMoKTtcbiAgICBpbml0X2RvY3VtZW50cygpO1xuICAgIGluaXRfZGV2ZWxvcG1lbnQoKTtcbiAgICBpbml0X2luZnJhc3RydWN0dXJlKCk7XG4gIH1cbn0pO1xuXG4vLyBzZXJ2ZXIvZGIudHNcbnZhciBkYl9leHBvcnRzID0ge307XG5fX2V4cG9ydChkYl9leHBvcnRzLCB7XG4gIGRiOiAoKSA9PiBkYixcbiAgcG9vbDogKCkgPT4gcG9vbCxcbiAgc3FsOiAoKSA9PiBzcWwxMFxufSk7XG5pbXBvcnQgeyBuZW9uIH0gZnJvbSBcIkBuZW9uZGF0YWJhc2Uvc2VydmVybGVzc1wiO1xuaW1wb3J0IHsgZHJpenpsZSB9IGZyb20gXCJkcml6emxlLW9ybS9uZW9uLWh0dHBcIjtcbnZhciBkYXRhYmFzZVVybCwgaXNVc2luZ0tvdmVvRGIsIHNxbDEwLCBzY2hlbWEsIGRiLCBwb29sO1xudmFyIGluaXRfZGIgPSBfX2VzbSh7XG4gIFwic2VydmVyL2RiLnRzXCIoKSB7XG4gICAgaW5pdF9jb25maWcoKTtcbiAgICBpbml0X3NjaGVtYSgpO1xuICAgIGRhdGFiYXNlVXJsID0gY29uZmlnLmRhdGFiYXNlLnVybDtcbiAgICBpZiAoIWRhdGFiYXNlVXJsKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJEQVRBQkFTRV9VUkwgbXVzdCBiZSBzZXQuIERpZCB5b3UgZm9yZ2V0IHRvIHByb3Zpc2lvbiBhIGRhdGFiYXNlP1wiKTtcbiAgICB9XG4gICAgaXNVc2luZ0tvdmVvRGIgPSBkYXRhYmFzZVVybC5pbmNsdWRlcyhcIkRBVEFCQVNFX1VSTF9LT1ZFT1wiKSB8fCBjb25maWcuc2VydmVyLmlzUHJvZHVjdGlvbiAmJiBwcm9jZXNzLmVudi5EQVRBQkFTRV9VUkxfS09WRU87XG4gICAgY29uc29sZS5sb2coXCJcXHV7MUY1MTd9IENvbm5lY3RpbmcgdG8gZGF0YWJhc2Ugd2l0aCBVUkw6XCIsIGRhdGFiYXNlVXJsLnN1YnN0cmluZygwLCA1MCkgKyBcIi4uLlwiKTtcbiAgICBjb25zb2xlLmxvZyhcIlxcdXsxRjMwRH0gRW52aXJvbm1lbnQ6XCIsIGNvbmZpZy5zZXJ2ZXIubm9kZUVudik7XG4gICAgY29uc29sZS5sb2coYFxcdXsxRjRDQX0gRGF0YWJhc2U6IFVzaW5nICR7Y29uZmlnLnNlcnZlci5pc1Byb2R1Y3Rpb24gPyBcIlBST0RVQ1RJT04gKERBVEFCQVNFX1VSTF9LT1ZFTylcIiA6IFwiREVWRUxPUE1FTlQgKERBVEFCQVNFX1VSTClcIn0gZGF0YWJhc2VgKTtcbiAgICBzcWwxMCA9IG5lb24oZGF0YWJhc2VVcmwsIHtcbiAgICAgIGFycmF5TW9kZTogZmFsc2UsXG4gICAgICBmdWxsUmVzdWx0czogZmFsc2VcbiAgICB9KTtcbiAgICAoYXN5bmMgKCkgPT4ge1xuICAgICAgdHJ5IHtcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgc3FsMTBgU0VMRUNUIHZlcnNpb24oKWA7XG4gICAgICAgIGNvbnNvbGUubG9nKFwiXFx1MjcwNSBEYXRhYmFzZSBjb25uZWN0aW9uIHN1Y2Nlc3NmdWw6XCIsIHJlc3VsdFswXS52ZXJzaW9uLnN1YnN0cmluZygwLCA1MCkgKyBcIi4uLlwiKTtcbiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoXCJcXHUyNzRDIERhdGFiYXNlIGNvbm5lY3Rpb24gZmFpbGVkOlwiLCBlcnJvci5tZXNzYWdlKTtcbiAgICAgIH1cbiAgICB9KSgpO1xuICAgIHNjaGVtYSA9IHtcbiAgICAgIHVzZXJzLFxuICAgICAgb3JnYW5pemF0aW9ucyxcbiAgICAgIGJ1aWxkaW5ncyxcbiAgICAgIHJlc2lkZW5jZXMsXG4gICAgICB1c2VyT3JnYW5pemF0aW9ucyxcbiAgICAgIHVzZXJSZXNpZGVuY2VzLFxuICAgICAgaW52aXRhdGlvbnMsXG4gICAgICBkb2N1bWVudHMsXG4gICAgICBiaWxscyxcbiAgICAgIGRlbWFuZHMsXG4gICAgICBjb21tb25TcGFjZXMsXG4gICAgICBwYXNzd29yZFJlc2V0VG9rZW5zLFxuICAgICAgbWFpbnRlbmFuY2VSZXF1ZXN0cyxcbiAgICAgIHBlcm1pc3Npb25zLFxuICAgICAgdXNlclBlcm1pc3Npb25zLFxuICAgICAgcm9sZVBlcm1pc3Npb25zLFxuICAgICAgYnVkZ2V0cyxcbiAgICAgIG1vbnRobHlCdWRnZXRzXG4gICAgfTtcbiAgICBkYiA9IGRyaXp6bGUoc3FsMTAsIHsgc2NoZW1hIH0pO1xuICAgIGNvbnNvbGUubG9nKFwiXFx1ezFGNENBfSBEYXRhYmFzZSBpbml0aWFsaXplZCB3aXRoXCIsIE9iamVjdC5rZXlzKHNjaGVtYSkubGVuZ3RoLCBcInRhYmxlc1wiKTtcbiAgICBwb29sID0gc3FsMTA7XG4gIH1cbn0pO1xuXG4vLyBzZXJ2ZXIvZGF0YWJhc2Utb3B0aW1pemF0aW9uLnRzXG52YXIgZGF0YWJhc2Vfb3B0aW1pemF0aW9uX2V4cG9ydHMgPSB7fTtcbl9fZXhwb3J0KGRhdGFiYXNlX29wdGltaXphdGlvbl9leHBvcnRzLCB7XG4gIERhdGFiYXNlTWFpbnRlbmFuY2U6ICgpID0+IERhdGFiYXNlTWFpbnRlbmFuY2UsXG4gIERhdGFiYXNlT3B0aW1pemF0aW9uOiAoKSA9PiBEYXRhYmFzZU9wdGltaXphdGlvbixcbiAgUGFnaW5hdGlvbkhlbHBlcjogKCkgPT4gUGFnaW5hdGlvbkhlbHBlcixcbiAgUXVlcnlPcHRpbWl6ZXI6ICgpID0+IFF1ZXJ5T3B0aW1pemVyXG59KTtcbmltcG9ydCB7IHNxbCBhcyBzcWwxMSB9IGZyb20gXCJkcml6emxlLW9ybVwiO1xudmFyIFBhZ2luYXRpb25IZWxwZXIsIERhdGFiYXNlT3B0aW1pemF0aW9uLCBRdWVyeU9wdGltaXplciwgRGF0YWJhc2VNYWludGVuYW5jZTtcbnZhciBpbml0X2RhdGFiYXNlX29wdGltaXphdGlvbiA9IF9fZXNtKHtcbiAgXCJzZXJ2ZXIvZGF0YWJhc2Utb3B0aW1pemF0aW9uLnRzXCIoKSB7XG4gICAgUGFnaW5hdGlvbkhlbHBlciA9IGNsYXNzIHtcbiAgICAgIC8qKlxuICAgICAgICogR2VuZXJhdGVzIExJTUlUIGFuZCBPRkZTRVQgY2xhdXNlIGZvciBwYWdpbmF0aW9uLlxuICAgICAgICogQHBhcmFtIG9wdGlvbnNcbiAgICAgICAqIEBwYXJhbSBfb3B0aW9uc1xuICAgICAgICovXG4gICAgICBzdGF0aWMgZ2V0UGFnaW5hdGlvbkNsYXVzZShfb3B0aW9ucykge1xuICAgICAgICBjb25zdCBvZmZzZXQgPSAoX29wdGlvbnMucGFnZSAtIDEpICogX29wdGlvbnMucGFnZVNpemU7XG4gICAgICAgIHJldHVybiBgTElNSVQgJHtfb3B0aW9ucy5wYWdlU2l6ZX0gT0ZGU0VUICR7b2Zmc2V0fWA7XG4gICAgICB9XG4gICAgICAvKipcbiAgICAgICAqIEdlbmVyYXRlcyBPUkRFUiBCWSBjbGF1c2UgZm9yIHNvcnRpbmcuXG4gICAgICAgKiBAcGFyYW0gb3B0aW9uc1xuICAgICAgICogQHBhcmFtIF9vcHRpb25zXG4gICAgICAgKi9cbiAgICAgIHN0YXRpYyBnZXRTb3J0Q2xhdXNlKF9vcHRpb25zKSB7XG4gICAgICAgIGlmICghX29wdGlvbnMuc29ydEJ5KSB7XG4gICAgICAgICAgcmV0dXJuIFwiXCI7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGBPUkRFUiBCWSAke19vcHRpb25zLnNvcnRCeX0gJHtfb3B0aW9ucy5zb3J0RGlyZWN0aW9uIHx8IFwiQVNDXCJ9YDtcbiAgICAgIH1cbiAgICAgIC8qKlxuICAgICAgICogQ2FsY3VsYXRlcyB0b3RhbCBwYWdlcyBmb3IgcGFnaW5hdGlvbiBjb250cm9scy5cbiAgICAgICAqIEBwYXJhbSB0b3RhbFJlY29yZHNcbiAgICAgICAqIEBwYXJhbSBwYWdlU2l6ZVxuICAgICAgICovXG4gICAgICBzdGF0aWMgY2FsY3VsYXRlVG90YWxQYWdlcyh0b3RhbFJlY29yZHMsIHBhZ2VTaXplKSB7XG4gICAgICAgIHJldHVybiBNYXRoLmNlaWwodG90YWxSZWNvcmRzIC8gcGFnZVNpemUpO1xuICAgICAgfVxuICAgICAgLyoqXG4gICAgICAgKiBWYWxpZGF0ZXMgcGFnaW5hdGlvbiBwYXJhbWV0ZXJzLlxuICAgICAgICogQHBhcmFtIG9wdGlvbnNcbiAgICAgICAqIEBwYXJhbSBfb3B0aW9uc1xuICAgICAgICovXG4gICAgICBzdGF0aWMgdmFsaWRhdGVQYWdpbmF0aW9uKF9vcHRpb25zKSB7XG4gICAgICAgIGlmIChfb3B0aW9ucy5wYWdlIDwgMSkge1xuICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIlBhZ2UgbnVtYmVyIG11c3QgYmUgMSBvciBncmVhdGVyXCIpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChfb3B0aW9ucy5wYWdlU2l6ZSA8IDEgfHwgX29wdGlvbnMucGFnZVNpemUgPiAxZTMpIHtcbiAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJQYWdlIHNpemUgbXVzdCBiZSBiZXR3ZWVuIDEgYW5kIDEwMDBcIik7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9O1xuICAgIERhdGFiYXNlT3B0aW1pemF0aW9uID0ge1xuICAgICAgLyoqXG4gICAgICAgKiBDb3JlIGluZGV4ZXMgZm9yIGZyZXF1ZW50bHkgcXVlcmllZCBmb3JlaWduIGtleXMgYW5kIHNlYXJjaCBmaWVsZHMuXG4gICAgICAgKiBUaGVzZSBpbmRleGVzIHRhcmdldCB0aGUgbW9zdCBjb21tb24gcXVlcnkgcGF0dGVybnMgaW4gcHJvcGVydHkgbWFuYWdlbWVudC5cbiAgICAgICAqL1xuICAgICAgY29yZUluZGV4ZXM6IFtcbiAgICAgICAgLy8gVXNlcnMgdGFibGUgaW5kZXhlc1xuICAgICAgICBcIkNSRUFURSBJTkRFWCBDT05DVVJSRU5UTFkgSUYgTk9UIEVYSVNUUyBpZHhfdXNlcnNfZW1haWwgT04gdXNlcnMoZW1haWwpXCIsXG4gICAgICAgIFwiQ1JFQVRFIElOREVYIENPTkNVUlJFTlRMWSBJRiBOT1QgRVhJU1RTIGlkeF91c2Vyc19yb2xlIE9OIHVzZXJzKHJvbGUpXCIsXG4gICAgICAgIFwiQ1JFQVRFIElOREVYIENPTkNVUlJFTlRMWSBJRiBOT1QgRVhJU1RTIGlkeF91c2Vyc19hY3RpdmUgT04gdXNlcnMoaXNfYWN0aXZlKVwiLFxuICAgICAgICBcIkNSRUFURSBJTkRFWCBDT05DVVJSRU5UTFkgSUYgTk9UIEVYSVNUUyBpZHhfdXNlcnNfbGFzdF9sb2dpbiBPTiB1c2VycyhsYXN0X2xvZ2luX2F0KVwiLFxuICAgICAgICAvLyBPcmdhbml6YXRpb25zIHRhYmxlIGluZGV4ZXNcbiAgICAgICAgXCJDUkVBVEUgSU5ERVggQ09OQ1VSUkVOVExZIElGIE5PVCBFWElTVFMgaWR4X29yZ2FuaXphdGlvbnNfdHlwZSBPTiBvcmdhbml6YXRpb25zKHR5cGUpXCIsXG4gICAgICAgIFwiQ1JFQVRFIElOREVYIENPTkNVUlJFTlRMWSBJRiBOT1QgRVhJU1RTIGlkeF9vcmdhbml6YXRpb25zX2FjdGl2ZSBPTiBvcmdhbml6YXRpb25zKGlzX2FjdGl2ZSlcIixcbiAgICAgICAgXCJDUkVBVEUgSU5ERVggQ09OQ1VSUkVOVExZIElGIE5PVCBFWElTVFMgaWR4X29yZ2FuaXphdGlvbnNfY2l0eSBPTiBvcmdhbml6YXRpb25zKGNpdHkpXCIsXG4gICAgICAgIC8vIEJ1aWxkaW5ncyB0YWJsZSBpbmRleGVzXG4gICAgICAgIFwiQ1JFQVRFIElOREVYIENPTkNVUlJFTlRMWSBJRiBOT1QgRVhJU1RTIGlkeF9idWlsZGluZ3Nfb3JnX2lkIE9OIGJ1aWxkaW5ncyhvcmdhbml6YXRpb25faWQpXCIsXG4gICAgICAgIFwiQ1JFQVRFIElOREVYIENPTkNVUlJFTlRMWSBJRiBOT1QgRVhJU1RTIGlkeF9idWlsZGluZ3NfdHlwZSBPTiBidWlsZGluZ3MoYnVpbGRpbmdfdHlwZSlcIixcbiAgICAgICAgXCJDUkVBVEUgSU5ERVggQ09OQ1VSUkVOVExZIElGIE5PVCBFWElTVFMgaWR4X2J1aWxkaW5nc19hY3RpdmUgT04gYnVpbGRpbmdzKGlzX2FjdGl2ZSlcIixcbiAgICAgICAgXCJDUkVBVEUgSU5ERVggQ09OQ1VSUkVOVExZIElGIE5PVCBFWElTVFMgaWR4X2J1aWxkaW5nc19jaXR5IE9OIGJ1aWxkaW5ncyhjaXR5KVwiLFxuICAgICAgICBcIkNSRUFURSBJTkRFWCBDT05DVVJSRU5UTFkgSUYgTk9UIEVYSVNUUyBpZHhfYnVpbGRpbmdzX3Bvc3RhbCBPTiBidWlsZGluZ3MocG9zdGFsX2NvZGUpXCIsXG4gICAgICAgIC8vIFJlc2lkZW5jZXMgdGFibGUgaW5kZXhlc1xuICAgICAgICBcIkNSRUFURSBJTkRFWCBDT05DVVJSRU5UTFkgSUYgTk9UIEVYSVNUUyBpZHhfcmVzaWRlbmNlc19idWlsZGluZ19pZCBPTiByZXNpZGVuY2VzKGJ1aWxkaW5nX2lkKVwiLFxuICAgICAgICBcIkNSRUFURSBJTkRFWCBDT05DVVJSRU5UTFkgSUYgTk9UIEVYSVNUUyBpZHhfcmVzaWRlbmNlc191bml0IE9OIHJlc2lkZW5jZXModW5pdF9udW1iZXIpXCIsXG4gICAgICAgIFwiQ1JFQVRFIElOREVYIENPTkNVUlJFTlRMWSBJRiBOT1QgRVhJU1RTIGlkeF9yZXNpZGVuY2VzX2FjdGl2ZSBPTiByZXNpZGVuY2VzKGlzX2FjdGl2ZSlcIixcbiAgICAgICAgXCJDUkVBVEUgSU5ERVggQ09OQ1VSUkVOVExZIElGIE5PVCBFWElTVFMgaWR4X3Jlc2lkZW5jZXNfZmxvb3IgT04gcmVzaWRlbmNlcyhmbG9vcilcIixcbiAgICAgICAgLy8gVXNlci1SZXNpZGVuY2VzIHJlbGF0aW9uc2hpcCBpbmRleGVzXG4gICAgICAgIFwiQ1JFQVRFIElOREVYIENPTkNVUlJFTlRMWSBJRiBOT1QgRVhJU1RTIGlkeF91c2VyX3Jlc2lkZW5jZXNfdXNlcl9pZCBPTiB1c2VyX3Jlc2lkZW5jZXModXNlcl9pZClcIixcbiAgICAgICAgXCJDUkVBVEUgSU5ERVggQ09OQ1VSUkVOVExZIElGIE5PVCBFWElTVFMgaWR4X3VzZXJfcmVzaWRlbmNlc19yZXNpZGVuY2VfaWQgT04gdXNlcl9yZXNpZGVuY2VzKHJlc2lkZW5jZV9pZClcIixcbiAgICAgICAgXCJDUkVBVEUgSU5ERVggQ09OQ1VSUkVOVExZIElGIE5PVCBFWElTVFMgaWR4X3VzZXJfcmVzaWRlbmNlc19hY3RpdmUgT04gdXNlcl9yZXNpZGVuY2VzKGlzX2FjdGl2ZSlcIixcbiAgICAgICAgXCJDUkVBVEUgSU5ERVggQ09OQ1VSUkVOVExZIElGIE5PVCBFWElTVFMgaWR4X3VzZXJfcmVzaWRlbmNlc19yZWxhdGlvbnNoaXAgT04gdXNlcl9yZXNpZGVuY2VzKHJlbGF0aW9uc2hpcF90eXBlKVwiLFxuICAgICAgICBcIkNSRUFURSBJTkRFWCBDT05DVVJSRU5UTFkgSUYgTk9UIEVYSVNUUyBpZHhfdXNlcl9yZXNpZGVuY2VzX2RhdGVzIE9OIHVzZXJfcmVzaWRlbmNlcyhzdGFydF9kYXRlLCBlbmRfZGF0ZSlcIixcbiAgICAgICAgLy8gQmlsbHMgdGFibGUgaW5kZXhlc1xuICAgICAgICBcIkNSRUFURSBJTkRFWCBDT05DVVJSRU5UTFkgSUYgTk9UIEVYSVNUUyBpZHhfYmlsbHNfcmVzaWRlbmNlX2lkIE9OIGJpbGxzKHJlc2lkZW5jZV9pZClcIixcbiAgICAgICAgXCJDUkVBVEUgSU5ERVggQ09OQ1VSUkVOVExZIElGIE5PVCBFWElTVFMgaWR4X2JpbGxzX251bWJlciBPTiBiaWxscyhiaWxsX251bWJlcilcIixcbiAgICAgICAgXCJDUkVBVEUgSU5ERVggQ09OQ1VSUkVOVExZIElGIE5PVCBFWElTVFMgaWR4X2JpbGxzX3N0YXR1cyBPTiBiaWxscyhzdGF0dXMpXCIsXG4gICAgICAgIFwiQ1JFQVRFIElOREVYIENPTkNVUlJFTlRMWSBJRiBOT1QgRVhJU1RTIGlkeF9iaWxsc190eXBlIE9OIGJpbGxzKHR5cGUpXCIsXG4gICAgICAgIFwiQ1JFQVRFIElOREVYIENPTkNVUlJFTlRMWSBJRiBOT1QgRVhJU1RTIGlkeF9iaWxsc19kdWVfZGF0ZSBPTiBiaWxscyhkdWVfZGF0ZSlcIixcbiAgICAgICAgXCJDUkVBVEUgSU5ERVggQ09OQ1VSUkVOVExZIElGIE5PVCBFWElTVFMgaWR4X2JpbGxzX2NyZWF0ZWRfYnkgT04gYmlsbHMoY3JlYXRlZF9ieSlcIixcbiAgICAgICAgXCJDUkVBVEUgSU5ERVggQ09OQ1VSUkVOVExZIElGIE5PVCBFWElTVFMgaWR4X2JpbGxzX2lzc3VlX2RhdGUgT04gYmlsbHMoaXNzdWVfZGF0ZSlcIixcbiAgICAgICAgLy8gTWFpbnRlbmFuY2UgcmVxdWVzdHMgaW5kZXhlc1xuICAgICAgICBcIkNSRUFURSBJTkRFWCBDT05DVVJSRU5UTFkgSUYgTk9UIEVYSVNUUyBpZHhfbWFpbnRlbmFuY2VfcmVzaWRlbmNlX2lkIE9OIG1haW50ZW5hbmNlX3JlcXVlc3RzKHJlc2lkZW5jZV9pZClcIixcbiAgICAgICAgXCJDUkVBVEUgSU5ERVggQ09OQ1VSUkVOVExZIElGIE5PVCBFWElTVFMgaWR4X21haW50ZW5hbmNlX3N1Ym1pdHRlZF9ieSBPTiBtYWludGVuYW5jZV9yZXF1ZXN0cyhzdWJtaXR0ZWRfYnkpXCIsXG4gICAgICAgIFwiQ1JFQVRFIElOREVYIENPTkNVUlJFTlRMWSBJRiBOT1QgRVhJU1RTIGlkeF9tYWludGVuYW5jZV9hc3NpZ25lZF90byBPTiBtYWludGVuYW5jZV9yZXF1ZXN0cyhhc3NpZ25lZF90bylcIixcbiAgICAgICAgXCJDUkVBVEUgSU5ERVggQ09OQ1VSUkVOVExZIElGIE5PVCBFWElTVFMgaWR4X21haW50ZW5hbmNlX3N0YXR1cyBPTiBtYWludGVuYW5jZV9yZXF1ZXN0cyhzdGF0dXMpXCIsXG4gICAgICAgIFwiQ1JFQVRFIElOREVYIENPTkNVUlJFTlRMWSBJRiBOT1QgRVhJU1RTIGlkeF9tYWludGVuYW5jZV9wcmlvcml0eSBPTiBtYWludGVuYW5jZV9yZXF1ZXN0cyhwcmlvcml0eSlcIixcbiAgICAgICAgXCJDUkVBVEUgSU5ERVggQ09OQ1VSUkVOVExZIElGIE5PVCBFWElTVFMgaWR4X21haW50ZW5hbmNlX2NhdGVnb3J5IE9OIG1haW50ZW5hbmNlX3JlcXVlc3RzKGNhdGVnb3J5KVwiLFxuICAgICAgICBcIkNSRUFURSBJTkRFWCBDT05DVVJSRU5UTFkgSUYgTk9UIEVYSVNUUyBpZHhfbWFpbnRlbmFuY2Vfc2NoZWR1bGVkIE9OIG1haW50ZW5hbmNlX3JlcXVlc3RzKHNjaGVkdWxlZF9kYXRlKVwiLFxuICAgICAgICAvLyBCdWRnZXRzIHRhYmxlIGluZGV4ZXNcbiAgICAgICAgXCJDUkVBVEUgSU5ERVggQ09OQ1VSUkVOVExZIElGIE5PVCBFWElTVFMgaWR4X2J1ZGdldHNfYnVpbGRpbmdfaWQgT04gYnVkZ2V0cyhidWlsZGluZ19pZClcIixcbiAgICAgICAgXCJDUkVBVEUgSU5ERVggQ09OQ1VSUkVOVExZIElGIE5PVCBFWElTVFMgaWR4X2J1ZGdldHNfeWVhciBPTiBidWRnZXRzKHllYXIpXCIsXG4gICAgICAgIFwiQ1JFQVRFIElOREVYIENPTkNVUlJFTlRMWSBJRiBOT1QgRVhJU1RTIGlkeF9idWRnZXRzX2NhdGVnb3J5IE9OIGJ1ZGdldHMoY2F0ZWdvcnkpXCIsXG4gICAgICAgIFwiQ1JFQVRFIElOREVYIENPTkNVUlJFTlRMWSBJRiBOT1QgRVhJU1RTIGlkeF9idWRnZXRzX2FjdGl2ZSBPTiBidWRnZXRzKGlzX2FjdGl2ZSlcIixcbiAgICAgICAgXCJDUkVBVEUgSU5ERVggQ09OQ1VSUkVOVExZIElGIE5PVCBFWElTVFMgaWR4X2J1ZGdldHNfY3JlYXRlZF9ieSBPTiBidWRnZXRzKGNyZWF0ZWRfYnkpXCIsXG4gICAgICAgIC8vIERvY3VtZW50cyB0YWJsZSBpbmRleGVzXG4gICAgICAgIFwiQ1JFQVRFIElOREVYIENPTkNVUlJFTlRMWSBJRiBOT1QgRVhJU1RTIGlkeF9kb2N1bWVudHNfb3JnX2lkIE9OIGRvY3VtZW50cyhvcmdhbml6YXRpb25faWQpXCIsXG4gICAgICAgIFwiQ1JFQVRFIElOREVYIENPTkNVUlJFTlRMWSBJRiBOT1QgRVhJU1RTIGlkeF9kb2N1bWVudHNfYnVpbGRpbmdfaWQgT04gZG9jdW1lbnRzKGJ1aWxkaW5nX2lkKVwiLFxuICAgICAgICBcIkNSRUFURSBJTkRFWCBDT05DVVJSRU5UTFkgSUYgTk9UIEVYSVNUUyBpZHhfZG9jdW1lbnRzX3Jlc2lkZW5jZV9pZCBPTiBkb2N1bWVudHMocmVzaWRlbmNlX2lkKVwiLFxuICAgICAgICBcIkNSRUFURSBJTkRFWCBDT05DVVJSRU5UTFkgSUYgTk9UIEVYSVNUUyBpZHhfZG9jdW1lbnRzX2NhdGVnb3J5IE9OIGRvY3VtZW50cyhjYXRlZ29yeSlcIixcbiAgICAgICAgXCJDUkVBVEUgSU5ERVggQ09OQ1VSUkVOVExZIElGIE5PVCBFWElTVFMgaWR4X2RvY3VtZW50c19wdWJsaWMgT04gZG9jdW1lbnRzKGlzX3B1YmxpYylcIixcbiAgICAgICAgXCJDUkVBVEUgSU5ERVggQ09OQ1VSUkVOVExZIElGIE5PVCBFWElTVFMgaWR4X2RvY3VtZW50c191cGxvYWRlZF9ieSBPTiBkb2N1bWVudHModXBsb2FkZWRfYnkpXCIsXG4gICAgICAgIC8vIE5vdGlmaWNhdGlvbnMgdGFibGUgaW5kZXhlc1xuICAgICAgICBcIkNSRUFURSBJTkRFWCBDT05DVVJSRU5UTFkgSUYgTk9UIEVYSVNUUyBpZHhfbm90aWZpY2F0aW9uc191c2VyX2lkIE9OIG5vdGlmaWNhdGlvbnModXNlcl9pZClcIixcbiAgICAgICAgXCJDUkVBVEUgSU5ERVggQ09OQ1VSUkVOVExZIElGIE5PVCBFWElTVFMgaWR4X25vdGlmaWNhdGlvbnNfdHlwZSBPTiBub3RpZmljYXRpb25zKHR5cGUpXCIsXG4gICAgICAgIFwiQ1JFQVRFIElOREVYIENPTkNVUlJFTlRMWSBJRiBOT1QgRVhJU1RTIGlkeF9ub3RpZmljYXRpb25zX3JlYWQgT04gbm90aWZpY2F0aW9ucyhpc19yZWFkKVwiLFxuICAgICAgICBcIkNSRUFURSBJTkRFWCBDT05DVVJSRU5UTFkgSUYgTk9UIEVYSVNUUyBpZHhfbm90aWZpY2F0aW9uc19lbnRpdHkgT04gbm90aWZpY2F0aW9ucyhyZWxhdGVkX2VudGl0eV9pZCwgcmVsYXRlZF9lbnRpdHlfdHlwZSlcIixcbiAgICAgICAgXCJDUkVBVEUgSU5ERVggQ09OQ1VSUkVOVExZIElGIE5PVCBFWElTVFMgaWR4X25vdGlmaWNhdGlvbnNfY3JlYXRlZCBPTiBub3RpZmljYXRpb25zKGNyZWF0ZWRfYXQpXCJcbiAgICAgIF0sXG4gICAgICAvKipcbiAgICAgICAqIERldmVsb3BtZW50IGZyYW1ld29yayBpbmRleGVzIGZvciBxdWFsaXR5IG1ldHJpY3MgYW5kIHBpbGxhcnMuXG4gICAgICAgKi9cbiAgICAgIGZyYW1ld29ya0luZGV4ZXM6IFtcbiAgICAgICAgLy8gUXVhbGl0eSBtZXRyaWNzIGluZGV4ZXNcbiAgICAgICAgXCJDUkVBVEUgSU5ERVggQ09OQ1VSUkVOVExZIElGIE5PVCBFWElTVFMgaWR4X3F1YWxpdHlfbWV0cmljc190eXBlIE9OIHF1YWxpdHlfbWV0cmljcyhtZXRyaWNfdHlwZSlcIixcbiAgICAgICAgXCJDUkVBVEUgSU5ERVggQ09OQ1VSUkVOVExZIElGIE5PVCBFWElTVFMgaWR4X3F1YWxpdHlfbWV0cmljc190aW1lc3RhbXAgT04gcXVhbGl0eV9tZXRyaWNzKHRpbWVzdGFtcClcIixcbiAgICAgICAgLy8gRnJhbWV3b3JrIGNvbmZpZ3VyYXRpb24gaW5kZXhlc1xuICAgICAgICBcIkNSRUFURSBJTkRFWCBDT05DVVJSRU5UTFkgSUYgTk9UIEVYSVNUUyBpZHhfZnJhbWV3b3JrX2NvbmZpZ19rZXkgT04gZnJhbWV3b3JrX2NvbmZpZ3VyYXRpb24oX2tleSlcIixcbiAgICAgICAgXCJDUkVBVEUgSU5ERVggQ09OQ1VSUkVOVExZIElGIE5PVCBFWElTVFMgaWR4X2ZyYW1ld29ya19jb25maWdfdXBkYXRlZCBPTiBmcmFtZXdvcmtfY29uZmlndXJhdGlvbih1cGRhdGVkX2F0KVwiLFxuICAgICAgICAvLyBXb3Jrc3BhY2Ugc3RhdHVzIGluZGV4ZXNcbiAgICAgICAgXCJDUkVBVEUgSU5ERVggQ09OQ1VSUkVOVExZIElGIE5PVCBFWElTVFMgaWR4X3dvcmtzcGFjZV9jb21wb25lbnQgT04gd29ya3NwYWNlX3N0YXR1cyhjb21wb25lbnQpXCIsXG4gICAgICAgIFwiQ1JFQVRFIElOREVYIENPTkNVUlJFTlRMWSBJRiBOT1QgRVhJU1RTIGlkeF93b3Jrc3BhY2Vfc3RhdHVzIE9OIHdvcmtzcGFjZV9zdGF0dXMoc3RhdHVzKVwiLFxuICAgICAgICBcIkNSRUFURSBJTkRFWCBDT05DVVJSRU5UTFkgSUYgTk9UIEVYSVNUUyBpZHhfd29ya3NwYWNlX3VwZGF0ZWQgT04gd29ya3NwYWNlX3N0YXR1cyhsYXN0X3VwZGF0ZWQpXCIsXG4gICAgICAgIC8vIERldmVsb3BtZW50IHBpbGxhcnMgaW5kZXhlc1xuICAgICAgICBcIkNSRUFURSBJTkRFWCBDT05DVVJSRU5UTFkgSUYgTk9UIEVYSVNUUyBpZHhfcGlsbGFyc19zdGF0dXMgT04gZGV2ZWxvcG1lbnRfcGlsbGFycyhzdGF0dXMpXCIsXG4gICAgICAgICdDUkVBVEUgSU5ERVggQ09OQ1VSUkVOVExZIElGIE5PVCBFWElTVFMgaWR4X3BpbGxhcnNfb3JkZXIgT04gZGV2ZWxvcG1lbnRfcGlsbGFycyhcIm9yZGVyXCIpJyxcbiAgICAgICAgLy8gTWV0cmljIGVmZmVjdGl2ZW5lc3MgdHJhY2tpbmcgaW5kZXhlc1xuICAgICAgICBcIkNSRUFURSBJTkRFWCBDT05DVVJSRU5UTFkgSUYgTk9UIEVYSVNUUyBpZHhfbWV0cmljX2VmZmVjdGl2ZW5lc3NfdHlwZSBPTiBtZXRyaWNfZWZmZWN0aXZlbmVzc190cmFja2luZyhtZXRyaWNfdHlwZSlcIixcbiAgICAgICAgXCJDUkVBVEUgSU5ERVggQ09OQ1VSUkVOVExZIElGIE5PVCBFWElTVFMgaWR4X21ldHJpY19lZmZlY3RpdmVuZXNzX3ZhbGlkYXRpb24gT04gbWV0cmljX2VmZmVjdGl2ZW5lc3NfdHJhY2tpbmcodmFsaWRhdGlvbl9kYXRlKVwiLFxuICAgICAgICBcIkNSRUFURSBJTkRFWCBDT05DVVJSRU5UTFkgSUYgTk9UIEVYSVNUUyBpZHhfbWV0cmljX2VmZmVjdGl2ZW5lc3NfY29tcGxpYW5jZSBPTiBtZXRyaWNfZWZmZWN0aXZlbmVzc190cmFja2luZyhxdWViZWNfY29tcGxpYW5jZV9pbXBhY3QpXCIsXG4gICAgICAgIC8vIE1ldHJpYyBwcmVkaWN0aW9ucyBpbmRleGVzXG4gICAgICAgIFwiQ1JFQVRFIElOREVYIENPTkNVUlJFTlRMWSBJRiBOT1QgRVhJU1RTIGlkeF9tZXRyaWNfcHJlZGljdGlvbnNfdHlwZSBPTiBtZXRyaWNfcHJlZGljdGlvbnMobWV0cmljX3R5cGUpXCIsXG4gICAgICAgIFwiQ1JFQVRFIElOREVYIENPTkNVUlJFTlRMWSBJRiBOT1QgRVhJU1RTIGlkeF9tZXRyaWNfcHJlZGljdGlvbnNfY3JlYXRlZCBPTiBtZXRyaWNfcHJlZGljdGlvbnMoY3JlYXRlZF9hdClcIixcbiAgICAgICAgXCJDUkVBVEUgSU5ERVggQ09OQ1VSUkVOVExZIElGIE5PVCBFWElTVFMgaWR4X21ldHJpY19wcmVkaWN0aW9uc19jb21wbGlhbmNlIE9OIG1ldHJpY19wcmVkaWN0aW9ucyhxdWViZWNfY29tcGxpYW5jZV9yZWxldmFudClcIixcbiAgICAgICAgXCJDUkVBVEUgSU5ERVggQ09OQ1VSUkVOVExZIElGIE5PVCBFWElTVFMgaWR4X21ldHJpY19wcmVkaWN0aW9uc19jYXRlZ29yeSBPTiBtZXRyaWNfcHJlZGljdGlvbnMocHJvcGVydHlfbWFuYWdlbWVudF9jYXRlZ29yeSlcIixcbiAgICAgICAgLy8gUHJlZGljdGlvbiB2YWxpZGF0aW9ucyBpbmRleGVzXG4gICAgICAgIFwiQ1JFQVRFIElOREVYIENPTkNVUlJFTlRMWSBJRiBOT1QgRVhJU1RTIGlkeF9wcmVkaWN0aW9uX3ZhbGlkYXRpb25zX3ByZWRpY3Rpb25faWQgT04gcHJlZGljdGlvbl92YWxpZGF0aW9ucyhwcmVkaWN0aW9uX2lkKVwiLFxuICAgICAgICBcIkNSRUFURSBJTkRFWCBDT05DVVJSRU5UTFkgSUYgTk9UIEVYSVNUUyBpZHhfcHJlZGljdGlvbl92YWxpZGF0aW9uc19zdGF0dXMgT04gcHJlZGljdGlvbl92YWxpZGF0aW9ucyh2YWxpZGF0aW9uX3N0YXR1cylcIixcbiAgICAgICAgXCJDUkVBVEUgSU5ERVggQ09OQ1VSUkVOVExZIElGIE5PVCBFWElTVFMgaWR4X3ByZWRpY3Rpb25fdmFsaWRhdGlvbnNfdmFsaWRhdGVkIE9OIHByZWRpY3Rpb25fdmFsaWRhdGlvbnModmFsaWRhdGVkX2F0KVwiLFxuICAgICAgICAvLyBGZWF0dXJlcyB0YWJsZSBpbmRleGVzXG4gICAgICAgIFwiQ1JFQVRFIElOREVYIENPTkNVUlJFTlRMWSBJRiBOT1QgRVhJU1RTIGlkeF9mZWF0dXJlc19zdGF0dXMgT04gZmVhdHVyZXMoc3RhdHVzKVwiLFxuICAgICAgICBcIkNSRUFURSBJTkRFWCBDT05DVVJSRU5UTFkgSUYgTk9UIEVYSVNUUyBpZHhfZmVhdHVyZXNfcHJpb3JpdHkgT04gZmVhdHVyZXMocHJpb3JpdHkpXCIsXG4gICAgICAgIFwiQ1JFQVRFIElOREVYIENPTkNVUlJFTlRMWSBJRiBOT1QgRVhJU1RTIGlkeF9mZWF0dXJlc19jYXRlZ29yeSBPTiBmZWF0dXJlcyhjYXRlZ29yeSlcIixcbiAgICAgICAgXCJDUkVBVEUgSU5ERVggQ09OQ1VSUkVOVExZIElGIE5PVCBFWElTVFMgaWR4X2ZlYXR1cmVzX3N0cmF0ZWdpYyBPTiBmZWF0dXJlcyhpc19zdHJhdGVnaWNfcGF0aClcIixcbiAgICAgICAgXCJDUkVBVEUgSU5ERVggQ09OQ1VSUkVOVExZIElGIE5PVCBFWElTVFMgaWR4X2ZlYXR1cmVzX3JvYWRtYXAgT04gZmVhdHVyZXMoc2hvd19vbl9yb2FkbWFwKVwiLFxuICAgICAgICBcIkNSRUFURSBJTkRFWCBDT05DVVJSRU5UTFkgSUYgTk9UIEVYSVNUUyBpZHhfZmVhdHVyZXNfY3JlYXRlZCBPTiBmZWF0dXJlcyhjcmVhdGVkX2F0KVwiLFxuICAgICAgICBcIkNSRUFURSBJTkRFWCBDT05DVVJSRU5UTFkgSUYgTk9UIEVYSVNUUyBpZHhfZmVhdHVyZXNfc3luY2VkIE9OIGZlYXR1cmVzKHN5bmNlZF9hdClcIixcbiAgICAgICAgLy8gQWN0aW9uYWJsZSBpdGVtcyBpbmRleGVzXG4gICAgICAgIFwiQ1JFQVRFIElOREVYIENPTkNVUlJFTlRMWSBJRiBOT1QgRVhJU1RTIGlkeF9hY3Rpb25hYmxlX2l0ZW1zX2ZlYXR1cmVfaWQgT04gYWN0aW9uYWJsZV9pdGVtcyhmZWF0dXJlX2lkKVwiLFxuICAgICAgICBcIkNSRUFURSBJTkRFWCBDT05DVVJSRU5UTFkgSUYgTk9UIEVYSVNUUyBpZHhfYWN0aW9uYWJsZV9pdGVtc19zdGF0dXMgT04gYWN0aW9uYWJsZV9pdGVtcyhzdGF0dXMpXCIsXG4gICAgICAgIC8vIEltcHJvdmVtZW50IHN1Z2dlc3Rpb25zIGluZGV4ZXNcbiAgICAgICAgXCJDUkVBVEUgSU5ERVggQ09OQ1VSUkVOVExZIElGIE5PVCBFWElTVFMgaWR4X2ltcHJvdmVtZW50X3N1Z2dlc3Rpb25zX2NhdGVnb3J5IE9OIGltcHJvdmVtZW50X3N1Z2dlc3Rpb25zKGNhdGVnb3J5KVwiLFxuICAgICAgICBcIkNSRUFURSBJTkRFWCBDT05DVVJSRU5UTFkgSUYgTk9UIEVYSVNUUyBpZHhfaW1wcm92ZW1lbnRfc3VnZ2VzdGlvbnNfcHJpb3JpdHkgT04gaW1wcm92ZW1lbnRfc3VnZ2VzdGlvbnMocHJpb3JpdHkpXCIsXG4gICAgICAgIFwiQ1JFQVRFIElOREVYIENPTkNVUlJFTlRMWSBJRiBOT1QgRVhJU1RTIGlkeF9pbXByb3ZlbWVudF9zdWdnZXN0aW9uc19zdGF0dXMgT04gaW1wcm92ZW1lbnRfc3VnZ2VzdGlvbnMoc3RhdHVzKVwiLFxuICAgICAgICBcIkNSRUFURSBJTkRFWCBDT05DVVJSRU5UTFkgSUYgTk9UIEVYSVNUUyBpZHhfaW1wcm92ZW1lbnRfc3VnZ2VzdGlvbnNfY3JlYXRlZCBPTiBpbXByb3ZlbWVudF9zdWdnZXN0aW9ucyhjcmVhdGVkX2F0KVwiXG4gICAgICBdLFxuICAgICAgLyoqXG4gICAgICAgKiBDb21wb3NpdGUgaW5kZXhlcyBmb3IgY29tcGxleCBxdWVyeSBwYXR0ZXJucy5cbiAgICAgICAqL1xuICAgICAgY29tcG9zaXRlSW5kZXhlczogW1xuICAgICAgICAvLyBVc2VyIHJlc2lkZW5jZSBhY3RpdmUgcmVsYXRpb25zaGlwc1xuICAgICAgICBcIkNSRUFURSBJTkRFWCBDT05DVVJSRU5UTFkgSUYgTk9UIEVYSVNUUyBpZHhfdXNlcl9yZXNpZGVuY2VzX2FjdGl2ZV9yZWxhdGlvbnNoaXAgT04gdXNlcl9yZXNpZGVuY2VzKHVzZXJfaWQsIHJlc2lkZW5jZV9pZCkgV0hFUkUgaXNfYWN0aXZlID0gdHJ1ZVwiLFxuICAgICAgICAvLyBBY3RpdmUgYmlsbHMgYnkgcmVzaWRlbmNlIGFuZCBzdGF0dXNcbiAgICAgICAgXCJDUkVBVEUgSU5ERVggQ09OQ1VSUkVOVExZIElGIE5PVCBFWElTVFMgaWR4X2JpbGxzX3Jlc2lkZW5jZV9zdGF0dXMgT04gYmlsbHMocmVzaWRlbmNlX2lkLCBzdGF0dXMsIGR1ZV9kYXRlKVwiLFxuICAgICAgICAvLyBBY3RpdmUgbWFpbnRlbmFuY2UgcmVxdWVzdHMgYnkgcmVzaWRlbmNlXG4gICAgICAgIFwiQ1JFQVRFIElOREVYIENPTkNVUlJFTlRMWSBJRiBOT1QgRVhJU1RTIGlkeF9tYWludGVuYW5jZV9yZXNpZGVuY2Vfc3RhdHVzIE9OIG1haW50ZW5hbmNlX3JlcXVlc3RzKHJlc2lkZW5jZV9pZCwgc3RhdHVzLCBwcmlvcml0eSlcIixcbiAgICAgICAgLy8gQWN0aXZlIGJ1aWxkaW5ncyBieSBvcmdhbml6YXRpb25cbiAgICAgICAgXCJDUkVBVEUgSU5ERVggQ09OQ1VSUkVOVExZIElGIE5PVCBFWElTVFMgaWR4X2J1aWxkaW5nc19vcmdfYWN0aXZlIE9OIGJ1aWxkaW5ncyhvcmdhbml6YXRpb25faWQsIGlzX2FjdGl2ZSlcIixcbiAgICAgICAgLy8gQWN0aXZlIHJlc2lkZW5jZXMgYnkgYnVpbGRpbmdcbiAgICAgICAgXCJDUkVBVEUgSU5ERVggQ09OQ1VSUkVOVExZIElGIE5PVCBFWElTVFMgaWR4X3Jlc2lkZW5jZXNfYnVpbGRpbmdfYWN0aXZlIE9OIHJlc2lkZW5jZXMoYnVpbGRpbmdfaWQsIGlzX2FjdGl2ZSlcIixcbiAgICAgICAgLy8gVW5yZWFkIG5vdGlmaWNhdGlvbnMgYnkgdXNlclxuICAgICAgICBcIkNSRUFURSBJTkRFWCBDT05DVVJSRU5UTFkgSUYgTk9UIEVYSVNUUyBpZHhfbm90aWZpY2F0aW9uc191c2VyX3VucmVhZCBPTiBub3RpZmljYXRpb25zKHVzZXJfaWQsIGNyZWF0ZWRfYXQpIFdIRVJFIGlzX3JlYWQgPSBmYWxzZVwiLFxuICAgICAgICAvLyBDdXJyZW50IHllYXIgYnVkZ2V0cyBieSBidWlsZGluZ1xuICAgICAgICBcIkNSRUFURSBJTkRFWCBDT05DVVJSRU5UTFkgSUYgTk9UIEVYSVNUUyBpZHhfYnVkZ2V0c19idWlsZGluZ195ZWFyIE9OIGJ1ZGdldHMoYnVpbGRpbmdfaWQsIHllYXIsIGlzX2FjdGl2ZSlcIixcbiAgICAgICAgLy8gUmVjZW50IGZlYXR1cmVzIGZvciByb2FkbWFwXG4gICAgICAgIFwiQ1JFQVRFIElOREVYIENPTkNVUlJFTlRMWSBJRiBOT1QgRVhJU1RTIGlkeF9mZWF0dXJlc19yb2FkbWFwX3JlY2VudCBPTiBmZWF0dXJlcyhzaG93X29uX3JvYWRtYXAsIGNyZWF0ZWRfYXQpIFdIRVJFIHNob3dfb25fcm9hZG1hcCA9IHRydWVcIlxuICAgICAgXSxcbiAgICAgIC8qKlxuICAgICAgICogUGFydGlhbCBpbmRleGVzIGZvciBpbXByb3ZlZCBwZXJmb3JtYW5jZSBvbiBmaWx0ZXJlZCBxdWVyaWVzLlxuICAgICAgICovXG4gICAgICBwYXJ0aWFsSW5kZXhlczogW1xuICAgICAgICAvLyBPbmx5IGluZGV4IGFjdGl2ZSByZWNvcmRzIGZvciBmcmVxdWVudGx5IGZpbHRlcmVkIHRhYmxlc1xuICAgICAgICBcIkNSRUFURSBJTkRFWCBDT05DVVJSRU5UTFkgSUYgTk9UIEVYSVNUUyBpZHhfdXNlcnNfYWN0aXZlX2VtYWlsIE9OIHVzZXJzKGVtYWlsKSBXSEVSRSBpc19hY3RpdmUgPSB0cnVlXCIsXG4gICAgICAgIFwiQ1JFQVRFIElOREVYIENPTkNVUlJFTlRMWSBJRiBOT1QgRVhJU1RTIGlkeF9vcmdhbml6YXRpb25zX2FjdGl2ZV90eXBlIE9OIG9yZ2FuaXphdGlvbnModHlwZSkgV0hFUkUgaXNfYWN0aXZlID0gdHJ1ZVwiLFxuICAgICAgICBcIkNSRUFURSBJTkRFWCBDT05DVVJSRU5UTFkgSUYgTk9UIEVYSVNUUyBpZHhfYnVpbGRpbmdzX2FjdGl2ZV9vcmcgT04gYnVpbGRpbmdzKG9yZ2FuaXphdGlvbl9pZCkgV0hFUkUgaXNfYWN0aXZlID0gdHJ1ZVwiLFxuICAgICAgICBcIkNSRUFURSBJTkRFWCBDT05DVVJSRU5UTFkgSUYgTk9UIEVYSVNUUyBpZHhfcmVzaWRlbmNlc19hY3RpdmVfYnVpbGRpbmcgT04gcmVzaWRlbmNlcyhidWlsZGluZ19pZCkgV0hFUkUgaXNfYWN0aXZlID0gdHJ1ZVwiLFxuICAgICAgICAvLyBVbnBhaWQgYmlsbHMgb25seVxuICAgICAgICBcIkNSRUFURSBJTkRFWCBDT05DVVJSRU5UTFkgSUYgTk9UIEVYSVNUUyBpZHhfYmlsbHNfdW5wYWlkIE9OIGJpbGxzKHJlc2lkZW5jZV9pZCwgZHVlX2RhdGUpIFdIRVJFIHN0YXR1cyBJTiAoJ3NlbnQnLCAnb3ZlcmR1ZScpXCIsXG4gICAgICAgIC8vIE9wZW4gbWFpbnRlbmFuY2UgcmVxdWVzdHMgb25seVxuICAgICAgICBcIkNSRUFURSBJTkRFWCBDT05DVVJSRU5UTFkgSUYgTk9UIEVYSVNUUyBpZHhfbWFpbnRlbmFuY2Vfb3BlbiBPTiBtYWludGVuYW5jZV9yZXF1ZXN0cyhyZXNpZGVuY2VfaWQsIHByaW9yaXR5KSBXSEVSRSBzdGF0dXMgSU4gKCdzdWJtaXR0ZWQnLCAnYWNrbm93bGVkZ2VkJywgJ2luX3Byb2dyZXNzJylcIixcbiAgICAgICAgLy8gVW5yZWFkIG5vdGlmaWNhdGlvbnMgb25seVxuICAgICAgICBcIkNSRUFURSBJTkRFWCBDT05DVVJSRU5UTFkgSUYgTk9UIEVYSVNUUyBpZHhfbm90aWZpY2F0aW9uc191bnJlYWQgT04gbm90aWZpY2F0aW9ucyh1c2VyX2lkLCBjcmVhdGVkX2F0KSBXSEVSRSBpc19yZWFkID0gZmFsc2VcIlxuICAgICAgXSxcbiAgICAgIC8qKlxuICAgICAgICogQ292ZXJpbmcgaW5kZXhlcyBmb3IgU0VMRUNULWhlYXZ5IHF1ZXJpZXMgdG8gYXZvaWQgdGFibGUgbG9va3Vwcy5cbiAgICAgICAqL1xuICAgICAgY292ZXJpbmdJbmRleGVzOiBbXG4gICAgICAgIC8vIFVzZXIgbG9va3VwIHdpdGggY29tbW9uIGZpZWxkc1xuICAgICAgICBcIkNSRUFURSBJTkRFWCBDT05DVVJSRU5UTFkgSUYgTk9UIEVYSVNUUyBpZHhfdXNlcnNfY292ZXJpbmcgT04gdXNlcnMoZW1haWwpIElOQ0xVREUgKGZpcnN0X25hbWUsIGxhc3RfbmFtZSwgcm9sZSwgaXNfYWN0aXZlKVwiLFxuICAgICAgICAvLyBCdWlsZGluZyBkZXRhaWxzIHdpdGggb3JnYW5pemF0aW9uIGluZm9cbiAgICAgICAgXCJDUkVBVEUgSU5ERVggQ09OQ1VSUkVOVExZIElGIE5PVCBFWElTVFMgaWR4X2J1aWxkaW5nc19jb3ZlcmluZyBPTiBidWlsZGluZ3Mob3JnYW5pemF0aW9uX2lkKSBJTkNMVURFIChuYW1lLCBhZGRyZXNzLCBjaXR5LCBidWlsZGluZ190eXBlLCBpc19hY3RpdmUpXCIsXG4gICAgICAgIC8vIFJlc2lkZW5jZSBkZXRhaWxzIHdpdGggYnVpbGRpbmcgaW5mb1xuICAgICAgICBcIkNSRUFURSBJTkRFWCBDT05DVVJSRU5UTFkgSUYgTk9UIEVYSVNUUyBpZHhfcmVzaWRlbmNlc19jb3ZlcmluZyBPTiByZXNpZGVuY2VzKGJ1aWxkaW5nX2lkKSBJTkNMVURFICh1bml0X251bWJlciwgZmxvb3IsIHNxdWFyZV9mb290YWdlLCBpc19hY3RpdmUpXCIsXG4gICAgICAgIC8vIEJpbGwgZGV0YWlscyBmb3IgcmVzaWRlbnQgcG9ydGFsc1xuICAgICAgICBcIkNSRUFURSBJTkRFWCBDT05DVVJSRU5UTFkgSUYgTk9UIEVYSVNUUyBpZHhfYmlsbHNfY292ZXJpbmcgT04gYmlsbHMocmVzaWRlbmNlX2lkLCBzdGF0dXMpIElOQ0xVREUgKGJpbGxfbnVtYmVyLCBhbW91bnQsIGR1ZV9kYXRlLCB0eXBlKVwiLFxuICAgICAgICAvLyBNYWludGVuYW5jZSByZXF1ZXN0IGRldGFpbHNcbiAgICAgICAgXCJDUkVBVEUgSU5ERVggQ09OQ1VSUkVOVExZIElGIE5PVCBFWElTVFMgaWR4X21haW50ZW5hbmNlX2NvdmVyaW5nIE9OIG1haW50ZW5hbmNlX3JlcXVlc3RzKHJlc2lkZW5jZV9pZCwgc3RhdHVzKSBJTkNMVURFICh0aXRsZSwgcHJpb3JpdHksIGNhdGVnb3J5LCBzY2hlZHVsZWRfZGF0ZSlcIixcbiAgICAgICAgLy8gTm90aWZpY2F0aW9uIGRldGFpbHMgZm9yIHVzZXIgZGFzaGJvYXJkc1xuICAgICAgICBcIkNSRUFURSBJTkRFWCBDT05DVVJSRU5UTFkgSUYgTk9UIEVYSVNUUyBpZHhfbm90aWZpY2F0aW9uc19jb3ZlcmluZyBPTiBub3RpZmljYXRpb25zKHVzZXJfaWQsIGlzX3JlYWQpIElOQ0xVREUgKHRpdGxlLCBtZXNzYWdlLCB0eXBlLCBjcmVhdGVkX2F0KVwiXG4gICAgICBdLFxuICAgICAgLyoqXG4gICAgICAgKiBNYXRlcmlhbGl6ZWQgdmlld3MgZm9yIGNvbXBsZXggYWdncmVnYXRpb25zIHRvIGltcHJvdmUgZGFzaGJvYXJkIHBlcmZvcm1hbmNlLlxuICAgICAgICovXG4gICAgICBtYXRlcmlhbGl6ZWRWaWV3czogW1xuICAgICAgICAvLyBCdWlsZGluZyBkYXNoYm9hcmQgc3RhdGlzdGljc1xuICAgICAgICBgQ1JFQVRFIE1BVEVSSUFMSVpFRCBWSUVXIElGIE5PVCBFWElTVFMgbXZfYnVpbGRpbmdfc3RhdHMgQVNcbiAgICAgU0VMRUNUIFxuICAgICAgIGIuaWQgYXMgYnVpbGRpbmdfaWQsXG4gICAgICAgYi5uYW1lIGFzIGJ1aWxkaW5nX25hbWUsXG4gICAgICAgQ09VTlQoRElTVElOQ1Qgci5pZCkgYXMgdG90YWxfcmVzaWRlbmNlcyxcbiAgICAgICBDT1VOVChESVNUSU5DVCB1ci51c2VyX2lkKSBhcyB0b3RhbF9yZXNpZGVudHMsXG4gICAgICAgQ09VTlQoRElTVElOQ1QgQ0FTRSBXSEVOIGJpbGwuc3RhdHVzID0gJ292ZXJkdWUnIFRIRU4gYmlsbC5pZCBFTkQpIGFzIG92ZXJkdWVfYmlsbHMsXG4gICAgICAgQ09VTlQoRElTVElOQ1QgQ0FTRSBXSEVOIG1yLnN0YXR1cyBJTiAoJ3N1Ym1pdHRlZCcsICdhY2tub3dsZWRnZWQnLCAnaW5fcHJvZ3Jlc3MnKSBUSEVOIG1yLmlkIEVORCkgYXMgb3Blbl9tYWludGVuYW5jZSxcbiAgICAgICBBVkcoci5zcXVhcmVfZm9vdGFnZSkgYXMgYXZnX3NxdWFyZV9mb290YWdlLFxuICAgICAgIE1BWChiLnVwZGF0ZWRfYXQpIGFzIGxhc3RfdXBkYXRlZFxuICAgICBGUk9NIGJ1aWxkaW5ncyBiXG4gICAgIExFRlQgSk9JTiByZXNpZGVuY2VzIHIgT04gYi5pZCA9IHIuYnVpbGRpbmdfaWQgQU5EIHIuaXNfYWN0aXZlID0gdHJ1ZVxuICAgICBMRUZUIEpPSU4gdXNlcl9yZXNpZGVuY2VzIHVyIE9OIHIuaWQgPSB1ci5yZXNpZGVuY2VfaWQgQU5EIHVyLmlzX2FjdGl2ZSA9IHRydWVcbiAgICAgTEVGVCBKT0lOIGJpbGxzIGJpbGwgT04gci5pZCA9IGJpbGwucmVzaWRlbmNlX2lkXG4gICAgIExFRlQgSk9JTiBtYWludGVuYW5jZV9yZXF1ZXN0cyBtciBPTiByLmlkID0gbXIucmVzaWRlbmNlX2lkXG4gICAgIFdIRVJFIGIuaXNfYWN0aXZlID0gdHJ1ZVxuICAgICBHUk9VUCBCWSBiLmlkLCBiLm5hbWVgLFxuICAgICAgICAvLyBPcmdhbml6YXRpb24gZGFzaGJvYXJkIG92ZXJ2aWV3XG4gICAgICAgIGBDUkVBVEUgTUFURVJJQUxJWkVEIFZJRVcgSUYgTk9UIEVYSVNUUyBtdl9vcmdhbml6YXRpb25fb3ZlcnZpZXcgQVNcbiAgICAgU0VMRUNUIFxuICAgICAgIG8uaWQgYXMgb3JnYW5pemF0aW9uX2lkLFxuICAgICAgIG8ubmFtZSBhcyBvcmdhbml6YXRpb25fbmFtZSxcbiAgICAgICBDT1VOVChESVNUSU5DVCBiLmlkKSBhcyB0b3RhbF9idWlsZGluZ3MsXG4gICAgICAgQ09VTlQoRElTVElOQ1Qgci5pZCkgYXMgdG90YWxfcmVzaWRlbmNlcyxcbiAgICAgICBDT1VOVChESVNUSU5DVCB1ci51c2VyX2lkKSBhcyB0b3RhbF91c2VycyxcbiAgICAgICBTVU0oQ0FTRSBXSEVOIGJpbGwuc3RhdHVzID0gJ3BhaWQnIFRIRU4gYmlsbC5hbW91bnQgRUxTRSAwIEVORCkgYXMgcGFpZF9hbW91bnQsXG4gICAgICAgU1VNKENBU0UgV0hFTiBiaWxsLnN0YXR1cyBJTiAoJ3NlbnQnLCAnb3ZlcmR1ZScpIFRIRU4gYmlsbC5hbW91bnQgRUxTRSAwIEVORCkgYXMgb3V0c3RhbmRpbmdfYW1vdW50LFxuICAgICAgIENPVU5UKENBU0UgV0hFTiBtci5zdGF0dXMgSU4gKCdzdWJtaXR0ZWQnLCAnYWNrbm93bGVkZ2VkJywgJ2luX3Byb2dyZXNzJykgVEhFTiAxIEVORCkgYXMgb3Blbl9yZXF1ZXN0c1xuICAgICBGUk9NIG9yZ2FuaXphdGlvbnMgb1xuICAgICBMRUZUIEpPSU4gYnVpbGRpbmdzIGIgT04gby5pZCA9IGIub3JnYW5pemF0aW9uX2lkIEFORCBiLmlzX2FjdGl2ZSA9IHRydWVcbiAgICAgTEVGVCBKT0lOIHJlc2lkZW5jZXMgciBPTiBiLmlkID0gci5idWlsZGluZ19pZCBBTkQgci5pc19hY3RpdmUgPSB0cnVlXG4gICAgIExFRlQgSk9JTiB1c2VyX3Jlc2lkZW5jZXMgdXIgT04gci5pZCA9IHVyLnJlc2lkZW5jZV9pZCBBTkQgdXIuaXNfYWN0aXZlID0gdHJ1ZVxuICAgICBMRUZUIEpPSU4gYmlsbHMgYmlsbCBPTiByLmlkID0gYmlsbC5yZXNpZGVuY2VfaWRcbiAgICAgTEVGVCBKT0lOIG1haW50ZW5hbmNlX3JlcXVlc3RzIG1yIE9OIHIuaWQgPSBtci5yZXNpZGVuY2VfaWRcbiAgICAgV0hFUkUgby5pc19hY3RpdmUgPSB0cnVlXG4gICAgIEdST1VQIEJZIG8uaWQsIG8ubmFtZWAsXG4gICAgICAgIC8vIEZpbmFuY2lhbCBzdW1tYXJ5IGZvciBidWRnZXRpbmdcbiAgICAgICAgYENSRUFURSBNQVRFUklBTElaRUQgVklFVyBJRiBOT1QgRVhJU1RTIG12X2ZpbmFuY2lhbF9zdW1tYXJ5IEFTXG4gICAgIFNFTEVDVCBcbiAgICAgICBiLmJ1aWxkaW5nX2lkLFxuICAgICAgIERBVEVfVFJVTkMoJ21vbnRoJywgYmlsbC5kdWVfZGF0ZSkgYXMgbW9udGgsXG4gICAgICAgU1VNKENBU0UgV0hFTiBiaWxsLnN0YXR1cyA9ICdwYWlkJyBUSEVOIGJpbGwuYW1vdW50IEVMU0UgMCBFTkQpIGFzIHJldmVudWUsXG4gICAgICAgU1VNKENBU0UgV0hFTiBiaWxsLnN0YXR1cyBJTiAoJ3NlbnQnLCAnb3ZlcmR1ZScpIFRIRU4gYmlsbC5hbW91bnQgRUxTRSAwIEVORCkgYXMgb3V0c3RhbmRpbmcsXG4gICAgICAgQ09VTlQoRElTVElOQ1QgYmlsbC5yZXNpZGVuY2VfaWQpIGFzIGJpbGxlZF9yZXNpZGVuY2VzLFxuICAgICAgIEFWRyhiaWxsLmFtb3VudCkgYXMgYXZnX2JpbGxfYW1vdW50XG4gICAgIEZST00gYmlsbHMgYmlsbFxuICAgICBKT0lOIHJlc2lkZW5jZXMgciBPTiBiaWxsLnJlc2lkZW5jZV9pZCA9IHIuaWRcbiAgICAgSk9JTiBidWlsZGluZ3MgYiBPTiByLmJ1aWxkaW5nX2lkID0gYi5pZFxuICAgICBXSEVSRSBiaWxsLmR1ZV9kYXRlID49IERBVEVfVFJVTkMoJ3llYXInLCBDVVJSRU5UX0RBVEUpXG4gICAgIEdST1VQIEJZIGIuYnVpbGRpbmdfaWQsIERBVEVfVFJVTkMoJ21vbnRoJywgYmlsbC5kdWVfZGF0ZSlgXG4gICAgICBdXG4gICAgfTtcbiAgICBRdWVyeU9wdGltaXplciA9IGNsYXNzIHtcbiAgICAgIC8qKlxuICAgICAgICogQ2hlY2sgaWYgZGF0YWJhc2UgaW5kZXhlcyBhcmUgYWxyZWFkeSBzZXQgdXBcbiAgICAgICAqL1xuICAgICAgc3RhdGljIGFzeW5jIGFyZUluZGV4ZXNTZXR1cCgpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBzcWwxMWBcbiAgICAgICAgU0VMRUNUIENPVU5UKCopIGFzIGNvdW50XG4gICAgICAgIEZST00gcGdfaW5kZXhlcyBcbiAgICAgICAgV0hFUkUgaW5kZXhuYW1lIElOIChcbiAgICAgICAgICAnaWR4X3VzZXJzX2VtYWlsJyxcbiAgICAgICAgICAnaWR4X2J1aWxkaW5nc19vcmdfaWQnLCBcbiAgICAgICAgICAnaWR4X3Jlc2lkZW5jZXNfYnVpbGRpbmdfaWQnLFxuICAgICAgICAgICdpZHhfYmlsbHNfcmVzaWRlbmNlX2lkJ1xuICAgICAgICApXG4gICAgICBgO1xuICAgICAgICAgIGNvbnN0IHJvdyA9IEFycmF5LmlzQXJyYXkocmVzdWx0KSA/IHJlc3VsdFswXSA6IHJlc3VsdDtcbiAgICAgICAgICBpZiAoIXJvdyB8fCB0eXBlb2Ygcm93LmNvdW50ID09PSBcInVuZGVmaW5lZFwiKSB7XG4gICAgICAgICAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiKSB7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgfVxuICAgICAgICAgIGNvbnN0IGluZGV4Q291bnQgPSBwYXJzZUludChTdHJpbmcocm93LmNvdW50KSk7XG4gICAgICAgICAgcmV0dXJuIGluZGV4Q291bnQgPj0gNDtcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICBjb25zb2xlLmVycm9yKFwiXFx1Mjc0QyBFcnJvciBjaGVja2luZyBkYXRhYmFzZSBpbmRleGVzOlwiLCBlcnJvcik7XG4gICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICAvKipcbiAgICAgICAqIEFwcGxpZXMgYWxsIGNvcmUgZGF0YWJhc2UgaW5kZXhlcyBmb3IgUXVlYmVjIHByb3BlcnR5IG1hbmFnZW1lbnQuXG4gICAgICAgKi9cbiAgICAgIHN0YXRpYyBhc3luYyBhcHBseUNvcmVPcHRpbWl6YXRpb25zKCkge1xuICAgICAgICBjb25zdCBhbGxJbmRleGVzID0gW1xuICAgICAgICAgIC4uLkRhdGFiYXNlT3B0aW1pemF0aW9uLmNvcmVJbmRleGVzLFxuICAgICAgICAgIC4uLkRhdGFiYXNlT3B0aW1pemF0aW9uLmZyYW1ld29ya0luZGV4ZXMsXG4gICAgICAgICAgLi4uRGF0YWJhc2VPcHRpbWl6YXRpb24uY29tcG9zaXRlSW5kZXhlcyxcbiAgICAgICAgICAuLi5EYXRhYmFzZU9wdGltaXphdGlvbi5wYXJ0aWFsSW5kZXhlc1xuICAgICAgICBdO1xuICAgICAgICBmb3IgKGNvbnN0IGluZGV4UXVlcnkgb2YgYWxsSW5kZXhlcykge1xuICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICBhd2FpdCBzcWwxMWAke2luZGV4UXVlcnl9YDtcbiAgICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcihcIlxcdTI3NEMgRXJyb3IgYXBwbHlpbmcgY29yZSBpbmRleDpcIiwgZXJyb3IpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBmb3IgKGNvbnN0IGluZGV4UXVlcnkgb2YgRGF0YWJhc2VPcHRpbWl6YXRpb24uY292ZXJpbmdJbmRleGVzKSB7XG4gICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGF3YWl0IHNxbDExYCR7aW5kZXhRdWVyeX1gO1xuICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKFwiXFx1Mjc0QyBFcnJvciBhcHBseWluZyBjb3ZlcmluZyBpbmRleDpcIiwgZXJyb3IpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBmb3IgKGNvbnN0IHZpZXdRdWVyeSBvZiBEYXRhYmFzZU9wdGltaXphdGlvbi5tYXRlcmlhbGl6ZWRWaWV3cykge1xuICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICBhd2FpdCBzcWwxMWAke3ZpZXdRdWVyeX1gO1xuICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKFwiXFx1Mjc0QyBFcnJvciBjcmVhdGluZyBtYXRlcmlhbGl6ZWQgdmlldzpcIiwgZXJyb3IpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgLyoqXG4gICAgICAgKiBBbmFseXplcyBxdWVyeSBwZXJmb3JtYW5jZSBhbmQgc3VnZ2VzdHMgb3B0aW1pemF0aW9ucy5cbiAgICAgICAqL1xuICAgICAgc3RhdGljIGFzeW5jIGFuYWx5emVRdWVyeVBlcmZvcm1hbmNlKCkge1xuICAgICAgICB0cnkge1xuICAgICAgICAgIGF3YWl0IHNxbDExYFNFVCBsb2dfbWluX2R1cmF0aW9uX3N0YXRlbWVudCA9IDEwMGA7XG4gICAgICAgICAgYXdhaXQgc3FsMTFgU0VUIGxvZ19zdGF0ZW1lbnQgPSAnYWxsJ2A7XG4gICAgICAgICAgY29uc3Qgc2xvd1F1ZXJpZXMgPSBhd2FpdCBzcWwxMWBcbiAgICAgICAgU0VMRUNUIHF1ZXJ5LCBtZWFuX2V4ZWNfdGltZSwgY2FsbHMsIHRvdGFsX2V4ZWNfdGltZVxuICAgICAgICBGUk9NIHBnX3N0YXRfc3RhdGVtZW50c1xuICAgICAgICBXSEVSRSBtZWFuX2V4ZWNfdGltZSA+IDEwMFxuICAgICAgICBPUkRFUiBCWSBtZWFuX2V4ZWNfdGltZSBERVNDXG4gICAgICAgIExJTUlUIDEwXG4gICAgICBgO1xuICAgICAgICAgIGNvbnN0IGluZGV4VXNhZ2UgPSBhd2FpdCBzcWwxMWBcbiAgICAgICAgU0VMRUNUIHNjaGVtYW5hbWUsIHRhYmxlbmFtZSwgaW5kZXhuYW1lLCBpZHhfdHVwX3JlYWQsIGlkeF90dXBfZmV0Y2hcbiAgICAgICAgRlJPTSBwZ19zdGF0X3VzZXJfaW5kZXhlc1xuICAgICAgICBXSEVSRSBpZHhfdHVwX3JlYWQgPiAwXG4gICAgICAgIE9SREVSIEJZIGlkeF90dXBfcmVhZCBERVNDXG4gICAgICAgIExJTUlUIDIwXG4gICAgICBgO1xuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXCJcXHUyNzRDIEVycm9yIGFuYWx5emluZyBxdWVyeSBwZXJmb3JtYW5jZTpcIiwgZXJyb3IpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICAvKipcbiAgICAgICAqIFByb3ZpZGVzIHF1ZXJ5IG9wdGltaXphdGlvbiBzdWdnZXN0aW9ucy5cbiAgICAgICAqL1xuICAgICAgc3RhdGljIGdldE9wdGltaXphdGlvblN1Z2dlc3Rpb25zKCkge1xuICAgICAgICByZXR1cm4gW1xuICAgICAgICAgIFwiXFx1MjcwNSBBZGQgaW5kZXhlcyBvbiBmcmVxdWVudGx5IHF1ZXJpZWQgZm9yZWlnbiBrZXlzXCIsXG4gICAgICAgICAgXCJcXHUyNzA1IFVzZSBwYXJ0aWFsIGluZGV4ZXMgZm9yIGZpbHRlcmVkIHF1ZXJpZXMgKGUuZy4sIFdIRVJFIGlzX2FjdGl2ZSA9IHRydWUpXCIsXG4gICAgICAgICAgXCJcXHUyNzA1IEltcGxlbWVudCBxdWVyeSByZXN1bHQgY2FjaGluZyBmb3IgZXhwZW5zaXZlIG9wZXJhdGlvbnNcIixcbiAgICAgICAgICBcIlxcdTI3MDUgVXNlIExJTUlUIGNsYXVzZXMgZm9yIGxhcmdlIHJlc3VsdCBzZXRzXCIsXG4gICAgICAgICAgXCJcXHUyNzA1IENvbnNpZGVyIG1hdGVyaWFsaXplZCB2aWV3cyBmb3IgY29tcGxleCBhZ2dyZWdhdGlvbnNcIixcbiAgICAgICAgICBcIlxcdTI3MDUgT3B0aW1pemUgSk9JTiBvcmRlciBpbiBjb21wbGV4IHF1ZXJpZXNcIixcbiAgICAgICAgICBcIlxcdTI3MDUgVXNlIEVYSVNUUyBpbnN0ZWFkIG9mIElOIGZvciBzdWJxdWVyaWVzXCIsXG4gICAgICAgICAgXCJcXHUyNzA1IEltcGxlbWVudCBwYWdpbmF0aW9uIGZvciBsYXJnZSBkYXRhc2V0c1wiLFxuICAgICAgICAgIFwiXFx1MjcwNSBBZGQgY292ZXJpbmcgaW5kZXhlcyBmb3IgU0VMRUNULWhlYXZ5IHF1ZXJpZXNcIixcbiAgICAgICAgICBcIlxcdTI3MDUgUmVndWxhciBWQUNVVU0gYW5kIEFOQUxZWkUgbWFpbnRlbmFuY2VcIlxuICAgICAgICBdO1xuICAgICAgfVxuICAgICAgLyoqXG4gICAgICAgKiBPcHRpbWl6ZXMgcXVlcnkgc3RydWN0dXJlIGZvciBiZXR0ZXIgcGVyZm9ybWFuY2UuXG4gICAgICAgKiBAcGFyYW0gYmFzZVF1ZXJ5XG4gICAgICAgKiBAcGFyYW0gb3B0aW9uc1xuICAgICAgICogQHBhcmFtIF9vcHRpb25zXG4gICAgICAgKi9cbiAgICAgIHN0YXRpYyBvcHRpbWl6ZVF1ZXJ5KGJhc2VRdWVyeSwgX29wdGlvbnMgPSB7fSkge1xuICAgICAgICBsZXQgb3B0aW1pemVkUXVlcnkgPSBiYXNlUXVlcnk7XG4gICAgICAgIGlmIChfb3B0aW9ucy5saW1pdCAmJiAhb3B0aW1pemVkUXVlcnkudG9Mb3dlckNhc2UoKS5pbmNsdWRlcyhcImxpbWl0XCIpKSB7XG4gICAgICAgICAgb3B0aW1pemVkUXVlcnkgKz0gYCBMSU1JVCAke19vcHRpb25zLmxpbWl0fWA7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKF9vcHRpb25zLnVzZUV4aXN0cyAmJiBvcHRpbWl6ZWRRdWVyeS50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKFwiIGluIChcIikpIHtcbiAgICAgICAgfVxuICAgICAgICBpZiAob3B0aW1pemVkUXVlcnkudG9Mb3dlckNhc2UoKS5pbmNsdWRlcyhcImpvaW5cIikgJiYgX29wdGlvbnMub3B0aW1pemVKb2lucykge1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBvcHRpbWl6ZWRRdWVyeTtcbiAgICAgIH1cbiAgICAgIC8qKlxuICAgICAgICogUmVmcmVzaGVzIG1hdGVyaWFsaXplZCB2aWV3cyBmb3IgdXAtdG8tZGF0ZSBhZ2dyZWdhdGVkIGRhdGEuXG4gICAgICAgKi9cbiAgICAgIHN0YXRpYyBhc3luYyByZWZyZXNoTWF0ZXJpYWxpemVkVmlld3MoKSB7XG4gICAgICAgIGNvbnN0IHZpZXdzID0gW1wibXZfYnVpbGRpbmdfc3RhdHNcIiwgXCJtdl9vcmdhbml6YXRpb25fb3ZlcnZpZXdcIiwgXCJtdl9maW5hbmNpYWxfc3VtbWFyeVwiXTtcbiAgICAgICAgZm9yIChjb25zdCB2aWV3IG9mIHZpZXdzKSB7XG4gICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGF3YWl0IHNxbDExYFJFRlJFU0ggTUFURVJJQUxJWkVEIFZJRVcgQ09OQ1VSUkVOVExZICR7dmlld31gO1xuICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKGBcXHUyNzRDIEVycm9yIHJlZnJlc2hpbmcgbWF0ZXJpYWxpemVkIHZpZXcgJHt2aWV3fTpgLCBlcnJvcik7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfTtcbiAgICBEYXRhYmFzZU1haW50ZW5hbmNlID0gY2xhc3Mge1xuICAgICAgLyoqXG4gICAgICAgKiBQZXJmb3JtcyByb3V0aW5lIGRhdGFiYXNlIG1haW50ZW5hbmNlIGZvciBvcHRpbWFsIHBlcmZvcm1hbmNlLlxuICAgICAgICovXG4gICAgICBzdGF0aWMgYXN5bmMgcGVyZm9ybU1haW50ZW5hbmNlKCkge1xuICAgICAgICB0cnkge1xuICAgICAgICAgIGF3YWl0IHNxbDExYEFOQUxZWkVgO1xuICAgICAgICAgIGF3YWl0IHNxbDExYFZBQ1VVTWA7XG4gICAgICAgICAgYXdhaXQgc3FsMTFgUkVJTkRFWCBEQVRBQkFTRSBDT05DVVJSRU5UTFkgJHtwcm9jZXNzLmVudi5QR0RBVEFCQVNFfWA7XG4gICAgICAgICAgYXdhaXQgUXVlcnlPcHRpbWl6ZXIucmVmcmVzaE1hdGVyaWFsaXplZFZpZXdzKCk7XG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgY29uc29sZS5lcnJvcihcIlxcdTI3NEMgRXJyb3IgcGVyZm9ybWluZyBkYXRhYmFzZSBtYWludGVuYW5jZTpcIiwgZXJyb3IpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICAvKipcbiAgICAgICAqIE1vbml0b3JzIGRhdGFiYXNlIHBlcmZvcm1hbmNlIG1ldHJpY3MuXG4gICAgICAgKi9cbiAgICAgIHN0YXRpYyBhc3luYyBnZXRQZXJmb3JtYW5jZU1ldHJpY3MoKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgY29uc3QgbWV0cmljcyA9IGF3YWl0IHNxbDExYFxuICAgICAgICBTRUxFQ1QgXG4gICAgICAgICAgJ2Nvbm5lY3Rpb25zJyBhcyBtZXRyaWMsXG4gICAgICAgICAgY291bnQoKikgYXMgdmFsdWVcbiAgICAgICAgRlJPTSBwZ19zdGF0X2FjdGl2aXR5XG4gICAgICAgIFVOSU9OIEFMTFxuICAgICAgICBTRUxFQ1QgXG4gICAgICAgICAgJ3Nsb3dfcXVlcmllcycgYXMgbWV0cmljLFxuICAgICAgICAgIGNvdW50KCopIGFzIHZhbHVlXG4gICAgICAgIEZST00gcGdfc3RhdF9zdGF0ZW1lbnRzXG4gICAgICAgIFdIRVJFIG1lYW5fZXhlY190aW1lID4gMTAwXG4gICAgICAgIFVOSU9OIEFMTFxuICAgICAgICBTRUxFQ1QgXG4gICAgICAgICAgJ2NhY2hlX2hpdF9yYXRpbycgYXMgbWV0cmljLFxuICAgICAgICAgIHJvdW5kKDEwMC4wICogc3VtKGJsa3NfaGl0KSAvIChzdW0oYmxrc19oaXQpICsgc3VtKGJsa3NfcmVhZCkpLCAyKSBhcyB2YWx1ZVxuICAgICAgICBGUk9NIHBnX3N0YXRfZGF0YWJhc2VcbiAgICAgICAgV0hFUkUgZGF0bmFtZSA9IGN1cnJlbnRfZGF0YWJhc2UoKVxuICAgICAgYDtcbiAgICAgICAgICByZXR1cm4gbWV0cmljcztcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICBjb25zb2xlLmVycm9yKFwiXFx1Mjc0QyBFcnJvciBnZXR0aW5nIHBlcmZvcm1hbmNlIG1ldHJpY3M6XCIsIGVycm9yKTtcbiAgICAgICAgICByZXR1cm4gW107XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9O1xuICB9XG59KTtcblxuLy8gc2VydmVyL3F1ZXJ5LWNhY2hlLnRzXG5pbXBvcnQgeyBMUlVDYWNoZSB9IGZyb20gXCJscnUtY2FjaGVcIjtcbnZhciBDQUNIRV9DT05GSUdTLCBRdWVyeUNhY2hlTWFuYWdlciwgcXVlcnlDYWNoZSwgQ2FjaGVJbnZhbGlkYXRvcjtcbnZhciBpbml0X3F1ZXJ5X2NhY2hlID0gX19lc20oe1xuICBcInNlcnZlci9xdWVyeS1jYWNoZS50c1wiKCkge1xuICAgIENBQ0hFX0NPTkZJR1MgPSB7XG4gICAgICAvLyBVc2VyIGRhdGEgLSBmcmVxdWVudGx5IGFjY2Vzc2VkLCBtb2RlcmF0ZSBjaGFuZ2VzXG4gICAgICB1c2VyczogeyBtYXhTaXplOiAxZTMsIHR0bDogNSAqIDYwICogMWUzIH0sXG4gICAgICAvLyA1IG1pbnV0ZXNcbiAgICAgIC8vIE9yZ2FuaXphdGlvbiBkYXRhIC0gc3RhYmxlLCBpbmZyZXF1ZW50IGNoYW5nZXNcbiAgICAgIG9yZ2FuaXphdGlvbnM6IHsgbWF4U2l6ZTogMTAwLCB0dGw6IDMwICogNjAgKiAxZTMgfSxcbiAgICAgIC8vIDMwIG1pbnV0ZXNcbiAgICAgIC8vIEJ1aWxkaW5nIGRhdGEgLSByZWxhdGl2ZWx5IHN0YWJsZVxuICAgICAgYnVpbGRpbmdzOiB7IG1heFNpemU6IDUwMCwgdHRsOiAxNSAqIDYwICogMWUzIH0sXG4gICAgICAvLyAxNSBtaW51dGVzXG4gICAgICAvLyBSZXNpZGVuY2UgZGF0YSAtIHN0YWJsZSBzdHJ1Y3R1cmUsIG9jY2FzaW9uYWwgdXBkYXRlc1xuICAgICAgcmVzaWRlbmNlczogeyBtYXhTaXplOiAyZTMsIHR0bDogMTAgKiA2MCAqIDFlMyB9LFxuICAgICAgLy8gMTAgbWludXRlc1xuICAgICAgLy8gQmlsbHMgLSB0aW1lLXNlbnNpdGl2ZSwgZnJlcXVlbnQgdXBkYXRlc1xuICAgICAgYmlsbHM6IHsgbWF4U2l6ZTogMWUzLCB0dGw6IDIgKiA2MCAqIDFlMyB9LFxuICAgICAgLy8gMiBtaW51dGVzXG4gICAgICAvLyBNYWludGVuYW5jZSByZXF1ZXN0cyAtIGR5bmFtaWMsIGZyZXF1ZW50IHN0YXR1cyBjaGFuZ2VzXG4gICAgICBtYWludGVuYW5jZTogeyBtYXhTaXplOiA1MDAsIHR0bDogMSAqIDYwICogMWUzIH0sXG4gICAgICAvLyAxIG1pbnV0ZVxuICAgICAgLy8gTm90aWZpY2F0aW9ucyAtIHJlYWwtdGltZSwgc2hvcnQgY2FjaGVcbiAgICAgIG5vdGlmaWNhdGlvbnM6IHsgbWF4U2l6ZTogNTAwLCB0dGw6IDMwICogMWUzIH0sXG4gICAgICAvLyAzMCBzZWNvbmRzXG4gICAgICAvLyBRdWFsaXR5IG1ldHJpY3MgLSBzdGFibGUgZm9yIHBlcmlvZHNcbiAgICAgIG1ldHJpY3M6IHsgbWF4U2l6ZTogMjAwLCB0dGw6IDUgKiA2MCAqIDFlMyB9LFxuICAgICAgLy8gNSBtaW51dGVzXG4gICAgICAvLyBGZWF0dXJlcyBhbmQgcm9hZG1hcCAtIG1vZGVyYXRlbHkgc3RhYmxlXG4gICAgICBmZWF0dXJlczogeyBtYXhTaXplOiAzMDAsIHR0bDogMyAqIDYwICogMWUzIH0sXG4gICAgICAvLyAzIG1pbnV0ZXNcbiAgICAgIC8vIEZyYW1ld29yayBjb25maWd1cmF0aW9uIC0gdmVyeSBzdGFibGVcbiAgICAgIGNvbmZpZzogeyBtYXhTaXplOiAxMDAsIHR0bDogNjAgKiA2MCAqIDFlMyB9LFxuICAgICAgLy8gMSBob3VyXG4gICAgICAvLyBCdWcgcmVwb3J0cyAtIG1vZGVyYXRlIGNoYW5nZXMsIHVzZXItc3BlY2lmaWNcbiAgICAgIGJ1Z3M6IHsgbWF4U2l6ZTogNTAwLCB0dGw6IDIgKiA2MCAqIDFlMyB9XG4gICAgICAvLyAyIG1pbnV0ZXNcbiAgICB9O1xuICAgIFF1ZXJ5Q2FjaGVNYW5hZ2VyID0gY2xhc3Mge1xuICAgICAgLyoqXG4gICAgICAgKlxuICAgICAgICovXG4gICAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgdGhpcy5jYWNoZXMgPSAvKiBAX19QVVJFX18gKi8gbmV3IE1hcCgpO1xuICAgICAgICB0aGlzLmhpdENvdW50cyA9IC8qIEBfX1BVUkVfXyAqLyBuZXcgTWFwKCk7XG4gICAgICAgIHRoaXMubWlzc0NvdW50cyA9IC8qIEBfX1BVUkVfXyAqLyBuZXcgTWFwKCk7XG4gICAgICAgIE9iamVjdC5lbnRyaWVzKENBQ0hFX0NPTkZJR1MpLmZvckVhY2goKFt0eXBlLCBjb25maWcyXSkgPT4ge1xuICAgICAgICAgIHRoaXMuY2FjaGVzLnNldChcbiAgICAgICAgICAgIHR5cGUsXG4gICAgICAgICAgICBuZXcgTFJVQ2FjaGUoe1xuICAgICAgICAgICAgICBtYXg6IGNvbmZpZzIubWF4U2l6ZSxcbiAgICAgICAgICAgICAgdHRsOiBjb25maWcyLnR0bCxcbiAgICAgICAgICAgICAgdXBkYXRlQWdlT25HZXQ6IHRydWUsXG4gICAgICAgICAgICAgIHVwZGF0ZUFnZU9uSGFzOiB0cnVlXG4gICAgICAgICAgICB9KVxuICAgICAgICAgICk7XG4gICAgICAgICAgdGhpcy5oaXRDb3VudHMuc2V0KHR5cGUsIDApO1xuICAgICAgICAgIHRoaXMubWlzc0NvdW50cy5zZXQodHlwZSwgMCk7XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgICAgLyoqXG4gICAgICAgKiBHZXRzIGNhY2hlZCBkYXRhIGlmIGF2YWlsYWJsZS5cbiAgICAgICAqIEBwYXJhbSBjYWNoZVR5cGUgVHlwZSBvZiBjYWNoZSAodXNlcnMsIGJ1aWxkaW5ncywgZXRjLikuXG4gICAgICAgKiBAcGFyYW0ga2V5IENhY2hlIGtleS5cbiAgICAgICAqIEBwYXJhbSBfa2V5XG4gICAgICAgKiBAcmV0dXJucyBDYWNoZWQgZGF0YSBvciB1bmRlZmluZWQuXG4gICAgICAgKi9cbiAgICAgIGdldChjYWNoZVR5cGUsIF9rZXkpIHtcbiAgICAgICAgY29uc3QgY2FjaGUgPSB0aGlzLmNhY2hlcy5nZXQoY2FjaGVUeXBlKTtcbiAgICAgICAgaWYgKCFjYWNoZSkge1xuICAgICAgICAgIHJldHVybiB2b2lkIDA7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgcmVzdWx0ID0gY2FjaGUuZ2V0KF9rZXkpO1xuICAgICAgICBpZiAocmVzdWx0ICE9PSB2b2lkIDApIHtcbiAgICAgICAgICB0aGlzLmhpdENvdW50cy5zZXQoY2FjaGVUeXBlLCAodGhpcy5oaXRDb3VudHMuZ2V0KGNhY2hlVHlwZSkgfHwgMCkgKyAxKTtcbiAgICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgICB9XG4gICAgICAgIHRoaXMubWlzc0NvdW50cy5zZXQoY2FjaGVUeXBlLCAodGhpcy5taXNzQ291bnRzLmdldChjYWNoZVR5cGUpIHx8IDApICsgMSk7XG4gICAgICAgIHJldHVybiB2b2lkIDA7XG4gICAgICB9XG4gICAgICAvKipcbiAgICAgICAqIFN0b3JlcyBkYXRhIGluIGNhY2hlLlxuICAgICAgICogQHBhcmFtIGNhY2hlVHlwZSBUeXBlIG9mIGNhY2hlLlxuICAgICAgICogQHBhcmFtIGtleSBDYWNoZSBrZXkuXG4gICAgICAgKiBAcGFyYW0gZGF0YSBEYXRhIHRvIGNhY2hlLlxuICAgICAgICogQHBhcmFtIF9rZXlcbiAgICAgICAqIEBwYXJhbSBfZGF0YVxuICAgICAgICovXG4gICAgICBzZXQoY2FjaGVUeXBlLCBfa2V5LCBfZGF0YSkge1xuICAgICAgICBjb25zdCBjYWNoZSA9IHRoaXMuY2FjaGVzLmdldChjYWNoZVR5cGUpO1xuICAgICAgICBpZiAoIWNhY2hlKSB7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGNhY2hlLnNldChfa2V5LCBfZGF0YSk7XG4gICAgICB9XG4gICAgICAvKipcbiAgICAgICAqIEludmFsaWRhdGVzIGNhY2hlIGVudHJpZXMgYnkgcGF0dGVybi5cbiAgICAgICAqIEBwYXJhbSBjYWNoZVR5cGUgVHlwZSBvZiBjYWNoZS5cbiAgICAgICAqIEBwYXJhbSBwYXR0ZXJuIEtleSBwYXR0ZXJuIHRvIGludmFsaWRhdGUgKHN1cHBvcnRzIHdpbGRjYXJkcykuXG4gICAgICAgKi9cbiAgICAgIGludmFsaWRhdGUoY2FjaGVUeXBlLCBwYXR0ZXJuKSB7XG4gICAgICAgIGNvbnN0IGNhY2hlID0gdGhpcy5jYWNoZXMuZ2V0KGNhY2hlVHlwZSk7XG4gICAgICAgIGlmICghY2FjaGUpIHtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHBhdHRlcm4pIHtcbiAgICAgICAgICBmb3IgKGNvbnN0IGtleSBvZiBjYWNoZS5rZXlzKCkpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLm1hdGNoZXNQYXR0ZXJuKGtleSwgcGF0dGVybikpIHtcbiAgICAgICAgICAgICAgY2FjaGUuZGVsZXRlKGtleSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGNhY2hlLmNsZWFyKCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIC8qKlxuICAgICAgICogR2V0cyBjYWNoZSBwZXJmb3JtYW5jZSBzdGF0aXN0aWNzLlxuICAgICAgICovXG4gICAgICBnZXRTdGF0cygpIHtcbiAgICAgICAgY29uc3Qgc3RhdHMgPSB7fTtcbiAgICAgICAgZm9yIChjb25zdCBbX3R5cGUsIGNhY2hlXSBvZiB0aGlzLmNhY2hlcykge1xuICAgICAgICAgIGNvbnN0IGhpdHMgPSB0aGlzLmhpdENvdW50cy5nZXQoX3R5cGUpIHx8IDA7XG4gICAgICAgICAgY29uc3QgbWlzc2VzID0gdGhpcy5taXNzQ291bnRzLmdldChfdHlwZSkgfHwgMDtcbiAgICAgICAgICBjb25zdCB0b3RhbCA9IGhpdHMgKyBtaXNzZXM7XG4gICAgICAgICAgY29uc3QgaGl0UmF0ZSA9IHRvdGFsID4gMCA/IChoaXRzIC8gdG90YWwgKiAxMDApLnRvRml4ZWQoMikgOiBcIjAuMDBcIjtcbiAgICAgICAgICBzdGF0c1tfdHlwZV0gPSB7XG4gICAgICAgICAgICBzaXplOiBjYWNoZS5zaXplLFxuICAgICAgICAgICAgbWF4U2l6ZTogY2FjaGUubWF4LFxuICAgICAgICAgICAgaGl0cyxcbiAgICAgICAgICAgIG1pc3NlcyxcbiAgICAgICAgICAgIGhpdFJhdGU6IGAke2hpdFJhdGV9JWAsXG4gICAgICAgICAgICBtZW1vcnlVc2FnZTogdGhpcy5lc3RpbWF0ZU1lbW9yeVVzYWdlKGNhY2hlKVxuICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHN0YXRzO1xuICAgICAgfVxuICAgICAgLyoqXG4gICAgICAgKiBDbGVhcnMgYWxsIGNhY2hlcy5cbiAgICAgICAqL1xuICAgICAgY2xlYXJBbGwoKSB7XG4gICAgICAgIGZvciAoY29uc3QgW190eXBlLCBjYWNoZV0gb2YgdGhpcy5jYWNoZXMpIHtcbiAgICAgICAgICBjYWNoZS5jbGVhcigpO1xuICAgICAgICAgIHRoaXMuaGl0Q291bnRzLnNldChfdHlwZSwgMCk7XG4gICAgICAgICAgdGhpcy5taXNzQ291bnRzLnNldChfdHlwZSwgMCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIC8qKlxuICAgICAgICogUGF0dGVybiBtYXRjaGluZyBmb3IgY2FjaGUga2V5IGludmFsaWRhdGlvbi5cbiAgICAgICAqIEBwYXJhbSBrZXlcbiAgICAgICAqIEBwYXJhbSBfa2V5XG4gICAgICAgKiBAcGFyYW0gcGF0dGVyblxuICAgICAgICovXG4gICAgICBtYXRjaGVzUGF0dGVybihfa2V5LCBwYXR0ZXJuKSB7XG4gICAgICAgIGNvbnN0IHJlZ2V4ID0gbmV3IFJlZ0V4cChwYXR0ZXJuLnJlcGxhY2UoL1xcKi9nLCBcIi4qXCIpKTtcbiAgICAgICAgcmV0dXJuIHJlZ2V4LnRlc3QoX2tleSk7XG4gICAgICB9XG4gICAgICAvKipcbiAgICAgICAqIEVzdGltYXRlcyBtZW1vcnkgdXNhZ2Ugb2YgYSBjYWNoZS5cbiAgICAgICAqIEBwYXJhbSBjYWNoZVxuICAgICAgICovXG4gICAgICBlc3RpbWF0ZU1lbW9yeVVzYWdlKGNhY2hlKSB7XG4gICAgICAgIGxldCB0b3RhbFNpemUgPSAwO1xuICAgICAgICBmb3IgKGNvbnN0IHZhbHVlIG9mIGNhY2hlLnZhbHVlcygpKSB7XG4gICAgICAgICAgdG90YWxTaXplICs9IEpTT04uc3RyaW5naWZ5KHZhbHVlKS5sZW5ndGggKiAyO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBgJHsodG90YWxTaXplIC8gMTAyNCkudG9GaXhlZCgyKX0gS0JgO1xuICAgICAgfVxuICAgIH07XG4gICAgcXVlcnlDYWNoZSA9IG5ldyBRdWVyeUNhY2hlTWFuYWdlcigpO1xuICAgIENhY2hlSW52YWxpZGF0b3IgPSBjbGFzcyB7XG4gICAgICAvKipcbiAgICAgICAqIEludmFsaWRhdGVzIHVzZXItcmVsYXRlZCBjYWNoZXMgd2hlbiB1c2VyIGRhdGEgY2hhbmdlcy5cbiAgICAgICAqIEBwYXJhbSB1c2VySWRcbiAgICAgICAqL1xuICAgICAgc3RhdGljIGludmFsaWRhdGVVc2VyQ2FjaGVzKHVzZXJJZCkge1xuICAgICAgICBxdWVyeUNhY2hlLmludmFsaWRhdGUoXCJ1c2Vyc1wiLCBgdXNlcjoke3VzZXJJZH0qYCk7XG4gICAgICAgIHF1ZXJ5Q2FjaGUuaW52YWxpZGF0ZShcInJlc2lkZW5jZXNcIiwgYHVzZXJfcmVzaWRlbmNlczoke3VzZXJJZH0qYCk7XG4gICAgICAgIHF1ZXJ5Q2FjaGUuaW52YWxpZGF0ZShcIm5vdGlmaWNhdGlvbnNcIiwgYHVzZXJfbm90aWZpY2F0aW9uczoke3VzZXJJZH0qYCk7XG4gICAgICB9XG4gICAgICAvKipcbiAgICAgICAqIEludmFsaWRhdGVzIGJ1aWxkaW5nLXJlbGF0ZWQgY2FjaGVzIHdoZW4gYnVpbGRpbmcgZGF0YSBjaGFuZ2VzLlxuICAgICAgICogQHBhcmFtIGJ1aWxkaW5nSWRcbiAgICAgICAqL1xuICAgICAgc3RhdGljIGludmFsaWRhdGVCdWlsZGluZ0NhY2hlcyhidWlsZGluZ0lkKSB7XG4gICAgICAgIHF1ZXJ5Q2FjaGUuaW52YWxpZGF0ZShcImJ1aWxkaW5nc1wiLCBgYnVpbGRpbmc6JHtidWlsZGluZ0lkfSpgKTtcbiAgICAgICAgcXVlcnlDYWNoZS5pbnZhbGlkYXRlKFwicmVzaWRlbmNlc1wiLCBgYnVpbGRpbmdfcmVzaWRlbmNlczoke2J1aWxkaW5nSWR9KmApO1xuICAgICAgICBxdWVyeUNhY2hlLmludmFsaWRhdGUoXCJidWRnZXRzXCIsIGBidWlsZGluZ19idWRnZXRzOiR7YnVpbGRpbmdJZH0qYCk7XG4gICAgICB9XG4gICAgICAvKipcbiAgICAgICAqIEludmFsaWRhdGVzIHJlc2lkZW5jZS1yZWxhdGVkIGNhY2hlcyB3aGVuIHJlc2lkZW5jZSBkYXRhIGNoYW5nZXMuXG4gICAgICAgKiBAcGFyYW0gcmVzaWRlbmNlSWRcbiAgICAgICAqL1xuICAgICAgc3RhdGljIGludmFsaWRhdGVSZXNpZGVuY2VDYWNoZXMocmVzaWRlbmNlSWQpIHtcbiAgICAgICAgcXVlcnlDYWNoZS5pbnZhbGlkYXRlKFwicmVzaWRlbmNlc1wiLCBgcmVzaWRlbmNlOiR7cmVzaWRlbmNlSWR9KmApO1xuICAgICAgICBxdWVyeUNhY2hlLmludmFsaWRhdGUoXCJiaWxsc1wiLCBgcmVzaWRlbmNlX2JpbGxzOiR7cmVzaWRlbmNlSWR9KmApO1xuICAgICAgICBxdWVyeUNhY2hlLmludmFsaWRhdGUoXCJtYWludGVuYW5jZVwiLCBgcmVzaWRlbmNlX21haW50ZW5hbmNlOiR7cmVzaWRlbmNlSWR9KmApO1xuICAgICAgfVxuICAgICAgLyoqXG4gICAgICAgKiBJbnZhbGlkYXRlcyBhbGwgY2FjaGVzICh1c2Ugc3BhcmluZ2x5KS5cbiAgICAgICAqL1xuICAgICAgc3RhdGljIGludmFsaWRhdGVBbGwoKSB7XG4gICAgICAgIHF1ZXJ5Q2FjaGUuY2xlYXJBbGwoKTtcbiAgICAgIH1cbiAgICB9O1xuICB9XG59KTtcblxuLy8gc2VydmVyL3BlcmZvcm1hbmNlLW1vbml0b3JpbmcudHNcbmltcG9ydCB7IHBlcmZvcm1hbmNlIH0gZnJvbSBcInBlcmZfaG9va3NcIjtcbnZhciBEYXRhYmFzZVBlcmZvcm1hbmNlTW9uaXRvciwgZGJQZXJmb3JtYW5jZU1vbml0b3I7XG52YXIgaW5pdF9wZXJmb3JtYW5jZV9tb25pdG9yaW5nID0gX19lc20oe1xuICBcInNlcnZlci9wZXJmb3JtYW5jZS1tb25pdG9yaW5nLnRzXCIoKSB7XG4gICAgRGF0YWJhc2VQZXJmb3JtYW5jZU1vbml0b3IgPSBjbGFzcyB7XG4gICAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgdGhpcy5xdWVyeVRpbWVzID0gW107XG4gICAgICAgIHRoaXMuc2xvd1F1ZXJpZXMgPSBbXTtcbiAgICAgICAgdGhpcy5TTE9XX1FVRVJZX1RIUkVTSE9MRCA9IDEwMDtcbiAgICAgIH1cbiAgICAgIC8vIG1zXG4gICAgICAvKipcbiAgICAgICAqIFRyYWNrcyBleGVjdXRpb24gdGltZSBvZiBhIGRhdGFiYXNlIG9wZXJhdGlvbi5cbiAgICAgICAqIEBwYXJhbSBxdWVyeU5hbWVcbiAgICAgICAqIEBwYXJhbSBvcGVyYXRpb25cbiAgICAgICAqL1xuICAgICAgdHJhY2tRdWVyeShxdWVyeU5hbWUsIG9wZXJhdGlvbikge1xuICAgICAgICBjb25zdCBzdGFydFRpbWUgPSBwZXJmb3JtYW5jZS5ub3coKTtcbiAgICAgICAgcmV0dXJuIG9wZXJhdGlvbigpLnRoZW4oKHJlc3VsdCkgPT4ge1xuICAgICAgICAgIGNvbnN0IGR1cmF0aW9uID0gcGVyZm9ybWFuY2Uubm93KCkgLSBzdGFydFRpbWU7XG4gICAgICAgICAgdGhpcy5yZWNvcmRRdWVyeVRpbWUocXVlcnlOYW1lLCBkdXJhdGlvbik7XG4gICAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICAgICAgfSkuY2F0Y2goKGVycm9yKSA9PiB7XG4gICAgICAgICAgY29uc3QgZHVyYXRpb24gPSBwZXJmb3JtYW5jZS5ub3coKSAtIHN0YXJ0VGltZTtcbiAgICAgICAgICB0aGlzLnJlY29yZFF1ZXJ5VGltZShxdWVyeU5hbWUsIGR1cmF0aW9uKTtcbiAgICAgICAgICB0aHJvdyBlcnJvcjtcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgICAvKipcbiAgICAgICAqIFJlY29yZHMgcXVlcnkgZXhlY3V0aW9uIHRpbWUuXG4gICAgICAgKiBAcGFyYW0gcXVlcnlOYW1lXG4gICAgICAgKiBAcGFyYW0gZHVyYXRpb25cbiAgICAgICAqL1xuICAgICAgcmVjb3JkUXVlcnlUaW1lKHF1ZXJ5TmFtZSwgZHVyYXRpb24pIHtcbiAgICAgICAgdGhpcy5xdWVyeVRpbWVzLnB1c2goZHVyYXRpb24pO1xuICAgICAgICBpZiAodGhpcy5xdWVyeVRpbWVzLmxlbmd0aCA+IDFlMykge1xuICAgICAgICAgIHRoaXMucXVlcnlUaW1lcy5zaGlmdCgpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChkdXJhdGlvbiA+IHRoaXMuU0xPV19RVUVSWV9USFJFU0hPTEQpIHtcbiAgICAgICAgICB0aGlzLnNsb3dRdWVyaWVzLnB1c2goe1xuICAgICAgICAgICAgcXVlcnk6IHF1ZXJ5TmFtZSxcbiAgICAgICAgICAgIGR1cmF0aW9uLFxuICAgICAgICAgICAgdGltZXN0YW1wOiAvKiBAX19QVVJFX18gKi8gbmV3IERhdGUoKVxuICAgICAgICAgIH0pO1xuICAgICAgICAgIGlmICh0aGlzLnNsb3dRdWVyaWVzLmxlbmd0aCA+IDEwMCkge1xuICAgICAgICAgICAgdGhpcy5zbG93UXVlcmllcy5zaGlmdCgpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgLyoqXG4gICAgICAgKiBHZXRzIGF2ZXJhZ2UgcXVlcnkgdGltZS5cbiAgICAgICAqL1xuICAgICAgZ2V0QXZlcmFnZVF1ZXJ5VGltZSgpIHtcbiAgICAgICAgaWYgKHRoaXMucXVlcnlUaW1lcy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICByZXR1cm4gMDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcy5xdWVyeVRpbWVzLnJlZHVjZSgoYSwgYikgPT4gYSArIGIsIDApIC8gdGhpcy5xdWVyeVRpbWVzLmxlbmd0aDtcbiAgICAgIH1cbiAgICAgIC8qKlxuICAgICAgICogR2V0cyBwZXJmb3JtYW5jZSBzdGF0aXN0aWNzLlxuICAgICAgICovXG4gICAgICBnZXRQZXJmb3JtYW5jZVN0YXRzKCkge1xuICAgICAgICBjb25zdCBhdmcgPSB0aGlzLmdldEF2ZXJhZ2VRdWVyeVRpbWUoKTtcbiAgICAgICAgY29uc3QgbWF4ID0gTWF0aC5tYXgoLi4udGhpcy5xdWVyeVRpbWVzKTtcbiAgICAgICAgY29uc3QgbWluID0gTWF0aC5taW4oLi4udGhpcy5xdWVyeVRpbWVzKTtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICBhdmVyYWdlUXVlcnlUaW1lOiBgJHthdmcudG9GaXhlZCgyKX1tc2AsXG4gICAgICAgICAgbWF4UXVlcnlUaW1lOiBgJHttYXgudG9GaXhlZCgyKX1tc2AsXG4gICAgICAgICAgbWluUXVlcnlUaW1lOiBgJHttaW4udG9GaXhlZCgyKX1tc2AsXG4gICAgICAgICAgdG90YWxRdWVyaWVzOiB0aGlzLnF1ZXJ5VGltZXMubGVuZ3RoLFxuICAgICAgICAgIHNsb3dRdWVyaWVzOiB0aGlzLnNsb3dRdWVyaWVzLmxlbmd0aCxcbiAgICAgICAgICByZWNlbnRTbG93UXVlcmllczogdGhpcy5zbG93UXVlcmllcy5zbGljZSgtMTApXG4gICAgICAgIH07XG4gICAgICB9XG4gICAgICAvKipcbiAgICAgICAqIFByb3ZpZGVzIG9wdGltaXphdGlvbiByZWNvbW1lbmRhdGlvbnMuXG4gICAgICAgKi9cbiAgICAgIGdldE9wdGltaXphdGlvblJlY29tbWVuZGF0aW9ucygpIHtcbiAgICAgICAgY29uc3QgYXZnID0gdGhpcy5nZXRBdmVyYWdlUXVlcnlUaW1lKCk7XG4gICAgICAgIGNvbnN0IHJlY29tbWVuZGF0aW9ucyA9IFtdO1xuICAgICAgICBpZiAoYXZnID4gMTAwKSB7XG4gICAgICAgICAgcmVjb21tZW5kYXRpb25zLnB1c2goXCJBdmVyYWdlIHF1ZXJ5IHRpbWUgZXhjZWVkcyAxMDBtcy4gQ29uc2lkZXIgYWRkaW5nIGRhdGFiYXNlIGluZGV4ZXMuXCIpO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLnNsb3dRdWVyaWVzLmxlbmd0aCA+IDEwKSB7XG4gICAgICAgICAgcmVjb21tZW5kYXRpb25zLnB1c2goXCJNdWx0aXBsZSBzbG93IHF1ZXJpZXMgZGV0ZWN0ZWQuIFJldmlldyBhbmQgb3B0aW1pemUgZnJlcXVlbnQgcXVlcmllcy5cIik7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgY29tbW9uU2xvd1F1ZXJpZXMgPSB0aGlzLmdldENvbW1vblNsb3dRdWVyaWVzKCk7XG4gICAgICAgIGlmIChjb21tb25TbG93UXVlcmllcy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgcmVjb21tZW5kYXRpb25zLnB1c2goYENvbW1vbiBzbG93IHF1ZXJpZXM6ICR7Y29tbW9uU2xvd1F1ZXJpZXMuam9pbihcIiwgXCIpfWApO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiByZWNvbW1lbmRhdGlvbnM7XG4gICAgICB9XG4gICAgICAvKipcbiAgICAgICAqIElkZW50aWZpZXMgY29tbW9ubHkgc2xvdyBxdWVyaWVzLlxuICAgICAgICovXG4gICAgICBnZXRDb21tb25TbG93UXVlcmllcygpIHtcbiAgICAgICAgY29uc3QgcXVlcnlGcmVxdWVuY3kgPSB7fTtcbiAgICAgICAgdGhpcy5zbG93UXVlcmllcy5mb3JFYWNoKCh7IHF1ZXJ5IH0pID0+IHtcbiAgICAgICAgICBxdWVyeUZyZXF1ZW5jeVtxdWVyeV0gPSAocXVlcnlGcmVxdWVuY3lbcXVlcnldIHx8IDApICsgMTtcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiBPYmplY3QuZW50cmllcyhxdWVyeUZyZXF1ZW5jeSkuZmlsdGVyKChbLCBjb3VudDRdKSA9PiBjb3VudDQgPiAyKS5tYXAoKFtxdWVyeV0pID0+IHF1ZXJ5KTtcbiAgICAgIH1cbiAgICAgIC8qKlxuICAgICAgICogUmVzZXRzIHBlcmZvcm1hbmNlIHRyYWNraW5nIGRhdGEuXG4gICAgICAgKi9cbiAgICAgIHJlc2V0KCkge1xuICAgICAgICB0aGlzLnF1ZXJ5VGltZXMgPSBbXTtcbiAgICAgICAgdGhpcy5zbG93UXVlcmllcyA9IFtdO1xuICAgICAgfVxuICAgIH07XG4gICAgZGJQZXJmb3JtYW5jZU1vbml0b3IgPSBuZXcgRGF0YWJhc2VQZXJmb3JtYW5jZU1vbml0b3IoKTtcbiAgfVxufSk7XG5cbi8vIHNlcnZlci9vcHRpbWl6ZWQtZGItc3RvcmFnZS50c1xuaW1wb3J0IHsgZXEsIGRlc2MsIGFuZCwgb3IsIGx0ZSwgY291bnQsIGxpa2UsIGluQXJyYXkgfSBmcm9tIFwiZHJpenpsZS1vcm1cIjtcbmltcG9ydCBjcnlwdG8gZnJvbSBcImNyeXB0b1wiO1xuaW1wb3J0IHsgZXhpc3RzLCBzcWwgYXMgc3FsT3AgfSBmcm9tIFwiZHJpenpsZS1vcm1cIjtcbnZhciBPcHRpbWl6ZWREYXRhYmFzZVN0b3JhZ2U7XG52YXIgaW5pdF9vcHRpbWl6ZWRfZGJfc3RvcmFnZSA9IF9fZXNtKHtcbiAgXCJzZXJ2ZXIvb3B0aW1pemVkLWRiLXN0b3JhZ2UudHNcIigpIHtcbiAgICBpbml0X2RiKCk7XG4gICAgaW5pdF9zY2hlbWEoKTtcbiAgICBpbml0X2RhdGFiYXNlX29wdGltaXphdGlvbigpO1xuICAgIGluaXRfcXVlcnlfY2FjaGUoKTtcbiAgICBpbml0X3BlcmZvcm1hbmNlX21vbml0b3JpbmcoKTtcbiAgICBPcHRpbWl6ZWREYXRhYmFzZVN0b3JhZ2UgPSBjbGFzcyB7XG4gICAgICAvKipcbiAgICAgICAqXG4gICAgICAgKi9cbiAgICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICBpZiAocHJvY2Vzcy5lbnYuVEVTVF9FTlYgIT09IFwiaW50ZWdyYXRpb25cIiAmJiAhcHJvY2Vzcy5lbnYuRElTQUJMRV9EQl9PUFRJTUlaQVRJT05TICYmIHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInRlc3RcIiAmJiAhcHJvY2Vzcy5lbnYuSkVTVF9XT1JLRVJfSUQpIHtcbiAgICAgICAgICB0aGlzLmluaXRpYWxpemVPcHRpbWl6YXRpb25zKCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIC8qKlxuICAgICAgICogSW5pdGlhbGl6ZXMgZGF0YWJhc2Ugb3B0aW1pemF0aW9ucy5cbiAgICAgICAqL1xuICAgICAgYXN5bmMgaW5pdGlhbGl6ZU9wdGltaXphdGlvbnMoKSB7XG4gICAgICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViA9PT0gXCJ0ZXN0XCIgfHwgcHJvY2Vzcy5lbnYuSkVTVF9XT1JLRVJfSUQgfHwgcHJvY2Vzcy5lbnYuU0tJUF9EQl9PUFRJTUlaQVRJT04pIHtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICBhd2FpdCBRdWVyeU9wdGltaXplci5hcHBseUNvcmVPcHRpbWl6YXRpb25zKCk7XG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgY29uc29sZS5lcnJvcihcIlxcdTI3NEMgRXJyb3IgaW5pdGlhbGl6aW5nIGRhdGFiYXNlIG9wdGltaXphdGlvbnM6XCIsIGVycm9yKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgLyoqXG4gICAgICAgKiBXcmFwcGVyIGZvciBwZXJmb3JtYW5jZSB0cmFja2luZyBhbmQgY2FjaGluZy5cbiAgICAgICAqIEBwYXJhbSBvcGVyYXRpb25cbiAgICAgICAqIEBwYXJhbSBjYWNoZUtleVxuICAgICAgICogQHBhcmFtIGNhY2hlVHlwZVxuICAgICAgICogQHBhcmFtIGZuXG4gICAgICAgKi9cbiAgICAgIGFzeW5jIHdpdGhPcHRpbWl6YXRpb25zKG9wZXJhdGlvbiwgY2FjaGVLZXksIGNhY2hlVHlwZSwgZm4pIHtcbiAgICAgICAgaWYgKGNhY2hlS2V5KSB7XG4gICAgICAgICAgY29uc3QgY2FjaGVkID0gcXVlcnlDYWNoZS5nZXQoY2FjaGVUeXBlLCBjYWNoZUtleSk7XG4gICAgICAgICAgaWYgKGNhY2hlZCAhPT0gdm9pZCAwKSB7XG4gICAgICAgICAgICByZXR1cm4gY2FjaGVkO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBkYlBlcmZvcm1hbmNlTW9uaXRvci50cmFja1F1ZXJ5KG9wZXJhdGlvbiwgZm4pO1xuICAgICAgICBpZiAoY2FjaGVLZXkgJiYgcmVzdWx0ICE9PSB2b2lkIDApIHtcbiAgICAgICAgICBxdWVyeUNhY2hlLnNldChjYWNoZVR5cGUsIGNhY2hlS2V5LCByZXN1bHQpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICB9XG4gICAgICAvLyBVc2VyIG9wZXJhdGlvbnMgd2l0aCBvcHRpbWl6YXRpb25cbiAgICAgIC8qKlxuICAgICAgICogUmV0cmlldmVzIGFsbCBhY3RpdmUgdXNlcnMgd2l0aCBjYWNoaW5nIGFuZCBwZXJmb3JtYW5jZSB0cmFja2luZy5cbiAgICAgICAqL1xuICAgICAgYXN5bmMgZ2V0VXNlcnMoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLndpdGhPcHRpbWl6YXRpb25zKFxuICAgICAgICAgIFwiZ2V0VXNlcnNcIixcbiAgICAgICAgICBcImFsbF91c2Vyc1wiLFxuICAgICAgICAgIFwidXNlcnNcIixcbiAgICAgICAgICAoKSA9PiBkYi5zZWxlY3QoKS5mcm9tKHVzZXJzKS53aGVyZShlcSh1c2Vycy5pc0FjdGl2ZSwgdHJ1ZSkpLmxpbWl0KDEwMCkub3JkZXJCeShkZXNjKHVzZXJzLmNyZWF0ZWRBdCkpXG4gICAgICAgICk7XG4gICAgICB9XG4gICAgICAvKipcbiAgICAgICAqIFJldHJpZXZlcyBhbGwgYWN0aXZlIHVzZXJzIHdpdGggdGhlaXIgYXNzaWdubWVudHMgKG9yZ2FuaXphdGlvbnMsIGJ1aWxkaW5ncywgcmVzaWRlbmNlcykuXG4gICAgICAgKi9cbiAgICAgIGFzeW5jIGdldFVzZXJzV2l0aEFzc2lnbm1lbnRzKCkge1xuICAgICAgICBxdWVyeUNhY2hlLmludmFsaWRhdGUoXCJ1c2Vyc1wiLCBcImFsbF91c2Vyc19hc3NpZ25tZW50c192MlwiKTtcbiAgICAgICAgcXVlcnlDYWNoZS5pbnZhbGlkYXRlKFwidXNlcnNcIiwgXCJhbGxfdXNlcnNfYXNzaWdubWVudHNfdjNcIik7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgY29uc3QgdXNlcnM1ID0gYXdhaXQgZGIuc2VsZWN0KCkuZnJvbSh1c2Vycykud2hlcmUoZXEodXNlcnMuaXNBY3RpdmUsIHRydWUpKS5saW1pdCgxMDApLm9yZGVyQnkoZGVzYyh1c2Vycy5jcmVhdGVkQXQpKTtcbiAgICAgICAgICBjb25zdCBiYXRjaFNpemUgPSA1O1xuICAgICAgICAgIGNvbnN0IHVzZXJzV2l0aEFzc2lnbm1lbnRzID0gW107XG4gICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB1c2VyczUubGVuZ3RoOyBpICs9IGJhdGNoU2l6ZSkge1xuICAgICAgICAgICAgY29uc3QgYmF0Y2ggPSB1c2VyczUuc2xpY2UoaSwgaSArIGJhdGNoU2l6ZSk7XG4gICAgICAgICAgICBjb25zdCBiYXRjaFJlc3VsdHMgPSBhd2FpdCBQcm9taXNlLmFsbChcbiAgICAgICAgICAgICAgYmF0Y2gubWFwKGFzeW5jICh1c2VyKSA9PiB7XG4gICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgIGNvbnN0IHVzZXJPcmdzID0gYXdhaXQgZGIuc2VsZWN0KHtcbiAgICAgICAgICAgICAgICAgICAgaWQ6IG9yZ2FuaXphdGlvbnMuaWQsXG4gICAgICAgICAgICAgICAgICAgIG5hbWU6IG9yZ2FuaXphdGlvbnMubmFtZSxcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogb3JnYW5pemF0aW9ucy50eXBlXG4gICAgICAgICAgICAgICAgICB9KS5mcm9tKHVzZXJPcmdhbml6YXRpb25zKS5pbm5lckpvaW4ob3JnYW5pemF0aW9ucywgZXEodXNlck9yZ2FuaXphdGlvbnMub3JnYW5pemF0aW9uSWQsIG9yZ2FuaXphdGlvbnMuaWQpKS53aGVyZShcbiAgICAgICAgICAgICAgICAgICAgYW5kKFxuICAgICAgICAgICAgICAgICAgICAgIGVxKHVzZXJPcmdhbml6YXRpb25zLnVzZXJJZCwgdXNlci5pZCksXG4gICAgICAgICAgICAgICAgICAgICAgZXEodXNlck9yZ2FuaXphdGlvbnMuaXNBY3RpdmUsIHRydWUpLFxuICAgICAgICAgICAgICAgICAgICAgIGVxKG9yZ2FuaXphdGlvbnMuaXNBY3RpdmUsIHRydWUpXG4gICAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgICBjb25zdCB1c2VyQnVpbGRpbmdzID0gYXdhaXQgZGIuc2VsZWN0KHtcbiAgICAgICAgICAgICAgICAgICAgaWQ6IGJ1aWxkaW5ncy5pZCxcbiAgICAgICAgICAgICAgICAgICAgbmFtZTogYnVpbGRpbmdzLm5hbWVcbiAgICAgICAgICAgICAgICAgIH0pLmZyb20odXNlck9yZ2FuaXphdGlvbnMpLmlubmVySm9pbihidWlsZGluZ3MsIGVxKHVzZXJPcmdhbml6YXRpb25zLm9yZ2FuaXphdGlvbklkLCBidWlsZGluZ3Mub3JnYW5pemF0aW9uSWQpKS53aGVyZShcbiAgICAgICAgICAgICAgICAgICAgYW5kKFxuICAgICAgICAgICAgICAgICAgICAgIGVxKHVzZXJPcmdhbml6YXRpb25zLnVzZXJJZCwgdXNlci5pZCksXG4gICAgICAgICAgICAgICAgICAgICAgZXEodXNlck9yZ2FuaXphdGlvbnMuaXNBY3RpdmUsIHRydWUpLFxuICAgICAgICAgICAgICAgICAgICAgIGVxKGJ1aWxkaW5ncy5pc0FjdGl2ZSwgdHJ1ZSlcbiAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICAgIGNvbnN0IHVzZXJSZXNpZGVuY2VzNCA9IGF3YWl0IGRiLnNlbGVjdCh7XG4gICAgICAgICAgICAgICAgICAgIGlkOiByZXNpZGVuY2VzLmlkLFxuICAgICAgICAgICAgICAgICAgICB1bml0TnVtYmVyOiByZXNpZGVuY2VzLnVuaXROdW1iZXIsXG4gICAgICAgICAgICAgICAgICAgIGJ1aWxkaW5nSWQ6IHJlc2lkZW5jZXMuYnVpbGRpbmdJZCxcbiAgICAgICAgICAgICAgICAgICAgYnVpbGRpbmdOYW1lOiBidWlsZGluZ3MubmFtZVxuICAgICAgICAgICAgICAgICAgfSkuZnJvbSh1c2VyUmVzaWRlbmNlcykuaW5uZXJKb2luKHJlc2lkZW5jZXMsIGVxKHVzZXJSZXNpZGVuY2VzLnJlc2lkZW5jZUlkLCByZXNpZGVuY2VzLmlkKSkuaW5uZXJKb2luKGJ1aWxkaW5ncywgZXEocmVzaWRlbmNlcy5idWlsZGluZ0lkLCBidWlsZGluZ3MuaWQpKS53aGVyZShcbiAgICAgICAgICAgICAgICAgICAgYW5kKFxuICAgICAgICAgICAgICAgICAgICAgIGVxKHVzZXJSZXNpZGVuY2VzLnVzZXJJZCwgdXNlci5pZCksXG4gICAgICAgICAgICAgICAgICAgICAgZXEodXNlclJlc2lkZW5jZXMuaXNBY3RpdmUsIHRydWUpLFxuICAgICAgICAgICAgICAgICAgICAgIGVxKHJlc2lkZW5jZXMuaXNBY3RpdmUsIHRydWUpXG4gICAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgICBjb25zdCByZXN1bHQgPSB7XG4gICAgICAgICAgICAgICAgICAgIC4uLnVzZXIsXG4gICAgICAgICAgICAgICAgICAgIG9yZ2FuaXphdGlvbnM6IHVzZXJPcmdzIHx8IFtdLFxuICAgICAgICAgICAgICAgICAgICBidWlsZGluZ3M6IHVzZXJCdWlsZGluZ3MgfHwgW10sXG4gICAgICAgICAgICAgICAgICAgIHJlc2lkZW5jZXM6IHVzZXJSZXNpZGVuY2VzNCB8fCBbXVxuICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICAgICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXCJcXHUyNzRDIEVycm9yIGdldHRpbmcgdXNlciBhc3NpZ25tZW50czpcIiwgZXJyb3IpO1xuICAgICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgLi4udXNlcixcbiAgICAgICAgICAgICAgICAgICAgb3JnYW5pemF0aW9uczogW10sXG4gICAgICAgICAgICAgICAgICAgIGJ1aWxkaW5nczogW10sXG4gICAgICAgICAgICAgICAgICAgIHJlc2lkZW5jZXM6IFtdXG4gICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgICB1c2Vyc1dpdGhBc3NpZ25tZW50cy5wdXNoKC4uLmJhdGNoUmVzdWx0cyk7XG4gICAgICAgICAgfVxuICAgICAgICAgIHJldHVybiB1c2Vyc1dpdGhBc3NpZ25tZW50cztcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICBjb25zb2xlLmVycm9yKFwiXFx1Mjc0QyBDcml0aWNhbCBlcnJvciBnZXR0aW5nIHVzZXJzIHdpdGggYXNzaWdubWVudHM6XCIsIGVycm9yKTtcbiAgICAgICAgICByZXR1cm4gW107XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIC8qKlxuICAgICAgICogUmV0cmlldmVzIHVzZXJzIGZyb20gb3JnYW5pemF0aW9ucyB0aGF0IGEgc3BlY2lmaWMgdXNlciBoYXMgYWNjZXNzIHRvLlxuICAgICAgICogQHBhcmFtIHVzZXJJZFxuICAgICAgICovXG4gICAgICBhc3luYyBnZXRVc2Vyc0J5T3JnYW5pemF0aW9ucyh1c2VySWQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMud2l0aE9wdGltaXphdGlvbnMoXG4gICAgICAgICAgXCJnZXRVc2Vyc0J5T3JnYW5pemF0aW9uc1wiLFxuICAgICAgICAgIGB1c2Vyc19ieV9vcmc6JHt1c2VySWR9YCxcbiAgICAgICAgICBcInVzZXJzXCIsXG4gICAgICAgICAgYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgdXNlck9yZ3MgPSBhd2FpdCBkYi5zZWxlY3QoeyBvcmdhbml6YXRpb25JZDogdXNlck9yZ2FuaXphdGlvbnMub3JnYW5pemF0aW9uSWQgfSkuZnJvbSh1c2VyT3JnYW5pemF0aW9ucykud2hlcmUoXG4gICAgICAgICAgICAgIGFuZChcbiAgICAgICAgICAgICAgICBlcSh1c2VyT3JnYW5pemF0aW9ucy51c2VySWQsIHVzZXJJZCksXG4gICAgICAgICAgICAgICAgZXEodXNlck9yZ2FuaXphdGlvbnMuaXNBY3RpdmUsIHRydWUpXG4gICAgICAgICAgICAgIClcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgICBpZiAodXNlck9yZ3MubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICAgIHJldHVybiBbXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IG9yZ2FuaXphdGlvbklkcyA9IHVzZXJPcmdzLm1hcCgob3JnKSA9PiBvcmcub3JnYW5pemF0aW9uSWQpO1xuICAgICAgICAgICAgcmV0dXJuIGRiLnNlbGVjdCh7XG4gICAgICAgICAgICAgIGlkOiB1c2Vycy5pZCxcbiAgICAgICAgICAgICAgdXNlcm5hbWU6IHVzZXJzLnVzZXJuYW1lLFxuICAgICAgICAgICAgICBwYXNzd29yZDogdXNlcnMucGFzc3dvcmQsXG4gICAgICAgICAgICAgIGVtYWlsOiB1c2Vycy5lbWFpbCxcbiAgICAgICAgICAgICAgZmlyc3ROYW1lOiB1c2Vycy5maXJzdE5hbWUsXG4gICAgICAgICAgICAgIGxhc3ROYW1lOiB1c2Vycy5sYXN0TmFtZSxcbiAgICAgICAgICAgICAgcGhvbmU6IHVzZXJzLnBob25lLFxuICAgICAgICAgICAgICBwcm9maWxlSW1hZ2U6IHVzZXJzLnByb2ZpbGVJbWFnZSxcbiAgICAgICAgICAgICAgbGFuZ3VhZ2U6IHVzZXJzLmxhbmd1YWdlLFxuICAgICAgICAgICAgICByb2xlOiB1c2Vycy5yb2xlLFxuICAgICAgICAgICAgICBpc0FjdGl2ZTogdXNlcnMuaXNBY3RpdmUsXG4gICAgICAgICAgICAgIGxhc3RMb2dpbkF0OiB1c2Vycy5sYXN0TG9naW5BdCxcbiAgICAgICAgICAgICAgY3JlYXRlZEF0OiB1c2Vycy5jcmVhdGVkQXQsXG4gICAgICAgICAgICAgIHVwZGF0ZWRBdDogdXNlcnMudXBkYXRlZEF0XG4gICAgICAgICAgICB9KS5mcm9tKHVzZXJzKS5pbm5lckpvaW4odXNlck9yZ2FuaXphdGlvbnMsIGVxKHVzZXJzLmlkLCB1c2VyT3JnYW5pemF0aW9ucy51c2VySWQpKS53aGVyZShcbiAgICAgICAgICAgICAgYW5kKFxuICAgICAgICAgICAgICAgIGVxKHVzZXJzLmlzQWN0aXZlLCB0cnVlKSxcbiAgICAgICAgICAgICAgICBlcSh1c2VyT3JnYW5pemF0aW9ucy5pc0FjdGl2ZSwgdHJ1ZSksXG4gICAgICAgICAgICAgICAgaW5BcnJheSh1c2VyT3JnYW5pemF0aW9ucy5vcmdhbml6YXRpb25JZCwgb3JnYW5pemF0aW9uSWRzKVxuICAgICAgICAgICAgICApXG4gICAgICAgICAgICApLm9yZGVyQnkodXNlcnMuZmlyc3ROYW1lLCB1c2Vycy5sYXN0TmFtZSk7XG4gICAgICAgICAgfVxuICAgICAgICApO1xuICAgICAgfVxuICAgICAgLyoqXG4gICAgICAgKiBHZXRzIHBhZ2luYXRlZCB1c2VycyB3aXRoIG9wdGltaXplZCBxdWVyeSBzdHJ1Y3R1cmUuXG4gICAgICAgKiBAcGFyYW0gb3B0aW9uc1xuICAgICAgICogQHBhcmFtIF9vcHRpb25zXG4gICAgICAgKi9cbiAgICAgIGFzeW5jIGdldFBhZ2luYXRlZFVzZXJzKF9vcHRpb25zKSB7XG4gICAgICAgIFBhZ2luYXRpb25IZWxwZXIudmFsaWRhdGVQYWdpbmF0aW9uKF9vcHRpb25zKTtcbiAgICAgICAgY29uc3QgY2FjaGVLZXkgPSBgcGFnaW5hdGVkX3VzZXJzOiR7X29wdGlvbnMucGFnZX06JHtfb3B0aW9ucy5wYWdlU2l6ZX06JHtfb3B0aW9ucy5zb3J0Qnl9OiR7X29wdGlvbnMuc29ydERpcmVjdGlvbn1gO1xuICAgICAgICBjb25zdCBjYWNoZWQgPSBxdWVyeUNhY2hlLmdldChcInVzZXJzXCIsIGNhY2hlS2V5KTtcbiAgICAgICAgaWYgKGNhY2hlZCkge1xuICAgICAgICAgIHJldHVybiBjYWNoZWQ7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgW3sgY291bnQ6IHRvdGFsIH1dID0gYXdhaXQgZGIuc2VsZWN0KHsgY291bnQ6IGNvdW50KCkgfSkuZnJvbSh1c2Vycykud2hlcmUoZXEodXNlcnMuaXNBY3RpdmUsIHRydWUpKTtcbiAgICAgICAgY29uc3QgdXNlcnM1ID0gYXdhaXQgZGIuc2VsZWN0KCkuZnJvbSh1c2Vycykud2hlcmUoZXEodXNlcnMuaXNBY3RpdmUsIHRydWUpKS5vcmRlckJ5KFxuICAgICAgICAgIF9vcHRpb25zLnNvcnREaXJlY3Rpb24gPT09IFwiREVTQ1wiID8gZGVzYyh1c2Vycy5jcmVhdGVkQXQpIDogdXNlcnMuY3JlYXRlZEF0XG4gICAgICAgICkubGltaXQoX29wdGlvbnMucGFnZVNpemUpLm9mZnNldCgoX29wdGlvbnMucGFnZSAtIDEpICogX29wdGlvbnMucGFnZVNpemUpO1xuICAgICAgICBjb25zdCByZXN1bHQgPSB7IHVzZXJzOiB1c2VyczUsIHRvdGFsIH07XG4gICAgICAgIHF1ZXJ5Q2FjaGUuc2V0KFwidXNlcnNcIiwgY2FjaGVLZXksIHJlc3VsdCk7XG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICB9XG4gICAgICAvKipcbiAgICAgICAqIEdldHMgYnVpbGRpbmdzIHdpdGggcmVzaWRlbnRzIHVzaW5nIEVYSVNUUyBpbnN0ZWFkIG9mIElOIHN1YnF1ZXJ5LlxuICAgICAgICogQHBhcmFtIG9yZ2FuaXphdGlvbklkXG4gICAgICAgKiBAcGFyYW0gbGltaXRcbiAgICAgICAqL1xuICAgICAgYXN5bmMgZ2V0QnVpbGRpbmdzV2l0aFJlc2lkZW50cyhvcmdhbml6YXRpb25JZCwgbGltaXQgPSA1MCkge1xuICAgICAgICBjb25zdCBjYWNoZUtleSA9IGBidWlsZGluZ3Nfd2l0aF9yZXNpZGVudHM6JHtvcmdhbml6YXRpb25JZH06JHtsaW1pdH1gO1xuICAgICAgICByZXR1cm4gdGhpcy53aXRoT3B0aW1pemF0aW9ucyhcbiAgICAgICAgICBcImdldEJ1aWxkaW5nc1dpdGhSZXNpZGVudHNcIixcbiAgICAgICAgICBjYWNoZUtleSxcbiAgICAgICAgICBcImJ1aWxkaW5nc1wiLFxuICAgICAgICAgICgpID0+IGRiLnNlbGVjdCgpLmZyb20oYnVpbGRpbmdzKS53aGVyZShcbiAgICAgICAgICAgIGFuZChcbiAgICAgICAgICAgICAgZXEoYnVpbGRpbmdzLm9yZ2FuaXphdGlvbklkLCBvcmdhbml6YXRpb25JZCksXG4gICAgICAgICAgICAgIGVxKGJ1aWxkaW5ncy5pc0FjdGl2ZSwgdHJ1ZSksXG4gICAgICAgICAgICAgIGV4aXN0cyhcbiAgICAgICAgICAgICAgICBkYi5zZWxlY3QoKS5mcm9tKHJlc2lkZW5jZXMpLndoZXJlKFxuICAgICAgICAgICAgICAgICAgYW5kKFxuICAgICAgICAgICAgICAgICAgICBlcShyZXNpZGVuY2VzLmJ1aWxkaW5nSWQsIGJ1aWxkaW5ncy5pZCksXG4gICAgICAgICAgICAgICAgICAgIGVxKHJlc2lkZW5jZXMuaXNBY3RpdmUsIHRydWUpXG4gICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICApXG4gICAgICAgICAgICApXG4gICAgICAgICAgKS5saW1pdChsaW1pdClcbiAgICAgICAgICAvLyBBbHdheXMgdXNlIExJTUlUIGZvciBsYXJnZSByZXN1bHQgc2V0c1xuICAgICAgICApO1xuICAgICAgfVxuICAgICAgLyoqXG4gICAgICAgKiBTZWFyY2hlcyB1c2VycyB3aXRoIG9wdGltaXplZCBjb3ZlcmluZyBpbmRleCBhbmQgTElNSVQuXG4gICAgICAgKiBAcGFyYW0gcXVlcnlcbiAgICAgICAqIEBwYXJhbSBsaW1pdFxuICAgICAgICovXG4gICAgICBhc3luYyBzZWFyY2hVc2VycyhxdWVyeSwgbGltaXQgPSAyMCkge1xuICAgICAgICBjb25zdCBjYWNoZUtleSA9IGBzZWFyY2hfdXNlcnM6JHtxdWVyeX06JHtsaW1pdH1gO1xuICAgICAgICByZXR1cm4gdGhpcy53aXRoT3B0aW1pemF0aW9ucyhcbiAgICAgICAgICBcInNlYXJjaFVzZXJzXCIsXG4gICAgICAgICAgY2FjaGVLZXksXG4gICAgICAgICAgXCJ1c2Vyc1wiLFxuICAgICAgICAgICgpID0+IGRiLnNlbGVjdCgpLmZyb20odXNlcnMpLndoZXJlKFxuICAgICAgICAgICAgYW5kKFxuICAgICAgICAgICAgICBlcSh1c2Vycy5pc0FjdGl2ZSwgdHJ1ZSksXG4gICAgICAgICAgICAgIG9yKFxuICAgICAgICAgICAgICAgIGxpa2UodXNlcnMuZW1haWwsIGAlJHtxdWVyeX0lYCksXG4gICAgICAgICAgICAgICAgbGlrZSh1c2Vycy5maXJzdE5hbWUsIGAlJHtxdWVyeX0lYCksXG4gICAgICAgICAgICAgICAgbGlrZSh1c2Vycy5sYXN0TmFtZSwgYCUke3F1ZXJ5fSVgKVxuICAgICAgICAgICAgICApXG4gICAgICAgICAgICApXG4gICAgICAgICAgKS5saW1pdChsaW1pdCkub3JkZXJCeSh1c2Vycy5sYXN0TmFtZSwgdXNlcnMuZmlyc3ROYW1lKVxuICAgICAgICApO1xuICAgICAgfVxuICAgICAgLyoqXG4gICAgICAgKiBHZXRzIGZpbmFuY2lhbCBzdW1tYXJ5IHVzaW5nIG1hdGVyaWFsaXplZCB2aWV3IGZvciBjb21wbGV4IGFnZ3JlZ2F0aW9ucy5cbiAgICAgICAqIEBwYXJhbSBidWlsZGluZ0lkXG4gICAgICAgKi9cbiAgICAgIGFzeW5jIGdldEZpbmFuY2lhbFN1bW1hcnkoYnVpbGRpbmdJZCkge1xuICAgICAgICBjb25zdCBjYWNoZUtleSA9IGBmaW5hbmNpYWxfc3VtbWFyeToke2J1aWxkaW5nSWR9YDtcbiAgICAgICAgcmV0dXJuIHRoaXMud2l0aE9wdGltaXphdGlvbnMoXCJnZXRGaW5hbmNpYWxTdW1tYXJ5XCIsIGNhY2hlS2V5LCBcImZpbmFuY2lhbFwiLCBhc3luYyAoKSA9PiB7XG4gICAgICAgICAgY29uc3Qgc3VtbWFyeSA9IGF3YWl0IGRiLmV4ZWN1dGUoXG4gICAgICAgICAgICBzcWxPcGBTRUxFQ1QgKiBGUk9NIG12X2ZpbmFuY2lhbF9zdW1tYXJ5IFdIRVJFIGJ1aWxkaW5nX2lkID0gJHtidWlsZGluZ0lkfSBPUkRFUiBCWSBtb250aCBERVNDIExJTUlUIDEyYFxuICAgICAgICAgICk7XG4gICAgICAgICAgcmV0dXJuIHN1bW1hcnkucm93cztcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgICAvKipcbiAgICAgICAqIEdldHMgYnVpbGRpbmcgc3RhdGlzdGljcyB1c2luZyBtYXRlcmlhbGl6ZWQgdmlldy5cbiAgICAgICAqIEBwYXJhbSBidWlsZGluZ0lkXG4gICAgICAgKi9cbiAgICAgIGFzeW5jIGdldEJ1aWxkaW5nU3RhdHMoYnVpbGRpbmdJZCkge1xuICAgICAgICBjb25zdCBjYWNoZUtleSA9IGBidWlsZGluZ19zdGF0czoke2J1aWxkaW5nSWR9YDtcbiAgICAgICAgcmV0dXJuIHRoaXMud2l0aE9wdGltaXphdGlvbnMoXCJnZXRCdWlsZGluZ1N0YXRzXCIsIGNhY2hlS2V5LCBcImJ1aWxkaW5nc1wiLCBhc3luYyAoKSA9PiB7XG4gICAgICAgICAgY29uc3Qgc3RhdHMgPSBhd2FpdCBkYi5leGVjdXRlKFxuICAgICAgICAgICAgc3FsT3BgU0VMRUNUICogRlJPTSBtdl9idWlsZGluZ19zdGF0cyBXSEVSRSBidWlsZGluZ19pZCA9ICR7YnVpbGRpbmdJZH1gXG4gICAgICAgICAgKTtcbiAgICAgICAgICByZXR1cm4gc3RhdHMucm93c1swXTtcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgICAvKipcbiAgICAgICAqIFJldHJpZXZlcyBhIHNwZWNpZmljIHVzZXIgYnkgSUQgd2l0aCBjYWNoaW5nLlxuICAgICAgICogQHBhcmFtIGlkXG4gICAgICAgKi9cbiAgICAgIGFzeW5jIGdldFVzZXIoaWQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMud2l0aE9wdGltaXphdGlvbnMoXCJnZXRVc2VyXCIsIGB1c2VyOiR7aWR9YCwgXCJ1c2Vyc1wiLCBhc3luYyAoKSA9PiB7XG4gICAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgZGIuc2VsZWN0KCkuZnJvbSh1c2Vycykud2hlcmUoZXEodXNlcnMuaWQsIGlkKSk7XG4gICAgICAgICAgaWYgKHJlc3VsdC5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhgXFx1ezFGNTBEfSBTdG9yYWdlLmdldFVzZXI6IEZvdW5kIHVzZXI6YCwge1xuICAgICAgICAgICAgICBpZDogcmVzdWx0WzBdLmlkLFxuICAgICAgICAgICAgICBlbWFpbDogcmVzdWx0WzBdLmVtYWlsLFxuICAgICAgICAgICAgICByb2xlOiByZXN1bHRbMF0ucm9sZVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB9XG4gICAgICAgICAgcmV0dXJuIHJlc3VsdFswXTtcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgICAvKipcbiAgICAgICAqIFJldHJpZXZlcyBhIHVzZXIgYnkgZW1haWwgd2l0aCBjYWNoaW5nLlxuICAgICAgICogQHBhcmFtIGVtYWlsXG4gICAgICAgKi9cbiAgICAgIGFzeW5jIGdldFVzZXJCeUVtYWlsKGVtYWlsKSB7XG4gICAgICAgIHJldHVybiB0aGlzLndpdGhPcHRpbWl6YXRpb25zKFwiZ2V0VXNlckJ5RW1haWxcIiwgYHVzZXJfZW1haWw6JHtlbWFpbH1gLCBcInVzZXJzXCIsIGFzeW5jICgpID0+IHtcbiAgICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBkYi5zZWxlY3QoKS5mcm9tKHVzZXJzKS53aGVyZShlcSh1c2Vycy5lbWFpbCwgZW1haWwpKTtcbiAgICAgICAgICByZXR1cm4gcmVzdWx0WzBdO1xuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICAgIC8qKlxuICAgICAgICogQ3JlYXRlcyBhIG5ldyB1c2VyIHdpdGggY2FjaGUgaW52YWxpZGF0aW9uLlxuICAgICAgICogQHBhcmFtIGluc2VydFVzZXJcbiAgICAgICAqL1xuICAgICAgYXN5bmMgY3JlYXRlVXNlcihpbnNlcnRVc2VyKSB7XG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGRiUGVyZm9ybWFuY2VNb25pdG9yLnRyYWNrUXVlcnkoXCJjcmVhdGVVc2VyXCIsIGFzeW5jICgpID0+IHtcbiAgICAgICAgICBsZXQgcGFzc3dvcmQgPSBpbnNlcnRVc2VyLnBhc3N3b3JkO1xuICAgICAgICAgIGNvbnN0IGlzRGVtb1JvbGUgPSBbXCJkZW1vX21hbmFnZXJcIiwgXCJkZW1vX3RlbmFudFwiLCBcImRlbW9fcmVzaWRlbnRcIl0uaW5jbHVkZXMoaW5zZXJ0VXNlci5yb2xlKTtcbiAgICAgICAgICBpZiAoaXNEZW1vUm9sZSkge1xuICAgICAgICAgICAgcGFzc3dvcmQgPSBcIiQyYiQxMiRjT2MvUWpNanpsaHFBUXFGMmIvTVRPWnIyUUF0RVJiWEpHZDRPU2ExQ1hNbEYwNEZDM0YwMlwiO1xuICAgICAgICAgICAgY29uc29sZS5sb2coXCJcXHV7MUYzQUR9IFNldHRpbmcgZGVtbyBwYXNzd29yZCBmb3IgdXNlciB3aXRoIHJvbGU6XCIsIGluc2VydFVzZXIucm9sZSk7XG4gICAgICAgICAgfVxuICAgICAgICAgIGNvbnN0IHVzZXJEYXRhID0ge1xuICAgICAgICAgICAgdXNlcm5hbWU6IGluc2VydFVzZXIudXNlcm5hbWUsXG4gICAgICAgICAgICBlbWFpbDogaW5zZXJ0VXNlci5lbWFpbCxcbiAgICAgICAgICAgIHBhc3N3b3JkLFxuICAgICAgICAgICAgZmlyc3ROYW1lOiBpbnNlcnRVc2VyLmZpcnN0TmFtZSxcbiAgICAgICAgICAgIGxhc3ROYW1lOiBpbnNlcnRVc2VyLmxhc3ROYW1lLFxuICAgICAgICAgICAgcGhvbmU6IGluc2VydFVzZXIucGhvbmUgfHwgXCJcIixcbiAgICAgICAgICAgIHByb2ZpbGVJbWFnZTogaW5zZXJ0VXNlci5wcm9maWxlSW1hZ2UsXG4gICAgICAgICAgICBsYW5ndWFnZTogaW5zZXJ0VXNlci5sYW5ndWFnZSB8fCBcImZyXCIsXG4gICAgICAgICAgICByb2xlOiBpbnNlcnRVc2VyLnJvbGUsXG4gICAgICAgICAgICBpc0FjdGl2ZTogdHJ1ZVxuICAgICAgICAgICAgLy8gRGVmYXVsdCB2YWx1ZSBmb3IgbmV3IHVzZXJzXG4gICAgICAgICAgfTtcbiAgICAgICAgICBjb25zb2xlLmxvZyhcIlxcdXsxRjUwRH0gQ3JlYXRpbmcgdXNlciB3aXRoIGRhdGE6XCIsIHtcbiAgICAgICAgICAgIHVzZXJuYW1lOiB1c2VyRGF0YS51c2VybmFtZSxcbiAgICAgICAgICAgIGVtYWlsOiB1c2VyRGF0YS5lbWFpbCxcbiAgICAgICAgICAgIGZpcnN0TmFtZTogdXNlckRhdGEuZmlyc3ROYW1lLFxuICAgICAgICAgICAgbGFzdE5hbWU6IHVzZXJEYXRhLmxhc3ROYW1lLFxuICAgICAgICAgICAgcm9sZTogdXNlckRhdGEucm9sZSxcbiAgICAgICAgICAgIGxhbmd1YWdlOiB1c2VyRGF0YS5sYW5ndWFnZSxcbiAgICAgICAgICAgIGhhc1Bhc3N3b3JkOiAhIXVzZXJEYXRhLnBhc3N3b3JkXG4gICAgICAgICAgfSk7XG4gICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IGluc2VydGVkID0gYXdhaXQgZGIuaW5zZXJ0KHVzZXJzKS52YWx1ZXMoW3VzZXJEYXRhXSkucmV0dXJuaW5nKCk7XG4gICAgICAgICAgICByZXR1cm4gaW5zZXJ0ZWQ7XG4gICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXCJcXHUyNzRDIEVycm9yIGNyZWF0aW5nIHVzZXI6XCIsIGVycm9yKTtcbiAgICAgICAgICAgIHRocm93IGVycm9yO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIENhY2hlSW52YWxpZGF0b3IuaW52YWxpZGF0ZVVzZXJDYWNoZXMoXCIqXCIpO1xuICAgICAgICByZXR1cm4gcmVzdWx0WzBdO1xuICAgICAgfVxuICAgICAgLyoqXG4gICAgICAgKiBVcGRhdGVzIGEgdXNlciB3aXRoIGNhY2hlIGludmFsaWRhdGlvbi5cbiAgICAgICAqIEBwYXJhbSBpZFxuICAgICAgICogQHBhcmFtIHVwZGF0ZXNcbiAgICAgICAqL1xuICAgICAgYXN5bmMgdXBkYXRlVXNlcihpZCwgdXBkYXRlcykge1xuICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBkYlBlcmZvcm1hbmNlTW9uaXRvci50cmFja1F1ZXJ5KFwidXBkYXRlVXNlclwiLCBhc3luYyAoKSA9PiB7XG4gICAgICAgICAgcmV0dXJuIGRiLnVwZGF0ZSh1c2Vycykuc2V0KHsgLi4udXBkYXRlcywgdXBkYXRlZEF0OiAvKiBAX19QVVJFX18gKi8gbmV3IERhdGUoKSB9KS53aGVyZShlcSh1c2Vycy5pZCwgaWQpKS5yZXR1cm5pbmcoKTtcbiAgICAgICAgfSk7XG4gICAgICAgIENhY2hlSW52YWxpZGF0b3IuaW52YWxpZGF0ZVVzZXJDYWNoZXMoaWQpO1xuICAgICAgICByZXR1cm4gcmVzdWx0WzBdO1xuICAgICAgfVxuICAgICAgLyoqXG4gICAgICAgKiBSZXRyaWV2ZXMgb3JnYW5pemF0aW9ucyBmb3IgYSBzcGVjaWZpYyB1c2VyLlxuICAgICAgICogQHBhcmFtIHVzZXJJZFxuICAgICAgICovXG4gICAgICBhc3luYyBnZXRVc2VyT3JnYW5pemF0aW9ucyh1c2VySWQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMud2l0aE9wdGltaXphdGlvbnMoXG4gICAgICAgICAgXCJnZXRVc2VyT3JnYW5pemF0aW9uc1wiLFxuICAgICAgICAgIGB1c2VyX29yZ3M6JHt1c2VySWR9YCxcbiAgICAgICAgICBcInVzZXJzXCIsXG4gICAgICAgICAgYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgZGIuc2VsZWN0KHtcbiAgICAgICAgICAgICAgb3JnYW5pemF0aW9uSWQ6IHVzZXJPcmdhbml6YXRpb25zLm9yZ2FuaXphdGlvbklkXG4gICAgICAgICAgICB9KS5mcm9tKHVzZXJPcmdhbml6YXRpb25zKS53aGVyZShcbiAgICAgICAgICAgICAgYW5kKFxuICAgICAgICAgICAgICAgIGVxKHVzZXJPcmdhbml6YXRpb25zLnVzZXJJZCwgdXNlcklkKSxcbiAgICAgICAgICAgICAgICBlcSh1c2VyT3JnYW5pemF0aW9ucy5pc0FjdGl2ZSwgdHJ1ZSlcbiAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICAgICAgfVxuICAgICAgICApO1xuICAgICAgfVxuICAgICAgLyoqXG4gICAgICAgKiBSZXRyaWV2ZXMgcmVzaWRlbmNlcyBmb3IgYSBzcGVjaWZpYyB1c2VyLlxuICAgICAgICogQHBhcmFtIHVzZXJJZFxuICAgICAgICovXG4gICAgICBhc3luYyBnZXRVc2VyUmVzaWRlbmNlcyh1c2VySWQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMud2l0aE9wdGltaXphdGlvbnMoXG4gICAgICAgICAgXCJnZXRVc2VyUmVzaWRlbmNlc1wiLFxuICAgICAgICAgIGB1c2VyX3Jlc2lkZW5jZXM6JHt1c2VySWR9YCxcbiAgICAgICAgICBcInJlc2lkZW5jZXNcIixcbiAgICAgICAgICBhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBkYi5zZWxlY3Qoe1xuICAgICAgICAgICAgICByZXNpZGVuY2VJZDogdXNlclJlc2lkZW5jZXMucmVzaWRlbmNlSWRcbiAgICAgICAgICAgIH0pLmZyb20odXNlclJlc2lkZW5jZXMpLndoZXJlKFxuICAgICAgICAgICAgICBhbmQoZXEodXNlclJlc2lkZW5jZXMudXNlcklkLCB1c2VySWQpLCBlcSh1c2VyUmVzaWRlbmNlcy5pc0FjdGl2ZSwgdHJ1ZSkpXG4gICAgICAgICAgICApO1xuICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICAgICAgICB9XG4gICAgICAgICk7XG4gICAgICB9XG4gICAgICAvLyBPcmdhbml6YXRpb24gb3BlcmF0aW9ucyB3aXRoIG9wdGltaXphdGlvblxuICAgICAgLyoqXG4gICAgICAgKiBSZXRyaWV2ZXMgYWxsIGFjdGl2ZSBvcmdhbml6YXRpb25zIHdpdGggY2FjaGluZy5cbiAgICAgICAqL1xuICAgICAgYXN5bmMgZ2V0T3JnYW5pemF0aW9ucygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMud2l0aE9wdGltaXphdGlvbnMoXG4gICAgICAgICAgXCJnZXRPcmdhbml6YXRpb25zXCIsXG4gICAgICAgICAgXCJhbGxfb3JnYW5pemF0aW9uc1wiLFxuICAgICAgICAgIFwib3JnYW5pemF0aW9uc1wiLFxuICAgICAgICAgICgpID0+IGRiLnNlbGVjdCgpLmZyb20ob3JnYW5pemF0aW9ucykud2hlcmUoZXEob3JnYW5pemF0aW9ucy5pc0FjdGl2ZSwgdHJ1ZSkpXG4gICAgICAgICk7XG4gICAgICB9XG4gICAgICAvKipcbiAgICAgICAqIFJldHJpZXZlcyBhbiBvcmdhbml6YXRpb24gYnkgSUQgd2l0aCBjYWNoaW5nLlxuICAgICAgICogQHBhcmFtIGlkXG4gICAgICAgKi9cbiAgICAgIGFzeW5jIGdldE9yZ2FuaXphdGlvbihpZCkge1xuICAgICAgICByZXR1cm4gdGhpcy53aXRoT3B0aW1pemF0aW9ucyhcbiAgICAgICAgICBcImdldE9yZ2FuaXphdGlvblwiLFxuICAgICAgICAgIGBvcmdhbml6YXRpb246JHtpZH1gLFxuICAgICAgICAgIFwib3JnYW5pemF0aW9uc1wiLFxuICAgICAgICAgIGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGRiLnNlbGVjdCgpLmZyb20ob3JnYW5pemF0aW9ucykud2hlcmUoZXEob3JnYW5pemF0aW9ucy5pZCwgaWQpKTtcbiAgICAgICAgICAgIHJldHVybiByZXN1bHRbMF07XG4gICAgICAgICAgfVxuICAgICAgICApO1xuICAgICAgfVxuICAgICAgLyoqXG4gICAgICAgKiBDcmVhdGVzIGEgbmV3IG9yZ2FuaXphdGlvbiB3aXRoIGNhY2hlIGludmFsaWRhdGlvbi5cbiAgICAgICAqIEBwYXJhbSBpbnNlcnRPcmdhbml6YXRpb25cbiAgICAgICAqL1xuICAgICAgYXN5bmMgY3JlYXRlT3JnYW5pemF0aW9uKGluc2VydE9yZ2FuaXphdGlvbikge1xuICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBkYlBlcmZvcm1hbmNlTW9uaXRvci50cmFja1F1ZXJ5KFwiY3JlYXRlT3JnYW5pemF0aW9uXCIsIGFzeW5jICgpID0+IHtcbiAgICAgICAgICByZXR1cm4gZGIuaW5zZXJ0KG9yZ2FuaXphdGlvbnMpLnZhbHVlcyhpbnNlcnRPcmdhbml6YXRpb24pLnJldHVybmluZygpO1xuICAgICAgICB9KTtcbiAgICAgICAgcXVlcnlDYWNoZS5pbnZhbGlkYXRlKFwib3JnYW5pemF0aW9uc1wiKTtcbiAgICAgICAgcmV0dXJuIHJlc3VsdFswXTtcbiAgICAgIH1cbiAgICAgIC8vIEJ1aWxkaW5nIG9wZXJhdGlvbnMgd2l0aCBvcHRpbWl6YXRpb25cbiAgICAgIC8qKlxuICAgICAgICogUmV0cmlldmVzIGJ1aWxkaW5ncyBieSBvcmdhbml6YXRpb24gd2l0aCBjYWNoaW5nLlxuICAgICAgICogQHBhcmFtIG9yZ2FuaXphdGlvbklkXG4gICAgICAgKi9cbiAgICAgIGFzeW5jIGdldEJ1aWxkaW5nc0J5T3JnYW5pemF0aW9uKG9yZ2FuaXphdGlvbklkKSB7XG4gICAgICAgIHJldHVybiB0aGlzLndpdGhPcHRpbWl6YXRpb25zKFxuICAgICAgICAgIFwiZ2V0QnVpbGRpbmdzQnlPcmdhbml6YXRpb25cIixcbiAgICAgICAgICBgb3JnX2J1aWxkaW5nczoke29yZ2FuaXphdGlvbklkfWAsXG4gICAgICAgICAgXCJidWlsZGluZ3NcIixcbiAgICAgICAgICAoKSA9PiBkYi5zZWxlY3QoKS5mcm9tKGJ1aWxkaW5ncykud2hlcmUoXG4gICAgICAgICAgICBhbmQoXG4gICAgICAgICAgICAgIGVxKGJ1aWxkaW5ncy5vcmdhbml6YXRpb25JZCwgb3JnYW5pemF0aW9uSWQpLFxuICAgICAgICAgICAgICBlcShidWlsZGluZ3MuaXNBY3RpdmUsIHRydWUpXG4gICAgICAgICAgICApXG4gICAgICAgICAgKVxuICAgICAgICApO1xuICAgICAgfVxuICAgICAgLyoqXG4gICAgICAgKiBSZXRyaWV2ZXMgYSBidWlsZGluZyBieSBJRCB3aXRoIGNhY2hpbmcuXG4gICAgICAgKiBAcGFyYW0gaWRcbiAgICAgICAqL1xuICAgICAgYXN5bmMgZ2V0QnVpbGRpbmcoaWQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMud2l0aE9wdGltaXphdGlvbnMoXCJnZXRCdWlsZGluZ1wiLCBgYnVpbGRpbmc6JHtpZH1gLCBcImJ1aWxkaW5nc1wiLCBhc3luYyAoKSA9PiB7XG4gICAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgZGIuc2VsZWN0KCkuZnJvbShidWlsZGluZ3MpLndoZXJlKGVxKGJ1aWxkaW5ncy5pZCwgaWQpKTtcbiAgICAgICAgICByZXR1cm4gcmVzdWx0WzBdO1xuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICAgIC8qKlxuICAgICAgICogQ3JlYXRlcyBhIG5ldyBidWlsZGluZyB3aXRoIGNhY2hlIGludmFsaWRhdGlvbi5cbiAgICAgICAqIEBwYXJhbSBpbnNlcnRCdWlsZGluZ1xuICAgICAgICovXG4gICAgICBhc3luYyBjcmVhdGVCdWlsZGluZyhpbnNlcnRCdWlsZGluZykge1xuICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBkYlBlcmZvcm1hbmNlTW9uaXRvci50cmFja1F1ZXJ5KFwiY3JlYXRlQnVpbGRpbmdcIiwgYXN5bmMgKCkgPT4ge1xuICAgICAgICAgIHJldHVybiBkYi5pbnNlcnQoYnVpbGRpbmdzKS52YWx1ZXMoW2luc2VydEJ1aWxkaW5nXSkucmV0dXJuaW5nKCk7XG4gICAgICAgIH0pO1xuICAgICAgICBDYWNoZUludmFsaWRhdG9yLmludmFsaWRhdGVCdWlsZGluZ0NhY2hlcyhcIipcIik7XG4gICAgICAgIHJldHVybiByZXN1bHRbMF07XG4gICAgICB9XG4gICAgICAvLyBSZXNpZGVuY2Ugb3BlcmF0aW9ucyB3aXRoIG9wdGltaXphdGlvblxuICAgICAgLyoqXG4gICAgICAgKiBSZXRyaWV2ZXMgcmVzaWRlbmNlcyBieSBidWlsZGluZyB3aXRoIGNhY2hpbmcuXG4gICAgICAgKiBAcGFyYW0gYnVpbGRpbmdJZFxuICAgICAgICovXG4gICAgICBhc3luYyBnZXRSZXNpZGVuY2VzQnlCdWlsZGluZyhidWlsZGluZ0lkKSB7XG4gICAgICAgIHJldHVybiB0aGlzLndpdGhPcHRpbWl6YXRpb25zKFxuICAgICAgICAgIFwiZ2V0UmVzaWRlbmNlc0J5QnVpbGRpbmdcIixcbiAgICAgICAgICBgYnVpbGRpbmdfcmVzaWRlbmNlczoke2J1aWxkaW5nSWR9YCxcbiAgICAgICAgICBcInJlc2lkZW5jZXNcIixcbiAgICAgICAgICAoKSA9PiBkYi5zZWxlY3QoKS5mcm9tKHJlc2lkZW5jZXMpLndoZXJlKFxuICAgICAgICAgICAgYW5kKGVxKHJlc2lkZW5jZXMuYnVpbGRpbmdJZCwgYnVpbGRpbmdJZCksIGVxKHJlc2lkZW5jZXMuaXNBY3RpdmUsIHRydWUpKVxuICAgICAgICAgICkub3JkZXJCeShyZXNpZGVuY2VzLnVuaXROdW1iZXIpXG4gICAgICAgICk7XG4gICAgICB9XG4gICAgICAvKipcbiAgICAgICAqIFJldHJpZXZlcyBhIHJlc2lkZW5jZSBieSBJRCB3aXRoIGNhY2hpbmcuXG4gICAgICAgKiBAcGFyYW0gaWRcbiAgICAgICAqL1xuICAgICAgYXN5bmMgZ2V0UmVzaWRlbmNlKGlkKSB7XG4gICAgICAgIHJldHVybiB0aGlzLndpdGhPcHRpbWl6YXRpb25zKFwiZ2V0UmVzaWRlbmNlXCIsIGByZXNpZGVuY2U6JHtpZH1gLCBcInJlc2lkZW5jZXNcIiwgYXN5bmMgKCkgPT4ge1xuICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGRiLnNlbGVjdCgpLmZyb20ocmVzaWRlbmNlcykud2hlcmUoZXEocmVzaWRlbmNlcy5pZCwgaWQpKTtcbiAgICAgICAgICByZXR1cm4gcmVzdWx0WzBdO1xuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICAgIC8qKlxuICAgICAgICogQ3JlYXRlcyBhIG5ldyByZXNpZGVuY2Ugd2l0aCBjYWNoZSBpbnZhbGlkYXRpb24uXG4gICAgICAgKiBAcGFyYW0gaW5zZXJ0UmVzaWRlbmNlXG4gICAgICAgKi9cbiAgICAgIGFzeW5jIGNyZWF0ZVJlc2lkZW5jZShpbnNlcnRSZXNpZGVuY2UpIHtcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgZGJQZXJmb3JtYW5jZU1vbml0b3IudHJhY2tRdWVyeShcImNyZWF0ZVJlc2lkZW5jZVwiLCBhc3luYyAoKSA9PiB7XG4gICAgICAgICAgcmV0dXJuIGRiLmluc2VydChyZXNpZGVuY2VzKS52YWx1ZXMoW2luc2VydFJlc2lkZW5jZV0pLnJldHVybmluZygpO1xuICAgICAgICB9KTtcbiAgICAgICAgQ2FjaGVJbnZhbGlkYXRvci5pbnZhbGlkYXRlUmVzaWRlbmNlQ2FjaGVzKFwiKlwiKTtcbiAgICAgICAgcmV0dXJuIHJlc3VsdFswXTtcbiAgICAgIH1cbiAgICAgIC8vIEFkZGl0aW9uYWwgb3B0aW1pemVkIG1ldGhvZHMgZm9yIGZyZXF1ZW50bHkgYWNjZXNzZWQgZGF0YVxuICAgICAgLyoqXG4gICAgICAgKiBHZXRzIHVzZXIgcmVzaWRlbmNlcyB3aXRoIGZ1bGwgZGV0YWlscyAtIGZvciBjb21wbGV4IHJlc2lkZW5jZSB2aWV3cy5cbiAgICAgICAqIEBwYXJhbSB1c2VySWRcbiAgICAgICAqL1xuICAgICAgYXN5bmMgZ2V0VXNlclJlc2lkZW5jZXNXaXRoRGV0YWlscyh1c2VySWQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMud2l0aE9wdGltaXphdGlvbnMoXG4gICAgICAgICAgXCJnZXRVc2VyUmVzaWRlbmNlc1dpdGhEZXRhaWxzXCIsXG4gICAgICAgICAgYHVzZXJfcmVzaWRlbmNlc19kZXRhaWxzOiR7dXNlcklkfWAsXG4gICAgICAgICAgXCJyZXNpZGVuY2VzXCIsXG4gICAgICAgICAgKCkgPT4gZGIuc2VsZWN0KHtcbiAgICAgICAgICAgIHJlc2lkZW5jZTogcmVzaWRlbmNlcyxcbiAgICAgICAgICAgIGJ1aWxkaW5nOiBidWlsZGluZ3MsXG4gICAgICAgICAgICB1c2VyUmVzaWRlbmNlOiB1c2VyUmVzaWRlbmNlc1xuICAgICAgICAgIH0pLmZyb20odXNlclJlc2lkZW5jZXMpLmlubmVySm9pbihyZXNpZGVuY2VzLCBlcSh1c2VyUmVzaWRlbmNlcy5yZXNpZGVuY2VJZCwgcmVzaWRlbmNlcy5pZCkpLmlubmVySm9pbihidWlsZGluZ3MsIGVxKHJlc2lkZW5jZXMuYnVpbGRpbmdJZCwgYnVpbGRpbmdzLmlkKSkud2hlcmUoXG4gICAgICAgICAgICBhbmQoZXEodXNlclJlc2lkZW5jZXMudXNlcklkLCB1c2VySWQpLCBlcSh1c2VyUmVzaWRlbmNlcy5pc0FjdGl2ZSwgdHJ1ZSkpXG4gICAgICAgICAgKVxuICAgICAgICApO1xuICAgICAgfVxuICAgICAgLyoqXG4gICAgICAgKiBHZXRzIGFjdGl2ZSBiaWxscyBmb3IgYSByZXNpZGVuY2UgLSBmcmVxdWVudGx5IHF1ZXJpZWQuXG4gICAgICAgKiBAcGFyYW0gcmVzaWRlbmNlSWRcbiAgICAgICAqL1xuICAgICAgYXN5bmMgZ2V0QWN0aXZlQmlsbHNCeVJlc2lkZW5jZShyZXNpZGVuY2VJZCkge1xuICAgICAgICByZXR1cm4gdGhpcy53aXRoT3B0aW1pemF0aW9ucyhcbiAgICAgICAgICBcImdldEFjdGl2ZUJpbGxzQnlSZXNpZGVuY2VcIixcbiAgICAgICAgICBgcmVzaWRlbmNlX2JpbGxzOiR7cmVzaWRlbmNlSWR9YCxcbiAgICAgICAgICBcImJpbGxzXCIsXG4gICAgICAgICAgKCkgPT4gZGIuc2VsZWN0KCkuZnJvbShiaWxscykud2hlcmUoXG4gICAgICAgICAgICBhbmQoXG4gICAgICAgICAgICAgIGVxKGJpbGxzLnJlc2lkZW5jZUlkLCByZXNpZGVuY2VJZCksXG4gICAgICAgICAgICAgIG9yKGVxKGJpbGxzLnN0YXR1cywgXCJzZW50XCIpLCBlcShiaWxscy5zdGF0dXMsIFwib3ZlcmR1ZVwiKSlcbiAgICAgICAgICAgIClcbiAgICAgICAgICApLm9yZGVyQnkoZGVzYyhiaWxscy5kdWVEYXRlKSlcbiAgICAgICAgKTtcbiAgICAgIH1cbiAgICAgIC8qKlxuICAgICAgICogR2V0cyBtYWludGVuYW5jZSByZXF1ZXN0cyBmb3IgYSByZXNpZGVuY2UgLSBmcmVxdWVudGx5IGFjY2Vzc2VkLlxuICAgICAgICogQHBhcmFtIHJlc2lkZW5jZUlkXG4gICAgICAgKi9cbiAgICAgIGFzeW5jIGdldE1haW50ZW5hbmNlUmVxdWVzdHNCeVJlc2lkZW5jZShyZXNpZGVuY2VJZCkge1xuICAgICAgICByZXR1cm4gdGhpcy53aXRoT3B0aW1pemF0aW9ucyhcbiAgICAgICAgICBcImdldE1haW50ZW5hbmNlUmVxdWVzdHNCeVJlc2lkZW5jZVwiLFxuICAgICAgICAgIGByZXNpZGVuY2VfbWFpbnRlbmFuY2U6JHtyZXNpZGVuY2VJZH1gLFxuICAgICAgICAgIFwibWFpbnRlbmFuY2VcIixcbiAgICAgICAgICAoKSA9PiBkYi5zZWxlY3QoKS5mcm9tKG1haW50ZW5hbmNlUmVxdWVzdHMpLndoZXJlKGVxKG1haW50ZW5hbmNlUmVxdWVzdHMucmVzaWRlbmNlSWQsIHJlc2lkZW5jZUlkKSkub3JkZXJCeShkZXNjKG1haW50ZW5hbmNlUmVxdWVzdHMuY3JlYXRlZEF0KSlcbiAgICAgICAgKTtcbiAgICAgIH1cbiAgICAgIC8vIE1pc3NpbmcgT3JnYW5pemF0aW9uIG9wZXJhdGlvbnNcbiAgICAgIC8qKlxuICAgICAgICogR2V0cyBvcmdhbml6YXRpb24gYnkgbmFtZSB3aXRoIGNhY2hpbmcuXG4gICAgICAgKiBAcGFyYW0gbmFtZVxuICAgICAgICovXG4gICAgICBhc3luYyBnZXRPcmdhbml6YXRpb25CeU5hbWUobmFtZSkge1xuICAgICAgICByZXR1cm4gdGhpcy53aXRoT3B0aW1pemF0aW9ucyhcbiAgICAgICAgICBcImdldE9yZ2FuaXphdGlvbkJ5TmFtZVwiLFxuICAgICAgICAgIGBvcmdfbmFtZToke25hbWV9YCxcbiAgICAgICAgICBcIm9yZ2FuaXphdGlvbnNcIixcbiAgICAgICAgICBhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBkYi5zZWxlY3QoKS5mcm9tKG9yZ2FuaXphdGlvbnMpLndoZXJlKGVxKG9yZ2FuaXphdGlvbnMubmFtZSwgbmFtZSkpO1xuICAgICAgICAgICAgcmV0dXJuIHJlc3VsdFswXTtcbiAgICAgICAgICB9XG4gICAgICAgICk7XG4gICAgICB9XG4gICAgICAvKipcbiAgICAgICAqIFVwZGF0ZXMgb3JnYW5pemF0aW9uIHdpdGggY2FjaGUgaW52YWxpZGF0aW9uLlxuICAgICAgICogQHBhcmFtIGlkXG4gICAgICAgKiBAcGFyYW0gdXBkYXRlc1xuICAgICAgICovXG4gICAgICBhc3luYyB1cGRhdGVPcmdhbml6YXRpb24oaWQsIHVwZGF0ZXMpIHtcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgZGJQZXJmb3JtYW5jZU1vbml0b3IudHJhY2tRdWVyeShcInVwZGF0ZU9yZ2FuaXphdGlvblwiLCBhc3luYyAoKSA9PiB7XG4gICAgICAgICAgcmV0dXJuIGRiLnVwZGF0ZShvcmdhbml6YXRpb25zKS5zZXQoeyAuLi51cGRhdGVzLCB1cGRhdGVkQXQ6IC8qIEBfX1BVUkVfXyAqLyBuZXcgRGF0ZSgpIH0pLndoZXJlKGVxKG9yZ2FuaXphdGlvbnMuaWQsIGlkKSkucmV0dXJuaW5nKCk7XG4gICAgICAgIH0pO1xuICAgICAgICBDYWNoZUludmFsaWRhdG9yLmludmFsaWRhdGVVc2VyQ2FjaGVzKFwiKlwiKTtcbiAgICAgICAgcmV0dXJuIHJlc3VsdFswXTtcbiAgICAgIH1cbiAgICAgIC8vIE1pc3NpbmcgQnVpbGRpbmcgb3BlcmF0aW9uc1xuICAgICAgLyoqXG4gICAgICAgKiBHZXRzIGFsbCBidWlsZGluZ3Mgd2l0aCBjYWNoaW5nLlxuICAgICAgICovXG4gICAgICBhc3luYyBnZXRCdWlsZGluZ3MoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLndpdGhPcHRpbWl6YXRpb25zKFxuICAgICAgICAgIFwiZ2V0QnVpbGRpbmdzXCIsXG4gICAgICAgICAgXCJhbGxfYnVpbGRpbmdzXCIsXG4gICAgICAgICAgXCJidWlsZGluZ3NcIixcbiAgICAgICAgICAoKSA9PiBkYi5zZWxlY3QoKS5mcm9tKGJ1aWxkaW5ncykud2hlcmUoZXEoYnVpbGRpbmdzLmlzQWN0aXZlLCB0cnVlKSlcbiAgICAgICAgKTtcbiAgICAgIH1cbiAgICAgIC8qKlxuICAgICAgICogVXBkYXRlcyBidWlsZGluZyB3aXRoIGNhY2hlIGludmFsaWRhdGlvbi5cbiAgICAgICAqIEBwYXJhbSBpZFxuICAgICAgICogQHBhcmFtIHVwZGF0ZXNcbiAgICAgICAqL1xuICAgICAgYXN5bmMgdXBkYXRlQnVpbGRpbmcoaWQsIHVwZGF0ZXMpIHtcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgZGJQZXJmb3JtYW5jZU1vbml0b3IudHJhY2tRdWVyeShcInVwZGF0ZUJ1aWxkaW5nXCIsIGFzeW5jICgpID0+IHtcbiAgICAgICAgICByZXR1cm4gZGIudXBkYXRlKGJ1aWxkaW5ncykuc2V0KHsgLi4udXBkYXRlcywgdXBkYXRlZEF0OiAvKiBAX19QVVJFX18gKi8gbmV3IERhdGUoKSB9KS53aGVyZShlcShidWlsZGluZ3MuaWQsIGlkKSkucmV0dXJuaW5nKCk7XG4gICAgICAgIH0pO1xuICAgICAgICBDYWNoZUludmFsaWRhdG9yLmludmFsaWRhdGVCdWlsZGluZ0NhY2hlcyhpZCk7XG4gICAgICAgIHJldHVybiByZXN1bHRbMF07XG4gICAgICB9XG4gICAgICAvKipcbiAgICAgICAqIERlbGV0ZXMgYnVpbGRpbmcgKHNvZnQgZGVsZXRlKS5cbiAgICAgICAqIEBwYXJhbSBpZFxuICAgICAgICovXG4gICAgICBhc3luYyBkZWxldGVCdWlsZGluZyhpZCkge1xuICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBkYlBlcmZvcm1hbmNlTW9uaXRvci50cmFja1F1ZXJ5KFwiZGVsZXRlQnVpbGRpbmdcIiwgYXN5bmMgKCkgPT4ge1xuICAgICAgICAgIHJldHVybiBkYi51cGRhdGUoYnVpbGRpbmdzKS5zZXQoeyBpc0FjdGl2ZTogZmFsc2UsIHVwZGF0ZWRBdDogLyogQF9fUFVSRV9fICovIG5ldyBEYXRlKCkgfSkud2hlcmUoZXEoYnVpbGRpbmdzLmlkLCBpZCkpLnJldHVybmluZygpO1xuICAgICAgICB9KTtcbiAgICAgICAgQ2FjaGVJbnZhbGlkYXRvci5pbnZhbGlkYXRlQnVpbGRpbmdDYWNoZXMoaWQpO1xuICAgICAgICByZXR1cm4gcmVzdWx0Lmxlbmd0aCA+IDA7XG4gICAgICB9XG4gICAgICAvLyBNaXNzaW5nIFJlc2lkZW5jZSBvcGVyYXRpb25zXG4gICAgICAvKipcbiAgICAgICAqIEdldHMgYWxsIHJlc2lkZW5jZXMgd2l0aCBjYWNoaW5nLlxuICAgICAgICovXG4gICAgICBhc3luYyBnZXRSZXNpZGVuY2VzKCkge1xuICAgICAgICByZXR1cm4gdGhpcy53aXRoT3B0aW1pemF0aW9ucyhcbiAgICAgICAgICBcImdldFJlc2lkZW5jZXNcIixcbiAgICAgICAgICBcImFsbF9yZXNpZGVuY2VzXCIsXG4gICAgICAgICAgXCJyZXNpZGVuY2VzXCIsXG4gICAgICAgICAgKCkgPT4gZGIuc2VsZWN0KCkuZnJvbShyZXNpZGVuY2VzKS53aGVyZShlcShyZXNpZGVuY2VzLmlzQWN0aXZlLCB0cnVlKSlcbiAgICAgICAgKTtcbiAgICAgIH1cbiAgICAgIC8qKlxuICAgICAgICogVXBkYXRlcyByZXNpZGVuY2Ugd2l0aCBjYWNoZSBpbnZhbGlkYXRpb24uXG4gICAgICAgKiBAcGFyYW0gaWRcbiAgICAgICAqIEBwYXJhbSB1cGRhdGVzXG4gICAgICAgKi9cbiAgICAgIGFzeW5jIHVwZGF0ZVJlc2lkZW5jZShpZCwgdXBkYXRlcykge1xuICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBkYlBlcmZvcm1hbmNlTW9uaXRvci50cmFja1F1ZXJ5KFwidXBkYXRlUmVzaWRlbmNlXCIsIGFzeW5jICgpID0+IHtcbiAgICAgICAgICByZXR1cm4gZGIudXBkYXRlKHJlc2lkZW5jZXMpLnNldCh7IC4uLnVwZGF0ZXMsIHVwZGF0ZWRBdDogLyogQF9fUFVSRV9fICovIG5ldyBEYXRlKCkgfSkud2hlcmUoZXEocmVzaWRlbmNlcy5pZCwgaWQpKS5yZXR1cm5pbmcoKTtcbiAgICAgICAgfSk7XG4gICAgICAgIENhY2hlSW52YWxpZGF0b3IuaW52YWxpZGF0ZVJlc2lkZW5jZUNhY2hlcyhpZCk7XG4gICAgICAgIHJldHVybiByZXN1bHRbMF07XG4gICAgICB9XG4gICAgICAvKipcbiAgICAgICAqIERlbGV0ZXMgcmVzaWRlbmNlIChzb2Z0IGRlbGV0ZSkuXG4gICAgICAgKiBAcGFyYW0gaWRcbiAgICAgICAqL1xuICAgICAgYXN5bmMgZGVsZXRlUmVzaWRlbmNlKGlkKSB7XG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGRiUGVyZm9ybWFuY2VNb25pdG9yLnRyYWNrUXVlcnkoXCJkZWxldGVSZXNpZGVuY2VcIiwgYXN5bmMgKCkgPT4ge1xuICAgICAgICAgIHJldHVybiBkYi51cGRhdGUocmVzaWRlbmNlcykuc2V0KHsgaXNBY3RpdmU6IGZhbHNlLCB1cGRhdGVkQXQ6IC8qIEBfX1BVUkVfXyAqLyBuZXcgRGF0ZSgpIH0pLndoZXJlKGVxKHJlc2lkZW5jZXMuaWQsIGlkKSkucmV0dXJuaW5nKCk7XG4gICAgICAgIH0pO1xuICAgICAgICBDYWNoZUludmFsaWRhdG9yLmludmFsaWRhdGVSZXNpZGVuY2VDYWNoZXMoaWQpO1xuICAgICAgICByZXR1cm4gcmVzdWx0Lmxlbmd0aCA+IDA7XG4gICAgICB9XG4gICAgICAvLyBEZXZlbG9wbWVudCBQaWxsYXIgb3BlcmF0aW9uc1xuICAgICAgLyoqXG4gICAgICAgKiBHZXRzIGFsbCBkZXZlbG9wbWVudCBwaWxsYXJzLlxuICAgICAgICovXG4gICAgICBhc3luYyBnZXRQaWxsYXJzKCkge1xuICAgICAgICByZXR1cm4gdGhpcy53aXRoT3B0aW1pemF0aW9ucyhcbiAgICAgICAgICBcImdldFBpbGxhcnNcIixcbiAgICAgICAgICBcImFsbF9waWxsYXJzXCIsXG4gICAgICAgICAgXCJwaWxsYXJzXCIsXG4gICAgICAgICAgKCkgPT4gZGIuc2VsZWN0KCkuZnJvbShkZXZlbG9wbWVudFBpbGxhcnMpXG4gICAgICAgICk7XG4gICAgICB9XG4gICAgICAvKipcbiAgICAgICAqIEdldHMgZGV2ZWxvcG1lbnQgcGlsbGFyIGJ5IElELlxuICAgICAgICogQHBhcmFtIGlkXG4gICAgICAgKi9cbiAgICAgIGFzeW5jIGdldFBpbGxhcihpZCkge1xuICAgICAgICByZXR1cm4gdGhpcy53aXRoT3B0aW1pemF0aW9ucyhcImdldFBpbGxhclwiLCBgcGlsbGFyOiR7aWR9YCwgXCJwaWxsYXJzXCIsIGFzeW5jICgpID0+IHtcbiAgICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBkYi5zZWxlY3QoKS5mcm9tKGRldmVsb3BtZW50UGlsbGFycykud2hlcmUoZXEoZGV2ZWxvcG1lbnRQaWxsYXJzLmlkLCBpZCkpO1xuICAgICAgICAgIHJldHVybiByZXN1bHRbMF07XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgICAgLyoqXG4gICAgICAgKiBDcmVhdGVzIGRldmVsb3BtZW50IHBpbGxhci5cbiAgICAgICAqIEBwYXJhbSBwaWxsYXJcbiAgICAgICAqL1xuICAgICAgYXN5bmMgY3JlYXRlUGlsbGFyKHBpbGxhcikge1xuICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBkYlBlcmZvcm1hbmNlTW9uaXRvci50cmFja1F1ZXJ5KFwiY3JlYXRlUGlsbGFyXCIsIGFzeW5jICgpID0+IHtcbiAgICAgICAgICByZXR1cm4gZGIuaW5zZXJ0KGRldmVsb3BtZW50UGlsbGFycykudmFsdWVzKHBpbGxhcikucmV0dXJuaW5nKCk7XG4gICAgICAgIH0pO1xuICAgICAgICBxdWVyeUNhY2hlLmludmFsaWRhdGUoXCJwaWxsYXJzXCIpO1xuICAgICAgICByZXR1cm4gcmVzdWx0WzBdO1xuICAgICAgfVxuICAgICAgLyoqXG4gICAgICAgKiBVcGRhdGVzIGRldmVsb3BtZW50IHBpbGxhci5cbiAgICAgICAqIEBwYXJhbSBpZFxuICAgICAgICogQHBhcmFtIHBpbGxhclxuICAgICAgICovXG4gICAgICBhc3luYyB1cGRhdGVQaWxsYXIoaWQsIHBpbGxhcikge1xuICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBkYlBlcmZvcm1hbmNlTW9uaXRvci50cmFja1F1ZXJ5KFwidXBkYXRlUGlsbGFyXCIsIGFzeW5jICgpID0+IHtcbiAgICAgICAgICByZXR1cm4gZGIudXBkYXRlKGRldmVsb3BtZW50UGlsbGFycykuc2V0KHsgLi4ucGlsbGFyLCB1cGRhdGVkQXQ6IC8qIEBfX1BVUkVfXyAqLyBuZXcgRGF0ZSgpIH0pLndoZXJlKGVxKGRldmVsb3BtZW50UGlsbGFycy5pZCwgaWQpKS5yZXR1cm5pbmcoKTtcbiAgICAgICAgfSk7XG4gICAgICAgIHF1ZXJ5Q2FjaGUuaW52YWxpZGF0ZShcInBpbGxhcnNcIik7XG4gICAgICAgIHJldHVybiByZXN1bHRbMF07XG4gICAgICB9XG4gICAgICAvLyBXb3Jrc3BhY2UgU3RhdHVzIG9wZXJhdGlvbnNcbiAgICAgIC8qKlxuICAgICAgICogR2V0cyBhbGwgd29ya3NwYWNlIHN0YXR1c2VzLlxuICAgICAgICovXG4gICAgICBhc3luYyBnZXRXb3Jrc3BhY2VTdGF0dXNlcygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMud2l0aE9wdGltaXphdGlvbnMoXG4gICAgICAgICAgXCJnZXRXb3Jrc3BhY2VTdGF0dXNlc1wiLFxuICAgICAgICAgIFwiYWxsX3dvcmtzcGFjZV9zdGF0dXNlc1wiLFxuICAgICAgICAgIFwid29ya3NwYWNlX3N0YXR1c1wiLFxuICAgICAgICAgICgpID0+IGRiLnNlbGVjdCgpLmZyb20od29ya3NwYWNlU3RhdHVzKVxuICAgICAgICApO1xuICAgICAgfVxuICAgICAgLyoqXG4gICAgICAgKiBHZXRzIHdvcmtzcGFjZSBzdGF0dXMgYnkgY29tcG9uZW50LlxuICAgICAgICogQHBhcmFtIGNvbXBvbmVudFxuICAgICAgICovXG4gICAgICBhc3luYyBnZXRXb3Jrc3BhY2VTdGF0dXMoY29tcG9uZW50KSB7XG4gICAgICAgIHJldHVybiB0aGlzLndpdGhPcHRpbWl6YXRpb25zKFxuICAgICAgICAgIFwiZ2V0V29ya3NwYWNlU3RhdHVzXCIsXG4gICAgICAgICAgYHdvcmtzcGFjZV9zdGF0dXM6JHtjb21wb25lbnR9YCxcbiAgICAgICAgICBcIndvcmtzcGFjZV9zdGF0dXNcIixcbiAgICAgICAgICBhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBkYi5zZWxlY3QoKS5mcm9tKHdvcmtzcGFjZVN0YXR1cykud2hlcmUoZXEod29ya3NwYWNlU3RhdHVzLmNvbXBvbmVudCwgY29tcG9uZW50KSk7XG4gICAgICAgICAgICByZXR1cm4gcmVzdWx0WzBdO1xuICAgICAgICAgIH1cbiAgICAgICAgKTtcbiAgICAgIH1cbiAgICAgIC8qKlxuICAgICAgICogQ3JlYXRlcyB3b3Jrc3BhY2Ugc3RhdHVzLlxuICAgICAgICogQHBhcmFtIHN0YXR1c1xuICAgICAgICovXG4gICAgICBhc3luYyBjcmVhdGVXb3Jrc3BhY2VTdGF0dXMoc3RhdHVzKSB7XG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGRiUGVyZm9ybWFuY2VNb25pdG9yLnRyYWNrUXVlcnkoXCJjcmVhdGVXb3Jrc3BhY2VTdGF0dXNcIiwgYXN5bmMgKCkgPT4ge1xuICAgICAgICAgIHJldHVybiBkYi5pbnNlcnQod29ya3NwYWNlU3RhdHVzKS52YWx1ZXMoc3RhdHVzKS5yZXR1cm5pbmcoKTtcbiAgICAgICAgfSk7XG4gICAgICAgIHF1ZXJ5Q2FjaGUuaW52YWxpZGF0ZShcIndvcmtzcGFjZV9zdGF0dXNcIik7XG4gICAgICAgIHJldHVybiByZXN1bHRbMF07XG4gICAgICB9XG4gICAgICAvKipcbiAgICAgICAqIFVwZGF0ZXMgd29ya3NwYWNlIHN0YXR1cy5cbiAgICAgICAqIEBwYXJhbSBjb21wb25lbnRcbiAgICAgICAqIEBwYXJhbSBzdGF0dXNcbiAgICAgICAqL1xuICAgICAgYXN5bmMgdXBkYXRlV29ya3NwYWNlU3RhdHVzKGNvbXBvbmVudCwgc3RhdHVzKSB7XG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGRiUGVyZm9ybWFuY2VNb25pdG9yLnRyYWNrUXVlcnkoXCJ1cGRhdGVXb3Jrc3BhY2VTdGF0dXNcIiwgYXN5bmMgKCkgPT4ge1xuICAgICAgICAgIHJldHVybiBkYi51cGRhdGUod29ya3NwYWNlU3RhdHVzKS5zZXQoeyBzdGF0dXMgfSkud2hlcmUoZXEod29ya3NwYWNlU3RhdHVzLmNvbXBvbmVudCwgY29tcG9uZW50KSkucmV0dXJuaW5nKCk7XG4gICAgICAgIH0pO1xuICAgICAgICBxdWVyeUNhY2hlLmludmFsaWRhdGUoXCJ3b3Jrc3BhY2Vfc3RhdHVzXCIpO1xuICAgICAgICByZXR1cm4gcmVzdWx0WzBdO1xuICAgICAgfVxuICAgICAgLy8gUXVhbGl0eSBNZXRyaWNzIG9wZXJhdGlvbnNcbiAgICAgIC8qKlxuICAgICAgICogR2V0cyBhbGwgcXVhbGl0eSBtZXRyaWNzLlxuICAgICAgICovXG4gICAgICBhc3luYyBnZXRRdWFsaXR5TWV0cmljcygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMud2l0aE9wdGltaXphdGlvbnMoXG4gICAgICAgICAgXCJnZXRRdWFsaXR5TWV0cmljc1wiLFxuICAgICAgICAgIFwiYWxsX3F1YWxpdHlfbWV0cmljc1wiLFxuICAgICAgICAgIFwicXVhbGl0eV9tZXRyaWNzXCIsXG4gICAgICAgICAgKCkgPT4gZGIuc2VsZWN0KCkuZnJvbShxdWFsaXR5TWV0cmljcylcbiAgICAgICAgKTtcbiAgICAgIH1cbiAgICAgIC8qKlxuICAgICAgICogQ3JlYXRlcyBxdWFsaXR5IG1ldHJpYy5cbiAgICAgICAqIEBwYXJhbSBtZXRyaWNcbiAgICAgICAqL1xuICAgICAgYXN5bmMgY3JlYXRlUXVhbGl0eU1ldHJpYyhtZXRyaWMpIHtcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgZGJQZXJmb3JtYW5jZU1vbml0b3IudHJhY2tRdWVyeShcImNyZWF0ZVF1YWxpdHlNZXRyaWNcIiwgYXN5bmMgKCkgPT4ge1xuICAgICAgICAgIHJldHVybiBkYi5pbnNlcnQocXVhbGl0eU1ldHJpY3MpLnZhbHVlcyhtZXRyaWMpLnJldHVybmluZygpO1xuICAgICAgICB9KTtcbiAgICAgICAgcXVlcnlDYWNoZS5pbnZhbGlkYXRlKFwicXVhbGl0eV9tZXRyaWNzXCIpO1xuICAgICAgICByZXR1cm4gcmVzdWx0WzBdO1xuICAgICAgfVxuICAgICAgLy8gRnJhbWV3b3JrIENvbmZpZ3VyYXRpb24gb3BlcmF0aW9uc1xuICAgICAgLyoqXG4gICAgICAgKiBHZXRzIGFsbCBmcmFtZXdvcmsgY29uZmlndXJhdGlvbnMuXG4gICAgICAgKi9cbiAgICAgIGFzeW5jIGdldEZyYW1ld29ya0NvbmZpZ3MoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLndpdGhPcHRpbWl6YXRpb25zKFxuICAgICAgICAgIFwiZ2V0RnJhbWV3b3JrQ29uZmlnc1wiLFxuICAgICAgICAgIFwiYWxsX2ZyYW1ld29ya19jb25maWdzXCIsXG4gICAgICAgICAgXCJmcmFtZXdvcmtfY29uZmlnc1wiLFxuICAgICAgICAgICgpID0+IGRiLnNlbGVjdCgpLmZyb20oZnJhbWV3b3JrQ29uZmlndXJhdGlvbilcbiAgICAgICAgKTtcbiAgICAgIH1cbiAgICAgIC8qKlxuICAgICAgICogR2V0cyBmcmFtZXdvcmsgY29uZmlnIGJ5IGtleS5cbiAgICAgICAqIEBwYXJhbSBrZXlcbiAgICAgICAqIEBwYXJhbSBfa2V5XG4gICAgICAgKi9cbiAgICAgIGFzeW5jIGdldEZyYW1ld29ya0NvbmZpZyhfa2V5KSB7XG4gICAgICAgIHJldHVybiB0aGlzLndpdGhPcHRpbWl6YXRpb25zKFxuICAgICAgICAgIFwiZ2V0RnJhbWV3b3JrQ29uZmlnXCIsXG4gICAgICAgICAgYGZyYW1ld29ya19jb25maWc6JHtfa2V5fWAsXG4gICAgICAgICAgXCJmcmFtZXdvcmtfY29uZmlnc1wiLFxuICAgICAgICAgIGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGRiLnNlbGVjdCgpLmZyb20oZnJhbWV3b3JrQ29uZmlndXJhdGlvbikud2hlcmUoZXEoZnJhbWV3b3JrQ29uZmlndXJhdGlvbi5fa2V5LCBfa2V5KSk7XG4gICAgICAgICAgICByZXR1cm4gcmVzdWx0WzBdO1xuICAgICAgICAgIH1cbiAgICAgICAgKTtcbiAgICAgIH1cbiAgICAgIC8qKlxuICAgICAgICogU2V0cyBmcmFtZXdvcmsgY29uZmlndXJhdGlvbi5cbiAgICAgICAqIEBwYXJhbSBjb25maWdcbiAgICAgICAqL1xuICAgICAgYXN5bmMgc2V0RnJhbWV3b3JrQ29uZmlnKGNvbmZpZzIpIHtcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgZGJQZXJmb3JtYW5jZU1vbml0b3IudHJhY2tRdWVyeShcInNldEZyYW1ld29ya0NvbmZpZ1wiLCBhc3luYyAoKSA9PiB7XG4gICAgICAgICAgcmV0dXJuIGRiLmluc2VydChmcmFtZXdvcmtDb25maWd1cmF0aW9uKS52YWx1ZXMoY29uZmlnMikub25Db25mbGljdERvVXBkYXRlKHtcbiAgICAgICAgICAgIHRhcmdldDogZnJhbWV3b3JrQ29uZmlndXJhdGlvbi5fa2V5LFxuICAgICAgICAgICAgc2V0OiB7IF92YWx1ZTogY29uZmlnMi5fdmFsdWUsIHVwZGF0ZWRBdDogLyogQF9fUFVSRV9fICovIG5ldyBEYXRlKCkgfVxuICAgICAgICAgIH0pLnJldHVybmluZygpO1xuICAgICAgICB9KTtcbiAgICAgICAgcXVlcnlDYWNoZS5pbnZhbGlkYXRlKFwiZnJhbWV3b3JrX2NvbmZpZ3NcIik7XG4gICAgICAgIHJldHVybiByZXN1bHRbMF07XG4gICAgICB9XG4gICAgICAvLyBJbXByb3ZlbWVudCBTdWdnZXN0aW9ucyBvcGVyYXRpb25zXG4gICAgICAvKipcbiAgICAgICAqIEdldHMgYWxsIGltcHJvdmVtZW50IHN1Z2dlc3Rpb25zLlxuICAgICAgICovXG4gICAgICBhc3luYyBnZXRJbXByb3ZlbWVudFN1Z2dlc3Rpb25zKCkge1xuICAgICAgICByZXR1cm4gdGhpcy53aXRoT3B0aW1pemF0aW9ucyhcbiAgICAgICAgICBcImdldEltcHJvdmVtZW50U3VnZ2VzdGlvbnNcIixcbiAgICAgICAgICBcImFsbF9pbXByb3ZlbWVudF9zdWdnZXN0aW9uc1wiLFxuICAgICAgICAgIFwiaW1wcm92ZW1lbnRfc3VnZ2VzdGlvbnNcIixcbiAgICAgICAgICAoKSA9PiBkYi5zZWxlY3QoKS5mcm9tKGltcHJvdmVtZW50U3VnZ2VzdGlvbnMpXG4gICAgICAgICk7XG4gICAgICB9XG4gICAgICAvKipcbiAgICAgICAqIEdldHMgdG9wIGltcHJvdmVtZW50IHN1Z2dlc3Rpb25zLlxuICAgICAgICogQHBhcmFtIGxpbWl0XG4gICAgICAgKi9cbiAgICAgIGFzeW5jIGdldFRvcEltcHJvdmVtZW50U3VnZ2VzdGlvbnMobGltaXQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMud2l0aE9wdGltaXphdGlvbnMoXG4gICAgICAgICAgXCJnZXRUb3BJbXByb3ZlbWVudFN1Z2dlc3Rpb25zXCIsXG4gICAgICAgICAgYHRvcF9zdWdnZXN0aW9uczoke2xpbWl0fWAsXG4gICAgICAgICAgXCJpbXByb3ZlbWVudF9zdWdnZXN0aW9uc1wiLFxuICAgICAgICAgICgpID0+IGRiLnNlbGVjdCgpLmZyb20oaW1wcm92ZW1lbnRTdWdnZXN0aW9ucykub3JkZXJCeShcbiAgICAgICAgICAgIGRlc2MoaW1wcm92ZW1lbnRTdWdnZXN0aW9ucy5wcmlvcml0eSksXG4gICAgICAgICAgICBkZXNjKGltcHJvdmVtZW50U3VnZ2VzdGlvbnMuY3JlYXRlZEF0KVxuICAgICAgICAgICkubGltaXQobGltaXQpXG4gICAgICAgICk7XG4gICAgICB9XG4gICAgICAvKipcbiAgICAgICAqIENyZWF0ZXMgaW1wcm92ZW1lbnQgc3VnZ2VzdGlvbi5cbiAgICAgICAqIEBwYXJhbSBzdWdnZXN0aW9uXG4gICAgICAgKi9cbiAgICAgIGFzeW5jIGNyZWF0ZUltcHJvdmVtZW50U3VnZ2VzdGlvbihzdWdnZXN0aW9uKSB7XG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGRiUGVyZm9ybWFuY2VNb25pdG9yLnRyYWNrUXVlcnkoXG4gICAgICAgICAgXCJjcmVhdGVJbXByb3ZlbWVudFN1Z2dlc3Rpb25cIixcbiAgICAgICAgICBhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICByZXR1cm4gZGIuaW5zZXJ0KGltcHJvdmVtZW50U3VnZ2VzdGlvbnMpLnZhbHVlcyhbXG4gICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAuLi5zdWdnZXN0aW9uLFxuICAgICAgICAgICAgICAgIGNhdGVnb3J5OiBzdWdnZXN0aW9uLmNhdGVnb3J5XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIF0pLnJldHVybmluZygpO1xuICAgICAgICAgIH1cbiAgICAgICAgKTtcbiAgICAgICAgcXVlcnlDYWNoZS5pbnZhbGlkYXRlKFwiaW1wcm92ZW1lbnRfc3VnZ2VzdGlvbnNcIik7XG4gICAgICAgIHJldHVybiByZXN1bHRbMF07XG4gICAgICB9XG4gICAgICAvKipcbiAgICAgICAqIENsZWFycyBuZXcgc3VnZ2VzdGlvbnMuXG4gICAgICAgKi9cbiAgICAgIGFzeW5jIGNsZWFyTmV3U3VnZ2VzdGlvbnMoKSB7XG4gICAgICAgIGF3YWl0IGRiUGVyZm9ybWFuY2VNb25pdG9yLnRyYWNrUXVlcnkoXCJjbGVhck5ld1N1Z2dlc3Rpb25zXCIsIGFzeW5jICgpID0+IHtcbiAgICAgICAgICByZXR1cm4gZGIudXBkYXRlKGltcHJvdmVtZW50U3VnZ2VzdGlvbnMpLnNldCh7IHN0YXR1czogXCJBY2tub3dsZWRnZWRcIiB9KS53aGVyZShlcShpbXByb3ZlbWVudFN1Z2dlc3Rpb25zLnN0YXR1cywgXCJOZXdcIikpO1xuICAgICAgICB9KTtcbiAgICAgICAgcXVlcnlDYWNoZS5pbnZhbGlkYXRlKFwiaW1wcm92ZW1lbnRfc3VnZ2VzdGlvbnNcIik7XG4gICAgICB9XG4gICAgICAvKipcbiAgICAgICAqIFVwZGF0ZXMgc3VnZ2VzdGlvbiBzdGF0dXMuXG4gICAgICAgKiBAcGFyYW0gaWRcbiAgICAgICAqIEBwYXJhbSBzdGF0dXNcbiAgICAgICAqL1xuICAgICAgYXN5bmMgdXBkYXRlU3VnZ2VzdGlvblN0YXR1cyhpZCwgc3RhdHVzKSB7XG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGRiUGVyZm9ybWFuY2VNb25pdG9yLnRyYWNrUXVlcnkoXCJ1cGRhdGVTdWdnZXN0aW9uU3RhdHVzXCIsIGFzeW5jICgpID0+IHtcbiAgICAgICAgICByZXR1cm4gZGIudXBkYXRlKGltcHJvdmVtZW50U3VnZ2VzdGlvbnMpLnNldCh7IHN0YXR1cyB9KS53aGVyZShlcShpbXByb3ZlbWVudFN1Z2dlc3Rpb25zLmlkLCBpZCkpLnJldHVybmluZygpO1xuICAgICAgICB9KTtcbiAgICAgICAgcXVlcnlDYWNoZS5pbnZhbGlkYXRlKFwiaW1wcm92ZW1lbnRfc3VnZ2VzdGlvbnNcIik7XG4gICAgICAgIHJldHVybiByZXN1bHRbMF07XG4gICAgICB9XG4gICAgICAvLyBGZWF0dXJlcyBvcGVyYXRpb25zXG4gICAgICAvKipcbiAgICAgICAqIEdldHMgYWxsIGZlYXR1cmVzLlxuICAgICAgICovXG4gICAgICBhc3luYyBnZXRGZWF0dXJlcygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMud2l0aE9wdGltaXphdGlvbnMoXG4gICAgICAgICAgXCJnZXRGZWF0dXJlc1wiLFxuICAgICAgICAgIFwiYWxsX2ZlYXR1cmVzXCIsXG4gICAgICAgICAgXCJmZWF0dXJlc1wiLFxuICAgICAgICAgICgpID0+IGRiLnNlbGVjdCgpLmZyb20oZmVhdHVyZXMpXG4gICAgICAgICk7XG4gICAgICB9XG4gICAgICAvKipcbiAgICAgICAqIEdldHMgZmVhdHVyZXMgYnkgc3RhdHVzLlxuICAgICAgICogQHBhcmFtIHN0YXR1c1xuICAgICAgICovXG4gICAgICBhc3luYyBnZXRGZWF0dXJlc0J5U3RhdHVzKHN0YXR1cykge1xuICAgICAgICByZXR1cm4gdGhpcy53aXRoT3B0aW1pemF0aW9ucyhcbiAgICAgICAgICBcImdldEZlYXR1cmVzQnlTdGF0dXNcIixcbiAgICAgICAgICBgZmVhdHVyZXNfc3RhdHVzOiR7c3RhdHVzfWAsXG4gICAgICAgICAgXCJmZWF0dXJlc1wiLFxuICAgICAgICAgICgpID0+IGRiLnNlbGVjdCgpLmZyb20oZmVhdHVyZXMpLndoZXJlKGVxKGZlYXR1cmVzLnN0YXR1cywgc3RhdHVzKSlcbiAgICAgICAgKTtcbiAgICAgIH1cbiAgICAgIC8qKlxuICAgICAgICogR2V0cyBmZWF0dXJlcyBieSBjYXRlZ29yeS5cbiAgICAgICAqIEBwYXJhbSBjYXRlZ29yeVxuICAgICAgICovXG4gICAgICBhc3luYyBnZXRGZWF0dXJlc0J5Q2F0ZWdvcnkoY2F0ZWdvcnkpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMud2l0aE9wdGltaXphdGlvbnMoXG4gICAgICAgICAgXCJnZXRGZWF0dXJlc0J5Q2F0ZWdvcnlcIixcbiAgICAgICAgICBgZmVhdHVyZXNfY2F0ZWdvcnk6JHtjYXRlZ29yeX1gLFxuICAgICAgICAgIFwiZmVhdHVyZXNcIixcbiAgICAgICAgICAoKSA9PiBkYi5zZWxlY3QoKS5mcm9tKGZlYXR1cmVzKS53aGVyZShlcShmZWF0dXJlcy5jYXRlZ29yeSwgY2F0ZWdvcnkpKVxuICAgICAgICApO1xuICAgICAgfVxuICAgICAgLyoqXG4gICAgICAgKiBHZXRzIHB1YmxpYyByb2FkbWFwIGZlYXR1cmVzLlxuICAgICAgICovXG4gICAgICBhc3luYyBnZXRQdWJsaWNSb2FkbWFwRmVhdHVyZXMoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLndpdGhPcHRpbWl6YXRpb25zKFxuICAgICAgICAgIFwiZ2V0UHVibGljUm9hZG1hcEZlYXR1cmVzXCIsXG4gICAgICAgICAgXCJwdWJsaWNfcm9hZG1hcF9mZWF0dXJlc1wiLFxuICAgICAgICAgIFwiZmVhdHVyZXNcIixcbiAgICAgICAgICAoKSA9PiBkYi5zZWxlY3QoKS5mcm9tKGZlYXR1cmVzKS53aGVyZShlcShmZWF0dXJlcy5pc1B1YmxpY1JvYWRtYXAsIHRydWUpKVxuICAgICAgICApO1xuICAgICAgfVxuICAgICAgLyoqXG4gICAgICAgKiBDcmVhdGVzIGZlYXR1cmUuXG4gICAgICAgKiBAcGFyYW0gZmVhdHVyZVxuICAgICAgICovXG4gICAgICBhc3luYyBjcmVhdGVGZWF0dXJlKGZlYXR1cmUpIHtcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgZGJQZXJmb3JtYW5jZU1vbml0b3IudHJhY2tRdWVyeShcImNyZWF0ZUZlYXR1cmVcIiwgYXN5bmMgKCkgPT4ge1xuICAgICAgICAgIHJldHVybiBkYi5pbnNlcnQoZmVhdHVyZXMpLnZhbHVlcyhbZmVhdHVyZV0pLnJldHVybmluZygpO1xuICAgICAgICB9KTtcbiAgICAgICAgcXVlcnlDYWNoZS5pbnZhbGlkYXRlKFwiZmVhdHVyZXNcIik7XG4gICAgICAgIHJldHVybiByZXN1bHRbMF07XG4gICAgICB9XG4gICAgICAvKipcbiAgICAgICAqIFVwZGF0ZXMgZmVhdHVyZS5cbiAgICAgICAqIEBwYXJhbSBpZFxuICAgICAgICogQHBhcmFtIHVwZGF0ZXNcbiAgICAgICAqL1xuICAgICAgYXN5bmMgdXBkYXRlRmVhdHVyZShpZCwgdXBkYXRlcykge1xuICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBkYlBlcmZvcm1hbmNlTW9uaXRvci50cmFja1F1ZXJ5KFwidXBkYXRlRmVhdHVyZVwiLCBhc3luYyAoKSA9PiB7XG4gICAgICAgICAgcmV0dXJuIGRiLnVwZGF0ZShmZWF0dXJlcykuc2V0KHVwZGF0ZXMpLndoZXJlKGVxKGZlYXR1cmVzLmlkLCBpZCkpLnJldHVybmluZygpO1xuICAgICAgICB9KTtcbiAgICAgICAgcXVlcnlDYWNoZS5pbnZhbGlkYXRlKFwiZmVhdHVyZXNcIik7XG4gICAgICAgIHJldHVybiByZXN1bHRbMF07XG4gICAgICB9XG4gICAgICAvKipcbiAgICAgICAqIERlbGV0ZXMgZmVhdHVyZS5cbiAgICAgICAqIEBwYXJhbSBpZFxuICAgICAgICovXG4gICAgICBhc3luYyBkZWxldGVGZWF0dXJlKGlkKSB7XG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGRiUGVyZm9ybWFuY2VNb25pdG9yLnRyYWNrUXVlcnkoXCJkZWxldGVGZWF0dXJlXCIsIGFzeW5jICgpID0+IHtcbiAgICAgICAgICByZXR1cm4gZGIuZGVsZXRlKGZlYXR1cmVzKS53aGVyZShlcShmZWF0dXJlcy5pZCwgaWQpKS5yZXR1cm5pbmcoKTtcbiAgICAgICAgfSk7XG4gICAgICAgIHF1ZXJ5Q2FjaGUuaW52YWxpZGF0ZShcImZlYXR1cmVzXCIpO1xuICAgICAgICByZXR1cm4gcmVzdWx0Lmxlbmd0aCA+IDA7XG4gICAgICB9XG4gICAgICAvLyBBY3Rpb25hYmxlIEl0ZW1zIG9wZXJhdGlvbnNcbiAgICAgIC8qKlxuICAgICAgICogR2V0cyBhY3Rpb25hYmxlIGl0ZW1zIGJ5IGZlYXR1cmUuXG4gICAgICAgKiBAcGFyYW0gZmVhdHVyZUlkXG4gICAgICAgKi9cbiAgICAgIGFzeW5jIGdldEFjdGlvbmFibGVJdGVtc0J5RmVhdHVyZShmZWF0dXJlSWQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMud2l0aE9wdGltaXphdGlvbnMoXG4gICAgICAgICAgXCJnZXRBY3Rpb25hYmxlSXRlbXNCeUZlYXR1cmVcIixcbiAgICAgICAgICBgYWN0aW9uYWJsZV9pdGVtczoke2ZlYXR1cmVJZH1gLFxuICAgICAgICAgIFwiYWN0aW9uYWJsZV9pdGVtc1wiLFxuICAgICAgICAgICgpID0+IGRiLnNlbGVjdCgpLmZyb20oYWN0aW9uYWJsZUl0ZW1zKS53aGVyZShlcShhY3Rpb25hYmxlSXRlbXMuZmVhdHVyZUlkLCBmZWF0dXJlSWQpKVxuICAgICAgICApO1xuICAgICAgfVxuICAgICAgLyoqXG4gICAgICAgKiBHZXRzIGFjdGlvbmFibGUgaXRlbSBieSBJRC5cbiAgICAgICAqIEBwYXJhbSBpZFxuICAgICAgICovXG4gICAgICBhc3luYyBnZXRBY3Rpb25hYmxlSXRlbShpZCkge1xuICAgICAgICByZXR1cm4gdGhpcy53aXRoT3B0aW1pemF0aW9ucyhcbiAgICAgICAgICBcImdldEFjdGlvbmFibGVJdGVtXCIsXG4gICAgICAgICAgYGFjdGlvbmFibGVfaXRlbToke2lkfWAsXG4gICAgICAgICAgXCJhY3Rpb25hYmxlX2l0ZW1zXCIsXG4gICAgICAgICAgYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgZGIuc2VsZWN0KCkuZnJvbShhY3Rpb25hYmxlSXRlbXMpLndoZXJlKGVxKGFjdGlvbmFibGVJdGVtcy5pZCwgaWQpKTtcbiAgICAgICAgICAgIHJldHVybiByZXN1bHRbMF07XG4gICAgICAgICAgfVxuICAgICAgICApO1xuICAgICAgfVxuICAgICAgLyoqXG4gICAgICAgKiBDcmVhdGVzIGFjdGlvbmFibGUgaXRlbS5cbiAgICAgICAqIEBwYXJhbSBpdGVtXG4gICAgICAgKi9cbiAgICAgIGFzeW5jIGNyZWF0ZUFjdGlvbmFibGVJdGVtKGl0ZW0pIHtcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgZGJQZXJmb3JtYW5jZU1vbml0b3IudHJhY2tRdWVyeShcImNyZWF0ZUFjdGlvbmFibGVJdGVtXCIsIGFzeW5jICgpID0+IHtcbiAgICAgICAgICByZXR1cm4gZGIuaW5zZXJ0KGFjdGlvbmFibGVJdGVtcykudmFsdWVzKFtpdGVtXSkucmV0dXJuaW5nKCk7XG4gICAgICAgIH0pO1xuICAgICAgICBxdWVyeUNhY2hlLmludmFsaWRhdGUoXCJhY3Rpb25hYmxlX2l0ZW1zXCIpO1xuICAgICAgICByZXR1cm4gcmVzdWx0WzBdO1xuICAgICAgfVxuICAgICAgLyoqXG4gICAgICAgKiBDcmVhdGVzIG11bHRpcGxlIGFjdGlvbmFibGUgaXRlbXMuXG4gICAgICAgKiBAcGFyYW0gaXRlbXNcbiAgICAgICAqL1xuICAgICAgYXN5bmMgY3JlYXRlQWN0aW9uYWJsZUl0ZW1zKGl0ZW1zKSB7XG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGRiUGVyZm9ybWFuY2VNb25pdG9yLnRyYWNrUXVlcnkoXCJjcmVhdGVBY3Rpb25hYmxlSXRlbXNcIiwgYXN5bmMgKCkgPT4ge1xuICAgICAgICAgIHJldHVybiBkYi5pbnNlcnQoYWN0aW9uYWJsZUl0ZW1zKS52YWx1ZXMoaXRlbXMpLnJldHVybmluZygpO1xuICAgICAgICB9KTtcbiAgICAgICAgcXVlcnlDYWNoZS5pbnZhbGlkYXRlKFwiYWN0aW9uYWJsZV9pdGVtc1wiKTtcbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICAgIH1cbiAgICAgIC8qKlxuICAgICAgICogVXBkYXRlcyBhY3Rpb25hYmxlIGl0ZW0uXG4gICAgICAgKiBAcGFyYW0gaWRcbiAgICAgICAqIEBwYXJhbSB1cGRhdGVzXG4gICAgICAgKi9cbiAgICAgIGFzeW5jIHVwZGF0ZUFjdGlvbmFibGVJdGVtKGlkLCB1cGRhdGVzKSB7XG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGRiUGVyZm9ybWFuY2VNb25pdG9yLnRyYWNrUXVlcnkoXCJ1cGRhdGVBY3Rpb25hYmxlSXRlbVwiLCBhc3luYyAoKSA9PiB7XG4gICAgICAgICAgcmV0dXJuIGRiLnVwZGF0ZShhY3Rpb25hYmxlSXRlbXMpLnNldCh1cGRhdGVzKS53aGVyZShlcShhY3Rpb25hYmxlSXRlbXMuaWQsIGlkKSkucmV0dXJuaW5nKCk7XG4gICAgICAgIH0pO1xuICAgICAgICBxdWVyeUNhY2hlLmludmFsaWRhdGUoXCJhY3Rpb25hYmxlX2l0ZW1zXCIpO1xuICAgICAgICByZXR1cm4gcmVzdWx0WzBdO1xuICAgICAgfVxuICAgICAgLyoqXG4gICAgICAgKiBEZWxldGVzIGFjdGlvbmFibGUgaXRlbS5cbiAgICAgICAqIEBwYXJhbSBpZFxuICAgICAgICovXG4gICAgICBhc3luYyBkZWxldGVBY3Rpb25hYmxlSXRlbShpZCkge1xuICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBkYlBlcmZvcm1hbmNlTW9uaXRvci50cmFja1F1ZXJ5KFwiZGVsZXRlQWN0aW9uYWJsZUl0ZW1cIiwgYXN5bmMgKCkgPT4ge1xuICAgICAgICAgIHJldHVybiBkYi5kZWxldGUoYWN0aW9uYWJsZUl0ZW1zKS53aGVyZShlcShhY3Rpb25hYmxlSXRlbXMuaWQsIGlkKSkucmV0dXJuaW5nKCk7XG4gICAgICAgIH0pO1xuICAgICAgICBxdWVyeUNhY2hlLmludmFsaWRhdGUoXCJhY3Rpb25hYmxlX2l0ZW1zXCIpO1xuICAgICAgICByZXR1cm4gcmVzdWx0Lmxlbmd0aCA+IDA7XG4gICAgICB9XG4gICAgICAvKipcbiAgICAgICAqIERlbGV0ZXMgYWN0aW9uYWJsZSBpdGVtcyBieSBmZWF0dXJlLlxuICAgICAgICogQHBhcmFtIGZlYXR1cmVJZFxuICAgICAgICovXG4gICAgICBhc3luYyBkZWxldGVBY3Rpb25hYmxlSXRlbXNCeUZlYXR1cmUoZmVhdHVyZUlkKSB7XG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGRiUGVyZm9ybWFuY2VNb25pdG9yLnRyYWNrUXVlcnkoXG4gICAgICAgICAgXCJkZWxldGVBY3Rpb25hYmxlSXRlbXNCeUZlYXR1cmVcIixcbiAgICAgICAgICBhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICByZXR1cm4gZGIuZGVsZXRlKGFjdGlvbmFibGVJdGVtcykud2hlcmUoZXEoYWN0aW9uYWJsZUl0ZW1zLmZlYXR1cmVJZCwgZmVhdHVyZUlkKSkucmV0dXJuaW5nKCk7XG4gICAgICAgICAgfVxuICAgICAgICApO1xuICAgICAgICBxdWVyeUNhY2hlLmludmFsaWRhdGUoXCJhY3Rpb25hYmxlX2l0ZW1zXCIpO1xuICAgICAgICByZXR1cm4gcmVzdWx0Lmxlbmd0aCA+IDA7XG4gICAgICB9XG4gICAgICAvLyBJbnZpdGF0aW9uIG9wZXJhdGlvbnNcbiAgICAgIC8qKlxuICAgICAgICogR2V0cyBhbGwgaW52aXRhdGlvbnMuXG4gICAgICAgKi9cbiAgICAgIGFzeW5jIGdldEludml0YXRpb25zKCkge1xuICAgICAgICByZXR1cm4gdGhpcy53aXRoT3B0aW1pemF0aW9ucyhcbiAgICAgICAgICBcImdldEludml0YXRpb25zXCIsXG4gICAgICAgICAgXCJhbGxfaW52aXRhdGlvbnNcIixcbiAgICAgICAgICBcImludml0YXRpb25zXCIsXG4gICAgICAgICAgKCkgPT4gZGIuc2VsZWN0KCkuZnJvbShpbnZpdGF0aW9ucylcbiAgICAgICAgKTtcbiAgICAgIH1cbiAgICAgIC8qKlxuICAgICAgICogR2V0cyBpbnZpdGF0aW9uIGJ5IElELlxuICAgICAgICogQHBhcmFtIGlkXG4gICAgICAgKi9cbiAgICAgIGFzeW5jIGdldEludml0YXRpb24oaWQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMud2l0aE9wdGltaXphdGlvbnMoXCJnZXRJbnZpdGF0aW9uXCIsIGBpbnZpdGF0aW9uOiR7aWR9YCwgXCJpbnZpdGF0aW9uc1wiLCBhc3luYyAoKSA9PiB7XG4gICAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgZGIuc2VsZWN0KCkuZnJvbShpbnZpdGF0aW9ucykud2hlcmUoZXEoaW52aXRhdGlvbnMuaWQsIGlkKSk7XG4gICAgICAgICAgcmV0dXJuIHJlc3VsdFswXTtcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgICAvKipcbiAgICAgICAqIEdldHMgaW52aXRhdGlvbiBieSB0b2tlbi5cbiAgICAgICAqIEBwYXJhbSB0b2tlblxuICAgICAgICovXG4gICAgICBhc3luYyBnZXRJbnZpdGF0aW9uQnlUb2tlbih0b2tlbikge1xuICAgICAgICByZXR1cm4gdGhpcy53aXRoT3B0aW1pemF0aW9ucyhcbiAgICAgICAgICBcImdldEludml0YXRpb25CeVRva2VuXCIsXG4gICAgICAgICAgYGludml0YXRpb25fdG9rZW46JHt0b2tlbn1gLFxuICAgICAgICAgIFwiaW52aXRhdGlvbnNcIixcbiAgICAgICAgICBhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBkYi5zZWxlY3QoKS5mcm9tKGludml0YXRpb25zKS53aGVyZShlcShpbnZpdGF0aW9ucy50b2tlbiwgdG9rZW4pKTtcbiAgICAgICAgICAgIHJldHVybiByZXN1bHRbMF07XG4gICAgICAgICAgfVxuICAgICAgICApO1xuICAgICAgfVxuICAgICAgLyoqXG4gICAgICAgKiBHZXRzIGludml0YXRpb25zIGJ5IGVtYWlsLlxuICAgICAgICogQHBhcmFtIGVtYWlsXG4gICAgICAgKi9cbiAgICAgIGFzeW5jIGdldEludml0YXRpb25zQnlFbWFpbChlbWFpbCkge1xuICAgICAgICByZXR1cm4gdGhpcy53aXRoT3B0aW1pemF0aW9ucyhcbiAgICAgICAgICBcImdldEludml0YXRpb25zQnlFbWFpbFwiLFxuICAgICAgICAgIGBpbnZpdGF0aW9uc19lbWFpbDoke2VtYWlsfWAsXG4gICAgICAgICAgXCJpbnZpdGF0aW9uc1wiLFxuICAgICAgICAgICgpID0+IGRiLnNlbGVjdCgpLmZyb20oaW52aXRhdGlvbnMpLndoZXJlKGVxKGludml0YXRpb25zLmVtYWlsLCBlbWFpbCkpXG4gICAgICAgICk7XG4gICAgICB9XG4gICAgICAvKipcbiAgICAgICAqIEdldHMgaW52aXRhdGlvbnMgYnkgaW52aXRlci5cbiAgICAgICAqIEBwYXJhbSB1c2VySWRcbiAgICAgICAqL1xuICAgICAgYXN5bmMgZ2V0SW52aXRhdGlvbnNCeUludml0ZXIodXNlcklkKSB7XG4gICAgICAgIHJldHVybiB0aGlzLndpdGhPcHRpbWl6YXRpb25zKFxuICAgICAgICAgIFwiZ2V0SW52aXRhdGlvbnNCeUludml0ZXJcIixcbiAgICAgICAgICBgaW52aXRhdGlvbnNfaW52aXRlcjoke3VzZXJJZH1gLFxuICAgICAgICAgIFwiaW52aXRhdGlvbnNcIixcbiAgICAgICAgICAoKSA9PiBkYi5zZWxlY3QoKS5mcm9tKGludml0YXRpb25zKS53aGVyZShlcShpbnZpdGF0aW9ucy5pbnZpdGVkQnlVc2VySWQsIHVzZXJJZCkpXG4gICAgICAgICk7XG4gICAgICB9XG4gICAgICAvKipcbiAgICAgICAqIEdldHMgaW52aXRhdGlvbnMgYnkgc3RhdHVzLlxuICAgICAgICogQHBhcmFtIHN0YXR1c1xuICAgICAgICovXG4gICAgICBhc3luYyBnZXRJbnZpdGF0aW9uc0J5U3RhdHVzKHN0YXR1cykge1xuICAgICAgICByZXR1cm4gdGhpcy53aXRoT3B0aW1pemF0aW9ucyhcbiAgICAgICAgICBcImdldEludml0YXRpb25zQnlTdGF0dXNcIixcbiAgICAgICAgICBgaW52aXRhdGlvbnNfc3RhdHVzOiR7c3RhdHVzfWAsXG4gICAgICAgICAgXCJpbnZpdGF0aW9uc1wiLFxuICAgICAgICAgICgpID0+IGRiLnNlbGVjdCgpLmZyb20oaW52aXRhdGlvbnMpLndoZXJlKGVxKGludml0YXRpb25zLnN0YXR1cywgc3RhdHVzKSlcbiAgICAgICAgKTtcbiAgICAgIH1cbiAgICAgIC8qKlxuICAgICAgICogQ3JlYXRlcyBpbnZpdGF0aW9uLlxuICAgICAgICogQHBhcmFtIGludml0YXRpb25cbiAgICAgICAqL1xuICAgICAgYXN5bmMgY3JlYXRlSW52aXRhdGlvbihpbnZpdGF0aW9uKSB7XG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGRiUGVyZm9ybWFuY2VNb25pdG9yLnRyYWNrUXVlcnkoXCJjcmVhdGVJbnZpdGF0aW9uXCIsIGFzeW5jICgpID0+IHtcbiAgICAgICAgICByZXR1cm4gZGIuaW5zZXJ0KGludml0YXRpb25zKS52YWx1ZXMoW2ludml0YXRpb25dKS5yZXR1cm5pbmcoKTtcbiAgICAgICAgfSk7XG4gICAgICAgIHF1ZXJ5Q2FjaGUuaW52YWxpZGF0ZShcImludml0YXRpb25zXCIpO1xuICAgICAgICByZXR1cm4gcmVzdWx0WzBdO1xuICAgICAgfVxuICAgICAgLyoqXG4gICAgICAgKiBVcGRhdGVzIGludml0YXRpb24uXG4gICAgICAgKiBAcGFyYW0gaWRcbiAgICAgICAqIEBwYXJhbSB1cGRhdGVzXG4gICAgICAgKi9cbiAgICAgIGFzeW5jIHVwZGF0ZUludml0YXRpb24oaWQsIHVwZGF0ZXMpIHtcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgZGJQZXJmb3JtYW5jZU1vbml0b3IudHJhY2tRdWVyeShcInVwZGF0ZUludml0YXRpb25cIiwgYXN5bmMgKCkgPT4ge1xuICAgICAgICAgIHJldHVybiBkYi51cGRhdGUoaW52aXRhdGlvbnMpLnNldCh1cGRhdGVzKS53aGVyZShlcShpbnZpdGF0aW9ucy5pZCwgaWQpKS5yZXR1cm5pbmcoKTtcbiAgICAgICAgfSk7XG4gICAgICAgIHF1ZXJ5Q2FjaGUuaW52YWxpZGF0ZShcImludml0YXRpb25zXCIpO1xuICAgICAgICByZXR1cm4gcmVzdWx0WzBdO1xuICAgICAgfVxuICAgICAgLyoqXG4gICAgICAgKiBBY2NlcHRzIGludml0YXRpb24uXG4gICAgICAgKiBAcGFyYW0gdG9rZW5cbiAgICAgICAqIEBwYXJhbSB1c2VyRGF0YVxuICAgICAgICogQHBhcmFtIHVzZXJEYXRhLmZpcnN0TmFtZVxuICAgICAgICogQHBhcmFtIGlwQWRkcmVzc1xuICAgICAgICogQHBhcmFtIHVzZXJEYXRhLmxhc3ROYW1lXG4gICAgICAgKiBAcGFyYW0gdXNlckFnZW50XG4gICAgICAgKiBAcGFyYW0gdXNlckRhdGEucGFzc3dvcmRcbiAgICAgICAqL1xuICAgICAgYXN5bmMgYWNjZXB0SW52aXRhdGlvbih0b2tlbiwgdXNlckRhdGEsIGlwQWRkcmVzcywgdXNlckFnZW50KSB7XG4gICAgICAgIHJldHVybiBkYlBlcmZvcm1hbmNlTW9uaXRvci50cmFja1F1ZXJ5KFwiYWNjZXB0SW52aXRhdGlvblwiLCBhc3luYyAoKSA9PiB7XG4gICAgICAgICAgY29uc3QgaW52aXRhdGlvbiA9IGF3YWl0IHRoaXMuZ2V0SW52aXRhdGlvbkJ5VG9rZW4odG9rZW4pO1xuICAgICAgICAgIGlmICghaW52aXRhdGlvbiB8fCBpbnZpdGF0aW9uLnN0YXR1cyAhPT0gXCJwZW5kaW5nXCIpIHtcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICAgIH1cbiAgICAgICAgICBjb25zdCB1c2VyID0gYXdhaXQgdGhpcy5jcmVhdGVVc2VyKHtcbiAgICAgICAgICAgIHVzZXJuYW1lOiBpbnZpdGF0aW9uLmVtYWlsLnNwbGl0KFwiQFwiKVswXSxcbiAgICAgICAgICAgIC8vIFVzZSBlbWFpbCBwcmVmaXggYXMgdXNlcm5hbWVcbiAgICAgICAgICAgIGVtYWlsOiBpbnZpdGF0aW9uLmVtYWlsLFxuICAgICAgICAgICAgZmlyc3ROYW1lOiB1c2VyRGF0YS5maXJzdE5hbWUsXG4gICAgICAgICAgICBsYXN0TmFtZTogdXNlckRhdGEubGFzdE5hbWUsXG4gICAgICAgICAgICBwYXNzd29yZDogdXNlckRhdGEucGFzc3dvcmQsXG4gICAgICAgICAgICAvLyBUaGlzIHNob3VsZCBiZSBoYXNoZWRcbiAgICAgICAgICAgIGxhbmd1YWdlOiBcImVuXCIsXG4gICAgICAgICAgICAvLyBEZWZhdWx0IGxhbmd1YWdlXG4gICAgICAgICAgICByb2xlOiBpbnZpdGF0aW9uLnJvbGVcbiAgICAgICAgICB9KTtcbiAgICAgICAgICBjb25zdCB1cGRhdGVkSW52aXRhdGlvbiA9IGF3YWl0IHRoaXMudXBkYXRlSW52aXRhdGlvbihpbnZpdGF0aW9uLmlkLCB7XG4gICAgICAgICAgICBzdGF0dXM6IFwiYWNjZXB0ZWRcIixcbiAgICAgICAgICAgIGFjY2VwdGVkQXQ6IC8qIEBfX1BVUkVfXyAqLyBuZXcgRGF0ZSgpXG4gICAgICAgICAgfSk7XG4gICAgICAgICAgcmV0dXJuIHsgdXNlciwgaW52aXRhdGlvbjogdXBkYXRlZEludml0YXRpb24gfTtcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgICAvKipcbiAgICAgICAqIENhbmNlbHMgaW52aXRhdGlvbi5cbiAgICAgICAqIEBwYXJhbSBpZFxuICAgICAgICogQHBhcmFtIGNhbmNlbGxlZEJ5XG4gICAgICAgKi9cbiAgICAgIGFzeW5jIGNhbmNlbEludml0YXRpb24oaWQsIGNhbmNlbGxlZEJ5KSB7XG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGRiUGVyZm9ybWFuY2VNb25pdG9yLnRyYWNrUXVlcnkoXCJjYW5jZWxJbnZpdGF0aW9uXCIsIGFzeW5jICgpID0+IHtcbiAgICAgICAgICByZXR1cm4gZGIudXBkYXRlKGludml0YXRpb25zKS5zZXQoe1xuICAgICAgICAgICAgc3RhdHVzOiBcImNhbmNlbGxlZFwiLFxuICAgICAgICAgICAgY2FuY2VsbGVkQnksXG4gICAgICAgICAgICBjYW5jZWxsZWRBdDogLyogQF9fUFVSRV9fICovIG5ldyBEYXRlKCksXG4gICAgICAgICAgICB1cGRhdGVkQXQ6IC8qIEBfX1BVUkVfXyAqLyBuZXcgRGF0ZSgpXG4gICAgICAgICAgfSkud2hlcmUoZXEoaW52aXRhdGlvbnMuaWQsIGlkKSkucmV0dXJuaW5nKCk7XG4gICAgICAgIH0pO1xuICAgICAgICBxdWVyeUNhY2hlLmludmFsaWRhdGUoXCJpbnZpdGF0aW9uc1wiKTtcbiAgICAgICAgcmV0dXJuIHJlc3VsdFswXTtcbiAgICAgIH1cbiAgICAgIC8qKlxuICAgICAgICogRXhwaXJlcyBvbGQgaW52aXRhdGlvbnMuXG4gICAgICAgKi9cbiAgICAgIGFzeW5jIGV4cGlyZUludml0YXRpb25zKCkge1xuICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBkYlBlcmZvcm1hbmNlTW9uaXRvci50cmFja1F1ZXJ5KFwiZXhwaXJlSW52aXRhdGlvbnNcIiwgYXN5bmMgKCkgPT4ge1xuICAgICAgICAgIHJldHVybiBkYi51cGRhdGUoaW52aXRhdGlvbnMpLnNldCh7IHN0YXR1czogXCJleHBpcmVkXCIsIHVwZGF0ZWRBdDogLyogQF9fUFVSRV9fICovIG5ldyBEYXRlKCkgfSkud2hlcmUoXG4gICAgICAgICAgICBhbmQoXG4gICAgICAgICAgICAgIGVxKGludml0YXRpb25zLnN0YXR1cywgXCJwZW5kaW5nXCIpLFxuICAgICAgICAgICAgICBsdGUoaW52aXRhdGlvbnMuZXhwaXJlc0F0LCAvKiBAX19QVVJFX18gKi8gbmV3IERhdGUoKSlcbiAgICAgICAgICAgIClcbiAgICAgICAgICApLnJldHVybmluZygpO1xuICAgICAgICB9KTtcbiAgICAgICAgcXVlcnlDYWNoZS5pbnZhbGlkYXRlKFwiaW52aXRhdGlvbnNcIik7XG4gICAgICAgIHJldHVybiByZXN1bHQubGVuZ3RoO1xuICAgICAgfVxuICAgICAgLyoqXG4gICAgICAgKiBEZWxldGVzIGludml0YXRpb24uXG4gICAgICAgKiBAcGFyYW0gaWRcbiAgICAgICAqL1xuICAgICAgYXN5bmMgZGVsZXRlSW52aXRhdGlvbihpZCkge1xuICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBkYlBlcmZvcm1hbmNlTW9uaXRvci50cmFja1F1ZXJ5KFwiZGVsZXRlSW52aXRhdGlvblwiLCBhc3luYyAoKSA9PiB7XG4gICAgICAgICAgcmV0dXJuIGRiLmRlbGV0ZShpbnZpdGF0aW9ucykud2hlcmUoZXEoaW52aXRhdGlvbnMuaWQsIGlkKSkucmV0dXJuaW5nKCk7XG4gICAgICAgIH0pO1xuICAgICAgICBxdWVyeUNhY2hlLmludmFsaWRhdGUoXCJpbnZpdGF0aW9uc1wiKTtcbiAgICAgICAgcmV0dXJuIHJlc3VsdC5sZW5ndGggPiAwO1xuICAgICAgfVxuICAgICAgLy8gSW52aXRhdGlvbiBBdWRpdCBMb2cgb3BlcmF0aW9uc1xuICAgICAgLyoqXG4gICAgICAgKiBHZXRzIGludml0YXRpb24gYXVkaXQgbG9ncy5cbiAgICAgICAqIEBwYXJhbSBpbnZpdGF0aW9uSWRcbiAgICAgICAqL1xuICAgICAgYXN5bmMgZ2V0SW52aXRhdGlvbkF1ZGl0TG9ncyhpbnZpdGF0aW9uSWQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMud2l0aE9wdGltaXphdGlvbnMoXG4gICAgICAgICAgXCJnZXRJbnZpdGF0aW9uQXVkaXRMb2dzXCIsXG4gICAgICAgICAgYGludml0YXRpb25fbG9nczoke2ludml0YXRpb25JZH1gLFxuICAgICAgICAgIFwiaW52aXRhdGlvbl9sb2dzXCIsXG4gICAgICAgICAgKCkgPT4gZGIuc2VsZWN0KCkuZnJvbShpbnZpdGF0aW9uQXVkaXRMb2cpLndoZXJlKGVxKGludml0YXRpb25BdWRpdExvZy5pbnZpdGF0aW9uSWQsIGludml0YXRpb25JZCkpLm9yZGVyQnkoZGVzYyhpbnZpdGF0aW9uQXVkaXRMb2cuY3JlYXRlZEF0KSlcbiAgICAgICAgKTtcbiAgICAgIH1cbiAgICAgIC8qKlxuICAgICAgICogQ3JlYXRlcyBpbnZpdGF0aW9uIGF1ZGl0IGxvZy5cbiAgICAgICAqIEBwYXJhbSBsb2dFbnRyeVxuICAgICAgICovXG4gICAgICBhc3luYyBjcmVhdGVJbnZpdGF0aW9uQXVkaXRMb2cobG9nRW50cnkpIHtcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgZGJQZXJmb3JtYW5jZU1vbml0b3IudHJhY2tRdWVyeShcImNyZWF0ZUludml0YXRpb25BdWRpdExvZ1wiLCBhc3luYyAoKSA9PiB7XG4gICAgICAgICAgcmV0dXJuIGRiLmluc2VydChpbnZpdGF0aW9uQXVkaXRMb2cpLnZhbHVlcyhsb2dFbnRyeSkucmV0dXJuaW5nKCk7XG4gICAgICAgIH0pO1xuICAgICAgICBxdWVyeUNhY2hlLmludmFsaWRhdGUoXCJpbnZpdGF0aW9uX2xvZ3NcIik7XG4gICAgICAgIHJldHVybiByZXN1bHRbMF07XG4gICAgICB9XG4gICAgICAvLyBQZXJtaXNzaW9uIG9wZXJhdGlvbnNcbiAgICAgIC8qKlxuICAgICAgICogR2V0cyBhbGwgcGVybWlzc2lvbnMuXG4gICAgICAgKi9cbiAgICAgIGFzeW5jIGdldFBlcm1pc3Npb25zKCkge1xuICAgICAgICByZXR1cm4gdGhpcy53aXRoT3B0aW1pemF0aW9ucyhcbiAgICAgICAgICBcImdldFBlcm1pc3Npb25zXCIsXG4gICAgICAgICAgXCJwZXJtaXNzaW9uczphbGxcIixcbiAgICAgICAgICBcInBlcm1pc3Npb25zXCIsXG4gICAgICAgICAgKCkgPT4gZGIuc2VsZWN0KCkuZnJvbShwZXJtaXNzaW9ucykud2hlcmUoZXEocGVybWlzc2lvbnMuaXNBY3RpdmUsIHRydWUpKS5vcmRlckJ5KHBlcm1pc3Npb25zLnJlc291cmNlVHlwZSwgcGVybWlzc2lvbnMuYWN0aW9uKVxuICAgICAgICApO1xuICAgICAgfVxuICAgICAgLyoqXG4gICAgICAgKiBHZXRzIGFsbCByb2xlIHBlcm1pc3Npb25zLlxuICAgICAgICovXG4gICAgICBhc3luYyBnZXRSb2xlUGVybWlzc2lvbnMoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLndpdGhPcHRpbWl6YXRpb25zKFxuICAgICAgICAgIFwiZ2V0Um9sZVBlcm1pc3Npb25zXCIsXG4gICAgICAgICAgXCJyb2xlX3Blcm1pc3Npb25zOmFsbFwiLFxuICAgICAgICAgIFwicm9sZV9wZXJtaXNzaW9uc1wiLFxuICAgICAgICAgICgpID0+IGRiLnNlbGVjdCgpLmZyb20ocm9sZVBlcm1pc3Npb25zKS5pbm5lckpvaW4oXG4gICAgICAgICAgICBwZXJtaXNzaW9ucyxcbiAgICAgICAgICAgIGVxKHJvbGVQZXJtaXNzaW9ucy5wZXJtaXNzaW9uSWQsIHBlcm1pc3Npb25zLmlkKVxuICAgICAgICAgICkud2hlcmUoZXEocGVybWlzc2lvbnMuaXNBY3RpdmUsIHRydWUpKS5vcmRlckJ5KHJvbGVQZXJtaXNzaW9ucy5yb2xlLCBwZXJtaXNzaW9ucy5yZXNvdXJjZVR5cGUpXG4gICAgICAgICk7XG4gICAgICB9XG4gICAgICAvKipcbiAgICAgICAqIEdldHMgYWxsIHVzZXIgcGVybWlzc2lvbnMuXG4gICAgICAgKi9cbiAgICAgIGFzeW5jIGdldFVzZXJQZXJtaXNzaW9ucygpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICBjb25zdCByZXN1bHRzID0gYXdhaXQgZGIuc2VsZWN0KCkuZnJvbSh1c2VyUGVybWlzc2lvbnMpLmlubmVySm9pbihcbiAgICAgICAgICAgIHBlcm1pc3Npb25zLFxuICAgICAgICAgICAgZXEodXNlclBlcm1pc3Npb25zLnBlcm1pc3Npb25JZCwgcGVybWlzc2lvbnMuaWQpXG4gICAgICAgICAgKS53aGVyZShlcShwZXJtaXNzaW9ucy5pc0FjdGl2ZSwgdHJ1ZSkpLm9yZGVyQnkodXNlclBlcm1pc3Npb25zLnVzZXJJZCk7XG4gICAgICAgICAgcmV0dXJuIHJlc3VsdHMgfHwgW107XG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgY29uc29sZS5lcnJvcihcIlxcdTI3NEMgRXJyb3IgZ2V0dGluZyB1c2VyIHBlcm1pc3Npb25zOlwiLCBlcnJvcik7XG4gICAgICAgICAgcmV0dXJuIFtdO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICAvLyBPbGQgYnVpbGRpbmcgZG9jdW1lbnQgbWV0aG9kcyByZW1vdmVkIC0gdXNpbmcgdW5pZmllZCBkb2N1bWVudHMgdGFibGVcbiAgICAgIC8vIFVuaWZpZWQgRG9jdW1lbnQgb3BlcmF0aW9uc1xuICAgICAgYXN5bmMgZ2V0RG9jdW1lbnRzKGZpbHRlcnMpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMud2l0aE9wdGltaXphdGlvbnMoXG4gICAgICAgICAgXCJnZXREb2N1bWVudHNcIixcbiAgICAgICAgICBgZG9jdW1lbnRzOiR7SlNPTi5zdHJpbmdpZnkoZmlsdGVycyl9YCxcbiAgICAgICAgICBcImRvY3VtZW50c1wiLFxuICAgICAgICAgIGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgIGxldCBxdWVyeSA9IGRiLnNlbGVjdCgpLmZyb20oZG9jdW1lbnRzKTtcbiAgICAgICAgICAgIGNvbnN0IGNvbmRpdGlvbnMgPSBbXTtcbiAgICAgICAgICAgIGlmIChmaWx0ZXJzPy5idWlsZGluZ0lkKSB7XG4gICAgICAgICAgICAgIGNvbmRpdGlvbnMucHVzaChlcShkb2N1bWVudHMuYnVpbGRpbmdJZCwgZmlsdGVycy5idWlsZGluZ0lkKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoZmlsdGVycz8ucmVzaWRlbmNlSWQpIHtcbiAgICAgICAgICAgICAgY29uZGl0aW9ucy5wdXNoKGVxKGRvY3VtZW50cy5yZXNpZGVuY2VJZCwgZmlsdGVycy5yZXNpZGVuY2VJZCkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGZpbHRlcnM/LmRvY3VtZW50VHlwZSkge1xuICAgICAgICAgICAgICBjb25kaXRpb25zLnB1c2goZXEoZG9jdW1lbnRzLmRvY3VtZW50VHlwZSwgZmlsdGVycy5kb2N1bWVudFR5cGUpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChjb25kaXRpb25zLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgcXVlcnkgPSBxdWVyeS53aGVyZShhbmQoLi4uY29uZGl0aW9ucykpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgcXVlcnkub3JkZXJCeShkZXNjKGRvY3VtZW50cy5jcmVhdGVkQXQpKTtcbiAgICAgICAgICAgIHJldHVybiByZXN1bHQgfHwgW107XG4gICAgICAgICAgfVxuICAgICAgICApO1xuICAgICAgfVxuICAgICAgYXN5bmMgZ2V0RG9jdW1lbnQoaWQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMud2l0aE9wdGltaXphdGlvbnMoXCJnZXREb2N1bWVudFwiLCBgZG9jdW1lbnQ6JHtpZH1gLCBcImRvY3VtZW50c1wiLCBhc3luYyAoKSA9PiB7XG4gICAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgZGIuc2VsZWN0KCkuZnJvbShkb2N1bWVudHMpLndoZXJlKGVxKGRvY3VtZW50cy5pZCwgaWQpKS5saW1pdCgxKTtcbiAgICAgICAgICByZXR1cm4gcmVzdWx0WzBdO1xuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICAgIGFzeW5jIGNyZWF0ZURvY3VtZW50KGRvY3VtZW50KSB7XG4gICAgICAgIHJldHVybiBkYlBlcmZvcm1hbmNlTW9uaXRvci50cmFja1F1ZXJ5KFwiY3JlYXRlRG9jdW1lbnRcIiwgYXN5bmMgKCkgPT4ge1xuICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGRiLmluc2VydChkb2N1bWVudHMpLnZhbHVlcyhkb2N1bWVudCkucmV0dXJuaW5nKCk7XG4gICAgICAgICAgaWYgKGRvY3VtZW50LmJ1aWxkaW5nSWQpIHtcbiAgICAgICAgICAgIHF1ZXJ5Q2FjaGUuaW52YWxpZGF0ZShcImRvY3VtZW50c1wiLCBgKmJ1aWxkaW5nSWQqJHtkb2N1bWVudC5idWlsZGluZ0lkfSpgKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKGRvY3VtZW50LnJlc2lkZW5jZUlkKSB7XG4gICAgICAgICAgICBxdWVyeUNhY2hlLmludmFsaWRhdGUoXCJkb2N1bWVudHNcIiwgYCpyZXNpZGVuY2VJZCoke2RvY3VtZW50LnJlc2lkZW5jZUlkfSpgKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgcmV0dXJuIHJlc3VsdFswXTtcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgICBhc3luYyB1cGRhdGVEb2N1bWVudChpZCwgdXBkYXRlcykge1xuICAgICAgICByZXR1cm4gZGJQZXJmb3JtYW5jZU1vbml0b3IudHJhY2tRdWVyeShcInVwZGF0ZURvY3VtZW50XCIsIGFzeW5jICgpID0+IHtcbiAgICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBkYi51cGRhdGUoZG9jdW1lbnRzKS5zZXQoeyAuLi51cGRhdGVzLCB1cGRhdGVkQXQ6IC8qIEBfX1BVUkVfXyAqLyBuZXcgRGF0ZSgpIH0pLndoZXJlKGVxKGRvY3VtZW50cy5pZCwgaWQpKS5yZXR1cm5pbmcoKTtcbiAgICAgICAgICBpZiAocmVzdWx0WzBdKSB7XG4gICAgICAgICAgICBxdWVyeUNhY2hlLmludmFsaWRhdGUoXCJkb2N1bWVudHNcIiwgYGRvY3VtZW50OiR7aWR9YCk7XG4gICAgICAgICAgICBxdWVyeUNhY2hlLmludmFsaWRhdGUoXCJkb2N1bWVudHNcIiwgXCIqXCIpO1xuICAgICAgICAgIH1cbiAgICAgICAgICByZXR1cm4gcmVzdWx0WzBdO1xuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICAgIGFzeW5jIGRlbGV0ZURvY3VtZW50KGlkKSB7XG4gICAgICAgIHJldHVybiBkYlBlcmZvcm1hbmNlTW9uaXRvci50cmFja1F1ZXJ5KFwiZGVsZXRlRG9jdW1lbnRcIiwgYXN5bmMgKCkgPT4ge1xuICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGRiLmRlbGV0ZShkb2N1bWVudHMpLndoZXJlKGVxKGRvY3VtZW50cy5pZCwgaWQpKS5yZXR1cm5pbmcoeyBpZDogZG9jdW1lbnRzLmlkIH0pO1xuICAgICAgICAgIGlmIChyZXN1bHQubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgcXVlcnlDYWNoZS5pbnZhbGlkYXRlKFwiZG9jdW1lbnRzXCIsIGBkb2N1bWVudDoke2lkfWApO1xuICAgICAgICAgICAgcXVlcnlDYWNoZS5pbnZhbGlkYXRlKFwiZG9jdW1lbnRzXCIsIFwiKlwiKTtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgIH1cbiAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgICAgLy8gT2xkIHJlc2lkZW50IGRvY3VtZW50IG1ldGhvZHMgcmVtb3ZlZCAtIHVzaW5nIHVuaWZpZWQgZG9jdW1lbnRzIHRhYmxlXG4gICAgICAvLyBMZWdhY3kgRG9jdW1lbnQgb3BlcmF0aW9ucyAoa2VwdCBmb3IgbWlncmF0aW9uIHB1cnBvc2VzKVxuICAgICAgLyoqXG4gICAgICAgKiBHZXRzIGxlZ2FjeSBkb2N1bWVudHMgZm9yIHVzZXIuXG4gICAgICAgKiBAcGFyYW0gdXNlcklkXG4gICAgICAgKiBAcGFyYW0gdXNlclJvbGVcbiAgICAgICAqIEBwYXJhbSBvcmdhbml6YXRpb25JZFxuICAgICAgICogQHBhcmFtIHJlc2lkZW5jZUlkc1xuICAgICAgICovXG4gICAgICBhc3luYyBnZXREb2N1bWVudHNGb3JVc2VyKHVzZXJJZCwgdXNlclJvbGUsIG9yZ2FuaXphdGlvbklkLCByZXNpZGVuY2VJZHMpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMud2l0aE9wdGltaXphdGlvbnMoXG4gICAgICAgICAgXCJnZXREb2N1bWVudHNGb3JVc2VyXCIsXG4gICAgICAgICAgYGxlZ2FjeV9kb2NzOiR7dXNlcklkfToke3VzZXJSb2xlfWAsXG4gICAgICAgICAgXCJkb2N1bWVudHNcIixcbiAgICAgICAgICBhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICByZXR1cm4gYXdhaXQgZGIuc2VsZWN0KCkuZnJvbShkb2N1bWVudHMpLm9yZGVyQnkoZGVzYyhkb2N1bWVudHMuY3JlYXRlZEF0KSk7XG4gICAgICAgICAgfVxuICAgICAgICApO1xuICAgICAgfVxuICAgICAgLy8gUGFzc3dvcmQgcmVzZXQgb3BlcmF0aW9uc1xuICAgICAgLyoqXG4gICAgICAgKlxuICAgICAgICogQHBhcmFtIHRva2VuXG4gICAgICAgKi9cbiAgICAgIGFzeW5jIGNyZWF0ZVBhc3N3b3JkUmVzZXRUb2tlbih0b2tlbikge1xuICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBkYi5pbnNlcnQocGFzc3dvcmRSZXNldFRva2VucykudmFsdWVzKHRva2VuKS5yZXR1cm5pbmcoKTtcbiAgICAgICAgcmV0dXJuIHJlc3VsdFswXTtcbiAgICAgIH1cbiAgICAgIC8qKlxuICAgICAgICpcbiAgICAgICAqIEBwYXJhbSB0b2tlblZhbHVlXG4gICAgICAgKi9cbiAgICAgIGFzeW5jIGdldFBhc3N3b3JkUmVzZXRUb2tlbih0b2tlblZhbHVlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLndpdGhPcHRpbWl6YXRpb25zKFxuICAgICAgICAgIFwiZ2V0UGFzc3dvcmRSZXNldFRva2VuXCIsXG4gICAgICAgICAgYHRva2VuXyR7dG9rZW5WYWx1ZX1gLFxuICAgICAgICAgIFwicGFzc3dvcmRfcmVzZXRfdG9rZW5zXCIsXG4gICAgICAgICAgYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgZGIuc2VsZWN0KCkuZnJvbShwYXNzd29yZFJlc2V0VG9rZW5zKS53aGVyZShlcShwYXNzd29yZFJlc2V0VG9rZW5zLnRva2VuLCB0b2tlblZhbHVlKSkubGltaXQoMSk7XG4gICAgICAgICAgICByZXR1cm4gcmVzdWx0WzBdO1xuICAgICAgICAgIH1cbiAgICAgICAgKTtcbiAgICAgIH1cbiAgICAgIC8qKlxuICAgICAgICpcbiAgICAgICAqIEBwYXJhbSB0b2tlbklkXG4gICAgICAgKi9cbiAgICAgIGFzeW5jIG1hcmtQYXNzd29yZFJlc2V0VG9rZW5Bc1VzZWQodG9rZW5JZCkge1xuICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBkYi51cGRhdGUocGFzc3dvcmRSZXNldFRva2Vucykuc2V0KHtcbiAgICAgICAgICBpc1VzZWQ6IHRydWUsXG4gICAgICAgICAgdXNlZEF0OiAvKiBAX19QVVJFX18gKi8gbmV3IERhdGUoKVxuICAgICAgICB9KS53aGVyZShlcShwYXNzd29yZFJlc2V0VG9rZW5zLmlkLCB0b2tlbklkKSkucmV0dXJuaW5nKCk7XG4gICAgICAgIHJldHVybiByZXN1bHRbMF07XG4gICAgICB9XG4gICAgICAvKipcbiAgICAgICAqXG4gICAgICAgKi9cbiAgICAgIGFzeW5jIGNsZWFudXBFeHBpcmVkUGFzc3dvcmRSZXNldFRva2VucygpIHtcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgZGIuZGVsZXRlKHBhc3N3b3JkUmVzZXRUb2tlbnMpLndoZXJlKGx0ZShwYXNzd29yZFJlc2V0VG9rZW5zLmV4cGlyZXNBdCwgLyogQF9fUFVSRV9fICovIG5ldyBEYXRlKCkpKS5yZXR1cm5pbmcoKTtcbiAgICAgICAgcmV0dXJuIHJlc3VsdC5sZW5ndGg7XG4gICAgICB9XG4gICAgICAvLyBDb250YWN0IG9wZXJhdGlvbnNcbiAgICAgIC8qKlxuICAgICAgICogR2V0cyBhbGwgY29udGFjdHMuXG4gICAgICAgKi9cbiAgICAgIGFzeW5jIGdldENvbnRhY3RzKCkge1xuICAgICAgICByZXR1cm4gdGhpcy53aXRoT3B0aW1pemF0aW9ucyhcbiAgICAgICAgICBcImdldENvbnRhY3RzXCIsXG4gICAgICAgICAgXCJhbGxfY29udGFjdHNcIixcbiAgICAgICAgICBcImNvbnRhY3RzXCIsXG4gICAgICAgICAgKCkgPT4gZGIuc2VsZWN0KCkuZnJvbShjb250YWN0cykud2hlcmUoZXEoY29udGFjdHMuaXNBY3RpdmUsIHRydWUpKVxuICAgICAgICApO1xuICAgICAgfVxuICAgICAgLyoqXG4gICAgICAgKiBHZXRzIGNvbnRhY3RzIGJ5IGVudGl0eS5cbiAgICAgICAqIEBwYXJhbSBlbnRpdHlJZFxuICAgICAgICogQHBhcmFtIGVudGl0eVxuICAgICAgICovXG4gICAgICBhc3luYyBnZXRDb250YWN0c0J5RW50aXR5KGVudGl0eUlkLCBlbnRpdHkpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMud2l0aE9wdGltaXphdGlvbnMoXG4gICAgICAgICAgXCJnZXRDb250YWN0c0J5RW50aXR5XCIsXG4gICAgICAgICAgYGNvbnRhY3RzX2VudGl0eToke2VudGl0eX1fJHtlbnRpdHlJZH1gLFxuICAgICAgICAgIFwiY29udGFjdHNcIixcbiAgICAgICAgICAoKSA9PiBkYi5zZWxlY3QoKS5mcm9tKGNvbnRhY3RzKS53aGVyZShcbiAgICAgICAgICAgIGFuZChcbiAgICAgICAgICAgICAgZXEoY29udGFjdHMuZW50aXR5SWQsIGVudGl0eUlkKSxcbiAgICAgICAgICAgICAgZXEoY29udGFjdHMuZW50aXR5LCBlbnRpdHkpLFxuICAgICAgICAgICAgICBlcShjb250YWN0cy5pc0FjdGl2ZSwgdHJ1ZSlcbiAgICAgICAgICAgIClcbiAgICAgICAgICApXG4gICAgICAgICk7XG4gICAgICB9XG4gICAgICAvKipcbiAgICAgICAqIEdldHMgY29udGFjdHMgZm9yIHJlc2lkZW5jZSB3aXRoIHVzZXIgZGF0YS5cbiAgICAgICAqIEBwYXJhbSByZXNpZGVuY2VJZFxuICAgICAgICovXG4gICAgICBhc3luYyBnZXRDb250YWN0c0ZvclJlc2lkZW5jZShyZXNpZGVuY2VJZCkge1xuICAgICAgICByZXR1cm4gdGhpcy53aXRoT3B0aW1pemF0aW9ucyhcbiAgICAgICAgICBcImdldENvbnRhY3RzRm9yUmVzaWRlbmNlXCIsXG4gICAgICAgICAgYGNvbnRhY3RzX3Jlc2lkZW5jZToke3Jlc2lkZW5jZUlkfWAsXG4gICAgICAgICAgXCJjb250YWN0c1wiLFxuICAgICAgICAgICgpID0+IGRiLnNlbGVjdCgpLmZyb20oY29udGFjdHMpLmlubmVySm9pbih1c2VycywgZXEoY29udGFjdHMubmFtZSwgdXNlcnMuZW1haWwpKS53aGVyZShcbiAgICAgICAgICAgIGFuZChcbiAgICAgICAgICAgICAgZXEoY29udGFjdHMuZW50aXR5SWQsIHJlc2lkZW5jZUlkKSxcbiAgICAgICAgICAgICAgZXEoY29udGFjdHMuZW50aXR5LCBcInJlc2lkZW5jZVwiKSxcbiAgICAgICAgICAgICAgZXEoY29udGFjdHMuaXNBY3RpdmUsIHRydWUpXG4gICAgICAgICAgICApXG4gICAgICAgICAgKVxuICAgICAgICApO1xuICAgICAgfVxuICAgICAgLyoqXG4gICAgICAgKiBDcmVhdGVzIGEgbmV3IGNvbnRhY3QuXG4gICAgICAgKiBAcGFyYW0gY29udGFjdFxuICAgICAgICovXG4gICAgICBhc3luYyBjcmVhdGVDb250YWN0KGNvbnRhY3QpIHtcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgZGJQZXJmb3JtYW5jZU1vbml0b3IudHJhY2tRdWVyeShcImNyZWF0ZUNvbnRhY3RcIiwgYXN5bmMgKCkgPT4ge1xuICAgICAgICAgIHJldHVybiBkYi5pbnNlcnQoY29udGFjdHMpLnZhbHVlcyhjb250YWN0KS5yZXR1cm5pbmcoKTtcbiAgICAgICAgfSk7XG4gICAgICAgIHF1ZXJ5Q2FjaGUuaW52YWxpZGF0ZShcImNvbnRhY3RzXCIpO1xuICAgICAgICByZXR1cm4gcmVzdWx0WzBdO1xuICAgICAgfVxuICAgICAgLyoqXG4gICAgICAgKiBVcGRhdGVzIGEgY29udGFjdC5cbiAgICAgICAqIEBwYXJhbSBpZFxuICAgICAgICogQHBhcmFtIHVwZGF0ZXNcbiAgICAgICAqL1xuICAgICAgYXN5bmMgdXBkYXRlQ29udGFjdChpZCwgdXBkYXRlcykge1xuICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBkYlBlcmZvcm1hbmNlTW9uaXRvci50cmFja1F1ZXJ5KFwidXBkYXRlQ29udGFjdFwiLCBhc3luYyAoKSA9PiB7XG4gICAgICAgICAgcmV0dXJuIGRiLnVwZGF0ZShjb250YWN0cykuc2V0KHVwZGF0ZXMpLndoZXJlKGVxKGNvbnRhY3RzLmlkLCBpZCkpLnJldHVybmluZygpO1xuICAgICAgICB9KTtcbiAgICAgICAgcXVlcnlDYWNoZS5pbnZhbGlkYXRlKFwiY29udGFjdHNcIik7XG4gICAgICAgIHJldHVybiByZXN1bHRbMF07XG4gICAgICB9XG4gICAgICAvKipcbiAgICAgICAqIERlbGV0ZXMgYSBjb250YWN0LlxuICAgICAgICogQHBhcmFtIGlkXG4gICAgICAgKi9cbiAgICAgIGFzeW5jIGRlbGV0ZUNvbnRhY3QoaWQpIHtcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgZGJQZXJmb3JtYW5jZU1vbml0b3IudHJhY2tRdWVyeShcImRlbGV0ZUNvbnRhY3RcIiwgYXN5bmMgKCkgPT4ge1xuICAgICAgICAgIHJldHVybiBkYi51cGRhdGUoY29udGFjdHMpLnNldCh7IGlzQWN0aXZlOiBmYWxzZSB9KS53aGVyZShlcShjb250YWN0cy5pZCwgaWQpKS5yZXR1cm5pbmcoKTtcbiAgICAgICAgfSk7XG4gICAgICAgIHF1ZXJ5Q2FjaGUuaW52YWxpZGF0ZShcImNvbnRhY3RzXCIpO1xuICAgICAgICByZXR1cm4gcmVzdWx0Lmxlbmd0aCA+IDA7XG4gICAgICB9XG4gICAgICAvKipcbiAgICAgICAqIEdldHMgZGVtYW5kcyBmb3IgYSB1c2VyLlxuICAgICAgICogQHBhcmFtIHVzZXJJZFxuICAgICAgICovXG4gICAgICBhc3luYyBnZXREZW1hbmRzRm9yVXNlcih1c2VySWQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMud2l0aE9wdGltaXphdGlvbnMoXG4gICAgICAgICAgXCJnZXREZW1hbmRzRm9yVXNlclwiLFxuICAgICAgICAgIGBkZW1hbmRzX3VzZXI6JHt1c2VySWR9YCxcbiAgICAgICAgICBcImRlbWFuZHNcIixcbiAgICAgICAgICAoKSA9PiBkYi5zZWxlY3QoKS5mcm9tKGRlbWFuZHMpLndoZXJlKGVxKGRlbWFuZHMudXNlcklkLCB1c2VySWQpKVxuICAgICAgICApO1xuICAgICAgfVxuICAgICAgLyoqXG4gICAgICAgKiBHZXRzIGEgc3BlY2lmaWMgZGVtYW5kLlxuICAgICAgICogQHBhcmFtIGlkXG4gICAgICAgKi9cbiAgICAgIGFzeW5jIGdldERlbWFuZChpZCkge1xuICAgICAgICByZXR1cm4gdGhpcy53aXRoT3B0aW1pemF0aW9ucyhcImdldERlbWFuZFwiLCBgZGVtYW5kOiR7aWR9YCwgXCJkZW1hbmRzXCIsIGFzeW5jICgpID0+IHtcbiAgICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBkYi5zZWxlY3QoKS5mcm9tKGRlbWFuZHMpLndoZXJlKGVxKGRlbWFuZHMuaWQsIGlkKSk7XG4gICAgICAgICAgcmV0dXJuIHJlc3VsdFswXTtcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgICAvLyBCdWcgb3BlcmF0aW9ucyBpbXBsZW1lbnRhdGlvblxuICAgICAgLyoqXG4gICAgICAgKlxuICAgICAgICogQHBhcmFtIHVzZXJJZFxuICAgICAgICogQHBhcmFtIHVzZXJSb2xlXG4gICAgICAgKiBAcGFyYW0gb3JnYW5pemF0aW9uSWRcbiAgICAgICAqL1xuICAgICAgYXN5bmMgZ2V0QnVnc0ZvclVzZXIodXNlcklkLCB1c2VyUm9sZSwgb3JnYW5pemF0aW9uSWQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMud2l0aE9wdGltaXphdGlvbnMoXG4gICAgICAgICAgXCJnZXRCdWdzRm9yVXNlclwiLFxuICAgICAgICAgIGBidWdzOiR7dXNlclJvbGV9OiR7dXNlcklkfWAsXG4gICAgICAgICAgXCJidWdzXCIsXG4gICAgICAgICAgYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgbGV0IHJlc3VsdHM7XG4gICAgICAgICAgICBpZiAodXNlclJvbGUgPT09IFwiYWRtaW5cIikge1xuICAgICAgICAgICAgICByZXN1bHRzID0gYXdhaXQgZGIuc2VsZWN0KCkuZnJvbShidWdzKS5vcmRlckJ5KGRlc2MoYnVncy5jcmVhdGVkQXQpKTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAodXNlclJvbGUgPT09IFwibWFuYWdlclwiICYmIG9yZ2FuaXphdGlvbklkKSB7XG4gICAgICAgICAgICAgIHJlc3VsdHMgPSBhd2FpdCBkYi5zZWxlY3QoKS5mcm9tKGJ1Z3MpLm9yZGVyQnkoZGVzYyhidWdzLmNyZWF0ZWRBdCkpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgcmVzdWx0cyA9IGF3YWl0IGRiLnNlbGVjdCgpLmZyb20oYnVncykud2hlcmUoZXEoYnVncy5jcmVhdGVkQnksIHVzZXJJZCkpLm9yZGVyQnkoZGVzYyhidWdzLmNyZWF0ZWRBdCkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgYnVnc1dpdGhBdHRhY2htZW50cyA9IGF3YWl0IFByb21pc2UuYWxsKFxuICAgICAgICAgICAgICByZXN1bHRzLm1hcChhc3luYyAoYnVnKSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3QgYXR0YWNobWVudHMgPSBhd2FpdCBkYi5zZWxlY3Qoe1xuICAgICAgICAgICAgICAgICAgaWQ6IGRvY3VtZW50cy5pZCxcbiAgICAgICAgICAgICAgICAgIG5hbWU6IGRvY3VtZW50cy5uYW1lLFxuICAgICAgICAgICAgICAgICAgZmlsZU5hbWU6IGRvY3VtZW50cy5maWxlTmFtZSxcbiAgICAgICAgICAgICAgICAgIGZpbGVTaXplOiBkb2N1bWVudHMuZmlsZVNpemUsXG4gICAgICAgICAgICAgICAgICBmaWxlUGF0aDogZG9jdW1lbnRzLmZpbGVQYXRoXG4gICAgICAgICAgICAgICAgfSkuZnJvbShkb2N1bWVudHMpLndoZXJlKFxuICAgICAgICAgICAgICAgICAgYW5kKFxuICAgICAgICAgICAgICAgICAgICBlcShkb2N1bWVudHMuYXR0YWNoZWRUb1R5cGUsIFwiYnVnXCIpLFxuICAgICAgICAgICAgICAgICAgICBlcShkb2N1bWVudHMuYXR0YWNoZWRUb0lkLCBidWcuaWQpXG4gICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgLi4uYnVnLFxuICAgICAgICAgICAgICAgICAgYXR0YWNobWVudENvdW50OiBhdHRhY2htZW50cy5sZW5ndGgsXG4gICAgICAgICAgICAgICAgICBhdHRhY2htZW50czogYXR0YWNobWVudHMubWFwKChhdHQpID0+ICh7XG4gICAgICAgICAgICAgICAgICAgIGlkOiBhdHQuaWQsXG4gICAgICAgICAgICAgICAgICAgIG5hbWU6IGF0dC5maWxlTmFtZSB8fCBhdHQubmFtZSxcbiAgICAgICAgICAgICAgICAgICAgc2l6ZTogcGFyc2VJbnQoYXR0LmZpbGVTaXplIHx8IFwiMFwiKSxcbiAgICAgICAgICAgICAgICAgICAgdXJsOiBgL2FwaS9kb2N1bWVudHMvJHthdHQuaWR9L2ZpbGVgLFxuICAgICAgICAgICAgICAgICAgICB0eXBlOiBhdHQuZmlsZU5hbWUgPyBhdHQuZmlsZU5hbWUuc3BsaXQoXCIuXCIpLnBvcCgpPy50b0xvd2VyQ2FzZSgpIHx8IFwidW5rbm93blwiIDogXCJ1bmtub3duXCJcbiAgICAgICAgICAgICAgICAgIH0pKVxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICApO1xuICAgICAgICAgICAgcmV0dXJuIGJ1Z3NXaXRoQXR0YWNobWVudHM7XG4gICAgICAgICAgfVxuICAgICAgICApO1xuICAgICAgfVxuICAgICAgLyoqXG4gICAgICAgKlxuICAgICAgICogQHBhcmFtIGlkXG4gICAgICAgKiBAcGFyYW0gdXNlcklkXG4gICAgICAgKiBAcGFyYW0gdXNlclJvbGVcbiAgICAgICAqIEBwYXJhbSBvcmdhbml6YXRpb25JZFxuICAgICAgICovXG4gICAgICBhc3luYyBnZXRCdWcoaWQsIHVzZXJJZCwgdXNlclJvbGUsIG9yZ2FuaXphdGlvbklkKSB7XG4gICAgICAgIGNvbnN0IGtleSA9IGBidWc6JHtpZH06dXNlcjoke3VzZXJJZH06JHt1c2VyUm9sZX1gO1xuICAgICAgICByZXR1cm4gcXVlcnlDYWNoZS5nZXQoa2V5LCBhc3luYyAoKSA9PiB7XG4gICAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgZGIuc2VsZWN0KCkuZnJvbShidWdzKS53aGVyZShlcShidWdzLmlkLCBpZCkpO1xuICAgICAgICAgIGNvbnN0IGJ1ZyA9IHJlc3VsdFswXTtcbiAgICAgICAgICBpZiAoIWJ1Zykge1xuICAgICAgICAgICAgcmV0dXJuIHZvaWQgMDtcbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKHVzZXJSb2xlID09PSBcImFkbWluXCIpIHtcbiAgICAgICAgICAgIHJldHVybiBidWc7XG4gICAgICAgICAgfVxuICAgICAgICAgIGlmICh1c2VyUm9sZSA9PT0gXCJtYW5hZ2VyXCIpIHtcbiAgICAgICAgICAgIHJldHVybiBidWc7XG4gICAgICAgICAgfVxuICAgICAgICAgIHJldHVybiBidWcuY3JlYXRlZEJ5ID09PSB1c2VySWQgPyBidWcgOiB2b2lkIDA7XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgICAgLyoqXG4gICAgICAgKlxuICAgICAgICogQHBhcmFtIGJ1Z0RhdGFcbiAgICAgICAqL1xuICAgICAgYXN5bmMgY3JlYXRlQnVnKGJ1Z0RhdGEpIHtcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgZGIuaW5zZXJ0KGJ1Z3MpLnZhbHVlcyh7XG4gICAgICAgICAgLi4uYnVnRGF0YSxcbiAgICAgICAgICBpZDogY3J5cHRvLnJhbmRvbVVVSUQoKSxcbiAgICAgICAgICBzdGF0dXM6IFwibmV3XCIsXG4gICAgICAgICAgYXNzaWduZWRUbzogbnVsbCxcbiAgICAgICAgICByZXNvbHZlZEF0OiBudWxsLFxuICAgICAgICAgIHJlc29sdmVkQnk6IG51bGwsXG4gICAgICAgICAgbm90ZXM6IG51bGwsXG4gICAgICAgICAgY3JlYXRlZEF0OiAvKiBAX19QVVJFX18gKi8gbmV3IERhdGUoKSxcbiAgICAgICAgICB1cGRhdGVkQXQ6IC8qIEBfX1BVUkVfXyAqLyBuZXcgRGF0ZSgpXG4gICAgICAgIH0pLnJldHVybmluZygpO1xuICAgICAgICBxdWVyeUNhY2hlLmludmFsaWRhdGUoXCJidWdzXCIpO1xuICAgICAgICByZXR1cm4gcmVzdWx0WzBdO1xuICAgICAgfVxuICAgICAgLyoqXG4gICAgICAgKlxuICAgICAgICogQHBhcmFtIGlkXG4gICAgICAgKiBAcGFyYW0gdXBkYXRlc1xuICAgICAgICogQHBhcmFtIHVzZXJJZFxuICAgICAgICogQHBhcmFtIHVzZXJSb2xlXG4gICAgICAgKi9cbiAgICAgIGFzeW5jIHVwZGF0ZUJ1ZyhpZCwgdXBkYXRlcywgdXNlcklkLCB1c2VyUm9sZSkge1xuICAgICAgICBjb25zdCBbZXhpc3RpbmdCdWddID0gYXdhaXQgZGIuc2VsZWN0KCkuZnJvbShidWdzKS53aGVyZShlcShidWdzLmlkLCBpZCkpO1xuICAgICAgICBpZiAoIWV4aXN0aW5nQnVnKSB7XG4gICAgICAgICAgcmV0dXJuIHZvaWQgMDtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBjYW5FZGl0ID0gdXNlclJvbGUgPT09IFwiYWRtaW5cIiB8fCB1c2VyUm9sZSA9PT0gXCJtYW5hZ2VyXCIgfHwgZXhpc3RpbmdCdWcuY3JlYXRlZEJ5ID09PSB1c2VySWQ7XG4gICAgICAgIGlmICghY2FuRWRpdCkge1xuICAgICAgICAgIHJldHVybiB2b2lkIDA7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgZGIudXBkYXRlKGJ1Z3MpLnNldCh7XG4gICAgICAgICAgLi4udXBkYXRlcyxcbiAgICAgICAgICB1cGRhdGVkQXQ6IC8qIEBfX1BVUkVfXyAqLyBuZXcgRGF0ZSgpXG4gICAgICAgIH0pLndoZXJlKGVxKGJ1Z3MuaWQsIGlkKSkucmV0dXJuaW5nKCk7XG4gICAgICAgIGlmIChyZXN1bHRbMF0pIHtcbiAgICAgICAgICBxdWVyeUNhY2hlLmludmFsaWRhdGUoXCJidWdzXCIpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiByZXN1bHRbMF07XG4gICAgICB9XG4gICAgICAvKipcbiAgICAgICAqXG4gICAgICAgKiBAcGFyYW0gaWRcbiAgICAgICAqIEBwYXJhbSB1c2VySWRcbiAgICAgICAqIEBwYXJhbSB1c2VyUm9sZVxuICAgICAgICovXG4gICAgICBhc3luYyBkZWxldGVCdWcoaWQsIHVzZXJJZCwgdXNlclJvbGUpIHtcbiAgICAgICAgY29uc3QgW2V4aXN0aW5nQnVnXSA9IGF3YWl0IGRiLnNlbGVjdCgpLmZyb20oYnVncykud2hlcmUoZXEoYnVncy5pZCwgaWQpKTtcbiAgICAgICAgaWYgKCFleGlzdGluZ0J1Zykge1xuICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBjYW5EZWxldGUgPSB1c2VyUm9sZSA9PT0gXCJhZG1pblwiIHx8IGV4aXN0aW5nQnVnLmNyZWF0ZWRCeSA9PT0gdXNlcklkO1xuICAgICAgICBpZiAoIWNhbkRlbGV0ZSkge1xuICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBkYi5kZWxldGUoYnVncykud2hlcmUoZXEoYnVncy5pZCwgaWQpKS5yZXR1cm5pbmcoKTtcbiAgICAgICAgaWYgKHJlc3VsdC5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgcXVlcnlDYWNoZS5pbnZhbGlkYXRlKFwiYnVnc1wiKTtcbiAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9XG4gICAgICAvLyBGZWF0dXJlIFJlcXVlc3Qgb3BlcmF0aW9ucyB3aXRoIG9wdGltaXphdGlvblxuICAgICAgLyoqXG4gICAgICAgKiBSZXRyaWV2ZXMgZmVhdHVyZSByZXF1ZXN0cyBmb3IgYSB1c2VyIHdpdGggcm9sZS1iYXNlZCBhY2Nlc3MgY29udHJvbC5cbiAgICAgICAqIEBwYXJhbSB1c2VySWRcbiAgICAgICAqIEBwYXJhbSB1c2VyUm9sZVxuICAgICAgICogQHBhcmFtIG9yZ2FuaXphdGlvbklkXG4gICAgICAgKi9cbiAgICAgIGFzeW5jIGdldEZlYXR1cmVSZXF1ZXN0c0ZvclVzZXIodXNlcklkLCB1c2VyUm9sZSwgb3JnYW5pemF0aW9uSWQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMud2l0aE9wdGltaXphdGlvbnMoXG4gICAgICAgICAgXCJnZXRGZWF0dXJlUmVxdWVzdHNGb3JVc2VyXCIsXG4gICAgICAgICAgYGZlYXR1cmVfcmVxdWVzdHM6JHt1c2VyUm9sZX06JHt1c2VySWR9YCxcbiAgICAgICAgICBcImZlYXR1cmVfcmVxdWVzdHNcIixcbiAgICAgICAgICBhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICBjb25zdCByZXN1bHRzID0gYXdhaXQgZGIuc2VsZWN0KCkuZnJvbShmZWF0dXJlUmVxdWVzdHMpLm9yZGVyQnkoZGVzYyhmZWF0dXJlUmVxdWVzdHMuY3JlYXRlZEF0KSk7XG4gICAgICAgICAgICBjb25zdCByZXF1ZXN0c1dpdGhBdHRhY2htZW50cyA9IGF3YWl0IFByb21pc2UuYWxsKFxuICAgICAgICAgICAgICByZXN1bHRzLm1hcChhc3luYyAocmVxdWVzdCkgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IGF0dGFjaG1lbnRzID0gYXdhaXQgZGIuc2VsZWN0KHtcbiAgICAgICAgICAgICAgICAgIGlkOiBkb2N1bWVudHMuaWQsXG4gICAgICAgICAgICAgICAgICBuYW1lOiBkb2N1bWVudHMubmFtZSxcbiAgICAgICAgICAgICAgICAgIGZpbGVQYXRoOiBkb2N1bWVudHMuZmlsZVBhdGgsXG4gICAgICAgICAgICAgICAgICBmaWxlU2l6ZTogZG9jdW1lbnRzLmZpbGVTaXplLFxuICAgICAgICAgICAgICAgICAgbWltZVR5cGU6IGRvY3VtZW50cy5taW1lVHlwZVxuICAgICAgICAgICAgICAgIH0pLmZyb20oZG9jdW1lbnRzKS53aGVyZShcbiAgICAgICAgICAgICAgICAgIGFuZChcbiAgICAgICAgICAgICAgICAgICAgZXEoZG9jdW1lbnRzLmF0dGFjaGVkVG9UeXBlLCBcImZlYXR1cmVfcmVxdWVzdFwiKSxcbiAgICAgICAgICAgICAgICAgICAgZXEoZG9jdW1lbnRzLmF0dGFjaGVkVG9JZCwgcmVxdWVzdC5pZClcbiAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAuLi5yZXF1ZXN0LFxuICAgICAgICAgICAgICAgICAgYXR0YWNobWVudENvdW50OiBhdHRhY2htZW50cy5sZW5ndGgsXG4gICAgICAgICAgICAgICAgICBhdHRhY2htZW50czogYXR0YWNobWVudHMubWFwKChhdHQpID0+ICh7XG4gICAgICAgICAgICAgICAgICAgIGlkOiBhdHQuaWQsXG4gICAgICAgICAgICAgICAgICAgIG5hbWU6IGF0dC5uYW1lLFxuICAgICAgICAgICAgICAgICAgICB1cmw6IGAvYXBpL2RvY3VtZW50cy8ke2F0dC5pZH0vZmlsZWAsXG4gICAgICAgICAgICAgICAgICAgIHNpemU6IGF0dC5maWxlU2l6ZSA/IHBhcnNlSW50KGF0dC5maWxlU2l6ZSkgOiAwLFxuICAgICAgICAgICAgICAgICAgICBtaW1lVHlwZTogYXR0Lm1pbWVUeXBlXG4gICAgICAgICAgICAgICAgICB9KSlcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIGlmICh1c2VyUm9sZSA9PT0gXCJhZG1pblwiKSB7XG4gICAgICAgICAgICAgIHJldHVybiByZXF1ZXN0c1dpdGhBdHRhY2htZW50cztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiByZXF1ZXN0c1dpdGhBdHRhY2htZW50cy5tYXAoKHJlcXVlc3QpID0+ICh7XG4gICAgICAgICAgICAgIC4uLnJlcXVlc3QsXG4gICAgICAgICAgICAgIGNyZWF0ZWRCeTogbnVsbFxuICAgICAgICAgICAgfSkpO1xuICAgICAgICAgIH1cbiAgICAgICAgKTtcbiAgICAgIH1cbiAgICAgIC8qKlxuICAgICAgICogUmV0cmlldmVzIGEgc3BlY2lmaWMgZmVhdHVyZSByZXF1ZXN0IGJ5IElEIHdpdGggcm9sZS1iYXNlZCBhY2Nlc3MgY29udHJvbC5cbiAgICAgICAqIEBwYXJhbSBpZFxuICAgICAgICogQHBhcmFtIHVzZXJJZFxuICAgICAgICogQHBhcmFtIHVzZXJSb2xlXG4gICAgICAgKiBAcGFyYW0gb3JnYW5pemF0aW9uSWRcbiAgICAgICAqL1xuICAgICAgYXN5bmMgZ2V0RmVhdHVyZVJlcXVlc3QoaWQsIHVzZXJJZCwgdXNlclJvbGUsIG9yZ2FuaXphdGlvbklkKSB7XG4gICAgICAgIHJldHVybiB0aGlzLndpdGhPcHRpbWl6YXRpb25zKFxuICAgICAgICAgIFwiZ2V0RmVhdHVyZVJlcXVlc3RcIixcbiAgICAgICAgICBgZmVhdHVyZV9yZXF1ZXN0OiR7aWR9OiR7dXNlclJvbGV9YCxcbiAgICAgICAgICBcImZlYXR1cmVfcmVxdWVzdHNcIixcbiAgICAgICAgICBhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBkYi5zZWxlY3QoKS5mcm9tKGZlYXR1cmVSZXF1ZXN0cykud2hlcmUoZXEoZmVhdHVyZVJlcXVlc3RzLmlkLCBpZCkpO1xuICAgICAgICAgICAgY29uc3QgZmVhdHVyZVJlcXVlc3QgPSByZXN1bHRbMF07XG4gICAgICAgICAgICBpZiAoIWZlYXR1cmVSZXF1ZXN0KSB7XG4gICAgICAgICAgICAgIHJldHVybiB2b2lkIDA7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodXNlclJvbGUgPT09IFwiYWRtaW5cIikge1xuICAgICAgICAgICAgICByZXR1cm4gZmVhdHVyZVJlcXVlc3Q7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAuLi5mZWF0dXJlUmVxdWVzdCxcbiAgICAgICAgICAgICAgY3JlYXRlZEJ5OiBudWxsXG4gICAgICAgICAgICB9O1xuICAgICAgICAgIH1cbiAgICAgICAgKTtcbiAgICAgIH1cbiAgICAgIC8qKlxuICAgICAgICogQ3JlYXRlcyBhIG5ldyBmZWF0dXJlIHJlcXVlc3QuXG4gICAgICAgKiBAcGFyYW0gZmVhdHVyZVJlcXVlc3REYXRhXG4gICAgICAgKi9cbiAgICAgIGFzeW5jIGNyZWF0ZUZlYXR1cmVSZXF1ZXN0KGZlYXR1cmVSZXF1ZXN0RGF0YSkge1xuICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBkYlBlcmZvcm1hbmNlTW9uaXRvci50cmFja1F1ZXJ5KFwiY3JlYXRlRmVhdHVyZVJlcXVlc3RcIiwgYXN5bmMgKCkgPT4ge1xuICAgICAgICAgIHJldHVybiBkYi5pbnNlcnQoZmVhdHVyZVJlcXVlc3RzKS52YWx1ZXMoe1xuICAgICAgICAgICAgLi4uZmVhdHVyZVJlcXVlc3REYXRhLFxuICAgICAgICAgICAgaWQ6IGNyeXB0by5yYW5kb21VVUlEKCksXG4gICAgICAgICAgICBzdGF0dXM6IFwic3VibWl0dGVkXCIsXG4gICAgICAgICAgICB1cHZvdGVDb3VudDogMCxcbiAgICAgICAgICAgIGFzc2lnbmVkVG86IG51bGwsXG4gICAgICAgICAgICByZXZpZXdlZEJ5OiBudWxsLFxuICAgICAgICAgICAgcmV2aWV3ZWRBdDogbnVsbCxcbiAgICAgICAgICAgIGFkbWluTm90ZXM6IG51bGwsXG4gICAgICAgICAgICBtZXJnZWRJbnRvSWQ6IG51bGwsXG4gICAgICAgICAgICBjcmVhdGVkQXQ6IC8qIEBfX1BVUkVfXyAqLyBuZXcgRGF0ZSgpLFxuICAgICAgICAgICAgdXBkYXRlZEF0OiAvKiBAX19QVVJFX18gKi8gbmV3IERhdGUoKVxuICAgICAgICAgIH0pLnJldHVybmluZygpO1xuICAgICAgICB9KTtcbiAgICAgICAgcXVlcnlDYWNoZS5pbnZhbGlkYXRlKFwiZmVhdHVyZV9yZXF1ZXN0c1wiKTtcbiAgICAgICAgcmV0dXJuIHJlc3VsdFswXTtcbiAgICAgIH1cbiAgICAgIC8qKlxuICAgICAgICogVXBkYXRlcyBhIGZlYXR1cmUgcmVxdWVzdCAoYWRtaW4gb25seSkuXG4gICAgICAgKiBAcGFyYW0gaWRcbiAgICAgICAqIEBwYXJhbSB1cGRhdGVzXG4gICAgICAgKiBAcGFyYW0gdXNlcklkXG4gICAgICAgKiBAcGFyYW0gdXNlclJvbGVcbiAgICAgICAqL1xuICAgICAgYXN5bmMgdXBkYXRlRmVhdHVyZVJlcXVlc3QoaWQsIHVwZGF0ZXMsIHVzZXJJZCwgdXNlclJvbGUpIHtcbiAgICAgICAgaWYgKHVzZXJSb2xlICE9PSBcImFkbWluXCIpIHtcbiAgICAgICAgICByZXR1cm4gdm9pZCAwO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGRiUGVyZm9ybWFuY2VNb25pdG9yLnRyYWNrUXVlcnkoXCJ1cGRhdGVGZWF0dXJlUmVxdWVzdFwiLCBhc3luYyAoKSA9PiB7XG4gICAgICAgICAgcmV0dXJuIGRiLnVwZGF0ZShmZWF0dXJlUmVxdWVzdHMpLnNldCh7XG4gICAgICAgICAgICAuLi51cGRhdGVzLFxuICAgICAgICAgICAgdXBkYXRlZEF0OiAvKiBAX19QVVJFX18gKi8gbmV3IERhdGUoKVxuICAgICAgICAgIH0pLndoZXJlKGVxKGZlYXR1cmVSZXF1ZXN0cy5pZCwgaWQpKS5yZXR1cm5pbmcoKTtcbiAgICAgICAgfSk7XG4gICAgICAgIGlmIChyZXN1bHRbMF0pIHtcbiAgICAgICAgICBxdWVyeUNhY2hlLmludmFsaWRhdGUoXCJmZWF0dXJlX3JlcXVlc3RzXCIpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiByZXN1bHRbMF07XG4gICAgICB9XG4gICAgICAvKipcbiAgICAgICAqIERlbGV0ZXMgYSBmZWF0dXJlIHJlcXVlc3QgKGFkbWluIG9ubHkpLlxuICAgICAgICogQHBhcmFtIGlkXG4gICAgICAgKiBAcGFyYW0gdXNlcklkXG4gICAgICAgKiBAcGFyYW0gdXNlclJvbGVcbiAgICAgICAqL1xuICAgICAgYXN5bmMgZGVsZXRlRmVhdHVyZVJlcXVlc3QoaWQsIHVzZXJJZCwgdXNlclJvbGUpIHtcbiAgICAgICAgaWYgKHVzZXJSb2xlICE9PSBcImFkbWluXCIpIHtcbiAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgYXdhaXQgZGIuZGVsZXRlKGZlYXR1cmVSZXF1ZXN0VXB2b3Rlcykud2hlcmUoZXEoZmVhdHVyZVJlcXVlc3RVcHZvdGVzLmZlYXR1cmVSZXF1ZXN0SWQsIGlkKSk7XG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGRiLmRlbGV0ZShmZWF0dXJlUmVxdWVzdHMpLndoZXJlKGVxKGZlYXR1cmVSZXF1ZXN0cy5pZCwgaWQpKS5yZXR1cm5pbmcoKTtcbiAgICAgICAgaWYgKHJlc3VsdC5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgcXVlcnlDYWNoZS5pbnZhbGlkYXRlKFwiZmVhdHVyZV9yZXF1ZXN0c1wiKTtcbiAgICAgICAgICBxdWVyeUNhY2hlLmludmFsaWRhdGUoXCJmZWF0dXJlX3JlcXVlc3RfdXB2b3Rlc1wiKTtcbiAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9XG4gICAgICAvKipcbiAgICAgICAqIFVwdm90ZXMgYSBmZWF0dXJlIHJlcXVlc3QuXG4gICAgICAgKiBAcGFyYW0gdXB2b3RlRGF0YVxuICAgICAgICovXG4gICAgICBhc3luYyB1cHZvdGVGZWF0dXJlUmVxdWVzdCh1cHZvdGVEYXRhKSB7XG4gICAgICAgIGNvbnN0IHsgZmVhdHVyZVJlcXVlc3RJZCwgdXNlcklkIH0gPSB1cHZvdGVEYXRhO1xuICAgICAgICB0cnkge1xuICAgICAgICAgIGNvbnN0IGZlYXR1cmVSZXF1ZXN0UmVzdWx0ID0gYXdhaXQgZGIuc2VsZWN0KCkuZnJvbShmZWF0dXJlUmVxdWVzdHMpLndoZXJlKGVxKGZlYXR1cmVSZXF1ZXN0cy5pZCwgZmVhdHVyZVJlcXVlc3RJZCkpO1xuICAgICAgICAgIGlmIChmZWF0dXJlUmVxdWVzdFJlc3VsdC5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgICAgICAgICBtZXNzYWdlOiBcIkZlYXR1cmUgcmVxdWVzdCBub3QgZm91bmRcIlxuICAgICAgICAgICAgfTtcbiAgICAgICAgICB9XG4gICAgICAgICAgY29uc3QgZXhpc3RpbmdVcHZvdGUgPSBhd2FpdCBkYi5zZWxlY3QoKS5mcm9tKGZlYXR1cmVSZXF1ZXN0VXB2b3Rlcykud2hlcmUoXG4gICAgICAgICAgICBhbmQoXG4gICAgICAgICAgICAgIGVxKGZlYXR1cmVSZXF1ZXN0VXB2b3Rlcy5mZWF0dXJlUmVxdWVzdElkLCBmZWF0dXJlUmVxdWVzdElkKSxcbiAgICAgICAgICAgICAgZXEoZmVhdHVyZVJlcXVlc3RVcHZvdGVzLnVzZXJJZCwgdXNlcklkKVxuICAgICAgICAgICAgKVxuICAgICAgICAgICk7XG4gICAgICAgICAgaWYgKGV4aXN0aW5nVXB2b3RlLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgICAgICAgICBtZXNzYWdlOiBcIllvdSBoYXZlIGFscmVhZHkgdXB2b3RlZCB0aGlzIGZlYXR1cmUgcmVxdWVzdFwiXG4gICAgICAgICAgICB9O1xuICAgICAgICAgIH1cbiAgICAgICAgICBjb25zdCB1cHZvdGVSZXN1bHQgPSBhd2FpdCBkYi5pbnNlcnQoZmVhdHVyZVJlcXVlc3RVcHZvdGVzKS52YWx1ZXMoe1xuICAgICAgICAgICAgLi4udXB2b3RlRGF0YSxcbiAgICAgICAgICAgIGlkOiBjcnlwdG8ucmFuZG9tVVVJRCgpLFxuICAgICAgICAgICAgY3JlYXRlZEF0OiAvKiBAX19QVVJFX18gKi8gbmV3IERhdGUoKVxuICAgICAgICAgIH0pLnJldHVybmluZygpO1xuICAgICAgICAgIGNvbnN0IHVwZGF0ZWRGZWF0dXJlUmVxdWVzdCA9IGF3YWl0IGRiLnVwZGF0ZShmZWF0dXJlUmVxdWVzdHMpLnNldCh7XG4gICAgICAgICAgICB1cHZvdGVDb3VudDogc3FsYCR7ZmVhdHVyZVJlcXVlc3RzLnVwdm90ZUNvdW50fSArIDFgLFxuICAgICAgICAgICAgdXBkYXRlZEF0OiAvKiBAX19QVVJFX18gKi8gbmV3IERhdGUoKVxuICAgICAgICAgIH0pLndoZXJlKGVxKGZlYXR1cmVSZXF1ZXN0cy5pZCwgZmVhdHVyZVJlcXVlc3RJZCkpLnJldHVybmluZygpO1xuICAgICAgICAgIHF1ZXJ5Q2FjaGUuaW52YWxpZGF0ZShcImZlYXR1cmVfcmVxdWVzdHNcIik7XG4gICAgICAgICAgcXVlcnlDYWNoZS5pbnZhbGlkYXRlKFwiZmVhdHVyZV9yZXF1ZXN0X3Vwdm90ZXNcIik7XG4gICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHN1Y2Nlc3M6IHRydWUsXG4gICAgICAgICAgICBtZXNzYWdlOiBcIkZlYXR1cmUgcmVxdWVzdCB1cHZvdGVkIHN1Y2Nlc3NmdWxseVwiLFxuICAgICAgICAgICAgZGF0YToge1xuICAgICAgICAgICAgICB1cHZvdGU6IHVwdm90ZVJlc3VsdFswXSxcbiAgICAgICAgICAgICAgZmVhdHVyZVJlcXVlc3Q6IHVwZGF0ZWRGZWF0dXJlUmVxdWVzdFswXVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH07XG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgY29uc29sZS5lcnJvcihcIlxcdTI3NEMgRXJyb3IgdXB2b3RpbmcgZmVhdHVyZSByZXF1ZXN0OlwiLCBlcnJvcik7XG4gICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgICAgICAgbWVzc2FnZTogXCJGYWlsZWQgdG8gdXB2b3RlIGZlYXR1cmUgcmVxdWVzdFwiXG4gICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgLyoqXG4gICAgICAgKiBSZW1vdmVzIGFuIHVwdm90ZSBmcm9tIGEgZmVhdHVyZSByZXF1ZXN0LlxuICAgICAgICogQHBhcmFtIGZlYXR1cmVSZXF1ZXN0SWRcbiAgICAgICAqIEBwYXJhbSB1c2VySWRcbiAgICAgICAqL1xuICAgICAgYXN5bmMgcmVtb3ZlRmVhdHVyZVJlcXVlc3RVcHZvdGUoZmVhdHVyZVJlcXVlc3RJZCwgdXNlcklkKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgY29uc3QgZmVhdHVyZVJlcXVlc3RSZXN1bHQgPSBhd2FpdCBkYi5zZWxlY3QoKS5mcm9tKGZlYXR1cmVSZXF1ZXN0cykud2hlcmUoZXEoZmVhdHVyZVJlcXVlc3RzLmlkLCBmZWF0dXJlUmVxdWVzdElkKSk7XG4gICAgICAgICAgaWYgKGZlYXR1cmVSZXF1ZXN0UmVzdWx0Lmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICAgICAgICAgIG1lc3NhZ2U6IFwiRmVhdHVyZSByZXF1ZXN0IG5vdCBmb3VuZFwiXG4gICAgICAgICAgICB9O1xuICAgICAgICAgIH1cbiAgICAgICAgICBjb25zdCByZW1vdmVkVXB2b3RlID0gYXdhaXQgZGIuZGVsZXRlKGZlYXR1cmVSZXF1ZXN0VXB2b3Rlcykud2hlcmUoXG4gICAgICAgICAgICBhbmQoXG4gICAgICAgICAgICAgIGVxKGZlYXR1cmVSZXF1ZXN0VXB2b3Rlcy5mZWF0dXJlUmVxdWVzdElkLCBmZWF0dXJlUmVxdWVzdElkKSxcbiAgICAgICAgICAgICAgZXEoZmVhdHVyZVJlcXVlc3RVcHZvdGVzLnVzZXJJZCwgdXNlcklkKVxuICAgICAgICAgICAgKVxuICAgICAgICAgICkucmV0dXJuaW5nKCk7XG4gICAgICAgICAgaWYgKHJlbW92ZWRVcHZvdGUubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgICAgICAgICAgbWVzc2FnZTogXCJZb3UgaGF2ZSBub3QgdXB2b3RlZCB0aGlzIGZlYXR1cmUgcmVxdWVzdFwiXG4gICAgICAgICAgICB9O1xuICAgICAgICAgIH1cbiAgICAgICAgICBjb25zdCB1cGRhdGVkRmVhdHVyZVJlcXVlc3QgPSBhd2FpdCBkYi51cGRhdGUoZmVhdHVyZVJlcXVlc3RzKS5zZXQoe1xuICAgICAgICAgICAgdXB2b3RlQ291bnQ6IHNxbGBHUkVBVEVTVCgwLCAke2ZlYXR1cmVSZXF1ZXN0cy51cHZvdGVDb3VudH0gLSAxKWAsXG4gICAgICAgICAgICB1cGRhdGVkQXQ6IC8qIEBfX1BVUkVfXyAqLyBuZXcgRGF0ZSgpXG4gICAgICAgICAgfSkud2hlcmUoZXEoZmVhdHVyZVJlcXVlc3RzLmlkLCBmZWF0dXJlUmVxdWVzdElkKSkucmV0dXJuaW5nKCk7XG4gICAgICAgICAgcXVlcnlDYWNoZS5pbnZhbGlkYXRlKFwiZmVhdHVyZV9yZXF1ZXN0c1wiKTtcbiAgICAgICAgICBxdWVyeUNhY2hlLmludmFsaWRhdGUoXCJmZWF0dXJlX3JlcXVlc3RfdXB2b3Rlc1wiKTtcbiAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgc3VjY2VzczogdHJ1ZSxcbiAgICAgICAgICAgIG1lc3NhZ2U6IFwiVXB2b3RlIHJlbW92ZWQgc3VjY2Vzc2Z1bGx5XCIsXG4gICAgICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgICAgIGZlYXR1cmVSZXF1ZXN0OiB1cGRhdGVkRmVhdHVyZVJlcXVlc3RbMF1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9O1xuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXCJcXHUyNzRDIEVycm9yIHJlbW92aW5nIGZlYXR1cmUgcmVxdWVzdCB1cHZvdGU6XCIsIGVycm9yKTtcbiAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICAgICAgICBtZXNzYWdlOiBcIkZhaWxlZCB0byByZW1vdmUgdXB2b3RlXCJcbiAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfTtcbiAgfVxufSk7XG5cbi8vIHNlcnZlci9zdG9yYWdlLnRzXG52YXIgc3RvcmFnZV9leHBvcnRzID0ge307XG5fX2V4cG9ydChzdG9yYWdlX2V4cG9ydHMsIHtcbiAgTWVtU3RvcmFnZTogKCkgPT4gTWVtU3RvcmFnZSxcbiAgT3B0aW1pemVkRGF0YWJhc2VTdG9yYWdlOiAoKSA9PiBPcHRpbWl6ZWREYXRhYmFzZVN0b3JhZ2UsXG4gIHN0b3JhZ2U6ICgpID0+IHN0b3JhZ2Vcbn0pO1xuaW1wb3J0IHsgcmFuZG9tVVVJRCB9IGZyb20gXCJjcnlwdG9cIjtcbnZhciBNZW1TdG9yYWdlLCBzdG9yYWdlO1xudmFyIGluaXRfc3RvcmFnZSA9IF9fZXNtKHtcbiAgXCJzZXJ2ZXIvc3RvcmFnZS50c1wiKCkge1xuICAgIGluaXRfb3B0aW1pemVkX2RiX3N0b3JhZ2UoKTtcbiAgICBpbml0X29wdGltaXplZF9kYl9zdG9yYWdlKCk7XG4gICAgTWVtU3RvcmFnZSA9IGNsYXNzIHtcbiAgICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICB0aGlzLnVzZXJzID0gLyogQF9fUFVSRV9fICovIG5ldyBNYXAoKTtcbiAgICAgICAgdGhpcy5vcmdhbml6YXRpb25zID0gLyogQF9fUFVSRV9fICovIG5ldyBNYXAoKTtcbiAgICAgICAgdGhpcy5idWlsZGluZ3MgPSAvKiBAX19QVVJFX18gKi8gbmV3IE1hcCgpO1xuICAgICAgICB0aGlzLnJlc2lkZW5jZXMgPSAvKiBAX19QVVJFX18gKi8gbmV3IE1hcCgpO1xuICAgICAgICB0aGlzLnBpbGxhcnMgPSAvKiBAX19QVVJFX18gKi8gbmV3IE1hcCgpO1xuICAgICAgICB0aGlzLndvcmtzcGFjZVN0YXR1c2VzID0gLyogQF9fUFVSRV9fICovIG5ldyBNYXAoKTtcbiAgICAgICAgdGhpcy5xdWFsaXR5TWV0cmljcyA9IC8qIEBfX1BVUkVfXyAqLyBuZXcgTWFwKCk7XG4gICAgICAgIHRoaXMuZnJhbWV3b3JrQ29uZmlncyA9IC8qIEBfX1BVUkVfXyAqLyBuZXcgTWFwKCk7XG4gICAgICAgIHRoaXMuaW1wcm92ZW1lbnRTdWdnZXN0aW9ucyA9IC8qIEBfX1BVUkVfXyAqLyBuZXcgTWFwKCk7XG4gICAgICAgIHRoaXMuZmVhdHVyZXMgPSAvKiBAX19QVVJFX18gKi8gbmV3IE1hcCgpO1xuICAgICAgICB0aGlzLmFjdGlvbmFibGVJdGVtcyA9IC8qIEBfX1BVUkVfXyAqLyBuZXcgTWFwKCk7XG4gICAgICAgIHRoaXMuaW52aXRhdGlvbnMgPSAvKiBAX19QVVJFX18gKi8gbmV3IE1hcCgpO1xuICAgICAgICB0aGlzLmludml0YXRpb25BdWRpdExvZ3MgPSAvKiBAX19QVVJFX18gKi8gbmV3IE1hcCgpO1xuICAgICAgICB0aGlzLmJ1Z3MgPSAvKiBAX19QVVJFX18gKi8gbmV3IE1hcCgpO1xuICAgICAgICB0aGlzLmZlYXR1cmVSZXF1ZXN0cyA9IC8qIEBfX1BVUkVfXyAqLyBuZXcgTWFwKCk7XG4gICAgICAgIHRoaXMuZmVhdHVyZVJlcXVlc3RVcHZvdGVzID0gLyogQF9fUFVSRV9fICovIG5ldyBNYXAoKTtcbiAgICAgICAgdGhpcy5pbml0aWFsaXplVGVzdFVzZXIoKS5jYXRjaChjb25zb2xlLmVycm9yKTtcbiAgICAgIH1cbiAgICAgIGFzeW5jIGluaXRpYWxpemVUZXN0VXNlcigpIHtcbiAgICAgICAgY29uc3QgYmNyeXB0MyA9IF9fcmVxdWlyZShcImJjcnlwdGpzXCIpO1xuICAgICAgICBjb25zdCBzZWN1cmVQYXNzd29yZCA9IGF3YWl0IGJjcnlwdDMuaGFzaChcImFkbWluMTIzXCIsIDEyKTtcbiAgICAgICAgY29uc3QgdXNlciA9IHtcbiAgICAgICAgICBpZDogXCI1NTBlODQwMC1lMjliLTQxZDQtYTcxNi00NDY2NTU0NDAwMDBcIixcbiAgICAgICAgICB1c2VybmFtZTogXCJrZXZpbi5oZXJ2aWV1eEBrb3Zlby1nZXN0aW9uLmNvbVwiLFxuICAgICAgICAgIGVtYWlsOiBcImtldmluLmhlcnZpZXV4QGtvdmVvLWdlc3Rpb24uY29tXCIsXG4gICAgICAgICAgcGFzc3dvcmQ6IHNlY3VyZVBhc3N3b3JkLFxuICAgICAgICAgIGZpcnN0TmFtZTogXCJLZXZpblwiLFxuICAgICAgICAgIGxhc3ROYW1lOiBcIkhlcnZpZXV4XCIsXG4gICAgICAgICAgcGhvbmU6IFwiXCIsXG4gICAgICAgICAgcHJvZmlsZUltYWdlOiBcIlwiLFxuICAgICAgICAgIGxhbmd1YWdlOiBcImZyXCIsXG4gICAgICAgICAgcm9sZTogXCJhZG1pblwiLFxuICAgICAgICAgIGlzQWN0aXZlOiB0cnVlLFxuICAgICAgICAgIGxhc3RMb2dpbkF0OiBudWxsLFxuICAgICAgICAgIGNyZWF0ZWRBdDogLyogQF9fUFVSRV9fICovIG5ldyBEYXRlKCksXG4gICAgICAgICAgdXBkYXRlZEF0OiAvKiBAX19QVVJFX18gKi8gbmV3IERhdGUoKVxuICAgICAgICB9O1xuICAgICAgICB0aGlzLnVzZXJzLnNldCh1c2VyLmlkLCB1c2VyKTtcbiAgICAgIH1cbiAgICAgIC8vIFVzZXIgb3BlcmF0aW9uc1xuICAgICAgYXN5bmMgZ2V0VXNlcnMoKSB7XG4gICAgICAgIHJldHVybiBBcnJheS5mcm9tKHRoaXMudXNlcnMudmFsdWVzKCkpO1xuICAgICAgfVxuICAgICAgYXN5bmMgZ2V0VXNlcnNXaXRoQXNzaWdubWVudHMoKSB7XG4gICAgICAgIGNvbnN0IHVzZXJzNSA9IEFycmF5LmZyb20odGhpcy51c2Vycy52YWx1ZXMoKSk7XG4gICAgICAgIHJldHVybiB1c2VyczUubWFwKCh1c2VyKSA9PiAoe1xuICAgICAgICAgIC4uLnVzZXIsXG4gICAgICAgICAgb3JnYW5pemF0aW9uczogW10sXG4gICAgICAgICAgYnVpbGRpbmdzOiBbXSxcbiAgICAgICAgICByZXNpZGVuY2VzOiBbXVxuICAgICAgICB9KSk7XG4gICAgICB9XG4gICAgICBhc3luYyBnZXRVc2Vyc0J5T3JnYW5pemF0aW9ucyhfdXNlcklkKSB7XG4gICAgICAgIHJldHVybiBbXTtcbiAgICAgIH1cbiAgICAgIGFzeW5jIGdldFVzZXIoaWQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudXNlcnMuZ2V0KGlkKTtcbiAgICAgIH1cbiAgICAgIGFzeW5jIGdldFVzZXJPcmdhbml6YXRpb25zKF91c2VySWQpIHtcbiAgICAgICAgcmV0dXJuIFtdO1xuICAgICAgfVxuICAgICAgYXN5bmMgZ2V0VXNlclJlc2lkZW5jZXMoX3VzZXJJZCkge1xuICAgICAgICByZXR1cm4gW107XG4gICAgICB9XG4gICAgICBhc3luYyBnZXRVc2VyQnlFbWFpbChlbWFpbCkge1xuICAgICAgICByZXR1cm4gQXJyYXkuZnJvbSh0aGlzLnVzZXJzLnZhbHVlcygpKS5maW5kKCh1c2VyKSA9PiB1c2VyLmVtYWlsID09PSBlbWFpbCk7XG4gICAgICB9XG4gICAgICBhc3luYyBjcmVhdGVVc2VyKGluc2VydFVzZXIpIHtcbiAgICAgICAgY29uc3QgaWQgPSByYW5kb21VVUlEKCk7XG4gICAgICAgIGNvbnN0IHVzZXIgPSB7XG4gICAgICAgICAgLi4uaW5zZXJ0VXNlcixcbiAgICAgICAgICBpZCxcbiAgICAgICAgICBwaG9uZTogaW5zZXJ0VXNlci5waG9uZSB8fCBudWxsLFxuICAgICAgICAgIHByb2ZpbGVJbWFnZTogaW5zZXJ0VXNlci5wcm9maWxlSW1hZ2UgfHwgXCJcIixcbiAgICAgICAgICByb2xlOiBpbnNlcnRVc2VyLnJvbGUgfHwgXCJ0ZW5hbnRcIixcbiAgICAgICAgICBsYW5ndWFnZTogaW5zZXJ0VXNlci5sYW5ndWFnZSB8fCBcImZyXCIsXG4gICAgICAgICAgaXNBY3RpdmU6IHRydWUsXG4gICAgICAgICAgbGFzdExvZ2luQXQ6IG51bGwsXG4gICAgICAgICAgY3JlYXRlZEF0OiAvKiBAX19QVVJFX18gKi8gbmV3IERhdGUoKSxcbiAgICAgICAgICB1cGRhdGVkQXQ6IC8qIEBfX1BVUkVfXyAqLyBuZXcgRGF0ZSgpXG4gICAgICAgIH07XG4gICAgICAgIHRoaXMudXNlcnMuc2V0KGlkLCB1c2VyKTtcbiAgICAgICAgcmV0dXJuIHVzZXI7XG4gICAgICB9XG4gICAgICBhc3luYyB1cGRhdGVVc2VyKGlkLCB1cGRhdGVzKSB7XG4gICAgICAgIGNvbnN0IGV4aXN0aW5nVXNlciA9IHRoaXMudXNlcnMuZ2V0KGlkKTtcbiAgICAgICAgaWYgKCFleGlzdGluZ1VzZXIpIHtcbiAgICAgICAgICByZXR1cm4gdm9pZCAwO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHVwZGF0ZWRVc2VyID0ge1xuICAgICAgICAgIC4uLmV4aXN0aW5nVXNlcixcbiAgICAgICAgICAuLi51cGRhdGVzLFxuICAgICAgICAgIHVwZGF0ZWRBdDogLyogQF9fUFVSRV9fICovIG5ldyBEYXRlKClcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy51c2Vycy5zZXQoaWQsIHVwZGF0ZWRVc2VyKTtcbiAgICAgICAgcmV0dXJuIHVwZGF0ZWRVc2VyO1xuICAgICAgfVxuICAgICAgLy8gTWluaW1hbCBpbXBsZW1lbnRhdGlvbnMgZm9yIG90aGVyIHJlcXVpcmVkIG1ldGhvZHNcbiAgICAgIGFzeW5jIGNyZWF0ZVBhc3N3b3JkUmVzZXRUb2tlbihfdG9rZW4pIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAuLi5fdG9rZW4sXG4gICAgICAgICAgaWQ6IHJhbmRvbVVVSUQoKSxcbiAgICAgICAgICBjcmVhdGVkQXQ6IC8qIEBfX1BVUkVfXyAqLyBuZXcgRGF0ZSgpLFxuICAgICAgICAgIHVzZWRBdDogbnVsbCxcbiAgICAgICAgICBpc1VzZWQ6IGZhbHNlLFxuICAgICAgICAgIGlwQWRkcmVzczogX3Rva2VuLmlwQWRkcmVzcyB8fCBcIlwiLFxuICAgICAgICAgIHVzZXJBZ2VudDogX3Rva2VuLnVzZXJBZ2VudCB8fCBcIlwiXG4gICAgICAgIH07XG4gICAgICB9XG4gICAgICBhc3luYyBnZXRQYXNzd29yZFJlc2V0VG9rZW4oX3Rva2VuKSB7XG4gICAgICAgIHJldHVybiB2b2lkIDA7XG4gICAgICB9XG4gICAgICBhc3luYyBtYXJrUGFzc3dvcmRSZXNldFRva2VuQXNVc2VkKF90b2tlbklkKSB7XG4gICAgICAgIHJldHVybiB2b2lkIDA7XG4gICAgICB9XG4gICAgICBhc3luYyBjbGVhbnVwRXhwaXJlZFBhc3N3b3JkUmVzZXRUb2tlbnMoKSB7XG4gICAgICAgIHJldHVybiAwO1xuICAgICAgfVxuICAgICAgYXN5bmMgZ2V0T3JnYW5pemF0aW9ucygpIHtcbiAgICAgICAgcmV0dXJuIEFycmF5LmZyb20odGhpcy5vcmdhbml6YXRpb25zLnZhbHVlcygpKTtcbiAgICAgIH1cbiAgICAgIGFzeW5jIGdldE9yZ2FuaXphdGlvbihpZCkge1xuICAgICAgICByZXR1cm4gdGhpcy5vcmdhbml6YXRpb25zLmdldChpZCk7XG4gICAgICB9XG4gICAgICBhc3luYyBnZXRPcmdhbml6YXRpb25CeU5hbWUobmFtZSkge1xuICAgICAgICByZXR1cm4gQXJyYXkuZnJvbSh0aGlzLm9yZ2FuaXphdGlvbnMudmFsdWVzKCkpLmZpbmQoKG9yZykgPT4gb3JnLm5hbWUgPT09IG5hbWUpO1xuICAgICAgfVxuICAgICAgYXN5bmMgY3JlYXRlT3JnYW5pemF0aW9uKG9yZykge1xuICAgICAgICBjb25zdCBpZCA9IHJhbmRvbVVVSUQoKTtcbiAgICAgICAgY29uc3Qgb3JnYW5pemF0aW9uID0ge1xuICAgICAgICAgIC4uLm9yZyxcbiAgICAgICAgICBpZCxcbiAgICAgICAgICBwaG9uZTogb3JnLnBob25lIHx8IFwiXCIsXG4gICAgICAgICAgZW1haWw6IG9yZy5lbWFpbCB8fCBcIlwiLFxuICAgICAgICAgIHdlYnNpdGU6IG9yZy53ZWJzaXRlIHx8IFwiXCIsXG4gICAgICAgICAgcmVnaXN0cmF0aW9uTnVtYmVyOiBvcmcucmVnaXN0cmF0aW9uTnVtYmVyIHx8IFwiXCIsXG4gICAgICAgICAgaXNBY3RpdmU6IHRydWUsXG4gICAgICAgICAgY3JlYXRlZEF0OiAvKiBAX19QVVJFX18gKi8gbmV3IERhdGUoKSxcbiAgICAgICAgICB1cGRhdGVkQXQ6IC8qIEBfX1BVUkVfXyAqLyBuZXcgRGF0ZSgpXG4gICAgICAgIH07XG4gICAgICAgIHRoaXMub3JnYW5pemF0aW9ucy5zZXQoaWQsIG9yZ2FuaXphdGlvbik7XG4gICAgICAgIHJldHVybiBvcmdhbml6YXRpb247XG4gICAgICB9XG4gICAgICBhc3luYyB1cGRhdGVPcmdhbml6YXRpb24oaWQsIHVwZGF0ZXMpIHtcbiAgICAgICAgY29uc3QgZXhpc3RpbmcgPSB0aGlzLm9yZ2FuaXphdGlvbnMuZ2V0KGlkKTtcbiAgICAgICAgaWYgKCFleGlzdGluZykgcmV0dXJuIHZvaWQgMDtcbiAgICAgICAgY29uc3QgdXBkYXRlZCA9IHsgLi4uZXhpc3RpbmcsIC4uLnVwZGF0ZXMsIHVwZGF0ZWRBdDogLyogQF9fUFVSRV9fICovIG5ldyBEYXRlKCkgfTtcbiAgICAgICAgdGhpcy5vcmdhbml6YXRpb25zLnNldChpZCwgdXBkYXRlZCk7XG4gICAgICAgIHJldHVybiB1cGRhdGVkO1xuICAgICAgfVxuICAgICAgYXN5bmMgZ2V0QnVpbGRpbmdzQnlPcmdhbml6YXRpb24ob3JnSWQpIHtcbiAgICAgICAgcmV0dXJuIEFycmF5LmZyb20odGhpcy5idWlsZGluZ3MudmFsdWVzKCkpLmZpbHRlcigoYikgPT4gYi5vcmdhbml6YXRpb25JZCA9PT0gb3JnSWQpO1xuICAgICAgfVxuICAgICAgYXN5bmMgZ2V0QnVpbGRpbmdzKCkge1xuICAgICAgICByZXR1cm4gQXJyYXkuZnJvbSh0aGlzLmJ1aWxkaW5ncy52YWx1ZXMoKSk7XG4gICAgICB9XG4gICAgICBhc3luYyBnZXRCdWlsZGluZyhpZCkge1xuICAgICAgICByZXR1cm4gdGhpcy5idWlsZGluZ3MuZ2V0KGlkKTtcbiAgICAgIH1cbiAgICAgIGFzeW5jIGNyZWF0ZUJ1aWxkaW5nKGJ1aWxkaW5nKSB7XG4gICAgICAgIGNvbnN0IGlkID0gcmFuZG9tVVVJRCgpO1xuICAgICAgICBjb25zdCBuZXdCdWlsZGluZyA9IHtcbiAgICAgICAgICAuLi5idWlsZGluZyxcbiAgICAgICAgICBpZCxcbiAgICAgICAgICBpc0FjdGl2ZTogdHJ1ZSxcbiAgICAgICAgICBjcmVhdGVkQXQ6IC8qIEBfX1BVUkVfXyAqLyBuZXcgRGF0ZSgpLFxuICAgICAgICAgIHVwZGF0ZWRBdDogLyogQF9fUFVSRV9fICovIG5ldyBEYXRlKCksXG4gICAgICAgICAgdG90YWxVbml0czogYnVpbGRpbmcudG90YWxVbml0cyB8fCAwLFxuICAgICAgICAgIHRvdGFsRmxvb3JzOiBidWlsZGluZy50b3RhbEZsb29ycyB8fCAwLFxuICAgICAgICAgIHllYXJCdWlsdDogYnVpbGRpbmcueWVhckJ1aWx0IHx8IDAsXG4gICAgICAgICAgYnVpbGRpbmdUeXBlOiBidWlsZGluZy5idWlsZGluZ1R5cGUsXG4gICAgICAgICAgYmFua0FjY291bnROdW1iZXI6IGJ1aWxkaW5nLmJhbmtBY2NvdW50TnVtYmVyIHx8IFwiXCIsXG4gICAgICAgICAgYmFua0FjY291bnRNaW5pbXVtczogYnVpbGRpbmcuYmFua0FjY291bnRNaW5pbXVtcyA/IEpTT04uc3RyaW5naWZ5KGJ1aWxkaW5nLmJhbmtBY2NvdW50TWluaW11bXMpIDogXCJcIixcbiAgICAgICAgICBiYW5rQWNjb3VudFVwZGF0ZWRBdDogLyogQF9fUFVSRV9fICovIG5ldyBEYXRlKCksXG4gICAgICAgICAgaW5mbGF0aW9uU2V0dGluZ3M6IFwiXCIsXG4gICAgICAgICAgcGFya2luZ1NwYWNlczogYnVpbGRpbmcucGFya2luZ1NwYWNlcyB8fCAwLFxuICAgICAgICAgIHN0b3JhZ2VTcGFjZXM6IGJ1aWxkaW5nLnN0b3JhZ2VTcGFjZXMgfHwgMCxcbiAgICAgICAgICBhbWVuaXRpZXM6IGJ1aWxkaW5nLmFtZW5pdGllcyB8fCBudWxsLFxuICAgICAgICAgIG1hbmFnZW1lbnRDb21wYW55OiBidWlsZGluZy5tYW5hZ2VtZW50Q29tcGFueSB8fCBudWxsLFxuICAgICAgICAgIGJhbmtBY2NvdW50Tm90ZXM6IG51bGwsXG4gICAgICAgICAgYmFua0FjY291bnRTdGFydERhdGU6IG51bGwsXG4gICAgICAgICAgYmFua0FjY291bnRTdGFydEFtb3VudDogbnVsbFxuICAgICAgICB9O1xuICAgICAgICB0aGlzLmJ1aWxkaW5ncy5zZXQoaWQsIG5ld0J1aWxkaW5nKTtcbiAgICAgICAgcmV0dXJuIG5ld0J1aWxkaW5nO1xuICAgICAgfVxuICAgICAgYXN5bmMgdXBkYXRlQnVpbGRpbmcoaWQsIHVwZGF0ZXMpIHtcbiAgICAgICAgY29uc3QgZXhpc3RpbmcgPSB0aGlzLmJ1aWxkaW5ncy5nZXQoaWQpO1xuICAgICAgICBpZiAoIWV4aXN0aW5nKSByZXR1cm4gdm9pZCAwO1xuICAgICAgICBjb25zdCB1cGRhdGVkID0geyAuLi5leGlzdGluZywgLi4udXBkYXRlcywgdXBkYXRlZEF0OiAvKiBAX19QVVJFX18gKi8gbmV3IERhdGUoKSB9O1xuICAgICAgICB0aGlzLmJ1aWxkaW5ncy5zZXQoaWQsIHVwZGF0ZWQpO1xuICAgICAgICByZXR1cm4gdXBkYXRlZDtcbiAgICAgIH1cbiAgICAgIGFzeW5jIGRlbGV0ZUJ1aWxkaW5nKGlkKSB7XG4gICAgICAgIGNvbnN0IGJ1aWxkaW5nID0gdGhpcy5idWlsZGluZ3MuZ2V0KGlkKTtcbiAgICAgICAgaWYgKCFidWlsZGluZykge1xuICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCB1cGRhdGVkQnVpbGRpbmcgPSB7XG4gICAgICAgICAgLi4uYnVpbGRpbmcsXG4gICAgICAgICAgaXNBY3RpdmU6IGZhbHNlLFxuICAgICAgICAgIHVwZGF0ZWRBdDogLyogQF9fUFVSRV9fICovIG5ldyBEYXRlKClcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5idWlsZGluZ3Muc2V0KGlkLCB1cGRhdGVkQnVpbGRpbmcpO1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgIH1cbiAgICAgIGFzeW5jIGdldFJlc2lkZW5jZXMoKSB7XG4gICAgICAgIHJldHVybiBBcnJheS5mcm9tKHRoaXMucmVzaWRlbmNlcy52YWx1ZXMoKSk7XG4gICAgICB9XG4gICAgICBhc3luYyBnZXRSZXNpZGVuY2UoaWQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucmVzaWRlbmNlcy5nZXQoaWQpO1xuICAgICAgfVxuICAgICAgYXN5bmMgZ2V0UmVzaWRlbmNlc0J5QnVpbGRpbmcoYnVpbGRpbmdJZCkge1xuICAgICAgICByZXR1cm4gQXJyYXkuZnJvbSh0aGlzLnJlc2lkZW5jZXMudmFsdWVzKCkpLmZpbHRlcigocikgPT4gci5idWlsZGluZ0lkID09PSBidWlsZGluZ0lkKTtcbiAgICAgIH1cbiAgICAgIGFzeW5jIGNyZWF0ZVJlc2lkZW5jZShyZXNpZGVuY2UpIHtcbiAgICAgICAgY29uc3QgaWQgPSByYW5kb21VVUlEKCk7XG4gICAgICAgIGNvbnN0IG5ld1Jlc2lkZW5jZSA9IHtcbiAgICAgICAgICAuLi5yZXNpZGVuY2UsXG4gICAgICAgICAgaWQsXG4gICAgICAgICAgaXNBY3RpdmU6IHRydWUsXG4gICAgICAgICAgY3JlYXRlZEF0OiAvKiBAX19QVVJFX18gKi8gbmV3IERhdGUoKSxcbiAgICAgICAgICB1cGRhdGVkQXQ6IC8qIEBfX1BVUkVfXyAqLyBuZXcgRGF0ZSgpLFxuICAgICAgICAgIGZsb29yOiByZXNpZGVuY2UuZmxvb3IgfHwgMCxcbiAgICAgICAgICBzcXVhcmVGb290YWdlOiByZXNpZGVuY2Uuc3F1YXJlRm9vdGFnZT8udG9TdHJpbmcoKSB8fCBcIjBcIixcbiAgICAgICAgICBiZWRyb29tczogcmVzaWRlbmNlLmJlZHJvb21zIHx8IDAsXG4gICAgICAgICAgYmF0aHJvb21zOiByZXNpZGVuY2UuYmF0aHJvb21zPy50b1N0cmluZygpIHx8IFwiMFwiLFxuICAgICAgICAgIGJhbGNvbnk6IHJlc2lkZW5jZS5iYWxjb255IHx8IGZhbHNlLFxuICAgICAgICAgIHBhcmtpbmdTcGFjZU51bWJlcnM6IHJlc2lkZW5jZS5wYXJraW5nU3BhY2VOdW1iZXJzIHx8IFtdLFxuICAgICAgICAgIHN0b3JhZ2VTcGFjZU51bWJlcnM6IHJlc2lkZW5jZS5zdG9yYWdlU3BhY2VOdW1iZXJzIHx8IFtdLFxuICAgICAgICAgIG93bmVyc2hpcFBlcmNlbnRhZ2U6IHJlc2lkZW5jZS5vd25lcnNoaXBQZXJjZW50YWdlPy50b1N0cmluZygpIHx8IFwiMFwiLFxuICAgICAgICAgIG1vbnRobHlGZWVzOiByZXNpZGVuY2UubW9udGhseUZlZXM/LnRvU3RyaW5nKCkgfHwgXCIwXCJcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5yZXNpZGVuY2VzLnNldChpZCwgbmV3UmVzaWRlbmNlKTtcbiAgICAgICAgcmV0dXJuIG5ld1Jlc2lkZW5jZTtcbiAgICAgIH1cbiAgICAgIGFzeW5jIHVwZGF0ZVJlc2lkZW5jZShpZCwgdXBkYXRlcykge1xuICAgICAgICBjb25zdCBleGlzdGluZyA9IHRoaXMucmVzaWRlbmNlcy5nZXQoaWQpO1xuICAgICAgICBpZiAoIWV4aXN0aW5nKSByZXR1cm4gdm9pZCAwO1xuICAgICAgICBjb25zdCB1cGRhdGVkID0geyAuLi5leGlzdGluZywgLi4udXBkYXRlcywgdXBkYXRlZEF0OiAvKiBAX19QVVJFX18gKi8gbmV3IERhdGUoKSB9O1xuICAgICAgICB0aGlzLnJlc2lkZW5jZXMuc2V0KGlkLCB1cGRhdGVkKTtcbiAgICAgICAgcmV0dXJuIHVwZGF0ZWQ7XG4gICAgICB9XG4gICAgICBhc3luYyBkZWxldGVSZXNpZGVuY2UoaWQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucmVzaWRlbmNlcy5kZWxldGUoaWQpO1xuICAgICAgfVxuICAgICAgYXN5bmMgZ2V0Q29udGFjdHMoKSB7XG4gICAgICAgIHJldHVybiBbXTtcbiAgICAgIH1cbiAgICAgIGFzeW5jIGdldENvbnRhY3RzQnlFbnRpdHkoKSB7XG4gICAgICAgIHJldHVybiBbXTtcbiAgICAgIH1cbiAgICAgIGFzeW5jIGdldENvbnRhY3RzRm9yUmVzaWRlbmNlKCkge1xuICAgICAgICByZXR1cm4gW107XG4gICAgICB9XG4gICAgICBhc3luYyBjcmVhdGVDb250YWN0KGNvbnRhY3QpIHtcbiAgICAgICAgY29uc3QgaWQgPSByYW5kb21VVUlEKCk7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgLi4uY29udGFjdCxcbiAgICAgICAgICBpZCxcbiAgICAgICAgICBuYW1lOiBjb250YWN0Lm5hbWUsXG4gICAgICAgICAgZW1haWw6IGNvbnRhY3QuZW1haWwgfHwgXCJcIixcbiAgICAgICAgICBwaG9uZTogY29udGFjdC5waG9uZSB8fCBcIlwiLFxuICAgICAgICAgIGVudGl0eTogY29udGFjdC5lbnRpdHksXG4gICAgICAgICAgZW50aXR5SWQ6IGNvbnRhY3QuZW50aXR5SWQsXG4gICAgICAgICAgY29udGFjdENhdGVnb3J5OiBjb250YWN0LmNvbnRhY3RDYXRlZ29yeSxcbiAgICAgICAgICBpc0FjdGl2ZTogdHJ1ZSxcbiAgICAgICAgICBjcmVhdGVkQXQ6IC8qIEBfX1BVUkVfXyAqLyBuZXcgRGF0ZSgpLFxuICAgICAgICAgIHVwZGF0ZWRBdDogLyogQF9fUFVSRV9fICovIG5ldyBEYXRlKClcbiAgICAgICAgfTtcbiAgICAgIH1cbiAgICAgIGFzeW5jIHVwZGF0ZUNvbnRhY3QoKSB7XG4gICAgICAgIHJldHVybiB2b2lkIDA7XG4gICAgICB9XG4gICAgICBhc3luYyBkZWxldGVDb250YWN0KCkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9XG4gICAgICBhc3luYyBnZXREb2N1bWVudHMoX2ZpbHRlcnMpIHtcbiAgICAgICAgcmV0dXJuIFtdO1xuICAgICAgfVxuICAgICAgYXN5bmMgZ2V0RG9jdW1lbnQoX2lkKSB7XG4gICAgICAgIHJldHVybiB2b2lkIDA7XG4gICAgICB9XG4gICAgICBhc3luYyBjcmVhdGVEb2N1bWVudChkb2MpIHtcbiAgICAgICAgY29uc3QgaWQgPSByYW5kb21VVUlEKCk7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgLi4uZG9jLFxuICAgICAgICAgIGlkLFxuICAgICAgICAgIGRlc2NyaXB0aW9uOiBkb2MuZGVzY3JpcHRpb24gfHwgXCJcIixcbiAgICAgICAgICBidWlsZGluZ0lkOiBkb2MuYnVpbGRpbmdJZCB8fCBcIlwiLFxuICAgICAgICAgIHJlc2lkZW5jZUlkOiBkb2MucmVzaWRlbmNlSWQgfHwgXCJcIixcbiAgICAgICAgICBmaWxlTmFtZTogZG9jLmZpbGVOYW1lIHx8IFwiXCIsXG4gICAgICAgICAgZmlsZVNpemU6IGRvYy5maWxlU2l6ZSB8fCBcIlwiLFxuICAgICAgICAgIG1pbWVUeXBlOiBkb2MubWltZVR5cGUgfHwgXCJcIixcbiAgICAgICAgICBhdHRhY2hlZFRvVHlwZTogZG9jLmF0dGFjaGVkVG9UeXBlIHx8IFwiXCIsXG4gICAgICAgICAgYXR0YWNoZWRUb0lkOiBkb2MuYXR0YWNoZWRUb0lkIHx8IFwiXCIsXG4gICAgICAgICAgY3JlYXRlZEF0OiAvKiBAX19QVVJFX18gKi8gbmV3IERhdGUoKSxcbiAgICAgICAgICB1cGRhdGVkQXQ6IC8qIEBfX1BVUkVfXyAqLyBuZXcgRGF0ZSgpXG4gICAgICAgIH07XG4gICAgICB9XG4gICAgICBhc3luYyB1cGRhdGVEb2N1bWVudChfaWQsIF91cGRhdGVzKSB7XG4gICAgICAgIHJldHVybiB2b2lkIDA7XG4gICAgICB9XG4gICAgICBhc3luYyBkZWxldGVEb2N1bWVudChfaWQpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfVxuICAgICAgYXN5bmMgZ2V0UGVybWlzc2lvbnMoKSB7XG4gICAgICAgIHJldHVybiBbXTtcbiAgICAgIH1cbiAgICAgIGFzeW5jIGdldFJvbGVQZXJtaXNzaW9ucygpIHtcbiAgICAgICAgcmV0dXJuIFtdO1xuICAgICAgfVxuICAgICAgYXN5bmMgZ2V0VXNlclBlcm1pc3Npb25zKCkge1xuICAgICAgICByZXR1cm4gW107XG4gICAgICB9XG4gICAgICBhc3luYyBnZXRQaWxsYXJzKCkge1xuICAgICAgICByZXR1cm4gQXJyYXkuZnJvbSh0aGlzLnBpbGxhcnMudmFsdWVzKCkpLnNvcnQoKGEsIGIpID0+IHBhcnNlSW50KGEub3JkZXIpIC0gcGFyc2VJbnQoYi5vcmRlcikpO1xuICAgICAgfVxuICAgICAgYXN5bmMgZ2V0UGlsbGFyKGlkKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnBpbGxhcnMuZ2V0KGlkKTtcbiAgICAgIH1cbiAgICAgIGFzeW5jIGNyZWF0ZVBpbGxhcihwaWxsYXIpIHtcbiAgICAgICAgY29uc3QgaWQgPSByYW5kb21VVUlEKCk7XG4gICAgICAgIGNvbnN0IG5ld1BpbGxhciA9IHtcbiAgICAgICAgICAuLi5waWxsYXIsXG4gICAgICAgICAgaWQsXG4gICAgICAgICAgbmFtZTogcGlsbGFyLm5hbWUsXG4gICAgICAgICAgZGVzY3JpcHRpb246IHBpbGxhci5kZXNjcmlwdGlvbiB8fCBcIlwiLFxuICAgICAgICAgIHN0YXR1czogcGlsbGFyLnN0YXR1cyB8fCBcInBlbmRpbmdcIixcbiAgICAgICAgICBvcmRlcjogcGlsbGFyLm9yZGVyLnRvU3RyaW5nKCksXG4gICAgICAgICAgY29uZmlndXJhdGlvbjogcGlsbGFyLmNvbmZpZ3VyYXRpb24gfHwgbnVsbCxcbiAgICAgICAgICBjcmVhdGVkQXQ6IC8qIEBfX1BVUkVfXyAqLyBuZXcgRGF0ZSgpLFxuICAgICAgICAgIHVwZGF0ZWRBdDogLyogQF9fUFVSRV9fICovIG5ldyBEYXRlKClcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5waWxsYXJzLnNldChpZCwgbmV3UGlsbGFyKTtcbiAgICAgICAgcmV0dXJuIG5ld1BpbGxhcjtcbiAgICAgIH1cbiAgICAgIGFzeW5jIHVwZGF0ZVBpbGxhcihpZCwgdXBkYXRlcykge1xuICAgICAgICBjb25zdCBleGlzdGluZyA9IHRoaXMucGlsbGFycy5nZXQoaWQpO1xuICAgICAgICBpZiAoIWV4aXN0aW5nKSByZXR1cm4gdm9pZCAwO1xuICAgICAgICBjb25zdCB1cGRhdGVkID0geyAuLi5leGlzdGluZywgLi4udXBkYXRlcywgdXBkYXRlZEF0OiAvKiBAX19QVVJFX18gKi8gbmV3IERhdGUoKSB9O1xuICAgICAgICB0aGlzLnBpbGxhcnMuc2V0KGlkLCB1cGRhdGVkKTtcbiAgICAgICAgcmV0dXJuIHVwZGF0ZWQ7XG4gICAgICB9XG4gICAgICBhc3luYyBnZXRXb3Jrc3BhY2VTdGF0dXNlcygpIHtcbiAgICAgICAgcmV0dXJuIEFycmF5LmZyb20odGhpcy53b3Jrc3BhY2VTdGF0dXNlcy52YWx1ZXMoKSk7XG4gICAgICB9XG4gICAgICBhc3luYyBnZXRXb3Jrc3BhY2VTdGF0dXMoY29tcG9uZW50KSB7XG4gICAgICAgIHJldHVybiB0aGlzLndvcmtzcGFjZVN0YXR1c2VzLmdldChjb21wb25lbnQpO1xuICAgICAgfVxuICAgICAgYXN5bmMgY3JlYXRlV29ya3NwYWNlU3RhdHVzKHN0YXR1cykge1xuICAgICAgICBjb25zdCBpZCA9IHJhbmRvbVVVSUQoKTtcbiAgICAgICAgY29uc3QgbmV3U3RhdHVzID0ge1xuICAgICAgICAgIC4uLnN0YXR1cyxcbiAgICAgICAgICBpZCxcbiAgICAgICAgICBzdGF0dXM6IHN0YXR1cy5zdGF0dXMsXG4gICAgICAgICAgY29tcG9uZW50OiBzdGF0dXMuY29tcG9uZW50LFxuICAgICAgICAgIGxhc3RVcGRhdGVkOiAvKiBAX19QVVJFX18gKi8gbmV3IERhdGUoKVxuICAgICAgICB9O1xuICAgICAgICB0aGlzLndvcmtzcGFjZVN0YXR1c2VzLnNldChzdGF0dXMuY29tcG9uZW50LCBuZXdTdGF0dXMpO1xuICAgICAgICByZXR1cm4gbmV3U3RhdHVzO1xuICAgICAgfVxuICAgICAgYXN5bmMgdXBkYXRlV29ya3NwYWNlU3RhdHVzKGNvbXBvbmVudCwgdXBkYXRlcykge1xuICAgICAgICBjb25zdCBleGlzdGluZyA9IHRoaXMud29ya3NwYWNlU3RhdHVzZXMuZ2V0KGNvbXBvbmVudCk7XG4gICAgICAgIGlmICghZXhpc3RpbmcpIHJldHVybiB2b2lkIDA7XG4gICAgICAgIGNvbnN0IHVwZGF0ZWQgPSB7IC4uLmV4aXN0aW5nLCAuLi51cGRhdGVzLCB1cGRhdGVkQXQ6IC8qIEBfX1BVUkVfXyAqLyBuZXcgRGF0ZSgpIH07XG4gICAgICAgIHRoaXMud29ya3NwYWNlU3RhdHVzZXMuc2V0KGNvbXBvbmVudCwgdXBkYXRlZCk7XG4gICAgICAgIHJldHVybiB1cGRhdGVkO1xuICAgICAgfVxuICAgICAgYXN5bmMgZ2V0UXVhbGl0eU1ldHJpY3MoKSB7XG4gICAgICAgIHJldHVybiBBcnJheS5mcm9tKHRoaXMucXVhbGl0eU1ldHJpY3MudmFsdWVzKCkpO1xuICAgICAgfVxuICAgICAgYXN5bmMgY3JlYXRlUXVhbGl0eU1ldHJpYyhtZXRyaWMpIHtcbiAgICAgICAgY29uc3QgaWQgPSByYW5kb21VVUlEKCk7XG4gICAgICAgIGNvbnN0IG5ld01ldHJpYyA9IHtcbiAgICAgICAgICAuLi5tZXRyaWMsXG4gICAgICAgICAgaWQsXG4gICAgICAgICAgdGltZXN0YW1wOiAvKiBAX19QVVJFX18gKi8gbmV3IERhdGUoKVxuICAgICAgICB9O1xuICAgICAgICB0aGlzLnF1YWxpdHlNZXRyaWNzLnNldChpZCwgbmV3TWV0cmljKTtcbiAgICAgICAgcmV0dXJuIG5ld01ldHJpYztcbiAgICAgIH1cbiAgICAgIGFzeW5jIGdldEZyYW1ld29ya0NvbmZpZ3VyYXRpb25zKCkge1xuICAgICAgICByZXR1cm4gQXJyYXkuZnJvbSh0aGlzLmZyYW1ld29ya0NvbmZpZ3MudmFsdWVzKCkpO1xuICAgICAgfVxuICAgICAgYXN5bmMgY3JlYXRlRnJhbWV3b3JrQ29uZmlndXJhdGlvbihjb25maWcyKSB7XG4gICAgICAgIGNvbnN0IGlkID0gcmFuZG9tVVVJRCgpO1xuICAgICAgICBjb25zdCBuZXdDb25maWcgPSB7XG4gICAgICAgICAgLi4uY29uZmlnMixcbiAgICAgICAgICBpZCxcbiAgICAgICAgICBkZXNjcmlwdGlvbjogY29uZmlnMi5kZXNjcmlwdGlvbiB8fCBcIlwiLFxuICAgICAgICAgIGNyZWF0ZWRBdDogLyogQF9fUFVSRV9fICovIG5ldyBEYXRlKCksXG4gICAgICAgICAgdXBkYXRlZEF0OiAvKiBAX19QVVJFX18gKi8gbmV3IERhdGUoKVxuICAgICAgICB9O1xuICAgICAgICB0aGlzLmZyYW1ld29ya0NvbmZpZ3Muc2V0KGNvbmZpZzIuX2tleSwgbmV3Q29uZmlnKTtcbiAgICAgICAgcmV0dXJuIG5ld0NvbmZpZztcbiAgICAgIH1cbiAgICAgIGFzeW5jIHVwZGF0ZUZyYW1ld29ya0NvbmZpZ3VyYXRpb24oa2V5LCB1cGRhdGVzKSB7XG4gICAgICAgIGNvbnN0IGV4aXN0aW5nID0gdGhpcy5mcmFtZXdvcmtDb25maWdzLmdldChrZXkpO1xuICAgICAgICBpZiAoIWV4aXN0aW5nKSByZXR1cm4gdm9pZCAwO1xuICAgICAgICBjb25zdCB1cGRhdGVkID0geyAuLi5leGlzdGluZywgLi4udXBkYXRlcywgdXBkYXRlZEF0OiAvKiBAX19QVVJFX18gKi8gbmV3IERhdGUoKSB9O1xuICAgICAgICB0aGlzLmZyYW1ld29ya0NvbmZpZ3Muc2V0KGtleSwgdXBkYXRlZCk7XG4gICAgICAgIHJldHVybiB1cGRhdGVkO1xuICAgICAgfVxuICAgICAgYXN5bmMgZ2V0SW1wcm92ZW1lbnRTdWdnZXN0aW9ucygpIHtcbiAgICAgICAgcmV0dXJuIEFycmF5LmZyb20odGhpcy5pbXByb3ZlbWVudFN1Z2dlc3Rpb25zLnZhbHVlcygpKTtcbiAgICAgIH1cbiAgICAgIGFzeW5jIGNyZWF0ZUltcHJvdmVtZW50U3VnZ2VzdGlvbihzdWdnZXN0aW9uKSB7XG4gICAgICAgIGNvbnN0IGlkID0gcmFuZG9tVVVJRCgpO1xuICAgICAgICBjb25zdCBuZXdTdWdnZXN0aW9uID0ge1xuICAgICAgICAgIC4uLnN1Z2dlc3Rpb24sXG4gICAgICAgICAgaWQsXG4gICAgICAgICAgZmlsZVBhdGg6IHN1Z2dlc3Rpb24uZmlsZVBhdGggfHwgbnVsbCxcbiAgICAgICAgICBzdGF0dXM6IHN1Z2dlc3Rpb24uc3RhdHVzLFxuICAgICAgICAgIGNhdGVnb3J5OiBzdWdnZXN0aW9uLmNhdGVnb3J5LFxuICAgICAgICAgIHByaW9yaXR5OiBzdWdnZXN0aW9uLnByaW9yaXR5IHx8IFwiTWVkaXVtXCIsXG4gICAgICAgICAgYXNzaWduZWRUbzogc3VnZ2VzdGlvbi5hc3NpZ25lZFRvIHx8IG51bGwsXG4gICAgICAgICAgdGVjaG5pY2FsRGV0YWlsczogc3VnZ2VzdGlvbi50ZWNobmljYWxEZXRhaWxzIHx8IG51bGwsXG4gICAgICAgICAgYnVzaW5lc3NJbXBhY3Q6IHN1Z2dlc3Rpb24uYnVzaW5lc3NJbXBhY3QgfHwgbnVsbCxcbiAgICAgICAgICBpbXBsZW1lbnRhdGlvbkVmZm9ydDogc3VnZ2VzdGlvbi5pbXBsZW1lbnRhdGlvbkVmZm9ydCB8fCBudWxsLFxuICAgICAgICAgIHF1ZWJlY0NvbXBsaWFuY2VSZWxldmFuY2U6IHN1Z2dlc3Rpb24ucXVlYmVjQ29tcGxpYW5jZVJlbGV2YW5jZSB8fCBudWxsLFxuICAgICAgICAgIHN1Z2dlc3RlZEJ5OiBzdWdnZXN0aW9uLnN1Z2dlc3RlZEJ5IHx8IG51bGwsXG4gICAgICAgICAgY3JlYXRlZEF0OiAvKiBAX19QVVJFX18gKi8gbmV3IERhdGUoKSxcbiAgICAgICAgICB1cGRhdGVkQXQ6IC8qIEBfX1BVUkVfXyAqLyBuZXcgRGF0ZSgpLFxuICAgICAgICAgIGFja25vd2xlZGdlZEF0OiBudWxsLFxuICAgICAgICAgIGNvbXBsZXRlZEF0OiBudWxsXG4gICAgICAgIH07XG4gICAgICAgIHRoaXMuaW1wcm92ZW1lbnRTdWdnZXN0aW9ucy5zZXQoaWQsIG5ld1N1Z2dlc3Rpb24pO1xuICAgICAgICByZXR1cm4gbmV3U3VnZ2VzdGlvbjtcbiAgICAgIH1cbiAgICAgIGFzeW5jIHVwZGF0ZUltcHJvdmVtZW50U3VnZ2VzdGlvbihpZCwgdXBkYXRlcykge1xuICAgICAgICBjb25zdCBleGlzdGluZyA9IHRoaXMuaW1wcm92ZW1lbnRTdWdnZXN0aW9ucy5nZXQoaWQpO1xuICAgICAgICBpZiAoIWV4aXN0aW5nKSByZXR1cm4gdm9pZCAwO1xuICAgICAgICBjb25zdCB1cGRhdGVkID0geyAuLi5leGlzdGluZywgLi4udXBkYXRlcywgdXBkYXRlZEF0OiAvKiBAX19QVVJFX18gKi8gbmV3IERhdGUoKSB9O1xuICAgICAgICB0aGlzLmltcHJvdmVtZW50U3VnZ2VzdGlvbnMuc2V0KGlkLCB1cGRhdGVkKTtcbiAgICAgICAgcmV0dXJuIHVwZGF0ZWQ7XG4gICAgICB9XG4gICAgICBhc3luYyBnZXRUb3BJbXByb3ZlbWVudFN1Z2dlc3Rpb25zKGxpbWl0KSB7XG4gICAgICAgIGNvbnN0IHN1Z2dlc3Rpb25zID0gQXJyYXkuZnJvbSh0aGlzLmltcHJvdmVtZW50U3VnZ2VzdGlvbnMudmFsdWVzKCkpO1xuICAgICAgICBjb25zdCBwcmlvcml0eU9yZGVyID0geyBcIkNyaXRpY2FsXCI6IDAsIFwiSGlnaFwiOiAxLCBcIk1lZGl1bVwiOiAyLCBcIkxvd1wiOiAzIH07XG4gICAgICAgIHJldHVybiBzdWdnZXN0aW9ucy5zb3J0KChhLCBiKSA9PiB7XG4gICAgICAgICAgY29uc3QgcHJpb3JpdHlBID0gcHJpb3JpdHlPcmRlclthLnByaW9yaXR5XSA/PyA5OTk7XG4gICAgICAgICAgY29uc3QgcHJpb3JpdHlCID0gcHJpb3JpdHlPcmRlcltiLnByaW9yaXR5XSA/PyA5OTk7XG4gICAgICAgICAgY29uc3QgcHJpb3JpdHlEaWZmID0gcHJpb3JpdHlBIC0gcHJpb3JpdHlCO1xuICAgICAgICAgIGlmIChwcmlvcml0eURpZmYgIT09IDApIHJldHVybiBwcmlvcml0eURpZmY7XG4gICAgICAgICAgcmV0dXJuIG5ldyBEYXRlKGEuY3JlYXRlZEF0KS5nZXRUaW1lKCkgLSBuZXcgRGF0ZShiLmNyZWF0ZWRBdCkuZ2V0VGltZSgpO1xuICAgICAgICB9KS5zbGljZSgwLCBsaW1pdCk7XG4gICAgICB9XG4gICAgICBhc3luYyBjbGVhck5ld1N1Z2dlc3Rpb25zKCkge1xuICAgICAgICBmb3IgKGNvbnN0IFtpZCwgc3VnZ2VzdGlvbl0gb2YgdGhpcy5pbXByb3ZlbWVudFN1Z2dlc3Rpb25zLmVudHJpZXMoKSkge1xuICAgICAgICAgIGlmIChzdWdnZXN0aW9uLnN0YXR1cyA9PT0gXCJOZXdcIikge1xuICAgICAgICAgICAgdGhpcy5pbXByb3ZlbWVudFN1Z2dlc3Rpb25zLmRlbGV0ZShpZCk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgICBhc3luYyB1cGRhdGVTdWdnZXN0aW9uU3RhdHVzKGlkLCBzdGF0dXMpIHtcbiAgICAgICAgY29uc3Qgc3VnZ2VzdGlvbiA9IHRoaXMuaW1wcm92ZW1lbnRTdWdnZXN0aW9ucy5nZXQoaWQpO1xuICAgICAgICBpZiAoIXN1Z2dlc3Rpb24pIHJldHVybiB2b2lkIDA7XG4gICAgICAgIGNvbnN0IHVwZGF0ZWRTdWdnZXN0aW9uID0ge1xuICAgICAgICAgIC4uLnN1Z2dlc3Rpb24sXG4gICAgICAgICAgc3RhdHVzLFxuICAgICAgICAgIHVwZGF0ZWRBdDogLyogQF9fUFVSRV9fICovIG5ldyBEYXRlKClcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5pbXByb3ZlbWVudFN1Z2dlc3Rpb25zLnNldChpZCwgdXBkYXRlZFN1Z2dlc3Rpb24pO1xuICAgICAgICByZXR1cm4gdXBkYXRlZFN1Z2dlc3Rpb247XG4gICAgICB9XG4gICAgICBhc3luYyBnZXRGZWF0dXJlcygpIHtcbiAgICAgICAgcmV0dXJuIEFycmF5LmZyb20odGhpcy5mZWF0dXJlcy52YWx1ZXMoKSk7XG4gICAgICB9XG4gICAgICBhc3luYyBnZXRGZWF0dXJlKGlkKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmZlYXR1cmVzLmdldChpZCk7XG4gICAgICB9XG4gICAgICBhc3luYyBjcmVhdGVGZWF0dXJlKGZlYXR1cmUpIHtcbiAgICAgICAgY29uc3QgaWQgPSByYW5kb21VVUlEKCk7XG4gICAgICAgIGNvbnN0IG5ld0ZlYXR1cmUgPSB7XG4gICAgICAgICAgLi4uZmVhdHVyZSxcbiAgICAgICAgICBpZCxcbiAgICAgICAgICBpc1B1YmxpY1JvYWRtYXA6IHRydWUsXG4gICAgICAgICAgY3JlYXRlZEF0OiAvKiBAX19QVVJFX18gKi8gbmV3IERhdGUoKSxcbiAgICAgICAgICB1cGRhdGVkQXQ6IC8qIEBfX1BVUkVfXyAqLyBuZXcgRGF0ZSgpLFxuICAgICAgICAgIHJlcXVlc3RlZEJ5OiBmZWF0dXJlLnJlcXVlc3RlZEJ5IHx8IG51bGwsXG4gICAgICAgICAgYXNzaWduZWRUbzogZmVhdHVyZS5hc3NpZ25lZFRvIHx8IG51bGwsXG4gICAgICAgICAgZXN0aW1hdGVkSG91cnM6IGZlYXR1cmUuZXN0aW1hdGVkSG91cnMgfHwgbnVsbCxcbiAgICAgICAgICBidXNpbmVzc09iamVjdGl2ZTogZmVhdHVyZS5idXNpbmVzc09iamVjdGl2ZSB8fCBudWxsLFxuICAgICAgICAgIHRhcmdldFVzZXJzOiBmZWF0dXJlLnRhcmdldFVzZXJzIHx8IG51bGwsXG4gICAgICAgICAgc3VjY2Vzc01ldHJpY3M6IGZlYXR1cmUuc3VjY2Vzc01ldHJpY3MgfHwgbnVsbCxcbiAgICAgICAgICB0ZWNobmljYWxDb21wbGV4aXR5OiBmZWF0dXJlLnRlY2huaWNhbENvbXBsZXhpdHkgfHwgbnVsbCxcbiAgICAgICAgICBkZXBlbmRlbmNpZXM6IGZlYXR1cmUuZGVwZW5kZW5jaWVzPy5qb2luKFwiLFwiKSB8fCBudWxsLFxuICAgICAgICAgIHVzZXJGbG93OiBmZWF0dXJlLnVzZXJGbG93IHx8IG51bGwsXG4gICAgICAgICAgYWN0dWFsSG91cnM6IG51bGwsXG4gICAgICAgICAgc3RhcnREYXRlOiBudWxsLFxuICAgICAgICAgIGNvbXBsZXRlZERhdGU6IG51bGwsXG4gICAgICAgICAgdGFnczogbnVsbCxcbiAgICAgICAgICBtZXRhZGF0YTogbnVsbCxcbiAgICAgICAgICBhaUFuYWx5c2lzUmVzdWx0OiBudWxsLFxuICAgICAgICAgIGFpQW5hbHl6ZWRBdDogbnVsbCxcbiAgICAgICAgICBpc1N0cmF0ZWdpY1BhdGg6IGZhbHNlLFxuICAgICAgICAgIHN5bmNlZEF0OiBudWxsXG4gICAgICAgIH07XG4gICAgICAgIHRoaXMuZmVhdHVyZXMuc2V0KGlkLCBuZXdGZWF0dXJlKTtcbiAgICAgICAgcmV0dXJuIG5ld0ZlYXR1cmU7XG4gICAgICB9XG4gICAgICBhc3luYyB1cGRhdGVGZWF0dXJlKGlkLCB1cGRhdGVzKSB7XG4gICAgICAgIGNvbnN0IGV4aXN0aW5nID0gdGhpcy5mZWF0dXJlcy5nZXQoaWQpO1xuICAgICAgICBpZiAoIWV4aXN0aW5nKSByZXR1cm4gdm9pZCAwO1xuICAgICAgICBjb25zdCB1cGRhdGVkID0geyAuLi5leGlzdGluZywgLi4udXBkYXRlcywgdXBkYXRlZEF0OiAvKiBAX19QVVJFX18gKi8gbmV3IERhdGUoKSB9O1xuICAgICAgICB0aGlzLmZlYXR1cmVzLnNldChpZCwgdXBkYXRlZCk7XG4gICAgICAgIHJldHVybiB1cGRhdGVkO1xuICAgICAgfVxuICAgICAgYXN5bmMgZ2V0RmVhdHVyZXNCeVN0YXR1cyhzdGF0dXMpIHtcbiAgICAgICAgcmV0dXJuIEFycmF5LmZyb20odGhpcy5mZWF0dXJlcy52YWx1ZXMoKSkuZmlsdGVyKChmKSA9PiBmLnN0YXR1cyA9PT0gc3RhdHVzKTtcbiAgICAgIH1cbiAgICAgIGFzeW5jIGdldFB1YmxpY1JvYWRtYXBGZWF0dXJlcygpIHtcbiAgICAgICAgcmV0dXJuIEFycmF5LmZyb20odGhpcy5mZWF0dXJlcy52YWx1ZXMoKSkuZmlsdGVyKChmKSA9PiBmLmlzUHVibGljUm9hZG1hcCk7XG4gICAgICB9XG4gICAgICBhc3luYyBnZXRBY3Rpb25hYmxlSXRlbXMoKSB7XG4gICAgICAgIHJldHVybiBBcnJheS5mcm9tKHRoaXMuYWN0aW9uYWJsZUl0ZW1zLnZhbHVlcygpKTtcbiAgICAgIH1cbiAgICAgIGFzeW5jIGNyZWF0ZUFjdGlvbmFibGVJdGVtKGl0ZW0pIHtcbiAgICAgICAgY29uc3QgaWQgPSByYW5kb21VVUlEKCk7XG4gICAgICAgIGNvbnN0IG5ld0l0ZW0gPSB7XG4gICAgICAgICAgLi4uaXRlbSxcbiAgICAgICAgICBpZCxcbiAgICAgICAgICBmZWF0dXJlSWQ6IGl0ZW0uZmVhdHVyZUlkIHx8IHJhbmRvbVVVSUQoKSxcbiAgICAgICAgICBjcmVhdGVkQXQ6IC8qIEBfX1BVUkVfXyAqLyBuZXcgRGF0ZSgpLFxuICAgICAgICAgIHVwZGF0ZWRBdDogLyogQF9fUFVSRV9fICovIG5ldyBEYXRlKCksXG4gICAgICAgICAgZXN0aW1hdGVkSG91cnM6IGl0ZW0uZXN0aW1hdGVkSG91cnMgfHwgbnVsbCxcbiAgICAgICAgICBhY3R1YWxIb3VyczogbnVsbCxcbiAgICAgICAgICBkZXBlbmRlbmNpZXM6IGl0ZW0uZGVwZW5kZW5jaWVzIHx8IG51bGwsXG4gICAgICAgICAgdGVjaG5pY2FsRGV0YWlsczogbnVsbCxcbiAgICAgICAgICBpbXBsZW1lbnRhdGlvblByb21wdDogbnVsbCxcbiAgICAgICAgICB0ZXN0aW5nUmVxdWlyZW1lbnRzOiBudWxsLFxuICAgICAgICAgIGVzdGltYXRlZEVmZm9ydDogbnVsbCxcbiAgICAgICAgICBvcmRlckluZGV4OiAwLFxuICAgICAgICAgIHN0YXJ0ZWRBdDogbnVsbCxcbiAgICAgICAgICBjb21wbGV0ZWRBdDogbnVsbFxuICAgICAgICB9O1xuICAgICAgICB0aGlzLmFjdGlvbmFibGVJdGVtcy5zZXQoaWQsIG5ld0l0ZW0pO1xuICAgICAgICByZXR1cm4gbmV3SXRlbTtcbiAgICAgIH1cbiAgICAgIGFzeW5jIHVwZGF0ZUFjdGlvbmFibGVJdGVtKGlkLCB1cGRhdGVzKSB7XG4gICAgICAgIGNvbnN0IGV4aXN0aW5nID0gdGhpcy5hY3Rpb25hYmxlSXRlbXMuZ2V0KGlkKTtcbiAgICAgICAgaWYgKCFleGlzdGluZykgcmV0dXJuIHZvaWQgMDtcbiAgICAgICAgY29uc3QgdXBkYXRlZCA9IHsgLi4uZXhpc3RpbmcsIC4uLnVwZGF0ZXMsIHVwZGF0ZWRBdDogLyogQF9fUFVSRV9fICovIG5ldyBEYXRlKCkgfTtcbiAgICAgICAgdGhpcy5hY3Rpb25hYmxlSXRlbXMuc2V0KGlkLCB1cGRhdGVkKTtcbiAgICAgICAgcmV0dXJuIHVwZGF0ZWQ7XG4gICAgICB9XG4gICAgICBhc3luYyBkZWxldGVBY3Rpb25hYmxlSXRlbShpZCkge1xuICAgICAgICByZXR1cm4gdGhpcy5hY3Rpb25hYmxlSXRlbXMuZGVsZXRlKGlkKTtcbiAgICAgIH1cbiAgICAgIGFzeW5jIGdldEludml0YXRpb25zKCkge1xuICAgICAgICByZXR1cm4gQXJyYXkuZnJvbSh0aGlzLmludml0YXRpb25zLnZhbHVlcygpKTtcbiAgICAgIH1cbiAgICAgIGFzeW5jIGNyZWF0ZUludml0YXRpb24oaW52aXRhdGlvbikge1xuICAgICAgICBjb25zdCBpZCA9IHJhbmRvbVVVSUQoKTtcbiAgICAgICAgY29uc3QgbmV3SW52aXRhdGlvbiA9IHtcbiAgICAgICAgICAuLi5pbnZpdGF0aW9uLFxuICAgICAgICAgIGlkLFxuICAgICAgICAgIHRva2VuOiByYW5kb21VVUlEKCksXG4gICAgICAgICAgY3JlYXRlZEF0OiAvKiBAX19QVVJFX18gKi8gbmV3IERhdGUoKSxcbiAgICAgICAgICB1cGRhdGVkQXQ6IC8qIEBfX1BVUkVfXyAqLyBuZXcgRGF0ZSgpLFxuICAgICAgICAgIHN0YXR1czogXCJwZW5kaW5nXCIsXG4gICAgICAgICAgaXBBZGRyZXNzOiBcIlwiLFxuICAgICAgICAgIHVzZXJBZ2VudDogXCJcIixcbiAgICAgICAgICB0b2tlbkhhc2g6IG51bGwsXG4gICAgICAgICAgdXNlZEF0OiBudWxsLFxuICAgICAgICAgIGNyZWF0ZWRCeVVzZXJJZDogaW52aXRhdGlvbi5pbnZpdGVkQnlVc2VySWQsXG4gICAgICAgICAgYWNjZXB0ZWRCeVVzZXJJZDogbnVsbCxcbiAgICAgICAgICBhY2NlcHRlZEF0OiBudWxsLFxuICAgICAgICAgIHJldm9rZWRBdDogbnVsbCxcbiAgICAgICAgICByZXZva2VkQnlVc2VySWQ6IG51bGwsXG4gICAgICAgICAgbGFzdEFjY2Vzc2VkQXQ6IG51bGxcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5pbnZpdGF0aW9ucy5zZXQoaWQsIG5ld0ludml0YXRpb24pO1xuICAgICAgICByZXR1cm4gbmV3SW52aXRhdGlvbjtcbiAgICAgIH1cbiAgICAgIGFzeW5jIGdldEludml0YXRpb25CeVRva2VuKHRva2VuKSB7XG4gICAgICAgIHJldHVybiBBcnJheS5mcm9tKHRoaXMuaW52aXRhdGlvbnMudmFsdWVzKCkpLmZpbmQoKGludikgPT4gaW52LnRva2VuID09PSB0b2tlbik7XG4gICAgICB9XG4gICAgICBhc3luYyB1cGRhdGVJbnZpdGF0aW9uKGlkLCB1cGRhdGVzKSB7XG4gICAgICAgIGNvbnN0IGV4aXN0aW5nID0gdGhpcy5pbnZpdGF0aW9ucy5nZXQoaWQpO1xuICAgICAgICBpZiAoIWV4aXN0aW5nKSByZXR1cm4gdm9pZCAwO1xuICAgICAgICBjb25zdCB1cGRhdGVkID0geyAuLi5leGlzdGluZywgLi4udXBkYXRlcywgdXBkYXRlZEF0OiAvKiBAX19QVVJFX18gKi8gbmV3IERhdGUoKSB9O1xuICAgICAgICB0aGlzLmludml0YXRpb25zLnNldChpZCwgdXBkYXRlZCk7XG4gICAgICAgIHJldHVybiB1cGRhdGVkO1xuICAgICAgfVxuICAgICAgYXN5bmMgZ2V0SW52aXRhdGlvbkF1ZGl0TG9ncygpIHtcbiAgICAgICAgcmV0dXJuIEFycmF5LmZyb20odGhpcy5pbnZpdGF0aW9uQXVkaXRMb2dzLnZhbHVlcygpKTtcbiAgICAgIH1cbiAgICAgIGFzeW5jIGNyZWF0ZUludml0YXRpb25BdWRpdExvZyhsb2cyKSB7XG4gICAgICAgIGNvbnN0IGlkID0gcmFuZG9tVVVJRCgpO1xuICAgICAgICBjb25zdCBuZXdMb2cgPSB7XG4gICAgICAgICAgLi4ubG9nMixcbiAgICAgICAgICBpZCxcbiAgICAgICAgICBjcmVhdGVkQXQ6IC8qIEBfX1BVUkVfXyAqLyBuZXcgRGF0ZSgpLFxuICAgICAgICAgIGlwQWRkcmVzczogbG9nMi5pcEFkZHJlc3MgfHwgXCJcIixcbiAgICAgICAgICB1c2VyQWdlbnQ6IGxvZzIudXNlckFnZW50IHx8IFwiXCIsXG4gICAgICAgICAgZGV0YWlsczogbG9nMi5kZXRhaWxzIHx8IHt9LFxuICAgICAgICAgIHByZXZpb3VzU3RhdHVzOiBsb2cyLnByZXZpb3VzU3RhdHVzIHx8IFwicGVuZGluZ1wiLFxuICAgICAgICAgIG5ld1N0YXR1czogbG9nMi5uZXdTdGF0dXMgfHwgXCJwZW5kaW5nXCJcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5pbnZpdGF0aW9uQXVkaXRMb2dzLnNldChpZCwgbmV3TG9nKTtcbiAgICAgICAgcmV0dXJuIG5ld0xvZztcbiAgICAgIH1cbiAgICAgIGFzeW5jIGdldENvbW1lbnRzQnlEZW1hbmQoKSB7XG4gICAgICAgIHJldHVybiBbXTtcbiAgICAgIH1cbiAgICAgIGFzeW5jIGNyZWF0ZURlbWFuZENvbW1lbnQoY29tbWVudCkge1xuICAgICAgICBjb25zdCBpZCA9IHJhbmRvbVVVSUQoKTtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAuLi5jb21tZW50LFxuICAgICAgICAgIGlkLFxuICAgICAgICAgIGNyZWF0ZWRBdDogLyogQF9fUFVSRV9fICovIG5ldyBEYXRlKCksXG4gICAgICAgICAgdXBkYXRlZEF0OiAvKiBAX19QVVJFX18gKi8gbmV3IERhdGUoKVxuICAgICAgICB9O1xuICAgICAgfVxuICAgICAgYXN5bmMgZ2V0QnVncygpIHtcbiAgICAgICAgcmV0dXJuIEFycmF5LmZyb20odGhpcy5idWdzLnZhbHVlcygpKTtcbiAgICAgIH1cbiAgICAgIGFzeW5jIGdldEJ1Z3NGb3JVc2VyKHVzZXJJZCwgdXNlclJvbGUsIG9yZ2FuaXphdGlvbklkKSB7XG4gICAgICAgIGNvbnN0IGFsbEJ1Z3MgPSBBcnJheS5mcm9tKHRoaXMuYnVncy52YWx1ZXMoKSk7XG4gICAgICAgIGlmICh1c2VyUm9sZSA9PT0gXCJhZG1pblwiKSB7XG4gICAgICAgICAgcmV0dXJuIGFsbEJ1Z3M7XG4gICAgICAgIH0gZWxzZSBpZiAodXNlclJvbGUgPT09IFwibWFuYWdlclwiICYmIG9yZ2FuaXphdGlvbklkKSB7XG4gICAgICAgICAgcmV0dXJuIGFsbEJ1Z3M7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcmV0dXJuIGFsbEJ1Z3MuZmlsdGVyKChidWcpID0+IGJ1Zy5jcmVhdGVkQnkgPT09IHVzZXJJZCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGFzeW5jIGdldEJ1ZyhpZCwgdXNlcklkLCByb2xlLCBvcmdhbml6YXRpb25JZCkge1xuICAgICAgICBjb25zdCBidWcgPSB0aGlzLmJ1Z3MuZ2V0KGlkKTtcbiAgICAgICAgaWYgKCFidWcpIHJldHVybiB2b2lkIDA7XG4gICAgICAgIGlmICh1c2VySWQgJiYgcm9sZSkge1xuICAgICAgICAgIGlmIChyb2xlID09PSBcImFkbWluXCIpIHtcbiAgICAgICAgICAgIHJldHVybiBidWc7XG4gICAgICAgICAgfSBlbHNlIGlmIChyb2xlID09PSBcIm1hbmFnZXJcIiAmJiBvcmdhbml6YXRpb25JZCkge1xuICAgICAgICAgICAgcmV0dXJuIGJ1ZztcbiAgICAgICAgICB9IGVsc2UgaWYgKGJ1Zy5jcmVhdGVkQnkgPT09IHVzZXJJZCkge1xuICAgICAgICAgICAgcmV0dXJuIGJ1ZztcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIHZvaWQgMDtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGJ1ZztcbiAgICAgIH1cbiAgICAgIGFzeW5jIGNyZWF0ZUJ1ZyhidWcpIHtcbiAgICAgICAgY29uc3QgaWQgPSByYW5kb21VVUlEKCk7XG4gICAgICAgIGNvbnN0IG5ld0J1ZyA9IHtcbiAgICAgICAgICAuLi5idWcsXG4gICAgICAgICAgaWQsXG4gICAgICAgICAgc3RhdHVzOiBcIm5ld1wiLFxuICAgICAgICAgIGNyZWF0ZWRBdDogLyogQF9fUFVSRV9fICovIG5ldyBEYXRlKCksXG4gICAgICAgICAgdXBkYXRlZEF0OiAvKiBAX19QVVJFX18gKi8gbmV3IERhdGUoKSxcbiAgICAgICAgICByZXByb2R1Y3Rpb25TdGVwczogYnVnLnJlcHJvZHVjdGlvblN0ZXBzIHx8IFwiXCIsXG4gICAgICAgICAgYXNzaWduZWRUbzogbnVsbCxcbiAgICAgICAgICByZXNvbHZlZEF0OiBudWxsLFxuICAgICAgICAgIHJlc29sdmVkQnk6IG51bGwsXG4gICAgICAgICAgbm90ZXM6IG51bGwsXG4gICAgICAgICAgZW52aXJvbm1lbnQ6IGJ1Zy5lbnZpcm9ubWVudCB8fCBcIlwiXG4gICAgICAgIH07XG4gICAgICAgIHRoaXMuYnVncy5zZXQoaWQsIG5ld0J1Zyk7XG4gICAgICAgIHJldHVybiBuZXdCdWc7XG4gICAgICB9XG4gICAgICBhc3luYyB1cGRhdGVCdWcoaWQsIHVwZGF0ZXMsIHVzZXJJZCwgcm9sZSkge1xuICAgICAgICBjb25zdCBleGlzdGluZyA9IHRoaXMuYnVncy5nZXQoaWQpO1xuICAgICAgICBpZiAoIWV4aXN0aW5nKSByZXR1cm4gdm9pZCAwO1xuICAgICAgICBpZiAodXNlcklkICYmIHJvbGUpIHtcbiAgICAgICAgICBpZiAocm9sZSA9PT0gXCJhZG1pblwiIHx8IHJvbGUgPT09IFwibWFuYWdlclwiKSB7XG4gICAgICAgICAgfSBlbHNlIGlmIChleGlzdGluZy5jcmVhdGVkQnkgPT09IHVzZXJJZCkge1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gdm9pZCAwO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBjb25zdCB1cGRhdGVkID0geyAuLi5leGlzdGluZywgLi4udXBkYXRlcywgdXBkYXRlZEF0OiAvKiBAX19QVVJFX18gKi8gbmV3IERhdGUoKSB9O1xuICAgICAgICB0aGlzLmJ1Z3Muc2V0KGlkLCB1cGRhdGVkKTtcbiAgICAgICAgcmV0dXJuIHVwZGF0ZWQ7XG4gICAgICB9XG4gICAgICBhc3luYyBkZWxldGVCdWcoaWQsIHVzZXJJZCwgcm9sZSkge1xuICAgICAgICBjb25zdCBleGlzdGluZyA9IHRoaXMuYnVncy5nZXQoaWQpO1xuICAgICAgICBpZiAoIWV4aXN0aW5nKSByZXR1cm4gZmFsc2U7XG4gICAgICAgIGlmIChyb2xlID09PSBcImFkbWluXCIgfHwgZXhpc3RpbmcuY3JlYXRlZEJ5ID09PSB1c2VySWQpIHtcbiAgICAgICAgICB0aGlzLmJ1Z3MuZGVsZXRlKGlkKTtcbiAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9XG4gICAgICBhc3luYyBnZXRGZWF0dXJlUmVxdWVzdHMoKSB7XG4gICAgICAgIGNvbnN0IGZlYXR1cmVSZXF1ZXN0czIgPSBBcnJheS5mcm9tKHRoaXMuZmVhdHVyZVJlcXVlc3RzLnZhbHVlcygpKTtcbiAgICAgICAgY29uc3QgZW5yaWNoZWRSZXF1ZXN0cyA9IGF3YWl0IFByb21pc2UuYWxsKFxuICAgICAgICAgIGZlYXR1cmVSZXF1ZXN0czIubWFwKGFzeW5jIChyZXF1ZXN0KSA9PiB7XG4gICAgICAgICAgICBjb25zdCBhdHRhY2htZW50cyA9IFtdO1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgLi4ucmVxdWVzdCxcbiAgICAgICAgICAgICAgYXR0YWNobWVudENvdW50OiBhdHRhY2htZW50cy5sZW5ndGgsXG4gICAgICAgICAgICAgIGF0dGFjaG1lbnRzOiBbXVxuICAgICAgICAgICAgfTtcbiAgICAgICAgICB9KVxuICAgICAgICApO1xuICAgICAgICByZXR1cm4gZW5yaWNoZWRSZXF1ZXN0cztcbiAgICAgIH1cbiAgICAgIGFzeW5jIGdldEZlYXR1cmVSZXF1ZXN0c0ZvclVzZXIodXNlcklkLCByb2xlLCBvcmdhbml6YXRpb25JZCkge1xuICAgICAgICByZXR1cm4gdGhpcy5nZXRGZWF0dXJlUmVxdWVzdHMoKTtcbiAgICAgIH1cbiAgICAgIGFzeW5jIGdldEZlYXR1cmVSZXF1ZXN0KGlkLCB1c2VySWQsIHJvbGUsIG9yZ2FuaXphdGlvbklkKSB7XG4gICAgICAgIGNvbnN0IHJlcXVlc3QgPSB0aGlzLmZlYXR1cmVSZXF1ZXN0cy5nZXQoaWQpO1xuICAgICAgICBpZiAoIXJlcXVlc3QpIHJldHVybiB2b2lkIDA7XG4gICAgICAgIGNvbnN0IGF0dGFjaG1lbnRzID0gW107XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgLi4ucmVxdWVzdCxcbiAgICAgICAgICBhdHRhY2htZW50Q291bnQ6IGF0dGFjaG1lbnRzLmxlbmd0aCxcbiAgICAgICAgICBhdHRhY2htZW50czogW11cbiAgICAgICAgfTtcbiAgICAgIH1cbiAgICAgIGFzeW5jIGNyZWF0ZUZlYXR1cmVSZXF1ZXN0KHJlcXVlc3QpIHtcbiAgICAgICAgY29uc3QgaWQgPSByYW5kb21VVUlEKCk7XG4gICAgICAgIGNvbnN0IG5ld1JlcXVlc3QgPSB7XG4gICAgICAgICAgLi4ucmVxdWVzdCxcbiAgICAgICAgICBpZCxcbiAgICAgICAgICBzdGF0dXM6IFwic3VibWl0dGVkXCIsXG4gICAgICAgICAgY3JlYXRlZEF0OiAvKiBAX19QVVJFX18gKi8gbmV3IERhdGUoKSxcbiAgICAgICAgICB1cGRhdGVkQXQ6IC8qIEBfX1BVUkVfXyAqLyBuZXcgRGF0ZSgpLFxuICAgICAgICAgIHVwdm90ZUNvdW50OiAwLFxuICAgICAgICAgIGFzc2lnbmVkVG86IG51bGwsXG4gICAgICAgICAgcmV2aWV3ZWRCeTogbnVsbCxcbiAgICAgICAgICByZXZpZXdlZEF0OiBudWxsLFxuICAgICAgICAgIGVzdGltYXRlZEhvdXJzOiBudWxsLFxuICAgICAgICAgIG1lcmdlZEludG9JZDogbnVsbFxuICAgICAgICB9O1xuICAgICAgICB0aGlzLmZlYXR1cmVSZXF1ZXN0cy5zZXQoaWQsIG5ld1JlcXVlc3QpO1xuICAgICAgICByZXR1cm4gbmV3UmVxdWVzdDtcbiAgICAgIH1cbiAgICAgIGFzeW5jIHVwZGF0ZUZlYXR1cmVSZXF1ZXN0KGlkLCB1cGRhdGVzKSB7XG4gICAgICAgIGNvbnN0IGV4aXN0aW5nID0gdGhpcy5mZWF0dXJlUmVxdWVzdHMuZ2V0KGlkKTtcbiAgICAgICAgaWYgKCFleGlzdGluZykgcmV0dXJuIHZvaWQgMDtcbiAgICAgICAgY29uc3QgdXBkYXRlZCA9IHsgLi4uZXhpc3RpbmcsIC4uLnVwZGF0ZXMsIHVwZGF0ZWRBdDogLyogQF9fUFVSRV9fICovIG5ldyBEYXRlKCkgfTtcbiAgICAgICAgdGhpcy5mZWF0dXJlUmVxdWVzdHMuc2V0KGlkLCB1cGRhdGVkKTtcbiAgICAgICAgcmV0dXJuIHVwZGF0ZWQ7XG4gICAgICB9XG4gICAgICBhc3luYyBhZGRGZWF0dXJlUmVxdWVzdFVwdm90ZSgpIHtcbiAgICAgICAgcmV0dXJuIHsgc3VjY2VzczogdHJ1ZSwgbWVzc2FnZTogXCJVcHZvdGUgYWRkZWRcIiB9O1xuICAgICAgfVxuICAgICAgYXN5bmMgcmVtb3ZlRmVhdHVyZVJlcXVlc3RVcHZvdGUoKSB7XG4gICAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IHRydWUsIG1lc3NhZ2U6IFwiVXB2b3RlIHJlbW92ZWRcIiB9O1xuICAgICAgfVxuICAgIH07XG4gICAgc3RvcmFnZSA9IG5ldyBPcHRpbWl6ZWREYXRhYmFzZVN0b3JhZ2UoKTtcbiAgfVxufSk7XG5cbi8vIHNlcnZlci9hcGkvYnVpbGRpbmdzL29wZXJhdGlvbnMudHNcbnZhciBvcGVyYXRpb25zX2V4cG9ydHMgPSB7fTtcbl9fZXhwb3J0KG9wZXJhdGlvbnNfZXhwb3J0cywge1xuICBhZGRSZXNpZGVuY2VzQXV0b21hdGljYWxseTogKCkgPT4gYWRkUmVzaWRlbmNlc0F1dG9tYXRpY2FsbHksXG4gIGFkanVzdFJlc2lkZW5jZUNvdW50OiAoKSA9PiBhZGp1c3RSZXNpZGVuY2VDb3VudCxcbiAgYnVpbGRpbmdFeGlzdHM6ICgpID0+IGJ1aWxkaW5nRXhpc3RzLFxuICBjYXNjYWRlRGVsZXRlQnVpbGRpbmc6ICgpID0+IGNhc2NhZGVEZWxldGVCdWlsZGluZyxcbiAgY3JlYXRlQnVpbGRpbmc6ICgpID0+IGNyZWF0ZUJ1aWxkaW5nLFxuICBkZWxldGVCdWlsZGluZzogKCkgPT4gZGVsZXRlQnVpbGRpbmcsXG4gIGRlbGV0ZVNlbGVjdGVkUmVzaWRlbmNlczogKCkgPT4gZGVsZXRlU2VsZWN0ZWRSZXNpZGVuY2VzLFxuICBnZXRSZXNpZGVuY2VzRm9yU2VsZWN0aW9uOiAoKSA9PiBnZXRSZXNpZGVuY2VzRm9yU2VsZWN0aW9uLFxuICB1cGRhdGVCdWlsZGluZzogKCkgPT4gdXBkYXRlQnVpbGRpbmdcbn0pO1xuaW1wb3J0IHsgZXEgYXMgZXE1LCBhbmQgYXMgYW5kNSwgaW5BcnJheSBhcyBpbkFycmF5NCB9IGZyb20gXCJkcml6emxlLW9ybVwiO1xuaW1wb3J0IGNyeXB0bzIgZnJvbSBcImNyeXB0b1wiO1xuYXN5bmMgZnVuY3Rpb24gY3JlYXRlQnVpbGRpbmcoYnVpbGRpbmdEYXRhKSB7XG4gIGNvbnN0IGJ1aWxkaW5nSWQgPSBjcnlwdG8yLnJhbmRvbVVVSUQoKTtcbiAgY29uc3QgbmV3QnVpbGRpbmcgPSBhd2FpdCBkYi5pbnNlcnQoYnVpbGRpbmdzKS52YWx1ZXMoe1xuICAgIG5hbWU6IGJ1aWxkaW5nRGF0YS5uYW1lLFxuICAgIGFkZHJlc3M6IGJ1aWxkaW5nRGF0YS5hZGRyZXNzIHx8IFwiXCIsXG4gICAgY2l0eTogYnVpbGRpbmdEYXRhLmNpdHkgfHwgXCJcIixcbiAgICBwcm92aW5jZTogYnVpbGRpbmdEYXRhLnByb3ZpbmNlIHx8IFwiUUNcIixcbiAgICBwb3N0YWxDb2RlOiBidWlsZGluZ0RhdGEucG9zdGFsQ29kZSB8fCBcIlwiLFxuICAgIGJ1aWxkaW5nVHlwZTogYnVpbGRpbmdEYXRhLmJ1aWxkaW5nVHlwZSB8fCBcImNvbmRvXCIsXG4gICAgeWVhckJ1aWx0OiBidWlsZGluZ0RhdGEueWVhckJ1aWx0LFxuICAgIHRvdGFsVW5pdHM6IGJ1aWxkaW5nRGF0YS50b3RhbFVuaXRzIHx8IDAsXG4gICAgdG90YWxGbG9vcnM6IGJ1aWxkaW5nRGF0YS50b3RhbEZsb29ycyxcbiAgICBwYXJraW5nU3BhY2VzOiBidWlsZGluZ0RhdGEucGFya2luZ1NwYWNlcyxcbiAgICBzdG9yYWdlU3BhY2VzOiBidWlsZGluZ0RhdGEuc3RvcmFnZVNwYWNlcyxcbiAgICBhbWVuaXRpZXM6IGJ1aWxkaW5nRGF0YS5hbWVuaXRpZXMsXG4gICAgbWFuYWdlbWVudENvbXBhbnk6IGJ1aWxkaW5nRGF0YS5tYW5hZ2VtZW50Q29tcGFueSxcbiAgICBvcmdhbml6YXRpb25JZDogYnVpbGRpbmdEYXRhLm9yZ2FuaXphdGlvbklkLFxuICAgIGlzQWN0aXZlOiB0cnVlXG4gIH0pLnJldHVybmluZygpO1xuICBpZiAoYnVpbGRpbmdEYXRhLnRvdGFsVW5pdHMgJiYgYnVpbGRpbmdEYXRhLnRvdGFsVW5pdHMgPiAwICYmIGJ1aWxkaW5nRGF0YS50b3RhbFVuaXRzIDw9IDMwMCkge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCB0b3RhbFVuaXRzID0gYnVpbGRpbmdEYXRhLnRvdGFsVW5pdHM7XG4gICAgICBjb25zdCB0b3RhbEZsb29ycyA9IGJ1aWxkaW5nRGF0YS50b3RhbEZsb29ycyB8fCAxO1xuICAgICAgY29uc3QgdW5pdHNQZXJGbG9vciA9IE1hdGguY2VpbCh0b3RhbFVuaXRzIC8gdG90YWxGbG9vcnMpO1xuICAgICAgY29uc3QgcmVzaWRlbmNlc1RvQ3JlYXRlID0gW107XG4gICAgICBmb3IgKGxldCB1bml0ID0gMTsgdW5pdCA8PSB0b3RhbFVuaXRzOyB1bml0KyspIHtcbiAgICAgICAgY29uc3QgZmxvb3IgPSBNYXRoLmNlaWwodW5pdCAvIHVuaXRzUGVyRmxvb3IpO1xuICAgICAgICBjb25zdCB1bml0T25GbG9vciA9ICh1bml0IC0gMSkgJSB1bml0c1BlckZsb29yICsgMTtcbiAgICAgICAgY29uc3QgdW5pdE51bWJlciA9IGAke2Zsb29yfSR7dW5pdE9uRmxvb3IudG9TdHJpbmcoKS5wYWRTdGFydCgyLCBcIjBcIil9YDtcbiAgICAgICAgcmVzaWRlbmNlc1RvQ3JlYXRlLnB1c2goe1xuICAgICAgICAgIGJ1aWxkaW5nSWQ6IG5ld0J1aWxkaW5nWzBdLmlkLFxuICAgICAgICAgIHVuaXROdW1iZXIsXG4gICAgICAgICAgZmxvb3IsXG4gICAgICAgICAgaXNBY3RpdmU6IHRydWVcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgICBjb25zdCBjcmVhdGVkUmVzaWRlbmNlcyA9IGF3YWl0IGRiLmluc2VydChyZXNpZGVuY2VzKS52YWx1ZXMocmVzaWRlbmNlc1RvQ3JlYXRlKS5yZXR1cm5pbmcoKTtcbiAgICB9IGNhdGNoIChfX19yZXNpZGVuY2VFcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcihcIlxcdTI2QTBcXHVGRTBGIEVycm9yIGF1dG8tZ2VuZXJhdGluZyByZXNpZGVuY2VzOlwiLCBfX19yZXNpZGVuY2VFcnJvcik7XG4gICAgfVxuICB9XG4gIHJldHVybiBuZXdCdWlsZGluZ1swXTtcbn1cbmFzeW5jIGZ1bmN0aW9uIGFkanVzdFJlc2lkZW5jZUNvdW50KGJ1aWxkaW5nSWQsIG9yZ2FuaXphdGlvbklkLCBuZXdUb3RhbFVuaXRzLCBjdXJyZW50VG90YWxVbml0cywgdG90YWxGbG9vcnMpIHtcbiAgY29uc3QgY3VycmVudEFjdGl2ZVJlc2lkZW5jZXMgPSBhd2FpdCBkYi5zZWxlY3QoeyBpZDogcmVzaWRlbmNlcy5pZCwgdW5pdE51bWJlcjogcmVzaWRlbmNlcy51bml0TnVtYmVyIH0pLmZyb20ocmVzaWRlbmNlcykud2hlcmUoYW5kNShlcTUocmVzaWRlbmNlcy5idWlsZGluZ0lkLCBidWlsZGluZ0lkKSwgZXE1KHJlc2lkZW5jZXMuaXNBY3RpdmUsIHRydWUpKSk7XG4gIGNvbnN0IGN1cnJlbnRBY3RpdmVDb3VudCA9IGN1cnJlbnRBY3RpdmVSZXNpZGVuY2VzLmxlbmd0aDtcbiAgaWYgKG5ld1RvdGFsVW5pdHMgPiBjdXJyZW50QWN0aXZlQ291bnQpIHtcbiAgICBhd2FpdCBhZGRSZXNpZGVuY2VzQXV0b21hdGljYWxseShidWlsZGluZ0lkLCBuZXdUb3RhbFVuaXRzIC0gY3VycmVudEFjdGl2ZUNvdW50LCB0b3RhbEZsb29ycywgY3VycmVudEFjdGl2ZVJlc2lkZW5jZXMpO1xuICAgIHJldHVybiB7IGFjdGlvbjogXCJpbmNyZWFzZWRcIiB9O1xuICB9IGVsc2UgaWYgKG5ld1RvdGFsVW5pdHMgPCBjdXJyZW50QWN0aXZlQ291bnQpIHtcbiAgICBjb25zdCBkZWxldGFibGVSZXNpZGVuY2VzID0gYXdhaXQgZ2V0UmVzaWRlbmNlc0ZvclNlbGVjdGlvbihidWlsZGluZ0lkLCBjdXJyZW50QWN0aXZlQ291bnQgLSBuZXdUb3RhbFVuaXRzKTtcbiAgICByZXR1cm4geyBhY3Rpb246IFwiZGVjcmVhc2VkXCIsIHJlc2lkZW5jZXNUb1NlbGVjdDogZGVsZXRhYmxlUmVzaWRlbmNlcyB9O1xuICB9XG4gIHJldHVybiB7IGFjdGlvbjogXCJub25lXCIgfTtcbn1cbmFzeW5jIGZ1bmN0aW9uIGFkZFJlc2lkZW5jZXNBdXRvbWF0aWNhbGx5KGJ1aWxkaW5nSWQsIHJlc2lkZW5jZXNUb0FkZCwgdG90YWxGbG9vcnMsIGV4aXN0aW5nUmVzaWRlbmNlcykge1xuICBjb25zdCBleGlzdGluZ1VuaXROdW1iZXJzID0gbmV3IFNldChleGlzdGluZ1Jlc2lkZW5jZXMubWFwKChyKSA9PiByLnVuaXROdW1iZXIpKTtcbiAgY29uc3QgdW5pdHNQZXJGbG9vciA9IE1hdGguY2VpbCgoZXhpc3RpbmdSZXNpZGVuY2VzLmxlbmd0aCArIHJlc2lkZW5jZXNUb0FkZCkgLyB0b3RhbEZsb29ycyk7XG4gIGNvbnN0IHJlc2lkZW5jZXNUb0NyZWF0ZSA9IFtdO1xuICBsZXQgdW5pdENvdW50ZXIgPSAxO1xuICBsZXQgY3JlYXRlZCA9IDA7XG4gIHdoaWxlIChjcmVhdGVkIDwgcmVzaWRlbmNlc1RvQWRkKSB7XG4gICAgY29uc3QgZmxvb3IgPSBNYXRoLmNlaWwodW5pdENvdW50ZXIgLyB1bml0c1BlckZsb29yKTtcbiAgICBjb25zdCB1bml0T25GbG9vciA9ICh1bml0Q291bnRlciAtIDEpICUgdW5pdHNQZXJGbG9vciArIDE7XG4gICAgY29uc3QgdW5pdE51bWJlciA9IGAke2Zsb29yfSR7dW5pdE9uRmxvb3IudG9TdHJpbmcoKS5wYWRTdGFydCgyLCBcIjBcIil9YDtcbiAgICBpZiAoIWV4aXN0aW5nVW5pdE51bWJlcnMuaGFzKHVuaXROdW1iZXIpKSB7XG4gICAgICByZXNpZGVuY2VzVG9DcmVhdGUucHVzaCh7XG4gICAgICAgIGJ1aWxkaW5nSWQsXG4gICAgICAgIHVuaXROdW1iZXIsXG4gICAgICAgIGZsb29yLFxuICAgICAgICBpc0FjdGl2ZTogdHJ1ZVxuICAgICAgfSk7XG4gICAgICBleGlzdGluZ1VuaXROdW1iZXJzLmFkZCh1bml0TnVtYmVyKTtcbiAgICAgIGNyZWF0ZWQrKztcbiAgICB9XG4gICAgdW5pdENvdW50ZXIrKztcbiAgfVxuICBpZiAocmVzaWRlbmNlc1RvQ3JlYXRlLmxlbmd0aCA+IDApIHtcbiAgICBhd2FpdCBkYi5pbnNlcnQocmVzaWRlbmNlcykudmFsdWVzKHJlc2lkZW5jZXNUb0NyZWF0ZSk7XG4gICAgY29uc29sZS5sb2coYFxcdTI3MDUgQXV0by1jcmVhdGVkICR7cmVzaWRlbmNlc1RvQ3JlYXRlLmxlbmd0aH0gcmVzaWRlbmNlcyBmb3IgYnVpbGRpbmcgJHtidWlsZGluZ0lkfWApO1xuICB9XG59XG5hc3luYyBmdW5jdGlvbiBnZXRSZXNpZGVuY2VzRm9yU2VsZWN0aW9uKGJ1aWxkaW5nSWQsIG1heFRvU2VsZWN0KSB7XG4gIGNvbnN0IGFsbEFjdGl2ZVJlc2lkZW5jZXMgPSBhd2FpdCBkYi5zZWxlY3Qoe1xuICAgIGlkOiByZXNpZGVuY2VzLmlkLFxuICAgIHVuaXROdW1iZXI6IHJlc2lkZW5jZXMudW5pdE51bWJlcixcbiAgICBmbG9vcjogcmVzaWRlbmNlcy5mbG9vclxuICB9KS5mcm9tKHJlc2lkZW5jZXMpLndoZXJlKGFuZDUoZXE1KHJlc2lkZW5jZXMuYnVpbGRpbmdJZCwgYnVpbGRpbmdJZCksIGVxNShyZXNpZGVuY2VzLmlzQWN0aXZlLCB0cnVlKSkpLm9yZGVyQnkocmVzaWRlbmNlcy51bml0TnVtYmVyKTtcbiAgY29uc3QgcmVzaWRlbmNlRGV0YWlscyA9IGF3YWl0IFByb21pc2UuYWxsKFxuICAgIGFsbEFjdGl2ZVJlc2lkZW5jZXMubWFwKGFzeW5jIChyZXNpZGVuY2UpID0+IHtcbiAgICAgIGNvbnN0IGRvY3MgPSBhd2FpdCBkYi5zZWxlY3QoeyBpZDogZG9jdW1lbnRzLmlkIH0pLmZyb20oZG9jdW1lbnRzKS53aGVyZShlcTUoZG9jdW1lbnRzLnJlc2lkZW5jZUlkLCByZXNpZGVuY2UuaWQpKS5saW1pdCgxKTtcbiAgICAgIGNvbnN0IHVzZXJSZWxzID0gYXdhaXQgZGIuc2VsZWN0KHsgaWQ6IHVzZXJSZXNpZGVuY2VzLmlkIH0pLmZyb20odXNlclJlc2lkZW5jZXMpLndoZXJlKGFuZDUoZXE1KHVzZXJSZXNpZGVuY2VzLnJlc2lkZW5jZUlkLCByZXNpZGVuY2UuaWQpLCBlcTUodXNlclJlc2lkZW5jZXMuaXNBY3RpdmUsIHRydWUpKSkubGltaXQoMSk7XG4gICAgICByZXR1cm4ge1xuICAgICAgICBpZDogcmVzaWRlbmNlLmlkLFxuICAgICAgICB1bml0TnVtYmVyOiByZXNpZGVuY2UudW5pdE51bWJlcixcbiAgICAgICAgaGFzRG9jdW1lbnRzOiBkb2NzLmxlbmd0aCA+IDAsXG4gICAgICAgIGhhc1VzZXJzOiB1c2VyUmVscy5sZW5ndGggPiAwXG4gICAgICB9O1xuICAgIH0pXG4gICk7XG4gIHJldHVybiByZXNpZGVuY2VEZXRhaWxzLnNvcnQoKGEsIGIpID0+IHtcbiAgICBjb25zdCBhU2NvcmUgPSAoYS5oYXNEb2N1bWVudHMgPyAxIDogMCkgKyAoYS5oYXNVc2VycyA/IDEgOiAwKTtcbiAgICBjb25zdCBiU2NvcmUgPSAoYi5oYXNEb2N1bWVudHMgPyAxIDogMCkgKyAoYi5oYXNVc2VycyA/IDEgOiAwKTtcbiAgICByZXR1cm4gYVNjb3JlIC0gYlNjb3JlO1xuICB9KTtcbn1cbmFzeW5jIGZ1bmN0aW9uIGRlbGV0ZVNlbGVjdGVkUmVzaWRlbmNlcyhidWlsZGluZ0lkLCByZXNpZGVuY2VJZHMsIHVzZXJSb2xlKSB7XG4gIGlmICh1c2VyUm9sZSAhPT0gXCJhZG1pblwiKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKFwiT25seSBhZG1pbnMgY2FuIGRlbGV0ZSByZXNpZGVuY2VzXCIpO1xuICB9XG4gIGNvbnN0IGRvY3VtZW50c1RvRGVsZXRlID0gYXdhaXQgZGIuc2VsZWN0KHsgaWQ6IGRvY3VtZW50cy5pZCB9KS5mcm9tKGRvY3VtZW50cykud2hlcmUoaW5BcnJheTQoZG9jdW1lbnRzLnJlc2lkZW5jZUlkLCByZXNpZGVuY2VJZHMpKTtcbiAgYXdhaXQgZGIuZGVsZXRlKGRvY3VtZW50cykud2hlcmUoaW5BcnJheTQoZG9jdW1lbnRzLnJlc2lkZW5jZUlkLCByZXNpZGVuY2VJZHMpKTtcbiAgYXdhaXQgZGIudXBkYXRlKHVzZXJSZXNpZGVuY2VzKS5zZXQoeyBpc0FjdGl2ZTogZmFsc2UsIHVwZGF0ZWRBdDogLyogQF9fUFVSRV9fICovIG5ldyBEYXRlKCkgfSkud2hlcmUoYW5kNShpbkFycmF5NCh1c2VyUmVzaWRlbmNlcy5yZXNpZGVuY2VJZCwgcmVzaWRlbmNlSWRzKSwgZXE1KHVzZXJSZXNpZGVuY2VzLmlzQWN0aXZlLCB0cnVlKSkpO1xuICBhd2FpdCBkYi51cGRhdGUocmVzaWRlbmNlcykuc2V0KHsgaXNBY3RpdmU6IGZhbHNlLCB1cGRhdGVkQXQ6IC8qIEBfX1BVUkVfXyAqLyBuZXcgRGF0ZSgpIH0pLndoZXJlKGFuZDUoaW5BcnJheTQocmVzaWRlbmNlcy5pZCwgcmVzaWRlbmNlSWRzKSwgZXE1KHJlc2lkZW5jZXMuYnVpbGRpbmdJZCwgYnVpbGRpbmdJZCkpKTtcbiAgY29uc29sZS5sb2coYFxcdXsxRjVEMX1cXHVGRTBGIERlbGV0ZWQgJHtyZXNpZGVuY2VJZHMubGVuZ3RofSByZXNpZGVuY2VzIGFuZCAke2RvY3VtZW50c1RvRGVsZXRlLmxlbmd0aH0gZG9jdW1lbnRzIGZvciBidWlsZGluZyAke2J1aWxkaW5nSWR9YCk7XG4gIHJldHVybiB7XG4gICAgZGVsZXRlZENvdW50OiByZXNpZGVuY2VJZHMubGVuZ3RoLFxuICAgIGRvY3VtZW50c0RlbGV0ZWQ6IGRvY3VtZW50c1RvRGVsZXRlLmxlbmd0aFxuICB9O1xufVxuYXN5bmMgZnVuY3Rpb24gdXBkYXRlQnVpbGRpbmcoYnVpbGRpbmdJZCwgYnVpbGRpbmdEYXRhKSB7XG4gIGNvbnN0IGN1cnJlbnRCdWlsZGluZyA9IGF3YWl0IGRiLnNlbGVjdCh7IHRvdGFsVW5pdHM6IGJ1aWxkaW5ncy50b3RhbFVuaXRzLCB0b3RhbEZsb29yczogYnVpbGRpbmdzLnRvdGFsRmxvb3JzLCBvcmdhbml6YXRpb25JZDogYnVpbGRpbmdzLm9yZ2FuaXphdGlvbklkIH0pLmZyb20oYnVpbGRpbmdzKS53aGVyZShlcTUoYnVpbGRpbmdzLmlkLCBidWlsZGluZ0lkKSkubGltaXQoMSk7XG4gIGlmIChjdXJyZW50QnVpbGRpbmcubGVuZ3RoID09PSAwKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKFwiQnVpbGRpbmcgbm90IGZvdW5kXCIpO1xuICB9XG4gIGNvbnN0IHVwZGF0ZWRCdWlsZGluZyA9IGF3YWl0IGRiLnVwZGF0ZShidWlsZGluZ3MpLnNldCh7XG4gICAgbmFtZTogYnVpbGRpbmdEYXRhLm5hbWUsXG4gICAgYWRkcmVzczogYnVpbGRpbmdEYXRhLmFkZHJlc3MgfHwgXCJcIixcbiAgICBjaXR5OiBidWlsZGluZ0RhdGEuY2l0eSB8fCBcIlwiLFxuICAgIHByb3ZpbmNlOiBidWlsZGluZ0RhdGEucHJvdmluY2UgfHwgXCJRQ1wiLFxuICAgIHBvc3RhbENvZGU6IGJ1aWxkaW5nRGF0YS5wb3N0YWxDb2RlIHx8IFwiXCIsXG4gICAgYnVpbGRpbmdUeXBlOiBidWlsZGluZ0RhdGEuYnVpbGRpbmdUeXBlIHx8IFwiY29uZG9cIixcbiAgICB5ZWFyQnVpbHQ6IGJ1aWxkaW5nRGF0YS55ZWFyQnVpbHQsXG4gICAgdG90YWxVbml0czogYnVpbGRpbmdEYXRhLnRvdGFsVW5pdHMgfHwgMCxcbiAgICB0b3RhbEZsb29yczogYnVpbGRpbmdEYXRhLnRvdGFsRmxvb3JzLFxuICAgIHBhcmtpbmdTcGFjZXM6IGJ1aWxkaW5nRGF0YS5wYXJraW5nU3BhY2VzLFxuICAgIHN0b3JhZ2VTcGFjZXM6IGJ1aWxkaW5nRGF0YS5zdG9yYWdlU3BhY2VzLFxuICAgIGFtZW5pdGllczogYnVpbGRpbmdEYXRhLmFtZW5pdGllcyA/IEpTT04uc3RyaW5naWZ5KGJ1aWxkaW5nRGF0YS5hbWVuaXRpZXMpIDogbnVsbCxcbiAgICBtYW5hZ2VtZW50Q29tcGFueTogYnVpbGRpbmdEYXRhLm1hbmFnZW1lbnRDb21wYW55LFxuICAgIG9yZ2FuaXphdGlvbklkOiBidWlsZGluZ0RhdGEub3JnYW5pemF0aW9uSWQsXG4gICAgdXBkYXRlZEF0OiAvKiBAX19QVVJFX18gKi8gbmV3IERhdGUoKVxuICB9KS53aGVyZShlcTUoYnVpbGRpbmdzLmlkLCBidWlsZGluZ0lkKSkucmV0dXJuaW5nKCk7XG4gIGlmIChidWlsZGluZ0RhdGEudG90YWxVbml0cyAmJiBidWlsZGluZ0RhdGEudG90YWxVbml0cyAhPT0gY3VycmVudEJ1aWxkaW5nWzBdLnRvdGFsVW5pdHMpIHtcbiAgICBhd2FpdCBhZGp1c3RSZXNpZGVuY2VDb3VudChcbiAgICAgIGJ1aWxkaW5nSWQsXG4gICAgICBjdXJyZW50QnVpbGRpbmdbMF0ub3JnYW5pemF0aW9uSWQsXG4gICAgICBidWlsZGluZ0RhdGEudG90YWxVbml0cyxcbiAgICAgIGN1cnJlbnRCdWlsZGluZ1swXS50b3RhbFVuaXRzLFxuICAgICAgYnVpbGRpbmdEYXRhLnRvdGFsRmxvb3JzIHx8IGN1cnJlbnRCdWlsZGluZ1swXS50b3RhbEZsb29ycyB8fCAxXG4gICAgKTtcbiAgfVxuICByZXR1cm4gdXBkYXRlZEJ1aWxkaW5nWzBdO1xufVxuYXN5bmMgZnVuY3Rpb24gZGVsZXRlQnVpbGRpbmcoYnVpbGRpbmdJZCkge1xuICBjb25zdCBkZWxldGVkQnVpbGRpbmcgPSBhd2FpdCBkYi51cGRhdGUoYnVpbGRpbmdzKS5zZXQoe1xuICAgIGlzQWN0aXZlOiBmYWxzZSxcbiAgICB1cGRhdGVkQXQ6IC8qIEBfX1BVUkVfXyAqLyBuZXcgRGF0ZSgpXG4gIH0pLndoZXJlKGVxNShidWlsZGluZ3MuaWQsIGJ1aWxkaW5nSWQpKS5yZXR1cm5pbmcoKTtcbiAgcmV0dXJuIGRlbGV0ZWRCdWlsZGluZ1swXTtcbn1cbmFzeW5jIGZ1bmN0aW9uIGNhc2NhZGVEZWxldGVCdWlsZGluZyhidWlsZGluZ0lkKSB7XG4gIGNvbnN0IGJ1aWxkaW5nID0gYXdhaXQgZGIuc2VsZWN0KHsgaWQ6IGJ1aWxkaW5ncy5pZCwgbmFtZTogYnVpbGRpbmdzLm5hbWUgfSkuZnJvbShidWlsZGluZ3MpLndoZXJlKGFuZDUoZXE1KGJ1aWxkaW5ncy5pZCwgYnVpbGRpbmdJZCksIGVxNShidWlsZGluZ3MuaXNBY3RpdmUsIHRydWUpKSkubGltaXQoMSk7XG4gIGlmIChidWlsZGluZy5sZW5ndGggPT09IDApIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoXCJCdWlsZGluZyBub3QgZm91bmRcIik7XG4gIH1cbiAgYXdhaXQgZGIudHJhbnNhY3Rpb24oYXN5bmMgKHR4KSA9PiB7XG4gICAgY29uc3QgYnVpbGRpbmdSZXNpZGVuY2VzID0gYXdhaXQgdHguc2VsZWN0KHsgaWQ6IHJlc2lkZW5jZXMuaWQgfSkuZnJvbShyZXNpZGVuY2VzKS53aGVyZShhbmQ1KGVxNShyZXNpZGVuY2VzLmJ1aWxkaW5nSWQsIGJ1aWxkaW5nSWQpLCBlcTUocmVzaWRlbmNlcy5pc0FjdGl2ZSwgdHJ1ZSkpKTtcbiAgICBjb25zdCByZXNpZGVuY2VJZHMgPSBidWlsZGluZ1Jlc2lkZW5jZXMubWFwKChyKSA9PiByLmlkKTtcbiAgICBpZiAocmVzaWRlbmNlSWRzLmxlbmd0aCA+IDApIHtcbiAgICAgIGF3YWl0IHR4LmRlbGV0ZShkb2N1bWVudHMpLndoZXJlKGluQXJyYXk0KGRvY3VtZW50cy5yZXNpZGVuY2VJZCwgcmVzaWRlbmNlSWRzKSk7XG4gICAgICBhd2FpdCB0eC51cGRhdGUodXNlclJlc2lkZW5jZXMpLnNldCh7IGlzQWN0aXZlOiBmYWxzZSwgdXBkYXRlZEF0OiAvKiBAX19QVVJFX18gKi8gbmV3IERhdGUoKSB9KS53aGVyZShpbkFycmF5NCh1c2VyUmVzaWRlbmNlcy5yZXNpZGVuY2VJZCwgcmVzaWRlbmNlSWRzKSk7XG4gICAgICBjb25zb2xlLmxvZyhcIlxcdTI2QTBcXHVGRTBGICBVc2VyIGRlbGV0aW9uIGRpc2FibGVkIGZvciBkYXRhIHNhZmV0eSAtIHVzZXJzIHdpbGwgYmUgcHJlc2VydmVkXCIpO1xuICAgICAgYXdhaXQgdHgudXBkYXRlKHJlc2lkZW5jZXMpLnNldCh7IGlzQWN0aXZlOiBmYWxzZSwgdXBkYXRlZEF0OiAvKiBAX19QVVJFX18gKi8gbmV3IERhdGUoKSB9KS53aGVyZShpbkFycmF5NChyZXNpZGVuY2VzLmlkLCByZXNpZGVuY2VJZHMpKTtcbiAgICB9XG4gICAgYXdhaXQgdHgudXBkYXRlKGJ1aWxkaW5ncykuc2V0KHsgaXNBY3RpdmU6IGZhbHNlLCB1cGRhdGVkQXQ6IC8qIEBfX1BVUkVfXyAqLyBuZXcgRGF0ZSgpIH0pLndoZXJlKGVxNShidWlsZGluZ3MuaWQsIGJ1aWxkaW5nSWQpKTtcbiAgfSk7XG4gIHJldHVybiBidWlsZGluZ1swXTtcbn1cbmFzeW5jIGZ1bmN0aW9uIGJ1aWxkaW5nRXhpc3RzKGJ1aWxkaW5nSWQpIHtcbiAgY29uc3QgcmVzdWx0ID0gYXdhaXQgZGIuc2VsZWN0KHsgaWQ6IGJ1aWxkaW5ncy5pZCB9KS5mcm9tKGJ1aWxkaW5ncykud2hlcmUoYW5kNShlcTUoYnVpbGRpbmdzLmlkLCBidWlsZGluZ0lkKSwgZXE1KGJ1aWxkaW5ncy5pc0FjdGl2ZSwgdHJ1ZSkpKS5saW1pdCgxKTtcbiAgcmV0dXJuIHJlc3VsdC5sZW5ndGggPiAwO1xufVxudmFyIGluaXRfb3BlcmF0aW9uczIgPSBfX2VzbSh7XG4gIFwic2VydmVyL2FwaS9idWlsZGluZ3Mvb3BlcmF0aW9ucy50c1wiKCkge1xuICAgIGluaXRfZGIoKTtcbiAgICBpbml0X3NjaGVtYSgpO1xuICB9XG59KTtcblxuLy8gc2VydmVyL2luZGV4LnRzXG5pbXBvcnQgZXhwcmVzczQgZnJvbSBcImV4cHJlc3NcIjtcbmltcG9ydCBoZWxtZXQgZnJvbSBcImhlbG1ldFwiO1xuXG4vLyBzZXJ2ZXIvaGVhbHRoLWNoZWNrLnRzXG5mdW5jdGlvbiBjcmVhdGVGYXN0SGVhbHRoQ2hlY2soKSB7XG4gIHJldHVybiAocmVxLCByZXMpID0+IHtcbiAgICByZXEuc2V0VGltZW91dCgyMDAsICgpID0+IHtcbiAgICAgIGlmICghcmVzLmhlYWRlcnNTZW50KSB7XG4gICAgICAgIHJlcy5zdGF0dXMoMjAwKS5zZW5kKFwiT0tcIik7XG4gICAgICB9XG4gICAgfSk7XG4gICAgcmVzLnNldCh7XG4gICAgICBcIkNhY2hlLUNvbnRyb2xcIjogXCJuby1jYWNoZSwgbm8tc3RvcmUsIG11c3QtcmV2YWxpZGF0ZVwiLFxuICAgICAgQ29ubmVjdGlvbjogXCJjbG9zZVwiLFxuICAgICAgXCJDb250ZW50LVR5cGVcIjogXCJ0ZXh0L3BsYWluXCIsXG4gICAgICBcIlgtSGVhbHRoLUNoZWNrXCI6IFwiT0tcIixcbiAgICAgIFwiWC1SZXNwb25zZS1UaW1lXCI6IERhdGUubm93KCkudG9TdHJpbmcoKVxuICAgIH0pO1xuICAgIHJlcy5zdGF0dXMoMjAwKS5zZW5kKFwiT0tcIik7XG4gIH07XG59XG5mdW5jdGlvbiBjcmVhdGVTdGF0dXNDaGVjaygpIHtcbiAgcmV0dXJuIChyZXEsIHJlcykgPT4ge1xuICAgIHJlcS5zZXRUaW1lb3V0KDIwMCwgKCkgPT4ge1xuICAgICAgaWYgKCFyZXMuaGVhZGVyc1NlbnQpIHtcbiAgICAgICAgcmVzLnN0YXR1cygyMDApLmpzb24oeyBzdGF0dXM6IFwib2tcIiB9KTtcbiAgICAgIH1cbiAgICB9KTtcbiAgICByZXMuc2V0KHtcbiAgICAgIFwiQ2FjaGUtQ29udHJvbFwiOiBcIm5vLWNhY2hlLCBuby1zdG9yZSwgbXVzdC1yZXZhbGlkYXRlXCIsXG4gICAgICBDb25uZWN0aW9uOiBcImNsb3NlXCIsXG4gICAgICBcIkNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIlxuICAgIH0pO1xuICAgIHJlcy5zdGF0dXMoMjAwKS5qc29uKHtcbiAgICAgIHN0YXR1czogXCJva1wiLFxuICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgfSk7XG4gIH07XG59XG5cbi8vIHNlcnZlci9pbmRleC50c1xuYXdhaXQgaW5pdF92aXRlKCk7XG5cbi8vIHNlcnZlci9yb3V0ZXMudHNcbmltcG9ydCBleHByZXNzMyBmcm9tIFwiZXhwcmVzc1wiO1xuXG4vLyBzZXJ2ZXIvYXV0aC50c1xuaW5pdF9zdG9yYWdlKCk7XG5pbml0X2RiKCk7XG5pbml0X2NvbmZpZygpO1xuaW5pdF9zY2hlbWEoKTtcbmltcG9ydCBzZXNzaW9uIGZyb20gXCJleHByZXNzLXNlc3Npb25cIjtcbmltcG9ydCBjb25uZWN0UGcgZnJvbSBcImNvbm5lY3QtcGctc2ltcGxlXCI7XG5pbXBvcnQgeyBjcmVhdGVIYXNoLCByYW5kb21CeXRlcyB9IGZyb20gXCJjcnlwdG9cIjtcbmltcG9ydCAqIGFzIGJjcnlwdCBmcm9tIFwiYmNyeXB0anNcIjtcbmltcG9ydCB7IFBvb2wgfSBmcm9tIFwiQG5lb25kYXRhYmFzZS9zZXJ2ZXJsZXNzXCI7XG5pbXBvcnQgeyBlcSBhcyBlcTIsIGFuZCBhcyBhbmQyIH0gZnJvbSBcImRyaXp6bGUtb3JtXCI7XG5cbi8vIHNlcnZlci9zZXJ2aWNlcy9lbWFpbC1zZXJ2aWNlLnRzXG5pbXBvcnQgeyBNYWlsU2VydmljZSB9IGZyb20gXCJAc2VuZGdyaWQvbWFpbFwiO1xudmFyIEVtYWlsU2VydmljZSA9IGNsYXNzIHtcbiAgLyoqXG4gICAqIEluaXRpYWxpemVzIHRoZSBFbWFpbFNlcnZpY2Ugd2l0aCBTZW5kR3JpZCBjb25maWd1cmF0aW9uLlxuICAgKiBWYWxpZGF0ZXMgdGhhdCB0aGUgU0VOREdSSURfQVBJX0tFWSBlbnZpcm9ubWVudCB2YXJpYWJsZSBpcyBzZXQuXG4gICAqXG4gICAqIEB0aHJvd3Mge0Vycm9yfSBXaGVuIFNFTkRHUklEX0FQSV9LRVkgZW52aXJvbm1lbnQgdmFyaWFibGUgaXMgbm90IHNldC5cbiAgICpcbiAgICogQGV4YW1wbGVcbiAgICogYGBgdHlwZXNjcmlwdFxuICAgKiBjb25zdCBlbWFpbFNlcnZpY2UgPSBuZXcgRW1haWxTZXJ2aWNlKCk7XG4gICAqIGF3YWl0IGVtYWlsU2VydmljZS5zZW5kUGFzc3dvcmRSZXNldEVtYWlsKCd1c2VyQGV4YW1wbGUuY29tJywgJ0pvaG4nLCAnaHR0cHM6Ly9yZXNldC11cmwnKTtcbiAgICogYGBgXG4gICAqL1xuICBjb25zdHJ1Y3RvcigpIHtcbiAgICB0aGlzLmZyb21FbWFpbCA9IFwiaW5mb0Brb3Zlby1nZXN0aW9uLmNvbVwiO1xuICAgIHRoaXMuZnJvbU5hbWUgPSBcIktvdmVvIEdlc3Rpb25cIjtcbiAgICBpZiAoIXByb2Nlc3MuZW52LlNFTkRHUklEX0FQSV9LRVkpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIlNFTkRHUklEX0FQSV9LRVkgZW52aXJvbm1lbnQgdmFyaWFibGUgbXVzdCBiZSBzZXRcIik7XG4gICAgfVxuICAgIHRoaXMubWFpbFNlcnZpY2UgPSBuZXcgTWFpbFNlcnZpY2UoKTtcbiAgICB0aGlzLm1haWxTZXJ2aWNlLnNldEFwaUtleShwcm9jZXNzLmVudi5TRU5ER1JJRF9BUElfS0VZKTtcbiAgfVxuICAvKipcbiAgICogU2VuZHMgcGFzc3dvcmQgcmVzZXQgZW1haWwgaW4gRnJlbmNoIG9yIEVuZ2xpc2ggd2l0aCBRdWViZWMgTGF3IDI1IGNvbXBsaWFuY2UuXG4gICAqIExpbmsgdHJhY2tpbmcgaXMgZGlzYWJsZWQgZm9yIGRpcmVjdCBVUkwgYWNjZXNzIGFzIHJlcXVpcmVkIGJ5IHNlY3VyaXR5IHByb3RvY29scy5cbiAgICpcbiAgICogQHBhcmFtIHtzdHJpbmd9IHRvIC0gUmVjaXBpZW50IGVtYWlsIGFkZHJlc3MuXG4gICAqIEBwYXJhbSB7c3RyaW5nfSB1c2VyTmFtZSAtIFVzZXIncyBkaXNwbGF5IG5hbWUgZm9yIHBlcnNvbmFsaXphdGlvbi5cbiAgICogQHBhcmFtIHtzdHJpbmd9IHJlc2V0VXJsIC0gQ29tcGxldGUgcGFzc3dvcmQgcmVzZXQgVVJMIHdpdGggdG9rZW4uXG4gICAqIEBwYXJhbSB7J2ZyJyB8ICdlbid9IFtsYW5ndWFnZT0nZnInXSAtIEVtYWlsIGxhbmd1YWdlIChkZWZhdWx0cyB0byBGcmVuY2ggZm9yIFF1ZWJlYykuXG4gICAqIEByZXR1cm5zIHtQcm9taXNlPGJvb2xlYW4+fSBQcm9taXNlIHJlc29sdmluZyB0byB0cnVlIGlmIGVtYWlsIHNlbnQgc3VjY2Vzc2Z1bGx5LlxuICAgKlxuICAgKiBAdGhyb3dzIHtFcnJvcn0gV2hlbiBTZW5kR3JpZCBBUEkgZmFpbHMgb3IgaW52YWxpZCBwYXJhbWV0ZXJzIHByb3ZpZGVkLlxuICAgKlxuICAgKiBAZXhhbXBsZVxuICAgKiBgYGB0eXBlc2NyaXB0XG4gICAqIGNvbnN0IGVtYWlsU2VydmljZSA9IG5ldyBFbWFpbFNlcnZpY2UoKTtcbiAgICogY29uc3Qgc3VjY2VzcyA9IGF3YWl0IGVtYWlsU2VydmljZS5zZW5kUGFzc3dvcmRSZXNldEVtYWlsKFxuICAgKiAgICd1c2VyQGV4YW1wbGUuY29tJyxcbiAgICogICAnSmVhbiBEdXBvbnQnLFxuICAgKiAgICdodHRwczovL2FwcC5rb3Zlby5jb20vcmVzZXQtcGFzc3dvcmQ/dG9rZW49YWJjMTIzJyxcbiAgICogICAnZnInXG4gICAqICk7XG4gICAqIGBgYFxuICAgKi9cbiAgYXN5bmMgc2VuZFBhc3N3b3JkUmVzZXRFbWFpbCh0bywgdXNlck5hbWUsIHJlc2V0VXJsLCBsYW5ndWFnZSA9IFwiZnJcIikge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCB0ZW1wbGF0ZXMgPSB7XG4gICAgICAgIGZyOiB7XG4gICAgICAgICAgc3ViamVjdDogXCJSXFx4RTlpbml0aWFsaXNhdGlvbiBkZSB2b3RyZSBtb3QgZGUgcGFzc2UgLSBLb3ZlbyBHZXN0aW9uXCIsXG4gICAgICAgICAgaHRtbDogYFxuICAgICAgICAgICAgPCFET0NUWVBFIGh0bWw+XG4gICAgICAgICAgICA8aHRtbD5cbiAgICAgICAgICAgIDxoZWFkPlxuICAgICAgICAgICAgICA8bWV0YSBjaGFyc2V0PVwiVVRGLThcIj5cbiAgICAgICAgICAgICAgPHRpdGxlPlJcXHhFOWluaXRpYWxpc2F0aW9uIGRlIG1vdCBkZSBwYXNzZTwvdGl0bGU+XG4gICAgICAgICAgICA8L2hlYWQ+XG4gICAgICAgICAgICA8Ym9keSBzdHlsZT1cImZvbnQtZmFtaWx5OiBBcmlhbCwgc2Fucy1zZXJpZjsgbWF4LXdpZHRoOiA2MDBweDsgbWFyZ2luOiAwIGF1dG87IHBhZGRpbmc6IDIwcHg7XCI+XG4gICAgICAgICAgICAgIDxkaXYgc3R5bGU9XCJiYWNrZ3JvdW5kOiAjZjhmOWZhOyBwYWRkaW5nOiAzMHB4OyBib3JkZXItcmFkaXVzOiA4cHg7XCI+XG4gICAgICAgICAgICAgICAgPGgxIHN0eWxlPVwiY29sb3I6ICMyNTYzZWI7IG1hcmdpbi1ib3R0b206IDIwcHg7XCI+S292ZW8gR2VzdGlvbjwvaDE+XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgPGgyIHN0eWxlPVwiY29sb3I6ICMzNzQxNTE7XCI+UlxceEU5aW5pdGlhbGlzYXRpb24gZGUgdm90cmUgbW90IGRlIHBhc3NlPC9oMj5cbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICA8cD5Cb25qb3VyICR7dXNlck5hbWV9LDwvcD5cbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICA8cD5Wb3VzIGF2ZXogZGVtYW5kXFx4RTkgbGEgclxceEU5aW5pdGlhbGlzYXRpb24gZGUgdm90cmUgbW90IGRlIHBhc3NlIHBvdXIgdm90cmUgY29tcHRlIEtvdmVvIEdlc3Rpb24uPC9wPlxuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIDxwPkNvcGlleiBldCBjb2xsZXogY2UgbGllbiBkYW5zIHZvdHJlIG5hdmlnYXRldXIgcG91ciByXFx4RTlpbml0aWFsaXNlciB2b3RyZSBtb3QgZGUgcGFzc2UgOjwvcD5cbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICA8ZGl2IHN0eWxlPVwiYmFja2dyb3VuZDogI2YzZjRmNjsgcGFkZGluZzogMTVweDsgYm9yZGVyLXJhZGl1czogNnB4OyBtYXJnaW46IDIwcHggMDsgd29yZC1icmVhazogYnJlYWstYWxsO1wiPlxuICAgICAgICAgICAgICAgICAgPGNvZGUgc3R5bGU9XCJmb250LXNpemU6IDE0cHg7IGNvbG9yOiAjMzc0MTUxO1wiPiR7cmVzZXRVcmx9PC9jb2RlPlxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIDxwIHN0eWxlPVwidGV4dC1hbGlnbjogY2VudGVyOyBtYXJnaW46IDIwcHggMDtcIj5cbiAgICAgICAgICAgICAgICAgIDxzdHJvbmcgc3R5bGU9XCJjb2xvcjogI2RjMjYyNjtcIj5JbXBvcnRhbnQ6PC9zdHJvbmc+IENlIGxpZW4gZXhwaXJlIGRhbnMgMSBoZXVyZS5cbiAgICAgICAgICAgICAgICA8L3A+XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgPHA+PHN0cm9uZz5DZSBsaWVuIGV4cGlyZSBkYW5zIDEgaGV1cmUgcG91ciB2b3RyZSBzXFx4RTljdXJpdFxceEU5Ljwvc3Ryb25nPjwvcD5cbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICA8cD5TaSB2b3VzIG4nYXZleiBwYXMgZGVtYW5kXFx4RTkgY2V0dGUgclxceEU5aW5pdGlhbGlzYXRpb24sIGlnbm9yZXogY2UgY291cnJpZWwuPC9wPlxuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIDxociBzdHlsZT1cImJvcmRlcjogbm9uZTsgYm9yZGVyLXRvcDogMXB4IHNvbGlkICNlNWU3ZWI7IG1hcmdpbjogMzBweCAwO1wiPlxuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIDxkaXYgc3R5bGU9XCJmb250LXNpemU6IDEycHg7IGNvbG9yOiAjNmI3MjgwO1wiPlxuICAgICAgICAgICAgICAgICAgPHA+PHN0cm9uZz5Db25maWRlbnRpYWxpdFxceEU5ICYgU1xceEU5Y3VyaXRcXHhFOTwvc3Ryb25nPjwvcD5cbiAgICAgICAgICAgICAgICAgIDxwPkNvbmZvcm1lIFxceEUwIGxhIExvaSAyNSBkdSBRdVxceEU5YmVjLiBWb3MgZG9ublxceEU5ZXMgcGVyc29ubmVsbGVzIHNvbnQgcHJvdFxceEU5Z1xceEU5ZXMgc2Vsb24gbGVzIG5vcm1lcyBkZSBzXFx4RTljdXJpdFxceEU5IGxlcyBwbHVzIHN0cmljdGVzLjwvcD5cbiAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgPHA+XFx4QTkgMjAyNSBLb3ZlbyBHZXN0aW9uLiBUb3VzIGRyb2l0cyByXFx4RTlzZXJ2XFx4RTlzLjwvcD5cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICA8L2JvZHk+XG4gICAgICAgICAgICA8L2h0bWw+XG4gICAgICAgICAgYCxcbiAgICAgICAgICB0ZXh0OiBgUlxceEU5aW5pdGlhbGlzYXRpb24gZGUgdm90cmUgbW90IGRlIHBhc3NlIC0gS292ZW8gR2VzdGlvblxuXG5Cb25qb3VyICR7dXNlck5hbWV9LFxuXG5Wb3VzIGF2ZXogZGVtYW5kXFx4RTkgbGEgclxceEU5aW5pdGlhbGlzYXRpb24gZGUgdm90cmUgbW90IGRlIHBhc3NlIHBvdXIgdm90cmUgY29tcHRlIEtvdmVvIEdlc3Rpb24uXG5cbkNsaXF1ZXogc3VyIGNlIGxpZW4gcG91ciBjclxceEU5ZXIgdW4gbm91dmVhdSBtb3QgZGUgcGFzc2UgOlxuJHtyZXNldFVybH1cblxuQ2UgbGllbiBleHBpcmUgZGFucyAxIGhldXJlIHBvdXIgdm90cmUgc1xceEU5Y3VyaXRcXHhFOS5cblxuU2kgdm91cyBuJ2F2ZXogcGFzIGRlbWFuZFxceEU5IGNldHRlIHJcXHhFOWluaXRpYWxpc2F0aW9uLCBpZ25vcmV6IGNlIGNvdXJyaWVsLlxuXG5Db25mb3JtZSBcXHhFMCBsYSBMb2kgMjUgZHUgUXVcXHhFOWJlYy4gVm9zIGRvbm5cXHhFOWVzIHBlcnNvbm5lbGxlcyBzb250IHByb3RcXHhFOWdcXHhFOWVzIHNlbG9uIGxlcyBub3JtZXMgZGUgc1xceEU5Y3VyaXRcXHhFOSBsZXMgcGx1cyBzdHJpY3Rlcy5cblxuXFx4QTkgMjAyNSBLb3ZlbyBHZXN0aW9uLiBUb3VzIGRyb2l0cyByXFx4RTlzZXJ2XFx4RTlzLmBcbiAgICAgICAgfSxcbiAgICAgICAgZW46IHtcbiAgICAgICAgICBzdWJqZWN0OiBcIlBhc3N3b3JkIFJlc2V0IC0gS292ZW8gR2VzdGlvblwiLFxuICAgICAgICAgIGh0bWw6IGBcbiAgICAgICAgICAgIDwhRE9DVFlQRSBodG1sPlxuICAgICAgICAgICAgPGh0bWw+XG4gICAgICAgICAgICA8aGVhZD5cbiAgICAgICAgICAgICAgPG1ldGEgY2hhcnNldD1cIlVURi04XCI+XG4gICAgICAgICAgICAgIDx0aXRsZT5QYXNzd29yZCBSZXNldDwvdGl0bGU+XG4gICAgICAgICAgICA8L2hlYWQ+XG4gICAgICAgICAgICA8Ym9keSBzdHlsZT1cImZvbnQtZmFtaWx5OiBBcmlhbCwgc2Fucy1zZXJpZjsgbWF4LXdpZHRoOiA2MDBweDsgbWFyZ2luOiAwIGF1dG87IHBhZGRpbmc6IDIwcHg7XCI+XG4gICAgICAgICAgICAgIDxkaXYgc3R5bGU9XCJiYWNrZ3JvdW5kOiAjZjhmOWZhOyBwYWRkaW5nOiAzMHB4OyBib3JkZXItcmFkaXVzOiA4cHg7XCI+XG4gICAgICAgICAgICAgICAgPGgxIHN0eWxlPVwiY29sb3I6ICMyNTYzZWI7IG1hcmdpbi1ib3R0b206IDIwcHg7XCI+S292ZW8gR2VzdGlvbjwvaDE+XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgPGgyIHN0eWxlPVwiY29sb3I6ICMzNzQxNTE7XCI+UmVzZXQgWW91ciBQYXNzd29yZDwvaDI+XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgPHA+SGVsbG8gJHt1c2VyTmFtZX0sPC9wPlxuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIDxwPllvdSBoYXZlIHJlcXVlc3RlZCB0byByZXNldCB5b3VyIHBhc3N3b3JkIGZvciB5b3VyIEtvdmVvIEdlc3Rpb24gYWNjb3VudC48L3A+XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgPHA+Q29weSBhbmQgcGFzdGUgdGhpcyBsaW5rIGludG8geW91ciBicm93c2VyIHRvIHJlc2V0IHlvdXIgcGFzc3dvcmQ6PC9wPlxuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIDxkaXYgc3R5bGU9XCJiYWNrZ3JvdW5kOiAjZjNmNGY2OyBwYWRkaW5nOiAxNXB4OyBib3JkZXItcmFkaXVzOiA2cHg7IG1hcmdpbjogMjBweCAwOyB3b3JkLWJyZWFrOiBicmVhay1hbGw7XCI+XG4gICAgICAgICAgICAgICAgICA8Y29kZSBzdHlsZT1cImZvbnQtc2l6ZTogMTRweDsgY29sb3I6ICMzNzQxNTE7XCI+JHtyZXNldFVybH08L2NvZGU+XG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgPHAgc3R5bGU9XCJ0ZXh0LWFsaWduOiBjZW50ZXI7IG1hcmdpbjogMjBweCAwO1wiPlxuICAgICAgICAgICAgICAgICAgPHN0cm9uZyBzdHlsZT1cImNvbG9yOiAjZGMyNjI2O1wiPkltcG9ydGFudDo8L3N0cm9uZz4gVGhpcyBsaW5rIGV4cGlyZXMgaW4gMSBob3VyLlxuICAgICAgICAgICAgICAgIDwvcD5cbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICA8cD48c3Ryb25nPlRoaXMgbGluayBleHBpcmVzIGluIDEgaG91ciBmb3IgeW91ciBzZWN1cml0eS48L3N0cm9uZz48L3A+XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgPHA+SWYgeW91IGRpZCBub3QgcmVxdWVzdCB0aGlzIHJlc2V0LCBwbGVhc2UgaWdub3JlIHRoaXMgZW1haWwuPC9wPlxuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIDxociBzdHlsZT1cImJvcmRlcjogbm9uZTsgYm9yZGVyLXRvcDogMXB4IHNvbGlkICNlNWU3ZWI7IG1hcmdpbjogMzBweCAwO1wiPlxuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIDxkaXYgc3R5bGU9XCJmb250LXNpemU6IDEycHg7IGNvbG9yOiAjNmI3MjgwO1wiPlxuICAgICAgICAgICAgICAgICAgPHA+PHN0cm9uZz5Qcml2YWN5ICYgU2VjdXJpdHk8L3N0cm9uZz48L3A+XG4gICAgICAgICAgICAgICAgICA8cD5RdWViZWMgTGF3IDI1IGNvbXBsaWFudC4gWW91ciBwZXJzb25hbCBkYXRhIGlzIHByb3RlY3RlZCBhY2NvcmRpbmcgdG8gdGhlIHN0cmljdGVzdCBzZWN1cml0eSBzdGFuZGFyZHMuPC9wPlxuICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICA8cD5cXHhBOSAyMDI1IEtvdmVvIEdlc3Rpb24uIEFsbCByaWdodHMgcmVzZXJ2ZWQuPC9wPlxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIDwvYm9keT5cbiAgICAgICAgICAgIDwvaHRtbD5cbiAgICAgICAgICBgLFxuICAgICAgICAgIHRleHQ6IGBQYXNzd29yZCBSZXNldCAtIEtvdmVvIEdlc3Rpb25cblxuSGVsbG8gJHt1c2VyTmFtZX0sXG5cbllvdSBoYXZlIHJlcXVlc3RlZCB0byByZXNldCB5b3VyIHBhc3N3b3JkIGZvciB5b3VyIEtvdmVvIEdlc3Rpb24gYWNjb3VudC5cblxuQ2xpY2sgdGhpcyBsaW5rIHRvIGNyZWF0ZSBhIG5ldyBwYXNzd29yZDpcbiR7cmVzZXRVcmx9XG5cblRoaXMgbGluayBleHBpcmVzIGluIDEgaG91ciBmb3IgeW91ciBzZWN1cml0eS5cblxuSWYgeW91IGRpZCBub3QgcmVxdWVzdCB0aGlzIHJlc2V0LCBwbGVhc2UgaWdub3JlIHRoaXMgZW1haWwuXG5cblF1ZWJlYyBMYXcgMjUgY29tcGxpYW50LiBZb3VyIHBlcnNvbmFsIGRhdGEgaXMgcHJvdGVjdGVkIGFjY29yZGluZyB0byB0aGUgc3RyaWN0ZXN0IHNlY3VyaXR5IHN0YW5kYXJkcy5cblxuXFx4QTkgMjAyNSBLb3ZlbyBHZXN0aW9uLiBBbGwgcmlnaHRzIHJlc2VydmVkLmBcbiAgICAgICAgfVxuICAgICAgfTtcbiAgICAgIGNvbnN0IHRlbXBsYXRlID0gdGVtcGxhdGVzW2xhbmd1YWdlXTtcbiAgICAgIGF3YWl0IHRoaXMubWFpbFNlcnZpY2Uuc2VuZCh7XG4gICAgICAgIHRvLFxuICAgICAgICBmcm9tOiB7XG4gICAgICAgICAgZW1haWw6IHRoaXMuZnJvbUVtYWlsLFxuICAgICAgICAgIG5hbWU6IHRoaXMuZnJvbU5hbWVcbiAgICAgICAgfSxcbiAgICAgICAgc3ViamVjdDogdGVtcGxhdGUuc3ViamVjdCxcbiAgICAgICAgdGV4dDogdGVtcGxhdGUudGV4dCxcbiAgICAgICAgaHRtbDogdGVtcGxhdGUuaHRtbCxcbiAgICAgICAgbWFpbFNldHRpbmdzOiB7XG4gICAgICAgICAgYnlwYXNzTGlzdE1hbmFnZW1lbnQ6IHtcbiAgICAgICAgICAgIGVuYWJsZTogZmFsc2VcbiAgICAgICAgICB9LFxuICAgICAgICAgIGZvb3Rlcjoge1xuICAgICAgICAgICAgZW5hYmxlOiBmYWxzZVxuICAgICAgICAgIH0sXG4gICAgICAgICAgc2FuZGJveE1vZGU6IHtcbiAgICAgICAgICAgIGVuYWJsZTogZmFsc2VcbiAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIHRyYWNraW5nU2V0dGluZ3M6IHtcbiAgICAgICAgICBjbGlja1RyYWNraW5nOiB7XG4gICAgICAgICAgICBlbmFibGU6IGZhbHNlLFxuICAgICAgICAgICAgZW5hYmxlVGV4dDogZmFsc2VcbiAgICAgICAgICB9LFxuICAgICAgICAgIG9wZW5UcmFja2luZzoge1xuICAgICAgICAgICAgZW5hYmxlOiBmYWxzZVxuICAgICAgICAgIH0sXG4gICAgICAgICAgc3Vic2NyaXB0aW9uVHJhY2tpbmc6IHtcbiAgICAgICAgICAgIGVuYWJsZTogZmFsc2VcbiAgICAgICAgICB9LFxuICAgICAgICAgIGdhbmFseXRpY3M6IHtcbiAgICAgICAgICAgIGVuYWJsZTogZmFsc2VcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoXCJcXHUyNzRDIEVycm9yIHNlbmRpbmcgZW1haWw6XCIsIGVycm9yKTtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gIH1cbiAgLyoqXG4gICAqIFNlbmRzIGFuIGludml0YXRpb24gZW1haWwgdG8gYSBuZXcgdXNlciB3aXRoIHRoZWlyIGludml0YXRpb24gbGluay5cbiAgICpcbiAgICogQHBhcmFtIHtzdHJpbmd9IHRvIC0gUmVjaXBpZW50J3MgZW1haWwgYWRkcmVzcy5cbiAgICogQHBhcmFtIHtzdHJpbmd9IHJlY2lwaWVudE5hbWUgLSBOYW1lIG9mIHRoZSBwZXJzb24gYmVpbmcgaW52aXRlZC5cbiAgICogQHBhcmFtIHtzdHJpbmd9IHRva2VuIC0gSW52aXRhdGlvbiB0b2tlbiBmb3IgdGhlIHJlZ2lzdHJhdGlvbiBVUkwuXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBvcmdhbml6YXRpb25OYW1lIC0gTmFtZSBvZiB0aGUgb3JnYW5pemF0aW9uIHRoZXkncmUgYmVpbmcgaW52aXRlZCB0by5cbiAgICogQHBhcmFtIHtzdHJpbmd9IGludml0ZXJOYW1lIC0gTmFtZSBvZiB0aGUgcGVyc29uIHNlbmRpbmcgdGhlIGludml0YXRpb24uXG4gICAqIEBwYXJhbSB7RGF0ZX0gZXhwaXJlc0F0IC0gV2hlbiB0aGUgaW52aXRhdGlvbiBleHBpcmVzLlxuICAgKiBAcGFyYW0ge3N0cmluZ30gbGFuZ3VhZ2UgLSBMYW5ndWFnZSBwcmVmZXJlbmNlIChlbi9mcikuXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBwZXJzb25hbE1lc3NhZ2UgLSBPcHRpb25hbCBwZXJzb25hbCBtZXNzYWdlIGZyb20gaW52aXRlci5cbiAgICogQHJldHVybnMge1Byb21pc2U8Ym9vbGVhbj59IFByb21pc2UgcmVzb2x2aW5nIHRvIHRydWUgaWYgZW1haWwgc2VudCBzdWNjZXNzZnVsbHkuXG4gICAqL1xuICBhc3luYyBzZW5kSW52aXRhdGlvbkVtYWlsKHRvLCByZWNpcGllbnROYW1lLCB0b2tlbiwgb3JnYW5pemF0aW9uTmFtZSwgaW52aXRlck5hbWUsIGV4cGlyZXNBdCwgbGFuZ3VhZ2UgPSBcImZyXCIsIHBlcnNvbmFsTWVzc2FnZSkge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCBpc0RldmVsb3BtZW50ID0gcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiO1xuICAgICAgbGV0IGJhc2VVcmw7XG4gICAgICBpZiAoaXNEZXZlbG9wbWVudCkge1xuICAgICAgICBjb25zdCByZXBsaXRVcmwgPSBwcm9jZXNzLmVudi5SRVBMSVRfRE9NQUlOUyA/IGBodHRwczovLyR7cHJvY2Vzcy5lbnYuUkVQTElUX0RPTUFJTlN9YCA6IG51bGw7XG4gICAgICAgIGJhc2VVcmwgPSByZXBsaXRVcmwgfHwgXCJodHRwOi8vbG9jYWxob3N0OjUwMDBcIjtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGJhc2VVcmwgPSBwcm9jZXNzLmVudi5GUk9OVEVORF9VUkwgfHwgXCJodHRwOi8vbG9jYWxob3N0OjUwMDBcIjtcbiAgICAgIH1cbiAgICAgIGNvbnN0IGludml0YXRpb25VcmwgPSBgJHtiYXNlVXJsfS9yZWdpc3Rlcj9pbnZpdGF0aW9uPSR7dG9rZW59YDtcbiAgICAgIGNvbnN0IGV4cGlyeURhdGUgPSBleHBpcmVzQXQudG9Mb2NhbGVEYXRlU3RyaW5nKGxhbmd1YWdlID09PSBcImZyXCIgPyBcImZyLUNBXCIgOiBcImVuLUNBXCIpO1xuICAgICAgY29uc3QgaXNGcmVuY2ggPSBsYW5ndWFnZSA9PT0gXCJmclwiO1xuICAgICAgY29uc3Qgc3ViamVjdCA9IGlzRnJlbmNoID8gYEludml0YXRpb24gXFx4RTAgcmVqb2luZHJlICR7b3JnYW5pemF0aW9uTmFtZX0gLSBLb3ZlbyBHZXN0aW9uYCA6IGBJbnZpdGF0aW9uIHRvIGpvaW4gJHtvcmdhbml6YXRpb25OYW1lfSAtIEtvdmVvIEdlc3Rpb25gO1xuICAgICAgY29uc3QgaHRtbENvbnRlbnQgPSBgXG4gICAgICAgIDxkaXYgc3R5bGU9XCJmb250LWZhbWlseTogQXJpYWwsIHNhbnMtc2VyaWY7IG1heC13aWR0aDogNjAwcHg7IG1hcmdpbjogMCBhdXRvO1wiPlxuICAgICAgICAgIDxoMiBzdHlsZT1cImNvbG9yOiAjMjU2M2ViO1wiPiR7aXNGcmVuY2ggPyBcIkludml0YXRpb24gXFx4RTAgS292ZW8gR2VzdGlvblwiIDogXCJLb3ZlbyBHZXN0aW9uIEludml0YXRpb25cIn08L2gyPlxuICAgICAgICAgIFxuICAgICAgICAgIDxwPiR7aXNGcmVuY2ggPyBcIkJvbmpvdXJcIiA6IFwiSGVsbG9cIn0gJHtyZWNpcGllbnROYW1lfSw8L3A+XG4gICAgICAgICAgXG4gICAgICAgICAgPHA+JHtpc0ZyZW5jaCA/IGAke2ludml0ZXJOYW1lfSB2b3VzIGludml0ZSBcXHhFMCByZWpvaW5kcmUgPHN0cm9uZz4ke29yZ2FuaXphdGlvbk5hbWV9PC9zdHJvbmc+IHN1ciBLb3ZlbyBHZXN0aW9uLmAgOiBgJHtpbnZpdGVyTmFtZX0gaGFzIGludml0ZWQgeW91IHRvIGpvaW4gPHN0cm9uZz4ke29yZ2FuaXphdGlvbk5hbWV9PC9zdHJvbmc+IG9uIEtvdmVvIEdlc3Rpb24uYH08L3A+XG5cbiAgICAgICAgICAke3BlcnNvbmFsTWVzc2FnZSA/IGA8ZGl2IHN0eWxlPVwiYmFja2dyb3VuZDogI2YzZjRmNjsgcGFkZGluZzogMTVweDsgYm9yZGVyLXJhZGl1czogOHB4OyBtYXJnaW46IDIwcHggMDtcIj5cbiAgICAgICAgICAgIDxwIHN0eWxlPVwibWFyZ2luOiAwO1wiPjxzdHJvbmc+JHtpc0ZyZW5jaCA/IFwiTWVzc2FnZSBwZXJzb25uZWxcIiA6IFwiUGVyc29uYWwgbWVzc2FnZVwifTo8L3N0cm9uZz48L3A+XG4gICAgICAgICAgICA8cCBzdHlsZT1cIm1hcmdpbjogMTBweCAwIDAgMDsgZm9udC1zdHlsZTogaXRhbGljO1wiPlwiJHtwZXJzb25hbE1lc3NhZ2V9XCI8L3A+XG4gICAgICAgICAgPC9kaXY+YCA6IFwiXCJ9XG4gICAgICAgICAgXG4gICAgICAgICAgPHA+JHtpc0ZyZW5jaCA/IFwiUG91ciBjclxceEU5ZXIgdm90cmUgY29tcHRlIGV0IGFjY2VwdGVyIGNldHRlIGludml0YXRpb24sIGNsaXF1ZXogc3VyIGxlIGJvdXRvbiBjaS1kZXNzb3VzIDpcIiA6IFwiVG8gY3JlYXRlIHlvdXIgYWNjb3VudCBhbmQgYWNjZXB0IHRoaXMgaW52aXRhdGlvbiwgY2xpY2sgdGhlIGJ1dHRvbiBiZWxvdzpcIn08L3A+XG4gICAgICAgICAgXG4gICAgICAgICAgPGRpdiBzdHlsZT1cInRleHQtYWxpZ246IGNlbnRlcjsgbWFyZ2luOiAzMHB4IDA7XCI+XG4gICAgICAgICAgICA8YSBocmVmPVwiJHtpbnZpdGF0aW9uVXJsfVwiIFxuICAgICAgICAgICAgICAgc3R5bGU9XCJiYWNrZ3JvdW5kLWNvbG9yOiAjMjU2M2ViOyBjb2xvcjogd2hpdGU7IHBhZGRpbmc6IDEycHggMjRweDsgdGV4dC1kZWNvcmF0aW9uOiBub25lOyBib3JkZXItcmFkaXVzOiA2cHg7IGRpc3BsYXk6IGlubGluZS1ibG9jaztcIj5cbiAgICAgICAgICAgICAgJHtpc0ZyZW5jaCA/IFwiQ3JcXHhFOWVyIG1vbiBjb21wdGVcIiA6IFwiQ3JlYXRlIE15IEFjY291bnRcIn1cbiAgICAgICAgICAgIDwvYT5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICBcbiAgICAgICAgICA8cCBzdHlsZT1cImNvbG9yOiAjNmI3MjgwOyBmb250LXNpemU6IDE0cHg7XCI+XG4gICAgICAgICAgICAke2lzRnJlbmNoID8gYENldHRlIGludml0YXRpb24gZXhwaXJlIGxlICR7ZXhwaXJ5RGF0ZX0uIFNpIHZvdXMgbmUgcG91dmV6IHBhcyBjbGlxdWVyIHN1ciBsZSBib3V0b24sIGNvcGlleiBldCBjb2xsZXogY2UgbGllbiBkYW5zIHZvdHJlIG5hdmlnYXRldXIgOmAgOiBgVGhpcyBpbnZpdGF0aW9uIGV4cGlyZXMgb24gJHtleHBpcnlEYXRlfS4gSWYgeW91IGNhbid0IGNsaWNrIHRoZSBidXR0b24sIGNvcHkgYW5kIHBhc3RlIHRoaXMgbGluayBpbnRvIHlvdXIgYnJvd3NlcjpgfVxuICAgICAgICAgIDwvcD5cbiAgICAgICAgICBcbiAgICAgICAgICA8cCBzdHlsZT1cIndvcmQtYnJlYWs6IGJyZWFrLWFsbDsgYmFja2dyb3VuZDogI2Y5ZjlmOTsgcGFkZGluZzogMTBweDsgYm9yZGVyLXJhZGl1czogNHB4OyBmb250LXNpemU6IDEycHg7XCI+XG4gICAgICAgICAgICAke2ludml0YXRpb25Vcmx9XG4gICAgICAgICAgPC9wPlxuICAgICAgICAgIFxuICAgICAgICAgIDxociBzdHlsZT1cIm1hcmdpbjogMzBweCAwOyBib3JkZXI6IG5vbmU7IGJvcmRlci10b3A6IDFweCBzb2xpZCAjZTVlN2ViO1wiPlxuICAgICAgICAgIFxuICAgICAgICAgIDxwIHN0eWxlPVwiY29sb3I6ICM5Y2EzYWY7IGZvbnQtc2l6ZTogMTJweDtcIj5cbiAgICAgICAgICAgICR7aXNGcmVuY2ggPyBcIkNldCBlbWFpbCBhIFxceEU5dFxceEU5IGVudm95XFx4RTkgcGFyIEtvdmVvIEdlc3Rpb24uIFNpIHZvdXMgbidhdmV6IHBhcyBkZW1hbmRcXHhFOSBjZXR0ZSBpbnZpdGF0aW9uLCB2b3VzIHBvdXZleiBpZ25vcmVyIGNldCBlbWFpbC5cIiA6IFwiVGhpcyBlbWFpbCB3YXMgc2VudCBieSBLb3ZlbyBHZXN0aW9uLiBJZiB5b3UgZGlkIG5vdCByZXF1ZXN0IHRoaXMgaW52aXRhdGlvbiwgeW91IGNhbiBzYWZlbHkgaWdub3JlIHRoaXMgZW1haWwuXCJ9XG4gICAgICAgICAgPC9wPlxuICAgICAgICA8L2Rpdj5cbiAgICAgIGA7XG4gICAgICBjb25zdCB0ZXh0Q29udGVudCA9IGBcbiAgICAgICAgJHtpc0ZyZW5jaCA/IFwiQm9uam91clwiIDogXCJIZWxsb1wifSAke3JlY2lwaWVudE5hbWV9LFxuXG4gICAgICAgICR7aXNGcmVuY2ggPyBgJHtpbnZpdGVyTmFtZX0gdm91cyBpbnZpdGUgXFx4RTAgcmVqb2luZHJlICR7b3JnYW5pemF0aW9uTmFtZX0gc3VyIEtvdmVvIEdlc3Rpb24uYCA6IGAke2ludml0ZXJOYW1lfSBoYXMgaW52aXRlZCB5b3UgdG8gam9pbiAke29yZ2FuaXphdGlvbk5hbWV9IG9uIEtvdmVvIEdlc3Rpb24uYH1cblxuICAgICAgICAke3BlcnNvbmFsTWVzc2FnZSA/IGAke2lzRnJlbmNoID8gXCJNZXNzYWdlIHBlcnNvbm5lbFwiIDogXCJQZXJzb25hbCBtZXNzYWdlXCJ9OiBcIiR7cGVyc29uYWxNZXNzYWdlfVwiYCA6IFwiXCJ9XG5cbiAgICAgICAgJHtpc0ZyZW5jaCA/IFwiUG91ciBjclxceEU5ZXIgdm90cmUgY29tcHRlIGV0IGFjY2VwdGVyIGNldHRlIGludml0YXRpb24sIHZpc2l0ZXogOlwiIDogXCJUbyBjcmVhdGUgeW91ciBhY2NvdW50IGFuZCBhY2NlcHQgdGhpcyBpbnZpdGF0aW9uLCB2aXNpdDpcIn1cbiAgICAgICAgJHtpbnZpdGF0aW9uVXJsfVxuXG4gICAgICAgICR7aXNGcmVuY2ggPyBgQ2V0dGUgaW52aXRhdGlvbiBleHBpcmUgbGUgJHtleHBpcnlEYXRlfS5gIDogYFRoaXMgaW52aXRhdGlvbiBleHBpcmVzIG9uICR7ZXhwaXJ5RGF0ZX0uYH1cblxuICAgICAgICAke2lzRnJlbmNoID8gXCJTaSB2b3VzIG4nYXZleiBwYXMgZGVtYW5kXFx4RTkgY2V0dGUgaW52aXRhdGlvbiwgdm91cyBwb3V2ZXogaWdub3JlciBjZXQgZW1haWwuXCIgOiBcIklmIHlvdSBkaWQgbm90IHJlcXVlc3QgdGhpcyBpbnZpdGF0aW9uLCB5b3UgY2FuIHNhZmVseSBpZ25vcmUgdGhpcyBlbWFpbC5cIn1cbiAgICAgIGA7XG4gICAgICBhd2FpdCB0aGlzLm1haWxTZXJ2aWNlLnNlbmQoe1xuICAgICAgICB0byxcbiAgICAgICAgZnJvbToge1xuICAgICAgICAgIGVtYWlsOiB0aGlzLmZyb21FbWFpbCxcbiAgICAgICAgICBuYW1lOiB0aGlzLmZyb21OYW1lXG4gICAgICAgIH0sXG4gICAgICAgIHN1YmplY3QsXG4gICAgICAgIHRleHQ6IHRleHRDb250ZW50LnRyaW0oKSxcbiAgICAgICAgaHRtbDogaHRtbENvbnRlbnQsXG4gICAgICAgIHRyYWNraW5nU2V0dGluZ3M6IHtcbiAgICAgICAgICBjbGlja1RyYWNraW5nOiB7XG4gICAgICAgICAgICBlbmFibGU6IGZhbHNlXG4gICAgICAgICAgfSxcbiAgICAgICAgICBvcGVuVHJhY2tpbmc6IHtcbiAgICAgICAgICAgIGVuYWJsZTogZmFsc2VcbiAgICAgICAgICB9LFxuICAgICAgICAgIHN1YnNjcmlwdGlvblRyYWNraW5nOiB7XG4gICAgICAgICAgICBlbmFibGU6IGZhbHNlXG4gICAgICAgICAgfSxcbiAgICAgICAgICBnYW5hbHl0aWNzOiB7XG4gICAgICAgICAgICBlbmFibGU6IGZhbHNlXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9KTtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKFwiXFx1Mjc0QyBFcnJvciBkZXRhaWxzOlwiLCBKU09OLnN0cmluZ2lmeShlcnJvciwgbnVsbCwgMikpO1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgfVxuICAvKipcbiAgICogU2VuZHMgYSByZW1pbmRlciBlbWFpbCBmb3IgcGVuZGluZyBpbnZpdGF0aW9ucy5cbiAgICpcbiAgICogQHBhcmFtIHtzdHJpbmd9IHRvIC0gUmVjaXBpZW50J3MgZW1haWwgYWRkcmVzcy5cbiAgICogQHBhcmFtIHtzdHJpbmd9IHJlY2lwaWVudE5hbWUgLSBOYW1lIG9mIHRoZSBwZXJzb24gYmVpbmcgcmVtaW5kZWQuXG4gICAqIEBwYXJhbSB7c3RyaW5nfSB0b2tlbiAtIEludml0YXRpb24gdG9rZW4gZm9yIHRoZSByZWdpc3RyYXRpb24gVVJMLlxuICAgKiBAcGFyYW0ge3N0cmluZ30gb3JnYW5pemF0aW9uTmFtZSAtIE5hbWUgb2YgdGhlIG9yZ2FuaXphdGlvbiB0aGV5J3JlIGJlaW5nIGludml0ZWQgdG8uXG4gICAqIEBwYXJhbSB7RGF0ZX0gZXhwaXJlc0F0IC0gV2hlbiB0aGUgaW52aXRhdGlvbiBleHBpcmVzLlxuICAgKiBAcGFyYW0ge3N0cmluZ30gbGFuZ3VhZ2UgLSBMYW5ndWFnZSBwcmVmZXJlbmNlIChlbi9mcikuXG4gICAqIEByZXR1cm5zIHtQcm9taXNlPGJvb2xlYW4+fSBQcm9taXNlIHJlc29sdmluZyB0byB0cnVlIGlmIGVtYWlsIHNlbnQgc3VjY2Vzc2Z1bGx5LlxuICAgKi9cbiAgYXN5bmMgc2VuZFJlbWluZGVyRW1haWwodG8sIHJlY2lwaWVudE5hbWUsIHRva2VuLCBvcmdhbml6YXRpb25OYW1lLCBleHBpcmVzQXQsIGxhbmd1YWdlID0gXCJmclwiKSB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IGlzRGV2ZWxvcG1lbnQgPSBwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCI7XG4gICAgICBsZXQgYmFzZVVybDtcbiAgICAgIGlmIChpc0RldmVsb3BtZW50KSB7XG4gICAgICAgIGNvbnN0IHJlcGxpdFVybCA9IHByb2Nlc3MuZW52LlJFUExJVF9ET01BSU5TID8gYGh0dHBzOi8vJHtwcm9jZXNzLmVudi5SRVBMSVRfRE9NQUlOU31gIDogbnVsbDtcbiAgICAgICAgYmFzZVVybCA9IHJlcGxpdFVybCB8fCBcImh0dHA6Ly9sb2NhbGhvc3Q6NTAwMFwiO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgYmFzZVVybCA9IHByb2Nlc3MuZW52LkZST05URU5EX1VSTCB8fCBcImh0dHA6Ly9sb2NhbGhvc3Q6NTAwMFwiO1xuICAgICAgfVxuICAgICAgY29uc3QgaW52aXRhdGlvblVybCA9IGAke2Jhc2VVcmx9L3JlZ2lzdGVyP2ludml0YXRpb249JHt0b2tlbn1gO1xuICAgICAgY29uc3QgZXhwaXJ5RGF0ZSA9IGV4cGlyZXNBdC50b0xvY2FsZURhdGVTdHJpbmcobGFuZ3VhZ2UgPT09IFwiZnJcIiA/IFwiZnItQ0FcIiA6IFwiZW4tQ0FcIik7XG4gICAgICBjb25zdCBpc0ZyZW5jaCA9IGxhbmd1YWdlID09PSBcImZyXCI7XG4gICAgICBjb25zdCBzdWJqZWN0ID0gaXNGcmVuY2ggPyBgUmFwcGVsOiBJbnZpdGF0aW9uIFxceEUwIHJlam9pbmRyZSAke29yZ2FuaXphdGlvbk5hbWV9IC0gS292ZW8gR2VzdGlvbmAgOiBgUmVtaW5kZXI6IEludml0YXRpb24gdG8gam9pbiAke29yZ2FuaXphdGlvbk5hbWV9IC0gS292ZW8gR2VzdGlvbmA7XG4gICAgICBjb25zdCBodG1sQ29udGVudCA9IGBcbiAgICAgICAgPGRpdiBzdHlsZT1cImZvbnQtZmFtaWx5OiBBcmlhbCwgc2Fucy1zZXJpZjsgbWF4LXdpZHRoOiA2MDBweDsgbWFyZ2luOiAwIGF1dG87XCI+XG4gICAgICAgICAgPGgyIHN0eWxlPVwiY29sb3I6ICMyNTYzZWI7XCI+JHtpc0ZyZW5jaCA/IFwiUmFwcGVsIGQnaW52aXRhdGlvbiAtIEtvdmVvIEdlc3Rpb25cIiA6IFwiSW52aXRhdGlvbiBSZW1pbmRlciAtIEtvdmVvIEdlc3Rpb25cIn08L2gyPlxuICAgICAgICAgIFxuICAgICAgICAgIDxwPiR7aXNGcmVuY2ggPyBcIkJvbmpvdXJcIiA6IFwiSGVsbG9cIn0gJHtyZWNpcGllbnROYW1lfSw8L3A+XG4gICAgICAgICAgXG4gICAgICAgICAgPHA+JHtpc0ZyZW5jaCA/IGBDZWNpIGVzdCB1biByYXBwZWwgY29uY2VybmFudCB2b3RyZSBpbnZpdGF0aW9uIFxceEUwIHJlam9pbmRyZSA8c3Ryb25nPiR7b3JnYW5pemF0aW9uTmFtZX08L3N0cm9uZz4gc3VyIEtvdmVvIEdlc3Rpb24uYCA6IGBUaGlzIGlzIGEgcmVtaW5kZXIgYWJvdXQgeW91ciBpbnZpdGF0aW9uIHRvIGpvaW4gPHN0cm9uZz4ke29yZ2FuaXphdGlvbk5hbWV9PC9zdHJvbmc+IG9uIEtvdmVvIEdlc3Rpb24uYH08L3A+XG4gICAgICAgICAgXG4gICAgICAgICAgPHA+JHtpc0ZyZW5jaCA/IFwiVm90cmUgaW52aXRhdGlvbiBleHBpcmUgYmllbnRcXHhGNHQuIFBvdXIgY3JcXHhFOWVyIHZvdHJlIGNvbXB0ZSwgY2xpcXVleiBzdXIgbGUgYm91dG9uIGNpLWRlc3NvdXMgOlwiIDogXCJZb3VyIGludml0YXRpb24gZXhwaXJlcyBzb29uLiBUbyBjcmVhdGUgeW91ciBhY2NvdW50LCBjbGljayB0aGUgYnV0dG9uIGJlbG93OlwifTwvcD5cbiAgICAgICAgICBcbiAgICAgICAgICA8ZGl2IHN0eWxlPVwidGV4dC1hbGlnbjogY2VudGVyOyBtYXJnaW46IDMwcHggMDtcIj5cbiAgICAgICAgICAgIDxhIGhyZWY9XCIke2ludml0YXRpb25Vcmx9XCIgXG4gICAgICAgICAgICAgICBzdHlsZT1cImJhY2tncm91bmQtY29sb3I6ICMyNTYzZWI7IGNvbG9yOiB3aGl0ZTsgcGFkZGluZzogMTJweCAyNHB4OyB0ZXh0LWRlY29yYXRpb246IG5vbmU7IGJvcmRlci1yYWRpdXM6IDZweDsgZGlzcGxheTogaW5saW5lLWJsb2NrO1wiPlxuICAgICAgICAgICAgICAke2lzRnJlbmNoID8gXCJDclxceEU5ZXIgbW9uIGNvbXB0ZVwiIDogXCJDcmVhdGUgTXkgQWNjb3VudFwifVxuICAgICAgICAgICAgPC9hPlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIFxuICAgICAgICAgIDxwIHN0eWxlPVwiY29sb3I6ICNkYzI2MjY7IGZvbnQtd2VpZ2h0OiBib2xkO1wiPlxuICAgICAgICAgICAgJHtpc0ZyZW5jaCA/IGBcXHUyNkEwXFx1RkUwRiBDZXR0ZSBpbnZpdGF0aW9uIGV4cGlyZSBsZSAke2V4cGlyeURhdGV9LmAgOiBgXFx1MjZBMFxcdUZFMEYgVGhpcyBpbnZpdGF0aW9uIGV4cGlyZXMgb24gJHtleHBpcnlEYXRlfS5gfVxuICAgICAgICAgIDwvcD5cbiAgICAgICAgICBcbiAgICAgICAgICA8cCBzdHlsZT1cIndvcmQtYnJlYWs6IGJyZWFrLWFsbDsgYmFja2dyb3VuZDogI2Y5ZjlmOTsgcGFkZGluZzogMTBweDsgYm9yZGVyLXJhZGl1czogNHB4OyBmb250LXNpemU6IDEycHg7XCI+XG4gICAgICAgICAgICAke2ludml0YXRpb25Vcmx9XG4gICAgICAgICAgPC9wPlxuICAgICAgICAgIFxuICAgICAgICAgIDxociBzdHlsZT1cIm1hcmdpbjogMzBweCAwOyBib3JkZXI6IG5vbmU7IGJvcmRlci10b3A6IDFweCBzb2xpZCAjZTVlN2ViO1wiPlxuICAgICAgICAgIFxuICAgICAgICAgIDxwIHN0eWxlPVwiY29sb3I6ICM5Y2EzYWY7IGZvbnQtc2l6ZTogMTJweDtcIj5cbiAgICAgICAgICAgICR7aXNGcmVuY2ggPyBcIkNldCBlbWFpbCBhIFxceEU5dFxceEU5IGVudm95XFx4RTkgcGFyIEtvdmVvIEdlc3Rpb24uXCIgOiBcIlRoaXMgZW1haWwgd2FzIHNlbnQgYnkgS292ZW8gR2VzdGlvbi5cIn1cbiAgICAgICAgICA8L3A+XG4gICAgICAgIDwvZGl2PlxuICAgICAgYDtcbiAgICAgIGNvbnN0IHRleHRDb250ZW50ID0gYFxuICAgICAgICAke2lzRnJlbmNoID8gXCJCb25qb3VyXCIgOiBcIkhlbGxvXCJ9ICR7cmVjaXBpZW50TmFtZX0sXG5cbiAgICAgICAgJHtpc0ZyZW5jaCA/IGBDZWNpIGVzdCB1biByYXBwZWwgY29uY2VybmFudCB2b3RyZSBpbnZpdGF0aW9uIFxceEUwIHJlam9pbmRyZSAke29yZ2FuaXphdGlvbk5hbWV9IHN1ciBLb3ZlbyBHZXN0aW9uLmAgOiBgVGhpcyBpcyBhIHJlbWluZGVyIGFib3V0IHlvdXIgaW52aXRhdGlvbiB0byBqb2luICR7b3JnYW5pemF0aW9uTmFtZX0gb24gS292ZW8gR2VzdGlvbi5gfVxuXG4gICAgICAgICR7aXNGcmVuY2ggPyBcIlBvdXIgY3JcXHhFOWVyIHZvdHJlIGNvbXB0ZSBldCBhY2NlcHRlciBjZXR0ZSBpbnZpdGF0aW9uLCB2aXNpdGV6IDpcIiA6IFwiVG8gY3JlYXRlIHlvdXIgYWNjb3VudCBhbmQgYWNjZXB0IHRoaXMgaW52aXRhdGlvbiwgdmlzaXQ6XCJ9XG4gICAgICAgICR7aW52aXRhdGlvblVybH1cblxuICAgICAgICAke2lzRnJlbmNoID8gYENldHRlIGludml0YXRpb24gZXhwaXJlIGxlICR7ZXhwaXJ5RGF0ZX0uYCA6IGBUaGlzIGludml0YXRpb24gZXhwaXJlcyBvbiAke2V4cGlyeURhdGV9LmB9XG4gICAgICBgO1xuICAgICAgYXdhaXQgdGhpcy5tYWlsU2VydmljZS5zZW5kKHtcbiAgICAgICAgdG8sXG4gICAgICAgIGZyb206IHtcbiAgICAgICAgICBlbWFpbDogdGhpcy5mcm9tRW1haWwsXG4gICAgICAgICAgbmFtZTogdGhpcy5mcm9tTmFtZVxuICAgICAgICB9LFxuICAgICAgICBzdWJqZWN0LFxuICAgICAgICB0ZXh0OiB0ZXh0Q29udGVudC50cmltKCksXG4gICAgICAgIGh0bWw6IGh0bWxDb250ZW50LFxuICAgICAgICB0cmFja2luZ1NldHRpbmdzOiB7XG4gICAgICAgICAgY2xpY2tUcmFja2luZzoge1xuICAgICAgICAgICAgZW5hYmxlOiBmYWxzZVxuICAgICAgICAgIH0sXG4gICAgICAgICAgb3BlblRyYWNraW5nOiB7XG4gICAgICAgICAgICBlbmFibGU6IGZhbHNlXG4gICAgICAgICAgfSxcbiAgICAgICAgICBzdWJzY3JpcHRpb25UcmFja2luZzoge1xuICAgICAgICAgICAgZW5hYmxlOiBmYWxzZVxuICAgICAgICAgIH0sXG4gICAgICAgICAgZ2FuYWx5dGljczoge1xuICAgICAgICAgICAgZW5hYmxlOiBmYWxzZVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcihcIlxcdTI3NEMgRXJyb3Igc2VuZGluZyByZW1pbmRlciBlbWFpbDpcIiwgZXJyb3IpO1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgfVxuICAvKipcbiAgICogVmVyaWZpZXMgYW4gdW5zdWJzY3JpYmUgdG9rZW4gZm9yIHNlY3VyaXR5LlxuICAgKlxuICAgKiBAcGFyYW0ge3N0cmluZ30gZW1haWwgLSBFbWFpbCBhZGRyZXNzIHRvIHZlcmlmeSB0b2tlbiBmb3IuXG4gICAqIEBwYXJhbSB7c3RyaW5nfSB0b2tlbiAtIFVuc3Vic2NyaWJlIHRva2VuIHRvIHZlcmlmeS5cbiAgICogQHJldHVybnMge2Jvb2xlYW59IFRydWUgaWYgdG9rZW4gaXMgdmFsaWQuXG4gICAqL1xuICB2ZXJpZnlVbnN1YnNjcmliZVRva2VuKGVtYWlsLCB0b2tlbikge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCBleHBlY3RlZFRva2VuID0gQnVmZmVyLmZyb20oZW1haWwpLnRvU3RyaW5nKFwiYmFzZTY0XCIpO1xuICAgICAgcmV0dXJuIHRva2VuID09PSBleHBlY3RlZFRva2VuO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKFwiXFx1Mjc0QyBFcnJvciB2ZXJpZnlpbmcgdW5zdWJzY3JpYmUgdG9rZW46XCIsIGVycm9yKTtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gIH1cbiAgLyoqXG4gICAqIFNlbmRzIGEgdGVzdCBlbWFpbCB0byB2ZXJpZnkgU2VuZEdyaWQgY29uZmlndXJhdGlvbiBhbmQgY29ubmVjdGl2aXR5LlxuICAgKiBVc2VkIGZvciB0cm91Ymxlc2hvb3RpbmcgZW1haWwgZGVsaXZlcnkgaXNzdWVzIGFuZCB2YWxpZGF0aW5nIEFQSSBzZXR1cC5cbiAgICpcbiAgICogQHBhcmFtIHtzdHJpbmd9IHRvIC0gUmVjaXBpZW50IGVtYWlsIGFkZHJlc3MgZm9yIHRoZSB0ZXN0IGVtYWlsLlxuICAgKiBAcmV0dXJucyB7UHJvbWlzZTxib29sZWFuPn0gUHJvbWlzZSByZXNvbHZpbmcgdG8gdHJ1ZSBpZiB0ZXN0IGVtYWlsIHNlbnQgc3VjY2Vzc2Z1bGx5LlxuICAgKlxuICAgKiBAZXhhbXBsZVxuICAgKiBgYGB0eXBlc2NyaXB0XG4gICAqIGNvbnN0IGVtYWlsU2VydmljZSA9IG5ldyBFbWFpbFNlcnZpY2UoKTtcbiAgICogY29uc3Qgc3VjY2VzcyA9IGF3YWl0IGVtYWlsU2VydmljZS5zZW5kVGVzdEVtYWlsKCdhZG1pbkBleGFtcGxlLmNvbScpO1xuICAgKiBpZiAoc3VjY2Vzcykge1xuICAgKiB9XG4gICAqIGBgYFxuICAgKi9cbiAgYXN5bmMgc2VuZFRlc3RFbWFpbCh0bykge1xuICAgIHRyeSB7XG4gICAgICBhd2FpdCB0aGlzLm1haWxTZXJ2aWNlLnNlbmQoe1xuICAgICAgICB0byxcbiAgICAgICAgZnJvbToge1xuICAgICAgICAgIGVtYWlsOiB0aGlzLmZyb21FbWFpbCxcbiAgICAgICAgICBuYW1lOiB0aGlzLmZyb21OYW1lXG4gICAgICAgIH0sXG4gICAgICAgIHN1YmplY3Q6IFwiVGVzdCBFbWFpbCAtIEtvdmVvIEdlc3Rpb25cIixcbiAgICAgICAgdGV4dDogXCJUaGlzIGlzIGEgdGVzdCBlbWFpbCB0byB2ZXJpZnkgU2VuZEdyaWQgY29uZmlndXJhdGlvbi5cIixcbiAgICAgICAgaHRtbDogXCI8cD5UaGlzIGlzIGEgdGVzdCBlbWFpbCB0byB2ZXJpZnkgU2VuZEdyaWQgY29uZmlndXJhdGlvbi48L3A+XCJcbiAgICAgIH0pO1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoXCJcXHUyNzRDIEVycm9yIHNlbmRpbmcgZW1haWw6XCIsIGVycm9yKTtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gIH1cbn07XG52YXIgZW1haWxTZXJ2aWNlID0gbmV3IEVtYWlsU2VydmljZSgpO1xuXG4vLyBzZXJ2ZXIvYXV0aC50c1xuaW5pdF9xdWVyeV9jYWNoZSgpO1xuYXN5bmMgZnVuY3Rpb24gY2hlY2tVc2VyUGVybWlzc2lvbih1c2VyUm9sZSwgcGVybWlzc2lvbk5hbWUpIHtcbiAgdHJ5IHtcbiAgICBjb25zdCBwZXJtaXNzaW9uRXhpc3RzID0gYXdhaXQgZGIuc2VsZWN0KCkuZnJvbShwZXJtaXNzaW9ucykud2hlcmUoZXEyKHBlcm1pc3Npb25zLm5hbWUsIHBlcm1pc3Npb25OYW1lKSkubGltaXQoMSk7XG4gICAgY29uc3Qgcm9sZVBlcm1pc3Npb25zMiA9IGF3YWl0IGRiLnNlbGVjdCgpLmZyb20ocm9sZVBlcm1pc3Npb25zKS53aGVyZShlcTIocm9sZVBlcm1pc3Npb25zLnJvbGUsIHVzZXJSb2xlKSk7XG4gICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgZGIuc2VsZWN0KCkuZnJvbShyb2xlUGVybWlzc2lvbnMpLmxlZnRKb2luKHBlcm1pc3Npb25zLCBlcTIocm9sZVBlcm1pc3Npb25zLnBlcm1pc3Npb25JZCwgcGVybWlzc2lvbnMuaWQpKS53aGVyZShcbiAgICAgIGFuZDIoXG4gICAgICAgIGVxMihyb2xlUGVybWlzc2lvbnMucm9sZSwgdXNlclJvbGUpLFxuICAgICAgICBlcTIocGVybWlzc2lvbnMubmFtZSwgcGVybWlzc2lvbk5hbWUpXG4gICAgICApXG4gICAgKS5saW1pdCgxKTtcbiAgICBpZiAocmVzdWx0Lmxlbmd0aCA9PT0gMCkge1xuICAgICAgaWYgKHVzZXJSb2xlID09PSBcImFkbWluXCIpIHtcbiAgICAgICAgY29uc3QgYWRtaW5QZXJtcyA9IGF3YWl0IGRiLnNlbGVjdCh7IG5hbWU6IHBlcm1pc3Npb25zLm5hbWUgfSkuZnJvbShyb2xlUGVybWlzc2lvbnMpLmxlZnRKb2luKFxuICAgICAgICAgIHBlcm1pc3Npb25zLFxuICAgICAgICAgIGVxMihyb2xlUGVybWlzc2lvbnMucGVybWlzc2lvbklkLCBwZXJtaXNzaW9ucy5pZClcbiAgICAgICAgKS53aGVyZShlcTIocm9sZVBlcm1pc3Npb25zLnJvbGUsIFwiYWRtaW5cIikpO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gcmVzdWx0Lmxlbmd0aCA+IDA7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcihcIlxcdTI3NEMgUGVybWlzc2lvbiBjaGVjayBmYWlsZWQ6XCIsIGVycm9yKTtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbn1cbnZhciBlbWFpbFNlcnZpY2UyID0gbmV3IEVtYWlsU2VydmljZSgpO1xudmFyIFBvc3RncmVTcWxTdG9yZSA9IGNvbm5lY3RQZyhzZXNzaW9uKTtcbmZ1bmN0aW9uIGdldERhdGFiYXNlVXJsKHJlcXVlc3REb21haW4pIHtcbiAgY29uc3Qgc2VsZWN0ZWRVcmwgPSBjb25maWcuZGF0YWJhc2UuZ2V0UnVudGltZURhdGFiYXNlVXJsKHJlcXVlc3REb21haW4pO1xuICBjb25zdCBpc0tvdmVvUmVxdWVzdCA9IHJlcXVlc3REb21haW4/LmluY2x1ZGVzKFwia292ZW8tZ2VzdGlvbi5jb21cIik7XG4gIGNvbnN0IGlzUHJvZHVjdGlvbiA9IGNvbmZpZy5zZXJ2ZXIuaXNQcm9kdWN0aW9uIHx8IGlzS292ZW9SZXF1ZXN0O1xuICBjb25zb2xlLmxvZyhgXFx1ezFGNTE3fSBTZXNzaW9uIHN0b3JlIHVzaW5nICR7aXNQcm9kdWN0aW9uID8gXCJQUk9EVUNUSU9OXCIgOiBcIkRFVkVMT1BNRU5UXCJ9IGRhdGFiYXNlOiAke3NlbGVjdGVkVXJsPy5zdWJzdHJpbmcoMCwgNTApfS4uLiAoZG9tYWluOiAke3JlcXVlc3REb21haW4gfHwgXCJ1bmtub3duXCJ9KWApO1xuICBpZiAoIXNlbGVjdGVkVXJsKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKFwiTm8gZGF0YWJhc2UgVVJMIGF2YWlsYWJsZSBmb3Igc2Vzc2lvbiBzdG9yZVwiKTtcbiAgfVxuICByZXR1cm4gc2VsZWN0ZWRVcmw7XG59XG5mdW5jdGlvbiBjcmVhdGVTZXNzaW9uU3RvcmUocmVxdWVzdERvbWFpbikge1xuICB0cnkge1xuICAgIGNvbnN0IHNlc3Npb25Qb29sID0gbmV3IFBvb2woe1xuICAgICAgY29ubmVjdGlvblN0cmluZzogZ2V0RGF0YWJhc2VVcmwocmVxdWVzdERvbWFpbiksXG4gICAgICBtYXg6IDIsXG4gICAgICAvLyBTbWFsbCBwb29sIGZvciBzZXNzaW9uc1xuICAgICAgbWluOiAxLFxuICAgICAgbWF4VXNlczogNzUwMCxcbiAgICAgIC8vIE1heGltdW0gbnVtYmVyIG9mIHRpbWVzIGEgY29ubmVjdGlvbiBjYW4gYmUgcmV1c2VkXG4gICAgICBpZGxlVGltZW91dE1pbGxpczogM2U0LFxuICAgICAgLy8gMzAgc2Vjb25kcyBpZGxlIHRpbWVvdXRcbiAgICAgIGFsbG93RXhpdE9uSWRsZTogdHJ1ZVxuICAgICAgLy8gQWxsb3cgcG9vbCB0byBjbG9zZSB3aGVuIGlkbGVcbiAgICB9KTtcbiAgICBjb25zdCBzdG9yZSA9IG5ldyBQb3N0Z3JlU3FsU3RvcmUoe1xuICAgICAgcG9vbDogc2Vzc2lvblBvb2wsXG4gICAgICB0YWJsZU5hbWU6IFwic2Vzc2lvblwiLFxuICAgICAgY3JlYXRlVGFibGVJZk1pc3Npbmc6IHRydWUsXG4gICAgICAvLyBBdXRvLWNyZWF0ZSB0YWJsZSBpbiBwcm9kdWN0aW9uIGlmIG1pc3NpbmdcbiAgICAgIGVycm9yTG9nOiBwcm9jZXNzLmVudi5OT0RFX0VOViA9PT0gXCJ0ZXN0XCIgPyAoKSA9PiB7XG4gICAgICB9IDogY29uc29sZS5lcnJvcixcbiAgICAgIC8vIFN1cHByZXNzIGVycm9yIGxvZ2dpbmcgaW4gdGVzdHNcbiAgICAgIC8vIEFkZCBleHBsaWNpdCBjb25maWd1cmF0aW9uIGZvciBzZXNzaW9uIHJldHJpZXZhbFxuICAgICAgcHJ1bmVTZXNzaW9uSW50ZXJ2YWw6IHByb2Nlc3MuZW52Lk5PREVfRU5WID09PSBcInRlc3RcIiA/IGZhbHNlIDogNjAgKiAxZTMsXG4gICAgICAvLyBEaXNhYmxlIHBydW5pbmcgaW4gdGVzdHNcbiAgICAgIHNjaGVtYU5hbWU6IFwicHVibGljXCJcbiAgICAgIC8vIEV4cGxpY2l0bHkgc2V0IHNjaGVtYVxuICAgIH0pO1xuICAgIGNvbnNvbGUubG9nKFwiXFx1MjcwNSBTZXNzaW9uIHN0b3JlOiBQb3N0Z3JlU1FMIHNlc3Npb24gc3RvcmUgY3JlYXRlZCB3aXRoIHByb3BlciBwb29sXCIpO1xuICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJ0ZXN0XCIpIHtcbiAgICAgIHN0b3JlLmdldChcInRlc3Qtc2Vzc2lvbi1pZFwiLCAoZXJyLCBzZXNzaW9uMikgPT4ge1xuICAgICAgICBpZiAoZXJyKSB7XG4gICAgICAgICAgY29uc29sZS5lcnJvcihcIlxcdTI3NEMgU2Vzc2lvbiBzdG9yZSBjb25uZWN0aW9uIHRlc3QgZmFpbGVkOlwiLCBlcnIpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGNvbnNvbGUubG9nKFwiXFx1MjcwNSBTZXNzaW9uIHN0b3JlIGNvbm5lY3Rpb24gdGVzdCBwYXNzZWRcIik7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH1cbiAgICByZXR1cm4gc3RvcmU7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcihcIlxcdTI3NEMgU2Vzc2lvbiBzdG9yZSBjcmVhdGlvbiBmYWlsZWQ6XCIsIGVycm9yKTtcbiAgICBjb25zb2xlLmxvZyhcIlxcdTI2QTBcXHVGRTBGIEZhbGxpbmcgYmFjayB0byBtZW1vcnkgc3RvcmUgKHNlc3Npb25zIHdpbGwgbm90IHBlcnNpc3QpXCIpO1xuICAgIHJldHVybiB2b2lkIDA7XG4gIH1cbn1cbnZhciBzZXNzaW9uU3RvcmU7XG50cnkge1xuICBzZXNzaW9uU3RvcmUgPSBjcmVhdGVTZXNzaW9uU3RvcmUoKTtcbn0gY2F0Y2ggKGVycm9yKSB7XG4gIGNvbnNvbGUuZXJyb3IoXCJcXHUyNzRDIEZhaWxlZCB0byBjcmVhdGUgaW5pdGlhbCBzZXNzaW9uIHN0b3JlOlwiLCBlcnJvcik7XG4gIHNlc3Npb25TdG9yZSA9IHZvaWQgMDtcbn1cbnZhciBzZXNzaW9uQ29uZmlnID0gc2Vzc2lvbih7XG4gIHN0b3JlOiBzZXNzaW9uU3RvcmUsXG4gIC8vIFVzZSBQb3N0Z3JlU1FMIHNlc3Npb24gc3RvcmUgZm9yIHBlcnNpc3RlbmNlXG4gIHNlY3JldDogcHJvY2Vzcy5lbnYuU0VTU0lPTl9TRUNSRVQgfHwgXCJmYWxsYmFjay1zZWNyZXQtY2hhbmdlLWluLXByb2R1Y3Rpb25cIixcbiAgcmVzYXZlOiBmYWxzZSxcbiAgLy8gRG9uJ3Qgc2F2ZSB1bmNoYW5nZWQgc2Vzc2lvbnNcbiAgc2F2ZVVuaW5pdGlhbGl6ZWQ6IGZhbHNlLFxuICByb2xsaW5nOiB0cnVlLFxuICAvLyBSZXNldCBleHBpcnkgb24gZWFjaCByZXF1ZXN0XG4gIGNvb2tpZToge1xuICAgIHNlY3VyZTogZmFsc2UsXG4gICAgLy8gS2VlcCBmYWxzZSBmb3IgZGV2ZWxvcG1lbnQgdG8gZW5zdXJlIGNvb2tpZXMgd29ya1xuICAgIGh0dHBPbmx5OiB0cnVlLFxuICAgIG1heEFnZTogNyAqIDI0ICogNjAgKiA2MCAqIDFlMyxcbiAgICAvLyA3IGRheXMgLSBsb25nZXIgc2Vzc2lvbiBkdXJhdGlvblxuICAgIHNhbWVTaXRlOiBcImxheFwiLFxuICAgIHBhdGg6IFwiL1wiXG4gICAgLy8gRXhwbGljaXRseSBzZXQgcGF0aFxuICB9LFxuICBuYW1lOiBcImtvdmVvLnNpZFwiLFxuICBwcm94eTogZmFsc2Vcbn0pO1xuYXN5bmMgZnVuY3Rpb24gaGFzaFBhc3N3b3JkKHBhc3N3b3JkKSB7XG4gIGNvbnN0IHNhbHRSb3VuZHMgPSAxMjtcbiAgcmV0dXJuIGF3YWl0IGJjcnlwdC5oYXNoKHBhc3N3b3JkLCBzYWx0Um91bmRzKTtcbn1cbmFzeW5jIGZ1bmN0aW9uIHZlcmlmeVBhc3N3b3JkKHBhc3N3b3JkLCBoYXNoZWRQYXNzd29yZCkge1xuICByZXR1cm4gYXdhaXQgYmNyeXB0LmNvbXBhcmUocGFzc3dvcmQsIGhhc2hlZFBhc3N3b3JkKTtcbn1cbmFzeW5jIGZ1bmN0aW9uIHJlcXVpcmVBdXRoKHJlcSwgcmVzLCBuZXh0KSB7XG4gIGlmICghcmVxLnNlc3Npb24/LnVzZXJJZCkge1xuICAgIHJldHVybiByZXMuc3RhdHVzKDQwMSkuanNvbih7XG4gICAgICBtZXNzYWdlOiBcIkF1dGhlbnRpY2F0aW9uIHJlcXVpcmVkXCIsXG4gICAgICBjb2RlOiBcIkFVVEhfUkVRVUlSRURcIlxuICAgIH0pO1xuICB9XG4gIHRyeSB7XG4gICAgaWYgKHJlcS5zZXNzaW9uICYmIHJlcS5zZXNzaW9uLnRvdWNoICYmIHJlcS5zZXNzaW9uLmNvb2tpZSkge1xuICAgICAgY29uc3Qgbm93ID0gRGF0ZS5ub3coKTtcbiAgICAgIGNvbnN0IHNlc3Npb25BZ2UgPSBub3cgLSAocmVxLnNlc3Npb24uY29va2llLm9yaWdpbmFsTWF4QWdlIHx8IDApICsgKHJlcS5zZXNzaW9uLmNvb2tpZS5tYXhBZ2UgfHwgMCk7XG4gICAgICBjb25zdCBzZXNzaW9uTGlmZXRpbWUgPSByZXEuc2Vzc2lvbi5jb29raWUub3JpZ2luYWxNYXhBZ2UgfHwgNyAqIDI0ICogNjAgKiA2MCAqIDFlMztcbiAgICAgIGlmIChzZXNzaW9uQWdlID4gc2Vzc2lvbkxpZmV0aW1lICogMC4yNSkge1xuICAgICAgICByZXEuc2Vzc2lvbi50b3VjaCgpO1xuICAgICAgfVxuICAgIH1cbiAgICBxdWVyeUNhY2hlLmludmFsaWRhdGUoXCJ1c2Vyc1wiLCBgdXNlcjoke3JlcS5zZXNzaW9uLnVzZXJJZH1gKTtcbiAgICBxdWVyeUNhY2hlLmludmFsaWRhdGUoXCJ1c2Vyc1wiLCBgdXNlcl9lbWFpbDoqYCk7XG4gICAgY29uc3QgdXNlciA9IGF3YWl0IHN0b3JhZ2UuZ2V0VXNlcihyZXEuc2Vzc2lvbi51c2VySWQpO1xuICAgIGlmICghdXNlciB8fCAhdXNlci5pc0FjdGl2ZSkge1xuICAgICAgcmVxLnNlc3Npb24uZGVzdHJveSgoZXJyKSA9PiB7XG4gICAgICAgIGlmIChlcnIpIHtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDEpLmpzb24oe1xuICAgICAgICBtZXNzYWdlOiBcIlVzZXIgYWNjb3VudCBub3QgZm91bmQgb3IgaW5hY3RpdmVcIixcbiAgICAgICAgY29kZTogXCJVU0VSX0lOQUNUSVZFXCJcbiAgICAgIH0pO1xuICAgIH1cbiAgICByZXEuc2Vzc2lvbi5yb2xlID0gdXNlci5yb2xlO1xuICAgIGxldCB1c2VyT3JnYW5pemF0aW9uczUgPSBbXTtcbiAgICB0cnkge1xuICAgICAgdXNlck9yZ2FuaXphdGlvbnM1ID0gYXdhaXQgZGIuc2VsZWN0KHtcbiAgICAgICAgb3JnYW5pemF0aW9uSWQ6IHVzZXJPcmdhbml6YXRpb25zLm9yZ2FuaXphdGlvbklkLFxuICAgICAgICBjYW5BY2Nlc3NBbGxPcmdhbml6YXRpb25zOiB1c2VyT3JnYW5pemF0aW9ucy5jYW5BY2Nlc3NBbGxPcmdhbml6YXRpb25zXG4gICAgICB9KS5mcm9tKHVzZXJPcmdhbml6YXRpb25zKS53aGVyZShcbiAgICAgICAgYW5kMihcbiAgICAgICAgICBlcTIodXNlck9yZ2FuaXphdGlvbnMudXNlcklkLCB1c2VyLmlkKSxcbiAgICAgICAgICBlcTIodXNlck9yZ2FuaXphdGlvbnMuaXNBY3RpdmUsIHRydWUpXG4gICAgICAgIClcbiAgICAgICk7XG4gICAgfSBjYXRjaCAob3JnRXJyb3IpIHtcbiAgICAgIHVzZXJPcmdhbml6YXRpb25zNSA9IFtdO1xuICAgIH1cbiAgICByZXEudXNlciA9IHtcbiAgICAgIC4uLnVzZXIsXG4gICAgICBvcmdhbml6YXRpb25zOiB1c2VyT3JnYW5pemF0aW9uczUubWFwKCh1bykgPT4gdW8ub3JnYW5pemF0aW9uSWQpLFxuICAgICAgY2FuQWNjZXNzQWxsT3JnYW5pemF0aW9uczogdXNlck9yZ2FuaXphdGlvbnM1LnNvbWUoKHVvKSA9PiB1by5jYW5BY2Nlc3NBbGxPcmdhbml6YXRpb25zKVxuICAgIH07XG4gICAgaWYgKHVzZXIucm9sZT8uc3RhcnRzV2l0aChcImRlbW9fXCIpICYmICghcmVxLnVzZXIub3JnYW5pemF0aW9ucyB8fCByZXEudXNlci5vcmdhbml6YXRpb25zLmxlbmd0aCA9PT0gMCkpIHtcbiAgICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IGRlbW9PcmdzID0gYXdhaXQgZGIuc2VsZWN0KHsgaWQ6IG9yZ2FuaXphdGlvbnMuaWQgfSkuZnJvbShvcmdhbml6YXRpb25zKS53aGVyZShlcTIob3JnYW5pemF0aW9ucy50eXBlLCBcImRlbW9cIikpLmxpbWl0KDEpO1xuICAgICAgICBpZiAoZGVtb09yZ3MubGVuZ3RoID4gMCkge1xuICAgICAgICAgIHJlcS51c2VyLm9yZ2FuaXphdGlvbnMgPSBbZGVtb09yZ3NbMF0uaWRdO1xuICAgICAgICAgIHJlcS51c2VyLmNhbkFjY2Vzc0FsbE9yZ2FuaXphdGlvbnMgPSBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgfSBjYXRjaCAoZGVtb09yZ0Vycm9yKSB7XG4gICAgICB9XG4gICAgfVxuICAgIG5leHQoKTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKFwiXFx1Mjc0QyBBdXRoZW50aWNhdGlvbiBlcnJvcjpcIiwgZXJyb3IpO1xuICAgIHJldHVybiByZXMuc3RhdHVzKDUwMCkuanNvbih7XG4gICAgICBtZXNzYWdlOiBcIkF1dGhlbnRpY2F0aW9uIGVycm9yXCIsXG4gICAgICBjb2RlOiBcIkFVVEhfRVJST1JcIlxuICAgIH0pO1xuICB9XG59XG5mdW5jdGlvbiByZXF1aXJlUm9sZShhbGxvd2VkUm9sZXMpIHtcbiAgcmV0dXJuIGFzeW5jIChyZXEsIHJlcywgbmV4dCkgPT4ge1xuICAgIGlmICghcmVxLnVzZXIpIHtcbiAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMSkuanNvbih7XG4gICAgICAgIG1lc3NhZ2U6IFwiQXV0aGVudGljYXRpb24gcmVxdWlyZWRcIixcbiAgICAgICAgY29kZTogXCJBVVRIX1JFUVVJUkVEXCJcbiAgICAgIH0pO1xuICAgIH1cbiAgICBpZiAoIWFsbG93ZWRSb2xlcy5pbmNsdWRlcyhyZXEudXNlci5yb2xlKSkge1xuICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAzKS5qc29uKHtcbiAgICAgICAgbWVzc2FnZTogXCJJbnN1ZmZpY2llbnQgcGVybWlzc2lvbnNcIixcbiAgICAgICAgY29kZTogXCJJTlNVRkZJQ0lFTlRfUEVSTUlTU0lPTlNcIixcbiAgICAgICAgcmVxdWlyZWQ6IGFsbG93ZWRSb2xlcyxcbiAgICAgICAgY3VycmVudDogcmVxLnVzZXIucm9sZVxuICAgICAgfSk7XG4gICAgfVxuICAgIG5leHQoKTtcbiAgfTtcbn1cbmZ1bmN0aW9uIGF1dGhvcml6ZShwZXJtaXNzaW9uKSB7XG4gIHJldHVybiBhc3luYyAocmVxLCByZXMsIG5leHQpID0+IHtcbiAgICBpZiAoIXJlcS51c2VyKSB7XG4gICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDEpLmpzb24oe1xuICAgICAgICBtZXNzYWdlOiBcIkF1dGhlbnRpY2F0aW9uIHJlcXVpcmVkXCIsXG4gICAgICAgIGNvZGU6IFwiQVVUSF9SRVFVSVJFRFwiXG4gICAgICB9KTtcbiAgICB9XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IGhhc1Blcm1pc3Npb24gPSBhd2FpdCBjaGVja1VzZXJQZXJtaXNzaW9uKHJlcS51c2VyLnJvbGUsIHBlcm1pc3Npb24pO1xuICAgICAgaWYgKCFoYXNQZXJtaXNzaW9uKSB7XG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMykuanNvbih7XG4gICAgICAgICAgbWVzc2FnZTogXCJJbnN1ZmZpY2llbnQgcGVybWlzc2lvbnNcIixcbiAgICAgICAgICBjb2RlOiBcIlBFUk1JU1NJT05fREVOSUVEXCIsXG4gICAgICAgICAgcmVxdWlyZWQ6IHBlcm1pc3Npb24sXG4gICAgICAgICAgdXNlclJvbGU6IHJlcS51c2VyLnJvbGUsXG4gICAgICAgICAgZGV0YWlsczogYFVzZXIgd2l0aCByb2xlICcke3JlcS51c2VyLnJvbGV9JyBkb2VzIG5vdCBoYXZlIHBlcm1pc3Npb24gJyR7cGVybWlzc2lvbn0nYFxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICAgIG5leHQoKTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcihcIlxcdTI3NEMgQXV0aG9yaXphdGlvbiBlcnJvcjpcIiwgZXJyb3IpO1xuICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNTAwKS5qc29uKHtcbiAgICAgICAgbWVzc2FnZTogXCJBdXRob3JpemF0aW9uIGNoZWNrIGZhaWxlZFwiLFxuICAgICAgICBjb2RlOiBcIkFVVEhPUklaQVRJT05fRVJST1JcIlxuICAgICAgfSk7XG4gICAgfVxuICB9O1xufVxuZnVuY3Rpb24gc2V0dXBBdXRoUm91dGVzKGFwcDIpIHtcbiAgYXBwMi5wb3N0KFwiL2FwaS9hdXRoL2xvZ2luXCIsIGFzeW5jIChyZXEsIHJlcykgPT4ge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCB7IGVtYWlsLCBwYXNzd29yZCB9ID0gcmVxLmJvZHk7XG4gICAgICBpZiAoIWVtYWlsIHx8ICFwYXNzd29yZCkge1xuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oe1xuICAgICAgICAgIG1lc3NhZ2U6IFwiRW1haWwgYW5kIHBhc3N3b3JkIGFyZSByZXF1aXJlZFwiLFxuICAgICAgICAgIGNvZGU6IFwiTUlTU0lOR19DUkVERU5USUFMU1wiXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgICAgY29uc3QgdXNlciA9IGF3YWl0IHN0b3JhZ2UuZ2V0VXNlckJ5RW1haWwoZW1haWwudG9Mb3dlckNhc2UoKSk7XG4gICAgICBpZiAoIXVzZXIpIHtcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAxKS5qc29uKHtcbiAgICAgICAgICBtZXNzYWdlOiBcIkludmFsaWQgY3JlZGVudGlhbHNcIixcbiAgICAgICAgICBjb2RlOiBcIklOVkFMSURfQ1JFREVOVElBTFNcIlxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICAgIGlmICghdXNlci5pc0FjdGl2ZSkge1xuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDEpLmpzb24oe1xuICAgICAgICAgIG1lc3NhZ2U6IFwiQWNjb3VudCBpcyBpbmFjdGl2ZVwiLFxuICAgICAgICAgIGNvZGU6IFwiQUNDT1VOVF9JTkFDVElWRVwiXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgICAgY29uc3QgaXNWYWxpZFBhc3N3b3JkID0gYXdhaXQgdmVyaWZ5UGFzc3dvcmQocGFzc3dvcmQsIHVzZXIucGFzc3dvcmQpO1xuICAgICAgaWYgKCFpc1ZhbGlkUGFzc3dvcmQpIHtcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAxKS5qc29uKHtcbiAgICAgICAgICBtZXNzYWdlOiBcIkludmFsaWQgY3JlZGVudGlhbHNcIixcbiAgICAgICAgICBjb2RlOiBcIklOVkFMSURfQ1JFREVOVElBTFNcIlxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICAgIGF3YWl0IHN0b3JhZ2UudXBkYXRlVXNlcih1c2VyLmlkLCB7IGxhc3RMb2dpbkF0OiAvKiBAX19QVVJFX18gKi8gbmV3IERhdGUoKSB9KTtcbiAgICAgIHJlcS5zZXNzaW9uLnVzZXJJZCA9IHVzZXIuaWQ7XG4gICAgICByZXEuc2Vzc2lvbi51c2VyUm9sZSA9IHVzZXIucm9sZTtcbiAgICAgIHJlcS5zZXNzaW9uLnJvbGUgPSB1c2VyLnJvbGU7XG4gICAgICByZXEuc2Vzc2lvbi51c2VyID0gdXNlcjtcbiAgICAgIHJlcS5zZXNzaW9uLnNhdmUoKGVycikgPT4ge1xuICAgICAgICBpZiAoZXJyKSB7XG4gICAgICAgICAgY29uc29sZS5lcnJvcihcIlxcdTI3NEMgU2Vzc2lvbiBzYXZlIGVycm9yOlwiLCBlcnIpO1xuICAgICAgICAgIHJldHVybiByZXMuc3RhdHVzKDUwMCkuanNvbih7XG4gICAgICAgICAgICBtZXNzYWdlOiBcIlNlc3Npb24gc2F2ZSBmYWlsZWRcIixcbiAgICAgICAgICAgIGNvZGU6IFwiU0VTU0lPTl9TQVZFX0VSUk9SXCJcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCB7IHBhc3N3b3JkOiBfLCAuLi51c2VyRGF0YSB9ID0gdXNlcjtcbiAgICAgICAgcmVzLmpzb24oe1xuICAgICAgICAgIHVzZXI6IHVzZXJEYXRhLFxuICAgICAgICAgIG1lc3NhZ2U6IFwiTG9naW4gc3VjY2Vzc2Z1bFwiXG4gICAgICAgIH0pO1xuICAgICAgfSk7XG4gICAgfSBjYXRjaCAoX2Vycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKFwiTG9naW4gZXJyb3I6XCIsIHtcbiAgICAgICAgZXJyb3I6IF9lcnJvcixcbiAgICAgICAgZW1haWw6IHJlcS5ib2R5Py5lbWFpbCxcbiAgICAgICAgaGFzUGFzc3dvcmQ6ICEhcmVxLmJvZHk/LnBhc3N3b3JkLFxuICAgICAgICBkYXRhYmFzZVVybDogISFwcm9jZXNzLmVudi5EQVRBQkFTRV9VUkwsXG4gICAgICAgIHNlc3Npb25TZWNyZXQ6ICEhcHJvY2Vzcy5lbnYuU0VTU0lPTl9TRUNSRVRcbiAgICAgIH0pO1xuICAgICAgcmVzLnN0YXR1cyg1MDApLmpzb24oe1xuICAgICAgICBtZXNzYWdlOiBcIkxvZ2luIGZhaWxlZFwiLFxuICAgICAgICBjb2RlOiBcIkxPR0lOX0VSUk9SXCIsXG4gICAgICAgIC4uLnByb2Nlc3MuZW52Lk5PREVfRU5WID09PSBcImRldmVsb3BtZW50XCIgJiYgeyBkZXRhaWxzOiBfZXJyb3IgfVxuICAgICAgfSk7XG4gICAgfVxuICB9KTtcbiAgYXBwMi5wb3N0KFwiL2FwaS9hdXRoL2xvZ291dFwiLCAocmVxLCByZXMpID0+IHtcbiAgICByZXEuc2Vzc2lvbi5kZXN0cm95KChlcnIpID0+IHtcbiAgICAgIGlmIChlcnIpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcihcIkxvZ291dCBfZXJyb3I6XCIsIGVycik7XG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDUwMCkuanNvbih7XG4gICAgICAgICAgbWVzc2FnZTogXCJMb2dvdXQgZmFpbGVkXCIsXG4gICAgICAgICAgY29kZTogXCJMT0dPVVRfRVJST1JcIlxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICAgIGNvbnN0IGNvb2tpZU9wdGlvbnMgPSB7XG4gICAgICAgIGh0dHBPbmx5OiB0cnVlLFxuICAgICAgICBzZWN1cmU6IHByb2Nlc3MuZW52Lk5PREVfRU5WID09PSBcInByb2R1Y3Rpb25cIixcbiAgICAgICAgc2FtZVNpdGU6IFwibGF4XCJcbiAgICAgIH07XG4gICAgICByZXMuY2xlYXJDb29raWUoXCJrb3Zlby5zaWRcIiwgY29va2llT3B0aW9ucyk7XG4gICAgICByZXMuanNvbih7IG1lc3NhZ2U6IFwiTG9nb3V0IHN1Y2Nlc3NmdWxcIiB9KTtcbiAgICB9KTtcbiAgfSk7XG4gIGFwcDIuZ2V0KFwiL2FwaS9hdXRoL3VzZXJcIiwgYXN5bmMgKHJlcSwgcmVzKSA9PiB7XG4gICAgdHJ5IHtcbiAgICAgIGlmICghcmVxLnNlc3Npb24/LnVzZXJJZCkge1xuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDEpLmpzb24oe1xuICAgICAgICAgIG1lc3NhZ2U6IFwiTm90IGF1dGhlbnRpY2F0ZWRcIixcbiAgICAgICAgICBjb2RlOiBcIk5PVF9BVVRIRU5USUNBVEVEXCJcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgICB0cnkge1xuICAgICAgICBjb25zdCB1c2VyID0gYXdhaXQgc3RvcmFnZS5nZXRVc2VyKHJlcS5zZXNzaW9uLnVzZXJJZCk7XG4gICAgICAgIGlmICghdXNlciB8fCAhdXNlci5pc0FjdGl2ZSkge1xuICAgICAgICAgIHJlcS5zZXNzaW9uLmRlc3Ryb3koKGVycikgPT4ge1xuICAgICAgICAgICAgaWYgKGVycikge1xuICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKFwiU2Vzc2lvbiBkZXN0cnVjdGlvbiBlcnJvcjpcIiwgZXJyKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KTtcbiAgICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDEpLmpzb24oe1xuICAgICAgICAgICAgbWVzc2FnZTogXCJVc2VyIGFjY291bnQgbm90IGZvdW5kIG9yIGluYWN0aXZlXCIsXG4gICAgICAgICAgICBjb2RlOiBcIlVTRVJfSU5BQ1RJVkVcIlxuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIGlmIChyZXEuc2Vzc2lvbiAmJiByZXEuc2Vzc2lvbi50b3VjaCAmJiByZXEuc2Vzc2lvbi5jb29raWUpIHtcbiAgICAgICAgICBjb25zdCBub3cgPSBEYXRlLm5vdygpO1xuICAgICAgICAgIGNvbnN0IHNlc3Npb25BZ2UgPSBub3cgLSAocmVxLnNlc3Npb24uY29va2llLm9yaWdpbmFsTWF4QWdlIHx8IDApICsgKHJlcS5zZXNzaW9uLmNvb2tpZS5tYXhBZ2UgfHwgMCk7XG4gICAgICAgICAgY29uc3Qgc2Vzc2lvbkxpZmV0aW1lID0gcmVxLnNlc3Npb24uY29va2llLm9yaWdpbmFsTWF4QWdlIHx8IDcgKiAyNCAqIDYwICogNjAgKiAxZTM7XG4gICAgICAgICAgaWYgKHNlc3Npb25BZ2UgPiBzZXNzaW9uTGlmZXRpbWUgKiAwLjI1KSB7XG4gICAgICAgICAgICByZXEuc2Vzc2lvbi50b3VjaCgpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBjb25zdCB7IHBhc3N3b3JkOiBfLCAuLi51c2VyRGF0YSB9ID0gdXNlcjtcbiAgICAgICAgcmVzLmpzb24odXNlckRhdGEpO1xuICAgICAgfSBjYXRjaCAodXNlckVycm9yKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoXCJEYXRhYmFzZSBlcnJvciBnZXR0aW5nIHVzZXI6XCIsIHVzZXJFcnJvcik7XG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDUwMCkuanNvbih7XG4gICAgICAgICAgbWVzc2FnZTogXCJBdXRoZW50aWNhdGlvbiBjaGVjayBmYWlsZWRcIixcbiAgICAgICAgICBjb2RlOiBcIkFVVEhfQ0hFQ0tfRVJST1JcIlxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcihcIlxcdTI3NEMgQXV0aCBjaGVjayBlcnJvcjpcIiwgZXJyb3IpO1xuICAgICAgcmVzLnN0YXR1cyg1MDApLmpzb24oe1xuICAgICAgICBtZXNzYWdlOiBcIkF1dGhlbnRpY2F0aW9uIGNoZWNrIGZhaWxlZFwiLFxuICAgICAgICBjb2RlOiBcIkFVVEhfQ0hFQ0tfRVJST1JcIlxuICAgICAgfSk7XG4gICAgfVxuICB9KTtcbiAgYXBwMi5nZXQoXCIvYXBpL2F1dGgvZGVidWdcIiwgYXN5bmMgKHJlcSwgcmVzKSA9PiB7XG4gICAgY29uc3QgZGVidWdJbmZvID0ge1xuICAgICAgaGFzU2Vzc2lvbjogISFyZXEuc2Vzc2lvbixcbiAgICAgIHNlc3Npb25JZDogcmVxLnNlc3Npb25JRCxcbiAgICAgIHVzZXJJZDogcmVxLnNlc3Npb24/LnVzZXJJZCxcbiAgICAgIHVzZXJSb2xlOiByZXEuc2Vzc2lvbj8udXNlclJvbGUsXG4gICAgICBub2RlRW52OiBwcm9jZXNzLmVudi5OT0RFX0VOVixcbiAgICAgIGhhc0RhdGFiYXNlVXJsOiAhIXByb2Nlc3MuZW52LkRBVEFCQVNFX1VSTCxcbiAgICAgIGhhc1Nlc3Npb25TZWNyZXQ6ICEhcHJvY2Vzcy5lbnYuU0VTU0lPTl9TRUNSRVQsXG4gICAgICBjb29raWVzOiByZXEuaGVhZGVycy5jb29raWUgPyBcInByZXNlbnRcIiA6IFwibWlzc2luZ1wiLFxuICAgICAgY29va2llSGVhZGVyOiByZXEuaGVhZGVycy5jb29raWUsXG4gICAgICBzZXNzaW9uU3RvcmU6IHJlcS5zZXNzaW9uPy5zdG9yZT8uY29uc3RydWN0b3I/Lm5hbWUgfHwgXCJ1bmtub3duXCIsXG4gICAgICB1c2VyQWdlbnQ6IHJlcS5oZWFkZXJzW1widXNlci1hZ2VudFwiXSxcbiAgICAgIGhvc3Q6IHJlcS5oZWFkZXJzLmhvc3QsXG4gICAgICBwcm90b2NvbDogcmVxLnByb3RvY29sLFxuICAgICAgc2VjdXJlOiByZXEuc2VjdXJlLFxuICAgICAgdHJ1c3RQcm94eTogISFyZXEuYXBwLmdldChcInRydXN0IHByb3h5XCIpXG4gICAgfTtcbiAgICBjb25zb2xlLmxvZyhcIkF1dGggZGVidWcgaW5mbzpcIiwgZGVidWdJbmZvKTtcbiAgICByZXMuanNvbihkZWJ1Z0luZm8pO1xuICB9KTtcbiAgYXBwMi5wb3N0KFwiL2FwaS9hdXRoL3Rlc3QtY29va2llXCIsIChyZXEsIHJlcykgPT4ge1xuICAgIHJlcS5zZXNzaW9uLnRlc3RWYWx1ZSA9IFwidGVzdC1cIiArIERhdGUubm93KCk7XG4gICAgcmVxLnNlc3Npb24uc2F2ZSgoZXJyKSA9PiB7XG4gICAgICBpZiAoZXJyKSB7XG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDUwMCkuanNvbih7IGVycm9yOiBcIkZhaWxlZCB0byBzYXZlIHNlc3Npb25cIiwgZGV0YWlsczogZXJyLm1lc3NhZ2UgfSk7XG4gICAgICB9XG4gICAgICByZXMuanNvbih7XG4gICAgICAgIG1lc3NhZ2U6IFwiVGVzdCBjb29raWUgc2V0XCIsXG4gICAgICAgIHNlc3Npb25JZDogcmVxLnNlc3Npb25JRCxcbiAgICAgICAgdGVzdFZhbHVlOiByZXEuc2Vzc2lvbi50ZXN0VmFsdWUsXG4gICAgICAgIGNvb2tpZVNldHRpbmdzOiB7XG4gICAgICAgICAgc2VjdXJlOiBwcm9jZXNzLmVudi5OT0RFX0VOViA9PT0gXCJwcm9kdWN0aW9uXCIsXG4gICAgICAgICAgaHR0cE9ubHk6IHRydWUsXG4gICAgICAgICAgc2FtZVNpdGU6IFwibGF4XCJcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfSk7XG4gIH0pO1xuICBhcHAyLnBvc3QoXG4gICAgXCIvYXBpL2F1dGgvcmVnaXN0ZXJcIixcbiAgICByZXF1aXJlQXV0aCxcbiAgICByZXF1aXJlUm9sZShbXCJhZG1pblwiXSksXG4gICAgYXN5bmMgKHJlcSwgcmVzKSA9PiB7XG4gICAgICB0cnkge1xuICAgICAgICBjb25zdCB7IGVtYWlsLCBwYXNzd29yZCwgZmlyc3ROYW1lLCBsYXN0TmFtZSwgcm9sZSA9IFwidGVuYW50XCIsIGxhbmd1YWdlID0gXCJmclwiIH0gPSByZXEuYm9keTtcbiAgICAgICAgaWYgKCFlbWFpbCB8fCAhcGFzc3dvcmQgfHwgIWZpcnN0TmFtZSB8fCAhbGFzdE5hbWUpIHtcbiAgICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oe1xuICAgICAgICAgICAgbWVzc2FnZTogXCJBbGwgZmllbGRzIGFyZSByZXF1aXJlZFwiLFxuICAgICAgICAgICAgY29kZTogXCJNSVNTSU5HX0ZJRUxEU1wiXG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgZXhpc3RpbmdVc2VyID0gYXdhaXQgc3RvcmFnZS5nZXRVc2VyQnlFbWFpbChlbWFpbC50b0xvd2VyQ2FzZSgpKTtcbiAgICAgICAgaWYgKGV4aXN0aW5nVXNlcikge1xuICAgICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwOSkuanNvbih7XG4gICAgICAgICAgICBtZXNzYWdlOiBcIlVzZXIgYWxyZWFkeSBleGlzdHNcIixcbiAgICAgICAgICAgIGNvZGU6IFwiVVNFUl9FWElTVFNcIlxuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGhhc2hlZFBhc3N3b3JkID0gYXdhaXQgaGFzaFBhc3N3b3JkKHBhc3N3b3JkKTtcbiAgICAgICAgY29uc3QgbmV3VXNlciA9IGF3YWl0IHN0b3JhZ2UuY3JlYXRlVXNlcih7XG4gICAgICAgICAgZW1haWw6IGVtYWlsLnRvTG93ZXJDYXNlKCksXG4gICAgICAgICAgcGFzc3dvcmQ6IGhhc2hlZFBhc3N3b3JkLFxuICAgICAgICAgIGZpcnN0TmFtZSxcbiAgICAgICAgICBsYXN0TmFtZSxcbiAgICAgICAgICB1c2VybmFtZTogZW1haWwudG9Mb3dlckNhc2UoKSxcbiAgICAgICAgICAvLyBVc2UgZW1haWwgYXMgdXNlcm5hbWVcbiAgICAgICAgICByb2xlLFxuICAgICAgICAgIGxhbmd1YWdlXG4gICAgICAgIH0pO1xuICAgICAgICBjb25zdCB7IHBhc3N3b3JkOiBfLCAuLi51c2VyRGF0YSB9ID0gbmV3VXNlcjtcbiAgICAgICAgcmVzLnN0YXR1cygyMDEpLmpzb24oe1xuICAgICAgICAgIHVzZXI6IHVzZXJEYXRhLFxuICAgICAgICAgIG1lc3NhZ2U6IFwiVXNlciBjcmVhdGVkIHN1Y2Nlc3NmdWxseVwiXG4gICAgICAgIH0pO1xuICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcihcIlxcdTI3NEMgUmVnaXN0cmF0aW9uIGVycm9yOlwiLCBlcnJvcik7XG4gICAgICAgIHJlcy5zdGF0dXMoNTAwKS5qc29uKHtcbiAgICAgICAgICBtZXNzYWdlOiBcIlJlZ2lzdHJhdGlvbiBmYWlsZWRcIixcbiAgICAgICAgICBjb2RlOiBcIlJFR0lTVFJBVElPTl9FUlJPUlwiXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH1cbiAgKTtcbiAgYXBwMi5wb3N0KFwiL2FwaS9hdXRoL2ZvcmdvdC1wYXNzd29yZFwiLCBhc3luYyAocmVxLCByZXMpID0+IHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgeyBlbWFpbCB9ID0gcmVxLmJvZHk7XG4gICAgICBpZiAoIWVtYWlsKSB7XG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7XG4gICAgICAgICAgbWVzc2FnZTogXCJFbWFpbCBpcyByZXF1aXJlZFwiLFxuICAgICAgICAgIGNvZGU6IFwiTUlTU0lOR19FTUFJTFwiXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgICAgY29uc3QgdXNlciA9IGF3YWl0IHN0b3JhZ2UuZ2V0VXNlckJ5RW1haWwoZW1haWwudG9Mb3dlckNhc2UoKSk7XG4gICAgICBpZiAoIXVzZXIgfHwgIXVzZXIuaXNBY3RpdmUpIHtcbiAgICAgICAgcmV0dXJuIHJlcy5qc29uKHtcbiAgICAgICAgICBtZXNzYWdlOiBcIklmIHRoaXMgZW1haWwgZXhpc3RzLCBhIHBhc3N3b3JkIHJlc2V0IGxpbmsgaGFzIGJlZW4gc2VudC5cIixcbiAgICAgICAgICBzdWNjZXNzOiB0cnVlXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgICAgY29uc3QgcmVzZXRUb2tlbiA9IHJhbmRvbUJ5dGVzKDMyKS50b1N0cmluZyhcImhleFwiKTtcbiAgICAgIGNvbnN0IHRva2VuSGFzaCA9IGNyZWF0ZUhhc2goXCJzaGEyNTZcIikudXBkYXRlKHJlc2V0VG9rZW4pLmRpZ2VzdChcImhleFwiKTtcbiAgICAgIGNvbnN0IGV4cGlyZXNBdCA9IC8qIEBfX1BVUkVfXyAqLyBuZXcgRGF0ZSgpO1xuICAgICAgZXhwaXJlc0F0LnNldEhvdXJzKGV4cGlyZXNBdC5nZXRIb3VycygpICsgMSk7XG4gICAgICBhd2FpdCBzdG9yYWdlLmNyZWF0ZVBhc3N3b3JkUmVzZXRUb2tlbih7XG4gICAgICAgIHVzZXJJZDogdXNlci5pZCxcbiAgICAgICAgdG9rZW46IHJlc2V0VG9rZW4sXG4gICAgICAgIHRva2VuSGFzaCxcbiAgICAgICAgZXhwaXJlc0F0LFxuICAgICAgICBpcEFkZHJlc3M6IHJlcS5pcCB8fCByZXEuY29ubmVjdGlvbj8ucmVtb3RlQWRkcmVzcyB8fCBcInVua25vd25cIixcbiAgICAgICAgdXNlckFnZW50OiByZXEuaGVhZGVyc1tcInVzZXItYWdlbnRcIl0gfHwgXCJ1bmtub3duXCJcbiAgICAgIH0pO1xuICAgICAgY29uc3QgaG9zdDIgPSByZXEuZ2V0KFwiaG9zdFwiKSB8fCBcIlwiO1xuICAgICAgbGV0IGZyb250ZW5kVXJsO1xuICAgICAgaWYgKGhvc3QyLmluY2x1ZGVzKFwicmVwbGl0LmRldlwiKSB8fCBob3N0Mi5pbmNsdWRlcyhcInJlcGxpdC5jb21cIikgfHwgaG9zdDIuaW5jbHVkZXMoXCJyZXBsaXQuY29cIikgfHwgcHJvY2Vzcy5lbnYuTk9ERV9FTlYgPT09IFwiZGV2ZWxvcG1lbnRcIikge1xuICAgICAgICBmcm9udGVuZFVybCA9IGAke3JlcS5wcm90b2NvbH06Ly8ke2hvc3QyfWA7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBpZiAoaG9zdDIuaW5jbHVkZXMoXCJrb3Zlby1nZXN0aW9uLmNvbVwiKSkge1xuICAgICAgICAgIGZyb250ZW5kVXJsID0gYGh0dHBzOi8vJHtob3N0Mn1gO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGZyb250ZW5kVXJsID0gcHJvY2Vzcy5lbnYuRlJPTlRFTkRfVVJMIHx8IFwiaHR0cHM6Ly9rb3Zlby1nZXN0aW9uLmNvbVwiO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBjb25zdCBjbGVhblVybCA9IGZyb250ZW5kVXJsLmVuZHNXaXRoKFwiL1wiKSA/IGZyb250ZW5kVXJsLnNsaWNlKDAsIC0xKSA6IGZyb250ZW5kVXJsO1xuICAgICAgY29uc3QgcmVzZXRVcmwgPSBgJHtjbGVhblVybH0vcmVzZXQtcGFzc3dvcmQ/dG9rZW49JHtyZXNldFRva2VufWA7XG4gICAgICBjb25zdCBlbWFpbFNlbnQgPSBhd2FpdCBlbWFpbFNlcnZpY2UyLnNlbmRQYXNzd29yZFJlc2V0RW1haWwoXG4gICAgICAgIGVtYWlsLnRvTG93ZXJDYXNlKCksXG4gICAgICAgIGAke3VzZXIuZmlyc3ROYW1lfSAke3VzZXIubGFzdE5hbWV9YCxcbiAgICAgICAgcmVzZXRVcmxcbiAgICAgICk7XG4gICAgICBpZiAoIWVtYWlsU2VudCkge1xuICAgICAgICBjb25zb2xlLmVycm9yKFwiRmFpbGVkIHRvIHNlbmQgcGFzc3dvcmQgcmVzZXQgZW1haWwgdG86XCIsIGVtYWlsKTtcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNTAwKS5qc29uKHtcbiAgICAgICAgICBtZXNzYWdlOiBcIkZhaWxlZCB0byBzZW5kIHBhc3N3b3JkIHJlc2V0IGVtYWlsXCIsXG4gICAgICAgICAgY29kZTogXCJFTUFJTF9TRU5EX0ZBSUxFRFwiXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgICAgcmVzLmpzb24oe1xuICAgICAgICBtZXNzYWdlOiBcIklmIHRoaXMgZW1haWwgZXhpc3RzLCBhIHBhc3N3b3JkIHJlc2V0IGxpbmsgaGFzIGJlZW4gc2VudC5cIixcbiAgICAgICAgc3VjY2VzczogdHJ1ZVxuICAgICAgfSk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoXCJcXHUyNzRDIFBhc3N3b3JkIHJlc2V0IHJlcXVlc3QgZXJyb3I6XCIsIGVycm9yKTtcbiAgICAgIHJlcy5zdGF0dXMoNTAwKS5qc29uKHtcbiAgICAgICAgbWVzc2FnZTogXCJQYXNzd29yZCByZXNldCByZXF1ZXN0IGZhaWxlZFwiLFxuICAgICAgICBjb2RlOiBcIlBBU1NXT1JEX1JFU0VUX1JFUVVFU1RfRVJST1JcIlxuICAgICAgfSk7XG4gICAgfVxuICB9KTtcbiAgYXBwMi5wb3N0KFwiL2FwaS9hdXRoL3Jlc2V0LXBhc3N3b3JkXCIsIGFzeW5jIChyZXEsIHJlcykgPT4ge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCB7IHRva2VuLCBwYXNzd29yZCB9ID0gcmVxLmJvZHk7XG4gICAgICBpZiAoIXRva2VuIHx8ICFwYXNzd29yZCkge1xuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oe1xuICAgICAgICAgIG1lc3NhZ2U6IFwiVG9rZW4gYW5kIHBhc3N3b3JkIGFyZSByZXF1aXJlZFwiLFxuICAgICAgICAgIGNvZGU6IFwiTUlTU0lOR19GSUVMRFNcIlxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICAgIGlmIChwYXNzd29yZC5sZW5ndGggPCA4KSB7XG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7XG4gICAgICAgICAgbWVzc2FnZTogXCJQYXNzd29yZCBtdXN0IGJlIGF0IGxlYXN0IDggY2hhcmFjdGVycyBsb25nXCIsXG4gICAgICAgICAgY29kZTogXCJQQVNTV09SRF9UT09fU0hPUlRcIlxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICAgIGNvbnN0IGhhc1VwcGVyQ2FzZSA9IC9bQS1aXS8udGVzdChwYXNzd29yZCk7XG4gICAgICBjb25zdCBoYXNMb3dlckNhc2UgPSAvW2Etel0vLnRlc3QocGFzc3dvcmQpO1xuICAgICAgY29uc3QgaGFzTnVtYmVycyA9IC9cXGQvLnRlc3QocGFzc3dvcmQpO1xuICAgICAgaWYgKCFoYXNVcHBlckNhc2UgfHwgIWhhc0xvd2VyQ2FzZSB8fCAhaGFzTnVtYmVycykge1xuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oe1xuICAgICAgICAgIG1lc3NhZ2U6IFwiUGFzc3dvcmQgbXVzdCBjb250YWluIGF0IGxlYXN0IG9uZSB1cHBlcmNhc2UgbGV0dGVyLCBvbmUgbG93ZXJjYXNlIGxldHRlciwgYW5kIG9uZSBudW1iZXJcIixcbiAgICAgICAgICBjb2RlOiBcIlBBU1NXT1JEX1RPT19XRUFLXCJcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgICBjb25zdCByZXNldFRva2VuID0gYXdhaXQgc3RvcmFnZS5nZXRQYXNzd29yZFJlc2V0VG9rZW4odG9rZW4pO1xuICAgICAgaWYgKCFyZXNldFRva2VuKSB7XG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7XG4gICAgICAgICAgbWVzc2FnZTogXCJJbnZhbGlkIG9yIGV4cGlyZWQgcGFzc3dvcmQgcmVzZXQgdG9rZW5cIixcbiAgICAgICAgICBjb2RlOiBcIklOVkFMSURfVE9LRU5cIlxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICAgIGlmICgvKiBAX19QVVJFX18gKi8gbmV3IERhdGUoKSA+IHJlc2V0VG9rZW4uZXhwaXJlc0F0KSB7XG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7XG4gICAgICAgICAgbWVzc2FnZTogXCJQYXNzd29yZCByZXNldCB0b2tlbiBoYXMgZXhwaXJlZFwiLFxuICAgICAgICAgIGNvZGU6IFwiVE9LRU5fRVhQSVJFRFwiXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgICAgaWYgKHJlc2V0VG9rZW4uaXNVc2VkKSB7XG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7XG4gICAgICAgICAgbWVzc2FnZTogXCJQYXNzd29yZCByZXNldCB0b2tlbiBoYXMgYWxyZWFkeSBiZWVuIHVzZWRcIixcbiAgICAgICAgICBjb2RlOiBcIlRPS0VOX0FMUkVBRFlfVVNFRFwiXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgICAgY29uc3QgdG9rZW5IYXNoID0gY3JlYXRlSGFzaChcInNoYTI1NlwiKS51cGRhdGUodG9rZW4pLmRpZ2VzdChcImhleFwiKTtcbiAgICAgIGlmICh0b2tlbkhhc2ggIT09IHJlc2V0VG9rZW4udG9rZW5IYXNoKSB7XG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7XG4gICAgICAgICAgbWVzc2FnZTogXCJJbnZhbGlkIHBhc3N3b3JkIHJlc2V0IHRva2VuXCIsXG4gICAgICAgICAgY29kZTogXCJJTlZBTElEX1RPS0VOX0hBU0hcIlxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICAgIGNvbnN0IHVzZXIgPSBhd2FpdCBzdG9yYWdlLmdldFVzZXIocmVzZXRUb2tlbi51c2VySWQpO1xuICAgICAgaWYgKCF1c2VyIHx8ICF1c2VyLmlzQWN0aXZlKSB7XG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7XG4gICAgICAgICAgbWVzc2FnZTogXCJVc2VyIGFjY291bnQgbm90IGZvdW5kIG9yIGluYWN0aXZlXCIsXG4gICAgICAgICAgY29kZTogXCJVU0VSX05PVF9GT1VORFwiXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgICAgY29uc3QgaGFzaGVkUGFzc3dvcmQgPSBhd2FpdCBoYXNoUGFzc3dvcmQocGFzc3dvcmQpO1xuICAgICAgYXdhaXQgc3RvcmFnZS51cGRhdGVVc2VyKHVzZXIuaWQsIHtcbiAgICAgICAgcGFzc3dvcmQ6IGhhc2hlZFBhc3N3b3JkLFxuICAgICAgICB1cGRhdGVkQXQ6IC8qIEBfX1BVUkVfXyAqLyBuZXcgRGF0ZSgpXG4gICAgICB9KTtcbiAgICAgIGF3YWl0IHN0b3JhZ2UubWFya1Bhc3N3b3JkUmVzZXRUb2tlbkFzVXNlZChyZXNldFRva2VuLmlkKTtcbiAgICAgIGF3YWl0IHN0b3JhZ2UuY2xlYW51cEV4cGlyZWRQYXNzd29yZFJlc2V0VG9rZW5zKCk7XG4gICAgICByZXMuanNvbih7XG4gICAgICAgIG1lc3NhZ2U6IFwiUGFzc3dvcmQgaGFzIGJlZW4gcmVzZXQgc3VjY2Vzc2Z1bGx5XCIsXG4gICAgICAgIHN1Y2Nlc3M6IHRydWVcbiAgICAgIH0pO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKFwiXFx1Mjc0QyBQYXNzd29yZCByZXNldCBlcnJvcjpcIiwgZXJyb3IpO1xuICAgICAgcmVzLnN0YXR1cyg1MDApLmpzb24oe1xuICAgICAgICBtZXNzYWdlOiBcIlBhc3N3b3JkIHJlc2V0IGZhaWxlZFwiLFxuICAgICAgICBjb2RlOiBcIlBBU1NXT1JEX1JFU0VUX0VSUk9SXCJcbiAgICAgIH0pO1xuICAgIH1cbiAgfSk7XG59XG5cbi8vIHNlcnZlci9hcGkvb3JnYW5pemF0aW9ucy50c1xuaW5pdF9kYigpO1xuaW5pdF9zY2hlbWEoKTtcbmltcG9ydCB7IGFuZCBhcyBhbmQzLCBlcSBhcyBlcTMsIGNvdW50IGFzIGNvdW50MiwgaW5BcnJheSBhcyBpbkFycmF5MiwgaXNOdWxsIH0gZnJvbSBcImRyaXp6bGUtb3JtXCI7XG5mdW5jdGlvbiByZWdpc3Rlck9yZ2FuaXphdGlvblJvdXRlcyhhcHAyKSB7XG4gIGFwcDIuZ2V0KFwiL2FwaS9vcmdhbml6YXRpb25zXCIsIHJlcXVpcmVBdXRoLCBhc3luYyAocmVxLCByZXMpID0+IHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgY3VycmVudFVzZXIgPSByZXEudXNlciB8fCByZXEuc2Vzc2lvbj8udXNlcjtcbiAgICAgIGlmICghY3VycmVudFVzZXIpIHtcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAxKS5qc29uKHtcbiAgICAgICAgICBtZXNzYWdlOiBcIkF1dGhlbnRpY2F0aW9uIHJlcXVpcmVkXCIsXG4gICAgICAgICAgY29kZTogXCJBVVRIX1JFUVVJUkVEXCJcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgICBjb25zb2xlLmxvZyhcbiAgICAgICAgYFxcdXsxRjRDQX0gRmV0Y2hpbmcgb3JnYW5pemF0aW9ucyBmb3IgdXNlciAke2N1cnJlbnRVc2VyLmlkfSB3aXRoIHJvbGUgJHtjdXJyZW50VXNlci5yb2xlfWBcbiAgICAgICk7XG4gICAgICBsZXQgb3JnYW5pemF0aW9uc1F1ZXJ5O1xuICAgICAgaWYgKGN1cnJlbnRVc2VyLnJvbGUgPT09IFwiYWRtaW5cIikge1xuICAgICAgICBvcmdhbml6YXRpb25zUXVlcnkgPSBkYi5zZWxlY3Qoe1xuICAgICAgICAgIGlkOiBvcmdhbml6YXRpb25zLmlkLFxuICAgICAgICAgIG5hbWU6IG9yZ2FuaXphdGlvbnMubmFtZSxcbiAgICAgICAgICB0eXBlOiBvcmdhbml6YXRpb25zLnR5cGUsXG4gICAgICAgICAgYWRkcmVzczogb3JnYW5pemF0aW9ucy5hZGRyZXNzLFxuICAgICAgICAgIGNpdHk6IG9yZ2FuaXphdGlvbnMuY2l0eSxcbiAgICAgICAgICBwcm92aW5jZTogb3JnYW5pemF0aW9ucy5wcm92aW5jZSxcbiAgICAgICAgICBwb3N0YWxDb2RlOiBvcmdhbml6YXRpb25zLnBvc3RhbENvZGUsXG4gICAgICAgICAgcGhvbmU6IG9yZ2FuaXphdGlvbnMucGhvbmUsXG4gICAgICAgICAgZW1haWw6IG9yZ2FuaXphdGlvbnMuZW1haWwsXG4gICAgICAgICAgd2Vic2l0ZTogb3JnYW5pemF0aW9ucy53ZWJzaXRlLFxuICAgICAgICAgIHJlZ2lzdHJhdGlvbk51bWJlcjogb3JnYW5pemF0aW9ucy5yZWdpc3RyYXRpb25OdW1iZXIsXG4gICAgICAgICAgaXNBY3RpdmU6IG9yZ2FuaXphdGlvbnMuaXNBY3RpdmUsXG4gICAgICAgICAgY3JlYXRlZEF0OiBvcmdhbml6YXRpb25zLmNyZWF0ZWRBdFxuICAgICAgICB9KS5mcm9tKG9yZ2FuaXphdGlvbnMpLndoZXJlKGVxMyhvcmdhbml6YXRpb25zLmlzQWN0aXZlLCB0cnVlKSkub3JkZXJCeShvcmdhbml6YXRpb25zLm5hbWUpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgb3JnYW5pemF0aW9uc1F1ZXJ5ID0gZGIuc2VsZWN0KHtcbiAgICAgICAgICBpZDogb3JnYW5pemF0aW9ucy5pZCxcbiAgICAgICAgICBuYW1lOiBvcmdhbml6YXRpb25zLm5hbWUsXG4gICAgICAgICAgdHlwZTogb3JnYW5pemF0aW9ucy50eXBlLFxuICAgICAgICAgIGFkZHJlc3M6IG9yZ2FuaXphdGlvbnMuYWRkcmVzcyxcbiAgICAgICAgICBjaXR5OiBvcmdhbml6YXRpb25zLmNpdHksXG4gICAgICAgICAgcHJvdmluY2U6IG9yZ2FuaXphdGlvbnMucHJvdmluY2UsXG4gICAgICAgICAgcG9zdGFsQ29kZTogb3JnYW5pemF0aW9ucy5wb3N0YWxDb2RlLFxuICAgICAgICAgIHBob25lOiBvcmdhbml6YXRpb25zLnBob25lLFxuICAgICAgICAgIGVtYWlsOiBvcmdhbml6YXRpb25zLmVtYWlsLFxuICAgICAgICAgIHdlYnNpdGU6IG9yZ2FuaXphdGlvbnMud2Vic2l0ZSxcbiAgICAgICAgICByZWdpc3RyYXRpb25OdW1iZXI6IG9yZ2FuaXphdGlvbnMucmVnaXN0cmF0aW9uTnVtYmVyLFxuICAgICAgICAgIGlzQWN0aXZlOiBvcmdhbml6YXRpb25zLmlzQWN0aXZlLFxuICAgICAgICAgIGNyZWF0ZWRBdDogb3JnYW5pemF0aW9ucy5jcmVhdGVkQXRcbiAgICAgICAgfSkuZnJvbShvcmdhbml6YXRpb25zKS5pbm5lckpvaW4odXNlck9yZ2FuaXphdGlvbnMsIGVxMyhvcmdhbml6YXRpb25zLmlkLCB1c2VyT3JnYW5pemF0aW9ucy5vcmdhbml6YXRpb25JZCkpLndoZXJlKFxuICAgICAgICAgIGFuZDMoXG4gICAgICAgICAgICBlcTMob3JnYW5pemF0aW9ucy5pc0FjdGl2ZSwgdHJ1ZSksXG4gICAgICAgICAgICBlcTModXNlck9yZ2FuaXphdGlvbnMudXNlcklkLCBjdXJyZW50VXNlci5pZCksXG4gICAgICAgICAgICBlcTModXNlck9yZ2FuaXphdGlvbnMuaXNBY3RpdmUsIHRydWUpXG4gICAgICAgICAgKVxuICAgICAgICApLm9yZGVyQnkob3JnYW5pemF0aW9ucy5uYW1lKTtcbiAgICAgIH1cbiAgICAgIGNvbnN0IGFjY2Vzc2libGVPcmdhbml6YXRpb25zID0gYXdhaXQgb3JnYW5pemF0aW9uc1F1ZXJ5O1xuICAgICAgY29uc29sZS5sb2coXG4gICAgICAgIGBcXHUyNzA1IEZvdW5kICR7YWNjZXNzaWJsZU9yZ2FuaXphdGlvbnMubGVuZ3RofSBvcmdhbml6YXRpb25zIGZvciB1c2VyICR7Y3VycmVudFVzZXIuaWR9YFxuICAgICAgKTtcbiAgICAgIHJlcy5qc29uKGFjY2Vzc2libGVPcmdhbml6YXRpb25zKTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcihcIlxcdTI3NEMgRXJyb3IgZmV0Y2hpbmcgb3JnYW5pemF0aW9uczpcIiwgZXJyb3IpO1xuICAgICAgcmVzLnN0YXR1cyg1MDApLmpzb24oe1xuICAgICAgICBfZXJyb3I6IFwiSW50ZXJuYWwgc2VydmVyIGVycm9yXCIsXG4gICAgICAgIG1lc3NhZ2U6IFwiRmFpbGVkIHRvIGZldGNoIG9yZ2FuaXphdGlvbnNcIlxuICAgICAgfSk7XG4gICAgfVxuICB9KTtcbiAgYXBwMi5nZXQoXCIvYXBpL2FkbWluL29yZ2FuaXphdGlvbnNcIiwgcmVxdWlyZUF1dGgsIGFzeW5jIChyZXEsIHJlcykgPT4ge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCBjdXJyZW50VXNlciA9IHJlcS51c2VyIHx8IHJlcS5zZXNzaW9uPy51c2VyO1xuICAgICAgaWYgKCFjdXJyZW50VXNlcikge1xuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDEpLmpzb24oe1xuICAgICAgICAgIG1lc3NhZ2U6IFwiQXV0aGVudGljYXRpb24gcmVxdWlyZWRcIixcbiAgICAgICAgICBjb2RlOiBcIkFVVEhfUkVRVUlSRURcIlxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICAgIGlmIChjdXJyZW50VXNlci5yb2xlICE9PSBcImFkbWluXCIpIHtcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAzKS5qc29uKHtcbiAgICAgICAgICBtZXNzYWdlOiBcIkFkbWluIGFjY2VzcyByZXF1aXJlZFwiLFxuICAgICAgICAgIGNvZGU6IFwiQURNSU5fUkVRVUlSRURcIlxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICAgIGNvbnN0IGFsbE9yZ2FuaXphdGlvbnMgPSBhd2FpdCBkYi5zZWxlY3Qoe1xuICAgICAgICBpZDogb3JnYW5pemF0aW9ucy5pZCxcbiAgICAgICAgbmFtZTogb3JnYW5pemF0aW9ucy5uYW1lLFxuICAgICAgICB0eXBlOiBvcmdhbml6YXRpb25zLnR5cGUsXG4gICAgICAgIGFkZHJlc3M6IG9yZ2FuaXphdGlvbnMuYWRkcmVzcyxcbiAgICAgICAgY2l0eTogb3JnYW5pemF0aW9ucy5jaXR5LFxuICAgICAgICBwcm92aW5jZTogb3JnYW5pemF0aW9ucy5wcm92aW5jZSxcbiAgICAgICAgcG9zdGFsQ29kZTogb3JnYW5pemF0aW9ucy5wb3N0YWxDb2RlLFxuICAgICAgICBwaG9uZTogb3JnYW5pemF0aW9ucy5waG9uZSxcbiAgICAgICAgZW1haWw6IG9yZ2FuaXphdGlvbnMuZW1haWwsXG4gICAgICAgIHdlYnNpdGU6IG9yZ2FuaXphdGlvbnMud2Vic2l0ZSxcbiAgICAgICAgcmVnaXN0cmF0aW9uTnVtYmVyOiBvcmdhbml6YXRpb25zLnJlZ2lzdHJhdGlvbk51bWJlcixcbiAgICAgICAgaXNBY3RpdmU6IG9yZ2FuaXphdGlvbnMuaXNBY3RpdmUsXG4gICAgICAgIGNyZWF0ZWRBdDogb3JnYW5pemF0aW9ucy5jcmVhdGVkQXRcbiAgICAgIH0pLmZyb20ob3JnYW5pemF0aW9ucykud2hlcmUoZXEzKG9yZ2FuaXphdGlvbnMuaXNBY3RpdmUsIHRydWUpKS5vcmRlckJ5KG9yZ2FuaXphdGlvbnMubmFtZSk7XG4gICAgICByZXMuanNvbih7XG4gICAgICAgIG9yZ2FuaXphdGlvbnM6IGFsbE9yZ2FuaXphdGlvbnNcbiAgICAgIH0pO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKFwiXFx1Mjc0QyBFcnJvciBmZXRjaGluZyBvcmdhbml6YXRpb25zOlwiLCBlcnJvcik7XG4gICAgICByZXMuc3RhdHVzKDUwMCkuanNvbih7XG4gICAgICAgIF9lcnJvcjogXCJJbnRlcm5hbCBzZXJ2ZXIgZXJyb3JcIixcbiAgICAgICAgbWVzc2FnZTogXCJGYWlsZWQgdG8gZmV0Y2ggb3JnYW5pemF0aW9uc1wiXG4gICAgICB9KTtcbiAgICB9XG4gIH0pO1xuICBhcHAyLnBvc3QoXCIvYXBpL29yZ2FuaXphdGlvbnNcIiwgcmVxdWlyZUF1dGgsIGFzeW5jIChyZXEsIHJlcykgPT4ge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCBjdXJyZW50VXNlciA9IHJlcS51c2VyIHx8IHJlcS5zZXNzaW9uPy51c2VyO1xuICAgICAgaWYgKCFjdXJyZW50VXNlcikge1xuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDEpLmpzb24oe1xuICAgICAgICAgIG1lc3NhZ2U6IFwiQXV0aGVudGljYXRpb24gcmVxdWlyZWRcIixcbiAgICAgICAgICBjb2RlOiBcIkFVVEhfUkVRVUlSRURcIlxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICAgIGlmIChjdXJyZW50VXNlci5yb2xlICE9PSBcImFkbWluXCIpIHtcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAzKS5qc29uKHtcbiAgICAgICAgICBtZXNzYWdlOiBcIkFkbWluIGFjY2VzcyByZXF1aXJlZCB0byBjcmVhdGUgb3JnYW5pemF0aW9uc1wiLFxuICAgICAgICAgIGNvZGU6IFwiQURNSU5fUkVRVUlSRURcIlxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICAgIGNvbnN0IG9yZ2FuaXphdGlvbkRhdGEgPSByZXEuYm9keTtcbiAgICAgIGNvbnN0IFtuZXdPcmdhbml6YXRpb25dID0gYXdhaXQgZGIuaW5zZXJ0KG9yZ2FuaXphdGlvbnMpLnZhbHVlcyh7XG4gICAgICAgIG5hbWU6IG9yZ2FuaXphdGlvbkRhdGEubmFtZSxcbiAgICAgICAgdHlwZTogb3JnYW5pemF0aW9uRGF0YS50eXBlLFxuICAgICAgICBhZGRyZXNzOiBvcmdhbml6YXRpb25EYXRhLmFkZHJlc3MsXG4gICAgICAgIGNpdHk6IG9yZ2FuaXphdGlvbkRhdGEuY2l0eSxcbiAgICAgICAgcHJvdmluY2U6IG9yZ2FuaXphdGlvbkRhdGEucHJvdmluY2UgfHwgXCJRQ1wiLFxuICAgICAgICBwb3N0YWxDb2RlOiBvcmdhbml6YXRpb25EYXRhLnBvc3RhbENvZGUsXG4gICAgICAgIHBob25lOiBvcmdhbml6YXRpb25EYXRhLnBob25lIHx8IG51bGwsXG4gICAgICAgIGVtYWlsOiBvcmdhbml6YXRpb25EYXRhLmVtYWlsIHx8IG51bGwsXG4gICAgICAgIHdlYnNpdGU6IG9yZ2FuaXphdGlvbkRhdGEud2Vic2l0ZSB8fCBudWxsLFxuICAgICAgICByZWdpc3RyYXRpb25OdW1iZXI6IG9yZ2FuaXphdGlvbkRhdGEucmVnaXN0cmF0aW9uTnVtYmVyIHx8IG51bGxcbiAgICAgIH0pLnJldHVybmluZyh7XG4gICAgICAgIGlkOiBvcmdhbml6YXRpb25zLmlkLFxuICAgICAgICBuYW1lOiBvcmdhbml6YXRpb25zLm5hbWUsXG4gICAgICAgIHR5cGU6IG9yZ2FuaXphdGlvbnMudHlwZSxcbiAgICAgICAgYWRkcmVzczogb3JnYW5pemF0aW9ucy5hZGRyZXNzLFxuICAgICAgICBjaXR5OiBvcmdhbml6YXRpb25zLmNpdHksXG4gICAgICAgIHByb3ZpbmNlOiBvcmdhbml6YXRpb25zLnByb3ZpbmNlLFxuICAgICAgICBwb3N0YWxDb2RlOiBvcmdhbml6YXRpb25zLnBvc3RhbENvZGUsXG4gICAgICAgIHBob25lOiBvcmdhbml6YXRpb25zLnBob25lLFxuICAgICAgICBlbWFpbDogb3JnYW5pemF0aW9ucy5lbWFpbCxcbiAgICAgICAgd2Vic2l0ZTogb3JnYW5pemF0aW9ucy53ZWJzaXRlLFxuICAgICAgICByZWdpc3RyYXRpb25OdW1iZXI6IG9yZ2FuaXphdGlvbnMucmVnaXN0cmF0aW9uTnVtYmVyLFxuICAgICAgICBpc0FjdGl2ZTogb3JnYW5pemF0aW9ucy5pc0FjdGl2ZSxcbiAgICAgICAgY3JlYXRlZEF0OiBvcmdhbml6YXRpb25zLmNyZWF0ZWRBdFxuICAgICAgfSk7XG4gICAgICBjb25zb2xlLmxvZyhcbiAgICAgICAgXCJPcmdhbml6YXRpb24gY3JlYXRlZCAtIHN0b3JhZ2UgaGllcmFyY2h5IHdpbGwgYmUgY3JlYXRlZCBvbiBmaXJzdCBkb2N1bWVudCB1cGxvYWRcIlxuICAgICAgKTtcbiAgICAgIHJlcy5zdGF0dXMoMjAxKS5qc29uKG5ld09yZ2FuaXphdGlvbik7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoXCJcXHUyNzRDIEVycm9yIGNyZWF0aW5nIG9yZ2FuaXphdGlvbjpcIiwgZXJyb3IpO1xuICAgICAgcmVzLnN0YXR1cyg1MDApLmpzb24oe1xuICAgICAgICBfZXJyb3I6IFwiSW50ZXJuYWwgc2VydmVyIGVycm9yXCIsXG4gICAgICAgIG1lc3NhZ2U6IFwiRmFpbGVkIHRvIGNyZWF0ZSBvcmdhbml6YXRpb25cIlxuICAgICAgfSk7XG4gICAgfVxuICB9KTtcbiAgYXBwMi5nZXQoXCIvYXBpL29yZ2FuaXphdGlvbnMvOmlkXCIsIHJlcXVpcmVBdXRoLCBhc3luYyAocmVxLCByZXMpID0+IHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgY3VycmVudFVzZXIgPSByZXEudXNlciB8fCByZXEuc2Vzc2lvbj8udXNlcjtcbiAgICAgIGlmICghY3VycmVudFVzZXIpIHtcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAxKS5qc29uKHtcbiAgICAgICAgICBtZXNzYWdlOiBcIkF1dGhlbnRpY2F0aW9uIHJlcXVpcmVkXCIsXG4gICAgICAgICAgY29kZTogXCJBVVRIX1JFUVVJUkVEXCJcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgICBjb25zdCBvcmdhbml6YXRpb25JZCA9IHJlcS5wYXJhbXMuaWQ7XG4gICAgICBjb25zdCBbb3JnYW5pemF0aW9uXSA9IGF3YWl0IGRiLnNlbGVjdCgpLmZyb20ob3JnYW5pemF0aW9ucykud2hlcmUoZXEzKG9yZ2FuaXphdGlvbnMuaWQsIG9yZ2FuaXphdGlvbklkKSk7XG4gICAgICBpZiAoIW9yZ2FuaXphdGlvbikge1xuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDQpLmpzb24oe1xuICAgICAgICAgIG1lc3NhZ2U6IFwiT3JnYW5pemF0aW9uIG5vdCBmb3VuZFwiLFxuICAgICAgICAgIGNvZGU6IFwiTk9UX0ZPVU5EXCJcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgICByZXMuanNvbihvcmdhbml6YXRpb24pO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKFwiXFx1Mjc0QyBFcnJvciBmZXRjaGluZyBvcmdhbml6YXRpb246XCIsIGVycm9yKTtcbiAgICAgIHJlcy5zdGF0dXMoNTAwKS5qc29uKHtcbiAgICAgICAgbWVzc2FnZTogXCJGYWlsZWQgdG8gZmV0Y2ggb3JnYW5pemF0aW9uXCIsXG4gICAgICAgIGNvZGU6IFwiU0VSVkVSX0VSUk9SXCJcbiAgICAgIH0pO1xuICAgIH1cbiAgfSk7XG4gIGFwcDIucHV0KFwiL2FwaS9vcmdhbml6YXRpb25zLzppZFwiLCByZXF1aXJlQXV0aCwgYXN5bmMgKHJlcSwgcmVzKSA9PiB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IGN1cnJlbnRVc2VyID0gcmVxLnVzZXIgfHwgcmVxLnNlc3Npb24/LnVzZXI7XG4gICAgICBpZiAoIWN1cnJlbnRVc2VyKSB7XG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMSkuanNvbih7XG4gICAgICAgICAgbWVzc2FnZTogXCJBdXRoZW50aWNhdGlvbiByZXF1aXJlZFwiLFxuICAgICAgICAgIGNvZGU6IFwiQVVUSF9SRVFVSVJFRFwiXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgICAgaWYgKGN1cnJlbnRVc2VyLnJvbGUgIT09IFwiYWRtaW5cIikge1xuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDMpLmpzb24oe1xuICAgICAgICAgIG1lc3NhZ2U6IFwiQWRtaW4gYWNjZXNzIHJlcXVpcmVkIHRvIHVwZGF0ZSBvcmdhbml6YXRpb25zXCIsXG4gICAgICAgICAgY29kZTogXCJBRE1JTl9SRVFVSVJFRFwiXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgICAgY29uc3Qgb3JnYW5pemF0aW9uSWQgPSByZXEucGFyYW1zLmlkO1xuICAgICAgY29uc3QgdXBkYXRlRGF0YSA9IHJlcS5ib2R5O1xuICAgICAgY29uc3QgZXhpc3RpbmdPcmcgPSBhd2FpdCBkYi5zZWxlY3QoKS5mcm9tKG9yZ2FuaXphdGlvbnMpLndoZXJlKGFuZDMoZXEzKG9yZ2FuaXphdGlvbnMuaWQsIG9yZ2FuaXphdGlvbklkKSwgZXEzKG9yZ2FuaXphdGlvbnMuaXNBY3RpdmUsIHRydWUpKSkubGltaXQoMSk7XG4gICAgICBpZiAoZXhpc3RpbmdPcmcubGVuZ3RoID09PSAwKSB7XG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwNCkuanNvbih7XG4gICAgICAgICAgbWVzc2FnZTogXCJPcmdhbml6YXRpb24gbm90IGZvdW5kXCIsXG4gICAgICAgICAgY29kZTogXCJOT1RfRk9VTkRcIlxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICAgIGNvbnN0IFt1cGRhdGVkT3JnYW5pemF0aW9uXSA9IGF3YWl0IGRiLnVwZGF0ZShvcmdhbml6YXRpb25zKS5zZXQoe1xuICAgICAgICBuYW1lOiB1cGRhdGVEYXRhLm5hbWUsXG4gICAgICAgIHR5cGU6IHVwZGF0ZURhdGEudHlwZSxcbiAgICAgICAgYWRkcmVzczogdXBkYXRlRGF0YS5hZGRyZXNzLFxuICAgICAgICBjaXR5OiB1cGRhdGVEYXRhLmNpdHksXG4gICAgICAgIHByb3ZpbmNlOiB1cGRhdGVEYXRhLnByb3ZpbmNlIHx8IFwiUUNcIixcbiAgICAgICAgcG9zdGFsQ29kZTogdXBkYXRlRGF0YS5wb3N0YWxDb2RlLFxuICAgICAgICBwaG9uZTogdXBkYXRlRGF0YS5waG9uZSB8fCBudWxsLFxuICAgICAgICBlbWFpbDogdXBkYXRlRGF0YS5lbWFpbCB8fCBudWxsLFxuICAgICAgICB3ZWJzaXRlOiB1cGRhdGVEYXRhLndlYnNpdGUgfHwgbnVsbCxcbiAgICAgICAgcmVnaXN0cmF0aW9uTnVtYmVyOiB1cGRhdGVEYXRhLnJlZ2lzdHJhdGlvbk51bWJlciB8fCBudWxsLFxuICAgICAgICB1cGRhdGVkQXQ6IC8qIEBfX1BVUkVfXyAqLyBuZXcgRGF0ZSgpXG4gICAgICB9KS53aGVyZShlcTMob3JnYW5pemF0aW9ucy5pZCwgb3JnYW5pemF0aW9uSWQpKS5yZXR1cm5pbmcoe1xuICAgICAgICBpZDogb3JnYW5pemF0aW9ucy5pZCxcbiAgICAgICAgbmFtZTogb3JnYW5pemF0aW9ucy5uYW1lLFxuICAgICAgICB0eXBlOiBvcmdhbml6YXRpb25zLnR5cGUsXG4gICAgICAgIGFkZHJlc3M6IG9yZ2FuaXphdGlvbnMuYWRkcmVzcyxcbiAgICAgICAgY2l0eTogb3JnYW5pemF0aW9ucy5jaXR5LFxuICAgICAgICBwcm92aW5jZTogb3JnYW5pemF0aW9ucy5wcm92aW5jZSxcbiAgICAgICAgcG9zdGFsQ29kZTogb3JnYW5pemF0aW9ucy5wb3N0YWxDb2RlLFxuICAgICAgICBwaG9uZTogb3JnYW5pemF0aW9ucy5waG9uZSxcbiAgICAgICAgZW1haWw6IG9yZ2FuaXphdGlvbnMuZW1haWwsXG4gICAgICAgIHdlYnNpdGU6IG9yZ2FuaXphdGlvbnMud2Vic2l0ZSxcbiAgICAgICAgcmVnaXN0cmF0aW9uTnVtYmVyOiBvcmdhbml6YXRpb25zLnJlZ2lzdHJhdGlvbk51bWJlcixcbiAgICAgICAgaXNBY3RpdmU6IG9yZ2FuaXphdGlvbnMuaXNBY3RpdmUsXG4gICAgICAgIGNyZWF0ZWRBdDogb3JnYW5pemF0aW9ucy5jcmVhdGVkQXQsXG4gICAgICAgIHVwZGF0ZWRBdDogb3JnYW5pemF0aW9ucy51cGRhdGVkQXRcbiAgICAgIH0pO1xuICAgICAgcmVzLmpzb24odXBkYXRlZE9yZ2FuaXphdGlvbik7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoXCJcXHUyNzRDIEVycm9yIHVwZGF0aW5nIG9yZ2FuaXphdGlvbjpcIiwgZXJyb3IpO1xuICAgICAgcmVzLnN0YXR1cyg1MDApLmpzb24oe1xuICAgICAgICBlcnJvcjogXCJJbnRlcm5hbCBzZXJ2ZXIgZXJyb3JcIixcbiAgICAgICAgbWVzc2FnZTogXCJGYWlsZWQgdG8gdXBkYXRlIG9yZ2FuaXphdGlvblwiXG4gICAgICB9KTtcbiAgICB9XG4gIH0pO1xuICBhcHAyLmdldChcIi9hcGkvb3JnYW5pemF0aW9ucy86aWQvZGVsZXRpb24taW1wYWN0XCIsIHJlcXVpcmVBdXRoLCBhc3luYyAocmVxLCByZXMpID0+IHtcbiAgICBjb25zdCBvcmdhbml6YXRpb25JZCA9IHJlcS5wYXJhbXMuaWQ7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IGN1cnJlbnRVc2VyID0gcmVxLnVzZXIgfHwgcmVxLnNlc3Npb24/LnVzZXI7XG4gICAgICBpZiAoIWN1cnJlbnRVc2VyKSB7XG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMSkuanNvbih7XG4gICAgICAgICAgbWVzc2FnZTogXCJBdXRoZW50aWNhdGlvbiByZXF1aXJlZFwiLFxuICAgICAgICAgIGNvZGU6IFwiQVVUSF9SRVFVSVJFRFwiXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgICAgaWYgKGN1cnJlbnRVc2VyLnJvbGUgIT09IFwiYWRtaW5cIikge1xuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDMpLmpzb24oe1xuICAgICAgICAgIG1lc3NhZ2U6IFwiQWRtaW4gYWNjZXNzIHJlcXVpcmVkXCIsXG4gICAgICAgICAgY29kZTogXCJBRE1JTl9SRVFVSVJFRFwiXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgICAgY29uc3Qgb3JnYW5pemF0aW9uID0gYXdhaXQgZGIuc2VsZWN0KHsgaWQ6IG9yZ2FuaXphdGlvbnMuaWQsIG5hbWU6IG9yZ2FuaXphdGlvbnMubmFtZSB9KS5mcm9tKG9yZ2FuaXphdGlvbnMpLndoZXJlKGFuZDMoZXEzKG9yZ2FuaXphdGlvbnMuaWQsIG9yZ2FuaXphdGlvbklkKSwgZXEzKG9yZ2FuaXphdGlvbnMuaXNBY3RpdmUsIHRydWUpKSkubGltaXQoMSk7XG4gICAgICBpZiAob3JnYW5pemF0aW9uLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDQpLmpzb24oe1xuICAgICAgICAgIF9lcnJvcjogXCJOb3QgZm91bmRcIixcbiAgICAgICAgICBtZXNzYWdlOiBcIk9yZ2FuaXphdGlvbiBub3QgZm91bmRcIlxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICAgIGNvbnN0IGJ1aWxkaW5nc0NvdW50ID0gYXdhaXQgZGIuc2VsZWN0KHsgY291bnQ6IGNvdW50MigpIH0pLmZyb20oYnVpbGRpbmdzKS53aGVyZShhbmQzKGVxMyhidWlsZGluZ3Mub3JnYW5pemF0aW9uSWQsIG9yZ2FuaXphdGlvbklkKSwgZXEzKGJ1aWxkaW5ncy5pc0FjdGl2ZSwgdHJ1ZSkpKTtcbiAgICAgIGNvbnN0IHJlc2lkZW5jZXNDb3VudCA9IGF3YWl0IGRiLnNlbGVjdCh7IGNvdW50OiBjb3VudDIoKSB9KS5mcm9tKHJlc2lkZW5jZXMpLmlubmVySm9pbihidWlsZGluZ3MsIGVxMyhyZXNpZGVuY2VzLmJ1aWxkaW5nSWQsIGJ1aWxkaW5ncy5pZCkpLndoZXJlKFxuICAgICAgICBhbmQzKFxuICAgICAgICAgIGVxMyhidWlsZGluZ3Mub3JnYW5pemF0aW9uSWQsIG9yZ2FuaXphdGlvbklkKSxcbiAgICAgICAgICBlcTMoYnVpbGRpbmdzLmlzQWN0aXZlLCB0cnVlKSxcbiAgICAgICAgICBlcTMocmVzaWRlbmNlcy5pc0FjdGl2ZSwgdHJ1ZSlcbiAgICAgICAgKVxuICAgICAgKTtcbiAgICAgIGxldCB0b3RhbEludml0YXRpb25zID0gMDtcbiAgICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IGludml0YXRpb25zQ291bnQgPSBhd2FpdCBkYi5zZWxlY3QoeyBjb3VudDogY291bnQyKCkgfSkuZnJvbShpbnZpdGF0aW9ucykud2hlcmUoZXEzKGludml0YXRpb25zLm9yZ2FuaXphdGlvbklkLCBvcmdhbml6YXRpb25JZCkpO1xuICAgICAgICB0b3RhbEludml0YXRpb25zID0gaW52aXRhdGlvbnNDb3VudFswXT8uY291bnQgfHwgMDtcbiAgICAgIH0gY2F0Y2ggKF9fX2ludkVycm9yKSB7XG4gICAgICAgIHRvdGFsSW52aXRhdGlvbnMgPSAwO1xuICAgICAgfVxuICAgICAgY29uc3QgcG90ZW50aWFsT3JwaGFuc0NvdW50ID0gYXdhaXQgZGIuc2VsZWN0KHsgY291bnQ6IGNvdW50MigpIH0pLmZyb20odXNlck9yZ2FuaXphdGlvbnMpLmlubmVySm9pbih1c2VycywgZXEzKHVzZXJPcmdhbml6YXRpb25zLnVzZXJJZCwgdXNlcnMuaWQpKS53aGVyZShcbiAgICAgICAgYW5kMyhcbiAgICAgICAgICBlcTModXNlck9yZ2FuaXphdGlvbnMub3JnYW5pemF0aW9uSWQsIG9yZ2FuaXphdGlvbklkKSxcbiAgICAgICAgICBlcTModXNlck9yZ2FuaXphdGlvbnMuaXNBY3RpdmUsIHRydWUpLFxuICAgICAgICAgIGVxMyh1c2Vycy5pc0FjdGl2ZSwgdHJ1ZSlcbiAgICAgICAgKVxuICAgICAgKTtcbiAgICAgIGNvbnN0IGltcGFjdCA9IHtcbiAgICAgICAgb3JnYW5pemF0aW9uOiBvcmdhbml6YXRpb25bMF0sXG4gICAgICAgIGJ1aWxkaW5nczogYnVpbGRpbmdzQ291bnRbMF0/LmNvdW50IHx8IDAsXG4gICAgICAgIHJlc2lkZW5jZXM6IHJlc2lkZW5jZXNDb3VudFswXT8uY291bnQgfHwgMCxcbiAgICAgICAgaW52aXRhdGlvbnM6IHRvdGFsSW52aXRhdGlvbnMsXG4gICAgICAgIHBvdGVudGlhbE9ycGhhbmVkVXNlcnM6IHBvdGVudGlhbE9ycGhhbnNDb3VudFswXT8uY291bnQgfHwgMFxuICAgICAgfTtcbiAgICAgIHJlcy5qc29uKGltcGFjdCk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoXCJcXHUyNzRDIEVycm9yIGFuYWx5emluZyBkZWxldGlvbiBpbXBhY3Q6XCIsIGVycm9yKTtcbiAgICAgIHJlcy5zdGF0dXMoNTAwKS5qc29uKHtcbiAgICAgICAgX2Vycm9yOiBcIkludGVybmFsIHNlcnZlciBlcnJvclwiLFxuICAgICAgICBtZXNzYWdlOiBcIkZhaWxlZCB0byBhbmFseXplIGRlbGV0aW9uIGltcGFjdFwiXG4gICAgICB9KTtcbiAgICB9XG4gIH0pO1xuICBhcHAyLmRlbGV0ZShcIi9hcGkvb3JnYW5pemF0aW9ucy86aWRcIiwgcmVxdWlyZUF1dGgsIGFzeW5jIChyZXEsIHJlcykgPT4ge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCBjdXJyZW50VXNlciA9IHJlcS51c2VyIHx8IHJlcS5zZXNzaW9uPy51c2VyO1xuICAgICAgaWYgKCFjdXJyZW50VXNlcikge1xuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDEpLmpzb24oe1xuICAgICAgICAgIG1lc3NhZ2U6IFwiQXV0aGVudGljYXRpb24gcmVxdWlyZWRcIixcbiAgICAgICAgICBjb2RlOiBcIkFVVEhfUkVRVUlSRURcIlxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICAgIGlmIChjdXJyZW50VXNlci5yb2xlICE9PSBcImFkbWluXCIpIHtcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAzKS5qc29uKHtcbiAgICAgICAgICBtZXNzYWdlOiBcIkFkbWluIGFjY2VzcyByZXF1aXJlZFwiLFxuICAgICAgICAgIGNvZGU6IFwiQURNSU5fUkVRVUlSRURcIlxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICAgIGNvbnN0IG9yZ2FuaXphdGlvbklkID0gcmVxLnBhcmFtcy5pZDtcbiAgICAgIGNvbnN0IG9yZ2FuaXphdGlvbiA9IGF3YWl0IGRiLnNlbGVjdCh7IGlkOiBvcmdhbml6YXRpb25zLmlkLCBuYW1lOiBvcmdhbml6YXRpb25zLm5hbWUgfSkuZnJvbShvcmdhbml6YXRpb25zKS53aGVyZShhbmQzKGVxMyhvcmdhbml6YXRpb25zLmlkLCBvcmdhbml6YXRpb25JZCksIGVxMyhvcmdhbml6YXRpb25zLmlzQWN0aXZlLCB0cnVlKSkpLmxpbWl0KDEpO1xuICAgICAgaWYgKG9yZ2FuaXphdGlvbi5sZW5ndGggPT09IDApIHtcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDA0KS5qc29uKHtcbiAgICAgICAgICBfZXJyb3I6IFwiTm90IGZvdW5kXCIsXG4gICAgICAgICAgbWVzc2FnZTogXCJPcmdhbml6YXRpb24gbm90IGZvdW5kXCJcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgICBjb25zb2xlLmxvZyhgXFx1ezFGNUQxfVxcdUZFMEYgRGVsZXRpbmcgb3JnYW5pemF0aW9uICR7b3JnYW5pemF0aW9uSWR9IHdpdGggY2FzY2FkZSBkZWxldGUuLi5gKTtcbiAgICAgIGNvbnN0IG9yZ0J1aWxkaW5ncyA9IGF3YWl0IGRiLnNlbGVjdCh7IGlkOiBidWlsZGluZ3MuaWQgfSkuZnJvbShidWlsZGluZ3MpLndoZXJlKGVxMyhidWlsZGluZ3Mub3JnYW5pemF0aW9uSWQsIG9yZ2FuaXphdGlvbklkKSk7XG4gICAgICBpZiAob3JnQnVpbGRpbmdzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgY29uc3Qgb3JnQnVpbGRpbmdJZHMgPSBvcmdCdWlsZGluZ3MubWFwKChiKSA9PiBiLmlkKTtcbiAgICAgICAgY29uc3QgYWZmZWN0ZWRSZXNpZGVuY2VzID0gYXdhaXQgZGIudXBkYXRlKHJlc2lkZW5jZXMpLnNldCh7IGlzQWN0aXZlOiBmYWxzZSwgdXBkYXRlZEF0OiAvKiBAX19QVVJFX18gKi8gbmV3IERhdGUoKSB9KS53aGVyZShpbkFycmF5MihyZXNpZGVuY2VzLmJ1aWxkaW5nSWQsIG9yZ0J1aWxkaW5nSWRzKSkucmV0dXJuaW5nKHsgaWQ6IHJlc2lkZW5jZXMuaWQsIHVuaXROdW1iZXI6IHJlc2lkZW5jZXMudW5pdE51bWJlciB9KTtcbiAgICAgICAgY29uc29sZS5sb2coXG4gICAgICAgICAgYFxcdXsxRjVEMX1cXHVGRTBGIFNvZnQgZGVsZXRlZCAke2FmZmVjdGVkUmVzaWRlbmNlcy5sZW5ndGh9IHJlc2lkZW5jZXMgaW4gYnVpbGRpbmdzOiAke29yZ0J1aWxkaW5nSWRzLmpvaW4oXCIsIFwiKX1gXG4gICAgICAgICk7XG4gICAgICAgIGNvbnN0IGFmZmVjdGVkQnVpbGRpbmdzID0gYXdhaXQgZGIudXBkYXRlKGJ1aWxkaW5ncykuc2V0KHsgaXNBY3RpdmU6IGZhbHNlLCB1cGRhdGVkQXQ6IC8qIEBfX1BVUkVfXyAqLyBuZXcgRGF0ZSgpIH0pLndoZXJlKGluQXJyYXkyKGJ1aWxkaW5ncy5pZCwgb3JnQnVpbGRpbmdJZHMpKS5yZXR1cm5pbmcoeyBpZDogYnVpbGRpbmdzLmlkLCBuYW1lOiBidWlsZGluZ3MubmFtZSB9KTtcbiAgICAgICAgY29uc29sZS5sb2coXG4gICAgICAgICAgYFxcdXsxRjVEMX1cXHVGRTBGIFNvZnQgZGVsZXRlZCAke2FmZmVjdGVkQnVpbGRpbmdzLmxlbmd0aH0gYnVpbGRpbmdzOiAke2FmZmVjdGVkQnVpbGRpbmdzLm1hcCgoYikgPT4gYi5uYW1lKS5qb2luKFwiLCBcIil9YFxuICAgICAgICApO1xuICAgICAgfVxuICAgICAgYXdhaXQgZGIuZGVsZXRlKHVzZXJPcmdhbml6YXRpb25zKS53aGVyZShlcTModXNlck9yZ2FuaXphdGlvbnMub3JnYW5pemF0aW9uSWQsIG9yZ2FuaXphdGlvbklkKSk7XG4gICAgICBjb25zb2xlLmxvZyhcIlxcdTI2QTBcXHVGRTBGICBVc2VyIGRlbGV0aW9uIGRpc2FibGVkIGZvciBkYXRhIHNhZmV0eSAtIHVzZXJzIHdpbGwgYmUgcHJlc2VydmVkXCIpO1xuICAgICAgY29uc3QgYWZmZWN0ZWRVc2VycyA9IGF3YWl0IGRiLnNlbGVjdCh7XG4gICAgICAgIGlkOiB1c2Vycy5pZCxcbiAgICAgICAgZW1haWw6IHVzZXJzLmVtYWlsLFxuICAgICAgICBmaXJzdE5hbWU6IHVzZXJzLmZpcnN0TmFtZSxcbiAgICAgICAgbGFzdE5hbWU6IHVzZXJzLmxhc3ROYW1lXG4gICAgICB9KS5mcm9tKHVzZXJzKS5sZWZ0Sm9pbihcbiAgICAgICAgdXNlck9yZ2FuaXphdGlvbnMsXG4gICAgICAgIGFuZDMoZXEzKHVzZXJzLmlkLCB1c2VyT3JnYW5pemF0aW9ucy51c2VySWQpLCBlcTModXNlck9yZ2FuaXphdGlvbnMuaXNBY3RpdmUsIHRydWUpKVxuICAgICAgKS53aGVyZShhbmQzKGVxMyh1c2Vycy5pc0FjdGl2ZSwgdHJ1ZSksIGlzTnVsbCh1c2VyT3JnYW5pemF0aW9ucy51c2VySWQpKSk7XG4gICAgICBpZiAoYWZmZWN0ZWRVc2Vycy5sZW5ndGggPiAwKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKFxuICAgICAgICAgIGBcXHUyNkEwXFx1RkUwRiAgJHthZmZlY3RlZFVzZXJzLmxlbmd0aH0gdXNlcnMgYXJlIG5vdyB3aXRob3V0IG9yZ2FuaXphdGlvbiBhc3NpZ25tZW50cyBidXQgaGF2ZSBiZWVuIHByZXNlcnZlZDpgLFxuICAgICAgICAgIGFmZmVjdGVkVXNlcnMubWFwKCh1KSA9PiB1LmVtYWlsKVxuICAgICAgICApO1xuICAgICAgfVxuICAgICAgYXdhaXQgZGIudXBkYXRlKG9yZ2FuaXphdGlvbnMpLnNldCh7IGlzQWN0aXZlOiBmYWxzZSwgdXBkYXRlZEF0OiAvKiBAX19QVVJFX18gKi8gbmV3IERhdGUoKSB9KS53aGVyZShlcTMob3JnYW5pemF0aW9ucy5pZCwgb3JnYW5pemF0aW9uSWQpKTtcbiAgICAgIHRyeSB7XG4gICAgICAgIGNvbnNvbGUubG9nKFwiT3JnYW5pemF0aW9uIGRlbGV0ZWQgLSBzdG9yYWdlIGNsZWFudXAgd2lsbCBiZSBoYW5kbGVkIGF1dG9tYXRpY2FsbHlcIik7XG4gICAgICB9IGNhdGNoIChzdG9yYWdlRXJyb3IpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcihcbiAgICAgICAgICBcIlxcdTI2QTBcXHVGRTBGIE9iamVjdCBzdG9yYWdlIGNsZWFudXAgZmFpbGVkLCBidXQgb3JnYW5pemF0aW9uIGRlbGV0aW9uIHN1Y2NlZWRlZDpcIixcbiAgICAgICAgICBzdG9yYWdlRXJyb3JcbiAgICAgICAgKTtcbiAgICAgIH1cbiAgICAgIHJlcy5qc29uKHtcbiAgICAgICAgbWVzc2FnZTogXCJPcmdhbml6YXRpb24gYW5kIHJlbGF0ZWQgZW50aXRpZXMgZGVsZXRlZCBzdWNjZXNzZnVsbHlcIixcbiAgICAgICAgZGVsZXRlZE9yZ2FuaXphdGlvbjogb3JnYW5pemF0aW9uWzBdLm5hbWVcbiAgICAgIH0pO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKFwiXFx1Mjc0QyBFcnJvciBkZWxldGluZyBvcmdhbml6YXRpb246XCIsIGVycm9yKTtcbiAgICAgIHJlcy5zdGF0dXMoNTAwKS5qc29uKHtcbiAgICAgICAgX2Vycm9yOiBcIkludGVybmFsIHNlcnZlciBlcnJvclwiLFxuICAgICAgICBtZXNzYWdlOiBcIkZhaWxlZCB0byBkZWxldGUgb3JnYW5pemF0aW9uIGFuZCByZWxhdGVkIGVudGl0aWVzXCJcbiAgICAgIH0pO1xuICAgIH1cbiAgfSk7XG59XG5cbi8vIHNlcnZlci9hcGkvdXNlcnMudHNcbmluaXRfc3RvcmFnZSgpO1xuaW5pdF9zY2hlbWEoKTtcbmltcG9ydCB7IHogYXMgejEwIH0gZnJvbSBcInpvZFwiO1xuaW5pdF9kYigpO1xuaW5pdF9zY2hlbWEoKTtcbmltcG9ydCB7IGNyZWF0ZUhhc2ggYXMgY3JlYXRlSGFzaDIsIHJhbmRvbUJ5dGVzIGFzIHJhbmRvbUJ5dGVzMiB9IGZyb20gXCJjcnlwdG9cIjtcbmltcG9ydCAqIGFzIGJjcnlwdDIgZnJvbSBcImJjcnlwdGpzXCI7XG5pbXBvcnQgeyBlcSBhcyBlcTQsIGFuZCBhcyBhbmQ0LCBpbkFycmF5IGFzIGluQXJyYXkzLCBzcWwgYXMgc3FsMTQgfSBmcm9tIFwiZHJpenpsZS1vcm1cIjtcblxuLy8gc2VydmVyL3V0aWxzL2lucHV0LXNhbml0aXphdGlvbi50c1xuZnVuY3Rpb24gc2FuaXRpemVTdHJpbmcoaW5wdXQpIHtcbiAgaWYgKCFpbnB1dCkgcmV0dXJuIFwiXCI7XG4gIHJldHVybiBpbnB1dC50cmltKCkucmVwbGFjZSgvWzw+XS9nLCBcIlwiKS5yZXBsYWNlKC9bJ1wiO10vZywgXCJcIikuc3Vic3RyaW5nKDAsIDUwMCk7XG59XG5mdW5jdGlvbiBub3JtYWxpemVFbWFpbChlbWFpbCkge1xuICBpZiAoIWVtYWlsKSByZXR1cm4gXCJcIjtcbiAgcmV0dXJuIGVtYWlsLnRvTG93ZXJDYXNlKCkudHJpbSgpO1xufVxuZnVuY3Rpb24gc2FuaXRpemVOYW1lKG5hbWUpIHtcbiAgaWYgKCFuYW1lKSByZXR1cm4gXCJcIjtcbiAgcmV0dXJuIG5hbWUudHJpbSgpLnJlcGxhY2UoL1teYS16QS1aw4Atw79cXHMnLV0vZywgXCJcIikucmVwbGFjZSgvXFxzKy9nLCBcIiBcIikuc3Vic3RyaW5nKDAsIDEwMCk7XG59XG5mdW5jdGlvbiBnZW5lcmF0ZVVzZXJuYW1lRnJvbUVtYWlsKGVtYWlsKSB7XG4gIGlmICghZW1haWwpIHJldHVybiBcIlwiO1xuICByZXR1cm4gZW1haWwuc3BsaXQoXCJAXCIpWzBdLnRvTG93ZXJDYXNlKCkucmVwbGFjZSgvW15hLXowLTldL2csIFwiXCIpLnN1YnN0cmluZygwLCAzMCk7XG59XG5mdW5jdGlvbiB2YWxpZGF0ZVBhc3N3b3JkU3RyZW5ndGgocGFzc3dvcmQpIHtcbiAgaWYgKCFwYXNzd29yZCkge1xuICAgIHJldHVybiB7IGlzVmFsaWQ6IGZhbHNlLCBtZXNzYWdlOiBcIlBhc3N3b3JkIGlzIHJlcXVpcmVkXCIgfTtcbiAgfVxuICBpZiAocGFzc3dvcmQubGVuZ3RoIDwgOCkge1xuICAgIHJldHVybiB7IGlzVmFsaWQ6IGZhbHNlLCBtZXNzYWdlOiBcIlBhc3N3b3JkIG11c3QgYmUgYXQgbGVhc3QgOCBjaGFyYWN0ZXJzIGxvbmdcIiB9O1xuICB9XG4gIGNvbnN0IGhhc1VwcGVyY2FzZSA9IC9bQS1aXS8udGVzdChwYXNzd29yZCk7XG4gIGNvbnN0IGhhc0xvd2VyY2FzZSA9IC9bYS16XS8udGVzdChwYXNzd29yZCk7XG4gIGNvbnN0IGhhc051bWJlciA9IC9cXGQvLnRlc3QocGFzc3dvcmQpO1xuICBjb25zdCBoYXNTcGVjaWFsQ2hhciA9IC9bQCQhJSo/Jl0vLnRlc3QocGFzc3dvcmQpO1xuICBpZiAoIWhhc1VwcGVyY2FzZSB8fCAhaGFzTG93ZXJjYXNlIHx8ICFoYXNOdW1iZXIgfHwgIWhhc1NwZWNpYWxDaGFyKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIGlzVmFsaWQ6IGZhbHNlLFxuICAgICAgbWVzc2FnZTogXCJQYXNzd29yZCBtdXN0IGNvbnRhaW4gdXBwZXJjYXNlLCBsb3dlcmNhc2UsIG51bWJlciwgYW5kIHNwZWNpYWwgY2hhcmFjdGVyIChAJCElKj8mKVwiXG4gICAgfTtcbiAgfVxuICByZXR1cm4geyBpc1ZhbGlkOiB0cnVlIH07XG59XG5cbi8vIHNlcnZlci91dGlscy91c2VyLWNyZWF0aW9uLWxvZ2dlci50c1xuZnVuY3Rpb24gbG9nVXNlckNyZWF0aW9uKGV2ZW50KSB7XG4gIGNvbnN0IGxvZ0RhdGEgPSB7XG4gICAgZXZlbnQ6IFwidXNlcl9jcmVhdGlvblwiLFxuICAgIHVzZXJJZDogZXZlbnQudXNlcklkLFxuICAgIGVtYWlsOiBldmVudC5lbWFpbC50b0xvd2VyQ2FzZSgpLFxuICAgIHJvbGU6IGV2ZW50LnJvbGUsXG4gICAgbWV0aG9kOiBldmVudC5tZXRob2QsXG4gICAgc3VjY2VzczogZXZlbnQuc3VjY2VzcyxcbiAgICBlcnJvcjogZXZlbnQuZXJyb3IsXG4gICAgdGltZXN0YW1wOiBldmVudC50aW1lc3RhbXAudG9JU09TdHJpbmcoKSxcbiAgICBpcEFkZHJlc3M6IGV2ZW50LmlwQWRkcmVzcyxcbiAgICB1c2VyQWdlbnQ6IGV2ZW50LnVzZXJBZ2VudFxuICB9O1xuICBpZiAoZXZlbnQuc3VjY2Vzcykge1xuICAgIGNvbnNvbGUubG9nKFwiXFx1MjcwNSBVc2VyIGNyZWF0aW9uIHN1Y2Nlc3NmdWw6XCIsIEpTT04uc3RyaW5naWZ5KGxvZ0RhdGEpKTtcbiAgfSBlbHNlIHtcbiAgICBjb25zb2xlLmVycm9yKFwiXFx1Mjc0QyBVc2VyIGNyZWF0aW9uIGZhaWxlZDpcIiwgSlNPTi5zdHJpbmdpZnkobG9nRGF0YSkpO1xuICB9XG59XG5cbi8vIHNlcnZlci9hcGkvdXNlcnMudHNcbmluaXRfcXVlcnlfY2FjaGUoKTtcbmZ1bmN0aW9uIHJlZ2lzdGVyVXNlclJvdXRlcyhhcHAyKSB7XG4gIGFwcDIuZ2V0KFwiL2FwaS91c2Vyc1wiLCByZXF1aXJlQXV0aCwgYXN5bmMgKHJlcSwgcmVzKSA9PiB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IGN1cnJlbnRVc2VyID0gcmVxLnVzZXIgfHwgcmVxLnNlc3Npb24/LnVzZXI7XG4gICAgICBpZiAoIWN1cnJlbnRVc2VyKSB7XG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMSkuanNvbih7XG4gICAgICAgICAgbWVzc2FnZTogXCJBdXRoZW50aWNhdGlvbiByZXF1aXJlZFwiLFxuICAgICAgICAgIGNvZGU6IFwiQVVUSF9SRVFVSVJFRFwiXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgICAgY29uc3QgdXNlcnNXaXRoQXNzaWdubWVudHMgPSBhd2FpdCBzdG9yYWdlLmdldFVzZXJzV2l0aEFzc2lnbm1lbnRzKCk7XG4gICAgICBsZXQgZmlsdGVyZWRVc2VycztcbiAgICAgIGlmIChjdXJyZW50VXNlci5yb2xlID09PSBcImFkbWluXCIpIHtcbiAgICAgICAgZmlsdGVyZWRVc2VycyA9IHVzZXJzV2l0aEFzc2lnbm1lbnRzO1xuICAgICAgfSBlbHNlIGlmIChbXCJkZW1vX21hbmFnZXJcIiwgXCJkZW1vX3RlbmFudFwiLCBcImRlbW9fcmVzaWRlbnRcIl0uaW5jbHVkZXMoY3VycmVudFVzZXIucm9sZSkpIHtcbiAgICAgICAgZmlsdGVyZWRVc2VycyA9IHVzZXJzV2l0aEFzc2lnbm1lbnRzLmZpbHRlcihcbiAgICAgICAgICAodXNlcikgPT4gW1wiZGVtb19tYW5hZ2VyXCIsIFwiZGVtb190ZW5hbnRcIiwgXCJkZW1vX3Jlc2lkZW50XCJdLmluY2x1ZGVzKHVzZXIucm9sZSlcbiAgICAgICAgKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNvbnN0IHVzZXJPcmdJZHMgPSAoYXdhaXQgc3RvcmFnZS5nZXRVc2VyT3JnYW5pemF0aW9ucyhjdXJyZW50VXNlci5pZCkpLm1hcCgob3JnKSA9PiBvcmcub3JnYW5pemF0aW9uSWQpO1xuICAgICAgICBmaWx0ZXJlZFVzZXJzID0gdXNlcnNXaXRoQXNzaWdubWVudHMuZmlsdGVyKCh1c2VyKSA9PiB7XG4gICAgICAgICAgaWYgKFtcImRlbW9fbWFuYWdlclwiLCBcImRlbW9fdGVuYW50XCIsIFwiZGVtb19yZXNpZGVudFwiXS5pbmNsdWRlcyh1c2VyLnJvbGUpKSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgfVxuICAgICAgICAgIGNvbnN0IGhhc0FjY2VzcyA9IHVzZXIub3JnYW5pemF0aW9ucz8uc29tZSgob3JnKSA9PiB1c2VyT3JnSWRzLmluY2x1ZGVzKG9yZy5pZCkpIHx8IGZhbHNlO1xuICAgICAgICAgIHJldHVybiBoYXNBY2Nlc3M7XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgICAgcmVzLmpzb24oZmlsdGVyZWRVc2Vycyk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoXCJcXHUyNzRDIEVycm9yIGZldGNoaW5nIHVzZXJzOlwiLCBlcnJvcik7XG4gICAgICByZXMuc3RhdHVzKDUwMCkuanNvbih7XG4gICAgICAgIGVycm9yOiBcIkludGVybmFsIHNlcnZlciBlcnJvclwiLFxuICAgICAgICBtZXNzYWdlOiBcIkZhaWxlZCB0byBmZXRjaCB1c2Vyc1wiXG4gICAgICB9KTtcbiAgICB9XG4gIH0pO1xuICBhcHAyLmdldChcIi9hcGkvdXNlcnMvOmlkXCIsIGFzeW5jIChyZXEsIHJlcykgPT4ge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCB7IGlkIH0gPSByZXEucGFyYW1zO1xuICAgICAgaWYgKCFpZCkge1xuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oe1xuICAgICAgICAgIF9lcnJvcjogXCJCYWQgcmVxdWVzdFwiLFxuICAgICAgICAgIG1lc3NhZ2U6IFwiVXNlciBJRCBpcyByZXF1aXJlZFwiXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgICAgY29uc3QgdXNlciA9IGF3YWl0IHN0b3JhZ2UuZ2V0VXNlcihpZCk7XG4gICAgICBpZiAoIXVzZXIpIHtcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDA0KS5qc29uKHtcbiAgICAgICAgICBfZXJyb3I6IFwiTm90IGZvdW5kXCIsXG4gICAgICAgICAgbWVzc2FnZTogXCJVc2VyIG5vdCBmb3VuZFwiXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgICAgY29uc3QgeyBwYXNzd29yZCwgLi4udXNlcldpdGhvdXRQYXNzd29yZCB9ID0gdXNlcjtcbiAgICAgIHJlcy5qc29uKHVzZXJXaXRob3V0UGFzc3dvcmQpO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKFwiXFx1Mjc0QyBFcnJvciBmZXRjaGluZyB1c2VyOlwiLCBlcnJvcik7XG4gICAgICByZXMuc3RhdHVzKDUwMCkuanNvbih7XG4gICAgICAgIGVycm9yOiBcIkludGVybmFsIHNlcnZlciBlcnJvclwiLFxuICAgICAgICBtZXNzYWdlOiBcIkZhaWxlZCB0byBmZXRjaCB1c2VyXCJcbiAgICAgIH0pO1xuICAgIH1cbiAgfSk7XG4gIGFwcDIuZ2V0KFwiL2FwaS91c2Vycy9lbWFpbC86ZW1haWxcIiwgYXN5bmMgKHJlcSwgcmVzKSA9PiB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHsgZW1haWwgfSA9IHJlcS5wYXJhbXM7XG4gICAgICBpZiAoIWVtYWlsKSB7XG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7XG4gICAgICAgICAgX2Vycm9yOiBcIkJhZCByZXF1ZXN0XCIsXG4gICAgICAgICAgbWVzc2FnZTogXCJFbWFpbCBpcyByZXF1aXJlZFwiXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgICAgY29uc3QgdXNlciA9IGF3YWl0IHN0b3JhZ2UuZ2V0VXNlckJ5RW1haWwoZW1haWwpO1xuICAgICAgaWYgKCF1c2VyKSB7XG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwNCkuanNvbih7XG4gICAgICAgICAgX2Vycm9yOiBcIk5vdCBmb3VuZFwiLFxuICAgICAgICAgIG1lc3NhZ2U6IFwiVXNlciBub3QgZm91bmRcIlxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICAgIGNvbnN0IHsgcGFzc3dvcmQsIC4uLnVzZXJXaXRob3V0UGFzc3dvcmQgfSA9IHVzZXI7XG4gICAgICByZXMuanNvbih1c2VyV2l0aG91dFBhc3N3b3JkKTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcihcIlxcdTI3NEMgRXJyb3IgZmV0Y2hpbmcgdXNlciBieSBlbWFpbDpcIiwgZXJyb3IpO1xuICAgICAgcmVzLnN0YXR1cyg1MDApLmpzb24oe1xuICAgICAgICBlcnJvcjogXCJJbnRlcm5hbCBzZXJ2ZXIgZXJyb3JcIixcbiAgICAgICAgbWVzc2FnZTogXCJGYWlsZWQgdG8gZmV0Y2ggdXNlclwiXG4gICAgICB9KTtcbiAgICB9XG4gIH0pO1xuICBhcHAyLnBvc3QoXCIvYXBpL3VzZXJzXCIsIGFzeW5jIChyZXEsIHJlcykgPT4ge1xuICAgIHRyeSB7XG4gICAgICBpZiAocmVxLmJvZHkucGFzc3dvcmQpIHtcbiAgICAgICAgY29uc3QgcGFzc3dvcmRWYWxpZGF0aW9uID0gdmFsaWRhdGVQYXNzd29yZFN0cmVuZ3RoKHJlcS5ib2R5LnBhc3N3b3JkKTtcbiAgICAgICAgaWYgKCFwYXNzd29yZFZhbGlkYXRpb24uaXNWYWxpZCkge1xuICAgICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7XG4gICAgICAgICAgICBlcnJvcjogXCJWYWxpZGF0aW9uIGVycm9yXCIsXG4gICAgICAgICAgICBtZXNzYWdlOiBwYXNzd29yZFZhbGlkYXRpb24ubWVzc2FnZSxcbiAgICAgICAgICAgIGNvZGU6IFwiV0VBS19QQVNTV09SRFwiXG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGNvbnN0IG5vcm1hbGl6ZWREYXRhID0ge1xuICAgICAgICAuLi5yZXEuYm9keSxcbiAgICAgICAgZW1haWw6IG5vcm1hbGl6ZUVtYWlsKHJlcS5ib2R5LmVtYWlsIHx8IFwiXCIpLFxuICAgICAgICBmaXJzdE5hbWU6IHNhbml0aXplTmFtZShyZXEuYm9keS5maXJzdE5hbWUgfHwgXCJcIiksXG4gICAgICAgIGxhc3ROYW1lOiBzYW5pdGl6ZU5hbWUocmVxLmJvZHkubGFzdE5hbWUgfHwgXCJcIiksXG4gICAgICAgIHBob25lOiByZXEuYm9keS5waG9uZSA/IHNhbml0aXplU3RyaW5nKHJlcS5ib2R5LnBob25lKSA6IFwiXCIsXG4gICAgICAgIGxhbmd1YWdlOiByZXEuYm9keS5sYW5ndWFnZSB8fCBcImZyXCJcbiAgICAgIH07XG4gICAgICBpZiAoIW5vcm1hbGl6ZWREYXRhLnVzZXJuYW1lICYmIG5vcm1hbGl6ZWREYXRhLmVtYWlsKSB7XG4gICAgICAgIGNvbnN0IGJhc2VVc2VybmFtZSA9IGdlbmVyYXRlVXNlcm5hbWVGcm9tRW1haWwobm9ybWFsaXplZERhdGEuZW1haWwpO1xuICAgICAgICBsZXQgdXNlcm5hbWUgPSBiYXNlVXNlcm5hbWU7XG4gICAgICAgIGxldCB1c2VybmFtZUNvdW50ZXIgPSAxO1xuICAgICAgICBsZXQgZXhpc3RpbmdVc2VybmFtZSA9IGF3YWl0IGRiLnNlbGVjdCh7IHVzZXJuYW1lOiB1c2Vycy51c2VybmFtZSB9KS5mcm9tKHVzZXJzKS53aGVyZShlcTQodXNlcnMudXNlcm5hbWUsIHVzZXJuYW1lKSkubGltaXQoMSk7XG4gICAgICAgIHdoaWxlIChleGlzdGluZ1VzZXJuYW1lLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICB1c2VybmFtZSA9IGAke2Jhc2VVc2VybmFtZX0ke3VzZXJuYW1lQ291bnRlcn1gO1xuICAgICAgICAgIHVzZXJuYW1lQ291bnRlcisrO1xuICAgICAgICAgIGV4aXN0aW5nVXNlcm5hbWUgPSBhd2FpdCBkYi5zZWxlY3QoeyB1c2VybmFtZTogdXNlcnMudXNlcm5hbWUgfSkuZnJvbSh1c2Vycykud2hlcmUoZXE0KHVzZXJzLnVzZXJuYW1lLCB1c2VybmFtZSkpLmxpbWl0KDEpO1xuICAgICAgICB9XG4gICAgICAgIG5vcm1hbGl6ZWREYXRhLnVzZXJuYW1lID0gdXNlcm5hbWU7XG4gICAgICB9XG4gICAgICBjb25zdCB2YWxpZGF0ZWREYXRhID0gaW5zZXJ0VXNlclNjaGVtYS5wYXJzZShub3JtYWxpemVkRGF0YSk7XG4gICAgICBjb25zdCBleGlzdGluZ1VzZXIgPSBhd2FpdCBzdG9yYWdlLmdldFVzZXJCeUVtYWlsKHZhbGlkYXRlZERhdGEuZW1haWwpO1xuICAgICAgaWYgKGV4aXN0aW5nVXNlcikge1xuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDkpLmpzb24oe1xuICAgICAgICAgIF9lcnJvcjogXCJDb25mbGljdFwiLFxuICAgICAgICAgIG1lc3NhZ2U6IFwiVXNlciB3aXRoIHRoaXMgZW1haWwgYWxyZWFkeSBleGlzdHNcIlxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICAgIGNvbnN0IHVzZXIgPSBhd2FpdCBzdG9yYWdlLmNyZWF0ZVVzZXIodmFsaWRhdGVkRGF0YSk7XG4gICAgICBsb2dVc2VyQ3JlYXRpb24oe1xuICAgICAgICB1c2VySWQ6IHVzZXIuaWQsXG4gICAgICAgIGVtYWlsOiB1c2VyLmVtYWlsLFxuICAgICAgICByb2xlOiB1c2VyLnJvbGUsXG4gICAgICAgIG1ldGhvZDogXCJkaXJlY3RcIixcbiAgICAgICAgc3VjY2VzczogdHJ1ZSxcbiAgICAgICAgdGltZXN0YW1wOiAvKiBAX19QVVJFX18gKi8gbmV3IERhdGUoKSxcbiAgICAgICAgaXBBZGRyZXNzOiByZXEuaXAsXG4gICAgICAgIHVzZXJBZ2VudDogcmVxLmdldChcIlVzZXItQWdlbnRcIilcbiAgICAgIH0pO1xuICAgICAgY29uc3QgeyBwYXNzd29yZCwgLi4udXNlcldpdGhvdXRQYXNzd29yZCB9ID0gdXNlcjtcbiAgICAgIHJlcy5zdGF0dXMoMjAxKS5qc29uKHVzZXJXaXRob3V0UGFzc3dvcmQpO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBsb2dVc2VyQ3JlYXRpb24oe1xuICAgICAgICBlbWFpbDogcmVxLmJvZHkuZW1haWwgfHwgXCJ1bmtub3duXCIsXG4gICAgICAgIHJvbGU6IHJlcS5ib2R5LnJvbGUgfHwgXCJ1bmtub3duXCIsXG4gICAgICAgIG1ldGhvZDogXCJkaXJlY3RcIixcbiAgICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICAgIGVycm9yOiBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6IFwiVW5rbm93biBlcnJvclwiLFxuICAgICAgICB0aW1lc3RhbXA6IC8qIEBfX1BVUkVfXyAqLyBuZXcgRGF0ZSgpLFxuICAgICAgICBpcEFkZHJlc3M6IHJlcS5pcCxcbiAgICAgICAgdXNlckFnZW50OiByZXEuZ2V0KFwiVXNlci1BZ2VudFwiKVxuICAgICAgfSk7XG4gICAgICBpZiAoZXJyb3IgaW5zdGFuY2VvZiB6MTAuWm9kRXJyb3IpIHtcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHtcbiAgICAgICAgICBlcnJvcjogXCJWYWxpZGF0aW9uIGVycm9yXCIsXG4gICAgICAgICAgbWVzc2FnZTogXCJJbnZhbGlkIHVzZXIgZGF0YVwiLFxuICAgICAgICAgIGRldGFpbHM6IGVycm9yLmlzc3Vlc1xuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICAgIGNvbnNvbGUuZXJyb3IoXCJcXHUyNzRDIEVycm9yIGNyZWF0aW5nIHVzZXI6XCIsIGVycm9yKTtcbiAgICAgIHJlcy5zdGF0dXMoNTAwKS5qc29uKHtcbiAgICAgICAgZXJyb3I6IFwiSW50ZXJuYWwgc2VydmVyIGVycm9yXCIsXG4gICAgICAgIG1lc3NhZ2U6IFwiRmFpbGVkIHRvIGNyZWF0ZSB1c2VyXCJcbiAgICAgIH0pO1xuICAgIH1cbiAgfSk7XG4gIGFwcDIucHV0KFwiL2FwaS91c2Vycy86aWRcIiwgcmVxdWlyZUF1dGgsIGFzeW5jIChyZXEsIHJlcykgPT4ge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCB7IGlkIH0gPSByZXEucGFyYW1zO1xuICAgICAgY29uc3QgY3VycmVudFVzZXIgPSByZXEudXNlciB8fCByZXEuc2Vzc2lvbj8udXNlcjtcbiAgICAgIGlmICghY3VycmVudFVzZXIpIHtcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAxKS5qc29uKHtcbiAgICAgICAgICBtZXNzYWdlOiBcIkF1dGhlbnRpY2F0aW9uIHJlcXVpcmVkXCIsXG4gICAgICAgICAgY29kZTogXCJBVVRIX1JFUVVJUkVEXCJcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgICBpZiAoIWlkKSB7XG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7XG4gICAgICAgICAgZXJyb3I6IFwiQmFkIHJlcXVlc3RcIixcbiAgICAgICAgICBtZXNzYWdlOiBcIlVzZXIgSUQgaXMgcmVxdWlyZWRcIlxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICAgIGNvbnN0IHRhcmdldFVzZXIgPSBhd2FpdCBzdG9yYWdlLmdldFVzZXIoaWQpO1xuICAgICAgaWYgKCF0YXJnZXRVc2VyKSB7XG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwNCkuanNvbih7XG4gICAgICAgICAgZXJyb3I6IFwiTm90IGZvdW5kXCIsXG4gICAgICAgICAgbWVzc2FnZTogXCJVc2VyIG5vdCBmb3VuZFwiXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgICAgY29uc3QgeyByb2xlOiBuZXdSb2xlIH0gPSByZXEuYm9keTtcbiAgICAgIGlmIChuZXdSb2xlICYmIG5ld1JvbGUgIT09IHRhcmdldFVzZXIucm9sZSkge1xuICAgICAgICBpZiAoY3VycmVudFVzZXIucm9sZSA9PT0gXCJhZG1pblwiKSB7XG4gICAgICAgIH0gZWxzZSBpZiAoY3VycmVudFVzZXIucm9sZSA9PT0gXCJtYW5hZ2VyXCIpIHtcbiAgICAgICAgICBpZiAobmV3Um9sZSA9PT0gXCJhZG1pblwiKSB7XG4gICAgICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDMpLmpzb24oe1xuICAgICAgICAgICAgICBlcnJvcjogXCJQZXJtaXNzaW9uIGRlbmllZFwiLFxuICAgICAgICAgICAgICBtZXNzYWdlOiBcIk1hbmFnZXJzIGNhbm5vdCBhc3NpZ24gYWRtaW4gcm9sZVwiLFxuICAgICAgICAgICAgICBjb2RlOiBcIlJPTEVfRVNDQUxBVElPTl9ERU5JRURcIlxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfVxuICAgICAgICAgIGlmICghW1wibWFuYWdlclwiLCBcInRlbmFudFwiLCBcInJlc2lkZW50XCJdLmluY2x1ZGVzKG5ld1JvbGUpKSB7XG4gICAgICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDMpLmpzb24oe1xuICAgICAgICAgICAgICBlcnJvcjogXCJQZXJtaXNzaW9uIGRlbmllZFwiLFxuICAgICAgICAgICAgICBtZXNzYWdlOiBcIk1hbmFnZXJzIGNhbiBvbmx5IGFzc2lnbiBtYW5hZ2VyLCB0ZW5hbnQsIG9yIHJlc2lkZW50IHJvbGVzXCIsXG4gICAgICAgICAgICAgIGNvZGU6IFwiSU5WQUxJRF9ST0xFX0FTU0lHTk1FTlRcIlxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2UgaWYgKGN1cnJlbnRVc2VyLnJvbGUgPT09IFwiZGVtb19tYW5hZ2VyXCIpIHtcbiAgICAgICAgICBpZiAoIVtcImRlbW9fbWFuYWdlclwiLCBcImRlbW9fdGVuYW50XCIsIFwiZGVtb19yZXNpZGVudFwiXS5pbmNsdWRlcyhuZXdSb2xlKSkge1xuICAgICAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAzKS5qc29uKHtcbiAgICAgICAgICAgICAgZXJyb3I6IFwiUGVybWlzc2lvbiBkZW5pZWRcIixcbiAgICAgICAgICAgICAgbWVzc2FnZTogXCJEZW1vIG1hbmFnZXJzIGNhbiBvbmx5IGFzc2lnbiBkZW1vIHJvbGVzXCIsXG4gICAgICAgICAgICAgIGNvZGU6IFwiSU5WQUxJRF9ERU1PX1JPTEVfQVNTSUdOTUVOVFwiXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAzKS5qc29uKHtcbiAgICAgICAgICAgIGVycm9yOiBcIlBlcm1pc3Npb24gZGVuaWVkXCIsXG4gICAgICAgICAgICBtZXNzYWdlOiBcIkluc3VmZmljaWVudCBwZXJtaXNzaW9ucyB0byBhc3NpZ24gcm9sZXNcIixcbiAgICAgICAgICAgIGNvZGU6IFwiSU5TVUZGSUNJRU5UX1BFUk1JU1NJT05TXCJcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoY3VycmVudFVzZXIucm9sZSA9PT0gXCJtYW5hZ2VyXCIgfHwgY3VycmVudFVzZXIucm9sZSA9PT0gXCJkZW1vX21hbmFnZXJcIikge1xuICAgICAgICAgIGNvbnN0IGN1cnJlbnRVc2VyT3JncyA9IGF3YWl0IHN0b3JhZ2UuZ2V0VXNlck9yZ2FuaXphdGlvbnMoY3VycmVudFVzZXIuaWQpO1xuICAgICAgICAgIGNvbnN0IGN1cnJlbnRVc2VyT3JnSWRzID0gY3VycmVudFVzZXJPcmdzLm1hcCgob3JnKSA9PiBvcmcub3JnYW5pemF0aW9uSWQpO1xuICAgICAgICAgIGNvbnN0IHRhcmdldFVzZXJPcmdzID0gYXdhaXQgc3RvcmFnZS5nZXRVc2VyT3JnYW5pemF0aW9ucyhpZCk7XG4gICAgICAgICAgY29uc3QgdGFyZ2V0VXNlck9yZ0lkcyA9IHRhcmdldFVzZXJPcmdzLm1hcCgob3JnKSA9PiBvcmcub3JnYW5pemF0aW9uSWQpO1xuICAgICAgICAgIGNvbnN0IGhhc0FjY2Vzc1RvVGFyZ2V0T3JncyA9IHRhcmdldFVzZXJPcmdJZHMuc29tZShcbiAgICAgICAgICAgIChvcmdJZCkgPT4gY3VycmVudFVzZXJPcmdJZHMuaW5jbHVkZXMob3JnSWQpXG4gICAgICAgICAgKTtcbiAgICAgICAgICBpZiAoIWhhc0FjY2Vzc1RvVGFyZ2V0T3JncyAmJiB0YXJnZXRVc2VyT3JnSWRzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMykuanNvbih7XG4gICAgICAgICAgICAgIGVycm9yOiBcIlBlcm1pc3Npb24gZGVuaWVkXCIsXG4gICAgICAgICAgICAgIG1lc3NhZ2U6IFwiQ2Fubm90IG1vZGlmeSB1c2VycyBvdXRzaWRlIHlvdXIgb3JnYW5pemF0aW9uIHNjb3BlXCIsXG4gICAgICAgICAgICAgIGNvZGU6IFwiT1JHQU5JWkFUSU9OX1NDT1BFX1ZJT0xBVElPTlwiXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKGN1cnJlbnRVc2VyLnJvbGUgPT09IFwiZGVtb19tYW5hZ2VyXCIpIHtcbiAgICAgICAgICAgIGNvbnN0IHRhcmdldE9yZ3MgPSBhd2FpdCBkYi5zZWxlY3QoKS5mcm9tKG9yZ2FuaXphdGlvbnMpLndoZXJlKGluQXJyYXkzKG9yZ2FuaXphdGlvbnMuaWQsIHRhcmdldFVzZXJPcmdJZHMpKTtcbiAgICAgICAgICAgIGNvbnN0IGhhc05vbkRlbW9PcmdzID0gdGFyZ2V0T3Jncy5zb21lKChvcmcpID0+IG9yZy50eXBlICE9PSBcImRlbW9cIik7XG4gICAgICAgICAgICBpZiAoaGFzTm9uRGVtb09yZ3MpIHtcbiAgICAgICAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAzKS5qc29uKHtcbiAgICAgICAgICAgICAgICBlcnJvcjogXCJQZXJtaXNzaW9uIGRlbmllZFwiLFxuICAgICAgICAgICAgICAgIG1lc3NhZ2U6IFwiRGVtbyBtYW5hZ2VycyBjYW5ub3QgYXNzaWduIHJvbGVzIHRvIHVzZXJzIGluIG5vbi1kZW1vIG9yZ2FuaXphdGlvbnNcIixcbiAgICAgICAgICAgICAgICBjb2RlOiBcIkRFTU9fU0NPUEVfVklPTEFUSU9OXCJcbiAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgICBjb25zdCB1cGRhdGVTY2hlbWEgPSBpbnNlcnRVc2VyU2NoZW1hLnBhcnRpYWwoKS5vbWl0KHsgcGFzc3dvcmQ6IHRydWUgfSk7XG4gICAgICBjb25zdCB2YWxpZGF0ZWREYXRhID0gdXBkYXRlU2NoZW1hLnBhcnNlKHJlcS5ib2R5KTtcbiAgICAgIGNvbnN0IHVzZXIgPSBhd2FpdCBzdG9yYWdlLnVwZGF0ZVVzZXIoaWQsIHtcbiAgICAgICAgLi4udmFsaWRhdGVkRGF0YSxcbiAgICAgICAgdXBkYXRlZEF0OiAvKiBAX19QVVJFX18gKi8gbmV3IERhdGUoKVxuICAgICAgfSk7XG4gICAgICBpZiAoIXVzZXIpIHtcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDA0KS5qc29uKHtcbiAgICAgICAgICBlcnJvcjogXCJOb3QgZm91bmRcIixcbiAgICAgICAgICBtZXNzYWdlOiBcIlVzZXIgbm90IGZvdW5kXCJcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgICBxdWVyeUNhY2hlLmludmFsaWRhdGUoXCJ1c2Vyc1wiLCBcImFsbF91c2Vyc1wiKTtcbiAgICAgIHF1ZXJ5Q2FjaGUuaW52YWxpZGF0ZShcInVzZXJzXCIsIGB1c2VyOiR7aWR9YCk7XG4gICAgICBjb25zdCB7IHBhc3N3b3JkLCAuLi51c2VyV2l0aG91dFBhc3N3b3JkIH0gPSB1c2VyO1xuICAgICAgcmVzLmpzb24odXNlcldpdGhvdXRQYXNzd29yZCk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGlmIChlcnJvciBpbnN0YW5jZW9mIHoxMC5ab2RFcnJvcikge1xuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oe1xuICAgICAgICAgIGVycm9yOiBcIlZhbGlkYXRpb24gZXJyb3JcIixcbiAgICAgICAgICBtZXNzYWdlOiBcIkludmFsaWQgdXNlciBkYXRhXCIsXG4gICAgICAgICAgZGV0YWlsczogZXJyb3IuaXNzdWVzXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgICAgY29uc29sZS5lcnJvcihcIlxcdTI3NEMgRXJyb3IgdXBkYXRpbmcgdXNlcjpcIiwgZXJyb3IpO1xuICAgICAgcmVzLnN0YXR1cyg1MDApLmpzb24oe1xuICAgICAgICBlcnJvcjogXCJJbnRlcm5hbCBzZXJ2ZXIgZXJyb3JcIixcbiAgICAgICAgbWVzc2FnZTogXCJGYWlsZWQgdG8gdXBkYXRlIHVzZXJcIlxuICAgICAgfSk7XG4gICAgfVxuICB9KTtcbiAgYXBwMi5kZWxldGUoXCIvYXBpL3VzZXJzLzppZFwiLCBhc3luYyAocmVxLCByZXMpID0+IHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgeyBpZCB9ID0gcmVxLnBhcmFtcztcbiAgICAgIGlmICghaWQpIHtcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHtcbiAgICAgICAgICBfZXJyb3I6IFwiQmFkIHJlcXVlc3RcIixcbiAgICAgICAgICBtZXNzYWdlOiBcIlVzZXIgSUQgaXMgcmVxdWlyZWRcIlxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICAgIGNvbnN0IHVzZXIgPSBhd2FpdCBzdG9yYWdlLnVwZGF0ZVVzZXIoaWQsIHtcbiAgICAgICAgaXNBY3RpdmU6IGZhbHNlLFxuICAgICAgICB1cGRhdGVkQXQ6IC8qIEBfX1BVUkVfXyAqLyBuZXcgRGF0ZSgpXG4gICAgICB9KTtcbiAgICAgIGlmICghdXNlcikge1xuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDQpLmpzb24oe1xuICAgICAgICAgIF9lcnJvcjogXCJOb3QgZm91bmRcIixcbiAgICAgICAgICBtZXNzYWdlOiBcIlVzZXIgbm90IGZvdW5kXCJcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgICByZXMuanNvbih7XG4gICAgICAgIG1lc3NhZ2U6IFwiVXNlciBkZWFjdGl2YXRlZCBzdWNjZXNzZnVsbHlcIixcbiAgICAgICAgaWQ6IHVzZXIuaWRcbiAgICAgIH0pO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKFwiXFx1Mjc0QyBFcnJvciBkZWFjdGl2YXRpbmcgdXNlcjpcIiwgZXJyb3IpO1xuICAgICAgcmVzLnN0YXR1cyg1MDApLmpzb24oe1xuICAgICAgICBlcnJvcjogXCJJbnRlcm5hbCBzZXJ2ZXIgZXJyb3JcIixcbiAgICAgICAgbWVzc2FnZTogXCJGYWlsZWQgdG8gZGVhY3RpdmF0ZSB1c2VyXCJcbiAgICAgIH0pO1xuICAgIH1cbiAgfSk7XG4gIGFwcDIuZ2V0KFwiL2FwaS91c2VyLW9yZ2FuaXphdGlvbnNcIiwgcmVxdWlyZUF1dGgsIGFzeW5jIChyZXEsIHJlcykgPT4ge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCBjdXJyZW50VXNlciA9IHJlcS51c2VyIHx8IHJlcS5zZXNzaW9uPy51c2VyO1xuICAgICAgaWYgKCFjdXJyZW50VXNlcikge1xuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDEpLmpzb24oe1xuICAgICAgICAgIG1lc3NhZ2U6IFwiQXV0aGVudGljYXRpb24gcmVxdWlyZWRcIixcbiAgICAgICAgICBjb2RlOiBcIkFVVEhfUkVRVUlSRURcIlxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICAgIGNvbnN0IG9yZ2FuaXphdGlvbnMzID0gYXdhaXQgc3RvcmFnZS5nZXRVc2VyT3JnYW5pemF0aW9ucyhjdXJyZW50VXNlci5pZCk7XG4gICAgICByZXMuanNvbihvcmdhbml6YXRpb25zMyk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoXCJcXHUyNzRDIEVycm9yIGdldHRpbmcgdXNlciBvcmdhbml6YXRpb25zOlwiLCBlcnJvcik7XG4gICAgICByZXMuc3RhdHVzKDUwMCkuanNvbih7XG4gICAgICAgIGVycm9yOiBcIkludGVybmFsIHNlcnZlciBlcnJvclwiLFxuICAgICAgICBtZXNzYWdlOiBcIkZhaWxlZCB0byBnZXQgdXNlciBvcmdhbml6YXRpb25zXCJcbiAgICAgIH0pO1xuICAgIH1cbiAgfSk7XG4gIGFwcDIuZ2V0KFwiL2FwaS91c2VyLXJlc2lkZW5jZXNcIiwgcmVxdWlyZUF1dGgsIGFzeW5jIChyZXEsIHJlcykgPT4ge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCBjdXJyZW50VXNlciA9IHJlcS51c2VyIHx8IHJlcS5zZXNzaW9uPy51c2VyO1xuICAgICAgaWYgKCFjdXJyZW50VXNlcikge1xuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDEpLmpzb24oe1xuICAgICAgICAgIG1lc3NhZ2U6IFwiQXV0aGVudGljYXRpb24gcmVxdWlyZWRcIixcbiAgICAgICAgICBjb2RlOiBcIkFVVEhfUkVRVUlSRURcIlxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICAgIGNvbnN0IHJlc2lkZW5jZXMyID0gYXdhaXQgc3RvcmFnZS5nZXRVc2VyUmVzaWRlbmNlcyhjdXJyZW50VXNlci5pZCk7XG4gICAgICByZXMuanNvbihyZXNpZGVuY2VzMik7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoXCJcXHUyNzRDIEVycm9yIGdldHRpbmcgdXNlciByZXNpZGVuY2VzOlwiLCBlcnJvcik7XG4gICAgICByZXMuc3RhdHVzKDUwMCkuanNvbih7XG4gICAgICAgIGVycm9yOiBcIkludGVybmFsIHNlcnZlciBlcnJvclwiLFxuICAgICAgICBtZXNzYWdlOiBcIkZhaWxlZCB0byBnZXQgdXNlciByZXNpZGVuY2VzXCJcbiAgICAgIH0pO1xuICAgIH1cbiAgfSk7XG4gIGFwcDIuZ2V0KFwiL2FwaS9hZG1pbi9hbGwtdXNlci1vcmdhbml6YXRpb25zXCIsIHJlcXVpcmVBdXRoLCBhc3luYyAocmVxLCByZXMpID0+IHtcbiAgICBjb25zb2xlLmxvZyhcIlxcdXsxRjUwRH0gW0FQSV0gYWxsLXVzZXItb3JnYW5pemF0aW9ucyBlbmRwb2ludCBjYWxsZWQgYnkgdXNlcjpcIiwgcmVxLnVzZXI/LmVtYWlsKTtcbiAgICB0cnkge1xuICAgICAgY29uc3QgY3VycmVudFVzZXIgPSByZXEudXNlciB8fCByZXEuc2Vzc2lvbj8udXNlcjtcbiAgICAgIGlmICghY3VycmVudFVzZXIpIHtcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAxKS5qc29uKHtcbiAgICAgICAgICBtZXNzYWdlOiBcIkF1dGhlbnRpY2F0aW9uIHJlcXVpcmVkXCIsXG4gICAgICAgICAgY29kZTogXCJBVVRIX1JFUVVJUkVEXCJcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgICBpZiAoIVtcImFkbWluXCIsIFwibWFuYWdlclwiXS5pbmNsdWRlcyhjdXJyZW50VXNlci5yb2xlKSkge1xuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDMpLmpzb24oe1xuICAgICAgICAgIG1lc3NhZ2U6IFwiSW5zdWZmaWNpZW50IHBlcm1pc3Npb25zIHRvIHZpZXcgdXNlciBhc3NpZ25tZW50c1wiLFxuICAgICAgICAgIGNvZGU6IFwiSU5TVUZGSUNJRU5UX1BFUk1JU1NJT05TXCJcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgICBsZXQgdXNlck9yZ2FuaXphdGlvbnM1O1xuICAgICAgaWYgKGN1cnJlbnRVc2VyLnJvbGUgPT09IFwiYWRtaW5cIikge1xuICAgICAgICB1c2VyT3JnYW5pemF0aW9uczUgPSBhd2FpdCBkYi5zZWxlY3Qoe1xuICAgICAgICAgIHVzZXJJZDogdXNlck9yZ2FuaXphdGlvbnMudXNlcklkLFxuICAgICAgICAgIG9yZ2FuaXphdGlvbklkOiB1c2VyT3JnYW5pemF0aW9ucy5vcmdhbml6YXRpb25JZCxcbiAgICAgICAgICBvcmdhbml6YXRpb25Sb2xlOiB1c2VyT3JnYW5pemF0aW9ucy5vcmdhbml6YXRpb25Sb2xlLFxuICAgICAgICAgIGlzQWN0aXZlOiB1c2VyT3JnYW5pemF0aW9ucy5pc0FjdGl2ZVxuICAgICAgICB9KS5mcm9tKHVzZXJPcmdhbml6YXRpb25zKS53aGVyZShlcTQodXNlck9yZ2FuaXphdGlvbnMuaXNBY3RpdmUsIHRydWUpKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNvbnN0IG1hbmFnZXJPcmdzID0gYXdhaXQgZGIuc2VsZWN0KHsgb3JnYW5pemF0aW9uSWQ6IHVzZXJPcmdhbml6YXRpb25zLm9yZ2FuaXphdGlvbklkIH0pLmZyb20odXNlck9yZ2FuaXphdGlvbnMpLndoZXJlKFxuICAgICAgICAgIGFuZDQoXG4gICAgICAgICAgICBlcTQodXNlck9yZ2FuaXphdGlvbnMudXNlcklkLCBjdXJyZW50VXNlci5pZCksXG4gICAgICAgICAgICBlcTQodXNlck9yZ2FuaXphdGlvbnMuaXNBY3RpdmUsIHRydWUpXG4gICAgICAgICAgKVxuICAgICAgICApO1xuICAgICAgICBjb25zdCBvcmdJZHMgPSBtYW5hZ2VyT3Jncy5tYXAoKG9yZykgPT4gb3JnLm9yZ2FuaXphdGlvbklkKTtcbiAgICAgICAgaWYgKG9yZ0lkcy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICByZXR1cm4gcmVzLmpzb24oW10pO1xuICAgICAgICB9XG4gICAgICAgIHVzZXJPcmdhbml6YXRpb25zNSA9IGF3YWl0IGRiLnNlbGVjdCh7XG4gICAgICAgICAgdXNlcklkOiB1c2VyT3JnYW5pemF0aW9ucy51c2VySWQsXG4gICAgICAgICAgb3JnYW5pemF0aW9uSWQ6IHVzZXJPcmdhbml6YXRpb25zLm9yZ2FuaXphdGlvbklkLFxuICAgICAgICAgIG9yZ2FuaXphdGlvblJvbGU6IHVzZXJPcmdhbml6YXRpb25zLm9yZ2FuaXphdGlvblJvbGUsXG4gICAgICAgICAgaXNBY3RpdmU6IHVzZXJPcmdhbml6YXRpb25zLmlzQWN0aXZlXG4gICAgICAgIH0pLmZyb20odXNlck9yZ2FuaXphdGlvbnMpLndoZXJlKFxuICAgICAgICAgIGFuZDQoXG4gICAgICAgICAgICBlcTQodXNlck9yZ2FuaXphdGlvbnMuaXNBY3RpdmUsIHRydWUpLFxuICAgICAgICAgICAgaW5BcnJheTModXNlck9yZ2FuaXphdGlvbnMub3JnYW5pemF0aW9uSWQsIG9yZ0lkcylcbiAgICAgICAgICApXG4gICAgICAgICk7XG4gICAgICB9XG4gICAgICByZXMuanNvbih1c2VyT3JnYW5pemF0aW9uczUpO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKFwiXFx1Mjc0QyBFcnJvciBnZXR0aW5nIGFsbCB1c2VyIG9yZ2FuaXphdGlvbnM6XCIsIGVycm9yKTtcbiAgICAgIHJlcy5zdGF0dXMoNTAwKS5qc29uKHtcbiAgICAgICAgZXJyb3I6IFwiSW50ZXJuYWwgc2VydmVyIGVycm9yXCIsXG4gICAgICAgIG1lc3NhZ2U6IFwiRmFpbGVkIHRvIGdldCB1c2VyIG9yZ2FuaXphdGlvbnNcIlxuICAgICAgfSk7XG4gICAgfVxuICB9KTtcbiAgYXBwMi5nZXQoXCIvYXBpL2FkbWluL2FsbC11c2VyLXJlc2lkZW5jZXNcIiwgcmVxdWlyZUF1dGgsIGFzeW5jIChyZXEsIHJlcykgPT4ge1xuICAgIGNvbnNvbGUubG9nKFwiXFx1ezFGNTBEfSBbQVBJXSBhbGwtdXNlci1yZXNpZGVuY2VzIGVuZHBvaW50IGNhbGxlZCBieSB1c2VyOlwiLCByZXEudXNlcj8uZW1haWwpO1xuICAgIHRyeSB7XG4gICAgICBjb25zdCBjdXJyZW50VXNlciA9IHJlcS51c2VyIHx8IHJlcS5zZXNzaW9uPy51c2VyO1xuICAgICAgaWYgKCFjdXJyZW50VXNlcikge1xuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDEpLmpzb24oe1xuICAgICAgICAgIG1lc3NhZ2U6IFwiQXV0aGVudGljYXRpb24gcmVxdWlyZWRcIixcbiAgICAgICAgICBjb2RlOiBcIkFVVEhfUkVRVUlSRURcIlxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICAgIGlmICghW1wiYWRtaW5cIiwgXCJtYW5hZ2VyXCJdLmluY2x1ZGVzKGN1cnJlbnRVc2VyLnJvbGUpKSB7XG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMykuanNvbih7XG4gICAgICAgICAgbWVzc2FnZTogXCJJbnN1ZmZpY2llbnQgcGVybWlzc2lvbnMgdG8gdmlldyB1c2VyIGFzc2lnbm1lbnRzXCIsXG4gICAgICAgICAgY29kZTogXCJJTlNVRkZJQ0lFTlRfUEVSTUlTU0lPTlNcIlxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICAgIGxldCB1c2VyUmVzaWRlbmNlczQ7XG4gICAgICBpZiAoY3VycmVudFVzZXIucm9sZSA9PT0gXCJhZG1pblwiKSB7XG4gICAgICAgIHVzZXJSZXNpZGVuY2VzNCA9IGF3YWl0IGRiLnNlbGVjdCh7XG4gICAgICAgICAgdXNlcklkOiB1c2VyUmVzaWRlbmNlcy51c2VySWQsXG4gICAgICAgICAgcmVzaWRlbmNlSWQ6IHVzZXJSZXNpZGVuY2VzLnJlc2lkZW5jZUlkLFxuICAgICAgICAgIHJlbGF0aW9uc2hpcFR5cGU6IHVzZXJSZXNpZGVuY2VzLnJlbGF0aW9uc2hpcFR5cGUsXG4gICAgICAgICAgc3RhcnREYXRlOiB1c2VyUmVzaWRlbmNlcy5zdGFydERhdGUsXG4gICAgICAgICAgZW5kRGF0ZTogdXNlclJlc2lkZW5jZXMuZW5kRGF0ZSxcbiAgICAgICAgICBpc0FjdGl2ZTogdXNlclJlc2lkZW5jZXMuaXNBY3RpdmVcbiAgICAgICAgfSkuZnJvbSh1c2VyUmVzaWRlbmNlcykud2hlcmUoZXE0KHVzZXJSZXNpZGVuY2VzLmlzQWN0aXZlLCB0cnVlKSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjb25zdCBtYW5hZ2VyT3JncyA9IGF3YWl0IGRiLnNlbGVjdCh7IG9yZ2FuaXphdGlvbklkOiB1c2VyT3JnYW5pemF0aW9ucy5vcmdhbml6YXRpb25JZCB9KS5mcm9tKHVzZXJPcmdhbml6YXRpb25zKS53aGVyZShcbiAgICAgICAgICBhbmQ0KFxuICAgICAgICAgICAgZXE0KHVzZXJPcmdhbml6YXRpb25zLnVzZXJJZCwgY3VycmVudFVzZXIuaWQpLFxuICAgICAgICAgICAgZXE0KHVzZXJPcmdhbml6YXRpb25zLmlzQWN0aXZlLCB0cnVlKVxuICAgICAgICAgIClcbiAgICAgICAgKTtcbiAgICAgICAgY29uc3Qgb3JnSWRzID0gbWFuYWdlck9yZ3MubWFwKChvcmcpID0+IG9yZy5vcmdhbml6YXRpb25JZCk7XG4gICAgICAgIGlmIChvcmdJZHMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgcmV0dXJuIHJlcy5qc29uKFtdKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBhY2Nlc3NpYmxlUmVzaWRlbmNlcyA9IGF3YWl0IGRiLnNlbGVjdCh7IHJlc2lkZW5jZUlkOiByZXNpZGVuY2VzLmlkIH0pLmZyb20ocmVzaWRlbmNlcykuaW5uZXJKb2luKGJ1aWxkaW5ncywgZXE0KHJlc2lkZW5jZXMuYnVpbGRpbmdJZCwgYnVpbGRpbmdzLmlkKSkud2hlcmUoXG4gICAgICAgICAgYW5kNChcbiAgICAgICAgICAgIGluQXJyYXkzKGJ1aWxkaW5ncy5vcmdhbml6YXRpb25JZCwgb3JnSWRzKSxcbiAgICAgICAgICAgIGVxNChyZXNpZGVuY2VzLmlzQWN0aXZlLCB0cnVlKVxuICAgICAgICAgIClcbiAgICAgICAgKTtcbiAgICAgICAgY29uc3QgcmVzaWRlbmNlSWRzID0gYWNjZXNzaWJsZVJlc2lkZW5jZXMubWFwKChyZXMyKSA9PiByZXMyLnJlc2lkZW5jZUlkKTtcbiAgICAgICAgaWYgKHJlc2lkZW5jZUlkcy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICByZXR1cm4gcmVzLmpzb24oW10pO1xuICAgICAgICB9XG4gICAgICAgIHVzZXJSZXNpZGVuY2VzNCA9IGF3YWl0IGRiLnNlbGVjdCh7XG4gICAgICAgICAgdXNlcklkOiB1c2VyUmVzaWRlbmNlcy51c2VySWQsXG4gICAgICAgICAgcmVzaWRlbmNlSWQ6IHVzZXJSZXNpZGVuY2VzLnJlc2lkZW5jZUlkLFxuICAgICAgICAgIHJlbGF0aW9uc2hpcFR5cGU6IHVzZXJSZXNpZGVuY2VzLnJlbGF0aW9uc2hpcFR5cGUsXG4gICAgICAgICAgc3RhcnREYXRlOiB1c2VyUmVzaWRlbmNlcy5zdGFydERhdGUsXG4gICAgICAgICAgZW5kRGF0ZTogdXNlclJlc2lkZW5jZXMuZW5kRGF0ZSxcbiAgICAgICAgICBpc0FjdGl2ZTogdXNlclJlc2lkZW5jZXMuaXNBY3RpdmVcbiAgICAgICAgfSkuZnJvbSh1c2VyUmVzaWRlbmNlcykud2hlcmUoXG4gICAgICAgICAgYW5kNChcbiAgICAgICAgICAgIGVxNCh1c2VyUmVzaWRlbmNlcy5pc0FjdGl2ZSwgdHJ1ZSksXG4gICAgICAgICAgICBpbkFycmF5Myh1c2VyUmVzaWRlbmNlcy5yZXNpZGVuY2VJZCwgcmVzaWRlbmNlSWRzKVxuICAgICAgICAgIClcbiAgICAgICAgKTtcbiAgICAgIH1cbiAgICAgIHJlcy5qc29uKHVzZXJSZXNpZGVuY2VzNCk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoXCJcXHUyNzRDIEVycm9yIGdldHRpbmcgYWxsIHVzZXIgcmVzaWRlbmNlczpcIiwgZXJyb3IpO1xuICAgICAgcmVzLnN0YXR1cyg1MDApLmpzb24oe1xuICAgICAgICBlcnJvcjogXCJJbnRlcm5hbCBzZXJ2ZXIgZXJyb3JcIixcbiAgICAgICAgbWVzc2FnZTogXCJGYWlsZWQgdG8gZ2V0IHVzZXIgcmVzaWRlbmNlc1wiXG4gICAgICB9KTtcbiAgICB9XG4gIH0pO1xuICBhcHAyLmdldChcIi9hcGkvdXNlci9wZXJtaXNzaW9uc1wiLCByZXF1aXJlQXV0aCwgYXN5bmMgKHJlcSwgcmVzKSA9PiB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHVzZXJSb2xlID0gcmVxLnVzZXI/LnJvbGU7XG4gICAgICBpZiAoIXVzZXJSb2xlKSB7XG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7XG4gICAgICAgICAgX2Vycm9yOiBcIkJhZCByZXF1ZXN0XCIsXG4gICAgICAgICAgbWVzc2FnZTogXCJVc2VyIHJvbGUgbm90IGZvdW5kIGluIHNlc3Npb25cIlxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICAgIGNvbnN0IHJvbGVQZXJtaXNzaW9uczIgPSBhd2FpdCBzdG9yYWdlLmdldFJvbGVQZXJtaXNzaW9ucygpO1xuICAgICAgY29uc3QgdXNlclBlcm1pc3Npb25zMiA9IHJvbGVQZXJtaXNzaW9uczIuZmlsdGVyKChycCkgPT4gcnAucm9sZSA9PT0gdXNlclJvbGUpLm1hcCgocnApID0+IHJwLnBlcm1pc3Npb24/Lm5hbWUpLmZpbHRlcihCb29sZWFuKTtcbiAgICAgIGNvbnN0IHJlc3BvbnNlRGF0YSA9IHtcbiAgICAgICAgcm9sZTogdXNlclJvbGUsXG4gICAgICAgIHBlcm1pc3Npb25zOiB1c2VyUGVybWlzc2lvbnMyLFxuICAgICAgICBwZXJtaXNzaW9uQ291bnQ6IHVzZXJQZXJtaXNzaW9uczIubGVuZ3RoXG4gICAgICB9O1xuICAgICAgY29uc3QgcGVybWlzc2lvbnNSZXNwb25zZVNjaGVtYSA9IHoxMC5vYmplY3Qoe1xuICAgICAgICByb2xlOiB6MTAuZW51bShbXCJhZG1pblwiLCBcIm1hbmFnZXJcIiwgXCJ0ZW5hbnRcIiwgXCJyZXNpZGVudFwiXSksXG4gICAgICAgIHBlcm1pc3Npb25zOiB6MTAuYXJyYXkoejEwLnN0cmluZygpKSxcbiAgICAgICAgcGVybWlzc2lvbkNvdW50OiB6MTAubnVtYmVyKClcbiAgICAgIH0pO1xuICAgICAgY29uc3QgdmFsaWRhdGVkUmVzcG9uc2UgPSBwZXJtaXNzaW9uc1Jlc3BvbnNlU2NoZW1hLnBhcnNlKHJlc3BvbnNlRGF0YSk7XG4gICAgICByZXMuanNvbih2YWxpZGF0ZWRSZXNwb25zZSk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGlmIChlcnJvciBpbnN0YW5jZW9mIHoxMC5ab2RFcnJvcikge1xuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg1MDApLmpzb24oe1xuICAgICAgICAgIGVycm9yOiBcIkludGVybmFsIHNlcnZlciBlcnJvclwiLFxuICAgICAgICAgIG1lc3NhZ2U6IFwiRmFpbGVkIHRvIHZhbGlkYXRlIHBlcm1pc3Npb25zIHJlc3BvbnNlXCIsXG4gICAgICAgICAgZGV0YWlsczogZXJyb3IuaXNzdWVzXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgICAgY29uc29sZS5lcnJvcihcIlxcdTI3NEMgRXJyb3IgZmV0Y2hpbmcgdXNlciBwZXJtaXNzaW9uczpcIiwgZXJyb3IpO1xuICAgICAgcmVzLnN0YXR1cyg1MDApLmpzb24oe1xuICAgICAgICBlcnJvcjogXCJJbnRlcm5hbCBzZXJ2ZXIgZXJyb3JcIixcbiAgICAgICAgbWVzc2FnZTogXCJGYWlsZWQgdG8gZmV0Y2ggdXNlciBwZXJtaXNzaW9uc1wiXG4gICAgICB9KTtcbiAgICB9XG4gIH0pO1xuICBhcHAyLnB1dChcIi9hcGkvdXNlcnMvOmlkL29yZ2FuaXphdGlvbnNcIiwgcmVxdWlyZUF1dGgsIGFzeW5jIChyZXEsIHJlcykgPT4ge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCBjdXJyZW50VXNlciA9IHJlcS51c2VyIHx8IHJlcS5zZXNzaW9uPy51c2VyO1xuICAgICAgY29uc3QgeyBpZDogdXNlcklkIH0gPSByZXEucGFyYW1zO1xuICAgICAgY29uc3QgeyBvcmdhbml6YXRpb25JZHMgfSA9IHJlcS5ib2R5O1xuICAgICAgaWYgKCFjdXJyZW50VXNlcikge1xuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDEpLmpzb24oe1xuICAgICAgICAgIG1lc3NhZ2U6IFwiQXV0aGVudGljYXRpb24gcmVxdWlyZWRcIixcbiAgICAgICAgICBjb2RlOiBcIkFVVEhfUkVRVUlSRURcIlxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICAgIGlmIChjdXJyZW50VXNlci5yb2xlICE9PSBcImFkbWluXCIpIHtcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAzKS5qc29uKHtcbiAgICAgICAgICBtZXNzYWdlOiBcIk9ubHkgYWRtaW5pc3RyYXRvcnMgY2FuIG1vZGlmeSBvcmdhbml6YXRpb24gYXNzaWdubWVudHNcIixcbiAgICAgICAgICBjb2RlOiBcIklOU1VGRklDSUVOVF9QRVJNSVNTSU9OU1wiXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgICAgaWYgKCF1c2VySWQgfHwgIUFycmF5LmlzQXJyYXkob3JnYW5pemF0aW9uSWRzKSkge1xuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oe1xuICAgICAgICAgIG1lc3NhZ2U6IFwiVXNlciBJRCBhbmQgb3JnYW5pemF0aW9uIElEcyBhcnJheSBhcmUgcmVxdWlyZWRcIixcbiAgICAgICAgICBjb2RlOiBcIklOVkFMSURfUkVRVUVTVFwiXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgICAgY29uc3QgdXNlciA9IGF3YWl0IHN0b3JhZ2UuZ2V0VXNlcih1c2VySWQpO1xuICAgICAgaWYgKCF1c2VyKSB7XG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwNCkuanNvbih7XG4gICAgICAgICAgbWVzc2FnZTogXCJVc2VyIG5vdCBmb3VuZFwiLFxuICAgICAgICAgIGNvZGU6IFwiVVNFUl9OT1RfRk9VTkRcIlxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICAgIGF3YWl0IGRiLmRlbGV0ZSh1c2VyT3JnYW5pemF0aW9ucykud2hlcmUoZXE0KHVzZXJPcmdhbml6YXRpb25zLnVzZXJJZCwgdXNlcklkKSk7XG4gICAgICBpZiAob3JnYW5pemF0aW9uSWRzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgY29uc3QgbmV3QXNzaWdubWVudHMgPSBvcmdhbml6YXRpb25JZHMubWFwKChvcmdJZCkgPT4gKHtcbiAgICAgICAgICB1c2VySWQsXG4gICAgICAgICAgb3JnYW5pemF0aW9uSWQ6IG9yZ0lkLFxuICAgICAgICAgIG9yZ2FuaXphdGlvblJvbGU6IHVzZXIucm9sZSxcbiAgICAgICAgICBpc0FjdGl2ZTogdHJ1ZVxuICAgICAgICB9KSk7XG4gICAgICAgIGF3YWl0IGRiLmluc2VydCh1c2VyT3JnYW5pemF0aW9ucykudmFsdWVzKG5ld0Fzc2lnbm1lbnRzKTtcbiAgICAgIH1cbiAgICAgIHJlcy5qc29uKHtcbiAgICAgICAgbWVzc2FnZTogXCJPcmdhbml6YXRpb24gYXNzaWdubWVudHMgdXBkYXRlZCBzdWNjZXNzZnVsbHlcIixcbiAgICAgICAgdXNlcklkLFxuICAgICAgICBvcmdhbml6YXRpb25JZHNcbiAgICAgIH0pO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKFwiXFx1Mjc0QyBFcnJvciB1cGRhdGluZyBvcmdhbml6YXRpb24gYXNzaWdubWVudHM6XCIsIGVycm9yKTtcbiAgICAgIHJlcy5zdGF0dXMoNTAwKS5qc29uKHtcbiAgICAgICAgZXJyb3I6IFwiSW50ZXJuYWwgc2VydmVyIGVycm9yXCIsXG4gICAgICAgIG1lc3NhZ2U6IFwiRmFpbGVkIHRvIHVwZGF0ZSBvcmdhbml6YXRpb24gYXNzaWdubWVudHNcIlxuICAgICAgfSk7XG4gICAgfVxuICB9KTtcbiAgYXBwMi5wdXQoXCIvYXBpL3VzZXJzLzppZC9idWlsZGluZ3NcIiwgcmVxdWlyZUF1dGgsIGFzeW5jIChyZXEsIHJlcykgPT4ge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCBjdXJyZW50VXNlciA9IHJlcS51c2VyIHx8IHJlcS5zZXNzaW9uPy51c2VyO1xuICAgICAgY29uc3QgeyBpZDogdXNlcklkIH0gPSByZXEucGFyYW1zO1xuICAgICAgY29uc3QgeyBidWlsZGluZ0lkcyB9ID0gcmVxLmJvZHk7XG4gICAgICBpZiAoIWN1cnJlbnRVc2VyKSB7XG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMSkuanNvbih7XG4gICAgICAgICAgbWVzc2FnZTogXCJBdXRoZW50aWNhdGlvbiByZXF1aXJlZFwiLFxuICAgICAgICAgIGNvZGU6IFwiQVVUSF9SRVFVSVJFRFwiXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgICAgaWYgKCFbXCJhZG1pblwiLCBcIm1hbmFnZXJcIl0uaW5jbHVkZXMoY3VycmVudFVzZXIucm9sZSkpIHtcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAzKS5qc29uKHtcbiAgICAgICAgICBtZXNzYWdlOiBcIk9ubHkgYWRtaW5pc3RyYXRvcnMgYW5kIG1hbmFnZXJzIGNhbiBtb2RpZnkgYnVpbGRpbmcgYXNzaWdubWVudHNcIixcbiAgICAgICAgICBjb2RlOiBcIklOU1VGRklDSUVOVF9QRVJNSVNTSU9OU1wiXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgICAgaWYgKCF1c2VySWQgfHwgIUFycmF5LmlzQXJyYXkoYnVpbGRpbmdJZHMpKSB7XG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7XG4gICAgICAgICAgbWVzc2FnZTogXCJVc2VyIElEIGFuZCBidWlsZGluZyBJRHMgYXJyYXkgYXJlIHJlcXVpcmVkXCIsXG4gICAgICAgICAgY29kZTogXCJJTlZBTElEX1JFUVVFU1RcIlxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICAgIGNvbnN0IHVzZXIgPSBhd2FpdCBzdG9yYWdlLmdldFVzZXIodXNlcklkKTtcbiAgICAgIGlmICghdXNlcikge1xuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDQpLmpzb24oe1xuICAgICAgICAgIG1lc3NhZ2U6IFwiVXNlciBub3QgZm91bmRcIixcbiAgICAgICAgICBjb2RlOiBcIlVTRVJfTk9UX0ZPVU5EXCJcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgICBjb25zdCByZXNpZGVuY2VzMiA9IGF3YWl0IGRiLnNlbGVjdCgpLmZyb20ocmVzaWRlbmNlcykud2hlcmUoaW5BcnJheTMocmVzaWRlbmNlcy5idWlsZGluZ0lkLCBidWlsZGluZ0lkcykpO1xuICAgICAgYXdhaXQgZGIuZGVsZXRlKHVzZXJSZXNpZGVuY2VzKS53aGVyZShlcTQodXNlclJlc2lkZW5jZXMudXNlcklkLCB1c2VySWQpKTtcbiAgICAgIGlmIChyZXNpZGVuY2VzMi5sZW5ndGggPiAwKSB7XG4gICAgICAgIGNvbnN0IGJ1aWxkaW5nVG9SZXNpZGVuY2UgPSAvKiBAX19QVVJFX18gKi8gbmV3IE1hcCgpO1xuICAgICAgICByZXNpZGVuY2VzMi5mb3JFYWNoKChyZXNpZGVuY2UpID0+IHtcbiAgICAgICAgICBpZiAoIWJ1aWxkaW5nVG9SZXNpZGVuY2UuaGFzKHJlc2lkZW5jZS5idWlsZGluZ0lkKSkge1xuICAgICAgICAgICAgYnVpbGRpbmdUb1Jlc2lkZW5jZS5zZXQocmVzaWRlbmNlLmJ1aWxkaW5nSWQsIHJlc2lkZW5jZSk7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgY29uc3QgbmV3QXNzaWdubWVudHMgPSBBcnJheS5mcm9tKGJ1aWxkaW5nVG9SZXNpZGVuY2UudmFsdWVzKCkpLm1hcCgocmVzaWRlbmNlKSA9PiAoe1xuICAgICAgICAgIHVzZXJJZCxcbiAgICAgICAgICByZXNpZGVuY2VJZDogcmVzaWRlbmNlLmlkLFxuICAgICAgICAgIHJlbGF0aW9uc2hpcFR5cGU6IHVzZXIucm9sZSA9PT0gXCJtYW5hZ2VyXCIgPyBcIm1hbmFnZXJcIiA6IFwidGVuYW50XCIsXG4gICAgICAgICAgc3RhcnREYXRlOiAoLyogQF9fUFVSRV9fICovIG5ldyBEYXRlKCkpLnRvSVNPU3RyaW5nKCkuc3BsaXQoXCJUXCIpWzBdLFxuICAgICAgICAgIGlzQWN0aXZlOiB0cnVlXG4gICAgICAgIH0pKTtcbiAgICAgICAgYXdhaXQgZGIuaW5zZXJ0KHVzZXJSZXNpZGVuY2VzKS52YWx1ZXMobmV3QXNzaWdubWVudHMpO1xuICAgICAgfVxuICAgICAgcmVzLmpzb24oe1xuICAgICAgICBtZXNzYWdlOiBcIkJ1aWxkaW5nIGFzc2lnbm1lbnRzIHVwZGF0ZWQgc3VjY2Vzc2Z1bGx5XCIsXG4gICAgICAgIHVzZXJJZCxcbiAgICAgICAgYnVpbGRpbmdJZHNcbiAgICAgIH0pO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKFwiXFx1Mjc0QyBFcnJvciB1cGRhdGluZyBidWlsZGluZyBhc3NpZ25tZW50czpcIiwgZXJyb3IpO1xuICAgICAgcmVzLnN0YXR1cyg1MDApLmpzb24oe1xuICAgICAgICBlcnJvcjogXCJJbnRlcm5hbCBzZXJ2ZXIgZXJyb3JcIixcbiAgICAgICAgbWVzc2FnZTogXCJGYWlsZWQgdG8gdXBkYXRlIGJ1aWxkaW5nIGFzc2lnbm1lbnRzXCJcbiAgICAgIH0pO1xuICAgIH1cbiAgfSk7XG4gIGFwcDIuZ2V0KFwiL2FwaS91c2Vycy86aWQvcmVzaWRlbmNlc1wiLCByZXF1aXJlQXV0aCwgYXN5bmMgKHJlcSwgcmVzKSA9PiB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IGN1cnJlbnRVc2VyID0gcmVxLnVzZXIgfHwgcmVxLnNlc3Npb24/LnVzZXI7XG4gICAgICBjb25zdCB7IGlkOiB1c2VySWQgfSA9IHJlcS5wYXJhbXM7XG4gICAgICBpZiAoIWN1cnJlbnRVc2VyKSB7XG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMSkuanNvbih7XG4gICAgICAgICAgbWVzc2FnZTogXCJBdXRoZW50aWNhdGlvbiByZXF1aXJlZFwiLFxuICAgICAgICAgIGNvZGU6IFwiQVVUSF9SRVFVSVJFRFwiXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgICAgaWYgKGN1cnJlbnRVc2VyLmlkICE9PSB1c2VySWQgJiYgIVtcImFkbWluXCIsIFwibWFuYWdlclwiXS5pbmNsdWRlcyhjdXJyZW50VXNlci5yb2xlKSkge1xuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDMpLmpzb24oe1xuICAgICAgICAgIG1lc3NhZ2U6IFwiSW5zdWZmaWNpZW50IHBlcm1pc3Npb25zXCIsXG4gICAgICAgICAgY29kZTogXCJJTlNVRkZJQ0lFTlRfUEVSTUlTU0lPTlNcIlxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICAgIGNvbnN0IHJlc2lkZW5jZXNXaXRoRGV0YWlscyA9IGF3YWl0IHN0b3JhZ2UuZ2V0VXNlclJlc2lkZW5jZXNXaXRoRGV0YWlscyh1c2VySWQpO1xuICAgICAgY29uc3QgcmVzaWRlbmNlczIgPSByZXNpZGVuY2VzV2l0aERldGFpbHMubWFwKChpdGVtKSA9PiAoe1xuICAgICAgICBpZDogaXRlbS5yZXNpZGVuY2UuaWQsXG4gICAgICAgIHVuaXROdW1iZXI6IGl0ZW0ucmVzaWRlbmNlLnVuaXROdW1iZXIsXG4gICAgICAgIGZsb29yOiBpdGVtLnJlc2lkZW5jZS5mbG9vcixcbiAgICAgICAgc3F1YXJlRm9vdGFnZTogaXRlbS5yZXNpZGVuY2Uuc3F1YXJlRm9vdGFnZSxcbiAgICAgICAgYmVkcm9vbXM6IGl0ZW0ucmVzaWRlbmNlLmJlZHJvb21zLFxuICAgICAgICBiYXRocm9vbXM6IGl0ZW0ucmVzaWRlbmNlLmJhdGhyb29tcyxcbiAgICAgICAgYmFsY29ueTogaXRlbS5yZXNpZGVuY2UuYmFsY29ueSxcbiAgICAgICAgcGFya2luZ1NwYWNlTnVtYmVyczogaXRlbS5yZXNpZGVuY2UucGFya2luZ1NwYWNlTnVtYmVycyxcbiAgICAgICAgc3RvcmFnZVNwYWNlTnVtYmVyczogaXRlbS5yZXNpZGVuY2Uuc3RvcmFnZVNwYWNlTnVtYmVycyxcbiAgICAgICAgaXNBY3RpdmU6IGl0ZW0ucmVzaWRlbmNlLmlzQWN0aXZlLFxuICAgICAgICBidWlsZGluZ0lkOiBpdGVtLnJlc2lkZW5jZS5idWlsZGluZ0lkLFxuICAgICAgICBidWlsZGluZzoge1xuICAgICAgICAgIGlkOiBpdGVtLmJ1aWxkaW5nLmlkLFxuICAgICAgICAgIG5hbWU6IGl0ZW0uYnVpbGRpbmcubmFtZSxcbiAgICAgICAgICBhZGRyZXNzOiBpdGVtLmJ1aWxkaW5nLmFkZHJlc3MsXG4gICAgICAgICAgY2l0eTogaXRlbS5idWlsZGluZy5jaXR5LFxuICAgICAgICAgIHByb3ZpbmNlOiBpdGVtLmJ1aWxkaW5nLnByb3ZpbmNlLFxuICAgICAgICAgIHBvc3RhbENvZGU6IGl0ZW0uYnVpbGRpbmcucG9zdGFsQ29kZVxuICAgICAgICB9XG4gICAgICB9KSk7XG4gICAgICByZXMuanNvbihyZXNpZGVuY2VzMik7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoXCJcXHUyNzRDIEVycm9yIGdldHRpbmcgdXNlciByZXNpZGVuY2VzOlwiLCBlcnJvcik7XG4gICAgICByZXMuc3RhdHVzKDUwMCkuanNvbih7XG4gICAgICAgIGVycm9yOiBcIkludGVybmFsIHNlcnZlciBlcnJvclwiLFxuICAgICAgICBtZXNzYWdlOiBcIkZhaWxlZCB0byBnZXQgdXNlciByZXNpZGVuY2VzXCJcbiAgICAgIH0pO1xuICAgIH1cbiAgfSk7XG4gIGFwcDIuZ2V0KFwiL2FwaS91c2Vycy86aWQvYnVpbGRpbmdzXCIsIHJlcXVpcmVBdXRoLCBhc3luYyAocmVxLCByZXMpID0+IHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgY3VycmVudFVzZXIgPSByZXEudXNlciB8fCByZXEuc2Vzc2lvbj8udXNlcjtcbiAgICAgIGNvbnN0IHsgaWQ6IHVzZXJJZCB9ID0gcmVxLnBhcmFtcztcbiAgICAgIGlmICghY3VycmVudFVzZXIpIHtcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAxKS5qc29uKHtcbiAgICAgICAgICBtZXNzYWdlOiBcIkF1dGhlbnRpY2F0aW9uIHJlcXVpcmVkXCIsXG4gICAgICAgICAgY29kZTogXCJBVVRIX1JFUVVJUkVEXCJcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgICBpZiAoY3VycmVudFVzZXIuaWQgIT09IHVzZXJJZCAmJiAhW1wiYWRtaW5cIiwgXCJtYW5hZ2VyXCJdLmluY2x1ZGVzKGN1cnJlbnRVc2VyLnJvbGUpKSB7XG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMykuanNvbih7XG4gICAgICAgICAgbWVzc2FnZTogXCJJbnN1ZmZpY2llbnQgcGVybWlzc2lvbnNcIixcbiAgICAgICAgICBjb2RlOiBcIklOU1VGRklDSUVOVF9QRVJNSVNTSU9OU1wiXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgICAgY29uc3QgdXNlclJlc2lkZW5jZXM0ID0gYXdhaXQgZGIuc2VsZWN0KHtcbiAgICAgICAgcmVzaWRlbmNlSWQ6IHVzZXJSZXNpZGVuY2VzLnJlc2lkZW5jZUlkLFxuICAgICAgICBidWlsZGluZ0lkOiByZXNpZGVuY2VzLmJ1aWxkaW5nSWRcbiAgICAgIH0pLmZyb20odXNlclJlc2lkZW5jZXMpLmlubmVySm9pbihyZXNpZGVuY2VzLCBlcTQodXNlclJlc2lkZW5jZXMucmVzaWRlbmNlSWQsIHJlc2lkZW5jZXMuaWQpKS53aGVyZShhbmQ0KFxuICAgICAgICBlcTQodXNlclJlc2lkZW5jZXMudXNlcklkLCB1c2VySWQpLFxuICAgICAgICBlcTQodXNlclJlc2lkZW5jZXMuaXNBY3RpdmUsIHRydWUpLFxuICAgICAgICBlcTQocmVzaWRlbmNlcy5pc0FjdGl2ZSwgdHJ1ZSlcbiAgICAgICkpO1xuICAgICAgaWYgKCF1c2VyUmVzaWRlbmNlczQgfHwgdXNlclJlc2lkZW5jZXM0Lmxlbmd0aCA9PT0gMCkge1xuICAgICAgICByZXR1cm4gcmVzLmpzb24oeyBidWlsZGluZ3M6IFtdIH0pO1xuICAgICAgfVxuICAgICAgY29uc3QgYnVpbGRpbmdJZHMgPSBbLi4ubmV3IFNldCh1c2VyUmVzaWRlbmNlczQubWFwKCh1cikgPT4gdXIuYnVpbGRpbmdJZCkuZmlsdGVyKEJvb2xlYW4pKV07XG4gICAgICBpZiAoYnVpbGRpbmdJZHMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgIHJldHVybiByZXMuanNvbih7IGJ1aWxkaW5nczogW10gfSk7XG4gICAgICB9XG4gICAgICBjb25zdCBidWlsZGluZ0RldGFpbHMgPSBhd2FpdCBkYi5zZWxlY3Qoe1xuICAgICAgICBpZDogYnVpbGRpbmdzLmlkLFxuICAgICAgICBuYW1lOiBidWlsZGluZ3MubmFtZSxcbiAgICAgICAgYWRkcmVzczogYnVpbGRpbmdzLmFkZHJlc3MsXG4gICAgICAgIGNpdHk6IGJ1aWxkaW5ncy5jaXR5LFxuICAgICAgICBwcm92aW5jZTogYnVpbGRpbmdzLnByb3ZpbmNlLFxuICAgICAgICBwb3N0YWxDb2RlOiBidWlsZGluZ3MucG9zdGFsQ29kZSxcbiAgICAgICAgYnVpbGRpbmdUeXBlOiBidWlsZGluZ3MuYnVpbGRpbmdUeXBlLFxuICAgICAgICB5ZWFyQnVpbHQ6IGJ1aWxkaW5ncy55ZWFyQnVpbHQsXG4gICAgICAgIHRvdGFsRmxvb3JzOiBidWlsZGluZ3MudG90YWxGbG9vcnMsXG4gICAgICAgIHBhcmtpbmdTcGFjZXM6IGJ1aWxkaW5ncy5wYXJraW5nU3BhY2VzLFxuICAgICAgICBzdG9yYWdlU3BhY2VzOiBidWlsZGluZ3Muc3RvcmFnZVNwYWNlcyxcbiAgICAgICAgbWFuYWdlbWVudENvbXBhbnk6IGJ1aWxkaW5ncy5tYW5hZ2VtZW50Q29tcGFueSxcbiAgICAgICAgYW1lbml0aWVzOiBidWlsZGluZ3MuYW1lbml0aWVzLFxuICAgICAgICBvcmdhbml6YXRpb25JZDogYnVpbGRpbmdzLm9yZ2FuaXphdGlvbklkLFxuICAgICAgICBvcmdhbml6YXRpb25OYW1lOiBvcmdhbml6YXRpb25zLm5hbWUsXG4gICAgICAgIG9yZ2FuaXphdGlvblR5cGU6IG9yZ2FuaXphdGlvbnMudHlwZVxuICAgICAgfSkuZnJvbShidWlsZGluZ3MpLmxlZnRKb2luKG9yZ2FuaXphdGlvbnMsIGVxNChidWlsZGluZ3Mub3JnYW5pemF0aW9uSWQsIG9yZ2FuaXphdGlvbnMuaWQpKS53aGVyZShhbmQ0KFxuICAgICAgICBpbkFycmF5MyhidWlsZGluZ3MuaWQsIGJ1aWxkaW5nSWRzKSxcbiAgICAgICAgZXE0KGJ1aWxkaW5ncy5pc0FjdGl2ZSwgdHJ1ZSlcbiAgICAgICkpO1xuICAgICAgY29uc3QgYnVpbGRpbmdzV2l0aFN0YXRzID0gYXdhaXQgUHJvbWlzZS5hbGwoXG4gICAgICAgIGJ1aWxkaW5nRGV0YWlscy5tYXAoYXN5bmMgKGJ1aWxkaW5nKSA9PiB7XG4gICAgICAgICAgY29uc3QgW3RvdGFsVW5pdHMsIG9jY3VwaWVkVW5pdHNdID0gYXdhaXQgUHJvbWlzZS5hbGwoW1xuICAgICAgICAgICAgZGIuc2VsZWN0KHsgY291bnQ6IHNxbDE0YGNvdW50KCopYCB9KS5mcm9tKHJlc2lkZW5jZXMpLndoZXJlKGFuZDQoZXE0KHJlc2lkZW5jZXMuYnVpbGRpbmdJZCwgYnVpbGRpbmcuaWQpLCBlcTQocmVzaWRlbmNlcy5pc0FjdGl2ZSwgdHJ1ZSkpKS50aGVuKChyZXN1bHQpID0+IHJlc3VsdFswXT8uY291bnQgfHwgMCksXG4gICAgICAgICAgICBkYi5zZWxlY3QoeyBjb3VudDogc3FsMTRgY291bnQoZGlzdGluY3QgJHtyZXNpZGVuY2VzLmlkfSlgIH0pLmZyb20ocmVzaWRlbmNlcykubGVmdEpvaW4odXNlclJlc2lkZW5jZXMsIGVxNCh1c2VyUmVzaWRlbmNlcy5yZXNpZGVuY2VJZCwgcmVzaWRlbmNlcy5pZCkpLndoZXJlKGFuZDQoXG4gICAgICAgICAgICAgIGVxNChyZXNpZGVuY2VzLmJ1aWxkaW5nSWQsIGJ1aWxkaW5nLmlkKSxcbiAgICAgICAgICAgICAgZXE0KHJlc2lkZW5jZXMuaXNBY3RpdmUsIHRydWUpLFxuICAgICAgICAgICAgICBlcTQodXNlclJlc2lkZW5jZXMuaXNBY3RpdmUsIHRydWUpXG4gICAgICAgICAgICApKS50aGVuKChyZXN1bHQpID0+IHJlc3VsdFswXT8uY291bnQgfHwgMClcbiAgICAgICAgICBdKTtcbiAgICAgICAgICBjb25zdCB2YWNhbnRVbml0cyA9IHRvdGFsVW5pdHMgLSBvY2N1cGllZFVuaXRzO1xuICAgICAgICAgIGNvbnN0IG9jY3VwYW5jeVJhdGUgPSB0b3RhbFVuaXRzID4gMCA/IG9jY3VwaWVkVW5pdHMgLyB0b3RhbFVuaXRzICogMTAwIDogMDtcbiAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgLi4uYnVpbGRpbmcsXG4gICAgICAgICAgICB0b3RhbFVuaXRzLFxuICAgICAgICAgICAgb2NjdXBpZWRVbml0cyxcbiAgICAgICAgICAgIHZhY2FudFVuaXRzLFxuICAgICAgICAgICAgb2NjdXBhbmN5UmF0ZVxuICAgICAgICAgIH07XG4gICAgICAgIH0pXG4gICAgICApO1xuICAgICAgcmVzLmpzb24oeyBidWlsZGluZ3M6IGJ1aWxkaW5nc1dpdGhTdGF0cyB9KTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcihcIlxcdTI3NEMgRXJyb3IgZ2V0dGluZyB1c2VyIGJ1aWxkaW5nczpcIiwgZXJyb3IpO1xuICAgICAgcmVzLnN0YXR1cyg1MDApLmpzb24oe1xuICAgICAgICBlcnJvcjogXCJJbnRlcm5hbCBzZXJ2ZXIgZXJyb3JcIixcbiAgICAgICAgbWVzc2FnZTogXCJGYWlsZWQgdG8gZ2V0IHVzZXIgYnVpbGRpbmdzXCJcbiAgICAgIH0pO1xuICAgIH1cbiAgfSk7XG4gIGFwcDIucHV0KFwiL2FwaS91c2Vycy86aWQvcmVzaWRlbmNlc1wiLCByZXF1aXJlQXV0aCwgYXN5bmMgKHJlcSwgcmVzKSA9PiB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IGN1cnJlbnRVc2VyID0gcmVxLnVzZXIgfHwgcmVxLnNlc3Npb24/LnVzZXI7XG4gICAgICBjb25zdCB7IGlkOiB1c2VySWQgfSA9IHJlcS5wYXJhbXM7XG4gICAgICBjb25zdCB7IHJlc2lkZW5jZUFzc2lnbm1lbnRzIH0gPSByZXEuYm9keTtcbiAgICAgIGlmICghY3VycmVudFVzZXIpIHtcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAxKS5qc29uKHtcbiAgICAgICAgICBtZXNzYWdlOiBcIkF1dGhlbnRpY2F0aW9uIHJlcXVpcmVkXCIsXG4gICAgICAgICAgY29kZTogXCJBVVRIX1JFUVVJUkVEXCJcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgICBpZiAoIVtcImFkbWluXCIsIFwibWFuYWdlclwiXS5pbmNsdWRlcyhjdXJyZW50VXNlci5yb2xlKSkge1xuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDMpLmpzb24oe1xuICAgICAgICAgIG1lc3NhZ2U6IFwiSW5zdWZmaWNpZW50IHBlcm1pc3Npb25zIHRvIG1vZGlmeSByZXNpZGVuY2UgYXNzaWdubWVudHNcIixcbiAgICAgICAgICBjb2RlOiBcIklOU1VGRklDSUVOVF9QRVJNSVNTSU9OU1wiXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgICAgaWYgKCF1c2VySWQgfHwgIUFycmF5LmlzQXJyYXkocmVzaWRlbmNlQXNzaWdubWVudHMpKSB7XG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7XG4gICAgICAgICAgbWVzc2FnZTogXCJVc2VyIElEIGFuZCByZXNpZGVuY2UgYXNzaWdubWVudHMgYXJyYXkgYXJlIHJlcXVpcmVkXCIsXG4gICAgICAgICAgY29kZTogXCJJTlZBTElEX1JFUVVFU1RcIlxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICAgIGNvbnN0IHVzZXIgPSBhd2FpdCBzdG9yYWdlLmdldFVzZXIodXNlcklkKTtcbiAgICAgIGlmICghdXNlcikge1xuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDQpLmpzb24oe1xuICAgICAgICAgIG1lc3NhZ2U6IFwiVXNlciBub3QgZm91bmRcIixcbiAgICAgICAgICBjb2RlOiBcIlVTRVJfTk9UX0ZPVU5EXCJcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgICBpZiAoY3VycmVudFVzZXIucm9sZSA9PT0gXCJtYW5hZ2VyXCIpIHtcbiAgICAgICAgZm9yIChjb25zdCBhc3NpZ25tZW50IG9mIHJlc2lkZW5jZUFzc2lnbm1lbnRzKSB7XG4gICAgICAgICAgY29uc3QgcmVzaWRlbmNlID0gYXdhaXQgZGIuc2VsZWN0KHsgYnVpbGRpbmdJZDogcmVzaWRlbmNlcy5idWlsZGluZ0lkIH0pLmZyb20ocmVzaWRlbmNlcykud2hlcmUoZXE0KHJlc2lkZW5jZXMuaWQsIGFzc2lnbm1lbnQucmVzaWRlbmNlSWQpKS5saW1pdCgxKTtcbiAgICAgICAgICBpZiAocmVzaWRlbmNlLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDA0KS5qc29uKHtcbiAgICAgICAgICAgICAgbWVzc2FnZTogYFJlc2lkZW5jZSAke2Fzc2lnbm1lbnQucmVzaWRlbmNlSWR9IG5vdCBmb3VuZGAsXG4gICAgICAgICAgICAgIGNvZGU6IFwiUkVTSURFTkNFX05PVF9GT1VORFwiXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9XG4gICAgICAgICAgY29uc3QgbWFuYWdlck9yZ3MgPSBhd2FpdCBkYi5zZWxlY3QoeyBvcmdhbml6YXRpb25JZDogdXNlck9yZ2FuaXphdGlvbnMub3JnYW5pemF0aW9uSWQgfSkuZnJvbSh1c2VyT3JnYW5pemF0aW9ucykud2hlcmUoXG4gICAgICAgICAgICBhbmQ0KFxuICAgICAgICAgICAgICBlcTQodXNlck9yZ2FuaXphdGlvbnMudXNlcklkLCBjdXJyZW50VXNlci5pZCksXG4gICAgICAgICAgICAgIGVxNCh1c2VyT3JnYW5pemF0aW9ucy5pc0FjdGl2ZSwgdHJ1ZSlcbiAgICAgICAgICAgIClcbiAgICAgICAgICApO1xuICAgICAgICAgIGNvbnN0IG9yZ0lkcyA9IG1hbmFnZXJPcmdzLm1hcCgob3JnKSA9PiBvcmcub3JnYW5pemF0aW9uSWQpO1xuICAgICAgICAgIGNvbnN0IGFjY2Vzc2libGVCdWlsZGluZ3MgPSBvcmdJZHMubGVuZ3RoID4gMCA/IGF3YWl0IGRiLnNlbGVjdCh7IGlkOiBidWlsZGluZ3MuaWQgfSkuZnJvbShidWlsZGluZ3MpLndoZXJlKFxuICAgICAgICAgICAgYW5kNChcbiAgICAgICAgICAgICAgaW5BcnJheTMoYnVpbGRpbmdzLm9yZ2FuaXphdGlvbklkLCBvcmdJZHMpLFxuICAgICAgICAgICAgICBlcTQoYnVpbGRpbmdzLmlzQWN0aXZlLCB0cnVlKVxuICAgICAgICAgICAgKVxuICAgICAgICAgICkgOiBbXTtcbiAgICAgICAgICBjb25zdCBoYXNBY2Nlc3MgPSBhY2Nlc3NpYmxlQnVpbGRpbmdzLnNvbWUoKGIpID0+IGIuaWQgPT09IHJlc2lkZW5jZVswXS5idWlsZGluZ0lkKTtcbiAgICAgICAgICBpZiAoIWhhc0FjY2Vzcykge1xuICAgICAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAzKS5qc29uKHtcbiAgICAgICAgICAgICAgbWVzc2FnZTogYEluc3VmZmljaWVudCBwZXJtaXNzaW9ucyBmb3IgcmVzaWRlbmNlICR7YXNzaWdubWVudC5yZXNpZGVuY2VJZH1gLFxuICAgICAgICAgICAgICBjb2RlOiBcIklOU1VGRklDSUVOVF9QRVJNSVNTSU9OU1wiXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGF3YWl0IGRiLmRlbGV0ZSh1c2VyUmVzaWRlbmNlcykud2hlcmUoZXE0KHVzZXJSZXNpZGVuY2VzLnVzZXJJZCwgdXNlcklkKSk7XG4gICAgICBpZiAocmVzaWRlbmNlQXNzaWdubWVudHMubGVuZ3RoID4gMCkge1xuICAgICAgICBjb25zdCBuZXdBc3NpZ25tZW50cyA9IHJlc2lkZW5jZUFzc2lnbm1lbnRzLm1hcCgoYXNzaWdubWVudCkgPT4gKHtcbiAgICAgICAgICB1c2VySWQsXG4gICAgICAgICAgcmVzaWRlbmNlSWQ6IGFzc2lnbm1lbnQucmVzaWRlbmNlSWQsXG4gICAgICAgICAgcmVsYXRpb25zaGlwVHlwZTogYXNzaWdubWVudC5yZWxhdGlvbnNoaXBUeXBlIHx8IFwidGVuYW50XCIsXG4gICAgICAgICAgc3RhcnREYXRlOiBhc3NpZ25tZW50LnN0YXJ0RGF0ZSB8fCAoLyogQF9fUFVSRV9fICovIG5ldyBEYXRlKCkpLnRvSVNPU3RyaW5nKCkuc3BsaXQoXCJUXCIpWzBdLFxuICAgICAgICAgIGVuZERhdGU6IGFzc2lnbm1lbnQuZW5kRGF0ZSB8fCBudWxsLFxuICAgICAgICAgIGlzQWN0aXZlOiB0cnVlXG4gICAgICAgIH0pKTtcbiAgICAgICAgYXdhaXQgZGIuaW5zZXJ0KHVzZXJSZXNpZGVuY2VzKS52YWx1ZXMobmV3QXNzaWdubWVudHMpO1xuICAgICAgfVxuICAgICAgcmVzLmpzb24oe1xuICAgICAgICBtZXNzYWdlOiBcIlJlc2lkZW5jZSBhc3NpZ25tZW50cyB1cGRhdGVkIHN1Y2Nlc3NmdWxseVwiLFxuICAgICAgICB1c2VySWQsXG4gICAgICAgIGFzc2lnbm1lbnRDb3VudDogcmVzaWRlbmNlQXNzaWdubWVudHMubGVuZ3RoXG4gICAgICB9KTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcihcIlxcdTI3NEMgRXJyb3IgdXBkYXRpbmcgcmVzaWRlbmNlIGFzc2lnbm1lbnRzOlwiLCBlcnJvcik7XG4gICAgICByZXMuc3RhdHVzKDUwMCkuanNvbih7XG4gICAgICAgIGVycm9yOiBcIkludGVybmFsIHNlcnZlciBlcnJvclwiLFxuICAgICAgICBtZXNzYWdlOiBcIkZhaWxlZCB0byB1cGRhdGUgcmVzaWRlbmNlIGFzc2lnbm1lbnRzXCJcbiAgICAgIH0pO1xuICAgIH1cbiAgfSk7XG4gIGFwcDIuZ2V0KFwiL2FwaS91c2Vycy9tZS9vcmdhbml6YXRpb25zXCIsIHJlcXVpcmVBdXRoLCBhc3luYyAocmVxLCByZXMpID0+IHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgY3VycmVudFVzZXIgPSByZXEudXNlciB8fCByZXEuc2Vzc2lvbj8udXNlcjtcbiAgICAgIGlmICghY3VycmVudFVzZXIpIHtcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAxKS5qc29uKHtcbiAgICAgICAgICBtZXNzYWdlOiBcIkF1dGhlbnRpY2F0aW9uIHJlcXVpcmVkXCIsXG4gICAgICAgICAgY29kZTogXCJBVVRIX1JFUVVJUkVEXCJcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgICBjb25zb2xlLmxvZyhgXFx1ezFGNENBfSBGZXRjaGluZyB1c2VyLWFjY2Vzc2libGUgb3JnYW5pemF0aW9ucyBmb3IgJHtjdXJyZW50VXNlci5lbWFpbH0gKCR7Y3VycmVudFVzZXIucm9sZX0pYCk7XG4gICAgICBsZXQgb3JnYW5pemF0aW9uc1F1ZXJ5O1xuICAgICAgaWYgKGN1cnJlbnRVc2VyLnJvbGUgPT09IFwiYWRtaW5cIikge1xuICAgICAgICBvcmdhbml6YXRpb25zUXVlcnkgPSBkYi5zZWxlY3Qoe1xuICAgICAgICAgIGlkOiBvcmdhbml6YXRpb25zLmlkLFxuICAgICAgICAgIG5hbWU6IG9yZ2FuaXphdGlvbnMubmFtZSxcbiAgICAgICAgICB0eXBlOiBvcmdhbml6YXRpb25zLnR5cGUsXG4gICAgICAgICAgYWRkcmVzczogb3JnYW5pemF0aW9ucy5hZGRyZXNzLFxuICAgICAgICAgIGNpdHk6IG9yZ2FuaXphdGlvbnMuY2l0eSxcbiAgICAgICAgICBwcm92aW5jZTogb3JnYW5pemF0aW9ucy5wcm92aW5jZSxcbiAgICAgICAgICBwb3N0YWxDb2RlOiBvcmdhbml6YXRpb25zLnBvc3RhbENvZGUsXG4gICAgICAgICAgcGhvbmU6IG9yZ2FuaXphdGlvbnMucGhvbmUsXG4gICAgICAgICAgZW1haWw6IG9yZ2FuaXphdGlvbnMuZW1haWwsXG4gICAgICAgICAgd2Vic2l0ZTogb3JnYW5pemF0aW9ucy53ZWJzaXRlLFxuICAgICAgICAgIHJlZ2lzdHJhdGlvbk51bWJlcjogb3JnYW5pemF0aW9ucy5yZWdpc3RyYXRpb25OdW1iZXIsXG4gICAgICAgICAgaXNBY3RpdmU6IG9yZ2FuaXphdGlvbnMuaXNBY3RpdmUsXG4gICAgICAgICAgY3JlYXRlZEF0OiBvcmdhbml6YXRpb25zLmNyZWF0ZWRBdFxuICAgICAgICB9KS5mcm9tKG9yZ2FuaXphdGlvbnMpLndoZXJlKGVxNChvcmdhbml6YXRpb25zLmlzQWN0aXZlLCB0cnVlKSkub3JkZXJCeShvcmdhbml6YXRpb25zLm5hbWUpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgb3JnYW5pemF0aW9uc1F1ZXJ5ID0gZGIuc2VsZWN0KHtcbiAgICAgICAgICBpZDogb3JnYW5pemF0aW9ucy5pZCxcbiAgICAgICAgICBuYW1lOiBvcmdhbml6YXRpb25zLm5hbWUsXG4gICAgICAgICAgdHlwZTogb3JnYW5pemF0aW9ucy50eXBlLFxuICAgICAgICAgIGFkZHJlc3M6IG9yZ2FuaXphdGlvbnMuYWRkcmVzcyxcbiAgICAgICAgICBjaXR5OiBvcmdhbml6YXRpb25zLmNpdHksXG4gICAgICAgICAgcHJvdmluY2U6IG9yZ2FuaXphdGlvbnMucHJvdmluY2UsXG4gICAgICAgICAgcG9zdGFsQ29kZTogb3JnYW5pemF0aW9ucy5wb3N0YWxDb2RlLFxuICAgICAgICAgIHBob25lOiBvcmdhbml6YXRpb25zLnBob25lLFxuICAgICAgICAgIGVtYWlsOiBvcmdhbml6YXRpb25zLmVtYWlsLFxuICAgICAgICAgIHdlYnNpdGU6IG9yZ2FuaXphdGlvbnMud2Vic2l0ZSxcbiAgICAgICAgICByZWdpc3RyYXRpb25OdW1iZXI6IG9yZ2FuaXphdGlvbnMucmVnaXN0cmF0aW9uTnVtYmVyLFxuICAgICAgICAgIGlzQWN0aXZlOiBvcmdhbml6YXRpb25zLmlzQWN0aXZlLFxuICAgICAgICAgIGNyZWF0ZWRBdDogb3JnYW5pemF0aW9ucy5jcmVhdGVkQXRcbiAgICAgICAgfSkuZnJvbShvcmdhbml6YXRpb25zKS5pbm5lckpvaW4odXNlck9yZ2FuaXphdGlvbnMsIGVxNChvcmdhbml6YXRpb25zLmlkLCB1c2VyT3JnYW5pemF0aW9ucy5vcmdhbml6YXRpb25JZCkpLndoZXJlKFxuICAgICAgICAgIGFuZDQoXG4gICAgICAgICAgICBlcTQob3JnYW5pemF0aW9ucy5pc0FjdGl2ZSwgdHJ1ZSksXG4gICAgICAgICAgICBlcTQodXNlck9yZ2FuaXphdGlvbnMudXNlcklkLCBjdXJyZW50VXNlci5pZCksXG4gICAgICAgICAgICBlcTQodXNlck9yZ2FuaXphdGlvbnMuaXNBY3RpdmUsIHRydWUpXG4gICAgICAgICAgKVxuICAgICAgICApLm9yZGVyQnkob3JnYW5pemF0aW9ucy5uYW1lKTtcbiAgICAgIH1cbiAgICAgIGNvbnN0IGFjY2Vzc2libGVPcmdhbml6YXRpb25zID0gYXdhaXQgb3JnYW5pemF0aW9uc1F1ZXJ5O1xuICAgICAgY29uc29sZS5sb2coYFxcdTI3MDUgRm91bmQgJHthY2Nlc3NpYmxlT3JnYW5pemF0aW9ucy5sZW5ndGh9IG9yZ2FuaXphdGlvbnMgZm9yIHVzZXIgJHtjdXJyZW50VXNlci5pZH1gKTtcbiAgICAgIHJlcy5qc29uKGFjY2Vzc2libGVPcmdhbml6YXRpb25zKTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcihcIlxcdTI3NEMgRXJyb3IgZmV0Y2hpbmcgdXNlciBvcmdhbml6YXRpb25zOlwiLCBlcnJvcik7XG4gICAgICByZXMuc3RhdHVzKDUwMCkuanNvbih7XG4gICAgICAgIGVycm9yOiBcIkludGVybmFsIHNlcnZlciBlcnJvclwiLFxuICAgICAgICBtZXNzYWdlOiBcIkZhaWxlZCB0byBmZXRjaCB1c2VyIG9yZ2FuaXphdGlvbnNcIlxuICAgICAgfSk7XG4gICAgfVxuICB9KTtcbiAgYXBwMi5nZXQoXCIvYXBpL3VzZXJzL21lL2RhdGEtZXhwb3J0XCIsIHJlcXVpcmVBdXRoLCBhc3luYyAocmVxLCByZXMpID0+IHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgY3VycmVudFVzZXIgPSByZXEudXNlciB8fCByZXEuc2Vzc2lvbj8udXNlcjtcbiAgICAgIGlmICghY3VycmVudFVzZXIpIHtcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAxKS5qc29uKHtcbiAgICAgICAgICBtZXNzYWdlOiBcIkF1dGhlbnRpY2F0aW9uIHJlcXVpcmVkXCIsXG4gICAgICAgICAgY29kZTogXCJBVVRIX1JFUVVJUkVEXCJcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgICBjb25zdCB1c2VyRGF0YSA9IGF3YWl0IHN0b3JhZ2UuZ2V0VXNlcihjdXJyZW50VXNlci5pZCk7XG4gICAgICBpZiAoIXVzZXJEYXRhKSB7XG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwNCkuanNvbih7XG4gICAgICAgICAgbWVzc2FnZTogXCJVc2VyIG5vdCBmb3VuZFwiLFxuICAgICAgICAgIGNvZGU6IFwiVVNFUl9OT1RfRk9VTkRcIlxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICAgIGNvbnN0IHsgcGFzc3dvcmQsIC4uLnVzZXJEYXRhRXhwb3J0IH0gPSB1c2VyRGF0YTtcbiAgICAgIGNvbnN0IFtvcmdhbml6YXRpb25zMywgcmVzaWRlbmNlczIsIGJpbGxzMywgZG9jdW1lbnRzMiwgbm90aWZpY2F0aW9uczIsIG1haW50ZW5hbmNlUmVxdWVzdHMyXSA9IGF3YWl0IFByb21pc2UuYWxsKFtcbiAgICAgICAgZGIuc2VsZWN0KCkuZnJvbSh1c2VyT3JnYW5pemF0aW9ucykud2hlcmUoZXE0KHVzZXJPcmdhbml6YXRpb25zLnVzZXJJZCwgY3VycmVudFVzZXIuaWQpKSxcbiAgICAgICAgZGIuc2VsZWN0KCkuZnJvbSh1c2VyUmVzaWRlbmNlcykud2hlcmUoZXE0KHVzZXJSZXNpZGVuY2VzLnVzZXJJZCwgY3VycmVudFVzZXIuaWQpKSxcbiAgICAgICAgZGIuc2VsZWN0KCkuZnJvbShiaWxscykuaW5uZXJKb2luKFxuICAgICAgICAgIHVzZXJSZXNpZGVuY2VzLFxuICAgICAgICAgIGVxNChiaWxscy5yZXNpZGVuY2VJZCwgdXNlclJlc2lkZW5jZXMucmVzaWRlbmNlSWQpXG4gICAgICAgICkud2hlcmUoZXE0KHVzZXJSZXNpZGVuY2VzLnVzZXJJZCwgY3VycmVudFVzZXIuaWQpKSxcbiAgICAgICAgZGIuc2VsZWN0KCkuZnJvbShkb2N1bWVudHMpLndoZXJlKGVxNChkb2N1bWVudHMudXBsb2FkZWRCeUlkLCBjdXJyZW50VXNlci5pZCkpLFxuICAgICAgICBkYi5zZWxlY3QoKS5mcm9tKG5vdGlmaWNhdGlvbnMpLndoZXJlKGVxNChub3RpZmljYXRpb25zLnVzZXJJZCwgY3VycmVudFVzZXIuaWQpKSxcbiAgICAgICAgZGIuc2VsZWN0KCkuZnJvbShtYWludGVuYW5jZVJlcXVlc3RzKS53aGVyZShlcTQobWFpbnRlbmFuY2VSZXF1ZXN0cy5zdWJtaXR0ZWRCeSwgY3VycmVudFVzZXIuaWQpKVxuICAgICAgXSk7XG4gICAgICBjb25zdCBleHBvcnREYXRhID0ge1xuICAgICAgICBwZXJzb25hbEluZm9ybWF0aW9uOiB1c2VyRGF0YUV4cG9ydCxcbiAgICAgICAgb3JnYW5pemF0aW9uczogb3JnYW5pemF0aW9uczMsXG4gICAgICAgIHJlc2lkZW5jZXM6IHJlc2lkZW5jZXMyLFxuICAgICAgICBiaWxsczogYmlsbHMzLm1hcCgoYikgPT4gYi5iaWxscyksXG4gICAgICAgIGRvY3VtZW50czogZG9jdW1lbnRzMixcbiAgICAgICAgbm90aWZpY2F0aW9uczogbm90aWZpY2F0aW9uczIsXG4gICAgICAgIG1haW50ZW5hbmNlUmVxdWVzdHM6IG1haW50ZW5hbmNlUmVxdWVzdHMyLFxuICAgICAgICBleHBvcnREYXRlOiAoLyogQF9fUFVSRV9fICovIG5ldyBEYXRlKCkpLnRvSVNPU3RyaW5nKCksXG4gICAgICAgIG5vdGU6IFwiVGhpcyBleHBvcnQgY29udGFpbnMgYWxsIHBlcnNvbmFsIGRhdGEgd2UgaGF2ZSBvbiBmaWxlIGZvciB5b3UgaW4gY29tcGxpYW5jZSB3aXRoIFF1ZWJlYyBMYXcgMjUuXCJcbiAgICAgIH07XG4gICAgICByZXMuc2V0SGVhZGVyKFwiQ29udGVudC1UeXBlXCIsIFwiYXBwbGljYXRpb24vanNvblwiKTtcbiAgICAgIHJlcy5zZXRIZWFkZXIoXG4gICAgICAgIFwiQ29udGVudC1EaXNwb3NpdGlvblwiLFxuICAgICAgICBgYXR0YWNobWVudDsgZmlsZW5hbWU9XCJ1c2VyLWRhdGEtZXhwb3J0LSR7Y3VycmVudFVzZXIuaWR9LSR7KC8qIEBfX1BVUkVfXyAqLyBuZXcgRGF0ZSgpKS50b0lTT1N0cmluZygpLnNwbGl0KFwiVFwiKVswXX0uanNvblwiYFxuICAgICAgKTtcbiAgICAgIHJlcy5qc29uKGV4cG9ydERhdGEpO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKFwiXFx1Mjc0QyBFcnJvciBleHBvcnRpbmcgdXNlciBkYXRhOlwiLCBlcnJvcik7XG4gICAgICByZXMuc3RhdHVzKDUwMCkuanNvbih7XG4gICAgICAgIGVycm9yOiBcIkludGVybmFsIHNlcnZlciBlcnJvclwiLFxuICAgICAgICBtZXNzYWdlOiBcIkZhaWxlZCB0byBleHBvcnQgdXNlciBkYXRhXCJcbiAgICAgIH0pO1xuICAgIH1cbiAgfSk7XG4gIGFwcDIucG9zdChcIi9hcGkvdXNlcnMvbWUvZGVsZXRlLWFjY291bnRcIiwgcmVxdWlyZUF1dGgsIGFzeW5jIChyZXEsIHJlcykgPT4ge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCBjdXJyZW50VXNlciA9IHJlcS51c2VyIHx8IHJlcS5zZXNzaW9uPy51c2VyO1xuICAgICAgaWYgKCFjdXJyZW50VXNlcikge1xuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDEpLmpzb24oe1xuICAgICAgICAgIG1lc3NhZ2U6IFwiQXV0aGVudGljYXRpb24gcmVxdWlyZWRcIixcbiAgICAgICAgICBjb2RlOiBcIkFVVEhfUkVRVUlSRURcIlxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICAgIGNvbnN0IHsgY29uZmlybUVtYWlsLCByZWFzb24gfSA9IHJlcS5ib2R5O1xuICAgICAgaWYgKGNvbmZpcm1FbWFpbCAhPT0gY3VycmVudFVzZXIuZW1haWwpIHtcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHtcbiAgICAgICAgICBtZXNzYWdlOiBcIkVtYWlsIGNvbmZpcm1hdGlvbiBkb2VzIG5vdCBtYXRjaFwiLFxuICAgICAgICAgIGNvZGU6IFwiRU1BSUxfTUlTTUFUQ0hcIlxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICAgIGF3YWl0IFByb21pc2UuYWxsKFtcbiAgICAgICAgLy8gRGVsZXRlIHVzZXIgcmVsYXRpb25zaGlwc1xuICAgICAgICBkYi5kZWxldGUodXNlck9yZ2FuaXphdGlvbnMpLndoZXJlKGVxNCh1c2VyT3JnYW5pemF0aW9ucy51c2VySWQsIGN1cnJlbnRVc2VyLmlkKSksXG4gICAgICAgIGRiLmRlbGV0ZSh1c2VyUmVzaWRlbmNlcykud2hlcmUoZXE0KHVzZXJSZXNpZGVuY2VzLnVzZXJJZCwgY3VycmVudFVzZXIuaWQpKSxcbiAgICAgICAgZGIuZGVsZXRlKGRvY3VtZW50cykud2hlcmUoZXE0KGRvY3VtZW50cy51cGxvYWRlZEJ5SWQsIGN1cnJlbnRVc2VyLmlkKSksXG4gICAgICAgIC8vIERlbGV0ZSB1c2VyLWNyZWF0ZWQgY29udGVudFxuICAgICAgICBkYi5kZWxldGUobm90aWZpY2F0aW9ucykud2hlcmUoZXE0KG5vdGlmaWNhdGlvbnMudXNlcklkLCBjdXJyZW50VXNlci5pZCkpLFxuICAgICAgICBkYi5kZWxldGUobWFpbnRlbmFuY2VSZXF1ZXN0cykud2hlcmUoZXE0KG1haW50ZW5hbmNlUmVxdWVzdHMuc3VibWl0dGVkQnksIGN1cnJlbnRVc2VyLmlkKSksXG4gICAgICAgIC8vIERlbGV0ZSBpbnZpdGF0aW9uc1xuICAgICAgICBkYi5kZWxldGUoaW52aXRhdGlvbnMpLndoZXJlKGVxNChpbnZpdGF0aW9ucy5lbWFpbCwgY3VycmVudFVzZXIuZW1haWwpKVxuICAgICAgXSk7XG4gICAgICBhd2FpdCBkYi5kZWxldGUodXNlcnMpLndoZXJlKGVxNCh1c2Vycy5pZCwgY3VycmVudFVzZXIuaWQpKTtcbiAgICAgIGNvbnNvbGUubG9nKFxuICAgICAgICBgVXNlciBhY2NvdW50IGRlbGV0ZWQ6ICR7Y3VycmVudFVzZXIuZW1haWx9ICgke2N1cnJlbnRVc2VyLmlkfSkuIFJlYXNvbjogJHtyZWFzb24gfHwgXCJOb3QgcHJvdmlkZWRcIn1gXG4gICAgICApO1xuICAgICAgaWYgKHJlcS5zZXNzaW9uKSB7XG4gICAgICAgIHJlcS5zZXNzaW9uLmRlc3Ryb3koKGVycikgPT4ge1xuICAgICAgICAgIGlmIChlcnIpIHtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXCJGYWlsZWQgdG8gZGVzdHJveSBzZXNzaW9uIGFmdGVyIGFjY291bnQgZGVsZXRpb246XCIsIGVycik7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICAgIHJlcy5qc29uKHtcbiAgICAgICAgbWVzc2FnZTogXCJBY2NvdW50IHN1Y2Nlc3NmdWxseSBkZWxldGVkLiBBbGwgcGVyc29uYWwgZGF0YSBoYXMgYmVlbiBwZXJtYW5lbnRseSByZW1vdmVkIGZyb20gb3VyIHN5c3RlbXMuXCIsXG4gICAgICAgIGRlbGV0aW9uRGF0ZTogKC8qIEBfX1BVUkVfXyAqLyBuZXcgRGF0ZSgpKS50b0lTT1N0cmluZygpXG4gICAgICB9KTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcihcIlxcdTI3NEMgRXJyb3IgZGVsZXRpbmcgYWNjb3VudDpcIiwgZXJyb3IpO1xuICAgICAgcmVzLnN0YXR1cyg1MDApLmpzb24oe1xuICAgICAgICBlcnJvcjogXCJJbnRlcm5hbCBzZXJ2ZXIgZXJyb3JcIixcbiAgICAgICAgbWVzc2FnZTogXCJGYWlsZWQgdG8gZGVsZXRlIGFjY291bnQuIFBsZWFzZSBjb250YWN0IHN1cHBvcnQuXCJcbiAgICAgIH0pO1xuICAgIH1cbiAgfSk7XG4gIGFwcDIucHV0KFwiL2FwaS91c2Vycy9tZVwiLCByZXF1aXJlQXV0aCwgYXN5bmMgKHJlcSwgcmVzKSA9PiB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IGN1cnJlbnRVc2VyID0gcmVxLnVzZXIgfHwgcmVxLnNlc3Npb24/LnVzZXI7XG4gICAgICBpZiAoIWN1cnJlbnRVc2VyKSB7XG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMSkuanNvbih7XG4gICAgICAgICAgbWVzc2FnZTogXCJBdXRoZW50aWNhdGlvbiByZXF1aXJlZFwiLFxuICAgICAgICAgIGNvZGU6IFwiQVVUSF9SRVFVSVJFRFwiXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgICAgY29uc3QgdXBkYXRlU2NoZW1hID0gaW5zZXJ0VXNlclNjaGVtYS5wYXJ0aWFsKCkub21pdCh7IHBhc3N3b3JkOiB0cnVlLCBpZDogdHJ1ZSwgcm9sZTogdHJ1ZSB9KTtcbiAgICAgIGNvbnN0IHZhbGlkYXRlZERhdGEgPSB1cGRhdGVTY2hlbWEucGFyc2UocmVxLmJvZHkpO1xuICAgICAgY29uc3QgdXNlciA9IGF3YWl0IHN0b3JhZ2UudXBkYXRlVXNlcihjdXJyZW50VXNlci5pZCwge1xuICAgICAgICAuLi52YWxpZGF0ZWREYXRhLFxuICAgICAgICB1cGRhdGVkQXQ6IC8qIEBfX1BVUkVfXyAqLyBuZXcgRGF0ZSgpXG4gICAgICB9KTtcbiAgICAgIGlmICghdXNlcikge1xuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDQpLmpzb24oe1xuICAgICAgICAgIG1lc3NhZ2U6IFwiVXNlciBub3QgZm91bmRcIixcbiAgICAgICAgICBjb2RlOiBcIlVTRVJfTk9UX0ZPVU5EXCJcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgICBjb25zdCB7IHBhc3N3b3JkLCAuLi51c2VyV2l0aG91dFBhc3N3b3JkIH0gPSB1c2VyO1xuICAgICAgcmVzLmpzb24odXNlcldpdGhvdXRQYXNzd29yZCk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoXCJcXHUyNzRDIEVycm9yIHVwZGF0aW5nIHVzZXIgcHJvZmlsZTpcIiwgZXJyb3IpO1xuICAgICAgcmVzLnN0YXR1cyg1MDApLmpzb24oe1xuICAgICAgICBlcnJvcjogXCJJbnRlcm5hbCBzZXJ2ZXIgZXJyb3JcIixcbiAgICAgICAgbWVzc2FnZTogXCJGYWlsZWQgdG8gdXBkYXRlIHByb2ZpbGVcIlxuICAgICAgfSk7XG4gICAgfVxuICB9KTtcbiAgYXBwMi5wb3N0KFwiL2FwaS91c2Vycy86aWQvZGVsZXRlLWFjY291bnRcIiwgcmVxdWlyZUF1dGgsIGFzeW5jIChyZXEsIHJlcykgPT4ge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCBjdXJyZW50VXNlciA9IHJlcS51c2VyIHx8IHJlcS5zZXNzaW9uPy51c2VyO1xuICAgICAgY29uc3QgeyBpZDogdGFyZ2V0VXNlcklkIH0gPSByZXEucGFyYW1zO1xuICAgICAgaWYgKCFjdXJyZW50VXNlcikge1xuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDEpLmpzb24oe1xuICAgICAgICAgIG1lc3NhZ2U6IFwiQXV0aGVudGljYXRpb24gcmVxdWlyZWRcIixcbiAgICAgICAgICBjb2RlOiBcIkFVVEhfUkVRVUlSRURcIlxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICAgIGlmIChjdXJyZW50VXNlci5yb2xlICE9PSBcImFkbWluXCIpIHtcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAzKS5qc29uKHtcbiAgICAgICAgICBtZXNzYWdlOiBcIk9ubHkgYWRtaW5pc3RyYXRvcnMgY2FuIGRlbGV0ZSB1c2VyIGFjY291bnRzXCIsXG4gICAgICAgICAgY29kZTogXCJJTlNVRkZJQ0lFTlRfUEVSTUlTU0lPTlNcIlxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICAgIGNvbnNvbGUud2FybihgXFx1MjZBMFxcdUZFMEYgIENSSVRJQ0FMOiBBZG1pbiAke2N1cnJlbnRVc2VyLmVtYWlsfSBhdHRlbXB0aW5nIHRvIGRlbGV0ZSB1c2VyICR7dGFyZ2V0VXNlcklkfWApO1xuICAgICAgaWYgKCF0YXJnZXRVc2VySWQpIHtcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHtcbiAgICAgICAgICBtZXNzYWdlOiBcIlVzZXIgSUQgaXMgcmVxdWlyZWRcIixcbiAgICAgICAgICBjb2RlOiBcIklOVkFMSURfUkVRVUVTVFwiXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgICAgY29uc3QgdGFyZ2V0VXNlciA9IGF3YWl0IHN0b3JhZ2UuZ2V0VXNlcih0YXJnZXRVc2VySWQpO1xuICAgICAgaWYgKCF0YXJnZXRVc2VyKSB7XG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwNCkuanNvbih7XG4gICAgICAgICAgbWVzc2FnZTogXCJVc2VyIG5vdCBmb3VuZFwiLFxuICAgICAgICAgIGNvZGU6IFwiVVNFUl9OT1RfRk9VTkRcIlxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICAgIGNvbnN0IHsgY29uZmlybUVtYWlsLCByZWFzb24gfSA9IHJlcS5ib2R5O1xuICAgICAgaWYgKGNvbmZpcm1FbWFpbCAhPT0gdGFyZ2V0VXNlci5lbWFpbCkge1xuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oe1xuICAgICAgICAgIG1lc3NhZ2U6IFwiRW1haWwgY29uZmlybWF0aW9uIGRvZXMgbm90IG1hdGNoXCIsXG4gICAgICAgICAgY29kZTogXCJFTUFJTF9NSVNNQVRDSFwiXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgICAgY29uc3QgZGVsZXRpb25Qcm9taXNlcyA9IFtcbiAgICAgICAgLy8gRGVsZXRlIHVzZXIgcmVsYXRpb25zaGlwc1xuICAgICAgICBkYi5kZWxldGUodXNlck9yZ2FuaXphdGlvbnMpLndoZXJlKGVxNCh1c2VyT3JnYW5pemF0aW9ucy51c2VySWQsIHRhcmdldFVzZXJJZCkpLFxuICAgICAgICBkYi5kZWxldGUodXNlclJlc2lkZW5jZXMpLndoZXJlKGVxNCh1c2VyUmVzaWRlbmNlcy51c2VySWQsIHRhcmdldFVzZXJJZCkpLFxuICAgICAgICBkYi5kZWxldGUoZG9jdW1lbnRzKS53aGVyZShlcTQoZG9jdW1lbnRzLnVwbG9hZGVkQnlJZCwgdGFyZ2V0VXNlcklkKSksXG4gICAgICAgIC8vIERlbGV0ZSBpbnZpdGF0aW9uc1xuICAgICAgICBkYi5kZWxldGUoaW52aXRhdGlvbnMpLndoZXJlKGVxNChpbnZpdGF0aW9ucy5lbWFpbCwgdGFyZ2V0VXNlci5lbWFpbCkpXG4gICAgICBdO1xuICAgICAgY29uc3Qgb3B0aW9uYWxEZWxldGlvbnMgPSBbXG4gICAgICAgIGFzeW5jICgpID0+IHtcbiAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgYXdhaXQgZGIuZGVsZXRlKG5vdGlmaWNhdGlvbnMpLndoZXJlKGVxNChub3RpZmljYXRpb25zLnVzZXJJZCwgdGFyZ2V0VXNlcklkKSk7XG4gICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIGlmIChlcnJvci5jYXVzZT8uY29kZSA9PT0gXCI0MlAwMVwiKSB7XG4gICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiTm90aWZpY2F0aW9ucyB0YWJsZSBub3QgZm91bmQsIHNraXBwaW5nLi4uXCIpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgdGhyb3cgZXJyb3I7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICBhc3luYyAoKSA9PiB7XG4gICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGF3YWl0IGRiLmRlbGV0ZShtYWludGVuYW5jZVJlcXVlc3RzKS53aGVyZShlcTQobWFpbnRlbmFuY2VSZXF1ZXN0cy5zdWJtaXR0ZWRCeSwgdGFyZ2V0VXNlcklkKSk7XG4gICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIGlmIChlcnJvci5jYXVzZT8uY29kZSA9PT0gXCI0MlAwMVwiKSB7XG4gICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiTWFpbnRlbmFuY2UgcmVxdWVzdHMgdGFibGUgbm90IGZvdW5kLCBza2lwcGluZy4uLlwiKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIHRocm93IGVycm9yO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgXTtcbiAgICAgIGF3YWl0IFByb21pc2UuYWxsKGRlbGV0aW9uUHJvbWlzZXMpO1xuICAgICAgYXdhaXQgUHJvbWlzZS5hbGwob3B0aW9uYWxEZWxldGlvbnMubWFwKChmbikgPT4gZm4oKSkpO1xuICAgICAgYXdhaXQgZGIuZGVsZXRlKHVzZXJzKS53aGVyZShlcTQodXNlcnMuaWQsIHRhcmdldFVzZXJJZCkpO1xuICAgICAgcXVlcnlDYWNoZS5pbnZhbGlkYXRlKFwidXNlcnNcIiwgXCJhbGxfdXNlcnNcIik7XG4gICAgICBxdWVyeUNhY2hlLmludmFsaWRhdGUoXCJ1c2Vyc1wiLCBgdXNlcjoke3RhcmdldFVzZXJJZH1gKTtcbiAgICAgIHF1ZXJ5Q2FjaGUuaW52YWxpZGF0ZShcInVzZXJzXCIsIGB1c2VyX2VtYWlsOiR7dGFyZ2V0VXNlci5lbWFpbH1gKTtcbiAgICAgIGNvbnNvbGUubG9nKFxuICAgICAgICBgVXNlciBhY2NvdW50IGRlbGV0ZWQgYnkgYWRtaW4gJHtjdXJyZW50VXNlci5lbWFpbH0gKCR7Y3VycmVudFVzZXIuaWR9KTogJHt0YXJnZXRVc2VyLmVtYWlsfSAoJHt0YXJnZXRVc2VySWR9KS4gUmVhc29uOiAke3JlYXNvbiB8fCBcIk5vdCBwcm92aWRlZFwifWBcbiAgICAgICk7XG4gICAgICByZXMuanNvbih7XG4gICAgICAgIG1lc3NhZ2U6IFwiVXNlciBhY2NvdW50IGFuZCBhbGwgYXNzb2NpYXRlZCBkYXRhIGhhdmUgYmVlbiBwZXJtYW5lbnRseSBkZWxldGVkXCIsXG4gICAgICAgIGRlbGV0ZWRVc2VySWQ6IHRhcmdldFVzZXJJZCxcbiAgICAgICAgZGVsZXRlZFVzZXJFbWFpbDogdGFyZ2V0VXNlci5lbWFpbFxuICAgICAgfSk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoXCJcXHUyNzRDIEVycm9yIGRlbGV0aW5nIHVzZXIgYWNjb3VudDpcIiwgZXJyb3IpO1xuICAgICAgcmVzLnN0YXR1cyg1MDApLmpzb24oe1xuICAgICAgICBlcnJvcjogXCJJbnRlcm5hbCBzZXJ2ZXIgZXJyb3JcIixcbiAgICAgICAgbWVzc2FnZTogXCJGYWlsZWQgdG8gZGVsZXRlIHVzZXIgYWNjb3VudFwiXG4gICAgICB9KTtcbiAgICB9XG4gIH0pO1xuICBhcHAyLnBvc3QoXCIvYXBpL3VzZXJzL21lL2NoYW5nZS1wYXNzd29yZFwiLCByZXF1aXJlQXV0aCwgYXN5bmMgKHJlcSwgcmVzKSA9PiB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IGN1cnJlbnRVc2VyID0gcmVxLnVzZXIgfHwgcmVxLnNlc3Npb24/LnVzZXI7XG4gICAgICBpZiAoIWN1cnJlbnRVc2VyKSB7XG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMSkuanNvbih7XG4gICAgICAgICAgbWVzc2FnZTogXCJBdXRoZW50aWNhdGlvbiByZXF1aXJlZFwiLFxuICAgICAgICAgIGNvZGU6IFwiQVVUSF9SRVFVSVJFRFwiXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgICAgY29uc3QgeyBjdXJyZW50UGFzc3dvcmQsIG5ld1Bhc3N3b3JkIH0gPSByZXEuYm9keTtcbiAgICAgIGlmICghY3VycmVudFBhc3N3b3JkIHx8ICFuZXdQYXNzd29yZCkge1xuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oe1xuICAgICAgICAgIG1lc3NhZ2U6IFwiQ3VycmVudCBwYXNzd29yZCBhbmQgbmV3IHBhc3N3b3JkIGFyZSByZXF1aXJlZFwiLFxuICAgICAgICAgIGNvZGU6IFwiSU5WQUxJRF9JTlBVVFwiXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgICAgY29uc3QgdXNlciA9IGF3YWl0IHN0b3JhZ2UuZ2V0VXNlcihjdXJyZW50VXNlci5pZCk7XG4gICAgICBpZiAoIXVzZXIgfHwgIWF3YWl0IGJjcnlwdDIuY29tcGFyZShjdXJyZW50UGFzc3dvcmQsIHVzZXIucGFzc3dvcmQpKSB7XG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7XG4gICAgICAgICAgbWVzc2FnZTogXCJDdXJyZW50IHBhc3N3b3JkIGlzIGluY29ycmVjdFwiLFxuICAgICAgICAgIGNvZGU6IFwiSU5WQUxJRF9QQVNTV09SRFwiXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgICAgY29uc3QgaGFzaGVkUGFzc3dvcmQgPSBhd2FpdCBiY3J5cHQyLmhhc2gobmV3UGFzc3dvcmQsIDEyKTtcbiAgICAgIGF3YWl0IHN0b3JhZ2UudXBkYXRlVXNlcihjdXJyZW50VXNlci5pZCwge1xuICAgICAgICBwYXNzd29yZDogaGFzaGVkUGFzc3dvcmQsXG4gICAgICAgIHVwZGF0ZWRBdDogLyogQF9fUFVSRV9fICovIG5ldyBEYXRlKClcbiAgICAgIH0pO1xuICAgICAgcmVzLmpzb24oe1xuICAgICAgICBtZXNzYWdlOiBcIlBhc3N3b3JkIGNoYW5nZWQgc3VjY2Vzc2Z1bGx5XCJcbiAgICAgIH0pO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKFwiXFx1Mjc0QyBFcnJvciBjaGFuZ2luZyBwYXNzd29yZDpcIiwgZXJyb3IpO1xuICAgICAgcmVzLnN0YXR1cyg1MDApLmpzb24oe1xuICAgICAgICBlcnJvcjogXCJJbnRlcm5hbCBzZXJ2ZXIgZXJyb3JcIixcbiAgICAgICAgbWVzc2FnZTogXCJGYWlsZWQgdG8gY2hhbmdlIHBhc3N3b3JkXCJcbiAgICAgIH0pO1xuICAgIH1cbiAgfSk7XG4gIGFwcDIucG9zdChcIi9hcGkvdXNlcnMvZGVtb1wiLCByZXF1aXJlQXV0aCwgYXN5bmMgKHJlcSwgcmVzKSA9PiB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IGN1cnJlbnRVc2VyID0gcmVxLnVzZXIgfHwgcmVxLnNlc3Npb24/LnVzZXI7XG4gICAgICBpZiAoIWN1cnJlbnRVc2VyKSB7XG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMSkuanNvbih7XG4gICAgICAgICAgbWVzc2FnZTogXCJBdXRoZW50aWNhdGlvbiByZXF1aXJlZFwiLFxuICAgICAgICAgIGNvZGU6IFwiQVVUSF9SRVFVSVJFRFwiXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgICAgaWYgKCFbXCJhZG1pblwiLCBcIm1hbmFnZXJcIl0uaW5jbHVkZXMoY3VycmVudFVzZXIucm9sZSkpIHtcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAzKS5qc29uKHtcbiAgICAgICAgICBtZXNzYWdlOiBcIkluc3VmZmljaWVudCBwZXJtaXNzaW9uc1wiLFxuICAgICAgICAgIGNvZGU6IFwiSU5TVUZGSUNJRU5UX1BFUk1JU1NJT05TXCJcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgICBjb25zdCB7IGZpcnN0TmFtZSwgbGFzdE5hbWUsIHJvbGUsIG9yZ2FuaXphdGlvbklkLCByZXNpZGVuY2VJZCB9ID0gcmVxLmJvZHk7XG4gICAgICBpZiAoIVtcImRlbW9fbWFuYWdlclwiLCBcImRlbW9fdGVuYW50XCIsIFwiZGVtb19yZXNpZGVudFwiXS5pbmNsdWRlcyhyb2xlKSkge1xuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oe1xuICAgICAgICAgIG1lc3NhZ2U6IFwiSW52YWxpZCBkZW1vIHJvbGVcIixcbiAgICAgICAgICBjb2RlOiBcIklOVkFMSURfUk9MRVwiXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgICAgaWYgKCFmaXJzdE5hbWUgfHwgIWxhc3ROYW1lIHx8ICFvcmdhbml6YXRpb25JZCkge1xuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oe1xuICAgICAgICAgIG1lc3NhZ2U6IFwiRmlyc3QgbmFtZSwgbGFzdCBuYW1lLCBhbmQgb3JnYW5pemF0aW9uIGFyZSByZXF1aXJlZFwiLFxuICAgICAgICAgIGNvZGU6IFwiTUlTU0lOR19SRVFVSVJFRF9GSUVMRFNcIlxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICAgIGNvbnN0IGVtYWlsID0gYCR7Zmlyc3ROYW1lLnRvTG93ZXJDYXNlKCl9LiR7bGFzdE5hbWUudG9Mb3dlckNhc2UoKX1AZGVtby5jb21gO1xuICAgICAgY29uc3QgZXhpc3RpbmdVc2VyID0gYXdhaXQgc3RvcmFnZS5nZXRVc2VyQnlFbWFpbChlbWFpbCk7XG4gICAgICBpZiAoZXhpc3RpbmdVc2VyKSB7XG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7XG4gICAgICAgICAgbWVzc2FnZTogXCJEZW1vIHVzZXIgd2l0aCB0aGlzIG5hbWUgYWxyZWFkeSBleGlzdHNcIixcbiAgICAgICAgICBjb2RlOiBcIlVTRVJfRVhJU1RTXCJcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgICBjb25zdCByYW5kb21QYXNzd29yZCA9IHJhbmRvbUJ5dGVzMigxMikudG9TdHJpbmcoXCJiYXNlNjRcIik7XG4gICAgICBjb25zdCBoYXNoZWRQYXNzd29yZCA9IGF3YWl0IGJjcnlwdDIuaGFzaChgRGVtbyR7cmFuZG9tUGFzc3dvcmR9IWAsIDEyKTtcbiAgICAgIGNvbnN0IHVzZXJEYXRhID0ge1xuICAgICAgICBmaXJzdE5hbWU6IHNhbml0aXplTmFtZShmaXJzdE5hbWUpLFxuICAgICAgICBsYXN0TmFtZTogc2FuaXRpemVOYW1lKGxhc3ROYW1lKSxcbiAgICAgICAgZW1haWw6IG5vcm1hbGl6ZUVtYWlsKGVtYWlsKSxcbiAgICAgICAgdXNlcm5hbWU6IGdlbmVyYXRlVXNlcm5hbWVGcm9tRW1haWwoZW1haWwpLFxuICAgICAgICBwYXNzd29yZDogaGFzaGVkUGFzc3dvcmQsXG4gICAgICAgIGxhbmd1YWdlOiBcImZyXCIsXG4gICAgICAgIC8vIERlZmF1bHQgdG8gRnJlbmNoIGZvciBRdWViZWNcbiAgICAgICAgcm9sZSxcbiAgICAgICAgaXNBY3RpdmU6IHRydWVcbiAgICAgIH07XG4gICAgICBjb25zdCBuZXdVc2VyID0gYXdhaXQgc3RvcmFnZS5jcmVhdGVVc2VyKHVzZXJEYXRhKTtcbiAgICAgIGxvZ1VzZXJDcmVhdGlvbih7XG4gICAgICAgIHVzZXJJZDogbmV3VXNlci5pZCxcbiAgICAgICAgZW1haWw6IG5ld1VzZXIuZW1haWwsXG4gICAgICAgIG1ldGhvZDogXCJkaXJlY3RcIixcbiAgICAgICAgcm9sZSxcbiAgICAgICAgc3VjY2VzczogdHJ1ZSxcbiAgICAgICAgdGltZXN0YW1wOiAvKiBAX19QVVJFX18gKi8gbmV3IERhdGUoKVxuICAgICAgfSk7XG4gICAgICBxdWVyeUNhY2hlLmludmFsaWRhdGUoXCJ1c2Vyc1wiLCBcImFsbF91c2Vyc1wiKTtcbiAgICAgIHJlcy5zdGF0dXMoMjAxKS5qc29uKHtcbiAgICAgICAgbWVzc2FnZTogXCJEZW1vIHVzZXIgY3JlYXRlZCBzdWNjZXNzZnVsbHlcIixcbiAgICAgICAgdXNlcjoge1xuICAgICAgICAgIGlkOiBuZXdVc2VyLmlkLFxuICAgICAgICAgIGZpcnN0TmFtZTogbmV3VXNlci5maXJzdE5hbWUsXG4gICAgICAgICAgbGFzdE5hbWU6IG5ld1VzZXIubGFzdE5hbWUsXG4gICAgICAgICAgZW1haWw6IG5ld1VzZXIuZW1haWwsXG4gICAgICAgICAgcm9sZTogbmV3VXNlci5yb2xlXG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKFwiXFx1Mjc0QyBFcnJvciBjcmVhdGluZyBkZW1vIHVzZXI6XCIsIGVycm9yKTtcbiAgICAgIHJlcy5zdGF0dXMoNTAwKS5qc29uKHtcbiAgICAgICAgZXJyb3I6IFwiSW50ZXJuYWwgc2VydmVyIGVycm9yXCIsXG4gICAgICAgIG1lc3NhZ2U6IFwiRmFpbGVkIHRvIGNyZWF0ZSBkZW1vIHVzZXJcIlxuICAgICAgfSk7XG4gICAgfVxuICB9KTtcbiAgYXBwMi5wb3N0KFwiL2FwaS9pbnZpdGF0aW9uc1wiLCByZXF1aXJlQXV0aCwgYXN5bmMgKHJlcSwgcmVzKSA9PiB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IGN1cnJlbnRVc2VyID0gcmVxLnVzZXIgfHwgcmVxLnNlc3Npb24/LnVzZXI7XG4gICAgICBpZiAoIWN1cnJlbnRVc2VyKSB7XG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMSkuanNvbih7XG4gICAgICAgICAgbWVzc2FnZTogXCJBdXRoZW50aWNhdGlvbiByZXF1aXJlZFwiLFxuICAgICAgICAgIGNvZGU6IFwiQVVUSF9SRVFVSVJFRFwiXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgICAgaWYgKCFbXCJhZG1pblwiLCBcIm1hbmFnZXJcIl0uaW5jbHVkZXMoY3VycmVudFVzZXIucm9sZSkpIHtcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAzKS5qc29uKHtcbiAgICAgICAgICBtZXNzYWdlOiBcIkluc3VmZmljaWVudCBwZXJtaXNzaW9uc1wiLFxuICAgICAgICAgIGNvZGU6IFwiSU5TVUZGSUNJRU5UX1BFUk1JU1NJT05TXCJcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgICBjb25zdCB7XG4gICAgICAgIG9yZ2FuaXphdGlvbklkLFxuICAgICAgICByZXNpZGVuY2VJZCxcbiAgICAgICAgZW1haWwsXG4gICAgICAgIHJvbGUsXG4gICAgICAgIGludml0ZWRCeVVzZXJJZCxcbiAgICAgICAgZXhwaXJlc0F0LFxuICAgICAgICBwZXJzb25hbE1lc3NhZ2VcbiAgICAgIH0gPSByZXEuYm9keTtcbiAgICAgIGlmICghb3JnYW5pemF0aW9uSWQgfHwgIWVtYWlsIHx8ICFyb2xlIHx8ICFleHBpcmVzQXQpIHtcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHtcbiAgICAgICAgICBtZXNzYWdlOiBcIk9yZ2FuaXphdGlvbiwgZW1haWwsIHJvbGUsIGFuZCBleHBpcnkgZGF0ZSBhcmUgcmVxdWlyZWRcIixcbiAgICAgICAgICBjb2RlOiBcIk1JU1NJTkdfUkVRVUlSRURfRklFTERTXCJcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgICBjb25zdCBlbWFpbFJlZ2V4ID0gL15bXlxcc0BdK0BbXlxcc0BdK1xcLlteXFxzQF0rJC87XG4gICAgICBpZiAoIWVtYWlsUmVnZXgudGVzdChlbWFpbCkpIHtcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHtcbiAgICAgICAgICBtZXNzYWdlOiBcIkludmFsaWQgZW1haWwgZm9ybWF0XCIsXG4gICAgICAgICAgY29kZTogXCJJTlZBTElEX0VNQUlMXCJcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgICBpZiAoY3VycmVudFVzZXIucm9sZSA9PT0gXCJtYW5hZ2VyXCIpIHtcbiAgICAgICAgaWYgKHJvbGUgPT09IFwiYWRtaW5cIikge1xuICAgICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMykuanNvbih7XG4gICAgICAgICAgICBtZXNzYWdlOiBcIk1hbmFnZXJzIGNhbiBvbmx5IGludml0ZSByZXNpZGVudCwgdGVuYW50LCBhbmQgbWFuYWdlciByb2xlc1wiLFxuICAgICAgICAgICAgY29kZTogXCJST0xFX1BFUk1JU1NJT05fREVOSUVEXCJcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCB0YXJnZXRPcmcgPSBhd2FpdCBkYi5zZWxlY3QoKS5mcm9tKG9yZ2FuaXphdGlvbnMpLndoZXJlKGVxNChvcmdhbml6YXRpb25zLmlkLCBvcmdhbml6YXRpb25JZCkpLmxpbWl0KDEpO1xuICAgICAgICBpZiAodGFyZ2V0T3JnLmxlbmd0aCA+IDAgJiYgdGFyZ2V0T3JnWzBdLnR5cGUgPT09IFwiRGVtb1wiKSB7XG4gICAgICAgICAgaWYgKCFbXCJyZXNpZGVudFwiLCBcInRlbmFudFwiLCBcIm1hbmFnZXJcIl0uaW5jbHVkZXMocm9sZSkpIHtcbiAgICAgICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMykuanNvbih7XG4gICAgICAgICAgICAgIG1lc3NhZ2U6IFwiSW52YWxpZCByb2xlIGZvciBkZW1vIG9yZ2FuaXphdGlvblwiLFxuICAgICAgICAgICAgICBjb2RlOiBcIklOVkFMSURfREVNT19ST0xFXCJcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBpZiAoIVtcInJlc2lkZW50XCIsIFwidGVuYW50XCIsIFwibWFuYWdlclwiXS5pbmNsdWRlcyhyb2xlKSkge1xuICAgICAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAzKS5qc29uKHtcbiAgICAgICAgICAgICAgbWVzc2FnZTogXCJNYW5hZ2VycyBjYW4gb25seSBpbnZpdGUgcmVzaWRlbnQsIHRlbmFudCwgYW5kIG1hbmFnZXIgcm9sZXNcIixcbiAgICAgICAgICAgICAgY29kZTogXCJST0xFX1BFUk1JU1NJT05fREVOSUVEXCJcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgY29uc3QgZXhpc3RpbmdVc2VyID0gYXdhaXQgc3RvcmFnZS5nZXRVc2VyQnlFbWFpbChlbWFpbCk7XG4gICAgICBpZiAoZXhpc3RpbmdVc2VyKSB7XG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7XG4gICAgICAgICAgbWVzc2FnZTogXCJVc2VyIHdpdGggdGhpcyBlbWFpbCBhbHJlYWR5IGV4aXN0c1wiLFxuICAgICAgICAgIGNvZGU6IFwiVVNFUl9FWElTVFNcIlxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICAgIGNvbnN0IGV4aXN0aW5nSW52aXRhdGlvbnMgPSBhd2FpdCBkYi5zZWxlY3QoKS5mcm9tKGludml0YXRpb25zKS53aGVyZShcbiAgICAgICAgYW5kNChcbiAgICAgICAgICBlcTQoaW52aXRhdGlvbnMuZW1haWwsIGVtYWlsKSxcbiAgICAgICAgICBlcTQoaW52aXRhdGlvbnMub3JnYW5pemF0aW9uSWQsIG9yZ2FuaXphdGlvbklkKSxcbiAgICAgICAgICBlcTQoaW52aXRhdGlvbnMuc3RhdHVzLCBcInBlbmRpbmdcIilcbiAgICAgICAgKVxuICAgICAgKTtcbiAgICAgIGlmIChleGlzdGluZ0ludml0YXRpb25zLmxlbmd0aCA+IDApIHtcbiAgICAgICAgY29uc29sZS5sb2coYFxcdXsxRjUwNH0gUmVwbGFjaW5nICR7ZXhpc3RpbmdJbnZpdGF0aW9ucy5sZW5ndGh9IGV4aXN0aW5nIGludml0YXRpb24ocykgZm9yIGVtYWlsOiAke2VtYWlsfWApO1xuICAgICAgICBhd2FpdCBkYi5kZWxldGUoaW52aXRhdGlvbnMpLndoZXJlKFxuICAgICAgICAgIGFuZDQoXG4gICAgICAgICAgICBlcTQoaW52aXRhdGlvbnMuZW1haWwsIGVtYWlsKSxcbiAgICAgICAgICAgIGVxNChpbnZpdGF0aW9ucy5vcmdhbml6YXRpb25JZCwgb3JnYW5pemF0aW9uSWQpLFxuICAgICAgICAgICAgZXE0KGludml0YXRpb25zLnN0YXR1cywgXCJwZW5kaW5nXCIpXG4gICAgICAgICAgKVxuICAgICAgICApO1xuICAgICAgfVxuICAgICAgY29uc3QgdG9rZW4gPSByYW5kb21CeXRlczIoMzIpLnRvU3RyaW5nKFwiaGV4XCIpO1xuICAgICAgY29uc3QgdG9rZW5IYXNoID0gY3JlYXRlSGFzaDIoXCJzaGEyNTZcIikudXBkYXRlKHRva2VuKS5kaWdlc3QoXCJoZXhcIik7XG4gICAgICBjb25zdCBpbnZpdGF0aW9uRGF0YSA9IHtcbiAgICAgICAgb3JnYW5pemF0aW9uSWQsXG4gICAgICAgIHJlc2lkZW5jZUlkOiByZXNpZGVuY2VJZCB8fCBudWxsLFxuICAgICAgICBlbWFpbCxcbiAgICAgICAgdG9rZW4sXG4gICAgICAgIHRva2VuSGFzaCxcbiAgICAgICAgcm9sZSxcbiAgICAgICAgaW52aXRlZEJ5VXNlcklkOiBjdXJyZW50VXNlci5pZCxcbiAgICAgICAgZXhwaXJlc0F0OiBuZXcgRGF0ZShleHBpcmVzQXQpLFxuICAgICAgICBwZXJzb25hbE1lc3NhZ2U6IHBlcnNvbmFsTWVzc2FnZSB8fCBudWxsXG4gICAgICB9O1xuICAgICAgY29uc3QgW25ld0ludml0YXRpb25dID0gYXdhaXQgZGIuaW5zZXJ0KGludml0YXRpb25zKS52YWx1ZXMoaW52aXRhdGlvbkRhdGEpLnJldHVybmluZygpO1xuICAgICAgY29uc3QgW29yZ2FuaXphdGlvbl0gPSBhd2FpdCBkYi5zZWxlY3QoKS5mcm9tKG9yZ2FuaXphdGlvbnMpLndoZXJlKGVxNChvcmdhbml6YXRpb25zLmlkLCBvcmdhbml6YXRpb25JZCkpLmxpbWl0KDEpO1xuICAgICAgY29uc3QgcmVjaXBpZW50TmFtZSA9IGVtYWlsLnNwbGl0KFwiQFwiKVswXTtcbiAgICAgIGNvbnN0IG9yZ2FuaXphdGlvbk5hbWUgPSBvcmdhbml6YXRpb24/Lm5hbWUgfHwgXCJLb3ZlbyBHZXN0aW9uXCI7XG4gICAgICBjb25zdCBpbnZpdGVyTmFtZSA9IGAke2N1cnJlbnRVc2VyLmZpcnN0TmFtZSB8fCBjdXJyZW50VXNlci5lbWFpbH0gJHtjdXJyZW50VXNlci5sYXN0TmFtZSB8fCBcIlwifWAudHJpbSgpO1xuICAgICAgY29uc3QgZW1haWxTZW50ID0gYXdhaXQgZW1haWxTZXJ2aWNlLnNlbmRJbnZpdGF0aW9uRW1haWwoXG4gICAgICAgIGVtYWlsLFxuICAgICAgICByZWNpcGllbnROYW1lLFxuICAgICAgICB0b2tlbixcbiAgICAgICAgLy8gVXNlIHRoZSB1bmhhc2hlZCB0b2tlbiBmb3IgdGhlIGVtYWlsIFVSTFxuICAgICAgICBvcmdhbml6YXRpb25OYW1lLFxuICAgICAgICBpbnZpdGVyTmFtZSxcbiAgICAgICAgbmV3IERhdGUoZXhwaXJlc0F0KSxcbiAgICAgICAgXCJmclwiLFxuICAgICAgICAvLyBEZWZhdWx0IHRvIEZyZW5jaCBmb3IgUXVlYmVjXG4gICAgICAgIHBlcnNvbmFsTWVzc2FnZVxuICAgICAgKTtcbiAgICAgIGNvbnNvbGUubG9nKFwiXFx1MjcwNSBJbnZpdGF0aW9uIGNyZWF0ZWQ6XCIsIHtcbiAgICAgICAgaWQ6IG5ld0ludml0YXRpb24uaWQsXG4gICAgICAgIGVtYWlsLFxuICAgICAgICByb2xlLFxuICAgICAgICBvcmdhbml6YXRpb25JZCxcbiAgICAgICAgaW52aXRlZEJ5OiBjdXJyZW50VXNlci5lbWFpbCxcbiAgICAgICAgZW1haWxTZW50XG4gICAgICB9KTtcbiAgICAgIGlmICghZW1haWxTZW50ICYmIHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInRlc3RcIikge1xuICAgICAgICBjb25zb2xlLmVycm9yKFwiXFx1MjZBMFxcdUZFMEYgSW52aXRhdGlvbiBjcmVhdGVkIGJ1dCBlbWFpbCBmYWlsZWQgdG8gc2VuZFwiKTtcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoMjA3KS5qc29uKHtcbiAgICAgICAgICBtZXNzYWdlOiBcIkludml0YXRpb24gY3JlYXRlZCBidXQgZW1haWwgZmFpbGVkIHRvIHNlbmRcIixcbiAgICAgICAgICBpbnZpdGF0aW9uSWQ6IG5ld0ludml0YXRpb24uaWQsXG4gICAgICAgICAgZW1haWxTZW50OiBmYWxzZVxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICAgIHJlcy5zdGF0dXMoMjAxKS5qc29uKHtcbiAgICAgICAgbWVzc2FnZTogXCJJbnZpdGF0aW9uIHNlbnQgc3VjY2Vzc2Z1bGx5XCIsXG4gICAgICAgIGludml0YXRpb25JZDogbmV3SW52aXRhdGlvbi5pZCxcbiAgICAgICAgZW1haWxTZW50OiB0cnVlXG4gICAgICB9KTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcihcIlxcdTI3NEMgRXJyb3IgY3JlYXRpbmcgaW52aXRhdGlvbjpcIiwgZXJyb3IpO1xuICAgICAgcmVzLnN0YXR1cyg1MDApLmpzb24oe1xuICAgICAgICBlcnJvcjogXCJJbnRlcm5hbCBzZXJ2ZXIgZXJyb3JcIixcbiAgICAgICAgbWVzc2FnZTogXCJGYWlsZWQgdG8gY3JlYXRlIGludml0YXRpb25cIlxuICAgICAgfSk7XG4gICAgfVxuICB9KTtcbiAgYXBwMi5nZXQoXCIvYXBpL2ludml0YXRpb25zXCIsIHJlcXVpcmVBdXRoLCBhc3luYyAocmVxLCByZXMpID0+IHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgY3VycmVudFVzZXIgPSByZXEudXNlciB8fCByZXEuc2Vzc2lvbj8udXNlcjtcbiAgICAgIGlmICghY3VycmVudFVzZXIpIHtcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAxKS5qc29uKHtcbiAgICAgICAgICBtZXNzYWdlOiBcIkF1dGhlbnRpY2F0aW9uIHJlcXVpcmVkXCIsXG4gICAgICAgICAgY29kZTogXCJBVVRIX1JFUVVJUkVEXCJcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgICBpZiAoIVtcImFkbWluXCIsIFwibWFuYWdlclwiXS5pbmNsdWRlcyhjdXJyZW50VXNlci5yb2xlKSkge1xuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDMpLmpzb24oe1xuICAgICAgICAgIG1lc3NhZ2U6IFwiSW5zdWZmaWNpZW50IHBlcm1pc3Npb25zXCIsXG4gICAgICAgICAgY29kZTogXCJJTlNVRkZJQ0lFTlRfUEVSTUlTU0lPTlNcIlxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICAgIGxldCBpbnZpdGF0aW9uczI7XG4gICAgICBpZiAoY3VycmVudFVzZXIucm9sZSA9PT0gXCJhZG1pblwiKSB7XG4gICAgICAgIGludml0YXRpb25zMiA9IGF3YWl0IGRiLnNlbGVjdCgpLmZyb20oaW52aXRhdGlvbnMpLm9yZGVyQnkoaW52aXRhdGlvbnMuY3JlYXRlZEF0KTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGludml0YXRpb25zMiA9IGF3YWl0IGRiLnNlbGVjdCgpLmZyb20oaW52aXRhdGlvbnMpLndoZXJlKGVxNChpbnZpdGF0aW9ucy5pbnZpdGVkQnlVc2VySWQsIGN1cnJlbnRVc2VyLmlkKSkub3JkZXJCeShpbnZpdGF0aW9ucy5jcmVhdGVkQXQpO1xuICAgICAgfVxuICAgICAgcmVzLmpzb24oaW52aXRhdGlvbnMyKTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcihcIlxcdTI3NEMgRXJyb3IgZmV0Y2hpbmcgaW52aXRhdGlvbnM6XCIsIGVycm9yKTtcbiAgICAgIHJlcy5zdGF0dXMoNTAwKS5qc29uKHtcbiAgICAgICAgZXJyb3I6IFwiSW50ZXJuYWwgc2VydmVyIGVycm9yXCIsXG4gICAgICAgIG1lc3NhZ2U6IFwiRmFpbGVkIHRvIGZldGNoIGludml0YXRpb25zXCJcbiAgICAgIH0pO1xuICAgIH1cbiAgfSk7XG4gIGFwcDIucG9zdChcIi9hcGkvaW52aXRhdGlvbnMvdmFsaWRhdGVcIiwgYXN5bmMgKHJlcSwgcmVzKSA9PiB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHsgdG9rZW4gfSA9IHJlcS5ib2R5O1xuICAgICAgaWYgKCF0b2tlbikge1xuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oe1xuICAgICAgICAgIGlzVmFsaWQ6IGZhbHNlLFxuICAgICAgICAgIG1lc3NhZ2U6IFwiVG9rZW4gaXMgcmVxdWlyZWRcIixcbiAgICAgICAgICBjb2RlOiBcIlRPS0VOX1JFUVVJUkVEXCJcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgICBjb25zdCBbaW52aXRhdGlvbl0gPSBhd2FpdCBkYi5zZWxlY3QoKS5mcm9tKGludml0YXRpb25zKS53aGVyZShlcTQoaW52aXRhdGlvbnMudG9rZW4sIHRva2VuKSkubGltaXQoMSk7XG4gICAgICBpZiAoIWludml0YXRpb24pIHtcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDA0KS5qc29uKHtcbiAgICAgICAgICBpc1ZhbGlkOiBmYWxzZSxcbiAgICAgICAgICBtZXNzYWdlOiBcIkludml0YXRpb24gbm90IGZvdW5kIG9yIGludmFsaWQgdG9rZW5cIixcbiAgICAgICAgICBjb2RlOiBcIklOVklUQVRJT05fTk9UX0ZPVU5EXCJcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgICBjb25zdCBub3cgPSAvKiBAX19QVVJFX18gKi8gbmV3IERhdGUoKTtcbiAgICAgIGNvbnN0IGV4cGlyZXNBdCA9IG5ldyBEYXRlKGludml0YXRpb24uZXhwaXJlc0F0KTtcbiAgICAgIGlmIChub3cgPiBleHBpcmVzQXQpIHtcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHtcbiAgICAgICAgICBpc1ZhbGlkOiBmYWxzZSxcbiAgICAgICAgICBtZXNzYWdlOiBcIkludml0YXRpb24gaGFzIGV4cGlyZWRcIixcbiAgICAgICAgICBjb2RlOiBcIklOVklUQVRJT05fRVhQSVJFRFwiXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgICAgaWYgKGludml0YXRpb24uc3RhdHVzID09PSBcImFjY2VwdGVkXCIpIHtcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHtcbiAgICAgICAgICBpc1ZhbGlkOiBmYWxzZSxcbiAgICAgICAgICBtZXNzYWdlOiBcIkludml0YXRpb24gaGFzIGFscmVhZHkgYmVlbiB1c2VkXCIsXG4gICAgICAgICAgY29kZTogXCJJTlZJVEFUSU9OX0FMUkVBRFlfVVNFRFwiXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgICAgY29uc3QgW29yZ2FuaXphdGlvbl0gPSBhd2FpdCBkYi5zZWxlY3QoKS5mcm9tKG9yZ2FuaXphdGlvbnMpLndoZXJlKGVxNChvcmdhbml6YXRpb25zLmlkLCBpbnZpdGF0aW9uLm9yZ2FuaXphdGlvbklkKSkubGltaXQoMSk7XG4gICAgICBjb25zdCBbaW52aXRlcl0gPSBhd2FpdCBkYi5zZWxlY3Qoe1xuICAgICAgICBpZDogdXNlcnMuaWQsXG4gICAgICAgIGZpcnN0TmFtZTogdXNlcnMuZmlyc3ROYW1lLFxuICAgICAgICBsYXN0TmFtZTogdXNlcnMubGFzdE5hbWUsXG4gICAgICAgIGVtYWlsOiB1c2Vycy5lbWFpbFxuICAgICAgfSkuZnJvbSh1c2Vycykud2hlcmUoZXE0KHVzZXJzLmlkLCBpbnZpdGF0aW9uLmludml0ZWRCeVVzZXJJZCkpLmxpbWl0KDEpO1xuICAgICAgcmVzLmpzb24oe1xuICAgICAgICBpc1ZhbGlkOiB0cnVlLFxuICAgICAgICBpbnZpdGF0aW9uOiB7XG4gICAgICAgICAgaWQ6IGludml0YXRpb24uaWQsXG4gICAgICAgICAgZW1haWw6IGludml0YXRpb24uZW1haWwsXG4gICAgICAgICAgcm9sZTogaW52aXRhdGlvbi5yb2xlLFxuICAgICAgICAgIGV4cGlyZXNBdDogaW52aXRhdGlvbi5leHBpcmVzQXQsXG4gICAgICAgICAgY3JlYXRlZEF0OiBpbnZpdGF0aW9uLmNyZWF0ZWRBdFxuICAgICAgICB9LFxuICAgICAgICBvcmdhbml6YXRpb25OYW1lOiBvcmdhbml6YXRpb24/Lm5hbWUgfHwgXCJVbmtub3duIE9yZ2FuaXphdGlvblwiLFxuICAgICAgICBpbnZpdGVyTmFtZTogaW52aXRlciA/IGAke2ludml0ZXIuZmlyc3ROYW1lfSAke2ludml0ZXIubGFzdE5hbWV9YC50cmltKCkgOiBcIlVua25vd24gVXNlclwiXG4gICAgICB9KTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcihcIlxcdTI3NEMgRXJyb3IgdmFsaWRhdGluZyBpbnZpdGF0aW9uOlwiLCBlcnJvcik7XG4gICAgICByZXMuc3RhdHVzKDUwMCkuanNvbih7XG4gICAgICAgIGlzVmFsaWQ6IGZhbHNlLFxuICAgICAgICBtZXNzYWdlOiBcIkludGVybmFsIHNlcnZlciBlcnJvciBkdXJpbmcgdmFsaWRhdGlvblwiLFxuICAgICAgICBjb2RlOiBcIlZBTElEQVRJT05fRVJST1JcIlxuICAgICAgfSk7XG4gICAgfVxuICB9KTtcbiAgYXBwMi5wb3N0KFwiL2FwaS9pbnZpdGF0aW9ucy9hY2NlcHQvOnRva2VuXCIsIGFzeW5jIChyZXEsIHJlcykgPT4ge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCB7IHRva2VuIH0gPSByZXEucGFyYW1zO1xuICAgICAgY29uc3Qge1xuICAgICAgICBmaXJzdE5hbWUsXG4gICAgICAgIGxhc3ROYW1lLFxuICAgICAgICBwYXNzd29yZCxcbiAgICAgICAgcGhvbmUsXG4gICAgICAgIGxhbmd1YWdlLFxuICAgICAgICBkYXRhQ29sbGVjdGlvbkNvbnNlbnQsXG4gICAgICAgIG1hcmtldGluZ0NvbnNlbnQsXG4gICAgICAgIGFuYWx5dGljc0NvbnNlbnQsXG4gICAgICAgIHRoaXJkUGFydHlDb25zZW50LFxuICAgICAgICBhY2tub3dsZWRnZWRSaWdodHNcbiAgICAgIH0gPSByZXEuYm9keTtcbiAgICAgIGlmICghdG9rZW4pIHtcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHtcbiAgICAgICAgICBtZXNzYWdlOiBcIlRva2VuIGlzIHJlcXVpcmVkXCIsXG4gICAgICAgICAgY29kZTogXCJUT0tFTl9SRVFVSVJFRFwiXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgICAgY29uc3QgW2ludml0YXRpb25dID0gYXdhaXQgZGIuc2VsZWN0KCkuZnJvbShpbnZpdGF0aW9ucykud2hlcmUoZXE0KGludml0YXRpb25zLnRva2VuLCB0b2tlbikpLmxpbWl0KDEpO1xuICAgICAgaWYgKCFpbnZpdGF0aW9uKSB7XG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwNCkuanNvbih7XG4gICAgICAgICAgbWVzc2FnZTogXCJJbnZpdGF0aW9uIG5vdCBmb3VuZCBvciBpbnZhbGlkIHRva2VuXCIsXG4gICAgICAgICAgY29kZTogXCJJTlZJVEFUSU9OX05PVF9GT1VORFwiXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgICAgY29uc3Qgbm93ID0gLyogQF9fUFVSRV9fICovIG5ldyBEYXRlKCk7XG4gICAgICBjb25zdCBleHBpcmVzQXQgPSBuZXcgRGF0ZShpbnZpdGF0aW9uLmV4cGlyZXNBdCk7XG4gICAgICBpZiAobm93ID4gZXhwaXJlc0F0KSB7XG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7XG4gICAgICAgICAgbWVzc2FnZTogXCJJbnZpdGF0aW9uIGhhcyBleHBpcmVkXCIsXG4gICAgICAgICAgY29kZTogXCJJTlZJVEFUSU9OX0VYUElSRURcIlxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICAgIGlmIChpbnZpdGF0aW9uLnN0YXR1cyA9PT0gXCJhY2NlcHRlZFwiKSB7XG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7XG4gICAgICAgICAgbWVzc2FnZTogXCJJbnZpdGF0aW9uIGhhcyBhbHJlYWR5IGJlZW4gdXNlZFwiLFxuICAgICAgICAgIGNvZGU6IFwiSU5WSVRBVElPTl9BTFJFQURZX1VTRURcIlxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICAgIGlmICghZmlyc3ROYW1lIHx8ICFsYXN0TmFtZSB8fCAhcGFzc3dvcmQpIHtcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHtcbiAgICAgICAgICBtZXNzYWdlOiBcIkZpcnN0IG5hbWUsIGxhc3QgbmFtZSwgYW5kIHBhc3N3b3JkIGFyZSByZXF1aXJlZFwiLFxuICAgICAgICAgIGNvZGU6IFwiTUlTU0lOR19SRVFVSVJFRF9GSUVMRFNcIlxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICAgIGlmICghZGF0YUNvbGxlY3Rpb25Db25zZW50IHx8ICFhY2tub3dsZWRnZWRSaWdodHMpIHtcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHtcbiAgICAgICAgICBtZXNzYWdlOiBcIlJlcXVpcmVkIHByaXZhY3kgY29uc2VudHMgbXVzdCBiZSBnaXZlblwiLFxuICAgICAgICAgIGNvZGU6IFwiTUlTU0lOR19SRVFVSVJFRF9DT05TRU5UU1wiXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgICAgY29uc3QgaGFzaGVkUGFzc3dvcmQgPSBhd2FpdCBiY3J5cHQyLmhhc2gocGFzc3dvcmQsIDEyKTtcbiAgICAgIGNvbnN0IHVzZXJEYXRhID0ge1xuICAgICAgICBmaXJzdE5hbWU6IHNhbml0aXplTmFtZShmaXJzdE5hbWUpLFxuICAgICAgICBsYXN0TmFtZTogc2FuaXRpemVOYW1lKGxhc3ROYW1lKSxcbiAgICAgICAgZW1haWw6IG5vcm1hbGl6ZUVtYWlsKGludml0YXRpb24uZW1haWwpLFxuICAgICAgICB1c2VybmFtZTogZ2VuZXJhdGVVc2VybmFtZUZyb21FbWFpbChpbnZpdGF0aW9uLmVtYWlsKSxcbiAgICAgICAgcGFzc3dvcmQ6IGhhc2hlZFBhc3N3b3JkLFxuICAgICAgICBwaG9uZTogcGhvbmUgPyBzYW5pdGl6ZVN0cmluZyhwaG9uZSkgOiBcIlwiLFxuICAgICAgICBsYW5ndWFnZTogbGFuZ3VhZ2UgfHwgXCJmclwiLFxuICAgICAgICByb2xlOiBpbnZpdGF0aW9uLnJvbGUsXG4gICAgICAgIGlzQWN0aXZlOiB0cnVlLFxuICAgICAgICBvcmdhbml6YXRpb25JZDogaW52aXRhdGlvbi5vcmdhbml6YXRpb25JZFxuICAgICAgfTtcbiAgICAgIGNvbnN0IG5ld1VzZXIgPSBhd2FpdCBzdG9yYWdlLmNyZWF0ZVVzZXIodXNlckRhdGEpO1xuICAgICAgaWYgKGludml0YXRpb24ub3JnYW5pemF0aW9uSWQpIHtcbiAgICAgICAgYXdhaXQgZGIuaW5zZXJ0KHVzZXJPcmdhbml6YXRpb25zKS52YWx1ZXMoe1xuICAgICAgICAgIHVzZXJJZDogbmV3VXNlci5pZCxcbiAgICAgICAgICBvcmdhbml6YXRpb25JZDogaW52aXRhdGlvbi5vcmdhbml6YXRpb25JZCxcbiAgICAgICAgICBvcmdhbml6YXRpb25Sb2xlOiBpbnZpdGF0aW9uLnJvbGUsXG4gICAgICAgICAgaXNBY3RpdmU6IHRydWVcbiAgICAgICAgfSk7XG4gICAgICAgIGNvbnNvbGUubG9nKFwiXFx1MjcwNSBVc2VyIGFzc2lnbmVkIHRvIG9yZ2FuaXphdGlvbjpcIiwge1xuICAgICAgICAgIHVzZXJJZDogbmV3VXNlci5pZCxcbiAgICAgICAgICBvcmdhbml6YXRpb25JZDogaW52aXRhdGlvbi5vcmdhbml6YXRpb25JZCxcbiAgICAgICAgICByb2xlOiBpbnZpdGF0aW9uLnJvbGVcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgICBpZiAoaW52aXRhdGlvbi5yZXNpZGVuY2VJZCkge1xuICAgICAgICBhd2FpdCBkYi5pbnNlcnQodXNlclJlc2lkZW5jZXMpLnZhbHVlcyh7XG4gICAgICAgICAgdXNlcklkOiBuZXdVc2VyLmlkLFxuICAgICAgICAgIHJlc2lkZW5jZUlkOiBpbnZpdGF0aW9uLnJlc2lkZW5jZUlkLFxuICAgICAgICAgIHJlbGF0aW9uc2hpcFR5cGU6IGludml0YXRpb24ucm9sZSA9PT0gXCJ0ZW5hbnRcIiA/IFwidGVuYW50XCIgOiBcIm9jY3VwYW50XCIsXG4gICAgICAgICAgc3RhcnREYXRlOiAvKiBAX19QVVJFX18gKi8gbmV3IERhdGUoKSxcbiAgICAgICAgICBpc0FjdGl2ZTogdHJ1ZVxuICAgICAgICB9KTtcbiAgICAgICAgY29uc29sZS5sb2coXCJcXHUyNzA1IFVzZXIgYXNzaWduZWQgdG8gcmVzaWRlbmNlOlwiLCB7XG4gICAgICAgICAgdXNlcklkOiBuZXdVc2VyLmlkLFxuICAgICAgICAgIHJlc2lkZW5jZUlkOiBpbnZpdGF0aW9uLnJlc2lkZW5jZUlkLFxuICAgICAgICAgIHJlbGF0aW9uc2hpcFR5cGU6IGludml0YXRpb24ucm9sZSA9PT0gXCJ0ZW5hbnRcIiA/IFwidGVuYW50XCIgOiBcIm9jY3VwYW50XCJcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgICBhd2FpdCBkYi51cGRhdGUoaW52aXRhdGlvbnMpLnNldCh7XG4gICAgICAgIHN0YXR1czogXCJhY2NlcHRlZFwiLFxuICAgICAgICBhY2NlcHRlZEF0OiAvKiBAX19QVVJFX18gKi8gbmV3IERhdGUoKSxcbiAgICAgICAgYWNjZXB0ZWRCeTogbmV3VXNlci5pZCxcbiAgICAgICAgdXBkYXRlZEF0OiAvKiBAX19QVVJFX18gKi8gbmV3IERhdGUoKVxuICAgICAgfSkud2hlcmUoZXE0KGludml0YXRpb25zLmlkLCBpbnZpdGF0aW9uLmlkKSk7XG4gICAgICBsb2dVc2VyQ3JlYXRpb24oe1xuICAgICAgICB1c2VySWQ6IG5ld1VzZXIuaWQsXG4gICAgICAgIGVtYWlsOiBuZXdVc2VyLmVtYWlsLFxuICAgICAgICBtZXRob2Q6IFwiaW52aXRhdGlvblwiLFxuICAgICAgICByb2xlOiBpbnZpdGF0aW9uLnJvbGUsXG4gICAgICAgIHN1Y2Nlc3M6IHRydWUsXG4gICAgICAgIHRpbWVzdGFtcDogLyogQF9fUFVSRV9fICovIG5ldyBEYXRlKClcbiAgICAgIH0pO1xuICAgICAgcXVlcnlDYWNoZS5pbnZhbGlkYXRlKFwidXNlcnNcIiwgXCJhbGxfdXNlcnNcIik7XG4gICAgICBxdWVyeUNhY2hlLmludmFsaWRhdGUoXCJpbnZpdGF0aW9uc1wiKTtcbiAgICAgIGNvbnNvbGUubG9nKFwiXFx1MjcwNSBVc2VyIGNyZWF0ZWQgdmlhIGludml0YXRpb24gYWNjZXB0YW5jZTpcIiwge1xuICAgICAgICB1c2VySWQ6IG5ld1VzZXIuaWQsXG4gICAgICAgIGVtYWlsOiBuZXdVc2VyLmVtYWlsLFxuICAgICAgICByb2xlOiBuZXdVc2VyLnJvbGUsXG4gICAgICAgIG9yZ2FuaXphdGlvbklkOiBpbnZpdGF0aW9uLm9yZ2FuaXphdGlvbklkLFxuICAgICAgICByZXNpZGVuY2VJZDogaW52aXRhdGlvbi5yZXNpZGVuY2VJZCxcbiAgICAgICAgYXNzaWduZWRUb09yZ2FuaXphdGlvbjogISFpbnZpdGF0aW9uLm9yZ2FuaXphdGlvbklkLFxuICAgICAgICBhc3NpZ25lZFRvUmVzaWRlbmNlOiAhIWludml0YXRpb24ucmVzaWRlbmNlSWRcbiAgICAgIH0pO1xuICAgICAgcmVzLnN0YXR1cygyMDEpLmpzb24oe1xuICAgICAgICBtZXNzYWdlOiBcIkFjY291bnQgY3JlYXRlZCBzdWNjZXNzZnVsbHlcIixcbiAgICAgICAgdXNlcjoge1xuICAgICAgICAgIGlkOiBuZXdVc2VyLmlkLFxuICAgICAgICAgIGZpcnN0TmFtZTogbmV3VXNlci5maXJzdE5hbWUsXG4gICAgICAgICAgbGFzdE5hbWU6IG5ld1VzZXIubGFzdE5hbWUsXG4gICAgICAgICAgZW1haWw6IG5ld1VzZXIuZW1haWwsXG4gICAgICAgICAgcm9sZTogbmV3VXNlci5yb2xlLFxuICAgICAgICAgIGxhbmd1YWdlOiBuZXdVc2VyLmxhbmd1YWdlXG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKFwiXFx1Mjc0QyBFcnJvciBhY2NlcHRpbmcgaW52aXRhdGlvbjpcIiwgZXJyb3IpO1xuICAgICAgcmVzLnN0YXR1cyg1MDApLmpzb24oe1xuICAgICAgICBtZXNzYWdlOiBcIkludGVybmFsIHNlcnZlciBlcnJvciBkdXJpbmcgYWNjb3VudCBjcmVhdGlvblwiLFxuICAgICAgICBjb2RlOiBcIklOVklUQVRJT05fQUNDRVBUX0VSUk9SXCJcbiAgICAgIH0pO1xuICAgIH1cbiAgfSk7XG4gIGFwcDIucG9zdChcIi9hcGkvaW52aXRhdGlvbnMvOmlkL3Jlc2VuZFwiLCByZXF1aXJlQXV0aCwgYXN5bmMgKHJlcSwgcmVzKSA9PiB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IGN1cnJlbnRVc2VyID0gcmVxLnVzZXIgfHwgcmVxLnNlc3Npb24/LnVzZXI7XG4gICAgICBpZiAoIWN1cnJlbnRVc2VyKSB7XG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMSkuanNvbih7XG4gICAgICAgICAgbWVzc2FnZTogXCJBdXRoZW50aWNhdGlvbiByZXF1aXJlZFwiLFxuICAgICAgICAgIGNvZGU6IFwiQVVUSF9SRVFVSVJFRFwiXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgICAgY29uc3QgeyBpZCB9ID0gcmVxLnBhcmFtcztcbiAgICAgIGNvbnN0IFtpbnZpdGF0aW9uXSA9IGF3YWl0IGRiLnNlbGVjdCgpLmZyb20oaW52aXRhdGlvbnMpLndoZXJlKGVxNChpbnZpdGF0aW9ucy5pZCwgaWQpKS5saW1pdCgxKTtcbiAgICAgIGlmICghaW52aXRhdGlvbikge1xuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDQpLmpzb24oe1xuICAgICAgICAgIG1lc3NhZ2U6IFwiSW52aXRhdGlvbiBub3QgZm91bmRcIixcbiAgICAgICAgICBjb2RlOiBcIklOVklUQVRJT05fTk9UX0ZPVU5EXCJcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgICBpZiAoY3VycmVudFVzZXIucm9sZSAhPT0gXCJhZG1pblwiICYmIGludml0YXRpb24uaW52aXRlZEJ5VXNlcklkICE9PSBjdXJyZW50VXNlci5pZCkge1xuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDMpLmpzb24oe1xuICAgICAgICAgIG1lc3NhZ2U6IFwiQ2FuIG9ubHkgcmVzZW5kIHlvdXIgb3duIGludml0YXRpb25zXCIsXG4gICAgICAgICAgY29kZTogXCJJTlNVRkZJQ0lFTlRfUEVSTUlTU0lPTlNcIlxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICAgIGNvbnN0IG5ld0V4cGlyZXNBdCA9IC8qIEBfX1BVUkVfXyAqLyBuZXcgRGF0ZSgpO1xuICAgICAgbmV3RXhwaXJlc0F0LnNldERhdGUobmV3RXhwaXJlc0F0LmdldERhdGUoKSArIDcpO1xuICAgICAgYXdhaXQgZGIudXBkYXRlKGludml0YXRpb25zKS5zZXQoe1xuICAgICAgICBleHBpcmVzQXQ6IG5ld0V4cGlyZXNBdCxcbiAgICAgICAgc3RhdHVzOiBcInBlbmRpbmdcIixcbiAgICAgICAgdXBkYXRlZEF0OiAvKiBAX19QVVJFX18gKi8gbmV3IERhdGUoKVxuICAgICAgfSkud2hlcmUoZXE0KGludml0YXRpb25zLmlkLCBpZCkpO1xuICAgICAgY29uc3QgW29yZ2FuaXphdGlvbl0gPSBhd2FpdCBkYi5zZWxlY3QoKS5mcm9tKG9yZ2FuaXphdGlvbnMpLndoZXJlKGVxNChvcmdhbml6YXRpb25zLmlkLCBpbnZpdGF0aW9uLm9yZ2FuaXphdGlvbklkKSkubGltaXQoMSk7XG4gICAgICBjb25zdCByZWNpcGllbnROYW1lID0gaW52aXRhdGlvbi5lbWFpbC5zcGxpdChcIkBcIilbMF07XG4gICAgICBjb25zdCBvcmdhbml6YXRpb25OYW1lID0gb3JnYW5pemF0aW9uPy5uYW1lIHx8IFwiS292ZW8gR2VzdGlvblwiO1xuICAgICAgY29uc3QgaW52aXRlck5hbWUgPSBgJHtjdXJyZW50VXNlci5maXJzdE5hbWUgfHwgY3VycmVudFVzZXIuZW1haWx9ICR7Y3VycmVudFVzZXIubGFzdE5hbWUgfHwgXCJcIn1gLnRyaW0oKTtcbiAgICAgIGNvbnN0IGVtYWlsU2VudCA9IGF3YWl0IGVtYWlsU2VydmljZS5zZW5kSW52aXRhdGlvbkVtYWlsKFxuICAgICAgICBpbnZpdGF0aW9uLmVtYWlsLFxuICAgICAgICByZWNpcGllbnROYW1lLFxuICAgICAgICBpbnZpdGF0aW9uLnRva2VuLFxuICAgICAgICAvLyBVc2UgdGhlIGV4aXN0aW5nIHRva2VuXG4gICAgICAgIG9yZ2FuaXphdGlvbk5hbWUsXG4gICAgICAgIGludml0ZXJOYW1lLFxuICAgICAgICBuZXdFeHBpcmVzQXQsXG4gICAgICAgIFwiZnJcIixcbiAgICAgICAgLy8gRGVmYXVsdCB0byBGcmVuY2ggZm9yIFF1ZWJlY1xuICAgICAgICBpbnZpdGF0aW9uLnBlcnNvbmFsTWVzc2FnZVxuICAgICAgKTtcbiAgICAgIGNvbnNvbGUubG9nKFwiXFx1MjcwNSBJbnZpdGF0aW9uIHJlc2VudDpcIiwge1xuICAgICAgICBpZCxcbiAgICAgICAgZW1haWw6IGludml0YXRpb24uZW1haWwsXG4gICAgICAgIG5ld0V4cGlyZXNBdCxcbiAgICAgICAgZW1haWxTZW50XG4gICAgICB9KTtcbiAgICAgIGlmICghZW1haWxTZW50KSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoXCJcXHUyNkEwXFx1RkUwRiBJbnZpdGF0aW9uIHVwZGF0ZWQgYnV0IGVtYWlsIGZhaWxlZCB0byByZXNlbmRcIik7XG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDIwNykuanNvbih7XG4gICAgICAgICAgbWVzc2FnZTogXCJJbnZpdGF0aW9uIHVwZGF0ZWQgYnV0IGVtYWlsIGZhaWxlZCB0byByZXNlbmRcIixcbiAgICAgICAgICBlbWFpbFNlbnQ6IGZhbHNlXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgICAgcmVzLmpzb24oe1xuICAgICAgICBtZXNzYWdlOiBcIkludml0YXRpb24gcmVzZW50IHN1Y2Nlc3NmdWxseVwiLFxuICAgICAgICBlbWFpbFNlbnQ6IHRydWVcbiAgICAgIH0pO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKFwiXFx1Mjc0QyBFcnJvciByZXNlbmRpbmcgaW52aXRhdGlvbjpcIiwgZXJyb3IpO1xuICAgICAgcmVzLnN0YXR1cyg1MDApLmpzb24oe1xuICAgICAgICBlcnJvcjogXCJJbnRlcm5hbCBzZXJ2ZXIgZXJyb3JcIixcbiAgICAgICAgbWVzc2FnZTogXCJGYWlsZWQgdG8gcmVzZW5kIGludml0YXRpb25cIlxuICAgICAgfSk7XG4gICAgfVxuICB9KTtcbiAgYXBwMi5nZXQoXCIvYXBpL2ludml0YXRpb25zL3BlbmRpbmdcIiwgcmVxdWlyZUF1dGgsIGFzeW5jIChyZXEsIHJlcykgPT4ge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCBjdXJyZW50VXNlciA9IHJlcS51c2VyIHx8IHJlcS5zZXNzaW9uPy51c2VyO1xuICAgICAgaWYgKCFjdXJyZW50VXNlcikge1xuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDEpLmpzb24oe1xuICAgICAgICAgIG1lc3NhZ2U6IFwiQXV0aGVudGljYXRpb24gcmVxdWlyZWRcIixcbiAgICAgICAgICBjb2RlOiBcIkFVVEhfUkVRVUlSRURcIlxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICAgIGlmICghW1wiYWRtaW5cIiwgXCJtYW5hZ2VyXCJdLmluY2x1ZGVzKGN1cnJlbnRVc2VyLnJvbGUpKSB7XG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMykuanNvbih7XG4gICAgICAgICAgbWVzc2FnZTogXCJJbnN1ZmZpY2llbnQgcGVybWlzc2lvbnMgdG8gdmlldyBpbnZpdGF0aW9uc1wiLFxuICAgICAgICAgIGNvZGU6IFwiSU5TVUZGSUNJRU5UX1BFUk1JU1NJT05TXCJcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgICBsZXQgaW52aXRhdGlvbnNRdWVyeTtcbiAgICAgIGlmIChjdXJyZW50VXNlci5yb2xlID09PSBcImFkbWluXCIpIHtcbiAgICAgICAgaW52aXRhdGlvbnNRdWVyeSA9IGRiLnNlbGVjdCh7XG4gICAgICAgICAgaWQ6IGludml0YXRpb25zLmlkLFxuICAgICAgICAgIGVtYWlsOiBpbnZpdGF0aW9ucy5lbWFpbCxcbiAgICAgICAgICByb2xlOiBpbnZpdGF0aW9ucy5yb2xlLFxuICAgICAgICAgIHN0YXR1czogaW52aXRhdGlvbnMuc3RhdHVzLFxuICAgICAgICAgIGV4cGlyZXNBdDogaW52aXRhdGlvbnMuZXhwaXJlc0F0LFxuICAgICAgICAgIGNyZWF0ZWRBdDogaW52aXRhdGlvbnMuY3JlYXRlZEF0LFxuICAgICAgICAgIG9yZ2FuaXphdGlvbklkOiBpbnZpdGF0aW9ucy5vcmdhbml6YXRpb25JZCxcbiAgICAgICAgICBidWlsZGluZ0lkOiBpbnZpdGF0aW9ucy5idWlsZGluZ0lkLFxuICAgICAgICAgIHJlc2lkZW5jZUlkOiBpbnZpdGF0aW9ucy5yZXNpZGVuY2VJZCxcbiAgICAgICAgICBvcmdhbml6YXRpb25OYW1lOiBvcmdhbml6YXRpb25zLm5hbWUsXG4gICAgICAgICAgYnVpbGRpbmdOYW1lOiBzcWwxNGBidWlsZGluZ3MubmFtZWAsXG4gICAgICAgICAgcmVzaWRlbmNlVW5pdE51bWJlcjogc3FsMTRgcmVzaWRlbmNlcy51bml0X251bWJlcmAsXG4gICAgICAgICAgaW52aXRlZEJ5TmFtZTogc3FsMTRgQ09OQ0FUKHVzZXJzLmZpcnN0X25hbWUsICcgJywgdXNlcnMubGFzdF9uYW1lKWBcbiAgICAgICAgfSkuZnJvbShpbnZpdGF0aW9ucykubGVmdEpvaW4ob3JnYW5pemF0aW9ucywgZXE0KGludml0YXRpb25zLm9yZ2FuaXphdGlvbklkLCBvcmdhbml6YXRpb25zLmlkKSkubGVmdEpvaW4oXG4gICAgICAgICAgc3FsMTRgYnVpbGRpbmdzYCxcbiAgICAgICAgICBzcWwxNGBpbnZpdGF0aW9ucy5idWlsZGluZ19pZCA9IGJ1aWxkaW5ncy5pZGBcbiAgICAgICAgKS5sZWZ0Sm9pbihcbiAgICAgICAgICBzcWwxNGByZXNpZGVuY2VzYCxcbiAgICAgICAgICBzcWwxNGBpbnZpdGF0aW9ucy5yZXNpZGVuY2VfaWQgPSByZXNpZGVuY2VzLmlkYFxuICAgICAgICApLmxlZnRKb2luKHVzZXJzLCBlcTQoaW52aXRhdGlvbnMuaW52aXRlZEJ5VXNlcklkLCB1c2Vycy5pZCkpLndoZXJlKGVxNChpbnZpdGF0aW9ucy5zdGF0dXMsIFwicGVuZGluZ1wiKSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjb25zdCBtYW5hZ2VyT3JncyA9IGF3YWl0IGRiLnNlbGVjdCh7IG9yZ2FuaXphdGlvbklkOiB1c2VyT3JnYW5pemF0aW9ucy5vcmdhbml6YXRpb25JZCB9KS5mcm9tKHVzZXJPcmdhbml6YXRpb25zKS53aGVyZShcbiAgICAgICAgICBhbmQ0KFxuICAgICAgICAgICAgZXE0KHVzZXJPcmdhbml6YXRpb25zLnVzZXJJZCwgY3VycmVudFVzZXIuaWQpLFxuICAgICAgICAgICAgZXE0KHVzZXJPcmdhbml6YXRpb25zLmlzQWN0aXZlLCB0cnVlKVxuICAgICAgICAgIClcbiAgICAgICAgKTtcbiAgICAgICAgY29uc3Qgb3JnSWRzID0gbWFuYWdlck9yZ3MubWFwKChvcmcpID0+IG9yZy5vcmdhbml6YXRpb25JZCk7XG4gICAgICAgIGlmIChvcmdJZHMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgcmV0dXJuIHJlcy5qc29uKFtdKTtcbiAgICAgICAgfVxuICAgICAgICBpbnZpdGF0aW9uc1F1ZXJ5ID0gZGIuc2VsZWN0KHtcbiAgICAgICAgICBpZDogaW52aXRhdGlvbnMuaWQsXG4gICAgICAgICAgZW1haWw6IGludml0YXRpb25zLmVtYWlsLFxuICAgICAgICAgIHJvbGU6IGludml0YXRpb25zLnJvbGUsXG4gICAgICAgICAgc3RhdHVzOiBpbnZpdGF0aW9ucy5zdGF0dXMsXG4gICAgICAgICAgZXhwaXJlc0F0OiBpbnZpdGF0aW9ucy5leHBpcmVzQXQsXG4gICAgICAgICAgY3JlYXRlZEF0OiBpbnZpdGF0aW9ucy5jcmVhdGVkQXQsXG4gICAgICAgICAgb3JnYW5pemF0aW9uSWQ6IGludml0YXRpb25zLm9yZ2FuaXphdGlvbklkLFxuICAgICAgICAgIGJ1aWxkaW5nSWQ6IGludml0YXRpb25zLmJ1aWxkaW5nSWQsXG4gICAgICAgICAgcmVzaWRlbmNlSWQ6IGludml0YXRpb25zLnJlc2lkZW5jZUlkLFxuICAgICAgICAgIG9yZ2FuaXphdGlvbk5hbWU6IG9yZ2FuaXphdGlvbnMubmFtZSxcbiAgICAgICAgICBidWlsZGluZ05hbWU6IHNxbDE0YGJ1aWxkaW5ncy5uYW1lYCxcbiAgICAgICAgICByZXNpZGVuY2VVbml0TnVtYmVyOiBzcWwxNGByZXNpZGVuY2VzLnVuaXRfbnVtYmVyYCxcbiAgICAgICAgICBpbnZpdGVkQnlOYW1lOiBzcWwxNGBDT05DQVQodXNlcnMuZmlyc3RfbmFtZSwgJyAnLCB1c2Vycy5sYXN0X25hbWUpYFxuICAgICAgICB9KS5mcm9tKGludml0YXRpb25zKS5sZWZ0Sm9pbihvcmdhbml6YXRpb25zLCBlcTQoaW52aXRhdGlvbnMub3JnYW5pemF0aW9uSWQsIG9yZ2FuaXphdGlvbnMuaWQpKS5sZWZ0Sm9pbihcbiAgICAgICAgICBzcWwxNGBidWlsZGluZ3NgLFxuICAgICAgICAgIHNxbDE0YGludml0YXRpb25zLmJ1aWxkaW5nX2lkID0gYnVpbGRpbmdzLmlkYFxuICAgICAgICApLmxlZnRKb2luKFxuICAgICAgICAgIHNxbDE0YHJlc2lkZW5jZXNgLFxuICAgICAgICAgIHNxbDE0YGludml0YXRpb25zLnJlc2lkZW5jZV9pZCA9IHJlc2lkZW5jZXMuaWRgXG4gICAgICAgICkubGVmdEpvaW4odXNlcnMsIGVxNChpbnZpdGF0aW9ucy5pbnZpdGVkQnlVc2VySWQsIHVzZXJzLmlkKSkud2hlcmUoXG4gICAgICAgICAgYW5kNChcbiAgICAgICAgICAgIGVxNChpbnZpdGF0aW9ucy5zdGF0dXMsIFwicGVuZGluZ1wiKSxcbiAgICAgICAgICAgIGluQXJyYXkzKGludml0YXRpb25zLm9yZ2FuaXphdGlvbklkLCBvcmdJZHMpXG4gICAgICAgICAgKVxuICAgICAgICApO1xuICAgICAgfVxuICAgICAgY29uc3QgaW52aXRhdGlvbnMyID0gYXdhaXQgaW52aXRhdGlvbnNRdWVyeTtcbiAgICAgIHJlcy5qc29uKGludml0YXRpb25zMik7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoXCJcXHUyNzRDIEVycm9yIGZldGNoaW5nIHBlbmRpbmcgaW52aXRhdGlvbnM6XCIsIGVycm9yKTtcbiAgICAgIHJlcy5zdGF0dXMoNTAwKS5qc29uKHtcbiAgICAgICAgZXJyb3I6IFwiSW50ZXJuYWwgc2VydmVyIGVycm9yXCIsXG4gICAgICAgIG1lc3NhZ2U6IFwiRmFpbGVkIHRvIGZldGNoIHBlbmRpbmcgaW52aXRhdGlvbnNcIlxuICAgICAgfSk7XG4gICAgfVxuICB9KTtcbiAgYXBwMi5kZWxldGUoXCIvYXBpL2ludml0YXRpb25zLzppZFwiLCByZXF1aXJlQXV0aCwgYXN5bmMgKHJlcSwgcmVzKSA9PiB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IGN1cnJlbnRVc2VyID0gcmVxLnVzZXIgfHwgcmVxLnNlc3Npb24/LnVzZXI7XG4gICAgICBjb25zdCB7IGlkOiBpbnZpdGF0aW9uSWQgfSA9IHJlcS5wYXJhbXM7XG4gICAgICBpZiAoIWN1cnJlbnRVc2VyKSB7XG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMSkuanNvbih7XG4gICAgICAgICAgbWVzc2FnZTogXCJBdXRoZW50aWNhdGlvbiByZXF1aXJlZFwiLFxuICAgICAgICAgIGNvZGU6IFwiQVVUSF9SRVFVSVJFRFwiXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgICAgaWYgKCFbXCJhZG1pblwiLCBcIm1hbmFnZXJcIl0uaW5jbHVkZXMoY3VycmVudFVzZXIucm9sZSkpIHtcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAzKS5qc29uKHtcbiAgICAgICAgICBtZXNzYWdlOiBcIkluc3VmZmljaWVudCBwZXJtaXNzaW9ucyB0byBkZWxldGUgaW52aXRhdGlvbnNcIixcbiAgICAgICAgICBjb2RlOiBcIklOU1VGRklDSUVOVF9QRVJNSVNTSU9OU1wiXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgICAgaWYgKCFpbnZpdGF0aW9uSWQpIHtcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHtcbiAgICAgICAgICBtZXNzYWdlOiBcIkludml0YXRpb24gSUQgaXMgcmVxdWlyZWRcIixcbiAgICAgICAgICBjb2RlOiBcIklOVkFMSURfUkVRVUVTVFwiXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgICAgY29uc3QgaW52aXRhdGlvbiA9IGF3YWl0IGRiLnNlbGVjdCgpLmZyb20oaW52aXRhdGlvbnMpLndoZXJlKGVxNChpbnZpdGF0aW9ucy5pZCwgaW52aXRhdGlvbklkKSkubGltaXQoMSk7XG4gICAgICBpZiAoaW52aXRhdGlvbi5sZW5ndGggPT09IDApIHtcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDA0KS5qc29uKHtcbiAgICAgICAgICBtZXNzYWdlOiBcIkludml0YXRpb24gbm90IGZvdW5kXCIsXG4gICAgICAgICAgY29kZTogXCJJTlZJVEFUSU9OX05PVF9GT1VORFwiXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgICAgY29uc3QgaW52aXRhdGlvbkRhdGEgPSBpbnZpdGF0aW9uWzBdO1xuICAgICAgaWYgKGN1cnJlbnRVc2VyLnJvbGUgPT09IFwibWFuYWdlclwiKSB7XG4gICAgICAgIGNvbnN0IG1hbmFnZXJPcmdzID0gYXdhaXQgZGIuc2VsZWN0KHsgb3JnYW5pemF0aW9uSWQ6IHVzZXJPcmdhbml6YXRpb25zLm9yZ2FuaXphdGlvbklkIH0pLmZyb20odXNlck9yZ2FuaXphdGlvbnMpLndoZXJlKFxuICAgICAgICAgIGFuZDQoXG4gICAgICAgICAgICBlcTQodXNlck9yZ2FuaXphdGlvbnMudXNlcklkLCBjdXJyZW50VXNlci5pZCksXG4gICAgICAgICAgICBlcTQodXNlck9yZ2FuaXphdGlvbnMuaXNBY3RpdmUsIHRydWUpXG4gICAgICAgICAgKVxuICAgICAgICApO1xuICAgICAgICBjb25zdCBvcmdJZHMgPSBtYW5hZ2VyT3Jncy5tYXAoKG9yZykgPT4gb3JnLm9yZ2FuaXphdGlvbklkKTtcbiAgICAgICAgaWYgKCFpbnZpdGF0aW9uRGF0YS5vcmdhbml6YXRpb25JZCB8fCAhb3JnSWRzLmluY2x1ZGVzKGludml0YXRpb25EYXRhLm9yZ2FuaXphdGlvbklkKSkge1xuICAgICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMykuanNvbih7XG4gICAgICAgICAgICBtZXNzYWdlOiBcIllvdSBjYW4gb25seSBkZWxldGUgaW52aXRhdGlvbnMgZnJvbSB5b3VyIG9yZ2FuaXphdGlvbnNcIixcbiAgICAgICAgICAgIGNvZGU6IFwiSU5TVUZGSUNJRU5UX1BFUk1JU1NJT05TXCJcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgYXdhaXQgZGIuZGVsZXRlKGludml0YXRpb25zKS53aGVyZShlcTQoaW52aXRhdGlvbnMuaWQsIGludml0YXRpb25JZCkpO1xuICAgICAgcmVzLmpzb24oe1xuICAgICAgICBtZXNzYWdlOiBcIkludml0YXRpb24gZGVsZXRlZCBzdWNjZXNzZnVsbHlcIixcbiAgICAgICAgaW52aXRhdGlvbklkXG4gICAgICB9KTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcihcIlxcdTI3NEMgRXJyb3IgZGVsZXRpbmcgaW52aXRhdGlvbjpcIiwgZXJyb3IpO1xuICAgICAgcmVzLnN0YXR1cyg1MDApLmpzb24oe1xuICAgICAgICBlcnJvcjogXCJJbnRlcm5hbCBzZXJ2ZXIgZXJyb3JcIixcbiAgICAgICAgbWVzc2FnZTogXCJGYWlsZWQgdG8gZGVsZXRlIGludml0YXRpb25cIlxuICAgICAgfSk7XG4gICAgfVxuICB9KTtcbn1cblxuLy8gc2VydmVyL2FwaS9idWlsZGluZ3MudHNcbmluaXRfZGIoKTtcbmluaXRfc2NoZW1hKCk7XG5pbXBvcnQgeyBlcSBhcyBlcTYsIGFuZCBhcyBhbmQ2LCBvciBhcyBvcjMsIGluQXJyYXkgYXMgaW5BcnJheTUsIHNxbCBhcyBzcWwxNSwgaXNOdWxsIGFzIGlzTnVsbDMgfSBmcm9tIFwiZHJpenpsZS1vcm1cIjtcbmltcG9ydCBjcnlwdG8zIGZyb20gXCJjcnlwdG9cIjtcbmZ1bmN0aW9uIHJlZ2lzdGVyQnVpbGRpbmdSb3V0ZXMoYXBwMikge1xuICBhcHAyLmdldChcIi9hcGkvYnVpbGRpbmdzXCIsIHJlcXVpcmVBdXRoLCBhc3luYyAocmVxLCByZXMpID0+IHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgdXNlciA9IHJlcS51c2VyO1xuICAgICAgaWYgKCF1c2VyKSB7XG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMSkuanNvbih7XG4gICAgICAgICAgbWVzc2FnZTogXCJBdXRoZW50aWNhdGlvbiByZXF1aXJlZFwiLFxuICAgICAgICAgIGNvZGU6IFwiQVVUSF9SRVFVSVJFRFwiXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgICAgaWYgKCFbXG4gICAgICAgIFwiYWRtaW5cIixcbiAgICAgICAgXCJtYW5hZ2VyXCIsXG4gICAgICAgIFwiZGVtb19tYW5hZ2VyXCIsXG4gICAgICAgIFwiZGVtb190ZW5hbnRcIixcbiAgICAgICAgXCJkZW1vX3Jlc2lkZW50XCIsXG4gICAgICAgIFwidGVuYW50XCIsXG4gICAgICAgIFwicmVzaWRlbnRcIlxuICAgICAgXS5pbmNsdWRlcyh1c2VyLnJvbGUpKSB7XG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMykuanNvbih7XG4gICAgICAgICAgbWVzc2FnZTogXCJBY2Nlc3MgZGVuaWVkLiBJbnN1ZmZpY2llbnQgcGVybWlzc2lvbnMuXCIsXG4gICAgICAgICAgY29kZTogXCJJTlNVRkZJQ0lFTlRfUEVSTUlTU0lPTlNcIlxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICAgIGNvbnNvbGUubG9nKFwiXFx1ezFGM0UyfSBbQnVpbGRpbmdzIEFQSV0gVXNlciBhY2Nlc3NpbmcgYnVpbGRpbmdzOlwiLCB7XG4gICAgICAgIGlkOiB1c2VyLmlkLFxuICAgICAgICByb2xlOiB1c2VyLnJvbGUsXG4gICAgICAgIG9yZ2FuaXphdGlvbnM6IHVzZXIub3JnYW5pemF0aW9ucyxcbiAgICAgICAgY2FuQWNjZXNzQWxsT3JnYW5pemF0aW9uczogdXNlci5jYW5BY2Nlc3NBbGxPcmdhbml6YXRpb25zXG4gICAgICB9KTtcbiAgICAgIGxldCBidWlsZGluZ3NRdWVyeTtcbiAgICAgIGlmICh1c2VyLnJvbGUgPT09IFwiYWRtaW5cIikge1xuICAgICAgICBjb25zb2xlLmxvZyhcbiAgICAgICAgICBgXFx1ezFGM0UyfSBbQlVJTERJTkdTIERFQlVHXSBBZG1pbiB1c2VyIGRldGVjdGVkIC0gZ3JhbnRpbmcgYWNjZXNzIHRvIEFMTCBidWlsZGluZ3NgXG4gICAgICAgICk7XG4gICAgICAgIGJ1aWxkaW5nc1F1ZXJ5ID0gZGIuc2VsZWN0KHtcbiAgICAgICAgICBpZDogYnVpbGRpbmdzLmlkLFxuICAgICAgICAgIG5hbWU6IGJ1aWxkaW5ncy5uYW1lLFxuICAgICAgICAgIGFkZHJlc3M6IGJ1aWxkaW5ncy5hZGRyZXNzLFxuICAgICAgICAgIGNpdHk6IGJ1aWxkaW5ncy5jaXR5LFxuICAgICAgICAgIHByb3ZpbmNlOiBidWlsZGluZ3MucHJvdmluY2UsXG4gICAgICAgICAgcG9zdGFsQ29kZTogYnVpbGRpbmdzLnBvc3RhbENvZGUsXG4gICAgICAgICAgYnVpbGRpbmdUeXBlOiBidWlsZGluZ3MuYnVpbGRpbmdUeXBlLFxuICAgICAgICAgIHllYXJCdWlsdDogYnVpbGRpbmdzLnllYXJCdWlsdCxcbiAgICAgICAgICB0b3RhbFVuaXRzOiBidWlsZGluZ3MudG90YWxVbml0cyxcbiAgICAgICAgICB0b3RhbEZsb29yczogYnVpbGRpbmdzLnRvdGFsRmxvb3JzLFxuICAgICAgICAgIHBhcmtpbmdTcGFjZXM6IGJ1aWxkaW5ncy5wYXJraW5nU3BhY2VzLFxuICAgICAgICAgIHN0b3JhZ2VTcGFjZXM6IGJ1aWxkaW5ncy5zdG9yYWdlU3BhY2VzLFxuICAgICAgICAgIG9yZ2FuaXphdGlvbklkOiBidWlsZGluZ3Mub3JnYW5pemF0aW9uSWQsXG4gICAgICAgICAgaXNBY3RpdmU6IGJ1aWxkaW5ncy5pc0FjdGl2ZSxcbiAgICAgICAgICBjcmVhdGVkQXQ6IGJ1aWxkaW5ncy5jcmVhdGVkQXQsXG4gICAgICAgICAgb3JnYW5pemF0aW9uTmFtZTogb3JnYW5pemF0aW9ucy5uYW1lXG4gICAgICAgIH0pLmZyb20oYnVpbGRpbmdzKS5pbm5lckpvaW4ob3JnYW5pemF0aW9ucywgZXE2KGJ1aWxkaW5ncy5vcmdhbml6YXRpb25JZCwgb3JnYW5pemF0aW9ucy5pZCkpLndoZXJlKGVxNihidWlsZGluZ3MuaXNBY3RpdmUsIHRydWUpKS5vcmRlckJ5KG9yZ2FuaXphdGlvbnMubmFtZSwgYnVpbGRpbmdzLm5hbWUpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY29uc29sZS5sb2coXG4gICAgICAgICAgYFxcdXsxRjUwRH0gW0JVSUxESU5HUyBERUJVR10gTm9uLWFkbWluIHVzZXIgKCR7dXNlci5yb2xlfSkgLSBjaGVja2luZyBvcmdhbml6YXRpb24gYWNjZXNzLiBVc2VyICR7dXNlci5pZH0gb3JnYW5pemF0aW9uczpgLFxuICAgICAgICAgIHVzZXIub3JnYW5pemF0aW9uc1xuICAgICAgICApO1xuICAgICAgICBpZiAoIXVzZXIub3JnYW5pemF0aW9ucyB8fCB1c2VyLm9yZ2FuaXphdGlvbnMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgY29uc29sZS5sb2coXG4gICAgICAgICAgICBgXFx1ezFGNTBEfSBbQlVJTERJTkdTIERFQlVHXSBVc2VyICR7dXNlci5pZH0gaGFzIG5vIG9yZ2FuaXphdGlvbnMsIGNoZWNraW5nIHJlc2lkZW5jZSBhY2Nlc3MuLi5gXG4gICAgICAgICAgKTtcbiAgICAgICAgICBpZiAoW1widGVuYW50XCIsIFwicmVzaWRlbnRcIiwgXCJkZW1vX3RlbmFudFwiLCBcImRlbW9fcmVzaWRlbnRcIl0uaW5jbHVkZXModXNlci5yb2xlKSkge1xuICAgICAgICAgICAgY29uc3QgdXNlclJlc2lkZW5jZXNMaXN0ID0gYXdhaXQgZGIuc2VsZWN0KHtcbiAgICAgICAgICAgICAgYnVpbGRpbmdJZDogcmVzaWRlbmNlcy5idWlsZGluZ0lkXG4gICAgICAgICAgICB9KS5mcm9tKHVzZXJSZXNpZGVuY2VzKS5pbm5lckpvaW4ocmVzaWRlbmNlcywgZXE2KHVzZXJSZXNpZGVuY2VzLnJlc2lkZW5jZUlkLCByZXNpZGVuY2VzLmlkKSkud2hlcmUoYW5kNihlcTYodXNlclJlc2lkZW5jZXMudXNlcklkLCB1c2VyLmlkKSwgZXE2KHVzZXJSZXNpZGVuY2VzLmlzQWN0aXZlLCB0cnVlKSkpO1xuICAgICAgICAgICAgY29uc29sZS5sb2coXG4gICAgICAgICAgICAgIGBcXHV7MUY1MER9IFtCVUlMRElOR1MgREVCVUddIEZvdW5kICR7dXNlclJlc2lkZW5jZXNMaXN0Lmxlbmd0aH0gcmVzaWRlbmNlcyBmb3IgdXNlciAke3VzZXIuaWR9YFxuICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIGlmICh1c2VyUmVzaWRlbmNlc0xpc3QubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICAgIHJldHVybiByZXMuanNvbihbXSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBhY2Nlc3NpYmxlQnVpbGRpbmdJZHMgPSBbXG4gICAgICAgICAgICAgIC4uLm5ldyBTZXQodXNlclJlc2lkZW5jZXNMaXN0Lm1hcCgodXIpID0+IHVyLmJ1aWxkaW5nSWQpKVxuICAgICAgICAgICAgXTtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGBcXHV7MUY1MER9IFtCVUlMRElOR1MgREVCVUddIEFjY2Vzc2libGUgYnVpbGRpbmcgSURzOmAsIGFjY2Vzc2libGVCdWlsZGluZ0lkcyk7XG4gICAgICAgICAgICBidWlsZGluZ3NRdWVyeSA9IGRiLnNlbGVjdCh7XG4gICAgICAgICAgICAgIGlkOiBidWlsZGluZ3MuaWQsXG4gICAgICAgICAgICAgIG5hbWU6IGJ1aWxkaW5ncy5uYW1lLFxuICAgICAgICAgICAgICBhZGRyZXNzOiBidWlsZGluZ3MuYWRkcmVzcyxcbiAgICAgICAgICAgICAgY2l0eTogYnVpbGRpbmdzLmNpdHksXG4gICAgICAgICAgICAgIHByb3ZpbmNlOiBidWlsZGluZ3MucHJvdmluY2UsXG4gICAgICAgICAgICAgIHBvc3RhbENvZGU6IGJ1aWxkaW5ncy5wb3N0YWxDb2RlLFxuICAgICAgICAgICAgICBidWlsZGluZ1R5cGU6IGJ1aWxkaW5ncy5idWlsZGluZ1R5cGUsXG4gICAgICAgICAgICAgIHllYXJCdWlsdDogYnVpbGRpbmdzLnllYXJCdWlsdCxcbiAgICAgICAgICAgICAgdG90YWxVbml0czogYnVpbGRpbmdzLnRvdGFsVW5pdHMsXG4gICAgICAgICAgICAgIHRvdGFsRmxvb3JzOiBidWlsZGluZ3MudG90YWxGbG9vcnMsXG4gICAgICAgICAgICAgIHBhcmtpbmdTcGFjZXM6IGJ1aWxkaW5ncy5wYXJraW5nU3BhY2VzLFxuICAgICAgICAgICAgICBzdG9yYWdlU3BhY2VzOiBidWlsZGluZ3Muc3RvcmFnZVNwYWNlcyxcbiAgICAgICAgICAgICAgb3JnYW5pemF0aW9uSWQ6IGJ1aWxkaW5ncy5vcmdhbml6YXRpb25JZCxcbiAgICAgICAgICAgICAgaXNBY3RpdmU6IGJ1aWxkaW5ncy5pc0FjdGl2ZSxcbiAgICAgICAgICAgICAgY3JlYXRlZEF0OiBidWlsZGluZ3MuY3JlYXRlZEF0LFxuICAgICAgICAgICAgICBvcmdhbml6YXRpb25OYW1lOiBvcmdhbml6YXRpb25zLm5hbWVcbiAgICAgICAgICAgIH0pLmZyb20oYnVpbGRpbmdzKS5pbm5lckpvaW4ob3JnYW5pemF0aW9ucywgZXE2KGJ1aWxkaW5ncy5vcmdhbml6YXRpb25JZCwgb3JnYW5pemF0aW9ucy5pZCkpLndoZXJlKFxuICAgICAgICAgICAgICBhbmQ2KGVxNihidWlsZGluZ3MuaXNBY3RpdmUsIHRydWUpLCBpbkFycmF5NShidWlsZGluZ3MuaWQsIGFjY2Vzc2libGVCdWlsZGluZ0lkcykpXG4gICAgICAgICAgICApLm9yZGVyQnkob3JnYW5pemF0aW9ucy5uYW1lLCBidWlsZGluZ3MubmFtZSk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGBcXHV7MUY1MER9IFtCVUlMRElOR1MgREVCVUddIE1hbmFnZXIvb3RoZXIgcm9sZSB1c2VyICR7dXNlci5pZH0gaGFzIG5vIG9yZ2FuaXphdGlvbnMgLSByZXR1cm5pbmcgZW1wdHkgcmVzdWx0YCk7XG4gICAgICAgICAgICByZXR1cm4gcmVzLmpzb24oW10pO1xuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBidWlsZGluZ3NRdWVyeSA9IGRiLnNlbGVjdCh7XG4gICAgICAgICAgICBpZDogYnVpbGRpbmdzLmlkLFxuICAgICAgICAgICAgbmFtZTogYnVpbGRpbmdzLm5hbWUsXG4gICAgICAgICAgICBhZGRyZXNzOiBidWlsZGluZ3MuYWRkcmVzcyxcbiAgICAgICAgICAgIGNpdHk6IGJ1aWxkaW5ncy5jaXR5LFxuICAgICAgICAgICAgcHJvdmluY2U6IGJ1aWxkaW5ncy5wcm92aW5jZSxcbiAgICAgICAgICAgIHBvc3RhbENvZGU6IGJ1aWxkaW5ncy5wb3N0YWxDb2RlLFxuICAgICAgICAgICAgYnVpbGRpbmdUeXBlOiBidWlsZGluZ3MuYnVpbGRpbmdUeXBlLFxuICAgICAgICAgICAgeWVhckJ1aWx0OiBidWlsZGluZ3MueWVhckJ1aWx0LFxuICAgICAgICAgICAgdG90YWxVbml0czogYnVpbGRpbmdzLnRvdGFsVW5pdHMsXG4gICAgICAgICAgICB0b3RhbEZsb29yczogYnVpbGRpbmdzLnRvdGFsRmxvb3JzLFxuICAgICAgICAgICAgcGFya2luZ1NwYWNlczogYnVpbGRpbmdzLnBhcmtpbmdTcGFjZXMsXG4gICAgICAgICAgICBzdG9yYWdlU3BhY2VzOiBidWlsZGluZ3Muc3RvcmFnZVNwYWNlcyxcbiAgICAgICAgICAgIG9yZ2FuaXphdGlvbklkOiBidWlsZGluZ3Mub3JnYW5pemF0aW9uSWQsXG4gICAgICAgICAgICBpc0FjdGl2ZTogYnVpbGRpbmdzLmlzQWN0aXZlLFxuICAgICAgICAgICAgY3JlYXRlZEF0OiBidWlsZGluZ3MuY3JlYXRlZEF0LFxuICAgICAgICAgICAgb3JnYW5pemF0aW9uTmFtZTogb3JnYW5pemF0aW9ucy5uYW1lXG4gICAgICAgICAgfSkuZnJvbShidWlsZGluZ3MpLmlubmVySm9pbihvcmdhbml6YXRpb25zLCBlcTYoYnVpbGRpbmdzLm9yZ2FuaXphdGlvbklkLCBvcmdhbml6YXRpb25zLmlkKSkud2hlcmUoXG4gICAgICAgICAgICBhbmQ2KFxuICAgICAgICAgICAgICBlcTYoYnVpbGRpbmdzLmlzQWN0aXZlLCB0cnVlKSxcbiAgICAgICAgICAgICAgaW5BcnJheTUoYnVpbGRpbmdzLm9yZ2FuaXphdGlvbklkLCB1c2VyLm9yZ2FuaXphdGlvbnMpXG4gICAgICAgICAgICApXG4gICAgICAgICAgKS5vcmRlckJ5KG9yZ2FuaXphdGlvbnMubmFtZSwgYnVpbGRpbmdzLm5hbWUpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBidWlsZGluZ3NRdWVyeTtcbiAgICAgIHJlcy5qc29uKHJlc3VsdCk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoXCJcXHUyNzRDIEVycm9yIGZldGNoaW5nIGJ1aWxkaW5nczpcIiwgZXJyb3IpO1xuICAgICAgcmVzLnN0YXR1cyg1MDApLmpzb24oe1xuICAgICAgICBfZXJyb3I6IFwiSW50ZXJuYWwgc2VydmVyIGVycm9yXCIsXG4gICAgICAgIG1lc3NhZ2U6IFwiRmFpbGVkIHRvIGZldGNoIGJ1aWxkaW5nc1wiXG4gICAgICB9KTtcbiAgICB9XG4gIH0pO1xuICBhcHAyLmdldChcIi9hcGkvbWFuYWdlci9idWlsZGluZ3NcIiwgYXN5bmMgKHJlcSwgcmVzKSA9PiB7XG4gICAgaWYgKCFyZXEuc2Vzc2lvbj8udXNlcklkICYmICFyZXEuc2Vzc2lvbj8udXNlcikge1xuICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAxKS5qc29uKHtcbiAgICAgICAgbWVzc2FnZTogXCJBdXRoZW50aWNhdGlvbiByZXF1aXJlZFwiLFxuICAgICAgICBjb2RlOiBcIkFVVEhfUkVRVUlSRURcIlxuICAgICAgfSk7XG4gICAgfVxuICAgIHRyeSB7XG4gICAgICBsZXQgY3VycmVudFVzZXIgPSByZXEudXNlciB8fCByZXEuc2Vzc2lvbj8udXNlcjtcbiAgICAgIGlmICghY3VycmVudFVzZXIgJiYgcmVxLnNlc3Npb24/LnVzZXJJZCkge1xuICAgICAgICBjb25zdCB7IHN0b3JhZ2U6IHN0b3JhZ2UzIH0gPSBhd2FpdCBQcm9taXNlLnJlc29sdmUoKS50aGVuKCgpID0+IChpbml0X3N0b3JhZ2UoKSwgc3RvcmFnZV9leHBvcnRzKSk7XG4gICAgICAgIGN1cnJlbnRVc2VyID0gYXdhaXQgc3RvcmFnZTMuZ2V0VXNlcihyZXEuc2Vzc2lvbi51c2VySWQpO1xuICAgICAgfVxuICAgICAgaWYgKCFjdXJyZW50VXNlcikge1xuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDEpLmpzb24oe1xuICAgICAgICAgIG1lc3NhZ2U6IFwiVXNlciBub3QgZm91bmRcIixcbiAgICAgICAgICBjb2RlOiBcIlVTRVJfTk9UX0ZPVU5EXCJcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgICBjb25zb2xlLmxvZyhcbiAgICAgICAgYFxcdXsxRjRDQX0gRmV0Y2hpbmcgYnVpbGRpbmdzIGZvciB1c2VyICR7Y3VycmVudFVzZXIuaWR9IHdpdGggcm9sZSAke2N1cnJlbnRVc2VyLnJvbGV9YFxuICAgICAgKTtcbiAgICAgIGNvbnN0IGFjY2Vzc2libGVCdWlsZGluZ3MgPSBbXTtcbiAgICAgIGNvbnN0IGJ1aWxkaW5nSWRzID0gLyogQF9fUFVSRV9fICovIG5ldyBTZXQoKTtcbiAgICAgIGNvbnN0IHVzZXJPcmdzID0gYXdhaXQgZGIuc2VsZWN0KHtcbiAgICAgICAgb3JnYW5pemF0aW9uSWQ6IHVzZXJPcmdhbml6YXRpb25zLm9yZ2FuaXphdGlvbklkLFxuICAgICAgICBvcmdhbml6YXRpb25OYW1lOiBvcmdhbml6YXRpb25zLm5hbWUsXG4gICAgICAgIGNhbkFjY2Vzc0FsbE9yZ2FuaXphdGlvbnM6IHVzZXJPcmdhbml6YXRpb25zLmNhbkFjY2Vzc0FsbE9yZ2FuaXphdGlvbnNcbiAgICAgIH0pLmZyb20odXNlck9yZ2FuaXphdGlvbnMpLmlubmVySm9pbihvcmdhbml6YXRpb25zLCBlcTYodXNlck9yZ2FuaXphdGlvbnMub3JnYW5pemF0aW9uSWQsIG9yZ2FuaXphdGlvbnMuaWQpKS53aGVyZShcbiAgICAgICAgYW5kNihlcTYodXNlck9yZ2FuaXphdGlvbnMudXNlcklkLCBjdXJyZW50VXNlci5pZCksIGVxNih1c2VyT3JnYW5pemF0aW9ucy5pc0FjdGl2ZSwgdHJ1ZSkpXG4gICAgICApO1xuICAgICAgY29uc3QgaGFzR2xvYmFsQWNjZXNzID0gY3VycmVudFVzZXIucm9sZSA9PT0gXCJhZG1pblwiIHx8IHVzZXJPcmdzLnNvbWUoKG9yZykgPT4gb3JnLm9yZ2FuaXphdGlvbk5hbWUgPT09IFwiS292ZW9cIiB8fCBvcmcuY2FuQWNjZXNzQWxsT3JnYW5pemF0aW9ucyk7XG4gICAgICBpZiAoaGFzR2xvYmFsQWNjZXNzKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKFxuICAgICAgICAgIGBcXHV7MUYzMUZ9IEFkbWluIHVzZXIgb3IgdXNlciB3aXRoIGdsb2JhbCBhY2Nlc3MgZGV0ZWN0ZWQgLSBncmFudGluZyBhY2Nlc3MgdG8gQUxMIGJ1aWxkaW5nc2BcbiAgICAgICAgKTtcbiAgICAgICAgY29uc3QgYWxsQnVpbGRpbmdzID0gYXdhaXQgZGIuc2VsZWN0KHtcbiAgICAgICAgICBpZDogYnVpbGRpbmdzLmlkLFxuICAgICAgICAgIG5hbWU6IGJ1aWxkaW5ncy5uYW1lLFxuICAgICAgICAgIGFkZHJlc3M6IGJ1aWxkaW5ncy5hZGRyZXNzLFxuICAgICAgICAgIGNpdHk6IGJ1aWxkaW5ncy5jaXR5LFxuICAgICAgICAgIHByb3ZpbmNlOiBidWlsZGluZ3MucHJvdmluY2UsXG4gICAgICAgICAgcG9zdGFsQ29kZTogYnVpbGRpbmdzLnBvc3RhbENvZGUsXG4gICAgICAgICAgYnVpbGRpbmdUeXBlOiBidWlsZGluZ3MuYnVpbGRpbmdUeXBlLFxuICAgICAgICAgIHllYXJCdWlsdDogYnVpbGRpbmdzLnllYXJCdWlsdCxcbiAgICAgICAgICB0b3RhbFVuaXRzOiBidWlsZGluZ3MudG90YWxVbml0cyxcbiAgICAgICAgICB0b3RhbEZsb29yczogYnVpbGRpbmdzLnRvdGFsRmxvb3JzLFxuICAgICAgICAgIHBhcmtpbmdTcGFjZXM6IGJ1aWxkaW5ncy5wYXJraW5nU3BhY2VzLFxuICAgICAgICAgIHN0b3JhZ2VTcGFjZXM6IGJ1aWxkaW5ncy5zdG9yYWdlU3BhY2VzLFxuICAgICAgICAgIGFtZW5pdGllczogYnVpbGRpbmdzLmFtZW5pdGllcyxcbiAgICAgICAgICBtYW5hZ2VtZW50Q29tcGFueTogYnVpbGRpbmdzLm1hbmFnZW1lbnRDb21wYW55LFxuICAgICAgICAgIG9yZ2FuaXphdGlvbklkOiBidWlsZGluZ3Mub3JnYW5pemF0aW9uSWQsXG4gICAgICAgICAgaXNBY3RpdmU6IGJ1aWxkaW5ncy5pc0FjdGl2ZSxcbiAgICAgICAgICBjcmVhdGVkQXQ6IGJ1aWxkaW5ncy5jcmVhdGVkQXQsXG4gICAgICAgICAgdXBkYXRlZEF0OiBidWlsZGluZ3MudXBkYXRlZEF0LFxuICAgICAgICAgIG9yZ2FuaXphdGlvbk5hbWU6IG9yZ2FuaXphdGlvbnMubmFtZSxcbiAgICAgICAgICBvcmdhbml6YXRpb25UeXBlOiBvcmdhbml6YXRpb25zLnR5cGVcbiAgICAgICAgfSkuZnJvbShidWlsZGluZ3MpLmlubmVySm9pbihvcmdhbml6YXRpb25zLCBlcTYoYnVpbGRpbmdzLm9yZ2FuaXphdGlvbklkLCBvcmdhbml6YXRpb25zLmlkKSkud2hlcmUoZXE2KGJ1aWxkaW5ncy5pc0FjdGl2ZSwgdHJ1ZSkpLm9yZGVyQnkob3JnYW5pemF0aW9ucy5uYW1lLCBidWlsZGluZ3MubmFtZSk7XG4gICAgICAgIGFsbEJ1aWxkaW5ncy5mb3JFYWNoKChidWlsZGluZykgPT4ge1xuICAgICAgICAgIGlmICghYnVpbGRpbmdJZHMuaGFzKGJ1aWxkaW5nLmlkKSkge1xuICAgICAgICAgICAgYnVpbGRpbmdJZHMuYWRkKGJ1aWxkaW5nLmlkKTtcbiAgICAgICAgICAgIGFjY2Vzc2libGVCdWlsZGluZ3MucHVzaCh7XG4gICAgICAgICAgICAgIC4uLmJ1aWxkaW5nLFxuICAgICAgICAgICAgICBhY2Nlc3NUeXBlOiBcImtvdmVvLWdsb2JhbFwiXG4gICAgICAgICAgICAgIC8vIFNwZWNpYWwgYWNjZXNzIHR5cGUgZm9yIEtvdmVvIHVzZXJzXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgaWYgKGN1cnJlbnRVc2VyLnJvbGUgPT09IFwiYWRtaW5cIiB8fCBjdXJyZW50VXNlci5yb2xlID09PSBcIm1hbmFnZXJcIikge1xuICAgICAgICAgIGlmICh1c2VyT3Jncy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICBjb25zdCBvcmdJZHMgPSB1c2VyT3Jncy5tYXAoKHVvKSA9PiB1by5vcmdhbml6YXRpb25JZCk7XG4gICAgICAgICAgICBjb25zdCBvcmdCdWlsZGluZ3MgPSBhd2FpdCBkYi5zZWxlY3Qoe1xuICAgICAgICAgICAgICBpZDogYnVpbGRpbmdzLmlkLFxuICAgICAgICAgICAgICBuYW1lOiBidWlsZGluZ3MubmFtZSxcbiAgICAgICAgICAgICAgYWRkcmVzczogYnVpbGRpbmdzLmFkZHJlc3MsXG4gICAgICAgICAgICAgIGNpdHk6IGJ1aWxkaW5ncy5jaXR5LFxuICAgICAgICAgICAgICBwcm92aW5jZTogYnVpbGRpbmdzLnByb3ZpbmNlLFxuICAgICAgICAgICAgICBwb3N0YWxDb2RlOiBidWlsZGluZ3MucG9zdGFsQ29kZSxcbiAgICAgICAgICAgICAgYnVpbGRpbmdUeXBlOiBidWlsZGluZ3MuYnVpbGRpbmdUeXBlLFxuICAgICAgICAgICAgICB5ZWFyQnVpbHQ6IGJ1aWxkaW5ncy55ZWFyQnVpbHQsXG4gICAgICAgICAgICAgIHRvdGFsVW5pdHM6IGJ1aWxkaW5ncy50b3RhbFVuaXRzLFxuICAgICAgICAgICAgICB0b3RhbEZsb29yczogYnVpbGRpbmdzLnRvdGFsRmxvb3JzLFxuICAgICAgICAgICAgICBwYXJraW5nU3BhY2VzOiBidWlsZGluZ3MucGFya2luZ1NwYWNlcyxcbiAgICAgICAgICAgICAgc3RvcmFnZVNwYWNlczogYnVpbGRpbmdzLnN0b3JhZ2VTcGFjZXMsXG4gICAgICAgICAgICAgIGFtZW5pdGllczogYnVpbGRpbmdzLmFtZW5pdGllcyxcbiAgICAgICAgICAgICAgbWFuYWdlbWVudENvbXBhbnk6IGJ1aWxkaW5ncy5tYW5hZ2VtZW50Q29tcGFueSxcbiAgICAgICAgICAgICAgb3JnYW5pemF0aW9uSWQ6IGJ1aWxkaW5ncy5vcmdhbml6YXRpb25JZCxcbiAgICAgICAgICAgICAgaXNBY3RpdmU6IGJ1aWxkaW5ncy5pc0FjdGl2ZSxcbiAgICAgICAgICAgICAgY3JlYXRlZEF0OiBidWlsZGluZ3MuY3JlYXRlZEF0LFxuICAgICAgICAgICAgICB1cGRhdGVkQXQ6IGJ1aWxkaW5ncy51cGRhdGVkQXQsXG4gICAgICAgICAgICAgIG9yZ2FuaXphdGlvbk5hbWU6IG9yZ2FuaXphdGlvbnMubmFtZSxcbiAgICAgICAgICAgICAgb3JnYW5pemF0aW9uVHlwZTogb3JnYW5pemF0aW9ucy50eXBlXG4gICAgICAgICAgICB9KS5mcm9tKGJ1aWxkaW5ncykuaW5uZXJKb2luKG9yZ2FuaXphdGlvbnMsIGVxNihidWlsZGluZ3Mub3JnYW5pemF0aW9uSWQsIG9yZ2FuaXphdGlvbnMuaWQpKS53aGVyZShhbmQ2KGluQXJyYXk1KGJ1aWxkaW5ncy5vcmdhbml6YXRpb25JZCwgb3JnSWRzKSwgZXE2KGJ1aWxkaW5ncy5pc0FjdGl2ZSwgdHJ1ZSkpKTtcbiAgICAgICAgICAgIG9yZ0J1aWxkaW5ncy5mb3JFYWNoKChidWlsZGluZykgPT4ge1xuICAgICAgICAgICAgICBpZiAoIWJ1aWxkaW5nSWRzLmhhcyhidWlsZGluZy5pZCkpIHtcbiAgICAgICAgICAgICAgICBidWlsZGluZ0lkcy5hZGQoYnVpbGRpbmcuaWQpO1xuICAgICAgICAgICAgICAgIGFjY2Vzc2libGVCdWlsZGluZ3MucHVzaCh7XG4gICAgICAgICAgICAgICAgICAuLi5idWlsZGluZyxcbiAgICAgICAgICAgICAgICAgIGFjY2Vzc1R5cGU6IFwib3JnYW5pemF0aW9uXCJcbiAgICAgICAgICAgICAgICAgIC8vIFRyYWNrIGhvdyB1c2VyIGhhcyBhY2Nlc3NcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgICBjb25zdCB1c2VyUmVzaWRlbmNlUmVjb3JkcyA9IGF3YWl0IGRiLnNlbGVjdCh7XG4gICAgICAgIHJlc2lkZW5jZUlkOiB1c2VyUmVzaWRlbmNlcy5yZXNpZGVuY2VJZCxcbiAgICAgICAgcmVsYXRpb25zaGlwVHlwZTogdXNlclJlc2lkZW5jZXMucmVsYXRpb25zaGlwVHlwZVxuICAgICAgfSkuZnJvbSh1c2VyUmVzaWRlbmNlcykud2hlcmUoYW5kNihlcTYodXNlclJlc2lkZW5jZXMudXNlcklkLCBjdXJyZW50VXNlci5pZCksIGVxNih1c2VyUmVzaWRlbmNlcy5pc0FjdGl2ZSwgdHJ1ZSkpKTtcbiAgICAgIGlmICh1c2VyUmVzaWRlbmNlUmVjb3Jkcy5sZW5ndGggPiAwKSB7XG4gICAgICAgIGNvbnN0IHJlc2lkZW5jZUlkcyA9IHVzZXJSZXNpZGVuY2VSZWNvcmRzLm1hcCgodXIpID0+IHVyLnJlc2lkZW5jZUlkKTtcbiAgICAgICAgY29uc3QgcmVzaWRlbmNlQnVpbGRpbmdzID0gYXdhaXQgZGIuc2VsZWN0KHtcbiAgICAgICAgICBpZDogYnVpbGRpbmdzLmlkLFxuICAgICAgICAgIG5hbWU6IGJ1aWxkaW5ncy5uYW1lLFxuICAgICAgICAgIGFkZHJlc3M6IGJ1aWxkaW5ncy5hZGRyZXNzLFxuICAgICAgICAgIGNpdHk6IGJ1aWxkaW5ncy5jaXR5LFxuICAgICAgICAgIHByb3ZpbmNlOiBidWlsZGluZ3MucHJvdmluY2UsXG4gICAgICAgICAgcG9zdGFsQ29kZTogYnVpbGRpbmdzLnBvc3RhbENvZGUsXG4gICAgICAgICAgYnVpbGRpbmdUeXBlOiBidWlsZGluZ3MuYnVpbGRpbmdUeXBlLFxuICAgICAgICAgIHllYXJCdWlsdDogYnVpbGRpbmdzLnllYXJCdWlsdCxcbiAgICAgICAgICB0b3RhbFVuaXRzOiBidWlsZGluZ3MudG90YWxVbml0cyxcbiAgICAgICAgICB0b3RhbEZsb29yczogYnVpbGRpbmdzLnRvdGFsRmxvb3JzLFxuICAgICAgICAgIHBhcmtpbmdTcGFjZXM6IGJ1aWxkaW5ncy5wYXJraW5nU3BhY2VzLFxuICAgICAgICAgIHN0b3JhZ2VTcGFjZXM6IGJ1aWxkaW5ncy5zdG9yYWdlU3BhY2VzLFxuICAgICAgICAgIGFtZW5pdGllczogYnVpbGRpbmdzLmFtZW5pdGllcyxcbiAgICAgICAgICBtYW5hZ2VtZW50Q29tcGFueTogYnVpbGRpbmdzLm1hbmFnZW1lbnRDb21wYW55LFxuICAgICAgICAgIG9yZ2FuaXphdGlvbklkOiBidWlsZGluZ3Mub3JnYW5pemF0aW9uSWQsXG4gICAgICAgICAgaXNBY3RpdmU6IGJ1aWxkaW5ncy5pc0FjdGl2ZSxcbiAgICAgICAgICBjcmVhdGVkQXQ6IGJ1aWxkaW5ncy5jcmVhdGVkQXQsXG4gICAgICAgICAgdXBkYXRlZEF0OiBidWlsZGluZ3MudXBkYXRlZEF0LFxuICAgICAgICAgIG9yZ2FuaXphdGlvbk5hbWU6IG9yZ2FuaXphdGlvbnMubmFtZSxcbiAgICAgICAgICBvcmdhbml6YXRpb25UeXBlOiBvcmdhbml6YXRpb25zLnR5cGUsXG4gICAgICAgICAgcmVzaWRlbmNlSWQ6IHJlc2lkZW5jZXMuaWQsXG4gICAgICAgICAgdW5pdE51bWJlcjogcmVzaWRlbmNlcy51bml0TnVtYmVyLFxuICAgICAgICAgIGZsb29yOiByZXNpZGVuY2VzLmZsb29yXG4gICAgICAgIH0pLmZyb20ocmVzaWRlbmNlcykuaW5uZXJKb2luKGJ1aWxkaW5ncywgZXE2KHJlc2lkZW5jZXMuYnVpbGRpbmdJZCwgYnVpbGRpbmdzLmlkKSkuaW5uZXJKb2luKG9yZ2FuaXphdGlvbnMsIGVxNihidWlsZGluZ3Mub3JnYW5pemF0aW9uSWQsIG9yZ2FuaXphdGlvbnMuaWQpKS53aGVyZShhbmQ2KGluQXJyYXk1KHJlc2lkZW5jZXMuaWQsIHJlc2lkZW5jZUlkcyksIGVxNihidWlsZGluZ3MuaXNBY3RpdmUsIHRydWUpKSk7XG4gICAgICAgIHJlc2lkZW5jZUJ1aWxkaW5ncy5mb3JFYWNoKChidWlsZGluZykgPT4ge1xuICAgICAgICAgIGlmICghYnVpbGRpbmdJZHMuaGFzKGJ1aWxkaW5nLmlkKSkge1xuICAgICAgICAgICAgYnVpbGRpbmdJZHMuYWRkKGJ1aWxkaW5nLmlkKTtcbiAgICAgICAgICAgIGFjY2Vzc2libGVCdWlsZGluZ3MucHVzaCh7XG4gICAgICAgICAgICAgIGlkOiBidWlsZGluZy5pZCxcbiAgICAgICAgICAgICAgbmFtZTogYnVpbGRpbmcubmFtZSxcbiAgICAgICAgICAgICAgYWRkcmVzczogYnVpbGRpbmcuYWRkcmVzcyxcbiAgICAgICAgICAgICAgY2l0eTogYnVpbGRpbmcuY2l0eSxcbiAgICAgICAgICAgICAgcHJvdmluY2U6IGJ1aWxkaW5nLnByb3ZpbmNlLFxuICAgICAgICAgICAgICBwb3N0YWxDb2RlOiBidWlsZGluZy5wb3N0YWxDb2RlLFxuICAgICAgICAgICAgICBidWlsZGluZ1R5cGU6IGJ1aWxkaW5nLmJ1aWxkaW5nVHlwZSxcbiAgICAgICAgICAgICAgeWVhckJ1aWx0OiBidWlsZGluZy55ZWFyQnVpbHQsXG4gICAgICAgICAgICAgIHRvdGFsVW5pdHM6IGJ1aWxkaW5nLnRvdGFsVW5pdHMsXG4gICAgICAgICAgICAgIHRvdGFsRmxvb3JzOiBidWlsZGluZy50b3RhbEZsb29ycyxcbiAgICAgICAgICAgICAgcGFya2luZ1NwYWNlczogYnVpbGRpbmcucGFya2luZ1NwYWNlcyxcbiAgICAgICAgICAgICAgc3RvcmFnZVNwYWNlczogYnVpbGRpbmcuc3RvcmFnZVNwYWNlcyxcbiAgICAgICAgICAgICAgYW1lbml0aWVzOiBidWlsZGluZy5hbWVuaXRpZXMsXG4gICAgICAgICAgICAgIG1hbmFnZW1lbnRDb21wYW55OiBidWlsZGluZy5tYW5hZ2VtZW50Q29tcGFueSxcbiAgICAgICAgICAgICAgb3JnYW5pemF0aW9uSWQ6IGJ1aWxkaW5nLm9yZ2FuaXphdGlvbklkLFxuICAgICAgICAgICAgICBpc0FjdGl2ZTogYnVpbGRpbmcuaXNBY3RpdmUsXG4gICAgICAgICAgICAgIGNyZWF0ZWRBdDogYnVpbGRpbmcuY3JlYXRlZEF0LFxuICAgICAgICAgICAgICB1cGRhdGVkQXQ6IGJ1aWxkaW5nLnVwZGF0ZWRBdCxcbiAgICAgICAgICAgICAgb3JnYW5pemF0aW9uTmFtZTogYnVpbGRpbmcub3JnYW5pemF0aW9uTmFtZSxcbiAgICAgICAgICAgICAgb3JnYW5pemF0aW9uVHlwZTogYnVpbGRpbmcub3JnYW5pemF0aW9uVHlwZSxcbiAgICAgICAgICAgICAgYWNjZXNzVHlwZTogXCJyZXNpZGVuY2VcIixcbiAgICAgICAgICAgICAgLy8gVHJhY2sgaG93IHVzZXIgaGFzIGFjY2Vzc1xuICAgICAgICAgICAgICB1c2VyUmVzaWRlbmNlOiB7XG4gICAgICAgICAgICAgICAgcmVzaWRlbmNlSWQ6IGJ1aWxkaW5nLnJlc2lkZW5jZUlkLFxuICAgICAgICAgICAgICAgIHVuaXROdW1iZXI6IGJ1aWxkaW5nLnVuaXROdW1iZXIsXG4gICAgICAgICAgICAgICAgZmxvb3I6IGJ1aWxkaW5nLmZsb29yXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjb25zdCBleGlzdGluZ0J1aWxkaW5nID0gYWNjZXNzaWJsZUJ1aWxkaW5ncy5maW5kKChiKSA9PiBiLmlkID09PSBidWlsZGluZy5pZCk7XG4gICAgICAgICAgICBpZiAoZXhpc3RpbmdCdWlsZGluZyAmJiAhZXhpc3RpbmdCdWlsZGluZy51c2VyUmVzaWRlbmNlKSB7XG4gICAgICAgICAgICAgIGV4aXN0aW5nQnVpbGRpbmcudXNlclJlc2lkZW5jZSA9IHtcbiAgICAgICAgICAgICAgICByZXNpZGVuY2VJZDogYnVpbGRpbmcucmVzaWRlbmNlSWQsXG4gICAgICAgICAgICAgICAgdW5pdE51bWJlcjogYnVpbGRpbmcudW5pdE51bWJlcixcbiAgICAgICAgICAgICAgICBmbG9vcjogYnVpbGRpbmcuZmxvb3JcbiAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgaWYgKGV4aXN0aW5nQnVpbGRpbmcuYWNjZXNzVHlwZSA9PT0gXCJvcmdhbml6YXRpb25cIikge1xuICAgICAgICAgICAgICAgIGV4aXN0aW5nQnVpbGRpbmcuYWNjZXNzVHlwZSA9IFwiYm90aFwiO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICAgIGNvbnN0IGJ1aWxkaW5nc1dpdGhTdGF0cyA9IGF3YWl0IFByb21pc2UuYWxsKFxuICAgICAgICBhY2Nlc3NpYmxlQnVpbGRpbmdzLm1hcChhc3luYyAoYnVpbGRpbmcpID0+IHtcbiAgICAgICAgICBjb25zdCByZXNpZGVuY2VDb3VudCA9IGF3YWl0IGRiLnNlbGVjdCh7IGNvdW50OiBzcWwxNWBjb3VudCgqKTo6aW50YCB9KS5mcm9tKHJlc2lkZW5jZXMpLndoZXJlKGFuZDYoZXE2KHJlc2lkZW5jZXMuYnVpbGRpbmdJZCwgYnVpbGRpbmcuaWQpLCBlcTYocmVzaWRlbmNlcy5pc0FjdGl2ZSwgdHJ1ZSkpKTtcbiAgICAgICAgICBjb25zdCBvY2N1cGllZFVuaXRzID0gcmVzaWRlbmNlQ291bnRbMF0/LmNvdW50IHx8IDA7XG4gICAgICAgICAgY29uc3Qgb2NjdXBhbmN5UmF0ZSA9IGJ1aWxkaW5nLnRvdGFsVW5pdHMgPiAwID8gTWF0aC5yb3VuZChvY2N1cGllZFVuaXRzIC8gYnVpbGRpbmcudG90YWxVbml0cyAqIDEwMCkgOiAwO1xuICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAuLi5idWlsZGluZyxcbiAgICAgICAgICAgIHN0YXRpc3RpY3M6IHtcbiAgICAgICAgICAgICAgdG90YWxVbml0czogYnVpbGRpbmcudG90YWxVbml0cyxcbiAgICAgICAgICAgICAgb2NjdXBpZWRVbml0cyxcbiAgICAgICAgICAgICAgb2NjdXBhbmN5UmF0ZSxcbiAgICAgICAgICAgICAgdmFjYW50VW5pdHM6IGJ1aWxkaW5nLnRvdGFsVW5pdHMgLSBvY2N1cGllZFVuaXRzXG4gICAgICAgICAgICB9XG4gICAgICAgICAgfTtcbiAgICAgICAgfSlcbiAgICAgICk7XG4gICAgICBidWlsZGluZ3NXaXRoU3RhdHMuc29ydCgoYSwgYikgPT4gYS5uYW1lLmxvY2FsZUNvbXBhcmUoYi5uYW1lKSk7XG4gICAgICBjb25zb2xlLmxvZyhcbiAgICAgICAgYFxcdTI3MDUgRm91bmQgJHtidWlsZGluZ3NXaXRoU3RhdHMubGVuZ3RofSBhY2Nlc3NpYmxlIGJ1aWxkaW5ncyBmb3IgdXNlciAke2N1cnJlbnRVc2VyLmlkfWBcbiAgICAgICk7XG4gICAgICByZXMuanNvbih7XG4gICAgICAgIGJ1aWxkaW5nczogYnVpbGRpbmdzV2l0aFN0YXRzLFxuICAgICAgICBtZXRhOiB7XG4gICAgICAgICAgdG90YWw6IGJ1aWxkaW5nc1dpdGhTdGF0cy5sZW5ndGgsXG4gICAgICAgICAgdXNlclJvbGU6IGN1cnJlbnRVc2VyLnJvbGUsXG4gICAgICAgICAgdXNlcklkOiBjdXJyZW50VXNlci5pZFxuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcihcIlxcdTI3NEMgRXJyb3IgZmV0Y2hpbmcgbWFuYWdlciBidWlsZGluZ3M6XCIsIGVycm9yKTtcbiAgICAgIHJlcy5zdGF0dXMoNTAwKS5qc29uKHtcbiAgICAgICAgX2Vycm9yOiBcIkludGVybmFsIHNlcnZlciBlcnJvclwiLFxuICAgICAgICBtZXNzYWdlOiBcIkZhaWxlZCB0byBmZXRjaCBidWlsZGluZ3NcIlxuICAgICAgfSk7XG4gICAgfVxuICB9KTtcbiAgYXBwMi5nZXQoXCIvYXBpL21hbmFnZXIvYnVpbGRpbmdzLzppZFwiLCByZXF1aXJlQXV0aCwgYXN5bmMgKHJlcSwgcmVzKSA9PiB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IGN1cnJlbnRVc2VyID0gcmVxLnVzZXI7XG4gICAgICBjb25zdCBidWlsZGluZ0lkID0gcmVxLnBhcmFtcy5pZDtcbiAgICAgIGlmICghY3VycmVudFVzZXIpIHtcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAxKS5qc29uKHtcbiAgICAgICAgICBfZXJyb3I6IFwiVW5hdXRob3JpemVkXCIsXG4gICAgICAgICAgbWVzc2FnZTogXCJBdXRoZW50aWNhdGlvbiByZXF1aXJlZFwiXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgICAgY29uc29sZS5sb2coXG4gICAgICAgIGBcXHV7MUY0Q0F9IEZldGNoaW5nIGJ1aWxkaW5nICR7YnVpbGRpbmdJZH0gZm9yIHVzZXIgJHtjdXJyZW50VXNlci5pZH0gd2l0aCByb2xlICR7Y3VycmVudFVzZXIucm9sZX1gXG4gICAgICApO1xuICAgICAgbGV0IGhhc0FjY2VzcyA9IGZhbHNlO1xuICAgICAgbGV0IGFjY2Vzc1R5cGUgPSBcIlwiO1xuICAgICAgY29uc3QgdXNlck9yZ3MgPSBhd2FpdCBkYi5zZWxlY3Qoe1xuICAgICAgICBvcmdhbml6YXRpb25JZDogdXNlck9yZ2FuaXphdGlvbnMub3JnYW5pemF0aW9uSWQsXG4gICAgICAgIG9yZ2FuaXphdGlvbk5hbWU6IG9yZ2FuaXphdGlvbnMubmFtZSxcbiAgICAgICAgY2FuQWNjZXNzQWxsT3JnYW5pemF0aW9uczogdXNlck9yZ2FuaXphdGlvbnMuY2FuQWNjZXNzQWxsT3JnYW5pemF0aW9uc1xuICAgICAgfSkuZnJvbSh1c2VyT3JnYW5pemF0aW9ucykuaW5uZXJKb2luKG9yZ2FuaXphdGlvbnMsIGVxNih1c2VyT3JnYW5pemF0aW9ucy5vcmdhbml6YXRpb25JZCwgb3JnYW5pemF0aW9ucy5pZCkpLndoZXJlKFxuICAgICAgICBhbmQ2KGVxNih1c2VyT3JnYW5pemF0aW9ucy51c2VySWQsIGN1cnJlbnRVc2VyLmlkKSwgZXE2KHVzZXJPcmdhbml6YXRpb25zLmlzQWN0aXZlLCB0cnVlKSlcbiAgICAgICk7XG4gICAgICBjb25zdCBoYXNHbG9iYWxBY2Nlc3MgPSBjdXJyZW50VXNlci5yb2xlID09PSBcImFkbWluXCIgfHwgdXNlck9yZ3Muc29tZSgob3JnKSA9PiBvcmcub3JnYW5pemF0aW9uTmFtZSA9PT0gXCJLb3Zlb1wiIHx8IG9yZy5jYW5BY2Nlc3NBbGxPcmdhbml6YXRpb25zKTtcbiAgICAgIGlmIChoYXNHbG9iYWxBY2Nlc3MpIHtcbiAgICAgICAgaGFzQWNjZXNzID0gdHJ1ZTtcbiAgICAgICAgYWNjZXNzVHlwZSA9IFwiZ2xvYmFsXCI7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBpZiAoY3VycmVudFVzZXIucm9sZSA9PT0gXCJhZG1pblwiIHx8IGN1cnJlbnRVc2VyLnJvbGUgPT09IFwibWFuYWdlclwiKSB7XG4gICAgICAgICAgaWYgKHVzZXJPcmdzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIGNvbnN0IG9yZ0lkcyA9IHVzZXJPcmdzLm1hcCgodW8pID0+IHVvLm9yZ2FuaXphdGlvbklkKTtcbiAgICAgICAgICAgIGNvbnN0IGJ1aWxkaW5nT3JnID0gYXdhaXQgZGIuc2VsZWN0KHsgaWQ6IGJ1aWxkaW5ncy5pZCB9KS5mcm9tKGJ1aWxkaW5ncykud2hlcmUoXG4gICAgICAgICAgICAgIGFuZDYoXG4gICAgICAgICAgICAgICAgZXE2KGJ1aWxkaW5ncy5pZCwgYnVpbGRpbmdJZCksXG4gICAgICAgICAgICAgICAgaW5BcnJheTUoYnVpbGRpbmdzLm9yZ2FuaXphdGlvbklkLCBvcmdJZHMpLFxuICAgICAgICAgICAgICAgIGVxNihidWlsZGluZ3MuaXNBY3RpdmUsIHRydWUpXG4gICAgICAgICAgICAgIClcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgICBpZiAoYnVpbGRpbmdPcmcubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICBoYXNBY2Nlc3MgPSB0cnVlO1xuICAgICAgICAgICAgICBhY2Nlc3NUeXBlID0gXCJvcmdhbml6YXRpb25cIjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGlmICghaGFzQWNjZXNzKSB7XG4gICAgICAgIGNvbnN0IHVzZXJSZXNpZGVuY2VBY2Nlc3MgPSBhd2FpdCBkYi5zZWxlY3QoeyByZXNpZGVuY2VJZDogdXNlclJlc2lkZW5jZXMucmVzaWRlbmNlSWQgfSkuZnJvbSh1c2VyUmVzaWRlbmNlcykuaW5uZXJKb2luKHJlc2lkZW5jZXMsIGVxNih1c2VyUmVzaWRlbmNlcy5yZXNpZGVuY2VJZCwgcmVzaWRlbmNlcy5pZCkpLndoZXJlKFxuICAgICAgICAgIGFuZDYoXG4gICAgICAgICAgICBlcTYodXNlclJlc2lkZW5jZXMudXNlcklkLCBjdXJyZW50VXNlci5pZCksXG4gICAgICAgICAgICBlcTYocmVzaWRlbmNlcy5idWlsZGluZ0lkLCBidWlsZGluZ0lkKSxcbiAgICAgICAgICAgIGVxNih1c2VyUmVzaWRlbmNlcy5pc0FjdGl2ZSwgdHJ1ZSlcbiAgICAgICAgICApXG4gICAgICAgICk7XG4gICAgICAgIGlmICh1c2VyUmVzaWRlbmNlQWNjZXNzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICBoYXNBY2Nlc3MgPSB0cnVlO1xuICAgICAgICAgIGFjY2Vzc1R5cGUgPSBhY2Nlc3NUeXBlID8gXCJib3RoXCIgOiBcInJlc2lkZW5jZVwiO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBpZiAoIWhhc0FjY2Vzcykge1xuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDMpLmpzb24oe1xuICAgICAgICAgIF9lcnJvcjogXCJGb3JiaWRkZW5cIixcbiAgICAgICAgICBtZXNzYWdlOiBcIllvdSBkbyBub3QgaGF2ZSBhY2Nlc3MgdG8gdGhpcyBidWlsZGluZ1wiXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgICAgY29uc3QgYnVpbGRpbmdEYXRhID0gYXdhaXQgZGIuc2VsZWN0KHtcbiAgICAgICAgaWQ6IGJ1aWxkaW5ncy5pZCxcbiAgICAgICAgbmFtZTogYnVpbGRpbmdzLm5hbWUsXG4gICAgICAgIGFkZHJlc3M6IGJ1aWxkaW5ncy5hZGRyZXNzLFxuICAgICAgICBjaXR5OiBidWlsZGluZ3MuY2l0eSxcbiAgICAgICAgcHJvdmluY2U6IGJ1aWxkaW5ncy5wcm92aW5jZSxcbiAgICAgICAgcG9zdGFsQ29kZTogYnVpbGRpbmdzLnBvc3RhbENvZGUsXG4gICAgICAgIGJ1aWxkaW5nVHlwZTogYnVpbGRpbmdzLmJ1aWxkaW5nVHlwZSxcbiAgICAgICAgeWVhckJ1aWx0OiBidWlsZGluZ3MueWVhckJ1aWx0LFxuICAgICAgICB0b3RhbFVuaXRzOiBidWlsZGluZ3MudG90YWxVbml0cyxcbiAgICAgICAgdG90YWxGbG9vcnM6IGJ1aWxkaW5ncy50b3RhbEZsb29ycyxcbiAgICAgICAgcGFya2luZ1NwYWNlczogYnVpbGRpbmdzLnBhcmtpbmdTcGFjZXMsXG4gICAgICAgIHN0b3JhZ2VTcGFjZXM6IGJ1aWxkaW5ncy5zdG9yYWdlU3BhY2VzLFxuICAgICAgICBhbWVuaXRpZXM6IGJ1aWxkaW5ncy5hbWVuaXRpZXMsXG4gICAgICAgIG1hbmFnZW1lbnRDb21wYW55OiBidWlsZGluZ3MubWFuYWdlbWVudENvbXBhbnksXG4gICAgICAgIG9yZ2FuaXphdGlvbklkOiBidWlsZGluZ3Mub3JnYW5pemF0aW9uSWQsXG4gICAgICAgIGlzQWN0aXZlOiBidWlsZGluZ3MuaXNBY3RpdmUsXG4gICAgICAgIGNyZWF0ZWRBdDogYnVpbGRpbmdzLmNyZWF0ZWRBdCxcbiAgICAgICAgdXBkYXRlZEF0OiBidWlsZGluZ3MudXBkYXRlZEF0LFxuICAgICAgICBvcmdhbml6YXRpb25OYW1lOiBvcmdhbml6YXRpb25zLm5hbWUsXG4gICAgICAgIG9yZ2FuaXphdGlvblR5cGU6IG9yZ2FuaXphdGlvbnMudHlwZSxcbiAgICAgICAgb3JnYW5pemF0aW9uQWRkcmVzczogb3JnYW5pemF0aW9ucy5hZGRyZXNzLFxuICAgICAgICBvcmdhbml6YXRpb25DaXR5OiBvcmdhbml6YXRpb25zLmNpdHksXG4gICAgICAgIG9yZ2FuaXphdGlvblBob25lOiBvcmdhbml6YXRpb25zLnBob25lLFxuICAgICAgICBvcmdhbml6YXRpb25FbWFpbDogb3JnYW5pemF0aW9ucy5lbWFpbFxuICAgICAgfSkuZnJvbShidWlsZGluZ3MpLmlubmVySm9pbihvcmdhbml6YXRpb25zLCBlcTYoYnVpbGRpbmdzLm9yZ2FuaXphdGlvbklkLCBvcmdhbml6YXRpb25zLmlkKSkud2hlcmUoZXE2KGJ1aWxkaW5ncy5pZCwgYnVpbGRpbmdJZCkpO1xuICAgICAgaWYgKGJ1aWxkaW5nRGF0YS5sZW5ndGggPT09IDApIHtcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDA0KS5qc29uKHtcbiAgICAgICAgICBfZXJyb3I6IFwiTm90IGZvdW5kXCIsXG4gICAgICAgICAgbWVzc2FnZTogXCJCdWlsZGluZyBub3QgZm91bmRcIlxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICAgIGNvbnN0IGJ1aWxkaW5nID0gYnVpbGRpbmdEYXRhWzBdO1xuICAgICAgY29uc3QgYnVpbGRpbmdSZXNpZGVuY2VzID0gYXdhaXQgZGIuc2VsZWN0KHtcbiAgICAgICAgaWQ6IHJlc2lkZW5jZXMuaWQsXG4gICAgICAgIHVuaXROdW1iZXI6IHJlc2lkZW5jZXMudW5pdE51bWJlcixcbiAgICAgICAgZmxvb3I6IHJlc2lkZW5jZXMuZmxvb3IsXG4gICAgICAgIHNxdWFyZUZvb3RhZ2U6IHJlc2lkZW5jZXMuc3F1YXJlRm9vdGFnZSxcbiAgICAgICAgYmVkcm9vbXM6IHJlc2lkZW5jZXMuYmVkcm9vbXMsXG4gICAgICAgIGJhdGhyb29tczogcmVzaWRlbmNlcy5iYXRocm9vbXMsXG4gICAgICAgIGJhbGNvbnk6IHJlc2lkZW5jZXMuYmFsY29ueSxcbiAgICAgICAgcGFya2luZ1NwYWNlTnVtYmVyczogcmVzaWRlbmNlcy5wYXJraW5nU3BhY2VOdW1iZXJzLFxuICAgICAgICBzdG9yYWdlU3BhY2VOdW1iZXJzOiByZXNpZGVuY2VzLnN0b3JhZ2VTcGFjZU51bWJlcnMsXG4gICAgICAgIG1vbnRobHlGZWVzOiByZXNpZGVuY2VzLm1vbnRobHlGZWVzLFxuICAgICAgICBpc0FjdGl2ZTogcmVzaWRlbmNlcy5pc0FjdGl2ZVxuICAgICAgfSkuZnJvbShyZXNpZGVuY2VzKS53aGVyZShhbmQ2KGVxNihyZXNpZGVuY2VzLmJ1aWxkaW5nSWQsIGJ1aWxkaW5nSWQpLCBlcTYocmVzaWRlbmNlcy5pc0FjdGl2ZSwgdHJ1ZSkpKTtcbiAgICAgIGxldCB1c2VyUmVzaWRlbmNlc0luQnVpbGRpbmcgPSBbXTtcbiAgICAgIGNvbnN0IHVzZXJSZXNpZGVuY2VSZWNvcmRzID0gYXdhaXQgZGIuc2VsZWN0KHtcbiAgICAgICAgcmVzaWRlbmNlSWQ6IHVzZXJSZXNpZGVuY2VzLnJlc2lkZW5jZUlkLFxuICAgICAgICByZWxhdGlvbnNoaXBUeXBlOiB1c2VyUmVzaWRlbmNlcy5yZWxhdGlvbnNoaXBUeXBlLFxuICAgICAgICBzdGFydERhdGU6IHVzZXJSZXNpZGVuY2VzLnN0YXJ0RGF0ZSxcbiAgICAgICAgZW5kRGF0ZTogdXNlclJlc2lkZW5jZXMuZW5kRGF0ZVxuICAgICAgfSkuZnJvbSh1c2VyUmVzaWRlbmNlcykuaW5uZXJKb2luKHJlc2lkZW5jZXMsIGVxNih1c2VyUmVzaWRlbmNlcy5yZXNpZGVuY2VJZCwgcmVzaWRlbmNlcy5pZCkpLndoZXJlKFxuICAgICAgICBhbmQ2KFxuICAgICAgICAgIGVxNih1c2VyUmVzaWRlbmNlcy51c2VySWQsIGN1cnJlbnRVc2VyLmlkKSxcbiAgICAgICAgICBlcTYocmVzaWRlbmNlcy5idWlsZGluZ0lkLCBidWlsZGluZ0lkKSxcbiAgICAgICAgICBlcTYodXNlclJlc2lkZW5jZXMuaXNBY3RpdmUsIHRydWUpXG4gICAgICAgIClcbiAgICAgICk7XG4gICAgICBpZiAodXNlclJlc2lkZW5jZVJlY29yZHMubGVuZ3RoID4gMCkge1xuICAgICAgICB1c2VyUmVzaWRlbmNlc0luQnVpbGRpbmcgPSB1c2VyUmVzaWRlbmNlUmVjb3Jkcy5tYXAoKHVyKSA9PiB7XG4gICAgICAgICAgY29uc3QgcmVzaWRlbmNlID0gYnVpbGRpbmdSZXNpZGVuY2VzLmZpbmQoKHIpID0+IHIuaWQgPT09IHVyLnJlc2lkZW5jZUlkKTtcbiAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgLi4ucmVzaWRlbmNlLFxuICAgICAgICAgICAgcmVsYXRpb25zaGlwVHlwZTogdXIucmVsYXRpb25zaGlwVHlwZSxcbiAgICAgICAgICAgIHN0YXJ0RGF0ZTogdXIuc3RhcnREYXRlLFxuICAgICAgICAgICAgZW5kRGF0ZTogdXIuZW5kRGF0ZVxuICAgICAgICAgIH07XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgICAgY29uc3Qgb2NjdXBpZWRVbml0cyA9IGJ1aWxkaW5nUmVzaWRlbmNlcy5sZW5ndGg7XG4gICAgICBjb25zdCBvY2N1cGFuY3lSYXRlID0gYnVpbGRpbmcudG90YWxVbml0cyA+IDAgPyBNYXRoLnJvdW5kKG9jY3VwaWVkVW5pdHMgLyBidWlsZGluZy50b3RhbFVuaXRzICogMTAwKSA6IDA7XG4gICAgICByZXMuanNvbih7XG4gICAgICAgIC4uLmJ1aWxkaW5nLFxuICAgICAgICBhY2Nlc3NUeXBlLFxuICAgICAgICBzdGF0aXN0aWNzOiB7XG4gICAgICAgICAgdG90YWxVbml0czogYnVpbGRpbmcudG90YWxVbml0cyxcbiAgICAgICAgICBvY2N1cGllZFVuaXRzLFxuICAgICAgICAgIG9jY3VwYW5jeVJhdGUsXG4gICAgICAgICAgdmFjYW50VW5pdHM6IGJ1aWxkaW5nLnRvdGFsVW5pdHMgLSBvY2N1cGllZFVuaXRzLFxuICAgICAgICAgIHRvdGFsUmVzaWRlbmNlczogYnVpbGRpbmdSZXNpZGVuY2VzLmxlbmd0aFxuICAgICAgICB9LFxuICAgICAgICB1c2VyUmVzaWRlbmNlczogdXNlclJlc2lkZW5jZXNJbkJ1aWxkaW5nLFxuICAgICAgICAvLyBPbmx5IGluY2x1ZGUgZnVsbCByZXNpZGVuY2UgbGlzdCBmb3IgbWFuYWdlcnMvYWRtaW5zXG4gICAgICAgIHJlc2lkZW5jZXM6IGN1cnJlbnRVc2VyLnJvbGUgPT09IFwiYWRtaW5cIiB8fCBjdXJyZW50VXNlci5yb2xlID09PSBcIm1hbmFnZXJcIiA/IGJ1aWxkaW5nUmVzaWRlbmNlcyA6IHZvaWQgMFxuICAgICAgfSk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoXCJcXHUyNzRDIEVycm9yIGZldGNoaW5nIGJ1aWxkaW5nIGRldGFpbHM6XCIsIGVycm9yKTtcbiAgICAgIHJlcy5zdGF0dXMoNTAwKS5qc29uKHtcbiAgICAgICAgX2Vycm9yOiBcIkludGVybmFsIHNlcnZlciBlcnJvclwiLFxuICAgICAgICBtZXNzYWdlOiBcIkZhaWxlZCB0byBmZXRjaCBidWlsZGluZyBkZXRhaWxzXCJcbiAgICAgIH0pO1xuICAgIH1cbiAgfSk7XG4gIGFwcDIucG9zdChcIi9hcGkvYWRtaW4vYnVpbGRpbmdzXCIsIHJlcXVpcmVBdXRoLCBhc3luYyAocmVxLCByZXMpID0+IHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgY3VycmVudFVzZXIgPSByZXEudXNlciB8fCByZXEuc2Vzc2lvbj8udXNlcjtcbiAgICAgIGlmICghY3VycmVudFVzZXIpIHtcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAxKS5qc29uKHtcbiAgICAgICAgICBtZXNzYWdlOiBcIkF1dGhlbnRpY2F0aW9uIHJlcXVpcmVkXCIsXG4gICAgICAgICAgY29kZTogXCJBVVRIX1JFUVVJUkVEXCJcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgICBpZiAoY3VycmVudFVzZXIucm9sZSAhPT0gXCJhZG1pblwiKSB7XG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMykuanNvbih7XG4gICAgICAgICAgbWVzc2FnZTogXCJBZG1pbiBhY2Nlc3MgcmVxdWlyZWRcIixcbiAgICAgICAgICBjb2RlOiBcIkFETUlOX1JFUVVJUkVEXCJcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgICBjb25zdCBidWlsZGluZ0RhdGEgPSByZXEuYm9keTtcbiAgICAgIGlmICghYnVpbGRpbmdEYXRhLm5hbWUgfHwgIWJ1aWxkaW5nRGF0YS5vcmdhbml6YXRpb25JZCkge1xuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oe1xuICAgICAgICAgIF9lcnJvcjogXCJWYWxpZGF0aW9uIGVycm9yXCIsXG4gICAgICAgICAgbWVzc2FnZTogXCJCdWlsZGluZyBuYW1lIGFuZCBvcmdhbml6YXRpb24gYXJlIHJlcXVpcmVkXCJcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgICBjb25zdCBidWlsZGluZ0lkID0gY3J5cHRvMy5yYW5kb21VVUlEKCk7XG4gICAgICBjb25zdCBuZXdCdWlsZGluZyA9IGF3YWl0IGRiLmluc2VydChidWlsZGluZ3MpLnZhbHVlcyh7XG4gICAgICAgIGlkOiBidWlsZGluZ0lkLFxuICAgICAgICBuYW1lOiBidWlsZGluZ0RhdGEubmFtZSxcbiAgICAgICAgYWRkcmVzczogYnVpbGRpbmdEYXRhLmFkZHJlc3MgfHwgXCJcIixcbiAgICAgICAgY2l0eTogYnVpbGRpbmdEYXRhLmNpdHkgfHwgXCJcIixcbiAgICAgICAgcHJvdmluY2U6IGJ1aWxkaW5nRGF0YS5wcm92aW5jZSB8fCBcIlFDXCIsXG4gICAgICAgIHBvc3RhbENvZGU6IGJ1aWxkaW5nRGF0YS5wb3N0YWxDb2RlIHx8IFwiXCIsXG4gICAgICAgIGJ1aWxkaW5nVHlwZTogYnVpbGRpbmdEYXRhLmJ1aWxkaW5nVHlwZSB8fCBcImNvbmRvXCIsXG4gICAgICAgIHllYXJCdWlsdDogYnVpbGRpbmdEYXRhLnllYXJCdWlsdCxcbiAgICAgICAgdG90YWxVbml0czogYnVpbGRpbmdEYXRhLnRvdGFsVW5pdHMgfHwgMCxcbiAgICAgICAgdG90YWxGbG9vcnM6IGJ1aWxkaW5nRGF0YS50b3RhbEZsb29ycyxcbiAgICAgICAgcGFya2luZ1NwYWNlczogYnVpbGRpbmdEYXRhLnBhcmtpbmdTcGFjZXMsXG4gICAgICAgIHN0b3JhZ2VTcGFjZXM6IGJ1aWxkaW5nRGF0YS5zdG9yYWdlU3BhY2VzLFxuICAgICAgICBhbWVuaXRpZXM6IGJ1aWxkaW5nRGF0YS5hbWVuaXRpZXMgPyBKU09OLnN0cmluZ2lmeShidWlsZGluZ0RhdGEuYW1lbml0aWVzKSA6IG51bGwsXG4gICAgICAgIG1hbmFnZW1lbnRDb21wYW55OiBidWlsZGluZ0RhdGEubWFuYWdlbWVudENvbXBhbnksXG4gICAgICAgIG9yZ2FuaXphdGlvbklkOiBidWlsZGluZ0RhdGEub3JnYW5pemF0aW9uSWQsXG4gICAgICAgIGlzQWN0aXZlOiB0cnVlLFxuICAgICAgICBjcmVhdGVkQXQ6IC8qIEBfX1BVUkVfXyAqLyBuZXcgRGF0ZSgpLFxuICAgICAgICB1cGRhdGVkQXQ6IC8qIEBfX1BVUkVfXyAqLyBuZXcgRGF0ZSgpXG4gICAgICB9KS5yZXR1cm5pbmcoKTtcbiAgICAgIGNvbnNvbGUubG9nKFwiQnVpbGRpbmcgY3JlYXRlZCAtIHN0b3JhZ2UgaGllcmFyY2h5IHdpbGwgYmUgY3JlYXRlZCBvbiBmaXJzdCBkb2N1bWVudCB1cGxvYWRcIik7XG4gICAgICBpZiAoYnVpbGRpbmdEYXRhLnRvdGFsVW5pdHMgJiYgYnVpbGRpbmdEYXRhLnRvdGFsVW5pdHMgPiAwICYmIGJ1aWxkaW5nRGF0YS50b3RhbFVuaXRzIDw9IDMwMCkge1xuICAgICAgICB0cnkge1xuICAgICAgICAgIGNvbnN0IHRvdGFsVW5pdHMgPSBidWlsZGluZ0RhdGEudG90YWxVbml0cztcbiAgICAgICAgICBjb25zdCB0b3RhbEZsb29ycyA9IGJ1aWxkaW5nRGF0YS50b3RhbEZsb29ycyB8fCAxO1xuICAgICAgICAgIGNvbnN0IHVuaXRzUGVyRmxvb3IgPSBNYXRoLmNlaWwodG90YWxVbml0cyAvIHRvdGFsRmxvb3JzKTtcbiAgICAgICAgICBjb25zdCByZXNpZGVuY2VzVG9DcmVhdGUgPSBbXTtcbiAgICAgICAgICBmb3IgKGxldCB1bml0ID0gMTsgdW5pdCA8PSB0b3RhbFVuaXRzOyB1bml0KyspIHtcbiAgICAgICAgICAgIGNvbnN0IGZsb29yID0gTWF0aC5jZWlsKHVuaXQgLyB1bml0c1BlckZsb29yKTtcbiAgICAgICAgICAgIGNvbnN0IHVuaXRPbkZsb29yID0gKHVuaXQgLSAxKSAlIHVuaXRzUGVyRmxvb3IgKyAxO1xuICAgICAgICAgICAgY29uc3QgdW5pdE51bWJlciA9IGAke2Zsb29yfSR7dW5pdE9uRmxvb3IudG9TdHJpbmcoKS5wYWRTdGFydCgyLCBcIjBcIil9YDtcbiAgICAgICAgICAgIHJlc2lkZW5jZXNUb0NyZWF0ZS5wdXNoKHtcbiAgICAgICAgICAgICAgYnVpbGRpbmdJZCxcbiAgICAgICAgICAgICAgdW5pdE51bWJlcixcbiAgICAgICAgICAgICAgZmxvb3IsXG4gICAgICAgICAgICAgIGlzQWN0aXZlOiB0cnVlXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9XG4gICAgICAgICAgY29uc3QgY3JlYXRlZFJlc2lkZW5jZXMgPSBhd2FpdCBkYi5pbnNlcnQocmVzaWRlbmNlcykudmFsdWVzKHJlc2lkZW5jZXNUb0NyZWF0ZSkucmV0dXJuaW5nKCk7XG4gICAgICAgICAgY29uc29sZS5sb2coXG4gICAgICAgICAgICBgXFx1MjcwNSBBdXRvLWdlbmVyYXRlZCAke2NyZWF0ZWRSZXNpZGVuY2VzLmxlbmd0aH0gcmVzaWRlbmNlcyBmb3IgYnVpbGRpbmcgJHtidWlsZGluZ0lkfWBcbiAgICAgICAgICApO1xuICAgICAgICB9IGNhdGNoIChfX19yZXNpZGVuY2VFcnJvcikge1xuICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXCJcXHUyNkEwXFx1RkUwRiBFcnJvciBhdXRvLWdlbmVyYXRpbmcgcmVzaWRlbmNlczpcIiwgX19fcmVzaWRlbmNlRXJyb3IpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICByZXMuc3RhdHVzKDIwMSkuanNvbih7XG4gICAgICAgIG1lc3NhZ2U6IFwiQnVpbGRpbmcgY3JlYXRlZCBzdWNjZXNzZnVsbHlcIixcbiAgICAgICAgYnVpbGRpbmc6IG5ld0J1aWxkaW5nWzBdXG4gICAgICB9KTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcihcIlxcdTI3NEMgRXJyb3IgY3JlYXRpbmcgYnVpbGRpbmc6XCIsIGVycm9yKTtcbiAgICAgIHJlcy5zdGF0dXMoNTAwKS5qc29uKHtcbiAgICAgICAgX2Vycm9yOiBcIkludGVybmFsIHNlcnZlciBlcnJvclwiLFxuICAgICAgICBtZXNzYWdlOiBcIkZhaWxlZCB0byBjcmVhdGUgYnVpbGRpbmdcIlxuICAgICAgfSk7XG4gICAgfVxuICB9KTtcbiAgYXBwMi5nZXQoXCIvYXBpL2J1aWxkaW5ncy86aWQvcmVzaWRlbmNlcy1mb3ItZGVsZXRpb25cIiwgcmVxdWlyZUF1dGgsIGFzeW5jIChyZXEsIHJlcykgPT4ge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCB1c2VyID0gcmVxLnVzZXI7XG4gICAgICBjb25zdCBidWlsZGluZ0lkID0gcmVxLnBhcmFtcy5pZDtcbiAgICAgIGNvbnN0IG1heFRvU2VsZWN0ID0gcGFyc2VJbnQocmVxLnF1ZXJ5Lm1heFRvU2VsZWN0KSB8fCAxMDtcbiAgICAgIGlmICghdXNlcikge1xuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDEpLmpzb24oeyBtZXNzYWdlOiBcIkF1dGhlbnRpY2F0aW9uIHJlcXVpcmVkXCIgfSk7XG4gICAgICB9XG4gICAgICBpZiAodXNlci5yb2xlICE9PSBcImFkbWluXCIpIHtcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAzKS5qc29uKHsgbWVzc2FnZTogXCJPbmx5IGFkbWlucyBjYW4gYWNjZXNzIHJlc2lkZW5jZSBkZWxldGlvbiBvcHRpb25zXCIgfSk7XG4gICAgICB9XG4gICAgICBjb25zdCB7IGdldFJlc2lkZW5jZXNGb3JTZWxlY3Rpb246IGdldFJlc2lkZW5jZXNGb3JTZWxlY3Rpb24yIH0gPSBhd2FpdCBQcm9taXNlLnJlc29sdmUoKS50aGVuKCgpID0+IChpbml0X29wZXJhdGlvbnMyKCksIG9wZXJhdGlvbnNfZXhwb3J0cykpO1xuICAgICAgY29uc3QgcmVzaWRlbmNlc1RvU2VsZWN0ID0gYXdhaXQgZ2V0UmVzaWRlbmNlc0ZvclNlbGVjdGlvbjIoYnVpbGRpbmdJZCwgbWF4VG9TZWxlY3QpO1xuICAgICAgcmVzLmpzb24oe1xuICAgICAgICByZXNpZGVuY2VzOiByZXNpZGVuY2VzVG9TZWxlY3QsXG4gICAgICAgIG1lc3NhZ2U6IGBGb3VuZCAke3Jlc2lkZW5jZXNUb1NlbGVjdC5sZW5ndGh9IHJlc2lkZW5jZXMgYXZhaWxhYmxlIGZvciBkZWxldGlvbmBcbiAgICAgIH0pO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKFwiXFx1Mjc0QyBFcnJvciBmZXRjaGluZyByZXNpZGVuY2VzIGZvciBkZWxldGlvbjpcIiwgZXJyb3IpO1xuICAgICAgcmVzLnN0YXR1cyg1MDApLmpzb24oeyBtZXNzYWdlOiBcIkZhaWxlZCB0byBmZXRjaCByZXNpZGVuY2VzIGZvciBkZWxldGlvblwiIH0pO1xuICAgIH1cbiAgfSk7XG4gIGFwcDIuZGVsZXRlKFwiL2FwaS9idWlsZGluZ3MvOmlkL3Jlc2lkZW5jZXNcIiwgcmVxdWlyZUF1dGgsIGFzeW5jIChyZXEsIHJlcykgPT4ge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCB1c2VyID0gcmVxLnVzZXI7XG4gICAgICBjb25zdCBidWlsZGluZ0lkID0gcmVxLnBhcmFtcy5pZDtcbiAgICAgIGNvbnN0IHsgcmVzaWRlbmNlSWRzIH0gPSByZXEuYm9keTtcbiAgICAgIGlmICghdXNlcikge1xuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDEpLmpzb24oeyBtZXNzYWdlOiBcIkF1dGhlbnRpY2F0aW9uIHJlcXVpcmVkXCIgfSk7XG4gICAgICB9XG4gICAgICBpZiAodXNlci5yb2xlICE9PSBcImFkbWluXCIpIHtcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAzKS5qc29uKHsgbWVzc2FnZTogXCJPbmx5IGFkbWlucyBjYW4gZGVsZXRlIHJlc2lkZW5jZXNcIiB9KTtcbiAgICAgIH1cbiAgICAgIGlmICghQXJyYXkuaXNBcnJheShyZXNpZGVuY2VJZHMpIHx8IHJlc2lkZW5jZUlkcy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgbWVzc2FnZTogXCJyZXNpZGVuY2VJZHMgYXJyYXkgaXMgcmVxdWlyZWRcIiB9KTtcbiAgICAgIH1cbiAgICAgIGNvbnN0IHsgZGVsZXRlU2VsZWN0ZWRSZXNpZGVuY2VzOiBkZWxldGVTZWxlY3RlZFJlc2lkZW5jZXMyIH0gPSBhd2FpdCBQcm9taXNlLnJlc29sdmUoKS50aGVuKCgpID0+IChpbml0X29wZXJhdGlvbnMyKCksIG9wZXJhdGlvbnNfZXhwb3J0cykpO1xuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgZGVsZXRlU2VsZWN0ZWRSZXNpZGVuY2VzMihidWlsZGluZ0lkLCByZXNpZGVuY2VJZHMsIHVzZXIucm9sZSk7XG4gICAgICByZXMuanNvbih7XG4gICAgICAgIHN1Y2Nlc3M6IHRydWUsXG4gICAgICAgIGRlbGV0ZWRDb3VudDogcmVzdWx0LmRlbGV0ZWRDb3VudCxcbiAgICAgICAgZG9jdW1lbnRzRGVsZXRlZDogcmVzdWx0LmRvY3VtZW50c0RlbGV0ZWQsXG4gICAgICAgIG1lc3NhZ2U6IGBTdWNjZXNzZnVsbHkgZGVsZXRlZCAke3Jlc3VsdC5kZWxldGVkQ291bnR9IHJlc2lkZW5jZXMgYW5kICR7cmVzdWx0LmRvY3VtZW50c0RlbGV0ZWR9IGFzc29jaWF0ZWQgZG9jdW1lbnRzYFxuICAgICAgfSk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoXCJcXHUyNzRDIEVycm9yIGRlbGV0aW5nIHJlc2lkZW5jZXM6XCIsIGVycm9yKTtcbiAgICAgIHJlcy5zdGF0dXMoNTAwKS5qc29uKHsgbWVzc2FnZTogZXJyb3IubWVzc2FnZSB8fCBcIkZhaWxlZCB0byBkZWxldGUgcmVzaWRlbmNlc1wiIH0pO1xuICAgIH1cbiAgfSk7XG4gIGFwcDIucHV0KFwiL2FwaS9hZG1pbi9idWlsZGluZ3MvOmlkXCIsIHJlcXVpcmVBdXRoLCBhc3luYyAocmVxLCByZXMpID0+IHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgY3VycmVudFVzZXIgPSByZXEudXNlciB8fCByZXEuc2Vzc2lvbj8udXNlcjtcbiAgICAgIGlmICghY3VycmVudFVzZXIpIHtcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAxKS5qc29uKHtcbiAgICAgICAgICBtZXNzYWdlOiBcIkF1dGhlbnRpY2F0aW9uIHJlcXVpcmVkXCIsXG4gICAgICAgICAgY29kZTogXCJBVVRIX1JFUVVJUkVEXCJcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgICBpZiAoY3VycmVudFVzZXIucm9sZSAhPT0gXCJhZG1pblwiICYmIGN1cnJlbnRVc2VyLnJvbGUgIT09IFwibWFuYWdlclwiKSB7XG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMykuanNvbih7XG4gICAgICAgICAgbWVzc2FnZTogXCJBZG1pbiBvciBNYW5hZ2VyIGFjY2VzcyByZXF1aXJlZFwiLFxuICAgICAgICAgIGNvZGU6IFwiQURNSU5fTUFOQUdFUl9SRVFVSVJFRFwiXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgICAgY29uc3QgYnVpbGRpbmdJZCA9IHJlcS5wYXJhbXMuaWQ7XG4gICAgICBjb25zdCBidWlsZGluZ0RhdGEgPSByZXEuYm9keTtcbiAgICAgIGlmICghYnVpbGRpbmdEYXRhLm5hbWUgfHwgIWJ1aWxkaW5nRGF0YS5vcmdhbml6YXRpb25JZCkge1xuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oe1xuICAgICAgICAgIF9lcnJvcjogXCJWYWxpZGF0aW9uIGVycm9yXCIsXG4gICAgICAgICAgbWVzc2FnZTogXCJCdWlsZGluZyBuYW1lIGFuZCBvcmdhbml6YXRpb24gYXJlIHJlcXVpcmVkXCJcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgICBjb25zdCBleGlzdGluZ0J1aWxkaW5nID0gYXdhaXQgZGIuc2VsZWN0KCkuZnJvbShidWlsZGluZ3MpLndoZXJlKGVxNihidWlsZGluZ3MuaWQsIGJ1aWxkaW5nSWQpKS5saW1pdCgxKTtcbiAgICAgIGlmIChleGlzdGluZ0J1aWxkaW5nLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDQpLmpzb24oe1xuICAgICAgICAgIF9lcnJvcjogXCJOb3QgZm91bmRcIixcbiAgICAgICAgICBtZXNzYWdlOiBcIkJ1aWxkaW5nIG5vdCBmb3VuZFwiXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgICAgY29uc3QgY3VycmVudFJlc2lkZW5jZXMgPSBhd2FpdCBkYi5zZWxlY3QoeyBjb3VudDogc3FsMTVgY291bnQoKik6OmludGAgfSkuZnJvbShyZXNpZGVuY2VzKS53aGVyZShhbmQ2KGVxNihyZXNpZGVuY2VzLmJ1aWxkaW5nSWQsIGJ1aWxkaW5nSWQpLCBlcTYocmVzaWRlbmNlcy5pc0FjdGl2ZSwgdHJ1ZSkpKTtcbiAgICAgIGNvbnN0IGN1cnJlbnRSZXNpZGVuY2VDb3VudCA9IGN1cnJlbnRSZXNpZGVuY2VzWzBdPy5jb3VudCB8fCAwO1xuICAgICAgY29uc3QgbmV3VG90YWxVbml0cyA9IGJ1aWxkaW5nRGF0YS50b3RhbFVuaXRzIHx8IDA7XG4gICAgICBjb25zdCBwcmV2aW91c1RvdGFsVW5pdHMgPSBleGlzdGluZ0J1aWxkaW5nWzBdLnRvdGFsVW5pdHMgfHwgMDtcbiAgICAgIGNvbnNvbGUubG9nKFxuICAgICAgICBgXFx1ezFGNTA0fSBCdWlsZGluZyAke2J1aWxkaW5nSWR9OiAke3ByZXZpb3VzVG90YWxVbml0c30gXFx1MjE5MiAke25ld1RvdGFsVW5pdHN9IHVuaXRzIChjdXJyZW50bHkgaGFzICR7Y3VycmVudFJlc2lkZW5jZUNvdW50fSBhY3RpdmUgcmVzaWRlbmNlcylgXG4gICAgICApO1xuICAgICAgY29uc3QgdXBkYXRlZEJ1aWxkaW5nID0gYXdhaXQgZGIudXBkYXRlKGJ1aWxkaW5ncykuc2V0KHtcbiAgICAgICAgbmFtZTogYnVpbGRpbmdEYXRhLm5hbWUsXG4gICAgICAgIGFkZHJlc3M6IGJ1aWxkaW5nRGF0YS5hZGRyZXNzIHx8IFwiXCIsXG4gICAgICAgIGNpdHk6IGJ1aWxkaW5nRGF0YS5jaXR5IHx8IFwiXCIsXG4gICAgICAgIHByb3ZpbmNlOiBidWlsZGluZ0RhdGEucHJvdmluY2UgfHwgXCJRQ1wiLFxuICAgICAgICBwb3N0YWxDb2RlOiBidWlsZGluZ0RhdGEucG9zdGFsQ29kZSB8fCBcIlwiLFxuICAgICAgICBidWlsZGluZ1R5cGU6IGJ1aWxkaW5nRGF0YS5idWlsZGluZ1R5cGUgfHwgXCJjb25kb1wiLFxuICAgICAgICB5ZWFyQnVpbHQ6IGJ1aWxkaW5nRGF0YS55ZWFyQnVpbHQsXG4gICAgICAgIHRvdGFsVW5pdHM6IG5ld1RvdGFsVW5pdHMsXG4gICAgICAgIHRvdGFsRmxvb3JzOiBidWlsZGluZ0RhdGEudG90YWxGbG9vcnMsXG4gICAgICAgIHBhcmtpbmdTcGFjZXM6IGJ1aWxkaW5nRGF0YS5wYXJraW5nU3BhY2VzLFxuICAgICAgICBzdG9yYWdlU3BhY2VzOiBidWlsZGluZ0RhdGEuc3RvcmFnZVNwYWNlcyxcbiAgICAgICAgYW1lbml0aWVzOiBidWlsZGluZ0RhdGEuYW1lbml0aWVzID8gSlNPTi5zdHJpbmdpZnkoYnVpbGRpbmdEYXRhLmFtZW5pdGllcykgOiBudWxsLFxuICAgICAgICBtYW5hZ2VtZW50Q29tcGFueTogYnVpbGRpbmdEYXRhLm1hbmFnZW1lbnRDb21wYW55LFxuICAgICAgICBvcmdhbml6YXRpb25JZDogYnVpbGRpbmdEYXRhLm9yZ2FuaXphdGlvbklkLFxuICAgICAgICB1cGRhdGVkQXQ6IC8qIEBfX1BVUkVfXyAqLyBuZXcgRGF0ZSgpXG4gICAgICB9KS53aGVyZShlcTYoYnVpbGRpbmdzLmlkLCBidWlsZGluZ0lkKSkucmV0dXJuaW5nKCk7XG4gICAgICBpZiAobmV3VG90YWxVbml0cyAhPT0gcHJldmlvdXNUb3RhbFVuaXRzKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKGBcXHV7MUYzRTB9IEJ1aWxkaW5nIHVuaXRzIGNoYW5nZWQgZnJvbSAke3ByZXZpb3VzVG90YWxVbml0c30gdG8gJHtuZXdUb3RhbFVuaXRzfSwgYWRqdXN0aW5nIHJlc2lkZW5jZXMuLi5gKTtcbiAgICAgICAgaWYgKGN1cnJlbnRVc2VyLnJvbGUgIT09IFwiYWRtaW5cIikge1xuICAgICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMykuanNvbih7XG4gICAgICAgICAgICBtZXNzYWdlOiBcIk9ubHkgYWRtaW5zIGNhbiBpbmNyZWFzZSBvciBkZWNyZWFzZSBidWlsZGluZyByZXNpZGVuY2UgY291bnRzXCIsXG4gICAgICAgICAgICBjb2RlOiBcIkFETUlOX1JFUVVJUkVEX0ZPUl9SRVNJREVOQ0VfQ0hBTkdFU1wiXG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgeyBhZGp1c3RSZXNpZGVuY2VDb3VudDogYWRqdXN0UmVzaWRlbmNlQ291bnQyIH0gPSBhd2FpdCBQcm9taXNlLnJlc29sdmUoKS50aGVuKCgpID0+IChpbml0X29wZXJhdGlvbnMyKCksIG9wZXJhdGlvbnNfZXhwb3J0cykpO1xuICAgICAgICBjb25zdCBhZGp1c3RtZW50UmVzdWx0ID0gYXdhaXQgYWRqdXN0UmVzaWRlbmNlQ291bnQyKFxuICAgICAgICAgIGJ1aWxkaW5nSWQsXG4gICAgICAgICAgZXhpc3RpbmdCdWlsZGluZ1swXS5vcmdhbml6YXRpb25JZCxcbiAgICAgICAgICBuZXdUb3RhbFVuaXRzLFxuICAgICAgICAgIHByZXZpb3VzVG90YWxVbml0cyxcbiAgICAgICAgICBidWlsZGluZ0RhdGEudG90YWxGbG9vcnMgfHwgZXhpc3RpbmdCdWlsZGluZ1swXS50b3RhbEZsb29ycyB8fCAxXG4gICAgICAgICk7XG4gICAgICAgIGlmIChhZGp1c3RtZW50UmVzdWx0LmFjdGlvbiA9PT0gXCJkZWNyZWFzZWRcIiAmJiBhZGp1c3RtZW50UmVzdWx0LnJlc2lkZW5jZXNUb1NlbGVjdCkge1xuICAgICAgICAgIHJldHVybiByZXMuanNvbih7XG4gICAgICAgICAgICBtZXNzYWdlOiBcIkJ1aWxkaW5nIHVwZGF0ZWQsIGJ1dCByZXNpZGVuY2UgY291bnQgbmVlZHMgdG8gYmUgcmVkdWNlZFwiLFxuICAgICAgICAgICAgYnVpbGRpbmdVcGRhdGVkOiB0cnVlLFxuICAgICAgICAgICAgbmVlZHNSZXNpZGVuY2VTZWxlY3Rpb246IHRydWUsXG4gICAgICAgICAgICByZXNpZGVuY2VzVG9TZWxlY3Q6IGFkanVzdG1lbnRSZXN1bHQucmVzaWRlbmNlc1RvU2VsZWN0LFxuICAgICAgICAgICAgaW5zdHJ1Y3Rpb246IGBQbGVhc2Ugc2VsZWN0ICR7cHJldmlvdXNUb3RhbFVuaXRzIC0gbmV3VG90YWxVbml0c30gcmVzaWRlbmNlcyB0byBkZWxldGUgZnJvbSB0aGUgbGlzdCBwcm92aWRlZC4gVXNlIERFTEVURSAvYXBpL2J1aWxkaW5ncy8ke2J1aWxkaW5nSWR9L3Jlc2lkZW5jZXMgd2l0aCB0aGUgc2VsZWN0ZWQgcmVzaWRlbmNlIElEcy5gXG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHJlcy5qc29uKHtcbiAgICAgICAgbWVzc2FnZTogXCJCdWlsZGluZyB1cGRhdGVkIHN1Y2Nlc3NmdWxseVwiLFxuICAgICAgICBidWlsZGluZzogdXBkYXRlZEJ1aWxkaW5nWzBdXG4gICAgICB9KTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcihcIlxcdTI3NEMgRXJyb3IgdXBkYXRpbmcgYnVpbGRpbmc6XCIsIGVycm9yKTtcbiAgICAgIHJlcy5zdGF0dXMoNTAwKS5qc29uKHtcbiAgICAgICAgX2Vycm9yOiBcIkludGVybmFsIHNlcnZlciBlcnJvclwiLFxuICAgICAgICBtZXNzYWdlOiBcIkZhaWxlZCB0byB1cGRhdGUgYnVpbGRpbmdcIlxuICAgICAgfSk7XG4gICAgfVxuICB9KTtcbiAgYXBwMi5kZWxldGUoXCIvYXBpL2FkbWluL2J1aWxkaW5ncy86aWRcIiwgcmVxdWlyZUF1dGgsIGFzeW5jIChyZXEsIHJlcykgPT4ge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCBjdXJyZW50VXNlciA9IHJlcS51c2VyIHx8IHJlcS5zZXNzaW9uPy51c2VyO1xuICAgICAgaWYgKCFjdXJyZW50VXNlcikge1xuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDEpLmpzb24oe1xuICAgICAgICAgIG1lc3NhZ2U6IFwiQXV0aGVudGljYXRpb24gcmVxdWlyZWRcIixcbiAgICAgICAgICBjb2RlOiBcIkFVVEhfUkVRVUlSRURcIlxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICAgIGlmIChjdXJyZW50VXNlci5yb2xlICE9PSBcImFkbWluXCIpIHtcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAzKS5qc29uKHtcbiAgICAgICAgICBtZXNzYWdlOiBcIkFkbWluIGFjY2VzcyByZXF1aXJlZFwiLFxuICAgICAgICAgIGNvZGU6IFwiQURNSU5fUkVRVUlSRURcIlxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICAgIGNvbnN0IGJ1aWxkaW5nSWQgPSByZXEucGFyYW1zLmlkO1xuICAgICAgY29uc3QgZXhpc3RpbmdCdWlsZGluZyA9IGF3YWl0IGRiLnNlbGVjdCgpLmZyb20oYnVpbGRpbmdzKS53aGVyZShlcTYoYnVpbGRpbmdzLmlkLCBidWlsZGluZ0lkKSkubGltaXQoMSk7XG4gICAgICBpZiAoZXhpc3RpbmdCdWlsZGluZy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDA0KS5qc29uKHtcbiAgICAgICAgICBfZXJyb3I6IFwiTm90IGZvdW5kXCIsXG4gICAgICAgICAgbWVzc2FnZTogXCJCdWlsZGluZyBub3QgZm91bmRcIlxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICAgIGF3YWl0IGRiLnVwZGF0ZShidWlsZGluZ3MpLnNldCh7XG4gICAgICAgIGlzQWN0aXZlOiBmYWxzZSxcbiAgICAgICAgdXBkYXRlZEF0OiAvKiBAX19QVVJFX18gKi8gbmV3IERhdGUoKVxuICAgICAgfSkud2hlcmUoZXE2KGJ1aWxkaW5ncy5pZCwgYnVpbGRpbmdJZCkpO1xuICAgICAgY29uc29sZS5sb2coXCJCdWlsZGluZyBkZWxldGVkIC0gc3RvcmFnZSBjbGVhbnVwIHdpbGwgYmUgaGFuZGxlZCBhdXRvbWF0aWNhbGx5XCIpO1xuICAgICAgcmVzLmpzb24oe1xuICAgICAgICBtZXNzYWdlOiBcIkJ1aWxkaW5nIGRlbGV0ZWQgc3VjY2Vzc2Z1bGx5XCJcbiAgICAgIH0pO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKFwiXFx1Mjc0QyBFcnJvciBkZWxldGluZyBidWlsZGluZzpcIiwgZXJyb3IpO1xuICAgICAgcmVzLnN0YXR1cyg1MDApLmpzb24oe1xuICAgICAgICBfZXJyb3I6IFwiSW50ZXJuYWwgc2VydmVyIGVycm9yXCIsXG4gICAgICAgIG1lc3NhZ2U6IFwiRmFpbGVkIHRvIGRlbGV0ZSBidWlsZGluZ1wiXG4gICAgICB9KTtcbiAgICB9XG4gIH0pO1xuICBhcHAyLmdldChcIi9hcGkvYWRtaW4vYnVpbGRpbmdzLzppZC9kZWxldGlvbi1pbXBhY3RcIiwgcmVxdWlyZUF1dGgsIGFzeW5jIChyZXEsIHJlcykgPT4ge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCBjdXJyZW50VXNlciA9IHJlcS51c2VyIHx8IHJlcS5zZXNzaW9uPy51c2VyO1xuICAgICAgaWYgKCFjdXJyZW50VXNlcikge1xuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDEpLmpzb24oe1xuICAgICAgICAgIG1lc3NhZ2U6IFwiQXV0aGVudGljYXRpb24gcmVxdWlyZWRcIixcbiAgICAgICAgICBjb2RlOiBcIkFVVEhfUkVRVUlSRURcIlxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICAgIGlmIChjdXJyZW50VXNlci5yb2xlICE9PSBcImFkbWluXCIpIHtcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAzKS5qc29uKHtcbiAgICAgICAgICBtZXNzYWdlOiBcIkFkbWluIGFjY2VzcyByZXF1aXJlZFwiLFxuICAgICAgICAgIGNvZGU6IFwiQURNSU5fUkVRVUlSRURcIlxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICAgIGNvbnN0IGJ1aWxkaW5nSWQgPSByZXEucGFyYW1zLmlkO1xuICAgICAgY29uc3QgYnVpbGRpbmcgPSBhd2FpdCBkYi5zZWxlY3QoeyBpZDogYnVpbGRpbmdzLmlkLCBuYW1lOiBidWlsZGluZ3MubmFtZSB9KS5mcm9tKGJ1aWxkaW5ncykud2hlcmUoYW5kNihlcTYoYnVpbGRpbmdzLmlkLCBidWlsZGluZ0lkKSwgZXE2KGJ1aWxkaW5ncy5pc0FjdGl2ZSwgdHJ1ZSkpKS5saW1pdCgxKTtcbiAgICAgIGlmIChidWlsZGluZy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDA0KS5qc29uKHtcbiAgICAgICAgICBfZXJyb3I6IFwiTm90IGZvdW5kXCIsXG4gICAgICAgICAgbWVzc2FnZTogXCJCdWlsZGluZyBub3QgZm91bmRcIlxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICAgIGNvbnN0IHJlc2lkZW5jZXNDb3VudCA9IGF3YWl0IGRiLnNlbGVjdCh7IGNvdW50OiBzcWwxNWBjb3VudCgqKWAgfSkuZnJvbShyZXNpZGVuY2VzKS53aGVyZShhbmQ2KGVxNihyZXNpZGVuY2VzLmJ1aWxkaW5nSWQsIGJ1aWxkaW5nSWQpLCBlcTYocmVzaWRlbmNlcy5pc0FjdGl2ZSwgdHJ1ZSkpKTtcbiAgICAgIGNvbnN0IGRvY3VtZW50c0NvdW50ID0gYXdhaXQgZGIuc2VsZWN0KHsgY291bnQ6IHNxbDE1YGNvdW50KCopYCB9KS5mcm9tKGRvY3VtZW50cykud2hlcmUoXG4gICAgICAgIG9yMyhcbiAgICAgICAgICBlcTYoZG9jdW1lbnRzLmJ1aWxkaW5nSWQsIGJ1aWxkaW5nSWQpLFxuICAgICAgICAgIHNxbDE1YCR7ZG9jdW1lbnRzLnJlc2lkZW5jZUlkfSBJTiAoU0VMRUNUIGlkIEZST00gcmVzaWRlbmNlcyBXSEVSRSBidWlsZGluZ19pZCA9ICR7YnVpbGRpbmdJZH0pYFxuICAgICAgICApXG4gICAgICApO1xuICAgICAgY29uc3QgcG90ZW50aWFsT3JwaGFuc0NvdW50ID0gYXdhaXQgZGIuc2VsZWN0KHsgY291bnQ6IHNxbDE1YGNvdW50KGRpc3RpbmN0ICR7dXNlclJlc2lkZW5jZXMudXNlcklkfSlgIH0pLmZyb20odXNlclJlc2lkZW5jZXMpLmlubmVySm9pbihyZXNpZGVuY2VzLCBlcTYodXNlclJlc2lkZW5jZXMucmVzaWRlbmNlSWQsIHJlc2lkZW5jZXMuaWQpKS5pbm5lckpvaW4odXNlcnMsIGVxNih1c2VyUmVzaWRlbmNlcy51c2VySWQsIHVzZXJzLmlkKSkud2hlcmUoXG4gICAgICAgIGFuZDYoXG4gICAgICAgICAgZXE2KHJlc2lkZW5jZXMuYnVpbGRpbmdJZCwgYnVpbGRpbmdJZCksXG4gICAgICAgICAgZXE2KHJlc2lkZW5jZXMuaXNBY3RpdmUsIHRydWUpLFxuICAgICAgICAgIGVxNih1c2VyUmVzaWRlbmNlcy5pc0FjdGl2ZSwgdHJ1ZSksXG4gICAgICAgICAgZXE2KHVzZXJzLmlzQWN0aXZlLCB0cnVlKVxuICAgICAgICApXG4gICAgICApO1xuICAgICAgY29uc3QgaW1wYWN0ID0ge1xuICAgICAgICBidWlsZGluZzogYnVpbGRpbmdbMF0sXG4gICAgICAgIHJlc2lkZW5jZXM6IHJlc2lkZW5jZXNDb3VudFswXT8uY291bnQgfHwgMCxcbiAgICAgICAgZG9jdW1lbnRzOiBkb2N1bWVudHNDb3VudFswXT8uY291bnQgfHwgMCxcbiAgICAgICAgcG90ZW50aWFsT3JwaGFuZWRVc2VyczogcG90ZW50aWFsT3JwaGFuc0NvdW50WzBdPy5jb3VudCB8fCAwXG4gICAgICB9O1xuICAgICAgcmVzLmpzb24oaW1wYWN0KTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcihcIlxcdTI3NEMgRXJyb3IgYW5hbHl6aW5nIGRlbGV0aW9uIGltcGFjdDpcIiwgZXJyb3IpO1xuICAgICAgcmVzLnN0YXR1cyg1MDApLmpzb24oe1xuICAgICAgICBfZXJyb3I6IFwiSW50ZXJuYWwgc2VydmVyIGVycm9yXCIsXG4gICAgICAgIG1lc3NhZ2U6IFwiRmFpbGVkIHRvIGFuYWx5emUgZGVsZXRpb24gaW1wYWN0XCJcbiAgICAgIH0pO1xuICAgIH1cbiAgfSk7XG4gIGFwcDIuZGVsZXRlKFwiL2FwaS9hZG1pbi9idWlsZGluZ3MvOmlkL2Nhc2NhZGVcIiwgcmVxdWlyZUF1dGgsIGFzeW5jIChyZXEsIHJlcykgPT4ge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCBjdXJyZW50VXNlciA9IHJlcS51c2VyIHx8IHJlcS5zZXNzaW9uPy51c2VyO1xuICAgICAgaWYgKCFjdXJyZW50VXNlcikge1xuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDEpLmpzb24oe1xuICAgICAgICAgIG1lc3NhZ2U6IFwiQXV0aGVudGljYXRpb24gcmVxdWlyZWRcIixcbiAgICAgICAgICBjb2RlOiBcIkFVVEhfUkVRVUlSRURcIlxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICAgIGlmIChjdXJyZW50VXNlci5yb2xlICE9PSBcImFkbWluXCIpIHtcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAzKS5qc29uKHtcbiAgICAgICAgICBtZXNzYWdlOiBcIkFkbWluIGFjY2VzcyByZXF1aXJlZFwiLFxuICAgICAgICAgIGNvZGU6IFwiQURNSU5fUkVRVUlSRURcIlxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICAgIGNvbnN0IGJ1aWxkaW5nSWQgPSByZXEucGFyYW1zLmlkO1xuICAgICAgY29uc3QgYnVpbGRpbmcgPSBhd2FpdCBkYi5zZWxlY3QoeyBpZDogYnVpbGRpbmdzLmlkLCBuYW1lOiBidWlsZGluZ3MubmFtZSB9KS5mcm9tKGJ1aWxkaW5ncykud2hlcmUoYW5kNihlcTYoYnVpbGRpbmdzLmlkLCBidWlsZGluZ0lkKSwgZXE2KGJ1aWxkaW5ncy5pc0FjdGl2ZSwgdHJ1ZSkpKS5saW1pdCgxKTtcbiAgICAgIGlmIChidWlsZGluZy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDA0KS5qc29uKHtcbiAgICAgICAgICBfZXJyb3I6IFwiTm90IGZvdW5kXCIsXG4gICAgICAgICAgbWVzc2FnZTogXCJCdWlsZGluZyBub3QgZm91bmRcIlxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICAgIGF3YWl0IGRiLnRyYW5zYWN0aW9uKGFzeW5jICh0eCkgPT4ge1xuICAgICAgICBjb25zdCBidWlsZGluZ1Jlc2lkZW5jZXMgPSBhd2FpdCB0eC5zZWxlY3QoeyBpZDogcmVzaWRlbmNlcy5pZCB9KS5mcm9tKHJlc2lkZW5jZXMpLndoZXJlKGFuZDYoZXE2KHJlc2lkZW5jZXMuYnVpbGRpbmdJZCwgYnVpbGRpbmdJZCksIGVxNihyZXNpZGVuY2VzLmlzQWN0aXZlLCB0cnVlKSkpO1xuICAgICAgICBjb25zdCByZXNpZGVuY2VJZHMgPSBidWlsZGluZ1Jlc2lkZW5jZXMubWFwKChyKSA9PiByLmlkKTtcbiAgICAgICAgaWYgKHJlc2lkZW5jZUlkcy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgYXdhaXQgdHguZGVsZXRlKGRvY3VtZW50cykud2hlcmUoXG4gICAgICAgICAgICBvcjMoZXE2KGRvY3VtZW50cy5idWlsZGluZ0lkLCBidWlsZGluZ0lkKSwgaW5BcnJheTUoZG9jdW1lbnRzLnJlc2lkZW5jZUlkLCByZXNpZGVuY2VJZHMpKVxuICAgICAgICAgICk7XG4gICAgICAgICAgYXdhaXQgdHgudXBkYXRlKHVzZXJSZXNpZGVuY2VzKS5zZXQoeyBpc0FjdGl2ZTogZmFsc2UsIHVwZGF0ZWRBdDogLyogQF9fUFVSRV9fICovIG5ldyBEYXRlKCkgfSkud2hlcmUoaW5BcnJheTUodXNlclJlc2lkZW5jZXMucmVzaWRlbmNlSWQsIHJlc2lkZW5jZUlkcykpO1xuICAgICAgICAgIGNvbnN0IG9ycGhhbmVkVXNlcnMgPSBhd2FpdCB0eC5zZWxlY3QoeyBpZDogdXNlcnMuaWQgfSkuZnJvbSh1c2VycykubGVmdEpvaW4oXG4gICAgICAgICAgICB1c2VyT3JnYW5pemF0aW9ucyxcbiAgICAgICAgICAgIGFuZDYoZXE2KHVzZXJzLmlkLCB1c2VyT3JnYW5pemF0aW9ucy51c2VySWQpLCBlcTYodXNlck9yZ2FuaXphdGlvbnMuaXNBY3RpdmUsIHRydWUpKVxuICAgICAgICAgICkubGVmdEpvaW4oXG4gICAgICAgICAgICB1c2VyUmVzaWRlbmNlcyxcbiAgICAgICAgICAgIGFuZDYoZXE2KHVzZXJzLmlkLCB1c2VyUmVzaWRlbmNlcy51c2VySWQpLCBlcTYodXNlclJlc2lkZW5jZXMuaXNBY3RpdmUsIHRydWUpKVxuICAgICAgICAgICkud2hlcmUoXG4gICAgICAgICAgICBhbmQ2KFxuICAgICAgICAgICAgICBlcTYodXNlcnMuaXNBY3RpdmUsIHRydWUpLFxuICAgICAgICAgICAgICBpc051bGwzKHVzZXJPcmdhbml6YXRpb25zLnVzZXJJZCksXG4gICAgICAgICAgICAgIGlzTnVsbDModXNlclJlc2lkZW5jZXMudXNlcklkKVxuICAgICAgICAgICAgKVxuICAgICAgICAgICk7XG4gICAgICAgICAgaWYgKG9ycGhhbmVkVXNlcnMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgY29uc3Qgb3JwaGFuZWRVc2VySWRzID0gb3JwaGFuZWRVc2Vycy5tYXAoKHUpID0+IHUuaWQpO1xuICAgICAgICAgICAgYXdhaXQgdHgudXBkYXRlKHVzZXJzKS5zZXQoeyBpc0FjdGl2ZTogZmFsc2UsIHVwZGF0ZWRBdDogLyogQF9fUFVSRV9fICovIG5ldyBEYXRlKCkgfSkud2hlcmUoaW5BcnJheTUodXNlcnMuaWQsIG9ycGhhbmVkVXNlcklkcykpO1xuICAgICAgICAgIH1cbiAgICAgICAgICBhd2FpdCB0eC51cGRhdGUocmVzaWRlbmNlcykuc2V0KHsgaXNBY3RpdmU6IGZhbHNlLCB1cGRhdGVkQXQ6IC8qIEBfX1BVUkVfXyAqLyBuZXcgRGF0ZSgpIH0pLndoZXJlKGluQXJyYXk1KHJlc2lkZW5jZXMuaWQsIHJlc2lkZW5jZUlkcykpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGF3YWl0IHR4LmRlbGV0ZShkb2N1bWVudHMpLndoZXJlKGVxNihkb2N1bWVudHMuYnVpbGRpbmdJZCwgYnVpbGRpbmdJZCkpO1xuICAgICAgICB9XG4gICAgICAgIGF3YWl0IHR4LnVwZGF0ZShidWlsZGluZ3MpLnNldCh7IGlzQWN0aXZlOiBmYWxzZSwgdXBkYXRlZEF0OiAvKiBAX19QVVJFX18gKi8gbmV3IERhdGUoKSB9KS53aGVyZShlcTYoYnVpbGRpbmdzLmlkLCBidWlsZGluZ0lkKSk7XG4gICAgICB9KTtcbiAgICAgIGNvbnN0IGJ1aWxkaW5nT3JnID0gYXdhaXQgZGIuc2VsZWN0KHsgb3JnYW5pemF0aW9uSWQ6IGJ1aWxkaW5ncy5vcmdhbml6YXRpb25JZCB9KS5mcm9tKGJ1aWxkaW5ncykud2hlcmUoZXE2KGJ1aWxkaW5ncy5pZCwgYnVpbGRpbmdJZCkpLmxpbWl0KDEpO1xuICAgICAgaWYgKGJ1aWxkaW5nT3JnLmxlbmd0aCA+IDApIHtcbiAgICAgICAgY29uc29sZS5sb2coXCJCdWlsZGluZyBkZWxldGVkIC0gc3RvcmFnZSBjbGVhbnVwIHdpbGwgYmUgaGFuZGxlZCBhdXRvbWF0aWNhbGx5XCIpO1xuICAgICAgfVxuICAgICAgcmVzLmpzb24oe1xuICAgICAgICBtZXNzYWdlOiBcIkJ1aWxkaW5nIGFuZCByZWxhdGVkIGVudGl0aWVzIGRlbGV0ZWQgc3VjY2Vzc2Z1bGx5XCIsXG4gICAgICAgIGRlbGV0ZWRCdWlsZGluZzogYnVpbGRpbmdbMF0ubmFtZVxuICAgICAgfSk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoXCJcXHUyNzRDIEVycm9yIGR1cmluZyBjYXNjYWRlIGRlbGV0ZTpcIiwgZXJyb3IpO1xuICAgICAgcmVzLnN0YXR1cyg1MDApLmpzb24oe1xuICAgICAgICBfZXJyb3I6IFwiSW50ZXJuYWwgc2VydmVyIGVycm9yXCIsXG4gICAgICAgIG1lc3NhZ2U6IFwiRmFpbGVkIHRvIGRlbGV0ZSBidWlsZGluZyBhbmQgcmVsYXRlZCBlbnRpdGllc1wiXG4gICAgICB9KTtcbiAgICB9XG4gIH0pO1xufVxuXG4vLyBzZXJ2ZXIvYXBpL2RvY3VtZW50cy50c1xuaW5pdF9zdG9yYWdlKCk7XG5pbml0X2RvY3VtZW50cygpO1xuaW5pdF9kYigpO1xuaW1wb3J0IHsgeiBhcyB6MTEgfSBmcm9tIFwiem9kXCI7XG5pbXBvcnQgbXVsdGVyIGZyb20gXCJtdWx0ZXJcIjtcbmltcG9ydCBwYXRoMyBmcm9tIFwicGF0aFwiO1xuaW1wb3J0IGZzMiBmcm9tIFwiZnNcIjtcbmltcG9ydCBjcnlwdG80IGZyb20gXCJjcnlwdG9cIjtcbmltcG9ydCB7IHY0IGFzIHV1aWR2NCB9IGZyb20gXCJ1dWlkXCI7XG5pbXBvcnQgeyBzcWwgYXMgc3FsMTYgfSBmcm9tIFwiZHJpenpsZS1vcm1cIjtcbnZhciB1cGxvYWQgPSBtdWx0ZXIoe1xuICBkZXN0OiBcIi90bXAvdXBsb2Fkcy9cIixcbiAgbGltaXRzOiB7XG4gICAgZmlsZVNpemU6IDUwICogMTAyNCAqIDEwMjRcbiAgICAvLyA1ME1CIGxpbWl0XG4gIH0sXG4gIGZpbGVGaWx0ZXI6IChyZXEsIGZpbGUsIGNiKSA9PiB7XG4gICAgY29uc3QgYWxsb3dlZFR5cGVzID0gL1xcLihwZGZ8ZG9jfGRvY3h8eGxzfHhsc3h8cHB0fHBwdHh8dHh0fGpwZ3xqcGVnfHBuZ3xnaWZ8Ym1wfHRpZmYpJC9pO1xuICAgIGlmIChhbGxvd2VkVHlwZXMudGVzdChmaWxlLm9yaWdpbmFsbmFtZSkpIHtcbiAgICAgIGNiKG51bGwsIHRydWUpO1xuICAgIH0gZWxzZSB7XG4gICAgICBjYihuZXcgRXJyb3IoXCJJbnZhbGlkIGZpbGUgdHlwZS4gT25seSBkb2N1bWVudHMgYW5kIGltYWdlcyBhcmUgYWxsb3dlZC5cIikpO1xuICAgIH1cbiAgfVxufSk7XG52YXIgRE9DVU1FTlRfQ0FURUdPUklFUyA9IFtcbiAgXCJieWxhd1wiLFxuICBcImZpbmFuY2lhbFwiLFxuICBcIm1haW50ZW5hbmNlXCIsXG4gIFwibGVnYWxcIixcbiAgXCJtZWV0aW5nX21pbnV0ZXNcIixcbiAgXCJpbnN1cmFuY2VcIixcbiAgXCJjb250cmFjdHNcIixcbiAgXCJwZXJtaXRzXCIsXG4gIFwiaW5zcGVjdGlvblwiLFxuICBcImxlYXNlXCIsXG4gIFwiY29ycmVzcG9uZGVuY2VcIixcbiAgXCJ1dGlsaXRpZXNcIixcbiAgXCJvdGhlclwiXG5dO1xudmFyIGNyZWF0ZURvY3VtZW50U2NoZW1hID0gaW5zZXJ0RG9jdW1lbnRTY2hlbWEuZXh0ZW5kKHtcbiAgY2F0ZWdvcnk6IHoxMS5lbnVtKERPQ1VNRU5UX0NBVEVHT1JJRVMpLFxuICB0aXRsZTogejExLnN0cmluZygpLm1pbigxKS5tYXgoMjU1KSxcbiAgZGVzY3JpcHRpb246IHoxMS5zdHJpbmcoKS5vcHRpb25hbCgpLFxuICBpc1Zpc2libGVUb1RlbmFudHM6IHoxMS5ib29sZWFuKCkuZGVmYXVsdChmYWxzZSlcbn0pO1xudmFyIGNyZWF0ZUJ1aWxkaW5nRG9jdW1lbnRTY2hlbWEgPSBpbnNlcnREb2N1bWVudFNjaGVtYS5leHRlbmQoe1xuICB0eXBlOiB6MTEuZW51bShET0NVTUVOVF9DQVRFR09SSUVTKSxcbiAgdGl0bGU6IHoxMS5zdHJpbmcoKS5taW4oMSkubWF4KDI1NSkub3B0aW9uYWwoKSxcbiAgZGVzY3JpcHRpb246IHoxMS5zdHJpbmcoKS5vcHRpb25hbCgpXG59KTtcbnZhciBjcmVhdGVSZXNpZGVudERvY3VtZW50U2NoZW1hID0gaW5zZXJ0RG9jdW1lbnRTY2hlbWEuZXh0ZW5kKHtcbiAgdHlwZTogejExLmVudW0oRE9DVU1FTlRfQ0FURUdPUklFUyksXG4gIHRpdGxlOiB6MTEuc3RyaW5nKCkubWluKDEpLm1heCgyNTUpLm9wdGlvbmFsKCksXG4gIGRlc2NyaXB0aW9uOiB6MTEuc3RyaW5nKCkub3B0aW9uYWwoKVxufSk7XG52YXIgdXBsb2FkRG9jdW1lbnRSZWNvcmRTY2hlbWEgPSB6MTEub2JqZWN0KHtcbiAgbmFtZTogejExLnN0cmluZygpLm1pbigxKS5tYXgoMjU1KSxcbiAgZGVzY3JpcHRpb246IHoxMS5zdHJpbmcoKS5vcHRpb25hbCgpLFxuICBkb2N1bWVudFR5cGU6IHoxMS5lbnVtKERPQ1VNRU5UX0NBVEVHT1JJRVMpLFxuICBpc1Zpc2libGVUb1RlbmFudHM6IHoxMS5ib29sZWFuKCkuZGVmYXVsdChmYWxzZSksXG4gIHJlc2lkZW5jZUlkOiB6MTEuc3RyaW5nKCkudXVpZCgpLm9wdGlvbmFsKCksXG4gIGJ1aWxkaW5nSWQ6IHoxMS5zdHJpbmcoKS51dWlkKCkub3B0aW9uYWwoKSxcbiAgYXR0YWNoZWRUb1R5cGU6IHoxMS5zdHJpbmcoKS5vcHRpb25hbCgpLFxuICBhdHRhY2hlZFRvSWQ6IHoxMS5zdHJpbmcoKS5vcHRpb25hbCgpXG59KTtcbmZ1bmN0aW9uIHJlZ2lzdGVyRG9jdW1lbnRSb3V0ZXMoYXBwMikge1xuICBjb25zb2xlLmxvZyhgWyR7KC8qIEBfX1BVUkVfXyAqLyBuZXcgRGF0ZSgpKS50b0lTT1N0cmluZygpfV0gXFx1ezFGNTI3fSBSZWdpc3RlcmluZyBkb2N1bWVudCByb3V0ZXMuLi5gKTtcbiAgY29uc3QgZXJyb3JMb2cgPSBbXTtcbiAgY29uc3QgdGVzdERhdGFiYXNlQ29ubmVjdGlvbiA9IGFzeW5jICgpID0+IHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgZGIuZXhlY3V0ZShzcWwxNmBTRUxFQ1QgMSBhcyB0ZXN0YCk7XG4gICAgICByZXR1cm4ge1xuICAgICAgICBzdWNjZXNzOiB0cnVlLFxuICAgICAgICByZXN1bHQ6IHJlc3VsdC5yb3dzWzBdLFxuICAgICAgICB1cmxfdHJ1bmNhdGVkOiBwcm9jZXNzLmVudi5EQVRBQkFTRV9VUkw/LnN1YnN0cmluZygwLCA1MCkgKyBcIi4uLlwiXG4gICAgICB9O1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICByZXR1cm4ge1xuICAgICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgICAgZXJyb3I6IGVycm9yLm1lc3NhZ2UsXG4gICAgICAgIHVybF90cnVuY2F0ZWQ6IHByb2Nlc3MuZW52LkRBVEFCQVNFX1VSTD8uc3Vic3RyaW5nKDAsIDUwKSArIFwiLi4uXCJcbiAgICAgIH07XG4gICAgfVxuICB9O1xuICBjb25zdCB0ZXN0U2FtcGxlUXVlcnkgPSBhc3luYyAoKSA9PiB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGRiLmV4ZWN1dGUoc3FsMTZgXG4gICAgICAgIFNFTEVDVCBDT1VOVCgqKSBhcyBkb2N1bWVudF9jb3VudCBcbiAgICAgICAgRlJPTSBkb2N1bWVudHMgXG4gICAgICAgIExJTUlUIDFcbiAgICAgIGApO1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgc3VjY2VzczogdHJ1ZSxcbiAgICAgICAgZG9jdW1lbnRfY291bnQ6IHJlc3VsdC5yb3dzWzBdPy5kb2N1bWVudF9jb3VudCB8fCAwXG4gICAgICB9O1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICByZXR1cm4ge1xuICAgICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgICAgZXJyb3I6IGVycm9yLm1lc3NhZ2UsXG4gICAgICAgIHN0YWNrOiBlcnJvci5zdGFjaz8uc3Vic3RyaW5nKDAsIDIwMCkgKyBcIi4uLlwiXG4gICAgICB9O1xuICAgIH1cbiAgfTtcbiAgY29uc3QgY2hlY2tFbnVtVmFsdWVzID0gYXN5bmMgKCkgPT4ge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBkYi5leGVjdXRlKHNxbDE2YFxuICAgICAgICBTRUxFQ1QgZW51bWxhYmVsIFxuICAgICAgICBGUk9NIHBnX2VudW0gXG4gICAgICAgIFdIRVJFIGVudW10eXBpZCA9IChcbiAgICAgICAgICBTRUxFQ1Qgb2lkIFxuICAgICAgICAgIEZST00gcGdfdHlwZSBcbiAgICAgICAgICBXSEVSRSB0eXBuYW1lID0gJ3VzZXJfcm9sZSdcbiAgICAgICAgKVxuICAgICAgICBPUkRFUiBCWSBlbnVtc29ydG9yZGVyXG4gICAgICBgKTtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHN1Y2Nlc3M6IHRydWUsXG4gICAgICAgIHByb2R1Y3Rpb25fZW51bV92YWx1ZXM6IHJlc3VsdC5yb3dzLm1hcCgocm93KSA9PiByb3cuZW51bWxhYmVsKVxuICAgICAgfTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICAgIGVycm9yOiBlcnJvci5tZXNzYWdlXG4gICAgICB9O1xuICAgIH1cbiAgfTtcbiAgY29uc3QgY2hlY2tVc2VyT3JnYW5pemF0aW9uTGlua3MgPSBhc3luYyAoKSA9PiB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHVzZXJDb3VudCA9IGF3YWl0IGRiLmV4ZWN1dGUoc3FsMTZgU0VMRUNUIENPVU5UKCopIGFzIHRvdGFsIEZST00gdXNlcnMgV0hFUkUgaXNfYWN0aXZlID0gdHJ1ZWApO1xuICAgICAgY29uc3Qgb3JnQ291bnQgPSBhd2FpdCBkYi5leGVjdXRlKHNxbDE2YFNFTEVDVCBDT1VOVCgqKSBhcyB0b3RhbCBGUk9NIG9yZ2FuaXphdGlvbnMgV0hFUkUgaXNfYWN0aXZlID0gdHJ1ZWApO1xuICAgICAgY29uc3QgbGlua0NvdW50ID0gYXdhaXQgZGIuZXhlY3V0ZShzcWwxNmBTRUxFQ1QgQ09VTlQoKikgYXMgdG90YWwgRlJPTSB1c2VyX29yZ2FuaXphdGlvbnMgV0hFUkUgaXNfYWN0aXZlID0gdHJ1ZWApO1xuICAgICAgY29uc3Qgb3JwaGFuVXNlcnMgPSBhd2FpdCBkYi5leGVjdXRlKHNxbDE2YFxuICAgICAgICBTRUxFQ1QgdS5pZCwgdS5lbWFpbCwgdS5yb2xlIFxuICAgICAgICBGUk9NIHVzZXJzIHUgXG4gICAgICAgIExFRlQgSk9JTiB1c2VyX29yZ2FuaXphdGlvbnMgdW8gT04gdS5pZCA9IHVvLnVzZXJfaWQgQU5EIHVvLmlzX2FjdGl2ZSA9IHRydWVcbiAgICAgICAgV0hFUkUgdS5pc19hY3RpdmUgPSB0cnVlIEFORCB1by51c2VyX2lkIElTIE5VTExcbiAgICAgICAgTElNSVQgMTBcbiAgICAgIGApO1xuICAgICAgY29uc3QgdGVzdFVzZXIgPSBhd2FpdCBkYi5leGVjdXRlKHNxbDE2YFxuICAgICAgICBTRUxFQ1QgdS5lbWFpbCwgdS5yb2xlLCB1by5vcmdhbml6YXRpb25faWQsIG8ubmFtZSBhcyBvcmdfbmFtZVxuICAgICAgICBGUk9NIHVzZXJzIHVcbiAgICAgICAgTEVGVCBKT0lOIHVzZXJfb3JnYW5pemF0aW9ucyB1byBPTiB1LmlkID0gdW8udXNlcl9pZCBBTkQgdW8uaXNfYWN0aXZlID0gdHJ1ZSAgXG4gICAgICAgIExFRlQgSk9JTiBvcmdhbml6YXRpb25zIG8gT04gdW8ub3JnYW5pemF0aW9uX2lkID0gby5pZFxuICAgICAgICBXSEVSRSB1LmlkID0gJzIyMmY1YTBkLTZiYzYtNGYyOC05ZjRkLTMyYzEzM2VlZDMzMydcbiAgICAgIGApO1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgc3VjY2VzczogdHJ1ZSxcbiAgICAgICAgc3RhdHM6IHtcbiAgICAgICAgICB0b3RhbF91c2VyczogdXNlckNvdW50LnJvd3NbMF0/LnRvdGFsIHx8IDAsXG4gICAgICAgICAgdG90YWxfb3JnYW5pemF0aW9uczogb3JnQ291bnQucm93c1swXT8udG90YWwgfHwgMCxcbiAgICAgICAgICB0b3RhbF9saW5rczogbGlua0NvdW50LnJvd3NbMF0/LnRvdGFsIHx8IDAsXG4gICAgICAgICAgb3JwaGFuX3VzZXJfY291bnQ6IG9ycGhhblVzZXJzLnJvd3MubGVuZ3RoXG4gICAgICAgIH0sXG4gICAgICAgIG9ycGhhbl91c2Vyczogb3JwaGFuVXNlcnMucm93cyxcbiAgICAgICAgdGVzdF91c2VyX3N0YXR1czogdGVzdFVzZXIucm93c1swXSB8fCBudWxsXG4gICAgICB9O1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICByZXR1cm4ge1xuICAgICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgICAgZXJyb3I6IGVycm9yLm1lc3NhZ2VcbiAgICAgIH07XG4gICAgfVxuICB9O1xuICBhcHAyLnBvc3QoXCIvYXBpL2RvY3VtZW50cy9jbGVhbnVwLWVudW1cIiwgYXN5bmMgKHJlcSwgcmVzKSA9PiB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHVzZXJDaGVjayA9IGF3YWl0IGRiLmV4ZWN1dGUoc3FsMTZgXG4gICAgICAgIFNFTEVDVCBDT1VOVCgqKSBhcyBvd25lcl9jb3VudCBcbiAgICAgICAgRlJPTSB1c2VycyBcbiAgICAgICAgV0hFUkUgcm9sZSA9ICdvd25lcidcbiAgICAgIGApO1xuICAgICAgY29uc3Qgb3duZXJDb3VudCA9IE51bWJlcih1c2VyQ2hlY2sucm93c1swXT8ub3duZXJfY291bnQpIHx8IDA7XG4gICAgICBpZiAob3duZXJDb3VudCA+IDApIHtcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHtcbiAgICAgICAgICBlcnJvcjogXCJDYW5ub3QgcmVtb3ZlIG93bmVyIHJvbGUgLSB1c2VycyBzdGlsbCBhc3NpZ25lZCB0byBpdFwiLFxuICAgICAgICAgIG93bmVyX2NvdW50OiBvd25lckNvdW50XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgICAgYXdhaXQgZGIuZXhlY3V0ZShzcWwxNmBcbiAgICAgICAgQUxURVIgVFlQRSB1c2VyX3JvbGUgRFJPUCBWQUxVRSBJRiBFWElTVFMgJ293bmVyJ1xuICAgICAgYCk7XG4gICAgICByZXMuanNvbih7XG4gICAgICAgIG1lc3NhZ2U6IFwiU3VjY2Vzc2Z1bGx5IHJlbW92ZWQgdW51c2VkIG93bmVyIHJvbGVcIixcbiAgICAgICAgc2FmZV90b19wdXNoX3NjaGVtYTogdHJ1ZSxcbiAgICAgICAgdGltZXN0YW1wOiAoLyogQF9fUFVSRV9fICovIG5ldyBEYXRlKCkpLnRvSVNPU3RyaW5nKClcbiAgICAgIH0pO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKFwiXFx1Mjc0QyBFcnJvciBkdXJpbmcgZW51bSBjbGVhbnVwOlwiLCBlcnJvcik7XG4gICAgICByZXMuc3RhdHVzKDUwMCkuanNvbih7XG4gICAgICAgIGVycm9yOiBcIkVudW0gY2xlYW51cCBmYWlsZWRcIixcbiAgICAgICAgbWVzc2FnZTogZXJyb3IubWVzc2FnZSxcbiAgICAgICAgc3VnZ2VzdGlvbjogXCJUcnkgcnVubmluZyBucG0gcnVuIGRiOnB1c2ggLS1mb3JjZSBpbnN0ZWFkXCJcbiAgICAgIH0pO1xuICAgIH1cbiAgfSk7XG4gIGFwcDIucG9zdChcIi9hcGkvZG9jdW1lbnRzL2ZpeC11c2VyLWxpbmtzXCIsIGFzeW5jIChyZXEsIHJlcykgPT4ge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCBvcnBoYW5Vc2VycyA9IGF3YWl0IGRiLmV4ZWN1dGUoc3FsMTZgXG4gICAgICAgIFNFTEVDVCB1LmlkLCB1LmVtYWlsLCB1LnJvbGUgXG4gICAgICAgIEZST00gdXNlcnMgdSBcbiAgICAgICAgTEVGVCBKT0lOIHVzZXJfb3JnYW5pemF0aW9ucyB1byBPTiB1LmlkID0gdW8udXNlcl9pZCBBTkQgdW8uaXNfYWN0aXZlID0gdHJ1ZVxuICAgICAgICBXSEVSRSB1LmlzX2FjdGl2ZSA9IHRydWUgQU5EIHVvLnVzZXJfaWQgSVMgTlVMTFxuICAgICAgYCk7XG4gICAgICBpZiAob3JwaGFuVXNlcnMucm93cy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgcmV0dXJuIHJlcy5qc29uKHtcbiAgICAgICAgICBtZXNzYWdlOiBcIkFsbCB1c2VycyBhbHJlYWR5IGhhdmUgb3JnYW5pemF0aW9uIGxpbmtzXCIsXG4gICAgICAgICAgYWN0aW9uX3Rha2VuOiBcIm5vbmVcIixcbiAgICAgICAgICB0aW1lc3RhbXA6ICgvKiBAX19QVVJFX18gKi8gbmV3IERhdGUoKSkudG9JU09TdHJpbmcoKVxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICAgIGxldCBkZWZhdWx0T3JnID0gYXdhaXQgZGIuZXhlY3V0ZShzcWwxNmBcbiAgICAgICAgU0VMRUNUIGlkLCBuYW1lIEZST00gb3JnYW5pemF0aW9ucyBXSEVSRSBpc19hY3RpdmUgPSB0cnVlIExJTUlUIDFcbiAgICAgIGApO1xuICAgICAgbGV0IG9yZ2FuaXphdGlvbklkO1xuICAgICAgbGV0IG9yZ2FuaXphdGlvbk5hbWU7XG4gICAgICBpZiAoZGVmYXVsdE9yZy5yb3dzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICBvcmdhbml6YXRpb25JZCA9IGNyeXB0bzQucmFuZG9tVVVJRCgpO1xuICAgICAgICBvcmdhbml6YXRpb25OYW1lID0gXCJEZWZhdWx0IE9yZ2FuaXphdGlvblwiO1xuICAgICAgICBhd2FpdCBkYi5leGVjdXRlKHNxbDE2YFxuICAgICAgICAgIElOU0VSVCBJTlRPIG9yZ2FuaXphdGlvbnMgKGlkLCBuYW1lLCB0eXBlLCBhZGRyZXNzLCBwaG9uZSwgZW1haWwsIGlzX2FjdGl2ZSwgY3JlYXRlZF9hdCwgdXBkYXRlZF9hdClcbiAgICAgICAgICBWQUxVRVMgKCR7b3JnYW5pemF0aW9uSWR9LCAke29yZ2FuaXphdGlvbk5hbWV9LCAnY29uZG9taW5pdW0nLCAnMTIzIE1haW4gU3QnLCAnNTE0LTU1NS0wMTAwJywgJ2FkbWluQGtvdmVvLmNhJywgdHJ1ZSwgTk9XKCksIE5PVygpKVxuICAgICAgICBgKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIG9yZ2FuaXphdGlvbklkID0gZGVmYXVsdE9yZy5yb3dzWzBdLmlkO1xuICAgICAgICBvcmdhbml6YXRpb25OYW1lID0gZGVmYXVsdE9yZy5yb3dzWzBdLm5hbWU7XG4gICAgICB9XG4gICAgICBjb25zdCBsaW5rUHJvbWlzZXMgPSBvcnBoYW5Vc2Vycy5yb3dzLm1hcCgodXNlcikgPT4ge1xuICAgICAgICBjb25zdCBsaW5rSWQgPSBjcnlwdG80LnJhbmRvbVVVSUQoKTtcbiAgICAgICAgcmV0dXJuIGRiLmV4ZWN1dGUoc3FsMTZgXG4gICAgICAgICAgSU5TRVJUIElOVE8gdXNlcl9vcmdhbml6YXRpb25zIChpZCwgdXNlcl9pZCwgb3JnYW5pemF0aW9uX2lkLCByb2xlLCBpc19hY3RpdmUsIGNyZWF0ZWRfYXQsIHVwZGF0ZWRfYXQpXG4gICAgICAgICAgVkFMVUVTICgke2xpbmtJZH0sICR7dXNlci5pZH0sICR7b3JnYW5pemF0aW9uSWR9LCAke3VzZXIucm9sZX0sIHRydWUsIE5PVygpLCBOT1coKSlcbiAgICAgICAgYCk7XG4gICAgICB9KTtcbiAgICAgIGF3YWl0IFByb21pc2UuYWxsKGxpbmtQcm9taXNlcyk7XG4gICAgICByZXMuanNvbih7XG4gICAgICAgIG1lc3NhZ2U6IFwiU3VjY2Vzc2Z1bGx5IGxpbmtlZCB1c2VycyB0byBvcmdhbml6YXRpb25zXCIsXG4gICAgICAgIHVzZXJzX2xpbmtlZDogb3JwaGFuVXNlcnMucm93cy5sZW5ndGgsXG4gICAgICAgIG9yZ2FuaXphdGlvbl9pZDogb3JnYW5pemF0aW9uSWQsXG4gICAgICAgIG9yZ2FuaXphdGlvbl9uYW1lOiBvcmdhbml6YXRpb25OYW1lLFxuICAgICAgICBsaW5rZWRfdXNlcnM6IG9ycGhhblVzZXJzLnJvd3MubWFwKCh1KSA9PiAoeyBpZDogdS5pZCwgZW1haWw6IHUuZW1haWwsIHJvbGU6IHUucm9sZSB9KSksXG4gICAgICAgIHRpbWVzdGFtcDogKC8qIEBfX1BVUkVfXyAqLyBuZXcgRGF0ZSgpKS50b0lTT1N0cmluZygpXG4gICAgICB9KTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcihcIlxcdTI3NEMgRXJyb3IgZml4aW5nIHVzZXItb3JnYW5pemF0aW9uIGxpbmtzOlwiLCBlcnJvcik7XG4gICAgICByZXMuc3RhdHVzKDUwMCkuanNvbih7XG4gICAgICAgIGVycm9yOiBcIkZhaWxlZCB0byBmaXggdXNlci1vcmdhbml6YXRpb24gbGlua3NcIixcbiAgICAgICAgbWVzc2FnZTogZXJyb3IubWVzc2FnZSxcbiAgICAgICAgdGltZXN0YW1wOiAoLyogQF9fUFVSRV9fICovIG5ldyBEYXRlKCkpLnRvSVNPU3RyaW5nKClcbiAgICAgIH0pO1xuICAgIH1cbiAgfSk7XG4gIGFwcDIucG9zdChcIi9hcGkvZG9jdW1lbnRzL2ZpeC1lbnVtLW1pZ3JhdGlvblwiLCBhc3luYyAocmVxLCByZXMpID0+IHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgZW51bUNoZWNrID0gYXdhaXQgZGIuZXhlY3V0ZShzcWwxNmBcbiAgICAgICAgU0VMRUNUIGVudW1sYWJlbCwgZW51bXNvcnRvcmRlciBcbiAgICAgICAgRlJPTSBwZ19lbnVtIFxuICAgICAgICBXSEVSRSBlbnVtdHlwaWQgPSAoU0VMRUNUIG9pZCBGUk9NIHBnX3R5cGUgV0hFUkUgdHlwbmFtZSA9ICd1c2VyX3JvbGUnKVxuICAgICAgICBPUkRFUiBCWSBlbnVtc29ydG9yZGVyXG4gICAgICBgKTtcbiAgICAgIGNvbnN0IGN1cnJlbnRFbnVtVmFsdWVzID0gZW51bUNoZWNrLnJvd3MubWFwKChyb3cpID0+IHJvdy5lbnVtbGFiZWwpO1xuICAgICAgY29uc3QgdXNlclJvbGVVc2FnZSA9IGF3YWl0IGRiLmV4ZWN1dGUoc3FsMTZgXG4gICAgICAgIFNFTEVDVCByb2xlLCBDT1VOVCgqKSBhcyBjb3VudCBcbiAgICAgICAgRlJPTSB1c2VycyBcbiAgICAgICAgR1JPVVAgQlkgcm9sZVxuICAgICAgYCk7XG4gICAgICBjb25zdCB0YXJnZXRFbnVtVmFsdWVzID0gW1wiYWRtaW5cIiwgXCJtYW5hZ2VyXCIsIFwidGVuYW50XCIsIFwicmVzaWRlbnRcIiwgXCJkZW1vX21hbmFnZXJcIiwgXCJkZW1vX3RlbmFudFwiLCBcImRlbW9fcmVzaWRlbnRcIl07XG4gICAgICBjb25zdCBvcmRlck1hdGNoZXMgPSBKU09OLnN0cmluZ2lmeShjdXJyZW50RW51bVZhbHVlcykgPT09IEpTT04uc3RyaW5naWZ5KHRhcmdldEVudW1WYWx1ZXMpO1xuICAgICAgaWYgKG9yZGVyTWF0Y2hlcykge1xuICAgICAgICByZXR1cm4gcmVzLmpzb24oe1xuICAgICAgICAgIG1lc3NhZ2U6IFwiRW51bSB2YWx1ZXMgYWxyZWFkeSBpbiBjb3JyZWN0IG9yZGVyXCIsXG4gICAgICAgICAgY3VycmVudF92YWx1ZXM6IGN1cnJlbnRFbnVtVmFsdWVzLFxuICAgICAgICAgIHRhcmdldF92YWx1ZXM6IHRhcmdldEVudW1WYWx1ZXMsXG4gICAgICAgICAgbWlncmF0aW9uX25lZWRlZDogZmFsc2VcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgICBhd2FpdCBkYi5leGVjdXRlKHNxbDE2YENSRUFURSBUWVBFIHVzZXJfcm9sZV9uZXcgQVMgRU5VTSAoJ2FkbWluJywgJ21hbmFnZXInLCAndGVuYW50JywgJ3Jlc2lkZW50JywgJ2RlbW9fbWFuYWdlcicsICdkZW1vX3RlbmFudCcsICdkZW1vX3Jlc2lkZW50JylgKTtcbiAgICAgIGF3YWl0IGRiLmV4ZWN1dGUoc3FsMTZgXG4gICAgICAgIEFMVEVSIFRBQkxFIHVzZXJzIFxuICAgICAgICBBTFRFUiBDT0xVTU4gcm9sZSBUWVBFIHVzZXJfcm9sZV9uZXcgXG4gICAgICAgIFVTSU5HIHJvbGU6OnRleHQ6OnVzZXJfcm9sZV9uZXdcbiAgICAgIGApO1xuICAgICAgYXdhaXQgZGIuZXhlY3V0ZShzcWwxNmBcbiAgICAgICAgQUxURVIgVEFCTEUgdXNlcl9vcmdhbml6YXRpb25zIFxuICAgICAgICBBTFRFUiBDT0xVTU4gb3JnYW5pemF0aW9uX3JvbGUgVFlQRSB1c2VyX3JvbGVfbmV3IFxuICAgICAgICBVU0lORyBvcmdhbml6YXRpb25fcm9sZTo6dGV4dDo6dXNlcl9yb2xlX25ld1xuICAgICAgYCk7XG4gICAgICBhd2FpdCBkYi5leGVjdXRlKHNxbDE2YFxuICAgICAgICBBTFRFUiBUQUJMRSByb2xlX3Blcm1pc3Npb25zIFxuICAgICAgICBBTFRFUiBDT0xVTU4gcm9sZSBUWVBFIHVzZXJfcm9sZV9uZXcgXG4gICAgICAgIFVTSU5HIHJvbGU6OnRleHQ6OnVzZXJfcm9sZV9uZXdcbiAgICAgIGApO1xuICAgICAgYXdhaXQgZGIuZXhlY3V0ZShzcWwxNmBEUk9QIFRZUEUgdXNlcl9yb2xlYCk7XG4gICAgICBhd2FpdCBkYi5leGVjdXRlKHNxbDE2YEFMVEVSIFRZUEUgdXNlcl9yb2xlX25ldyBSRU5BTUUgVE8gdXNlcl9yb2xlYCk7XG4gICAgICByZXMuanNvbih7XG4gICAgICAgIG1lc3NhZ2U6IFwiU3VjY2Vzc2Z1bGx5IG1pZ3JhdGVkIHVzZXJfcm9sZSBlbnVtXCIsXG4gICAgICAgIG9sZF92YWx1ZXM6IGN1cnJlbnRFbnVtVmFsdWVzLFxuICAgICAgICBuZXdfdmFsdWVzOiB0YXJnZXRFbnVtVmFsdWVzLFxuICAgICAgICB1c2VyX3JvbGVfdXNhZ2U6IHVzZXJSb2xlVXNhZ2Uucm93cyxcbiAgICAgICAgdGltZXN0YW1wOiAoLyogQF9fUFVSRV9fICovIG5ldyBEYXRlKCkpLnRvSVNPU3RyaW5nKClcbiAgICAgIH0pO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKFwiXFx1Mjc0QyBFcnJvciBkdXJpbmcgZW51bSBtaWdyYXRpb246XCIsIGVycm9yKTtcbiAgICAgIHJlcy5zdGF0dXMoNTAwKS5qc29uKHtcbiAgICAgICAgZXJyb3I6IFwiRW51bSBtaWdyYXRpb24gZmFpbGVkXCIsXG4gICAgICAgIG1lc3NhZ2U6IGVycm9yLm1lc3NhZ2UsXG4gICAgICAgIHN1Z2dlc3Rpb246IFwiVGhpcyBpcyBhIGNvbXBsZXggbWlncmF0aW9uIC0gbWF5IG5lZWQgbWFudWFsIGludGVydmVudGlvblwiLFxuICAgICAgICB0aW1lc3RhbXA6ICgvKiBAX19QVVJFX18gKi8gbmV3IERhdGUoKSkudG9JU09TdHJpbmcoKVxuICAgICAgfSk7XG4gICAgfVxuICB9KTtcbiAgYXBwMi5wb3N0KFwiL2FwaS9kb2N1bWVudHMvZml4LWludml0YXRpb25zLWRlcGVuZGVuY3lcIiwgYXN5bmMgKHJlcSwgcmVzKSA9PiB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IGludml0YXRpb25zU2NoZW1hID0gYXdhaXQgZGIuZXhlY3V0ZShzcWwxNmBcbiAgICAgICAgU0VMRUNUIGNvbHVtbl9uYW1lLCBkYXRhX3R5cGUsIGNvbHVtbl9kZWZhdWx0XG4gICAgICAgIEZST00gaW5mb3JtYXRpb25fc2NoZW1hLmNvbHVtbnMgXG4gICAgICAgIFdIRVJFIHRhYmxlX25hbWUgPSAnaW52aXRhdGlvbnMnIEFORCBjb2x1bW5fbmFtZSA9ICdyb2xlJ1xuICAgICAgYCk7XG4gICAgICBhd2FpdCBkYi5leGVjdXRlKHNxbDE2YFxuICAgICAgICBBTFRFUiBUQUJMRSBpbnZpdGF0aW9ucyBcbiAgICAgICAgQUxURVIgQ09MVU1OIHJvbGUgRFJPUCBERUZBVUxUXG4gICAgICBgKTtcbiAgICAgIGNvbnN0IGVudW1EZXBlbmRlbmNpZXMgPSBhd2FpdCBkYi5leGVjdXRlKHNxbDE2YFxuICAgICAgICBTRUxFQ1QgXG4gICAgICAgICAgdC50YWJsZV9uYW1lLFxuICAgICAgICAgIGMuY29sdW1uX25hbWUsXG4gICAgICAgICAgYy5jb2x1bW5fZGVmYXVsdFxuICAgICAgICBGUk9NIGluZm9ybWF0aW9uX3NjaGVtYS50YWJsZXMgdFxuICAgICAgICBKT0lOIGluZm9ybWF0aW9uX3NjaGVtYS5jb2x1bW5zIGMgT04gdC50YWJsZV9uYW1lID0gYy50YWJsZV9uYW1lXG4gICAgICAgIFdIRVJFIGMuZGF0YV90eXBlID0gJ1VTRVItREVGSU5FRCcgXG4gICAgICAgIEFORCBjLnVkdF9uYW1lID0gJ3VzZXJfcm9sZSdcbiAgICAgICAgQU5EIGMuY29sdW1uX2RlZmF1bHQgSVMgTk9UIE5VTExcbiAgICAgIGApO1xuICAgICAgcmVzLmpzb24oe1xuICAgICAgICBtZXNzYWdlOiBcIlN1Y2Nlc3NmdWxseSByZW1vdmVkIGludml0YXRpb25zIHRhYmxlIGVudW0gZGVwZW5kZW5jeVwiLFxuICAgICAgICByZW1vdmVkX2RlZmF1bHRzOiBpbnZpdGF0aW9uc1NjaGVtYS5yb3dzLFxuICAgICAgICByZW1haW5pbmdfZGVwZW5kZW5jaWVzOiBlbnVtRGVwZW5kZW5jaWVzLnJvd3MsXG4gICAgICAgIG5leHRfc3RlcDogXCJSdW4gbnBtIHJ1biBkYjpwdXNoIG5vdywgdGhlbiBjYWxsIC9hcGkvZG9jdW1lbnRzL3Jlc3RvcmUtaW52aXRhdGlvbnMtZGVmYXVsdFwiLFxuICAgICAgICB0aW1lc3RhbXA6ICgvKiBAX19QVVJFX18gKi8gbmV3IERhdGUoKSkudG9JU09TdHJpbmcoKVxuICAgICAgfSk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoXCJcXHUyNzRDIEVycm9yIGZpeGluZyBpbnZpdGF0aW9ucyBkZXBlbmRlbmN5OlwiLCBlcnJvcik7XG4gICAgICByZXMuc3RhdHVzKDUwMCkuanNvbih7XG4gICAgICAgIGVycm9yOiBcIkZhaWxlZCB0byBmaXggaW52aXRhdGlvbnMgZGVwZW5kZW5jeVwiLFxuICAgICAgICBtZXNzYWdlOiBlcnJvci5tZXNzYWdlLFxuICAgICAgICB0aW1lc3RhbXA6ICgvKiBAX19QVVJFX18gKi8gbmV3IERhdGUoKSkudG9JU09TdHJpbmcoKVxuICAgICAgfSk7XG4gICAgfVxuICB9KTtcbiAgYXBwMi5wb3N0KFwiL2FwaS9kb2N1bWVudHMvcmVzdG9yZS1pbnZpdGF0aW9ucy1kZWZhdWx0XCIsIGFzeW5jIChyZXEsIHJlcykgPT4ge1xuICAgIHRyeSB7XG4gICAgICBhd2FpdCBkYi5leGVjdXRlKHNxbDE2YFxuICAgICAgICBBTFRFUiBUQUJMRSBpbnZpdGF0aW9ucyBcbiAgICAgICAgQUxURVIgQ09MVU1OIHJvbGUgU0VUIERFRkFVTFQgJ3RlbmFudCdcbiAgICAgIGApO1xuICAgICAgY29uc3QgdmVyaWZpY2F0aW9uID0gYXdhaXQgZGIuZXhlY3V0ZShzcWwxNmBcbiAgICAgICAgU0VMRUNUIGNvbHVtbl9uYW1lLCBjb2x1bW5fZGVmYXVsdFxuICAgICAgICBGUk9NIGluZm9ybWF0aW9uX3NjaGVtYS5jb2x1bW5zIFxuICAgICAgICBXSEVSRSB0YWJsZV9uYW1lID0gJ2ludml0YXRpb25zJyBBTkQgY29sdW1uX25hbWUgPSAncm9sZSdcbiAgICAgIGApO1xuICAgICAgcmVzLmpzb24oe1xuICAgICAgICBtZXNzYWdlOiBcIlN1Y2Nlc3NmdWxseSByZXN0b3JlZCBpbnZpdGF0aW9ucyByb2xlIGRlZmF1bHQgdG8gdGVuYW50XCIsXG4gICAgICAgIGN1cnJlbnRfZGVmYXVsdDogdmVyaWZpY2F0aW9uLnJvd3NbMF0/LmNvbHVtbl9kZWZhdWx0LFxuICAgICAgICB0aW1lc3RhbXA6ICgvKiBAX19QVVJFX18gKi8gbmV3IERhdGUoKSkudG9JU09TdHJpbmcoKVxuICAgICAgfSk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoXCJcXHUyNzRDIEVycm9yIHJlc3RvcmluZyBpbnZpdGF0aW9ucyBkZWZhdWx0OlwiLCBlcnJvcik7XG4gICAgICByZXMuc3RhdHVzKDUwMCkuanNvbih7XG4gICAgICAgIGVycm9yOiBcIkZhaWxlZCB0byByZXN0b3JlIGludml0YXRpb25zIGRlZmF1bHRcIixcbiAgICAgICAgbWVzc2FnZTogZXJyb3IubWVzc2FnZSxcbiAgICAgICAgdGltZXN0YW1wOiAoLyogQF9fUFVSRV9fICovIG5ldyBEYXRlKCkpLnRvSVNPU3RyaW5nKClcbiAgICAgIH0pO1xuICAgIH1cbiAgfSk7XG4gIGFwcDIucG9zdChcIi9hcGkvZG9jdW1lbnRzL21pZ3JhdGUtb3duZXItdG8tYWRtaW5cIiwgYXN5bmMgKHJlcSwgcmVzKSA9PiB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IG93bmVyVXNlcnNDaGVjayA9IGF3YWl0IGRiLmV4ZWN1dGUoc3FsMTZgXG4gICAgICAgIFNFTEVDVCBpZCwgZW1haWwsIGZpcnN0X25hbWUsIGxhc3RfbmFtZSBcbiAgICAgICAgRlJPTSB1c2VycyBcbiAgICAgICAgV0hFUkUgcm9sZSA9ICdvd25lcidcbiAgICAgIGApO1xuICAgICAgY29uc3Qgb3duZXJDb3VudCA9IG93bmVyVXNlcnNDaGVjay5yb3dzLmxlbmd0aDtcbiAgICAgIGlmIChvd25lckNvdW50ID09PSAwKSB7XG4gICAgICAgIHJldHVybiByZXMuanNvbih7XG4gICAgICAgICAgbWVzc2FnZTogXCJObyBvd25lciB1c2VycyBmb3VuZCAtIG1pZ3JhdGlvbiBub3QgbmVlZGVkXCIsXG4gICAgICAgICAgb3duZXJfY291bnQ6IDAsXG4gICAgICAgICAgdGltZXN0YW1wOiAoLyogQF9fUFVSRV9fICovIG5ldyBEYXRlKCkpLnRvSVNPU3RyaW5nKClcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgICBhd2FpdCBkYi5leGVjdXRlKHNxbDE2YFxuICAgICAgICBVUERBVEUgdXNlcnMgXG4gICAgICAgIFNFVCByb2xlID0gJ2FkbWluJyBcbiAgICAgICAgV0hFUkUgcm9sZSA9ICdvd25lcidcbiAgICAgIGApO1xuICAgICAgdHJ5IHtcbiAgICAgICAgYXdhaXQgZGIuZXhlY3V0ZShzcWwxNmBcbiAgICAgICAgICBVUERBVEUgdXNlcl9vcmdhbml6YXRpb25zIFxuICAgICAgICAgIFNFVCBvcmdhbml6YXRpb25fcm9sZSA9ICdhZG1pbicgXG4gICAgICAgICAgV0hFUkUgb3JnYW5pemF0aW9uX3JvbGUgPSAnb3duZXInXG4gICAgICAgIGApO1xuICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgfVxuICAgICAgYXdhaXQgZGIuZXhlY3V0ZShzcWwxNmBcbiAgICAgICAgQUxURVIgVFlQRSB1c2VyX3JvbGUgUkVOQU1FIFRPIHVzZXJfcm9sZV9vbGRcbiAgICAgIGApO1xuICAgICAgYXdhaXQgZGIuZXhlY3V0ZShzcWwxNmBcbiAgICAgICAgQ1JFQVRFIFRZUEUgdXNlcl9yb2xlIEFTIEVOVU0gKCdhZG1pbicsICdtYW5hZ2VyJywgJ3RlbmFudCcsICdyZXNpZGVudCcsICdkZW1vX21hbmFnZXInLCAnZGVtb190ZW5hbnQnLCAnZGVtb19yZXNpZGVudCcpXG4gICAgICBgKTtcbiAgICAgIGF3YWl0IGRiLmV4ZWN1dGUoc3FsMTZgXG4gICAgICAgIEFMVEVSIFRBQkxFIHVzZXJzIFxuICAgICAgICBBTFRFUiBDT0xVTU4gcm9sZSBUWVBFIHVzZXJfcm9sZSBcbiAgICAgICAgVVNJTkcgcm9sZTo6dGV4dDo6dXNlcl9yb2xlXG4gICAgICBgKTtcbiAgICAgIHRyeSB7XG4gICAgICAgIGF3YWl0IGRiLmV4ZWN1dGUoc3FsMTZgXG4gICAgICAgICAgQUxURVIgVEFCTEUgdXNlcl9vcmdhbml6YXRpb25zIFxuICAgICAgICAgIEFMVEVSIENPTFVNTiBvcmdhbml6YXRpb25fcm9sZSBUWVBFIHVzZXJfcm9sZSBcbiAgICAgICAgICBVU0lORyBvcmdhbml6YXRpb25fcm9sZTo6dGV4dDo6dXNlcl9yb2xlXG4gICAgICAgIGApO1xuICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgfVxuICAgICAgdHJ5IHtcbiAgICAgICAgYXdhaXQgZGIuZXhlY3V0ZShzcWwxNmBcbiAgICAgICAgICBBTFRFUiBUQUJMRSByb2xlX3Blcm1pc3Npb25zIFxuICAgICAgICAgIEFMVEVSIENPTFVNTiByb2xlIFRZUEUgdXNlcl9yb2xlIFxuICAgICAgICAgIFVTSU5HIHJvbGU6OnRleHQ6OnVzZXJfcm9sZVxuICAgICAgICBgKTtcbiAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIH1cbiAgICAgIHRyeSB7XG4gICAgICAgIGF3YWl0IGRiLmV4ZWN1dGUoc3FsMTZgXG4gICAgICAgICAgQUxURVIgVEFCTEUgaW52aXRhdGlvbnMgXG4gICAgICAgICAgQUxURVIgQ09MVU1OIHJvbGUgVFlQRSB1c2VyX3JvbGUgXG4gICAgICAgICAgVVNJTkcgcm9sZTo6dGV4dDo6dXNlcl9yb2xlXG4gICAgICAgIGApO1xuICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgfVxuICAgICAgYXdhaXQgZGIuZXhlY3V0ZShzcWwxNmBEUk9QIFRZUEUgdXNlcl9yb2xlX29sZGApO1xuICAgICAgcmVzLmpzb24oe1xuICAgICAgICBtZXNzYWdlOiBcIlN1Y2Nlc3NmdWxseSBtaWdyYXRlZCBvd25lciB1c2VycyB0byBhZG1pblwiLFxuICAgICAgICBtaWdyYXRlZF91c2Vyczogb3duZXJVc2Vyc0NoZWNrLnJvd3MsXG4gICAgICAgIG93bmVyX2NvdW50OiBvd25lckNvdW50LFxuICAgICAgICBuZXdfZW51bV92YWx1ZXM6IFtcImFkbWluXCIsIFwibWFuYWdlclwiLCBcInRlbmFudFwiLCBcInJlc2lkZW50XCIsIFwiZGVtb19tYW5hZ2VyXCIsIFwiZGVtb190ZW5hbnRcIiwgXCJkZW1vX3Jlc2lkZW50XCJdLFxuICAgICAgICB0aW1lc3RhbXA6ICgvKiBAX19QVVJFX18gKi8gbmV3IERhdGUoKSkudG9JU09TdHJpbmcoKVxuICAgICAgfSk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoXCJcXHUyNzRDIEVycm9yIG1pZ3JhdGluZyBvd25lciB1c2VycyB0byBhZG1pbjpcIiwgZXJyb3IpO1xuICAgICAgcmVzLnN0YXR1cyg1MDApLmpzb24oe1xuICAgICAgICBlcnJvcjogXCJPd25lciB0byBhZG1pbiBtaWdyYXRpb24gZmFpbGVkXCIsXG4gICAgICAgIG1lc3NhZ2U6IGVycm9yLm1lc3NhZ2UsXG4gICAgICAgIHRpbWVzdGFtcDogKC8qIEBfX1BVUkVfXyAqLyBuZXcgRGF0ZSgpKS50b0lTT1N0cmluZygpXG4gICAgICB9KTtcbiAgICB9XG4gIH0pO1xuICBhcHAyLnBvc3QoXCIvYXBpL2RvY3VtZW50cy9yZW1vdmUtYWxsLWVudW0tZGVwZW5kZW5jaWVzXCIsIGFzeW5jIChyZXEsIHJlcykgPT4ge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCByZXN1bHRzID0gW107XG4gICAgICB0cnkge1xuICAgICAgICBhd2FpdCBkYi5leGVjdXRlKHNxbDE2YFxuICAgICAgICAgIEFMVEVSIFRBQkxFIHVzZXJzIFxuICAgICAgICAgIEFMVEVSIENPTFVNTiByb2xlIERST1AgREVGQVVMVFxuICAgICAgICBgKTtcbiAgICAgICAgcmVzdWx0cy5wdXNoKFwidXNlcnMucm9sZSBkZWZhdWx0IHJlbW92ZWRcIik7XG4gICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgIHJlc3VsdHMucHVzaChgdXNlcnMucm9sZTogJHtlLm1lc3NhZ2V9YCk7XG4gICAgICB9XG4gICAgICB0cnkge1xuICAgICAgICBhd2FpdCBkYi5leGVjdXRlKHNxbDE2YFxuICAgICAgICAgIEFMVEVSIFRBQkxFIHVzZXJfb3JnYW5pemF0aW9ucyBcbiAgICAgICAgICBBTFRFUiBDT0xVTU4gb3JnYW5pemF0aW9uX3JvbGUgRFJPUCBERUZBVUxUXG4gICAgICAgIGApO1xuICAgICAgICByZXN1bHRzLnB1c2goXCJ1c2VyX29yZ2FuaXphdGlvbnMub3JnYW5pemF0aW9uX3JvbGUgZGVmYXVsdCByZW1vdmVkXCIpO1xuICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICByZXN1bHRzLnB1c2goYHVzZXJfb3JnYW5pemF0aW9ucy5vcmdhbml6YXRpb25fcm9sZTogJHtlLm1lc3NhZ2V9YCk7XG4gICAgICB9XG4gICAgICBjb25zdCByZW1haW5pbmdEZXBzID0gYXdhaXQgZGIuZXhlY3V0ZShzcWwxNmBcbiAgICAgICAgU0VMRUNUIFxuICAgICAgICAgIHQudGFibGVfbmFtZSxcbiAgICAgICAgICBjLmNvbHVtbl9uYW1lLFxuICAgICAgICAgIGMuY29sdW1uX2RlZmF1bHRcbiAgICAgICAgRlJPTSBpbmZvcm1hdGlvbl9zY2hlbWEudGFibGVzIHRcbiAgICAgICAgSk9JTiBpbmZvcm1hdGlvbl9zY2hlbWEuY29sdW1ucyBjIE9OIHQudGFibGVfbmFtZSA9IGMudGFibGVfbmFtZVxuICAgICAgICBXSEVSRSBjLmRhdGFfdHlwZSA9ICdVU0VSLURFRklORUQnIFxuICAgICAgICBBTkQgYy51ZHRfbmFtZSA9ICd1c2VyX3JvbGUnXG4gICAgICAgIEFORCBjLmNvbHVtbl9kZWZhdWx0IElTIE5PVCBOVUxMXG4gICAgICBgKTtcbiAgICAgIHJlcy5qc29uKHtcbiAgICAgICAgbWVzc2FnZTogXCJSZW1vdmVkIGFsbCBlbnVtIGRlcGVuZGVuY2llc1wiLFxuICAgICAgICBvcGVyYXRpb25zOiByZXN1bHRzLFxuICAgICAgICByZW1haW5pbmdfZGVwZW5kZW5jaWVzOiByZW1haW5pbmdEZXBzLnJvd3MsXG4gICAgICAgIG5leHRfc3RlcDogXCJSdW4gbnBtIHJ1biBkYjpwdXNoIG5vd1wiLFxuICAgICAgICB0aW1lc3RhbXA6ICgvKiBAX19QVVJFX18gKi8gbmV3IERhdGUoKSkudG9JU09TdHJpbmcoKVxuICAgICAgfSk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoXCJcXHUyNzRDIEVycm9yIHJlbW92aW5nIGVudW0gZGVwZW5kZW5jaWVzOlwiLCBlcnJvcik7XG4gICAgICByZXMuc3RhdHVzKDUwMCkuanNvbih7XG4gICAgICAgIGVycm9yOiBcIkZhaWxlZCB0byByZW1vdmUgZW51bSBkZXBlbmRlbmNpZXNcIixcbiAgICAgICAgbWVzc2FnZTogZXJyb3IubWVzc2FnZSxcbiAgICAgICAgdGltZXN0YW1wOiAoLyogQF9fUFVSRV9fICovIG5ldyBEYXRlKCkpLnRvSVNPU3RyaW5nKClcbiAgICAgIH0pO1xuICAgIH1cbiAgfSk7XG4gIGFwcDIucG9zdChcIi9hcGkvZG9jdW1lbnRzL3Jlc3RvcmUtYWxsLWRlZmF1bHRzXCIsIGFzeW5jIChyZXEsIHJlcykgPT4ge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCByZXN1bHRzID0gW107XG4gICAgICB0cnkge1xuICAgICAgICBhd2FpdCBkYi5leGVjdXRlKHNxbDE2YFxuICAgICAgICAgIEFMVEVSIFRBQkxFIHVzZXJzIFxuICAgICAgICAgIEFMVEVSIENPTFVNTiByb2xlIFNFVCBERUZBVUxUICd0ZW5hbnQnXG4gICAgICAgIGApO1xuICAgICAgICByZXN1bHRzLnB1c2goXCJ1c2Vycy5yb2xlIGRlZmF1bHQgcmVzdG9yZWQgdG8gdGVuYW50XCIpO1xuICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICByZXN1bHRzLnB1c2goYHVzZXJzLnJvbGUgcmVzdG9yZSBmYWlsZWQ6ICR7ZS5tZXNzYWdlfWApO1xuICAgICAgfVxuICAgICAgdHJ5IHtcbiAgICAgICAgYXdhaXQgZGIuZXhlY3V0ZShzcWwxNmBcbiAgICAgICAgICBBTFRFUiBUQUJMRSB1c2VyX29yZ2FuaXphdGlvbnMgXG4gICAgICAgICAgQUxURVIgQ09MVU1OIG9yZ2FuaXphdGlvbl9yb2xlIFNFVCBERUZBVUxUICd0ZW5hbnQnXG4gICAgICAgIGApO1xuICAgICAgICByZXN1bHRzLnB1c2goXCJ1c2VyX29yZ2FuaXphdGlvbnMub3JnYW5pemF0aW9uX3JvbGUgZGVmYXVsdCByZXN0b3JlZCB0byB0ZW5hbnRcIik7XG4gICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgIHJlc3VsdHMucHVzaChgdXNlcl9vcmdhbml6YXRpb25zLm9yZ2FuaXphdGlvbl9yb2xlIHJlc3RvcmUgZmFpbGVkOiAke2UubWVzc2FnZX1gKTtcbiAgICAgIH1cbiAgICAgIHRyeSB7XG4gICAgICAgIGF3YWl0IGRiLmV4ZWN1dGUoc3FsMTZgXG4gICAgICAgICAgQUxURVIgVEFCTEUgaW52aXRhdGlvbnMgXG4gICAgICAgICAgQUxURVIgQ09MVU1OIHJvbGUgU0VUIERFRkFVTFQgJ3RlbmFudCdcbiAgICAgICAgYCk7XG4gICAgICAgIHJlc3VsdHMucHVzaChcImludml0YXRpb25zLnJvbGUgZGVmYXVsdCByZXN0b3JlZCB0byB0ZW5hbnRcIik7XG4gICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgIHJlc3VsdHMucHVzaChgaW52aXRhdGlvbnMucm9sZSByZXN0b3JlIGZhaWxlZDogJHtlLm1lc3NhZ2V9YCk7XG4gICAgICB9XG4gICAgICByZXMuanNvbih7XG4gICAgICAgIG1lc3NhZ2U6IFwiUmVzdG9yZWQgYWxsIGRlZmF1bHQgdmFsdWVzXCIsXG4gICAgICAgIG9wZXJhdGlvbnM6IHJlc3VsdHMsXG4gICAgICAgIHRpbWVzdGFtcDogKC8qIEBfX1BVUkVfXyAqLyBuZXcgRGF0ZSgpKS50b0lTT1N0cmluZygpXG4gICAgICB9KTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcihcIlxcdTI3NEMgRXJyb3IgcmVzdG9yaW5nIGRlZmF1bHRzOlwiLCBlcnJvcik7XG4gICAgICByZXMuc3RhdHVzKDUwMCkuanNvbih7XG4gICAgICAgIGVycm9yOiBcIkZhaWxlZCB0byByZXN0b3JlIGRlZmF1bHRzXCIsXG4gICAgICAgIG1lc3NhZ2U6IGVycm9yLm1lc3NhZ2UsXG4gICAgICAgIHRpbWVzdGFtcDogKC8qIEBfX1BVUkVfXyAqLyBuZXcgRGF0ZSgpKS50b0lTT1N0cmluZygpXG4gICAgICB9KTtcbiAgICB9XG4gIH0pO1xuICBhcHAyLnBvc3QoXCIvYXBpL2RvY3VtZW50cy9jb21wbGV0ZS1zY2hlbWEtc3luY1wiLCBhc3luYyAocmVxLCByZXMpID0+IHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgcmVzdWx0cyA9IFtdO1xuICAgICAgdHJ5IHtcbiAgICAgICAgYXdhaXQgZGIuZXhlY3V0ZShzcWwxNmBBTFRFUiBUQUJMRSB1c2VycyBBTFRFUiBDT0xVTU4gcm9sZSBEUk9QIERFRkFVTFRgKTtcbiAgICAgICAgcmVzdWx0cy5wdXNoKFwiXFx1MjcxMyBSZW1vdmVkIHVzZXJzLnJvbGUgZGVmYXVsdFwiKTtcbiAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgcmVzdWx0cy5wdXNoKGB1c2Vycy5yb2xlOiAke2UubWVzc2FnZX1gKTtcbiAgICAgIH1cbiAgICAgIHRyeSB7XG4gICAgICAgIGF3YWl0IGRiLmV4ZWN1dGUoc3FsMTZgQUxURVIgVEFCTEUgdXNlcl9vcmdhbml6YXRpb25zIEFMVEVSIENPTFVNTiBvcmdhbml6YXRpb25fcm9sZSBEUk9QIERFRkFVTFRgKTtcbiAgICAgICAgcmVzdWx0cy5wdXNoKFwiXFx1MjcxMyBSZW1vdmVkIHVzZXJfb3JnYW5pemF0aW9ucy5vcmdhbml6YXRpb25fcm9sZSBkZWZhdWx0XCIpO1xuICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICByZXN1bHRzLnB1c2goYHVzZXJfb3JnYW5pemF0aW9ucy5vcmdhbml6YXRpb25fcm9sZTogJHtlLm1lc3NhZ2V9YCk7XG4gICAgICB9XG4gICAgICB0cnkge1xuICAgICAgICBhd2FpdCBkYi5leGVjdXRlKHNxbDE2YEFMVEVSIFRBQkxFIGludml0YXRpb25zIEFMVEVSIENPTFVNTiByb2xlIERST1AgREVGQVVMVGApO1xuICAgICAgICByZXN1bHRzLnB1c2goXCJcXHUyNzEzIFJlbW92ZWQgaW52aXRhdGlvbnMucm9sZSBkZWZhdWx0XCIpO1xuICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICByZXN1bHRzLnB1c2goYGludml0YXRpb25zLnJvbGU6ICR7ZS5tZXNzYWdlfWApO1xuICAgICAgfVxuICAgICAgY29uc3Qgb3duZXJVc2VycyA9IGF3YWl0IGRiLmV4ZWN1dGUoc3FsMTZgU0VMRUNUIGNvdW50KCopIGFzIGNvdW50IEZST00gdXNlcnMgV0hFUkUgcm9sZSA9ICdvd25lcidgKTtcbiAgICAgIGNvbnN0IG93bmVyQ291bnQgPSBOdW1iZXIob3duZXJVc2Vycy5yb3dzWzBdPy5jb3VudCB8fCAwKTtcbiAgICAgIGlmIChvd25lckNvdW50ID4gMCkge1xuICAgICAgICBhd2FpdCBkYi5leGVjdXRlKHNxbDE2YFVQREFURSB1c2VycyBTRVQgcm9sZSA9ICdhZG1pbicgV0hFUkUgcm9sZSA9ICdvd25lcidgKTtcbiAgICAgICAgcmVzdWx0cy5wdXNoKGBcXHUyNzEzIE1pZ3JhdGVkICR7b3duZXJDb3VudH0gb3duZXIgdXNlcnMgdG8gYWRtaW5gKTtcbiAgICAgIH1cbiAgICAgIHRyeSB7XG4gICAgICAgIGF3YWl0IGRiLmV4ZWN1dGUoc3FsMTZgVVBEQVRFIHVzZXJfb3JnYW5pemF0aW9ucyBTRVQgb3JnYW5pemF0aW9uX3JvbGUgPSAnYWRtaW4nIFdIRVJFIG9yZ2FuaXphdGlvbl9yb2xlID0gJ293bmVyJ2ApO1xuICAgICAgICByZXN1bHRzLnB1c2goXCJcXHUyNzEzIFVwZGF0ZWQgdXNlcl9vcmdhbml6YXRpb25zIG93bmVyIHJvbGVzIHRvIGFkbWluXCIpO1xuICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICByZXN1bHRzLnB1c2goYHVzZXJfb3JnYW5pemF0aW9ucyBvd25lciB1cGRhdGU6ICR7ZS5tZXNzYWdlfWApO1xuICAgICAgfVxuICAgICAgdHJ5IHtcbiAgICAgICAgYXdhaXQgZGIuZXhlY3V0ZShzcWwxNmBBTFRFUiBUWVBFIHVzZXJfcm9sZSBSRU5BTUUgVE8gdXNlcl9yb2xlX29sZGApO1xuICAgICAgICBhd2FpdCBkYi5leGVjdXRlKHNxbDE2YFxuICAgICAgICAgIENSRUFURSBUWVBFIHVzZXJfcm9sZSBBUyBFTlVNIChcbiAgICAgICAgICAgICdhZG1pbicsICdtYW5hZ2VyJywgJ3RlbmFudCcsICdyZXNpZGVudCcsIFxuICAgICAgICAgICAgJ2RlbW9fbWFuYWdlcicsICdkZW1vX3RlbmFudCcsICdkZW1vX3Jlc2lkZW50J1xuICAgICAgICAgIClcbiAgICAgICAgYCk7XG4gICAgICAgIGF3YWl0IGRiLmV4ZWN1dGUoc3FsMTZgQUxURVIgVEFCTEUgdXNlcnMgQUxURVIgQ09MVU1OIHJvbGUgVFlQRSB1c2VyX3JvbGUgVVNJTkcgcm9sZTo6dGV4dDo6dXNlcl9yb2xlYCk7XG4gICAgICAgIGF3YWl0IGRiLmV4ZWN1dGUoc3FsMTZgQUxURVIgVEFCTEUgdXNlcl9vcmdhbml6YXRpb25zIEFMVEVSIENPTFVNTiBvcmdhbml6YXRpb25fcm9sZSBUWVBFIHVzZXJfcm9sZSBVU0lORyBvcmdhbml6YXRpb25fcm9sZTo6dGV4dDo6dXNlcl9yb2xlYCk7XG4gICAgICAgIGF3YWl0IGRiLmV4ZWN1dGUoc3FsMTZgQUxURVIgVEFCTEUgaW52aXRhdGlvbnMgQUxURVIgQ09MVU1OIHJvbGUgVFlQRSB1c2VyX3JvbGUgVVNJTkcgcm9sZTo6dGV4dDo6dXNlcl9yb2xlYCk7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgYXdhaXQgZGIuZXhlY3V0ZShzcWwxNmBBTFRFUiBUQUJMRSByb2xlX3Blcm1pc3Npb25zIEFMVEVSIENPTFVNTiByb2xlIFRZUEUgdXNlcl9yb2xlIFVTSU5HIHJvbGU6OnRleHQ6OnVzZXJfcm9sZWApO1xuICAgICAgICAgIHJlc3VsdHMucHVzaChcIlxcdTI3MTMgVXBkYXRlZCByb2xlX3Blcm1pc3Npb25zIGVudW1cIik7XG4gICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICByZXN1bHRzLnB1c2goYHJvbGVfcGVybWlzc2lvbnM6ICR7ZS5tZXNzYWdlfWApO1xuICAgICAgICB9XG4gICAgICAgIGF3YWl0IGRiLmV4ZWN1dGUoc3FsMTZgRFJPUCBUWVBFIHVzZXJfcm9sZV9vbGRgKTtcbiAgICAgICAgcmVzdWx0cy5wdXNoKFwiXFx1MjcxMyBTdWNjZXNzZnVsbHkgdXBkYXRlZCB1c2VyX3JvbGUgZW51bVwiKTtcbiAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgcmVzdWx0cy5wdXNoKGBFbnVtIHVwZGF0ZSBmYWlsZWQ6ICR7ZS5tZXNzYWdlfWApO1xuICAgICAgfVxuICAgICAgdHJ5IHtcbiAgICAgICAgYXdhaXQgZGIuZXhlY3V0ZShzcWwxNmBBTFRFUiBUQUJMRSB1c2VycyBBTFRFUiBDT0xVTU4gcm9sZSBTRVQgREVGQVVMVCAndGVuYW50J2ApO1xuICAgICAgICByZXN1bHRzLnB1c2goXCJcXHUyNzEzIFJlc3RvcmVkIHVzZXJzLnJvbGUgZGVmYXVsdCB0byB0ZW5hbnRcIik7XG4gICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgIHJlc3VsdHMucHVzaChgdXNlcnMucm9sZSBkZWZhdWx0IHJlc3RvcmU6ICR7ZS5tZXNzYWdlfWApO1xuICAgICAgfVxuICAgICAgdHJ5IHtcbiAgICAgICAgYXdhaXQgZGIuZXhlY3V0ZShzcWwxNmBBTFRFUiBUQUJMRSB1c2VyX29yZ2FuaXphdGlvbnMgQUxURVIgQ09MVU1OIG9yZ2FuaXphdGlvbl9yb2xlIFNFVCBERUZBVUxUICd0ZW5hbnQnYCk7XG4gICAgICAgIHJlc3VsdHMucHVzaChcIlxcdTI3MTMgUmVzdG9yZWQgdXNlcl9vcmdhbml6YXRpb25zLm9yZ2FuaXphdGlvbl9yb2xlIGRlZmF1bHQgdG8gdGVuYW50XCIpO1xuICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICByZXN1bHRzLnB1c2goYHVzZXJfb3JnYW5pemF0aW9ucy5vcmdhbml6YXRpb25fcm9sZSBkZWZhdWx0IHJlc3RvcmU6ICR7ZS5tZXNzYWdlfWApO1xuICAgICAgfVxuICAgICAgdHJ5IHtcbiAgICAgICAgYXdhaXQgZGIuZXhlY3V0ZShzcWwxNmBBTFRFUiBUQUJMRSBpbnZpdGF0aW9ucyBBTFRFUiBDT0xVTU4gcm9sZSBTRVQgREVGQVVMVCAndGVuYW50J2ApO1xuICAgICAgICByZXN1bHRzLnB1c2goXCJcXHUyNzEzIFJlc3RvcmVkIGludml0YXRpb25zLnJvbGUgZGVmYXVsdCB0byB0ZW5hbnRcIik7XG4gICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgIHJlc3VsdHMucHVzaChgaW52aXRhdGlvbnMucm9sZSBkZWZhdWx0IHJlc3RvcmU6ICR7ZS5tZXNzYWdlfWApO1xuICAgICAgfVxuICAgICAgdHJ5IHtcbiAgICAgICAgYXdhaXQgZGIuZXhlY3V0ZShzcWwxNmBcbiAgICAgICAgICBBTFRFUiBUQUJMRSBpbnZpdGF0aW9uX2F1ZGl0X2xvZyBcbiAgICAgICAgICBBREQgQ09MVU1OIElGIE5PVCBFWElTVFMgY3JlYXRlZF9hdCBUSU1FU1RBTVAgREVGQVVMVCBOT1coKVxuICAgICAgICBgKTtcbiAgICAgICAgcmVzdWx0cy5wdXNoKFwiXFx1MjcxMyBBZGRlZCBjcmVhdGVkX2F0IHRvIGludml0YXRpb25fYXVkaXRfbG9nXCIpO1xuICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICByZXN1bHRzLnB1c2goYGludml0YXRpb25fYXVkaXRfbG9nLmNyZWF0ZWRfYXQ6ICR7ZS5tZXNzYWdlfWApO1xuICAgICAgfVxuICAgICAgcmVzLmpzb24oe1xuICAgICAgICBtZXNzYWdlOiBcIkRhdGFiYXNlIHNjaGVtYSBzeW5jaHJvbml6YXRpb24gY29tcGxldGVcIixcbiAgICAgICAgb3BlcmF0aW9uczogcmVzdWx0cyxcbiAgICAgICAgdGltZXN0YW1wOiAoLyogQF9fUFVSRV9fICovIG5ldyBEYXRlKCkpLnRvSVNPU3RyaW5nKCksXG4gICAgICAgIHN1Y2Nlc3M6IHRydWVcbiAgICAgIH0pO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKFwiXFx1Mjc0QyBFcnJvciBkdXJpbmcgc2NoZW1hIHN5bmNocm9uaXphdGlvbjpcIiwgZXJyb3IpO1xuICAgICAgcmVzLnN0YXR1cyg1MDApLmpzb24oe1xuICAgICAgICBlcnJvcjogXCJTY2hlbWEgc3luY2hyb25pemF0aW9uIGZhaWxlZFwiLFxuICAgICAgICBtZXNzYWdlOiBlcnJvci5tZXNzYWdlLFxuICAgICAgICB0aW1lc3RhbXA6ICgvKiBAX19QVVJFX18gKi8gbmV3IERhdGUoKSkudG9JU09TdHJpbmcoKSxcbiAgICAgICAgc3VjY2VzczogZmFsc2VcbiAgICAgIH0pO1xuICAgIH1cbiAgfSk7XG4gIGFwcDIuZ2V0KFwiL2FwaS9kb2N1bWVudHMvZGlhZ25vc3RpY1wiLCBhc3luYyAocmVxLCByZXMpID0+IHtcbiAgICB0cnkge1xuICAgICAgbGV0IHRhYmxlRXhpc3RzID0gZmFsc2U7XG4gICAgICBsZXQgdGFibGVTY2hlbWEgPSBudWxsO1xuICAgICAgdHJ5IHtcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgZGIuZXhlY3V0ZShzcWwxNmBcbiAgICAgICAgICBTRUxFQ1QgY29sdW1uX25hbWUsIGRhdGFfdHlwZSwgaXNfbnVsbGFibGUsIGNvbHVtbl9kZWZhdWx0IFxuICAgICAgICAgIEZST00gaW5mb3JtYXRpb25fc2NoZW1hLmNvbHVtbnMgXG4gICAgICAgICAgV0hFUkUgdGFibGVfbmFtZSA9ICdkb2N1bWVudHMnIFxuICAgICAgICAgIE9SREVSIEJZIG9yZGluYWxfcG9zaXRpb25cbiAgICAgICAgYCk7XG4gICAgICAgIHRhYmxlRXhpc3RzID0gcmVzdWx0LnJvd3MubGVuZ3RoID4gMDtcbiAgICAgICAgdGFibGVTY2hlbWEgPSByZXN1bHQucm93cztcbiAgICAgIH0gY2F0Y2ggKHNjaGVtYUVycm9yKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoXCJTY2hlbWEgY2hlY2sgZXJyb3I6XCIsIHNjaGVtYUVycm9yKTtcbiAgICAgIH1cbiAgICAgIHJlcy5qc29uKHtcbiAgICAgICAgbWVzc2FnZTogXCJEb2N1bWVudCBBUEkgZGlhZ25vc3RpY1wiLFxuICAgICAgICBnY3NfZGlzYWJsZWQ6IHRydWUsXG4gICAgICAgIHNlc3Npb25fZml4X2FwcGxpZWQ6IHRydWUsXG4gICAgICAgIHRpbWVzdGFtcDogKC8qIEBfX1BVUkVfXyAqLyBuZXcgRGF0ZSgpKS50b0lTT1N0cmluZygpLFxuICAgICAgICBlbnZpcm9ubWVudDogcHJvY2Vzcy5lbnYuTk9ERV9FTlYsXG4gICAgICAgIHZlcnNpb246IFwidjIuMS1nY3MtZGlzYWJsZWRcIixcbiAgICAgICAgcmVjZW50X2Vycm9yczogZXJyb3JMb2cuc2xpY2UoLTUpLFxuICAgICAgICAvLyBMYXN0IDUgZXJyb3JzXG4gICAgICAgIHN0b3JhZ2Vfc3RhdHVzOiB7XG4gICAgICAgICAgZXhpc3RzOiAhIXN0b3JhZ2UsXG4gICAgICAgICAgdHlwZTogc3RvcmFnZT8uY29uc3RydWN0b3I/Lm5hbWUsXG4gICAgICAgICAgbWV0aG9kczogT2JqZWN0LmdldE93blByb3BlcnR5TmFtZXMoT2JqZWN0LmdldFByb3RvdHlwZU9mKHN0b3JhZ2UgfHwge30pKVxuICAgICAgICB9LFxuICAgICAgICBkYXRhYmFzZV9zdGF0dXM6IHtcbiAgICAgICAgICBkb2N1bWVudHNfdGFibGVfZXhpc3RzOiB0YWJsZUV4aXN0cyxcbiAgICAgICAgICBkb2N1bWVudHNfdGFibGVfc2NoZW1hOiB0YWJsZVNjaGVtYSxcbiAgICAgICAgICBzY2hlbWFfY29sdW1uc19jb3VudDogdGFibGVTY2hlbWE/Lmxlbmd0aCB8fCAwLFxuICAgICAgICAgIGNvbm5lY3Rpb25fdGVzdDogYXdhaXQgdGVzdERhdGFiYXNlQ29ubmVjdGlvbigpLFxuICAgICAgICAgIHNhbXBsZV9xdWVyeV90ZXN0OiBhd2FpdCB0ZXN0U2FtcGxlUXVlcnkoKSxcbiAgICAgICAgICBlbnVtX2NoZWNrOiBhd2FpdCBjaGVja0VudW1WYWx1ZXMoKSxcbiAgICAgICAgICB1c2VyX29yZ2FuaXphdGlvbl9saW5rczogYXdhaXQgY2hlY2tVc2VyT3JnYW5pemF0aW9uTGlua3MoKVxuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcihcIlxcdTI3NEMgRXJyb3IgcnVubmluZyBkaWFnbm9zdGljOlwiLCBlcnJvcik7XG4gICAgICByZXMuc3RhdHVzKDUwMCkuanNvbih7XG4gICAgICAgIGVycm9yOiBcIkRpYWdub3N0aWMgZmFpbGVkXCIsXG4gICAgICAgIG1lc3NhZ2U6IGVycm9yLm1lc3NhZ2VcbiAgICAgIH0pO1xuICAgIH1cbiAgfSk7XG4gIGNvbnN0IGxvZ0Vycm9yID0gKGVuZHBvaW50LCBlcnJvciwgdXNlcikgPT4ge1xuICAgIGNvbnN0IGVycm9yRW50cnkgPSB7XG4gICAgICB0aW1lc3RhbXA6ICgvKiBAX19QVVJFX18gKi8gbmV3IERhdGUoKSkudG9JU09TdHJpbmcoKSxcbiAgICAgIGVuZHBvaW50LFxuICAgICAgZXJyb3I6IHtcbiAgICAgICAgbWVzc2FnZTogZXJyb3IubWVzc2FnZSxcbiAgICAgICAgc3RhY2s6IGVycm9yLnN0YWNrLFxuICAgICAgICBuYW1lOiBlcnJvci5uYW1lLFxuICAgICAgICBkZXRhaWxzOiBlcnJvci50b1N0cmluZygpXG4gICAgICB9LFxuICAgICAgdXNlcjogdXNlciA/IHsgaWQ6IHVzZXIuaWQsIHJvbGU6IHVzZXIucm9sZSB9IDogbnVsbFxuICAgIH07XG4gICAgZXJyb3JMb2cucHVzaChlcnJvckVudHJ5KTtcbiAgICBpZiAoZXJyb3JMb2cubGVuZ3RoID4gNTApIGVycm9yTG9nLnNoaWZ0KCk7XG4gICAgY29uc29sZS5lcnJvcihgWyR7ZXJyb3JFbnRyeS50aW1lc3RhbXB9XSBcXHV7MUY2QTh9IEVSUk9SIGluICR7ZW5kcG9pbnR9OmAsIGVycm9yRW50cnkpO1xuICAgIHJldHVybiBlcnJvckVudHJ5O1xuICB9O1xuICBhcHAyLmdldChcIi9hcGkvZG9jdW1lbnRzXCIsIHJlcXVpcmVBdXRoLCBhc3luYyAocmVxLCByZXMpID0+IHtcbiAgICBjb25zdCB0aW1lc3RhbXA5ID0gKC8qIEBfX1BVUkVfXyAqLyBuZXcgRGF0ZSgpKS50b0lTT1N0cmluZygpO1xuICAgIGNvbnNvbGUubG9nKGBbJHt0aW1lc3RhbXA5fV0gXFx1ezFGNEM0fSBHRVQgL2FwaS9kb2N1bWVudHMgLSBTdGFydGluZyByZXF1ZXN0YCwge1xuICAgICAgdXNlcklkOiByZXEudXNlcj8uaWQsXG4gICAgICB1c2VyUm9sZTogcmVxLnVzZXI/LnJvbGUsXG4gICAgICBxdWVyeTogcmVxLnF1ZXJ5LFxuICAgICAgdXJsOiByZXEudXJsLFxuICAgICAgbWV0aG9kOiByZXEubWV0aG9kXG4gICAgfSk7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHVzZXIgPSByZXEudXNlcjtcbiAgICAgIGNvbnN0IHVzZXJSb2xlID0gdXNlci5yb2xlO1xuICAgICAgY29uc3QgdXNlcklkID0gdXNlci5pZDtcbiAgICAgIGNvbnNvbGUubG9nKGBbJHt0aW1lc3RhbXA5fV0gXFx1ezFGNTBEfSBVc2VyIGRhdGEgZXh0cmFjdGVkOmAsIHtcbiAgICAgICAgdXNlcklkLFxuICAgICAgICB1c2VyUm9sZSxcbiAgICAgICAgaGFzVmFsaWRVc2VyOiAhIXVzZXJcbiAgICAgIH0pO1xuICAgICAgY29uc29sZS5sb2coYFske3RpbWVzdGFtcDl9XSBcXHV7MUY0QkV9IFN0b3JhZ2UgY2hlY2s6YCwge1xuICAgICAgICBzdG9yYWdlRXhpc3RzOiAhIXN0b3JhZ2UsXG4gICAgICAgIHN0b3JhZ2VUeXBlOiBzdG9yYWdlPy5jb25zdHJ1Y3Rvcj8ubmFtZSxcbiAgICAgICAgc3RvcmFnZU1ldGhvZDogdHlwZW9mIHN0b3JhZ2U/LmdldERvY3VtZW50c1xuICAgICAgfSk7XG4gICAgICBjb25zdCBkb2N1bWVudFR5cGUgPSByZXEucXVlcnkudHlwZTtcbiAgICAgIGNvbnN0IHNwZWNpZmljUmVzaWRlbmNlSWQgPSByZXEucXVlcnkucmVzaWRlbmNlSWQ7XG4gICAgICBjb25zdCBzcGVjaWZpY0J1aWxkaW5nSWQgPSByZXEucXVlcnkuYnVpbGRpbmdJZDtcbiAgICAgIGNvbnNvbGUubG9nKGBbJHt0aW1lc3RhbXA5fV0gXFx1ezFGNTBEfSBGZXRjaGluZyB1c2VyIGRhdGEgZnJvbSBzdG9yYWdlLi4uYCk7XG4gICAgICBjb25zb2xlLmxvZyhgWyR7dGltZXN0YW1wOX1dIFxcdXsxRjRDQn0gQ2FsbGluZyBnZXRVc2VyT3JnYW5pemF0aW9ucygke3VzZXJJZH0pLi4uYCk7XG4gICAgICBjb25zdCBvcmdhbml6YXRpb25zMyA9IGF3YWl0IHN0b3JhZ2UuZ2V0VXNlck9yZ2FuaXphdGlvbnModXNlcklkKTtcbiAgICAgIGNvbnNvbGUubG9nKGBbJHt0aW1lc3RhbXA5fV0gXFx1MjcwNSBnZXRVc2VyT3JnYW5pemF0aW9ucyBTVUNDRVNTIC0gRm91bmQgJHtvcmdhbml6YXRpb25zMy5sZW5ndGh9IG9yZ2FuaXphdGlvbnNgKTtcbiAgICAgIGNvbnNvbGUubG9nKGBbJHt0aW1lc3RhbXA5fV0gXFx1ezFGNENCfSBDYWxsaW5nIGdldFVzZXJSZXNpZGVuY2VzKCR7dXNlcklkfSkuLi5gKTtcbiAgICAgIGNvbnN0IHVzZXJSZXNpZGVuY2VzNCA9IGF3YWl0IHN0b3JhZ2UuZ2V0VXNlclJlc2lkZW5jZXModXNlcklkKTtcbiAgICAgIGNvbnNvbGUubG9nKGBbJHt0aW1lc3RhbXA5fV0gXFx1MjcwNSBnZXRVc2VyUmVzaWRlbmNlcyBTVUNDRVNTIC0gRm91bmQgJHt1c2VyUmVzaWRlbmNlczQubGVuZ3RofSB1c2VyIHJlc2lkZW5jZXNgKTtcbiAgICAgIGNvbnNvbGUubG9nKGBbJHt0aW1lc3RhbXA5fV0gXFx1ezFGNENCfSBDYWxsaW5nIGdldEJ1aWxkaW5ncygpLi4uYCk7XG4gICAgICBjb25zdCBidWlsZGluZ3M1ID0gYXdhaXQgc3RvcmFnZS5nZXRCdWlsZGluZ3MoKTtcbiAgICAgIGNvbnNvbGUubG9nKGBbJHt0aW1lc3RhbXA5fV0gXFx1MjcwNSBnZXRCdWlsZGluZ3MgU1VDQ0VTUyAtIEZvdW5kICR7YnVpbGRpbmdzNS5sZW5ndGh9IGJ1aWxkaW5nc2ApO1xuICAgICAgY29uc3Qgb3JnYW5pemF0aW9uSWQgPSBvcmdhbml6YXRpb25zMy5sZW5ndGggPiAwID8gb3JnYW5pemF0aW9uczNbMF0ub3JnYW5pemF0aW9uSWQgOiB2b2lkIDA7XG4gICAgICBjb25zb2xlLmxvZyhgWyR7dGltZXN0YW1wOX1dIFxcdXsxRjNFMn0gT3JnYW5pemF0aW9uIElEIGRldGVybWluZWQ6YCwgb3JnYW5pemF0aW9uSWQpO1xuICAgICAgbGV0IHJlc2lkZW5jZUlkcztcbiAgICAgIGlmIChzcGVjaWZpY1Jlc2lkZW5jZUlkKSB7XG4gICAgICAgIGlmICh1c2VyUm9sZSA9PT0gXCJhZG1pblwiIHx8IHVzZXJSb2xlID09PSBcIm1hbmFnZXJcIikge1xuICAgICAgICAgIHJlc2lkZW5jZUlkcyA9IFtzcGVjaWZpY1Jlc2lkZW5jZUlkXTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBjb25zdCBoYXNBY2Nlc3MgPSB1c2VyUmVzaWRlbmNlczQuc29tZSgodXIpID0+IHtcbiAgICAgICAgICAgIGlmICh1ci5yZXNpZGVuY2VJZCA9PT0gc3BlY2lmaWNSZXNpZGVuY2VJZCkge1xuICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh1ci51c2VyUmVzaWRlbmNlPy5yZXNpZGVuY2VJZCA9PT0gc3BlY2lmaWNSZXNpZGVuY2VJZCkge1xuICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh1ci5yZXNpZGVuY2U/LmlkID09PSBzcGVjaWZpY1Jlc2lkZW5jZUlkKSB7XG4gICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgIH0pO1xuICAgICAgICAgIGlmICghaGFzQWNjZXNzKSB7XG4gICAgICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDMpLmpzb24oeyBtZXNzYWdlOiBcIkFjY2VzcyBkZW5pZWQgdG8gdGhpcyByZXNpZGVuY2VcIiB9KTtcbiAgICAgICAgICB9XG4gICAgICAgICAgcmVzaWRlbmNlSWRzID0gW3NwZWNpZmljUmVzaWRlbmNlSWRdO1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXNpZGVuY2VJZHMgPSB1c2VyUmVzaWRlbmNlczQubWFwKCh1cikgPT4ge1xuICAgICAgICAgIGlmICh1ci5yZXNpZGVuY2VJZCkge1xuICAgICAgICAgICAgcmV0dXJuIHVyLnJlc2lkZW5jZUlkO1xuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAodXIudXNlclJlc2lkZW5jZT8ucmVzaWRlbmNlSWQpIHtcbiAgICAgICAgICAgIHJldHVybiB1ci51c2VyUmVzaWRlbmNlLnJlc2lkZW5jZUlkO1xuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAodXIucmVzaWRlbmNlPy5pZCkge1xuICAgICAgICAgICAgcmV0dXJuIHVyLnJlc2lkZW5jZS5pZDtcbiAgICAgICAgICB9XG4gICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH0pLmZpbHRlcigoaWQpID0+IGlkICE9PSBudWxsKTtcbiAgICAgIH1cbiAgICAgIGNvbnN0IGJ1aWxkaW5nSWRzID0gYnVpbGRpbmdzNS5tYXAoKGIpID0+IGIuaWQpO1xuICAgICAgY29uc3QgYWxsRG9jdW1lbnRSZWNvcmRzID0gW107XG4gICAgICBjb25zdCBmaWx0ZXJzID0ge1xuICAgICAgICB1c2VySWQsXG4gICAgICAgIHVzZXJSb2xlXG4gICAgICB9O1xuICAgICAgaWYgKHNwZWNpZmljUmVzaWRlbmNlSWQpIHtcbiAgICAgICAgZmlsdGVycy5yZXNpZGVuY2VJZCA9IHNwZWNpZmljUmVzaWRlbmNlSWQ7XG4gICAgICB9XG4gICAgICBpZiAoc3BlY2lmaWNCdWlsZGluZ0lkKSB7XG4gICAgICAgIGZpbHRlcnMuYnVpbGRpbmdJZCA9IHNwZWNpZmljQnVpbGRpbmdJZDtcbiAgICAgIH0gZWxzZSBpZiAoZG9jdW1lbnRUeXBlID09PSBcImJ1aWxkaW5nXCIpIHtcbiAgICAgICAgaWYgKGJ1aWxkaW5nSWRzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIGlmIChkb2N1bWVudFR5cGUgPT09IFwicmVzaWRlbnRcIikge1xuICAgICAgICBpZiAocmVzaWRlbmNlSWRzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgY29uc29sZS5sb2coYFske3RpbWVzdGFtcDl9XSBcXHV7MUYzQUZ9IENSSVRJQ0FMOiBBYm91dCB0byBjYWxsIHN0b3JhZ2UuZ2V0RG9jdW1lbnRzIHdpdGggZmlsdGVyczpgLCBmaWx0ZXJzKTtcbiAgICAgIGNvbnNvbGUubG9nKGBbJHt0aW1lc3RhbXA5fV0gXFx1ezFGNTI3fSBTdG9yYWdlIGluc3RhbmNlOmAsIHN0b3JhZ2UuY29uc3RydWN0b3IubmFtZSk7XG4gICAgICBjb25zb2xlLmxvZyhgWyR7dGltZXN0YW1wOX1dIFxcdXsxRjRDQX0gRmlsdGVycyBiZWluZyBwYXNzZWQ6YCwgSlNPTi5zdHJpbmdpZnkoZmlsdGVycywgbnVsbCwgMikpO1xuICAgICAgY29uc3QgZG9jdW1lbnRzMiA9IGF3YWl0IHN0b3JhZ2UuZ2V0RG9jdW1lbnRzKGZpbHRlcnMpO1xuICAgICAgY29uc29sZS5sb2coYFske3RpbWVzdGFtcDl9XSBcXHUyNzA1IENSSVRJQ0FMOiBzdG9yYWdlLmdldERvY3VtZW50cyBTVUNDRVNTIC0gcmV0dXJuZWQgJHtkb2N1bWVudHMyPy5sZW5ndGggfHwgMH0gZG9jdW1lbnRzYCk7XG4gICAgICBjb25zb2xlLmxvZyhgWyR7dGltZXN0YW1wOX1dIFxcdXsxRjRDQn0gRG9jdW1lbnQgcHJldmlldzpgLCBkb2N1bWVudHMyPy5zbGljZSgwLCAzKT8ubWFwKChkKSA9PiAoe1xuICAgICAgICBpZDogZC5pZCxcbiAgICAgICAgbmFtZTogZC5uYW1lLFxuICAgICAgICB1cGxvYWRlZEJ5SWQ6IGQudXBsb2FkZWRCeUlkLFxuICAgICAgICBidWlsZGluZ0lkOiBkLmJ1aWxkaW5nSWQsXG4gICAgICAgIHJlc2lkZW5jZUlkOiBkLnJlc2lkZW5jZUlkXG4gICAgICB9KSkpO1xuICAgICAgY29uc29sZS5sb2coXCJcXHV7MUY1MER9IFtET0NVTUVOVFMgQVBJIERFQlVHXTpcIiwge1xuICAgICAgICBmaWx0ZXJzLFxuICAgICAgICBkb2N1bWVudHNGb3VuZDogZG9jdW1lbnRzMj8ubGVuZ3RoIHx8IDAsXG4gICAgICAgIHNwZWNpZmljUmVzaWRlbmNlSWQsXG4gICAgICAgIHVzZXJSb2xlLFxuICAgICAgICB1c2VySWRcbiAgICAgIH0pO1xuICAgICAgY29uc3QgZmlsdGVyZWREb2N1bWVudFJlY29yZHMgPSBkb2N1bWVudHMyLmZpbHRlcigoZG9jKSA9PiB7XG4gICAgICAgIGlmIChzcGVjaWZpY0J1aWxkaW5nSWQpIHtcbiAgICAgICAgICBpZiAoZG9jLmJ1aWxkaW5nSWQgIT09IHNwZWNpZmljQnVpbGRpbmdJZCkge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAodXNlclJvbGUgPT09IFwiYWRtaW5cIikge1xuICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIGlmICh1c2VyUm9sZSA9PT0gXCJtYW5hZ2VyXCIgJiYgb3JnYW5pemF0aW9uSWQpIHtcbiAgICAgICAgICBpZiAoZG9jLmJ1aWxkaW5nSWQgJiYgYnVpbGRpbmdJZHMuaW5jbHVkZXMoZG9jLmJ1aWxkaW5nSWQpKSB7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKGRvYy5yZXNpZGVuY2VJZCAmJiByZXNpZGVuY2VJZHMuaW5jbHVkZXMoZG9jLnJlc2lkZW5jZUlkKSkge1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmICh1c2VyUm9sZSA9PT0gXCJyZXNpZGVudFwiKSB7XG4gICAgICAgICAgaWYgKGRvYy5yZXNpZGVuY2VJZCAmJiByZXNpZGVuY2VJZHMuaW5jbHVkZXMoZG9jLnJlc2lkZW5jZUlkKSkge1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgfVxuICAgICAgICAgIGlmIChkb2MuYnVpbGRpbmdJZCkge1xuICAgICAgICAgICAgY29uc3QgdXNlckJ1aWxkaW5nSWRzID0gdXNlclJlc2lkZW5jZXM0Lm1hcCgodXIpID0+IHVyLnJlc2lkZW5jZT8uYnVpbGRpbmdJZCB8fCB1ci51c2VyUmVzaWRlbmNlPy5yZXNpZGVuY2U/LmJ1aWxkaW5nSWQpLmZpbHRlcihCb29sZWFuKTtcbiAgICAgICAgICAgIHJldHVybiB1c2VyQnVpbGRpbmdJZHMuaW5jbHVkZXMoZG9jLmJ1aWxkaW5nSWQpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAodXNlclJvbGUgPT09IFwidGVuYW50XCIpIHtcbiAgICAgICAgICBpZiAoIWRvYy5pc1Zpc2libGVUb1RlbmFudHMpIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKGRvYy5yZXNpZGVuY2VJZCAmJiByZXNpZGVuY2VJZHMuaW5jbHVkZXMoZG9jLnJlc2lkZW5jZUlkKSkge1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgfVxuICAgICAgICAgIGlmIChkb2MuYnVpbGRpbmdJZCkge1xuICAgICAgICAgICAgY29uc3QgdXNlckJ1aWxkaW5nSWRzID0gdXNlclJlc2lkZW5jZXM0Lm1hcCgodXIpID0+IHVyLnJlc2lkZW5jZT8uYnVpbGRpbmdJZCB8fCB1ci51c2VyUmVzaWRlbmNlPy5yZXNpZGVuY2U/LmJ1aWxkaW5nSWQpLmZpbHRlcihCb29sZWFuKTtcbiAgICAgICAgICAgIHJldHVybiB1c2VyQnVpbGRpbmdJZHMuaW5jbHVkZXMoZG9jLmJ1aWxkaW5nSWQpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9KTtcbiAgICAgIGNvbnN0IGVuaGFuY2VkRG9jdW1lbnRSZWNvcmRzID0gZmlsdGVyZWREb2N1bWVudFJlY29yZHMubWFwKChkb2MpID0+ICh7XG4gICAgICAgIC4uLmRvYyxcbiAgICAgICAgZG9jdW1lbnRDYXRlZ29yeTogZG9jLmJ1aWxkaW5nSWQgPyBcImJ1aWxkaW5nXCIgOiBcInJlc2lkZW50XCIsXG4gICAgICAgIGVudGl0eVR5cGU6IGRvYy5idWlsZGluZ0lkID8gXCJidWlsZGluZ1wiIDogXCJyZXNpZGVuY2VcIixcbiAgICAgICAgZW50aXR5SWQ6IGRvYy5idWlsZGluZ0lkIHx8IGRvYy5yZXNpZGVuY2VJZCxcbiAgICAgICAgdXBsb2FkRGF0ZTogZG9jLmNyZWF0ZWRBdFxuICAgICAgICAvLyBGb3IgYmFja3dhcmQgY29tcGF0aWJpbGl0eVxuICAgICAgfSkpO1xuICAgICAgYWxsRG9jdW1lbnRSZWNvcmRzLnB1c2goLi4uZW5oYW5jZWREb2N1bWVudFJlY29yZHMpO1xuICAgICAgYWxsRG9jdW1lbnRSZWNvcmRzLnNvcnQoXG4gICAgICAgIChhLCBiKSA9PiBuZXcgRGF0ZShiLnVwbG9hZERhdGUpLmdldFRpbWUoKSAtIG5ldyBEYXRlKGEudXBsb2FkRGF0ZSkuZ2V0VGltZSgpXG4gICAgICApO1xuICAgICAgY29uc3QgcmVzcG9uc2UgPSB7XG4gICAgICAgIGRvY3VtZW50czogYWxsRG9jdW1lbnRSZWNvcmRzLFxuICAgICAgICB0b3RhbDogYWxsRG9jdW1lbnRSZWNvcmRzLmxlbmd0aCxcbiAgICAgICAgYnVpbGRpbmdDb3VudDogYWxsRG9jdW1lbnRSZWNvcmRzLmZpbHRlcigoZCkgPT4gZC5kb2N1bWVudENhdGVnb3J5ID09PSBcImJ1aWxkaW5nXCIpLmxlbmd0aCxcbiAgICAgICAgcmVzaWRlbnRDb3VudDogYWxsRG9jdW1lbnRSZWNvcmRzLmZpbHRlcigoZCkgPT4gZC5kb2N1bWVudENhdGVnb3J5ID09PSBcInJlc2lkZW50XCIpLmxlbmd0aCxcbiAgICAgICAgbGVnYWN5Q291bnQ6IGFsbERvY3VtZW50UmVjb3Jkcy5maWx0ZXIoKGQpID0+IGQuZG9jdW1lbnRDYXRlZ29yeSA9PT0gXCJsZWdhY3lcIikubGVuZ3RoXG4gICAgICB9O1xuICAgICAgcmVzLmpzb24ocmVzcG9uc2UpO1xuICAgIH0gY2F0Y2ggKF9lcnJvcikge1xuICAgICAgY29uc3QgZXJyb3JFbnRyeSA9IGxvZ0Vycm9yKFwiR0VUIC9hcGkvZG9jdW1lbnRzXCIsIF9lcnJvciwgcmVxLnVzZXIpO1xuICAgICAgcmVzLnN0YXR1cyg1MDApLmpzb24oe1xuICAgICAgICBtZXNzYWdlOiBcIkZhaWxlZCB0byBmZXRjaCBkb2N1bWVudHNcIixcbiAgICAgICAgZXJyb3JfaWQ6IGVycm9yRW50cnkudGltZXN0YW1wLFxuICAgICAgICBkZWJ1Z19pbmZvOiBwcm9jZXNzLmVudi5OT0RFX0VOViA9PT0gXCJkZXZlbG9wbWVudFwiID8gX2Vycm9yLm1lc3NhZ2UgOiB2b2lkIDBcbiAgICAgIH0pO1xuICAgIH1cbiAgfSk7XG4gIGFwcDIuZ2V0KFwiL2FwaS9kb2N1bWVudHMvOmlkXCIsIHJlcXVpcmVBdXRoLCBhc3luYyAocmVxLCByZXMpID0+IHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgdXNlciA9IHJlcS51c2VyO1xuICAgICAgY29uc3QgdXNlclJvbGUgPSB1c2VyLnJvbGU7XG4gICAgICBjb25zdCB1c2VySWQgPSB1c2VyLmlkO1xuICAgICAgY29uc3QgZG9jdW1lbnRJZCA9IHJlcS5wYXJhbXMuaWQ7XG4gICAgICBjb25zdCBkb2N1bWVudFR5cGUgPSByZXEucXVlcnkudHlwZTtcbiAgICAgIGNvbnN0IG9yZ2FuaXphdGlvbnMzID0gYXdhaXQgc3RvcmFnZS5nZXRVc2VyT3JnYW5pemF0aW9ucyh1c2VySWQpO1xuICAgICAgY29uc3QgcmVzaWRlbmNlczIgPSBhd2FpdCBzdG9yYWdlLmdldFVzZXJSZXNpZGVuY2VzKHVzZXJJZCk7XG4gICAgICBjb25zdCBidWlsZGluZ3M1ID0gYXdhaXQgc3RvcmFnZS5nZXRCdWlsZGluZ3MoKTtcbiAgICAgIGNvbnN0IG9yZ2FuaXphdGlvbklkID0gb3JnYW5pemF0aW9uczMubGVuZ3RoID4gMCA/IG9yZ2FuaXphdGlvbnMzWzBdLm9yZ2FuaXphdGlvbklkIDogdm9pZCAwO1xuICAgICAgY29uc3QgcmVzaWRlbmNlSWRzID0gcmVzaWRlbmNlczIubWFwKCh1cikgPT4gdXIucmVzaWRlbmNlSWQpO1xuICAgICAgY29uc3QgYnVpbGRpbmdJZHMgPSBidWlsZGluZ3M1Lm1hcCgoYikgPT4gYi5pZCk7XG4gICAgICBsZXQgZG9jdW1lbnQgPSBudWxsO1xuICAgICAgY29uc3QgaGFzTmV3RG9jdW1lbnRSZWNvcmRNZXRob2RzID0gXCJnZXRCdWlsZGluZ0RvY3VtZW50UmVjb3JkXCIgaW4gc3RvcmFnZTtcbiAgICAgIGlmIChoYXNOZXdEb2N1bWVudFJlY29yZE1ldGhvZHMpIHtcbiAgICAgICAgaWYgKCFkb2N1bWVudFR5cGUgfHwgZG9jdW1lbnRUeXBlID09PSBcImJ1aWxkaW5nXCIpIHtcbiAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgZG9jdW1lbnQgPSBhd2FpdCBzdG9yYWdlLmdldEJ1aWxkaW5nRG9jdW1lbnRSZWNvcmQoXG4gICAgICAgICAgICAgIGRvY3VtZW50SWQsXG4gICAgICAgICAgICAgIHVzZXJJZCxcbiAgICAgICAgICAgICAgdXNlclJvbGUsXG4gICAgICAgICAgICAgIG9yZ2FuaXphdGlvbklkLFxuICAgICAgICAgICAgICBidWlsZGluZ0lkc1xuICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIGlmIChkb2N1bWVudCkge1xuICAgICAgICAgICAgICBkb2N1bWVudC5kb2N1bWVudENhdGVnb3J5ID0gXCJidWlsZGluZ1wiO1xuICAgICAgICAgICAgICBkb2N1bWVudC5lbnRpdHlUeXBlID0gXCJidWlsZGluZ1wiO1xuICAgICAgICAgICAgICBkb2N1bWVudC5lbnRpdHlJZCA9IGRvY3VtZW50LmJ1aWxkaW5nSWQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgICAgY29uc29sZS53YXJuKFwiXFx1MjZBMFxcdUZFMEYgRXJyb3IgZmV0Y2hpbmcgYnVpbGRpbmcgZG9jdW1lbnQ6XCIsIGUpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAoIWRvY3VtZW50ICYmICghZG9jdW1lbnRUeXBlIHx8IGRvY3VtZW50VHlwZSA9PT0gXCJyZXNpZGVudFwiKSkge1xuICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICBkb2N1bWVudCA9IGF3YWl0IHN0b3JhZ2UuZ2V0UmVzaWRlbnREb2N1bWVudFJlY29yZChcbiAgICAgICAgICAgICAgZG9jdW1lbnRJZCxcbiAgICAgICAgICAgICAgdXNlcklkLFxuICAgICAgICAgICAgICB1c2VyUm9sZSxcbiAgICAgICAgICAgICAgb3JnYW5pemF0aW9uSWQsXG4gICAgICAgICAgICAgIHJlc2lkZW5jZUlkc1xuICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIGlmIChkb2N1bWVudCkge1xuICAgICAgICAgICAgICBkb2N1bWVudC5kb2N1bWVudENhdGVnb3J5ID0gXCJyZXNpZGVudFwiO1xuICAgICAgICAgICAgICBkb2N1bWVudC5lbnRpdHlUeXBlID0gXCJyZXNpZGVuY2VcIjtcbiAgICAgICAgICAgICAgZG9jdW1lbnQuZW50aXR5SWQgPSBkb2N1bWVudC5yZXNpZGVuY2VJZDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgICBjb25zb2xlLndhcm4oXCJcXHUyNkEwXFx1RkUwRiBFcnJvciBmZXRjaGluZyByZXNpZGVudCBkb2N1bWVudDpcIiwgZSk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgICBpZiAoIWRvY3VtZW50ICYmICFkb2N1bWVudFR5cGUpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICBkb2N1bWVudCA9IGF3YWl0IHN0b3JhZ2UuZ2V0RG9jdW1lbnQoZG9jdW1lbnRJZCk7XG4gICAgICAgICAgaWYgKGRvY3VtZW50KSB7XG4gICAgICAgICAgICBkb2N1bWVudC5kb2N1bWVudENhdGVnb3J5ID0gXCJsZWdhY3lcIjtcbiAgICAgICAgICAgIGRvY3VtZW50LmVudGl0eVR5cGUgPSBcImxlZ2FjeVwiO1xuICAgICAgICAgICAgZG9jdW1lbnQuZW50aXR5SWQgPSBudWxsO1xuICAgICAgICAgIH1cbiAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgIGNvbnNvbGUud2FybihcIlxcdTI2QTBcXHVGRTBGIEVycm9yIGZldGNoaW5nIGxlZ2FjeSBkb2N1bWVudDpcIiwgZSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGlmICghZG9jdW1lbnQpIHtcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDA0KS5qc29uKHsgbWVzc2FnZTogXCJEb2N1bWVudFJlY29yZCBub3QgZm91bmQgb3IgYWNjZXNzIGRlbmllZFwiIH0pO1xuICAgICAgfVxuICAgICAgcmVzLmpzb24oZG9jdW1lbnQpO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKFwiXFx1Mjc0QyBFcnJvciBmZXRjaGluZyBkb2N1bWVudDpcIiwgZXJyb3IpO1xuICAgICAgcmVzLnN0YXR1cyg1MDApLmpzb24oeyBtZXNzYWdlOiBcIkZhaWxlZCB0byBmZXRjaCBkb2N1bWVudFwiIH0pO1xuICAgIH1cbiAgfSk7XG4gIGFwcDIucG9zdChcIi9hcGkvZG9jdW1lbnRzXCIsIHJlcXVpcmVBdXRoLCB1cGxvYWQuc2luZ2xlKFwiZmlsZVwiKSwgYXN5bmMgKHJlcSwgcmVzKSA9PiB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHVzZXIgPSByZXEudXNlcjtcbiAgICAgIGNvbnN0IHVzZXJSb2xlID0gdXNlci5yb2xlO1xuICAgICAgY29uc3QgdXNlcklkID0gdXNlci5pZDtcbiAgICAgIGNvbnN0IHsgZG9jdW1lbnRUeXBlLCBidWlsZGluZ0lkLCByZXNpZGVuY2VJZCwgdGV4dENvbnRlbnQsIC4uLm90aGVyRGF0YSB9ID0gcmVxLmJvZHk7XG4gICAgICBpZiAoIVtcImFkbWluXCIsIFwibWFuYWdlclwiLCBcInJlc2lkZW50XCJdLmluY2x1ZGVzKHVzZXJSb2xlKSkge1xuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDMpLmpzb24oeyBtZXNzYWdlOiBcIkluc3VmZmljaWVudCBwZXJtaXNzaW9ucyB0byBjcmVhdGUgZG9jdW1lbnRzXCIgfSk7XG4gICAgICB9XG4gICAgICBjb25zdCBpc1RleHREb2N1bWVudFJlY29yZCA9ICFyZXEuZmlsZSAmJiB0ZXh0Q29udGVudDtcbiAgICAgIGNvbnN0IGlzRmlsZURvY3VtZW50UmVjb3JkID0gISFyZXEuZmlsZTtcbiAgICAgIGlmICghaXNUZXh0RG9jdW1lbnRSZWNvcmQgJiYgIWlzRmlsZURvY3VtZW50UmVjb3JkKSB7XG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7IG1lc3NhZ2U6IFwiRWl0aGVyIGEgZmlsZSBvciB0ZXh0IGNvbnRlbnQgaXMgcmVxdWlyZWRcIiB9KTtcbiAgICAgIH1cbiAgICAgIGlmIChpc1RleHREb2N1bWVudFJlY29yZCkge1xuICAgICAgICBjb25zdCBkb2N1bWVudERhdGEgPSB7XG4gICAgICAgICAgbmFtZTogb3RoZXJEYXRhLm5hbWUgfHwgXCJVbnRpdGxlZCBEb2N1bWVudFJlY29yZFwiLFxuICAgICAgICAgIGRlc2NyaXB0aW9uOiBvdGhlckRhdGEuZGVzY3JpcHRpb24gfHwgdGV4dENvbnRlbnQuc3Vic3RyaW5nKDAsIDIwMCkgKyAodGV4dENvbnRlbnQubGVuZ3RoID4gMjAwID8gXCIuLi5cIiA6IFwiXCIpLFxuICAgICAgICAgIGRvY3VtZW50VHlwZTogZG9jdW1lbnRUeXBlIHx8IFwib3RoZXJcIixcbiAgICAgICAgICBmaWxlUGF0aDogYHRleHQtZG9jdW1lbnRzLyR7dXNlcklkfS8ke3V1aWR2NCgpfS50eHRgLFxuICAgICAgICAgIC8vIFZpcnR1YWwgcGF0aCBmb3IgdGV4dCBkb2N1bWVudHNcbiAgICAgICAgICBpc1Zpc2libGVUb1RlbmFudHM6IG90aGVyRGF0YS5pc1Zpc2libGVUb1RlbmFudHMgPT09IFwidHJ1ZVwiIHx8IG90aGVyRGF0YS5pc1Zpc2libGVUb1RlbmFudHMgPT09IHRydWUsXG4gICAgICAgICAgcmVzaWRlbmNlSWQ6IHJlc2lkZW5jZUlkIHx8IHZvaWQgMCxcbiAgICAgICAgICBidWlsZGluZ0lkOiBidWlsZGluZ0lkIHx8IHZvaWQgMCxcbiAgICAgICAgICB1cGxvYWRlZEJ5SWQ6IHVzZXJJZFxuICAgICAgICB9O1xuICAgICAgICBpZiAoYnVpbGRpbmdJZCAmJiB1c2VyUm9sZSA9PT0gXCJtYW5hZ2VyXCIpIHtcbiAgICAgICAgICBjb25zdCBvcmdhbml6YXRpb25zMyA9IGF3YWl0IHN0b3JhZ2UuZ2V0VXNlck9yZ2FuaXphdGlvbnModXNlcklkKTtcbiAgICAgICAgICBjb25zdCBvcmdhbml6YXRpb25JZCA9IG9yZ2FuaXphdGlvbnMzLmxlbmd0aCA+IDAgPyBvcmdhbml6YXRpb25zM1swXS5vcmdhbml6YXRpb25JZCA6IHZvaWQgMDtcbiAgICAgICAgICBjb25zdCBidWlsZGluZyA9IGF3YWl0IHN0b3JhZ2UuZ2V0QnVpbGRpbmcoYnVpbGRpbmdJZCk7XG4gICAgICAgICAgaWYgKCFidWlsZGluZyB8fCBidWlsZGluZy5vcmdhbml6YXRpb25JZCAhPT0gb3JnYW5pemF0aW9uSWQpIHtcbiAgICAgICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMykuanNvbih7IG1lc3NhZ2U6IFwiQ2Fubm90IGFzc2lnbiBkb2N1bWVudCB0byBidWlsZGluZyBvdXRzaWRlIHlvdXIgb3JnYW5pemF0aW9uXCIgfSk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmIChyZXNpZGVuY2VJZCAmJiB1c2VyUm9sZSA9PT0gXCJyZXNpZGVudFwiKSB7XG4gICAgICAgICAgY29uc3QgcmVzaWRlbmNlczIgPSBhd2FpdCBzdG9yYWdlLmdldFVzZXJSZXNpZGVuY2VzKHVzZXJJZCk7XG4gICAgICAgICAgY29uc3QgcmVzaWRlbmNlSWRzID0gcmVzaWRlbmNlczIubWFwKCh1cikgPT4gdXIucmVzaWRlbmNlSWQpO1xuICAgICAgICAgIGlmICghcmVzaWRlbmNlSWRzLmluY2x1ZGVzKHJlc2lkZW5jZUlkKSkge1xuICAgICAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAzKS5qc29uKHsgbWVzc2FnZTogXCJDYW5ub3QgYXNzaWduIGRvY3VtZW50IHRvIHJlc2lkZW5jZSB5b3UgZG8gbm90IG93blwiIH0pO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBsZXQgZmlsZU5hbWU7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgY29uc3QgdGV4dEZpbGVQYXRoID0gcGF0aDMuam9pbihwcm9jZXNzLmN3ZCgpLCBcInVwbG9hZHNcIiwgXCJ0ZXh0LWRvY3VtZW50c1wiLCB1c2VySWQpO1xuICAgICAgICAgIGlmICghZnMyLmV4aXN0c1N5bmModGV4dEZpbGVQYXRoKSkge1xuICAgICAgICAgICAgZnMyLm1rZGlyU3luYyh0ZXh0RmlsZVBhdGgsIHsgcmVjdXJzaXZlOiB0cnVlIH0pO1xuICAgICAgICAgIH1cbiAgICAgICAgICBmaWxlTmFtZSA9IGAke3V1aWR2NCgpfS50eHRgO1xuICAgICAgICAgIGNvbnN0IGZ1bGxQYXRoID0gcGF0aDMuam9pbih0ZXh0RmlsZVBhdGgsIGZpbGVOYW1lKTtcbiAgICAgICAgICBmczIud3JpdGVGaWxlU3luYyhmdWxsUGF0aCwgdGV4dENvbnRlbnQsIFwidXRmOFwiKTtcbiAgICAgICAgfSBjYXRjaCAoZnNFcnJvcikge1xuICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciBzYXZpbmcgdGV4dCBkb2N1bWVudCB0byBmaWxlc3lzdGVtOlwiLCBmc0Vycm9yKTtcbiAgICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg1MDApLmpzb24oeyBtZXNzYWdlOiBcIkZhaWxlZCB0byBzYXZlIHRleHQgZG9jdW1lbnRcIiB9KTtcbiAgICAgICAgfVxuICAgICAgICBkb2N1bWVudERhdGEuZmlsZVBhdGggPSBgdGV4dC1kb2N1bWVudHMvJHt1c2VySWR9LyR7ZmlsZU5hbWV9YDtcbiAgICAgICAgY29uc3QgZG9jdW1lbnQgPSBhd2FpdCBzdG9yYWdlLmNyZWF0ZURvY3VtZW50KGRvY3VtZW50RGF0YSk7XG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDIwMSkuanNvbih7XG4gICAgICAgICAgbWVzc2FnZTogXCJUZXh0IGRvY3VtZW50IGNyZWF0ZWQgc3VjY2Vzc2Z1bGx5XCIsXG4gICAgICAgICAgZG9jdW1lbnQ6IHtcbiAgICAgICAgICAgIC4uLmRvY3VtZW50LFxuICAgICAgICAgICAgZG9jdW1lbnRDYXRlZ29yeTogYnVpbGRpbmdJZCA/IFwiYnVpbGRpbmdcIiA6IFwicmVzaWRlbnRcIixcbiAgICAgICAgICAgIGVudGl0eVR5cGU6IGJ1aWxkaW5nSWQgPyBcImJ1aWxkaW5nXCIgOiBcInJlc2lkZW5jZVwiLFxuICAgICAgICAgICAgZW50aXR5SWQ6IGJ1aWxkaW5nSWQgfHwgcmVzaWRlbmNlSWRcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgICAgbGV0IGZpbmFsRG9jdW1lbnRSZWNvcmRUeXBlID0gZG9jdW1lbnRUeXBlO1xuICAgICAgaWYgKCFmaW5hbERvY3VtZW50UmVjb3JkVHlwZSkge1xuICAgICAgICBpZiAoYnVpbGRpbmdJZCAmJiAhcmVzaWRlbmNlSWQpIHtcbiAgICAgICAgICBmaW5hbERvY3VtZW50UmVjb3JkVHlwZSA9IFwiYnVpbGRpbmdcIjtcbiAgICAgICAgfSBlbHNlIGlmIChyZXNpZGVuY2VJZCAmJiAhYnVpbGRpbmdJZCkge1xuICAgICAgICAgIGZpbmFsRG9jdW1lbnRSZWNvcmRUeXBlID0gXCJyZXNpZGVudFwiO1xuICAgICAgICB9IGVsc2UgaWYgKGJ1aWxkaW5nSWQgJiYgcmVzaWRlbmNlSWQpIHtcbiAgICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oe1xuICAgICAgICAgICAgbWVzc2FnZTogXCJQbGVhc2Ugc3BlY2lmeSBkb2N1bWVudFR5cGUgd2hlbiBwcm92aWRpbmcgYm90aCBidWlsZGluZ0lkIGFuZCByZXNpZGVuY2VJZFwiXG4gICAgICAgICAgfSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHtcbiAgICAgICAgICAgIG1lc3NhZ2U6IFwiTXVzdCBwcm92aWRlIGVpdGhlciBidWlsZGluZ0lkIChmb3IgYnVpbGRpbmcgZG9jdW1lbnRzKSBvciByZXNpZGVuY2VJZCAoZm9yIHJlc2lkZW50IGRvY3VtZW50cylcIlxuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBpZiAoZmluYWxEb2N1bWVudFJlY29yZFR5cGUgPT09IFwiYnVpbGRpbmdcIikge1xuICAgICAgICBpZiAoIWJ1aWxkaW5nSWQpIHtcbiAgICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oeyBtZXNzYWdlOiBcImJ1aWxkaW5nSWQgaXMgcmVxdWlyZWQgZm9yIGJ1aWxkaW5nIGRvY3VtZW50c1wiIH0pO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHZhbGlkYXRlZERhdGEgPSBjcmVhdGVCdWlsZGluZ0RvY3VtZW50U2NoZW1hLnBhcnNlKHtcbiAgICAgICAgICAuLi5vdGhlckRhdGEsXG4gICAgICAgICAgYnVpbGRpbmdJZCxcbiAgICAgICAgICB1cGxvYWRlZEJ5SWQ6IHVzZXJJZCxcbiAgICAgICAgICBmaWxlUGF0aDogcmVxLmZpbGUgPyByZXEuZmlsZS5wYXRoIDogdm9pZCAwXG4gICAgICAgICAgLy8gZmlsZU5hbWUgaXMgaGFuZGxlZCB2aWEgbmFtZSBmaWVsZFxuICAgICAgICB9KTtcbiAgICAgICAgaWYgKHVzZXJSb2xlID09PSBcIm1hbmFnZXJcIikge1xuICAgICAgICAgIGNvbnN0IG9yZ2FuaXphdGlvbnMzID0gYXdhaXQgc3RvcmFnZS5nZXRVc2VyT3JnYW5pemF0aW9ucyh1c2VySWQpO1xuICAgICAgICAgIGNvbnN0IG9yZ2FuaXphdGlvbklkID0gb3JnYW5pemF0aW9uczMubGVuZ3RoID4gMCA/IG9yZ2FuaXphdGlvbnMzWzBdLm9yZ2FuaXphdGlvbklkIDogdm9pZCAwO1xuICAgICAgICAgIGNvbnN0IGJ1aWxkaW5nID0gYXdhaXQgc3RvcmFnZS5nZXRCdWlsZGluZyhidWlsZGluZ0lkKTtcbiAgICAgICAgICBpZiAoIWJ1aWxkaW5nIHx8IGJ1aWxkaW5nLm9yZ2FuaXphdGlvbklkICE9PSBvcmdhbml6YXRpb25JZCkge1xuICAgICAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAzKS5qc29uKHsgbWVzc2FnZTogXCJDYW5ub3QgYXNzaWduIGRvY3VtZW50IHRvIGJ1aWxkaW5nIG91dHNpZGUgeW91ciBvcmdhbml6YXRpb25cIiB9KTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHVzZXJSb2xlID09PSBcInJlc2lkZW50XCIpIHtcbiAgICAgICAgICBjb25zdCByZXNpZGVuY2VzMiA9IGF3YWl0IHN0b3JhZ2UuZ2V0VXNlclJlc2lkZW5jZXModXNlcklkKTtcbiAgICAgICAgICBjb25zdCBoYXNSZXNpZGVuY2VJbkJ1aWxkaW5nID0gYXdhaXQgUHJvbWlzZS5hbGwoXG4gICAgICAgICAgICByZXNpZGVuY2VzMi5tYXAoYXN5bmMgKHVyKSA9PiB7XG4gICAgICAgICAgICAgIGNvbnN0IHJlc2lkZW5jZSA9IGF3YWl0IHN0b3JhZ2UuZ2V0UmVzaWRlbmNlKHVyLnJlc2lkZW5jZUlkKTtcbiAgICAgICAgICAgICAgcmV0dXJuIHJlc2lkZW5jZSAmJiByZXNpZGVuY2UuYnVpbGRpbmdJZCA9PT0gYnVpbGRpbmdJZDtcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgKTtcbiAgICAgICAgICBpZiAoIWhhc1Jlc2lkZW5jZUluQnVpbGRpbmcuc29tZShCb29sZWFuKSkge1xuICAgICAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAzKS5qc29uKHsgbWVzc2FnZTogXCJDYW5ub3QgYXNzaWduIGRvY3VtZW50IHRvIGJ1aWxkaW5nIHdoZXJlIHlvdSBoYXZlIG5vIHJlc2lkZW5jZVwiIH0pO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBjb25zdCB1bmlmaWVkRG9jdW1lbnQgPSB7XG4gICAgICAgICAgbmFtZTogdmFsaWRhdGVkRGF0YS5uYW1lIHx8IHZhbGlkYXRlZERhdGEudGl0bGUgfHwgXCJVbnRpdGxlZFwiLFxuICAgICAgICAgIGRlc2NyaXB0aW9uOiB2YWxpZGF0ZWREYXRhLmRlc2NyaXB0aW9uLFxuICAgICAgICAgIGRvY3VtZW50VHlwZTogdmFsaWRhdGVkRGF0YS50eXBlLFxuICAgICAgICAgIGZpbGVQYXRoOiB2YWxpZGF0ZWREYXRhLmZpbGVQYXRoIHx8IGB0ZW1wLXBhdGgtJHtEYXRlLm5vdygpfWAsXG4gICAgICAgICAgaXNWaXNpYmxlVG9UZW5hbnRzOiB2YWxpZGF0ZWREYXRhLmlzVmlzaWJsZVRvVGVuYW50cyB8fCBmYWxzZSxcbiAgICAgICAgICByZXNpZGVuY2VJZDogdm9pZCAwLFxuICAgICAgICAgIGJ1aWxkaW5nSWQ6IHZhbGlkYXRlZERhdGEuYnVpbGRpbmdJZCxcbiAgICAgICAgICB1cGxvYWRlZEJ5SWQ6IHZhbGlkYXRlZERhdGEudXBsb2FkZWRCeUlkXG4gICAgICAgIH07XG4gICAgICAgIGNvbnN0IGRvY3VtZW50ID0gYXdhaXQgc3RvcmFnZS5jcmVhdGVEb2N1bWVudCh1bmlmaWVkRG9jdW1lbnQpO1xuICAgICAgICBpZiAocmVxLmZpbGU/LnBhdGgpIHtcbiAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgZnMyLnVubGlua1N5bmMocmVxLmZpbGUucGF0aCk7XG4gICAgICAgICAgfSBjYXRjaCAoY2xlYW51cEVycm9yKSB7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJlcy5zdGF0dXMoMjAxKS5qc29uKHtcbiAgICAgICAgICAuLi5kb2N1bWVudCxcbiAgICAgICAgICBkb2N1bWVudENhdGVnb3J5OiBcImJ1aWxkaW5nXCIsXG4gICAgICAgICAgZW50aXR5VHlwZTogXCJidWlsZGluZ1wiLFxuICAgICAgICAgIGVudGl0eUlkOiBkb2N1bWVudC5idWlsZGluZ0lkXG4gICAgICAgIH0pO1xuICAgICAgfSBlbHNlIGlmIChmaW5hbERvY3VtZW50UmVjb3JkVHlwZSA9PT0gXCJyZXNpZGVudFwiKSB7XG4gICAgICAgIGlmICghcmVzaWRlbmNlSWQpIHtcbiAgICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oeyBtZXNzYWdlOiBcInJlc2lkZW5jZUlkIGlzIHJlcXVpcmVkIGZvciByZXNpZGVudCBkb2N1bWVudHNcIiB9KTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCB2YWxpZGF0ZWREYXRhID0gY3JlYXRlUmVzaWRlbnREb2N1bWVudFNjaGVtYS5wYXJzZSh7XG4gICAgICAgICAgLi4ub3RoZXJEYXRhLFxuICAgICAgICAgIHJlc2lkZW5jZUlkLFxuICAgICAgICAgIHVwbG9hZGVkQnlJZDogdXNlcklkLFxuICAgICAgICAgIGZpbGVQYXRoOiByZXEuZmlsZSA/IHJlcS5maWxlLnBhdGggOiB2b2lkIDBcbiAgICAgICAgICAvLyBmaWxlTmFtZSBpcyBoYW5kbGVkIHZpYSBuYW1lIGZpZWxkXG4gICAgICAgIH0pO1xuICAgICAgICBpZiAodXNlclJvbGUgPT09IFwibWFuYWdlclwiKSB7XG4gICAgICAgICAgY29uc3Qgb3JnYW5pemF0aW9uczMgPSBhd2FpdCBzdG9yYWdlLmdldFVzZXJPcmdhbml6YXRpb25zKHVzZXJJZCk7XG4gICAgICAgICAgY29uc3Qgb3JnYW5pemF0aW9uSWQgPSBvcmdhbml6YXRpb25zMy5sZW5ndGggPiAwID8gb3JnYW5pemF0aW9uczNbMF0ub3JnYW5pemF0aW9uSWQgOiB2b2lkIDA7XG4gICAgICAgICAgY29uc3QgcmVzaWRlbmNlID0gYXdhaXQgc3RvcmFnZS5nZXRSZXNpZGVuY2UocmVzaWRlbmNlSWQpO1xuICAgICAgICAgIGlmIChyZXNpZGVuY2UpIHtcbiAgICAgICAgICAgIGNvbnN0IGJ1aWxkaW5nID0gYXdhaXQgc3RvcmFnZS5nZXRCdWlsZGluZyhyZXNpZGVuY2UuYnVpbGRpbmdJZCk7XG4gICAgICAgICAgICBpZiAoIWJ1aWxkaW5nIHx8IGJ1aWxkaW5nLm9yZ2FuaXphdGlvbklkICE9PSBvcmdhbml6YXRpb25JZCkge1xuICAgICAgICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDMpLmpzb24oeyBtZXNzYWdlOiBcIkNhbm5vdCBhc3NpZ24gZG9jdW1lbnQgdG8gcmVzaWRlbmNlIG91dHNpZGUgeW91ciBvcmdhbml6YXRpb25cIiB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDA0KS5qc29uKHsgbWVzc2FnZTogXCJSZXNpZGVuY2Ugbm90IGZvdW5kXCIgfSk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmICh1c2VyUm9sZSA9PT0gXCJyZXNpZGVudFwiKSB7XG4gICAgICAgICAgY29uc3QgcmVzaWRlbmNlczIgPSBhd2FpdCBzdG9yYWdlLmdldFVzZXJSZXNpZGVuY2VzKHVzZXJJZCk7XG4gICAgICAgICAgY29uc3QgcmVzaWRlbmNlSWRzID0gcmVzaWRlbmNlczIubWFwKCh1cikgPT4gdXIucmVzaWRlbmNlSWQpO1xuICAgICAgICAgIGlmICghcmVzaWRlbmNlSWRzLmluY2x1ZGVzKHJlc2lkZW5jZUlkKSkge1xuICAgICAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAzKS5qc29uKHsgbWVzc2FnZTogXCJDYW5ub3QgYXNzaWduIGRvY3VtZW50IHRvIHJlc2lkZW5jZSB5b3UgZG8gbm90IG93blwiIH0pO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBjb25zdCB1bmlmaWVkRG9jdW1lbnQgPSB7XG4gICAgICAgICAgbmFtZTogdmFsaWRhdGVkRGF0YS5uYW1lLFxuICAgICAgICAgIGRlc2NyaXB0aW9uOiB2b2lkIDAsXG4gICAgICAgICAgZG9jdW1lbnRUeXBlOiB2YWxpZGF0ZWREYXRhLnR5cGUsXG4gICAgICAgICAgZmlsZVBhdGg6IHZhbGlkYXRlZERhdGEuZmlsZVBhdGggfHwgYHRlbXAtcGF0aC0ke0RhdGUubm93KCl9YCxcbiAgICAgICAgICBpc1Zpc2libGVUb1RlbmFudHM6IHZhbGlkYXRlZERhdGEuaXNWaXNpYmxlVG9UZW5hbnRzLFxuICAgICAgICAgIHJlc2lkZW5jZUlkOiB2YWxpZGF0ZWREYXRhLnJlc2lkZW5jZUlkLFxuICAgICAgICAgIGJ1aWxkaW5nSWQ6IHZvaWQgMCxcbiAgICAgICAgICB1cGxvYWRlZEJ5SWQ6IHZhbGlkYXRlZERhdGEudXBsb2FkZWRCeUlkXG4gICAgICAgIH07XG4gICAgICAgIGNvbnN0IGRvY3VtZW50ID0gYXdhaXQgc3RvcmFnZS5jcmVhdGVEb2N1bWVudCh1bmlmaWVkRG9jdW1lbnQpO1xuICAgICAgICBjb25zb2xlLmxvZyhcIlxcdXsxRjRERH0gQ3JlYXRlZCByZXNpZGVudCBkb2N1bWVudDpcIiwgZG9jdW1lbnQpO1xuICAgICAgICBjb25zb2xlLmxvZyhcIlxcdXsxRjRERH0gRG9jdW1lbnRSZWNvcmQgSUQ6XCIsIGRvY3VtZW50LmlkKTtcbiAgICAgICAgY29uc3QgcmVzcG9uc2UgPSB7XG4gICAgICAgICAgLi4uZG9jdW1lbnQsXG4gICAgICAgICAgZG9jdW1lbnRDYXRlZ29yeTogXCJyZXNpZGVudFwiLFxuICAgICAgICAgIGVudGl0eVR5cGU6IFwicmVzaWRlbmNlXCIsXG4gICAgICAgICAgZW50aXR5SWQ6IGRvY3VtZW50LnJlc2lkZW5jZUlkXG4gICAgICAgIH07XG4gICAgICAgIGNvbnNvbGUubG9nKFwiXFx1ezFGNEU0fSBTZW5kaW5nIHJlc3BvbnNlOlwiLCByZXNwb25zZSk7XG4gICAgICAgIHJlcy5zdGF0dXMoMjAxKS5qc29uKHJlc3BvbnNlKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7XG4gICAgICAgICAgbWVzc2FnZTogJ0ludmFsaWQgZG9jdW1lbnRUeXBlLiBNdXN0IGJlIGVpdGhlciBcImJ1aWxkaW5nXCIgb3IgXCJyZXNpZGVudFwiJ1xuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9IGNhdGNoIChfZXJyb3IpIHtcbiAgICAgIGlmIChyZXEuZmlsZT8ucGF0aCkge1xuICAgICAgICB0cnkge1xuICAgICAgICAgIGZzMi51bmxpbmtTeW5jKHJlcS5maWxlLnBhdGgpO1xuICAgICAgICB9IGNhdGNoIChjbGVhbnVwRXJyb3IpIHtcbiAgICAgICAgICBjb25zb2xlLndhcm4oXCJcXHUyNkEwXFx1RkUwRiBGYWlsZWQgdG8gY2xlYW51cCB0ZW1wb3JhcnkgZmlsZTpcIiwgY2xlYW51cEVycm9yKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgY29uc29sZS5lcnJvcihcIlxcdTI3NEMgRXJyb3IgY3JlYXRpbmcgZG9jdW1lbnQ6XCIsIF9lcnJvcik7XG4gICAgICBpZiAoX2Vycm9yIGluc3RhbmNlb2YgejExLlpvZEVycm9yKSB7XG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7XG4gICAgICAgICAgbWVzc2FnZTogXCJJbnZhbGlkIGRvY3VtZW50IGRhdGFcIixcbiAgICAgICAgICBlcnJvcnM6IF9lcnJvci5pc3N1ZXNcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgICByZXMuc3RhdHVzKDUwMCkuanNvbih7IG1lc3NhZ2U6IFwiRmFpbGVkIHRvIGNyZWF0ZSBkb2N1bWVudFwiIH0pO1xuICAgIH1cbiAgfSk7XG4gIGFwcDIucHV0KFwiL2FwaS9kb2N1bWVudHMvOmlkXCIsIHJlcXVpcmVBdXRoLCBhc3luYyAocmVxLCByZXMpID0+IHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgdXNlciA9IHJlcS51c2VyO1xuICAgICAgY29uc3QgdXNlclJvbGUgPSB1c2VyLnJvbGU7XG4gICAgICBjb25zdCB1c2VySWQgPSB1c2VyLmlkO1xuICAgICAgY29uc3QgZG9jdW1lbnRJZCA9IHJlcS5wYXJhbXMuaWQ7XG4gICAgICBjb25zdCBkb2N1bWVudFR5cGUgPSByZXEucXVlcnkudHlwZTtcbiAgICAgIGNvbnN0IG9yZ2FuaXphdGlvbnMzID0gYXdhaXQgc3RvcmFnZS5nZXRVc2VyT3JnYW5pemF0aW9ucyh1c2VySWQpO1xuICAgICAgY29uc3QgcmVzaWRlbmNlczIgPSBhd2FpdCBzdG9yYWdlLmdldFVzZXJSZXNpZGVuY2VzKHVzZXJJZCk7XG4gICAgICBjb25zdCBidWlsZGluZ3M1ID0gYXdhaXQgc3RvcmFnZS5nZXRCdWlsZGluZ3MoKTtcbiAgICAgIGNvbnN0IG9yZ2FuaXphdGlvbklkID0gb3JnYW5pemF0aW9uczMubGVuZ3RoID4gMCA/IG9yZ2FuaXphdGlvbnMzWzBdLm9yZ2FuaXphdGlvbklkIDogdm9pZCAwO1xuICAgICAgY29uc3QgcmVzaWRlbmNlSWRzID0gcmVzaWRlbmNlczIubWFwKCh1cikgPT4gdXIucmVzaWRlbmNlSWQpO1xuICAgICAgY29uc3QgYnVpbGRpbmdJZHMgPSBidWlsZGluZ3M1Lm1hcCgoYikgPT4gYi5pZCk7XG4gICAgICBsZXQgdXBkYXRlZERvY3VtZW50ID0gbnVsbDtcbiAgICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IHZhbGlkYXRlZERhdGEgPSBjcmVhdGVEb2N1bWVudFNjaGVtYS5wYXJ0aWFsKCkucGFyc2UocmVxLmJvZHkpO1xuICAgICAgICB1cGRhdGVkRG9jdW1lbnQgPSBhd2FpdCBzdG9yYWdlLnVwZGF0ZURvY3VtZW50KGRvY3VtZW50SWQsIHZhbGlkYXRlZERhdGEpO1xuICAgICAgICBpZiAodXBkYXRlZERvY3VtZW50KSB7XG4gICAgICAgICAgdXBkYXRlZERvY3VtZW50LmRvY3VtZW50Q2F0ZWdvcnkgPSB1cGRhdGVkRG9jdW1lbnQuYnVpbGRpbmdJZCA/IFwiYnVpbGRpbmdcIiA6IFwicmVzaWRlbnRcIjtcbiAgICAgICAgICB1cGRhdGVkRG9jdW1lbnQuZW50aXR5VHlwZSA9IHVwZGF0ZWREb2N1bWVudC5idWlsZGluZ0lkID8gXCJidWlsZGluZ1wiIDogXCJyZXNpZGVuY2VcIjtcbiAgICAgICAgICB1cGRhdGVkRG9jdW1lbnQuZW50aXR5SWQgPSB1cGRhdGVkRG9jdW1lbnQuYnVpbGRpbmdJZCB8fCB1cGRhdGVkRG9jdW1lbnQucmVzaWRlbmNlSWQ7XG4gICAgICAgIH1cbiAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgY29uc29sZS53YXJuKFwiXFx1MjZBMFxcdUZFMEYgRXJyb3IgaW4gZG9jdW1lbnQgdXBkYXRlOlwiLCBlKTtcbiAgICAgIH1cbiAgICAgIGlmICghdXBkYXRlZERvY3VtZW50KSB7XG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwNCkuanNvbih7IG1lc3NhZ2U6IFwiRG9jdW1lbnRSZWNvcmQgbm90IGZvdW5kIG9yIGFjY2VzcyBkZW5pZWRcIiB9KTtcbiAgICAgIH1cbiAgICAgIHJlcy5qc29uKHVwZGF0ZWREb2N1bWVudCk7XG4gICAgfSBjYXRjaCAoX2Vycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKFwiXFx1Mjc0QyBFcnJvciB1cGRhdGluZyBkb2N1bWVudDpcIiwgX2Vycm9yKTtcbiAgICAgIGlmIChfZXJyb3IgaW5zdGFuY2VvZiB6MTEuWm9kRXJyb3IpIHtcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHtcbiAgICAgICAgICBtZXNzYWdlOiBcIkludmFsaWQgZG9jdW1lbnQgZGF0YVwiLFxuICAgICAgICAgIGVycm9yczogX2Vycm9yLmlzc3Vlc1xuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICAgIHJlcy5zdGF0dXMoNTAwKS5qc29uKHsgbWVzc2FnZTogXCJGYWlsZWQgdG8gdXBkYXRlIGRvY3VtZW50XCIgfSk7XG4gICAgfVxuICB9KTtcbiAgYXBwMi5kZWxldGUoXCIvYXBpL2RvY3VtZW50cy86aWRcIiwgcmVxdWlyZUF1dGgsIGFzeW5jIChyZXEsIHJlcykgPT4ge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCB1c2VyID0gcmVxLnVzZXI7XG4gICAgICBjb25zdCB1c2VyUm9sZSA9IHVzZXIucm9sZTtcbiAgICAgIGNvbnN0IHVzZXJJZCA9IHVzZXIuaWQ7XG4gICAgICBjb25zdCBkb2N1bWVudElkID0gcmVxLnBhcmFtcy5pZDtcbiAgICAgIGNvbnN0IGRvY3VtZW50VHlwZSA9IHJlcS5xdWVyeS50eXBlO1xuICAgICAgY29uc3Qgb3JnYW5pemF0aW9uczMgPSBhd2FpdCBzdG9yYWdlLmdldFVzZXJPcmdhbml6YXRpb25zKHVzZXJJZCk7XG4gICAgICBjb25zdCBvcmdhbml6YXRpb25JZCA9IG9yZ2FuaXphdGlvbnMzLmxlbmd0aCA+IDAgPyBvcmdhbml6YXRpb25zM1swXS5vcmdhbml6YXRpb25JZCA6IHZvaWQgMDtcbiAgICAgIGxldCBkZWxldGVkID0gZmFsc2U7XG4gICAgICB0cnkge1xuICAgICAgICBkZWxldGVkID0gYXdhaXQgc3RvcmFnZS5kZWxldGVEb2N1bWVudChkb2N1bWVudElkKTtcbiAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgY29uc29sZS53YXJuKFwiXFx1MjZBMFxcdUZFMEYgRXJyb3IgZGVsZXRpbmcgZG9jdW1lbnQ6XCIsIGUpO1xuICAgICAgfVxuICAgICAgaWYgKCFkZWxldGVkKSB7XG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwNCkuanNvbih7IG1lc3NhZ2U6IFwiRG9jdW1lbnRSZWNvcmQgbm90IGZvdW5kIG9yIGFjY2VzcyBkZW5pZWRcIiB9KTtcbiAgICAgIH1cbiAgICAgIHJlcy5zdGF0dXMoMjA0KS5zZW5kKCk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoXCJcXHUyNzRDIEVycm9yIGluIGRvY3VtZW50IGRlbGV0aW9uOlwiLCBlcnJvcik7XG4gICAgICByZXMuc3RhdHVzKDUwMCkuanNvbih7IG1lc3NhZ2U6IFwiRmFpbGVkIHRvIGRlbGV0ZSBkb2N1bWVudFwiIH0pO1xuICAgIH1cbiAgfSk7XG4gIGFwcDIucG9zdChcbiAgICBcIi9hcGkvZG9jdW1lbnRzLzppZC91cGxvYWRcIixcbiAgICByZXF1aXJlQXV0aCxcbiAgICB1cGxvYWQuc2luZ2xlKFwiZmlsZVwiKSxcbiAgICBhc3luYyAocmVxLCByZXMpID0+IHtcbiAgICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IHVzZXIgPSByZXEudXNlcjtcbiAgICAgICAgY29uc3QgdXNlclJvbGUgPSB1c2VyLnJvbGU7XG4gICAgICAgIGNvbnN0IHVzZXJJZCA9IHVzZXIuaWQ7XG4gICAgICAgIGNvbnN0IGRvY3VtZW50SWQgPSByZXEucGFyYW1zLmlkO1xuICAgICAgICBjb25zdCB7IGRvY3VtZW50VHlwZSA9IFwicmVzaWRlbnRcIiwgcmVzaWRlbmNlSWQsIC4uLm90aGVyRGF0YSB9ID0gcmVxLmJvZHk7XG4gICAgICAgIGNvbnNvbGUubG9nKFwiXFx1ezFGNEU0fSBVcGxvYWQgcmVxdWVzdCByZWNlaXZlZDpcIiwge1xuICAgICAgICAgIGRvY3VtZW50SWQsXG4gICAgICAgICAgdXNlcklkLFxuICAgICAgICAgIHVzZXJSb2xlLFxuICAgICAgICAgIGhhc0ZpbGU6ICEhcmVxLmZpbGUsXG4gICAgICAgICAgZmlsZUluZm86IHJlcS5maWxlID8ge1xuICAgICAgICAgICAgZmllbGRuYW1lOiByZXEuZmlsZS5maWVsZG5hbWUsXG4gICAgICAgICAgICBvcmlnaW5hbG5hbWU6IHJlcS5maWxlLm9yaWdpbmFsbmFtZSxcbiAgICAgICAgICAgIGVuY29kaW5nOiByZXEuZmlsZS5lbmNvZGluZyxcbiAgICAgICAgICAgIG1pbWV0eXBlOiByZXEuZmlsZS5taW1ldHlwZSxcbiAgICAgICAgICAgIHNpemU6IHJlcS5maWxlLnNpemUsXG4gICAgICAgICAgICBwYXRoOiByZXEuZmlsZS5wYXRoXG4gICAgICAgICAgfSA6IG51bGwsXG4gICAgICAgICAgYm9keUtleXM6IE9iamVjdC5rZXlzKHJlcS5ib2R5KSxcbiAgICAgICAgICBjb250ZW50VHlwZTogcmVxLmhlYWRlcnNbXCJjb250ZW50LXR5cGVcIl1cbiAgICAgICAgfSk7XG4gICAgICAgIGlmICghW1wiYWRtaW5cIiwgXCJtYW5hZ2VyXCIsIFwicmVzaWRlbnRcIl0uaW5jbHVkZXModXNlclJvbGUpKSB7XG4gICAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAzKS5qc29uKHsgbWVzc2FnZTogXCJJbnN1ZmZpY2llbnQgcGVybWlzc2lvbnMgdG8gY3JlYXRlIGRvY3VtZW50c1wiIH0pO1xuICAgICAgICB9XG4gICAgICAgIGlmICghcmVxLmZpbGUpIHtcbiAgICAgICAgICBjb25zb2xlLmVycm9yKFwiXFx1Mjc0QyBObyBmaWxlIHJlY2VpdmVkIGluIHVwbG9hZCByZXF1ZXN0XCIpO1xuICAgICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7IG1lc3NhZ2U6IFwiRmlsZSBpcyByZXF1aXJlZCBmb3IgdXBsb2FkXCIgfSk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgZG9jdW1lbnRzMiA9IGF3YWl0IHN0b3JhZ2UuZ2V0RG9jdW1lbnRzKHtcbiAgICAgICAgICB1c2VySWQsXG4gICAgICAgICAgdXNlclJvbGVcbiAgICAgICAgfSk7XG4gICAgICAgIGNvbnN0IGV4aXN0aW5nRG9jdW1lbnQgPSBkb2N1bWVudHMyLmZpbmQoKGRvYykgPT4gZG9jLmlkID09PSBkb2N1bWVudElkKTtcbiAgICAgICAgaWYgKCFleGlzdGluZ0RvY3VtZW50KSB7XG4gICAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDA0KS5qc29uKHsgbWVzc2FnZTogXCJEb2N1bWVudFJlY29yZCBub3QgZm91bmRcIiB9KTtcbiAgICAgICAgfVxuICAgICAgICBsZXQgb3JnYW5pemF0aW9uSWQ7XG4gICAgICAgIGlmIChleGlzdGluZ0RvY3VtZW50LmJ1aWxkaW5nSWQpIHtcbiAgICAgICAgICBjb25zdCBidWlsZGluZyA9IGF3YWl0IHN0b3JhZ2UuZ2V0QnVpbGRpbmcoZXhpc3RpbmdEb2N1bWVudC5idWlsZGluZ0lkKTtcbiAgICAgICAgICBpZiAoIWJ1aWxkaW5nKSB7XG4gICAgICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDQpLmpzb24oeyBtZXNzYWdlOiBcIkJ1aWxkaW5nIG5vdCBmb3VuZFwiIH0pO1xuICAgICAgICAgIH1cbiAgICAgICAgICBvcmdhbml6YXRpb25JZCA9IGJ1aWxkaW5nLm9yZ2FuaXphdGlvbklkO1xuICAgICAgICB9IGVsc2UgaWYgKGV4aXN0aW5nRG9jdW1lbnQucmVzaWRlbmNlSWQpIHtcbiAgICAgICAgICBjb25zdCByZXNpZGVuY2UgPSBhd2FpdCBzdG9yYWdlLmdldFJlc2lkZW5jZShleGlzdGluZ0RvY3VtZW50LnJlc2lkZW5jZUlkKTtcbiAgICAgICAgICBpZiAoIXJlc2lkZW5jZSkge1xuICAgICAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDA0KS5qc29uKHsgbWVzc2FnZTogXCJSZXNpZGVuY2Ugbm90IGZvdW5kXCIgfSk7XG4gICAgICAgICAgfVxuICAgICAgICAgIGNvbnN0IGJ1aWxkaW5nID0gYXdhaXQgc3RvcmFnZS5nZXRCdWlsZGluZyhyZXNpZGVuY2UuYnVpbGRpbmdJZCk7XG4gICAgICAgICAgaWYgKCFidWlsZGluZykge1xuICAgICAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDA0KS5qc29uKHsgbWVzc2FnZTogXCJCdWlsZGluZyBub3QgZm91bmRcIiB9KTtcbiAgICAgICAgICB9XG4gICAgICAgICAgb3JnYW5pemF0aW9uSWQgPSBidWlsZGluZy5vcmdhbml6YXRpb25JZDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oeyBtZXNzYWdlOiBcIkRvY3VtZW50UmVjb3JkIG11c3QgYmUgYXNzb2NpYXRlZCB3aXRoIGEgYnVpbGRpbmcgb3IgcmVzaWRlbmNlXCIgfSk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgdXBkYXRlZERvY3VtZW50ID0gYXdhaXQgc3RvcmFnZS51cGRhdGVEb2N1bWVudChkb2N1bWVudElkLCB7XG4gICAgICAgICAgZmlsZVBhdGg6IGBwcm9kX29yZ18ke29yZ2FuaXphdGlvbklkfS8ke3JlcS5maWxlLm9yaWdpbmFsbmFtZX1gLFxuICAgICAgICAgIG5hbWU6IHJlcS5maWxlLm9yaWdpbmFsbmFtZVxuICAgICAgICAgIC8vIFJlbW92ZSBtaW1lVHlwZSBhcyBpdCdzIG5vdCBpbiBzY2hlbWFcbiAgICAgICAgfSk7XG4gICAgICAgIGlmIChyZXEuZmlsZSAmJiByZXEuZmlsZS5wYXRoICYmIGZzMi5leGlzdHNTeW5jKHJlcS5maWxlLnBhdGgpKSB7XG4gICAgICAgICAgZnMyLnVubGlua1N5bmMocmVxLmZpbGUucGF0aCk7XG4gICAgICAgIH1cbiAgICAgICAgcmVzLnN0YXR1cygyMDApLmpzb24oe1xuICAgICAgICAgIGRvY3VtZW50OiB1cGRhdGVkRG9jdW1lbnQsXG4gICAgICAgICAgbWVzc2FnZTogXCJGaWxlIHVwbG9hZGVkIHN1Y2Nlc3NmdWxseVwiXG4gICAgICAgIH0pO1xuICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgY29uc3QgZXJyb3JUaW1lc3RhbXAgPSAoLyogQF9fUFVSRV9fICovIG5ldyBEYXRlKCkpLnRvSVNPU3RyaW5nKCk7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoYFske2Vycm9yVGltZXN0YW1wfV0gRXJyb3IgdHlwZTpgLCBlcnJvci5jb25zdHJ1Y3Rvci5uYW1lKTtcbiAgICAgICAgY29uc29sZS5lcnJvcihgWyR7ZXJyb3JUaW1lc3RhbXB9XSBFcnJvciBtZXNzYWdlOmAsIGVycm9yLm1lc3NhZ2UpO1xuICAgICAgICBjb25zb2xlLmVycm9yKGBbJHtlcnJvclRpbWVzdGFtcH1dIEVycm9yIHN0YWNrOmAsIGVycm9yLnN0YWNrKTtcbiAgICAgICAgaWYgKHJlcS5maWxlICYmIHJlcS5maWxlLnBhdGggJiYgZnMyLmV4aXN0c1N5bmMocmVxLmZpbGUucGF0aCkpIHtcbiAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgZnMyLnVubGlua1N5bmMocmVxLmZpbGUucGF0aCk7XG4gICAgICAgICAgfSBjYXRjaCAoY2xlYW51cEVycm9yKSB7XG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKGBbJHtlcnJvclRpbWVzdGFtcH1dIEVycm9yIGNsZWFuaW5nIHVwIGZpbGU6YCwgY2xlYW51cEVycm9yKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGVycm9yLm5hbWUgPT09IFwiWm9kRXJyb3JcIikge1xuICAgICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7XG4gICAgICAgICAgICBtZXNzYWdlOiBcIlZhbGlkYXRpb24gZXJyb3JcIixcbiAgICAgICAgICAgIGVycm9yczogZXJyb3IuZXJyb3JzXG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgcmVzLnN0YXR1cyg1MDApLmpzb24oeyBtZXNzYWdlOiBcIkZhaWxlZCB0byB1cGxvYWQgZG9jdW1lbnRcIiB9KTtcbiAgICAgIH1cbiAgICB9XG4gICk7XG4gIGFwcDIucG9zdChcIi9hcGkvZG9jdW1lbnRzL3VwbG9hZFwiLCByZXF1aXJlQXV0aCwgdXBsb2FkLnNpbmdsZShcImZpbGVcIiksIGFzeW5jIChyZXEsIHJlcykgPT4ge1xuICAgIGNvbnN0IHRpbWVzdGFtcDkgPSAoLyogQF9fUFVSRV9fICovIG5ldyBEYXRlKCkpLnRvSVNPU3RyaW5nKCk7XG4gICAgY29uc29sZS5sb2coYFske3RpbWVzdGFtcDl9XSBcXHV7MUY0Q0J9IFBPU1QgL2FwaS9kb2N1bWVudHMvdXBsb2FkIC0gU3RhcnRpbmcgdXBsb2FkYCwge1xuICAgICAgaGFzRmlsZTogISFyZXEuZmlsZSxcbiAgICAgIGZpbGVOYW1lOiByZXEuZmlsZT8ub3JpZ2luYWxuYW1lLFxuICAgICAgZmlsZVNpemU6IHJlcS5maWxlPy5zaXplLFxuICAgICAgYm9keTogcmVxLmJvZHksXG4gICAgICB1c2VySWQ6IHJlcS51c2VyPy5pZFxuICAgIH0pO1xuICAgIHRyeSB7XG4gICAgICBpZiAoIXJlcS5maWxlKSB7XG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7IG1lc3NhZ2U6IFwiTm8gZmlsZSB1cGxvYWRlZFwiIH0pO1xuICAgICAgfVxuICAgICAgY29uc3QgZm9ybURhdGEgPSB7XG4gICAgICAgIG5hbWU6IHJlcS5ib2R5Lm5hbWUsXG4gICAgICAgIGRlc2NyaXB0aW9uOiByZXEuYm9keS5kZXNjcmlwdGlvbiB8fCBcIlwiLFxuICAgICAgICBkb2N1bWVudFR5cGU6IHJlcS5ib2R5LmRvY3VtZW50VHlwZSB8fCByZXEuYm9keS50eXBlLFxuICAgICAgICAvLyBIYW5kbGUgYm90aCBmaWVsZCBuYW1lc1xuICAgICAgICBpc1Zpc2libGVUb1RlbmFudHM6IHJlcS5ib2R5LmlzVmlzaWJsZVRvVGVuYW50cyA9PT0gXCJ0cnVlXCIsXG4gICAgICAgIHJlc2lkZW5jZUlkOiByZXEuYm9keS5yZXNpZGVuY2VJZCB8fCB2b2lkIDAsXG4gICAgICAgIGJ1aWxkaW5nSWQ6IHJlcS5ib2R5LmJ1aWxkaW5nSWQgfHwgdm9pZCAwLFxuICAgICAgICBhdHRhY2hlZFRvVHlwZTogcmVxLmJvZHkuYXR0YWNoZWRUb1R5cGUgfHwgdm9pZCAwLFxuICAgICAgICBhdHRhY2hlZFRvSWQ6IHJlcS5ib2R5LmF0dGFjaGVkVG9JZCB8fCB2b2lkIDBcbiAgICAgIH07XG4gICAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgPT09IFwicHJvZHVjdGlvblwiKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKFwiW1BST0QgREVCVUddIEZvcm0gZGF0YSBiZWZvcmUgdmFsaWRhdGlvbjpcIiwgZm9ybURhdGEpO1xuICAgICAgfVxuICAgICAgY29uc3QgdmFsaWRhdGVkRGF0YSA9IHVwbG9hZERvY3VtZW50UmVjb3JkU2NoZW1hLnBhcnNlKGZvcm1EYXRhKTtcbiAgICAgIGNvbnNvbGUubG9nKGBbJHt0aW1lc3RhbXA5fV0gXFx1ezFGNTBEfSBWQUxJREFUSU9OIERFQlVHOiBGb3JtIGRhdGEgYmVmb3JlIHZhbGlkYXRpb246YCwgZm9ybURhdGEpO1xuICAgICAgY29uc29sZS5sb2coYFske3RpbWVzdGFtcDl9XSBcXHV7MUY1MER9IFZBTElEQVRJT04gREVCVUc6IFZhbGlkYXRlZCBkYXRhOmAsIHtcbiAgICAgICAgLi4udmFsaWRhdGVkRGF0YSxcbiAgICAgICAgaGFzQXR0YWNoZWRUb1R5cGU6ICEhdmFsaWRhdGVkRGF0YS5hdHRhY2hlZFRvVHlwZSxcbiAgICAgICAgaGFzQXR0YWNoZWRUb0lkOiAhIXZhbGlkYXRlZERhdGEuYXR0YWNoZWRUb0lkXG4gICAgICB9KTtcbiAgICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViA9PT0gXCJwcm9kdWN0aW9uXCIpIHtcbiAgICAgICAgY29uc29sZS5sb2coXCJbUFJPRCBERUJVR10gRm9ybSBkYXRhIHZhbGlkYXRpb24gcGFzc2VkOlwiLCB2YWxpZGF0ZWREYXRhKTtcbiAgICAgIH1cbiAgICAgIGNvbnN0IHVzZXJJZCA9IHJlcS51c2VyPy5pZDtcbiAgICAgIGlmICghdXNlcklkKSB7XG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMSkuanNvbih7IG1lc3NhZ2U6IFwiVXNlciBub3QgYXV0aGVudGljYXRlZFwiIH0pO1xuICAgICAgfVxuICAgICAgY29uc29sZS5sb2coXCJcXHV7MUY0QzF9IEdDUyBkaXNhYmxlZCAtIHNraXBwaW5nIGJ1Y2tldCBjb25maWd1cmF0aW9uIGNoZWNrXCIpO1xuICAgICAgY29uc3QgZmlsZUV4dGVuc2lvbiA9IHBhdGgzLmV4dG5hbWUocmVxLmZpbGUub3JpZ2luYWxuYW1lKTtcbiAgICAgIGNvbnN0IGJhc2VGaWxlTmFtZSA9IHBhdGgzLmJhc2VuYW1lKHJlcS5maWxlLm9yaWdpbmFsbmFtZSwgZmlsZUV4dGVuc2lvbik7XG4gICAgICBjb25zdCB1bmlxdWVGaWxlTmFtZSA9IGAke3V1aWR2NCgpfS0ke2Jhc2VGaWxlTmFtZX0ke2ZpbGVFeHRlbnNpb259YDtcbiAgICAgIGxldCBmaWxlUGF0aDtcbiAgICAgIGlmICh2YWxpZGF0ZWREYXRhLnJlc2lkZW5jZUlkKSB7XG4gICAgICAgIGZpbGVQYXRoID0gYHJlc2lkZW5jZXMvJHt2YWxpZGF0ZWREYXRhLnJlc2lkZW5jZUlkfS8ke3VuaXF1ZUZpbGVOYW1lfWA7XG4gICAgICB9IGVsc2UgaWYgKHZhbGlkYXRlZERhdGEuYnVpbGRpbmdJZCkge1xuICAgICAgICBmaWxlUGF0aCA9IGBidWlsZGluZ3MvJHt2YWxpZGF0ZWREYXRhLmJ1aWxkaW5nSWR9LyR7dW5pcXVlRmlsZU5hbWV9YDtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGZpbGVQYXRoID0gYGdlbmVyYWwvJHt1bmlxdWVGaWxlTmFtZX1gO1xuICAgICAgfVxuICAgICAgY29uc29sZS5sb2coXCJcXHV7MUY0QzF9IEdDUyBkaXNhYmxlZCAtIHVzaW5nIGxvY2FsIHN0b3JhZ2UgZm9yIGFsbCBkb2N1bWVudCBvcGVyYXRpb25zXCIpO1xuICAgICAgdHJ5IHtcbiAgICAgICAgY29uc3QgbG9jYWxTdG9yYWdlUGF0aCA9IHBhdGgzLmpvaW4ocHJvY2Vzcy5jd2QoKSwgXCJ1cGxvYWRzXCIpO1xuICAgICAgICB0cnkge1xuICAgICAgICAgIGlmICghZnMyLmV4aXN0c1N5bmMobG9jYWxTdG9yYWdlUGF0aCkpIHtcbiAgICAgICAgICAgIGZzMi5ta2RpclN5bmMobG9jYWxTdG9yYWdlUGF0aCwgeyByZWN1cnNpdmU6IHRydWUgfSk7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhgXFx1ezFGNEMxfSBDcmVhdGVkIHVwbG9hZHMgZGlyZWN0b3J5OiAke2xvY2FsU3RvcmFnZVBhdGh9YCk7XG4gICAgICAgICAgfVxuICAgICAgICB9IGNhdGNoIChkaXJFcnJvcikge1xuICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXCJGYWlsZWQgdG8gY3JlYXRlIHVwbG9hZHMgZGlyZWN0b3J5OlwiLCBkaXJFcnJvcik7XG4gICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiQ2Fubm90IGNyZWF0ZSB1cGxvYWRzIGRpcmVjdG9yeSAtIGNoZWNrIHBlcm1pc3Npb25zXCIpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGxvY2FsRmlsZVBhdGggPSBwYXRoMy5qb2luKGxvY2FsU3RvcmFnZVBhdGgsIGZpbGVQYXRoKTtcbiAgICAgICAgY29uc3QgbG9jYWxGaWxlRGlyID0gcGF0aDMuZGlybmFtZShsb2NhbEZpbGVQYXRoKTtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICBpZiAoIWZzMi5leGlzdHNTeW5jKGxvY2FsRmlsZURpcikpIHtcbiAgICAgICAgICAgIGZzMi5ta2RpclN5bmMobG9jYWxGaWxlRGlyLCB7IHJlY3Vyc2l2ZTogdHJ1ZSB9KTtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGBcXHV7MUY0QzF9IENyZWF0ZWQgc3ViZGlyZWN0b3J5OiAke2xvY2FsRmlsZURpcn1gKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0gY2F0Y2ggKHN1YmRpckVycm9yKSB7XG4gICAgICAgICAgY29uc29sZS5lcnJvcihcIkZhaWxlZCB0byBjcmVhdGUgZmlsZSBzdWJkaXJlY3Rvcnk6XCIsIHN1YmRpckVycm9yKTtcbiAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJDYW5ub3QgY3JlYXRlIGZpbGUgZGlyZWN0b3J5IC0gY2hlY2sgcGVybWlzc2lvbnNcIik7XG4gICAgICAgIH1cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICBmczIuY29weUZpbGVTeW5jKHJlcS5maWxlLnBhdGgsIGxvY2FsRmlsZVBhdGgpO1xuICAgICAgICAgIGNvbnNvbGUubG9nKGBcXHV7MUY0QzF9IEZpbGUgc2F2ZWQgc3VjY2Vzc2Z1bGx5IGF0ICR7bG9jYWxGaWxlUGF0aH1gKTtcbiAgICAgICAgfSBjYXRjaCAoY29weUVycm9yKSB7XG4gICAgICAgICAgY29uc29sZS5lcnJvcihcIkZhaWxlZCB0byBjb3B5IGZpbGU6XCIsIGNvcHlFcnJvcik7XG4gICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiQ2Fubm90IHNhdmUgZmlsZSAtIGNoZWNrIGRpc2sgc3BhY2UgYW5kIHBlcm1pc3Npb25zXCIpO1xuICAgICAgICB9XG4gICAgICB9IGNhdGNoIChsb2NhbEVycm9yKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoXCJMb2NhbCBzdG9yYWdlIGVycm9yOlwiLCBsb2NhbEVycm9yKTtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiRmFpbGVkIHRvIHNhdmUgZmlsZSBsb2NhbGx5XCIpO1xuICAgICAgfVxuICAgICAgY29uc3QgZG9jdW1lbnREYXRhID0ge1xuICAgICAgICBuYW1lOiB2YWxpZGF0ZWREYXRhLm5hbWUsXG4gICAgICAgIGRlc2NyaXB0aW9uOiB2YWxpZGF0ZWREYXRhLmRlc2NyaXB0aW9uLFxuICAgICAgICBkb2N1bWVudFR5cGU6IHZhbGlkYXRlZERhdGEuZG9jdW1lbnRUeXBlLFxuICAgICAgICBmaWxlUGF0aCxcbiAgICAgICAgaXNWaXNpYmxlVG9UZW5hbnRzOiB2YWxpZGF0ZWREYXRhLmlzVmlzaWJsZVRvVGVuYW50cyxcbiAgICAgICAgcmVzaWRlbmNlSWQ6IHZhbGlkYXRlZERhdGEucmVzaWRlbmNlSWQsXG4gICAgICAgIGJ1aWxkaW5nSWQ6IHZhbGlkYXRlZERhdGEuYnVpbGRpbmdJZCxcbiAgICAgICAgdXBsb2FkZWRCeUlkOiB1c2VySWQsXG4gICAgICAgIGF0dGFjaGVkVG9UeXBlOiB2YWxpZGF0ZWREYXRhLmF0dGFjaGVkVG9UeXBlLFxuICAgICAgICBhdHRhY2hlZFRvSWQ6IHZhbGlkYXRlZERhdGEuYXR0YWNoZWRUb0lkXG4gICAgICB9O1xuICAgICAgY29uc29sZS5sb2coYFske3RpbWVzdGFtcDl9XSBcXHV7MUYzQUZ9IENSSVRJQ0FMOiBBYm91dCB0byBjcmVhdGUgZG9jdW1lbnQgaW4gZGF0YWJhc2U6YCwge1xuICAgICAgICBuYW1lOiBkb2N1bWVudERhdGEubmFtZSxcbiAgICAgICAgdHlwZTogZG9jdW1lbnREYXRhLmRvY3VtZW50VHlwZSxcbiAgICAgICAgYnVpbGRpbmdJZDogZG9jdW1lbnREYXRhLmJ1aWxkaW5nSWQsXG4gICAgICAgIHJlc2lkZW5jZUlkOiBkb2N1bWVudERhdGEucmVzaWRlbmNlSWQsXG4gICAgICAgIHVwbG9hZGVkQnlJZDogZG9jdW1lbnREYXRhLnVwbG9hZGVkQnlJZCxcbiAgICAgICAgYXR0YWNoZWRUb1R5cGU6IGRvY3VtZW50RGF0YS5hdHRhY2hlZFRvVHlwZSxcbiAgICAgICAgYXR0YWNoZWRUb0lkOiBkb2N1bWVudERhdGEuYXR0YWNoZWRUb0lkXG4gICAgICB9KTtcbiAgICAgIGNvbnN0IG5ld0RvY3VtZW50ID0gYXdhaXQgc3RvcmFnZS5jcmVhdGVEb2N1bWVudChkb2N1bWVudERhdGEpO1xuICAgICAgY29uc29sZS5sb2coYFske3RpbWVzdGFtcDl9XSBcXHUyNzA1IENSSVRJQ0FMOiBEb2N1bWVudFJlY29yZCBjcmVhdGVkIHN1Y2Nlc3NmdWxseTpgLCB7XG4gICAgICAgIGlkOiBuZXdEb2N1bWVudD8uaWQsXG4gICAgICAgIG5hbWU6IG5ld0RvY3VtZW50Py5uYW1lLFxuICAgICAgICBmaWxlUGF0aDogbmV3RG9jdW1lbnQ/LmZpbGVQYXRoXG4gICAgICB9KTtcbiAgICAgIGlmIChmczIuZXhpc3RzU3luYyhyZXEuZmlsZS5wYXRoKSkge1xuICAgICAgICBmczIudW5saW5rU3luYyhyZXEuZmlsZS5wYXRoKTtcbiAgICAgIH1cbiAgICAgIHJlcy5zdGF0dXMoMjAxKS5qc29uKHtcbiAgICAgICAgbWVzc2FnZTogXCJEb2N1bWVudFJlY29yZCB1cGxvYWRlZCBzdWNjZXNzZnVsbHlcIixcbiAgICAgICAgZG9jdW1lbnQ6IG5ld0RvY3VtZW50XG4gICAgICB9KTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc3QgZXJyb3JFbnRyeSA9IGxvZ0Vycm9yKFwiUE9TVCAvYXBpL2RvY3VtZW50cy91cGxvYWRcIiwgZXJyb3IsIHJlcS51c2VyKTtcbiAgICAgIGlmIChyZXEuZmlsZSAmJiByZXEuZmlsZS5wYXRoICYmIGZzMi5leGlzdHNTeW5jKHJlcS5maWxlLnBhdGgpKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgZnMyLnVubGlua1N5bmMocmVxLmZpbGUucGF0aCk7XG4gICAgICAgIH0gY2F0Y2ggKGNsZWFudXBFcnJvcikge1xuICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciBjbGVhbmluZyB1cCB0ZW1wb3JhcnkgZmlsZTpcIiwgY2xlYW51cEVycm9yKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgaWYgKGVycm9yLm5hbWUgPT09IFwiWm9kRXJyb3JcIikge1xuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oe1xuICAgICAgICAgIG1lc3NhZ2U6IFwiVmFsaWRhdGlvbiBlcnJvclwiLFxuICAgICAgICAgIGVycm9yczogZXJyb3IuZXJyb3JzLFxuICAgICAgICAgIGVycm9yX2lkOiBlcnJvckVudHJ5LnRpbWVzdGFtcFxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICAgIGlmIChlcnJvci5tZXNzYWdlICYmIGVycm9yLm1lc3NhZ2UuaW5jbHVkZXMoXCJHb29nbGUgQ2xvdWQgU3RvcmFnZVwiKSkge1xuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg1MDApLmpzb24oe1xuICAgICAgICAgIG1lc3NhZ2U6IFwiRmlsZSB1cGxvYWQgZmFpbGVkXCIsXG4gICAgICAgICAgZXJyb3I6IFwiU3RvcmFnZSBzZXJ2aWNlIGVycm9yXCIsXG4gICAgICAgICAgZXJyb3JfaWQ6IGVycm9yRW50cnkudGltZXN0YW1wXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgICAgaWYgKGVycm9yPy5tZXNzYWdlPy5pbmNsdWRlcyhcInVuaXF1ZSBjb25zdHJhaW50XCIpIHx8IGVycm9yPy5jb2RlID09PSBcIjIzNTA1XCIpIHtcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDA5KS5qc29uKHtcbiAgICAgICAgICBtZXNzYWdlOiBcIkRvY3VtZW50UmVjb3JkIHBhdGggY29uZmxpY3QgLSBwbGVhc2UgdHJ5IHVwbG9hZGluZyBhZ2FpblwiLFxuICAgICAgICAgIGVycm9yOiBcIlBhdGggYWxyZWFkeSBleGlzdHNcIixcbiAgICAgICAgICBlcnJvcl9pZDogZXJyb3JFbnRyeS50aW1lc3RhbXBcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgICBpZiAoZXJyb3IubWVzc2FnZSAmJiBlcnJvci5tZXNzYWdlLmluY2x1ZGVzKFwiZGF0YWJhc2VcIikpIHtcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNTAwKS5qc29uKHtcbiAgICAgICAgICBtZXNzYWdlOiBcIkZhaWxlZCB0byBzYXZlIGRvY3VtZW50IHJlY29yZFwiLFxuICAgICAgICAgIGVycm9yOiBcIkRhdGFiYXNlIGVycm9yXCIsXG4gICAgICAgICAgZXJyb3JfaWQ6IGVycm9yRW50cnkudGltZXN0YW1wXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgICAgcmVzLnN0YXR1cyg1MDApLmpzb24oe1xuICAgICAgICBtZXNzYWdlOiBcIkludGVybmFsIHNlcnZlciBlcnJvclwiLFxuICAgICAgICBlcnJvcjogXCJEb2N1bWVudFJlY29yZCB1cGxvYWQgZmFpbGVkXCIsXG4gICAgICAgIGVycm9yX2lkOiBlcnJvckVudHJ5LnRpbWVzdGFtcCxcbiAgICAgICAgZGVidWdfaW5mbzogcHJvY2Vzcy5lbnYuTk9ERV9FTlYgPT09IFwiZGV2ZWxvcG1lbnRcIiA/IGVycm9yLm1lc3NhZ2UgOiB2b2lkIDBcbiAgICAgIH0pO1xuICAgIH1cbiAgfSk7XG4gIGFwcDIuZ2V0KFwiL2FwaS9kb2N1bWVudHMvOmlkL2ZpbGVcIiwgcmVxdWlyZUF1dGgsIGFzeW5jIChyZXEsIHJlcykgPT4ge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCB1c2VyID0gcmVxLnVzZXI7XG4gICAgICBjb25zdCB1c2VyUm9sZSA9IHVzZXIucm9sZTtcbiAgICAgIGNvbnN0IHVzZXJJZCA9IHVzZXIuaWQ7XG4gICAgICBjb25zdCBkb2N1bWVudElkID0gcmVxLnBhcmFtcy5pZDtcbiAgICAgIGNvbnN0IGlzRG93bmxvYWQgPSByZXEucXVlcnkuZG93bmxvYWQgPT09IFwidHJ1ZVwiO1xuICAgICAgY29uc3Qgb3JnYW5pemF0aW9uczMgPSBhd2FpdCBzdG9yYWdlLmdldFVzZXJPcmdhbml6YXRpb25zKHVzZXJJZCk7XG4gICAgICBjb25zdCByZXNpZGVuY2VzMiA9IGF3YWl0IHN0b3JhZ2UuZ2V0VXNlclJlc2lkZW5jZXModXNlcklkKTtcbiAgICAgIGNvbnN0IGJ1aWxkaW5nczUgPSBhd2FpdCBzdG9yYWdlLmdldEJ1aWxkaW5ncygpO1xuICAgICAgY29uc3Qgb3JnYW5pemF0aW9uSWQgPSBvcmdhbml6YXRpb25zMy5sZW5ndGggPiAwID8gb3JnYW5pemF0aW9uczNbMF0ub3JnYW5pemF0aW9uSWQgOiB2b2lkIDA7XG4gICAgICBjb25zdCByZXNpZGVuY2VJZHMgPSByZXNpZGVuY2VzMi5tYXAoKHVyKSA9PiB1ci5yZXNpZGVuY2VJZCB8fCB1ci51c2VyUmVzaWRlbmNlPy5yZXNpZGVuY2VJZCB8fCB1ci5yZXNpZGVuY2U/LmlkKS5maWx0ZXIoQm9vbGVhbik7XG4gICAgICBjb25zdCBidWlsZGluZ0lkcyA9IGJ1aWxkaW5nczUubWFwKChiKSA9PiBiLmlkKTtcbiAgICAgIGNvbnN0IGZpbHRlcnMgPSB7XG4gICAgICAgIHVzZXJJZCxcbiAgICAgICAgdXNlclJvbGVcbiAgICAgIH07XG4gICAgICBjb25zdCBkb2N1bWVudHMyID0gYXdhaXQgc3RvcmFnZS5nZXREb2N1bWVudHMoZmlsdGVycyk7XG4gICAgICBjb25zdCBkb2N1bWVudCA9IGRvY3VtZW50czIuZmluZCgoZG9jKSA9PiBkb2MuaWQgPT09IGRvY3VtZW50SWQpO1xuICAgICAgaWYgKCFkb2N1bWVudCkge1xuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDQpLmpzb24oeyBtZXNzYWdlOiBcIkRvY3VtZW50UmVjb3JkIG5vdCBmb3VuZFwiIH0pO1xuICAgICAgfVxuICAgICAgbGV0IGhhc0FjY2VzcyA9IGZhbHNlO1xuICAgICAgaWYgKHVzZXJSb2xlID09PSBcImFkbWluXCIpIHtcbiAgICAgICAgaGFzQWNjZXNzID0gdHJ1ZTtcbiAgICAgIH0gZWxzZSBpZiAodXNlclJvbGUgPT09IFwibWFuYWdlclwiICYmIG9yZ2FuaXphdGlvbklkKSB7XG4gICAgICAgIGlmIChkb2N1bWVudC5idWlsZGluZ0lkICYmIGJ1aWxkaW5nSWRzLmluY2x1ZGVzKGRvY3VtZW50LmJ1aWxkaW5nSWQpKSB7XG4gICAgICAgICAgaGFzQWNjZXNzID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoZG9jdW1lbnQucmVzaWRlbmNlSWQgJiYgcmVzaWRlbmNlSWRzLmluY2x1ZGVzKGRvY3VtZW50LnJlc2lkZW5jZUlkKSkge1xuICAgICAgICAgIGhhc0FjY2VzcyA9IHRydWU7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSBpZiAodXNlclJvbGUgPT09IFwicmVzaWRlbnRcIikge1xuICAgICAgICBpZiAoZG9jdW1lbnQucmVzaWRlbmNlSWQgJiYgcmVzaWRlbmNlSWRzLmluY2x1ZGVzKGRvY3VtZW50LnJlc2lkZW5jZUlkKSkge1xuICAgICAgICAgIGhhc0FjY2VzcyA9IHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGRvY3VtZW50LmJ1aWxkaW5nSWQpIHtcbiAgICAgICAgICBjb25zdCB1c2VyQnVpbGRpbmdJZHMgPSByZXNpZGVuY2VzMi5tYXAoKHVyKSA9PiB1ci5yZXNpZGVuY2U/LmJ1aWxkaW5nSWQgfHwgdXIudXNlclJlc2lkZW5jZT8ucmVzaWRlbmNlPy5idWlsZGluZ0lkKS5maWx0ZXIoQm9vbGVhbik7XG4gICAgICAgICAgaWYgKHVzZXJCdWlsZGluZ0lkcy5pbmNsdWRlcyhkb2N1bWVudC5idWlsZGluZ0lkKSkge1xuICAgICAgICAgICAgaGFzQWNjZXNzID0gdHJ1ZTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSBpZiAodXNlclJvbGUgPT09IFwidGVuYW50XCIpIHtcbiAgICAgICAgaWYgKCFkb2N1bWVudC5pc1Zpc2libGVUb1RlbmFudHMpIHtcbiAgICAgICAgICBoYXNBY2Nlc3MgPSBmYWxzZTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBpZiAoZG9jdW1lbnQucmVzaWRlbmNlSWQgJiYgcmVzaWRlbmNlSWRzLmluY2x1ZGVzKGRvY3VtZW50LnJlc2lkZW5jZUlkKSkge1xuICAgICAgICAgICAgaGFzQWNjZXNzID0gdHJ1ZTtcbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKGRvY3VtZW50LmJ1aWxkaW5nSWQpIHtcbiAgICAgICAgICAgIGNvbnN0IHVzZXJCdWlsZGluZ0lkcyA9IHJlc2lkZW5jZXMyLm1hcCgodXIpID0+IHVyLnJlc2lkZW5jZT8uYnVpbGRpbmdJZCB8fCB1ci51c2VyUmVzaWRlbmNlPy5yZXNpZGVuY2U/LmJ1aWxkaW5nSWQpLmZpbHRlcihCb29sZWFuKTtcbiAgICAgICAgICAgIGlmICh1c2VyQnVpbGRpbmdJZHMuaW5jbHVkZXMoZG9jdW1lbnQuYnVpbGRpbmdJZCkpIHtcbiAgICAgICAgICAgICAgaGFzQWNjZXNzID0gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGlmICghaGFzQWNjZXNzKSB7XG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMykuanNvbih7IG1lc3NhZ2U6IFwiQWNjZXNzIGRlbmllZFwiIH0pO1xuICAgICAgfVxuICAgICAgaWYgKGRvY3VtZW50LmZpbGVQYXRoKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKFwiXFx1ezFGNEMxfSBHQ1MgZGlzYWJsZWQgLSBzZXJ2aW5nIGZyb20gbG9jYWwgc3RvcmFnZVwiKTtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICBsZXQgZmlsZVBhdGhUb1NlcnZlID0gZG9jdW1lbnQuZmlsZVBhdGg7XG4gICAgICAgICAgaWYgKGRvY3VtZW50LmZpbGVQYXRoLnN0YXJ0c1dpdGgoXCIvXCIpKSB7XG4gICAgICAgICAgICBmaWxlUGF0aFRvU2VydmUgPSBkb2N1bWVudC5maWxlUGF0aDtcbiAgICAgICAgICB9IGVsc2UgaWYgKGRvY3VtZW50LmZpbGVQYXRoLmluY2x1ZGVzKFwicmVzaWRlbmNlcy9cIikgfHwgZG9jdW1lbnQuZmlsZVBhdGguaW5jbHVkZXMoXCJidWlsZGluZ3MvXCIpIHx8IGRvY3VtZW50LmZpbGVQYXRoLmluY2x1ZGVzKFwidGV4dC1kb2N1bWVudHMvXCIpIHx8IGRvY3VtZW50LmZpbGVQYXRoLmluY2x1ZGVzKFwiZ2VuZXJhbC9cIikpIHtcbiAgICAgICAgICAgIGNvbnN0IHBvc3NpYmxlUGF0aHMgPSBbXG4gICAgICAgICAgICAgIHBhdGgzLmpvaW4ocHJvY2Vzcy5jd2QoKSwgXCJ1cGxvYWRzXCIsIGRvY3VtZW50LmZpbGVQYXRoKSxcbiAgICAgICAgICAgICAgLy8gTWFpbiBmYWxsYmFjayBsb2NhdGlvblxuICAgICAgICAgICAgICBgL3RtcC91cGxvYWRzLyR7ZG9jdW1lbnQuZmlsZVBhdGh9YCxcbiAgICAgICAgICAgICAgYC91cGxvYWRzLyR7ZG9jdW1lbnQuZmlsZVBhdGh9YCxcbiAgICAgICAgICAgICAgYC4vdXBsb2Fkcy8ke2RvY3VtZW50LmZpbGVQYXRofWAsXG4gICAgICAgICAgICAgIHBhdGgzLmpvaW4oXCIvdG1wXCIsIGRvY3VtZW50LmZpbGVQYXRoKVxuICAgICAgICAgICAgXTtcbiAgICAgICAgICAgIGZvciAoY29uc3QgcG9zc2libGVQYXRoIG9mIHBvc3NpYmxlUGF0aHMpIHtcbiAgICAgICAgICAgICAgaWYgKGZzMi5leGlzdHNTeW5jKHBvc3NpYmxlUGF0aCkpIHtcbiAgICAgICAgICAgICAgICBmaWxlUGF0aFRvU2VydmUgPSBwb3NzaWJsZVBhdGg7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coYFxcdXsxRjRDMn0gRm91bmQgZmlsZSBhdDogJHtmaWxlUGF0aFRvU2VydmV9YCk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9IGVsc2UgaWYgKGRvY3VtZW50LmZpbGVQYXRoLmluY2x1ZGVzKFwidG1wXCIpKSB7XG4gICAgICAgICAgICBmaWxlUGF0aFRvU2VydmUgPSBkb2N1bWVudC5maWxlUGF0aDtcbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKGZzMi5leGlzdHNTeW5jKGZpbGVQYXRoVG9TZXJ2ZSkpIHtcbiAgICAgICAgICAgIGxldCBmaWxlTmFtZSA9IGRvY3VtZW50LmZpbGVOYW1lIHx8IGRvY3VtZW50Lm5hbWUgfHwgcGF0aDMuYmFzZW5hbWUoZG9jdW1lbnQuZmlsZVBhdGgpO1xuICAgICAgICAgICAgaWYgKCFwYXRoMy5leHRuYW1lKGZpbGVOYW1lKSAmJiBkb2N1bWVudC5maWxlUGF0aCkge1xuICAgICAgICAgICAgICBjb25zdCBvcmlnaW5hbEV4dCA9IHBhdGgzLmV4dG5hbWUoZG9jdW1lbnQuZmlsZVBhdGgpO1xuICAgICAgICAgICAgICBpZiAob3JpZ2luYWxFeHQpIHtcbiAgICAgICAgICAgICAgICBmaWxlTmFtZSArPSBvcmlnaW5hbEV4dDtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGlzRG93bmxvYWQpIHtcbiAgICAgICAgICAgICAgcmVzLnNldEhlYWRlcihcIkNvbnRlbnQtRGlzcG9zaXRpb25cIiwgYGF0dGFjaG1lbnQ7IGZpbGVuYW1lPVwiJHtmaWxlTmFtZX1cImApO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgcmVzLnNldEhlYWRlcihcIkNvbnRlbnQtRGlzcG9zaXRpb25cIiwgYGlubGluZTsgZmlsZW5hbWU9XCIke2ZpbGVOYW1lfVwiYCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBleHQgPSBwYXRoMy5leHRuYW1lKGZpbGVOYW1lKS50b0xvd2VyQ2FzZSgpO1xuICAgICAgICAgICAgaWYgKGV4dCA9PT0gXCIucGRmXCIpIHtcbiAgICAgICAgICAgICAgcmVzLnNldEhlYWRlcihcIkNvbnRlbnQtVHlwZVwiLCBcImFwcGxpY2F0aW9uL3BkZlwiKTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoZXh0ID09PSBcIi5qcGdcIiB8fCBleHQgPT09IFwiLmpwZWdcIikge1xuICAgICAgICAgICAgICByZXMuc2V0SGVhZGVyKFwiQ29udGVudC1UeXBlXCIsIFwiaW1hZ2UvanBlZ1wiKTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoZXh0ID09PSBcIi5wbmdcIikge1xuICAgICAgICAgICAgICByZXMuc2V0SGVhZGVyKFwiQ29udGVudC1UeXBlXCIsIFwiaW1hZ2UvcG5nXCIpO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChleHQgPT09IFwiLmdpZlwiKSB7XG4gICAgICAgICAgICAgIHJlcy5zZXRIZWFkZXIoXCJDb250ZW50LVR5cGVcIiwgXCJpbWFnZS9naWZcIik7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKGV4dCA9PT0gXCIuZG9jXCIgfHwgZXh0ID09PSBcIi5kb2N4XCIpIHtcbiAgICAgICAgICAgICAgcmVzLnNldEhlYWRlcihcbiAgICAgICAgICAgICAgICBcIkNvbnRlbnQtVHlwZVwiLFxuICAgICAgICAgICAgICAgIFwiYXBwbGljYXRpb24vdm5kLm9wZW54bWxmb3JtYXRzLW9mZmljZWRvY3VtZW50LndvcmRwcm9jZXNzaW5nbWwuZG9jdW1lbnRcIlxuICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChleHQgPT09IFwiLnR4dFwiKSB7XG4gICAgICAgICAgICAgIHJlcy5zZXRIZWFkZXIoXCJDb250ZW50LVR5cGVcIiwgXCJ0ZXh0L3BsYWluOyBjaGFyc2V0PXV0Zi04XCIpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgcmVzLnNldEhlYWRlcihcIkNvbnRlbnQtVHlwZVwiLCBcImFwcGxpY2F0aW9uL29jdGV0LXN0cmVhbVwiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViA9PT0gXCJwcm9kdWN0aW9uXCIpIHtcbiAgICAgICAgICAgICAgY29uc3QgZmlsZVN0YXRzID0gZnMyLnN0YXRTeW5jKGZpbGVQYXRoVG9TZXJ2ZSk7XG4gICAgICAgICAgICAgIHJlcy5zZXQoe1xuICAgICAgICAgICAgICAgIFwiQ2FjaGUtQ29udHJvbFwiOiBcIm5vLWNhY2hlLCBuby1zdG9yZSwgbXVzdC1yZXZhbGlkYXRlXCIsXG4gICAgICAgICAgICAgICAgXCJQcmFnbWFcIjogXCJuby1jYWNoZVwiLFxuICAgICAgICAgICAgICAgIFwiRXhwaXJlc1wiOiBcIjBcIixcbiAgICAgICAgICAgICAgICBcIkVUYWdcIjogYFwiJHtkb2N1bWVudC5pZH0tJHtmaWxlU3RhdHMubXRpbWUuZ2V0VGltZSgpfVwiYCxcbiAgICAgICAgICAgICAgICBcIkxhc3QtTW9kaWZpZWRcIjogZmlsZVN0YXRzLm10aW1lLnRvVVRDU3RyaW5nKClcbiAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhgXFx1ezFGNEMyfSBTZXJ2aW5nIGZpbGU6ICR7ZmlsZVBhdGhUb1NlcnZlfSBhcyAke2ZpbGVOYW1lfWApO1xuICAgICAgICAgICAgcmV0dXJuIHJlcy5zZW5kRmlsZShwYXRoMy5yZXNvbHZlKGZpbGVQYXRoVG9TZXJ2ZSkpO1xuICAgICAgICAgIH1cbiAgICAgICAgICBjb25zb2xlLmxvZyhgXFx1Mjc0QyBGaWxlIG5vdCBmb3VuZCBhdCBmaWxlUGF0aDogJHtkb2N1bWVudC5maWxlUGF0aH1gKTtcbiAgICAgICAgICBjb25zb2xlLmxvZyhgXFx1Mjc0QyBUcmllZCBmaWxlUGF0aDogJHtmaWxlUGF0aFRvU2VydmV9YCk7XG4gICAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDA0KS5qc29uKHsgbWVzc2FnZTogXCJGaWxlIG5vdCBmb3VuZCBvbiBzZXJ2ZXJcIiB9KTtcbiAgICAgICAgfSBjYXRjaCAoZmlsZUVycm9yKSB7XG4gICAgICAgICAgY29uc29sZS5lcnJvcihcIlxcdTI3NEMgRXJyb3Igc2VydmluZyBmaWxlOlwiLCBmaWxlRXJyb3IpO1xuICAgICAgICAgIHJldHVybiByZXMuc3RhdHVzKDUwMCkuanNvbih7IG1lc3NhZ2U6IFwiRmFpbGVkIHRvIHNlcnZlIGZpbGVcIiB9KTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDA0KS5qc29uKHsgbWVzc2FnZTogXCJObyBmaWxlIGFzc29jaWF0ZWQgd2l0aCB0aGlzIGRvY3VtZW50XCIgfSk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoXCJcXHUyNzRDIEVycm9yIHNlcnZpbmcgZG9jdW1lbnQgZmlsZTpcIiwgZXJyb3IpO1xuICAgICAgcmVzLnN0YXR1cyg1MDApLmpzb24oeyBtZXNzYWdlOiBcIkZhaWxlZCB0byBzZXJ2ZSBkb2N1bWVudCBmaWxlXCIgfSk7XG4gICAgfVxuICB9KTtcbn1cblxuLy8gc2VydmVyL2FwaS9idWdzLnRzXG5pbml0X3N0b3JhZ2UoKTtcbmluaXRfc2NoZW1hKCk7XG5pbXBvcnQgeyB6IGFzIHoxMiB9IGZyb20gXCJ6b2RcIjtcbmltcG9ydCBtdWx0ZXIyIGZyb20gXCJtdWx0ZXJcIjtcbmltcG9ydCBwYXRoNCBmcm9tIFwicGF0aFwiO1xuaW1wb3J0IGZzMyBmcm9tIFwiZnNcIjtcbmltcG9ydCB7IHY0IGFzIHV1aWR2NDIgfSBmcm9tIFwidXVpZFwiO1xudmFyIHN0b3JhZ2VfY29uZmlnID0gbXVsdGVyMi5kaXNrU3RvcmFnZSh7XG4gIGRlc3RpbmF0aW9uOiAocmVxLCBmaWxlLCBjYikgPT4ge1xuICAgIGNvbnN0IHVwbG9hZERpciA9IHBhdGg0LmpvaW4ocHJvY2Vzcy5jd2QoKSwgXCJ1cGxvYWRzXCIsIFwiZ2VuZXJhbFwiKTtcbiAgICBpZiAoIWZzMy5leGlzdHNTeW5jKHVwbG9hZERpcikpIHtcbiAgICAgIGZzMy5ta2RpclN5bmModXBsb2FkRGlyLCB7IHJlY3Vyc2l2ZTogdHJ1ZSB9KTtcbiAgICB9XG4gICAgY2IobnVsbCwgdXBsb2FkRGlyKTtcbiAgfSxcbiAgZmlsZW5hbWU6IChyZXEsIGZpbGUsIGNiKSA9PiB7XG4gICAgY29uc3QgdW5pcXVlSWQgPSB1dWlkdjQyKCk7XG4gICAgY29uc3Qgb3JpZ2luYWxOYW1lID0gZmlsZS5vcmlnaW5hbG5hbWUucmVwbGFjZSgvW15hLXpBLVowLTkuLV0vZywgXCJfXCIpO1xuICAgIGNvbnN0IGZpbGVOYW1lID0gYCR7dW5pcXVlSWR9LSR7b3JpZ2luYWxOYW1lfWA7XG4gICAgY2IobnVsbCwgZmlsZU5hbWUpO1xuICB9XG59KTtcbnZhciB1cGxvYWQyID0gbXVsdGVyMih7IHN0b3JhZ2U6IHN0b3JhZ2VfY29uZmlnIH0pO1xuZnVuY3Rpb24gcmVnaXN0ZXJCdWdSb3V0ZXMoYXBwMikge1xuICBhcHAyLmdldChcIi9hcGkvYnVnc1wiLCByZXF1aXJlQXV0aCwgYXN5bmMgKHJlcSwgcmVzKSA9PiB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IGN1cnJlbnRVc2VyID0gcmVxLnVzZXIgfHwgcmVxLnNlc3Npb24/LnVzZXI7XG4gICAgICBpZiAoIWN1cnJlbnRVc2VyKSB7XG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMSkuanNvbih7XG4gICAgICAgICAgbWVzc2FnZTogXCJBdXRoZW50aWNhdGlvbiByZXF1aXJlZFwiLFxuICAgICAgICAgIGNvZGU6IFwiQVVUSF9SRVFVSVJFRFwiXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgICAgY29uc29sZS5sb2coYFxcdXsxRjRDQn0gRmV0Y2hpbmcgYnVncyBmb3IgdXNlciAke2N1cnJlbnRVc2VyLmlkfSB3aXRoIHJvbGUgJHtjdXJyZW50VXNlci5yb2xlfWApO1xuICAgICAgY29uc3QgYnVnczIgPSBhd2FpdCBzdG9yYWdlLmdldEJ1Z3NGb3JVc2VyKFxuICAgICAgICBjdXJyZW50VXNlci5pZCxcbiAgICAgICAgY3VycmVudFVzZXIucm9sZSxcbiAgICAgICAgY3VycmVudFVzZXIub3JnYW5pemF0aW9uSWRcbiAgICAgICk7XG4gICAgICBjb25zb2xlLmxvZyhgXFx1MjcwNSBGb3VuZCAke2J1Z3MyLmxlbmd0aH0gYnVncyBmb3IgdXNlciAke2N1cnJlbnRVc2VyLmlkfWApO1xuICAgICAgcmVzLmpzb24oYnVnczIpO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKFwiXFx1Mjc0QyBFcnJvciBmZXRjaGluZyBidWdzOlwiLCBlcnJvcik7XG4gICAgICByZXMuc3RhdHVzKDUwMCkuanNvbih7XG4gICAgICAgIGVycm9yOiBcIkludGVybmFsIHNlcnZlciBlcnJvclwiLFxuICAgICAgICBtZXNzYWdlOiBcIkZhaWxlZCB0byBmZXRjaCBidWdzXCJcbiAgICAgIH0pO1xuICAgIH1cbiAgfSk7XG4gIGFwcDIuZ2V0KFwiL2FwaS9idWdzLzppZFwiLCByZXF1aXJlQXV0aCwgYXN5bmMgKHJlcSwgcmVzKSA9PiB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHsgaWQgfSA9IHJlcS5wYXJhbXM7XG4gICAgICBjb25zdCBjdXJyZW50VXNlciA9IHJlcS51c2VyIHx8IHJlcS5zZXNzaW9uPy51c2VyO1xuICAgICAgaWYgKCFjdXJyZW50VXNlcikge1xuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDEpLmpzb24oe1xuICAgICAgICAgIG1lc3NhZ2U6IFwiQXV0aGVudGljYXRpb24gcmVxdWlyZWRcIixcbiAgICAgICAgICBjb2RlOiBcIkFVVEhfUkVRVUlSRURcIlxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICAgIGlmICghaWQpIHtcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHtcbiAgICAgICAgICBlcnJvcjogXCJCYWQgcmVxdWVzdFwiLFxuICAgICAgICAgIG1lc3NhZ2U6IFwiQnVnIElEIGlzIHJlcXVpcmVkXCJcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgICBjb25zdCBidWcgPSBhd2FpdCBzdG9yYWdlLmdldEJ1ZyhcbiAgICAgICAgaWQsXG4gICAgICAgIGN1cnJlbnRVc2VyLmlkLFxuICAgICAgICBjdXJyZW50VXNlci5yb2xlLFxuICAgICAgICBjdXJyZW50VXNlci5vcmdhbml6YXRpb25JZFxuICAgICAgKTtcbiAgICAgIGlmICghYnVnKSB7XG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwNCkuanNvbih7XG4gICAgICAgICAgZXJyb3I6IFwiTm90IGZvdW5kXCIsXG4gICAgICAgICAgbWVzc2FnZTogXCJCdWcgbm90IGZvdW5kIG9yIGFjY2VzcyBkZW5pZWRcIlxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICAgIHJlcy5qc29uKGJ1Zyk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoXCJcXHUyNzRDIEVycm9yIGZldGNoaW5nIGJ1ZzpcIiwgZXJyb3IpO1xuICAgICAgcmVzLnN0YXR1cyg1MDApLmpzb24oe1xuICAgICAgICBlcnJvcjogXCJJbnRlcm5hbCBzZXJ2ZXIgZXJyb3JcIixcbiAgICAgICAgbWVzc2FnZTogXCJGYWlsZWQgdG8gZmV0Y2ggYnVnXCJcbiAgICAgIH0pO1xuICAgIH1cbiAgfSk7XG4gIGFwcDIucG9zdChcIi9hcGkvYnVnc1wiLCByZXF1aXJlQXV0aCwgdXBsb2FkMi5hcnJheShcImF0dGFjaG1lbnRzXCIsIDEwKSwgYXN5bmMgKHJlcSwgcmVzKSA9PiB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IGN1cnJlbnRVc2VyID0gcmVxLnVzZXIgfHwgcmVxLnNlc3Npb24/LnVzZXI7XG4gICAgICBpZiAoIWN1cnJlbnRVc2VyKSB7XG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMSkuanNvbih7XG4gICAgICAgICAgbWVzc2FnZTogXCJBdXRoZW50aWNhdGlvbiByZXF1aXJlZFwiLFxuICAgICAgICAgIGNvZGU6IFwiQVVUSF9SRVFVSVJFRFwiXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgICAgY29uc3QgdmFsaWRhdGlvbiA9IGluc2VydEJ1Z1NjaGVtYS5zYWZlUGFyc2Uoe1xuICAgICAgICAuLi5yZXEuYm9keSxcbiAgICAgICAgY3JlYXRlZEJ5OiBjdXJyZW50VXNlci5pZFxuICAgICAgfSk7XG4gICAgICBpZiAoIXZhbGlkYXRpb24uc3VjY2Vzcykge1xuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oe1xuICAgICAgICAgIGVycm9yOiBcIlZhbGlkYXRpb24gZmFpbGVkXCIsXG4gICAgICAgICAgbWVzc2FnZTogXCJJbnZhbGlkIGJ1ZyBkYXRhXCIsXG4gICAgICAgICAgZGV0YWlsczogdmFsaWRhdGlvbi5lcnJvci5pc3N1ZXNcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgICBjb25zdCBidWdEYXRhID0gdmFsaWRhdGlvbi5kYXRhO1xuICAgICAgY29uc3QgYnVnID0gYXdhaXQgc3RvcmFnZS5jcmVhdGVCdWcoYnVnRGF0YSk7XG4gICAgICBpZiAocmVxLmZpbGVzICYmIHJlcS5maWxlcy5sZW5ndGggPiAwKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKGBcXHV7MUY0Q0V9IFByb2Nlc3NpbmcgJHtyZXEuZmlsZXMubGVuZ3RofSBhdHRhY2htZW50cyBmb3IgYnVnICR7YnVnLmlkfWApO1xuICAgICAgICBmb3IgKGNvbnN0IGZpbGUgb2YgcmVxLmZpbGVzKSB7XG4gICAgICAgICAgY29uc3QgZG9jdW1lbnREYXRhID0ge1xuICAgICAgICAgICAgbmFtZTogZmlsZS5vcmlnaW5hbG5hbWUsXG4gICAgICAgICAgICBkZXNjcmlwdGlvbjogYEF0dGFjaG1lbnQgZm9yIGJ1ZzogJHtidWcudGl0bGV9YCxcbiAgICAgICAgICAgIGRvY3VtZW50VHlwZTogXCJhdHRhY2htZW50XCIsXG4gICAgICAgICAgICBmaWxlUGF0aDogYGdlbmVyYWwvJHtmaWxlLmZpbGVuYW1lfWAsXG4gICAgICAgICAgICBmaWxlTmFtZTogZmlsZS5vcmlnaW5hbG5hbWUsXG4gICAgICAgICAgICBmaWxlU2l6ZTogZmlsZS5zaXplLnRvU3RyaW5nKCksXG4gICAgICAgICAgICBhdHRhY2hlZFRvVHlwZTogXCJidWdcIixcbiAgICAgICAgICAgIGF0dGFjaGVkVG9JZDogYnVnLmlkLFxuICAgICAgICAgICAgdXBsb2FkZWRCeUlkOiBjdXJyZW50VXNlci5pZFxuICAgICAgICAgIH07XG4gICAgICAgICAgYXdhaXQgc3RvcmFnZS5jcmVhdGVEb2N1bWVudCh7XG4gICAgICAgICAgICAuLi5kb2N1bWVudERhdGEsXG4gICAgICAgICAgICBpc1Zpc2libGVUb1RlbmFudHM6IGZhbHNlXG4gICAgICAgICAgfSk7XG4gICAgICAgICAgY29uc29sZS5sb2coYFxcdXsxRjRDNH0gQ3JlYXRlZCBhdHRhY2htZW50IGRvY3VtZW50IGZvciBidWcgJHtidWcuaWR9OiAke2ZpbGUub3JpZ2luYWxuYW1lfWApO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBjb25zb2xlLmxvZyhgXFx1ezFGNDFCfSBDcmVhdGVkIG5ldyBidWcgJHtidWcuaWR9IGJ5IHVzZXIgJHtjdXJyZW50VXNlci5pZH1gKTtcbiAgICAgIHJlcy5zdGF0dXMoMjAxKS5qc29uKGJ1Zyk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoXCJcXHUyNzRDIEVycm9yIGNyZWF0aW5nIGJ1ZzpcIiwgZXJyb3IpO1xuICAgICAgcmVzLnN0YXR1cyg1MDApLmpzb24oe1xuICAgICAgICBlcnJvcjogXCJJbnRlcm5hbCBzZXJ2ZXIgZXJyb3JcIixcbiAgICAgICAgbWVzc2FnZTogXCJGYWlsZWQgdG8gY3JlYXRlIGJ1Z1wiXG4gICAgICB9KTtcbiAgICB9XG4gIH0pO1xuICBhcHAyLnBhdGNoKFwiL2FwaS9idWdzLzppZFwiLCByZXF1aXJlQXV0aCwgYXN5bmMgKHJlcSwgcmVzKSA9PiB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHsgaWQgfSA9IHJlcS5wYXJhbXM7XG4gICAgICBjb25zdCBjdXJyZW50VXNlciA9IHJlcS51c2VyIHx8IHJlcS5zZXNzaW9uPy51c2VyO1xuICAgICAgaWYgKCFjdXJyZW50VXNlcikge1xuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDEpLmpzb24oe1xuICAgICAgICAgIG1lc3NhZ2U6IFwiQXV0aGVudGljYXRpb24gcmVxdWlyZWRcIixcbiAgICAgICAgICBjb2RlOiBcIkFVVEhfUkVRVUlSRURcIlxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICAgIGlmICghaWQpIHtcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHtcbiAgICAgICAgICBlcnJvcjogXCJCYWQgcmVxdWVzdFwiLFxuICAgICAgICAgIG1lc3NhZ2U6IFwiQnVnIElEIGlzIHJlcXVpcmVkXCJcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgICBjb25zdCB1cGRhdGVTY2hlbWEgPSB6MTIub2JqZWN0KHtcbiAgICAgICAgdGl0bGU6IHoxMi5zdHJpbmcoKS5taW4oMSwgXCJUaXRsZSBpcyByZXF1aXJlZFwiKS5tYXgoMjAwLCBcIlRpdGxlIG11c3Qgbm90IGV4Y2VlZCAyMDAgY2hhcmFjdGVyc1wiKS5vcHRpb25hbCgpLFxuICAgICAgICBkZXNjcmlwdGlvbjogejEyLnN0cmluZygpLm1pbigxMCwgXCJEZXNjcmlwdGlvbiBtdXN0IGJlIGF0IGxlYXN0IDEwIGNoYXJhY3RlcnNcIikubWF4KDJlMywgXCJEZXNjcmlwdGlvbiBtdXN0IG5vdCBleGNlZWQgMjAwMCBjaGFyYWN0ZXJzXCIpLm9wdGlvbmFsKCksXG4gICAgICAgIGNhdGVnb3J5OiB6MTIuZW51bShbXG4gICAgICAgICAgXCJ1aV91eFwiLFxuICAgICAgICAgIFwiZnVuY3Rpb25hbGl0eVwiLFxuICAgICAgICAgIFwicGVyZm9ybWFuY2VcIixcbiAgICAgICAgICBcImRhdGFcIixcbiAgICAgICAgICBcInNlY3VyaXR5XCIsXG4gICAgICAgICAgXCJpbnRlZ3JhdGlvblwiLFxuICAgICAgICAgIFwib3RoZXJcIlxuICAgICAgICBdKS5vcHRpb25hbCgpLFxuICAgICAgICBwYWdlOiB6MTIuc3RyaW5nKCkubWluKDEsIFwiUGFnZSBpcyByZXF1aXJlZFwiKS5vcHRpb25hbCgpLFxuICAgICAgICBwcmlvcml0eTogejEyLmVudW0oW1wibG93XCIsIFwibWVkaXVtXCIsIFwiaGlnaFwiLCBcImNyaXRpY2FsXCJdKS5vcHRpb25hbCgpLFxuICAgICAgICByZXByb2R1Y3Rpb25TdGVwczogejEyLnN0cmluZygpLm9wdGlvbmFsKCksXG4gICAgICAgIGVudmlyb25tZW50OiB6MTIuc3RyaW5nKCkub3B0aW9uYWwoKSxcbiAgICAgICAgc3RhdHVzOiB6MTIuZW51bShbXCJuZXdcIiwgXCJhY2tub3dsZWRnZWRcIiwgXCJpbl9wcm9ncmVzc1wiLCBcInJlc29sdmVkXCIsIFwiY2xvc2VkXCJdKS5vcHRpb25hbCgpLFxuICAgICAgICBhc3NpZ25lZFRvOiB6MTIuc3RyaW5nKCkudXVpZCgpLm51bGxhYmxlKCkub3B0aW9uYWwoKSxcbiAgICAgICAgbm90ZXM6IHoxMi5zdHJpbmcoKS5vcHRpb25hbCgpLFxuICAgICAgICByZXNvbHZlZEJ5OiB6MTIuc3RyaW5nKCkudXVpZCgpLm51bGxhYmxlKCkub3B0aW9uYWwoKSxcbiAgICAgICAgcmVzb2x2ZWRBdDogejEyLmRhdGUoKS5udWxsYWJsZSgpLm9wdGlvbmFsKClcbiAgICAgIH0pO1xuICAgICAgY29uc3QgdmFsaWRhdGlvbiA9IHVwZGF0ZVNjaGVtYS5zYWZlUGFyc2UocmVxLmJvZHkpO1xuICAgICAgaWYgKCF2YWxpZGF0aW9uLnN1Y2Nlc3MpIHtcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHtcbiAgICAgICAgICBlcnJvcjogXCJWYWxpZGF0aW9uIGZhaWxlZFwiLFxuICAgICAgICAgIG1lc3NhZ2U6IFwiSW52YWxpZCB1cGRhdGUgZGF0YVwiLFxuICAgICAgICAgIGRldGFpbHM6IHZhbGlkYXRpb24uZXJyb3IuaXNzdWVzXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgICAgY29uc3QgdXBkYXRlcyA9IHZhbGlkYXRpb24uZGF0YTtcbiAgICAgIGNvbnN0IGJ1ZyA9IGF3YWl0IHN0b3JhZ2UudXBkYXRlQnVnKGlkLCB1cGRhdGVzLCBjdXJyZW50VXNlci5pZCwgY3VycmVudFVzZXIucm9sZSk7XG4gICAgICBpZiAoIWJ1Zykge1xuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDQpLmpzb24oe1xuICAgICAgICAgIGVycm9yOiBcIk5vdCBmb3VuZFwiLFxuICAgICAgICAgIG1lc3NhZ2U6IFwiQnVnIG5vdCBmb3VuZCBvciBhY2Nlc3MgZGVuaWVkXCJcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgICBjb25zb2xlLmxvZyhgXFx1ezFGNEREfSBVcGRhdGVkIGJ1ZyAke2lkfSBieSB1c2VyICR7Y3VycmVudFVzZXIuaWR9YCk7XG4gICAgICByZXMuanNvbihidWcpO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKFwiXFx1Mjc0QyBFcnJvciB1cGRhdGluZyBidWc6XCIsIGVycm9yKTtcbiAgICAgIHJlcy5zdGF0dXMoNTAwKS5qc29uKHtcbiAgICAgICAgZXJyb3I6IFwiSW50ZXJuYWwgc2VydmVyIGVycm9yXCIsXG4gICAgICAgIG1lc3NhZ2U6IFwiRmFpbGVkIHRvIHVwZGF0ZSBidWdcIlxuICAgICAgfSk7XG4gICAgfVxuICB9KTtcbiAgYXBwMi5kZWxldGUoXCIvYXBpL2J1Z3MvOmlkXCIsIHJlcXVpcmVBdXRoLCBhc3luYyAocmVxLCByZXMpID0+IHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgeyBpZCB9ID0gcmVxLnBhcmFtcztcbiAgICAgIGNvbnN0IGN1cnJlbnRVc2VyID0gcmVxLnVzZXIgfHwgcmVxLnNlc3Npb24/LnVzZXI7XG4gICAgICBpZiAoIWN1cnJlbnRVc2VyKSB7XG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMSkuanNvbih7XG4gICAgICAgICAgbWVzc2FnZTogXCJBdXRoZW50aWNhdGlvbiByZXF1aXJlZFwiLFxuICAgICAgICAgIGNvZGU6IFwiQVVUSF9SRVFVSVJFRFwiXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgICAgaWYgKCFpZCkge1xuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oe1xuICAgICAgICAgIGVycm9yOiBcIkJhZCByZXF1ZXN0XCIsXG4gICAgICAgICAgbWVzc2FnZTogXCJCdWcgSUQgaXMgcmVxdWlyZWRcIlxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICAgIGNvbnN0IGRlbGV0ZWQgPSBhd2FpdCBzdG9yYWdlLmRlbGV0ZUJ1ZyhpZCwgY3VycmVudFVzZXIuaWQsIGN1cnJlbnRVc2VyLnJvbGUpO1xuICAgICAgaWYgKCFkZWxldGVkKSB7XG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwNCkuanNvbih7XG4gICAgICAgICAgZXJyb3I6IFwiTm90IGZvdW5kXCIsXG4gICAgICAgICAgbWVzc2FnZTogXCJCdWcgbm90IGZvdW5kIG9yIGFjY2VzcyBkZW5pZWRcIlxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICAgIGNvbnNvbGUubG9nKGBcXHV7MUY1RDF9XFx1RkUwRiBEZWxldGVkIGJ1ZyAke2lkfSBieSB1c2VyICR7Y3VycmVudFVzZXIuaWR9YCk7XG4gICAgICByZXMuc3RhdHVzKDIwNCkuc2VuZCgpO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKFwiXFx1Mjc0QyBFcnJvciBkZWxldGluZyBidWc6XCIsIGVycm9yKTtcbiAgICAgIHJlcy5zdGF0dXMoNTAwKS5qc29uKHtcbiAgICAgICAgZXJyb3I6IFwiSW50ZXJuYWwgc2VydmVyIGVycm9yXCIsXG4gICAgICAgIG1lc3NhZ2U6IFwiRmFpbGVkIHRvIGRlbGV0ZSBidWdcIlxuICAgICAgfSk7XG4gICAgfVxuICB9KTtcbn1cblxuLy8gc2VydmVyL2FwaS9iaWxscy50c1xuaW5pdF9kYigpO1xuaW1wb3J0IHsgZXEgYXMgZXE5LCBkZXNjIGFzIGRlc2MyLCBhbmQgYXMgYW5kOSwgc3FsIGFzIHNxbDE4IH0gZnJvbSBcImRyaXp6bGUtb3JtXCI7XG5pbml0X3N0b3JhZ2UoKTtcbmltcG9ydCB7IHogYXMgejEzIH0gZnJvbSBcInpvZFwiO1xuXG4vLyBzZXJ2ZXIvc2VydmljZXMvYmlsbC1nZW5lcmF0aW9uLXNlcnZpY2UudHNcbmluaXRfZGIoKTtcbmluaXRfZmluYW5jaWFsKCk7XG5pbml0X3NjaGVtYSgpO1xuaW1wb3J0IHsgZXEgYXMgZXE3LCBhbmQgYXMgYW5kNywgZ3RlIGFzIGd0ZTIsIG9yIGFzIG9yNCB9IGZyb20gXCJkcml6emxlLW9ybVwiO1xuaW1wb3J0IHsgdjQgYXMgdXVpZHY0MyB9IGZyb20gXCJ1dWlkXCI7XG52YXIgQmlsbEdlbmVyYXRpb25TZXJ2aWNlID0gY2xhc3Mge1xuICAvKipcbiAgICogR2V0IGJpbGxzIGJ5IHJlZmVyZW5jZSAoYXV0by1nZW5lcmF0ZWQgYmlsbHMgbGlua2VkIHRvIGEgcGFyZW50KS5cbiAgICogQHBhcmFtIHBhcmVudEJpbGxJZFxuICAgKi9cbiAgYXN5bmMgZ2V0QmlsbHNCeVJlZmVyZW5jZShwYXJlbnRCaWxsSWQpIHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgZXhpc3RpbmdCaWxscyA9IGF3YWl0IGRiLnNlbGVjdCgpLmZyb20oYmlsbHMpLndoZXJlKGVxNyhiaWxscy5yZWZlcmVuY2UsIHBhcmVudEJpbGxJZCkpO1xuICAgICAgcmV0dXJuIGV4aXN0aW5nQmlsbHM7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoXCJcXHUyNzRDIEVycm9yIGdldHRpbmcgYmlsbHMgYnkgcmVmZXJlbmNlOlwiLCBlcnJvcik7XG4gICAgICByZXR1cm4gW107XG4gICAgfVxuICB9XG4gIC8qKlxuICAgKiBTZXQgZW5kIGRhdGUgZm9yIGEgcmVjdXJyZW50IGJpbGwgKHN0b3BzIGZ1dHVyZSBhdXRvLWdlbmVyYXRpb24pLlxuICAgKiBAcGFyYW0gYmlsbElkXG4gICAqIEBwYXJhbSBlbmREYXRlXG4gICAqL1xuICBhc3luYyBzZXRSZWN1cnJlbmNlRW5kRGF0ZShiaWxsSWQsIGVuZERhdGUpIHtcbiAgICB0cnkge1xuICAgICAgYXdhaXQgZGIudXBkYXRlKGJpbGxzKS5zZXQoe1xuICAgICAgICBlbmREYXRlOiBlbmREYXRlLnRvSVNPU3RyaW5nKCkuc3BsaXQoXCJUXCIpWzBdLFxuICAgICAgICB1cGRhdGVkQXQ6IC8qIEBfX1BVUkVfXyAqLyBuZXcgRGF0ZSgpXG4gICAgICB9KS53aGVyZShlcTcoYmlsbHMuaWQsIGJpbGxJZCkpO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKFwiXFx1Mjc0QyBFcnJvciBzZXR0aW5nIHJlY3VycmVuY2UgZW5kIGRhdGU6XCIsIGVycm9yKTtcbiAgICAgIHRocm93IGVycm9yO1xuICAgIH1cbiAgfVxuICAvKipcbiAgICogR2VuZXJhdGUgZnV0dXJlIGJpbGwgaW5zdGFuY2VzIGZvciBhIHJlY3VycmVudCBiaWxsIHVwIHRvIDMgeWVhcnMuXG4gICAqIENyZWF0ZXMgYWN0dWFsIGJpbGwgcmVjb3JkcyB0aGF0IHVzZXJzIGNhbiBpbnRlcmFjdCB3aXRoIGluZGl2aWR1YWxseS5cbiAgICogQHBhcmFtIHBhcmVudEJpbGxcbiAgICovXG4gIGFzeW5jIGdlbmVyYXRlRnV0dXJlQmlsbEluc3RhbmNlcyhwYXJlbnRCaWxsKSB7XG4gICAgaWYgKHBhcmVudEJpbGwucGF5bWVudFR5cGUgIT09IFwicmVjdXJyZW50XCIpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIk9ubHkgcmVjdXJyZW50IGJpbGxzIGNhbiBnZW5lcmF0ZSBmdXR1cmUgaW5zdGFuY2VzXCIpO1xuICAgIH1cbiAgICBjb25zdCBzdGFydERhdGUgPSBuZXcgRGF0ZShwYXJlbnRCaWxsLnN0YXJ0RGF0ZSk7XG4gICAgc3RhcnREYXRlLnNldEZ1bGxZZWFyKHN0YXJ0RGF0ZS5nZXRGdWxsWWVhcigpICsgMSk7XG4gICAgbGV0IGVuZERhdGU7XG4gICAgaWYgKHBhcmVudEJpbGwuZW5kRGF0ZSkge1xuICAgICAgZW5kRGF0ZSA9IG5ldyBEYXRlKHBhcmVudEJpbGwuZW5kRGF0ZSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGVuZERhdGUgPSAvKiBAX19QVVJFX18gKi8gbmV3IERhdGUoKTtcbiAgICAgIGVuZERhdGUuc2V0RnVsbFllYXIoZW5kRGF0ZS5nZXRGdWxsWWVhcigpICsgMyk7XG4gICAgfVxuICAgIGNvbnN0IGV4aXN0aW5nQmlsbHMgPSBhd2FpdCB0aGlzLmdldEJpbGxzQnlSZWZlcmVuY2UocGFyZW50QmlsbC5pZCk7XG4gICAgaWYgKGV4aXN0aW5nQmlsbHMubGVuZ3RoID4gMCkge1xuICAgICAgY29uc29sZS5sb2coXG4gICAgICAgIGBcXHUyNkEwXFx1RkUwRiBGb3VuZCAke2V4aXN0aW5nQmlsbHMubGVuZ3RofSBleGlzdGluZyBhdXRvLWdlbmVyYXRlZCBiaWxscywgc2tpcHBpbmcgZ2VuZXJhdGlvbmBcbiAgICAgICk7XG4gICAgICByZXR1cm4ge1xuICAgICAgICBiaWxsc0NyZWF0ZWQ6IDAsXG4gICAgICAgIGdlbmVyYXRlZFVudGlsOiBlbmREYXRlLnRvSVNPU3RyaW5nKCkuc3BsaXQoXCJUXCIpWzBdXG4gICAgICB9O1xuICAgIH1cbiAgICBjb25zdCBnZW5lcmF0ZWRCaWxscyA9IFtdO1xuICAgIGNvbnN0IGN1cnJlbnREYXRlID0gbmV3IERhdGUoc3RhcnREYXRlKTtcbiAgICBsZXQgYmlsbHNDcmVhdGVkID0gMDtcbiAgICBjb25zdCBzY2hlZHVsZVR5cGUgPSB0aGlzLmRldGVjdFNjaGVkdWxlVHlwZShwYXJlbnRCaWxsKTtcbiAgICBjb25zdCBvY2N1cnJlbmNlcyA9IHRoaXMuY2FsY3VsYXRlT2NjdXJyZW5jZXMoY3VycmVudERhdGUsIGVuZERhdGUsIHNjaGVkdWxlVHlwZSk7XG4gICAgZm9yIChjb25zdCBvY2N1cnJlbmNlRGF0ZSBvZiBvY2N1cnJlbmNlcykge1xuICAgICAgY29uc3QgcGF5bWVudFBhcnRzID0gdGhpcy5jYWxjdWxhdGVQYXltZW50UGFydHMocGFyZW50QmlsbCwgb2NjdXJyZW5jZURhdGUpO1xuICAgICAgZm9yIChsZXQgcGFydEluZGV4ID0gMDsgcGFydEluZGV4IDwgcGF5bWVudFBhcnRzLmxlbmd0aDsgcGFydEluZGV4KyspIHtcbiAgICAgICAgY29uc3QgcGF5bWVudFBhcnQgPSBwYXltZW50UGFydHNbcGFydEluZGV4XTtcbiAgICAgICAgY29uc3QgZ2VuZXJhdGVkQmlsbCA9IHtcbiAgICAgICAgICBpZDogdXVpZHY0MygpLFxuICAgICAgICAgIGJ1aWxkaW5nSWQ6IHBhcmVudEJpbGwuYnVpbGRpbmdJZCxcbiAgICAgICAgICBiaWxsTnVtYmVyOiB0aGlzLmdlbmVyYXRlQmlsbE51bWJlcihwYXJlbnRCaWxsLCBvY2N1cnJlbmNlRGF0ZSwgcGFydEluZGV4KSxcbiAgICAgICAgICB0aXRsZTogdGhpcy5nZW5lcmF0ZUJpbGxUaXRsZShwYXJlbnRCaWxsLCBvY2N1cnJlbmNlRGF0ZSwgcGFydEluZGV4LCBwYXltZW50UGFydHMubGVuZ3RoKSxcbiAgICAgICAgICBkZXNjcmlwdGlvbjogYEF1dG8tZ2VuZXJhdGVkIGZyb206ICR7cGFyZW50QmlsbC50aXRsZX1gLFxuICAgICAgICAgIGNhdGVnb3J5OiBwYXJlbnRCaWxsLmNhdGVnb3J5LFxuICAgICAgICAgIHZlbmRvcjogcGFyZW50QmlsbC52ZW5kb3IgfHwgXCJBdXRvLUdlbmVyYXRlZFwiLFxuICAgICAgICAgIHBheW1lbnRUeXBlOiBcInVuaXF1ZVwiLFxuICAgICAgICAgIC8vIEdlbmVyYXRlZCBiaWxscyBhcmUgdW5pcXVlIHBheW1lbnRzXG4gICAgICAgICAgc2NoZWR1bGVQYXltZW50OiBcInVuaXF1ZVwiLFxuICAgICAgICAgIGNvc3RzOiBbcGF5bWVudFBhcnQuYW1vdW50LnRvU3RyaW5nKCldLFxuICAgICAgICAgIHRvdGFsQW1vdW50OiBwYXltZW50UGFydC5hbW91bnQudG9TdHJpbmcoKSxcbiAgICAgICAgICBzdGFydERhdGU6IHBheW1lbnRQYXJ0LmR1ZURhdGUudG9JU09TdHJpbmcoKS5zcGxpdChcIlRcIilbMF0sXG4gICAgICAgICAgZW5kRGF0ZTogbnVsbCxcbiAgICAgICAgICBzdGF0dXM6IFwiZHJhZnRcIixcbiAgICAgICAgICBkb2N1bWVudFBhdGg6IG51bGwsXG4gICAgICAgICAgZG9jdW1lbnROYW1lOiBudWxsLFxuICAgICAgICAgIGlzQWlBbmFseXplZDogZmFsc2UsXG4gICAgICAgICAgYWlBbmFseXNpc0RhdGE6IG51bGwsXG4gICAgICAgICAgbm90ZXM6IGBBdXRvLWdlbmVyYXRlZCBmcm9tOiAke3BhcmVudEJpbGwudGl0bGV9IChCaWxsICMke3BhcmVudEJpbGwuYmlsbE51bWJlcn0pLiBHZW5lcmF0ZWQgYXMgcGFydCAke3BhcnRJbmRleCArIDF9LyR7cGF5bWVudFBhcnRzLmxlbmd0aH0gZm9yICR7b2NjdXJyZW5jZURhdGUudG9Mb2NhbGVEYXRlU3RyaW5nKCl9LmAsXG4gICAgICAgICAgYXV0b0dlbmVyYXRlZDogdHJ1ZSxcbiAgICAgICAgICByZWZlcmVuY2U6IHBhcmVudEJpbGwuaWQsXG4gICAgICAgICAgY3JlYXRlZEJ5OiBwYXJlbnRCaWxsLmNyZWF0ZWRCeSxcbiAgICAgICAgICBjcmVhdGVkQXQ6IC8qIEBfX1BVUkVfXyAqLyBuZXcgRGF0ZSgpLFxuICAgICAgICAgIHVwZGF0ZWRBdDogLyogQF9fUFVSRV9fICovIG5ldyBEYXRlKClcbiAgICAgICAgfTtcbiAgICAgICAgZ2VuZXJhdGVkQmlsbHMucHVzaChnZW5lcmF0ZWRCaWxsKTtcbiAgICAgICAgYmlsbHNDcmVhdGVkKys7XG4gICAgICAgIGlmIChnZW5lcmF0ZWRCaWxscy5sZW5ndGggPj0gMTAwKSB7XG4gICAgICAgICAgYXdhaXQgdGhpcy5pbnNlcnRCaWxsc0JhdGNoKGdlbmVyYXRlZEJpbGxzKTtcbiAgICAgICAgICBnZW5lcmF0ZWRCaWxscy5sZW5ndGggPSAwO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIGlmIChnZW5lcmF0ZWRCaWxscy5sZW5ndGggPiAwKSB7XG4gICAgICBhd2FpdCB0aGlzLmluc2VydEJpbGxzQmF0Y2goZ2VuZXJhdGVkQmlsbHMpO1xuICAgIH1cbiAgICByZXR1cm4ge1xuICAgICAgYmlsbHNDcmVhdGVkLFxuICAgICAgZ2VuZXJhdGVkVW50aWw6IGVuZERhdGUudG9JU09TdHJpbmcoKS5zcGxpdChcIlRcIilbMF1cbiAgICB9O1xuICB9XG4gIC8qKlxuICAgKiBIYW5kbGUgbXVsdGlwbGUgcGF5bWVudCBsb2dpYyBmb3IgYmlsbHMuXG4gICAqIEV4YW1wbGVzOlxuICAgKiAtIDYwJSBub3csIDQwJSBpbiAyIG1vbnRoc1xuICAgKiAtIDEyIG1vbnRobHkgcGF5bWVudHMgb2YgZXF1YWwgYW1vdW50c1xuICAgKiAtIFF1YXJ0ZXJseSBwYXltZW50cyB3aXRoIHZhcnlpbmcgYW1vdW50cy5cbiAgICogQHBhcmFtIHBhcmVudEJpbGxcbiAgICogQHBhcmFtIG9jY3VycmVuY2VEYXRlXG4gICAqL1xuICBjYWxjdWxhdGVQYXltZW50UGFydHMocGFyZW50QmlsbCwgb2NjdXJyZW5jZURhdGUpIHtcbiAgICBjb25zdCBjb3N0cyA9IHBhcmVudEJpbGwuY29zdHMubWFwKChjb3N0KSA9PiBwYXJzZUZsb2F0KGNvc3QpKTtcbiAgICBjb25zdCBwYXltZW50UGFydHMgPSBbXTtcbiAgICBpZiAoY29zdHMubGVuZ3RoID09PSAxKSB7XG4gICAgICBwYXltZW50UGFydHMucHVzaCh7XG4gICAgICAgIGFtb3VudDogY29zdHNbMF0sXG4gICAgICAgIGR1ZURhdGU6IG5ldyBEYXRlKG9jY3VycmVuY2VEYXRlKSxcbiAgICAgICAgcGFydE51bWJlcjogMVxuICAgICAgfSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGNvc3RzLmZvckVhY2goKGFtb3VudCwgX2luZGV4KSA9PiB7XG4gICAgICAgIGNvbnN0IGR1ZURhdGUgPSBuZXcgRGF0ZShvY2N1cnJlbmNlRGF0ZSk7XG4gICAgICAgIGR1ZURhdGUuc2V0TW9udGgoZHVlRGF0ZS5nZXRNb250aCgpICsgX2luZGV4KTtcbiAgICAgICAgcGF5bWVudFBhcnRzLnB1c2goe1xuICAgICAgICAgIGFtb3VudCxcbiAgICAgICAgICBkdWVEYXRlLFxuICAgICAgICAgIHBhcnROdW1iZXI6IF9pbmRleCArIDFcbiAgICAgICAgfSk7XG4gICAgICB9KTtcbiAgICB9XG4gICAgcmV0dXJuIHBheW1lbnRQYXJ0cztcbiAgfVxuICAvKipcbiAgICogRGV0ZWN0IHNjaGVkdWxlIHR5cGUgZnJvbSBwYXJlbnQgYmlsbCBjaGFyYWN0ZXJpc3RpY3MuXG4gICAqIEBwYXJhbSBwYXJlbnRCaWxsXG4gICAqL1xuICBkZXRlY3RTY2hlZHVsZVR5cGUocGFyZW50QmlsbCkge1xuICAgIGNvbnN0IGNvc3RzID0gcGFyZW50QmlsbC5jb3N0cyB8fCBbXTtcbiAgICBpZiAoY29zdHMubGVuZ3RoID09PSAxMikge1xuICAgICAgcmV0dXJuIFwibW9udGhseVwiO1xuICAgIH0gZWxzZSBpZiAoY29zdHMubGVuZ3RoID09PSA0KSB7XG4gICAgICByZXR1cm4gXCJxdWFydGVybHlcIjtcbiAgICB9IGVsc2UgaWYgKGNvc3RzLmxlbmd0aCA9PT0gMikge1xuICAgICAgcmV0dXJuIFwieWVhcmx5XCI7XG4gICAgfSBlbHNlIGlmIChjb3N0cy5sZW5ndGggPT09IDEpIHtcbiAgICAgIGNvbnN0IHRpdGxlID0gcGFyZW50QmlsbC50aXRsZS50b0xvd2VyQ2FzZSgpO1xuICAgICAgaWYgKHRpdGxlLmluY2x1ZGVzKFwiYW5udWFsXCIpIHx8IHRpdGxlLmluY2x1ZGVzKFwieWVhcmx5XCIpKSB7XG4gICAgICAgIHJldHVybiBcInllYXJseVwiO1xuICAgICAgfSBlbHNlIGlmICh0aXRsZS5pbmNsdWRlcyhcInF1YXJ0ZXJseVwiKSkge1xuICAgICAgICByZXR1cm4gXCJxdWFydGVybHlcIjtcbiAgICAgIH0gZWxzZSBpZiAodGl0bGUuaW5jbHVkZXMoXCJtb250aGx5XCIpKSB7XG4gICAgICAgIHJldHVybiBcIm1vbnRobHlcIjtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiBcInllYXJseVwiO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gXCJ5ZWFybHlcIjtcbiAgfVxuICAvKipcbiAgICogQ2FsY3VsYXRlIGFsbCBvY2N1cnJlbmNlIGRhdGVzIGJhc2VkIG9uIHNjaGVkdWxlIHR5cGUuXG4gICAqIEBwYXJhbSBzdGFydERhdGVcbiAgICogQHBhcmFtIGVuZERhdGVcbiAgICogQHBhcmFtIHNjaGVkdWxlVHlwZVxuICAgKi9cbiAgY2FsY3VsYXRlT2NjdXJyZW5jZXMoc3RhcnREYXRlLCBlbmREYXRlLCBzY2hlZHVsZVR5cGUpIHtcbiAgICBjb25zdCBvY2N1cnJlbmNlcyA9IFtdO1xuICAgIGNvbnN0IGN1cnJlbnREYXRlID0gbmV3IERhdGUoc3RhcnREYXRlKTtcbiAgICB3aGlsZSAoY3VycmVudERhdGUgPD0gZW5kRGF0ZSkge1xuICAgICAgb2NjdXJyZW5jZXMucHVzaChuZXcgRGF0ZShjdXJyZW50RGF0ZSkpO1xuICAgICAgc3dpdGNoIChzY2hlZHVsZVR5cGUpIHtcbiAgICAgICAgY2FzZSBcIndlZWtseVwiOlxuICAgICAgICAgIGN1cnJlbnREYXRlLnNldERhdGUoY3VycmVudERhdGUuZ2V0RGF0ZSgpICsgNyk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgXCJtb250aGx5XCI6XG4gICAgICAgICAgY3VycmVudERhdGUuc2V0TW9udGgoY3VycmVudERhdGUuZ2V0TW9udGgoKSArIDEpO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIFwicXVhcnRlcmx5XCI6XG4gICAgICAgICAgY3VycmVudERhdGUuc2V0TW9udGgoY3VycmVudERhdGUuZ2V0TW9udGgoKSArIDMpO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIFwieWVhcmx5XCI6XG4gICAgICAgICAgY3VycmVudERhdGUuc2V0RnVsbFllYXIoY3VycmVudERhdGUuZ2V0RnVsbFllYXIoKSArIDEpO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgVW5rbm93biBzY2hlZHVsZSB0eXBlOiAke3NjaGVkdWxlVHlwZX1gKTtcbiAgICAgIH1cbiAgICAgIGlmIChvY2N1cnJlbmNlcy5sZW5ndGggPiAxZTQpIHtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBvY2N1cnJlbmNlcztcbiAgfVxuICAvKipcbiAgICogSGFuZGxlIGN1c3RvbSByZWN1cnJpbmcgZGF0ZXMgKHllYXJseSByZXBldGl0aW9uKS5cbiAgICogQHBhcmFtIHN0YXJ0RGF0ZVxuICAgKiBAcGFyYW0gZW5kRGF0ZVxuICAgKiBAcGFyYW0gY3VzdG9tRGF0ZXNcbiAgICovXG4gIGNhbGN1bGF0ZUN1c3RvbU9jY3VycmVuY2VzKHN0YXJ0RGF0ZSwgZW5kRGF0ZSwgY3VzdG9tRGF0ZXMpIHtcbiAgICBjb25zdCBvY2N1cnJlbmNlcyA9IFtdO1xuICAgIGNvbnN0IHN0YXJ0WWVhciA9IHN0YXJ0RGF0ZS5nZXRGdWxsWWVhcigpO1xuICAgIGNvbnN0IGVuZFllYXIgPSBlbmREYXRlLmdldEZ1bGxZZWFyKCk7XG4gICAgZm9yIChsZXQgeWVhciA9IHN0YXJ0WWVhcjsgeWVhciA8PSBlbmRZZWFyOyB5ZWFyKyspIHtcbiAgICAgIGZvciAoY29uc3QgZGF0ZVN0ciBvZiBjdXN0b21EYXRlcykge1xuICAgICAgICBjb25zdCBjdXN0b21EYXRlID0gbmV3IERhdGUoZGF0ZVN0cik7XG4gICAgICAgIGN1c3RvbURhdGUuc2V0RnVsbFllYXIoeWVhcik7XG4gICAgICAgIGlmIChjdXN0b21EYXRlID49IHN0YXJ0RGF0ZSAmJiBjdXN0b21EYXRlIDw9IGVuZERhdGUpIHtcbiAgICAgICAgICBvY2N1cnJlbmNlcy5wdXNoKG5ldyBEYXRlKGN1c3RvbURhdGUpKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gb2NjdXJyZW5jZXMuc29ydCgoYSwgYikgPT4gYS5nZXRUaW1lKCkgLSBiLmdldFRpbWUoKSk7XG4gIH1cbiAgLyoqXG4gICAqIEdlbmVyYXRlIHVuaXF1ZSBiaWxsIG51bWJlciBmb3IgYXV0by1nZW5lcmF0ZWQgYmlsbHMuXG4gICAqIEBwYXJhbSBwYXJlbnRCaWxsXG4gICAqIEBwYXJhbSBvY2N1cnJlbmNlRGF0ZVxuICAgKiBAcGFyYW0gcGFydEluZGV4XG4gICAqL1xuICBnZW5lcmF0ZUJpbGxOdW1iZXIocGFyZW50QmlsbCwgb2NjdXJyZW5jZURhdGUsIHBhcnRJbmRleCkge1xuICAgIGNvbnN0IGRhdGVTdHIgPSBvY2N1cnJlbmNlRGF0ZS50b0lTT1N0cmluZygpLnNsaWNlKDAsIDcpO1xuICAgIGNvbnN0IHBhcnRTdWZmaXggPSBwYXJ0SW5kZXggPiAwID8gYC1QJHtwYXJ0SW5kZXggKyAxfWAgOiBcIlwiO1xuICAgIHJldHVybiBgJHtwYXJlbnRCaWxsLmJpbGxOdW1iZXJ9LSR7ZGF0ZVN0cn0ke3BhcnRTdWZmaXh9YDtcbiAgfVxuICAvKipcbiAgICogR2VuZXJhdGUgZGVzY3JpcHRpdmUgdGl0bGUgZm9yIGF1dG8tZ2VuZXJhdGVkIGJpbGxzLlxuICAgKiBAcGFyYW0gcGFyZW50QmlsbFxuICAgKiBAcGFyYW0gb2NjdXJyZW5jZURhdGVcbiAgICogQHBhcmFtIHBhcnRJbmRleFxuICAgKiBAcGFyYW0gdG90YWxQYXJ0c1xuICAgKi9cbiAgZ2VuZXJhdGVCaWxsVGl0bGUocGFyZW50QmlsbCwgb2NjdXJyZW5jZURhdGUsIHBhcnRJbmRleCwgdG90YWxQYXJ0cykge1xuICAgIGNvbnN0IG1vbnRoWWVhciA9IG9jY3VycmVuY2VEYXRlLnRvTG9jYWxlRGF0ZVN0cmluZyhcImVuLVVTXCIsIHtcbiAgICAgIG1vbnRoOiBcImxvbmdcIixcbiAgICAgIHllYXI6IFwibnVtZXJpY1wiXG4gICAgfSk7XG4gICAgaWYgKHRvdGFsUGFydHMgPiAxKSB7XG4gICAgICByZXR1cm4gYCR7cGFyZW50QmlsbC50aXRsZX0gJHttb250aFllYXJ9IChBdXRvLUdlbmVyYXRlZClgO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gYCR7cGFyZW50QmlsbC50aXRsZX0gJHttb250aFllYXJ9IChBdXRvLUdlbmVyYXRlZClgO1xuICAgIH1cbiAgfVxuICAvKipcbiAgICogQ2xlYW4gdXAgZXhpc3RpbmcgYXV0by1nZW5lcmF0ZWQgYmlsbHMgZm9yIGEgcGFyZW50IGJpbGwuXG4gICAqIEBwYXJhbSBwYXJlbnRCaWxsSWRcbiAgICovXG4gIGFzeW5jIGNsZWFudXBFeGlzdGluZ0dlbmVyYXRlZEJpbGxzKHBhcmVudEJpbGxJZCkge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBkYi5kZWxldGUoYmlsbHMpLndoZXJlKFxuICAgICAgICBhbmQ3KFxuICAgICAgICAgIGVxNyhiaWxscy5yZWZlcmVuY2UsIHBhcmVudEJpbGxJZCksXG4gICAgICAgICAgZXE3KGJpbGxzLmF1dG9HZW5lcmF0ZWQsIHRydWUpLFxuICAgICAgICAgIG9yNChlcTcoYmlsbHMuc3RhdHVzLCBcImRyYWZ0XCIpLCBlcTcoYmlsbHMuc3RhdHVzLCBcInNlbnRcIikpXG4gICAgICAgIClcbiAgICAgICk7XG4gICAgICBjb25zb2xlLmxvZyhgXFx1ezFGNUQxfVxcdUZFMEYgQ2xlYW5lZCB1cCBhdXRvLWdlbmVyYXRlZCBiaWxscyBmb3IgcGFyZW50IGJpbGwgJHtwYXJlbnRCaWxsSWR9YCk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoXCJcXHUyNzRDIEVycm9yIGNsZWFuaW5nIHVwIGdlbmVyYXRlZCBiaWxsczpcIiwgZXJyb3IpO1xuICAgICAgdGhyb3cgZXJyb3I7XG4gICAgfVxuICB9XG4gIC8qKlxuICAgKiBCYXRjaCBpbnNlcnQgYmlsbHMgZm9yIHBlcmZvcm1hbmNlLlxuICAgKiBAcGFyYW0gYmlsbEJhdGNoXG4gICAqL1xuICBhc3luYyBpbnNlcnRCaWxsc0JhdGNoKGJpbGxCYXRjaCkge1xuICAgIHRyeSB7XG4gICAgICBhd2FpdCBkYi5pbnNlcnQoYmlsbHMpLnZhbHVlcyhiaWxsQmF0Y2gpO1xuICAgICAgY29uc29sZS5sb2coYFxcdTI3MDUgQmF0Y2ggaW5zZXJ0ZWQgJHtiaWxsQmF0Y2gubGVuZ3RofSBiaWxsc2ApO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKFwiXFx1Mjc0QyBFcnJvciBpbnNlcnRpbmcgYmlsbCBiYXRjaDpcIiwgZXJyb3IpO1xuICAgICAgdGhyb3cgZXJyb3I7XG4gICAgfVxuICB9XG4gIC8qKlxuICAgKiBVcGRhdGUgYWxsIGZ1dHVyZSBhdXRvLWdlbmVyYXRlZCBiaWxscyB3aGVuIHRoZSBwYXJlbnQgYmlsbCBpcyBtb2RpZmllZC5cbiAgICogQHBhcmFtIHBhcmVudEJpbGxJZFxuICAgKiBAcGFyYW0gdXBkYXRlc1xuICAgKi9cbiAgYXN5bmMgdXBkYXRlR2VuZXJhdGVkQmlsbHNGcm9tUGFyZW50KHBhcmVudEJpbGxJZCwgdXBkYXRlcykge1xuICAgIGNvbnN0IGdlbmVyYXRlZEJpbGxzID0gYXdhaXQgZGIuc2VsZWN0KCkuZnJvbShiaWxscykud2hlcmUoYW5kNyhlcTcoYmlsbHMucmVmZXJlbmNlLCBwYXJlbnRCaWxsSWQpLCBlcTcoYmlsbHMuYXV0b0dlbmVyYXRlZCwgdHJ1ZSkpKTtcbiAgICBsZXQgYmlsbHNVcGRhdGVkID0gMDtcbiAgICBmb3IgKGNvbnN0IGdlbmVyYXRlZEJpbGwgb2YgZ2VuZXJhdGVkQmlsbHMpIHtcbiAgICAgIGNvbnN0IHVwZGF0ZWRGaWVsZHMgPSB7fTtcbiAgICAgIGlmICh1cGRhdGVzLnRpdGxlKSB7XG4gICAgICAgIGNvbnN0IHRpdGxlUGFydHMgPSBnZW5lcmF0ZWRCaWxsLnRpdGxlLnNwbGl0KFwiIC0gXCIpO1xuICAgICAgICBpZiAodGl0bGVQYXJ0cy5sZW5ndGggPj0gMikge1xuICAgICAgICAgIHVwZGF0ZWRGaWVsZHMudGl0bGUgPSBgJHt1cGRhdGVzLnRpdGxlfSAtICR7dGl0bGVQYXJ0cy5zbGljZSgxKS5qb2luKFwiIC0gXCIpfWA7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGlmICh1cGRhdGVzLmNhdGVnb3J5KSB7XG4gICAgICAgIHVwZGF0ZWRGaWVsZHMuY2F0ZWdvcnkgPSB1cGRhdGVzLmNhdGVnb3J5O1xuICAgICAgfVxuICAgICAgaWYgKHVwZGF0ZXMudmVuZG9yKSB7XG4gICAgICAgIHVwZGF0ZWRGaWVsZHMudmVuZG9yID0gdXBkYXRlcy52ZW5kb3I7XG4gICAgICB9XG4gICAgICBpZiAodXBkYXRlcy5ub3Rlcykge1xuICAgICAgICB1cGRhdGVkRmllbGRzLm5vdGVzID0gYEF1dG8tZ2VuZXJhdGVkIGJpbGwgLSAke3VwZGF0ZXMubm90ZXN9YDtcbiAgICAgIH1cbiAgICAgIGlmIChPYmplY3Qua2V5cyh1cGRhdGVkRmllbGRzKS5sZW5ndGggPiAwKSB7XG4gICAgICAgIHVwZGF0ZWRGaWVsZHMudXBkYXRlZEF0ID0gLyogQF9fUFVSRV9fICovIG5ldyBEYXRlKCk7XG4gICAgICAgIGF3YWl0IGRiLnVwZGF0ZShiaWxscykuc2V0KHVwZGF0ZWRGaWVsZHMpLndoZXJlKGVxNyhiaWxscy5pZCwgZ2VuZXJhdGVkQmlsbC5pZCkpO1xuICAgICAgICBiaWxsc1VwZGF0ZWQrKztcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHsgYmlsbHNVcGRhdGVkIH07XG4gIH1cbiAgLyoqXG4gICAqIERlbGV0ZSBmdXR1cmUgYXV0by1nZW5lcmF0ZWQgYmlsbHMgd2l0aCBjYXNjYWRlIG9wdGlvbnMuXG4gICAqIEBwYXJhbSBwYXJlbnRCaWxsSWRcbiAgICogQHBhcmFtIGRlbGV0ZUFsbEZ1dHVyZVxuICAgKi9cbiAgYXN5bmMgZGVsZXRlR2VuZXJhdGVkQmlsbHMocGFyZW50QmlsbElkLCBkZWxldGVBbGxGdXR1cmUgPSBmYWxzZSkge1xuICAgIGNvbnNvbGUubG9nKFxuICAgICAgYFxcdXsxRjVEMX1cXHVGRTBGIERlbGV0aW5nIGdlbmVyYXRlZCBiaWxscyBmb3IgcGFyZW50ICR7cGFyZW50QmlsbElkfSwgZGVsZXRlQWxsRnV0dXJlOiAke2RlbGV0ZUFsbEZ1dHVyZX1gXG4gICAgKTtcbiAgICBsZXQgd2hlcmVDb25kaXRpb247XG4gICAgaWYgKGRlbGV0ZUFsbEZ1dHVyZSkge1xuICAgICAgd2hlcmVDb25kaXRpb24gPSBhbmQ3KFxuICAgICAgICBlcTcoYmlsbHMucmVmZXJlbmNlLCBwYXJlbnRCaWxsSWQpLFxuICAgICAgICBlcTcoYmlsbHMuYXV0b0dlbmVyYXRlZCwgdHJ1ZSksXG4gICAgICAgIGd0ZTIoYmlsbHMuc3RhcnREYXRlLCAoLyogQF9fUFVSRV9fICovIG5ldyBEYXRlKCkpLnRvSVNPU3RyaW5nKCkuc3BsaXQoXCJUXCIpWzBdKVxuICAgICAgKTtcbiAgICB9IGVsc2Uge1xuICAgICAgd2hlcmVDb25kaXRpb24gPSBhbmQ3KFxuICAgICAgICBlcTcoYmlsbHMucmVmZXJlbmNlLCBwYXJlbnRCaWxsSWQpLFxuICAgICAgICBlcTcoYmlsbHMuYXV0b0dlbmVyYXRlZCwgdHJ1ZSksXG4gICAgICAgIG9yNChlcTcoYmlsbHMuc3RhdHVzLCBcImRyYWZ0XCIpLCBlcTcoYmlsbHMuc3RhdHVzLCBcInNlbnRcIikpXG4gICAgICApO1xuICAgIH1cbiAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBkYi5kZWxldGUoYmlsbHMpLndoZXJlKHdoZXJlQ29uZGl0aW9uKTtcbiAgICBjb25zdCBiaWxsc0RlbGV0ZWQgPSByZXN1bHQucm93Q291bnQgfHwgMDtcbiAgICByZXR1cm4geyBiaWxsc0RlbGV0ZWQgfTtcbiAgfVxuICAvKipcbiAgICogR2V0IHN0YXRpc3RpY3MgYWJvdXQgZ2VuZXJhdGVkIGJpbGxzIGZvciBhIHBhcmVudCBiaWxsLlxuICAgKiBAcGFyYW0gcGFyZW50QmlsbElkXG4gICAqL1xuICBhc3luYyBnZXRHZW5lcmF0ZWRCaWxsc1N0YXRzKHBhcmVudEJpbGxJZCkge1xuICAgIGNvbnN0IGdlbmVyYXRlZEJpbGxzID0gYXdhaXQgZGIuc2VsZWN0KCkuZnJvbShiaWxscykud2hlcmUoYW5kNyhlcTcoYmlsbHMucmVmZXJlbmNlLCBwYXJlbnRCaWxsSWQpLCBlcTcoYmlsbHMuYXV0b0dlbmVyYXRlZCwgdHJ1ZSkpKTtcbiAgICBjb25zdCB0b2RheSA9ICgvKiBAX19QVVJFX18gKi8gbmV3IERhdGUoKSkudG9JU09TdHJpbmcoKS5zcGxpdChcIlRcIilbMF07XG4gICAgY29uc3Qgc3RhdHMgPSB7XG4gICAgICB0b3RhbEdlbmVyYXRlZDogZ2VuZXJhdGVkQmlsbHMubGVuZ3RoLFxuICAgICAgcGFpZEJpbGxzOiAwLFxuICAgICAgcGVuZGluZ0JpbGxzOiAwLFxuICAgICAgZnV0dXJlQmlsbHM6IDAsXG4gICAgICB0b3RhbEFtb3VudDogMCxcbiAgICAgIHBhaWRBbW91bnQ6IDBcbiAgICB9O1xuICAgIGZvciAoY29uc3QgYmlsbCBvZiBnZW5lcmF0ZWRCaWxscykge1xuICAgICAgY29uc3QgYmlsbEFtb3VudCA9IHBhcnNlRmxvYXQoYmlsbC50b3RhbEFtb3VudCk7XG4gICAgICBzdGF0cy50b3RhbEFtb3VudCArPSBiaWxsQW1vdW50O1xuICAgICAgaWYgKGJpbGwuc3RhdHVzID09PSBcInBhaWRcIikge1xuICAgICAgICBzdGF0cy5wYWlkQmlsbHMrKztcbiAgICAgICAgc3RhdHMucGFpZEFtb3VudCArPSBiaWxsQW1vdW50O1xuICAgICAgfSBlbHNlIGlmIChiaWxsLnN0YXJ0RGF0ZSA+IHRvZGF5KSB7XG4gICAgICAgIHN0YXRzLmZ1dHVyZUJpbGxzKys7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBzdGF0cy5wZW5kaW5nQmlsbHMrKztcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHN0YXRzO1xuICB9XG4gIC8qKlxuICAgKiBNYXJrIGEgYmlsbCBhcyBwYWlkIGFuZCB1cGRhdGUgcmVsYXRlZCB0cmFja2luZy5cbiAgICogQHBhcmFtIGJpbGxJZFxuICAgKiBAcGFyYW0gcGF5bWVudERhdGVcbiAgICovXG4gIGFzeW5jIG1hcmtCaWxsQXNQYWlkKGJpbGxJZCwgcGF5bWVudERhdGUpIHtcbiAgICBjb25zdCBwYXltZW50UmVjZWl2ZWREYXRlID0gcGF5bWVudERhdGUgfHwgLyogQF9fUFVSRV9fICovIG5ldyBEYXRlKCk7XG4gICAgYXdhaXQgZGIudXBkYXRlKGJpbGxzKS5zZXQoe1xuICAgICAgc3RhdHVzOiBcInBhaWRcIixcbiAgICAgIG5vdGVzOiBgUGF5bWVudCBjb25maXJtZWQgb24gJHtwYXltZW50UmVjZWl2ZWREYXRlLnRvTG9jYWxlRGF0ZVN0cmluZygpfWAsXG4gICAgICB1cGRhdGVkQXQ6IC8qIEBfX1BVUkVfXyAqLyBuZXcgRGF0ZSgpXG4gICAgfSkud2hlcmUoZXE3KGJpbGxzLmlkLCBiaWxsSWQpKTtcbiAgfVxuICAvKipcbiAgICogR2V0IGEgc3lzdGVtIHVzZXIgZm9yIGF1dG9tYXRlZCBvcGVyYXRpb25zLlxuICAgKi9cbiAgYXN5bmMgZ2V0U3lzdGVtVXNlcigpIHtcbiAgICBjb25zdCBzeXN0ZW1Vc2VycyA9IGF3YWl0IGRiLnNlbGVjdCh7IGlkOiB1c2Vycy5pZCB9KS5mcm9tKHVzZXJzKS53aGVyZShlcTcodXNlcnMucm9sZSwgXCJhZG1pblwiKSkubGltaXQoMSk7XG4gICAgaWYgKHN5c3RlbVVzZXJzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiTm8gYWN0aXZlIHVzZXJzIGZvdW5kIGZvciBzeXN0ZW0gb3BlcmF0aW9uc1wiKTtcbiAgICB9XG4gICAgcmV0dXJuIHN5c3RlbVVzZXJzWzBdO1xuICB9XG59O1xudmFyIGJpbGxHZW5lcmF0aW9uU2VydmljZSA9IG5ldyBCaWxsR2VuZXJhdGlvblNlcnZpY2UoKTtcblxuLy8gc2VydmVyL3NlcnZpY2VzL21vbmV5LWZsb3ctYXV0b21hdGlvbi50c1xudmFyIG1vbmV5Rmxvd0F1dG9tYXRpb25TZXJ2aWNlID0ge1xuICBhc3luYyBnZW5lcmF0ZUZvckJpbGwoYmlsbElkKSB7XG4gICAgcmV0dXJuIDA7XG4gIH0sXG4gIGFzeW5jIGdlbmVyYXRlRm9yUmVzaWRlbmNlKHJlc2lkZW5jZUlkKSB7XG4gICAgcmV0dXJuIDA7XG4gIH0sXG4gIGFzeW5jIGdldE1vbmV5Rmxvd1N0YXRpc3RpY3MoKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIHRvdGFsRW50cmllczogMCxcbiAgICAgIGJpbGxFbnRyaWVzOiAwLFxuICAgICAgcmVzaWRlbmNlRW50cmllczogMCxcbiAgICAgIGxhc3RHZW5lcmF0ZWRBdDogbnVsbFxuICAgIH07XG4gIH1cbn07XG5cbi8vIHNlcnZlci9zZXJ2aWNlcy9tb250aGx5LWJ1ZGdldC1zZXJ2aWNlLnRzXG5pbml0X2RiKCk7XG5pbml0X3NjaGVtYSgpO1xuaW1wb3J0IHsgZXEgYXMgZXE4LCBhbmQgYXMgYW5kOCwgZ3RlIGFzIGd0ZTMsIGx0ZSBhcyBsdGUyLCBzcWwgYXMgc3FsMTcgfSBmcm9tIFwiZHJpenpsZS1vcm1cIjtcbnZhciB7IG1vbnRobHlCdWRnZXRzOiBtb250aGx5QnVkZ2V0czIsIG1vbmV5RmxvdywgYnVpbGRpbmdzOiBidWlsZGluZ3MyLCB1c2VyczogdXNlcnMzIH0gPSBzY2hlbWFfZXhwb3J0cztcbnZhciBNb250aGx5QnVkZ2V0U2VydmljZSA9IGNsYXNzIHtcbiAgY29uc3RydWN0b3IoKSB7XG4gICAgdGhpcy5ZRUFSU19UT19QUk9KRUNUID0gMztcbiAgfVxuICAvKipcbiAgICogUG9wdWxhdGUgbW9udGhseSBidWRnZXQgZW50cmllcyBmb3IgYWxsIGJ1aWxkaW5ncy5cbiAgICogQ3JlYXRlcyBlbnRyaWVzIGZyb20gY29uc3RydWN0aW9uIGRhdGUgdG8gMyB5ZWFycyBpbiB0aGUgZnV0dXJlLlxuICAgKi9cbiAgYXN5bmMgcG9wdWxhdGVBbGxNb250aGx5QnVkZ2V0cygpIHtcbiAgICBsZXQgYnVkZ2V0c0NyZWF0ZWQgPSAwO1xuICAgIGxldCBidWlsZGluZ3NQcm9jZXNzZWQgPSAwO1xuICAgIHRyeSB7XG4gICAgICBjb25zdCBhY3RpdmVCdWlsZGluZ3MgPSBhd2FpdCBkYi5zZWxlY3QoKS5mcm9tKGJ1aWxkaW5nczIpLndoZXJlKGVxOChidWlsZGluZ3MyLmlzQWN0aXZlLCB0cnVlKSk7XG4gICAgICBmb3IgKGNvbnN0IGJ1aWxkaW5nIG9mIGFjdGl2ZUJ1aWxkaW5ncykge1xuICAgICAgICB0cnkge1xuICAgICAgICAgIGNvbnN0IGJ1aWxkaW5nQnVkZ2V0cyA9IGF3YWl0IHRoaXMucG9wdWxhdGVCdWRnZXRzRm9yQnVpbGRpbmcoYnVpbGRpbmcpO1xuICAgICAgICAgIGJ1ZGdldHNDcmVhdGVkICs9IGJ1aWxkaW5nQnVkZ2V0cztcbiAgICAgICAgICBidWlsZGluZ3NQcm9jZXNzZWQrKztcbiAgICAgICAgICBjb25zb2xlLmxvZyhcbiAgICAgICAgICAgIGBcXHUyNzA1IENyZWF0ZWQgJHtidWlsZGluZ0J1ZGdldHN9IGJ1ZGdldCBlbnRyaWVzIGZvciBidWlsZGluZzogJHtidWlsZGluZy5uYW1lfWBcbiAgICAgICAgICApO1xuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgIGNvbnNvbGUuZXJyb3IoYFxcdTI3NEMgRXJyb3IgcHJvY2Vzc2luZyBidWlsZGluZyAke2J1aWxkaW5nLm5hbWV9OmAsIGVycm9yKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgY29uc29sZS5sb2coYFxcdXsxRjRDQX0gTW9udGhseSBidWRnZXQgcG9wdWxhdGlvbiBjb21wbGV0ZWQ6XG4gICAgICAgIC0gQnVpbGRpbmdzIHByb2Nlc3NlZDogJHtidWlsZGluZ3NQcm9jZXNzZWR9XG4gICAgICAgIC0gQnVkZ2V0IGVudHJpZXMgY3JlYXRlZDogJHtidWRnZXRzQ3JlYXRlZH1gKTtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIGJ1ZGdldHNDcmVhdGVkLFxuICAgICAgICBidWlsZGluZ3NQcm9jZXNzZWRcbiAgICAgIH07XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoXCJcXHUyNzRDIEVycm9yIHBvcHVsYXRpbmcgbW9udGhseSBidWRnZXRzOlwiLCBlcnJvcik7XG4gICAgICB0aHJvdyBlcnJvcjtcbiAgICB9XG4gIH1cbiAgLyoqXG4gICAqIFBvcHVsYXRlIG1vbnRobHkgYnVkZ2V0IGVudHJpZXMgZm9yIGEgc3BlY2lmaWMgYnVpbGRpbmcuXG4gICAqIEBwYXJhbSBidWlsZGluZ1xuICAgKi9cbiAgYXN5bmMgcG9wdWxhdGVCdWRnZXRzRm9yQnVpbGRpbmcoYnVpbGRpbmcpIHtcbiAgICBjb25zdCBjb25zdHJ1Y3Rpb25EYXRlID0gLyogQF9fUFVSRV9fICovIG5ldyBEYXRlKCk7XG4gICAgaWYgKGJ1aWxkaW5nLnllYXJCdWlsdCkge1xuICAgICAgY29uc3RydWN0aW9uRGF0ZS5zZXRGdWxsWWVhcihidWlsZGluZy55ZWFyQnVpbHQsIDAsIDEpO1xuICAgIH0gZWxzZSB7XG4gICAgICBjb25zdHJ1Y3Rpb25EYXRlLnNldEZ1bGxZZWFyKGNvbnN0cnVjdGlvbkRhdGUuZ2V0RnVsbFllYXIoKSwgMCwgMSk7XG4gICAgfVxuICAgIGNvbnN0IGVuZERhdGUgPSAvKiBAX19QVVJFX18gKi8gbmV3IERhdGUoKTtcbiAgICBlbmREYXRlLnNldEZ1bGxZZWFyKGVuZERhdGUuZ2V0RnVsbFllYXIoKSArIHRoaXMuWUVBUlNfVE9fUFJPSkVDVCwgMTEsIDMxKTtcbiAgICBjb25zb2xlLmxvZyhcbiAgICAgIGBcXHV7MUY0QzV9IFByb2Nlc3NpbmcgYnVpbGRpbmcgJHtidWlsZGluZy5uYW1lfSBmcm9tICR7Y29uc3RydWN0aW9uRGF0ZS50b0lTT1N0cmluZygpLnNsaWNlKDAsIDEwKX0gdG8gJHtlbmREYXRlLnRvSVNPU3RyaW5nKCkuc2xpY2UoMCwgMTApfWBcbiAgICApO1xuICAgIGNvbnN0IHsgaW5jb21lQ2F0ZWdvcmllcywgZXhwZW5zZUNhdGVnb3JpZXMgfSA9IGF3YWl0IHRoaXMuZ2V0Q2F0ZWdvcmllc0ZvckJ1aWxkaW5nKFxuICAgICAgYnVpbGRpbmcuaWRcbiAgICApO1xuICAgIGNvbnNvbGUubG9nKFxuICAgICAgYFxcdXsxRjRDQX0gRm91bmQgJHtpbmNvbWVDYXRlZ29yaWVzLmxlbmd0aH0gaW5jb21lIGNhdGVnb3JpZXMgYW5kICR7ZXhwZW5zZUNhdGVnb3JpZXMubGVuZ3RofSBleHBlbnNlIGNhdGVnb3JpZXNgXG4gICAgKTtcbiAgICBhd2FpdCB0aGlzLmNsZWFudXBFeGlzdGluZ0J1ZGdldHMoYnVpbGRpbmcuaWQpO1xuICAgIGNvbnN0IGJ1ZGdldEVudHJpZXMgPSBbXTtcbiAgICBjb25zdCBzeXN0ZW1Vc2VyID0gYXdhaXQgdGhpcy5nZXRTeXN0ZW1Vc2VyKCk7XG4gICAgY29uc3QgY3VycmVudERhdGUgPSBuZXcgRGF0ZShjb25zdHJ1Y3Rpb25EYXRlKTtcbiAgICB3aGlsZSAoY3VycmVudERhdGUgPD0gZW5kRGF0ZSkge1xuICAgICAgY29uc3QgeWVhciA9IGN1cnJlbnREYXRlLmdldEZ1bGxZZWFyKCk7XG4gICAgICBjb25zdCBtb250aCA9IGN1cnJlbnREYXRlLmdldE1vbnRoKCkgKyAxO1xuICAgICAgY29uc3QgeyBpbmNvbWVzLCBzcGVuZGluZ3MgfSA9IGF3YWl0IHRoaXMuZ2V0QWdncmVnYXRlZEFtb3VudHNGb3JNb250aChcbiAgICAgICAgYnVpbGRpbmcuaWQsXG4gICAgICAgIHllYXIsXG4gICAgICAgIG1vbnRoLFxuICAgICAgICBpbmNvbWVDYXRlZ29yaWVzLFxuICAgICAgICBleHBlbnNlQ2F0ZWdvcmllc1xuICAgICAgKTtcbiAgICAgIGJ1ZGdldEVudHJpZXMucHVzaCh7XG4gICAgICAgIGJ1aWxkaW5nSWQ6IGJ1aWxkaW5nLmlkLFxuICAgICAgICB5ZWFyLFxuICAgICAgICBtb250aCxcbiAgICAgICAgaW5jb21lVHlwZXM6IGluY29tZUNhdGVnb3JpZXMsXG4gICAgICAgIGluY29tZXMsXG4gICAgICAgIC8vIEtlZXAgYXMgbnVtYmVyIGFycmF5XG4gICAgICAgIHNwZW5kaW5nVHlwZXM6IGV4cGVuc2VDYXRlZ29yaWVzLFxuICAgICAgICBzcGVuZGluZ3MsXG4gICAgICAgIC8vIEtlZXAgYXMgbnVtYmVyIGFycmF5XG4gICAgICAgIGFwcHJvdmVkOiBmYWxzZSxcbiAgICAgICAgYXBwcm92ZWRCeTogdm9pZCAwLFxuICAgICAgICBvcmlnaW5hbEJ1ZGdldElkOiB2b2lkIDBcbiAgICAgIH0pO1xuICAgICAgY3VycmVudERhdGUuc2V0TW9udGgoY3VycmVudERhdGUuZ2V0TW9udGgoKSArIDEpO1xuICAgICAgaWYgKGJ1ZGdldEVudHJpZXMubGVuZ3RoID4gNWUzKSB7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgIH1cbiAgICBpZiAoYnVkZ2V0RW50cmllcy5sZW5ndGggPiAwKSB7XG4gICAgICBhd2FpdCB0aGlzLmluc2VydEJ1ZGdldEVudHJpZXNJbkJhdGNoZXMoYnVkZ2V0RW50cmllcyk7XG4gICAgfVxuICAgIHJldHVybiBidWRnZXRFbnRyaWVzLmxlbmd0aDtcbiAgfVxuICAvKipcbiAgICogR2V0IGRpc3RpbmN0IGluY29tZSBhbmQgZXhwZW5zZSBjYXRlZ29yaWVzIGZyb20gbW9uZXlfZmxvdyBmb3IgYSBzcGVjaWZpYyBidWlsZGluZy5cbiAgICogQHBhcmFtIGJ1aWxkaW5nSWRcbiAgICovXG4gIGFzeW5jIGdldENhdGVnb3JpZXNGb3JCdWlsZGluZyhidWlsZGluZ0lkKSB7XG4gICAgY29uc3QgaW5jb21lUmVzdWx0ID0gYXdhaXQgZGIuc2VsZWN0RGlzdGluY3QoeyBjYXRlZ29yeTogbW9uZXlGbG93LmNhdGVnb3J5IH0pLmZyb20obW9uZXlGbG93KS53aGVyZShhbmQ4KGVxOChtb25leUZsb3cuYnVpbGRpbmdJZCwgYnVpbGRpbmdJZCksIGVxOChtb25leUZsb3cudHlwZSwgXCJpbmNvbWVcIikpKTtcbiAgICBjb25zdCBleHBlbnNlUmVzdWx0ID0gYXdhaXQgZGIuc2VsZWN0RGlzdGluY3QoeyBjYXRlZ29yeTogbW9uZXlGbG93LmNhdGVnb3J5IH0pLmZyb20obW9uZXlGbG93KS53aGVyZShhbmQ4KGVxOChtb25leUZsb3cuYnVpbGRpbmdJZCwgYnVpbGRpbmdJZCksIGVxOChtb25leUZsb3cudHlwZSwgXCJleHBlbnNlXCIpKSk7XG4gICAgY29uc3QgaW5jb21lQ2F0ZWdvcmllcyA9IGluY29tZVJlc3VsdC5tYXAoKHIpID0+IHIuY2F0ZWdvcnkpO1xuICAgIGNvbnN0IGV4cGVuc2VDYXRlZ29yaWVzID0gZXhwZW5zZVJlc3VsdC5tYXAoKHIpID0+IHIuY2F0ZWdvcnkpO1xuICAgIGNvbnN0IGRlZmF1bHRJbmNvbWVDYXRlZ29yaWVzID0gW1xuICAgICAgXCJtb250aGx5X2ZlZXNcIixcbiAgICAgIFwic3BlY2lhbF9hc3Nlc3NtZW50XCIsXG4gICAgICBcImxhdGVfZmVlc1wiLFxuICAgICAgXCJwYXJraW5nX2ZlZXNcIixcbiAgICAgIFwidXRpbGl0eV9yZWltYnVyc2VtZW50XCIsXG4gICAgICBcImluc3VyYW5jZV9jbGFpbVwiLFxuICAgICAgXCJvdGhlcl9pbmNvbWVcIlxuICAgIF07XG4gICAgY29uc3QgZGVmYXVsdEV4cGVuc2VDYXRlZ29yaWVzID0gW1xuICAgICAgXCJiaWxsX3BheW1lbnRcIixcbiAgICAgIFwibWFpbnRlbmFuY2VfZXhwZW5zZVwiLFxuICAgICAgXCJhZG1pbmlzdHJhdGl2ZV9leHBlbnNlXCIsXG4gICAgICBcInByb2Zlc3Npb25hbF9zZXJ2aWNlc1wiLFxuICAgICAgXCJvdGhlcl9leHBlbnNlXCJcbiAgICBdO1xuICAgIHJldHVybiB7XG4gICAgICBpbmNvbWVDYXRlZ29yaWVzOiBpbmNvbWVDYXRlZ29yaWVzLmxlbmd0aCA+IDAgPyBpbmNvbWVDYXRlZ29yaWVzIDogZGVmYXVsdEluY29tZUNhdGVnb3JpZXMsXG4gICAgICBleHBlbnNlQ2F0ZWdvcmllczogZXhwZW5zZUNhdGVnb3JpZXMubGVuZ3RoID4gMCA/IGV4cGVuc2VDYXRlZ29yaWVzIDogZGVmYXVsdEV4cGVuc2VDYXRlZ29yaWVzXG4gICAgfTtcbiAgfVxuICAvKipcbiAgICogR2V0IGFnZ3JlZ2F0ZWQgaW5jb21lIGFuZCBleHBlbnNlIGFtb3VudHMgZm9yIGEgc3BlY2lmaWMgbW9udGgveWVhci5cbiAgICogQHBhcmFtIGJ1aWxkaW5nSWRcbiAgICogQHBhcmFtIHllYXJcbiAgICogQHBhcmFtIG1vbnRoXG4gICAqIEBwYXJhbSBpbmNvbWVDYXRlZ29yaWVzXG4gICAqIEBwYXJhbSBleHBlbnNlQ2F0ZWdvcmllc1xuICAgKi9cbiAgYXN5bmMgZ2V0QWdncmVnYXRlZEFtb3VudHNGb3JNb250aChidWlsZGluZ0lkLCB5ZWFyLCBtb250aCwgaW5jb21lQ2F0ZWdvcmllcywgZXhwZW5zZUNhdGVnb3JpZXMpIHtcbiAgICBjb25zdCBzdGFydERhdGUgPSBuZXcgRGF0ZSh5ZWFyLCBtb250aCAtIDEsIDEpO1xuICAgIGNvbnN0IGVuZERhdGUgPSBuZXcgRGF0ZSh5ZWFyLCBtb250aCwgMCk7XG4gICAgY29uc3Qgc3RhcnREYXRlU3RyID0gc3RhcnREYXRlLnRvSVNPU3RyaW5nKCkuc3BsaXQoXCJUXCIpWzBdO1xuICAgIGNvbnN0IGVuZERhdGVTdHIgPSBlbmREYXRlLnRvSVNPU3RyaW5nKCkuc3BsaXQoXCJUXCIpWzBdO1xuICAgIGNvbnN0IGluY29tZXMgPSBbXTtcbiAgICBmb3IgKGNvbnN0IGNhdGVnb3J5IG9mIGluY29tZUNhdGVnb3JpZXMpIHtcbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGRiLnNlbGVjdCh7XG4gICAgICAgIHRvdGFsOiBzcWwxN2BDT0FMRVNDRShTVU0oQ0FTVCgke21vbmV5Rmxvdy5hbW91bnR9IEFTIERFQ0lNQUwpKSwgMClgXG4gICAgICB9KS5mcm9tKG1vbmV5Rmxvdykud2hlcmUoXG4gICAgICAgIGFuZDgoXG4gICAgICAgICAgZXE4KG1vbmV5Rmxvdy5idWlsZGluZ0lkLCBidWlsZGluZ0lkKSxcbiAgICAgICAgICBlcTgobW9uZXlGbG93LnR5cGUsIFwiaW5jb21lXCIpLFxuICAgICAgICAgIGVxOChtb25leUZsb3cuY2F0ZWdvcnksIGNhdGVnb3J5KSxcbiAgICAgICAgICBndGUzKG1vbmV5Rmxvdy50cmFuc2FjdGlvbkRhdGUsIHN0YXJ0RGF0ZVN0ciksXG4gICAgICAgICAgbHRlMihtb25leUZsb3cudHJhbnNhY3Rpb25EYXRlLCBlbmREYXRlU3RyKVxuICAgICAgICApXG4gICAgICApO1xuICAgICAgaW5jb21lcy5wdXNoKHBhcnNlRmxvYXQocmVzdWx0WzBdPy50b3RhbCB8fCBcIjBcIikpO1xuICAgIH1cbiAgICBjb25zdCBzcGVuZGluZ3MgPSBbXTtcbiAgICBmb3IgKGNvbnN0IGNhdGVnb3J5IG9mIGV4cGVuc2VDYXRlZ29yaWVzKSB7XG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBkYi5zZWxlY3Qoe1xuICAgICAgICB0b3RhbDogc3FsMTdgQ09BTEVTQ0UoU1VNKENBU1QoJHttb25leUZsb3cuYW1vdW50fSBBUyBERUNJTUFMKSksIDApYFxuICAgICAgfSkuZnJvbShtb25leUZsb3cpLndoZXJlKFxuICAgICAgICBhbmQ4KFxuICAgICAgICAgIGVxOChtb25leUZsb3cuYnVpbGRpbmdJZCwgYnVpbGRpbmdJZCksXG4gICAgICAgICAgZXE4KG1vbmV5Rmxvdy50eXBlLCBcImV4cGVuc2VcIiksXG4gICAgICAgICAgZXE4KG1vbmV5Rmxvdy5jYXRlZ29yeSwgY2F0ZWdvcnkpLFxuICAgICAgICAgIGd0ZTMobW9uZXlGbG93LnRyYW5zYWN0aW9uRGF0ZSwgc3RhcnREYXRlU3RyKSxcbiAgICAgICAgICBsdGUyKG1vbmV5Rmxvdy50cmFuc2FjdGlvbkRhdGUsIGVuZERhdGVTdHIpXG4gICAgICAgIClcbiAgICAgICk7XG4gICAgICBzcGVuZGluZ3MucHVzaChwYXJzZUZsb2F0KHJlc3VsdFswXT8udG90YWwgfHwgXCIwXCIpKTtcbiAgICB9XG4gICAgcmV0dXJuIHsgaW5jb21lcywgc3BlbmRpbmdzIH07XG4gIH1cbiAgLyoqXG4gICAqIENsZWFuIHVwIGV4aXN0aW5nIGJ1ZGdldCBlbnRyaWVzIGZvciBhIGJ1aWxkaW5nIHRvIGF2b2lkIGR1cGxpY2F0ZXMuXG4gICAqIEBwYXJhbSBidWlsZGluZ0lkXG4gICAqL1xuICBhc3luYyBjbGVhbnVwRXhpc3RpbmdCdWRnZXRzKGJ1aWxkaW5nSWQpIHtcbiAgICBhd2FpdCBkYi5kZWxldGUobW9udGhseUJ1ZGdldHMyKS53aGVyZShlcTgobW9udGhseUJ1ZGdldHMyLmJ1aWxkaW5nSWQsIGJ1aWxkaW5nSWQpKTtcbiAgfVxuICAvKipcbiAgICogSW5zZXJ0IGJ1ZGdldCBlbnRyaWVzIGluIGJhdGNoZXMgdG8gYXZvaWQgZGF0YWJhc2UgY29uc3RyYWludHMuXG4gICAqIEBwYXJhbSBlbnRyaWVzXG4gICAqIEBwYXJhbSBiYXRjaFNpemVcbiAgICovXG4gIGFzeW5jIGluc2VydEJ1ZGdldEVudHJpZXNJbkJhdGNoZXMoZW50cmllcywgYmF0Y2hTaXplID0gMTAwKSB7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBlbnRyaWVzLmxlbmd0aDsgaSArPSBiYXRjaFNpemUpIHtcbiAgICAgIGNvbnN0IGJhdGNoID0gZW50cmllcy5zbGljZShpLCBpICsgYmF0Y2hTaXplKTtcbiAgICAgIHRyeSB7XG4gICAgICAgIGF3YWl0IGRiLmluc2VydChtb250aGx5QnVkZ2V0czIpLnZhbHVlcyhiYXRjaCk7XG4gICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICBjb25zb2xlLmVycm9yKGBcXHUyNzRDIEVycm9yIGluc2VydGluZyBiYXRjaCBhdCBpbmRleCAke2l9OmAsIGVycm9yKTtcbiAgICAgICAgZm9yIChjb25zdCBlbnRyeSBvZiBiYXRjaCkge1xuICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICBhd2FpdCBkYi5pbnNlcnQobW9udGhseUJ1ZGdldHMyKS52YWx1ZXMoZW50cnkpO1xuICAgICAgICAgIH0gY2F0Y2ggKGluZGl2aWR1YWxFcnJvcikge1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcihgXFx1Mjc0QyBFcnJvciBpbnNlcnRpbmcgaW5kaXZpZHVhbCBidWRnZXQgZW50cnk6YCwgaW5kaXZpZHVhbEVycm9yKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH1cbiAgLyoqXG4gICAqIEdldCBvciBjcmVhdGUgYSBzeXN0ZW0gdXNlciBmb3IgYXV0b21hdGVkIGVudHJpZXMuXG4gICAqL1xuICBhc3luYyBnZXRTeXN0ZW1Vc2VyKCkge1xuICAgIGNvbnN0IGV4aXN0aW5nVXNlciA9IGF3YWl0IGRiLnNlbGVjdCh7IGlkOiB1c2VyczMuaWQgfSkuZnJvbSh1c2VyczMpLndoZXJlKGVxOCh1c2VyczMuZW1haWwsIFwic3lzdGVtQGtvdmVvLWdlc3Rpb24uY29tXCIpKS5saW1pdCgxKTtcbiAgICBpZiAoZXhpc3RpbmdVc2VyLmxlbmd0aCA+IDApIHtcbiAgICAgIHJldHVybiBleGlzdGluZ1VzZXJbMF07XG4gICAgfVxuICAgIGNvbnN0IGFkbWluVXNlciA9IGF3YWl0IGRiLnNlbGVjdCh7IGlkOiB1c2VyczMuaWQgfSkuZnJvbSh1c2VyczMpLndoZXJlKGVxOCh1c2VyczMucm9sZSwgXCJhZG1pblwiKSkubGltaXQoMSk7XG4gICAgaWYgKGFkbWluVXNlci5sZW5ndGggPiAwKSB7XG4gICAgICByZXR1cm4gYWRtaW5Vc2VyWzBdO1xuICAgIH1cbiAgICBjb25zdCBhbnlVc2VyID0gYXdhaXQgZGIuc2VsZWN0KHsgaWQ6IHVzZXJzMy5pZCB9KS5mcm9tKHVzZXJzMykud2hlcmUoZXE4KHVzZXJzMy5pc0FjdGl2ZSwgdHJ1ZSkpLmxpbWl0KDEpO1xuICAgIGlmIChhbnlVc2VyLmxlbmd0aCA+IDApIHtcbiAgICAgIHJldHVybiBhbnlVc2VyWzBdO1xuICAgIH1cbiAgICB0aHJvdyBuZXcgRXJyb3IoXCJObyBhY3RpdmUgdXNlcnMgZm91bmQgZm9yIHN5c3RlbSBvcGVyYXRpb25zXCIpO1xuICB9XG4gIC8qKlxuICAgKiBSZXBvcHVsYXRlIGJ1ZGdldHMgZm9yIGEgc3BlY2lmaWMgYnVpbGRpbmcgKHVzZWZ1bCB3aGVuIG1vbmV5IGZsb3cgZGF0YSBjaGFuZ2VzKS5cbiAgICogQHBhcmFtIGJ1aWxkaW5nSWRcbiAgICovXG4gIGFzeW5jIHJlcG9wdWxhdGVCdWRnZXRzRm9yQnVpbGRpbmcoYnVpbGRpbmdJZCkge1xuICAgIGNvbnN0IGJ1aWxkaW5nID0gYXdhaXQgZGIuc2VsZWN0KCkuZnJvbShidWlsZGluZ3MyKS53aGVyZShlcTgoYnVpbGRpbmdzMi5pZCwgYnVpbGRpbmdJZCkpLmxpbWl0KDEpO1xuICAgIGlmIChidWlsZGluZy5sZW5ndGggPT09IDApIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihgQnVpbGRpbmcgJHtidWlsZGluZ0lkfSBub3QgZm91bmRgKTtcbiAgICB9XG4gICAgY29uc3QgYnVkZ2V0c0NyZWF0ZWQgPSBhd2FpdCB0aGlzLnBvcHVsYXRlQnVkZ2V0c0ZvckJ1aWxkaW5nKGJ1aWxkaW5nWzBdKTtcbiAgICBjb25zb2xlLmxvZyhcbiAgICAgIGBcXHUyNzA1IFJlcG9wdWxhdGVkICR7YnVkZ2V0c0NyZWF0ZWR9IGJ1ZGdldCBlbnRyaWVzIGZvciBidWlsZGluZyAke2J1aWxkaW5nWzBdLm5hbWV9YFxuICAgICk7XG4gICAgcmV0dXJuIGJ1ZGdldHNDcmVhdGVkO1xuICB9XG4gIC8qKlxuICAgKiBHZXQgYnVkZ2V0IHN0YXRpc3RpY3MuXG4gICAqL1xuICBhc3luYyBnZXRCdWRnZXRTdGF0aXN0aWNzKCkge1xuICAgIGNvbnN0IFt0b3RhbFJlc3VsdF0gPSBhd2FpdCBkYi5zZWxlY3QoeyBjb3VudDogc3FsMTdgY291bnQoKik6OmludGAgfSkuZnJvbShtb250aGx5QnVkZ2V0czIpO1xuICAgIGNvbnN0IFtidWlsZGluZ3NSZXN1bHRdID0gYXdhaXQgZGIuc2VsZWN0KHsgY291bnQ6IHNxbDE3YGNvdW50KERJU1RJTkNUICR7bW9udGhseUJ1ZGdldHMyLmJ1aWxkaW5nSWR9KTo6aW50YCB9KS5mcm9tKG1vbnRobHlCdWRnZXRzMik7XG4gICAgY29uc3QgW29sZGVzdFJlc3VsdF0gPSBhd2FpdCBkYi5zZWxlY3Qoe1xuICAgICAgeWVhcjogbW9udGhseUJ1ZGdldHMyLnllYXIsXG4gICAgICBtb250aDogbW9udGhseUJ1ZGdldHMyLm1vbnRoXG4gICAgfSkuZnJvbShtb250aGx5QnVkZ2V0czIpLm9yZGVyQnkobW9udGhseUJ1ZGdldHMyLnllYXIsIG1vbnRobHlCdWRnZXRzMi5tb250aCkubGltaXQoMSk7XG4gICAgY29uc3QgW25ld2VzdFJlc3VsdF0gPSBhd2FpdCBkYi5zZWxlY3Qoe1xuICAgICAgeWVhcjogbW9udGhseUJ1ZGdldHMyLnllYXIsXG4gICAgICBtb250aDogbW9udGhseUJ1ZGdldHMyLm1vbnRoXG4gICAgfSkuZnJvbShtb250aGx5QnVkZ2V0czIpLm9yZGVyQnkoc3FsMTdgJHttb250aGx5QnVkZ2V0czIueWVhcn0gREVTQywgJHttb250aGx5QnVkZ2V0czIubW9udGh9IERFU0NgKS5saW1pdCgxKTtcbiAgICBjb25zdCBvbGRlc3REYXRlID0gb2xkZXN0UmVzdWx0ID8gYCR7b2xkZXN0UmVzdWx0LnllYXJ9LSR7U3RyaW5nKG9sZGVzdFJlc3VsdC5tb250aCkucGFkU3RhcnQoMiwgXCIwXCIpfWAgOiBudWxsO1xuICAgIGNvbnN0IG5ld2VzdERhdGUgPSBuZXdlc3RSZXN1bHQgPyBgJHtuZXdlc3RSZXN1bHQueWVhcn0tJHtTdHJpbmcobmV3ZXN0UmVzdWx0Lm1vbnRoKS5wYWRTdGFydCgyLCBcIjBcIil9YCA6IG51bGw7XG4gICAgcmV0dXJuIHtcbiAgICAgIHRvdGFsQnVkZ2V0RW50cmllczogdG90YWxSZXN1bHQuY291bnQsXG4gICAgICBidWlsZGluZ3NXaXRoQnVkZ2V0czogYnVpbGRpbmdzUmVzdWx0LmNvdW50LFxuICAgICAgb2xkZXN0QnVkZ2V0RGF0ZTogb2xkZXN0RGF0ZSxcbiAgICAgIG5ld2VzdEJ1ZGdldERhdGU6IG5ld2VzdERhdGVcbiAgICB9O1xuICB9XG59O1xudmFyIG1vbnRobHlCdWRnZXRTZXJ2aWNlID0gbmV3IE1vbnRobHlCdWRnZXRTZXJ2aWNlKCk7XG5cbi8vIHNlcnZlci9zZXJ2aWNlcy9kZWxheWVkLXVwZGF0ZS1zZXJ2aWNlLnRzXG52YXIgRGVsYXllZFVwZGF0ZVNlcnZpY2UgPSBjbGFzcyBfRGVsYXllZFVwZGF0ZVNlcnZpY2Uge1xuICAvKipcbiAgICpcbiAgICovXG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHRoaXMuREVMQVlfTUlOVVRFUyA9IDE1O1xuICAgIHRoaXMuREVMQVlfTVMgPSB0aGlzLkRFTEFZX01JTlVURVMgKiA2MCAqIDFlMztcbiAgICAvLyAxNSBtaW51dGVzIGluIG1pbGxpc2Vjb25kc1xuICAgIC8vIFRyYWNrIHBlbmRpbmcgdXBkYXRlcyB0byBhdm9pZCBkdXBsaWNhdGVzXG4gICAgdGhpcy5wZW5kaW5nQmlsbFVwZGF0ZXMgPSAvKiBAX19QVVJFX18gKi8gbmV3IFNldCgpO1xuICAgIHRoaXMucGVuZGluZ1Jlc2lkZW5jZVVwZGF0ZXMgPSAvKiBAX19QVVJFX18gKi8gbmV3IFNldCgpO1xuICAgIHRoaXMucGVuZGluZ0J1aWxkaW5nQnVkZ2V0VXBkYXRlcyA9IC8qIEBfX1BVUkVfXyAqLyBuZXcgU2V0KCk7XG4gIH1cbiAgLyoqXG4gICAqXG4gICAqL1xuICBzdGF0aWMgZ2V0SW5zdGFuY2UoKSB7XG4gICAgaWYgKCFfRGVsYXllZFVwZGF0ZVNlcnZpY2UuaW5zdGFuY2UpIHtcbiAgICAgIF9EZWxheWVkVXBkYXRlU2VydmljZS5pbnN0YW5jZSA9IG5ldyBfRGVsYXllZFVwZGF0ZVNlcnZpY2UoKTtcbiAgICB9XG4gICAgcmV0dXJuIF9EZWxheWVkVXBkYXRlU2VydmljZS5pbnN0YW5jZTtcbiAgfVxuICAvKipcbiAgICogU2NoZWR1bGUgbW9uZXkgZmxvdyB1cGRhdGUgZm9yIGEgYmlsbCBhZnRlciAxNS1taW51dGUgZGVsYXkuXG4gICAqIEBwYXJhbSBiaWxsSWRcbiAgICovXG4gIHNjaGVkdWxlQmlsbFVwZGF0ZShiaWxsSWQpIHtcbiAgICBpZiAodGhpcy5wZW5kaW5nQmlsbFVwZGF0ZXMuaGFzKGJpbGxJZCkpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdGhpcy5wZW5kaW5nQmlsbFVwZGF0ZXMuYWRkKGJpbGxJZCk7XG4gICAgY29uc29sZS5sb2coXG4gICAgICBgXFx1MjNGMCBTY2hlZHVsaW5nIG1vbmV5IGZsb3cgdXBkYXRlIGZvciBiaWxsICR7YmlsbElkfSBpbiAke3RoaXMuREVMQVlfTUlOVVRFU30gbWludXRlc2BcbiAgICApO1xuICAgIHNldFRpbWVvdXQoYXN5bmMgKCkgPT4ge1xuICAgICAgdHJ5IHtcbiAgICAgICAgY29uc3QgbW9uZXlGbG93RW50cmllcyA9IGF3YWl0IG1vbmV5Rmxvd0F1dG9tYXRpb25TZXJ2aWNlLmdlbmVyYXRlRm9yQmlsbChiaWxsSWQpO1xuICAgICAgICBjb25zdCBidWlsZGluZ0lkID0gYXdhaXQgdGhpcy5nZXRCdWlsZGluZ0lkRnJvbUJpbGwoYmlsbElkKTtcbiAgICAgICAgaWYgKGJ1aWxkaW5nSWQpIHtcbiAgICAgICAgICBhd2FpdCB0aGlzLnNjaGVkdWxlQnVkZ2V0VXBkYXRlKGJ1aWxkaW5nSWQpO1xuICAgICAgICB9XG4gICAgICB9IGZpbmFsbHkge1xuICAgICAgICB0aGlzLnBlbmRpbmdCaWxsVXBkYXRlcy5kZWxldGUoYmlsbElkKTtcbiAgICAgIH1cbiAgICB9LCB0aGlzLkRFTEFZX01TKTtcbiAgfVxuICAvKipcbiAgICogU2NoZWR1bGUgbW9uZXkgZmxvdyB1cGRhdGUgZm9yIGEgcmVzaWRlbmNlIGFmdGVyIDE1LW1pbnV0ZSBkZWxheS5cbiAgICogQHBhcmFtIHJlc2lkZW5jZUlkXG4gICAqL1xuICBzY2hlZHVsZVJlc2lkZW5jZVVwZGF0ZShyZXNpZGVuY2VJZCkge1xuICAgIGlmICh0aGlzLnBlbmRpbmdSZXNpZGVuY2VVcGRhdGVzLmhhcyhyZXNpZGVuY2VJZCkpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdGhpcy5wZW5kaW5nUmVzaWRlbmNlVXBkYXRlcy5hZGQocmVzaWRlbmNlSWQpO1xuICAgIGNvbnNvbGUubG9nKFxuICAgICAgYFxcdTIzRjAgU2NoZWR1bGluZyBtb25leSBmbG93IHVwZGF0ZSBmb3IgcmVzaWRlbmNlICR7cmVzaWRlbmNlSWR9IGluICR7dGhpcy5ERUxBWV9NSU5VVEVTfSBtaW51dGVzYFxuICAgICk7XG4gICAgc2V0VGltZW91dChhc3luYyAoKSA9PiB7XG4gICAgICB0cnkge1xuICAgICAgICBjb25zdCBtb25leUZsb3dFbnRyaWVzID0gYXdhaXQgbW9uZXlGbG93QXV0b21hdGlvblNlcnZpY2UuZ2VuZXJhdGVGb3JSZXNpZGVuY2UocmVzaWRlbmNlSWQpO1xuICAgICAgICBjb25zb2xlLmxvZyhcbiAgICAgICAgICBgXFx1ezFGNEIwfSBHZW5lcmF0ZWQgJHttb25leUZsb3dFbnRyaWVzfSBtb25leSBmbG93IGVudHJpZXMgZm9yIHJlc2lkZW5jZSAke3Jlc2lkZW5jZUlkfWBcbiAgICAgICAgKTtcbiAgICAgICAgY29uc3QgYnVpbGRpbmdJZCA9IGF3YWl0IHRoaXMuZ2V0QnVpbGRpbmdJZEZyb21SZXNpZGVuY2UocmVzaWRlbmNlSWQpO1xuICAgICAgICBpZiAoYnVpbGRpbmdJZCkge1xuICAgICAgICAgIGF3YWl0IHRoaXMuc2NoZWR1bGVCdWRnZXRVcGRhdGUoYnVpbGRpbmdJZCk7XG4gICAgICAgIH1cbiAgICAgIH0gZmluYWxseSB7XG4gICAgICAgIHRoaXMucGVuZGluZ1Jlc2lkZW5jZVVwZGF0ZXMuZGVsZXRlKHJlc2lkZW5jZUlkKTtcbiAgICAgIH1cbiAgICB9LCB0aGlzLkRFTEFZX01TKTtcbiAgfVxuICAvKipcbiAgICogU2NoZWR1bGUgYnVkZ2V0IHVwZGF0ZSBmb3IgYSBidWlsZGluZyBhZnRlciBtb25leSBmbG93IGNoYW5nZXMuXG4gICAqIFRoaXMgaXMgY2FsbGVkIGludGVybmFsbHkgYWZ0ZXIgbW9uZXkgZmxvdyB1cGRhdGVzIGNvbXBsZXRlLlxuICAgKiBAcGFyYW0gYnVpbGRpbmdJZFxuICAgKi9cbiAgYXN5bmMgc2NoZWR1bGVCdWRnZXRVcGRhdGUoYnVpbGRpbmdJZCkge1xuICAgIGlmICh0aGlzLnBlbmRpbmdCdWlsZGluZ0J1ZGdldFVwZGF0ZXMuaGFzKGJ1aWxkaW5nSWQpKSB7XG4gICAgICBjb25zb2xlLmxvZyhcbiAgICAgICAgYFxcdXsxRjNFMn0gQnVpbGRpbmcgJHtidWlsZGluZ0lkfSBhbHJlYWR5IGhhcyBhIHBlbmRpbmcgYnVkZ2V0IHVwZGF0ZSwgc2tpcHBpbmcgZHVwbGljYXRlYFxuICAgICAgKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdGhpcy5wZW5kaW5nQnVpbGRpbmdCdWRnZXRVcGRhdGVzLmFkZChidWlsZGluZ0lkKTtcbiAgICBjb25zb2xlLmxvZyhcbiAgICAgIGBcXHUyM0YwIFNjaGVkdWxpbmcgYnVkZ2V0IHVwZGF0ZSBmb3IgYnVpbGRpbmcgJHtidWlsZGluZ0lkfSBpbiAke3RoaXMuREVMQVlfTUlOVVRFU30gbWludXRlc2BcbiAgICApO1xuICAgIHNldFRpbWVvdXQoYXN5bmMgKCkgPT4ge1xuICAgICAgdHJ5IHtcbiAgICAgICAgY29uc3QgYnVkZ2V0RW50cmllcyA9IGF3YWl0IG1vbnRobHlCdWRnZXRTZXJ2aWNlLnJlcG9wdWxhdGVCdWRnZXRzRm9yQnVpbGRpbmcoYnVpbGRpbmdJZCk7XG4gICAgICB9IGZpbmFsbHkge1xuICAgICAgICB0aGlzLnBlbmRpbmdCdWlsZGluZ0J1ZGdldFVwZGF0ZXMuZGVsZXRlKGJ1aWxkaW5nSWQpO1xuICAgICAgfVxuICAgIH0sIHRoaXMuREVMQVlfTVMpO1xuICB9XG4gIC8qKlxuICAgKiBHZXQgYnVpbGRpbmcgSUQgZnJvbSBiaWxsIElELlxuICAgKiBAcGFyYW0gYmlsbElkXG4gICAqL1xuICBhc3luYyBnZXRCdWlsZGluZ0lkRnJvbUJpbGwoYmlsbElkKSB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHsgZGI6IGRiMiB9ID0gYXdhaXQgUHJvbWlzZS5yZXNvbHZlKCkudGhlbigoKSA9PiAoaW5pdF9kYigpLCBkYl9leHBvcnRzKSk7XG4gICAgICBjb25zdCB7IGJpbGxzOiBiaWxsczMgfSA9IGF3YWl0IFByb21pc2UucmVzb2x2ZSgpLnRoZW4oKCkgPT4gKGluaXRfc2NoZW1hKCksIHNjaGVtYV9leHBvcnRzKSk7XG4gICAgICBjb25zdCB7IGVxOiBlcTE1IH0gPSBhd2FpdCBpbXBvcnQoXCJkcml6emxlLW9ybVwiKTtcbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGRiMi5zZWxlY3QoeyBidWlsZGluZ0lkOiBiaWxsczMuYnVpbGRpbmdJZCB9KS5mcm9tKGJpbGxzMykud2hlcmUoZXExNShiaWxsczMuaWQsIGJpbGxJZCkpLmxpbWl0KDEpO1xuICAgICAgcmV0dXJuIHJlc3VsdC5sZW5ndGggPiAwID8gcmVzdWx0WzBdLmJ1aWxkaW5nSWQgOiBudWxsO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKFwiXFx1Mjc0QyBFcnJvciBnZXR0aW5nIGJ1aWxkaW5nIElEOlwiLCBlcnJvcik7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gIH1cbiAgLyoqXG4gICAqIEdldCBidWlsZGluZyBJRCBmcm9tIHJlc2lkZW5jZSBJRC5cbiAgICogQHBhcmFtIHJlc2lkZW5jZUlkXG4gICAqL1xuICBhc3luYyBnZXRCdWlsZGluZ0lkRnJvbVJlc2lkZW5jZShyZXNpZGVuY2VJZCkge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCB7IGRiOiBkYjIgfSA9IGF3YWl0IFByb21pc2UucmVzb2x2ZSgpLnRoZW4oKCkgPT4gKGluaXRfZGIoKSwgZGJfZXhwb3J0cykpO1xuICAgICAgY29uc3QgeyByZXNpZGVuY2VzOiByZXNpZGVuY2VzMiB9ID0gYXdhaXQgUHJvbWlzZS5yZXNvbHZlKCkudGhlbigoKSA9PiAoaW5pdF9zY2hlbWEoKSwgc2NoZW1hX2V4cG9ydHMpKTtcbiAgICAgIGNvbnN0IHsgZXE6IGVxMTUgfSA9IGF3YWl0IGltcG9ydChcImRyaXp6bGUtb3JtXCIpO1xuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgZGIyLnNlbGVjdCh7IGJ1aWxkaW5nSWQ6IHJlc2lkZW5jZXMyLmJ1aWxkaW5nSWQgfSkuZnJvbShyZXNpZGVuY2VzMikud2hlcmUoZXExNShyZXNpZGVuY2VzMi5pZCwgcmVzaWRlbmNlSWQpKS5saW1pdCgxKTtcbiAgICAgIHJldHVybiByZXN1bHQubGVuZ3RoID4gMCA/IHJlc3VsdFswXS5idWlsZGluZ0lkIDogbnVsbDtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcihcIlxcdTI3NEMgRXJyb3IgZ2V0dGluZyBidWlsZGluZyBJRDpcIiwgZXJyb3IpO1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICB9XG4gIC8qKlxuICAgKiBGb3JjZSBpbW1lZGlhdGUgdXBkYXRlIChmb3IgdGVzdGluZyBvciB1cmdlbnQgdXBkYXRlcykuXG4gICAqIEBwYXJhbSBiaWxsSWRcbiAgICovXG4gIGFzeW5jIGZvcmNlSW1tZWRpYXRlQmlsbFVwZGF0ZShiaWxsSWQpIHtcbiAgICBjb25zdCBtb25leUZsb3dFbnRyaWVzID0gYXdhaXQgbW9uZXlGbG93QXV0b21hdGlvblNlcnZpY2UuZ2VuZXJhdGVGb3JCaWxsKGJpbGxJZCk7XG4gICAgY29uc3QgYnVpbGRpbmdJZCA9IGF3YWl0IHRoaXMuZ2V0QnVpbGRpbmdJZEZyb21CaWxsKGJpbGxJZCk7XG4gICAgaWYgKGJ1aWxkaW5nSWQpIHtcbiAgICAgIGNvbnN0IGJ1ZGdldEVudHJpZXMgPSBhd2FpdCBtb250aGx5QnVkZ2V0U2VydmljZS5yZXBvcHVsYXRlQnVkZ2V0c0ZvckJ1aWxkaW5nKGJ1aWxkaW5nSWQpO1xuICAgIH1cbiAgfVxuICAvKipcbiAgICogRm9yY2UgaW1tZWRpYXRlIHVwZGF0ZSAoZm9yIHRlc3Rpbmcgb3IgdXJnZW50IHVwZGF0ZXMpLlxuICAgKiBAcGFyYW0gcmVzaWRlbmNlSWRcbiAgICovXG4gIGFzeW5jIGZvcmNlSW1tZWRpYXRlUmVzaWRlbmNlVXBkYXRlKHJlc2lkZW5jZUlkKSB7XG4gICAgY29uc3QgbW9uZXlGbG93RW50cmllcyA9IGF3YWl0IG1vbmV5Rmxvd0F1dG9tYXRpb25TZXJ2aWNlLmdlbmVyYXRlRm9yUmVzaWRlbmNlKHJlc2lkZW5jZUlkKTtcbiAgICBjb25zb2xlLmxvZyhcbiAgICAgIGBcXHV7MUY0QjB9IEdlbmVyYXRlZCAke21vbmV5Rmxvd0VudHJpZXN9IG1vbmV5IGZsb3cgZW50cmllcyBmb3IgcmVzaWRlbmNlICR7cmVzaWRlbmNlSWR9YFxuICAgICk7XG4gICAgY29uc3QgYnVpbGRpbmdJZCA9IGF3YWl0IHRoaXMuZ2V0QnVpbGRpbmdJZEZyb21SZXNpZGVuY2UocmVzaWRlbmNlSWQpO1xuICAgIGlmIChidWlsZGluZ0lkKSB7XG4gICAgICBjb25zdCBidWRnZXRFbnRyaWVzID0gYXdhaXQgbW9udGhseUJ1ZGdldFNlcnZpY2UucmVwb3B1bGF0ZUJ1ZGdldHNGb3JCdWlsZGluZyhidWlsZGluZ0lkKTtcbiAgICB9XG4gIH1cbiAgLyoqXG4gICAqIEdldCBjdXJyZW50IHN0YXR1cyBvZiBwZW5kaW5nIHVwZGF0ZXMuXG4gICAqL1xuICBnZXRTdGF0dXMoKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIGRlbGF5TWludXRlczogdGhpcy5ERUxBWV9NSU5VVEVTLFxuICAgICAgcGVuZGluZ0JpbGxVcGRhdGVzOiB0aGlzLnBlbmRpbmdCaWxsVXBkYXRlcy5zaXplLFxuICAgICAgcGVuZGluZ1Jlc2lkZW5jZVVwZGF0ZXM6IHRoaXMucGVuZGluZ1Jlc2lkZW5jZVVwZGF0ZXMuc2l6ZSxcbiAgICAgIHBlbmRpbmdCdWRnZXRVcGRhdGVzOiB0aGlzLnBlbmRpbmdCdWlsZGluZ0J1ZGdldFVwZGF0ZXMuc2l6ZVxuICAgIH07XG4gIH1cbn07XG52YXIgZGVsYXllZFVwZGF0ZVNlcnZpY2UgPSBEZWxheWVkVXBkYXRlU2VydmljZS5nZXRJbnN0YW5jZSgpO1xuXG4vLyBzZXJ2ZXIvc2VydmljZXMvZ2VtaW5pLWJpbGwtYW5hbHl6ZXIudHNcbmltcG9ydCAqIGFzIGZzNCBmcm9tIFwiZnNcIjtcbmltcG9ydCB7IEdvb2dsZUdlbkFJIH0gZnJvbSBcIkBnb29nbGUvZ2VuYWlcIjtcbnZhciBhaSA9IG5ldyBHb29nbGVHZW5BSSh7IGFwaUtleTogcHJvY2Vzcy5lbnYuR0VNSU5JX0FQSV9LRVkgfHwgXCJcIiB9KTtcbnZhciBHZW1pbmlCaWxsQW5hbHl6ZXIgPSBjbGFzcyB7XG4gIC8qKlxuICAgKiBBbmFseXplIGEgYmlsbCBkb2N1bWVudCB1c2luZyBHZW1pbmkgMi41IFByby5cbiAgICogQHBhcmFtIGltYWdlUGF0aFxuICAgKi9cbiAgYXN5bmMgYW5hbHl6ZUJpbGxEb2N1bWVudChpbWFnZVBhdGgpIHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgaW1hZ2VCeXRlcyA9IGZzNC5yZWFkRmlsZVN5bmMoaW1hZ2VQYXRoKTtcbiAgICAgIGNvbnN0IHN5c3RlbVByb21wdCA9IGBZb3UgYXJlIGFuIGV4cGVydCBiaWxsIGFuYWx5c2lzIEFJLiBBbmFseXplIHRoaXMgYmlsbC9pbnZvaWNlIGRvY3VtZW50IGFuZCBleHRyYWN0IGtleSBpbmZvcm1hdGlvbi5cbiAgICAgIFxuICAgICAgRXh0cmFjdCB0aGUgZm9sbG93aW5nIGluZm9ybWF0aW9uIGFuZCByZXNwb25kIHdpdGggSlNPTiBpbiB0aGlzIGV4YWN0IGZvcm1hdDpcbiAgICAgIHtcbiAgICAgICAgXCJ0aXRsZVwiOiBcIkJyaWVmIGRlc2NyaXB0aXZlIHRpdGxlIGZvciB0aGlzIGJpbGxcIixcbiAgICAgICAgXCJ2ZW5kb3JcIjogXCJDb21wYW55IG9yIHNlcnZpY2UgcHJvdmlkZXIgbmFtZVwiLFxuICAgICAgICBcInRvdGFsQW1vdW50XCI6IFwiVG90YWwgYW1vdW50IGFzIGRlY2ltYWwgc3RyaW5nIChlLmcuLCAnMTIzNC41NicpXCIsXG4gICAgICAgIFwiY2F0ZWdvcnlcIjogXCJPbmUgb2Y6IGluc3VyYW5jZSwgbWFpbnRlbmFuY2UsIHNhbGFyeSwgdXRpbGl0aWVzLCBjbGVhbmluZywgc2VjdXJpdHksIGxhbmRzY2FwaW5nLCBwcm9mZXNzaW9uYWxfc2VydmljZXMsIGFkbWluaXN0cmF0aW9uLCByZXBhaXJzLCBzdXBwbGllcywgdGF4ZXMsIHRlY2hub2xvZ3ksIHJlc2VydmVzLCBvdGhlclwiLFxuICAgICAgICBcImRlc2NyaXB0aW9uXCI6IFwiQnJpZWYgZGVzY3JpcHRpb24gb2Ygc2VydmljZXMvcHJvZHVjdHNcIixcbiAgICAgICAgXCJkdWVEYXRlXCI6IFwiRHVlIGRhdGUgaW4gWVlZWS1NTS1ERCBmb3JtYXQgaWYgZm91bmRcIixcbiAgICAgICAgXCJpc3N1ZURhdGVcIjogXCJJc3N1ZSBkYXRlIGluIFlZWVktTU0tREQgZm9ybWF0IGlmIGZvdW5kXCIsIFxuICAgICAgICBcImJpbGxOdW1iZXJcIjogXCJCaWxsL2ludm9pY2UgbnVtYmVyIGlmIGZvdW5kXCIsXG4gICAgICAgIFwiY29uZmlkZW5jZVwiOiAwLjg1XG4gICAgICB9XG4gICAgICBcbiAgICAgIEd1aWRlbGluZXM6XG4gICAgICAtIFVzZSBjbGVhciwgY29uY2lzZSB0aXRsZXMgKGUuZy4sIFwiSHlkcm8tUXVcXHhFOWJlYyBFbGVjdHJpY2l0eSBCaWxsXCIsIFwiUHJvcGVydHkgSW5zdXJhbmNlIFByZW1pdW1cIilcbiAgICAgIC0gTWFwIGNhdGVnb3JpZXMgaW50ZWxsaWdlbnRseSAoZWxlY3RyaWNpdHkgPSB1dGlsaXRpZXMsIGxlZ2FsIGZlZXMgPSBwcm9mZXNzaW9uYWxfc2VydmljZXMsIGV0Yy4pXG4gICAgICAtIEV4dHJhY3QgZXhhY3QgYW1vdW50cyB3aXRob3V0IGN1cnJlbmN5IHN5bWJvbHNcbiAgICAgIC0gQ29uZmlkZW5jZSBzaG91bGQgcmVmbGVjdCBob3cgY2xlYXIgdGhlIGRvY3VtZW50IGlzICgwLjAtMS4wKVxuICAgICAgLSBJZiBpbmZvcm1hdGlvbiBpcyB1bmNsZWFyLCB1c2UgYmVzdCBndWVzcyBidXQgbG93ZXIgY29uZmlkZW5jZVxuICAgICAgYDtcbiAgICAgIGNvbnN0IGNvbnRlbnRzID0gW1xuICAgICAgICB7XG4gICAgICAgICAgaW5saW5lRGF0YToge1xuICAgICAgICAgICAgX2RhdGE6IGltYWdlQnl0ZXMudG9TdHJpbmcoXCJiYXNlNjRcIiksXG4gICAgICAgICAgICBtaW1lVHlwZTogXCJpbWFnZS9qcGVnXCJcbiAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIGBBbmFseXplIHRoaXMgYmlsbC9pbnZvaWNlIGRvY3VtZW50IGFuZCBleHRyYWN0IHRoZSBrZXkgaW5mb3JtYXRpb24gYXMgc3BlY2lmaWVkLmBcbiAgICAgIF07XG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGFpLm1vZGVscy5nZW5lcmF0ZUNvbnRlbnQoe1xuICAgICAgICBtb2RlbDogXCJnZW1pbmktMi41LXByb1wiLFxuICAgICAgICBjb25maWc6IHtcbiAgICAgICAgICBzeXN0ZW1JbnN0cnVjdGlvbjogc3lzdGVtUHJvbXB0LFxuICAgICAgICAgIHJlc3BvbnNlTWltZVR5cGU6IFwiYXBwbGljYXRpb24vanNvblwiLFxuICAgICAgICAgIHJlc3BvbnNlU2NoZW1hOiB7XG4gICAgICAgICAgICB0eXBlOiBcIm9iamVjdFwiLFxuICAgICAgICAgICAgcHJvcGVydGllczoge1xuICAgICAgICAgICAgICB0aXRsZTogeyB0eXBlOiBcInN0cmluZ1wiIH0sXG4gICAgICAgICAgICAgIHZlbmRvcjogeyB0eXBlOiBcInN0cmluZ1wiIH0sXG4gICAgICAgICAgICAgIHRvdGFsQW1vdW50OiB7IHR5cGU6IFwic3RyaW5nXCIgfSxcbiAgICAgICAgICAgICAgY2F0ZWdvcnk6IHtcbiAgICAgICAgICAgICAgICB0eXBlOiBcInN0cmluZ1wiLFxuICAgICAgICAgICAgICAgIGVudW06IFtcbiAgICAgICAgICAgICAgICAgIFwiaW5zdXJhbmNlXCIsXG4gICAgICAgICAgICAgICAgICBcIm1haW50ZW5hbmNlXCIsXG4gICAgICAgICAgICAgICAgICBcInNhbGFyeVwiLFxuICAgICAgICAgICAgICAgICAgXCJ1dGlsaXRpZXNcIixcbiAgICAgICAgICAgICAgICAgIFwiY2xlYW5pbmdcIixcbiAgICAgICAgICAgICAgICAgIFwic2VjdXJpdHlcIixcbiAgICAgICAgICAgICAgICAgIFwibGFuZHNjYXBpbmdcIixcbiAgICAgICAgICAgICAgICAgIFwicHJvZmVzc2lvbmFsX3NlcnZpY2VzXCIsXG4gICAgICAgICAgICAgICAgICBcImFkbWluaXN0cmF0aW9uXCIsXG4gICAgICAgICAgICAgICAgICBcInJlcGFpcnNcIixcbiAgICAgICAgICAgICAgICAgIFwic3VwcGxpZXNcIixcbiAgICAgICAgICAgICAgICAgIFwidGF4ZXNcIixcbiAgICAgICAgICAgICAgICAgIFwidGVjaG5vbG9neVwiLFxuICAgICAgICAgICAgICAgICAgXCJyZXNlcnZlc1wiLFxuICAgICAgICAgICAgICAgICAgXCJvdGhlclwiXG4gICAgICAgICAgICAgICAgXVxuICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogeyB0eXBlOiBcInN0cmluZ1wiIH0sXG4gICAgICAgICAgICAgIGR1ZURhdGU6IHsgdHlwZTogXCJzdHJpbmdcIiB9LFxuICAgICAgICAgICAgICBpc3N1ZURhdGU6IHsgdHlwZTogXCJzdHJpbmdcIiB9LFxuICAgICAgICAgICAgICBiaWxsTnVtYmVyOiB7IHR5cGU6IFwic3RyaW5nXCIgfSxcbiAgICAgICAgICAgICAgY29uZmlkZW5jZTogeyB0eXBlOiBcIm51bWJlclwiIH1cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICByZXF1aXJlZDogW1widGl0bGVcIiwgXCJ2ZW5kb3JcIiwgXCJ0b3RhbEFtb3VudFwiLCBcImNhdGVnb3J5XCIsIFwiY29uZmlkZW5jZVwiXVxuICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgY29udGVudHNcbiAgICAgIH0pO1xuICAgICAgY29uc3QgcmF3SnNvbiA9IHJlc3BvbnNlLnRleHQ7XG4gICAgICBpZiAocmF3SnNvbikge1xuICAgICAgICBjb25zdCBhbmFseXNpcyA9IEpTT04ucGFyc2UocmF3SnNvbik7XG4gICAgICAgIGFuYWx5c2lzLmNvbmZpZGVuY2UgPSBNYXRoLm1heCgwLCBNYXRoLm1pbigxLCBhbmFseXNpcy5jb25maWRlbmNlKSk7XG4gICAgICAgIGFuYWx5c2lzLnRvdGFsQW1vdW50ID0gdGhpcy5zYW5pdGl6ZUFtb3VudChhbmFseXNpcy50b3RhbEFtb3VudCk7XG4gICAgICAgIHJldHVybiBhbmFseXNpcztcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcIkVtcHR5IHJlc3BvbnNlIGZyb20gR2VtaW5pXCIpO1xuICAgICAgfVxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKFwiXFx1Mjc0QyBFcnJvciBhbmFseXppbmcgYmlsbCBkb2N1bWVudDpcIiwgZXJyb3IpO1xuICAgICAgdGhyb3cgbmV3IEVycm9yKGBGYWlsZWQgdG8gYW5hbHl6ZSBiaWxsIGRvY3VtZW50OiAke2Vycm9yfWApO1xuICAgIH1cbiAgfVxuICAvKipcbiAgICogU2FuaXRpemUgYW5kIHZhbGlkYXRlIGFtb3VudCBzdHJpbmcuXG4gICAqIEBwYXJhbSBhbW91bnRcbiAgICovXG4gIHNhbml0aXplQW1vdW50KGFtb3VudCkge1xuICAgIGNvbnN0IGNsZWFuZWQgPSBhbW91bnQucmVwbGFjZSgvW14wLTkuLV0vZywgXCJcIik7XG4gICAgY29uc3QgcGFyc2VkID0gcGFyc2VGbG9hdChjbGVhbmVkKTtcbiAgICBpZiAoaXNOYU4ocGFyc2VkKSkge1xuICAgICAgcmV0dXJuIFwiMC4wMFwiO1xuICAgIH1cbiAgICByZXR1cm4gcGFyc2VkLnRvRml4ZWQoMik7XG4gIH1cbiAgLyoqXG4gICAqIEdldCBzdWdnZXN0ZWQgcGF5bWVudCBzY2hlZHVsZSBiYXNlZCBvbiBiaWxsIHR5cGUgYW5kIGFtb3VudC5cbiAgICogQHBhcmFtIGNhdGVnb3J5XG4gICAqIEBwYXJhbSBhbW91bnRcbiAgICovXG4gIGFzeW5jIHN1Z2dlc3RQYXltZW50U2NoZWR1bGUoY2F0ZWdvcnksIGFtb3VudCkge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCBwcm9tcHQgPSBgQmFzZWQgb24gdGhpcyBiaWxsIGNhdGVnb3J5IFwiJHtjYXRlZ29yeX1cIiBhbmQgYW1vdW50ICQke2Ftb3VudH0sIHN1Z2dlc3QgdGhlIG1vc3QgYXBwcm9wcmlhdGUgcGF5bWVudCBzY2hlZHVsZS5cbiAgICAgIFxuICAgICAgQ29tbW9uIHBhdHRlcm5zOlxuICAgICAgLSBVdGlsaXRpZXM6IFVzdWFsbHkgbW9udGhseSByZWN1cnJpbmdcbiAgICAgIC0gSW5zdXJhbmNlOiBVc3VhbGx5IHllYXJseSByZWN1cnJpbmcgIFxuICAgICAgLSBNYWludGVuYW5jZTogVXN1YWxseSB1bmlxdWUgcGF5bWVudHNcbiAgICAgIC0gUHJvZmVzc2lvbmFsIHNlcnZpY2VzOiBVc3VhbGx5IHVuaXF1ZSBwYXltZW50c1xuICAgICAgLSBTdXBwbGllczogVXN1YWxseSB1bmlxdWUgcGF5bWVudHNcbiAgICAgIC0gVGF4ZXM6IFVzdWFsbHkgeWVhcmx5IHJlY3VycmluZ1xuICAgICAgXG4gICAgICBSZXNwb25kIHdpdGggSlNPTjpcbiAgICAgIHtcbiAgICAgICAgXCJwYXltZW50VHlwZVwiOiBcInVuaXF1ZVwiIG9yIFwicmVjdXJyZW50XCIsXG4gICAgICAgIFwic2NoZWR1bGVQYXltZW50XCI6IFwibW9udGhseVwiLCBcInF1YXJ0ZXJseVwiLCBvciBcInllYXJseVwiIChvbmx5IGlmIHJlY3VycmVudCksXG4gICAgICAgIFwicmVhc29uaW5nXCI6IFwiQnJpZWYgZXhwbGFuYXRpb24gb2YgdGhlIHJlY29tbWVuZGF0aW9uXCJcbiAgICAgIH1gO1xuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBhaS5tb2RlbHMuZ2VuZXJhdGVDb250ZW50KHtcbiAgICAgICAgbW9kZWw6IFwiZ2VtaW5pLTIuNS1mbGFzaFwiLFxuICAgICAgICBjb25maWc6IHtcbiAgICAgICAgICByZXNwb25zZU1pbWVUeXBlOiBcImFwcGxpY2F0aW9uL2pzb25cIixcbiAgICAgICAgICByZXNwb25zZVNjaGVtYToge1xuICAgICAgICAgICAgdHlwZTogXCJvYmplY3RcIixcbiAgICAgICAgICAgIHByb3BlcnRpZXM6IHtcbiAgICAgICAgICAgICAgcGF5bWVudFR5cGU6IHsgdHlwZTogXCJzdHJpbmdcIiwgZW51bTogW1widW5pcXVlXCIsIFwicmVjdXJyZW50XCJdIH0sXG4gICAgICAgICAgICAgIHNjaGVkdWxlUGF5bWVudDogeyB0eXBlOiBcInN0cmluZ1wiLCBlbnVtOiBbXCJtb250aGx5XCIsIFwicXVhcnRlcmx5XCIsIFwieWVhcmx5XCJdIH0sXG4gICAgICAgICAgICAgIHJlYXNvbmluZzogeyB0eXBlOiBcInN0cmluZ1wiIH1cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICByZXF1aXJlZDogW1wicGF5bWVudFR5cGVcIiwgXCJyZWFzb25pbmdcIl1cbiAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIGNvbnRlbnRzOiBwcm9tcHRcbiAgICAgIH0pO1xuICAgICAgY29uc3QgcmVzdWx0ID0gSlNPTi5wYXJzZShyZXNwb25zZS50ZXh0IHx8IFwie31cIik7XG4gICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKFwiXFx1Mjc0QyBFcnJvciBzdWdnZXN0aW5nIHBheW1lbnQgc2NoZWR1bGU6XCIsIGVycm9yKTtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHBheW1lbnRUeXBlOiBcInVuaXF1ZVwiLFxuICAgICAgICByZWFzb25pbmc6IFwiRGVmYXVsdCB0byB1bmlxdWUgcGF5bWVudCBkdWUgdG8gYW5hbHlzaXMgZXJyb3JcIlxuICAgICAgfTtcbiAgICB9XG4gIH1cbn07XG52YXIgZ2VtaW5pQmlsbEFuYWx5emVyID0gbmV3IEdlbWluaUJpbGxBbmFseXplcigpO1xuXG4vLyBzZXJ2ZXIvYXBpL2JpbGxzLnRzXG5pbml0X3NjaGVtYSgpO1xuaW1wb3J0IG11bHRlcjMgZnJvbSBcIm11bHRlclwiO1xuaW1wb3J0IGZzNSBmcm9tIFwiZnNcIjtcbnZhciB7IGJ1aWxkaW5nczogYnVpbGRpbmdzMywgYmlsbHM6IGJpbGxzMiB9ID0gc2NoZW1hX2V4cG9ydHM7XG52YXIgYmlsbEZpbHRlclNjaGVtYSA9IHoxMy5vYmplY3Qoe1xuICBidWlsZGluZ0lkOiB6MTMuc3RyaW5nKCkudXVpZCgpLFxuICBjYXRlZ29yeTogejEzLnN0cmluZygpLm9wdGlvbmFsKCksXG4gIHllYXI6IHoxMy5zdHJpbmcoKS5vcHRpb25hbCgpLFxuICBzdGF0dXM6IHoxMy5lbnVtKFtcImFsbFwiLCBcImRyYWZ0XCIsIFwic2VudFwiLCBcIm92ZXJkdWVcIiwgXCJwYWlkXCIsIFwiY2FuY2VsbGVkXCJdKS5vcHRpb25hbCgpLFxuICBtb250aHM6IHoxMy5zdHJpbmcoKS5vcHRpb25hbCgpXG4gIC8vIENvbW1hLXNlcGFyYXRlZCBtb250aCBudW1iZXJzIChlLmcuLCBcIjEsMyw2LDEyXCIpXG59KTtcbnZhciBjcmVhdGVCaWxsU2NoZW1hID0gejEzLm9iamVjdCh7XG4gIGJ1aWxkaW5nSWQ6IHoxMy5zdHJpbmcoKS51dWlkKCksXG4gIHRpdGxlOiB6MTMuc3RyaW5nKCkubWluKDEpLFxuICBkZXNjcmlwdGlvbjogejEzLnN0cmluZygpLm9wdGlvbmFsKCksXG4gIGNhdGVnb3J5OiB6MTMuZW51bShbXG4gICAgXCJpbnN1cmFuY2VcIixcbiAgICBcIm1haW50ZW5hbmNlXCIsXG4gICAgXCJzYWxhcnlcIixcbiAgICBcInV0aWxpdGllc1wiLFxuICAgIFwiY2xlYW5pbmdcIixcbiAgICBcInNlY3VyaXR5XCIsXG4gICAgXCJsYW5kc2NhcGluZ1wiLFxuICAgIFwicHJvZmVzc2lvbmFsX3NlcnZpY2VzXCIsXG4gICAgXCJhZG1pbmlzdHJhdGlvblwiLFxuICAgIFwicmVwYWlyc1wiLFxuICAgIFwic3VwcGxpZXNcIixcbiAgICBcInRheGVzXCIsXG4gICAgXCJ0ZWNobm9sb2d5XCIsXG4gICAgXCJyZXNlcnZlc1wiLFxuICAgIFwib3RoZXJcIlxuICBdKSxcbiAgdmVuZG9yOiB6MTMuc3RyaW5nKCkub3B0aW9uYWwoKSxcbiAgcGF5bWVudFR5cGU6IHoxMy5lbnVtKFtcInVuaXF1ZVwiLCBcInJlY3VycmVudFwiXSksXG4gIHNjaGVkdWxlUGF5bWVudDogejEzLmVudW0oW1wid2Vla2x5XCIsIFwibW9udGhseVwiLCBcInF1YXJ0ZXJseVwiLCBcInllYXJseVwiLCBcImN1c3RvbVwiXSkub3B0aW9uYWwoKSxcbiAgc2NoZWR1bGVDdXN0b206IHoxMy5hcnJheSh6MTMuc3RyaW5nKCkpLm9wdGlvbmFsKCksXG4gIGNvc3RzOiB6MTMuYXJyYXkoejEzLnN0cmluZygpKSxcbiAgdG90YWxBbW91bnQ6IHoxMy5zdHJpbmcoKSxcbiAgc3RhcnREYXRlOiB6MTMuc3RyaW5nKCksXG4gIGVuZERhdGU6IHoxMy5zdHJpbmcoKS5vcHRpb25hbCgpLFxuICBzdGF0dXM6IHoxMy5lbnVtKFtcImRyYWZ0XCIsIFwic2VudFwiLCBcIm92ZXJkdWVcIiwgXCJwYWlkXCIsIFwiY2FuY2VsbGVkXCJdKSxcbiAgbm90ZXM6IHoxMy5zdHJpbmcoKS5vcHRpb25hbCgpXG59KTtcbnZhciB1cGRhdGVCaWxsU2NoZW1hID0gY3JlYXRlQmlsbFNjaGVtYS5wYXJ0aWFsKCk7XG52YXIgdXBsb2FkMyA9IG11bHRlcjMoe1xuICBkZXN0OiBcIi90bXAvdXBsb2Fkcy9cIixcbiAgZmlsZUZpbHRlcjogKHJlcSwgZmlsZSwgY2IpID0+IHtcbiAgICBjb25zdCBhbGxvd2VkVHlwZXMgPSBbXCJpbWFnZS9qcGVnXCIsIFwiaW1hZ2UvcG5nXCIsIFwiaW1hZ2UvZ2lmXCIsIFwiYXBwbGljYXRpb24vcGRmXCJdO1xuICAgIGlmIChhbGxvd2VkVHlwZXMuaW5jbHVkZXMoZmlsZS5taW1ldHlwZSkpIHtcbiAgICAgIGNiKG51bGwsIHRydWUpO1xuICAgIH0gZWxzZSB7XG4gICAgICBjYihuZXcgRXJyb3IoXCJPbmx5IGltYWdlIGFuZCBQREYgZmlsZXMgYXJlIGFsbG93ZWRcIikpO1xuICAgIH1cbiAgfSxcbiAgbGltaXRzOiB7XG4gICAgZmlsZVNpemU6IDEwICogMTAyNCAqIDEwMjRcbiAgICAvLyAxME1CIGxpbWl0XG4gIH1cbn0pO1xuZnVuY3Rpb24gcmVnaXN0ZXJCaWxsUm91dGVzKGFwcDIpIHtcbiAgYXBwMi5nZXQoXCIvYXBpL2JpbGxzXCIsIHJlcXVpcmVBdXRoLCBhc3luYyAocmVxLCByZXMpID0+IHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgeyBidWlsZGluZ0lkLCBjYXRlZ29yeSwgeWVhciwgc3RhdHVzID0gXCJhbGxcIiwgbW9udGhzIH0gPSByZXEucXVlcnk7XG4gICAgICBjb25zdCBjb25kaXRpb25zID0gW107XG4gICAgICBpZiAoYnVpbGRpbmdJZCAmJiBidWlsZGluZ0lkICE9PSBcImFsbFwiKSB7XG4gICAgICAgIGNvbmRpdGlvbnMucHVzaChlcTkoYmlsbHMyLmJ1aWxkaW5nSWQsIGJ1aWxkaW5nSWQpKTtcbiAgICAgIH1cbiAgICAgIGlmIChjYXRlZ29yeSAmJiBjYXRlZ29yeSAhPT0gXCJhbGxcIikge1xuICAgICAgICBjb25kaXRpb25zLnB1c2goZXE5KGJpbGxzMi5jYXRlZ29yeSwgY2F0ZWdvcnkpKTtcbiAgICAgIH1cbiAgICAgIGlmICh5ZWFyKSB7XG4gICAgICAgIGNvbmRpdGlvbnMucHVzaChzcWwxOGBFWFRSQUNUKFlFQVIgRlJPTSAke2JpbGxzMi5zdGFydERhdGV9KSA9ICR7eWVhcn1gKTtcbiAgICAgIH1cbiAgICAgIGlmIChzdGF0dXMgJiYgc3RhdHVzICE9PSBcImFsbFwiKSB7XG4gICAgICAgIGNvbmRpdGlvbnMucHVzaChlcTkoYmlsbHMyLnN0YXR1cywgc3RhdHVzKSk7XG4gICAgICB9XG4gICAgICBpZiAobW9udGhzKSB7XG4gICAgICAgIGNvbnN0IG1vbnRoTnVtYmVycyA9IG1vbnRocy5zcGxpdChcIixcIikubWFwKChtKSA9PiBwYXJzZUludChtLnRyaW0oKSkpO1xuICAgICAgICBjb25zdCBtb250aENvbmRpdGlvbnMgPSBtb250aE51bWJlcnMubWFwKFxuICAgICAgICAgIChtb250aCkgPT4gc3FsMThgRVhUUkFDVChNT05USCBGUk9NICR7YmlsbHMyLnN0YXJ0RGF0ZX0pID0gJHttb250aH1gXG4gICAgICAgICk7XG4gICAgICAgIGNvbmRpdGlvbnMucHVzaChzcWwxOGAoJHtzcWwxOC5qb2luKG1vbnRoQ29uZGl0aW9ucywgc3FsMThgIE9SIGApfSlgKTtcbiAgICAgIH1cbiAgICAgIGNvbnN0IHdoZXJlQ2xhdXNlID0gY29uZGl0aW9ucy5sZW5ndGggPiAwID8gYW5kOSguLi5jb25kaXRpb25zKSA6IHZvaWQgMDtcbiAgICAgIGNvbnN0IGJpbGxzTGlzdCA9IGF3YWl0IGRiLnNlbGVjdCh7XG4gICAgICAgIGlkOiBiaWxsczIuaWQsXG4gICAgICAgIGJ1aWxkaW5nSWQ6IGJpbGxzMi5idWlsZGluZ0lkLFxuICAgICAgICBiaWxsTnVtYmVyOiBiaWxsczIuYmlsbE51bWJlcixcbiAgICAgICAgdGl0bGU6IGJpbGxzMi50aXRsZSxcbiAgICAgICAgZGVzY3JpcHRpb246IGJpbGxzMi5kZXNjcmlwdGlvbixcbiAgICAgICAgY2F0ZWdvcnk6IGJpbGxzMi5jYXRlZ29yeSxcbiAgICAgICAgdmVuZG9yOiBiaWxsczIudmVuZG9yLFxuICAgICAgICBwYXltZW50VHlwZTogYmlsbHMyLnBheW1lbnRUeXBlLFxuICAgICAgICBjb3N0czogYmlsbHMyLmNvc3RzLFxuICAgICAgICB0b3RhbEFtb3VudDogYmlsbHMyLnRvdGFsQW1vdW50LFxuICAgICAgICBzdGFydERhdGU6IGJpbGxzMi5zdGFydERhdGUsXG4gICAgICAgIHN0YXR1czogYmlsbHMyLnN0YXR1cyxcbiAgICAgICAgbm90ZXM6IGJpbGxzMi5ub3RlcyxcbiAgICAgICAgY3JlYXRlZEJ5OiBiaWxsczIuY3JlYXRlZEJ5LFxuICAgICAgICBjcmVhdGVkQXQ6IGJpbGxzMi5jcmVhdGVkQXQsXG4gICAgICAgIHVwZGF0ZWRBdDogYmlsbHMyLnVwZGF0ZWRBdFxuICAgICAgfSkuZnJvbShiaWxsczIpLndoZXJlKHdoZXJlQ2xhdXNlKS5vcmRlckJ5KGRlc2MyKGJpbGxzMi5zdGFydERhdGUpKTtcbiAgICAgIHJlcy5qc29uKGJpbGxzTGlzdCk7XG4gICAgfSBjYXRjaCAoX2Vycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKFwiXFx1Mjc0QyBFcnJvciBmZXRjaGluZyBiaWxsczpcIiwgX2Vycm9yKTtcbiAgICAgIHJlcy5zdGF0dXMoNTAwKS5qc29uKHtcbiAgICAgICAgbWVzc2FnZTogXCJGYWlsZWQgdG8gZmV0Y2ggYmlsbHNcIixcbiAgICAgICAgX2Vycm9yOiBfZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IF9lcnJvci5tZXNzYWdlIDogXCJVbmtub3duIGVycm9yXCJcbiAgICAgIH0pO1xuICAgIH1cbiAgfSk7XG4gIGFwcDIuZ2V0KFwiL2FwaS9iaWxscy86aWRcIiwgcmVxdWlyZUF1dGgsIGFzeW5jIChyZXEsIHJlcykgPT4ge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCB7IGlkIH0gPSByZXEucGFyYW1zO1xuICAgICAgY29uc3QgYmlsbCA9IGF3YWl0IGRiLnNlbGVjdCh7XG4gICAgICAgIGlkOiBiaWxsczIuaWQsXG4gICAgICAgIGJ1aWxkaW5nSWQ6IGJpbGxzMi5idWlsZGluZ0lkLFxuICAgICAgICBiaWxsTnVtYmVyOiBiaWxsczIuYmlsbE51bWJlcixcbiAgICAgICAgdGl0bGU6IGJpbGxzMi50aXRsZSxcbiAgICAgICAgZGVzY3JpcHRpb246IGJpbGxzMi5kZXNjcmlwdGlvbixcbiAgICAgICAgY2F0ZWdvcnk6IGJpbGxzMi5jYXRlZ29yeSxcbiAgICAgICAgdmVuZG9yOiBiaWxsczIudmVuZG9yLFxuICAgICAgICBwYXltZW50VHlwZTogYmlsbHMyLnBheW1lbnRUeXBlLFxuICAgICAgICBjb3N0czogYmlsbHMyLmNvc3RzLFxuICAgICAgICB0b3RhbEFtb3VudDogYmlsbHMyLnRvdGFsQW1vdW50LFxuICAgICAgICBzdGFydERhdGU6IGJpbGxzMi5zdGFydERhdGUsXG4gICAgICAgIHN0YXR1czogYmlsbHMyLnN0YXR1cyxcbiAgICAgICAgbm90ZXM6IGJpbGxzMi5ub3RlcyxcbiAgICAgICAgY3JlYXRlZEJ5OiBiaWxsczIuY3JlYXRlZEJ5LFxuICAgICAgICBjcmVhdGVkQXQ6IGJpbGxzMi5jcmVhdGVkQXQsXG4gICAgICAgIHVwZGF0ZWRBdDogYmlsbHMyLnVwZGF0ZWRBdFxuICAgICAgfSkuZnJvbShiaWxsczIpLndoZXJlKGVxOShiaWxsczIuaWQsIGlkKSkubGltaXQoMSk7XG4gICAgICBpZiAoYmlsbC5sZW5ndGggPT09IDApIHtcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDA0KS5qc29uKHtcbiAgICAgICAgICBtZXNzYWdlOiBcIkJpbGwgbm90IGZvdW5kXCJcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgICByZXMuanNvbihiaWxsWzBdKTtcbiAgICB9IGNhdGNoIChfZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoXCJcXHUyNzRDIEVycm9yIGZldGNoaW5nIGJpbGw6XCIsIF9lcnJvcik7XG4gICAgICByZXMuc3RhdHVzKDUwMCkuanNvbih7XG4gICAgICAgIG1lc3NhZ2U6IFwiRmFpbGVkIHRvIGZldGNoIGJpbGxcIixcbiAgICAgICAgX2Vycm9yOiBfZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IF9lcnJvci5tZXNzYWdlIDogXCJVbmtub3duIGVycm9yXCJcbiAgICAgIH0pO1xuICAgIH1cbiAgfSk7XG4gIGFwcDIucG9zdChcIi9hcGkvYmlsbHNcIiwgcmVxdWlyZUF1dGgsIGFzeW5jIChyZXEsIHJlcykgPT4ge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCB2YWxpZGF0aW9uID0gY3JlYXRlQmlsbFNjaGVtYS5zYWZlUGFyc2UocmVxLmJvZHkpO1xuICAgICAgaWYgKCF2YWxpZGF0aW9uLnN1Y2Nlc3MpIHtcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHtcbiAgICAgICAgICBtZXNzYWdlOiBcIkludmFsaWQgYmlsbCBkYXRhXCIsXG4gICAgICAgICAgZXJyb3JzOiB2YWxpZGF0aW9uLmVycm9yLmlzc3Vlc1xuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICAgIGNvbnN0IGJpbGxEYXRhID0gdmFsaWRhdGlvbi5kYXRhO1xuICAgICAgY29uc3QgbmV3QmlsbCA9IGF3YWl0IGRiLmluc2VydChiaWxsczIpLnZhbHVlcyh7XG4gICAgICAgIGJ1aWxkaW5nSWQ6IGJpbGxEYXRhLmJ1aWxkaW5nSWQsXG4gICAgICAgIGJpbGxOdW1iZXI6IGBCSUxMLSR7RGF0ZS5ub3coKX1gLFxuICAgICAgICB0aXRsZTogYmlsbERhdGEudGl0bGUsXG4gICAgICAgIGRlc2NyaXB0aW9uOiBiaWxsRGF0YS5kZXNjcmlwdGlvbixcbiAgICAgICAgY2F0ZWdvcnk6IGJpbGxEYXRhLmNhdGVnb3J5LFxuICAgICAgICB2ZW5kb3I6IGJpbGxEYXRhLnZlbmRvcixcbiAgICAgICAgcGF5bWVudFR5cGU6IGJpbGxEYXRhLnBheW1lbnRUeXBlLFxuICAgICAgICBzY2hlZHVsZVBheW1lbnQ6IGJpbGxEYXRhLnNjaGVkdWxlUGF5bWVudCxcbiAgICAgICAgc2NoZWR1bGVDdXN0b206IGJpbGxEYXRhLnNjaGVkdWxlQ3VzdG9tLFxuICAgICAgICBjb3N0czogYmlsbERhdGEuY29zdHMubWFwKChjb3N0KSA9PiBwYXJzZUZsb2F0KGNvc3QpKSxcbiAgICAgICAgdG90YWxBbW91bnQ6IHBhcnNlRmxvYXQoYmlsbERhdGEudG90YWxBbW91bnQpLFxuICAgICAgICBzdGFydERhdGU6IGJpbGxEYXRhLnN0YXJ0RGF0ZSxcbiAgICAgICAgZW5kRGF0ZTogYmlsbERhdGEuZW5kRGF0ZSxcbiAgICAgICAgc3RhdHVzOiBiaWxsRGF0YS5zdGF0dXMsXG4gICAgICAgIG5vdGVzOiBiaWxsRGF0YS5ub3RlcyxcbiAgICAgICAgY3JlYXRlZEJ5OiByZXEudXNlci5pZFxuICAgICAgfSkucmV0dXJuaW5nKCk7XG4gICAgICB0cnkge1xuICAgICAgICBkZWxheWVkVXBkYXRlU2VydmljZS5zY2hlZHVsZUJpbGxVcGRhdGUobmV3QmlsbFswXS5pZCk7XG4gICAgICB9IGNhdGNoIChzY2hlZHVsaW5nRXJyb3IpIHtcbiAgICAgICAgY29uc29sZS53YXJuKFwiXFx1MjZBMFxcdUZFMEYgRmFpbGVkIHRvIHNjaGVkdWxlIGJpbGwgdXBkYXRlOlwiLCBzY2hlZHVsaW5nRXJyb3IpO1xuICAgICAgfVxuICAgICAgcmVzLnN0YXR1cygyMDEpLmpzb24obmV3QmlsbFswXSk7XG4gICAgfSBjYXRjaCAoX2Vycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKFwiXFx1Mjc0QyBFcnJvciBjcmVhdGluZyBiaWxsOlwiLCBfZXJyb3IpO1xuICAgICAgcmVzLnN0YXR1cyg1MDApLmpzb24oe1xuICAgICAgICBtZXNzYWdlOiBcIkZhaWxlZCB0byBjcmVhdGUgYmlsbFwiLFxuICAgICAgICBfZXJyb3I6IF9lcnJvciBpbnN0YW5jZW9mIEVycm9yID8gX2Vycm9yLm1lc3NhZ2UgOiBcIlVua25vd24gZXJyb3JcIlxuICAgICAgfSk7XG4gICAgfVxuICB9KTtcbiAgYXBwMi5wYXRjaChcIi9hcGkvYmlsbHMvOmlkXCIsIHJlcXVpcmVBdXRoLCBhc3luYyAocmVxLCByZXMpID0+IHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgeyBpZCB9ID0gcmVxLnBhcmFtcztcbiAgICAgIGNvbnN0IHZhbGlkYXRpb24gPSB1cGRhdGVCaWxsU2NoZW1hLnNhZmVQYXJzZShyZXEuYm9keSk7XG4gICAgICBpZiAoIXZhbGlkYXRpb24uc3VjY2Vzcykge1xuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oe1xuICAgICAgICAgIG1lc3NhZ2U6IFwiSW52YWxpZCBiaWxsIGRhdGFcIixcbiAgICAgICAgICBlcnJvcnM6IHZhbGlkYXRpb24uZXJyb3IuaXNzdWVzXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgICAgY29uc3QgYmlsbERhdGEgPSB2YWxpZGF0aW9uLmRhdGE7XG4gICAgICBjb25zdCB1cGRhdGVEYXRhID0ge307XG4gICAgICBpZiAoYmlsbERhdGEudGl0bGUpIHtcbiAgICAgICAgdXBkYXRlRGF0YS50aXRsZSA9IGJpbGxEYXRhLnRpdGxlO1xuICAgICAgfVxuICAgICAgaWYgKGJpbGxEYXRhLmRlc2NyaXB0aW9uKSB7XG4gICAgICAgIHVwZGF0ZURhdGEuZGVzY3JpcHRpb24gPSBiaWxsRGF0YS5kZXNjcmlwdGlvbjtcbiAgICAgIH1cbiAgICAgIGlmIChiaWxsRGF0YS5jYXRlZ29yeSkge1xuICAgICAgICB1cGRhdGVEYXRhLmNhdGVnb3J5ID0gYmlsbERhdGEuY2F0ZWdvcnk7XG4gICAgICB9XG4gICAgICBpZiAoYmlsbERhdGEudmVuZG9yKSB7XG4gICAgICAgIHVwZGF0ZURhdGEudmVuZG9yID0gYmlsbERhdGEudmVuZG9yO1xuICAgICAgfVxuICAgICAgaWYgKGJpbGxEYXRhLnBheW1lbnRUeXBlKSB7XG4gICAgICAgIHVwZGF0ZURhdGEucGF5bWVudFR5cGUgPSBiaWxsRGF0YS5wYXltZW50VHlwZTtcbiAgICAgIH1cbiAgICAgIGlmIChiaWxsRGF0YS5jb3N0cykge1xuICAgICAgICB1cGRhdGVEYXRhLmNvc3RzID0gYmlsbERhdGEuY29zdHMubWFwKChjb3N0KSA9PiBwYXJzZUZsb2F0KGNvc3QpKTtcbiAgICAgIH1cbiAgICAgIGlmIChiaWxsRGF0YS50b3RhbEFtb3VudCkge1xuICAgICAgICB1cGRhdGVEYXRhLnRvdGFsQW1vdW50ID0gcGFyc2VGbG9hdChiaWxsRGF0YS50b3RhbEFtb3VudCk7XG4gICAgICB9XG4gICAgICBpZiAoYmlsbERhdGEuc3RhcnREYXRlKSB7XG4gICAgICAgIHVwZGF0ZURhdGEuc3RhcnREYXRlID0gYmlsbERhdGEuc3RhcnREYXRlO1xuICAgICAgfVxuICAgICAgaWYgKGJpbGxEYXRhLmVuZERhdGUpIHtcbiAgICAgICAgdXBkYXRlRGF0YS5lbmREYXRlID0gYmlsbERhdGEuZW5kRGF0ZTtcbiAgICAgIH1cbiAgICAgIGlmIChiaWxsRGF0YS5zdGF0dXMpIHtcbiAgICAgICAgdXBkYXRlRGF0YS5zdGF0dXMgPSBiaWxsRGF0YS5zdGF0dXM7XG4gICAgICB9XG4gICAgICBpZiAoYmlsbERhdGEubm90ZXMpIHtcbiAgICAgICAgdXBkYXRlRGF0YS5ub3RlcyA9IGJpbGxEYXRhLm5vdGVzO1xuICAgICAgfVxuICAgICAgdXBkYXRlRGF0YS51cGRhdGVkQXQgPSAvKiBAX19QVVJFX18gKi8gbmV3IERhdGUoKTtcbiAgICAgIGNvbnN0IHVwZGF0ZWRCaWxsID0gYXdhaXQgZGIudXBkYXRlKGJpbGxzMikuc2V0KHVwZGF0ZURhdGEpLndoZXJlKGVxOShiaWxsczIuaWQsIGlkKSkucmV0dXJuaW5nKCk7XG4gICAgICBpZiAodXBkYXRlZEJpbGwubGVuZ3RoID09PSAwKSB7XG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwNCkuanNvbih7XG4gICAgICAgICAgbWVzc2FnZTogXCJCaWxsIG5vdCBmb3VuZFwiXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgICAgcmVzLmpzb24odXBkYXRlZEJpbGxbMF0pO1xuICAgIH0gY2F0Y2ggKF9lcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcihcIlxcdTI3NEMgRXJyb3IgdXBkYXRpbmcgYmlsbCAoUEFUQ0gpOlwiLCBfZXJyb3IpO1xuICAgICAgcmVzLnN0YXR1cyg1MDApLmpzb24oe1xuICAgICAgICBtZXNzYWdlOiBcIkZhaWxlZCB0byB1cGRhdGUgYmlsbFwiLFxuICAgICAgICBfZXJyb3I6IF9lcnJvciBpbnN0YW5jZW9mIEVycm9yID8gX2Vycm9yLm1lc3NhZ2UgOiBcIlVua25vd24gZXJyb3JcIlxuICAgICAgfSk7XG4gICAgfVxuICB9KTtcbiAgYXBwMi5wdXQoXCIvYXBpL2JpbGxzLzppZFwiLCByZXF1aXJlQXV0aCwgYXN5bmMgKHJlcSwgcmVzKSA9PiB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHsgaWQgfSA9IHJlcS5wYXJhbXM7XG4gICAgICBjb25zdCB2YWxpZGF0aW9uID0gdXBkYXRlQmlsbFNjaGVtYS5zYWZlUGFyc2UocmVxLmJvZHkpO1xuICAgICAgaWYgKCF2YWxpZGF0aW9uLnN1Y2Nlc3MpIHtcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHtcbiAgICAgICAgICBtZXNzYWdlOiBcIkludmFsaWQgYmlsbCBkYXRhXCIsXG4gICAgICAgICAgZXJyb3JzOiB2YWxpZGF0aW9uLmVycm9yLmlzc3Vlc1xuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICAgIGNvbnN0IGJpbGxEYXRhID0gdmFsaWRhdGlvbi5kYXRhO1xuICAgICAgY29uc3QgdXBkYXRlRGF0YSA9IHt9O1xuICAgICAgaWYgKGJpbGxEYXRhLnRpdGxlKSB7XG4gICAgICAgIHVwZGF0ZURhdGEudGl0bGUgPSBiaWxsRGF0YS50aXRsZTtcbiAgICAgIH1cbiAgICAgIGlmIChiaWxsRGF0YS5kZXNjcmlwdGlvbikge1xuICAgICAgICB1cGRhdGVEYXRhLmRlc2NyaXB0aW9uID0gYmlsbERhdGEuZGVzY3JpcHRpb247XG4gICAgICB9XG4gICAgICBpZiAoYmlsbERhdGEuY2F0ZWdvcnkpIHtcbiAgICAgICAgdXBkYXRlRGF0YS5jYXRlZ29yeSA9IGJpbGxEYXRhLmNhdGVnb3J5O1xuICAgICAgfVxuICAgICAgaWYgKGJpbGxEYXRhLnZlbmRvcikge1xuICAgICAgICB1cGRhdGVEYXRhLnZlbmRvciA9IGJpbGxEYXRhLnZlbmRvcjtcbiAgICAgIH1cbiAgICAgIGlmIChiaWxsRGF0YS5wYXltZW50VHlwZSkge1xuICAgICAgICB1cGRhdGVEYXRhLnBheW1lbnRUeXBlID0gYmlsbERhdGEucGF5bWVudFR5cGU7XG4gICAgICB9XG4gICAgICBpZiAoYmlsbERhdGEuY29zdHMpIHtcbiAgICAgICAgdXBkYXRlRGF0YS5jb3N0cyA9IGJpbGxEYXRhLmNvc3RzLm1hcCgoY29zdCkgPT4gcGFyc2VGbG9hdChjb3N0KSk7XG4gICAgICB9XG4gICAgICBpZiAoYmlsbERhdGEudG90YWxBbW91bnQpIHtcbiAgICAgICAgdXBkYXRlRGF0YS50b3RhbEFtb3VudCA9IHBhcnNlRmxvYXQoYmlsbERhdGEudG90YWxBbW91bnQpO1xuICAgICAgfVxuICAgICAgaWYgKGJpbGxEYXRhLnN0YXJ0RGF0ZSkge1xuICAgICAgICB1cGRhdGVEYXRhLnN0YXJ0RGF0ZSA9IGJpbGxEYXRhLnN0YXJ0RGF0ZTtcbiAgICAgIH1cbiAgICAgIGlmIChiaWxsRGF0YS5zdGF0dXMpIHtcbiAgICAgICAgdXBkYXRlRGF0YS5zdGF0dXMgPSBiaWxsRGF0YS5zdGF0dXM7XG4gICAgICB9XG4gICAgICBpZiAoYmlsbERhdGEubm90ZXMpIHtcbiAgICAgICAgdXBkYXRlRGF0YS5ub3RlcyA9IGJpbGxEYXRhLm5vdGVzO1xuICAgICAgfVxuICAgICAgdXBkYXRlRGF0YS51cGRhdGVkQXQgPSAvKiBAX19QVVJFX18gKi8gbmV3IERhdGUoKTtcbiAgICAgIGNvbnN0IHVwZGF0ZWRCaWxsID0gYXdhaXQgZGIudXBkYXRlKGJpbGxzMikuc2V0KHVwZGF0ZURhdGEpLndoZXJlKGVxOShiaWxsczIuaWQsIGlkKSkucmV0dXJuaW5nKCk7XG4gICAgICBpZiAodXBkYXRlZEJpbGwubGVuZ3RoID09PSAwKSB7XG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwNCkuanNvbih7XG4gICAgICAgICAgbWVzc2FnZTogXCJCaWxsIG5vdCBmb3VuZFwiXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgICAgdHJ5IHtcbiAgICAgICAgZGVsYXllZFVwZGF0ZVNlcnZpY2Uuc2NoZWR1bGVCaWxsVXBkYXRlKGlkKTtcbiAgICAgIH0gY2F0Y2ggKHNjaGVkdWxpbmdFcnJvcikge1xuICAgICAgICBjb25zb2xlLndhcm4oXCJcXHUyNkEwXFx1RkUwRiBGYWlsZWQgdG8gc2NoZWR1bGUgYmlsbCB1cGRhdGU6XCIsIHNjaGVkdWxpbmdFcnJvcik7XG4gICAgICB9XG4gICAgICByZXMuanNvbih1cGRhdGVkQmlsbFswXSk7XG4gICAgfSBjYXRjaCAoX2Vycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKFwiXFx1Mjc0QyBFcnJvciB1cGRhdGluZyBiaWxsIChQVVQpOlwiLCBfZXJyb3IpO1xuICAgICAgcmVzLnN0YXR1cyg1MDApLmpzb24oe1xuICAgICAgICBtZXNzYWdlOiBcIkZhaWxlZCB0byB1cGRhdGUgYmlsbFwiLFxuICAgICAgICBfZXJyb3I6IF9lcnJvciBpbnN0YW5jZW9mIEVycm9yID8gX2Vycm9yLm1lc3NhZ2UgOiBcIlVua25vd24gZXJyb3JcIlxuICAgICAgfSk7XG4gICAgfVxuICB9KTtcbiAgYXBwMi5kZWxldGUoXCIvYXBpL2JpbGxzLzppZFwiLCByZXF1aXJlQXV0aCwgYXN5bmMgKHJlcSwgcmVzKSA9PiB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHsgaWQgfSA9IHJlcS5wYXJhbXM7XG4gICAgICBjb25zdCBkZWxldGVkQmlsbCA9IGF3YWl0IGRiLmRlbGV0ZShiaWxsczIpLndoZXJlKGVxOShiaWxsczIuaWQsIGlkKSkucmV0dXJuaW5nKCk7XG4gICAgICBpZiAoZGVsZXRlZEJpbGwubGVuZ3RoID09PSAwKSB7XG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwNCkuanNvbih7XG4gICAgICAgICAgbWVzc2FnZTogXCJCaWxsIG5vdCBmb3VuZFwiXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgICAgcmVzLmpzb24oe1xuICAgICAgICBtZXNzYWdlOiBcIkJpbGwgZGVsZXRlZCBzdWNjZXNzZnVsbHlcIixcbiAgICAgICAgYmlsbDogZGVsZXRlZEJpbGxbMF1cbiAgICAgIH0pO1xuICAgIH0gY2F0Y2ggKF9lcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcihcIlxcdTI3NEMgRXJyb3IgZGVsZXRpbmcgYmlsbDpcIiwgX2Vycm9yKTtcbiAgICAgIHJlcy5zdGF0dXMoNTAwKS5qc29uKHtcbiAgICAgICAgbWVzc2FnZTogXCJGYWlsZWQgdG8gZGVsZXRlIGJpbGxcIixcbiAgICAgICAgX2Vycm9yOiBfZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IF9lcnJvci5tZXNzYWdlIDogXCJVbmtub3duIGVycm9yXCJcbiAgICAgIH0pO1xuICAgIH1cbiAgfSk7XG4gIGFwcDIucG9zdChcbiAgICBcIi9hcGkvYmlsbHMvOmlkL3VwbG9hZC1kb2N1bWVudFwiLFxuICAgIHJlcXVpcmVBdXRoLFxuICAgIHVwbG9hZDMuc2luZ2xlKFwiZG9jdW1lbnRcIiksXG4gICAgYXN5bmMgKHJlcSwgcmVzKSA9PiB7XG4gICAgICB0cnkge1xuICAgICAgICBjb25zdCB7IGlkIH0gPSByZXEucGFyYW1zO1xuICAgICAgICBpZiAoIXJlcS5maWxlKSB7XG4gICAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgbWVzc2FnZTogXCJObyBmaWxlIHVwbG9hZGVkXCIgfSk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3Qgb3JnYW5pemF0aW9uczMgPSBhd2FpdCBzdG9yYWdlLmdldFVzZXJPcmdhbml6YXRpb25zKHJlcS51c2VyLmlkKTtcbiAgICAgICAgY29uc3Qgb3JnYW5pemF0aW9uSWQgPSBvcmdhbml6YXRpb25zMy5sZW5ndGggPiAwID8gb3JnYW5pemF0aW9uczNbMF0ub3JnYW5pemF0aW9uSWQgOiBcImRlZmF1bHRcIjtcbiAgICAgICAgY29uc3QgZG9jdW1lbnRQYXRoID0gYHByb2Rfb3JnXyR7b3JnYW5pemF0aW9uSWR9LyR7cmVxLmZpbGUub3JpZ2luYWxuYW1lfWA7XG4gICAgICAgIGxldCBhbmFseXNpc1Jlc3VsdCA9IG51bGw7XG4gICAgICAgIGlmIChyZXEuZmlsZS5taW1ldHlwZS5zdGFydHNXaXRoKFwiaW1hZ2UvXCIpKSB7XG4gICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGFuYWx5c2lzUmVzdWx0ID0gYXdhaXQgZ2VtaW5pQmlsbEFuYWx5emVyLmFuYWx5emVCaWxsRG9jdW1lbnQocmVxLmZpbGUucGF0aCk7XG4gICAgICAgICAgfSBjYXRjaCAoYWlFcnJvcikge1xuICAgICAgICAgICAgY29uc29sZS53YXJuKFwiXFx1MjZBMFxcdUZFMEYgQUkgYW5hbHlzaXMgZmFpbGVkLCBjb250aW51aW5nIHdpdGhvdXQgYW5hbHlzaXM6XCIsIGFpRXJyb3IpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBjb25zdCB1cGRhdGVEYXRhID0ge1xuICAgICAgICAgIGRvY3VtZW50UGF0aCxcbiAgICAgICAgICBkb2N1bWVudE5hbWU6IHJlcS5maWxlLm9yaWdpbmFsbmFtZSxcbiAgICAgICAgICBpc0FpQW5hbHl6ZWQ6ICEhYW5hbHlzaXNSZXN1bHQsXG4gICAgICAgICAgYWlBbmFseXNpc0RhdGE6IGFuYWx5c2lzUmVzdWx0LFxuICAgICAgICAgIHVwZGF0ZWRBdDogLyogQF9fUFVSRV9fICovIG5ldyBEYXRlKClcbiAgICAgICAgfTtcbiAgICAgICAgY29uc3QgdXBkYXRlZEJpbGwgPSBhd2FpdCBkYi51cGRhdGUoYmlsbHMyKS5zZXQodXBkYXRlRGF0YSkud2hlcmUoZXE5KGJpbGxzMi5pZCwgaWQpKS5yZXR1cm5pbmcoKTtcbiAgICAgICAgZnM1LnVubGlua1N5bmMocmVxLmZpbGUucGF0aCk7XG4gICAgICAgIHJlcy5qc29uKHtcbiAgICAgICAgICBtZXNzYWdlOiBcIkRvY3VtZW50IHVwbG9hZGVkIGFuZCBhbmFseXplZCBzdWNjZXNzZnVsbHlcIixcbiAgICAgICAgICBiaWxsOiB1cGRhdGVkQmlsbFswXSxcbiAgICAgICAgICBhbmFseXNpc1Jlc3VsdFxuICAgICAgICB9KTtcbiAgICAgIH0gY2F0Y2ggKF9lcnJvcikge1xuICAgICAgICBjb25zb2xlLmVycm9yKFwiXFx1Mjc0QyBFcnJvciB1cGxvYWRpbmcgZG9jdW1lbnQ6XCIsIF9lcnJvcik7XG4gICAgICAgIGlmIChyZXEuZmlsZT8ucGF0aCkge1xuICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICBmczUudW5saW5rU3luYyhyZXEuZmlsZS5wYXRoKTtcbiAgICAgICAgICB9IGNhdGNoIChfX19jbGVhbnVwRXJyb3IpIHtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciBjbGVhbmluZyB1cCB0ZW1wIGZpbGU6XCIsIF9fX2NsZWFudXBFcnJvcik7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJlcy5zdGF0dXMoNTAwKS5qc29uKHtcbiAgICAgICAgICBtZXNzYWdlOiBcIkZhaWxlZCB0byB1cGxvYWQgZG9jdW1lbnRcIixcbiAgICAgICAgICBfZXJyb3I6IF9lcnJvciBpbnN0YW5jZW9mIEVycm9yID8gX2Vycm9yLm1lc3NhZ2UgOiBcIlVua25vd24gZXJyb3JcIlxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9XG4gICk7XG4gIGFwcDIuZ2V0KFwiL2FwaS9iaWxscy86aWQvZG93bmxvYWQtZG9jdW1lbnRcIiwgcmVxdWlyZUF1dGgsIGFzeW5jIChyZXEsIHJlcykgPT4ge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCB7IGlkIH0gPSByZXEucGFyYW1zO1xuICAgICAgY29uc3QgYmlsbCA9IGF3YWl0IGRiLnNlbGVjdCgpLmZyb20oYmlsbHMyKS53aGVyZShlcTkoYmlsbHMyLmlkLCBpZCkpLmxpbWl0KDEpO1xuICAgICAgaWYgKGJpbGwubGVuZ3RoID09PSAwKSB7XG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwNCkuanNvbih7IG1lc3NhZ2U6IFwiQmlsbCBub3QgZm91bmRcIiB9KTtcbiAgICAgIH1cbiAgICAgIGNvbnN0IGJpbGxEYXRhID0gYmlsbFswXTtcbiAgICAgIGlmICghYmlsbERhdGEuZG9jdW1lbnRQYXRoIHx8ICFiaWxsRGF0YS5kb2N1bWVudE5hbWUpIHtcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDA0KS5qc29uKHsgbWVzc2FnZTogXCJObyBkb2N1bWVudCBhc3NvY2lhdGVkIHdpdGggdGhpcyBiaWxsXCIgfSk7XG4gICAgICB9XG4gICAgICBjb25zdCBvcmdhbml6YXRpb25zMyA9IGF3YWl0IHN0b3JhZ2UuZ2V0VXNlck9yZ2FuaXphdGlvbnMocmVxLnVzZXIuaWQpO1xuICAgICAgY29uc3Qgb3JnYW5pemF0aW9uSWQgPSBvcmdhbml6YXRpb25zMy5sZW5ndGggPiAwID8gb3JnYW5pemF0aW9uczNbMF0ub3JnYW5pemF0aW9uSWQgOiBcImRlZmF1bHRcIjtcbiAgICAgIHJlcy5zdGF0dXMoNDA0KS5qc29uKHtcbiAgICAgICAgbWVzc2FnZTogXCJEb2N1bWVudCBkb3dubG9hZCBmdW5jdGlvbmFsaXR5IGhhcyBiZWVuIGRpc2FibGVkXCJcbiAgICAgIH0pO1xuICAgIH0gY2F0Y2ggKF9lcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcihcIlxcdTI3NEMgRXJyb3IgZG93bmxvYWRpbmcgZG9jdW1lbnQ6XCIsIF9lcnJvcik7XG4gICAgICByZXMuc3RhdHVzKDUwMCkuanNvbih7XG4gICAgICAgIG1lc3NhZ2U6IFwiRmFpbGVkIHRvIGdlbmVyYXRlIGRvY3VtZW50IGRvd25sb2FkIFVSTFwiLFxuICAgICAgICBfZXJyb3I6IF9lcnJvciBpbnN0YW5jZW9mIEVycm9yID8gX2Vycm9yLm1lc3NhZ2UgOiBcIlVua25vd24gZXJyb3JcIlxuICAgICAgfSk7XG4gICAgfVxuICB9KTtcbiAgYXBwMi5wb3N0KFwiL2FwaS9iaWxscy86aWQvYXBwbHktYWktYW5hbHlzaXNcIiwgcmVxdWlyZUF1dGgsIGFzeW5jIChyZXEsIHJlcykgPT4ge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCB7IGlkIH0gPSByZXEucGFyYW1zO1xuICAgICAgY29uc3QgYmlsbCA9IGF3YWl0IGRiLnNlbGVjdCgpLmZyb20oYmlsbHMyKS53aGVyZShlcTkoYmlsbHMyLmlkLCBpZCkpLmxpbWl0KDEpO1xuICAgICAgaWYgKGJpbGwubGVuZ3RoID09PSAwKSB7XG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwNCkuanNvbih7IG1lc3NhZ2U6IFwiQmlsbCBub3QgZm91bmRcIiB9KTtcbiAgICAgIH1cbiAgICAgIGNvbnN0IGJpbGxEYXRhID0gYmlsbFswXTtcbiAgICAgIGlmICghYmlsbERhdGEuaXNBaUFuYWx5emVkIHx8ICFiaWxsRGF0YS5haUFuYWx5c2lzRGF0YSkge1xuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oeyBtZXNzYWdlOiBcIk5vIEFJIGFuYWx5c2lzIGRhdGEgYXZhaWxhYmxlIGZvciB0aGlzIGJpbGxcIiB9KTtcbiAgICAgIH1cbiAgICAgIGNvbnN0IGFuYWx5c2lzID0gYmlsbERhdGEuYWlBbmFseXNpc0RhdGE7XG4gICAgICBjb25zdCBzY2hlZHVsZVNpZ25lc3Rpb24gPSBhd2FpdCBnZW1pbmlCaWxsQW5hbHl6ZXIuc3VnZ2VzdFBheW1lbnRTY2hlZHVsZShcbiAgICAgICAgYW5hbHlzaXMuY2F0ZWdvcnksXG4gICAgICAgIHBhcnNlRmxvYXQoYW5hbHlzaXMudG90YWxBbW91bnQpXG4gICAgICApO1xuICAgICAgY29uc3QgdXBkYXRlRGF0YSA9IHtcbiAgICAgICAgdGl0bGU6IGFuYWx5c2lzLnRpdGxlLFxuICAgICAgICB2ZW5kb3I6IGFuYWx5c2lzLnZlbmRvcixcbiAgICAgICAgdG90YWxBbW91bnQ6IHBhcnNlRmxvYXQoYW5hbHlzaXMudG90YWxBbW91bnQpLFxuICAgICAgICBjYXRlZ29yeTogYW5hbHlzaXMuY2F0ZWdvcnksXG4gICAgICAgIGRlc2NyaXB0aW9uOiBhbmFseXNpcy5kZXNjcmlwdGlvbixcbiAgICAgICAgcGF5bWVudFR5cGU6IHNjaGVkdWxlU2lnbmVzdGlvbi5wYXltZW50VHlwZSxcbiAgICAgICAgc2NoZWR1bGVQYXltZW50OiBzY2hlZHVsZVNpZ25lc3Rpb24uc2NoZWR1bGVQYXltZW50LFxuICAgICAgICBjb3N0czogW3BhcnNlRmxvYXQoYW5hbHlzaXMudG90YWxBbW91bnQpXSxcbiAgICAgICAgc3RhcnREYXRlOiBhbmFseXNpcy5pc3N1ZURhdGUgfHwgYW5hbHlzaXMuZHVlRGF0ZSB8fCBiaWxsRGF0YS5zdGFydERhdGUsXG4gICAgICAgIG5vdGVzOiBgQUktYW5hbHl6ZWQgZG9jdW1lbnQuIE9yaWdpbmFsIGJpbGwgbnVtYmVyOiAke2FuYWx5c2lzLmJpbGxOdW1iZXIgfHwgXCJOL0FcIn0uIENvbmZpZGVuY2U6ICR7KGFuYWx5c2lzLmNvbmZpZGVuY2UgKiAxMDApLnRvRml4ZWQoMSl9JS4gJHtzY2hlZHVsZVNpZ25lc3Rpb24ucmVhc29uaW5nfWAsXG4gICAgICAgIHVwZGF0ZWRBdDogLyogQF9fUFVSRV9fICovIG5ldyBEYXRlKClcbiAgICAgIH07XG4gICAgICBjb25zdCB1cGRhdGVkQmlsbCA9IGF3YWl0IGRiLnVwZGF0ZShiaWxsczIpLnNldCh1cGRhdGVEYXRhKS53aGVyZShlcTkoYmlsbHMyLmlkLCBpZCkpLnJldHVybmluZygpO1xuICAgICAgcmVzLmpzb24oe1xuICAgICAgICBtZXNzYWdlOiBcIkFJIGFuYWx5c2lzIGFwcGxpZWQgc3VjY2Vzc2Z1bGx5XCIsXG4gICAgICAgIGJpbGw6IHVwZGF0ZWRCaWxsWzBdLFxuICAgICAgICBhbmFseXNpcyxcbiAgICAgICAgc2NoZWR1bGVTaWduZXN0aW9uXG4gICAgICB9KTtcbiAgICB9IGNhdGNoIChfZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoXCJcXHUyNzRDIEVycm9yIGFwcGx5aW5nIEFJIGFuYWx5c2lzOlwiLCBfZXJyb3IpO1xuICAgICAgcmVzLnN0YXR1cyg1MDApLmpzb24oe1xuICAgICAgICBtZXNzYWdlOiBcIkZhaWxlZCB0byBhcHBseSBBSSBhbmFseXNpc1wiLFxuICAgICAgICBfZXJyb3I6IF9lcnJvciBpbnN0YW5jZW9mIEVycm9yID8gX2Vycm9yLm1lc3NhZ2UgOiBcIlVua25vd24gZXJyb3JcIlxuICAgICAgfSk7XG4gICAgfVxuICB9KTtcbiAgYXBwMi5wb3N0KFwiL2FwaS9iaWxscy86aWQvZ2VuZXJhdGUtZnV0dXJlXCIsIHJlcXVpcmVBdXRoLCBhc3luYyAocmVxLCByZXMpID0+IHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgeyBpZCB9ID0gcmVxLnBhcmFtcztcbiAgICAgIGNvbnN0IGJpbGwgPSBhd2FpdCBkYi5zZWxlY3Qoe1xuICAgICAgICBpZDogYmlsbHMyLmlkLFxuICAgICAgICBidWlsZGluZ0lkOiBiaWxsczIuYnVpbGRpbmdJZCxcbiAgICAgICAgYmlsbE51bWJlcjogYmlsbHMyLmJpbGxOdW1iZXIsXG4gICAgICAgIHRpdGxlOiBiaWxsczIudGl0bGUsXG4gICAgICAgIGRlc2NyaXB0aW9uOiBiaWxsczIuZGVzY3JpcHRpb24sXG4gICAgICAgIGNhdGVnb3J5OiBiaWxsczIuY2F0ZWdvcnksXG4gICAgICAgIHZlbmRvcjogYmlsbHMyLnZlbmRvcixcbiAgICAgICAgcGF5bWVudFR5cGU6IGJpbGxzMi5wYXltZW50VHlwZSxcbiAgICAgICAgY29zdHM6IGJpbGxzMi5jb3N0cyxcbiAgICAgICAgdG90YWxBbW91bnQ6IGJpbGxzMi50b3RhbEFtb3VudCxcbiAgICAgICAgc3RhcnREYXRlOiBiaWxsczIuc3RhcnREYXRlLFxuICAgICAgICBzdGF0dXM6IGJpbGxzMi5zdGF0dXMsXG4gICAgICAgIG5vdGVzOiBiaWxsczIubm90ZXMsXG4gICAgICAgIGNyZWF0ZWRCeTogYmlsbHMyLmNyZWF0ZWRCeSxcbiAgICAgICAgY3JlYXRlZEF0OiBiaWxsczIuY3JlYXRlZEF0LFxuICAgICAgICB1cGRhdGVkQXQ6IGJpbGxzMi51cGRhdGVkQXRcbiAgICAgIH0pLmZyb20oYmlsbHMyKS53aGVyZShlcTkoYmlsbHMyLmlkLCBpZCkpLmxpbWl0KDEpO1xuICAgICAgaWYgKGJpbGwubGVuZ3RoID09PSAwKSB7XG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwNCkuanNvbih7XG4gICAgICAgICAgbWVzc2FnZTogXCJCaWxsIG5vdCBmb3VuZFwiXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgICAgY29uc3QgYnVpbGRpbmcgPSBhd2FpdCBkYi5zZWxlY3Qoe1xuICAgICAgICBpZDogYnVpbGRpbmdzMy5pZCxcbiAgICAgICAgbmFtZTogYnVpbGRpbmdzMy5uYW1lLFxuICAgICAgICBvcmdhbml6YXRpb25JZDogYnVpbGRpbmdzMy5vcmdhbml6YXRpb25JZFxuICAgICAgfSkuZnJvbShidWlsZGluZ3MzKS53aGVyZShlcTkoYnVpbGRpbmdzMy5pZCwgYmlsbFswXS5idWlsZGluZ0lkKSkubGltaXQoMSk7XG4gICAgICBpZiAoYnVpbGRpbmcubGVuZ3RoID09PSAwKSB7XG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMykuanNvbih7XG4gICAgICAgICAgbWVzc2FnZTogXCJBY2Nlc3MgZGVuaWVkIHRvIGdlbmVyYXRlIGZ1dHVyZSBiaWxsc1wiLFxuICAgICAgICAgIGNvZGU6IFwiQUNDRVNTX0RFTklFRFwiXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgICAgaWYgKGJpbGxbMF0ucGF5bWVudFR5cGUgIT09IFwicmVjdXJyZW50XCIpIHtcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHtcbiAgICAgICAgICBtZXNzYWdlOiBcIk9ubHkgcmVjdXJyZW50IGJpbGxzIGNhbiBnZW5lcmF0ZSBmdXR1cmUgaW5zdGFuY2VzXCJcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBiaWxsR2VuZXJhdGlvblNlcnZpY2UuZ2VuZXJhdGVGdXR1cmVCaWxsSW5zdGFuY2VzKGJpbGxbMF0pO1xuICAgICAgcmVzLmpzb24oe1xuICAgICAgICBtZXNzYWdlOiBcIkZ1dHVyZSBiaWxscyBnZW5lcmF0ZWQgc3VjY2Vzc2Z1bGx5XCIsXG4gICAgICAgIGJpbGxzQ3JlYXRlZDogcmVzdWx0LmJpbGxzQ3JlYXRlZCxcbiAgICAgICAgZ2VuZXJhdGVkVW50aWw6IHJlc3VsdC5nZW5lcmF0ZWRVbnRpbFxuICAgICAgfSk7XG4gICAgfSBjYXRjaCAoX2Vycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKFwiXFx1Mjc0QyBFcnJvciBnZW5lcmF0aW5nIGZ1dHVyZSBiaWxsczpcIiwgX2Vycm9yKTtcbiAgICAgIHJlcy5zdGF0dXMoNTAwKS5qc29uKHtcbiAgICAgICAgbWVzc2FnZTogXCJGYWlsZWQgdG8gZ2VuZXJhdGUgZnV0dXJlIGJpbGxzXCIsXG4gICAgICAgIF9lcnJvcjogX2Vycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBfZXJyb3IubWVzc2FnZSA6IFwiVW5rbm93biBlcnJvclwiXG4gICAgICB9KTtcbiAgICB9XG4gIH0pO1xuICBhcHAyLmdldChcIi9hcGkvYmlsbHMvY2F0ZWdvcmllc1wiLCByZXF1aXJlQXV0aCwgYXN5bmMgKHJlcSwgcmVzKSA9PiB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IGNhdGVnb3JpZXMgPSBbXG4gICAgICAgIFwiaW5zdXJhbmNlXCIsXG4gICAgICAgIFwibWFpbnRlbmFuY2VcIixcbiAgICAgICAgXCJzYWxhcnlcIixcbiAgICAgICAgXCJ1dGlsaXRpZXNcIixcbiAgICAgICAgXCJjbGVhbmluZ1wiLFxuICAgICAgICBcInNlY3VyaXR5XCIsXG4gICAgICAgIFwibGFuZHNjYXBpbmdcIixcbiAgICAgICAgXCJwcm9mZXNzaW9uYWxfc2VydmljZXNcIixcbiAgICAgICAgXCJhZG1pbmlzdHJhdGlvblwiLFxuICAgICAgICBcInJlcGFpcnNcIixcbiAgICAgICAgXCJzdXBwbGllc1wiLFxuICAgICAgICBcInRheGVzXCIsXG4gICAgICAgIFwidGVjaG5vbG9neVwiLFxuICAgICAgICBcInJlc2VydmVzXCIsXG4gICAgICAgIFwib3RoZXJcIlxuICAgICAgXTtcbiAgICAgIHJlcy5qc29uKGNhdGVnb3JpZXMpO1xuICAgIH0gY2F0Y2ggKF9lcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcihcIlxcdTI3NEMgRXJyb3IgZmV0Y2hpbmcgYmlsbCBjYXRlZ29yaWVzOlwiLCBfZXJyb3IpO1xuICAgICAgcmVzLnN0YXR1cyg1MDApLmpzb24oe1xuICAgICAgICBtZXNzYWdlOiBcIkZhaWxlZCB0byBmZXRjaCBiaWxsIGNhdGVnb3JpZXNcIixcbiAgICAgICAgX2Vycm9yOiBfZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IF9lcnJvci5tZXNzYWdlIDogXCJVbmtub3duIGVycm9yXCJcbiAgICAgIH0pO1xuICAgIH1cbiAgfSk7XG4gIGFwcDIuZ2V0KFwiL2FwaS9iaWxscy86aWQvZ2VuZXJhdGVkLXN0YXRzXCIsIHJlcXVpcmVBdXRoLCBhc3luYyAocmVxLCByZXMpID0+IHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgeyBpZCB9ID0gcmVxLnBhcmFtcztcbiAgICAgIGNvbnN0IGJpbGwgPSBhd2FpdCBkYi5zZWxlY3Qoe1xuICAgICAgICBpZDogYmlsbHMyLmlkLFxuICAgICAgICBidWlsZGluZ0lkOiBiaWxsczIuYnVpbGRpbmdJZCxcbiAgICAgICAgYmlsbE51bWJlcjogYmlsbHMyLmJpbGxOdW1iZXIsXG4gICAgICAgIHRpdGxlOiBiaWxsczIudGl0bGUsXG4gICAgICAgIGRlc2NyaXB0aW9uOiBiaWxsczIuZGVzY3JpcHRpb24sXG4gICAgICAgIGNhdGVnb3J5OiBiaWxsczIuY2F0ZWdvcnksXG4gICAgICAgIHZlbmRvcjogYmlsbHMyLnZlbmRvcixcbiAgICAgICAgcGF5bWVudFR5cGU6IGJpbGxzMi5wYXltZW50VHlwZSxcbiAgICAgICAgY29zdHM6IGJpbGxzMi5jb3N0cyxcbiAgICAgICAgdG90YWxBbW91bnQ6IGJpbGxzMi50b3RhbEFtb3VudCxcbiAgICAgICAgc3RhcnREYXRlOiBiaWxsczIuc3RhcnREYXRlLFxuICAgICAgICBzdGF0dXM6IGJpbGxzMi5zdGF0dXMsXG4gICAgICAgIG5vdGVzOiBiaWxsczIubm90ZXMsXG4gICAgICAgIGNyZWF0ZWRCeTogYmlsbHMyLmNyZWF0ZWRCeSxcbiAgICAgICAgY3JlYXRlZEF0OiBiaWxsczIuY3JlYXRlZEF0LFxuICAgICAgICB1cGRhdGVkQXQ6IGJpbGxzMi51cGRhdGVkQXRcbiAgICAgIH0pLmZyb20oYmlsbHMyKS53aGVyZShlcTkoYmlsbHMyLmlkLCBpZCkpLmxpbWl0KDEpO1xuICAgICAgaWYgKGJpbGwubGVuZ3RoID09PSAwKSB7XG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwNCkuanNvbih7XG4gICAgICAgICAgbWVzc2FnZTogXCJCaWxsIG5vdCBmb3VuZFwiXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgICAgY29uc3QgZ2VuZXJhdGVkQmlsbHMgPSBhd2FpdCBkYi5zZWxlY3Qoe1xuICAgICAgICBpZDogYmlsbHMyLmlkLFxuICAgICAgICBidWlsZGluZ0lkOiBiaWxsczIuYnVpbGRpbmdJZCxcbiAgICAgICAgYmlsbE51bWJlcjogYmlsbHMyLmJpbGxOdW1iZXIsXG4gICAgICAgIHRpdGxlOiBiaWxsczIudGl0bGUsXG4gICAgICAgIGRlc2NyaXB0aW9uOiBiaWxsczIuZGVzY3JpcHRpb24sXG4gICAgICAgIGNhdGVnb3J5OiBiaWxsczIuY2F0ZWdvcnksXG4gICAgICAgIHZlbmRvcjogYmlsbHMyLnZlbmRvcixcbiAgICAgICAgcGF5bWVudFR5cGU6IGJpbGxzMi5wYXltZW50VHlwZSxcbiAgICAgICAgY29zdHM6IGJpbGxzMi5jb3N0cyxcbiAgICAgICAgdG90YWxBbW91bnQ6IGJpbGxzMi50b3RhbEFtb3VudCxcbiAgICAgICAgc3RhcnREYXRlOiBiaWxsczIuc3RhcnREYXRlLFxuICAgICAgICBzdGF0dXM6IGJpbGxzMi5zdGF0dXMsXG4gICAgICAgIG5vdGVzOiBiaWxsczIubm90ZXMsXG4gICAgICAgIGNyZWF0ZWRCeTogYmlsbHMyLmNyZWF0ZWRCeSxcbiAgICAgICAgY3JlYXRlZEF0OiBiaWxsczIuY3JlYXRlZEF0LFxuICAgICAgICB1cGRhdGVkQXQ6IGJpbGxzMi51cGRhdGVkQXRcbiAgICAgIH0pLmZyb20oYmlsbHMyKS53aGVyZShzcWwxOGBiaWxscy5ub3RlcyBMSUtFICclQXV0by1nZW5lcmF0ZWQgZnJvbTolJ2ApLm9yZGVyQnkoYmlsbHMyLnN0YXJ0RGF0ZSk7XG4gICAgICBjb25zdCBzdGF0cyA9IGdlbmVyYXRlZEJpbGxzLm1hcCgoZ2VuQmlsbCkgPT4gKHtcbiAgICAgICAgaWQ6IGdlbkJpbGwuaWQsXG4gICAgICAgIHRpdGxlOiBnZW5CaWxsLnRpdGxlLFxuICAgICAgICBhbW91bnQ6IGdlbkJpbGwudG90YWxBbW91bnQsXG4gICAgICAgIHN0YXJ0RGF0ZTogZ2VuQmlsbC5zdGFydERhdGUsXG4gICAgICAgIHN0YXR1czogZ2VuQmlsbC5zdGF0dXMsXG4gICAgICAgIGJpbGxOdW1iZXI6IGdlbkJpbGwuYmlsbE51bWJlclxuICAgICAgfSkpO1xuICAgICAgcmVzLmpzb24oe1xuICAgICAgICBwYXJlbnRCaWxsOiBiaWxsWzBdLFxuICAgICAgICBnZW5lcmF0ZWRCaWxsczogc3RhdHNcbiAgICAgIH0pO1xuICAgIH0gY2F0Y2ggKF9lcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcihcIlxcdTI3NEMgRXJyb3IgZ2V0dGluZyBnZW5lcmF0ZWQgYmlsbHMgc3RhdGlzdGljczpcIiwgX2Vycm9yKTtcbiAgICAgIHJlcy5zdGF0dXMoNTAwKS5qc29uKHtcbiAgICAgICAgbWVzc2FnZTogXCJGYWlsZWQgdG8gZ2V0IGdlbmVyYXRlZCBiaWxscyBzdGF0aXN0aWNzXCIsXG4gICAgICAgIF9lcnJvcjogX2Vycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBfZXJyb3IubWVzc2FnZSA6IFwiVW5rbm93biBlcnJvclwiXG4gICAgICB9KTtcbiAgICB9XG4gIH0pO1xufVxuXG4vLyBzZXJ2ZXIvYXBpL3Jlc2lkZW5jZXMudHNcbmluaXRfZGIoKTtcbmluaXRfc2NoZW1hKCk7XG5pbXBvcnQgeyBlcSBhcyBlcTExLCBhbmQgYXMgYW5kMTEsIGluQXJyYXkgYXMgaW5BcnJheTcsIHNxbCBhcyBzcWwyMCB9IGZyb20gXCJkcml6emxlLW9ybVwiO1xuXG4vLyBzZXJ2ZXIvYXV0aC9pbnZpdGF0aW9uLXJiYWMudHNcbmluaXRfc2NoZW1hKCk7XG5pbXBvcnQgeyBlcSBhcyBlcTEwLCBhbmQgYXMgYW5kMTAsIGd0ZSBhcyBndGU0LCBzcWwgYXMgc3FsMTkgfSBmcm9tIFwiZHJpenpsZS1vcm1cIjtcbmltcG9ydCB7IG5lb25Db25maWcgfSBmcm9tIFwiQG5lb25kYXRhYmFzZS9zZXJ2ZXJsZXNzXCI7XG5pbml0X2RiKCk7XG5pbXBvcnQgd3MgZnJvbSBcIndzXCI7XG5pZiAodHlwZW9mIG5lb25Db25maWcgIT09IFwidW5kZWZpbmVkXCIgJiYgbmVvbkNvbmZpZykge1xuICBuZW9uQ29uZmlnLndlYlNvY2tldENvbnN0cnVjdG9yID0gd3M7XG59XG5pZiAoIXByb2Nlc3MuZW52LkRBVEFCQVNFX1VSTCkge1xuICB0aHJvdyBuZXcgRXJyb3IoXCJEQVRBQkFTRV9VUkwgbXVzdCBiZSBzZXQuIERpZCB5b3UgZm9yZ2V0IHRvIHByb3Zpc2lvbiBhIGRhdGFiYXNlP1wiKTtcbn1cbnZhciBJbnZpdGF0aW9uU2VjdXJpdHlNb25pdG9yID0gY2xhc3Mge1xuICBzdGF0aWMge1xuICAgIHRoaXMuYWxlcnRDYWxsYmFja3MgPSBbXTtcbiAgfVxuICAvKipcbiAgICogUmVnaXN0ZXIgY2FsbGJhY2sgZm9yIHNlY3VyaXR5IGFsZXJ0cy5cbiAgICogQHBhcmFtIGNhbGxiYWNrXG4gICAqL1xuICBzdGF0aWMgb25BbGVydChjYWxsYmFjaykge1xuICAgIHRoaXMuYWxlcnRDYWxsYmFja3MucHVzaChjYWxsYmFjayk7XG4gIH1cbiAgLyoqXG4gICAqIFRyaWdnZXIgYSBzZWN1cml0eSBhbGVydC5cbiAgICogQHBhcmFtIGFsZXJ0XG4gICAqL1xuICBzdGF0aWMgYXN5bmMgdHJpZ2dlckFsZXJ0KGFsZXJ0KSB7XG4gICAgY29uc29sZS5sb2coXCJcXHV7MUY2QTh9IFNlY3VyaXR5IEFsZXJ0OlwiLCB7XG4gICAgICBkZXNjcmlwdGlvbjogYWxlcnQuZGVzY3JpcHRpb24sXG4gICAgICB1c2VySWQ6IGFsZXJ0LnVzZXJJZCxcbiAgICAgIGlwQWRkcmVzczogYWxlcnQuaXBBZGRyZXNzLFxuICAgICAgbWV0YWRhdGE6IGFsZXJ0Lm1ldGFkYXRhXG4gICAgfSk7XG4gICAgdGhpcy5hbGVydENhbGxiYWNrcy5mb3JFYWNoKChjYWxsYmFjaykgPT4ge1xuICAgICAgdHJ5IHtcbiAgICAgICAgY2FsbGJhY2soYWxlcnQpO1xuICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcihcIlxcdTI3NEMgRXJyb3IgaW4gc2VjdXJpdHkgYWxlcnQgY2FsbGJhY2s6XCIsIGVycm9yKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgICB0cnkge1xuICAgICAgYXdhaXQgZGIuaW5zZXJ0KGludml0YXRpb25BdWRpdExvZykudmFsdWVzKHtcbiAgICAgICAgaW52aXRhdGlvbklkOiBhbGVydC5tZXRhZGF0YT8uaW52aXRhdGlvbklkIHx8IG51bGwsXG4gICAgICAgIGFjdGlvbjogXCJzZWN1cml0eV9hbGVydFwiLFxuICAgICAgICBwZXJmb3JtZWRCeTogYWxlcnQudXNlcklkIHx8IG51bGwsXG4gICAgICAgIGlwQWRkcmVzczogYWxlcnQuaXBBZGRyZXNzLFxuICAgICAgICB1c2VyQWdlbnQ6IGFsZXJ0Lm1ldGFkYXRhPy51c2VyQWdlbnQsXG4gICAgICAgIGRldGFpbHM6IHtcbiAgICAgICAgICBhbGVydExldmVsOiBhbGVydC5sZXZlbCxcbiAgICAgICAgICBhbGVydFR5cGU6IGFsZXJ0LnR5cGUsXG4gICAgICAgICAgZGVzY3JpcHRpb246IGFsZXJ0LmRlc2NyaXB0aW9uLFxuICAgICAgICAgIG1ldGFkYXRhOiBhbGVydC5tZXRhZGF0YVxuICAgICAgICB9LFxuICAgICAgICBwcmV2aW91c1N0YXR1czogbnVsbCxcbiAgICAgICAgbmV3U3RhdHVzOiBudWxsXG4gICAgICB9KTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcihcIlxcdTI3NEMgRXJyb3IgbG9nZ2luZyBzZWN1cml0eSBhbGVydCB0byBkYXRhYmFzZTpcIiwgZXJyb3IpO1xuICAgIH1cbiAgfVxuICAvKipcbiAgICogTW9uaXRvciBpbnZpdGF0aW9uIGFjY2VzcyBwYXR0ZXJucyBmb3Igc3VzcGljaW91cyBhY3Rpdml0eS5cbiAgICogQHBhcmFtIHVzZXJJZFxuICAgKiBAcGFyYW0gYWN0aW9uXG4gICAqIEBwYXJhbSBpcEFkZHJlc3NcbiAgICogQHBhcmFtIHVzZXJBZ2VudFxuICAgKiBAcGFyYW0gbWV0YWRhdGFcbiAgICovXG4gIHN0YXRpYyBhc3luYyBtb25pdG9ySW52aXRhdGlvbkFjY2Vzcyh1c2VySWQsIGFjdGlvbiwgaXBBZGRyZXNzLCB1c2VyQWdlbnQsIG1ldGFkYXRhKSB7XG4gICAgY29uc3Qga2V5ID0gYCR7dXNlcklkfToke2FjdGlvbn1gO1xuICAgIGNvbnN0IG5vdyA9IERhdGUubm93KCk7XG4gICAgY29uc3Qgd2luZG93U3RhcnQgPSBub3cgLSA1ICogNjAgKiAxZTM7XG4gICAgY29uc3QgcmVjZW50QWN0aW9ucyA9IGF3YWl0IGRiLnNlbGVjdCh7IGNvdW50OiBzcWwxOWBjb3VudCgqKWAgfSkuZnJvbShpbnZpdGF0aW9uQXVkaXRMb2cpLndoZXJlKFxuICAgICAgYW5kMTAoXG4gICAgICAgIGVxMTAoaW52aXRhdGlvbkF1ZGl0TG9nLnBlcmZvcm1lZEJ5LCB1c2VySWQpLFxuICAgICAgICBlcTEwKGludml0YXRpb25BdWRpdExvZy5hY3Rpb24sIGFjdGlvbiksXG4gICAgICAgIGd0ZTQoaW52aXRhdGlvbkF1ZGl0TG9nLmNyZWF0ZWRBdCwgbmV3IERhdGUod2luZG93U3RhcnQpKVxuICAgICAgKVxuICAgICk7XG4gICAgY29uc3QgYWN0aW9uQ291bnQgPSByZWNlbnRBY3Rpb25zWzBdPy5jb3VudCB8fCAwO1xuICAgIGlmIChhY3Rpb25Db3VudCA+IDEwKSB7XG4gICAgICBhd2FpdCB0aGlzLnRyaWdnZXJBbGVydCh7XG4gICAgICAgIGxldmVsOiBcImhpZ2hcIiAvKiBISUdIICovLFxuICAgICAgICB0eXBlOiBcImV4Y2Vzc2l2ZV9pbnZpdGF0aW9uX2FjdGlvbnNcIixcbiAgICAgICAgZGVzY3JpcHRpb246IGBVc2VyICR7dXNlcklkfSBwZXJmb3JtZWQgJHthY3Rpb25Db3VudH0gJHthY3Rpb259IGFjdGlvbnMgaW4gNSBtaW51dGVzYCxcbiAgICAgICAgdXNlcklkLFxuICAgICAgICBpcEFkZHJlc3MsXG4gICAgICAgIG1ldGFkYXRhOiB7IGFjdGlvbiwgY291bnQ6IGFjdGlvbkNvdW50LCB1c2VyQWdlbnQsIC4uLm1ldGFkYXRhIH1cbiAgICAgIH0pO1xuICAgIH1cbiAgICBpZiAoYWN0aW9uID09PSBcInZhbGlkYXRpb25fZmFpbGVkXCIgJiYgYWN0aW9uQ291bnQgPiA1KSB7XG4gICAgICBhd2FpdCB0aGlzLnRyaWdnZXJBbGVydCh7XG4gICAgICAgIGxldmVsOiBcIm1lZGl1bVwiIC8qIE1FRElVTSAqLyxcbiAgICAgICAgdHlwZTogXCJtdWx0aXBsZV92YWxpZGF0aW9uX2ZhaWx1cmVzXCIsXG4gICAgICAgIGRlc2NyaXB0aW9uOiBgVXNlciAke3VzZXJJZH0gaGFkICR7YWN0aW9uQ291bnR9IGZhaWxlZCB0b2tlbiB2YWxpZGF0aW9uc2AsXG4gICAgICAgIHVzZXJJZCxcbiAgICAgICAgaXBBZGRyZXNzLFxuICAgICAgICBtZXRhZGF0YTogeyBhY3Rpb24sIGNvdW50OiBhY3Rpb25Db3VudCwgdXNlckFnZW50LCAuLi5tZXRhZGF0YSB9XG4gICAgICB9KTtcbiAgICB9XG4gICAgaWYgKGlwQWRkcmVzcykge1xuICAgICAgY29uc3QgaXBBY3Rpb25zID0gYXdhaXQgZGIuc2VsZWN0KHsgY291bnQ6IHNxbDE5YGNvdW50KCopYCB9KS5mcm9tKGludml0YXRpb25BdWRpdExvZykud2hlcmUoXG4gICAgICAgIGFuZDEwKFxuICAgICAgICAgIGVxMTAoaW52aXRhdGlvbkF1ZGl0TG9nLmlwQWRkcmVzcywgaXBBZGRyZXNzKSxcbiAgICAgICAgICBlcTEwKGludml0YXRpb25BdWRpdExvZy5hY3Rpb24sIGFjdGlvbiksXG4gICAgICAgICAgZ3RlNChpbnZpdGF0aW9uQXVkaXRMb2cuY3JlYXRlZEF0LCBuZXcgRGF0ZSh3aW5kb3dTdGFydCkpXG4gICAgICAgIClcbiAgICAgICk7XG4gICAgICBjb25zdCBpcEFjdGlvbkNvdW50ID0gaXBBY3Rpb25zWzBdPy5jb3VudCB8fCAwO1xuICAgICAgaWYgKGlwQWN0aW9uQ291bnQgPiAyMCkge1xuICAgICAgICBhd2FpdCB0aGlzLnRyaWdnZXJBbGVydCh7XG4gICAgICAgICAgbGV2ZWw6IFwiY3JpdGljYWxcIiAvKiBDUklUSUNBTCAqLyxcbiAgICAgICAgICB0eXBlOiBcImlwX2Jhc2VkX2F0dGFja1wiLFxuICAgICAgICAgIGRlc2NyaXB0aW9uOiBgSVAgJHtpcEFkZHJlc3N9IHBlcmZvcm1lZCAke2lwQWN0aW9uQ291bnR9ICR7YWN0aW9ufSBhY3Rpb25zIGluIDUgbWludXRlc2AsXG4gICAgICAgICAgaXBBZGRyZXNzLFxuICAgICAgICAgIG1ldGFkYXRhOiB7IGFjdGlvbiwgY291bnQ6IGlwQWN0aW9uQ291bnQsIHVzZXJBZ2VudCwgLi4ubWV0YWRhdGEgfVxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9XG4gIH1cbn07XG5JbnZpdGF0aW9uU2VjdXJpdHlNb25pdG9yLm9uQWxlcnQoKGFsZXJ0KSA9PiB7XG59KTtcblxuLy8gc2VydmVyL2FwaS9yZXNpZGVuY2VzLnRzXG5mdW5jdGlvbiByZWdpc3RlclJlc2lkZW5jZVJvdXRlcyhhcHAyKSB7XG4gIGFwcDIuZ2V0KFwiL2FwaS91c2VyL3Jlc2lkZW5jZXNcIiwgcmVxdWlyZUF1dGgsIGFzeW5jIChyZXEsIHJlcykgPT4ge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCB1c2VyID0gcmVxLnVzZXI7XG4gICAgICBjb25zdCB1c2VyUmVzaWRlbmNlc0xpc3QgPSBhd2FpdCBkYi5zZWxlY3Qoe1xuICAgICAgICByZXNpZGVuY2VJZDogdXNlclJlc2lkZW5jZXMucmVzaWRlbmNlSWRcbiAgICAgIH0pLmZyb20odXNlclJlc2lkZW5jZXMpLndoZXJlKGFuZDExKGVxMTEodXNlclJlc2lkZW5jZXMudXNlcklkLCB1c2VyLmlkKSwgZXExMSh1c2VyUmVzaWRlbmNlcy5pc0FjdGl2ZSwgdHJ1ZSkpKTtcbiAgICAgIHJlcy5qc29uKHVzZXJSZXNpZGVuY2VzTGlzdCk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoXCJcXHUyNzRDIEVycm9yIGZldGNoaW5nIHVzZXIgcmVzaWRlbmNlczpcIiwgZXJyb3IpO1xuICAgICAgcmVzLnN0YXR1cyg1MDApLmpzb24oeyBtZXNzYWdlOiBcIkZhaWxlZCB0byBmZXRjaCB1c2VyIHJlc2lkZW5jZXNcIiB9KTtcbiAgICB9XG4gIH0pO1xuICBhcHAyLmdldChcbiAgICBcIi9hcGkvcmVzaWRlbmNlcy86cmVzaWRlbmNlSWQvYXNzaWduZWQtdXNlcnNcIixcbiAgICByZXF1aXJlQXV0aCxcbiAgICBhc3luYyAocmVxLCByZXMpID0+IHtcbiAgICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IHsgcmVzaWRlbmNlSWQgfSA9IHJlcS5wYXJhbXM7XG4gICAgICAgIGNvbnN0IGN1cnJlbnRVc2VyID0gcmVxLnVzZXI7XG4gICAgICAgIGNvbnN0IGFzc2lnbmVkVXNlcnMgPSBhd2FpdCBkYi5zZWxlY3Qoe1xuICAgICAgICAgIGlkOiB1c2Vycy5pZCxcbiAgICAgICAgICB1c2VybmFtZTogdXNlcnMudXNlcm5hbWUsXG4gICAgICAgICAgZW1haWw6IHVzZXJzLmVtYWlsLFxuICAgICAgICAgIGZpcnN0TmFtZTogdXNlcnMuZmlyc3ROYW1lLFxuICAgICAgICAgIGxhc3ROYW1lOiB1c2Vycy5sYXN0TmFtZSxcbiAgICAgICAgICBwaG9uZTogdXNlcnMucGhvbmUsXG4gICAgICAgICAgcmVsYXRpb25zaGlwVHlwZTogdXNlclJlc2lkZW5jZXMucmVsYXRpb25zaGlwVHlwZSxcbiAgICAgICAgICBzdGFydERhdGU6IHVzZXJSZXNpZGVuY2VzLnN0YXJ0RGF0ZSxcbiAgICAgICAgICBlbmREYXRlOiB1c2VyUmVzaWRlbmNlcy5lbmREYXRlLFxuICAgICAgICAgIGlzQWN0aXZlOiB1c2VyUmVzaWRlbmNlcy5pc0FjdGl2ZVxuICAgICAgICB9KS5mcm9tKHVzZXJSZXNpZGVuY2VzKS5pbm5lckpvaW4odXNlcnMsIGVxMTEodXNlclJlc2lkZW5jZXMudXNlcklkLCB1c2Vycy5pZCkpLndoZXJlKFxuICAgICAgICAgIGFuZDExKGVxMTEodXNlclJlc2lkZW5jZXMucmVzaWRlbmNlSWQsIHJlc2lkZW5jZUlkKSwgZXExMSh1c2VyUmVzaWRlbmNlcy5pc0FjdGl2ZSwgdHJ1ZSkpXG4gICAgICAgICk7XG4gICAgICAgIHJlcy5qc29uKGFzc2lnbmVkVXNlcnMpO1xuICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcihcIlxcdTI3NEMgRXJyb3IgZmV0Y2hpbmcgYXNzaWduZWQgdXNlcnM6XCIsIGVycm9yKTtcbiAgICAgICAgcmVzLnN0YXR1cyg1MDApLmpzb24oeyBtZXNzYWdlOiBcIkZhaWxlZCB0byBmZXRjaCBhc3NpZ25lZCB1c2Vyc1wiIH0pO1xuICAgICAgfVxuICAgIH1cbiAgKTtcbiAgYXBwMi5wdXQoXG4gICAgXCIvYXBpL3Jlc2lkZW5jZXMvOnJlc2lkZW5jZUlkL2Fzc2lnbmVkLXVzZXJzLzp1c2VySWRcIixcbiAgICByZXF1aXJlQXV0aCxcbiAgICBhc3luYyAocmVxLCByZXMpID0+IHtcbiAgICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IHsgdXNlcklkIH0gPSByZXEucGFyYW1zO1xuICAgICAgICBjb25zdCB7IGZpcnN0TmFtZSwgbGFzdE5hbWUsIGVtYWlsLCBwaG9uZSB9ID0gcmVxLmJvZHk7XG4gICAgICAgIGNvbnN0IGN1cnJlbnRVc2VyID0gcmVxLnVzZXI7XG4gICAgICAgIGF3YWl0IGRiLnVwZGF0ZSh1c2Vycykuc2V0KHtcbiAgICAgICAgICBmaXJzdE5hbWUsXG4gICAgICAgICAgbGFzdE5hbWUsXG4gICAgICAgICAgZW1haWwsXG4gICAgICAgICAgcGhvbmUsXG4gICAgICAgICAgdXBkYXRlZEF0OiAvKiBAX19QVVJFX18gKi8gbmV3IERhdGUoKVxuICAgICAgICB9KS53aGVyZShlcTExKHVzZXJzLmlkLCB1c2VySWQpKTtcbiAgICAgICAgcmVzLmpzb24oeyBtZXNzYWdlOiBcIlVzZXIgdXBkYXRlZCBzdWNjZXNzZnVsbHlcIiB9KTtcbiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoXCJcXHUyNzRDIEVycm9yIHVwZGF0aW5nIGFzc2lnbmVkIHVzZXI6XCIsIGVycm9yKTtcbiAgICAgICAgcmVzLnN0YXR1cyg1MDApLmpzb24oeyBtZXNzYWdlOiBcIkZhaWxlZCB0byB1cGRhdGUgYXNzaWduZWQgdXNlclwiIH0pO1xuICAgICAgfVxuICAgIH1cbiAgKTtcbiAgYXBwMi5nZXQoXCIvYXBpL3Jlc2lkZW5jZXNcIiwgcmVxdWlyZUF1dGgsIGFzeW5jIChyZXEsIHJlcykgPT4ge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCB1c2VyID0gcmVxLnVzZXI7XG4gICAgICBjb25zdCB7IHNlYXJjaCwgYnVpbGRpbmdJZCwgZmxvb3IgfSA9IHJlcS5xdWVyeTtcbiAgICAgIGNvbnN0IGNvbmRpdGlvbnMgPSBbZXExMShyZXNpZGVuY2VzLmlzQWN0aXZlLCB0cnVlKV07XG4gICAgICBpZiAoYnVpbGRpbmdJZCkge1xuICAgICAgICBjb25kaXRpb25zLnB1c2goZXExMShyZXNpZGVuY2VzLmJ1aWxkaW5nSWQsIGJ1aWxkaW5nSWQpKTtcbiAgICAgIH1cbiAgICAgIGlmIChmbG9vcikge1xuICAgICAgICBjb25kaXRpb25zLnB1c2goZXExMShyZXNpZGVuY2VzLmZsb29yLCBwYXJzZUludChmbG9vcikpKTtcbiAgICAgIH1cbiAgICAgIGNvbnN0IGFjY2Vzc2libGVCdWlsZGluZ0lkcyA9IC8qIEBfX1BVUkVfXyAqLyBuZXcgU2V0KCk7XG4gICAgICBjb25zdCB1c2VyT3JncyA9IGF3YWl0IGRiLnNlbGVjdCh7XG4gICAgICAgIG9yZ2FuaXphdGlvbklkOiBvcmdhbml6YXRpb25zLmlkLFxuICAgICAgICBvcmdhbml6YXRpb25OYW1lOiBvcmdhbml6YXRpb25zLm5hbWUsXG4gICAgICAgIGNhbkFjY2Vzc0FsbE9yZ2FuaXphdGlvbnM6IHVzZXJPcmdhbml6YXRpb25zLmNhbkFjY2Vzc0FsbE9yZ2FuaXphdGlvbnNcbiAgICAgIH0pLmZyb20ob3JnYW5pemF0aW9ucykuaW5uZXJKb2luKHVzZXJPcmdhbml6YXRpb25zLCBlcTExKHVzZXJPcmdhbml6YXRpb25zLm9yZ2FuaXphdGlvbklkLCBvcmdhbml6YXRpb25zLmlkKSkud2hlcmUoYW5kMTEoZXExMSh1c2VyT3JnYW5pemF0aW9ucy51c2VySWQsIHVzZXIuaWQpLCBlcTExKHVzZXJPcmdhbml6YXRpb25zLmlzQWN0aXZlLCB0cnVlKSkpO1xuICAgICAgY29uc3QgaGFzR2xvYmFsQWNjZXNzID0gdXNlci5yb2xlID09PSBcImFkbWluXCIgfHwgdXNlck9yZ3Muc29tZSgob3JnKSA9PiBvcmcub3JnYW5pemF0aW9uTmFtZSA9PT0gXCJLb3Zlb1wiIHx8IG9yZy5jYW5BY2Nlc3NBbGxPcmdhbml6YXRpb25zKTtcbiAgICAgIGlmIChoYXNHbG9iYWxBY2Nlc3MpIHtcbiAgICAgICAgY29uc29sZS5sb2coXG4gICAgICAgICAgYFxcdXsxRjMxRn0gQWRtaW4gdXNlciBvciB1c2VyIHdpdGggZ2xvYmFsIGFjY2VzcyBkZXRlY3RlZCAtIGdyYW50aW5nIGFjY2VzcyB0byBBTEwgcmVzaWRlbmNlc2BcbiAgICAgICAgKTtcbiAgICAgICAgY29uc3QgYWxsQnVpbGRpbmdzID0gYXdhaXQgZGIuc2VsZWN0KHsgaWQ6IGJ1aWxkaW5ncy5pZCB9KS5mcm9tKGJ1aWxkaW5ncykud2hlcmUoZXExMShidWlsZGluZ3MuaXNBY3RpdmUsIHRydWUpKTtcbiAgICAgICAgYWxsQnVpbGRpbmdzLmZvckVhY2goKGJ1aWxkaW5nKSA9PiB7XG4gICAgICAgICAgYWNjZXNzaWJsZUJ1aWxkaW5nSWRzLmFkZChidWlsZGluZy5pZCk7XG4gICAgICAgIH0pO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgaWYgKHVzZXIucm9sZSA9PT0gXCJhZG1pblwiIHx8IHVzZXIucm9sZSA9PT0gXCJtYW5hZ2VyXCIgfHwgdXNlci5yb2xlID09PSBcImRlbW9fbWFuYWdlclwiKSB7XG4gICAgICAgICAgaWYgKHVzZXJPcmdzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIGNvbnN0IG9yZ0lkcyA9IHVzZXJPcmdzLm1hcCgodW8pID0+IHVvLm9yZ2FuaXphdGlvbklkKTtcbiAgICAgICAgICAgIGNvbnN0IG9yZ0J1aWxkaW5ncyA9IGF3YWl0IGRiLnNlbGVjdCh7IGlkOiBidWlsZGluZ3MuaWQgfSkuZnJvbShidWlsZGluZ3MpLndoZXJlKGFuZDExKGluQXJyYXk3KGJ1aWxkaW5ncy5vcmdhbml6YXRpb25JZCwgb3JnSWRzKSwgZXExMShidWlsZGluZ3MuaXNBY3RpdmUsIHRydWUpKSk7XG4gICAgICAgICAgICBvcmdCdWlsZGluZ3MuZm9yRWFjaCgoYnVpbGRpbmcpID0+IHtcbiAgICAgICAgICAgICAgYWNjZXNzaWJsZUJ1aWxkaW5nSWRzLmFkZChidWlsZGluZy5pZCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgY29uc29sZS5sb2coXG4gICAgICAgICAgYFxcdXsxRjUwRH0gW0FDQ0VTUyBERUJVR10gQ2hlY2tpbmcgcmVzaWRlbmNlIGFjY2VzcyBmb3IgdXNlciAke3VzZXIuaWR9IHdpdGggcm9sZSAke3VzZXIucm9sZX1gXG4gICAgICAgICk7XG4gICAgICAgIGNvbnN0IHVzZXJSZXNpZGVuY2VSZWNvcmRzID0gYXdhaXQgZGIuc2VsZWN0KHtcbiAgICAgICAgICByZXNpZGVuY2VJZDogdXNlclJlc2lkZW5jZXMucmVzaWRlbmNlSWRcbiAgICAgICAgfSkuZnJvbSh1c2VyUmVzaWRlbmNlcykud2hlcmUoYW5kMTEoZXExMSh1c2VyUmVzaWRlbmNlcy51c2VySWQsIHVzZXIuaWQpLCBlcTExKHVzZXJSZXNpZGVuY2VzLmlzQWN0aXZlLCB0cnVlKSkpO1xuICAgICAgICBjb25zb2xlLmxvZyhcbiAgICAgICAgICBgXFx1ezFGNTBEfSBbQUNDRVNTIERFQlVHXSBGb3VuZCAke3VzZXJSZXNpZGVuY2VSZWNvcmRzLmxlbmd0aH0gcmVzaWRlbmNlIHJlY29yZHMgZm9yIHVzZXIgJHt1c2VyLmlkfWBcbiAgICAgICAgKTtcbiAgICAgICAgaWYgKHVzZXJSZXNpZGVuY2VSZWNvcmRzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICBjb25zdCByZXNpZGVuY2VJZHMyID0gdXNlclJlc2lkZW5jZVJlY29yZHMubWFwKCh1cikgPT4gdXIucmVzaWRlbmNlSWQpO1xuICAgICAgICAgIGNvbnN0IHJlc2lkZW5jZUJ1aWxkaW5ncyA9IGF3YWl0IGRiLnNlbGVjdCh7IGlkOiBidWlsZGluZ3MuaWQgfSkuZnJvbShyZXNpZGVuY2VzKS5pbm5lckpvaW4oYnVpbGRpbmdzLCBlcTExKHJlc2lkZW5jZXMuYnVpbGRpbmdJZCwgYnVpbGRpbmdzLmlkKSkud2hlcmUoYW5kMTEoaW5BcnJheTcocmVzaWRlbmNlcy5pZCwgcmVzaWRlbmNlSWRzMiksIGVxMTEoYnVpbGRpbmdzLmlzQWN0aXZlLCB0cnVlKSkpO1xuICAgICAgICAgIHJlc2lkZW5jZUJ1aWxkaW5ncy5mb3JFYWNoKChidWlsZGluZykgPT4ge1xuICAgICAgICAgICAgYWNjZXNzaWJsZUJ1aWxkaW5nSWRzLmFkZChidWlsZGluZy5pZCk7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGNvbnNvbGUubG9nKFxuICAgICAgICBgXFx1ezFGNTBEfSBbQUNDRVNTIERFQlVHXSBVc2VyICR7dXNlci5pZH0gaGFzIGFjY2VzcyB0byAke2FjY2Vzc2libGVCdWlsZGluZ0lkcy5zaXplfSBidWlsZGluZ3M6YCxcbiAgICAgICAgQXJyYXkuZnJvbShhY2Nlc3NpYmxlQnVpbGRpbmdJZHMpXG4gICAgICApO1xuICAgICAgaWYgKGFjY2Vzc2libGVCdWlsZGluZ0lkcy5zaXplID4gMCkge1xuICAgICAgICBjb25kaXRpb25zLnB1c2goaW5BcnJheTcocmVzaWRlbmNlcy5idWlsZGluZ0lkLCBBcnJheS5mcm9tKGFjY2Vzc2libGVCdWlsZGluZ0lkcykpKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiByZXMuanNvbihbXSk7XG4gICAgICB9XG4gICAgICBjb25zdCBiYXNlUXVlcnkgPSBkYi5zZWxlY3Qoe1xuICAgICAgICByZXNpZGVuY2U6IHJlc2lkZW5jZXMsXG4gICAgICAgIGJ1aWxkaW5nOiBidWlsZGluZ3MsXG4gICAgICAgIG9yZ2FuaXphdGlvbjogb3JnYW5pemF0aW9uc1xuICAgICAgfSkuZnJvbShyZXNpZGVuY2VzKS5sZWZ0Sm9pbihidWlsZGluZ3MsIGVxMTEocmVzaWRlbmNlcy5idWlsZGluZ0lkLCBidWlsZGluZ3MuaWQpKS5sZWZ0Sm9pbihvcmdhbml6YXRpb25zLCBlcTExKGJ1aWxkaW5ncy5vcmdhbml6YXRpb25JZCwgb3JnYW5pemF0aW9ucy5pZCkpLndoZXJlKGFuZDExKC4uLmNvbmRpdGlvbnMpKTtcbiAgICAgIGxldCByZXN1bHRzID0gYXdhaXQgYmFzZVF1ZXJ5O1xuICAgICAgaWYgKHNlYXJjaCkge1xuICAgICAgICBjb25zdCBzZWFyY2hMb3dlciA9IHNlYXJjaC50b0xvd2VyQ2FzZSgpO1xuICAgICAgICByZXN1bHRzID0gcmVzdWx0cy5maWx0ZXIoXG4gICAgICAgICAgKHJlc3VsdCkgPT4gcmVzdWx0LnJlc2lkZW5jZS51bml0TnVtYmVyLnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMoc2VhcmNoTG93ZXIpIHx8IHJlc3VsdC5idWlsZGluZz8ubmFtZS50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKHNlYXJjaExvd2VyKVxuICAgICAgICApO1xuICAgICAgfVxuICAgICAgY29uc3QgcmVzaWRlbmNlSWRzID0gcmVzdWx0cy5tYXAoKHIpID0+IHIucmVzaWRlbmNlLmlkKTtcbiAgICAgIGNvbnN0IHRlbmFudHMgPSByZXNpZGVuY2VJZHMubGVuZ3RoID4gMCA/IGF3YWl0IGRiLnNlbGVjdCh7XG4gICAgICAgIHJlc2lkZW5jZUlkOiB1c2VyUmVzaWRlbmNlcy5yZXNpZGVuY2VJZCxcbiAgICAgICAgdGVuYW50OiB1c2Vyc1xuICAgICAgfSkuZnJvbSh1c2VyUmVzaWRlbmNlcykuaW5uZXJKb2luKHVzZXJzLCBlcTExKHVzZXJSZXNpZGVuY2VzLnVzZXJJZCwgdXNlcnMuaWQpKS53aGVyZShcbiAgICAgICAgYW5kMTEoXG4gICAgICAgICAgaW5BcnJheTcodXNlclJlc2lkZW5jZXMucmVzaWRlbmNlSWQsIHJlc2lkZW5jZUlkcyksXG4gICAgICAgICAgZXExMSh1c2VyUmVzaWRlbmNlcy5pc0FjdGl2ZSwgdHJ1ZSlcbiAgICAgICAgKVxuICAgICAgKSA6IFtdO1xuICAgICAgY29uc3QgdGVuYW50c0J5UmVzaWRlbmNlID0gdGVuYW50cy5yZWR1Y2UoXG4gICAgICAgIChhY2MsIHsgcmVzaWRlbmNlSWQsIHRlbmFudCB9KSA9PiB7XG4gICAgICAgICAgaWYgKCFhY2NbcmVzaWRlbmNlSWRdKSB7XG4gICAgICAgICAgICBhY2NbcmVzaWRlbmNlSWRdID0gW107XG4gICAgICAgICAgfVxuICAgICAgICAgIGFjY1tyZXNpZGVuY2VJZF0ucHVzaCh7XG4gICAgICAgICAgICBpZDogdGVuYW50LmlkLFxuICAgICAgICAgICAgZmlyc3ROYW1lOiB0ZW5hbnQuZmlyc3ROYW1lLFxuICAgICAgICAgICAgbGFzdE5hbWU6IHRlbmFudC5sYXN0TmFtZSxcbiAgICAgICAgICAgIGVtYWlsOiB0ZW5hbnQuZW1haWxcbiAgICAgICAgICB9KTtcbiAgICAgICAgICByZXR1cm4gYWNjO1xuICAgICAgICB9LFxuICAgICAgICB7fVxuICAgICAgKTtcbiAgICAgIGNvbnN0IHJlc2lkZW5jZXNMaXN0ID0gcmVzdWx0cy5tYXAoKHJlc3VsdCkgPT4gKHtcbiAgICAgICAgLi4ucmVzdWx0LnJlc2lkZW5jZSxcbiAgICAgICAgYnVpbGRpbmc6IHJlc3VsdC5idWlsZGluZyxcbiAgICAgICAgb3JnYW5pemF0aW9uOiByZXN1bHQub3JnYW5pemF0aW9uLFxuICAgICAgICB0ZW5hbnRzOiB0ZW5hbnRzQnlSZXNpZGVuY2VbcmVzdWx0LnJlc2lkZW5jZS5pZF0gfHwgW11cbiAgICAgIH0pKTtcbiAgICAgIHJlcy5qc29uKHJlc2lkZW5jZXNMaXN0KTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcihcIlxcdTI3NEMgRXJyb3IgZmV0Y2hpbmcgcmVzaWRlbmNlczpcIiwgZXJyb3IpO1xuICAgICAgcmVzLnN0YXR1cyg1MDApLmpzb24oeyBtZXNzYWdlOiBcIkZhaWxlZCB0byBmZXRjaCByZXNpZGVuY2VzXCIgfSk7XG4gICAgfVxuICB9KTtcbiAgYXBwMi5nZXQoXCIvYXBpL3Jlc2lkZW5jZXMvOmlkXCIsIHJlcXVpcmVBdXRoLCBhc3luYyAocmVxLCByZXMpID0+IHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgeyBpZCB9ID0gcmVxLnBhcmFtcztcbiAgICAgIGNvbnN0IHVzZXIgPSByZXEudXNlcjtcbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGRiLnNlbGVjdCh7XG4gICAgICAgIHJlc2lkZW5jZTogcmVzaWRlbmNlcyxcbiAgICAgICAgYnVpbGRpbmc6IGJ1aWxkaW5ncyxcbiAgICAgICAgb3JnYW5pemF0aW9uOiBvcmdhbml6YXRpb25zXG4gICAgICB9KS5mcm9tKHJlc2lkZW5jZXMpLmxlZnRKb2luKGJ1aWxkaW5ncywgZXExMShyZXNpZGVuY2VzLmJ1aWxkaW5nSWQsIGJ1aWxkaW5ncy5pZCkpLmxlZnRKb2luKG9yZ2FuaXphdGlvbnMsIGVxMTEoYnVpbGRpbmdzLm9yZ2FuaXphdGlvbklkLCBvcmdhbml6YXRpb25zLmlkKSkud2hlcmUoYW5kMTEoZXExMShyZXNpZGVuY2VzLmlkLCBpZCksIGVxMTEocmVzaWRlbmNlcy5pc0FjdGl2ZSwgdHJ1ZSkpKTtcbiAgICAgIGlmIChyZXN1bHQubGVuZ3RoID09PSAwKSB7XG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwNCkuanNvbih7IG1lc3NhZ2U6IFwiUmVzaWRlbmNlIG5vdCBmb3VuZFwiIH0pO1xuICAgICAgfVxuICAgICAgY29uc3QgcmVzaWRlbmNlID0gcmVzdWx0WzBdO1xuICAgICAgaWYgKHVzZXIucm9sZSAhPT0gXCJhZG1pblwiICYmICF1c2VyLmNhbkFjY2Vzc0FsbE9yZ2FuaXphdGlvbnMpIHtcbiAgICAgICAgY29uc3QgdXNlckhhc0FjY2VzcyA9IGF3YWl0IGRiLnNlbGVjdCh7IGNvdW50OiBzcWwyMGBjb3VudCgqKWAgfSkuZnJvbSh1c2VyUmVzaWRlbmNlcykubGVmdEpvaW4ocmVzaWRlbmNlcywgZXExMSh1c2VyUmVzaWRlbmNlcy5yZXNpZGVuY2VJZCwgcmVzaWRlbmNlcy5pZCkpLmxlZnRKb2luKGJ1aWxkaW5ncywgZXExMShyZXNpZGVuY2VzLmJ1aWxkaW5nSWQsIGJ1aWxkaW5ncy5pZCkpLndoZXJlKFxuICAgICAgICAgIGFuZDExKFxuICAgICAgICAgICAgZXExMSh1c2VyUmVzaWRlbmNlcy51c2VySWQsIHVzZXIuaWQpLFxuICAgICAgICAgICAgZXExMShidWlsZGluZ3Mub3JnYW5pemF0aW9uSWQsIHJlc2lkZW5jZS5vcmdhbml6YXRpb24uaWQpXG4gICAgICAgICAgKVxuICAgICAgICApO1xuICAgICAgICBpZiAodXNlckhhc0FjY2Vzc1swXS5jb3VudCA9PT0gMCkge1xuICAgICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMykuanNvbih7IG1lc3NhZ2U6IFwiQWNjZXNzIGRlbmllZFwiIH0pO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBjb25zdCB0ZW5hbnRzID0gYXdhaXQgZGIuc2VsZWN0KHtcbiAgICAgICAgaWQ6IHVzZXJzLmlkLFxuICAgICAgICBmaXJzdE5hbWU6IHVzZXJzLmZpcnN0TmFtZSxcbiAgICAgICAgbGFzdE5hbWU6IHVzZXJzLmxhc3ROYW1lLFxuICAgICAgICBlbWFpbDogdXNlcnMuZW1haWwsXG4gICAgICAgIHJlbGF0aW9uc2hpcFR5cGU6IHVzZXJSZXNpZGVuY2VzLnJlbGF0aW9uc2hpcFR5cGUsXG4gICAgICAgIHN0YXJ0RGF0ZTogdXNlclJlc2lkZW5jZXMuc3RhcnREYXRlLFxuICAgICAgICBlbmREYXRlOiB1c2VyUmVzaWRlbmNlcy5lbmREYXRlXG4gICAgICB9KS5mcm9tKHVzZXJSZXNpZGVuY2VzKS5sZWZ0Sm9pbih1c2VycywgZXExMSh1c2VyUmVzaWRlbmNlcy51c2VySWQsIHVzZXJzLmlkKSkud2hlcmUoYW5kMTEoZXExMSh1c2VyUmVzaWRlbmNlcy5yZXNpZGVuY2VJZCwgaWQpLCBlcTExKHVzZXJSZXNpZGVuY2VzLmlzQWN0aXZlLCB0cnVlKSkpO1xuICAgICAgcmVzLmpzb24oe1xuICAgICAgICAuLi5yZXNpZGVuY2UucmVzaWRlbmNlLFxuICAgICAgICBidWlsZGluZzogcmVzaWRlbmNlLmJ1aWxkaW5nLFxuICAgICAgICBvcmdhbml6YXRpb246IHJlc2lkZW5jZS5vcmdhbml6YXRpb24sXG4gICAgICAgIHRlbmFudHNcbiAgICAgIH0pO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKFwiXFx1Mjc0QyBFcnJvciBmZXRjaGluZyByZXNpZGVuY2U6XCIsIGVycm9yKTtcbiAgICAgIHJlcy5zdGF0dXMoNTAwKS5qc29uKHsgbWVzc2FnZTogXCJGYWlsZWQgdG8gZmV0Y2ggcmVzaWRlbmNlXCIgfSk7XG4gICAgfVxuICB9KTtcbiAgYXBwMi5wdXQoXCIvYXBpL3Jlc2lkZW5jZXMvOmlkXCIsIHJlcXVpcmVBdXRoLCBhc3luYyAocmVxLCByZXMpID0+IHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgeyBpZCB9ID0gcmVxLnBhcmFtcztcbiAgICAgIGNvbnN0IHVwZGF0ZURhdGEgPSByZXEuYm9keTtcbiAgICAgIGNvbnNvbGUubG9nKGBcXHV7MUYzRTB9IFVwZGF0aW5nIHJlc2lkZW5jZSAke2lkfSB3aXRoIGRhdGE6YCwgdXBkYXRlRGF0YSk7XG4gICAgICBkZWxldGUgdXBkYXRlRGF0YS5pZDtcbiAgICAgIGRlbGV0ZSB1cGRhdGVEYXRhLmNyZWF0ZWRBdDtcbiAgICAgIGRlbGV0ZSB1cGRhdGVEYXRhLmJ1aWxkaW5nSWQ7XG4gICAgICBjb25zdCBwcm9jZXNzZWREYXRhID0ge1xuICAgICAgICAuLi51cGRhdGVEYXRhLFxuICAgICAgICB1cGRhdGVkQXQ6IC8qIEBfX1BVUkVfXyAqLyBuZXcgRGF0ZSgpXG4gICAgICB9O1xuICAgICAgaWYgKHByb2Nlc3NlZERhdGEuc3F1YXJlRm9vdGFnZSA9PT0gbnVsbCB8fCBwcm9jZXNzZWREYXRhLnNxdWFyZUZvb3RhZ2UgPT09IFwiXCIpIHtcbiAgICAgICAgcHJvY2Vzc2VkRGF0YS5zcXVhcmVGb290YWdlID0gbnVsbDtcbiAgICAgIH1cbiAgICAgIGlmIChwcm9jZXNzZWREYXRhLmJhdGhyb29tcyA9PT0gbnVsbCB8fCBwcm9jZXNzZWREYXRhLmJhdGhyb29tcyA9PT0gXCJcIikge1xuICAgICAgICBwcm9jZXNzZWREYXRhLmJhdGhyb29tcyA9IG51bGw7XG4gICAgICB9XG4gICAgICBpZiAocHJvY2Vzc2VkRGF0YS5vd25lcnNoaXBQZXJjZW50YWdlID09PSBudWxsIHx8IHByb2Nlc3NlZERhdGEub3duZXJzaGlwUGVyY2VudGFnZSA9PT0gXCJcIikge1xuICAgICAgICBwcm9jZXNzZWREYXRhLm93bmVyc2hpcFBlcmNlbnRhZ2UgPSBudWxsO1xuICAgICAgfVxuICAgICAgaWYgKHByb2Nlc3NlZERhdGEubW9udGhseUZlZXMgPT09IG51bGwgfHwgcHJvY2Vzc2VkRGF0YS5tb250aGx5RmVlcyA9PT0gXCJcIikge1xuICAgICAgICBwcm9jZXNzZWREYXRhLm1vbnRobHlGZWVzID0gbnVsbDtcbiAgICAgIH1cbiAgICAgIGNvbnNvbGUubG9nKGBcXHV7MUYzRTB9IFByb2Nlc3NlZCBkYXRhIGZvciByZXNpZGVuY2UgJHtpZH06YCwgcHJvY2Vzc2VkRGF0YSk7XG4gICAgICBjb25zdCB1cGRhdGVkID0gYXdhaXQgZGIudXBkYXRlKHJlc2lkZW5jZXMpLnNldChwcm9jZXNzZWREYXRhKS53aGVyZShlcTExKHJlc2lkZW5jZXMuaWQsIGlkKSkucmV0dXJuaW5nKCk7XG4gICAgICBpZiAodXBkYXRlZC5sZW5ndGggPT09IDApIHtcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDA0KS5qc29uKHsgbWVzc2FnZTogXCJSZXNpZGVuY2Ugbm90IGZvdW5kXCIgfSk7XG4gICAgICB9XG4gICAgICBjb25zb2xlLmxvZyhgXFx1MjcwNSBTdWNjZXNzZnVsbHkgdXBkYXRlZCByZXNpZGVuY2UgJHtpZH1gKTtcbiAgICAgIHRyeSB7XG4gICAgICAgIGRlbGF5ZWRVcGRhdGVTZXJ2aWNlLnNjaGVkdWxlUmVzaWRlbmNlVXBkYXRlKGlkKTtcbiAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgY29uc29sZS53YXJuKFwiXFx1MjZBMFxcdUZFMEYgRmFpbGVkIHRvIHNjaGVkdWxlIHJlc2lkZW5jZSB1cGRhdGU6XCIsIGUpO1xuICAgICAgfVxuICAgICAgcmVzLmpzb24odXBkYXRlZFswXSk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoXCJcXHUyNzRDIEVycm9yIHVwZGF0aW5nIHJlc2lkZW5jZTpcIiwgZXJyb3IpO1xuICAgICAgY29uc29sZS5lcnJvcihcIlxcdTI3NEMgRXJyb3IgZGV0YWlsczpcIiwgZXJyb3IubWVzc2FnZSk7XG4gICAgICBjb25zb2xlLmVycm9yKFwiXFx1Mjc0QyBFcnJvciBzdGFjazpcIiwgZXJyb3Iuc3RhY2spO1xuICAgICAgcmVzLnN0YXR1cyg1MDApLmpzb24oe1xuICAgICAgICBtZXNzYWdlOiBcIkZhaWxlZCB0byB1cGRhdGUgcmVzaWRlbmNlXCIsXG4gICAgICAgIGVycm9yOiBlcnJvci5tZXNzYWdlLFxuICAgICAgICBkZXRhaWxzOiBwcm9jZXNzLmVudi5OT0RFX0VOViA9PT0gXCJkZXZlbG9wbWVudFwiID8gZXJyb3Iuc3RhY2sgOiB2b2lkIDBcbiAgICAgIH0pO1xuICAgIH1cbiAgfSk7XG4gIGFwcDIucG9zdChcbiAgICBcIi9hcGkvYnVpbGRpbmdzLzpidWlsZGluZ0lkL2dlbmVyYXRlLXJlc2lkZW5jZXNcIixcbiAgICByZXF1aXJlQXV0aCxcbiAgICBhc3luYyAocmVxLCByZXMpID0+IHtcbiAgICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IHsgYnVpbGRpbmdJZCB9ID0gcmVxLnBhcmFtcztcbiAgICAgICAgY29uc3QgYnVpbGRpbmcgPSBhd2FpdCBkYi5zZWxlY3QoKS5mcm9tKGJ1aWxkaW5ncykud2hlcmUoZXExMShidWlsZGluZ3MuaWQsIGJ1aWxkaW5nSWQpKS5saW1pdCgxKTtcbiAgICAgICAgaWYgKGJ1aWxkaW5nLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwNCkuanNvbih7IG1lc3NhZ2U6IFwiQnVpbGRpbmcgbm90IGZvdW5kXCIgfSk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgYnVpbGRpbmdEYXRhID0gYnVpbGRpbmdbMF07XG4gICAgICAgIGNvbnN0IHRvdGFsVW5pdHMgPSBidWlsZGluZ0RhdGEudG90YWxVbml0cztcbiAgICAgICAgY29uc3QgdG90YWxGbG9vcnMgPSBidWlsZGluZ0RhdGEudG90YWxGbG9vcnMgfHwgMTtcbiAgICAgICAgaWYgKHRvdGFsVW5pdHMgPiAzMDApIHtcbiAgICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oeyBtZXNzYWdlOiBcIkNhbm5vdCBjcmVhdGUgbW9yZSB0aGFuIDMwMCByZXNpZGVuY2VzIHBlciBidWlsZGluZ1wiIH0pO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGV4aXN0aW5nUmVzaWRlbmNlcyA9IGF3YWl0IGRiLnNlbGVjdCh7IGNvdW50OiBzcWwyMGBjb3VudCgqKWAgfSkuZnJvbShyZXNpZGVuY2VzKS53aGVyZShlcTExKHJlc2lkZW5jZXMuYnVpbGRpbmdJZCwgYnVpbGRpbmdJZCkpO1xuICAgICAgICBpZiAoZXhpc3RpbmdSZXNpZGVuY2VzWzBdLmNvdW50ID4gMCkge1xuICAgICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7IG1lc3NhZ2U6IFwiUmVzaWRlbmNlcyBhbHJlYWR5IGV4aXN0IGZvciB0aGlzIGJ1aWxkaW5nXCIgfSk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgcmVzaWRlbmNlc1RvQ3JlYXRlID0gW107XG4gICAgICAgIGNvbnN0IHVuaXRzUGVyRmxvb3IgPSBNYXRoLmNlaWwodG90YWxVbml0cyAvIHRvdGFsRmxvb3JzKTtcbiAgICAgICAgZm9yIChsZXQgdW5pdCA9IDE7IHVuaXQgPD0gdG90YWxVbml0czsgdW5pdCsrKSB7XG4gICAgICAgICAgY29uc3QgZmxvb3IgPSBNYXRoLmNlaWwodW5pdCAvIHVuaXRzUGVyRmxvb3IpO1xuICAgICAgICAgIGNvbnN0IHVuaXRPbkZsb29yID0gKHVuaXQgLSAxKSAlIHVuaXRzUGVyRmxvb3IgKyAxO1xuICAgICAgICAgIGNvbnN0IHVuaXROdW1iZXIgPSBgJHtmbG9vcn0ke3VuaXRPbkZsb29yLnRvU3RyaW5nKCkucGFkU3RhcnQoMiwgXCIwXCIpfWA7XG4gICAgICAgICAgcmVzaWRlbmNlc1RvQ3JlYXRlLnB1c2goe1xuICAgICAgICAgICAgYnVpbGRpbmdJZCxcbiAgICAgICAgICAgIHVuaXROdW1iZXIsXG4gICAgICAgICAgICBmbG9vcixcbiAgICAgICAgICAgIGlzQWN0aXZlOiB0cnVlXG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgY3JlYXRlZFJlc2lkZW5jZXMgPSBhd2FpdCBkYi5pbnNlcnQocmVzaWRlbmNlcykudmFsdWVzKHJlc2lkZW5jZXNUb0NyZWF0ZSkucmV0dXJuaW5nKCk7XG4gICAgICAgIHJlcy5qc29uKHtcbiAgICAgICAgICBtZXNzYWdlOiBgU3VjY2Vzc2Z1bGx5IGNyZWF0ZWQgJHtjcmVhdGVkUmVzaWRlbmNlcy5sZW5ndGh9IHJlc2lkZW5jZXNgLFxuICAgICAgICAgIHJlc2lkZW5jZXM6IGNyZWF0ZWRSZXNpZGVuY2VzXG4gICAgICAgIH0pO1xuICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcihcIlxcdTI3NEMgRXJyb3IgZ2VuZXJhdGluZyByZXNpZGVuY2VzOlwiLCBlcnJvcik7XG4gICAgICAgIHJlcy5zdGF0dXMoNTAwKS5qc29uKHsgbWVzc2FnZTogXCJGYWlsZWQgdG8gZ2VuZXJhdGUgcmVzaWRlbmNlc1wiIH0pO1xuICAgICAgfVxuICAgIH1cbiAgKTtcbn1cblxuLy8gc2VydmVyL2FwaS9kZW1hbmRzLnRzXG5pbml0X2RiKCk7XG5pbml0X3NjaGVtYSgpO1xuaW1wb3J0IHsgZXEgYXMgZXExMiwgYW5kIGFzIGFuZDEyLCBkZXNjIGFzIGRlc2M0LCBhc2MgfSBmcm9tIFwiZHJpenpsZS1vcm1cIjtcbmluaXRfb3BlcmF0aW9ucygpO1xuZnVuY3Rpb24gcmVnaXN0ZXJEZW1hbmRSb3V0ZXMoYXBwMikge1xuICBhcHAyLmdldChcIi9hcGkvZGVtYW5kc1wiLCByZXF1aXJlQXV0aCwgYXN5bmMgKHJlcSwgcmVzKSA9PiB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHVzZXIgPSByZXEudXNlcjtcbiAgICAgIGNvbnN0IHsgYnVpbGRpbmdJZCwgcmVzaWRlbmNlSWQsIHR5cGUsIHN0YXR1cywgc2VhcmNoIH0gPSByZXEucXVlcnk7XG4gICAgICBsZXQgcXVlcnkgPSBkYi5zZWxlY3Qoe1xuICAgICAgICBpZDogZGVtYW5kcy5pZCxcbiAgICAgICAgc3VibWl0dGVySWQ6IGRlbWFuZHMuc3VibWl0dGVySWQsXG4gICAgICAgIHR5cGU6IGRlbWFuZHMudHlwZSxcbiAgICAgICAgYXNzaWduYXRpb25SZXNpZGVuY2VJZDogZGVtYW5kcy5hc3NpZ25hdGlvblJlc2lkZW5jZUlkLFxuICAgICAgICBhc3NpZ25hdGlvbkJ1aWxkaW5nSWQ6IGRlbWFuZHMuYXNzaWduYXRpb25CdWlsZGluZ0lkLFxuICAgICAgICBkZXNjcmlwdGlvbjogZGVtYW5kcy5kZXNjcmlwdGlvbixcbiAgICAgICAgYXR0YWNobWVudHM6IGRlbWFuZHMuYXR0YWNobWVudHMsXG4gICAgICAgIHJlc2lkZW5jZUlkOiBkZW1hbmRzLnJlc2lkZW5jZUlkLFxuICAgICAgICBidWlsZGluZ0lkOiBkZW1hbmRzLmJ1aWxkaW5nSWQsXG4gICAgICAgIHN0YXR1czogZGVtYW5kcy5zdGF0dXMsXG4gICAgICAgIHJldmlld2VkQnk6IGRlbWFuZHMucmV2aWV3ZWRCeSxcbiAgICAgICAgcmV2aWV3ZWRBdDogZGVtYW5kcy5yZXZpZXdlZEF0LFxuICAgICAgICByZXZpZXdOb3RlczogZGVtYW5kcy5yZXZpZXdOb3RlcyxcbiAgICAgICAgY3JlYXRlZEF0OiBkZW1hbmRzLmNyZWF0ZWRBdCxcbiAgICAgICAgdXBkYXRlZEF0OiBkZW1hbmRzLnVwZGF0ZWRBdCxcbiAgICAgICAgc3VibWl0dGVyOiB7XG4gICAgICAgICAgaWQ6IHVzZXJzLmlkLFxuICAgICAgICAgIGZpcnN0TmFtZTogdXNlcnMuZmlyc3ROYW1lLFxuICAgICAgICAgIGxhc3ROYW1lOiB1c2Vycy5sYXN0TmFtZSxcbiAgICAgICAgICBlbWFpbDogdXNlcnMuZW1haWxcbiAgICAgICAgfSxcbiAgICAgICAgcmVzaWRlbmNlOiB7XG4gICAgICAgICAgaWQ6IHJlc2lkZW5jZXMuaWQsXG4gICAgICAgICAgdW5pdE51bWJlcjogcmVzaWRlbmNlcy51bml0TnVtYmVyLFxuICAgICAgICAgIGJ1aWxkaW5nSWQ6IHJlc2lkZW5jZXMuYnVpbGRpbmdJZFxuICAgICAgICB9LFxuICAgICAgICBidWlsZGluZzoge1xuICAgICAgICAgIGlkOiBidWlsZGluZ3MuaWQsXG4gICAgICAgICAgbmFtZTogYnVpbGRpbmdzLm5hbWUsXG4gICAgICAgICAgYWRkcmVzczogYnVpbGRpbmdzLmFkZHJlc3NcbiAgICAgICAgfVxuICAgICAgfSkuZnJvbShkZW1hbmRzKS5pbm5lckpvaW4odXNlcnMsIGVxMTIoZGVtYW5kcy5zdWJtaXR0ZXJJZCwgdXNlcnMuaWQpKS5pbm5lckpvaW4ocmVzaWRlbmNlcywgZXExMihkZW1hbmRzLnJlc2lkZW5jZUlkLCByZXNpZGVuY2VzLmlkKSkuaW5uZXJKb2luKGJ1aWxkaW5ncywgZXExMihkZW1hbmRzLmJ1aWxkaW5nSWQsIGJ1aWxkaW5ncy5pZCkpO1xuICAgICAgY29uc3QgY29uZGl0aW9ucyA9IFtlcTEyKGRlbWFuZHMuc3VibWl0dGVySWQsIHVzZXIuaWQpXTtcbiAgICAgIGlmIChidWlsZGluZ0lkKSB7XG4gICAgICAgIGNvbmRpdGlvbnMucHVzaChlcTEyKGRlbWFuZHMuYnVpbGRpbmdJZCwgYnVpbGRpbmdJZCkpO1xuICAgICAgfVxuICAgICAgaWYgKHJlc2lkZW5jZUlkKSB7XG4gICAgICAgIGNvbmRpdGlvbnMucHVzaChlcTEyKGRlbWFuZHMucmVzaWRlbmNlSWQsIHJlc2lkZW5jZUlkKSk7XG4gICAgICB9XG4gICAgICBpZiAodHlwZSkge1xuICAgICAgICBjb25kaXRpb25zLnB1c2goZXExMihkZW1hbmRzLnR5cGUsIHR5cGUpKTtcbiAgICAgIH1cbiAgICAgIGlmIChzdGF0dXMpIHtcbiAgICAgICAgY29uZGl0aW9ucy5wdXNoKGVxMTIoZGVtYW5kcy5zdGF0dXMsIHN0YXR1cykpO1xuICAgICAgfVxuICAgICAgbGV0IGZpbmFsUXVlcnk7XG4gICAgICBpZiAoY29uZGl0aW9ucy5sZW5ndGggPiAwKSB7XG4gICAgICAgIGZpbmFsUXVlcnkgPSBxdWVyeS53aGVyZShhbmQxMiguLi5jb25kaXRpb25zKSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBmaW5hbFF1ZXJ5ID0gcXVlcnk7XG4gICAgICB9XG4gICAgICBjb25zdCByZXN1bHRzID0gYXdhaXQgZmluYWxRdWVyeS5vcmRlckJ5KGRlc2M0KGRlbWFuZHMuY3JlYXRlZEF0KSk7XG4gICAgICBsZXQgZmlsdGVyZWRSZXN1bHRzID0gcmVzdWx0cztcbiAgICAgIGlmIChzZWFyY2gpIHtcbiAgICAgICAgY29uc3Qgc2VhcmNoVGVybSA9IHNlYXJjaC50b0xvd2VyQ2FzZSgpO1xuICAgICAgICBmaWx0ZXJlZFJlc3VsdHMgPSByZXN1bHRzLmZpbHRlcihcbiAgICAgICAgICAoZGVtYW5kKSA9PiBkZW1hbmQuZGVzY3JpcHRpb24udG9Mb3dlckNhc2UoKS5pbmNsdWRlcyhzZWFyY2hUZXJtKSB8fCBkZW1hbmQuc3VibWl0dGVyLmZpcnN0TmFtZT8udG9Mb3dlckNhc2UoKS5pbmNsdWRlcyhzZWFyY2hUZXJtKSB8fCBkZW1hbmQuc3VibWl0dGVyLmxhc3ROYW1lPy50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKHNlYXJjaFRlcm0pIHx8IGRlbWFuZC5yZXNpZGVuY2UudW5pdE51bWJlci50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKHNlYXJjaFRlcm0pIHx8IGRlbWFuZC5idWlsZGluZy5uYW1lLnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMoc2VhcmNoVGVybSlcbiAgICAgICAgKTtcbiAgICAgIH1cbiAgICAgIHJlcy5qc29uKGZpbHRlcmVkUmVzdWx0cyk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIHJlcy5zdGF0dXMoNTAwKS5qc29uKHsgbWVzc2FnZTogXCJGYWlsZWQgdG8gZmV0Y2ggZGVtYW5kc1wiIH0pO1xuICAgIH1cbiAgfSk7XG4gIGFwcDIuZ2V0KFwiL2FwaS9kZW1hbmRzLzppZFwiLCByZXF1aXJlQXV0aCwgYXN5bmMgKHJlcSwgcmVzKSA9PiB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHsgaWQgfSA9IHJlcS5wYXJhbXM7XG4gICAgICBjb25zdCB1c2VyID0gcmVxLnVzZXI7XG4gICAgICBjb25zdCBkZW1hbmQgPSBhd2FpdCBkYi5zZWxlY3Qoe1xuICAgICAgICBpZDogZGVtYW5kcy5pZCxcbiAgICAgICAgc3VibWl0dGVySWQ6IGRlbWFuZHMuc3VibWl0dGVySWQsXG4gICAgICAgIHR5cGU6IGRlbWFuZHMudHlwZSxcbiAgICAgICAgYXNzaWduYXRpb25SZXNpZGVuY2VJZDogZGVtYW5kcy5hc3NpZ25hdGlvblJlc2lkZW5jZUlkLFxuICAgICAgICBhc3NpZ25hdGlvbkJ1aWxkaW5nSWQ6IGRlbWFuZHMuYXNzaWduYXRpb25CdWlsZGluZ0lkLFxuICAgICAgICBkZXNjcmlwdGlvbjogZGVtYW5kcy5kZXNjcmlwdGlvbixcbiAgICAgICAgYXR0YWNobWVudHM6IGRlbWFuZHMuYXR0YWNobWVudHMsXG4gICAgICAgIHJlc2lkZW5jZUlkOiBkZW1hbmRzLnJlc2lkZW5jZUlkLFxuICAgICAgICBidWlsZGluZ0lkOiBkZW1hbmRzLmJ1aWxkaW5nSWQsXG4gICAgICAgIHN0YXR1czogZGVtYW5kcy5zdGF0dXMsXG4gICAgICAgIHJldmlld2VkQnk6IGRlbWFuZHMucmV2aWV3ZWRCeSxcbiAgICAgICAgcmV2aWV3ZWRBdDogZGVtYW5kcy5yZXZpZXdlZEF0LFxuICAgICAgICByZXZpZXdOb3RlczogZGVtYW5kcy5yZXZpZXdOb3RlcyxcbiAgICAgICAgY3JlYXRlZEF0OiBkZW1hbmRzLmNyZWF0ZWRBdCxcbiAgICAgICAgdXBkYXRlZEF0OiBkZW1hbmRzLnVwZGF0ZWRBdCxcbiAgICAgICAgc3VibWl0dGVyOiB7XG4gICAgICAgICAgaWQ6IHVzZXJzLmlkLFxuICAgICAgICAgIGZpcnN0TmFtZTogdXNlcnMuZmlyc3ROYW1lLFxuICAgICAgICAgIGxhc3ROYW1lOiB1c2Vycy5sYXN0TmFtZSxcbiAgICAgICAgICBlbWFpbDogdXNlcnMuZW1haWxcbiAgICAgICAgfSxcbiAgICAgICAgcmVzaWRlbmNlOiB7XG4gICAgICAgICAgaWQ6IHJlc2lkZW5jZXMuaWQsXG4gICAgICAgICAgdW5pdE51bWJlcjogcmVzaWRlbmNlcy51bml0TnVtYmVyLFxuICAgICAgICAgIGJ1aWxkaW5nSWQ6IHJlc2lkZW5jZXMuYnVpbGRpbmdJZFxuICAgICAgICB9LFxuICAgICAgICBidWlsZGluZzoge1xuICAgICAgICAgIGlkOiBidWlsZGluZ3MuaWQsXG4gICAgICAgICAgbmFtZTogYnVpbGRpbmdzLm5hbWUsXG4gICAgICAgICAgYWRkcmVzczogYnVpbGRpbmdzLmFkZHJlc3NcbiAgICAgICAgfVxuICAgICAgfSkuZnJvbShkZW1hbmRzKS5pbm5lckpvaW4odXNlcnMsIGVxMTIoZGVtYW5kcy5zdWJtaXR0ZXJJZCwgdXNlcnMuaWQpKS5pbm5lckpvaW4ocmVzaWRlbmNlcywgZXExMihkZW1hbmRzLnJlc2lkZW5jZUlkLCByZXNpZGVuY2VzLmlkKSkuaW5uZXJKb2luKGJ1aWxkaW5ncywgZXExMihkZW1hbmRzLmJ1aWxkaW5nSWQsIGJ1aWxkaW5ncy5pZCkpLndoZXJlKGVxMTIoZGVtYW5kcy5pZCwgaWQpKS5saW1pdCgxKTtcbiAgICAgIGlmIChkZW1hbmQubGVuZ3RoID09PSAwKSB7XG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwNCkuanNvbih7IG1lc3NhZ2U6IFwiRGVtYW5kIG5vdCBmb3VuZFwiIH0pO1xuICAgICAgfVxuICAgICAgY29uc3QgZGVtYW5kRGF0YSA9IGRlbWFuZFswXTtcbiAgICAgIGlmIChkZW1hbmREYXRhLnN1Ym1pdHRlcklkICE9PSB1c2VyLmlkKSB7XG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMykuanNvbih7IG1lc3NhZ2U6IFwiQWNjZXNzIGRlbmllZFwiIH0pO1xuICAgICAgfVxuICAgICAgcmVzLmpzb24oZGVtYW5kRGF0YSk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIHJlcy5zdGF0dXMoNTAwKS5qc29uKHsgbWVzc2FnZTogXCJGYWlsZWQgdG8gZmV0Y2ggZGVtYW5kXCIgfSk7XG4gICAgfVxuICB9KTtcbiAgYXBwMi5wb3N0KFwiL2FwaS9kZW1hbmRzXCIsIHJlcXVpcmVBdXRoLCBhc3luYyAocmVxLCByZXMpID0+IHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgdXNlciA9IHJlcS51c2VyO1xuICAgICAgY29uc3QgZGVtYW5kRGF0YSA9IHJlcS5ib2R5O1xuICAgICAgY29uc3QgZGVtYW5kSW5wdXRTY2hlbWEgPSBpbnNlcnREZW1hbmRTY2hlbWEub21pdCh7IHN1Ym1pdHRlcklkOiB0cnVlIH0pO1xuICAgICAgY29uc3QgdmFsaWRhdGVkRGF0YSA9IGRlbWFuZElucHV0U2NoZW1hLnBhcnNlKGRlbWFuZERhdGEpO1xuICAgICAgY29uc29sZS5sb2coXCJcXHUyNzA1IERlbWFuZCB2YWxpZGF0aW9uIHBhc3NlZDpcIiwgdmFsaWRhdGVkRGF0YSk7XG4gICAgICBpZiAoIXZhbGlkYXRlZERhdGEucmVzaWRlbmNlSWQgfHwgIXZhbGlkYXRlZERhdGEuYnVpbGRpbmdJZCkge1xuICAgICAgICBjb25zdCB1c2VyUmVzaWRlbmNlRGF0YSA9IGF3YWl0IGRiLnNlbGVjdCh7XG4gICAgICAgICAgcmVzaWRlbmNlSWQ6IHVzZXJSZXNpZGVuY2VzLnJlc2lkZW5jZUlkLFxuICAgICAgICAgIGJ1aWxkaW5nSWQ6IHJlc2lkZW5jZXMuYnVpbGRpbmdJZFxuICAgICAgICB9KS5mcm9tKHVzZXJSZXNpZGVuY2VzKS5pbm5lckpvaW4ocmVzaWRlbmNlcywgZXExMih1c2VyUmVzaWRlbmNlcy5yZXNpZGVuY2VJZCwgcmVzaWRlbmNlcy5pZCkpLndoZXJlKGVxMTIodXNlclJlc2lkZW5jZXMudXNlcklkLCB1c2VyLmlkKSkubGltaXQoMSk7XG4gICAgICAgIGlmICh1c2VyUmVzaWRlbmNlRGF0YS5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oeyBtZXNzYWdlOiBcIlVzZXIgbXVzdCBiZSBhc3NpZ25lZCB0byBhIHJlc2lkZW5jZSB0byBjcmVhdGUgZGVtYW5kc1wiIH0pO1xuICAgICAgICB9XG4gICAgICAgIHZhbGlkYXRlZERhdGEucmVzaWRlbmNlSWQgPSB2YWxpZGF0ZWREYXRhLnJlc2lkZW5jZUlkIHx8IHVzZXJSZXNpZGVuY2VEYXRhWzBdLnJlc2lkZW5jZUlkO1xuICAgICAgICB2YWxpZGF0ZWREYXRhLmJ1aWxkaW5nSWQgPSB2YWxpZGF0ZWREYXRhLmJ1aWxkaW5nSWQgfHwgdXNlclJlc2lkZW5jZURhdGFbMF0uYnVpbGRpbmdJZDtcbiAgICAgIH1cbiAgICAgIGlmICghdmFsaWRhdGVkRGF0YS5idWlsZGluZ0lkIHx8ICF2YWxpZGF0ZWREYXRhLnJlc2lkZW5jZUlkKSB7XG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7XG4gICAgICAgICAgbWVzc2FnZTogXCJCdWlsZGluZyBhbmQgcmVzaWRlbmNlIGFyZSByZXF1aXJlZCB0byBjcmVhdGUgYSBkZW1hbmRcIlxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICAgIGNvbnNvbGUubG9nKFwiXFx1MjcwNSBGaW5hbCBkZW1hbmQgZGF0YSBiZWZvcmUgaW5zZXJ0aW9uOlwiLCB7XG4gICAgICAgIGJ1aWxkaW5nSWQ6IHZhbGlkYXRlZERhdGEuYnVpbGRpbmdJZCxcbiAgICAgICAgcmVzaWRlbmNlSWQ6IHZhbGlkYXRlZERhdGEucmVzaWRlbmNlSWQsXG4gICAgICAgIHR5cGU6IHZhbGlkYXRlZERhdGEudHlwZSxcbiAgICAgICAgZGVzY3JpcHRpb246IHZhbGlkYXRlZERhdGEuZGVzY3JpcHRpb25cbiAgICAgIH0pO1xuICAgICAgY29uc3QgZGVtYW5kSW5zZXJ0RGF0YSA9IHtcbiAgICAgICAgLi4udmFsaWRhdGVkRGF0YSxcbiAgICAgICAgYnVpbGRpbmdJZDogdmFsaWRhdGVkRGF0YS5idWlsZGluZ0lkLFxuICAgICAgICByZXNpZGVuY2VJZDogdmFsaWRhdGVkRGF0YS5yZXNpZGVuY2VJZCxcbiAgICAgICAgc3VibWl0dGVySWQ6IHVzZXIuaWQsXG4gICAgICAgIHN0YXR1czogdmFsaWRhdGVkRGF0YS5zdGF0dXMgfHwgXCJzdWJtaXR0ZWRcIlxuICAgICAgfTtcbiAgICAgIGNvbnN0IG5ld0RlbWFuZCA9IGF3YWl0IGRiLmluc2VydChkZW1hbmRzKS52YWx1ZXMoW2RlbWFuZEluc2VydERhdGFdKS5yZXR1cm5pbmcoKTtcbiAgICAgIHJlcy5zdGF0dXMoMjAxKS5qc29uKG5ld0RlbWFuZFswXSk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGlmIChlcnJvci5uYW1lID09PSBcIlpvZEVycm9yXCIpIHtcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgbWVzc2FnZTogXCJJbnZhbGlkIGRlbWFuZCBkYXRhXCIsIGVycm9yczogZXJyb3IuZXJyb3JzIH0pO1xuICAgICAgfVxuICAgICAgcmVzLnN0YXR1cyg1MDApLmpzb24oeyBtZXNzYWdlOiBcIkZhaWxlZCB0byBjcmVhdGUgZGVtYW5kXCIgfSk7XG4gICAgfVxuICB9KTtcbiAgYXBwMi5wdXQoXCIvYXBpL2RlbWFuZHMvOmlkXCIsIHJlcXVpcmVBdXRoLCBhc3luYyAocmVxLCByZXMpID0+IHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgeyBpZCB9ID0gcmVxLnBhcmFtcztcbiAgICAgIGNvbnN0IHVzZXIgPSByZXEudXNlcjtcbiAgICAgIGNvbnN0IHVwZGF0ZXMgPSByZXEuYm9keTtcbiAgICAgIGNvbnN0IGN1cnJlbnREZW1hbmQgPSBhd2FpdCBkYi5zZWxlY3QoKS5mcm9tKGRlbWFuZHMpLndoZXJlKGVxMTIoZGVtYW5kcy5pZCwgaWQpKS5saW1pdCgxKTtcbiAgICAgIGlmIChjdXJyZW50RGVtYW5kLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDQpLmpzb24oeyBtZXNzYWdlOiBcIkRlbWFuZCBub3QgZm91bmRcIiB9KTtcbiAgICAgIH1cbiAgICAgIGNvbnN0IGRlbWFuZCA9IGN1cnJlbnREZW1hbmRbMF07XG4gICAgICBpZiAoZGVtYW5kLnN1Ym1pdHRlcklkICE9PSB1c2VyLmlkKSB7XG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMykuanNvbih7IG1lc3NhZ2U6IFwiQWNjZXNzIGRlbmllZFwiIH0pO1xuICAgICAgfVxuICAgICAgY29uc3QgdXBkYXRlZERlbWFuZCA9IGF3YWl0IGRiLnVwZGF0ZShkZW1hbmRzKS5zZXQoeyAuLi51cGRhdGVzLCB1cGRhdGVkQXQ6IC8qIEBfX1BVUkVfXyAqLyBuZXcgRGF0ZSgpIH0pLndoZXJlKGVxMTIoZGVtYW5kcy5pZCwgaWQpKS5yZXR1cm5pbmcoKTtcbiAgICAgIHJlcy5qc29uKHVwZGF0ZWREZW1hbmRbMF0pO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICByZXMuc3RhdHVzKDUwMCkuanNvbih7IG1lc3NhZ2U6IFwiRmFpbGVkIHRvIHVwZGF0ZSBkZW1hbmRcIiB9KTtcbiAgICB9XG4gIH0pO1xuICBhcHAyLmRlbGV0ZShcIi9hcGkvZGVtYW5kcy86aWRcIiwgcmVxdWlyZUF1dGgsIGFzeW5jIChyZXEsIHJlcykgPT4ge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCB7IGlkIH0gPSByZXEucGFyYW1zO1xuICAgICAgY29uc3QgdXNlciA9IHJlcS51c2VyO1xuICAgICAgY29uc3QgY3VycmVudERlbWFuZCA9IGF3YWl0IGRiLnNlbGVjdCgpLmZyb20oZGVtYW5kcykud2hlcmUoZXExMihkZW1hbmRzLmlkLCBpZCkpLmxpbWl0KDEpO1xuICAgICAgaWYgKGN1cnJlbnREZW1hbmQubGVuZ3RoID09PSAwKSB7XG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwNCkuanNvbih7IG1lc3NhZ2U6IFwiRGVtYW5kIG5vdCBmb3VuZFwiIH0pO1xuICAgICAgfVxuICAgICAgY29uc3QgZGVtYW5kID0gY3VycmVudERlbWFuZFswXTtcbiAgICAgIGlmIChkZW1hbmQuc3VibWl0dGVySWQgIT09IHVzZXIuaWQpIHtcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAzKS5qc29uKHsgbWVzc2FnZTogXCJBY2Nlc3MgZGVuaWVkXCIgfSk7XG4gICAgICB9XG4gICAgICBhd2FpdCBkYi5kZWxldGUoZGVtYW5kcykud2hlcmUoZXExMihkZW1hbmRzLmlkLCBpZCkpO1xuICAgICAgcmVzLmpzb24oeyBtZXNzYWdlOiBcIkRlbWFuZCBkZWxldGVkIHN1Y2Nlc3NmdWxseVwiIH0pO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICByZXMuc3RhdHVzKDUwMCkuanNvbih7IG1lc3NhZ2U6IFwiRmFpbGVkIHRvIGRlbGV0ZSBkZW1hbmRcIiB9KTtcbiAgICB9XG4gIH0pO1xuICBhcHAyLmdldChcIi9hcGkvZGVtYW5kcy86aWQvY29tbWVudHNcIiwgcmVxdWlyZUF1dGgsIGFzeW5jIChyZXEsIHJlcykgPT4ge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCB7IGlkIH0gPSByZXEucGFyYW1zO1xuICAgICAgY29uc3QgdXNlciA9IHJlcS51c2VyO1xuICAgICAgY29uc3QgZGVtYW5kID0gYXdhaXQgZGIuc2VsZWN0KCkuZnJvbShkZW1hbmRzKS53aGVyZShlcTEyKGRlbWFuZHMuaWQsIGlkKSkubGltaXQoMSk7XG4gICAgICBpZiAoZGVtYW5kLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDQpLmpzb24oeyBtZXNzYWdlOiBcIkRlbWFuZCBub3QgZm91bmRcIiB9KTtcbiAgICAgIH1cbiAgICAgIGNvbnN0IGNvbW1lbnRzID0gYXdhaXQgZGIuc2VsZWN0KHtcbiAgICAgICAgaWQ6IGRlbWFuZENvbW1lbnRzLmlkLFxuICAgICAgICBkZW1hbmRJZDogZGVtYW5kQ29tbWVudHMuZGVtYW5kSWQsXG4gICAgICAgIGNvbW1lbnRUZXh0OiBkZW1hbmRDb21tZW50cy5jb21tZW50VGV4dCxcbiAgICAgICAgY29tbWVudFR5cGU6IGRlbWFuZENvbW1lbnRzLmNvbW1lbnRUeXBlLFxuICAgICAgICBpc0ludGVybmFsOiBkZW1hbmRDb21tZW50cy5pc0ludGVybmFsLFxuICAgICAgICBjb21tZW50ZXJJZDogZGVtYW5kQ29tbWVudHMuY29tbWVudGVySWQsXG4gICAgICAgIGNyZWF0ZWRBdDogZGVtYW5kQ29tbWVudHMuY3JlYXRlZEF0LFxuICAgICAgICBhdXRob3I6IHtcbiAgICAgICAgICBpZDogdXNlcnMuaWQsXG4gICAgICAgICAgZmlyc3ROYW1lOiB1c2Vycy5maXJzdE5hbWUsXG4gICAgICAgICAgbGFzdE5hbWU6IHVzZXJzLmxhc3ROYW1lLFxuICAgICAgICAgIGVtYWlsOiB1c2Vycy5lbWFpbFxuICAgICAgICB9XG4gICAgICB9KS5mcm9tKGRlbWFuZENvbW1lbnRzKS5pbm5lckpvaW4odXNlcnMsIGVxMTIoZGVtYW5kQ29tbWVudHMuY29tbWVudGVySWQsIHVzZXJzLmlkKSkud2hlcmUoZXExMihkZW1hbmRDb21tZW50cy5kZW1hbmRJZCwgaWQpKS5vcmRlckJ5KGFzYyhkZW1hbmRDb21tZW50cy5jcmVhdGVkQXQpKTtcbiAgICAgIHJlcy5qc29uKGNvbW1lbnRzKTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgcmVzLnN0YXR1cyg1MDApLmpzb24oeyBtZXNzYWdlOiBcIkZhaWxlZCB0byBmZXRjaCBkZW1hbmQgY29tbWVudHNcIiB9KTtcbiAgICB9XG4gIH0pO1xuICBhcHAyLnBvc3QoXCIvYXBpL2RlbWFuZHMvOmlkL2NvbW1lbnRzXCIsIHJlcXVpcmVBdXRoLCBhc3luYyAocmVxLCByZXMpID0+IHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgeyBpZCB9ID0gcmVxLnBhcmFtcztcbiAgICAgIGNvbnN0IHVzZXIgPSByZXEudXNlcjtcbiAgICAgIGNvbnN0IGNvbW1lbnREYXRhID0gcmVxLmJvZHk7XG4gICAgICBjb25zdCB2YWxpZGF0ZWREYXRhID0gaW5zZXJ0RGVtYW5kQ29tbWVudFNjaGVtYS5wYXJzZSh7XG4gICAgICAgIC4uLmNvbW1lbnREYXRhLFxuICAgICAgICBkZW1hbmRJZDogaWQsXG4gICAgICAgIGNvbW1lbnRlcklkOiB1c2VyLmlkXG4gICAgICB9KTtcbiAgICAgIGNvbnN0IGRlbWFuZCA9IGF3YWl0IGRiLnNlbGVjdCgpLmZyb20oZGVtYW5kcykud2hlcmUoZXExMihkZW1hbmRzLmlkLCBpZCkpLmxpbWl0KDEpO1xuICAgICAgaWYgKGRlbWFuZC5sZW5ndGggPT09IDApIHtcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDA0KS5qc29uKHsgbWVzc2FnZTogXCJEZW1hbmQgbm90IGZvdW5kXCIgfSk7XG4gICAgICB9XG4gICAgICBjb25zdCBuZXdDb21tZW50ID0gYXdhaXQgZGIuaW5zZXJ0KGRlbWFuZENvbW1lbnRzKS52YWx1ZXModmFsaWRhdGVkRGF0YSkucmV0dXJuaW5nKCk7XG4gICAgICByZXMuc3RhdHVzKDIwMSkuanNvbihuZXdDb21tZW50WzBdKTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgaWYgKGVycm9yLm5hbWUgPT09IFwiWm9kRXJyb3JcIikge1xuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oeyBtZXNzYWdlOiBcIkludmFsaWQgY29tbWVudCBkYXRhXCIsIGVycm9yczogZXJyb3IuZXJyb3JzIH0pO1xuICAgICAgfVxuICAgICAgcmVzLnN0YXR1cyg1MDApLmpzb24oeyBtZXNzYWdlOiBcIkZhaWxlZCB0byBjcmVhdGUgY29tbWVudFwiIH0pO1xuICAgIH1cbiAgfSk7XG59XG5cbi8vIHNlcnZlci9hcGkvZmVhdHVyZS1yZXF1ZXN0cy50c1xuaW5pdF9zdG9yYWdlKCk7XG5pbml0X3NjaGVtYSgpO1xuaW1wb3J0IHsgeiBhcyB6MTQgfSBmcm9tIFwiem9kXCI7XG5mdW5jdGlvbiByZWdpc3RlckZlYXR1cmVSZXF1ZXN0Um91dGVzKGFwcDIpIHtcbiAgYXBwMi5nZXQoXCIvYXBpL2ZlYXR1cmUtcmVxdWVzdHNcIiwgcmVxdWlyZUF1dGgsIGFzeW5jIChyZXEsIHJlcykgPT4ge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCBjdXJyZW50VXNlciA9IHJlcS51c2VyIHx8IHJlcS5zZXNzaW9uPy51c2VyO1xuICAgICAgaWYgKCFjdXJyZW50VXNlcikge1xuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDEpLmpzb24oe1xuICAgICAgICAgIG1lc3NhZ2U6IFwiQXV0aGVudGljYXRpb24gcmVxdWlyZWRcIixcbiAgICAgICAgICBjb2RlOiBcIkFVVEhfUkVRVUlSRURcIlxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICAgIGNvbnNvbGUubG9nKFxuICAgICAgICBgXFx1ezFGNENCfSBGZXRjaGluZyBmZWF0dXJlIHJlcXVlc3RzIGZvciB1c2VyICR7Y3VycmVudFVzZXIuaWR9IHdpdGggcm9sZSAke2N1cnJlbnRVc2VyLnJvbGV9YFxuICAgICAgKTtcbiAgICAgIGNvbnN0IGZlYXR1cmVSZXF1ZXN0czIgPSBhd2FpdCBzdG9yYWdlLmdldEZlYXR1cmVSZXF1ZXN0c0ZvclVzZXIoXG4gICAgICAgIGN1cnJlbnRVc2VyLmlkLFxuICAgICAgICBjdXJyZW50VXNlci5yb2xlLFxuICAgICAgICBjdXJyZW50VXNlci5vcmdhbml6YXRpb25JZFxuICAgICAgKTtcbiAgICAgIGNvbnNvbGUubG9nKGBcXHUyNzA1IEZvdW5kICR7ZmVhdHVyZVJlcXVlc3RzMi5sZW5ndGh9IGZlYXR1cmUgcmVxdWVzdHMgZm9yIHVzZXIgJHtjdXJyZW50VXNlci5pZH1gKTtcbiAgICAgIHJlcy5qc29uKGZlYXR1cmVSZXF1ZXN0czIpO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKFwiXFx1Mjc0QyBFcnJvciBmZXRjaGluZyBmZWF0dXJlIHJlcXVlc3RzOlwiLCBlcnJvcik7XG4gICAgICByZXMuc3RhdHVzKDUwMCkuanNvbih7XG4gICAgICAgIGVycm9yOiBcIkludGVybmFsIHNlcnZlciBlcnJvclwiLFxuICAgICAgICBtZXNzYWdlOiBcIkZhaWxlZCB0byBmZXRjaCBmZWF0dXJlIHJlcXVlc3RzXCJcbiAgICAgIH0pO1xuICAgIH1cbiAgfSk7XG4gIGFwcDIuZ2V0KFwiL2FwaS9mZWF0dXJlLXJlcXVlc3RzLzppZFwiLCByZXF1aXJlQXV0aCwgYXN5bmMgKHJlcSwgcmVzKSA9PiB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHsgaWQgfSA9IHJlcS5wYXJhbXM7XG4gICAgICBjb25zdCBjdXJyZW50VXNlciA9IHJlcS51c2VyIHx8IHJlcS5zZXNzaW9uPy51c2VyO1xuICAgICAgaWYgKCFjdXJyZW50VXNlcikge1xuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDEpLmpzb24oe1xuICAgICAgICAgIG1lc3NhZ2U6IFwiQXV0aGVudGljYXRpb24gcmVxdWlyZWRcIixcbiAgICAgICAgICBjb2RlOiBcIkFVVEhfUkVRVUlSRURcIlxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICAgIGlmICghaWQpIHtcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHtcbiAgICAgICAgICBlcnJvcjogXCJCYWQgcmVxdWVzdFwiLFxuICAgICAgICAgIG1lc3NhZ2U6IFwiRmVhdHVyZSByZXF1ZXN0IElEIGlzIHJlcXVpcmVkXCJcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgICBjb25zdCBmZWF0dXJlUmVxdWVzdCA9IGF3YWl0IHN0b3JhZ2UuZ2V0RmVhdHVyZVJlcXVlc3QoXG4gICAgICAgIGlkLFxuICAgICAgICBjdXJyZW50VXNlci5pZCxcbiAgICAgICAgY3VycmVudFVzZXIucm9sZSxcbiAgICAgICAgY3VycmVudFVzZXIub3JnYW5pemF0aW9uSWRcbiAgICAgICk7XG4gICAgICBpZiAoIWZlYXR1cmVSZXF1ZXN0KSB7XG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwNCkuanNvbih7XG4gICAgICAgICAgZXJyb3I6IFwiTm90IGZvdW5kXCIsXG4gICAgICAgICAgbWVzc2FnZTogXCJGZWF0dXJlIHJlcXVlc3Qgbm90IGZvdW5kIG9yIGFjY2VzcyBkZW5pZWRcIlxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICAgIHJlcy5qc29uKGZlYXR1cmVSZXF1ZXN0KTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcihcIlxcdTI3NEMgRXJyb3IgZmV0Y2hpbmcgZmVhdHVyZSByZXF1ZXN0OlwiLCBlcnJvcik7XG4gICAgICByZXMuc3RhdHVzKDUwMCkuanNvbih7XG4gICAgICAgIGVycm9yOiBcIkludGVybmFsIHNlcnZlciBlcnJvclwiLFxuICAgICAgICBtZXNzYWdlOiBcIkZhaWxlZCB0byBmZXRjaCBmZWF0dXJlIHJlcXVlc3RcIlxuICAgICAgfSk7XG4gICAgfVxuICB9KTtcbiAgYXBwMi5wb3N0KFwiL2FwaS9mZWF0dXJlLXJlcXVlc3RzXCIsIHJlcXVpcmVBdXRoLCBhc3luYyAocmVxLCByZXMpID0+IHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgY3VycmVudFVzZXIgPSByZXEudXNlciB8fCByZXEuc2Vzc2lvbj8udXNlcjtcbiAgICAgIGlmICghY3VycmVudFVzZXIpIHtcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAxKS5qc29uKHtcbiAgICAgICAgICBtZXNzYWdlOiBcIkF1dGhlbnRpY2F0aW9uIHJlcXVpcmVkXCIsXG4gICAgICAgICAgY29kZTogXCJBVVRIX1JFUVVJUkVEXCJcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgICBjb25zdCB2YWxpZGF0aW9uID0gaW5zZXJ0RmVhdHVyZVJlcXVlc3RTY2hlbWEuc2FmZVBhcnNlKHtcbiAgICAgICAgLi4ucmVxLmJvZHksXG4gICAgICAgIGNyZWF0ZWRCeTogY3VycmVudFVzZXIuaWRcbiAgICAgIH0pO1xuICAgICAgaWYgKCF2YWxpZGF0aW9uLnN1Y2Nlc3MpIHtcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHtcbiAgICAgICAgICBlcnJvcjogXCJWYWxpZGF0aW9uIGZhaWxlZFwiLFxuICAgICAgICAgIG1lc3NhZ2U6IFwiSW52YWxpZCBmZWF0dXJlIHJlcXVlc3QgZGF0YVwiLFxuICAgICAgICAgIGRldGFpbHM6IHZhbGlkYXRpb24uZXJyb3IuaXNzdWVzXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgICAgY29uc3QgZmVhdHVyZVJlcXVlc3REYXRhID0gdmFsaWRhdGlvbi5kYXRhO1xuICAgICAgY29uc3QgZmVhdHVyZVJlcXVlc3QgPSBhd2FpdCBzdG9yYWdlLmNyZWF0ZUZlYXR1cmVSZXF1ZXN0KGZlYXR1cmVSZXF1ZXN0RGF0YSk7XG4gICAgICBjb25zb2xlLmxvZyhgXFx1ezFGNEExfSBDcmVhdGVkIG5ldyBmZWF0dXJlIHJlcXVlc3QgJHtmZWF0dXJlUmVxdWVzdC5pZH0gYnkgdXNlciAke2N1cnJlbnRVc2VyLmlkfWApO1xuICAgICAgcmVzLnN0YXR1cygyMDEpLmpzb24oZmVhdHVyZVJlcXVlc3QpO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKFwiXFx1Mjc0QyBFcnJvciBjcmVhdGluZyBmZWF0dXJlIHJlcXVlc3Q6XCIsIGVycm9yKTtcbiAgICAgIHJlcy5zdGF0dXMoNTAwKS5qc29uKHtcbiAgICAgICAgZXJyb3I6IFwiSW50ZXJuYWwgc2VydmVyIGVycm9yXCIsXG4gICAgICAgIG1lc3NhZ2U6IFwiRmFpbGVkIHRvIGNyZWF0ZSBmZWF0dXJlIHJlcXVlc3RcIlxuICAgICAgfSk7XG4gICAgfVxuICB9KTtcbiAgYXBwMi5wYXRjaChcIi9hcGkvZmVhdHVyZS1yZXF1ZXN0cy86aWRcIiwgcmVxdWlyZUF1dGgsIGFzeW5jIChyZXEsIHJlcykgPT4ge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCB7IGlkIH0gPSByZXEucGFyYW1zO1xuICAgICAgY29uc3QgY3VycmVudFVzZXIgPSByZXEudXNlciB8fCByZXEuc2Vzc2lvbj8udXNlcjtcbiAgICAgIGlmICghY3VycmVudFVzZXIpIHtcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAxKS5qc29uKHtcbiAgICAgICAgICBtZXNzYWdlOiBcIkF1dGhlbnRpY2F0aW9uIHJlcXVpcmVkXCIsXG4gICAgICAgICAgY29kZTogXCJBVVRIX1JFUVVJUkVEXCJcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgICBpZiAoY3VycmVudFVzZXIucm9sZSAhPT0gXCJhZG1pblwiKSB7XG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMykuanNvbih7XG4gICAgICAgICAgZXJyb3I6IFwiRm9yYmlkZGVuXCIsXG4gICAgICAgICAgbWVzc2FnZTogXCJPbmx5IGFkbWluaXN0cmF0b3JzIGNhbiBlZGl0IGZlYXR1cmUgcmVxdWVzdHNcIlxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICAgIGlmICghaWQpIHtcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHtcbiAgICAgICAgICBlcnJvcjogXCJCYWQgcmVxdWVzdFwiLFxuICAgICAgICAgIG1lc3NhZ2U6IFwiRmVhdHVyZSByZXF1ZXN0IElEIGlzIHJlcXVpcmVkXCJcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgICBjb25zdCB1cGRhdGVTY2hlbWEgPSB6MTQub2JqZWN0KHtcbiAgICAgICAgdGl0bGU6IHoxNC5zdHJpbmcoKS5taW4oMSwgXCJUaXRsZSBpcyByZXF1aXJlZFwiKS5tYXgoMjAwLCBcIlRpdGxlIG11c3Qgbm90IGV4Y2VlZCAyMDAgY2hhcmFjdGVyc1wiKS5vcHRpb25hbCgpLFxuICAgICAgICBkZXNjcmlwdGlvbjogejE0LnN0cmluZygpLm1pbigxMCwgXCJEZXNjcmlwdGlvbiBtdXN0IGJlIGF0IGxlYXN0IDEwIGNoYXJhY3RlcnNcIikubWF4KDJlMywgXCJEZXNjcmlwdGlvbiBtdXN0IG5vdCBleGNlZWQgMjAwMCBjaGFyYWN0ZXJzXCIpLm9wdGlvbmFsKCksXG4gICAgICAgIG5lZWQ6IHoxNC5zdHJpbmcoKS5taW4oNSwgXCJOZWVkIG11c3QgYmUgYXQgbGVhc3QgNSBjaGFyYWN0ZXJzXCIpLm1heCg1MDAsIFwiTmVlZCBtdXN0IG5vdCBleGNlZWQgNTAwIGNoYXJhY3RlcnNcIikub3B0aW9uYWwoKSxcbiAgICAgICAgY2F0ZWdvcnk6IHoxNC5lbnVtKFtcbiAgICAgICAgICBcImRhc2hib2FyZFwiLFxuICAgICAgICAgIFwicHJvcGVydHlfbWFuYWdlbWVudFwiLFxuICAgICAgICAgIFwicmVzaWRlbnRfbWFuYWdlbWVudFwiLFxuICAgICAgICAgIFwiZmluYW5jaWFsX21hbmFnZW1lbnRcIixcbiAgICAgICAgICBcIm1haW50ZW5hbmNlXCIsXG4gICAgICAgICAgXCJkb2N1bWVudF9tYW5hZ2VtZW50XCIsXG4gICAgICAgICAgXCJjb21tdW5pY2F0aW9uXCIsXG4gICAgICAgICAgXCJyZXBvcnRzXCIsXG4gICAgICAgICAgXCJtb2JpbGVfYXBwXCIsXG4gICAgICAgICAgXCJpbnRlZ3JhdGlvbnNcIixcbiAgICAgICAgICBcInNlY3VyaXR5XCIsXG4gICAgICAgICAgXCJwZXJmb3JtYW5jZVwiLFxuICAgICAgICAgIFwib3RoZXJcIlxuICAgICAgICBdKS5vcHRpb25hbCgpLFxuICAgICAgICBwYWdlOiB6MTQuc3RyaW5nKCkubWluKDEsIFwiUGFnZSBpcyByZXF1aXJlZFwiKS5vcHRpb25hbCgpLFxuICAgICAgICBzdGF0dXM6IHoxNC5lbnVtKFtcInN1Ym1pdHRlZFwiLCBcInVuZGVyX3Jldmlld1wiLCBcInBsYW5uZWRcIiwgXCJpbl9wcm9ncmVzc1wiLCBcImNvbXBsZXRlZFwiLCBcInJlamVjdGVkXCJdKS5vcHRpb25hbCgpLFxuICAgICAgICBhc3NpZ25lZFRvOiB6MTQuc3RyaW5nKCkudXVpZCgpLm51bGxhYmxlKCkub3B0aW9uYWwoKSxcbiAgICAgICAgYWRtaW5Ob3RlczogejE0LnN0cmluZygpLm9wdGlvbmFsKCksXG4gICAgICAgIG1lcmdlZEludG9JZDogejE0LnN0cmluZygpLnV1aWQoKS5udWxsYWJsZSgpLm9wdGlvbmFsKClcbiAgICAgIH0pO1xuICAgICAgY29uc3QgdmFsaWRhdGlvbiA9IHVwZGF0ZVNjaGVtYS5zYWZlUGFyc2UocmVxLmJvZHkpO1xuICAgICAgaWYgKCF2YWxpZGF0aW9uLnN1Y2Nlc3MpIHtcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHtcbiAgICAgICAgICBlcnJvcjogXCJWYWxpZGF0aW9uIGZhaWxlZFwiLFxuICAgICAgICAgIG1lc3NhZ2U6IFwiSW52YWxpZCB1cGRhdGUgZGF0YVwiLFxuICAgICAgICAgIGRldGFpbHM6IHZhbGlkYXRpb24uZXJyb3IuaXNzdWVzXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgICAgY29uc3QgdXBkYXRlcyA9IHZhbGlkYXRpb24uZGF0YTtcbiAgICAgIGNvbnN0IGZlYXR1cmVSZXF1ZXN0ID0gYXdhaXQgc3RvcmFnZS51cGRhdGVGZWF0dXJlUmVxdWVzdChcbiAgICAgICAgaWQsXG4gICAgICAgIHVwZGF0ZXMsXG4gICAgICAgIGN1cnJlbnRVc2VyLmlkLFxuICAgICAgICBjdXJyZW50VXNlci5yb2xlXG4gICAgICApO1xuICAgICAgaWYgKCFmZWF0dXJlUmVxdWVzdCkge1xuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDQpLmpzb24oe1xuICAgICAgICAgIGVycm9yOiBcIk5vdCBmb3VuZFwiLFxuICAgICAgICAgIG1lc3NhZ2U6IFwiRmVhdHVyZSByZXF1ZXN0IG5vdCBmb3VuZCBvciBhY2Nlc3MgZGVuaWVkXCJcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgICBjb25zb2xlLmxvZyhgXFx1ezFGNEREfSBVcGRhdGVkIGZlYXR1cmUgcmVxdWVzdCAke2lkfSBieSB1c2VyICR7Y3VycmVudFVzZXIuaWR9YCk7XG4gICAgICByZXMuanNvbihmZWF0dXJlUmVxdWVzdCk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoXCJcXHUyNzRDIEVycm9yIHVwZGF0aW5nIGZlYXR1cmUgcmVxdWVzdDpcIiwgZXJyb3IpO1xuICAgICAgcmVzLnN0YXR1cyg1MDApLmpzb24oe1xuICAgICAgICBlcnJvcjogXCJJbnRlcm5hbCBzZXJ2ZXIgZXJyb3JcIixcbiAgICAgICAgbWVzc2FnZTogXCJGYWlsZWQgdG8gdXBkYXRlIGZlYXR1cmUgcmVxdWVzdFwiXG4gICAgICB9KTtcbiAgICB9XG4gIH0pO1xuICBhcHAyLmRlbGV0ZShcIi9hcGkvZmVhdHVyZS1yZXF1ZXN0cy86aWRcIiwgcmVxdWlyZUF1dGgsIGFzeW5jIChyZXEsIHJlcykgPT4ge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCB7IGlkIH0gPSByZXEucGFyYW1zO1xuICAgICAgY29uc3QgY3VycmVudFVzZXIgPSByZXEudXNlciB8fCByZXEuc2Vzc2lvbj8udXNlcjtcbiAgICAgIGlmICghY3VycmVudFVzZXIpIHtcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAxKS5qc29uKHtcbiAgICAgICAgICBtZXNzYWdlOiBcIkF1dGhlbnRpY2F0aW9uIHJlcXVpcmVkXCIsXG4gICAgICAgICAgY29kZTogXCJBVVRIX1JFUVVJUkVEXCJcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgICBpZiAoY3VycmVudFVzZXIucm9sZSAhPT0gXCJhZG1pblwiKSB7XG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMykuanNvbih7XG4gICAgICAgICAgZXJyb3I6IFwiRm9yYmlkZGVuXCIsXG4gICAgICAgICAgbWVzc2FnZTogXCJPbmx5IGFkbWluaXN0cmF0b3JzIGNhbiBkZWxldGUgZmVhdHVyZSByZXF1ZXN0c1wiXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgICAgaWYgKCFpZCkge1xuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oe1xuICAgICAgICAgIGVycm9yOiBcIkJhZCByZXF1ZXN0XCIsXG4gICAgICAgICAgbWVzc2FnZTogXCJGZWF0dXJlIHJlcXVlc3QgSUQgaXMgcmVxdWlyZWRcIlxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICAgIGNvbnN0IGRlbGV0ZWQgPSBhd2FpdCBzdG9yYWdlLmRlbGV0ZUZlYXR1cmVSZXF1ZXN0KGlkLCBjdXJyZW50VXNlci5pZCwgY3VycmVudFVzZXIucm9sZSk7XG4gICAgICBpZiAoIWRlbGV0ZWQpIHtcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDA0KS5qc29uKHtcbiAgICAgICAgICBlcnJvcjogXCJOb3QgZm91bmRcIixcbiAgICAgICAgICBtZXNzYWdlOiBcIkZlYXR1cmUgcmVxdWVzdCBub3QgZm91bmQgb3IgYWNjZXNzIGRlbmllZFwiXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgICAgY29uc29sZS5sb2coYFxcdXsxRjVEMX1cXHVGRTBGIERlbGV0ZWQgZmVhdHVyZSByZXF1ZXN0ICR7aWR9IGJ5IHVzZXIgJHtjdXJyZW50VXNlci5pZH1gKTtcbiAgICAgIHJlcy5zdGF0dXMoMjA0KS5zZW5kKCk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoXCJcXHUyNzRDIEVycm9yIGRlbGV0aW5nIGZlYXR1cmUgcmVxdWVzdDpcIiwgZXJyb3IpO1xuICAgICAgcmVzLnN0YXR1cyg1MDApLmpzb24oe1xuICAgICAgICBlcnJvcjogXCJJbnRlcm5hbCBzZXJ2ZXIgZXJyb3JcIixcbiAgICAgICAgbWVzc2FnZTogXCJGYWlsZWQgdG8gZGVsZXRlIGZlYXR1cmUgcmVxdWVzdFwiXG4gICAgICB9KTtcbiAgICB9XG4gIH0pO1xuICBhcHAyLnBvc3QoXCIvYXBpL2ZlYXR1cmUtcmVxdWVzdHMvOmlkL3Vwdm90ZVwiLCByZXF1aXJlQXV0aCwgYXN5bmMgKHJlcSwgcmVzKSA9PiB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHsgaWQgfSA9IHJlcS5wYXJhbXM7XG4gICAgICBjb25zdCBjdXJyZW50VXNlciA9IHJlcS51c2VyIHx8IHJlcS5zZXNzaW9uPy51c2VyO1xuICAgICAgaWYgKCFjdXJyZW50VXNlcikge1xuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDEpLmpzb24oe1xuICAgICAgICAgIG1lc3NhZ2U6IFwiQXV0aGVudGljYXRpb24gcmVxdWlyZWRcIixcbiAgICAgICAgICBjb2RlOiBcIkFVVEhfUkVRVUlSRURcIlxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICAgIGlmICghaWQpIHtcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHtcbiAgICAgICAgICBlcnJvcjogXCJCYWQgcmVxdWVzdFwiLFxuICAgICAgICAgIG1lc3NhZ2U6IFwiRmVhdHVyZSByZXF1ZXN0IElEIGlzIHJlcXVpcmVkXCJcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgICBjb25zdCB2YWxpZGF0aW9uID0gaW5zZXJ0RmVhdHVyZVJlcXVlc3RVcHZvdGVTY2hlbWEuc2FmZVBhcnNlKHtcbiAgICAgICAgZmVhdHVyZVJlcXVlc3RJZDogaWQsXG4gICAgICAgIHVzZXJJZDogY3VycmVudFVzZXIuaWRcbiAgICAgIH0pO1xuICAgICAgaWYgKCF2YWxpZGF0aW9uLnN1Y2Nlc3MpIHtcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHtcbiAgICAgICAgICBlcnJvcjogXCJWYWxpZGF0aW9uIGZhaWxlZFwiLFxuICAgICAgICAgIG1lc3NhZ2U6IFwiSW52YWxpZCB1cHZvdGUgZGF0YVwiLFxuICAgICAgICAgIGRldGFpbHM6IHZhbGlkYXRpb24uZXJyb3IuaXNzdWVzXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgICAgY29uc3QgdXB2b3RlRGF0YSA9IHZhbGlkYXRpb24uZGF0YTtcbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHN0b3JhZ2UudXB2b3RlRmVhdHVyZVJlcXVlc3QodXB2b3RlRGF0YSk7XG4gICAgICBpZiAoIXJlc3VsdC5zdWNjZXNzKSB7XG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7XG4gICAgICAgICAgZXJyb3I6IFwiVXB2b3RlIGZhaWxlZFwiLFxuICAgICAgICAgIG1lc3NhZ2U6IHJlc3VsdC5tZXNzYWdlXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgICAgY29uc29sZS5sb2coYFxcdXsxRjQ0RH0gVXNlciAke2N1cnJlbnRVc2VyLmlkfSB1cHZvdGVkIGZlYXR1cmUgcmVxdWVzdCAke2lkfWApO1xuICAgICAgcmVzLmpzb24ocmVzdWx0LmRhdGEpO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKFwiXFx1Mjc0QyBFcnJvciB1cHZvdGluZyBmZWF0dXJlIHJlcXVlc3Q6XCIsIGVycm9yKTtcbiAgICAgIHJlcy5zdGF0dXMoNTAwKS5qc29uKHtcbiAgICAgICAgZXJyb3I6IFwiSW50ZXJuYWwgc2VydmVyIGVycm9yXCIsXG4gICAgICAgIG1lc3NhZ2U6IFwiRmFpbGVkIHRvIHVwdm90ZSBmZWF0dXJlIHJlcXVlc3RcIlxuICAgICAgfSk7XG4gICAgfVxuICB9KTtcbiAgYXBwMi5kZWxldGUoXCIvYXBpL2ZlYXR1cmUtcmVxdWVzdHMvOmlkL3Vwdm90ZVwiLCByZXF1aXJlQXV0aCwgYXN5bmMgKHJlcSwgcmVzKSA9PiB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHsgaWQgfSA9IHJlcS5wYXJhbXM7XG4gICAgICBjb25zdCBjdXJyZW50VXNlciA9IHJlcS51c2VyIHx8IHJlcS5zZXNzaW9uPy51c2VyO1xuICAgICAgaWYgKCFjdXJyZW50VXNlcikge1xuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDEpLmpzb24oe1xuICAgICAgICAgIG1lc3NhZ2U6IFwiQXV0aGVudGljYXRpb24gcmVxdWlyZWRcIixcbiAgICAgICAgICBjb2RlOiBcIkFVVEhfUkVRVUlSRURcIlxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICAgIGlmICghaWQpIHtcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHtcbiAgICAgICAgICBlcnJvcjogXCJCYWQgcmVxdWVzdFwiLFxuICAgICAgICAgIG1lc3NhZ2U6IFwiRmVhdHVyZSByZXF1ZXN0IElEIGlzIHJlcXVpcmVkXCJcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBzdG9yYWdlLnJlbW92ZUZlYXR1cmVSZXF1ZXN0VXB2b3RlKGlkLCBjdXJyZW50VXNlci5pZCk7XG4gICAgICBpZiAoIXJlc3VsdC5zdWNjZXNzKSB7XG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7XG4gICAgICAgICAgZXJyb3I6IFwiUmVtb3ZlIHVwdm90ZSBmYWlsZWRcIixcbiAgICAgICAgICBtZXNzYWdlOiByZXN1bHQubWVzc2FnZVxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICAgIGNvbnNvbGUubG9nKGBcXHV7MUY0NEV9IFVzZXIgJHtjdXJyZW50VXNlci5pZH0gcmVtb3ZlZCB1cHZvdGUgZnJvbSBmZWF0dXJlIHJlcXVlc3QgJHtpZH1gKTtcbiAgICAgIHJlcy5qc29uKHJlc3VsdC5kYXRhKTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcihcIlxcdTI3NEMgRXJyb3IgcmVtb3ZpbmcgdXB2b3RlIGZyb20gZmVhdHVyZSByZXF1ZXN0OlwiLCBlcnJvcik7XG4gICAgICByZXMuc3RhdHVzKDUwMCkuanNvbih7XG4gICAgICAgIGVycm9yOiBcIkludGVybmFsIHNlcnZlciBlcnJvclwiLFxuICAgICAgICBtZXNzYWdlOiBcIkZhaWxlZCB0byByZW1vdmUgdXB2b3RlIGZyb20gZmVhdHVyZSByZXF1ZXN0XCJcbiAgICAgIH0pO1xuICAgIH1cbiAgfSk7XG59XG5cbi8vIHNlcnZlci9hcGkvY29udGFjdHMudHNcbmluaXRfZGIoKTtcbmluaXRfc2NoZW1hKCk7XG5pbXBvcnQgeyBlcSBhcyBlcTEzLCBhbmQgYXMgYW5kMTMgfSBmcm9tIFwiZHJpenpsZS1vcm1cIjtcbmZ1bmN0aW9uIHJlZ2lzdGVyQ29udGFjdFJvdXRlcyhhcHAyKSB7XG4gIGFwcDIuZ2V0KFwiL2FwaS9jb250YWN0cy86ZW50aXR5LzplbnRpdHlJZFwiLCByZXF1aXJlQXV0aCwgYXN5bmMgKHJlcSwgcmVzKSA9PiB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHsgZW50aXR5LCBlbnRpdHlJZCB9ID0gcmVxLnBhcmFtcztcbiAgICAgIGNvbnN0IHVzZXIgPSByZXEudXNlcjtcbiAgICAgIGlmICghW1wib3JnYW5pemF0aW9uXCIsIFwiYnVpbGRpbmdcIiwgXCJyZXNpZGVuY2VcIl0uaW5jbHVkZXMoZW50aXR5KSkge1xuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oeyBtZXNzYWdlOiBcIkludmFsaWQgZW50aXR5IHR5cGVcIiB9KTtcbiAgICAgIH1cbiAgICAgIGNvbnN0IGVudGl0eUNvbnRhY3RzID0gYXdhaXQgZGIuc2VsZWN0KCkuZnJvbShjb250YWN0cykud2hlcmUoXG4gICAgICAgIGFuZDEzKFxuICAgICAgICAgIGVxMTMoY29udGFjdHMuZW50aXR5LCBlbnRpdHkpLFxuICAgICAgICAgIGVxMTMoY29udGFjdHMuZW50aXR5SWQsIGVudGl0eUlkKSxcbiAgICAgICAgICBlcTEzKGNvbnRhY3RzLmlzQWN0aXZlLCB0cnVlKVxuICAgICAgICApXG4gICAgICApO1xuICAgICAgcmVzLmpzb24oZW50aXR5Q29udGFjdHMpO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKFwiXFx1Mjc0QyBFcnJvciBmZXRjaGluZyBlbnRpdHkgY29udGFjdHM6XCIsIGVycm9yKTtcbiAgICAgIHJlcy5zdGF0dXMoNTAwKS5qc29uKHsgbWVzc2FnZTogXCJGYWlsZWQgdG8gZmV0Y2ggY29udGFjdHNcIiB9KTtcbiAgICB9XG4gIH0pO1xuICBhcHAyLmdldChcIi9hcGkvcmVzaWRlbmNlcy86cmVzaWRlbmNlSWQvY29udGFjdHNcIiwgcmVxdWlyZUF1dGgsIGFzeW5jIChyZXEsIHJlcykgPT4ge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCB7IHJlc2lkZW5jZUlkIH0gPSByZXEucGFyYW1zO1xuICAgICAgY29uc3QgdXNlciA9IHJlcS51c2VyO1xuICAgICAgaWYgKHVzZXIucm9sZSAhPT0gXCJhZG1pblwiKSB7XG4gICAgICAgIGNvbnN0IGhhc0FjY2VzcyA9IGF3YWl0IGRiLnNlbGVjdCgpLmZyb20ocmVzaWRlbmNlcykuaW5uZXJKb2luKGJ1aWxkaW5ncywgZXExMyhyZXNpZGVuY2VzLmJ1aWxkaW5nSWQsIGJ1aWxkaW5ncy5pZCkpLmlubmVySm9pbihvcmdhbml6YXRpb25zLCBlcTEzKGJ1aWxkaW5ncy5vcmdhbml6YXRpb25JZCwgb3JnYW5pemF0aW9ucy5pZCkpLndoZXJlKGFuZDEzKGVxMTMocmVzaWRlbmNlcy5pZCwgcmVzaWRlbmNlSWQpLCBlcTEzKHJlc2lkZW5jZXMuaXNBY3RpdmUsIHRydWUpKSk7XG4gICAgICAgIGlmIChoYXNBY2Nlc3MubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAzKS5qc29uKHsgbWVzc2FnZTogXCJBY2Nlc3MgZGVuaWVkXCIgfSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGNvbnN0IHJlc2lkZW5jZUNvbnRhY3RzID0gYXdhaXQgZGIuc2VsZWN0KCkuZnJvbShjb250YWN0cykud2hlcmUoXG4gICAgICAgIGFuZDEzKFxuICAgICAgICAgIGVxMTMoY29udGFjdHMuZW50aXR5LCBcInJlc2lkZW5jZVwiKSxcbiAgICAgICAgICBlcTEzKGNvbnRhY3RzLmVudGl0eUlkLCByZXNpZGVuY2VJZCksXG4gICAgICAgICAgZXExMyhjb250YWN0cy5pc0FjdGl2ZSwgdHJ1ZSlcbiAgICAgICAgKVxuICAgICAgKTtcbiAgICAgIHJlcy5qc29uKHJlc2lkZW5jZUNvbnRhY3RzKTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcihcIlxcdTI3NEMgRXJyb3IgZmV0Y2hpbmcgcmVzaWRlbmNlIGNvbnRhY3RzOlwiLCBlcnJvcik7XG4gICAgICByZXMuc3RhdHVzKDUwMCkuanNvbih7IG1lc3NhZ2U6IFwiRmFpbGVkIHRvIGZldGNoIHJlc2lkZW5jZSBjb250YWN0c1wiIH0pO1xuICAgIH1cbiAgfSk7XG4gIGFwcDIuZ2V0KFwiL2FwaS9jb250YWN0c1wiLCByZXF1aXJlQXV0aCwgYXN5bmMgKHJlcSwgcmVzKSA9PiB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHsgZW50aXR5LCBlbnRpdHlJZCB9ID0gcmVxLnF1ZXJ5O1xuICAgICAgY29uc3QgdXNlciA9IHJlcS51c2VyO1xuICAgICAgaWYgKCFlbnRpdHkgfHwgIWVudGl0eUlkKSB7XG4gICAgICAgIHJldHVybiByZXMuanNvbihbXSk7XG4gICAgICB9XG4gICAgICBpZiAoZW50aXR5ID09PSBcImJ1aWxkaW5nXCIpIHtcbiAgICAgICAgY29uc3QgaGFzQWNjZXNzID0gYXdhaXQgZGIuc2VsZWN0KCkuZnJvbShidWlsZGluZ3MpLmlubmVySm9pbihvcmdhbml6YXRpb25zLCBlcTEzKGJ1aWxkaW5ncy5vcmdhbml6YXRpb25JZCwgb3JnYW5pemF0aW9ucy5pZCkpLndoZXJlKGFuZDEzKGVxMTMoYnVpbGRpbmdzLmlkLCBlbnRpdHlJZCksIGVxMTMoYnVpbGRpbmdzLmlzQWN0aXZlLCB0cnVlKSkpO1xuICAgICAgICBpZiAoaGFzQWNjZXNzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwNCkuanNvbih7IG1lc3NhZ2U6IFwiQnVpbGRpbmcgbm90IGZvdW5kXCIgfSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGNvbnN0IGVudGl0eUNvbnRhY3RzID0gYXdhaXQgZGIuc2VsZWN0KCkuZnJvbShjb250YWN0cykud2hlcmUoXG4gICAgICAgIGFuZDEzKFxuICAgICAgICAgIGVxMTMoY29udGFjdHMuZW50aXR5LCBlbnRpdHkpLFxuICAgICAgICAgIGVxMTMoY29udGFjdHMuZW50aXR5SWQsIGVudGl0eUlkKSxcbiAgICAgICAgICBlcTEzKGNvbnRhY3RzLmlzQWN0aXZlLCB0cnVlKVxuICAgICAgICApXG4gICAgICApO1xuICAgICAgcmVzLmpzb24oZW50aXR5Q29udGFjdHMpO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKFwiXFx1Mjc0QyBFcnJvciBmZXRjaGluZyBjb250YWN0czpcIiwgZXJyb3IpO1xuICAgICAgcmVzLnN0YXR1cyg1MDApLmpzb24oeyBtZXNzYWdlOiBcIkZhaWxlZCB0byBmZXRjaCBjb250YWN0c1wiIH0pO1xuICAgIH1cbiAgfSk7XG4gIGFwcDIucG9zdChcIi9hcGkvY29udGFjdHNcIiwgcmVxdWlyZUF1dGgsIGFzeW5jIChyZXEsIHJlcykgPT4ge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCB1c2VyID0gcmVxLnVzZXI7XG4gICAgICBjb25zdCB2YWxpZGF0ZWREYXRhID0gaW5zZXJ0Q29udGFjdFNjaGVtYS5wYXJzZShyZXEuYm9keSk7XG4gICAgICBjb25zdCB7IGVudGl0eSwgZW50aXR5SWQsIG5hbWUsIGVtYWlsLCBwaG9uZSwgY29udGFjdENhdGVnb3J5IH0gPSB2YWxpZGF0ZWREYXRhO1xuICAgICAgaWYgKGVudGl0eSA9PT0gXCJidWlsZGluZ1wiICYmIHVzZXIucm9sZSAhPT0gXCJhZG1pblwiICYmIHVzZXIucm9sZSAhPT0gXCJtYW5hZ2VyXCIpIHtcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAzKS5qc29uKHsgbWVzc2FnZTogXCJPbmx5IG1hbmFnZXJzIGFuZCBhZG1pbnMgY2FuIGFkZCBidWlsZGluZyBjb250YWN0c1wiIH0pO1xuICAgICAgfVxuICAgICAgaWYgKGVudGl0eSA9PT0gXCJyZXNpZGVuY2VcIikge1xuICAgICAgICBjb25zdCByZXNpZGVuY2UgPSBhd2FpdCBkYi5zZWxlY3QoKS5mcm9tKHJlc2lkZW5jZXMpLndoZXJlKGVxMTMocmVzaWRlbmNlcy5pZCwgZW50aXR5SWQpKS5saW1pdCgxKTtcbiAgICAgICAgaWYgKHJlc2lkZW5jZS5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oeyBtZXNzYWdlOiBcIlJlc2lkZW5jZSBub3QgZm91bmRcIiB9KTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIGlmIChlbnRpdHkgPT09IFwiYnVpbGRpbmdcIikge1xuICAgICAgICBjb25zdCBidWlsZGluZyA9IGF3YWl0IGRiLnNlbGVjdCgpLmZyb20oYnVpbGRpbmdzKS53aGVyZShlcTEzKGJ1aWxkaW5ncy5pZCwgZW50aXR5SWQpKS5saW1pdCgxKTtcbiAgICAgICAgaWYgKGJ1aWxkaW5nLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7IG1lc3NhZ2U6IFwiQnVpbGRpbmcgbm90IGZvdW5kXCIgfSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGNvbnN0IFtuZXdDb250YWN0XSA9IGF3YWl0IGRiLmluc2VydChjb250YWN0cykudmFsdWVzKFtcbiAgICAgICAge1xuICAgICAgICAgIC4uLnZhbGlkYXRlZERhdGEsXG4gICAgICAgICAgZW50aXR5OiB2YWxpZGF0ZWREYXRhLmVudGl0eSxcbiAgICAgICAgICBjb250YWN0Q2F0ZWdvcnk6IHZhbGlkYXRlZERhdGEuY29udGFjdENhdGVnb3J5XG4gICAgICAgIH1cbiAgICAgIF0pLnJldHVybmluZygpO1xuICAgICAgcmVzLnN0YXR1cygyMDEpLmpzb24obmV3Q29udGFjdCk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoXCJcXHUyNzRDIEVycm9yIGNyZWF0aW5nIGNvbnRhY3Q6XCIsIGVycm9yKTtcbiAgICAgIHJlcy5zdGF0dXMoNTAwKS5qc29uKHsgbWVzc2FnZTogXCJGYWlsZWQgdG8gY3JlYXRlIGNvbnRhY3RcIiB9KTtcbiAgICB9XG4gIH0pO1xuICBhcHAyLnBhdGNoKFwiL2FwaS9jb250YWN0cy86aWRcIiwgcmVxdWlyZUF1dGgsIGFzeW5jIChyZXEsIHJlcykgPT4ge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCB7IGlkIH0gPSByZXEucGFyYW1zO1xuICAgICAgY29uc3QgdXNlciA9IHJlcS51c2VyO1xuICAgICAgY29uc3QgdXBkYXRlcyA9IHJlcS5ib2R5O1xuICAgICAgY29uc3QgZXhpc3RpbmcgPSBhd2FpdCBkYi5zZWxlY3QoKS5mcm9tKGNvbnRhY3RzKS53aGVyZShlcTEzKGNvbnRhY3RzLmlkLCBpZCkpLmxpbWl0KDEpO1xuICAgICAgaWYgKGV4aXN0aW5nLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDQpLmpzb24oeyBtZXNzYWdlOiBcIkNvbnRhY3Qgbm90IGZvdW5kXCIgfSk7XG4gICAgICB9XG4gICAgICBjb25zdCBjb250YWN0ID0gZXhpc3RpbmdbMF07XG4gICAgICBpZiAodXNlci5yb2xlICE9PSBcImFkbWluXCIgJiYgdXNlci5yb2xlICE9PSBcIm1hbmFnZXJcIikge1xuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDMpLmpzb24oeyBtZXNzYWdlOiBcIkFjY2VzcyBkZW5pZWRcIiB9KTtcbiAgICAgIH1cbiAgICAgIGNvbnN0IFt1cGRhdGVkQ29udGFjdF0gPSBhd2FpdCBkYi51cGRhdGUoY29udGFjdHMpLnNldCh7XG4gICAgICAgIC4uLnVwZGF0ZXMsXG4gICAgICAgIHVwZGF0ZWRBdDogLyogQF9fUFVSRV9fICovIG5ldyBEYXRlKClcbiAgICAgIH0pLndoZXJlKGVxMTMoY29udGFjdHMuaWQsIGlkKSkucmV0dXJuaW5nKCk7XG4gICAgICByZXMuanNvbih1cGRhdGVkQ29udGFjdCk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoXCJcXHUyNzRDIEVycm9yIHVwZGF0aW5nIGNvbnRhY3Q6XCIsIGVycm9yKTtcbiAgICAgIHJlcy5zdGF0dXMoNTAwKS5qc29uKHsgbWVzc2FnZTogXCJGYWlsZWQgdG8gdXBkYXRlIGNvbnRhY3RcIiB9KTtcbiAgICB9XG4gIH0pO1xuICBhcHAyLmRlbGV0ZShcIi9hcGkvY29udGFjdHMvOmlkXCIsIHJlcXVpcmVBdXRoLCBhc3luYyAocmVxLCByZXMpID0+IHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgeyBpZCB9ID0gcmVxLnBhcmFtcztcbiAgICAgIGNvbnN0IHVzZXIgPSByZXEudXNlcjtcbiAgICAgIGNvbnN0IGV4aXN0aW5nID0gYXdhaXQgZGIuc2VsZWN0KCkuZnJvbShjb250YWN0cykud2hlcmUoZXExMyhjb250YWN0cy5pZCwgaWQpKS5saW1pdCgxKTtcbiAgICAgIGlmIChleGlzdGluZy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDA0KS5qc29uKHsgbWVzc2FnZTogXCJDb250YWN0IG5vdCBmb3VuZFwiIH0pO1xuICAgICAgfVxuICAgICAgY29uc3QgY29udGFjdCA9IGV4aXN0aW5nWzBdO1xuICAgICAgaWYgKHVzZXIucm9sZSAhPT0gXCJhZG1pblwiICYmIHVzZXIucm9sZSAhPT0gXCJtYW5hZ2VyXCIgJiYgdXNlci5yb2xlICE9PSBcInJlc2lkZW50XCIpIHtcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAzKS5qc29uKHsgbWVzc2FnZTogXCJBY2Nlc3MgZGVuaWVkXCIgfSk7XG4gICAgICB9XG4gICAgICBhd2FpdCBkYi51cGRhdGUoY29udGFjdHMpLnNldCh7XG4gICAgICAgIGlzQWN0aXZlOiBmYWxzZSxcbiAgICAgICAgdXBkYXRlZEF0OiAvKiBAX19QVVJFX18gKi8gbmV3IERhdGUoKVxuICAgICAgfSkud2hlcmUoZXExMyhjb250YWN0cy5pZCwgaWQpKTtcbiAgICAgIHJlcy5qc29uKHsgbWVzc2FnZTogXCJDb250YWN0IGRlbGV0ZWQgc3VjY2Vzc2Z1bGx5XCIgfSk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoXCJcXHUyNzRDIEVycm9yIGRlbGV0aW5nIGNvbnRhY3Q6XCIsIGVycm9yKTtcbiAgICAgIHJlcy5zdGF0dXMoNTAwKS5qc29uKHsgbWVzc2FnZTogXCJGYWlsZWQgdG8gZGVsZXRlIGNvbnRhY3RcIiB9KTtcbiAgICB9XG4gIH0pO1xufVxuXG4vLyBzZXJ2ZXIvYXBpL2NvbW1vbi1zcGFjZXMudHNcbmluaXRfZGIoKTtcbmltcG9ydCB7IGVxIGFzIGVxMTQsIGRlc2MgYXMgZGVzYzUsIGFuZCBhcyBhbmQxNCwgc3FsIGFzIHNxbDIxLCBvciBhcyBvcjgsIGd0ZSBhcyBndGU1LCBsdGUgYXMgbHRlNCwgaW5BcnJheSBhcyBpbkFycmF5OSB9IGZyb20gXCJkcml6emxlLW9ybVwiO1xuaW5pdF9zY2hlbWEoKTtcbmltcG9ydCB7IHogYXMgejE1IH0gZnJvbSBcInpvZFwiO1xudmFyIHtcbiAgY29tbW9uU3BhY2VzOiBjb21tb25TcGFjZXMyLFxuICBib29raW5nczogYm9va2luZ3MyLFxuICB1c2VyQm9va2luZ1Jlc3RyaWN0aW9uczogdXNlckJvb2tpbmdSZXN0cmljdGlvbnMyLFxuICB1c2VyVGltZUxpbWl0czogdXNlclRpbWVMaW1pdHMyLFxuICBidWlsZGluZ3M6IGJ1aWxkaW5nczQsXG4gIHVzZXJzOiB1c2VyczQsXG4gIHVzZXJSZXNpZGVuY2VzOiB1c2VyUmVzaWRlbmNlczMsXG4gIHVzZXJPcmdhbml6YXRpb25zOiB1c2VyT3JnYW5pemF0aW9uczRcbn0gPSBzY2hlbWFfZXhwb3J0cztcbnZhciBjb21tb25TcGFjZUZpbHRlclNjaGVtYSA9IHoxNS5vYmplY3Qoe1xuICBidWlsZGluZ19pZDogejE1LnN0cmluZygpLnV1aWQoKS5vcHRpb25hbCgpXG59KTtcbnZhciBib29raW5nRmlsdGVyU2NoZW1hID0gejE1Lm9iamVjdCh7XG4gIHN0YXJ0X2RhdGU6IHoxNS5zdHJpbmcoKS5kYXRldGltZSgpLm9wdGlvbmFsKCksXG4gIGVuZF9kYXRlOiB6MTUuc3RyaW5nKCkuZGF0ZXRpbWUoKS5vcHRpb25hbCgpXG59KTtcbnZhciBjYWxlbmRhclF1ZXJ5U2NoZW1hID0gejE1Lm9iamVjdCh7XG4gIHN0YXJ0X2RhdGU6IHoxNS5zdHJpbmcoKS5kYXRldGltZSgpLFxuICBlbmRfZGF0ZTogejE1LnN0cmluZygpLmRhdGV0aW1lKCksXG4gIHZpZXc6IHoxNS5lbnVtKFtcIm1vbnRoXCIsIFwid2Vla1wiLCBcImRheVwiXSkub3B0aW9uYWwoKS5kZWZhdWx0KFwibW9udGhcIilcbn0pO1xudmFyIGJ1aWxkaW5nQ2FsZW5kYXJTY2hlbWEgPSB6MTUub2JqZWN0KHtcbiAgYnVpbGRpbmdJZDogejE1LnN0cmluZygpLnV1aWQoKVxufSk7XG52YXIgY3JlYXRlQm9va2luZ1NjaGVtYSA9IHoxNS5vYmplY3Qoe1xuICBzdGFydF90aW1lOiB6MTUuc3RyaW5nKCkuZGF0ZXRpbWUoKSxcbiAgZW5kX3RpbWU6IHoxNS5zdHJpbmcoKS5kYXRldGltZSgpXG59KTtcbnZhciBjcmVhdGVSZXN0cmljdGlvblNjaGVtYSA9IHoxNS5vYmplY3Qoe1xuICBjb21tb25fc3BhY2VfaWQ6IHoxNS5zdHJpbmcoKS51dWlkKCksXG4gIGlzX2Jsb2NrZWQ6IHoxNS5ib29sZWFuKCksXG4gIHJlYXNvbjogejE1LnN0cmluZygpLm9wdGlvbmFsKClcbn0pO1xudmFyIGNyZWF0ZUNvbW1vblNwYWNlU2NoZW1hID0gejE1Lm9iamVjdCh7XG4gIG5hbWU6IHoxNS5zdHJpbmcoKS5taW4oMSwgXCJOYW1lIGlzIHJlcXVpcmVkXCIpLm1heCgxMDAsIFwiTmFtZSB0b28gbG9uZ1wiKSxcbiAgZGVzY3JpcHRpb246IHoxNS5zdHJpbmcoKS5vcHRpb25hbCgpLFxuICBidWlsZGluZ19pZDogejE1LnN0cmluZygpLnV1aWQoXCJCdWlsZGluZyBJRCBtdXN0IGJlIGEgdmFsaWQgVVVJRFwiKSxcbiAgaXNfcmVzZXJ2YWJsZTogejE1LmJvb2xlYW4oKS5kZWZhdWx0KHRydWUpLFxuICBjYXBhY2l0eTogejE1Lm51bWJlcigpLmludCgpLm1pbigxKS5tYXgoMjAwKS5vcHRpb25hbCgpLFxuICBvcGVuaW5nX2hvdXJzOiB6MTUub2JqZWN0KHtcbiAgICBzdGFydDogejE1LnN0cmluZygpLnJlZ2V4KC9eXFxkezJ9OlxcZHsyfSQvLCBcIkludmFsaWQgdGltZSBmb3JtYXRcIiksXG4gICAgZW5kOiB6MTUuc3RyaW5nKCkucmVnZXgoL15cXGR7Mn06XFxkezJ9JC8sIFwiSW52YWxpZCB0aW1lIGZvcm1hdFwiKVxuICB9KS5vcHRpb25hbCgpXG59KTtcbnZhciBzZXRUaW1lTGltaXRTY2hlbWEgPSB6MTUub2JqZWN0KHtcbiAgdXNlcl9pZDogejE1LnN0cmluZygpLnV1aWQoKSxcbiAgY29tbW9uX3NwYWNlX2lkOiB6MTUuc3RyaW5nKCkudXVpZCgpLm9wdGlvbmFsKCksXG4gIC8vIG51bGwgbWVhbnMgYXBwbGllcyB0byBhbGwgc3BhY2VzXG4gIGxpbWl0X3R5cGU6IHoxNS5lbnVtKFtcIm1vbnRobHlcIiwgXCJ5ZWFybHlcIl0pLFxuICBsaW1pdF9ob3VyczogejE1Lm51bWJlcigpLmludCgpLm1pbigxKS5tYXgoODc2MClcbiAgLy8gTWF4IDEgeWVhciB3b3J0aCBvZiBob3Vyc1xufSk7XG52YXIgc3BhY2VJZFNjaGVtYSA9IHoxNS5vYmplY3Qoe1xuICBzcGFjZUlkOiB6MTUuc3RyaW5nKCkudXVpZCgpXG59KTtcbnZhciBib29raW5nSWRTY2hlbWEgPSB6MTUub2JqZWN0KHtcbiAgYm9va2luZ0lkOiB6MTUuc3RyaW5nKCkudXVpZCgpXG59KTtcbnZhciB1c2VySWRTY2hlbWEgPSB6MTUub2JqZWN0KHtcbiAgdXNlcklkOiB6MTUuc3RyaW5nKCkudXVpZCgpXG59KTtcbmFzeW5jIGZ1bmN0aW9uIGdldEFjY2Vzc2libGVCdWlsZGluZ0lkcyh1c2VyKSB7XG4gIGlmICh1c2VyLnJvbGUgPT09IFwiYWRtaW5cIikge1xuICAgIGNvbnN0IGFsbEJ1aWxkaW5ncyA9IGF3YWl0IGRiLnNlbGVjdCh7IGJ1aWxkaW5nSWQ6IGJ1aWxkaW5nczQuaWQgfSkuZnJvbShidWlsZGluZ3M0KS53aGVyZShlcTE0KGJ1aWxkaW5nczQuaXNBY3RpdmUsIHRydWUpKTtcbiAgICByZXR1cm4gYWxsQnVpbGRpbmdzLm1hcCgoYikgPT4gYi5idWlsZGluZ0lkKTtcbiAgfVxuICBjb25zdCB1c2VyT3JncyA9IGF3YWl0IGRiLnNlbGVjdCh7XG4gICAgb3JnYW5pemF0aW9uSWQ6IG9yZ2FuaXphdGlvbnMuaWQsXG4gICAgb3JnYW5pemF0aW9uTmFtZTogb3JnYW5pemF0aW9ucy5uYW1lLFxuICAgIGNhbkFjY2Vzc0FsbE9yZ2FuaXphdGlvbnM6IHVzZXJPcmdhbml6YXRpb25zNC5jYW5BY2Nlc3NBbGxPcmdhbml6YXRpb25zXG4gIH0pLmZyb20ob3JnYW5pemF0aW9ucykuaW5uZXJKb2luKHVzZXJPcmdhbml6YXRpb25zNCwgZXExNCh1c2VyT3JnYW5pemF0aW9uczQub3JnYW5pemF0aW9uSWQsIG9yZ2FuaXphdGlvbnMuaWQpKS53aGVyZShhbmQxNChlcTE0KHVzZXJPcmdhbml6YXRpb25zNC51c2VySWQsIHVzZXIuaWQpLCBlcTE0KHVzZXJPcmdhbml6YXRpb25zNC5pc0FjdGl2ZSwgdHJ1ZSkpKTtcbiAgY29uc3QgaGFzR2xvYmFsQWNjZXNzID0gdXNlck9yZ3Muc29tZSgob3JnKSA9PiBvcmcub3JnYW5pemF0aW9uTmFtZSA9PT0gXCJLb3Zlb1wiIHx8IG9yZy5jYW5BY2Nlc3NBbGxPcmdhbml6YXRpb25zKTtcbiAgaWYgKGhhc0dsb2JhbEFjY2Vzcykge1xuICAgIGNvbnN0IGFsbEJ1aWxkaW5ncyA9IGF3YWl0IGRiLnNlbGVjdCh7IGJ1aWxkaW5nSWQ6IGJ1aWxkaW5nczQuaWQgfSkuZnJvbShidWlsZGluZ3M0KS53aGVyZShlcTE0KGJ1aWxkaW5nczQuaXNBY3RpdmUsIHRydWUpKTtcbiAgICByZXR1cm4gYWxsQnVpbGRpbmdzLm1hcCgoYikgPT4gYi5idWlsZGluZ0lkKTtcbiAgfVxuICBpZiAodXNlci5yb2xlID09PSBcIm1hbmFnZXJcIikge1xuICAgIGlmICh1c2VyT3Jncy5sZW5ndGggPiAwKSB7XG4gICAgICBjb25zdCBvcmdJZHMgPSB1c2VyT3Jncy5tYXAoKHVvKSA9PiB1by5vcmdhbml6YXRpb25JZCk7XG4gICAgICBjb25zdCBvcmdCdWlsZGluZ3MgPSBhd2FpdCBkYi5zZWxlY3QoeyBidWlsZGluZ0lkOiBidWlsZGluZ3M0LmlkIH0pLmZyb20oYnVpbGRpbmdzNCkud2hlcmUoYW5kMTQoaW5BcnJheTkoYnVpbGRpbmdzNC5vcmdhbml6YXRpb25JZCwgb3JnSWRzKSwgZXExNChidWlsZGluZ3M0LmlzQWN0aXZlLCB0cnVlKSkpO1xuICAgICAgcmV0dXJuIG9yZ0J1aWxkaW5ncy5tYXAoKGIpID0+IGIuYnVpbGRpbmdJZCk7XG4gICAgfVxuICB9XG4gIGNvbnN0IHVzZXJCdWlsZGluZ0lkcyA9IGF3YWl0IGRiLnNlbGVjdCh7IGJ1aWxkaW5nSWQ6IHJlc2lkZW5jZXMuYnVpbGRpbmdJZCB9KS5mcm9tKHVzZXJSZXNpZGVuY2VzMykuaW5uZXJKb2luKHJlc2lkZW5jZXMsIGVxMTQodXNlclJlc2lkZW5jZXMzLnJlc2lkZW5jZUlkLCByZXNpZGVuY2VzLmlkKSkud2hlcmUoYW5kMTQoZXExNCh1c2VyUmVzaWRlbmNlczMudXNlcklkLCB1c2VyLmlkKSwgZXExNCh1c2VyUmVzaWRlbmNlczMuaXNBY3RpdmUsIHRydWUpKSk7XG4gIHJldHVybiB1c2VyQnVpbGRpbmdJZHMubWFwKChiKSA9PiBiLmJ1aWxkaW5nSWQpO1xufVxuYXN5bmMgZnVuY3Rpb24gZ2V0VXNlckJvb2tpbmdIb3Vycyh1c2VySWQsIGNvbW1vblNwYWNlSWQsIGxpbWl0VHlwZSkge1xuICBjb25zdCBub3cgPSAvKiBAX19QVVJFX18gKi8gbmV3IERhdGUoKTtcbiAgbGV0IHN0YXJ0RGF0ZTtcbiAgaWYgKGxpbWl0VHlwZSA9PT0gXCJtb250aGx5XCIpIHtcbiAgICBzdGFydERhdGUgPSBuZXcgRGF0ZShub3cuZ2V0RnVsbFllYXIoKSwgbm93LmdldE1vbnRoKCksIDEpO1xuICB9IGVsc2Uge1xuICAgIHN0YXJ0RGF0ZSA9IG5ldyBEYXRlKG5vdy5nZXRGdWxsWWVhcigpLCAwLCAxKTtcbiAgfVxuICBjb25zdCBjb25kaXRpb25zID0gW1xuICAgIGVxMTQoYm9va2luZ3MyLnVzZXJJZCwgdXNlcklkKSxcbiAgICBlcTE0KGJvb2tpbmdzMi5zdGF0dXMsIFwiY29uZmlybWVkXCIpLFxuICAgIGd0ZTUoYm9va2luZ3MyLnN0YXJ0VGltZSwgc3RhcnREYXRlKVxuICBdO1xuICBpZiAoY29tbW9uU3BhY2VJZCkge1xuICAgIGNvbmRpdGlvbnMucHVzaChlcTE0KGJvb2tpbmdzMi5jb21tb25TcGFjZUlkLCBjb21tb25TcGFjZUlkKSk7XG4gIH1cbiAgY29uc3QgdXNlckJvb2tpbmdzID0gYXdhaXQgZGIuc2VsZWN0KHtcbiAgICB0b3RhbEhvdXJzOiBzcWwyMWBFWFRSQUNUKEVQT0NIIEZST00gU1VNKCR7Ym9va2luZ3MyLmVuZFRpbWV9IC0gJHtib29raW5nczIuc3RhcnRUaW1lfSkpIC8gMzYwMGBcbiAgfSkuZnJvbShib29raW5nczIpLndoZXJlKGFuZDE0KC4uLmNvbmRpdGlvbnMpKTtcbiAgcmV0dXJuIHVzZXJCb29raW5nc1swXT8udG90YWxIb3VycyB8fCAwO1xufVxuYXN5bmMgZnVuY3Rpb24gY2hlY2tVc2VyVGltZUxpbWl0KHVzZXJJZCwgY29tbW9uU3BhY2VJZCwgbmV3Qm9va2luZ0hvdXJzKSB7XG4gIGNvbnN0IHRpbWVMaW1pdHMgPSBhd2FpdCBkYi5zZWxlY3QoKS5mcm9tKHVzZXJUaW1lTGltaXRzMikud2hlcmUoXG4gICAgYW5kMTQoXG4gICAgICBlcTE0KHVzZXJUaW1lTGltaXRzMi51c2VySWQsIHVzZXJJZCksXG4gICAgICBvcjgoXG4gICAgICAgIGVxMTQodXNlclRpbWVMaW1pdHMyLmNvbW1vblNwYWNlSWQsIGNvbW1vblNwYWNlSWQpLFxuICAgICAgICBzcWwyMWAke3VzZXJUaW1lTGltaXRzMi5jb21tb25TcGFjZUlkfSBJUyBOVUxMYFxuICAgICAgKVxuICAgIClcbiAgKS5vcmRlckJ5KHVzZXJUaW1lTGltaXRzMi5jb21tb25TcGFjZUlkKTtcbiAgaWYgKHRpbWVMaW1pdHMubGVuZ3RoID09PSAwKSB7XG4gICAgcmV0dXJuIHsgd2l0aGluTGltaXQ6IHRydWUgfTtcbiAgfVxuICBjb25zdCBhY3RpdmVMaW1pdCA9IHRpbWVMaW1pdHNbMF07XG4gIGNvbnN0IGN1cnJlbnRIb3VycyA9IGF3YWl0IGdldFVzZXJCb29raW5nSG91cnMoXG4gICAgdXNlcklkLFxuICAgIGFjdGl2ZUxpbWl0LmNvbW1vblNwYWNlSWQsXG4gICAgYWN0aXZlTGltaXQubGltaXRUeXBlXG4gICk7XG4gIGNvbnN0IHRvdGFsQWZ0ZXJCb29raW5nID0gY3VycmVudEhvdXJzICsgbmV3Qm9va2luZ0hvdXJzO1xuICBjb25zdCByZW1haW5pbmdIb3VycyA9IE1hdGgubWF4KDAsIGFjdGl2ZUxpbWl0LmxpbWl0SG91cnMgLSBjdXJyZW50SG91cnMpO1xuICBpZiAodG90YWxBZnRlckJvb2tpbmcgPiBhY3RpdmVMaW1pdC5saW1pdEhvdXJzKSB7XG4gICAgY29uc3QgbGltaXRQZXJpb2QgPSBhY3RpdmVMaW1pdC5saW1pdFR5cGUgPT09IFwibW9udGhseVwiID8gXCJjZSBtb2lzXCIgOiBcImNldHRlIGFublxceEU5ZVwiO1xuICAgIHJldHVybiB7XG4gICAgICB3aXRoaW5MaW1pdDogZmFsc2UsXG4gICAgICBtZXNzYWdlOiBgTGltaXRlIGRlIHRlbXBzIGRcXHhFOXBhc3NcXHhFOWUuIFZvdXMgYXZleiB1dGlsaXNcXHhFOSAke01hdGgucm91bmQoY3VycmVudEhvdXJzKX1oIHN1ciAke2FjdGl2ZUxpbWl0LmxpbWl0SG91cnN9aCBhdXRvcmlzXFx4RTllcyBwb3VyICR7bGltaXRQZXJpb2R9LiBJbCB2b3VzIHJlc3RlICR7TWF0aC5yb3VuZChyZW1haW5pbmdIb3Vycyl9aCBkaXNwb25pYmxlcy5gLFxuICAgICAgcmVtYWluaW5nSG91cnNcbiAgICB9O1xuICB9XG4gIHJldHVybiB7IHdpdGhpbkxpbWl0OiB0cnVlLCByZW1haW5pbmdIb3VycyB9O1xufVxuYXN5bmMgZnVuY3Rpb24gaGFzT3ZlcmxhcHBpbmdCb29raW5ncyhjb21tb25TcGFjZUlkLCBzdGFydFRpbWUsIGVuZFRpbWUsIGV4Y2x1ZGVCb29raW5nSWQpIHtcbiAgY29uc3QgY29uZGl0aW9ucyA9IFtcbiAgICBlcTE0KGJvb2tpbmdzMi5jb21tb25TcGFjZUlkLCBjb21tb25TcGFjZUlkKSxcbiAgICBlcTE0KGJvb2tpbmdzMi5zdGF0dXMsIFwiY29uZmlybWVkXCIpLFxuICAgIG9yOChcbiAgICAgIC8vIE5ldyBib29raW5nIHN0YXJ0cyBkdXJpbmcgZXhpc3RpbmcgYm9va2luZ1xuICAgICAgYW5kMTQoZ3RlNShib29raW5nczIuc3RhcnRUaW1lLCBzdGFydFRpbWUpLCBsdGU0KGJvb2tpbmdzMi5zdGFydFRpbWUsIGVuZFRpbWUpKSxcbiAgICAgIC8vIE5ldyBib29raW5nIGVuZHMgZHVyaW5nIGV4aXN0aW5nIGJvb2tpbmdcbiAgICAgIGFuZDE0KGd0ZTUoYm9va2luZ3MyLmVuZFRpbWUsIHN0YXJ0VGltZSksIGx0ZTQoYm9va2luZ3MyLmVuZFRpbWUsIGVuZFRpbWUpKSxcbiAgICAgIC8vIE5ldyBib29raW5nIGNvbXBsZXRlbHkgY29udGFpbnMgZXhpc3RpbmcgYm9va2luZ1xuICAgICAgYW5kMTQobHRlNChib29raW5nczIuc3RhcnRUaW1lLCBzdGFydFRpbWUpLCBndGU1KGJvb2tpbmdzMi5lbmRUaW1lLCBlbmRUaW1lKSksXG4gICAgICAvLyBFeGlzdGluZyBib29raW5nIGNvbXBsZXRlbHkgY29udGFpbnMgbmV3IGJvb2tpbmdcbiAgICAgIGFuZDE0KGd0ZTUoYm9va2luZ3MyLnN0YXJ0VGltZSwgc3RhcnRUaW1lKSwgbHRlNChib29raW5nczIuZW5kVGltZSwgZW5kVGltZSkpXG4gICAgKVxuICBdO1xuICBpZiAoZXhjbHVkZUJvb2tpbmdJZCkge1xuICAgIGNvbmRpdGlvbnMucHVzaChzcWwyMWAke2Jvb2tpbmdzMi5pZH0gIT0gJHtleGNsdWRlQm9va2luZ0lkfWApO1xuICB9XG4gIGNvbnN0IG92ZXJsYXBwaW5nID0gYXdhaXQgZGIuc2VsZWN0KHsgaWQ6IGJvb2tpbmdzMi5pZCB9KS5mcm9tKGJvb2tpbmdzMikud2hlcmUoYW5kMTQoLi4uY29uZGl0aW9ucykpLmxpbWl0KDEpO1xuICByZXR1cm4gb3ZlcmxhcHBpbmcubGVuZ3RoID4gMDtcbn1cbmFzeW5jIGZ1bmN0aW9uIGlzVXNlckJsb2NrZWQodXNlcklkLCBjb21tb25TcGFjZUlkKSB7XG4gIGNvbnN0IHJlc3RyaWN0aW9uID0gYXdhaXQgZGIuc2VsZWN0KHsgaXNCbG9ja2VkOiB1c2VyQm9va2luZ1Jlc3RyaWN0aW9uczIuaXNCbG9ja2VkIH0pLmZyb20odXNlckJvb2tpbmdSZXN0cmljdGlvbnMyKS53aGVyZShcbiAgICBhbmQxNChcbiAgICAgIGVxMTQodXNlckJvb2tpbmdSZXN0cmljdGlvbnMyLnVzZXJJZCwgdXNlcklkKSxcbiAgICAgIGVxMTQodXNlckJvb2tpbmdSZXN0cmljdGlvbnMyLmNvbW1vblNwYWNlSWQsIGNvbW1vblNwYWNlSWQpXG4gICAgKVxuICApLmxpbWl0KDEpO1xuICByZXR1cm4gcmVzdHJpY3Rpb24ubGVuZ3RoID4gMCAmJiByZXN0cmljdGlvblswXS5pc0Jsb2NrZWQ7XG59XG5mdW5jdGlvbiBpc1dpdGhpbk9wZW5pbmdIb3VycyhzdGFydFRpbWUsIGVuZFRpbWUsIG9wZW5pbmdIb3Vycykge1xuICBpZiAoIW9wZW5pbmdIb3VycyB8fCBvcGVuaW5nSG91cnMubGVuZ3RoID09PSAwKSB7XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cbiAgY29uc3Qgc3RhcnREYXkgPSBzdGFydFRpbWUudG9Mb2NhbGVEYXRlU3RyaW5nKFwiZW4tVVNcIiwgeyB3ZWVrZGF5OiBcImxvbmdcIiB9KTtcbiAgY29uc3QgZW5kRGF5ID0gZW5kVGltZS50b0xvY2FsZURhdGVTdHJpbmcoXCJlbi1VU1wiLCB7IHdlZWtkYXk6IFwibG9uZ1wiIH0pO1xuICBpZiAoc3RhcnREYXkgIT09IGVuZERheSkge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuICBjb25zdCBkYXlIb3VycyA9IG9wZW5pbmdIb3Vycy5maW5kKChvaCkgPT4gb2guZGF5ID09PSBzdGFydERheSk7XG4gIGlmICghZGF5SG91cnMpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbiAgY29uc3Qgc3RhcnRUaW1lU3RyID0gc3RhcnRUaW1lLnRvVGltZVN0cmluZygpLnNsaWNlKDAsIDUpO1xuICBjb25zdCBlbmRUaW1lU3RyID0gZW5kVGltZS50b1RpbWVTdHJpbmcoKS5zbGljZSgwLCA1KTtcbiAgcmV0dXJuIHN0YXJ0VGltZVN0ciA+PSBkYXlIb3Vycy5vcGVuICYmIGVuZFRpbWVTdHIgPD0gZGF5SG91cnMuY2xvc2U7XG59XG5mdW5jdGlvbiByZWdpc3RlckNvbW1vblNwYWNlc1JvdXRlcyhhcHAyKSB7XG4gIGFwcDIuZ2V0KFwiL2FwaS9jb21tb24tc3BhY2VzXCIsIHJlcXVpcmVBdXRoLCBhc3luYyAocmVxLCByZXMpID0+IHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgdXNlciA9IHJlcS51c2VyIHx8IHJlcS5zZXNzaW9uPy51c2VyO1xuICAgICAgaWYgKCF1c2VyKSB7XG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMSkuanNvbih7XG4gICAgICAgICAgbWVzc2FnZTogXCJBdXRoZW50aWNhdGlvbiByZXF1aXJlZFwiLFxuICAgICAgICAgIGNvZGU6IFwiQVVUSF9SRVFVSVJFRFwiXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgICAgY29uc3QgcXVlcnlWYWxpZGF0aW9uID0gY29tbW9uU3BhY2VGaWx0ZXJTY2hlbWEuc2FmZVBhcnNlKHJlcS5xdWVyeSk7XG4gICAgICBpZiAoIXF1ZXJ5VmFsaWRhdGlvbi5zdWNjZXNzKSB7XG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7XG4gICAgICAgICAgbWVzc2FnZTogXCJJbnZhbGlkIHF1ZXJ5IHBhcmFtZXRlcnNcIixcbiAgICAgICAgICBlcnJvcnM6IHF1ZXJ5VmFsaWRhdGlvbi5lcnJvci5pc3N1ZXNcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgICBjb25zdCB7IGJ1aWxkaW5nX2lkIH0gPSBxdWVyeVZhbGlkYXRpb24uZGF0YTtcbiAgICAgIGNvbnN0IGFjY2Vzc2libGVCdWlsZGluZ0lkcyA9IGF3YWl0IGdldEFjY2Vzc2libGVCdWlsZGluZ0lkcyh1c2VyKTtcbiAgICAgIGlmIChhY2Nlc3NpYmxlQnVpbGRpbmdJZHMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgIHJldHVybiByZXMuanNvbihbXSk7XG4gICAgICB9XG4gICAgICBjb25zdCBjb25kaXRpb25zID0gW2VxMTQoYnVpbGRpbmdzNC5pc0FjdGl2ZSwgdHJ1ZSldO1xuICAgICAgaWYgKGJ1aWxkaW5nX2lkKSB7XG4gICAgICAgIGlmICghYWNjZXNzaWJsZUJ1aWxkaW5nSWRzLmluY2x1ZGVzKGJ1aWxkaW5nX2lkKSkge1xuICAgICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMykuanNvbih7XG4gICAgICAgICAgICBtZXNzYWdlOiBcIkFjY2VzcyBkZW5pZWQgdG8gdGhpcyBidWlsZGluZ1wiLFxuICAgICAgICAgICAgY29kZTogXCJJTlNVRkZJQ0lFTlRfUEVSTUlTU0lPTlNcIlxuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIGNvbmRpdGlvbnMucHVzaChlcTE0KGNvbW1vblNwYWNlczIuYnVpbGRpbmdJZCwgYnVpbGRpbmdfaWQpKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNvbmRpdGlvbnMucHVzaChpbkFycmF5OShjb21tb25TcGFjZXMyLmJ1aWxkaW5nSWQsIGFjY2Vzc2libGVCdWlsZGluZ0lkcykpO1xuICAgICAgfVxuICAgICAgY29uc3Qgc3BhY2VzID0gYXdhaXQgZGIuc2VsZWN0KHtcbiAgICAgICAgaWQ6IGNvbW1vblNwYWNlczIuaWQsXG4gICAgICAgIG5hbWU6IGNvbW1vblNwYWNlczIubmFtZSxcbiAgICAgICAgZGVzY3JpcHRpb246IGNvbW1vblNwYWNlczIuZGVzY3JpcHRpb24sXG4gICAgICAgIGJ1aWxkaW5nSWQ6IGNvbW1vblNwYWNlczIuYnVpbGRpbmdJZCxcbiAgICAgICAgYnVpbGRpbmdOYW1lOiBidWlsZGluZ3M0Lm5hbWUsXG4gICAgICAgIGlzUmVzZXJ2YWJsZTogY29tbW9uU3BhY2VzMi5pc1Jlc2VydmFibGUsXG4gICAgICAgIGNhcGFjaXR5OiBjb21tb25TcGFjZXMyLmNhcGFjaXR5LFxuICAgICAgICBjb250YWN0UGVyc29uSWQ6IGNvbW1vblNwYWNlczIuY29udGFjdFBlcnNvbklkLFxuICAgICAgICBjb250YWN0UGVyc29uTmFtZTogc3FsMjFgQ09OQ0FUKCR7dXNlcnM0LmZpcnN0TmFtZX0sICcgJywgJHt1c2VyczQubGFzdE5hbWV9KWAsXG4gICAgICAgIG9wZW5pbmdIb3VyczogY29tbW9uU3BhY2VzMi5vcGVuaW5nSG91cnMsXG4gICAgICAgIGJvb2tpbmdSdWxlczogY29tbW9uU3BhY2VzMi5ib29raW5nUnVsZXMsXG4gICAgICAgIGNyZWF0ZWRBdDogY29tbW9uU3BhY2VzMi5jcmVhdGVkQXQsXG4gICAgICAgIHVwZGF0ZWRBdDogY29tbW9uU3BhY2VzMi51cGRhdGVkQXRcbiAgICAgIH0pLmZyb20oY29tbW9uU3BhY2VzMikuaW5uZXJKb2luKGJ1aWxkaW5nczQsIGVxMTQoY29tbW9uU3BhY2VzMi5idWlsZGluZ0lkLCBidWlsZGluZ3M0LmlkKSkubGVmdEpvaW4odXNlcnM0LCBlcTE0KGNvbW1vblNwYWNlczIuY29udGFjdFBlcnNvbklkLCB1c2VyczQuaWQpKS53aGVyZShhbmQxNCguLi5jb25kaXRpb25zKSkub3JkZXJCeShidWlsZGluZ3M0Lm5hbWUsIGNvbW1vblNwYWNlczIubmFtZSk7XG4gICAgICByZXMuanNvbihzcGFjZXMpO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICByZXMuc3RhdHVzKDUwMCkuanNvbih7XG4gICAgICAgIG1lc3NhZ2U6IFwiRmFpbGVkIHRvIGZldGNoIGNvbW1vbiBzcGFjZXNcIixcbiAgICAgICAgZXJyb3I6IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogXCJVbmtub3duIGVycm9yXCJcbiAgICAgIH0pO1xuICAgIH1cbiAgfSk7XG4gIGFwcDIuZ2V0KFwiL2FwaS9jb21tb24tc3BhY2VzLzpzcGFjZUlkL2Jvb2tpbmdzXCIsIHJlcXVpcmVBdXRoLCBhc3luYyAocmVxLCByZXMpID0+IHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgdXNlciA9IHJlcS51c2VyIHx8IHJlcS5zZXNzaW9uPy51c2VyO1xuICAgICAgaWYgKCF1c2VyKSB7XG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMSkuanNvbih7XG4gICAgICAgICAgbWVzc2FnZTogXCJBdXRoZW50aWNhdGlvbiByZXF1aXJlZFwiLFxuICAgICAgICAgIGNvZGU6IFwiQVVUSF9SRVFVSVJFRFwiXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgICAgY29uc3QgcGFyYW1WYWxpZGF0aW9uID0gc3BhY2VJZFNjaGVtYS5zYWZlUGFyc2UocmVxLnBhcmFtcyk7XG4gICAgICBpZiAoIXBhcmFtVmFsaWRhdGlvbi5zdWNjZXNzKSB7XG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7XG4gICAgICAgICAgbWVzc2FnZTogXCJJbnZhbGlkIHNwYWNlIElEXCIsXG4gICAgICAgICAgZXJyb3JzOiBwYXJhbVZhbGlkYXRpb24uZXJyb3IuaXNzdWVzXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgICAgY29uc3QgcXVlcnlWYWxpZGF0aW9uID0gYm9va2luZ0ZpbHRlclNjaGVtYS5zYWZlUGFyc2UocmVxLnF1ZXJ5KTtcbiAgICAgIGlmICghcXVlcnlWYWxpZGF0aW9uLnN1Y2Nlc3MpIHtcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHtcbiAgICAgICAgICBtZXNzYWdlOiBcIkludmFsaWQgcXVlcnkgcGFyYW1ldGVyc1wiLFxuICAgICAgICAgIGVycm9yczogcXVlcnlWYWxpZGF0aW9uLmVycm9yLmlzc3Vlc1xuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICAgIGNvbnN0IHsgc3BhY2VJZCB9ID0gcGFyYW1WYWxpZGF0aW9uLmRhdGE7XG4gICAgICBjb25zdCB7IHN0YXJ0X2RhdGUsIGVuZF9kYXRlIH0gPSBxdWVyeVZhbGlkYXRpb24uZGF0YTtcbiAgICAgIGNvbnN0IHNwYWNlID0gYXdhaXQgZGIuc2VsZWN0KHtcbiAgICAgICAgaWQ6IGNvbW1vblNwYWNlczIuaWQsXG4gICAgICAgIGJ1aWxkaW5nSWQ6IGNvbW1vblNwYWNlczIuYnVpbGRpbmdJZFxuICAgICAgfSkuZnJvbShjb21tb25TcGFjZXMyKS53aGVyZShlcTE0KGNvbW1vblNwYWNlczIuaWQsIHNwYWNlSWQpKS5saW1pdCgxKTtcbiAgICAgIGlmIChzcGFjZS5sZW5ndGggPT09IDApIHtcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDA0KS5qc29uKHtcbiAgICAgICAgICBtZXNzYWdlOiBcIkNvbW1vbiBzcGFjZSBub3QgZm91bmRcIixcbiAgICAgICAgICBjb2RlOiBcIk5PVF9GT1VORFwiXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgICAgY29uc3QgYWNjZXNzaWJsZUJ1aWxkaW5nSWRzID0gYXdhaXQgZ2V0QWNjZXNzaWJsZUJ1aWxkaW5nSWRzKHVzZXIpO1xuICAgICAgaWYgKCFhY2Nlc3NpYmxlQnVpbGRpbmdJZHMuaW5jbHVkZXMoc3BhY2VbMF0uYnVpbGRpbmdJZCkpIHtcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAzKS5qc29uKHtcbiAgICAgICAgICBtZXNzYWdlOiBcIkFjY2VzcyBkZW5pZWQgdG8gdGhpcyBjb21tb24gc3BhY2VcIixcbiAgICAgICAgICBjb2RlOiBcIklOU1VGRklDSUVOVF9QRVJNSVNTSU9OU1wiXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgICAgY29uc3QgY29uZGl0aW9ucyA9IFtlcTE0KGJvb2tpbmdzMi5jb21tb25TcGFjZUlkLCBzcGFjZUlkKV07XG4gICAgICBpZiAoc3RhcnRfZGF0ZSkge1xuICAgICAgICBjb25kaXRpb25zLnB1c2goZ3RlNShib29raW5nczIuc3RhcnRUaW1lLCBuZXcgRGF0ZShzdGFydF9kYXRlKSkpO1xuICAgICAgfVxuICAgICAgaWYgKGVuZF9kYXRlKSB7XG4gICAgICAgIGNvbmRpdGlvbnMucHVzaChsdGU0KGJvb2tpbmdzMi5lbmRUaW1lLCBuZXcgRGF0ZShlbmRfZGF0ZSkpKTtcbiAgICAgIH1cbiAgICAgIGNvbnN0IHNwYWNlQm9va2luZ3MgPSBhd2FpdCBkYi5zZWxlY3Qoe1xuICAgICAgICBpZDogYm9va2luZ3MyLmlkLFxuICAgICAgICBjb21tb25TcGFjZUlkOiBib29raW5nczIuY29tbW9uU3BhY2VJZCxcbiAgICAgICAgdXNlcklkOiBib29raW5nczIudXNlcklkLFxuICAgICAgICB1c2VyTmFtZTogc3FsMjFgQ09OQ0FUKCR7dXNlcnM0LmZpcnN0TmFtZX0sICcgJywgJHt1c2VyczQubGFzdE5hbWV9KWAsXG4gICAgICAgIHVzZXJFbWFpbDogdXNlcnM0LmVtYWlsLFxuICAgICAgICBzdGFydFRpbWU6IGJvb2tpbmdzMi5zdGFydFRpbWUsXG4gICAgICAgIGVuZFRpbWU6IGJvb2tpbmdzMi5lbmRUaW1lLFxuICAgICAgICBzdGF0dXM6IGJvb2tpbmdzMi5zdGF0dXMsXG4gICAgICAgIGNyZWF0ZWRBdDogYm9va2luZ3MyLmNyZWF0ZWRBdCxcbiAgICAgICAgdXBkYXRlZEF0OiBib29raW5nczIudXBkYXRlZEF0XG4gICAgICB9KS5mcm9tKGJvb2tpbmdzMikuaW5uZXJKb2luKHVzZXJzNCwgZXExNChib29raW5nczIudXNlcklkLCB1c2VyczQuaWQpKS53aGVyZShhbmQxNCguLi5jb25kaXRpb25zKSkub3JkZXJCeShib29raW5nczIuc3RhcnRUaW1lKTtcbiAgICAgIHJlcy5qc29uKHNwYWNlQm9va2luZ3MpO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKFwiXFx1Mjc0QyBFcnJvciBmZXRjaGluZyBib29raW5nczpcIiwgZXJyb3IpO1xuICAgICAgcmVzLnN0YXR1cyg1MDApLmpzb24oe1xuICAgICAgICBtZXNzYWdlOiBcIkZhaWxlZCB0byBmZXRjaCBib29raW5nc1wiLFxuICAgICAgICBlcnJvcjogZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiBcIlVua25vd24gZXJyb3JcIlxuICAgICAgfSk7XG4gICAgfVxuICB9KTtcbiAgYXBwMi5wb3N0KFwiL2FwaS9jb21tb24tc3BhY2VzLzpzcGFjZUlkL2Jvb2tpbmdzXCIsIHJlcXVpcmVBdXRoLCBhc3luYyAocmVxLCByZXMpID0+IHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgdXNlciA9IHJlcS51c2VyIHx8IHJlcS5zZXNzaW9uPy51c2VyO1xuICAgICAgaWYgKCF1c2VyKSB7XG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMSkuanNvbih7XG4gICAgICAgICAgbWVzc2FnZTogXCJBdXRoZW50aWNhdGlvbiByZXF1aXJlZFwiLFxuICAgICAgICAgIGNvZGU6IFwiQVVUSF9SRVFVSVJFRFwiXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgICAgY29uc3QgcGFyYW1WYWxpZGF0aW9uID0gc3BhY2VJZFNjaGVtYS5zYWZlUGFyc2UocmVxLnBhcmFtcyk7XG4gICAgICBpZiAoIXBhcmFtVmFsaWRhdGlvbi5zdWNjZXNzKSB7XG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7XG4gICAgICAgICAgbWVzc2FnZTogXCJJbnZhbGlkIHNwYWNlIElEXCIsXG4gICAgICAgICAgZXJyb3JzOiBwYXJhbVZhbGlkYXRpb24uZXJyb3IuaXNzdWVzXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgICAgY29uc3QgYm9keVZhbGlkYXRpb24gPSBjcmVhdGVCb29raW5nU2NoZW1hLnNhZmVQYXJzZShyZXEuYm9keSk7XG4gICAgICBpZiAoIWJvZHlWYWxpZGF0aW9uLnN1Y2Nlc3MpIHtcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHtcbiAgICAgICAgICBtZXNzYWdlOiBcIkludmFsaWQgYm9va2luZyBkYXRhXCIsXG4gICAgICAgICAgZXJyb3JzOiBib2R5VmFsaWRhdGlvbi5lcnJvci5pc3N1ZXNcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgICBjb25zdCB7IHNwYWNlSWQgfSA9IHBhcmFtVmFsaWRhdGlvbi5kYXRhO1xuICAgICAgY29uc3QgeyBzdGFydF90aW1lLCBlbmRfdGltZSB9ID0gYm9keVZhbGlkYXRpb24uZGF0YTtcbiAgICAgIGNvbnN0IHN0YXJ0VGltZSA9IG5ldyBEYXRlKHN0YXJ0X3RpbWUpO1xuICAgICAgY29uc3QgZW5kVGltZSA9IG5ldyBEYXRlKGVuZF90aW1lKTtcbiAgICAgIGlmIChzdGFydFRpbWUgPj0gZW5kVGltZSkge1xuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oe1xuICAgICAgICAgIG1lc3NhZ2U6IFwiU3RhcnQgdGltZSBtdXN0IGJlIGJlZm9yZSBlbmQgdGltZVwiLFxuICAgICAgICAgIGNvZGU6IFwiSU5WQUxJRF9USU1FX1JBTkdFXCJcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgICBjb25zdCBub3cgPSAvKiBAX19QVVJFX18gKi8gbmV3IERhdGUoKTtcbiAgICAgIGNvbnN0IGZpdmVNaW51dGVzQWdvID0gbmV3IERhdGUobm93LmdldFRpbWUoKSAtIDUgKiA2MCAqIDFlMyk7XG4gICAgICBpZiAoc3RhcnRUaW1lIDwgZml2ZU1pbnV0ZXNBZ28pIHtcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHtcbiAgICAgICAgICBtZXNzYWdlOiBcIkNhbm5vdCBib29rIGluIHRoZSBwYXN0XCIsXG4gICAgICAgICAgY29kZTogXCJJTlZBTElEX1RJTUVfUkFOR0VcIlxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICAgIGNvbnN0IHNwYWNlID0gYXdhaXQgZGIuc2VsZWN0KHtcbiAgICAgICAgaWQ6IGNvbW1vblNwYWNlczIuaWQsXG4gICAgICAgIG5hbWU6IGNvbW1vblNwYWNlczIubmFtZSxcbiAgICAgICAgYnVpbGRpbmdJZDogY29tbW9uU3BhY2VzMi5idWlsZGluZ0lkLFxuICAgICAgICBpc1Jlc2VydmFibGU6IGNvbW1vblNwYWNlczIuaXNSZXNlcnZhYmxlLFxuICAgICAgICBvcGVuaW5nSG91cnM6IGNvbW1vblNwYWNlczIub3BlbmluZ0hvdXJzXG4gICAgICB9KS5mcm9tKGNvbW1vblNwYWNlczIpLndoZXJlKGVxMTQoY29tbW9uU3BhY2VzMi5pZCwgc3BhY2VJZCkpLmxpbWl0KDEpO1xuICAgICAgaWYgKHNwYWNlLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDQpLmpzb24oe1xuICAgICAgICAgIG1lc3NhZ2U6IFwiQ29tbW9uIHNwYWNlIG5vdCBmb3VuZFwiLFxuICAgICAgICAgIGNvZGU6IFwiTk9UX0ZPVU5EXCJcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgICBjb25zdCBjb21tb25TcGFjZSA9IHNwYWNlWzBdO1xuICAgICAgaWYgKCFjb21tb25TcGFjZS5pc1Jlc2VydmFibGUpIHtcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHtcbiAgICAgICAgICBtZXNzYWdlOiBcIlRoaXMgY29tbW9uIHNwYWNlIGlzIG5vdCByZXNlcnZhYmxlXCIsXG4gICAgICAgICAgY29kZTogXCJOT1RfUkVTRVJWQUJMRVwiXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgICAgY29uc3QgYWNjZXNzaWJsZUJ1aWxkaW5nSWRzID0gYXdhaXQgZ2V0QWNjZXNzaWJsZUJ1aWxkaW5nSWRzKHVzZXIpO1xuICAgICAgaWYgKCFhY2Nlc3NpYmxlQnVpbGRpbmdJZHMuaW5jbHVkZXMoY29tbW9uU3BhY2UuYnVpbGRpbmdJZCkpIHtcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAzKS5qc29uKHtcbiAgICAgICAgICBtZXNzYWdlOiBcIkFjY2VzcyBkZW5pZWQgdG8gdGhpcyBjb21tb24gc3BhY2VcIixcbiAgICAgICAgICBjb2RlOiBcIklOU1VGRklDSUVOVF9QRVJNSVNTSU9OU1wiXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgICAgY29uc3QgYmxvY2tlZCA9IGF3YWl0IGlzVXNlckJsb2NrZWQodXNlci5pZCwgc3BhY2VJZCk7XG4gICAgICBpZiAoYmxvY2tlZCkge1xuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDMpLmpzb24oe1xuICAgICAgICAgIG1lc3NhZ2U6IFwiWW91IGFyZSBibG9ja2VkIGZyb20gYm9va2luZyB0aGlzIHNwYWNlXCIsXG4gICAgICAgICAgY29kZTogXCJVU0VSX0JMT0NLRURcIlxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICAgIGlmIChjb21tb25TcGFjZS5vcGVuaW5nSG91cnMgJiYgIWlzV2l0aGluT3BlbmluZ0hvdXJzKHN0YXJ0VGltZSwgZW5kVGltZSwgY29tbW9uU3BhY2Uub3BlbmluZ0hvdXJzKSkge1xuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oe1xuICAgICAgICAgIG1lc3NhZ2U6IFwiQm9va2luZyB0aW1lIGlzIG91dHNpZGUgb3BlbmluZyBob3Vyc1wiLFxuICAgICAgICAgIGNvZGU6IFwiT1VUU0lERV9PUEVOSU5HX0hPVVJTXCJcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgICBjb25zdCBoYXNPdmVybGFwID0gYXdhaXQgaGFzT3ZlcmxhcHBpbmdCb29raW5ncyhzcGFjZUlkLCBzdGFydFRpbWUsIGVuZFRpbWUpO1xuICAgICAgaWYgKGhhc092ZXJsYXApIHtcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDA5KS5qc29uKHtcbiAgICAgICAgICBtZXNzYWdlOiBcIlRpbWUgc2xvdCBpcyBhbHJlYWR5IGJvb2tlZFwiLFxuICAgICAgICAgIGNvZGU6IFwiVElNRV9DT05GTElDVFwiXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgICAgY29uc3QgYm9va2luZ0R1cmF0aW9uSG91cnMgPSAoZW5kVGltZS5nZXRUaW1lKCkgLSBzdGFydFRpbWUuZ2V0VGltZSgpKSAvICgxZTMgKiA2MCAqIDYwKTtcbiAgICAgIGNvbnN0IHRpbWVMaW1pdENoZWNrID0gYXdhaXQgY2hlY2tVc2VyVGltZUxpbWl0KHVzZXIuaWQsIHNwYWNlSWQsIGJvb2tpbmdEdXJhdGlvbkhvdXJzKTtcbiAgICAgIGlmICghdGltZUxpbWl0Q2hlY2sud2l0aGluTGltaXQpIHtcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAzKS5qc29uKHtcbiAgICAgICAgICBtZXNzYWdlOiB0aW1lTGltaXRDaGVjay5tZXNzYWdlLFxuICAgICAgICAgIGNvZGU6IFwiVElNRV9MSU1JVF9FWENFRURFRFwiLFxuICAgICAgICAgIHJlbWFpbmluZ0hvdXJzOiB0aW1lTGltaXRDaGVjay5yZW1haW5pbmdIb3Vyc1xuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICAgIGNvbnN0IG5ld0Jvb2tpbmcgPSBhd2FpdCBkYi5pbnNlcnQoYm9va2luZ3MyKS52YWx1ZXMoe1xuICAgICAgICBjb21tb25TcGFjZUlkOiBzcGFjZUlkLFxuICAgICAgICB1c2VySWQ6IHVzZXIuaWQsXG4gICAgICAgIHN0YXJ0VGltZSxcbiAgICAgICAgZW5kVGltZSxcbiAgICAgICAgc3RhdHVzOiBcImNvbmZpcm1lZFwiXG4gICAgICB9KS5yZXR1cm5pbmcoKTtcbiAgICAgIHJlcy5zdGF0dXMoMjAxKS5qc29uKHtcbiAgICAgICAgbWVzc2FnZTogXCJCb29raW5nIGNyZWF0ZWQgc3VjY2Vzc2Z1bGx5XCIsXG4gICAgICAgIGJvb2tpbmc6IG5ld0Jvb2tpbmdbMF1cbiAgICAgIH0pO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKFwiXFx1Mjc0QyBFcnJvciBjcmVhdGluZyBib29raW5nOlwiLCBlcnJvcik7XG4gICAgICByZXMuc3RhdHVzKDUwMCkuanNvbih7XG4gICAgICAgIG1lc3NhZ2U6IFwiRmFpbGVkIHRvIGNyZWF0ZSBib29raW5nXCIsXG4gICAgICAgIGVycm9yOiBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6IFwiVW5rbm93biBlcnJvclwiXG4gICAgICB9KTtcbiAgICB9XG4gIH0pO1xuICBhcHAyLmdldChcIi9hcGkvY29tbW9uLXNwYWNlcy9jYWxlbmRhci86c3BhY2VJZFwiLCByZXF1aXJlQXV0aCwgYXN5bmMgKHJlcSwgcmVzKSA9PiB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHVzZXIgPSByZXEudXNlciB8fCByZXEuc2Vzc2lvbj8udXNlcjtcbiAgICAgIGlmICghdXNlcikge1xuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDEpLmpzb24oe1xuICAgICAgICAgIG1lc3NhZ2U6IFwiQXV0aGVudGljYXRpb24gcmVxdWlyZWRcIixcbiAgICAgICAgICBjb2RlOiBcIkFVVEhfUkVRVUlSRURcIlxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICAgIGNvbnN0IHBhcmFtVmFsaWRhdGlvbiA9IHNwYWNlSWRTY2hlbWEuc2FmZVBhcnNlKHJlcS5wYXJhbXMpO1xuICAgICAgaWYgKCFwYXJhbVZhbGlkYXRpb24uc3VjY2Vzcykge1xuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oe1xuICAgICAgICAgIG1lc3NhZ2U6IFwiSW52YWxpZCBzcGFjZSBJRFwiLFxuICAgICAgICAgIGVycm9yczogcGFyYW1WYWxpZGF0aW9uLmVycm9yLmlzc3Vlc1xuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICAgIGNvbnN0IHF1ZXJ5VmFsaWRhdGlvbiA9IGNhbGVuZGFyUXVlcnlTY2hlbWEuc2FmZVBhcnNlKHJlcS5xdWVyeSk7XG4gICAgICBpZiAoIXF1ZXJ5VmFsaWRhdGlvbi5zdWNjZXNzKSB7XG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7XG4gICAgICAgICAgbWVzc2FnZTogXCJJbnZhbGlkIHF1ZXJ5IHBhcmFtZXRlcnNcIixcbiAgICAgICAgICBlcnJvcnM6IHF1ZXJ5VmFsaWRhdGlvbi5lcnJvci5pc3N1ZXNcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgICBjb25zdCB7IHNwYWNlSWQgfSA9IHBhcmFtVmFsaWRhdGlvbi5kYXRhO1xuICAgICAgY29uc3QgeyBzdGFydF9kYXRlLCBlbmRfZGF0ZSwgdmlldyB9ID0gcXVlcnlWYWxpZGF0aW9uLmRhdGE7XG4gICAgICBjb25zdCBzcGFjZSA9IGF3YWl0IGRiLnNlbGVjdCh7XG4gICAgICAgIGlkOiBjb21tb25TcGFjZXMyLmlkLFxuICAgICAgICBuYW1lOiBjb21tb25TcGFjZXMyLm5hbWUsXG4gICAgICAgIGJ1aWxkaW5nSWQ6IGNvbW1vblNwYWNlczIuYnVpbGRpbmdJZCxcbiAgICAgICAgaXNSZXNlcnZhYmxlOiBjb21tb25TcGFjZXMyLmlzUmVzZXJ2YWJsZSxcbiAgICAgICAgb3BlbmluZ0hvdXJzOiBjb21tb25TcGFjZXMyLm9wZW5pbmdIb3VycyxcbiAgICAgICAgY2FwYWNpdHk6IGNvbW1vblNwYWNlczIuY2FwYWNpdHlcbiAgICAgIH0pLmZyb20oY29tbW9uU3BhY2VzMikud2hlcmUoZXExNChjb21tb25TcGFjZXMyLmlkLCBzcGFjZUlkKSkubGltaXQoMSk7XG4gICAgICBpZiAoc3BhY2UubGVuZ3RoID09PSAwKSB7XG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwNCkuanNvbih7XG4gICAgICAgICAgbWVzc2FnZTogXCJDb21tb24gc3BhY2Ugbm90IGZvdW5kXCIsXG4gICAgICAgICAgY29kZTogXCJOT1RfRk9VTkRcIlxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICAgIGNvbnN0IGNvbW1vblNwYWNlID0gc3BhY2VbMF07XG4gICAgICBjb25zdCBhY2Nlc3NpYmxlQnVpbGRpbmdJZHMgPSBhd2FpdCBnZXRBY2Nlc3NpYmxlQnVpbGRpbmdJZHModXNlcik7XG4gICAgICBpZiAoIWFjY2Vzc2libGVCdWlsZGluZ0lkcy5pbmNsdWRlcyhjb21tb25TcGFjZS5idWlsZGluZ0lkKSkge1xuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDMpLmpzb24oe1xuICAgICAgICAgIG1lc3NhZ2U6IFwiQWNjZXNzIGRlbmllZCB0byB0aGlzIGNvbW1vbiBzcGFjZVwiLFxuICAgICAgICAgIGNvZGU6IFwiSU5TVUZGSUNJRU5UX1BFUk1JU1NJT05TXCJcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgICBjb25zdCBjb25kaXRpb25zID0gW1xuICAgICAgICBlcTE0KGJvb2tpbmdzMi5jb21tb25TcGFjZUlkLCBzcGFjZUlkKSxcbiAgICAgICAgZXExNChib29raW5nczIuc3RhdHVzLCBcImNvbmZpcm1lZFwiKSxcbiAgICAgICAgZ3RlNShib29raW5nczIuc3RhcnRUaW1lLCBuZXcgRGF0ZShzdGFydF9kYXRlKSksXG4gICAgICAgIGx0ZTQoYm9va2luZ3MyLmVuZFRpbWUsIG5ldyBEYXRlKGVuZF9kYXRlKSlcbiAgICAgIF07XG4gICAgICBjb25zdCBzcGFjZUJvb2tpbmdzID0gYXdhaXQgZGIuc2VsZWN0KHtcbiAgICAgICAgaWQ6IGJvb2tpbmdzMi5pZCxcbiAgICAgICAgc3RhcnRUaW1lOiBib29raW5nczIuc3RhcnRUaW1lLFxuICAgICAgICBlbmRUaW1lOiBib29raW5nczIuZW5kVGltZSxcbiAgICAgICAgc3RhdHVzOiBib29raW5nczIuc3RhdHVzLFxuICAgICAgICB1c2VySWQ6IGJvb2tpbmdzMi51c2VySWQsXG4gICAgICAgIHVzZXJOYW1lOiBzcWwyMWBDT05DQVQoJHt1c2VyczQuZmlyc3ROYW1lfSwgJyAnLCAke3VzZXJzNC5sYXN0TmFtZX0pYCxcbiAgICAgICAgdXNlckVtYWlsOiB1c2VyczQuZW1haWwsXG4gICAgICAgIHVzZXJSb2xlOiB1c2VyczQucm9sZVxuICAgICAgfSkuZnJvbShib29raW5nczIpLmlubmVySm9pbih1c2VyczQsIGVxMTQoYm9va2luZ3MyLnVzZXJJZCwgdXNlcnM0LmlkKSkud2hlcmUoYW5kMTQoLi4uY29uZGl0aW9ucykpLm9yZGVyQnkoYm9va2luZ3MyLnN0YXJ0VGltZSk7XG4gICAgICBjb25zdCBjYW5WaWV3RGV0YWlscyA9IFtcImFkbWluXCIsIFwibWFuYWdlclwiXS5pbmNsdWRlcyh1c2VyLnJvbGUpO1xuICAgICAgY29uc3QgZXZlbnRzID0gc3BhY2VCb29raW5ncy5tYXAoKGJvb2tpbmcpID0+ICh7XG4gICAgICAgIGlkOiBib29raW5nLmlkLFxuICAgICAgICBzdGFydFRpbWU6IGJvb2tpbmcuc3RhcnRUaW1lLnRvSVNPU3RyaW5nKCksXG4gICAgICAgIGVuZFRpbWU6IGJvb2tpbmcuZW5kVGltZS50b0lTT1N0cmluZygpLFxuICAgICAgICBzdGF0dXM6IGJvb2tpbmcuc3RhdHVzLFxuICAgICAgICB1c2VySWQ6IGJvb2tpbmcudXNlcklkLFxuICAgICAgICB1c2VyTmFtZTogY2FuVmlld0RldGFpbHMgfHwgYm9va2luZy51c2VySWQgPT09IHVzZXIuaWQgPyBib29raW5nLnVzZXJOYW1lIDogXCJEXFx4RTlqXFx4RTAgUlxceEU5c2VydlxceEU5XCIsXG4gICAgICAgIHVzZXJFbWFpbDogY2FuVmlld0RldGFpbHMgfHwgYm9va2luZy51c2VySWQgPT09IHVzZXIuaWQgPyBib29raW5nLnVzZXJFbWFpbCA6IG51bGwsXG4gICAgICAgIGlzT3duQm9va2luZzogYm9va2luZy51c2VySWQgPT09IHVzZXIuaWQsXG4gICAgICAgIHNwYWNlSWQsXG4gICAgICAgIHNwYWNlTmFtZTogY29tbW9uU3BhY2UubmFtZSxcbiAgICAgICAgdXNlclJvbGU6IGJvb2tpbmcudXNlclJvbGVcbiAgICAgIH0pKTtcbiAgICAgIGNvbnN0IHRvdGFsQm9va2luZ3MgPSBldmVudHMubGVuZ3RoO1xuICAgICAgY29uc3QgdG90YWxIb3VycyA9IGV2ZW50cy5yZWR1Y2UoKHN1bSwgZXZlbnQpID0+IHtcbiAgICAgICAgY29uc3QgZHVyYXRpb24gPSAobmV3IERhdGUoZXZlbnQuZW5kVGltZSkuZ2V0VGltZSgpIC0gbmV3IERhdGUoZXZlbnQuc3RhcnRUaW1lKS5nZXRUaW1lKCkpIC8gKDFlMyAqIDYwICogNjApO1xuICAgICAgICByZXR1cm4gc3VtICsgZHVyYXRpb247XG4gICAgICB9LCAwKTtcbiAgICAgIGNvbnN0IHVuaXF1ZVVzZXJzID0gbmV3IFNldChldmVudHMubWFwKChlKSA9PiBlLnVzZXJJZCkpLnNpemU7XG4gICAgICBjb25zdCBjYWxlbmRhckRhdGEgPSB7XG4gICAgICAgIHNwYWNlOiB7XG4gICAgICAgICAgaWQ6IGNvbW1vblNwYWNlLmlkLFxuICAgICAgICAgIG5hbWU6IGNvbW1vblNwYWNlLm5hbWUsXG4gICAgICAgICAgaXNSZXNlcnZhYmxlOiBjb21tb25TcGFjZS5pc1Jlc2VydmFibGUsXG4gICAgICAgICAgb3BlbmluZ0hvdXJzOiBjb21tb25TcGFjZS5vcGVuaW5nSG91cnNcbiAgICAgICAgfSxcbiAgICAgICAgY2FsZW5kYXI6IHtcbiAgICAgICAgICB2aWV3LFxuICAgICAgICAgIHN0YXJ0RGF0ZTogc3RhcnRfZGF0ZSxcbiAgICAgICAgICBlbmREYXRlOiBlbmRfZGF0ZSxcbiAgICAgICAgICBldmVudHNcbiAgICAgICAgfSxcbiAgICAgICAgcGVybWlzc2lvbnM6IHtcbiAgICAgICAgICBjYW5WaWV3RGV0YWlscyxcbiAgICAgICAgICBjYW5DcmVhdGVCb29raW5nczogY29tbW9uU3BhY2UuaXNSZXNlcnZhYmxlICYmICFhd2FpdCBpc1VzZXJCbG9ja2VkKHVzZXIuaWQsIHNwYWNlSWQpXG4gICAgICAgIH0sXG4gICAgICAgIHN1bW1hcnk6IHtcbiAgICAgICAgICB0b3RhbEJvb2tpbmdzLFxuICAgICAgICAgIHRvdGFsSG91cnM6IE1hdGgucm91bmQodG90YWxIb3VycyAqIDEwKSAvIDEwLFxuICAgICAgICAgIHVuaXF1ZVVzZXJzXG4gICAgICAgIH1cbiAgICAgIH07XG4gICAgICByZXMuanNvbihjYWxlbmRhckRhdGEpO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKFwiXFx1Mjc0QyBFcnJvciBmZXRjaGluZyBjYWxlbmRhciBkYXRhOlwiLCBlcnJvcik7XG4gICAgICByZXMuc3RhdHVzKDUwMCkuanNvbih7XG4gICAgICAgIG1lc3NhZ2U6IFwiRmFpbGVkIHRvIGZldGNoIGNhbGVuZGFyIGRhdGFcIixcbiAgICAgICAgZXJyb3I6IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogXCJVbmtub3duIGVycm9yXCJcbiAgICAgIH0pO1xuICAgIH1cbiAgfSk7XG4gIGFwcDIuZ2V0KFwiL2FwaS9jb21tb24tc3BhY2VzL215LWJvb2tpbmdzXCIsIHJlcXVpcmVBdXRoLCBhc3luYyAocmVxLCByZXMpID0+IHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgdXNlciA9IHJlcS51c2VyO1xuICAgICAgY29uc3QgdXNlckJvb2tpbmdzID0gYXdhaXQgZGIuc2VsZWN0KHtcbiAgICAgICAgaWQ6IGJvb2tpbmdzMi5pZCxcbiAgICAgICAgY29tbW9uU3BhY2VJZDogYm9va2luZ3MyLmNvbW1vblNwYWNlSWQsXG4gICAgICAgIHN0YXJ0VGltZTogYm9va2luZ3MyLnN0YXJ0VGltZSxcbiAgICAgICAgZW5kVGltZTogYm9va2luZ3MyLmVuZFRpbWUsXG4gICAgICAgIHN0YXR1czogYm9va2luZ3MyLnN0YXR1cyxcbiAgICAgICAgY3JlYXRlZEF0OiBib29raW5nczIuY3JlYXRlZEF0LFxuICAgICAgICBjb21tb25TcGFjZU5hbWU6IGNvbW1vblNwYWNlczIubmFtZSxcbiAgICAgICAgYnVpbGRpbmdOYW1lOiBidWlsZGluZ3M0Lm5hbWUsXG4gICAgICAgIGJ1aWxkaW5nQWRkcmVzczogYnVpbGRpbmdzNC5hZGRyZXNzXG4gICAgICB9KS5mcm9tKGJvb2tpbmdzMikuaW5uZXJKb2luKGNvbW1vblNwYWNlczIsIGVxMTQoYm9va2luZ3MyLmNvbW1vblNwYWNlSWQsIGNvbW1vblNwYWNlczIuaWQpKS5pbm5lckpvaW4oYnVpbGRpbmdzNCwgZXExNChjb21tb25TcGFjZXMyLmJ1aWxkaW5nSWQsIGJ1aWxkaW5nczQuaWQpKS53aGVyZShhbmQxNChlcTE0KGJvb2tpbmdzMi51c2VySWQsIHVzZXIuaWQpLCBlcTE0KGJvb2tpbmdzMi5zdGF0dXMsIFwiY29uZmlybWVkXCIpKSkub3JkZXJCeShkZXNjNShib29raW5nczIuc3RhcnRUaW1lKSk7XG4gICAgICByZXMuanNvbih1c2VyQm9va2luZ3MpO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKFwiXFx1Mjc0QyBFcnJvciBmZXRjaGluZyB1c2VyIGJvb2tpbmdzOlwiLCBlcnJvcik7XG4gICAgICByZXMuc3RhdHVzKDUwMCkuanNvbih7XG4gICAgICAgIG1lc3NhZ2U6IFwiRmFpbGVkIHRvIGZldGNoIHVzZXIgYm9va2luZ3NcIixcbiAgICAgICAgZGV0YWlsczogZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiBcIlVua25vd24gZXJyb3JcIlxuICAgICAgfSk7XG4gICAgfVxuICB9KTtcbiAgYXBwMi5kZWxldGUoXG4gICAgXCIvYXBpL2NvbW1vbi1zcGFjZXMvYm9va2luZ3MvOmJvb2tpbmdJZFwiLFxuICAgIHJlcXVpcmVBdXRoLFxuICAgIGFzeW5jIChyZXEsIHJlcykgPT4ge1xuICAgICAgdHJ5IHtcbiAgICAgICAgY29uc3QgdXNlciA9IHJlcS51c2VyIHx8IHJlcS5zZXNzaW9uPy51c2VyO1xuICAgICAgICBpZiAoIXVzZXIpIHtcbiAgICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDEpLmpzb24oe1xuICAgICAgICAgICAgbWVzc2FnZTogXCJBdXRoZW50aWNhdGlvbiByZXF1aXJlZFwiLFxuICAgICAgICAgICAgY29kZTogXCJBVVRIX1JFUVVJUkVEXCJcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBwYXJhbVZhbGlkYXRpb24gPSBib29raW5nSWRTY2hlbWEuc2FmZVBhcnNlKHJlcS5wYXJhbXMpO1xuICAgICAgICBpZiAoIXBhcmFtVmFsaWRhdGlvbi5zdWNjZXNzKSB7XG4gICAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHtcbiAgICAgICAgICAgIG1lc3NhZ2U6IFwiSW52YWxpZCBib29raW5nIElEXCIsXG4gICAgICAgICAgICBlcnJvcnM6IHBhcmFtVmFsaWRhdGlvbi5lcnJvci5pc3N1ZXNcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCB7IGJvb2tpbmdJZCB9ID0gcGFyYW1WYWxpZGF0aW9uLmRhdGE7XG4gICAgICAgIGNvbnN0IGJvb2tpbmcgPSBhd2FpdCBkYi5zZWxlY3Qoe1xuICAgICAgICAgIGlkOiBib29raW5nczIuaWQsXG4gICAgICAgICAgdXNlcklkOiBib29raW5nczIudXNlcklkLFxuICAgICAgICAgIGNvbW1vblNwYWNlSWQ6IGJvb2tpbmdzMi5jb21tb25TcGFjZUlkLFxuICAgICAgICAgIGJ1aWxkaW5nSWQ6IGNvbW1vblNwYWNlczIuYnVpbGRpbmdJZCxcbiAgICAgICAgICBzdGF0dXM6IGJvb2tpbmdzMi5zdGF0dXNcbiAgICAgICAgfSkuZnJvbShib29raW5nczIpLmlubmVySm9pbihjb21tb25TcGFjZXMyLCBlcTE0KGJvb2tpbmdzMi5jb21tb25TcGFjZUlkLCBjb21tb25TcGFjZXMyLmlkKSkud2hlcmUoZXExNChib29raW5nczIuaWQsIGJvb2tpbmdJZCkpLmxpbWl0KDEpO1xuICAgICAgICBpZiAoYm9va2luZy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDQpLmpzb24oe1xuICAgICAgICAgICAgbWVzc2FnZTogXCJCb29raW5nIG5vdCBmb3VuZFwiLFxuICAgICAgICAgICAgY29kZTogXCJOT1RfRk9VTkRcIlxuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGJvb2tpbmdEZXRhaWxzID0gYm9va2luZ1swXTtcbiAgICAgICAgbGV0IGNhbkNhbmNlbCA9IGZhbHNlO1xuICAgICAgICBpZiAoYm9va2luZ0RldGFpbHMudXNlcklkID09PSB1c2VyLmlkKSB7XG4gICAgICAgICAgY2FuQ2FuY2VsID0gdHJ1ZTtcbiAgICAgICAgfSBlbHNlIGlmIChbXCJhZG1pblwiLCBcIm1hbmFnZXJcIl0uaW5jbHVkZXModXNlci5yb2xlKSkge1xuICAgICAgICAgIGNvbnN0IGFjY2Vzc2libGVCdWlsZGluZ0lkcyA9IGF3YWl0IGdldEFjY2Vzc2libGVCdWlsZGluZ0lkcyh1c2VyKTtcbiAgICAgICAgICBjYW5DYW5jZWwgPSBhY2Nlc3NpYmxlQnVpbGRpbmdJZHMuaW5jbHVkZXMoYm9va2luZ0RldGFpbHMuYnVpbGRpbmdJZCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFjYW5DYW5jZWwpIHtcbiAgICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDMpLmpzb24oe1xuICAgICAgICAgICAgbWVzc2FnZTogXCJDYW4gb25seSBjYW5jZWwgeW91ciBvd24gYm9va2luZ3NcIixcbiAgICAgICAgICAgIGNvZGU6IFwiSU5TVUZGSUNJRU5UX1BFUk1JU1NJT05TXCJcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBhd2FpdCBkYi51cGRhdGUoYm9va2luZ3MyKS5zZXQoe1xuICAgICAgICAgIHN0YXR1czogXCJjYW5jZWxsZWRcIixcbiAgICAgICAgICB1cGRhdGVkQXQ6IC8qIEBfX1BVUkVfXyAqLyBuZXcgRGF0ZSgpXG4gICAgICAgIH0pLndoZXJlKGVxMTQoYm9va2luZ3MyLmlkLCBib29raW5nSWQpKTtcbiAgICAgICAgcmVzLmpzb24oe1xuICAgICAgICAgIG1lc3NhZ2U6IFwiQm9va2luZyBjYW5jZWxsZWQgc3VjY2Vzc2Z1bGx5XCJcbiAgICAgICAgfSk7XG4gICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICBjb25zb2xlLmVycm9yKFwiXFx1Mjc0QyBFcnJvciBjYW5jZWxsaW5nIGJvb2tpbmc6XCIsIGVycm9yKTtcbiAgICAgICAgcmVzLnN0YXR1cyg1MDApLmpzb24oe1xuICAgICAgICAgIG1lc3NhZ2U6IFwiRmFpbGVkIHRvIGNhbmNlbCBib29raW5nXCIsXG4gICAgICAgICAgZXJyb3I6IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogXCJVbmtub3duIGVycm9yXCJcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfVxuICApO1xuICBhcHAyLmdldChcbiAgICBcIi9hcGkvY29tbW9uLXNwYWNlcy86c3BhY2VJZC9zdGF0c1wiLFxuICAgIHJlcXVpcmVBdXRoLFxuICAgIHJlcXVpcmVSb2xlKFtcImFkbWluXCIsIFwibWFuYWdlclwiXSksXG4gICAgYXN5bmMgKHJlcSwgcmVzKSA9PiB7XG4gICAgICB0cnkge1xuICAgICAgICBjb25zdCB1c2VyID0gcmVxLnVzZXIgfHwgcmVxLnNlc3Npb24/LnVzZXI7XG4gICAgICAgIGlmICghdXNlcikge1xuICAgICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMSkuanNvbih7XG4gICAgICAgICAgICBtZXNzYWdlOiBcIkF1dGhlbnRpY2F0aW9uIHJlcXVpcmVkXCIsXG4gICAgICAgICAgICBjb2RlOiBcIkFVVEhfUkVRVUlSRURcIlxuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHBhcmFtVmFsaWRhdGlvbiA9IHNwYWNlSWRTY2hlbWEuc2FmZVBhcnNlKHJlcS5wYXJhbXMpO1xuICAgICAgICBpZiAoIXBhcmFtVmFsaWRhdGlvbi5zdWNjZXNzKSB7XG4gICAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHtcbiAgICAgICAgICAgIG1lc3NhZ2U6IFwiSW52YWxpZCBzcGFjZSBJRFwiLFxuICAgICAgICAgICAgZXJyb3JzOiBwYXJhbVZhbGlkYXRpb24uZXJyb3IuaXNzdWVzXG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgeyBzcGFjZUlkIH0gPSBwYXJhbVZhbGlkYXRpb24uZGF0YTtcbiAgICAgICAgY29uc3Qgc3BhY2UgPSBhd2FpdCBkYi5zZWxlY3Qoe1xuICAgICAgICAgIGlkOiBjb21tb25TcGFjZXMyLmlkLFxuICAgICAgICAgIGJ1aWxkaW5nSWQ6IGNvbW1vblNwYWNlczIuYnVpbGRpbmdJZCxcbiAgICAgICAgICBuYW1lOiBjb21tb25TcGFjZXMyLm5hbWVcbiAgICAgICAgfSkuZnJvbShjb21tb25TcGFjZXMyKS53aGVyZShlcTE0KGNvbW1vblNwYWNlczIuaWQsIHNwYWNlSWQpKS5saW1pdCgxKTtcbiAgICAgICAgaWYgKHNwYWNlLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwNCkuanNvbih7XG4gICAgICAgICAgICBtZXNzYWdlOiBcIkNvbW1vbiBzcGFjZSBub3QgZm91bmRcIixcbiAgICAgICAgICAgIGNvZGU6IFwiTk9UX0ZPVU5EXCJcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBhY2Nlc3NpYmxlQnVpbGRpbmdJZHMgPSBhd2FpdCBnZXRBY2Nlc3NpYmxlQnVpbGRpbmdJZHModXNlcik7XG4gICAgICAgIGlmICghYWNjZXNzaWJsZUJ1aWxkaW5nSWRzLmluY2x1ZGVzKHNwYWNlWzBdLmJ1aWxkaW5nSWQpKSB7XG4gICAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAzKS5qc29uKHtcbiAgICAgICAgICAgIG1lc3NhZ2U6IFwiQWNjZXNzIGRlbmllZCB0byB0aGlzIGNvbW1vbiBzcGFjZVwiLFxuICAgICAgICAgICAgY29kZTogXCJJTlNVRkZJQ0lFTlRfUEVSTUlTU0lPTlNcIlxuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IG9uZVllYXJBZ28gPSAvKiBAX19QVVJFX18gKi8gbmV3IERhdGUoKTtcbiAgICAgICAgb25lWWVhckFnby5zZXRGdWxsWWVhcihvbmVZZWFyQWdvLmdldEZ1bGxZZWFyKCkgLSAxKTtcbiAgICAgICAgY29uc3Qgc3RhdHMgPSBhd2FpdCBkYi5zZWxlY3Qoe1xuICAgICAgICAgIHVzZXJJZDogYm9va2luZ3MyLnVzZXJJZCxcbiAgICAgICAgICB1c2VyTmFtZTogc3FsMjFgQ09OQ0FUKCR7dXNlcnM0LmZpcnN0TmFtZX0sICcgJywgJHt1c2VyczQubGFzdE5hbWV9KWAsXG4gICAgICAgICAgdXNlckVtYWlsOiB1c2VyczQuZW1haWwsXG4gICAgICAgICAgdG90YWxIb3Vyczogc3FsMjFgRVhUUkFDVChFUE9DSCBGUk9NIFNVTSgke2Jvb2tpbmdzMi5lbmRUaW1lfSAtICR7Ym9va2luZ3MyLnN0YXJ0VGltZX0pKSAvIDM2MDBgLFxuICAgICAgICAgIHRvdGFsQm9va2luZ3M6IHNxbDIxYENPVU5UKCR7Ym9va2luZ3MyLmlkfSlgXG4gICAgICAgIH0pLmZyb20oYm9va2luZ3MyKS5pbm5lckpvaW4odXNlcnM0LCBlcTE0KGJvb2tpbmdzMi51c2VySWQsIHVzZXJzNC5pZCkpLndoZXJlKFxuICAgICAgICAgIGFuZDE0KFxuICAgICAgICAgICAgZXExNChib29raW5nczIuY29tbW9uU3BhY2VJZCwgc3BhY2VJZCksXG4gICAgICAgICAgICBlcTE0KGJvb2tpbmdzMi5zdGF0dXMsIFwiY29uZmlybWVkXCIpLFxuICAgICAgICAgICAgZ3RlNShib29raW5nczIuc3RhcnRUaW1lLCBvbmVZZWFyQWdvKVxuICAgICAgICAgIClcbiAgICAgICAgKS5ncm91cEJ5KGJvb2tpbmdzMi51c2VySWQsIHVzZXJzNC5maXJzdE5hbWUsIHVzZXJzNC5sYXN0TmFtZSwgdXNlcnM0LmVtYWlsKS5vcmRlckJ5KFxuICAgICAgICAgIGRlc2M1KFxuICAgICAgICAgICAgc3FsMjFgRVhUUkFDVChFUE9DSCBGUk9NIFNVTSgke2Jvb2tpbmdzMi5lbmRUaW1lfSAtICR7Ym9va2luZ3MyLnN0YXJ0VGltZX0pKSAvIDM2MDBgXG4gICAgICAgICAgKVxuICAgICAgICApO1xuICAgICAgICBjb25zdCB0b3RhbFN0YXRzID0gYXdhaXQgZGIuc2VsZWN0KHtcbiAgICAgICAgICB0b3RhbEJvb2tpbmdzOiBzcWwyMWBDT1VOVCgke2Jvb2tpbmdzMi5pZH0pYCxcbiAgICAgICAgICB0b3RhbEhvdXJzOiBzcWwyMWBFWFRSQUNUKEVQT0NIIEZST00gU1VNKCR7Ym9va2luZ3MyLmVuZFRpbWV9IC0gJHtib29raW5nczIuc3RhcnRUaW1lfSkpIC8gMzYwMGAsXG4gICAgICAgICAgdW5pcXVlVXNlcnM6IHNxbDIxYENPVU5UKERJU1RJTkNUICR7Ym9va2luZ3MyLnVzZXJJZH0pYFxuICAgICAgICB9KS5mcm9tKGJvb2tpbmdzMikud2hlcmUoXG4gICAgICAgICAgYW5kMTQoXG4gICAgICAgICAgICBlcTE0KGJvb2tpbmdzMi5jb21tb25TcGFjZUlkLCBzcGFjZUlkKSxcbiAgICAgICAgICAgIGVxMTQoYm9va2luZ3MyLnN0YXR1cywgXCJjb25maXJtZWRcIiksXG4gICAgICAgICAgICBndGU1KGJvb2tpbmdzMi5zdGFydFRpbWUsIG9uZVllYXJBZ28pXG4gICAgICAgICAgKVxuICAgICAgICApO1xuICAgICAgICByZXMuanNvbih7XG4gICAgICAgICAgc3BhY2VOYW1lOiBzcGFjZVswXS5uYW1lLFxuICAgICAgICAgIHBlcmlvZDogXCJMYXN0IDEyIG1vbnRoc1wiLFxuICAgICAgICAgIHN1bW1hcnk6IHRvdGFsU3RhdHNbMF0sXG4gICAgICAgICAgdXNlclN0YXRzOiBzdGF0c1xuICAgICAgICB9KTtcbiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoXCJcXHUyNzRDIEVycm9yIGZldGNoaW5nIHNwYWNlIHN0YXRpc3RpY3M6XCIsIGVycm9yKTtcbiAgICAgICAgcmVzLnN0YXR1cyg1MDApLmpzb24oe1xuICAgICAgICAgIG1lc3NhZ2U6IFwiRmFpbGVkIHRvIGZldGNoIHNwYWNlIHN0YXRpc3RpY3NcIixcbiAgICAgICAgICBlcnJvcjogZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiBcIlVua25vd24gZXJyb3JcIlxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9XG4gICk7XG4gIGFwcDIucG9zdChcbiAgICBcIi9hcGkvY29tbW9uLXNwYWNlcy91c2Vycy86dXNlcklkL3Jlc3RyaWN0aW9uc1wiLFxuICAgIHJlcXVpcmVBdXRoLFxuICAgIHJlcXVpcmVSb2xlKFtcImFkbWluXCIsIFwibWFuYWdlclwiXSksXG4gICAgYXN5bmMgKHJlcSwgcmVzKSA9PiB7XG4gICAgICB0cnkge1xuICAgICAgICBjb25zdCB1c2VyID0gcmVxLnVzZXIgfHwgcmVxLnNlc3Npb24/LnVzZXI7XG4gICAgICAgIGlmICghdXNlcikge1xuICAgICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMSkuanNvbih7XG4gICAgICAgICAgICBtZXNzYWdlOiBcIkF1dGhlbnRpY2F0aW9uIHJlcXVpcmVkXCIsXG4gICAgICAgICAgICBjb2RlOiBcIkFVVEhfUkVRVUlSRURcIlxuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHBhcmFtVmFsaWRhdGlvbiA9IHVzZXJJZFNjaGVtYS5zYWZlUGFyc2UocmVxLnBhcmFtcyk7XG4gICAgICAgIGlmICghcGFyYW1WYWxpZGF0aW9uLnN1Y2Nlc3MpIHtcbiAgICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oe1xuICAgICAgICAgICAgbWVzc2FnZTogXCJJbnZhbGlkIHVzZXIgSURcIixcbiAgICAgICAgICAgIGVycm9yczogcGFyYW1WYWxpZGF0aW9uLmVycm9yLmlzc3Vlcy5tYXAoKGlzc3VlKSA9PiAoe1xuICAgICAgICAgICAgICBmaWVsZDogaXNzdWUucGF0aC5qb2luKFwiLlwiKSxcbiAgICAgICAgICAgICAgbWVzc2FnZTogaXNzdWUubWVzc2FnZVxuICAgICAgICAgICAgfSkpXG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgYm9keVZhbGlkYXRpb24gPSBjcmVhdGVSZXN0cmljdGlvblNjaGVtYS5zYWZlUGFyc2UocmVxLmJvZHkpO1xuICAgICAgICBpZiAoIWJvZHlWYWxpZGF0aW9uLnN1Y2Nlc3MpIHtcbiAgICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oe1xuICAgICAgICAgICAgbWVzc2FnZTogXCJJbnZhbGlkIHJlc3RyaWN0aW9uIGRhdGFcIixcbiAgICAgICAgICAgIGVycm9yczogYm9keVZhbGlkYXRpb24uZXJyb3IuaXNzdWVzLm1hcCgoaXNzdWUpID0+ICh7XG4gICAgICAgICAgICAgIGZpZWxkOiBpc3N1ZS5wYXRoLmpvaW4oXCIuXCIpLFxuICAgICAgICAgICAgICBtZXNzYWdlOiBpc3N1ZS5tZXNzYWdlXG4gICAgICAgICAgICB9KSlcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCB7IHVzZXJJZCB9ID0gcGFyYW1WYWxpZGF0aW9uLmRhdGE7XG4gICAgICAgIGNvbnN0IHsgY29tbW9uX3NwYWNlX2lkLCBpc19ibG9ja2VkLCByZWFzb24gfSA9IGJvZHlWYWxpZGF0aW9uLmRhdGE7XG4gICAgICAgIGNvbnN0IHRhcmdldFVzZXIgPSBhd2FpdCBkYi5zZWxlY3QoeyBpZDogdXNlcnM0LmlkIH0pLmZyb20odXNlcnM0KS53aGVyZShlcTE0KHVzZXJzNC5pZCwgdXNlcklkKSkubGltaXQoMSk7XG4gICAgICAgIGlmICh0YXJnZXRVc2VyLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwNCkuanNvbih7XG4gICAgICAgICAgICBtZXNzYWdlOiBcIlVzZXIgbm90IGZvdW5kXCIsXG4gICAgICAgICAgICBjb2RlOiBcIk5PVF9GT1VORFwiXG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3Qgc3BhY2UgPSBhd2FpdCBkYi5zZWxlY3Qoe1xuICAgICAgICAgIGlkOiBjb21tb25TcGFjZXMyLmlkLFxuICAgICAgICAgIGJ1aWxkaW5nSWQ6IGNvbW1vblNwYWNlczIuYnVpbGRpbmdJZFxuICAgICAgICB9KS5mcm9tKGNvbW1vblNwYWNlczIpLndoZXJlKGVxMTQoY29tbW9uU3BhY2VzMi5pZCwgY29tbW9uX3NwYWNlX2lkKSkubGltaXQoMSk7XG4gICAgICAgIGlmIChzcGFjZS5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDQpLmpzb24oe1xuICAgICAgICAgICAgbWVzc2FnZTogXCJDb21tb24gc3BhY2Ugbm90IGZvdW5kXCIsXG4gICAgICAgICAgICBjb2RlOiBcIk5PVF9GT1VORFwiXG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgYWNjZXNzaWJsZUJ1aWxkaW5nSWRzID0gYXdhaXQgZ2V0QWNjZXNzaWJsZUJ1aWxkaW5nSWRzKHVzZXIpO1xuICAgICAgICBpZiAoIWFjY2Vzc2libGVCdWlsZGluZ0lkcy5pbmNsdWRlcyhzcGFjZVswXS5idWlsZGluZ0lkKSkge1xuICAgICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMykuanNvbih7XG4gICAgICAgICAgICBtZXNzYWdlOiBcIkFjY2VzcyBkZW5pZWQgdG8gdGhpcyBjb21tb24gc3BhY2VcIixcbiAgICAgICAgICAgIGNvZGU6IFwiSU5TVUZGSUNJRU5UX1BFUk1JU1NJT05TXCJcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBleGlzdGluZ1Jlc3RyaWN0aW9uID0gYXdhaXQgZGIuc2VsZWN0KHsgaWQ6IHVzZXJCb29raW5nUmVzdHJpY3Rpb25zMi5pZCB9KS5mcm9tKHVzZXJCb29raW5nUmVzdHJpY3Rpb25zMikud2hlcmUoXG4gICAgICAgICAgYW5kMTQoXG4gICAgICAgICAgICBlcTE0KHVzZXJCb29raW5nUmVzdHJpY3Rpb25zMi51c2VySWQsIHVzZXJJZCksXG4gICAgICAgICAgICBlcTE0KHVzZXJCb29raW5nUmVzdHJpY3Rpb25zMi5jb21tb25TcGFjZUlkLCBjb21tb25fc3BhY2VfaWQpXG4gICAgICAgICAgKVxuICAgICAgICApLmxpbWl0KDEpO1xuICAgICAgICBpZiAoZXhpc3RpbmdSZXN0cmljdGlvbi5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgYXdhaXQgZGIudXBkYXRlKHVzZXJCb29raW5nUmVzdHJpY3Rpb25zMikuc2V0KHtcbiAgICAgICAgICAgIGlzQmxvY2tlZDogaXNfYmxvY2tlZCxcbiAgICAgICAgICAgIHJlYXNvbixcbiAgICAgICAgICAgIHVwZGF0ZWRBdDogLyogQF9fUFVSRV9fICovIG5ldyBEYXRlKClcbiAgICAgICAgICB9KS53aGVyZShlcTE0KHVzZXJCb29raW5nUmVzdHJpY3Rpb25zMi5pZCwgZXhpc3RpbmdSZXN0cmljdGlvblswXS5pZCkpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGF3YWl0IGRiLmluc2VydCh1c2VyQm9va2luZ1Jlc3RyaWN0aW9uczIpLnZhbHVlcyh7XG4gICAgICAgICAgICB1c2VySWQsXG4gICAgICAgICAgICBjb21tb25TcGFjZUlkOiBjb21tb25fc3BhY2VfaWQsXG4gICAgICAgICAgICBpc0Jsb2NrZWQ6IGlzX2Jsb2NrZWQsXG4gICAgICAgICAgICByZWFzb25cbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICByZXMuanNvbih7XG4gICAgICAgICAgbWVzc2FnZTogYFVzZXIgJHtpc19ibG9ja2VkID8gXCJibG9ja2VkIGZyb21cIiA6IFwidW5ibG9ja2VkIGZyb21cIn0gYm9va2luZyB0aGlzIHNwYWNlYFxuICAgICAgICB9KTtcbiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoXCJcXHUyNzRDIEVycm9yIG1hbmFnaW5nIHVzZXIgcmVzdHJpY3Rpb246XCIsIGVycm9yKTtcbiAgICAgICAgcmVzLnN0YXR1cyg1MDApLmpzb24oe1xuICAgICAgICAgIG1lc3NhZ2U6IFwiRmFpbGVkIHRvIG1hbmFnZSB1c2VyIHJlc3RyaWN0aW9uXCIsXG4gICAgICAgICAgZXJyb3I6IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogXCJVbmtub3duIGVycm9yXCJcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfVxuICApO1xuICBhcHAyLnBvc3QoXG4gICAgXCIvYXBpL2NvbW1vbi1zcGFjZXNcIixcbiAgICByZXF1aXJlQXV0aCxcbiAgICByZXF1aXJlUm9sZShbXCJhZG1pblwiLCBcIm1hbmFnZXJcIl0pLFxuICAgIGFzeW5jIChyZXEsIHJlcykgPT4ge1xuICAgICAgdHJ5IHtcbiAgICAgICAgY29uc3QgdXNlciA9IHJlcS51c2VyO1xuICAgICAgICBpZiAoIXVzZXIpIHtcbiAgICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDEpLmpzb24oe1xuICAgICAgICAgICAgbWVzc2FnZTogXCJBdXRoZW50aWNhdGlvbiByZXF1aXJlZFwiLFxuICAgICAgICAgICAgY29kZTogXCJBVVRIX1JFUVVJUkVEXCJcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCB2YWxpZGF0aW9uUmVzdWx0ID0gY3JlYXRlQ29tbW9uU3BhY2VTY2hlbWEuc2FmZVBhcnNlKHJlcS5ib2R5KTtcbiAgICAgICAgaWYgKCF2YWxpZGF0aW9uUmVzdWx0LnN1Y2Nlc3MpIHtcbiAgICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oe1xuICAgICAgICAgICAgbWVzc2FnZTogXCJJbnZhbGlkIHJlcXVlc3QgZGF0YVwiLFxuICAgICAgICAgICAgZXJyb3JzOiB2YWxpZGF0aW9uUmVzdWx0LmVycm9yLmlzc3Vlcy5tYXAoKGlzc3VlKSA9PiAoe1xuICAgICAgICAgICAgICBmaWVsZDogaXNzdWUucGF0aC5qb2luKFwiLlwiKSxcbiAgICAgICAgICAgICAgbWVzc2FnZTogaXNzdWUubWVzc2FnZVxuICAgICAgICAgICAgfSkpXG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgeyBuYW1lLCBkZXNjcmlwdGlvbiwgYnVpbGRpbmdfaWQsIGlzX3Jlc2VydmFibGUsIGNhcGFjaXR5LCBvcGVuaW5nX2hvdXJzIH0gPSB2YWxpZGF0aW9uUmVzdWx0LmRhdGE7XG4gICAgICAgIGNvbnN0IGFjY2Vzc2libGVCdWlsZGluZ0lkcyA9IGF3YWl0IGdldEFjY2Vzc2libGVCdWlsZGluZ0lkcyh1c2VyKTtcbiAgICAgICAgaWYgKCFhY2Nlc3NpYmxlQnVpbGRpbmdJZHMuaW5jbHVkZXMoYnVpbGRpbmdfaWQpKSB7XG4gICAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAzKS5qc29uKHtcbiAgICAgICAgICAgIG1lc3NhZ2U6IFwiQWNjZXNzIGRlbmllZC4gWW91IGNhbiBvbmx5IGNyZWF0ZSBzcGFjZXMgaW4gYnVpbGRpbmdzIHlvdSBtYW5hZ2UuXCIsXG4gICAgICAgICAgICBjb2RlOiBcIklOU1VGRklDSUVOVF9QRVJNSVNTSU9OU1wiXG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgYnVpbGRpbmcgPSBhd2FpdCBkYi5zZWxlY3QoeyBpZDogYnVpbGRpbmdzNC5pZCwgbmFtZTogYnVpbGRpbmdzNC5uYW1lIH0pLmZyb20oYnVpbGRpbmdzNCkud2hlcmUoYW5kMTQoZXExNChidWlsZGluZ3M0LmlkLCBidWlsZGluZ19pZCksIGVxMTQoYnVpbGRpbmdzNC5pc0FjdGl2ZSwgdHJ1ZSkpKS5saW1pdCgxKTtcbiAgICAgICAgaWYgKGJ1aWxkaW5nLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwNCkuanNvbih7XG4gICAgICAgICAgICBtZXNzYWdlOiBcIkJ1aWxkaW5nIG5vdCBmb3VuZCBvciBpbmFjdGl2ZVwiLFxuICAgICAgICAgICAgY29kZTogXCJCVUlMRElOR19OT1RfRk9VTkRcIlxuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGV4aXN0aW5nU3BhY2UgPSBhd2FpdCBkYi5zZWxlY3QoeyBpZDogY29tbW9uU3BhY2VzMi5pZCB9KS5mcm9tKGNvbW1vblNwYWNlczIpLndoZXJlKGFuZDE0KGVxMTQoY29tbW9uU3BhY2VzMi5uYW1lLCBuYW1lKSwgZXExNChjb21tb25TcGFjZXMyLmJ1aWxkaW5nSWQsIGJ1aWxkaW5nX2lkKSkpLmxpbWl0KDEpO1xuICAgICAgICBpZiAoZXhpc3RpbmdTcGFjZS5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDA5KS5qc29uKHtcbiAgICAgICAgICAgIG1lc3NhZ2U6IFwiQSBjb21tb24gc3BhY2Ugd2l0aCB0aGlzIG5hbWUgYWxyZWFkeSBleGlzdHMgaW4gdGhpcyBidWlsZGluZ1wiLFxuICAgICAgICAgICAgY29kZTogXCJEVVBMSUNBVEVfTkFNRVwiXG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgbmV3U3BhY2UgPSBhd2FpdCBkYi5pbnNlcnQoY29tbW9uU3BhY2VzMikudmFsdWVzKHtcbiAgICAgICAgICBuYW1lLFxuICAgICAgICAgIGRlc2NyaXB0aW9uOiBkZXNjcmlwdGlvbiB8fCBudWxsLFxuICAgICAgICAgIGJ1aWxkaW5nSWQ6IGJ1aWxkaW5nX2lkLFxuICAgICAgICAgIGlzUmVzZXJ2YWJsZTogaXNfcmVzZXJ2YWJsZSxcbiAgICAgICAgICBjYXBhY2l0eTogY2FwYWNpdHkgfHwgbnVsbCxcbiAgICAgICAgICBvcGVuaW5nSG91cnM6IG9wZW5pbmdfaG91cnMgPyBgJHtvcGVuaW5nX2hvdXJzLnN0YXJ0fS0ke29wZW5pbmdfaG91cnMuZW5kfWAgOiBudWxsXG4gICAgICAgIH0pLnJldHVybmluZygpO1xuICAgICAgICBjb25zb2xlLmxvZyhgXFx1MjcwNSBDcmVhdGVkIG5ldyBjb21tb24gc3BhY2U6ICR7bmFtZX0gaW4gYnVpbGRpbmcgJHtidWlsZGluZ1swXS5uYW1lfWApO1xuICAgICAgICByZXMuc3RhdHVzKDIwMSkuanNvbih7XG4gICAgICAgICAgbWVzc2FnZTogXCJDb21tb24gc3BhY2UgY3JlYXRlZCBzdWNjZXNzZnVsbHlcIixcbiAgICAgICAgICBzcGFjZToge1xuICAgICAgICAgICAgaWQ6IG5ld1NwYWNlWzBdLmlkLFxuICAgICAgICAgICAgbmFtZTogbmV3U3BhY2VbMF0ubmFtZSxcbiAgICAgICAgICAgIGRlc2NyaXB0aW9uOiBuZXdTcGFjZVswXS5kZXNjcmlwdGlvbixcbiAgICAgICAgICAgIGJ1aWxkaW5nSWQ6IG5ld1NwYWNlWzBdLmJ1aWxkaW5nSWQsXG4gICAgICAgICAgICBidWlsZGluZ05hbWU6IGJ1aWxkaW5nWzBdLm5hbWUsXG4gICAgICAgICAgICBpc1Jlc2VydmFibGU6IG5ld1NwYWNlWzBdLmlzUmVzZXJ2YWJsZSxcbiAgICAgICAgICAgIGNhcGFjaXR5OiBuZXdTcGFjZVswXS5jYXBhY2l0eSxcbiAgICAgICAgICAgIG9wZW5pbmdIb3VyczogbmV3U3BhY2VbMF0ub3BlbmluZ0hvdXJzLFxuICAgICAgICAgICAgY3JlYXRlZEF0OiBuZXdTcGFjZVswXS5jcmVhdGVkQXRcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcihcIlxcdTI3NEMgRXJyb3IgY3JlYXRpbmcgY29tbW9uIHNwYWNlOlwiLCBlcnJvcik7XG4gICAgICAgIHJlcy5zdGF0dXMoNTAwKS5qc29uKHtcbiAgICAgICAgICBtZXNzYWdlOiBcIkZhaWxlZCB0byBjcmVhdGUgY29tbW9uIHNwYWNlXCIsXG4gICAgICAgICAgZXJyb3I6IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogXCJVbmtub3duIGVycm9yXCJcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfVxuICApO1xuICBhcHAyLnBvc3QoXG4gICAgXCIvYXBpL2NvbW1vbi1zcGFjZXMvdXNlcnMvOnVzZXJJZC90aW1lLWxpbWl0c1wiLFxuICAgIHJlcXVpcmVBdXRoLFxuICAgIHJlcXVpcmVSb2xlKFtcImFkbWluXCIsIFwibWFuYWdlclwiXSksXG4gICAgYXN5bmMgKHJlcSwgcmVzKSA9PiB7XG4gICAgICB0cnkge1xuICAgICAgICBjb25zdCB1c2VyID0gcmVxLnVzZXI7XG4gICAgICAgIGlmICghdXNlcikge1xuICAgICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMSkuanNvbih7XG4gICAgICAgICAgICBtZXNzYWdlOiBcIkF1dGhlbnRpY2F0aW9uIHJlcXVpcmVkXCIsXG4gICAgICAgICAgICBjb2RlOiBcIkFVVEhfUkVRVUlSRURcIlxuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHBhcmFtVmFsaWRhdGlvbiA9IHVzZXJJZFNjaGVtYS5zYWZlUGFyc2UocmVxLnBhcmFtcyk7XG4gICAgICAgIGlmICghcGFyYW1WYWxpZGF0aW9uLnN1Y2Nlc3MpIHtcbiAgICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oe1xuICAgICAgICAgICAgbWVzc2FnZTogXCJJbnZhbGlkIHVzZXIgSURcIixcbiAgICAgICAgICAgIGVycm9yczogcGFyYW1WYWxpZGF0aW9uLmVycm9yLmlzc3Vlcy5tYXAoKGlzc3VlKSA9PiAoe1xuICAgICAgICAgICAgICBmaWVsZDogaXNzdWUucGF0aC5qb2luKFwiLlwiKSxcbiAgICAgICAgICAgICAgbWVzc2FnZTogaXNzdWUubWVzc2FnZVxuICAgICAgICAgICAgfSkpXG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgdmFsaWRhdGlvblJlc3VsdCA9IHNldFRpbWVMaW1pdFNjaGVtYS5zYWZlUGFyc2UocmVxLmJvZHkpO1xuICAgICAgICBpZiAoIXZhbGlkYXRpb25SZXN1bHQuc3VjY2Vzcykge1xuICAgICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7XG4gICAgICAgICAgICBtZXNzYWdlOiBcIkludmFsaWQgdGltZSBsaW1pdCBkYXRhXCIsXG4gICAgICAgICAgICBlcnJvcnM6IHZhbGlkYXRpb25SZXN1bHQuZXJyb3IuaXNzdWVzLm1hcCgoaXNzdWUpID0+ICh7XG4gICAgICAgICAgICAgIGZpZWxkOiBpc3N1ZS5wYXRoLmpvaW4oXCIuXCIpLFxuICAgICAgICAgICAgICBtZXNzYWdlOiBpc3N1ZS5tZXNzYWdlXG4gICAgICAgICAgICB9KSlcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCB7IHVzZXJJZCB9ID0gcGFyYW1WYWxpZGF0aW9uLmRhdGE7XG4gICAgICAgIGNvbnN0IHsgdXNlcl9pZCwgY29tbW9uX3NwYWNlX2lkLCBsaW1pdF90eXBlLCBsaW1pdF9ob3VycyB9ID0gdmFsaWRhdGlvblJlc3VsdC5kYXRhO1xuICAgICAgICBjb25zdCB0YXJnZXRVc2VyID0gYXdhaXQgZGIuc2VsZWN0KHsgaWQ6IHVzZXJzNC5pZCwgZmlyc3ROYW1lOiB1c2VyczQuZmlyc3ROYW1lLCBsYXN0TmFtZTogdXNlcnM0Lmxhc3ROYW1lIH0pLmZyb20odXNlcnM0KS53aGVyZShlcTE0KHVzZXJzNC5pZCwgdXNlcklkKSkubGltaXQoMSk7XG4gICAgICAgIGlmICh0YXJnZXRVc2VyLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwNCkuanNvbih7XG4gICAgICAgICAgICBtZXNzYWdlOiBcIlVzZXIgbm90IGZvdW5kXCIsXG4gICAgICAgICAgICBjb2RlOiBcIlVTRVJfTk9UX0ZPVU5EXCJcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoY29tbW9uX3NwYWNlX2lkKSB7XG4gICAgICAgICAgY29uc3Qgc3BhY2UgPSBhd2FpdCBkYi5zZWxlY3Qoe1xuICAgICAgICAgICAgaWQ6IGNvbW1vblNwYWNlczIuaWQsXG4gICAgICAgICAgICBuYW1lOiBjb21tb25TcGFjZXMyLm5hbWUsXG4gICAgICAgICAgICBidWlsZGluZ0lkOiBjb21tb25TcGFjZXMyLmJ1aWxkaW5nSWRcbiAgICAgICAgICB9KS5mcm9tKGNvbW1vblNwYWNlczIpLndoZXJlKGVxMTQoY29tbW9uU3BhY2VzMi5pZCwgY29tbW9uX3NwYWNlX2lkKSkubGltaXQoMSk7XG4gICAgICAgICAgaWYgKHNwYWNlLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDA0KS5qc29uKHtcbiAgICAgICAgICAgICAgbWVzc2FnZTogXCJDb21tb24gc3BhY2Ugbm90IGZvdW5kXCIsXG4gICAgICAgICAgICAgIGNvZGU6IFwiU1BBQ0VfTk9UX0ZPVU5EXCJcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH1cbiAgICAgICAgICBjb25zdCBhY2Nlc3NpYmxlQnVpbGRpbmdJZHMgPSBhd2FpdCBnZXRBY2Nlc3NpYmxlQnVpbGRpbmdJZHModXNlcik7XG4gICAgICAgICAgaWYgKCFhY2Nlc3NpYmxlQnVpbGRpbmdJZHMuaW5jbHVkZXMoc3BhY2VbMF0uYnVpbGRpbmdJZCkpIHtcbiAgICAgICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMykuanNvbih7XG4gICAgICAgICAgICAgIG1lc3NhZ2U6IFwiQWNjZXNzIGRlbmllZCB0byB0aGlzIGNvbW1vbiBzcGFjZVwiLFxuICAgICAgICAgICAgICBjb2RlOiBcIklOU1VGRklDSUVOVF9QRVJNSVNTSU9OU1wiXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgZXhpc3RpbmdMaW1pdCA9IGF3YWl0IGRiLnNlbGVjdCh7IGlkOiB1c2VyVGltZUxpbWl0czIuaWQgfSkuZnJvbSh1c2VyVGltZUxpbWl0czIpLndoZXJlKFxuICAgICAgICAgIGFuZDE0KFxuICAgICAgICAgICAgZXExNCh1c2VyVGltZUxpbWl0czIudXNlcklkLCB1c2VySWQpLFxuICAgICAgICAgICAgY29tbW9uX3NwYWNlX2lkID8gZXExNCh1c2VyVGltZUxpbWl0czIuY29tbW9uU3BhY2VJZCwgY29tbW9uX3NwYWNlX2lkKSA6IHNxbDIxYCR7dXNlclRpbWVMaW1pdHMyLmNvbW1vblNwYWNlSWR9IElTIE5VTExgLFxuICAgICAgICAgICAgZXExNCh1c2VyVGltZUxpbWl0czIubGltaXRUeXBlLCBsaW1pdF90eXBlKVxuICAgICAgICAgIClcbiAgICAgICAgKS5saW1pdCgxKTtcbiAgICAgICAgaWYgKGV4aXN0aW5nTGltaXQubGVuZ3RoID4gMCkge1xuICAgICAgICAgIGF3YWl0IGRiLnVwZGF0ZSh1c2VyVGltZUxpbWl0czIpLnNldCh7XG4gICAgICAgICAgICBsaW1pdEhvdXJzOiBsaW1pdF9ob3VycyxcbiAgICAgICAgICAgIHVwZGF0ZWRBdDogLyogQF9fUFVSRV9fICovIG5ldyBEYXRlKClcbiAgICAgICAgICB9KS53aGVyZShlcTE0KHVzZXJUaW1lTGltaXRzMi5pZCwgZXhpc3RpbmdMaW1pdFswXS5pZCkpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGF3YWl0IGRiLmluc2VydCh1c2VyVGltZUxpbWl0czIpLnZhbHVlcyh7XG4gICAgICAgICAgICB1c2VySWQsXG4gICAgICAgICAgICBjb21tb25TcGFjZUlkOiBjb21tb25fc3BhY2VfaWQgfHwgbnVsbCxcbiAgICAgICAgICAgIGxpbWl0VHlwZTogbGltaXRfdHlwZSxcbiAgICAgICAgICAgIGxpbWl0SG91cnM6IGxpbWl0X2hvdXJzXG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc29sZS5sb2coXG4gICAgICAgICAgYFxcdTI3MDUgU2V0IHRpbWUgbGltaXQgZm9yIHVzZXIgJHt0YXJnZXRVc2VyWzBdLmZpcnN0TmFtZX0gJHt0YXJnZXRVc2VyWzBdLmxhc3ROYW1lfTogJHtsaW1pdF9ob3Vyc31oIHBlciAke2xpbWl0X3R5cGV9YFxuICAgICAgICApO1xuICAgICAgICByZXMuanNvbih7XG4gICAgICAgICAgbWVzc2FnZTogXCJUaW1lIGxpbWl0IHNldCBzdWNjZXNzZnVsbHlcIixcbiAgICAgICAgICB1c2VyOiB7XG4gICAgICAgICAgICBpZDogdGFyZ2V0VXNlclswXS5pZCxcbiAgICAgICAgICAgIG5hbWU6IGAke3RhcmdldFVzZXJbMF0uZmlyc3ROYW1lfSAke3RhcmdldFVzZXJbMF0ubGFzdE5hbWV9YCxcbiAgICAgICAgICAgIGxpbWl0VHlwZTogbGltaXRfdHlwZSxcbiAgICAgICAgICAgIGxpbWl0SG91cnM6IGxpbWl0X2hvdXJzLFxuICAgICAgICAgICAgc3BhY2VJZDogY29tbW9uX3NwYWNlX2lkXG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoXCJcXHUyNzRDIEVycm9yIHNldHRpbmcgdGltZSBsaW1pdDpcIiwgZXJyb3IpO1xuICAgICAgICByZXMuc3RhdHVzKDUwMCkuanNvbih7XG4gICAgICAgICAgbWVzc2FnZTogXCJGYWlsZWQgdG8gc2V0IHRpbWUgbGltaXRcIixcbiAgICAgICAgICBlcnJvcjogZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiBcIlVua25vd24gZXJyb3JcIlxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9XG4gICk7XG4gIGFwcDIuZ2V0KFxuICAgIFwiL2FwaS9jb21tb24tc3BhY2VzL3VzZXJzLzp1c2VySWQvdGltZS1saW1pdHNcIixcbiAgICByZXF1aXJlQXV0aCxcbiAgICByZXF1aXJlUm9sZShbXCJhZG1pblwiLCBcIm1hbmFnZXJcIl0pLFxuICAgIGFzeW5jIChyZXEsIHJlcykgPT4ge1xuICAgICAgdHJ5IHtcbiAgICAgICAgY29uc3QgdXNlciA9IHJlcS51c2VyO1xuICAgICAgICBpZiAoIXVzZXIpIHtcbiAgICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDEpLmpzb24oe1xuICAgICAgICAgICAgbWVzc2FnZTogXCJBdXRoZW50aWNhdGlvbiByZXF1aXJlZFwiLFxuICAgICAgICAgICAgY29kZTogXCJBVVRIX1JFUVVJUkVEXCJcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCB7IHVzZXJJZCB9ID0gcmVxLnBhcmFtcztcbiAgICAgICAgY29uc3QgbGltaXRzID0gYXdhaXQgZGIuc2VsZWN0KHtcbiAgICAgICAgICBpZDogdXNlclRpbWVMaW1pdHMyLmlkLFxuICAgICAgICAgIHVzZXJJZDogdXNlclRpbWVMaW1pdHMyLnVzZXJJZCxcbiAgICAgICAgICBjb21tb25TcGFjZUlkOiB1c2VyVGltZUxpbWl0czIuY29tbW9uU3BhY2VJZCxcbiAgICAgICAgICBzcGFjZU5hbWU6IGNvbW1vblNwYWNlczIubmFtZSxcbiAgICAgICAgICBsaW1pdFR5cGU6IHVzZXJUaW1lTGltaXRzMi5saW1pdFR5cGUsXG4gICAgICAgICAgbGltaXRIb3VyczogdXNlclRpbWVMaW1pdHMyLmxpbWl0SG91cnMsXG4gICAgICAgICAgY3JlYXRlZEF0OiB1c2VyVGltZUxpbWl0czIuY3JlYXRlZEF0LFxuICAgICAgICAgIHVwZGF0ZWRBdDogdXNlclRpbWVMaW1pdHMyLnVwZGF0ZWRBdFxuICAgICAgICB9KS5mcm9tKHVzZXJUaW1lTGltaXRzMikubGVmdEpvaW4oY29tbW9uU3BhY2VzMiwgZXExNCh1c2VyVGltZUxpbWl0czIuY29tbW9uU3BhY2VJZCwgY29tbW9uU3BhY2VzMi5pZCkpLndoZXJlKGVxMTQodXNlclRpbWVMaW1pdHMyLnVzZXJJZCwgdXNlcklkKSkub3JkZXJCeSh1c2VyVGltZUxpbWl0czIubGltaXRUeXBlLCB1c2VyVGltZUxpbWl0czIuY29tbW9uU3BhY2VJZCk7XG4gICAgICAgIGNvbnN0IGxpbWl0c1dpdGhVc2FnZSA9IGF3YWl0IFByb21pc2UuYWxsKFxuICAgICAgICAgIGxpbWl0cy5tYXAoYXN5bmMgKGxpbWl0KSA9PiB7XG4gICAgICAgICAgICBjb25zdCBjdXJyZW50SG91cnMgPSBhd2FpdCBnZXRVc2VyQm9va2luZ0hvdXJzKFxuICAgICAgICAgICAgICB1c2VySWQsXG4gICAgICAgICAgICAgIGxpbWl0LmNvbW1vblNwYWNlSWQsXG4gICAgICAgICAgICAgIGxpbWl0LmxpbWl0VHlwZVxuICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgIC4uLmxpbWl0LFxuICAgICAgICAgICAgICBjdXJyZW50SG91cnM6IE1hdGgucm91bmQoY3VycmVudEhvdXJzICogMTAwKSAvIDEwMCxcbiAgICAgICAgICAgICAgcmVtYWluaW5nSG91cnM6IE1hdGgubWF4KDAsIGxpbWl0LmxpbWl0SG91cnMgLSBjdXJyZW50SG91cnMpXG4gICAgICAgICAgICB9O1xuICAgICAgICAgIH0pXG4gICAgICAgICk7XG4gICAgICAgIHJlcy5qc29uKHtcbiAgICAgICAgICBsaW1pdHM6IGxpbWl0c1dpdGhVc2FnZVxuICAgICAgICB9KTtcbiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoXCJcXHUyNzRDIEVycm9yIGZldGNoaW5nIHRpbWUgbGltaXRzOlwiLCBlcnJvcik7XG4gICAgICAgIHJlcy5zdGF0dXMoNTAwKS5qc29uKHtcbiAgICAgICAgICBtZXNzYWdlOiBcIkZhaWxlZCB0byBmZXRjaCB0aW1lIGxpbWl0c1wiLFxuICAgICAgICAgIGVycm9yOiBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6IFwiVW5rbm93biBlcnJvclwiXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH1cbiAgKTtcbiAgYXBwMi5nZXQoXCIvYXBpL2NvbW1vbi1zcGFjZXMvdXNlci1jYWxlbmRhclwiLCByZXF1aXJlQXV0aCwgYXN5bmMgKHJlcSwgcmVzKSA9PiB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHVzZXIgPSByZXEudXNlciB8fCByZXEuc2Vzc2lvbj8udXNlcjtcbiAgICAgIGlmICghdXNlcikge1xuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDEpLmpzb24oe1xuICAgICAgICAgIG1lc3NhZ2U6IFwiQXV0aGVudGljYXRpb24gcmVxdWlyZWRcIixcbiAgICAgICAgICBjb2RlOiBcIkFVVEhfUkVRVUlSRURcIlxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICAgIGNvbnN0IHF1ZXJ5VmFsaWRhdGlvbiA9IGNhbGVuZGFyUXVlcnlTY2hlbWEuc2FmZVBhcnNlKHJlcS5xdWVyeSk7XG4gICAgICBpZiAoIXF1ZXJ5VmFsaWRhdGlvbi5zdWNjZXNzKSB7XG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7XG4gICAgICAgICAgbWVzc2FnZTogXCJJbnZhbGlkIGNhbGVuZGFyIHF1ZXJ5IHBhcmFtZXRlcnNcIixcbiAgICAgICAgICBlcnJvcnM6IHF1ZXJ5VmFsaWRhdGlvbi5lcnJvci5pc3N1ZXMubWFwKChpc3N1ZSkgPT4gKHtcbiAgICAgICAgICAgIGZpZWxkOiBpc3N1ZS5wYXRoLmpvaW4oXCIuXCIpLFxuICAgICAgICAgICAgbWVzc2FnZTogaXNzdWUubWVzc2FnZVxuICAgICAgICAgIH0pKVxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICAgIGNvbnN0IHsgc3RhcnRfZGF0ZSwgZW5kX2RhdGUsIHZpZXcgfSA9IHF1ZXJ5VmFsaWRhdGlvbi5kYXRhO1xuICAgICAgY29uc3QgdXNlckJvb2tpbmdzID0gYXdhaXQgZGIuc2VsZWN0KHtcbiAgICAgICAgaWQ6IGJvb2tpbmdzMi5pZCxcbiAgICAgICAgc3RhcnRUaW1lOiBib29raW5nczIuc3RhcnRUaW1lLFxuICAgICAgICBlbmRUaW1lOiBib29raW5nczIuZW5kVGltZSxcbiAgICAgICAgc3RhdHVzOiBib29raW5nczIuc3RhdHVzLFxuICAgICAgICBzcGFjZU5hbWU6IGNvbW1vblNwYWNlczIubmFtZSxcbiAgICAgICAgc3BhY2VJZDogY29tbW9uU3BhY2VzMi5pZCxcbiAgICAgICAgYnVpbGRpbmdOYW1lOiBidWlsZGluZ3M0Lm5hbWUsXG4gICAgICAgIGJ1aWxkaW5nSWQ6IGJ1aWxkaW5nczQuaWRcbiAgICAgIH0pLmZyb20oYm9va2luZ3MyKS5pbm5lckpvaW4oY29tbW9uU3BhY2VzMiwgZXExNChib29raW5nczIuY29tbW9uU3BhY2VJZCwgY29tbW9uU3BhY2VzMi5pZCkpLmlubmVySm9pbihidWlsZGluZ3M0LCBlcTE0KGNvbW1vblNwYWNlczIuYnVpbGRpbmdJZCwgYnVpbGRpbmdzNC5pZCkpLndoZXJlKFxuICAgICAgICBhbmQxNChcbiAgICAgICAgICBlcTE0KGJvb2tpbmdzMi51c2VySWQsIHVzZXIuaWQpLFxuICAgICAgICAgIGVxMTQoYm9va2luZ3MyLnN0YXR1cywgXCJjb25maXJtZWRcIiksXG4gICAgICAgICAgZ3RlNShib29raW5nczIuc3RhcnRUaW1lLCBuZXcgRGF0ZShzdGFydF9kYXRlKSksXG4gICAgICAgICAgbHRlNChib29raW5nczIuZW5kVGltZSwgbmV3IERhdGUoZW5kX2RhdGUpKVxuICAgICAgICApXG4gICAgICApLm9yZGVyQnkoYm9va2luZ3MyLnN0YXJ0VGltZSk7XG4gICAgICByZXMuanNvbih7XG4gICAgICAgIHVzZXI6IHtcbiAgICAgICAgICBpZDogdXNlci5pZCxcbiAgICAgICAgICBuYW1lOiBgJHt1c2VyLmZpcnN0TmFtZX0gJHt1c2VyLmxhc3ROYW1lfWAsXG4gICAgICAgICAgcm9sZTogdXNlci5yb2xlXG4gICAgICAgIH0sXG4gICAgICAgIGNhbGVuZGFyOiB7XG4gICAgICAgICAgdmlldyxcbiAgICAgICAgICBzdGFydERhdGU6IHN0YXJ0X2RhdGUsXG4gICAgICAgICAgZW5kRGF0ZTogZW5kX2RhdGUsXG4gICAgICAgICAgYm9va2luZ3M6IHVzZXJCb29raW5nc1xuICAgICAgICB9LFxuICAgICAgICBzdW1tYXJ5OiB7XG4gICAgICAgICAgdG90YWxCb29raW5nczogdXNlckJvb2tpbmdzLmxlbmd0aCxcbiAgICAgICAgICB0b3RhbEhvdXJzOiB1c2VyQm9va2luZ3MucmVkdWNlKCh0b3RhbCwgYm9va2luZykgPT4ge1xuICAgICAgICAgICAgY29uc3QgZHVyYXRpb24gPSAobmV3IERhdGUoYm9va2luZy5lbmRUaW1lKS5nZXRUaW1lKCkgLSBuZXcgRGF0ZShib29raW5nLnN0YXJ0VGltZSkuZ2V0VGltZSgpKSAvICgxZTMgKiA2MCAqIDYwKTtcbiAgICAgICAgICAgIHJldHVybiB0b3RhbCArIGR1cmF0aW9uO1xuICAgICAgICAgIH0sIDApXG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKFwiXFx1Mjc0QyBFcnJvciBmZXRjaGluZyB1c2VyIGNhbGVuZGFyOlwiLCBlcnJvcik7XG4gICAgICByZXMuc3RhdHVzKDUwMCkuanNvbih7XG4gICAgICAgIG1lc3NhZ2U6IFwiRmFpbGVkIHRvIGZldGNoIHVzZXIgY2FsZW5kYXJcIixcbiAgICAgICAgZXJyb3I6IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogXCJVbmtub3duIGVycm9yXCJcbiAgICAgIH0pO1xuICAgIH1cbiAgfSk7XG4gIGFwcDIuZ2V0KFxuICAgIFwiL2FwaS9jb21tb24tc3BhY2VzL2NhbGVuZGFyL2J1aWxkaW5nLzpidWlsZGluZ0lkXCIsXG4gICAgcmVxdWlyZUF1dGgsXG4gICAgcmVxdWlyZVJvbGUoW1wiYWRtaW5cIiwgXCJtYW5hZ2VyXCJdKSxcbiAgICBhc3luYyAocmVxLCByZXMpID0+IHtcbiAgICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IHVzZXIgPSByZXEudXNlciB8fCByZXEuc2Vzc2lvbj8udXNlcjtcbiAgICAgICAgaWYgKCF1c2VyKSB7XG4gICAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAxKS5qc29uKHtcbiAgICAgICAgICAgIG1lc3NhZ2U6IFwiQXV0aGVudGljYXRpb24gcmVxdWlyZWRcIixcbiAgICAgICAgICAgIGNvZGU6IFwiQVVUSF9SRVFVSVJFRFwiXG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgcGFyYW1WYWxpZGF0aW9uID0gejE1Lm9iamVjdCh7IGJ1aWxkaW5nSWQ6IHoxNS5zdHJpbmcoKS51dWlkKCkgfSkuc2FmZVBhcnNlKHJlcS5wYXJhbXMpO1xuICAgICAgICBpZiAoIXBhcmFtVmFsaWRhdGlvbi5zdWNjZXNzKSB7XG4gICAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHtcbiAgICAgICAgICAgIG1lc3NhZ2U6IFwiSW52YWxpZCBidWlsZGluZyBJRFwiLFxuICAgICAgICAgICAgZXJyb3JzOiBwYXJhbVZhbGlkYXRpb24uZXJyb3IuaXNzdWVzLm1hcCgoaXNzdWUpID0+ICh7XG4gICAgICAgICAgICAgIGZpZWxkOiBpc3N1ZS5wYXRoLmpvaW4oXCIuXCIpLFxuICAgICAgICAgICAgICBtZXNzYWdlOiBpc3N1ZS5tZXNzYWdlXG4gICAgICAgICAgICB9KSlcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBxdWVyeVZhbGlkYXRpb24gPSBjYWxlbmRhclF1ZXJ5U2NoZW1hLnNhZmVQYXJzZShyZXEucXVlcnkpO1xuICAgICAgICBpZiAoIXF1ZXJ5VmFsaWRhdGlvbi5zdWNjZXNzKSB7XG4gICAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHtcbiAgICAgICAgICAgIG1lc3NhZ2U6IFwiSW52YWxpZCBjYWxlbmRhciBxdWVyeSBwYXJhbWV0ZXJzXCIsXG4gICAgICAgICAgICBlcnJvcnM6IHF1ZXJ5VmFsaWRhdGlvbi5lcnJvci5pc3N1ZXMubWFwKChpc3N1ZSkgPT4gKHtcbiAgICAgICAgICAgICAgZmllbGQ6IGlzc3VlLnBhdGguam9pbihcIi5cIiksXG4gICAgICAgICAgICAgIG1lc3NhZ2U6IGlzc3VlLm1lc3NhZ2VcbiAgICAgICAgICAgIH0pKVxuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHsgYnVpbGRpbmdJZCB9ID0gcGFyYW1WYWxpZGF0aW9uLmRhdGE7XG4gICAgICAgIGNvbnN0IHsgc3RhcnRfZGF0ZSwgZW5kX2RhdGUsIHZpZXcgfSA9IHF1ZXJ5VmFsaWRhdGlvbi5kYXRhO1xuICAgICAgICBjb25zdCBhY2Nlc3NpYmxlQnVpbGRpbmdJZHMgPSBhd2FpdCBnZXRBY2Nlc3NpYmxlQnVpbGRpbmdJZHModXNlcik7XG4gICAgICAgIGlmICghYWNjZXNzaWJsZUJ1aWxkaW5nSWRzLmluY2x1ZGVzKGJ1aWxkaW5nSWQpKSB7XG4gICAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAzKS5qc29uKHtcbiAgICAgICAgICAgIG1lc3NhZ2U6IFwiQWNjZXNzIGRlbmllZCB0byB0aGlzIGJ1aWxkaW5nXCIsXG4gICAgICAgICAgICBjb2RlOiBcIklOU1VGRklDSUVOVF9QRVJNSVNTSU9OU1wiXG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgYnVpbGRpbmcgPSBhd2FpdCBkYi5zZWxlY3Qoe1xuICAgICAgICAgIGlkOiBidWlsZGluZ3M0LmlkLFxuICAgICAgICAgIG5hbWU6IGJ1aWxkaW5nczQubmFtZSxcbiAgICAgICAgICBhZGRyZXNzOiBidWlsZGluZ3M0LmFkZHJlc3NcbiAgICAgICAgfSkuZnJvbShidWlsZGluZ3M0KS53aGVyZShlcTE0KGJ1aWxkaW5nczQuaWQsIGJ1aWxkaW5nSWQpKS5saW1pdCgxKTtcbiAgICAgICAgaWYgKGJ1aWxkaW5nLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwNCkuanNvbih7XG4gICAgICAgICAgICBtZXNzYWdlOiBcIkJ1aWxkaW5nIG5vdCBmb3VuZFwiLFxuICAgICAgICAgICAgY29kZTogXCJOT1RfRk9VTkRcIlxuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGJ1aWxkaW5nQm9va2luZ3MgPSBhd2FpdCBkYi5zZWxlY3Qoe1xuICAgICAgICAgIGlkOiBib29raW5nczIuaWQsXG4gICAgICAgICAgc3RhcnRUaW1lOiBib29raW5nczIuc3RhcnRUaW1lLFxuICAgICAgICAgIGVuZFRpbWU6IGJvb2tpbmdzMi5lbmRUaW1lLFxuICAgICAgICAgIHN0YXR1czogYm9va2luZ3MyLnN0YXR1cyxcbiAgICAgICAgICBzcGFjZU5hbWU6IGNvbW1vblNwYWNlczIubmFtZSxcbiAgICAgICAgICBzcGFjZUlkOiBjb21tb25TcGFjZXMyLmlkLFxuICAgICAgICAgIHVzZXJJZDogYm9va2luZ3MyLnVzZXJJZCxcbiAgICAgICAgICB1c2VyTmFtZTogc3FsMjFgQ09OQ0FUKCR7dXNlcnM0LmZpcnN0TmFtZX0sICcgJywgJHt1c2VyczQubGFzdE5hbWV9KWAsXG4gICAgICAgICAgdXNlckVtYWlsOiB1c2VyczQuZW1haWwsXG4gICAgICAgICAgdXNlclJvbGU6IHVzZXJzNC5yb2xlXG4gICAgICAgIH0pLmZyb20oYm9va2luZ3MyKS5pbm5lckpvaW4oY29tbW9uU3BhY2VzMiwgZXExNChib29raW5nczIuY29tbW9uU3BhY2VJZCwgY29tbW9uU3BhY2VzMi5pZCkpLmlubmVySm9pbih1c2VyczQsIGVxMTQoYm9va2luZ3MyLnVzZXJJZCwgdXNlcnM0LmlkKSkud2hlcmUoXG4gICAgICAgICAgYW5kMTQoXG4gICAgICAgICAgICBlcTE0KGNvbW1vblNwYWNlczIuYnVpbGRpbmdJZCwgYnVpbGRpbmdJZCksXG4gICAgICAgICAgICBlcTE0KGJvb2tpbmdzMi5zdGF0dXMsIFwiY29uZmlybWVkXCIpLFxuICAgICAgICAgICAgZ3RlNShib29raW5nczIuc3RhcnRUaW1lLCBuZXcgRGF0ZShzdGFydF9kYXRlKSksXG4gICAgICAgICAgICBsdGU0KGJvb2tpbmdzMi5lbmRUaW1lLCBuZXcgRGF0ZShlbmRfZGF0ZSkpXG4gICAgICAgICAgKVxuICAgICAgICApLm9yZGVyQnkoYm9va2luZ3MyLnN0YXJ0VGltZSk7XG4gICAgICAgIGNvbnN0IGJ1aWxkaW5nU3BhY2VzID0gYXdhaXQgZGIuc2VsZWN0KHtcbiAgICAgICAgICBpZDogY29tbW9uU3BhY2VzMi5pZCxcbiAgICAgICAgICBuYW1lOiBjb21tb25TcGFjZXMyLm5hbWUsXG4gICAgICAgICAgaXNSZXNlcnZhYmxlOiBjb21tb25TcGFjZXMyLmlzUmVzZXJ2YWJsZSxcbiAgICAgICAgICBjYXBhY2l0eTogY29tbW9uU3BhY2VzMi5jYXBhY2l0eVxuICAgICAgICB9KS5mcm9tKGNvbW1vblNwYWNlczIpLndoZXJlKGVxMTQoY29tbW9uU3BhY2VzMi5idWlsZGluZ0lkLCBidWlsZGluZ0lkKSkub3JkZXJCeShjb21tb25TcGFjZXMyLm5hbWUpO1xuICAgICAgICBjb25zdCBzcGFjZVVzYWdlID0gYnVpbGRpbmdTcGFjZXMubWFwKChzcGFjZSkgPT4ge1xuICAgICAgICAgIGNvbnN0IHNwYWNlQm9va2luZ3MgPSBidWlsZGluZ0Jvb2tpbmdzLmZpbHRlcigoYm9va2luZykgPT4gYm9va2luZy5zcGFjZUlkID09PSBzcGFjZS5pZCk7XG4gICAgICAgICAgY29uc3QgdG90YWxIb3VycyA9IHNwYWNlQm9va2luZ3MucmVkdWNlKCh0b3RhbCwgYm9va2luZykgPT4ge1xuICAgICAgICAgICAgY29uc3QgZHVyYXRpb24gPSAobmV3IERhdGUoYm9va2luZy5lbmRUaW1lKS5nZXRUaW1lKCkgLSBuZXcgRGF0ZShib29raW5nLnN0YXJ0VGltZSkuZ2V0VGltZSgpKSAvICgxZTMgKiA2MCAqIDYwKTtcbiAgICAgICAgICAgIHJldHVybiB0b3RhbCArIGR1cmF0aW9uO1xuICAgICAgICAgIH0sIDApO1xuICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAuLi5zcGFjZSxcbiAgICAgICAgICAgIGJvb2tpbmdDb3VudDogc3BhY2VCb29raW5ncy5sZW5ndGgsXG4gICAgICAgICAgICB0b3RhbEhvdXJzOiBNYXRoLnJvdW5kKHRvdGFsSG91cnMgKiAxMCkgLyAxMCxcbiAgICAgICAgICAgIHVuaXF1ZVVzZXJzOiBbLi4ubmV3IFNldChzcGFjZUJvb2tpbmdzLm1hcCgoYikgPT4gYi51c2VySWQpKV0ubGVuZ3RoXG4gICAgICAgICAgfTtcbiAgICAgICAgfSk7XG4gICAgICAgIHJlcy5qc29uKHtcbiAgICAgICAgICBidWlsZGluZzogYnVpbGRpbmdbMF0sXG4gICAgICAgICAgY2FsZW5kYXI6IHtcbiAgICAgICAgICAgIHZpZXcsXG4gICAgICAgICAgICBzdGFydERhdGU6IHN0YXJ0X2RhdGUsXG4gICAgICAgICAgICBlbmREYXRlOiBlbmRfZGF0ZSxcbiAgICAgICAgICAgIGV2ZW50czogYnVpbGRpbmdCb29raW5nc1xuICAgICAgICAgIH0sXG4gICAgICAgICAgc3BhY2VzOiBzcGFjZVVzYWdlLFxuICAgICAgICAgIHN1bW1hcnk6IHtcbiAgICAgICAgICAgIHRvdGFsQm9va2luZ3M6IGJ1aWxkaW5nQm9va2luZ3MubGVuZ3RoLFxuICAgICAgICAgICAgdG90YWxTcGFjZXM6IGJ1aWxkaW5nU3BhY2VzLmxlbmd0aCxcbiAgICAgICAgICAgIGFjdGl2ZVNwYWNlczogYnVpbGRpbmdTcGFjZXMuZmlsdGVyKChzKSA9PiBzLmlzUmVzZXJ2YWJsZSkubGVuZ3RoLFxuICAgICAgICAgICAgdW5pcXVlVXNlcnM6IFsuLi5uZXcgU2V0KGJ1aWxkaW5nQm9va2luZ3MubWFwKChiKSA9PiBiLnVzZXJJZCkpXS5sZW5ndGhcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcihcIlxcdTI3NEMgRXJyb3IgZmV0Y2hpbmcgYnVpbGRpbmcgY2FsZW5kYXI6XCIsIGVycm9yKTtcbiAgICAgICAgcmVzLnN0YXR1cyg1MDApLmpzb24oe1xuICAgICAgICAgIG1lc3NhZ2U6IFwiRmFpbGVkIHRvIGZldGNoIGJ1aWxkaW5nIGNhbGVuZGFyXCIsXG4gICAgICAgICAgZXJyb3I6IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogXCJVbmtub3duIGVycm9yXCJcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfVxuICApO1xufVxuXG4vLyBzZXJ2ZXIvYXBpL3Blcm1pc3Npb25zLnRzXG5pbml0X3N0b3JhZ2UoKTtcbmZ1bmN0aW9uIHJlZ2lzdGVyUGVybWlzc2lvbnNSb3V0ZXMoYXBwMikge1xuICBhcHAyLmdldChcIi9hcGkvcGVybWlzc2lvbnNcIiwgcmVxdWlyZUF1dGgsIGF1dGhvcml6ZShcInJlYWQ6dXNlcnNcIiksIGFzeW5jIChyZXEsIHJlcykgPT4ge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCBwZXJtaXNzaW9uczIgPSBhd2FpdCBzdG9yYWdlLmdldFBlcm1pc3Npb25zKCk7XG4gICAgICByZXMuanNvbihwZXJtaXNzaW9uczIpO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKFwiXFx1Mjc0QyBFcnJvciBmZXRjaGluZyBwZXJtaXNzaW9uczpcIiwgZXJyb3IpO1xuICAgICAgcmVzLnN0YXR1cyg1MDApLmpzb24oeyBtZXNzYWdlOiBcIkZhaWxlZCB0byBmZXRjaCBwZXJtaXNzaW9uc1wiIH0pO1xuICAgIH1cbiAgfSk7XG4gIGFwcDIuZ2V0KFwiL2FwaS9yb2xlLXBlcm1pc3Npb25zXCIsIHJlcXVpcmVBdXRoLCBhdXRob3JpemUoXCJyZWFkOnVzZXJzXCIpLCBhc3luYyAocmVxLCByZXMpID0+IHtcbiAgICB0cnkge1xuICAgICAgY29uc3Qgcm9sZVBlcm1pc3Npb25zMiA9IGF3YWl0IHN0b3JhZ2UuZ2V0Um9sZVBlcm1pc3Npb25zKCk7XG4gICAgICByZXMuanNvbihyb2xlUGVybWlzc2lvbnMyKTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcihcIlxcdTI3NEMgRXJyb3IgZmV0Y2hpbmcgcm9sZSBwZXJtaXNzaW9uczpcIiwgZXJyb3IpO1xuICAgICAgcmVzLnN0YXR1cyg1MDApLmpzb24oeyBtZXNzYWdlOiBcIkZhaWxlZCB0byBmZXRjaCByb2xlIHBlcm1pc3Npb25zXCIgfSk7XG4gICAgfVxuICB9KTtcbiAgYXBwMi5nZXQoXCIvYXBpL3Blcm1pc3Npb25zLW1hdHJpeFwiLCByZXF1aXJlQXV0aCwgYXV0aG9yaXplKFwicmVhZDp1c2Vyc1wiKSwgYXN5bmMgKHJlcSwgcmVzKSA9PiB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHBlcm1pc3Npb25zMiA9IGF3YWl0IHN0b3JhZ2UuZ2V0UGVybWlzc2lvbnMoKTtcbiAgICAgIGNvbnN0IHJvbGVQZXJtaXNzaW9uczIgPSBhd2FpdCBzdG9yYWdlLmdldFJvbGVQZXJtaXNzaW9ucygpO1xuICAgICAgY29uc3QgcGVybWlzc2lvbnNCeVJlc291cmNlID0gcGVybWlzc2lvbnMyLnJlZHVjZSgoYWNjLCBwZXJtaXNzaW9uKSA9PiB7XG4gICAgICAgIGlmICghYWNjW3Blcm1pc3Npb24ucmVzb3VyY2VUeXBlXSkge1xuICAgICAgICAgIGFjY1twZXJtaXNzaW9uLnJlc291cmNlVHlwZV0gPSBbXTtcbiAgICAgICAgfVxuICAgICAgICBhY2NbcGVybWlzc2lvbi5yZXNvdXJjZVR5cGVdLnB1c2gocGVybWlzc2lvbik7XG4gICAgICAgIHJldHVybiBhY2M7XG4gICAgICB9LCB7fSk7XG4gICAgICBjb25zdCByb2xlTWF0cml4ID0gW1wiYWRtaW5cIiwgXCJtYW5hZ2VyXCIsIFwicmVzaWRlbnRcIiwgXCJ0ZW5hbnRcIl0ucmVkdWNlKChhY2MsIHJvbGUpID0+IHtcbiAgICAgICAgYWNjW3JvbGVdID0gcm9sZVBlcm1pc3Npb25zMi5maWx0ZXIoKHJwKSA9PiBycC5yb2xlID09PSByb2xlKS5tYXAoKHJwKSA9PiBycC5wZXJtaXNzaW9uSWQpO1xuICAgICAgICByZXR1cm4gYWNjO1xuICAgICAgfSwge30pO1xuICAgICAgcmVzLmpzb24oe1xuICAgICAgICBwZXJtaXNzaW9uc0J5UmVzb3VyY2UsXG4gICAgICAgIHJvbGVNYXRyaXgsXG4gICAgICAgIHBlcm1pc3Npb25zOiBwZXJtaXNzaW9uczIsXG4gICAgICAgIHJvbGVQZXJtaXNzaW9uczogcm9sZVBlcm1pc3Npb25zMlxuICAgICAgfSk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoXCJcXHUyNzRDIEVycm9yIGZldGNoaW5nIHBlcm1pc3Npb25zIG1hdHJpeDpcIiwgZXJyb3IpO1xuICAgICAgcmVzLnN0YXR1cyg1MDApLmpzb24oeyBtZXNzYWdlOiBcIkZhaWxlZCB0byBmZXRjaCBwZXJtaXNzaW9ucyBtYXRyaXhcIiB9KTtcbiAgICB9XG4gIH0pO1xuICBhcHAyLmdldChcIi9hcGkvdXNlci1wZXJtaXNzaW9uc1wiLCByZXF1aXJlQXV0aCwgYXV0aG9yaXplKFwicmVhZDp1c2Vyc1wiKSwgYXN5bmMgKHJlcSwgcmVzKSA9PiB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHVzZXJQZXJtaXNzaW9uczIgPSBhd2FpdCBzdG9yYWdlLmdldFVzZXJQZXJtaXNzaW9ucygpO1xuICAgICAgcmVzLmpzb24odXNlclBlcm1pc3Npb25zMik7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoXCJcXHUyNzRDIEVycm9yIGZldGNoaW5nIHVzZXIgcGVybWlzc2lvbnM6XCIsIGVycm9yKTtcbiAgICAgIHJlcy5zdGF0dXMoNTAwKS5qc29uKHsgbWVzc2FnZTogXCJGYWlsZWQgdG8gZmV0Y2ggdXNlciBwZXJtaXNzaW9uc1wiIH0pO1xuICAgIH1cbiAgfSk7XG4gIGFwcDIucG9zdChcbiAgICBcIi9hcGkvdXNlci1wZXJtaXNzaW9uc1wiLFxuICAgIHJlcXVpcmVBdXRoLFxuICAgIGF1dGhvcml6ZShcIm1hbmFnZV9wZXJtaXNzaW9uczp1c2Vyc1wiKSxcbiAgICBhc3luYyAocmVxLCByZXMpID0+IHtcbiAgICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IHsgdXNlcklkLCBwZXJtaXNzaW9uSWQsIHJlYXNvbiB9ID0gcmVxLmJvZHk7XG4gICAgICAgIGlmICghdXNlcklkIHx8ICFwZXJtaXNzaW9uSWQpIHtcbiAgICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oe1xuICAgICAgICAgICAgbWVzc2FnZTogXCJ1c2VySWQgYW5kIHBlcm1pc3Npb25JZCBhcmUgcmVxdWlyZWRcIlxuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHBlcm1pc3Npb24gPSBhd2FpdCBzdG9yYWdlLmdldFBlcm1pc3Npb25zKCkudGhlbigocGVybXMpID0+IHBlcm1zLmZpbmQoKHApID0+IHAuaWQgPT09IHBlcm1pc3Npb25JZCB8fCBwLm5hbWUgPT09IHBlcm1pc3Npb25JZCkpO1xuICAgICAgICBpZiAoIXBlcm1pc3Npb24pIHtcbiAgICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oe1xuICAgICAgICAgICAgbWVzc2FnZTogXCJJbnZhbGlkIHBlcm1pc3Npb25cIlxuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIHJlcy5zdGF0dXMoNTAxKS5qc29uKHtcbiAgICAgICAgICBtZXNzYWdlOiBcIlVzZXIgcGVybWlzc2lvbiBvdmVycmlkZXMgbm90IHlldCBpbXBsZW1lbnRlZFwiLFxuICAgICAgICAgIG5vdGU6IFwiVGhpcyBmZWF0dXJlIHJlcXVpcmVzIGFkZGl0aW9uYWwgZGF0YWJhc2Ugc2NoZW1hIGZvciB1c2VyX3Blcm1pc3Npb25fb3ZlcnJpZGVzIHRhYmxlXCJcbiAgICAgICAgfSk7XG4gICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICBjb25zb2xlLmVycm9yKFwiXFx1Mjc0QyBFcnJvciBncmFudGluZyB1c2VyIHBlcm1pc3Npb246XCIsIGVycm9yKTtcbiAgICAgICAgcmVzLnN0YXR1cyg1MDApLmpzb24oeyBtZXNzYWdlOiBcIkZhaWxlZCB0byBncmFudCB1c2VyIHBlcm1pc3Npb25cIiB9KTtcbiAgICAgIH1cbiAgICB9XG4gICk7XG4gIGFwcDIuZGVsZXRlKFxuICAgIFwiL2FwaS91c2VyLXBlcm1pc3Npb25zLzp1c2VySWQvOnBlcm1pc3Npb25JZFwiLFxuICAgIHJlcXVpcmVBdXRoLFxuICAgIGF1dGhvcml6ZShcIm1hbmFnZTp1c2VyX3JvbGVzXCIpLFxuICAgIGFzeW5jIChyZXEsIHJlcykgPT4ge1xuICAgICAgdHJ5IHtcbiAgICAgICAgY29uc3QgeyB1c2VySWQsIHBlcm1pc3Npb25JZCB9ID0gcmVxLnBhcmFtcztcbiAgICAgICAgcmVzLnN0YXR1cyg1MDEpLmpzb24oe1xuICAgICAgICAgIG1lc3NhZ2U6IFwiVXNlciBwZXJtaXNzaW9uIG92ZXJyaWRlcyBub3QgeWV0IGltcGxlbWVudGVkXCIsXG4gICAgICAgICAgbm90ZTogXCJUaGlzIGZlYXR1cmUgcmVxdWlyZXMgYWRkaXRpb25hbCBkYXRhYmFzZSBzY2hlbWEgZm9yIHVzZXJfcGVybWlzc2lvbl9vdmVycmlkZXMgdGFibGVcIlxuICAgICAgICB9KTtcbiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoXCJcXHUyNzRDIEVycm9yIHJldm9raW5nIHVzZXIgcGVybWlzc2lvbjpcIiwgZXJyb3IpO1xuICAgICAgICByZXMuc3RhdHVzKDUwMCkuanNvbih7IG1lc3NhZ2U6IFwiRmFpbGVkIHRvIHJldm9rZSB1c2VyIHBlcm1pc3Npb25cIiB9KTtcbiAgICAgIH1cbiAgICB9XG4gICk7XG4gIGFwcDIucGF0Y2goXG4gICAgXCIvYXBpL3JvbGUtcGVybWlzc2lvbnMvOnJvbGVcIixcbiAgICByZXF1aXJlQXV0aCxcbiAgICBhdXRob3JpemUoXCJtYW5hZ2U6dXNlcl9yb2xlc1wiKSxcbiAgICBhc3luYyAocmVxLCByZXMpID0+IHtcbiAgICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IHsgcm9sZSB9ID0gcmVxLnBhcmFtcztcbiAgICAgICAgY29uc3QgeyBwZXJtaXNzaW9uczogcGVybWlzc2lvbnMyIH0gPSByZXEuYm9keTtcbiAgICAgICAgaWYgKCFbXCJhZG1pblwiLCBcIm1hbmFnZXJcIiwgXCJ0ZW5hbnRcIiwgXCJyZXNpZGVudFwiXS5pbmNsdWRlcyhyb2xlKSkge1xuICAgICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7IG1lc3NhZ2U6IFwiSW52YWxpZCByb2xlXCIgfSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFBcnJheS5pc0FycmF5KHBlcm1pc3Npb25zMikpIHtcbiAgICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oeyBtZXNzYWdlOiBcIlBlcm1pc3Npb25zIG11c3QgYmUgYW4gYXJyYXlcIiB9KTtcbiAgICAgICAgfVxuICAgICAgICByZXMuc3RhdHVzKDUwMSkuanNvbih7XG4gICAgICAgICAgbWVzc2FnZTogXCJSb2xlIHBlcm1pc3Npb24gdXBkYXRlcyBub3QgeWV0IGltcGxlbWVudGVkXCIsXG4gICAgICAgICAgbm90ZTogXCJUaGlzIGZlYXR1cmUgcmVxdWlyZXMgaW1wbGVtZW50aW5nIGEgbWVjaGFuaXNtIHRvIHVwZGF0ZSBwZXJtaXNzaW9ucy5qc29uIG9yIG1vdmUgcGVybWlzc2lvbnMgdG8gZGF0YWJhc2VcIlxuICAgICAgICB9KTtcbiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoXCJcXHUyNzRDIEVycm9yIHVwZGF0aW5nIHJvbGUgcGVybWlzc2lvbnM6XCIsIGVycm9yKTtcbiAgICAgICAgcmVzLnN0YXR1cyg1MDApLmpzb24oeyBtZXNzYWdlOiBcIkZhaWxlZCB0byB1cGRhdGUgcm9sZSBwZXJtaXNzaW9uc1wiIH0pO1xuICAgICAgfVxuICAgIH1cbiAgKTtcbiAgYXBwMi5nZXQoXCIvYXBpL3Blcm1pc3Npb24tY2F0ZWdvcmllc1wiLCByZXF1aXJlQXV0aCwgYXV0aG9yaXplKFwicmVhZDp1c2Vyc1wiKSwgYXN5bmMgKHJlcSwgcmVzKSA9PiB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHBlcm1pc3Npb25zMiA9IGF3YWl0IHN0b3JhZ2UuZ2V0UGVybWlzc2lvbnMoKTtcbiAgICAgIGNvbnN0IGNhdGVnb3J5TWFwID0ge307XG4gICAgICBwZXJtaXNzaW9uczIuZm9yRWFjaCgocGVybWlzc2lvbikgPT4ge1xuICAgICAgICBjb25zdCBjYXRlZ29yeU5hbWUgPSB7XG4gICAgICAgICAgdXNlcnM6IFwiVXNlciBNYW5hZ2VtZW50XCIsXG4gICAgICAgICAgb3JnYW5pemF0aW9uczogXCJPcmdhbml6YXRpb24gTWFuYWdlbWVudFwiLFxuICAgICAgICAgIGJ1aWxkaW5nczogXCJCdWlsZGluZyBNYW5hZ2VtZW50XCIsXG4gICAgICAgICAgcmVzaWRlbmNlczogXCJSZXNpZGVuY2UgTWFuYWdlbWVudFwiLFxuICAgICAgICAgIGJpbGxzOiBcIkZpbmFuY2lhbCBNYW5hZ2VtZW50XCIsXG4gICAgICAgICAgYnVkZ2V0czogXCJGaW5hbmNpYWwgTWFuYWdlbWVudFwiLFxuICAgICAgICAgIG1haW50ZW5hbmNlX3JlcXVlc3RzOiBcIk1haW50ZW5hbmNlIE1hbmFnZW1lbnRcIixcbiAgICAgICAgICBkb2N1bWVudHM6IFwiRG9jdW1lbnQgTWFuYWdlbWVudFwiLFxuICAgICAgICAgIG5vdGlmaWNhdGlvbnM6IFwiQ29tbXVuaWNhdGlvblwiLFxuICAgICAgICAgIGZlYXR1cmVzOiBcIlN5c3RlbSBGZWF0dXJlc1wiLFxuICAgICAgICAgIHJlcG9ydHM6IFwiUmVwb3J0cyAmIEFuYWx5dGljc1wiXG4gICAgICAgIH1bcGVybWlzc2lvbi5yZXNvdXJjZVR5cGVdIHx8IFwiT3RoZXJcIjtcbiAgICAgICAgaWYgKCFjYXRlZ29yeU1hcFtjYXRlZ29yeU5hbWVdKSB7XG4gICAgICAgICAgY2F0ZWdvcnlNYXBbY2F0ZWdvcnlOYW1lXSA9IFtdO1xuICAgICAgICB9XG4gICAgICAgIGNhdGVnb3J5TWFwW2NhdGVnb3J5TmFtZV0ucHVzaChwZXJtaXNzaW9uKTtcbiAgICAgIH0pO1xuICAgICAgY29uc3QgY2F0ZWdvcmllcyA9IE9iamVjdC5lbnRyaWVzKGNhdGVnb3J5TWFwKS5tYXAoKFtuYW1lLCBwZXJtc10pID0+ICh7XG4gICAgICAgIGlkOiBuYW1lLnRvTG93ZXJDYXNlKCkucmVwbGFjZSgvXFxzKy9nLCBcIi1cIiksXG4gICAgICAgIG5hbWUsXG4gICAgICAgIHBlcm1pc3Npb25zOiBwZXJtcyxcbiAgICAgICAgY291bnQ6IHBlcm1zLmxlbmd0aFxuICAgICAgfSkpO1xuICAgICAgcmVzLmpzb24oY2F0ZWdvcmllcyk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoXCJcXHUyNzRDIEVycm9yIGZldGNoaW5nIHBlcm1pc3Npb24gY2F0ZWdvcmllczpcIiwgZXJyb3IpO1xuICAgICAgcmVzLnN0YXR1cyg1MDApLmpzb24oeyBtZXNzYWdlOiBcIkZhaWxlZCB0byBmZXRjaCBwZXJtaXNzaW9uIGNhdGVnb3JpZXNcIiB9KTtcbiAgICB9XG4gIH0pO1xuICBhcHAyLnBvc3QoXCIvYXBpL3Blcm1pc3Npb25zL3ZhbGlkYXRlXCIsIHJlcXVpcmVBdXRoLCBhc3luYyAocmVxLCByZXMpID0+IHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgeyBwZXJtaXNzaW9uIH0gPSByZXEuYm9keTtcbiAgICAgIGlmICghcGVybWlzc2lvbikge1xuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oeyBtZXNzYWdlOiBcIlBlcm1pc3Npb24gaXMgcmVxdWlyZWRcIiB9KTtcbiAgICAgIH1cbiAgICAgIGNvbnN0IHJvbGVQZXJtaXNzaW9uczIgPSBhd2FpdCBzdG9yYWdlLmdldFJvbGVQZXJtaXNzaW9ucygpO1xuICAgICAgY29uc3QgaGFzUGVybWlzc2lvbiA9IHJvbGVQZXJtaXNzaW9uczIuc29tZShcbiAgICAgICAgKHJwKSA9PiBycC5yb2xlID09PSByZXEudXNlci5yb2xlICYmIHJwLnBlcm1pc3Npb24gJiYgcnAucGVybWlzc2lvbi5uYW1lID09PSBwZXJtaXNzaW9uXG4gICAgICApO1xuICAgICAgcmVzLmpzb24oe1xuICAgICAgICBoYXNQZXJtaXNzaW9uLFxuICAgICAgICByb2xlOiByZXEudXNlci5yb2xlLFxuICAgICAgICBwZXJtaXNzaW9uLFxuICAgICAgICBtZXNzYWdlOiBoYXNQZXJtaXNzaW9uID8gXCJQZXJtaXNzaW9uIGdyYW50ZWRcIiA6IFwiUGVybWlzc2lvbiBkZW5pZWRcIlxuICAgICAgfSk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoXCJcXHUyNzRDIEVycm9yIHZhbGlkYXRpbmcgcGVybWlzc2lvbjpcIiwgZXJyb3IpO1xuICAgICAgcmVzLnN0YXR1cyg1MDApLmpzb24oeyBtZXNzYWdlOiBcIkZhaWxlZCB0byB2YWxpZGF0ZSBwZXJtaXNzaW9uXCIgfSk7XG4gICAgfVxuICB9KTtcbn1cblxuLy8gc2VydmVyL3NlcnZpY2VzL2RlbW8tbWFuYWdlbWVudC1zZXJ2aWNlLnRzXG52YXIgRGVtb01hbmFnZW1lbnRTZXJ2aWNlID0gY2xhc3Mge1xuICBzdGF0aWMge1xuICAgIHRoaXMuREVNT19PUkdfTkFNRSA9IFwiRGVtb1wiO1xuICB9XG4gIHN0YXRpYyB7XG4gICAgdGhpcy5PUEVOX0RFTU9fT1JHX05BTUUgPSBcIk9wZW4gRGVtb1wiO1xuICB9XG4gIC8qKlxuICAgKiBDaGVjayBpZiBkZW1vIG9yZ2FuaXphdGlvbnMgYXJlIGhlYWx0aHkgYW5kIHByb3Blcmx5IGNvbmZpZ3VyZWQuXG4gICAqL1xuICBzdGF0aWMgYXN5bmMgY2hlY2tEZW1vSGVhbHRoKCkge1xuICAgIHJldHVybiB7XG4gICAgICBoZWFsdGh5OiB0cnVlLFxuICAgICAgc3RhdHVzOiB7IG1lc3NhZ2U6IFwiRGVtbyBzeW5jIGZ1bmN0aW9uYWxpdHkgcmVtb3ZlZFwiIH0sXG4gICAgICBtZXNzYWdlOiBcIkRlbW8gb3JnYW5pemF0aW9ucyBtYW5hZ2VkIGxvY2FsbHkgb25seVwiLFxuICAgICAgdGltZXN0YW1wOiAoLyogQF9fUFVSRV9fICovIG5ldyBEYXRlKCkpLnRvSVNPU3RyaW5nKClcbiAgICB9O1xuICB9XG4gIC8qKlxuICAgKiBFbnN1cmUgZGVtbyBvcmdhbml6YXRpb25zIGV4aXN0IGFuZCBhcmUgcHJvcGVybHkgY29uZmlndXJlZC5cbiAgICogVGhpcyBpcyBhIHNhZmUgb3BlcmF0aW9uIHRoYXQgY2FuIGJlIGNhbGxlZCBkdXJpbmcgYXBwbGljYXRpb24gc3RhcnR1cC5cbiAgICogRElTQUJMRUQ6IERlbW8gb3JnYW5pemF0aW9uIGNyZWF0aW9uIGhhcyBiZWVuIGRpc2FibGVkIHBlciB1c2VyIHJlcXVlc3QuXG4gICAqL1xuICBzdGF0aWMgYXN5bmMgZW5zdXJlRGVtb09yZ2FuaXphdGlvbnMoKSB7XG4gICAgY29uc29sZS5sb2coXCJcXHUyNzA1IERlbW8gb3JnYW5pemF0aW9ucyBmdW5jdGlvbmFsaXR5IGRpc2FibGVkIChza2lwcGVkKVwiKTtcbiAgICByZXR1cm4ge1xuICAgICAgc3VjY2VzczogdHJ1ZSxcbiAgICAgIG1lc3NhZ2U6IFwiRGVtbyBvcmdhbml6YXRpb25zIGZ1bmN0aW9uYWxpdHkgZGlzYWJsZWQgLSBza2lwcGluZyBhbGwgZGF0YWJhc2Ugb3BlcmF0aW9uc1wiXG4gICAgfTtcbiAgfVxuICAvKipcbiAgICogRm9yY2UgcmVjcmVhdGlvbiBvZiBkZW1vIG9yZ2FuaXphdGlvbnMuXG4gICAqIERJU0FCTEVEOiBEZW1vIG9yZ2FuaXphdGlvbiBmdW5jdGlvbmFsaXR5IGhhcyBiZWVuIGRpc2FibGVkIHBlciB1c2VyIHJlcXVlc3QuXG4gICAqL1xuICBzdGF0aWMgYXN5bmMgcmVjcmVhdGVEZW1vT3JnYW5pemF0aW9ucygpIHtcbiAgICBjb25zb2xlLmxvZyhcIlxcdTI3MDUgRGVtbyBvcmdhbml6YXRpb25zIHJlY3JlYXRpb24gc2tpcHBlZCAoZGlzYWJsZWQpXCIpO1xuICAgIHJldHVybiB7XG4gICAgICBzdWNjZXNzOiB0cnVlLFxuICAgICAgbWVzc2FnZTogXCJEZW1vIG9yZ2FuaXphdGlvbnMgZnVuY3Rpb25hbGl0eSBkaXNhYmxlZCAtIHJlY3JlYXRpb24gc2tpcHBlZFwiXG4gICAgfTtcbiAgfVxuICAvKipcbiAgICogR2V0IGRlbW8gb3JnYW5pemF0aW9uIGluZm9ybWF0aW9uLlxuICAgKiBESVNBQkxFRDogRGVtbyBvcmdhbml6YXRpb24gZnVuY3Rpb25hbGl0eSBoYXMgYmVlbiBkaXNhYmxlZCBwZXIgdXNlciByZXF1ZXN0LlxuICAgKi9cbiAgc3RhdGljIGFzeW5jIGdldERlbW9Pcmdhbml6YXRpb25JbmZvKCkge1xuICAgIGNvbnNvbGUubG9nKFwiXFx1MjcwNSBEZW1vIG9yZ2FuaXphdGlvbnMgaW5mbyByZXRyaWV2YWwgc2tpcHBlZCAoZGlzYWJsZWQpXCIpO1xuICAgIHJldHVybiB7XG4gICAgICBzdGF0czoge1xuICAgICAgICBkZW1vQnVpbGRpbmdzOiAwLFxuICAgICAgICBkZW1vVXNlcnM6IDAsXG4gICAgICAgIG9wZW5EZW1vQnVpbGRpbmdzOiAwLFxuICAgICAgICBvcGVuRGVtb1VzZXJzOiAwXG4gICAgICB9XG4gICAgfTtcbiAgfVxuICAvKipcbiAgICogSW5pdGlhbGl6ZSBkZW1vIG9yZ2FuaXphdGlvbnMgZHVyaW5nIGFwcGxpY2F0aW9uIHN0YXJ0dXAuXG4gICAqIERJU0FCTEVEOiBEZW1vIG9yZ2FuaXphdGlvbiBmdW5jdGlvbmFsaXR5IGhhcyBiZWVuIGRpc2FibGVkIHBlciB1c2VyIHJlcXVlc3QuXG4gICAqL1xuICBzdGF0aWMgYXN5bmMgaW5pdGlhbGl6ZURlbW9Pcmdhbml6YXRpb25zKCkge1xuICAgIGNvbnNvbGUubG9nKFwiXFx1MjcwNSBEZW1vIG9yZ2FuaXphdGlvbnMgaW5pdGlhbGl6YXRpb24gc2tpcHBlZCAoZGlzYWJsZWQpXCIpO1xuICAgIHJldHVybjtcbiAgfVxuICAvKipcbiAgICogUFJPRFVDVElPTiBGSVg6IENyZWF0ZSBiYXNpYyBkZW1vIG9yZ2FuaXphdGlvbnMgaWYgdGhleSBkb24ndCBleGlzdC5cbiAgICogVGhpcyBlbnN1cmVzIHRoZSBkYXRhYmFzZSBoYXMgdGhlIHJlcXVpcmVkIG9yZ2FuaXphdGlvbnMgZm9yIHByb2R1Y3Rpb24uXG4gICAqL1xuICBzdGF0aWMgYXN5bmMgY3JlYXRlQmFzaWNPcmdhbml6YXRpb25zSWZNaXNzaW5nKCkge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCB7IFBvb2w6IFBvb2wzIH0gPSBhd2FpdCBpbXBvcnQoXCJAbmVvbmRhdGFiYXNlL3NlcnZlcmxlc3NcIik7XG4gICAgICBjb25zdCB7IGRyaXp6bGU6IGRyaXp6bGUyIH0gPSBhd2FpdCBpbXBvcnQoXCJkcml6emxlLW9ybS9uZW9uLXNlcnZlcmxlc3NcIik7XG4gICAgICBjb25zdCB7IGVxOiBlcTE1IH0gPSBhd2FpdCBpbXBvcnQoXCJkcml6emxlLW9ybVwiKTtcbiAgICAgIGNvbnN0IHNjaGVtYTIgPSBhd2FpdCBQcm9taXNlLnJlc29sdmUoKS50aGVuKCgpID0+IChpbml0X3NjaGVtYSgpLCBzY2hlbWFfZXhwb3J0cykpO1xuICAgICAgY29uc3QgeyBkYjogZGIyIH0gPSBhd2FpdCBQcm9taXNlLnJlc29sdmUoKS50aGVuKCgpID0+IChpbml0X2RiKCksIGRiX2V4cG9ydHMpKTtcbiAgICAgIGNvbnN0IGV4aXN0aW5nRGVtbyA9IGF3YWl0IGRiMi5zZWxlY3QoKS5mcm9tKHNjaGVtYTIub3JnYW5pemF0aW9ucykud2hlcmUoZXExNShzY2hlbWEyLm9yZ2FuaXphdGlvbnMubmFtZSwgXCJEZW1vXCIpKS5saW1pdCgxKTtcbiAgICAgIGlmIChleGlzdGluZ0RlbW8ubGVuZ3RoID09PSAwKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKFwiXFx1ezFGNEREfSBDcmVhdGluZyBEZW1vIG9yZ2FuaXphdGlvbi4uLlwiKTtcbiAgICAgICAgYXdhaXQgZGIyLmluc2VydChzY2hlbWEyLm9yZ2FuaXphdGlvbnMpLnZhbHVlcyh7XG4gICAgICAgICAgbmFtZTogXCJEZW1vXCIsXG4gICAgICAgICAgdHlwZTogXCJkZW1vXCIsXG4gICAgICAgICAgYWRkcmVzczogXCIxMjMgRGVtbyBTdHJlZXRcIixcbiAgICAgICAgICBjaXR5OiBcIk1vbnRyZWFsXCIsXG4gICAgICAgICAgcHJvdmluY2U6IFwiUUNcIixcbiAgICAgICAgICBwb3N0YWxDb2RlOiBcIkgxQSAxQTFcIixcbiAgICAgICAgICBpc0FjdGl2ZTogdHJ1ZVxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICAgIGNvbnN0IGV4aXN0aW5nT3BlbkRlbW8gPSBhd2FpdCBkYjIuc2VsZWN0KCkuZnJvbShzY2hlbWEyLm9yZ2FuaXphdGlvbnMpLndoZXJlKGVxMTUoc2NoZW1hMi5vcmdhbml6YXRpb25zLm5hbWUsIFwiT3BlbiBEZW1vXCIpKS5saW1pdCgxKTtcbiAgICAgIGlmIChleGlzdGluZ09wZW5EZW1vLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICBjb25zb2xlLmxvZyhcIlxcdXsxRjRERH0gQ3JlYXRpbmcgT3BlbiBEZW1vIG9yZ2FuaXphdGlvbi4uLlwiKTtcbiAgICAgICAgYXdhaXQgZGIyLmluc2VydChzY2hlbWEyLm9yZ2FuaXphdGlvbnMpLnZhbHVlcyh7XG4gICAgICAgICAgbmFtZTogXCJPcGVuIERlbW9cIixcbiAgICAgICAgICB0eXBlOiBcImRlbW9cIixcbiAgICAgICAgICBhZGRyZXNzOiBcIjQ1NiBEZW1vIEF2ZW51ZVwiLFxuICAgICAgICAgIGNpdHk6IFwiTW9udHJlYWxcIixcbiAgICAgICAgICBwcm92aW5jZTogXCJRQ1wiLFxuICAgICAgICAgIHBvc3RhbENvZGU6IFwiSDFCIDFCMVwiLFxuICAgICAgICAgIGlzQWN0aXZlOiB0cnVlXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgICAgY29uc29sZS5sb2coXCJcXHUyNzA1IERlbW8gb3JnYW5pemF0aW9ucyBhcmUgcHJvcGVybHkgY29uZmlndXJlZFwiKTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5sb2coXCJcXHUyNkEwXFx1RkUwRiBEZW1vIG9yZ2FuaXphdGlvbnMgc2V0dXAgZmFpbGVkLCBidXQgY29udGludWluZy4uLlwiKTtcbiAgICB9XG4gIH1cbiAgLyoqXG4gICAqIFNjaGVkdWxlZCBtYWludGVuYW5jZSBmb3IgZGVtbyBvcmdhbml6YXRpb25zLlxuICAgKiBUaGlzIGNhbiBiZSBjYWxsZWQgcGVyaW9kaWNhbGx5IHRvIGVuc3VyZSBkZW1vIGRhdGEgc3RheXMgZnJlc2guXG4gICAqL1xuICBzdGF0aWMgYXN5bmMgc2NoZWR1bGVkTWFpbnRlbmFuY2UoKSB7XG4gICAgY29uc3QgYWN0aW9ucyA9IFtdO1xuICAgIHRyeSB7XG4gICAgICBjb25zb2xlLmxvZyhcIlxcdXsxRjUyN30gUnVubmluZyBzY2hlZHVsZWQgZGVtbyBtYWludGVuYW5jZS4uLlwiKTtcbiAgICAgIGNvbnN0IGhlYWx0aCA9IGF3YWl0IHRoaXMuY2hlY2tEZW1vSGVhbHRoKCk7XG4gICAgICBhY3Rpb25zLnB1c2goYEhlYWx0aCBjaGVjazogJHtoZWFsdGguaGVhbHRoeSA/IFwiSEVBTFRIWVwiIDogXCJVTkhFQUxUSFlcIn1gKTtcbiAgICAgIGlmICghaGVhbHRoLmhlYWx0aHkpIHtcbiAgICAgICAgYWN0aW9ucy5wdXNoKFwiRGVtbyBzeW5jIGZ1bmN0aW9uYWxpdHkgcmVtb3ZlZCAtIGxvY2FsIG1hbmFnZW1lbnQgb25seVwiKTtcbiAgICAgICAgY29uc3QgbmV3SGVhbHRoID0gYXdhaXQgdGhpcy5jaGVja0RlbW9IZWFsdGgoKTtcbiAgICAgICAgYWN0aW9ucy5wdXNoKGBQb3N0LXN5bmMgaGVhbHRoOiAke25ld0hlYWx0aC5oZWFsdGh5ID8gXCJIRUFMVEhZXCIgOiBcIlNUSUxMX1VOSEVBTFRIWVwifWApO1xuICAgICAgfVxuICAgICAgY29uc29sZS5sb2coXCJcXHUyNzA1IFNjaGVkdWxlZCBkZW1vIG1haW50ZW5hbmNlIGNvbXBsZXRlZFwiKTtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHN1Y2Nlc3M6IHRydWUsXG4gICAgICAgIG1lc3NhZ2U6IFwiU2NoZWR1bGVkIG1haW50ZW5hbmNlIGNvbXBsZXRlZCBzdWNjZXNzZnVsbHlcIixcbiAgICAgICAgYWN0aW9uc1xuICAgICAgfTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICAgIG1lc3NhZ2U6IGBTY2hlZHVsZWQgbWFpbnRlbmFuY2UgZmFpbGVkOiAke2Vycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogXCJVbmtub3duIGVycm9yXCJ9YCxcbiAgICAgICAgYWN0aW9uc1xuICAgICAgfTtcbiAgICB9XG4gIH1cbn07XG52YXIgZGVtb19tYW5hZ2VtZW50X3NlcnZpY2VfZGVmYXVsdCA9IERlbW9NYW5hZ2VtZW50U2VydmljZTtcblxuLy8gc2VydmVyL2FwaS9kZW1vLW1hbmFnZW1lbnQudHNcbmZ1bmN0aW9uIHJlZ2lzdGVyRGVtb01hbmFnZW1lbnRSb3V0ZXMoYXBwMikge1xuICBhcHAyLmdldChcIi9hcGkvZGVtby9oZWFsdGhcIiwgYXN5bmMgKHJlcSwgcmVzKSA9PiB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IGhlYWx0aCA9IGF3YWl0IGRlbW9fbWFuYWdlbWVudF9zZXJ2aWNlX2RlZmF1bHQuY2hlY2tEZW1vSGVhbHRoKCk7XG4gICAgICByZXMuc3RhdHVzKGhlYWx0aC5oZWFsdGh5ID8gMjAwIDogNTAzKS5qc29uKHtcbiAgICAgICAgc3VjY2VzczogdHJ1ZSxcbiAgICAgICAgZGF0YTogaGVhbHRoXG4gICAgICB9KTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgcmVzLnN0YXR1cyg1MDApLmpzb24oe1xuICAgICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgICAgbWVzc2FnZTogXCJEZW1vIGhlYWx0aCBjaGVjayBmYWlsZWRcIixcbiAgICAgICAgZXJyb3I6IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogXCJVbmtub3duIGVycm9yXCJcbiAgICAgIH0pO1xuICAgIH1cbiAgfSk7XG4gIGFwcDIuZ2V0KFwiL2FwaS9kZW1vL3VzZXJzXCIsIGFzeW5jIChyZXEsIHJlcykgPT4ge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCB7IGRiOiBkYjIgfSA9IGF3YWl0IFByb21pc2UucmVzb2x2ZSgpLnRoZW4oKCkgPT4gKGluaXRfZGIoKSwgZGJfZXhwb3J0cykpO1xuICAgICAgY29uc3QgeyBlcTogZXExNSwgYW5kOiBhbmQxNSwgaW5BcnJheTogaW5BcnJheTEwIH0gPSBhd2FpdCBpbXBvcnQoXCJkcml6emxlLW9ybVwiKTtcbiAgICAgIGNvbnN0IHNjaGVtYTIgPSBhd2FpdCBQcm9taXNlLnJlc29sdmUoKS50aGVuKCgpID0+IChpbml0X3NjaGVtYSgpLCBzY2hlbWFfZXhwb3J0cykpO1xuICAgICAgY29uc3QgZGVtb09yZ3MgPSBhd2FpdCBkYjIucXVlcnkub3JnYW5pemF0aW9ucy5maW5kTWFueSh7XG4gICAgICAgIHdoZXJlOiBlcTE1KHNjaGVtYTIub3JnYW5pemF0aW9ucy50eXBlLCBcImRlbW9cIilcbiAgICAgIH0pO1xuICAgICAgaWYgKGRlbW9PcmdzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDQpLmpzb24oe1xuICAgICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgICAgIG1lc3NhZ2U6IFwiTm8gZGVtbyBvcmdhbml6YXRpb25zIGZvdW5kXCJcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgICBjb25zdCBkZW1vVXNlcnMgPSBhd2FpdCBkYjIucXVlcnkudXNlcnMuZmluZE1hbnkoe1xuICAgICAgICB3aGVyZTogYW5kMTUoXG4gICAgICAgICAgZXExNShzY2hlbWEyLnVzZXJzLmlzQWN0aXZlLCB0cnVlKSxcbiAgICAgICAgICBpbkFycmF5MTAoc2NoZW1hMi51c2Vycy5yb2xlLCBbXCJkZW1vX21hbmFnZXJcIiwgXCJkZW1vX3RlbmFudFwiLCBcImRlbW9fcmVzaWRlbnRcIl0pXG4gICAgICAgICksXG4gICAgICAgIGNvbHVtbnM6IHtcbiAgICAgICAgICBpZDogdHJ1ZSxcbiAgICAgICAgICBlbWFpbDogdHJ1ZSxcbiAgICAgICAgICBmaXJzdE5hbWU6IHRydWUsXG4gICAgICAgICAgbGFzdE5hbWU6IHRydWUsXG4gICAgICAgICAgcm9sZTogdHJ1ZVxuICAgICAgICB9XG4gICAgICB9KTtcbiAgICAgIGNvbnN0IHVzZXJzQnlSb2xlID0ge1xuICAgICAgICBkZW1vX21hbmFnZXI6IGRlbW9Vc2Vycy5maWx0ZXIoKHVzZXIpID0+IHVzZXIucm9sZSA9PT0gXCJkZW1vX21hbmFnZXJcIiksXG4gICAgICAgIGRlbW9fdGVuYW50OiBkZW1vVXNlcnMuZmlsdGVyKCh1c2VyKSA9PiB1c2VyLnJvbGUgPT09IFwiZGVtb190ZW5hbnRcIiksXG4gICAgICAgIGRlbW9fcmVzaWRlbnQ6IGRlbW9Vc2Vycy5maWx0ZXIoKHVzZXIpID0+IHVzZXIucm9sZSA9PT0gXCJkZW1vX3Jlc2lkZW50XCIpXG4gICAgICB9O1xuICAgICAgcmVzLmpzb24oe1xuICAgICAgICBzdWNjZXNzOiB0cnVlLFxuICAgICAgICBkYXRhOiB1c2Vyc0J5Um9sZVxuICAgICAgfSk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoXCJcXHUyNzRDIEVycm9yIGZldGNoaW5nIGRlbW8gdXNlcnM6XCIsIGVycm9yKTtcbiAgICAgIHJlcy5zdGF0dXMoNTAwKS5qc29uKHtcbiAgICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICAgIG1lc3NhZ2U6IFwiRmFpbGVkIHRvIGZldGNoIGRlbW8gdXNlcnNcIixcbiAgICAgICAgZXJyb3I6IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogXCJVbmtub3duIGVycm9yXCJcbiAgICAgIH0pO1xuICAgIH1cbiAgfSk7XG4gIGFwcDIuZ2V0KFwiL2FwaS9kZW1vL3N0YXR1c1wiLCByZXF1aXJlQXV0aCwgYXN5bmMgKHJlcSwgcmVzKSA9PiB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IGluZm8gPSBhd2FpdCBkZW1vX21hbmFnZW1lbnRfc2VydmljZV9kZWZhdWx0LmdldERlbW9Pcmdhbml6YXRpb25JbmZvKCk7XG4gICAgICByZXMuanNvbih7XG4gICAgICAgIHN1Y2Nlc3M6IHRydWUsXG4gICAgICAgIGRhdGE6IGluZm9cbiAgICAgIH0pO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICByZXMuc3RhdHVzKDUwMCkuanNvbih7XG4gICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgICBtZXNzYWdlOiBcIkZhaWxlZCB0byBnZXQgZGVtbyBzdGF0dXNcIixcbiAgICAgICAgZXJyb3I6IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogXCJVbmtub3duIGVycm9yXCJcbiAgICAgIH0pO1xuICAgIH1cbiAgfSk7XG4gIGFwcDIucG9zdChcbiAgICBcIi9hcGkvZGVtby9lbnN1cmVcIixcbiAgICByZXF1aXJlQXV0aCxcbiAgICByZXF1aXJlUm9sZShbXCJhZG1pblwiXSksXG4gICAgYXN5bmMgKHJlcSwgcmVzKSA9PiB7XG4gICAgICB0cnkge1xuICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBkZW1vX21hbmFnZW1lbnRfc2VydmljZV9kZWZhdWx0LmVuc3VyZURlbW9Pcmdhbml6YXRpb25zKCk7XG4gICAgICAgIHJlcy5zdGF0dXMocmVzdWx0LnN1Y2Nlc3MgPyAyMDAgOiA1MDApLmpzb24oe1xuICAgICAgICAgIHN1Y2Nlc3M6IHJlc3VsdC5zdWNjZXNzLFxuICAgICAgICAgIG1lc3NhZ2U6IHJlc3VsdC5tZXNzYWdlLFxuICAgICAgICAgIGRhdGE6IHtcbiAgICAgICAgICAgIGRlbW9PcmdJZDogcmVzdWx0LmRlbW9PcmdJZCxcbiAgICAgICAgICAgIG9wZW5EZW1vT3JnSWQ6IHJlc3VsdC5vcGVuRGVtb09yZ0lkXG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIHJlcy5zdGF0dXMoNTAwKS5qc29uKHtcbiAgICAgICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgICAgICBtZXNzYWdlOiBcIkZhaWxlZCB0byBlbnN1cmUgZGVtbyBvcmdhbml6YXRpb25zXCIsXG4gICAgICAgICAgZXJyb3I6IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogXCJVbmtub3duIGVycm9yXCJcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfVxuICApO1xuICBhcHAyLnBvc3QoXG4gICAgXCIvYXBpL2RlbW8vcmVjcmVhdGVcIixcbiAgICByZXF1aXJlQXV0aCxcbiAgICByZXF1aXJlUm9sZShbXCJhZG1pblwiXSksXG4gICAgYXN5bmMgKHJlcSwgcmVzKSA9PiB7XG4gICAgICB0cnkge1xuICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBkZW1vX21hbmFnZW1lbnRfc2VydmljZV9kZWZhdWx0LnJlY3JlYXRlRGVtb09yZ2FuaXphdGlvbnMoKTtcbiAgICAgICAgcmVzLnN0YXR1cyhyZXN1bHQuc3VjY2VzcyA/IDIwMCA6IDUwMCkuanNvbih7XG4gICAgICAgICAgc3VjY2VzczogcmVzdWx0LnN1Y2Nlc3MsXG4gICAgICAgICAgbWVzc2FnZTogcmVzdWx0Lm1lc3NhZ2UsXG4gICAgICAgICAgZGF0YToge1xuICAgICAgICAgICAgZGVtb09yZ0lkOiByZXN1bHQuZGVtb09yZ0lkLFxuICAgICAgICAgICAgb3BlbkRlbW9PcmdJZDogcmVzdWx0Lm9wZW5EZW1vT3JnSWRcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgcmVzLnN0YXR1cyg1MDApLmpzb24oe1xuICAgICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgICAgIG1lc3NhZ2U6IFwiRmFpbGVkIHRvIHJlY3JlYXRlIGRlbW8gb3JnYW5pemF0aW9uc1wiLFxuICAgICAgICAgIGVycm9yOiBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6IFwiVW5rbm93biBlcnJvclwiXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH1cbiAgKTtcbiAgYXBwMi5wb3N0KFxuICAgIFwiL2FwaS9kZW1vL21haW50ZW5hbmNlXCIsXG4gICAgcmVxdWlyZUF1dGgsXG4gICAgcmVxdWlyZVJvbGUoW1wiYWRtaW5cIl0pLFxuICAgIGFzeW5jIChyZXEsIHJlcykgPT4ge1xuICAgICAgdHJ5IHtcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgZGVtb19tYW5hZ2VtZW50X3NlcnZpY2VfZGVmYXVsdC5zY2hlZHVsZWRNYWludGVuYW5jZSgpO1xuICAgICAgICByZXMuc3RhdHVzKHJlc3VsdC5zdWNjZXNzID8gMjAwIDogNTAwKS5qc29uKHtcbiAgICAgICAgICBzdWNjZXNzOiByZXN1bHQuc3VjY2VzcyxcbiAgICAgICAgICBtZXNzYWdlOiByZXN1bHQubWVzc2FnZSxcbiAgICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgICBhY3Rpb25zOiByZXN1bHQuYWN0aW9uc1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICByZXMuc3RhdHVzKDUwMCkuanNvbih7XG4gICAgICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICAgICAgbWVzc2FnZTogXCJGYWlsZWQgdG8gcnVuIGRlbW8gbWFpbnRlbmFuY2VcIixcbiAgICAgICAgICBlcnJvcjogZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiBcIlVua25vd24gZXJyb3JcIlxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9XG4gICk7XG4gIGNvbnNvbGUubG9nKFwiXFx1MjcwNSBEZW1vIG1hbmFnZW1lbnQgQVBJIHJvdXRlcyByZWdpc3RlcmVkXCIpO1xufVxuXG4vLyBzZXJ2ZXIvYXBpL3RyaWFsLXJlcXVlc3QudHNcbmltcG9ydCBleHByZXNzMiBmcm9tIFwiZXhwcmVzc1wiO1xuaW1wb3J0IHsgeiBhcyB6MTYgfSBmcm9tIFwiem9kXCI7XG5pbXBvcnQgeyBNYWlsU2VydmljZSBhcyBNYWlsU2VydmljZTIgfSBmcm9tIFwiQHNlbmRncmlkL21haWxcIjtcbnZhciByb3V0ZXIgPSBleHByZXNzMi5Sb3V0ZXIoKTtcbmlmICghcHJvY2Vzcy5lbnYuU0VOREdSSURfQVBJX0tFWSkge1xuICBjb25zb2xlLndhcm4oXCJcXHUyNkEwXFx1RkUwRiBTRU5ER1JJRF9BUElfS0VZIGVudmlyb25tZW50IHZhcmlhYmxlIGlzIG5vdCBzZXRcIik7XG59XG52YXIgbWFpbFNlcnZpY2UgPSBuZXcgTWFpbFNlcnZpY2UyKCk7XG5pZiAocHJvY2Vzcy5lbnYuU0VOREdSSURfQVBJX0tFWSkge1xuICBtYWlsU2VydmljZS5zZXRBcGlLZXkocHJvY2Vzcy5lbnYuU0VOREdSSURfQVBJX0tFWSk7XG59XG52YXIgdHJpYWxSZXF1ZXN0U2NoZW1hID0gejE2Lm9iamVjdCh7XG4gIGZpcnN0TmFtZTogejE2LnN0cmluZygpLm1pbigxLCBcIkZpcnN0IG5hbWUgaXMgcmVxdWlyZWRcIiksXG4gIGxhc3ROYW1lOiB6MTYuc3RyaW5nKCkubWluKDEsIFwiTGFzdCBuYW1lIGlzIHJlcXVpcmVkXCIpLFxuICBlbWFpbDogejE2LnN0cmluZygpLmVtYWlsKFwiSW52YWxpZCBlbWFpbCBmb3JtYXRcIiksXG4gIHBob25lOiB6MTYuc3RyaW5nKCkubWluKDEsIFwiUGhvbmUgbnVtYmVyIGlzIHJlcXVpcmVkXCIpLFxuICBjb21wYW55OiB6MTYuc3RyaW5nKCkubWluKDEsIFwiQ29tcGFueSBuYW1lIGlzIHJlcXVpcmVkXCIpLFxuICBhZGRyZXNzOiB6MTYuc3RyaW5nKCkub3B0aW9uYWwoKSxcbiAgY2l0eTogejE2LnN0cmluZygpLm9wdGlvbmFsKCksXG4gIHByb3ZpbmNlOiB6MTYuc3RyaW5nKCkub3B0aW9uYWwoKSxcbiAgcG9zdGFsQ29kZTogejE2LnN0cmluZygpLm9wdGlvbmFsKCksXG4gIG51bWJlck9mQnVpbGRpbmdzOiB6MTYuc3RyaW5nKCkucmVmaW5lKCh2YWwpID0+IHBhcnNlSW50KHZhbCkgPiAwLCBcIk11c3QgYmUgYSBwb3NpdGl2ZSBudW1iZXJcIiksXG4gIG51bWJlck9mUmVzaWRlbmNlczogejE2LnN0cmluZygpLnJlZmluZSgodmFsKSA9PiBwYXJzZUludCh2YWwpID4gMCwgXCJNdXN0IGJlIGEgcG9zaXRpdmUgbnVtYmVyXCIpLFxuICBtZXNzYWdlOiB6MTYuc3RyaW5nKCkub3B0aW9uYWwoKVxufSk7XG5yb3V0ZXIucG9zdChcIi90cmlhbC1yZXF1ZXN0XCIsIGFzeW5jIChyZXEsIHJlcykgPT4ge1xuICB0cnkge1xuICAgIGNvbnN0IHZhbGlkYXRpb25SZXN1bHQgPSB0cmlhbFJlcXVlc3RTY2hlbWEuc2FmZVBhcnNlKHJlcS5ib2R5KTtcbiAgICBpZiAoIXZhbGlkYXRpb25SZXN1bHQuc3VjY2Vzcykge1xuICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHtcbiAgICAgICAgbWVzc2FnZTogXCJJbnZhbGlkIHJlcXVlc3QgZGF0YVwiLFxuICAgICAgICBlcnJvcnM6IHZhbGlkYXRpb25SZXN1bHQuZXJyb3IuaXNzdWVzXG4gICAgICB9KTtcbiAgICB9XG4gICAgY29uc3QgZGF0YSA9IHZhbGlkYXRpb25SZXN1bHQuZGF0YTtcbiAgICBpZiAoIXByb2Nlc3MuZW52LlNFTkRHUklEX0FQSV9LRVkpIHtcbiAgICAgIHJldHVybiByZXMuc3RhdHVzKDUwMCkuanNvbih7XG4gICAgICAgIG1lc3NhZ2U6IFwiRW1haWwgc2VydmljZSBub3QgY29uZmlndXJlZFwiXG4gICAgICB9KTtcbiAgICB9XG4gICAgY29uc3QgZW1haWxTdWJqZWN0ID0gYE5vdXZlbGxlIGRlbWFuZGUgZCdlc3NhaSBncmF0dWl0IC0gJHtkYXRhLmNvbXBhbnl9YDtcbiAgICBjb25zdCBlbWFpbFRleHQgPSBgXG5Ob3V2ZWxsZSBkZW1hbmRlIGQnZXNzYWkgZ3JhdHVpdCBwb3VyIEtvdmVvIEdlc3Rpb25cblxuSU5GT1JNQVRJT05TIERVIENPTlRBQ1Q6XG4tIE5vbTogJHtkYXRhLmZpcnN0TmFtZX0gJHtkYXRhLmxhc3ROYW1lfVxuLSBFbnRyZXByaXNlOiAke2RhdGEuY29tcGFueX1cbi0gQ291cnJpZWw6ICR7ZGF0YS5lbWFpbH1cbi0gVFxceEU5bFxceEU5cGhvbmU6ICR7ZGF0YS5waG9uZX1cblxuQURSRVNTRTpcbiR7ZGF0YS5hZGRyZXNzID8gYC0gQWRyZXNzZTogJHtkYXRhLmFkZHJlc3N9YCA6IFwiXCJ9XG4ke2RhdGEuY2l0eSA/IGAtIFZpbGxlOiAke2RhdGEuY2l0eX1gIDogXCJcIn1cbiR7ZGF0YS5wcm92aW5jZSA/IGAtIFByb3ZpbmNlOiAke2RhdGEucHJvdmluY2V9YCA6IFwiXCJ9XG4ke2RhdGEucG9zdGFsQ29kZSA/IGAtIENvZGUgcG9zdGFsOiAke2RhdGEucG9zdGFsQ29kZX1gIDogXCJcIn1cblxuSU5GT1JNQVRJT05TIFNVUiBMRVMgUFJPUFJJXFx4QzlUXFx4QzlTOlxuLSBOb21icmUgZGUgYlxceEUydGltZW50czogJHtkYXRhLm51bWJlck9mQnVpbGRpbmdzfVxuLSBOb21icmUgZGUgclxceEU5c2lkZW5jZXM6ICR7ZGF0YS5udW1iZXJPZlJlc2lkZW5jZXN9XG5cbiR7ZGF0YS5tZXNzYWdlID8gYE1FU1NBR0UgQURESVRJT05ORUw6XG4ke2RhdGEubWVzc2FnZX1gIDogXCJcIn1cblxuLS0tXG5DZXR0ZSBkZW1hbmRlIGEgXFx4RTl0XFx4RTkgc291bWlzZSB2aWEgbGUgc2l0ZSB3ZWIgS292ZW8gR2VzdGlvbi5cbiAgICBgLnRyaW0oKTtcbiAgICBjb25zdCBlbWFpbEh0bWwgPSBgXG48IURPQ1RZUEUgaHRtbD5cbjxodG1sPlxuPGhlYWQ+XG4gIDxtZXRhIGNoYXJzZXQ9XCJVVEYtOFwiPlxuICA8dGl0bGU+Tm91dmVsbGUgZGVtYW5kZSBkJ2Vzc2FpIGdyYXR1aXQ8L3RpdGxlPlxuICA8c3R5bGU+XG4gICAgYm9keSB7IGZvbnQtZmFtaWx5OiBBcmlhbCwgc2Fucy1zZXJpZjsgbGluZS1oZWlnaHQ6IDEuNjsgY29sb3I6ICMzMzM7IH1cbiAgICAuY29udGFpbmVyIHsgbWF4LXdpZHRoOiA2MDBweDsgbWFyZ2luOiAwIGF1dG87IHBhZGRpbmc6IDIwcHg7IH1cbiAgICAuaGVhZGVyIHsgYmFja2dyb3VuZC1jb2xvcjogIzI1NjNlYjsgY29sb3I6IHdoaXRlOyBwYWRkaW5nOiAyMHB4OyB0ZXh0LWFsaWduOiBjZW50ZXI7IH1cbiAgICAuY29udGVudCB7IHBhZGRpbmc6IDIwcHg7IGJhY2tncm91bmQtY29sb3I6ICNmOWZhZmI7IH1cbiAgICAuc2VjdGlvbiB7IG1hcmdpbi1ib3R0b206IDIwcHg7IH1cbiAgICAuc2VjdGlvbiBoMyB7IGNvbG9yOiAjMjU2M2ViOyBtYXJnaW4tYm90dG9tOiAxMHB4OyB9XG4gICAgLmluZm8tZ3JpZCB7IGRpc3BsYXk6IGdyaWQ7IGdyaWQtdGVtcGxhdGUtY29sdW1uczogMWZyIDJmcjsgZ2FwOiAxMHB4OyBtYXJnaW4tYm90dG9tOiAxMHB4OyB9XG4gICAgLmxhYmVsIHsgZm9udC13ZWlnaHQ6IGJvbGQ7IH1cbiAgICAuaGlnaGxpZ2h0IHsgYmFja2dyb3VuZC1jb2xvcjogI2RiZWFmZTsgcGFkZGluZzogMTVweDsgYm9yZGVyLXJhZGl1czogNXB4OyB9XG4gICAgLmZvb3RlciB7IHRleHQtYWxpZ246IGNlbnRlcjsgY29sb3I6ICM2NjY7IGZvbnQtc2l6ZTogMTJweDsgbWFyZ2luLXRvcDogMzBweDsgfVxuICA8L3N0eWxlPlxuPC9oZWFkPlxuPGJvZHk+XG4gIDxkaXYgY2xhc3M9XCJjb250YWluZXJcIj5cbiAgICA8ZGl2IGNsYXNzPVwiaGVhZGVyXCI+XG4gICAgICA8aDE+Tm91dmVsbGUgZGVtYW5kZSBkJ2Vzc2FpIGdyYXR1aXQ8L2gxPlxuICAgICAgPHA+S292ZW8gR2VzdGlvbjwvcD5cbiAgICA8L2Rpdj5cbiAgICBcbiAgICA8ZGl2IGNsYXNzPVwiY29udGVudFwiPlxuICAgICAgPGRpdiBjbGFzcz1cInNlY3Rpb25cIj5cbiAgICAgICAgPGgzPkluZm9ybWF0aW9ucyBkdSBjb250YWN0PC9oMz5cbiAgICAgICAgPGRpdiBjbGFzcz1cImluZm8tZ3JpZFwiPlxuICAgICAgICAgIDxzcGFuIGNsYXNzPVwibGFiZWxcIj5Ob206PC9zcGFuPlxuICAgICAgICAgIDxzcGFuPiR7ZGF0YS5maXJzdE5hbWV9ICR7ZGF0YS5sYXN0TmFtZX08L3NwYW4+XG4gICAgICAgICAgPHNwYW4gY2xhc3M9XCJsYWJlbFwiPkVudHJlcHJpc2U6PC9zcGFuPlxuICAgICAgICAgIDxzcGFuPiR7ZGF0YS5jb21wYW55fTwvc3Bhbj5cbiAgICAgICAgICA8c3BhbiBjbGFzcz1cImxhYmVsXCI+Q291cnJpZWw6PC9zcGFuPlxuICAgICAgICAgIDxzcGFuPjxhIGhyZWY9XCJtYWlsdG86JHtkYXRhLmVtYWlsfVwiPiR7ZGF0YS5lbWFpbH08L2E+PC9zcGFuPlxuICAgICAgICAgIDxzcGFuIGNsYXNzPVwibGFiZWxcIj5UXFx4RTlsXFx4RTlwaG9uZTo8L3NwYW4+XG4gICAgICAgICAgPHNwYW4+PGEgaHJlZj1cInRlbDoke2RhdGEucGhvbmV9XCI+JHtkYXRhLnBob25lfTwvYT48L3NwYW4+XG4gICAgICAgIDwvZGl2PlxuICAgICAgPC9kaXY+XG5cbiAgICAgICR7ZGF0YS5hZGRyZXNzIHx8IGRhdGEuY2l0eSB8fCBkYXRhLnByb3ZpbmNlIHx8IGRhdGEucG9zdGFsQ29kZSA/IGBcbiAgICAgIDxkaXYgY2xhc3M9XCJzZWN0aW9uXCI+XG4gICAgICAgIDxoMz5BZHJlc3NlPC9oMz5cbiAgICAgICAgPGRpdiBjbGFzcz1cImluZm8tZ3JpZFwiPlxuICAgICAgICAgICR7ZGF0YS5hZGRyZXNzID8gYDxzcGFuIGNsYXNzPVwibGFiZWxcIj5BZHJlc3NlOjwvc3Bhbj48c3Bhbj4ke2RhdGEuYWRkcmVzc308L3NwYW4+YCA6IFwiXCJ9XG4gICAgICAgICAgJHtkYXRhLmNpdHkgPyBgPHNwYW4gY2xhc3M9XCJsYWJlbFwiPlZpbGxlOjwvc3Bhbj48c3Bhbj4ke2RhdGEuY2l0eX08L3NwYW4+YCA6IFwiXCJ9XG4gICAgICAgICAgJHtkYXRhLnByb3ZpbmNlID8gYDxzcGFuIGNsYXNzPVwibGFiZWxcIj5Qcm92aW5jZTo8L3NwYW4+PHNwYW4+JHtkYXRhLnByb3ZpbmNlfTwvc3Bhbj5gIDogXCJcIn1cbiAgICAgICAgICAke2RhdGEucG9zdGFsQ29kZSA/IGA8c3BhbiBjbGFzcz1cImxhYmVsXCI+Q29kZSBwb3N0YWw6PC9zcGFuPjxzcGFuPiR7ZGF0YS5wb3N0YWxDb2RlfTwvc3Bhbj5gIDogXCJcIn1cbiAgICAgICAgPC9kaXY+XG4gICAgICA8L2Rpdj5cbiAgICAgIGAgOiBcIlwifVxuXG4gICAgICA8ZGl2IGNsYXNzPVwic2VjdGlvbiBoaWdobGlnaHRcIj5cbiAgICAgICAgPGgzPkluZm9ybWF0aW9ucyBzdXIgbGVzIHByb3ByaVxceEU5dFxceEU5czwvaDM+XG4gICAgICAgIDxkaXYgY2xhc3M9XCJpbmZvLWdyaWRcIj5cbiAgICAgICAgICA8c3BhbiBjbGFzcz1cImxhYmVsXCI+Tm9tYnJlIGRlIGJcXHhFMnRpbWVudHM6PC9zcGFuPlxuICAgICAgICAgIDxzcGFuPjxzdHJvbmc+JHtkYXRhLm51bWJlck9mQnVpbGRpbmdzfTwvc3Ryb25nPjwvc3Bhbj5cbiAgICAgICAgICA8c3BhbiBjbGFzcz1cImxhYmVsXCI+Tm9tYnJlIGRlIHJcXHhFOXNpZGVuY2VzOjwvc3Bhbj5cbiAgICAgICAgICA8c3Bhbj48c3Ryb25nPiR7ZGF0YS5udW1iZXJPZlJlc2lkZW5jZXN9PC9zdHJvbmc+PC9zcGFuPlxuICAgICAgICA8L2Rpdj5cbiAgICAgIDwvZGl2PlxuXG4gICAgICAke2RhdGEubWVzc2FnZSA/IGBcbiAgICAgIDxkaXYgY2xhc3M9XCJzZWN0aW9uXCI+XG4gICAgICAgIDxoMz5NZXNzYWdlIGFkZGl0aW9ubmVsPC9oMz5cbiAgICAgICAgPHA+JHtkYXRhLm1lc3NhZ2UucmVwbGFjZSgvXFxuL2csIFwiPGJyPlwiKX08L3A+XG4gICAgICA8L2Rpdj5cbiAgICAgIGAgOiBcIlwifVxuICAgICAgXG4gICAgICA8ZGl2IGNsYXNzPVwiZm9vdGVyXCI+XG4gICAgICAgIDxwPkNldHRlIGRlbWFuZGUgYSBcXHhFOXRcXHhFOSBzb3VtaXNlIHZpYSBsZSBzaXRlIHdlYiBLb3ZlbyBHZXN0aW9uPC9wPlxuICAgICAgICA8cD5EYXRlOiAkeygvKiBAX19QVVJFX18gKi8gbmV3IERhdGUoKSkudG9Mb2NhbGVEYXRlU3RyaW5nKFwiZnItQ0FcIiwge1xuICAgICAgeWVhcjogXCJudW1lcmljXCIsXG4gICAgICBtb250aDogXCJsb25nXCIsXG4gICAgICBkYXk6IFwibnVtZXJpY1wiLFxuICAgICAgaG91cjogXCIyLWRpZ2l0XCIsXG4gICAgICBtaW51dGU6IFwiMi1kaWdpdFwiLFxuICAgICAgdGltZVpvbmU6IFwiQW1lcmljYS9Ub3JvbnRvXCJcbiAgICB9KX08L3A+XG4gICAgICA8L2Rpdj5cbiAgICA8L2Rpdj5cbiAgPC9kaXY+XG48L2JvZHk+XG48L2h0bWw+XG4gICAgYC50cmltKCk7XG4gICAgY29uc3QgZW1haWxEYXRhID0ge1xuICAgICAgdG86IFwiaW5mb0Brb3Zlby1nZXN0aW9uLmNvbVwiLFxuICAgICAgZnJvbToge1xuICAgICAgICBlbWFpbDogXCJub3JlcGx5QGtvdmVvLWdlc3Rpb24uY29tXCIsXG4gICAgICAgIG5hbWU6IFwiS292ZW8gR2VzdGlvbiAtIERlbWFuZGVzIGQnZXNzYWlcIlxuICAgICAgfSxcbiAgICAgIHJlcGx5VG86IHtcbiAgICAgICAgZW1haWw6IGRhdGEuZW1haWwsXG4gICAgICAgIG5hbWU6IGAke2RhdGEuZmlyc3ROYW1lfSAke2RhdGEubGFzdE5hbWV9YFxuICAgICAgfSxcbiAgICAgIHN1YmplY3Q6IGVtYWlsU3ViamVjdCxcbiAgICAgIHRleHQ6IGVtYWlsVGV4dCxcbiAgICAgIGh0bWw6IGVtYWlsSHRtbCxcbiAgICAgIHRyYWNraW5nU2V0dGluZ3M6IHtcbiAgICAgICAgY2xpY2tUcmFja2luZzogeyBlbmFibGU6IGZhbHNlIH0sXG4gICAgICAgIG9wZW5UcmFja2luZzogeyBlbmFibGU6IGZhbHNlIH0sXG4gICAgICAgIHN1YnNjcmlwdGlvblRyYWNraW5nOiB7IGVuYWJsZTogZmFsc2UgfVxuICAgICAgfSxcbiAgICAgIG1haWxTZXR0aW5nczoge1xuICAgICAgICBzYW5kYm94TW9kZTogeyBlbmFibGU6IGZhbHNlIH1cbiAgICAgIH1cbiAgICB9O1xuICAgIGF3YWl0IG1haWxTZXJ2aWNlLnNlbmQoZW1haWxEYXRhKTtcbiAgICBjb25zb2xlLmxvZyhgXFx1MjcwNSBUcmlhbCByZXF1ZXN0IHNlbnQgc3VjY2Vzc2Z1bGx5IGZvciAke2RhdGEuY29tcGFueX0gKCR7ZGF0YS5lbWFpbH0pYCk7XG4gICAgcmVzLnN0YXR1cygyMDApLmpzb24oe1xuICAgICAgbWVzc2FnZTogXCJUcmlhbCByZXF1ZXN0IHNlbnQgc3VjY2Vzc2Z1bGx5XCIsXG4gICAgICBzdWNjZXNzOiB0cnVlXG4gICAgfSk7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcihcIlxcdTI3NEMgRXJyb3IgcHJvY2Vzc2luZyB0cmlhbCByZXF1ZXN0OlwiLCBlcnJvcik7XG4gICAgaWYgKGVycm9yLmNvZGUpIHtcbiAgICAgIGNvbnN0IHNnRXJyb3IgPSBlcnJvcjtcbiAgICAgIGNvbnNvbGUuZXJyb3IoXCJTZW5kR3JpZCBlcnJvciBkZXRhaWxzOlwiLCBzZ0Vycm9yKTtcbiAgICAgIHJldHVybiByZXMuc3RhdHVzKDUwMCkuanNvbih7XG4gICAgICAgIG1lc3NhZ2U6IFwiRmFpbGVkIHRvIHNlbmQgdHJpYWwgcmVxdWVzdCBlbWFpbFwiLFxuICAgICAgICBlcnJvcjogXCJFbWFpbCBzZXJ2aWNlIGVycm9yXCJcbiAgICAgIH0pO1xuICAgIH1cbiAgICByZXMuc3RhdHVzKDUwMCkuanNvbih7XG4gICAgICBtZXNzYWdlOiBcIkludGVybmFsIHNlcnZlciBlcnJvclwiLFxuICAgICAgZXJyb3I6IFwiRmFpbGVkIHRvIHByb2Nlc3MgcmVxdWVzdFwiXG4gICAgfSk7XG4gIH1cbn0pO1xuZnVuY3Rpb24gcmVnaXN0ZXJUcmlhbFJlcXVlc3RSb3V0ZXMoYXBwMikge1xuICBhcHAyLnVzZShcIi9hcGlcIiwgcm91dGVyKTtcbn1cblxuLy8gc2VydmVyL3JvdXRlcy50c1xuaW1wb3J0IG11bHRlcjQgZnJvbSBcIm11bHRlclwiO1xuaW1wb3J0IHBhdGg1IGZyb20gXCJwYXRoXCI7XG5pbXBvcnQgZnM2IGZyb20gXCJmc1wiO1xudmFyIHN0b3JhZ2UyID0gbXVsdGVyNC5kaXNrU3RvcmFnZSh7XG4gIGRlc3RpbmF0aW9uOiAocmVxLCBmaWxlLCBjYikgPT4ge1xuICAgIGNvbnN0IHVwbG9hZERpciA9IHBhdGg1LmpvaW4ocHJvY2Vzcy5jd2QoKSwgXCJ1cGxvYWRzXCIsIFwiZGVtYW5kc1wiKTtcbiAgICBpZiAoIWZzNi5leGlzdHNTeW5jKHVwbG9hZERpcikpIHtcbiAgICAgIGZzNi5ta2RpclN5bmModXBsb2FkRGlyLCB7IHJlY3Vyc2l2ZTogdHJ1ZSB9KTtcbiAgICB9XG4gICAgY2IobnVsbCwgdXBsb2FkRGlyKTtcbiAgfSxcbiAgZmlsZW5hbWU6IChyZXEsIGZpbGUsIGNiKSA9PiB7XG4gICAgY29uc3QgdW5pcXVlU3VmZml4ID0gRGF0ZS5ub3coKSArIFwiLVwiICsgTWF0aC5yb3VuZChNYXRoLnJhbmRvbSgpICogMWU5KTtcbiAgICBjb25zdCBleHRlbnNpb24gPSBwYXRoNS5leHRuYW1lKGZpbGUub3JpZ2luYWxuYW1lKTtcbiAgICBjYihudWxsLCBgZGVtYW5kLSR7dW5pcXVlU3VmZml4fSR7ZXh0ZW5zaW9ufWApO1xuICB9XG59KTtcbnZhciB1cGxvYWQ0ID0gbXVsdGVyNCh7XG4gIHN0b3JhZ2U6IHN0b3JhZ2UyLFxuICBsaW1pdHM6IHtcbiAgICBmaWxlU2l6ZTogMTAgKiAxMDI0ICogMTAyNCxcbiAgICAvLyAxME1CIGxpbWl0XG4gICAgZmlsZXM6IDVcbiAgICAvLyBNYXhpbXVtIDUgZmlsZXNcbiAgfSxcbiAgZmlsZUZpbHRlcjogKHJlcSwgZmlsZSwgY2IpID0+IHtcbiAgICBjb25zdCBhbGxvd2VkVHlwZXMgPSBbXG4gICAgICBcImltYWdlL2pwZWdcIixcbiAgICAgIFwiaW1hZ2UvanBnXCIsXG4gICAgICBcImltYWdlL3BuZ1wiLFxuICAgICAgXCJpbWFnZS9naWZcIixcbiAgICAgIFwiaW1hZ2Uvd2VicFwiLFxuICAgICAgXCJhcHBsaWNhdGlvbi9wZGZcIixcbiAgICAgIFwiYXBwbGljYXRpb24vbXN3b3JkXCIsXG4gICAgICBcImFwcGxpY2F0aW9uL3ZuZC5vcGVueG1sZm9ybWF0cy1vZmZpY2Vkb2N1bWVudC53b3JkcHJvY2Vzc2luZ21sLmRvY3VtZW50XCIsXG4gICAgICBcInRleHQvcGxhaW5cIlxuICAgIF07XG4gICAgaWYgKGFsbG93ZWRUeXBlcy5pbmNsdWRlcyhmaWxlLm1pbWV0eXBlKSkge1xuICAgICAgY2IobnVsbCwgdHJ1ZSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGNiKG5ldyBFcnJvcihgRmlsZSB0eXBlICR7ZmlsZS5taW1ldHlwZX0gbm90IGFsbG93ZWRgKSk7XG4gICAgfVxuICB9XG59KTtcbmFzeW5jIGZ1bmN0aW9uIHJlZ2lzdGVyUm91dGVzKGFwcDIpIHtcbiAgY29uc29sZS5sb2coXCJcXHV7MUY1MDR9IFNldHRpbmcgdXAgc2Vzc2lvbiBtaWRkbGV3YXJlLi4uXCIpO1xuICBhcHAyLnVzZShzZXNzaW9uQ29uZmlnKTtcbiAgY29uc29sZS5sb2coXCJcXHUyNzA1IFNlc3Npb24gbWlkZGxld2FyZSBjb25maWd1cmVkXCIpO1xuICBjb25zb2xlLmxvZyhcIlxcdXsxRjUwNH0gTG9hZGluZyBhdXRoZW50aWNhdGlvbiByb3V0ZXMuLi5cIik7XG4gIHNldHVwQXV0aFJvdXRlcyhhcHAyKTtcbiAgY29uc29sZS5sb2coXCJcXHUyNzA1IEF1dGhlbnRpY2F0aW9uIHJvdXRlcyBsb2FkZWQgb24gL2FwaS9hdXRoL1wiKTtcbiAgY29uc29sZS5sb2coXCJcXHV7MUY1MDR9IExvYWRpbmcgQVBJIHJvdXRlcy4uLlwiKTtcbiAgcmVnaXN0ZXJPcmdhbml6YXRpb25Sb3V0ZXMoYXBwMik7XG4gIHJlZ2lzdGVyVXNlclJvdXRlcyhhcHAyKTtcbiAgcmVnaXN0ZXJCdWlsZGluZ1JvdXRlcyhhcHAyKTtcbiAgcmVnaXN0ZXJEb2N1bWVudFJvdXRlcyhhcHAyKTtcbiAgcmVnaXN0ZXJCdWdSb3V0ZXMoYXBwMik7XG4gIHJlZ2lzdGVyQmlsbFJvdXRlcyhhcHAyKTtcbiAgcmVnaXN0ZXJSZXNpZGVuY2VSb3V0ZXMoYXBwMik7XG4gIHJlZ2lzdGVyRGVtYW5kUm91dGVzKGFwcDIpO1xuICByZWdpc3RlckZlYXR1cmVSZXF1ZXN0Um91dGVzKGFwcDIpO1xuICByZWdpc3RlckNvbnRhY3RSb3V0ZXMoYXBwMik7XG4gIHJlZ2lzdGVyQ29tbW9uU3BhY2VzUm91dGVzKGFwcDIpO1xuICByZWdpc3RlclBlcm1pc3Npb25zUm91dGVzKGFwcDIpO1xuICByZWdpc3RlckRlbW9NYW5hZ2VtZW50Um91dGVzKGFwcDIpO1xuICByZWdpc3RlclRyaWFsUmVxdWVzdFJvdXRlcyhhcHAyKTtcbiAgY29uc29sZS5sb2coXCJcXHUyNzA1IEFsbCBBUEkgcm91dGVzIHJlZ2lzdGVyZWRcIik7XG4gIGFwcDIuZ2V0KFwiL2FwaS9oZWFsdGhcIiwgKHJlcSwgcmVzKSA9PiB7XG4gICAgcmVzLmpzb24oeyBzdGF0dXM6IFwib2tcIiwgdGltZXN0YW1wOiAoLyogQF9fUFVSRV9fICovIG5ldyBEYXRlKCkpLnRvSVNPU3RyaW5nKCkgfSk7XG4gIH0pO1xuICBhcHAyLnBvc3QoXCIvYXBpL3Rlc3RcIiwgKHJlcSwgcmVzKSA9PiB7XG4gICAgcmVzLmpzb24oeyBtZXNzYWdlOiBcIkFQSSB3b3JraW5nXCIsIGJvZHk6IHJlcS5ib2R5IH0pO1xuICB9KTtcbiAgYXBwMi5wb3N0KFwiL2FwaS91cGxvYWRcIiwgcmVxdWlyZUF1dGgsIHVwbG9hZDQuYXJyYXkoXCJmaWxlXCIsIDUpLCBhc3luYyAocmVxLCByZXMpID0+IHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgZmlsZXMgPSByZXEuZmlsZXM7XG4gICAgICBpZiAoIWZpbGVzIHx8IGZpbGVzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oeyBtZXNzYWdlOiBcIk5vIGZpbGVzIHVwbG9hZGVkXCIgfSk7XG4gICAgICB9XG4gICAgICBjb25zdCBmaWxlVXJscyA9IGZpbGVzLm1hcCgoZmlsZSkgPT4ge1xuICAgICAgICByZXR1cm4gYC91cGxvYWRzL2RlbWFuZHMvJHtmaWxlLmZpbGVuYW1lfWA7XG4gICAgICB9KTtcbiAgICAgIGNvbnNvbGUubG9nKGBcXHUyNzA1IFN1Y2Nlc3NmdWxseSB1cGxvYWRlZCAke2ZpbGVzLmxlbmd0aH0gZmlsZXMgZm9yIHVzZXIgJHtyZXEudXNlci5pZH06YCwgZmlsZVVybHMpO1xuICAgICAgcmVzLmpzb24oe1xuICAgICAgICBtZXNzYWdlOiBcIkZpbGVzIHVwbG9hZGVkIHN1Y2Nlc3NmdWxseVwiLFxuICAgICAgICBmaWxlVXJscyxcbiAgICAgICAgZmlsZUNvdW50OiBmaWxlcy5sZW5ndGhcbiAgICAgIH0pO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKFwiXFx1Mjc0QyBGaWxlIHVwbG9hZCBlcnJvcjpcIiwgZXJyb3IpO1xuICAgICAgcmVzLnN0YXR1cyg1MDApLmpzb24oe1xuICAgICAgICBtZXNzYWdlOiBcIkZhaWxlZCB0byB1cGxvYWQgZmlsZXNcIixcbiAgICAgICAgZXJyb3I6IGVycm9yLm1lc3NhZ2VcbiAgICAgIH0pO1xuICAgIH1cbiAgfSk7XG4gIGFwcDIudXNlKFwiL3VwbG9hZHNcIiwgZXhwcmVzczMuc3RhdGljKHBhdGg1LmpvaW4ocHJvY2Vzcy5jd2QoKSwgXCJ1cGxvYWRzXCIpKSk7XG4gIGFwcDIuZ2V0KFwiL2FwaS9kZWJ1Zy9zaW1wbGVcIiwgKHJlcSwgcmVzKSA9PiB7XG4gICAgY29uc29sZS5sb2coXCJcXHV7MUY1MER9IFNpbXBsZSBkZWJ1ZyBlbmRwb2ludCBjYWxsZWRcIik7XG4gICAgcmVzLmpzb24oe1xuICAgICAgc3RhdHVzOiBcIndvcmtpbmdcIixcbiAgICAgIHRpbWVzdGFtcDogKC8qIEBfX1BVUkVfXyAqLyBuZXcgRGF0ZSgpKS50b0lTT1N0cmluZygpLFxuICAgICAgZW52aXJvbm1lbnQ6IHByb2Nlc3MuZW52Lk5PREVfRU5WIHx8IFwidW5rbm93blwiLFxuICAgICAgZGF0YWJhc2VVcmw6IHByb2Nlc3MuZW52LkRBVEFCQVNFX1VSTCA/IFwicHJlc2VudFwiIDogXCJtaXNzaW5nXCJcbiAgICB9KTtcbiAgfSk7XG4gIGFwcDIuZ2V0KFwiL2FwaS9kZWJ1Zy9zdG9yYWdlXCIsIGFzeW5jIChyZXEsIHJlcykgPT4ge1xuICAgIGNvbnN0IHRpbWVzdGFtcDkgPSAoLyogQF9fUFVSRV9fICovIG5ldyBEYXRlKCkpLnRvSVNPU3RyaW5nKCk7XG4gICAgY29uc29sZS5sb2coYFske3RpbWVzdGFtcDl9XSBcXHV7MUY1MER9IFN0b3JhZ2UgZGVidWcgZW5kcG9pbnQgY2FsbGVkYCk7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnNvbGUubG9nKGBbJHt0aW1lc3RhbXA5fV0gXFx1ezFGNEU2fSBUZXN0aW5nIHN0b3JhZ2UgaW1wb3J0Li4uYCk7XG4gICAgICBjb25zdCB7IHN0b3JhZ2U6IHN0b3JhZ2UzIH0gPSBhd2FpdCBQcm9taXNlLnJlc29sdmUoKS50aGVuKCgpID0+IChpbml0X3N0b3JhZ2UoKSwgc3RvcmFnZV9leHBvcnRzKSk7XG4gICAgICBjb25zb2xlLmxvZyhgWyR7dGltZXN0YW1wOX1dIFxcdTI3MDUgU3RvcmFnZSBpbXBvcnRlZCBzdWNjZXNzZnVsbHlgKTtcbiAgICAgIGNvbnNvbGUubG9nKGBbJHt0aW1lc3RhbXA5fV0gXFx1ezFGOUVBfSBUZXN0aW5nIGJhc2ljIHN0b3JhZ2UgbWV0aG9kLi4uYCk7XG4gICAgICBjb25zdCB0ZXN0UmVzdWx0ID0gYXdhaXQgc3RvcmFnZTMuZ2V0RG9jdW1lbnRzKHsgcmVzaWRlbmNlSWQ6IFwiZTI3YWM5MjQtODEyMC00OTA0LWE3OTEtZDFlOWRiNTQ0ZDU4XCIgfSk7XG4gICAgICBjb25zb2xlLmxvZyhgWyR7dGltZXN0YW1wOX1dIFxcdTI3MDUgU3RvcmFnZSB0ZXN0IHN1Y2Nlc3NmdWxgKTtcbiAgICAgIHJlcy5qc29uKHtcbiAgICAgICAgc3VjY2VzczogdHJ1ZSxcbiAgICAgICAgdGltZXN0YW1wOiB0aW1lc3RhbXA5LFxuICAgICAgICBkb2N1bWVudHNDb3VudDogdGVzdFJlc3VsdC5sZW5ndGgsXG4gICAgICAgIHN0b3JhZ2VUeXBlOiBzdG9yYWdlMy5jb25zdHJ1Y3Rvci5uYW1lXG4gICAgICB9KTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgcmVzLnN0YXR1cyg1MDApLmpzb24oe1xuICAgICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgICAgdGltZXN0YW1wOiB0aW1lc3RhbXA5LFxuICAgICAgICBlcnJvcjogZXJyb3IubWVzc2FnZSxcbiAgICAgICAgc3RhY2s6IGVycm9yLnN0YWNrXG4gICAgICB9KTtcbiAgICB9XG4gIH0pO1xuICBhcHAyLmdldChcIi9hcGkvZGVidWcvdXNlci1pbmZvXCIsIGFzeW5jIChyZXEsIHJlcykgPT4ge1xuICAgIHRyeSB7XG4gICAgICBpZiAoIXJlcS5zZXNzaW9uPy51c2VySWQgJiYgIXJlcS5zZXNzaW9uPy51c2VyKSB7XG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMSkuanNvbih7XG4gICAgICAgICAgbWVzc2FnZTogXCJObyBzZXNzaW9uIGZvdW5kXCIsXG4gICAgICAgICAgc2Vzc2lvbjogcmVxLnNlc3Npb25cbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgICBjb25zdCB1c2VyID0gcmVxLnVzZXIgfHwgcmVxLnNlc3Npb24/LnVzZXI7XG4gICAgICBjb25zdCB1c2VySWQgPSByZXEuc2Vzc2lvbj8udXNlcklkO1xuICAgICAgY29uc3QgeyBkYjogZGIyIH0gPSBhd2FpdCBQcm9taXNlLnJlc29sdmUoKS50aGVuKCgpID0+IChpbml0X2RiKCksIGRiX2V4cG9ydHMpKTtcbiAgICAgIGNvbnN0IHsgdXNlcnM6IHVzZXJzNSwgdXNlck9yZ2FuaXphdGlvbnM6IHVzZXJPcmdhbml6YXRpb25zNSwgb3JnYW5pemF0aW9uczogb3JnYW5pemF0aW9uczMgfSA9IGF3YWl0IFByb21pc2UucmVzb2x2ZSgpLnRoZW4oKCkgPT4gKGluaXRfc2NoZW1hKCksIHNjaGVtYV9leHBvcnRzKSk7XG4gICAgICBjb25zdCB7IGVxOiBlcTE1IH0gPSBhd2FpdCBpbXBvcnQoXCJkcml6emxlLW9ybVwiKTtcbiAgICAgIGNvbnN0IHVzZXJGcm9tRGIgPSBhd2FpdCBkYjIuc2VsZWN0KCkuZnJvbSh1c2VyczUpLndoZXJlKGVxMTUodXNlcnM1LmlkLCB1c2VySWQpKTtcbiAgICAgIGNvbnN0IHVzZXJPcmdzID0gYXdhaXQgZGIyLnNlbGVjdCh7XG4gICAgICAgIG9yZ2FuaXphdGlvbklkOiB1c2VyT3JnYW5pemF0aW9uczUub3JnYW5pemF0aW9uSWQsXG4gICAgICAgIG9yZ2FuaXphdGlvbk5hbWU6IG9yZ2FuaXphdGlvbnMzLm5hbWUsXG4gICAgICAgIGNhbkFjY2Vzc0FsbE9yZ2FuaXphdGlvbnM6IHVzZXJPcmdhbml6YXRpb25zNS5jYW5BY2Nlc3NBbGxPcmdhbml6YXRpb25zLFxuICAgICAgICBpc0FjdGl2ZTogdXNlck9yZ2FuaXphdGlvbnM1LmlzQWN0aXZlXG4gICAgICB9KS5mcm9tKHVzZXJPcmdhbml6YXRpb25zNSkuaW5uZXJKb2luKG9yZ2FuaXphdGlvbnMzLCBlcTE1KHVzZXJPcmdhbml6YXRpb25zNS5vcmdhbml6YXRpb25JZCwgb3JnYW5pemF0aW9uczMuaWQpKS53aGVyZShlcTE1KHVzZXJPcmdhbml6YXRpb25zNS51c2VySWQsIHVzZXJJZCkpO1xuICAgICAgcmVzLmpzb24oe1xuICAgICAgICBzZXNzaW9uOiB7XG4gICAgICAgICAgdXNlcklkOiByZXEuc2Vzc2lvbj8udXNlcklkLFxuICAgICAgICAgIGhhc1VzZXI6ICEhdXNlcixcbiAgICAgICAgICB1c2VyUm9sZTogcmVxLnNlc3Npb24/LnVzZXJSb2xlXG4gICAgICAgIH0sXG4gICAgICAgIHVzZXJGcm9tTWlkZGxld2FyZTogdXNlcixcbiAgICAgICAgdXNlckZyb21EYXRhYmFzZTogdXNlckZyb21EYlswXSxcbiAgICAgICAgdXNlck9yZ2FuaXphdGlvbnM6IHVzZXJPcmdzLFxuICAgICAgICByYXdTZXNzaW9uOiByZXEuc2Vzc2lvblxuICAgICAgfSk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIHJlcy5zdGF0dXMoNTAwKS5qc29uKHtcbiAgICAgICAgZXJyb3I6IGVycm9yLm1lc3NhZ2UsXG4gICAgICAgIHN0YWNrOiBlcnJvci5zdGFja1xuICAgICAgfSk7XG4gICAgfVxuICB9KTtcbiAgY29uc3QgZGlzdFBhdGggPSBwYXRoNS5yZXNvbHZlKHByb2Nlc3MuY3dkKCksIFwiZGlzdFwiLCBcInB1YmxpY1wiKTtcbiAgaWYgKGZzNi5leGlzdHNTeW5jKGRpc3RQYXRoKSkge1xuICAgIGNvbnNvbGUubG9nKFwiXFx1MjcwNSBTZXR0aW5nIHVwIHN0YXRpYyBmaWxlIHNlcnZpbmcgZnJvbVwiLCBkaXN0UGF0aCk7XG4gICAgYXBwMi51c2UoZXhwcmVzczMuc3RhdGljKGRpc3RQYXRoLCB7XG4gICAgICAvLyBEaXNhYmxlIGNhY2hpbmcgZm9yIGRldmVsb3BtZW50IHRvIGVuc3VyZSBmcmVzaCBmaWxlc1xuICAgICAgc2V0SGVhZGVyczogKHJlcywgcGF0aDYpID0+IHtcbiAgICAgICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WID09PSBcImRldmVsb3BtZW50XCIpIHtcbiAgICAgICAgICByZXMuc2V0SGVhZGVyKFwiQ2FjaGUtQ29udHJvbFwiLCBcIm5vLWNhY2hlLCBuby1zdG9yZSwgbXVzdC1yZXZhbGlkYXRlXCIpO1xuICAgICAgICAgIHJlcy5zZXRIZWFkZXIoXCJQcmFnbWFcIiwgXCJuby1jYWNoZVwiKTtcbiAgICAgICAgICByZXMuc2V0SGVhZGVyKFwiRXhwaXJlc1wiLCBcIjBcIik7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgaWYgKHBhdGg2LmVuZHNXaXRoKFwiLmh0bWxcIikpIHtcbiAgICAgICAgICAgIHJlcy5zZXRIZWFkZXIoXCJDYWNoZS1Db250cm9sXCIsIFwibm8tY2FjaGUsIG11c3QtcmV2YWxpZGF0ZVwiKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmVzLnNldEhlYWRlcihcIkNhY2hlLUNvbnRyb2xcIiwgXCJwdWJsaWMsIG1heC1hZ2U9MzAwLCBtdXN0LXJldmFsaWRhdGVcIik7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfSkpO1xuICAgIGFwcDIuZ2V0KFwiKlwiLCAocmVxLCByZXMpID0+IHtcbiAgICAgIGlmIChyZXEucGF0aC5zdGFydHNXaXRoKFwiL2FwaS9cIikpIHtcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDA0KS5qc29uKHsgbWVzc2FnZTogXCJBUEkgZW5kcG9pbnQgbm90IGZvdW5kXCIsIGVycm9yOiBcIkFQSSBlbmRwb2ludCBub3QgZm91bmRcIiB9KTtcbiAgICAgIH1cbiAgICAgIGNvbnN0IGluZGV4UGF0aCA9IHBhdGg1LmpvaW4oZGlzdFBhdGgsIFwiaW5kZXguaHRtbFwiKTtcbiAgICAgIGlmIChmczYuZXhpc3RzU3luYyhpbmRleFBhdGgpKSB7XG4gICAgICAgIHJlcy5zZXRIZWFkZXIoXCJDYWNoZS1Db250cm9sXCIsIFwibm8tY2FjaGUsIG5vLXN0b3JlLCBtdXN0LXJldmFsaWRhdGVcIik7XG4gICAgICAgIHJlcy5zZXRIZWFkZXIoXCJQcmFnbWFcIiwgXCJuby1jYWNoZVwiKTtcbiAgICAgICAgcmVzLnNldEhlYWRlcihcIkV4cGlyZXNcIiwgXCIwXCIpO1xuICAgICAgICByZXMuc2VuZEZpbGUoaW5kZXhQYXRoKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJlcy5zdGF0dXMoNDA0KS5zZW5kKFwiQXBwbGljYXRpb24gbm90IGZvdW5kIC0gYnVpbGQgbWlzc2luZ1wiKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfSBlbHNlIHtcbiAgICBjb25zb2xlLmxvZyhcIlxcdTI2QTBcXHVGRTBGIFN0YXRpYyBmaWxlcyBub3QgZm91bmQsIG9ubHkgQVBJIHJvdXRlcyBhdmFpbGFibGVcIik7XG4gICAgYXBwMi5nZXQoXCIqXCIsIChyZXEsIHJlcykgPT4ge1xuICAgICAgaWYgKHJlcS5wYXRoLnN0YXJ0c1dpdGgoXCIvYXBpL1wiKSkge1xuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDQpLmpzb24oeyBtZXNzYWdlOiBcIkFQSSBlbmRwb2ludCBub3QgZm91bmRcIiwgZXJyb3I6IFwiQVBJIGVuZHBvaW50IG5vdCBmb3VuZFwiIH0pO1xuICAgICAgfVxuICAgICAgcmVzLnN0YXR1cyg1MDMpLnNlbmQoXCJBcHBsaWNhdGlvbiBpcyBzdGFydGluZyB1cC4uLlwiKTtcbiAgICB9KTtcbiAgfVxuICBjb25zb2xlLmxvZyhcIlxcdTI3MDUgQWxsIHJvdXRlcyByZWdpc3RlcmVkIHN1Y2Nlc3NmdWxseVwiKTtcbn1cblxuLy8gc2VydmVyL2luZGV4LnRzXG5jb25zb2xlLmxvZyhcIlxcdXsxRjY4MH0gU2VydmVyIHN0YXJ0aW5nIHdpdGggZW5oYW5jZWQgZGVidWdnaW5nLi4uXCIpO1xucHJvY2Vzcy5vbihcInVuY2F1Z2h0RXhjZXB0aW9uXCIsIChlcnJvcikgPT4ge1xuICBjb25zb2xlLmVycm9yKFwiXFx1Mjc0QyBVbmNhdWdodCBFeGNlcHRpb246XCIsIGVycm9yKTtcbiAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcImRldmVsb3BtZW50XCIpIHtcbiAgICBzZXRUaW1lb3V0KCgpID0+IHByb2Nlc3MuZXhpdCgxKSwgMWUzKTtcbiAgfVxufSk7XG5wcm9jZXNzLm9uKFwidW5oYW5kbGVkUmVqZWN0aW9uXCIsIChyZWFzb24sIHByb21pc2UpID0+IHtcbiAgY29uc29sZS5lcnJvcihcIlxcdTI3NEMgVW5oYW5kbGVkIFJlamVjdGlvbiBhdDpcIiwgcHJvbWlzZSwgXCJyZWFzb246XCIsIHJlYXNvbik7XG4gIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJkZXZlbG9wbWVudFwiKSB7XG4gICAgc2V0VGltZW91dCgoKSA9PiBwcm9jZXNzLmV4aXQoMSksIDFlMyk7XG4gIH1cbn0pO1xucHJvY2Vzcy5vbihcIlNJR1RFUk1cIiwgKCkgPT4ge1xuICBjb25zb2xlLmxvZyhcIlxcdXsxRjUwNH0gU0lHVEVSTSByZWNlaXZlZCwgZ3JhY2VmdWxseSBzaHV0dGluZyBkb3duLi4uXCIpO1xuICBpZiAoc2VydmVyKSB7XG4gICAgc2VydmVyLmNsb3NlKCgpID0+IHtcbiAgICAgIGNvbnNvbGUubG9nKFwiXFx1MjcwNSBTZXJ2ZXIgY2xvc2VkIGdyYWNlZnVsbHlcIik7XG4gICAgICBwcm9jZXNzLmV4aXQoMCk7XG4gICAgfSk7XG4gIH1cbn0pO1xucHJvY2Vzcy5vbihcIlNJR0lOVFwiLCAoKSA9PiB7XG4gIGNvbnNvbGUubG9nKFwiXFx1ezFGNTA0fSBTSUdJTlQgcmVjZWl2ZWQsIGdyYWNlZnVsbHkgc2h1dHRpbmcgZG93bi4uLlwiKTtcbiAgaWYgKHNlcnZlcikge1xuICAgIHNlcnZlci5jbG9zZSgoKSA9PiB7XG4gICAgICBjb25zb2xlLmxvZyhcIlxcdTI3MDUgU2VydmVyIGNsb3NlZCBncmFjZWZ1bGx5XCIpO1xuICAgICAgcHJvY2Vzcy5leGl0KDApO1xuICAgIH0pO1xuICB9XG59KTtcbnZhciBhcHAgPSBleHByZXNzNCgpO1xudmFyIHBvcnQgPSBwYXJzZUludChwcm9jZXNzLmVudi5QT1JUIHx8IChwcm9jZXNzLmVudi5OT0RFX0VOViA9PT0gXCJwcm9kdWN0aW9uXCIgPyBcIjgwXCIgOiBcIjUwMDBcIiksIDEwKTtcbnZhciBob3N0ID0gXCIwLjAuMC4wXCI7XG5pZiAoaXNOYU4ocG9ydCkgfHwgcG9ydCA8IDEgfHwgcG9ydCA+IDY1NTM1KSB7XG4gIGNvbnN0IGZhbGxiYWNrID0gcHJvY2Vzcy5lbnYuTk9ERV9FTlYgPT09IFwicHJvZHVjdGlvblwiID8gXCI1MDAwXCIgOiBcIjUwMDBcIjtcbiAgY29uc29sZS5lcnJvcihgSW52YWxpZCBwb3J0IGNvbmZpZ3VyYXRpb24uIFVzaW5nIGRlZmF1bHQgJHtmYWxsYmFja30uYCk7XG4gIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViA9PT0gXCJwcm9kdWN0aW9uXCIgJiYgcHJvY2Vzcy5lbnYuVEVTVF9FTlYgIT09IFwiaW50ZWdyYXRpb25cIikge1xuICAgIHByb2Nlc3MuZXhpdCgxKTtcbiAgfVxufVxuYXBwLnNldChcInRydXN0IHByb3h5XCIsIFtcImxvb3BiYWNrXCIsIFwibGlua2xvY2FsXCIsIFwidW5pcXVlbG9jYWxcIl0pO1xuYXBwLnVzZShoZWxtZXQoe1xuICBjb250ZW50U2VjdXJpdHlQb2xpY3k6IHtcbiAgICBkaXJlY3RpdmVzOiB7XG4gICAgICBkZWZhdWx0U3JjOiBbXCInc2VsZidcIl0sXG4gICAgICBzY3JpcHRTcmM6IFtcIidzZWxmJ1wiLCBcIid1bnNhZmUtaW5saW5lJ1wiLCBcImh0dHBzOi8vcmVwbGl0LmNvbVwiXSxcbiAgICAgIHN0eWxlU3JjOiBbXCInc2VsZidcIiwgXCIndW5zYWZlLWlubGluZSdcIiwgXCJodHRwczovL2ZvbnRzLmdvb2dsZWFwaXMuY29tXCJdLFxuICAgICAgaW1nU3JjOiBbXCInc2VsZidcIiwgXCJkYXRhOlwiLCBcImh0dHBzOlwiXSxcbiAgICAgIGNvbm5lY3RTcmM6IFtcIidzZWxmJ1wiXSxcbiAgICAgIGZvbnRTcmM6IFtcIidzZWxmJ1wiLCBcImh0dHBzOi8vZm9udHMuZ3N0YXRpYy5jb21cIiwgXCJkYXRhOlwiXSxcbiAgICAgIG9iamVjdFNyYzogW1wiJ25vbmUnXCJdLFxuICAgICAgbWVkaWFTcmM6IFtcIidzZWxmJ1wiXSxcbiAgICAgIGZyYW1lU3JjOiBbXCInbm9uZSdcIl1cbiAgICB9XG4gIH0sXG4gIGNyb3NzT3JpZ2luRW1iZWRkZXJQb2xpY3k6IGZhbHNlXG4gIC8vIEFsbG93IGZvciBkZXZlbG9wbWVudFxufSkpO1xuaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WID09PSBcInByb2R1Y3Rpb25cIikge1xuICBhcHAudXNlKChyZXEsIHJlcywgbmV4dCkgPT4ge1xuICAgIGlmIChyZXEudXJsLm1hdGNoKC9cXC4oanN8Y3NzfHBuZ3xqcGd8anBlZ3xnaWZ8aWNvfHN2Z3x3b2ZmfHdvZmYyfHR0Znxlb3QpJC8pKSB7XG4gICAgICByZXMuc2V0KHtcbiAgICAgICAgXCJDYWNoZS1Db250cm9sXCI6IFwicHVibGljLCBtYXgtYWdlPTMxNTM2MDAwLCBpbW11dGFibGVcIixcbiAgICAgICAgLy8gMSB5ZWFyIGZvciBoYXNoZWQgYXNzZXRzXG4gICAgICAgIFwiRVRhZ1wiOiBgXCIke0RhdGUubm93KCl9LSR7TWF0aC5yYW5kb20oKX1cImBcbiAgICAgICAgLy8gR2VuZXJhdGUgdW5pcXVlIEVUYWdcbiAgICAgIH0pO1xuICAgIH0gZWxzZSBpZiAocmVxLnVybC5tYXRjaCgvXFwuaHRtbCQvKSkge1xuICAgICAgcmVzLnNldCh7XG4gICAgICAgIFwiQ2FjaGUtQ29udHJvbFwiOiBcIm5vLWNhY2hlLCBuby1zdG9yZSwgbXVzdC1yZXZhbGlkYXRlXCIsXG4gICAgICAgIFwiUHJhZ21hXCI6IFwibm8tY2FjaGVcIixcbiAgICAgICAgXCJFeHBpcmVzXCI6IFwiMFwiXG4gICAgICB9KTtcbiAgICB9IGVsc2UgaWYgKHJlcS51cmwuc3RhcnRzV2l0aChcIi9hcGkvXCIpKSB7XG4gICAgICByZXMuc2V0KHtcbiAgICAgICAgXCJDYWNoZS1Db250cm9sXCI6IFwibm8tY2FjaGUsIG5vLXN0b3JlLCBtdXN0LXJldmFsaWRhdGVcIixcbiAgICAgICAgXCJQcmFnbWFcIjogXCJuby1jYWNoZVwiLFxuICAgICAgICBcIkV4cGlyZXNcIjogXCIwXCIsXG4gICAgICAgIFwiRVRhZ1wiOiBgXCJhcGktJHtEYXRlLm5vdygpfS0ke01hdGgucmFuZG9tKCl9XCJgXG4gICAgICB9KTtcbiAgICB9XG4gICAgbmV4dCgpO1xuICB9KTtcbn1cbmFwcC51c2UoKHJlcSwgcmVzLCBuZXh0KSA9PiB7XG4gIGNvbnN0IGhvc3QyID0gcmVxLmdldChcImhvc3RcIikgfHwgcmVxLmdldChcIngtZm9yd2FyZGVkLWhvc3RcIikgfHwgcmVxLmdldChcIngtb3JpZ2luYWwtaG9zdFwiKTtcbiAgY29uc3QgcHJvdG8gPSByZXEuZ2V0KFwieC1mb3J3YXJkZWQtcHJvdG9cIikgfHwgcmVxLnByb3RvY29sO1xuICByZXEuZG9tYWluID0gaG9zdDIgfHwgXCJsb2NhbGhvc3RcIjtcbiAgcmVxLmlzS292ZW9Qcm9kdWN0aW9uID0gaG9zdDI/LmluY2x1ZGVzKFwia292ZW8tZ2VzdGlvbi5jb21cIikgfHwgZmFsc2U7XG4gIGlmIChyZXEuaXNLb3Zlb1Byb2R1Y3Rpb24pIHtcbiAgICBjb25zb2xlLmxvZyhgXFx1ezFGMzEwfSBLb3ZlbyBwcm9kdWN0aW9uIHJlcXVlc3QgZGV0ZWN0ZWQ6ICR7cmVxLmRvbWFpbn0gKCR7cmVxLm1ldGhvZH0gJHtyZXEucGF0aH0pYCk7XG4gIH1cbiAgbmV4dCgpO1xufSk7XG5hcHAudXNlKGV4cHJlc3M0Lmpzb24oeyBsaW1pdDogXCIxMG1iXCIgfSkpO1xuYXBwLnVzZShleHByZXNzNC51cmxlbmNvZGVkKHsgZXh0ZW5kZWQ6IHRydWUsIGxpbWl0OiBcIjEwbWJcIiB9KSk7XG5hcHAudXNlKChyZXEsIHJlcywgbmV4dCkgPT4ge1xuICBjb25zdCB0aW1lb3V0ID0gcHJvY2Vzcy5lbnYuTk9ERV9FTlYgPT09IFwiZGV2ZWxvcG1lbnRcIiA/IDNlNCA6IDVlMztcbiAgcmVxLnNldFRpbWVvdXQodGltZW91dCwgKCkgPT4ge1xuICAgIGlmICghcmVzLmhlYWRlcnNTZW50KSB7XG4gICAgICBjb25zb2xlLndhcm4oYFxcdTI2QTBcXHVGRTBGIFJlcXVlc3QgdGltZW91dCBhZnRlciAke3RpbWVvdXR9bXM6ICR7cmVxLm1ldGhvZH0gJHtyZXEudXJsfWApO1xuICAgICAgcmVzLnN0YXR1cyg0MDgpLmpzb24oeyBlcnJvcjogXCJSZXF1ZXN0IFRpbWVvdXRcIiwgdXJsOiByZXEudXJsIH0pO1xuICAgIH1cbiAgfSk7XG4gIHJlcy5vbihcImVycm9yXCIsIChlcnIpID0+IHtcbiAgICBjb25zb2xlLmVycm9yKFwiXFx1Mjc0QyBSZXNwb25zZSBlcnJvcjpcIiwgZXJyKTtcbiAgfSk7XG4gIG5leHQoKTtcbn0pO1xuYXBwLmdldChcIi9hcGkvaGVhbHRoXCIsIChyZXEsIHJlcykgPT4ge1xuICByZXMuanNvbih7XG4gICAgc3RhdHVzOiBcImhlYWx0aHlcIixcbiAgICB0aW1lc3RhbXA6ICgvKiBAX19QVVJFX18gKi8gbmV3IERhdGUoKSkudG9JU09TdHJpbmcoKSxcbiAgICB1cHRpbWU6IHByb2Nlc3MudXB0aW1lKCksXG4gICAgZW52aXJvbm1lbnQ6IHByb2Nlc3MuZW52Lk5PREVfRU5WIHx8IFwiZGV2ZWxvcG1lbnRcIlxuICB9KTtcbn0pO1xuYXBwLmdldChcIi9oZWFsdGhcIiwgY3JlYXRlRmFzdEhlYWx0aENoZWNrKCkpO1xuYXBwLmdldChcIi9oZWFsdGh6XCIsIGNyZWF0ZUZhc3RIZWFsdGhDaGVjaygpKTtcbmFwcC5nZXQoXCIvcmVhZHlcIiwgY3JlYXRlRmFzdEhlYWx0aENoZWNrKCkpO1xuYXBwLmdldChcIi9waW5nXCIsIChyZXEsIHJlcykgPT4ge1xuICByZXMuc2V0KFwiQ29ubmVjdGlvblwiLCBcImNsb3NlXCIpO1xuICByZXMuc3RhdHVzKDIwMCkuc2VuZChcInBvbmdcIik7XG59KTtcbmFwcC5nZXQoXCIvc3RhdHVzXCIsIGNyZWF0ZVN0YXR1c0NoZWNrKCkpO1xuYXBwLmdldChcIi9hcGlcIiwgKHJlcSwgcmVzKSA9PiB7XG4gIHJlcy5qc29uKHtcbiAgICBzdGF0dXM6IFwib2tcIixcbiAgICBtZXNzYWdlOiBcIktvdmVvIEdlc3Rpb24gQVBJIGlzIHJ1bm5pbmdcIixcbiAgICB2ZXJzaW9uOiBcIjEuMC4wXCIsXG4gICAgZW52aXJvbm1lbnQ6IHByb2Nlc3MuZW52Lk5PREVfRU5WIHx8IFwiZGV2ZWxvcG1lbnRcIixcbiAgICBwb3J0LFxuICAgIGhvc3RcbiAgfSk7XG59KTtcbmFwcC5nZXQoXCIvYXBpL2hlYWx0aFwiLCAocmVxLCByZXMpID0+IHtcbiAgcmVzLmpzb24oe1xuICAgIHN0YXR1czogXCJoZWFsdGh5XCIsXG4gICAgdGltZXN0YW1wOiAoLyogQF9fUFVSRV9fICovIG5ldyBEYXRlKCkpLnRvSVNPU3RyaW5nKCksXG4gICAgdXB0aW1lOiBwcm9jZXNzLnVwdGltZSgpLFxuICAgIGVudmlyb25tZW50OiBwcm9jZXNzLmVudi5OT0RFX0VOViB8fCBcImRldmVsb3BtZW50XCIsXG4gICAgcG9ydCxcbiAgICBob3N0XG4gIH0pO1xufSk7XG52YXIgc2VydmVyO1xuaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInRlc3RcIiAmJiAhcHJvY2Vzcy5lbnYuSkVTVF9XT1JLRVJfSUQpIHtcbiAgdHJ5IHtcbiAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgPT09IFwicHJvZHVjdGlvblwiKSB7XG4gICAgICBsb2coXCJcXHV7MUYzRUR9IFByb2R1Y3Rpb24gbW9kZSBkZXRlY3RlZCAtIGFwcGx5aW5nIHByb2R1Y3Rpb24gY29uZmlndXJhdGlvbnNcIik7XG4gICAgICBpZiAoIXByb2Nlc3MuZW52LkRBVEFCQVNFX1VSTCkge1xuICAgICAgICBsb2coXCJcXHUyNzRDIERBVEFCQVNFX1VSTCBpcyByZXF1aXJlZCBpbiBwcm9kdWN0aW9uXCIsIFwiZXJyb3JcIik7XG4gICAgICAgIHByb2Nlc3MuZXhpdCgxKTtcbiAgICAgIH1cbiAgICAgIHByb2Nlc3MuZW52Lk5PREVfVExTX1JFSkVDVF9VTkFVVEhPUklaRUQgPSBcIjFcIjtcbiAgICAgIGxvZyhcIlxcdTI3MDUgUHJvZHVjdGlvbiBjaGVja3MgcGFzc2VkXCIpO1xuICAgIH1cbiAgICBzZXJ2ZXIgPSBhcHAubGlzdGVuKHBvcnQsIGhvc3QsIGFzeW5jICgpID0+IHtcbiAgICAgIGxvZyhgXFx1ezFGNjgwfSBTZXJ2ZXIgcmVhZHkgYW5kIGhlYWx0aCBjaGVja3MgYXZhaWxhYmxlIG9uIHBvcnQgJHtwb3J0fWApO1xuICAgICAgbG9nKGBcXHV7MUYzMTB9IEhlYWx0aCBjaGVjayBVUkxzOmApO1xuICAgICAgbG9nKGAgICAtIGh0dHA6Ly8ke2hvc3R9OiR7cG9ydH0vaGVhbHRoYCk7XG4gICAgICBsb2coYCAgIC0gaHR0cDovLyR7aG9zdH06JHtwb3J0fS9oZWFsdGh6YCk7XG4gICAgICBsb2coYCAgIC0gaHR0cDovLyR7aG9zdH06JHtwb3J0fS9yZWFkeWApO1xuICAgICAgbG9nKGAgICAtIGh0dHA6Ly8ke2hvc3R9OiR7cG9ydH0vcGluZ2ApO1xuICAgICAgbG9nKGAgICAtIGh0dHA6Ly8ke2hvc3R9OiR7cG9ydH0vc3RhdHVzYCk7XG4gICAgICBsb2coYCAgIC0gaHR0cDovLyR7aG9zdH06JHtwb3J0fS9hcGkvaGVhbHRoYCk7XG4gICAgICBsb2coYFxcdXsxRjY4MH0gU2VydmVyIGxpc3RlbmluZyBvbiBodHRwOi8vJHtob3N0fToke3BvcnR9IC0gSGVhbHRoIGNoZWNrcyByZWFkeWApO1xuICAgICAgbG9nKGBcXHV7MUY1Mjd9IEVudmlyb25tZW50OiAke3Byb2Nlc3MuZW52Lk5PREVfRU5WIHx8IFwiZGV2ZWxvcG1lbnRcIn1gKTtcbiAgICAgIGxvZyhcbiAgICAgICAgYFxcdXsxRjNEN31cXHVGRTBGICBCdWlsZCBtb2RlOiAke3Byb2Nlc3MuZW52Lk5PREVfRU5WID09PSBcInByb2R1Y3Rpb25cIiA/IFwiUHJvZHVjdGlvblwiIDogXCJEZXZlbG9wbWVudFwifWBcbiAgICAgICk7XG4gICAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgPT09IFwiZGV2ZWxvcG1lbnRcIikge1xuICAgICAgICBsb2coXCJcXHV7MUY1MDR9IERldmVsb3BtZW50IG1vZGU6IFNldHRpbmcgdXAgZnJvbnRlbmQgaW1tZWRpYXRlbHkuLi5cIik7XG4gICAgICAgIHNldFRpbWVvdXQoYXN5bmMgKCkgPT4ge1xuICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICBhd2FpdCBsb2FkRnVsbEFwcGxpY2F0aW9uKCk7XG4gICAgICAgICAgICBsb2coXCJcXHUyNzA1IERldmVsb3BtZW50IHNldHVwIGNvbXBsZXRlIHdpdGggZnJvbnRlbmQgc2VydmluZ1wiKTtcbiAgICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgbG9nKGBcXHUyNzRDIEZyb250ZW5kIHNldHVwIGZhaWxlZDogJHtlcnJvci5tZXNzYWdlfWAsIFwiZXJyb3JcIik7XG4gICAgICAgICAgICBsb2coYFxcdTI3NEMgU3RhY2sgdHJhY2U6ICR7ZXJyb3Iuc3RhY2t9YCwgXCJlcnJvclwiKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0sIDEwMCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBsb2coXCJcXHV7MUY1MDR9IFByb2R1Y3Rpb24gbW9kZTogTG9hZGluZyBhcHBsaWNhdGlvbiBmZWF0dXJlcy4uLlwiKTtcbiAgICAgICAgc2V0VGltZW91dChhc3luYyAoKSA9PiB7XG4gICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGF3YWl0IGxvYWRGdWxsQXBwbGljYXRpb24oKTtcbiAgICAgICAgICAgIGxvZyhcIlxcdTI3MDUgUHJvZHVjdGlvbiBzZXR1cCBjb21wbGV0ZVwiKTtcbiAgICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgbG9nKGBcXHUyNzRDIEFwcGxpY2F0aW9uIGxvYWQgZmFpbGVkIGluIHByb2R1Y3Rpb246ICR7ZXJyb3IubWVzc2FnZX1gLCBcImVycm9yXCIpO1xuICAgICAgICAgICAgbG9nKGBcXHUyNzRDIFN0YWNrIHRyYWNlOiAke2Vycm9yLnN0YWNrfWAsIFwiZXJyb3JcIik7XG4gICAgICAgICAgfVxuICAgICAgICB9LCAxMCk7XG4gICAgICB9XG4gICAgfSk7XG4gICAgc2VydmVyLmtlZXBBbGl2ZVRpbWVvdXQgPSAzZTQ7XG4gICAgc2VydmVyLmhlYWRlcnNUaW1lb3V0ID0gMzVlMztcbiAgICBzZXJ2ZXIucmVxdWVzdFRpbWVvdXQgPSAxZTQ7XG4gICAgc2VydmVyLnRpbWVvdXQgPSAxNWUzO1xuICAgIHNlcnZlci5vbihcImVycm9yXCIsIChlcnJvcikgPT4ge1xuICAgICAgbG9nKGBcXHUyNzRDIFNlcnZlciBlcnJvcjogJHtlcnJvcj8ubWVzc2FnZSB8fCBlcnJvcn1gLCBcImVycm9yXCIpO1xuICAgICAgbG9nKGBcXHUyNzRDIEVycm9yIGNvZGU6ICR7ZXJyb3I/LmNvZGV9YCwgXCJlcnJvclwiKTtcbiAgICAgIGxvZyhgXFx1Mjc0QyBFcnJvciBkZXRhaWxzOiAke0pTT04uc3RyaW5naWZ5KGVycm9yLCBudWxsLCAyKX1gLCBcImVycm9yXCIpO1xuICAgICAgaWYgKGVycm9yPy5jb2RlID09PSBcIkVBRERSSU5VU0VcIikge1xuICAgICAgICBsb2coYFxcdTI3NEMgUG9ydCAke3BvcnR9IGlzIGFscmVhZHkgaW4gdXNlLiBDYW5ub3Qgc3RhcnQgc2VydmVyLmAsIFwiZXJyb3JcIik7XG4gICAgICAgIHByb2Nlc3MuZXhpdCgxKTtcbiAgICAgIH0gZWxzZSBpZiAoZXJyb3I/LmNvZGUgPT09IFwiRUFDQ0VTXCIpIHtcbiAgICAgICAgbG9nKGBcXHUyNzRDIFBlcm1pc3Npb24gZGVuaWVkIGZvciBwb3J0ICR7cG9ydH0uIFRyeSBhIGRpZmZlcmVudCBwb3J0LmAsIFwiZXJyb3JcIik7XG4gICAgICAgIHByb2Nlc3MuZXhpdCgxKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGxvZyhgXFx1Mjc0QyBVbmV4cGVjdGVkIHNlcnZlciBlcnJvciBvY2N1cnJlZC5gLCBcImVycm9yXCIpO1xuICAgICAgICBwcm9jZXNzLmV4aXQoMSk7XG4gICAgICB9XG4gICAgfSk7XG4gICAgc2VydmVyLm9uKFwibGlzdGVuaW5nXCIsICgpID0+IHtcbiAgICAgIGNvbnN0IGFkZHIgPSBzZXJ2ZXIuYWRkcmVzcygpO1xuICAgICAgbG9nKGBcXHUyNzA1IFNlcnZlciBzdWNjZXNzZnVsbHkgYm91bmQgdG8gJHthZGRyPy5hZGRyZXNzfToke2FkZHI/LnBvcnR9YCk7XG4gICAgICBsb2coYFxcdTI3MDUgU2VydmVyIHJlYWR5IGZvciBjb25uZWN0aW9uc2ApO1xuICAgIH0pO1xuICAgIHByb2Nlc3Mub24oXCJTSUdURVJNXCIsICgpID0+IHtcbiAgICAgIGxvZyhcIlNJR1RFUk0gcmVjZWl2ZWQsIHNodXR0aW5nIGRvd24gZ3JhY2VmdWxseVwiKTtcbiAgICAgIHNlcnZlci5jbG9zZSgoKSA9PiB7XG4gICAgICAgIGxvZyhcIlNlcnZlciBjbG9zZWRcIik7XG4gICAgICAgIHByb2Nlc3MuZXhpdCgwKTtcbiAgICAgIH0pO1xuICAgICAgc2V0VGltZW91dCgoKSA9PiBwcm9jZXNzLmV4aXQoMSksIDFlNCk7XG4gICAgfSk7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgbG9nKGBcXHUyNzRDIENyaXRpY2FsIGZhaWx1cmUgc3RhcnRpbmcgc2VydmVyOiAke2Vycm9yLm1lc3NhZ2V9YCwgXCJlcnJvclwiKTtcbiAgICBsb2coYFxcdTI3NEMgRXJyb3Igc3RhY2s6ICR7ZXJyb3Iuc3RhY2t9YCwgXCJlcnJvclwiKTtcbiAgICBsb2coYFxcdTI3NEMgRW52aXJvbm1lbnQ6ICR7cHJvY2Vzcy5lbnYuTk9ERV9FTlZ9YCwgXCJlcnJvclwiKTtcbiAgICBsb2coYFxcdTI3NEMgUG9ydDogJHtwb3J0fWAsIFwiZXJyb3JcIik7XG4gICAgbG9nKGBcXHUyNzRDIEhvc3Q6ICR7aG9zdH1gLCBcImVycm9yXCIpO1xuICAgIHByb2Nlc3MuZXhpdCgxKTtcbiAgfVxufVxucHJvY2Vzcy5vbihcInVuY2F1Z2h0RXhjZXB0aW9uXCIsIChlcnJvcikgPT4ge1xuICBsb2coYFxcdTI3NEMgVW5jYXVnaHQgRXhjZXB0aW9uOiAke2Vycm9yLm1lc3NhZ2V9YCwgXCJlcnJvclwiKTtcbiAgbG9nKGBcXHUyNzRDIFN0YWNrOiAke2Vycm9yLnN0YWNrfWAsIFwiZXJyb3JcIik7XG4gIHByb2Nlc3MuZXhpdCgxKTtcbn0pO1xucHJvY2Vzcy5vbihcInVuaGFuZGxlZFJlamVjdGlvblwiLCAocmVhc29uLCBwcm9taXNlKSA9PiB7XG4gIGxvZyhgXFx1Mjc0QyBVbmhhbmRsZWQgUmVqZWN0aW9uIGF0OiAke3Byb21pc2V9YCwgXCJlcnJvclwiKTtcbiAgbG9nKGBcXHUyNzRDIFJlYXNvbjogJHtyZWFzb259YCwgXCJlcnJvclwiKTtcbiAgcHJvY2Vzcy5leGl0KDEpO1xufSk7XG5pZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgPT09IFwicHJvZHVjdGlvblwiKSB7XG4gIHNldEludGVydmFsKCgpID0+IHtcbiAgICBjb25zdCBtZW1Vc2FnZSA9IHByb2Nlc3MubWVtb3J5VXNhZ2UoKTtcbiAgICBjb25zdCBtZW1NQiA9IE1hdGgucm91bmQobWVtVXNhZ2UucnNzIC8gMTAyNCAvIDEwMjQpO1xuICAgIGxvZyhgXFx1ezFGNENBfSBNZW1vcnkgdXNhZ2U6ICR7bWVtTUJ9TUJgKTtcbiAgfSwgNmU0KTtcbn1cbmFzeW5jIGZ1bmN0aW9uIGxvYWRGdWxsQXBwbGljYXRpb24oKSB7XG4gIHRyeSB7XG4gICAgbG9nKFwiXFx1ezFGNTA0fSBMb2FkaW5nIGZ1bGwgYXBwbGljYXRpb24gZmVhdHVyZXMuLi5cIik7XG4gICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WID09PSBcInByb2R1Y3Rpb25cIikge1xuICAgICAgbG9nKFwiXFx1ezFGNTBEfSBQcm9kdWN0aW9uIHZhbGlkYXRpb246IENoZWNraW5nIGFwcGxpY2F0aW9uIHJlcXVpcmVtZW50cy4uLlwiKTtcbiAgICAgIGNvbnN0IHJlcXVpcmVkRW52VmFycyA9IFtcIkRBVEFCQVNFX1VSTFwiXTtcbiAgICAgIGZvciAoY29uc3QgZW52VmFyIG9mIHJlcXVpcmVkRW52VmFycykge1xuICAgICAgICBpZiAoIXByb2Nlc3MuZW52W2VudlZhcl0pIHtcbiAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYE1pc3NpbmcgcmVxdWlyZWQgZW52aXJvbm1lbnQgdmFyaWFibGU6ICR7ZW52VmFyfWApO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBsb2coXCJcXHUyNzA1IFByb2R1Y3Rpb24gZW52aXJvbm1lbnQgdmFsaWRhdGlvbiBwYXNzZWRcIik7XG4gICAgfVxuICAgIGxvZyhcIlxcdXsxRjRFNX0gU2V0dGluZyB1cCBlc3NlbnRpYWwgQVBJIHJvdXRlcy4uLlwiKTtcbiAgICB0cnkge1xuICAgICAgYXdhaXQgcmVnaXN0ZXJSb3V0ZXMoYXBwKTtcbiAgICAgIGxvZyhcIlxcdTI3MDUgRnVsbCBhcHBsaWNhdGlvbiByb3V0ZXMgbG9hZGVkIGluY2x1ZGluZyBhdXRoZW50aWNhdGlvblwiKTtcbiAgICB9IGNhdGNoIChyb3V0ZXNFcnJvcikge1xuICAgICAgbG9nKGBcXHUyNzRDIEZhaWxlZCB0byBsb2FkIGZ1bGwgcm91dGVzOiAke3JvdXRlc0Vycm9yLm1lc3NhZ2V9YCwgXCJlcnJvclwiKTtcbiAgICAgIGFwcC5nZXQoXCIvYXBpL2hlYWx0aFwiLCAocmVxLCByZXMpID0+IHtcbiAgICAgICAgcmVzLmpzb24oeyBzdGF0dXM6IFwib2tcIiwgdGltZXN0YW1wOiAoLyogQF9fUFVSRV9fICovIG5ldyBEYXRlKCkpLnRvSVNPU3RyaW5nKCkgfSk7XG4gICAgICB9KTtcbiAgICAgIGFwcC5wb3N0KFwiL2FwaS90ZXN0XCIsIChyZXEsIHJlcykgPT4ge1xuICAgICAgICByZXMuanNvbih7IG1lc3NhZ2U6IFwiQVBJIHdvcmtpbmdcIiwgYm9keTogcmVxLmJvZHkgfSk7XG4gICAgICB9KTtcbiAgICAgIGxvZyhcIlxcdTI3MDUgRXNzZW50aWFsIEFQSSByb3V0ZXMgbG9hZGVkIChtaW5pbWFsIHNldHVwKVwiKTtcbiAgICB9XG4gICAgY29uc3QgZnM3ID0gYXdhaXQgaW1wb3J0KFwiZnNcIik7XG4gICAgY29uc3QgcGF0aE1vZHVsZSA9IGF3YWl0IGltcG9ydChcInBhdGhcIik7XG4gICAgY29uc3QgaGFzUHJvZHVjdGlvbkJ1aWxkID0gZnM3LmV4aXN0c1N5bmMocGF0aE1vZHVsZS5yZXNvbHZlKHByb2Nlc3MuY3dkKCksIFwiZGlzdFwiLCBcInB1YmxpY1wiKSk7XG4gICAgY29uc3QgaXNBY3R1YWxQcm9kdWN0aW9uID0gcHJvY2Vzcy5lbnYuTk9ERV9FTlYgPT09IFwicHJvZHVjdGlvblwiICYmIChoYXNQcm9kdWN0aW9uQnVpbGQgfHwgcHJvY2Vzcy5lbnYuRk9SQ0VfUFJPRFVDVElPTl9TRVJWRSA9PT0gXCJ0cnVlXCIpO1xuICAgIGNvbnN0IGlzVml0ZURldk1vZGUgPSAhaXNBY3R1YWxQcm9kdWN0aW9uO1xuICAgIGxvZyhcbiAgICAgIGBcXHV7MUY1MER9IEVudmlyb25tZW50IGNoZWNrOiBOT0RFX0VOVj0ke3Byb2Nlc3MuZW52Lk5PREVfRU5WfSwgUkVQTElUX0RPTUFJTlM9JHshIXByb2Nlc3MuZW52LlJFUExJVF9ET01BSU5TfSwgaXNWaXRlRGV2TW9kZT0ke2lzVml0ZURldk1vZGV9YFxuICAgICk7XG4gICAgaWYgKGlzVml0ZURldk1vZGUpIHtcbiAgICAgIGxvZyhcIlxcdXsxRjUwNH0gU2V0dGluZyB1cCBWaXRlIGRldmVsb3BtZW50IHNlcnZlci4uLlwiKTtcbiAgICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IHsgc2V0dXBWaXRlOiBzZXR1cFZpdGUyIH0gPSBhd2FpdCBpbml0X3ZpdGUoKS50aGVuKCgpID0+IHZpdGVfZXhwb3J0cyk7XG4gICAgICAgIGF3YWl0IHNldHVwVml0ZTIoYXBwLCBzZXJ2ZXIpO1xuICAgICAgICBsb2coXCJcXHUyNzA1IFZpdGUgZGV2ZWxvcG1lbnQgc2VydmVyIGNvbmZpZ3VyZWRcIik7XG4gICAgICB9IGNhdGNoIChmcm9udGVuZEVycm9yKSB7XG4gICAgICAgIGxvZyhgXFx1Mjc0QyBWaXRlIHNldHVwIGZhaWxlZDogJHtmcm9udGVuZEVycm9yLm1lc3NhZ2V9YCwgXCJlcnJvclwiKTtcbiAgICAgICAgdGhyb3cgZnJvbnRlbmRFcnJvcjtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgbG9nKFwiXFx1ezFGNTA0fSBTZXR0aW5nIHVwIHByb2R1Y3Rpb24gc3RhdGljIGZpbGUgc2VydmluZyAoZGVwbG95bWVudCBkZXRlY3RlZCkuLi5cIik7XG4gICAgICBjb25zdCBkaXN0UGF0aCA9IHBhdGhNb2R1bGUucmVzb2x2ZShwcm9jZXNzLmN3ZCgpLCBcImRpc3RcIiwgXCJwdWJsaWNcIik7XG4gICAgICBpZiAoIWZzNy5leGlzdHNTeW5jKGRpc3RQYXRoKSkge1xuICAgICAgICBsb2coYFxcdTI2QTBcXHVGRTBGIEJ1aWxkIGRpcmVjdG9yeSBub3QgZm91bmQgYXQ6ICR7ZGlzdFBhdGh9YCwgXCJlcnJvclwiKTtcbiAgICAgICAgbG9nKFwiXFx1MjZBMFxcdUZFMEYgQ29udGludWluZyB3aXRob3V0IHN0YXRpYyBmaWxlIHNlcnZpbmcgLSBBUEkgcm91dGVzIHN0aWxsIGF2YWlsYWJsZVwiLCBcImVycm9yXCIpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgbG9nKGBcXHUyNzA1IEZvdW5kIGJ1aWxkIGRpcmVjdG9yeTogJHtkaXN0UGF0aH1gKTtcbiAgICAgIH1cbiAgICAgIGxvZyhcIlxcdTI3MDUgUHJvZHVjdGlvbiBzdGF0aWMgZmlsZSBzZXJ2aW5nIGNvbmZpZ3VyZWQgd2l0aCBBUEkgcm91dGUgcHJvdGVjdGlvblwiKTtcbiAgICB9XG4gICAgY29uc3QgZGJEZWxheSA9IHByb2Nlc3MuZW52Lk5PREVfRU5WID09PSBcInByb2R1Y3Rpb25cIiA/IDUwMCA6IDFlMztcbiAgICBzZXRUaW1lb3V0KGFzeW5jICgpID0+IHtcbiAgICAgIHRyeSB7XG4gICAgICAgIGF3YWl0IGluaXRpYWxpemVEYXRhYmFzZUluQmFja2dyb3VuZCgpO1xuICAgICAgICBsb2coXCJcXHUyNzA1IEJhY2tncm91bmQgZGF0YWJhc2UgaW5pdGlhbGl6YXRpb24gY29tcGxldGVkXCIpO1xuICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgbG9nKGBcXHUyNkEwXFx1RkUwRiBCYWNrZ3JvdW5kIGRhdGFiYXNlIGluaXRpYWxpemF0aW9uIGZhaWxlZDogJHtlcnJvci5tZXNzYWdlfWAsIFwiZXJyb3JcIik7XG4gICAgICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViA9PT0gXCJwcm9kdWN0aW9uXCIpIHtcbiAgICAgICAgICBsb2coXCJcXHUyNkEwXFx1RkUwRiBDb250aW51aW5nIGluIHByb2R1Y3Rpb24gbW9kZSBkZXNwaXRlIGRhdGFiYXNlIG9wdGltaXphdGlvbiBmYWlsdXJlXCIpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSwgZGJEZWxheSk7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgbG9nKGBcXHUyNzRDIEZhaWxlZCB0byBsb2FkIGZ1bGwgYXBwbGljYXRpb246ICR7ZXJyb3IubWVzc2FnZX1gLCBcImVycm9yXCIpO1xuICAgIGxvZyhgXFx1Mjc0QyBTdGFjayB0cmFjZTogJHtlcnJvci5zdGFja31gLCBcImVycm9yXCIpO1xuICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViA9PT0gXCJwcm9kdWN0aW9uXCIpIHtcbiAgICAgIGxvZyhcIlxcdTI3NEMgQ3JpdGljYWwgYXBwbGljYXRpb24gZmFpbHVyZSBpbiBwcm9kdWN0aW9uXCIsIFwiZXJyb3JcIik7XG4gICAgICBsb2coXCJcXHUyNkEwXFx1RkUwRiBIZWFsdGggY2hlY2tzIG1heSBzdGlsbCBiZSBhdmFpbGFibGVcIik7XG4gICAgfVxuICB9XG59XG5hc3luYyBmdW5jdGlvbiBpbml0aWFsaXplRGF0YWJhc2VJbkJhY2tncm91bmQoKSB7XG4gIHRyeSB7XG4gICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInRlc3RcIiAmJiAhcHJvY2Vzcy5lbnYuRElTQUJMRV9EQl9PUFRJTUlaQVRJT05TKSB7XG4gICAgICBsb2coXCJcXHV7MUY1MDR9IENoZWNraW5nIGRhdGFiYXNlIG9wdGltaXphdGlvbiBzdGF0dXMuLi5cIik7XG4gICAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgPT09IFwicHJvZHVjdGlvblwiKSB7XG4gICAgICAgIGxvZyhcIlxcdXsxRjNFRH0gUHJvZHVjdGlvbiBtb2RlOiBQZXJmb3JtaW5nIHNhZmUgZGF0YWJhc2UgY2hlY2tzLi4uXCIpO1xuICAgICAgfVxuICAgICAgY29uc3QgeyBRdWVyeU9wdGltaXplcjogUXVlcnlPcHRpbWl6ZXIyIH0gPSBhd2FpdCBQcm9taXNlLnJlc29sdmUoKS50aGVuKCgpID0+IChpbml0X2RhdGFiYXNlX29wdGltaXphdGlvbigpLCBkYXRhYmFzZV9vcHRpbWl6YXRpb25fZXhwb3J0cykpO1xuICAgICAgbGV0IGluZGV4ZXNFeGlzdCA9IGZhbHNlO1xuICAgICAgdHJ5IHtcbiAgICAgICAgY29uc3QgaW5kZXhDaGVja1Byb21pc2UgPSBRdWVyeU9wdGltaXplcjIuYXJlSW5kZXhlc1NldHVwKCk7XG4gICAgICAgIGNvbnN0IHRpbWVvdXRQcm9taXNlID0gbmV3IFByb21pc2UoXG4gICAgICAgICAgKF8sIHJlamVjdCkgPT4gc2V0VGltZW91dCgoKSA9PiByZWplY3QobmV3IEVycm9yKFwiRGF0YWJhc2UgY2hlY2sgdGltZW91dFwiKSksIDFlNClcbiAgICAgICAgKTtcbiAgICAgICAgaW5kZXhlc0V4aXN0ID0gYXdhaXQgUHJvbWlzZS5yYWNlKFtpbmRleENoZWNrUHJvbWlzZSwgdGltZW91dFByb21pc2VdKTtcbiAgICAgIH0gY2F0Y2ggKGRiRXJyb3IpIHtcbiAgICAgICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WID09PSBcInByb2R1Y3Rpb25cIikge1xuICAgICAgICAgIGxvZyhcbiAgICAgICAgICAgIGBcXHUyNkEwXFx1RkUwRiBQcm9kdWN0aW9uOiBEYXRhYmFzZSBjb25uZWN0aW9uIGZhaWxlZCwgc2tpcHBpbmcgb3B0aW1pemF0aW9uOiAke2RiRXJyb3IubWVzc2FnZX1gXG4gICAgICAgICAgKTtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgbG9nKGBcXHUyNkEwXFx1RkUwRiBEZXZlbG9wbWVudDogRGF0YWJhc2UgY2hlY2sgZmFpbGVkOiAke2RiRXJyb3IubWVzc2FnZX1gKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgaWYgKGluZGV4ZXNFeGlzdCkge1xuICAgICAgICBsb2coXCJcXHUyNzA1IERhdGFiYXNlIGluZGV4ZXMgYWxyZWFkeSBleGlzdCAtIHNraXBwaW5nIG9wdGltaXphdGlvblwiKTtcbiAgICAgICAgbG9nKFwiXFx1ezFGNjgwfSBEYXRhYmFzZSBpcyByZWFkeSBmb3IgaGlnaCBwZXJmb3JtYW5jZSBxdWVyaWVzXCIpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WID09PSBcInByb2R1Y3Rpb25cIikge1xuICAgICAgICAgIGxvZyhcIlxcdXsxRjUyN30gUHJvZHVjdGlvbiBtb2RlOiBVc2luZyBleGlzdGluZyBkYXRhYmFzZSBjb25maWd1cmF0aW9uXCIpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGxvZyhcIlxcdXsxRjUwNH0gU2V0dGluZyB1cCBkYXRhYmFzZSBpbmRleGVzIGZvciBmaXJzdCB0aW1lLi4uXCIpO1xuICAgICAgICAgIGF3YWl0IFF1ZXJ5T3B0aW1pemVyMi5hcHBseUNvcmVPcHRpbWl6YXRpb25zKCk7XG4gICAgICAgICAgbG9nKFwiXFx1MjcwNSBEYXRhYmFzZSBvcHRpbWl6YXRpb25zIGNvbXBsZXRlXCIpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIGxvZyhcIlxcdXsxRjUwNH0gQmFja2dyb3VuZCB3b3JrIGNvbXBsZXRlIC0gYWxsIHJvdXRlcyBhbHJlYWR5IGxvYWRlZFwiKTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgPT09IFwicHJvZHVjdGlvblwiKSB7XG4gICAgICBsb2coXG4gICAgICAgIGBcXHUyNkEwXFx1RkUwRiBQcm9kdWN0aW9uOiBCYWNrZ3JvdW5kIGluaXRpYWxpemF0aW9uIGZhaWxlZCAobm9uLWNyaXRpY2FsKTogJHtlcnJvci5tZXNzYWdlfWAsXG4gICAgICAgIFwiZXJyb3JcIlxuICAgICAgKTtcbiAgICB9IGVsc2Uge1xuICAgICAgbG9nKGBcXHUyNkEwXFx1RkUwRiBCYWNrZ3JvdW5kIGluaXRpYWxpemF0aW9uIGZhaWxlZDogJHtlcnJvci5tZXNzYWdlfWAsIFwiZXJyb3JcIik7XG4gICAgfVxuICB9XG59XG5leHBvcnQge1xuICBhcHAsXG4gIHNlcnZlclxufTtcbiJdLCJ2ZXJzaW9uIjozfQ==