e4cb95649a2f9e6045a6218a0e3f85bd
"use strict";
/**
 * Koveo Gestion Utility Configuration.
 *
 * This module provides utility functions and constants for the Quebec property
 * management SaaS platform. All permissions are now managed via database.
 */
Object.defineProperty(exports, "__esModule", { value: true });
exports.permissions = exports.ROLE_HIERARCHY = void 0;
exports.hasRoleOrHigher = hasRoleOrHigher;
exports.getRolePermissions = getRolePermissions;
exports.checkPermission = checkPermission;
exports.validatePermissions = validatePermissions;
/**
 * Quick access to role hierarchies for common permission checks.
 * Hierarchy: admin > manager > resident > tenant.
 */
exports.ROLE_HIERARCHY = {
    admin: 4,
    manager: 3,
    resident: 2,
    tenant: 1,
};
/**
 * Helper function to check if one role has higher or equal privileges than another.
 *
 * @param userRole - The role to check.
 * @param requiredRole - The minimum required role.
 * @returns Boolean indicating if the user role meets the requirement.
 *
 * @example
 * ```typescript
 * const hasAccess = hasRoleOrHigher('admin', 'manager'); // true
 * const hasAccess2 = hasRoleOrHigher('tenant', 'admin'); // false
 * ```
 */
function hasRoleOrHigher(userRole, requiredRole) {
    return exports.ROLE_HIERARCHY[userRole] >= exports.ROLE_HIERARCHY[requiredRole];
}
// Mock permissions for testing - in production, these come from database
exports.permissions = {
    admin: [
        'create:user',
        'read:user',
        'update:user',
        'delete:user',
        'create:organization',
        'read:organization',
        'update:organization',
        'delete:organization',
        'create:building',
        'read:building',
        'update:building',
        'delete:building',
        'create:residence',
        'read:residence',
        'update:residence',
        'delete:residence',
        'create:document',
        'read:document',
        'update:document',
        'delete:document',
        'create:invitation',
        'read:invitation',
        'update:invitation',
        'delete:invitation',
        'create:bill',
        'read:bill',
        'update:bill',
        'delete:bill',
        'create:maintenance',
        'read:maintenance',
        'update:maintenance',
        'delete:maintenance',
        'create:audit_log',
        'read:audit_log',
        'manage:system',
        'manage:settings',
        'assign:roles',
        'update:framework_config',
        'read:maintenance_request',
        'delete:maintenance_request',
        'create:financial_report',
        'read:financial_report',
        'update:financial_report',
        'delete:financial_report',
        'approve:bill',
        'read:budget',
        'create:budget',
        'update:budget',
        'delete:budget',
        'create:maintenance_request',
        'update:maintenance_request',
        'export:financial_report',
        'delete:improvement_suggestion',
        'delete:feature',
        'delete:actionable_item',
        'cancel:invitation',
        'resend:invitation',
        'audit:invitation',
        'read:notification',
        'create:notification',
        'read:ai_analysis',
        'create:ai_analysis',
        'backup:system',
        'read:profile',
        'update:profile',
    ],
    manager: [
        'read:user',
        'update:user',
        'read:organization',
        'update:organization',
        'create:building',
        'read:building',
        'update:building',
        'create:residence',
        'read:residence',
        'update:residence',
        'create:document',
        'read:document',
        'update:document',
        'create:invitation',
        'read:invitation',
        'update:invitation',
        'cancel:invitation',
        'resend:invitation',
        'create:bill',
        'read:bill',
        'update:bill',
        'create:maintenance',
        'read:maintenance',
        'update:maintenance',
        'approve:bill',
        'read:budget',
        'create:budget',
        'update:budget',
        'read:maintenance_request',
        'create:maintenance_request',
        'assign:maintenance_request',
        'read:profile',
        'update:profile',
    ],
    tenant: [
        'read:building',
        'read:residence',
        'read:document',
        'read:bill',
        'create:maintenance',
        'read:maintenance',
        'read:maintenance_request',
        'create:maintenance_request',
        'update:own_maintenance_request',
        'read:profile',
        'update:profile',
    ],
    resident: [
        'read:building',
        'read:residence',
        'read:document',
        'create:document',
        'read:bill',
        'create:maintenance',
        'read:maintenance',
        'read:maintenance_request',
        'create:maintenance_request',
        'update:own_maintenance_request',
        'read:profile',
        'update:profile',
    ],
};
// Helper functions for tests
function getRolePermissions(config, role) {
    return config[role] || [];
}
function checkPermission(config, role, permission) {
    // Throw error for invalid roles
    if (!(role in config)) {
        throw new Error(`Invalid role: ${role}`);
    }
    const rolePermissions = getRolePermissions(config, role);
    return rolePermissions.includes(permission);
}
function validatePermissions(config) {
    // Basic validation - ensure all roles exist
    const requiredRoles = ['admin', 'manager', 'tenant', 'resident'];
    return requiredRoles.every((role) => role in config);
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiL2hvbWUvcnVubmVyL3dvcmtzcGFjZS9jb25maWcvaW5kZXgudHMiLCJtYXBwaW5ncyI6IjtBQUFBOzs7OztHQUtHOzs7QUEwQkgsMENBS0M7QUFvSkQsZ0RBRUM7QUFFRCwwQ0FZQztBQUVELGtEQUlDO0FBdk1EOzs7R0FHRztBQUNVLFFBQUEsY0FBYyxHQUFHO0lBQzVCLEtBQUssRUFBRSxDQUFDO0lBQ1IsT0FBTyxFQUFFLENBQUM7SUFDVixRQUFRLEVBQUUsQ0FBQztJQUNYLE1BQU0sRUFBRSxDQUFDO0NBQ0QsQ0FBQztBQUVYOzs7Ozs7Ozs7Ozs7R0FZRztBQUNILFNBQWdCLGVBQWUsQ0FDN0IsUUFBcUMsRUFDckMsWUFBeUM7SUFFekMsT0FBTyxzQkFBYyxDQUFDLFFBQVEsQ0FBQyxJQUFJLHNCQUFjLENBQUMsWUFBWSxDQUFDLENBQUM7QUFDbEUsQ0FBQztBQWNELHlFQUF5RTtBQUM1RCxRQUFBLFdBQVcsR0FBc0I7SUFDNUMsS0FBSyxFQUFFO1FBQ0wsYUFBYTtRQUNiLFdBQVc7UUFDWCxhQUFhO1FBQ2IsYUFBYTtRQUNiLHFCQUFxQjtRQUNyQixtQkFBbUI7UUFDbkIscUJBQXFCO1FBQ3JCLHFCQUFxQjtRQUNyQixpQkFBaUI7UUFDakIsZUFBZTtRQUNmLGlCQUFpQjtRQUNqQixpQkFBaUI7UUFDakIsa0JBQWtCO1FBQ2xCLGdCQUFnQjtRQUNoQixrQkFBa0I7UUFDbEIsa0JBQWtCO1FBQ2xCLGlCQUFpQjtRQUNqQixlQUFlO1FBQ2YsaUJBQWlCO1FBQ2pCLGlCQUFpQjtRQUNqQixtQkFBbUI7UUFDbkIsaUJBQWlCO1FBQ2pCLG1CQUFtQjtRQUNuQixtQkFBbUI7UUFDbkIsYUFBYTtRQUNiLFdBQVc7UUFDWCxhQUFhO1FBQ2IsYUFBYTtRQUNiLG9CQUFvQjtRQUNwQixrQkFBa0I7UUFDbEIsb0JBQW9CO1FBQ3BCLG9CQUFvQjtRQUNwQixrQkFBa0I7UUFDbEIsZ0JBQWdCO1FBQ2hCLGVBQWU7UUFDZixpQkFBaUI7UUFDakIsY0FBYztRQUNkLHlCQUF5QjtRQUN6QiwwQkFBMEI7UUFDMUIsNEJBQTRCO1FBQzVCLHlCQUF5QjtRQUN6Qix1QkFBdUI7UUFDdkIseUJBQXlCO1FBQ3pCLHlCQUF5QjtRQUN6QixjQUFjO1FBQ2QsYUFBYTtRQUNiLGVBQWU7UUFDZixlQUFlO1FBQ2YsZUFBZTtRQUNmLDRCQUE0QjtRQUM1Qiw0QkFBNEI7UUFDNUIseUJBQXlCO1FBQ3pCLCtCQUErQjtRQUMvQixnQkFBZ0I7UUFDaEIsd0JBQXdCO1FBQ3hCLG1CQUFtQjtRQUNuQixtQkFBbUI7UUFDbkIsa0JBQWtCO1FBQ2xCLG1CQUFtQjtRQUNuQixxQkFBcUI7UUFDckIsa0JBQWtCO1FBQ2xCLG9CQUFvQjtRQUNwQixlQUFlO1FBQ2YsY0FBYztRQUNkLGdCQUFnQjtLQUNqQjtJQUNELE9BQU8sRUFBRTtRQUNQLFdBQVc7UUFDWCxhQUFhO1FBQ2IsbUJBQW1CO1FBQ25CLHFCQUFxQjtRQUNyQixpQkFBaUI7UUFDakIsZUFBZTtRQUNmLGlCQUFpQjtRQUNqQixrQkFBa0I7UUFDbEIsZ0JBQWdCO1FBQ2hCLGtCQUFrQjtRQUNsQixpQkFBaUI7UUFDakIsZUFBZTtRQUNmLGlCQUFpQjtRQUNqQixtQkFBbUI7UUFDbkIsaUJBQWlCO1FBQ2pCLG1CQUFtQjtRQUNuQixtQkFBbUI7UUFDbkIsbUJBQW1CO1FBQ25CLGFBQWE7UUFDYixXQUFXO1FBQ1gsYUFBYTtRQUNiLG9CQUFvQjtRQUNwQixrQkFBa0I7UUFDbEIsb0JBQW9CO1FBQ3BCLGNBQWM7UUFDZCxhQUFhO1FBQ2IsZUFBZTtRQUNmLGVBQWU7UUFDZiwwQkFBMEI7UUFDMUIsNEJBQTRCO1FBQzVCLDRCQUE0QjtRQUM1QixjQUFjO1FBQ2QsZ0JBQWdCO0tBQ2pCO0lBQ0QsTUFBTSxFQUFFO1FBQ04sZUFBZTtRQUNmLGdCQUFnQjtRQUNoQixlQUFlO1FBQ2YsV0FBVztRQUNYLG9CQUFvQjtRQUNwQixrQkFBa0I7UUFDbEIsMEJBQTBCO1FBQzFCLDRCQUE0QjtRQUM1QixnQ0FBZ0M7UUFDaEMsY0FBYztRQUNkLGdCQUFnQjtLQUNqQjtJQUNELFFBQVEsRUFBRTtRQUNSLGVBQWU7UUFDZixnQkFBZ0I7UUFDaEIsZUFBZTtRQUNmLGlCQUFpQjtRQUNqQixXQUFXO1FBQ1gsb0JBQW9CO1FBQ3BCLGtCQUFrQjtRQUNsQiwwQkFBMEI7UUFDMUIsNEJBQTRCO1FBQzVCLGdDQUFnQztRQUNoQyxjQUFjO1FBQ2QsZ0JBQWdCO0tBQ2pCO0NBQ0YsQ0FBQztBQUVGLDZCQUE2QjtBQUM3QixTQUFnQixrQkFBa0IsQ0FBQyxNQUF5QixFQUFFLElBQVU7SUFDdEUsT0FBTyxNQUFNLENBQUMsSUFBSSxDQUFDLElBQUksRUFBRSxDQUFDO0FBQzVCLENBQUM7QUFFRCxTQUFnQixlQUFlLENBQzdCLE1BQXlCLEVBQ3pCLElBQVUsRUFDVixVQUFzQjtJQUV0QixnQ0FBZ0M7SUFDaEMsSUFBSSxDQUFDLENBQUMsSUFBSSxJQUFJLE1BQU0sQ0FBQyxFQUFFLENBQUM7UUFDdEIsTUFBTSxJQUFJLEtBQUssQ0FBQyxpQkFBaUIsSUFBSSxFQUFFLENBQUMsQ0FBQztJQUMzQyxDQUFDO0lBRUQsTUFBTSxlQUFlLEdBQUcsa0JBQWtCLENBQUMsTUFBTSxFQUFFLElBQUksQ0FBQyxDQUFDO0lBQ3pELE9BQU8sZUFBZSxDQUFDLFFBQVEsQ0FBQyxVQUFVLENBQUMsQ0FBQztBQUM5QyxDQUFDO0FBRUQsU0FBZ0IsbUJBQW1CLENBQUMsTUFBeUI7SUFDM0QsNENBQTRDO0lBQzVDLE1BQU0sYUFBYSxHQUFXLENBQUMsT0FBTyxFQUFFLFNBQVMsRUFBRSxRQUFRLEVBQUUsVUFBVSxDQUFDLENBQUM7SUFDekUsT0FBTyxhQUFhLENBQUMsS0FBSyxDQUFDLENBQUMsSUFBSSxFQUFFLEVBQUUsQ0FBQyxJQUFJLElBQUksTUFBTSxDQUFDLENBQUM7QUFDdkQsQ0FBQyIsIm5hbWVzIjpbXSwic291cmNlcyI6WyIvaG9tZS9ydW5uZXIvd29ya3NwYWNlL2NvbmZpZy9pbmRleC50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIEtvdmVvIEdlc3Rpb24gVXRpbGl0eSBDb25maWd1cmF0aW9uLlxuICpcbiAqIFRoaXMgbW9kdWxlIHByb3ZpZGVzIHV0aWxpdHkgZnVuY3Rpb25zIGFuZCBjb25zdGFudHMgZm9yIHRoZSBRdWViZWMgcHJvcGVydHlcbiAqIG1hbmFnZW1lbnQgU2FhUyBwbGF0Zm9ybS4gQWxsIHBlcm1pc3Npb25zIGFyZSBub3cgbWFuYWdlZCB2aWEgZGF0YWJhc2UuXG4gKi9cblxuLyoqXG4gKiBRdWljayBhY2Nlc3MgdG8gcm9sZSBoaWVyYXJjaGllcyBmb3IgY29tbW9uIHBlcm1pc3Npb24gY2hlY2tzLlxuICogSGllcmFyY2h5OiBhZG1pbiA+IG1hbmFnZXIgPiByZXNpZGVudCA+IHRlbmFudC5cbiAqL1xuZXhwb3J0IGNvbnN0IFJPTEVfSElFUkFSQ0hZID0ge1xuICBhZG1pbjogNCxcbiAgbWFuYWdlcjogMyxcbiAgcmVzaWRlbnQ6IDIsXG4gIHRlbmFudDogMSxcbn0gYXMgY29uc3Q7XG5cbi8qKlxuICogSGVscGVyIGZ1bmN0aW9uIHRvIGNoZWNrIGlmIG9uZSByb2xlIGhhcyBoaWdoZXIgb3IgZXF1YWwgcHJpdmlsZWdlcyB0aGFuIGFub3RoZXIuXG4gKlxuICogQHBhcmFtIHVzZXJSb2xlIC0gVGhlIHJvbGUgdG8gY2hlY2suXG4gKiBAcGFyYW0gcmVxdWlyZWRSb2xlIC0gVGhlIG1pbmltdW0gcmVxdWlyZWQgcm9sZS5cbiAqIEByZXR1cm5zIEJvb2xlYW4gaW5kaWNhdGluZyBpZiB0aGUgdXNlciByb2xlIG1lZXRzIHRoZSByZXF1aXJlbWVudC5cbiAqXG4gKiBAZXhhbXBsZVxuICogYGBgdHlwZXNjcmlwdFxuICogY29uc3QgaGFzQWNjZXNzID0gaGFzUm9sZU9ySGlnaGVyKCdhZG1pbicsICdtYW5hZ2VyJyk7IC8vIHRydWVcbiAqIGNvbnN0IGhhc0FjY2VzczIgPSBoYXNSb2xlT3JIaWdoZXIoJ3RlbmFudCcsICdhZG1pbicpOyAvLyBmYWxzZVxuICogYGBgXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBoYXNSb2xlT3JIaWdoZXIoXG4gIHVzZXJSb2xlOiBrZXlvZiB0eXBlb2YgUk9MRV9ISUVSQVJDSFksXG4gIHJlcXVpcmVkUm9sZToga2V5b2YgdHlwZW9mIFJPTEVfSElFUkFSQ0hZXG4pOiBib29sZWFuIHtcbiAgcmV0dXJuIFJPTEVfSElFUkFSQ0hZW3VzZXJSb2xlXSA+PSBST0xFX0hJRVJBUkNIWVtyZXF1aXJlZFJvbGVdO1xufVxuXG4vLyBOb3RlOiBBbGwgcGVybWlzc2lvbnMgYXJlIG5vdyBtYW5hZ2VkIHZpYSBkYXRhYmFzZSB0YWJsZXM6XG4vLyAtIHBlcm1pc3Npb25zOiBzdG9yZXMgYWxsIGF2YWlsYWJsZSBwZXJtaXNzaW9uc1xuLy8gLSByb2xlX3Blcm1pc3Npb25zOiBtYXBzIHJvbGVzIHRvIHBlcm1pc3Npb25zXG4vLyAtIHVzZXJfcGVybWlzc2lvbnM6IHN0b3JlcyB1c2VyLXNwZWNpZmljIHBlcm1pc3Npb24gb3ZlcnJpZGVzXG5cbi8vIFR5cGVzIGZvciBiYWNrd2FyZHMgY29tcGF0aWJpbGl0eSB3aXRoIHRlc3RzXG5leHBvcnQgdHlwZSBSb2xlID0gJ2FkbWluJyB8ICdtYW5hZ2VyJyB8ICd0ZW5hbnQnIHwgJ3Jlc2lkZW50JztcbmV4cG9ydCB0eXBlIFBlcm1pc3Npb24gPSBzdHJpbmc7XG5leHBvcnQgaW50ZXJmYWNlIFBlcm1pc3Npb25zQ29uZmlnIHtcbiAgW3JvbGU6IHN0cmluZ106IFBlcm1pc3Npb25bXTtcbn1cblxuLy8gTW9jayBwZXJtaXNzaW9ucyBmb3IgdGVzdGluZyAtIGluIHByb2R1Y3Rpb24sIHRoZXNlIGNvbWUgZnJvbSBkYXRhYmFzZVxuZXhwb3J0IGNvbnN0IHBlcm1pc3Npb25zOiBQZXJtaXNzaW9uc0NvbmZpZyA9IHtcbiAgYWRtaW46IFtcbiAgICAnY3JlYXRlOnVzZXInLFxuICAgICdyZWFkOnVzZXInLFxuICAgICd1cGRhdGU6dXNlcicsXG4gICAgJ2RlbGV0ZTp1c2VyJyxcbiAgICAnY3JlYXRlOm9yZ2FuaXphdGlvbicsXG4gICAgJ3JlYWQ6b3JnYW5pemF0aW9uJyxcbiAgICAndXBkYXRlOm9yZ2FuaXphdGlvbicsXG4gICAgJ2RlbGV0ZTpvcmdhbml6YXRpb24nLFxuICAgICdjcmVhdGU6YnVpbGRpbmcnLFxuICAgICdyZWFkOmJ1aWxkaW5nJyxcbiAgICAndXBkYXRlOmJ1aWxkaW5nJyxcbiAgICAnZGVsZXRlOmJ1aWxkaW5nJyxcbiAgICAnY3JlYXRlOnJlc2lkZW5jZScsXG4gICAgJ3JlYWQ6cmVzaWRlbmNlJyxcbiAgICAndXBkYXRlOnJlc2lkZW5jZScsXG4gICAgJ2RlbGV0ZTpyZXNpZGVuY2UnLFxuICAgICdjcmVhdGU6ZG9jdW1lbnQnLFxuICAgICdyZWFkOmRvY3VtZW50JyxcbiAgICAndXBkYXRlOmRvY3VtZW50JyxcbiAgICAnZGVsZXRlOmRvY3VtZW50JyxcbiAgICAnY3JlYXRlOmludml0YXRpb24nLFxuICAgICdyZWFkOmludml0YXRpb24nLFxuICAgICd1cGRhdGU6aW52aXRhdGlvbicsXG4gICAgJ2RlbGV0ZTppbnZpdGF0aW9uJyxcbiAgICAnY3JlYXRlOmJpbGwnLFxuICAgICdyZWFkOmJpbGwnLFxuICAgICd1cGRhdGU6YmlsbCcsXG4gICAgJ2RlbGV0ZTpiaWxsJyxcbiAgICAnY3JlYXRlOm1haW50ZW5hbmNlJyxcbiAgICAncmVhZDptYWludGVuYW5jZScsXG4gICAgJ3VwZGF0ZTptYWludGVuYW5jZScsXG4gICAgJ2RlbGV0ZTptYWludGVuYW5jZScsXG4gICAgJ2NyZWF0ZTphdWRpdF9sb2cnLFxuICAgICdyZWFkOmF1ZGl0X2xvZycsXG4gICAgJ21hbmFnZTpzeXN0ZW0nLFxuICAgICdtYW5hZ2U6c2V0dGluZ3MnLFxuICAgICdhc3NpZ246cm9sZXMnLFxuICAgICd1cGRhdGU6ZnJhbWV3b3JrX2NvbmZpZycsXG4gICAgJ3JlYWQ6bWFpbnRlbmFuY2VfcmVxdWVzdCcsXG4gICAgJ2RlbGV0ZTptYWludGVuYW5jZV9yZXF1ZXN0JyxcbiAgICAnY3JlYXRlOmZpbmFuY2lhbF9yZXBvcnQnLFxuICAgICdyZWFkOmZpbmFuY2lhbF9yZXBvcnQnLFxuICAgICd1cGRhdGU6ZmluYW5jaWFsX3JlcG9ydCcsXG4gICAgJ2RlbGV0ZTpmaW5hbmNpYWxfcmVwb3J0JyxcbiAgICAnYXBwcm92ZTpiaWxsJyxcbiAgICAncmVhZDpidWRnZXQnLFxuICAgICdjcmVhdGU6YnVkZ2V0JyxcbiAgICAndXBkYXRlOmJ1ZGdldCcsXG4gICAgJ2RlbGV0ZTpidWRnZXQnLFxuICAgICdjcmVhdGU6bWFpbnRlbmFuY2VfcmVxdWVzdCcsXG4gICAgJ3VwZGF0ZTptYWludGVuYW5jZV9yZXF1ZXN0JyxcbiAgICAnZXhwb3J0OmZpbmFuY2lhbF9yZXBvcnQnLFxuICAgICdkZWxldGU6aW1wcm92ZW1lbnRfc3VnZ2VzdGlvbicsXG4gICAgJ2RlbGV0ZTpmZWF0dXJlJyxcbiAgICAnZGVsZXRlOmFjdGlvbmFibGVfaXRlbScsXG4gICAgJ2NhbmNlbDppbnZpdGF0aW9uJyxcbiAgICAncmVzZW5kOmludml0YXRpb24nLFxuICAgICdhdWRpdDppbnZpdGF0aW9uJyxcbiAgICAncmVhZDpub3RpZmljYXRpb24nLFxuICAgICdjcmVhdGU6bm90aWZpY2F0aW9uJyxcbiAgICAncmVhZDphaV9hbmFseXNpcycsXG4gICAgJ2NyZWF0ZTphaV9hbmFseXNpcycsXG4gICAgJ2JhY2t1cDpzeXN0ZW0nLFxuICAgICdyZWFkOnByb2ZpbGUnLFxuICAgICd1cGRhdGU6cHJvZmlsZScsXG4gIF0sXG4gIG1hbmFnZXI6IFtcbiAgICAncmVhZDp1c2VyJyxcbiAgICAndXBkYXRlOnVzZXInLFxuICAgICdyZWFkOm9yZ2FuaXphdGlvbicsXG4gICAgJ3VwZGF0ZTpvcmdhbml6YXRpb24nLFxuICAgICdjcmVhdGU6YnVpbGRpbmcnLFxuICAgICdyZWFkOmJ1aWxkaW5nJyxcbiAgICAndXBkYXRlOmJ1aWxkaW5nJyxcbiAgICAnY3JlYXRlOnJlc2lkZW5jZScsXG4gICAgJ3JlYWQ6cmVzaWRlbmNlJyxcbiAgICAndXBkYXRlOnJlc2lkZW5jZScsXG4gICAgJ2NyZWF0ZTpkb2N1bWVudCcsXG4gICAgJ3JlYWQ6ZG9jdW1lbnQnLFxuICAgICd1cGRhdGU6ZG9jdW1lbnQnLFxuICAgICdjcmVhdGU6aW52aXRhdGlvbicsXG4gICAgJ3JlYWQ6aW52aXRhdGlvbicsXG4gICAgJ3VwZGF0ZTppbnZpdGF0aW9uJyxcbiAgICAnY2FuY2VsOmludml0YXRpb24nLFxuICAgICdyZXNlbmQ6aW52aXRhdGlvbicsXG4gICAgJ2NyZWF0ZTpiaWxsJyxcbiAgICAncmVhZDpiaWxsJyxcbiAgICAndXBkYXRlOmJpbGwnLFxuICAgICdjcmVhdGU6bWFpbnRlbmFuY2UnLFxuICAgICdyZWFkOm1haW50ZW5hbmNlJyxcbiAgICAndXBkYXRlOm1haW50ZW5hbmNlJyxcbiAgICAnYXBwcm92ZTpiaWxsJyxcbiAgICAncmVhZDpidWRnZXQnLFxuICAgICdjcmVhdGU6YnVkZ2V0JyxcbiAgICAndXBkYXRlOmJ1ZGdldCcsXG4gICAgJ3JlYWQ6bWFpbnRlbmFuY2VfcmVxdWVzdCcsXG4gICAgJ2NyZWF0ZTptYWludGVuYW5jZV9yZXF1ZXN0JyxcbiAgICAnYXNzaWduOm1haW50ZW5hbmNlX3JlcXVlc3QnLFxuICAgICdyZWFkOnByb2ZpbGUnLFxuICAgICd1cGRhdGU6cHJvZmlsZScsXG4gIF0sXG4gIHRlbmFudDogW1xuICAgICdyZWFkOmJ1aWxkaW5nJyxcbiAgICAncmVhZDpyZXNpZGVuY2UnLFxuICAgICdyZWFkOmRvY3VtZW50JyxcbiAgICAncmVhZDpiaWxsJyxcbiAgICAnY3JlYXRlOm1haW50ZW5hbmNlJyxcbiAgICAncmVhZDptYWludGVuYW5jZScsXG4gICAgJ3JlYWQ6bWFpbnRlbmFuY2VfcmVxdWVzdCcsXG4gICAgJ2NyZWF0ZTptYWludGVuYW5jZV9yZXF1ZXN0JyxcbiAgICAndXBkYXRlOm93bl9tYWludGVuYW5jZV9yZXF1ZXN0JyxcbiAgICAncmVhZDpwcm9maWxlJyxcbiAgICAndXBkYXRlOnByb2ZpbGUnLFxuICBdLFxuICByZXNpZGVudDogW1xuICAgICdyZWFkOmJ1aWxkaW5nJyxcbiAgICAncmVhZDpyZXNpZGVuY2UnLFxuICAgICdyZWFkOmRvY3VtZW50JyxcbiAgICAnY3JlYXRlOmRvY3VtZW50JyxcbiAgICAncmVhZDpiaWxsJyxcbiAgICAnY3JlYXRlOm1haW50ZW5hbmNlJyxcbiAgICAncmVhZDptYWludGVuYW5jZScsXG4gICAgJ3JlYWQ6bWFpbnRlbmFuY2VfcmVxdWVzdCcsXG4gICAgJ2NyZWF0ZTptYWludGVuYW5jZV9yZXF1ZXN0JyxcbiAgICAndXBkYXRlOm93bl9tYWludGVuYW5jZV9yZXF1ZXN0JyxcbiAgICAncmVhZDpwcm9maWxlJyxcbiAgICAndXBkYXRlOnByb2ZpbGUnLFxuICBdLFxufTtcblxuLy8gSGVscGVyIGZ1bmN0aW9ucyBmb3IgdGVzdHNcbmV4cG9ydCBmdW5jdGlvbiBnZXRSb2xlUGVybWlzc2lvbnMoY29uZmlnOiBQZXJtaXNzaW9uc0NvbmZpZywgcm9sZTogUm9sZSk6IFBlcm1pc3Npb25bXSB7XG4gIHJldHVybiBjb25maWdbcm9sZV0gfHwgW107XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBjaGVja1Blcm1pc3Npb24oXG4gIGNvbmZpZzogUGVybWlzc2lvbnNDb25maWcsXG4gIHJvbGU6IFJvbGUsXG4gIHBlcm1pc3Npb246IFBlcm1pc3Npb25cbik6IGJvb2xlYW4ge1xuICAvLyBUaHJvdyBlcnJvciBmb3IgaW52YWxpZCByb2xlc1xuICBpZiAoIShyb2xlIGluIGNvbmZpZykpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoYEludmFsaWQgcm9sZTogJHtyb2xlfWApO1xuICB9XG4gIFxuICBjb25zdCByb2xlUGVybWlzc2lvbnMgPSBnZXRSb2xlUGVybWlzc2lvbnMoY29uZmlnLCByb2xlKTtcbiAgcmV0dXJuIHJvbGVQZXJtaXNzaW9ucy5pbmNsdWRlcyhwZXJtaXNzaW9uKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHZhbGlkYXRlUGVybWlzc2lvbnMoY29uZmlnOiBQZXJtaXNzaW9uc0NvbmZpZyk6IGJvb2xlYW4ge1xuICAvLyBCYXNpYyB2YWxpZGF0aW9uIC0gZW5zdXJlIGFsbCByb2xlcyBleGlzdFxuICBjb25zdCByZXF1aXJlZFJvbGVzOiBSb2xlW10gPSBbJ2FkbWluJywgJ21hbmFnZXInLCAndGVuYW50JywgJ3Jlc2lkZW50J107XG4gIHJldHVybiByZXF1aXJlZFJvbGVzLmV2ZXJ5KChyb2xlKSA9PiByb2xlIGluIGNvbmZpZyk7XG59XG4iXSwidmVyc2lvbiI6M30=