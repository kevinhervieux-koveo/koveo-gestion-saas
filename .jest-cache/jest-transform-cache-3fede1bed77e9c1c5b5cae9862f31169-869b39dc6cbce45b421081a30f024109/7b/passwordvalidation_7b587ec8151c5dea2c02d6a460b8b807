b25b85a31717981980bcd842d1c2b230
"use strict";
/**
 * Password validation utilities with strength indicators for secure registration.
 * Implements Quebec-compliant security standards for property management systems.
 */
Object.defineProperty(exports, "__esModule", { value: true });
exports.validatePasswordStrength = validatePasswordStrength;
exports.getPasswordCriteria = getPasswordCriteria;
exports.getPasswordStrengthLabel = getPasswordStrengthLabel;
exports.getPasswordStrengthColor = getPasswordStrengthColor;
exports.getPasswordStrengthBarColor = getPasswordStrengthBarColor;
/**
 * Common weak passwords and patterns to avoid.
 */
const COMMON_PATTERNS = [
    'password',
    '123456',
    'admin',
    'user',
    'test',
    'demo',
    'qwerty',
    'azerty',
    'letmein',
    'welcome',
    'monkey',
    'dragon',
    'master',
    'shadow',
    'superman',
    'batman',
];
/**
 * Validates password strength and provides detailed feedback.
 * @param password
 */
/**
 * ValidatePasswordStrength function.
 * @param password
 * @returns Function result.
 */
function validatePasswordStrength(password) {
    // Safety guard: handle undefined/null inputs
    if (!password || typeof password !== 'string') {
        return {
            score: 0,
            feedback: ['Veuillez entrer un mot de passe'],
            isValid: false,
        };
    }
    const criteria = getPasswordCriteria(password);
    const feedback = [];
    let score = 0;
    // Check minimum length (8+ characters)
    if (!criteria.minLength) {
        feedback.push('Mot de passe doit contenir au moins 8 caractères');
    }
    else {
        score += 1;
    }
    // Check character variety
    if (!criteria.hasUpperCase) {
        feedback.push('Ajouter au moins une lettre majuscule');
    }
    else {
        score += 0.5;
    }
    if (!criteria.hasLowerCase) {
        feedback.push('Ajouter au moins une lettre minuscule');
    }
    else {
        score += 0.5;
    }
    if (!criteria.hasNumbers) {
        feedback.push('Ajouter au moins un chiffre');
    }
    else {
        score += 1;
    }
    if (!criteria.hasSymbols) {
        feedback.push('Ajouter au moins un symbole (@, #, !, etc.)');
    }
    else {
        score += 1;
    }
    // Check for common patterns
    if (!criteria.noCommonPatterns) {
        feedback.push('Éviter les mots de passe communs');
    }
    else {
        score += 0.5;
    }
    // Bonus points for length
    if (password.length >= 12) {
        score += 0.5;
    }
    // Ensure score is within bounds
    score = Math.min(4, Math.max(0, score));
    // Determine if password is valid (minimum requirements met)
    const isValid = criteria.minLength &&
        criteria.hasUpperCase &&
        criteria.hasLowerCase &&
        (criteria.hasNumbers || criteria.hasSymbols) &&
        criteria.noCommonPatterns;
    return {
        score: Math.round(score),
        feedback: feedback.length > 0 ? feedback : ['Mot de passe sécurisé'],
        isValid,
    };
}
/**
 * Gets detailed password criteria evaluation.
 * @param password
 */
/**
 * GetPasswordCriteria function.
 * @param password
 * @returns Function result.
 */
function getPasswordCriteria(password) {
    // Safety guard: handle undefined/null inputs
    if (!password || typeof password !== 'string') {
        return {
            minLength: false,
            hasUpperCase: false,
            hasLowerCase: false,
            hasNumbers: false,
            hasSymbols: false,
            noCommonPatterns: true, // Empty strings don't contain common patterns
        };
    }
    return {
        minLength: password.length >= 8,
        hasUpperCase: /[A-Z]/.test(password),
        hasLowerCase: /[a-z]/.test(password),
        hasNumbers: /\d/.test(password),
        hasSymbols: /[!@#$%^&*(),.?":{}|<>]/.test(password),
        noCommonPatterns: !COMMON_PATTERNS.some((pattern) => password.toLowerCase().includes(pattern.toLowerCase())),
    };
}
/**
 * Gets password strength level text with Quebec French labels.
 * @param score
 */
/**
 * GetPasswordStrengthLabel function.
 * @param score
 * @returns Function result.
 */
function getPasswordStrengthLabel(score) {
    switch (score) {
        case 0:
        case 1:
            return 'Très faible';
        case 2:
            return 'Faible';
        case 3:
            return 'Moyen';
        case 4:
            return 'Fort';
        default:
            return 'Très faible';
    }
}
/**
 * Gets password strength color for UI indicators.
 * @param score
 */
/**
 * GetPasswordStrengthColor function.
 * @param score
 * @returns Function result.
 */
function getPasswordStrengthColor(score) {
    switch (score) {
        case 0:
        case 1:
            return 'text-red-600';
        case 2:
            return 'text-orange-500';
        case 3:
            return 'text-yellow-500';
        case 4:
            return 'text-green-600';
        default:
            return 'text-red-600';
    }
}
/**
 * Gets progress bar color for password strength visualization.
 * @param score
 */
/**
 * GetPasswordStrengthBarColor function.
 * @param score
 * @returns Function result.
 */
function getPasswordStrengthBarColor(score) {
    switch (score) {
        case 0:
        case 1:
            return 'bg-red-500';
        case 2:
            return 'bg-orange-500';
        case 3:
            return 'bg-yellow-500';
        case 4:
            return 'bg-green-500';
        default:
            return 'bg-red-500';
    }
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiL2hvbWUvcnVubmVyL3dvcmtzcGFjZS9jbGllbnQvc3JjL3V0aWxzL3Bhc3N3b3JkLXZhbGlkYXRpb24udHMiLCJtYXBwaW5ncyI6IjtBQUFBOzs7R0FHRzs7QUFzREgsNERBMkVDO0FBV0Qsa0RBc0JDO0FBV0QsNERBY0M7QUFXRCw0REFjQztBQVdELGtFQWNDO0FBdE5EOztHQUVHO0FBQ0gsTUFBTSxlQUFlLEdBQUc7SUFDdEIsVUFBVTtJQUNWLFFBQVE7SUFDUixPQUFPO0lBQ1AsTUFBTTtJQUNOLE1BQU07SUFDTixNQUFNO0lBQ04sUUFBUTtJQUNSLFFBQVE7SUFDUixTQUFTO0lBQ1QsU0FBUztJQUNULFFBQVE7SUFDUixRQUFRO0lBQ1IsUUFBUTtJQUNSLFFBQVE7SUFDUixVQUFVO0lBQ1YsUUFBUTtDQUNULENBQUM7QUFFRjs7O0dBR0c7QUFDSDs7OztHQUlHO0FBQ0gsU0FBZ0Isd0JBQXdCLENBQ3RDLFFBQW1DO0lBRW5DLDZDQUE2QztJQUM3QyxJQUFJLENBQUMsUUFBUSxJQUFJLE9BQU8sUUFBUSxLQUFLLFFBQVEsRUFBRSxDQUFDO1FBQzlDLE9BQU87WUFDTCxLQUFLLEVBQUUsQ0FBQztZQUNSLFFBQVEsRUFBRSxDQUFDLGlDQUFpQyxDQUFDO1lBQzdDLE9BQU8sRUFBRSxLQUFLO1NBQ2YsQ0FBQztJQUNKLENBQUM7SUFDRCxNQUFNLFFBQVEsR0FBRyxtQkFBbUIsQ0FBQyxRQUFRLENBQUMsQ0FBQztJQUMvQyxNQUFNLFFBQVEsR0FBYSxFQUFFLENBQUM7SUFDOUIsSUFBSSxLQUFLLEdBQUcsQ0FBQyxDQUFDO0lBRWQsdUNBQXVDO0lBQ3ZDLElBQUksQ0FBQyxRQUFRLENBQUMsU0FBUyxFQUFFLENBQUM7UUFDeEIsUUFBUSxDQUFDLElBQUksQ0FBQyxrREFBa0QsQ0FBQyxDQUFDO0lBQ3BFLENBQUM7U0FBTSxDQUFDO1FBQ04sS0FBSyxJQUFJLENBQUMsQ0FBQztJQUNiLENBQUM7SUFFRCwwQkFBMEI7SUFDMUIsSUFBSSxDQUFDLFFBQVEsQ0FBQyxZQUFZLEVBQUUsQ0FB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QUN6QixLQUFLLENBQUM7WUFDSixPQUFPLGNBQWMsQ0FBQztRQUN4QjtZQUNFLE9BQU8sWUFBWSxDQUFDO0lBQ3hCLENBQUM7QUFDSCxDQUFDIiwibmFtZXMiOltdLCJzb3VyY2VzIjpbIi9ob21lL3J1bm5lci93b3Jrc3BhY2UvY2xpZW50L3NyYy91dGlscy9wYXNzd29yZC12YWxpZGF0aW9uLnRzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogUGFzc3dvcmQgdmFsaWRhdGlvbiB1dGlsaXRpZXMgd2l0aCBzdHJlbmd0aCBpbmRpY2F0b3JzIGZvciBzZWN1cmUgcmVnaXN0cmF0aW9uLlxuICogSW1wbGVtZW50cyBRdWViZWMtY29tcGxpYW50IHNlY3VyaXR5IHN0YW5kYXJkcyBmb3IgcHJvcGVydHkgbWFuYWdlbWVudCBzeXN0ZW1zLlxuICovXG5cbi8qKlxuICpcbiAqL1xuZXhwb3J0IGludGVyZmFjZSBQYXNzd29yZFN0cmVuZ3RoUmVzdWx0IHtcbiAgc2NvcmU6IG51bWJlcjsgLy8gMC00ICh3ZWFrIHRvIHZlcnkgc3Ryb25nKVxuICBmZWVkYmFjazogc3RyaW5nW107XG4gIGlzVmFsaWQ6IGJvb2xlYW47XG59XG5cbi8qKlxuICpcbiAqL1xuZXhwb3J0IGludGVyZmFjZSBQYXNzd29yZENyaXRlcmlhIHtcbiAgbWluTGVuZ3RoOiBib29sZWFuO1xuICBoYXNVcHBlckNhc2U6IGJvb2xlYW47XG4gIGhhc0xvd2VyQ2FzZTogYm9vbGVhbjtcbiAgaGFzTnVtYmVyczogYm9vbGVhbjtcbiAgaGFzU3ltYm9sczogYm9vbGVhbjtcbiAgbm9Db21tb25QYXR0ZXJuczogYm9vbGVhbjtcbn1cblxuLyoqXG4gKiBDb21tb24gd2VhayBwYXNzd29yZHMgYW5kIHBhdHRlcm5zIHRvIGF2b2lkLlxuICovXG5jb25zdCBDT01NT05fUEFUVEVSTlMgPSBbXG4gICdwYXNzd29yZCcsXG4gICcxMjM0NTYnLFxuICAnYWRtaW4nLFxuICAndXNlcicsXG4gICd0ZXN0JyxcbiAgJ2RlbW8nLFxuICAncXdlcnR5JyxcbiAgJ2F6ZXJ0eScsXG4gICdsZXRtZWluJyxcbiAgJ3dlbGNvbWUnLFxuICAnbW9ua2V5JyxcbiAgJ2RyYWdvbicsXG4gICdtYXN0ZXInLFxuICAnc2hhZG93JyxcbiAgJ3N1cGVybWFuJyxcbiAgJ2JhdG1hbicsXG5dO1xuXG4vKipcbiAqIFZhbGlkYXRlcyBwYXNzd29yZCBzdHJlbmd0aCBhbmQgcHJvdmlkZXMgZGV0YWlsZWQgZmVlZGJhY2suXG4gKiBAcGFyYW0gcGFzc3dvcmRcbiAqL1xuLyoqXG4gKiBWYWxpZGF0ZVBhc3N3b3JkU3RyZW5ndGggZnVuY3Rpb24uXG4gKiBAcGFyYW0gcGFzc3dvcmRcbiAqIEByZXR1cm5zIEZ1bmN0aW9uIHJlc3VsdC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHZhbGlkYXRlUGFzc3dvcmRTdHJlbmd0aChcbiAgcGFzc3dvcmQ6IHN0cmluZyB8IHVuZGVmaW5lZCB8IG51bGxcbik6IFBhc3N3b3JkU3RyZW5ndGhSZXN1bHQge1xuICAvLyBTYWZldHkgZ3VhcmQ6IGhhbmRsZSB1bmRlZmluZWQvbnVsbCBpbnB1dHNcbiAgaWYgKCFwYXNzd29yZCB8fCB0eXBlb2YgcGFzc3dvcmQgIT09ICdzdHJpbmcnKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIHNjb3JlOiAwLFxuICAgICAgZmVlZGJhY2s6IFsnVmV1aWxsZXogZW50cmVyIHVuIG1vdCBkZSBwYXNzZSddLFxuICAgICAgaXNWYWxpZDogZmFsc2UsXG4gICAgfTtcbiAgfVxuICBjb25zdCBjcml0ZXJpYSA9IGdldFBhc3N3b3JkQ3JpdGVyaWEocGFzc3dvcmQpO1xuICBjb25zdCBmZWVkYmFjazogc3RyaW5nW10gPSBbXTtcbiAgbGV0IHNjb3JlID0gMDtcblxuICAvLyBDaGVjayBtaW5pbXVtIGxlbmd0aCAoOCsgY2hhcmFjdGVycylcbiAgaWYgKCFjcml0ZXJpYS5taW5MZW5ndGgpIHtcbiAgICBmZWVkYmFjay5wdXNoKCdNb3QgZGUgcGFzc2UgZG9pdCBjb250ZW5pciBhdSBtb2lucyA4IGNhcmFjdMOocmVzJyk7XG4gIH0gZWxzZSB7XG4gICAgc2NvcmUgKz0gMTtcbiAgfVxuXG4gIC8vIENoZWNrIGNoYXJhY3RlciB2YXJpZXR5XG4gIGlmICghY3JpdGVyaWEuaGFzVXBwZXJDYXNlKSB7XG4gICAgZmVlZGJhY2sucHVzaCgnQWpvdXRlciBhdSBtb2lucyB1bmUgbGV0dHJlIG1hanVzY3VsZScpO1xuICB9IGVsc2Uge1xuICAgIHNjb3JlICs9IDAuNTtcbiAgfVxuXG4gIGlmICghY3JpdGVyaWEuaGFzTG93ZXJDYXNlKSB7XG4gICAgZmVlZGJhY2sucHVzaCgnQWpvdXRlciBhdSBtb2lucyB1bmUgbGV0dHJlIG1pbnVzY3VsZScpO1xuICB9IGVsc2Uge1xuICAgIHNjb3JlICs9IDAuNTtcbiAgfVxuXG4gIGlmICghY3JpdGVyaWEuaGFzTnVtYmVycykge1xuICAgIGZlZWRiYWNrLnB1c2goJ0Fqb3V0ZXIgYXUgbW9pbnMgdW4gY2hpZmZyZScpO1xuICB9IGVsc2Uge1xuICAgIHNjb3JlICs9IDE7XG4gIH1cblxuICBpZiAoIWNyaXRlcmlhLmhhc1N5bWJvbHMpIHtcbiAgICBmZWVkYmFjay5wdXNoKCdBam91dGVyIGF1IG1vaW5zIHVuIHN5bWJvbGUgKEAsICMsICEsIGV0Yy4pJyk7XG4gIH0gZWxzZSB7XG4gICAgc2NvcmUgKz0gMTtcbiAgfVxuXG4gIC8vIENoZWNrIGZvciBjb21tb24gcGF0dGVybnNcbiAgaWYgKCFjcml0ZXJpYS5ub0NvbW1vblBhdHRlcm5zKSB7XG4gICAgZmVlZGJhY2sucHVzaCgnw4l2aXRlciBsZXMgbW90cyBkZSBwYXNzZSBjb21tdW5zJyk7XG4gIH0gZWxzZSB7XG4gICAgc2NvcmUgKz0gMC41O1xuICB9XG5cbiAgLy8gQm9udXMgcG9pbnRzIGZvciBsZW5ndGhcbiAgaWYgKHBhc3N3b3JkLmxlbmd0aCA+PSAxMikge1xuICAgIHNjb3JlICs9IDAuNTtcbiAgfVxuXG4gIC8vIEVuc3VyZSBzY29yZSBpcyB3aXRoaW4gYm91bmRzXG4gIHNjb3JlID0gTWF0aC5taW4oNCwgTWF0aC5tYXgoMCwgc2NvcmUpKTtcblxuICAvLyBEZXRlcm1pbmUgaWYgcGFzc3dvcmQgaXMgdmFsaWQgKG1pbmltdW0gcmVxdWlyZW1lbnRzIG1ldClcbiAgY29uc3QgaXNWYWxpZCA9XG4gICAgY3JpdGVyaWEubWluTGVuZ3RoICYmXG4gICAgY3JpdGVyaWEuaGFzVXBwZXJDYXNlICYmXG4gICAgY3JpdGVyaWEuaGFzTG93ZXJDYXNlICYmXG4gICAgKGNyaXRlcmlhLmhhc051bWJlcnMgfHwgY3JpdGVyaWEuaGFzU3ltYm9scykgJiZcbiAgICBjcml0ZXJpYS5ub0NvbW1vblBhdHRlcm5zO1xuXG4gIHJldHVybiB7XG4gICAgc2NvcmU6IE1hdGgucm91bmQoc2NvcmUpLFxuICAgIGZlZWRiYWNrOiBmZWVkYmFjay5sZW5ndGggPiAwID8gZmVlZGJhY2sgOiBbJ01vdCBkZSBwYXNzZSBzw6ljdXJpc8OpJ10sXG4gICAgaXNWYWxpZCxcbiAgfTtcbn1cblxuLyoqXG4gKiBHZXRzIGRldGFpbGVkIHBhc3N3b3JkIGNyaXRlcmlhIGV2YWx1YXRpb24uXG4gKiBAcGFyYW0gcGFzc3dvcmRcbiAqL1xuLyoqXG4gKiBHZXRQYXNzd29yZENyaXRlcmlhIGZ1bmN0aW9uLlxuICogQHBhcmFtIHBhc3N3b3JkXG4gKiBAcmV0dXJucyBGdW5jdGlvbiByZXN1bHQuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRQYXNzd29yZENyaXRlcmlhKHBhc3N3b3JkOiBzdHJpbmcgfCB1bmRlZmluZWQgfCBudWxsKTogUGFzc3dvcmRDcml0ZXJpYSB7XG4gIC8vIFNhZmV0eSBndWFyZDogaGFuZGxlIHVuZGVmaW5lZC9udWxsIGlucHV0c1xuICBpZiAoIXBhc3N3b3JkIHx8IHR5cGVvZiBwYXNzd29yZCAhPT0gJ3N0cmluZycpIHtcbiAgICByZXR1cm4ge1xuICAgICAgbWluTGVuZ3RoOiBmYWxzZSxcbiAgICAgIGhhc1VwcGVyQ2FzZTogZmFsc2UsXG4gICAgICBoYXNMb3dlckNhc2U6IGZhbHNlLFxuICAgICAgaGFzTnVtYmVyczogZmFsc2UsXG4gICAgICBoYXNTeW1ib2xzOiBmYWxzZSxcbiAgICAgIG5vQ29tbW9uUGF0dGVybnM6IHRydWUsIC8vIEVtcHR5IHN0cmluZ3MgZG9uJ3QgY29udGFpbiBjb21tb24gcGF0dGVybnNcbiAgICB9O1xuICB9XG4gIHJldHVybiB7XG4gICAgbWluTGVuZ3RoOiBwYXNzd29yZC5sZW5ndGggPj0gOCxcbiAgICBoYXNVcHBlckNhc2U6IC9bQS1aXS8udGVzdChwYXNzd29yZCksXG4gICAgaGFzTG93ZXJDYXNlOiAvW2Etel0vLnRlc3QocGFzc3dvcmQpLFxuICAgIGhhc051bWJlcnM6IC9cXGQvLnRlc3QocGFzc3dvcmQpLFxuICAgIGhhc1N5bWJvbHM6IC9bIUAjJCVeJiooKSwuP1wiOnt9fDw+XS8udGVzdChwYXNzd29yZCksXG4gICAgbm9Db21tb25QYXR0ZXJuczogIUNPTU1PTl9QQVRURVJOUy5zb21lKChwYXR0ZXJuKSA9PlxuICAgICAgcGFzc3dvcmQudG9Mb3dlckNhc2UoKS5pbmNsdWRlcyhwYXR0ZXJuLnRvTG93ZXJDYXNlKCkpXG4gICAgKSxcbiAgfTtcbn1cblxuLyoqXG4gKiBHZXRzIHBhc3N3b3JkIHN0cmVuZ3RoIGxldmVsIHRleHQgd2l0aCBRdWViZWMgRnJlbmNoIGxhYmVscy5cbiAqIEBwYXJhbSBzY29yZVxuICovXG4vKipcbiAqIEdldFBhc3N3b3JkU3RyZW5ndGhMYWJlbCBmdW5jdGlvbi5cbiAqIEBwYXJhbSBzY29yZVxuICogQHJldHVybnMgRnVuY3Rpb24gcmVzdWx0LlxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0UGFzc3dvcmRTdHJlbmd0aExhYmVsKHNjb3JlOiBudW1iZXIpOiBzdHJpbmcge1xuICBzd2l0Y2ggKHNjb3JlKSB7XG4gICAgY2FzZSAwOlxuICAgIGNhc2UgMTpcbiAgICAgIHJldHVybiAnVHLDqHMgZmFpYmxlJztcbiAgICBjYXNlIDI6XG4gICAgICByZXR1cm4gJ0ZhaWJsZSc7XG4gICAgY2FzZSAzOlxuICAgICAgcmV0dXJuICdNb3llbic7XG4gICAgY2FzZSA0OlxuICAgICAgcmV0dXJuICdGb3J0JztcbiAgICBkZWZhdWx0OlxuICAgICAgcmV0dXJuICdUcsOocyBmYWlibGUnO1xuICB9XG59XG5cbi8qKlxuICogR2V0cyBwYXNzd29yZCBzdHJlbmd0aCBjb2xvciBmb3IgVUkgaW5kaWNhdG9ycy5cbiAqIEBwYXJhbSBzY29yZVxuICovXG4vKipcbiAqIEdldFBhc3N3b3JkU3RyZW5ndGhDb2xvciBmdW5jdGlvbi5cbiAqIEBwYXJhbSBzY29yZVxuICogQHJldHVybnMgRnVuY3Rpb24gcmVzdWx0LlxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0UGFzc3dvcmRTdHJlbmd0aENvbG9yKHNjb3JlOiBudW1iZXIpOiBzdHJpbmcge1xuICBzd2l0Y2ggKHNjb3JlKSB7XG4gICAgY2FzZSAwOlxuICAgIGNhc2UgMTpcbiAgICAgIHJldHVybiAndGV4dC1yZWQtNjAwJztcbiAgICBjYXNlIDI6XG4gICAgICByZXR1cm4gJ3RleHQtb3JhbmdlLTUwMCc7XG4gICAgY2FzZSAzOlxuICAgICAgcmV0dXJuICd0ZXh0LXllbGxvdy01MDAnO1xuICAgIGNhc2UgNDpcbiAgICAgIHJldHVybiAndGV4dC1ncmVlbi02MDAnO1xuICAgIGRlZmF1bHQ6XG4gICAgICByZXR1cm4gJ3RleHQtcmVkLTYwMCc7XG4gIH1cbn1cblxuLyoqXG4gKiBHZXRzIHByb2dyZXNzIGJhciBjb2xvciBmb3IgcGFzc3dvcmQgc3RyZW5ndGggdmlzdWFsaXphdGlvbi5cbiAqIEBwYXJhbSBzY29yZVxuICovXG4vKipcbiAqIEdldFBhc3N3b3JkU3RyZW5ndGhCYXJDb2xvciBmdW5jdGlvbi5cbiAqIEBwYXJhbSBzY29yZVxuICogQHJldHVybnMgRnVuY3Rpb24gcmVzdWx0LlxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0UGFzc3dvcmRTdHJlbmd0aEJhckNvbG9yKHNjb3JlOiBudW1iZXIpOiBzdHJpbmcge1xuICBzd2l0Y2ggKHNjb3JlKSB7XG4gICAgY2FzZSAwOlxuICAgIGNhc2UgMTpcbiAgICAgIHJldHVybiAnYmctcmVkLTUwMCc7XG4gICAgY2FzZSAyOlxuICAgICAgcmV0dXJuICdiZy1vcmFuZ2UtNTAwJztcbiAgICBjYXNlIDM6XG4gICAgICByZXR1cm4gJ2JnLXllbGxvdy01MDAnO1xuICAgIGNhc2UgNDpcbiAgICAgIHJldHVybiAnYmctZ3JlZW4tNTAwJztcbiAgICBkZWZhdWx0OlxuICAgICAgcmV0dXJuICdiZy1yZWQtNTAwJztcbiAgfVxufVxuIl0sInZlcnNpb24iOjN9