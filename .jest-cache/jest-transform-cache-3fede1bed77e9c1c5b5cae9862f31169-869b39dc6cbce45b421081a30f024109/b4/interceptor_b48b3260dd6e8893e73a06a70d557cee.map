{"file":"/home/runner/workspace/node_modules/@testing-library/user-event/dist/cjs/document/interceptor.js","mappings":"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","names":[],"sources":["/home/runner/workspace/node_modules/@testing-library/user-event/dist/cjs/document/interceptor.js"],"sourcesContent":["'use strict';\n\nvar isElementType = require('../utils/misc/isElementType.js');\nrequire('../utils/dataTransfer/Clipboard.js');\nvar trackValue = require('./trackValue.js');\nvar UI = require('./UI.js');\n\nconst Interceptor = Symbol('Interceptor for programmatical calls');\nfunction prepareInterceptor(element, propName, interceptorImpl) {\n    const prototypeDescriptor = Object.getOwnPropertyDescriptor(element.constructor.prototype, propName);\n    const objectDescriptor = Object.getOwnPropertyDescriptor(element, propName);\n    const target = (prototypeDescriptor === null || prototypeDescriptor === undefined ? undefined : prototypeDescriptor.set) ? 'set' : 'value';\n    /* istanbul ignore if */ if (typeof (prototypeDescriptor === null || prototypeDescriptor === undefined ? undefined : prototypeDescriptor[target]) !== 'function' || prototypeDescriptor[target][Interceptor]) {\n        throw new Error(`Element ${element.tagName} does not implement \"${String(propName)}\".`);\n    }\n    function intercept(...args) {\n        const { applyNative = false, realArgs, then } = interceptorImpl.call(this, ...args);\n        const realFunc = (!applyNative && objectDescriptor || prototypeDescriptor)[target];\n        if (target === 'set') {\n            realFunc.call(this, realArgs);\n        } else {\n            realFunc.call(this, ...realArgs);\n        }\n        then === null || then === undefined ? undefined : then();\n    }\n    intercept[Interceptor] = Interceptor;\n    Object.defineProperty(element, propName, {\n        ...objectDescriptor !== null && objectDescriptor !== undefined ? objectDescriptor : prototypeDescriptor,\n        [target]: intercept\n    });\n}\nfunction prepareValueInterceptor(element) {\n    prepareInterceptor(element, 'value', function interceptorImpl(v) {\n        const isUI = UI.isUIValue(v);\n        if (isUI) {\n            trackValue.startTrackValue(this);\n        }\n        return {\n            applyNative: !!isUI,\n            realArgs: sanitizeValue(this, v),\n            then: isUI ? undefined : ()=>trackValue.trackOrSetValue(this, String(v))\n        };\n    });\n}\nfunction sanitizeValue(element, v) {\n    // Workaround for JSDOM\n    if (isElementType.isElementType(element, 'input', {\n        type: 'number'\n    }) && String(v) !== '' && !Number.isNaN(Number(v))) {\n        // Setting value to \"1.\" results in `null` in JSDOM\n        return String(Number(v));\n    }\n    return String(v);\n}\nfunction prepareSelectionInterceptor(element) {\n    prepareInterceptor(element, 'setSelectionRange', function interceptorImpl(start, ...others) {\n        const isUI = UI.isUISelectionStart(start);\n        return {\n            applyNative: !!isUI,\n            realArgs: [\n                Number(start),\n                ...others\n            ],\n            then: ()=>isUI ? undefined : UI.setUISelectionClean(element)\n        };\n    });\n    prepareInterceptor(element, 'selectionStart', function interceptorImpl(v) {\n        return {\n            realArgs: v,\n            then: ()=>UI.setUISelectionClean(element)\n        };\n    });\n    prepareInterceptor(element, 'selectionEnd', function interceptorImpl(v) {\n        return {\n            realArgs: v,\n            then: ()=>UI.setUISelectionClean(element)\n        };\n    });\n    prepareInterceptor(element, 'select', function interceptorImpl() {\n        return {\n            realArgs: [],\n            then: ()=>UI.setUISelectionRaw(element, {\n                    anchorOffset: 0,\n                    focusOffset: UI.getUIValue(element).length\n                })\n        };\n    });\n}\nfunction prepareRangeTextInterceptor(element) {\n    prepareInterceptor(element, 'setRangeText', function interceptorImpl(...realArgs) {\n        return {\n            realArgs,\n            then: ()=>{\n                UI.setUIValueClean(element);\n                UI.setUISelectionClean(element);\n            }\n        };\n    });\n}\n\nexports.prepareInterceptor = prepareInterceptor;\nexports.prepareRangeTextInterceptor = prepareRangeTextInterceptor;\nexports.prepareSelectionInterceptor = prepareSelectionInterceptor;\nexports.prepareValueInterceptor = prepareValueInterceptor;\n"],"version":3}