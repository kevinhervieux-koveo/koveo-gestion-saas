{"file":"/home/runner/workspace/client/src/components/common/ModularDocumentPageWrapper.tsx","mappings":"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","names":[],"sources":["/home/runner/workspace/client/src/components/common/ModularDocumentPageWrapper.tsx"],"sourcesContent":["import React, { useState } from 'react';\nimport { useQuery } from '@tanstack/react-query';\nimport { useLocation, useParams } from 'wouter';\nimport { Grid, List, ArrowLeft, Plus, Search, Filter, Building, Home } from 'lucide-react';\nimport { Button } from '@/components/ui/button';\nimport { Input } from '@/components/ui/input';\nimport { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card';\nimport { Badge } from '@/components/ui/badge';\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from '@/components/ui/select';\nimport { apiRequest } from '@/lib/queryClient';\nimport { useLanguage } from '@/hooks/use-language';\nimport {\n  SharedUploader,\n  DocumentCard,\n  DocumentViewModal,\n  DocumentEditModal\n} from '@/components/document-management';\nimport type { DocumentWithMetadata, DocumentPermissions } from '@shared/schemas/documents';\n\n// Document categories for filtering\nconst DOCUMENT_CATEGORIES = [\n  { value: 'all', label: 'All Categories' },\n  { value: 'bylaw', label: 'Bylaws' },\n  { value: 'financial', label: 'Financial' },\n  { value: 'maintenance', label: 'Maintenance' },\n  { value: 'legal', label: 'Legal' },\n  { value: 'meeting_minutes', label: 'Meeting Minutes' },\n  { value: 'insurance', label: 'Insurance' },\n  { value: 'contracts', label: 'Contracts' },\n  { value: 'permits', label: 'Permits' },\n  { value: 'inspection', label: 'Inspection' },\n  { value: 'other', label: 'Other' },\n] as const;\n\ninterface ModularDocumentPageWrapperProps {\n  type: 'building' | 'residence';\n  userRole: 'manager' | 'resident';\n  backPath: string;\n  backLabel?: string;\n  entityIdParam: string;\n}\n\nexport default function ModularDocumentPageWrapper({\n  type,\n  userRole,\n  backPath,\n  backLabel,\n  entityIdParam,\n}: ModularDocumentPageWrapperProps) {\n  const [, navigate] = useLocation();\n  const params = useParams();\n  const { t } = useLanguage();\n\n  // State for modals and interactions\n  const [isViewModalOpen, setIsViewModalOpen] = useState(false);\n  const [isEditModalOpen, setIsEditModalOpen] = useState(false);\n  const [selectedDocumentId, setSelectedDocumentId] = useState<string | null>(null);\n  const [isCreating, setIsCreating] = useState(false);\n  \n  // State for filtering and search\n  const [searchTerm, setSearchTerm] = useState('');\n  const [selectedCategory, setSelectedCategory] = useState('all');\n  const [viewMode, setViewMode] = useState<'grid' | 'list'>('grid');\n\n  // Get entityId from URL (both path param and query param)\n  const urlParams = new URLSearchParams(window.location.search);\n  const entityId = (params as any)[entityIdParam] || urlParams.get(entityIdParam);\n\n  // Get current user\n  const { data: user } = useQuery({\n    queryKey: ['/api/auth/user'],\n    queryFn: () => apiRequest('GET', '/api/auth/user') as Promise<any>,\n  });\n\n  // Get entity info based on type\n  const entityApiPath = type === 'building' ? '/api/manager/buildings' : '/api/residences';\n  const { data: entity, isError: entityError, error } = useQuery({\n    queryKey: [entityApiPath, entityId],\n    queryFn: async () => {\n      if (type === 'residence') {\n        const response = await fetch(`/api/residences/${entityId}`, {\n          credentials: 'include',\n        });\n        if (!response.ok) {\n          if (response.status === 404) {\n            throw new Error('ENTITY_NOT_FOUND');\n          }\n          throw new Error(`Failed to fetch ${type}`);\n        }\n        return response.json();\n      } else {\n        return apiRequest('GET', `${entityApiPath}/${entityId}`) as Promise<any>;\n      }\n    },\n    enabled: !!entityId,\n    retry: false, // Don't retry on 404s\n  });\n\n  // Fetch documents for this entity\n  const { data: documents = [], isLoading } = useQuery<DocumentWithMetadata[]>({\n    queryKey: ['/api/documents', type, entityId],\n    queryFn: () => {\n      const param = type === 'building' ? 'buildingId' : 'residenceId';\n      return apiRequest('GET', `/api/documents?${param}=${entityId}`);\n    },\n    enabled: !!entityId,\n  });\n\n  // Determine permissions based on user role and type\n  const isUserTenant = user?.role === 'tenant';\n  const isManager = user?.role === 'manager' || user?.role === 'admin';\n  \n  const userPermissions: DocumentPermissions = userRole === 'manager' \n    ? {\n        canView: true,\n        canDownload: true,\n        canEdit: isManager,\n        canDelete: isManager,\n        canCreate: isManager,\n      }\n    : {\n        canView: true,\n        canDownload: !isUserTenant,\n        canEdit: !isUserTenant,\n        canDelete: !isUserTenant,\n        canCreate: !isUserTenant,\n      };\n\n  // Filter and search documents\n  const filteredDocuments = Array.isArray(documents) ? documents.filter(doc => {\n    const matchesSearch = doc.name.toLowerCase().includes(searchTerm.toLowerCase()) ||\n                         doc.description?.toLowerCase().includes(searchTerm.toLowerCase());\n    \n    const matchesCategory = selectedCategory === 'all' || doc.category === selectedCategory;\n\n    return matchesSearch && matchesCategory;\n  }) : [];\n\n  // Generate entity name based on type\n  const entityName = type === 'residence' \n    ? (entity?.unitNumber || entity?.unit_number ? `Unit ${entity.unitNumber || entity.unit_number}` : 'Residence')\n    : entity?.name;\n\n  const defaultBackLabel = backLabel || (type === 'building' ? 'Back to Buildings' : t('backToResidences'));\n\n  // Handle document interactions\n  const handleDocumentView = (documentId: string) => {\n    setSelectedDocumentId(documentId);\n    setIsViewModalOpen(true);\n  };\n\n  const handleDocumentEdit = (documentId: string) => {\n    setSelectedDocumentId(documentId);\n    setIsEditModalOpen(true);\n    setIsViewModalOpen(false);\n  };\n\n  const handleCreateDocument = () => {\n    setSelectedDocumentId(null);\n    setIsCreating(true);\n    setIsEditModalOpen(true);\n  };\n\n  const handleDocumentSuccess = (documentId: string, action: 'created' | 'updated' | 'deleted') => {\n    console.log(`Document ${action}:`, documentId);\n    setIsEditModalOpen(false);\n    setIsViewModalOpen(false);\n    setIsCreating(false);\n    setSelectedDocumentId(null);\n  };\n\n  const clearFilters = () => {\n    setSearchTerm('');\n    setSelectedCategory('all');\n  };\n\n  if (!entityId) {\n    return (\n      <div className=\"flex-1 flex flex-col overflow-hidden\">\n        <div className=\"flex-1 flex items-center justify-center\">\n          <div className=\"text-center\">\n            <p className=\"text-gray-500 mb-4\">{type} ID is required</p>\n            <Button\n              variant=\"outline\"\n              onClick={() => navigate(backPath)}\n              data-testid=\"button-back-to-list\"\n            >\n              <ArrowLeft className=\"w-4 h-4 mr-2\" />\n              {defaultBackLabel}\n            </Button>\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  // Handle entity not found (specific to residence pages that had this logic)\n  if (entityError && error?.message === 'ENTITY_NOT_FOUND' && type === 'residence') {\n    return (\n      <div className=\"flex-1 flex flex-col overflow-hidden\">\n        <div className=\"flex-1 flex items-center justify-center\">\n          <div className=\"text-center max-w-md\">\n            <h2 className=\"text-xl font-semibold mb-4\">Residence Not Found</h2>\n            <p className=\"text-gray-500 mb-4\">\n              The residence ID \"{entityId}\" doesn't exist in the development database.\n            </p>\n            <p className=\"text-sm text-gray-400 mb-6\">\n              This might be a production database ID. Please use a valid development residence ID.\n            </p>\n            <div className=\"space-y-2\">\n              <Button\n                variant=\"default\"\n                onClick={() => navigate(backPath)}\n                data-testid=\"button-back-to-list\"\n                className=\"w-full\"\n              >\n                <ArrowLeft className=\"w-4 h-4 mr-2\" />\n                {backLabel || 'Back to Residences'}\n              </Button>\n              <Button\n                variant=\"outline\"\n                onClick={() =>\n                  navigate('/residents/residences/e27ac924-8120-4904-a791-d1e9db544d58/documents')\n                }\n                data-testid=\"button-go-to-valid-residence\"\n                className=\"w-full\"\n              >\n                Go to Unit 101 (Test Residence)\n              </Button>\n            </div>\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"flex-1 flex flex-col overflow-hidden\">\n      {/* Header with Back Button */}\n      <div className=\"p-6 pb-0\">\n        <div className=\"flex items-center justify-between mb-6\">\n          <Button\n            variant=\"outline\"\n            onClick={() => navigate(backPath)}\n            data-testid=\"button-back\"\n          >\n            <ArrowLeft className=\"w-4 h-4 mr-2\" />\n            {defaultBackLabel}\n          </Button>\n          \n          <div className=\"text-right\">\n            <h1 className=\"text-2xl font-semibold\">\n              {type === 'building' ? <Building className=\"w-6 h-6 inline mr-2\" /> : <Home className=\"w-6 h-6 inline mr-2\" />}\n              {entityName}\n            </h1>\n            <p className=\"text-sm text-muted-foreground\">\n              {type === 'building' ? 'Building Documents' : 'Residence Documents'}\n            </p>\n          </div>\n        </div>\n      </div>\n\n      <div className=\"flex-1 overflow-auto px-6 pb-6\">\n        <div className=\"max-w-7xl mx-auto space-y-6\">\n          {/* Filters and Search Section */}\n          <Card>\n            <CardHeader>\n              <CardTitle className=\"flex items-center gap-2\">\n                <Filter className=\"w-5 h-5\" />\n                Search & Filters\n              </CardTitle>\n            </CardHeader>\n            <CardContent>\n              <div className=\"grid grid-cols-1 md:grid-cols-4 gap-4\">\n                {/* Search */}\n                <div className=\"space-y-2\">\n                  <label className=\"text-sm font-medium\">Search</label>\n                  <div className=\"relative\">\n                    <Search className=\"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground w-4 h-4\" />\n                    <Input\n                      placeholder=\"Search documents...\"\n                      value={searchTerm}\n                      onChange={(e) => setSearchTerm(e.target.value)}\n                      className=\"pl-10\"\n                      data-testid=\"input-search-documents\"\n                    />\n                  </div>\n                </div>\n\n                {/* Category Filter */}\n                <div className=\"space-y-2\">\n                  <label className=\"text-sm font-medium\">Category</label>\n                  <Select value={selectedCategory} onValueChange={setSelectedCategory}>\n                    <SelectTrigger data-testid=\"select-category-filter\">\n                      <SelectValue />\n                    </SelectTrigger>\n                    <SelectContent>\n                      {DOCUMENT_CATEGORIES.map((category) => (\n                        <SelectItem key={category.value} value={category.value}>\n                          {category.label}\n                        </SelectItem>\n                      ))}\n                    </SelectContent>\n                  </Select>\n                </div>\n\n                {/* View Mode Toggle */}\n                <div className=\"space-y-2\">\n                  <label className=\"text-sm font-medium\">View</label>\n                  <div className=\"flex gap-2\">\n                    <Button\n                      variant={viewMode === 'grid' ? 'default' : 'outline'}\n                      size=\"sm\"\n                      onClick={() => setViewMode('grid')}\n                      className=\"flex-1\"\n                      data-testid=\"button-grid-view\"\n                    >\n                      <Grid className=\"w-4 h-4\" />\n                    </Button>\n                    <Button\n                      variant={viewMode === 'list' ? 'default' : 'outline'}\n                      size=\"sm\"\n                      onClick={() => setViewMode('list')}\n                      className=\"flex-1\"\n                      data-testid=\"button-list-view\"\n                    >\n                      <List className=\"w-4 h-4\" />\n                    </Button>\n                  </div>\n                </div>\n\n                {/* Actions */}\n                <div className=\"space-y-2\">\n                  <label className=\"text-sm font-medium invisible\">Actions</label>\n                  <div className=\"flex gap-2\">\n                    {userPermissions.canCreate && (\n                      <Button \n                        onClick={handleCreateDocument} \n                        className=\"flex-1\"\n                        data-testid=\"button-create-document\"\n                      >\n                        <Plus className=\"w-4 h-4 mr-2\" />\n                        Create\n                      </Button>\n                    )}\n                    <Button \n                      variant=\"outline\" \n                      onClick={clearFilters}\n                      data-testid=\"button-clear-filters\"\n                    >\n                      Clear\n                    </Button>\n                  </div>\n                </div>\n              </div>\n            </CardContent>\n          </Card>\n\n          {/* Documents Display */}\n          <div className=\"flex justify-between items-center\">\n            <div className=\"flex items-center gap-2\">\n              <span className=\"text-sm text-muted-foreground\">\n                {filteredDocuments.length} document{filteredDocuments.length !== 1 ? 's' : ''} found\n              </span>\n              {(searchTerm || selectedCategory !== 'all') && (\n                <Badge variant=\"secondary\">Filtered</Badge>\n              )}\n            </div>\n          </div>\n\n          {/* Documents Content */}\n          {isLoading ? (\n            <Card>\n              <CardContent className=\"p-8 text-center\">\n                <div className=\"animate-spin w-8 h-8 border-4 border-primary border-t-transparent rounded-full mx-auto mb-4\"></div>\n                <p className=\"text-gray-500\">Loading documents...</p>\n              </CardContent>\n            </Card>\n          ) : filteredDocuments.length === 0 ? (\n            <Card>\n              <CardContent className=\"p-8 text-center\">\n                <div className=\"text-center\">\n                  <div className=\"w-16 h-16 mx-auto mb-4 bg-muted rounded-full flex items-center justify-center\">\n                    <Search className=\"w-8 h-8 text-muted-foreground\" />\n                  </div>\n                  <h3 className=\"text-lg font-semibold text-gray-600 mb-2\">No Documents Found</h3>\n                  <p className=\"text-gray-500 mb-4\">\n                    {searchTerm || selectedCategory !== 'all'\n                      ? \"No documents match your current filters. Try adjusting your search criteria.\"\n                      : `No documents have been uploaded for this ${type} yet. Create your first document to get started.`\n                    }\n                  </p>\n                  <div className=\"flex gap-2 justify-center\">\n                    {(searchTerm || selectedCategory !== 'all') && (\n                      <Button variant=\"outline\" onClick={clearFilters}>\n                        Clear Filters\n                      </Button>\n                    )}\n                    {userPermissions.canCreate && (\n                      <Button onClick={handleCreateDocument}>\n                        <Plus className=\"w-4 h-4 mr-2\" />\n                        Create Document\n                      </Button>\n                    )}\n                  </div>\n                </div>\n              </CardContent>\n            </Card>\n          ) : (\n            <Card>\n              <CardContent className=\"p-6\">\n                <div className={`grid gap-4 ${\n                  viewMode === 'grid' \n                    ? 'grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4' \n                    : 'grid-cols-1'\n                }`}>\n                  {filteredDocuments.map((document) => (\n                    <DocumentCard\n                      key={document.id}\n                      documentId={document.id}\n                      title={document.name}\n                      documentType={document.category}\n                      createdAt={document.createdAt}\n                      onViewClick={handleDocumentView}\n                      onEditClick={userPermissions.canEdit ? handleDocumentEdit : undefined}\n                      compact={viewMode === 'list'}\n                    />\n                  ))}\n                </div>\n              </CardContent>\n            </Card>\n          )}\n\n          {/* Document View Modal */}\n          <DocumentViewModal\n            documentId={selectedDocumentId}\n            userPermissions={userPermissions}\n            onEditClick={handleDocumentEdit}\n            isOpen={isViewModalOpen}\n            onOpenChange={setIsViewModalOpen}\n          />\n\n          {/* Document Edit/Create Modal */}\n          <DocumentEditModal\n            documentId={isCreating ? undefined : selectedDocumentId}\n            entityType={type}\n            entityId={entityId}\n            isOpen={isEditModalOpen}\n            onOpenChange={setIsEditModalOpen}\n            onSuccess={handleDocumentSuccess}\n          />\n        </div>\n      </div>\n    </div>\n  );\n}"],"version":3}