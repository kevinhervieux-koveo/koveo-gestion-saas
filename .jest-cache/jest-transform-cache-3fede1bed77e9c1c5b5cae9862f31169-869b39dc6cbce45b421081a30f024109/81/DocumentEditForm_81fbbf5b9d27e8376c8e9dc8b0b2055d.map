{"file":"/home/runner/workspace/client/src/components/document-management/DocumentEditForm.tsx","mappings":"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","names":[],"sources":["/home/runner/workspace/client/src/components/document-management/DocumentEditForm.tsx"],"sourcesContent":["import React from 'react';\nimport { z } from 'zod';\nimport { Input } from '@/components/ui/input';\nimport { Textarea } from '@/components/ui/textarea';\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from '@/components/ui/select';\nimport { FormControl, FormField, FormItem, FormLabel, FormMessage } from '@/components/ui/form';\nimport { Switch } from '@/components/ui/switch';\nimport { DocumentFormBase } from '@/components/forms/DocumentFormBase';\nimport { StandardFormField } from '@/components/forms/StandardFormField';\nimport type { Document } from '@shared/schema';\n\n// Document categories\nconst DOCUMENT_CATEGORIES = [\n  { value: 'bylaw', label: 'Bylaws' },\n  { value: 'financial', label: 'Financial' },\n  { value: 'maintenance', label: 'Maintenance' },\n  { value: 'legal', label: 'Legal' },\n  { value: 'meeting_minutes', label: 'Meeting Minutes' },\n  { value: 'insurance', label: 'Insurance' },\n  { value: 'contracts', label: 'Contracts' },\n  { value: 'permits', label: 'Permits' },\n  { value: 'inspection', label: 'Inspection' },\n  { value: 'other', label: 'Other' },\n];\n\n// Simplified document edit schema using our standard patterns\nconst documentEditSchema = z.object({\n  name: z.string().min(1, 'Document name is required').max(255),\n  description: z.string().max(1000).optional(),\n  category: z.enum(['bylaw', 'financial', 'maintenance', 'legal', 'meeting_minutes', 'insurance', 'contracts', 'permits', 'inspection', 'other']),\n  isVisible: z.boolean().default(true),\n  tags: z.string().optional(),\n});\n\ntype DocumentEditFormData = z.infer<typeof documentEditSchema>;\n\ninterface DocumentEditFormProps {\n  document: Document;\n  onSuccess?: (documentId: string, action: 'updated') => void;\n  onCancel?: () => void;\n  buildingId?: string;\n  residenceId?: string;\n}\n\n/**\n * Document Edit Form using the new consolidated DocumentFormBase pattern.\n * Demonstrates Phase 3 migration to standardized components.\n */\nexport function DocumentEditForm({ \n  document, \n  onSuccess, \n  onCancel, \n  buildingId,\n  residenceId\n}: DocumentEditFormProps) {\n  \n  const defaultValues: Partial<DocumentEditFormData> = {\n    name: document.name || '',\n    description: document.description || '',\n    category: (document.documentType as any) || 'other',\n    isVisible: document.isVisibleToTenants ?? true,\n    tags: '', // documents don't have tags in current schema\n  };\n\n  const handleSuccess = () => {\n    if (onSuccess) {\n      onSuccess(document.id, 'updated');\n    }\n  };\n\n  return (\n    <DocumentFormBase\n      title=\"Edit Document\"\n      schema={documentEditSchema}\n      defaultValues={defaultValues}\n      apiEndpoint={`/api/documents/${document.id}`}\n      queryKey={['documents']}\n      mode=\"edit\"\n      itemId={document.id}\n      buildingId={buildingId}\n      residenceId={residenceId}\n      onSuccess={handleSuccess}\n      onCancel={onCancel}\n      successMessages={{\n        update: 'Document updated successfully',\n      }}\n      uploadContext={{\n        type: 'documents',\n        buildingId,\n        residenceId,\n      }}\n      showTabs={false}\n      data-testid=\"document-edit-form\"\n    >\n      {(formControls) => (\n        <>\n          <StandardFormField\n            control={formControls.form.control}\n            name=\"name\"\n            label=\"Document Name\"\n            placeholder=\"Enter document name\"\n            data-testid=\"input-name\"\n          />\n\n          <FormField\n            control={formControls.form.control}\n            name=\"category\"\n            render={({ field }) => (\n              <FormItem>\n                <FormLabel>Category</FormLabel>\n                <Select onValueChange={field.onChange} defaultValue={field.value}>\n                  <FormControl>\n                    <SelectTrigger data-testid=\"select-category\">\n                      <SelectValue placeholder=\"Select category\" />\n                    </SelectTrigger>\n                  </FormControl>\n                  <SelectContent>\n                    {DOCUMENT_CATEGORIES.map((category) => (\n                      <SelectItem key={category.value} value={category.value}>\n                        {category.label}\n                      </SelectItem>\n                    ))}\n                  </SelectContent>\n                </Select>\n                <FormMessage />\n              </FormItem>\n            )}\n          />\n\n          <FormField\n            control={formControls.form.control}\n            name=\"description\"\n            render={({ field }) => (\n              <FormItem>\n                <FormLabel>Description</FormLabel>\n                <FormControl>\n                  <Textarea \n                    placeholder=\"Enter document description (optional)\"\n                    data-testid=\"textarea-description\"\n                    {...field} \n                  />\n                </FormControl>\n                <FormMessage />\n              </FormItem>\n            )}\n          />\n\n          <FormField\n            control={formControls.form.control}\n            name=\"tags\"\n            render={({ field }) => (\n              <FormItem>\n                <FormLabel>Tags</FormLabel>\n                <FormControl>\n                  <Input \n                    placeholder=\"Enter tags separated by commas\"\n                    data-testid=\"input-tags\"\n                    {...field} \n                  />\n                </FormControl>\n                <FormMessage />\n              </FormItem>\n            )}\n          />\n\n          <FormField\n            control={formControls.form.control}\n            name=\"isVisible\"\n            render={({ field }) => (\n              <FormItem className=\"flex flex-row items-center justify-between rounded-lg border p-4\">\n                <div className=\"space-y-0.5\">\n                  <FormLabel className=\"text-base\">\n                    Document Visibility\n                  </FormLabel>\n                  <p className=\"text-sm text-muted-foreground\">\n                    Make this document visible to relevant users\n                  </p>\n                </div>\n                <FormControl>\n                  <Switch\n                    checked={field.value}\n                    onCheckedChange={field.onChange}\n                    data-testid=\"switch-visibility\"\n                  />\n                </FormControl>\n              </FormItem>\n            )}\n          />\n        </>\n      )}\n    </DocumentFormBase>\n  );\n}"],"version":3}