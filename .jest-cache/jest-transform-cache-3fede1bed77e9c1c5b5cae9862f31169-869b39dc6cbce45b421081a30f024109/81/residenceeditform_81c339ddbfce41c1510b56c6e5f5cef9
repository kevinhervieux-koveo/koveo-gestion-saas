348fbdbd0db76c2c0c85ec22e35dc8b4
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.ResidenceEditForm = ResidenceEditForm;
const jsx_runtime_1 = require("react/jsx-runtime");
const react_1 = require("react");
const react_hook_form_1 = require("react-hook-form");
const zod_1 = require("@hookform/resolvers/zod");
const zod_2 = require("zod");
const react_query_1 = require("@tanstack/react-query");
const button_1 = require("@/components/ui/button");
const input_1 = require("@/components/ui/input");
const label_1 = require("@/components/ui/label");
const switch_1 = require("@/components/ui/switch");
const card_1 = require("@/components/ui/card");
const badge_1 = require("@/components/ui/badge");
const lucide_react_1 = require("lucide-react");
const use_toast_1 = require("@/hooks/use-toast");
const residenceEditSchema = zod_2.z.object({
    unitNumber: zod_2.z.string().min(1, 'Unit number is required and must be alphanumeric (example: 101A)'),
    floor: zod_2.z.coerce.number().min(0, 'Floor must be between 0 and 50 (example: 2)').max(50, 'Floor must be between 0 and 50 (example: 2)').optional(),
    squareFootage: zod_2.z.union([zod_2.z.coerce.number().min(1, 'Square footage must be between 1 and 10,000 sq ft (example: 1200)').max(10000, 'Square footage must be between 1 and 10,000 sq ft (example: 1200)'), zod_2.z.literal('')]).optional(),
    bedrooms: zod_2.z.coerce.number().min(0, 'Bedrooms must be between 0 and 10 (example: 2)').max(10, 'Bedrooms must be between 0 and 10 (example: 2)').optional(),
    bathrooms: zod_2.z.union([zod_2.z.coerce.number().min(0, 'Bathrooms must be between 0 and 10 (example: 1.5)').max(10, 'Bathrooms must be between 0 and 10 (example: 1.5)'), zod_2.z.literal('')]).optional(),
    balcony: zod_2.z.boolean(),
    parkingSpaceNumbers: zod_2.z.array(zod_2.z.string()).optional(),
    storageSpaceNumbers: zod_2.z.array(zod_2.z.string()).optional(),
    ownershipPercentage: zod_2.z.union([zod_2.z.coerce.number().min(0, 'Ownership percentage must be between 0 and 100 (example: 25)').max(100, 'Ownership percentage must be between 0 and 100 (example: 25)'), zod_2.z.literal('')]).optional(),
    monthlyFees: zod_2.z.union([zod_2.z.coerce.number().min(0, 'Monthly fees must be a positive amount in CAD (example: 350.00)').max(99999, 'Monthly fees must be less than $99,999 CAD (example: 350.00)'), zod_2.z.literal('')]).optional(),
});
/**
 *
 * @param root0
 * @param root0.residence
 * @param root0.onSuccess
 */
/**
 * ResidenceEditForm function.
 * @param root0
 * @param root0.residence
 * @param root0.onSuccess
 * @returns Function result.
 */
function ResidenceEditForm({ residence, onSuccess }) {
    const { toast } = (0, use_toast_1.useToast)();
    const queryClient = (0, react_query_1.useQueryClient)();
    const [parkingSpaces, setParkingSpaces] = (0, react_1.useState)(residence.parkingSpaceNumbers || []);
    const [storageSpaces, setStorageSpaces] = (0, react_1.useState)(residence.storageSpaceNumbers || []);
    const [newParkingSpace, setNewParkingSpace] = (0, react_1.useState)('');
    const [newStorageSpace, setNewStorageSpace] = (0, react_1.useState)('');
    const form = (0, react_hook_form_1.useForm)({
        resolver: (0, zod_1.zodResolver)(residenceEditSchema),
        defaultValues: {
            unitNumber: residence.unitNumber,
            floor: residence.floor || 0,
            squareFootage: residence.squareFootage ? Number(residence.squareFootage) : '',
            bedrooms: residence.bedrooms || 0,
            bathrooms: residence.bathrooms ? Number(residence.bathrooms) : '',
            balcony: residence.balcony || false,
            parkingSpaceNumbers: residence.parkingSpaceNumbers || [],
            storageSpaceNumbers: residence.storageSpaceNumbers || [],
            ownershipPercentage: residence.ownershipPercentage ?
                (Number(residence.ownershipPercentage) < 1 ? Number(residence.ownershipPercentage) * 100 : Number(residence.ownershipPercentage)) : '',
            monthlyFees: residence.monthlyFees ? Number(residence.monthlyFees) : '',
        },
    });
    const updateResidenceMutation = (0, react_query_1.useMutation)({
        mutationFn: async (_data) => {
            // Convert empty strings to null for optional numeric fields
            const processedData = {
                ..._data,
                squareFootage: _data.squareFootage === '' ? null : _data.squareFootage,
                bathrooms: _data.bathrooms === '' ? null : _data.bathrooms,
                ownershipPercentage: _data.ownershipPercentage === '' ? null : Number(_data.ownershipPercentage),
                monthlyFees: _data.monthlyFees === '' ? null : _data.monthlyFees,
                parkingSpaceNumbers: parkingSpaces,
                storageSpaceNumbers: storageSpaces,
            };
            const response = await fetch(`/api/residences/${residence.id}`, {
                method: 'PUT',
                headers: {
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify(processedData),
            });
            if (!response.ok) {
                const errorText = await response.text();
                throw new Error(`Failed to update residence: ${errorText}`);
            }
            return response.json();
        },
        onSuccess: () => {
            toast({
                title: 'Success',
                description: 'Residence updated successfully',
            });
            queryClient.invalidateQueries({ queryKey: ['/api/residences'] });
            onSuccess();
        },
        onError: (_error) => {
            toast({
                title: 'Error',
                description: _error?.message || 'Failed to update residence',
                variant: 'destructive',
            });
        },
    });
    const onSubmit = (_data) => {
        updateResidenceMutation.mutate(_data);
    };
    const addParkingSpace = () => {
        if (newParkingSpace.trim() && !parkingSpaces.includes(newParkingSpace.trim())) {
            setParkingSpaces([...parkingSpaces, newParkingSpace.trim()]);
            setNewParkingSpace('');
        }
    };
    const removeParkingSpace = (index) => {
        setParkingSpaces(parkingSpaces.filter((_, i) => i !== index));
    };
    const addStorageSpace = () => {
        if (newStorageSpace.trim() && !storageSpaces.includes(newStorageSpace.trim())) {
            setStorageSpaces([...storageSpaces, newStorageSpace.trim()]);
            setNewStorageSpace('');
        }
    };
    const removeStorageSpace = (index) => {
        setStorageSpaces(storageSpaces.filter((_, i) => i !== index));
    };
    return ((0, jsx_runtime_1.jsxs)("form", { onSubmit: form.handleSubmit(onSubmit), className: 'space-y-6', children: [(0, jsx_runtime_1.jsxs)(card_1.Card, { children: [(0, jsx_runtime_1.jsx)(card_1.CardHeader, { children: (0, jsx_runtime_1.jsx)(card_1.CardTitle, { children: "Basic Information" }) }), (0, jsx_runtime_1.jsxs)(card_1.CardContent, { className: 'space-y-4', children: [(0, jsx_runtime_1.jsxs)("div", { className: 'grid grid-cols-2 gap-4', children: [(0, jsx_runtime_1.jsxs)("div", { className: 'space-y-2', children: [(0, jsx_runtime_1.jsx)(label_1.Label, { htmlFor: 'unitNumber', children: "Unit Number" }), (0, jsx_runtime_1.jsx)(input_1.Input, { id: 'unitNumber', ...form.register('unitNumber') }), form.formState.errors.unitNumber && ((0, jsx_runtime_1.jsx)("p", { className: 'text-sm text-red-500', children: form.formState.errors.unitNumber.message }))] }), (0, jsx_runtime_1.jsxs)("div", { className: 'space-y-2', children: [(0, jsx_runtime_1.jsx)(label_1.Label, { htmlFor: 'floor', children: "Floor" }), (0, jsx_runtime_1.jsx)(input_1.Input, { id: 'floor', type: 'number', min: '0', ...form.register('floor', { valueAsNumber: true }) }), form.formState.errors.floor && ((0, jsx_runtime_1.jsx)("p", { className: 'text-sm text-red-500', children: form.formState.errors.floor.message }))] })] }), (0, jsx_runtime_1.jsxs)("div", { className: 'grid grid-cols-2 gap-4', children: [(0, jsx_runtime_1.jsxs)("div", { className: 'space-y-2', children: [(0, jsx_runtime_1.jsx)(label_1.Label, { htmlFor: 'squareFootage', children: "Square Footage" }), (0, jsx_runtime_1.jsx)(input_1.Input, { id: 'squareFootage', placeholder: 'e.g., 1200', ...form.register('squareFootage') }), form.formState.errors.squareFootage && ((0, jsx_runtime_1.jsx)("p", { className: 'text-sm text-red-500', children: form.formState.errors.squareFootage.message }))] }), (0, jsx_runtime_1.jsxs)("div", { className: 'space-y-2', children: [(0, jsx_runtime_1.jsx)(label_1.Label, { htmlFor: 'monthlyFees', children: "Monthly Fees ($)" }), (0, jsx_runtime_1.jsx)(input_1.Input, { id: 'monthlyFees', placeholder: 'e.g., 350.00', ...form.register('monthlyFees') }), form.formState.errors.monthlyFees && ((0, jsx_runtime_1.jsx)("p", { className: 'text-sm text-red-500', children: form.formState.errors.monthlyFees.message }))] })] }), (0, jsx_runtime_1.jsxs)("div", { className: 'grid grid-cols-3 gap-4', children: [(0, jsx_runtime_1.jsxs)("div", { className: 'space-y-2', children: [(0, jsx_runtime_1.jsx)(label_1.Label, { htmlFor: 'bedrooms', children: "Bedrooms" }), (0, jsx_runtime_1.jsx)(input_1.Input, { id: 'bedrooms', type: 'number', min: '0', ...form.register('bedrooms', { valueAsNumber: true }) }), form.formState.errors.bedrooms && ((0, jsx_runtime_1.jsx)("p", { className: 'text-sm text-red-500', children: form.formState.errors.bedrooms.message }))] }), (0, jsx_runtime_1.jsxs)("div", { className: 'space-y-2', children: [(0, jsx_runtime_1.jsx)(label_1.Label, { htmlFor: 'bathrooms', children: "Bathrooms" }), (0, jsx_runtime_1.jsx)(input_1.Input, { id: 'bathrooms', placeholder: 'e.g., 2.5', ...form.register('bathrooms') }), form.formState.errors.bathrooms && ((0, jsx_runtime_1.jsx)("p", { className: 'text-sm text-red-500', children: form.formState.errors.bathrooms.message }))] }), (0, jsx_runtime_1.jsxs)("div", { className: 'space-y-2', children: [(0, jsx_runtime_1.jsx)(label_1.Label, { htmlFor: 'ownershipPercentage', children: "Ownership 0-100%" }), (0, jsx_runtime_1.jsx)(input_1.Input, { id: 'ownershipPercentage', placeholder: 'e.g., 17', ...form.register('ownershipPercentage') }), form.formState.errors.ownershipPercentage && ((0, jsx_runtime_1.jsx)("p", { className: 'text-sm text-red-500', children: form.formState.errors.ownershipPercentage.message }))] })] }), (0, jsx_runtime_1.jsxs)("div", { className: 'flex items-center space-x-2', children: [(0, jsx_runtime_1.jsx)(switch_1.Switch, { id: 'balcony', checked: form.watch('balcony'), onCheckedChange: (checked) => form.setValue('balcony', checked) }), (0, jsx_runtime_1.jsx)(label_1.Label, { htmlFor: 'balcony', children: "Has Balcony" })] })] })] }), (0, jsx_runtime_1.jsxs)(card_1.Card, { children: [(0, jsx_runtime_1.jsx)(card_1.CardHeader, { children: (0, jsx_runtime_1.jsx)(card_1.CardTitle, { children: "Parking Spaces" }) }), (0, jsx_runtime_1.jsxs)(card_1.CardContent, { className: 'space-y-4', children: [(0, jsx_runtime_1.jsx)("div", { className: 'flex flex-wrap gap-2', children: parkingSpaces.map((space, index) => ((0, jsx_runtime_1.jsxs)(badge_1.Badge, { variant: 'secondary', className: 'flex items-center gap-1', children: [space, (0, jsx_runtime_1.jsx)(lucide_react_1.X, { className: 'w-3 h-3 cursor-pointer', onClick: () => removeParkingSpace(index) })] }, index))) }), (0, jsx_runtime_1.jsxs)("div", { className: 'flex gap-2', children: [(0, jsx_runtime_1.jsx)(input_1.Input, { placeholder: 'Add parking space number', value: newParkingSpace, onChange: (e) => setNewParkingSpace(e.target.value), onKeyPress: (e) => e.key === 'Enter' && (e.preventDefault(), addParkingSpace()) }), (0, jsx_runtime_1.jsx)(button_1.Button, { type: 'button', onClick: addParkingSpace, size: 'sm', children: (0, jsx_runtime_1.jsx)(lucide_react_1.Plus, { className: 'w-4 h-4' }) })] })] })] }), (0, jsx_runtime_1.jsxs)(card_1.Card, { children: [(0, jsx_runtime_1.jsx)(card_1.CardHeader, { children: (0, jsx_runtime_1.jsx)(card_1.CardTitle, { children: "Storage Spaces" }) }), (0, jsx_runtime_1.jsxs)(card_1.CardContent, { className: 'space-y-4', children: [(0, jsx_runtime_1.jsx)("div", { className: 'flex flex-wrap gap-2', children: storageSpaces.map((space, index) => ((0, jsx_runtime_1.jsxs)(badge_1.Badge, { variant: 'secondary', className: 'flex items-center gap-1', children: [space, (0, jsx_runtime_1.jsx)(lucide_react_1.X, { className: 'w-3 h-3 cursor-pointer', onClick: () => removeStorageSpace(index) })] }, index))) }), (0, jsx_runtime_1.jsxs)("div", { className: 'flex gap-2', children: [(0, jsx_runtime_1.jsx)(input_1.Input, { placeholder: 'Add storage space number', value: newStorageSpace, onChange: (e) => setNewStorageSpace(e.target.value), onKeyPress: (e) => e.key === 'Enter' && (e.preventDefault(), addStorageSpace()) }), (0, jsx_runtime_1.jsx)(button_1.Button, { type: 'button', onClick: addStorageSpace, size: 'sm', children: (0, jsx_runtime_1.jsx)(lucide_react_1.Plus, { className: 'w-4 h-4' }) })] })] })] }), (0, jsx_runtime_1.jsx)("div", { className: 'flex justify-end gap-2', children: (0, jsx_runtime_1.jsx)(button_1.Button, { type: 'submit', disabled: updateResidenceMutation.isPending, children: updateResidenceMutation.isPending ? 'Updating...' : 'Update Residence' }) })] }));
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiL2hvbWUvcnVubmVyL3dvcmtzcGFjZS9jbGllbnQvc3JjL2NvbXBvbmVudHMvZm9ybXMvcmVzaWRlbmNlLWVkaXQtZm9ybS50c3giLCJtYXBwaW5ncyI6Ijs7QUE2RUEsOENBOFFDOztBQTNWRCxpQ0FBaUM7QUFDakMscURBQTBDO0FBQzFDLGlEQUFzRDtBQUN0RCw2QkFBd0I7QUFDeEIsdURBQW9FO0FBQ3BFLG1EQUFnRDtBQUNoRCxpREFBOEM7QUFDOUMsaURBQThDO0FBQzlDLG1EQUFnRDtBQUVoRCwrQ0FBZ0Y7QUFDaEYsaURBQThDO0FBQzlDLCtDQUF1QztBQUN2QyxpREFBNkM7QUF5QjdDLE1BQU0sbUJBQW1CLEdBQUcsT0FBQyxDQUFDLE1BQU0sQ0FBQztJQUNuQyxVQUFVLEVBQUUsT0FBQyxDQUFDLE1BQU0sRUFBRSxDQUFDLEdBQUcsQ0FBQyxDQUFDLEVBQUUsa0VBQWtFLENBQUM7SUFDakcsS0FBSyxFQUFFLE9BQUMsQ0FBQyxNQUFNLENBQUMsTUFBTSxFQUFFLENBQUMsR0FBRyxDQUFDLENBQUMsRUFBRSw2Q0FBNkMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxFQUFFLEVBQUUsNkNBQTZDLENBQUMsQ0FBQyxRQUFRLEVBQUU7SUFDaEosYUFBYSxFQUFFLE9BQUMsQ0FBQyxLQUFLLENBQUMsQ0FBQyxPQUFDLENBQUMsTUFBTSxDQUFDLE1BQU0sRUFBRSxDQUFDLEdBQUcsQ0FBQyxDQUFDLEVBQUUsbUVBQW1FLENBQUMsQ0FBQyxHQUFHLENBQUMsS0FBSyxFQUFFLG1FQUFtRSxDQUFDLEVBQUUsT0FBQyxDQUFDLE9BQU8sQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsUUFBUSxFQUFFO0lBQ2pPLFFBQVEsRUFBRSxPQUFDLENBQUMsTUFBTSxDQUFDLE1BQU0sRUFBRSxDQUFDLEdBQUcsQ0FBQyxDQUFDLEVBQUUsZ0RBQWdELENBQUMsQ0FBQyxHQUFHLENBQUMsRUFBRSxFQUFFLGdEQUFnRCxDQUFDLENBQUMsUUFBUSxFQUFFO0lBQ3pKLFNBQVMsRUFBRSxPQUFDLENBQUMs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dUJBQXVCLENBQUMsU0FBUyxZQUM5RCx1QkFBdUIsQ0FBQyxTQUFTLENBQUMsQ0FBQyxDQUFDLGFBQWEsQ0FBQyxDQUFDLENBQUMsa0JBQWtCLEdBQ2hFLEdBQ0wsSUFDRCxDQUNSLENBQUM7QUFDSixDQUFDIiwibmFtZXMiOltdLCJzb3VyY2VzIjpbIi9ob21lL3J1bm5lci93b3Jrc3BhY2UvY2xpZW50L3NyYy9jb21wb25lbnRzL2Zvcm1zL3Jlc2lkZW5jZS1lZGl0LWZvcm0udHN4Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IHVzZVN0YXRlIH0gZnJvbSAncmVhY3QnO1xuaW1wb3J0IHsgdXNlRm9ybSB9IGZyb20gJ3JlYWN0LWhvb2stZm9ybSc7XG5pbXBvcnQgeyB6b2RSZXNvbHZlciB9IGZyb20gJ0Bob29rZm9ybS9yZXNvbHZlcnMvem9kJztcbmltcG9ydCB7IHogfSBmcm9tICd6b2QnO1xuaW1wb3J0IHsgdXNlTXV0YXRpb24sIHVzZVF1ZXJ5Q2xpZW50IH0gZnJvbSAnQHRhbnN0YWNrL3JlYWN0LXF1ZXJ5JztcbmltcG9ydCB7IEJ1dHRvbiB9IGZyb20gJ0AvY29tcG9uZW50cy91aS9idXR0b24nO1xuaW1wb3J0IHsgSW5wdXQgfSBmcm9tICdAL2NvbXBvbmVudHMvdWkvaW5wdXQnO1xuaW1wb3J0IHsgTGFiZWwgfSBmcm9tICdAL2NvbXBvbmVudHMvdWkvbGFiZWwnO1xuaW1wb3J0IHsgU3dpdGNoIH0gZnJvbSAnQC9jb21wb25lbnRzL3VpL3N3aXRjaCc7XG5pbXBvcnQgeyBUZXh0YXJlYSB9IGZyb20gJ0AvY29tcG9uZW50cy91aS90ZXh0YXJlYSc7XG5pbXBvcnQgeyBDYXJkLCBDYXJkQ29udGVudCwgQ2FyZEhlYWRlciwgQ2FyZFRpdGxlIH0gZnJvbSAnQC9jb21wb25lbnRzL3VpL2NhcmQnO1xuaW1wb3J0IHsgQmFkZ2UgfSBmcm9tICdAL2NvbXBvbmVudHMvdWkvYmFkZ2UnO1xuaW1wb3J0IHsgWCwgUGx1cyB9IGZyb20gJ2x1Y2lkZS1yZWFjdCc7XG5pbXBvcnQgeyB1c2VUb2FzdCB9IGZyb20gJ0AvaG9va3MvdXNlLXRvYXN0JztcbmltcG9ydCB7IGFwaVJlcXVlc3QgfSBmcm9tICdAL2xpYi9xdWVyeUNsaWVudCc7XG5cbi8qKlxuICpcbiAqL1xuaW50ZXJmYWNlIFJlc2lkZW5jZSB7XG4gIGlkOiBzdHJpbmc7XG4gIHVuaXROdW1iZXI6IHN0cmluZztcbiAgZmxvb3I6IG51bWJlcjtcbiAgc3F1YXJlRm9vdGFnZTogc3RyaW5nO1xuICBiZWRyb29tczogbnVtYmVyO1xuICBiYXRocm9vbXM6IHN0cmluZztcbiAgYmFsY29ueTogYm9vbGVhbjtcbiAgcGFya2luZ1NwYWNlTnVtYmVyczogc3RyaW5nW107XG4gIHN0b3JhZ2VTcGFjZU51bWJlcnM6IHN0cmluZ1tdO1xuICBvd25lcnNoaXBQZXJjZW50YWdlOiBzdHJpbmc7XG4gIG1vbnRobHlGZWVzOiBzdHJpbmc7XG4gIGlzQWN0aXZlOiBib29sZWFuO1xuICBidWlsZGluZzoge1xuICAgIGlkOiBzdHJpbmc7XG4gICAgbmFtZTogc3RyaW5nO1xuICB9O1xufVxuXG5jb25zdCByZXNpZGVuY2VFZGl0U2NoZW1hID0gei5vYmplY3Qoe1xuICB1bml0TnVtYmVyOiB6LnN0cmluZygpLm1pbigxLCAnVW5pdCBudW1iZXIgaXMgcmVxdWlyZWQgYW5kIG11c3QgYmUgYWxwaGFudW1lcmljIChleGFtcGxlOiAxMDFBKScpLFxuICBmbG9vcjogei5jb2VyY2UubnVtYmVyKCkubWluKDAsICdGbG9vciBtdXN0IGJlIGJldHdlZW4gMCBhbmQgNTAgKGV4YW1wbGU6IDIpJykubWF4KDUwLCAnRmxvb3IgbXVzdCBiZSBiZXR3ZWVuIDAgYW5kIDUwIChleGFtcGxlOiAyKScpLm9wdGlvbmFsKCksXG4gIHNxdWFyZUZvb3RhZ2U6IHoudW5pb24oW3ouY29lcmNlLm51bWJlcigpLm1pbigxLCAnU3F1YXJlIGZvb3RhZ2UgbXVzdCBiZSBiZXR3ZWVuIDEgYW5kIDEwLDAwMCBzcSBmdCAoZXhhbXBsZTogMTIwMCknKS5tYXgoMTAwMDAsICdTcXVhcmUgZm9vdGFnZSBtdXN0IGJlIGJldHdlZW4gMSBhbmQgMTAsMDAwIHNxIGZ0IChleGFtcGxlOiAxMjAwKScpLCB6LmxpdGVyYWwoJycpXSkub3B0aW9uYWwoKSxcbiAgYmVkcm9vbXM6IHouY29lcmNlLm51bWJlcigpLm1pbigwLCAnQmVkcm9vbXMgbXVzdCBiZSBiZXR3ZWVuIDAgYW5kIDEwIChleGFtcGxlOiAyKScpLm1heCgxMCwgJ0JlZHJvb21zIG11c3QgYmUgYmV0d2VlbiAwIGFuZCAxMCAoZXhhbXBsZTogMiknKS5vcHRpb25hbCgpLFxuICBiYXRocm9vbXM6IHoudW5pb24oW3ouY29lcmNlLm51bWJlcigpLm1pbigwLCAnQmF0aHJvb21zIG11c3QgYmUgYmV0d2VlbiAwIGFuZCAxMCAoZXhhbXBsZTogMS41KScpLm1heCgxMCwgJ0JhdGhyb29tcyBtdXN0IGJlIGJldHdlZW4gMCBhbmQgMTAgKGV4YW1wbGU6IDEuNSknKSwgei5saXRlcmFsKCcnKV0pLm9wdGlvbmFsKCksXG4gIGJhbGNvbnk6IHouYm9vbGVhbigpLFxuICBwYXJraW5nU3BhY2VOdW1iZXJzOiB6LmFycmF5KHouc3RyaW5nKCkpLm9wdGlvbmFsKCksXG4gIHN0b3JhZ2VTcGFjZU51bWJlcnM6IHouYXJyYXkoei5zdHJpbmcoKSkub3B0aW9uYWwoKSxcbiAgb3duZXJzaGlwUGVyY2VudGFnZTogei51bmlvbihbei5jb2VyY2UubnVtYmVyKCkubWluKDAsICdPd25lcnNoaXAgcGVyY2VudGFnZSBtdXN0IGJlIGJldHdlZW4gMCBhbmQgMTAwIChleGFtcGxlOiAyNSknKS5tYXgoMTAwLCAnT3duZXJzaGlwIHBlcmNlbnRhZ2UgbXVzdCBiZSBiZXR3ZWVuIDAgYW5kIDEwMCAoZXhhbXBsZTogMjUpJyksIHoubGl0ZXJhbCgnJyldKS5vcHRpb25hbCgpLFxuICBtb250aGx5RmVlczogei51bmlvbihbei5jb2VyY2UubnVtYmVyKCkubWluKDAsICdNb250aGx5IGZlZXMgbXVzdCBiZSBhIHBvc2l0aXZlIGFtb3VudCBpbiBDQUQgKGV4YW1wbGU6IDM1MC4wMCknKS5tYXgoOTk5OTksICdNb250aGx5IGZlZXMgbXVzdCBiZSBsZXNzIHRoYW4gJDk5LDk5OSBDQUQgKGV4YW1wbGU6IDM1MC4wMCknKSwgei5saXRlcmFsKCcnKV0pLm9wdGlvbmFsKCksXG59KTtcblxuLyoqXG4gKlxuICovXG50eXBlIFJlc2lkZW5jZUVkaXRGb3JtRGF0YSA9IHouaW5mZXI8dHlwZW9mIHJlc2lkZW5jZUVkaXRTY2hlbWE+O1xuXG4vKipcbiAqXG4gKi9cbmludGVyZmFjZSBSZXNpZGVuY2VFZGl0Rm9ybVByb3BzIHtcbiAgcmVzaWRlbmNlOiBSZXNpZGVuY2U7XG4gIG9uU3VjY2VzczogKCkgPT4gdm9pZDtcbn1cblxuLyoqXG4gKlxuICogQHBhcmFtIHJvb3QwXG4gKiBAcGFyYW0gcm9vdDAucmVzaWRlbmNlXG4gKiBAcGFyYW0gcm9vdDAub25TdWNjZXNzXG4gKi9cbi8qKlxuICogUmVzaWRlbmNlRWRpdEZvcm0gZnVuY3Rpb24uXG4gKiBAcGFyYW0gcm9vdDBcbiAqIEBwYXJhbSByb290MC5yZXNpZGVuY2VcbiAqIEBwYXJhbSByb290MC5vblN1Y2Nlc3NcbiAqIEByZXR1cm5zIEZ1bmN0aW9uIHJlc3VsdC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIFJlc2lkZW5jZUVkaXRGb3JtKHsgcmVzaWRlbmNlLCBvblN1Y2Nlc3MgfTogUmVzaWRlbmNlRWRpdEZvcm1Qcm9wcykge1xuICBjb25zdCB7IHRvYXN0IH0gPSB1c2VUb2FzdCgpO1xuICBjb25zdCBxdWVyeUNsaWVudCA9IHVzZVF1ZXJ5Q2xpZW50KCk7XG5cbiAgY29uc3QgW3BhcmtpbmdTcGFjZXMsIHNldFBhcmtpbmdTcGFjZXNdID0gdXNlU3RhdGU8c3RyaW5nW10+KHJlc2lkZW5jZS5wYXJraW5nU3BhY2VOdW1iZXJzIHx8IFtdKTtcbiAgY29uc3QgW3N0b3JhZ2VTcGFjZXMsIHNldFN0b3JhZ2VTcGFjZXNdID0gdXNlU3RhdGU8c3RyaW5nW10+KHJlc2lkZW5jZS5zdG9yYWdlU3BhY2VOdW1iZXJzIHx8IFtdKTtcbiAgY29uc3QgW25ld1BhcmtpbmdTcGFjZSwgc2V0TmV3UGFya2luZ1NwYWNlXSA9IHVzZVN0YXRlKCcnKTtcbiAgY29uc3QgW25ld1N0b3JhZ2VTcGFjZSwgc2V0TmV3U3RvcmFnZVNwYWNlXSA9IHVzZVN0YXRlKCcnKTtcblxuICBjb25zdCBmb3JtID0gdXNlRm9ybTxSZXNpZGVuY2VFZGl0Rm9ybURhdGE+KHtcbiAgICByZXNvbHZlcjogem9kUmVzb2x2ZXIocmVzaWRlbmNlRWRpdFNjaGVtYSksXG4gICAgZGVmYXVsdFZhbHVlczoge1xuICAgICAgdW5pdE51bWJlcjogcmVzaWRlbmNlLnVuaXROdW1iZXIsXG4gICAgICBmbG9vcjogcmVzaWRlbmNlLmZsb29yIHx8IDAsXG4gICAgICBzcXVhcmVGb290YWdlOiByZXNpZGVuY2Uuc3F1YXJlRm9vdGFnZSA/IE51bWJlcihyZXNpZGVuY2Uuc3F1YXJlRm9vdGFnZSkgOiAnJyxcbiAgICAgIGJlZHJvb21zOiByZXNpZGVuY2UuYmVkcm9vbXMgfHwgMCxcbiAgICAgIGJhdGhyb29tczogcmVzaWRlbmNlLmJhdGhyb29tcyA/IE51bWJlcihyZXNpZGVuY2UuYmF0aHJvb21zKSA6ICcnLFxuICAgICAgYmFsY29ueTogcmVzaWRlbmNlLmJhbGNvbnkgfHwgZmFsc2UsXG4gICAgICBwYXJraW5nU3BhY2VOdW1iZXJzOiByZXNpZGVuY2UucGFya2luZ1NwYWNlTnVtYmVycyB8fCBbXSxcbiAgICAgIHN0b3JhZ2VTcGFjZU51bWJlcnM6IHJlc2lkZW5jZS5zdG9yYWdlU3BhY2VOdW1iZXJzIHx8IFtdLFxuICAgICAgb3duZXJzaGlwUGVyY2VudGFnZTogcmVzaWRlbmNlLm93bmVyc2hpcFBlcmNlbnRhZ2UgPyBcbiAgICAgICAgKE51bWJlcihyZXNpZGVuY2Uub3duZXJzaGlwUGVyY2VudGFnZSkgPCAxID8gTnVtYmVyKHJlc2lkZW5jZS5vd25lcnNoaXBQZXJjZW50YWdlKSAqIDEwMCA6IE51bWJlcihyZXNpZGVuY2Uub3duZXJzaGlwUGVyY2VudGFnZSkpIDogJycsXG4gICAgICBtb250aGx5RmVlczogcmVzaWRlbmNlLm1vbnRobHlGZWVzID8gTnVtYmVyKHJlc2lkZW5jZS5tb250aGx5RmVlcykgOiAnJyxcbiAgICB9LFxuICB9KTtcblxuICBjb25zdCB1cGRhdGVSZXNpZGVuY2VNdXRhdGlvbiA9IHVzZU11dGF0aW9uKHtcbiAgICBtdXRhdGlvbkZuOiBhc3luYyAoX2RhdGE6IFJlc2lkZW5jZUVkaXRGb3JtRGF0YSkgPT4ge1xuICAgICAgLy8gQ29udmVydCBlbXB0eSBzdHJpbmdzIHRvIG51bGwgZm9yIG9wdGlvbmFsIG51bWVyaWMgZmllbGRzXG4gICAgICBjb25zdCBwcm9jZXNzZWREYXRhID0ge1xuICAgICAgICAuLi5fZGF0YSxcbiAgICAgICAgc3F1YXJlRm9vdGFnZTogX2RhdGEuc3F1YXJlRm9vdGFnZSA9PT0gJycgPyBudWxsIDogX2RhdGEuc3F1YXJlRm9vdGFnZSxcbiAgICAgICAgYmF0aHJvb21zOiBfZGF0YS5iYXRocm9vbXMgPT09ICcnID8gbnVsbCA6IF9kYXRhLmJhdGhyb29tcyxcbiAgICAgICAgb3duZXJzaGlwUGVyY2VudGFnZTogX2RhdGEub3duZXJzaGlwUGVyY2VudGFnZSA9PT0gJycgPyBudWxsIDogTnVtYmVyKF9kYXRhLm93bmVyc2hpcFBlcmNlbnRhZ2UpLFxuICAgICAgICBtb250aGx5RmVlczogX2RhdGEubW9udGhseUZlZXMgPT09ICcnID8gbnVsbCA6IF9kYXRhLm1vbnRobHlGZWVzLFxuICAgICAgICBwYXJraW5nU3BhY2VOdW1iZXJzOiBwYXJraW5nU3BhY2VzLFxuICAgICAgICBzdG9yYWdlU3BhY2VOdW1iZXJzOiBzdG9yYWdlU3BhY2VzLFxuICAgICAgfTtcblxuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaChgL2FwaS9yZXNpZGVuY2VzLyR7cmVzaWRlbmNlLmlkfWAsIHtcbiAgICAgICAgbWV0aG9kOiAnUFVUJyxcbiAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICAgIH0sXG4gICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHByb2Nlc3NlZERhdGEpLFxuICAgICAgfSk7XG5cbiAgICAgIGlmICghcmVzcG9uc2Uub2spIHtcbiAgICAgICAgY29uc3QgZXJyb3JUZXh0ID0gYXdhaXQgcmVzcG9uc2UudGV4dCgpO1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYEZhaWxlZCB0byB1cGRhdGUgcmVzaWRlbmNlOiAke2Vycm9yVGV4dH1gKTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHJlc3BvbnNlLmpzb24oKTtcbiAgICB9LFxuICAgIG9uU3VjY2VzczogKCkgPT4ge1xuICAgICAgdG9hc3Qoe1xuICAgICAgICB0aXRsZTogJ1N1Y2Nlc3MnLFxuICAgICAgICBkZXNjcmlwdGlvbjogJ1Jlc2lkZW5jZSB1cGRhdGVkIHN1Y2Nlc3NmdWxseScsXG4gICAgICB9KTtcbiAgICAgIHF1ZXJ5Q2xpZW50LmludmFsaWRhdGVRdWVyaWVzKHsgcXVlcnlLZXk6IFsnL2FwaS9yZXNpZGVuY2VzJ10gfSk7XG4gICAgICBvblN1Y2Nlc3MoKTtcbiAgICB9LFxuICAgIG9uRXJyb3I6IChfZXJyb3I6IHVua25vd24pID0+IHtcbiAgICAgIHRvYXN0KHtcbiAgICAgICAgdGl0bGU6ICdFcnJvcicsXG4gICAgICAgIGRlc2NyaXB0aW9uOiAoX2Vycm9yIGFzIEVycm9yKT8ubWVzc2FnZSB8fCAnRmFpbGVkIHRvIHVwZGF0ZSByZXNpZGVuY2UnLFxuICAgICAgICB2YXJpYW50OiAnZGVzdHJ1Y3RpdmUnLFxuICAgICAgfSk7XG4gICAgfSxcbiAgfSk7XG5cbiAgY29uc3Qgb25TdWJtaXQgPSAoX2RhdGE6IFJlc2lkZW5jZUVkaXRGb3JtRGF0YSkgPT4ge1xuICAgIHVwZGF0ZVJlc2lkZW5jZU11dGF0aW9uLm11dGF0ZShfZGF0YSk7XG4gIH07XG5cbiAgY29uc3QgYWRkUGFya2luZ1NwYWNlID0gKCkgPT4ge1xuICAgIGlmIChuZXdQYXJraW5nU3BhY2UudHJpbSgpICYmICFwYXJraW5nU3BhY2VzLmluY2x1ZGVzKG5ld1BhcmtpbmdTcGFjZS50cmltKCkpKSB7XG4gICAgICBzZXRQYXJraW5nU3BhY2VzKFsuLi5wYXJraW5nU3BhY2VzLCBuZXdQYXJraW5nU3BhY2UudHJpbSgpXSk7XG4gICAgICBzZXROZXdQYXJraW5nU3BhY2UoJycpO1xuICAgIH1cbiAgfTtcblxuICBjb25zdCByZW1vdmVQYXJraW5nU3BhY2UgPSAoaW5kZXg6IG51bWJlcikgPT4ge1xuICAgIHNldFBhcmtpbmdTcGFjZXMocGFya2luZ1NwYWNlcy5maWx0ZXIoKF8sIGkpID0+IGkgIT09IGluZGV4KSk7XG4gIH07XG5cbiAgY29uc3QgYWRkU3RvcmFnZVNwYWNlID0gKCkgPT4ge1xuICAgIGlmIChuZXdTdG9yYWdlU3BhY2UudHJpbSgpICYmICFzdG9yYWdlU3BhY2VzLmluY2x1ZGVzKG5ld1N0b3JhZ2VTcGFjZS50cmltKCkpKSB7XG4gICAgICBzZXRTdG9yYWdlU3BhY2VzKFsuLi5zdG9yYWdlU3BhY2VzLCBuZXdTdG9yYWdlU3BhY2UudHJpbSgpXSk7XG4gICAgICBzZXROZXdTdG9yYWdlU3BhY2UoJycpO1xuICAgIH1cbiAgfTtcblxuICBjb25zdCByZW1vdmVTdG9yYWdlU3BhY2UgPSAoaW5kZXg6IG51bWJlcikgPT4ge1xuICAgIHNldFN0b3JhZ2VTcGFjZXMoc3RvcmFnZVNwYWNlcy5maWx0ZXIoKF8sIGkpID0+IGkgIT09IGluZGV4KSk7XG4gIH07XG5cbiAgcmV0dXJuIChcbiAgICA8Zm9ybSBvblN1Ym1pdD17Zm9ybS5oYW5kbGVTdWJtaXQob25TdWJtaXQpfSBjbGFzc05hbWU9J3NwYWNlLXktNic+XG4gICAgICB7LyogQmFzaWMgSW5mb3JtYXRpb24gKi99XG4gICAgICA8Q2FyZD5cbiAgICAgICAgPENhcmRIZWFkZXI+XG4gICAgICAgICAgPENhcmRUaXRsZT5CYXNpYyBJbmZvcm1hdGlvbjwvQ2FyZFRpdGxlPlxuICAgICAgICA8L0NhcmRIZWFkZXI+XG4gICAgICAgIDxDYXJkQ29udGVudCBjbGFzc05hbWU9J3NwYWNlLXktNCc+XG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9J2dyaWQgZ3JpZC1jb2xzLTIgZ2FwLTQnPlxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9J3NwYWNlLXktMic+XG4gICAgICAgICAgICAgIDxMYWJlbCBodG1sRm9yPSd1bml0TnVtYmVyJz5Vbml0IE51bWJlcjwvTGFiZWw+XG4gICAgICAgICAgICAgIDxJbnB1dCBpZD0ndW5pdE51bWJlcicgey4uLmZvcm0ucmVnaXN0ZXIoJ3VuaXROdW1iZXInKX0gLz5cbiAgICAgICAgICAgICAge2Zvcm0uZm9ybVN0YXRlLmVycm9ycy51bml0TnVtYmVyICYmIChcbiAgICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9J3RleHQtc20gdGV4dC1yZWQtNTAwJz57Zm9ybS5mb3JtU3RhdGUuZXJyb3JzLnVuaXROdW1iZXIubWVzc2FnZX08L3A+XG4gICAgICAgICAgICAgICl9XG4gICAgICAgICAgICA8L2Rpdj5cblxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9J3NwYWNlLXktMic+XG4gICAgICAgICAgICAgIDxMYWJlbCBodG1sRm9yPSdmbG9vcic+Rmxvb3I8L0xhYmVsPlxuICAgICAgICAgICAgICA8SW5wdXRcbiAgICAgICAgICAgICAgICBpZD0nZmxvb3InXG4gICAgICAgICAgICAgICAgdHlwZT0nbnVtYmVyJ1xuICAgICAgICAgICAgICAgIG1pbj0nMCdcbiAgICAgICAgICAgICAgICB7Li4uZm9ybS5yZWdpc3RlcignZmxvb3InLCB7IHZhbHVlQXNOdW1iZXI6IHRydWUgfSl9XG4gICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgIHtmb3JtLmZvcm1TdGF0ZS5lcnJvcnMuZmxvb3IgJiYgKFxuICAgICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT0ndGV4dC1zbSB0ZXh0LXJlZC01MDAnPntmb3JtLmZvcm1TdGF0ZS5lcnJvcnMuZmxvb3IubWVzc2FnZX08L3A+XG4gICAgICAgICAgICAgICl9XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICA8L2Rpdj5cblxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSdncmlkIGdyaWQtY29scy0yIGdhcC00Jz5cbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSdzcGFjZS15LTInPlxuICAgICAgICAgICAgICA8TGFiZWwgaHRtbEZvcj0nc3F1YXJlRm9vdGFnZSc+U3F1YXJlIEZvb3RhZ2U8L0xhYmVsPlxuICAgICAgICAgICAgICA8SW5wdXRcbiAgICAgICAgICAgICAgICBpZD0nc3F1YXJlRm9vdGFnZSdcbiAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcj0nZS5nLiwgMTIwMCdcbiAgICAgICAgICAgICAgICB7Li4uZm9ybS5yZWdpc3Rlcignc3F1YXJlRm9vdGFnZScpfVxuICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICB7Zm9ybS5mb3JtU3RhdGUuZXJyb3JzLnNxdWFyZUZvb3RhZ2UgJiYgKFxuICAgICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT0ndGV4dC1zbSB0ZXh0LXJlZC01MDAnPlxuICAgICAgICAgICAgICAgICAge2Zvcm0uZm9ybVN0YXRlLmVycm9ycy5zcXVhcmVGb290YWdlLm1lc3NhZ2V9XG4gICAgICAgICAgICAgICAgPC9wPlxuICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgPC9kaXY+XG5cbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSdzcGFjZS15LTInPlxuICAgICAgICAgICAgICA8TGFiZWwgaHRtbEZvcj0nbW9udGhseUZlZXMnPk1vbnRobHkgRmVlcyAoJCk8L0xhYmVsPlxuICAgICAgICAgICAgICA8SW5wdXRcbiAgICAgICAgICAgICAgICBpZD0nbW9udGhseUZlZXMnXG4gICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI9J2UuZy4sIDM1MC4wMCdcbiAgICAgICAgICAgICAgICB7Li4uZm9ybS5yZWdpc3RlcignbW9udGhseUZlZXMnKX1cbiAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAge2Zvcm0uZm9ybVN0YXRlLmVycm9ycy5tb250aGx5RmVlcyAmJiAoXG4gICAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPSd0ZXh0LXNtIHRleHQtcmVkLTUwMCc+e2Zvcm0uZm9ybVN0YXRlLmVycm9ycy5tb250aGx5RmVlcy5tZXNzYWdlfTwvcD5cbiAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIDwvZGl2PlxuXG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9J2dyaWQgZ3JpZC1jb2xzLTMgZ2FwLTQnPlxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9J3NwYWNlLXktMic+XG4gICAgICAgICAgICAgIDxMYWJlbCBodG1sRm9yPSdiZWRyb29tcyc+QmVkcm9vbXM8L0xhYmVsPlxuICAgICAgICAgICAgICA8SW5wdXRcbiAgICAgICAgICAgICAgICBpZD0nYmVkcm9vbXMnXG4gICAgICAgICAgICAgICAgdHlwZT0nbnVtYmVyJ1xuICAgICAgICAgICAgICAgIG1pbj0nMCdcbiAgICAgICAgICAgICAgICB7Li4uZm9ybS5yZWdpc3RlcignYmVkcm9vbXMnLCB7IHZhbHVlQXNOdW1iZXI6IHRydWUgfSl9XG4gICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgIHtmb3JtLmZvcm1TdGF0ZS5lcnJvcnMuYmVkcm9vbXMgJiYgKFxuICAgICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT0ndGV4dC1zbSB0ZXh0LXJlZC01MDAnPntmb3JtLmZvcm1TdGF0ZS5lcnJvcnMuYmVkcm9vbXMubWVzc2FnZX08L3A+XG4gICAgICAgICAgICAgICl9XG4gICAgICAgICAgICA8L2Rpdj5cblxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9J3NwYWNlLXktMic+XG4gICAgICAgICAgICAgIDxMYWJlbCBodG1sRm9yPSdiYXRocm9vbXMnPkJhdGhyb29tczwvTGFiZWw+XG4gICAgICAgICAgICAgIDxJbnB1dCBpZD0nYmF0aHJvb21zJyBwbGFjZWhvbGRlcj0nZS5nLiwgMi41JyB7Li4uZm9ybS5yZWdpc3RlcignYmF0aHJvb21zJyl9IC8+XG4gICAgICAgICAgICAgIHtmb3JtLmZvcm1TdGF0ZS5lcnJvcnMuYmF0aHJvb21zICYmIChcbiAgICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9J3RleHQtc20gdGV4dC1yZWQtNTAwJz57Zm9ybS5mb3JtU3RhdGUuZXJyb3JzLmJhdGhyb29tcy5tZXNzYWdlfTwvcD5cbiAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgIDwvZGl2PlxuXG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0nc3BhY2UteS0yJz5cbiAgICAgICAgICAgICAgPExhYmVsIGh0bWxGb3I9J293bmVyc2hpcFBlcmNlbnRhZ2UnPk93bmVyc2hpcCAwLTEwMCU8L0xhYmVsPlxuICAgICAgICAgICAgICA8SW5wdXRcbiAgICAgICAgICAgICAgICBpZD0nb3duZXJzaGlwUGVyY2VudGFnZSdcbiAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcj0nZS5nLiwgMTcnXG4gICAgICAgICAgICAgICAgey4uLmZvcm0ucmVnaXN0ZXIoJ293bmVyc2hpcFBlcmNlbnRhZ2UnKX1cbiAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAge2Zvcm0uZm9ybVN0YXRlLmVycm9ycy5vd25lcnNoaXBQZXJjZW50YWdlICYmIChcbiAgICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9J3RleHQtc20gdGV4dC1yZWQtNTAwJz5cbiAgICAgICAgICAgICAgICAgIHtmb3JtLmZvcm1TdGF0ZS5lcnJvcnMub3duZXJzaGlwUGVyY2VudGFnZS5tZXNzYWdlfVxuICAgICAgICAgICAgICAgIDwvcD5cbiAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIDwvZGl2PlxuXG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9J2ZsZXggaXRlbXMtY2VudGVyIHNwYWNlLXgtMic+XG4gICAgICAgICAgICA8U3dpdGNoXG4gICAgICAgICAgICAgIGlkPSdiYWxjb255J1xuICAgICAgICAgICAgICBjaGVja2VkPXtmb3JtLndhdGNoKCdiYWxjb255Jyl9XG4gICAgICAgICAgICAgIG9uQ2hlY2tlZENoYW5nZT17KGNoZWNrZWQpID0+IGZvcm0uc2V0VmFsdWUoJ2JhbGNvbnknLCBjaGVja2VkKX1cbiAgICAgICAgICAgIC8+XG4gICAgICAgICAgICA8TGFiZWwgaHRtbEZvcj0nYmFsY29ueSc+SGFzIEJhbGNvbnk8L0xhYmVsPlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICA8L0NhcmRDb250ZW50PlxuICAgICAgPC9DYXJkPlxuXG4gICAgICB7LyogUGFya2luZyBTcGFjZXMgKi99XG4gICAgICA8Q2FyZD5cbiAgICAgICAgPENhcmRIZWFkZXI+XG4gICAgICAgICAgPENhcmRUaXRsZT5QYXJraW5nIFNwYWNlczwvQ2FyZFRpdGxlPlxuICAgICAgICA8L0NhcmRIZWFkZXI+XG4gICAgICAgIDxDYXJkQ29udGVudCBjbGFzc05hbWU9J3NwYWNlLXktNCc+XG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9J2ZsZXggZmxleC13cmFwIGdhcC0yJz5cbiAgICAgICAgICAgIHtwYXJraW5nU3BhY2VzLm1hcCgoc3BhY2UsIGluZGV4KSA9PiAoXG4gICAgICAgICAgICAgIDxCYWRnZSBrZXk9e2luZGV4fSB2YXJpYW50PSdzZWNvbmRhcnknIGNsYXNzTmFtZT0nZmxleCBpdGVtcy1jZW50ZXIgZ2FwLTEnPlxuICAgICAgICAgICAgICAgIHtzcGFjZX1cbiAgICAgICAgICAgICAgICA8WCBjbGFzc05hbWU9J3ctMyBoLTMgY3Vyc29yLXBvaW50ZXInIG9uQ2xpY2s9eygpID0+IHJlbW92ZVBhcmtpbmdTcGFjZShpbmRleCl9IC8+XG4gICAgICAgICAgICAgIDwvQmFkZ2U+XG4gICAgICAgICAgICApKX1cbiAgICAgICAgICA8L2Rpdj5cblxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSdmbGV4IGdhcC0yJz5cbiAgICAgICAgICAgIDxJbnB1dFxuICAgICAgICAgICAgICBwbGFjZWhvbGRlcj0nQWRkIHBhcmtpbmcgc3BhY2UgbnVtYmVyJ1xuICAgICAgICAgICAgICB2YWx1ZT17bmV3UGFya2luZ1NwYWNlfVxuICAgICAgICAgICAgICBvbkNoYW5nZT17KGUpID0+IHNldE5ld1BhcmtpbmdTcGFjZShlLnRhcmdldC52YWx1ZSl9XG4gICAgICAgICAgICAgIG9uS2V5UHJlc3M9eyhlKSA9PiBlLmtleSA9PT0gJ0VudGVyJyAmJiAoZS5wcmV2ZW50RGVmYXVsdCgpLCBhZGRQYXJraW5nU3BhY2UoKSl9XG4gICAgICAgICAgICAvPlxuICAgICAgICAgICAgPEJ1dHRvbiB0eXBlPSdidXR0b24nIG9uQ2xpY2s9e2FkZFBhcmtpbmdTcGFjZX0gc2l6ZT0nc20nPlxuICAgICAgICAgICAgICA8UGx1cyBjbGFzc05hbWU9J3ctNCBoLTQnIC8+XG4gICAgICAgICAgICA8L0J1dHRvbj5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgPC9DYXJkQ29udGVudD5cbiAgICAgIDwvQ2FyZD5cblxuICAgICAgey8qIFN0b3JhZ2UgU3BhY2VzICovfVxuICAgICAgPENhcmQ+XG4gICAgICAgIDxDYXJkSGVhZGVyPlxuICAgICAgICAgIDxDYXJkVGl0bGU+U3RvcmFnZSBTcGFjZXM8L0NhcmRUaXRsZT5cbiAgICAgICAgPC9DYXJkSGVhZGVyPlxuICAgICAgICA8Q2FyZENvbnRlbnQgY2xhc3NOYW1lPSdzcGFjZS15LTQnPlxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSdmbGV4IGZsZXgtd3JhcCBnYXAtMic+XG4gICAgICAgICAgICB7c3RvcmFnZVNwYWNlcy5tYXAoKHNwYWNlLCBpbmRleCkgPT4gKFxuICAgICAgICAgICAgICA8QmFkZ2Uga2V5PXtpbmRleH0gdmFyaWFudD0nc2Vjb25kYXJ5JyBjbGFzc05hbWU9J2ZsZXggaXRlbXMtY2VudGVyIGdhcC0xJz5cbiAgICAgICAgICAgICAgICB7c3BhY2V9XG4gICAgICAgICAgICAgICAgPFggY2xhc3NOYW1lPSd3LTMgaC0zIGN1cnNvci1wb2ludGVyJyBvbkNsaWNrPXsoKSA9PiByZW1vdmVTdG9yYWdlU3BhY2UoaW5kZXgpfSAvPlxuICAgICAgICAgICAgICA8L0JhZGdlPlxuICAgICAgICAgICAgKSl9XG4gICAgICAgICAgPC9kaXY+XG5cbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0nZmxleCBnYXAtMic+XG4gICAgICAgICAgICA8SW5wdXRcbiAgICAgICAgICAgICAgcGxhY2Vob2xkZXI9J0FkZCBzdG9yYWdlIHNwYWNlIG51bWJlcidcbiAgICAgICAgICAgICAgdmFsdWU9e25ld1N0b3JhZ2VTcGFjZX1cbiAgICAgICAgICAgICAgb25DaGFuZ2U9eyhlKSA9PiBzZXROZXdTdG9yYWdlU3BhY2UoZS50YXJnZXQudmFsdWUpfVxuICAgICAgICAgICAgICBvbktleVByZXNzPXsoZSkgPT4gZS5rZXkgPT09ICdFbnRlcicgJiYgKGUucHJldmVudERlZmF1bHQoKSwgYWRkU3RvcmFnZVNwYWNlKCkpfVxuICAgICAgICAgICAgLz5cbiAgICAgICAgICAgIDxCdXR0b24gdHlwZT0nYnV0dG9uJyBvbkNsaWNrPXthZGRTdG9yYWdlU3BhY2V9IHNpemU9J3NtJz5cbiAgICAgICAgICAgICAgPFBsdXMgY2xhc3NOYW1lPSd3LTQgaC00JyAvPlxuICAgICAgICAgICAgPC9CdXR0b24+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgIDwvQ2FyZENvbnRlbnQ+XG4gICAgICA8L0NhcmQ+XG5cbiAgICAgIHsvKiBTdWJtaXQgQnV0dG9uICovfVxuICAgICAgPGRpdiBjbGFzc05hbWU9J2ZsZXgganVzdGlmeS1lbmQgZ2FwLTInPlxuICAgICAgICA8QnV0dG9uIHR5cGU9J3N1Ym1pdCcgZGlzYWJsZWQ9e3VwZGF0ZVJlc2lkZW5jZU11dGF0aW9uLmlzUGVuZGluZ30+XG4gICAgICAgICAge3VwZGF0ZVJlc2lkZW5jZU11dGF0aW9uLmlzUGVuZGluZyA/ICdVcGRhdGluZy4uLicgOiAnVXBkYXRlIFJlc2lkZW5jZSd9XG4gICAgICAgIDwvQnV0dG9uPlxuICAgICAgPC9kaXY+XG4gICAgPC9mb3JtPlxuICApO1xufVxuIl0sInZlcnNpb24iOjN9