d4e697462b893ea887dcec0e1df6ee66
"use strict";
var __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {
    if (k2 === undefined) k2 = k;
    var desc = Object.getOwnPropertyDescriptor(m, k);
    if (!desc || ("get" in desc ? !m.__esModule : desc.writable || desc.configurable)) {
      desc = { enumerable: true, get: function() { return m[k]; } };
    }
    Object.defineProperty(o, k2, desc);
}) : (function(o, m, k, k2) {
    if (k2 === undefined) k2 = k;
    o[k2] = m[k];
}));
var __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {
    Object.defineProperty(o, "default", { enumerable: true, value: v });
}) : function(o, v) {
    o["default"] = v;
});
var __importStar = (this && this.__importStar) || (function () {
    var ownKeys = function(o) {
        ownKeys = Object.getOwnPropertyNames || function (o) {
            var ar = [];
            for (var k in o) if (Object.prototype.hasOwnProperty.call(o, k)) ar[ar.length] = k;
            return ar;
        };
        return ownKeys(o);
    };
    return function (mod) {
        if (mod && mod.__esModule) return mod;
        var result = {};
        if (mod != null) for (var k = ownKeys(mod), i = 0; i < k.length; i++) if (k[i] !== "default") __createBinding(result, mod, k[i]);
        __setModuleDefault(result, mod);
        return result;
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
exports.InvoiceCard = InvoiceCard;
const jsx_runtime_1 = require("react/jsx-runtime");
const react_1 = __importStar(require("react"));
const card_1 = require("@/components/ui/card");
const badge_1 = require("@/components/ui/badge");
const button_1 = require("@/components/ui/button");
const dropdown_menu_1 = require("@/components/ui/dropdown-menu");
const dialog_1 = require("@/components/ui/dialog");
const lucide_react_1 = require("lucide-react");
const date_fns_1 = require("date-fns");
const react_query_1 = require("@tanstack/react-query");
const use_toast_1 = require("@/hooks/use-toast");
const queryClient_1 = require("@/lib/queryClient");
const InvoiceForm_1 = require("./InvoiceForm");
const DocumentCard_1 = require("@/components/document-management/DocumentCard");
function InvoiceCard({ invoice, onUpdate }) {
    const [showEditDialog, setShowEditDialog] = (0, react_1.useState)(false);
    const [showViewDialog, setShowViewDialog] = (0, react_1.useState)(false);
    const queryClient = (0, react_query_1.useQueryClient)();
    const { toast } = (0, use_toast_1.useToast)();
    const deleteMutation = (0, react_query_1.useMutation)({
        mutationFn: async () => {
            const response = await (0, queryClient_1.apiRequest)('DELETE', `/api/invoices/${invoice.id}`);
            if (!response.ok) {
                const error = await response.json();
                throw new Error(error.message || 'Failed to delete invoice');
            }
            return response.json();
        },
        onSuccess: () => {
            toast({
                title: 'Success',
                description: 'Invoice deleted successfully',
            });
            queryClient.invalidateQueries({ queryKey: ['/api/invoices'] });
            onUpdate?.();
        },
        onError: (error) => {
            toast({
                title: 'Error',
                description: error.message,
                variant: 'destructive',
            });
        },
    });
    const handleDelete = () => {
        if (window.confirm('Are you sure you want to delete this invoice? This action cannot be undone.')) {
            deleteMutation.mutate();
        }
    };
    const handleEditSuccess = () => {
        setShowEditDialog(false);
        onUpdate?.();
    };
    const getPaymentTypeVariant = (paymentType) => {
        return paymentType === 'recurring' ? 'default' : 'secondary';
    };
    return ((0, jsx_runtime_1.jsxs)(jsx_runtime_1.Fragment, { children: [(0, jsx_runtime_1.jsxs)(card_1.Card, { className: "hover:shadow-md transition-shadow", "data-testid": `invoice-card-${invoice.id}`, children: [(0, jsx_runtime_1.jsx)(card_1.CardHeader, { className: "pb-3", children: (0, jsx_runtime_1.jsxs)("div", { className: "flex items-start justify-between", children: [(0, jsx_runtime_1.jsxs)("div", { className: "space-y-1", children: [(0, jsx_runtime_1.jsx)(card_1.CardTitle, { className: "text-lg font-semibold", children: invoice.vendorName }), (0, jsx_runtime_1.jsxs)("p", { className: "text-sm text-muted-foreground", children: ["#", invoice.invoiceNumber] })] }), (0, jsx_runtime_1.jsxs)(dropdown_menu_1.DropdownMenu, { children: [(0, jsx_runtime_1.jsx)(dropdown_menu_1.DropdownMenuTrigger, { asChild: true, children: (0, jsx_runtime_1.jsx)(button_1.Button, { variant: "ghost", size: "sm", "data-testid": `button-actions-${invoice.id}`, children: (0, jsx_runtime_1.jsx)(lucide_react_1.MoreHorizontal, { className: "w-4 h-4" }) }) }), (0, jsx_runtime_1.jsxs)(dropdown_menu_1.DropdownMenuContent, { align: "end", children: [(0, jsx_runtime_1.jsxs)(dropdown_menu_1.DropdownMenuItem, { onClick: () => setShowViewDialog(true), children: [(0, jsx_runtime_1.jsx)(lucide_react_1.Eye, { className: "w-4 h-4 mr-2" }), "View Details"] }), (0, jsx_runtime_1.jsxs)(dropdown_menu_1.DropdownMenuItem, { onClick: () => setShowEditDialog(true), children: [(0, jsx_runtime_1.jsx)(lucide_react_1.Edit2, { className: "w-4 h-4 mr-2" }), "Edit"] }), (0, jsx_runtime_1.jsxs)(dropdown_menu_1.DropdownMenuItem, { onClick: handleDelete, className: "text-destructive focus:text-destructive", disabled: deleteMutation.isPending, children: [(0, jsx_runtime_1.jsx)(lucide_react_1.Trash2, { className: "w-4 h-4 mr-2" }), "Delete"] })] })] })] }) }), (0, jsx_runtime_1.jsxs)(card_1.CardContent, { className: "space-y-4", children: [(0, jsx_runtime_1.jsxs)("div", { className: "flex items-center justify-between", children: [(0, jsx_runtime_1.jsxs)("div", { className: "flex items-center gap-2", children: [(0, jsx_runtime_1.jsx)(lucide_react_1.DollarSign, { className: "w-4 h-4 text-muted-foreground" }), (0, jsx_runtime_1.jsxs)("span", { className: "font-semibold text-lg", children: ["$", parseFloat(invoice.totalAmount.toString()).toFixed(2)] })] }), (0, jsx_runtime_1.jsx)(badge_1.Badge, { variant: getPaymentTypeVariant(invoice.paymentType), children: invoice.paymentType === 'recurring' ? 'Recurring' : 'One-time' })] }), (0, jsx_runtime_1.jsxs)("div", { className: "space-y-2 text-sm", children: [(0, jsx_runtime_1.jsxs)("div", { className: "flex items-center gap-2", children: [(0, jsx_runtime_1.jsx)(lucide_react_1.Calendar, { className: "w-4 h-4 text-muted-foreground" }), (0, jsx_runtime_1.jsxs)("span", { children: ["Due: ", (0, date_fns_1.format)(new Date(invoice.dueDate), 'MMM dd, yyyy')] })] }), invoice.frequency && ((0, jsx_runtime_1.jsxs)("div", { className: "flex items-center gap-2", children: [(0, jsx_runtime_1.jsx)("span", { className: "w-4 h-4" }), (0, jsx_runtime_1.jsx)("span", { className: "text-muted-foreground", children: invoice.frequency.charAt(0).toUpperCase() + invoice.frequency.slice(1) })] })), invoice.buildingId && ((0, jsx_runtime_1.jsxs)("div", { className: "flex items-center gap-2", children: [(0, jsx_runtime_1.jsx)(lucide_react_1.Building, { className: "w-4 h-4 text-muted-foreground" }), (0, jsx_runtime_1.jsxs)("span", { className: "text-muted-foreground truncate", children: ["Building ID: ", invoice.buildingId.slice(0, 8), "..."] })] }))] }), invoice.documentId && ((0, jsx_runtime_1.jsx)("div", { className: "pt-2 border-t", children: (0, jsx_runtime_1.jsxs)("div", { className: "flex items-center gap-2 text-sm text-muted-foreground", children: [(0, jsx_runtime_1.jsx)(lucide_react_1.FileText, { className: "w-4 h-4" }), (0, jsx_runtime_1.jsx)("span", { children: "Document attached" }), invoice.isAiExtracted && ((0, jsx_runtime_1.jsx)(badge_1.Badge, { variant: "outline", className: "text-xs", children: "AI Processed" }))] }) }))] })] }), (0, jsx_runtime_1.jsx)(dialog_1.Dialog, { open: showEditDialog, onOpenChange: setShowEditDialog, children: (0, jsx_runtime_1.jsxs)(dialog_1.DialogContent, { className: "max-w-4xl max-h-[90vh] overflow-y-auto", children: [(0, jsx_runtime_1.jsx)(dialog_1.DialogHeader, { children: (0, jsx_runtime_1.jsx)(dialog_1.DialogTitle, { children: "Edit Invoice" }) }), (0, jsx_runtime_1.jsx)(InvoiceForm_1.InvoiceForm, { mode: "edit", invoice: invoice, onSuccess: handleEditSuccess, onCancel: () => setShowEditDialog(false) })] }) }), (0, jsx_runtime_1.jsx)(dialog_1.Dialog, { open: showViewDialog, onOpenChange: setShowViewDialog, children: (0, jsx_runtime_1.jsxs)(dialog_1.DialogContent, { className: "max-w-2xl max-h-[90vh] overflow-y-auto", children: [(0, jsx_runtime_1.jsx)(dialog_1.DialogHeader, { children: (0, jsx_runtime_1.jsx)(dialog_1.DialogTitle, { children: "Invoice Details" }) }), (0, jsx_runtime_1.jsxs)("div", { className: "space-y-6", children: [(0, jsx_runtime_1.jsxs)("div", { className: "grid grid-cols-2 gap-4", children: [(0, jsx_runtime_1.jsxs)("div", { children: [(0, jsx_runtime_1.jsx)("h4", { className: "font-medium mb-2", children: "Vendor Information" }), (0, jsx_runtime_1.jsxs)("p", { className: "text-sm text-muted-foreground", children: ["Vendor: ", invoice.vendorName] }), (0, jsx_runtime_1.jsxs)("p", { className: "text-sm text-muted-foreground", children: ["Invoice #: ", invoice.invoiceNumber] })] }), (0, jsx_runtime_1.jsxs)("div", { children: [(0, jsx_runtime_1.jsx)("h4", { className: "font-medium mb-2", children: "Payment Information" }), (0, jsx_runtime_1.jsxs)("p", { className: "text-sm text-muted-foreground", children: ["Amount: $", parseFloat(invoice.totalAmount.toString()).toFixed(2)] }), (0, jsx_runtime_1.jsxs)("p", { className: "text-sm text-muted-foreground", children: ["Due: ", (0, date_fns_1.format)(new Date(invoice.dueDate), 'PPP')] }), (0, jsx_runtime_1.jsxs)("p", { className: "text-sm text-muted-foreground", children: ["Type: ", invoice.paymentType] }), invoice.frequency && ((0, jsx_runtime_1.jsxs)("p", { className: "text-sm text-muted-foreground", children: ["Frequency: ", invoice.frequency] }))] })] }), invoice.documentId && ((0, jsx_runtime_1.jsxs)("div", { children: [(0, jsx_runtime_1.jsx)("h4", { className: "font-medium mb-4", children: "Attached Document" }), (0, jsx_runtime_1.jsx)(DocumentCard_1.DocumentCard, { documentId: invoice.documentId, showRemove: false })] })), invoice.isAiExtracted && invoice.extractionConfidence && ((0, jsx_runtime_1.jsxs)("div", { className: "bg-muted/50 p-4 rounded-lg", children: [(0, jsx_runtime_1.jsx)("h4", { className: "font-medium mb-2", children: "AI Extraction Info" }), (0, jsx_runtime_1.jsxs)("p", { className: "text-sm text-muted-foreground", children: ["Confidence: ", (parseFloat(invoice.extractionConfidence.toString()) * 100).toFixed(1), "%"] })] })), (0, jsx_runtime_1.jsxs)("div", { className: "text-xs text-muted-foreground", children: [(0, jsx_runtime_1.jsxs)("p", { children: ["Created: ", (0, date_fns_1.format)(new Date(invoice.createdAt), 'PPP pp')] }), (0, jsx_runtime_1.jsxs)("p", { children: ["Updated: ", (0, date_fns_1.format)(new Date(invoice.updatedAt), 'PPP pp')] })] })] })] }) })] }));
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiL2hvbWUvcnVubmVyL3dvcmtzcGFjZS9jbGllbnQvc3JjL2NvbXBvbmVudHMvaW52b2ljZS1tYW5hZ2VtZW50L0ludm9pY2VDYXJkLnRzeCIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQXVDQSxrQ0E2TkM7O0FBcFFELCtDQUF3QztBQUN4QywrQ0FBZ0Y7QUFDaEYsaURBQThDO0FBQzlDLG1EQUFnRDtBQUNoRCxpRUFLdUM7QUFDdkMsbURBS2dDO0FBQ2hDLCtDQVNzQjtBQUN0Qix1Q0FBa0M7QUFDbEMsdURBQW9FO0FBQ3BFLGlEQUE2QztBQUM3QyxtREFBK0M7QUFFL0MsK0NBQTRDO0FBQzVDLGdGQUE2RTtBQU83RSxTQUFnQixXQUFXLENBQUMsRUFBRSxPQUFPLEVBQUUsUUFBUSxFQUFvQjtJQUNqRSxNQUFNLENBQUMsY0FBYyxFQUFFLGlCQUFpQixDQUFDLEdBQUcsSUFBQSxnQkFBUSxFQUFDLEtBQUssQ0FBQyxDQUFDO0lBQzVELE1BQU0sQ0FBQyxjQUFjLEVBQUUsaUJBQWlCLENBQUMsR0FBRyxJQUFBLGdCQUFRLEVBQUMsS0FBSyxDQUFDLENBQUM7SUFDNUQsTUFBTSxXQUFXLEdBQUcsSUFBQSw0QkFBYyxHQUFFLENBQUM7SUFDckMsTUFBTSxFQUFFLEtBQUssRUFBRSxHQUFHLElBQUEsb0JBQVEsR0FBRSxDQUFDO0lBRTdCLE1BQU0sY0FBYyxHQUFHLElBQUEseUJBQVcsRUFBQztRQUNqQyxVQUFVLEVBQUUsS0FBSyxJQUFJLEVBQUU7WUFDckIsTUFBTSxRQUFRLEdBQUcsTUFBTSxJQUFBLHdCQUFVLEVBQUMsUUFBUSxFQUFFLGlCQUFpQixPQUFPLENBQUMsRUFBRSxFQUFFLENBQUMsQ0FBQztZQUMzRSxJQUFJLENBQUMsUUFBUSxDQUFDLEVBQUUsRUFBRSxDQUFDO2dCQUNqQixNQUFNLEtBQUssR0FBRyxNQUFNLFFBQVEsQ0FBQyxJQUFJLEVBQUUsQ0FBQztnQkFDcEMsTUFBTSxJQUFJLEtBQUssQ0FBQyxLQUFLLENBQUMsT0FB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QUMsT0FBTyxDQUFDLENBQUMsQ0FBQyxTQUNqRixJQUNBLENBQ1AsRUFFRCxpQ0FBSyxTQUFTLEVBQUMsK0JBQStCLGFBQzVDLHVEQUFhLElBQUEsaUJBQU0sRUFBQyxJQUFJLElBQUksQ0FBQyxPQUFPLENBQUMsU0FBUyxDQUFDLEVBQUUsUUFBUSxDQUFDLElBQUssRUFDL0QsdURBQWEsSUFBQSxpQkFBTSxFQUFDLElBQUksSUFBSSxDQUFDLE9BQU8sQ0FBQyxTQUFTLENBQUMsRUFBRSxRQUFRLENBQUMsSUFBSyxJQUMzRCxJQUNGLElBQ1EsR0FDVCxJQUNSLENBQ0osQ0FBQztBQUNKLENBQUMiLCJuYW1lcyI6W10sInNvdXJjZXMiOlsiL2hvbWUvcnVubmVyL3dvcmtzcGFjZS9jbGllbnQvc3JjL2NvbXBvbmVudHMvaW52b2ljZS1tYW5hZ2VtZW50L0ludm9pY2VDYXJkLnRzeCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgUmVhY3QsIHsgdXNlU3RhdGUgfSBmcm9tICdyZWFjdCc7XG5pbXBvcnQgeyBDYXJkLCBDYXJkQ29udGVudCwgQ2FyZEhlYWRlciwgQ2FyZFRpdGxlIH0gZnJvbSAnQC9jb21wb25lbnRzL3VpL2NhcmQnO1xuaW1wb3J0IHsgQmFkZ2UgfSBmcm9tICdAL2NvbXBvbmVudHMvdWkvYmFkZ2UnO1xuaW1wb3J0IHsgQnV0dG9uIH0gZnJvbSAnQC9jb21wb25lbnRzL3VpL2J1dHRvbic7XG5pbXBvcnQge1xuICBEcm9wZG93bk1lbnUsXG4gIERyb3Bkb3duTWVudUNvbnRlbnQsXG4gIERyb3Bkb3duTWVudUl0ZW0sXG4gIERyb3Bkb3duTWVudVRyaWdnZXIsXG59IGZyb20gJ0AvY29tcG9uZW50cy91aS9kcm9wZG93bi1tZW51JztcbmltcG9ydCB7XG4gIERpYWxvZyxcbiAgRGlhbG9nQ29udGVudCxcbiAgRGlhbG9nSGVhZGVyLFxuICBEaWFsb2dUaXRsZSxcbn0gZnJvbSAnQC9jb21wb25lbnRzL3VpL2RpYWxvZyc7XG5pbXBvcnQgeyBcbiAgTW9yZUhvcml6b250YWwsIFxuICBFZGl0MiwgXG4gIFRyYXNoMiwgXG4gIEZpbGVUZXh0LCBcbiAgQ2FsZW5kYXIsXG4gIERvbGxhclNpZ24sXG4gIEJ1aWxkaW5nLFxuICBFeWVcbn0gZnJvbSAnbHVjaWRlLXJlYWN0JztcbmltcG9ydCB7IGZvcm1hdCB9IGZyb20gJ2RhdGUtZm5zJztcbmltcG9ydCB7IHVzZU11dGF0aW9uLCB1c2VRdWVyeUNsaWVudCB9IGZyb20gJ0B0YW5zdGFjay9yZWFjdC1xdWVyeSc7XG5pbXBvcnQgeyB1c2VUb2FzdCB9IGZyb20gJ0AvaG9va3MvdXNlLXRvYXN0JztcbmltcG9ydCB7IGFwaVJlcXVlc3QgfSBmcm9tICdAL2xpYi9xdWVyeUNsaWVudCc7XG5pbXBvcnQgdHlwZSB7IEludm9pY2UgfSBmcm9tICdAc2hhcmVkL3NjaGVtYXMvaW52b2ljZXMnO1xuaW1wb3J0IHsgSW52b2ljZUZvcm0gfSBmcm9tICcuL0ludm9pY2VGb3JtJztcbmltcG9ydCB7IERvY3VtZW50Q2FyZCB9IGZyb20gJ0AvY29tcG9uZW50cy9kb2N1bWVudC1tYW5hZ2VtZW50L0RvY3VtZW50Q2FyZCc7XG5cbmludGVyZmFjZSBJbnZvaWNlQ2FyZFByb3BzIHtcbiAgaW52b2ljZTogSW52b2ljZTtcbiAgb25VcGRhdGU/OiAoKSA9PiB2b2lkO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gSW52b2ljZUNhcmQoeyBpbnZvaWNlLCBvblVwZGF0ZSB9OiBJbnZvaWNlQ2FyZFByb3BzKSB7XG4gIGNvbnN0IFtzaG93RWRpdERpYWxvZywgc2V0U2hvd0VkaXREaWFsb2ddID0gdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBbc2hvd1ZpZXdEaWFsb2csIHNldFNob3dWaWV3RGlhbG9nXSA9IHVzZVN0YXRlKGZhbHNlKTtcbiAgY29uc3QgcXVlcnlDbGllbnQgPSB1c2VRdWVyeUNsaWVudCgpO1xuICBjb25zdCB7IHRvYXN0IH0gPSB1c2VUb2FzdCgpO1xuXG4gIGNvbnN0IGRlbGV0ZU11dGF0aW9uID0gdXNlTXV0YXRpb24oe1xuICAgIG11dGF0aW9uRm46IGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgYXBpUmVxdWVzdCgnREVMRVRFJywgYC9hcGkvaW52b2ljZXMvJHtpbnZvaWNlLmlkfWApO1xuICAgICAgaWYgKCFyZXNwb25zZS5vaykge1xuICAgICAgICBjb25zdCBlcnJvciA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGVycm9yLm1lc3NhZ2UgfHwgJ0ZhaWxlZCB0byBkZWxldGUgaW52b2ljZScpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHJlc3BvbnNlLmpzb24oKTtcbiAgICB9LFxuICAgIG9uU3VjY2VzczogKCkgPT4ge1xuICAgICAgdG9hc3Qoe1xuICAgICAgICB0aXRsZTogJ1N1Y2Nlc3MnLFxuICAgICAgICBkZXNjcmlwdGlvbjogJ0ludm9pY2UgZGVsZXRlZCBzdWNjZXNzZnVsbHknLFxuICAgICAgfSk7XG4gICAgICBxdWVyeUNsaWVudC5pbnZhbGlkYXRlUXVlcmllcyh7IHF1ZXJ5S2V5OiBbJy9hcGkvaW52b2ljZXMnXSB9KTtcbiAgICAgIG9uVXBkYXRlPy4oKTtcbiAgICB9LFxuICAgIG9uRXJyb3I6IChlcnJvcjogRXJyb3IpID0+IHtcbiAgICAgIHRvYXN0KHtcbiAgICAgICAgdGl0bGU6ICdFcnJvcicsXG4gICAgICAgIGRlc2NyaXB0aW9uOiBlcnJvci5tZXNzYWdlLFxuICAgICAgICB2YXJpYW50OiAnZGVzdHJ1Y3RpdmUnLFxuICAgICAgfSk7XG4gICAgfSxcbiAgfSk7XG5cbiAgY29uc3QgaGFuZGxlRGVsZXRlID0gKCkgPT4ge1xuICAgIGlmICh3aW5kb3cuY29uZmlybSgnQXJlIHlvdSBzdXJlIHlvdSB3YW50IHRvIGRlbGV0ZSB0aGlzIGludm9pY2U/IFRoaXMgYWN0aW9uIGNhbm5vdCBiZSB1bmRvbmUuJykpIHtcbiAgICAgIGRlbGV0ZU11dGF0aW9uLm11dGF0ZSgpO1xuICAgIH1cbiAgfTtcblxuICBjb25zdCBoYW5kbGVFZGl0U3VjY2VzcyA9ICgpID0+IHtcbiAgICBzZXRTaG93RWRpdERpYWxvZyhmYWxzZSk7XG4gICAgb25VcGRhdGU/LigpO1xuICB9O1xuXG4gIGNvbnN0IGdldFBheW1lbnRUeXBlVmFyaWFudCA9IChwYXltZW50VHlwZTogc3RyaW5nKSA9PiB7XG4gICAgcmV0dXJuIHBheW1lbnRUeXBlID09PSAncmVjdXJyaW5nJyA/ICdkZWZhdWx0JyA6ICdzZWNvbmRhcnknO1xuICB9O1xuXG4gIHJldHVybiAoXG4gICAgPD5cbiAgICAgIDxDYXJkIGNsYXNzTmFtZT1cImhvdmVyOnNoYWRvdy1tZCB0cmFuc2l0aW9uLXNoYWRvd1wiIGRhdGEtdGVzdGlkPXtgaW52b2ljZS1jYXJkLSR7aW52b2ljZS5pZH1gfT5cbiAgICAgICAgPENhcmRIZWFkZXIgY2xhc3NOYW1lPVwicGItM1wiPlxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBpdGVtcy1zdGFydCBqdXN0aWZ5LWJldHdlZW5cIj5cbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwic3BhY2UteS0xXCI+XG4gICAgICAgICAgICAgIDxDYXJkVGl0bGUgY2xhc3NOYW1lPVwidGV4dC1sZyBmb250LXNlbWlib2xkXCI+XG4gICAgICAgICAgICAgICAge2ludm9pY2UudmVuZG9yTmFtZX1cbiAgICAgICAgICAgICAgPC9DYXJkVGl0bGU+XG4gICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cInRleHQtc20gdGV4dC1tdXRlZC1mb3JlZ3JvdW5kXCI+XG4gICAgICAgICAgICAgICAgI3tpbnZvaWNlLmludm9pY2VOdW1iZXJ9XG4gICAgICAgICAgICAgIDwvcD5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgPERyb3Bkb3duTWVudT5cbiAgICAgICAgICAgICAgPERyb3Bkb3duTWVudVRyaWdnZXIgYXNDaGlsZD5cbiAgICAgICAgICAgICAgICA8QnV0dG9uIFxuICAgICAgICAgICAgICAgICAgdmFyaWFudD1cImdob3N0XCIgXG4gICAgICAgICAgICAgICAgICBzaXplPVwic21cIlxuICAgICAgICAgICAgICAgICAgZGF0YS10ZXN0aWQ9e2BidXR0b24tYWN0aW9ucy0ke2ludm9pY2UuaWR9YH1cbiAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICA8TW9yZUhvcml6b250YWwgY2xhc3NOYW1lPVwidy00IGgtNFwiIC8+XG4gICAgICAgICAgICAgICAgPC9CdXR0b24+XG4gICAgICAgICAgICAgIDwvRHJvcGRvd25NZW51VHJpZ2dlcj5cbiAgICAgICAgICAgICAgPERyb3Bkb3duTWVudUNvbnRlbnQgYWxpZ249XCJlbmRcIj5cbiAgICAgICAgICAgICAgICA8RHJvcGRvd25NZW51SXRlbSBvbkNsaWNrPXsoKSA9PiBzZXRTaG93Vmlld0RpYWxvZyh0cnVlKX0+XG4gICAgICAgICAgICAgICAgICA8RXllIGNsYXNzTmFtZT1cInctNCBoLTQgbXItMlwiIC8+XG4gICAgICAgICAgICAgICAgICBWaWV3IERldGFpbHNcbiAgICAgICAgICAgICAgICA8L0Ryb3Bkb3duTWVudUl0ZW0+XG4gICAgICAgICAgICAgICAgPERyb3Bkb3duTWVudUl0ZW0gb25DbGljaz17KCkgPT4gc2V0U2hvd0VkaXREaWFsb2codHJ1ZSl9PlxuICAgICAgICAgICAgICAgICAgPEVkaXQyIGNsYXNzTmFtZT1cInctNCBoLTQgbXItMlwiIC8+XG4gICAgICAgICAgICAgICAgICBFZGl0XG4gICAgICAgICAgICAgICAgPC9Ecm9wZG93bk1lbnVJdGVtPlxuICAgICAgICAgICAgICAgIDxEcm9wZG93bk1lbnVJdGVtIFxuICAgICAgICAgICAgICAgICAgb25DbGljaz17aGFuZGxlRGVsZXRlfVxuICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwidGV4dC1kZXN0cnVjdGl2ZSBmb2N1czp0ZXh0LWRlc3RydWN0aXZlXCJcbiAgICAgICAgICAgICAgICAgIGRpc2FibGVkPXtkZWxldGVNdXRhdGlvbi5pc1BlbmRpbmd9XG4gICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgPFRyYXNoMiBjbGFzc05hbWU9XCJ3LTQgaC00IG1yLTJcIiAvPlxuICAgICAgICAgICAgICAgICAgRGVsZXRlXG4gICAgICAgICAgICAgICAgPC9Ecm9wZG93bk1lbnVJdGVtPlxuICAgICAgICAgICAgICA8L0Ryb3Bkb3duTWVudUNvbnRlbnQ+XG4gICAgICAgICAgICA8L0Ryb3Bkb3duTWVudT5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgPC9DYXJkSGVhZGVyPlxuXG4gICAgICAgIDxDYXJkQ29udGVudCBjbGFzc05hbWU9XCJzcGFjZS15LTRcIj5cbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggaXRlbXMtY2VudGVyIGp1c3RpZnktYmV0d2VlblwiPlxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGl0ZW1zLWNlbnRlciBnYXAtMlwiPlxuICAgICAgICAgICAgICA8RG9sbGFyU2lnbiBjbGFzc05hbWU9XCJ3LTQgaC00IHRleHQtbXV0ZWQtZm9yZWdyb3VuZFwiIC8+XG4gICAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT1cImZvbnQtc2VtaWJvbGQgdGV4dC1sZ1wiPlxuICAgICAgICAgICAgICAgICR7cGFyc2VGbG9hdChpbnZvaWNlLnRvdGFsQW1vdW50LnRvU3RyaW5nKCkpLnRvRml4ZWQoMil9XG4gICAgICAgICAgICAgIDwvc3Bhbj5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgPEJhZGdlIHZhcmlhbnQ9e2dldFBheW1lbnRUeXBlVmFyaWFudChpbnZvaWNlLnBheW1lbnRUeXBlKX0+XG4gICAgICAgICAgICAgIHtpbnZvaWNlLnBheW1lbnRUeXBlID09PSAncmVjdXJyaW5nJyA/ICdSZWN1cnJpbmcnIDogJ09uZS10aW1lJ31cbiAgICAgICAgICAgIDwvQmFkZ2U+XG4gICAgICAgICAgPC9kaXY+XG5cbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInNwYWNlLXktMiB0ZXh0LXNtXCI+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggaXRlbXMtY2VudGVyIGdhcC0yXCI+XG4gICAgICAgICAgICAgIDxDYWxlbmRhciBjbGFzc05hbWU9XCJ3LTQgaC00IHRleHQtbXV0ZWQtZm9yZWdyb3VuZFwiIC8+XG4gICAgICAgICAgICAgIDxzcGFuPkR1ZToge2Zvcm1hdChuZXcgRGF0ZShpbnZvaWNlLmR1ZURhdGUpLCAnTU1NIGRkLCB5eXl5Jyl9PC9zcGFuPlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHtpbnZvaWNlLmZyZXF1ZW5jeSAmJiAoXG4gICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBpdGVtcy1jZW50ZXIgZ2FwLTJcIj5cbiAgICAgICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9XCJ3LTQgaC00XCIgLz5cbiAgICAgICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9XCJ0ZXh0LW11dGVkLWZvcmVncm91bmRcIj5cbiAgICAgICAgICAgICAgICAgIHtpbnZvaWNlLmZyZXF1ZW5jeS5jaGFyQXQoMCkudG9VcHBlckNhc2UoKSArIGludm9pY2UuZnJlcXVlbmN5LnNsaWNlKDEpfVxuICAgICAgICAgICAgICAgIDwvc3Bhbj5cbiAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICApfVxuXG4gICAgICAgICAgICB7aW52b2ljZS5idWlsZGluZ0lkICYmIChcbiAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGl0ZW1zLWNlbnRlciBnYXAtMlwiPlxuICAgICAgICAgICAgICAgIDxCdWlsZGluZyBjbGFzc05hbWU9XCJ3LTQgaC00IHRleHQtbXV0ZWQtZm9yZWdyb3VuZFwiIC8+XG4gICAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPVwidGV4dC1tdXRlZC1mb3JlZ3JvdW5kIHRydW5jYXRlXCI+XG4gICAgICAgICAgICAgICAgICBCdWlsZGluZyBJRDoge2ludm9pY2UuYnVpbGRpbmdJZC5zbGljZSgwLCA4KX0uLi5cbiAgICAgICAgICAgICAgICA8L3NwYW4+XG4gICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgKX1cbiAgICAgICAgICA8L2Rpdj5cblxuICAgICAgICAgIHtpbnZvaWNlLmRvY3VtZW50SWQgJiYgKFxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJwdC0yIGJvcmRlci10XCI+XG4gICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBpdGVtcy1jZW50ZXIgZ2FwLTIgdGV4dC1zbSB0ZXh0LW11dGVkLWZvcmVncm91bmRcIj5cbiAgICAgICAgICAgICAgICA8RmlsZVRleHQgY2xhc3NOYW1lPVwidy00IGgtNFwiIC8+XG4gICAgICAgICAgICAgICAgPHNwYW4+RG9jdW1lbnQgYXR0YWNoZWQ8L3NwYW4+XG4gICAgICAgICAgICAgICAge2ludm9pY2UuaXNBaUV4dHJhY3RlZCAmJiAoXG4gICAgICAgICAgICAgICAgICA8QmFkZ2UgdmFyaWFudD1cIm91dGxpbmVcIiBjbGFzc05hbWU9XCJ0ZXh0LXhzXCI+XG4gICAgICAgICAgICAgICAgICAgIEFJIFByb2Nlc3NlZFxuICAgICAgICAgICAgICAgICAgPC9CYWRnZT5cbiAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICl9XG4gICAgICAgIDwvQ2FyZENvbnRlbnQ+XG4gICAgICA8L0NhcmQ+XG5cbiAgICAgIHsvKiBFZGl0IERpYWxvZyAqL31cbiAgICAgIDxEaWFsb2cgb3Blbj17c2hvd0VkaXREaWFsb2d9IG9uT3BlbkNoYW5nZT17c2V0U2hvd0VkaXREaWFsb2d9PlxuICAgICAgICA8RGlhbG9nQ29udGVudCBjbGFzc05hbWU9XCJtYXgtdy00eGwgbWF4LWgtWzkwdmhdIG92ZXJmbG93LXktYXV0b1wiPlxuICAgICAgICAgIDxEaWFsb2dIZWFkZXI+XG4gICAgICAgICAgICA8RGlhbG9nVGl0bGU+RWRpdCBJbnZvaWNlPC9EaWFsb2dUaXRsZT5cbiAgICAgICAgICA8L0RpYWxvZ0hlYWRlcj5cbiAgICAgICAgICA8SW52b2ljZUZvcm1cbiAgICAgICAgICAgIG1vZGU9XCJlZGl0XCJcbiAgICAgICAgICAgIGludm9pY2U9e2ludm9pY2V9XG4gICAgICAgICAgICBvblN1Y2Nlc3M9e2hhbmRsZUVkaXRTdWNjZXNzfVxuICAgICAgICAgICAgb25DYW5jZWw9eygpID0+IHNldFNob3dFZGl0RGlhbG9nKGZhbHNlKX1cbiAgICAgICAgICAvPlxuICAgICAgICA8L0RpYWxvZ0NvbnRlbnQ+XG4gICAgICA8L0RpYWxvZz5cblxuICAgICAgey8qIFZpZXcgRGlhbG9nICovfVxuICAgICAgPERpYWxvZyBvcGVuPXtzaG93Vmlld0RpYWxvZ30gb25PcGVuQ2hhbmdlPXtzZXRTaG93Vmlld0RpYWxvZ30+XG4gICAgICAgIDxEaWFsb2dDb250ZW50IGNsYXNzTmFtZT1cIm1heC13LTJ4bCBtYXgtaC1bOTB2aF0gb3ZlcmZsb3cteS1hdXRvXCI+XG4gICAgICAgICAgPERpYWxvZ0hlYWRlcj5cbiAgICAgICAgICAgIDxEaWFsb2dUaXRsZT5JbnZvaWNlIERldGFpbHM8L0RpYWxvZ1RpdGxlPlxuICAgICAgICAgIDwvRGlhbG9nSGVhZGVyPlxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwic3BhY2UteS02XCI+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImdyaWQgZ3JpZC1jb2xzLTIgZ2FwLTRcIj5cbiAgICAgICAgICAgICAgPGRpdj5cbiAgICAgICAgICAgICAgICA8aDQgY2xhc3NOYW1lPVwiZm9udC1tZWRpdW0gbWItMlwiPlZlbmRvciBJbmZvcm1hdGlvbjwvaDQ+XG4gICAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwidGV4dC1zbSB0ZXh0LW11dGVkLWZvcmVncm91bmRcIj5WZW5kb3I6IHtpbnZvaWNlLnZlbmRvck5hbWV9PC9wPlxuICAgICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cInRleHQtc20gdGV4dC1tdXRlZC1mb3JlZ3JvdW5kXCI+SW52b2ljZSAjOiB7aW52b2ljZS5pbnZvaWNlTnVtYmVyfTwvcD5cbiAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgIDxkaXY+XG4gICAgICAgICAgICAgICAgPGg0IGNsYXNzTmFtZT1cImZvbnQtbWVkaXVtIG1iLTJcIj5QYXltZW50IEluZm9ybWF0aW9uPC9oND5cbiAgICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJ0ZXh0LXNtIHRleHQtbXV0ZWQtZm9yZWdyb3VuZFwiPlxuICAgICAgICAgICAgICAgICAgQW1vdW50OiAke3BhcnNlRmxvYXQoaW52b2ljZS50b3RhbEFtb3VudC50b1N0cmluZygpKS50b0ZpeGVkKDIpfVxuICAgICAgICAgICAgICAgIDwvcD5cbiAgICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJ0ZXh0LXNtIHRleHQtbXV0ZWQtZm9yZWdyb3VuZFwiPlxuICAgICAgICAgICAgICAgICAgRHVlOiB7Zm9ybWF0KG5ldyBEYXRlKGludm9pY2UuZHVlRGF0ZSksICdQUFAnKX1cbiAgICAgICAgICAgICAgICA8L3A+XG4gICAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwidGV4dC1zbSB0ZXh0LW11dGVkLWZvcmVncm91bmRcIj5cbiAgICAgICAgICAgICAgICAgIFR5cGU6IHtpbnZvaWNlLnBheW1lbnRUeXBlfVxuICAgICAgICAgICAgICAgIDwvcD5cbiAgICAgICAgICAgICAgICB7aW52b2ljZS5mcmVxdWVuY3kgJiYgKFxuICAgICAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwidGV4dC1zbSB0ZXh0LW11dGVkLWZvcmVncm91bmRcIj5cbiAgICAgICAgICAgICAgICAgICAgRnJlcXVlbmN5OiB7aW52b2ljZS5mcmVxdWVuY3l9XG4gICAgICAgICAgICAgICAgICA8L3A+XG4gICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICA8L2Rpdj5cblxuICAgICAgICAgICAge2ludm9pY2UuZG9jdW1lbnRJZCAmJiAoXG4gICAgICAgICAgICAgIDxkaXY+XG4gICAgICAgICAgICAgICAgPGg0IGNsYXNzTmFtZT1cImZvbnQtbWVkaXVtIG1iLTRcIj5BdHRhY2hlZCBEb2N1bWVudDwvaDQ+XG4gICAgICAgICAgICAgICAgPERvY3VtZW50Q2FyZFxuICAgICAgICAgICAgICAgICAgZG9jdW1lbnRJZD17aW52b2ljZS5kb2N1bWVudElkfVxuICAgICAgICAgICAgICAgICAgc2hvd1JlbW92ZT17ZmFsc2V9XG4gICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICApfVxuXG4gICAgICAgICAgICB7aW52b2ljZS5pc0FpRXh0cmFjdGVkICYmIGludm9pY2UuZXh0cmFjdGlvbkNvbmZpZGVuY2UgJiYgKFxuICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImJnLW11dGVkLzUwIHAtNCByb3VuZGVkLWxnXCI+XG4gICAgICAgICAgICAgICAgPGg0IGNsYXNzTmFtZT1cImZvbnQtbWVkaXVtIG1iLTJcIj5BSSBFeHRyYWN0aW9uIEluZm88L2g0PlxuICAgICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cInRleHQtc20gdGV4dC1tdXRlZC1mb3JlZ3JvdW5kXCI+XG4gICAgICAgICAgICAgICAgICBDb25maWRlbmNlOiB7KHBhcnNlRmxvYXQoaW52b2ljZS5leHRyYWN0aW9uQ29uZmlkZW5jZS50b1N0cmluZygpKSAqIDEwMCkudG9GaXhlZCgxKX0lXG4gICAgICAgICAgICAgICAgPC9wPlxuICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICl9XG5cbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidGV4dC14cyB0ZXh0LW11dGVkLWZvcmVncm91bmRcIj5cbiAgICAgICAgICAgICAgPHA+Q3JlYXRlZDoge2Zvcm1hdChuZXcgRGF0ZShpbnZvaWNlLmNyZWF0ZWRBdCksICdQUFAgcHAnKX08L3A+XG4gICAgICAgICAgICAgIDxwPlVwZGF0ZWQ6IHtmb3JtYXQobmV3IERhdGUoaW52b2ljZS51cGRhdGVkQXQpLCAnUFBQIHBwJyl9PC9wPlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgIDwvRGlhbG9nQ29udGVudD5cbiAgICAgIDwvRGlhbG9nPlxuICAgIDwvPlxuICApO1xufSJdLCJ2ZXJzaW9uIjozfQ==