2cb631580ddcff4cbf161553def4464b
"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
exports.DocumentEditForm = DocumentEditForm;
const jsx_runtime_1 = require("react/jsx-runtime");
const react_1 = __importDefault(require("react"));
const zod_1 = require("zod");
const input_1 = require("@/components/ui/input");
const textarea_1 = require("@/components/ui/textarea");
const select_1 = require("@/components/ui/select");
const form_1 = require("@/components/ui/form");
const switch_1 = require("@/components/ui/switch");
const DocumentFormBase_1 = require("@/components/forms/DocumentFormBase");
const StandardFormField_1 = require("@/components/forms/StandardFormField");
// Document categories
const DOCUMENT_CATEGORIES = [
    { value: 'bylaw', label: 'Bylaws' },
    { value: 'financial', label: 'Financial' },
    { value: 'maintenance', label: 'Maintenance' },
    { value: 'legal', label: 'Legal' },
    { value: 'meeting_minutes', label: 'Meeting Minutes' },
    { value: 'insurance', label: 'Insurance' },
    { value: 'contracts', label: 'Contracts' },
    { value: 'permits', label: 'Permits' },
    { value: 'inspection', label: 'Inspection' },
    { value: 'other', label: 'Other' },
];
// Simplified document edit schema using our standard patterns
const documentEditSchema = zod_1.z.object({
    name: zod_1.z.string().min(1, 'Document name is required').max(255),
    description: zod_1.z.string().max(1000).optional(),
    category: zod_1.z.enum(['bylaw', 'financial', 'maintenance', 'legal', 'meeting_minutes', 'insurance', 'contracts', 'permits', 'inspection', 'other']),
    isVisible: zod_1.z.boolean().default(true),
    tags: zod_1.z.string().optional(),
});
/**
 * Document Edit Form using the new consolidated DocumentFormBase pattern.
 * Demonstrates Phase 3 migration to standardized components.
 */
function DocumentEditForm({ document, onSuccess, onCancel, buildingId, residenceId }) {
    const defaultValues = {
        name: document.name || '',
        description: document.description || '',
        category: document.documentType || 'other',
        isVisible: document.isVisibleToTenants ?? true,
        tags: '', // documents don't have tags in current schema
    };
    const handleSuccess = () => {
        if (onSuccess) {
            onSuccess(document.id, 'updated');
        }
    };
    return ((0, jsx_runtime_1.jsx)(DocumentFormBase_1.DocumentFormBase, { title: "Edit Document", schema: documentEditSchema, defaultValues: defaultValues, apiEndpoint: `/api/documents/${document.id}`, queryKey: ['documents'], mode: "edit", itemId: document.id, buildingId: buildingId, residenceId: residenceId, onSuccess: handleSuccess, onCancel: onCancel, successMessages: {
            update: 'Document updated successfully',
        }, uploadContext: {
            type: 'documents',
            buildingId,
            residenceId,
        }, showTabs: false, "data-testid": "document-edit-form", children: (formControls) => ((0, jsx_runtime_1.jsxs)(jsx_runtime_1.Fragment, { children: [(0, jsx_runtime_1.jsx)(StandardFormField_1.StandardFormField, { control: formControls.form.control, name: "name", label: "Document Name", placeholder: "Enter document name", "data-testid": "input-name" }), (0, jsx_runtime_1.jsx)(form_1.FormField, { control: formControls.form.control, name: "category", render: ({ field }) => ((0, jsx_runtime_1.jsxs)(form_1.FormItem, { children: [(0, jsx_runtime_1.jsx)(form_1.FormLabel, { children: "Category" }), (0, jsx_runtime_1.jsxs)(select_1.Select, { onValueChange: field.onChange, defaultValue: field.value, children: [(0, jsx_runtime_1.jsx)(form_1.FormControl, { children: (0, jsx_runtime_1.jsx)(select_1.SelectTrigger, { "data-testid": "select-category", children: (0, jsx_runtime_1.jsx)(select_1.SelectValue, { placeholder: "Select category" }) }) }), (0, jsx_runtime_1.jsx)(select_1.SelectContent, { children: DOCUMENT_CATEGORIES.map((category) => ((0, jsx_runtime_1.jsx)(select_1.SelectItem, { value: category.value, children: category.label }, category.value))) })] }), (0, jsx_runtime_1.jsx)(form_1.FormMessage, {})] })) }), (0, jsx_runtime_1.jsx)(form_1.FormField, { control: formControls.form.control, name: "description", render: ({ field }) => ((0, jsx_runtime_1.jsxs)(form_1.FormItem, { children: [(0, jsx_runtime_1.jsx)(form_1.FormLabel, { children: "Description" }), (0, jsx_runtime_1.jsx)(form_1.FormControl, { children: (0, jsx_runtime_1.jsx)(textarea_1.Textarea, { placeholder: "Enter document description (optional)", "data-testid": "textarea-description", ...field }) }), (0, jsx_runtime_1.jsx)(form_1.FormMessage, {})] })) }), (0, jsx_runtime_1.jsx)(form_1.FormField, { control: formControls.form.control, name: "tags", render: ({ field }) => ((0, jsx_runtime_1.jsxs)(form_1.FormItem, { children: [(0, jsx_runtime_1.jsx)(form_1.FormLabel, { children: "Tags" }), (0, jsx_runtime_1.jsx)(form_1.FormControl, { children: (0, jsx_runtime_1.jsx)(input_1.Input, { placeholder: "Enter tags separated by commas", "data-testid": "input-tags", ...field }) }), (0, jsx_runtime_1.jsx)(form_1.FormMessage, {})] })) }), (0, jsx_runtime_1.jsx)(form_1.FormField, { control: formControls.form.control, name: "isVisible", render: ({ field }) => ((0, jsx_runtime_1.jsxs)(form_1.FormItem, { className: "flex flex-row items-center justify-between rounded-lg border p-4", children: [(0, jsx_runtime_1.jsxs)("div", { className: "space-y-0.5", children: [(0, jsx_runtime_1.jsx)(form_1.FormLabel, { className: "text-base", children: "Document Visibility" }), (0, jsx_runtime_1.jsx)("p", { className: "text-sm text-muted-foreground", children: "Make this document visible to relevant users" })] }), (0, jsx_runtime_1.jsx)(form_1.FormControl, { children: (0, jsx_runtime_1.jsx)(switch_1.Switch, { checked: field.value, onCheckedChange: field.onChange, "data-testid": "switch-visibility" }) })] })) })] })) }));
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiL2hvbWUvcnVubmVyL3dvcmtzcGFjZS9jbGllbnQvc3JjL2NvbXBvbmVudHMvZG9jdW1lbnQtbWFuYWdlbWVudC9Eb2N1bWVudEVkaXRGb3JtLnRzeCIsIm1hcHBpbmdzIjoiOzs7OztBQWdEQSw0Q0FnSkM7O0FBaE1ELGtEQUEwQjtBQUMxQiw2QkFBd0I7QUFDeEIsaURBQThDO0FBQzlDLHVEQUFvRDtBQUNwRCxtREFBdUc7QUFDdkcsK0NBQWdHO0FBQ2hHLG1EQUFnRDtBQUNoRCwwRUFBdUU7QUFDdkUsNEVBQXlFO0FBR3pFLHNCQUFzQjtBQUN0QixNQUFNLG1CQUFtQixHQUFHO0lBQzFCLEVBQUUsS0FBSyxFQUFFLE9BQU8sRUFBRSxLQUFLLEVBQUUsUUFBUSxFQUFFO0lBQ25DLEVBQUUsS0FBSyxFQUFFLFdBQVcsRUFBRSxLQUFLLEVBQUUsV0FBVyxFQUFFO0lBQzFDLEVBQUUsS0FBSyxFQUFFLGFBQWEsRUFBRSxLQUFLLEVBQUUsYUFBYSxFQUFFO0lBQzlDLEVBQUUsS0FBSyxFQUFFLE9BQU8sRUFBRSxLQUFLLEVBQUUsT0FBTyxFQUFFO0lBQ2xDLEVBQUUsS0FBSyxFQUFFLGlCQUFpQixFQUFFLEtBQUssRUFBRSxpQkFBaUIsRUFBRTtJQUN0RCxFQUFFLEtBQUssRUFBRSxXQUFXLEVBQUUsS0FBSyxFQUFFLFdBQVcsRUFBRTtJQUMxQyxFQUFFLEtBQUssRUFBRSxXQUFXLEVBQUUsS0FBSyxFQUFFLFdBQVcsRUFBRTtJQUMxQyxFQUFFLEtBQUssRUFBRSxTQUFTLEVBQUUsS0FBSyxFQUFFLFNBQVMsRUFBRTtJQUN0QyxFQUFFLEtBQUssRUFBRSxZQUFZLEVBQUUsS0FBSyxFQUFFLFlBQVksRUFBRTtJQUM1QyxFQUFFLEtBQUssRUFBRSxPQUFPLEVBQUUsS0FBSyxFQUFFLE9BQU8sRUFBRTtDQUNuQyxDQUFDO0FBRUYsOERBQThEO0FBQzlELE1BQU0sa0JBQWtCLEdBQUcsT0FBQyxDQUFDLE1BQU0sQ0FBQztJQUNsQyxJQUFJLEVBQUUsT0FBQyxDQUFDLE1BQU0sRUFBRSxDQUFD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QyxPQUFPLEVBQ2xDLElBQUksRUFBQyxXQUFXLEVBQ2hCLE1BQU0sRUFBRSxDQUFDLEVBQUUsS0FBSyxFQUFFLEVBQUUsRUFBRSxDQUFDLENBQ3JCLHdCQUFDLGVBQVEsSUFBQyxTQUFTLEVBQUMsa0VBQWtFLGFBQ3BGLGlDQUFLLFNBQVMsRUFBQyxhQUFhLGFBQzFCLHVCQUFDLGdCQUFTLElBQUMsU0FBUyxFQUFDLFdBQVcsb0NBRXBCLEVBQ1osOEJBQUcsU0FBUyxFQUFDLCtCQUErQiw2REFFeEMsSUFDQSxFQUNOLHVCQUFDLGtCQUFXLGNBQ1YsdUJBQUMsZUFBTSxJQUNMLE9BQU8sRUFBRSxLQUFLLENBQUMsS0FBSyxFQUNwQixlQUFlLEVBQUUsS0FBSyxDQUFDLFFBQVEsaUJBQ25CLG1CQUFtQixHQUMvQixHQUNVLElBQ0wsQ0FDWixHQUNELElBQ0QsQ0FDSixHQUNnQixDQUNwQixDQUFDO0FBQ0osQ0FBQyIsIm5hbWVzIjpbXSwic291cmNlcyI6WyIvaG9tZS9ydW5uZXIvd29ya3NwYWNlL2NsaWVudC9zcmMvY29tcG9uZW50cy9kb2N1bWVudC1tYW5hZ2VtZW50L0RvY3VtZW50RWRpdEZvcm0udHN4Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBSZWFjdCBmcm9tICdyZWFjdCc7XG5pbXBvcnQgeyB6IH0gZnJvbSAnem9kJztcbmltcG9ydCB7IElucHV0IH0gZnJvbSAnQC9jb21wb25lbnRzL3VpL2lucHV0JztcbmltcG9ydCB7IFRleHRhcmVhIH0gZnJvbSAnQC9jb21wb25lbnRzL3VpL3RleHRhcmVhJztcbmltcG9ydCB7IFNlbGVjdCwgU2VsZWN0Q29udGVudCwgU2VsZWN0SXRlbSwgU2VsZWN0VHJpZ2dlciwgU2VsZWN0VmFsdWUgfSBmcm9tICdAL2NvbXBvbmVudHMvdWkvc2VsZWN0JztcbmltcG9ydCB7IEZvcm1Db250cm9sLCBGb3JtRmllbGQsIEZvcm1JdGVtLCBGb3JtTGFiZWwsIEZvcm1NZXNzYWdlIH0gZnJvbSAnQC9jb21wb25lbnRzL3VpL2Zvcm0nO1xuaW1wb3J0IHsgU3dpdGNoIH0gZnJvbSAnQC9jb21wb25lbnRzL3VpL3N3aXRjaCc7XG5pbXBvcnQgeyBEb2N1bWVudEZvcm1CYXNlIH0gZnJvbSAnQC9jb21wb25lbnRzL2Zvcm1zL0RvY3VtZW50Rm9ybUJhc2UnO1xuaW1wb3J0IHsgU3RhbmRhcmRGb3JtRmllbGQgfSBmcm9tICdAL2NvbXBvbmVudHMvZm9ybXMvU3RhbmRhcmRGb3JtRmllbGQnO1xuaW1wb3J0IHR5cGUgeyBEb2N1bWVudCB9IGZyb20gJ0BzaGFyZWQvc2NoZW1hJztcblxuLy8gRG9jdW1lbnQgY2F0ZWdvcmllc1xuY29uc3QgRE9DVU1FTlRfQ0FURUdPUklFUyA9IFtcbiAgeyB2YWx1ZTogJ2J5bGF3JywgbGFiZWw6ICdCeWxhd3MnIH0sXG4gIHsgdmFsdWU6ICdmaW5hbmNpYWwnLCBsYWJlbDogJ0ZpbmFuY2lhbCcgfSxcbiAgeyB2YWx1ZTogJ21haW50ZW5hbmNlJywgbGFiZWw6ICdNYWludGVuYW5jZScgfSxcbiAgeyB2YWx1ZTogJ2xlZ2FsJywgbGFiZWw6ICdMZWdhbCcgfSxcbiAgeyB2YWx1ZTogJ21lZXRpbmdfbWludXRlcycsIGxhYmVsOiAnTWVldGluZyBNaW51dGVzJyB9LFxuICB7IHZhbHVlOiAnaW5zdXJhbmNlJywgbGFiZWw6ICdJbnN1cmFuY2UnIH0sXG4gIHsgdmFsdWU6ICdjb250cmFjdHMnLCBsYWJlbDogJ0NvbnRyYWN0cycgfSxcbiAgeyB2YWx1ZTogJ3Blcm1pdHMnLCBsYWJlbDogJ1Blcm1pdHMnIH0sXG4gIHsgdmFsdWU6ICdpbnNwZWN0aW9uJywgbGFiZWw6ICdJbnNwZWN0aW9uJyB9LFxuICB7IHZhbHVlOiAnb3RoZXInLCBsYWJlbDogJ090aGVyJyB9LFxuXTtcblxuLy8gU2ltcGxpZmllZCBkb2N1bWVudCBlZGl0IHNjaGVtYSB1c2luZyBvdXIgc3RhbmRhcmQgcGF0dGVybnNcbmNvbnN0IGRvY3VtZW50RWRpdFNjaGVtYSA9IHoub2JqZWN0KHtcbiAgbmFtZTogei5zdHJpbmcoKS5taW4oMSwgJ0RvY3VtZW50IG5hbWUgaXMgcmVxdWlyZWQnKS5tYXgoMjU1KSxcbiAgZGVzY3JpcHRpb246IHouc3RyaW5nKCkubWF4KDEwMDApLm9wdGlvbmFsKCksXG4gIGNhdGVnb3J5OiB6LmVudW0oWydieWxhdycsICdmaW5hbmNpYWwnLCAnbWFpbnRlbmFuY2UnLCAnbGVnYWwnLCAnbWVldGluZ19taW51dGVzJywgJ2luc3VyYW5jZScsICdjb250cmFjdHMnLCAncGVybWl0cycsICdpbnNwZWN0aW9uJywgJ290aGVyJ10pLFxuICBpc1Zpc2libGU6IHouYm9vbGVhbigpLmRlZmF1bHQodHJ1ZSksXG4gIHRhZ3M6IHouc3RyaW5nKCkub3B0aW9uYWwoKSxcbn0pO1xuXG50eXBlIERvY3VtZW50RWRpdEZvcm1EYXRhID0gei5pbmZlcjx0eXBlb2YgZG9jdW1lbnRFZGl0U2NoZW1hPjtcblxuaW50ZXJmYWNlIERvY3VtZW50RWRpdEZvcm1Qcm9wcyB7XG4gIGRvY3VtZW50OiBEb2N1bWVudDtcbiAgb25TdWNjZXNzPzogKGRvY3VtZW50SWQ6IHN0cmluZywgYWN0aW9uOiAndXBkYXRlZCcpID0+IHZvaWQ7XG4gIG9uQ2FuY2VsPzogKCkgPT4gdm9pZDtcbiAgYnVpbGRpbmdJZD86IHN0cmluZztcbiAgcmVzaWRlbmNlSWQ/OiBzdHJpbmc7XG59XG5cbi8qKlxuICogRG9jdW1lbnQgRWRpdCBGb3JtIHVzaW5nIHRoZSBuZXcgY29uc29saWRhdGVkIERvY3VtZW50Rm9ybUJhc2UgcGF0dGVybi5cbiAqIERlbW9uc3RyYXRlcyBQaGFzZSAzIG1pZ3JhdGlvbiB0byBzdGFuZGFyZGl6ZWQgY29tcG9uZW50cy5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIERvY3VtZW50RWRpdEZvcm0oeyBcbiAgZG9jdW1lbnQsIFxuICBvblN1Y2Nlc3MsIFxuICBvbkNhbmNlbCwgXG4gIGJ1aWxkaW5nSWQsXG4gIHJlc2lkZW5jZUlkXG59OiBEb2N1bWVudEVkaXRGb3JtUHJvcHMpIHtcbiAgXG4gIGNvbnN0IGRlZmF1bHRWYWx1ZXM6IFBhcnRpYWw8RG9jdW1lbnRFZGl0Rm9ybURhdGE+ID0ge1xuICAgIG5hbWU6IGRvY3VtZW50Lm5hbWUgfHwgJycsXG4gICAgZGVzY3JpcHRpb246IGRvY3VtZW50LmRlc2NyaXB0aW9uIHx8ICcnLFxuICAgIGNhdGVnb3J5OiAoZG9jdW1lbnQuZG9jdW1lbnRUeXBlIGFzIGFueSkgfHwgJ290aGVyJyxcbiAgICBpc1Zpc2libGU6IGRvY3VtZW50LmlzVmlzaWJsZVRvVGVuYW50cyA/PyB0cnVlLFxuICAgIHRhZ3M6ICcnLCAvLyBkb2N1bWVudHMgZG9uJ3QgaGF2ZSB0YWdzIGluIGN1cnJlbnQgc2NoZW1hXG4gIH07XG5cbiAgY29uc3QgaGFuZGxlU3VjY2VzcyA9ICgpID0+IHtcbiAgICBpZiAob25TdWNjZXNzKSB7XG4gICAgICBvblN1Y2Nlc3MoZG9jdW1lbnQuaWQsICd1cGRhdGVkJyk7XG4gICAgfVxuICB9O1xuXG4gIHJldHVybiAoXG4gICAgPERvY3VtZW50Rm9ybUJhc2VcbiAgICAgIHRpdGxlPVwiRWRpdCBEb2N1bWVudFwiXG4gICAgICBzY2hlbWE9e2RvY3VtZW50RWRpdFNjaGVtYX1cbiAgICAgIGRlZmF1bHRWYWx1ZXM9e2RlZmF1bHRWYWx1ZXN9XG4gICAgICBhcGlFbmRwb2ludD17YC9hcGkvZG9jdW1lbnRzLyR7ZG9jdW1lbnQuaWR9YH1cbiAgICAgIHF1ZXJ5S2V5PXtbJ2RvY3VtZW50cyddfVxuICAgICAgbW9kZT1cImVkaXRcIlxuICAgICAgaXRlbUlkPXtkb2N1bWVudC5pZH1cbiAgICAgIGJ1aWxkaW5nSWQ9e2J1aWxkaW5nSWR9XG4gICAgICByZXNpZGVuY2VJZD17cmVzaWRlbmNlSWR9XG4gICAgICBvblN1Y2Nlc3M9e2hhbmRsZVN1Y2Nlc3N9XG4gICAgICBvbkNhbmNlbD17b25DYW5jZWx9XG4gICAgICBzdWNjZXNzTWVzc2FnZXM9e3tcbiAgICAgICAgdXBkYXRlOiAnRG9jdW1lbnQgdXBkYXRlZCBzdWNjZXNzZnVsbHknLFxuICAgICAgfX1cbiAgICAgIHVwbG9hZENvbnRleHQ9e3tcbiAgICAgICAgdHlwZTogJ2RvY3VtZW50cycsXG4gICAgICAgIGJ1aWxkaW5nSWQsXG4gICAgICAgIHJlc2lkZW5jZUlkLFxuICAgICAgfX1cbiAgICAgIHNob3dUYWJzPXtmYWxzZX1cbiAgICAgIGRhdGEtdGVzdGlkPVwiZG9jdW1lbnQtZWRpdC1mb3JtXCJcbiAgICA+XG4gICAgICB7KGZvcm1Db250cm9scykgPT4gKFxuICAgICAgICA8PlxuICAgICAgICAgIDxTdGFuZGFyZEZvcm1GaWVsZFxuICAgICAgICAgICAgY29udHJvbD17Zm9ybUNvbnRyb2xzLmZvcm0uY29udHJvbH1cbiAgICAgICAgICAgIG5hbWU9XCJuYW1lXCJcbiAgICAgICAgICAgIGxhYmVsPVwiRG9jdW1lbnQgTmFtZVwiXG4gICAgICAgICAgICBwbGFjZWhvbGRlcj1cIkVudGVyIGRvY3VtZW50IG5hbWVcIlxuICAgICAgICAgICAgZGF0YS10ZXN0aWQ9XCJpbnB1dC1uYW1lXCJcbiAgICAgICAgICAvPlxuXG4gICAgICAgICAgPEZvcm1GaWVsZFxuICAgICAgICAgICAgY29udHJvbD17Zm9ybUNvbnRyb2xzLmZvcm0uY29udHJvbH1cbiAgICAgICAgICAgIG5hbWU9XCJjYXRlZ29yeVwiXG4gICAgICAgICAgICByZW5kZXI9eyh7IGZpZWxkIH0pID0+IChcbiAgICAgICAgICAgICAgPEZvcm1JdGVtPlxuICAgICAgICAgICAgICAgIDxGb3JtTGFiZWw+Q2F0ZWdvcnk8L0Zvcm1MYWJlbD5cbiAgICAgICAgICAgICAgICA8U2VsZWN0IG9uVmFsdWVDaGFuZ2U9e2ZpZWxkLm9uQ2hhbmdlfSBkZWZhdWx0VmFsdWU9e2ZpZWxkLnZhbHVlfT5cbiAgICAgICAgICAgICAgICAgIDxGb3JtQ29udHJvbD5cbiAgICAgICAgICAgICAgICAgICAgPFNlbGVjdFRyaWdnZXIgZGF0YS10ZXN0aWQ9XCJzZWxlY3QtY2F0ZWdvcnlcIj5cbiAgICAgICAgICAgICAgICAgICAgICA8U2VsZWN0VmFsdWUgcGxhY2Vob2xkZXI9XCJTZWxlY3QgY2F0ZWdvcnlcIiAvPlxuICAgICAgICAgICAgICAgICAgICA8L1NlbGVjdFRyaWdnZXI+XG4gICAgICAgICAgICAgICAgICA8L0Zvcm1Db250cm9sPlxuICAgICAgICAgICAgICAgICAgPFNlbGVjdENvbnRlbnQ+XG4gICAgICAgICAgICAgICAgICAgIHtET0NVTUVOVF9DQVRFR09SSUVTLm1hcCgoY2F0ZWdvcnkpID0+IChcbiAgICAgICAgICAgICAgICAgICAgICA8U2VsZWN0SXRlbSBrZXk9e2NhdGVnb3J5LnZhbHVlfSB2YWx1ZT17Y2F0ZWdvcnkudmFsdWV9PlxuICAgICAgICAgICAgICAgICAgICAgICAge2NhdGVnb3J5LmxhYmVsfVxuICAgICAgICAgICAgICAgICAgICAgIDwvU2VsZWN0SXRlbT5cbiAgICAgICAgICAgICAgICAgICAgKSl9XG4gICAgICAgICAgICAgICAgICA8L1NlbGVjdENvbnRlbnQ+XG4gICAgICAgICAgICAgICAgPC9TZWxlY3Q+XG4gICAgICAgICAgICAgICAgPEZvcm1NZXNzYWdlIC8+XG4gICAgICAgICAgICAgIDwvRm9ybUl0ZW0+XG4gICAgICAgICAgICApfVxuICAgICAgICAgIC8+XG5cbiAgICAgICAgICA8Rm9ybUZpZWxkXG4gICAgICAgICAgICBjb250cm9sPXtmb3JtQ29udHJvbHMuZm9ybS5jb250cm9sfVxuICAgICAgICAgICAgbmFtZT1cImRlc2NyaXB0aW9uXCJcbiAgICAgICAgICAgIHJlbmRlcj17KHsgZmllbGQgfSkgPT4gKFxuICAgICAgICAgICAgICA8Rm9ybUl0ZW0+XG4gICAgICAgICAgICAgICAgPEZvcm1MYWJlbD5EZXNjcmlwdGlvbjwvRm9ybUxhYmVsPlxuICAgICAgICAgICAgICAgIDxGb3JtQ29udHJvbD5cbiAgICAgICAgICAgICAgICAgIDxUZXh0YXJlYSBcbiAgICAgICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI9XCJFbnRlciBkb2N1bWVudCBkZXNjcmlwdGlvbiAob3B0aW9uYWwpXCJcbiAgICAgICAgICAgICAgICAgICAgZGF0YS10ZXN0aWQ9XCJ0ZXh0YXJlYS1kZXNjcmlwdGlvblwiXG4gICAgICAgICAgICAgICAgICAgIHsuLi5maWVsZH0gXG4gICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgIDwvRm9ybUNvbnRyb2w+XG4gICAgICAgICAgICAgICAgPEZvcm1NZXNzYWdlIC8+XG4gICAgICAgICAgICAgIDwvRm9ybUl0ZW0+XG4gICAgICAgICAgICApfVxuICAgICAgICAgIC8+XG5cbiAgICAgICAgICA8Rm9ybUZpZWxkXG4gICAgICAgICAgICBjb250cm9sPXtmb3JtQ29udHJvbHMuZm9ybS5jb250cm9sfVxuICAgICAgICAgICAgbmFtZT1cInRhZ3NcIlxuICAgICAgICAgICAgcmVuZGVyPXsoeyBmaWVsZCB9KSA9PiAoXG4gICAgICAgICAgICAgIDxGb3JtSXRlbT5cbiAgICAgICAgICAgICAgICA8Rm9ybUxhYmVsPlRhZ3M8L0Zvcm1MYWJlbD5cbiAgICAgICAgICAgICAgICA8Rm9ybUNvbnRyb2w+XG4gICAgICAgICAgICAgICAgICA8SW5wdXQgXG4gICAgICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyPVwiRW50ZXIgdGFncyBzZXBhcmF0ZWQgYnkgY29tbWFzXCJcbiAgICAgICAgICAgICAgICAgICAgZGF0YS10ZXN0aWQ9XCJpbnB1dC10YWdzXCJcbiAgICAgICAgICAgICAgICAgICAgey4uLmZpZWxkfSBcbiAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgPC9Gb3JtQ29udHJvbD5cbiAgICAgICAgICAgICAgICA8Rm9ybU1lc3NhZ2UgLz5cbiAgICAgICAgICAgICAgPC9Gb3JtSXRlbT5cbiAgICAgICAgICAgICl9XG4gICAgICAgICAgLz5cblxuICAgICAgICAgIDxGb3JtRmllbGRcbiAgICAgICAgICAgIGNvbnRyb2w9e2Zvcm1Db250cm9scy5mb3JtLmNvbnRyb2x9XG4gICAgICAgICAgICBuYW1lPVwiaXNWaXNpYmxlXCJcbiAgICAgICAgICAgIHJlbmRlcj17KHsgZmllbGQgfSkgPT4gKFxuICAgICAgICAgICAgICA8Rm9ybUl0ZW0gY2xhc3NOYW1lPVwiZmxleCBmbGV4LXJvdyBpdGVtcy1jZW50ZXIganVzdGlmeS1iZXR3ZWVuIHJvdW5kZWQtbGcgYm9yZGVyIHAtNFwiPlxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwic3BhY2UteS0wLjVcIj5cbiAgICAgICAgICAgICAgICAgIDxGb3JtTGFiZWwgY2xhc3NOYW1lPVwidGV4dC1iYXNlXCI+XG4gICAgICAgICAgICAgICAgICAgIERvY3VtZW50IFZpc2liaWxpdHlcbiAgICAgICAgICAgICAgICAgIDwvRm9ybUxhYmVsPlxuICAgICAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwidGV4dC1zbSB0ZXh0LW11dGVkLWZvcmVncm91bmRcIj5cbiAgICAgICAgICAgICAgICAgICAgTWFrZSB0aGlzIGRvY3VtZW50IHZpc2libGUgdG8gcmVsZXZhbnQgdXNlcnNcbiAgICAgICAgICAgICAgICAgIDwvcD5cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICA8Rm9ybUNvbnRyb2w+XG4gICAgICAgICAgICAgICAgICA8U3dpdGNoXG4gICAgICAgICAgICAgICAgICAgIGNoZWNrZWQ9e2ZpZWxkLnZhbHVlfVxuICAgICAgICAgICAgICAgICAgICBvbkNoZWNrZWRDaGFuZ2U9e2ZpZWxkLm9uQ2hhbmdlfVxuICAgICAgICAgICAgICAgICAgICBkYXRhLXRlc3RpZD1cInN3aXRjaC12aXNpYmlsaXR5XCJcbiAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgPC9Gb3JtQ29udHJvbD5cbiAgICAgICAgICAgICAgPC9Gb3JtSXRlbT5cbiAgICAgICAgICAgICl9XG4gICAgICAgICAgLz5cbiAgICAgICAgPC8+XG4gICAgICApfVxuICAgIDwvRG9jdW1lbnRGb3JtQmFzZT5cbiAgKTtcbn0iXSwidmVyc2lvbiI6M30=