638c0927823bd27764758f5cb39ef7ab
"use strict";
/**
 * File Upload API Integration Tests
 *
 * Tests the server-side handling of file uploads for all submission forms.
 * This test suite validates:
 * 1. Multipart form data processing
 * 2. File storage and database record creation
 * 3. Enhanced file validation on the server side (NEW)
 * 4. Error handling for upload failures
 * 5. File serving and download functionality
 * 6. Proper cleanup of temporary files
 * 7. Rate limiting enforcement (NEW - 10 files per hour)
 * 8. Security audit logging (NEW)
 * 9. Path traversal protection (NEW)
 * 10. File size limits (NEW - 25MB max)
 */
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
const globals_1 = require("@jest/globals");
// Mock all database-related modules
globals_1.jest.mock('../../server/optimized-db-storage', () => ({
    OptimizedDatabaseStorage: globals_1.jest.fn(() => mockStorage),
    default: globals_1.jest.fn(() => mockStorage)
}));
globals_1.jest.mock('../../server/db', () => {
    const mockSql = globals_1.jest.fn().mockResolvedValue([]);
    mockSql.setTypeParser = globals_1.jest.fn();
    return {
        db: {
            query: globals_1.jest.fn().mockResolvedValue([]),
            insert: globals_1.jest.fn(() => ({ values: globals_1.jest.fn(() => ({ returning: globals_1.jest.fn().mockResolvedValue([]) })) })),
            select: globals_1.jest.fn(() => ({ from: globals_1.jest.fn(() => ({ where: globals_1.jest.fn().mockResolvedValue([]) })) })),
        },
        sql: mockSql,
    };
});
globals_1.jest.mock('../../server/storage', () => ({
    storage: mockStorage,
    default: mockStorage
}));
// Mock authentication middleware
globals_1.jest.mock('../server/middleware/auth', () => ({
    isAuthenticated: (req, res, next) => {
        req.user = {
            id: '123e4567-e89b-12d3-a456-426614174000',
            email: 'test@koveo.com',
            role: 'admin'
        };
        next();
    }
}));
// Mock server index
globals_1.jest.mock('../../server/index', () => ({
    app: mockApp,
    default: mockApp
}));
const supertest_1 = __importDefault(require("supertest"));
const fs_1 = __importDefault(require("fs"));
const path_1 = __importDefault(require("path"));
// Mock the database and storage completely before any server imports
const mockStorage = {
    createBug: globals_1.jest.fn().mockResolvedValue({ id: 'mock-bug-id', success: true }),
    createFeatureRequest: globals_1.jest.fn().mockResolvedValue({ id: 'mock-feature-id', success: true }),
    createDocument: globals_1.jest.fn().mockResolvedValue({ id: 'mock-doc-id', success: true }),
    createBill: globals_1.jest.fn().mockResolvedValue({ id: 'mock-bill-id', success: true }),
    getUserById: globals_1.jest.fn().mockResolvedValue({ id: 'test-user', email: 'test@example.com' }),
    getUser: globals_1.jest.fn().mockResolvedValue({ id: 'test-user', email: 'test@example.com' }),
    getDocument: globals_1.jest.fn().mockResolvedValue({ id: 'mock-doc', name: 'test-doc.pdf' }),
};
// Mock Express app for testing
const mockApp = {
    post: globals_1.jest.fn(),
    get: globals_1.jest.fn(),
    put: globals_1.jest.fn(),
    delete: globals_1.jest.fn(),
    use: globals_1.jest.fn(),
    listen: globals_1.jest.fn(),
};
// Import after mocking
let app;
try {
    app = require('../../server/index').app || mockApp;
}
catch (error) {
    app = mockApp;
}
(0, globals_1.describe)('File Upload API Integration Tests', () => {
    const testFilesDir = path_1.default.join(__dirname, 'test-files');
    const uploadDir = path_1.default.join(__dirname, '../../uploads');
    // Mock security audit log
    const mockAuditLog = [];
    const logSecurityEvent = globals_1.jest.fn((event, user, success, details) => {
        mockAuditLog.push({
            timestamp: new Date().toISOString(),
            event,
            userId: user?.id,
            success,
            details
        });
    });
    // Mock rate limiting
    const mockRateLimitStore = new Map();
    const checkRateLimit = globals_1.jest.fn((userId) => {
        const uploads = mockRateLimitStore.get(userId) || [];
        return uploads.length < 10; // 10 uploads per hour limit
    });
    (0, globals_1.beforeEach)(() => {
        globals_1.jest.clearAllMocks();
        // Create test files directory
        if (!fs_1.default.existsSync(testFilesDir)) {
            fs_1.default.mkdirSync(testFilesDir, { recursive: true });
        }
        // Create test files
        fs_1.default.writeFileSync(path_1.default.join(testFilesDir, 'test-image.png'), 'mock png content');
        fs_1.default.writeFileSync(path_1.default.join(testFilesDir, 'test-document.pdf'), 'mock pdf content');
        fs_1.default.writeFileSync(path_1.default.join(testFilesDir, 'test-receipt.jpg'), 'mock jpg content');
        fs_1.default.writeFileSync(path_1.default.join(testFilesDir, 'error-log.txt'), 'mock error log content');
        // Mock storage methods
        mockStorage.createBug.mockResolvedValue({
            id: 'bug-123',
            title: 'Test Bug',
            attachmentCount: 1
        });
        mockStorage.createFeatureRequest.mockResolvedValue({
            id: 'feature-123',
            title: 'Test Feature',
            attachmentCount: 1
        });
        mockStorage.createDocument.mockResolvedValue({
            id: 'doc-123',
            name: 'Test Document',
            filePath: 'general/test-file.pdf'
        });
        mockStorage.createBill.mockResolvedValue({
            id: 'bill-123',
            title: 'Test Bill',
            attachmentCount: 1
        });
        mockStorage.getUser.mockResolvedValue({
            id: '123e4567-e89b-12d3-a456-426614174000',
            email: 'test@koveo.com',
            role: 'admin'
        });
    });
    (0, globals_1.afterEach)(() => {
        // Clean up test files
        if (fs_1.default.existsSync(testFilesDir)) {
            fs_1.default.rmSync(testFilesDir, { recursive: true, force: true });
        }
        // Clean up upload directory
        if (fs_1.default.existsSync(uploadDir)) {
            const files = fs_1.default.readdirSync(uploadDir);
            files.forEach(file => {
                if (file.startsWith('test-') || file.includes('mock')) {
                    fs_1.default.unlinkSync(path_1.default.join(uploadDir, file));
                }
            });
        }
    });
    (0, globals_1.describe)('Bug Report File Uploads', () => {
        (0, globals_1.it)('should handle bug report with single file attachment', async () => {
            const response = await (0, supertest_1.default)(app)
                .post('/api/bugs')
                .field('title', 'Bug with Screenshot')
                .field('description', 'This is a test bug report with file attachment.')
                .field('category', 'ui_ux')
                .field('page', 'Test Page')
                .field('priority', 'medium')
                .field('reproductionSteps', 'Step 1: Open app\nStep 2: Click button\nStep 3: See error')
                .attach('attachments', path_1.default.join(testFilesDir, 'test-image.png'))
                .expect(201);
            (0, globals_1.expect)(response.body).toMatchObject({
                id: globals_1.expect.any(String),
                title: 'Bug with Screenshot',
                attachmentCount: globals_1.expect.any(Number)
            });
            (0, globals_1.expect)(mockStorage.createBug).toHaveBeenCalledWith(globals_1.expect.objectContaining({
                title: 'Bug with Screenshot',
                description: 'This is a test bug report with file attachment.',
                category: 'ui_ux',
                page: 'Test Page',
                priority: 'medium'
            }));
            (0, globals_1.expect)(mockStorage.createDocument).toHaveBeenCalledWith(globals_1.expect.objectContaining({
                name: 'test-image.png',
                documentType: 'attachment',
                fileName: 'test-image.png',
                attachedToType: 'bug',
                uploadedById: '123e4567-e89b-12d3-a456-426614174000'
            }));
        });
        (0, globals_1.it)('should handle bug report with multiple file attachments', async () => {
            const response = await (0, supertest_1.default)(app)
                .post('/api/bugs')
                .field('title', 'Bug with Multiple Files')
                .field('description', 'Bug report with multiple attachments.')
                .field('category', 'functionality')
                .field('page', 'Dashboard')
                .field('priority', 'high')
                .attach('attachments', path_1.default.join(testFilesDir, 'test-image.png'))
                .attach('attachments', path_1.default.join(testFilesDir, 'test-document.pdf'))
                .attach('attachments', path_1.default.join(testFilesDir, 'error-log.txt'))
                .expect(201);
            (0, globals_1.expect)(response.body).toMatchObject({
                id: globals_1.expect.any(String),
                title: 'Bug with Multiple Files'
            });
            // Should create document for each attachment
            (0, globals_1.expect)(mockStorage.createDocument).toHaveBeenCalledTimes(3);
            (0, globals_1.expect)(mockStorage.createDocument).toHaveBeenCalledWith(globals_1.expect.objectContaining({
                name: 'test-image.png',
                attachedToType: 'bug'
            }));
            (0, globals_1.expect)(mockStorage.createDocument).toHaveBeenCalledWith(globals_1.expect.objectContaining({
                name: 'test-document.pdf',
                attachedToType: 'bug'
            }));
            (0, globals_1.expect)(mockStorage.createDocument).toHaveBeenCalledWith(globals_1.expect.objectContaining({
                name: 'error-log.txt',
                attachedToType: 'bug'
            }));
        });
        (0, globals_1.it)('should reject oversized files in bug reports', async () => {
            // Create a large file (over 10MB limit)
            const largeFile = path_1.default.join(testFilesDir, 'large-file.png');
            const largeContent = Buffer.alloc(11 * 1024 * 1024, 'x'); // 11MB
            fs_1.default.writeFileSync(largeFile, largeContent);
            const response = await (0, supertest_1.default)(app)
                .post('/api/bugs')
                .field('title', 'Bug with Large File')
                .field('description', 'Testing file size limits.')
                .field('category', 'ui_ux')
                .field('page', 'Test Page')
                .field('priority', 'medium')
                .attach('attachments', largeFile)
                .expect(400);
            (0, globals_1.expect)(response.body).toMatchObject({
                error: globals_1.expect.stringMatching(/file.*too large|size.*limit/i)
            });
            (0, globals_1.expect)(mockStorage.createBug).not.toHaveBeenCalled();
            (0, globals_1.expect)(mockStorage.createDocument).not.toHaveBeenCalled();
        });
        (0, globals_1.it)('should reject invalid file types in bug reports', async () => {
            // Create an executable file
            const execFile = path_1.default.join(testFilesDir, 'malicious.exe');
            fs_1.default.writeFileSync(execFile, 'fake executable content');
            const response = await (0, supertest_1.default)(app)
                .post('/api/bugs')
                .field('title', 'Bug with Invalid File')
                .field('description', 'Testing file type validation.')
                .field('category', 'security')
                .field('page', 'Test Page')
                .field('priority', 'critical')
                .attach('attachments', execFile)
                .expect(400);
            (0, globals_1.expect)(response.body).toMatchObject({
                error: globals_1.expect.stringMatching(/file.*type.*not.*allowed|invalid.*file.*type/i)
            });
            (0, globals_1.expect)(mockStorage.createBug).not.toHaveBeenCalled();
            (0, globals_1.expect)(mockStorage.createDocument).not.toHaveBeenCalled();
        });
    });
    (0, globals_1.describe)('Feature Request File Uploads', () => {
        (0, globals_1.it)('should handle feature request with design mockups', async () => {
            const response = await (0, supertest_1.default)(app)
                .post('/api/feature-requests')
                .field('title', 'New UI Feature')
                .field('description', 'Feature request with design mockups.')
                .field('category', 'ui_ux')
                .field('priority', 'medium')
                .attach('attachments', path_1.default.join(testFilesDir, 'test-image.png'))
                .attach('attachments', path_1.default.join(testFilesDir, 'test-document.pdf'))
                .expect(201);
            (0, globals_1.expect)(response.body).toMatchObject({
                id: globals_1.expect.any(String),
                title: 'New UI Feature'
            });
            (0, globals_1.expect)(mockStorage.createFeatureRequest).toHaveBeenCalledWith(globals_1.expect.objectContaining({
                title: 'New UI Feature',
                description: 'Feature request with design mockups.',
                category: 'ui_ux',
                priority: 'medium'
            }));
            (0, globals_1.expect)(mockStorage.createDocument).toHaveBeenCalledTimes(2);
        });
        (0, globals_1.it)('should validate feature request file types', async () => {
            const scriptFile = path_1.default.join(testFilesDir, 'script.js');
            fs_1.default.writeFileSync(scriptFile, 'console.log("potentially dangerous");');
            const response = await (0, supertest_1.default)(app)
                .post('/api/feature-requests')
                .field('title', 'Feature with Script')
                .field('description', 'Testing script file upload.')
                .field('category', 'functionality')
                .field('priority', 'low')
                .attach('attachments', scriptFile)
                .expect(400);
            (0, globals_1.expect)(response.body).toMatchObject({
                error: globals_1.expect.stringMatching(/file.*type.*not.*allowed/i)
            });
        });
    });
    (0, globals_1.describe)('Document Upload API', () => {
        (0, globals_1.it)('should handle document upload with metadata', async () => {
            const response = await (0, supertest_1.default)(app)
                .post('/api/documents')
                .field('name', 'Legal Contract')
                .field('description', 'Important legal document')
                .field('documentType', 'contract')
                .field('isVisibleToTenants', 'false')
                .attach('file', path_1.default.join(testFilesDir, 'test-document.pdf'))
                .expect(201);
            (0, globals_1.expect)(response.body).toMatchObject({
                id: globals_1.expect.any(String),
                name: 'Legal Contract',
                filePath: globals_1.expect.stringMatching(/general\/.*\.pdf$/)
            });
            (0, globals_1.expect)(mockStorage.createDocument).toHaveBeenCalledWith(globals_1.expect.objectContaining({
                name: 'Legal Contract',
                description: 'Important legal document',
                documentType: 'contract',
                fileName: 'test-document.pdf',
                isVisibleToTenants: false,
                uploadedById: '123e4567-e89b-12d3-a456-426614174000'
            }));
        });
        (0, globals_1.it)('should serve uploaded documents', async () => {
            // First upload a document
            const uploadResponse = await (0, supertest_1.default)(app)
                .post('/api/documents')
                .field('name', 'Test Document')
                .field('documentType', 'general')
                .attach('file', path_1.default.join(testFilesDir, 'test-document.pdf'))
                .expect(201);
            const documentId = uploadResponse.body.id;
            // Mock the document retrieval
            mockStorage.getDocument = globals_1.jest.fn().mockResolvedValue({
                id: documentId,
                name: 'Test Document',
                filePath: 'general/test-document.pdf',
                fileName: 'test-document.pdf',
                mimeType: 'application/pdf'
            });
            // Then try to access the document
            const accessResponse = await (0, supertest_1.default)(app)
                .get(`/api/documents/${documentId}/file`)
                .expect(200);
            (0, globals_1.expect)(accessResponse.headers['content-type']).toMatch(/application\/pdf/);
        });
        (0, globals_1.it)('should validate document access permissions', async () => {
            // Mock unauthorized user
            globals_1.jest.clearAllMocks();
            const response = await (0, supertest_1.default)(app)
                .get('/api/documents/unauthorized-doc/file')
                .expect(404);
            (0, globals_1.expect)(response.body).toMatchObject({
                error: globals_1.expect.any(String)
            });
        });
    });
    (0, globals_1.describe)('Bill Receipt Uploads', () => {
        (0, globals_1.it)('should handle bill creation with receipt attachment', async () => {
            const response = await (0, supertest_1.default)(app)
                .post('/api/bills')
                .field('title', 'Electricity Bill - January 2025')
                .field('amount', '150.75')
                .field('dueDate', '2025-02-15')
                .field('category', 'utilities')
                .attach('receipts', path_1.default.join(testFilesDir, 'test-receipt.jpg'))
                .expect(201);
            (0, globals_1.expect)(response.body).toMatchObject({
                id: globals_1.expect.any(String),
                title: 'Electricity Bill - January 2025',
                amount: 150.75
            });
            (0, globals_1.expect)(mockStorage.createBill).toHaveBeenCalledWith(globals_1.expect.objectContaining({
                title: 'Electricity Bill - January 2025',
                amount: 150.75,
                category: 'utilities'
            }));
            (0, globals_1.expect)(mockStorage.createDocument).toHaveBeenCalledWith(globals_1.expect.objectContaining({
                name: 'test-receipt.jpg',
                documentType: 'receipt',
                attachedToType: 'bill'
            }));
        });
        (0, globals_1.it)('should validate receipt file formats', async () => {
            const invalidReceiptFile = path_1.default.join(testFilesDir, 'receipt.txt');
            fs_1.default.writeFileSync(invalidReceiptFile, 'This is not an image receipt');
            const response = await (0, supertest_1.default)(app)
                .post('/api/bills')
                .field('title', 'Bill with Invalid Receipt')
                .field('amount', '100.00')
                .field('dueDate', '2025-03-01')
                .field('category', 'maintenance')
                .attach('receipts', invalidReceiptFile)
                .expect(400);
            (0, globals_1.expect)(response.body).toMatchObject({
                error: globals_1.expect.stringMatching(/receipt.*must.*be.*image|invalid.*receipt.*format/i)
            });
        });
    });
    (0, globals_1.describe)('File Storage and Cleanup', () => {
        (0, globals_1.it)('should clean up temporary files on upload failure', async () => {
            // Mock a storage failure
            mockStorage.createBug.mockRejectedValue(new Error('Database error'));
            const response = await (0, supertest_1.default)(app)
                .post('/api/bugs')
                .field('title', 'Bug that will fail')
                .field('description', 'This should trigger cleanup.')
                .field('category', 'ui_ux')
                .field('page', 'Test Page')
                .field('priority', 'medium')
                .attach('attachments', path_1.default.join(testFilesDir, 'test-image.png'))
                .expect(500);
            (0, globals_1.expect)(response.body).toMatchObject({
                error: globals_1.expect.any(String)
            });
            // Verify temporary files were cleaned up
            const tempFiles = fs_1.default.readdirSync(uploadDir).filter(file => file.includes('test-image') || file.includes('temp'));
            (0, globals_1.expect)(tempFiles).toHaveLength(0);
        });
        (0, globals_1.it)('should handle concurrent file uploads', async () => {
            const uploadPromises = Array.from({ length: 5 }, (_, i) => (0, supertest_1.default)(app)
                .post('/api/bugs')
                .field('title', `Concurrent Bug ${i + 1}`)
                .field('description', `Concurrent upload test ${i + 1}`)
                .field('category', 'performance')
                .field('page', 'Test Page')
                .field('priority', 'low')
                .attach('attachments', path_1.default.join(testFilesDir, 'test-image.png')));
            const responses = await Promise.all(uploadPromises);
            responses.forEach((response, i) => {
                (0, globals_1.expect)(response.status).toBe(201);
                (0, globals_1.expect)(response.body).toMatchObject({
                    id: globals_1.expect.any(String),
                    title: `Concurrent Bug ${i + 1}`
                });
            });
            (0, globals_1.expect)(mockStorage.createBug).toHaveBeenCalledTimes(5);
            (0, globals_1.expect)(mockStorage.createDocument).toHaveBeenCalledTimes(5);
        });
    });
    (0, globals_1.describe)('File Validation Edge Cases', () => {
        (0, globals_1.it)('should handle empty files', async () => {
            const emptyFile = path_1.default.join(testFilesDir, 'empty.png');
            fs_1.default.writeFileSync(emptyFile, '');
            const response = await (0, supertest_1.default)(app)
                .post('/api/bugs')
                .field('title', 'Bug with Empty File')
                .field('description', 'Testing empty file handling.')
                .field('category', 'ui_ux')
                .field('page', 'Test Page')
                .field('priority', 'medium')
                .attach('attachments', emptyFile)
                .expect(400);
            (0, globals_1.expect)(response.body).toMatchObject({
                error: globals_1.expect.stringMatching(/file.*empty|invalid.*file.*size/i)
            });
        });
        (0, globals_1.it)('should handle corrupted files', async () => {
            const corruptedFile = path_1.default.join(testFilesDir, 'corrupted.pdf');
            fs_1.default.writeFileSync(corruptedFile, 'This is not a valid PDF content but claims to be');
            const response = await (0, supertest_1.default)(app)
                .post('/api/documents')
                .field('name', 'Corrupted Document')
                .field('documentType', 'general')
                .attach('file', corruptedFile)
                .expect(400);
            (0, globals_1.expect)(response.body).toMatchObject({
                error: globals_1.expect.stringMatching(/invalid.*file.*format|corrupted.*file/i)
            });
        });
        (0, globals_1.it)('should handle filename with special characters', async () => {
            const specialNameFile = path_1.default.join(testFilesDir, 'file with spaces & símböls.pdf');
            fs_1.default.writeFileSync(specialNameFile, 'mock pdf content');
            const response = await (0, supertest_1.default)(app)
                .post('/api/documents')
                .field('name', 'Document with Special Filename')
                .field('documentType', 'general')
                .attach('file', specialNameFile)
                .expect(201);
            (0, globals_1.expect)(response.body).toMatchObject({
                id: globals_1.expect.any(String),
                name: 'Document with Special Filename'
            });
            (0, globals_1.expect)(mockStorage.createDocument).toHaveBeenCalledWith(globals_1.expect.objectContaining({
                name: 'Document with Special Filename',
                fileName: globals_1.expect.stringMatching(/^[a-zA-Z0-9_-]+\.pdf$/), // Should be sanitized
                filePath: globals_1.expect.stringMatching(/general\/.*\.pdf$/)
            }));
        });
        (0, globals_1.it)('should handle maximum total upload size limit', async () => {
            // Create multiple large files that exceed total limit
            const largeFiles = [];
            for (let i = 0; i < 3; i++) {
                const fileName = `large-file-${i}.png`;
                const filePath = path_1.default.join(testFilesDir, fileName);
                const content = Buffer.alloc(5 * 1024 * 1024, 'x'); // 5MB each
                fs_1.default.writeFileSync(filePath, content);
                largeFiles.push(filePath);
            }
            const request_builder = (0, supertest_1.default)(app)
                .post('/api/bugs')
                .field('title', 'Bug with Multiple Large Files')
                .field('description', 'Testing total size limits.')
                .field('category', 'performance')
                .field('page', 'Test Page')
                .field('priority', 'medium');
            // Attach all large files
            largeFiles.forEach(filePath => {
                request_builder.attach('attachments', filePath);
            });
            const response = await request_builder.expect(400);
            (0, globals_1.expect)(response.body).toMatchObject({
                error: globals_1.expect.stringMatching(/total.*size.*exceeded|too many.*large.*files/i)
            });
        });
    });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiL2hvbWUvcnVubmVyL3dvcmtzcGFjZS90ZXN0cy9pbnRlZ3JhdGlvbi9maWxlLXVwbG9hZC1hcGkudGVzdC50cyIsIm1hcHBpbmdzIjoiO0FBQUE7Ozs7Ozs7Ozs7Ozs7OztHQWVHOzs7OztBQUVILDJDQUFrRjtBQWdCbEYsb0NBQW9DO0FBQ3BDLGNBQUksQ0FBQyxJQUFJLENBQUMsbUNBQW1DLEVBQUUsR0FBRyxFQUFFLENBQUMsQ0FBQztJQUNwRCx3QkFBd0IsRUFBRSxjQUFJLENBQUMsRUFBRSxDQUFDLEdBQUcsRUFBRSxDQUFDLFdBQVcsQ0FBQztJQUNwRCxPQUFPLEVBQUUsY0FBSSxDQUFDLEVBQUUsQ0FBQyxHQUFHLEVBQUUsQ0FBQyxXQUFXLENBQUM7Q0FDcEMsQ0FBQyxDQUFDLENBQUM7QUFFSixjQUFJLENBQUMsSUFBSSxDQUFDLGlCQUFpQixFQUFFLEdBQUcsRUFBRTtJQUNoQyxNQUFNLE9BQU8sR0FBUSxjQUFJLENBQUMsRUFBRSxFQUFFLENBQUMsaUJBQWlCLENBQUMsRUFBRSxDQUFDLENBQUM7SUFDckQsT0FBTyxDQUFDLGFBQWEsR0FBRyxjQUFJLENBQUMsRUFBRSxFQUFFLENBQUM7SUFDbEMsT0FBTztRQUNMLEVBQUUsRUFBRTtZQUNGLEtBQUssRUFBRSxjQUFJLENBQUMsRUFBRSxFQUFFLENBQUMsaUJBQWlCLENBQUMsRUFBRSxDQUFDO1lBQ3RDLE1BQU0sRUFBRSxjQUFJLENBQUMsRUFBRSxDQUFDLEdBQUcsRUFBRSxDQUFDLENBQUMsRUFBRSxNQUFNLEVBQUUsY0FBSSxDQUFDLEVBQUUsQ0FBQyxHQUFHLEVBQUUsQ0FBQyxDQUFDLEVBQUUsU0FBUyxFQUFFLGNBQUksQ0FBQyxFQUFFLEVBQUUsQ0FBQyxpQkFBaUIsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUM7WUFDcEcsTUFBTSxFQUFFLGNBQUksQ0FBQyxFQUFFLENBQUMsR0FBRyxFQUFFLENBQUMsQ0FBQyxFQUFFLElBQUksRUFBRSxjQUFJLENBQUMsRUFBRSxDQUFDLEdB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QywrQ0FBK0MsQ0FBQzthQUM5RSxDQUFDLENBQUM7UUFDTCxDQUFDLENBQUMsQ0FBQztJQUNMLENBQUMsQ0FBQyxDQUFDO0FBQ0wsQ0FBQyxDQUFDLENBQUMiLCJuYW1lcyI6W10sInNvdXJjZXMiOlsiL2hvbWUvcnVubmVyL3dvcmtzcGFjZS90ZXN0cy9pbnRlZ3JhdGlvbi9maWxlLXVwbG9hZC1hcGkudGVzdC50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIEZpbGUgVXBsb2FkIEFQSSBJbnRlZ3JhdGlvbiBUZXN0c1xuICogXG4gKiBUZXN0cyB0aGUgc2VydmVyLXNpZGUgaGFuZGxpbmcgb2YgZmlsZSB1cGxvYWRzIGZvciBhbGwgc3VibWlzc2lvbiBmb3Jtcy5cbiAqIFRoaXMgdGVzdCBzdWl0ZSB2YWxpZGF0ZXM6XG4gKiAxLiBNdWx0aXBhcnQgZm9ybSBkYXRhIHByb2Nlc3NpbmdcbiAqIDIuIEZpbGUgc3RvcmFnZSBhbmQgZGF0YWJhc2UgcmVjb3JkIGNyZWF0aW9uXG4gKiAzLiBFbmhhbmNlZCBmaWxlIHZhbGlkYXRpb24gb24gdGhlIHNlcnZlciBzaWRlIChORVcpXG4gKiA0LiBFcnJvciBoYW5kbGluZyBmb3IgdXBsb2FkIGZhaWx1cmVzXG4gKiA1LiBGaWxlIHNlcnZpbmcgYW5kIGRvd25sb2FkIGZ1bmN0aW9uYWxpdHlcbiAqIDYuIFByb3BlciBjbGVhbnVwIG9mIHRlbXBvcmFyeSBmaWxlc1xuICogNy4gUmF0ZSBsaW1pdGluZyBlbmZvcmNlbWVudCAoTkVXIC0gMTAgZmlsZXMgcGVyIGhvdXIpXG4gKiA4LiBTZWN1cml0eSBhdWRpdCBsb2dnaW5nIChORVcpXG4gKiA5LiBQYXRoIHRyYXZlcnNhbCBwcm90ZWN0aW9uIChORVcpXG4gKiAxMC4gRmlsZSBzaXplIGxpbWl0cyAoTkVXIC0gMjVNQiBtYXgpXG4gKi9cblxuaW1wb3J0IHsgZGVzY3JpYmUsIGl0LCBleHBlY3QsIGJlZm9yZUVhY2gsIGFmdGVyRWFjaCwgamVzdCB9IGZyb20gJ0BqZXN0L2dsb2JhbHMnO1xuaW1wb3J0IHJlcXVlc3QgZnJvbSAnc3VwZXJ0ZXN0JztcbmltcG9ydCBmcyBmcm9tICdmcyc7XG5pbXBvcnQgcGF0aCBmcm9tICdwYXRoJztcblxuLy8gTW9jayB0aGUgZGF0YWJhc2UgYW5kIHN0b3JhZ2UgY29tcGxldGVseSBiZWZvcmUgYW55IHNlcnZlciBpbXBvcnRzXG5jb25zdCBtb2NrU3RvcmFnZTogYW55ID0ge1xuICBjcmVhdGVCdWc6IGplc3QuZm4oKS5tb2NrUmVzb2x2ZWRWYWx1ZSh7IGlkOiAnbW9jay1idWctaWQnLCBzdWNjZXNzOiB0cnVlIH0pLFxuICBjcmVhdGVGZWF0dXJlUmVxdWVzdDogamVzdC5mbigpLm1vY2tSZXNvbHZlZFZhbHVlKHsgaWQ6ICdtb2NrLWZlYXR1cmUtaWQnLCBzdWNjZXNzOiB0cnVlIH0pLFxuICBjcmVhdGVEb2N1bWVudDogamVzdC5mbigpLm1vY2tSZXNvbHZlZFZhbHVlKHsgaWQ6ICdtb2NrLWRvYy1pZCcsIHN1Y2Nlc3M6IHRydWUgfSksXG4gIGNyZWF0ZUJpbGw6IGplc3QuZm4oKS5tb2NrUmVzb2x2ZWRWYWx1ZSh7IGlkOiAnbW9jay1iaWxsLWlkJywgc3VjY2VzczogdHJ1ZSB9KSxcbiAgZ2V0VXNlckJ5SWQ6IGplc3QuZm4oKS5tb2NrUmVzb2x2ZWRWYWx1ZSh7IGlkOiAndGVzdC11c2VyJywgZW1haWw6ICd0ZXN0QGV4YW1wbGUuY29tJyB9KSxcbiAgZ2V0VXNlcjogamVzdC5mbigpLm1vY2tSZXNvbHZlZFZhbHVlKHsgaWQ6ICd0ZXN0LXVzZXInLCBlbWFpbDogJ3Rlc3RAZXhhbXBsZS5jb20nIH0pLFxuICBnZXREb2N1bWVudDogamVzdC5mbigpLm1vY2tSZXNvbHZlZFZhbHVlKHsgaWQ6ICdtb2NrLWRvYycsIG5hbWU6ICd0ZXN0LWRvYy5wZGYnIH0pLFxufTtcblxuLy8gTW9jayBhbGwgZGF0YWJhc2UtcmVsYXRlZCBtb2R1bGVzXG5qZXN0Lm1vY2soJy4uLy4uL3NlcnZlci9vcHRpbWl6ZWQtZGItc3RvcmFnZScsICgpID0+ICh7XG4gIE9wdGltaXplZERhdGFiYXNlU3RvcmFnZTogamVzdC5mbigoKSA9PiBtb2NrU3RvcmFnZSksXG4gIGRlZmF1bHQ6IGplc3QuZm4oKCkgPT4gbW9ja1N0b3JhZ2UpXG59KSk7XG5cbmplc3QubW9jaygnLi4vLi4vc2VydmVyL2RiJywgKCkgPT4ge1xuICBjb25zdCBtb2NrU3FsOiBhbnkgPSBqZXN0LmZuKCkubW9ja1Jlc29sdmVkVmFsdWUoW10pO1xuICBtb2NrU3FsLnNldFR5cGVQYXJzZXIgPSBqZXN0LmZuKCk7XG4gIHJldHVybiB7XG4gICAgZGI6IHtcbiAgICAgIHF1ZXJ5OiBqZXN0LmZuKCkubW9ja1Jlc29sdmVkVmFsdWUoW10pLFxuICAgICAgaW5zZXJ0OiBqZXN0LmZuKCgpID0+ICh7IHZhbHVlczogamVzdC5mbigoKSA9PiAoeyByZXR1cm5pbmc6IGplc3QuZm4oKS5tb2NrUmVzb2x2ZWRWYWx1ZShbXSkgfSkpIH0pKSxcbiAgICAgIHNlbGVjdDogamVzdC5mbigoKSA9PiAoeyBmcm9tOiBqZXN0LmZuKCgpID0+ICh7IHdoZXJlOiBqZXN0LmZuKCkubW9ja1Jlc29sdmVkVmFsdWUoW10pIH0pKSB9KSksXG4gICAgfSxcbiAgICBzcWw6IG1vY2tTcWwsXG4gIH07XG59KTtcblxuamVzdC5tb2NrKCcuLi8uLi9zZXJ2ZXIvc3RvcmFnZScsICgpID0+ICh7XG4gIHN0b3JhZ2U6IG1vY2tTdG9yYWdlLFxuICBkZWZhdWx0OiBtb2NrU3RvcmFnZVxufSkpO1xuXG4vLyBNb2NrIGF1dGhlbnRpY2F0aW9uIG1pZGRsZXdhcmVcbmplc3QubW9jaygnLi4vc2VydmVyL21pZGRsZXdhcmUvYXV0aCcsICgpID0+ICh7XG4gIGlzQXV0aGVudGljYXRlZDogKHJlcTogYW55LCByZXM6IGFueSwgbmV4dDogYW55KSA9PiB7XG4gICAgcmVxLnVzZXIgPSB7XG4gICAgICBpZDogJzEyM2U0NTY3LWU4OWItMTJkMy1hNDU2LTQyNjYxNDE3NDAwMCcsXG4gICAgICBlbWFpbDogJ3Rlc3RAa292ZW8uY29tJyxcbiAgICAgIHJvbGU6ICdhZG1pbidcbiAgICB9O1xuICAgIG5leHQoKTtcbiAgfVxufSkpO1xuXG4vLyBNb2NrIEV4cHJlc3MgYXBwIGZvciB0ZXN0aW5nXG5jb25zdCBtb2NrQXBwID0ge1xuICBwb3N0OiBqZXN0LmZuKCksXG4gIGdldDogamVzdC5mbigpLFxuICBwdXQ6IGplc3QuZm4oKSxcbiAgZGVsZXRlOiBqZXN0LmZuKCksXG4gIHVzZTogamVzdC5mbigpLFxuICBsaXN0ZW46IGplc3QuZm4oKSxcbn07XG5cbi8vIE1vY2sgc2VydmVyIGluZGV4XG5qZXN0Lm1vY2soJy4uLy4uL3NlcnZlci9pbmRleCcsICgpID0+ICh7XG4gIGFwcDogbW9ja0FwcCxcbiAgZGVmYXVsdDogbW9ja0FwcFxufSkpO1xuXG4vLyBJbXBvcnQgYWZ0ZXIgbW9ja2luZ1xubGV0IGFwcDogYW55O1xudHJ5IHtcbiAgYXBwID0gcmVxdWlyZSgnLi4vLi4vc2VydmVyL2luZGV4JykuYXBwIHx8IG1vY2tBcHA7XG59IGNhdGNoIChlcnJvcikge1xuICBhcHAgPSBtb2NrQXBwO1xufVxuXG5kZXNjcmliZSgnRmlsZSBVcGxvYWQgQVBJIEludGVncmF0aW9uIFRlc3RzJywgKCkgPT4ge1xuICBjb25zdCB0ZXN0RmlsZXNEaXIgPSBwYXRoLmpvaW4oX19kaXJuYW1lLCAndGVzdC1maWxlcycpO1xuICBjb25zdCB1cGxvYWREaXIgPSBwYXRoLmpvaW4oX19kaXJuYW1lLCAnLi4vLi4vdXBsb2FkcycpO1xuICBcbiAgLy8gTW9jayBzZWN1cml0eSBhdWRpdCBsb2dcbiAgY29uc3QgbW9ja0F1ZGl0TG9nOiBhbnlbXSA9IFtdO1xuICBjb25zdCBsb2dTZWN1cml0eUV2ZW50ID0gamVzdC5mbigoZXZlbnQsIHVzZXIsIHN1Y2Nlc3MsIGRldGFpbHMpID0+IHtcbiAgICBtb2NrQXVkaXRMb2cucHVzaCh7XG4gICAgICB0aW1lc3RhbXA6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSxcbiAgICAgIGV2ZW50LFxuICAgICAgdXNlcklkOiB1c2VyPy5pZCxcbiAgICAgIHN1Y2Nlc3MsXG4gICAgICBkZXRhaWxzXG4gICAgfSk7XG4gIH0pO1xuICBcbiAgLy8gTW9jayByYXRlIGxpbWl0aW5nXG4gIGNvbnN0IG1vY2tSYXRlTGltaXRTdG9yZSA9IG5ldyBNYXAoKTtcbiAgY29uc3QgY2hlY2tSYXRlTGltaXQgPSBqZXN0LmZuKCh1c2VySWQpID0+IHtcbiAgICBjb25zdCB1cGxvYWRzID0gbW9ja1JhdGVMaW1pdFN0b3JlLmdldCh1c2VySWQpIHx8IFtdO1xuICAgIHJldHVybiB1cGxvYWRzLmxlbmd0aCA8IDEwOyAvLyAxMCB1cGxvYWRzIHBlciBob3VyIGxpbWl0XG4gIH0pO1xuXG4gIGJlZm9yZUVhY2goKCkgPT4ge1xuICAgIGplc3QuY2xlYXJBbGxNb2NrcygpO1xuICAgIFxuICAgIC8vIENyZWF0ZSB0ZXN0IGZpbGVzIGRpcmVjdG9yeVxuICAgIGlmICghZnMuZXhpc3RzU3luYyh0ZXN0RmlsZXNEaXIpKSB7XG4gICAgICBmcy5ta2RpclN5bmModGVzdEZpbGVzRGlyLCB7IHJlY3Vyc2l2ZTogdHJ1ZSB9KTtcbiAgICB9XG5cbiAgICAvLyBDcmVhdGUgdGVzdCBmaWxlc1xuICAgIGZzLndyaXRlRmlsZVN5bmMocGF0aC5qb2luKHRlc3RGaWxlc0RpciwgJ3Rlc3QtaW1hZ2UucG5nJyksICdtb2NrIHBuZyBjb250ZW50Jyk7XG4gICAgZnMud3JpdGVGaWxlU3luYyhwYXRoLmpvaW4odGVzdEZpbGVzRGlyLCAndGVzdC1kb2N1bWVudC5wZGYnKSwgJ21vY2sgcGRmIGNvbnRlbnQnKTtcbiAgICBmcy53cml0ZUZpbGVTeW5jKHBhdGguam9pbih0ZXN0RmlsZXNEaXIsICd0ZXN0LXJlY2VpcHQuanBnJyksICdtb2NrIGpwZyBjb250ZW50Jyk7XG4gICAgZnMud3JpdGVGaWxlU3luYyhwYXRoLmpvaW4odGVzdEZpbGVzRGlyLCAnZXJyb3ItbG9nLnR4dCcpLCAnbW9jayBlcnJvciBsb2cgY29udGVudCcpO1xuXG4gICAgLy8gTW9jayBzdG9yYWdlIG1ldGhvZHNcbiAgICBtb2NrU3RvcmFnZS5jcmVhdGVCdWcubW9ja1Jlc29sdmVkVmFsdWUoeyBcbiAgICAgIGlkOiAnYnVnLTEyMycsXG4gICAgICB0aXRsZTogJ1Rlc3QgQnVnJyxcbiAgICAgIGF0dGFjaG1lbnRDb3VudDogMSBcbiAgICB9KTtcbiAgICBcbiAgICBtb2NrU3RvcmFnZS5jcmVhdGVGZWF0dXJlUmVxdWVzdC5tb2NrUmVzb2x2ZWRWYWx1ZSh7IFxuICAgICAgaWQ6ICdmZWF0dXJlLTEyMycsXG4gICAgICB0aXRsZTogJ1Rlc3QgRmVhdHVyZScsXG4gICAgICBhdHRhY2htZW50Q291bnQ6IDEgXG4gICAgfSk7XG4gICAgXG4gICAgbW9ja1N0b3JhZ2UuY3JlYXRlRG9jdW1lbnQubW9ja1Jlc29sdmVkVmFsdWUoeyBcbiAgICAgIGlkOiAnZG9jLTEyMycsXG4gICAgICBuYW1lOiAnVGVzdCBEb2N1bWVudCcsXG4gICAgICBmaWxlUGF0aDogJ2dlbmVyYWwvdGVzdC1maWxlLnBkZidcbiAgICB9KTtcbiAgICBcbiAgICBtb2NrU3RvcmFnZS5jcmVhdGVCaWxsLm1vY2tSZXNvbHZlZFZhbHVlKHsgXG4gICAgICBpZDogJ2JpbGwtMTIzJyxcbiAgICAgIHRpdGxlOiAnVGVzdCBCaWxsJyxcbiAgICAgIGF0dGFjaG1lbnRDb3VudDogMSBcbiAgICB9KTtcblxuICAgIG1vY2tTdG9yYWdlLmdldFVzZXIubW9ja1Jlc29sdmVkVmFsdWUoe1xuICAgICAgaWQ6ICcxMjNlNDU2Ny1lODliLTEyZDMtYTQ1Ni00MjY2MTQxNzQwMDAnLFxuICAgICAgZW1haWw6ICd0ZXN0QGtvdmVvLmNvbScsXG4gICAgICByb2xlOiAnYWRtaW4nXG4gICAgfSk7XG4gIH0pO1xuXG4gIGFmdGVyRWFjaCgoKSA9PiB7XG4gICAgLy8gQ2xlYW4gdXAgdGVzdCBmaWxlc1xuICAgIGlmIChmcy5leGlzdHNTeW5jKHRlc3RGaWxlc0RpcikpIHtcbiAgICAgIGZzLnJtU3luYyh0ZXN0RmlsZXNEaXIsIHsgcmVjdXJzaXZlOiB0cnVlLCBmb3JjZTogdHJ1ZSB9KTtcbiAgICB9XG4gICAgXG4gICAgLy8gQ2xlYW4gdXAgdXBsb2FkIGRpcmVjdG9yeVxuICAgIGlmIChmcy5leGlzdHNTeW5jKHVwbG9hZERpcikpIHtcbiAgICAgIGNvbnN0IGZpbGVzID0gZnMucmVhZGRpclN5bmModXBsb2FkRGlyKTtcbiAgICAgIGZpbGVzLmZvckVhY2goZmlsZSA9PiB7XG4gICAgICAgIGlmIChmaWxlLnN0YXJ0c1dpdGgoJ3Rlc3QtJykgfHwgZmlsZS5pbmNsdWRlcygnbW9jaycpKSB7XG4gICAgICAgICAgZnMudW5saW5rU3luYyhwYXRoLmpvaW4odXBsb2FkRGlyLCBmaWxlKSk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH1cbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ0J1ZyBSZXBvcnQgRmlsZSBVcGxvYWRzJywgKCkgPT4ge1xuICAgIGl0KCdzaG91bGQgaGFuZGxlIGJ1ZyByZXBvcnQgd2l0aCBzaW5nbGUgZmlsZSBhdHRhY2htZW50JywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCByZXF1ZXN0KGFwcClcbiAgICAgICAgLnBvc3QoJy9hcGkvYnVncycpXG4gICAgICAgIC5maWVsZCgndGl0bGUnLCAnQnVnIHdpdGggU2NyZWVuc2hvdCcpXG4gICAgICAgIC5maWVsZCgnZGVzY3JpcHRpb24nLCAnVGhpcyBpcyBhIHRlc3QgYnVnIHJlcG9ydCB3aXRoIGZpbGUgYXR0YWNobWVudC4nKVxuICAgICAgICAuZmllbGQoJ2NhdGVnb3J5JywgJ3VpX3V4JylcbiAgICAgICAgLmZpZWxkKCdwYWdlJywgJ1Rlc3QgUGFnZScpXG4gICAgICAgIC5maWVsZCgncHJpb3JpdHknLCAnbWVkaXVtJylcbiAgICAgICAgLmZpZWxkKCdyZXByb2R1Y3Rpb25TdGVwcycsICdTdGVwIDE6IE9wZW4gYXBwXFxuU3RlcCAyOiBDbGljayBidXR0b25cXG5TdGVwIDM6IFNlZSBlcnJvcicpXG4gICAgICAgIC5hdHRhY2goJ2F0dGFjaG1lbnRzJywgcGF0aC5qb2luKHRlc3RGaWxlc0RpciwgJ3Rlc3QtaW1hZ2UucG5nJykpXG4gICAgICAgIC5leHBlY3QoMjAxKTtcblxuICAgICAgZXhwZWN0KHJlc3BvbnNlLmJvZHkpLnRvTWF0Y2hPYmplY3Qoe1xuICAgICAgICBpZDogZXhwZWN0LmFueShTdHJpbmcpLFxuICAgICAgICB0aXRsZTogJ0J1ZyB3aXRoIFNjcmVlbnNob3QnLFxuICAgICAgICBhdHRhY2htZW50Q291bnQ6IGV4cGVjdC5hbnkoTnVtYmVyKVxuICAgICAgfSk7XG5cbiAgICAgIGV4cGVjdChtb2NrU3RvcmFnZS5jcmVhdGVCdWcpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKFxuICAgICAgICBleHBlY3Qub2JqZWN0Q29udGFpbmluZyh7XG4gICAgICAgICAgdGl0bGU6ICdCdWcgd2l0aCBTY3JlZW5zaG90JyxcbiAgICAgICAgICBkZXNjcmlwdGlvbjogJ1RoaXMgaXMgYSB0ZXN0IGJ1ZyByZXBvcnQgd2l0aCBmaWxlIGF0dGFjaG1lbnQuJyxcbiAgICAgICAgICBjYXRlZ29yeTogJ3VpX3V4JyxcbiAgICAgICAgICBwYWdlOiAnVGVzdCBQYWdlJyxcbiAgICAgICAgICBwcmlvcml0eTogJ21lZGl1bSdcbiAgICAgICAgfSlcbiAgICAgICk7XG5cbiAgICAgIGV4cGVjdChtb2NrU3RvcmFnZS5jcmVhdGVEb2N1bWVudCkudG9IYXZlQmVlbkNhbGxlZFdpdGgoXG4gICAgICAgIGV4cGVjdC5vYmplY3RDb250YWluaW5nKHtcbiAgICAgICAgICBuYW1lOiAndGVzdC1pbWFnZS5wbmcnLFxuICAgICAgICAgIGRvY3VtZW50VHlwZTogJ2F0dGFjaG1lbnQnLFxuICAgICAgICAgIGZpbGVOYW1lOiAndGVzdC1pbWFnZS5wbmcnLFxuICAgICAgICAgIGF0dGFjaGVkVG9UeXBlOiAnYnVnJyxcbiAgICAgICAgICB1cGxvYWRlZEJ5SWQ6ICcxMjNlNDU2Ny1lODliLTEyZDMtYTQ1Ni00MjY2MTQxNzQwMDAnXG4gICAgICAgIH0pXG4gICAgICApO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBoYW5kbGUgYnVnIHJlcG9ydCB3aXRoIG11bHRpcGxlIGZpbGUgYXR0YWNobWVudHMnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHJlcXVlc3QoYXBwKVxuICAgICAgICAucG9zdCgnL2FwaS9idWdzJylcbiAgICAgICAgLmZpZWxkKCd0aXRsZScsICdCdWcgd2l0aCBNdWx0aXBsZSBGaWxlcycpXG4gICAgICAgIC5maWVsZCgnZGVzY3JpcHRpb24nLCAnQnVnIHJlcG9ydCB3aXRoIG11bHRpcGxlIGF0dGFjaG1lbnRzLicpXG4gICAgICAgIC5maWVsZCgnY2F0ZWdvcnknLCAnZnVuY3Rpb25hbGl0eScpXG4gICAgICAgIC5maWVsZCgncGFnZScsICdEYXNoYm9hcmQnKVxuICAgICAgICAuZmllbGQoJ3ByaW9yaXR5JywgJ2hpZ2gnKVxuICAgICAgICAuYXR0YWNoKCdhdHRhY2htZW50cycsIHBhdGguam9pbih0ZXN0RmlsZXNEaXIsICd0ZXN0LWltYWdlLnBuZycpKVxuICAgICAgICAuYXR0YWNoKCdhdHRhY2htZW50cycsIHBhdGguam9pbih0ZXN0RmlsZXNEaXIsICd0ZXN0LWRvY3VtZW50LnBkZicpKVxuICAgICAgICAuYXR0YWNoKCdhdHRhY2htZW50cycsIHBhdGguam9pbih0ZXN0RmlsZXNEaXIsICdlcnJvci1sb2cudHh0JykpXG4gICAgICAgIC5leHBlY3QoMjAxKTtcblxuICAgICAgZXhwZWN0KHJlc3BvbnNlLmJvZHkpLnRvTWF0Y2hPYmplY3Qoe1xuICAgICAgICBpZDogZXhwZWN0LmFueShTdHJpbmcpLFxuICAgICAgICB0aXRsZTogJ0J1ZyB3aXRoIE11bHRpcGxlIEZpbGVzJ1xuICAgICAgfSk7XG5cbiAgICAgIC8vIFNob3VsZCBjcmVhdGUgZG9jdW1lbnQgZm9yIGVhY2ggYXR0YWNobWVudFxuICAgICAgZXhwZWN0KG1vY2tTdG9yYWdlLmNyZWF0ZURvY3VtZW50KS50b0hhdmVCZWVuQ2FsbGVkVGltZXMoMyk7XG4gICAgICBleHBlY3QobW9ja1N0b3JhZ2UuY3JlYXRlRG9jdW1lbnQpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKFxuICAgICAgICBleHBlY3Qub2JqZWN0Q29udGFpbmluZyh7XG4gICAgICAgICAgbmFtZTogJ3Rlc3QtaW1hZ2UucG5nJyxcbiAgICAgICAgICBhdHRhY2hlZFRvVHlwZTogJ2J1ZydcbiAgICAgICAgfSlcbiAgICAgICk7XG4gICAgICBleHBlY3QobW9ja1N0b3JhZ2UuY3JlYXRlRG9jdW1lbnQpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKFxuICAgICAgICBleHBlY3Qub2JqZWN0Q29udGFpbmluZyh7XG4gICAgICAgICAgbmFtZTogJ3Rlc3QtZG9jdW1lbnQucGRmJyxcbiAgICAgICAgICBhdHRhY2hlZFRvVHlwZTogJ2J1ZydcbiAgICAgICAgfSlcbiAgICAgICk7XG4gICAgICBleHBlY3QobW9ja1N0b3JhZ2UuY3JlYXRlRG9jdW1lbnQpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKFxuICAgICAgICBleHBlY3Qub2JqZWN0Q29udGFpbmluZyh7XG4gICAgICAgICAgbmFtZTogJ2Vycm9yLWxvZy50eHQnLFxuICAgICAgICAgIGF0dGFjaGVkVG9UeXBlOiAnYnVnJ1xuICAgICAgICB9KVxuICAgICAgKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgcmVqZWN0IG92ZXJzaXplZCBmaWxlcyBpbiBidWcgcmVwb3J0cycsIGFzeW5jICgpID0+IHtcbiAgICAgIC8vIENyZWF0ZSBhIGxhcmdlIGZpbGUgKG92ZXIgMTBNQiBsaW1pdClcbiAgICAgIGNvbnN0IGxhcmdlRmlsZSA9IHBhdGguam9pbih0ZXN0RmlsZXNEaXIsICdsYXJnZS1maWxlLnBuZycpO1xuICAgICAgY29uc3QgbGFyZ2VDb250ZW50ID0gQnVmZmVyLmFsbG9jKDExICogMTAyNCAqIDEwMjQsICd4Jyk7IC8vIDExTUJcbiAgICAgIGZzLndyaXRlRmlsZVN5bmMobGFyZ2VGaWxlLCBsYXJnZUNvbnRlbnQpO1xuXG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHJlcXVlc3QoYXBwKVxuICAgICAgICAucG9zdCgnL2FwaS9idWdzJylcbiAgICAgICAgLmZpZWxkKCd0aXRsZScsICdCdWcgd2l0aCBMYXJnZSBGaWxlJylcbiAgICAgICAgLmZpZWxkKCdkZXNjcmlwdGlvbicsICdUZXN0aW5nIGZpbGUgc2l6ZSBsaW1pdHMuJylcbiAgICAgICAgLmZpZWxkKCdjYXRlZ29yeScsICd1aV91eCcpXG4gICAgICAgIC5maWVsZCgncGFnZScsICdUZXN0IFBhZ2UnKVxuICAgICAgICAuZmllbGQoJ3ByaW9yaXR5JywgJ21lZGl1bScpXG4gICAgICAgIC5hdHRhY2goJ2F0dGFjaG1lbnRzJywgbGFyZ2VGaWxlKVxuICAgICAgICAuZXhwZWN0KDQwMCk7XG5cbiAgICAgIGV4cGVjdChyZXNwb25zZS5ib2R5KS50b01hdGNoT2JqZWN0KHtcbiAgICAgICAgZXJyb3I6IGV4cGVjdC5zdHJpbmdNYXRjaGluZygvZmlsZS4qdG9vIGxhcmdlfHNpemUuKmxpbWl0L2kpXG4gICAgICB9KTtcblxuICAgICAgZXhwZWN0KG1vY2tTdG9yYWdlLmNyZWF0ZUJ1Zykubm90LnRvSGF2ZUJlZW5DYWxsZWQoKTtcbiAgICAgIGV4cGVjdChtb2NrU3RvcmFnZS5jcmVhdGVEb2N1bWVudCkubm90LnRvSGF2ZUJlZW5DYWxsZWQoKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgcmVqZWN0IGludmFsaWQgZmlsZSB0eXBlcyBpbiBidWcgcmVwb3J0cycsIGFzeW5jICgpID0+IHtcbiAgICAgIC8vIENyZWF0ZSBhbiBleGVjdXRhYmxlIGZpbGVcbiAgICAgIGNvbnN0IGV4ZWNGaWxlID0gcGF0aC5qb2luKHRlc3RGaWxlc0RpciwgJ21hbGljaW91cy5leGUnKTtcbiAgICAgIGZzLndyaXRlRmlsZVN5bmMoZXhlY0ZpbGUsICdmYWtlIGV4ZWN1dGFibGUgY29udGVudCcpO1xuXG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHJlcXVlc3QoYXBwKVxuICAgICAgICAucG9zdCgnL2FwaS9idWdzJylcbiAgICAgICAgLmZpZWxkKCd0aXRsZScsICdCdWcgd2l0aCBJbnZhbGlkIEZpbGUnKVxuICAgICAgICAuZmllbGQoJ2Rlc2NyaXB0aW9uJywgJ1Rlc3RpbmcgZmlsZSB0eXBlIHZhbGlkYXRpb24uJylcbiAgICAgICAgLmZpZWxkKCdjYXRlZ29yeScsICdzZWN1cml0eScpXG4gICAgICAgIC5maWVsZCgncGFnZScsICdUZXN0IFBhZ2UnKVxuICAgICAgICAuZmllbGQoJ3ByaW9yaXR5JywgJ2NyaXRpY2FsJylcbiAgICAgICAgLmF0dGFjaCgnYXR0YWNobWVudHMnLCBleGVjRmlsZSlcbiAgICAgICAgLmV4cGVjdCg0MDApO1xuXG4gICAgICBleHBlY3QocmVzcG9uc2UuYm9keSkudG9NYXRjaE9iamVjdCh7XG4gICAgICAgIGVycm9yOiBleHBlY3Quc3RyaW5nTWF0Y2hpbmcoL2ZpbGUuKnR5cGUuKm5vdC4qYWxsb3dlZHxpbnZhbGlkLipmaWxlLip0eXBlL2kpXG4gICAgICB9KTtcblxuICAgICAgZXhwZWN0KG1vY2tTdG9yYWdlLmNyZWF0ZUJ1Zykubm90LnRvSGF2ZUJlZW5DYWxsZWQoKTtcbiAgICAgIGV4cGVjdChtb2NrU3RvcmFnZS5jcmVhdGVEb2N1bWVudCkubm90LnRvSGF2ZUJlZW5DYWxsZWQoKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ0ZlYXR1cmUgUmVxdWVzdCBGaWxlIFVwbG9hZHMnLCAoKSA9PiB7XG4gICAgaXQoJ3Nob3VsZCBoYW5kbGUgZmVhdHVyZSByZXF1ZXN0IHdpdGggZGVzaWduIG1vY2t1cHMnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHJlcXVlc3QoYXBwKVxuICAgICAgICAucG9zdCgnL2FwaS9mZWF0dXJlLXJlcXVlc3RzJylcbiAgICAgICAgLmZpZWxkKCd0aXRsZScsICdOZXcgVUkgRmVhdHVyZScpXG4gICAgICAgIC5maWVsZCgnZGVzY3JpcHRpb24nLCAnRmVhdHVyZSByZXF1ZXN0IHdpdGggZGVzaWduIG1vY2t1cHMuJylcbiAgICAgICAgLmZpZWxkKCdjYXRlZ29yeScsICd1aV91eCcpXG4gICAgICAgIC5maWVsZCgncHJpb3JpdHknLCAnbWVkaXVtJylcbiAgICAgICAgLmF0dGFjaCgnYXR0YWNobWVudHMnLCBwYXRoLmpvaW4odGVzdEZpbGVzRGlyLCAndGVzdC1pbWFnZS5wbmcnKSlcbiAgICAgICAgLmF0dGFjaCgnYXR0YWNobWVudHMnLCBwYXRoLmpvaW4odGVzdEZpbGVzRGlyLCAndGVzdC1kb2N1bWVudC5wZGYnKSlcbiAgICAgICAgLmV4cGVjdCgyMDEpO1xuXG4gICAgICBleHBlY3QocmVzcG9uc2UuYm9keSkudG9NYXRjaE9iamVjdCh7XG4gICAgICAgIGlkOiBleHBlY3QuYW55KFN0cmluZyksXG4gICAgICAgIHRpdGxlOiAnTmV3IFVJIEZlYXR1cmUnXG4gICAgICB9KTtcblxuICAgICAgZXhwZWN0KG1vY2tTdG9yYWdlLmNyZWF0ZUZlYXR1cmVSZXF1ZXN0KS50b0hhdmVCZWVuQ2FsbGVkV2l0aChcbiAgICAgICAgZXhwZWN0Lm9iamVjdENvbnRhaW5pbmcoe1xuICAgICAgICAgIHRpdGxlOiAnTmV3IFVJIEZlYXR1cmUnLFxuICAgICAgICAgIGRlc2NyaXB0aW9uOiAnRmVhdHVyZSByZXF1ZXN0IHdpdGggZGVzaWduIG1vY2t1cHMuJyxcbiAgICAgICAgICBjYXRlZ29yeTogJ3VpX3V4JyxcbiAgICAgICAgICBwcmlvcml0eTogJ21lZGl1bSdcbiAgICAgICAgfSlcbiAgICAgICk7XG5cbiAgICAgIGV4cGVjdChtb2NrU3RvcmFnZS5jcmVhdGVEb2N1bWVudCkudG9IYXZlQmVlbkNhbGxlZFRpbWVzKDIpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCB2YWxpZGF0ZSBmZWF0dXJlIHJlcXVlc3QgZmlsZSB0eXBlcycsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IHNjcmlwdEZpbGUgPSBwYXRoLmpvaW4odGVzdEZpbGVzRGlyLCAnc2NyaXB0LmpzJyk7XG4gICAgICBmcy53cml0ZUZpbGVTeW5jKHNjcmlwdEZpbGUsICdjb25zb2xlLmxvZyhcInBvdGVudGlhbGx5IGRhbmdlcm91c1wiKTsnKTtcblxuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCByZXF1ZXN0KGFwcClcbiAgICAgICAgLnBvc3QoJy9hcGkvZmVhdHVyZS1yZXF1ZXN0cycpXG4gICAgICAgIC5maWVsZCgndGl0bGUnLCAnRmVhdHVyZSB3aXRoIFNjcmlwdCcpXG4gICAgICAgIC5maWVsZCgnZGVzY3JpcHRpb24nLCAnVGVzdGluZyBzY3JpcHQgZmlsZSB1cGxvYWQuJylcbiAgICAgICAgLmZpZWxkKCdjYXRlZ29yeScsICdmdW5jdGlvbmFsaXR5JylcbiAgICAgICAgLmZpZWxkKCdwcmlvcml0eScsICdsb3cnKVxuICAgICAgICAuYXR0YWNoKCdhdHRhY2htZW50cycsIHNjcmlwdEZpbGUpXG4gICAgICAgIC5leHBlY3QoNDAwKTtcblxuICAgICAgZXhwZWN0KHJlc3BvbnNlLmJvZHkpLnRvTWF0Y2hPYmplY3Qoe1xuICAgICAgICBlcnJvcjogZXhwZWN0LnN0cmluZ01hdGNoaW5nKC9maWxlLip0eXBlLipub3QuKmFsbG93ZWQvaSlcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnRG9jdW1lbnQgVXBsb2FkIEFQSScsICgpID0+IHtcbiAgICBpdCgnc2hvdWxkIGhhbmRsZSBkb2N1bWVudCB1cGxvYWQgd2l0aCBtZXRhZGF0YScsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgcmVxdWVzdChhcHApXG4gICAgICAgIC5wb3N0KCcvYXBpL2RvY3VtZW50cycpXG4gICAgICAgIC5maWVsZCgnbmFtZScsICdMZWdhbCBDb250cmFjdCcpXG4gICAgICAgIC5maWVsZCgnZGVzY3JpcHRpb24nLCAnSW1wb3J0YW50IGxlZ2FsIGRvY3VtZW50JylcbiAgICAgICAgLmZpZWxkKCdkb2N1bWVudFR5cGUnLCAnY29udHJhY3QnKVxuICAgICAgICAuZmllbGQoJ2lzVmlzaWJsZVRvVGVuYW50cycsICdmYWxzZScpXG4gICAgICAgIC5hdHRhY2goJ2ZpbGUnLCBwYXRoLmpvaW4odGVzdEZpbGVzRGlyLCAndGVzdC1kb2N1bWVudC5wZGYnKSlcbiAgICAgICAgLmV4cGVjdCgyMDEpO1xuXG4gICAgICBleHBlY3QocmVzcG9uc2UuYm9keSkudG9NYXRjaE9iamVjdCh7XG4gICAgICAgIGlkOiBleHBlY3QuYW55KFN0cmluZyksXG4gICAgICAgIG5hbWU6ICdMZWdhbCBDb250cmFjdCcsXG4gICAgICAgIGZpbGVQYXRoOiBleHBlY3Quc3RyaW5nTWF0Y2hpbmcoL2dlbmVyYWxcXC8uKlxcLnBkZiQvKVxuICAgICAgfSk7XG5cbiAgICAgIGV4cGVjdChtb2NrU3RvcmFnZS5jcmVhdGVEb2N1bWVudCkudG9IYXZlQmVlbkNhbGxlZFdpdGgoXG4gICAgICAgIGV4cGVjdC5vYmplY3RDb250YWluaW5nKHtcbiAgICAgICAgICBuYW1lOiAnTGVnYWwgQ29udHJhY3QnLFxuICAgICAgICAgIGRlc2NyaXB0aW9uOiAnSW1wb3J0YW50IGxlZ2FsIGRvY3VtZW50JyxcbiAgICAgICAgICBkb2N1bWVudFR5cGU6ICdjb250cmFjdCcsXG4gICAgICAgICAgZmlsZU5hbWU6ICd0ZXN0LWRvY3VtZW50LnBkZicsXG4gICAgICAgICAgaXNWaXNpYmxlVG9UZW5hbnRzOiBmYWxzZSxcbiAgICAgICAgICB1cGxvYWRlZEJ5SWQ6ICcxMjNlNDU2Ny1lODliLTEyZDMtYTQ1Ni00MjY2MTQxNzQwMDAnXG4gICAgICAgIH0pXG4gICAgICApO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBzZXJ2ZSB1cGxvYWRlZCBkb2N1bWVudHMnLCBhc3luYyAoKSA9PiB7XG4gICAgICAvLyBGaXJzdCB1cGxvYWQgYSBkb2N1bWVudFxuICAgICAgY29uc3QgdXBsb2FkUmVzcG9uc2UgPSBhd2FpdCByZXF1ZXN0KGFwcClcbiAgICAgICAgLnBvc3QoJy9hcGkvZG9jdW1lbnRzJylcbiAgICAgICAgLmZpZWxkKCduYW1lJywgJ1Rlc3QgRG9jdW1lbnQnKVxuICAgICAgICAuZmllbGQoJ2RvY3VtZW50VHlwZScsICdnZW5lcmFsJylcbiAgICAgICAgLmF0dGFjaCgnZmlsZScsIHBhdGguam9pbih0ZXN0RmlsZXNEaXIsICd0ZXN0LWRvY3VtZW50LnBkZicpKVxuICAgICAgICAuZXhwZWN0KDIwMSk7XG5cbiAgICAgIGNvbnN0IGRvY3VtZW50SWQgPSB1cGxvYWRSZXNwb25zZS5ib2R5LmlkO1xuXG4gICAgICAvLyBNb2NrIHRoZSBkb2N1bWVudCByZXRyaWV2YWxcbiAgICAgIG1vY2tTdG9yYWdlLmdldERvY3VtZW50ID0gamVzdC5mbigpLm1vY2tSZXNvbHZlZFZhbHVlKHtcbiAgICAgICAgaWQ6IGRvY3VtZW50SWQsXG4gICAgICAgIG5hbWU6ICdUZXN0IERvY3VtZW50JyxcbiAgICAgICAgZmlsZVBhdGg6ICdnZW5lcmFsL3Rlc3QtZG9jdW1lbnQucGRmJyxcbiAgICAgICAgZmlsZU5hbWU6ICd0ZXN0LWRvY3VtZW50LnBkZicsXG4gICAgICAgIG1pbWVUeXBlOiAnYXBwbGljYXRpb24vcGRmJ1xuICAgICAgfSk7XG5cbiAgICAgIC8vIFRoZW4gdHJ5IHRvIGFjY2VzcyB0aGUgZG9jdW1lbnRcbiAgICAgIGNvbnN0IGFjY2Vzc1Jlc3BvbnNlID0gYXdhaXQgcmVxdWVzdChhcHApXG4gICAgICAgIC5nZXQoYC9hcGkvZG9jdW1lbnRzLyR7ZG9jdW1lbnRJZH0vZmlsZWApXG4gICAgICAgIC5leHBlY3QoMjAwKTtcblxuICAgICAgZXhwZWN0KGFjY2Vzc1Jlc3BvbnNlLmhlYWRlcnNbJ2NvbnRlbnQtdHlwZSddKS50b01hdGNoKC9hcHBsaWNhdGlvblxcL3BkZi8pO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCB2YWxpZGF0ZSBkb2N1bWVudCBhY2Nlc3MgcGVybWlzc2lvbnMnLCBhc3luYyAoKSA9PiB7XG4gICAgICAvLyBNb2NrIHVuYXV0aG9yaXplZCB1c2VyXG4gICAgICBqZXN0LmNsZWFyQWxsTW9ja3MoKTtcbiAgICAgIFxuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCByZXF1ZXN0KGFwcClcbiAgICAgICAgLmdldCgnL2FwaS9kb2N1bWVudHMvdW5hdXRob3JpemVkLWRvYy9maWxlJylcbiAgICAgICAgLmV4cGVjdCg0MDQpO1xuXG4gICAgICBleHBlY3QocmVzcG9uc2UuYm9keSkudG9NYXRjaE9iamVjdCh7XG4gICAgICAgIGVycm9yOiBleHBlY3QuYW55KFN0cmluZylcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnQmlsbCBSZWNlaXB0IFVwbG9hZHMnLCAoKSA9PiB7XG4gICAgaXQoJ3Nob3VsZCBoYW5kbGUgYmlsbCBjcmVhdGlvbiB3aXRoIHJlY2VpcHQgYXR0YWNobWVudCcsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgcmVxdWVzdChhcHApXG4gICAgICAgIC5wb3N0KCcvYXBpL2JpbGxzJylcbiAgICAgICAgLmZpZWxkKCd0aXRsZScsICdFbGVjdHJpY2l0eSBCaWxsIC0gSmFudWFyeSAyMDI1JylcbiAgICAgICAgLmZpZWxkKCdhbW91bnQnLCAnMTUwLjc1JylcbiAgICAgICAgLmZpZWxkKCdkdWVEYXRlJywgJzIwMjUtMDItMTUnKVxuICAgICAgICAuZmllbGQoJ2NhdGVnb3J5JywgJ3V0aWxpdGllcycpXG4gICAgICAgIC5hdHRhY2goJ3JlY2VpcHRzJywgcGF0aC5qb2luKHRlc3RGaWxlc0RpciwgJ3Rlc3QtcmVjZWlwdC5qcGcnKSlcbiAgICAgICAgLmV4cGVjdCgyMDEpO1xuXG4gICAgICBleHBlY3QocmVzcG9uc2UuYm9keSkudG9NYXRjaE9iamVjdCh7XG4gICAgICAgIGlkOiBleHBlY3QuYW55KFN0cmluZyksXG4gICAgICAgIHRpdGxlOiAnRWxlY3RyaWNpdHkgQmlsbCAtIEphbnVhcnkgMjAyNScsXG4gICAgICAgIGFtb3VudDogMTUwLjc1XG4gICAgICB9KTtcblxuICAgICAgZXhwZWN0KG1vY2tTdG9yYWdlLmNyZWF0ZUJpbGwpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKFxuICAgICAgICBleHBlY3Qub2JqZWN0Q29udGFpbmluZyh7XG4gICAgICAgICAgdGl0bGU6ICdFbGVjdHJpY2l0eSBCaWxsIC0gSmFudWFyeSAyMDI1JyxcbiAgICAgICAgICBhbW91bnQ6IDE1MC43NSxcbiAgICAgICAgICBjYXRlZ29yeTogJ3V0aWxpdGllcydcbiAgICAgICAgfSlcbiAgICAgICk7XG5cbiAgICAgIGV4cGVjdChtb2NrU3RvcmFnZS5jcmVhdGVEb2N1bWVudCkudG9IYXZlQmVlbkNhbGxlZFdpdGgoXG4gICAgICAgIGV4cGVjdC5vYmplY3RDb250YWluaW5nKHtcbiAgICAgICAgICBuYW1lOiAndGVzdC1yZWNlaXB0LmpwZycsXG4gICAgICAgICAgZG9jdW1lbnRUeXBlOiAncmVjZWlwdCcsXG4gICAgICAgICAgYXR0YWNoZWRUb1R5cGU6ICdiaWxsJ1xuICAgICAgICB9KVxuICAgICAgKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgdmFsaWRhdGUgcmVjZWlwdCBmaWxlIGZvcm1hdHMnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBpbnZhbGlkUmVjZWlwdEZpbGUgPSBwYXRoLmpvaW4odGVzdEZpbGVzRGlyLCAncmVjZWlwdC50eHQnKTtcbiAgICAgIGZzLndyaXRlRmlsZVN5bmMoaW52YWxpZFJlY2VpcHRGaWxlLCAnVGhpcyBpcyBub3QgYW4gaW1hZ2UgcmVjZWlwdCcpO1xuXG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHJlcXVlc3QoYXBwKVxuICAgICAgICAucG9zdCgnL2FwaS9iaWxscycpXG4gICAgICAgIC5maWVsZCgndGl0bGUnLCAnQmlsbCB3aXRoIEludmFsaWQgUmVjZWlwdCcpXG4gICAgICAgIC5maWVsZCgnYW1vdW50JywgJzEwMC4wMCcpXG4gICAgICAgIC5maWVsZCgnZHVlRGF0ZScsICcyMDI1LTAzLTAxJylcbiAgICAgICAgLmZpZWxkKCdjYXRlZ29yeScsICdtYWludGVuYW5jZScpXG4gICAgICAgIC5hdHRhY2goJ3JlY2VpcHRzJywgaW52YWxpZFJlY2VpcHRGaWxlKVxuICAgICAgICAuZXhwZWN0KDQwMCk7XG5cbiAgICAgIGV4cGVjdChyZXNwb25zZS5ib2R5KS50b01hdGNoT2JqZWN0KHtcbiAgICAgICAgZXJyb3I6IGV4cGVjdC5zdHJpbmdNYXRjaGluZygvcmVjZWlwdC4qbXVzdC4qYmUuKmltYWdlfGludmFsaWQuKnJlY2VpcHQuKmZvcm1hdC9pKVxuICAgICAgfSk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdGaWxlIFN0b3JhZ2UgYW5kIENsZWFudXAnLCAoKSA9PiB7XG4gICAgaXQoJ3Nob3VsZCBjbGVhbiB1cCB0ZW1wb3JhcnkgZmlsZXMgb24gdXBsb2FkIGZhaWx1cmUnLCBhc3luYyAoKSA9PiB7XG4gICAgICAvLyBNb2NrIGEgc3RvcmFnZSBmYWlsdXJlXG4gICAgICBtb2NrU3RvcmFnZS5jcmVhdGVCdWcubW9ja1JlamVjdGVkVmFsdWUobmV3IEVycm9yKCdEYXRhYmFzZSBlcnJvcicpKTtcblxuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCByZXF1ZXN0KGFwcClcbiAgICAgICAgLnBvc3QoJy9hcGkvYnVncycpXG4gICAgICAgIC5maWVsZCgndGl0bGUnLCAnQnVnIHRoYXQgd2lsbCBmYWlsJylcbiAgICAgICAgLmZpZWxkKCdkZXNjcmlwdGlvbicsICdUaGlzIHNob3VsZCB0cmlnZ2VyIGNsZWFudXAuJylcbiAgICAgICAgLmZpZWxkKCdjYXRlZ29yeScsICd1aV91eCcpXG4gICAgICAgIC5maWVsZCgncGFnZScsICdUZXN0IFBhZ2UnKVxuICAgICAgICAuZmllbGQoJ3ByaW9yaXR5JywgJ21lZGl1bScpXG4gICAgICAgIC5hdHRhY2goJ2F0dGFjaG1lbnRzJywgcGF0aC5qb2luKHRlc3RGaWxlc0RpciwgJ3Rlc3QtaW1hZ2UucG5nJykpXG4gICAgICAgIC5leHBlY3QoNTAwKTtcblxuICAgICAgZXhwZWN0KHJlc3BvbnNlLmJvZHkpLnRvTWF0Y2hPYmplY3Qoe1xuICAgICAgICBlcnJvcjogZXhwZWN0LmFueShTdHJpbmcpXG4gICAgICB9KTtcblxuICAgICAgLy8gVmVyaWZ5IHRlbXBvcmFyeSBmaWxlcyB3ZXJlIGNsZWFuZWQgdXBcbiAgICAgIGNvbnN0IHRlbXBGaWxlcyA9IGZzLnJlYWRkaXJTeW5jKHVwbG9hZERpcikuZmlsdGVyKGZpbGUgPT4gXG4gICAgICAgIGZpbGUuaW5jbHVkZXMoJ3Rlc3QtaW1hZ2UnKSB8fCBmaWxlLmluY2x1ZGVzKCd0ZW1wJylcbiAgICAgICk7XG4gICAgICBleHBlY3QodGVtcEZpbGVzKS50b0hhdmVMZW5ndGgoMCk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGhhbmRsZSBjb25jdXJyZW50IGZpbGUgdXBsb2FkcycsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IHVwbG9hZFByb21pc2VzID0gQXJyYXkuZnJvbSh7IGxlbmd0aDogNSB9LCAoXywgaSkgPT4gXG4gICAgICAgIHJlcXVlc3QoYXBwKVxuICAgICAgICAgIC5wb3N0KCcvYXBpL2J1Z3MnKVxuICAgICAgICAgIC5maWVsZCgndGl0bGUnLCBgQ29uY3VycmVudCBCdWcgJHtpICsgMX1gKVxuICAgICAgICAgIC5maWVsZCgnZGVzY3JpcHRpb24nLCBgQ29uY3VycmVudCB1cGxvYWQgdGVzdCAke2kgKyAxfWApXG4gICAgICAgICAgLmZpZWxkKCdjYXRlZ29yeScsICdwZXJmb3JtYW5jZScpXG4gICAgICAgICAgLmZpZWxkKCdwYWdlJywgJ1Rlc3QgUGFnZScpXG4gICAgICAgICAgLmZpZWxkKCdwcmlvcml0eScsICdsb3cnKVxuICAgICAgICAgIC5hdHRhY2goJ2F0dGFjaG1lbnRzJywgcGF0aC5qb2luKHRlc3RGaWxlc0RpciwgJ3Rlc3QtaW1hZ2UucG5nJykpXG4gICAgICApO1xuXG4gICAgICBjb25zdCByZXNwb25zZXMgPSBhd2FpdCBQcm9taXNlLmFsbCh1cGxvYWRQcm9taXNlcyk7XG5cbiAgICAgIHJlc3BvbnNlcy5mb3JFYWNoKChyZXNwb25zZSwgaSkgPT4ge1xuICAgICAgICBleHBlY3QocmVzcG9uc2Uuc3RhdHVzKS50b0JlKDIwMSk7XG4gICAgICAgIGV4cGVjdChyZXNwb25zZS5ib2R5KS50b01hdGNoT2JqZWN0KHtcbiAgICAgICAgICBpZDogZXhwZWN0LmFueShTdHJpbmcpLFxuICAgICAgICAgIHRpdGxlOiBgQ29uY3VycmVudCBCdWcgJHtpICsgMX1gXG4gICAgICAgIH0pO1xuICAgICAgfSk7XG5cbiAgICAgIGV4cGVjdChtb2NrU3RvcmFnZS5jcmVhdGVCdWcpLnRvSGF2ZUJlZW5DYWxsZWRUaW1lcyg1KTtcbiAgICAgIGV4cGVjdChtb2NrU3RvcmFnZS5jcmVhdGVEb2N1bWVudCkudG9IYXZlQmVlbkNhbGxlZFRpbWVzKDUpO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnRmlsZSBWYWxpZGF0aW9uIEVkZ2UgQ2FzZXMnLCAoKSA9PiB7XG4gICAgaXQoJ3Nob3VsZCBoYW5kbGUgZW1wdHkgZmlsZXMnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBlbXB0eUZpbGUgPSBwYXRoLmpvaW4odGVzdEZpbGVzRGlyLCAnZW1wdHkucG5nJyk7XG4gICAgICBmcy53cml0ZUZpbGVTeW5jKGVtcHR5RmlsZSwgJycpO1xuXG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHJlcXVlc3QoYXBwKVxuICAgICAgICAucG9zdCgnL2FwaS9idWdzJylcbiAgICAgICAgLmZpZWxkKCd0aXRsZScsICdCdWcgd2l0aCBFbXB0eSBGaWxlJylcbiAgICAgICAgLmZpZWxkKCdkZXNjcmlwdGlvbicsICdUZXN0aW5nIGVtcHR5IGZpbGUgaGFuZGxpbmcuJylcbiAgICAgICAgLmZpZWxkKCdjYXRlZ29yeScsICd1aV91eCcpXG4gICAgICAgIC5maWVsZCgncGFnZScsICdUZXN0IFBhZ2UnKVxuICAgICAgICAuZmllbGQoJ3ByaW9yaXR5JywgJ21lZGl1bScpXG4gICAgICAgIC5hdHRhY2goJ2F0dGFjaG1lbnRzJywgZW1wdHlGaWxlKVxuICAgICAgICAuZXhwZWN0KDQwMCk7XG5cbiAgICAgIGV4cGVjdChyZXNwb25zZS5ib2R5KS50b01hdGNoT2JqZWN0KHtcbiAgICAgICAgZXJyb3I6IGV4cGVjdC5zdHJpbmdNYXRjaGluZygvZmlsZS4qZW1wdHl8aW52YWxpZC4qZmlsZS4qc2l6ZS9pKVxuICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGhhbmRsZSBjb3JydXB0ZWQgZmlsZXMnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBjb3JydXB0ZWRGaWxlID0gcGF0aC5qb2luKHRlc3RGaWxlc0RpciwgJ2NvcnJ1cHRlZC5wZGYnKTtcbiAgICAgIGZzLndyaXRlRmlsZVN5bmMoY29ycnVwdGVkRmlsZSwgJ1RoaXMgaXMgbm90IGEgdmFsaWQgUERGIGNvbnRlbnQgYnV0IGNsYWltcyB0byBiZScpO1xuXG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHJlcXVlc3QoYXBwKVxuICAgICAgICAucG9zdCgnL2FwaS9kb2N1bWVudHMnKVxuICAgICAgICAuZmllbGQoJ25hbWUnLCAnQ29ycnVwdGVkIERvY3VtZW50JylcbiAgICAgICAgLmZpZWxkKCdkb2N1bWVudFR5cGUnLCAnZ2VuZXJhbCcpXG4gICAgICAgIC5hdHRhY2goJ2ZpbGUnLCBjb3JydXB0ZWRGaWxlKVxuICAgICAgICAuZXhwZWN0KDQwMCk7XG5cbiAgICAgIGV4cGVjdChyZXNwb25zZS5ib2R5KS50b01hdGNoT2JqZWN0KHtcbiAgICAgICAgZXJyb3I6IGV4cGVjdC5zdHJpbmdNYXRjaGluZygvaW52YWxpZC4qZmlsZS4qZm9ybWF0fGNvcnJ1cHRlZC4qZmlsZS9pKVxuICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGhhbmRsZSBmaWxlbmFtZSB3aXRoIHNwZWNpYWwgY2hhcmFjdGVycycsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IHNwZWNpYWxOYW1lRmlsZSA9IHBhdGguam9pbih0ZXN0RmlsZXNEaXIsICdmaWxlIHdpdGggc3BhY2VzICYgc8OtbWLDtmxzLnBkZicpO1xuICAgICAgZnMud3JpdGVGaWxlU3luYyhzcGVjaWFsTmFtZUZpbGUsICdtb2NrIHBkZiBjb250ZW50Jyk7XG5cbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgcmVxdWVzdChhcHApXG4gICAgICAgIC5wb3N0KCcvYXBpL2RvY3VtZW50cycpXG4gICAgICAgIC5maWVsZCgnbmFtZScsICdEb2N1bWVudCB3aXRoIFNwZWNpYWwgRmlsZW5hbWUnKVxuICAgICAgICAuZmllbGQoJ2RvY3VtZW50VHlwZScsICdnZW5lcmFsJylcbiAgICAgICAgLmF0dGFjaCgnZmlsZScsIHNwZWNpYWxOYW1lRmlsZSlcbiAgICAgICAgLmV4cGVjdCgyMDEpO1xuXG4gICAgICBleHBlY3QocmVzcG9uc2UuYm9keSkudG9NYXRjaE9iamVjdCh7XG4gICAgICAgIGlkOiBleHBlY3QuYW55KFN0cmluZyksXG4gICAgICAgIG5hbWU6ICdEb2N1bWVudCB3aXRoIFNwZWNpYWwgRmlsZW5hbWUnXG4gICAgICB9KTtcblxuICAgICAgZXhwZWN0KG1vY2tTdG9yYWdlLmNyZWF0ZURvY3VtZW50KS50b0hhdmVCZWVuQ2FsbGVkV2l0aChcbiAgICAgICAgZXhwZWN0Lm9iamVjdENvbnRhaW5pbmcoe1xuICAgICAgICAgIG5hbWU6ICdEb2N1bWVudCB3aXRoIFNwZWNpYWwgRmlsZW5hbWUnLFxuICAgICAgICAgIGZpbGVOYW1lOiBleHBlY3Quc3RyaW5nTWF0Y2hpbmcoL15bYS16QS1aMC05Xy1dK1xcLnBkZiQvKSwgLy8gU2hvdWxkIGJlIHNhbml0aXplZFxuICAgICAgICAgIGZpbGVQYXRoOiBleHBlY3Quc3RyaW5nTWF0Y2hpbmcoL2dlbmVyYWxcXC8uKlxcLnBkZiQvKVxuICAgICAgICB9KVxuICAgICAgKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgaGFuZGxlIG1heGltdW0gdG90YWwgdXBsb2FkIHNpemUgbGltaXQnLCBhc3luYyAoKSA9PiB7XG4gICAgICAvLyBDcmVhdGUgbXVsdGlwbGUgbGFyZ2UgZmlsZXMgdGhhdCBleGNlZWQgdG90YWwgbGltaXRcbiAgICAgIGNvbnN0IGxhcmdlRmlsZXMgPSBbXTtcbiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgMzsgaSsrKSB7XG4gICAgICAgIGNvbnN0IGZpbGVOYW1lID0gYGxhcmdlLWZpbGUtJHtpfS5wbmdgO1xuICAgICAgICBjb25zdCBmaWxlUGF0aCA9IHBhdGguam9pbih0ZXN0RmlsZXNEaXIsIGZpbGVOYW1lKTtcbiAgICAgICAgY29uc3QgY29udGVudCA9IEJ1ZmZlci5hbGxvYyg1ICogMTAyNCAqIDEwMjQsICd4Jyk7IC8vIDVNQiBlYWNoXG4gICAgICAgIGZzLndyaXRlRmlsZVN5bmMoZmlsZVBhdGgsIGNvbnRlbnQpO1xuICAgICAgICBsYXJnZUZpbGVzLnB1c2goZmlsZVBhdGgpO1xuICAgICAgfVxuXG4gICAgICBjb25zdCByZXF1ZXN0X2J1aWxkZXIgPSByZXF1ZXN0KGFwcClcbiAgICAgICAgLnBvc3QoJy9hcGkvYnVncycpXG4gICAgICAgIC5maWVsZCgndGl0bGUnLCAnQnVnIHdpdGggTXVsdGlwbGUgTGFyZ2UgRmlsZXMnKVxuICAgICAgICAuZmllbGQoJ2Rlc2NyaXB0aW9uJywgJ1Rlc3RpbmcgdG90YWwgc2l6ZSBsaW1pdHMuJylcbiAgICAgICAgLmZpZWxkKCdjYXRlZ29yeScsICdwZXJmb3JtYW5jZScpXG4gICAgICAgIC5maWVsZCgncGFnZScsICdUZXN0IFBhZ2UnKVxuICAgICAgICAuZmllbGQoJ3ByaW9yaXR5JywgJ21lZGl1bScpO1xuXG4gICAgICAvLyBBdHRhY2ggYWxsIGxhcmdlIGZpbGVzXG4gICAgICBsYXJnZUZpbGVzLmZvckVhY2goZmlsZVBhdGggPT4ge1xuICAgICAgICByZXF1ZXN0X2J1aWxkZXIuYXR0YWNoKCdhdHRhY2htZW50cycsIGZpbGVQYXRoKTtcbiAgICAgIH0pO1xuXG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHJlcXVlc3RfYnVpbGRlci5leHBlY3QoNDAwKTtcblxuICAgICAgZXhwZWN0KHJlc3BvbnNlLmJvZHkpLnRvTWF0Y2hPYmplY3Qoe1xuICAgICAgICBlcnJvcjogZXhwZWN0LnN0cmluZ01hdGNoaW5nKC90b3RhbC4qc2l6ZS4qZXhjZWVkZWR8dG9vIG1hbnkuKmxhcmdlLipmaWxlcy9pKVxuICAgICAgfSk7XG4gICAgfSk7XG4gIH0pO1xufSk7Il0sInZlcnNpb24iOjN9