2a6f6ede81625bfc1491cf250cfd7d27
"use strict";
/**
 * API Routes Validation Tests
 * Simple tests to ensure API route definitions are valid and error-free
 */
var __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {
    if (k2 === undefined) k2 = k;
    var desc = Object.getOwnPropertyDescriptor(m, k);
    if (!desc || ("get" in desc ? !m.__esModule : desc.writable || desc.configurable)) {
      desc = { enumerable: true, get: function() { return m[k]; } };
    }
    Object.defineProperty(o, k2, desc);
}) : (function(o, m, k, k2) {
    if (k2 === undefined) k2 = k;
    o[k2] = m[k];
}));
var __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {
    Object.defineProperty(o, "default", { enumerable: true, value: v });
}) : function(o, v) {
    o["default"] = v;
});
var __importStar = (this && this.__importStar) || (function () {
    var ownKeys = function(o) {
        ownKeys = Object.getOwnPropertyNames || function (o) {
            var ar = [];
            for (var k in o) if (Object.prototype.hasOwnProperty.call(o, k)) ar[ar.length] = k;
            return ar;
        };
        return ownKeys(o);
    };
    return function (mod) {
        if (mod && mod.__esModule) return mod;
        var result = {};
        if (mod != null) for (var k = ownKeys(mod), i = 0; i < k.length; i++) if (k[i] !== "default") __createBinding(result, mod, k[i]);
        __setModuleDefault(result, mod);
        return result;
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
const globals_1 = require("@jest/globals");
(0, globals_1.describe)('API Routes Validation', () => {
    (0, globals_1.describe)('Route File Validation', () => {
        (0, globals_1.it)('should validate organizations route structure', async () => {
            // Test that the organizations routes file can be imported
            (0, globals_1.expect)(async () => {
                const { registerOrganizationRoutes } = await Promise.resolve().then(() => __importStar(require('../../server/api/organizations')));
                (0, globals_1.expect)(typeof registerOrganizationRoutes).toBe('function');
            }).not.toThrow();
        });
        (0, globals_1.it)('should validate users route structure', async () => {
            (0, globals_1.expect)(async () => {
                const { registerUserRoutes } = await Promise.resolve().then(() => __importStar(require('../../server/api/users')));
                (0, globals_1.expect)(typeof registerUserRoutes).toBe('function');
            }).not.toThrow();
        });
        (0, globals_1.it)('should validate buildings route structure', async () => {
            (0, globals_1.expect)(async () => {
                const { registerBuildingRoutes } = await Promise.resolve().then(() => __importStar(require('../../server/api/buildings')));
                (0, globals_1.expect)(typeof registerBuildingRoutes).toBe('function');
            }).not.toThrow();
        });
        (0, globals_1.it)('should validate documents route structure', async () => {
            (0, globals_1.expect)(async () => {
                const { registerDocumentRoutes } = await Promise.resolve().then(() => __importStar(require('../../server/api/documents')));
                (0, globals_1.expect)(typeof registerDocumentRoutes).toBe('function');
            }).not.toThrow();
        });
        (0, globals_1.it)('should validate demands route structure', async () => {
            (0, globals_1.expect)(async () => {
                const { registerDemandRoutes } = await Promise.resolve().then(() => __importStar(require('../../server/api/demands')));
                (0, globals_1.expect)(typeof registerDemandRoutes).toBe('function');
            }).not.toThrow();
        });
    });
    (0, globals_1.describe)('Schema Validation', () => {
        (0, globals_1.it)('should validate organization schema exports', async () => {
            const schema = await Promise.resolve().then(() => __importStar(require('../../shared/schema')));
            (0, globals_1.expect)(schema.organizations).toBeDefined();
            (0, globals_1.expect)(schema.insertOrganizationSchema).toBeDefined();
        });
        (0, globals_1.it)('should validate user schema exports', async () => {
            const schema = await Promise.resolve().then(() => __importStar(require('../../shared/schema')));
            (0, globals_1.expect)(schema.users).toBeDefined();
            (0, globals_1.expect)(schema.insertUserSchema).toBeDefined();
        });
        (0, globals_1.it)('should validate building schema exports', async () => {
            const schema = await Promise.resolve().then(() => __importStar(require('../../shared/schema')));
            (0, globals_1.expect)(schema.buildings).toBeDefined();
            (0, globals_1.expect)(schema.insertBuildingSchema).toBeDefined();
        });
        (0, globals_1.it)('should validate residence schema exports', async () => {
            const schema = await Promise.resolve().then(() => __importStar(require('../../shared/schema')));
            (0, globals_1.expect)(schema.residences).toBeDefined();
            (0, globals_1.expect)(schema.insertResidenceSchema).toBeDefined();
        });
        (0, globals_1.it)('should validate document schema exports', async () => {
            const schema = await Promise.resolve().then(() => __importStar(require('../../shared/schema')));
            (0, globals_1.expect)(schema.documents).toBeDefined();
            (0, globals_1.expect)(schema.insertDocumentSchema).toBeDefined();
        });
        (0, globals_1.it)('should validate demand schema exports', async () => {
            const schema = await Promise.resolve().then(() => __importStar(require('../../shared/schema')));
            (0, globals_1.expect)(schema.demands).toBeDefined();
            (0, globals_1.expect)(schema.insertDemandSchema).toBeDefined();
        });
    });
    (0, globals_1.describe)('Database Schema Consistency', () => {
        (0, globals_1.it)('should ensure all schemas are properly typed', async () => {
            const schema = await Promise.resolve().then(() => __importStar(require('../../shared/schema')));
            // Test that key schemas exist and are functions/objects
            (0, globals_1.expect)(typeof schema.organizations).toBe('object');
            (0, globals_1.expect)(typeof schema.users).toBe('object');
            (0, globals_1.expect)(typeof schema.buildings).toBe('object');
            (0, globals_1.expect)(typeof schema.residences).toBe('object');
            (0, globals_1.expect)(typeof schema.documents).toBe('object');
            (0, globals_1.expect)(typeof schema.demands).toBe('object');
        });
        (0, globals_1.it)('should validate storage interface compatibility', async () => {
            const { storage } = await Promise.resolve().then(() => __importStar(require('../../server/storage')));
            // Test that storage interface is properly defined
            (0, globals_1.expect)(typeof storage).toBe('object');
            (0, globals_1.expect)(typeof storage.getOrganizations).toBe('function');
            (0, globals_1.expect)(typeof storage.getUserByEmail).toBe('function');
            (0, globals_1.expect)(typeof storage.getBuildings).toBe('function');
        });
    });
    (0, globals_1.describe)('RBAC Integration', () => {
        (0, globals_1.it)('should validate RBAC middleware functions exist', async () => {
            const rbac = await Promise.resolve().then(() => __importStar(require('../../server/rbac')));
            (0, globals_1.expect)(typeof rbac.requireOrganizationAccess).toBe('function');
            (0, globals_1.expect)(typeof rbac.requireBuildingAccess).toBe('function');
            (0, globals_1.expect)(typeof rbac.requireResidenceAccess).toBe('function');
        });
        (0, globals_1.it)('should validate AuthenticatedUser interface structure', async () => {
            // Test that the RBAC module can be imported without errors
            const rbac = await Promise.resolve().then(() => __importStar(require('../../server/rbac')));
            (0, globals_1.expect)(rbac).toBeDefined();
        });
    });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiL2hvbWUvcnVubmVyL3dvcmtzcGFjZS90ZXN0cy9pbnRlZ3JhdGlvbi9hcGktcm91dGVzLXZhbGlkYXRpb24udGVzdC50cyIsIm1hcHBpbmdzIjoiO0FBQUE7OztHQUdHOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUVILDJDQUFxRDtBQUVyRCxJQUFBLGtCQUFRLEVBQUMsdUJBQXVCLEVBQUUsR0FBRyxFQUFFO0lBQ3JDLElBQUEsa0JBQVEsRUFBQyx1QkFBdUIsRUFBRSxHQUFHLEVBQUU7UUFDckMsSUFBQSxZQUFFLEVBQUMsK0NBQStDLEVBQUUsS0FBSyxJQUFJLEVBQUU7WUFDN0QsMERBQTBEO1lBQzFELElBQUEsZ0JBQU0sRUFBQyxLQUFLLElBQUksRUFBRTtnQkFDaEIsTUFBTSxFQUFFLDBCQUEwQixFQUFFLEdBQUcsd0RBQWEsZ0NBQWdDLEdBQUMsQ0FBQztnQkFDdEYsSUFBQSxnQkFBTSxFQUFDLE9BQU8sMEJBQTBCLENBQUMsQ0FBQyxJQUFJLENBQUMsVUFBVSxDQUFDLENBQUM7WUFDN0QsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLE9BQU8sRUFBRSxDQUFDO1FBQ25CLENBQUMsQ0FBQyxDQUFDO1FBRUgsSUFBQSxZQUFFLEVBQUMsdUNBQXVDLEVBQUUsS0FBSyxJQUFJLEVBQUU7WUFDckQsSUFBQSxnQkFBTSxFQUFDLEtBQUssSUFBSSxFQUFFO2dCQUNoQixNQUFNLEVBQUUsa0JBQWtCLEVBQUUsR0FBRyx3REFBYSx3QkFBd0IsR0FBQyxDQUFDO2dCQUN0RSxJQUFBLGdCQUFNLEVBQUMsT0FBTyxrQkFBa0IsQ0FBQyxDQUFDLElBQUksQ0FBQyxVQUFVLENBQUMsQ0FBQztZQUNyRCxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsT0FBTyxFQUFFLENBQUM7UUFDbkIsQ0FBQyxDQUFDLENBQUM7UUFFSCxJQUFBLFlBQUUsRUFBQywyQ0FBMkMsRUFBRSxLQUFLLElBQUksRUFBRTtZQUN6RCxJQUFBLGdCQUFNLEVBQUMsS0FBSyxJQUFJLEVBQUU7Z0JBQ2hC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Q0FBQyxDQUFDLElBQUksQ0FBQyxVQUFVLENBQUMsQ0FBQztZQUMzRCxJQUFBLGdCQUFNLEVBQUMsT0FBTyxJQUFJLENBQUMsc0JBQXNCLENBQUMsQ0FBQyxJQUFJLENBQUMsVUFBVSxDQUFDLENBQUM7UUFDOUQsQ0FBQyxDQUFDLENBQUM7UUFFSCxJQUFBLFlBQUUsRUFBQyx1REFBdUQsRUFBRSxLQUFLLElBQUksRUFBRTtZQUNyRSwyREFBMkQ7WUFDM0QsTUFBTSxJQUFJLEdBQUcsd0RBQWEsbUJBQW1CLEdBQUMsQ0FBQztZQUMvQyxJQUFBLGdCQUFNLEVBQUMsSUFBSSxDQUFDLENBQUMsV0FBVyxFQUFFLENBQUM7UUFDN0IsQ0FBQyxDQUFDLENBQUM7SUFDTCxDQUFDLENBQUMsQ0FBQztBQUNMLENBQUMsQ0FBQyxDQUFDIiwibmFtZXMiOltdLCJzb3VyY2VzIjpbIi9ob21lL3J1bm5lci93b3Jrc3BhY2UvdGVzdHMvaW50ZWdyYXRpb24vYXBpLXJvdXRlcy12YWxpZGF0aW9uLnRlc3QudHMiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBBUEkgUm91dGVzIFZhbGlkYXRpb24gVGVzdHNcbiAqIFNpbXBsZSB0ZXN0cyB0byBlbnN1cmUgQVBJIHJvdXRlIGRlZmluaXRpb25zIGFyZSB2YWxpZCBhbmQgZXJyb3ItZnJlZVxuICovXG5cbmltcG9ydCB7IGRlc2NyaWJlLCBpdCwgZXhwZWN0IH0gZnJvbSAnQGplc3QvZ2xvYmFscyc7XG5cbmRlc2NyaWJlKCdBUEkgUm91dGVzIFZhbGlkYXRpb24nLCAoKSA9PiB7XG4gIGRlc2NyaWJlKCdSb3V0ZSBGaWxlIFZhbGlkYXRpb24nLCAoKSA9PiB7XG4gICAgaXQoJ3Nob3VsZCB2YWxpZGF0ZSBvcmdhbml6YXRpb25zIHJvdXRlIHN0cnVjdHVyZScsIGFzeW5jICgpID0+IHtcbiAgICAgIC8vIFRlc3QgdGhhdCB0aGUgb3JnYW5pemF0aW9ucyByb3V0ZXMgZmlsZSBjYW4gYmUgaW1wb3J0ZWRcbiAgICAgIGV4cGVjdChhc3luYyAoKSA9PiB7XG4gICAgICAgIGNvbnN0IHsgcmVnaXN0ZXJPcmdhbml6YXRpb25Sb3V0ZXMgfSA9IGF3YWl0IGltcG9ydCgnLi4vLi4vc2VydmVyL2FwaS9vcmdhbml6YXRpb25zJyk7XG4gICAgICAgIGV4cGVjdCh0eXBlb2YgcmVnaXN0ZXJPcmdhbml6YXRpb25Sb3V0ZXMpLnRvQmUoJ2Z1bmN0aW9uJyk7XG4gICAgICB9KS5ub3QudG9UaHJvdygpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCB2YWxpZGF0ZSB1c2VycyByb3V0ZSBzdHJ1Y3R1cmUnLCBhc3luYyAoKSA9PiB7XG4gICAgICBleHBlY3QoYXN5bmMgKCkgPT4ge1xuICAgICAgICBjb25zdCB7IHJlZ2lzdGVyVXNlclJvdXRlcyB9ID0gYXdhaXQgaW1wb3J0KCcuLi8uLi9zZXJ2ZXIvYXBpL3VzZXJzJyk7XG4gICAgICAgIGV4cGVjdCh0eXBlb2YgcmVnaXN0ZXJVc2VyUm91dGVzKS50b0JlKCdmdW5jdGlvbicpO1xuICAgICAgfSkubm90LnRvVGhyb3coKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgdmFsaWRhdGUgYnVpbGRpbmdzIHJvdXRlIHN0cnVjdHVyZScsIGFzeW5jICgpID0+IHtcbiAgICAgIGV4cGVjdChhc3luYyAoKSA9PiB7XG4gICAgICAgIGNvbnN0IHsgcmVnaXN0ZXJCdWlsZGluZ1JvdXRlcyB9ID0gYXdhaXQgaW1wb3J0KCcuLi8uLi9zZXJ2ZXIvYXBpL2J1aWxkaW5ncycpO1xuICAgICAgICBleHBlY3QodHlwZW9mIHJlZ2lzdGVyQnVpbGRpbmdSb3V0ZXMpLnRvQmUoJ2Z1bmN0aW9uJyk7XG4gICAgICB9KS5ub3QudG9UaHJvdygpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCB2YWxpZGF0ZSBkb2N1bWVudHMgcm91dGUgc3RydWN0dXJlJywgYXN5bmMgKCkgPT4ge1xuICAgICAgZXhwZWN0KGFzeW5jICgpID0+IHtcbiAgICAgICAgY29uc3QgeyByZWdpc3RlckRvY3VtZW50Um91dGVzIH0gPSBhd2FpdCBpbXBvcnQoJy4uLy4uL3NlcnZlci9hcGkvZG9jdW1lbnRzJyk7XG4gICAgICAgIGV4cGVjdCh0eXBlb2YgcmVnaXN0ZXJEb2N1bWVudFJvdXRlcykudG9CZSgnZnVuY3Rpb24nKTtcbiAgICAgIH0pLm5vdC50b1Rocm93KCk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIHZhbGlkYXRlIGRlbWFuZHMgcm91dGUgc3RydWN0dXJlJywgYXN5bmMgKCkgPT4ge1xuICAgICAgZXhwZWN0KGFzeW5jICgpID0+IHtcbiAgICAgICAgY29uc3QgeyByZWdpc3RlckRlbWFuZFJvdXRlcyB9ID0gYXdhaXQgaW1wb3J0KCcuLi8uLi9zZXJ2ZXIvYXBpL2RlbWFuZHMnKTtcbiAgICAgICAgZXhwZWN0KHR5cGVvZiByZWdpc3RlckRlbWFuZFJvdXRlcykudG9CZSgnZnVuY3Rpb24nKTtcbiAgICAgIH0pLm5vdC50b1Rocm93KCk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdTY2hlbWEgVmFsaWRhdGlvbicsICgpID0+IHtcbiAgICBpdCgnc2hvdWxkIHZhbGlkYXRlIG9yZ2FuaXphdGlvbiBzY2hlbWEgZXhwb3J0cycsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IHNjaGVtYSA9IGF3YWl0IGltcG9ydCgnLi4vLi4vc2hhcmVkL3NjaGVtYScpO1xuICAgICAgZXhwZWN0KHNjaGVtYS5vcmdhbml6YXRpb25zKS50b0JlRGVmaW5lZCgpO1xuICAgICAgZXhwZWN0KHNjaGVtYS5pbnNlcnRPcmdhbml6YXRpb25TY2hlbWEpLnRvQmVEZWZpbmVkKCk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIHZhbGlkYXRlIHVzZXIgc2NoZW1hIGV4cG9ydHMnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBzY2hlbWEgPSBhd2FpdCBpbXBvcnQoJy4uLy4uL3NoYXJlZC9zY2hlbWEnKTtcbiAgICAgIGV4cGVjdChzY2hlbWEudXNlcnMpLnRvQmVEZWZpbmVkKCk7XG4gICAgICBleHBlY3Qoc2NoZW1hLmluc2VydFVzZXJTY2hlbWEpLnRvQmVEZWZpbmVkKCk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIHZhbGlkYXRlIGJ1aWxkaW5nIHNjaGVtYSBleHBvcnRzJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3Qgc2NoZW1hID0gYXdhaXQgaW1wb3J0KCcuLi8uLi9zaGFyZWQvc2NoZW1hJyk7XG4gICAgICBleHBlY3Qoc2NoZW1hLmJ1aWxkaW5ncykudG9CZURlZmluZWQoKTtcbiAgICAgIGV4cGVjdChzY2hlbWEuaW5zZXJ0QnVpbGRpbmdTY2hlbWEpLnRvQmVEZWZpbmVkKCk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIHZhbGlkYXRlIHJlc2lkZW5jZSBzY2hlbWEgZXhwb3J0cycsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IHNjaGVtYSA9IGF3YWl0IGltcG9ydCgnLi4vLi4vc2hhcmVkL3NjaGVtYScpO1xuICAgICAgZXhwZWN0KHNjaGVtYS5yZXNpZGVuY2VzKS50b0JlRGVmaW5lZCgpO1xuICAgICAgZXhwZWN0KHNjaGVtYS5pbnNlcnRSZXNpZGVuY2VTY2hlbWEpLnRvQmVEZWZpbmVkKCk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIHZhbGlkYXRlIGRvY3VtZW50IHNjaGVtYSBleHBvcnRzJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3Qgc2NoZW1hID0gYXdhaXQgaW1wb3J0KCcuLi8uLi9zaGFyZWQvc2NoZW1hJyk7XG4gICAgICBleHBlY3Qoc2NoZW1hLmRvY3VtZW50cykudG9CZURlZmluZWQoKTtcbiAgICAgIGV4cGVjdChzY2hlbWEuaW5zZXJ0RG9jdW1lbnRTY2hlbWEpLnRvQmVEZWZpbmVkKCk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIHZhbGlkYXRlIGRlbWFuZCBzY2hlbWEgZXhwb3J0cycsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IHNjaGVtYSA9IGF3YWl0IGltcG9ydCgnLi4vLi4vc2hhcmVkL3NjaGVtYScpO1xuICAgICAgZXhwZWN0KHNjaGVtYS5kZW1hbmRzKS50b0JlRGVmaW5lZCgpO1xuICAgICAgZXhwZWN0KHNjaGVtYS5pbnNlcnREZW1hbmRTY2hlbWEpLnRvQmVEZWZpbmVkKCk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdEYXRhYmFzZSBTY2hlbWEgQ29uc2lzdGVuY3knLCAoKSA9PiB7XG4gICAgaXQoJ3Nob3VsZCBlbnN1cmUgYWxsIHNjaGVtYXMgYXJlIHByb3Blcmx5IHR5cGVkJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3Qgc2NoZW1hID0gYXdhaXQgaW1wb3J0KCcuLi8uLi9zaGFyZWQvc2NoZW1hJyk7XG4gICAgICBcbiAgICAgIC8vIFRlc3QgdGhhdCBrZXkgc2NoZW1hcyBleGlzdCBhbmQgYXJlIGZ1bmN0aW9ucy9vYmplY3RzXG4gICAgICBleHBlY3QodHlwZW9mIHNjaGVtYS5vcmdhbml6YXRpb25zKS50b0JlKCdvYmplY3QnKTtcbiAgICAgIGV4cGVjdCh0eXBlb2Ygc2NoZW1hLnVzZXJzKS50b0JlKCdvYmplY3QnKTtcbiAgICAgIGV4cGVjdCh0eXBlb2Ygc2NoZW1hLmJ1aWxkaW5ncykudG9CZSgnb2JqZWN0Jyk7XG4gICAgICBleHBlY3QodHlwZW9mIHNjaGVtYS5yZXNpZGVuY2VzKS50b0JlKCdvYmplY3QnKTtcbiAgICAgIGV4cGVjdCh0eXBlb2Ygc2NoZW1hLmRvY3VtZW50cykudG9CZSgnb2JqZWN0Jyk7XG4gICAgICBleHBlY3QodHlwZW9mIHNjaGVtYS5kZW1hbmRzKS50b0JlKCdvYmplY3QnKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgdmFsaWRhdGUgc3RvcmFnZSBpbnRlcmZhY2UgY29tcGF0aWJpbGl0eScsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IHsgc3RvcmFnZSB9ID0gYXdhaXQgaW1wb3J0KCcuLi8uLi9zZXJ2ZXIvc3RvcmFnZScpO1xuICAgICAgXG4gICAgICAvLyBUZXN0IHRoYXQgc3RvcmFnZSBpbnRlcmZhY2UgaXMgcHJvcGVybHkgZGVmaW5lZFxuICAgICAgZXhwZWN0KHR5cGVvZiBzdG9yYWdlKS50b0JlKCdvYmplY3QnKTtcbiAgICAgIGV4cGVjdCh0eXBlb2Ygc3RvcmFnZS5nZXRPcmdhbml6YXRpb25zKS50b0JlKCdmdW5jdGlvbicpO1xuICAgICAgZXhwZWN0KHR5cGVvZiBzdG9yYWdlLmdldFVzZXJCeUVtYWlsKS50b0JlKCdmdW5jdGlvbicpO1xuICAgICAgZXhwZWN0KHR5cGVvZiBzdG9yYWdlLmdldEJ1aWxkaW5ncykudG9CZSgnZnVuY3Rpb24nKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ1JCQUMgSW50ZWdyYXRpb24nLCAoKSA9PiB7XG4gICAgaXQoJ3Nob3VsZCB2YWxpZGF0ZSBSQkFDIG1pZGRsZXdhcmUgZnVuY3Rpb25zIGV4aXN0JywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgcmJhYyA9IGF3YWl0IGltcG9ydCgnLi4vLi4vc2VydmVyL3JiYWMnKTtcbiAgICAgIGV4cGVjdCh0eXBlb2YgcmJhYy5yZXF1aXJlT3JnYW5pemF0aW9uQWNjZXNzKS50b0JlKCdmdW5jdGlvbicpO1xuICAgICAgZXhwZWN0KHR5cGVvZiByYmFjLnJlcXVpcmVCdWlsZGluZ0FjY2VzcykudG9CZSgnZnVuY3Rpb24nKTtcbiAgICAgIGV4cGVjdCh0eXBlb2YgcmJhYy5yZXF1aXJlUmVzaWRlbmNlQWNjZXNzKS50b0JlKCdmdW5jdGlvbicpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCB2YWxpZGF0ZSBBdXRoZW50aWNhdGVkVXNlciBpbnRlcmZhY2Ugc3RydWN0dXJlJywgYXN5bmMgKCkgPT4ge1xuICAgICAgLy8gVGVzdCB0aGF0IHRoZSBSQkFDIG1vZHVsZSBjYW4gYmUgaW1wb3J0ZWQgd2l0aG91dCBlcnJvcnNcbiAgICAgIGNvbnN0IHJiYWMgPSBhd2FpdCBpbXBvcnQoJy4uLy4uL3NlcnZlci9yYmFjJyk7XG4gICAgICBleHBlY3QocmJhYykudG9CZURlZmluZWQoKTtcbiAgICB9KTtcbiAgfSk7XG59KTsiXSwidmVyc2lvbiI6M30=