db81c5c3591444cd49acdaa1dc2a64ed
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.storage = exports.MemStorage = void 0;
const crypto_1 = require("crypto");
class MemStorage {
    users;
    organizations;
    buildings;
    residences;
    pillars;
    workspaceStatuses;
    qualityMetrics;
    frameworkConfigs;
    improvementSuggestions;
    features;
    actionableItems;
    invitations;
    invitationAuditLogs;
    bugs;
    featureRequests;
    featureRequestUpvotes;
    constructor() {
        this.users = new Map();
        this.organizations = new Map();
        this.buildings = new Map();
        this.residences = new Map();
        this.pillars = new Map();
        this.workspaceStatuses = new Map();
        this.qualityMetrics = new Map();
        this.frameworkConfigs = new Map();
        this.improvementSuggestions = new Map();
        this.features = new Map();
        this.actionableItems = new Map();
        this.invitations = new Map();
        this.invitationAuditLogs = new Map();
        this.bugs = new Map();
        this.featureRequests = new Map();
        this.featureRequestUpvotes = new Map();
        // Initialize test user asynchronously
        this.initializeTestUser().catch(console.error);
    }
    async initializeTestUser() {
        // Use known admin123 password for demo mode
        const bcrypt = require('bcryptjs');
        const securePassword = await bcrypt.hash('admin123', 12);
        const user = {
            id: '550e8400-e29b-41d4-a716-446655440000',
            username: 'kevin.hervieux@koveo-gestion.com',
            email: 'kevin.hervieux@koveo-gestion.com',
            password: securePassword,
            firstName: 'Kevin',
            lastName: 'Hervieux',
            phone: '',
            profileImage: '',
            language: 'fr',
            role: 'admin',
            isActive: true,
            lastLoginAt: null,
            createdAt: new Date(),
            updatedAt: new Date(),
        };
        this.users.set(user.id, user);
    }
    // User operations
    async getUsers() {
        return Array.from(this.users.values());
    }
    async getUsersWithAssignments() {
        // For MemStorage, just return users with empty assignments arrays
        const users = Array.from(this.users.values());
        return users.map(user => ({
            ...user,
            organizations: [],
            buildings: [],
            residences: []
        }));
    }
    async getUsersByOrganizations(_userId) {
        return [];
    }
    async getUser(id) {
        return this.users.get(id);
    }
    async getUserOrganizations(_userId) {
        return [];
    }
    async getUserResidences(_userId) {
        return [];
    }
    async getUserByEmail(email) {
        return Array.from(this.users.values()).find((user) => user.email === email);
    }
    async createUser(insertUser) {
        const id = (0, crypto_1.randomUUID)();
        const user = {
            ...insertUser,
            id,
            phone: insertUser.phone || null,
            profileImage: insertUser.profileImage || '',
            role: insertUser.role || 'tenant',
            language: insertUser.language || 'fr',
            isActive: true,
            lastLoginAt: null,
            createdAt: new Date(),
            updatedAt: new Date(),
        };
        this.users.set(id, user);
        return user;
    }
    async updateUser(id, updates) {
        const existingUser = this.users.get(id);
        if (!existingUser) {
            return undefined;
        }
        const updatedUser = {
            ...existingUser,
            ...updates,
            updatedAt: new Date(),
        };
        this.users.set(id, updatedUser);
        return updatedUser;
    }
    // Minimal implementations for other required methods
    async createPasswordResetToken(_token) {
        return {
            ..._token,
            id: (0, crypto_1.randomUUID)(),
            createdAt: new Date(),
            usedAt: null,
            isUsed: false,
            ipAddress: _token.ipAddress || '',
            userAgent: _token.userAgent || '',
        };
    }
    async getPasswordResetToken(_token) {
        return undefined;
    }
    async markPasswordResetTokenAsUsed(_tokenId) {
        return undefined;
    }
    async cleanupExpiredPasswordResetTokens() {
        return 0;
    }
    async getOrganizations() {
        return Array.from(this.organizations.values());
    }
    async getOrganization(id) {
        return this.organizations.get(id);
    }
    async getOrganizationByName(name) {
        return Array.from(this.organizations.values()).find((org) => org.name === name);
    }
    async createOrganization(org) {
        const id = (0, crypto_1.randomUUID)();
        const organization = {
            ...org,
            id,
            phone: org.phone || '',
            email: org.email || '',
            website: org.website || '',
            registrationNumber: org.registrationNumber || '',
            isActive: true,
            createdAt: new Date(),
            updatedAt: new Date(),
        };
        this.organizations.set(id, organization);
        return organization;
    }
    async updateOrganization(id, updates) {
        const existing = this.organizations.get(id);
        if (!existing)
            return undefined;
        const updated = { ...existing, ...updates, updatedAt: new Date() };
        this.organizations.set(id, updated);
        return updated;
    }
    async getBuildingsByOrganization(orgId) {
        return Array.from(this.buildings.values()).filter((b) => b.organizationId === orgId);
    }
    async getBuildings() {
        return Array.from(this.buildings.values());
    }
    async getBuilding(id) {
        return this.buildings.get(id);
    }
    async createBuilding(building) {
        const id = (0, crypto_1.randomUUID)();
        const newBuilding = {
            ...building,
            id,
            isActive: true,
            createdAt: new Date(),
            updatedAt: new Date(),
            totalUnits: building.totalUnits || 0,
            totalFloors: building.totalFloors || 0,
            yearBuilt: building.yearBuilt || 0,
            buildingType: building.buildingType,
            bankAccountNumber: building.bankAccountNumber || '',
            bankAccountMinimums: building.bankAccountMinimums ? JSON.stringify(building.bankAccountMinimums) : '',
            bankAccountUpdatedAt: new Date(),
            inflationSettings: '',
            parkingSpaces: building.parkingSpaces || 0,
            storageSpaces: building.storageSpaces || 0,
            amenities: building.amenities || null,
            managementCompany: building.managementCompany || null,
            bankAccountNotes: null,
            bankAccountStartDate: null,
            bankAccountStartAmount: null,
        };
        this.buildings.set(id, newBuilding);
        return newBuilding;
    }
    async updateBuilding(id, updates) {
        const existing = this.buildings.get(id);
        if (!existing)
            return undefined;
        const updated = { ...existing, ...updates, updatedAt: new Date() };
        this.buildings.set(id, updated);
        return updated;
    }
    async deleteBuilding(id) {
        const building = this.buildings.get(id);
        if (!building) {
            return false;
        }
        // Soft delete by setting isActive to false
        const updatedBuilding = {
            ...building,
            isActive: false,
            updatedAt: new Date(),
        };
        this.buildings.set(id, updatedBuilding);
        return true;
    }
    async getResidences() {
        return Array.from(this.residences.values());
    }
    async getResidence(id) {
        return this.residences.get(id);
    }
    async getResidencesByBuilding(buildingId) {
        return Array.from(this.residences.values()).filter((r) => r.buildingId === buildingId);
    }
    async createResidence(residence) {
        const id = (0, crypto_1.randomUUID)();
        const newResidence = {
            ...residence,
            id,
            isActive: true,
            createdAt: new Date(),
            updatedAt: new Date(),
            floor: residence.floor || 0,
            squareFootage: residence.squareFootage?.toString() || '0',
            bedrooms: residence.bedrooms || 0,
            bathrooms: residence.bathrooms?.toString() || '0',
            balcony: residence.balcony || false,
            parkingSpaceNumbers: residence.parkingSpaceNumbers || [],
            storageSpaceNumbers: residence.storageSpaceNumbers || [],
            ownershipPercentage: residence.ownershipPercentage?.toString() || '0',
            monthlyFees: residence.monthlyFees?.toString() || '0',
        };
        this.residences.set(id, newResidence);
        return newResidence;
    }
    async updateResidence(id, updates) {
        const existing = this.residences.get(id);
        if (!existing)
            return undefined;
        const updated = { ...existing, ...updates, updatedAt: new Date() };
        this.residences.set(id, updated);
        return updated;
    }
    async deleteResidence(id) {
        return this.residences.delete(id);
    }
    async getContacts() {
        return [];
    }
    async getContactsByEntity() {
        return [];
    }
    async getContactsForResidence() {
        return [];
    }
    async createContact(contact) {
        const id = (0, crypto_1.randomUUID)();
        return {
            ...contact,
            id,
            name: contact.name,
            email: contact.email || '',
            phone: contact.phone || '',
            entity: contact.entity,
            entityId: contact.entityId,
            contactCategory: contact.contactCategory,
            isActive: true,
            createdAt: new Date(),
            updatedAt: new Date(),
        };
    }
    async updateContact() {
        return undefined;
    }
    async deleteContact() {
        return false;
    }
    async getDocuments(_filters) {
        return [];
    }
    async getDocument(_id) {
        return undefined;
    }
    async createDocument(doc) {
        const id = (0, crypto_1.randomUUID)();
        return {
            ...doc,
            id,
            description: doc.description || '',
            buildingId: doc.buildingId || '',
            residenceId: doc.residenceId || '',
            createdAt: new Date(),
            updatedAt: new Date(),
        };
    }
    async updateDocument(_id, _updates) {
        return undefined;
    }
    async deleteDocument(_id) {
        return false;
    }
    async getPermissions() {
        return [];
    }
    async getRolePermissions() {
        return [];
    }
    async getUserPermissions() {
        return [];
    }
    async getPillars() {
        return Array.from(this.pillars.values()).sort((a, b) => parseInt(a.order) - parseInt(b.order));
    }
    async getPillar(id) {
        return this.pillars.get(id);
    }
    async createPillar(pillar) {
        const id = (0, crypto_1.randomUUID)();
        const newPillar = {
            ...pillar,
            id,
            name: pillar.name,
            description: pillar.description || '',
            status: pillar.status || 'pending',
            order: pillar.order.toString(),
            configuration: pillar.configuration || null,
            createdAt: new Date(),
            updatedAt: new Date(),
        };
        this.pillars.set(id, newPillar);
        return newPillar;
    }
    async updatePillar(id, updates) {
        const existing = this.pillars.get(id);
        if (!existing)
            return undefined;
        const updated = { ...existing, ...updates, updatedAt: new Date() };
        this.pillars.set(id, updated);
        return updated;
    }
    async getWorkspaceStatuses() {
        return Array.from(this.workspaceStatuses.values());
    }
    async getWorkspaceStatus(component) {
        return this.workspaceStatuses.get(component);
    }
    async createWorkspaceStatus(status) {
        const id = (0, crypto_1.randomUUID)();
        const newStatus = {
            ...status,
            id,
            status: status.status,
            component: status.component,
            lastUpdated: new Date(),
        };
        this.workspaceStatuses.set(status.component, newStatus);
        return newStatus;
    }
    async updateWorkspaceStatus(component, updates) {
        const existing = this.workspaceStatuses.get(component);
        if (!existing)
            return undefined;
        const updated = { ...existing, ...updates, updatedAt: new Date() };
        this.workspaceStatuses.set(component, updated);
        return updated;
    }
    async getQualityMetrics() {
        return Array.from(this.qualityMetrics.values());
    }
    async createQualityMetric(metric) {
        const id = (0, crypto_1.randomUUID)();
        const newMetric = {
            ...metric,
            id,
            timestamp: new Date(),
        };
        this.qualityMetrics.set(id, newMetric);
        return newMetric;
    }
    async getFrameworkConfigurations() {
        return Array.from(this.frameworkConfigs.values());
    }
    async createFrameworkConfiguration(config) {
        const id = (0, crypto_1.randomUUID)();
        const newConfig = {
            ...config,
            id,
            description: config.description || '',
            createdAt: new Date(),
            updatedAt: new Date(),
        };
        this.frameworkConfigs.set(config._key, newConfig);
        return newConfig;
    }
    async updateFrameworkConfiguration(key, updates) {
        const existing = this.frameworkConfigs.get(key);
        if (!existing)
            return undefined;
        const updated = { ...existing, ...updates, updatedAt: new Date() };
        this.frameworkConfigs.set(key, updated);
        return updated;
    }
    async getImprovementSuggestions() {
        return Array.from(this.improvementSuggestions.values());
    }
    async createImprovementSuggestion(suggestion) {
        const id = (0, crypto_1.randomUUID)();
        const newSuggestion = {
            ...suggestion,
            id,
            filePath: suggestion.filePath || null,
            status: suggestion.status,
            category: suggestion.category,
            priority: suggestion.priority || 'Medium',
            assignedTo: suggestion.assignedTo || null,
            createdAt: new Date(),
            updatedAt: new Date(),
            acknowledgedAt: null,
            completedAt: null,
        };
        this.improvementSuggestions.set(id, newSuggestion);
        return newSuggestion;
    }
    async updateImprovementSuggestion(id, updates) {
        const existing = this.improvementSuggestions.get(id);
        if (!existing)
            return undefined;
        const updated = { ...existing, ...updates, updatedAt: new Date() };
        this.improvementSuggestions.set(id, updated);
        return updated;
    }
    async getTopImprovementSuggestions(limit) {
        const suggestions = Array.from(this.improvementSuggestions.values());
        // Sort by priority (Critical > High > Medium > Low) then by creation date
        const priorityOrder = { 'Critical': 0, 'High': 1, 'Medium': 2, 'Low': 3 };
        return suggestions
            .sort((a, b) => {
            const priorityA = priorityOrder[a.priority] ?? 999;
            const priorityB = priorityOrder[b.priority] ?? 999;
            const priorityDiff = priorityA - priorityB;
            if (priorityDiff !== 0)
                return priorityDiff;
            return new Date(a.createdAt).getTime() - new Date(b.createdAt).getTime();
        })
            .slice(0, limit);
    }
    async clearNewSuggestions() {
        for (const [id, suggestion] of this.improvementSuggestions.entries()) {
            if (suggestion.status === 'New') {
                this.improvementSuggestions.delete(id);
            }
        }
    }
    async updateSuggestionStatus(id, status) {
        const suggestion = this.improvementSuggestions.get(id);
        if (!suggestion)
            return undefined;
        const updatedSuggestion = {
            ...suggestion,
            status,
            updatedAt: new Date(),
        };
        this.improvementSuggestions.set(id, updatedSuggestion);
        return updatedSuggestion;
    }
    async getFeatures() {
        return Array.from(this.features.values());
    }
    async getFeature(id) {
        return this.features.get(id);
    }
    async createFeature(feature) {
        const id = (0, crypto_1.randomUUID)();
        const newFeature = {
            ...feature,
            id,
            isPublicRoadmap: feature.isPublicRoadmap ?? true,
            createdAt: new Date(),
            updatedAt: new Date(),
            requestedBy: feature.requestedBy || null,
            assignedTo: feature.assignedTo || null,
            estimatedHours: feature.estimatedHours || 0,
            businessObjective: feature.businessObjective || '',
            targetUsers: feature.targetUsers || '',
            successMetrics: feature.successMetrics || '',
            technicalComplexity: feature.technicalComplexity || '',
            dependencies: feature.dependencies?.join(',') || '',
            userFlow: feature.userFlow || '',
            actualHours: null,
            startDate: null,
            completedDate: null,
            tags: [],
            metadata: {},
            syncedAt: new Date(),
        };
        this.features.set(id, newFeature);
        return newFeature;
    }
    async updateFeature(id, updates) {
        const existing = this.features.get(id);
        if (!existing)
            return undefined;
        const updated = { ...existing, ...updates, updatedAt: new Date() };
        this.features.set(id, updated);
        return updated;
    }
    async getFeaturesByStatus(status) {
        return Array.from(this.features.values()).filter((f) => f.status === status);
    }
    async getPublicRoadmapFeatures() {
        return Array.from(this.features.values()).filter((f) => f.isPublicRoadmap);
    }
    async getActionableItems() {
        return Array.from(this.actionableItems.values());
    }
    async createActionableItem(item) {
        const id = (0, crypto_1.randomUUID)();
        const newItem = {
            ...item,
            id,
            createdAt: new Date(),
            updatedAt: new Date(),
            estimatedHours: item.estimatedHours || 0,
            dependencies: item.dependencies || [],
            completedAt: null,
            startedAt: null,
        };
        this.actionableItems.set(id, newItem);
        return newItem;
    }
    async updateActionableItem(id, updates) {
        const existing = this.actionableItems.get(id);
        if (!existing)
            return undefined;
        const updated = { ...existing, ...updates, updatedAt: new Date() };
        this.actionableItems.set(id, updated);
        return updated;
    }
    async deleteActionableItem(id) {
        return this.actionableItems.delete(id);
    }
    async getInvitations() {
        return Array.from(this.invitations.values());
    }
    async createInvitation(invitation) {
        const id = (0, crypto_1.randomUUID)();
        const newInvitation = {
            ...invitation,
            id,
            token: (0, crypto_1.randomUUID)(),
            createdAt: new Date(),
            updatedAt: new Date(),
            status: 'pending',
            ipAddress: '',
            userAgent: '',
            isUsed: false,
            usedAt: null,
            createdByUserId: invitation.invitedByUserId,
            acceptedByUserId: null,
            acceptedAt: null,
            revokedAt: null,
            revokedByUserId: null,
            lastAccessedAt: null,
        };
        this.invitations.set(id, newInvitation);
        return newInvitation;
    }
    async getInvitationByToken(token) {
        return Array.from(this.invitations.values()).find((inv) => inv.token === token);
    }
    async updateInvitation(id, updates) {
        const existing = this.invitations.get(id);
        if (!existing)
            return undefined;
        const updated = { ...existing, ...updates, updatedAt: new Date() };
        this.invitations.set(id, updated);
        return updated;
    }
    async getInvitationAuditLogs() {
        return Array.from(this.invitationAuditLogs.values());
    }
    async createInvitationAuditLog(log) {
        const id = (0, crypto_1.randomUUID)();
        const newLog = {
            ...log,
            id,
            createdAt: new Date(),
            ipAddress: log.ipAddress || '',
            userAgent: log.userAgent || '',
            details: log.details || {},
            previousStatus: log.previousStatus || 'pending',
            newStatus: log.newStatus || 'pending'
        };
        this.invitationAuditLogs.set(id, newLog);
        return newLog;
    }
    async getCommentsByDemand() {
        return [];
    }
    async createDemandComment(comment) {
        const id = (0, crypto_1.randomUUID)();
        return {
            ...comment,
            id,
            createdAt: new Date(),
            updatedAt: new Date(),
        };
    }
    async getBugs() {
        return Array.from(this.bugs.values());
    }
    async getBug(id) {
        return this.bugs.get(id);
    }
    async createBug(bug) {
        const id = (0, crypto_1.randomUUID)();
        const newBug = {
            ...bug,
            id,
            status: 'new',
            createdAt: new Date(),
            updatedAt: new Date(),
            reproductionSteps: bug.reproductionSteps || '',
            assignedTo: null,
            resolvedAt: null,
            resolvedBy: null,
            notes: null,
            environment: bug.environment || '',
        };
        this.bugs.set(id, newBug);
        return newBug;
    }
    async updateBug(id, updates) {
        const existing = this.bugs.get(id);
        if (!existing)
            return undefined;
        const updated = { ...existing, ...updates, updatedAt: new Date() };
        this.bugs.set(id, updated);
        return updated;
    }
    async getFeatureRequests() {
        return Array.from(this.featureRequests.values());
    }
    async getFeatureRequest(id) {
        return this.featureRequests.get(id);
    }
    async createFeatureRequest(request) {
        const id = (0, crypto_1.randomUUID)();
        const newRequest = {
            ...request,
            id,
            status: 'submitted',
            createdAt: new Date(),
            updatedAt: new Date(),
            upvoteCount: 0,
            assignedTo: null,
            reviewedBy: null,
            reviewedAt: null,
            estimatedHours: null,
            mergedIntoId: null,
        };
        this.featureRequests.set(id, newRequest);
        return newRequest;
    }
    async updateFeatureRequest(id, updates) {
        const existing = this.featureRequests.get(id);
        if (!existing)
            return undefined;
        const updated = { ...existing, ...updates, updatedAt: new Date() };
        this.featureRequests.set(id, updated);
        return updated;
    }
    async addFeatureRequestUpvote() {
        return { success: true, message: 'Upvote added' };
    }
    async removeFeatureRequestUpvote() {
        return { success: true, message: 'Upvote removed' };
    }
}
exports.MemStorage = MemStorage;
// Import the database storage implementation
const optimized_db_storage_1 = require("./optimized-db-storage");
// Production fallback storage - try database first, fall back to memory if authentication fails
class ProductionFallbackStorage {
    dbStorage;
    memStorage;
    usingFallback = false;
    constructor() {
        this.dbStorage = new optimized_db_storage_1.OptimizedDatabaseStorage();
        this.memStorage = new MemStorage();
    }
    async safeDbOperation(operation) {
        if (this.usingFallback) {
            throw new Error('Database unavailable, using memory storage');
        }
        try {
            return await operation();
        }
        catch (error) {
            // Check if it's a database authentication error
            if (error.message?.includes('password authentication failed') ||
                error.message?.includes('neondb_owner') ||
                error.cause?.message?.includes('password authentication failed')) {
                // Database authentication failed, switching to memory storage for production stability
                this.usingFallback = true;
                // Initialize memory storage with production admin user
                await this.initializeFallbackData();
                throw new Error('Database unavailable, using memory storage');
            }
            throw error;
        }
    }
    async initializeFallbackData() {
        // Create the production admin user in memory storage
        const adminUser = {
            id: 'f35647de-5f16-46f2-b30b-09e0469356b1',
            username: 'kevin.hervieux',
            email: 'kevin.hervieux@koveo-gestion.com',
            password: '$2b$12$sAJXEcITZg5ItQou312JsucLyzByPC6lF7CLvrrLkhxKd1EyfSxda', // admin123
            firstName: 'Kevin',
            lastName: 'Hervieux',
            phone: '',
            profileImage: '',
            language: 'fr',
            role: 'admin',
            isActive: true,
            lastLoginAt: null,
            createdAt: new Date(),
            updatedAt: new Date(),
        };
        await this.memStorage.createUser(adminUser);
        // Create default organization for admin user
        const defaultOrg = {
            id: 'koveo-org-main',
            name: 'Koveo Gestion',
            type: 'property_management',
            address: '123 Quebec Street',
            city: 'Montreal',
            province: 'QC',
            postalCode: 'H1A 1A1',
            phone: '+1-514-555-0100',
            email: 'contact@koveo-gestion.com',
            website: 'https://koveo-gestion.com',
            description: 'Main Koveo property management organization',
            isActive: true,
            createdAt: new Date(),
            updatedAt: new Date(),
        };
        await this.memStorage.createOrganization(defaultOrg);
        // Associate admin user with the organization
        // For memory storage, we'll just ensure the user has access to the organization
        // This is handled by the user's role being 'admin' which gives access to all organizations
        // Production fallback initialized successfully
    }
    // User operations with fallback
    async getUserByEmail(email) {
        // Debug logging removed
        try {
            const user = await this.safeDbOperation(() => this.dbStorage.getUserByEmail(email));
            // Debug logging removed
            return user;
        }
        catch (error) {
            // Error handling maintained without debug logging
            throw error;
        }
    }
    async getUsers() {
        return await this.safeDbOperation(() => this.dbStorage.getUsers());
    }
    async getUsersWithAssignments() {
        return await this.safeDbOperation(() => this.dbStorage.getUsersWithAssignments());
    }
    async getUsersByOrganizations(userId) {
        try {
            return await this.safeDbOperation(() => this.dbStorage.getUsersByOrganizations(userId));
        }
        catch {
            return this.memStorage.getUsersByOrganizations(userId);
        }
    }
    async getUser(id) {
        return await this.safeDbOperation(() => this.dbStorage.getUser(id));
    }
    async getUserOrganizations(userId) {
        try {
            return await this.safeDbOperation(() => this.dbStorage.getUserOrganizations(userId));
        }
        catch {
            return this.memStorage.getUserOrganizations(userId);
        }
    }
    async getUserResidences(userId) {
        try {
            return await this.safeDbOperation(() => this.dbStorage.getUserResidences(userId));
        }
        catch {
            return this.memStorage.getUserResidences(userId);
        }
    }
    async createUser(user) {
        try {
            return await this.safeDbOperation(() => this.dbStorage.createUser(user));
        }
        catch {
            return this.memStorage.createUser(user);
        }
    }
    async updateUser(id, updates) {
        return await this.safeDbOperation(() => this.dbStorage.updateUser(id, updates));
    }
    // Password reset operations
    async createPasswordResetToken(token) {
        try {
            return await this.safeDbOperation(() => this.dbStorage.createPasswordResetToken(token));
        }
        catch {
            return this.memStorage.createPasswordResetToken(token);
        }
    }
    async getPasswordResetToken(token) {
        try {
            return await this.safeDbOperation(() => this.dbStorage.getPasswordResetToken(token));
        }
        catch {
            return this.memStorage.getPasswordResetToken(token);
        }
    }
    async markPasswordResetTokenAsUsed(tokenId) {
        try {
            return await this.safeDbOperation(() => this.dbStorage.markPasswordResetTokenAsUsed(tokenId));
        }
        catch {
            return this.memStorage.markPasswordResetTokenAsUsed(tokenId);
        }
    }
    async cleanupExpiredPasswordResetTokens() {
        try {
            return await this.safeDbOperation(() => this.dbStorage.cleanupExpiredPasswordResetTokens());
        }
        catch {
            return this.memStorage.cleanupExpiredPasswordResetTokens();
        }
    }
    // Delegate all other methods to the appropriate storage
    async getOrganizations() {
        try {
            return await this.safeDbOperation(() => this.dbStorage.getOrganizations());
        }
        catch {
            return this.memStorage.getOrganizations();
        }
    }
    async getOrganization(id) {
        try {
            return await this.safeDbOperation(() => this.dbStorage.getOrganization(id));
        }
        catch {
            return this.memStorage.getOrganization(id);
        }
    }
    async createOrganization(org) {
        try {
            return await this.safeDbOperation(() => this.dbStorage.createOrganization(org));
        }
        catch {
            return this.memStorage.createOrganization(org);
        }
    }
    async updateOrganization(id, updates) {
        try {
            return await this.safeDbOperation(() => this.dbStorage.updateOrganization(id, updates));
        }
        catch {
            return this.memStorage.updateOrganization(id, updates);
        }
    }
    async deleteOrganization(id) {
        try {
            return await this.safeDbOperation(() => this.dbStorage.deleteOrganization(id));
        }
        catch {
            return this.memStorage.deleteOrganization(id);
        }
    }
    // Buildings
    async getBuildings() {
        try {
            return await this.safeDbOperation(() => this.dbStorage.getBuildings());
        }
        catch {
            return this.memStorage.getBuildings();
        }
    }
    async getBuildingsByOrganization(organizationId) {
        try {
            return await this.safeDbOperation(() => this.dbStorage.getBuildingsByOrganization(organizationId));
        }
        catch {
            return this.memStorage.getBuildingsByOrganization(organizationId);
        }
    }
    async getBuilding(id) {
        try {
            return await this.safeDbOperation(() => this.dbStorage.getBuilding(id));
        }
        catch {
            return this.memStorage.getBuilding(id);
        }
    }
    async createBuilding(building) {
        try {
            return await this.safeDbOperation(() => this.dbStorage.createBuilding(building));
        }
        catch {
            return this.memStorage.createBuilding(building);
        }
    }
    async updateBuilding(id, updates) {
        try {
            return await this.safeDbOperation(() => this.dbStorage.updateBuilding(id, updates));
        }
        catch {
            return this.memStorage.updateBuilding(id, updates);
        }
    }
    async deleteBuilding(id) {
        try {
            return await this.safeDbOperation(() => this.dbStorage.deleteBuilding(id));
        }
        catch {
            return this.memStorage.deleteBuilding(id);
        }
    }
    // Residences
    async getResidences() {
        try {
            return await this.safeDbOperation(() => this.dbStorage.getResidences());
        }
        catch {
            return this.memStorage.getResidences();
        }
    }
    async getResidencesByBuilding(buildingId) {
        try {
            return await this.safeDbOperation(() => this.dbStorage.getResidencesByBuilding(buildingId));
        }
        catch {
            return this.memStorage.getResidencesByBuilding(buildingId);
        }
    }
    async getResidence(id) {
        try {
            return await this.safeDbOperation(() => this.dbStorage.getResidence(id));
        }
        catch {
            return this.memStorage.getResidence(id);
        }
    }
    async createResidence(residence) {
        try {
            return await this.safeDbOperation(() => this.dbStorage.createResidence(residence));
        }
        catch {
            return this.memStorage.createResidence(residence);
        }
    }
    async updateResidence(id, updates) {
        try {
            return await this.safeDbOperation(() => this.dbStorage.updateResidence(id, updates));
        }
        catch {
            return this.memStorage.updateResidence(id, updates);
        }
    }
    async deleteResidence(id) {
        try {
            return await this.safeDbOperation(() => this.dbStorage.deleteResidence(id));
        }
        catch {
            return this.memStorage.deleteResidence(id);
        }
    }
    // All other methods - implement fallback pattern for remaining interface methods
    async getContacts() {
        try {
            return await this.safeDbOperation(() => this.dbStorage.getContacts());
        }
        catch {
            return this.memStorage.getContacts();
        }
    }
    async getContact(id) {
        try {
            return await this.safeDbOperation(() => this.dbStorage.getContact(id));
        }
        catch {
            return this.memStorage.getContact(id);
        }
    }
    async createContact(contact) {
        try {
            return await this.safeDbOperation(() => this.dbStorage.createContact(contact));
        }
        catch {
            return this.memStorage.createContact(contact);
        }
    }
    async updateContact(id, updates) {
        try {
            return await this.safeDbOperation(() => this.dbStorage.updateContact(id, updates));
        }
        catch {
            return this.memStorage.updateContact(id, updates);
        }
    }
    async deleteContact(id) {
        try {
            return await this.safeDbOperation(() => this.dbStorage.deleteContact(id));
        }
        catch {
            return this.memStorage.deleteContact(id);
        }
    }
    // Stub implementations for remaining interface methods - add all other required methods
    async getDocuments() {
        return [];
    }
    async getDocument(id) {
        return undefined;
    }
    async createDocument(doc) {
        throw new Error('Not implemented in fallback');
    }
    async updateDocument(id, updates) {
        return undefined;
    }
    async deleteDocument(id) {
        return false;
    }
    async getDocumentsByBuilding(buildingId) {
        return [];
    }
    async createDocumentBuilding(doc) {
        // Note: External storage integration removed
        const id = (0, crypto_1.randomUUID)();
        return {
            ...doc,
            id,
            createdAt: new Date(),
            updatedAt: new Date(),
        };
    }
    async deleteDocumentBuilding(documentId, buildingId) {
        return false;
    }
    async getDocumentsByResident(residentId) {
        return [];
    }
    async createDocumentResident(doc) {
        // Note: External storage integration removed
        const id = (0, crypto_1.randomUUID)();
        return {
            ...doc,
            id,
            createdAt: new Date(),
            updatedAt: new Date(),
        };
    }
    async deleteDocumentResident(documentId, residentId) {
        return false;
    }
    async getPillars() {
        return [];
    }
    async getPillar(id) {
        return undefined;
    }
    async createPillar(pillar) {
        throw new Error('Not implemented in fallback');
    }
    async updatePillar(id, updates) {
        return undefined;
    }
    async getWorkspaceStatuses() {
        return [];
    }
    async getWorkspaceStatus(id) {
        return undefined;
    }
    async createWorkspaceStatus(status) {
        throw new Error('Not implemented in fallback');
    }
    async updateWorkspaceStatus(id, updates) {
        return undefined;
    }
    async getQualityMetrics() {
        return [];
    }
    async getQualityMetric(id) {
        return undefined;
    }
    async createQualityMetric(metric) {
        throw new Error('Not implemented in fallback');
    }
    async updateQualityMetric(id, updates) {
        return undefined;
    }
    async getFrameworkConfigurations() {
        return [];
    }
    async getFrameworkConfiguration(id) {
        return undefined;
    }
    async createFrameworkConfiguration(config) {
        throw new Error('Not implemented in fallback');
    }
    async updateFrameworkConfiguration(id, updates) {
        return undefined;
    }
    async getImprovementSuggestions() {
        return [];
    }
    async getImprovementSuggestion(id) {
        return undefined;
    }
    async createImprovementSuggestion(suggestion) {
        throw new Error('Not implemented in fallback');
    }
    async updateImprovementSuggestion(id, updates) {
        return undefined;
    }
    async getFeatures() {
        return [];
    }
    async getFeature(id) {
        return undefined;
    }
    async createFeature(feature) {
        throw new Error('Not implemented in fallback');
    }
    async updateFeature(id, updates) {
        return undefined;
    }
    async getActionableItems() {
        return [];
    }
    async getActionableItem(id) {
        return undefined;
    }
    async createActionableItem(item) {
        throw new Error('Not implemented in fallback');
    }
    async updateActionableItem(id, updates) {
        return undefined;
    }
    async getInvitations() {
        return [];
    }
    async getInvitation(id) {
        return undefined;
    }
    async getInvitationByToken(token) {
        return undefined;
    }
    async createInvitation(invitation) {
        throw new Error('Not implemented in fallback');
    }
    async updateInvitation(id, updates) {
        return undefined;
    }
    async deleteInvitation(id) {
        return false;
    }
    async getPermissions() {
        return [];
    }
    async getPermission(id) {
        return undefined;
    }
    async getRolePermissions(role) {
        return [];
    }
    async getUserPermissions(userId) {
        return [];
    }
    async hasPermission(userId, permission) {
        return true;
    } // Admin fallback
    async getBugs() {
        return [];
    }
    async getBug(id) {
        return undefined;
    }
    async createBug(bug) {
        throw new Error('Not implemented in fallback');
    }
    async updateBug(id, updates) {
        return undefined;
    }
    async getFeatureRequests() {
        return [];
    }
    async getFeatureRequest(id) {
        return undefined;
    }
    async createFeatureRequest(request) {
        throw new Error('Not implemented in fallback');
    }
    async updateFeatureRequest(id, updates) {
        return undefined;
    }
    async addFeatureRequestUpvote(featureRequestId, userId) {
        return { success: true, message: 'Fallback mode' };
    }
    async removeFeatureRequestUpvote(featureRequestId, userId) {
        return { success: true, message: 'Fallback mode' };
    }
}
// Use optimized database storage for production
exports.storage = new optimized_db_storage_1.OptimizedDatabaseStorage();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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RUFBRSxDQUFDO0lBQ3JELENBQUM7SUFDRCxLQUFLLENBQUMsMEJBQTBCLENBQzlCLGdCQUF3QixFQUN4QixNQUFjO1FBRWQsT0FBTyxFQUFFLE9BQU8sRUFBRSxJQUFJLEVBQUUsT0FBTyxFQUFFLGVBQWUsRUFBRSxDQUFDO0lBQ3JELENBQUM7Q0FLRjtBQUVELGdEQUFnRDtBQUNuQyxRQUFBLE9BQU8sR0FBRyxJQUFJLCtDQUF3QixFQUFFLENBQUMiLCJuYW1lcyI6W10sInNvdXJjZXMiOlsiL2hvbWUvcnVubmVyL3dvcmtzcGFjZS9zZXJ2ZXIvc3RvcmFnZS50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQge1xuICB0eXBlIFVzZXIsXG4gIHR5cGUgSW5zZXJ0VXNlcixcbiAgdHlwZSBPcmdhbml6YXRpb24sXG4gIHR5cGUgSW5zZXJ0T3JnYW5pemF0aW9uLFxuICB0eXBlIEJ1aWxkaW5nLFxuICB0eXBlIEluc2VydEJ1aWxkaW5nLFxuICB0eXBlIFJlc2lkZW5jZSxcbiAgdHlwZSBJbnNlcnRSZXNpZGVuY2UsXG4gIHR5cGUgQ29udGFjdCxcbiAgdHlwZSBJbnNlcnRDb250YWN0LFxuICB0eXBlIERvY3VtZW50LFxuICB0eXBlIEluc2VydERvY3VtZW50LFxuICB0eXBlIFBpbGxhcixcbiAgdHlwZSBJbnNlcnRQaWxsYXIsXG4gIHR5cGUgV29ya3NwYWNlU3RhdHVzLFxuICB0eXBlIEluc2VydFdvcmtzcGFjZVN0YXR1cyxcbiAgdHlwZSBRdWFsaXR5TWV0cmljLFxuICB0eXBlIEluc2VydFF1YWxpdHlNZXRyaWMsXG4gIHR5cGUgRnJhbWV3b3JrQ29uZmlndXJhdGlvbixcbiAgdHlwZSBJbnNlcnRGcmFtZXdvcmtDb25maWd1cmF0aW9uLFxuICB0eXBlIEltcHJvdmVtZW50U3VnZ2VzdGlvbixcbiAgdHlwZSBJbnNlcnRJbXByb3ZlbWVudFN1Z2dlc3Rpb24sXG4gIHR5cGUgRmVhdHVyZSxcbiAgdHlwZSBJbnNlcnRGZWF0dXJlLFxuICB0eXBlIEFjdGlvbmFibGVJdGVtLFxuICB0eXBlIEluc2VydEFjdGlvbmFibGVJdGVtLFxuICB0eXBlIEludml0YXRpb24sXG4gIHR5cGUgSW5zZXJ0SW52aXRhdGlvbixcbiAgdHlwZSBJbnZpdGF0aW9uQXVkaXRMb2csXG4gIHR5cGUgSW5zZXJ0SW52aXRhdGlvbkF1ZGl0TG9nLFxuICB0eXBlIFBlcm1pc3Npb24sXG4gIHR5cGUgUm9sZVBlcm1pc3Npb24sXG4gIHR5cGUgVXNlclBlcm1pc3Npb24sXG4gIHR5cGUgUGFzc3dvcmRSZXNldFRva2VuLFxuICB0eXBlIEluc2VydFBhc3N3b3JkUmVzZXRUb2tlbixcbiAgdHlwZSBCdWcsXG4gIHR5cGUgSW5zZXJ0QnVnLFxuICB0eXBlIEZlYXR1cmVSZXF1ZXN0LFxuICB0eXBlIEluc2VydEZlYXR1cmVSZXF1ZXN0LFxuICB0eXBlIEZlYXR1cmVSZXF1ZXN0VXB2b3RlLFxuICB0eXBlIEluc2VydEZlYXR1cmVSZXF1ZXN0VXB2b3RlLFxufSBmcm9tICdAc2hhcmVkL3NjaGVtYSc7XG5pbXBvcnQge1xuICB0eXBlIERlbWFuZCxcbiAgdHlwZSBJbnNlcnREZW1hbmQsXG4gIHR5cGUgRGVtYW5kQ29tbWVudCxcbiAgdHlwZSBJbnNlcnREZW1hbmRDb21tZW50LFxufSBmcm9tICdAc2hhcmVkL3NjaGVtYXMvb3BlcmF0aW9ucyc7XG5pbXBvcnQgeyByYW5kb21VVUlEIH0gZnJvbSAnY3J5cHRvJztcblxuZXhwb3J0IGludGVyZmFjZSBJU3RvcmFnZSB7XG4gIC8vIFVzZXIgb3BlcmF0aW9uc1xuICBnZXRVc2VycygpOiBQcm9taXNlPFVzZXJbXT47XG4gIGdldFVzZXJzV2l0aEFzc2lnbm1lbnRzKCk6IFByb21pc2U8QXJyYXk8VXNlciAmIHsgb3JnYW5pemF0aW9uczogQXJyYXk8eyBpZDogc3RyaW5nOyBuYW1lOiBzdHJpbmc7IHR5cGU6IHN0cmluZyB9PjsgYnVpbGRpbmdzOiBBcnJheTx7IGlkOiBzdHJpbmc7IG5hbWU6IHN0cmluZyB9PjsgcmVzaWRlbmNlczogQXJyYXk8eyBpZDogc3RyaW5nOyB1bml0TnVtYmVyOiBzdHJpbmc7IGJ1aWxkaW5nSWQ6IHN0cmluZzsgYnVpbGRpbmdOYW1lOiBzdHJpbmcgfT4gfT4+O1xuICBnZXRVc2Vyc0J5T3JnYW5pemF0aW9ucyhfdXNlcklkOiBzdHJpbmcpOiBQcm9taXNlPFVzZXJbXT47XG4gIGdldFVzZXIoX2lkOiBzdHJpbmcpOiBQcm9taXNlPFVzZXIgfCB1bmRlZmluZWQ+O1xuICBnZXRVc2VyT3JnYW5pemF0aW9ucyhfdXNlcklkOiBzdHJpbmcpOiBQcm9taXNlPEFycmF5PHsgb3JnYW5pemF0aW9uSWQ6IHN0cmluZyB9Pj47XG4gIGdldFVzZXJSZXNpZGVuY2VzKF91c2VySWQ6IHN0cmluZyk6IFByb21pc2U8QXJyYXk8eyByZXNpZGVuY2VJZDogc3RyaW5nIH0+PjtcbiAgZ2V0VXNlckJ5RW1haWwoX2VtYWlsOiBzdHJpbmcpOiBQcm9taXNlPFVzZXIgfCB1bmRlZmluZWQ+O1xuICBjcmVhdGVVc2VyKF91c2VyOiBJbnNlcnRVc2VyKTogUHJvbWlzZTxVc2VyPjtcbiAgdXBkYXRlVXNlcihfaWQ6IHN0cmluZywgX3VwZGF0ZXM6IFBhcnRpYWw8VXNlcj4pOiBQcm9taXNlPFVzZXIgfCB1bmRlZmluZWQ+O1xuXG4gIC8vIFBhc3N3b3JkIHJlc2V0IG9wZXJhdGlvbnNcbiAgY3JlYXRlUGFzc3dvcmRSZXNldFRva2VuKF90b2tlbjogSW5zZXJ0UGFzc3dvcmRSZXNldFRva2VuKTogUHJvbWlzZTxQYXNzd29yZFJlc2V0VG9rZW4+O1xuICBnZXRQYXNzd29yZFJlc2V0VG9rZW4oX3Rva2VuOiBzdHJpbmcpOiBQcm9taXNlPFBhc3N3b3JkUmVzZXRUb2tlbiB8IHVuZGVmaW5lZD47XG4gIG1hcmtQYXNzd29yZFJlc2V0VG9rZW5Bc1VzZWQoX3Rva2VuSWQ6IHN0cmluZyk6IFByb21pc2U8UGFzc3dvcmRSZXNldFRva2VuIHwgdW5kZWZpbmVkPjtcbiAgY2xlYW51cEV4cGlyZWRQYXNzd29yZFJlc2V0VG9rZW5zKCk6IFByb21pc2U8bnVtYmVyPjtcblxuICAvLyBPcmdhbml6YXRpb24gb3BlcmF0aW9uc1xuICBnZXRPcmdhbml6YXRpb25zKCk6IFByb21pc2U8T3JnYW5pemF0aW9uW10+O1xuICBnZXRPcmdhbml6YXRpb24oX2lkOiBzdHJpbmcpOiBQcm9taXNlPE9yZ2FuaXphdGlvbiB8IHVuZGVmaW5lZD47XG4gIGdldE9yZ2FuaXphdGlvbkJ5TmFtZShfbmFtZTogc3RyaW5nKTogUHJvbWlzZTxPcmdhbml6YXRpb24gfCB1bmRlZmluZWQ+O1xuICBjcmVhdGVPcmdhbml6YXRpb24oX29yZ2FuaXphdGlvbjogSW5zZXJ0T3JnYW5pemF0aW9uKTogUHJvbWlzZTxPcmdhbml6YXRpb24+O1xuICB1cGRhdGVPcmdhbml6YXRpb24oXG4gICAgX2lkOiBzdHJpbmcsXG4gICAgX3VwZGF0ZXM6IFBhcnRpYWw8T3JnYW5pemF0aW9uPlxuICApOiBQcm9taXNlPE9yZ2FuaXphdGlvbiB8IHVuZGVmaW5lZD47XG4gIGdldEJ1aWxkaW5nc0J5T3JnYW5pemF0aW9uKF9vcmdhbml6YXRpb25JZDogc3RyaW5nKTogUHJvbWlzZTxCdWlsZGluZ1tdPjtcblxuICAvLyBCdWlsZGluZyBvcGVyYXRpb25zXG4gIGdldEJ1aWxkaW5ncygpOiBQcm9taXNlPEJ1aWxkaW5nW10+O1xuICBnZXRCdWlsZGluZyhfaWQ6IHN0cmluZyk6IFByb21pc2U8QnVpbGRpbmcgfCB1bmRlZmluZWQ+O1xuICBjcmVhdGVCdWlsZGluZyhfYnVpbGRpbmc6IEluc2VydEJ1aWxkaW5nKTogUHJvbWlzZTxCdWlsZGluZz47XG4gIHVwZGF0ZUJ1aWxkaW5nKF9pZDogc3RyaW5nLCBfdXBkYXRlczogUGFydGlhbDxCdWlsZGluZz4pOiBQcm9taXNlPEJ1aWxkaW5nIHwgdW5kZWZpbmVkPjtcbiAgZGVsZXRlQnVpbGRpbmcoX2lkOiBzdHJpbmcpOiBQcm9taXNlPGJvb2xlYW4+O1xuXG4gIC8vIFJlc2lkZW5jZSBvcGVyYXRpb25zXG4gIGdldFJlc2lkZW5jZXMoKTogUHJvbWlzZTxSZXNpZGVuY2VbXT47XG4gIGdldFJlc2lkZW5jZShfaWQ6IHN0cmluZyk6IFByb21pc2U8UmVzaWRlbmNlIHwgdW5kZWZpbmVkPjtcbiAgZ2V0UmVzaWRlbmNlc0J5QnVpbGRpbmcoX2J1aWxkaW5nSWQ6IHN0cmluZyk6IFByb21pc2U8UmVzaWRlbmNlW10+O1xuICBjcmVhdGVSZXNpZGVuY2UoX3Jlc2lkZW5jZTogSW5zZXJ0UmVzaWRlbmNlKTogUHJvbWlzZTxSZXNpZGVuY2U+O1xuICB1cGRhdGVSZXNpZGVuY2UoX2lkOiBzdHJpbmcsIF91cGRhdGVzOiBQYXJ0aWFsPFJlc2lkZW5jZT4pOiBQcm9taXNlPFJlc2lkZW5jZSB8IHVuZGVmaW5lZD47XG4gIGRlbGV0ZVJlc2lkZW5jZShfaWQ6IHN0cmluZyk6IFByb21pc2U8Ym9vbGVhbj47XG5cbiAgLy8gQ29udGFjdCBvcGVyYXRpb25zXG4gIGdldENvbnRhY3RzKCk6IFByb21pc2U8Q29udGFjdFtdPjtcbiAgZ2V0Q29udGFjdHNCeUVudGl0eShcbiAgICBfZW50aXR5SWQ6IHN0cmluZyxcbiAgICBfZW50aXR5OiAnb3JnYW5pemF0aW9uJyB8ICdidWlsZGluZycgfCAncmVzaWRlbmNlJ1xuICApOiBQcm9taXNlPENvbnRhY3RbXT47XG4gIGdldENvbnRhY3RzRm9yUmVzaWRlbmNlKF9yZXNpZGVuY2VJZDogc3RyaW5nKTogUHJvbWlzZTxBcnJheTxDb250YWN0ICYgeyB1c2VyOiBVc2VyIH0+PjtcbiAgY3JlYXRlQ29udGFjdChfY29udGFjdDogSW5zZXJ0Q29udGFjdCk6IFByb21pc2U8Q29udGFjdD47XG4gIHVwZGF0ZUNvbnRhY3QoX2lkOiBzdHJpbmcsIF91cGRhdGVzOiBQYXJ0aWFsPENvbnRhY3Q+KTogUHJvbWlzZTxDb250YWN0IHwgdW5kZWZpbmVkPjtcbiAgZGVsZXRlQ29udGFjdChfaWQ6IHN0cmluZyk6IFByb21pc2U8Ym9vbGVhbj47XG5cbiAgLy8gRG9jdW1lbnQgb3BlcmF0aW9uc1xuICBnZXREb2N1bWVudHMoX2ZpbHRlcnM/OiB7XG4gICAgYnVpbGRpbmdJZD86IHN0cmluZztcbiAgICByZXNpZGVuY2VJZD86IHN0cmluZztcbiAgICBkb2N1bWVudFR5cGU/OiBzdHJpbmc7XG4gICAgdXNlcklkPzogc3RyaW5nO1xuICAgIHVzZXJSb2xlPzogc3RyaW5nO1xuICB9KTogUHJvbWlzZTxEb2N1bWVudFtdPjtcbiAgZ2V0RG9jdW1lbnQoX2lkOiBzdHJpbmcpOiBQcm9taXNlPERvY3VtZW50IHwgdW5kZWZpbmVkPjtcbiAgY3JlYXRlRG9jdW1lbnQoX2RvY3VtZW50OiBJbnNlcnREb2N1bWVudCk6IFByb21pc2U8RG9jdW1lbnQ+O1xuICB1cGRhdGVEb2N1bWVudChfaWQ6IHN0cmluZywgX3VwZGF0ZXM6IFBhcnRpYWw8RG9jdW1lbnQ+KTogUHJvbWlzZTxEb2N1bWVudCB8IHVuZGVmaW5lZD47XG4gIGRlbGV0ZURvY3VtZW50KF9pZDogc3RyaW5nKTogUHJvbWlzZTxib29sZWFuPjtcblxuICAvLyBQZXJtaXNzaW9uIG9wZXJhdGlvbnNcbiAgZ2V0UGVybWlzc2lvbnMoKTogUHJvbWlzZTxQZXJtaXNzaW9uW10+O1xuICBnZXRSb2xlUGVybWlzc2lvbnMoKTogUHJvbWlzZTxSb2xlUGVybWlzc2lvbltdPjtcbiAgZ2V0VXNlclBlcm1pc3Npb25zKCk6IFByb21pc2U8VXNlclBlcm1pc3Npb25bXT47XG5cbiAgLy8gRGV2ZWxvcG1lbnQgb3BlcmF0aW9uc1xuICBnZXRQaWxsYXJzKCk6IFByb21pc2U8UGlsbGFyW10+O1xuICBnZXRQaWxsYXIoX2lkOiBzdHJpbmcpOiBQcm9taXNlPFBpbGxhciB8IHVuZGVmaW5lZD47XG4gIGNyZWF0ZVBpbGxhcihfcGlsbGFyOiBJbnNlcnRQaWxsYXIpOiBQcm9taXNlPFBpbGxhcj47XG4gIHVwZGF0ZVBpbGxhcihfaWQ6IHN0cmluZywgX3BpbGxhcjogUGFydGlhbDxQaWxsYXI+KTogUHJvbWlzZTxQaWxsYXIgfCB1bmRlZmluZWQ+O1xuICBnZXRXb3Jrc3BhY2VTdGF0dXNlcygpOiBQcm9taXNlPFdvcmtzcGFjZVN0YXR1c1tdPjtcbiAgZ2V0V29ya3NwYWNlU3RhdHVzKF9jb21wb25lbnQ6IHN0cmluZyk6IFByb21pc2U8V29ya3NwYWNlU3RhdHVzIHwgdW5kZWZpbmVkPjtcbiAgY3JlYXRlV29ya3NwYWNlU3RhdHVzKF9zdGF0dXM6IEluc2VydFdvcmtzcGFjZVN0YXR1cyk6IFByb21pc2U8V29ya3NwYWNlU3RhdHVzPjtcbiAgdXBkYXRlV29ya3NwYWNlU3RhdHVzKFxuICAgIF9jb21wb25lbnQ6IHN0cmluZyxcbiAgICBfc3RhdHVzOiBQYXJ0aWFsPFdvcmtzcGFjZVN0YXR1cz5cbiAgKTogUHJvbWlzZTxXb3Jrc3BhY2VTdGF0dXMgfCB1bmRlZmluZWQ+O1xuICBnZXRRdWFsaXR5TWV0cmljcygpOiBQcm9taXNlPFF1YWxpdHlNZXRyaWNbXT47XG4gIGNyZWF0ZVF1YWxpdHlNZXRyaWMoX21ldHJpYzogSW5zZXJ0UXVhbGl0eU1ldHJpYyk6IFByb21pc2U8UXVhbGl0eU1ldHJpYz47XG4gIGdldEZyYW1ld29ya0NvbmZpZ3VyYXRpb25zKCk6IFByb21pc2U8RnJhbWV3b3JrQ29uZmlndXJhdGlvbltdPjtcbiAgY3JlYXRlRnJhbWV3b3JrQ29uZmlndXJhdGlvbihcbiAgICBfY29uZmlnOiBJbnNlcnRGcmFtZXdvcmtDb25maWd1cmF0aW9uXG4gICk6IFByb21pc2U8RnJhbWV3b3JrQ29uZmlndXJhdGlvbj47XG4gIHVwZGF0ZUZyYW1ld29ya0NvbmZpZ3VyYXRpb24oXG4gICAgX2tleTogc3RyaW5nLFxuICAgIF9jb25maWc6IFBhcnRpYWw8RnJhbWV3b3JrQ29uZmlndXJhdGlvbj5cbiAgKTogUHJvbWlzZTxGcmFtZXdvcmtDb25maWd1cmF0aW9uIHwgdW5kZWZpbmVkPjtcbiAgZ2V0SW1wcm92ZW1lbnRTdWdnZXN0aW9ucygpOiBQcm9taXNlPEltcHJvdmVtZW50U3VnZ2VzdGlvbltdPjtcbiAgY3JlYXRlSW1wcm92ZW1lbnRTdWdnZXN0aW9uKFxuICAgIF9zdWdnZXN0aW9uOiBJbnNlcnRJbXByb3ZlbWVudFN1Z2dlc3Rpb25cbiAgKTogUHJvbWlzZTxJbXByb3ZlbWVudFN1Z2dlc3Rpb24+O1xuICB1cGRhdGVJbXByb3ZlbWVudFN1Z2dlc3Rpb24oXG4gICAgX2lkOiBzdHJpbmcsXG4gICAgX3VwZGF0ZXM6IFBhcnRpYWw8SW1wcm92ZW1lbnRTdWdnZXN0aW9uPlxuICApOiBQcm9taXNlPEltcHJvdmVtZW50U3VnZ2VzdGlvbiB8IHVuZGVmaW5lZD47XG4gIGdldEZlYXR1cmVzKCk6IFByb21pc2U8RmVhdHVyZVtdPjtcbiAgZ2V0RmVhdHVyZShfaWQ6IHN0cmluZyk6IFByb21pc2U8RmVhdHVyZSB8IHVuZGVmaW5lZD47XG4gIGNyZWF0ZUZlYXR1cmUoX2ZlYXR1cmU6IEluc2VydEZlYXR1cmUpOiBQcm9taXNlPEZlYXR1cmU+O1xuICB1cGRhdGVGZWF0dXJlKF9pZDogc3RyaW5nLCBfdXBkYXRlczogUGFydGlhbDxGZWF0dXJlPik6IFByb21pc2U8RmVhdHVyZSB8IHVuZGVmaW5lZD47XG4gIGdldEFjdGlvbmFibGVJdGVtcygpOiBQcm9taXNlPEFjdGlvbmFibGVJdGVtW10+O1xuICBjcmVhdGVBY3Rpb25hYmxlSXRlbShfaXRlbTogSW5zZXJ0QWN0aW9uYWJsZUl0ZW0pOiBQcm9taXNlPEFjdGlvbmFibGVJdGVtPjtcbiAgdXBkYXRlQWN0aW9uYWJsZUl0ZW0oXG4gICAgX2lkOiBzdHJpbmcsXG4gICAgX3VwZGF0ZXM6IFBhcnRpYWw8QWN0aW9uYWJsZUl0ZW0+XG4gICk6IFByb21pc2U8QWN0aW9uYWJsZUl0ZW0gfCB1bmRlZmluZWQ+O1xuICBkZWxldGVBY3Rpb25hYmxlSXRlbShfaWQ6IHN0cmluZyk6IFByb21pc2U8Ym9vbGVhbj47XG4gIGdldEludml0YXRpb25zKCk6IFByb21pc2U8SW52aXRhdGlvbltdPjtcbiAgY3JlYXRlSW52aXRhdGlvbihfaW52aXRhdGlvbjogSW5zZXJ0SW52aXRhdGlvbik6IFByb21pc2U8SW52aXRhdGlvbj47XG4gIGdldEludml0YXRpb25CeVRva2VuKF90b2tlbjogc3RyaW5nKTogUHJvbWlzZTxJbnZpdGF0aW9uIHwgdW5kZWZpbmVkPjtcbiAgdXBkYXRlSW52aXRhdGlvbihfaWQ6IHN0cmluZywgX3VwZGF0ZXM6IFBhcnRpYWw8SW52aXRhdGlvbj4pOiBQcm9taXNlPEludml0YXRpb24gfCB1bmRlZmluZWQ+O1xuICBnZXRJbnZpdGF0aW9uQXVkaXRMb2dzKCk6IFByb21pc2U8SW52aXRhdGlvbkF1ZGl0TG9nW10+O1xuICBjcmVhdGVJbnZpdGF0aW9uQXVkaXRMb2coX2xvZzogSW5zZXJ0SW52aXRhdGlvbkF1ZGl0TG9nKTogUHJvbWlzZTxJbnZpdGF0aW9uQXVkaXRMb2c+O1xuICBnZXRDb21tZW50c0J5RGVtYW5kKF9kZW1hbmRJZDogc3RyaW5nKTogUHJvbWlzZTxEZW1hbmRDb21tZW50W10+O1xuICBjcmVhdGVEZW1hbmRDb21tZW50KF9jb21tZW50OiBJbnNlcnREZW1hbmRDb21tZW50KTogUHJvbWlzZTxEZW1hbmRDb21tZW50PjtcbiAgZ2V0QnVncygpOiBQcm9taXNlPEJ1Z1tdPjtcbiAgZ2V0QnVnKF9pZDogc3RyaW5nKTogUHJvbWlzZTxCdWcgfCB1bmRlZmluZWQ+O1xuICBjcmVhdGVCdWcoX2J1ZzogSW5zZXJ0QnVnKTogUHJvbWlzZTxCdWc+O1xuICB1cGRhdGVCdWcoX2lkOiBzdHJpbmcsIF91cGRhdGVzOiBQYXJ0aWFsPEJ1Zz4pOiBQcm9taXNlPEJ1ZyB8IHVuZGVmaW5lZD47XG4gIGdldEZlYXR1cmVSZXF1ZXN0cygpOiBQcm9taXNlPEZlYXR1cmVSZXF1ZXN0W10+O1xuICBnZXRGZWF0dXJlUmVxdWVzdChfaWQ6IHN0cmluZyk6IFByb21pc2U8RmVhdHVyZVJlcXVlc3QgfCB1bmRlZmluZWQ+O1xuICBjcmVhdGVGZWF0dXJlUmVxdWVzdChfcmVxdWVzdDogSW5zZXJ0RmVhdHVyZVJlcXVlc3QpOiBQcm9taXNlPEZlYXR1cmVSZXF1ZXN0PjtcbiAgdXBkYXRlRmVhdHVyZVJlcXVlc3QoXG4gICAgX2lkOiBzdHJpbmcsXG4gICAgX3VwZGF0ZXM6IFBhcnRpYWw8RmVhdHVyZVJlcXVlc3Q+XG4gICk6IFByb21pc2U8RmVhdHVyZVJlcXVlc3QgfCB1bmRlZmluZWQ+O1xuICBhZGRGZWF0dXJlUmVxdWVzdFVwdm90ZShcbiAgICBfZmVhdHVyZVJlcXVlc3RJZDogc3RyaW5nLFxuICAgIF91c2VySWQ6IHN0cmluZ1xuICApOiBQcm9taXNlPHsgc3VjY2VzczogYm9vbGVhbjsgbWVzc2FnZTogc3RyaW5nOyBkYXRhPzogYW55IH0+O1xuICByZW1vdmVGZWF0dXJlUmVxdWVzdFVwdm90ZShcbiAgICBfZmVhdHVyZVJlcXVlc3RJZDogc3RyaW5nLFxuICAgIF91c2VySWQ6IHN0cmluZ1xuICApOiBQcm9taXNlPHsgc3VjY2VzczogYm9vbGVhbjsgbWVzc2FnZTogc3RyaW5nOyBkYXRhPzogYW55IH0+O1xuICBcbiAgLy8gSW1wcm92ZW1lbnQgc3VnZ2VzdGlvbiBvcGVyYXRpb25zXG4gIGNsZWFyTmV3U3VnZ2VzdGlvbnMoKTogUHJvbWlzZTx2b2lkPjtcbiAgdXBkYXRlU3VnZ2VzdGlvblN0YXR1cyhfaWQ6IHN0cmluZywgX3N0YXR1czogc3RyaW5nKTogUHJvbWlzZTxJbXByb3ZlbWVudFN1Z2dlc3Rpb24gfCB1bmRlZmluZWQ+O1xuICBnZXRUb3BJbXByb3ZlbWVudFN1Z2dlc3Rpb25zKF9saW1pdDogbnVtYmVyKTogUHJvbWlzZTxJbXByb3ZlbWVudFN1Z2dlc3Rpb25bXT47XG4gIFxuICAvLyBGZWF0dXJlIG9wZXJhdGlvbnMgIFxuICBnZXRGZWF0dXJlc0J5U3RhdHVzKF9zdGF0dXM6IHN0cmluZyk6IFByb21pc2U8RmVhdHVyZVtdPjtcbiAgZ2V0UHVibGljUm9hZG1hcEZlYXR1cmVzKCk6IFByb21pc2U8RmVhdHVyZVtdPjtcbn1cblxuZXhwb3J0IGNsYXNzIE1lbVN0b3JhZ2UgaW1wbGVtZW50cyBJU3RvcmFnZSB7XG4gIHByaXZhdGUgdXNlcnM6IE1hcDxzdHJpbmcsIFVzZXI+O1xuICBwcml2YXRlIG9yZ2FuaXphdGlvbnM6IE1hcDxzdHJpbmcsIE9yZ2FuaXphdGlvbj47XG4gIHByaXZhdGUgYnVpbGRpbmdzOiBNYXA8c3RyaW5nLCBCdWlsZGluZz47XG4gIHByaXZhdGUgcmVzaWRlbmNlczogTWFwPHN0cmluZywgUmVzaWRlbmNlPjtcbiAgcHJpdmF0ZSBwaWxsYXJzOiBNYXA8c3RyaW5nLCBQaWxsYXI+O1xuICBwcml2YXRlIHdvcmtzcGFjZVN0YXR1c2VzOiBNYXA8c3RyaW5nLCBXb3Jrc3BhY2VTdGF0dXM+O1xuICBwcml2YXRlIHF1YWxpdHlNZXRyaWNzOiBNYXA8c3RyaW5nLCBRdWFsaXR5TWV0cmljPjtcbiAgcHJpdmF0ZSBmcmFtZXdvcmtDb25maWdzOiBNYXA8c3RyaW5nLCBGcmFtZXdvcmtDb25maWd1cmF0aW9uPjtcbiAgcHJpdmF0ZSBpbXByb3ZlbWVudFN1Z2dlc3Rpb25zOiBNYXA8c3RyaW5nLCBJbXByb3ZlbWVudFN1Z2dlc3Rpb24+O1xuICBwcml2YXRlIGZlYXR1cmVzOiBNYXA8c3RyaW5nLCBGZWF0dXJlPjtcbiAgcHJpdmF0ZSBhY3Rpb25hYmxlSXRlbXM6IE1hcDxzdHJpbmcsIEFjdGlvbmFibGVJdGVtPjtcbiAgcHJpdmF0ZSBpbnZpdGF0aW9uczogTWFwPHN0cmluZywgSW52aXRhdGlvbj47XG4gIHByaXZhdGUgaW52aXRhdGlvbkF1ZGl0TG9nczogTWFwPHN0cmluZywgSW52aXRhdGlvbkF1ZGl0TG9nPjtcbiAgcHJpdmF0ZSBidWdzOiBNYXA8c3RyaW5nLCBCdWc+O1xuICBwcml2YXRlIGZlYXR1cmVSZXF1ZXN0czogTWFwPHN0cmluZywgRmVhdHVyZVJlcXVlc3Q+O1xuICBwcml2YXRlIGZlYXR1cmVSZXF1ZXN0VXB2b3RlczogTWFwPHN0cmluZywgRmVhdHVyZVJlcXVlc3RVcHZvdGU+O1xuXG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHRoaXMudXNlcnMgPSBuZXcgTWFwKCk7XG4gICAgdGhpcy5vcmdhbml6YXRpb25zID0gbmV3IE1hcCgpO1xuICAgIHRoaXMuYnVpbGRpbmdzID0gbmV3IE1hcCgpO1xuICAgIHRoaXMucmVzaWRlbmNlcyA9IG5ldyBNYXAoKTtcbiAgICB0aGlzLnBpbGxhcnMgPSBuZXcgTWFwKCk7XG4gICAgdGhpcy53b3Jrc3BhY2VTdGF0dXNlcyA9IG5ldyBNYXAoKTtcbiAgICB0aGlzLnF1YWxpdHlNZXRyaWNzID0gbmV3IE1hcCgpO1xuICAgIHRoaXMuZnJhbWV3b3JrQ29uZmlncyA9IG5ldyBNYXAoKTtcbiAgICB0aGlzLmltcHJvdmVtZW50U3VnZ2VzdGlvbnMgPSBuZXcgTWFwKCk7XG4gICAgdGhpcy5mZWF0dXJlcyA9IG5ldyBNYXAoKTtcbiAgICB0aGlzLmFjdGlvbmFibGVJdGVtcyA9IG5ldyBNYXAoKTtcbiAgICB0aGlzLmludml0YXRpb25zID0gbmV3IE1hcCgpO1xuICAgIHRoaXMuaW52aXRhdGlvbkF1ZGl0TG9ncyA9IG5ldyBNYXAoKTtcbiAgICB0aGlzLmJ1Z3MgPSBuZXcgTWFwKCk7XG4gICAgdGhpcy5mZWF0dXJlUmVxdWVzdHMgPSBuZXcgTWFwKCk7XG4gICAgdGhpcy5mZWF0dXJlUmVxdWVzdFVwdm90ZXMgPSBuZXcgTWFwKCk7XG5cbiAgICAvLyBJbml0aWFsaXplIHRlc3QgdXNlciBhc3luY2hyb25vdXNseVxuICAgIHRoaXMuaW5pdGlhbGl6ZVRlc3RVc2VyKCkuY2F0Y2goY29uc29sZS5lcnJvcik7XG4gIH1cblxuICBwcml2YXRlIGFzeW5jIGluaXRpYWxpemVUZXN0VXNlcigpIHtcbiAgICAvLyBVc2Uga25vd24gYWRtaW4xMjMgcGFzc3dvcmQgZm9yIGRlbW8gbW9kZVxuICAgIGNvbnN0IGJjcnlwdCA9IHJlcXVpcmUoJ2JjcnlwdGpzJyk7XG4gICAgY29uc3Qgc2VjdXJlUGFzc3dvcmQgPSBhd2FpdCBiY3J5cHQuaGFzaCgnYWRtaW4xMjMnLCAxMik7XG5cbiAgICBjb25zdCB1c2VyOiBVc2VyID0ge1xuICAgICAgaWQ6ICc1NTBlODQwMC1lMjliLTQxZDQtYTcxNi00NDY2NTU0NDAwMDAnLFxuICAgICAgdXNlcm5hbWU6ICdrZXZpbi5oZXJ2aWV1eEBrb3Zlby1nZXN0aW9uLmNvbScsXG4gICAgICBlbWFpbDogJ2tldmluLmhlcnZpZXV4QGtvdmVvLWdlc3Rpb24uY29tJyxcbiAgICAgIHBhc3N3b3JkOiBzZWN1cmVQYXNzd29yZCxcbiAgICAgIGZpcnN0TmFtZTogJ0tldmluJyxcbiAgICAgIGxhc3ROYW1lOiAnSGVydmlldXgnLFxuICAgICAgcGhvbmU6ICcnLFxuICAgICAgcHJvZmlsZUltYWdlOiAnJyxcbiAgICAgIGxhbmd1YWdlOiAnZnInLFxuICAgICAgcm9sZTogJ2FkbWluJyxcbiAgICAgIGlzQWN0aXZlOiB0cnVlLFxuICAgICAgbGFzdExvZ2luQXQ6IG51bGwsXG4gICAgICBjcmVhdGVkQXQ6IG5ldyBEYXRlKCksXG4gICAgICB1cGRhdGVkQXQ6IG5ldyBEYXRlKCksXG4gICAgfTtcblxuICAgIHRoaXMudXNlcnMuc2V0KHVzZXIuaWQsIHVzZXIpO1xuICB9XG5cbiAgLy8gVXNlciBvcGVyYXRpb25zXG4gIGFzeW5jIGdldFVzZXJzKCk6IFByb21pc2U8VXNlcltdPiB7XG4gICAgcmV0dXJuIEFycmF5LmZyb20odGhpcy51c2Vycy52YWx1ZXMoKSk7XG4gIH1cblxuICBhc3luYyBnZXRVc2Vyc1dpdGhBc3NpZ25tZW50cygpOiBQcm9taXNlPEFycmF5PFVzZXIgJiB7IG9yZ2FuaXphdGlvbnM6IEFycmF5PHsgaWQ6IHN0cmluZzsgbmFtZTogc3RyaW5nOyB0eXBlOiBzdHJpbmcgfT47IGJ1aWxkaW5nczogQXJyYXk8eyBpZDogc3RyaW5nOyBuYW1lOiBzdHJpbmcgfT47IHJlc2lkZW5jZXM6IEFycmF5PHsgaWQ6IHN0cmluZzsgdW5pdE51bWJlcjogc3RyaW5nOyBidWlsZGluZ0lkOiBzdHJpbmc7IGJ1aWxkaW5nTmFtZTogc3RyaW5nIH0+IH0+PiB7XG4gICAgLy8gRm9yIE1lbVN0b3JhZ2UsIGp1c3QgcmV0dXJuIHVzZXJzIHdpdGggZW1wdHkgYXNzaWdubWVudHMgYXJyYXlzXG4gICAgY29uc3QgdXNlcnMgPSBBcnJheS5mcm9tKHRoaXMudXNlcnMudmFsdWVzKCkpO1xuICAgIHJldHVybiB1c2Vycy5tYXAodXNlciA9PiAoe1xuICAgICAgLi4udXNlcixcbiAgICAgIG9yZ2FuaXphdGlvbnM6IFtdLFxuICAgICAgYnVpbGRpbmdzOiBbXSxcbiAgICAgIHJlc2lkZW5jZXM6IFtdXG4gICAgfSkpO1xuICB9XG5cbiAgYXN5bmMgZ2V0VXNlcnNCeU9yZ2FuaXphdGlvbnMoX3VzZXJJZDogc3RyaW5nKTogUHJvbWlzZTxVc2VyW10+IHtcbiAgICByZXR1cm4gW107XG4gIH1cblxuICBhc3luYyBnZXRVc2VyKGlkOiBzdHJpbmcpOiBQcm9taXNlPFVzZXIgfCB1bmRlZmluZWQ+IHtcbiAgICByZXR1cm4gdGhpcy51c2Vycy5nZXQoaWQpO1xuICB9XG5cbiAgYXN5bmMgZ2V0VXNlck9yZ2FuaXphdGlvbnMoX3VzZXJJZDogc3RyaW5nKTogUHJvbWlzZTxBcnJheTx7IG9yZ2FuaXphdGlvbklkOiBzdHJpbmcgfT4+IHtcbiAgICByZXR1cm4gW107XG4gIH1cblxuICBhc3luYyBnZXRVc2VyUmVzaWRlbmNlcyhfdXNlcklkOiBzdHJpbmcpOiBQcm9taXNlPEFycmF5PHsgcmVzaWRlbmNlSWQ6IHN0cmluZyB9Pj4ge1xuICAgIHJldHVybiBbXTtcbiAgfVxuXG4gIGFzeW5jIGdldFVzZXJCeUVtYWlsKGVtYWlsOiBzdHJpbmcpOiBQcm9taXNlPFVzZXIgfCB1bmRlZmluZWQ+IHtcbiAgICByZXR1cm4gQXJyYXkuZnJvbSh0aGlzLnVzZXJzLnZhbHVlcygpKS5maW5kKCh1c2VyKSA9PiB1c2VyLmVtYWlsID09PSBlbWFpbCk7XG4gIH1cblxuICBhc3luYyBjcmVhdGVVc2VyKGluc2VydFVzZXI6IEluc2VydFVzZXIpOiBQcm9taXNlPFVzZXI+IHtcbiAgICBjb25zdCBpZCA9IHJhbmRvbVVVSUQoKTtcbiAgICBjb25zdCB1c2VyOiBVc2VyID0ge1xuICAgICAgLi4uaW5zZXJ0VXNlcixcbiAgICAgIGlkLFxuICAgICAgcGhvbmU6IGluc2VydFVzZXIucGhvbmUgfHwgbnVsbCxcbiAgICAgIHByb2ZpbGVJbWFnZTogaW5zZXJ0VXNlci5wcm9maWxlSW1hZ2UgfHwgJycsXG4gICAgICByb2xlOiBpbnNlcnRVc2VyLnJvbGUgfHwgJ3RlbmFudCcsXG4gICAgICBsYW5ndWFnZTogaW5zZXJ0VXNlci5sYW5ndWFnZSB8fCAnZnInLFxuICAgICAgaXNBY3RpdmU6IHRydWUsXG4gICAgICBsYXN0TG9naW5BdDogbnVsbCxcbiAgICAgIGNyZWF0ZWRBdDogbmV3IERhdGUoKSxcbiAgICAgIHVwZGF0ZWRBdDogbmV3IERhdGUoKSxcbiAgICB9O1xuICAgIHRoaXMudXNlcnMuc2V0KGlkLCB1c2VyKTtcbiAgICByZXR1cm4gdXNlcjtcbiAgfVxuXG4gIGFzeW5jIHVwZGF0ZVVzZXIoaWQ6IHN0cmluZywgdXBkYXRlczogUGFydGlhbDxVc2VyPik6IFByb21pc2U8VXNlciB8IHVuZGVmaW5lZD4ge1xuICAgIGNvbnN0IGV4aXN0aW5nVXNlciA9IHRoaXMudXNlcnMuZ2V0KGlkKTtcbiAgICBpZiAoIWV4aXN0aW5nVXNlcikge1xuICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICB9XG5cbiAgICBjb25zdCB1cGRhdGVkVXNlciA9IHtcbiAgICAgIC4uLmV4aXN0aW5nVXNlcixcbiAgICAgIC4uLnVwZGF0ZXMsXG4gICAgICB1cGRhdGVkQXQ6IG5ldyBEYXRlKCksXG4gICAgfTtcbiAgICB0aGlzLnVzZXJzLnNldChpZCwgdXBkYXRlZFVzZXIpO1xuICAgIHJldHVybiB1cGRhdGVkVXNlcjtcbiAgfVxuXG4gIC8vIE1pbmltYWwgaW1wbGVtZW50YXRpb25zIGZvciBvdGhlciByZXF1aXJlZCBtZXRob2RzXG4gIGFzeW5jIGNyZWF0ZVBhc3N3b3JkUmVzZXRUb2tlbihfdG9rZW46IEluc2VydFBhc3N3b3JkUmVzZXRUb2tlbik6IFByb21pc2U8UGFzc3dvcmRSZXNldFRva2VuPiB7XG4gICAgcmV0dXJuIHtcbiAgICAgIC4uLl90b2tlbixcbiAgICAgIGlkOiByYW5kb21VVUlEKCksXG4gICAgICBjcmVhdGVkQXQ6IG5ldyBEYXRlKCksXG4gICAgICB1c2VkQXQ6IG51bGwsXG4gICAgICBpc1VzZWQ6IGZhbHNlLFxuICAgICAgaXBBZGRyZXNzOiBfdG9rZW4uaXBBZGRyZXNzIHx8ICcnLFxuICAgICAgdXNlckFnZW50OiBfdG9rZW4udXNlckFnZW50IHx8ICcnLFxuICAgIH07XG4gIH1cbiAgYXN5bmMgZ2V0UGFzc3dvcmRSZXNldFRva2VuKF90b2tlbjogc3RyaW5nKTogUHJvbWlzZTxQYXNzd29yZFJlc2V0VG9rZW4gfCB1bmRlZmluZWQ+IHtcbiAgICByZXR1cm4gdW5kZWZpbmVkO1xuICB9XG4gIGFzeW5jIG1hcmtQYXNzd29yZFJlc2V0VG9rZW5Bc1VzZWQoX3Rva2VuSWQ6IHN0cmluZyk6IFByb21pc2U8UGFzc3dvcmRSZXNldFRva2VuIHwgdW5kZWZpbmVkPiB7XG4gICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgfVxuICBhc3luYyBjbGVhbnVwRXhwaXJlZFBhc3N3b3JkUmVzZXRUb2tlbnMoKTogUHJvbWlzZTxudW1iZXI+IHtcbiAgICByZXR1cm4gMDtcbiAgfVxuXG4gIGFzeW5jIGdldE9yZ2FuaXphdGlvbnMoKTogUHJvbWlzZTxPcmdhbml6YXRpb25bXT4ge1xuICAgIHJldHVybiBBcnJheS5mcm9tKHRoaXMub3JnYW5pemF0aW9ucy52YWx1ZXMoKSk7XG4gIH1cbiAgYXN5bmMgZ2V0T3JnYW5pemF0aW9uKGlkOiBzdHJpbmcpOiBQcm9taXNlPE9yZ2FuaXphdGlvbiB8IHVuZGVmaW5lZD4ge1xuICAgIHJldHVybiB0aGlzLm9yZ2FuaXphdGlvbnMuZ2V0KGlkKTtcbiAgfVxuICBhc3luYyBnZXRPcmdhbml6YXRpb25CeU5hbWUobmFtZTogc3RyaW5nKTogUHJvbWlzZTxPcmdhbml6YXRpb24gfCB1bmRlZmluZWQ+IHtcbiAgICByZXR1cm4gQXJyYXkuZnJvbSh0aGlzLm9yZ2FuaXphdGlvbnMudmFsdWVzKCkpLmZpbmQoKG9yZykgPT4gb3JnLm5hbWUgPT09IG5hbWUpO1xuICB9XG4gIGFzeW5jIGNyZWF0ZU9yZ2FuaXphdGlvbihvcmc6IEluc2VydE9yZ2FuaXphdGlvbik6IFByb21pc2U8T3JnYW5pemF0aW9uPiB7XG4gICAgY29uc3QgaWQgPSByYW5kb21VVUlEKCk7XG4gICAgY29uc3Qgb3JnYW5pemF0aW9uOiBPcmdhbml6YXRpb24gPSB7XG4gICAgICAuLi5vcmcsXG4gICAgICBpZCxcbiAgICAgIHBob25lOiBvcmcucGhvbmUgfHwgJycsXG4gICAgICBlbWFpbDogb3JnLmVtYWlsIHx8ICcnLFxuICAgICAgd2Vic2l0ZTogb3JnLndlYnNpdGUgfHwgJycsXG4gICAgICByZWdpc3RyYXRpb25OdW1iZXI6IG9yZy5yZWdpc3RyYXRpb25OdW1iZXIgfHwgJycsXG4gICAgICBpc0FjdGl2ZTogdHJ1ZSxcbiAgICAgIGNyZWF0ZWRBdDogbmV3IERhdGUoKSxcbiAgICAgIHVwZGF0ZWRBdDogbmV3IERhdGUoKSxcbiAgICB9O1xuICAgIHRoaXMub3JnYW5pemF0aW9ucy5zZXQoaWQsIG9yZ2FuaXphdGlvbik7XG4gICAgcmV0dXJuIG9yZ2FuaXphdGlvbjtcbiAgfVxuICBhc3luYyB1cGRhdGVPcmdhbml6YXRpb24oXG4gICAgaWQ6IHN0cmluZyxcbiAgICB1cGRhdGVzOiBQYXJ0aWFsPE9yZ2FuaXphdGlvbj5cbiAgKTogUHJvbWlzZTxPcmdhbml6YXRpb24gfCB1bmRlZmluZWQ+IHtcbiAgICBjb25zdCBleGlzdGluZyA9IHRoaXMub3JnYW5pemF0aW9ucy5nZXQoaWQpO1xuICAgIGlmICghZXhpc3RpbmcpIHJldHVybiB1bmRlZmluZWQ7XG4gICAgY29uc3QgdXBkYXRlZCA9IHsgLi4uZXhpc3RpbmcsIC4uLnVwZGF0ZXMsIHVwZGF0ZWRBdDogbmV3IERhdGUoKSB9O1xuICAgIHRoaXMub3JnYW5pemF0aW9ucy5zZXQoaWQsIHVwZGF0ZWQpO1xuICAgIHJldHVybiB1cGRhdGVkO1xuICB9XG4gIGFzeW5jIGdldEJ1aWxkaW5nc0J5T3JnYW5pemF0aW9uKG9yZ0lkOiBzdHJpbmcpOiBQcm9taXNlPEJ1aWxkaW5nW10+IHtcbiAgICByZXR1cm4gQXJyYXkuZnJvbSh0aGlzLmJ1aWxkaW5ncy52YWx1ZXMoKSkuZmlsdGVyKChiKSA9PiBiLm9yZ2FuaXphdGlvbklkID09PSBvcmdJZCk7XG4gIH1cblxuICBhc3luYyBnZXRCdWlsZGluZ3MoKTogUHJvbWlzZTxCdWlsZGluZ1tdPiB7XG4gICAgcmV0dXJuIEFycmF5LmZyb20odGhpcy5idWlsZGluZ3MudmFsdWVzKCkpO1xuICB9XG4gIGFzeW5jIGdldEJ1aWxkaW5nKGlkOiBzdHJpbmcpOiBQcm9taXNlPEJ1aWxkaW5nIHwgdW5kZWZpbmVkPiB7XG4gICAgcmV0dXJuIHRoaXMuYnVpbGRpbmdzLmdldChpZCk7XG4gIH1cbiAgYXN5bmMgY3JlYXRlQnVpbGRpbmcoYnVpbGRpbmc6IEluc2VydEJ1aWxkaW5nKTogUHJvbWlzZTxCdWlsZGluZz4ge1xuICAgIGNvbnN0IGlkID0gcmFuZG9tVVVJRCgpO1xuICAgIGNvbnN0IG5ld0J1aWxkaW5nOiBCdWlsZGluZyA9IHtcbiAgICAgIC4uLmJ1aWxkaW5nLFxuICAgICAgaWQsXG4gICAgICBpc0FjdGl2ZTogdHJ1ZSxcbiAgICAgIGNyZWF0ZWRBdDogbmV3IERhdGUoKSxcbiAgICAgIHVwZGF0ZWRBdDogbmV3IERhdGUoKSxcbiAgICAgIHRvdGFsVW5pdHM6IGJ1aWxkaW5nLnRvdGFsVW5pdHMgfHwgMCxcbiAgICAgIHRvdGFsRmxvb3JzOiBidWlsZGluZy50b3RhbEZsb29ycyB8fCAwLFxuICAgICAgeWVhckJ1aWx0OiBidWlsZGluZy55ZWFyQnVpbHQgfHwgMCxcbiAgICAgIGJ1aWxkaW5nVHlwZTogYnVpbGRpbmcuYnVpbGRpbmdUeXBlIGFzICdhcGFydG1lbnQnIHwgJ2NvbmRvJyB8ICdyZW50YWwnLFxuICAgICAgYmFua0FjY291bnROdW1iZXI6IGJ1aWxkaW5nLmJhbmtBY2NvdW50TnVtYmVyIHx8ICcnLFxuICAgICAgYmFua0FjY291bnRNaW5pbXVtczogYnVpbGRpbmcuYmFua0FjY291bnRNaW5pbXVtcyA/IEpTT04uc3RyaW5naWZ5KGJ1aWxkaW5nLmJhbmtBY2NvdW50TWluaW11bXMpIDogJycsXG4gICAgICBiYW5rQWNjb3VudFVwZGF0ZWRBdDogbmV3IERhdGUoKSxcbiAgICAgIGluZmxhdGlvblNldHRpbmdzOiAnJyxcbiAgICAgIHBhcmtpbmdTcGFjZXM6IGJ1aWxkaW5nLnBhcmtpbmdTcGFjZXMgfHwgMCxcbiAgICAgIHN0b3JhZ2VTcGFjZXM6IGJ1aWxkaW5nLnN0b3JhZ2VTcGFjZXMgfHwgMCxcbiAgICAgIGFtZW5pdGllczogYnVpbGRpbmcuYW1lbml0aWVzIHx8IG51bGwsXG4gICAgICBtYW5hZ2VtZW50Q29tcGFueTogYnVpbGRpbmcubWFuYWdlbWVudENvbXBhbnkgfHwgbnVsbCxcbiAgICAgIGJhbmtBY2NvdW50Tm90ZXM6IG51bGwsXG4gICAgICBiYW5rQWNjb3VudFN0YXJ0RGF0ZTogbnVsbCxcbiAgICAgIGJhbmtBY2NvdW50U3RhcnRBbW91bnQ6IG51bGwsXG4gICAgfTtcbiAgICB0aGlzLmJ1aWxkaW5ncy5zZXQoaWQsIG5ld0J1aWxkaW5nKTtcbiAgICByZXR1cm4gbmV3QnVpbGRpbmc7XG4gIH1cbiAgYXN5bmMgdXBkYXRlQnVpbGRpbmcoaWQ6IHN0cmluZywgdXBkYXRlczogUGFydGlhbDxCdWlsZGluZz4pOiBQcm9taXNlPEJ1aWxkaW5nIHwgdW5kZWZpbmVkPiB7XG4gICAgY29uc3QgZXhpc3RpbmcgPSB0aGlzLmJ1aWxkaW5ncy5nZXQoaWQpO1xuICAgIGlmICghZXhpc3RpbmcpIHJldHVybiB1bmRlZmluZWQ7XG4gICAgY29uc3QgdXBkYXRlZCA9IHsgLi4uZXhpc3RpbmcsIC4uLnVwZGF0ZXMsIHVwZGF0ZWRBdDogbmV3IERhdGUoKSB9O1xuICAgIHRoaXMuYnVpbGRpbmdzLnNldChpZCwgdXBkYXRlZCk7XG4gICAgcmV0dXJuIHVwZGF0ZWQ7XG4gIH1cbiAgYXN5bmMgZGVsZXRlQnVpbGRpbmcoaWQ6IHN0cmluZyk6IFByb21pc2U8Ym9vbGVhbj4ge1xuICAgIGNvbnN0IGJ1aWxkaW5nID0gdGhpcy5idWlsZGluZ3MuZ2V0KGlkKTtcbiAgICBpZiAoIWJ1aWxkaW5nKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIFxuICAgIC8vIFNvZnQgZGVsZXRlIGJ5IHNldHRpbmcgaXNBY3RpdmUgdG8gZmFsc2VcbiAgICBjb25zdCB1cGRhdGVkQnVpbGRpbmcgPSB7XG4gICAgICAuLi5idWlsZGluZyxcbiAgICAgIGlzQWN0aXZlOiBmYWxzZSxcbiAgICAgIHVwZGF0ZWRBdDogbmV3IERhdGUoKSxcbiAgICB9O1xuICAgIFxuICAgIHRoaXMuYnVpbGRpbmdzLnNldChpZCwgdXBkYXRlZEJ1aWxkaW5nKTtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuXG4gIGFzeW5jIGdldFJlc2lkZW5jZXMoKTogUHJvbWlzZTxSZXNpZGVuY2VbXT4ge1xuICAgIHJldHVybiBBcnJheS5mcm9tKHRoaXMucmVzaWRlbmNlcy52YWx1ZXMoKSk7XG4gIH1cbiAgYXN5bmMgZ2V0UmVzaWRlbmNlKGlkOiBzdHJpbmcpOiBQcm9taXNlPFJlc2lkZW5jZSB8IHVuZGVmaW5lZD4ge1xuICAgIHJldHVybiB0aGlzLnJlc2lkZW5jZXMuZ2V0KGlkKTtcbiAgfVxuICBhc3luYyBnZXRSZXNpZGVuY2VzQnlCdWlsZGluZyhidWlsZGluZ0lkOiBzdHJpbmcpOiBQcm9taXNlPFJlc2lkZW5jZVtdPiB7XG4gICAgcmV0dXJuIEFycmF5LmZyb20odGhpcy5yZXNpZGVuY2VzLnZhbHVlcygpKS5maWx0ZXIoKHIpID0+IHIuYnVpbGRpbmdJZCA9PT0gYnVpbGRpbmdJZCk7XG4gIH1cbiAgYXN5bmMgY3JlYXRlUmVzaWRlbmNlKHJlc2lkZW5jZTogSW5zZXJ0UmVzaWRlbmNlKTogUHJvbWlzZTxSZXNpZGVuY2U+IHtcbiAgICBjb25zdCBpZCA9IHJhbmRvbVVVSUQoKTtcbiAgICBjb25zdCBuZXdSZXNpZGVuY2U6IFJlc2lkZW5jZSA9IHtcbiAgICAgIC4uLnJlc2lkZW5jZSxcbiAgICAgIGlkLFxuICAgICAgaXNBY3RpdmU6IHRydWUsXG4gICAgICBjcmVhdGVkQXQ6IG5ldyBEYXRlKCksXG4gICAgICB1cGRhdGVkQXQ6IG5ldyBEYXRlKCksXG4gICAgICBmbG9vcjogcmVzaWRlbmNlLmZsb29yIHx8IDAsXG4gICAgICBzcXVhcmVGb290YWdlOiByZXNpZGVuY2Uuc3F1YXJlRm9vdGFnZT8udG9TdHJpbmcoKSB8fCAnMCcsXG4gICAgICBiZWRyb29tczogcmVzaWRlbmNlLmJlZHJvb21zIHx8IDAsXG4gICAgICBiYXRocm9vbXM6IHJlc2lkZW5jZS5iYXRocm9vbXM/LnRvU3RyaW5nKCkgfHwgJzAnLFxuICAgICAgYmFsY29ueTogcmVzaWRlbmNlLmJhbGNvbnkgfHwgZmFsc2UsXG4gICAgICBwYXJraW5nU3BhY2VOdW1iZXJzOiByZXNpZGVuY2UucGFya2luZ1NwYWNlTnVtYmVycyB8fCBbXSxcbiAgICAgIHN0b3JhZ2VTcGFjZU51bWJlcnM6IHJlc2lkZW5jZS5zdG9yYWdlU3BhY2VOdW1iZXJzIHx8IFtdLFxuICAgICAgb3duZXJzaGlwUGVyY2VudGFnZTogcmVzaWRlbmNlLm93bmVyc2hpcFBlcmNlbnRhZ2U/LnRvU3RyaW5nKCkgfHwgJzAnLFxuICAgICAgbW9udGhseUZlZXM6IHJlc2lkZW5jZS5tb250aGx5RmVlcz8udG9TdHJpbmcoKSB8fCAnMCcsXG4gICAgfTtcbiAgICB0aGlzLnJlc2lkZW5jZXMuc2V0KGlkLCBuZXdSZXNpZGVuY2UpO1xuICAgIHJldHVybiBuZXdSZXNpZGVuY2U7XG4gIH1cbiAgYXN5bmMgdXBkYXRlUmVzaWRlbmNlKGlkOiBzdHJpbmcsIHVwZGF0ZXM6IFBhcnRpYWw8UmVzaWRlbmNlPik6IFByb21pc2U8UmVzaWRlbmNlIHwgdW5kZWZpbmVkPiB7XG4gICAgY29uc3QgZXhpc3RpbmcgPSB0aGlzLnJlc2lkZW5jZXMuZ2V0KGlkKTtcbiAgICBpZiAoIWV4aXN0aW5nKSByZXR1cm4gdW5kZWZpbmVkO1xuICAgIGNvbnN0IHVwZGF0ZWQgPSB7IC4uLmV4aXN0aW5nLCAuLi51cGRhdGVzLCB1cGRhdGVkQXQ6IG5ldyBEYXRlKCkgfTtcbiAgICB0aGlzLnJlc2lkZW5jZXMuc2V0KGlkLCB1cGRhdGVkKTtcbiAgICByZXR1cm4gdXBkYXRlZDtcbiAgfVxuICBhc3luYyBkZWxldGVSZXNpZGVuY2UoaWQ6IHN0cmluZyk6IFByb21pc2U8Ym9vbGVhbj4ge1xuICAgIHJldHVybiB0aGlzLnJlc2lkZW5jZXMuZGVsZXRlKGlkKTtcbiAgfVxuXG4gIGFzeW5jIGdldENvbnRhY3RzKCk6IFByb21pc2U8Q29udGFjdFtdPiB7XG4gICAgcmV0dXJuIFtdO1xuICB9XG4gIGFzeW5jIGdldENvbnRhY3RzQnlFbnRpdHkoKTogUHJvbWlzZTxDb250YWN0W10+IHtcbiAgICByZXR1cm4gW107XG4gIH1cbiAgYXN5bmMgZ2V0Q29udGFjdHNGb3JSZXNpZGVuY2UoKTogUHJvbWlzZTxBcnJheTxDb250YWN0ICYgeyB1c2VyOiBVc2VyIH0+PiB7XG4gICAgcmV0dXJuIFtdO1xuICB9XG4gIGFzeW5jIGNyZWF0ZUNvbnRhY3QoY29udGFjdDogSW5zZXJ0Q29udGFjdCk6IFByb21pc2U8Q29udGFjdD4ge1xuICAgIGNvbnN0IGlkID0gcmFuZG9tVVVJRCgpO1xuICAgIHJldHVybiB7XG4gICAgICAuLi5jb250YWN0LFxuICAgICAgaWQsXG4gICAgICBuYW1lOiBjb250YWN0Lm5hbWUsXG4gICAgICBlbWFpbDogY29udGFjdC5lbWFpbCB8fCAnJyxcbiAgICAgIHBob25lOiBjb250YWN0LnBob25lIHx8ICcnLFxuICAgICAgZW50aXR5OiBjb250YWN0LmVudGl0eSBhcyAnb3JnYW5pemF0aW9uJyB8ICdidWlsZGluZycgfCAncmVzaWRlbmNlJyxcbiAgICAgIGVudGl0eUlkOiBjb250YWN0LmVudGl0eUlkLFxuICAgICAgY29udGFjdENhdGVnb3J5OiBjb250YWN0LmNvbnRhY3RDYXRlZ29yeSBhcyAncmVzaWRlbnQnIHwgJ21hbmFnZXInIHwgJ3RlbmFudCcgfCAnbWFpbnRlbmFuY2UnIHwgJ2VtZXJnZW5jeScgfCAnb3RoZXInLFxuICAgICAgaXNBY3RpdmU6IHRydWUsXG4gICAgICBjcmVhdGVkQXQ6IG5ldyBEYXRlKCksXG4gICAgICB1cGRhdGVkQXQ6IG5ldyBEYXRlKCksXG4gICAgfTtcbiAgfVxuICBhc3luYyB1cGRhdGVDb250YWN0KCk6IFByb21pc2U8Q29udGFjdCB8IHVuZGVmaW5lZD4ge1xuICAgIHJldHVybiB1bmRlZmluZWQ7XG4gIH1cbiAgYXN5bmMgZGVsZXRlQ29udGFjdCgpOiBQcm9taXNlPGJvb2xlYW4+IHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cblxuICBhc3luYyBnZXREb2N1bWVudHMoX2ZpbHRlcnM/OiB7XG4gICAgYnVpbGRpbmdJZD86IHN0cmluZztcbiAgICByZXNpZGVuY2VJZD86IHN0cmluZztcbiAgICBkb2N1bWVudFR5cGU/OiBzdHJpbmc7XG4gICAgdXNlcklkPzogc3RyaW5nO1xuICAgIHVzZXJSb2xlPzogc3RyaW5nO1xuICB9KTogUHJvbWlzZTxEb2N1bWVudFtdPiB7XG4gICAgcmV0dXJuIFtdO1xuICB9XG5cbiAgYXN5bmMgZ2V0RG9jdW1lbnQoX2lkOiBzdHJpbmcpOiBQcm9taXNlPERvY3VtZW50IHwgdW5kZWZpbmVkPiB7XG4gICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgfVxuXG4gIGFzeW5jIGNyZWF0ZURvY3VtZW50KGRvYzogSW5zZXJ0RG9jdW1lbnQpOiBQcm9taXNlPERvY3VtZW50PiB7XG4gICAgY29uc3QgaWQgPSByYW5kb21VVUlEKCk7XG4gICAgcmV0dXJuIHtcbiAgICAgIC4uLmRvYyxcbiAgICAgIGlkLFxuICAgICAgZGVzY3JpcHRpb246IGRvYy5kZXNjcmlwdGlvbiB8fCAnJyxcbiAgICAgIGJ1aWxkaW5nSWQ6IGRvYy5idWlsZGluZ0lkIHx8ICcnLFxuICAgICAgcmVzaWRlbmNlSWQ6IGRvYy5yZXNpZGVuY2VJZCB8fCAnJyxcbiAgICAgIGNyZWF0ZWRBdDogbmV3IERhdGUoKSxcbiAgICAgIHVwZGF0ZWRBdDogbmV3IERhdGUoKSxcbiAgICB9O1xuICB9XG5cbiAgYXN5bmMgdXBkYXRlRG9jdW1lbnQoX2lkOiBzdHJpbmcsIF91cGRhdGVzOiBQYXJ0aWFsPERvY3VtZW50Pik6IFByb21pc2U8RG9jdW1lbnQgfCB1bmRlZmluZWQ+IHtcbiAgICByZXR1cm4gdW5kZWZpbmVkO1xuICB9XG5cbiAgYXN5bmMgZGVsZXRlRG9jdW1lbnQoX2lkOiBzdHJpbmcpOiBQcm9taXNlPGJvb2xlYW4+IHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cblxuICBhc3luYyBnZXRQZXJtaXNzaW9ucygpOiBQcm9taXNlPFBlcm1pc3Npb25bXT4ge1xuICAgIHJldHVybiBbXTtcbiAgfVxuICBhc3luYyBnZXRSb2xlUGVybWlzc2lvbnMoKTogUHJvbWlzZTxSb2xlUGVybWlzc2lvbltdPiB7XG4gICAgcmV0dXJuIFtdO1xuICB9XG4gIGFzeW5jIGdldFVzZXJQZXJtaXNzaW9ucygpOiBQcm9taXNlPFVzZXJQZXJtaXNzaW9uW10+IHtcbiAgICByZXR1cm4gW107XG4gIH1cblxuICBhc3luYyBnZXRQaWxsYXJzKCk6IFByb21pc2U8UGlsbGFyW10+IHtcbiAgICByZXR1cm4gQXJyYXkuZnJvbSh0aGlzLnBpbGxhcnMudmFsdWVzKCkpLnNvcnQoKGEsIGIpID0+IHBhcnNlSW50KGEub3JkZXIpIC0gcGFyc2VJbnQoYi5vcmRlcikpO1xuICB9XG4gIGFzeW5jIGdldFBpbGxhcihpZDogc3RyaW5nKTogUHJvbWlzZTxQaWxsYXIgfCB1bmRlZmluZWQ+IHtcbiAgICByZXR1cm4gdGhpcy5waWxsYXJzLmdldChpZCk7XG4gIH1cbiAgYXN5bmMgY3JlYXRlUGlsbGFyKHBpbGxhcjogSW5zZXJ0UGlsbGFyKTogUHJvbWlzZTxQaWxsYXI+IHtcbiAgICBjb25zdCBpZCA9IHJhbmRvbVVVSUQoKTtcbiAgICBjb25zdCBuZXdQaWxsYXI6IFBpbGxhciA9IHtcbiAgICAgIC4uLnBpbGxhcixcbiAgICAgIGlkLFxuICAgICAgbmFtZTogcGlsbGFyLm5hbWUsXG4gICAgICBkZXNjcmlwdGlvbjogcGlsbGFyLmRlc2NyaXB0aW9uIHx8ICcnLFxuICAgICAgc3RhdHVzOiBwaWxsYXIuc3RhdHVzIHx8ICdwZW5kaW5nJyxcbiAgICAgIG9yZGVyOiBwaWxsYXIub3JkZXIudG9TdHJpbmcoKSxcbiAgICAgIGNvbmZpZ3VyYXRpb246IHBpbGxhci5jb25maWd1cmF0aW9uIHx8IG51bGwsXG4gICAgICBjcmVhdGVkQXQ6IG5ldyBEYXRlKCksXG4gICAgICB1cGRhdGVkQXQ6IG5ldyBEYXRlKCksXG4gICAgfTtcbiAgICB0aGlzLnBpbGxhcnMuc2V0KGlkLCBuZXdQaWxsYXIpO1xuICAgIHJldHVybiBuZXdQaWxsYXI7XG4gIH1cbiAgYXN5bmMgdXBkYXRlUGlsbGFyKGlkOiBzdHJpbmcsIHVwZGF0ZXM6IFBhcnRpYWw8UGlsbGFyPik6IFByb21pc2U8UGlsbGFyIHwgdW5kZWZpbmVkPiB7XG4gICAgY29uc3QgZXhpc3RpbmcgPSB0aGlzLnBpbGxhcnMuZ2V0KGlkKTtcbiAgICBpZiAoIWV4aXN0aW5nKSByZXR1cm4gdW5kZWZpbmVkO1xuICAgIGNvbnN0IHVwZGF0ZWQgPSB7IC4uLmV4aXN0aW5nLCAuLi51cGRhdGVzLCB1cGRhdGVkQXQ6IG5ldyBEYXRlKCkgfTtcbiAgICB0aGlzLnBpbGxhcnMuc2V0KGlkLCB1cGRhdGVkKTtcbiAgICByZXR1cm4gdXBkYXRlZDtcbiAgfVxuXG4gIGFzeW5jIGdldFdvcmtzcGFjZVN0YXR1c2VzKCk6IFByb21pc2U8V29ya3NwYWNlU3RhdHVzW10+IHtcbiAgICByZXR1cm4gQXJyYXkuZnJvbSh0aGlzLndvcmtzcGFjZVN0YXR1c2VzLnZhbHVlcygpKTtcbiAgfVxuICBhc3luYyBnZXRXb3Jrc3BhY2VTdGF0dXMoY29tcG9uZW50OiBzdHJpbmcpOiBQcm9taXNlPFdvcmtzcGFjZVN0YXR1cyB8IHVuZGVmaW5lZD4ge1xuICAgIHJldHVybiB0aGlzLndvcmtzcGFjZVN0YXR1c2VzLmdldChjb21wb25lbnQpO1xuICB9XG4gIGFzeW5jIGNyZWF0ZVdvcmtzcGFjZVN0YXR1cyhzdGF0dXM6IEluc2VydFdvcmtzcGFjZVN0YXR1cyk6IFByb21pc2U8V29ya3NwYWNlU3RhdHVzPiB7XG4gICAgY29uc3QgaWQgPSByYW5kb21VVUlEKCk7XG4gICAgY29uc3QgbmV3U3RhdHVzOiBXb3Jrc3BhY2VTdGF0dXMgPSB7XG4gICAgICAuLi5zdGF0dXMsXG4gICAgICBpZCxcbiAgICAgIHN0YXR1czogc3RhdHVzLnN0YXR1cyxcbiAgICAgIGNvbXBvbmVudDogc3RhdHVzLmNvbXBvbmVudCxcbiAgICAgIGxhc3RVcGRhdGVkOiBuZXcgRGF0ZSgpLFxuICAgIH07XG4gICAgdGhpcy53b3Jrc3BhY2VTdGF0dXNlcy5zZXQoc3RhdHVzLmNvbXBvbmVudCwgbmV3U3RhdHVzKTtcbiAgICByZXR1cm4gbmV3U3RhdHVzO1xuICB9XG4gIGFzeW5jIHVwZGF0ZVdvcmtzcGFjZVN0YXR1cyhcbiAgICBjb21wb25lbnQ6IHN0cmluZyxcbiAgICB1cGRhdGVzOiBQYXJ0aWFsPFdvcmtzcGFjZVN0YXR1cz5cbiAgKTogUHJvbWlzZTxXb3Jrc3BhY2VTdGF0dXMgfCB1bmRlZmluZWQ+IHtcbiAgICBjb25zdCBleGlzdGluZyA9IHRoaXMud29ya3NwYWNlU3RhdHVzZXMuZ2V0KGNvbXBvbmVudCk7XG4gICAgaWYgKCFleGlzdGluZykgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICBjb25zdCB1cGRhdGVkID0geyAuLi5leGlzdGluZywgLi4udXBkYXRlcywgdXBkYXRlZEF0OiBuZXcgRGF0ZSgpIH07XG4gICAgdGhpcy53b3Jrc3BhY2VTdGF0dXNlcy5zZXQoY29tcG9uZW50LCB1cGRhdGVkKTtcbiAgICByZXR1cm4gdXBkYXRlZDtcbiAgfVxuXG4gIGFzeW5jIGdldFF1YWxpdHlNZXRyaWNzKCk6IFByb21pc2U8UXVhbGl0eU1ldHJpY1tdPiB7XG4gICAgcmV0dXJuIEFycmF5LmZyb20odGhpcy5xdWFsaXR5TWV0cmljcy52YWx1ZXMoKSk7XG4gIH1cbiAgYXN5bmMgY3JlYXRlUXVhbGl0eU1ldHJpYyhtZXRyaWM6IEluc2VydFF1YWxpdHlNZXRyaWMpOiBQcm9taXNlPFF1YWxpdHlNZXRyaWM+IHtcbiAgICBjb25zdCBpZCA9IHJhbmRvbVVVSUQoKTtcbiAgICBjb25zdCBuZXdNZXRyaWM6IFF1YWxpdHlNZXRyaWMgPSB7XG4gICAgICAuLi5tZXRyaWMsXG4gICAgICBpZCxcbiAgICAgIHRpbWVzdGFtcDogbmV3IERhdGUoKSxcbiAgICB9O1xuICAgIHRoaXMucXVhbGl0eU1ldHJpY3Muc2V0KGlkLCBuZXdNZXRyaWMpO1xuICAgIHJldHVybiBuZXdNZXRyaWM7XG4gIH1cblxuICBhc3luYyBnZXRGcmFtZXdvcmtDb25maWd1cmF0aW9ucygpOiBQcm9taXNlPEZyYW1ld29ya0NvbmZpZ3VyYXRpb25bXT4ge1xuICAgIHJldHVybiBBcnJheS5mcm9tKHRoaXMuZnJhbWV3b3JrQ29uZmlncy52YWx1ZXMoKSk7XG4gIH1cbiAgYXN5bmMgY3JlYXRlRnJhbWV3b3JrQ29uZmlndXJhdGlvbihcbiAgICBjb25maWc6IEluc2VydEZyYW1ld29ya0NvbmZpZ3VyYXRpb25cbiAgKTogUHJvbWlzZTxGcmFtZXdvcmtDb25maWd1cmF0aW9uPiB7XG4gICAgY29uc3QgaWQgPSByYW5kb21VVUlEKCk7XG4gICAgY29uc3QgbmV3Q29uZmlnOiBGcmFtZXdvcmtDb25maWd1cmF0aW9uID0ge1xuICAgICAgLi4uY29uZmlnLFxuICAgICAgaWQsXG4gICAgICBkZXNjcmlwdGlvbjogY29uZmlnLmRlc2NyaXB0aW9uIHx8ICcnLFxuICAgICAgY3JlYXRlZEF0OiBuZXcgRGF0ZSgpLFxuICAgICAgdXBkYXRlZEF0OiBuZXcgRGF0ZSgpLFxuICAgIH07XG4gICAgdGhpcy5mcmFtZXdvcmtDb25maWdzLnNldChjb25maWcuX2tleSwgbmV3Q29uZmlnKTtcbiAgICByZXR1cm4gbmV3Q29uZmlnO1xuICB9XG4gIGFzeW5jIHVwZGF0ZUZyYW1ld29ya0NvbmZpZ3VyYXRpb24oXG4gICAga2V5OiBzdHJpbmcsXG4gICAgdXBkYXRlczogUGFydGlhbDxGcmFtZXdvcmtDb25maWd1cmF0aW9uPlxuICApOiBQcm9taXNlPEZyYW1ld29ya0NvbmZpZ3VyYXRpb24gfCB1bmRlZmluZWQ+IHtcbiAgICBjb25zdCBleGlzdGluZyA9IHRoaXMuZnJhbWV3b3JrQ29uZmlncy5nZXQoa2V5KTtcbiAgICBpZiAoIWV4aXN0aW5nKSByZXR1cm4gdW5kZWZpbmVkO1xuICAgIGNvbnN0IHVwZGF0ZWQgPSB7IC4uLmV4aXN0aW5nLCAuLi51cGRhdGVzLCB1cGRhdGVkQXQ6IG5ldyBEYXRlKCkgfTtcbiAgICB0aGlzLmZyYW1ld29ya0NvbmZpZ3Muc2V0KGtleSwgdXBkYXRlZCk7XG4gICAgcmV0dXJuIHVwZGF0ZWQ7XG4gIH1cblxuICBhc3luYyBnZXRJbXByb3ZlbWVudFN1Z2dlc3Rpb25zKCk6IFByb21pc2U8SW1wcm92ZW1lbnRTdWdnZXN0aW9uW10+IHtcbiAgICByZXR1cm4gQXJyYXkuZnJvbSh0aGlzLmltcHJvdmVtZW50U3VnZ2VzdGlvbnMudmFsdWVzKCkpO1xuICB9XG4gIGFzeW5jIGNyZWF0ZUltcHJvdmVtZW50U3VnZ2VzdGlvbihcbiAgICBzdWdnZXN0aW9uOiBJbnNlcnRJbXByb3ZlbWVudFN1Z2dlc3Rpb25cbiAgKTogUHJvbWlzZTxJbXByb3ZlbWVudFN1Z2dlc3Rpb24+IHtcbiAgICBjb25zdCBpZCA9IHJhbmRvbVVVSUQoKTtcbiAgICBjb25zdCBuZXdTdWdnZXN0aW9uOiBJbXByb3ZlbWVudFN1Z2dlc3Rpb24gPSB7XG4gICAgICAuLi5zdWdnZXN0aW9uLFxuICAgICAgaWQsXG4gICAgICBmaWxlUGF0aDogc3VnZ2VzdGlvbi5maWxlUGF0aCB8fCBudWxsLFxuICAgICAgc3RhdHVzOiBzdWdnZXN0aW9uLnN0YXR1cyBhcyAnTmV3JyB8ICdBY2tub3dsZWRnZWQnIHwgJ0RvbmUnLFxuICAgICAgY2F0ZWdvcnk6IHN1Z2dlc3Rpb24uY2F0ZWdvcnkgYXMgJ0NvZGUgUXVhbGl0eScgfCAnU2VjdXJpdHknIHwgJ1Rlc3RpbmcnIHwgJ0RvY3VtZW50YXRpb24nIHwgJ1BlcmZvcm1hbmNlJyB8ICdDb250aW51b3VzIEltcHJvdmVtZW50JyB8ICdSZXBsaXQgQUkgQWdlbnQgTW9uaXRvcmluZycgfCAnUmVwbGl0IEFwcCcsXG4gICAgICBwcmlvcml0eTogKHN1Z2dlc3Rpb24ucHJpb3JpdHkgYXMgJ0xvdycgfCAnTWVkaXVtJyB8ICdIaWdoJyB8ICdDcml0aWNhbCcpIHx8ICdNZWRpdW0nLFxuICAgICAgYXNzaWduZWRUbzogc3VnZ2VzdGlvbi5hc3NpZ25lZFRvIHx8IG51bGwsXG4gICAgICBjcmVhdGVkQXQ6IG5ldyBEYXRlKCksXG4gICAgICB1cGRhdGVkQXQ6IG5ldyBEYXRlKCksXG4gICAgICBhY2tub3dsZWRnZWRBdDogbnVsbCxcbiAgICAgIGNvbXBsZXRlZEF0OiBudWxsLFxuICAgIH07XG4gICAgdGhpcy5pbXByb3ZlbWVudFN1Z2dlc3Rpb25zLnNldChpZCwgbmV3U3VnZ2VzdGlvbik7XG4gICAgcmV0dXJuIG5ld1N1Z2dlc3Rpb247XG4gIH1cbiAgYXN5bmMgdXBkYXRlSW1wcm92ZW1lbnRTdWdnZXN0aW9uKFxuICAgIGlkOiBzdHJpbmcsXG4gICAgdXBkYXRlczogUGFydGlhbDxJbXByb3ZlbWVudFN1Z2dlc3Rpb24+XG4gICk6IFByb21pc2U8SW1wcm92ZW1lbnRTdWdnZXN0aW9uIHwgdW5kZWZpbmVkPiB7XG4gICAgY29uc3QgZXhpc3RpbmcgPSB0aGlzLmltcHJvdmVtZW50U3VnZ2VzdGlvbnMuZ2V0KGlkKTtcbiAgICBpZiAoIWV4aXN0aW5nKSByZXR1cm4gdW5kZWZpbmVkO1xuICAgIGNvbnN0IHVwZGF0ZWQgPSB7IC4uLmV4aXN0aW5nLCAuLi51cGRhdGVzLCB1cGRhdGVkQXQ6IG5ldyBEYXRlKCkgfTtcbiAgICB0aGlzLmltcHJvdmVtZW50U3VnZ2VzdGlvbnMuc2V0KGlkLCB1cGRhdGVkKTtcbiAgICByZXR1cm4gdXBkYXRlZDtcbiAgfVxuXG4gIGFzeW5jIGdldFRvcEltcHJvdmVtZW50U3VnZ2VzdGlvbnMobGltaXQ6IG51bWJlcik6IFByb21pc2U8SW1wcm92ZW1lbnRTdWdnZXN0aW9uW10+IHtcbiAgICBjb25zdCBzdWdnZXN0aW9ucyA9IEFycmF5LmZyb20odGhpcy5pbXByb3ZlbWVudFN1Z2dlc3Rpb25zLnZhbHVlcygpKTtcbiAgICAvLyBTb3J0IGJ5IHByaW9yaXR5IChDcml0aWNhbCA+IEhpZ2ggPiBNZWRpdW0gPiBMb3cpIHRoZW4gYnkgY3JlYXRpb24gZGF0ZVxuICAgIGNvbnN0IHByaW9yaXR5T3JkZXI6IHsgW2tleTogc3RyaW5nXTogbnVtYmVyIH0gPSB7ICdDcml0aWNhbCc6IDAsICdIaWdoJzogMSwgJ01lZGl1bSc6IDIsICdMb3cnOiAzIH07XG4gICAgcmV0dXJuIHN1Z2dlc3Rpb25zXG4gICAgICAuc29ydCgoYSwgYikgPT4ge1xuICAgICAgICBjb25zdCBwcmlvcml0eUEgPSBwcmlvcml0eU9yZGVyW2EucHJpb3JpdHldID8/IDk5OTtcbiAgICAgICAgY29uc3QgcHJpb3JpdHlCID0gcHJpb3JpdHlPcmRlcltiLnByaW9yaXR5XSA/PyA5OTk7XG4gICAgICAgIGNvbnN0IHByaW9yaXR5RGlmZiA9IHByaW9yaXR5QSAtIHByaW9yaXR5QjtcbiAgICAgICAgaWYgKHByaW9yaXR5RGlmZiAhPT0gMCkgcmV0dXJuIHByaW9yaXR5RGlmZjtcbiAgICAgICAgcmV0dXJuIG5ldyBEYXRlKGEuY3JlYXRlZEF0KS5nZXRUaW1lKCkgLSBuZXcgRGF0ZShiLmNyZWF0ZWRBdCkuZ2V0VGltZSgpO1xuICAgICAgfSlcbiAgICAgIC5zbGljZSgwLCBsaW1pdCk7XG4gIH1cblxuICBhc3luYyBjbGVhck5ld1N1Z2dlc3Rpb25zKCk6IFByb21pc2U8dm9pZD4ge1xuICAgIGZvciAoY29uc3QgW2lkLCBzdWdnZXN0aW9uXSBvZiB0aGlzLmltcHJvdmVtZW50U3VnZ2VzdGlvbnMuZW50cmllcygpKSB7XG4gICAgICBpZiAoc3VnZ2VzdGlvbi5zdGF0dXMgPT09ICdOZXcnKSB7XG4gICAgICAgIHRoaXMuaW1wcm92ZW1lbnRTdWdnZXN0aW9ucy5kZWxldGUoaWQpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGFzeW5jIHVwZGF0ZVN1Z2dlc3Rpb25TdGF0dXMoXG4gICAgaWQ6IHN0cmluZyxcbiAgICBzdGF0dXM6ICdOZXcnIHwgJ0Fja25vd2xlZGdlZCcgfCAnRG9uZSdcbiAgKTogUHJvbWlzZTxJbXByb3ZlbWVudFN1Z2dlc3Rpb24gfCB1bmRlZmluZWQ+IHtcbiAgICBjb25zdCBzdWdnZXN0aW9uID0gdGhpcy5pbXByb3ZlbWVudFN1Z2dlc3Rpb25zLmdldChpZCk7XG4gICAgaWYgKCFzdWdnZXN0aW9uKSByZXR1cm4gdW5kZWZpbmVkO1xuXG4gICAgY29uc3QgdXBkYXRlZFN1Z2dlc3Rpb24gPSB7XG4gICAgICAuLi5zdWdnZXN0aW9uLFxuICAgICAgc3RhdHVzLFxuICAgICAgdXBkYXRlZEF0OiBuZXcgRGF0ZSgpLFxuICAgIH07XG4gICAgdGhpcy5pbXByb3ZlbWVudFN1Z2dlc3Rpb25zLnNldChpZCwgdXBkYXRlZFN1Z2dlc3Rpb24pO1xuICAgIHJldHVybiB1cGRhdGVkU3VnZ2VzdGlvbjtcbiAgfVxuXG4gIGFzeW5jIGdldEZlYXR1cmVzKCk6IFByb21pc2U8RmVhdHVyZVtdPiB7XG4gICAgcmV0dXJuIEFycmF5LmZyb20odGhpcy5mZWF0dXJlcy52YWx1ZXMoKSk7XG4gIH1cbiAgYXN5bmMgZ2V0RmVhdHVyZShpZDogc3RyaW5nKTogUHJvbWlzZTxGZWF0dXJlIHwgdW5kZWZpbmVkPiB7XG4gICAgcmV0dXJuIHRoaXMuZmVhdHVyZXMuZ2V0KGlkKTtcbiAgfVxuICBhc3luYyBjcmVhdGVGZWF0dXJlKGZlYXR1cmU6IEluc2VydEZlYXR1cmUpOiBQcm9taXNlPEZlYXR1cmU+IHtcbiAgICBjb25zdCBpZCA9IHJhbmRvbVVVSUQoKTtcbiAgICBjb25zdCBuZXdGZWF0dXJlOiBGZWF0dXJlID0ge1xuICAgICAgLi4uZmVhdHVyZSxcbiAgICAgIGlkLFxuICAgICAgaXNQdWJsaWNSb2FkbWFwOiBmZWF0dXJlLmlzUHVibGljUm9hZG1hcCA/PyB0cnVlLFxuICAgICAgY3JlYXRlZEF0OiBuZXcgRGF0ZSgpLFxuICAgICAgdXBkYXRlZEF0OiBuZXcgRGF0ZSgpLFxuICAgICAgcmVxdWVzdGVkQnk6IGZlYXR1cmUucmVxdWVzdGVkQnkgfHwgbnVsbCxcbiAgICAgIGFzc2lnbmVkVG86IGZlYXR1cmUuYXNzaWduZWRUbyB8fCBudWxsLFxuICAgICAgZXN0aW1hdGVkSG91cnM6IGZlYXR1cmUuZXN0aW1hdGVkSG91cnMgfHwgMCxcbiAgICAgIGJ1c2luZXNzT2JqZWN0aXZlOiBmZWF0dXJlLmJ1c2luZXNzT2JqZWN0aXZlIHx8ICcnLFxuICAgICAgdGFyZ2V0VXNlcnM6IGZlYXR1cmUudGFyZ2V0VXNlcnMgfHwgJycsXG4gICAgICBzdWNjZXNzTWV0cmljczogZmVhdHVyZS5zdWNjZXNzTWV0cmljcyB8fCAnJyxcbiAgICAgIHRlY2huaWNhbENvbXBsZXhpdHk6IGZlYXR1cmUudGVjaG5pY2FsQ29tcGxleGl0eSB8fCAnJyxcbiAgICAgIGRlcGVuZGVuY2llczogZmVhdHVyZS5kZXBlbmRlbmNpZXM/LmpvaW4oJywnKSB8fCAnJyxcbiAgICAgIHVzZXJGbG93OiBmZWF0dXJlLnVzZXJGbG93IHx8ICcnLFxuICAgICAgYWN0dWFsSG91cnM6IG51bGwsXG4gICAgICBzdGFydERhdGU6IG51bGwsXG4gICAgICBjb21wbGV0ZWREYXRlOiBudWxsLFxuICAgICAgdGFnczogW10sXG4gICAgICBtZXRhZGF0YToge30sXG4gICAgICBzeW5jZWRBdDogbmV3IERhdGUoKSxcbiAgICB9O1xuICAgIHRoaXMuZmVhdHVyZXMuc2V0KGlkLCBuZXdGZWF0dXJlKTtcbiAgICByZXR1cm4gbmV3RmVhdHVyZTtcbiAgfVxuICBhc3luYyB1cGRhdGVGZWF0dXJlKGlkOiBzdHJpbmcsIHVwZGF0ZXM6IFBhcnRpYWw8RmVhdHVyZT4pOiBQcm9taXNlPEZlYXR1cmUgfCB1bmRlZmluZWQ+IHtcbiAgICBjb25zdCBleGlzdGluZyA9IHRoaXMuZmVhdHVyZXMuZ2V0KGlkKTtcbiAgICBpZiAoIWV4aXN0aW5nKSByZXR1cm4gdW5kZWZpbmVkO1xuICAgIGNvbnN0IHVwZGF0ZWQgPSB7IC4uLmV4aXN0aW5nLCAuLi51cGRhdGVzLCB1cGRhdGVkQXQ6IG5ldyBEYXRlKCkgfTtcbiAgICB0aGlzLmZlYXR1cmVzLnNldChpZCwgdXBkYXRlZCk7XG4gICAgcmV0dXJuIHVwZGF0ZWQ7XG4gIH1cblxuICBhc3luYyBnZXRGZWF0dXJlc0J5U3RhdHVzKFxuICAgIHN0YXR1czogJ2NvbXBsZXRlZCcgfCAnaW4tcHJvZ3Jlc3MnIHwgJ3BsYW5uZWQnIHwgJ2NhbmNlbGxlZCcgfCAncmVxdWVzdGVkJ1xuICApOiBQcm9taXNlPEZlYXR1cmVbXT4ge1xuICAgIHJldHVybiBBcnJheS5mcm9tKHRoaXMuZmVhdHVyZXMudmFsdWVzKCkpLmZpbHRlcigoZikgPT4gZi5zdGF0dXMgPT09IHN0YXR1cyk7XG4gIH1cblxuICBhc3luYyBnZXRQdWJsaWNSb2FkbWFwRmVhdHVyZXMoKTogUHJvbWlzZTxGZWF0dXJlW10+IHtcbiAgICByZXR1cm4gQXJyYXkuZnJvbSh0aGlzLmZlYXR1cmVzLnZhbHVlcygpKS5maWx0ZXIoKGYpID0+IGYuaXNQdWJsaWNSb2FkbWFwKTtcbiAgfVxuXG4gIGFzeW5jIGdldEFjdGlvbmFibGVJdGVtcygpOiBQcm9taXNlPEFjdGlvbmFibGVJdGVtW10+IHtcbiAgICByZXR1cm4gQXJyYXkuZnJvbSh0aGlzLmFjdGlvbmFibGVJdGVtcy52YWx1ZXMoKSk7XG4gIH1cbiAgYXN5bmMgY3JlYXRlQWN0aW9uYWJsZUl0ZW0oaXRlbTogSW5zZXJ0QWN0aW9uYWJsZUl0ZW0pOiBQcm9taXNlPEFjdGlvbmFibGVJdGVtPiB7XG4gICAgY29uc3QgaWQgPSByYW5kb21VVUlEKCk7XG4gICAgY29uc3QgbmV3SXRlbTogQWN0aW9uYWJsZUl0ZW0gPSB7XG4gICAgICAuLi5pdGVtLFxuICAgICAgaWQsXG4gICAgICBjcmVhdGVkQXQ6IG5ldyBEYXRlKCksXG4gICAgICB1cGRhdGVkQXQ6IG5ldyBEYXRlKCksXG4gICAgICBlc3RpbWF0ZWRIb3VyczogaXRlbS5lc3RpbWF0ZWRIb3VycyB8fCAwLFxuICAgICAgZGVwZW5kZW5jaWVzOiBpdGVtLmRlcGVuZGVuY2llcyB8fCBbXSxcbiAgICAgIGNvbXBsZXRlZEF0OiBudWxsLFxuICAgICAgc3RhcnRlZEF0OiBudWxsLFxuICAgIH07XG4gICAgdGhpcy5hY3Rpb25hYmxlSXRlbXMuc2V0KGlkLCBuZXdJdGVtKTtcbiAgICByZXR1cm4gbmV3SXRlbTtcbiAgfVxuICBhc3luYyB1cGRhdGVBY3Rpb25hYmxlSXRlbShcbiAgICBpZDogc3RyaW5nLFxuICAgIHVwZGF0ZXM6IFBhcnRpYWw8QWN0aW9uYWJsZUl0ZW0+XG4gICk6IFByb21pc2U8QWN0aW9uYWJsZUl0ZW0gfCB1bmRlZmluZWQ+IHtcbiAgICBjb25zdCBleGlzdGluZyA9IHRoaXMuYWN0aW9uYWJsZUl0ZW1zLmdldChpZCk7XG4gICAgaWYgKCFleGlzdGluZykgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICBjb25zdCB1cGRhdGVkID0geyAuLi5leGlzdGluZywgLi4udXBkYXRlcywgdXBkYXRlZEF0OiBuZXcgRGF0ZSgpIH07XG4gICAgdGhpcy5hY3Rpb25hYmxlSXRlbXMuc2V0KGlkLCB1cGRhdGVkKTtcbiAgICByZXR1cm4gdXBkYXRlZDtcbiAgfVxuICBhc3luYyBkZWxldGVBY3Rpb25hYmxlSXRlbShpZDogc3RyaW5nKTogUHJvbWlzZTxib29sZWFuPiB7XG4gICAgcmV0dXJuIHRoaXMuYWN0aW9uYWJsZUl0ZW1zLmRlbGV0ZShpZCk7XG4gIH1cblxuICBhc3luYyBnZXRJbnZpdGF0aW9ucygpOiBQcm9taXNlPEludml0YXRpb25bXT4ge1xuICAgIHJldHVybiBBcnJheS5mcm9tKHRoaXMuaW52aXRhdGlvbnMudmFsdWVzKCkpO1xuICB9XG4gIGFzeW5jIGNyZWF0ZUludml0YXRpb24oaW52aXRhdGlvbjogSW5zZXJ0SW52aXRhdGlvbik6IFByb21pc2U8SW52aXRhdGlvbj4ge1xuICAgIGNvbnN0IGlkID0gcmFuZG9tVVVJRCgpO1xuICAgIGNvbnN0IG5ld0ludml0YXRpb246IEludml0YXRpb24gPSB7XG4gICAgICAuLi5pbnZpdGF0aW9uLFxuICAgICAgaWQsXG4gICAgICB0b2tlbjogcmFuZG9tVVVJRCgpLFxuICAgICAgY3JlYXRlZEF0OiBuZXcgRGF0ZSgpLFxuICAgICAgdXBkYXRlZEF0OiBuZXcgRGF0ZSgpLFxuICAgICAgc3RhdHVzOiAncGVuZGluZycsXG4gICAgICBpcEFkZHJlc3M6ICcnLFxuICAgICAgdXNlckFnZW50OiAnJyxcbiAgICAgIGlzVXNlZDogZmFsc2UsXG4gICAgICB1c2VkQXQ6IG51bGwsXG4gICAgICBjcmVhdGVkQnlVc2VySWQ6IGludml0YXRpb24uaW52aXRlZEJ5VXNlcklkLFxuICAgICAgYWNjZXB0ZWRCeVVzZXJJZDogbnVsbCxcbiAgICAgIGFjY2VwdGVkQXQ6IG51bGwsXG4gICAgICByZXZva2VkQXQ6IG51bGwsXG4gICAgICByZXZva2VkQnlVc2VySWQ6IG51bGwsXG4gICAgICBsYXN0QWNjZXNzZWRBdDogbnVsbCxcbiAgICB9O1xuICAgIHRoaXMuaW52aXRhdGlvbnMuc2V0KGlkLCBuZXdJbnZpdGF0aW9uKTtcbiAgICByZXR1cm4gbmV3SW52aXRhdGlvbjtcbiAgfVxuICBhc3luYyBnZXRJbnZpdGF0aW9uQnlUb2tlbih0b2tlbjogc3RyaW5nKTogUHJvbWlzZTxJbnZpdGF0aW9uIHwgdW5kZWZpbmVkPiB7XG4gICAgcmV0dXJuIEFycmF5LmZyb20odGhpcy5pbnZpdGF0aW9ucy52YWx1ZXMoKSkuZmluZCgoaW52KSA9PiBpbnYudG9rZW4gPT09IHRva2VuKTtcbiAgfVxuICBhc3luYyB1cGRhdGVJbnZpdGF0aW9uKFxuICAgIGlkOiBzdHJpbmcsXG4gICAgdXBkYXRlczogUGFydGlhbDxJbnZpdGF0aW9uPlxuICApOiBQcm9taXNlPEludml0YXRpb24gfCB1bmRlZmluZWQ+IHtcbiAgICBjb25zdCBleGlzdGluZyA9IHRoaXMuaW52aXRhdGlvbnMuZ2V0KGlkKTtcbiAgICBpZiAoIWV4aXN0aW5nKSByZXR1cm4gdW5kZWZpbmVkO1xuICAgIGNvbnN0IHVwZGF0ZWQgPSB7IC4uLmV4aXN0aW5nLCAuLi51cGRhdGVzLCB1cGRhdGVkQXQ6IG5ldyBEYXRlKCkgfTtcbiAgICB0aGlzLmludml0YXRpb25zLnNldChpZCwgdXBkYXRlZCk7XG4gICAgcmV0dXJuIHVwZGF0ZWQ7XG4gIH1cblxuICBhc3luYyBnZXRJbnZpdGF0aW9uQXVkaXRMb2dzKCk6IFByb21pc2U8SW52aXRhdGlvbkF1ZGl0TG9nW10+IHtcbiAgICByZXR1cm4gQXJyYXkuZnJvbSh0aGlzLmludml0YXRpb25BdWRpdExvZ3MudmFsdWVzKCkpO1xuICB9XG4gIGFzeW5jIGNyZWF0ZUludml0YXRpb25BdWRpdExvZyhsb2c6IEluc2VydEludml0YXRpb25BdWRpdExvZyk6IFByb21pc2U8SW52aXRhdGlvbkF1ZGl0TG9nPiB7XG4gICAgY29uc3QgaWQgPSByYW5kb21VVUlEKCk7XG4gICAgY29uc3QgbmV3TG9nOiBJbnZpdGF0aW9uQXVkaXRMb2cgPSB7IFxuICAgICAgLi4ubG9nLCBcbiAgICAgIGlkLCBcbiAgICAgIGNyZWF0ZWRBdDogbmV3IERhdGUoKSxcbiAgICAgIGlwQWRkcmVzczogbG9nLmlwQWRkcmVzcyB8fCAnJyxcbiAgICAgIHVzZXJBZ2VudDogbG9nLnVzZXJBZ2VudCB8fCAnJyxcbiAgICAgIGRldGFpbHM6IGxvZy5kZXRhaWxzIHx8IHt9LFxuICAgICAgcHJldmlvdXNTdGF0dXM6IGxvZy5wcmV2aW91c1N0YXR1cyB8fCAncGVuZGluZycsXG4gICAgICBuZXdTdGF0dXM6IGxvZy5uZXdTdGF0dXMgfHwgJ3BlbmRpbmcnXG4gICAgfTtcbiAgICB0aGlzLmludml0YXRpb25BdWRpdExvZ3Muc2V0KGlkLCBuZXdMb2cpO1xuICAgIHJldHVybiBuZXdMb2c7XG4gIH1cblxuICBhc3luYyBnZXRDb21tZW50c0J5RGVtYW5kKCk6IFByb21pc2U8RGVtYW5kQ29tbWVudFtdPiB7XG4gICAgcmV0dXJuIFtdO1xuICB9XG4gIGFzeW5jIGNyZWF0ZURlbWFuZENvbW1lbnQoY29tbWVudDogSW5zZXJ0RGVtYW5kQ29tbWVudCk6IFByb21pc2U8RGVtYW5kQ29tbWVudD4ge1xuICAgIGNvbnN0IGlkID0gcmFuZG9tVVVJRCgpO1xuICAgIHJldHVybiB7XG4gICAgICAuLi5jb21tZW50LFxuICAgICAgaWQsXG4gICAgICBjcmVhdGVkQXQ6IG5ldyBEYXRlKCksXG4gICAgICB1cGRhdGVkQXQ6IG5ldyBEYXRlKCksXG4gICAgfTtcbiAgfVxuXG4gIGFzeW5jIGdldEJ1Z3MoKTogUHJvbWlzZTxCdWdbXT4ge1xuICAgIHJldHVybiBBcnJheS5mcm9tKHRoaXMuYnVncy52YWx1ZXMoKSk7XG4gIH1cbiAgYXN5bmMgZ2V0QnVnKGlkOiBzdHJpbmcpOiBQcm9taXNlPEJ1ZyB8IHVuZGVmaW5lZD4ge1xuICAgIHJldHVybiB0aGlzLmJ1Z3MuZ2V0KGlkKTtcbiAgfVxuICBhc3luYyBjcmVhdGVCdWcoYnVnOiBJbnNlcnRCdWcpOiBQcm9taXNlPEJ1Zz4ge1xuICAgIGNvbnN0IGlkID0gcmFuZG9tVVVJRCgpO1xuICAgIGNvbnN0IG5ld0J1ZzogQnVnID0ge1xuICAgICAgLi4uYnVnLFxuICAgICAgaWQsXG4gICAgICBzdGF0dXM6ICduZXcnLFxuICAgICAgY3JlYXRlZEF0OiBuZXcgRGF0ZSgpLFxuICAgICAgdXBkYXRlZEF0OiBuZXcgRGF0ZSgpLFxuICAgICAgcmVwcm9kdWN0aW9uU3RlcHM6IGJ1Zy5yZXByb2R1Y3Rpb25TdGVwcyB8fCAnJyxcbiAgICAgIGFzc2lnbmVkVG86IG51bGwsXG4gICAgICByZXNvbHZlZEF0OiBudWxsLFxuICAgICAgcmVzb2x2ZWRCeTogbnVsbCxcbiAgICAgIG5vdGVzOiBudWxsLFxuICAgICAgZW52aXJvbm1lbnQ6IGJ1Zy5lbnZpcm9ubWVudCB8fCAnJyxcbiAgICB9O1xuICAgIHRoaXMuYnVncy5zZXQoaWQsIG5ld0J1Zyk7XG4gICAgcmV0dXJuIG5ld0J1ZztcbiAgfVxuICBhc3luYyB1cGRhdGVCdWcoaWQ6IHN0cmluZywgdXBkYXRlczogUGFydGlhbDxCdWc+KTogUHJvbWlzZTxCdWcgfCB1bmRlZmluZWQ+IHtcbiAgICBjb25zdCBleGlzdGluZyA9IHRoaXMuYnVncy5nZXQoaWQpO1xuICAgIGlmICghZXhpc3RpbmcpIHJldHVybiB1bmRlZmluZWQ7XG4gICAgY29uc3QgdXBkYXRlZCA9IHsgLi4uZXhpc3RpbmcsIC4uLnVwZGF0ZXMsIHVwZGF0ZWRBdDogbmV3IERhdGUoKSB9O1xuICAgIHRoaXMuYnVncy5zZXQoaWQsIHVwZGF0ZWQpO1xuICAgIHJldHVybiB1cGRhdGVkO1xuICB9XG5cbiAgYXN5bmMgZ2V0RmVhdHVyZVJlcXVlc3RzKCk6IFByb21pc2U8RmVhdHVyZVJlcXVlc3RbXT4ge1xuICAgIHJldHVybiBBcnJheS5mcm9tKHRoaXMuZmVhdHVyZVJlcXVlc3RzLnZhbHVlcygpKTtcbiAgfVxuICBhc3luYyBnZXRGZWF0dXJlUmVxdWVzdChpZDogc3RyaW5nKTogUHJvbWlzZTxGZWF0dXJlUmVxdWVzdCB8IHVuZGVmaW5lZD4ge1xuICAgIHJldHVybiB0aGlzLmZlYXR1cmVSZXF1ZXN0cy5nZXQoaWQpO1xuICB9XG4gIGFzeW5jIGNyZWF0ZUZlYXR1cmVSZXF1ZXN0KHJlcXVlc3Q6IEluc2VydEZlYXR1cmVSZXF1ZXN0KTogUHJvbWlzZTxGZWF0dXJlUmVxdWVzdD4ge1xuICAgIGNvbnN0IGlkID0gcmFuZG9tVVVJRCgpO1xuICAgIGNvbnN0IG5ld1JlcXVlc3Q6IEZlYXR1cmVSZXF1ZXN0ID0ge1xuICAgICAgLi4ucmVxdWVzdCxcbiAgICAgIGlkLFxuICAgICAgc3RhdHVzOiAnc3VibWl0dGVkJyxcbiAgICAgIGNyZWF0ZWRBdDogbmV3IERhdGUoKSxcbiAgICAgIHVwZGF0ZWRBdDogbmV3IERhdGUoKSxcbiAgICAgIHVwdm90ZUNvdW50OiAwLFxuICAgICAgYXNzaWduZWRUbzogbnVsbCxcbiAgICAgIHJldmlld2VkQnk6IG51bGwsXG4gICAgICByZXZpZXdlZEF0OiBudWxsLFxuICAgICAgZXN0aW1hdGVkSG91cnM6IG51bGwsXG4gICAgICBtZXJnZWRJbnRvSWQ6IG51bGwsXG4gICAgfTtcbiAgICB0aGlzLmZlYXR1cmVSZXF1ZXN0cy5zZXQoaWQsIG5ld1JlcXVlc3QpO1xuICAgIHJldHVybiBuZXdSZXF1ZXN0O1xuICB9XG4gIGFzeW5jIHVwZGF0ZUZlYXR1cmVSZXF1ZXN0KFxuICAgIGlkOiBzdHJpbmcsXG4gICAgdXBkYXRlczogUGFydGlhbDxGZWF0dXJlUmVxdWVzdD5cbiAgKTogUHJvbWlzZTxGZWF0dXJlUmVxdWVzdCB8IHVuZGVmaW5lZD4ge1xuICAgIGNvbnN0IGV4aXN0aW5nID0gdGhpcy5mZWF0dXJlUmVxdWVzdHMuZ2V0KGlkKTtcbiAgICBpZiAoIWV4aXN0aW5nKSByZXR1cm4gdW5kZWZpbmVkO1xuICAgIGNvbnN0IHVwZGF0ZWQgPSB7IC4uLmV4aXN0aW5nLCAuLi51cGRhdGVzLCB1cGRhdGVkQXQ6IG5ldyBEYXRlKCkgfTtcbiAgICB0aGlzLmZlYXR1cmVSZXF1ZXN0cy5zZXQoaWQsIHVwZGF0ZWQpO1xuICAgIHJldHVybiB1cGRhdGVkO1xuICB9XG5cbiAgYXN5bmMgYWRkRmVhdHVyZVJlcXVlc3RVcHZvdGUoKTogUHJvbWlzZTx7IHN1Y2Nlc3M6IGJvb2xlYW47IG1lc3NhZ2U6IHN0cmluZzsgZGF0YT86IGFueSB9PiB7XG4gICAgcmV0dXJuIHsgc3VjY2VzczogdHJ1ZSwgbWVzc2FnZTogJ1Vwdm90ZSBhZGRlZCcgfTtcbiAgfVxuICBhc3luYyByZW1vdmVGZWF0dXJlUmVxdWVzdFVwdm90ZSgpOiBQcm9taXNlPHsgc3VjY2VzczogYm9vbGVhbjsgbWVzc2FnZTogc3RyaW5nOyBkYXRhPzogYW55IH0+IHtcbiAgICByZXR1cm4geyBzdWNjZXNzOiB0cnVlLCBtZXNzYWdlOiAnVXB2b3RlIHJlbW92ZWQnIH07XG4gIH1cblxuXG59XG5cbi8vIEltcG9ydCB0aGUgZGF0YWJhc2Ugc3RvcmFnZSBpbXBsZW1lbnRhdGlvblxuaW1wb3J0IHsgT3B0aW1pemVkRGF0YWJhc2VTdG9yYWdlIH0gZnJvbSAnLi9vcHRpbWl6ZWQtZGItc3RvcmFnZSc7XG5cbi8vIFByb2R1Y3Rpb24gZmFsbGJhY2sgc3RvcmFnZSAtIHRyeSBkYXRhYmFzZSBmaXJzdCwgZmFsbCBiYWNrIHRvIG1lbW9yeSBpZiBhdXRoZW50aWNhdGlvbiBmYWlsc1xuY2xhc3MgUHJvZHVjdGlvbkZhbGxiYWNrU3RvcmFnZSBpbXBsZW1lbnRzIElTdG9yYWdlIHtcbiAgcHJpdmF0ZSBkYlN0b3JhZ2U6IE9wdGltaXplZERhdGFiYXNlU3RvcmFnZTtcbiAgcHJpdmF0ZSBtZW1TdG9yYWdlOiBNZW1TdG9yYWdlO1xuICBwcml2YXRlIHVzaW5nRmFsbGJhY2s6IGJvb2xlYW4gPSBmYWxzZTtcblxuICBjb25zdHJ1Y3RvcigpIHtcbiAgICB0aGlzLmRiU3RvcmFnZSA9IG5ldyBPcHRpbWl6ZWREYXRhYmFzZVN0b3JhZ2UoKTtcbiAgICB0aGlzLm1lbVN0b3JhZ2UgPSBuZXcgTWVtU3RvcmFnZSgpO1xuICB9XG5cbiAgcHJpdmF0ZSBhc3luYyBzYWZlRGJPcGVyYXRpb248VD4ob3BlcmF0aW9uOiAoKSA9PiBQcm9taXNlPFQ+KTogUHJvbWlzZTxUPiB7XG4gICAgaWYgKHRoaXMudXNpbmdGYWxsYmFjaykge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdEYXRhYmFzZSB1bmF2YWlsYWJsZSwgdXNpbmcgbWVtb3J5IHN0b3JhZ2UnKTtcbiAgICB9XG5cbiAgICB0cnkge1xuICAgICAgcmV0dXJuIGF3YWl0IG9wZXJhdGlvbigpO1xuICAgIH0gY2F0Y2ggKGVycm9yOiBhbnkpIHtcbiAgICAgIC8vIENoZWNrIGlmIGl0J3MgYSBkYXRhYmFzZSBhdXRoZW50aWNhdGlvbiBlcnJvclxuICAgICAgaWYgKFxuICAgICAgICBlcnJvci5tZXNzYWdlPy5pbmNsdWRlcygncGFzc3dvcmQgYXV0aGVudGljYXRpb24gZmFpbGVkJykgfHxcbiAgICAgICAgZXJyb3IubWVzc2FnZT8uaW5jbHVkZXMoJ25lb25kYl9vd25lcicpIHx8XG4gICAgICAgIGVycm9yLmNhdXNlPy5tZXNzYWdlPy5pbmNsdWRlcygncGFzc3dvcmQgYXV0aGVudGljYXRpb24gZmFpbGVkJylcbiAgICAgICkge1xuICAgICAgICAvLyBEYXRhYmFzZSBhdXRoZW50aWNhdGlvbiBmYWlsZWQsIHN3aXRjaGluZyB0byBtZW1vcnkgc3RvcmFnZSBmb3IgcHJvZHVjdGlvbiBzdGFiaWxpdHlcbiAgICAgICAgdGhpcy51c2luZ0ZhbGxiYWNrID0gdHJ1ZTtcblxuICAgICAgICAvLyBJbml0aWFsaXplIG1lbW9yeSBzdG9yYWdlIHdpdGggcHJvZHVjdGlvbiBhZG1pbiB1c2VyXG4gICAgICAgIGF3YWl0IHRoaXMuaW5pdGlhbGl6ZUZhbGxiYWNrRGF0YSgpO1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0RhdGFiYXNlIHVuYXZhaWxhYmxlLCB1c2luZyBtZW1vcnkgc3RvcmFnZScpO1xuICAgICAgfVxuICAgICAgdGhyb3cgZXJyb3I7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBhc3luYyBpbml0aWFsaXplRmFsbGJhY2tEYXRhKCk6IFByb21pc2U8dm9pZD4ge1xuICAgIC8vIENyZWF0ZSB0aGUgcHJvZHVjdGlvbiBhZG1pbiB1c2VyIGluIG1lbW9yeSBzdG9yYWdlXG4gICAgY29uc3QgYWRtaW5Vc2VyID0ge1xuICAgICAgaWQ6ICdmMzU2NDdkZS01ZjE2LTQ2ZjItYjMwYi0wOWUwNDY5MzU2YjEnLFxuICAgICAgdXNlcm5hbWU6ICdrZXZpbi5oZXJ2aWV1eCcsXG4gICAgICBlbWFpbDogJ2tldmluLmhlcnZpZXV4QGtvdmVvLWdlc3Rpb24uY29tJyxcbiAgICAgIHBhc3N3b3JkOiAnJDJiJDEyJHNBSlhFY0lUWmc1SXRRb3UzMTJKc3VjTHl6QnlQQzZsRjdDTHZyckxraHhLZDFFeWZTeGRhJywgLy8gYWRtaW4xMjNcbiAgICAgIGZpcnN0TmFtZTogJ0tldmluJyxcbiAgICAgIGxhc3ROYW1lOiAnSGVydmlldXgnLFxuICAgICAgcGhvbmU6ICcnLFxuICAgICAgcHJvZmlsZUltYWdlOiAnJyxcbiAgICAgIGxhbmd1YWdlOiAnZnInIGFzIGNvbnN0LFxuICAgICAgcm9sZTogJ2FkbWluJyBhcyBjb25zdCxcbiAgICAgIGlzQWN0aXZlOiB0cnVlLFxuICAgICAgbGFzdExvZ2luQXQ6IG51bGwsXG4gICAgICBjcmVhdGVkQXQ6IG5ldyBEYXRlKCksXG4gICAgICB1cGRhdGVkQXQ6IG5ldyBEYXRlKCksXG4gICAgfTtcblxuICAgIGF3YWl0IHRoaXMubWVtU3RvcmFnZS5jcmVhdGVVc2VyKGFkbWluVXNlcik7XG5cbiAgICAvLyBDcmVhdGUgZGVmYXVsdCBvcmdhbml6YXRpb24gZm9yIGFkbWluIHVzZXJcbiAgICBjb25zdCBkZWZhdWx0T3JnID0ge1xuICAgICAgaWQ6ICdrb3Zlby1vcmctbWFpbicsXG4gICAgICBuYW1lOiAnS292ZW8gR2VzdGlvbicsXG4gICAgICB0eXBlOiAncHJvcGVydHlfbWFuYWdlbWVudCcgYXMgY29uc3QsXG4gICAgICBhZGRyZXNzOiAnMTIzIFF1ZWJlYyBTdHJlZXQnLFxuICAgICAgY2l0eTogJ01vbnRyZWFsJyxcbiAgICAgIHByb3ZpbmNlOiAnUUMnLFxuICAgICAgcG9zdGFsQ29kZTogJ0gxQSAxQTEnLFxuICAgICAgcGhvbmU6ICcrMS01MTQtNTU1LTAxMDAnLFxuICAgICAgZW1haWw6ICdjb250YWN0QGtvdmVvLWdlc3Rpb24uY29tJyxcbiAgICAgIHdlYnNpdGU6ICdodHRwczovL2tvdmVvLWdlc3Rpb24uY29tJyxcbiAgICAgIGRlc2NyaXB0aW9uOiAnTWFpbiBLb3ZlbyBwcm9wZXJ0eSBtYW5hZ2VtZW50IG9yZ2FuaXphdGlvbicsXG4gICAgICBpc0FjdGl2ZTogdHJ1ZSxcbiAgICAgIGNyZWF0ZWRBdDogbmV3IERhdGUoKSxcbiAgICAgIHVwZGF0ZWRBdDogbmV3IERhdGUoKSxcbiAgICB9O1xuXG4gICAgYXdhaXQgdGhpcy5tZW1TdG9yYWdlLmNyZWF0ZU9yZ2FuaXphdGlvbihkZWZhdWx0T3JnKTtcblxuICAgIC8vIEFzc29jaWF0ZSBhZG1pbiB1c2VyIHdpdGggdGhlIG9yZ2FuaXphdGlvblxuICAgIC8vIEZvciBtZW1vcnkgc3RvcmFnZSwgd2UnbGwganVzdCBlbnN1cmUgdGhlIHVzZXIgaGFzIGFjY2VzcyB0byB0aGUgb3JnYW5pemF0aW9uXG4gICAgLy8gVGhpcyBpcyBoYW5kbGVkIGJ5IHRoZSB1c2VyJ3Mgcm9sZSBiZWluZyAnYWRtaW4nIHdoaWNoIGdpdmVzIGFjY2VzcyB0byBhbGwgb3JnYW5pemF0aW9uc1xuXG4gICAgLy8gUHJvZHVjdGlvbiBmYWxsYmFjayBpbml0aWFsaXplZCBzdWNjZXNzZnVsbHlcbiAgfVxuXG4gIC8vIFVzZXIgb3BlcmF0aW9ucyB3aXRoIGZhbGxiYWNrXG4gIGFzeW5jIGdldFVzZXJCeUVtYWlsKGVtYWlsOiBzdHJpbmcpOiBQcm9taXNlPFVzZXIgfCB1bmRlZmluZWQ+IHtcbiAgICAvLyBEZWJ1ZyBsb2dnaW5nIHJlbW92ZWRcbiAgICB0cnkge1xuICAgICAgY29uc3QgdXNlciA9IGF3YWl0IHRoaXMuc2FmZURiT3BlcmF0aW9uKCgpID0+IHRoaXMuZGJTdG9yYWdlLmdldFVzZXJCeUVtYWlsKGVtYWlsKSk7XG4gICAgICAvLyBEZWJ1ZyBsb2dnaW5nIHJlbW92ZWRcbiAgICAgIHJldHVybiB1c2VyO1xuICAgIH0gY2F0Y2ggKGVycm9yOiBhbnkpIHtcbiAgICAgIC8vIEVycm9yIGhhbmRsaW5nIG1haW50YWluZWQgd2l0aG91dCBkZWJ1ZyBsb2dnaW5nXG4gICAgICB0aHJvdyBlcnJvcjtcbiAgICB9XG4gIH1cblxuICBhc3luYyBnZXRVc2VycygpOiBQcm9taXNlPFVzZXJbXT4ge1xuICAgIHJldHVybiBhd2FpdCB0aGlzLnNhZmVEYk9wZXJhdGlvbigoKSA9PiB0aGlzLmRiU3RvcmFnZS5nZXRVc2VycygpKTtcbiAgfVxuXG4gIGFzeW5jIGdldFVzZXJzV2l0aEFzc2lnbm1lbnRzKCk6IFByb21pc2U8QXJyYXk8VXNlciAmIHsgb3JnYW5pemF0aW9uczogQXJyYXk8eyBpZDogc3RyaW5nOyBuYW1lOiBzdHJpbmc7IHR5cGU6IHN0cmluZyB9PjsgYnVpbGRpbmdzOiBBcnJheTx7IGlkOiBzdHJpbmc7IG5hbWU6IHN0cmluZyB9PjsgcmVzaWRlbmNlczogQXJyYXk8eyBpZDogc3RyaW5nOyB1bml0TnVtYmVyOiBzdHJpbmc7IGJ1aWxkaW5nSWQ6IHN0cmluZzsgYnVpbGRpbmdOYW1lOiBzdHJpbmcgfT4gfT4+IHtcbiAgICByZXR1cm4gYXdhaXQgdGhpcy5zYWZlRGJPcGVyYXRpb24oKCkgPT4gdGhpcy5kYlN0b3JhZ2UuZ2V0VXNlcnNXaXRoQXNzaWdubWVudHMoKSk7XG4gIH1cblxuICBhc3luYyBnZXRVc2Vyc0J5T3JnYW5pemF0aW9ucyh1c2VySWQ6IHN0cmluZyk6IFByb21pc2U8VXNlcltdPiB7XG4gICAgdHJ5IHtcbiAgICAgIHJldHVybiBhd2FpdCB0aGlzLnNhZmVEYk9wZXJhdGlvbigoKSA9PiB0aGlzLmRiU3RvcmFnZS5nZXRVc2Vyc0J5T3JnYW5pemF0aW9ucyh1c2VySWQpKTtcbiAgICB9IGNhdGNoIHtcbiAgICAgIHJldHVybiB0aGlzLm1lbVN0b3JhZ2UuZ2V0VXNlcnNCeU9yZ2FuaXphdGlvbnModXNlcklkKTtcbiAgICB9XG4gIH1cblxuICBhc3luYyBnZXRVc2VyKGlkOiBzdHJpbmcpOiBQcm9taXNlPFVzZXIgfCB1bmRlZmluZWQ+IHtcbiAgICByZXR1cm4gYXdhaXQgdGhpcy5zYWZlRGJPcGVyYXRpb24oKCkgPT4gdGhpcy5kYlN0b3JhZ2UuZ2V0VXNlcihpZCkpO1xuICB9XG5cbiAgYXN5bmMgZ2V0VXNlck9yZ2FuaXphdGlvbnModXNlcklkOiBzdHJpbmcpOiBQcm9taXNlPEFycmF5PHsgb3JnYW5pemF0aW9uSWQ6IHN0cmluZyB9Pj4ge1xuICAgIHRyeSB7XG4gICAgICByZXR1cm4gYXdhaXQgdGhpcy5zYWZlRGJPcGVyYXRpb24oKCkgPT4gdGhpcy5kYlN0b3JhZ2UuZ2V0VXNlck9yZ2FuaXphdGlvbnModXNlcklkKSk7XG4gICAgfSBjYXRjaCB7XG4gICAgICByZXR1cm4gdGhpcy5tZW1TdG9yYWdlLmdldFVzZXJPcmdhbml6YXRpb25zKHVzZXJJZCk7XG4gICAgfVxuICB9XG5cbiAgYXN5bmMgZ2V0VXNlclJlc2lkZW5jZXModXNlcklkOiBzdHJpbmcpOiBQcm9taXNlPEFycmF5PHsgcmVzaWRlbmNlSWQ6IHN0cmluZyB9Pj4ge1xuICAgIHRyeSB7XG4gICAgICByZXR1cm4gYXdhaXQgdGhpcy5zYWZlRGJPcGVyYXRpb24oKCkgPT4gdGhpcy5kYlN0b3JhZ2UuZ2V0VXNlclJlc2lkZW5jZXModXNlcklkKSk7XG4gICAgfSBjYXRjaCB7XG4gICAgICByZXR1cm4gdGhpcy5tZW1TdG9yYWdlLmdldFVzZXJSZXNpZGVuY2VzKHVzZXJJZCk7XG4gICAgfVxuICB9XG5cbiAgYXN5bmMgY3JlYXRlVXNlcih1c2VyOiBJbnNlcnRVc2VyKTogUHJvbWlzZTxVc2VyPiB7XG4gICAgdHJ5IHtcbiAgICAgIHJldHVybiBhd2FpdCB0aGlzLnNhZmVEYk9wZXJhdGlvbigoKSA9PiB0aGlzLmRiU3RvcmFnZS5jcmVhdGVVc2VyKHVzZXIpKTtcbiAgICB9IGNhdGNoIHtcbiAgICAgIHJldHVybiB0aGlzLm1lbVN0b3JhZ2UuY3JlYXRlVXNlcih1c2VyKTtcbiAgICB9XG4gIH1cblxuICBhc3luYyB1cGRhdGVVc2VyKGlkOiBzdHJpbmcsIHVwZGF0ZXM6IFBhcnRpYWw8VXNlcj4pOiBQcm9taXNlPFVzZXIgfCB1bmRlZmluZWQ+IHtcbiAgICByZXR1cm4gYXdhaXQgdGhpcy5zYWZlRGJPcGVyYXRpb24oKCkgPT4gdGhpcy5kYlN0b3JhZ2UudXBkYXRlVXNlcihpZCwgdXBkYXRlcykpO1xuICB9XG5cbiAgLy8gUGFzc3dvcmQgcmVzZXQgb3BlcmF0aW9uc1xuICBhc3luYyBjcmVhdGVQYXNzd29yZFJlc2V0VG9rZW4odG9rZW46IEluc2VydFBhc3N3b3JkUmVzZXRUb2tlbik6IFByb21pc2U8UGFzc3dvcmRSZXNldFRva2VuPiB7XG4gICAgdHJ5IHtcbiAgICAgIHJldHVybiBhd2FpdCB0aGlzLnNhZmVEYk9wZXJhdGlvbigoKSA9PiB0aGlzLmRiU3RvcmFnZS5jcmVhdGVQYXNzd29yZFJlc2V0VG9rZW4odG9rZW4pKTtcbiAgICB9IGNhdGNoIHtcbiAgICAgIHJldHVybiB0aGlzLm1lbVN0b3JhZ2UuY3JlYXRlUGFzc3dvcmRSZXNldFRva2VuKHRva2VuKTtcbiAgICB9XG4gIH1cblxuICBhc3luYyBnZXRQYXNzd29yZFJlc2V0VG9rZW4odG9rZW46IHN0cmluZyk6IFByb21pc2U8UGFzc3dvcmRSZXNldFRva2VuIHwgdW5kZWZpbmVkPiB7XG4gICAgdHJ5IHtcbiAgICAgIHJldHVybiBhd2FpdCB0aGlzLnNhZmVEYk9wZXJhdGlvbigoKSA9PiB0aGlzLmRiU3RvcmFnZS5nZXRQYXNzd29yZFJlc2V0VG9rZW4odG9rZW4pKTtcbiAgICB9IGNhdGNoIHtcbiAgICAgIHJldHVybiB0aGlzLm1lbVN0b3JhZ2UuZ2V0UGFzc3dvcmRSZXNldFRva2VuKHRva2VuKTtcbiAgICB9XG4gIH1cblxuICBhc3luYyBtYXJrUGFzc3dvcmRSZXNldFRva2VuQXNVc2VkKHRva2VuSWQ6IHN0cmluZyk6IFByb21pc2U8UGFzc3dvcmRSZXNldFRva2VuIHwgdW5kZWZpbmVkPiB7XG4gICAgdHJ5IHtcbiAgICAgIHJldHVybiBhd2FpdCB0aGlzLnNhZmVEYk9wZXJhdGlvbigoKSA9PiB0aGlzLmRiU3RvcmFnZS5tYXJrUGFzc3dvcmRSZXNldFRva2VuQXNVc2VkKHRva2VuSWQpKTtcbiAgICB9IGNhdGNoIHtcbiAgICAgIHJldHVybiB0aGlzLm1lbVN0b3JhZ2UubWFya1Bhc3N3b3JkUmVzZXRUb2tlbkFzVXNlZCh0b2tlbklkKTtcbiAgICB9XG4gIH1cblxuICBhc3luYyBjbGVhbnVwRXhwaXJlZFBhc3N3b3JkUmVzZXRUb2tlbnMoKTogUHJvbWlzZTxudW1iZXI+IHtcbiAgICB0cnkge1xuICAgICAgcmV0dXJuIGF3YWl0IHRoaXMuc2FmZURiT3BlcmF0aW9uKCgpID0+IHRoaXMuZGJTdG9yYWdlLmNsZWFudXBFeHBpcmVkUGFzc3dvcmRSZXNldFRva2VucygpKTtcbiAgICB9IGNhdGNoIHtcbiAgICAgIHJldHVybiB0aGlzLm1lbVN0b3JhZ2UuY2xlYW51cEV4cGlyZWRQYXNzd29yZFJlc2V0VG9rZW5zKCk7XG4gICAgfVxuICB9XG5cbiAgLy8gRGVsZWdhdGUgYWxsIG90aGVyIG1ldGhvZHMgdG8gdGhlIGFwcHJvcHJpYXRlIHN0b3JhZ2VcbiAgYXN5bmMgZ2V0T3JnYW5pemF0aW9ucygpOiBQcm9taXNlPE9yZ2FuaXphdGlvbltdPiB7XG4gICAgdHJ5IHtcbiAgICAgIHJldHVybiBhd2FpdCB0aGlzLnNhZmVEYk9wZXJhdGlvbigoKSA9PiB0aGlzLmRiU3RvcmFnZS5nZXRPcmdhbml6YXRpb25zKCkpO1xuICAgIH0gY2F0Y2gge1xuICAgICAgcmV0dXJuIHRoaXMubWVtU3RvcmFnZS5nZXRPcmdhbml6YXRpb25zKCk7XG4gICAgfVxuICB9XG5cbiAgYXN5bmMgZ2V0T3JnYW5pemF0aW9uKGlkOiBzdHJpbmcpOiBQcm9taXNlPE9yZ2FuaXphdGlvbiB8IHVuZGVmaW5lZD4ge1xuICAgIHRyeSB7XG4gICAgICByZXR1cm4gYXdhaXQgdGhpcy5zYWZlRGJPcGVyYXRpb24oKCkgPT4gdGhpcy5kYlN0b3JhZ2UuZ2V0T3JnYW5pemF0aW9uKGlkKSk7XG4gICAgfSBjYXRjaCB7XG4gICAgICByZXR1cm4gdGhpcy5tZW1TdG9yYWdlLmdldE9yZ2FuaXphdGlvbihpZCk7XG4gICAgfVxuICB9XG5cbiAgYXN5bmMgY3JlYXRlT3JnYW5pemF0aW9uKG9yZzogSW5zZXJ0T3JnYW5pemF0aW9uKTogUHJvbWlzZTxPcmdhbml6YXRpb24+IHtcbiAgICB0cnkge1xuICAgICAgcmV0dXJuIGF3YWl0IHRoaXMuc2FmZURiT3BlcmF0aW9uKCgpID0+IHRoaXMuZGJTdG9yYWdlLmNyZWF0ZU9yZ2FuaXphdGlvbihvcmcpKTtcbiAgICB9IGNhdGNoIHtcbiAgICAgIHJldHVybiB0aGlzLm1lbVN0b3JhZ2UuY3JlYXRlT3JnYW5pemF0aW9uKG9yZyk7XG4gICAgfVxuICB9XG5cbiAgYXN5bmMgdXBkYXRlT3JnYW5pemF0aW9uKFxuICAgIGlkOiBzdHJpbmcsXG4gICAgdXBkYXRlczogUGFydGlhbDxPcmdhbml6YXRpb24+XG4gICk6IFByb21pc2U8T3JnYW5pemF0aW9uIHwgdW5kZWZpbmVkPiB7XG4gICAgdHJ5IHtcbiAgICAgIHJldHVybiBhd2FpdCB0aGlzLnNhZmVEYk9wZXJhdGlvbigoKSA9PiB0aGlzLmRiU3RvcmFnZS51cGRhdGVPcmdhbml6YXRpb24oaWQsIHVwZGF0ZXMpKTtcbiAgICB9IGNhdGNoIHtcbiAgICAgIHJldHVybiB0aGlzLm1lbVN0b3JhZ2UudXBkYXRlT3JnYW5pemF0aW9uKGlkLCB1cGRhdGVzKTtcbiAgICB9XG4gIH1cblxuICBhc3luYyBkZWxldGVPcmdhbml6YXRpb24oaWQ6IHN0cmluZyk6IFByb21pc2U8Ym9vbGVhbj4ge1xuICAgIHRyeSB7XG4gICAgICByZXR1cm4gYXdhaXQgdGhpcy5zYWZlRGJPcGVyYXRpb24oKCkgPT4gdGhpcy5kYlN0b3JhZ2UuZGVsZXRlT3JnYW5pemF0aW9uKGlkKSk7XG4gICAgfSBjYXRjaCB7XG4gICAgICByZXR1cm4gdGhpcy5tZW1TdG9yYWdlLmRlbGV0ZU9yZ2FuaXphdGlvbihpZCk7XG4gICAgfVxuICB9XG5cbiAgLy8gQnVpbGRpbmdzXG4gIGFzeW5jIGdldEJ1aWxkaW5ncygpOiBQcm9taXNlPEJ1aWxkaW5nW10+IHtcbiAgICB0cnkge1xuICAgICAgcmV0dXJuIGF3YWl0IHRoaXMuc2FmZURiT3BlcmF0aW9uKCgpID0+IHRoaXMuZGJTdG9yYWdlLmdldEJ1aWxkaW5ncygpKTtcbiAgICB9IGNhdGNoIHtcbiAgICAgIHJldHVybiB0aGlzLm1lbVN0b3JhZ2UuZ2V0QnVpbGRpbmdzKCk7XG4gICAgfVxuICB9XG5cbiAgYXN5bmMgZ2V0QnVpbGRpbmdzQnlPcmdhbml6YXRpb24ob3JnYW5pemF0aW9uSWQ6IHN0cmluZyk6IFByb21pc2U8QnVpbGRpbmdbXT4ge1xuICAgIHRyeSB7XG4gICAgICByZXR1cm4gYXdhaXQgdGhpcy5zYWZlRGJPcGVyYXRpb24oKCkgPT5cbiAgICAgICAgdGhpcy5kYlN0b3JhZ2UuZ2V0QnVpbGRpbmdzQnlPcmdhbml6YXRpb24ob3JnYW5pemF0aW9uSWQpXG4gICAgICApO1xuICAgIH0gY2F0Y2gge1xuICAgICAgcmV0dXJuIHRoaXMubWVtU3RvcmFnZS5nZXRCdWlsZGluZ3NCeU9yZ2FuaXphdGlvbihvcmdhbml6YXRpb25JZCk7XG4gICAgfVxuICB9XG5cbiAgYXN5bmMgZ2V0QnVpbGRpbmcoaWQ6IHN0cmluZyk6IFByb21pc2U8QnVpbGRpbmcgfCB1bmRlZmluZWQ+IHtcbiAgICB0cnkge1xuICAgICAgcmV0dXJuIGF3YWl0IHRoaXMuc2FmZURiT3BlcmF0aW9uKCgpID0+IHRoaXMuZGJTdG9yYWdlLmdldEJ1aWxkaW5nKGlkKSk7XG4gICAgfSBjYXRjaCB7XG4gICAgICByZXR1cm4gdGhpcy5tZW1TdG9yYWdlLmdldEJ1aWxkaW5nKGlkKTtcbiAgICB9XG4gIH1cblxuICBhc3luYyBjcmVhdGVCdWlsZGluZyhidWlsZGluZzogSW5zZXJ0QnVpbGRpbmcpOiBQcm9taXNlPEJ1aWxkaW5nPiB7XG4gICAgdHJ5IHtcbiAgICAgIHJldHVybiBhd2FpdCB0aGlzLnNhZmVEYk9wZXJhdGlvbigoKSA9PiB0aGlzLmRiU3RvcmFnZS5jcmVhdGVCdWlsZGluZyhidWlsZGluZykpO1xuICAgIH0gY2F0Y2gge1xuICAgICAgcmV0dXJuIHRoaXMubWVtU3RvcmFnZS5jcmVhdGVCdWlsZGluZyhidWlsZGluZyk7XG4gICAgfVxuICB9XG5cbiAgYXN5bmMgdXBkYXRlQnVpbGRpbmcoaWQ6IHN0cmluZywgdXBkYXRlczogUGFydGlhbDxCdWlsZGluZz4pOiBQcm9taXNlPEJ1aWxkaW5nIHwgdW5kZWZpbmVkPiB7XG4gICAgdHJ5IHtcbiAgICAgIHJldHVybiBhd2FpdCB0aGlzLnNhZmVEYk9wZXJhdGlvbigoKSA9PiB0aGlzLmRiU3RvcmFnZS51cGRhdGVCdWlsZGluZyhpZCwgdXBkYXRlcykpO1xuICAgIH0gY2F0Y2gge1xuICAgICAgcmV0dXJuIHRoaXMubWVtU3RvcmFnZS51cGRhdGVCdWlsZGluZyhpZCwgdXBkYXRlcyk7XG4gICAgfVxuICB9XG5cbiAgYXN5bmMgZGVsZXRlQnVpbGRpbmcoaWQ6IHN0cmluZyk6IFByb21pc2U8Ym9vbGVhbj4ge1xuICAgIHRyeSB7XG4gICAgICByZXR1cm4gYXdhaXQgdGhpcy5zYWZlRGJPcGVyYXRpb24oKCkgPT4gdGhpcy5kYlN0b3JhZ2UuZGVsZXRlQnVpbGRpbmcoaWQpKTtcbiAgICB9IGNhdGNoIHtcbiAgICAgIHJldHVybiB0aGlzLm1lbVN0b3JhZ2UuZGVsZXRlQnVpbGRpbmcoaWQpO1xuICAgIH1cbiAgfVxuXG4gIC8vIFJlc2lkZW5jZXNcbiAgYXN5bmMgZ2V0UmVzaWRlbmNlcygpOiBQcm9taXNlPFJlc2lkZW5jZVtdPiB7XG4gICAgdHJ5IHtcbiAgICAgIHJldHVybiBhd2FpdCB0aGlzLnNhZmVEYk9wZXJhdGlvbigoKSA9PiB0aGlzLmRiU3RvcmFnZS5nZXRSZXNpZGVuY2VzKCkpO1xuICAgIH0gY2F0Y2gge1xuICAgICAgcmV0dXJuIHRoaXMubWVtU3RvcmFnZS5nZXRSZXNpZGVuY2VzKCk7XG4gICAgfVxuICB9XG5cbiAgYXN5bmMgZ2V0UmVzaWRlbmNlc0J5QnVpbGRpbmcoYnVpbGRpbmdJZDogc3RyaW5nKTogUHJvbWlzZTxSZXNpZGVuY2VbXT4ge1xuICAgIHRyeSB7XG4gICAgICByZXR1cm4gYXdhaXQgdGhpcy5zYWZlRGJPcGVyYXRpb24oKCkgPT4gdGhpcy5kYlN0b3JhZ2UuZ2V0UmVzaWRlbmNlc0J5QnVpbGRpbmcoYnVpbGRpbmdJZCkpO1xuICAgIH0gY2F0Y2gge1xuICAgICAgcmV0dXJuIHRoaXMubWVtU3RvcmFnZS5nZXRSZXNpZGVuY2VzQnlCdWlsZGluZyhidWlsZGluZ0lkKTtcbiAgICB9XG4gIH1cblxuICBhc3luYyBnZXRSZXNpZGVuY2UoaWQ6IHN0cmluZyk6IFByb21pc2U8UmVzaWRlbmNlIHwgdW5kZWZpbmVkPiB7XG4gICAgdHJ5IHtcbiAgICAgIHJldHVybiBhd2FpdCB0aGlzLnNhZmVEYk9wZXJhdGlvbigoKSA9PiB0aGlzLmRiU3RvcmFnZS5nZXRSZXNpZGVuY2UoaWQpKTtcbiAgICB9IGNhdGNoIHtcbiAgICAgIHJldHVybiB0aGlzLm1lbVN0b3JhZ2UuZ2V0UmVzaWRlbmNlKGlkKTtcbiAgICB9XG4gIH1cblxuICBhc3luYyBjcmVhdGVSZXNpZGVuY2UocmVzaWRlbmNlOiBJbnNlcnRSZXNpZGVuY2UpOiBQcm9taXNlPFJlc2lkZW5jZT4ge1xuICAgIHRyeSB7XG4gICAgICByZXR1cm4gYXdhaXQgdGhpcy5zYWZlRGJPcGVyYXRpb24oKCkgPT4gdGhpcy5kYlN0b3JhZ2UuY3JlYXRlUmVzaWRlbmNlKHJlc2lkZW5jZSkpO1xuICAgIH0gY2F0Y2gge1xuICAgICAgcmV0dXJuIHRoaXMubWVtU3RvcmFnZS5jcmVhdGVSZXNpZGVuY2UocmVzaWRlbmNlKTtcbiAgICB9XG4gIH1cblxuICBhc3luYyB1cGRhdGVSZXNpZGVuY2UoaWQ6IHN0cmluZywgdXBkYXRlczogUGFydGlhbDxSZXNpZGVuY2U+KTogUHJvbWlzZTxSZXNpZGVuY2UgfCB1bmRlZmluZWQ+IHtcbiAgICB0cnkge1xuICAgICAgcmV0dXJuIGF3YWl0IHRoaXMuc2FmZURiT3BlcmF0aW9uKCgpID0+IHRoaXMuZGJTdG9yYWdlLnVwZGF0ZVJlc2lkZW5jZShpZCwgdXBkYXRlcykpO1xuICAgIH0gY2F0Y2gge1xuICAgICAgcmV0dXJuIHRoaXMubWVtU3RvcmFnZS51cGRhdGVSZXNpZGVuY2UoaWQsIHVwZGF0ZXMpO1xuICAgIH1cbiAgfVxuXG4gIGFzeW5jIGRlbGV0ZVJlc2lkZW5jZShpZDogc3RyaW5nKTogUHJvbWlzZTxib29sZWFuPiB7XG4gICAgdHJ5IHtcbiAgICAgIHJldHVybiBhd2FpdCB0aGlzLnNhZmVEYk9wZXJhdGlvbigoKSA9PiB0aGlzLmRiU3RvcmFnZS5kZWxldGVSZXNpZGVuY2UoaWQpKTtcbiAgICB9IGNhdGNoIHtcbiAgICAgIHJldHVybiB0aGlzLm1lbVN0b3JhZ2UuZGVsZXRlUmVzaWRlbmNlKGlkKTtcbiAgICB9XG4gIH1cblxuICAvLyBBbGwgb3RoZXIgbWV0aG9kcyAtIGltcGxlbWVudCBmYWxsYmFjayBwYXR0ZXJuIGZvciByZW1haW5pbmcgaW50ZXJmYWNlIG1ldGhvZHNcbiAgYXN5bmMgZ2V0Q29udGFjdHMoKTogUHJvbWlzZTxDb250YWN0W10+IHtcbiAgICB0cnkge1xuICAgICAgcmV0dXJuIGF3YWl0IHRoaXMuc2FmZURiT3BlcmF0aW9uKCgpID0+IHRoaXMuZGJTdG9yYWdlLmdldENvbnRhY3RzKCkpO1xuICAgIH0gY2F0Y2gge1xuICAgICAgcmV0dXJuIHRoaXMubWVtU3RvcmFnZS5nZXRDb250YWN0cygpO1xuICAgIH1cbiAgfVxuXG4gIGFzeW5jIGdldENvbnRhY3QoaWQ6IHN0cmluZyk6IFByb21pc2U8Q29udGFjdCB8IHVuZGVmaW5lZD4ge1xuICAgIHRyeSB7XG4gICAgICByZXR1cm4gYXdhaXQgdGhpcy5zYWZlRGJPcGVyYXRpb24oKCkgPT4gdGhpcy5kYlN0b3JhZ2UuZ2V0Q29udGFjdChpZCkpO1xuICAgIH0gY2F0Y2gge1xuICAgICAgcmV0dXJuIHRoaXMubWVtU3RvcmFnZS5nZXRDb250YWN0KGlkKTtcbiAgICB9XG4gIH1cblxuICBhc3luYyBjcmVhdGVDb250YWN0KGNvbnRhY3Q6IEluc2VydENvbnRhY3QpOiBQcm9taXNlPENvbnRhY3Q+IHtcbiAgICB0cnkge1xuICAgICAgcmV0dXJuIGF3YWl0IHRoaXMuc2FmZURiT3BlcmF0aW9uKCgpID0+IHRoaXMuZGJTdG9yYWdlLmNyZWF0ZUNvbnRhY3QoY29udGFjdCkpO1xuICAgIH0gY2F0Y2gge1xuICAgICAgcmV0dXJuIHRoaXMubWVtU3RvcmFnZS5jcmVhdGVDb250YWN0KGNvbnRhY3QpO1xuICAgIH1cbiAgfVxuXG4gIGFzeW5jIHVwZGF0ZUNvbnRhY3QoaWQ6IHN0cmluZywgdXBkYXRlczogUGFydGlhbDxDb250YWN0Pik6IFByb21pc2U8Q29udGFjdCB8IHVuZGVmaW5lZD4ge1xuICAgIHRyeSB7XG4gICAgICByZXR1cm4gYXdhaXQgdGhpcy5zYWZlRGJPcGVyYXRpb24oKCkgPT4gdGhpcy5kYlN0b3JhZ2UudXBkYXRlQ29udGFjdChpZCwgdXBkYXRlcykpO1xuICAgIH0gY2F0Y2gge1xuICAgICAgcmV0dXJuIHRoaXMubWVtU3RvcmFnZS51cGRhdGVDb250YWN0KGlkLCB1cGRhdGVzKTtcbiAgICB9XG4gIH1cblxuICBhc3luYyBkZWxldGVDb250YWN0KGlkOiBzdHJpbmcpOiBQcm9taXNlPGJvb2xlYW4+IHtcbiAgICB0cnkge1xuICAgICAgcmV0dXJuIGF3YWl0IHRoaXMuc2FmZURiT3BlcmF0aW9uKCgpID0+IHRoaXMuZGJTdG9yYWdlLmRlbGV0ZUNvbnRhY3QoaWQpKTtcbiAgICB9IGNhdGNoIHtcbiAgICAgIHJldHVybiB0aGlzLm1lbVN0b3JhZ2UuZGVsZXRlQ29udGFjdChpZCk7XG4gICAgfVxuICB9XG5cbiAgLy8gU3R1YiBpbXBsZW1lbnRhdGlvbnMgZm9yIHJlbWFpbmluZyBpbnRlcmZhY2UgbWV0aG9kcyAtIGFkZCBhbGwgb3RoZXIgcmVxdWlyZWQgbWV0aG9kc1xuICBhc3luYyBnZXREb2N1bWVudHMoKTogUHJvbWlzZTxEb2N1bWVudFtdPiB7XG4gICAgcmV0dXJuIFtdO1xuICB9XG4gIGFzeW5jIGdldERvY3VtZW50KGlkOiBzdHJpbmcpOiBQcm9taXNlPERvY3VtZW50IHwgdW5kZWZpbmVkPiB7XG4gICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgfVxuICBhc3luYyBjcmVhdGVEb2N1bWVudChkb2M6IEluc2VydERvY3VtZW50KTogUHJvbWlzZTxEb2N1bWVudD4ge1xuICAgIHRocm93IG5ldyBFcnJvcignTm90IGltcGxlbWVudGVkIGluIGZhbGxiYWNrJyk7XG4gIH1cbiAgYXN5bmMgdXBkYXRlRG9jdW1lbnQoaWQ6IHN0cmluZywgdXBkYXRlczogUGFydGlhbDxEb2N1bWVudD4pOiBQcm9taXNlPERvY3VtZW50IHwgdW5kZWZpbmVkPiB7XG4gICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgfVxuICBhc3luYyBkZWxldGVEb2N1bWVudChpZDogc3RyaW5nKTogUHJvbWlzZTxib29sZWFuPiB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG4gIGFzeW5jIGdldERvY3VtZW50c0J5QnVpbGRpbmcoYnVpbGRpbmdJZDogc3RyaW5nKTogUHJvbWlzZTxEb2N1bWVudEJ1aWxkaW5nW10+IHtcbiAgICByZXR1cm4gW107XG4gIH1cbiAgYXN5bmMgY3JlYXRlRG9jdW1lbnRCdWlsZGluZyhkb2M6IEluc2VydERvY3VtZW50QnVpbGRpbmcpOiBQcm9taXNlPERvY3VtZW50QnVpbGRpbmc+IHtcbiAgICAvLyBOb3RlOiBFeHRlcm5hbCBzdG9yYWdlIGludGVncmF0aW9uIHJlbW92ZWRcbiAgICBjb25zdCBpZCA9IHJhbmRvbVVVSUQoKTtcbiAgICByZXR1cm4ge1xuICAgICAgLi4uZG9jLFxuICAgICAgaWQsXG4gICAgICBjcmVhdGVkQXQ6IG5ldyBEYXRlKCksXG4gICAgICB1cGRhdGVkQXQ6IG5ldyBEYXRlKCksXG4gICAgfTtcbiAgfVxuICBhc3luYyBkZWxldGVEb2N1bWVudEJ1aWxkaW5nKGRvY3VtZW50SWQ6IHN0cmluZywgYnVpbGRpbmdJZDogc3RyaW5nKTogUHJvbWlzZTxib29sZWFuPiB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG4gIGFzeW5jIGdldERvY3VtZW50c0J5UmVzaWRlbnQocmVzaWRlbnRJZDogc3RyaW5nKTogUHJvbWlzZTxEb2N1bWVudFJlc2lkZW50W10+IHtcbiAgICByZXR1cm4gW107XG4gIH1cbiAgYXN5bmMgY3JlYXRlRG9jdW1lbnRSZXNpZGVudChkb2M6IEluc2VydERvY3VtZW50UmVzaWRlbnQpOiBQcm9taXNlPERvY3VtZW50UmVzaWRlbnQ+IHtcbiAgICAvLyBOb3RlOiBFeHRlcm5hbCBzdG9yYWdlIGludGVncmF0aW9uIHJlbW92ZWRcbiAgICBjb25zdCBpZCA9IHJhbmRvbVVVSUQoKTtcbiAgICByZXR1cm4ge1xuICAgICAgLi4uZG9jLFxuICAgICAgaWQsXG4gICAgICBjcmVhdGVkQXQ6IG5ldyBEYXRlKCksXG4gICAgICB1cGRhdGVkQXQ6IG5ldyBEYXRlKCksXG4gICAgfTtcbiAgfVxuICBhc3luYyBkZWxldGVEb2N1bWVudFJlc2lkZW50KGRvY3VtZW50SWQ6IHN0cmluZywgcmVzaWRlbnRJZDogc3RyaW5nKTogUHJvbWlzZTxib29sZWFuPiB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG4gIGFzeW5jIGdldFBpbGxhcnMoKTogUHJvbWlzZTxQaWxsYXJbXT4ge1xuICAgIHJldHVybiBbXTtcbiAgfVxuICBhc3luYyBnZXRQaWxsYXIoaWQ6IHN0cmluZyk6IFByb21pc2U8UGlsbGFyIHwgdW5kZWZpbmVkPiB7XG4gICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgfVxuICBhc3luYyBjcmVhdGVQaWxsYXIocGlsbGFyOiBJbnNlcnRQaWxsYXIpOiBQcm9taXNlPFBpbGxhcj4ge1xuICAgIHRocm93IG5ldyBFcnJvcignTm90IGltcGxlbWVudGVkIGluIGZhbGxiYWNrJyk7XG4gIH1cbiAgYXN5bmMgdXBkYXRlUGlsbGFyKGlkOiBzdHJpbmcsIHVwZGF0ZXM6IFBhcnRpYWw8UGlsbGFyPik6IFByb21pc2U8UGlsbGFyIHwgdW5kZWZpbmVkPiB7XG4gICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgfVxuICBhc3luYyBnZXRXb3Jrc3BhY2VTdGF0dXNlcygpOiBQcm9taXNlPFdvcmtzcGFjZVN0YXR1c1tdPiB7XG4gICAgcmV0dXJuIFtdO1xuICB9XG4gIGFzeW5jIGdldFdvcmtzcGFjZVN0YXR1cyhpZDogc3RyaW5nKTogUHJvbWlzZTxXb3Jrc3BhY2VTdGF0dXMgfCB1bmRlZmluZWQ+IHtcbiAgICByZXR1cm4gdW5kZWZpbmVkO1xuICB9XG4gIGFzeW5jIGNyZWF0ZVdvcmtzcGFjZVN0YXR1cyhzdGF0dXM6IEluc2VydFdvcmtzcGFjZVN0YXR1cyk6IFByb21pc2U8V29ya3NwYWNlU3RhdHVzPiB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdOb3QgaW1wbGVtZW50ZWQgaW4gZmFsbGJhY2snKTtcbiAgfVxuICBhc3luYyB1cGRhdGVXb3Jrc3BhY2VTdGF0dXMoXG4gICAgaWQ6IHN0cmluZyxcbiAgICB1cGRhdGVzOiBQYXJ0aWFsPFdvcmtzcGFjZVN0YXR1cz5cbiAgKTogUHJvbWlzZTxXb3Jrc3BhY2VTdGF0dXMgfCB1bmRlZmluZWQ+IHtcbiAgICByZXR1cm4gdW5kZWZpbmVkO1xuICB9XG4gIGFzeW5jIGdldFF1YWxpdHlNZXRyaWNzKCk6IFByb21pc2U8UXVhbGl0eU1ldHJpY1tdPiB7XG4gICAgcmV0dXJuIFtdO1xuICB9XG4gIGFzeW5jIGdldFF1YWxpdHlNZXRyaWMoaWQ6IHN0cmluZyk6IFByb21pc2U8UXVhbGl0eU1ldHJpYyB8IHVuZGVmaW5lZD4ge1xuICAgIHJldHVybiB1bmRlZmluZWQ7XG4gIH1cbiAgYXN5bmMgY3JlYXRlUXVhbGl0eU1ldHJpYyhtZXRyaWM6IEluc2VydFF1YWxpdHlNZXRyaWMpOiBQcm9taXNlPFF1YWxpdHlNZXRyaWM+IHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ05vdCBpbXBsZW1lbnRlZCBpbiBmYWxsYmFjaycpO1xuICB9XG4gIGFzeW5jIHVwZGF0ZVF1YWxpdHlNZXRyaWMoXG4gICAgaWQ6IHN0cmluZyxcbiAgICB1cGRhdGVzOiBQYXJ0aWFsPFF1YWxpdHlNZXRyaWM+XG4gICk6IFByb21pc2U8UXVhbGl0eU1ldHJpYyB8IHVuZGVmaW5lZD4ge1xuICAgIHJldHVybiB1bmRlZmluZWQ7XG4gIH1cbiAgYXN5bmMgZ2V0RnJhbWV3b3JrQ29uZmlndXJhdGlvbnMoKTogUHJvbWlzZTxGcmFtZXdvcmtDb25maWd1cmF0aW9uW10+IHtcbiAgICByZXR1cm4gW107XG4gIH1cbiAgYXN5bmMgZ2V0RnJhbWV3b3JrQ29uZmlndXJhdGlvbihpZDogc3RyaW5nKTogUHJvbWlzZTxGcmFtZXdvcmtDb25maWd1cmF0aW9uIHwgdW5kZWZpbmVkPiB7XG4gICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgfVxuICBhc3luYyBjcmVhdGVGcmFtZXdvcmtDb25maWd1cmF0aW9uKFxuICAgIGNvbmZpZzogSW5zZXJ0RnJhbWV3b3JrQ29uZmlndXJhdGlvblxuICApOiBQcm9taXNlPEZyYW1ld29ya0NvbmZpZ3VyYXRpb24+IHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ05vdCBpbXBsZW1lbnRlZCBpbiBmYWxsYmFjaycpO1xuICB9XG4gIGFzeW5jIHVwZGF0ZUZyYW1ld29ya0NvbmZpZ3VyYXRpb24oXG4gICAgaWQ6IHN0cmluZyxcbiAgICB1cGRhdGVzOiBQYXJ0aWFsPEZyYW1ld29ya0NvbmZpZ3VyYXRpb24+XG4gICk6IFByb21pc2U8RnJhbWV3b3JrQ29uZmlndXJhdGlvbiB8IHVuZGVmaW5lZD4ge1xuICAgIHJldHVybiB1bmRlZmluZWQ7XG4gIH1cbiAgYXN5bmMgZ2V0SW1wcm92ZW1lbnRTdWdnZXN0aW9ucygpOiBQcm9taXNlPEltcHJvdmVtZW50U3VnZ2VzdGlvbltdPiB7XG4gICAgcmV0dXJuIFtdO1xuICB9XG4gIGFzeW5jIGdldEltcHJvdmVtZW50U3VnZ2VzdGlvbihpZDogc3RyaW5nKTogUHJvbWlzZTxJbXByb3ZlbWVudFN1Z2dlc3Rpb24gfCB1bmRlZmluZWQ+IHtcbiAgICByZXR1cm4gdW5kZWZpbmVkO1xuICB9XG4gIGFzeW5jIGNyZWF0ZUltcHJvdmVtZW50U3VnZ2VzdGlvbihcbiAgICBzdWdnZXN0aW9uOiBJbnNlcnRJbXByb3ZlbWVudFN1Z2dlc3Rpb25cbiAgKTogUHJvbWlzZTxJbXByb3ZlbWVudFN1Z2dlc3Rpb24+IHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ05vdCBpbXBsZW1lbnRlZCBpbiBmYWxsYmFjaycpO1xuICB9XG4gIGFzeW5jIHVwZGF0ZUltcHJvdmVtZW50U3VnZ2VzdGlvbihcbiAgICBpZDogc3RyaW5nLFxuICAgIHVwZGF0ZXM6IFBhcnRpYWw8SW1wcm92ZW1lbnRTdWdnZXN0aW9uPlxuICApOiBQcm9taXNlPEltcHJvdmVtZW50U3VnZ2VzdGlvbiB8IHVuZGVmaW5lZD4ge1xuICAgIHJldHVybiB1bmRlZmluZWQ7XG4gIH1cbiAgYXN5bmMgZ2V0RmVhdHVyZXMoKTogUHJvbWlzZTxGZWF0dXJlW10+IHtcbiAgICByZXR1cm4gW107XG4gIH1cbiAgYXN5bmMgZ2V0RmVhdHVyZShpZDogc3RyaW5nKTogUHJvbWlzZTxGZWF0dXJlIHwgdW5kZWZpbmVkPiB7XG4gICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgfVxuICBhc3luYyBjcmVhdGVGZWF0dXJlKGZlYXR1cmU6IEluc2VydEZlYXR1cmUpOiBQcm9taXNlPEZlYXR1cmU+IHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ05vdCBpbXBsZW1lbnRlZCBpbiBmYWxsYmFjaycpO1xuICB9XG4gIGFzeW5jIHVwZGF0ZUZlYXR1cmUoaWQ6IHN0cmluZywgdXBkYXRlczogUGFydGlhbDxGZWF0dXJlPik6IFByb21pc2U8RmVhdHVyZSB8IHVuZGVmaW5lZD4ge1xuICAgIHJldHVybiB1bmRlZmluZWQ7XG4gIH1cbiAgYXN5bmMgZ2V0QWN0aW9uYWJsZUl0ZW1zKCk6IFByb21pc2U8QWN0aW9uYWJsZUl0ZW1bXT4ge1xuICAgIHJldHVybiBbXTtcbiAgfVxuICBhc3luYyBnZXRBY3Rpb25hYmxlSXRlbShpZDogc3RyaW5nKTogUHJvbWlzZTxBY3Rpb25hYmxlSXRlbSB8IHVuZGVmaW5lZD4ge1xuICAgIHJldHVybiB1bmRlZmluZWQ7XG4gIH1cbiAgYXN5bmMgY3JlYXRlQWN0aW9uYWJsZUl0ZW0oaXRlbTogSW5zZXJ0QWN0aW9uYWJsZUl0ZW0pOiBQcm9taXNlPEFjdGlvbmFibGVJdGVtPiB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdOb3QgaW1wbGVtZW50ZWQgaW4gZmFsbGJhY2snKTtcbiAgfVxuICBhc3luYyB1cGRhdGVBY3Rpb25hYmxlSXRlbShcbiAgICBpZDogc3RyaW5nLFxuICAgIHVwZGF0ZXM6IFBhcnRpYWw8QWN0aW9uYWJsZUl0ZW0+XG4gICk6IFByb21pc2U8QWN0aW9uYWJsZUl0ZW0gfCB1bmRlZmluZWQ+IHtcbiAgICByZXR1cm4gdW5kZWZpbmVkO1xuICB9XG4gIGFzeW5jIGdldEludml0YXRpb25zKCk6IFByb21pc2U8SW52aXRhdGlvbltdPiB7XG4gICAgcmV0dXJuIFtdO1xuICB9XG4gIGFzeW5jIGdldEludml0YXRpb24oaWQ6IHN0cmluZyk6IFByb21pc2U8SW52aXRhdGlvbiB8IHVuZGVmaW5lZD4ge1xuICAgIHJldHVybiB1bmRlZmluZWQ7XG4gIH1cbiAgYXN5bmMgZ2V0SW52aXRhdGlvbkJ5VG9rZW4odG9rZW46IHN0cmluZyk6IFByb21pc2U8SW52aXRhdGlvbiB8IHVuZGVmaW5lZD4ge1xuICAgIHJldHVybiB1bmRlZmluZWQ7XG4gIH1cbiAgYXN5bmMgY3JlYXRlSW52aXRhdGlvbihpbnZpdGF0aW9uOiBJbnNlcnRJbnZpdGF0aW9uKTogUHJvbWlzZTxJbnZpdGF0aW9uPiB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdOb3QgaW1wbGVtZW50ZWQgaW4gZmFsbGJhY2snKTtcbiAgfVxuICBhc3luYyB1cGRhdGVJbnZpdGF0aW9uKFxuICAgIGlkOiBzdHJpbmcsXG4gICAgdXBkYXRlczogUGFydGlhbDxJbnZpdGF0aW9uPlxuICApOiBQcm9taXNlPEludml0YXRpb24gfCB1bmRlZmluZWQ+IHtcbiAgICByZXR1cm4gdW5kZWZpbmVkO1xuICB9XG4gIGFzeW5jIGRlbGV0ZUludml0YXRpb24oaWQ6IHN0cmluZyk6IFByb21pc2U8Ym9vbGVhbj4ge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuICBhc3luYyBnZXRQZXJtaXNzaW9ucygpOiBQcm9taXNlPFBlcm1pc3Npb25bXT4ge1xuICAgIHJldHVybiBbXTtcbiAgfVxuICBhc3luYyBnZXRQZXJtaXNzaW9uKGlkOiBzdHJpbmcpOiBQcm9taXNlPFBlcm1pc3Npb24gfCB1bmRlZmluZWQ+IHtcbiAgICByZXR1cm4gdW5kZWZpbmVkO1xuICB9XG4gIGFzeW5jIGdldFJvbGVQZXJtaXNzaW9ucyhyb2xlOiBzdHJpbmcpOiBQcm9taXNlPFJvbGVQZXJtaXNzaW9uW10+IHtcbiAgICByZXR1cm4gW107XG4gIH1cbiAgYXN5bmMgZ2V0VXNlclBlcm1pc3Npb25zKHVzZXJJZDogc3RyaW5nKTogUHJvbWlzZTxVc2VyUGVybWlzc2lvbltdPiB7XG4gICAgcmV0dXJuIFtdO1xuICB9XG4gIGFzeW5jIGhhc1Blcm1pc3Npb24odXNlcklkOiBzdHJpbmcsIHBlcm1pc3Npb246IHN0cmluZyk6IFByb21pc2U8Ym9vbGVhbj4ge1xuICAgIHJldHVybiB0cnVlO1xuICB9IC8vIEFkbWluIGZhbGxiYWNrXG4gIGFzeW5jIGdldEJ1Z3MoKTogUHJvbWlzZTxCdWdbXT4ge1xuICAgIHJldHVybiBbXTtcbiAgfVxuICBhc3luYyBnZXRCdWcoaWQ6IHN0cmluZyk6IFByb21pc2U8QnVnIHwgdW5kZWZpbmVkPiB7XG4gICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgfVxuICBhc3luYyBjcmVhdGVCdWcoYnVnOiBJbnNlcnRCdWcpOiBQcm9taXNlPEJ1Zz4ge1xuICAgIHRocm93IG5ldyBFcnJvcignTm90IGltcGxlbWVudGVkIGluIGZhbGxiYWNrJyk7XG4gIH1cbiAgYXN5bmMgdXBkYXRlQnVnKGlkOiBzdHJpbmcsIHVwZGF0ZXM6IFBhcnRpYWw8QnVnPik6IFByb21pc2U8QnVnIHwgdW5kZWZpbmVkPiB7XG4gICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgfVxuICBhc3luYyBnZXRGZWF0dXJlUmVxdWVzdHMoKTogUHJvbWlzZTxGZWF0dXJlUmVxdWVzdFtdPiB7XG4gICAgcmV0dXJuIFtdO1xuICB9XG4gIGFzeW5jIGdldEZlYXR1cmVSZXF1ZXN0KGlkOiBzdHJpbmcpOiBQcm9taXNlPEZlYXR1cmVSZXF1ZXN0IHwgdW5kZWZpbmVkPiB7XG4gICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgfVxuICBhc3luYyBjcmVhdGVGZWF0dXJlUmVxdWVzdChyZXF1ZXN0OiBJbnNlcnRGZWF0dXJlUmVxdWVzdCk6IFByb21pc2U8RmVhdHVyZVJlcXVlc3Q+IHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ05vdCBpbXBsZW1lbnRlZCBpbiBmYWxsYmFjaycpO1xuICB9XG4gIGFzeW5jIHVwZGF0ZUZlYXR1cmVSZXF1ZXN0KFxuICAgIGlkOiBzdHJpbmcsXG4gICAgdXBkYXRlczogUGFydGlhbDxGZWF0dXJlUmVxdWVzdD5cbiAgKTogUHJvbWlzZTxGZWF0dXJlUmVxdWVzdCB8IHVuZGVmaW5lZD4ge1xuICAgIHJldHVybiB1bmRlZmluZWQ7XG4gIH1cbiAgYXN5bmMgYWRkRmVhdHVyZVJlcXVlc3RVcHZvdGUoXG4gICAgZmVhdHVyZVJlcXVlc3RJZDogc3RyaW5nLFxuICAgIHVzZXJJZDogc3RyaW5nXG4gICk6IFByb21pc2U8eyBzdWNjZXNzOiBib29sZWFuOyBtZXNzYWdlOiBzdHJpbmc7IGRhdGE/OiBhbnkgfT4ge1xuICAgIHJldHVybiB7IHN1Y2Nlc3M6IHRydWUsIG1lc3NhZ2U6ICdGYWxsYmFjayBtb2RlJyB9O1xuICB9XG4gIGFzeW5jIHJlbW92ZUZlYXR1cmVSZXF1ZXN0VXB2b3RlKFxuICAgIGZlYXR1cmVSZXF1ZXN0SWQ6IHN0cmluZyxcbiAgICB1c2VySWQ6IHN0cmluZ1xuICApOiBQcm9taXNlPHsgc3VjY2VzczogYm9vbGVhbjsgbWVzc2FnZTogc3RyaW5nOyBkYXRhPzogYW55IH0+IHtcbiAgICByZXR1cm4geyBzdWNjZXNzOiB0cnVlLCBtZXNzYWdlOiAnRmFsbGJhY2sgbW9kZScgfTtcbiAgfVxuXG5cblxuXG59XG5cbi8vIFVzZSBvcHRpbWl6ZWQgZGF0YWJhc2Ugc3RvcmFnZSBmb3IgcHJvZHVjdGlvblxuZXhwb3J0IGNvbnN0IHN0b3JhZ2UgPSBuZXcgT3B0aW1pemVkRGF0YWJhc2VTdG9yYWdlKCk7XG4iXSwidmVyc2lvbiI6M30=