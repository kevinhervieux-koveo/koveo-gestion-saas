85a56dd6343e760ff6a8d43df5a0757f
"use strict";
var __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {
    if (k2 === undefined) k2 = k;
    var desc = Object.getOwnPropertyDescriptor(m, k);
    if (!desc || ("get" in desc ? !m.__esModule : desc.writable || desc.configurable)) {
      desc = { enumerable: true, get: function() { return m[k]; } };
    }
    Object.defineProperty(o, k2, desc);
}) : (function(o, m, k, k2) {
    if (k2 === undefined) k2 = k;
    o[k2] = m[k];
}));
var __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {
    Object.defineProperty(o, "default", { enumerable: true, value: v });
}) : function(o, v) {
    o["default"] = v;
});
var __importStar = (this && this.__importStar) || (function () {
    var ownKeys = function(o) {
        ownKeys = Object.getOwnPropertyNames || function (o) {
            var ar = [];
            for (var k in o) if (Object.prototype.hasOwnProperty.call(o, k)) ar[ar.length] = k;
            return ar;
        };
        return ownKeys(o);
    };
    return function (mod) {
        if (mod && mod.__esModule) return mod;
        var result = {};
        if (mod != null) for (var k = ownKeys(mod), i = 0; i < k.length; i++) if (k[i] !== "default") __createBinding(result, mod, k[i]);
        __setModuleDefault(result, mod);
        return result;
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
const jsx_runtime_1 = require("react/jsx-runtime");
/**
 * Comprehensive test suite to ensure all pages in the app work correctly
 * and prevent issues like missing imports and authentication failures
 */
const react_1 = require("@testing-library/react");
const react_query_1 = require("@tanstack/react-query");
const memory_location_1 = require("wouter/memory-location");
const use_auth_1 = require("@/hooks/use-auth");
const use_language_1 = require("@/hooks/use-language");
require("@testing-library/jest-dom");
// Mock the auth API responses
global.fetch = jest.fn();
// Test data - all pages in the app
const allPages = [
    // Public pages
    { path: '/', name: 'Home' },
    { path: '/features', name: 'Features' },
    { path: '/pricing', name: 'Pricing' },
    { path: '/security', name: 'Security' },
    { path: '/story', name: 'Story' },
    { path: '/privacy-policy', name: 'Privacy Policy' },
    { path: '/terms-of-service', name: 'Terms of Service' },
    // Auth pages
    { path: '/login', name: 'Login' },
    { path: '/forgot-password', name: 'Forgot Password' },
    { path: '/reset-password', name: 'Reset Password' },
    // Dashboard pages (require auth)
    { path: '/dashboard', name: 'Dashboard' },
    { path: '/dashboard/calendar', name: 'Calendar' },
    // Admin pages (require admin role)
    { path: '/admin/organizations', name: 'Admin Organizations' },
    { path: '/admin/compliance', name: 'Admin Compliance' },
    { path: '/admin/documentation', name: 'Admin Documentation' },
    { path: '/admin/permissions', name: 'Admin Permissions' },
    { path: '/admin/pillars', name: 'Admin Pillars' },
    { path: '/admin/quality', name: 'Admin Quality' },
    { path: '/admin/roadmap', name: 'Admin Roadmap' },
    { path: '/admin/suggestions', name: 'Admin Suggestions' },
    // Manager pages (require manager role)
    { path: '/manager/bills', name: 'Manager Bills' },
    { path: '/manager/budget', name: 'Manager Budget' },
    { path: '/manager/buildings', name: 'Manager Buildings' },
    { path: '/manager/common-spaces-stats', name: 'Manager Common Spaces Stats' },
    { path: '/manager/demands', name: 'Manager Demands' },
    { path: '/manager/invoices', name: 'Manager Invoices' },
    { path: '/manager/residences', name: 'Manager Residences' },
    { path: '/manager/user-management', name: 'Manager User Management' },
    // Resident pages (require resident role)
    { path: '/residents/dashboard', name: 'Residents Dashboard' },
    { path: '/residents/building', name: 'Residents Building' },
    { path: '/residents/common-spaces', name: 'Residents Common Spaces' },
    { path: '/residents/my-calendar', name: 'Residents My Calendar' },
    { path: '/residents/residence', name: 'Residents Residence' },
    // Settings pages
    { path: '/settings/settings', name: 'Settings' },
    { path: '/settings/bug-reports', name: 'Bug Reports' },
    { path: '/settings/idea-box', name: 'Idea Box' },
];
// Import all page components dynamically
const pageComponents = {
    '/': () => Promise.resolve().then(() => __importStar(require('@/pages/home'))),
    '/features': () => Promise.resolve().then(() => __importStar(require('@/pages/features'))),
    '/pricing': () => Promise.resolve().then(() => __importStar(require('@/pages/pricing'))),
    '/security': () => Promise.resolve().then(() => __importStar(require('@/pages/security'))),
    '/story': () => Promise.resolve().then(() => __importStar(require('@/pages/story'))),
    '/privacy-policy': () => Promise.resolve().then(() => __importStar(require('@/pages/privacy-policy'))),
    '/terms-of-service': () => Promise.resolve().then(() => __importStar(require('@/pages/terms-of-service'))),
    '/login': () => Promise.resolve().then(() => __importStar(require('@/pages/auth/login'))),
    '/forgot-password': () => Promise.resolve().then(() => __importStar(require('@/pages/auth/forgot-password'))),
    '/reset-password': () => Promise.resolve().then(() => __importStar(require('@/pages/auth/reset-password'))),
    '/dashboard': () => Promise.resolve().then(() => __importStar(require('@/pages/dashboard'))),
    '/dashboard/calendar': () => Promise.resolve().then(() => __importStar(require('@/pages/dashboard/calendar'))),
    '/admin/organizations': () => Promise.resolve().then(() => __importStar(require('@/pages/admin/organizations'))),
    '/admin/compliance': () => Promise.resolve().then(() => __importStar(require('@/pages/admin/compliance'))),
    '/admin/documentation': () => Promise.resolve().then(() => __importStar(require('@/pages/admin/documentation'))),
    '/admin/permissions': () => Promise.resolve().then(() => __importStar(require('@/pages/admin/permissions'))),
    '/admin/pillars': () => Promise.resolve().then(() => __importStar(require('@/pages/admin/pillars'))),
    '/admin/quality': () => Promise.resolve().then(() => __importStar(require('@/pages/admin/quality'))),
    '/admin/roadmap': () => Promise.resolve().then(() => __importStar(require('@/pages/admin/roadmap'))),
    '/admin/suggestions': () => Promise.resolve().then(() => __importStar(require('@/pages/admin/suggestions'))),
    '/manager/bills': () => Promise.resolve().then(() => __importStar(require('@/pages/manager/bills'))),
    '/manager/budget': () => Promise.resolve().then(() => __importStar(require('@/pages/manager/budget'))),
    '/manager/buildings': () => Promise.resolve().then(() => __importStar(require('@/pages/manager/buildings'))),
    '/manager/common-spaces-stats': () => Promise.resolve().then(() => __importStar(require('@/pages/manager/common-spaces-stats'))),
    '/manager/demands': () => Promise.resolve().then(() => __importStar(require('@/pages/manager/demands'))),
    '/manager/invoices': () => Promise.resolve().then(() => __importStar(require('@/pages/manager/invoices'))),
    '/manager/residences': () => Promise.resolve().then(() => __importStar(require('@/pages/manager/residences'))),
    '/manager/user-management': () => Promise.resolve().then(() => __importStar(require('@/pages/manager/user-management'))),
    '/residents/dashboard': () => Promise.resolve().then(() => __importStar(require('@/pages/residents/dashboard'))),
    '/residents/building': () => Promise.resolve().then(() => __importStar(require('@/pages/residents/building'))),
    '/residents/common-spaces': () => Promise.resolve().then(() => __importStar(require('@/pages/residents/common-spaces'))),
    '/residents/my-calendar': () => Promise.resolve().then(() => __importStar(require('@/pages/residents/my-calendar'))),
    '/residents/residence': () => Promise.resolve().then(() => __importStar(require('@/pages/residents/residence'))),
    '/settings/settings': () => Promise.resolve().then(() => __importStar(require('@/pages/settings/settings'))),
    '/settings/bug-reports': () => Promise.resolve().then(() => __importStar(require('@/pages/settings/bug-reports'))),
    '/settings/idea-box': () => Promise.resolve().then(() => __importStar(require('@/pages/settings/idea-box'))),
};
// Helper to create test providers
const TestWrapper = ({ children, mockUser = null }) => {
    const queryClient = new react_query_1.QueryClient({
        defaultOptions: {
            queries: {
                retry: false,
                gcTime: 0,
            },
        },
    });
    // Mock auth API response
    const mockFetch = global.fetch;
    if (mockUser) {
        mockFetch.mockResolvedValueOnce({
            ok: true,
            status: 200,
            json: () => Promise.resolve(mockUser),
        });
    }
    else {
        mockFetch.mockResolvedValueOnce({
            ok: false,
            status: 401,
            statusText: 'Unauthorized',
            json: () => Promise.resolve({ error: 'Unauthorized' }),
        });
    }
    return ((0, jsx_runtime_1.jsx)(react_query_1.QueryClientProvider, { client: queryClient, children: (0, jsx_runtime_1.jsx)(use_language_1.LanguageProvider, { children: (0, jsx_runtime_1.jsx)(use_auth_1.AuthProvider, { children: (0, jsx_runtime_1.jsx)(memory_location_1.MemoryRouter, { children: children }) }) }) }));
};
describe('All Pages Integrity Tests', () => {
    beforeEach(() => {
        jest.clearAllMocks();
        // Reset console.error to catch React errors
        jest.spyOn(console, 'error').mockImplementation(() => { });
    });
    afterEach(() => {
        jest.restoreAllMocks();
    });
    describe('Public Pages', () => {
        const publicPages = allPages.filter(page => ['/', '/features', '/pricing', '/security', '/story', '/privacy-policy', '/terms-of-service'].includes(page.path));
        it.each(publicPages)('should render $name page without errors', async ({ path, name }) => {
            const mockFetch = global.fetch;
            mockFetch.mockResolvedValue({
                ok: false,
                status: 401,
                statusText: 'Unauthorized',
                json: () => Promise.resolve({ error: 'Unauthorized' }),
            });
            let Component;
            try {
                const module = await pageComponents[path]?.();
                Component = module?.default;
            }
            catch (error) {
                throw new Error(`Failed to import component for ${name} (${path}): ${error}`);
            }
            if (!Component) {
                throw new Error(`No component found for ${name} (${path})`);
            }
            let renderError;
            try {
                (0, react_1.render)((0, jsx_runtime_1.jsx)(TestWrapper, { children: (0, jsx_runtime_1.jsx)(Component, {}) }));
            }
            catch (error) {
                renderError = error;
            }
            // Check for render errors
            expect(renderError).toBeUndefined();
            // Check for console errors (like missing imports)
            const consoleSpy = jest.spyOn(console, 'error');
            expect(consoleSpy).not.toHaveBeenCalledWith(expect.stringMatching(/ReferenceError.*is not defined/));
        });
    });
    describe('Authentication Pages', () => {
        const authPages = allPages.filter(page => ['/login', '/forgot-password', '/reset-password'].includes(page.path));
        it.each(authPages)('should render $name page without errors', async ({ path, name }) => {
            const mockFetch = global.fetch;
            mockFetch.mockResolvedValue({
                ok: false,
                status: 401,
                statusText: 'Unauthorized',
                json: () => Promise.resolve({ error: 'Unauthorized' }),
            });
            let Component;
            try {
                const module = await pageComponents[path]?.();
                Component = module?.default;
            }
            catch (error) {
                throw new Error(`Failed to import component for ${name} (${path}): ${error}`);
            }
            if (!Component) {
                throw new Error(`No component found for ${name} (${path})`);
            }
            expect(() => {
                (0, react_1.render)((0, jsx_runtime_1.jsx)(TestWrapper, { children: (0, jsx_runtime_1.jsx)(Component, {}) }));
            }).not.toThrow();
        });
    });
    describe('Protected Pages with Authentication', () => {
        const protectedPages = allPages.filter(page => page.path.startsWith('/dashboard') ||
            page.path.startsWith('/admin') ||
            page.path.startsWith('/manager') ||
            page.path.startsWith('/residents') ||
            page.path.startsWith('/settings'));
        const mockUsers = {
            admin: { id: '1', email: 'admin@test.com', role: 'admin', firstName: 'Admin', lastName: 'User' },
            manager: { id: '2', email: 'manager@test.com', role: 'manager', firstName: 'Manager', lastName: 'User' },
            resident: { id: '3', email: 'resident@test.com', role: 'resident', firstName: 'Resident', lastName: 'User' }
        };
        it.each(protectedPages)('should render $name page with proper authentication', async ({ path, name }) => {
            // Determine required role based on path
            let mockUser = mockUsers.admin; // Default to admin
            if (path.startsWith('/manager'))
                mockUser = mockUsers.manager;
            if (path.startsWith('/residents'))
                mockUser = mockUsers.resident;
            let Component;
            try {
                const module = await pageComponents[path]?.();
                Component = module?.default;
            }
            catch (error) {
                throw new Error(`Failed to import component for ${name} (${path}): ${error}`);
            }
            if (!Component) {
                throw new Error(`No component found for ${name} (${path})`);
            }
            expect(() => {
                (0, react_1.render)((0, jsx_runtime_1.jsx)(TestWrapper, { mockUser: mockUser, children: (0, jsx_runtime_1.jsx)(Component, {}) }));
            }).not.toThrow();
        });
    });
    describe('Import Validation', () => {
        it('should not have missing lucide-react imports', async () => {
            const pages = [
                '/privacy-policy',
                '/home',
                '/features',
                '/pricing',
                '/security',
                '/story',
                '/terms-of-service'
            ];
            for (const path of pages) {
                let Component;
                try {
                    const module = await pageComponents[path]?.();
                    Component = module?.default;
                }
                catch (error) {
                    throw new Error(`Failed to import component for ${path}: ${error}`);
                }
                if (Component) {
                    // Test that component can be rendered without import errors
                    expect(() => {
                        (0, react_1.render)((0, jsx_runtime_1.jsx)(TestWrapper, { children: (0, jsx_runtime_1.jsx)(Component, {}) }));
                    }).not.toThrow();
                    // Check that no ReferenceError is thrown for missing lucide icons
                    const consoleSpy = jest.spyOn(console, 'error');
                    expect(consoleSpy).not.toHaveBeenCalledWith(expect.stringMatching(/ReferenceError.*ArrowRight is not defined/));
                    expect(consoleSpy).not.toHaveBeenCalledWith(expect.stringMatching(/ReferenceError.*ArrowLeft is not defined/));
                }
            }
        });
    });
    describe('API Integration', () => {
        it('should handle 401 responses gracefully on public pages', async () => {
            const publicPages = ['/', '/features', '/privacy-policy'];
            for (const path of publicPages) {
                const mockFetch = global.fetch;
                mockFetch.mockClear();
                // Mock 401 response
                mockFetch.mockResolvedValue({
                    ok: false,
                    status: 401,
                    statusText: 'Unauthorized',
                    json: () => Promise.resolve({ error: 'Unauthorized' }),
                });
                let Component;
                try {
                    const module = await pageComponents[path]?.();
                    Component = module?.default;
                }
                catch (error) {
                    continue; // Skip if component doesn't exist
                }
                if (Component) {
                    expect(() => {
                        (0, react_1.render)((0, jsx_runtime_1.jsx)(TestWrapper, { children: (0, jsx_runtime_1.jsx)(Component, {}) }));
                    }).not.toThrow();
                    // Wait for auth check to complete
                    await (0, react_1.waitFor)(() => {
                        expect(mockFetch).toHaveBeenCalledWith('/api/auth/user', {
                            credentials: 'include',
                        });
                    });
                }
            }
        });
    });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiL2hvbWUvcnVubmVyL3dvcmtzcGFjZS90ZXN0cy9wYWdlcy9hbGwtcGFnZXMtaW50ZWdyaXR5LnRlc3QudHN4IiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFBOzs7R0FHRztBQUVILGtEQUFpRTtBQUNqRSx1REFBeUU7QUFFekUsNERBQXNEO0FBQ3RELCtDQUFnRDtBQUNoRCx1REFBd0Q7QUFDeEQscUNBQW1DO0FBRW5DLDhCQUE4QjtBQUM5QixNQUFNLENBQUMsS0FBSyxHQUFHLElBQUksQ0FBQyxFQUFFLEVBQUUsQ0FBQztBQUV6QixtQ0FBbUM7QUFDbkMsTUFBTSxRQUFRLEdBQUc7SUFDZixlQUFlO0lBQ2YsRUFBRSxJQUFJLEVBQUUsR0FBRyxFQUFFLElBQUksRUFBRSxNQUFNLEVBQUU7SUFDM0IsRUFBRSxJQUFJLEVBQUUsV0FBVyxFQUFFLElBQUksRUFBRSxVQUFVLEVBQUU7SUFDdkMsRUFBRSxJQUFJLEVBQUUsVUFBVSxFQUFFLElBQUksRUFBRSxTQUFTLEVBQUU7SUFDckMsRUFBRSxJQUFJLEVBQUUsV0FBVyxFQUFFLElBQUksRUFBRSxVQUFVLEVBQUU7SUFDdkMsRUFBRSxJQUFJLEVBQUUsUUFBUSxFQUFFLElBQUksRUFBRSxPQUFPLEVBQUU7SUFDakMsRUFBRSxJQUFJLEVBQUUsaUJBQWlCLEVBQUUsSUFBSSxFQUFFLGdCQUFnQixFQUFFO0lBQ25ELEVBQUUsSUFBSSxFQUFFLG1CQUFtQixFQUFFLElBQUksRUFBRSxrQkFBa0IsRUFBRTtJQUV2RCxhQUFhO0lBQ2IsRUFBRSxJQUFJLEVBQUUsUUFBUSxFQUFFLElBQUksRUFBRSxPQUFPLEVBQUU7SUFDakMsRUFBRSxJQUFJLEVBQUUsa0JBQWtCLEVBQUUsSUFBSSxFQUFFLGlCQUFpQixFQUFFO0lBQ3JELEVBQUUsSUFBSSxFQUFFLGlCQUFpQixFQUFFLElBQUksRUFBRSxnQkFBZ0IsRUFBRTtJQUVuRCxpQ0FBaUM7SUFDakMsRUFBRSxJQUFJLEVBQUUsWUFBWSxFQUFFLElB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Q0FBQyxrQ0FBa0M7Z0JBQzlDLENBQUM7Z0JBRUQsSUFBSSxTQUFTLEVBQUUsQ0FBQztvQkFDZCxNQUFNLENBQUMsR0FBRyxFQUFFO3dCQUNWLElBQUEsY0FBTSxFQUNKLHVCQUFDLFdBQVcsY0FDVix1QkFBQyxTQUFTLEtBQUcsR0FDRCxDQUNmLENBQUM7b0JBQ0osQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLE9BQU8sRUFBRSxDQUFDO29CQUVqQixrQ0FBa0M7b0JBQ2xDLE1BQU0sSUFBQSxlQUFPLEVBQUMsR0FBRyxFQUFFO3dCQUNqQixNQUFNLENBQUMsU0FBUyxDQUFDLENBQUMsb0JBQW9CLENBQUMsZ0JBQWdCLEVBQUU7NEJBQ3ZELFdBQVcsRUFBRSxTQUFTO3lCQUN2QixDQUFDLENBQUM7b0JBQ0wsQ0FBQyxDQUFDLENBQUM7Z0JBQ0wsQ0FBQztZQUNILENBQUM7UUFDSCxDQUFDLENBQUMsQ0FBQztJQUNMLENBQUMsQ0FBQyxDQUFDO0FBQ0wsQ0FBQyxDQUFDLENBQUMiLCJuYW1lcyI6W10sInNvdXJjZXMiOlsiL2hvbWUvcnVubmVyL3dvcmtzcGFjZS90ZXN0cy9wYWdlcy9hbGwtcGFnZXMtaW50ZWdyaXR5LnRlc3QudHN4Il0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogQ29tcHJlaGVuc2l2ZSB0ZXN0IHN1aXRlIHRvIGVuc3VyZSBhbGwgcGFnZXMgaW4gdGhlIGFwcCB3b3JrIGNvcnJlY3RseVxuICogYW5kIHByZXZlbnQgaXNzdWVzIGxpa2UgbWlzc2luZyBpbXBvcnRzIGFuZCBhdXRoZW50aWNhdGlvbiBmYWlsdXJlc1xuICovXG5cbmltcG9ydCB7IHJlbmRlciwgc2NyZWVuLCB3YWl0Rm9yIH0gZnJvbSAnQHRlc3RpbmctbGlicmFyeS9yZWFjdCc7XG5pbXBvcnQgeyBRdWVyeUNsaWVudCwgUXVlcnlDbGllbnRQcm92aWRlciB9IGZyb20gJ0B0YW5zdGFjay9yZWFjdC1xdWVyeSc7XG5pbXBvcnQgeyBSb3V0ZXIsIFJvdXRlLCBTd2l0Y2ggfSBmcm9tICd3b3V0ZXInO1xuaW1wb3J0IHsgTWVtb3J5Um91dGVyIH0gZnJvbSAnd291dGVyL21lbW9yeS1sb2NhdGlvbic7XG5pbXBvcnQgeyBBdXRoUHJvdmlkZXIgfSBmcm9tICdAL2hvb2tzL3VzZS1hdXRoJztcbmltcG9ydCB7IExhbmd1YWdlUHJvdmlkZXIgfSBmcm9tICdAL2hvb2tzL3VzZS1sYW5ndWFnZSc7XG5pbXBvcnQgJ0B0ZXN0aW5nLWxpYnJhcnkvamVzdC1kb20nO1xuXG4vLyBNb2NrIHRoZSBhdXRoIEFQSSByZXNwb25zZXNcbmdsb2JhbC5mZXRjaCA9IGplc3QuZm4oKTtcblxuLy8gVGVzdCBkYXRhIC0gYWxsIHBhZ2VzIGluIHRoZSBhcHBcbmNvbnN0IGFsbFBhZ2VzID0gW1xuICAvLyBQdWJsaWMgcGFnZXNcbiAgeyBwYXRoOiAnLycsIG5hbWU6ICdIb21lJyB9LFxuICB7IHBhdGg6ICcvZmVhdHVyZXMnLCBuYW1lOiAnRmVhdHVyZXMnIH0sXG4gIHsgcGF0aDogJy9wcmljaW5nJywgbmFtZTogJ1ByaWNpbmcnIH0sXG4gIHsgcGF0aDogJy9zZWN1cml0eScsIG5hbWU6ICdTZWN1cml0eScgfSxcbiAgeyBwYXRoOiAnL3N0b3J5JywgbmFtZTogJ1N0b3J5JyB9LFxuICB7IHBhdGg6ICcvcHJpdmFjeS1wb2xpY3knLCBuYW1lOiAnUHJpdmFjeSBQb2xpY3knIH0sXG4gIHsgcGF0aDogJy90ZXJtcy1vZi1zZXJ2aWNlJywgbmFtZTogJ1Rlcm1zIG9mIFNlcnZpY2UnIH0sXG4gIFxuICAvLyBBdXRoIHBhZ2VzXG4gIHsgcGF0aDogJy9sb2dpbicsIG5hbWU6ICdMb2dpbicgfSxcbiAgeyBwYXRoOiAnL2ZvcmdvdC1wYXNzd29yZCcsIG5hbWU6ICdGb3Jnb3QgUGFzc3dvcmQnIH0sXG4gIHsgcGF0aDogJy9yZXNldC1wYXNzd29yZCcsIG5hbWU6ICdSZXNldCBQYXNzd29yZCcgfSxcbiAgXG4gIC8vIERhc2hib2FyZCBwYWdlcyAocmVxdWlyZSBhdXRoKVxuICB7IHBhdGg6ICcvZGFzaGJvYXJkJywgbmFtZTogJ0Rhc2hib2FyZCcgfSxcbiAgeyBwYXRoOiAnL2Rhc2hib2FyZC9jYWxlbmRhcicsIG5hbWU6ICdDYWxlbmRhcicgfSxcbiAgXG4gIC8vIEFkbWluIHBhZ2VzIChyZXF1aXJlIGFkbWluIHJvbGUpXG4gIHsgcGF0aDogJy9hZG1pbi9vcmdhbml6YXRpb25zJywgbmFtZTogJ0FkbWluIE9yZ2FuaXphdGlvbnMnIH0sXG4gIHsgcGF0aDogJy9hZG1pbi9jb21wbGlhbmNlJywgbmFtZTogJ0FkbWluIENvbXBsaWFuY2UnIH0sXG4gIHsgcGF0aDogJy9hZG1pbi9kb2N1bWVudGF0aW9uJywgbmFtZTogJ0FkbWluIERvY3VtZW50YXRpb24nIH0sXG4gIHsgcGF0aDogJy9hZG1pbi9wZXJtaXNzaW9ucycsIG5hbWU6ICdBZG1pbiBQZXJtaXNzaW9ucycgfSxcbiAgeyBwYXRoOiAnL2FkbWluL3BpbGxhcnMnLCBuYW1lOiAnQWRtaW4gUGlsbGFycycgfSxcbiAgeyBwYXRoOiAnL2FkbWluL3F1YWxpdHknLCBuYW1lOiAnQWRtaW4gUXVhbGl0eScgfSxcbiAgeyBwYXRoOiAnL2FkbWluL3JvYWRtYXAnLCBuYW1lOiAnQWRtaW4gUm9hZG1hcCcgfSxcbiAgeyBwYXRoOiAnL2FkbWluL3N1Z2dlc3Rpb25zJywgbmFtZTogJ0FkbWluIFN1Z2dlc3Rpb25zJyB9LFxuICBcbiAgLy8gTWFuYWdlciBwYWdlcyAocmVxdWlyZSBtYW5hZ2VyIHJvbGUpXG4gIHsgcGF0aDogJy9tYW5hZ2VyL2JpbGxzJywgbmFtZTogJ01hbmFnZXIgQmlsbHMnIH0sXG4gIHsgcGF0aDogJy9tYW5hZ2VyL2J1ZGdldCcsIG5hbWU6ICdNYW5hZ2VyIEJ1ZGdldCcgfSxcbiAgeyBwYXRoOiAnL21hbmFnZXIvYnVpbGRpbmdzJywgbmFtZTogJ01hbmFnZXIgQnVpbGRpbmdzJyB9LFxuICB7IHBhdGg6ICcvbWFuYWdlci9jb21tb24tc3BhY2VzLXN0YXRzJywgbmFtZTogJ01hbmFnZXIgQ29tbW9uIFNwYWNlcyBTdGF0cycgfSxcbiAgeyBwYXRoOiAnL21hbmFnZXIvZGVtYW5kcycsIG5hbWU6ICdNYW5hZ2VyIERlbWFuZHMnIH0sXG4gIHsgcGF0aDogJy9tYW5hZ2VyL2ludm9pY2VzJywgbmFtZTogJ01hbmFnZXIgSW52b2ljZXMnIH0sXG4gIHsgcGF0aDogJy9tYW5hZ2VyL3Jlc2lkZW5jZXMnLCBuYW1lOiAnTWFuYWdlciBSZXNpZGVuY2VzJyB9LFxuICB7IHBhdGg6ICcvbWFuYWdlci91c2VyLW1hbmFnZW1lbnQnLCBuYW1lOiAnTWFuYWdlciBVc2VyIE1hbmFnZW1lbnQnIH0sXG4gIFxuICAvLyBSZXNpZGVudCBwYWdlcyAocmVxdWlyZSByZXNpZGVudCByb2xlKVxuICB7IHBhdGg6ICcvcmVzaWRlbnRzL2Rhc2hib2FyZCcsIG5hbWU6ICdSZXNpZGVudHMgRGFzaGJvYXJkJyB9LFxuICB7IHBhdGg6ICcvcmVzaWRlbnRzL2J1aWxkaW5nJywgbmFtZTogJ1Jlc2lkZW50cyBCdWlsZGluZycgfSxcbiAgeyBwYXRoOiAnL3Jlc2lkZW50cy9jb21tb24tc3BhY2VzJywgbmFtZTogJ1Jlc2lkZW50cyBDb21tb24gU3BhY2VzJyB9LFxuICB7IHBhdGg6ICcvcmVzaWRlbnRzL215LWNhbGVuZGFyJywgbmFtZTogJ1Jlc2lkZW50cyBNeSBDYWxlbmRhcicgfSxcbiAgeyBwYXRoOiAnL3Jlc2lkZW50cy9yZXNpZGVuY2UnLCBuYW1lOiAnUmVzaWRlbnRzIFJlc2lkZW5jZScgfSxcbiAgXG4gIC8vIFNldHRpbmdzIHBhZ2VzXG4gIHsgcGF0aDogJy9zZXR0aW5ncy9zZXR0aW5ncycsIG5hbWU6ICdTZXR0aW5ncycgfSxcbiAgeyBwYXRoOiAnL3NldHRpbmdzL2J1Zy1yZXBvcnRzJywgbmFtZTogJ0J1ZyBSZXBvcnRzJyB9LFxuICB7IHBhdGg6ICcvc2V0dGluZ3MvaWRlYS1ib3gnLCBuYW1lOiAnSWRlYSBCb3gnIH0sXG5dO1xuXG4vLyBJbXBvcnQgYWxsIHBhZ2UgY29tcG9uZW50cyBkeW5hbWljYWxseVxuY29uc3QgcGFnZUNvbXBvbmVudHMgPSB7XG4gICcvJzogKCkgPT4gaW1wb3J0KCdAL3BhZ2VzL2hvbWUnKSxcbiAgJy9mZWF0dXJlcyc6ICgpID0+IGltcG9ydCgnQC9wYWdlcy9mZWF0dXJlcycpLFxuICAnL3ByaWNpbmcnOiAoKSA9PiBpbXBvcnQoJ0AvcGFnZXMvcHJpY2luZycpLFxuICAnL3NlY3VyaXR5JzogKCkgPT4gaW1wb3J0KCdAL3BhZ2VzL3NlY3VyaXR5JyksXG4gICcvc3RvcnknOiAoKSA9PiBpbXBvcnQoJ0AvcGFnZXMvc3RvcnknKSxcbiAgJy9wcml2YWN5LXBvbGljeSc6ICgpID0+IGltcG9ydCgnQC9wYWdlcy9wcml2YWN5LXBvbGljeScpLFxuICAnL3Rlcm1zLW9mLXNlcnZpY2UnOiAoKSA9PiBpbXBvcnQoJ0AvcGFnZXMvdGVybXMtb2Ytc2VydmljZScpLFxuICAnL2xvZ2luJzogKCkgPT4gaW1wb3J0KCdAL3BhZ2VzL2F1dGgvbG9naW4nKSxcbiAgJy9mb3Jnb3QtcGFzc3dvcmQnOiAoKSA9PiBpbXBvcnQoJ0AvcGFnZXMvYXV0aC9mb3Jnb3QtcGFzc3dvcmQnKSxcbiAgJy9yZXNldC1wYXNzd29yZCc6ICgpID0+IGltcG9ydCgnQC9wYWdlcy9hdXRoL3Jlc2V0LXBhc3N3b3JkJyksXG4gICcvZGFzaGJvYXJkJzogKCkgPT4gaW1wb3J0KCdAL3BhZ2VzL2Rhc2hib2FyZCcpLFxuICAnL2Rhc2hib2FyZC9jYWxlbmRhcic6ICgpID0+IGltcG9ydCgnQC9wYWdlcy9kYXNoYm9hcmQvY2FsZW5kYXInKSxcbiAgJy9hZG1pbi9vcmdhbml6YXRpb25zJzogKCkgPT4gaW1wb3J0KCdAL3BhZ2VzL2FkbWluL29yZ2FuaXphdGlvbnMnKSxcbiAgJy9hZG1pbi9jb21wbGlhbmNlJzogKCkgPT4gaW1wb3J0KCdAL3BhZ2VzL2FkbWluL2NvbXBsaWFuY2UnKSxcbiAgJy9hZG1pbi9kb2N1bWVudGF0aW9uJzogKCkgPT4gaW1wb3J0KCdAL3BhZ2VzL2FkbWluL2RvY3VtZW50YXRpb24nKSxcbiAgJy9hZG1pbi9wZXJtaXNzaW9ucyc6ICgpID0+IGltcG9ydCgnQC9wYWdlcy9hZG1pbi9wZXJtaXNzaW9ucycpLFxuICAnL2FkbWluL3BpbGxhcnMnOiAoKSA9PiBpbXBvcnQoJ0AvcGFnZXMvYWRtaW4vcGlsbGFycycpLFxuICAnL2FkbWluL3F1YWxpdHknOiAoKSA9PiBpbXBvcnQoJ0AvcGFnZXMvYWRtaW4vcXVhbGl0eScpLFxuICAnL2FkbWluL3JvYWRtYXAnOiAoKSA9PiBpbXBvcnQoJ0AvcGFnZXMvYWRtaW4vcm9hZG1hcCcpLFxuICAnL2FkbWluL3N1Z2dlc3Rpb25zJzogKCkgPT4gaW1wb3J0KCdAL3BhZ2VzL2FkbWluL3N1Z2dlc3Rpb25zJyksXG4gICcvbWFuYWdlci9iaWxscyc6ICgpID0+IGltcG9ydCgnQC9wYWdlcy9tYW5hZ2VyL2JpbGxzJyksXG4gICcvbWFuYWdlci9idWRnZXQnOiAoKSA9PiBpbXBvcnQoJ0AvcGFnZXMvbWFuYWdlci9idWRnZXQnKSxcbiAgJy9tYW5hZ2VyL2J1aWxkaW5ncyc6ICgpID0+IGltcG9ydCgnQC9wYWdlcy9tYW5hZ2VyL2J1aWxkaW5ncycpLFxuICAnL21hbmFnZXIvY29tbW9uLXNwYWNlcy1zdGF0cyc6ICgpID0+IGltcG9ydCgnQC9wYWdlcy9tYW5hZ2VyL2NvbW1vbi1zcGFjZXMtc3RhdHMnKSxcbiAgJy9tYW5hZ2VyL2RlbWFuZHMnOiAoKSA9PiBpbXBvcnQoJ0AvcGFnZXMvbWFuYWdlci9kZW1hbmRzJyksXG4gICcvbWFuYWdlci9pbnZvaWNlcyc6ICgpID0+IGltcG9ydCgnQC9wYWdlcy9tYW5hZ2VyL2ludm9pY2VzJyksXG4gICcvbWFuYWdlci9yZXNpZGVuY2VzJzogKCkgPT4gaW1wb3J0KCdAL3BhZ2VzL21hbmFnZXIvcmVzaWRlbmNlcycpLFxuICAnL21hbmFnZXIvdXNlci1tYW5hZ2VtZW50JzogKCkgPT4gaW1wb3J0KCdAL3BhZ2VzL21hbmFnZXIvdXNlci1tYW5hZ2VtZW50JyksXG4gICcvcmVzaWRlbnRzL2Rhc2hib2FyZCc6ICgpID0+IGltcG9ydCgnQC9wYWdlcy9yZXNpZGVudHMvZGFzaGJvYXJkJyksXG4gICcvcmVzaWRlbnRzL2J1aWxkaW5nJzogKCkgPT4gaW1wb3J0KCdAL3BhZ2VzL3Jlc2lkZW50cy9idWlsZGluZycpLFxuICAnL3Jlc2lkZW50cy9jb21tb24tc3BhY2VzJzogKCkgPT4gaW1wb3J0KCdAL3BhZ2VzL3Jlc2lkZW50cy9jb21tb24tc3BhY2VzJyksXG4gICcvcmVzaWRlbnRzL215LWNhbGVuZGFyJzogKCkgPT4gaW1wb3J0KCdAL3BhZ2VzL3Jlc2lkZW50cy9teS1jYWxlbmRhcicpLFxuICAnL3Jlc2lkZW50cy9yZXNpZGVuY2UnOiAoKSA9PiBpbXBvcnQoJ0AvcGFnZXMvcmVzaWRlbnRzL3Jlc2lkZW5jZScpLFxuICAnL3NldHRpbmdzL3NldHRpbmdzJzogKCkgPT4gaW1wb3J0KCdAL3BhZ2VzL3NldHRpbmdzL3NldHRpbmdzJyksXG4gICcvc2V0dGluZ3MvYnVnLXJlcG9ydHMnOiAoKSA9PiBpbXBvcnQoJ0AvcGFnZXMvc2V0dGluZ3MvYnVnLXJlcG9ydHMnKSxcbiAgJy9zZXR0aW5ncy9pZGVhLWJveCc6ICgpID0+IGltcG9ydCgnQC9wYWdlcy9zZXR0aW5ncy9pZGVhLWJveCcpLFxufTtcblxuLy8gSGVscGVyIHRvIGNyZWF0ZSB0ZXN0IHByb3ZpZGVyc1xuY29uc3QgVGVzdFdyYXBwZXIgPSAoeyBjaGlsZHJlbiwgbW9ja1VzZXIgPSBudWxsIH06IHsgY2hpbGRyZW46IFJlYWN0LlJlYWN0Tm9kZSwgbW9ja1VzZXI/OiBhbnkgfSkgPT4ge1xuICBjb25zdCBxdWVyeUNsaWVudCA9IG5ldyBRdWVyeUNsaWVudCh7XG4gICAgZGVmYXVsdE9wdGlvbnM6IHtcbiAgICAgIHF1ZXJpZXM6IHtcbiAgICAgICAgcmV0cnk6IGZhbHNlLFxuICAgICAgICBnY1RpbWU6IDAsXG4gICAgICB9LFxuICAgIH0sXG4gIH0pO1xuXG4gIC8vIE1vY2sgYXV0aCBBUEkgcmVzcG9uc2VcbiAgY29uc3QgbW9ja0ZldGNoID0gZ2xvYmFsLmZldGNoIGFzIGplc3QuTW9ja2VkRnVuY3Rpb248dHlwZW9mIGZldGNoPjtcbiAgXG4gIGlmIChtb2NrVXNlcikge1xuICAgIG1vY2tGZXRjaC5tb2NrUmVzb2x2ZWRWYWx1ZU9uY2Uoe1xuICAgICAgb2s6IHRydWUsXG4gICAgICBzdGF0dXM6IDIwMCxcbiAgICAgIGpzb246ICgpID0+IFByb21pc2UucmVzb2x2ZShtb2NrVXNlciksXG4gICAgfSBhcyBSZXNwb25zZSk7XG4gIH0gZWxzZSB7XG4gICAgbW9ja0ZldGNoLm1vY2tSZXNvbHZlZFZhbHVlT25jZSh7XG4gICAgICBvazogZmFsc2UsXG4gICAgICBzdGF0dXM6IDQwMSxcbiAgICAgIHN0YXR1c1RleHQ6ICdVbmF1dGhvcml6ZWQnLFxuICAgICAganNvbjogKCkgPT4gUHJvbWlzZS5yZXNvbHZlKHsgZXJyb3I6ICdVbmF1dGhvcml6ZWQnIH0pLFxuICAgIH0gYXMgUmVzcG9uc2UpO1xuICB9XG5cbiAgcmV0dXJuIChcbiAgICA8UXVlcnlDbGllbnRQcm92aWRlciBjbGllbnQ9e3F1ZXJ5Q2xpZW50fT5cbiAgICAgIDxMYW5ndWFnZVByb3ZpZGVyPlxuICAgICAgICA8QXV0aFByb3ZpZGVyPlxuICAgICAgICAgIDxNZW1vcnlSb3V0ZXI+XG4gICAgICAgICAgICB7Y2hpbGRyZW59XG4gICAgICAgICAgPC9NZW1vcnlSb3V0ZXI+XG4gICAgICAgIDwvQXV0aFByb3ZpZGVyPlxuICAgICAgPC9MYW5ndWFnZVByb3ZpZGVyPlxuICAgIDwvUXVlcnlDbGllbnRQcm92aWRlcj5cbiAgKTtcbn07XG5cbmRlc2NyaWJlKCdBbGwgUGFnZXMgSW50ZWdyaXR5IFRlc3RzJywgKCkgPT4ge1xuICBiZWZvcmVFYWNoKCgpID0+IHtcbiAgICBqZXN0LmNsZWFyQWxsTW9ja3MoKTtcbiAgICAvLyBSZXNldCBjb25zb2xlLmVycm9yIHRvIGNhdGNoIFJlYWN0IGVycm9yc1xuICAgIGplc3Quc3B5T24oY29uc29sZSwgJ2Vycm9yJykubW9ja0ltcGxlbWVudGF0aW9uKCgpID0+IHt9KTtcbiAgfSk7XG5cbiAgYWZ0ZXJFYWNoKCgpID0+IHtcbiAgICBqZXN0LnJlc3RvcmVBbGxNb2NrcygpO1xuICB9KTtcblxuICBkZXNjcmliZSgnUHVibGljIFBhZ2VzJywgKCkgPT4ge1xuICAgIGNvbnN0IHB1YmxpY1BhZ2VzID0gYWxsUGFnZXMuZmlsdGVyKHBhZ2UgPT4gXG4gICAgICBbJy8nLCAnL2ZlYXR1cmVzJywgJy9wcmljaW5nJywgJy9zZWN1cml0eScsICcvc3RvcnknLCAnL3ByaXZhY3ktcG9saWN5JywgJy90ZXJtcy1vZi1zZXJ2aWNlJ10uaW5jbHVkZXMocGFnZS5wYXRoKVxuICAgICk7XG5cbiAgICBpdC5lYWNoKHB1YmxpY1BhZ2VzKSgnc2hvdWxkIHJlbmRlciAkbmFtZSBwYWdlIHdpdGhvdXQgZXJyb3JzJywgYXN5bmMgKHsgcGF0aCwgbmFtZSB9KSA9PiB7XG4gICAgICBjb25zdCBtb2NrRmV0Y2ggPSBnbG9iYWwuZmV0Y2ggYXMgamVzdC5Nb2NrZWRGdW5jdGlvbjx0eXBlb2YgZmV0Y2g+O1xuICAgICAgbW9ja0ZldGNoLm1vY2tSZXNvbHZlZFZhbHVlKHtcbiAgICAgICAgb2s6IGZhbHNlLFxuICAgICAgICBzdGF0dXM6IDQwMSxcbiAgICAgICAgc3RhdHVzVGV4dDogJ1VuYXV0aG9yaXplZCcsXG4gICAgICAgIGpzb246ICgpID0+IFByb21pc2UucmVzb2x2ZSh7IGVycm9yOiAnVW5hdXRob3JpemVkJyB9KSxcbiAgICAgIH0gYXMgUmVzcG9uc2UpO1xuXG4gICAgICBsZXQgQ29tcG9uZW50O1xuICAgICAgdHJ5IHtcbiAgICAgICAgY29uc3QgbW9kdWxlID0gYXdhaXQgcGFnZUNvbXBvbmVudHNbcGF0aF0/LigpO1xuICAgICAgICBDb21wb25lbnQgPSBtb2R1bGU/LmRlZmF1bHQ7XG4gICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYEZhaWxlZCB0byBpbXBvcnQgY29tcG9uZW50IGZvciAke25hbWV9ICgke3BhdGh9KTogJHtlcnJvcn1gKTtcbiAgICAgIH1cblxuICAgICAgaWYgKCFDb21wb25lbnQpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBObyBjb21wb25lbnQgZm91bmQgZm9yICR7bmFtZX0gKCR7cGF0aH0pYCk7XG4gICAgICB9XG5cbiAgICAgIGxldCByZW5kZXJFcnJvcjtcbiAgICAgIHRyeSB7XG4gICAgICAgIHJlbmRlcihcbiAgICAgICAgICA8VGVzdFdyYXBwZXI+XG4gICAgICAgICAgICA8Q29tcG9uZW50IC8+XG4gICAgICAgICAgPC9UZXN0V3JhcHBlcj5cbiAgICAgICAgKTtcbiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIHJlbmRlckVycm9yID0gZXJyb3I7XG4gICAgICB9XG5cbiAgICAgIC8vIENoZWNrIGZvciByZW5kZXIgZXJyb3JzXG4gICAgICBleHBlY3QocmVuZGVyRXJyb3IpLnRvQmVVbmRlZmluZWQoKTtcbiAgICAgIFxuICAgICAgLy8gQ2hlY2sgZm9yIGNvbnNvbGUgZXJyb3JzIChsaWtlIG1pc3NpbmcgaW1wb3J0cylcbiAgICAgIGNvbnN0IGNvbnNvbGVTcHkgPSBqZXN0LnNweU9uKGNvbnNvbGUsICdlcnJvcicpO1xuICAgICAgZXhwZWN0KGNvbnNvbGVTcHkpLm5vdC50b0hhdmVCZWVuQ2FsbGVkV2l0aChcbiAgICAgICAgZXhwZWN0LnN0cmluZ01hdGNoaW5nKC9SZWZlcmVuY2VFcnJvci4qaXMgbm90IGRlZmluZWQvKVxuICAgICAgKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ0F1dGhlbnRpY2F0aW9uIFBhZ2VzJywgKCkgPT4ge1xuICAgIGNvbnN0IGF1dGhQYWdlcyA9IGFsbFBhZ2VzLmZpbHRlcihwYWdlID0+IFxuICAgICAgWycvbG9naW4nLCAnL2ZvcmdvdC1wYXNzd29yZCcsICcvcmVzZXQtcGFzc3dvcmQnXS5pbmNsdWRlcyhwYWdlLnBhdGgpXG4gICAgKTtcblxuICAgIGl0LmVhY2goYXV0aFBhZ2VzKSgnc2hvdWxkIHJlbmRlciAkbmFtZSBwYWdlIHdpdGhvdXQgZXJyb3JzJywgYXN5bmMgKHsgcGF0aCwgbmFtZSB9KSA9PiB7XG4gICAgICBjb25zdCBtb2NrRmV0Y2ggPSBnbG9iYWwuZmV0Y2ggYXMgamVzdC5Nb2NrZWRGdW5jdGlvbjx0eXBlb2YgZmV0Y2g+O1xuICAgICAgbW9ja0ZldGNoLm1vY2tSZXNvbHZlZFZhbHVlKHtcbiAgICAgICAgb2s6IGZhbHNlLFxuICAgICAgICBzdGF0dXM6IDQwMSxcbiAgICAgICAgc3RhdHVzVGV4dDogJ1VuYXV0aG9yaXplZCcsXG4gICAgICAgIGpzb246ICgpID0+IFByb21pc2UucmVzb2x2ZSh7IGVycm9yOiAnVW5hdXRob3JpemVkJyB9KSxcbiAgICAgIH0gYXMgUmVzcG9uc2UpO1xuXG4gICAgICBsZXQgQ29tcG9uZW50O1xuICAgICAgdHJ5IHtcbiAgICAgICAgY29uc3QgbW9kdWxlID0gYXdhaXQgcGFnZUNvbXBvbmVudHNbcGF0aF0/LigpO1xuICAgICAgICBDb21wb25lbnQgPSBtb2R1bGU/LmRlZmF1bHQ7XG4gICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYEZhaWxlZCB0byBpbXBvcnQgY29tcG9uZW50IGZvciAke25hbWV9ICgke3BhdGh9KTogJHtlcnJvcn1gKTtcbiAgICAgIH1cblxuICAgICAgaWYgKCFDb21wb25lbnQpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBObyBjb21wb25lbnQgZm91bmQgZm9yICR7bmFtZX0gKCR7cGF0aH0pYCk7XG4gICAgICB9XG5cbiAgICAgIGV4cGVjdCgoKSA9PiB7XG4gICAgICAgIHJlbmRlcihcbiAgICAgICAgICA8VGVzdFdyYXBwZXI+XG4gICAgICAgICAgICA8Q29tcG9uZW50IC8+XG4gICAgICAgICAgPC9UZXN0V3JhcHBlcj5cbiAgICAgICAgKTtcbiAgICAgIH0pLm5vdC50b1Rocm93KCk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdQcm90ZWN0ZWQgUGFnZXMgd2l0aCBBdXRoZW50aWNhdGlvbicsICgpID0+IHtcbiAgICBjb25zdCBwcm90ZWN0ZWRQYWdlcyA9IGFsbFBhZ2VzLmZpbHRlcihwYWdlID0+IFxuICAgICAgcGFnZS5wYXRoLnN0YXJ0c1dpdGgoJy9kYXNoYm9hcmQnKSB8fCBcbiAgICAgIHBhZ2UucGF0aC5zdGFydHNXaXRoKCcvYWRtaW4nKSB8fCBcbiAgICAgIHBhZ2UucGF0aC5zdGFydHNXaXRoKCcvbWFuYWdlcicpIHx8IFxuICAgICAgcGFnZS5wYXRoLnN0YXJ0c1dpdGgoJy9yZXNpZGVudHMnKSB8fFxuICAgICAgcGFnZS5wYXRoLnN0YXJ0c1dpdGgoJy9zZXR0aW5ncycpXG4gICAgKTtcblxuICAgIGNvbnN0IG1vY2tVc2VycyA9IHtcbiAgICAgIGFkbWluOiB7IGlkOiAnMScsIGVtYWlsOiAnYWRtaW5AdGVzdC5jb20nLCByb2xlOiAnYWRtaW4nLCBmaXJzdE5hbWU6ICdBZG1pbicsIGxhc3ROYW1lOiAnVXNlcicgfSxcbiAgICAgIG1hbmFnZXI6IHsgaWQ6ICcyJywgZW1haWw6ICdtYW5hZ2VyQHRlc3QuY29tJywgcm9sZTogJ21hbmFnZXInLCBmaXJzdE5hbWU6ICdNYW5hZ2VyJywgbGFzdE5hbWU6ICdVc2VyJyB9LFxuICAgICAgcmVzaWRlbnQ6IHsgaWQ6ICczJywgZW1haWw6ICdyZXNpZGVudEB0ZXN0LmNvbScsIHJvbGU6ICdyZXNpZGVudCcsIGZpcnN0TmFtZTogJ1Jlc2lkZW50JywgbGFzdE5hbWU6ICdVc2VyJyB9XG4gICAgfTtcblxuICAgIGl0LmVhY2gocHJvdGVjdGVkUGFnZXMpKCdzaG91bGQgcmVuZGVyICRuYW1lIHBhZ2Ugd2l0aCBwcm9wZXIgYXV0aGVudGljYXRpb24nLCBhc3luYyAoeyBwYXRoLCBuYW1lIH0pID0+IHtcbiAgICAgIC8vIERldGVybWluZSByZXF1aXJlZCByb2xlIGJhc2VkIG9uIHBhdGhcbiAgICAgIGxldCBtb2NrVXNlciA9IG1vY2tVc2Vycy5hZG1pbjsgLy8gRGVmYXVsdCB0byBhZG1pblxuICAgICAgaWYgKHBhdGguc3RhcnRzV2l0aCgnL21hbmFnZXInKSkgbW9ja1VzZXIgPSBtb2NrVXNlcnMubWFuYWdlcjtcbiAgICAgIGlmIChwYXRoLnN0YXJ0c1dpdGgoJy9yZXNpZGVudHMnKSkgbW9ja1VzZXIgPSBtb2NrVXNlcnMucmVzaWRlbnQ7XG5cbiAgICAgIGxldCBDb21wb25lbnQ7XG4gICAgICB0cnkge1xuICAgICAgICBjb25zdCBtb2R1bGUgPSBhd2FpdCBwYWdlQ29tcG9uZW50c1twYXRoXT8uKCk7XG4gICAgICAgIENvbXBvbmVudCA9IG1vZHVsZT8uZGVmYXVsdDtcbiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihgRmFpbGVkIHRvIGltcG9ydCBjb21wb25lbnQgZm9yICR7bmFtZX0gKCR7cGF0aH0pOiAke2Vycm9yfWApO1xuICAgICAgfVxuXG4gICAgICBpZiAoIUNvbXBvbmVudCkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYE5vIGNvbXBvbmVudCBmb3VuZCBmb3IgJHtuYW1lfSAoJHtwYXRofSlgKTtcbiAgICAgIH1cblxuICAgICAgZXhwZWN0KCgpID0+IHtcbiAgICAgICAgcmVuZGVyKFxuICAgICAgICAgIDxUZXN0V3JhcHBlciBtb2NrVXNlcj17bW9ja1VzZXJ9PlxuICAgICAgICAgICAgPENvbXBvbmVudCAvPlxuICAgICAgICAgIDwvVGVzdFdyYXBwZXI+XG4gICAgICAgICk7XG4gICAgICB9KS5ub3QudG9UaHJvdygpO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnSW1wb3J0IFZhbGlkYXRpb24nLCAoKSA9PiB7XG4gICAgaXQoJ3Nob3VsZCBub3QgaGF2ZSBtaXNzaW5nIGx1Y2lkZS1yZWFjdCBpbXBvcnRzJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgcGFnZXMgPSBbXG4gICAgICAgICcvcHJpdmFjeS1wb2xpY3knLFxuICAgICAgICAnL2hvbWUnLFxuICAgICAgICAnL2ZlYXR1cmVzJywgXG4gICAgICAgICcvcHJpY2luZycsXG4gICAgICAgICcvc2VjdXJpdHknLFxuICAgICAgICAnL3N0b3J5JyxcbiAgICAgICAgJy90ZXJtcy1vZi1zZXJ2aWNlJ1xuICAgICAgXTtcblxuICAgICAgZm9yIChjb25zdCBwYXRoIG9mIHBhZ2VzKSB7XG4gICAgICAgIGxldCBDb21wb25lbnQ7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgY29uc3QgbW9kdWxlID0gYXdhaXQgcGFnZUNvbXBvbmVudHNbcGF0aF0/LigpO1xuICAgICAgICAgIENvbXBvbmVudCA9IG1vZHVsZT8uZGVmYXVsdDtcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYEZhaWxlZCB0byBpbXBvcnQgY29tcG9uZW50IGZvciAke3BhdGh9OiAke2Vycm9yfWApO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKENvbXBvbmVudCkge1xuICAgICAgICAgIC8vIFRlc3QgdGhhdCBjb21wb25lbnQgY2FuIGJlIHJlbmRlcmVkIHdpdGhvdXQgaW1wb3J0IGVycm9yc1xuICAgICAgICAgIGV4cGVjdCgoKSA9PiB7XG4gICAgICAgICAgICByZW5kZXIoXG4gICAgICAgICAgICAgIDxUZXN0V3JhcHBlcj5cbiAgICAgICAgICAgICAgICA8Q29tcG9uZW50IC8+XG4gICAgICAgICAgICAgIDwvVGVzdFdyYXBwZXI+XG4gICAgICAgICAgICApO1xuICAgICAgICAgIH0pLm5vdC50b1Rocm93KCk7XG5cbiAgICAgICAgICAvLyBDaGVjayB0aGF0IG5vIFJlZmVyZW5jZUVycm9yIGlzIHRocm93biBmb3IgbWlzc2luZyBsdWNpZGUgaWNvbnNcbiAgICAgICAgICBjb25zdCBjb25zb2xlU3B5ID0gamVzdC5zcHlPbihjb25zb2xlLCAnZXJyb3InKTtcbiAgICAgICAgICBleHBlY3QoY29uc29sZVNweSkubm90LnRvSGF2ZUJlZW5DYWxsZWRXaXRoKFxuICAgICAgICAgICAgZXhwZWN0LnN0cmluZ01hdGNoaW5nKC9SZWZlcmVuY2VFcnJvci4qQXJyb3dSaWdodCBpcyBub3QgZGVmaW5lZC8pXG4gICAgICAgICAgKTtcbiAgICAgICAgICBleHBlY3QoY29uc29sZVNweSkubm90LnRvSGF2ZUJlZW5DYWxsZWRXaXRoKFxuICAgICAgICAgICAgZXhwZWN0LnN0cmluZ01hdGNoaW5nKC9SZWZlcmVuY2VFcnJvci4qQXJyb3dMZWZ0IGlzIG5vdCBkZWZpbmVkLylcbiAgICAgICAgICApO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdBUEkgSW50ZWdyYXRpb24nLCAoKSA9PiB7XG4gICAgaXQoJ3Nob3VsZCBoYW5kbGUgNDAxIHJlc3BvbnNlcyBncmFjZWZ1bGx5IG9uIHB1YmxpYyBwYWdlcycsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IHB1YmxpY1BhZ2VzID0gWycvJywgJy9mZWF0dXJlcycsICcvcHJpdmFjeS1wb2xpY3knXTtcbiAgICAgIFxuICAgICAgZm9yIChjb25zdCBwYXRoIG9mIHB1YmxpY1BhZ2VzKSB7XG4gICAgICAgIGNvbnN0IG1vY2tGZXRjaCA9IGdsb2JhbC5mZXRjaCBhcyBqZXN0Lk1vY2tlZEZ1bmN0aW9uPHR5cGVvZiBmZXRjaD47XG4gICAgICAgIG1vY2tGZXRjaC5tb2NrQ2xlYXIoKTtcbiAgICAgICAgXG4gICAgICAgIC8vIE1vY2sgNDAxIHJlc3BvbnNlXG4gICAgICAgIG1vY2tGZXRjaC5tb2NrUmVzb2x2ZWRWYWx1ZSh7XG4gICAgICAgICAgb2s6IGZhbHNlLFxuICAgICAgICAgIHN0YXR1czogNDAxLFxuICAgICAgICAgIHN0YXR1c1RleHQ6ICdVbmF1dGhvcml6ZWQnLFxuICAgICAgICAgIGpzb246ICgpID0+IFByb21pc2UucmVzb2x2ZSh7IGVycm9yOiAnVW5hdXRob3JpemVkJyB9KSxcbiAgICAgICAgfSBhcyBSZXNwb25zZSk7XG5cbiAgICAgICAgbGV0IENvbXBvbmVudDtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICBjb25zdCBtb2R1bGUgPSBhd2FpdCBwYWdlQ29tcG9uZW50c1twYXRoXT8uKCk7XG4gICAgICAgICAgQ29tcG9uZW50ID0gbW9kdWxlPy5kZWZhdWx0O1xuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgIGNvbnRpbnVlOyAvLyBTa2lwIGlmIGNvbXBvbmVudCBkb2Vzbid0IGV4aXN0XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoQ29tcG9uZW50KSB7XG4gICAgICAgICAgZXhwZWN0KCgpID0+IHtcbiAgICAgICAgICAgIHJlbmRlcihcbiAgICAgICAgICAgICAgPFRlc3RXcmFwcGVyPlxuICAgICAgICAgICAgICAgIDxDb21wb25lbnQgLz5cbiAgICAgICAgICAgICAgPC9UZXN0V3JhcHBlcj5cbiAgICAgICAgICAgICk7XG4gICAgICAgICAgfSkubm90LnRvVGhyb3coKTtcblxuICAgICAgICAgIC8vIFdhaXQgZm9yIGF1dGggY2hlY2sgdG8gY29tcGxldGVcbiAgICAgICAgICBhd2FpdCB3YWl0Rm9yKCgpID0+IHtcbiAgICAgICAgICAgIGV4cGVjdChtb2NrRmV0Y2gpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKCcvYXBpL2F1dGgvdXNlcicsIHtcbiAgICAgICAgICAgICAgY3JlZGVudGlhbHM6ICdpbmNsdWRlJyxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSk7XG4gIH0pO1xufSk7Il0sInZlcnNpb24iOjN9