d040d6b52ab484ca4fcb077303a5faf4
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.default = Bills;
const jsx_runtime_1 = require("react/jsx-runtime");
const react_1 = require("react");
const header_1 = require("@/components/layout/header");
const card_1 = require("@/components/ui/card");
const badge_1 = require("@/components/ui/badge");
const button_1 = require("@/components/ui/button");
const select_1 = require("@/components/ui/select");
const input_1 = require("@/components/ui/input");
const label_1 = require("@/components/ui/label");
const dialog_1 = require("@/components/ui/dialog");
const checkbox_1 = require("@/components/ui/checkbox");
const popover_1 = require("@/components/ui/popover");
const lucide_react_1 = require("lucide-react");
const BillEditForm_1 = require("@/components/BillEditForm");
const BuildingSelectionGrid_1 = require("@/components/BuildingSelectionGrid");
const BillCreateForm_1 = require("@/components/BillCreateForm");
const react_query_1 = require("@tanstack/react-query");
const queryClient_1 = require("@/lib/queryClient");
const utils_1 = require("@/lib/utils");
const BILL_CATEGORIES = [
    'insurance',
    'maintenance',
    'salary',
    'utilities',
    'cleaning',
    'security',
    'landscaping',
    'professional_services',
    'administration',
    'repairs',
    'supplies',
    'taxes',
    'other',
];
const CATEGORY_LABELS = {
    insurance: 'Insurance',
    maintenance: 'Maintenance',
    salary: 'Salary',
    utilities: 'Utilities',
    cleaning: 'Cleaning',
    security: 'Security',
    landscaping: 'Landscaping',
    professional_services: 'Professional Services',
    administration: 'Administration',
    repairs: 'Repairs',
    supplies: 'Supplies',
    taxes: 'Taxes',
    other: 'Other',
};
const MONTHS = [
    { value: '1', label: 'January' },
    { value: '2', label: 'February' },
    { value: '3', label: 'March' },
    { value: '4', label: 'April' },
    { value: '5', label: 'May' },
    { value: '6', label: 'June' },
    { value: '7', label: 'July' },
    { value: '8', label: 'August' },
    { value: '9', label: 'September' },
    { value: '10', label: 'October' },
    { value: '11', label: 'November' },
    { value: '12', label: 'December' },
];
/**
 *
 */
function Bills() {
    const [filters, setFilters] = (0, react_1.useState)({
        buildingId: '',
        category: '',
        year: new Date().getFullYear().toString(),
        months: [],
    });
    const [showCreateDialog, setShowCreateDialog] = (0, react_1.useState)(false);
    const [showAllYears, setShowAllYears] = (0, react_1.useState)(false);
    const queryClient = (0, react_query_1.useQueryClient)();
    // Fetch buildings for filter dropdown
    const { data: buildings = [], isLoading: buildingsLoading, error: buildingsError, } = (0, react_query_1.useQuery)({
        queryKey: ['/api/buildings'],
        queryFn: async () => {
            const response = await (0, queryClient_1.apiRequest)('GET', '/api/buildings');
            return await response.json();
        },
    });
    // Fetch bills based on filters
    const { data: bills = [], isLoading } = (0, react_query_1.useQuery)({
        queryKey: ['/api/bills', filters],
        queryFn: async () => {
            const params = new URLSearchParams(); /**
             * If function.
             * @param filters.buildingId - Filters.buildingId parameter.
             */ /**
            * If function.
            * @param filters.buildingId - Filters.buildingId parameter.
            */
            if (filters.buildingId) {
                params.set('buildingId', filters.buildingId);
            } /**
             * If function.
             * @param filters.category && filters.category !== 'all' - filters.category && filters.category !== 'all' parameter.
             */ /**
            * If function.
            * @param filters.category && filters.category !== 'all' - filters.category && filters.category !== 'all' parameter.
            */
            if (filters.category && filters.category !== 'all') {
                params.set('category', filters.category);
            } /**
             * If function.
             * @param filters.year - Filters.year parameter.
             */ /**
            * If function.
            * @param filters.year - Filters.year parameter.
            */
            if (filters.year) {
                params.set('year', filters.year);
            } /**
             * If function.
             * @param filters.months.length > 0 - filters.months.length > 0 parameter.
             */ /**
            * If function.
            * @param filters.months.length > 0 - filters.months.length > 0 parameter.
            */
            if (filters.months.length > 0) {
                params.set('months', filters.months.join(','));
            }
            const url = `/api/bills${params.toString() ? '?' + params.toString() : ''}`;
            const response = await fetch(url, { credentials: 'include' }); /**
             * If function.
             * @param !response.ok - !response.ok parameter.
             */
            /**
             * If function.
             * @param !response.ok - !response.ok parameter.
             */
            /**
             * If function.
             * @param !response.ok - !response.ok parameter.
             */
            /**
             * If function.
             * @param !response.ok - !response.ok parameter.
             */ /**
            * If function.
            * @param !response.ok - !response.ok parameter.
            */
            /**
             * If function.
             * @param !response.ok - !response.ok parameter.
             */
            /**
             * If function.
             * @param !response.ok - !response.ok parameter.
             */
            /**
             * If function.
             * @param !response.ok - !response.ok parameter.
             */
            if (!response.ok) {
                throw new Error(`Failed to fetch bills: ${response.statusText}`);
            }
            return response.json();
        },
    });
    // Group bills by category
    const billsByCategory = bills.reduce((acc, bill) => {
        const category = bill.category || 'other'; /**
         * If function.
         * @param !acc[category] - !acc[category] parameter.
         */ /**
        * If function.
        * @param !acc[category] - !acc[category] parameter.
        */
        if (!acc[category]) {
            acc[category] = [];
        }
        acc[category].push(bill);
        return acc;
    }, {});
    const handleFilterChange = (key, value) => {
        setFilters((prev) => ({ ...prev, [key]: value }));
    };
    const handleMonthToggle = (monthValue) => {
        setFilters((prev) => ({
            ...prev,
            months: prev.months.includes(monthValue)
                ? prev.months.filter((m) => m !== monthValue)
                : [...prev.months, monthValue],
        }));
    };
    const handleAllMonthsToggle = () => {
        const allMonthValues = MONTHS.map((m) => m.value);
        setFilters((prev) => ({
            ...prev,
            months: prev.months.length === allMonthValues.length ? [] : allMonthValues,
        }));
    };
    const getMonthsDisplayText = () => {
        /**
         * If function.
         * @param filters.months.length === 0 - filters.months.length === 0 parameter.
         */ /**
        * If function.
        * @param filters.months.length === 0 - filters.months.length === 0 parameter.
        */
        if (filters.months.length === 0) {
            return 'All months';
        } /**
         * If function.
         * @param filters.months.length === MONTHS.length - filters.months.length === MONTHS.length parameter.
         */ /**
        * If function.
        * @param filters.months.length === MONTHS.length - filters.months.length === MONTHS.length parameter.
        */
        if (filters.months.length === MONTHS.length) {
            return 'All months';
        } /**
         * If function.
         * @param filters.months.length === 1 - filters.months.length === 1 parameter.
         */ /**
        * If function.
        * @param filters.months.length === 1 - filters.months.length === 1 parameter.
        */
        if (filters.months.length === 1) {
            const month = MONTHS.find((m) => m.value === filters.months[0]);
            return month?.label || 'All months';
        }
        return `${filters.months.length} months`;
    };
    // Get building construction year for minimum year calculation
    const selectedBuilding = Array.isArray(buildings)
        ? buildings.find((b) => b.id === filters.buildingId)
        : undefined;
    const buildingConstructionYear = selectedBuilding?.yearBuilt || new Date().getFullYear();
    const currentYear = new Date().getFullYear();
    // Generate year options based on show all years state
    const getYearOptions = () => {
        /**
         * If function.
         * @param showAllYears - ShowAllYears parameter.
         */ /**
        * If function.
        * @param showAllYears - ShowAllYears parameter.
        */
        if (showAllYears) {
            // Show all years from building construction year to 25 years forward
            const startYear = buildingConstructionYear;
            const endYear = currentYear + 25;
            const totalYears = endYear - startYear + 1;
            return Array.from({ length: totalYears }, (_, i) => startYear + i);
        }
        else {
            // Show current year Â±3 years
            const startYear = currentYear - 3;
            const endYear = currentYear + 3;
            const totalYears = endYear - startYear + 1;
            return Array.from({ length: totalYears }, (_, i) => startYear + i);
        }
    };
    // Show loading state while buildings are loading
    if (buildingsLoading) {
        return ((0, jsx_runtime_1.jsxs)("div", { className: 'flex-1 flex flex-col overflow-hidden', children: [(0, jsx_runtime_1.jsx)(header_1.Header, { title: 'Bills Management', subtitle: 'Manage building expenses and revenue tracking' }), (0, jsx_runtime_1.jsx)("div", { className: 'flex-1 flex items-center justify-center', children: (0, jsx_runtime_1.jsxs)("div", { className: 'text-center', children: [(0, jsx_runtime_1.jsx)("div", { className: 'animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto mb-4' }), (0, jsx_runtime_1.jsx)("p", { className: 'text-gray-500', children: "Loading buildings..." })] }) })] }));
    }
    // Show error state if buildings failed to load
    if (buildingsError) {
        return ((0, jsx_runtime_1.jsxs)("div", { className: 'flex-1 flex flex-col overflow-hidden', children: [(0, jsx_runtime_1.jsx)(header_1.Header, { title: 'Bills Management', subtitle: 'Manage building expenses and revenue tracking' }), (0, jsx_runtime_1.jsx)("div", { className: 'flex-1 flex items-center justify-center', children: (0, jsx_runtime_1.jsxs)("div", { className: 'text-center', children: [(0, jsx_runtime_1.jsx)("p", { className: 'text-red-500 mb-4', children: "Failed to load buildings" }), (0, jsx_runtime_1.jsx)("button", { onClick: () => window.location.reload(), className: 'px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700', children: "Retry" })] }) })] }));
    }
    return ((0, jsx_runtime_1.jsxs)("div", { className: 'flex-1 flex flex-col overflow-hidden', children: [(0, jsx_runtime_1.jsx)(header_1.Header, { title: 'Bills Management', subtitle: 'Manage building expenses and revenue tracking' }), (0, jsx_runtime_1.jsx)("div", { className: 'flex-1 overflow-auto p-6', children: (0, jsx_runtime_1.jsxs)("div", { className: 'max-w-7xl mx-auto space-y-6', children: [(0, jsx_runtime_1.jsxs)(card_1.Card, { children: [(0, jsx_runtime_1.jsx)(card_1.CardHeader, { children: (0, jsx_runtime_1.jsxs)(card_1.CardTitle, { className: 'flex items-center gap-2', children: [(0, jsx_runtime_1.jsx)(lucide_react_1.Filter, { className: 'w-5 h-5' }), "Filters"] }) }), (0, jsx_runtime_1.jsx)(card_1.CardContent, { children: (0, jsx_runtime_1.jsxs)("div", { className: 'grid grid-cols-1 md:grid-cols-5 gap-4', children: [(0, jsx_runtime_1.jsxs)("div", { className: 'space-y-2', children: [(0, jsx_runtime_1.jsxs)(label_1.Label, { htmlFor: 'building-filter', className: 'flex items-center gap-2', children: [(0, jsx_runtime_1.jsx)(lucide_react_1.Building, { className: 'w-4 h-4' }), "Building"] }), (0, jsx_runtime_1.jsxs)(select_1.Select, { value: filters.buildingId, onValueChange: (value) => handleFilterChange('buildingId', value), children: [(0, jsx_runtime_1.jsx)(select_1.SelectTrigger, { id: 'building-filter', children: (0, jsx_runtime_1.jsx)(select_1.SelectValue, { placeholder: 'Select building' }) }), (0, jsx_runtime_1.jsx)(select_1.SelectContent, { children: Array.isArray(buildings) &&
                                                                    buildings.map((building) => ((0, jsx_runtime_1.jsx)(select_1.SelectItem, { value: building.id, children: building.name }, building.id))) })] })] }), (0, jsx_runtime_1.jsxs)("div", { className: 'space-y-2', children: [(0, jsx_runtime_1.jsxs)(label_1.Label, { htmlFor: 'category-filter', className: 'flex items-center gap-2', children: [(0, jsx_runtime_1.jsx)(lucide_react_1.Tag, { className: 'w-4 h-4' }), "Category"] }), (0, jsx_runtime_1.jsxs)(select_1.Select, { value: filters.category, onValueChange: (value) => handleFilterChange('category', value), children: [(0, jsx_runtime_1.jsx)(select_1.SelectTrigger, { id: 'category-filter', children: (0, jsx_runtime_1.jsx)(select_1.SelectValue, { placeholder: 'All categories' }) }), (0, jsx_runtime_1.jsxs)(select_1.SelectContent, { children: [(0, jsx_runtime_1.jsx)(select_1.SelectItem, { value: 'all', children: "All categories" }), BILL_CATEGORIES.map((category) => ((0, jsx_runtime_1.jsx)(select_1.SelectItem, { value: category, children: CATEGORY_LABELS[category] }, category)))] })] })] }), (0, jsx_runtime_1.jsxs)("div", { className: 'space-y-2', children: [(0, jsx_runtime_1.jsxs)(label_1.Label, { htmlFor: 'year-filter', className: 'flex items-center gap-2', children: [(0, jsx_runtime_1.jsx)(lucide_react_1.Calendar, { className: 'w-4 h-4' }), "Year"] }), (0, jsx_runtime_1.jsx)("div", { className: 'space-y-2', children: (0, jsx_runtime_1.jsxs)(select_1.Select, { value: filters.year, onValueChange: (value) => handleFilterChange('year', value), children: [(0, jsx_runtime_1.jsx)(select_1.SelectTrigger, { id: 'year-filter', children: (0, jsx_runtime_1.jsx)(select_1.SelectValue, {}) }), (0, jsx_runtime_1.jsxs)(select_1.SelectContent, { className: 'max-h-[300px] overflow-y-auto', children: [getYearOptions().map((year) => ((0, jsx_runtime_1.jsxs)(select_1.SelectItem, { value: year.toString(), children: [year, year === currentYear && ((0, jsx_runtime_1.jsx)("span", { className: 'ml-2 text-xs text-blue-500', children: "(Current)" }))] }, year))), !showAllYears && ((0, jsx_runtime_1.jsx)("div", { className: 'border-t border-gray-200 mt-2 pt-2', children: (0, jsx_runtime_1.jsxs)(button_1.Button, { variant: 'ghost', size: 'sm', className: 'w-full text-left justify-start text-xs', onClick: () => setShowAllYears(true), children: ["Show more years (", buildingConstructionYear, " - ", currentYear + 25, ")"] }) })), showAllYears && ((0, jsx_runtime_1.jsx)("div", { className: 'border-t border-gray-200 mt-2 pt-2', children: (0, jsx_runtime_1.jsxs)(button_1.Button, { variant: 'ghost', size: 'sm', className: 'w-full text-left justify-start text-xs', onClick: () => setShowAllYears(false), children: ["Show fewer years (", currentYear - 3, " - ", currentYear + 3, ")"] }) }))] })] }) })] }), (0, jsx_runtime_1.jsxs)("div", { className: 'space-y-2', children: [(0, jsx_runtime_1.jsxs)(label_1.Label, { className: 'flex items-center gap-2', children: [(0, jsx_runtime_1.jsx)(lucide_react_1.Calendar, { className: 'w-4 h-4' }), "Months"] }), (0, jsx_runtime_1.jsxs)(popover_1.Popover, { children: [(0, jsx_runtime_1.jsx)(popover_1.PopoverTrigger, { asChild: true, children: (0, jsx_runtime_1.jsxs)(button_1.Button, { variant: 'outline', className: (0, utils_1.cn)('w-full justify-between', filters.months.length === 0 && 'text-muted-foreground'), children: [getMonthsDisplayText(), (0, jsx_runtime_1.jsx)(lucide_react_1.ChevronDown, { className: 'ml-2 h-4 w-4 shrink-0 opacity-50' })] }) }), (0, jsx_runtime_1.jsxs)(popover_1.PopoverContent, { className: 'w-64 p-0', align: 'start', children: [(0, jsx_runtime_1.jsx)("div", { className: 'border-b p-3', children: (0, jsx_runtime_1.jsxs)("div", { className: 'flex items-center space-x-2', children: [(0, jsx_runtime_1.jsx)(checkbox_1.Checkbox, { id: 'all-months', checked: filters.months.length === MONTHS.length, onCheckedChange: handleAllMonthsToggle }), (0, jsx_runtime_1.jsx)(label_1.Label, { htmlFor: 'all-months', className: 'text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70', children: "All Months" })] }) }), (0, jsx_runtime_1.jsx)("div", { className: 'grid grid-cols-2 gap-2 p-3', children: MONTHS.map((month) => ((0, jsx_runtime_1.jsxs)("div", { className: 'flex items-center space-x-2', children: [(0, jsx_runtime_1.jsx)(checkbox_1.Checkbox, { id: `month-${month.value}`, checked: filters.months.includes(month.value), onCheckedChange: () => handleMonthToggle(month.value) }), (0, jsx_runtime_1.jsx)(label_1.Label, { htmlFor: `month-${month.value}`, className: 'text-sm leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70', children: month.label })] }, month.value))) })] })] })] }), (0, jsx_runtime_1.jsxs)("div", { className: 'space-y-2', children: [(0, jsx_runtime_1.jsx)(label_1.Label, { className: 'invisible', children: "Actions" }), (0, jsx_runtime_1.jsxs)(dialog_1.Dialog, { open: showCreateDialog, onOpenChange: setShowCreateDialog, children: [(0, jsx_runtime_1.jsx)(dialog_1.DialogTrigger, { asChild: true, children: (0, jsx_runtime_1.jsx)(button_1.Button, { className: 'w-full', disabled: !filters.buildingId, children: "Create Bill" }) }), (0, jsx_runtime_1.jsxs)(dialog_1.DialogContent, { className: 'max-w-4xl max-h-[90vh] overflow-y-auto', children: [(0, jsx_runtime_1.jsx)(dialog_1.DialogHeader, { children: (0, jsx_runtime_1.jsx)(dialog_1.DialogTitle, { children: "Create New Bill" }) }), (0, jsx_runtime_1.jsx)(BillCreateForm_1.BillCreateForm, { buildingId: filters.buildingId, onClose: () => setShowCreateDialog(false), onSuccess: () => {
                                                                            setShowCreateDialog(false);
                                                                            queryClient.invalidateQueries({ queryKey: ['/api/bills'] });
                                                                        } })] })] })] })] }) })] }), !filters.buildingId ? ((0, jsx_runtime_1.jsx)(BuildingSelectionGrid_1.BuildingSelectionGrid, { buildings: Array.isArray(buildings) ? buildings : [], onBuildingSelect: (buildingId) => handleFilterChange('buildingId', buildingId) })) : isLoading ? ((0, jsx_runtime_1.jsx)(card_1.Card, { children: (0, jsx_runtime_1.jsxs)(card_1.CardContent, { className: 'p-8 text-center', children: [(0, jsx_runtime_1.jsx)("div", { className: 'animate-spin w-8 h-8 border-4 border-primary border-t-transparent rounded-full mx-auto mb-4' }), (0, jsx_runtime_1.jsx)("p", { className: 'text-gray-500', children: "Loading bills..." })] }) })) : Object.keys(billsByCategory).length === 0 ? ((0, jsx_runtime_1.jsx)(card_1.Card, { children: (0, jsx_runtime_1.jsxs)(card_1.CardContent, { className: 'p-8 text-center', children: [(0, jsx_runtime_1.jsx)("h3", { className: 'text-lg font-semibold text-gray-600 mb-2', children: "No Bills Found" }), (0, jsx_runtime_1.jsx)("p", { className: 'text-gray-500 mb-4', children: "No bills found for the selected filters. Create your first bill to get started." }), (0, jsx_runtime_1.jsx)(button_1.Button, { onClick: () => setShowCreateDialog(true), children: "Create First Bill" })] }) })) : ((0, jsx_runtime_1.jsx)("div", { className: 'space-y-6', children: BILL_CATEGORIES.filter((category) => (!filters.category || filters.category === category) &&
                                billsByCategory[category]?.length > 0).map((category) => ((0, jsx_runtime_1.jsx)(BillCategorySection, { category: category, bills: billsByCategory[category] || [], onBillUpdate: () => queryClient.invalidateQueries({ queryKey: ['/api/bills'] }) }, category))) }))] }) })] }));
}
// Component for displaying bills in a category
/**
 *
 * @param root0
 * @param root0.category
 * @param root0.bills
 * @param root0.onBillUpdate
 */
/**
 * BillCategorySection function.
 * @param root0
 * @param root0.category
 * @param root0.bills
 * @param root0.onBillUpdate
 * @returns Function result.
 */
function BillCategorySection({ category, bills, onBillUpdate, }) {
    return ((0, jsx_runtime_1.jsxs)(card_1.Card, { children: [(0, jsx_runtime_1.jsx)(card_1.CardHeader, { children: (0, jsx_runtime_1.jsx)(card_1.CardTitle, { className: 'flex items-center justify-between', children: (0, jsx_runtime_1.jsxs)("div", { className: 'flex items-center gap-2', children: [(0, jsx_runtime_1.jsx)(lucide_react_1.Tag, { className: 'w-5 h-5' }), CATEGORY_LABELS[category], (0, jsx_runtime_1.jsx)(badge_1.Badge, { variant: 'secondary', children: bills.length })] }) }) }), (0, jsx_runtime_1.jsx)(card_1.CardContent, { children: (0, jsx_runtime_1.jsx)("div", { className: 'grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4', children: bills.map((bill) => ((0, jsx_runtime_1.jsx)(BillCard, { bill: bill, onUpdate: onBillUpdate }, bill.id))) }) })] }));
}
// Component for individual bill cards
/**
 *
 * @param root0
 * @param root0.bill
 * @param root0.onUpdate
 */
/**
 * BillCard function.
 * @param root0
 * @param root0.bill
 * @param root0.onUpdate
 * @returns Function result.
 */
function BillCard({ bill, onUpdate }) {
    const [showDetailDialog, setShowDetailDialog] = (0, react_1.useState)(false);
    const [showEditDialog, setShowEditDialog] = (0, react_1.useState)(false);
    const statusColors = {
        draft: 'bg-gray-100 text-gray-800',
        sent: 'bg-blue-100 text-blue-800',
        overdue: 'bg-red-100 text-red-800',
        paid: 'bg-green-100 text-green-800',
        cancelled: 'bg-gray-100 text-gray-800',
    };
    return ((0, jsx_runtime_1.jsxs)(jsx_runtime_1.Fragment, { children: [(0, jsx_runtime_1.jsx)(card_1.Card, { className: 'hover:shadow-md transition-shadow cursor-pointer', onClick: () => setShowDetailDialog(true), children: (0, jsx_runtime_1.jsx)(card_1.CardContent, { className: 'p-4', children: (0, jsx_runtime_1.jsxs)("div", { className: 'space-y-3', children: [(0, jsx_runtime_1.jsxs)("div", { className: 'flex items-start justify-between', children: [(0, jsx_runtime_1.jsxs)("div", { children: [(0, jsx_runtime_1.jsx)("h4", { className: 'font-semibold text-sm', children: bill.title }), (0, jsx_runtime_1.jsxs)("p", { className: 'text-xs text-gray-500', children: ["#", bill.billNumber] })] }), (0, jsx_runtime_1.jsx)(badge_1.Badge, { className: statusColors[bill.status], children: bill.status })] }), bill.description && ((0, jsx_runtime_1.jsx)("p", { className: 'text-sm text-gray-600 line-clamp-2', children: bill.description })), (0, jsx_runtime_1.jsxs)("div", { className: 'flex items-center justify-between text-sm', children: [(0, jsx_runtime_1.jsxs)("span", { className: 'font-medium', children: ["$", Number(bill.totalAmount).toLocaleString()] }), (0, jsx_runtime_1.jsx)("span", { className: 'text-gray-500', children: bill.paymentType })] }), bill.vendor && (0, jsx_runtime_1.jsxs)("p", { className: 'text-xs text-gray-500', children: ["Vendor: ", bill.vendor] }), (0, jsx_runtime_1.jsxs)("div", { className: 'flex items-center gap-2 pt-2', children: [bill.documentPath && ((0, jsx_runtime_1.jsxs)(badge_1.Badge, { variant: 'outline', className: 'text-xs', children: [(0, jsx_runtime_1.jsx)(lucide_react_1.FileText, { className: 'w-3 h-3 mr-1' }), "Document"] })), bill.isAiAnalyzed && ((0, jsx_runtime_1.jsx)(badge_1.Badge, { variant: 'outline', className: 'text-xs', children: "AI Analyzed" })), bill.notes?.includes('Auto-generated from:') && ((0, jsx_runtime_1.jsx)(badge_1.Badge, { variant: 'outline', className: 'text-xs', children: "Auto-Generated" }))] })] }) }) }), (0, jsx_runtime_1.jsx)(dialog_1.Dialog, { open: showDetailDialog, onOpenChange: setShowDetailDialog, children: (0, jsx_runtime_1.jsxs)(dialog_1.DialogContent, { className: 'max-w-2xl max-h-[95vh] overflow-y-auto', children: [(0, jsx_runtime_1.jsx)(dialog_1.DialogHeader, { children: (0, jsx_runtime_1.jsx)(dialog_1.DialogTitle, { children: "Bill Details" }) }), (0, jsx_runtime_1.jsx)(BillDetail, { bill: bill, onSuccess: () => {
                                setShowDetailDialog(false);
                                onUpdate();
                            }, onCancel: () => setShowDetailDialog(false), onEditBill: () => {
                                setShowDetailDialog(false);
                                setShowEditDialog(true);
                            } })] }) }), (0, jsx_runtime_1.jsx)(dialog_1.Dialog, { open: showEditDialog, onOpenChange: setShowEditDialog, children: (0, jsx_runtime_1.jsxs)(dialog_1.DialogContent, { className: 'max-w-4xl max-h-[95vh] overflow-y-auto', children: [(0, jsx_runtime_1.jsx)(dialog_1.DialogHeader, { children: (0, jsx_runtime_1.jsx)(dialog_1.DialogTitle, { children: "Edit Bill" }) }), (0, jsx_runtime_1.jsx)(BillEditForm_1.BillEditForm, { bill: bill, onSuccess: () => {
                                setShowEditDialog(false);
                                onUpdate();
                            }, onCancel: () => setShowEditDialog(false) })] }) })] }));
}
// Bill detail and edit form
/**
 *
 * @param root0
 * @param root0.bill
 * @param root0.onSuccess
 * @param root0.onCancel
 */
/**
 * BillDetail function.
 * @param root0
 * @param root0.bill
 * @param root0.onSuccess
 * @param root0.onCancel
 * @returns Function result.
 */
function BillDetail({ bill, onSuccess, onCancel, onEditBill, }) {
    const [isEditing, setIsEditing] = (0, react_1.useState)(false);
    const [endDate, setEndDate] = (0, react_1.useState)(bill.endDate || '');
    const [uploadedFile, setUploadedFile] = (0, react_1.useState)(null);
    const [isAnalyzing, setIsAnalyzing] = (0, react_1.useState)(false);
    const queryClient = (0, react_query_1.useQueryClient)();
    const updateBillMutation = (0, react_query_1.useMutation)({
        mutationFn: async (updates) => {
            const response = await fetch(`/api/bills/${bill.id}`, {
                method: 'PATCH',
                headers: {
                    'Content-Type': 'application/json',
                },
                credentials: 'include',
                body: JSON.stringify(updates),
            });
            if (!response.ok) {
                throw new Error('Failed to update bill');
            }
            return response.json();
        },
        onSuccess: () => {
            queryClient.invalidateQueries({ queryKey: ['/api/bills'] });
            onSuccess();
        },
    });
    const handleSetEndDate = () => {
        /**
         * If function.
         * @param endDate - EndDate parameter.
         */ /**
        * If function.
        * @param endDate - EndDate parameter.
        */
        if (endDate) {
            updateBillMutation.mutate({ endDate });
        }
    };
    const uploadDocumentMutation = (0, react_query_1.useMutation)({
        mutationFn: async (file) => {
            const formData = new FormData();
            formData.append('document', file);
            const response = await fetch(`/api/bills/${bill.id}/upload-document`, {
                method: 'POST',
                credentials: 'include',
                body: formData,
            });
            if (!response.ok) {
                throw new Error('Failed to upload document');
            }
            return response.json();
        },
        onSuccess: (_data) => {
            queryClient.invalidateQueries({ queryKey: ['/api/bills'] });
            setUploadedFile(null);
            onSuccess();
        },
    });
    const applyAiAnalysisMutation = (0, react_query_1.useMutation)({
        mutationFn: async () => {
            const response = await fetch(`/api/bills/${bill.id}/apply-ai-analysis`, {
                method: 'POST',
                credentials: 'include',
                headers: {
                    'Content-Type': 'application/json',
                },
            });
            if (!response.ok) {
                throw new Error('Failed to apply AI analysis');
            }
            return response.json();
        },
        onSuccess: () => {
            queryClient.invalidateQueries({ queryKey: ['/api/bills'] });
            onSuccess();
        },
    });
    const handleFileUpload = (event) => {
        const file = event.target.files?.[0]; /**
         * If function.
         * @param file - File parameter.
         */ /**
        * If function.
        * @param file - File parameter.
        */
        if (file) {
            setUploadedFile(file);
            setIsAnalyzing(true);
            uploadDocumentMutation.mutate(file);
        }
    };
    const handleApplyAiAnalysis = () => {
        applyAiAnalysisMutation.mutate();
    };
    return ((0, jsx_runtime_1.jsxs)("div", { className: 'space-y-6', children: [(0, jsx_runtime_1.jsxs)("div", { className: 'grid grid-cols-2 gap-4', children: [(0, jsx_runtime_1.jsxs)("div", { children: [(0, jsx_runtime_1.jsx)(label_1.Label, { className: 'text-sm font-medium', children: "Bill Number" }), (0, jsx_runtime_1.jsx)("p", { className: 'text-sm text-gray-600', children: bill.billNumber })] }), (0, jsx_runtime_1.jsxs)("div", { children: [(0, jsx_runtime_1.jsx)(label_1.Label, { className: 'text-sm font-medium', children: "Status" }), (0, jsx_runtime_1.jsx)("p", { className: 'text-sm text-gray-600 capitalize', children: bill.status })] }), (0, jsx_runtime_1.jsxs)("div", { children: [(0, jsx_runtime_1.jsx)(label_1.Label, { className: 'text-sm font-medium', children: "Category" }), (0, jsx_runtime_1.jsx)("p", { className: 'text-sm text-gray-600 capitalize', children: bill.category })] }), (0, jsx_runtime_1.jsxs)("div", { children: [(0, jsx_runtime_1.jsx)(label_1.Label, { className: 'text-sm font-medium', children: "Payment Type" }), (0, jsx_runtime_1.jsx)("p", { className: 'text-sm text-gray-600 capitalize', children: bill.paymentType })] }), (0, jsx_runtime_1.jsxs)("div", { children: [(0, jsx_runtime_1.jsx)(label_1.Label, { className: 'text-sm font-medium', children: "Total Amount" }), (0, jsx_runtime_1.jsxs)("p", { className: 'text-sm text-gray-600', children: ["$", Number(bill.totalAmount).toLocaleString()] })] }), (0, jsx_runtime_1.jsxs)("div", { children: [(0, jsx_runtime_1.jsx)(label_1.Label, { className: 'text-sm font-medium', children: "Start Date" }), (0, jsx_runtime_1.jsx)("p", { className: 'text-sm text-gray-600', children: bill.startDate })] })] }), (0, jsx_runtime_1.jsxs)("div", { children: [(0, jsx_runtime_1.jsx)(label_1.Label, { className: 'text-sm font-medium', children: "Title" }), (0, jsx_runtime_1.jsx)("p", { className: 'text-sm text-gray-600', children: bill.title })] }), bill.description && ((0, jsx_runtime_1.jsxs)("div", { children: [(0, jsx_runtime_1.jsx)(label_1.Label, { className: 'text-sm font-medium', children: "Description" }), (0, jsx_runtime_1.jsx)("p", { className: 'text-sm text-gray-600', children: bill.description })] })), bill.vendor && ((0, jsx_runtime_1.jsxs)("div", { children: [(0, jsx_runtime_1.jsx)(label_1.Label, { className: 'text-sm font-medium', children: "Vendor" }), (0, jsx_runtime_1.jsx)("p", { className: 'text-sm text-gray-600', children: bill.vendor })] })), bill.notes && ((0, jsx_runtime_1.jsxs)("div", { children: [(0, jsx_runtime_1.jsx)(label_1.Label, { className: 'text-sm font-medium', children: "Notes" }), (0, jsx_runtime_1.jsx)("p", { className: 'text-sm text-gray-600', children: bill.notes })] })), bill.paymentType === 'recurrent' && ((0, jsx_runtime_1.jsxs)("div", { className: 'border-t pt-4', children: [(0, jsx_runtime_1.jsx)(label_1.Label, { className: 'text-sm font-medium', children: "Recurrence End Date" }), (0, jsx_runtime_1.jsxs)("div", { className: 'flex items-center gap-2 mt-2', children: [(0, jsx_runtime_1.jsx)(input_1.Input, { type: 'date', value: endDate, onChange: (e) => setEndDate(e.target.value), className: 'w-48' }), (0, jsx_runtime_1.jsx)(button_1.Button, { onClick: handleSetEndDate, disabled: updateBillMutation.isPending, size: 'sm', children: updateBillMutation.isPending ? 'Setting...' : 'Set End Date' })] }), (0, jsx_runtime_1.jsx)("p", { className: 'text-xs text-gray-500 mt-1', children: "Setting an end date will stop auto-generation of future bills after this date." })] })), bill.costs && bill.costs.length > 1 && ((0, jsx_runtime_1.jsxs)("div", { children: [(0, jsx_runtime_1.jsx)(label_1.Label, { className: 'text-sm font-medium', children: "Payment Breakdown" }), (0, jsx_runtime_1.jsx)("div", { className: 'space-y-1 mt-1', children: bill.costs.map((cost, index) => ((0, jsx_runtime_1.jsxs)("div", { className: 'flex justify-between text-sm', children: [(0, jsx_runtime_1.jsxs)("span", { children: ["Payment ", index + 1, ":"] }), (0, jsx_runtime_1.jsxs)("span", { children: ["$", Number(cost).toLocaleString()] })] }, index))) })] })), (0, jsx_runtime_1.jsxs)("div", { className: 'border-t pt-4', children: [(0, jsx_runtime_1.jsx)(label_1.Label, { className: 'text-sm font-medium', children: "Document Upload & AI Analysis" }), (0, jsx_runtime_1.jsxs)("div", { className: 'mt-2 space-y-3', children: [bill.documentPath && ((0, jsx_runtime_1.jsxs)("div", { className: 'flex items-center justify-between p-3 bg-gray-50 rounded-lg', children: [(0, jsx_runtime_1.jsxs)("div", { className: 'flex items-center gap-2', children: [(0, jsx_runtime_1.jsx)(lucide_react_1.FileText, { className: 'w-4 h-4 text-blue-600' }), (0, jsx_runtime_1.jsx)("span", { className: 'text-sm', children: bill.documentName }), bill.isAiAnalyzed && ((0, jsx_runtime_1.jsx)(badge_1.Badge, { variant: 'outline', className: 'text-xs', children: "AI Analyzed" }))] }), (0, jsx_runtime_1.jsxs)(button_1.Button, { variant: 'outline', size: 'sm', onClick: () => {
                                            // Download the document
                                            const link = document.createElement('a');
                                            link.href = `/api/bills/${bill.id}/download-document`;
                                            link.download = bill.documentName || 'bill-document';
                                            document.body.appendChild(link);
                                            link.click();
                                            document.body.removeChild(link);
                                        }, className: 'flex items-center gap-1', "data-testid": `button-download-document-${bill.id}`, children: [(0, jsx_runtime_1.jsx)(lucide_react_1.FileText, { className: 'w-3 h-3' }), "Download"] })] })), (0, jsx_runtime_1.jsxs)("div", { className: 'flex items-center gap-2', children: [(0, jsx_runtime_1.jsx)(input_1.Input, { type: 'file', accept: 'image/*,.pdf', onChange: handleFileUpload, disabled: uploadDocumentMutation.isPending, className: 'flex-1' }), uploadDocumentMutation.isPending && ((0, jsx_runtime_1.jsx)("div", { className: 'text-sm text-gray-500', children: "Uploading & analyzing..." }))] }), bill.isAiAnalyzed && bill.aiAnalysisData && ((0, jsx_runtime_1.jsxs)("div", { className: 'space-y-2', children: [(0, jsx_runtime_1.jsxs)("div", { className: 'p-3 bg-blue-50 rounded-lg', children: [(0, jsx_runtime_1.jsx)("div", { className: 'text-sm font-medium text-blue-800', children: "AI Analysis Available" }), (0, jsx_runtime_1.jsxs)("div", { className: 'text-xs text-blue-600 mt-1', children: ["Confidence: ", (bill.aiAnalysisData.confidence * 100).toFixed(1), "%"] })] }), (0, jsx_runtime_1.jsx)(button_1.Button, { onClick: handleApplyAiAnalysis, disabled: applyAiAnalysisMutation.isPending, variant: 'outline', size: 'sm', className: 'w-full', children: applyAiAnalysisMutation.isPending ? 'Applying...' : 'Apply AI Analysis to Form' })] }))] })] }), (0, jsx_runtime_1.jsx)("div", { className: 'border-t pt-4', children: (0, jsx_runtime_1.jsxs)("div", { className: 'flex items-center justify-between', children: [(0, jsx_runtime_1.jsx)(label_1.Label, { className: 'text-sm font-medium', children: "Edit Bill Information" }), (0, jsx_runtime_1.jsx)(button_1.Button, { onClick: onEditBill, variant: 'outline', size: 'sm', children: "Edit Bill" })] }) }), (0, jsx_runtime_1.jsx)("div", { className: 'flex justify-end gap-2 pt-4 border-t', children: (0, jsx_runtime_1.jsx)(button_1.Button, { variant: 'outline', onClick: onCancel, children: "Close" }) })] }));
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiL2hvbWUvcnVubmVyL3dvcmtzcGFjZS9jbGllbnQvc3JjL3BhZ2VzL21hbmFnZXIvYmlsbHMudHN4IiwibWFwcGluZ3MiOiI7O0FBc0dBLHdCQW1mQzs7QUF6bEJELGlDQUE0QztBQUM1Qyx1REFBb0Q7QUFDcEQsK0NBQWdGO0FBQ2hGLGlEQUE4QztBQUM5QyxtREFBZ0Q7QUFDaEQsbURBTWdDO0FBQ2hDLGlEQUE4QztBQUM5QyxpREFBOEM7QUFDOUMsbURBTWdDO0FBRWhDLHVEQUFvRDtBQUNwRCxxREFBa0Y7QUFDbEYsK0NBU3NCO0FBQ3RCLDREQUF5RDtBQUN6RCw4RUFBMkU7QUFDM0UsZ0VBQTZEO0FBQzdELHVEQUE4RTtBQUM5RSxtREFBK0M7QUFDL0MsdUNBQWlDO0FBR2pDLE1BQU0sZUFBZSxHQUFHO0lBQ3RCLFdBQVc7SUFDWCxhQUFhO0lBQ2IsUUFBUTtJQUNSLFdBQVc7SUFDWCxVQUFVO0lBQ1YsVUFBVTtJQUNWLGFBQWE7SUFDYix1QkFBdUI7SUFDdkIsZ0JBQWdCO0lBQ2hCLFNBQVM7SUFDVCxVQUFVO0lBQ1YsT0FBTztJQUNQLE9BQU87Q0FDQyxDQUFDO0FBRVgsTUFBTSxlQUFlLEdBQTJCO0lBQzlDLFNBQVMsRUFBRSxXQUFXO0lBQ3RCLFdBQVcsRUFBRSxhQUFhO0lBQzFCLE1BQU0sRUFBRSxRQUFRO0lBQ2hCLFNBQVMsRUFBRSxXQUFXO0lBQ3RCLFFBQVEsRUFBRSxVQUFVO0lBQ3BCLFFBQVEsRUFBRSxVQUFVO0lBQ3BCLFdBQVcsRUFBRSxhQUFhO0lBQzFCLHFCQUFxQixFQUFFLHVCQUF1QjtJQUM5QyxjQUFjLEVBQUUsZ0JBQWdCO0lBQ2hDLE9BQU8sRUFBRSxTQUFTO0lBQ2xCLFFBQVEsRUFBRSxVQUFVO0lBQ3BCLEtBQUssRUFBRSxPQUFPO0lBQ2QsS0FBSyxFQUFFLE9BQU87Q0FDZixDQUFDO0FBRUYsTUFBTSxNQUFNLEdBQUc7SUFDYixFQUFFLEtBQUssRUFBRSxHQUFHLEVBQUUsS0FBSyxFQUFFLFNBQVMsRUFBRTtJQUNoQyxFQUFFLEtBQUssRUFBRSxH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LEVBQUMsNEJBQTRCLDZCQUM1QixDQUFFLElBQUksQ0FBQyxjQUFzQixDQUFDLFVBQVUsR0FBRyxHQUFHLENBQUMsQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDLFNBQ25FLElBQ0YsRUFDTix1QkFBQyxlQUFNLElBQ0wsT0FBTyxFQUFFLHFCQUFxQixFQUM5QixRQUFRLEVBQUUsdUJBQXVCLENBQUMsU0FBUyxFQUMzQyxPQUFPLEVBQUMsU0FBUyxFQUNqQixJQUFJLEVBQUMsSUFBSSxFQUNULFNBQVMsRUFBQyxRQUFRLFlBRWpCLHVCQUF1QixDQUFDLFNBQVMsQ0FBQyxDQUFDLENBQUMsYUFBYSxDQUFDLENBQUMsQ0FBQywyQkFBMkIsR0FDekUsSUFDTCxDQUNQLElBQ0csSUFDRixFQUdOLGdDQUFLLFNBQVMsRUFBQyxlQUFlLFlBQzVCLGlDQUFLLFNBQVMsRUFBQyxtQ0FBbUMsYUFDaEQsdUJBQUMsYUFBSyxJQUFDLFNBQVMsRUFBQyxxQkFBcUIsc0NBQThCLEVBQ3BFLHVCQUFDLGVBQU0sSUFBQyxPQUFPLEVBQUUsVUFBVSxFQUFFLE9BQU8sRUFBQyxTQUFTLEVBQUMsSUFBSSxFQUFDLElBQUksMEJBRS9DLElBQ0wsR0FDRixFQUdOLGdDQUFLLFNBQVMsRUFBQyxzQ0FBc0MsWUFDbkQsdUJBQUMsZUFBTSxJQUFDLE9BQU8sRUFBQyxTQUFTLEVBQUMsT0FBTyxFQUFFLFFBQVEsc0JBRWxDLEdBQ0wsSUFDRixDQUNQLENBQUM7QUFDSixDQUFDIiwibmFtZXMiOltdLCJzb3VyY2VzIjpbIi9ob21lL3J1bm5lci93b3Jrc3BhY2UvY2xpZW50L3NyYy9wYWdlcy9tYW5hZ2VyL2JpbGxzLnRzeCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyB1c2VTdGF0ZSwgdXNlRWZmZWN0IH0gZnJvbSAncmVhY3QnO1xuaW1wb3J0IHsgSGVhZGVyIH0gZnJvbSAnQC9jb21wb25lbnRzL2xheW91dC9oZWFkZXInO1xuaW1wb3J0IHsgQ2FyZCwgQ2FyZENvbnRlbnQsIENhcmRIZWFkZXIsIENhcmRUaXRsZSB9IGZyb20gJ0AvY29tcG9uZW50cy91aS9jYXJkJztcbmltcG9ydCB7IEJhZGdlIH0gZnJvbSAnQC9jb21wb25lbnRzL3VpL2JhZGdlJztcbmltcG9ydCB7IEJ1dHRvbiB9IGZyb20gJ0AvY29tcG9uZW50cy91aS9idXR0b24nO1xuaW1wb3J0IHtcbiAgU2VsZWN0LFxuICBTZWxlY3RDb250ZW50LFxuICBTZWxlY3RJdGVtLFxuICBTZWxlY3RUcmlnZ2VyLFxuICBTZWxlY3RWYWx1ZSxcbn0gZnJvbSAnQC9jb21wb25lbnRzL3VpL3NlbGVjdCc7XG5pbXBvcnQgeyBJbnB1dCB9IGZyb20gJ0AvY29tcG9uZW50cy91aS9pbnB1dCc7XG5pbXBvcnQgeyBMYWJlbCB9IGZyb20gJ0AvY29tcG9uZW50cy91aS9sYWJlbCc7XG5pbXBvcnQge1xuICBEaWFsb2csXG4gIERpYWxvZ0NvbnRlbnQsXG4gIERpYWxvZ0hlYWRlcixcbiAgRGlhbG9nVGl0bGUsXG4gIERpYWxvZ1RyaWdnZXIsXG59IGZyb20gJ0AvY29tcG9uZW50cy91aS9kaWFsb2cnO1xuaW1wb3J0IHsgVGFicywgVGFic0NvbnRlbnQsIFRhYnNMaXN0LCBUYWJzVHJpZ2dlciB9IGZyb20gJ0AvY29tcG9uZW50cy91aS90YWJzJztcbmltcG9ydCB7IENoZWNrYm94IH0gZnJvbSAnQC9jb21wb25lbnRzL3VpL2NoZWNrYm94JztcbmltcG9ydCB7IFBvcG92ZXIsIFBvcG92ZXJDb250ZW50LCBQb3BvdmVyVHJpZ2dlciB9IGZyb20gJ0AvY29tcG9uZW50cy91aS9wb3BvdmVyJztcbmltcG9ydCB7XG4gIEZpbGVUZXh0LFxuICBQbHVzLFxuICBVcGxvYWQsXG4gIEZpbHRlcixcbiAgQ2FsZW5kYXIsXG4gIEJ1aWxkaW5nIGFzIEJ1aWxkaW5nSWNvbixcbiAgVGFnLFxuICBDaGV2cm9uRG93bixcbn0gZnJvbSAnbHVjaWRlLXJlYWN0JztcbmltcG9ydCB7IEJpbGxFZGl0Rm9ybSB9IGZyb20gJ0AvY29tcG9uZW50cy9CaWxsRWRpdEZvcm0nO1xuaW1wb3J0IHsgQnVpbGRpbmdTZWxlY3Rpb25HcmlkIH0gZnJvbSAnQC9jb21wb25lbnRzL0J1aWxkaW5nU2VsZWN0aW9uR3JpZCc7XG5pbXBvcnQgeyBCaWxsQ3JlYXRlRm9ybSB9IGZyb20gJ0AvY29tcG9uZW50cy9CaWxsQ3JlYXRlRm9ybSc7XG5pbXBvcnQgeyB1c2VRdWVyeSwgdXNlTXV0YXRpb24sIHVzZVF1ZXJ5Q2xpZW50IH0gZnJvbSAnQHRhbnN0YWNrL3JlYWN0LXF1ZXJ5JztcbmltcG9ydCB7IGFwaVJlcXVlc3QgfSBmcm9tICdAL2xpYi9xdWVyeUNsaWVudCc7XG5pbXBvcnQgeyBjbiB9IGZyb20gJ0AvbGliL3V0aWxzJztcbmltcG9ydCB0eXBlIHsgQnVpbGRpbmcsIEJpbGwgfSBmcm9tICdAc2hhcmVkL3NjaGVtYSc7XG5cbmNvbnN0IEJJTExfQ0FURUdPUklFUyA9IFtcbiAgJ2luc3VyYW5jZScsXG4gICdtYWludGVuYW5jZScsXG4gICdzYWxhcnknLFxuICAndXRpbGl0aWVzJyxcbiAgJ2NsZWFuaW5nJyxcbiAgJ3NlY3VyaXR5JyxcbiAgJ2xhbmRzY2FwaW5nJyxcbiAgJ3Byb2Zlc3Npb25hbF9zZXJ2aWNlcycsXG4gICdhZG1pbmlzdHJhdGlvbicsXG4gICdyZXBhaXJzJyxcbiAgJ3N1cHBsaWVzJyxcbiAgJ3RheGVzJyxcbiAgJ290aGVyJyxcbl0gYXMgY29uc3Q7XG5cbmNvbnN0IENBVEVHT1JZX0xBQkVMUzogUmVjb3JkPHN0cmluZywgc3RyaW5nPiA9IHtcbiAgaW5zdXJhbmNlOiAnSW5zdXJhbmNlJyxcbiAgbWFpbnRlbmFuY2U6ICdNYWludGVuYW5jZScsXG4gIHNhbGFyeTogJ1NhbGFyeScsXG4gIHV0aWxpdGllczogJ1V0aWxpdGllcycsXG4gIGNsZWFuaW5nOiAnQ2xlYW5pbmcnLFxuICBzZWN1cml0eTogJ1NlY3VyaXR5JyxcbiAgbGFuZHNjYXBpbmc6ICdMYW5kc2NhcGluZycsXG4gIHByb2Zlc3Npb25hbF9zZXJ2aWNlczogJ1Byb2Zlc3Npb25hbCBTZXJ2aWNlcycsXG4gIGFkbWluaXN0cmF0aW9uOiAnQWRtaW5pc3RyYXRpb24nLFxuICByZXBhaXJzOiAnUmVwYWlycycsXG4gIHN1cHBsaWVzOiAnU3VwcGxpZXMnLFxuICB0YXhlczogJ1RheGVzJyxcbiAgb3RoZXI6ICdPdGhlcicsXG59O1xuXG5jb25zdCBNT05USFMgPSBbXG4gIHsgdmFsdWU6ICcxJywgbGFiZWw6ICdKYW51YXJ5JyB9LFxuICB7IHZhbHVlOiAnMicsIGxhYmVsOiAnRmVicnVhcnknIH0sXG4gIHsgdmFsdWU6ICczJywgbGFiZWw6ICdNYXJjaCcgfSxcbiAgeyB2YWx1ZTogJzQnLCBsYWJlbDogJ0FwcmlsJyB9LFxuICB7IHZhbHVlOiAnNScsIGxhYmVsOiAnTWF5JyB9LFxuICB7IHZhbHVlOiAnNicsIGxhYmVsOiAnSnVuZScgfSxcbiAgeyB2YWx1ZTogJzcnLCBsYWJlbDogJ0p1bHknIH0sXG4gIHsgdmFsdWU6ICc4JywgbGFiZWw6ICdBdWd1c3QnIH0sXG4gIHsgdmFsdWU6ICc5JywgbGFiZWw6ICdTZXB0ZW1iZXInIH0sXG4gIHsgdmFsdWU6ICcxMCcsIGxhYmVsOiAnT2N0b2JlcicgfSxcbiAgeyB2YWx1ZTogJzExJywgbGFiZWw6ICdOb3ZlbWJlcicgfSxcbiAgeyB2YWx1ZTogJzEyJywgbGFiZWw6ICdEZWNlbWJlcicgfSxcbl07XG5cbi8qKlxuICpcbiAqL1xuaW50ZXJmYWNlIEJpbGxGaWx0ZXJzIHtcbiAgYnVpbGRpbmdJZDogc3RyaW5nO1xuICBjYXRlZ29yeTogc3RyaW5nO1xuICB5ZWFyOiBzdHJpbmc7XG4gIG1vbnRoczogc3RyaW5nW107XG59XG5cbi8qKlxuICpcbiAqL1xuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gLyoqXG4gKiBCaWxscyBmdW5jdGlvbi5cbiAqLyAvKipcbiAqIEJpbGxzIGZ1bmN0aW9uLlxuICovXG5cbkJpbGxzKCkge1xuICBjb25zdCBbZmlsdGVycywgc2V0RmlsdGVyc10gPSB1c2VTdGF0ZTxCaWxsRmlsdGVycz4oe1xuICAgIGJ1aWxkaW5nSWQ6ICcnLFxuICAgIGNhdGVnb3J5OiAnJyxcbiAgICB5ZWFyOiBuZXcgRGF0ZSgpLmdldEZ1bGxZZWFyKCkudG9TdHJpbmcoKSxcbiAgICBtb250aHM6IFtdLFxuICB9KTtcbiAgY29uc3QgW3Nob3dDcmVhdGVEaWFsb2csIHNldFNob3dDcmVhdGVEaWFsb2ddID0gdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBbc2hvd0FsbFllYXJzLCBzZXRTaG93QWxsWWVhcnNdID0gdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBxdWVyeUNsaWVudCA9IHVzZVF1ZXJ5Q2xpZW50KCk7XG5cbiAgLy8gRmV0Y2ggYnVpbGRpbmdzIGZvciBmaWx0ZXIgZHJvcGRvd25cbiAgY29uc3Qge1xuICAgIGRhdGE6IGJ1aWxkaW5ncyA9IFtdLFxuICAgIGlzTG9hZGluZzogYnVpbGRpbmdzTG9hZGluZyxcbiAgICBlcnJvcjogYnVpbGRpbmdzRXJyb3IsXG4gIH0gPSB1c2VRdWVyeTxCdWlsZGluZ1tdPih7XG4gICAgcXVlcnlLZXk6IFsnL2FwaS9idWlsZGluZ3MnXSxcbiAgICBxdWVyeUZuOiBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGFwaVJlcXVlc3QoJ0dFVCcsICcvYXBpL2J1aWxkaW5ncycpO1xuICAgICAgcmV0dXJuIGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcbiAgICB9LFxuICB9KTtcblxuICAvLyBGZXRjaCBiaWxscyBiYXNlZCBvbiBmaWx0ZXJzXG4gIGNvbnN0IHsgZGF0YTogYmlsbHMgPSBbXSwgaXNMb2FkaW5nIH0gPSB1c2VRdWVyeTxCaWxsW10+KHtcbiAgICBxdWVyeUtleTogWycvYXBpL2JpbGxzJywgZmlsdGVyc10sXG4gICAgcXVlcnlGbjogYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgcGFyYW1zID0gbmV3IFVSTFNlYXJjaFBhcmFtcygpOyAvKipcbiAgICAgICAqIElmIGZ1bmN0aW9uLlxuICAgICAgICogQHBhcmFtIGZpbHRlcnMuYnVpbGRpbmdJZCAtIEZpbHRlcnMuYnVpbGRpbmdJZCBwYXJhbWV0ZXIuXG4gICAgICAgKi8gLyoqXG4gICAgICAgKiBJZiBmdW5jdGlvbi5cbiAgICAgICAqIEBwYXJhbSBmaWx0ZXJzLmJ1aWxkaW5nSWQgLSBGaWx0ZXJzLmJ1aWxkaW5nSWQgcGFyYW1ldGVyLlxuICAgICAgICovXG5cbiAgICAgIGlmIChmaWx0ZXJzLmJ1aWxkaW5nSWQpIHtcbiAgICAgICAgcGFyYW1zLnNldCgnYnVpbGRpbmdJZCcsIGZpbHRlcnMuYnVpbGRpbmdJZCk7XG4gICAgICB9IC8qKlxuICAgICAgICogSWYgZnVuY3Rpb24uXG4gICAgICAgKiBAcGFyYW0gZmlsdGVycy5jYXRlZ29yeSAmJiBmaWx0ZXJzLmNhdGVnb3J5ICE9PSAnYWxsJyAtIGZpbHRlcnMuY2F0ZWdvcnkgJiYgZmlsdGVycy5jYXRlZ29yeSAhPT0gJ2FsbCcgcGFyYW1ldGVyLlxuICAgICAgICovIC8qKlxuICAgICAgICogSWYgZnVuY3Rpb24uXG4gICAgICAgKiBAcGFyYW0gZmlsdGVycy5jYXRlZ29yeSAmJiBmaWx0ZXJzLmNhdGVnb3J5ICE9PSAnYWxsJyAtIGZpbHRlcnMuY2F0ZWdvcnkgJiYgZmlsdGVycy5jYXRlZ29yeSAhPT0gJ2FsbCcgcGFyYW1ldGVyLlxuICAgICAgICovXG5cbiAgICAgIGlmIChmaWx0ZXJzLmNhdGVnb3J5ICYmIGZpbHRlcnMuY2F0ZWdvcnkgIT09ICdhbGwnKSB7XG4gICAgICAgIHBhcmFtcy5zZXQoJ2NhdGVnb3J5JywgZmlsdGVycy5jYXRlZ29yeSk7XG4gICAgICB9IC8qKlxuICAgICAgICogSWYgZnVuY3Rpb24uXG4gICAgICAgKiBAcGFyYW0gZmlsdGVycy55ZWFyIC0gRmlsdGVycy55ZWFyIHBhcmFtZXRlci5cbiAgICAgICAqLyAvKipcbiAgICAgICAqIElmIGZ1bmN0aW9uLlxuICAgICAgICogQHBhcmFtIGZpbHRlcnMueWVhciAtIEZpbHRlcnMueWVhciBwYXJhbWV0ZXIuXG4gICAgICAgKi9cblxuICAgICAgaWYgKGZpbHRlcnMueWVhcikge1xuICAgICAgICBwYXJhbXMuc2V0KCd5ZWFyJywgZmlsdGVycy55ZWFyKTtcbiAgICAgIH0gLyoqXG4gICAgICAgKiBJZiBmdW5jdGlvbi5cbiAgICAgICAqIEBwYXJhbSBmaWx0ZXJzLm1vbnRocy5sZW5ndGggPiAwIC0gZmlsdGVycy5tb250aHMubGVuZ3RoID4gMCBwYXJhbWV0ZXIuXG4gICAgICAgKi8gLyoqXG4gICAgICAgKiBJZiBmdW5jdGlvbi5cbiAgICAgICAqIEBwYXJhbSBmaWx0ZXJzLm1vbnRocy5sZW5ndGggPiAwIC0gZmlsdGVycy5tb250aHMubGVuZ3RoID4gMCBwYXJhbWV0ZXIuXG4gICAgICAgKi9cblxuICAgICAgaWYgKGZpbHRlcnMubW9udGhzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgcGFyYW1zLnNldCgnbW9udGhzJywgZmlsdGVycy5tb250aHMuam9pbignLCcpKTtcbiAgICAgIH1cblxuICAgICAgY29uc3QgdXJsID0gYC9hcGkvYmlsbHMke3BhcmFtcy50b1N0cmluZygpID8gJz8nICsgcGFyYW1zLnRvU3RyaW5nKCkgOiAnJ31gO1xuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaCh1cmwsIHsgY3JlZGVudGlhbHM6ICdpbmNsdWRlJyB9KTsgLyoqXG4gICAgICAgKiBJZiBmdW5jdGlvbi5cbiAgICAgICAqIEBwYXJhbSAhcmVzcG9uc2Uub2sgLSAhcmVzcG9uc2Uub2sgcGFyYW1ldGVyLlxuICAgICAgICovXG4gICAgICAvKipcbiAgICAgICAqIElmIGZ1bmN0aW9uLlxuICAgICAgICogQHBhcmFtICFyZXNwb25zZS5vayAtICFyZXNwb25zZS5vayBwYXJhbWV0ZXIuXG4gICAgICAgKi9cbiAgICAgIC8qKlxuICAgICAgICogSWYgZnVuY3Rpb24uXG4gICAgICAgKiBAcGFyYW0gIXJlc3BvbnNlLm9rIC0gIXJlc3BvbnNlLm9rIHBhcmFtZXRlci5cbiAgICAgICAqL1xuICAgICAgLyoqXG4gICAgICAgKiBJZiBmdW5jdGlvbi5cbiAgICAgICAqIEBwYXJhbSAhcmVzcG9uc2Uub2sgLSAhcmVzcG9uc2Uub2sgcGFyYW1ldGVyLlxuICAgICAgICovIC8qKlxuICAgICAgICogSWYgZnVuY3Rpb24uXG4gICAgICAgKiBAcGFyYW0gIXJlc3BvbnNlLm9rIC0gIXJlc3BvbnNlLm9rIHBhcmFtZXRlci5cbiAgICAgICAqL1xuXG4gICAgICAvKipcbiAgICAgICAqIElmIGZ1bmN0aW9uLlxuICAgICAgICogQHBhcmFtICFyZXNwb25zZS5vayAtICFyZXNwb25zZS5vayBwYXJhbWV0ZXIuXG4gICAgICAgKi9cbiAgICAgIC8qKlxuICAgICAgICogSWYgZnVuY3Rpb24uXG4gICAgICAgKiBAcGFyYW0gIXJlc3BvbnNlLm9rIC0gIXJlc3BvbnNlLm9rIHBhcmFtZXRlci5cbiAgICAgICAqL1xuICAgICAgLyoqXG4gICAgICAgKiBJZiBmdW5jdGlvbi5cbiAgICAgICAqIEBwYXJhbSAhcmVzcG9uc2Uub2sgLSAhcmVzcG9uc2Uub2sgcGFyYW1ldGVyLlxuICAgICAgICovXG5cbiAgICAgIGlmICghcmVzcG9uc2Uub2spIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBGYWlsZWQgdG8gZmV0Y2ggYmlsbHM6ICR7cmVzcG9uc2Uuc3RhdHVzVGV4dH1gKTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHJlc3BvbnNlLmpzb24oKTtcbiAgICB9LFxuICB9KTtcblxuICAvLyBHcm91cCBiaWxscyBieSBjYXRlZ29yeVxuICBjb25zdCBiaWxsc0J5Q2F0ZWdvcnkgPSBiaWxscy5yZWR1Y2UoKGFjYzogUmVjb3JkPHN0cmluZywgQmlsbFtdPiwgYmlsbDogQmlsbCkgPT4ge1xuICAgIGNvbnN0IGNhdGVnb3J5ID0gYmlsbC5jYXRlZ29yeSB8fCAnb3RoZXInOyAvKipcbiAgICAgKiBJZiBmdW5jdGlvbi5cbiAgICAgKiBAcGFyYW0gIWFjY1tjYXRlZ29yeV0gLSAhYWNjW2NhdGVnb3J5XSBwYXJhbWV0ZXIuXG4gICAgICovIC8qKlxuICAgICAqIElmIGZ1bmN0aW9uLlxuICAgICAqIEBwYXJhbSAhYWNjW2NhdGVnb3J5XSAtICFhY2NbY2F0ZWdvcnldIHBhcmFtZXRlci5cbiAgICAgKi9cblxuICAgIGlmICghYWNjW2NhdGVnb3J5XSkge1xuICAgICAgYWNjW2NhdGVnb3J5XSA9IFtdO1xuICAgIH1cbiAgICBhY2NbY2F0ZWdvcnldLnB1c2goYmlsbCk7XG4gICAgcmV0dXJuIGFjYztcbiAgfSwge30pO1xuXG4gIGNvbnN0IGhhbmRsZUZpbHRlckNoYW5nZSA9IChrZXk6IGtleW9mIEJpbGxGaWx0ZXJzLCB2YWx1ZTogc3RyaW5nIHwgc3RyaW5nW10pID0+IHtcbiAgICBzZXRGaWx0ZXJzKChwcmV2KSA9PiAoeyAuLi5wcmV2LCBba2V5XTogdmFsdWUgfSkpO1xuICB9O1xuXG4gIGNvbnN0IGhhbmRsZU1vbnRoVG9nZ2xlID0gKG1vbnRoVmFsdWU6IHN0cmluZykgPT4ge1xuICAgIHNldEZpbHRlcnMoKHByZXYpID0+ICh7XG4gICAgICAuLi5wcmV2LFxuICAgICAgbW9udGhzOiBwcmV2Lm1vbnRocy5pbmNsdWRlcyhtb250aFZhbHVlKVxuICAgICAgICA/IHByZXYubW9udGhzLmZpbHRlcigobSkgPT4gbSAhPT0gbW9udGhWYWx1ZSlcbiAgICAgICAgOiBbLi4ucHJldi5tb250aHMsIG1vbnRoVmFsdWVdLFxuICAgIH0pKTtcbiAgfTtcblxuICBjb25zdCBoYW5kbGVBbGxNb250aHNUb2dnbGUgPSAoKSA9PiB7XG4gICAgY29uc3QgYWxsTW9udGhWYWx1ZXMgPSBNT05USFMubWFwKChtKSA9PiBtLnZhbHVlKTtcbiAgICBzZXRGaWx0ZXJzKChwcmV2KSA9PiAoe1xuICAgICAgLi4ucHJldixcbiAgICAgIG1vbnRoczogcHJldi5tb250aHMubGVuZ3RoID09PSBhbGxNb250aFZhbHVlcy5sZW5ndGggPyBbXSA6IGFsbE1vbnRoVmFsdWVzLFxuICAgIH0pKTtcbiAgfTtcblxuICBjb25zdCBnZXRNb250aHNEaXNwbGF5VGV4dCA9ICgpID0+IHtcbiAgICAvKipcbiAgICAgKiBJZiBmdW5jdGlvbi5cbiAgICAgKiBAcGFyYW0gZmlsdGVycy5tb250aHMubGVuZ3RoID09PSAwIC0gZmlsdGVycy5tb250aHMubGVuZ3RoID09PSAwIHBhcmFtZXRlci5cbiAgICAgKi8gLyoqXG4gICAgICogSWYgZnVuY3Rpb24uXG4gICAgICogQHBhcmFtIGZpbHRlcnMubW9udGhzLmxlbmd0aCA9PT0gMCAtIGZpbHRlcnMubW9udGhzLmxlbmd0aCA9PT0gMCBwYXJhbWV0ZXIuXG4gICAgICovXG5cbiAgICBpZiAoZmlsdGVycy5tb250aHMubGVuZ3RoID09PSAwKSB7XG4gICAgICByZXR1cm4gJ0FsbCBtb250aHMnO1xuICAgIH0gLyoqXG4gICAgICogSWYgZnVuY3Rpb24uXG4gICAgICogQHBhcmFtIGZpbHRlcnMubW9udGhzLmxlbmd0aCA9PT0gTU9OVEhTLmxlbmd0aCAtIGZpbHRlcnMubW9udGhzLmxlbmd0aCA9PT0gTU9OVEhTLmxlbmd0aCBwYXJhbWV0ZXIuXG4gICAgICovIC8qKlxuICAgICAqIElmIGZ1bmN0aW9uLlxuICAgICAqIEBwYXJhbSBmaWx0ZXJzLm1vbnRocy5sZW5ndGggPT09IE1PTlRIUy5sZW5ndGggLSBmaWx0ZXJzLm1vbnRocy5sZW5ndGggPT09IE1PTlRIUy5sZW5ndGggcGFyYW1ldGVyLlxuICAgICAqL1xuXG4gICAgaWYgKGZpbHRlcnMubW9udGhzLmxlbmd0aCA9PT0gTU9OVEhTLmxlbmd0aCkge1xuICAgICAgcmV0dXJuICdBbGwgbW9udGhzJztcbiAgICB9IC8qKlxuICAgICAqIElmIGZ1bmN0aW9uLlxuICAgICAqIEBwYXJhbSBmaWx0ZXJzLm1vbnRocy5sZW5ndGggPT09IDEgLSBmaWx0ZXJzLm1vbnRocy5sZW5ndGggPT09IDEgcGFyYW1ldGVyLlxuICAgICAqLyAvKipcbiAgICAgKiBJZiBmdW5jdGlvbi5cbiAgICAgKiBAcGFyYW0gZmlsdGVycy5tb250aHMubGVuZ3RoID09PSAxIC0gZmlsdGVycy5tb250aHMubGVuZ3RoID09PSAxIHBhcmFtZXRlci5cbiAgICAgKi9cblxuICAgIGlmIChmaWx0ZXJzLm1vbnRocy5sZW5ndGggPT09IDEpIHtcbiAgICAgIGNvbnN0IG1vbnRoID0gTU9OVEhTLmZpbmQoKG0pID0+IG0udmFsdWUgPT09IGZpbHRlcnMubW9udGhzWzBdKTtcbiAgICAgIHJldHVybiBtb250aD8ubGFiZWwgfHwgJ0FsbCBtb250aHMnO1xuICAgIH1cbiAgICByZXR1cm4gYCR7ZmlsdGVycy5tb250aHMubGVuZ3RofSBtb250aHNgO1xuICB9O1xuXG4gIC8vIEdldCBidWlsZGluZyBjb25zdHJ1Y3Rpb24geWVhciBmb3IgbWluaW11bSB5ZWFyIGNhbGN1bGF0aW9uXG4gIGNvbnN0IHNlbGVjdGVkQnVpbGRpbmcgPSBBcnJheS5pc0FycmF5KGJ1aWxkaW5ncylcbiAgICA/IGJ1aWxkaW5ncy5maW5kKChiKSA9PiBiLmlkID09PSBmaWx0ZXJzLmJ1aWxkaW5nSWQpXG4gICAgOiB1bmRlZmluZWQ7XG4gIGNvbnN0IGJ1aWxkaW5nQ29uc3RydWN0aW9uWWVhciA9IHNlbGVjdGVkQnVpbGRpbmc/LnllYXJCdWlsdCB8fCBuZXcgRGF0ZSgpLmdldEZ1bGxZZWFyKCk7XG4gIGNvbnN0IGN1cnJlbnRZZWFyID0gbmV3IERhdGUoKS5nZXRGdWxsWWVhcigpO1xuXG4gIC8vIEdlbmVyYXRlIHllYXIgb3B0aW9ucyBiYXNlZCBvbiBzaG93IGFsbCB5ZWFycyBzdGF0ZVxuICBjb25zdCBnZXRZZWFyT3B0aW9ucyA9ICgpID0+IHtcbiAgICAvKipcbiAgICAgKiBJZiBmdW5jdGlvbi5cbiAgICAgKiBAcGFyYW0gc2hvd0FsbFllYXJzIC0gU2hvd0FsbFllYXJzIHBhcmFtZXRlci5cbiAgICAgKi8gLyoqXG4gICAgICogSWYgZnVuY3Rpb24uXG4gICAgICogQHBhcmFtIHNob3dBbGxZZWFycyAtIFNob3dBbGxZZWFycyBwYXJhbWV0ZXIuXG4gICAgICovXG5cbiAgICBpZiAoc2hvd0FsbFllYXJzKSB7XG4gICAgICAvLyBTaG93IGFsbCB5ZWFycyBmcm9tIGJ1aWxkaW5nIGNvbnN0cnVjdGlvbiB5ZWFyIHRvIDI1IHllYXJzIGZvcndhcmRcbiAgICAgIGNvbnN0IHN0YXJ0WWVhciA9IGJ1aWxkaW5nQ29uc3RydWN0aW9uWWVhcjtcbiAgICAgIGNvbnN0IGVuZFllYXIgPSBjdXJyZW50WWVhciArIDI1O1xuICAgICAgY29uc3QgdG90YWxZZWFycyA9IGVuZFllYXIgLSBzdGFydFllYXIgKyAxO1xuICAgICAgcmV0dXJuIEFycmF5LmZyb20oeyBsZW5ndGg6IHRvdGFsWWVhcnMgfSwgKF8sIGkpID0+IHN0YXJ0WWVhciArIGkpO1xuICAgIH0gZWxzZSB7XG4gICAgICAvLyBTaG93IGN1cnJlbnQgeWVhciDCsTMgeWVhcnNcbiAgICAgIGNvbnN0IHN0YXJ0WWVhciA9IGN1cnJlbnRZZWFyIC0gMztcbiAgICAgIGNvbnN0IGVuZFllYXIgPSBjdXJyZW50WWVhciArIDM7XG4gICAgICBjb25zdCB0b3RhbFllYXJzID0gZW5kWWVhciAtIHN0YXJ0WWVhciArIDE7XG4gICAgICByZXR1cm4gQXJyYXkuZnJvbSh7IGxlbmd0aDogdG90YWxZZWFycyB9LCAoXywgaSkgPT4gc3RhcnRZZWFyICsgaSk7XG4gICAgfVxuICB9O1xuXG4gIC8vIFNob3cgbG9hZGluZyBzdGF0ZSB3aGlsZSBidWlsZGluZ3MgYXJlIGxvYWRpbmdcbiAgaWYgKGJ1aWxkaW5nc0xvYWRpbmcpIHtcbiAgICByZXR1cm4gKFxuICAgICAgPGRpdiBjbGFzc05hbWU9J2ZsZXgtMSBmbGV4IGZsZXgtY29sIG92ZXJmbG93LWhpZGRlbic+XG4gICAgICAgIDxIZWFkZXIgdGl0bGU9J0JpbGxzIE1hbmFnZW1lbnQnIHN1YnRpdGxlPSdNYW5hZ2UgYnVpbGRpbmcgZXhwZW5zZXMgYW5kIHJldmVudWUgdHJhY2tpbmcnIC8+XG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPSdmbGV4LTEgZmxleCBpdGVtcy1jZW50ZXIganVzdGlmeS1jZW50ZXInPlxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSd0ZXh0LWNlbnRlcic+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0nYW5pbWF0ZS1zcGluIHJvdW5kZWQtZnVsbCBoLTggdy04IGJvcmRlci1iLTIgYm9yZGVyLWJsdWUtNjAwIG14LWF1dG8gbWItNCc+PC9kaXY+XG4gICAgICAgICAgICA8cCBjbGFzc05hbWU9J3RleHQtZ3JheS01MDAnPkxvYWRpbmcgYnVpbGRpbmdzLi4uPC9wPlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICA8L2Rpdj5cbiAgICAgIDwvZGl2PlxuICAgICk7XG4gIH1cblxuICAvLyBTaG93IGVycm9yIHN0YXRlIGlmIGJ1aWxkaW5ncyBmYWlsZWQgdG8gbG9hZFxuICBpZiAoYnVpbGRpbmdzRXJyb3IpIHtcbiAgICByZXR1cm4gKFxuICAgICAgPGRpdiBjbGFzc05hbWU9J2ZsZXgtMSBmbGV4IGZsZXgtY29sIG92ZXJmbG93LWhpZGRlbic+XG4gICAgICAgIDxIZWFkZXIgdGl0bGU9J0JpbGxzIE1hbmFnZW1lbnQnIHN1YnRpdGxlPSdNYW5hZ2UgYnVpbGRpbmcgZXhwZW5zZXMgYW5kIHJldmVudWUgdHJhY2tpbmcnIC8+XG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPSdmbGV4LTEgZmxleCBpdGVtcy1jZW50ZXIganVzdGlmeS1jZW50ZXInPlxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSd0ZXh0LWNlbnRlcic+XG4gICAgICAgICAgICA8cCBjbGFzc05hbWU9J3RleHQtcmVkLTUwMCBtYi00Jz5GYWlsZWQgdG8gbG9hZCBidWlsZGluZ3M8L3A+XG4gICAgICAgICAgICA8YnV0dG9uXG4gICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHdpbmRvdy5sb2NhdGlvbi5yZWxvYWQoKX1cbiAgICAgICAgICAgICAgY2xhc3NOYW1lPSdweC00IHB5LTIgYmctYmx1ZS02MDAgdGV4dC13aGl0ZSByb3VuZGVkIGhvdmVyOmJnLWJsdWUtNzAwJ1xuICAgICAgICAgICAgPlxuICAgICAgICAgICAgICBSZXRyeVxuICAgICAgICAgICAgPC9idXR0b24+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgIDwvZGl2PlxuICAgICAgPC9kaXY+XG4gICAgKTtcbiAgfVxuXG4gIHJldHVybiAoXG4gICAgPGRpdiBjbGFzc05hbWU9J2ZsZXgtMSBmbGV4IGZsZXgtY29sIG92ZXJmbG93LWhpZGRlbic+XG4gICAgICA8SGVhZGVyIHRpdGxlPSdCaWxscyBNYW5hZ2VtZW50JyBzdWJ0aXRsZT0nTWFuYWdlIGJ1aWxkaW5nIGV4cGVuc2VzIGFuZCByZXZlbnVlIHRyYWNraW5nJyAvPlxuXG4gICAgICA8ZGl2IGNsYXNzTmFtZT0nZmxleC0xIG92ZXJmbG93LWF1dG8gcC02Jz5cbiAgICAgICAgPGRpdiBjbGFzc05hbWU9J21heC13LTd4bCBteC1hdXRvIHNwYWNlLXktNic+XG4gICAgICAgICAgey8qIEZpbHRlcnMgU2VjdGlvbiAqL31cbiAgICAgICAgICA8Q2FyZD5cbiAgICAgICAgICAgIDxDYXJkSGVhZGVyPlxuICAgICAgICAgICAgICA8Q2FyZFRpdGxlIGNsYXNzTmFtZT0nZmxleCBpdGVtcy1jZW50ZXIgZ2FwLTInPlxuICAgICAgICAgICAgICAgIDxGaWx0ZXIgY2xhc3NOYW1lPSd3LTUgaC01JyAvPlxuICAgICAgICAgICAgICAgIEZpbHRlcnNcbiAgICAgICAgICAgICAgPC9DYXJkVGl0bGU+XG4gICAgICAgICAgICA8L0NhcmRIZWFkZXI+XG4gICAgICAgICAgICA8Q2FyZENvbnRlbnQ+XG4gICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSdncmlkIGdyaWQtY29scy0xIG1kOmdyaWQtY29scy01IGdhcC00Jz5cbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0nc3BhY2UteS0yJz5cbiAgICAgICAgICAgICAgICAgIDxMYWJlbCBodG1sRm9yPSdidWlsZGluZy1maWx0ZXInIGNsYXNzTmFtZT0nZmxleCBpdGVtcy1jZW50ZXIgZ2FwLTInPlxuICAgICAgICAgICAgICAgICAgICA8QnVpbGRpbmdJY29uIGNsYXNzTmFtZT0ndy00IGgtNCcgLz5cbiAgICAgICAgICAgICAgICAgICAgQnVpbGRpbmdcbiAgICAgICAgICAgICAgICAgIDwvTGFiZWw+XG4gICAgICAgICAgICAgICAgICA8U2VsZWN0XG4gICAgICAgICAgICAgICAgICAgIHZhbHVlPXtmaWx0ZXJzLmJ1aWxkaW5nSWR9XG4gICAgICAgICAgICAgICAgICAgIG9uVmFsdWVDaGFuZ2U9eyh2YWx1ZSkgPT4gaGFuZGxlRmlsdGVyQ2hhbmdlKCdidWlsZGluZ0lkJywgdmFsdWUpfVxuICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICA8U2VsZWN0VHJpZ2dlciBpZD0nYnVpbGRpbmctZmlsdGVyJz5cbiAgICAgICAgICAgICAgICAgICAgICA8U2VsZWN0VmFsdWUgcGxhY2Vob2xkZXI9J1NlbGVjdCBidWlsZGluZycgLz5cbiAgICAgICAgICAgICAgICAgICAgPC9TZWxlY3RUcmlnZ2VyPlxuICAgICAgICAgICAgICAgICAgICA8U2VsZWN0Q29udGVudD5cbiAgICAgICAgICAgICAgICAgICAgICB7QXJyYXkuaXNBcnJheShidWlsZGluZ3MpICYmXG4gICAgICAgICAgICAgICAgICAgICAgICBidWlsZGluZ3MubWFwKChidWlsZGluZzogQnVpbGRpbmcpID0+IChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgPFNlbGVjdEl0ZW0ga2V5PXtidWlsZGluZy5pZH0gdmFsdWU9e2J1aWxkaW5nLmlkfT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7YnVpbGRpbmcubmFtZX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPC9TZWxlY3RJdGVtPlxuICAgICAgICAgICAgICAgICAgICAgICAgKSl9XG4gICAgICAgICAgICAgICAgICAgIDwvU2VsZWN0Q29udGVudD5cbiAgICAgICAgICAgICAgICAgIDwvU2VsZWN0PlxuICAgICAgICAgICAgICAgIDwvZGl2PlxuXG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9J3NwYWNlLXktMic+XG4gICAgICAgICAgICAgICAgICA8TGFiZWwgaHRtbEZvcj0nY2F0ZWdvcnktZmlsdGVyJyBjbGFzc05hbWU9J2ZsZXggaXRlbXMtY2VudGVyIGdhcC0yJz5cbiAgICAgICAgICAgICAgICAgICAgPFRhZyBjbGFzc05hbWU9J3ctNCBoLTQnIC8+XG4gICAgICAgICAgICAgICAgICAgIENhdGVnb3J5XG4gICAgICAgICAgICAgICAgICA8L0xhYmVsPlxuICAgICAgICAgICAgICAgICAgPFNlbGVjdFxuICAgICAgICAgICAgICAgICAgICB2YWx1ZT17ZmlsdGVycy5jYXRlZ29yeX1cbiAgICAgICAgICAgICAgICAgICAgb25WYWx1ZUNoYW5nZT17KHZhbHVlKSA9PiBoYW5kbGVGaWx0ZXJDaGFuZ2UoJ2NhdGVnb3J5JywgdmFsdWUpfVxuICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICA8U2VsZWN0VHJpZ2dlciBpZD0nY2F0ZWdvcnktZmlsdGVyJz5cbiAgICAgICAgICAgICAgICAgICAgICA8U2VsZWN0VmFsdWUgcGxhY2Vob2xkZXI9J0FsbCBjYXRlZ29yaWVzJyAvPlxuICAgICAgICAgICAgICAgICAgICA8L1NlbGVjdFRyaWdnZXI+XG4gICAgICAgICAgICAgICAgICAgIDxTZWxlY3RDb250ZW50PlxuICAgICAgICAgICAgICAgICAgICAgIDxTZWxlY3RJdGVtIHZhbHVlPSdhbGwnPkFsbCBjYXRlZ29yaWVzPC9TZWxlY3RJdGVtPlxuICAgICAgICAgICAgICAgICAgICAgIHtCSUxMX0NBVEVHT1JJRVMubWFwKChjYXRlZ29yeSkgPT4gKFxuICAgICAgICAgICAgICAgICAgICAgICAgPFNlbGVjdEl0ZW0ga2V5PXtjYXRlZ29yeX0gdmFsdWU9e2NhdGVnb3J5fT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAge0NBVEVHT1JZX0xBQkVMU1tjYXRlZ29yeV19XG4gICAgICAgICAgICAgICAgICAgICAgICA8L1NlbGVjdEl0ZW0+XG4gICAgICAgICAgICAgICAgICAgICAgKSl9XG4gICAgICAgICAgICAgICAgICAgIDwvU2VsZWN0Q29udGVudD5cbiAgICAgICAgICAgICAgICAgIDwvU2VsZWN0PlxuICAgICAgICAgICAgICAgIDwvZGl2PlxuXG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9J3NwYWNlLXktMic+XG4gICAgICAgICAgICAgICAgICA8TGFiZWwgaHRtbEZvcj0neWVhci1maWx0ZXInIGNsYXNzTmFtZT0nZmxleCBpdGVtcy1jZW50ZXIgZ2FwLTInPlxuICAgICAgICAgICAgICAgICAgICA8Q2FsZW5kYXIgY2xhc3NOYW1lPSd3LTQgaC00JyAvPlxuICAgICAgICAgICAgICAgICAgICBZZWFyXG4gICAgICAgICAgICAgICAgICA8L0xhYmVsPlxuICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9J3NwYWNlLXktMic+XG4gICAgICAgICAgICAgICAgICAgIDxTZWxlY3RcbiAgICAgICAgICAgICAgICAgICAgICB2YWx1ZT17ZmlsdGVycy55ZWFyfVxuICAgICAgICAgICAgICAgICAgICAgIG9uVmFsdWVDaGFuZ2U9eyh2YWx1ZSkgPT4gaGFuZGxlRmlsdGVyQ2hhbmdlKCd5ZWFyJywgdmFsdWUpfVxuICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgPFNlbGVjdFRyaWdnZXIgaWQ9J3llYXItZmlsdGVyJz5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxTZWxlY3RWYWx1ZSAvPlxuICAgICAgICAgICAgICAgICAgICAgIDwvU2VsZWN0VHJpZ2dlcj5cbiAgICAgICAgICAgICAgICAgICAgICA8U2VsZWN0Q29udGVudCBjbGFzc05hbWU9J21heC1oLVszMDBweF0gb3ZlcmZsb3cteS1hdXRvJz5cbiAgICAgICAgICAgICAgICAgICAgICAgIHtnZXRZZWFyT3B0aW9ucygpLm1hcCgoeWVhcikgPT4gKFxuICAgICAgICAgICAgICAgICAgICAgICAgICA8U2VsZWN0SXRlbSBrZXk9e3llYXJ9IHZhbHVlPXt5ZWFyLnRvU3RyaW5nKCl9PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHt5ZWFyfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHt5ZWFyID09PSBjdXJyZW50WWVhciAmJiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9J21sLTIgdGV4dC14cyB0ZXh0LWJsdWUtNTAwJz4oQ3VycmVudCk8L3NwYW4+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPC9TZWxlY3RJdGVtPlxuICAgICAgICAgICAgICAgICAgICAgICAgKSl9XG4gICAgICAgICAgICAgICAgICAgICAgICB7IXNob3dBbGxZZWFycyAmJiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSdib3JkZXItdCBib3JkZXItZ3JheS0yMDAgbXQtMiBwdC0yJz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8QnV0dG9uXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXJpYW50PSdnaG9zdCdcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNpemU9J3NtJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPSd3LWZ1bGwgdGV4dC1sZWZ0IGp1c3RpZnktc3RhcnQgdGV4dC14cydcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHNldFNob3dBbGxZZWFycyh0cnVlKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBTaG93IG1vcmUgeWVhcnMgKHtidWlsZGluZ0NvbnN0cnVjdGlvblllYXJ9IC0ge2N1cnJlbnRZZWFyICsgMjV9KVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvQnV0dG9uPlxuICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgICAgICB7c2hvd0FsbFllYXJzICYmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9J2JvcmRlci10IGJvcmRlci1ncmF5LTIwMCBtdC0yIHB0LTInPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxCdXR0b25cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhcmlhbnQ9J2dob3N0J1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2l6ZT0nc20nXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9J3ctZnVsbCB0ZXh0LWxlZnQganVzdGlmeS1zdGFydCB0ZXh0LXhzJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DbGljaz17KCkgPT4gc2V0U2hvd0FsbFllYXJzKGZhbHNlKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBTaG93IGZld2VyIHllYXJzICh7Y3VycmVudFllYXIgLSAzfSAtIHtjdXJyZW50WWVhciArIDN9KVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvQnV0dG9uPlxuICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgICAgPC9TZWxlY3RDb250ZW50PlxuICAgICAgICAgICAgICAgICAgICA8L1NlbGVjdD5cbiAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgIDwvZGl2PlxuXG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9J3NwYWNlLXktMic+XG4gICAgICAgICAgICAgICAgICA8TGFiZWwgY2xhc3NOYW1lPSdmbGV4IGl0ZW1zLWNlbnRlciBnYXAtMic+XG4gICAgICAgICAgICAgICAgICAgIDxDYWxlbmRhciBjbGFzc05hbWU9J3ctNCBoLTQnIC8+XG4gICAgICAgICAgICAgICAgICAgIE1vbnRoc1xuICAgICAgICAgICAgICAgICAgPC9MYWJlbD5cbiAgICAgICAgICAgICAgICAgIDxQb3BvdmVyPlxuICAgICAgICAgICAgICAgICAgICA8UG9wb3ZlclRyaWdnZXIgYXNDaGlsZD5cbiAgICAgICAgICAgICAgICAgICAgICA8QnV0dG9uXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXJpYW50PSdvdXRsaW5lJ1xuICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPXtjbihcbiAgICAgICAgICAgICAgICAgICAgICAgICAgJ3ctZnVsbCBqdXN0aWZ5LWJldHdlZW4nLFxuICAgICAgICAgICAgICAgICAgICAgICAgICBmaWx0ZXJzLm1vbnRocy5sZW5ndGggPT09IDAgJiYgJ3RleHQtbXV0ZWQtZm9yZWdyb3VuZCdcbiAgICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAge2dldE1vbnRoc0Rpc3BsYXlUZXh0KCl9XG4gICAgICAgICAgICAgICAgICAgICAgICA8Q2hldnJvbkRvd24gY2xhc3NOYW1lPSdtbC0yIGgtNCB3LTQgc2hyaW5rLTAgb3BhY2l0eS01MCcgLz5cbiAgICAgICAgICAgICAgICAgICAgICA8L0J1dHRvbj5cbiAgICAgICAgICAgICAgICAgICAgPC9Qb3BvdmVyVHJpZ2dlcj5cbiAgICAgICAgICAgICAgICAgICAgPFBvcG92ZXJDb250ZW50IGNsYXNzTmFtZT0ndy02NCBwLTAnIGFsaWduPSdzdGFydCc+XG4gICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9J2JvcmRlci1iIHAtMyc+XG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0nZmxleCBpdGVtcy1jZW50ZXIgc3BhY2UteC0yJz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPENoZWNrYm94XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWQ9J2FsbC1tb250aHMnXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2hlY2tlZD17ZmlsdGVycy5tb250aHMubGVuZ3RoID09PSBNT05USFMubGVuZ3RofVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hlY2tlZENoYW5nZT17aGFuZGxlQWxsTW9udGhzVG9nZ2xlfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICA8TGFiZWxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBodG1sRm9yPSdhbGwtbW9udGhzJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT0ndGV4dC1zbSBmb250LW1lZGl1bSBsZWFkaW5nLW5vbmUgcGVlci1kaXNhYmxlZDpjdXJzb3Itbm90LWFsbG93ZWQgcGVlci1kaXNhYmxlZDpvcGFjaXR5LTcwJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgQWxsIE1vbnRoc1xuICAgICAgICAgICAgICAgICAgICAgICAgICA8L0xhYmVsPlxuICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9J2dyaWQgZ3JpZC1jb2xzLTIgZ2FwLTIgcC0zJz5cbiAgICAgICAgICAgICAgICAgICAgICAgIHtNT05USFMubWFwKChtb250aCkgPT4gKFxuICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGtleT17bW9udGgudmFsdWV9IGNsYXNzTmFtZT0nZmxleCBpdGVtcy1jZW50ZXIgc3BhY2UteC0yJz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8Q2hlY2tib3hcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkPXtgbW9udGgtJHttb250aC52YWx1ZX1gfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2hlY2tlZD17ZmlsdGVycy5tb250aHMuaW5jbHVkZXMobW9udGgudmFsdWUpfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGVja2VkQ2hhbmdlPXsoKSA9PiBoYW5kbGVNb250aFRvZ2dsZShtb250aC52YWx1ZSl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8TGFiZWxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGh0bWxGb3I9e2Btb250aC0ke21vbnRoLnZhbHVlfWB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9J3RleHQtc20gbGVhZGluZy1ub25lIHBlZXItZGlzYWJsZWQ6Y3Vyc29yLW5vdC1hbGxvd2VkIHBlZXItZGlzYWJsZWQ6b3BhY2l0eS03MCdcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7bW9udGgubGFiZWx9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9MYWJlbD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICApKX1cbiAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgPC9Qb3BvdmVyQ29udGVudD5cbiAgICAgICAgICAgICAgICAgIDwvUG9wb3Zlcj5cbiAgICAgICAgICAgICAgICA8L2Rpdj5cblxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSdzcGFjZS15LTInPlxuICAgICAgICAgICAgICAgICAgPExhYmVsIGNsYXNzTmFtZT0naW52aXNpYmxlJz5BY3Rpb25zPC9MYWJlbD5cbiAgICAgICAgICAgICAgICAgIDxEaWFsb2cgb3Blbj17c2hvd0NyZWF0ZURpYWxvZ30gb25PcGVuQ2hhbmdlPXtzZXRTaG93Q3JlYXRlRGlhbG9nfT5cbiAgICAgICAgICAgICAgICAgICAgPERpYWxvZ1RyaWdnZXIgYXNDaGlsZD5cbiAgICAgICAgICAgICAgICAgICAgICA8QnV0dG9uIGNsYXNzTmFtZT0ndy1mdWxsJyBkaXNhYmxlZD17IWZpbHRlcnMuYnVpbGRpbmdJZH0+XG4gICAgICAgICAgICAgICAgICAgICAgICBDcmVhdGUgQmlsbFxuICAgICAgICAgICAgICAgICAgICAgIDwvQnV0dG9uPlxuICAgICAgICAgICAgICAgICAgICA8L0RpYWxvZ1RyaWdnZXI+XG4gICAgICAgICAgICAgICAgICAgIDxEaWFsb2dDb250ZW50IGNsYXNzTmFtZT0nbWF4LXctNHhsIG1heC1oLVs5MHZoXSBvdmVyZmxvdy15LWF1dG8nPlxuICAgICAgICAgICAgICAgICAgICAgIDxEaWFsb2dIZWFkZXI+XG4gICAgICAgICAgICAgICAgICAgICAgICA8RGlhbG9nVGl0bGU+Q3JlYXRlIE5ldyBCaWxsPC9EaWFsb2dUaXRsZT5cbiAgICAgICAgICAgICAgICAgICAgICA8L0RpYWxvZ0hlYWRlcj5cbiAgICAgICAgICAgICAgICAgICAgICA8QmlsbENyZWF0ZUZvcm1cbiAgICAgICAgICAgICAgICAgICAgICAgIGJ1aWxkaW5nSWQ9e2ZpbHRlcnMuYnVpbGRpbmdJZH1cbiAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xvc2U9eygpID0+IHNldFNob3dDcmVhdGVEaWFsb2coZmFsc2UpfVxuICAgICAgICAgICAgICAgICAgICAgICAgb25TdWNjZXNzPXsoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHNldFNob3dDcmVhdGVEaWFsb2coZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICBxdWVyeUNsaWVudC5pbnZhbGlkYXRlUXVlcmllcyh7IHF1ZXJ5S2V5OiBbJy9hcGkvYmlsbHMnXSB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgPC9EaWFsb2dDb250ZW50PlxuICAgICAgICAgICAgICAgICAgPC9EaWFsb2c+XG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgPC9DYXJkQ29udGVudD5cbiAgICAgICAgICA8L0NhcmQ+XG5cbiAgICAgICAgICB7LyogQmlsbHMgRGlzcGxheSAqL31cbiAgICAgICAgICB7IWZpbHRlcnMuYnVpbGRpbmdJZCA/IChcbiAgICAgICAgICAgIDxCdWlsZGluZ1NlbGVjdGlvbkdyaWRcbiAgICAgICAgICAgICAgYnVpbGRpbmdzPXtBcnJheS5pc0FycmF5KGJ1aWxkaW5ncykgPyBidWlsZGluZ3MgOiBbXX1cbiAgICAgICAgICAgICAgb25CdWlsZGluZ1NlbGVjdD17KGJ1aWxkaW5nSWQpID0+IGhhbmRsZUZpbHRlckNoYW5nZSgnYnVpbGRpbmdJZCcsIGJ1aWxkaW5nSWQpfVxuICAgICAgICAgICAgLz5cbiAgICAgICAgICApIDogaXNMb2FkaW5nID8gKFxuICAgICAgICAgICAgPENhcmQ+XG4gICAgICAgICAgICAgIDxDYXJkQ29udGVudCBjbGFzc05hbWU9J3AtOCB0ZXh0LWNlbnRlcic+XG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9J2FuaW1hdGUtc3BpbiB3LTggaC04IGJvcmRlci00IGJvcmRlci1wcmltYXJ5IGJvcmRlci10LXRyYW5zcGFyZW50IHJvdW5kZWQtZnVsbCBteC1hdXRvIG1iLTQnPjwvZGl2PlxuICAgICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT0ndGV4dC1ncmF5LTUwMCc+TG9hZGluZyBiaWxscy4uLjwvcD5cbiAgICAgICAgICAgICAgPC9DYXJkQ29udGVudD5cbiAgICAgICAgICAgIDwvQ2FyZD5cbiAgICAgICAgICApIDogT2JqZWN0LmtleXMoYmlsbHNCeUNhdGVnb3J5KS5sZW5ndGggPT09IDAgPyAoXG4gICAgICAgICAgICA8Q2FyZD5cbiAgICAgICAgICAgICAgPENhcmRDb250ZW50IGNsYXNzTmFtZT0ncC04IHRleHQtY2VudGVyJz5cbiAgICAgICAgICAgICAgICA8aDMgY2xhc3NOYW1lPSd0ZXh0LWxnIGZvbnQtc2VtaWJvbGQgdGV4dC1ncmF5LTYwMCBtYi0yJz5ObyBCaWxscyBGb3VuZDwvaDM+XG4gICAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPSd0ZXh0LWdyYXktNTAwIG1iLTQnPlxuICAgICAgICAgICAgICAgICAgTm8gYmlsbHMgZm91bmQgZm9yIHRoZSBzZWxlY3RlZCBmaWx0ZXJzLiBDcmVhdGUgeW91ciBmaXJzdCBiaWxsIHRvIGdldCBzdGFydGVkLlxuICAgICAgICAgICAgICAgIDwvcD5cbiAgICAgICAgICAgICAgICA8QnV0dG9uIG9uQ2xpY2s9eygpID0+IHNldFNob3dDcmVhdGVEaWFsb2codHJ1ZSl9PlxuICAgICAgICAgICAgICAgICAgQ3JlYXRlIEZpcnN0IEJpbGxcbiAgICAgICAgICAgICAgICA8L0J1dHRvbj5cbiAgICAgICAgICAgICAgPC9DYXJkQ29udGVudD5cbiAgICAgICAgICAgIDwvQ2FyZD5cbiAgICAgICAgICApIDogKFxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9J3NwYWNlLXktNic+XG4gICAgICAgICAgICAgIHtCSUxMX0NBVEVHT1JJRVMuZmlsdGVyKFxuICAgICAgICAgICAgICAgIChjYXRlZ29yeSkgPT5cbiAgICAgICAgICAgICAgICAgICghZmlsdGVycy5jYXRlZ29yeSB8fCBmaWx0ZXJzLmNhdGVnb3J5ID09PSBjYXRlZ29yeSkgJiZcbiAgICAgICAgICAgICAgICAgIGJpbGxzQnlDYXRlZ29yeVtjYXRlZ29yeV0/Lmxlbmd0aCA+IDBcbiAgICAgICAgICAgICAgKS5tYXAoKGNhdGVnb3J5KSA9PiAoXG4gICAgICAgICAgICAgICAgPEJpbGxDYXRlZ29yeVNlY3Rpb25cbiAgICAgICAgICAgICAgICAgIGtleT17Y2F0ZWdvcnl9XG4gICAgICAgICAgICAgICAgICBjYXRlZ29yeT17Y2F0ZWdvcnl9XG4gICAgICAgICAgICAgICAgICBiaWxscz17YmlsbHNCeUNhdGVnb3J5W2NhdGVnb3J5XSB8fCBbXX1cbiAgICAgICAgICAgICAgICAgIG9uQmlsbFVwZGF0ZT17KCkgPT4gcXVlcnlDbGllbnQuaW52YWxpZGF0ZVF1ZXJpZXMoeyBxdWVyeUtleTogWycvYXBpL2JpbGxzJ10gfSl9XG4gICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgKSl9XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICApfVxuICAgICAgICA8L2Rpdj5cbiAgICAgIDwvZGl2PlxuICAgIDwvZGl2PlxuICApO1xufVxuXG4vLyBDb21wb25lbnQgZm9yIGRpc3BsYXlpbmcgYmlsbHMgaW4gYSBjYXRlZ29yeVxuLyoqXG4gKlxuICogQHBhcmFtIHJvb3QwXG4gKiBAcGFyYW0gcm9vdDAuY2F0ZWdvcnlcbiAqIEBwYXJhbSByb290MC5iaWxsc1xuICogQHBhcmFtIHJvb3QwLm9uQmlsbFVwZGF0ZVxuICovXG4vKipcbiAqIEJpbGxDYXRlZ29yeVNlY3Rpb24gZnVuY3Rpb24uXG4gKiBAcGFyYW0gcm9vdDBcbiAqIEBwYXJhbSByb290MC5jYXRlZ29yeVxuICogQHBhcmFtIHJvb3QwLmJpbGxzXG4gKiBAcGFyYW0gcm9vdDAub25CaWxsVXBkYXRlXG4gKiBAcmV0dXJucyBGdW5jdGlvbiByZXN1bHQuXG4gKi9cbmZ1bmN0aW9uIEJpbGxDYXRlZ29yeVNlY3Rpb24oe1xuICBjYXRlZ29yeSxcbiAgYmlsbHMsXG4gIG9uQmlsbFVwZGF0ZSxcbn06IHtcbiAgY2F0ZWdvcnk6IHN0cmluZztcbiAgYmlsbHM6IEJpbGxbXTtcbiAgb25CaWxsVXBkYXRlOiAoKSA9PiB2b2lkO1xufSkge1xuICByZXR1cm4gKFxuICAgIDxDYXJkPlxuICAgICAgPENhcmRIZWFkZXI+XG4gICAgICAgIDxDYXJkVGl0bGUgY2xhc3NOYW1lPSdmbGV4IGl0ZW1zLWNlbnRlciBqdXN0aWZ5LWJldHdlZW4nPlxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSdmbGV4IGl0ZW1zLWNlbnRlciBnYXAtMic+XG4gICAgICAgICAgICA8VGFnIGNsYXNzTmFtZT0ndy01IGgtNScgLz5cbiAgICAgICAgICAgIHtDQVRFR09SWV9MQUJFTFNbY2F0ZWdvcnldfVxuICAgICAgICAgICAgPEJhZGdlIHZhcmlhbnQ9J3NlY29uZGFyeSc+e2JpbGxzLmxlbmd0aH08L0JhZGdlPlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICA8L0NhcmRUaXRsZT5cbiAgICAgIDwvQ2FyZEhlYWRlcj5cbiAgICAgIDxDYXJkQ29udGVudD5cbiAgICAgICAgPGRpdiBjbGFzc05hbWU9J2dyaWQgZ3JpZC1jb2xzLTEgbWQ6Z3JpZC1jb2xzLTIgbGc6Z3JpZC1jb2xzLTMgZ2FwLTQnPlxuICAgICAgICAgIHtiaWxscy5tYXAoKGJpbGwpID0+IChcbiAgICAgICAgICAgIDxCaWxsQ2FyZCBrZXk9e2JpbGwuaWR9IGJpbGw9e2JpbGx9IG9uVXBkYXRlPXtvbkJpbGxVcGRhdGV9IC8+XG4gICAgICAgICAgKSl9XG4gICAgICAgIDwvZGl2PlxuICAgICAgPC9DYXJkQ29udGVudD5cbiAgICA8L0NhcmQ+XG4gICk7XG59XG5cbi8vIENvbXBvbmVudCBmb3IgaW5kaXZpZHVhbCBiaWxsIGNhcmRzXG4vKipcbiAqXG4gKiBAcGFyYW0gcm9vdDBcbiAqIEBwYXJhbSByb290MC5iaWxsXG4gKiBAcGFyYW0gcm9vdDAub25VcGRhdGVcbiAqL1xuLyoqXG4gKiBCaWxsQ2FyZCBmdW5jdGlvbi5cbiAqIEBwYXJhbSByb290MFxuICogQHBhcmFtIHJvb3QwLmJpbGxcbiAqIEBwYXJhbSByb290MC5vblVwZGF0ZVxuICogQHJldHVybnMgRnVuY3Rpb24gcmVzdWx0LlxuICovXG5mdW5jdGlvbiBCaWxsQ2FyZCh7IGJpbGwsIG9uVXBkYXRlIH06IHsgYmlsbDogQmlsbDsgb25VcGRhdGU6ICgpID0+IHZvaWQgfSkge1xuICBjb25zdCBbc2hvd0RldGFpbERpYWxvZywgc2V0U2hvd0RldGFpbERpYWxvZ10gPSB1c2VTdGF0ZShmYWxzZSk7XG4gIGNvbnN0IFtzaG93RWRpdERpYWxvZywgc2V0U2hvd0VkaXREaWFsb2ddID0gdXNlU3RhdGUoZmFsc2UpO1xuXG4gIGNvbnN0IHN0YXR1c0NvbG9ycyA9IHtcbiAgICBkcmFmdDogJ2JnLWdyYXktMTAwIHRleHQtZ3JheS04MDAnLFxuICAgIHNlbnQ6ICdiZy1ibHVlLTEwMCB0ZXh0LWJsdWUtODAwJyxcbiAgICBvdmVyZHVlOiAnYmctcmVkLTEwMCB0ZXh0LXJlZC04MDAnLFxuICAgIHBhaWQ6ICdiZy1ncmVlbi0xMDAgdGV4dC1ncmVlbi04MDAnLFxuICAgIGNhbmNlbGxlZDogJ2JnLWdyYXktMTAwIHRleHQtZ3JheS04MDAnLFxuICB9O1xuXG4gIHJldHVybiAoXG4gICAgPD5cbiAgICAgIDxDYXJkXG4gICAgICAgIGNsYXNzTmFtZT0naG92ZXI6c2hhZG93LW1kIHRyYW5zaXRpb24tc2hhZG93IGN1cnNvci1wb2ludGVyJ1xuICAgICAgICBvbkNsaWNrPXsoKSA9PiBzZXRTaG93RGV0YWlsRGlhbG9nKHRydWUpfVxuICAgICAgPlxuICAgICAgICA8Q2FyZENvbnRlbnQgY2xhc3NOYW1lPSdwLTQnPlxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSdzcGFjZS15LTMnPlxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9J2ZsZXggaXRlbXMtc3RhcnQganVzdGlmeS1iZXR3ZWVuJz5cbiAgICAgICAgICAgICAgPGRpdj5cbiAgICAgICAgICAgICAgICA8aDQgY2xhc3NOYW1lPSdmb250LXNlbWlib2xkIHRleHQtc20nPntiaWxsLnRpdGxlfTwvaDQ+XG4gICAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPSd0ZXh0LXhzIHRleHQtZ3JheS01MDAnPiN7YmlsbC5iaWxsTnVtYmVyfTwvcD5cbiAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgIDxCYWRnZSBjbGFzc05hbWU9e3N0YXR1c0NvbG9yc1tiaWxsLnN0YXR1cyBhcyBrZXlvZiB0eXBlb2Ygc3RhdHVzQ29sb3JzXX0+XG4gICAgICAgICAgICAgICAge2JpbGwuc3RhdHVzfVxuICAgICAgICAgICAgICA8L0JhZGdlPlxuICAgICAgICAgICAgPC9kaXY+XG5cbiAgICAgICAgICAgIHtiaWxsLmRlc2NyaXB0aW9uICYmIChcbiAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPSd0ZXh0LXNtIHRleHQtZ3JheS02MDAgbGluZS1jbGFtcC0yJz57YmlsbC5kZXNjcmlwdGlvbn08L3A+XG4gICAgICAgICAgICApfVxuXG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0nZmxleCBpdGVtcy1jZW50ZXIganVzdGlmeS1iZXR3ZWVuIHRleHQtc20nPlxuICAgICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9J2ZvbnQtbWVkaXVtJz4ke051bWJlcihiaWxsLnRvdGFsQW1vdW50KS50b0xvY2FsZVN0cmluZygpfTwvc3Bhbj5cbiAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPSd0ZXh0LWdyYXktNTAwJz57YmlsbC5wYXltZW50VHlwZX08L3NwYW4+XG4gICAgICAgICAgICA8L2Rpdj5cblxuICAgICAgICAgICAge2JpbGwudmVuZG9yICYmIDxwIGNsYXNzTmFtZT0ndGV4dC14cyB0ZXh0LWdyYXktNTAwJz5WZW5kb3I6IHtiaWxsLnZlbmRvcn08L3A+fVxuXG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0nZmxleCBpdGVtcy1jZW50ZXIgZ2FwLTIgcHQtMic+XG4gICAgICAgICAgICAgIHtiaWxsLmRvY3VtZW50UGF0aCAmJiAoXG4gICAgICAgICAgICAgICAgPEJhZGdlIHZhcmlhbnQ9J291dGxpbmUnIGNsYXNzTmFtZT0ndGV4dC14cyc+XG4gICAgICAgICAgICAgICAgICA8RmlsZVRleHQgY2xhc3NOYW1lPSd3LTMgaC0zIG1yLTEnIC8+XG4gICAgICAgICAgICAgICAgICBEb2N1bWVudFxuICAgICAgICAgICAgICAgIDwvQmFkZ2U+XG4gICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgIHtiaWxsLmlzQWlBbmFseXplZCAmJiAoXG4gICAgICAgICAgICAgICAgPEJhZGdlIHZhcmlhbnQ9J291dGxpbmUnIGNsYXNzTmFtZT0ndGV4dC14cyc+XG4gICAgICAgICAgICAgICAgICBBSSBBbmFseXplZFxuICAgICAgICAgICAgICAgIDwvQmFkZ2U+XG4gICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgIHtiaWxsLm5vdGVzPy5pbmNsdWRlcygnQXV0by1nZW5lcmF0ZWQgZnJvbTonKSAmJiAoXG4gICAgICAgICAgICAgICAgPEJhZGdlIHZhcmlhbnQ9J291dGxpbmUnIGNsYXNzTmFtZT0ndGV4dC14cyc+XG4gICAgICAgICAgICAgICAgICBBdXRvLUdlbmVyYXRlZFxuICAgICAgICAgICAgICAgIDwvQmFkZ2U+XG4gICAgICAgICAgICAgICl9XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgPC9DYXJkQ29udGVudD5cbiAgICAgIDwvQ2FyZD5cblxuICAgICAgey8qIEJpbGwgRGV0YWlsIERpYWxvZyAqL31cbiAgICAgIDxEaWFsb2cgb3Blbj17c2hvd0RldGFpbERpYWxvZ30gb25PcGVuQ2hhbmdlPXtzZXRTaG93RGV0YWlsRGlhbG9nfT5cbiAgICAgICAgPERpYWxvZ0NvbnRlbnQgY2xhc3NOYW1lPSdtYXgtdy0yeGwgbWF4LWgtWzk1dmhdIG92ZXJmbG93LXktYXV0byc+XG4gICAgICAgICAgPERpYWxvZ0hlYWRlcj5cbiAgICAgICAgICAgIDxEaWFsb2dUaXRsZT5CaWxsIERldGFpbHM8L0RpYWxvZ1RpdGxlPlxuICAgICAgICAgIDwvRGlhbG9nSGVhZGVyPlxuICAgICAgICAgIDxCaWxsRGV0YWlsXG4gICAgICAgICAgICBiaWxsPXtiaWxsfVxuICAgICAgICAgICAgb25TdWNjZXNzPXsoKSA9PiB7XG4gICAgICAgICAgICAgIHNldFNob3dEZXRhaWxEaWFsb2coZmFsc2UpO1xuICAgICAgICAgICAgICBvblVwZGF0ZSgpO1xuICAgICAgICAgICAgfX1cbiAgICAgICAgICAgIG9uQ2FuY2VsPXsoKSA9PiBzZXRTaG93RGV0YWlsRGlhbG9nKGZhbHNlKX1cbiAgICAgICAgICAgIG9uRWRpdEJpbGw9eygpID0+IHtcbiAgICAgICAgICAgICAgc2V0U2hvd0RldGFpbERpYWxvZyhmYWxzZSk7XG4gICAgICAgICAgICAgIHNldFNob3dFZGl0RGlhbG9nKHRydWUpO1xuICAgICAgICAgICAgfX1cbiAgICAgICAgICAvPlxuICAgICAgICA8L0RpYWxvZ0NvbnRlbnQ+XG4gICAgICA8L0RpYWxvZz5cblxuICAgICAgey8qIEJpbGwgRWRpdCBEaWFsb2cgKi99XG4gICAgICA8RGlhbG9nIG9wZW49e3Nob3dFZGl0RGlhbG9nfSBvbk9wZW5DaGFuZ2U9e3NldFNob3dFZGl0RGlhbG9nfT5cbiAgICAgICAgPERpYWxvZ0NvbnRlbnQgY2xhc3NOYW1lPSdtYXgtdy00eGwgbWF4LWgtWzk1dmhdIG92ZXJmbG93LXktYXV0byc+XG4gICAgICAgICAgPERpYWxvZ0hlYWRlcj5cbiAgICAgICAgICAgIDxEaWFsb2dUaXRsZT5FZGl0IEJpbGw8L0RpYWxvZ1RpdGxlPlxuICAgICAgICAgIDwvRGlhbG9nSGVhZGVyPlxuICAgICAgICAgIDxCaWxsRWRpdEZvcm1cbiAgICAgICAgICAgIGJpbGw9e2JpbGx9XG4gICAgICAgICAgICBvblN1Y2Nlc3M9eygpID0+IHtcbiAgICAgICAgICAgICAgc2V0U2hvd0VkaXREaWFsb2coZmFsc2UpO1xuICAgICAgICAgICAgICBvblVwZGF0ZSgpO1xuICAgICAgICAgICAgfX1cbiAgICAgICAgICAgIG9uQ2FuY2VsPXsoKSA9PiBzZXRTaG93RWRpdERpYWxvZyhmYWxzZSl9XG4gICAgICAgICAgLz5cbiAgICAgICAgPC9EaWFsb2dDb250ZW50PlxuICAgICAgPC9EaWFsb2c+XG4gICAgPC8+XG4gICk7XG59XG5cbi8vIEJpbGwgZGV0YWlsIGFuZCBlZGl0IGZvcm1cbi8qKlxuICpcbiAqIEBwYXJhbSByb290MFxuICogQHBhcmFtIHJvb3QwLmJpbGxcbiAqIEBwYXJhbSByb290MC5vblN1Y2Nlc3NcbiAqIEBwYXJhbSByb290MC5vbkNhbmNlbFxuICovXG4vKipcbiAqIEJpbGxEZXRhaWwgZnVuY3Rpb24uXG4gKiBAcGFyYW0gcm9vdDBcbiAqIEBwYXJhbSByb290MC5iaWxsXG4gKiBAcGFyYW0gcm9vdDAub25TdWNjZXNzXG4gKiBAcGFyYW0gcm9vdDAub25DYW5jZWxcbiAqIEByZXR1cm5zIEZ1bmN0aW9uIHJlc3VsdC5cbiAqL1xuZnVuY3Rpb24gQmlsbERldGFpbCh7XG4gIGJpbGwsXG4gIG9uU3VjY2VzcyxcbiAgb25DYW5jZWwsXG4gIG9uRWRpdEJpbGwsXG59OiB7XG4gIGJpbGw6IEJpbGw7XG4gIG9uU3VjY2VzczogKCkgPT4gdm9pZDtcbiAgb25DYW5jZWw6ICgpID0+IHZvaWQ7XG4gIG9uRWRpdEJpbGw6ICgpID0+IHZvaWQ7XG59KSB7XG4gIGNvbnN0IFtpc0VkaXRpbmcsIHNldElzRWRpdGluZ10gPSB1c2VTdGF0ZShmYWxzZSk7XG4gIGNvbnN0IFtlbmREYXRlLCBzZXRFbmREYXRlXSA9IHVzZVN0YXRlKGJpbGwuZW5kRGF0ZSB8fCAnJyk7XG4gIGNvbnN0IFt1cGxvYWRlZEZpbGUsIHNldFVwbG9hZGVkRmlsZV0gPSB1c2VTdGF0ZTxGaWxlIHwgbnVsbD4obnVsbCk7XG4gIGNvbnN0IFtpc0FuYWx5emluZywgc2V0SXNBbmFseXppbmddID0gdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBxdWVyeUNsaWVudCA9IHVzZVF1ZXJ5Q2xpZW50KCk7XG5cbiAgY29uc3QgdXBkYXRlQmlsbE11dGF0aW9uID0gdXNlTXV0YXRpb24oe1xuICAgIG11dGF0aW9uRm46IGFzeW5jICh1cGRhdGVzOiBQYXJ0aWFsPEJpbGw+KSA9PiB7XG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKGAvYXBpL2JpbGxzLyR7YmlsbC5pZH1gLCB7XG4gICAgICAgIG1ldGhvZDogJ1BBVENIJyxcbiAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICAgIH0sXG4gICAgICAgIGNyZWRlbnRpYWxzOiAnaW5jbHVkZScsXG4gICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHVwZGF0ZXMpLFxuICAgICAgfSk7XG5cbiAgICAgIGlmICghcmVzcG9uc2Uub2spIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdGYWlsZWQgdG8gdXBkYXRlIGJpbGwnKTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHJlc3BvbnNlLmpzb24oKTtcbiAgICB9LFxuICAgIG9uU3VjY2VzczogKCkgPT4ge1xuICAgICAgcXVlcnlDbGllbnQuaW52YWxpZGF0ZVF1ZXJpZXMoeyBxdWVyeUtleTogWycvYXBpL2JpbGxzJ10gfSk7XG4gICAgICBvblN1Y2Nlc3MoKTtcbiAgICB9LFxuICB9KTtcblxuICBjb25zdCBoYW5kbGVTZXRFbmREYXRlID0gKCkgPT4ge1xuICAgIC8qKlxuICAgICAqIElmIGZ1bmN0aW9uLlxuICAgICAqIEBwYXJhbSBlbmREYXRlIC0gRW5kRGF0ZSBwYXJhbWV0ZXIuXG4gICAgICovIC8qKlxuICAgICAqIElmIGZ1bmN0aW9uLlxuICAgICAqIEBwYXJhbSBlbmREYXRlIC0gRW5kRGF0ZSBwYXJhbWV0ZXIuXG4gICAgICovXG5cbiAgICBpZiAoZW5kRGF0ZSkge1xuICAgICAgdXBkYXRlQmlsbE11dGF0aW9uLm11dGF0ZSh7IGVuZERhdGUgfSk7XG4gICAgfVxuICB9O1xuXG4gIGNvbnN0IHVwbG9hZERvY3VtZW50TXV0YXRpb24gPSB1c2VNdXRhdGlvbih7XG4gICAgbXV0YXRpb25GbjogYXN5bmMgKGZpbGU6IEZpbGUpID0+IHtcbiAgICAgIGNvbnN0IGZvcm1EYXRhID0gbmV3IEZvcm1EYXRhKCk7XG4gICAgICBmb3JtRGF0YS5hcHBlbmQoJ2RvY3VtZW50JywgZmlsZSk7XG5cbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2goYC9hcGkvYmlsbHMvJHtiaWxsLmlkfS91cGxvYWQtZG9jdW1lbnRgLCB7XG4gICAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgICBjcmVkZW50aWFsczogJ2luY2x1ZGUnLFxuICAgICAgICBib2R5OiBmb3JtRGF0YSxcbiAgICAgIH0pO1xuXG4gICAgICBpZiAoIXJlc3BvbnNlLm9rKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignRmFpbGVkIHRvIHVwbG9hZCBkb2N1bWVudCcpO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gcmVzcG9uc2UuanNvbigpO1xuICAgIH0sXG4gICAgb25TdWNjZXNzOiAoX2RhdGEpID0+IHtcbiAgICAgIHF1ZXJ5Q2xpZW50LmludmFsaWRhdGVRdWVyaWVzKHsgcXVlcnlLZXk6IFsnL2FwaS9iaWxscyddIH0pO1xuICAgICAgc2V0VXBsb2FkZWRGaWxlKG51bGwpO1xuICAgICAgb25TdWNjZXNzKCk7XG4gICAgfSxcbiAgfSk7XG5cbiAgY29uc3QgYXBwbHlBaUFuYWx5c2lzTXV0YXRpb24gPSB1c2VNdXRhdGlvbih7XG4gICAgbXV0YXRpb25GbjogYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaChgL2FwaS9iaWxscy8ke2JpbGwuaWR9L2FwcGx5LWFpLWFuYWx5c2lzYCwge1xuICAgICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgICAgY3JlZGVudGlhbHM6ICdpbmNsdWRlJyxcbiAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICAgIH0sXG4gICAgICB9KTtcblxuICAgICAgaWYgKCFyZXNwb25zZS5vaykge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0ZhaWxlZCB0byBhcHBseSBBSSBhbmFseXNpcycpO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gcmVzcG9uc2UuanNvbigpO1xuICAgIH0sXG4gICAgb25TdWNjZXNzOiAoKSA9PiB7XG4gICAgICBxdWVyeUNsaWVudC5pbnZhbGlkYXRlUXVlcmllcyh7IHF1ZXJ5S2V5OiBbJy9hcGkvYmlsbHMnXSB9KTtcbiAgICAgIG9uU3VjY2VzcygpO1xuICAgIH0sXG4gIH0pO1xuXG4gIGNvbnN0IGhhbmRsZUZpbGVVcGxvYWQgPSAoZXZlbnQ6IFJlYWN0LkNoYW5nZUV2ZW50PEhUTUxJbnB1dEVsZW1lbnQ+KSA9PiB7XG4gICAgY29uc3QgZmlsZSA9IGV2ZW50LnRhcmdldC5maWxlcz8uWzBdOyAvKipcbiAgICAgKiBJZiBmdW5jdGlvbi5cbiAgICAgKiBAcGFyYW0gZmlsZSAtIEZpbGUgcGFyYW1ldGVyLlxuICAgICAqLyAvKipcbiAgICAgKiBJZiBmdW5jdGlvbi5cbiAgICAgKiBAcGFyYW0gZmlsZSAtIEZpbGUgcGFyYW1ldGVyLlxuICAgICAqL1xuXG4gICAgaWYgKGZpbGUpIHtcbiAgICAgIHNldFVwbG9hZGVkRmlsZShmaWxlKTtcbiAgICAgIHNldElzQW5hbHl6aW5nKHRydWUpO1xuICAgICAgdXBsb2FkRG9jdW1lbnRNdXRhdGlvbi5tdXRhdGUoZmlsZSk7XG4gICAgfVxuICB9O1xuXG4gIGNvbnN0IGhhbmRsZUFwcGx5QWlBbmFseXNpcyA9ICgpID0+IHtcbiAgICBhcHBseUFpQW5hbHlzaXNNdXRhdGlvbi5tdXRhdGUoKTtcbiAgfTtcblxuICByZXR1cm4gKFxuICAgIDxkaXYgY2xhc3NOYW1lPSdzcGFjZS15LTYnPlxuICAgICAgey8qIEJpbGwgSW5mb3JtYXRpb24gKi99XG4gICAgICA8ZGl2IGNsYXNzTmFtZT0nZ3JpZCBncmlkLWNvbHMtMiBnYXAtNCc+XG4gICAgICAgIDxkaXY+XG4gICAgICAgICAgPExhYmVsIGNsYXNzTmFtZT0ndGV4dC1zbSBmb250LW1lZGl1bSc+QmlsbCBOdW1iZXI8L0xhYmVsPlxuICAgICAgICAgIDxwIGNsYXNzTmFtZT0ndGV4dC1zbSB0ZXh0LWdyYXktNjAwJz57YmlsbC5iaWxsTnVtYmVyfTwvcD5cbiAgICAgICAgPC9kaXY+XG4gICAgICAgIDxkaXY+XG4gICAgICAgICAgPExhYmVsIGNsYXNzTmFtZT0ndGV4dC1zbSBmb250LW1lZGl1bSc+U3RhdHVzPC9MYWJlbD5cbiAgICAgICAgICA8cCBjbGFzc05hbWU9J3RleHQtc20gdGV4dC1ncmF5LTYwMCBjYXBpdGFsaXplJz57YmlsbC5zdGF0dXN9PC9wPlxuICAgICAgICA8L2Rpdj5cbiAgICAgICAgPGRpdj5cbiAgICAgICAgICA8TGFiZWwgY2xhc3NOYW1lPSd0ZXh0LXNtIGZvbnQtbWVkaXVtJz5DYXRlZ29yeTwvTGFiZWw+XG4gICAgICAgICAgPHAgY2xhc3NOYW1lPSd0ZXh0LXNtIHRleHQtZ3JheS02MDAgY2FwaXRhbGl6ZSc+e2JpbGwuY2F0ZWdvcnl9PC9wPlxuICAgICAgICA8L2Rpdj5cbiAgICAgICAgPGRpdj5cbiAgICAgICAgICA8TGFiZWwgY2xhc3NOYW1lPSd0ZXh0LXNtIGZvbnQtbWVkaXVtJz5QYXltZW50IFR5cGU8L0xhYmVsPlxuICAgICAgICAgIDxwIGNsYXNzTmFtZT0ndGV4dC1zbSB0ZXh0LWdyYXktNjAwIGNhcGl0YWxpemUnPntiaWxsLnBheW1lbnRUeXBlfTwvcD5cbiAgICAgICAgPC9kaXY+XG4gICAgICAgIDxkaXY+XG4gICAgICAgICAgPExhYmVsIGNsYXNzTmFtZT0ndGV4dC1zbSBmb250LW1lZGl1bSc+VG90YWwgQW1vdW50PC9MYWJlbD5cbiAgICAgICAgICA8cCBjbGFzc05hbWU9J3RleHQtc20gdGV4dC1ncmF5LTYwMCc+JHtOdW1iZXIoYmlsbC50b3RhbEFtb3VudCkudG9Mb2NhbGVTdHJpbmcoKX08L3A+XG4gICAgICAgIDwvZGl2PlxuICAgICAgICA8ZGl2PlxuICAgICAgICAgIDxMYWJlbCBjbGFzc05hbWU9J3RleHQtc20gZm9udC1tZWRpdW0nPlN0YXJ0IERhdGU8L0xhYmVsPlxuICAgICAgICAgIDxwIGNsYXNzTmFtZT0ndGV4dC1zbSB0ZXh0LWdyYXktNjAwJz57YmlsbC5zdGFydERhdGV9PC9wPlxuICAgICAgICA8L2Rpdj5cbiAgICAgIDwvZGl2PlxuXG4gICAgICB7LyogVGl0bGUgYW5kIERlc2NyaXB0aW9uICovfVxuICAgICAgPGRpdj5cbiAgICAgICAgPExhYmVsIGNsYXNzTmFtZT0ndGV4dC1zbSBmb250LW1lZGl1bSc+VGl0bGU8L0xhYmVsPlxuICAgICAgICA8cCBjbGFzc05hbWU9J3RleHQtc20gdGV4dC1ncmF5LTYwMCc+e2JpbGwudGl0bGV9PC9wPlxuICAgICAgPC9kaXY+XG5cbiAgICAgIHtiaWxsLmRlc2NyaXB0aW9uICYmIChcbiAgICAgICAgPGRpdj5cbiAgICAgICAgICA8TGFiZWwgY2xhc3NOYW1lPSd0ZXh0LXNtIGZvbnQtbWVkaXVtJz5EZXNjcmlwdGlvbjwvTGFiZWw+XG4gICAgICAgICAgPHAgY2xhc3NOYW1lPSd0ZXh0LXNtIHRleHQtZ3JheS02MDAnPntiaWxsLmRlc2NyaXB0aW9ufTwvcD5cbiAgICAgICAgPC9kaXY+XG4gICAgICApfVxuXG4gICAgICB7YmlsbC52ZW5kb3IgJiYgKFxuICAgICAgICA8ZGl2PlxuICAgICAgICAgIDxMYWJlbCBjbGFzc05hbWU9J3RleHQtc20gZm9udC1tZWRpdW0nPlZlbmRvcjwvTGFiZWw+XG4gICAgICAgICAgPHAgY2xhc3NOYW1lPSd0ZXh0LXNtIHRleHQtZ3JheS02MDAnPntiaWxsLnZlbmRvcn08L3A+XG4gICAgICAgIDwvZGl2PlxuICAgICAgKX1cblxuICAgICAge2JpbGwubm90ZXMgJiYgKFxuICAgICAgICA8ZGl2PlxuICAgICAgICAgIDxMYWJlbCBjbGFzc05hbWU9J3RleHQtc20gZm9udC1tZWRpdW0nPk5vdGVzPC9MYWJlbD5cbiAgICAgICAgICA8cCBjbGFzc05hbWU9J3RleHQtc20gdGV4dC1ncmF5LTYwMCc+e2JpbGwubm90ZXN9PC9wPlxuICAgICAgICA8L2Rpdj5cbiAgICAgICl9XG5cbiAgICAgIHsvKiBFbmQgRGF0ZSBNYW5hZ2VtZW50IGZvciBSZWN1cnJlbnQgQmlsbHMgKi99XG4gICAgICB7YmlsbC5wYXltZW50VHlwZSA9PT0gJ3JlY3VycmVudCcgJiYgKFxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT0nYm9yZGVyLXQgcHQtNCc+XG4gICAgICAgICAgPExhYmVsIGNsYXNzTmFtZT0ndGV4dC1zbSBmb250LW1lZGl1bSc+UmVjdXJyZW5jZSBFbmQgRGF0ZTwvTGFiZWw+XG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9J2ZsZXggaXRlbXMtY2VudGVyIGdhcC0yIG10LTInPlxuICAgICAgICAgICAgPElucHV0XG4gICAgICAgICAgICAgIHR5cGU9J2RhdGUnXG4gICAgICAgICAgICAgIHZhbHVlPXtlbmREYXRlfVxuICAgICAgICAgICAgICBvbkNoYW5nZT17KGUpID0+IHNldEVuZERhdGUoZS50YXJnZXQudmFsdWUpfVxuICAgICAgICAgICAgICBjbGFzc05hbWU9J3ctNDgnXG4gICAgICAgICAgICAvPlxuICAgICAgICAgICAgPEJ1dHRvbiBvbkNsaWNrPXtoYW5kbGVTZXRFbmREYXRlfSBkaXNhYmxlZD17dXBkYXRlQmlsbE11dGF0aW9uLmlzUGVuZGluZ30gc2l6ZT0nc20nPlxuICAgICAgICAgICAgICB7dXBkYXRlQmlsbE11dGF0aW9uLmlzUGVuZGluZyA/ICdTZXR0aW5nLi4uJyA6ICdTZXQgRW5kIERhdGUnfVxuICAgICAgICAgICAgPC9CdXR0b24+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgPHAgY2xhc3NOYW1lPSd0ZXh0LXhzIHRleHQtZ3JheS01MDAgbXQtMSc+XG4gICAgICAgICAgICBTZXR0aW5nIGFuIGVuZCBkYXRlIHdpbGwgc3RvcCBhdXRvLWdlbmVyYXRpb24gb2YgZnV0dXJlIGJpbGxzIGFmdGVyIHRoaXMgZGF0ZS5cbiAgICAgICAgICA8L3A+XG4gICAgICAgIDwvZGl2PlxuICAgICAgKX1cblxuICAgICAgey8qIENvc3RzIEJyZWFrZG93biAqL31cbiAgICAgIHtiaWxsLmNvc3RzICYmIGJpbGwuY29zdHMubGVuZ3RoID4gMSAmJiAoXG4gICAgICAgIDxkaXY+XG4gICAgICAgICAgPExhYmVsIGNsYXNzTmFtZT0ndGV4dC1zbSBmb250LW1lZGl1bSc+UGF5bWVudCBCcmVha2Rvd248L0xhYmVsPlxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSdzcGFjZS15LTEgbXQtMSc+XG4gICAgICAgICAgICB7YmlsbC5jb3N0cy5tYXAoKGNvc3QsIGluZGV4KSA9PiAoXG4gICAgICAgICAgICAgIDxkaXYga2V5PXtpbmRleH0gY2xhc3NOYW1lPSdmbGV4IGp1c3RpZnktYmV0d2VlbiB0ZXh0LXNtJz5cbiAgICAgICAgICAgICAgICA8c3Bhbj5QYXltZW50IHtpbmRleCArIDF9Ojwvc3Bhbj5cbiAgICAgICAgICAgICAgICA8c3Bhbj4ke051bWJlcihjb3N0KS50b0xvY2FsZVN0cmluZygpfTwvc3Bhbj5cbiAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICApKX1cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgPC9kaXY+XG4gICAgICApfVxuXG4gICAgICB7LyogRG9jdW1lbnQgVXBsb2FkIFNlY3Rpb24gKi99XG4gICAgICA8ZGl2IGNsYXNzTmFtZT0nYm9yZGVyLXQgcHQtNCc+XG4gICAgICAgIDxMYWJlbCBjbGFzc05hbWU9J3RleHQtc20gZm9udC1tZWRpdW0nPkRvY3VtZW50IFVwbG9hZCAmIEFJIEFuYWx5c2lzPC9MYWJlbD5cbiAgICAgICAgPGRpdiBjbGFzc05hbWU9J210LTIgc3BhY2UteS0zJz5cbiAgICAgICAgICB7LyogQ3VycmVudCBkb2N1bWVudCBpbmZvICovfVxuICAgICAgICAgIHtiaWxsLmRvY3VtZW50UGF0aCAmJiAoXG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0nZmxleCBpdGVtcy1jZW50ZXIganVzdGlmeS1iZXR3ZWVuIHAtMyBiZy1ncmF5LTUwIHJvdW5kZWQtbGcnPlxuICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0nZmxleCBpdGVtcy1jZW50ZXIgZ2FwLTInPlxuICAgICAgICAgICAgICAgIDxGaWxlVGV4dCBjbGFzc05hbWU9J3ctNCBoLTQgdGV4dC1ibHVlLTYwMCcgLz5cbiAgICAgICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9J3RleHQtc20nPntiaWxsLmRvY3VtZW50TmFtZX08L3NwYW4+XG4gICAgICAgICAgICAgICAge2JpbGwuaXNBaUFuYWx5emVkICYmIChcbiAgICAgICAgICAgICAgICAgIDxCYWRnZSB2YXJpYW50PSdvdXRsaW5lJyBjbGFzc05hbWU9J3RleHQteHMnPlxuICAgICAgICAgICAgICAgICAgICBBSSBBbmFseXplZFxuICAgICAgICAgICAgICAgICAgPC9CYWRnZT5cbiAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgPEJ1dHRvblxuICAgICAgICAgICAgICAgIHZhcmlhbnQ9J291dGxpbmUnXG4gICAgICAgICAgICAgICAgc2l6ZT0nc20nXG4gICAgICAgICAgICAgICAgb25DbGljaz17KCkgPT4ge1xuICAgICAgICAgICAgICAgICAgLy8gRG93bmxvYWQgdGhlIGRvY3VtZW50XG4gICAgICAgICAgICAgICAgICBjb25zdCBsaW5rID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYScpO1xuICAgICAgICAgICAgICAgICAgbGluay5ocmVmID0gYC9hcGkvYmlsbHMvJHtiaWxsLmlkfS9kb3dubG9hZC1kb2N1bWVudGA7XG4gICAgICAgICAgICAgICAgICBsaW5rLmRvd25sb2FkID0gYmlsbC5kb2N1bWVudE5hbWUgfHwgJ2JpbGwtZG9jdW1lbnQnO1xuICAgICAgICAgICAgICAgICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChsaW5rKTtcbiAgICAgICAgICAgICAgICAgIGxpbmsuY2xpY2soKTtcbiAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmJvZHkucmVtb3ZlQ2hpbGQobGluayk7XG4gICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICBjbGFzc05hbWU9J2ZsZXggaXRlbXMtY2VudGVyIGdhcC0xJ1xuICAgICAgICAgICAgICAgIGRhdGEtdGVzdGlkPXtgYnV0dG9uLWRvd25sb2FkLWRvY3VtZW50LSR7YmlsbC5pZH1gfVxuICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgPEZpbGVUZXh0IGNsYXNzTmFtZT0ndy0zIGgtMycgLz5cbiAgICAgICAgICAgICAgICBEb3dubG9hZFxuICAgICAgICAgICAgICA8L0J1dHRvbj5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICl9XG5cbiAgICAgICAgICB7LyogRmlsZSB1cGxvYWQgKi99XG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9J2ZsZXggaXRlbXMtY2VudGVyIGdhcC0yJz5cbiAgICAgICAgICAgIDxJbnB1dFxuICAgICAgICAgICAgICB0eXBlPSdmaWxlJ1xuICAgICAgICAgICAgICBhY2NlcHQ9J2ltYWdlLyosLnBkZidcbiAgICAgICAgICAgICAgb25DaGFuZ2U9e2hhbmRsZUZpbGVVcGxvYWR9XG4gICAgICAgICAgICAgIGRpc2FibGVkPXt1cGxvYWREb2N1bWVudE11dGF0aW9uLmlzUGVuZGluZ31cbiAgICAgICAgICAgICAgY2xhc3NOYW1lPSdmbGV4LTEnXG4gICAgICAgICAgICAvPlxuICAgICAgICAgICAge3VwbG9hZERvY3VtZW50TXV0YXRpb24uaXNQZW5kaW5nICYmIChcbiAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9J3RleHQtc20gdGV4dC1ncmF5LTUwMCc+VXBsb2FkaW5nICYgYW5hbHl6aW5nLi4uPC9kaXY+XG4gICAgICAgICAgICApfVxuICAgICAgICAgIDwvZGl2PlxuXG4gICAgICAgICAgey8qIEFJIEFuYWx5c2lzIEFjdGlvbnMgKi99XG4gICAgICAgICAge2JpbGwuaXNBaUFuYWx5emVkICYmIGJpbGwuYWlBbmFseXNpc0RhdGEgJiYgKFxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9J3NwYWNlLXktMic+XG4gICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSdwLTMgYmctYmx1ZS01MCByb3VuZGVkLWxnJz5cbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0ndGV4dC1zbSBmb250LW1lZGl1bSB0ZXh0LWJsdWUtODAwJz5BSSBBbmFseXNpcyBBdmFpbGFibGU8L2Rpdj5cbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0ndGV4dC14cyB0ZXh0LWJsdWUtNjAwIG10LTEnPlxuICAgICAgICAgICAgICAgICAgQ29uZmlkZW5jZTogeygoYmlsbC5haUFuYWx5c2lzRGF0YSBhcyBhbnkpLmNvbmZpZGVuY2UgKiAxMDApLnRvRml4ZWQoMSl9JVxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgPEJ1dHRvblxuICAgICAgICAgICAgICAgIG9uQ2xpY2s9e2hhbmRsZUFwcGx5QWlBbmFseXNpc31cbiAgICAgICAgICAgICAgICBkaXNhYmxlZD17YXBwbHlBaUFuYWx5c2lzTXV0YXRpb24uaXNQZW5kaW5nfVxuICAgICAgICAgICAgICAgIHZhcmlhbnQ9J291dGxpbmUnXG4gICAgICAgICAgICAgICAgc2l6ZT0nc20nXG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lPSd3LWZ1bGwnXG4gICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICB7YXBwbHlBaUFuYWx5c2lzTXV0YXRpb24uaXNQZW5kaW5nID8gJ0FwcGx5aW5nLi4uJyA6ICdBcHBseSBBSSBBbmFseXNpcyB0byBGb3JtJ31cbiAgICAgICAgICAgICAgPC9CdXR0b24+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICApfVxuICAgICAgICA8L2Rpdj5cbiAgICAgIDwvZGl2PlxuXG4gICAgICB7LyogRWRpdCBNb2RlIFRvZ2dsZSAqL31cbiAgICAgIDxkaXYgY2xhc3NOYW1lPSdib3JkZXItdCBwdC00Jz5cbiAgICAgICAgPGRpdiBjbGFzc05hbWU9J2ZsZXggaXRlbXMtY2VudGVyIGp1c3RpZnktYmV0d2Vlbic+XG4gICAgICAgICAgPExhYmVsIGNsYXNzTmFtZT0ndGV4dC1zbSBmb250LW1lZGl1bSc+RWRpdCBCaWxsIEluZm9ybWF0aW9uPC9MYWJlbD5cbiAgICAgICAgICA8QnV0dG9uIG9uQ2xpY2s9e29uRWRpdEJpbGx9IHZhcmlhbnQ9J291dGxpbmUnIHNpemU9J3NtJz5cbiAgICAgICAgICAgIEVkaXQgQmlsbFxuICAgICAgICAgIDwvQnV0dG9uPlxuICAgICAgICA8L2Rpdj5cbiAgICAgIDwvZGl2PlxuXG4gICAgICB7LyogQWN0aW9ucyAqL31cbiAgICAgIDxkaXYgY2xhc3NOYW1lPSdmbGV4IGp1c3RpZnktZW5kIGdhcC0yIHB0LTQgYm9yZGVyLXQnPlxuICAgICAgICA8QnV0dG9uIHZhcmlhbnQ9J291dGxpbmUnIG9uQ2xpY2s9e29uQ2FuY2VsfT5cbiAgICAgICAgICBDbG9zZVxuICAgICAgICA8L0J1dHRvbj5cbiAgICAgIDwvZGl2PlxuICAgIDwvZGl2PlxuICApO1xufVxuIl0sInZlcnNpb24iOjN9