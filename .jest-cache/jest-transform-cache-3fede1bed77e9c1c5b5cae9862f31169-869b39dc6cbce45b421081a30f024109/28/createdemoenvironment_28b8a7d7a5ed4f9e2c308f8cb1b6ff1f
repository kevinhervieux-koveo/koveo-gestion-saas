5214e6c58e57a612b113bc6fcf2a0be0
"use strict";
/**
 * Koveo Gestion Demo Environment Script
 *
 * Creates or updates a comprehensive demo environment with realistic, fictional data
 * for product demonstrations and QA testing. Complies with Quebec's Law 25.
 *
 * Usage:
 *   npx tsx scripts/create-demo-environment.ts --type demo --name "Demo Organization"
 *   npx tsx scripts/create-demo-environment.ts --type production --name "Test Company"
 *   npx tsx scripts/create-demo-environment.ts --type demo --name "Demo Organization" --database prod
 *
 * Features:
 * - Idempotent upsert logic (updates existing organizations)
 * - Role-based user creation (demo vs production types)
 * - Comprehensive realistic data using @faker-js/faker
 * - Quebec-specific data generation
 * - Complete building, residence, and user ecosystem
 * - Realistic bookings, demands, and financial data
 */
var __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {
    if (k2 === undefined) k2 = k;
    var desc = Object.getOwnPropertyDescriptor(m, k);
    if (!desc || ("get" in desc ? !m.__esModule : desc.writable || desc.configurable)) {
      desc = { enumerable: true, get: function() { return m[k]; } };
    }
    Object.defineProperty(o, k2, desc);
}) : (function(o, m, k, k2) {
    if (k2 === undefined) k2 = k;
    o[k2] = m[k];
}));
var __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {
    Object.defineProperty(o, "default", { enumerable: true, value: v });
}) : function(o, v) {
    o["default"] = v;
});
var __importStar = (this && this.__importStar) || (function () {
    var ownKeys = function(o) {
        ownKeys = Object.getOwnPropertyNames || function (o) {
            var ar = [];
            for (var k in o) if (Object.prototype.hasOwnProperty.call(o, k)) ar[ar.length] = k;
            return ar;
        };
        return ownKeys(o);
    };
    return function (mod) {
        if (mod && mod.__esModule) return mod;
        var result = {};
        if (mod != null) for (var k = ownKeys(mod), i = 0; i < k.length; i++) if (k[i] !== "default") __createBinding(result, mod, k[i]);
        __setModuleDefault(result, mod);
        return result;
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
const drizzle_orm_1 = require("drizzle-orm");
const faker_1 = require("@faker-js/faker");
const bcrypt = __importStar(require("bcryptjs"));
const fs = __importStar(require("fs"));
const path = __importStar(require("path"));
const schema = __importStar(require("../shared/schema"));
// Database connection variables
let db;
let closeConnection;
async function initializeDatabase(targetDatabase) {
    if (targetDatabase === 'prod') {
        console.log('⚠️ WARNING: Targeting PRODUCTION database (DATABASE_URL_KOVEO)');
        console.log('⚠️ This will create demo data in the production environment!');
        console.log('');
        // Use production database
        const DATABASE_URL_KOVEO = process.env.DATABASE_URL_KOVEO;
        if (!DATABASE_URL_KOVEO) {
            console.error('❌ DATABASE_URL_KOVEO environment variable is required for production database');
            process.exit(1);
        }
        const { Pool } = await Promise.resolve().then(() => __importStar(require('@neondatabase/serverless')));
        const { drizzle } = await Promise.resolve().then(() => __importStar(require('drizzle-orm/neon-serverless')));
        const pool = new Pool({ connectionString: DATABASE_URL_KOVEO });
        db = drizzle({ client: pool, schema });
        closeConnection = async () => {
            await pool.end();
        };
        console.log('🔗 Connected to PRODUCTION database (DATABASE_URL_KOVEO)');
    }
    else {
        // Use development database (default)
        const { db: sharedDb } = await Promise.resolve().then(() => __importStar(require('../server/db')));
        db = sharedDb;
        closeConnection = async () => {
            // Connection will be managed by the shared pool
        };
        console.log('🔗 Connected to DEVELOPMENT database (DATABASE_URL)');
    }
}
// Configuration constants
const BUILDINGS_PER_ORG = 5;
const MIN_RESIDENCES_PER_BUILDING = 5;
const MAX_RESIDENCES_PER_BUILDING = 10;
const COMMON_SPACES_PER_BUILDING = 4;
const BOOKINGS_PER_RESERVABLE_SPACE = 8;
const DEMANDS_PER_RESIDENT = 2;
const BILLS_PER_BUILDING_PER_MONTH = 3;
// Quebec-specific data
const QUEBEC_CITIES = [
    'Montreal', 'Quebec City', 'Laval', 'Gatineau', 'Longueuil',
    'Sherbrooke', 'Saguenay', 'Trois-Rivières', 'Terrebonne', 'Saint-Jean-sur-Richelieu'
];
const COMMON_SPACE_TYPES = [
    { name: 'Gym', isBookable: false },
    { name: 'Rooftop Terrace', isBookable: true },
    { name: 'Pool', isBookable: false },
    { name: 'Conference Room', isBookable: true },
    { name: 'Party Room', isBookable: true },
    { name: 'Lobby', isBookable: false },
    { name: 'Storage Room', isBookable: false },
    { name: 'Laundry Room', isBookable: false }
];
const MAINTENANCE_CATEGORIES = [
    'Plumbing', 'Electrical', 'HVAC', 'Structural', 'Appliances', 'General Maintenance'
];
const BILL_CATEGORIES = [
    'insurance', 'maintenance', 'utilities', 'cleaning', 'security',
    'landscaping', 'professional_services', 'administration', 'supplies'
];
/**
 * Parse command line arguments
 */
function parseArguments() {
    const args = process.argv.slice(2);
    let type;
    let name;
    let database = 'dev'; // Default to development database
    for (let i = 0; i < args.length; i++) {
        if (args[i] === '--type' && i + 1 < args.length) {
            const typeValue = args[i + 1];
            if (typeValue === 'demo' || typeValue === 'production') {
                type = typeValue;
            }
            else {
                console.error('❌ --type must be either "demo" or "production"');
                process.exit(1);
            }
            i++; // Skip next argument as it's the value
        }
        else if (args[i] === '--name' && i + 1 < args.length) {
            name = args[i + 1];
            i++; // Skip next argument as it's the value
        }
        else if (args[i] === '--database' && i + 1 < args.length) {
            const databaseValue = args[i + 1];
            if (databaseValue === 'dev' || databaseValue === 'prod') {
                database = databaseValue;
            }
            else {
                console.error('❌ --database must be either "dev" or "prod"');
                process.exit(1);
            }
            i++; // Skip next argument as it's the value
        }
    }
    if (!type) {
        console.error('❌ --type argument is required (demo or production)');
        console.error('Usage: npx tsx scripts/create-demo-environment.ts --type demo --name "Demo Organization" [--database dev|prod]');
        process.exit(1);
    }
    if (!name) {
        console.error('❌ --name argument is required');
        console.error('Usage: npx tsx scripts/create-demo-environment.ts --type demo --name "Demo Organization" [--database dev|prod]');
        process.exit(1);
    }
    return { type, name, database };
}
/**
 * Generate Quebec-specific postal code
 */
function generateQuebecPostalCode() {
    const letters = 'ABCDEFGHIJKLMNOPQRSTUVWXYZ';
    const digits = '0123456789';
    return `H${digits[Math.floor(Math.random() * digits.length)]}${letters[Math.floor(Math.random() * letters.length)]} ${digits[Math.floor(Math.random() * digits.length)]}${letters[Math.floor(Math.random() * letters.length)]}${digits[Math.floor(Math.random() * digits.length)]}`;
}
/**
 * Generate Quebec phone number in format (514) 555-0123
 */
function generateQuebecPhone() {
    const areaCodes = ['514', '438', '450', '579', '418', '581', '819', '873'];
    const areaCode = areaCodes[Math.floor(Math.random() * areaCodes.length)];
    const exchange = faker_1.faker.string.numeric(3);
    const number = faker_1.faker.string.numeric(4);
    return `(${areaCode}) ${exchange}-${number}`;
}
/**
 * Generate realistic Quebec street address
 */
function generateQuebecAddress() {
    const streetTypes = ['rue', 'avenue', 'boulevard', 'montée', 'chemin'];
    const streetNames = [
        'Saint-Laurent', 'Notre-Dame', 'Sainte-Catherine', 'Sherbrooke', 'René-Lévesque',
        'de la Montagne', 'du Parc', 'des Érables', 'des Pins', 'de Maisonneuve'
    ];
    const number = faker_1.faker.number.int({ min: 100, max: 9999 });
    const streetType = streetTypes[Math.floor(Math.random() * streetTypes.length)];
    const streetName = streetNames[Math.floor(Math.random() * streetNames.length)];
    return `${number} ${streetType} ${streetName}`;
}
/**
 * Upsert organization (find existing or create new)
 */
async function upsertOrganization(name, type) {
    try {
        console.log(`🔍 Looking for existing organization: "${name}"`);
        // Check if organization already exists
        const existingOrgs = await db
            .select()
            .from(schema.organizations)
            .where((0, drizzle_orm_1.eq)(schema.organizations.name, name))
            .limit(1);
        if (existingOrgs.length > 0) {
            console.log(`✅ Found existing organization: "${name}" (ID: ${existingOrgs[0].id})`);
            // Update the existing organization with new data
            const [updatedOrg] = await db
                .update(schema.organizations)
                .set({
                type: type === 'demo' ? 'demo' : 'management_company',
                address: generateQuebecAddress(),
                city: QUEBEC_CITIES[Math.floor(Math.random() * QUEBEC_CITIES.length)],
                province: 'QC',
                postalCode: generateQuebecPostalCode(),
                phone: generateQuebecPhone(),
                email: faker_1.faker.internet.email().toLowerCase(),
                website: faker_1.faker.internet.url(),
                registrationNumber: `${type.toUpperCase()}-${faker_1.faker.string.alphanumeric(6).toUpperCase()}`,
                isActive: true,
                updatedAt: new Date()
            })
                .where((0, drizzle_orm_1.eq)(schema.organizations.id, existingOrgs[0].id))
                .returning();
            console.log(`📝 Updated organization "${name}" with new demo data`);
            return updatedOrg;
        }
        else {
            console.log(`➕ Creating new organization: "${name}"`);
            // Create new organization
            const [newOrg] = await db
                .insert(schema.organizations)
                .values({
                name,
                type: type === 'demo' ? 'demo' : 'management_company',
                address: generateQuebecAddress(),
                city: QUEBEC_CITIES[Math.floor(Math.random() * QUEBEC_CITIES.length)],
                province: 'QC',
                postalCode: generateQuebecPostalCode(),
                phone: generateQuebecPhone(),
                email: faker_1.faker.internet.email().toLowerCase(),
                website: faker_1.faker.internet.url(),
                registrationNumber: `${type.toUpperCase()}-${faker_1.faker.string.alphanumeric(6).toUpperCase()}`,
                isActive: true
            })
                .returning();
            console.log(`✅ Created new organization: "${name}" (ID: ${newOrg.id})`);
            return newOrg;
        }
    }
    catch (error) {
        console.error(`❌ Failed to upsert organization "${name}":`, error);
        throw error;
    }
}
/**
 * Create buildings for an organization
 */
async function seedBuildings(organizationId) {
    try {
        console.log(`🔍 Checking buildings for organization ID: ${organizationId}`);
        // Check for existing ACTIVE buildings in this organization
        const existingBuildings = await db
            .select({
            id: schema.buildings.id,
            name: schema.buildings.name,
            organizationId: schema.buildings.organizationId
        })
            .from(schema.buildings)
            .where((0, drizzle_orm_1.and)((0, drizzle_orm_1.eq)(schema.buildings.organizationId, organizationId), (0, drizzle_orm_1.eq)(schema.buildings.isActive, true)));
        const maxBuildings = 5; // Maximum buildings per organization
        const buildingsToCreate = Math.max(0, maxBuildings - existingBuildings.length);
        console.log(`🏢 Found ${existingBuildings.length} existing buildings for this organization (max: ${maxBuildings}).`);
        console.log(`🏢 Will create ${buildingsToCreate} additional buildings.`);
        if (existingBuildings.length >= maxBuildings) {
            console.log(`🏢 Organization already has maximum buildings. Skipping building creation.`);
            return {
                buildings: existingBuildings.map(b => ({
                    id: b.id,
                    name: b.name,
                    organizationId: b.organizationId
                })),
                newBuildingsCreated: 0
            };
        }
        console.log(`🏢 Creating ${buildingsToCreate} additional buildings...`);
        const buildings = [...existingBuildings.map(b => ({
                id: b.id,
                name: b.name,
                organizationId: b.organizationId
            }))];
        for (let i = 1; i <= buildingsToCreate; i++) {
            const buildingName = `${faker_1.faker.location.streetAddress()} Building ${existingBuildings.length + i}`;
            const [building] = await db
                .insert(schema.buildings)
                .values({
                organizationId,
                name: buildingName,
                address: generateQuebecAddress(),
                city: QUEBEC_CITIES[Math.floor(Math.random() * QUEBEC_CITIES.length)],
                province: 'QC',
                postalCode: generateQuebecPostalCode(),
                buildingType: Math.random() > 0.5 ? 'condo' : 'appartement',
                yearBuilt: faker_1.faker.number.int({ min: 1950, max: 2023 }),
                totalUnits: faker_1.faker.number.int({ min: MIN_RESIDENCES_PER_BUILDING, max: MAX_RESIDENCES_PER_BUILDING }),
                totalFloors: faker_1.faker.number.int({ min: 3, max: 25 }),
                parkingSpaces: faker_1.faker.number.int({ min: 10, max: 150 }),
                storageSpaces: faker_1.faker.number.int({ min: 5, max: 75 }),
                amenities: JSON.stringify([
                    'Elevator', 'Parking', 'Storage', 'Gym', 'Pool', 'Concierge'
                ].filter(() => Math.random() > 0.3)),
                managementCompany: faker_1.faker.company.name(),
                bankAccountNumber: faker_1.faker.finance.accountNumber(12),
                isActive: true
            })
                .returning();
            buildings.push({
                id: building.id,
                name: building.name,
                organizationId: building.organizationId
            });
            console.log(`   ✅ Created building: ${building.name}`);
        }
        console.log(`📊 Created ${buildingsToCreate} new buildings (total: ${buildings.length})`);
        return {
            buildings,
            newBuildingsCreated: buildingsToCreate
        };
    }
    catch (error) {
        console.error('❌ Failed to create buildings:', error);
        throw error;
    }
}
/**
 * Create residences for buildings (only for new buildings that don't have residences)
 */
async function seedResidences(buildings, newBuildingsOnly = false) {
    try {
        console.log('🏠 Creating residences...');
        const residences = [];
        for (const building of buildings) {
            // Check if this building already has residences (if we only want new buildings)
            if (newBuildingsOnly) {
                const existingResidences = await db
                    .select({
                    id: schema.residences.id,
                    unitNumber: schema.residences.unitNumber,
                    buildingId: schema.residences.buildingId
                })
                    .from(schema.residences)
                    .where((0, drizzle_orm_1.and)((0, drizzle_orm_1.eq)(schema.residences.buildingId, building.id), (0, drizzle_orm_1.eq)(schema.residences.isActive, true)));
                if (existingResidences.length > 0) {
                    console.log(`   Building ${building.name} already has residences, adding ${existingResidences.length} existing residences...`);
                    // Add existing residences to the array
                    for (const residence of existingResidences) {
                        residences.push({
                            id: residence.id,
                            unitNumber: residence.unitNumber,
                            buildingId: residence.buildingId,
                            buildingName: building.name
                        });
                    }
                    continue;
                }
            }
            // Get the building's totalUnits to create exact number of residences
            const buildingData = await db
                .select({ totalUnits: schema.buildings.totalUnits })
                .from(schema.buildings)
                .where((0, drizzle_orm_1.eq)(schema.buildings.id, building.id))
                .limit(1);
            const residenceCount = buildingData[0]?.totalUnits || MIN_RESIDENCES_PER_BUILDING;
            console.log(`   Creating ${residenceCount} residences for ${building.name}`);
            for (let i = 1; i <= residenceCount; i++) {
                const unitNumber = `${faker_1.faker.number.int({ min: 100, max: 999 })}`;
                const [residence] = await db
                    .insert(schema.residences)
                    .values({
                    buildingId: building.id,
                    unitNumber,
                    floor: faker_1.faker.number.int({ min: 1, max: 15 }),
                    squareFootage: faker_1.faker.number.float({ min: 500, max: 2500, fractionDigits: 0 }).toString(),
                    bedrooms: faker_1.faker.number.int({ min: 1, max: 4 }),
                    bathrooms: faker_1.faker.number.float({ min: 1, max: 3.5, fractionDigits: 1 }).toString(),
                    balcony: Math.random() > 0.4,
                    parkingSpaceNumbers: Math.random() > 0.3 ? [
                        `P${faker_1.faker.number.int({ min: 1, max: 200 })}`
                    ] : [],
                    storageSpaceNumbers: Math.random() > 0.5 ? [
                        `S${faker_1.faker.number.int({ min: 1, max: 100 })}`
                    ] : [],
                    ownershipPercentage: faker_1.faker.number.float({ min: 0.1, max: 5.0, fractionDigits: 2 }).toString(),
                    monthlyFees: faker_1.faker.number.float({ min: 200, max: 800, fractionDigits: 2 }).toString(),
                    isActive: true
                })
                    .returning();
                residences.push({
                    id: residence.id,
                    unitNumber: residence.unitNumber,
                    buildingId: residence.buildingId,
                    buildingName: building.name
                });
            }
        }
        console.log(`📊 Created ${residences.length} residences across all buildings`);
        return residences;
    }
    catch (error) {
        console.error('❌ Failed to create residences:', error);
        throw error;
    }
}
/**
 * Create common spaces for buildings
 */
async function seedCommonSpaces(buildings) {
    try {
        console.log('🏛️ Creating common spaces...');
        const commonSpaces = [];
        for (const building of buildings) {
            console.log(`   Creating ${COMMON_SPACES_PER_BUILDING} common spaces for ${building.name}`);
            // Shuffle and take first N common space types
            const shuffledTypes = [...COMMON_SPACE_TYPES].sort(() => 0.5 - Math.random());
            const selectedTypes = shuffledTypes.slice(0, COMMON_SPACES_PER_BUILDING);
            for (const spaceType of selectedTypes) {
                const [commonSpace] = await db
                    .insert(schema.commonSpaces)
                    .values({
                    name: spaceType.name,
                    description: `${spaceType.name} facility available to residents`,
                    buildingId: building.id,
                    isReservable: spaceType.isBookable,
                    capacity: spaceType.isBookable ? faker_1.faker.number.int({ min: 5, max: 50 }) : null,
                    openingHours: spaceType.isBookable ? JSON.stringify([
                        {
                            day: 'monday',
                            open: '08:00',
                            close: '22:00',
                            isOpen: true,
                            breaks: []
                        },
                        {
                            day: 'tuesday',
                            open: '08:00',
                            close: '22:00',
                            isOpen: true,
                            breaks: []
                        },
                        {
                            day: 'wednesday',
                            open: '08:00',
                            close: '22:00',
                            isOpen: true,
                            breaks: []
                        },
                        {
                            day: 'thursday',
                            open: '08:00',
                            close: '22:00',
                            isOpen: true,
                            breaks: []
                        },
                        {
                            day: 'friday',
                            open: '08:00',
                            close: '22:00',
                            isOpen: true,
                            breaks: []
                        },
                        {
                            day: 'saturday',
                            open: '09:00',
                            close: '21:00',
                            isOpen: true,
                            breaks: []
                        },
                        {
                            day: 'sunday',
                            open: '09:00',
                            close: '21:00',
                            isOpen: true,
                            breaks: []
                        }
                    ]) : null,
                    availableDays: spaceType.isBookable ? JSON.stringify([
                        'monday', 'tuesday', 'wednesday', 'thursday', 'friday', 'saturday', 'sunday'
                    ]) : null,
                    bookingRules: spaceType.isBookable ? 'Maximum 4 hours per booking. Must be booked at least 24 hours in advance.' : null
                })
                    .returning();
                commonSpaces.push({
                    id: commonSpace.id,
                    name: commonSpace.name,
                    buildingId: commonSpace.buildingId,
                    isReservable: commonSpace.isReservable
                });
            }
        }
        console.log(`📊 Created ${commonSpaces.length} common spaces`);
        return commonSpaces;
    }
    catch (error) {
        console.error('❌ Failed to create common spaces:', error);
        throw error;
    }
}
/**
 * Create users with role-based logic and proper organization/building/residence relationships
 * Role-based assignment rules:
 * - Residents/Tenants: assign 1+ residences, then assign user to buildings of those residences
 * - Managers: assign 0+ residences, assign user to building's residences, can assign 0+ other buildings
 */
async function seedUsers(organizationType, organizationId, buildings, residences) {
    try {
        console.log('👥 Creating users with role-based assignments...');
        const users = [];
        const hashedPassword = await bcrypt.hash('demo123456', 10);
        // Create managers (1-2 per building) with residence and building assignments
        console.log('   Creating managers...');
        for (const building of buildings) {
            const managerCount = faker_1.faker.number.int({ min: 1, max: 2 });
            console.log(`   Creating ${managerCount} managers for ${building.name}`);
            for (let i = 0; i < managerCount; i++) {
                const firstName = faker_1.faker.person.firstName();
                const lastName = faker_1.faker.person.lastName();
                const role = organizationType === 'demo' ? 'demo_manager' : 'manager';
                const [user] = await db
                    .insert(schema.users)
                    .values({
                    username: `${firstName.toLowerCase()}.${lastName.toLowerCase()}${faker_1.faker.number.int({ min: 10, max: 99 })}`,
                    email: faker_1.faker.internet.email({ firstName, lastName }).toLowerCase(),
                    password: hashedPassword,
                    firstName,
                    lastName,
                    phone: generateQuebecPhone(),
                    language: Math.random() > 0.3 ? 'fr' : 'en', // 70% French, 30% English for Quebec
                    role: role,
                    isActive: true
                })
                    .returning();
                // Create user-organization relationship - critical for manager building access
                await db
                    .insert(schema.userOrganizations)
                    .values({
                    userId: user.id,
                    organizationId: organizationId,
                    organizationRole: role,
                    isActive: true,
                    canAccessAllOrganizations: false
                });
                // For managers: assign 0+ residences (40% chance of having residences)
                const buildingResidences = residences.filter(r => r.buildingId === building.id);
                const shouldHaveResidences = Math.random() < 0.4;
                let assignedResidences = [];
                if (shouldHaveResidences && buildingResidences.length > 0) {
                    const residenceCount = faker_1.faker.number.int({ min: 1, max: Math.min(3, buildingResidences.length) });
                    assignedResidences = faker_1.faker.helpers.arrayElements(buildingResidences, residenceCount);
                    for (const residence of assignedResidences) {
                        await db
                            .insert(schema.userResidences)
                            .values({
                            userId: user.id,
                            residenceId: residence.id,
                            relationshipType: 'owner', // Managers are typically owners
                            startDate: new Date(Date.now() - faker_1.faker.number.int({ min: 30, max: 365 * 2 }) * 24 * 60 * 60 * 1000),
                            isActive: true
                        });
                    }
                }
                // Managers can be assigned to additional buildings (30% chance)
                const shouldHaveAdditionalBuildings = Math.random() < 0.3;
                const otherBuildings = buildings.filter(b => b.id !== building.id);
                if (shouldHaveAdditionalBuildings && otherBuildings.length > 0) {
                    const additionalBuildingCount = faker_1.faker.number.int({ min: 1, max: Math.min(2, otherBuildings.length) });
                    const additionalBuildings = faker_1.faker.helpers.arrayElements(otherBuildings, additionalBuildingCount);
                    console.log(`     Manager ${user.email} assigned to ${additionalBuildingCount + 1} buildings`);
                }
                users.push({
                    id: user.id,
                    username: user.username,
                    email: user.email,
                    role: user.role,
                    buildingId: building.id,
                    residenceId: assignedResidences.length > 0 ? assignedResidences[0].id : undefined
                });
            }
        }
        // Create residents and tenants with proper residence-first assignments
        console.log('   Creating residents and tenants...');
        // Calculate how many residents/tenants we need (aim for ~80% residence occupancy)
        const targetResidentCount = Math.floor(residences.length * 0.8);
        let createdResidents = 0;
        for (let i = 0; i < targetResidentCount; i++) {
            const firstName = faker_1.faker.person.firstName();
            const lastName = faker_1.faker.person.lastName();
            // 60% residents, 40% tenants
            const isResident = Math.random() < 0.6;
            const baseRole = isResident ? 'resident' : 'tenant';
            const role = organizationType === 'demo' ? `demo_${baseRole}` : baseRole;
            const [user] = await db
                .insert(schema.users)
                .values({
                username: `${firstName.toLowerCase()}.${lastName.toLowerCase()}${faker_1.faker.number.int({ min: 10, max: 99 })}`,
                email: faker_1.faker.internet.email({ firstName, lastName }).toLowerCase(),
                password: hashedPassword,
                firstName,
                lastName,
                phone: generateQuebecPhone(),
                language: Math.random() > 0.3 ? 'fr' : 'en', // 70% French, 30% English for Quebec
                role: role,
                isActive: true
            })
                .returning();
            // Create user-organization relationship
            await db
                .insert(schema.userOrganizations)
                .values({
                userId: user.id,
                organizationId: organizationId,
                organizationRole: role,
                isActive: true,
                canAccessAllOrganizations: false
            });
            // For residents/tenants: assign 1+ residences (primary residence + possible additional ones)
            const primaryResidenceCount = faker_1.faker.number.int({ min: 1, max: 2 });
            const availableResidences = residences.filter(r => !users.some(u => u.residenceId === r.id) // Avoid double-assignment for simplicity
            );
            if (availableResidences.length === 0)
                break; // No more residences available
            const assignedResidences = faker_1.faker.helpers.arrayElements(availableResidences, Math.min(primaryResidenceCount, availableResidences.length));
            let primaryBuildingId = '';
            for (let j = 0; j < assignedResidences.length; j++) {
                const residence = assignedResidences[j];
                const relationshipTypes = ['owner', 'tenant', 'occupant'];
                const relationshipType = j === 0
                    ? (isResident ? 'owner' : 'tenant') // Primary residence matches role
                    : faker_1.faker.helpers.arrayElement(['tenant', 'occupant']); // Secondary residences
                await db
                    .insert(schema.userResidences)
                    .values({
                    userId: user.id,
                    residenceId: residence.id,
                    relationshipType: relationshipType,
                    startDate: new Date(Date.now() - faker_1.faker.number.int({ min: 30, max: 365 * 3 }) * 24 * 60 * 60 * 1000),
                    isActive: true
                });
                if (j === 0) {
                    primaryBuildingId = residence.buildingId;
                }
            }
            users.push({
                id: user.id,
                username: user.username,
                email: user.email,
                role: user.role,
                buildingId: primaryBuildingId,
                residenceId: assignedResidences[0].id
            });
            createdResidents++;
            if (assignedResidences.length > 1) {
                console.log(`     ${role} ${user.email} assigned to ${assignedResidences.length} residences`);
            }
        }
        console.log(`📊 Created ${users.length} users:`);
        console.log(`   - ${users.filter(u => u.role.includes('manager')).length} managers`);
        console.log(`   - ${users.filter(u => u.role.includes('resident')).length} residents`);
        console.log(`   - ${users.filter(u => u.role.includes('tenant')).length} tenants`);
        return users;
    }
    catch (error) {
        console.error('❌ Failed to create users:', error);
        throw error;
    }
}
/**
 * Create bookings for reservable common spaces
 */
async function seedBookings(commonSpaces, users) {
    try {
        console.log('📅 Creating bookings...');
        const reservableSpaces = commonSpaces.filter(space => space.isReservable);
        let totalBookings = 0;
        for (const space of reservableSpaces) {
            const spaceUsers = users.filter(user => user.buildingId === space.buildingId);
            if (spaceUsers.length === 0)
                continue;
            console.log(`   Creating ${BOOKINGS_PER_RESERVABLE_SPACE} bookings for ${space.name}`);
            for (let i = 0; i < BOOKINGS_PER_RESERVABLE_SPACE; i++) {
                const user = spaceUsers[Math.floor(Math.random() * spaceUsers.length)];
                const startDate = faker_1.faker.date.between({
                    from: new Date(new Date().getFullYear(), 0, 1),
                    to: new Date(new Date().getFullYear(), 11, 31)
                });
                const startTime = new Date(startDate);
                startTime.setHours(faker_1.faker.number.int({ min: 8, max: 20 }), 0, 0, 0);
                const endTime = new Date(startTime);
                endTime.setHours(startTime.getHours() + faker_1.faker.number.int({ min: 1, max: 4 }));
                await db
                    .insert(schema.bookings)
                    .values({
                    commonSpaceId: space.id,
                    userId: user.id,
                    startTime,
                    endTime,
                    status: Math.random() > 0.1 ? 'confirmed' : 'cancelled'
                });
                totalBookings++;
            }
        }
        console.log(`📊 Created ${totalBookings} bookings across ${reservableSpaces.length} reservable spaces`);
    }
    catch (error) {
        console.error('❌ Failed to create bookings:', error);
        throw error;
    }
}
/**
 * Create maintenance demands (referred to as "demands" in schema)
 */
async function seedMaintenanceRequests(users) {
    try {
        console.log('🔧 Creating maintenance demands (2-3 different categories per resident)...');
        const residents = users.filter(user => user.role.includes('resident') && user.residenceId);
        let totalDemands = 0;
        for (const resident of residents) {
            // Create 2-3 demands per resident with DIFFERENT categories
            const demandsToCreate = faker_1.faker.number.int({ min: 2, max: 3 });
            // Ensure different categories by shuffling and taking first N
            const availableCategories = [...MAINTENANCE_CATEGORIES];
            const selectedCategories = faker_1.faker.helpers.arrayElements(availableCategories, demandsToCreate);
            for (let i = 0; i < demandsToCreate; i++) {
                const category = selectedCategories[i];
                const priority = faker_1.faker.helpers.arrayElement(['low', 'medium', 'high', 'urgent']);
                const demandType = faker_1.faker.helpers.arrayElement(['maintenance', 'complaint', 'information']);
                // Create detailed description based on category
                let description = '';
                if (category === 'Plumbing') {
                    description = `${faker_1.faker.helpers.arrayElement(['Leaky faucet', 'Clogged drain', 'Low water pressure', 'Running toilet'])} in ${faker_1.faker.helpers.arrayElement(['kitchen', 'bathroom', 'laundry room'])}. ${faker_1.faker.lorem.sentences(2)}`;
                }
                else if (category === 'Electrical') {
                    description = `${faker_1.faker.helpers.arrayElement(['Outlet not working', 'Light fixture issue', 'Circuit breaker trips', 'Switch malfunction'])} in ${faker_1.faker.helpers.arrayElement(['bedroom', 'living room', 'kitchen', 'hallway'])}. ${faker_1.faker.lorem.sentences(2)}`;
                }
                else if (category === 'HVAC') {
                    description = `${faker_1.faker.helpers.arrayElement(['Heating not working', 'Air conditioning issue', 'Ventilation problem', 'Thermostat malfunction'])}. Temperature control issues. ${faker_1.faker.lorem.sentences(2)}`;
                }
                else if (category === 'Structural') {
                    description = `${faker_1.faker.helpers.arrayElement(['Crack in wall', 'Door not closing properly', 'Window seal issue', 'Floor creaking'])}. Structural concern that needs attention. ${faker_1.faker.lorem.sentences(2)}`;
                }
                else if (category === 'Appliances') {
                    description = `${faker_1.faker.helpers.arrayElement(['Refrigerator', 'Dishwasher', 'Washer/Dryer', 'Stove/Oven'])} ${faker_1.faker.helpers.arrayElement(['not working properly', 'making unusual noise', 'not heating/cooling', 'leaking'])}. ${faker_1.faker.lorem.sentences(2)}`;
                }
                else {
                    description = `General maintenance issue: ${faker_1.faker.lorem.sentence()}. ${faker_1.faker.lorem.sentences(2)}`;
                }
                // Insert the demand
                const [demand] = await db
                    .insert(schema.demands)
                    .values({
                    submitterId: resident.id,
                    type: demandType,
                    description,
                    buildingId: resident.buildingId,
                    residenceId: resident.residenceId,
                    status: faker_1.faker.helpers.arrayElement(['submitted', 'under_review', 'in_progress', 'completed'])
                })
                    .returning();
                // Add a comment to the demand
                const managers = users.filter(user => user.role.includes('manager') && user.buildingId === resident.buildingId);
                const randomManager = managers.length > 0 ? managers[Math.floor(Math.random() * managers.length)] : users.find(u => u.role.includes('manager'));
                if (randomManager) {
                    await db
                        .insert(schema.demandComments)
                        .values({
                        demandId: demand.id,
                        commenterId: randomManager.id,
                        commentText: `Thank you for reporting this ${demandType}. We have received your request and will address it accordingly. ${faker_1.faker.lorem.sentence()}`,
                        commentType: 'response',
                        isInternal: false
                    });
                }
                totalDemands++;
            }
        }
        console.log(`📊 Created ${totalDemands} maintenance demands for ${residents.length} residents`);
        console.log(`   Average: ${Math.round(totalDemands / residents.length)} demands per resident (each with different categories)`);
    }
    catch (error) {
        console.error('❌ Failed to create maintenance demands:', error);
        throw error;
    }
}
/**
 * Create bills for buildings (previous year data)
 */
async function seedBills(buildings, users) {
    try {
        console.log('💰 Creating bills for previous year...');
        const currentYear = new Date().getFullYear();
        const previousYear = currentYear - 1;
        let totalBills = 0;
        const createdBills = [];
        // Get managers to assign as bill creators
        const managers = users.filter(user => user.role.includes('manager'));
        for (const building of buildings) {
            const buildingManagers = managers.filter(manager => manager.buildingId === building.id);
            const billCreator = buildingManagers.length > 0
                ? buildingManagers[0]
                : managers[0]; // Fallback to any manager
            if (!billCreator) {
                console.warn(`   ⚠️ No manager found for building ${building.name}, skipping bills`);
                continue;
            }
            console.log(`   Creating bills for ${building.name} (${previousYear})`);
            // Create bills for each month of previous year - 1-2 bills per category per month
            for (let month = 1; month <= 12; month++) {
                // Create 1-2 bills per category for this month
                for (const category of BILL_CATEGORIES) {
                    const billsToCreate = faker_1.faker.number.int({ min: 1, max: 2 });
                    for (let billIndex = 0; billIndex < billsToCreate; billIndex++) {
                        const amount = faker_1.faker.number.float({ min: 100, max: 5000, fractionDigits: 2 });
                        const startDate = new Date(previousYear, month - 1, faker_1.faker.number.int({ min: 1, max: 28 }));
                        const billSuffix = billsToCreate > 1 ? `-${billIndex + 1}` : '';
                        const billNumber = `${building.id.slice(0, 4).toUpperCase()}-${previousYear}-${month.toString().padStart(2, '0')}-${category.toUpperCase()}${billSuffix}`;
                        const title = `${category.charAt(0).toUpperCase() + category.slice(1)} ${billSuffix ? `(${billIndex + 1})` : ''} - ${faker_1.faker.company.name()}`;
                        const vendor = faker_1.faker.company.name();
                        const description = `Monthly ${category} service for ${faker_1.faker.date.month()} ${previousYear}${billSuffix ? ` - Invoice ${billIndex + 1}` : ''}`;
                        const [bill] = await db
                            .insert(schema.bills)
                            .values({
                            buildingId: building.id,
                            billNumber,
                            title,
                            description,
                            category,
                            vendor,
                            paymentType: Math.random() > 0.7 ? 'recurrent' : 'unique',
                            schedulePayment: Math.random() > 0.7 ? 'monthly' : null,
                            costs: [amount.toString()],
                            totalAmount: amount.toString(),
                            startDate,
                            status: ['paid', 'overdue', 'sent'][Math.floor(Math.random() * 3)],
                            createdBy: billCreator.id,
                            autoGenerated: false
                        })
                            .returning();
                        createdBills.push({
                            id: bill.id,
                            billNumber,
                            title,
                            category,
                            vendor,
                            totalAmount: amount.toString(),
                            buildingId: building.id,
                            description
                        });
                        totalBills++;
                    }
                }
            }
        }
        console.log(`📊 Created ${totalBills} bills across ${buildings.length} buildings for ${previousYear}`);
        console.log(`   Average: ${Math.round(totalBills / buildings.length)} bills per building (1-2 per category per month)`);
        return createdBills;
    }
    catch (error) {
        console.error('❌ Failed to create bills:', error);
        throw error;
    }
}
/**
 * Create demo disclosure notice for all documents
 */
function createDemoDisclosure() {
    return `*** DEMO NOTICE - FOR DEMONSTRATION PURPOSES ONLY ***

This document contains fictional data created for product demonstration.
In a real environment, this would contain actual uploaded content from property managers.
All information shown is generated automatically for testing and demo purposes.

This demo showcases the document management capabilities of Koveo Gestion.

================================================================

`;
}
/**
 * Ensure directory exists, create if not
 */
function ensureDirectoryExists(dirPath) {
    if (!fs.existsSync(dirPath)) {
        fs.mkdirSync(dirPath, { recursive: true });
    }
}
/**
 * Write file to disk and return file info
 */
function writeDocumentFile(filePath, content) {
    const fullPath = path.resolve(filePath);
    const dir = path.dirname(fullPath);
    ensureDirectoryExists(dir);
    fs.writeFileSync(fullPath, content, 'utf8');
    return { fileSize: content.length };
}
/**
 * Create documents for bills, residences, and buildings
 */
async function seedDocuments(bills, buildings, residences, users) {
    try {
        console.log('📄 Creating demo documents...');
        let totalDocuments = 0;
        const demoDisclosure = createDemoDisclosure();
        // Create Bill Documents (attached to bills) - Create for ALL bills in organization
        console.log('   Creating bill documents...');
        // Get ALL bills for this organization (not just newly created ones)
        const allOrgBills = await db
            .select({
            id: schema.bills.id,
            billNumber: schema.bills.billNumber,
            title: schema.bills.title,
            category: schema.bills.category,
            vendor: schema.bills.vendor,
            totalAmount: schema.bills.totalAmount,
            description: schema.bills.description,
            buildingId: schema.bills.buildingId
        })
            .from(schema.bills)
            .innerJoin(schema.buildings, (0, drizzle_orm_1.eq)(schema.bills.buildingId, schema.buildings.id))
            .where((0, drizzle_orm_1.eq)(schema.buildings.organizationId, buildings[0].organizationId));
        console.log(`   Found ${allOrgBills.length} total bills for organization, creating documents for bills without them...`);
        const billsWithDocs = allOrgBills.map(bill => ({
            id: bill.id,
            billNumber: bill.billNumber,
            title: bill.title,
            category: bill.category,
            vendor: bill.vendor,
            totalAmount: bill.totalAmount,
            description: bill.description,
            buildingId: bill.buildingId
        }));
        for (const bill of billsWithDocs) {
            // Check if this bill already has a document
            const existingDoc = await db
                .select({ id: schema.documents.id })
                .from(schema.documents)
                .where((0, drizzle_orm_1.and)((0, drizzle_orm_1.eq)(schema.documents.attachedToId, bill.id), (0, drizzle_orm_1.eq)(schema.documents.attachedToType, 'bill')))
                .limit(1);
            if (existingDoc.length > 0) {
                // Skip bills that already have documents
                continue;
            }
            // Find a manager for this building, with fallback to any manager
            let billCreator = users.find(user => user.buildingId === bill.buildingId && user.role.includes('manager'));
            if (!billCreator) {
                // Fallback: use any available manager
                billCreator = users.find(user => user.role.includes('manager'));
            }
            if (!billCreator) {
                console.warn(`   ⚠️ No manager found for bill ${bill.billNumber}, skipping document creation`);
                continue;
            }
            // Create only 1 document per bill (either invoice OR receipt)
            const isInvoice = Math.random() > 0.5;
            const docType = isInvoice ? 'invoice' : 'receipt';
            let documentContent = `${demoDisclosure}${docType.toUpperCase()} DOCUMENT

Bill Number: ${bill.billNumber}
Title: ${bill.title}
Vendor: ${bill.vendor}
Category: ${bill.category.charAt(0).toUpperCase() + bill.category.slice(1)}
Total Amount: $${bill.totalAmount}
Description: ${bill.description}

`;
            if (isInvoice) {
                documentContent += `This invoice document would normally be uploaded by the property manager
as a PDF or image file, but for this demo we're showing it as text content.

Payment Terms: Net 30 days
Invoice Date: ${faker_1.faker.date.recent().toLocaleDateString()}
Due Date: ${faker_1.faker.date.future().toLocaleDateString()}

Service Details:
- ${faker_1.faker.lorem.sentence()}
- ${faker_1.faker.lorem.sentence()}

Thank you for your business!
${bill.vendor}`;
            }
            else {
                documentContent += `Payment Amount: $${bill.totalAmount}
Payment Date: ${faker_1.faker.date.recent().toLocaleDateString()}
Payment Method: ${faker_1.faker.helpers.arrayElement(['Electronic Transfer', 'Check', 'ACH Transfer'])}
Reference Number: PAY-${faker_1.faker.string.alphanumeric(8).toUpperCase()}

This payment has been processed successfully.
Building Management Office`;
            }
            const filePath = `bills/${docType}-${bill.billNumber.toLowerCase()}-${bill.id.slice(0, 8)}.txt`;
            const { fileSize } = writeDocumentFile(filePath, documentContent);
            // Map bill category to appropriate document type
            const documentTypeMapping = {
                'utilities': 'utilities',
                'maintenance': 'maintenance',
                'insurance': 'insurance',
                'cleaning': 'maintenance',
                'security': 'other',
                'landscaping': 'maintenance',
                'professional_services': 'other',
                'administration': 'other',
                'supplies': 'other'
            };
            const billDocumentType = documentTypeMapping[bill.category] || 'other';
            await db
                .insert(schema.documents)
                .values({
                name: `${isInvoice ? 'Invoice' : 'Receipt'} - ${bill.billNumber}`,
                description: `${isInvoice ? 'Invoice' : 'Payment receipt'} for ${bill.title}`,
                documentType: billDocumentType,
                filePath,
                fileName: `${docType}-${bill.billNumber}.txt`,
                fileSize,
                mimeType: 'text/plain',
                isVisibleToTenants: false, // Will be configured later based on tenant assignments
                buildingId: bill.buildingId,
                uploadedById: billCreator.id,
                attachedToType: 'bill',
                attachedToId: bill.id
            });
            totalDocuments++;
        }
        // Create Residence Documents - 1-2 documents per category for EACH residence
        console.log('   Creating residence documents...');
        const residenceDocumentTypes = [
            { type: 'lease', name: 'Lease Agreement', description: 'Rental lease agreement' },
            { type: 'inspection', name: 'Inspection Report', description: 'Unit inspection report' },
            { type: 'maintenance', name: 'Maintenance Log', description: 'Maintenance history log' },
            { type: 'financial', name: 'Financial Document', description: 'Tenant financial record or payment history' }
        ];
        // Create 1-2 documents per category for EACH residence
        for (const residence of residences) {
            for (const docType of residenceDocumentTypes) {
                const docsToCreate = faker_1.faker.number.int({ min: 1, max: 2 });
                for (let docIndex = 0; docIndex < docsToCreate; docIndex++) {
                    const building = buildings.find(b => b.id === residence.buildingId);
                    const manager = users.find(user => user.buildingId === residence.buildingId && user.role.includes('manager'));
                    if (!building || !manager)
                        continue;
                    const docSuffix = docsToCreate > 1 ? `-${docIndex + 1}` : '';
                    let documentContent = `${demoDisclosure}${docType.name.toUpperCase()}

Unit: ${residence.unitNumber}
Building: ${building.name}
Address: ${faker_1.faker.location.streetAddress()}
Document ${docIndex + 1} of ${docsToCreate}

`;
                    if (docType.type === 'lease') {
                        documentContent += `LEASE AGREEMENT

Tenant Information:
- Unit Number: ${residence.unitNumber}
- Lease Start Date: ${faker_1.faker.date.past().toLocaleDateString()}
- Lease End Date: ${faker_1.faker.date.future().toLocaleDateString()}
- Monthly Rent: $${faker_1.faker.number.int({ min: 800, max: 2500 })}
- Security Deposit: $${faker_1.faker.number.int({ min: 800, max: 2500 })}

Terms and Conditions:
- ${faker_1.faker.lorem.sentence()}
- ${faker_1.faker.lorem.sentence()}

Landlord: ${building.name} Management
Tenant Signature: ____________________
Date: ${faker_1.faker.date.recent().toLocaleDateString()}`;
                    }
                    else if (docType.type === 'inspection') {
                        documentContent += `INSPECTION REPORT

Inspection Date: ${faker_1.faker.date.recent().toLocaleDateString()}
Inspector: ${faker_1.faker.person.fullName()}

Inspection Results:
+ Electrical systems - Good condition
+ Plumbing - Good condition  
+ Heating/Cooling - Good condition
* Minor paint touch-up needed in bedroom
+ Windows and doors - Good condition
+ Smoke detectors - Working properly

Overall Rating: ${faker_1.faker.helpers.arrayElement(['Excellent', 'Good', 'Fair'])}

Notes:
${faker_1.faker.lorem.paragraph()}

Inspector Signature: ____________________`;
                    }
                    else if (docType.type === 'financial') {
                        const financialType = faker_1.faker.helpers.arrayElement(['payment_history', 'deposit_record', 'tenant_financial']);
                        if (financialType === 'payment_history') {
                            documentContent += `TENANT PAYMENT HISTORY

Unit: ${residence.unitNumber}
Tenant: ${faker_1.faker.person.fullName()}
Account Period: ${faker_1.faker.date.past({ years: 1 }).toLocaleDateString()} to Present

Payment Summary:
Monthly Rent: $${faker_1.faker.number.int({ min: 1200, max: 2500 })}
Security Deposit: $${faker_1.faker.number.int({ min: 1200, max: 2500 })}
Payment Method: ${faker_1.faker.helpers.arrayElement(['Electronic Transfer', 'Check', 'Online Payment'])}

Recent Payments:
- ${faker_1.faker.date.recent().toLocaleDateString()}: Rent Payment - $${faker_1.faker.number.int({ min: 1200, max: 2500 })} - On Time
- ${faker_1.faker.date.recent({ days: 30 }).toLocaleDateString()}: Rent Payment - $${faker_1.faker.number.int({ min: 1200, max: 2500 })} - On Time
- ${faker_1.faker.date.recent({ days: 60 }).toLocaleDateString()}: Rent Payment - $${faker_1.faker.number.int({ min: 1200, max: 2500 })} - On Time

Payment Status: Current
Outstanding Balance: $0.00
Credit Score: ${faker_1.faker.number.int({ min: 650, max: 850 })}`;
                        }
                        else if (financialType === 'deposit_record') {
                            documentContent += `SECURITY DEPOSIT RECORD

Unit: ${residence.unitNumber}
Tenant: ${faker_1.faker.person.fullName()}
Deposit Date: ${faker_1.faker.date.past().toLocaleDateString()}

Deposit Details:
Security Deposit Amount: $${faker_1.faker.number.int({ min: 1200, max: 2500 })}
Pet Deposit: $${faker_1.faker.number.int({ min: 0, max: 500 })}
Key Deposit: $${faker_1.faker.number.int({ min: 50, max: 150 })}
Total Deposit: $${faker_1.faker.number.int({ min: 1250, max: 3150 })}

Bank Information:
Held at: ${faker_1.faker.company.name()} Bank
Account Number: DEP-${faker_1.faker.string.alphanumeric(8).toUpperCase()}
Interest Rate: ${faker_1.faker.number.float({ min: 0.5, max: 2.5, fractionDigits: 2 })}%

Deposit Status: Held in Trust Account
Expected Return Date: End of Lease Term`;
                        }
                        else {
                            documentContent += `TENANT FINANCIAL VERIFICATION

Unit: ${residence.unitNumber}
Tenant: ${faker_1.faker.person.fullName()}
Verification Date: ${faker_1.faker.date.recent().toLocaleDateString()}

Income Verification:
Monthly Income: $${faker_1.faker.number.int({ min: 4000, max: 8000 })}
Employment: ${faker_1.faker.company.name()}
Position: ${faker_1.faker.person.jobTitle()}
Employment Duration: ${faker_1.faker.number.int({ min: 6, max: 60 })} months

References:
Previous Landlord: ${faker_1.faker.person.fullName()}
Contact: ${generateQuebecPhone()}
Reference Status: Positive

Credit Information:
Credit Score: ${faker_1.faker.number.int({ min: 650, max: 850 })}
Debt-to-Income Ratio: ${faker_1.faker.number.int({ min: 15, max: 35 })}%
Rental History: Excellent`;
                        }
                    }
                    else {
                        documentContent += `MAINTENANCE LOG

Maintenance History for Unit ${residence.unitNumber}:

${faker_1.faker.date.past().toLocaleDateString()} - ${faker_1.faker.helpers.arrayElement(['Plumbing repair', 'Electrical work', 'HVAC maintenance'])}
Status: Completed
Cost: $${faker_1.faker.number.int({ min: 50, max: 500 })}

${faker_1.faker.date.recent().toLocaleDateString()} - ${faker_1.faker.helpers.arrayElement(['Annual inspection', 'Filter replacement', 'Light fixture repair'])}
Status: In Progress
Estimated Cost: $${faker_1.faker.number.int({ min: 50, max: 500 })}

Next Scheduled Maintenance: ${faker_1.faker.date.future().toLocaleDateString()}`;
                    }
                    const fileName = `${docType.type}-${residence.unitNumber.toLowerCase()}${docSuffix}.txt`;
                    const filePath = `residences/${residence.id}/${fileName}`;
                    const { fileSize } = writeDocumentFile(filePath, documentContent);
                    const [createdResidenceDoc] = await db
                        .insert(schema.documents)
                        .values({
                        name: `${docType.name} - Unit ${residence.unitNumber}${docSuffix}`,
                        description: `${docType.description} for unit ${residence.unitNumber}`,
                        documentType: docType.type,
                        filePath,
                        fileName,
                        fileSize,
                        mimeType: 'text/plain',
                        isVisibleToTenants: false, // Will be configured later based on tenant assignments
                        residenceId: residence.id,
                        buildingId: residence.buildingId,
                        uploadedById: manager.id
                    })
                        .returning();
                    console.log(`     ✓ Created residence document: ${createdResidenceDoc.id} - ${createdResidenceDoc.name} (${createdResidenceDoc.filePath})`);
                    totalDocuments++;
                }
            }
        }
        // Create Building Documents - 1-2 per category for EACH building  
        console.log('   Creating building documents (1-2 per category for each building)...');
        const buildingDocumentTypes = [
            { type: 'insurance', name: 'Insurance Certificate', description: 'Building insurance certificate' },
            { type: 'permits', name: 'Building Permit', description: 'Construction/renovation permit' },
            { type: 'meeting_minutes', name: 'Board Meeting Minutes', description: 'Monthly board meeting minutes' },
            { type: 'contracts', name: 'Service Contract', description: 'Maintenance service contract' },
            { type: 'financial', name: 'Financial Document', description: 'Loan agreement, bank statement, or financial report' }
        ];
        // Create 1-2 documents per category for EACH building
        for (const building of buildings) {
            const manager = users.find(user => user.buildingId === building.id && user.role.includes('manager'));
            if (!manager) {
                console.warn(`   ⚠️ No manager found for building ${building.name}, skipping building documents`);
                continue;
            }
            console.log(`     Creating documents for building: ${building.name}`);
            for (const docType of buildingDocumentTypes) {
                const docsToCreate = faker_1.faker.number.int({ min: 1, max: 2 });
                for (let docIndex = 0; docIndex < docsToCreate; docIndex++) {
                    const docSuffix = docsToCreate > 1 ? `-${docIndex + 1}` : '';
                    let documentContent = `${demoDisclosure}${docType.name.toUpperCase()}${docSuffix ? ` (${docIndex + 1})` : ''}

Building: ${building.name}
Organization: ${building.organizationId}
Document Date: ${faker_1.faker.date.recent().toLocaleDateString()}
Document ${docIndex + 1} of ${docsToCreate}

`;
                    if (docType.type === 'insurance') {
                        documentContent += `INSURANCE CERTIFICATE

Policy Number: INS-${faker_1.faker.string.alphanumeric(10).toUpperCase()}
Insurance Company: ${faker_1.faker.company.name()} Insurance
Coverage Type: Commercial Property Insurance
Coverage Amount: $${faker_1.faker.number.int({ min: 1000000, max: 5000000 }).toLocaleString()}
Policy Period: ${faker_1.faker.date.past().toLocaleDateString()} to ${faker_1.faker.date.future().toLocaleDateString()}

Coverage Details:
- Property Damage: Covered
- Liability: Covered  
- Natural Disasters: Covered
- Equipment Breakdown: Covered

Contact Information:
Agent: ${faker_1.faker.person.fullName()}
Phone: ${generateQuebecPhone()}
Email: ${faker_1.faker.internet.email()}`;
                    }
                    else if (docType.type === 'permits') {
                        documentContent += `BUILDING PERMIT

Permit Number: PER-${faker_1.faker.string.alphanumeric(8).toUpperCase()}
Permit Type: ${faker_1.faker.helpers.arrayElement(['Renovation', 'Electrical Work', 'Plumbing', 'HVAC Installation'])}
Issue Date: ${faker_1.faker.date.past().toLocaleDateString()}
Expiry Date: ${faker_1.faker.date.future().toLocaleDateString()}
Contractor: ${faker_1.faker.company.name()}

Work Description:
${faker_1.faker.lorem.paragraph()}

Inspection Schedule:
- Initial Inspection: ${faker_1.faker.date.recent().toLocaleDateString()}
- Progress Inspection: ${faker_1.faker.date.soon().toLocaleDateString()}
- Final Inspection: ${faker_1.faker.date.future().toLocaleDateString()}

Approved by: City Planning Department
Permit Fee: $${faker_1.faker.number.int({ min: 100, max: 1000 })}`;
                    }
                    else if (docType.type === 'meeting_minutes') {
                        documentContent += `BOARD MEETING MINUTES

Meeting Date: ${faker_1.faker.date.recent().toLocaleDateString()}
Meeting Time: ${faker_1.faker.number.int({ min: 18, max: 20 })}:00
Location: ${building.name} Community Room

Attendees:
- ${faker_1.faker.person.fullName()} (Board President)
- ${faker_1.faker.person.fullName()} (Treasurer)  
- ${faker_1.faker.person.fullName()} (Secretary)
- ${faker_1.faker.person.fullName()} (Property Manager)

Agenda Items:
1. Budget Review - ${faker_1.faker.lorem.sentence()}
2. Maintenance Updates - ${faker_1.faker.lorem.sentence()}
3. New Policies - ${faker_1.faker.lorem.sentence()}

Action Items:
- ${faker_1.faker.lorem.sentence()}
- ${faker_1.faker.lorem.sentence()}

Next Meeting: ${faker_1.faker.date.future().toLocaleDateString()}`;
                    }
                    else if (docType.type === 'financial') {
                        const financialDocType = faker_1.faker.helpers.arrayElement(['loan', 'bank_statement', 'financial_report']);
                        if (financialDocType === 'loan') {
                            documentContent += `BUILDING LOAN AGREEMENT

Loan ID: LOAN-${faker_1.faker.string.alphanumeric(10).toUpperCase()}
Lender: ${faker_1.faker.company.name()} Bank
Borrower: ${building.name} Building Corporation
Loan Amount: $${faker_1.faker.number.int({ min: 500000, max: 2500000 }).toLocaleString()}
Interest Rate: ${faker_1.faker.number.float({ min: 3.5, max: 6.5, fractionDigits: 2 })}%
Loan Term: ${faker_1.faker.number.int({ min: 15, max: 30 })} years
Monthly Payment: $${faker_1.faker.number.int({ min: 3000, max: 8500 }).toLocaleString()}

Loan Purpose: Building acquisition and capital improvements
Collateral: Building property and improvements
Loan Date: ${faker_1.faker.date.past({ years: 2 }).toLocaleDateString()}

Financial Terms:
- Fixed rate mortgage
- No prepayment penalties
- Annual financial reporting required
- Minimum debt service coverage ratio: 1.2x

Lender Representative: ${faker_1.faker.person.fullName()}
Borrower Representative: ${faker_1.faker.person.fullName()}`;
                        }
                        else if (financialDocType === 'bank_statement') {
                            documentContent += `BANK STATEMENT

Account Holder: ${building.name} Building Corporation
Bank: ${faker_1.faker.company.name()} Bank
Account Number: ****${faker_1.faker.string.numeric(4)}
Statement Period: ${faker_1.faker.date.recent({ days: 30 }).toLocaleDateString()} to ${faker_1.faker.date.recent().toLocaleDateString()}

Beginning Balance: $${faker_1.faker.number.int({ min: 25000, max: 150000 }).toLocaleString()}
Total Deposits: $${faker_1.faker.number.int({ min: 15000, max: 45000 }).toLocaleString()}
Total Withdrawals: $${faker_1.faker.number.int({ min: 12000, max: 35000 }).toLocaleString()}
Ending Balance: $${faker_1.faker.number.int({ min: 30000, max: 160000 }).toLocaleString()}

Recent Transactions:
- ${faker_1.faker.date.recent().toLocaleDateString()}: Maintenance Reserve Transfer - $${faker_1.faker.number.int({ min: 2000, max: 8000 }).toLocaleString()}
- ${faker_1.faker.date.recent().toLocaleDateString()}: Monthly Fees Collection - +$${faker_1.faker.number.int({ min: 8000, max: 25000 }).toLocaleString()}
- ${faker_1.faker.date.recent().toLocaleDateString()}: Insurance Premium - $${faker_1.faker.number.int({ min: 1500, max: 4500 }).toLocaleString()}

Contact: ${generateQuebecPhone()}`;
                        }
                        else {
                            documentContent += `ANNUAL FINANCIAL REPORT

Building: ${building.name}
Report Period: ${faker_1.faker.date.past({ years: 1 }).getFullYear()}
Prepared by: ${faker_1.faker.person.fullName()}, Property Manager

Financial Summary:
Total Revenue: $${faker_1.faker.number.int({ min: 180000, max: 450000 }).toLocaleString()}
- Monthly Fees: $${faker_1.faker.number.int({ min: 150000, max: 380000 }).toLocaleString()}
- Special Assessments: $${faker_1.faker.number.int({ min: 10000, max: 50000 }).toLocaleString()}
- Other Income: $${faker_1.faker.number.int({ min: 5000, max: 20000 }).toLocaleString()}

Total Expenses: $${faker_1.faker.number.int({ min: 120000, max: 300000 }).toLocaleString()}
- Maintenance: $${faker_1.faker.number.int({ min: 40000, max: 100000 }).toLocaleString()}
- Insurance: $${faker_1.faker.number.int({ min: 20000, max: 50000 }).toLocaleString()}
- Utilities: $${faker_1.faker.number.int({ min: 25000, max: 60000 }).toLocaleString()}
- Professional Services: $${faker_1.faker.number.int({ min: 15000, max: 35000 }).toLocaleString()}
- Administrative: $${faker_1.faker.number.int({ min: 10000, max: 25000 }).toLocaleString()}

Net Income: $${faker_1.faker.number.int({ min: 50000, max: 150000 }).toLocaleString()}
Reserve Fund Balance: $${faker_1.faker.number.int({ min: 75000, max: 200000 }).toLocaleString()}`;
                        }
                    }
                    else {
                        documentContent += `SERVICE CONTRACT

Contract Number: CON-${faker_1.faker.string.alphanumeric(8).toUpperCase()}
Service Provider: ${faker_1.faker.company.name()}
Service Type: ${faker_1.faker.helpers.arrayElement(['Cleaning Services', 'Landscaping', 'Security', 'Maintenance'])}
Contract Period: ${faker_1.faker.date.past().toLocaleDateString()} to ${faker_1.faker.date.future().toLocaleDateString()}
Monthly Cost: $${faker_1.faker.number.int({ min: 500, max: 3000 })}

Service Details:
${faker_1.faker.lorem.paragraph()}

Contact Information:
Manager: ${faker_1.faker.person.fullName()}
Phone: ${generateQuebecPhone()}
Emergency Contact: ${generateQuebecPhone()}

Terms and Conditions:
- ${faker_1.faker.lorem.sentence()}
- ${faker_1.faker.lorem.sentence()}`;
                    }
                    const fileName = `${docType.type}-${building.name.replace(/\s+/g, '-').toLowerCase()}${docSuffix}.txt`;
                    const filePath = `buildings/${building.id}/${fileName}`;
                    const { fileSize } = writeDocumentFile(filePath, documentContent);
                    const [createdBuildingDoc] = await db
                        .insert(schema.documents)
                        .values({
                        name: `${docType.name}${docSuffix} - ${building.name}`,
                        description: `${docType.description} for ${building.name}${docSuffix ? ` (Document ${docIndex + 1})` : ''}`,
                        documentType: docType.type,
                        filePath,
                        fileName,
                        fileSize,
                        mimeType: 'text/plain',
                        isVisibleToTenants: false, // Will be configured later based on tenant assignments
                        buildingId: building.id,
                        uploadedById: manager.id
                    })
                        .returning();
                    console.log(`     ✓ Created building document: ${createdBuildingDoc.id} - ${createdBuildingDoc.name} (${createdBuildingDoc.filePath})`);
                    totalDocuments++;
                }
            }
        }
        console.log(`📊 Created ${totalDocuments} demo documents (files written to disk):`);
        console.log(`   - Bill documents: ~${billsWithDocs.length} (invoice & receipt for ALL bills)`);
        console.log(`   - Residence documents: ${residences.length * residenceDocumentTypes.length * 1}-${residences.length * residenceDocumentTypes.length * 2} (1-2 per category for EACH residence)`);
        console.log(`   - Building documents: ${buildings.length * buildingDocumentTypes.length * 1}-${buildings.length * buildingDocumentTypes.length * 2} (1-2 per category for EACH building)`);
    }
    catch (error) {
        console.error('❌ Failed to create documents:', error);
        throw error;
    }
}
/**
 * Configure document access for tenants - only for buildings/residences that actually have tenants
 */
async function configureTenantDocumentAccess(users) {
    try {
        console.log('   Making select documents accessible to tenants...');
        // Find all tenants
        const tenants = users.filter(user => user.role === 'demo_tenant');
        console.log(`   Found ${tenants.length} tenant users to configure access for`);
        if (tenants.length === 0) {
            console.log('   No tenants found - skipping tenant document access configuration');
            return;
        }
        // Get buildings and residences that have tenants
        const tenantBuildingIds = new Set();
        const tenantResidenceIds = new Set();
        for (const tenant of tenants) {
            // Get tenant's residence assignments
            const tenantResidences = await db
                .select({
                residenceId: schema.userResidences.residenceId
            })
                .from(schema.userResidences)
                .where((0, drizzle_orm_1.eq)(schema.userResidences.userId, tenant.id));
            for (const ur of tenantResidences) {
                tenantResidenceIds.add(ur.residenceId);
                // Get the building ID for this residence
                const residence = await db
                    .select({
                    buildingId: schema.residences.buildingId
                })
                    .from(schema.residences)
                    .where((0, drizzle_orm_1.eq)(schema.residences.id, ur.residenceId))
                    .limit(1);
                if (residence[0]) {
                    tenantBuildingIds.add(residence[0].buildingId);
                }
            }
        }
        console.log(`   Buildings with tenants: ${tenantBuildingIds.size}`);
        console.log(`   Residences with tenants: ${tenantResidenceIds.size}`);
        // Update documents to be visible to tenants in buildings/residences with tenants
        let updatedCount = 0;
        // Building-level documents that tenants should see
        const buildingDocTypes = ['meeting_minutes', 'permits'];
        for (const buildingId of tenantBuildingIds) {
            const result = await db
                .update(schema.documents)
                .set({ isVisibleToTenants: true })
                .where((0, drizzle_orm_1.and)((0, drizzle_orm_1.eq)(schema.documents.buildingId, buildingId), schema.documents.documentType ? (0, drizzle_orm_1.sql) `${schema.documents.documentType} = ANY(${buildingDocTypes})` : (0, drizzle_orm_1.sql) `1=0`));
            updatedCount += result.rowCount || 0;
        }
        // Residence-level documents that tenants should see
        const residenceDocTypes = ['lease', 'inspection'];
        for (const residenceId of tenantResidenceIds) {
            const result = await db
                .update(schema.documents)
                .set({ isVisibleToTenants: true })
                .where((0, drizzle_orm_1.and)((0, drizzle_orm_1.eq)(schema.documents.residenceId, residenceId), schema.documents.documentType ? (0, drizzle_orm_1.sql) `${schema.documents.documentType} = ANY(${residenceDocTypes})` : (0, drizzle_orm_1.sql) `1=0`));
            updatedCount += result.rowCount || 0;
        }
        // Bill receipts (but not invoices) for buildings with tenants
        for (const buildingId of tenantBuildingIds) {
            const result = await db
                .update(schema.documents)
                .set({ isVisibleToTenants: true })
                .where((0, drizzle_orm_1.and)((0, drizzle_orm_1.eq)(schema.documents.buildingId, buildingId), (0, drizzle_orm_1.eq)(schema.documents.attachedToType, 'bill'), schema.documents.name ? (0, drizzle_orm_1.sql) `${schema.documents.name} LIKE 'Receipt%'` : (0, drizzle_orm_1.sql) `1=0`));
            updatedCount += result.rowCount || 0;
        }
        console.log(`   ✅ Updated ${updatedCount} documents to be visible to tenants`);
        console.log(`   📄 Document types accessible to tenants: meeting minutes, permits, leases, inspections, receipts`);
    }
    catch (error) {
        console.error('❌ Failed to configure tenant document access:', error);
        throw error;
    }
}
/**
 * Main execution function
 */
async function main() {
    try {
        console.log('🚀 Starting Koveo Gestion Demo Environment Creation');
        console.log('='.repeat(60));
        // Parse CLI arguments
        const args = parseArguments();
        // Initialize database connection
        await initializeDatabase(args.database);
        console.log(`📋 Configuration:`);
        console.log(`   Organization Type: ${args.type}`);
        console.log(`   Organization Name: "${args.name}"`);
        console.log(`   Target Database: ${args.database === 'prod' ? 'PRODUCTION (DATABASE_URL_KOVEO)' : 'DEVELOPMENT (DATABASE_URL)'}`);
        console.log('');
        // Step 1: Upsert Organization
        console.log('📁 Step 1: Upsert Organization');
        const organization = await upsertOrganization(args.name, args.type);
        console.log('');
        // Step 2: Create Buildings
        console.log('🏢 Step 2: Create Buildings');
        const buildingResult = await seedBuildings(organization.id);
        const buildings = buildingResult.buildings;
        const newBuildingsCreated = buildingResult.newBuildingsCreated;
        console.log('');
        // Step 3: Create Residences (only for new buildings if organization already has 5 buildings)
        console.log('🏠 Step 3: Create Residences');
        const residences = await seedResidences(buildings, newBuildingsCreated === 0);
        console.log('');
        // Only create additional data if we have new buildings or this is the first run
        let users = [];
        let bills = [];
        if (newBuildingsCreated > 0 || buildings.length <= 5) {
            // Step 4: Create Common Spaces
            console.log('🏛️ Step 4: Create Common Spaces');
            const commonSpaces = await seedCommonSpaces(buildings);
            console.log('');
            // Step 5: Create Users
            console.log('👥 Step 5: Create Users');
            users = await seedUsers(args.type, organization.id, buildings, residences);
            console.log('');
            // Step 6: Create Bookings
            console.log('📅 Step 6: Create Bookings');
            await seedBookings(commonSpaces, users);
            console.log('');
            // Step 7: Create Maintenance Demands
            console.log('🔧 Step 7: Create Maintenance Demands');
            await seedMaintenanceRequests(users);
            console.log('');
            // Step 8: Create Bills
            console.log('💰 Step 8: Create Bills');
            bills = await seedBills(buildings, users);
            console.log('');
            // Step 9: Create Documents
            console.log('📄 Step 9: Create Documents');
            await seedDocuments(bills, buildings, residences, users);
            console.log('');
            // Step 10: Make documents accessible to tenants in buildings/residences with tenants
            console.log('📋 Step 10: Configure Tenant Document Access');
            await configureTenantDocumentAccess(users);
            console.log('');
        }
        else {
            console.log('🏢 Organization already has complete buildings and data. Skipping additional data creation.');
            console.log('📄 Only updating documents for existing bills...');
            // Get existing bills for this organization
            const existingBills = await db
                .select({
                id: schema.bills.id,
                billNumber: schema.bills.billNumber,
                title: schema.bills.title,
                category: schema.bills.category,
                vendor: schema.bills.vendor,
                totalAmount: schema.bills.totalAmount,
                description: schema.bills.description,
                buildingId: schema.bills.buildingId
            })
                .from(schema.bills)
                .innerJoin(schema.buildings, (0, drizzle_orm_1.eq)(schema.bills.buildingId, schema.buildings.id))
                .where((0, drizzle_orm_1.eq)(schema.buildings.organizationId, organization.id));
            // Get existing users for this organization (simplified approach)
            const allUsers = await db
                .select({
                id: schema.users.id,
                email: schema.users.email,
                role: schema.users.role
            })
                .from(schema.users)
                .where((0, drizzle_orm_1.eq)(schema.users.isActive, true));
            const existingUsers = allUsers.filter(user => user.role.includes('manager'));
            console.log(`   Found ${existingUsers.length} managers to create bill documents...`);
            console.log(`   Found ${existingBills.length} existing bills to process for documents...`);
            await seedDocuments(existingBills, buildings, residences, existingUsers.map(u => ({
                id: u.id,
                email: u.email,
                role: u.role,
                buildingId: null // Not needed for document creation
            })));
            console.log('');
        }
        // Summary
        console.log('🎉 Demo environment created successfully!');
        console.log('='.repeat(60));
        console.log(`✅ Organization: ${organization.name} (${organization.type})`);
        console.log(`✅ Buildings: ${buildings.length}`);
        console.log(`✅ Residences: ${residences.length}`);
        console.log(`✅ Common Spaces: Created for each building`);
        console.log(`✅ Users: ${users.length}`);
        console.log(`✅ Managers: ${users.filter(u => u.role.includes('manager')).length}`);
        console.log(`✅ Residents: ${users.filter(u => u.role.includes('resident')).length}`);
        console.log(`✅ Bills: ${bills.length} (with attached invoice & receipt documents)`);
        console.log('✅ Documents: Comprehensive .txt documents with demo disclosures');
        console.log('✅ Bookings and maintenance demands (2-3 different categories per resident) created successfully');
        console.log('');
        console.log(`🚀 Demo environment for "${args.name}" is ready for use!`);
        console.log('📋 All documents include demo disclosure notices for demonstration purposes');
    }
    catch (error) {
        console.error('❌ Demo environment creation failed:', error);
        process.exit(1);
    }
    finally {
        // Close database connection
        await closeConnection();
    }
}
// Execute the script
if (import.meta.url === `file://${process.argv[1]}`) {
    main().catch(console.error);
}
exports.default = main;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiL2hvbWUvcnVubmVyL3dvcmtzcGFjZS9zY3JpcHRzL2NyZWF0ZS1kZW1vLWVudmlyb25tZW50LnRzIiwibWFwcGluZ3MiOiI7QUFFQTs7Ozs7Ozs7Ozs7Ozs7Ozs7O0dBa0JHOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUVILDZDQUFnRDtBQUNoRCwyQ0FBd0M7QUFDeEMsaURBQW1DO0FBQ25DLHVDQUF5QjtBQUN6QiwyQ0FBNkI7QUFDN0IseURBQTJDO0FBRTNDLGdDQUFnQztBQUNoQyxJQUFJLEVBQU8sQ0FBQztBQUNaLElBQUksZUFBb0MsQ0FBQztBQUV6QyxLQUFLLFVBQVUsa0JBQWtCLENBQUMsY0FBOEI7SUFDOUQsSUFBSSxjQUFjLEtBQUssTUFBTSxFQUFFLENBQUM7UUFDOUIsT0FBTyxDQUFDLEdBQUcsQ0FBQyxnRUFBZ0UsQ0FBQyxDQUFDO1FBQzlFLE9BQU8sQ0FBQyxHQUFHLENBQUMsOERBQThELENBQUMsQ0FBQztRQUM1RSxPQUFPLENBQUMsR0FBRyxDQUFDLEVBQUUsQ0FBQyxDQUFDO1FBRWhCLDBCQUEwQjtRQUMxQixNQUFNLGtCQUFrQixHQUFHLE9BQU8sQ0FBQyxHQUFHLENBQUMsa0JBQWtCLENBQUM7UUFDMUQsSUFBSSxDQUFDLGtCQUFrQixFQUFFLENBQUM7WUFDeEIsT0FBTyxDQUFDLEtBQUssQ0FBQywrRUFBK0UsQ0FBQyxDQUFDO1lBQy9GLE9BQU8sQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUM7UUFDbEIsQ0FBQztRQUVELE1BQU0sRUFBRSxJQUFJLEVBQUUsR0FBRyx3REFBYSwwQkFBMEIsR0FBQyxDQUFDO1FBQzFELE1BQU0sRUFBRSxPQUFPLEVBQUUsR0FBRyx3REFBYSw2QkFBNkIsR0FBQyxDQUFDO1FBRWhFLE1BQU0sSUFBSSxHQUFHLElBQUksSUFBSSxDQUFDLEVBQUUsZ0JBQWdCLEVBQUUsa0JBQWtCLEVBQUUsQ0FBQyxDQUFDO1FBQ2hFLEVBQUUsR0FBRyxPQUFPLENBQUMsRUFBRSxNQUFNLEVBQUUsSUFBSSxFQUFF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cy9jcmVhdGUtZGVtby1lbnZpcm9ubWVudC50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJcblxuLyoqXG4gKiBLb3ZlbyBHZXN0aW9uIERlbW8gRW52aXJvbm1lbnQgU2NyaXB0XG4gKiBcbiAqIENyZWF0ZXMgb3IgdXBkYXRlcyBhIGNvbXByZWhlbnNpdmUgZGVtbyBlbnZpcm9ubWVudCB3aXRoIHJlYWxpc3RpYywgZmljdGlvbmFsIGRhdGFcbiAqIGZvciBwcm9kdWN0IGRlbW9uc3RyYXRpb25zIGFuZCBRQSB0ZXN0aW5nLiBDb21wbGllcyB3aXRoIFF1ZWJlYydzIExhdyAyNS5cbiAqIFxuICogVXNhZ2U6XG4gKiAgIG5weCB0c3ggc2NyaXB0cy9jcmVhdGUtZGVtby1lbnZpcm9ubWVudC50cyAtLXR5cGUgZGVtbyAtLW5hbWUgXCJEZW1vIE9yZ2FuaXphdGlvblwiXG4gKiAgIG5weCB0c3ggc2NyaXB0cy9jcmVhdGUtZGVtby1lbnZpcm9ubWVudC50cyAtLXR5cGUgcHJvZHVjdGlvbiAtLW5hbWUgXCJUZXN0IENvbXBhbnlcIlxuICogICBucHggdHN4IHNjcmlwdHMvY3JlYXRlLWRlbW8tZW52aXJvbm1lbnQudHMgLS10eXBlIGRlbW8gLS1uYW1lIFwiRGVtbyBPcmdhbml6YXRpb25cIiAtLWRhdGFiYXNlIHByb2RcbiAqIFxuICogRmVhdHVyZXM6XG4gKiAtIElkZW1wb3RlbnQgdXBzZXJ0IGxvZ2ljICh1cGRhdGVzIGV4aXN0aW5nIG9yZ2FuaXphdGlvbnMpXG4gKiAtIFJvbGUtYmFzZWQgdXNlciBjcmVhdGlvbiAoZGVtbyB2cyBwcm9kdWN0aW9uIHR5cGVzKVxuICogLSBDb21wcmVoZW5zaXZlIHJlYWxpc3RpYyBkYXRhIHVzaW5nIEBmYWtlci1qcy9mYWtlclxuICogLSBRdWViZWMtc3BlY2lmaWMgZGF0YSBnZW5lcmF0aW9uXG4gKiAtIENvbXBsZXRlIGJ1aWxkaW5nLCByZXNpZGVuY2UsIGFuZCB1c2VyIGVjb3N5c3RlbVxuICogLSBSZWFsaXN0aWMgYm9va2luZ3MsIGRlbWFuZHMsIGFuZCBmaW5hbmNpYWwgZGF0YVxuICovXG5cbmltcG9ydCB7IGVxLCBhbmQsIGd0ZSwgc3FsIH0gZnJvbSAnZHJpenpsZS1vcm0nO1xuaW1wb3J0IHsgZmFrZXIgfSBmcm9tICdAZmFrZXItanMvZmFrZXInO1xuaW1wb3J0ICogYXMgYmNyeXB0IGZyb20gJ2JjcnlwdGpzJztcbmltcG9ydCAqIGFzIGZzIGZyb20gJ2ZzJztcbmltcG9ydCAqIGFzIHBhdGggZnJvbSAncGF0aCc7XG5pbXBvcnQgKiBhcyBzY2hlbWEgZnJvbSAnLi4vc2hhcmVkL3NjaGVtYSc7XG5cbi8vIERhdGFiYXNlIGNvbm5lY3Rpb24gdmFyaWFibGVzXG5sZXQgZGI6IGFueTtcbmxldCBjbG9zZUNvbm5lY3Rpb246ICgpID0+IFByb21pc2U8dm9pZD47XG5cbmFzeW5jIGZ1bmN0aW9uIGluaXRpYWxpemVEYXRhYmFzZSh0YXJnZXREYXRhYmFzZTogJ2RldicgfCAncHJvZCcpIHtcbiAgaWYgKHRhcmdldERhdGFiYXNlID09PSAncHJvZCcpIHtcbiAgICBjb25zb2xlLmxvZygn4pqg77iPIFdBUk5JTkc6IFRhcmdldGluZyBQUk9EVUNUSU9OIGRhdGFiYXNlIChEQVRBQkFTRV9VUkxfS09WRU8pJyk7XG4gICAgY29uc29sZS5sb2coJ+KaoO+4jyBUaGlzIHdpbGwgY3JlYXRlIGRlbW8gZGF0YSBpbiB0aGUgcHJvZHVjdGlvbiBlbnZpcm9ubWVudCEnKTtcbiAgICBjb25zb2xlLmxvZygnJyk7XG4gICAgXG4gICAgLy8gVXNlIHByb2R1Y3Rpb24gZGF0YWJhc2VcbiAgICBjb25zdCBEQVRBQkFTRV9VUkxfS09WRU8gPSBwcm9jZXNzLmVudi5EQVRBQkFTRV9VUkxfS09WRU87XG4gICAgaWYgKCFEQVRBQkFTRV9VUkxfS09WRU8pIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ+KdjCBEQVRBQkFTRV9VUkxfS09WRU8gZW52aXJvbm1lbnQgdmFyaWFibGUgaXMgcmVxdWlyZWQgZm9yIHByb2R1Y3Rpb24gZGF0YWJhc2UnKTtcbiAgICAgIHByb2Nlc3MuZXhpdCgxKTtcbiAgICB9XG4gICAgXG4gICAgY29uc3QgeyBQb29sIH0gPSBhd2FpdCBpbXBvcnQoJ0BuZW9uZGF0YWJhc2Uvc2VydmVybGVzcycpO1xuICAgIGNvbnN0IHsgZHJpenpsZSB9ID0gYXdhaXQgaW1wb3J0KCdkcml6emxlLW9ybS9uZW9uLXNlcnZlcmxlc3MnKTtcbiAgICBcbiAgICBjb25zdCBwb29sID0gbmV3IFBvb2woeyBjb25uZWN0aW9uU3RyaW5nOiBEQVRBQkFTRV9VUkxfS09WRU8gfSk7XG4gICAgZGIgPSBkcml6emxlKHsgY2xpZW50OiBwb29sLCBzY2hlbWEgfSk7XG4gICAgY2xvc2VDb25uZWN0aW9uID0gYXN5bmMgKCkgPT4ge1xuICAgICAgYXdhaXQgcG9vbC5lbmQoKTtcbiAgICB9O1xuICAgIFxuICAgIGNvbnNvbGUubG9nKCfwn5SXIENvbm5lY3RlZCB0byBQUk9EVUNUSU9OIGRhdGFiYXNlIChEQVRBQkFTRV9VUkxfS09WRU8pJyk7XG4gIH0gZWxzZSB7XG4gICAgLy8gVXNlIGRldmVsb3BtZW50IGRhdGFiYXNlIChkZWZhdWx0KVxuICAgIGNvbnN0IHsgZGI6IHNoYXJlZERiIH0gPSBhd2FpdCBpbXBvcnQoJy4uL3NlcnZlci9kYicpO1xuICAgIGRiID0gc2hhcmVkRGI7XG4gICAgY2xvc2VDb25uZWN0aW9uID0gYXN5bmMgKCkgPT4ge1xuICAgICAgLy8gQ29ubmVjdGlvbiB3aWxsIGJlIG1hbmFnZWQgYnkgdGhlIHNoYXJlZCBwb29sXG4gICAgfTtcbiAgICBcbiAgICBjb25zb2xlLmxvZygn8J+UlyBDb25uZWN0ZWQgdG8gREVWRUxPUE1FTlQgZGF0YWJhc2UgKERBVEFCQVNFX1VSTCknKTtcbiAgfVxufVxuXG4vLyBUeXBlc1xuaW50ZXJmYWNlIENsaUFyZ3Mge1xuICB0eXBlOiAnZGVtbycgfCAncHJvZHVjdGlvbic7XG4gIG5hbWU6IHN0cmluZztcbiAgZGF0YWJhc2U6ICdkZXYnIHwgJ3Byb2QnO1xufVxuXG5pbnRlcmZhY2UgQ3JlYXRlZEJ1aWxkaW5nIHtcbiAgaWQ6IHN0cmluZztcbiAgbmFtZTogc3RyaW5nO1xuICBvcmdhbml6YXRpb25JZDogc3RyaW5nO1xufVxuXG5pbnRlcmZhY2UgQ3JlYXRlZFJlc2lkZW5jZSB7XG4gIGlkOiBzdHJpbmc7XG4gIHVuaXROdW1iZXI6IHN0cmluZztcbiAgYnVpbGRpbmdJZDogc3RyaW5nO1xuICBidWlsZGluZ05hbWU6IHN0cmluZztcbn1cblxuaW50ZXJmYWNlIENyZWF0ZWRVc2VyIHtcbiAgaWQ6IHN0cmluZztcbiAgdXNlcm5hbWU6IHN0cmluZztcbiAgZW1haWw6IHN0cmluZztcbiAgcm9sZTogc3RyaW5nO1xuICBidWlsZGluZ0lkPzogc3RyaW5nO1xuICByZXNpZGVuY2VJZD86IHN0cmluZztcbn1cblxuaW50ZXJmYWNlIENyZWF0ZWRDb21tb25TcGFjZSB7XG4gIGlkOiBzdHJpbmc7XG4gIG5hbWU6IHN0cmluZztcbiAgYnVpbGRpbmdJZDogc3RyaW5nO1xuICBpc1Jlc2VydmFibGU6IGJvb2xlYW47XG59XG5cbmludGVyZmFjZSBDcmVhdGVkQmlsbCB7XG4gIGlkOiBzdHJpbmc7XG4gIGJpbGxOdW1iZXI6IHN0cmluZztcbiAgdGl0bGU6IHN0cmluZztcbiAgY2F0ZWdvcnk6IHN0cmluZztcbiAgdmVuZG9yOiBzdHJpbmc7XG4gIHRvdGFsQW1vdW50OiBzdHJpbmc7XG4gIGJ1aWxkaW5nSWQ6IHN0cmluZztcbiAgZGVzY3JpcHRpb246IHN0cmluZztcbn1cblxuLy8gQ29uZmlndXJhdGlvbiBjb25zdGFudHNcbmNvbnN0IEJVSUxESU5HU19QRVJfT1JHID0gNTtcbmNvbnN0IE1JTl9SRVNJREVOQ0VTX1BFUl9CVUlMRElORyA9IDU7XG5jb25zdCBNQVhfUkVTSURFTkNFU19QRVJfQlVJTERJTkcgPSAxMDtcbmNvbnN0IENPTU1PTl9TUEFDRVNfUEVSX0JVSUxESU5HID0gNDtcbmNvbnN0IEJPT0tJTkdTX1BFUl9SRVNFUlZBQkxFX1NQQUNFID0gODtcbmNvbnN0IERFTUFORFNfUEVSX1JFU0lERU5UID0gMjtcbmNvbnN0IEJJTExTX1BFUl9CVUlMRElOR19QRVJfTU9OVEggPSAzO1xuXG4vLyBRdWViZWMtc3BlY2lmaWMgZGF0YVxuY29uc3QgUVVFQkVDX0NJVElFUyA9IFtcbiAgJ01vbnRyZWFsJywgJ1F1ZWJlYyBDaXR5JywgJ0xhdmFsJywgJ0dhdGluZWF1JywgJ0xvbmd1ZXVpbCcsXG4gICdTaGVyYnJvb2tlJywgJ1NhZ3VlbmF5JywgJ1Ryb2lzLVJpdmnDqHJlcycsICdUZXJyZWJvbm5lJywgJ1NhaW50LUplYW4tc3VyLVJpY2hlbGlldSdcbl07XG5cbmNvbnN0IENPTU1PTl9TUEFDRV9UWVBFUyA9IFtcbiAgeyBuYW1lOiAnR3ltJywgaXNCb29rYWJsZTogZmFsc2UgfSxcbiAgeyBuYW1lOiAnUm9vZnRvcCBUZXJyYWNlJywgaXNCb29rYWJsZTogdHJ1ZSB9LFxuICB7IG5hbWU6ICdQb29sJywgaXNCb29rYWJsZTogZmFsc2UgfSxcbiAgeyBuYW1lOiAnQ29uZmVyZW5jZSBSb29tJywgaXNCb29rYWJsZTogdHJ1ZSB9LFxuICB7IG5hbWU6ICdQYXJ0eSBSb29tJywgaXNCb29rYWJsZTogdHJ1ZSB9LFxuICB7IG5hbWU6ICdMb2JieScsIGlzQm9va2FibGU6IGZhbHNlIH0sXG4gIHsgbmFtZTogJ1N0b3JhZ2UgUm9vbScsIGlzQm9va2FibGU6IGZhbHNlIH0sXG4gIHsgbmFtZTogJ0xhdW5kcnkgUm9vbScsIGlzQm9va2FibGU6IGZhbHNlIH1cbl07XG5cbmNvbnN0IE1BSU5URU5BTkNFX0NBVEVHT1JJRVMgPSBbXG4gICdQbHVtYmluZycsICdFbGVjdHJpY2FsJywgJ0hWQUMnLCAnU3RydWN0dXJhbCcsICdBcHBsaWFuY2VzJywgJ0dlbmVyYWwgTWFpbnRlbmFuY2UnXG5dO1xuXG5jb25zdCBCSUxMX0NBVEVHT1JJRVMgPSBbXG4gICdpbnN1cmFuY2UnLCAnbWFpbnRlbmFuY2UnLCAndXRpbGl0aWVzJywgJ2NsZWFuaW5nJywgJ3NlY3VyaXR5JywgXG4gICdsYW5kc2NhcGluZycsICdwcm9mZXNzaW9uYWxfc2VydmljZXMnLCAnYWRtaW5pc3RyYXRpb24nLCAnc3VwcGxpZXMnXG5dIGFzIGNvbnN0O1xuXG4vKipcbiAqIFBhcnNlIGNvbW1hbmQgbGluZSBhcmd1bWVudHNcbiAqL1xuZnVuY3Rpb24gcGFyc2VBcmd1bWVudHMoKTogQ2xpQXJncyB7XG4gIGNvbnN0IGFyZ3MgPSBwcm9jZXNzLmFyZ3Yuc2xpY2UoMik7XG4gIFxuICBsZXQgdHlwZTogJ2RlbW8nIHwgJ3Byb2R1Y3Rpb24nIHwgdW5kZWZpbmVkO1xuICBsZXQgbmFtZTogc3RyaW5nIHwgdW5kZWZpbmVkO1xuICBsZXQgZGF0YWJhc2U6ICdkZXYnIHwgJ3Byb2QnID0gJ2Rldic7IC8vIERlZmF1bHQgdG8gZGV2ZWxvcG1lbnQgZGF0YWJhc2VcbiAgXG4gIGZvciAobGV0IGkgPSAwOyBpIDwgYXJncy5sZW5ndGg7IGkrKykge1xuICAgIGlmIChhcmdzW2ldID09PSAnLS10eXBlJyAmJiBpICsgMSA8IGFyZ3MubGVuZ3RoKSB7XG4gICAgICBjb25zdCB0eXBlVmFsdWUgPSBhcmdzW2kgKyAxXTtcbiAgICAgIGlmICh0eXBlVmFsdWUgPT09ICdkZW1vJyB8fCB0eXBlVmFsdWUgPT09ICdwcm9kdWN0aW9uJykge1xuICAgICAgICB0eXBlID0gdHlwZVZhbHVlO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY29uc29sZS5lcnJvcign4p2MIC0tdHlwZSBtdXN0IGJlIGVpdGhlciBcImRlbW9cIiBvciBcInByb2R1Y3Rpb25cIicpO1xuICAgICAgICBwcm9jZXNzLmV4aXQoMSk7XG4gICAgICB9XG4gICAgICBpKys7IC8vIFNraXAgbmV4dCBhcmd1bWVudCBhcyBpdCdzIHRoZSB2YWx1ZVxuICAgIH0gZWxzZSBpZiAoYXJnc1tpXSA9PT0gJy0tbmFtZScgJiYgaSArIDEgPCBhcmdzLmxlbmd0aCkge1xuICAgICAgbmFtZSA9IGFyZ3NbaSArIDFdO1xuICAgICAgaSsrOyAvLyBTa2lwIG5leHQgYXJndW1lbnQgYXMgaXQncyB0aGUgdmFsdWVcbiAgICB9IGVsc2UgaWYgKGFyZ3NbaV0gPT09ICctLWRhdGFiYXNlJyAmJiBpICsgMSA8IGFyZ3MubGVuZ3RoKSB7XG4gICAgICBjb25zdCBkYXRhYmFzZVZhbHVlID0gYXJnc1tpICsgMV07XG4gICAgICBpZiAoZGF0YWJhc2VWYWx1ZSA9PT0gJ2RldicgfHwgZGF0YWJhc2VWYWx1ZSA9PT0gJ3Byb2QnKSB7XG4gICAgICAgIGRhdGFiYXNlID0gZGF0YWJhc2VWYWx1ZTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ+KdjCAtLWRhdGFiYXNlIG11c3QgYmUgZWl0aGVyIFwiZGV2XCIgb3IgXCJwcm9kXCInKTtcbiAgICAgICAgcHJvY2Vzcy5leGl0KDEpO1xuICAgICAgfVxuICAgICAgaSsrOyAvLyBTa2lwIG5leHQgYXJndW1lbnQgYXMgaXQncyB0aGUgdmFsdWVcbiAgICB9XG4gIH1cbiAgXG4gIGlmICghdHlwZSkge1xuICAgIGNvbnNvbGUuZXJyb3IoJ+KdjCAtLXR5cGUgYXJndW1lbnQgaXMgcmVxdWlyZWQgKGRlbW8gb3IgcHJvZHVjdGlvbiknKTtcbiAgICBjb25zb2xlLmVycm9yKCdVc2FnZTogbnB4IHRzeCBzY3JpcHRzL2NyZWF0ZS1kZW1vLWVudmlyb25tZW50LnRzIC0tdHlwZSBkZW1vIC0tbmFtZSBcIkRlbW8gT3JnYW5pemF0aW9uXCIgWy0tZGF0YWJhc2UgZGV2fHByb2RdJyk7XG4gICAgcHJvY2Vzcy5leGl0KDEpO1xuICB9XG4gIFxuICBpZiAoIW5hbWUpIHtcbiAgICBjb25zb2xlLmVycm9yKCfinYwgLS1uYW1lIGFyZ3VtZW50IGlzIHJlcXVpcmVkJyk7XG4gICAgY29uc29sZS5lcnJvcignVXNhZ2U6IG5weCB0c3ggc2NyaXB0cy9jcmVhdGUtZGVtby1lbnZpcm9ubWVudC50cyAtLXR5cGUgZGVtbyAtLW5hbWUgXCJEZW1vIE9yZ2FuaXphdGlvblwiIFstLWRhdGFiYXNlIGRldnxwcm9kXScpO1xuICAgIHByb2Nlc3MuZXhpdCgxKTtcbiAgfVxuICBcbiAgcmV0dXJuIHsgdHlwZSwgbmFtZSwgZGF0YWJhc2UgfTtcbn1cblxuLyoqXG4gKiBHZW5lcmF0ZSBRdWViZWMtc3BlY2lmaWMgcG9zdGFsIGNvZGVcbiAqL1xuZnVuY3Rpb24gZ2VuZXJhdGVRdWViZWNQb3N0YWxDb2RlKCk6IHN0cmluZyB7XG4gIGNvbnN0IGxldHRlcnMgPSAnQUJDREVGR0hJSktMTU5PUFFSU1RVVldYWVonO1xuICBjb25zdCBkaWdpdHMgPSAnMDEyMzQ1Njc4OSc7XG4gIFxuICByZXR1cm4gYEgke2RpZ2l0c1tNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiBkaWdpdHMubGVuZ3RoKV19JHtsZXR0ZXJzW01hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIGxldHRlcnMubGVuZ3RoKV19ICR7ZGlnaXRzW01hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIGRpZ2l0cy5sZW5ndGgpXX0ke2xldHRlcnNbTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogbGV0dGVycy5sZW5ndGgpXX0ke2RpZ2l0c1tNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiBkaWdpdHMubGVuZ3RoKV19YDtcbn1cblxuLyoqXG4gKiBHZW5lcmF0ZSBRdWViZWMgcGhvbmUgbnVtYmVyIGluIGZvcm1hdCAoNTE0KSA1NTUtMDEyM1xuICovXG5mdW5jdGlvbiBnZW5lcmF0ZVF1ZWJlY1Bob25lKCk6IHN0cmluZyB7XG4gIGNvbnN0IGFyZWFDb2RlcyA9IFsnNTE0JywgJzQzOCcsICc0NTAnLCAnNTc5JywgJzQxOCcsICc1ODEnLCAnODE5JywgJzg3MyddO1xuICBjb25zdCBhcmVhQ29kZSA9IGFyZWFDb2Rlc1tNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiBhcmVhQ29kZXMubGVuZ3RoKV07XG4gIGNvbnN0IGV4Y2hhbmdlID0gZmFrZXIuc3RyaW5nLm51bWVyaWMoMyk7XG4gIGNvbnN0IG51bWJlciA9IGZha2VyLnN0cmluZy5udW1lcmljKDQpO1xuICBcbiAgcmV0dXJuIGAoJHthcmVhQ29kZX0pICR7ZXhjaGFuZ2V9LSR7bnVtYmVyfWA7XG59XG5cbi8qKlxuICogR2VuZXJhdGUgcmVhbGlzdGljIFF1ZWJlYyBzdHJlZXQgYWRkcmVzc1xuICovXG5mdW5jdGlvbiBnZW5lcmF0ZVF1ZWJlY0FkZHJlc3MoKTogc3RyaW5nIHtcbiAgY29uc3Qgc3RyZWV0VHlwZXMgPSBbJ3J1ZScsICdhdmVudWUnLCAnYm91bGV2YXJkJywgJ21vbnTDqWUnLCAnY2hlbWluJ107XG4gIGNvbnN0IHN0cmVldE5hbWVzID0gW1xuICAgICdTYWludC1MYXVyZW50JywgJ05vdHJlLURhbWUnLCAnU2FpbnRlLUNhdGhlcmluZScsICdTaGVyYnJvb2tlJywgJ1JlbsOpLUzDqXZlc3F1ZScsXG4gICAgJ2RlIGxhIE1vbnRhZ25lJywgJ2R1IFBhcmMnLCAnZGVzIMOJcmFibGVzJywgJ2RlcyBQaW5zJywgJ2RlIE1haXNvbm5ldXZlJ1xuICBdO1xuICBcbiAgY29uc3QgbnVtYmVyID0gZmFrZXIubnVtYmVyLmludCh7IG1pbjogMTAwLCBtYXg6IDk5OTkgfSk7XG4gIGNvbnN0IHN0cmVldFR5cGUgPSBzdHJlZXRUeXBlc1tNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiBzdHJlZXRUeXBlcy5sZW5ndGgpXTtcbiAgY29uc3Qgc3RyZWV0TmFtZSA9IHN0cmVldE5hbWVzW01hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIHN0cmVldE5hbWVzLmxlbmd0aCldO1xuICBcbiAgcmV0dXJuIGAke251bWJlcn0gJHtzdHJlZXRUeXBlfSAke3N0cmVldE5hbWV9YDtcbn1cblxuLyoqXG4gKiBVcHNlcnQgb3JnYW5pemF0aW9uIChmaW5kIGV4aXN0aW5nIG9yIGNyZWF0ZSBuZXcpXG4gKi9cbmFzeW5jIGZ1bmN0aW9uIHVwc2VydE9yZ2FuaXphdGlvbihuYW1lOiBzdHJpbmcsIHR5cGU6ICdkZW1vJyB8ICdwcm9kdWN0aW9uJyk6IFByb21pc2U8c2NoZW1hLk9yZ2FuaXphdGlvbj4ge1xuICB0cnkge1xuICAgIGNvbnNvbGUubG9nKGDwn5SNIExvb2tpbmcgZm9yIGV4aXN0aW5nIG9yZ2FuaXphdGlvbjogXCIke25hbWV9XCJgKTtcbiAgICBcbiAgICAvLyBDaGVjayBpZiBvcmdhbml6YXRpb24gYWxyZWFkeSBleGlzdHNcbiAgICBjb25zdCBleGlzdGluZ09yZ3MgPSBhd2FpdCBkYlxuICAgICAgLnNlbGVjdCgpXG4gICAgICAuZnJvbShzY2hlbWEub3JnYW5pemF0aW9ucylcbiAgICAgIC53aGVyZShlcShzY2hlbWEub3JnYW5pemF0aW9ucy5uYW1lLCBuYW1lKSlcbiAgICAgIC5saW1pdCgxKTtcbiAgICBcbiAgICBpZiAoZXhpc3RpbmdPcmdzLmxlbmd0aCA+IDApIHtcbiAgICAgIGNvbnNvbGUubG9nKGDinIUgRm91bmQgZXhpc3Rpbmcgb3JnYW5pemF0aW9uOiBcIiR7bmFtZX1cIiAoSUQ6ICR7ZXhpc3RpbmdPcmdzWzBdLmlkfSlgKTtcbiAgICAgIFxuICAgICAgLy8gVXBkYXRlIHRoZSBleGlzdGluZyBvcmdhbml6YXRpb24gd2l0aCBuZXcgZGF0YVxuICAgICAgY29uc3QgW3VwZGF0ZWRPcmddID0gYXdhaXQgZGJcbiAgICAgICAgLnVwZGF0ZShzY2hlbWEub3JnYW5pemF0aW9ucylcbiAgICAgICAgLnNldCh7XG4gICAgICAgICAgdHlwZTogdHlwZSA9PT0gJ2RlbW8nID8gJ2RlbW8nIDogJ21hbmFnZW1lbnRfY29tcGFueScsXG4gICAgICAgICAgYWRkcmVzczogZ2VuZXJhdGVRdWViZWNBZGRyZXNzKCksXG4gICAgICAgICAgY2l0eTogUVVFQkVDX0NJVElFU1tNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiBRVUVCRUNfQ0lUSUVTLmxlbmd0aCldLFxuICAgICAgICAgIHByb3ZpbmNlOiAnUUMnLFxuICAgICAgICAgIHBvc3RhbENvZGU6IGdlbmVyYXRlUXVlYmVjUG9zdGFsQ29kZSgpLFxuICAgICAgICAgIHBob25lOiBnZW5lcmF0ZVF1ZWJlY1Bob25lKCksXG4gICAgICAgICAgZW1haWw6IGZha2VyLmludGVybmV0LmVtYWlsKCkudG9Mb3dlckNhc2UoKSxcbiAgICAgICAgICB3ZWJzaXRlOiBmYWtlci5pbnRlcm5ldC51cmwoKSxcbiAgICAgICAgICByZWdpc3RyYXRpb25OdW1iZXI6IGAke3R5cGUudG9VcHBlckNhc2UoKX0tJHtmYWtlci5zdHJpbmcuYWxwaGFudW1lcmljKDYpLnRvVXBwZXJDYXNlKCl9YCxcbiAgICAgICAgICBpc0FjdGl2ZTogdHJ1ZSxcbiAgICAgICAgICB1cGRhdGVkQXQ6IG5ldyBEYXRlKClcbiAgICAgICAgfSlcbiAgICAgICAgLndoZXJlKGVxKHNjaGVtYS5vcmdhbml6YXRpb25zLmlkLCBleGlzdGluZ09yZ3NbMF0uaWQpKVxuICAgICAgICAucmV0dXJuaW5nKCk7XG4gICAgICBcbiAgICAgIGNvbnNvbGUubG9nKGDwn5OdIFVwZGF0ZWQgb3JnYW5pemF0aW9uIFwiJHtuYW1lfVwiIHdpdGggbmV3IGRlbW8gZGF0YWApO1xuICAgICAgcmV0dXJuIHVwZGF0ZWRPcmc7XG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbnNvbGUubG9nKGDinpUgQ3JlYXRpbmcgbmV3IG9yZ2FuaXphdGlvbjogXCIke25hbWV9XCJgKTtcbiAgICAgIFxuICAgICAgLy8gQ3JlYXRlIG5ldyBvcmdhbml6YXRpb25cbiAgICAgIGNvbnN0IFtuZXdPcmddID0gYXdhaXQgZGJcbiAgICAgICAgLmluc2VydChzY2hlbWEub3JnYW5pemF0aW9ucylcbiAgICAgICAgLnZhbHVlcyh7XG4gICAgICAgICAgbmFtZSxcbiAgICAgICAgICB0eXBlOiB0eXBlID09PSAnZGVtbycgPyAnZGVtbycgOiAnbWFuYWdlbWVudF9jb21wYW55JyxcbiAgICAgICAgICBhZGRyZXNzOiBnZW5lcmF0ZVF1ZWJlY0FkZHJlc3MoKSxcbiAgICAgICAgICBjaXR5OiBRVUVCRUNfQ0lUSUVTW01hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIFFVRUJFQ19DSVRJRVMubGVuZ3RoKV0sXG4gICAgICAgICAgcHJvdmluY2U6ICdRQycsXG4gICAgICAgICAgcG9zdGFsQ29kZTogZ2VuZXJhdGVRdWViZWNQb3N0YWxDb2RlKCksXG4gICAgICAgICAgcGhvbmU6IGdlbmVyYXRlUXVlYmVjUGhvbmUoKSxcbiAgICAgICAgICBlbWFpbDogZmFrZXIuaW50ZXJuZXQuZW1haWwoKS50b0xvd2VyQ2FzZSgpLFxuICAgICAgICAgIHdlYnNpdGU6IGZha2VyLmludGVybmV0LnVybCgpLFxuICAgICAgICAgIHJlZ2lzdHJhdGlvbk51bWJlcjogYCR7dHlwZS50b1VwcGVyQ2FzZSgpfS0ke2Zha2VyLnN0cmluZy5hbHBoYW51bWVyaWMoNikudG9VcHBlckNhc2UoKX1gLFxuICAgICAgICAgIGlzQWN0aXZlOiB0cnVlXG4gICAgICAgIH0pXG4gICAgICAgIC5yZXR1cm5pbmcoKTtcbiAgICAgIFxuICAgICAgY29uc29sZS5sb2coYOKchSBDcmVhdGVkIG5ldyBvcmdhbml6YXRpb246IFwiJHtuYW1lfVwiIChJRDogJHtuZXdPcmcuaWR9KWApO1xuICAgICAgcmV0dXJuIG5ld09yZztcbiAgICB9XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcihg4p2MIEZhaWxlZCB0byB1cHNlcnQgb3JnYW5pemF0aW9uIFwiJHtuYW1lfVwiOmAsIGVycm9yKTtcbiAgICB0aHJvdyBlcnJvcjtcbiAgfVxufVxuXG4vKipcbiAqIENyZWF0ZSBidWlsZGluZ3MgZm9yIGFuIG9yZ2FuaXphdGlvblxuICovXG5hc3luYyBmdW5jdGlvbiBzZWVkQnVpbGRpbmdzKG9yZ2FuaXphdGlvbklkOiBzdHJpbmcpOiBQcm9taXNlPHsgYnVpbGRpbmdzOiBDcmVhdGVkQnVpbGRpbmdbXSwgbmV3QnVpbGRpbmdzQ3JlYXRlZDogbnVtYmVyIH0+IHtcbiAgdHJ5IHtcbiAgICBjb25zb2xlLmxvZyhg8J+UjSBDaGVja2luZyBidWlsZGluZ3MgZm9yIG9yZ2FuaXphdGlvbiBJRDogJHtvcmdhbml6YXRpb25JZH1gKTtcbiAgICBcbiAgICAvLyBDaGVjayBmb3IgZXhpc3RpbmcgQUNUSVZFIGJ1aWxkaW5ncyBpbiB0aGlzIG9yZ2FuaXphdGlvblxuICAgIGNvbnN0IGV4aXN0aW5nQnVpbGRpbmdzID0gYXdhaXQgZGJcbiAgICAgIC5zZWxlY3Qoe1xuICAgICAgICBpZDogc2NoZW1hLmJ1aWxkaW5ncy5pZCxcbiAgICAgICAgbmFtZTogc2NoZW1hLmJ1aWxkaW5ncy5uYW1lLFxuICAgICAgICBvcmdhbml6YXRpb25JZDogc2NoZW1hLmJ1aWxkaW5ncy5vcmdhbml6YXRpb25JZFxuICAgICAgfSlcbiAgICAgIC5mcm9tKHNjaGVtYS5idWlsZGluZ3MpXG4gICAgICAud2hlcmUoXG4gICAgICAgIGFuZChcbiAgICAgICAgICBlcShzY2hlbWEuYnVpbGRpbmdzLm9yZ2FuaXphdGlvbklkLCBvcmdhbml6YXRpb25JZCksXG4gICAgICAgICAgZXEoc2NoZW1hLmJ1aWxkaW5ncy5pc0FjdGl2ZSwgdHJ1ZSlcbiAgICAgICAgKVxuICAgICAgKTtcbiAgICBcbiAgICBjb25zdCBtYXhCdWlsZGluZ3MgPSA1OyAvLyBNYXhpbXVtIGJ1aWxkaW5ncyBwZXIgb3JnYW5pemF0aW9uXG4gICAgY29uc3QgYnVpbGRpbmdzVG9DcmVhdGUgPSBNYXRoLm1heCgwLCBtYXhCdWlsZGluZ3MgLSBleGlzdGluZ0J1aWxkaW5ncy5sZW5ndGgpO1xuICAgIFxuICAgIGNvbnNvbGUubG9nKGDwn4+iIEZvdW5kICR7ZXhpc3RpbmdCdWlsZGluZ3MubGVuZ3RofSBleGlzdGluZyBidWlsZGluZ3MgZm9yIHRoaXMgb3JnYW5pemF0aW9uIChtYXg6ICR7bWF4QnVpbGRpbmdzfSkuYCk7XG4gICAgY29uc29sZS5sb2coYPCfj6IgV2lsbCBjcmVhdGUgJHtidWlsZGluZ3NUb0NyZWF0ZX0gYWRkaXRpb25hbCBidWlsZGluZ3MuYCk7XG4gICAgXG4gICAgaWYgKGV4aXN0aW5nQnVpbGRpbmdzLmxlbmd0aCA+PSBtYXhCdWlsZGluZ3MpIHtcbiAgICAgIGNvbnNvbGUubG9nKGDwn4+iIE9yZ2FuaXphdGlvbiBhbHJlYWR5IGhhcyBtYXhpbXVtIGJ1aWxkaW5ncy4gU2tpcHBpbmcgYnVpbGRpbmcgY3JlYXRpb24uYCk7XG4gICAgICByZXR1cm4ge1xuICAgICAgICBidWlsZGluZ3M6IGV4aXN0aW5nQnVpbGRpbmdzLm1hcChiID0+ICh7XG4gICAgICAgICAgaWQ6IGIuaWQsXG4gICAgICAgICAgbmFtZTogYi5uYW1lLFxuICAgICAgICAgIG9yZ2FuaXphdGlvbklkOiBiLm9yZ2FuaXphdGlvbklkXG4gICAgICAgIH0pKSxcbiAgICAgICAgbmV3QnVpbGRpbmdzQ3JlYXRlZDogMFxuICAgICAgfTtcbiAgICB9XG4gICAgXG4gICAgY29uc29sZS5sb2coYPCfj6IgQ3JlYXRpbmcgJHtidWlsZGluZ3NUb0NyZWF0ZX0gYWRkaXRpb25hbCBidWlsZGluZ3MuLi5gKTtcbiAgICBcbiAgICBjb25zdCBidWlsZGluZ3M6IENyZWF0ZWRCdWlsZGluZ1tdID0gWy4uLmV4aXN0aW5nQnVpbGRpbmdzLm1hcChiID0+ICh7XG4gICAgICBpZDogYi5pZCxcbiAgICAgIG5hbWU6IGIubmFtZSxcbiAgICAgIG9yZ2FuaXphdGlvbklkOiBiLm9yZ2FuaXphdGlvbklkXG4gICAgfSkpXTtcbiAgICBcbiAgICBmb3IgKGxldCBpID0gMTsgaSA8PSBidWlsZGluZ3NUb0NyZWF0ZTsgaSsrKSB7XG4gICAgICBjb25zdCBidWlsZGluZ05hbWUgPSBgJHtmYWtlci5sb2NhdGlvbi5zdHJlZXRBZGRyZXNzKCl9IEJ1aWxkaW5nICR7ZXhpc3RpbmdCdWlsZGluZ3MubGVuZ3RoICsgaX1gO1xuICAgICAgXG4gICAgICBjb25zdCBbYnVpbGRpbmddID0gYXdhaXQgZGJcbiAgICAgICAgLmluc2VydChzY2hlbWEuYnVpbGRpbmdzKVxuICAgICAgICAudmFsdWVzKHtcbiAgICAgICAgICBvcmdhbml6YXRpb25JZCxcbiAgICAgICAgICBuYW1lOiBidWlsZGluZ05hbWUsXG4gICAgICAgICAgYWRkcmVzczogZ2VuZXJhdGVRdWViZWNBZGRyZXNzKCksXG4gICAgICAgICAgY2l0eTogUVVFQkVDX0NJVElFU1tNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiBRVUVCRUNfQ0lUSUVTLmxlbmd0aCldLFxuICAgICAgICAgIHByb3ZpbmNlOiAnUUMnLFxuICAgICAgICAgIHBvc3RhbENvZGU6IGdlbmVyYXRlUXVlYmVjUG9zdGFsQ29kZSgpLFxuICAgICAgICAgIGJ1aWxkaW5nVHlwZTogTWF0aC5yYW5kb20oKSA+IDAuNSA/ICdjb25kbycgOiAnYXBwYXJ0ZW1lbnQnLFxuICAgICAgICAgIHllYXJCdWlsdDogZmFrZXIubnVtYmVyLmludCh7IG1pbjogMTk1MCwgbWF4OiAyMDIzIH0pLFxuICAgICAgICAgIHRvdGFsVW5pdHM6IGZha2VyLm51bWJlci5pbnQoeyBtaW46IE1JTl9SRVNJREVOQ0VTX1BFUl9CVUlMRElORywgbWF4OiBNQVhfUkVTSURFTkNFU19QRVJfQlVJTERJTkcgfSksXG4gICAgICAgICAgdG90YWxGbG9vcnM6IGZha2VyLm51bWJlci5pbnQoeyBtaW46IDMsIG1heDogMjUgfSksXG4gICAgICAgICAgcGFya2luZ1NwYWNlczogZmFrZXIubnVtYmVyLmludCh7IG1pbjogMTAsIG1heDogMTUwIH0pLFxuICAgICAgICAgIHN0b3JhZ2VTcGFjZXM6IGZha2VyLm51bWJlci5pbnQoeyBtaW46IDUsIG1heDogNzUgfSksXG4gICAgICAgICAgYW1lbml0aWVzOiBKU09OLnN0cmluZ2lmeShbXG4gICAgICAgICAgICAnRWxldmF0b3InLCAnUGFya2luZycsICdTdG9yYWdlJywgJ0d5bScsICdQb29sJywgJ0NvbmNpZXJnZSdcbiAgICAgICAgICBdLmZpbHRlcigoKSA9PiBNYXRoLnJhbmRvbSgpID4gMC4zKSksXG4gICAgICAgICAgbWFuYWdlbWVudENvbXBhbnk6IGZha2VyLmNvbXBhbnkubmFtZSgpLFxuICAgICAgICAgIGJhbmtBY2NvdW50TnVtYmVyOiBmYWtlci5maW5hbmNlLmFjY291bnROdW1iZXIoMTIpLFxuICAgICAgICAgIGlzQWN0aXZlOiB0cnVlXG4gICAgICAgIH0pXG4gICAgICAgIC5yZXR1cm5pbmcoKTtcbiAgICAgIFxuICAgICAgYnVpbGRpbmdzLnB1c2goe1xuICAgICAgICBpZDogYnVpbGRpbmcuaWQsXG4gICAgICAgIG5hbWU6IGJ1aWxkaW5nLm5hbWUsXG4gICAgICAgIG9yZ2FuaXphdGlvbklkOiBidWlsZGluZy5vcmdhbml6YXRpb25JZFxuICAgICAgfSk7XG4gICAgICBcbiAgICAgIGNvbnNvbGUubG9nKGAgICDinIUgQ3JlYXRlZCBidWlsZGluZzogJHtidWlsZGluZy5uYW1lfWApO1xuICAgIH1cbiAgICBcbiAgICBjb25zb2xlLmxvZyhg8J+TiiBDcmVhdGVkICR7YnVpbGRpbmdzVG9DcmVhdGV9IG5ldyBidWlsZGluZ3MgKHRvdGFsOiAke2J1aWxkaW5ncy5sZW5ndGh9KWApO1xuICAgIHJldHVybiB7XG4gICAgICBidWlsZGluZ3MsXG4gICAgICBuZXdCdWlsZGluZ3NDcmVhdGVkOiBidWlsZGluZ3NUb0NyZWF0ZVxuICAgIH07XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcign4p2MIEZhaWxlZCB0byBjcmVhdGUgYnVpbGRpbmdzOicsIGVycm9yKTtcbiAgICB0aHJvdyBlcnJvcjtcbiAgfVxufVxuXG4vKipcbiAqIENyZWF0ZSByZXNpZGVuY2VzIGZvciBidWlsZGluZ3MgKG9ubHkgZm9yIG5ldyBidWlsZGluZ3MgdGhhdCBkb24ndCBoYXZlIHJlc2lkZW5jZXMpXG4gKi9cbmFzeW5jIGZ1bmN0aW9uIHNlZWRSZXNpZGVuY2VzKGJ1aWxkaW5nczogQ3JlYXRlZEJ1aWxkaW5nW10sIG5ld0J1aWxkaW5nc09ubHk6IGJvb2xlYW4gPSBmYWxzZSk6IFByb21pc2U8Q3JlYXRlZFJlc2lkZW5jZVtdPiB7XG4gIHRyeSB7XG4gICAgY29uc29sZS5sb2coJ/Cfj6AgQ3JlYXRpbmcgcmVzaWRlbmNlcy4uLicpO1xuICAgIFxuICAgIGNvbnN0IHJlc2lkZW5jZXM6IENyZWF0ZWRSZXNpZGVuY2VbXSA9IFtdO1xuICAgIFxuICAgIGZvciAoY29uc3QgYnVpbGRpbmcgb2YgYnVpbGRpbmdzKSB7XG4gICAgICAvLyBDaGVjayBpZiB0aGlzIGJ1aWxkaW5nIGFscmVhZHkgaGFzIHJlc2lkZW5jZXMgKGlmIHdlIG9ubHkgd2FudCBuZXcgYnVpbGRpbmdzKVxuICAgICAgaWYgKG5ld0J1aWxkaW5nc09ubHkpIHtcbiAgICAgICAgY29uc3QgZXhpc3RpbmdSZXNpZGVuY2VzID0gYXdhaXQgZGJcbiAgICAgICAgICAuc2VsZWN0KHtcbiAgICAgICAgICAgIGlkOiBzY2hlbWEucmVzaWRlbmNlcy5pZCxcbiAgICAgICAgICAgIHVuaXROdW1iZXI6IHNjaGVtYS5yZXNpZGVuY2VzLnVuaXROdW1iZXIsXG4gICAgICAgICAgICBidWlsZGluZ0lkOiBzY2hlbWEucmVzaWRlbmNlcy5idWlsZGluZ0lkXG4gICAgICAgICAgfSlcbiAgICAgICAgICAuZnJvbShzY2hlbWEucmVzaWRlbmNlcylcbiAgICAgICAgICAud2hlcmUoXG4gICAgICAgICAgICBhbmQoXG4gICAgICAgICAgICAgIGVxKHNjaGVtYS5yZXNpZGVuY2VzLmJ1aWxkaW5nSWQsIGJ1aWxkaW5nLmlkKSxcbiAgICAgICAgICAgICAgZXEoc2NoZW1hLnJlc2lkZW5jZXMuaXNBY3RpdmUsIHRydWUpXG4gICAgICAgICAgICApXG4gICAgICAgICAgKTtcbiAgICAgICAgXG4gICAgICAgIGlmIChleGlzdGluZ1Jlc2lkZW5jZXMubGVuZ3RoID4gMCkge1xuICAgICAgICAgIGNvbnNvbGUubG9nKGAgICBCdWlsZGluZyAke2J1aWxkaW5nLm5hbWV9IGFscmVhZHkgaGFzIHJlc2lkZW5jZXMsIGFkZGluZyAke2V4aXN0aW5nUmVzaWRlbmNlcy5sZW5ndGh9IGV4aXN0aW5nIHJlc2lkZW5jZXMuLi5gKTtcbiAgICAgICAgICAvLyBBZGQgZXhpc3RpbmcgcmVzaWRlbmNlcyB0byB0aGUgYXJyYXlcbiAgICAgICAgICBmb3IgKGNvbnN0IHJlc2lkZW5jZSBvZiBleGlzdGluZ1Jlc2lkZW5jZXMpIHtcbiAgICAgICAgICAgIHJlc2lkZW5jZXMucHVzaCh7XG4gICAgICAgICAgICAgIGlkOiByZXNpZGVuY2UuaWQsXG4gICAgICAgICAgICAgIHVuaXROdW1iZXI6IHJlc2lkZW5jZS51bml0TnVtYmVyLFxuICAgICAgICAgICAgICBidWlsZGluZ0lkOiByZXNpZGVuY2UuYnVpbGRpbmdJZCxcbiAgICAgICAgICAgICAgYnVpbGRpbmdOYW1lOiBidWlsZGluZy5uYW1lXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9XG4gICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIC8vIEdldCB0aGUgYnVpbGRpbmcncyB0b3RhbFVuaXRzIHRvIGNyZWF0ZSBleGFjdCBudW1iZXIgb2YgcmVzaWRlbmNlc1xuICAgICAgY29uc3QgYnVpbGRpbmdEYXRhID0gYXdhaXQgZGJcbiAgICAgICAgLnNlbGVjdCh7IHRvdGFsVW5pdHM6IHNjaGVtYS5idWlsZGluZ3MudG90YWxVbml0cyB9KVxuICAgICAgICAuZnJvbShzY2hlbWEuYnVpbGRpbmdzKVxuICAgICAgICAud2hlcmUoZXEoc2NoZW1hLmJ1aWxkaW5ncy5pZCwgYnVpbGRpbmcuaWQpKVxuICAgICAgICAubGltaXQoMSk7XG4gICAgICBcbiAgICAgIGNvbnN0IHJlc2lkZW5jZUNvdW50ID0gYnVpbGRpbmdEYXRhWzBdPy50b3RhbFVuaXRzIHx8IE1JTl9SRVNJREVOQ0VTX1BFUl9CVUlMRElORztcbiAgICAgIFxuICAgICAgY29uc29sZS5sb2coYCAgIENyZWF0aW5nICR7cmVzaWRlbmNlQ291bnR9IHJlc2lkZW5jZXMgZm9yICR7YnVpbGRpbmcubmFtZX1gKTtcbiAgICAgIFxuICAgICAgZm9yIChsZXQgaSA9IDE7IGkgPD0gcmVzaWRlbmNlQ291bnQ7IGkrKykge1xuICAgICAgICBjb25zdCB1bml0TnVtYmVyID0gYCR7ZmFrZXIubnVtYmVyLmludCh7IG1pbjogMTAwLCBtYXg6IDk5OSB9KX1gO1xuICAgICAgICBcbiAgICAgICAgY29uc3QgW3Jlc2lkZW5jZV0gPSBhd2FpdCBkYlxuICAgICAgICAgIC5pbnNlcnQoc2NoZW1hLnJlc2lkZW5jZXMpXG4gICAgICAgICAgLnZhbHVlcyh7XG4gICAgICAgICAgICBidWlsZGluZ0lkOiBidWlsZGluZy5pZCxcbiAgICAgICAgICAgIHVuaXROdW1iZXIsXG4gICAgICAgICAgICBmbG9vcjogZmFrZXIubnVtYmVyLmludCh7IG1pbjogMSwgbWF4OiAxNSB9KSxcbiAgICAgICAgICAgIHNxdWFyZUZvb3RhZ2U6IGZha2VyLm51bWJlci5mbG9hdCh7IG1pbjogNTAwLCBtYXg6IDI1MDAsIGZyYWN0aW9uRGlnaXRzOiAwIH0pLnRvU3RyaW5nKCksXG4gICAgICAgICAgICBiZWRyb29tczogZmFrZXIubnVtYmVyLmludCh7IG1pbjogMSwgbWF4OiA0IH0pLFxuICAgICAgICAgICAgYmF0aHJvb21zOiBmYWtlci5udW1iZXIuZmxvYXQoeyBtaW46IDEsIG1heDogMy41LCBmcmFjdGlvbkRpZ2l0czogMSB9KS50b1N0cmluZygpLFxuICAgICAgICAgICAgYmFsY29ueTogTWF0aC5yYW5kb20oKSA+IDAuNCxcbiAgICAgICAgICAgIHBhcmtpbmdTcGFjZU51bWJlcnM6IE1hdGgucmFuZG9tKCkgPiAwLjMgPyBbXG4gICAgICAgICAgICAgIGBQJHtmYWtlci5udW1iZXIuaW50KHsgbWluOiAxLCBtYXg6IDIwMCB9KX1gXG4gICAgICAgICAgICBdIDogW10sXG4gICAgICAgICAgICBzdG9yYWdlU3BhY2VOdW1iZXJzOiBNYXRoLnJhbmRvbSgpID4gMC41ID8gW1xuICAgICAgICAgICAgICBgUyR7ZmFrZXIubnVtYmVyLmludCh7IG1pbjogMSwgbWF4OiAxMDAgfSl9YFxuICAgICAgICAgICAgXSA6IFtdLFxuICAgICAgICAgICAgb3duZXJzaGlwUGVyY2VudGFnZTogZmFrZXIubnVtYmVyLmZsb2F0KHsgbWluOiAwLjEsIG1heDogNS4wLCBmcmFjdGlvbkRpZ2l0czogMiB9KS50b1N0cmluZygpLFxuICAgICAgICAgICAgbW9udGhseUZlZXM6IGZha2VyLm51bWJlci5mbG9hdCh7IG1pbjogMjAwLCBtYXg6IDgwMCwgZnJhY3Rpb25EaWdpdHM6IDIgfSkudG9TdHJpbmcoKSxcbiAgICAgICAgICAgIGlzQWN0aXZlOiB0cnVlXG4gICAgICAgICAgfSlcbiAgICAgICAgICAucmV0dXJuaW5nKCk7XG4gICAgICAgIFxuICAgICAgICByZXNpZGVuY2VzLnB1c2goe1xuICAgICAgICAgIGlkOiByZXNpZGVuY2UuaWQsXG4gICAgICAgICAgdW5pdE51bWJlcjogcmVzaWRlbmNlLnVuaXROdW1iZXIsXG4gICAgICAgICAgYnVpbGRpbmdJZDogcmVzaWRlbmNlLmJ1aWxkaW5nSWQsXG4gICAgICAgICAgYnVpbGRpbmdOYW1lOiBidWlsZGluZy5uYW1lXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH1cbiAgICBcbiAgICBjb25zb2xlLmxvZyhg8J+TiiBDcmVhdGVkICR7cmVzaWRlbmNlcy5sZW5ndGh9IHJlc2lkZW5jZXMgYWNyb3NzIGFsbCBidWlsZGluZ3NgKTtcbiAgICByZXR1cm4gcmVzaWRlbmNlcztcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKCfinYwgRmFpbGVkIHRvIGNyZWF0ZSByZXNpZGVuY2VzOicsIGVycm9yKTtcbiAgICB0aHJvdyBlcnJvcjtcbiAgfVxufVxuXG4vKipcbiAqIENyZWF0ZSBjb21tb24gc3BhY2VzIGZvciBidWlsZGluZ3NcbiAqL1xuYXN5bmMgZnVuY3Rpb24gc2VlZENvbW1vblNwYWNlcyhidWlsZGluZ3M6IENyZWF0ZWRCdWlsZGluZ1tdKTogUHJvbWlzZTxDcmVhdGVkQ29tbW9uU3BhY2VbXT4ge1xuICB0cnkge1xuICAgIGNvbnNvbGUubG9nKCfwn4+b77iPIENyZWF0aW5nIGNvbW1vbiBzcGFjZXMuLi4nKTtcbiAgICBcbiAgICBjb25zdCBjb21tb25TcGFjZXM6IENyZWF0ZWRDb21tb25TcGFjZVtdID0gW107XG4gICAgXG4gICAgZm9yIChjb25zdCBidWlsZGluZyBvZiBidWlsZGluZ3MpIHtcbiAgICAgIGNvbnNvbGUubG9nKGAgICBDcmVhdGluZyAke0NPTU1PTl9TUEFDRVNfUEVSX0JVSUxESU5HfSBjb21tb24gc3BhY2VzIGZvciAke2J1aWxkaW5nLm5hbWV9YCk7XG4gICAgICBcbiAgICAgIC8vIFNodWZmbGUgYW5kIHRha2UgZmlyc3QgTiBjb21tb24gc3BhY2UgdHlwZXNcbiAgICAgIGNvbnN0IHNodWZmbGVkVHlwZXMgPSBbLi4uQ09NTU9OX1NQQUNFX1RZUEVTXS5zb3J0KCgpID0+IDAuNSAtIE1hdGgucmFuZG9tKCkpO1xuICAgICAgY29uc3Qgc2VsZWN0ZWRUeXBlcyA9IHNodWZmbGVkVHlwZXMuc2xpY2UoMCwgQ09NTU9OX1NQQUNFU19QRVJfQlVJTERJTkcpO1xuICAgICAgXG4gICAgICBmb3IgKGNvbnN0IHNwYWNlVHlwZSBvZiBzZWxlY3RlZFR5cGVzKSB7XG4gICAgICAgIGNvbnN0IFtjb21tb25TcGFjZV0gPSBhd2FpdCBkYlxuICAgICAgICAgIC5pbnNlcnQoc2NoZW1hLmNvbW1vblNwYWNlcylcbiAgICAgICAgICAudmFsdWVzKHtcbiAgICAgICAgICAgIG5hbWU6IHNwYWNlVHlwZS5uYW1lLFxuICAgICAgICAgICAgZGVzY3JpcHRpb246IGAke3NwYWNlVHlwZS5uYW1lfSBmYWNpbGl0eSBhdmFpbGFibGUgdG8gcmVzaWRlbnRzYCxcbiAgICAgICAgICAgIGJ1aWxkaW5nSWQ6IGJ1aWxkaW5nLmlkLFxuICAgICAgICAgICAgaXNSZXNlcnZhYmxlOiBzcGFjZVR5cGUuaXNCb29rYWJsZSxcbiAgICAgICAgICAgIGNhcGFjaXR5OiBzcGFjZVR5cGUuaXNCb29rYWJsZSA/IGZha2VyLm51bWJlci5pbnQoeyBtaW46IDUsIG1heDogNTAgfSkgOiBudWxsLFxuICAgICAgICAgICAgb3BlbmluZ0hvdXJzOiBzcGFjZVR5cGUuaXNCb29rYWJsZSA/IEpTT04uc3RyaW5naWZ5KFtcbiAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIGRheTogJ21vbmRheScsXG4gICAgICAgICAgICAgICAgb3BlbjogJzA4OjAwJyxcbiAgICAgICAgICAgICAgICBjbG9zZTogJzIyOjAwJyxcbiAgICAgICAgICAgICAgICBpc09wZW46IHRydWUsXG4gICAgICAgICAgICAgICAgYnJlYWtzOiBbXVxuICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgZGF5OiAndHVlc2RheScsXG4gICAgICAgICAgICAgICAgb3BlbjogJzA4OjAwJyxcbiAgICAgICAgICAgICAgICBjbG9zZTogJzIyOjAwJyxcbiAgICAgICAgICAgICAgICBpc09wZW46IHRydWUsXG4gICAgICAgICAgICAgICAgYnJlYWtzOiBbXVxuICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgZGF5OiAnd2VkbmVzZGF5JyxcbiAgICAgICAgICAgICAgICBvcGVuOiAnMDg6MDAnLFxuICAgICAgICAgICAgICAgIGNsb3NlOiAnMjI6MDAnLFxuICAgICAgICAgICAgICAgIGlzT3BlbjogdHJ1ZSxcbiAgICAgICAgICAgICAgICBicmVha3M6IFtdXG4gICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBkYXk6ICd0aHVyc2RheScsXG4gICAgICAgICAgICAgICAgb3BlbjogJzA4OjAwJyxcbiAgICAgICAgICAgICAgICBjbG9zZTogJzIyOjAwJyxcbiAgICAgICAgICAgICAgICBpc09wZW46IHRydWUsXG4gICAgICAgICAgICAgICAgYnJlYWtzOiBbXVxuICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgZGF5OiAnZnJpZGF5JyxcbiAgICAgICAgICAgICAgICBvcGVuOiAnMDg6MDAnLFxuICAgICAgICAgICAgICAgIGNsb3NlOiAnMjI6MDAnLFxuICAgICAgICAgICAgICAgIGlzT3BlbjogdHJ1ZSxcbiAgICAgICAgICAgICAgICBicmVha3M6IFtdXG4gICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBkYXk6ICdzYXR1cmRheScsXG4gICAgICAgICAgICAgICAgb3BlbjogJzA5OjAwJyxcbiAgICAgICAgICAgICAgICBjbG9zZTogJzIxOjAwJyxcbiAgICAgICAgICAgICAgICBpc09wZW46IHRydWUsXG4gICAgICAgICAgICAgICAgYnJlYWtzOiBbXVxuICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgZGF5OiAnc3VuZGF5JyxcbiAgICAgICAgICAgICAgICBvcGVuOiAnMDk6MDAnLFxuICAgICAgICAgICAgICAgIGNsb3NlOiAnMjE6MDAnLFxuICAgICAgICAgICAgICAgIGlzT3BlbjogdHJ1ZSxcbiAgICAgICAgICAgICAgICBicmVha3M6IFtdXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIF0pIDogbnVsbCxcbiAgICAgICAgICAgIGF2YWlsYWJsZURheXM6IHNwYWNlVHlwZS5pc0Jvb2thYmxlID8gSlNPTi5zdHJpbmdpZnkoW1xuICAgICAgICAgICAgICAnbW9uZGF5JywgJ3R1ZXNkYXknLCAnd2VkbmVzZGF5JywgJ3RodXJzZGF5JywgJ2ZyaWRheScsICdzYXR1cmRheScsICdzdW5kYXknXG4gICAgICAgICAgICBdKSA6IG51bGwsXG4gICAgICAgICAgICBib29raW5nUnVsZXM6IHNwYWNlVHlwZS5pc0Jvb2thYmxlID8gJ01heGltdW0gNCBob3VycyBwZXIgYm9va2luZy4gTXVzdCBiZSBib29rZWQgYXQgbGVhc3QgMjQgaG91cnMgaW4gYWR2YW5jZS4nIDogbnVsbFxuICAgICAgICAgIH0pXG4gICAgICAgICAgLnJldHVybmluZygpO1xuICAgICAgICBcbiAgICAgICAgY29tbW9uU3BhY2VzLnB1c2goe1xuICAgICAgICAgIGlkOiBjb21tb25TcGFjZS5pZCxcbiAgICAgICAgICBuYW1lOiBjb21tb25TcGFjZS5uYW1lLFxuICAgICAgICAgIGJ1aWxkaW5nSWQ6IGNvbW1vblNwYWNlLmJ1aWxkaW5nSWQsXG4gICAgICAgICAgaXNSZXNlcnZhYmxlOiBjb21tb25TcGFjZS5pc1Jlc2VydmFibGVcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfVxuICAgIFxuICAgIGNvbnNvbGUubG9nKGDwn5OKIENyZWF0ZWQgJHtjb21tb25TcGFjZXMubGVuZ3RofSBjb21tb24gc3BhY2VzYCk7XG4gICAgcmV0dXJuIGNvbW1vblNwYWNlcztcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKCfinYwgRmFpbGVkIHRvIGNyZWF0ZSBjb21tb24gc3BhY2VzOicsIGVycm9yKTtcbiAgICB0aHJvdyBlcnJvcjtcbiAgfVxufVxuXG4vKipcbiAqIENyZWF0ZSB1c2VycyB3aXRoIHJvbGUtYmFzZWQgbG9naWMgYW5kIHByb3BlciBvcmdhbml6YXRpb24vYnVpbGRpbmcvcmVzaWRlbmNlIHJlbGF0aW9uc2hpcHNcbiAqIFJvbGUtYmFzZWQgYXNzaWdubWVudCBydWxlczpcbiAqIC0gUmVzaWRlbnRzL1RlbmFudHM6IGFzc2lnbiAxKyByZXNpZGVuY2VzLCB0aGVuIGFzc2lnbiB1c2VyIHRvIGJ1aWxkaW5ncyBvZiB0aG9zZSByZXNpZGVuY2VzXG4gKiAtIE1hbmFnZXJzOiBhc3NpZ24gMCsgcmVzaWRlbmNlcywgYXNzaWduIHVzZXIgdG8gYnVpbGRpbmcncyByZXNpZGVuY2VzLCBjYW4gYXNzaWduIDArIG90aGVyIGJ1aWxkaW5nc1xuICovXG5hc3luYyBmdW5jdGlvbiBzZWVkVXNlcnMoXG4gIG9yZ2FuaXphdGlvblR5cGU6ICdkZW1vJyB8ICdwcm9kdWN0aW9uJyxcbiAgb3JnYW5pemF0aW9uSWQ6IHN0cmluZyxcbiAgYnVpbGRpbmdzOiBDcmVhdGVkQnVpbGRpbmdbXSxcbiAgcmVzaWRlbmNlczogQ3JlYXRlZFJlc2lkZW5jZVtdXG4pOiBQcm9taXNlPENyZWF0ZWRVc2VyW10+IHtcbiAgdHJ5IHtcbiAgICBjb25zb2xlLmxvZygn8J+RpSBDcmVhdGluZyB1c2VycyB3aXRoIHJvbGUtYmFzZWQgYXNzaWdubWVudHMuLi4nKTtcbiAgICBcbiAgICBjb25zdCB1c2VyczogQ3JlYXRlZFVzZXJbXSA9IFtdO1xuICAgIGNvbnN0IGhhc2hlZFBhc3N3b3JkID0gYXdhaXQgYmNyeXB0Lmhhc2goJ2RlbW8xMjM0NTYnLCAxMCk7XG4gICAgXG4gICAgLy8gQ3JlYXRlIG1hbmFnZXJzICgxLTIgcGVyIGJ1aWxkaW5nKSB3aXRoIHJlc2lkZW5jZSBhbmQgYnVpbGRpbmcgYXNzaWdubWVudHNcbiAgICBjb25zb2xlLmxvZygnICAgQ3JlYXRpbmcgbWFuYWdlcnMuLi4nKTtcbiAgICBmb3IgKGNvbnN0IGJ1aWxkaW5nIG9mIGJ1aWxkaW5ncykge1xuICAgICAgY29uc3QgbWFuYWdlckNvdW50ID0gZmFrZXIubnVtYmVyLmludCh7IG1pbjogMSwgbWF4OiAyIH0pO1xuICAgICAgY29uc29sZS5sb2coYCAgIENyZWF0aW5nICR7bWFuYWdlckNvdW50fSBtYW5hZ2VycyBmb3IgJHtidWlsZGluZy5uYW1lfWApO1xuICAgICAgXG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IG1hbmFnZXJDb3VudDsgaSsrKSB7XG4gICAgICAgIGNvbnN0IGZpcnN0TmFtZSA9IGZha2VyLnBlcnNvbi5maXJzdE5hbWUoKTtcbiAgICAgICAgY29uc3QgbGFzdE5hbWUgPSBmYWtlci5wZXJzb24ubGFzdE5hbWUoKTtcbiAgICAgICAgY29uc3Qgcm9sZSA9IG9yZ2FuaXphdGlvblR5cGUgPT09ICdkZW1vJyA/ICdkZW1vX21hbmFnZXInIDogJ21hbmFnZXInO1xuICAgICAgICBcbiAgICAgICAgY29uc3QgW3VzZXJdID0gYXdhaXQgZGJcbiAgICAgICAgICAuaW5zZXJ0KHNjaGVtYS51c2VycylcbiAgICAgICAgICAudmFsdWVzKHtcbiAgICAgICAgICAgIHVzZXJuYW1lOiBgJHtmaXJzdE5hbWUudG9Mb3dlckNhc2UoKX0uJHtsYXN0TmFtZS50b0xvd2VyQ2FzZSgpfSR7ZmFrZXIubnVtYmVyLmludCh7IG1pbjogMTAsIG1heDogOTkgfSl9YCxcbiAgICAgICAgICAgIGVtYWlsOiBmYWtlci5pbnRlcm5ldC5lbWFpbCh7IGZpcnN0TmFtZSwgbGFzdE5hbWUgfSkudG9Mb3dlckNhc2UoKSxcbiAgICAgICAgICAgIHBhc3N3b3JkOiBoYXNoZWRQYXNzd29yZCxcbiAgICAgICAgICAgIGZpcnN0TmFtZSxcbiAgICAgICAgICAgIGxhc3ROYW1lLFxuICAgICAgICAgICAgcGhvbmU6IGdlbmVyYXRlUXVlYmVjUGhvbmUoKSxcbiAgICAgICAgICAgIGxhbmd1YWdlOiBNYXRoLnJhbmRvbSgpID4gMC4zID8gJ2ZyJyA6ICdlbicsIC8vIDcwJSBGcmVuY2gsIDMwJSBFbmdsaXNoIGZvciBRdWViZWNcbiAgICAgICAgICAgIHJvbGU6IHJvbGUgYXMgYW55LFxuICAgICAgICAgICAgaXNBY3RpdmU6IHRydWVcbiAgICAgICAgICB9KVxuICAgICAgICAgIC5yZXR1cm5pbmcoKTtcbiAgICAgICAgXG4gICAgICAgIC8vIENyZWF0ZSB1c2VyLW9yZ2FuaXphdGlvbiByZWxhdGlvbnNoaXAgLSBjcml0aWNhbCBmb3IgbWFuYWdlciBidWlsZGluZyBhY2Nlc3NcbiAgICAgICAgYXdhaXQgZGJcbiAgICAgICAgICAuaW5zZXJ0KHNjaGVtYS51c2VyT3JnYW5pemF0aW9ucylcbiAgICAgICAgICAudmFsdWVzKHtcbiAgICAgICAgICAgIHVzZXJJZDogdXNlci5pZCxcbiAgICAgICAgICAgIG9yZ2FuaXphdGlvbklkOiBvcmdhbml6YXRpb25JZCxcbiAgICAgICAgICAgIG9yZ2FuaXphdGlvblJvbGU6IHJvbGUgYXMgYW55LFxuICAgICAgICAgICAgaXNBY3RpdmU6IHRydWUsXG4gICAgICAgICAgICBjYW5BY2Nlc3NBbGxPcmdhbml6YXRpb25zOiBmYWxzZVxuICAgICAgICAgIH0pO1xuICAgICAgICBcbiAgICAgICAgLy8gRm9yIG1hbmFnZXJzOiBhc3NpZ24gMCsgcmVzaWRlbmNlcyAoNDAlIGNoYW5jZSBvZiBoYXZpbmcgcmVzaWRlbmNlcylcbiAgICAgICAgY29uc3QgYnVpbGRpbmdSZXNpZGVuY2VzID0gcmVzaWRlbmNlcy5maWx0ZXIociA9PiByLmJ1aWxkaW5nSWQgPT09IGJ1aWxkaW5nLmlkKTtcbiAgICAgICAgY29uc3Qgc2hvdWxkSGF2ZVJlc2lkZW5jZXMgPSBNYXRoLnJhbmRvbSgpIDwgMC40O1xuICAgICAgICBsZXQgYXNzaWduZWRSZXNpZGVuY2VzOiBDcmVhdGVkUmVzaWRlbmNlW10gPSBbXTtcbiAgICAgICAgXG4gICAgICAgIGlmIChzaG91bGRIYXZlUmVzaWRlbmNlcyAmJiBidWlsZGluZ1Jlc2lkZW5jZXMubGVuZ3RoID4gMCkge1xuICAgICAgICAgIGNvbnN0IHJlc2lkZW5jZUNvdW50ID0gZmFrZXIubnVtYmVyLmludCh7IG1pbjogMSwgbWF4OiBNYXRoLm1pbigzLCBidWlsZGluZ1Jlc2lkZW5jZXMubGVuZ3RoKSB9KTtcbiAgICAgICAgICBhc3NpZ25lZFJlc2lkZW5jZXMgPSBmYWtlci5oZWxwZXJzLmFycmF5RWxlbWVudHMoYnVpbGRpbmdSZXNpZGVuY2VzLCByZXNpZGVuY2VDb3VudCk7XG4gICAgICAgICAgXG4gICAgICAgICAgZm9yIChjb25zdCByZXNpZGVuY2Ugb2YgYXNzaWduZWRSZXNpZGVuY2VzKSB7XG4gICAgICAgICAgICBhd2FpdCBkYlxuICAgICAgICAgICAgICAuaW5zZXJ0KHNjaGVtYS51c2VyUmVzaWRlbmNlcylcbiAgICAgICAgICAgICAgLnZhbHVlcyh7XG4gICAgICAgICAgICAgICAgdXNlcklkOiB1c2VyLmlkLFxuICAgICAgICAgICAgICAgIHJlc2lkZW5jZUlkOiByZXNpZGVuY2UuaWQsXG4gICAgICAgICAgICAgICAgcmVsYXRpb25zaGlwVHlwZTogJ293bmVyJywgLy8gTWFuYWdlcnMgYXJlIHR5cGljYWxseSBvd25lcnNcbiAgICAgICAgICAgICAgICBzdGFydERhdGU6IG5ldyBEYXRlKERhdGUubm93KCkgLSBmYWtlci5udW1iZXIuaW50KHsgbWluOiAzMCwgbWF4OiAzNjUgKiAyIH0pICogMjQgKiA2MCAqIDYwICogMTAwMCksXG4gICAgICAgICAgICAgICAgaXNBY3RpdmU6IHRydWVcbiAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICAvLyBNYW5hZ2VycyBjYW4gYmUgYXNzaWduZWQgdG8gYWRkaXRpb25hbCBidWlsZGluZ3MgKDMwJSBjaGFuY2UpXG4gICAgICAgIGNvbnN0IHNob3VsZEhhdmVBZGRpdGlvbmFsQnVpbGRpbmdzID0gTWF0aC5yYW5kb20oKSA8IDAuMztcbiAgICAgICAgY29uc3Qgb3RoZXJCdWlsZGluZ3MgPSBidWlsZGluZ3MuZmlsdGVyKGIgPT4gYi5pZCAhPT0gYnVpbGRpbmcuaWQpO1xuICAgICAgICBcbiAgICAgICAgaWYgKHNob3VsZEhhdmVBZGRpdGlvbmFsQnVpbGRpbmdzICYmIG90aGVyQnVpbGRpbmdzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICBjb25zdCBhZGRpdGlvbmFsQnVpbGRpbmdDb3VudCA9IGZha2VyLm51bWJlci5pbnQoeyBtaW46IDEsIG1heDogTWF0aC5taW4oMiwgb3RoZXJCdWlsZGluZ3MubGVuZ3RoKSB9KTtcbiAgICAgICAgICBjb25zdCBhZGRpdGlvbmFsQnVpbGRpbmdzID0gZmFrZXIuaGVscGVycy5hcnJheUVsZW1lbnRzKG90aGVyQnVpbGRpbmdzLCBhZGRpdGlvbmFsQnVpbGRpbmdDb3VudCk7XG4gICAgICAgICAgXG4gICAgICAgICAgY29uc29sZS5sb2coYCAgICAgTWFuYWdlciAke3VzZXIuZW1haWx9IGFzc2lnbmVkIHRvICR7YWRkaXRpb25hbEJ1aWxkaW5nQ291bnQgKyAxfSBidWlsZGluZ3NgKTtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgdXNlcnMucHVzaCh7XG4gICAgICAgICAgaWQ6IHVzZXIuaWQsXG4gICAgICAgICAgdXNlcm5hbWU6IHVzZXIudXNlcm5hbWUsXG4gICAgICAgICAgZW1haWw6IHVzZXIuZW1haWwsXG4gICAgICAgICAgcm9sZTogdXNlci5yb2xlLFxuICAgICAgICAgIGJ1aWxkaW5nSWQ6IGJ1aWxkaW5nLmlkLFxuICAgICAgICAgIHJlc2lkZW5jZUlkOiBhc3NpZ25lZFJlc2lkZW5jZXMubGVuZ3RoID4gMCA/IGFzc2lnbmVkUmVzaWRlbmNlc1swXS5pZCA6IHVuZGVmaW5lZFxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9XG4gICAgXG4gICAgLy8gQ3JlYXRlIHJlc2lkZW50cyBhbmQgdGVuYW50cyB3aXRoIHByb3BlciByZXNpZGVuY2UtZmlyc3QgYXNzaWdubWVudHNcbiAgICBjb25zb2xlLmxvZygnICAgQ3JlYXRpbmcgcmVzaWRlbnRzIGFuZCB0ZW5hbnRzLi4uJyk7XG4gICAgXG4gICAgLy8gQ2FsY3VsYXRlIGhvdyBtYW55IHJlc2lkZW50cy90ZW5hbnRzIHdlIG5lZWQgKGFpbSBmb3IgfjgwJSByZXNpZGVuY2Ugb2NjdXBhbmN5KVxuICAgIGNvbnN0IHRhcmdldFJlc2lkZW50Q291bnQgPSBNYXRoLmZsb29yKHJlc2lkZW5jZXMubGVuZ3RoICogMC44KTtcbiAgICBsZXQgY3JlYXRlZFJlc2lkZW50cyA9IDA7XG4gICAgXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0YXJnZXRSZXNpZGVudENvdW50OyBpKyspIHtcbiAgICAgIGNvbnN0IGZpcnN0TmFtZSA9IGZha2VyLnBlcnNvbi5maXJzdE5hbWUoKTtcbiAgICAgIGNvbnN0IGxhc3ROYW1lID0gZmFrZXIucGVyc29uLmxhc3ROYW1lKCk7XG4gICAgICBcbiAgICAgIC8vIDYwJSByZXNpZGVudHMsIDQwJSB0ZW5hbnRzXG4gICAgICBjb25zdCBpc1Jlc2lkZW50ID0gTWF0aC5yYW5kb20oKSA8IDAuNjtcbiAgICAgIGNvbnN0IGJhc2VSb2xlID0gaXNSZXNpZGVudCA/ICdyZXNpZGVudCcgOiAndGVuYW50JztcbiAgICAgIGNvbnN0IHJvbGUgPSBvcmdhbml6YXRpb25UeXBlID09PSAnZGVtbycgPyBgZGVtb18ke2Jhc2VSb2xlfWAgOiBiYXNlUm9sZTtcbiAgICAgIFxuICAgICAgY29uc3QgW3VzZXJdID0gYXdhaXQgZGJcbiAgICAgICAgLmluc2VydChzY2hlbWEudXNlcnMpXG4gICAgICAgIC52YWx1ZXMoe1xuICAgICAgICAgIHVzZXJuYW1lOiBgJHtmaXJzdE5hbWUudG9Mb3dlckNhc2UoKX0uJHtsYXN0TmFtZS50b0xvd2VyQ2FzZSgpfSR7ZmFrZXIubnVtYmVyLmludCh7IG1pbjogMTAsIG1heDogOTkgfSl9YCxcbiAgICAgICAgICBlbWFpbDogZmFrZXIuaW50ZXJuZXQuZW1haWwoeyBmaXJzdE5hbWUsIGxhc3ROYW1lIH0pLnRvTG93ZXJDYXNlKCksXG4gICAgICAgICAgcGFzc3dvcmQ6IGhhc2hlZFBhc3N3b3JkLFxuICAgICAgICAgIGZpcnN0TmFtZSxcbiAgICAgICAgICBsYXN0TmFtZSxcbiAgICAgICAgICBwaG9uZTogZ2VuZXJhdGVRdWViZWNQaG9uZSgpLFxuICAgICAgICAgIGxhbmd1YWdlOiBNYXRoLnJhbmRvbSgpID4gMC4zID8gJ2ZyJyA6ICdlbicsIC8vIDcwJSBGcmVuY2gsIDMwJSBFbmdsaXNoIGZvciBRdWViZWNcbiAgICAgICAgICByb2xlOiByb2xlIGFzIGFueSxcbiAgICAgICAgICBpc0FjdGl2ZTogdHJ1ZVxuICAgICAgICB9KVxuICAgICAgICAucmV0dXJuaW5nKCk7XG4gICAgICBcbiAgICAgIC8vIENyZWF0ZSB1c2VyLW9yZ2FuaXphdGlvbiByZWxhdGlvbnNoaXBcbiAgICAgIGF3YWl0IGRiXG4gICAgICAgIC5pbnNlcnQoc2NoZW1hLnVzZXJPcmdhbml6YXRpb25zKVxuICAgICAgICAudmFsdWVzKHtcbiAgICAgICAgICB1c2VySWQ6IHVzZXIuaWQsXG4gICAgICAgICAgb3JnYW5pemF0aW9uSWQ6IG9yZ2FuaXphdGlvbklkLFxuICAgICAgICAgIG9yZ2FuaXphdGlvblJvbGU6IHJvbGUgYXMgYW55LFxuICAgICAgICAgIGlzQWN0aXZlOiB0cnVlLFxuICAgICAgICAgIGNhbkFjY2Vzc0FsbE9yZ2FuaXphdGlvbnM6IGZhbHNlXG4gICAgICAgIH0pO1xuICAgICAgXG4gICAgICAvLyBGb3IgcmVzaWRlbnRzL3RlbmFudHM6IGFzc2lnbiAxKyByZXNpZGVuY2VzIChwcmltYXJ5IHJlc2lkZW5jZSArIHBvc3NpYmxlIGFkZGl0aW9uYWwgb25lcylcbiAgICAgIGNvbnN0IHByaW1hcnlSZXNpZGVuY2VDb3VudCA9IGZha2VyLm51bWJlci5pbnQoeyBtaW46IDEsIG1heDogMiB9KTtcbiAgICAgIGNvbnN0IGF2YWlsYWJsZVJlc2lkZW5jZXMgPSByZXNpZGVuY2VzLmZpbHRlcihyID0+IFxuICAgICAgICAhdXNlcnMuc29tZSh1ID0+IHUucmVzaWRlbmNlSWQgPT09IHIuaWQpIC8vIEF2b2lkIGRvdWJsZS1hc3NpZ25tZW50IGZvciBzaW1wbGljaXR5XG4gICAgICApO1xuICAgICAgXG4gICAgICBpZiAoYXZhaWxhYmxlUmVzaWRlbmNlcy5sZW5ndGggPT09IDApIGJyZWFrOyAvLyBObyBtb3JlIHJlc2lkZW5jZXMgYXZhaWxhYmxlXG4gICAgICBcbiAgICAgIGNvbnN0IGFzc2lnbmVkUmVzaWRlbmNlcyA9IGZha2VyLmhlbHBlcnMuYXJyYXlFbGVtZW50cyhcbiAgICAgICAgYXZhaWxhYmxlUmVzaWRlbmNlcywgXG4gICAgICAgIE1hdGgubWluKHByaW1hcnlSZXNpZGVuY2VDb3VudCwgYXZhaWxhYmxlUmVzaWRlbmNlcy5sZW5ndGgpXG4gICAgICApO1xuICAgICAgXG4gICAgICBsZXQgcHJpbWFyeUJ1aWxkaW5nSWQgPSAnJztcbiAgICAgIFxuICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCBhc3NpZ25lZFJlc2lkZW5jZXMubGVuZ3RoOyBqKyspIHtcbiAgICAgICAgY29uc3QgcmVzaWRlbmNlID0gYXNzaWduZWRSZXNpZGVuY2VzW2pdO1xuICAgICAgICBjb25zdCByZWxhdGlvbnNoaXBUeXBlcyA9IFsnb3duZXInLCAndGVuYW50JywgJ29jY3VwYW50J107XG4gICAgICAgIGNvbnN0IHJlbGF0aW9uc2hpcFR5cGUgPSBqID09PSAwIFxuICAgICAgICAgID8gKGlzUmVzaWRlbnQgPyAnb3duZXInIDogJ3RlbmFudCcpIC8vIFByaW1hcnkgcmVzaWRlbmNlIG1hdGNoZXMgcm9sZVxuICAgICAgICAgIDogZmFrZXIuaGVscGVycy5hcnJheUVsZW1lbnQoWyd0ZW5hbnQnLCAnb2NjdXBhbnQnXSk7IC8vIFNlY29uZGFyeSByZXNpZGVuY2VzXG4gICAgICAgIFxuICAgICAgICBhd2FpdCBkYlxuICAgICAgICAgIC5pbnNlcnQoc2NoZW1hLnVzZXJSZXNpZGVuY2VzKVxuICAgICAgICAgIC52YWx1ZXMoe1xuICAgICAgICAgICAgdXNlcklkOiB1c2VyLmlkLFxuICAgICAgICAgICAgcmVzaWRlbmNlSWQ6IHJlc2lkZW5jZS5pZCxcbiAgICAgICAgICAgIHJlbGF0aW9uc2hpcFR5cGU6IHJlbGF0aW9uc2hpcFR5cGUsXG4gICAgICAgICAgICBzdGFydERhdGU6IG5ldyBEYXRlKERhdGUubm93KCkgLSBmYWtlci5udW1iZXIuaW50KHsgbWluOiAzMCwgbWF4OiAzNjUgKiAzIH0pICogMjQgKiA2MCAqIDYwICogMTAwMCksXG4gICAgICAgICAgICBpc0FjdGl2ZTogdHJ1ZVxuICAgICAgICAgIH0pO1xuICAgICAgICBcbiAgICAgICAgaWYgKGogPT09IDApIHtcbiAgICAgICAgICBwcmltYXJ5QnVpbGRpbmdJZCA9IHJlc2lkZW5jZS5idWlsZGluZ0lkO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBcbiAgICAgIHVzZXJzLnB1c2goe1xuICAgICAgICBpZDogdXNlci5pZCxcbiAgICAgICAgdXNlcm5hbWU6IHVzZXIudXNlcm5hbWUsXG4gICAgICAgIGVtYWlsOiB1c2VyLmVtYWlsLFxuICAgICAgICByb2xlOiB1c2VyLnJvbGUsXG4gICAgICAgIGJ1aWxkaW5nSWQ6IHByaW1hcnlCdWlsZGluZ0lkLFxuICAgICAgICByZXNpZGVuY2VJZDogYXNzaWduZWRSZXNpZGVuY2VzWzBdLmlkXG4gICAgICB9KTtcbiAgICAgIFxuICAgICAgY3JlYXRlZFJlc2lkZW50cysrO1xuICAgICAgXG4gICAgICBpZiAoYXNzaWduZWRSZXNpZGVuY2VzLmxlbmd0aCA+IDEpIHtcbiAgICAgICAgY29uc29sZS5sb2coYCAgICAgJHtyb2xlfSAke3VzZXIuZW1haWx9IGFzc2lnbmVkIHRvICR7YXNzaWduZWRSZXNpZGVuY2VzLmxlbmd0aH0gcmVzaWRlbmNlc2ApO1xuICAgICAgfVxuICAgIH1cbiAgICBcbiAgICBjb25zb2xlLmxvZyhg8J+TiiBDcmVhdGVkICR7dXNlcnMubGVuZ3RofSB1c2VyczpgKTtcbiAgICBjb25zb2xlLmxvZyhgICAgLSAke3VzZXJzLmZpbHRlcih1ID0+IHUucm9sZS5pbmNsdWRlcygnbWFuYWdlcicpKS5sZW5ndGh9IG1hbmFnZXJzYCk7XG4gICAgY29uc29sZS5sb2coYCAgIC0gJHt1c2Vycy5maWx0ZXIodSA9PiB1LnJvbGUuaW5jbHVkZXMoJ3Jlc2lkZW50JykpLmxlbmd0aH0gcmVzaWRlbnRzYCk7XG4gICAgY29uc29sZS5sb2coYCAgIC0gJHt1c2Vycy5maWx0ZXIodSA9PiB1LnJvbGUuaW5jbHVkZXMoJ3RlbmFudCcpKS5sZW5ndGh9IHRlbmFudHNgKTtcbiAgICBcbiAgICByZXR1cm4gdXNlcnM7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcign4p2MIEZhaWxlZCB0byBjcmVhdGUgdXNlcnM6JywgZXJyb3IpO1xuICAgIHRocm93IGVycm9yO1xuICB9XG59XG5cbi8qKlxuICogQ3JlYXRlIGJvb2tpbmdzIGZvciByZXNlcnZhYmxlIGNvbW1vbiBzcGFjZXNcbiAqL1xuYXN5bmMgZnVuY3Rpb24gc2VlZEJvb2tpbmdzKFxuICBjb21tb25TcGFjZXM6IENyZWF0ZWRDb21tb25TcGFjZVtdLFxuICB1c2VyczogQ3JlYXRlZFVzZXJbXVxuKTogUHJvbWlzZTx2b2lkPiB7XG4gIHRyeSB7XG4gICAgY29uc29sZS5sb2coJ/Cfk4UgQ3JlYXRpbmcgYm9va2luZ3MuLi4nKTtcbiAgICBcbiAgICBjb25zdCByZXNlcnZhYmxlU3BhY2VzID0gY29tbW9uU3BhY2VzLmZpbHRlcihzcGFjZSA9PiBzcGFjZS5pc1Jlc2VydmFibGUpO1xuICAgIGxldCB0b3RhbEJvb2tpbmdzID0gMDtcbiAgICBcbiAgICBmb3IgKGNvbnN0IHNwYWNlIG9mIHJlc2VydmFibGVTcGFjZXMpIHtcbiAgICAgIGNvbnN0IHNwYWNlVXNlcnMgPSB1c2Vycy5maWx0ZXIodXNlciA9PiB1c2VyLmJ1aWxkaW5nSWQgPT09IHNwYWNlLmJ1aWxkaW5nSWQpO1xuICAgICAgXG4gICAgICBpZiAoc3BhY2VVc2Vycy5sZW5ndGggPT09IDApIGNvbnRpbnVlO1xuICAgICAgXG4gICAgICBjb25zb2xlLmxvZyhgICAgQ3JlYXRpbmcgJHtCT09LSU5HU19QRVJfUkVTRVJWQUJMRV9TUEFDRX0gYm9va2luZ3MgZm9yICR7c3BhY2UubmFtZX1gKTtcbiAgICAgIFxuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBCT09LSU5HU19QRVJfUkVTRVJWQUJMRV9TUEFDRTsgaSsrKSB7XG4gICAgICAgIGNvbnN0IHVzZXIgPSBzcGFjZVVzZXJzW01hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIHNwYWNlVXNlcnMubGVuZ3RoKV07XG4gICAgICAgIGNvbnN0IHN0YXJ0RGF0ZSA9IGZha2VyLmRhdGUuYmV0d2Vlbih7XG4gICAgICAgICAgZnJvbTogbmV3IERhdGUobmV3IERhdGUoKS5nZXRGdWxsWWVhcigpLCAwLCAxKSxcbiAgICAgICAgICB0bzogbmV3IERhdGUobmV3IERhdGUoKS5nZXRGdWxsWWVhcigpLCAxMSwgMzEpXG4gICAgICAgIH0pO1xuICAgICAgICBcbiAgICAgICAgY29uc3Qgc3RhcnRUaW1lID0gbmV3IERhdGUoc3RhcnREYXRlKTtcbiAgICAgICAgc3RhcnRUaW1lLnNldEhvdXJzKGZha2VyLm51bWJlci5pbnQoeyBtaW46IDgsIG1heDogMjAgfSksIDAsIDAsIDApO1xuICAgICAgICBcbiAgICAgICAgY29uc3QgZW5kVGltZSA9IG5ldyBEYXRlKHN0YXJ0VGltZSk7XG4gICAgICAgIGVuZFRpbWUuc2V0SG91cnMoc3RhcnRUaW1lLmdldEhvdXJzKCkgKyBmYWtlci5udW1iZXIuaW50KHsgbWluOiAxLCBtYXg6IDQgfSkpO1xuICAgICAgICBcbiAgICAgICAgYXdhaXQgZGJcbiAgICAgICAgICAuaW5zZXJ0KHNjaGVtYS5ib29raW5ncylcbiAgICAgICAgICAudmFsdWVzKHtcbiAgICAgICAgICAgIGNvbW1vblNwYWNlSWQ6IHNwYWNlLmlkLFxuICAgICAgICAgICAgdXNlcklkOiB1c2VyLmlkLFxuICAgICAgICAgICAgc3RhcnRUaW1lLFxuICAgICAgICAgICAgZW5kVGltZSxcbiAgICAgICAgICAgIHN0YXR1czogTWF0aC5yYW5kb20oKSA+IDAuMSA/ICdjb25maXJtZWQnIDogJ2NhbmNlbGxlZCdcbiAgICAgICAgICB9KTtcbiAgICAgICAgXG4gICAgICAgIHRvdGFsQm9va2luZ3MrKztcbiAgICAgIH1cbiAgICB9XG4gICAgXG4gICAgY29uc29sZS5sb2coYPCfk4ogQ3JlYXRlZCAke3RvdGFsQm9va2luZ3N9IGJvb2tpbmdzIGFjcm9zcyAke3Jlc2VydmFibGVTcGFjZXMubGVuZ3RofSByZXNlcnZhYmxlIHNwYWNlc2ApO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoJ+KdjCBGYWlsZWQgdG8gY3JlYXRlIGJvb2tpbmdzOicsIGVycm9yKTtcbiAgICB0aHJvdyBlcnJvcjtcbiAgfVxufVxuXG4vKipcbiAqIENyZWF0ZSBtYWludGVuYW5jZSBkZW1hbmRzIChyZWZlcnJlZCB0byBhcyBcImRlbWFuZHNcIiBpbiBzY2hlbWEpXG4gKi9cbmFzeW5jIGZ1bmN0aW9uIHNlZWRNYWludGVuYW5jZVJlcXVlc3RzKHVzZXJzOiBDcmVhdGVkVXNlcltdKTogUHJvbWlzZTx2b2lkPiB7XG4gIHRyeSB7XG4gICAgY29uc29sZS5sb2coJ/CflKcgQ3JlYXRpbmcgbWFpbnRlbmFuY2UgZGVtYW5kcyAoMi0zIGRpZmZlcmVudCBjYXRlZ29yaWVzIHBlciByZXNpZGVudCkuLi4nKTtcbiAgICBcbiAgICBjb25zdCByZXNpZGVudHMgPSB1c2Vycy5maWx0ZXIodXNlciA9PiB1c2VyLnJvbGUuaW5jbHVkZXMoJ3Jlc2lkZW50JykgJiYgdXNlci5yZXNpZGVuY2VJZCk7XG4gICAgbGV0IHRvdGFsRGVtYW5kcyA9IDA7XG4gICAgXG4gICAgZm9yIChjb25zdCByZXNpZGVudCBvZiByZXNpZGVudHMpIHtcbiAgICAgIC8vIENyZWF0ZSAyLTMgZGVtYW5kcyBwZXIgcmVzaWRlbnQgd2l0aCBESUZGRVJFTlQgY2F0ZWdvcmllc1xuICAgICAgY29uc3QgZGVtYW5kc1RvQ3JlYXRlID0gZmFrZXIubnVtYmVyLmludCh7IG1pbjogMiwgbWF4OiAzIH0pO1xuICAgICAgXG4gICAgICAvLyBFbnN1cmUgZGlmZmVyZW50IGNhdGVnb3JpZXMgYnkgc2h1ZmZsaW5nIGFuZCB0YWtpbmcgZmlyc3QgTlxuICAgICAgY29uc3QgYXZhaWxhYmxlQ2F0ZWdvcmllcyA9IFsuLi5NQUlOVEVOQU5DRV9DQVRFR09SSUVTXTtcbiAgICAgIGNvbnN0IHNlbGVjdGVkQ2F0ZWdvcmllcyA9IGZha2VyLmhlbHBlcnMuYXJyYXlFbGVtZW50cyhhdmFpbGFibGVDYXRlZ29yaWVzLCBkZW1hbmRzVG9DcmVhdGUpO1xuICAgICAgXG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGRlbWFuZHNUb0NyZWF0ZTsgaSsrKSB7XG4gICAgICAgIGNvbnN0IGNhdGVnb3J5ID0gc2VsZWN0ZWRDYXRlZ29yaWVzW2ldO1xuICAgICAgICBjb25zdCBwcmlvcml0eSA9IGZha2VyLmhlbHBlcnMuYXJyYXlFbGVtZW50KFsnbG93JywgJ21lZGl1bScsICdoaWdoJywgJ3VyZ2VudCddKTtcbiAgICAgICAgY29uc3QgZGVtYW5kVHlwZSA9IGZha2VyLmhlbHBlcnMuYXJyYXlFbGVtZW50KFsnbWFpbnRlbmFuY2UnLCAnY29tcGxhaW50JywgJ2luZm9ybWF0aW9uJ10pO1xuICAgICAgICBcbiAgICAgICAgLy8gQ3JlYXRlIGRldGFpbGVkIGRlc2NyaXB0aW9uIGJhc2VkIG9uIGNhdGVnb3J5XG4gICAgICAgIGxldCBkZXNjcmlwdGlvbiA9ICcnO1xuICAgICAgICBpZiAoY2F0ZWdvcnkgPT09ICdQbHVtYmluZycpIHtcbiAgICAgICAgICBkZXNjcmlwdGlvbiA9IGAke2Zha2VyLmhlbHBlcnMuYXJyYXlFbGVtZW50KFsnTGVha3kgZmF1Y2V0JywgJ0Nsb2dnZWQgZHJhaW4nLCAnTG93IHdhdGVyIHByZXNzdXJlJywgJ1J1bm5pbmcgdG9pbGV0J10pfSBpbiAke2Zha2VyLmhlbHBlcnMuYXJyYXlFbGVtZW50KFsna2l0Y2hlbicsICdiYXRocm9vbScsICdsYXVuZHJ5IHJvb20nXSl9LiAke2Zha2VyLmxvcmVtLnNlbnRlbmNlcygyKX1gO1xuICAgICAgICB9IGVsc2UgaWYgKGNhdGVnb3J5ID09PSAnRWxlY3RyaWNhbCcpIHtcbiAgICAgICAgICBkZXNjcmlwdGlvbiA9IGAke2Zha2VyLmhlbHBlcnMuYXJyYXlFbGVtZW50KFsnT3V0bGV0IG5vdCB3b3JraW5nJywgJ0xpZ2h0IGZpeHR1cmUgaXNzdWUnLCAnQ2lyY3VpdCBicmVha2VyIHRyaXBzJywgJ1N3aXRjaCBtYWxmdW5jdGlvbiddKX0gaW4gJHtmYWtlci5oZWxwZXJzLmFycmF5RWxlbWVudChbJ2JlZHJvb20nLCAnbGl2aW5nIHJvb20nLCAna2l0Y2hlbicsICdoYWxsd2F5J10pfS4gJHtmYWtlci5sb3JlbS5zZW50ZW5jZXMoMil9YDtcbiAgICAgICAgfSBlbHNlIGlmIChjYXRlZ29yeSA9PT0gJ0hWQUMnKSB7XG4gICAgICAgICAgZGVzY3JpcHRpb24gPSBgJHtmYWtlci5oZWxwZXJzLmFycmF5RWxlbWVudChbJ0hlYXRpbmcgbm90IHdvcmtpbmcnLCAnQWlyIGNvbmRpdGlvbmluZyBpc3N1ZScsICdWZW50aWxhdGlvbiBwcm9ibGVtJywgJ1RoZXJtb3N0YXQgbWFsZnVuY3Rpb24nXSl9LiBUZW1wZXJhdHVyZSBjb250cm9sIGlzc3Vlcy4gJHtmYWtlci5sb3JlbS5zZW50ZW5jZXMoMil9YDtcbiAgICAgICAgfSBlbHNlIGlmIChjYXRlZ29yeSA9PT0gJ1N0cnVjdHVyYWwnKSB7XG4gICAgICAgICAgZGVzY3JpcHRpb24gPSBgJHtmYWtlci5oZWxwZXJzLmFycmF5RWxlbWVudChbJ0NyYWNrIGluIHdhbGwnLCAnRG9vciBub3QgY2xvc2luZyBwcm9wZXJseScsICdXaW5kb3cgc2VhbCBpc3N1ZScsICdGbG9vciBjcmVha2luZyddKX0uIFN0cnVjdHVyYWwgY29uY2VybiB0aGF0IG5lZWRzIGF0dGVudGlvbi4gJHtmYWtlci5sb3JlbS5zZW50ZW5jZXMoMil9YDtcbiAgICAgICAgfSBlbHNlIGlmIChjYXRlZ29yeSA9PT0gJ0FwcGxpYW5jZXMnKSB7XG4gICAgICAgICAgZGVzY3JpcHRpb24gPSBgJHtmYWtlci5oZWxwZXJzLmFycmF5RWxlbWVudChbJ1JlZnJpZ2VyYXRvcicsICdEaXNod2FzaGVyJywgJ1dhc2hlci9EcnllcicsICdTdG92ZS9PdmVuJ10pfSAke2Zha2VyLmhlbHBlcnMuYXJyYXlFbGVtZW50KFsnbm90IHdvcmtpbmcgcHJvcGVybHknLCAnbWFraW5nIHVudXN1YWwgbm9pc2UnLCAnbm90IGhlYXRpbmcvY29vbGluZycsICdsZWFraW5nJ10pfS4gJHtmYWtlci5sb3JlbS5zZW50ZW5jZXMoMil9YDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBkZXNjcmlwdGlvbiA9IGBHZW5lcmFsIG1haW50ZW5hbmNlIGlzc3VlOiAke2Zha2VyLmxvcmVtLnNlbnRlbmNlKCl9LiAke2Zha2VyLmxvcmVtLnNlbnRlbmNlcygyKX1gO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gSW5zZXJ0IHRoZSBkZW1hbmRcbiAgICAgICAgY29uc3QgW2RlbWFuZF0gPSBhd2FpdCBkYlxuICAgICAgICAgIC5pbnNlcnQoc2NoZW1hLmRlbWFuZHMpXG4gICAgICAgICAgLnZhbHVlcyh7XG4gICAgICAgICAgICBzdWJtaXR0ZXJJZDogcmVzaWRlbnQuaWQsXG4gICAgICAgICAgICB0eXBlOiBkZW1hbmRUeXBlIGFzIGFueSxcbiAgICAgICAgICAgIGRlc2NyaXB0aW9uLFxuICAgICAgICAgICAgYnVpbGRpbmdJZDogcmVzaWRlbnQuYnVpbGRpbmdJZCEsXG4gICAgICAgICAgICByZXNpZGVuY2VJZDogcmVzaWRlbnQucmVzaWRlbmNlSWQsXG4gICAgICAgICAgICBzdGF0dXM6IGZha2VyLmhlbHBlcnMuYXJyYXlFbGVtZW50KFsnc3VibWl0dGVkJywgJ3VuZGVyX3JldmlldycsICdpbl9wcm9ncmVzcycsICdjb21wbGV0ZWQnXSkgYXMgYW55XG4gICAgICAgICAgfSlcbiAgICAgICAgICAucmV0dXJuaW5nKCk7XG4gICAgICAgIFxuICAgICAgICAvLyBBZGQgYSBjb21tZW50IHRvIHRoZSBkZW1hbmRcbiAgICAgICAgY29uc3QgbWFuYWdlcnMgPSB1c2Vycy5maWx0ZXIodXNlciA9PiB1c2VyLnJvbGUuaW5jbHVkZXMoJ21hbmFnZXInKSAmJiB1c2VyLmJ1aWxkaW5nSWQgPT09IHJlc2lkZW50LmJ1aWxkaW5nSWQpO1xuICAgICAgICBjb25zdCByYW5kb21NYW5hZ2VyID0gbWFuYWdlcnMubGVuZ3RoID4gMCA/IG1hbmFnZXJzW01hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIG1hbmFnZXJzLmxlbmd0aCldIDogdXNlcnMuZmluZCh1ID0+IHUucm9sZS5pbmNsdWRlcygnbWFuYWdlcicpKTtcbiAgICAgICAgXG4gICAgICAgIGlmIChyYW5kb21NYW5hZ2VyKSB7XG4gICAgICAgICAgYXdhaXQgZGJcbiAgICAgICAgICAgIC5pbnNlcnQoc2NoZW1hLmRlbWFuZENvbW1lbnRzKVxuICAgICAgICAgICAgLnZhbHVlcyh7XG4gICAgICAgICAgICAgIGRlbWFuZElkOiBkZW1hbmQuaWQsXG4gICAgICAgICAgICAgIGNvbW1lbnRlcklkOiByYW5kb21NYW5hZ2VyLmlkLFxuICAgICAgICAgICAgICBjb21tZW50VGV4dDogYFRoYW5rIHlvdSBmb3IgcmVwb3J0aW5nIHRoaXMgJHtkZW1hbmRUeXBlfS4gV2UgaGF2ZSByZWNlaXZlZCB5b3VyIHJlcXVlc3QgYW5kIHdpbGwgYWRkcmVzcyBpdCBhY2NvcmRpbmdseS4gJHtmYWtlci5sb3JlbS5zZW50ZW5jZSgpfWAsXG4gICAgICAgICAgICAgIGNvbW1lbnRUeXBlOiAncmVzcG9uc2UnLFxuICAgICAgICAgICAgICBpc0ludGVybmFsOiBmYWxzZVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIHRvdGFsRGVtYW5kcysrO1xuICAgICAgfVxuICAgIH1cbiAgICBcbiAgICBjb25zb2xlLmxvZyhg8J+TiiBDcmVhdGVkICR7dG90YWxEZW1hbmRzfSBtYWludGVuYW5jZSBkZW1hbmRzIGZvciAke3Jlc2lkZW50cy5sZW5ndGh9IHJlc2lkZW50c2ApO1xuICAgIGNvbnNvbGUubG9nKGAgICBBdmVyYWdlOiAke01hdGgucm91bmQodG90YWxEZW1hbmRzIC8gcmVzaWRlbnRzLmxlbmd0aCl9IGRlbWFuZHMgcGVyIHJlc2lkZW50IChlYWNoIHdpdGggZGlmZmVyZW50IGNhdGVnb3JpZXMpYCk7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcign4p2MIEZhaWxlZCB0byBjcmVhdGUgbWFpbnRlbmFuY2UgZGVtYW5kczonLCBlcnJvcik7XG4gICAgdGhyb3cgZXJyb3I7XG4gIH1cbn1cblxuLyoqXG4gKiBDcmVhdGUgYmlsbHMgZm9yIGJ1aWxkaW5ncyAocHJldmlvdXMgeWVhciBkYXRhKVxuICovXG5hc3luYyBmdW5jdGlvbiBzZWVkQmlsbHMoYnVpbGRpbmdzOiBDcmVhdGVkQnVpbGRpbmdbXSwgdXNlcnM6IENyZWF0ZWRVc2VyW10pOiBQcm9taXNlPENyZWF0ZWRCaWxsW10+IHtcbiAgdHJ5IHtcbiAgICBjb25zb2xlLmxvZygn8J+SsCBDcmVhdGluZyBiaWxscyBmb3IgcHJldmlvdXMgeWVhci4uLicpO1xuICAgIFxuICAgIGNvbnN0IGN1cnJlbnRZZWFyID0gbmV3IERhdGUoKS5nZXRGdWxsWWVhcigpO1xuICAgIGNvbnN0IHByZXZpb3VzWWVhciA9IGN1cnJlbnRZZWFyIC0gMTtcbiAgICBsZXQgdG90YWxCaWxscyA9IDA7XG4gICAgY29uc3QgY3JlYXRlZEJpbGxzOiBDcmVhdGVkQmlsbFtdID0gW107XG4gICAgXG4gICAgLy8gR2V0IG1hbmFnZXJzIHRvIGFzc2lnbiBhcyBiaWxsIGNyZWF0b3JzXG4gICAgY29uc3QgbWFuYWdlcnMgPSB1c2Vycy5maWx0ZXIodXNlciA9PiB1c2VyLnJvbGUuaW5jbHVkZXMoJ21hbmFnZXInKSk7XG4gICAgXG4gICAgZm9yIChjb25zdCBidWlsZGluZyBvZiBidWlsZGluZ3MpIHtcbiAgICAgIGNvbnN0IGJ1aWxkaW5nTWFuYWdlcnMgPSBtYW5hZ2Vycy5maWx0ZXIobWFuYWdlciA9PiBtYW5hZ2VyLmJ1aWxkaW5nSWQgPT09IGJ1aWxkaW5nLmlkKTtcbiAgICAgIGNvbnN0IGJpbGxDcmVhdG9yID0gYnVpbGRpbmdNYW5hZ2Vycy5sZW5ndGggPiAwIFxuICAgICAgICA/IGJ1aWxkaW5nTWFuYWdlcnNbMF0gXG4gICAgICAgIDogbWFuYWdlcnNbMF07IC8vIEZhbGxiYWNrIHRvIGFueSBtYW5hZ2VyXG4gICAgICBcbiAgICAgIGlmICghYmlsbENyZWF0b3IpIHtcbiAgICAgICAgY29uc29sZS53YXJuKGAgICDimqDvuI8gTm8gbWFuYWdlciBmb3VuZCBmb3IgYnVpbGRpbmcgJHtidWlsZGluZy5uYW1lfSwgc2tpcHBpbmcgYmlsbHNgKTtcbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG4gICAgICBcbiAgICAgIGNvbnNvbGUubG9nKGAgICBDcmVhdGluZyBiaWxscyBmb3IgJHtidWlsZGluZy5uYW1lfSAoJHtwcmV2aW91c1llYXJ9KWApO1xuICAgICAgXG4gICAgICAvLyBDcmVhdGUgYmlsbHMgZm9yIGVhY2ggbW9udGggb2YgcHJldmlvdXMgeWVhciAtIDEtMiBiaWxscyBwZXIgY2F0ZWdvcnkgcGVyIG1vbnRoXG4gICAgICBmb3IgKGxldCBtb250aCA9IDE7IG1vbnRoIDw9IDEyOyBtb250aCsrKSB7XG4gICAgICAgIC8vIENyZWF0ZSAxLTIgYmlsbHMgcGVyIGNhdGVnb3J5IGZvciB0aGlzIG1vbnRoXG4gICAgICAgIGZvciAoY29uc3QgY2F0ZWdvcnkgb2YgQklMTF9DQVRFR09SSUVTKSB7XG4gICAgICAgICAgY29uc3QgYmlsbHNUb0NyZWF0ZSA9IGZha2VyLm51bWJlci5pbnQoeyBtaW46IDEsIG1heDogMiB9KTtcbiAgICAgICAgICBcbiAgICAgICAgICBmb3IgKGxldCBiaWxsSW5kZXggPSAwOyBiaWxsSW5kZXggPCBiaWxsc1RvQ3JlYXRlOyBiaWxsSW5kZXgrKykge1xuICAgICAgICAgICAgY29uc3QgYW1vdW50ID0gZmFrZXIubnVtYmVyLmZsb2F0KHsgbWluOiAxMDAsIG1heDogNTAwMCwgZnJhY3Rpb25EaWdpdHM6IDIgfSk7XG4gICAgICAgICAgICBjb25zdCBzdGFydERhdGUgPSBuZXcgRGF0ZShwcmV2aW91c1llYXIsIG1vbnRoIC0gMSwgZmFrZXIubnVtYmVyLmludCh7IG1pbjogMSwgbWF4OiAyOCB9KSk7XG4gICAgICAgICAgICBjb25zdCBiaWxsU3VmZml4ID0gYmlsbHNUb0NyZWF0ZSA+IDEgPyBgLSR7YmlsbEluZGV4ICsgMX1gIDogJyc7XG4gICAgICAgICAgICBjb25zdCBiaWxsTnVtYmVyID0gYCR7YnVpbGRpbmcuaWQuc2xpY2UoMCwgNCkudG9VcHBlckNhc2UoKX0tJHtwcmV2aW91c1llYXJ9LSR7bW9udGgudG9TdHJpbmcoKS5wYWRTdGFydCgyLCAnMCcpfS0ke2NhdGVnb3J5LnRvVXBwZXJDYXNlKCl9JHtiaWxsU3VmZml4fWA7XG4gICAgICAgICAgICBjb25zdCB0aXRsZSA9IGAke2NhdGVnb3J5LmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpICsgY2F0ZWdvcnkuc2xpY2UoMSl9ICR7YmlsbFN1ZmZpeCA/IGAoJHtiaWxsSW5kZXggKyAxfSlgIDogJyd9IC0gJHtmYWtlci5jb21wYW55Lm5hbWUoKX1gO1xuICAgICAgICAgICAgY29uc3QgdmVuZG9yID0gZmFrZXIuY29tcGFueS5uYW1lKCk7XG4gICAgICAgICAgICBjb25zdCBkZXNjcmlwdGlvbiA9IGBNb250aGx5ICR7Y2F0ZWdvcnl9IHNlcnZpY2UgZm9yICR7ZmFrZXIuZGF0ZS5tb250aCgpfSAke3ByZXZpb3VzWWVhcn0ke2JpbGxTdWZmaXggPyBgIC0gSW52b2ljZSAke2JpbGxJbmRleCArIDF9YCA6ICcnfWA7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGNvbnN0IFtiaWxsXSA9IGF3YWl0IGRiXG4gICAgICAgICAgICAgIC5pbnNlcnQoc2NoZW1hLmJpbGxzKVxuICAgICAgICAgICAgICAudmFsdWVzKHtcbiAgICAgICAgICAgICAgICBidWlsZGluZ0lkOiBidWlsZGluZy5pZCxcbiAgICAgICAgICAgICAgICBiaWxsTnVtYmVyLFxuICAgICAgICAgICAgICAgIHRpdGxlLFxuICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uLFxuICAgICAgICAgICAgICAgIGNhdGVnb3J5LFxuICAgICAgICAgICAgICAgIHZlbmRvcixcbiAgICAgICAgICAgICAgICBwYXltZW50VHlwZTogTWF0aC5yYW5kb20oKSA+IDAuNyA/ICdyZWN1cnJlbnQnIDogJ3VuaXF1ZScsXG4gICAgICAgICAgICAgICAgc2NoZWR1bGVQYXltZW50OiBNYXRoLnJhbmRvbSgpID4gMC43ID8gJ21vbnRobHknIDogbnVsbCxcbiAgICAgICAgICAgICAgICBjb3N0czogW2Ftb3VudC50b1N0cmluZygpXSxcbiAgICAgICAgICAgICAgICB0b3RhbEFtb3VudDogYW1vdW50LnRvU3RyaW5nKCksXG4gICAgICAgICAgICAgICAgc3RhcnREYXRlLFxuICAgICAgICAgICAgICAgIHN0YXR1czogWydwYWlkJywgJ292ZXJkdWUnLCAnc2VudCddW01hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIDMpXSBhcyBhbnksXG4gICAgICAgICAgICAgICAgY3JlYXRlZEJ5OiBiaWxsQ3JlYXRvci5pZCxcbiAgICAgICAgICAgICAgICBhdXRvR2VuZXJhdGVkOiBmYWxzZVxuICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAucmV0dXJuaW5nKCk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGNyZWF0ZWRCaWxscy5wdXNoKHtcbiAgICAgICAgICAgICAgaWQ6IGJpbGwuaWQsXG4gICAgICAgICAgICAgIGJpbGxOdW1iZXIsXG4gICAgICAgICAgICAgIHRpdGxlLFxuICAgICAgICAgICAgICBjYXRlZ29yeSxcbiAgICAgICAgICAgICAgdmVuZG9yLFxuICAgICAgICAgICAgICB0b3RhbEFtb3VudDogYW1vdW50LnRvU3RyaW5nKCksXG4gICAgICAgICAgICAgIGJ1aWxkaW5nSWQ6IGJ1aWxkaW5nLmlkLFxuICAgICAgICAgICAgICBkZXNjcmlwdGlvblxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHRvdGFsQmlsbHMrKztcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgXG4gICAgY29uc29sZS5sb2coYPCfk4ogQ3JlYXRlZCAke3RvdGFsQmlsbHN9IGJpbGxzIGFjcm9zcyAke2J1aWxkaW5ncy5sZW5ndGh9IGJ1aWxkaW5ncyBmb3IgJHtwcmV2aW91c1llYXJ9YCk7XG4gICAgY29uc29sZS5sb2coYCAgIEF2ZXJhZ2U6ICR7TWF0aC5yb3VuZCh0b3RhbEJpbGxzIC8gYnVpbGRpbmdzLmxlbmd0aCl9IGJpbGxzIHBlciBidWlsZGluZyAoMS0yIHBlciBjYXRlZ29yeSBwZXIgbW9udGgpYCk7XG4gICAgcmV0dXJuIGNyZWF0ZWRCaWxscztcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKCfinYwgRmFpbGVkIHRvIGNyZWF0ZSBiaWxsczonLCBlcnJvcik7XG4gICAgdGhyb3cgZXJyb3I7XG4gIH1cbn1cblxuLyoqXG4gKiBDcmVhdGUgZGVtbyBkaXNjbG9zdXJlIG5vdGljZSBmb3IgYWxsIGRvY3VtZW50c1xuICovXG5mdW5jdGlvbiBjcmVhdGVEZW1vRGlzY2xvc3VyZSgpOiBzdHJpbmcge1xuICByZXR1cm4gYCoqKiBERU1PIE5PVElDRSAtIEZPUiBERU1PTlNUUkFUSU9OIFBVUlBPU0VTIE9OTFkgKioqXG5cblRoaXMgZG9jdW1lbnQgY29udGFpbnMgZmljdGlvbmFsIGRhdGEgY3JlYXRlZCBmb3IgcHJvZHVjdCBkZW1vbnN0cmF0aW9uLlxuSW4gYSByZWFsIGVudmlyb25tZW50LCB0aGlzIHdvdWxkIGNvbnRhaW4gYWN0dWFsIHVwbG9hZGVkIGNvbnRlbnQgZnJvbSBwcm9wZXJ0eSBtYW5hZ2Vycy5cbkFsbCBpbmZvcm1hdGlvbiBzaG93biBpcyBnZW5lcmF0ZWQgYXV0b21hdGljYWxseSBmb3IgdGVzdGluZyBhbmQgZGVtbyBwdXJwb3Nlcy5cblxuVGhpcyBkZW1vIHNob3djYXNlcyB0aGUgZG9jdW1lbnQgbWFuYWdlbWVudCBjYXBhYmlsaXRpZXMgb2YgS292ZW8gR2VzdGlvbi5cblxuPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuXG5gO1xufVxuXG4vKipcbiAqIEVuc3VyZSBkaXJlY3RvcnkgZXhpc3RzLCBjcmVhdGUgaWYgbm90XG4gKi9cbmZ1bmN0aW9uIGVuc3VyZURpcmVjdG9yeUV4aXN0cyhkaXJQYXRoOiBzdHJpbmcpOiB2b2lkIHtcbiAgaWYgKCFmcy5leGlzdHNTeW5jKGRpclBhdGgpKSB7XG4gICAgZnMubWtkaXJTeW5jKGRpclBhdGgsIHsgcmVjdXJzaXZlOiB0cnVlIH0pO1xuICB9XG59XG5cbi8qKlxuICogV3JpdGUgZmlsZSB0byBkaXNrIGFuZCByZXR1cm4gZmlsZSBpbmZvXG4gKi9cbmZ1bmN0aW9uIHdyaXRlRG9jdW1lbnRGaWxlKGZpbGVQYXRoOiBzdHJpbmcsIGNvbnRlbnQ6IHN0cmluZyk6IHsgZmlsZVNpemU6IG51bWJlciB9IHtcbiAgY29uc3QgZnVsbFBhdGggPSBwYXRoLnJlc29sdmUoZmlsZVBhdGgpO1xuICBjb25zdCBkaXIgPSBwYXRoLmRpcm5hbWUoZnVsbFBhdGgpO1xuICBlbnN1cmVEaXJlY3RvcnlFeGlzdHMoZGlyKTtcbiAgZnMud3JpdGVGaWxlU3luYyhmdWxsUGF0aCwgY29udGVudCwgJ3V0ZjgnKTtcbiAgcmV0dXJuIHsgZmlsZVNpemU6IGNvbnRlbnQubGVuZ3RoIH07XG59XG5cbi8qKlxuICogQ3JlYXRlIGRvY3VtZW50cyBmb3IgYmlsbHMsIHJlc2lkZW5jZXMsIGFuZCBidWlsZGluZ3NcbiAqL1xuYXN5bmMgZnVuY3Rpb24gc2VlZERvY3VtZW50cyhcbiAgYmlsbHM6IENyZWF0ZWRCaWxsW10sXG4gIGJ1aWxkaW5nczogQ3JlYXRlZEJ1aWxkaW5nW10sXG4gIHJlc2lkZW5jZXM6IENyZWF0ZWRSZXNpZGVuY2VbXSxcbiAgdXNlcnM6IENyZWF0ZWRVc2VyW11cbik6IFByb21pc2U8dm9pZD4ge1xuICB0cnkge1xuICAgIGNvbnNvbGUubG9nKCfwn5OEIENyZWF0aW5nIGRlbW8gZG9jdW1lbnRzLi4uJyk7XG4gICAgXG4gICAgbGV0IHRvdGFsRG9jdW1lbnRzID0gMDtcbiAgICBjb25zdCBkZW1vRGlzY2xvc3VyZSA9IGNyZWF0ZURlbW9EaXNjbG9zdXJlKCk7XG4gICAgXG4gICAgLy8gQ3JlYXRlIEJpbGwgRG9jdW1lbnRzIChhdHRhY2hlZCB0byBiaWxscykgLSBDcmVhdGUgZm9yIEFMTCBiaWxscyBpbiBvcmdhbml6YXRpb25cbiAgICBjb25zb2xlLmxvZygnICAgQ3JlYXRpbmcgYmlsbCBkb2N1bWVudHMuLi4nKTtcbiAgICBcbiAgICAvLyBHZXQgQUxMIGJpbGxzIGZvciB0aGlzIG9yZ2FuaXphdGlvbiAobm90IGp1c3QgbmV3bHkgY3JlYXRlZCBvbmVzKVxuICAgIGNvbnN0IGFsbE9yZ0JpbGxzID0gYXdhaXQgZGJcbiAgICAgIC5zZWxlY3Qoe1xuICAgICAgICBpZDogc2NoZW1hLmJpbGxzLmlkLFxuICAgICAgICBiaWxsTnVtYmVyOiBzY2hlbWEuYmlsbHMuYmlsbE51bWJlcixcbiAgICAgICAgdGl0bGU6IHNjaGVtYS5iaWxscy50aXRsZSxcbiAgICAgICAgY2F0ZWdvcnk6IHNjaGVtYS5iaWxscy5jYXRlZ29yeSxcbiAgICAgICAgdmVuZG9yOiBzY2hlbWEuYmlsbHMudmVuZG9yLFxuICAgICAgICB0b3RhbEFtb3VudDogc2NoZW1hLmJpbGxzLnRvdGFsQW1vdW50LFxuICAgICAgICBkZXNjcmlwdGlvbjogc2NoZW1hLmJpbGxzLmRlc2NyaXB0aW9uLFxuICAgICAgICBidWlsZGluZ0lkOiBzY2hlbWEuYmlsbHMuYnVpbGRpbmdJZFxuICAgICAgfSlcbiAgICAgIC5mcm9tKHNjaGVtYS5iaWxscylcbiAgICAgIC5pbm5lckpvaW4oc2NoZW1hLmJ1aWxkaW5ncywgZXEoc2NoZW1hLmJpbGxzLmJ1aWxkaW5nSWQsIHNjaGVtYS5idWlsZGluZ3MuaWQpKVxuICAgICAgLndoZXJlKGVxKHNjaGVtYS5idWlsZGluZ3Mub3JnYW5pemF0aW9uSWQsIGJ1aWxkaW5nc1swXS5vcmdhbml6YXRpb25JZCkpO1xuXG4gICAgY29uc29sZS5sb2coYCAgIEZvdW5kICR7YWxsT3JnQmlsbHMubGVuZ3RofSB0b3RhbCBiaWxscyBmb3Igb3JnYW5pemF0aW9uLCBjcmVhdGluZyBkb2N1bWVudHMgZm9yIGJpbGxzIHdpdGhvdXQgdGhlbS4uLmApO1xuICAgIFxuICAgIGNvbnN0IGJpbGxzV2l0aERvY3MgPSBhbGxPcmdCaWxscy5tYXAoYmlsbCA9PiAoe1xuICAgICAgaWQ6IGJpbGwuaWQsXG4gICAgICBiaWxsTnVtYmVyOiBiaWxsLmJpbGxOdW1iZXIsXG4gICAgICB0aXRsZTogYmlsbC50aXRsZSxcbiAgICAgIGNhdGVnb3J5OiBiaWxsLmNhdGVnb3J5LFxuICAgICAgdmVuZG9yOiBiaWxsLnZlbmRvcixcbiAgICAgIHRvdGFsQW1vdW50OiBiaWxsLnRvdGFsQW1vdW50LFxuICAgICAgZGVzY3JpcHRpb246IGJpbGwuZGVzY3JpcHRpb24sXG4gICAgICBidWlsZGluZ0lkOiBiaWxsLmJ1aWxkaW5nSWRcbiAgICB9KSk7XG4gICAgXG4gICAgZm9yIChjb25zdCBiaWxsIG9mIGJpbGxzV2l0aERvY3MpIHtcbiAgICAgIC8vIENoZWNrIGlmIHRoaXMgYmlsbCBhbHJlYWR5IGhhcyBhIGRvY3VtZW50XG4gICAgICBjb25zdCBleGlzdGluZ0RvYyA9IGF3YWl0IGRiXG4gICAgICAgIC5zZWxlY3QoeyBpZDogc2NoZW1hLmRvY3VtZW50cy5pZCB9KVxuICAgICAgICAuZnJvbShzY2hlbWEuZG9jdW1lbnRzKVxuICAgICAgICAud2hlcmUoYW5kKFxuICAgICAgICAgIGVxKHNjaGVtYS5kb2N1bWVudHMuYXR0YWNoZWRUb0lkLCBiaWxsLmlkKSxcbiAgICAgICAgICBlcShzY2hlbWEuZG9jdW1lbnRzLmF0dGFjaGVkVG9UeXBlLCAnYmlsbCcpXG4gICAgICAgICkpXG4gICAgICAgIC5saW1pdCgxKTtcbiAgICAgIFxuICAgICAgaWYgKGV4aXN0aW5nRG9jLmxlbmd0aCA+IDApIHtcbiAgICAgICAgLy8gU2tpcCBiaWxscyB0aGF0IGFscmVhZHkgaGF2ZSBkb2N1bWVudHNcbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG4gICAgICBcbiAgICAgIC8vIEZpbmQgYSBtYW5hZ2VyIGZvciB0aGlzIGJ1aWxkaW5nLCB3aXRoIGZhbGxiYWNrIHRvIGFueSBtYW5hZ2VyXG4gICAgICBsZXQgYmlsbENyZWF0b3IgPSB1c2Vycy5maW5kKHVzZXIgPT4gdXNlci5idWlsZGluZ0lkID09PSBiaWxsLmJ1aWxkaW5nSWQgJiYgdXNlci5yb2xlLmluY2x1ZGVzKCdtYW5hZ2VyJykpO1xuICAgICAgaWYgKCFiaWxsQ3JlYXRvcikge1xuICAgICAgICAvLyBGYWxsYmFjazogdXNlIGFueSBhdmFpbGFibGUgbWFuYWdlclxuICAgICAgICBiaWxsQ3JlYXRvciA9IHVzZXJzLmZpbmQodXNlciA9PiB1c2VyLnJvbGUuaW5jbHVkZXMoJ21hbmFnZXInKSk7XG4gICAgICB9XG4gICAgICBpZiAoIWJpbGxDcmVhdG9yKSB7XG4gICAgICAgIGNvbnNvbGUud2FybihgICAg4pqg77iPIE5vIG1hbmFnZXIgZm91bmQgZm9yIGJpbGwgJHtiaWxsLmJpbGxOdW1iZXJ9LCBza2lwcGluZyBkb2N1bWVudCBjcmVhdGlvbmApO1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cbiAgICAgIFxuICAgICAgLy8gQ3JlYXRlIG9ubHkgMSBkb2N1bWVudCBwZXIgYmlsbCAoZWl0aGVyIGludm9pY2UgT1IgcmVjZWlwdClcbiAgICAgIGNvbnN0IGlzSW52b2ljZSA9IE1hdGgucmFuZG9tKCkgPiAwLjU7XG4gICAgICBjb25zdCBkb2NUeXBlID0gaXNJbnZvaWNlID8gJ2ludm9pY2UnIDogJ3JlY2VpcHQnO1xuICAgICAgXG4gICAgICBsZXQgZG9jdW1lbnRDb250ZW50ID0gYCR7ZGVtb0Rpc2Nsb3N1cmV9JHtkb2NUeXBlLnRvVXBwZXJDYXNlKCl9IERPQ1VNRU5UXG5cbkJpbGwgTnVtYmVyOiAke2JpbGwuYmlsbE51bWJlcn1cblRpdGxlOiAke2JpbGwudGl0bGV9XG5WZW5kb3I6ICR7YmlsbC52ZW5kb3J9XG5DYXRlZ29yeTogJHtiaWxsLmNhdGVnb3J5LmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpICsgYmlsbC5jYXRlZ29yeS5zbGljZSgxKX1cblRvdGFsIEFtb3VudDogJCR7YmlsbC50b3RhbEFtb3VudH1cbkRlc2NyaXB0aW9uOiAke2JpbGwuZGVzY3JpcHRpb259XG5cbmA7XG5cbiAgICAgIGlmIChpc0ludm9pY2UpIHtcbiAgICAgICAgZG9jdW1lbnRDb250ZW50ICs9IGBUaGlzIGludm9pY2UgZG9jdW1lbnQgd291bGQgbm9ybWFsbHkgYmUgdXBsb2FkZWQgYnkgdGhlIHByb3BlcnR5IG1hbmFnZXJcbmFzIGEgUERGIG9yIGltYWdlIGZpbGUsIGJ1dCBmb3IgdGhpcyBkZW1vIHdlJ3JlIHNob3dpbmcgaXQgYXMgdGV4dCBjb250ZW50LlxuXG5QYXltZW50IFRlcm1zOiBOZXQgMzAgZGF5c1xuSW52b2ljZSBEYXRlOiAke2Zha2VyLmRhdGUucmVjZW50KCkudG9Mb2NhbGVEYXRlU3RyaW5nKCl9XG5EdWUgRGF0ZTogJHtmYWtlci5kYXRlLmZ1dHVyZSgpLnRvTG9jYWxlRGF0ZVN0cmluZygpfVxuXG5TZXJ2aWNlIERldGFpbHM6XG4tICR7ZmFrZXIubG9yZW0uc2VudGVuY2UoKX1cbi0gJHtmYWtlci5sb3JlbS5zZW50ZW5jZSgpfVxuXG5UaGFuayB5b3UgZm9yIHlvdXIgYnVzaW5lc3MhXG4ke2JpbGwudmVuZG9yfWA7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBkb2N1bWVudENvbnRlbnQgKz0gYFBheW1lbnQgQW1vdW50OiAkJHtiaWxsLnRvdGFsQW1vdW50fVxuUGF5bWVudCBEYXRlOiAke2Zha2VyLmRhdGUucmVjZW50KCkudG9Mb2NhbGVEYXRlU3RyaW5nKCl9XG5QYXltZW50IE1ldGhvZDogJHtmYWtlci5oZWxwZXJzLmFycmF5RWxlbWVudChbJ0VsZWN0cm9uaWMgVHJhbnNmZXInLCAnQ2hlY2snLCAnQUNIIFRyYW5zZmVyJ10pfVxuUmVmZXJlbmNlIE51bWJlcjogUEFZLSR7ZmFrZXIuc3RyaW5nLmFscGhhbnVtZXJpYyg4KS50b1VwcGVyQ2FzZSgpfVxuXG5UaGlzIHBheW1lbnQgaGFzIGJlZW4gcHJvY2Vzc2VkIHN1Y2Nlc3NmdWxseS5cbkJ1aWxkaW5nIE1hbmFnZW1lbnQgT2ZmaWNlYDtcbiAgICAgIH1cblxuICAgICAgY29uc3QgZmlsZVBhdGggPSBgYmlsbHMvJHtkb2NUeXBlfS0ke2JpbGwuYmlsbE51bWJlci50b0xvd2VyQ2FzZSgpfS0ke2JpbGwuaWQuc2xpY2UoMCwgOCl9LnR4dGA7XG4gICAgICBjb25zdCB7IGZpbGVTaXplIH0gPSB3cml0ZURvY3VtZW50RmlsZShmaWxlUGF0aCwgZG9jdW1lbnRDb250ZW50KTtcbiAgICAgIFxuICAgICAgLy8gTWFwIGJpbGwgY2F0ZWdvcnkgdG8gYXBwcm9wcmlhdGUgZG9jdW1lbnQgdHlwZVxuICAgICAgY29uc3QgZG9jdW1lbnRUeXBlTWFwcGluZzogeyBba2V5OiBzdHJpbmddOiBzdHJpbmcgfSA9IHtcbiAgICAgICAgJ3V0aWxpdGllcyc6ICd1dGlsaXRpZXMnLFxuICAgICAgICAnbWFpbnRlbmFuY2UnOiAnbWFpbnRlbmFuY2UnLCBcbiAgICAgICAgJ2luc3VyYW5jZSc6ICdpbnN1cmFuY2UnLFxuICAgICAgICAnY2xlYW5pbmcnOiAnbWFpbnRlbmFuY2UnLFxuICAgICAgICAnc2VjdXJpdHknOiAnb3RoZXInLFxuICAgICAgICAnbGFuZHNjYXBpbmcnOiAnbWFpbnRlbmFuY2UnLFxuICAgICAgICAncHJvZmVzc2lvbmFsX3NlcnZpY2VzJzogJ290aGVyJyxcbiAgICAgICAgJ2FkbWluaXN0cmF0aW9uJzogJ290aGVyJyxcbiAgICAgICAgJ3N1cHBsaWVzJzogJ290aGVyJ1xuICAgICAgfTtcbiAgICAgIGNvbnN0IGJpbGxEb2N1bWVudFR5cGUgPSBkb2N1bWVudFR5cGVNYXBwaW5nW2JpbGwuY2F0ZWdvcnldIHx8ICdvdGhlcic7XG5cbiAgICAgIGF3YWl0IGRiXG4gICAgICAgIC5pbnNlcnQoc2NoZW1hLmRvY3VtZW50cylcbiAgICAgICAgLnZhbHVlcyh7XG4gICAgICAgICAgbmFtZTogYCR7aXNJbnZvaWNlID8gJ0ludm9pY2UnIDogJ1JlY2VpcHQnfSAtICR7YmlsbC5iaWxsTnVtYmVyfWAsXG4gICAgICAgICAgZGVzY3JpcHRpb246IGAke2lzSW52b2ljZSA/ICdJbnZvaWNlJyA6ICdQYXltZW50IHJlY2VpcHQnfSBmb3IgJHtiaWxsLnRpdGxlfWAsXG4gICAgICAgICAgZG9jdW1lbnRUeXBlOiBiaWxsRG9jdW1lbnRUeXBlLFxuICAgICAgICAgIGZpbGVQYXRoLFxuICAgICAgICAgIGZpbGVOYW1lOiBgJHtkb2NUeXBlfS0ke2JpbGwuYmlsbE51bWJlcn0udHh0YCxcbiAgICAgICAgICBmaWxlU2l6ZSxcbiAgICAgICAgICBtaW1lVHlwZTogJ3RleHQvcGxhaW4nLFxuICAgICAgICAgIGlzVmlzaWJsZVRvVGVuYW50czogZmFsc2UsIC8vIFdpbGwgYmUgY29uZmlndXJlZCBsYXRlciBiYXNlZCBvbiB0ZW5hbnQgYXNzaWdubWVudHNcbiAgICAgICAgICBidWlsZGluZ0lkOiBiaWxsLmJ1aWxkaW5nSWQsXG4gICAgICAgICAgdXBsb2FkZWRCeUlkOiBiaWxsQ3JlYXRvci5pZCxcbiAgICAgICAgICBhdHRhY2hlZFRvVHlwZTogJ2JpbGwnLFxuICAgICAgICAgIGF0dGFjaGVkVG9JZDogYmlsbC5pZFxuICAgICAgICB9KTtcbiAgICAgIFxuICAgICAgdG90YWxEb2N1bWVudHMrKztcbiAgICB9XG4gICAgXG4gICAgLy8gQ3JlYXRlIFJlc2lkZW5jZSBEb2N1bWVudHMgLSAxLTIgZG9jdW1lbnRzIHBlciBjYXRlZ29yeSBmb3IgRUFDSCByZXNpZGVuY2VcbiAgICBjb25zb2xlLmxvZygnICAgQ3JlYXRpbmcgcmVzaWRlbmNlIGRvY3VtZW50cy4uLicpO1xuICAgIGNvbnN0IHJlc2lkZW5jZURvY3VtZW50VHlwZXMgPSBbXG4gICAgICB7IHR5cGU6ICdsZWFzZScsIG5hbWU6ICdMZWFzZSBBZ3JlZW1lbnQnLCBkZXNjcmlwdGlvbjogJ1JlbnRhbCBsZWFzZSBhZ3JlZW1lbnQnIH0sXG4gICAgICB7IHR5cGU6ICdpbnNwZWN0aW9uJywgbmFtZTogJ0luc3BlY3Rpb24gUmVwb3J0JywgZGVzY3JpcHRpb246ICdVbml0IGluc3BlY3Rpb24gcmVwb3J0JyB9LFxuICAgICAgeyB0eXBlOiAnbWFpbnRlbmFuY2UnLCBuYW1lOiAnTWFpbnRlbmFuY2UgTG9nJywgZGVzY3JpcHRpb246ICdNYWludGVuYW5jZSBoaXN0b3J5IGxvZycgfSxcbiAgICAgIHsgdHlwZTogJ2ZpbmFuY2lhbCcsIG5hbWU6ICdGaW5hbmNpYWwgRG9jdW1lbnQnLCBkZXNjcmlwdGlvbjogJ1RlbmFudCBmaW5hbmNpYWwgcmVjb3JkIG9yIHBheW1lbnQgaGlzdG9yeScgfVxuICAgIF07XG4gICAgXG4gICAgLy8gQ3JlYXRlIDEtMiBkb2N1bWVudHMgcGVyIGNhdGVnb3J5IGZvciBFQUNIIHJlc2lkZW5jZVxuICAgIGZvciAoY29uc3QgcmVzaWRlbmNlIG9mIHJlc2lkZW5jZXMpIHtcbiAgICAgIGZvciAoY29uc3QgZG9jVHlwZSBvZiByZXNpZGVuY2VEb2N1bWVudFR5cGVzKSB7XG4gICAgICAgIGNvbnN0IGRvY3NUb0NyZWF0ZSA9IGZha2VyLm51bWJlci5pbnQoeyBtaW46IDEsIG1heDogMiB9KTtcbiAgICAgICAgXG4gICAgICAgIGZvciAobGV0IGRvY0luZGV4ID0gMDsgZG9jSW5kZXggPCBkb2NzVG9DcmVhdGU7IGRvY0luZGV4KyspIHtcbiAgICAgICAgICBjb25zdCBidWlsZGluZyA9IGJ1aWxkaW5ncy5maW5kKGIgPT4gYi5pZCA9PT0gcmVzaWRlbmNlLmJ1aWxkaW5nSWQpO1xuICAgICAgICAgIGNvbnN0IG1hbmFnZXIgPSB1c2Vycy5maW5kKHVzZXIgPT4gdXNlci5idWlsZGluZ0lkID09PSByZXNpZGVuY2UuYnVpbGRpbmdJZCAmJiB1c2VyLnJvbGUuaW5jbHVkZXMoJ21hbmFnZXInKSk7XG4gICAgICAgICAgaWYgKCFidWlsZGluZyB8fCAhbWFuYWdlcikgY29udGludWU7XG4gICAgICAgICAgXG4gICAgICAgICAgY29uc3QgZG9jU3VmZml4ID0gZG9jc1RvQ3JlYXRlID4gMSA/IGAtJHtkb2NJbmRleCArIDF9YCA6ICcnO1xuICAgICAgICAgIGxldCBkb2N1bWVudENvbnRlbnQgPSBgJHtkZW1vRGlzY2xvc3VyZX0ke2RvY1R5cGUubmFtZS50b1VwcGVyQ2FzZSgpfVxuXG5Vbml0OiAke3Jlc2lkZW5jZS51bml0TnVtYmVyfVxuQnVpbGRpbmc6ICR7YnVpbGRpbmcubmFtZX1cbkFkZHJlc3M6ICR7ZmFrZXIubG9jYXRpb24uc3RyZWV0QWRkcmVzcygpfVxuRG9jdW1lbnQgJHtkb2NJbmRleCArIDF9IG9mICR7ZG9jc1RvQ3JlYXRlfVxuXG5gO1xuICAgICAgICBcbiAgICAgICAgICBpZiAoZG9jVHlwZS50eXBlID09PSAnbGVhc2UnKSB7XG4gICAgICAgICAgICBkb2N1bWVudENvbnRlbnQgKz0gYExFQVNFIEFHUkVFTUVOVFxuXG5UZW5hbnQgSW5mb3JtYXRpb246XG4tIFVuaXQgTnVtYmVyOiAke3Jlc2lkZW5jZS51bml0TnVtYmVyfVxuLSBMZWFzZSBTdGFydCBEYXRlOiAke2Zha2VyLmRhdGUucGFzdCgpLnRvTG9jYWxlRGF0ZVN0cmluZygpfVxuLSBMZWFzZSBFbmQgRGF0ZTogJHtmYWtlci5kYXRlLmZ1dHVyZSgpLnRvTG9jYWxlRGF0ZVN0cmluZygpfVxuLSBNb250aGx5IFJlbnQ6ICQke2Zha2VyLm51bWJlci5pbnQoeyBtaW46IDgwMCwgbWF4OiAyNTAwIH0pfVxuLSBTZWN1cml0eSBEZXBvc2l0OiAkJHtmYWtlci5udW1iZXIuaW50KHsgbWluOiA4MDAsIG1heDogMjUwMCB9KX1cblxuVGVybXMgYW5kIENvbmRpdGlvbnM6XG4tICR7ZmFrZXIubG9yZW0uc2VudGVuY2UoKX1cbi0gJHtmYWtlci5sb3JlbS5zZW50ZW5jZSgpfVxuXG5MYW5kbG9yZDogJHtidWlsZGluZy5uYW1lfSBNYW5hZ2VtZW50XG5UZW5hbnQgU2lnbmF0dXJlOiBfX19fX19fX19fX19fX19fX19fX1xuRGF0ZTogJHtmYWtlci5kYXRlLnJlY2VudCgpLnRvTG9jYWxlRGF0ZVN0cmluZygpfWA7XG4gICAgICAgICAgfSBlbHNlIGlmIChkb2NUeXBlLnR5cGUgPT09ICdpbnNwZWN0aW9uJykge1xuICAgICAgICAgICAgZG9jdW1lbnRDb250ZW50ICs9IGBJTlNQRUNUSU9OIFJFUE9SVFxuXG5JbnNwZWN0aW9uIERhdGU6ICR7ZmFrZXIuZGF0ZS5yZWNlbnQoKS50b0xvY2FsZURhdGVTdHJpbmcoKX1cbkluc3BlY3RvcjogJHtmYWtlci5wZXJzb24uZnVsbE5hbWUoKX1cblxuSW5zcGVjdGlvbiBSZXN1bHRzOlxuKyBFbGVjdHJpY2FsIHN5c3RlbXMgLSBHb29kIGNvbmRpdGlvblxuKyBQbHVtYmluZyAtIEdvb2QgY29uZGl0aW9uICBcbisgSGVhdGluZy9Db29saW5nIC0gR29vZCBjb25kaXRpb25cbiogTWlub3IgcGFpbnQgdG91Y2gtdXAgbmVlZGVkIGluIGJlZHJvb21cbisgV2luZG93cyBhbmQgZG9vcnMgLSBHb29kIGNvbmRpdGlvblxuKyBTbW9rZSBkZXRlY3RvcnMgLSBXb3JraW5nIHByb3Blcmx5XG5cbk92ZXJhbGwgUmF0aW5nOiAke2Zha2VyLmhlbHBlcnMuYXJyYXlFbGVtZW50KFsnRXhjZWxsZW50JywgJ0dvb2QnLCAnRmFpciddKX1cblxuTm90ZXM6XG4ke2Zha2VyLmxvcmVtLnBhcmFncmFwaCgpfVxuXG5JbnNwZWN0b3IgU2lnbmF0dXJlOiBfX19fX19fX19fX19fX19fX19fX2A7XG4gICAgICAgICAgfSBlbHNlIGlmIChkb2NUeXBlLnR5cGUgPT09ICdmaW5hbmNpYWwnKSB7XG4gICAgICAgICAgICBjb25zdCBmaW5hbmNpYWxUeXBlID0gZmFrZXIuaGVscGVycy5hcnJheUVsZW1lbnQoWydwYXltZW50X2hpc3RvcnknLCAnZGVwb3NpdF9yZWNvcmQnLCAndGVuYW50X2ZpbmFuY2lhbCddKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgaWYgKGZpbmFuY2lhbFR5cGUgPT09ICdwYXltZW50X2hpc3RvcnknKSB7XG4gICAgICAgICAgICAgIGRvY3VtZW50Q29udGVudCArPSBgVEVOQU5UIFBBWU1FTlQgSElTVE9SWVxuXG5Vbml0OiAke3Jlc2lkZW5jZS51bml0TnVtYmVyfVxuVGVuYW50OiAke2Zha2VyLnBlcnNvbi5mdWxsTmFtZSgpfVxuQWNjb3VudCBQZXJpb2Q6ICR7ZmFrZXIuZGF0ZS5wYXN0KHsgeWVhcnM6IDEgfSkudG9Mb2NhbGVEYXRlU3RyaW5nKCl9IHRvIFByZXNlbnRcblxuUGF5bWVudCBTdW1tYXJ5OlxuTW9udGhseSBSZW50OiAkJHtmYWtlci5udW1iZXIuaW50KHsgbWluOiAxMjAwLCBtYXg6IDI1MDAgfSl9XG5TZWN1cml0eSBEZXBvc2l0OiAkJHtmYWtlci5udW1iZXIuaW50KHsgbWluOiAxMjAwLCBtYXg6IDI1MDAgfSl9XG5QYXltZW50IE1ldGhvZDogJHtmYWtlci5oZWxwZXJzLmFycmF5RWxlbWVudChbJ0VsZWN0cm9uaWMgVHJhbnNmZXInLCAnQ2hlY2snLCAnT25saW5lIFBheW1lbnQnXSl9XG5cblJlY2VudCBQYXltZW50czpcbi0gJHtmYWtlci5kYXRlLnJlY2VudCgpLnRvTG9jYWxlRGF0ZVN0cmluZygpfTogUmVudCBQYXltZW50IC0gJCR7ZmFrZXIubnVtYmVyLmludCh7IG1pbjogMTIwMCwgbWF4OiAyNTAwIH0pfSAtIE9uIFRpbWVcbi0gJHtmYWtlci5kYXRlLnJlY2VudCh7IGRheXM6IDMwIH0pLnRvTG9jYWxlRGF0ZVN0cmluZygpfTogUmVudCBQYXltZW50IC0gJCR7ZmFrZXIubnVtYmVyLmludCh7IG1pbjogMTIwMCwgbWF4OiAyNTAwIH0pfSAtIE9uIFRpbWVcbi0gJHtmYWtlci5kYXRlLnJlY2VudCh7IGRheXM6IDYwIH0pLnRvTG9jYWxlRGF0ZVN0cmluZygpfTogUmVudCBQYXltZW50IC0gJCR7ZmFrZXIubnVtYmVyLmludCh7IG1pbjogMTIwMCwgbWF4OiAyNTAwIH0pfSAtIE9uIFRpbWVcblxuUGF5bWVudCBTdGF0dXM6IEN1cnJlbnRcbk91dHN0YW5kaW5nIEJhbGFuY2U6ICQwLjAwXG5DcmVkaXQgU2NvcmU6ICR7ZmFrZXIubnVtYmVyLmludCh7IG1pbjogNjUwLCBtYXg6IDg1MCB9KX1gO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChmaW5hbmNpYWxUeXBlID09PSAnZGVwb3NpdF9yZWNvcmQnKSB7XG4gICAgICAgICAgICAgIGRvY3VtZW50Q29udGVudCArPSBgU0VDVVJJVFkgREVQT1NJVCBSRUNPUkRcblxuVW5pdDogJHtyZXNpZGVuY2UudW5pdE51bWJlcn1cblRlbmFudDogJHtmYWtlci5wZXJzb24uZnVsbE5hbWUoKX1cbkRlcG9zaXQgRGF0ZTogJHtmYWtlci5kYXRlLnBhc3QoKS50b0xvY2FsZURhdGVTdHJpbmcoKX1cblxuRGVwb3NpdCBEZXRhaWxzOlxuU2VjdXJpdHkgRGVwb3NpdCBBbW91bnQ6ICQke2Zha2VyLm51bWJlci5pbnQoeyBtaW46IDEyMDAsIG1heDogMjUwMCB9KX1cblBldCBEZXBvc2l0OiAkJHtmYWtlci5udW1iZXIuaW50KHsgbWluOiAwLCBtYXg6IDUwMCB9KX1cbktleSBEZXBvc2l0OiAkJHtmYWtlci5udW1iZXIuaW50KHsgbWluOiA1MCwgbWF4OiAxNTAgfSl9XG5Ub3RhbCBEZXBvc2l0OiAkJHtmYWtlci5udW1iZXIuaW50KHsgbWluOiAxMjUwLCBtYXg6IDMxNTAgfSl9XG5cbkJhbmsgSW5mb3JtYXRpb246XG5IZWxkIGF0OiAke2Zha2VyLmNvbXBhbnkubmFtZSgpfSBCYW5rXG5BY2NvdW50IE51bWJlcjogREVQLSR7ZmFrZXIuc3RyaW5nLmFscGhhbnVtZXJpYyg4KS50b1VwcGVyQ2FzZSgpfVxuSW50ZXJlc3QgUmF0ZTogJHtmYWtlci5udW1iZXIuZmxvYXQoeyBtaW46IDAuNSwgbWF4OiAyLjUsIGZyYWN0aW9uRGlnaXRzOiAyIH0pfSVcblxuRGVwb3NpdCBTdGF0dXM6IEhlbGQgaW4gVHJ1c3QgQWNjb3VudFxuRXhwZWN0ZWQgUmV0dXJuIERhdGU6IEVuZCBvZiBMZWFzZSBUZXJtYDtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIGRvY3VtZW50Q29udGVudCArPSBgVEVOQU5UIEZJTkFOQ0lBTCBWRVJJRklDQVRJT05cblxuVW5pdDogJHtyZXNpZGVuY2UudW5pdE51bWJlcn1cblRlbmFudDogJHtmYWtlci5wZXJzb24uZnVsbE5hbWUoKX1cblZlcmlmaWNhdGlvbiBEYXRlOiAke2Zha2VyLmRhdGUucmVjZW50KCkudG9Mb2NhbGVEYXRlU3RyaW5nKCl9XG5cbkluY29tZSBWZXJpZmljYXRpb246XG5Nb250aGx5IEluY29tZTogJCR7ZmFrZXIubnVtYmVyLmludCh7IG1pbjogNDAwMCwgbWF4OiA4MDAwIH0pfVxuRW1wbG95bWVudDogJHtmYWtlci5jb21wYW55Lm5hbWUoKX1cblBvc2l0aW9uOiAke2Zha2VyLnBlcnNvbi5qb2JUaXRsZSgpfVxuRW1wbG95bWVudCBEdXJhdGlvbjogJHtmYWtlci5udW1iZXIuaW50KHsgbWluOiA2LCBtYXg6IDYwIH0pfSBtb250aHNcblxuUmVmZXJlbmNlczpcblByZXZpb3VzIExhbmRsb3JkOiAke2Zha2VyLnBlcnNvbi5mdWxsTmFtZSgpfVxuQ29udGFjdDogJHtnZW5lcmF0ZVF1ZWJlY1Bob25lKCl9XG5SZWZlcmVuY2UgU3RhdHVzOiBQb3NpdGl2ZVxuXG5DcmVkaXQgSW5mb3JtYXRpb246XG5DcmVkaXQgU2NvcmU6ICR7ZmFrZXIubnVtYmVyLmludCh7IG1pbjogNjUwLCBtYXg6IDg1MCB9KX1cbkRlYnQtdG8tSW5jb21lIFJhdGlvOiAke2Zha2VyLm51bWJlci5pbnQoeyBtaW46IDE1LCBtYXg6IDM1IH0pfSVcblJlbnRhbCBIaXN0b3J5OiBFeGNlbGxlbnRgO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBkb2N1bWVudENvbnRlbnQgKz0gYE1BSU5URU5BTkNFIExPR1xuXG5NYWludGVuYW5jZSBIaXN0b3J5IGZvciBVbml0ICR7cmVzaWRlbmNlLnVuaXROdW1iZXJ9OlxuXG4ke2Zha2VyLmRhdGUucGFzdCgpLnRvTG9jYWxlRGF0ZVN0cmluZygpfSAtICR7ZmFrZXIuaGVscGVycy5hcnJheUVsZW1lbnQoWydQbHVtYmluZyByZXBhaXInLCAnRWxlY3RyaWNhbCB3b3JrJywgJ0hWQUMgbWFpbnRlbmFuY2UnXSl9XG5TdGF0dXM6IENvbXBsZXRlZFxuQ29zdDogJCR7ZmFrZXIubnVtYmVyLmludCh7IG1pbjogNTAsIG1heDogNTAwIH0pfVxuXG4ke2Zha2VyLmRhdGUucmVjZW50KCkudG9Mb2NhbGVEYXRlU3RyaW5nKCl9IC0gJHtmYWtlci5oZWxwZXJzLmFycmF5RWxlbWVudChbJ0FubnVhbCBpbnNwZWN0aW9uJywgJ0ZpbHRlciByZXBsYWNlbWVudCcsICdMaWdodCBmaXh0dXJlIHJlcGFpciddKX1cblN0YXR1czogSW4gUHJvZ3Jlc3NcbkVzdGltYXRlZCBDb3N0OiAkJHtmYWtlci5udW1iZXIuaW50KHsgbWluOiA1MCwgbWF4OiA1MDAgfSl9XG5cbk5leHQgU2NoZWR1bGVkIE1haW50ZW5hbmNlOiAke2Zha2VyLmRhdGUuZnV0dXJlKCkudG9Mb2NhbGVEYXRlU3RyaW5nKCl9YDtcbiAgICAgICAgICB9XG4gICAgICAgICAgXG4gICAgICAgICAgY29uc3QgZmlsZU5hbWUgPSBgJHtkb2NUeXBlLnR5cGV9LSR7cmVzaWRlbmNlLnVuaXROdW1iZXIudG9Mb3dlckNhc2UoKX0ke2RvY1N1ZmZpeH0udHh0YDtcbiAgICAgICAgICBjb25zdCBmaWxlUGF0aCA9IGByZXNpZGVuY2VzLyR7cmVzaWRlbmNlLmlkfS8ke2ZpbGVOYW1lfWA7XG4gICAgICAgICAgY29uc3QgeyBmaWxlU2l6ZSB9ID0gd3JpdGVEb2N1bWVudEZpbGUoZmlsZVBhdGgsIGRvY3VtZW50Q29udGVudCk7XG4gICAgICAgICAgXG4gICAgICAgICAgY29uc3QgW2NyZWF0ZWRSZXNpZGVuY2VEb2NdID0gYXdhaXQgZGJcbiAgICAgICAgICAgIC5pbnNlcnQoc2NoZW1hLmRvY3VtZW50cylcbiAgICAgICAgICAgIC52YWx1ZXMoe1xuICAgICAgICAgICAgICBuYW1lOiBgJHtkb2NUeXBlLm5hbWV9IC0gVW5pdCAke3Jlc2lkZW5jZS51bml0TnVtYmVyfSR7ZG9jU3VmZml4fWAsXG4gICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiBgJHtkb2NUeXBlLmRlc2NyaXB0aW9ufSBmb3IgdW5pdCAke3Jlc2lkZW5jZS51bml0TnVtYmVyfWAsXG4gICAgICAgICAgICAgIGRvY3VtZW50VHlwZTogZG9jVHlwZS50eXBlLFxuICAgICAgICAgICAgICBmaWxlUGF0aCxcbiAgICAgICAgICAgICAgZmlsZU5hbWUsXG4gICAgICAgICAgICAgIGZpbGVTaXplLFxuICAgICAgICAgICAgICBtaW1lVHlwZTogJ3RleHQvcGxhaW4nLFxuICAgICAgICAgICAgICBpc1Zpc2libGVUb1RlbmFudHM6IGZhbHNlLCAvLyBXaWxsIGJlIGNvbmZpZ3VyZWQgbGF0ZXIgYmFzZWQgb24gdGVuYW50IGFzc2lnbm1lbnRzXG4gICAgICAgICAgICAgIHJlc2lkZW5jZUlkOiByZXNpZGVuY2UuaWQsXG4gICAgICAgICAgICAgIGJ1aWxkaW5nSWQ6IHJlc2lkZW5jZS5idWlsZGluZ0lkLFxuICAgICAgICAgICAgICB1cGxvYWRlZEJ5SWQ6IG1hbmFnZXIuaWRcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAucmV0dXJuaW5nKCk7XG5cbiAgICAgICAgICBjb25zb2xlLmxvZyhgICAgICDinJMgQ3JlYXRlZCByZXNpZGVuY2UgZG9jdW1lbnQ6ICR7Y3JlYXRlZFJlc2lkZW5jZURvYy5pZH0gLSAke2NyZWF0ZWRSZXNpZGVuY2VEb2MubmFtZX0gKCR7Y3JlYXRlZFJlc2lkZW5jZURvYy5maWxlUGF0aH0pYCk7XG4gICAgICAgICAgdG90YWxEb2N1bWVudHMrKztcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICBcbiAgICAvLyBDcmVhdGUgQnVpbGRpbmcgRG9jdW1lbnRzIC0gMS0yIHBlciBjYXRlZ29yeSBmb3IgRUFDSCBidWlsZGluZyAgXG4gICAgY29uc29sZS5sb2coJyAgIENyZWF0aW5nIGJ1aWxkaW5nIGRvY3VtZW50cyAoMS0yIHBlciBjYXRlZ29yeSBmb3IgZWFjaCBidWlsZGluZykuLi4nKTtcbiAgICBjb25zdCBidWlsZGluZ0RvY3VtZW50VHlwZXMgPSBbXG4gICAgICB7IHR5cGU6ICdpbnN1cmFuY2UnLCBuYW1lOiAnSW5zdXJhbmNlIENlcnRpZmljYXRlJywgZGVzY3JpcHRpb246ICdCdWlsZGluZyBpbnN1cmFuY2UgY2VydGlmaWNhdGUnIH0sXG4gICAgICB7IHR5cGU6ICdwZXJtaXRzJywgbmFtZTogJ0J1aWxkaW5nIFBlcm1pdCcsIGRlc2NyaXB0aW9uOiAnQ29uc3RydWN0aW9uL3Jlbm92YXRpb24gcGVybWl0JyB9LFxuICAgICAgeyB0eXBlOiAnbWVldGluZ19taW51dGVzJywgbmFtZTogJ0JvYXJkIE1lZXRpbmcgTWludXRlcycsIGRlc2NyaXB0aW9uOiAnTW9udGhseSBib2FyZCBtZWV0aW5nIG1pbnV0ZXMnIH0sXG4gICAgICB7IHR5cGU6ICdjb250cmFjdHMnLCBuYW1lOiAnU2VydmljZSBDb250cmFjdCcsIGRlc2NyaXB0aW9uOiAnTWFpbnRlbmFuY2Ugc2VydmljZSBjb250cmFjdCcgfSxcbiAgICAgIHsgdHlwZTogJ2ZpbmFuY2lhbCcsIG5hbWU6ICdGaW5hbmNpYWwgRG9jdW1lbnQnLCBkZXNjcmlwdGlvbjogJ0xvYW4gYWdyZWVtZW50LCBiYW5rIHN0YXRlbWVudCwgb3IgZmluYW5jaWFsIHJlcG9ydCcgfVxuICAgIF07XG4gICAgXG4gICAgLy8gQ3JlYXRlIDEtMiBkb2N1bWVudHMgcGVyIGNhdGVnb3J5IGZvciBFQUNIIGJ1aWxkaW5nXG4gICAgZm9yIChjb25zdCBidWlsZGluZyBvZiBidWlsZGluZ3MpIHtcbiAgICAgIGNvbnN0IG1hbmFnZXIgPSB1c2Vycy5maW5kKHVzZXIgPT4gdXNlci5idWlsZGluZ0lkID09PSBidWlsZGluZy5pZCAmJiB1c2VyLnJvbGUuaW5jbHVkZXMoJ21hbmFnZXInKSk7XG4gICAgICBpZiAoIW1hbmFnZXIpIHtcbiAgICAgICAgY29uc29sZS53YXJuKGAgICDimqDvuI8gTm8gbWFuYWdlciBmb3VuZCBmb3IgYnVpbGRpbmcgJHtidWlsZGluZy5uYW1lfSwgc2tpcHBpbmcgYnVpbGRpbmcgZG9jdW1lbnRzYCk7XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuICAgICAgXG4gICAgICBjb25zb2xlLmxvZyhgICAgICBDcmVhdGluZyBkb2N1bWVudHMgZm9yIGJ1aWxkaW5nOiAke2J1aWxkaW5nLm5hbWV9YCk7XG4gICAgICBcbiAgICAgIGZvciAoY29uc3QgZG9jVHlwZSBvZiBidWlsZGluZ0RvY3VtZW50VHlwZXMpIHtcbiAgICAgICAgY29uc3QgZG9jc1RvQ3JlYXRlID0gZmFrZXIubnVtYmVyLmludCh7IG1pbjogMSwgbWF4OiAyIH0pO1xuICAgICAgICBcbiAgICAgICAgZm9yIChsZXQgZG9jSW5kZXggPSAwOyBkb2NJbmRleCA8IGRvY3NUb0NyZWF0ZTsgZG9jSW5kZXgrKykge1xuICAgICAgICAgIGNvbnN0IGRvY1N1ZmZpeCA9IGRvY3NUb0NyZWF0ZSA+IDEgPyBgLSR7ZG9jSW5kZXggKyAxfWAgOiAnJztcbiAgICAgICAgXG4gICAgICAgICAgbGV0IGRvY3VtZW50Q29udGVudCA9IGAke2RlbW9EaXNjbG9zdXJlfSR7ZG9jVHlwZS5uYW1lLnRvVXBwZXJDYXNlKCl9JHtkb2NTdWZmaXggPyBgICgke2RvY0luZGV4ICsgMX0pYCA6ICcnfVxuXG5CdWlsZGluZzogJHtidWlsZGluZy5uYW1lfVxuT3JnYW5pemF0aW9uOiAke2J1aWxkaW5nLm9yZ2FuaXphdGlvbklkfVxuRG9jdW1lbnQgRGF0ZTogJHtmYWtlci5kYXRlLnJlY2VudCgpLnRvTG9jYWxlRGF0ZVN0cmluZygpfVxuRG9jdW1lbnQgJHtkb2NJbmRleCArIDF9IG9mICR7ZG9jc1RvQ3JlYXRlfVxuXG5gO1xuICAgICAgICBcbiAgICAgICAgaWYgKGRvY1R5cGUudHlwZSA9PT0gJ2luc3VyYW5jZScpIHtcbiAgICAgICAgICBkb2N1bWVudENvbnRlbnQgKz0gYElOU1VSQU5DRSBDRVJUSUZJQ0FURVxuXG5Qb2xpY3kgTnVtYmVyOiBJTlMtJHtmYWtlci5zdHJpbmcuYWxwaGFudW1lcmljKDEwKS50b1VwcGVyQ2FzZSgpfVxuSW5zdXJhbmNlIENvbXBhbnk6ICR7ZmFrZXIuY29tcGFueS5uYW1lKCl9IEluc3VyYW5jZVxuQ292ZXJhZ2UgVHlwZTogQ29tbWVyY2lhbCBQcm9wZXJ0eSBJbnN1cmFuY2VcbkNvdmVyYWdlIEFtb3VudDogJCR7ZmFrZXIubnVtYmVyLmludCh7IG1pbjogMTAwMDAwMCwgbWF4OiA1MDAwMDAwIH0pLnRvTG9jYWxlU3RyaW5nKCl9XG5Qb2xpY3kgUGVyaW9kOiAke2Zha2VyLmRhdGUucGFzdCgpLnRvTG9jYWxlRGF0ZVN0cmluZygpfSB0byAke2Zha2VyLmRhdGUuZnV0dXJlKCkudG9Mb2NhbGVEYXRlU3RyaW5nKCl9XG5cbkNvdmVyYWdlIERldGFpbHM6XG4tIFByb3BlcnR5IERhbWFnZTogQ292ZXJlZFxuLSBMaWFiaWxpdHk6IENvdmVyZWQgIFxuLSBOYXR1cmFsIERpc2FzdGVyczogQ292ZXJlZFxuLSBFcXVpcG1lbnQgQnJlYWtkb3duOiBDb3ZlcmVkXG5cbkNvbnRhY3QgSW5mb3JtYXRpb246XG5BZ2VudDogJHtmYWtlci5wZXJzb24uZnVsbE5hbWUoKX1cblBob25lOiAke2dlbmVyYXRlUXVlYmVjUGhvbmUoKX1cbkVtYWlsOiAke2Zha2VyLmludGVybmV0LmVtYWlsKCl9YDtcbiAgICAgICAgfSBlbHNlIGlmIChkb2NUeXBlLnR5cGUgPT09ICdwZXJtaXRzJykge1xuICAgICAgICAgIGRvY3VtZW50Q29udGVudCArPSBgQlVJTERJTkcgUEVSTUlUXG5cblBlcm1pdCBOdW1iZXI6IFBFUi0ke2Zha2VyLnN0cmluZy5hbHBoYW51bWVyaWMoOCkudG9VcHBlckNhc2UoKX1cblBlcm1pdCBUeXBlOiAke2Zha2VyLmhlbHBlcnMuYXJyYXlFbGVtZW50KFsnUmVub3ZhdGlvbicsICdFbGVjdHJpY2FsIFdvcmsnLCAnUGx1bWJpbmcnLCAnSFZBQyBJbnN0YWxsYXRpb24nXSl9XG5Jc3N1ZSBEYXRlOiAke2Zha2VyLmRhdGUucGFzdCgpLnRvTG9jYWxlRGF0ZVN0cmluZygpfVxuRXhwaXJ5IERhdGU6ICR7ZmFrZXIuZGF0ZS5mdXR1cmUoKS50b0xvY2FsZURhdGVTdHJpbmcoKX1cbkNvbnRyYWN0b3I6ICR7ZmFrZXIuY29tcGFueS5uYW1lKCl9XG5cbldvcmsgRGVzY3JpcHRpb246XG4ke2Zha2VyLmxvcmVtLnBhcmFncmFwaCgpfVxuXG5JbnNwZWN0aW9uIFNjaGVkdWxlOlxuLSBJbml0aWFsIEluc3BlY3Rpb246ICR7ZmFrZXIuZGF0ZS5yZWNlbnQoKS50b0xvY2FsZURhdGVTdHJpbmcoKX1cbi0gUHJvZ3Jlc3MgSW5zcGVjdGlvbjogJHtmYWtlci5kYXRlLnNvb24oKS50b0xvY2FsZURhdGVTdHJpbmcoKX1cbi0gRmluYWwgSW5zcGVjdGlvbjogJHtmYWtlci5kYXRlLmZ1dHVyZSgpLnRvTG9jYWxlRGF0ZVN0cmluZygpfVxuXG5BcHByb3ZlZCBieTogQ2l0eSBQbGFubmluZyBEZXBhcnRtZW50XG5QZXJtaXQgRmVlOiAkJHtmYWtlci5udW1iZXIuaW50KHsgbWluOiAxMDAsIG1heDogMTAwMCB9KX1gO1xuICAgICAgICB9IGVsc2UgaWYgKGRvY1R5cGUudHlwZSA9PT0gJ21lZXRpbmdfbWludXRlcycpIHtcbiAgICAgICAgICBkb2N1bWVudENvbnRlbnQgKz0gYEJPQVJEIE1FRVRJTkcgTUlOVVRFU1xuXG5NZWV0aW5nIERhdGU6ICR7ZmFrZXIuZGF0ZS5yZWNlbnQoKS50b0xvY2FsZURhdGVTdHJpbmcoKX1cbk1lZXRpbmcgVGltZTogJHtmYWtlci5udW1iZXIuaW50KHsgbWluOiAxOCwgbWF4OiAyMCB9KX06MDBcbkxvY2F0aW9uOiAke2J1aWxkaW5nLm5hbWV9IENvbW11bml0eSBSb29tXG5cbkF0dGVuZGVlczpcbi0gJHtmYWtlci5wZXJzb24uZnVsbE5hbWUoKX0gKEJvYXJkIFByZXNpZGVudClcbi0gJHtmYWtlci5wZXJzb24uZnVsbE5hbWUoKX0gKFRyZWFzdXJlcikgIFxuLSAke2Zha2VyLnBlcnNvbi5mdWxsTmFtZSgpfSAoU2VjcmV0YXJ5KVxuLSAke2Zha2VyLnBlcnNvbi5mdWxsTmFtZSgpfSAoUHJvcGVydHkgTWFuYWdlcilcblxuQWdlbmRhIEl0ZW1zOlxuMS4gQnVkZ2V0IFJldmlldyAtICR7ZmFrZXIubG9yZW0uc2VudGVuY2UoKX1cbjIuIE1haW50ZW5hbmNlIFVwZGF0ZXMgLSAke2Zha2VyLmxvcmVtLnNlbnRlbmNlKCl9XG4zLiBOZXcgUG9saWNpZXMgLSAke2Zha2VyLmxvcmVtLnNlbnRlbmNlKCl9XG5cbkFjdGlvbiBJdGVtczpcbi0gJHtmYWtlci5sb3JlbS5zZW50ZW5jZSgpfVxuLSAke2Zha2VyLmxvcmVtLnNlbnRlbmNlKCl9XG5cbk5leHQgTWVldGluZzogJHtmYWtlci5kYXRlLmZ1dHVyZSgpLnRvTG9jYWxlRGF0ZVN0cmluZygpfWA7XG4gICAgICAgIH0gZWxzZSBpZiAoZG9jVHlwZS50eXBlID09PSAnZmluYW5jaWFsJykge1xuICAgICAgICAgIGNvbnN0IGZpbmFuY2lhbERvY1R5cGUgPSBmYWtlci5oZWxwZXJzLmFycmF5RWxlbWVudChbJ2xvYW4nLCAnYmFua19zdGF0ZW1lbnQnLCAnZmluYW5jaWFsX3JlcG9ydCddKTtcbiAgICAgICAgICBcbiAgICAgICAgICBpZiAoZmluYW5jaWFsRG9jVHlwZSA9PT0gJ2xvYW4nKSB7XG4gICAgICAgICAgICBkb2N1bWVudENvbnRlbnQgKz0gYEJVSUxESU5HIExPQU4gQUdSRUVNRU5UXG5cbkxvYW4gSUQ6IExPQU4tJHtmYWtlci5zdHJpbmcuYWxwaGFudW1lcmljKDEwKS50b1VwcGVyQ2FzZSgpfVxuTGVuZGVyOiAke2Zha2VyLmNvbXBhbnkubmFtZSgpfSBCYW5rXG5Cb3Jyb3dlcjogJHtidWlsZGluZy5uYW1lfSBCdWlsZGluZyBDb3Jwb3JhdGlvblxuTG9hbiBBbW91bnQ6ICQke2Zha2VyLm51bWJlci5pbnQoeyBtaW46IDUwMDAwMCwgbWF4OiAyNTAwMDAwIH0pLnRvTG9jYWxlU3RyaW5nKCl9XG5JbnRlcmVzdCBSYXRlOiAke2Zha2VyLm51bWJlci5mbG9hdCh7IG1pbjogMy41LCBtYXg6IDYuNSwgZnJhY3Rpb25EaWdpdHM6IDIgfSl9JVxuTG9hbiBUZXJtOiAke2Zha2VyLm51bWJlci5pbnQoeyBtaW46IDE1LCBtYXg6IDMwIH0pfSB5ZWFyc1xuTW9udGhseSBQYXltZW50OiAkJHtmYWtlci5udW1iZXIuaW50KHsgbWluOiAzMDAwLCBtYXg6IDg1MDAgfSkudG9Mb2NhbGVTdHJpbmcoKX1cblxuTG9hbiBQdXJwb3NlOiBCdWlsZGluZyBhY3F1aXNpdGlvbiBhbmQgY2FwaXRhbCBpbXByb3ZlbWVudHNcbkNvbGxhdGVyYWw6IEJ1aWxkaW5nIHByb3BlcnR5IGFuZCBpbXByb3ZlbWVudHNcbkxvYW4gRGF0ZTogJHtmYWtlci5kYXRlLnBhc3QoeyB5ZWFyczogMiB9KS50b0xvY2FsZURhdGVTdHJpbmcoKX1cblxuRmluYW5jaWFsIFRlcm1zOlxuLSBGaXhlZCByYXRlIG1vcnRnYWdlXG4tIE5vIHByZXBheW1lbnQgcGVuYWx0aWVzXG4tIEFubnVhbCBmaW5hbmNpYWwgcmVwb3J0aW5nIHJlcXVpcmVkXG4tIE1pbmltdW0gZGVidCBzZXJ2aWNlIGNvdmVyYWdlIHJhdGlvOiAxLjJ4XG5cbkxlbmRlciBSZXByZXNlbnRhdGl2ZTogJHtmYWtlci5wZXJzb24uZnVsbE5hbWUoKX1cbkJvcnJvd2VyIFJlcHJlc2VudGF0aXZlOiAke2Zha2VyLnBlcnNvbi5mdWxsTmFtZSgpfWA7XG4gICAgICAgICAgfSBlbHNlIGlmIChmaW5hbmNpYWxEb2NUeXBlID09PSAnYmFua19zdGF0ZW1lbnQnKSB7XG4gICAgICAgICAgICBkb2N1bWVudENvbnRlbnQgKz0gYEJBTksgU1RBVEVNRU5UXG5cbkFjY291bnQgSG9sZGVyOiAke2J1aWxkaW5nLm5hbWV9IEJ1aWxkaW5nIENvcnBvcmF0aW9uXG5CYW5rOiAke2Zha2VyLmNvbXBhbnkubmFtZSgpfSBCYW5rXG5BY2NvdW50IE51bWJlcjogKioqKiR7ZmFrZXIuc3RyaW5nLm51bWVyaWMoNCl9XG5TdGF0ZW1lbnQgUGVyaW9kOiAke2Zha2VyLmRhdGUucmVjZW50KHsgZGF5czogMzAgfSkudG9Mb2NhbGVEYXRlU3RyaW5nKCl9IHRvICR7ZmFrZXIuZGF0ZS5yZWNlbnQoKS50b0xvY2FsZURhdGVTdHJpbmcoKX1cblxuQmVnaW5uaW5nIEJhbGFuY2U6ICQke2Zha2VyLm51bWJlci5pbnQoeyBtaW46IDI1MDAwLCBtYXg6IDE1MDAwMCB9KS50b0xvY2FsZVN0cmluZygpfVxuVG90YWwgRGVwb3NpdHM6ICQke2Zha2VyLm51bWJlci5pbnQoeyBtaW46IDE1MDAwLCBtYXg6IDQ1MDAwIH0pLnRvTG9jYWxlU3RyaW5nKCl9XG5Ub3RhbCBXaXRoZHJhd2FsczogJCR7ZmFrZXIubnVtYmVyLmludCh7IG1pbjogMTIwMDAsIG1heDogMzUwMDAgfSkudG9Mb2NhbGVTdHJpbmcoKX1cbkVuZGluZyBCYWxhbmNlOiAkJHtmYWtlci5udW1iZXIuaW50KHsgbWluOiAzMDAwMCwgbWF4OiAxNjAwMDAgfSkudG9Mb2NhbGVTdHJpbmcoKX1cblxuUmVjZW50IFRyYW5zYWN0aW9uczpcbi0gJHtmYWtlci5kYXRlLnJlY2VudCgpLnRvTG9jYWxlRGF0ZVN0cmluZygpfTogTWFpbnRlbmFuY2UgUmVzZXJ2ZSBUcmFuc2ZlciAtICQke2Zha2VyLm51bWJlci5pbnQoeyBtaW46IDIwMDAsIG1heDogODAwMCB9KS50b0xvY2FsZVN0cmluZygpfVxuLSAke2Zha2VyLmRhdGUucmVjZW50KCkudG9Mb2NhbGVEYXRlU3RyaW5nKCl9OiBNb250aGx5IEZlZXMgQ29sbGVjdGlvbiAtICskJHtmYWtlci5udW1iZXIuaW50KHsgbWluOiA4MDAwLCBtYXg6IDI1MDAwIH0pLnRvTG9jYWxlU3RyaW5nKCl9XG4tICR7ZmFrZXIuZGF0ZS5yZWNlbnQoKS50b0xvY2FsZURhdGVTdHJpbmcoKX06IEluc3VyYW5jZSBQcmVtaXVtIC0gJCR7ZmFrZXIubnVtYmVyLmludCh7IG1pbjogMTUwMCwgbWF4OiA0NTAwIH0pLnRvTG9jYWxlU3RyaW5nKCl9XG5cbkNvbnRhY3Q6ICR7Z2VuZXJhdGVRdWViZWNQaG9uZSgpfWA7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGRvY3VtZW50Q29udGVudCArPSBgQU5OVUFMIEZJTkFOQ0lBTCBSRVBPUlRcblxuQnVpbGRpbmc6ICR7YnVpbGRpbmcubmFtZX1cblJlcG9ydCBQZXJpb2Q6ICR7ZmFrZXIuZGF0ZS5wYXN0KHsgeWVhcnM6IDEgfSkuZ2V0RnVsbFllYXIoKX1cblByZXBhcmVkIGJ5OiAke2Zha2VyLnBlcnNvbi5mdWxsTmFtZSgpfSwgUHJvcGVydHkgTWFuYWdlclxuXG5GaW5hbmNpYWwgU3VtbWFyeTpcblRvdGFsIFJldmVudWU6ICQke2Zha2VyLm51bWJlci5pbnQoeyBtaW46IDE4MDAwMCwgbWF4OiA0NTAwMDAgfSkudG9Mb2NhbGVTdHJpbmcoKX1cbi0gTW9udGhseSBGZWVzOiAkJHtmYWtlci5udW1iZXIuaW50KHsgbWluOiAxNTAwMDAsIG1heDogMzgwMDAwIH0pLnRvTG9jYWxlU3RyaW5nKCl9XG4tIFNwZWNpYWwgQXNzZXNzbWVudHM6ICQke2Zha2VyLm51bWJlci5pbnQoeyBtaW46IDEwMDAwLCBtYXg6IDUwMDAwIH0pLnRvTG9jYWxlU3RyaW5nKCl9XG4tIE90aGVyIEluY29tZTogJCR7ZmFrZXIubnVtYmVyLmludCh7IG1pbjogNTAwMCwgbWF4OiAyMDAwMCB9KS50b0xvY2FsZVN0cmluZygpfVxuXG5Ub3RhbCBFeHBlbnNlczogJCR7ZmFrZXIubnVtYmVyLmludCh7IG1pbjogMTIwMDAwLCBtYXg6IDMwMDAwMCB9KS50b0xvY2FsZVN0cmluZygpfVxuLSBNYWludGVuYW5jZTogJCR7ZmFrZXIubnVtYmVyLmludCh7IG1pbjogNDAwMDAsIG1heDogMTAwMDAwIH0pLnRvTG9jYWxlU3RyaW5nKCl9XG4tIEluc3VyYW5jZTogJCR7ZmFrZXIubnVtYmVyLmludCh7IG1pbjogMjAwMDAsIG1heDogNTAwMDAgfSkudG9Mb2NhbGVTdHJpbmcoKX1cbi0gVXRpbGl0aWVzOiAkJHtmYWtlci5udW1iZXIuaW50KHsgbWluOiAyNTAwMCwgbWF4OiA2MDAwMCB9KS50b0xvY2FsZVN0cmluZygpfVxuLSBQcm9mZXNzaW9uYWwgU2VydmljZXM6ICQke2Zha2VyLm51bWJlci5pbnQoeyBtaW46IDE1MDAwLCBtYXg6IDM1MDAwIH0pLnRvTG9jYWxlU3RyaW5nKCl9XG4tIEFkbWluaXN0cmF0aXZlOiAkJHtmYWtlci5udW1iZXIuaW50KHsgbWluOiAxMDAwMCwgbWF4OiAyNTAwMCB9KS50b0xvY2FsZVN0cmluZygpfVxuXG5OZXQgSW5jb21lOiAkJHtmYWtlci5udW1iZXIuaW50KHsgbWluOiA1MDAwMCwgbWF4OiAxNTAwMDAgfSkudG9Mb2NhbGVTdHJpbmcoKX1cblJlc2VydmUgRnVuZCBCYWxhbmNlOiAkJHtmYWtlci5udW1iZXIuaW50KHsgbWluOiA3NTAwMCwgbWF4OiAyMDAwMDAgfSkudG9Mb2NhbGVTdHJpbmcoKX1gO1xuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBkb2N1bWVudENvbnRlbnQgKz0gYFNFUlZJQ0UgQ09OVFJBQ1RcblxuQ29udHJhY3QgTnVtYmVyOiBDT04tJHtmYWtlci5zdHJpbmcuYWxwaGFudW1lcmljKDgpLnRvVXBwZXJDYXNlKCl9XG5TZXJ2aWNlIFByb3ZpZGVyOiAke2Zha2VyLmNvbXBhbnkubmFtZSgpfVxuU2VydmljZSBUeXBlOiAke2Zha2VyLmhlbHBlcnMuYXJyYXlFbGVtZW50KFsnQ2xlYW5pbmcgU2VydmljZXMnLCAnTGFuZHNjYXBpbmcnLCAnU2VjdXJpdHknLCAnTWFpbnRlbmFuY2UnXSl9XG5Db250cmFjdCBQZXJpb2Q6ICR7ZmFrZXIuZGF0ZS5wYXN0KCkudG9Mb2NhbGVEYXRlU3RyaW5nKCl9IHRvICR7ZmFrZXIuZGF0ZS5mdXR1cmUoKS50b0xvY2FsZURhdGVTdHJpbmcoKX1cbk1vbnRobHkgQ29zdDogJCR7ZmFrZXIubnVtYmVyLmludCh7IG1pbjogNTAwLCBtYXg6IDMwMDAgfSl9XG5cblNlcnZpY2UgRGV0YWlsczpcbiR7ZmFrZXIubG9yZW0ucGFyYWdyYXBoKCl9XG5cbkNvbnRhY3QgSW5mb3JtYXRpb246XG5NYW5hZ2VyOiAke2Zha2VyLnBlcnNvbi5mdWxsTmFtZSgpfVxuUGhvbmU6ICR7Z2VuZXJhdGVRdWViZWNQaG9uZSgpfVxuRW1lcmdlbmN5IENvbnRhY3Q6ICR7Z2VuZXJhdGVRdWViZWNQaG9uZSgpfVxuXG5UZXJtcyBhbmQgQ29uZGl0aW9uczpcbi0gJHtmYWtlci5sb3JlbS5zZW50ZW5jZSgpfVxuLSAke2Zha2VyLmxvcmVtLnNlbnRlbmNlKCl9YDtcbiAgICAgICAgICB9XG4gICAgICAgICAgXG4gICAgICAgICAgY29uc3QgZmlsZU5hbWUgPSBgJHtkb2NUeXBlLnR5cGV9LSR7YnVpbGRpbmcubmFtZS5yZXBsYWNlKC9cXHMrL2csICctJykudG9Mb3dlckNhc2UoKX0ke2RvY1N1ZmZpeH0udHh0YDtcbiAgICAgICAgICBjb25zdCBmaWxlUGF0aCA9IGBidWlsZGluZ3MvJHtidWlsZGluZy5pZH0vJHtmaWxlTmFtZX1gO1xuICAgICAgICAgIGNvbnN0IHsgZmlsZVNpemUgfSA9IHdyaXRlRG9jdW1lbnRGaWxlKGZpbGVQYXRoLCBkb2N1bWVudENvbnRlbnQpO1xuICAgICAgICAgIFxuICAgICAgICAgIGNvbnN0IFtjcmVhdGVkQnVpbGRpbmdEb2NdID0gYXdhaXQgZGJcbiAgICAgICAgICAgIC5pbnNlcnQoc2NoZW1hLmRvY3VtZW50cylcbiAgICAgICAgICAgIC52YWx1ZXMoe1xuICAgICAgICAgICAgICBuYW1lOiBgJHtkb2NUeXBlLm5hbWV9JHtkb2NTdWZmaXh9IC0gJHtidWlsZGluZy5uYW1lfWAsXG4gICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiBgJHtkb2NUeXBlLmRlc2NyaXB0aW9ufSBmb3IgJHtidWlsZGluZy5uYW1lfSR7ZG9jU3VmZml4ID8gYCAoRG9jdW1lbnQgJHtkb2NJbmRleCArIDF9KWAgOiAnJ31gLFxuICAgICAgICAgICAgICBkb2N1bWVudFR5cGU6IGRvY1R5cGUudHlwZSxcbiAgICAgICAgICAgICAgZmlsZVBhdGgsXG4gICAgICAgICAgICAgIGZpbGVOYW1lLFxuICAgICAgICAgICAgICBmaWxlU2l6ZSxcbiAgICAgICAgICAgICAgbWltZVR5cGU6ICd0ZXh0L3BsYWluJyxcbiAgICAgICAgICAgICAgaXNWaXNpYmxlVG9UZW5hbnRzOiBmYWxzZSwgLy8gV2lsbCBiZSBjb25maWd1cmVkIGxhdGVyIGJhc2VkIG9uIHRlbmFudCBhc3NpZ25tZW50c1xuICAgICAgICAgICAgICBidWlsZGluZ0lkOiBidWlsZGluZy5pZCxcbiAgICAgICAgICAgICAgdXBsb2FkZWRCeUlkOiBtYW5hZ2VyLmlkXG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgLnJldHVybmluZygpO1xuXG4gICAgICAgICAgY29uc29sZS5sb2coYCAgICAg4pyTIENyZWF0ZWQgYnVpbGRpbmcgZG9jdW1lbnQ6ICR7Y3JlYXRlZEJ1aWxkaW5nRG9jLmlkfSAtICR7Y3JlYXRlZEJ1aWxkaW5nRG9jLm5hbWV9ICgke2NyZWF0ZWRCdWlsZGluZ0RvYy5maWxlUGF0aH0pYCk7XG4gICAgICAgICAgdG90YWxEb2N1bWVudHMrKztcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICBcbiAgICBjb25zb2xlLmxvZyhg8J+TiiBDcmVhdGVkICR7dG90YWxEb2N1bWVudHN9IGRlbW8gZG9jdW1lbnRzIChmaWxlcyB3cml0dGVuIHRvIGRpc2spOmApO1xuICAgIGNvbnNvbGUubG9nKGAgICAtIEJpbGwgZG9jdW1lbnRzOiB+JHtiaWxsc1dpdGhEb2NzLmxlbmd0aH0gKGludm9pY2UgJiByZWNlaXB0IGZvciBBTEwgYmlsbHMpYCk7XG4gICAgY29uc29sZS5sb2coYCAgIC0gUmVzaWRlbmNlIGRvY3VtZW50czogJHtyZXNpZGVuY2VzLmxlbmd0aCAqIHJlc2lkZW5jZURvY3VtZW50VHlwZXMubGVuZ3RoICogMX0tJHtyZXNpZGVuY2VzLmxlbmd0aCAqIHJlc2lkZW5jZURvY3VtZW50VHlwZXMubGVuZ3RoICogMn0gKDEtMiBwZXIgY2F0ZWdvcnkgZm9yIEVBQ0ggcmVzaWRlbmNlKWApO1xuICAgIGNvbnNvbGUubG9nKGAgICAtIEJ1aWxkaW5nIGRvY3VtZW50czogJHtidWlsZGluZ3MubGVuZ3RoICogYnVpbGRpbmdEb2N1bWVudFR5cGVzLmxlbmd0aCAqIDF9LSR7YnVpbGRpbmdzLmxlbmd0aCAqIGJ1aWxkaW5nRG9jdW1lbnRUeXBlcy5sZW5ndGggKiAyfSAoMS0yIHBlciBjYXRlZ29yeSBmb3IgRUFDSCBidWlsZGluZylgKTtcbiAgICBcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKCfinYwgRmFpbGVkIHRvIGNyZWF0ZSBkb2N1bWVudHM6JywgZXJyb3IpO1xuICAgIHRocm93IGVycm9yO1xuICB9XG59XG5cbi8qKlxuICogQ29uZmlndXJlIGRvY3VtZW50IGFjY2VzcyBmb3IgdGVuYW50cyAtIG9ubHkgZm9yIGJ1aWxkaW5ncy9yZXNpZGVuY2VzIHRoYXQgYWN0dWFsbHkgaGF2ZSB0ZW5hbnRzXG4gKi9cbmFzeW5jIGZ1bmN0aW9uIGNvbmZpZ3VyZVRlbmFudERvY3VtZW50QWNjZXNzKHVzZXJzOiBDcmVhdGVkVXNlcltdKSB7XG4gIHRyeSB7XG4gICAgY29uc29sZS5sb2coJyAgIE1ha2luZyBzZWxlY3QgZG9jdW1lbnRzIGFjY2Vzc2libGUgdG8gdGVuYW50cy4uLicpO1xuICAgIFxuICAgIC8vIEZpbmQgYWxsIHRlbmFudHNcbiAgICBjb25zdCB0ZW5hbnRzID0gdXNlcnMuZmlsdGVyKHVzZXIgPT4gdXNlci5yb2xlID09PSAnZGVtb190ZW5hbnQnKTtcbiAgICBjb25zb2xlLmxvZyhgICAgRm91bmQgJHt0ZW5hbnRzLmxlbmd0aH0gdGVuYW50IHVzZXJzIHRvIGNvbmZpZ3VyZSBhY2Nlc3MgZm9yYCk7XG4gICAgXG4gICAgaWYgKHRlbmFudHMubGVuZ3RoID09PSAwKSB7XG4gICAgICBjb25zb2xlLmxvZygnICAgTm8gdGVuYW50cyBmb3VuZCAtIHNraXBwaW5nIHRlbmFudCBkb2N1bWVudCBhY2Nlc3MgY29uZmlndXJhdGlvbicpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBcbiAgICAvLyBHZXQgYnVpbGRpbmdzIGFuZCByZXNpZGVuY2VzIHRoYXQgaGF2ZSB0ZW5hbnRzXG4gICAgY29uc3QgdGVuYW50QnVpbGRpbmdJZHMgPSBuZXcgU2V0PHN0cmluZz4oKTtcbiAgICBjb25zdCB0ZW5hbnRSZXNpZGVuY2VJZHMgPSBuZXcgU2V0PHN0cmluZz4oKTtcbiAgICBcbiAgICBmb3IgKGNvbnN0IHRlbmFudCBvZiB0ZW5hbnRzKSB7XG4gICAgICAvLyBHZXQgdGVuYW50J3MgcmVzaWRlbmNlIGFzc2lnbm1lbnRzXG4gICAgICBjb25zdCB0ZW5hbnRSZXNpZGVuY2VzID0gYXdhaXQgZGJcbiAgICAgICAgLnNlbGVjdCh7XG4gICAgICAgICAgcmVzaWRlbmNlSWQ6IHNjaGVtYS51c2VyUmVzaWRlbmNlcy5yZXNpZGVuY2VJZFxuICAgICAgICB9KVxuICAgICAgICAuZnJvbShzY2hlbWEudXNlclJlc2lkZW5jZXMpXG4gICAgICAgIC53aGVyZShlcShzY2hlbWEudXNlclJlc2lkZW5jZXMudXNlcklkLCB0ZW5hbnQuaWQpKTtcbiAgICAgIFxuICAgICAgZm9yIChjb25zdCB1ciBvZiB0ZW5hbnRSZXNpZGVuY2VzKSB7XG4gICAgICAgIHRlbmFudFJlc2lkZW5jZUlkcy5hZGQodXIucmVzaWRlbmNlSWQpO1xuICAgICAgICBcbiAgICAgICAgLy8gR2V0IHRoZSBidWlsZGluZyBJRCBmb3IgdGhpcyByZXNpZGVuY2VcbiAgICAgICAgY29uc3QgcmVzaWRlbmNlID0gYXdhaXQgZGJcbiAgICAgICAgICAuc2VsZWN0KHtcbiAgICAgICAgICAgIGJ1aWxkaW5nSWQ6IHNjaGVtYS5yZXNpZGVuY2VzLmJ1aWxkaW5nSWRcbiAgICAgICAgICB9KVxuICAgICAgICAgIC5mcm9tKHNjaGVtYS5yZXNpZGVuY2VzKVxuICAgICAgICAgIC53aGVyZShlcShzY2hlbWEucmVzaWRlbmNlcy5pZCwgdXIucmVzaWRlbmNlSWQpKVxuICAgICAgICAgIC5saW1pdCgxKTtcbiAgICAgICAgXG4gICAgICAgIGlmIChyZXNpZGVuY2VbMF0pIHtcbiAgICAgICAgICB0ZW5hbnRCdWlsZGluZ0lkcy5hZGQocmVzaWRlbmNlWzBdLmJ1aWxkaW5nSWQpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIFxuICAgIGNvbnNvbGUubG9nKGAgICBCdWlsZGluZ3Mgd2l0aCB0ZW5hbnRzOiAke3RlbmFudEJ1aWxkaW5nSWRzLnNpemV9YCk7XG4gICAgY29uc29sZS5sb2coYCAgIFJlc2lkZW5jZXMgd2l0aCB0ZW5hbnRzOiAke3RlbmFudFJlc2lkZW5jZUlkcy5zaXplfWApO1xuICAgIFxuICAgIC8vIFVwZGF0ZSBkb2N1bWVudHMgdG8gYmUgdmlzaWJsZSB0byB0ZW5hbnRzIGluIGJ1aWxkaW5ncy9yZXNpZGVuY2VzIHdpdGggdGVuYW50c1xuICAgIGxldCB1cGRhdGVkQ291bnQgPSAwO1xuICAgIFxuICAgIC8vIEJ1aWxkaW5nLWxldmVsIGRvY3VtZW50cyB0aGF0IHRlbmFudHMgc2hvdWxkIHNlZVxuICAgIGNvbnN0IGJ1aWxkaW5nRG9jVHlwZXMgPSBbJ21lZXRpbmdfbWludXRlcycsICdwZXJtaXRzJ107XG4gICAgZm9yIChjb25zdCBidWlsZGluZ0lkIG9mIHRlbmFudEJ1aWxkaW5nSWRzKSB7XG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBkYlxuICAgICAgICAudXBkYXRlKHNjaGVtYS5kb2N1bWVudHMpXG4gICAgICAgIC5zZXQoeyBpc1Zpc2libGVUb1RlbmFudHM6IHRydWUgfSlcbiAgICAgICAgLndoZXJlKFxuICAgICAgICAgIGFuZChcbiAgICAgICAgICAgIGVxKHNjaGVtYS5kb2N1bWVudHMuYnVpbGRpbmdJZCwgYnVpbGRpbmdJZCksXG4gICAgICAgICAgICBzY2hlbWEuZG9jdW1lbnRzLmRvY3VtZW50VHlwZSA/IHNxbGAke3NjaGVtYS5kb2N1bWVudHMuZG9jdW1lbnRUeXBlfSA9IEFOWSgke2J1aWxkaW5nRG9jVHlwZXN9KWAgOiBzcWxgMT0wYFxuICAgICAgICAgIClcbiAgICAgICAgKTtcbiAgICAgIHVwZGF0ZWRDb3VudCArPSByZXN1bHQucm93Q291bnQgfHwgMDtcbiAgICB9XG4gICAgXG4gICAgLy8gUmVzaWRlbmNlLWxldmVsIGRvY3VtZW50cyB0aGF0IHRlbmFudHMgc2hvdWxkIHNlZVxuICAgIGNvbnN0IHJlc2lkZW5jZURvY1R5cGVzID0gWydsZWFzZScsICdpbnNwZWN0aW9uJ107XG4gICAgZm9yIChjb25zdCByZXNpZGVuY2VJZCBvZiB0ZW5hbnRSZXNpZGVuY2VJZHMpIHtcbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGRiXG4gICAgICAgIC51cGRhdGUoc2NoZW1hLmRvY3VtZW50cylcbiAgICAgICAgLnNldCh7IGlzVmlzaWJsZVRvVGVuYW50czogdHJ1ZSB9KVxuICAgICAgICAud2hlcmUoXG4gICAgICAgICAgYW5kKFxuICAgICAgICAgICAgZXEoc2NoZW1hLmRvY3VtZW50cy5yZXNpZGVuY2VJZCwgcmVzaWRlbmNlSWQpLFxuICAgICAgICAgICAgc2NoZW1hLmRvY3VtZW50cy5kb2N1bWVudFR5cGUgPyBzcWxgJHtzY2hlbWEuZG9jdW1lbnRzLmRvY3VtZW50VHlwZX0gPSBBTlkoJHtyZXNpZGVuY2VEb2NUeXBlc30pYCA6IHNxbGAxPTBgXG4gICAgICAgICAgKVxuICAgICAgICApO1xuICAgICAgdXBkYXRlZENvdW50ICs9IHJlc3VsdC5yb3dDb3VudCB8fCAwO1xuICAgIH1cbiAgICBcbiAgICAvLyBCaWxsIHJlY2VpcHRzIChidXQgbm90IGludm9pY2VzKSBmb3IgYnVpbGRpbmdzIHdpdGggdGVuYW50c1xuICAgIGZvciAoY29uc3QgYnVpbGRpbmdJZCBvZiB0ZW5hbnRCdWlsZGluZ0lkcykge1xuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgZGJcbiAgICAgICAgLnVwZGF0ZShzY2hlbWEuZG9jdW1lbnRzKVxuICAgICAgICAuc2V0KHsgaXNWaXNpYmxlVG9UZW5hbnRzOiB0cnVlIH0pXG4gICAgICAgIC53aGVyZShcbiAgICAgICAgICBhbmQoXG4gICAgICAgICAgICBlcShzY2hlbWEuZG9jdW1lbnRzLmJ1aWxkaW5nSWQsIGJ1aWxkaW5nSWQpLFxuICAgICAgICAgICAgZXEoc2NoZW1hLmRvY3VtZW50cy5hdHRhY2hlZFRvVHlwZSwgJ2JpbGwnKSxcbiAgICAgICAgICAgIHNjaGVtYS5kb2N1bWVudHMubmFtZSA/IHNxbGAke3NjaGVtYS5kb2N1bWVudHMubmFtZX0gTElLRSAnUmVjZWlwdCUnYCA6IHNxbGAxPTBgXG4gICAgICAgICAgKVxuICAgICAgICApO1xuICAgICAgdXBkYXRlZENvdW50ICs9IHJlc3VsdC5yb3dDb3VudCB8fCAwO1xuICAgIH1cbiAgICBcbiAgICBjb25zb2xlLmxvZyhgICAg4pyFIFVwZGF0ZWQgJHt1cGRhdGVkQ291bnR9IGRvY3VtZW50cyB0byBiZSB2aXNpYmxlIHRvIHRlbmFudHNgKTtcbiAgICBjb25zb2xlLmxvZyhgICAg8J+ThCBEb2N1bWVudCB0eXBlcyBhY2Nlc3NpYmxlIHRvIHRlbmFudHM6IG1lZXRpbmcgbWludXRlcywgcGVybWl0cywgbGVhc2VzLCBpbnNwZWN0aW9ucywgcmVjZWlwdHNgKTtcbiAgICBcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKCfinYwgRmFpbGVkIHRvIGNvbmZpZ3VyZSB0ZW5hbnQgZG9jdW1lbnQgYWNjZXNzOicsIGVycm9yKTtcbiAgICB0aHJvdyBlcnJvcjtcbiAgfVxufVxuXG4vKipcbiAqIE1haW4gZXhlY3V0aW9uIGZ1bmN0aW9uXG4gKi9cbmFzeW5jIGZ1bmN0aW9uIG1haW4oKSB7XG4gIHRyeSB7XG4gICAgY29uc29sZS5sb2coJ/CfmoAgU3RhcnRpbmcgS292ZW8gR2VzdGlvbiBEZW1vIEVudmlyb25tZW50IENyZWF0aW9uJyk7XG4gICAgY29uc29sZS5sb2coJz0nLnJlcGVhdCg2MCkpO1xuICAgIFxuICAgIC8vIFBhcnNlIENMSSBhcmd1bWVudHNcbiAgICBjb25zdCBhcmdzID0gcGFyc2VBcmd1bWVudHMoKTtcbiAgICBcbiAgICAvLyBJbml0aWFsaXplIGRhdGFiYXNlIGNvbm5lY3Rpb25cbiAgICBhd2FpdCBpbml0aWFsaXplRGF0YWJhc2UoYXJncy5kYXRhYmFzZSk7XG4gICAgXG4gICAgY29uc29sZS5sb2coYPCfk4sgQ29uZmlndXJhdGlvbjpgKTtcbiAgICBjb25zb2xlLmxvZyhgICAgT3JnYW5pemF0aW9uIFR5cGU6ICR7YXJncy50eXBlfWApO1xuICAgIGNvbnNvbGUubG9nKGAgICBPcmdhbml6YXRpb24gTmFtZTogXCIke2FyZ3MubmFtZX1cImApO1xuICAgIGNvbnNvbGUubG9nKGAgICBUYXJnZXQgRGF0YWJhc2U6ICR7YXJncy5kYXRhYmFzZSA9PT0gJ3Byb2QnID8gJ1BST0RVQ1RJT04gKERBVEFCQVNFX1VSTF9LT1ZFTyknIDogJ0RFVkVMT1BNRU5UIChEQVRBQkFTRV9VUkwpJ31gKTtcbiAgICBjb25zb2xlLmxvZygnJyk7XG4gICAgXG4gICAgLy8gU3RlcCAxOiBVcHNlcnQgT3JnYW5pemF0aW9uXG4gICAgY29uc29sZS5sb2coJ/Cfk4EgU3RlcCAxOiBVcHNlcnQgT3JnYW5pemF0aW9uJyk7XG4gICAgY29uc3Qgb3JnYW5pemF0aW9uID0gYXdhaXQgdXBzZXJ0T3JnYW5pemF0aW9uKGFyZ3MubmFtZSwgYXJncy50eXBlKTtcbiAgICBjb25zb2xlLmxvZygnJyk7XG4gICAgXG4gICAgLy8gU3RlcCAyOiBDcmVhdGUgQnVpbGRpbmdzXG4gICAgY29uc29sZS5sb2coJ/Cfj6IgU3RlcCAyOiBDcmVhdGUgQnVpbGRpbmdzJyk7XG4gICAgY29uc3QgYnVpbGRpbmdSZXN1bHQgPSBhd2FpdCBzZWVkQnVpbGRpbmdzKG9yZ2FuaXphdGlvbi5pZCk7XG4gICAgY29uc3QgYnVpbGRpbmdzID0gYnVpbGRpbmdSZXN1bHQuYnVpbGRpbmdzO1xuICAgIGNvbnN0IG5ld0J1aWxkaW5nc0NyZWF0ZWQgPSBidWlsZGluZ1Jlc3VsdC5uZXdCdWlsZGluZ3NDcmVhdGVkO1xuICAgIGNvbnNvbGUubG9nKCcnKTtcbiAgICBcbiAgICAvLyBTdGVwIDM6IENyZWF0ZSBSZXNpZGVuY2VzIChvbmx5IGZvciBuZXcgYnVpbGRpbmdzIGlmIG9yZ2FuaXphdGlvbiBhbHJlYWR5IGhhcyA1IGJ1aWxkaW5ncylcbiAgICBjb25zb2xlLmxvZygn8J+PoCBTdGVwIDM6IENyZWF0ZSBSZXNpZGVuY2VzJyk7XG4gICAgY29uc3QgcmVzaWRlbmNlcyA9IGF3YWl0IHNlZWRSZXNpZGVuY2VzKGJ1aWxkaW5ncywgbmV3QnVpbGRpbmdzQ3JlYXRlZCA9PT0gMCk7XG4gICAgY29uc29sZS5sb2coJycpO1xuICAgIFxuICAgIC8vIE9ubHkgY3JlYXRlIGFkZGl0aW9uYWwgZGF0YSBpZiB3ZSBoYXZlIG5ldyBidWlsZGluZ3Mgb3IgdGhpcyBpcyB0aGUgZmlyc3QgcnVuXG4gICAgbGV0IHVzZXJzOiBDcmVhdGVkVXNlcltdID0gW107XG4gICAgbGV0IGJpbGxzOiBhbnlbXSA9IFtdO1xuICAgIFxuICAgIGlmIChuZXdCdWlsZGluZ3NDcmVhdGVkID4gMCB8fCBidWlsZGluZ3MubGVuZ3RoIDw9IDUpIHtcbiAgICAgIC8vIFN0ZXAgNDogQ3JlYXRlIENvbW1vbiBTcGFjZXNcbiAgICAgIGNvbnNvbGUubG9nKCfwn4+b77iPIFN0ZXAgNDogQ3JlYXRlIENvbW1vbiBTcGFjZXMnKTtcbiAgICAgIGNvbnN0IGNvbW1vblNwYWNlcyA9IGF3YWl0IHNlZWRDb21tb25TcGFjZXMoYnVpbGRpbmdzKTtcbiAgICAgIGNvbnNvbGUubG9nKCcnKTtcbiAgICAgIFxuICAgICAgLy8gU3RlcCA1OiBDcmVhdGUgVXNlcnNcbiAgICAgIGNvbnNvbGUubG9nKCfwn5GlIFN0ZXAgNTogQ3JlYXRlIFVzZXJzJyk7XG4gICAgICB1c2VycyA9IGF3YWl0IHNlZWRVc2VycyhhcmdzLnR5cGUsIG9yZ2FuaXphdGlvbi5pZCwgYnVpbGRpbmdzLCByZXNpZGVuY2VzKTtcbiAgICAgIGNvbnNvbGUubG9nKCcnKTtcbiAgICAgIFxuICAgICAgLy8gU3RlcCA2OiBDcmVhdGUgQm9va2luZ3NcbiAgICAgIGNvbnNvbGUubG9nKCfwn5OFIFN0ZXAgNjogQ3JlYXRlIEJvb2tpbmdzJyk7XG4gICAgICBhd2FpdCBzZWVkQm9va2luZ3MoY29tbW9uU3BhY2VzLCB1c2Vycyk7XG4gICAgICBjb25zb2xlLmxvZygnJyk7XG4gICAgICBcbiAgICAgIC8vIFN0ZXAgNzogQ3JlYXRlIE1haW50ZW5hbmNlIERlbWFuZHNcbiAgICAgIGNvbnNvbGUubG9nKCfwn5SnIFN0ZXAgNzogQ3JlYXRlIE1haW50ZW5hbmNlIERlbWFuZHMnKTtcbiAgICAgIGF3YWl0IHNlZWRNYWludGVuYW5jZVJlcXVlc3RzKHVzZXJzKTtcbiAgICAgIGNvbnNvbGUubG9nKCcnKTtcbiAgICAgIFxuICAgICAgLy8gU3RlcCA4OiBDcmVhdGUgQmlsbHNcbiAgICAgIGNvbnNvbGUubG9nKCfwn5KwIFN0ZXAgODogQ3JlYXRlIEJpbGxzJyk7XG4gICAgICBiaWxscyA9IGF3YWl0IHNlZWRCaWxscyhidWlsZGluZ3MsIHVzZXJzKTtcbiAgICAgIGNvbnNvbGUubG9nKCcnKTtcbiAgICAgIFxuICAgICAgLy8gU3RlcCA5OiBDcmVhdGUgRG9jdW1lbnRzXG4gICAgICBjb25zb2xlLmxvZygn8J+ThCBTdGVwIDk6IENyZWF0ZSBEb2N1bWVudHMnKTtcbiAgICAgIGF3YWl0IHNlZWREb2N1bWVudHMoYmlsbHMsIGJ1aWxkaW5ncywgcmVzaWRlbmNlcywgdXNlcnMpO1xuICAgICAgY29uc29sZS5sb2coJycpO1xuICAgICAgXG4gICAgICAvLyBTdGVwIDEwOiBNYWtlIGRvY3VtZW50cyBhY2Nlc3NpYmxlIHRvIHRlbmFudHMgaW4gYnVpbGRpbmdzL3Jlc2lkZW5jZXMgd2l0aCB0ZW5hbnRzXG4gICAgICBjb25zb2xlLmxvZygn8J+TiyBTdGVwIDEwOiBDb25maWd1cmUgVGVuYW50IERvY3VtZW50IEFjY2VzcycpO1xuICAgICAgYXdhaXQgY29uZmlndXJlVGVuYW50RG9jdW1lbnRBY2Nlc3ModXNlcnMpO1xuICAgICAgY29uc29sZS5sb2coJycpO1xuICAgIH0gZWxzZSB7XG4gICAgICBjb25zb2xlLmxvZygn8J+PoiBPcmdhbml6YXRpb24gYWxyZWFkeSBoYXMgY29tcGxldGUgYnVpbGRpbmdzIGFuZCBkYXRhLiBTa2lwcGluZyBhZGRpdGlvbmFsIGRhdGEgY3JlYXRpb24uJyk7XG4gICAgICBjb25zb2xlLmxvZygn8J+ThCBPbmx5IHVwZGF0aW5nIGRvY3VtZW50cyBmb3IgZXhpc3RpbmcgYmlsbHMuLi4nKTtcbiAgICAgIFxuICAgICAgLy8gR2V0IGV4aXN0aW5nIGJpbGxzIGZvciB0aGlzIG9yZ2FuaXphdGlvblxuICAgICAgY29uc3QgZXhpc3RpbmdCaWxscyA9IGF3YWl0IGRiXG4gICAgICAgIC5zZWxlY3Qoe1xuICAgICAgICAgIGlkOiBzY2hlbWEuYmlsbHMuaWQsXG4gICAgICAgICAgYmlsbE51bWJlcjogc2NoZW1hLmJpbGxzLmJpbGxOdW1iZXIsXG4gICAgICAgICAgdGl0bGU6IHNjaGVtYS5iaWxscy50aXRsZSxcbiAgICAgICAgICBjYXRlZ29yeTogc2NoZW1hLmJpbGxzLmNhdGVnb3J5LFxuICAgICAgICAgIHZlbmRvcjogc2NoZW1hLmJpbGxzLnZlbmRvcixcbiAgICAgICAgICB0b3RhbEFtb3VudDogc2NoZW1hLmJpbGxzLnRvdGFsQW1vdW50LFxuICAgICAgICAgIGRlc2NyaXB0aW9uOiBzY2hlbWEuYmlsbHMuZGVzY3JpcHRpb24sXG4gICAgICAgICAgYnVpbGRpbmdJZDogc2NoZW1hLmJpbGxzLmJ1aWxkaW5nSWRcbiAgICAgICAgfSlcbiAgICAgICAgLmZyb20oc2NoZW1hLmJpbGxzKVxuICAgICAgICAuaW5uZXJKb2luKHNjaGVtYS5idWlsZGluZ3MsIGVxKHNjaGVtYS5iaWxscy5idWlsZGluZ0lkLCBzY2hlbWEuYnVpbGRpbmdzLmlkKSlcbiAgICAgICAgLndoZXJlKGVxKHNjaGVtYS5idWlsZGluZ3Mub3JnYW5pemF0aW9uSWQsIG9yZ2FuaXphdGlvbi5pZCkpO1xuICAgICAgXG4gICAgICAvLyBHZXQgZXhpc3RpbmcgdXNlcnMgZm9yIHRoaXMgb3JnYW5pemF0aW9uIChzaW1wbGlmaWVkIGFwcHJvYWNoKVxuICAgICAgY29uc3QgYWxsVXNlcnMgPSBhd2FpdCBkYlxuICAgICAgICAuc2VsZWN0KHtcbiAgICAgICAgICBpZDogc2NoZW1hLnVzZXJzLmlkLFxuICAgICAgICAgIGVtYWlsOiBzY2hlbWEudXNlcnMuZW1haWwsXG4gICAgICAgICAgcm9sZTogc2NoZW1hLnVzZXJzLnJvbGVcbiAgICAgICAgfSlcbiAgICAgICAgLmZyb20oc2NoZW1hLnVzZXJzKVxuICAgICAgICAud2hlcmUoZXEoc2NoZW1hLnVzZXJzLmlzQWN0aXZlLCB0cnVlKSk7XG4gICAgICBcbiAgICAgIGNvbnN0IGV4aXN0aW5nVXNlcnMgPSBhbGxVc2Vycy5maWx0ZXIodXNlciA9PiB1c2VyLnJvbGUuaW5jbHVkZXMoJ21hbmFnZXInKSk7XG4gICAgICBcbiAgICAgIGNvbnNvbGUubG9nKGAgICBGb3VuZCAke2V4aXN0aW5nVXNlcnMubGVuZ3RofSBtYW5hZ2VycyB0byBjcmVhdGUgYmlsbCBkb2N1bWVudHMuLi5gKTtcbiAgICAgIFxuICAgICAgY29uc29sZS5sb2coYCAgIEZvdW5kICR7ZXhpc3RpbmdCaWxscy5sZW5ndGh9IGV4aXN0aW5nIGJpbGxzIHRvIHByb2Nlc3MgZm9yIGRvY3VtZW50cy4uLmApO1xuICAgICAgXG4gICAgICBhd2FpdCBzZWVkRG9jdW1lbnRzKGV4aXN0aW5nQmlsbHMsIGJ1aWxkaW5ncywgcmVzaWRlbmNlcywgZXhpc3RpbmdVc2Vycy5tYXAodSA9PiAoe1xuICAgICAgICBpZDogdS5pZCxcbiAgICAgICAgZW1haWw6IHUuZW1haWwsXG4gICAgICAgIHJvbGU6IHUucm9sZSxcbiAgICAgICAgYnVpbGRpbmdJZDogbnVsbCAvLyBOb3QgbmVlZGVkIGZvciBkb2N1bWVudCBjcmVhdGlvblxuICAgICAgfSkpKTtcbiAgICAgIGNvbnNvbGUubG9nKCcnKTtcbiAgICB9XG4gICAgXG4gICAgLy8gU3VtbWFyeVxuICAgIGNvbnNvbGUubG9nKCfwn46JIERlbW8gZW52aXJvbm1lbnQgY3JlYXRlZCBzdWNjZXNzZnVsbHkhJyk7XG4gICAgY29uc29sZS5sb2coJz0nLnJlcGVhdCg2MCkpO1xuICAgIGNvbnNvbGUubG9nKGDinIUgT3JnYW5pemF0aW9uOiAke29yZ2FuaXphdGlvbi5uYW1lfSAoJHtvcmdhbml6YXRpb24udHlwZX0pYCk7XG4gICAgY29uc29sZS5sb2coYOKchSBCdWlsZGluZ3M6ICR7YnVpbGRpbmdzLmxlbmd0aH1gKTtcbiAgICBjb25zb2xlLmxvZyhg4pyFIFJlc2lkZW5jZXM6ICR7cmVzaWRlbmNlcy5sZW5ndGh9YCk7XG4gICAgY29uc29sZS5sb2coYOKchSBDb21tb24gU3BhY2VzOiBDcmVhdGVkIGZvciBlYWNoIGJ1aWxkaW5nYCk7XG4gICAgY29uc29sZS5sb2coYOKchSBVc2VyczogJHt1c2Vycy5sZW5ndGh9YCk7XG4gICAgY29uc29sZS5sb2coYOKchSBNYW5hZ2VyczogJHt1c2Vycy5maWx0ZXIodSA9PiB1LnJvbGUuaW5jbHVkZXMoJ21hbmFnZXInKSkubGVuZ3RofWApO1xuICAgIGNvbnNvbGUubG9nKGDinIUgUmVzaWRlbnRzOiAke3VzZXJzLmZpbHRlcih1ID0+IHUucm9sZS5pbmNsdWRlcygncmVzaWRlbnQnKSkubGVuZ3RofWApO1xuICAgIGNvbnNvbGUubG9nKGDinIUgQmlsbHM6ICR7YmlsbHMubGVuZ3RofSAod2l0aCBhdHRhY2hlZCBpbnZvaWNlICYgcmVjZWlwdCBkb2N1bWVudHMpYCk7XG4gICAgY29uc29sZS5sb2coJ+KchSBEb2N1bWVudHM6IENvbXByZWhlbnNpdmUgLnR4dCBkb2N1bWVudHMgd2l0aCBkZW1vIGRpc2Nsb3N1cmVzJyk7XG4gICAgY29uc29sZS5sb2coJ+KchSBCb29raW5ncyBhbmQgbWFpbnRlbmFuY2UgZGVtYW5kcyAoMi0zIGRpZmZlcmVudCBjYXRlZ29yaWVzIHBlciByZXNpZGVudCkgY3JlYXRlZCBzdWNjZXNzZnVsbHknKTtcbiAgICBjb25zb2xlLmxvZygnJyk7XG4gICAgY29uc29sZS5sb2coYPCfmoAgRGVtbyBlbnZpcm9ubWVudCBmb3IgXCIke2FyZ3MubmFtZX1cIiBpcyByZWFkeSBmb3IgdXNlIWApO1xuICAgIGNvbnNvbGUubG9nKCfwn5OLIEFsbCBkb2N1bWVudHMgaW5jbHVkZSBkZW1vIGRpc2Nsb3N1cmUgbm90aWNlcyBmb3IgZGVtb25zdHJhdGlvbiBwdXJwb3NlcycpO1xuICAgIFxuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoJ+KdjCBEZW1vIGVudmlyb25tZW50IGNyZWF0aW9uIGZhaWxlZDonLCBlcnJvcik7XG4gICAgcHJvY2Vzcy5leGl0KDEpO1xuICB9IGZpbmFsbHkge1xuICAgIC8vIENsb3NlIGRhdGFiYXNlIGNvbm5lY3Rpb25cbiAgICBhd2FpdCBjbG9zZUNvbm5lY3Rpb24oKTtcbiAgfVxufVxuXG4vLyBFeGVjdXRlIHRoZSBzY3JpcHRcbmlmIChpbXBvcnQubWV0YS51cmwgPT09IGBmaWxlOi8vJHtwcm9jZXNzLmFyZ3ZbMV19YCkge1xuICBtYWluKCkuY2F0Y2goY29uc29sZS5lcnJvcik7XG59XG5cbmV4cG9ydCBkZWZhdWx0IG1haW47Il0sInZlcnNpb24iOjN9