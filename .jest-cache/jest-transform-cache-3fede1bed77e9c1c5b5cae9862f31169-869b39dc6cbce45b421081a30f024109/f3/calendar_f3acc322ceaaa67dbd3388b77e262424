4197e7272b6e2e5ca4bca264bde29b7e
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.default = DashboardCalendarPage;
const jsx_runtime_1 = require("react/jsx-runtime");
const react_1 = require("react");
const react_query_1 = require("@tanstack/react-query");
const use_auth_1 = require("@/hooks/use-auth");
const use_language_1 = require("@/hooks/use-language");
const header_1 = require("@/components/layout/header");
const card_1 = require("@/components/ui/card");
const button_1 = require("@/components/ui/button");
const dialog_1 = require("@/components/ui/dialog");
const select_1 = require("@/components/ui/select");
const input_1 = require("@/components/ui/input");
const label_1 = require("@/components/ui/label");
const badge_1 = require("@/components/ui/badge");
const lucide_react_1 = require("lucide-react");
const calendar_view_1 = require("@/components/common-spaces/calendar-view");
/**
 *
 */
function DashboardCalendarPage() {
    const { user } = (0, use_auth_1.useAuth)();
    const { language } = (0, use_language_1.useLanguage)();
    const [selectedBuildingId, setSelectedBuildingId] = (0, react_1.useState)('all');
    const [searchQuery, setSearchQuery] = (0, react_1.useState)('');
    const [viewMode, setViewMode] = (0, react_1.useState)('month');
    const [visibleSpaces, setVisibleSpaces] = (0, react_1.useState)(new Set());
    const [isLinkDialogOpen, setIsLinkDialogOpen] = (0, react_1.useState)(false);
    const [selectedCalendarType, setSelectedCalendarType] = (0, react_1.useState)(null);
    const [showProviderStep, setShowProviderStep] = (0, react_1.useState)(false);
    const [selectedProvider, setSelectedProvider] = (0, react_1.useState)(null);
    // Fetch buildings accessible to the user
    const { data: buildingsResponse, isLoading: buildingsLoading } = (0, react_query_1.useQuery)({
        queryKey: ['/api/manager/buildings'],
        enabled: !!user,
    });
    const buildings = buildingsResponse?.buildings || [];
    // Fetch all common spaces
    const { data: allSpaces = [], isLoading: spacesLoading } = (0, react_query_1.useQuery)({
        queryKey: ['/api/common-spaces'],
        enabled: !!user,
    });
    // Filter spaces based on building and search
    const filteredSpaces = (0, react_1.useMemo)(() => {
        let spaces = allSpaces;
        // Filter by building
        if (selectedBuildingId !== 'all') {
            spaces = spaces.filter((space) => space.buildingId === selectedBuildingId);
        }
        // Filter by search query
        if (searchQuery) {
            const query = searchQuery.toLowerCase();
            spaces = spaces.filter((space) => space.name.toLowerCase().includes(query) ||
                space.description?.toLowerCase().includes(query) ||
                space.buildingName?.toLowerCase().includes(query));
        }
        return spaces;
    }, [allSpaces, selectedBuildingId, searchQuery]);
    const toggleSpaceVisibility = (spaceId) => {
        setVisibleSpaces((prev) => {
            const newSet = new Set(prev);
            if (newSet.has(spaceId)) {
                newSet.delete(spaceId);
            }
            else {
                newSet.add(spaceId);
            }
            return newSet;
        });
    };
    const showAllSpaces = () => {
        setVisibleSpaces(new Set(filteredSpaces.map((space) => space.id)));
    };
    const hideAllSpaces = () => {
        setVisibleSpaces(new Set());
    };
    const handleLinkCalendar = () => {
        // Get all visible spaces
        const visibleSpaceIds = Array.from(visibleSpaces);
        if (visibleSpaceIds.length === 0) {
            alert(language === 'fr'
                ? 'Veuillez sélectionner au moins un espace à inclure dans le calendrier.'
                : 'Please select at least one space to include in the calendar.');
            return;
        }
        // Create calendar link parameters
        const params = new URLSearchParams({
            spaces: visibleSpaceIds.join(','),
            view: viewMode,
            building: selectedBuildingId === 'all' ? '' : selectedBuildingId,
        });
        const calendarUrl = `${window.location.origin}/dashboard/calendar?${params}`;
        // Copy to clipboard
        navigator.clipboard
            .writeText(calendarUrl)
            .then(() => {
            alert(language === 'fr'
                ? 'Lien du calendrier copié dans le presse-papiers!'
                : 'Calendar link copied to clipboard!');
        })
            .catch(() => {
            // Fallback: show the URL in a prompt
            prompt(language === 'fr' ? 'Copiez ce lien de calendrier:' : 'Copy this calendar link:', calendarUrl);
        });
    };
    const handleExportCalendar = () => {
        const visibleSpaceIds = Array.from(visibleSpaces);
        if (visibleSpaceIds.length === 0) {
            alert(language === 'fr'
                ? 'Veuillez sélectionner au moins un espace à exporter.'
                : 'Please select at least one space to export.');
            return;
        }
        // Create export URL
        const params = new URLSearchParams({
            spaces: visibleSpaceIds.join(','),
            format: 'ics',
        });
        const exportUrl = `/api/common-spaces/export?${params}`;
        window.open(exportUrl, '_blank');
    };
    return ((0, jsx_runtime_1.jsxs)("div", { className: 'flex-1 flex flex-col overflow-hidden', "data-testid": 'dashboard-calendar-page', children: [(0, jsx_runtime_1.jsx)(header_1.Header, { title: language === 'fr' ? 'Calendrier des Espaces Communs' : 'Common Spaces Calendar', subtitle: language === 'fr' ? "Vue d'ensemble de tous les calendriers" : 'Overview of all calendars' }), (0, jsx_runtime_1.jsx)("div", { className: 'flex-1 overflow-auto p-6', children: (0, jsx_runtime_1.jsxs)("div", { className: 'max-w-7xl mx-auto space-y-6', children: [(0, jsx_runtime_1.jsxs)(card_1.Card, { className: 'mb-6', children: [(0, jsx_runtime_1.jsx)(card_1.CardHeader, { children: (0, jsx_runtime_1.jsxs)(card_1.CardTitle, { className: 'flex items-center justify-between', children: [(0, jsx_runtime_1.jsxs)("div", { className: 'flex items-center gap-2', children: [(0, jsx_runtime_1.jsx)(lucide_react_1.Filter, { className: 'w-5 h-5' }), language === 'fr' ? 'Filtres et Options' : 'Filters and Options'] }), (0, jsx_runtime_1.jsxs)("div", { className: 'flex items-center gap-2', children: [(0, jsx_runtime_1.jsxs)(dialog_1.Dialog, { open: isLinkDialogOpen, onOpenChange: setIsLinkDialogOpen, children: [(0, jsx_runtime_1.jsx)(dialog_1.DialogTrigger, { asChild: true, children: (0, jsx_runtime_1.jsxs)(button_1.Button, { variant: 'outline', size: 'sm', className: 'flex items-center gap-2', "data-testid": 'button-link-calendar', children: [(0, jsx_runtime_1.jsx)(lucide_react_1.ExternalLink, { className: 'w-4 h-4' }), language === 'fr' ? 'Lier calendrier' : 'Link calendar'] }) }), (0, jsx_runtime_1.jsxs)(dialog_1.DialogContent, { className: 'sm:max-w-[500px]', children: [(0, jsx_runtime_1.jsx)(dialog_1.DialogHeader, { children: (0, jsx_runtime_1.jsx)(dialog_1.DialogTitle, { children: !showProviderStep
                                                                                ? language === 'fr'
                                                                                    ? 'Que souhaitez-vous lier ?'
                                                                                    : 'What do you want to link?'
                                                                                : language === 'fr'
                                                                                    ? 'Choisir le fournisseur de calendrier'
                                                                                    : 'Choose calendar provider' }) }), (0, jsx_runtime_1.jsxs)("div", { className: 'grid gap-4 py-4', children: [!showProviderStep && ((0, jsx_runtime_1.jsxs)(jsx_runtime_1.Fragment, { children: [(0, jsx_runtime_1.jsx)("div", { className: 'text-sm text-gray-600', children: language === 'fr'
                                                                                            ? 'Sélectionnez quel type de calendrier vous souhaitez synchroniser:'
                                                                                            : 'Select which type of calendar you want to sync:' }), (0, jsx_runtime_1.jsxs)("div", { className: `flex items-center justify-between p-4 border rounded-lg cursor-pointer transition-colors ${selectedCalendarType === 'everything'
                                                                                            ? 'border-koveo-navy bg-koveo-navy/5'
                                                                                            : 'border-gray-200 hover:border-gray-300'}`, onClick: () => setSelectedCalendarType('everything'), "data-testid": 'option-everything-calendar', children: [(0, jsx_runtime_1.jsxs)("div", { children: [(0, jsx_runtime_1.jsx)("div", { className: 'font-medium', children: language === 'fr' ? 'Tout lier' : 'Link everything' }), (0, jsx_runtime_1.jsx)("div", { className: 'text-sm text-gray-500', children: language === 'fr'
                                                                                                            ? `Synchroniser tous les espaces sélectionnés (${visibleSpaces.size} espaces)`
                                                                                                            : `Sync all selected spaces (${visibleSpaces.size} spaces)` })] }), selectedCalendarType === 'everything' && ((0, jsx_runtime_1.jsx)(lucide_react_1.Check, { className: 'w-5 h-5 text-koveo-navy' }))] }), (0, jsx_runtime_1.jsxs)("div", { className: `flex items-center justify-between p-4 border rounded-lg cursor-pointer transition-colors ${selectedCalendarType === 'individual'
                                                                                            ? 'border-koveo-navy bg-koveo-navy/5'
                                                                                            : 'border-gray-200 hover:border-gray-300'}`, onClick: () => setSelectedCalendarType('individual'), "data-testid": 'option-individual-spaces', children: [(0, jsx_runtime_1.jsxs)("div", { children: [(0, jsx_runtime_1.jsx)("div", { className: 'font-medium', children: language === 'fr' ? 'Espaces individuels' : 'Individual spaces' }), (0, jsx_runtime_1.jsx)("div", { className: 'text-sm text-gray-500', children: language === 'fr'
                                                                                                            ? 'Choisir des espaces spécifiques à synchroniser'
                                                                                                            : 'Choose specific spaces to sync' })] }), selectedCalendarType === 'individual' && ((0, jsx_runtime_1.jsx)(lucide_react_1.Check, { className: 'w-5 h-5 text-koveo-navy' }))] }), selectedCalendarType === 'everything' && ((0, jsx_runtime_1.jsxs)("div", { className: 'mt-4 p-4 bg-green-50 rounded-lg border border-green-200', children: [(0, jsx_runtime_1.jsx)("div", { className: 'text-sm font-medium text-green-900 mb-2', children: language === 'fr'
                                                                                                    ? 'Configuration complète'
                                                                                                    : 'Complete configuration' }), (0, jsx_runtime_1.jsx)("div", { className: 'text-sm text-green-700', children: visibleSpaces.size > 0
                                                                                                    ? language === 'fr'
                                                                                                        ? `Cette option synchronisera tous les ${visibleSpaces.size} espaces actuellement sélectionnés avec votre calendrier externe.`
                                                                                                        : `This option will sync all ${visibleSpaces.size} currently selected spaces with your external calendar.`
                                                                                                    : language === 'fr'
                                                                                                        ? 'Aucun espace sélectionné. Veuillez en sélectionner au moins un avant de continuer.'
                                                                                                        : 'No spaces selected. Please select at least one before continuing.' })] })), selectedCalendarType === 'individual' && ((0, jsx_runtime_1.jsxs)("div", { className: 'mt-4 p-4 bg-blue-50 rounded-lg border border-blue-200', children: [(0, jsx_runtime_1.jsx)("div", { className: 'text-sm font-medium text-blue-900 mb-2', children: language === 'fr'
                                                                                                    ? 'Configuration individuelle'
                                                                                                    : 'Individual configuration' }), (0, jsx_runtime_1.jsx)("div", { className: 'text-sm text-blue-700', children: language === 'fr'
                                                                                                    ? "Vous pourrez choisir précisément quels espaces synchroniser à l'étape suivante."
                                                                                                    : 'You will be able to choose precisely which spaces to sync in the next step.' })] })), (0, jsx_runtime_1.jsxs)("div", { className: 'flex justify-end gap-2 mt-4', children: [(0, jsx_runtime_1.jsx)(button_1.Button, { variant: 'outline', onClick: () => {
                                                                                                    setIsLinkDialogOpen(false);
                                                                                                    setSelectedCalendarType(null);
                                                                                                    setShowProviderStep(false);
                                                                                                    setSelectedProvider(null);
                                                                                                }, "data-testid": 'button-cancel-link', children: language === 'fr' ? 'Annuler' : 'Cancel' }), (0, jsx_runtime_1.jsx)(button_1.Button, { onClick: () => {
                                                                                                    if (selectedCalendarType === 'everything' &&
                                                                                                        visibleSpaces.size === 0) {
                                                                                                        return; // Don't proceed if no spaces selected
                                                                                                    }
                                                                                                    if (selectedCalendarType) {
                                                                                                        setShowProviderStep(true);
                                                                                                    }
                                                                                                }, disabled: !selectedCalendarType ||
                                                                                                    (selectedCalendarType === 'everything' && visibleSpaces.size === 0), "data-testid": 'button-next-step', children: language === 'fr' ? 'Suivant' : 'Next' })] })] })), showProviderStep && ((0, jsx_runtime_1.jsxs)(jsx_runtime_1.Fragment, { children: [(0, jsx_runtime_1.jsx)("div", { className: 'text-sm text-gray-600 mb-4', children: language === 'fr'
                                                                                            ? 'Sélectionnez le fournisseur de calendrier où vous souhaitez synchroniser :'
                                                                                            : 'Select the calendar provider where you want to sync:' }), (0, jsx_runtime_1.jsxs)("div", { className: `flex items-center justify-between p-4 border rounded-lg cursor-pointer transition-colors ${selectedProvider === 'google'
                                                                                            ? 'border-koveo-navy bg-koveo-navy/5'
                                                                                            : 'border-gray-200 hover:border-gray-300'}`, onClick: () => setSelectedProvider('google'), "data-testid": 'option-google-calendar', children: [(0, jsx_runtime_1.jsxs)("div", { className: 'flex items-center gap-3', children: [(0, jsx_runtime_1.jsx)("div", { className: 'w-10 h-10 bg-red-500 rounded-full flex items-center justify-center text-white font-bold', children: "G" }), (0, jsx_runtime_1.jsxs)("div", { children: [(0, jsx_runtime_1.jsx)("div", { className: 'font-medium', children: "Google Calendar" }), (0, jsx_runtime_1.jsx)("div", { className: 'text-sm text-gray-500', children: language === 'fr'
                                                                                                                    ? 'Synchroniser avec Google Calendar'
                                                                                                                    : 'Sync with Google Calendar' })] })] }), selectedProvider === 'google' && ((0, jsx_runtime_1.jsx)(lucide_react_1.Check, { className: 'w-5 h-5 text-koveo-navy' }))] }), (0, jsx_runtime_1.jsxs)("div", { className: `flex items-center justify-between p-4 border rounded-lg cursor-pointer transition-colors ${selectedProvider === 'outlook'
                                                                                            ? 'border-koveo-navy bg-koveo-navy/5'
                                                                                            : 'border-gray-200 hover:border-gray-300'}`, onClick: () => setSelectedProvider('outlook'), "data-testid": 'option-outlook-calendar', children: [(0, jsx_runtime_1.jsxs)("div", { className: 'flex items-center gap-3', children: [(0, jsx_runtime_1.jsx)("div", { className: 'w-10 h-10 bg-blue-600 rounded-full flex items-center justify-center text-white font-bold', children: "O" }), (0, jsx_runtime_1.jsxs)("div", { children: [(0, jsx_runtime_1.jsx)("div", { className: 'font-medium', children: "Outlook Calendar" }), (0, jsx_runtime_1.jsx)("div", { className: 'text-sm text-gray-500', children: language === 'fr'
                                                                                                                    ? 'Synchroniser avec Outlook Calendar'
                                                                                                                    : 'Sync with Outlook Calendar' })] })] }), selectedProvider === 'outlook' && ((0, jsx_runtime_1.jsx)(lucide_react_1.Check, { className: 'w-5 h-5 text-koveo-navy' }))] }), (0, jsx_runtime_1.jsxs)("div", { className: `flex items-center justify-between p-4 border rounded-lg cursor-pointer transition-colors ${selectedProvider === 'apple'
                                                                                            ? 'border-koveo-navy bg-koveo-navy/5'
                                                                                            : 'border-gray-200 hover:border-gray-300'}`, onClick: () => setSelectedProvider('apple'), "data-testid": 'option-apple-calendar', children: [(0, jsx_runtime_1.jsxs)("div", { className: 'flex items-center gap-3', children: [(0, jsx_runtime_1.jsx)("div", { className: 'w-10 h-10 bg-gray-800 rounded-full flex items-center justify-center text-white font-bold' }), (0, jsx_runtime_1.jsxs)("div", { children: [(0, jsx_runtime_1.jsx)("div", { className: 'font-medium', children: "Apple Calendar" }), (0, jsx_runtime_1.jsx)("div", { className: 'text-sm text-gray-500', children: language === 'fr'
                                                                                                                    ? 'Synchroniser avec Apple Calendar'
                                                                                                                    : 'Sync with Apple Calendar' })] })] }), selectedProvider === 'apple' && ((0, jsx_runtime_1.jsx)(lucide_react_1.Check, { className: 'w-5 h-5 text-koveo-navy' }))] }), (0, jsx_runtime_1.jsxs)("div", { className: `flex items-center justify-between p-4 border rounded-lg cursor-pointer transition-colors ${selectedProvider === 'other'
                                                                                            ? 'border-koveo-navy bg-koveo-navy/5'
                                                                                            : 'border-gray-200 hover:border-gray-300'}`, onClick: () => setSelectedProvider('other'), "data-testid": 'option-other-calendar', children: [(0, jsx_runtime_1.jsxs)("div", { className: 'flex items-center gap-3', children: [(0, jsx_runtime_1.jsx)("div", { className: 'w-10 h-10 bg-gray-500 rounded-full flex items-center justify-center text-white font-bold', children: "..." }), (0, jsx_runtime_1.jsxs)("div", { children: [(0, jsx_runtime_1.jsx)("div", { className: 'font-medium', children: language === 'fr' ? 'Autre calendrier' : 'Other calendar' }), (0, jsx_runtime_1.jsx)("div", { className: 'text-sm text-gray-500', children: language === 'fr'
                                                                                                                    ? 'Utiliser un fichier ICS ou autre'
                                                                                                                    : 'Use ICS file or other' })] })] }), selectedProvider === 'other' && ((0, jsx_runtime_1.jsx)(lucide_react_1.Check, { className: 'w-5 h-5 text-koveo-navy' }))] }), selectedProvider && ((0, jsx_runtime_1.jsxs)("div", { className: 'mt-4 p-4 bg-blue-50 rounded-lg border border-blue-200', children: [(0, jsx_runtime_1.jsx)("div", { className: 'text-sm font-medium text-blue-900 mb-2', children: language === 'fr' ? 'Configuration finale' : 'Final configuration' }), (0, jsx_runtime_1.jsx)("div", { className: 'text-sm text-blue-700', children: language === 'fr'
                                                                                                    ? `Prêt à lier ${selectedCalendarType === 'everything' ? `tous les ${visibleSpaces.size} espaces sélectionnés` : 'les espaces individuels'} avec ${selectedProvider === 'google'
                                                                                                        ? 'Google Calendar'
                                                                                                        : selectedProvider === 'outlook'
                                                                                                            ? 'Outlook Calendar'
                                                                                                            : selectedProvider === 'apple'
                                                                                                                ? 'Apple Calendar'
                                                                                                                : 'votre calendrier'}.`
                                                                                                    : `Ready to link ${selectedCalendarType === 'everything' ? `all ${visibleSpaces.size} selected spaces` : 'individual spaces'} with ${selectedProvider === 'google'
                                                                                                        ? 'Google Calendar'
                                                                                                        : selectedProvider === 'outlook'
                                                                                                            ? 'Outlook Calendar'
                                                                                                            : selectedProvider === 'apple'
                                                                                                                ? 'Apple Calendar'
                                                                                                                : 'your calendar'}.` })] })), (0, jsx_runtime_1.jsxs)("div", { className: 'flex justify-between gap-2 mt-4', children: [(0, jsx_runtime_1.jsx)(button_1.Button, { variant: 'outline', onClick: () => {
                                                                                                    setShowProviderStep(false);
                                                                                                    setSelectedProvider(null);
                                                                                                }, "data-testid": 'button-back-step', children: language === 'fr' ? 'Retour' : 'Back' }), (0, jsx_runtime_1.jsxs)("div", { className: 'flex gap-2', children: [(0, jsx_runtime_1.jsx)(button_1.Button, { variant: 'outline', onClick: () => {
                                                                                                            setIsLinkDialogOpen(false);
                                                                                                            setSelectedCalendarType(null);
                                                                                                            setShowProviderStep(false);
                                                                                                            setSelectedProvider(null);
                                                                                                        }, "data-testid": 'button-cancel-provider', children: language === 'fr' ? 'Annuler' : 'Cancel' }), (0, jsx_runtime_1.jsx)(button_1.Button, { onClick: () => {
                                                                                                            // Handle final calendar linking here
                                                                                                            // Link calendar logic
                                                                                                            handleLinkCalendar();
                                                                                                            setIsLinkDialogOpen(false);
                                                                                                            setSelectedCalendarType(null);
                                                                                                            setShowProviderStep(false);
                                                                                                            setSelectedProvider(null);
                                                                                                        }, disabled: !selectedProvider, "data-testid": 'button-confirm-final-link', children: language === 'fr' ? 'Lier calendrier' : 'Link calendar' })] })] })] }))] })] })] }), (0, jsx_runtime_1.jsxs)(button_1.Button, { variant: 'outline', size: 'sm', onClick: handleExportCalendar, className: 'flex items-center gap-2', "data-testid": 'button-export-calendar', children: [(0, jsx_runtime_1.jsx)(lucide_react_1.Download, { className: 'w-4 h-4' }), language === 'fr' ? 'Exporter' : 'Export'] })] })] }) }), (0, jsx_runtime_1.jsxs)(card_1.CardContent, { children: [(0, jsx_runtime_1.jsxs)("div", { className: 'grid grid-cols-1 md:grid-cols-3 gap-4 mb-4', children: [(0, jsx_runtime_1.jsxs)("div", { className: 'space-y-2', children: [(0, jsx_runtime_1.jsx)(label_1.Label, { children: language === 'fr' ? 'Bâtiment' : 'Building' }), (0, jsx_runtime_1.jsxs)(select_1.Select, { value: selectedBuildingId, onValueChange: setSelectedBuildingId, children: [(0, jsx_runtime_1.jsx)(select_1.SelectTrigger, { "data-testid": 'select-building-filter', children: (0, jsx_runtime_1.jsx)(select_1.SelectValue, {}) }), (0, jsx_runtime_1.jsxs)(select_1.SelectContent, { children: [(0, jsx_runtime_1.jsx)(select_1.SelectItem, { value: 'all', children: language === 'fr' ? 'Tous les bâtiments' : 'All buildings' }), buildings.map((building) => ((0, jsx_runtime_1.jsxs)(select_1.SelectItem, { value: building.id, children: [building.name, " - ", building.address] }, building.id)))] })] })] }), (0, jsx_runtime_1.jsxs)("div", { className: 'space-y-2', children: [(0, jsx_runtime_1.jsx)(label_1.Label, { children: language === 'fr' ? 'Rechercher un espace' : 'Search spaces' }), (0, jsx_runtime_1.jsx)(input_1.Input, { type: 'text', placeholder: language === 'fr' ? "Nom de l'espace..." : 'Space name...', value: searchQuery, onChange: (e) => setSearchQuery(e.target.value), "data-testid": 'input-search-spaces' })] }), (0, jsx_runtime_1.jsxs)("div", { className: 'space-y-2', children: [(0, jsx_runtime_1.jsx)(label_1.Label, { children: language === 'fr' ? 'Vue' : 'View' }), (0, jsx_runtime_1.jsxs)(select_1.Select, { value: viewMode, onValueChange: (value) => setViewMode(value), children: [(0, jsx_runtime_1.jsx)(select_1.SelectTrigger, { "data-testid": 'select-view-mode', children: (0, jsx_runtime_1.jsx)(select_1.SelectValue, {}) }), (0, jsx_runtime_1.jsxs)(select_1.SelectContent, { children: [(0, jsx_runtime_1.jsx)(select_1.SelectItem, { value: 'month', children: language === 'fr' ? 'Mensuelle' : 'Monthly' }), (0, jsx_runtime_1.jsx)(select_1.SelectItem, { value: 'week', children: language === 'fr' ? 'Hebdomadaire' : 'Weekly' })] })] })] })] }), (0, jsx_runtime_1.jsxs)("div", { className: 'flex items-center justify-between border-t pt-4', children: [(0, jsx_runtime_1.jsxs)("div", { className: 'flex items-center gap-2', children: [(0, jsx_runtime_1.jsxs)(button_1.Button, { variant: 'outline', size: 'sm', onClick: showAllSpaces, className: 'flex items-center gap-2', "data-testid": 'button-show-all', children: [(0, jsx_runtime_1.jsx)(lucide_react_1.Eye, { className: 'w-4 h-4' }), language === 'fr' ? 'Tout afficher' : 'Show all'] }), (0, jsx_runtime_1.jsxs)(button_1.Button, { variant: 'outline', size: 'sm', onClick: hideAllSpaces, className: 'flex items-center gap-2', "data-testid": 'button-hide-all', children: [(0, jsx_runtime_1.jsx)(lucide_react_1.EyeOff, { className: 'w-4 h-4' }), language === 'fr' ? 'Tout masquer' : 'Hide all'] })] }), (0, jsx_runtime_1.jsx)("div", { className: 'text-sm text-gray-600', children: language === 'fr'
                                                        ? `${visibleSpaces.size} espace(s) affiché(s) sur ${filteredSpaces.length}`
                                                        : `${visibleSpaces.size} space(s) shown out of ${filteredSpaces.length}` })] })] })] }), (0, jsx_runtime_1.jsxs)(card_1.Card, { className: 'mb-6', children: [(0, jsx_runtime_1.jsx)(card_1.CardHeader, { children: (0, jsx_runtime_1.jsxs)(card_1.CardTitle, { className: 'flex items-center gap-2', children: [(0, jsx_runtime_1.jsx)(lucide_react_1.Building, { className: 'w-5 h-5' }), language === 'fr' ? 'Espaces Communs' : 'Common Spaces'] }) }), (0, jsx_runtime_1.jsxs)(card_1.CardContent, { children: [(0, jsx_runtime_1.jsx)("div", { className: 'grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3', children: filteredSpaces.map((space) => {
                                                const isVisible = visibleSpaces.has(space.id);
                                                const building = buildings.find((b) => b.id === space.buildingId);
                                                return ((0, jsx_runtime_1.jsx)("div", { className: `p-3 rounded-lg border cursor-pointer transition-all ${isVisible
                                                        ? 'border-blue-200 bg-blue-50 shadow-sm'
                                                        : 'border-gray-200 hover:border-gray-300'}`, onClick: () => toggleSpaceVisibility(space.id), "data-testid": `space-card-${space.id}`, children: (0, jsx_runtime_1.jsxs)("div", { className: 'flex items-start justify-between', children: [(0, jsx_runtime_1.jsxs)("div", { className: 'flex-1', children: [(0, jsx_runtime_1.jsx)("h3", { className: 'font-medium text-gray-900', children: space.name }), building && ((0, jsx_runtime_1.jsxs)("p", { className: 'text-xs text-gray-500 flex items-center gap-1 mt-1', children: [(0, jsx_runtime_1.jsx)(lucide_react_1.MapPin, { className: 'w-3 h-3' }), building.name] })), space.description && ((0, jsx_runtime_1.jsx)("p", { className: 'text-xs text-gray-600 mt-1', children: space.description }))] }), (0, jsx_runtime_1.jsxs)("div", { className: 'flex items-center gap-2', children: [!space.isReservable && ((0, jsx_runtime_1.jsx)(badge_1.Badge, { variant: 'secondary', className: 'text-xs', children: language === 'fr' ? 'Non réservable' : 'Not bookable' })), isVisible ? ((0, jsx_runtime_1.jsx)(lucide_react_1.Eye, { className: 'w-4 h-4 text-blue-600' })) : ((0, jsx_runtime_1.jsx)(lucide_react_1.EyeOff, { className: 'w-4 h-4 text-gray-400' }))] })] }) }, space.id));
                                            }) }), filteredSpaces.length === 0 && ((0, jsx_runtime_1.jsx)("div", { className: 'text-center py-8 text-gray-500', children: language === 'fr'
                                                ? 'Aucun espace trouvé avec les filtres sélectionnés.'
                                                : 'No spaces found with the selected filters.' }))] })] }), visibleSpaces.size > 0 && ((0, jsx_runtime_1.jsx)("div", { className: 'space-y-6', children: Array.from(visibleSpaces).map((spaceId) => {
                                const space = filteredSpaces.find((s) => s.id === spaceId);
                                if (!space) {
                                    return null;
                                }
                                const building = buildings.find((b) => b.id === space.buildingId);
                                return ((0, jsx_runtime_1.jsxs)(card_1.Card, { children: [(0, jsx_runtime_1.jsx)(card_1.CardHeader, { children: (0, jsx_runtime_1.jsxs)(card_1.CardTitle, { className: 'flex items-center justify-between', children: [(0, jsx_runtime_1.jsxs)("div", { className: 'flex items-center gap-2', children: [(0, jsx_runtime_1.jsx)(lucide_react_1.Calendar, { className: 'w-5 h-5' }), (0, jsx_runtime_1.jsxs)("div", { children: [(0, jsx_runtime_1.jsx)("span", { children: space.name }), building && ((0, jsx_runtime_1.jsxs)("span", { className: 'text-sm font-normal text-gray-500 ml-2', children: ["\u2022 ", building.name] }))] })] }), !space.isReservable && ((0, jsx_runtime_1.jsx)(badge_1.Badge, { variant: 'secondary', children: language === 'fr' ? 'Non réservable' : 'Not bookable' }))] }) }), (0, jsx_runtime_1.jsx)(card_1.CardContent, { children: (0, jsx_runtime_1.jsx)(calendar_view_1.CalendarView, { mode: 'space', spaceId: spaceId, buildingId: space.buildingId }) })] }, spaceId));
                            }) })), visibleSpaces.size === 0 && ((0, jsx_runtime_1.jsx)(card_1.Card, { children: (0, jsx_runtime_1.jsxs)(card_1.CardContent, { className: 'text-center py-12', children: [(0, jsx_runtime_1.jsx)(lucide_react_1.Calendar, { className: 'w-16 h-16 mx-auto mb-4 text-gray-300' }), (0, jsx_runtime_1.jsx)("h3", { className: 'text-lg font-medium text-gray-900 mb-2', children: language === 'fr' ? 'Aucun calendrier sélectionné' : 'No calendars selected' }), (0, jsx_runtime_1.jsx)("p", { className: 'text-gray-600 mb-4', children: language === 'fr'
                                            ? 'Sélectionnez des espaces ci-dessus pour afficher leurs calendriers.'
                                            : 'Select spaces above to display their calendars.' }), (0, jsx_runtime_1.jsxs)(button_1.Button, { onClick: showAllSpaces, disabled: filteredSpaces.length === 0, className: 'flex items-center gap-2', "data-testid": 'button-show-all-bottom', children: [(0, jsx_runtime_1.jsx)(lucide_react_1.Eye, { className: 'w-4 h-4' }), language === 'fr' ? 'Afficher tous les calendriers' : 'Show all calendars'] })] }) }))] }) })] }));
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiL2hvbWUvcnVubmVyL3dvcmtzcGFjZS9jbGllbnQvc3JjL3BhZ2VzL2Rhc2hib2FyZC9jYWxlbmRhci50c3giLCJtYXBwaW5ncyI6Ijs7QUFnRUEsd0NBbXVCQzs7QUFueUJELGlDQUEwQztBQUMxQyx1REFBaUQ7QUFDakQsK0NBQTJDO0FBQzNDLHVEQUFtRDtBQUNuRCx1REFBb0Q7QUFDcEQsK0NBQWdGO0FBQ2hGLG1EQUFnRDtBQUNoRCxtREFNZ0M7QUFDaEMsbURBTWdDO0FBQ2hDLGlEQUE4QztBQUM5QyxpREFBOEM7QUFDOUMsaURBQThDO0FBRTlDLCtDQVVzQjtBQUN0Qiw0RUFBd0U7QUF5QnhFOztHQUVHO0FBQ0gsU0FBd0IscUJBQXFCO0lBQzNDLE1BQU0sRUFBRSxJQUFJLEVBQUUsR0FBRyxJQUFBLGtCQUFPLEdBQUUsQ0FBQztJQUMzQixNQUFNLEVBQUUsUUFBUSxFQUFFLEdBQUcsSUFBQSwwQkFBVyxHQUFFLENBQUM7SUFDbkMsTUFBTSxDQUFDLGtCQUFrQixFQUFFLHFCQUFxQixDQUFDLEdBQUcsSUFBQSxnQkFBUSxFQUFTLEtBQUssQ0FBQyxDQUFDO0lBQzVFLE1BQU0sQ0FBQyxXQUFXLEVBQUUsY0FBYyxDQUFDLEdBQUcsSUFBQSxnQkFBUSxFQUFDLEVBQUUsQ0FBQyxDQUFDO0lBQ25ELE1BQU0sQ0FBQyxRQUFRLEVBQUUsV0FBVyxDQUFDLEdBQUcsSUFBQSxnQkFBUSxFQUFtQixPQUFPLENBQUMsQ0FBQztJQUNwRSxNQUFNLENBQUMsYUFBYSxFQUFFLGdCQUFnQixDQUFDLEdBQUcsSUFBQSxnQkFBUSxFQUFjLElBQUksR0FBRyxFQUFFLENBQUMsQ0FBQztJQUMzRSxNQUFNLENBQUMsZ0JBQWdCLEVBQUUsbUJBQW1CLENBQUMsR0FBRyxJQUFBLGdCQUFRLEVBQUMsS0FBSyxDQUFDLENBQUM7SUFDaEUsTUFBTSxDQUFDLG9CQUFvQixFQUFFLHVCQUF1QixDQUFDLEdBQUcsSUFBQSxnQkFBUSxFQUFnQixJQUFJLENBQUMsQ0FBQztJQUN0RixNQUFNLENBQUMsZ0JBQWdC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QztBQUNKLENBQUMiLCJuYW1lcyI6W10sInNvdXJjZXMiOlsiL2hvbWUvcnVubmVyL3dvcmtzcGFjZS9jbGllbnQvc3JjL3BhZ2VzL2Rhc2hib2FyZC9jYWxlbmRhci50c3giXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgdXNlU3RhdGUsIHVzZU1lbW8gfSBmcm9tICdyZWFjdCc7XG5pbXBvcnQgeyB1c2VRdWVyeSB9IGZyb20gJ0B0YW5zdGFjay9yZWFjdC1xdWVyeSc7XG5pbXBvcnQgeyB1c2VBdXRoIH0gZnJvbSAnQC9ob29rcy91c2UtYXV0aCc7XG5pbXBvcnQgeyB1c2VMYW5ndWFnZSB9IGZyb20gJ0AvaG9va3MvdXNlLWxhbmd1YWdlJztcbmltcG9ydCB7IEhlYWRlciB9IGZyb20gJ0AvY29tcG9uZW50cy9sYXlvdXQvaGVhZGVyJztcbmltcG9ydCB7IENhcmQsIENhcmRDb250ZW50LCBDYXJkSGVhZGVyLCBDYXJkVGl0bGUgfSBmcm9tICdAL2NvbXBvbmVudHMvdWkvY2FyZCc7XG5pbXBvcnQgeyBCdXR0b24gfSBmcm9tICdAL2NvbXBvbmVudHMvdWkvYnV0dG9uJztcbmltcG9ydCB7XG4gIERpYWxvZyxcbiAgRGlhbG9nQ29udGVudCxcbiAgRGlhbG9nSGVhZGVyLFxuICBEaWFsb2dUaXRsZSxcbiAgRGlhbG9nVHJpZ2dlcixcbn0gZnJvbSAnQC9jb21wb25lbnRzL3VpL2RpYWxvZyc7XG5pbXBvcnQge1xuICBTZWxlY3QsXG4gIFNlbGVjdENvbnRlbnQsXG4gIFNlbGVjdEl0ZW0sXG4gIFNlbGVjdFRyaWdnZXIsXG4gIFNlbGVjdFZhbHVlLFxufSBmcm9tICdAL2NvbXBvbmVudHMvdWkvc2VsZWN0JztcbmltcG9ydCB7IElucHV0IH0gZnJvbSAnQC9jb21wb25lbnRzL3VpL2lucHV0JztcbmltcG9ydCB7IExhYmVsIH0gZnJvbSAnQC9jb21wb25lbnRzL3VpL2xhYmVsJztcbmltcG9ydCB7IEJhZGdlIH0gZnJvbSAnQC9jb21wb25lbnRzL3VpL2JhZGdlJztcbmltcG9ydCB7IFRhYnMsIFRhYnNDb250ZW50LCBUYWJzTGlzdCwgVGFic1RyaWdnZXIgfSBmcm9tICdAL2NvbXBvbmVudHMvdWkvdGFicyc7XG5pbXBvcnQge1xuICBDYWxlbmRhciBhcyBDYWxlbmRhckljb24sXG4gIEJ1aWxkaW5nLFxuICBFeHRlcm5hbExpbmssXG4gIERvd25sb2FkLFxuICBGaWx0ZXIsXG4gIEV5ZSxcbiAgRXllT2ZmLFxuICBNYXBQaW4sXG4gIENoZWNrLFxufSBmcm9tICdsdWNpZGUtcmVhY3QnO1xuaW1wb3J0IHsgQ2FsZW5kYXJWaWV3IH0gZnJvbSAnQC9jb21wb25lbnRzL2NvbW1vbi1zcGFjZXMvY2FsZW5kYXItdmlldyc7XG5cbi8qKlxuICpcbiAqL1xuaW50ZXJmYWNlIEJ1aWxkaW5nIHtcbiAgaWQ6IHN0cmluZztcbiAgbmFtZTogc3RyaW5nO1xuICBhZGRyZXNzOiBzdHJpbmc7XG4gIGNpdHk6IHN0cmluZztcbn1cblxuLyoqXG4gKlxuICovXG5pbnRlcmZhY2UgQ29tbW9uU3BhY2Uge1xuICBpZDogc3RyaW5nO1xuICBuYW1lOiBzdHJpbmc7XG4gIGRlc2NyaXB0aW9uPzogc3RyaW5nO1xuICBidWlsZGluZ0lkOiBzdHJpbmc7XG4gIGJ1aWxkaW5nTmFtZT86IHN0cmluZztcbiAgaXNSZXNlcnZhYmxlOiBib29sZWFuO1xuICBjYXBhY2l0eT86IG51bWJlcjtcbn1cblxuLyoqXG4gKlxuICovXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBEYXNoYm9hcmRDYWxlbmRhclBhZ2UoKSB7XG4gIGNvbnN0IHsgdXNlciB9ID0gdXNlQXV0aCgpO1xuICBjb25zdCB7IGxhbmd1YWdlIH0gPSB1c2VMYW5ndWFnZSgpO1xuICBjb25zdCBbc2VsZWN0ZWRCdWlsZGluZ0lkLCBzZXRTZWxlY3RlZEJ1aWxkaW5nSWRdID0gdXNlU3RhdGU8c3RyaW5nPignYWxsJyk7XG4gIGNvbnN0IFtzZWFyY2hRdWVyeSwgc2V0U2VhcmNoUXVlcnldID0gdXNlU3RhdGUoJycpO1xuICBjb25zdCBbdmlld01vZGUsIHNldFZpZXdNb2RlXSA9IHVzZVN0YXRlPCdtb250aCcgfCAnd2Vlayc+KCdtb250aCcpO1xuICBjb25zdCBbdmlzaWJsZVNwYWNlcywgc2V0VmlzaWJsZVNwYWNlc10gPSB1c2VTdGF0ZTxTZXQ8c3RyaW5nPj4obmV3IFNldCgpKTtcbiAgY29uc3QgW2lzTGlua0RpYWxvZ09wZW4sIHNldElzTGlua0RpYWxvZ09wZW5dID0gdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBbc2VsZWN0ZWRDYWxlbmRhclR5cGUsIHNldFNlbGVjdGVkQ2FsZW5kYXJUeXBlXSA9IHVzZVN0YXRlPHN0cmluZyB8IG51bGw+KG51bGwpO1xuICBjb25zdCBbc2hvd1Byb3ZpZGVyU3RlcCwgc2V0U2hvd1Byb3ZpZGVyU3RlcF0gPSB1c2VTdGF0ZShmYWxzZSk7XG4gIGNvbnN0IFtzZWxlY3RlZFByb3ZpZGVyLCBzZXRTZWxlY3RlZFByb3ZpZGVyXSA9IHVzZVN0YXRlPHN0cmluZyB8IG51bGw+KG51bGwpO1xuXG4gIC8vIEZldGNoIGJ1aWxkaW5ncyBhY2Nlc3NpYmxlIHRvIHRoZSB1c2VyXG4gIGNvbnN0IHsgZGF0YTogYnVpbGRpbmdzUmVzcG9uc2UsIGlzTG9hZGluZzogYnVpbGRpbmdzTG9hZGluZyB9ID0gdXNlUXVlcnk8e1xuICAgIGJ1aWxkaW5nczogQnVpbGRpbmdbXTtcbiAgfT4oe1xuICAgIHF1ZXJ5S2V5OiBbJy9hcGkvbWFuYWdlci9idWlsZGluZ3MnXSxcbiAgICBlbmFibGVkOiAhIXVzZXIsXG4gIH0pO1xuXG4gIGNvbnN0IGJ1aWxkaW5ncyA9IGJ1aWxkaW5nc1Jlc3BvbnNlPy5idWlsZGluZ3MgfHwgW107XG5cbiAgLy8gRmV0Y2ggYWxsIGNvbW1vbiBzcGFjZXNcbiAgY29uc3QgeyBkYXRhOiBhbGxTcGFjZXMgPSBbXSwgaXNMb2FkaW5nOiBzcGFjZXNMb2FkaW5nIH0gPSB1c2VRdWVyeTxDb21tb25TcGFjZVtdPih7XG4gICAgcXVlcnlLZXk6IFsnL2FwaS9jb21tb24tc3BhY2VzJ10sXG4gICAgZW5hYmxlZDogISF1c2VyLFxuICB9KTtcblxuICAvLyBGaWx0ZXIgc3BhY2VzIGJhc2VkIG9uIGJ1aWxkaW5nIGFuZCBzZWFyY2hcbiAgY29uc3QgZmlsdGVyZWRTcGFjZXMgPSB1c2VNZW1vKCgpID0+IHtcbiAgICBsZXQgc3BhY2VzID0gYWxsU3BhY2VzO1xuXG4gICAgLy8gRmlsdGVyIGJ5IGJ1aWxkaW5nXG4gICAgaWYgKHNlbGVjdGVkQnVpbGRpbmdJZCAhPT0gJ2FsbCcpIHtcbiAgICAgIHNwYWNlcyA9IHNwYWNlcy5maWx0ZXIoKHNwYWNlKSA9PiBzcGFjZS5idWlsZGluZ0lkID09PSBzZWxlY3RlZEJ1aWxkaW5nSWQpO1xuICAgIH1cblxuICAgIC8vIEZpbHRlciBieSBzZWFyY2ggcXVlcnlcbiAgICBpZiAoc2VhcmNoUXVlcnkpIHtcbiAgICAgIGNvbnN0IHF1ZXJ5ID0gc2VhcmNoUXVlcnkudG9Mb3dlckNhc2UoKTtcbiAgICAgIHNwYWNlcyA9IHNwYWNlcy5maWx0ZXIoXG4gICAgICAgIChzcGFjZSkgPT5cbiAgICAgICAgICBzcGFjZS5uYW1lLnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMocXVlcnkpIHx8XG4gICAgICAgICAgc3BhY2UuZGVzY3JpcHRpb24/LnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMocXVlcnkpIHx8XG4gICAgICAgICAgc3BhY2UuYnVpbGRpbmdOYW1lPy50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKHF1ZXJ5KVxuICAgICAgKTtcbiAgICB9XG5cbiAgICByZXR1cm4gc3BhY2VzO1xuICB9LCBbYWxsU3BhY2VzLCBzZWxlY3RlZEJ1aWxkaW5nSWQsIHNlYXJjaFF1ZXJ5XSk7XG5cbiAgY29uc3QgdG9nZ2xlU3BhY2VWaXNpYmlsaXR5ID0gKHNwYWNlSWQ6IHN0cmluZykgPT4ge1xuICAgIHNldFZpc2libGVTcGFjZXMoKHByZXYpID0+IHtcbiAgICAgIGNvbnN0IG5ld1NldCA9IG5ldyBTZXQocHJldik7XG4gICAgICBpZiAobmV3U2V0LmhhcyhzcGFjZUlkKSkge1xuICAgICAgICBuZXdTZXQuZGVsZXRlKHNwYWNlSWQpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgbmV3U2V0LmFkZChzcGFjZUlkKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBuZXdTZXQ7XG4gICAgfSk7XG4gIH07XG5cbiAgY29uc3Qgc2hvd0FsbFNwYWNlcyA9ICgpID0+IHtcbiAgICBzZXRWaXNpYmxlU3BhY2VzKG5ldyBTZXQoZmlsdGVyZWRTcGFjZXMubWFwKChzcGFjZSkgPT4gc3BhY2UuaWQpKSk7XG4gIH07XG5cbiAgY29uc3QgaGlkZUFsbFNwYWNlcyA9ICgpID0+IHtcbiAgICBzZXRWaXNpYmxlU3BhY2VzKG5ldyBTZXQoKSk7XG4gIH07XG5cbiAgY29uc3QgaGFuZGxlTGlua0NhbGVuZGFyID0gKCkgPT4ge1xuICAgIC8vIEdldCBhbGwgdmlzaWJsZSBzcGFjZXNcbiAgICBjb25zdCB2aXNpYmxlU3BhY2VJZHMgPSBBcnJheS5mcm9tKHZpc2libGVTcGFjZXMpO1xuICAgIGlmICh2aXNpYmxlU3BhY2VJZHMubGVuZ3RoID09PSAwKSB7XG4gICAgICBhbGVydChcbiAgICAgICAgbGFuZ3VhZ2UgPT09ICdmcidcbiAgICAgICAgICA/ICdWZXVpbGxleiBzw6lsZWN0aW9ubmVyIGF1IG1vaW5zIHVuIGVzcGFjZSDDoCBpbmNsdXJlIGRhbnMgbGUgY2FsZW5kcmllci4nXG4gICAgICAgICAgOiAnUGxlYXNlIHNlbGVjdCBhdCBsZWFzdCBvbmUgc3BhY2UgdG8gaW5jbHVkZSBpbiB0aGUgY2FsZW5kYXIuJ1xuICAgICAgKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICAvLyBDcmVhdGUgY2FsZW5kYXIgbGluayBwYXJhbWV0ZXJzXG4gICAgY29uc3QgcGFyYW1zID0gbmV3IFVSTFNlYXJjaFBhcmFtcyh7XG4gICAgICBzcGFjZXM6IHZpc2libGVTcGFjZUlkcy5qb2luKCcsJyksXG4gICAgICB2aWV3OiB2aWV3TW9kZSxcbiAgICAgIGJ1aWxkaW5nOiBzZWxlY3RlZEJ1aWxkaW5nSWQgPT09ICdhbGwnID8gJycgOiBzZWxlY3RlZEJ1aWxkaW5nSWQsXG4gICAgfSk7XG5cbiAgICBjb25zdCBjYWxlbmRhclVybCA9IGAke3dpbmRvdy5sb2NhdGlvbi5vcmlnaW59L2Rhc2hib2FyZC9jYWxlbmRhcj8ke3BhcmFtc31gO1xuXG4gICAgLy8gQ29weSB0byBjbGlwYm9hcmRcbiAgICBuYXZpZ2F0b3IuY2xpcGJvYXJkXG4gICAgICAud3JpdGVUZXh0KGNhbGVuZGFyVXJsKVxuICAgICAgLnRoZW4oKCkgPT4ge1xuICAgICAgICBhbGVydChcbiAgICAgICAgICBsYW5ndWFnZSA9PT0gJ2ZyJ1xuICAgICAgICAgICAgPyAnTGllbiBkdSBjYWxlbmRyaWVyIGNvcGnDqSBkYW5zIGxlIHByZXNzZS1wYXBpZXJzISdcbiAgICAgICAgICAgIDogJ0NhbGVuZGFyIGxpbmsgY29waWVkIHRvIGNsaXBib2FyZCEnXG4gICAgICAgICk7XG4gICAgICB9KVxuICAgICAgLmNhdGNoKCgpID0+IHtcbiAgICAgICAgLy8gRmFsbGJhY2s6IHNob3cgdGhlIFVSTCBpbiBhIHByb21wdFxuICAgICAgICBwcm9tcHQoXG4gICAgICAgICAgbGFuZ3VhZ2UgPT09ICdmcicgPyAnQ29waWV6IGNlIGxpZW4gZGUgY2FsZW5kcmllcjonIDogJ0NvcHkgdGhpcyBjYWxlbmRhciBsaW5rOicsXG4gICAgICAgICAgY2FsZW5kYXJVcmxcbiAgICAgICAgKTtcbiAgICAgIH0pO1xuICB9O1xuXG4gIGNvbnN0IGhhbmRsZUV4cG9ydENhbGVuZGFyID0gKCkgPT4ge1xuICAgIGNvbnN0IHZpc2libGVTcGFjZUlkcyA9IEFycmF5LmZyb20odmlzaWJsZVNwYWNlcyk7XG4gICAgaWYgKHZpc2libGVTcGFjZUlkcy5sZW5ndGggPT09IDApIHtcbiAgICAgIGFsZXJ0KFxuICAgICAgICBsYW5ndWFnZSA9PT0gJ2ZyJ1xuICAgICAgICAgID8gJ1ZldWlsbGV6IHPDqWxlY3Rpb25uZXIgYXUgbW9pbnMgdW4gZXNwYWNlIMOgIGV4cG9ydGVyLidcbiAgICAgICAgICA6ICdQbGVhc2Ugc2VsZWN0IGF0IGxlYXN0IG9uZSBzcGFjZSB0byBleHBvcnQuJ1xuICAgICAgKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICAvLyBDcmVhdGUgZXhwb3J0IFVSTFxuICAgIGNvbnN0IHBhcmFtcyA9IG5ldyBVUkxTZWFyY2hQYXJhbXMoe1xuICAgICAgc3BhY2VzOiB2aXNpYmxlU3BhY2VJZHMuam9pbignLCcpLFxuICAgICAgZm9ybWF0OiAnaWNzJyxcbiAgICB9KTtcblxuICAgIGNvbnN0IGV4cG9ydFVybCA9IGAvYXBpL2NvbW1vbi1zcGFjZXMvZXhwb3J0PyR7cGFyYW1zfWA7XG4gICAgd2luZG93Lm9wZW4oZXhwb3J0VXJsLCAnX2JsYW5rJyk7XG4gIH07XG5cbiAgcmV0dXJuIChcbiAgICA8ZGl2IGNsYXNzTmFtZT0nZmxleC0xIGZsZXggZmxleC1jb2wgb3ZlcmZsb3ctaGlkZGVuJyBkYXRhLXRlc3RpZD0nZGFzaGJvYXJkLWNhbGVuZGFyLXBhZ2UnPlxuICAgICAgPEhlYWRlclxuICAgICAgICB0aXRsZT17bGFuZ3VhZ2UgPT09ICdmcicgPyAnQ2FsZW5kcmllciBkZXMgRXNwYWNlcyBDb21tdW5zJyA6ICdDb21tb24gU3BhY2VzIENhbGVuZGFyJ31cbiAgICAgICAgc3VidGl0bGU9e1xuICAgICAgICAgIGxhbmd1YWdlID09PSAnZnInID8gXCJWdWUgZCdlbnNlbWJsZSBkZSB0b3VzIGxlcyBjYWxlbmRyaWVyc1wiIDogJ092ZXJ2aWV3IG9mIGFsbCBjYWxlbmRhcnMnXG4gICAgICAgIH1cbiAgICAgIC8+XG5cbiAgICAgIDxkaXYgY2xhc3NOYW1lPSdmbGV4LTEgb3ZlcmZsb3ctYXV0byBwLTYnPlxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT0nbWF4LXctN3hsIG14LWF1dG8gc3BhY2UteS02Jz5cbiAgICAgICAgey8qIEZpbHRlcnMgYW5kIENvbnRyb2xzICovfVxuICAgICAgICA8Q2FyZCBjbGFzc05hbWU9J21iLTYnPlxuICAgICAgICAgIDxDYXJkSGVhZGVyPlxuICAgICAgICAgICAgPENhcmRUaXRsZSBjbGFzc05hbWU9J2ZsZXggaXRlbXMtY2VudGVyIGp1c3RpZnktYmV0d2Vlbic+XG4gICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSdmbGV4IGl0ZW1zLWNlbnRlciBnYXAtMic+XG4gICAgICAgICAgICAgICAgPEZpbHRlciBjbGFzc05hbWU9J3ctNSBoLTUnIC8+XG4gICAgICAgICAgICAgICAge2xhbmd1YWdlID09PSAnZnInID8gJ0ZpbHRyZXMgZXQgT3B0aW9ucycgOiAnRmlsdGVycyBhbmQgT3B0aW9ucyd9XG4gICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0nZmxleCBpdGVtcy1jZW50ZXIgZ2FwLTInPlxuICAgICAgICAgICAgICAgIDxEaWFsb2cgb3Blbj17aXNMaW5rRGlhbG9nT3Blbn0gb25PcGVuQ2hhbmdlPXtzZXRJc0xpbmtEaWFsb2dPcGVufT5cbiAgICAgICAgICAgICAgICAgIDxEaWFsb2dUcmlnZ2VyIGFzQ2hpbGQ+XG4gICAgICAgICAgICAgICAgICAgIDxCdXR0b25cbiAgICAgICAgICAgICAgICAgICAgICB2YXJpYW50PSdvdXRsaW5lJ1xuICAgICAgICAgICAgICAgICAgICAgIHNpemU9J3NtJ1xuICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT0nZmxleCBpdGVtcy1jZW50ZXIgZ2FwLTInXG4gICAgICAgICAgICAgICAgICAgICAgZGF0YS10ZXN0aWQ9J2J1dHRvbi1saW5rLWNhbGVuZGFyJ1xuICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgPEV4dGVybmFsTGluayBjbGFzc05hbWU9J3ctNCBoLTQnIC8+XG4gICAgICAgICAgICAgICAgICAgICAge2xhbmd1YWdlID09PSAnZnInID8gJ0xpZXIgY2FsZW5kcmllcicgOiAnTGluayBjYWxlbmRhcid9XG4gICAgICAgICAgICAgICAgICAgIDwvQnV0dG9uPlxuICAgICAgICAgICAgICAgICAgPC9EaWFsb2dUcmlnZ2VyPlxuICAgICAgICAgICAgICAgICAgPERpYWxvZ0NvbnRlbnQgY2xhc3NOYW1lPSdzbTptYXgtdy1bNTAwcHhdJz5cbiAgICAgICAgICAgICAgICAgICAgPERpYWxvZ0hlYWRlcj5cbiAgICAgICAgICAgICAgICAgICAgICA8RGlhbG9nVGl0bGU+XG4gICAgICAgICAgICAgICAgICAgICAgICB7IXNob3dQcm92aWRlclN0ZXBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgPyBsYW5ndWFnZSA9PT0gJ2ZyJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gJ1F1ZSBzb3VoYWl0ZXotdm91cyBsaWVyID8nXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgOiAnV2hhdCBkbyB5b3Ugd2FudCB0byBsaW5rPydcbiAgICAgICAgICAgICAgICAgICAgICAgICAgOiBsYW5ndWFnZSA9PT0gJ2ZyJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gJ0Nob2lzaXIgbGUgZm91cm5pc3NldXIgZGUgY2FsZW5kcmllcidcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA6ICdDaG9vc2UgY2FsZW5kYXIgcHJvdmlkZXInfVxuICAgICAgICAgICAgICAgICAgICAgIDwvRGlhbG9nVGl0bGU+XG4gICAgICAgICAgICAgICAgICAgIDwvRGlhbG9nSGVhZGVyPlxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0nZ3JpZCBnYXAtNCBweS00Jz5cbiAgICAgICAgICAgICAgICAgICAgICB7IXNob3dQcm92aWRlclN0ZXAgJiYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgPD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9J3RleHQtc20gdGV4dC1ncmF5LTYwMCc+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge2xhbmd1YWdlID09PSAnZnInXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA/ICdTw6lsZWN0aW9ubmV6IHF1ZWwgdHlwZSBkZSBjYWxlbmRyaWVyIHZvdXMgc291aGFpdGV6IHN5bmNocm9uaXNlcjonXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6ICdTZWxlY3Qgd2hpY2ggdHlwZSBvZiBjYWxlbmRhciB5b3Ugd2FudCB0byBzeW5jOid9XG4gICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuXG4gICAgICAgICAgICAgICAgICAgICAgICAgIHsvKiBMaW5rIEV2ZXJ5dGhpbmcgT3B0aW9uICovfVxuICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPXtgZmxleCBpdGVtcy1jZW50ZXIganVzdGlmeS1iZXR3ZWVuIHAtNCBib3JkZXIgcm91bmRlZC1sZyBjdXJzb3ItcG9pbnRlciB0cmFuc2l0aW9uLWNvbG9ycyAke1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZWN0ZWRDYWxlbmRhclR5cGUgPT09ICdldmVyeXRoaW5nJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA/ICdib3JkZXIta292ZW8tbmF2eSBiZy1rb3Zlby1uYXZ5LzUnXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogJ2JvcmRlci1ncmF5LTIwMCBob3Zlcjpib3JkZXItZ3JheS0zMDAnXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfWB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DbGljaz17KCkgPT4gc2V0U2VsZWN0ZWRDYWxlbmRhclR5cGUoJ2V2ZXJ5dGhpbmcnKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhLXRlc3RpZD0nb3B0aW9uLWV2ZXJ5dGhpbmctY2FsZW5kYXInXG4gICAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9J2ZvbnQtbWVkaXVtJz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2xhbmd1YWdlID09PSAnZnInID8gJ1RvdXQgbGllcicgOiAnTGluayBldmVyeXRoaW5nJ31cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9J3RleHQtc20gdGV4dC1ncmF5LTUwMCc+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtsYW5ndWFnZSA9PT0gJ2ZyJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gYFN5bmNocm9uaXNlciB0b3VzIGxlcyBlc3BhY2VzIHPDqWxlY3Rpb25uw6lzICgke3Zpc2libGVTcGFjZXMuc2l6ZX0gZXNwYWNlcylgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOiBgU3luYyBhbGwgc2VsZWN0ZWQgc3BhY2VzICgke3Zpc2libGVTcGFjZXMuc2l6ZX0gc3BhY2VzKWB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7c2VsZWN0ZWRDYWxlbmRhclR5cGUgPT09ICdldmVyeXRoaW5nJyAmJiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8Q2hlY2sgY2xhc3NOYW1lPSd3LTUgaC01IHRleHQta292ZW8tbmF2eScgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cblxuICAgICAgICAgICAgICAgICAgICAgICAgICB7LyogSW5kaXZpZHVhbCBTcGFjZXMgT3B0aW9uICovfVxuICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPXtgZmxleCBpdGVtcy1jZW50ZXIganVzdGlmeS1iZXR3ZWVuIHAtNCBib3JkZXIgcm91bmRlZC1sZyBjdXJzb3ItcG9pbnRlciB0cmFuc2l0aW9uLWNvbG9ycyAke1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZWN0ZWRDYWxlbmRhclR5cGUgPT09ICdpbmRpdmlkdWFsJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA/ICdib3JkZXIta292ZW8tbmF2eSBiZy1rb3Zlby1uYXZ5LzUnXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogJ2JvcmRlci1ncmF5LTIwMCBob3Zlcjpib3JkZXItZ3JheS0zMDAnXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfWB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DbGljaz17KCkgPT4gc2V0U2VsZWN0ZWRDYWxlbmRhclR5cGUoJ2luZGl2aWR1YWwnKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhLXRlc3RpZD0nb3B0aW9uLWluZGl2aWR1YWwtc3BhY2VzJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSdmb250LW1lZGl1bSc+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtsYW5ndWFnZSA9PT0gJ2ZyJyA/ICdFc3BhY2VzIGluZGl2aWR1ZWxzJyA6ICdJbmRpdmlkdWFsIHNwYWNlcyd9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSd0ZXh0LXNtIHRleHQtZ3JheS01MDAnPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7bGFuZ3VhZ2UgPT09ICdmcidcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA/ICdDaG9pc2lyIGRlcyBlc3BhY2VzIHNww6ljaWZpcXVlcyDDoCBzeW5jaHJvbmlzZXInXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOiAnQ2hvb3NlIHNwZWNpZmljIHNwYWNlcyB0byBzeW5jJ31cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtzZWxlY3RlZENhbGVuZGFyVHlwZSA9PT0gJ2luZGl2aWR1YWwnICYmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxDaGVjayBjbGFzc05hbWU9J3ctNSBoLTUgdGV4dC1rb3Zlby1uYXZ5JyAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuXG4gICAgICAgICAgICAgICAgICAgICAgICAgIHtzZWxlY3RlZENhbGVuZGFyVHlwZSA9PT0gJ2V2ZXJ5dGhpbmcnICYmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0nbXQtNCBwLTQgYmctZ3JlZW4tNTAgcm91bmRlZC1sZyBib3JkZXIgYm9yZGVyLWdyZWVuLTIwMCc+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0ndGV4dC1zbSBmb250LW1lZGl1bSB0ZXh0LWdyZWVuLTkwMCBtYi0yJz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2xhbmd1YWdlID09PSAnZnInXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPyAnQ29uZmlndXJhdGlvbiBjb21wbMOodGUnXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOiAnQ29tcGxldGUgY29uZmlndXJhdGlvbid9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSd0ZXh0LXNtIHRleHQtZ3JlZW4tNzAwJz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge3Zpc2libGVTcGFjZXMuc2l6ZSA+IDBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA/IGxhbmd1YWdlID09PSAnZnInXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA/IGBDZXR0ZSBvcHRpb24gc3luY2hyb25pc2VyYSB0b3VzIGxlcyAke3Zpc2libGVTcGFjZXMuc2l6ZX0gZXNwYWNlcyBhY3R1ZWxsZW1lbnQgc8OpbGVjdGlvbm7DqXMgYXZlYyB2b3RyZSBjYWxlbmRyaWVyIGV4dGVybmUuYFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOiBgVGhpcyBvcHRpb24gd2lsbCBzeW5jIGFsbCAke3Zpc2libGVTcGFjZXMuc2l6ZX0gY3VycmVudGx5IHNlbGVjdGVkIHNwYWNlcyB3aXRoIHlvdXIgZXh0ZXJuYWwgY2FsZW5kYXIuYFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogbGFuZ3VhZ2UgPT09ICdmcidcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gJ0F1Y3VuIGVzcGFjZSBzw6lsZWN0aW9ubsOpLiBWZXVpbGxleiBlbiBzw6lsZWN0aW9ubmVyIGF1IG1vaW5zIHVuIGF2YW50IGRlIGNvbnRpbnVlci4nXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6ICdObyBzcGFjZXMgc2VsZWN0ZWQuIFBsZWFzZSBzZWxlY3QgYXQgbGVhc3Qgb25lIGJlZm9yZSBjb250aW51aW5nLid9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cblxuICAgICAgICAgICAgICAgICAgICAgICAgICB7c2VsZWN0ZWRDYWxlbmRhclR5cGUgPT09ICdpbmRpdmlkdWFsJyAmJiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9J210LTQgcC00IGJnLWJsdWUtNTAgcm91bmRlZC1sZyBib3JkZXIgYm9yZGVyLWJsdWUtMjAwJz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSd0ZXh0LXNtIGZvbnQtbWVkaXVtIHRleHQtYmx1ZS05MDAgbWItMic+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtsYW5ndWFnZSA9PT0gJ2ZyJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gJ0NvbmZpZ3VyYXRpb24gaW5kaXZpZHVlbGxlJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogJ0luZGl2aWR1YWwgY29uZmlndXJhdGlvbid9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSd0ZXh0LXNtIHRleHQtYmx1ZS03MDAnPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7bGFuZ3VhZ2UgPT09ICdmcidcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA/IFwiVm91cyBwb3VycmV6IGNob2lzaXIgcHLDqWNpc8OpbWVudCBxdWVscyBlc3BhY2VzIHN5bmNocm9uaXNlciDDoCBsJ8OpdGFwZSBzdWl2YW50ZS5cIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogJ1lvdSB3aWxsIGJlIGFibGUgdG8gY2hvb3NlIHByZWNpc2VseSB3aGljaCBzcGFjZXMgdG8gc3luYyBpbiB0aGUgbmV4dCBzdGVwLid9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cblxuICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0nZmxleCBqdXN0aWZ5LWVuZCBnYXAtMiBtdC00Jz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8QnV0dG9uXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXJpYW50PSdvdXRsaW5lJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DbGljaz17KCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRJc0xpbmtEaWFsb2dPcGVuKGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0U2VsZWN0ZWRDYWxlbmRhclR5cGUobnVsbCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldFNob3dQcm92aWRlclN0ZXAoZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRTZWxlY3RlZFByb3ZpZGVyKG51bGwpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGEtdGVzdGlkPSdidXR0b24tY2FuY2VsLWxpbmsnXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2xhbmd1YWdlID09PSAnZnInID8gJ0FubnVsZXInIDogJ0NhbmNlbCd9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9CdXR0b24+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPEJ1dHRvblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DbGljaz17KCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZWN0ZWRDYWxlbmRhclR5cGUgPT09ICdldmVyeXRoaW5nJyAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZpc2libGVTcGFjZXMuc2l6ZSA9PT0gMFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47IC8vIERvbid0IHByb2NlZWQgaWYgbm8gc3BhY2VzIHNlbGVjdGVkXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHNlbGVjdGVkQ2FsZW5kYXJUeXBlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0U2hvd1Byb3ZpZGVyU3RlcCh0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRpc2FibGVkPXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIXNlbGVjdGVkQ2FsZW5kYXJUeXBlIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChzZWxlY3RlZENhbGVuZGFyVHlwZSA9PT0gJ2V2ZXJ5dGhpbmcnICYmIHZpc2libGVTcGFjZXMuc2l6ZSA9PT0gMClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGEtdGVzdGlkPSdidXR0b24tbmV4dC1zdGVwJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtsYW5ndWFnZSA9PT0gJ2ZyJyA/ICdTdWl2YW50JyA6ICdOZXh0J31cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L0J1dHRvbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICA8Lz5cbiAgICAgICAgICAgICAgICAgICAgICApfVxuXG4gICAgICAgICAgICAgICAgICAgICAge3Nob3dQcm92aWRlclN0ZXAgJiYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgPD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9J3RleHQtc20gdGV4dC1ncmF5LTYwMCBtYi00Jz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7bGFuZ3VhZ2UgPT09ICdmcidcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gJ1PDqWxlY3Rpb25uZXogbGUgZm91cm5pc3NldXIgZGUgY2FsZW5kcmllciBvw7kgdm91cyBzb3VoYWl0ZXogc3luY2hyb25pc2VyIDonXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6ICdTZWxlY3QgdGhlIGNhbGVuZGFyIHByb3ZpZGVyIHdoZXJlIHlvdSB3YW50IHRvIHN5bmM6J31cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgey8qIEdvb2dsZSBDYWxlbmRhciBPcHRpb24gKi99XG4gICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9e2BmbGV4IGl0ZW1zLWNlbnRlciBqdXN0aWZ5LWJldHdlZW4gcC00IGJvcmRlciByb3VuZGVkLWxnIGN1cnNvci1wb2ludGVyIHRyYW5zaXRpb24tY29sb3JzICR7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxlY3RlZFByb3ZpZGVyID09PSAnZ29vZ2xlJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA/ICdib3JkZXIta292ZW8tbmF2eSBiZy1rb3Zlby1uYXZ5LzUnXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogJ2JvcmRlci1ncmF5LTIwMCBob3Zlcjpib3JkZXItZ3JheS0zMDAnXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfWB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DbGljaz17KCkgPT4gc2V0U2VsZWN0ZWRQcm92aWRlcignZ29vZ2xlJyl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YS10ZXN0aWQ9J29wdGlvbi1nb29nbGUtY2FsZW5kYXInXG4gICAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0nZmxleCBpdGVtcy1jZW50ZXIgZ2FwLTMnPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9J3ctMTAgaC0xMCBiZy1yZWQtNTAwIHJvdW5kZWQtZnVsbCBmbGV4IGl0ZW1zLWNlbnRlciBqdXN0aWZ5LWNlbnRlciB0ZXh0LXdoaXRlIGZvbnQtYm9sZCc+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEdcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9J2ZvbnQtbWVkaXVtJz5Hb29nbGUgQ2FsZW5kYXI8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9J3RleHQtc20gdGV4dC1ncmF5LTUwMCc+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2xhbmd1YWdlID09PSAnZnInXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA/ICdTeW5jaHJvbmlzZXIgYXZlYyBHb29nbGUgQ2FsZW5kYXInXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6ICdTeW5jIHdpdGggR29vZ2xlIENhbGVuZGFyJ31cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7c2VsZWN0ZWRQcm92aWRlciA9PT0gJ2dvb2dsZScgJiYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPENoZWNrIGNsYXNzTmFtZT0ndy01IGgtNSB0ZXh0LWtvdmVvLW5hdnknIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgey8qIE91dGxvb2sgQ2FsZW5kYXIgT3B0aW9uICovfVxuICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPXtgZmxleCBpdGVtcy1jZW50ZXIganVzdGlmeS1iZXR3ZWVuIHAtNCBib3JkZXIgcm91bmRlZC1sZyBjdXJzb3ItcG9pbnRlciB0cmFuc2l0aW9uLWNvbG9ycyAke1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZWN0ZWRQcm92aWRlciA9PT0gJ291dGxvb2snXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gJ2JvcmRlci1rb3Zlby1uYXZ5IGJnLWtvdmVvLW5hdnkvNSdcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOiAnYm9yZGVyLWdyYXktMjAwIGhvdmVyOmJvcmRlci1ncmF5LTMwMCdcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9YH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiBzZXRTZWxlY3RlZFByb3ZpZGVyKCdvdXRsb29rJyl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YS10ZXN0aWQ9J29wdGlvbi1vdXRsb29rLWNhbGVuZGFyJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9J2ZsZXggaXRlbXMtY2VudGVyIGdhcC0zJz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSd3LTEwIGgtMTAgYmctYmx1ZS02MDAgcm91bmRlZC1mdWxsIGZsZXggaXRlbXMtY2VudGVyIGp1c3RpZnktY2VudGVyIHRleHQtd2hpdGUgZm9udC1ib2xkJz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgT1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0nZm9udC1tZWRpdW0nPk91dGxvb2sgQ2FsZW5kYXI8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9J3RleHQtc20gdGV4dC1ncmF5LTUwMCc+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2xhbmd1YWdlID09PSAnZnInXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA/ICdTeW5jaHJvbmlzZXIgYXZlYyBPdXRsb29rIENhbGVuZGFyJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOiAnU3luYyB3aXRoIE91dGxvb2sgQ2FsZW5kYXInfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtzZWxlY3RlZFByb3ZpZGVyID09PSAnb3V0bG9vaycgJiYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPENoZWNrIGNsYXNzTmFtZT0ndy01IGgtNSB0ZXh0LWtvdmVvLW5hdnknIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgey8qIEFwcGxlIENhbGVuZGFyIE9wdGlvbiAqL31cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT17YGZsZXggaXRlbXMtY2VudGVyIGp1c3RpZnktYmV0d2VlbiBwLTQgYm9yZGVyIHJvdW5kZWQtbGcgY3Vyc29yLXBvaW50ZXIgdHJhbnNpdGlvbi1jb2xvcnMgJHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGVjdGVkUHJvdmlkZXIgPT09ICdhcHBsZSdcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPyAnYm9yZGVyLWtvdmVvLW5hdnkgYmcta292ZW8tbmF2eS81J1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6ICdib3JkZXItZ3JheS0yMDAgaG92ZXI6Ym9yZGVyLWdyYXktMzAwJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1gfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHNldFNlbGVjdGVkUHJvdmlkZXIoJ2FwcGxlJyl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YS10ZXN0aWQ9J29wdGlvbi1hcHBsZS1jYWxlbmRhcidcbiAgICAgICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSdmbGV4IGl0ZW1zLWNlbnRlciBnYXAtMyc+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0ndy0xMCBoLTEwIGJnLWdyYXktODAwIHJvdW5kZWQtZnVsbCBmbGV4IGl0ZW1zLWNlbnRlciBqdXN0aWZ5LWNlbnRlciB0ZXh0LXdoaXRlIGZvbnQtYm9sZCc+PC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0nZm9udC1tZWRpdW0nPkFwcGxlIENhbGVuZGFyPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSd0ZXh0LXNtIHRleHQtZ3JheS01MDAnPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtsYW5ndWFnZSA9PT0gJ2ZyJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPyAnU3luY2hyb25pc2VyIGF2ZWMgQXBwbGUgQ2FsZW5kYXInXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6ICdTeW5jIHdpdGggQXBwbGUgQ2FsZW5kYXInfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtzZWxlY3RlZFByb3ZpZGVyID09PSAnYXBwbGUnICYmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxDaGVjayBjbGFzc05hbWU9J3ctNSBoLTUgdGV4dC1rb3Zlby1uYXZ5JyAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuXG4gICAgICAgICAgICAgICAgICAgICAgICAgIHsvKiBPdGhlciBDYWxlbmRhciBPcHRpb24gKi99XG4gICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9e2BmbGV4IGl0ZW1zLWNlbnRlciBqdXN0aWZ5LWJldHdlZW4gcC00IGJvcmRlciByb3VuZGVkLWxnIGN1cnNvci1wb2ludGVyIHRyYW5zaXRpb24tY29sb3JzICR7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxlY3RlZFByb3ZpZGVyID09PSAnb3RoZXInXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gJ2JvcmRlci1rb3Zlby1uYXZ5IGJnLWtvdmVvLW5hdnkvNSdcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOiAnYm9yZGVyLWdyYXktMjAwIGhvdmVyOmJvcmRlci1ncmF5LTMwMCdcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9YH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiBzZXRTZWxlY3RlZFByb3ZpZGVyKCdvdGhlcicpfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGEtdGVzdGlkPSdvcHRpb24tb3RoZXItY2FsZW5kYXInXG4gICAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0nZmxleCBpdGVtcy1jZW50ZXIgZ2FwLTMnPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9J3ctMTAgaC0xMCBiZy1ncmF5LTUwMCByb3VuZGVkLWZ1bGwgZmxleCBpdGVtcy1jZW50ZXIganVzdGlmeS1jZW50ZXIgdGV4dC13aGl0ZSBmb250LWJvbGQnPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuLi5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9J2ZvbnQtbWVkaXVtJz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7bGFuZ3VhZ2UgPT09ICdmcicgPyAnQXV0cmUgY2FsZW5kcmllcicgOiAnT3RoZXIgY2FsZW5kYXInfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9J3RleHQtc20gdGV4dC1ncmF5LTUwMCc+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2xhbmd1YWdlID09PSAnZnInXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA/ICdVdGlsaXNlciB1biBmaWNoaWVyIElDUyBvdSBhdXRyZSdcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogJ1VzZSBJQ1MgZmlsZSBvciBvdGhlcid9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge3NlbGVjdGVkUHJvdmlkZXIgPT09ICdvdGhlcicgJiYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPENoZWNrIGNsYXNzTmFtZT0ndy01IGgtNSB0ZXh0LWtvdmVvLW5hdnknIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAge3NlbGVjdGVkUHJvdmlkZXIgJiYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSdtdC00IHAtNCBiZy1ibHVlLTUwIHJvdW5kZWQtbGcgYm9yZGVyIGJvcmRlci1ibHVlLTIwMCc+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0ndGV4dC1zbSBmb250LW1lZGl1bSB0ZXh0LWJsdWUtOTAwIG1iLTInPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7bGFuZ3VhZ2UgPT09ICdmcicgPyAnQ29uZmlndXJhdGlvbiBmaW5hbGUnIDogJ0ZpbmFsIGNvbmZpZ3VyYXRpb24nfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0ndGV4dC1zbSB0ZXh0LWJsdWUtNzAwJz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2xhbmd1YWdlID09PSAnZnInXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPyBgUHLDqnQgw6AgbGllciAke3NlbGVjdGVkQ2FsZW5kYXJUeXBlID09PSAnZXZlcnl0aGluZycgPyBgdG91cyBsZXMgJHt2aXNpYmxlU3BhY2VzLnNpemV9IGVzcGFjZXMgc8OpbGVjdGlvbm7DqXNgIDogJ2xlcyBlc3BhY2VzIGluZGl2aWR1ZWxzJ30gYXZlYyAke1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxlY3RlZFByb3ZpZGVyID09PSAnZ29vZ2xlJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gJ0dvb2dsZSBDYWxlbmRhcidcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IHNlbGVjdGVkUHJvdmlkZXIgPT09ICdvdXRsb29rJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPyAnT3V0bG9vayBDYWxlbmRhcidcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogc2VsZWN0ZWRQcm92aWRlciA9PT0gJ2FwcGxlJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA/ICdBcHBsZSBDYWxlbmRhcidcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOiAndm90cmUgY2FsZW5kcmllcidcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0uYFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogYFJlYWR5IHRvIGxpbmsgJHtzZWxlY3RlZENhbGVuZGFyVHlwZSA9PT0gJ2V2ZXJ5dGhpbmcnID8gYGFsbCAke3Zpc2libGVTcGFjZXMuc2l6ZX0gc2VsZWN0ZWQgc3BhY2VzYCA6ICdpbmRpdmlkdWFsIHNwYWNlcyd9IHdpdGggJHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZWN0ZWRQcm92aWRlciA9PT0gJ2dvb2dsZSdcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA/ICdHb29nbGUgQ2FsZW5kYXInXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOiBzZWxlY3RlZFByb3ZpZGVyID09PSAnb3V0bG9vaydcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gJ091dGxvb2sgQ2FsZW5kYXInXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IHNlbGVjdGVkUHJvdmlkZXIgPT09ICdhcHBsZSdcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPyAnQXBwbGUgQ2FsZW5kYXInXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogJ3lvdXIgY2FsZW5kYXInXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LmB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cblxuICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0nZmxleCBqdXN0aWZ5LWJldHdlZW4gZ2FwLTIgbXQtNCc+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPEJ1dHRvblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyaWFudD0nb3V0bGluZSdcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0U2hvd1Byb3ZpZGVyU3RlcChmYWxzZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldFNlbGVjdGVkUHJvdmlkZXIobnVsbCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YS10ZXN0aWQ9J2J1dHRvbi1iYWNrLXN0ZXAnXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2xhbmd1YWdlID09PSAnZnInID8gJ1JldG91cicgOiAnQmFjayd9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9CdXR0b24+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9J2ZsZXggZ2FwLTInPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPEJ1dHRvblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXJpYW50PSdvdXRsaW5lJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0SXNMaW5rRGlhbG9nT3BlbihmYWxzZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0U2VsZWN0ZWRDYWxlbmRhclR5cGUobnVsbCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0U2hvd1Byb3ZpZGVyU3RlcChmYWxzZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0U2VsZWN0ZWRQcm92aWRlcihudWxsKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YS10ZXN0aWQ9J2J1dHRvbi1jYW5jZWwtcHJvdmlkZXInXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtsYW5ndWFnZSA9PT0gJ2ZyJyA/ICdBbm51bGVyJyA6ICdDYW5jZWwnfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9CdXR0b24+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8QnV0dG9uXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBIYW5kbGUgZmluYWwgY2FsZW5kYXIgbGlua2luZyBoZXJlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gTGluayBjYWxlbmRhciBsb2dpY1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhhbmRsZUxpbmtDYWxlbmRhcigpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldElzTGlua0RpYWxvZ09wZW4oZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldFNlbGVjdGVkQ2FsZW5kYXJUeXBlKG51bGwpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldFNob3dQcm92aWRlclN0ZXAoZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldFNlbGVjdGVkUHJvdmlkZXIobnVsbCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRpc2FibGVkPXshc2VsZWN0ZWRQcm92aWRlcn1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YS10ZXN0aWQ9J2J1dHRvbi1jb25maXJtLWZpbmFsLWxpbmsnXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtsYW5ndWFnZSA9PT0gJ2ZyJyA/ICdMaWVyIGNhbGVuZHJpZXInIDogJ0xpbmsgY2FsZW5kYXInfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9CdXR0b24+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgPC8+XG4gICAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICA8L0RpYWxvZ0NvbnRlbnQ+XG4gICAgICAgICAgICAgICAgPC9EaWFsb2c+XG4gICAgICAgICAgICAgICAgPEJ1dHRvblxuICAgICAgICAgICAgICAgICAgdmFyaWFudD0nb3V0bGluZSdcbiAgICAgICAgICAgICAgICAgIHNpemU9J3NtJ1xuICAgICAgICAgICAgICAgICAgb25DbGljaz17aGFuZGxlRXhwb3J0Q2FsZW5kYXJ9XG4gICAgICAgICAgICAgICAgICBjbGFzc05hbWU9J2ZsZXggaXRlbXMtY2VudGVyIGdhcC0yJ1xuICAgICAgICAgICAgICAgICAgZGF0YS10ZXN0aWQ9J2J1dHRvbi1leHBvcnQtY2FsZW5kYXInXG4gICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgPERvd25sb2FkIGNsYXNzTmFtZT0ndy00IGgtNCcgLz5cbiAgICAgICAgICAgICAgICAgIHtsYW5ndWFnZSA9PT0gJ2ZyJyA/ICdFeHBvcnRlcicgOiAnRXhwb3J0J31cbiAgICAgICAgICAgICAgICA8L0J1dHRvbj5cbiAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICA8L0NhcmRUaXRsZT5cbiAgICAgICAgICA8L0NhcmRIZWFkZXI+XG4gICAgICAgICAgPENhcmRDb250ZW50PlxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9J2dyaWQgZ3JpZC1jb2xzLTEgbWQ6Z3JpZC1jb2xzLTMgZ2FwLTQgbWItNCc+XG4gICAgICAgICAgICAgIHsvKiBCdWlsZGluZyBGaWx0ZXIgKi99XG4gICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSdzcGFjZS15LTInPlxuICAgICAgICAgICAgICAgIDxMYWJlbD57bGFuZ3VhZ2UgPT09ICdmcicgPyAnQsOidGltZW50JyA6ICdCdWlsZGluZyd9PC9MYWJlbD5cbiAgICAgICAgICAgICAgICA8U2VsZWN0IHZhbHVlPXtzZWxlY3RlZEJ1aWxkaW5nSWR9IG9uVmFsdWVDaGFuZ2U9e3NldFNlbGVjdGVkQnVpbGRpbmdJZH0+XG4gICAgICAgICAgICAgICAgICA8U2VsZWN0VHJpZ2dlciBkYXRhLXRlc3RpZD0nc2VsZWN0LWJ1aWxkaW5nLWZpbHRlcic+XG4gICAgICAgICAgICAgICAgICAgIDxTZWxlY3RWYWx1ZSAvPlxuICAgICAgICAgICAgICAgICAgPC9TZWxlY3RUcmlnZ2VyPlxuICAgICAgICAgICAgICAgICAgPFNlbGVjdENvbnRlbnQ+XG4gICAgICAgICAgICAgICAgICAgIDxTZWxlY3RJdGVtIHZhbHVlPSdhbGwnPlxuICAgICAgICAgICAgICAgICAgICAgIHtsYW5ndWFnZSA9PT0gJ2ZyJyA/ICdUb3VzIGxlcyBiw6J0aW1lbnRzJyA6ICdBbGwgYnVpbGRpbmdzJ31cbiAgICAgICAgICAgICAgICAgICAgPC9TZWxlY3RJdGVtPlxuICAgICAgICAgICAgICAgICAgICB7YnVpbGRpbmdzLm1hcCgoYnVpbGRpbmcpID0+IChcbiAgICAgICAgICAgICAgICAgICAgICA8U2VsZWN0SXRlbSBrZXk9e2J1aWxkaW5nLmlkfSB2YWx1ZT17YnVpbGRpbmcuaWR9PlxuICAgICAgICAgICAgICAgICAgICAgICAge2J1aWxkaW5nLm5hbWV9IC0ge2J1aWxkaW5nLmFkZHJlc3N9XG4gICAgICAgICAgICAgICAgICAgICAgPC9TZWxlY3RJdGVtPlxuICAgICAgICAgICAgICAgICAgICApKX1cbiAgICAgICAgICAgICAgICAgIDwvU2VsZWN0Q29udGVudD5cbiAgICAgICAgICAgICAgICA8L1NlbGVjdD5cbiAgICAgICAgICAgICAgPC9kaXY+XG5cbiAgICAgICAgICAgICAgey8qIFNlYXJjaCAqL31cbiAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9J3NwYWNlLXktMic+XG4gICAgICAgICAgICAgICAgPExhYmVsPntsYW5ndWFnZSA9PT0gJ2ZyJyA/ICdSZWNoZXJjaGVyIHVuIGVzcGFjZScgOiAnU2VhcmNoIHNwYWNlcyd9PC9MYWJlbD5cbiAgICAgICAgICAgICAgICA8SW5wdXRcbiAgICAgICAgICAgICAgICAgIHR5cGU9J3RleHQnXG4gICAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcj17bGFuZ3VhZ2UgPT09ICdmcicgPyBcIk5vbSBkZSBsJ2VzcGFjZS4uLlwiIDogJ1NwYWNlIG5hbWUuLi4nfVxuICAgICAgICAgICAgICAgICAgdmFsdWU9e3NlYXJjaFF1ZXJ5fVxuICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9eyhlKSA9PiBzZXRTZWFyY2hRdWVyeShlLnRhcmdldC52YWx1ZSl9XG4gICAgICAgICAgICAgICAgICBkYXRhLXRlc3RpZD0naW5wdXQtc2VhcmNoLXNwYWNlcydcbiAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICA8L2Rpdj5cblxuICAgICAgICAgICAgICB7LyogVmlldyBNb2RlICovfVxuICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0nc3BhY2UteS0yJz5cbiAgICAgICAgICAgICAgICA8TGFiZWw+e2xhbmd1YWdlID09PSAnZnInID8gJ1Z1ZScgOiAnVmlldyd9PC9MYWJlbD5cbiAgICAgICAgICAgICAgICA8U2VsZWN0XG4gICAgICAgICAgICAgICAgICB2YWx1ZT17dmlld01vZGV9XG4gICAgICAgICAgICAgICAgICBvblZhbHVlQ2hhbmdlPXsodmFsdWU6ICdtb250aCcgfCAnd2VlaycpID0+IHNldFZpZXdNb2RlKHZhbHVlKX1cbiAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICA8U2VsZWN0VHJpZ2dlciBkYXRhLXRlc3RpZD0nc2VsZWN0LXZpZXctbW9kZSc+XG4gICAgICAgICAgICAgICAgICAgIDxTZWxlY3RWYWx1ZSAvPlxuICAgICAgICAgICAgICAgICAgPC9TZWxlY3RUcmlnZ2VyPlxuICAgICAgICAgICAgICAgICAgPFNlbGVjdENvbnRlbnQ+XG4gICAgICAgICAgICAgICAgICAgIDxTZWxlY3RJdGVtIHZhbHVlPSdtb250aCc+XG4gICAgICAgICAgICAgICAgICAgICAge2xhbmd1YWdlID09PSAnZnInID8gJ01lbnN1ZWxsZScgOiAnTW9udGhseSd9XG4gICAgICAgICAgICAgICAgICAgIDwvU2VsZWN0SXRlbT5cbiAgICAgICAgICAgICAgICAgICAgPFNlbGVjdEl0ZW0gdmFsdWU9J3dlZWsnPlxuICAgICAgICAgICAgICAgICAgICAgIHtsYW5ndWFnZSA9PT0gJ2ZyJyA/ICdIZWJkb21hZGFpcmUnIDogJ1dlZWtseSd9XG4gICAgICAgICAgICAgICAgICAgIDwvU2VsZWN0SXRlbT5cbiAgICAgICAgICAgICAgICAgIDwvU2VsZWN0Q29udGVudD5cbiAgICAgICAgICAgICAgICA8L1NlbGVjdD5cbiAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICA8L2Rpdj5cblxuICAgICAgICAgICAgey8qIFNwYWNlIFZpc2liaWxpdHkgQ29udHJvbHMgKi99XG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0nZmxleCBpdGVtcy1jZW50ZXIganVzdGlmeS1iZXR3ZWVuIGJvcmRlci10IHB0LTQnPlxuICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0nZmxleCBpdGVtcy1jZW50ZXIgZ2FwLTInPlxuICAgICAgICAgICAgICAgIDxCdXR0b25cbiAgICAgICAgICAgICAgICAgIHZhcmlhbnQ9J291dGxpbmUnXG4gICAgICAgICAgICAgICAgICBzaXplPSdzbSdcbiAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9e3Nob3dBbGxTcGFjZXN9XG4gICAgICAgICAgICAgICAgICBjbGFzc05hbWU9J2ZsZXggaXRlbXMtY2VudGVyIGdhcC0yJ1xuICAgICAgICAgICAgICAgICAgZGF0YS10ZXN0aWQ9J2J1dHRvbi1zaG93LWFsbCdcbiAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICA8RXllIGNsYXNzTmFtZT0ndy00IGgtNCcgLz5cbiAgICAgICAgICAgICAgICAgIHtsYW5ndWFnZSA9PT0gJ2ZyJyA/ICdUb3V0IGFmZmljaGVyJyA6ICdTaG93IGFsbCd9XG4gICAgICAgICAgICAgICAgPC9CdXR0b24+XG4gICAgICAgICAgICAgICAgPEJ1dHRvblxuICAgICAgICAgICAgICAgICAgdmFyaWFudD0nb3V0bGluZSdcbiAgICAgICAgICAgICAgICAgIHNpemU9J3NtJ1xuICAgICAgICAgICAgICAgICAgb25DbGljaz17aGlkZUFsbFNwYWNlc31cbiAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT0nZmxleCBpdGVtcy1jZW50ZXIgZ2FwLTInXG4gICAgICAgICAgICAgICAgICBkYXRhLXRlc3RpZD0nYnV0dG9uLWhpZGUtYWxsJ1xuICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgIDxFeWVPZmYgY2xhc3NOYW1lPSd3LTQgaC00JyAvPlxuICAgICAgICAgICAgICAgICAge2xhbmd1YWdlID09PSAnZnInID8gJ1RvdXQgbWFzcXVlcicgOiAnSGlkZSBhbGwnfVxuICAgICAgICAgICAgICAgIDwvQnV0dG9uPlxuICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9J3RleHQtc20gdGV4dC1ncmF5LTYwMCc+XG4gICAgICAgICAgICAgICAge2xhbmd1YWdlID09PSAnZnInXG4gICAgICAgICAgICAgICAgICA/IGAke3Zpc2libGVTcGFjZXMuc2l6ZX0gZXNwYWNlKHMpIGFmZmljaMOpKHMpIHN1ciAke2ZpbHRlcmVkU3BhY2VzLmxlbmd0aH1gXG4gICAgICAgICAgICAgICAgICA6IGAke3Zpc2libGVTcGFjZXMuc2l6ZX0gc3BhY2Uocykgc2hvd24gb3V0IG9mICR7ZmlsdGVyZWRTcGFjZXMubGVuZ3RofWB9XG4gICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgPC9DYXJkQ29udGVudD5cbiAgICAgICAgPC9DYXJkPlxuXG4gICAgICAgIHsvKiBTcGFjZXMgTGlzdCAqL31cbiAgICAgICAgPENhcmQgY2xhc3NOYW1lPSdtYi02Jz5cbiAgICAgICAgICA8Q2FyZEhlYWRlcj5cbiAgICAgICAgICAgIDxDYXJkVGl0bGUgY2xhc3NOYW1lPSdmbGV4IGl0ZW1zLWNlbnRlciBnYXAtMic+XG4gICAgICAgICAgICAgIDxCdWlsZGluZyBjbGFzc05hbWU9J3ctNSBoLTUnIC8+XG4gICAgICAgICAgICAgIHtsYW5ndWFnZSA9PT0gJ2ZyJyA/ICdFc3BhY2VzIENvbW11bnMnIDogJ0NvbW1vbiBTcGFjZXMnfVxuICAgICAgICAgICAgPC9DYXJkVGl0bGU+XG4gICAgICAgICAgPC9DYXJkSGVhZGVyPlxuICAgICAgICAgIDxDYXJkQ29udGVudD5cbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSdncmlkIGdyaWQtY29scy0xIG1kOmdyaWQtY29scy0yIGxnOmdyaWQtY29scy0zIGdhcC0zJz5cbiAgICAgICAgICAgICAge2ZpbHRlcmVkU3BhY2VzLm1hcCgoc3BhY2UpID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCBpc1Zpc2libGUgPSB2aXNpYmxlU3BhY2VzLmhhcyhzcGFjZS5pZCk7XG4gICAgICAgICAgICAgICAgY29uc3QgYnVpbGRpbmcgPSBidWlsZGluZ3MuZmluZCgoYikgPT4gYi5pZCA9PT0gc3BhY2UuYnVpbGRpbmdJZCk7XG5cbiAgICAgICAgICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgICAgICAgPGRpdlxuICAgICAgICAgICAgICAgICAgICBrZXk9e3NwYWNlLmlkfVxuICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9e2BwLTMgcm91bmRlZC1sZyBib3JkZXIgY3Vyc29yLXBvaW50ZXIgdHJhbnNpdGlvbi1hbGwgJHtcbiAgICAgICAgICAgICAgICAgICAgICBpc1Zpc2libGVcbiAgICAgICAgICAgICAgICAgICAgICAgID8gJ2JvcmRlci1ibHVlLTIwMCBiZy1ibHVlLTUwIHNoYWRvdy1zbSdcbiAgICAgICAgICAgICAgICAgICAgICAgIDogJ2JvcmRlci1ncmF5LTIwMCBob3Zlcjpib3JkZXItZ3JheS0zMDAnXG4gICAgICAgICAgICAgICAgICAgIH1gfVxuICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiB0b2dnbGVTcGFjZVZpc2liaWxpdHkoc3BhY2UuaWQpfVxuICAgICAgICAgICAgICAgICAgICBkYXRhLXRlc3RpZD17YHNwYWNlLWNhcmQtJHtzcGFjZS5pZH1gfVxuICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0nZmxleCBpdGVtcy1zdGFydCBqdXN0aWZ5LWJldHdlZW4nPlxuICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSdmbGV4LTEnPlxuICAgICAgICAgICAgICAgICAgICAgICAgPGgzIGNsYXNzTmFtZT0nZm9udC1tZWRpdW0gdGV4dC1ncmF5LTkwMCc+e3NwYWNlLm5hbWV9PC9oMz5cbiAgICAgICAgICAgICAgICAgICAgICAgIHtidWlsZGluZyAmJiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT0ndGV4dC14cyB0ZXh0LWdyYXktNTAwIGZsZXggaXRlbXMtY2VudGVyIGdhcC0xIG10LTEnPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxNYXBQaW4gY2xhc3NOYW1lPSd3LTMgaC0zJyAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtidWlsZGluZy5uYW1lfVxuICAgICAgICAgICAgICAgICAgICAgICAgICA8L3A+XG4gICAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICAgICAge3NwYWNlLmRlc2NyaXB0aW9uICYmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPSd0ZXh0LXhzIHRleHQtZ3JheS02MDAgbXQtMSc+e3NwYWNlLmRlc2NyaXB0aW9ufTwvcD5cbiAgICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9J2ZsZXggaXRlbXMtY2VudGVyIGdhcC0yJz5cbiAgICAgICAgICAgICAgICAgICAgICAgIHshc3BhY2UuaXNSZXNlcnZhYmxlICYmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgPEJhZGdlIHZhcmlhbnQ9J3NlY29uZGFyeScgY2xhc3NOYW1lPSd0ZXh0LXhzJz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7bGFuZ3VhZ2UgPT09ICdmcicgPyAnTm9uIHLDqXNlcnZhYmxlJyA6ICdOb3QgYm9va2FibGUnfVxuICAgICAgICAgICAgICAgICAgICAgICAgICA8L0JhZGdlPlxuICAgICAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgICAgIHtpc1Zpc2libGUgPyAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgIDxFeWUgY2xhc3NOYW1lPSd3LTQgaC00IHRleHQtYmx1ZS02MDAnIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICApIDogKFxuICAgICAgICAgICAgICAgICAgICAgICAgICA8RXllT2ZmIGNsYXNzTmFtZT0ndy00IGgtNCB0ZXh0LWdyYXktNDAwJyAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICB9KX1cbiAgICAgICAgICAgIDwvZGl2PlxuXG4gICAgICAgICAgICB7ZmlsdGVyZWRTcGFjZXMubGVuZ3RoID09PSAwICYmIChcbiAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9J3RleHQtY2VudGVyIHB5LTggdGV4dC1ncmF5LTUwMCc+XG4gICAgICAgICAgICAgICAge2xhbmd1YWdlID09PSAnZnInXG4gICAgICAgICAgICAgICAgICA/ICdBdWN1biBlc3BhY2UgdHJvdXbDqSBhdmVjIGxlcyBmaWx0cmVzIHPDqWxlY3Rpb25uw6lzLidcbiAgICAgICAgICAgICAgICAgIDogJ05vIHNwYWNlcyBmb3VuZCB3aXRoIHRoZSBzZWxlY3RlZCBmaWx0ZXJzLid9XG4gICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgKX1cbiAgICAgICAgICA8L0NhcmRDb250ZW50PlxuICAgICAgICA8L0NhcmQ+XG5cbiAgICAgICAgey8qIENhbGVuZGFyIFZpZXdzICovfVxuICAgICAgICB7dmlzaWJsZVNwYWNlcy5zaXplID4gMCAmJiAoXG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9J3NwYWNlLXktNic+XG4gICAgICAgICAgICB7QXJyYXkuZnJvbSh2aXNpYmxlU3BhY2VzKS5tYXAoKHNwYWNlSWQpID0+IHtcbiAgICAgICAgICAgICAgY29uc3Qgc3BhY2UgPSBmaWx0ZXJlZFNwYWNlcy5maW5kKChzKSA9PiBzLmlkID09PSBzcGFjZUlkKTtcbiAgICAgICAgICAgICAgaWYgKCFzcGFjZSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgY29uc3QgYnVpbGRpbmcgPSBidWlsZGluZ3MuZmluZCgoYikgPT4gYi5pZCA9PT0gc3BhY2UuYnVpbGRpbmdJZCk7XG5cbiAgICAgICAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgICAgICA8Q2FyZCBrZXk9e3NwYWNlSWR9PlxuICAgICAgICAgICAgICAgICAgPENhcmRIZWFkZXI+XG4gICAgICAgICAgICAgICAgICAgIDxDYXJkVGl0bGUgY2xhc3NOYW1lPSdmbGV4IGl0ZW1zLWNlbnRlciBqdXN0aWZ5LWJldHdlZW4nPlxuICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSdmbGV4IGl0ZW1zLWNlbnRlciBnYXAtMic+XG4gICAgICAgICAgICAgICAgICAgICAgICA8Q2FsZW5kYXJJY29uIGNsYXNzTmFtZT0ndy01IGgtNScgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuPntzcGFjZS5uYW1lfTwvc3Bhbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAge2J1aWxkaW5nICYmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9J3RleHQtc20gZm9udC1ub3JtYWwgdGV4dC1ncmF5LTUwMCBtbC0yJz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIOKAoiB7YnVpbGRpbmcubmFtZX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3NwYW4+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICB7IXNwYWNlLmlzUmVzZXJ2YWJsZSAmJiAoXG4gICAgICAgICAgICAgICAgICAgICAgICA8QmFkZ2UgdmFyaWFudD0nc2Vjb25kYXJ5Jz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAge2xhbmd1YWdlID09PSAnZnInID8gJ05vbiByw6lzZXJ2YWJsZScgOiAnTm90IGJvb2thYmxlJ31cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvQmFkZ2U+XG4gICAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgPC9DYXJkVGl0bGU+XG4gICAgICAgICAgICAgICAgICA8L0NhcmRIZWFkZXI+XG4gICAgICAgICAgICAgICAgICA8Q2FyZENvbnRlbnQ+XG4gICAgICAgICAgICAgICAgICAgIDxDYWxlbmRhclZpZXcgbW9kZT0nc3BhY2UnIHNwYWNlSWQ9e3NwYWNlSWR9IGJ1aWxkaW5nSWQ9e3NwYWNlLmJ1aWxkaW5nSWR9IC8+XG4gICAgICAgICAgICAgICAgICA8L0NhcmRDb250ZW50PlxuICAgICAgICAgICAgICAgIDwvQ2FyZD5cbiAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIH0pfVxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICApfVxuXG4gICAgICAgIHt2aXNpYmxlU3BhY2VzLnNpemUgPT09IDAgJiYgKFxuICAgICAgICAgIDxDYXJkPlxuICAgICAgICAgICAgPENhcmRDb250ZW50IGNsYXNzTmFtZT0ndGV4dC1jZW50ZXIgcHktMTInPlxuICAgICAgICAgICAgICA8Q2FsZW5kYXJJY29uIGNsYXNzTmFtZT0ndy0xNiBoLTE2IG14LWF1dG8gbWItNCB0ZXh0LWdyYXktMzAwJyAvPlxuICAgICAgICAgICAgICA8aDMgY2xhc3NOYW1lPSd0ZXh0LWxnIGZvbnQtbWVkaXVtIHRleHQtZ3JheS05MDAgbWItMic+XG4gICAgICAgICAgICAgICAge2xhbmd1YWdlID09PSAnZnInID8gJ0F1Y3VuIGNhbGVuZHJpZXIgc8OpbGVjdGlvbm7DqScgOiAnTm8gY2FsZW5kYXJzIHNlbGVjdGVkJ31cbiAgICAgICAgICAgICAgPC9oMz5cbiAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPSd0ZXh0LWdyYXktNjAwIG1iLTQnPlxuICAgICAgICAgICAgICAgIHtsYW5ndWFnZSA9PT0gJ2ZyJ1xuICAgICAgICAgICAgICAgICAgPyAnU8OpbGVjdGlvbm5leiBkZXMgZXNwYWNlcyBjaS1kZXNzdXMgcG91ciBhZmZpY2hlciBsZXVycyBjYWxlbmRyaWVycy4nXG4gICAgICAgICAgICAgICAgICA6ICdTZWxlY3Qgc3BhY2VzIGFib3ZlIHRvIGRpc3BsYXkgdGhlaXIgY2FsZW5kYXJzLid9XG4gICAgICAgICAgICAgIDwvcD5cbiAgICAgICAgICAgICAgPEJ1dHRvblxuICAgICAgICAgICAgICAgIG9uQ2xpY2s9e3Nob3dBbGxTcGFjZXN9XG4gICAgICAgICAgICAgICAgZGlzYWJsZWQ9e2ZpbHRlcmVkU3BhY2VzLmxlbmd0aCA9PT0gMH1cbiAgICAgICAgICAgICAgICBjbGFzc05hbWU9J2ZsZXggaXRlbXMtY2VudGVyIGdhcC0yJ1xuICAgICAgICAgICAgICAgIGRhdGEtdGVzdGlkPSdidXR0b24tc2hvdy1hbGwtYm90dG9tJ1xuICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgPEV5ZSBjbGFzc05hbWU9J3ctNCBoLTQnIC8+XG4gICAgICAgICAgICAgICAge2xhbmd1YWdlID09PSAnZnInID8gJ0FmZmljaGVyIHRvdXMgbGVzIGNhbGVuZHJpZXJzJyA6ICdTaG93IGFsbCBjYWxlbmRhcnMnfVxuICAgICAgICAgICAgICA8L0J1dHRvbj5cbiAgICAgICAgICAgIDwvQ2FyZENvbnRlbnQ+XG4gICAgICAgICAgPC9DYXJkPlxuICAgICAgICApfVxuICAgICAgICA8L2Rpdj5cbiAgICAgIDwvZGl2PlxuICAgIDwvZGl2PlxuICApO1xufVxuIl0sInZlcnNpb24iOjN9