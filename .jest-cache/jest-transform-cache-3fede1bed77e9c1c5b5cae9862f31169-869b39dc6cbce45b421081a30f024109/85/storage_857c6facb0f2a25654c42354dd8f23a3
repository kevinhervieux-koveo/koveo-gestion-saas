18c97911d1966d1eea47952012950b7a
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.OptimizedDatabaseStorage = exports.storage = exports.MemStorage = void 0;
const crypto_1 = require("crypto");
class MemStorage {
    constructor() {
        this.users = new Map();
        this.organizations = new Map();
        this.buildings = new Map();
        this.residences = new Map();
        this.pillars = new Map();
        this.workspaceStatuses = new Map();
        this.qualityMetrics = new Map();
        this.frameworkConfigs = new Map();
        this.improvementSuggestions = new Map();
        this.features = new Map();
        this.actionableItems = new Map();
        this.invitations = new Map();
        this.invitationAuditLogs = new Map();
        this.bugs = new Map();
        this.featureRequests = new Map();
        this.featureRequestUpvotes = new Map();
        this.invoices = new Map();
        // Initialize test user asynchronously
        this.initializeTestUser().catch(console.error);
    }
    async initializeTestUser() {
        // Use known admin123 password for demo mode
        const bcrypt = require('bcryptjs');
        const securePassword = await bcrypt.hash('admin123', 12);
        const user = {
            id: '550e8400-e29b-41d4-a716-446655440000',
            username: 'kevin.hervieux@koveo-gestion.com',
            email: 'kevin.hervieux@koveo-gestion.com',
            password: securePassword,
            firstName: 'Kevin',
            lastName: 'Hervieux',
            phone: '',
            profileImage: '',
            language: 'fr',
            role: 'admin',
            isActive: true,
            lastLoginAt: null,
            createdAt: new Date(),
            updatedAt: new Date(),
        };
        this.users.set(user.id, user);
    }
    // User operations
    async getUsers() {
        return Array.from(this.users.values());
    }
    async getUsersWithAssignments() {
        // For MemStorage, just return users with empty assignments arrays
        const users = Array.from(this.users.values());
        return users.map(user => ({
            ...user,
            organizations: [],
            buildings: [],
            residences: []
        }));
    }
    async getUsersByOrganizations(_userId) {
        return [];
    }
    async getUser(id) {
        return this.users.get(id);
    }
    async getUserOrganizations(_userId) {
        return [];
    }
    async getUserResidences(_userId) {
        return [];
    }
    async getUserByEmail(email) {
        return Array.from(this.users.values()).find((user) => user.email === email);
    }
    async createUser(insertUser) {
        const id = (0, crypto_1.randomUUID)();
        const user = {
            ...insertUser,
            id,
            phone: insertUser.phone || null,
            profileImage: insertUser.profileImage || '',
            role: insertUser.role || 'tenant',
            language: insertUser.language || 'fr',
            isActive: true,
            lastLoginAt: null,
            createdAt: new Date(),
            updatedAt: new Date(),
        };
        this.users.set(id, user);
        return user;
    }
    async updateUser(id, updates) {
        const existingUser = this.users.get(id);
        if (!existingUser) {
            return undefined;
        }
        const updatedUser = {
            ...existingUser,
            ...updates,
            updatedAt: new Date(),
        };
        this.users.set(id, updatedUser);
        return updatedUser;
    }
    // Minimal implementations for other required methods
    async createPasswordResetToken(_token) {
        return {
            ..._token,
            id: (0, crypto_1.randomUUID)(),
            createdAt: new Date(),
            usedAt: null,
            isUsed: false,
            ipAddress: _token.ipAddress || '',
            userAgent: _token.userAgent || '',
        };
    }
    async getPasswordResetToken(_token) {
        return undefined;
    }
    async markPasswordResetTokenAsUsed(_tokenId) {
        return undefined;
    }
    async cleanupExpiredPasswordResetTokens() {
        return 0;
    }
    async getOrganizations() {
        return Array.from(this.organizations.values());
    }
    async getOrganization(id) {
        return this.organizations.get(id);
    }
    async getOrganizationByName(name) {
        return Array.from(this.organizations.values()).find((org) => org.name === name);
    }
    async createOrganization(org) {
        const id = (0, crypto_1.randomUUID)();
        const organization = {
            ...org,
            id,
            phone: org.phone || '',
            email: org.email || '',
            website: org.website || '',
            registrationNumber: org.registrationNumber || '',
            isActive: true,
            createdAt: new Date(),
            updatedAt: new Date(),
        };
        this.organizations.set(id, organization);
        return organization;
    }
    async updateOrganization(id, updates) {
        const existing = this.organizations.get(id);
        if (!existing)
            return undefined;
        const updated = { ...existing, ...updates, updatedAt: new Date() };
        this.organizations.set(id, updated);
        return updated;
    }
    async getBuildingsByOrganization(orgId) {
        return Array.from(this.buildings.values()).filter((b) => b.organizationId === orgId);
    }
    async getBuildings() {
        return Array.from(this.buildings.values());
    }
    async getBuilding(id) {
        return this.buildings.get(id);
    }
    async createBuilding(building) {
        const id = (0, crypto_1.randomUUID)();
        const newBuilding = {
            ...building,
            id,
            isActive: true,
            createdAt: new Date(),
            updatedAt: new Date(),
            totalUnits: building.totalUnits || 0,
            totalFloors: building.totalFloors || 0,
            yearBuilt: building.yearBuilt || 0,
            buildingType: building.buildingType,
            bankAccountNumber: building.bankAccountNumber || '',
            bankAccountMinimums: building.bankAccountMinimums ? JSON.stringify(building.bankAccountMinimums) : '',
            bankAccountUpdatedAt: new Date(),
            inflationSettings: '',
            parkingSpaces: building.parkingSpaces || 0,
            storageSpaces: building.storageSpaces || 0,
            amenities: building.amenities || null,
            managementCompany: building.managementCompany || null,
            bankAccountNotes: null,
            bankAccountStartDate: null,
            bankAccountStartAmount: null,
        };
        this.buildings.set(id, newBuilding);
        return newBuilding;
    }
    async updateBuilding(id, updates) {
        const existing = this.buildings.get(id);
        if (!existing)
            return undefined;
        const updated = { ...existing, ...updates, updatedAt: new Date() };
        this.buildings.set(id, updated);
        return updated;
    }
    async deleteBuilding(id) {
        const building = this.buildings.get(id);
        if (!building) {
            return false;
        }
        // Soft delete by setting isActive to false
        const updatedBuilding = {
            ...building,
            isActive: false,
            updatedAt: new Date(),
        };
        this.buildings.set(id, updatedBuilding);
        return true;
    }
    async getResidences() {
        return Array.from(this.residences.values());
    }
    async getResidence(id) {
        return this.residences.get(id);
    }
    async getResidencesByBuilding(buildingId) {
        return Array.from(this.residences.values()).filter((r) => r.buildingId === buildingId);
    }
    async createResidence(residence) {
        const id = (0, crypto_1.randomUUID)();
        const newResidence = {
            ...residence,
            id,
            isActive: true,
            createdAt: new Date(),
            updatedAt: new Date(),
            floor: residence.floor || 0,
            squareFootage: residence.squareFootage?.toString() || '0',
            bedrooms: residence.bedrooms || 0,
            bathrooms: residence.bathrooms?.toString() || '0',
            balcony: residence.balcony || false,
            parkingSpaceNumbers: residence.parkingSpaceNumbers || [],
            storageSpaceNumbers: residence.storageSpaceNumbers || [],
            ownershipPercentage: residence.ownershipPercentage?.toString() || '0',
            monthlyFees: residence.monthlyFees?.toString() || '0',
        };
        this.residences.set(id, newResidence);
        return newResidence;
    }
    async updateResidence(id, updates) {
        const existing = this.residences.get(id);
        if (!existing)
            return undefined;
        const updated = { ...existing, ...updates, updatedAt: new Date() };
        this.residences.set(id, updated);
        return updated;
    }
    async deleteResidence(id) {
        return this.residences.delete(id);
    }
    async getContacts() {
        return [];
    }
    async getContactsByEntity() {
        return [];
    }
    async getContactsForResidence() {
        return [];
    }
    async createContact(contact) {
        const id = (0, crypto_1.randomUUID)();
        return {
            ...contact,
            id,
            name: contact.name,
            email: contact.email || '',
            phone: contact.phone || '',
            entity: contact.entity,
            entityId: contact.entityId,
            contactCategory: contact.contactCategory,
            isActive: true,
            createdAt: new Date(),
            updatedAt: new Date(),
        };
    }
    async updateContact() {
        return undefined;
    }
    async deleteContact() {
        return false;
    }
    async getDocuments(_filters) {
        return [];
    }
    async getDocument(_id) {
        return undefined;
    }
    async createDocument(doc) {
        const id = (0, crypto_1.randomUUID)();
        return {
            ...doc,
            id,
            description: doc.description || '',
            buildingId: doc.buildingId || '',
            residenceId: doc.residenceId || '',
            fileName: doc.fileName || '',
            fileSize: doc.fileSize || '',
            mimeType: doc.mimeType || '',
            attachedToType: doc.attachedToType || '',
            attachedToId: doc.attachedToId || '',
            createdAt: new Date(),
            updatedAt: new Date(),
        };
    }
    async updateDocument(_id, _updates) {
        return undefined;
    }
    async deleteDocument(_id) {
        return false;
    }
    // Invoice operations
    async getInvoices(filters) {
        let invoices = Array.from(this.invoices.values());
        if (filters) {
            if (filters.buildingId) {
                invoices = invoices.filter(invoice => invoice.buildingId === filters.buildingId);
            }
            if (filters.residenceId) {
                invoices = invoices.filter(invoice => invoice.residenceId === filters.residenceId);
            }
            if (filters.userId && filters.userRole) {
                // Apply role-based filtering
                if (filters.userRole === 'tenant' || filters.userRole === 'resident') {
                    invoices = invoices.filter(invoice => invoice.createdBy === filters.userId);
                }
                // Admin and manager can see all invoices (already filtered by building/residence above)
            }
        }
        return invoices.sort((a, b) => b.createdAt.getTime() - a.createdAt.getTime());
    }
    async getInvoice(id) {
        return this.invoices.get(id);
    }
    async createInvoice(invoice) {
        const id = (0, crypto_1.randomUUID)();
        const newInvoice = {
            ...invoice,
            id,
            createdAt: new Date(),
            updatedAt: new Date(),
        };
        this.invoices.set(id, newInvoice);
        return newInvoice;
    }
    async updateInvoice(id, updates) {
        const existing = this.invoices.get(id);
        if (!existing)
            return undefined;
        const updated = { ...existing, ...updates, updatedAt: new Date() };
        this.invoices.set(id, updated);
        return updated;
    }
    async deleteInvoice(id) {
        return this.invoices.delete(id);
    }
    async getPermissions() {
        return [];
    }
    async getRolePermissions() {
        return [];
    }
    async getUserPermissions() {
        return [];
    }
    async getPillars() {
        return Array.from(this.pillars.values()).sort((a, b) => parseInt(a.order) - parseInt(b.order));
    }
    async getPillar(id) {
        return this.pillars.get(id);
    }
    async createPillar(pillar) {
        const id = (0, crypto_1.randomUUID)();
        const newPillar = {
            ...pillar,
            id,
            name: pillar.name,
            description: pillar.description || '',
            status: pillar.status || 'pending',
            order: pillar.order.toString(),
            configuration: pillar.configuration || null,
            createdAt: new Date(),
            updatedAt: new Date(),
        };
        this.pillars.set(id, newPillar);
        return newPillar;
    }
    async updatePillar(id, updates) {
        const existing = this.pillars.get(id);
        if (!existing)
            return undefined;
        const updated = { ...existing, ...updates, updatedAt: new Date() };
        this.pillars.set(id, updated);
        return updated;
    }
    async getWorkspaceStatuses() {
        return Array.from(this.workspaceStatuses.values());
    }
    async getWorkspaceStatus(component) {
        return this.workspaceStatuses.get(component);
    }
    async createWorkspaceStatus(status) {
        const id = (0, crypto_1.randomUUID)();
        const newStatus = {
            ...status,
            id,
            status: status.status,
            component: status.component,
            lastUpdated: new Date(),
        };
        this.workspaceStatuses.set(status.component, newStatus);
        return newStatus;
    }
    async updateWorkspaceStatus(component, updates) {
        const existing = this.workspaceStatuses.get(component);
        if (!existing)
            return undefined;
        const updated = { ...existing, ...updates, updatedAt: new Date() };
        this.workspaceStatuses.set(component, updated);
        return updated;
    }
    async getQualityMetrics() {
        return Array.from(this.qualityMetrics.values());
    }
    async createQualityMetric(metric) {
        const id = (0, crypto_1.randomUUID)();
        const newMetric = {
            ...metric,
            id,
            timestamp: new Date(),
        };
        this.qualityMetrics.set(id, newMetric);
        return newMetric;
    }
    async getFrameworkConfigurations() {
        return Array.from(this.frameworkConfigs.values());
    }
    async createFrameworkConfiguration(config) {
        const id = (0, crypto_1.randomUUID)();
        const newConfig = {
            ...config,
            id,
            description: config.description || '',
            createdAt: new Date(),
            updatedAt: new Date(),
        };
        this.frameworkConfigs.set(config._key, newConfig);
        return newConfig;
    }
    async updateFrameworkConfiguration(key, updates) {
        const existing = this.frameworkConfigs.get(key);
        if (!existing)
            return undefined;
        const updated = { ...existing, ...updates, updatedAt: new Date() };
        this.frameworkConfigs.set(key, updated);
        return updated;
    }
    async getImprovementSuggestions() {
        return Array.from(this.improvementSuggestions.values());
    }
    async createImprovementSuggestion(suggestion) {
        const id = (0, crypto_1.randomUUID)();
        const newSuggestion = {
            ...suggestion,
            id,
            filePath: suggestion.filePath || null,
            status: suggestion.status,
            category: suggestion.category,
            priority: suggestion.priority || 'Medium',
            assignedTo: suggestion.assignedTo || null,
            technicalDetails: suggestion.technicalDetails || null,
            businessImpact: suggestion.businessImpact || null,
            implementationEffort: suggestion.implementationEffort || null,
            quebecComplianceRelevance: suggestion.quebecComplianceRelevance || null,
            suggestedBy: suggestion.suggestedBy || null,
            createdAt: new Date(),
            updatedAt: new Date(),
            acknowledgedAt: null,
            completedAt: null,
        };
        this.improvementSuggestions.set(id, newSuggestion);
        return newSuggestion;
    }
    async updateImprovementSuggestion(id, updates) {
        const existing = this.improvementSuggestions.get(id);
        if (!existing)
            return undefined;
        const updated = { ...existing, ...updates, updatedAt: new Date() };
        this.improvementSuggestions.set(id, updated);
        return updated;
    }
    async getTopImprovementSuggestions(limit) {
        const suggestions = Array.from(this.improvementSuggestions.values());
        // Sort by priority (Critical > High > Medium > Low) then by creation date
        const priorityOrder = { 'Critical': 0, 'High': 1, 'Medium': 2, 'Low': 3 };
        return suggestions
            .sort((a, b) => {
            const priorityA = priorityOrder[a.priority] ?? 999;
            const priorityB = priorityOrder[b.priority] ?? 999;
            const priorityDiff = priorityA - priorityB;
            if (priorityDiff !== 0)
                return priorityDiff;
            return new Date(a.createdAt).getTime() - new Date(b.createdAt).getTime();
        })
            .slice(0, limit);
    }
    async clearNewSuggestions() {
        for (const [id, suggestion] of this.improvementSuggestions.entries()) {
            if (suggestion.status === 'New') {
                this.improvementSuggestions.delete(id);
            }
        }
    }
    async updateSuggestionStatus(id, status) {
        const suggestion = this.improvementSuggestions.get(id);
        if (!suggestion)
            return undefined;
        const updatedSuggestion = {
            ...suggestion,
            status,
            updatedAt: new Date(),
        };
        this.improvementSuggestions.set(id, updatedSuggestion);
        return updatedSuggestion;
    }
    async getFeatures() {
        return Array.from(this.features.values());
    }
    async getFeature(id) {
        return this.features.get(id);
    }
    async createFeature(feature) {
        const id = (0, crypto_1.randomUUID)();
        const newFeature = {
            ...feature,
            id,
            isPublicRoadmap: true,
            createdAt: new Date(),
            updatedAt: new Date(),
            requestedBy: feature.requestedBy || null,
            assignedTo: feature.assignedTo || null,
            estimatedHours: feature.estimatedHours || null,
            businessObjective: feature.businessObjective || null,
            targetUsers: feature.targetUsers || null,
            successMetrics: feature.successMetrics || null,
            technicalComplexity: feature.technicalComplexity || null,
            dependencies: feature.dependencies?.join(',') || null,
            userFlow: feature.userFlow || null,
            actualHours: null,
            startDate: null,
            completedDate: null,
            tags: null,
            metadata: null,
            aiAnalysisResult: null,
            aiAnalyzedAt: null,
            isStrategicPath: false,
            syncedAt: null,
        };
        this.features.set(id, newFeature);
        return newFeature;
    }
    async updateFeature(id, updates) {
        const existing = this.features.get(id);
        if (!existing)
            return undefined;
        const updated = { ...existing, ...updates, updatedAt: new Date() };
        this.features.set(id, updated);
        return updated;
    }
    async getFeaturesByStatus(status) {
        return Array.from(this.features.values()).filter((f) => f.status === status);
    }
    async getPublicRoadmapFeatures() {
        return Array.from(this.features.values()).filter((f) => f.isPublicRoadmap);
    }
    async getActionableItems() {
        return Array.from(this.actionableItems.values());
    }
    async createActionableItem(item) {
        const id = (0, crypto_1.randomUUID)();
        const newItem = {
            ...item,
            id,
            featureId: item.featureId || (0, crypto_1.randomUUID)(),
            createdAt: new Date(),
            updatedAt: new Date(),
            estimatedHours: item.estimatedHours || null,
            actualHours: null,
            dependencies: item.dependencies || null,
            technicalDetails: null,
            implementationPrompt: null,
            testingRequirements: null,
            estimatedEffort: null,
            orderIndex: 0,
            startedAt: null,
            completedAt: null,
        };
        this.actionableItems.set(id, newItem);
        return newItem;
    }
    async updateActionableItem(id, updates) {
        const existing = this.actionableItems.get(id);
        if (!existing)
            return undefined;
        const updated = { ...existing, ...updates, updatedAt: new Date() };
        this.actionableItems.set(id, updated);
        return updated;
    }
    async deleteActionableItem(id) {
        return this.actionableItems.delete(id);
    }
    async getInvitations() {
        return Array.from(this.invitations.values());
    }
    async createInvitation(invitation) {
        const id = (0, crypto_1.randomUUID)();
        const newInvitation = {
            ...invitation,
            id,
            token: (0, crypto_1.randomUUID)(),
            createdAt: new Date(),
            updatedAt: new Date(),
            status: 'pending',
            ipAddress: '',
            userAgent: '',
            tokenHash: null,
            usedAt: null,
            createdByUserId: invitation.invitedByUserId,
            acceptedByUserId: null,
            acceptedAt: null,
            revokedAt: null,
            revokedByUserId: null,
            lastAccessedAt: null,
        };
        this.invitations.set(id, newInvitation);
        return newInvitation;
    }
    async getInvitationByToken(token) {
        return Array.from(this.invitations.values()).find((inv) => inv.token === token);
    }
    async updateInvitation(id, updates) {
        const existing = this.invitations.get(id);
        if (!existing)
            return undefined;
        const updated = { ...existing, ...updates, updatedAt: new Date() };
        this.invitations.set(id, updated);
        return updated;
    }
    async getInvitationAuditLogs() {
        return Array.from(this.invitationAuditLogs.values());
    }
    async createInvitationAuditLog(log) {
        const id = (0, crypto_1.randomUUID)();
        const newLog = {
            ...log,
            id,
            createdAt: new Date(),
            ipAddress: log.ipAddress || '',
            userAgent: log.userAgent || '',
            details: log.details || {},
            previousStatus: log.previousStatus || 'pending',
            newStatus: log.newStatus || 'pending'
        };
        this.invitationAuditLogs.set(id, newLog);
        return newLog;
    }
    async getCommentsByDemand() {
        return [];
    }
    async createDemandComment(comment) {
        const id = (0, crypto_1.randomUUID)();
        return {
            ...comment,
            id,
            createdAt: new Date(),
            updatedAt: new Date(),
        };
    }
    async getBugs() {
        return Array.from(this.bugs.values());
    }
    async getBugsForUser(userId, userRole, organizationId) {
        const allBugs = Array.from(this.bugs.values());
        if (userRole === 'admin') {
            // Admin can see all bugs
            return allBugs;
        }
        else if (userRole === 'manager' && organizationId) {
            // For managers, return all bugs for now (can be refined later based on organization)
            return allBugs;
        }
        else {
            // For residents and tenants, return only their own bugs
            return allBugs.filter(bug => bug.createdBy === userId);
        }
    }
    async getBug(id, userId, role, organizationId) {
        const bug = this.bugs.get(id);
        if (!bug)
            return undefined;
        // If access control parameters are provided, check permissions
        if (userId && role) {
            if (role === 'admin') {
                return bug;
            }
            else if (role === 'manager' && organizationId) {
                return bug;
            }
            else if (bug.createdBy === userId) {
                return bug;
            }
            else {
                return undefined; // Access denied
            }
        }
        return bug;
    }
    async createBug(bug) {
        const id = (0, crypto_1.randomUUID)();
        const newBug = {
            ...bug,
            id,
            status: 'new',
            createdAt: new Date(),
            updatedAt: new Date(),
            reproductionSteps: bug.reproductionSteps || '',
            assignedTo: null,
            resolvedAt: null,
            resolvedBy: null,
            notes: null,
            environment: bug.environment || '',
        };
        this.bugs.set(id, newBug);
        return newBug;
    }
    async updateBug(id, updates, userId, role) {
        const existing = this.bugs.get(id);
        if (!existing)
            return undefined;
        // If access control parameters are provided, check permissions
        if (userId && role) {
            if (role === 'admin' || role === 'manager') {
                // Admin and managers can edit any bug
            }
            else if (existing.createdBy === userId) {
                // Users can edit their own bugs
            }
            else {
                return undefined; // Access denied
            }
        }
        const updated = { ...existing, ...updates, updatedAt: new Date() };
        this.bugs.set(id, updated);
        return updated;
    }
    async deleteBug(id, userId, role) {
        const existing = this.bugs.get(id);
        if (!existing)
            return false;
        // Check permissions - only admins and bug creators can delete bugs
        if (role === 'admin' || existing.createdBy === userId) {
            this.bugs.delete(id);
            return true;
        }
        return false; // Access denied
    }
    async getFeatureRequests() {
        const featureRequests = Array.from(this.featureRequests.values());
        // Add attachment information to each feature request
        const enrichedRequests = await Promise.all(featureRequests.map(async (request) => {
            // For now, return empty attachments - will be implemented once storage is fixed
            const attachments = [];
            return {
                ...request,
                attachmentCount: attachments.length,
                attachments: []
            };
        }));
        return enrichedRequests;
    }
    async getFeatureRequestsForUser(userId, role, organizationId) {
        // For now, just return all feature requests - proper filtering can be added later
        return this.getFeatureRequests();
    }
    async getFeatureRequest(id, userId, role, organizationId) {
        const request = this.featureRequests.get(id);
        if (!request)
            return undefined;
        // For now, return empty attachments - will be implemented once storage is fixed
        const attachments = [];
        return {
            ...request,
            attachmentCount: attachments.length,
            attachments: []
        };
    }
    async createFeatureRequest(request) {
        const id = (0, crypto_1.randomUUID)();
        const newRequest = {
            ...request,
            id,
            status: 'submitted',
            createdAt: new Date(),
            updatedAt: new Date(),
            upvoteCount: 0,
            assignedTo: null,
            reviewedBy: null,
            reviewedAt: null,
            estimatedHours: null,
            mergedIntoId: null,
        };
        this.featureRequests.set(id, newRequest);
        return newRequest;
    }
    async updateFeatureRequest(id, updates) {
        const existing = this.featureRequests.get(id);
        if (!existing)
            return undefined;
        const updated = { ...existing, ...updates, updatedAt: new Date() };
        this.featureRequests.set(id, updated);
        return updated;
    }
    async addFeatureRequestUpvote() {
        return { success: true, message: 'Upvote added' };
    }
    async removeFeatureRequestUpvote() {
        return { success: true, message: 'Upvote removed' };
    }
}
exports.MemStorage = MemStorage;
// Import the database storage implementation
const optimized_db_storage_1 = require("./optimized-db-storage");
// Production fallback storage - try database first, fall back to memory if authentication fails
class ProductionFallbackStorage {
    constructor() {
        this.usingFallback = false;
        this.dbStorage = new optimized_db_storage_1.OptimizedDatabaseStorage();
        this.memStorage = new MemStorage();
    }
    async safeDbOperation(operation) {
        if (this.usingFallback) {
            throw new Error('Database unavailable, using memory storage');
        }
        try {
            return await operation();
        }
        catch (error) {
            // Check if it's a database authentication error
            if (error.message?.includes('password authentication failed') ||
                error.message?.includes('neondb_owner') ||
                error.cause?.message?.includes('password authentication failed')) {
                // Database authentication failed, switching to memory storage for production stability
                this.usingFallback = true;
                // Initialize memory storage with production admin user
                await this.initializeFallbackData();
                throw new Error('Database unavailable, using memory storage');
            }
            throw error;
        }
    }
    async initializeFallbackData() {
        // Create the production admin user in memory storage
        const adminUser = {
            id: 'f35647de-5f16-46f2-b30b-09e0469356b1',
            username: 'kevin.hervieux',
            email: 'kevin.hervieux@koveo-gestion.com',
            password: '$2b$12$sAJXEcITZg5ItQou312JsucLyzByPC6lF7CLvrrLkhxKd1EyfSxda', // admin123
            firstName: 'Kevin',
            lastName: 'Hervieux',
            phone: '',
            profileImage: '',
            language: 'fr',
            role: 'admin',
            isActive: true,
            lastLoginAt: null,
            createdAt: new Date(),
            updatedAt: new Date(),
        };
        await this.memStorage.createUser(adminUser);
        // Create default organization for admin user
        const defaultOrg = {
            id: 'koveo-org-main',
            name: 'Koveo Gestion',
            type: 'property_management',
            address: '123 Quebec Street',
            city: 'Montreal',
            province: 'QC',
            postalCode: 'H1A 1A1',
            phone: '+1-514-555-0100',
            email: 'contact@koveo-gestion.com',
            website: 'https://koveo-gestion.com',
            description: 'Main Koveo property management organization',
            isActive: true,
            createdAt: new Date(),
            updatedAt: new Date(),
        };
        await this.memStorage.createOrganization(defaultOrg);
        // Associate admin user with the organization
        // For memory storage, we'll just ensure the user has access to the organization
        // This is handled by the user's role being 'admin' which gives access to all organizations
        // Production fallback initialized successfully
    }
    // User operations with fallback
    async getUserByEmail(email) {
        // Debug logging removed
        try {
            const user = await this.safeDbOperation(() => this.dbStorage.getUserByEmail(email));
            // Debug logging removed
            return user;
        }
        catch (error) {
            // Error handling maintained without debug logging
            throw error;
        }
    }
    async getUsers() {
        return await this.safeDbOperation(() => this.dbStorage.getUsers());
    }
    async getUsersWithAssignments() {
        return await this.safeDbOperation(() => this.dbStorage.getUsersWithAssignments());
    }
    async getUsersByOrganizations(userId) {
        try {
            return await this.safeDbOperation(() => this.dbStorage.getUsersByOrganizations(userId));
        }
        catch {
            return this.memStorage.getUsersByOrganizations(userId);
        }
    }
    async getUser(id) {
        return await this.safeDbOperation(() => this.dbStorage.getUser(id));
    }
    async getUserOrganizations(userId) {
        try {
            return await this.safeDbOperation(() => this.dbStorage.getUserOrganizations(userId));
        }
        catch {
            return this.memStorage.getUserOrganizations(userId);
        }
    }
    async getUserResidences(userId) {
        try {
            return await this.safeDbOperation(() => this.dbStorage.getUserResidences(userId));
        }
        catch {
            return this.memStorage.getUserResidences(userId);
        }
    }
    async createUser(user) {
        try {
            return await this.safeDbOperation(() => this.dbStorage.createUser(user));
        }
        catch {
            return this.memStorage.createUser(user);
        }
    }
    async updateUser(id, updates) {
        return await this.safeDbOperation(() => this.dbStorage.updateUser(id, updates));
    }
    // Password reset operations
    async createPasswordResetToken(token) {
        try {
            return await this.safeDbOperation(() => this.dbStorage.createPasswordResetToken(token));
        }
        catch {
            return this.memStorage.createPasswordResetToken(token);
        }
    }
    async getPasswordResetToken(token) {
        try {
            return await this.safeDbOperation(() => this.dbStorage.getPasswordResetToken(token));
        }
        catch {
            return this.memStorage.getPasswordResetToken(token);
        }
    }
    async markPasswordResetTokenAsUsed(tokenId) {
        try {
            return await this.safeDbOperation(() => this.dbStorage.markPasswordResetTokenAsUsed(tokenId));
        }
        catch {
            return this.memStorage.markPasswordResetTokenAsUsed(tokenId);
        }
    }
    async cleanupExpiredPasswordResetTokens() {
        try {
            return await this.safeDbOperation(() => this.dbStorage.cleanupExpiredPasswordResetTokens());
        }
        catch {
            return this.memStorage.cleanupExpiredPasswordResetTokens();
        }
    }
    // Delegate all other methods to the appropriate storage
    async getOrganizations() {
        try {
            return await this.safeDbOperation(() => this.dbStorage.getOrganizations());
        }
        catch {
            return this.memStorage.getOrganizations();
        }
    }
    async getOrganization(id) {
        try {
            return await this.safeDbOperation(() => this.dbStorage.getOrganization(id));
        }
        catch {
            return this.memStorage.getOrganization(id);
        }
    }
    async createOrganization(org) {
        try {
            return await this.safeDbOperation(() => this.dbStorage.createOrganization(org));
        }
        catch {
            return this.memStorage.createOrganization(org);
        }
    }
    async updateOrganization(id, updates) {
        try {
            return await this.safeDbOperation(() => this.dbStorage.updateOrganization(id, updates));
        }
        catch {
            return this.memStorage.updateOrganization(id, updates);
        }
    }
    async deleteOrganization(id) {
        try {
            return await this.safeDbOperation(() => this.dbStorage.deleteOrganization(id));
        }
        catch {
            return this.memStorage.deleteOrganization(id);
        }
    }
    // Buildings
    async getBuildings() {
        try {
            return await this.safeDbOperation(() => this.dbStorage.getBuildings());
        }
        catch {
            return this.memStorage.getBuildings();
        }
    }
    async getBuildingsByOrganization(organizationId) {
        try {
            return await this.safeDbOperation(() => this.dbStorage.getBuildingsByOrganization(organizationId));
        }
        catch {
            return this.memStorage.getBuildingsByOrganization(organizationId);
        }
    }
    async getBuilding(id) {
        try {
            return await this.safeDbOperation(() => this.dbStorage.getBuilding(id));
        }
        catch {
            return this.memStorage.getBuilding(id);
        }
    }
    async createBuilding(building) {
        try {
            return await this.safeDbOperation(() => this.dbStorage.createBuilding(building));
        }
        catch {
            return this.memStorage.createBuilding(building);
        }
    }
    async updateBuilding(id, updates) {
        try {
            return await this.safeDbOperation(() => this.dbStorage.updateBuilding(id, updates));
        }
        catch {
            return this.memStorage.updateBuilding(id, updates);
        }
    }
    async deleteBuilding(id) {
        try {
            return await this.safeDbOperation(() => this.dbStorage.deleteBuilding(id));
        }
        catch {
            return this.memStorage.deleteBuilding(id);
        }
    }
    // Residences
    async getResidences() {
        try {
            return await this.safeDbOperation(() => this.dbStorage.getResidences());
        }
        catch {
            return this.memStorage.getResidences();
        }
    }
    async getResidencesByBuilding(buildingId) {
        try {
            return await this.safeDbOperation(() => this.dbStorage.getResidencesByBuilding(buildingId));
        }
        catch {
            return this.memStorage.getResidencesByBuilding(buildingId);
        }
    }
    async getResidence(id) {
        try {
            return await this.safeDbOperation(() => this.dbStorage.getResidence(id));
        }
        catch {
            return this.memStorage.getResidence(id);
        }
    }
    async createResidence(residence) {
        try {
            return await this.safeDbOperation(() => this.dbStorage.createResidence(residence));
        }
        catch {
            return this.memStorage.createResidence(residence);
        }
    }
    async updateResidence(id, updates) {
        try {
            return await this.safeDbOperation(() => this.dbStorage.updateResidence(id, updates));
        }
        catch {
            return this.memStorage.updateResidence(id, updates);
        }
    }
    async deleteResidence(id) {
        try {
            return await this.safeDbOperation(() => this.dbStorage.deleteResidence(id));
        }
        catch {
            return this.memStorage.deleteResidence(id);
        }
    }
    // All other methods - implement fallback pattern for remaining interface methods
    async getContacts() {
        try {
            return await this.safeDbOperation(() => this.dbStorage.getContacts());
        }
        catch {
            return this.memStorage.getContacts();
        }
    }
    async getContact(id) {
        try {
            return await this.safeDbOperation(() => this.dbStorage.getContact(id));
        }
        catch {
            return this.memStorage.getContact(id);
        }
    }
    async createContact(contact) {
        try {
            return await this.safeDbOperation(() => this.dbStorage.createContact(contact));
        }
        catch {
            return this.memStorage.createContact(contact);
        }
    }
    async updateContact(id, updates) {
        try {
            return await this.safeDbOperation(() => this.dbStorage.updateContact(id, updates));
        }
        catch {
            return this.memStorage.updateContact(id, updates);
        }
    }
    async deleteContact(id) {
        try {
            return await this.safeDbOperation(() => this.dbStorage.deleteContact(id));
        }
        catch {
            return this.memStorage.deleteContact(id);
        }
    }
    // Stub implementations for remaining interface methods - add all other required methods
    async getDocuments() {
        return [];
    }
    async getDocument(id) {
        return undefined;
    }
    async createDocument(doc) {
        throw new Error('Not implemented in fallback');
    }
    async updateDocument(id, updates) {
        return undefined;
    }
    async deleteDocument(id) {
        return false;
    }
    async getDocumentsByBuilding(buildingId) {
        return [];
    }
    async createDocumentBuilding(doc) {
        // Note: External storage integration removed
        const id = (0, crypto_1.randomUUID)();
        return {
            ...doc,
            id,
            createdAt: new Date(),
            updatedAt: new Date(),
        };
    }
    async deleteDocumentBuilding(documentId, buildingId) {
        return false;
    }
    async getDocumentsByResident(residentId) {
        return [];
    }
    async createDocumentResident(doc) {
        // Note: External storage integration removed
        const id = (0, crypto_1.randomUUID)();
        return {
            ...doc,
            id,
            createdAt: new Date(),
            updatedAt: new Date(),
        };
    }
    async deleteDocumentResident(documentId, residentId) {
        return false;
    }
    async getPillars() {
        return [];
    }
    async getPillar(id) {
        return undefined;
    }
    async createPillar(pillar) {
        throw new Error('Not implemented in fallback');
    }
    async updatePillar(id, updates) {
        return undefined;
    }
    async getWorkspaceStatuses() {
        return [];
    }
    async getWorkspaceStatus(id) {
        return undefined;
    }
    async createWorkspaceStatus(status) {
        throw new Error('Not implemented in fallback');
    }
    async updateWorkspaceStatus(id, updates) {
        return undefined;
    }
    async getQualityMetrics() {
        return [];
    }
    async getQualityMetric(id) {
        return undefined;
    }
    async createQualityMetric(metric) {
        throw new Error('Not implemented in fallback');
    }
    async updateQualityMetric(id, updates) {
        return undefined;
    }
    async getFrameworkConfigurations() {
        return [];
    }
    async getFrameworkConfiguration(id) {
        return undefined;
    }
    async createFrameworkConfiguration(config) {
        throw new Error('Not implemented in fallback');
    }
    async updateFrameworkConfiguration(id, updates) {
        return undefined;
    }
    async getImprovementSuggestions() {
        return [];
    }
    async getImprovementSuggestion(id) {
        return undefined;
    }
    async createImprovementSuggestion(suggestion) {
        throw new Error('Not implemented in fallback');
    }
    async updateImprovementSuggestion(id, updates) {
        return undefined;
    }
    async getFeatures() {
        return [];
    }
    async getFeature(id) {
        return undefined;
    }
    async createFeature(feature) {
        throw new Error('Not implemented in fallback');
    }
    async updateFeature(id, updates) {
        return undefined;
    }
    async getActionableItems() {
        return [];
    }
    async getActionableItem(id) {
        return undefined;
    }
    async createActionableItem(item) {
        throw new Error('Not implemented in fallback');
    }
    async updateActionableItem(id, updates) {
        return undefined;
    }
    async getInvitations() {
        return [];
    }
    async getInvitation(id) {
        return undefined;
    }
    async getInvitationByToken(token) {
        return undefined;
    }
    async createInvitation(invitation) {
        throw new Error('Not implemented in fallback');
    }
    async updateInvitation(id, updates) {
        return undefined;
    }
    async deleteInvitation(id) {
        return false;
    }
    async getPermissions() {
        return [];
    }
    async getPermission(id) {
        return undefined;
    }
    async getRolePermissions(role) {
        return [];
    }
    async getUserPermissions(userId) {
        return [];
    }
    async hasPermission(userId, permission) {
        return true;
    } // Admin fallback
    async getBugs() {
        return [];
    }
    async getBugsForUser(userId, userRole, organizationId) {
        return [];
    }
    async getBug(id, userId, role, organizationId) {
        return undefined;
    }
    async createBug(bug) {
        throw new Error('Not implemented in fallback');
    }
    async updateBug(id, updates, userId, role) {
        return undefined;
    }
    async deleteBug(id, userId, role) {
        return false;
    }
    async getFeatureRequests() {
        return [];
    }
    async getFeatureRequest(id) {
        return undefined;
    }
    async createFeatureRequest(request) {
        throw new Error('Not implemented in fallback');
    }
    async updateFeatureRequest(id, updates) {
        return undefined;
    }
    async addFeatureRequestUpvote(featureRequestId, userId) {
        return { success: true, message: 'Fallback mode' };
    }
    async removeFeatureRequestUpvote(featureRequestId, userId) {
        return { success: true, message: 'Fallback mode' };
    }
}
// Use optimized database storage for production
exports.storage = new optimized_db_storage_1.OptimizedDatabaseStorage();
// Export the OptimizedDatabaseStorage class for direct usage
var optimized_db_storage_2 = require("./optimized-db-storage");
Object.defineProperty(exports, "OptimizedDatabaseStorage", { enumerable: true, get: function () { return optimized_db_storage_2.OptimizedDatabaseStorage; } });
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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O1FBRWQsT0FBTyxFQUFFLE9BQU8sRUFBRSxJQUFJLEVBQUUsT0FBTyxFQUFFLGVBQWUsRUFBRSxDQUFDO0lBQ3JELENBQUM7Q0FLRjtBQUVELGdEQUFnRDtBQUNuQyxRQUFBLE9BQU8sR0FBRyxJQUFJLCtDQUF3QixFQUFFLENBQUM7QUFFdEQsNkRBQTZEO0FBQzdELCtEQUFrRTtBQUF6RCxnSUFBQSx3QkFBd0IsT0FBQSIsIm5hbWVzIjpbXSwic291cmNlcyI6WyIvaG9tZS9ydW5uZXIvd29ya3NwYWNlL3NlcnZlci9zdG9yYWdlLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7XG4gIHR5cGUgVXNlcixcbiAgdHlwZSBJbnNlcnRVc2VyLFxuICB0eXBlIE9yZ2FuaXphdGlvbixcbiAgdHlwZSBJbnNlcnRPcmdhbml6YXRpb24sXG4gIHR5cGUgQnVpbGRpbmcsXG4gIHR5cGUgSW5zZXJ0QnVpbGRpbmcsXG4gIHR5cGUgUmVzaWRlbmNlLFxuICB0eXBlIEluc2VydFJlc2lkZW5jZSxcbiAgdHlwZSBDb250YWN0LFxuICB0eXBlIEluc2VydENvbnRhY3QsXG4gIHR5cGUgRG9jdW1lbnQsXG4gIHR5cGUgSW5zZXJ0RG9jdW1lbnQsXG4gIHR5cGUgSW52b2ljZSxcbiAgdHlwZSBJbnNlcnRJbnZvaWNlLFxuICB0eXBlIFBpbGxhcixcbiAgdHlwZSBJbnNlcnRQaWxsYXIsXG4gIHR5cGUgV29ya3NwYWNlU3RhdHVzLFxuICB0eXBlIEluc2VydFdvcmtzcGFjZVN0YXR1cyxcbiAgdHlwZSBRdWFsaXR5TWV0cmljLFxuICB0eXBlIEluc2VydFF1YWxpdHlNZXRyaWMsXG4gIHR5cGUgRnJhbWV3b3JrQ29uZmlndXJhdGlvbixcbiAgdHlwZSBJbnNlcnRGcmFtZXdvcmtDb25maWd1cmF0aW9uLFxuICB0eXBlIEltcHJvdmVtZW50U3VnZ2VzdGlvbixcbiAgdHlwZSBJbnNlcnRJbXByb3ZlbWVudFN1Z2dlc3Rpb24sXG4gIHR5cGUgRmVhdHVyZSxcbiAgdHlwZSBJbnNlcnRGZWF0dXJlLFxuICB0eXBlIEFjdGlvbmFibGVJdGVtLFxuICB0eXBlIEluc2VydEFjdGlvbmFibGVJdGVtLFxuICB0eXBlIEludml0YXRpb24sXG4gIHR5cGUgSW5zZXJ0SW52aXRhdGlvbixcbiAgdHlwZSBJbnZpdGF0aW9uQXVkaXRMb2csXG4gIHR5cGUgSW5zZXJ0SW52aXRhdGlvbkF1ZGl0TG9nLFxuICB0eXBlIFBlcm1pc3Npb24sXG4gIHR5cGUgUm9sZVBlcm1pc3Npb24sXG4gIHR5cGUgVXNlclBlcm1pc3Npb24sXG4gIHR5cGUgUGFzc3dvcmRSZXNldFRva2VuLFxuICB0eXBlIEluc2VydFBhc3N3b3JkUmVzZXRUb2tlbixcbiAgdHlwZSBCdWcsXG4gIHR5cGUgSW5zZXJ0QnVnLFxuICB0eXBlIEZlYXR1cmVSZXF1ZXN0LFxuICB0eXBlIEluc2VydEZlYXR1cmVSZXF1ZXN0LFxuICB0eXBlIEZlYXR1cmVSZXF1ZXN0VXB2b3RlLFxuICB0eXBlIEluc2VydEZlYXR1cmVSZXF1ZXN0VXB2b3RlLFxufSBmcm9tICdAc2hhcmVkL3NjaGVtYSc7XG5pbXBvcnQge1xuICB0eXBlIERlbWFuZCxcbiAgdHlwZSBJbnNlcnREZW1hbmQsXG4gIHR5cGUgRGVtYW5kQ29tbWVudCxcbiAgdHlwZSBJbnNlcnREZW1hbmRDb21tZW50LFxufSBmcm9tICdAc2hhcmVkL3NjaGVtYXMvb3BlcmF0aW9ucyc7XG5pbXBvcnQgeyByYW5kb21VVUlEIH0gZnJvbSAnY3J5cHRvJztcblxuZXhwb3J0IGludGVyZmFjZSBJU3RvcmFnZSB7XG4gIC8vIFVzZXIgb3BlcmF0aW9uc1xuICBnZXRVc2VycygpOiBQcm9taXNlPFVzZXJbXT47XG4gIGdldFVzZXJzV2l0aEFzc2lnbm1lbnRzKCk6IFByb21pc2U8QXJyYXk8VXNlciAmIHsgb3JnYW5pemF0aW9uczogQXJyYXk8eyBpZDogc3RyaW5nOyBuYW1lOiBzdHJpbmc7IHR5cGU6IHN0cmluZyB9PjsgYnVpbGRpbmdzOiBBcnJheTx7IGlkOiBzdHJpbmc7IG5hbWU6IHN0cmluZyB9PjsgcmVzaWRlbmNlczogQXJyYXk8eyBpZDogc3RyaW5nOyB1bml0TnVtYmVyOiBzdHJpbmc7IGJ1aWxkaW5nSWQ6IHN0cmluZzsgYnVpbGRpbmdOYW1lOiBzdHJpbmcgfT4gfT4+O1xuICBnZXRVc2Vyc0J5T3JnYW5pemF0aW9ucyhfdXNlcklkOiBzdHJpbmcpOiBQcm9taXNlPFVzZXJbXT47XG4gIGdldFVzZXIoX2lkOiBzdHJpbmcpOiBQcm9taXNlPFVzZXIgfCB1bmRlZmluZWQ+O1xuICBnZXRVc2VyT3JnYW5pemF0aW9ucyhfdXNlcklkOiBzdHJpbmcpOiBQcm9taXNlPEFycmF5PHsgb3JnYW5pemF0aW9uSWQ6IHN0cmluZyB9Pj47XG4gIGdldFVzZXJSZXNpZGVuY2VzKF91c2VySWQ6IHN0cmluZyk6IFByb21pc2U8QXJyYXk8eyByZXNpZGVuY2VJZDogc3RyaW5nIH0+PjtcbiAgZ2V0VXNlckJ5RW1haWwoX2VtYWlsOiBzdHJpbmcpOiBQcm9taXNlPFVzZXIgfCB1bmRlZmluZWQ+O1xuICBjcmVhdGVVc2VyKF91c2VyOiBJbnNlcnRVc2VyKTogUHJvbWlzZTxVc2VyPjtcbiAgdXBkYXRlVXNlcihfaWQ6IHN0cmluZywgX3VwZGF0ZXM6IFBhcnRpYWw8VXNlcj4pOiBQcm9taXNlPFVzZXIgfCB1bmRlZmluZWQ+O1xuXG4gIC8vIFBhc3N3b3JkIHJlc2V0IG9wZXJhdGlvbnNcbiAgY3JlYXRlUGFzc3dvcmRSZXNldFRva2VuKF90b2tlbjogSW5zZXJ0UGFzc3dvcmRSZXNldFRva2VuKTogUHJvbWlzZTxQYXNzd29yZFJlc2V0VG9rZW4+O1xuICBnZXRQYXNzd29yZFJlc2V0VG9rZW4oX3Rva2VuOiBzdHJpbmcpOiBQcm9taXNlPFBhc3N3b3JkUmVzZXRUb2tlbiB8IHVuZGVmaW5lZD47XG4gIG1hcmtQYXNzd29yZFJlc2V0VG9rZW5Bc1VzZWQoX3Rva2VuSWQ6IHN0cmluZyk6IFByb21pc2U8UGFzc3dvcmRSZXNldFRva2VuIHwgdW5kZWZpbmVkPjtcbiAgY2xlYW51cEV4cGlyZWRQYXNzd29yZFJlc2V0VG9rZW5zKCk6IFByb21pc2U8bnVtYmVyPjtcblxuICAvLyBPcmdhbml6YXRpb24gb3BlcmF0aW9uc1xuICBnZXRPcmdhbml6YXRpb25zKCk6IFByb21pc2U8T3JnYW5pemF0aW9uW10+O1xuICBnZXRPcmdhbml6YXRpb24oX2lkOiBzdHJpbmcpOiBQcm9taXNlPE9yZ2FuaXphdGlvbiB8IHVuZGVmaW5lZD47XG4gIGdldE9yZ2FuaXphdGlvbkJ5TmFtZShfbmFtZTogc3RyaW5nKTogUHJvbWlzZTxPcmdhbml6YXRpb24gfCB1bmRlZmluZWQ+O1xuICBjcmVhdGVPcmdhbml6YXRpb24oX29yZ2FuaXphdGlvbjogSW5zZXJ0T3JnYW5pemF0aW9uKTogUHJvbWlzZTxPcmdhbml6YXRpb24+O1xuICB1cGRhdGVPcmdhbml6YXRpb24oXG4gICAgX2lkOiBzdHJpbmcsXG4gICAgX3VwZGF0ZXM6IFBhcnRpYWw8T3JnYW5pemF0aW9uPlxuICApOiBQcm9taXNlPE9yZ2FuaXphdGlvbiB8IHVuZGVmaW5lZD47XG4gIGdldEJ1aWxkaW5nc0J5T3JnYW5pemF0aW9uKF9vcmdhbml6YXRpb25JZDogc3RyaW5nKTogUHJvbWlzZTxCdWlsZGluZ1tdPjtcblxuICAvLyBCdWlsZGluZyBvcGVyYXRpb25zXG4gIGdldEJ1aWxkaW5ncygpOiBQcm9taXNlPEJ1aWxkaW5nW10+O1xuICBnZXRCdWlsZGluZyhfaWQ6IHN0cmluZyk6IFByb21pc2U8QnVpbGRpbmcgfCB1bmRlZmluZWQ+O1xuICBjcmVhdGVCdWlsZGluZyhfYnVpbGRpbmc6IEluc2VydEJ1aWxkaW5nKTogUHJvbWlzZTxCdWlsZGluZz47XG4gIHVwZGF0ZUJ1aWxkaW5nKF9pZDogc3RyaW5nLCBfdXBkYXRlczogUGFydGlhbDxCdWlsZGluZz4pOiBQcm9taXNlPEJ1aWxkaW5nIHwgdW5kZWZpbmVkPjtcbiAgZGVsZXRlQnVpbGRpbmcoX2lkOiBzdHJpbmcpOiBQcm9taXNlPGJvb2xlYW4+O1xuXG4gIC8vIFJlc2lkZW5jZSBvcGVyYXRpb25zXG4gIGdldFJlc2lkZW5jZXMoKTogUHJvbWlzZTxSZXNpZGVuY2VbXT47XG4gIGdldFJlc2lkZW5jZShfaWQ6IHN0cmluZyk6IFByb21pc2U8UmVzaWRlbmNlIHwgdW5kZWZpbmVkPjtcbiAgZ2V0UmVzaWRlbmNlc0J5QnVpbGRpbmcoX2J1aWxkaW5nSWQ6IHN0cmluZyk6IFByb21pc2U8UmVzaWRlbmNlW10+O1xuICBjcmVhdGVSZXNpZGVuY2UoX3Jlc2lkZW5jZTogSW5zZXJ0UmVzaWRlbmNlKTogUHJvbWlzZTxSZXNpZGVuY2U+O1xuICB1cGRhdGVSZXNpZGVuY2UoX2lkOiBzdHJpbmcsIF91cGRhdGVzOiBQYXJ0aWFsPFJlc2lkZW5jZT4pOiBQcm9taXNlPFJlc2lkZW5jZSB8IHVuZGVmaW5lZD47XG4gIGRlbGV0ZVJlc2lkZW5jZShfaWQ6IHN0cmluZyk6IFByb21pc2U8Ym9vbGVhbj47XG5cbiAgLy8gQ29udGFjdCBvcGVyYXRpb25zXG4gIGdldENvbnRhY3RzKCk6IFByb21pc2U8Q29udGFjdFtdPjtcbiAgZ2V0Q29udGFjdHNCeUVudGl0eShcbiAgICBfZW50aXR5SWQ6IHN0cmluZyxcbiAgICBfZW50aXR5OiAnb3JnYW5pemF0aW9uJyB8ICdidWlsZGluZycgfCAncmVzaWRlbmNlJ1xuICApOiBQcm9taXNlPENvbnRhY3RbXT47XG4gIGdldENvbnRhY3RzRm9yUmVzaWRlbmNlKF9yZXNpZGVuY2VJZDogc3RyaW5nKTogUHJvbWlzZTxBcnJheTxDb250YWN0ICYgeyB1c2VyOiBVc2VyIH0+PjtcbiAgY3JlYXRlQ29udGFjdChfY29udGFjdDogSW5zZXJ0Q29udGFjdCk6IFByb21pc2U8Q29udGFjdD47XG4gIHVwZGF0ZUNvbnRhY3QoX2lkOiBzdHJpbmcsIF91cGRhdGVzOiBQYXJ0aWFsPENvbnRhY3Q+KTogUHJvbWlzZTxDb250YWN0IHwgdW5kZWZpbmVkPjtcbiAgZGVsZXRlQ29udGFjdChfaWQ6IHN0cmluZyk6IFByb21pc2U8Ym9vbGVhbj47XG5cbiAgLy8gRG9jdW1lbnQgb3BlcmF0aW9uc1xuICBnZXREb2N1bWVudHMoX2ZpbHRlcnM/OiB7XG4gICAgYnVpbGRpbmdJZD86IHN0cmluZztcbiAgICByZXNpZGVuY2VJZD86IHN0cmluZztcbiAgICBkb2N1bWVudFR5cGU/OiBzdHJpbmc7XG4gICAgdXNlcklkPzogc3RyaW5nO1xuICAgIHVzZXJSb2xlPzogc3RyaW5nO1xuICB9KTogUHJvbWlzZTxEb2N1bWVudFtdPjtcbiAgZ2V0RG9jdW1lbnQoX2lkOiBzdHJpbmcpOiBQcm9taXNlPERvY3VtZW50IHwgdW5kZWZpbmVkPjtcbiAgY3JlYXRlRG9jdW1lbnQoX2RvY3VtZW50OiBJbnNlcnREb2N1bWVudCk6IFByb21pc2U8RG9jdW1lbnQ+O1xuICB1cGRhdGVEb2N1bWVudChfaWQ6IHN0cmluZywgX3VwZGF0ZXM6IFBhcnRpYWw8RG9jdW1lbnQ+KTogUHJvbWlzZTxEb2N1bWVudCB8IHVuZGVmaW5lZD47XG4gIGRlbGV0ZURvY3VtZW50KF9pZDogc3RyaW5nKTogUHJvbWlzZTxib29sZWFuPjtcblxuICAvLyBJbnZvaWNlIG9wZXJhdGlvbnNcbiAgZ2V0SW52b2ljZXMoX2ZpbHRlcnM/OiB7XG4gICAgYnVpbGRpbmdJZD86IHN0cmluZztcbiAgICByZXNpZGVuY2VJZD86IHN0cmluZztcbiAgICB1c2VySWQ/OiBzdHJpbmc7XG4gICAgdXNlclJvbGU/OiBzdHJpbmc7XG4gIH0pOiBQcm9taXNlPEludm9pY2VbXT47XG4gIGdldEludm9pY2UoX2lkOiBzdHJpbmcpOiBQcm9taXNlPEludm9pY2UgfCB1bmRlZmluZWQ+O1xuICBjcmVhdGVJbnZvaWNlKF9pbnZvaWNlOiBJbnNlcnRJbnZvaWNlKTogUHJvbWlzZTxJbnZvaWNlPjtcbiAgdXBkYXRlSW52b2ljZShfaWQ6IHN0cmluZywgX3VwZGF0ZXM6IFBhcnRpYWw8SW52b2ljZT4pOiBQcm9taXNlPEludm9pY2UgfCB1bmRlZmluZWQ+O1xuICBkZWxldGVJbnZvaWNlKF9pZDogc3RyaW5nKTogUHJvbWlzZTxib29sZWFuPjtcblxuICAvLyBQZXJtaXNzaW9uIG9wZXJhdGlvbnNcbiAgZ2V0UGVybWlzc2lvbnMoKTogUHJvbWlzZTxQZXJtaXNzaW9uW10+O1xuICBnZXRSb2xlUGVybWlzc2lvbnMoKTogUHJvbWlzZTxSb2xlUGVybWlzc2lvbltdPjtcbiAgZ2V0VXNlclBlcm1pc3Npb25zKCk6IFByb21pc2U8VXNlclBlcm1pc3Npb25bXT47XG5cbiAgLy8gRGV2ZWxvcG1lbnQgb3BlcmF0aW9uc1xuICBnZXRQaWxsYXJzKCk6IFByb21pc2U8UGlsbGFyW10+O1xuICBnZXRQaWxsYXIoX2lkOiBzdHJpbmcpOiBQcm9taXNlPFBpbGxhciB8IHVuZGVmaW5lZD47XG4gIGNyZWF0ZVBpbGxhcihfcGlsbGFyOiBJbnNlcnRQaWxsYXIpOiBQcm9taXNlPFBpbGxhcj47XG4gIHVwZGF0ZVBpbGxhcihfaWQ6IHN0cmluZywgX3BpbGxhcjogUGFydGlhbDxQaWxsYXI+KTogUHJvbWlzZTxQaWxsYXIgfCB1bmRlZmluZWQ+O1xuICBnZXRXb3Jrc3BhY2VTdGF0dXNlcygpOiBQcm9taXNlPFdvcmtzcGFjZVN0YXR1c1tdPjtcbiAgZ2V0V29ya3NwYWNlU3RhdHVzKF9jb21wb25lbnQ6IHN0cmluZyk6IFByb21pc2U8V29ya3NwYWNlU3RhdHVzIHwgdW5kZWZpbmVkPjtcbiAgY3JlYXRlV29ya3NwYWNlU3RhdHVzKF9zdGF0dXM6IEluc2VydFdvcmtzcGFjZVN0YXR1cyk6IFByb21pc2U8V29ya3NwYWNlU3RhdHVzPjtcbiAgdXBkYXRlV29ya3NwYWNlU3RhdHVzKFxuICAgIF9jb21wb25lbnQ6IHN0cmluZyxcbiAgICBfc3RhdHVzOiBQYXJ0aWFsPFdvcmtzcGFjZVN0YXR1cz5cbiAgKTogUHJvbWlzZTxXb3Jrc3BhY2VTdGF0dXMgfCB1bmRlZmluZWQ+O1xuICBnZXRRdWFsaXR5TWV0cmljcygpOiBQcm9taXNlPFF1YWxpdHlNZXRyaWNbXT47XG4gIGNyZWF0ZVF1YWxpdHlNZXRyaWMoX21ldHJpYzogSW5zZXJ0UXVhbGl0eU1ldHJpYyk6IFByb21pc2U8UXVhbGl0eU1ldHJpYz47XG4gIGdldEZyYW1ld29ya0NvbmZpZ3VyYXRpb25zKCk6IFByb21pc2U8RnJhbWV3b3JrQ29uZmlndXJhdGlvbltdPjtcbiAgY3JlYXRlRnJhbWV3b3JrQ29uZmlndXJhdGlvbihcbiAgICBfY29uZmlnOiBJbnNlcnRGcmFtZXdvcmtDb25maWd1cmF0aW9uXG4gICk6IFByb21pc2U8RnJhbWV3b3JrQ29uZmlndXJhdGlvbj47XG4gIHVwZGF0ZUZyYW1ld29ya0NvbmZpZ3VyYXRpb24oXG4gICAgX2tleTogc3RyaW5nLFxuICAgIF9jb25maWc6IFBhcnRpYWw8RnJhbWV3b3JrQ29uZmlndXJhdGlvbj5cbiAgKTogUHJvbWlzZTxGcmFtZXdvcmtDb25maWd1cmF0aW9uIHwgdW5kZWZpbmVkPjtcbiAgZ2V0SW1wcm92ZW1lbnRTdWdnZXN0aW9ucygpOiBQcm9taXNlPEltcHJvdmVtZW50U3VnZ2VzdGlvbltdPjtcbiAgY3JlYXRlSW1wcm92ZW1lbnRTdWdnZXN0aW9uKFxuICAgIF9zdWdnZXN0aW9uOiBJbnNlcnRJbXByb3ZlbWVudFN1Z2dlc3Rpb25cbiAgKTogUHJvbWlzZTxJbXByb3ZlbWVudFN1Z2dlc3Rpb24+O1xuICB1cGRhdGVJbXByb3ZlbWVudFN1Z2dlc3Rpb24oXG4gICAgX2lkOiBzdHJpbmcsXG4gICAgX3VwZGF0ZXM6IFBhcnRpYWw8SW1wcm92ZW1lbnRTdWdnZXN0aW9uPlxuICApOiBQcm9taXNlPEltcHJvdmVtZW50U3VnZ2VzdGlvbiB8IHVuZGVmaW5lZD47XG4gIGdldEZlYXR1cmVzKCk6IFByb21pc2U8RmVhdHVyZVtdPjtcbiAgZ2V0RmVhdHVyZShfaWQ6IHN0cmluZyk6IFByb21pc2U8RmVhdHVyZSB8IHVuZGVmaW5lZD47XG4gIGNyZWF0ZUZlYXR1cmUoX2ZlYXR1cmU6IEluc2VydEZlYXR1cmUpOiBQcm9taXNlPEZlYXR1cmU+O1xuICB1cGRhdGVGZWF0dXJlKF9pZDogc3RyaW5nLCBfdXBkYXRlczogUGFydGlhbDxGZWF0dXJlPik6IFByb21pc2U8RmVhdHVyZSB8IHVuZGVmaW5lZD47XG4gIGdldEFjdGlvbmFibGVJdGVtcygpOiBQcm9taXNlPEFjdGlvbmFibGVJdGVtW10+O1xuICBjcmVhdGVBY3Rpb25hYmxlSXRlbShfaXRlbTogSW5zZXJ0QWN0aW9uYWJsZUl0ZW0pOiBQcm9taXNlPEFjdGlvbmFibGVJdGVtPjtcbiAgdXBkYXRlQWN0aW9uYWJsZUl0ZW0oXG4gICAgX2lkOiBzdHJpbmcsXG4gICAgX3VwZGF0ZXM6IFBhcnRpYWw8QWN0aW9uYWJsZUl0ZW0+XG4gICk6IFByb21pc2U8QWN0aW9uYWJsZUl0ZW0gfCB1bmRlZmluZWQ+O1xuICBkZWxldGVBY3Rpb25hYmxlSXRlbShfaWQ6IHN0cmluZyk6IFByb21pc2U8Ym9vbGVhbj47XG4gIGdldEludml0YXRpb25zKCk6IFByb21pc2U8SW52aXRhdGlvbltdPjtcbiAgY3JlYXRlSW52aXRhdGlvbihfaW52aXRhdGlvbjogSW5zZXJ0SW52aXRhdGlvbik6IFByb21pc2U8SW52aXRhdGlvbj47XG4gIGdldEludml0YXRpb25CeVRva2VuKF90b2tlbjogc3RyaW5nKTogUHJvbWlzZTxJbnZpdGF0aW9uIHwgdW5kZWZpbmVkPjtcbiAgdXBkYXRlSW52aXRhdGlvbihfaWQ6IHN0cmluZywgX3VwZGF0ZXM6IFBhcnRpYWw8SW52aXRhdGlvbj4pOiBQcm9taXNlPEludml0YXRpb24gfCB1bmRlZmluZWQ+O1xuICBnZXRJbnZpdGF0aW9uQXVkaXRMb2dzKCk6IFByb21pc2U8SW52aXRhdGlvbkF1ZGl0TG9nW10+O1xuICBjcmVhdGVJbnZpdGF0aW9uQXVkaXRMb2coX2xvZzogSW5zZXJ0SW52aXRhdGlvbkF1ZGl0TG9nKTogUHJvbWlzZTxJbnZpdGF0aW9uQXVkaXRMb2c+O1xuICBnZXRDb21tZW50c0J5RGVtYW5kKF9kZW1hbmRJZDogc3RyaW5nKTogUHJvbWlzZTxEZW1hbmRDb21tZW50W10+O1xuICBjcmVhdGVEZW1hbmRDb21tZW50KF9jb21tZW50OiBJbnNlcnREZW1hbmRDb21tZW50KTogUHJvbWlzZTxEZW1hbmRDb21tZW50PjtcbiAgZ2V0QnVncygpOiBQcm9taXNlPEJ1Z1tdPjtcbiAgZ2V0QnVnc0ZvclVzZXIoX3VzZXJJZDogc3RyaW5nLCBfdXNlclJvbGU6IHN0cmluZywgX29yZ2FuaXphdGlvbklkPzogc3RyaW5nKTogUHJvbWlzZTxCdWdbXT47XG4gIGdldEJ1ZyhfaWQ6IHN0cmluZyk6IFByb21pc2U8QnVnIHwgdW5kZWZpbmVkPjtcbiAgZ2V0QnVnKF9pZDogc3RyaW5nLCBfdXNlcklkOiBzdHJpbmcsIF9yb2xlOiBzdHJpbmcsIF9vcmdhbml6YXRpb25JZD86IHN0cmluZyk6IFByb21pc2U8QnVnIHwgdW5kZWZpbmVkPjtcbiAgY3JlYXRlQnVnKF9idWc6IEluc2VydEJ1Zyk6IFByb21pc2U8QnVnPjtcbiAgdXBkYXRlQnVnKF9pZDogc3RyaW5nLCBfdXBkYXRlczogUGFydGlhbDxCdWc+KTogUHJvbWlzZTxCdWcgfCB1bmRlZmluZWQ+O1xuICB1cGRhdGVCdWcoX2lkOiBzdHJpbmcsIF91cGRhdGVzOiBQYXJ0aWFsPEJ1Zz4sIF91c2VySWQ6IHN0cmluZywgX3JvbGU6IHN0cmluZyk6IFByb21pc2U8QnVnIHwgdW5kZWZpbmVkPjtcbiAgZGVsZXRlQnVnKF9pZDogc3RyaW5nLCBfdXNlcklkOiBzdHJpbmcsIF9yb2xlOiBzdHJpbmcpOiBQcm9taXNlPGJvb2xlYW4+O1xuICBnZXRGZWF0dXJlUmVxdWVzdHMoKTogUHJvbWlzZTxGZWF0dXJlUmVxdWVzdFtdPjtcbiAgZ2V0RmVhdHVyZVJlcXVlc3RzRm9yVXNlcihfdXNlcklkOiBzdHJpbmcsIF9yb2xlOiBzdHJpbmcsIF9vcmdhbml6YXRpb25JZD86IHN0cmluZyk6IFByb21pc2U8RmVhdHVyZVJlcXVlc3RbXT47XG4gIGdldEZlYXR1cmVSZXF1ZXN0KF9pZDogc3RyaW5nKTogUHJvbWlzZTxGZWF0dXJlUmVxdWVzdCB8IHVuZGVmaW5lZD47XG4gIGdldEZlYXR1cmVSZXF1ZXN0KF9pZDogc3RyaW5nLCBfdXNlcklkOiBzdHJpbmcsIF9yb2xlOiBzdHJpbmcsIF9vcmdhbml6YXRpb25JZD86IHN0cmluZyk6IFByb21pc2U8RmVhdHVyZVJlcXVlc3QgfCB1bmRlZmluZWQ+O1xuICBjcmVhdGVGZWF0dXJlUmVxdWVzdChfcmVxdWVzdDogSW5zZXJ0RmVhdHVyZVJlcXVlc3QpOiBQcm9taXNlPEZlYXR1cmVSZXF1ZXN0PjtcbiAgdXBkYXRlRmVhdHVyZVJlcXVlc3QoXG4gICAgX2lkOiBzdHJpbmcsXG4gICAgX3VwZGF0ZXM6IFBhcnRpYWw8RmVhdHVyZVJlcXVlc3Q+XG4gICk6IFByb21pc2U8RmVhdHVyZVJlcXVlc3QgfCB1bmRlZmluZWQ+O1xuICBhZGRGZWF0dXJlUmVxdWVzdFVwdm90ZShcbiAgICBfZmVhdHVyZVJlcXVlc3RJZDogc3RyaW5nLFxuICAgIF91c2VySWQ6IHN0cmluZ1xuICApOiBQcm9taXNlPHsgc3VjY2VzczogYm9vbGVhbjsgbWVzc2FnZTogc3RyaW5nOyBkYXRhPzogYW55IH0+O1xuICByZW1vdmVGZWF0dXJlUmVxdWVzdFVwdm90ZShcbiAgICBfZmVhdHVyZVJlcXVlc3RJZDogc3RyaW5nLFxuICAgIF91c2VySWQ6IHN0cmluZ1xuICApOiBQcm9taXNlPHsgc3VjY2VzczogYm9vbGVhbjsgbWVzc2FnZTogc3RyaW5nOyBkYXRhPzogYW55IH0+O1xuICBcbiAgLy8gSW1wcm92ZW1lbnQgc3VnZ2VzdGlvbiBvcGVyYXRpb25zXG4gIGNsZWFyTmV3U3VnZ2VzdGlvbnMoKTogUHJvbWlzZTx2b2lkPjtcbiAgdXBkYXRlU3VnZ2VzdGlvblN0YXR1cyhfaWQ6IHN0cmluZywgX3N0YXR1czogc3RyaW5nKTogUHJvbWlzZTxJbXByb3ZlbWVudFN1Z2dlc3Rpb24gfCB1bmRlZmluZWQ+O1xuICBnZXRUb3BJbXByb3ZlbWVudFN1Z2dlc3Rpb25zKF9saW1pdDogbnVtYmVyKTogUHJvbWlzZTxJbXByb3ZlbWVudFN1Z2dlc3Rpb25bXT47XG4gIFxuICAvLyBGZWF0dXJlIG9wZXJhdGlvbnMgIFxuICBnZXRGZWF0dXJlc0J5U3RhdHVzKF9zdGF0dXM6IHN0cmluZyk6IFByb21pc2U8RmVhdHVyZVtdPjtcbiAgZ2V0UHVibGljUm9hZG1hcEZlYXR1cmVzKCk6IFByb21pc2U8RmVhdHVyZVtdPjtcbn1cblxuZXhwb3J0IGNsYXNzIE1lbVN0b3JhZ2UgaW1wbGVtZW50cyBJU3RvcmFnZSB7XG4gIHByaXZhdGUgdXNlcnM6IE1hcDxzdHJpbmcsIFVzZXI+O1xuICBwcml2YXRlIG9yZ2FuaXphdGlvbnM6IE1hcDxzdHJpbmcsIE9yZ2FuaXphdGlvbj47XG4gIHByaXZhdGUgYnVpbGRpbmdzOiBNYXA8c3RyaW5nLCBCdWlsZGluZz47XG4gIHByaXZhdGUgcmVzaWRlbmNlczogTWFwPHN0cmluZywgUmVzaWRlbmNlPjtcbiAgcHJpdmF0ZSBwaWxsYXJzOiBNYXA8c3RyaW5nLCBQaWxsYXI+O1xuICBwcml2YXRlIHdvcmtzcGFjZVN0YXR1c2VzOiBNYXA8c3RyaW5nLCBXb3Jrc3BhY2VTdGF0dXM+O1xuICBwcml2YXRlIHF1YWxpdHlNZXRyaWNzOiBNYXA8c3RyaW5nLCBRdWFsaXR5TWV0cmljPjtcbiAgcHJpdmF0ZSBmcmFtZXdvcmtDb25maWdzOiBNYXA8c3RyaW5nLCBGcmFtZXdvcmtDb25maWd1cmF0aW9uPjtcbiAgcHJpdmF0ZSBpbXByb3ZlbWVudFN1Z2dlc3Rpb25zOiBNYXA8c3RyaW5nLCBJbXByb3ZlbWVudFN1Z2dlc3Rpb24+O1xuICBwcml2YXRlIGZlYXR1cmVzOiBNYXA8c3RyaW5nLCBGZWF0dXJlPjtcbiAgcHJpdmF0ZSBhY3Rpb25hYmxlSXRlbXM6IE1hcDxzdHJpbmcsIEFjdGlvbmFibGVJdGVtPjtcbiAgcHJpdmF0ZSBpbnZpdGF0aW9uczogTWFwPHN0cmluZywgSW52aXRhdGlvbj47XG4gIHByaXZhdGUgaW52aXRhdGlvbkF1ZGl0TG9nczogTWFwPHN0cmluZywgSW52aXRhdGlvbkF1ZGl0TG9nPjtcbiAgcHJpdmF0ZSBidWdzOiBNYXA8c3RyaW5nLCBCdWc+O1xuICBwcml2YXRlIGZlYXR1cmVSZXF1ZXN0czogTWFwPHN0cmluZywgRmVhdHVyZVJlcXVlc3Q+O1xuICBwcml2YXRlIGZlYXR1cmVSZXF1ZXN0VXB2b3RlczogTWFwPHN0cmluZywgRmVhdHVyZVJlcXVlc3RVcHZvdGU+O1xuICBwcml2YXRlIGludm9pY2VzOiBNYXA8c3RyaW5nLCBJbnZvaWNlPjtcblxuICBjb25zdHJ1Y3RvcigpIHtcbiAgICB0aGlzLnVzZXJzID0gbmV3IE1hcCgpO1xuICAgIHRoaXMub3JnYW5pemF0aW9ucyA9IG5ldyBNYXAoKTtcbiAgICB0aGlzLmJ1aWxkaW5ncyA9IG5ldyBNYXAoKTtcbiAgICB0aGlzLnJlc2lkZW5jZXMgPSBuZXcgTWFwKCk7XG4gICAgdGhpcy5waWxsYXJzID0gbmV3IE1hcCgpO1xuICAgIHRoaXMud29ya3NwYWNlU3RhdHVzZXMgPSBuZXcgTWFwKCk7XG4gICAgdGhpcy5xdWFsaXR5TWV0cmljcyA9IG5ldyBNYXAoKTtcbiAgICB0aGlzLmZyYW1ld29ya0NvbmZpZ3MgPSBuZXcgTWFwKCk7XG4gICAgdGhpcy5pbXByb3ZlbWVudFN1Z2dlc3Rpb25zID0gbmV3IE1hcCgpO1xuICAgIHRoaXMuZmVhdHVyZXMgPSBuZXcgTWFwKCk7XG4gICAgdGhpcy5hY3Rpb25hYmxlSXRlbXMgPSBuZXcgTWFwKCk7XG4gICAgdGhpcy5pbnZpdGF0aW9ucyA9IG5ldyBNYXAoKTtcbiAgICB0aGlzLmludml0YXRpb25BdWRpdExvZ3MgPSBuZXcgTWFwKCk7XG4gICAgdGhpcy5idWdzID0gbmV3IE1hcCgpO1xuICAgIHRoaXMuZmVhdHVyZVJlcXVlc3RzID0gbmV3IE1hcCgpO1xuICAgIHRoaXMuZmVhdHVyZVJlcXVlc3RVcHZvdGVzID0gbmV3IE1hcCgpO1xuICAgIHRoaXMuaW52b2ljZXMgPSBuZXcgTWFwKCk7XG5cbiAgICAvLyBJbml0aWFsaXplIHRlc3QgdXNlciBhc3luY2hyb25vdXNseVxuICAgIHRoaXMuaW5pdGlhbGl6ZVRlc3RVc2VyKCkuY2F0Y2goY29uc29sZS5lcnJvcik7XG4gIH1cblxuICBwcml2YXRlIGFzeW5jIGluaXRpYWxpemVUZXN0VXNlcigpIHtcbiAgICAvLyBVc2Uga25vd24gYWRtaW4xMjMgcGFzc3dvcmQgZm9yIGRlbW8gbW9kZVxuICAgIGNvbnN0IGJjcnlwdCA9IHJlcXVpcmUoJ2JjcnlwdGpzJyk7XG4gICAgY29uc3Qgc2VjdXJlUGFzc3dvcmQgPSBhd2FpdCBiY3J5cHQuaGFzaCgnYWRtaW4xMjMnLCAxMik7XG5cbiAgICBjb25zdCB1c2VyOiBVc2VyID0ge1xuICAgICAgaWQ6ICc1NTBlODQwMC1lMjliLTQxZDQtYTcxNi00NDY2NTU0NDAwMDAnLFxuICAgICAgdXNlcm5hbWU6ICdrZXZpbi5oZXJ2aWV1eEBrb3Zlby1nZXN0aW9uLmNvbScsXG4gICAgICBlbWFpbDogJ2tldmluLmhlcnZpZXV4QGtvdmVvLWdlc3Rpb24uY29tJyxcbiAgICAgIHBhc3N3b3JkOiBzZWN1cmVQYXNzd29yZCxcbiAgICAgIGZpcnN0TmFtZTogJ0tldmluJyxcbiAgICAgIGxhc3ROYW1lOiAnSGVydmlldXgnLFxuICAgICAgcGhvbmU6ICcnLFxuICAgICAgcHJvZmlsZUltYWdlOiAnJyxcbiAgICAgIGxhbmd1YWdlOiAnZnInLFxuICAgICAgcm9sZTogJ2FkbWluJyxcbiAgICAgIGlzQWN0aXZlOiB0cnVlLFxuICAgICAgbGFzdExvZ2luQXQ6IG51bGwsXG4gICAgICBjcmVhdGVkQXQ6IG5ldyBEYXRlKCksXG4gICAgICB1cGRhdGVkQXQ6IG5ldyBEYXRlKCksXG4gICAgfTtcblxuICAgIHRoaXMudXNlcnMuc2V0KHVzZXIuaWQsIHVzZXIpO1xuICB9XG5cbiAgLy8gVXNlciBvcGVyYXRpb25zXG4gIGFzeW5jIGdldFVzZXJzKCk6IFByb21pc2U8VXNlcltdPiB7XG4gICAgcmV0dXJuIEFycmF5LmZyb20odGhpcy51c2Vycy52YWx1ZXMoKSk7XG4gIH1cblxuICBhc3luYyBnZXRVc2Vyc1dpdGhBc3NpZ25tZW50cygpOiBQcm9taXNlPEFycmF5PFVzZXIgJiB7IG9yZ2FuaXphdGlvbnM6IEFycmF5PHsgaWQ6IHN0cmluZzsgbmFtZTogc3RyaW5nOyB0eXBlOiBzdHJpbmcgfT47IGJ1aWxkaW5nczogQXJyYXk8eyBpZDogc3RyaW5nOyBuYW1lOiBzdHJpbmcgfT47IHJlc2lkZW5jZXM6IEFycmF5PHsgaWQ6IHN0cmluZzsgdW5pdE51bWJlcjogc3RyaW5nOyBidWlsZGluZ0lkOiBzdHJpbmc7IGJ1aWxkaW5nTmFtZTogc3RyaW5nIH0+IH0+PiB7XG4gICAgLy8gRm9yIE1lbVN0b3JhZ2UsIGp1c3QgcmV0dXJuIHVzZXJzIHdpdGggZW1wdHkgYXNzaWdubWVudHMgYXJyYXlzXG4gICAgY29uc3QgdXNlcnMgPSBBcnJheS5mcm9tKHRoaXMudXNlcnMudmFsdWVzKCkpO1xuICAgIHJldHVybiB1c2Vycy5tYXAodXNlciA9PiAoe1xuICAgICAgLi4udXNlcixcbiAgICAgIG9yZ2FuaXphdGlvbnM6IFtdLFxuICAgICAgYnVpbGRpbmdzOiBbXSxcbiAgICAgIHJlc2lkZW5jZXM6IFtdXG4gICAgfSkpO1xuICB9XG5cbiAgYXN5bmMgZ2V0VXNlcnNCeU9yZ2FuaXphdGlvbnMoX3VzZXJJZDogc3RyaW5nKTogUHJvbWlzZTxVc2VyW10+IHtcbiAgICByZXR1cm4gW107XG4gIH1cblxuICBhc3luYyBnZXRVc2VyKGlkOiBzdHJpbmcpOiBQcm9taXNlPFVzZXIgfCB1bmRlZmluZWQ+IHtcbiAgICByZXR1cm4gdGhpcy51c2Vycy5nZXQoaWQpO1xuICB9XG5cbiAgYXN5bmMgZ2V0VXNlck9yZ2FuaXphdGlvbnMoX3VzZXJJZDogc3RyaW5nKTogUHJvbWlzZTxBcnJheTx7IG9yZ2FuaXphdGlvbklkOiBzdHJpbmcgfT4+IHtcbiAgICByZXR1cm4gW107XG4gIH1cblxuICBhc3luYyBnZXRVc2VyUmVzaWRlbmNlcyhfdXNlcklkOiBzdHJpbmcpOiBQcm9taXNlPEFycmF5PHsgcmVzaWRlbmNlSWQ6IHN0cmluZyB9Pj4ge1xuICAgIHJldHVybiBbXTtcbiAgfVxuXG4gIGFzeW5jIGdldFVzZXJCeUVtYWlsKGVtYWlsOiBzdHJpbmcpOiBQcm9taXNlPFVzZXIgfCB1bmRlZmluZWQ+IHtcbiAgICByZXR1cm4gQXJyYXkuZnJvbSh0aGlzLnVzZXJzLnZhbHVlcygpKS5maW5kKCh1c2VyKSA9PiB1c2VyLmVtYWlsID09PSBlbWFpbCk7XG4gIH1cblxuICBhc3luYyBjcmVhdGVVc2VyKGluc2VydFVzZXI6IEluc2VydFVzZXIpOiBQcm9taXNlPFVzZXI+IHtcbiAgICBjb25zdCBpZCA9IHJhbmRvbVVVSUQoKTtcbiAgICBjb25zdCB1c2VyOiBVc2VyID0ge1xuICAgICAgLi4uaW5zZXJ0VXNlcixcbiAgICAgIGlkLFxuICAgICAgcGhvbmU6IGluc2VydFVzZXIucGhvbmUgfHwgbnVsbCxcbiAgICAgIHByb2ZpbGVJbWFnZTogaW5zZXJ0VXNlci5wcm9maWxlSW1hZ2UgfHwgJycsXG4gICAgICByb2xlOiBpbnNlcnRVc2VyLnJvbGUgfHwgJ3RlbmFudCcsXG4gICAgICBsYW5ndWFnZTogaW5zZXJ0VXNlci5sYW5ndWFnZSB8fCAnZnInLFxuICAgICAgaXNBY3RpdmU6IHRydWUsXG4gICAgICBsYXN0TG9naW5BdDogbnVsbCxcbiAgICAgIGNyZWF0ZWRBdDogbmV3IERhdGUoKSxcbiAgICAgIHVwZGF0ZWRBdDogbmV3IERhdGUoKSxcbiAgICB9O1xuICAgIHRoaXMudXNlcnMuc2V0KGlkLCB1c2VyKTtcbiAgICByZXR1cm4gdXNlcjtcbiAgfVxuXG4gIGFzeW5jIHVwZGF0ZVVzZXIoaWQ6IHN0cmluZywgdXBkYXRlczogUGFydGlhbDxVc2VyPik6IFByb21pc2U8VXNlciB8IHVuZGVmaW5lZD4ge1xuICAgIGNvbnN0IGV4aXN0aW5nVXNlciA9IHRoaXMudXNlcnMuZ2V0KGlkKTtcbiAgICBpZiAoIWV4aXN0aW5nVXNlcikge1xuICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICB9XG5cbiAgICBjb25zdCB1cGRhdGVkVXNlciA9IHtcbiAgICAgIC4uLmV4aXN0aW5nVXNlcixcbiAgICAgIC4uLnVwZGF0ZXMsXG4gICAgICB1cGRhdGVkQXQ6IG5ldyBEYXRlKCksXG4gICAgfTtcbiAgICB0aGlzLnVzZXJzLnNldChpZCwgdXBkYXRlZFVzZXIpO1xuICAgIHJldHVybiB1cGRhdGVkVXNlcjtcbiAgfVxuXG4gIC8vIE1pbmltYWwgaW1wbGVtZW50YXRpb25zIGZvciBvdGhlciByZXF1aXJlZCBtZXRob2RzXG4gIGFzeW5jIGNyZWF0ZVBhc3N3b3JkUmVzZXRUb2tlbihfdG9rZW46IEluc2VydFBhc3N3b3JkUmVzZXRUb2tlbik6IFByb21pc2U8UGFzc3dvcmRSZXNldFRva2VuPiB7XG4gICAgcmV0dXJuIHtcbiAgICAgIC4uLl90b2tlbixcbiAgICAgIGlkOiByYW5kb21VVUlEKCksXG4gICAgICBjcmVhdGVkQXQ6IG5ldyBEYXRlKCksXG4gICAgICB1c2VkQXQ6IG51bGwsXG4gICAgICBpc1VzZWQ6IGZhbHNlLFxuICAgICAgaXBBZGRyZXNzOiBfdG9rZW4uaXBBZGRyZXNzIHx8ICcnLFxuICAgICAgdXNlckFnZW50OiBfdG9rZW4udXNlckFnZW50IHx8ICcnLFxuICAgIH07XG4gIH1cbiAgYXN5bmMgZ2V0UGFzc3dvcmRSZXNldFRva2VuKF90b2tlbjogc3RyaW5nKTogUHJvbWlzZTxQYXNzd29yZFJlc2V0VG9rZW4gfCB1bmRlZmluZWQ+IHtcbiAgICByZXR1cm4gdW5kZWZpbmVkO1xuICB9XG4gIGFzeW5jIG1hcmtQYXNzd29yZFJlc2V0VG9rZW5Bc1VzZWQoX3Rva2VuSWQ6IHN0cmluZyk6IFByb21pc2U8UGFzc3dvcmRSZXNldFRva2VuIHwgdW5kZWZpbmVkPiB7XG4gICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgfVxuICBhc3luYyBjbGVhbnVwRXhwaXJlZFBhc3N3b3JkUmVzZXRUb2tlbnMoKTogUHJvbWlzZTxudW1iZXI+IHtcbiAgICByZXR1cm4gMDtcbiAgfVxuXG4gIGFzeW5jIGdldE9yZ2FuaXphdGlvbnMoKTogUHJvbWlzZTxPcmdhbml6YXRpb25bXT4ge1xuICAgIHJldHVybiBBcnJheS5mcm9tKHRoaXMub3JnYW5pemF0aW9ucy52YWx1ZXMoKSk7XG4gIH1cbiAgYXN5bmMgZ2V0T3JnYW5pemF0aW9uKGlkOiBzdHJpbmcpOiBQcm9taXNlPE9yZ2FuaXphdGlvbiB8IHVuZGVmaW5lZD4ge1xuICAgIHJldHVybiB0aGlzLm9yZ2FuaXphdGlvbnMuZ2V0KGlkKTtcbiAgfVxuICBhc3luYyBnZXRPcmdhbml6YXRpb25CeU5hbWUobmFtZTogc3RyaW5nKTogUHJvbWlzZTxPcmdhbml6YXRpb24gfCB1bmRlZmluZWQ+IHtcbiAgICByZXR1cm4gQXJyYXkuZnJvbSh0aGlzLm9yZ2FuaXphdGlvbnMudmFsdWVzKCkpLmZpbmQoKG9yZykgPT4gb3JnLm5hbWUgPT09IG5hbWUpO1xuICB9XG4gIGFzeW5jIGNyZWF0ZU9yZ2FuaXphdGlvbihvcmc6IEluc2VydE9yZ2FuaXphdGlvbik6IFByb21pc2U8T3JnYW5pemF0aW9uPiB7XG4gICAgY29uc3QgaWQgPSByYW5kb21VVUlEKCk7XG4gICAgY29uc3Qgb3JnYW5pemF0aW9uOiBPcmdhbml6YXRpb24gPSB7XG4gICAgICAuLi5vcmcsXG4gICAgICBpZCxcbiAgICAgIHBob25lOiBvcmcucGhvbmUgfHwgJycsXG4gICAgICBlbWFpbDogb3JnLmVtYWlsIHx8ICcnLFxuICAgICAgd2Vic2l0ZTogb3JnLndlYnNpdGUgfHwgJycsXG4gICAgICByZWdpc3RyYXRpb25OdW1iZXI6IG9yZy5yZWdpc3RyYXRpb25OdW1iZXIgfHwgJycsXG4gICAgICBpc0FjdGl2ZTogdHJ1ZSxcbiAgICAgIGNyZWF0ZWRBdDogbmV3IERhdGUoKSxcbiAgICAgIHVwZGF0ZWRBdDogbmV3IERhdGUoKSxcbiAgICB9O1xuICAgIHRoaXMub3JnYW5pemF0aW9ucy5zZXQoaWQsIG9yZ2FuaXphdGlvbik7XG4gICAgcmV0dXJuIG9yZ2FuaXphdGlvbjtcbiAgfVxuICBhc3luYyB1cGRhdGVPcmdhbml6YXRpb24oXG4gICAgaWQ6IHN0cmluZyxcbiAgICB1cGRhdGVzOiBQYXJ0aWFsPE9yZ2FuaXphdGlvbj5cbiAgKTogUHJvbWlzZTxPcmdhbml6YXRpb24gfCB1bmRlZmluZWQ+IHtcbiAgICBjb25zdCBleGlzdGluZyA9IHRoaXMub3JnYW5pemF0aW9ucy5nZXQoaWQpO1xuICAgIGlmICghZXhpc3RpbmcpIHJldHVybiB1bmRlZmluZWQ7XG4gICAgY29uc3QgdXBkYXRlZCA9IHsgLi4uZXhpc3RpbmcsIC4uLnVwZGF0ZXMsIHVwZGF0ZWRBdDogbmV3IERhdGUoKSB9O1xuICAgIHRoaXMub3JnYW5pemF0aW9ucy5zZXQoaWQsIHVwZGF0ZWQpO1xuICAgIHJldHVybiB1cGRhdGVkO1xuICB9XG4gIGFzeW5jIGdldEJ1aWxkaW5nc0J5T3JnYW5pemF0aW9uKG9yZ0lkOiBzdHJpbmcpOiBQcm9taXNlPEJ1aWxkaW5nW10+IHtcbiAgICByZXR1cm4gQXJyYXkuZnJvbSh0aGlzLmJ1aWxkaW5ncy52YWx1ZXMoKSkuZmlsdGVyKChiKSA9PiBiLm9yZ2FuaXphdGlvbklkID09PSBvcmdJZCk7XG4gIH1cblxuICBhc3luYyBnZXRCdWlsZGluZ3MoKTogUHJvbWlzZTxCdWlsZGluZ1tdPiB7XG4gICAgcmV0dXJuIEFycmF5LmZyb20odGhpcy5idWlsZGluZ3MudmFsdWVzKCkpO1xuICB9XG4gIGFzeW5jIGdldEJ1aWxkaW5nKGlkOiBzdHJpbmcpOiBQcm9taXNlPEJ1aWxkaW5nIHwgdW5kZWZpbmVkPiB7XG4gICAgcmV0dXJuIHRoaXMuYnVpbGRpbmdzLmdldChpZCk7XG4gIH1cbiAgYXN5bmMgY3JlYXRlQnVpbGRpbmcoYnVpbGRpbmc6IEluc2VydEJ1aWxkaW5nKTogUHJvbWlzZTxCdWlsZGluZz4ge1xuICAgIGNvbnN0IGlkID0gcmFuZG9tVVVJRCgpO1xuICAgIGNvbnN0IG5ld0J1aWxkaW5nOiBCdWlsZGluZyA9IHtcbiAgICAgIC4uLmJ1aWxkaW5nLFxuICAgICAgaWQsXG4gICAgICBpc0FjdGl2ZTogdHJ1ZSxcbiAgICAgIGNyZWF0ZWRBdDogbmV3IERhdGUoKSxcbiAgICAgIHVwZGF0ZWRBdDogbmV3IERhdGUoKSxcbiAgICAgIHRvdGFsVW5pdHM6IGJ1aWxkaW5nLnRvdGFsVW5pdHMgfHwgMCxcbiAgICAgIHRvdGFsRmxvb3JzOiBidWlsZGluZy50b3RhbEZsb29ycyB8fCAwLFxuICAgICAgeWVhckJ1aWx0OiBidWlsZGluZy55ZWFyQnVpbHQgfHwgMCxcbiAgICAgIGJ1aWxkaW5nVHlwZTogYnVpbGRpbmcuYnVpbGRpbmdUeXBlIGFzICdhcGFydG1lbnQnIHwgJ2NvbmRvJyB8ICdyZW50YWwnLFxuICAgICAgYmFua0FjY291bnROdW1iZXI6IGJ1aWxkaW5nLmJhbmtBY2NvdW50TnVtYmVyIHx8ICcnLFxuICAgICAgYmFua0FjY291bnRNaW5pbXVtczogYnVpbGRpbmcuYmFua0FjY291bnRNaW5pbXVtcyA/IEpTT04uc3RyaW5naWZ5KGJ1aWxkaW5nLmJhbmtBY2NvdW50TWluaW11bXMpIDogJycsXG4gICAgICBiYW5rQWNjb3VudFVwZGF0ZWRBdDogbmV3IERhdGUoKSxcbiAgICAgIGluZmxhdGlvblNldHRpbmdzOiAnJyxcbiAgICAgIHBhcmtpbmdTcGFjZXM6IGJ1aWxkaW5nLnBhcmtpbmdTcGFjZXMgfHwgMCxcbiAgICAgIHN0b3JhZ2VTcGFjZXM6IGJ1aWxkaW5nLnN0b3JhZ2VTcGFjZXMgfHwgMCxcbiAgICAgIGFtZW5pdGllczogYnVpbGRpbmcuYW1lbml0aWVzIHx8IG51bGwsXG4gICAgICBtYW5hZ2VtZW50Q29tcGFueTogYnVpbGRpbmcubWFuYWdlbWVudENvbXBhbnkgfHwgbnVsbCxcbiAgICAgIGJhbmtBY2NvdW50Tm90ZXM6IG51bGwsXG4gICAgICBiYW5rQWNjb3VudFN0YXJ0RGF0ZTogbnVsbCxcbiAgICAgIGJhbmtBY2NvdW50U3RhcnRBbW91bnQ6IG51bGwsXG4gICAgfTtcbiAgICB0aGlzLmJ1aWxkaW5ncy5zZXQoaWQsIG5ld0J1aWxkaW5nKTtcbiAgICByZXR1cm4gbmV3QnVpbGRpbmc7XG4gIH1cbiAgYXN5bmMgdXBkYXRlQnVpbGRpbmcoaWQ6IHN0cmluZywgdXBkYXRlczogUGFydGlhbDxCdWlsZGluZz4pOiBQcm9taXNlPEJ1aWxkaW5nIHwgdW5kZWZpbmVkPiB7XG4gICAgY29uc3QgZXhpc3RpbmcgPSB0aGlzLmJ1aWxkaW5ncy5nZXQoaWQpO1xuICAgIGlmICghZXhpc3RpbmcpIHJldHVybiB1bmRlZmluZWQ7XG4gICAgY29uc3QgdXBkYXRlZCA9IHsgLi4uZXhpc3RpbmcsIC4uLnVwZGF0ZXMsIHVwZGF0ZWRBdDogbmV3IERhdGUoKSB9O1xuICAgIHRoaXMuYnVpbGRpbmdzLnNldChpZCwgdXBkYXRlZCk7XG4gICAgcmV0dXJuIHVwZGF0ZWQ7XG4gIH1cbiAgYXN5bmMgZGVsZXRlQnVpbGRpbmcoaWQ6IHN0cmluZyk6IFByb21pc2U8Ym9vbGVhbj4ge1xuICAgIGNvbnN0IGJ1aWxkaW5nID0gdGhpcy5idWlsZGluZ3MuZ2V0KGlkKTtcbiAgICBpZiAoIWJ1aWxkaW5nKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIFxuICAgIC8vIFNvZnQgZGVsZXRlIGJ5IHNldHRpbmcgaXNBY3RpdmUgdG8gZmFsc2VcbiAgICBjb25zdCB1cGRhdGVkQnVpbGRpbmcgPSB7XG4gICAgICAuLi5idWlsZGluZyxcbiAgICAgIGlzQWN0aXZlOiBmYWxzZSxcbiAgICAgIHVwZGF0ZWRBdDogbmV3IERhdGUoKSxcbiAgICB9O1xuICAgIFxuICAgIHRoaXMuYnVpbGRpbmdzLnNldChpZCwgdXBkYXRlZEJ1aWxkaW5nKTtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuXG4gIGFzeW5jIGdldFJlc2lkZW5jZXMoKTogUHJvbWlzZTxSZXNpZGVuY2VbXT4ge1xuICAgIHJldHVybiBBcnJheS5mcm9tKHRoaXMucmVzaWRlbmNlcy52YWx1ZXMoKSk7XG4gIH1cbiAgYXN5bmMgZ2V0UmVzaWRlbmNlKGlkOiBzdHJpbmcpOiBQcm9taXNlPFJlc2lkZW5jZSB8IHVuZGVmaW5lZD4ge1xuICAgIHJldHVybiB0aGlzLnJlc2lkZW5jZXMuZ2V0KGlkKTtcbiAgfVxuICBhc3luYyBnZXRSZXNpZGVuY2VzQnlCdWlsZGluZyhidWlsZGluZ0lkOiBzdHJpbmcpOiBQcm9taXNlPFJlc2lkZW5jZVtdPiB7XG4gICAgcmV0dXJuIEFycmF5LmZyb20odGhpcy5yZXNpZGVuY2VzLnZhbHVlcygpKS5maWx0ZXIoKHIpID0+IHIuYnVpbGRpbmdJZCA9PT0gYnVpbGRpbmdJZCk7XG4gIH1cbiAgYXN5bmMgY3JlYXRlUmVzaWRlbmNlKHJlc2lkZW5jZTogSW5zZXJ0UmVzaWRlbmNlKTogUHJvbWlzZTxSZXNpZGVuY2U+IHtcbiAgICBjb25zdCBpZCA9IHJhbmRvbVVVSUQoKTtcbiAgICBjb25zdCBuZXdSZXNpZGVuY2U6IFJlc2lkZW5jZSA9IHtcbiAgICAgIC4uLnJlc2lkZW5jZSxcbiAgICAgIGlkLFxuICAgICAgaXNBY3RpdmU6IHRydWUsXG4gICAgICBjcmVhdGVkQXQ6IG5ldyBEYXRlKCksXG4gICAgICB1cGRhdGVkQXQ6IG5ldyBEYXRlKCksXG4gICAgICBmbG9vcjogcmVzaWRlbmNlLmZsb29yIHx8IDAsXG4gICAgICBzcXVhcmVGb290YWdlOiByZXNpZGVuY2Uuc3F1YXJlRm9vdGFnZT8udG9TdHJpbmcoKSB8fCAnMCcsXG4gICAgICBiZWRyb29tczogcmVzaWRlbmNlLmJlZHJvb21zIHx8IDAsXG4gICAgICBiYXRocm9vbXM6IHJlc2lkZW5jZS5iYXRocm9vbXM/LnRvU3RyaW5nKCkgfHwgJzAnLFxuICAgICAgYmFsY29ueTogcmVzaWRlbmNlLmJhbGNvbnkgfHwgZmFsc2UsXG4gICAgICBwYXJraW5nU3BhY2VOdW1iZXJzOiByZXNpZGVuY2UucGFya2luZ1NwYWNlTnVtYmVycyB8fCBbXSxcbiAgICAgIHN0b3JhZ2VTcGFjZU51bWJlcnM6IHJlc2lkZW5jZS5zdG9yYWdlU3BhY2VOdW1iZXJzIHx8IFtdLFxuICAgICAgb3duZXJzaGlwUGVyY2VudGFnZTogcmVzaWRlbmNlLm93bmVyc2hpcFBlcmNlbnRhZ2U/LnRvU3RyaW5nKCkgfHwgJzAnLFxuICAgICAgbW9udGhseUZlZXM6IHJlc2lkZW5jZS5tb250aGx5RmVlcz8udG9TdHJpbmcoKSB8fCAnMCcsXG4gICAgfTtcbiAgICB0aGlzLnJlc2lkZW5jZXMuc2V0KGlkLCBuZXdSZXNpZGVuY2UpO1xuICAgIHJldHVybiBuZXdSZXNpZGVuY2U7XG4gIH1cbiAgYXN5bmMgdXBkYXRlUmVzaWRlbmNlKGlkOiBzdHJpbmcsIHVwZGF0ZXM6IFBhcnRpYWw8UmVzaWRlbmNlPik6IFByb21pc2U8UmVzaWRlbmNlIHwgdW5kZWZpbmVkPiB7XG4gICAgY29uc3QgZXhpc3RpbmcgPSB0aGlzLnJlc2lkZW5jZXMuZ2V0KGlkKTtcbiAgICBpZiAoIWV4aXN0aW5nKSByZXR1cm4gdW5kZWZpbmVkO1xuICAgIGNvbnN0IHVwZGF0ZWQgPSB7IC4uLmV4aXN0aW5nLCAuLi51cGRhdGVzLCB1cGRhdGVkQXQ6IG5ldyBEYXRlKCkgfTtcbiAgICB0aGlzLnJlc2lkZW5jZXMuc2V0KGlkLCB1cGRhdGVkKTtcbiAgICByZXR1cm4gdXBkYXRlZDtcbiAgfVxuICBhc3luYyBkZWxldGVSZXNpZGVuY2UoaWQ6IHN0cmluZyk6IFByb21pc2U8Ym9vbGVhbj4ge1xuICAgIHJldHVybiB0aGlzLnJlc2lkZW5jZXMuZGVsZXRlKGlkKTtcbiAgfVxuXG4gIGFzeW5jIGdldENvbnRhY3RzKCk6IFByb21pc2U8Q29udGFjdFtdPiB7XG4gICAgcmV0dXJuIFtdO1xuICB9XG4gIGFzeW5jIGdldENvbnRhY3RzQnlFbnRpdHkoKTogUHJvbWlzZTxDb250YWN0W10+IHtcbiAgICByZXR1cm4gW107XG4gIH1cbiAgYXN5bmMgZ2V0Q29udGFjdHNGb3JSZXNpZGVuY2UoKTogUHJvbWlzZTxBcnJheTxDb250YWN0ICYgeyB1c2VyOiBVc2VyIH0+PiB7XG4gICAgcmV0dXJuIFtdO1xuICB9XG4gIGFzeW5jIGNyZWF0ZUNvbnRhY3QoY29udGFjdDogSW5zZXJ0Q29udGFjdCk6IFByb21pc2U8Q29udGFjdD4ge1xuICAgIGNvbnN0IGlkID0gcmFuZG9tVVVJRCgpO1xuICAgIHJldHVybiB7XG4gICAgICAuLi5jb250YWN0LFxuICAgICAgaWQsXG4gICAgICBuYW1lOiBjb250YWN0Lm5hbWUsXG4gICAgICBlbWFpbDogY29udGFjdC5lbWFpbCB8fCAnJyxcbiAgICAgIHBob25lOiBjb250YWN0LnBob25lIHx8ICcnLFxuICAgICAgZW50aXR5OiBjb250YWN0LmVudGl0eSBhcyAnb3JnYW5pemF0aW9uJyB8ICdidWlsZGluZycgfCAncmVzaWRlbmNlJyxcbiAgICAgIGVudGl0eUlkOiBjb250YWN0LmVudGl0eUlkLFxuICAgICAgY29udGFjdENhdGVnb3J5OiBjb250YWN0LmNvbnRhY3RDYXRlZ29yeSBhcyAncmVzaWRlbnQnIHwgJ21hbmFnZXInIHwgJ3RlbmFudCcgfCAnbWFpbnRlbmFuY2UnIHwgJ2VtZXJnZW5jeScgfCAnb3RoZXInLFxuICAgICAgaXNBY3RpdmU6IHRydWUsXG4gICAgICBjcmVhdGVkQXQ6IG5ldyBEYXRlKCksXG4gICAgICB1cGRhdGVkQXQ6IG5ldyBEYXRlKCksXG4gICAgfTtcbiAgfVxuICBhc3luYyB1cGRhdGVDb250YWN0KCk6IFByb21pc2U8Q29udGFjdCB8IHVuZGVmaW5lZD4ge1xuICAgIHJldHVybiB1bmRlZmluZWQ7XG4gIH1cbiAgYXN5bmMgZGVsZXRlQ29udGFjdCgpOiBQcm9taXNlPGJvb2xlYW4+IHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cblxuICBhc3luYyBnZXREb2N1bWVudHMoX2ZpbHRlcnM/OiB7XG4gICAgYnVpbGRpbmdJZD86IHN0cmluZztcbiAgICByZXNpZGVuY2VJZD86IHN0cmluZztcbiAgICBkb2N1bWVudFR5cGU/OiBzdHJpbmc7XG4gICAgdXNlcklkPzogc3RyaW5nO1xuICAgIHVzZXJSb2xlPzogc3RyaW5nO1xuICB9KTogUHJvbWlzZTxEb2N1bWVudFtdPiB7XG4gICAgcmV0dXJuIFtdO1xuICB9XG5cbiAgYXN5bmMgZ2V0RG9jdW1lbnQoX2lkOiBzdHJpbmcpOiBQcm9taXNlPERvY3VtZW50IHwgdW5kZWZpbmVkPiB7XG4gICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgfVxuXG4gIGFzeW5jIGNyZWF0ZURvY3VtZW50KGRvYzogSW5zZXJ0RG9jdW1lbnQpOiBQcm9taXNlPERvY3VtZW50PiB7XG4gICAgY29uc3QgaWQgPSByYW5kb21VVUlEKCk7XG4gICAgcmV0dXJuIHtcbiAgICAgIC4uLmRvYyxcbiAgICAgIGlkLFxuICAgICAgZGVzY3JpcHRpb246IGRvYy5kZXNjcmlwdGlvbiB8fCAnJyxcbiAgICAgIGJ1aWxkaW5nSWQ6IGRvYy5idWlsZGluZ0lkIHx8ICcnLFxuICAgICAgcmVzaWRlbmNlSWQ6IGRvYy5yZXNpZGVuY2VJZCB8fCAnJyxcbiAgICAgIGZpbGVOYW1lOiBkb2MuZmlsZU5hbWUgfHwgJycsXG4gICAgICBmaWxlU2l6ZTogZG9jLmZpbGVTaXplIHx8ICcnLFxuICAgICAgbWltZVR5cGU6IGRvYy5taW1lVHlwZSB8fCAnJyxcbiAgICAgIGF0dGFjaGVkVG9UeXBlOiBkb2MuYXR0YWNoZWRUb1R5cGUgfHwgJycsXG4gICAgICBhdHRhY2hlZFRvSWQ6IGRvYy5hdHRhY2hlZFRvSWQgfHwgJycsXG4gICAgICBjcmVhdGVkQXQ6IG5ldyBEYXRlKCksXG4gICAgICB1cGRhdGVkQXQ6IG5ldyBEYXRlKCksXG4gICAgfTtcbiAgfVxuXG4gIGFzeW5jIHVwZGF0ZURvY3VtZW50KF9pZDogc3RyaW5nLCBfdXBkYXRlczogUGFydGlhbDxEb2N1bWVudD4pOiBQcm9taXNlPERvY3VtZW50IHwgdW5kZWZpbmVkPiB7XG4gICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgfVxuXG4gIGFzeW5jIGRlbGV0ZURvY3VtZW50KF9pZDogc3RyaW5nKTogUHJvbWlzZTxib29sZWFuPiB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG5cbiAgLy8gSW52b2ljZSBvcGVyYXRpb25zXG4gIGFzeW5jIGdldEludm9pY2VzKGZpbHRlcnM/OiB7XG4gICAgYnVpbGRpbmdJZD86IHN0cmluZztcbiAgICByZXNpZGVuY2VJZD86IHN0cmluZztcbiAgICB1c2VySWQ/OiBzdHJpbmc7XG4gICAgdXNlclJvbGU/OiBzdHJpbmc7XG4gIH0pOiBQcm9taXNlPEludm9pY2VbXT4ge1xuICAgIGxldCBpbnZvaWNlcyA9IEFycmF5LmZyb20odGhpcy5pbnZvaWNlcy52YWx1ZXMoKSk7XG4gICAgXG4gICAgaWYgKGZpbHRlcnMpIHtcbiAgICAgIGlmIChmaWx0ZXJzLmJ1aWxkaW5nSWQpIHtcbiAgICAgICAgaW52b2ljZXMgPSBpbnZvaWNlcy5maWx0ZXIoaW52b2ljZSA9PiBpbnZvaWNlLmJ1aWxkaW5nSWQgPT09IGZpbHRlcnMuYnVpbGRpbmdJZCk7XG4gICAgICB9XG4gICAgICBpZiAoZmlsdGVycy5yZXNpZGVuY2VJZCkge1xuICAgICAgICBpbnZvaWNlcyA9IGludm9pY2VzLmZpbHRlcihpbnZvaWNlID0+IGludm9pY2UucmVzaWRlbmNlSWQgPT09IGZpbHRlcnMucmVzaWRlbmNlSWQpO1xuICAgICAgfVxuICAgICAgaWYgKGZpbHRlcnMudXNlcklkICYmIGZpbHRlcnMudXNlclJvbGUpIHtcbiAgICAgICAgLy8gQXBwbHkgcm9sZS1iYXNlZCBmaWx0ZXJpbmdcbiAgICAgICAgaWYgKGZpbHRlcnMudXNlclJvbGUgPT09ICd0ZW5hbnQnIHx8IGZpbHRlcnMudXNlclJvbGUgPT09ICdyZXNpZGVudCcpIHtcbiAgICAgICAgICBpbnZvaWNlcyA9IGludm9pY2VzLmZpbHRlcihpbnZvaWNlID0+IGludm9pY2UuY3JlYXRlZEJ5ID09PSBmaWx0ZXJzLnVzZXJJZCk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gQWRtaW4gYW5kIG1hbmFnZXIgY2FuIHNlZSBhbGwgaW52b2ljZXMgKGFscmVhZHkgZmlsdGVyZWQgYnkgYnVpbGRpbmcvcmVzaWRlbmNlIGFib3ZlKVxuICAgICAgfVxuICAgIH1cbiAgICBcbiAgICByZXR1cm4gaW52b2ljZXMuc29ydCgoYSwgYikgPT4gYi5jcmVhdGVkQXQuZ2V0VGltZSgpIC0gYS5jcmVhdGVkQXQuZ2V0VGltZSgpKTtcbiAgfVxuXG4gIGFzeW5jIGdldEludm9pY2UoaWQ6IHN0cmluZyk6IFByb21pc2U8SW52b2ljZSB8IHVuZGVmaW5lZD4ge1xuICAgIHJldHVybiB0aGlzLmludm9pY2VzLmdldChpZCk7XG4gIH1cblxuICBhc3luYyBjcmVhdGVJbnZvaWNlKGludm9pY2U6IEluc2VydEludm9pY2UpOiBQcm9taXNlPEludm9pY2U+IHtcbiAgICBjb25zdCBpZCA9IHJhbmRvbVVVSUQoKTtcbiAgICBjb25zdCBuZXdJbnZvaWNlOiBJbnZvaWNlID0ge1xuICAgICAgLi4uaW52b2ljZSxcbiAgICAgIGlkLFxuICAgICAgY3JlYXRlZEF0OiBuZXcgRGF0ZSgpLFxuICAgICAgdXBkYXRlZEF0OiBuZXcgRGF0ZSgpLFxuICAgIH07XG4gICAgdGhpcy5pbnZvaWNlcy5zZXQoaWQsIG5ld0ludm9pY2UpO1xuICAgIHJldHVybiBuZXdJbnZvaWNlO1xuICB9XG5cbiAgYXN5bmMgdXBkYXRlSW52b2ljZShpZDogc3RyaW5nLCB1cGRhdGVzOiBQYXJ0aWFsPEludm9pY2U+KTogUHJvbWlzZTxJbnZvaWNlIHwgdW5kZWZpbmVkPiB7XG4gICAgY29uc3QgZXhpc3RpbmcgPSB0aGlzLmludm9pY2VzLmdldChpZCk7XG4gICAgaWYgKCFleGlzdGluZykgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICBcbiAgICBjb25zdCB1cGRhdGVkID0geyAuLi5leGlzdGluZywgLi4udXBkYXRlcywgdXBkYXRlZEF0OiBuZXcgRGF0ZSgpIH07XG4gICAgdGhpcy5pbnZvaWNlcy5zZXQoaWQsIHVwZGF0ZWQpO1xuICAgIHJldHVybiB1cGRhdGVkO1xuICB9XG5cbiAgYXN5bmMgZGVsZXRlSW52b2ljZShpZDogc3RyaW5nKTogUHJvbWlzZTxib29sZWFuPiB7XG4gICAgcmV0dXJuIHRoaXMuaW52b2ljZXMuZGVsZXRlKGlkKTtcbiAgfVxuXG4gIGFzeW5jIGdldFBlcm1pc3Npb25zKCk6IFByb21pc2U8UGVybWlzc2lvbltdPiB7XG4gICAgcmV0dXJuIFtdO1xuICB9XG4gIGFzeW5jIGdldFJvbGVQZXJtaXNzaW9ucygpOiBQcm9taXNlPFJvbGVQZXJtaXNzaW9uW10+IHtcbiAgICByZXR1cm4gW107XG4gIH1cbiAgYXN5bmMgZ2V0VXNlclBlcm1pc3Npb25zKCk6IFByb21pc2U8VXNlclBlcm1pc3Npb25bXT4ge1xuICAgIHJldHVybiBbXTtcbiAgfVxuXG4gIGFzeW5jIGdldFBpbGxhcnMoKTogUHJvbWlzZTxQaWxsYXJbXT4ge1xuICAgIHJldHVybiBBcnJheS5mcm9tKHRoaXMucGlsbGFycy52YWx1ZXMoKSkuc29ydCgoYSwgYikgPT4gcGFyc2VJbnQoYS5vcmRlcikgLSBwYXJzZUludChiLm9yZGVyKSk7XG4gIH1cbiAgYXN5bmMgZ2V0UGlsbGFyKGlkOiBzdHJpbmcpOiBQcm9taXNlPFBpbGxhciB8IHVuZGVmaW5lZD4ge1xuICAgIHJldHVybiB0aGlzLnBpbGxhcnMuZ2V0KGlkKTtcbiAgfVxuICBhc3luYyBjcmVhdGVQaWxsYXIocGlsbGFyOiBJbnNlcnRQaWxsYXIpOiBQcm9taXNlPFBpbGxhcj4ge1xuICAgIGNvbnN0IGlkID0gcmFuZG9tVVVJRCgpO1xuICAgIGNvbnN0IG5ld1BpbGxhcjogUGlsbGFyID0ge1xuICAgICAgLi4ucGlsbGFyLFxuICAgICAgaWQsXG4gICAgICBuYW1lOiBwaWxsYXIubmFtZSxcbiAgICAgIGRlc2NyaXB0aW9uOiBwaWxsYXIuZGVzY3JpcHRpb24gfHwgJycsXG4gICAgICBzdGF0dXM6IHBpbGxhci5zdGF0dXMgfHwgJ3BlbmRpbmcnLFxuICAgICAgb3JkZXI6IHBpbGxhci5vcmRlci50b1N0cmluZygpLFxuICAgICAgY29uZmlndXJhdGlvbjogcGlsbGFyLmNvbmZpZ3VyYXRpb24gfHwgbnVsbCxcbiAgICAgIGNyZWF0ZWRBdDogbmV3IERhdGUoKSxcbiAgICAgIHVwZGF0ZWRBdDogbmV3IERhdGUoKSxcbiAgICB9O1xuICAgIHRoaXMucGlsbGFycy5zZXQoaWQsIG5ld1BpbGxhcik7XG4gICAgcmV0dXJuIG5ld1BpbGxhcjtcbiAgfVxuICBhc3luYyB1cGRhdGVQaWxsYXIoaWQ6IHN0cmluZywgdXBkYXRlczogUGFydGlhbDxQaWxsYXI+KTogUHJvbWlzZTxQaWxsYXIgfCB1bmRlZmluZWQ+IHtcbiAgICBjb25zdCBleGlzdGluZyA9IHRoaXMucGlsbGFycy5nZXQoaWQpO1xuICAgIGlmICghZXhpc3RpbmcpIHJldHVybiB1bmRlZmluZWQ7XG4gICAgY29uc3QgdXBkYXRlZCA9IHsgLi4uZXhpc3RpbmcsIC4uLnVwZGF0ZXMsIHVwZGF0ZWRBdDogbmV3IERhdGUoKSB9O1xuICAgIHRoaXMucGlsbGFycy5zZXQoaWQsIHVwZGF0ZWQpO1xuICAgIHJldHVybiB1cGRhdGVkO1xuICB9XG5cbiAgYXN5bmMgZ2V0V29ya3NwYWNlU3RhdHVzZXMoKTogUHJvbWlzZTxXb3Jrc3BhY2VTdGF0dXNbXT4ge1xuICAgIHJldHVybiBBcnJheS5mcm9tKHRoaXMud29ya3NwYWNlU3RhdHVzZXMudmFsdWVzKCkpO1xuICB9XG4gIGFzeW5jIGdldFdvcmtzcGFjZVN0YXR1cyhjb21wb25lbnQ6IHN0cmluZyk6IFByb21pc2U8V29ya3NwYWNlU3RhdHVzIHwgdW5kZWZpbmVkPiB7XG4gICAgcmV0dXJuIHRoaXMud29ya3NwYWNlU3RhdHVzZXMuZ2V0KGNvbXBvbmVudCk7XG4gIH1cbiAgYXN5bmMgY3JlYXRlV29ya3NwYWNlU3RhdHVzKHN0YXR1czogSW5zZXJ0V29ya3NwYWNlU3RhdHVzKTogUHJvbWlzZTxXb3Jrc3BhY2VTdGF0dXM+IHtcbiAgICBjb25zdCBpZCA9IHJhbmRvbVVVSUQoKTtcbiAgICBjb25zdCBuZXdTdGF0dXM6IFdvcmtzcGFjZVN0YXR1cyA9IHtcbiAgICAgIC4uLnN0YXR1cyxcbiAgICAgIGlkLFxuICAgICAgc3RhdHVzOiBzdGF0dXMuc3RhdHVzLFxuICAgICAgY29tcG9uZW50OiBzdGF0dXMuY29tcG9uZW50LFxuICAgICAgbGFzdFVwZGF0ZWQ6IG5ldyBEYXRlKCksXG4gICAgfTtcbiAgICB0aGlzLndvcmtzcGFjZVN0YXR1c2VzLnNldChzdGF0dXMuY29tcG9uZW50LCBuZXdTdGF0dXMpO1xuICAgIHJldHVybiBuZXdTdGF0dXM7XG4gIH1cbiAgYXN5bmMgdXBkYXRlV29ya3NwYWNlU3RhdHVzKFxuICAgIGNvbXBvbmVudDogc3RyaW5nLFxuICAgIHVwZGF0ZXM6IFBhcnRpYWw8V29ya3NwYWNlU3RhdHVzPlxuICApOiBQcm9taXNlPFdvcmtzcGFjZVN0YXR1cyB8IHVuZGVmaW5lZD4ge1xuICAgIGNvbnN0IGV4aXN0aW5nID0gdGhpcy53b3Jrc3BhY2VTdGF0dXNlcy5nZXQoY29tcG9uZW50KTtcbiAgICBpZiAoIWV4aXN0aW5nKSByZXR1cm4gdW5kZWZpbmVkO1xuICAgIGNvbnN0IHVwZGF0ZWQgPSB7IC4uLmV4aXN0aW5nLCAuLi51cGRhdGVzLCB1cGRhdGVkQXQ6IG5ldyBEYXRlKCkgfTtcbiAgICB0aGlzLndvcmtzcGFjZVN0YXR1c2VzLnNldChjb21wb25lbnQsIHVwZGF0ZWQpO1xuICAgIHJldHVybiB1cGRhdGVkO1xuICB9XG5cbiAgYXN5bmMgZ2V0UXVhbGl0eU1ldHJpY3MoKTogUHJvbWlzZTxRdWFsaXR5TWV0cmljW10+IHtcbiAgICByZXR1cm4gQXJyYXkuZnJvbSh0aGlzLnF1YWxpdHlNZXRyaWNzLnZhbHVlcygpKTtcbiAgfVxuICBhc3luYyBjcmVhdGVRdWFsaXR5TWV0cmljKG1ldHJpYzogSW5zZXJ0UXVhbGl0eU1ldHJpYyk6IFByb21pc2U8UXVhbGl0eU1ldHJpYz4ge1xuICAgIGNvbnN0IGlkID0gcmFuZG9tVVVJRCgpO1xuICAgIGNvbnN0IG5ld01ldHJpYzogUXVhbGl0eU1ldHJpYyA9IHtcbiAgICAgIC4uLm1ldHJpYyxcbiAgICAgIGlkLFxuICAgICAgdGltZXN0YW1wOiBuZXcgRGF0ZSgpLFxuICAgIH07XG4gICAgdGhpcy5xdWFsaXR5TWV0cmljcy5zZXQoaWQsIG5ld01ldHJpYyk7XG4gICAgcmV0dXJuIG5ld01ldHJpYztcbiAgfVxuXG4gIGFzeW5jIGdldEZyYW1ld29ya0NvbmZpZ3VyYXRpb25zKCk6IFByb21pc2U8RnJhbWV3b3JrQ29uZmlndXJhdGlvbltdPiB7XG4gICAgcmV0dXJuIEFycmF5LmZyb20odGhpcy5mcmFtZXdvcmtDb25maWdzLnZhbHVlcygpKTtcbiAgfVxuICBhc3luYyBjcmVhdGVGcmFtZXdvcmtDb25maWd1cmF0aW9uKFxuICAgIGNvbmZpZzogSW5zZXJ0RnJhbWV3b3JrQ29uZmlndXJhdGlvblxuICApOiBQcm9taXNlPEZyYW1ld29ya0NvbmZpZ3VyYXRpb24+IHtcbiAgICBjb25zdCBpZCA9IHJhbmRvbVVVSUQoKTtcbiAgICBjb25zdCBuZXdDb25maWc6IEZyYW1ld29ya0NvbmZpZ3VyYXRpb24gPSB7XG4gICAgICAuLi5jb25maWcsXG4gICAgICBpZCxcbiAgICAgIGRlc2NyaXB0aW9uOiBjb25maWcuZGVzY3JpcHRpb24gfHwgJycsXG4gICAgICBjcmVhdGVkQXQ6IG5ldyBEYXRlKCksXG4gICAgICB1cGRhdGVkQXQ6IG5ldyBEYXRlKCksXG4gICAgfTtcbiAgICB0aGlzLmZyYW1ld29ya0NvbmZpZ3Muc2V0KGNvbmZpZy5fa2V5LCBuZXdDb25maWcpO1xuICAgIHJldHVybiBuZXdDb25maWc7XG4gIH1cbiAgYXN5bmMgdXBkYXRlRnJhbWV3b3JrQ29uZmlndXJhdGlvbihcbiAgICBrZXk6IHN0cmluZyxcbiAgICB1cGRhdGVzOiBQYXJ0aWFsPEZyYW1ld29ya0NvbmZpZ3VyYXRpb24+XG4gICk6IFByb21pc2U8RnJhbWV3b3JrQ29uZmlndXJhdGlvbiB8IHVuZGVmaW5lZD4ge1xuICAgIGNvbnN0IGV4aXN0aW5nID0gdGhpcy5mcmFtZXdvcmtDb25maWdzLmdldChrZXkpO1xuICAgIGlmICghZXhpc3RpbmcpIHJldHVybiB1bmRlZmluZWQ7XG4gICAgY29uc3QgdXBkYXRlZCA9IHsgLi4uZXhpc3RpbmcsIC4uLnVwZGF0ZXMsIHVwZGF0ZWRBdDogbmV3IERhdGUoKSB9O1xuICAgIHRoaXMuZnJhbWV3b3JrQ29uZmlncy5zZXQoa2V5LCB1cGRhdGVkKTtcbiAgICByZXR1cm4gdXBkYXRlZDtcbiAgfVxuXG4gIGFzeW5jIGdldEltcHJvdmVtZW50U3VnZ2VzdGlvbnMoKTogUHJvbWlzZTxJbXByb3ZlbWVudFN1Z2dlc3Rpb25bXT4ge1xuICAgIHJldHVybiBBcnJheS5mcm9tKHRoaXMuaW1wcm92ZW1lbnRTdWdnZXN0aW9ucy52YWx1ZXMoKSk7XG4gIH1cbiAgYXN5bmMgY3JlYXRlSW1wcm92ZW1lbnRTdWdnZXN0aW9uKFxuICAgIHN1Z2dlc3Rpb246IEluc2VydEltcHJvdmVtZW50U3VnZ2VzdGlvblxuICApOiBQcm9taXNlPEltcHJvdmVtZW50U3VnZ2VzdGlvbj4ge1xuICAgIGNvbnN0IGlkID0gcmFuZG9tVVVJRCgpO1xuICAgIGNvbnN0IG5ld1N1Z2dlc3Rpb246IEltcHJvdmVtZW50U3VnZ2VzdGlvbiA9IHtcbiAgICAgIC4uLnN1Z2dlc3Rpb24sXG4gICAgICBpZCxcbiAgICAgIGZpbGVQYXRoOiBzdWdnZXN0aW9uLmZpbGVQYXRoIHx8IG51bGwsXG4gICAgICBzdGF0dXM6IHN1Z2dlc3Rpb24uc3RhdHVzIGFzICdOZXcnIHwgJ0Fja25vd2xlZGdlZCcgfCAnRG9uZScsXG4gICAgICBjYXRlZ29yeTogc3VnZ2VzdGlvbi5jYXRlZ29yeSBhcyAnQ29kZSBRdWFsaXR5JyB8ICdTZWN1cml0eScgfCAnVGVzdGluZycgfCAnRG9jdW1lbnRhdGlvbicgfCAnUGVyZm9ybWFuY2UnIHwgJ0NvbnRpbnVvdXMgSW1wcm92ZW1lbnQnIHwgJ1JlcGxpdCBBSSBBZ2VudCBNb25pdG9yaW5nJyB8ICdSZXBsaXQgQXBwJyxcbiAgICAgIHByaW9yaXR5OiAoc3VnZ2VzdGlvbi5wcmlvcml0eSBhcyAnTG93JyB8ICdNZWRpdW0nIHwgJ0hpZ2gnIHwgJ0NyaXRpY2FsJykgfHwgJ01lZGl1bScsXG4gICAgICBhc3NpZ25lZFRvOiBzdWdnZXN0aW9uLmFzc2lnbmVkVG8gfHwgbnVsbCxcbiAgICAgIHRlY2huaWNhbERldGFpbHM6IHN1Z2dlc3Rpb24udGVjaG5pY2FsRGV0YWlscyB8fCBudWxsLFxuICAgICAgYnVzaW5lc3NJbXBhY3Q6IHN1Z2dlc3Rpb24uYnVzaW5lc3NJbXBhY3QgfHwgbnVsbCxcbiAgICAgIGltcGxlbWVudGF0aW9uRWZmb3J0OiBzdWdnZXN0aW9uLmltcGxlbWVudGF0aW9uRWZmb3J0IHx8IG51bGwsXG4gICAgICBxdWViZWNDb21wbGlhbmNlUmVsZXZhbmNlOiBzdWdnZXN0aW9uLnF1ZWJlY0NvbXBsaWFuY2VSZWxldmFuY2UgfHwgbnVsbCxcbiAgICAgIHN1Z2dlc3RlZEJ5OiBzdWdnZXN0aW9uLnN1Z2dlc3RlZEJ5IHx8IG51bGwsXG4gICAgICBjcmVhdGVkQXQ6IG5ldyBEYXRlKCksXG4gICAgICB1cGRhdGVkQXQ6IG5ldyBEYXRlKCksXG4gICAgICBhY2tub3dsZWRnZWRBdDogbnVsbCxcbiAgICAgIGNvbXBsZXRlZEF0OiBudWxsLFxuICAgIH07XG4gICAgdGhpcy5pbXByb3ZlbWVudFN1Z2dlc3Rpb25zLnNldChpZCwgbmV3U3VnZ2VzdGlvbik7XG4gICAgcmV0dXJuIG5ld1N1Z2dlc3Rpb247XG4gIH1cbiAgYXN5bmMgdXBkYXRlSW1wcm92ZW1lbnRTdWdnZXN0aW9uKFxuICAgIGlkOiBzdHJpbmcsXG4gICAgdXBkYXRlczogUGFydGlhbDxJbXByb3ZlbWVudFN1Z2dlc3Rpb24+XG4gICk6IFByb21pc2U8SW1wcm92ZW1lbnRTdWdnZXN0aW9uIHwgdW5kZWZpbmVkPiB7XG4gICAgY29uc3QgZXhpc3RpbmcgPSB0aGlzLmltcHJvdmVtZW50U3VnZ2VzdGlvbnMuZ2V0KGlkKTtcbiAgICBpZiAoIWV4aXN0aW5nKSByZXR1cm4gdW5kZWZpbmVkO1xuICAgIGNvbnN0IHVwZGF0ZWQgPSB7IC4uLmV4aXN0aW5nLCAuLi51cGRhdGVzLCB1cGRhdGVkQXQ6IG5ldyBEYXRlKCkgfTtcbiAgICB0aGlzLmltcHJvdmVtZW50U3VnZ2VzdGlvbnMuc2V0KGlkLCB1cGRhdGVkKTtcbiAgICByZXR1cm4gdXBkYXRlZDtcbiAgfVxuXG4gIGFzeW5jIGdldFRvcEltcHJvdmVtZW50U3VnZ2VzdGlvbnMobGltaXQ6IG51bWJlcik6IFByb21pc2U8SW1wcm92ZW1lbnRTdWdnZXN0aW9uW10+IHtcbiAgICBjb25zdCBzdWdnZXN0aW9ucyA9IEFycmF5LmZyb20odGhpcy5pbXByb3ZlbWVudFN1Z2dlc3Rpb25zLnZhbHVlcygpKTtcbiAgICAvLyBTb3J0IGJ5IHByaW9yaXR5IChDcml0aWNhbCA+IEhpZ2ggPiBNZWRpdW0gPiBMb3cpIHRoZW4gYnkgY3JlYXRpb24gZGF0ZVxuICAgIGNvbnN0IHByaW9yaXR5T3JkZXI6IHsgW2tleTogc3RyaW5nXTogbnVtYmVyIH0gPSB7ICdDcml0aWNhbCc6IDAsICdIaWdoJzogMSwgJ01lZGl1bSc6IDIsICdMb3cnOiAzIH07XG4gICAgcmV0dXJuIHN1Z2dlc3Rpb25zXG4gICAgICAuc29ydCgoYSwgYikgPT4ge1xuICAgICAgICBjb25zdCBwcmlvcml0eUEgPSBwcmlvcml0eU9yZGVyW2EucHJpb3JpdHldID8/IDk5OTtcbiAgICAgICAgY29uc3QgcHJpb3JpdHlCID0gcHJpb3JpdHlPcmRlcltiLnByaW9yaXR5XSA/PyA5OTk7XG4gICAgICAgIGNvbnN0IHByaW9yaXR5RGlmZiA9IHByaW9yaXR5QSAtIHByaW9yaXR5QjtcbiAgICAgICAgaWYgKHByaW9yaXR5RGlmZiAhPT0gMCkgcmV0dXJuIHByaW9yaXR5RGlmZjtcbiAgICAgICAgcmV0dXJuIG5ldyBEYXRlKGEuY3JlYXRlZEF0KS5nZXRUaW1lKCkgLSBuZXcgRGF0ZShiLmNyZWF0ZWRBdCkuZ2V0VGltZSgpO1xuICAgICAgfSlcbiAgICAgIC5zbGljZSgwLCBsaW1pdCk7XG4gIH1cblxuICBhc3luYyBjbGVhck5ld1N1Z2dlc3Rpb25zKCk6IFByb21pc2U8dm9pZD4ge1xuICAgIGZvciAoY29uc3QgW2lkLCBzdWdnZXN0aW9uXSBvZiB0aGlzLmltcHJvdmVtZW50U3VnZ2VzdGlvbnMuZW50cmllcygpKSB7XG4gICAgICBpZiAoc3VnZ2VzdGlvbi5zdGF0dXMgPT09ICdOZXcnKSB7XG4gICAgICAgIHRoaXMuaW1wcm92ZW1lbnRTdWdnZXN0aW9ucy5kZWxldGUoaWQpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGFzeW5jIHVwZGF0ZVN1Z2dlc3Rpb25TdGF0dXMoXG4gICAgaWQ6IHN0cmluZyxcbiAgICBzdGF0dXM6ICdOZXcnIHwgJ0Fja25vd2xlZGdlZCcgfCAnRG9uZSdcbiAgKTogUHJvbWlzZTxJbXByb3ZlbWVudFN1Z2dlc3Rpb24gfCB1bmRlZmluZWQ+IHtcbiAgICBjb25zdCBzdWdnZXN0aW9uID0gdGhpcy5pbXByb3ZlbWVudFN1Z2dlc3Rpb25zLmdldChpZCk7XG4gICAgaWYgKCFzdWdnZXN0aW9uKSByZXR1cm4gdW5kZWZpbmVkO1xuXG4gICAgY29uc3QgdXBkYXRlZFN1Z2dlc3Rpb24gPSB7XG4gICAgICAuLi5zdWdnZXN0aW9uLFxuICAgICAgc3RhdHVzLFxuICAgICAgdXBkYXRlZEF0OiBuZXcgRGF0ZSgpLFxuICAgIH07XG4gICAgdGhpcy5pbXByb3ZlbWVudFN1Z2dlc3Rpb25zLnNldChpZCwgdXBkYXRlZFN1Z2dlc3Rpb24pO1xuICAgIHJldHVybiB1cGRhdGVkU3VnZ2VzdGlvbjtcbiAgfVxuXG4gIGFzeW5jIGdldEZlYXR1cmVzKCk6IFByb21pc2U8RmVhdHVyZVtdPiB7XG4gICAgcmV0dXJuIEFycmF5LmZyb20odGhpcy5mZWF0dXJlcy52YWx1ZXMoKSk7XG4gIH1cbiAgYXN5bmMgZ2V0RmVhdHVyZShpZDogc3RyaW5nKTogUHJvbWlzZTxGZWF0dXJlIHwgdW5kZWZpbmVkPiB7XG4gICAgcmV0dXJuIHRoaXMuZmVhdHVyZXMuZ2V0KGlkKTtcbiAgfVxuICBhc3luYyBjcmVhdGVGZWF0dXJlKGZlYXR1cmU6IEluc2VydEZlYXR1cmUpOiBQcm9taXNlPEZlYXR1cmU+IHtcbiAgICBjb25zdCBpZCA9IHJhbmRvbVVVSUQoKTtcbiAgICBjb25zdCBuZXdGZWF0dXJlOiBGZWF0dXJlID0ge1xuICAgICAgLi4uZmVhdHVyZSxcbiAgICAgIGlkLFxuICAgICAgaXNQdWJsaWNSb2FkbWFwOiB0cnVlLFxuICAgICAgY3JlYXRlZEF0OiBuZXcgRGF0ZSgpLFxuICAgICAgdXBkYXRlZEF0OiBuZXcgRGF0ZSgpLFxuICAgICAgcmVxdWVzdGVkQnk6IGZlYXR1cmUucmVxdWVzdGVkQnkgfHwgbnVsbCxcbiAgICAgIGFzc2lnbmVkVG86IGZlYXR1cmUuYXNzaWduZWRUbyB8fCBudWxsLFxuICAgICAgZXN0aW1hdGVkSG91cnM6IGZlYXR1cmUuZXN0aW1hdGVkSG91cnMgfHwgbnVsbCxcbiAgICAgIGJ1c2luZXNzT2JqZWN0aXZlOiBmZWF0dXJlLmJ1c2luZXNzT2JqZWN0aXZlIHx8IG51bGwsXG4gICAgICB0YXJnZXRVc2VyczogZmVhdHVyZS50YXJnZXRVc2VycyB8fCBudWxsLFxuICAgICAgc3VjY2Vzc01ldHJpY3M6IGZlYXR1cmUuc3VjY2Vzc01ldHJpY3MgfHwgbnVsbCxcbiAgICAgIHRlY2huaWNhbENvbXBsZXhpdHk6IGZlYXR1cmUudGVjaG5pY2FsQ29tcGxleGl0eSB8fCBudWxsLFxuICAgICAgZGVwZW5kZW5jaWVzOiBmZWF0dXJlLmRlcGVuZGVuY2llcz8uam9pbignLCcpIHx8IG51bGwsXG4gICAgICB1c2VyRmxvdzogZmVhdHVyZS51c2VyRmxvdyB8fCBudWxsLFxuICAgICAgYWN0dWFsSG91cnM6IG51bGwsXG4gICAgICBzdGFydERhdGU6IG51bGwsXG4gICAgICBjb21wbGV0ZWREYXRlOiBudWxsLFxuICAgICAgdGFnczogbnVsbCxcbiAgICAgIG1ldGFkYXRhOiBudWxsLFxuICAgICAgYWlBbmFseXNpc1Jlc3VsdDogbnVsbCxcbiAgICAgIGFpQW5hbHl6ZWRBdDogbnVsbCxcbiAgICAgIGlzU3RyYXRlZ2ljUGF0aDogZmFsc2UsXG4gICAgICBzeW5jZWRBdDogbnVsbCxcbiAgICB9O1xuICAgIHRoaXMuZmVhdHVyZXMuc2V0KGlkLCBuZXdGZWF0dXJlKTtcbiAgICByZXR1cm4gbmV3RmVhdHVyZTtcbiAgfVxuICBhc3luYyB1cGRhdGVGZWF0dXJlKGlkOiBzdHJpbmcsIHVwZGF0ZXM6IFBhcnRpYWw8RmVhdHVyZT4pOiBQcm9taXNlPEZlYXR1cmUgfCB1bmRlZmluZWQ+IHtcbiAgICBjb25zdCBleGlzdGluZyA9IHRoaXMuZmVhdHVyZXMuZ2V0KGlkKTtcbiAgICBpZiAoIWV4aXN0aW5nKSByZXR1cm4gdW5kZWZpbmVkO1xuICAgIGNvbnN0IHVwZGF0ZWQgPSB7IC4uLmV4aXN0aW5nLCAuLi51cGRhdGVzLCB1cGRhdGVkQXQ6IG5ldyBEYXRlKCkgfTtcbiAgICB0aGlzLmZlYXR1cmVzLnNldChpZCwgdXBkYXRlZCk7XG4gICAgcmV0dXJuIHVwZGF0ZWQ7XG4gIH1cblxuICBhc3luYyBnZXRGZWF0dXJlc0J5U3RhdHVzKFxuICAgIHN0YXR1czogJ2NvbXBsZXRlZCcgfCAnaW4tcHJvZ3Jlc3MnIHwgJ3BsYW5uZWQnIHwgJ2NhbmNlbGxlZCcgfCAncmVxdWVzdGVkJ1xuICApOiBQcm9taXNlPEZlYXR1cmVbXT4ge1xuICAgIHJldHVybiBBcnJheS5mcm9tKHRoaXMuZmVhdHVyZXMudmFsdWVzKCkpLmZpbHRlcigoZikgPT4gZi5zdGF0dXMgPT09IHN0YXR1cyk7XG4gIH1cblxuICBhc3luYyBnZXRQdWJsaWNSb2FkbWFwRmVhdHVyZXMoKTogUHJvbWlzZTxGZWF0dXJlW10+IHtcbiAgICByZXR1cm4gQXJyYXkuZnJvbSh0aGlzLmZlYXR1cmVzLnZhbHVlcygpKS5maWx0ZXIoKGYpID0+IGYuaXNQdWJsaWNSb2FkbWFwKTtcbiAgfVxuXG4gIGFzeW5jIGdldEFjdGlvbmFibGVJdGVtcygpOiBQcm9taXNlPEFjdGlvbmFibGVJdGVtW10+IHtcbiAgICByZXR1cm4gQXJyYXkuZnJvbSh0aGlzLmFjdGlvbmFibGVJdGVtcy52YWx1ZXMoKSk7XG4gIH1cbiAgYXN5bmMgY3JlYXRlQWN0aW9uYWJsZUl0ZW0oaXRlbTogSW5zZXJ0QWN0aW9uYWJsZUl0ZW0pOiBQcm9taXNlPEFjdGlvbmFibGVJdGVtPiB7XG4gICAgY29uc3QgaWQgPSByYW5kb21VVUlEKCk7XG4gICAgY29uc3QgbmV3SXRlbTogQWN0aW9uYWJsZUl0ZW0gPSB7XG4gICAgICAuLi5pdGVtLFxuICAgICAgaWQsXG4gICAgICBmZWF0dXJlSWQ6IGl0ZW0uZmVhdHVyZUlkIHx8IHJhbmRvbVVVSUQoKSxcbiAgICAgIGNyZWF0ZWRBdDogbmV3IERhdGUoKSxcbiAgICAgIHVwZGF0ZWRBdDogbmV3IERhdGUoKSxcbiAgICAgIGVzdGltYXRlZEhvdXJzOiBpdGVtLmVzdGltYXRlZEhvdXJzIHx8IG51bGwsXG4gICAgICBhY3R1YWxIb3VyczogbnVsbCxcbiAgICAgIGRlcGVuZGVuY2llczogaXRlbS5kZXBlbmRlbmNpZXMgfHwgbnVsbCxcbiAgICAgIHRlY2huaWNhbERldGFpbHM6IG51bGwsXG4gICAgICBpbXBsZW1lbnRhdGlvblByb21wdDogbnVsbCxcbiAgICAgIHRlc3RpbmdSZXF1aXJlbWVudHM6IG51bGwsXG4gICAgICBlc3RpbWF0ZWRFZmZvcnQ6IG51bGwsXG4gICAgICBvcmRlckluZGV4OiAwLFxuICAgICAgc3RhcnRlZEF0OiBudWxsLFxuICAgICAgY29tcGxldGVkQXQ6IG51bGwsXG4gICAgfTtcbiAgICB0aGlzLmFjdGlvbmFibGVJdGVtcy5zZXQoaWQsIG5ld0l0ZW0pO1xuICAgIHJldHVybiBuZXdJdGVtO1xuICB9XG4gIGFzeW5jIHVwZGF0ZUFjdGlvbmFibGVJdGVtKFxuICAgIGlkOiBzdHJpbmcsXG4gICAgdXBkYXRlczogUGFydGlhbDxBY3Rpb25hYmxlSXRlbT5cbiAgKTogUHJvbWlzZTxBY3Rpb25hYmxlSXRlbSB8IHVuZGVmaW5lZD4ge1xuICAgIGNvbnN0IGV4aXN0aW5nID0gdGhpcy5hY3Rpb25hYmxlSXRlbXMuZ2V0KGlkKTtcbiAgICBpZiAoIWV4aXN0aW5nKSByZXR1cm4gdW5kZWZpbmVkO1xuICAgIGNvbnN0IHVwZGF0ZWQgPSB7IC4uLmV4aXN0aW5nLCAuLi51cGRhdGVzLCB1cGRhdGVkQXQ6IG5ldyBEYXRlKCkgfTtcbiAgICB0aGlzLmFjdGlvbmFibGVJdGVtcy5zZXQoaWQsIHVwZGF0ZWQpO1xuICAgIHJldHVybiB1cGRhdGVkO1xuICB9XG4gIGFzeW5jIGRlbGV0ZUFjdGlvbmFibGVJdGVtKGlkOiBzdHJpbmcpOiBQcm9taXNlPGJvb2xlYW4+IHtcbiAgICByZXR1cm4gdGhpcy5hY3Rpb25hYmxlSXRlbXMuZGVsZXRlKGlkKTtcbiAgfVxuXG4gIGFzeW5jIGdldEludml0YXRpb25zKCk6IFByb21pc2U8SW52aXRhdGlvbltdPiB7XG4gICAgcmV0dXJuIEFycmF5LmZyb20odGhpcy5pbnZpdGF0aW9ucy52YWx1ZXMoKSk7XG4gIH1cbiAgYXN5bmMgY3JlYXRlSW52aXRhdGlvbihpbnZpdGF0aW9uOiBJbnNlcnRJbnZpdGF0aW9uKTogUHJvbWlzZTxJbnZpdGF0aW9uPiB7XG4gICAgY29uc3QgaWQgPSByYW5kb21VVUlEKCk7XG4gICAgY29uc3QgbmV3SW52aXRhdGlvbjogSW52aXRhdGlvbiA9IHtcbiAgICAgIC4uLmludml0YXRpb24sXG4gICAgICBpZCxcbiAgICAgIHRva2VuOiByYW5kb21VVUlEKCksXG4gICAgICBjcmVhdGVkQXQ6IG5ldyBEYXRlKCksXG4gICAgICB1cGRhdGVkQXQ6IG5ldyBEYXRlKCksXG4gICAgICBzdGF0dXM6ICdwZW5kaW5nJyBhcyAncGVuZGluZycgfCAnYWNjZXB0ZWQnIHwgJ2V4cGlyZWQnIHwgJ2NhbmNlbGxlZCcsXG4gICAgICBpcEFkZHJlc3M6ICcnLFxuICAgICAgdXNlckFnZW50OiAnJyxcbiAgICAgIHRva2VuSGFzaDogbnVsbCxcbiAgICAgIHVzZWRBdDogbnVsbCxcbiAgICAgIGNyZWF0ZWRCeVVzZXJJZDogaW52aXRhdGlvbi5pbnZpdGVkQnlVc2VySWQsXG4gICAgICBhY2NlcHRlZEJ5VXNlcklkOiBudWxsLFxuICAgICAgYWNjZXB0ZWRBdDogbnVsbCxcbiAgICAgIHJldm9rZWRBdDogbnVsbCxcbiAgICAgIHJldm9rZWRCeVVzZXJJZDogbnVsbCxcbiAgICAgIGxhc3RBY2Nlc3NlZEF0OiBudWxsLFxuICAgIH07XG4gICAgdGhpcy5pbnZpdGF0aW9ucy5zZXQoaWQsIG5ld0ludml0YXRpb24pO1xuICAgIHJldHVybiBuZXdJbnZpdGF0aW9uO1xuICB9XG4gIGFzeW5jIGdldEludml0YXRpb25CeVRva2VuKHRva2VuOiBzdHJpbmcpOiBQcm9taXNlPEludml0YXRpb24gfCB1bmRlZmluZWQ+IHtcbiAgICByZXR1cm4gQXJyYXkuZnJvbSh0aGlzLmludml0YXRpb25zLnZhbHVlcygpKS5maW5kKChpbnYpID0+IGludi50b2tlbiA9PT0gdG9rZW4pO1xuICB9XG4gIGFzeW5jIHVwZGF0ZUludml0YXRpb24oXG4gICAgaWQ6IHN0cmluZyxcbiAgICB1cGRhdGVzOiBQYXJ0aWFsPEludml0YXRpb24+XG4gICk6IFByb21pc2U8SW52aXRhdGlvbiB8IHVuZGVmaW5lZD4ge1xuICAgIGNvbnN0IGV4aXN0aW5nID0gdGhpcy5pbnZpdGF0aW9ucy5nZXQoaWQpO1xuICAgIGlmICghZXhpc3RpbmcpIHJldHVybiB1bmRlZmluZWQ7XG4gICAgY29uc3QgdXBkYXRlZCA9IHsgLi4uZXhpc3RpbmcsIC4uLnVwZGF0ZXMsIHVwZGF0ZWRBdDogbmV3IERhdGUoKSB9O1xuICAgIHRoaXMuaW52aXRhdGlvbnMuc2V0KGlkLCB1cGRhdGVkKTtcbiAgICByZXR1cm4gdXBkYXRlZDtcbiAgfVxuXG4gIGFzeW5jIGdldEludml0YXRpb25BdWRpdExvZ3MoKTogUHJvbWlzZTxJbnZpdGF0aW9uQXVkaXRMb2dbXT4ge1xuICAgIHJldHVybiBBcnJheS5mcm9tKHRoaXMuaW52aXRhdGlvbkF1ZGl0TG9ncy52YWx1ZXMoKSk7XG4gIH1cbiAgYXN5bmMgY3JlYXRlSW52aXRhdGlvbkF1ZGl0TG9nKGxvZzogSW5zZXJ0SW52aXRhdGlvbkF1ZGl0TG9nKTogUHJvbWlzZTxJbnZpdGF0aW9uQXVkaXRMb2c+IHtcbiAgICBjb25zdCBpZCA9IHJhbmRvbVVVSUQoKTtcbiAgICBjb25zdCBuZXdMb2c6IEludml0YXRpb25BdWRpdExvZyA9IHsgXG4gICAgICAuLi5sb2csIFxuICAgICAgaWQsIFxuICAgICAgY3JlYXRlZEF0OiBuZXcgRGF0ZSgpLFxuICAgICAgaXBBZGRyZXNzOiBsb2cuaXBBZGRyZXNzIHx8ICcnLFxuICAgICAgdXNlckFnZW50OiBsb2cudXNlckFnZW50IHx8ICcnLFxuICAgICAgZGV0YWlsczogbG9nLmRldGFpbHMgfHwge30sXG4gICAgICBwcmV2aW91c1N0YXR1czogbG9nLnByZXZpb3VzU3RhdHVzIHx8ICdwZW5kaW5nJyxcbiAgICAgIG5ld1N0YXR1czogbG9nLm5ld1N0YXR1cyB8fCAncGVuZGluZydcbiAgICB9O1xuICAgIHRoaXMuaW52aXRhdGlvbkF1ZGl0TG9ncy5zZXQoaWQsIG5ld0xvZyk7XG4gICAgcmV0dXJuIG5ld0xvZztcbiAgfVxuXG4gIGFzeW5jIGdldENvbW1lbnRzQnlEZW1hbmQoKTogUHJvbWlzZTxEZW1hbmRDb21tZW50W10+IHtcbiAgICByZXR1cm4gW107XG4gIH1cbiAgYXN5bmMgY3JlYXRlRGVtYW5kQ29tbWVudChjb21tZW50OiBJbnNlcnREZW1hbmRDb21tZW50KTogUHJvbWlzZTxEZW1hbmRDb21tZW50PiB7XG4gICAgY29uc3QgaWQgPSByYW5kb21VVUlEKCk7XG4gICAgcmV0dXJuIHtcbiAgICAgIC4uLmNvbW1lbnQsXG4gICAgICBpZCxcbiAgICAgIGNyZWF0ZWRBdDogbmV3IERhdGUoKSxcbiAgICAgIHVwZGF0ZWRBdDogbmV3IERhdGUoKSxcbiAgICB9O1xuICB9XG5cbiAgYXN5bmMgZ2V0QnVncygpOiBQcm9taXNlPEJ1Z1tdPiB7XG4gICAgcmV0dXJuIEFycmF5LmZyb20odGhpcy5idWdzLnZhbHVlcygpKTtcbiAgfVxuICBcbiAgYXN5bmMgZ2V0QnVnc0ZvclVzZXIodXNlcklkOiBzdHJpbmcsIHVzZXJSb2xlOiBzdHJpbmcsIG9yZ2FuaXphdGlvbklkPzogc3RyaW5nKTogUHJvbWlzZTxCdWdbXT4ge1xuICAgIGNvbnN0IGFsbEJ1Z3MgPSBBcnJheS5mcm9tKHRoaXMuYnVncy52YWx1ZXMoKSk7XG4gICAgXG4gICAgaWYgKHVzZXJSb2xlID09PSAnYWRtaW4nKSB7XG4gICAgICAvLyBBZG1pbiBjYW4gc2VlIGFsbCBidWdzXG4gICAgICByZXR1cm4gYWxsQnVncztcbiAgICB9IGVsc2UgaWYgKHVzZXJSb2xlID09PSAnbWFuYWdlcicgJiYgb3JnYW5pemF0aW9uSWQpIHtcbiAgICAgIC8vIEZvciBtYW5hZ2VycywgcmV0dXJuIGFsbCBidWdzIGZvciBub3cgKGNhbiBiZSByZWZpbmVkIGxhdGVyIGJhc2VkIG9uIG9yZ2FuaXphdGlvbilcbiAgICAgIHJldHVybiBhbGxCdWdzO1xuICAgIH0gZWxzZSB7XG4gICAgICAvLyBGb3IgcmVzaWRlbnRzIGFuZCB0ZW5hbnRzLCByZXR1cm4gb25seSB0aGVpciBvd24gYnVnc1xuICAgICAgcmV0dXJuIGFsbEJ1Z3MuZmlsdGVyKGJ1ZyA9PiBidWcuY3JlYXRlZEJ5ID09PSB1c2VySWQpO1xuICAgIH1cbiAgfVxuICBcbiAgYXN5bmMgZ2V0QnVnKGlkOiBzdHJpbmcsIHVzZXJJZD86IHN0cmluZywgcm9sZT86IHN0cmluZywgb3JnYW5pemF0aW9uSWQ/OiBzdHJpbmcpOiBQcm9taXNlPEJ1ZyB8IHVuZGVmaW5lZD4ge1xuICAgIGNvbnN0IGJ1ZyA9IHRoaXMuYnVncy5nZXQoaWQpO1xuICAgIGlmICghYnVnKSByZXR1cm4gdW5kZWZpbmVkO1xuICAgIFxuICAgIC8vIElmIGFjY2VzcyBjb250cm9sIHBhcmFtZXRlcnMgYXJlIHByb3ZpZGVkLCBjaGVjayBwZXJtaXNzaW9uc1xuICAgIGlmICh1c2VySWQgJiYgcm9sZSkge1xuICAgICAgaWYgKHJvbGUgPT09ICdhZG1pbicpIHtcbiAgICAgICAgcmV0dXJuIGJ1ZztcbiAgICAgIH0gZWxzZSBpZiAocm9sZSA9PT0gJ21hbmFnZXInICYmIG9yZ2FuaXphdGlvbklkKSB7XG4gICAgICAgIHJldHVybiBidWc7XG4gICAgICB9IGVsc2UgaWYgKGJ1Zy5jcmVhdGVkQnkgPT09IHVzZXJJZCkge1xuICAgICAgICByZXR1cm4gYnVnO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDsgLy8gQWNjZXNzIGRlbmllZFxuICAgICAgfVxuICAgIH1cbiAgICBcbiAgICByZXR1cm4gYnVnO1xuICB9XG4gIFxuICBhc3luYyBjcmVhdGVCdWcoYnVnOiBJbnNlcnRCdWcpOiBQcm9taXNlPEJ1Zz4ge1xuICAgIGNvbnN0IGlkID0gcmFuZG9tVVVJRCgpO1xuICAgIGNvbnN0IG5ld0J1ZzogQnVnID0ge1xuICAgICAgLi4uYnVnLFxuICAgICAgaWQsXG4gICAgICBzdGF0dXM6ICduZXcnLFxuICAgICAgY3JlYXRlZEF0OiBuZXcgRGF0ZSgpLFxuICAgICAgdXBkYXRlZEF0OiBuZXcgRGF0ZSgpLFxuICAgICAgcmVwcm9kdWN0aW9uU3RlcHM6IGJ1Zy5yZXByb2R1Y3Rpb25TdGVwcyB8fCAnJyxcbiAgICAgIGFzc2lnbmVkVG86IG51bGwsXG4gICAgICByZXNvbHZlZEF0OiBudWxsLFxuICAgICAgcmVzb2x2ZWRCeTogbnVsbCxcbiAgICAgIG5vdGVzOiBudWxsLFxuICAgICAgZW52aXJvbm1lbnQ6IGJ1Zy5lbnZpcm9ubWVudCB8fCAnJyxcbiAgICB9O1xuICAgIHRoaXMuYnVncy5zZXQoaWQsIG5ld0J1Zyk7XG4gICAgcmV0dXJuIG5ld0J1ZztcbiAgfVxuICBcbiAgYXN5bmMgdXBkYXRlQnVnKGlkOiBzdHJpbmcsIHVwZGF0ZXM6IFBhcnRpYWw8QnVnPiwgdXNlcklkPzogc3RyaW5nLCByb2xlPzogc3RyaW5nKTogUHJvbWlzZTxCdWcgfCB1bmRlZmluZWQ+IHtcbiAgICBjb25zdCBleGlzdGluZyA9IHRoaXMuYnVncy5nZXQoaWQpO1xuICAgIGlmICghZXhpc3RpbmcpIHJldHVybiB1bmRlZmluZWQ7XG4gICAgXG4gICAgLy8gSWYgYWNjZXNzIGNvbnRyb2wgcGFyYW1ldGVycyBhcmUgcHJvdmlkZWQsIGNoZWNrIHBlcm1pc3Npb25zXG4gICAgaWYgKHVzZXJJZCAmJiByb2xlKSB7XG4gICAgICBpZiAocm9sZSA9PT0gJ2FkbWluJyB8fCByb2xlID09PSAnbWFuYWdlcicpIHtcbiAgICAgICAgLy8gQWRtaW4gYW5kIG1hbmFnZXJzIGNhbiBlZGl0IGFueSBidWdcbiAgICAgIH0gZWxzZSBpZiAoZXhpc3RpbmcuY3JlYXRlZEJ5ID09PSB1c2VySWQpIHtcbiAgICAgICAgLy8gVXNlcnMgY2FuIGVkaXQgdGhlaXIgb3duIGJ1Z3NcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiB1bmRlZmluZWQ7IC8vIEFjY2VzcyBkZW5pZWRcbiAgICAgIH1cbiAgICB9XG4gICAgXG4gICAgY29uc3QgdXBkYXRlZCA9IHsgLi4uZXhpc3RpbmcsIC4uLnVwZGF0ZXMsIHVwZGF0ZWRBdDogbmV3IERhdGUoKSB9O1xuICAgIHRoaXMuYnVncy5zZXQoaWQsIHVwZGF0ZWQpO1xuICAgIHJldHVybiB1cGRhdGVkO1xuICB9XG4gIFxuICBhc3luYyBkZWxldGVCdWcoaWQ6IHN0cmluZywgdXNlcklkOiBzdHJpbmcsIHJvbGU6IHN0cmluZyk6IFByb21pc2U8Ym9vbGVhbj4ge1xuICAgIGNvbnN0IGV4aXN0aW5nID0gdGhpcy5idWdzLmdldChpZCk7XG4gICAgaWYgKCFleGlzdGluZykgcmV0dXJuIGZhbHNlO1xuICAgIFxuICAgIC8vIENoZWNrIHBlcm1pc3Npb25zIC0gb25seSBhZG1pbnMgYW5kIGJ1ZyBjcmVhdG9ycyBjYW4gZGVsZXRlIGJ1Z3NcbiAgICBpZiAocm9sZSA9PT0gJ2FkbWluJyB8fCBleGlzdGluZy5jcmVhdGVkQnkgPT09IHVzZXJJZCkge1xuICAgICAgdGhpcy5idWdzLmRlbGV0ZShpZCk7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgXG4gICAgcmV0dXJuIGZhbHNlOyAvLyBBY2Nlc3MgZGVuaWVkXG4gIH1cblxuICBhc3luYyBnZXRGZWF0dXJlUmVxdWVzdHMoKTogUHJvbWlzZTxGZWF0dXJlUmVxdWVzdFtdPiB7XG4gICAgY29uc3QgZmVhdHVyZVJlcXVlc3RzID0gQXJyYXkuZnJvbSh0aGlzLmZlYXR1cmVSZXF1ZXN0cy52YWx1ZXMoKSk7XG4gICAgLy8gQWRkIGF0dGFjaG1lbnQgaW5mb3JtYXRpb24gdG8gZWFjaCBmZWF0dXJlIHJlcXVlc3RcbiAgICBjb25zdCBlbnJpY2hlZFJlcXVlc3RzID0gYXdhaXQgUHJvbWlzZS5hbGwoXG4gICAgICBmZWF0dXJlUmVxdWVzdHMubWFwKGFzeW5jIChyZXF1ZXN0KSA9PiB7XG4gICAgICAgIC8vIEZvciBub3csIHJldHVybiBlbXB0eSBhdHRhY2htZW50cyAtIHdpbGwgYmUgaW1wbGVtZW50ZWQgb25jZSBzdG9yYWdlIGlzIGZpeGVkXG4gICAgICAgIGNvbnN0IGF0dGFjaG1lbnRzOiBhbnlbXSA9IFtdO1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIC4uLnJlcXVlc3QsXG4gICAgICAgICAgYXR0YWNobWVudENvdW50OiBhdHRhY2htZW50cy5sZW5ndGgsXG4gICAgICAgICAgYXR0YWNobWVudHM6IFtdXG4gICAgICAgIH07XG4gICAgICB9KVxuICAgICk7XG4gICAgcmV0dXJuIGVucmljaGVkUmVxdWVzdHM7XG4gIH1cbiAgXG4gIGFzeW5jIGdldEZlYXR1cmVSZXF1ZXN0c0ZvclVzZXIodXNlcklkOiBzdHJpbmcsIHJvbGU6IHN0cmluZywgb3JnYW5pemF0aW9uSWQ/OiBzdHJpbmcpOiBQcm9taXNlPEZlYXR1cmVSZXF1ZXN0W10+IHtcbiAgICAvLyBGb3Igbm93LCBqdXN0IHJldHVybiBhbGwgZmVhdHVyZSByZXF1ZXN0cyAtIHByb3BlciBmaWx0ZXJpbmcgY2FuIGJlIGFkZGVkIGxhdGVyXG4gICAgcmV0dXJuIHRoaXMuZ2V0RmVhdHVyZVJlcXVlc3RzKCk7XG4gIH1cbiAgXG4gIGFzeW5jIGdldEZlYXR1cmVSZXF1ZXN0KGlkOiBzdHJpbmcpOiBQcm9taXNlPEZlYXR1cmVSZXF1ZXN0IHwgdW5kZWZpbmVkPjtcbiAgYXN5bmMgZ2V0RmVhdHVyZVJlcXVlc3QoaWQ6IHN0cmluZywgdXNlcklkPzogc3RyaW5nLCByb2xlPzogc3RyaW5nLCBvcmdhbml6YXRpb25JZD86IHN0cmluZyk6IFByb21pc2U8RmVhdHVyZVJlcXVlc3QgfCB1bmRlZmluZWQ+IHtcbiAgICBjb25zdCByZXF1ZXN0ID0gdGhpcy5mZWF0dXJlUmVxdWVzdHMuZ2V0KGlkKTtcbiAgICBpZiAoIXJlcXVlc3QpIHJldHVybiB1bmRlZmluZWQ7XG4gICAgXG4gICAgLy8gRm9yIG5vdywgcmV0dXJuIGVtcHR5IGF0dGFjaG1lbnRzIC0gd2lsbCBiZSBpbXBsZW1lbnRlZCBvbmNlIHN0b3JhZ2UgaXMgZml4ZWRcbiAgICBjb25zdCBhdHRhY2htZW50czogYW55W10gPSBbXTtcbiAgICBcbiAgICByZXR1cm4ge1xuICAgICAgLi4ucmVxdWVzdCxcbiAgICAgIGF0dGFjaG1lbnRDb3VudDogYXR0YWNobWVudHMubGVuZ3RoLFxuICAgICAgYXR0YWNobWVudHM6IFtdXG4gICAgfTtcbiAgfVxuICBhc3luYyBjcmVhdGVGZWF0dXJlUmVxdWVzdChyZXF1ZXN0OiBJbnNlcnRGZWF0dXJlUmVxdWVzdCk6IFByb21pc2U8RmVhdHVyZVJlcXVlc3Q+IHtcbiAgICBjb25zdCBpZCA9IHJhbmRvbVVVSUQoKTtcbiAgICBjb25zdCBuZXdSZXF1ZXN0OiBGZWF0dXJlUmVxdWVzdCA9IHtcbiAgICAgIC4uLnJlcXVlc3QsXG4gICAgICBpZCxcbiAgICAgIHN0YXR1czogJ3N1Ym1pdHRlZCcsXG4gICAgICBjcmVhdGVkQXQ6IG5ldyBEYXRlKCksXG4gICAgICB1cGRhdGVkQXQ6IG5ldyBEYXRlKCksXG4gICAgICB1cHZvdGVDb3VudDogMCxcbiAgICAgIGFzc2lnbmVkVG86IG51bGwsXG4gICAgICByZXZpZXdlZEJ5OiBudWxsLFxuICAgICAgcmV2aWV3ZWRBdDogbnVsbCxcbiAgICAgIGVzdGltYXRlZEhvdXJzOiBudWxsLFxuICAgICAgbWVyZ2VkSW50b0lkOiBudWxsLFxuICAgIH07XG4gICAgdGhpcy5mZWF0dXJlUmVxdWVzdHMuc2V0KGlkLCBuZXdSZXF1ZXN0KTtcbiAgICByZXR1cm4gbmV3UmVxdWVzdDtcbiAgfVxuICBhc3luYyB1cGRhdGVGZWF0dXJlUmVxdWVzdChcbiAgICBpZDogc3RyaW5nLFxuICAgIHVwZGF0ZXM6IFBhcnRpYWw8RmVhdHVyZVJlcXVlc3Q+XG4gICk6IFByb21pc2U8RmVhdHVyZVJlcXVlc3QgfCB1bmRlZmluZWQ+IHtcbiAgICBjb25zdCBleGlzdGluZyA9IHRoaXMuZmVhdHVyZVJlcXVlc3RzLmdldChpZCk7XG4gICAgaWYgKCFleGlzdGluZykgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICBjb25zdCB1cGRhdGVkID0geyAuLi5leGlzdGluZywgLi4udXBkYXRlcywgdXBkYXRlZEF0OiBuZXcgRGF0ZSgpIH07XG4gICAgdGhpcy5mZWF0dXJlUmVxdWVzdHMuc2V0KGlkLCB1cGRhdGVkKTtcbiAgICByZXR1cm4gdXBkYXRlZDtcbiAgfVxuXG4gIGFzeW5jIGFkZEZlYXR1cmVSZXF1ZXN0VXB2b3RlKCk6IFByb21pc2U8eyBzdWNjZXNzOiBib29sZWFuOyBtZXNzYWdlOiBzdHJpbmc7IGRhdGE/OiBhbnkgfT4ge1xuICAgIHJldHVybiB7IHN1Y2Nlc3M6IHRydWUsIG1lc3NhZ2U6ICdVcHZvdGUgYWRkZWQnIH07XG4gIH1cbiAgYXN5bmMgcmVtb3ZlRmVhdHVyZVJlcXVlc3RVcHZvdGUoKTogUHJvbWlzZTx7IHN1Y2Nlc3M6IGJvb2xlYW47IG1lc3NhZ2U6IHN0cmluZzsgZGF0YT86IGFueSB9PiB7XG4gICAgcmV0dXJuIHsgc3VjY2VzczogdHJ1ZSwgbWVzc2FnZTogJ1Vwdm90ZSByZW1vdmVkJyB9O1xuICB9XG5cblxufVxuXG4vLyBJbXBvcnQgdGhlIGRhdGFiYXNlIHN0b3JhZ2UgaW1wbGVtZW50YXRpb25cbmltcG9ydCB7IE9wdGltaXplZERhdGFiYXNlU3RvcmFnZSB9IGZyb20gJy4vb3B0aW1pemVkLWRiLXN0b3JhZ2UnO1xuXG4vLyBQcm9kdWN0aW9uIGZhbGxiYWNrIHN0b3JhZ2UgLSB0cnkgZGF0YWJhc2UgZmlyc3QsIGZhbGwgYmFjayB0byBtZW1vcnkgaWYgYXV0aGVudGljYXRpb24gZmFpbHNcbmNsYXNzIFByb2R1Y3Rpb25GYWxsYmFja1N0b3JhZ2UgaW1wbGVtZW50cyBJU3RvcmFnZSB7XG4gIHByaXZhdGUgZGJTdG9yYWdlOiBPcHRpbWl6ZWREYXRhYmFzZVN0b3JhZ2U7XG4gIHByaXZhdGUgbWVtU3RvcmFnZTogTWVtU3RvcmFnZTtcbiAgcHJpdmF0ZSB1c2luZ0ZhbGxiYWNrOiBib29sZWFuID0gZmFsc2U7XG5cbiAgY29uc3RydWN0b3IoKSB7XG4gICAgdGhpcy5kYlN0b3JhZ2UgPSBuZXcgT3B0aW1pemVkRGF0YWJhc2VTdG9yYWdlKCk7XG4gICAgdGhpcy5tZW1TdG9yYWdlID0gbmV3IE1lbVN0b3JhZ2UoKTtcbiAgfVxuXG4gIHByaXZhdGUgYXN5bmMgc2FmZURiT3BlcmF0aW9uPFQ+KG9wZXJhdGlvbjogKCkgPT4gUHJvbWlzZTxUPik6IFByb21pc2U8VD4ge1xuICAgIGlmICh0aGlzLnVzaW5nRmFsbGJhY2spIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignRGF0YWJhc2UgdW5hdmFpbGFibGUsIHVzaW5nIG1lbW9yeSBzdG9yYWdlJyk7XG4gICAgfVxuXG4gICAgdHJ5IHtcbiAgICAgIHJldHVybiBhd2FpdCBvcGVyYXRpb24oKTtcbiAgICB9IGNhdGNoIChlcnJvcjogYW55KSB7XG4gICAgICAvLyBDaGVjayBpZiBpdCdzIGEgZGF0YWJhc2UgYXV0aGVudGljYXRpb24gZXJyb3JcbiAgICAgIGlmIChcbiAgICAgICAgZXJyb3IubWVzc2FnZT8uaW5jbHVkZXMoJ3Bhc3N3b3JkIGF1dGhlbnRpY2F0aW9uIGZhaWxlZCcpIHx8XG4gICAgICAgIGVycm9yLm1lc3NhZ2U/LmluY2x1ZGVzKCduZW9uZGJfb3duZXInKSB8fFxuICAgICAgICBlcnJvci5jYXVzZT8ubWVzc2FnZT8uaW5jbHVkZXMoJ3Bhc3N3b3JkIGF1dGhlbnRpY2F0aW9uIGZhaWxlZCcpXG4gICAgICApIHtcbiAgICAgICAgLy8gRGF0YWJhc2UgYXV0aGVudGljYXRpb24gZmFpbGVkLCBzd2l0Y2hpbmcgdG8gbWVtb3J5IHN0b3JhZ2UgZm9yIHByb2R1Y3Rpb24gc3RhYmlsaXR5XG4gICAgICAgIHRoaXMudXNpbmdGYWxsYmFjayA9IHRydWU7XG5cbiAgICAgICAgLy8gSW5pdGlhbGl6ZSBtZW1vcnkgc3RvcmFnZSB3aXRoIHByb2R1Y3Rpb24gYWRtaW4gdXNlclxuICAgICAgICBhd2FpdCB0aGlzLmluaXRpYWxpemVGYWxsYmFja0RhdGEoKTtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdEYXRhYmFzZSB1bmF2YWlsYWJsZSwgdXNpbmcgbWVtb3J5IHN0b3JhZ2UnKTtcbiAgICAgIH1cbiAgICAgIHRocm93IGVycm9yO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgYXN5bmMgaW5pdGlhbGl6ZUZhbGxiYWNrRGF0YSgpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAvLyBDcmVhdGUgdGhlIHByb2R1Y3Rpb24gYWRtaW4gdXNlciBpbiBtZW1vcnkgc3RvcmFnZVxuICAgIGNvbnN0IGFkbWluVXNlciA9IHtcbiAgICAgIGlkOiAnZjM1NjQ3ZGUtNWYxNi00NmYyLWIzMGItMDllMDQ2OTM1NmIxJyxcbiAgICAgIHVzZXJuYW1lOiAna2V2aW4uaGVydmlldXgnLFxuICAgICAgZW1haWw6ICdrZXZpbi5oZXJ2aWV1eEBrb3Zlby1nZXN0aW9uLmNvbScsXG4gICAgICBwYXNzd29yZDogJyQyYiQxMiRzQUpYRWNJVFpnNUl0UW91MzEySnN1Y0x5ekJ5UEM2bEY3Q0x2cnJMa2h4S2QxRXlmU3hkYScsIC8vIGFkbWluMTIzXG4gICAgICBmaXJzdE5hbWU6ICdLZXZpbicsXG4gICAgICBsYXN0TmFtZTogJ0hlcnZpZXV4JyxcbiAgICAgIHBob25lOiAnJyxcbiAgICAgIHByb2ZpbGVJbWFnZTogJycsXG4gICAgICBsYW5ndWFnZTogJ2ZyJyBhcyBjb25zdCxcbiAgICAgIHJvbGU6ICdhZG1pbicgYXMgY29uc3QsXG4gICAgICBpc0FjdGl2ZTogdHJ1ZSxcbiAgICAgIGxhc3RMb2dpbkF0OiBudWxsLFxuICAgICAgY3JlYXRlZEF0OiBuZXcgRGF0ZSgpLFxuICAgICAgdXBkYXRlZEF0OiBuZXcgRGF0ZSgpLFxuICAgIH07XG5cbiAgICBhd2FpdCB0aGlzLm1lbVN0b3JhZ2UuY3JlYXRlVXNlcihhZG1pblVzZXIpO1xuXG4gICAgLy8gQ3JlYXRlIGRlZmF1bHQgb3JnYW5pemF0aW9uIGZvciBhZG1pbiB1c2VyXG4gICAgY29uc3QgZGVmYXVsdE9yZyA9IHtcbiAgICAgIGlkOiAna292ZW8tb3JnLW1haW4nLFxuICAgICAgbmFtZTogJ0tvdmVvIEdlc3Rpb24nLFxuICAgICAgdHlwZTogJ3Byb3BlcnR5X21hbmFnZW1lbnQnIGFzIGNvbnN0LFxuICAgICAgYWRkcmVzczogJzEyMyBRdWViZWMgU3RyZWV0JyxcbiAgICAgIGNpdHk6ICdNb250cmVhbCcsXG4gICAgICBwcm92aW5jZTogJ1FDJyxcbiAgICAgIHBvc3RhbENvZGU6ICdIMUEgMUExJyxcbiAgICAgIHBob25lOiAnKzEtNTE0LTU1NS0wMTAwJyxcbiAgICAgIGVtYWlsOiAnY29udGFjdEBrb3Zlby1nZXN0aW9uLmNvbScsXG4gICAgICB3ZWJzaXRlOiAnaHR0cHM6Ly9rb3Zlby1nZXN0aW9uLmNvbScsXG4gICAgICBkZXNjcmlwdGlvbjogJ01haW4gS292ZW8gcHJvcGVydHkgbWFuYWdlbWVudCBvcmdhbml6YXRpb24nLFxuICAgICAgaXNBY3RpdmU6IHRydWUsXG4gICAgICBjcmVhdGVkQXQ6IG5ldyBEYXRlKCksXG4gICAgICB1cGRhdGVkQXQ6IG5ldyBEYXRlKCksXG4gICAgfTtcblxuICAgIGF3YWl0IHRoaXMubWVtU3RvcmFnZS5jcmVhdGVPcmdhbml6YXRpb24oZGVmYXVsdE9yZyk7XG5cbiAgICAvLyBBc3NvY2lhdGUgYWRtaW4gdXNlciB3aXRoIHRoZSBvcmdhbml6YXRpb25cbiAgICAvLyBGb3IgbWVtb3J5IHN0b3JhZ2UsIHdlJ2xsIGp1c3QgZW5zdXJlIHRoZSB1c2VyIGhhcyBhY2Nlc3MgdG8gdGhlIG9yZ2FuaXphdGlvblxuICAgIC8vIFRoaXMgaXMgaGFuZGxlZCBieSB0aGUgdXNlcidzIHJvbGUgYmVpbmcgJ2FkbWluJyB3aGljaCBnaXZlcyBhY2Nlc3MgdG8gYWxsIG9yZ2FuaXphdGlvbnNcblxuICAgIC8vIFByb2R1Y3Rpb24gZmFsbGJhY2sgaW5pdGlhbGl6ZWQgc3VjY2Vzc2Z1bGx5XG4gIH1cblxuICAvLyBVc2VyIG9wZXJhdGlvbnMgd2l0aCBmYWxsYmFja1xuICBhc3luYyBnZXRVc2VyQnlFbWFpbChlbWFpbDogc3RyaW5nKTogUHJvbWlzZTxVc2VyIHwgdW5kZWZpbmVkPiB7XG4gICAgLy8gRGVidWcgbG9nZ2luZyByZW1vdmVkXG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHVzZXIgPSBhd2FpdCB0aGlzLnNhZmVEYk9wZXJhdGlvbigoKSA9PiB0aGlzLmRiU3RvcmFnZS5nZXRVc2VyQnlFbWFpbChlbWFpbCkpO1xuICAgICAgLy8gRGVidWcgbG9nZ2luZyByZW1vdmVkXG4gICAgICByZXR1cm4gdXNlcjtcbiAgICB9IGNhdGNoIChlcnJvcjogYW55KSB7XG4gICAgICAvLyBFcnJvciBoYW5kbGluZyBtYWludGFpbmVkIHdpdGhvdXQgZGVidWcgbG9nZ2luZ1xuICAgICAgdGhyb3cgZXJyb3I7XG4gICAgfVxuICB9XG5cbiAgYXN5bmMgZ2V0VXNlcnMoKTogUHJvbWlzZTxVc2VyW10+IHtcbiAgICByZXR1cm4gYXdhaXQgdGhpcy5zYWZlRGJPcGVyYXRpb24oKCkgPT4gdGhpcy5kYlN0b3JhZ2UuZ2V0VXNlcnMoKSk7XG4gIH1cblxuICBhc3luYyBnZXRVc2Vyc1dpdGhBc3NpZ25tZW50cygpOiBQcm9taXNlPEFycmF5PFVzZXIgJiB7IG9yZ2FuaXphdGlvbnM6IEFycmF5PHsgaWQ6IHN0cmluZzsgbmFtZTogc3RyaW5nOyB0eXBlOiBzdHJpbmcgfT47IGJ1aWxkaW5nczogQXJyYXk8eyBpZDogc3RyaW5nOyBuYW1lOiBzdHJpbmcgfT47IHJlc2lkZW5jZXM6IEFycmF5PHsgaWQ6IHN0cmluZzsgdW5pdE51bWJlcjogc3RyaW5nOyBidWlsZGluZ0lkOiBzdHJpbmc7IGJ1aWxkaW5nTmFtZTogc3RyaW5nIH0+IH0+PiB7XG4gICAgcmV0dXJuIGF3YWl0IHRoaXMuc2FmZURiT3BlcmF0aW9uKCgpID0+IHRoaXMuZGJTdG9yYWdlLmdldFVzZXJzV2l0aEFzc2lnbm1lbnRzKCkpO1xuICB9XG5cbiAgYXN5bmMgZ2V0VXNlcnNCeU9yZ2FuaXphdGlvbnModXNlcklkOiBzdHJpbmcpOiBQcm9taXNlPFVzZXJbXT4ge1xuICAgIHRyeSB7XG4gICAgICByZXR1cm4gYXdhaXQgdGhpcy5zYWZlRGJPcGVyYXRpb24oKCkgPT4gdGhpcy5kYlN0b3JhZ2UuZ2V0VXNlcnNCeU9yZ2FuaXphdGlvbnModXNlcklkKSk7XG4gICAgfSBjYXRjaCB7XG4gICAgICByZXR1cm4gdGhpcy5tZW1TdG9yYWdlLmdldFVzZXJzQnlPcmdhbml6YXRpb25zKHVzZXJJZCk7XG4gICAgfVxuICB9XG5cbiAgYXN5bmMgZ2V0VXNlcihpZDogc3RyaW5nKTogUHJvbWlzZTxVc2VyIHwgdW5kZWZpbmVkPiB7XG4gICAgcmV0dXJuIGF3YWl0IHRoaXMuc2FmZURiT3BlcmF0aW9uKCgpID0+IHRoaXMuZGJTdG9yYWdlLmdldFVzZXIoaWQpKTtcbiAgfVxuXG4gIGFzeW5jIGdldFVzZXJPcmdhbml6YXRpb25zKHVzZXJJZDogc3RyaW5nKTogUHJvbWlzZTxBcnJheTx7IG9yZ2FuaXphdGlvbklkOiBzdHJpbmcgfT4+IHtcbiAgICB0cnkge1xuICAgICAgcmV0dXJuIGF3YWl0IHRoaXMuc2FmZURiT3BlcmF0aW9uKCgpID0+IHRoaXMuZGJTdG9yYWdlLmdldFVzZXJPcmdhbml6YXRpb25zKHVzZXJJZCkpO1xuICAgIH0gY2F0Y2gge1xuICAgICAgcmV0dXJuIHRoaXMubWVtU3RvcmFnZS5nZXRVc2VyT3JnYW5pemF0aW9ucyh1c2VySWQpO1xuICAgIH1cbiAgfVxuXG4gIGFzeW5jIGdldFVzZXJSZXNpZGVuY2VzKHVzZXJJZDogc3RyaW5nKTogUHJvbWlzZTxBcnJheTx7IHJlc2lkZW5jZUlkOiBzdHJpbmcgfT4+IHtcbiAgICB0cnkge1xuICAgICAgcmV0dXJuIGF3YWl0IHRoaXMuc2FmZURiT3BlcmF0aW9uKCgpID0+IHRoaXMuZGJTdG9yYWdlLmdldFVzZXJSZXNpZGVuY2VzKHVzZXJJZCkpO1xuICAgIH0gY2F0Y2gge1xuICAgICAgcmV0dXJuIHRoaXMubWVtU3RvcmFnZS5nZXRVc2VyUmVzaWRlbmNlcyh1c2VySWQpO1xuICAgIH1cbiAgfVxuXG4gIGFzeW5jIGNyZWF0ZVVzZXIodXNlcjogSW5zZXJ0VXNlcik6IFByb21pc2U8VXNlcj4ge1xuICAgIHRyeSB7XG4gICAgICByZXR1cm4gYXdhaXQgdGhpcy5zYWZlRGJPcGVyYXRpb24oKCkgPT4gdGhpcy5kYlN0b3JhZ2UuY3JlYXRlVXNlcih1c2VyKSk7XG4gICAgfSBjYXRjaCB7XG4gICAgICByZXR1cm4gdGhpcy5tZW1TdG9yYWdlLmNyZWF0ZVVzZXIodXNlcik7XG4gICAgfVxuICB9XG5cbiAgYXN5bmMgdXBkYXRlVXNlcihpZDogc3RyaW5nLCB1cGRhdGVzOiBQYXJ0aWFsPFVzZXI+KTogUHJvbWlzZTxVc2VyIHwgdW5kZWZpbmVkPiB7XG4gICAgcmV0dXJuIGF3YWl0IHRoaXMuc2FmZURiT3BlcmF0aW9uKCgpID0+IHRoaXMuZGJTdG9yYWdlLnVwZGF0ZVVzZXIoaWQsIHVwZGF0ZXMpKTtcbiAgfVxuXG4gIC8vIFBhc3N3b3JkIHJlc2V0IG9wZXJhdGlvbnNcbiAgYXN5bmMgY3JlYXRlUGFzc3dvcmRSZXNldFRva2VuKHRva2VuOiBJbnNlcnRQYXNzd29yZFJlc2V0VG9rZW4pOiBQcm9taXNlPFBhc3N3b3JkUmVzZXRUb2tlbj4ge1xuICAgIHRyeSB7XG4gICAgICByZXR1cm4gYXdhaXQgdGhpcy5zYWZlRGJPcGVyYXRpb24oKCkgPT4gdGhpcy5kYlN0b3JhZ2UuY3JlYXRlUGFzc3dvcmRSZXNldFRva2VuKHRva2VuKSk7XG4gICAgfSBjYXRjaCB7XG4gICAgICByZXR1cm4gdGhpcy5tZW1TdG9yYWdlLmNyZWF0ZVBhc3N3b3JkUmVzZXRUb2tlbih0b2tlbik7XG4gICAgfVxuICB9XG5cbiAgYXN5bmMgZ2V0UGFzc3dvcmRSZXNldFRva2VuKHRva2VuOiBzdHJpbmcpOiBQcm9taXNlPFBhc3N3b3JkUmVzZXRUb2tlbiB8IHVuZGVmaW5lZD4ge1xuICAgIHRyeSB7XG4gICAgICByZXR1cm4gYXdhaXQgdGhpcy5zYWZlRGJPcGVyYXRpb24oKCkgPT4gdGhpcy5kYlN0b3JhZ2UuZ2V0UGFzc3dvcmRSZXNldFRva2VuKHRva2VuKSk7XG4gICAgfSBjYXRjaCB7XG4gICAgICByZXR1cm4gdGhpcy5tZW1TdG9yYWdlLmdldFBhc3N3b3JkUmVzZXRUb2tlbih0b2tlbik7XG4gICAgfVxuICB9XG5cbiAgYXN5bmMgbWFya1Bhc3N3b3JkUmVzZXRUb2tlbkFzVXNlZCh0b2tlbklkOiBzdHJpbmcpOiBQcm9taXNlPFBhc3N3b3JkUmVzZXRUb2tlbiB8IHVuZGVmaW5lZD4ge1xuICAgIHRyeSB7XG4gICAgICByZXR1cm4gYXdhaXQgdGhpcy5zYWZlRGJPcGVyYXRpb24oKCkgPT4gdGhpcy5kYlN0b3JhZ2UubWFya1Bhc3N3b3JkUmVzZXRUb2tlbkFzVXNlZCh0b2tlbklkKSk7XG4gICAgfSBjYXRjaCB7XG4gICAgICByZXR1cm4gdGhpcy5tZW1TdG9yYWdlLm1hcmtQYXNzd29yZFJlc2V0VG9rZW5Bc1VzZWQodG9rZW5JZCk7XG4gICAgfVxuICB9XG5cbiAgYXN5bmMgY2xlYW51cEV4cGlyZWRQYXNzd29yZFJlc2V0VG9rZW5zKCk6IFByb21pc2U8bnVtYmVyPiB7XG4gICAgdHJ5IHtcbiAgICAgIHJldHVybiBhd2FpdCB0aGlzLnNhZmVEYk9wZXJhdGlvbigoKSA9PiB0aGlzLmRiU3RvcmFnZS5jbGVhbnVwRXhwaXJlZFBhc3N3b3JkUmVzZXRUb2tlbnMoKSk7XG4gICAgfSBjYXRjaCB7XG4gICAgICByZXR1cm4gdGhpcy5tZW1TdG9yYWdlLmNsZWFudXBFeHBpcmVkUGFzc3dvcmRSZXNldFRva2VucygpO1xuICAgIH1cbiAgfVxuXG4gIC8vIERlbGVnYXRlIGFsbCBvdGhlciBtZXRob2RzIHRvIHRoZSBhcHByb3ByaWF0ZSBzdG9yYWdlXG4gIGFzeW5jIGdldE9yZ2FuaXphdGlvbnMoKTogUHJvbWlzZTxPcmdhbml6YXRpb25bXT4ge1xuICAgIHRyeSB7XG4gICAgICByZXR1cm4gYXdhaXQgdGhpcy5zYWZlRGJPcGVyYXRpb24oKCkgPT4gdGhpcy5kYlN0b3JhZ2UuZ2V0T3JnYW5pemF0aW9ucygpKTtcbiAgICB9IGNhdGNoIHtcbiAgICAgIHJldHVybiB0aGlzLm1lbVN0b3JhZ2UuZ2V0T3JnYW5pemF0aW9ucygpO1xuICAgIH1cbiAgfVxuXG4gIGFzeW5jIGdldE9yZ2FuaXphdGlvbihpZDogc3RyaW5nKTogUHJvbWlzZTxPcmdhbml6YXRpb24gfCB1bmRlZmluZWQ+IHtcbiAgICB0cnkge1xuICAgICAgcmV0dXJuIGF3YWl0IHRoaXMuc2FmZURiT3BlcmF0aW9uKCgpID0+IHRoaXMuZGJTdG9yYWdlLmdldE9yZ2FuaXphdGlvbihpZCkpO1xuICAgIH0gY2F0Y2gge1xuICAgICAgcmV0dXJuIHRoaXMubWVtU3RvcmFnZS5nZXRPcmdhbml6YXRpb24oaWQpO1xuICAgIH1cbiAgfVxuXG4gIGFzeW5jIGNyZWF0ZU9yZ2FuaXphdGlvbihvcmc6IEluc2VydE9yZ2FuaXphdGlvbik6IFByb21pc2U8T3JnYW5pemF0aW9uPiB7XG4gICAgdHJ5IHtcbiAgICAgIHJldHVybiBhd2FpdCB0aGlzLnNhZmVEYk9wZXJhdGlvbigoKSA9PiB0aGlzLmRiU3RvcmFnZS5jcmVhdGVPcmdhbml6YXRpb24ob3JnKSk7XG4gICAgfSBjYXRjaCB7XG4gICAgICByZXR1cm4gdGhpcy5tZW1TdG9yYWdlLmNyZWF0ZU9yZ2FuaXphdGlvbihvcmcpO1xuICAgIH1cbiAgfVxuXG4gIGFzeW5jIHVwZGF0ZU9yZ2FuaXphdGlvbihcbiAgICBpZDogc3RyaW5nLFxuICAgIHVwZGF0ZXM6IFBhcnRpYWw8T3JnYW5pemF0aW9uPlxuICApOiBQcm9taXNlPE9yZ2FuaXphdGlvbiB8IHVuZGVmaW5lZD4ge1xuICAgIHRyeSB7XG4gICAgICByZXR1cm4gYXdhaXQgdGhpcy5zYWZlRGJPcGVyYXRpb24oKCkgPT4gdGhpcy5kYlN0b3JhZ2UudXBkYXRlT3JnYW5pemF0aW9uKGlkLCB1cGRhdGVzKSk7XG4gICAgfSBjYXRjaCB7XG4gICAgICByZXR1cm4gdGhpcy5tZW1TdG9yYWdlLnVwZGF0ZU9yZ2FuaXphdGlvbihpZCwgdXBkYXRlcyk7XG4gICAgfVxuICB9XG5cbiAgYXN5bmMgZGVsZXRlT3JnYW5pemF0aW9uKGlkOiBzdHJpbmcpOiBQcm9taXNlPGJvb2xlYW4+IHtcbiAgICB0cnkge1xuICAgICAgcmV0dXJuIGF3YWl0IHRoaXMuc2FmZURiT3BlcmF0aW9uKCgpID0+IHRoaXMuZGJTdG9yYWdlLmRlbGV0ZU9yZ2FuaXphdGlvbihpZCkpO1xuICAgIH0gY2F0Y2gge1xuICAgICAgcmV0dXJuIHRoaXMubWVtU3RvcmFnZS5kZWxldGVPcmdhbml6YXRpb24oaWQpO1xuICAgIH1cbiAgfVxuXG4gIC8vIEJ1aWxkaW5nc1xuICBhc3luYyBnZXRCdWlsZGluZ3MoKTogUHJvbWlzZTxCdWlsZGluZ1tdPiB7XG4gICAgdHJ5IHtcbiAgICAgIHJldHVybiBhd2FpdCB0aGlzLnNhZmVEYk9wZXJhdGlvbigoKSA9PiB0aGlzLmRiU3RvcmFnZS5nZXRCdWlsZGluZ3MoKSk7XG4gICAgfSBjYXRjaCB7XG4gICAgICByZXR1cm4gdGhpcy5tZW1TdG9yYWdlLmdldEJ1aWxkaW5ncygpO1xuICAgIH1cbiAgfVxuXG4gIGFzeW5jIGdldEJ1aWxkaW5nc0J5T3JnYW5pemF0aW9uKG9yZ2FuaXphdGlvbklkOiBzdHJpbmcpOiBQcm9taXNlPEJ1aWxkaW5nW10+IHtcbiAgICB0cnkge1xuICAgICAgcmV0dXJuIGF3YWl0IHRoaXMuc2FmZURiT3BlcmF0aW9uKCgpID0+XG4gICAgICAgIHRoaXMuZGJTdG9yYWdlLmdldEJ1aWxkaW5nc0J5T3JnYW5pemF0aW9uKG9yZ2FuaXphdGlvbklkKVxuICAgICAgKTtcbiAgICB9IGNhdGNoIHtcbiAgICAgIHJldHVybiB0aGlzLm1lbVN0b3JhZ2UuZ2V0QnVpbGRpbmdzQnlPcmdhbml6YXRpb24ob3JnYW5pemF0aW9uSWQpO1xuICAgIH1cbiAgfVxuXG4gIGFzeW5jIGdldEJ1aWxkaW5nKGlkOiBzdHJpbmcpOiBQcm9taXNlPEJ1aWxkaW5nIHwgdW5kZWZpbmVkPiB7XG4gICAgdHJ5IHtcbiAgICAgIHJldHVybiBhd2FpdCB0aGlzLnNhZmVEYk9wZXJhdGlvbigoKSA9PiB0aGlzLmRiU3RvcmFnZS5nZXRCdWlsZGluZyhpZCkpO1xuICAgIH0gY2F0Y2gge1xuICAgICAgcmV0dXJuIHRoaXMubWVtU3RvcmFnZS5nZXRCdWlsZGluZyhpZCk7XG4gICAgfVxuICB9XG5cbiAgYXN5bmMgY3JlYXRlQnVpbGRpbmcoYnVpbGRpbmc6IEluc2VydEJ1aWxkaW5nKTogUHJvbWlzZTxCdWlsZGluZz4ge1xuICAgIHRyeSB7XG4gICAgICByZXR1cm4gYXdhaXQgdGhpcy5zYWZlRGJPcGVyYXRpb24oKCkgPT4gdGhpcy5kYlN0b3JhZ2UuY3JlYXRlQnVpbGRpbmcoYnVpbGRpbmcpKTtcbiAgICB9IGNhdGNoIHtcbiAgICAgIHJldHVybiB0aGlzLm1lbVN0b3JhZ2UuY3JlYXRlQnVpbGRpbmcoYnVpbGRpbmcpO1xuICAgIH1cbiAgfVxuXG4gIGFzeW5jIHVwZGF0ZUJ1aWxkaW5nKGlkOiBzdHJpbmcsIHVwZGF0ZXM6IFBhcnRpYWw8QnVpbGRpbmc+KTogUHJvbWlzZTxCdWlsZGluZyB8IHVuZGVmaW5lZD4ge1xuICAgIHRyeSB7XG4gICAgICByZXR1cm4gYXdhaXQgdGhpcy5zYWZlRGJPcGVyYXRpb24oKCkgPT4gdGhpcy5kYlN0b3JhZ2UudXBkYXRlQnVpbGRpbmcoaWQsIHVwZGF0ZXMpKTtcbiAgICB9IGNhdGNoIHtcbiAgICAgIHJldHVybiB0aGlzLm1lbVN0b3JhZ2UudXBkYXRlQnVpbGRpbmcoaWQsIHVwZGF0ZXMpO1xuICAgIH1cbiAgfVxuXG4gIGFzeW5jIGRlbGV0ZUJ1aWxkaW5nKGlkOiBzdHJpbmcpOiBQcm9taXNlPGJvb2xlYW4+IHtcbiAgICB0cnkge1xuICAgICAgcmV0dXJuIGF3YWl0IHRoaXMuc2FmZURiT3BlcmF0aW9uKCgpID0+IHRoaXMuZGJTdG9yYWdlLmRlbGV0ZUJ1aWxkaW5nKGlkKSk7XG4gICAgfSBjYXRjaCB7XG4gICAgICByZXR1cm4gdGhpcy5tZW1TdG9yYWdlLmRlbGV0ZUJ1aWxkaW5nKGlkKTtcbiAgICB9XG4gIH1cblxuICAvLyBSZXNpZGVuY2VzXG4gIGFzeW5jIGdldFJlc2lkZW5jZXMoKTogUHJvbWlzZTxSZXNpZGVuY2VbXT4ge1xuICAgIHRyeSB7XG4gICAgICByZXR1cm4gYXdhaXQgdGhpcy5zYWZlRGJPcGVyYXRpb24oKCkgPT4gdGhpcy5kYlN0b3JhZ2UuZ2V0UmVzaWRlbmNlcygpKTtcbiAgICB9IGNhdGNoIHtcbiAgICAgIHJldHVybiB0aGlzLm1lbVN0b3JhZ2UuZ2V0UmVzaWRlbmNlcygpO1xuICAgIH1cbiAgfVxuXG4gIGFzeW5jIGdldFJlc2lkZW5jZXNCeUJ1aWxkaW5nKGJ1aWxkaW5nSWQ6IHN0cmluZyk6IFByb21pc2U8UmVzaWRlbmNlW10+IHtcbiAgICB0cnkge1xuICAgICAgcmV0dXJuIGF3YWl0IHRoaXMuc2FmZURiT3BlcmF0aW9uKCgpID0+IHRoaXMuZGJTdG9yYWdlLmdldFJlc2lkZW5jZXNCeUJ1aWxkaW5nKGJ1aWxkaW5nSWQpKTtcbiAgICB9IGNhdGNoIHtcbiAgICAgIHJldHVybiB0aGlzLm1lbVN0b3JhZ2UuZ2V0UmVzaWRlbmNlc0J5QnVpbGRpbmcoYnVpbGRpbmdJZCk7XG4gICAgfVxuICB9XG5cbiAgYXN5bmMgZ2V0UmVzaWRlbmNlKGlkOiBzdHJpbmcpOiBQcm9taXNlPFJlc2lkZW5jZSB8IHVuZGVmaW5lZD4ge1xuICAgIHRyeSB7XG4gICAgICByZXR1cm4gYXdhaXQgdGhpcy5zYWZlRGJPcGVyYXRpb24oKCkgPT4gdGhpcy5kYlN0b3JhZ2UuZ2V0UmVzaWRlbmNlKGlkKSk7XG4gICAgfSBjYXRjaCB7XG4gICAgICByZXR1cm4gdGhpcy5tZW1TdG9yYWdlLmdldFJlc2lkZW5jZShpZCk7XG4gICAgfVxuICB9XG5cbiAgYXN5bmMgY3JlYXRlUmVzaWRlbmNlKHJlc2lkZW5jZTogSW5zZXJ0UmVzaWRlbmNlKTogUHJvbWlzZTxSZXNpZGVuY2U+IHtcbiAgICB0cnkge1xuICAgICAgcmV0dXJuIGF3YWl0IHRoaXMuc2FmZURiT3BlcmF0aW9uKCgpID0+IHRoaXMuZGJTdG9yYWdlLmNyZWF0ZVJlc2lkZW5jZShyZXNpZGVuY2UpKTtcbiAgICB9IGNhdGNoIHtcbiAgICAgIHJldHVybiB0aGlzLm1lbVN0b3JhZ2UuY3JlYXRlUmVzaWRlbmNlKHJlc2lkZW5jZSk7XG4gICAgfVxuICB9XG5cbiAgYXN5bmMgdXBkYXRlUmVzaWRlbmNlKGlkOiBzdHJpbmcsIHVwZGF0ZXM6IFBhcnRpYWw8UmVzaWRlbmNlPik6IFByb21pc2U8UmVzaWRlbmNlIHwgdW5kZWZpbmVkPiB7XG4gICAgdHJ5IHtcbiAgICAgIHJldHVybiBhd2FpdCB0aGlzLnNhZmVEYk9wZXJhdGlvbigoKSA9PiB0aGlzLmRiU3RvcmFnZS51cGRhdGVSZXNpZGVuY2UoaWQsIHVwZGF0ZXMpKTtcbiAgICB9IGNhdGNoIHtcbiAgICAgIHJldHVybiB0aGlzLm1lbVN0b3JhZ2UudXBkYXRlUmVzaWRlbmNlKGlkLCB1cGRhdGVzKTtcbiAgICB9XG4gIH1cblxuICBhc3luYyBkZWxldGVSZXNpZGVuY2UoaWQ6IHN0cmluZyk6IFByb21pc2U8Ym9vbGVhbj4ge1xuICAgIHRyeSB7XG4gICAgICByZXR1cm4gYXdhaXQgdGhpcy5zYWZlRGJPcGVyYXRpb24oKCkgPT4gdGhpcy5kYlN0b3JhZ2UuZGVsZXRlUmVzaWRlbmNlKGlkKSk7XG4gICAgfSBjYXRjaCB7XG4gICAgICByZXR1cm4gdGhpcy5tZW1TdG9yYWdlLmRlbGV0ZVJlc2lkZW5jZShpZCk7XG4gICAgfVxuICB9XG5cbiAgLy8gQWxsIG90aGVyIG1ldGhvZHMgLSBpbXBsZW1lbnQgZmFsbGJhY2sgcGF0dGVybiBmb3IgcmVtYWluaW5nIGludGVyZmFjZSBtZXRob2RzXG4gIGFzeW5jIGdldENvbnRhY3RzKCk6IFByb21pc2U8Q29udGFjdFtdPiB7XG4gICAgdHJ5IHtcbiAgICAgIHJldHVybiBhd2FpdCB0aGlzLnNhZmVEYk9wZXJhdGlvbigoKSA9PiB0aGlzLmRiU3RvcmFnZS5nZXRDb250YWN0cygpKTtcbiAgICB9IGNhdGNoIHtcbiAgICAgIHJldHVybiB0aGlzLm1lbVN0b3JhZ2UuZ2V0Q29udGFjdHMoKTtcbiAgICB9XG4gIH1cblxuICBhc3luYyBnZXRDb250YWN0KGlkOiBzdHJpbmcpOiBQcm9taXNlPENvbnRhY3QgfCB1bmRlZmluZWQ+IHtcbiAgICB0cnkge1xuICAgICAgcmV0dXJuIGF3YWl0IHRoaXMuc2FmZURiT3BlcmF0aW9uKCgpID0+IHRoaXMuZGJTdG9yYWdlLmdldENvbnRhY3QoaWQpKTtcbiAgICB9IGNhdGNoIHtcbiAgICAgIHJldHVybiB0aGlzLm1lbVN0b3JhZ2UuZ2V0Q29udGFjdChpZCk7XG4gICAgfVxuICB9XG5cbiAgYXN5bmMgY3JlYXRlQ29udGFjdChjb250YWN0OiBJbnNlcnRDb250YWN0KTogUHJvbWlzZTxDb250YWN0PiB7XG4gICAgdHJ5IHtcbiAgICAgIHJldHVybiBhd2FpdCB0aGlzLnNhZmVEYk9wZXJhdGlvbigoKSA9PiB0aGlzLmRiU3RvcmFnZS5jcmVhdGVDb250YWN0KGNvbnRhY3QpKTtcbiAgICB9IGNhdGNoIHtcbiAgICAgIHJldHVybiB0aGlzLm1lbVN0b3JhZ2UuY3JlYXRlQ29udGFjdChjb250YWN0KTtcbiAgICB9XG4gIH1cblxuICBhc3luYyB1cGRhdGVDb250YWN0KGlkOiBzdHJpbmcsIHVwZGF0ZXM6IFBhcnRpYWw8Q29udGFjdD4pOiBQcm9taXNlPENvbnRhY3QgfCB1bmRlZmluZWQ+IHtcbiAgICB0cnkge1xuICAgICAgcmV0dXJuIGF3YWl0IHRoaXMuc2FmZURiT3BlcmF0aW9uKCgpID0+IHRoaXMuZGJTdG9yYWdlLnVwZGF0ZUNvbnRhY3QoaWQsIHVwZGF0ZXMpKTtcbiAgICB9IGNhdGNoIHtcbiAgICAgIHJldHVybiB0aGlzLm1lbVN0b3JhZ2UudXBkYXRlQ29udGFjdChpZCwgdXBkYXRlcyk7XG4gICAgfVxuICB9XG5cbiAgYXN5bmMgZGVsZXRlQ29udGFjdChpZDogc3RyaW5nKTogUHJvbWlzZTxib29sZWFuPiB7XG4gICAgdHJ5IHtcbiAgICAgIHJldHVybiBhd2FpdCB0aGlzLnNhZmVEYk9wZXJhdGlvbigoKSA9PiB0aGlzLmRiU3RvcmFnZS5kZWxldGVDb250YWN0KGlkKSk7XG4gICAgfSBjYXRjaCB7XG4gICAgICByZXR1cm4gdGhpcy5tZW1TdG9yYWdlLmRlbGV0ZUNvbnRhY3QoaWQpO1xuICAgIH1cbiAgfVxuXG4gIC8vIFN0dWIgaW1wbGVtZW50YXRpb25zIGZvciByZW1haW5pbmcgaW50ZXJmYWNlIG1ldGhvZHMgLSBhZGQgYWxsIG90aGVyIHJlcXVpcmVkIG1ldGhvZHNcbiAgYXN5bmMgZ2V0RG9jdW1lbnRzKCk6IFByb21pc2U8RG9jdW1lbnRbXT4ge1xuICAgIHJldHVybiBbXTtcbiAgfVxuICBhc3luYyBnZXREb2N1bWVudChpZDogc3RyaW5nKTogUHJvbWlzZTxEb2N1bWVudCB8IHVuZGVmaW5lZD4ge1xuICAgIHJldHVybiB1bmRlZmluZWQ7XG4gIH1cbiAgYXN5bmMgY3JlYXRlRG9jdW1lbnQoZG9jOiBJbnNlcnREb2N1bWVudCk6IFByb21pc2U8RG9jdW1lbnQ+IHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ05vdCBpbXBsZW1lbnRlZCBpbiBmYWxsYmFjaycpO1xuICB9XG4gIGFzeW5jIHVwZGF0ZURvY3VtZW50KGlkOiBzdHJpbmcsIHVwZGF0ZXM6IFBhcnRpYWw8RG9jdW1lbnQ+KTogUHJvbWlzZTxEb2N1bWVudCB8IHVuZGVmaW5lZD4ge1xuICAgIHJldHVybiB1bmRlZmluZWQ7XG4gIH1cbiAgYXN5bmMgZGVsZXRlRG9jdW1lbnQoaWQ6IHN0cmluZyk6IFByb21pc2U8Ym9vbGVhbj4ge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuICBhc3luYyBnZXREb2N1bWVudHNCeUJ1aWxkaW5nKGJ1aWxkaW5nSWQ6IHN0cmluZyk6IFByb21pc2U8RG9jdW1lbnRbXT4ge1xuICAgIHJldHVybiBbXTtcbiAgfVxuICBhc3luYyBjcmVhdGVEb2N1bWVudEJ1aWxkaW5nKGRvYzogSW5zZXJ0RG9jdW1lbnQpOiBQcm9taXNlPERvY3VtZW50PiB7XG4gICAgLy8gTm90ZTogRXh0ZXJuYWwgc3RvcmFnZSBpbnRlZ3JhdGlvbiByZW1vdmVkXG4gICAgY29uc3QgaWQgPSByYW5kb21VVUlEKCk7XG4gICAgcmV0dXJuIHtcbiAgICAgIC4uLmRvYyxcbiAgICAgIGlkLFxuICAgICAgY3JlYXRlZEF0OiBuZXcgRGF0ZSgpLFxuICAgICAgdXBkYXRlZEF0OiBuZXcgRGF0ZSgpLFxuICAgIH07XG4gIH1cbiAgYXN5bmMgZGVsZXRlRG9jdW1lbnRCdWlsZGluZyhkb2N1bWVudElkOiBzdHJpbmcsIGJ1aWxkaW5nSWQ6IHN0cmluZyk6IFByb21pc2U8Ym9vbGVhbj4ge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuICBhc3luYyBnZXREb2N1bWVudHNCeVJlc2lkZW50KHJlc2lkZW50SWQ6IHN0cmluZyk6IFByb21pc2U8RG9jdW1lbnRbXT4ge1xuICAgIHJldHVybiBbXTtcbiAgfVxuICBhc3luYyBjcmVhdGVEb2N1bWVudFJlc2lkZW50KGRvYzogSW5zZXJ0RG9jdW1lbnQpOiBQcm9taXNlPERvY3VtZW50PiB7XG4gICAgLy8gTm90ZTogRXh0ZXJuYWwgc3RvcmFnZSBpbnRlZ3JhdGlvbiByZW1vdmVkXG4gICAgY29uc3QgaWQgPSByYW5kb21VVUlEKCk7XG4gICAgcmV0dXJuIHtcbiAgICAgIC4uLmRvYyxcbiAgICAgIGlkLFxuICAgICAgY3JlYXRlZEF0OiBuZXcgRGF0ZSgpLFxuICAgICAgdXBkYXRlZEF0OiBuZXcgRGF0ZSgpLFxuICAgIH07XG4gIH1cbiAgYXN5bmMgZGVsZXRlRG9jdW1lbnRSZXNpZGVudChkb2N1bWVudElkOiBzdHJpbmcsIHJlc2lkZW50SWQ6IHN0cmluZyk6IFByb21pc2U8Ym9vbGVhbj4ge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuICBhc3luYyBnZXRQaWxsYXJzKCk6IFByb21pc2U8UGlsbGFyW10+IHtcbiAgICByZXR1cm4gW107XG4gIH1cbiAgYXN5bmMgZ2V0UGlsbGFyKGlkOiBzdHJpbmcpOiBQcm9taXNlPFBpbGxhciB8IHVuZGVmaW5lZD4ge1xuICAgIHJldHVybiB1bmRlZmluZWQ7XG4gIH1cbiAgYXN5bmMgY3JlYXRlUGlsbGFyKHBpbGxhcjogSW5zZXJ0UGlsbGFyKTogUHJvbWlzZTxQaWxsYXI+IHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ05vdCBpbXBsZW1lbnRlZCBpbiBmYWxsYmFjaycpO1xuICB9XG4gIGFzeW5jIHVwZGF0ZVBpbGxhcihpZDogc3RyaW5nLCB1cGRhdGVzOiBQYXJ0aWFsPFBpbGxhcj4pOiBQcm9taXNlPFBpbGxhciB8IHVuZGVmaW5lZD4ge1xuICAgIHJldHVybiB1bmRlZmluZWQ7XG4gIH1cbiAgYXN5bmMgZ2V0V29ya3NwYWNlU3RhdHVzZXMoKTogUHJvbWlzZTxXb3Jrc3BhY2VTdGF0dXNbXT4ge1xuICAgIHJldHVybiBbXTtcbiAgfVxuICBhc3luYyBnZXRXb3Jrc3BhY2VTdGF0dXMoaWQ6IHN0cmluZyk6IFByb21pc2U8V29ya3NwYWNlU3RhdHVzIHwgdW5kZWZpbmVkPiB7XG4gICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgfVxuICBhc3luYyBjcmVhdGVXb3Jrc3BhY2VTdGF0dXMoc3RhdHVzOiBJbnNlcnRXb3Jrc3BhY2VTdGF0dXMpOiBQcm9taXNlPFdvcmtzcGFjZVN0YXR1cz4ge1xuICAgIHRocm93IG5ldyBFcnJvcignTm90IGltcGxlbWVudGVkIGluIGZhbGxiYWNrJyk7XG4gIH1cbiAgYXN5bmMgdXBkYXRlV29ya3NwYWNlU3RhdHVzKFxuICAgIGlkOiBzdHJpbmcsXG4gICAgdXBkYXRlczogUGFydGlhbDxXb3Jrc3BhY2VTdGF0dXM+XG4gICk6IFByb21pc2U8V29ya3NwYWNlU3RhdHVzIHwgdW5kZWZpbmVkPiB7XG4gICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgfVxuICBhc3luYyBnZXRRdWFsaXR5TWV0cmljcygpOiBQcm9taXNlPFF1YWxpdHlNZXRyaWNbXT4ge1xuICAgIHJldHVybiBbXTtcbiAgfVxuICBhc3luYyBnZXRRdWFsaXR5TWV0cmljKGlkOiBzdHJpbmcpOiBQcm9taXNlPFF1YWxpdHlNZXRyaWMgfCB1bmRlZmluZWQ+IHtcbiAgICByZXR1cm4gdW5kZWZpbmVkO1xuICB9XG4gIGFzeW5jIGNyZWF0ZVF1YWxpdHlNZXRyaWMobWV0cmljOiBJbnNlcnRRdWFsaXR5TWV0cmljKTogUHJvbWlzZTxRdWFsaXR5TWV0cmljPiB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdOb3QgaW1wbGVtZW50ZWQgaW4gZmFsbGJhY2snKTtcbiAgfVxuICBhc3luYyB1cGRhdGVRdWFsaXR5TWV0cmljKFxuICAgIGlkOiBzdHJpbmcsXG4gICAgdXBkYXRlczogUGFydGlhbDxRdWFsaXR5TWV0cmljPlxuICApOiBQcm9taXNlPFF1YWxpdHlNZXRyaWMgfCB1bmRlZmluZWQ+IHtcbiAgICByZXR1cm4gdW5kZWZpbmVkO1xuICB9XG4gIGFzeW5jIGdldEZyYW1ld29ya0NvbmZpZ3VyYXRpb25zKCk6IFByb21pc2U8RnJhbWV3b3JrQ29uZmlndXJhdGlvbltdPiB7XG4gICAgcmV0dXJuIFtdO1xuICB9XG4gIGFzeW5jIGdldEZyYW1ld29ya0NvbmZpZ3VyYXRpb24oaWQ6IHN0cmluZyk6IFByb21pc2U8RnJhbWV3b3JrQ29uZmlndXJhdGlvbiB8IHVuZGVmaW5lZD4ge1xuICAgIHJldHVybiB1bmRlZmluZWQ7XG4gIH1cbiAgYXN5bmMgY3JlYXRlRnJhbWV3b3JrQ29uZmlndXJhdGlvbihcbiAgICBjb25maWc6IEluc2VydEZyYW1ld29ya0NvbmZpZ3VyYXRpb25cbiAgKTogUHJvbWlzZTxGcmFtZXdvcmtDb25maWd1cmF0aW9uPiB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdOb3QgaW1wbGVtZW50ZWQgaW4gZmFsbGJhY2snKTtcbiAgfVxuICBhc3luYyB1cGRhdGVGcmFtZXdvcmtDb25maWd1cmF0aW9uKFxuICAgIGlkOiBzdHJpbmcsXG4gICAgdXBkYXRlczogUGFydGlhbDxGcmFtZXdvcmtDb25maWd1cmF0aW9uPlxuICApOiBQcm9taXNlPEZyYW1ld29ya0NvbmZpZ3VyYXRpb24gfCB1bmRlZmluZWQ+IHtcbiAgICByZXR1cm4gdW5kZWZpbmVkO1xuICB9XG4gIGFzeW5jIGdldEltcHJvdmVtZW50U3VnZ2VzdGlvbnMoKTogUHJvbWlzZTxJbXByb3ZlbWVudFN1Z2dlc3Rpb25bXT4ge1xuICAgIHJldHVybiBbXTtcbiAgfVxuICBhc3luYyBnZXRJbXByb3ZlbWVudFN1Z2dlc3Rpb24oaWQ6IHN0cmluZyk6IFByb21pc2U8SW1wcm92ZW1lbnRTdWdnZXN0aW9uIHwgdW5kZWZpbmVkPiB7XG4gICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgfVxuICBhc3luYyBjcmVhdGVJbXByb3ZlbWVudFN1Z2dlc3Rpb24oXG4gICAgc3VnZ2VzdGlvbjogSW5zZXJ0SW1wcm92ZW1lbnRTdWdnZXN0aW9uXG4gICk6IFByb21pc2U8SW1wcm92ZW1lbnRTdWdnZXN0aW9uPiB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdOb3QgaW1wbGVtZW50ZWQgaW4gZmFsbGJhY2snKTtcbiAgfVxuICBhc3luYyB1cGRhdGVJbXByb3ZlbWVudFN1Z2dlc3Rpb24oXG4gICAgaWQ6IHN0cmluZyxcbiAgICB1cGRhdGVzOiBQYXJ0aWFsPEltcHJvdmVtZW50U3VnZ2VzdGlvbj5cbiAgKTogUHJvbWlzZTxJbXByb3ZlbWVudFN1Z2dlc3Rpb24gfCB1bmRlZmluZWQ+IHtcbiAgICByZXR1cm4gdW5kZWZpbmVkO1xuICB9XG4gIGFzeW5jIGdldEZlYXR1cmVzKCk6IFByb21pc2U8RmVhdHVyZVtdPiB7XG4gICAgcmV0dXJuIFtdO1xuICB9XG4gIGFzeW5jIGdldEZlYXR1cmUoaWQ6IHN0cmluZyk6IFByb21pc2U8RmVhdHVyZSB8IHVuZGVmaW5lZD4ge1xuICAgIHJldHVybiB1bmRlZmluZWQ7XG4gIH1cbiAgYXN5bmMgY3JlYXRlRmVhdHVyZShmZWF0dXJlOiBJbnNlcnRGZWF0dXJlKTogUHJvbWlzZTxGZWF0dXJlPiB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdOb3QgaW1wbGVtZW50ZWQgaW4gZmFsbGJhY2snKTtcbiAgfVxuICBhc3luYyB1cGRhdGVGZWF0dXJlKGlkOiBzdHJpbmcsIHVwZGF0ZXM6IFBhcnRpYWw8RmVhdHVyZT4pOiBQcm9taXNlPEZlYXR1cmUgfCB1bmRlZmluZWQ+IHtcbiAgICByZXR1cm4gdW5kZWZpbmVkO1xuICB9XG4gIGFzeW5jIGdldEFjdGlvbmFibGVJdGVtcygpOiBQcm9taXNlPEFjdGlvbmFibGVJdGVtW10+IHtcbiAgICByZXR1cm4gW107XG4gIH1cbiAgYXN5bmMgZ2V0QWN0aW9uYWJsZUl0ZW0oaWQ6IHN0cmluZyk6IFByb21pc2U8QWN0aW9uYWJsZUl0ZW0gfCB1bmRlZmluZWQ+IHtcbiAgICByZXR1cm4gdW5kZWZpbmVkO1xuICB9XG4gIGFzeW5jIGNyZWF0ZUFjdGlvbmFibGVJdGVtKGl0ZW06IEluc2VydEFjdGlvbmFibGVJdGVtKTogUHJvbWlzZTxBY3Rpb25hYmxlSXRlbT4ge1xuICAgIHRocm93IG5ldyBFcnJvcignTm90IGltcGxlbWVudGVkIGluIGZhbGxiYWNrJyk7XG4gIH1cbiAgYXN5bmMgdXBkYXRlQWN0aW9uYWJsZUl0ZW0oXG4gICAgaWQ6IHN0cmluZyxcbiAgICB1cGRhdGVzOiBQYXJ0aWFsPEFjdGlvbmFibGVJdGVtPlxuICApOiBQcm9taXNlPEFjdGlvbmFibGVJdGVtIHwgdW5kZWZpbmVkPiB7XG4gICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgfVxuICBhc3luYyBnZXRJbnZpdGF0aW9ucygpOiBQcm9taXNlPEludml0YXRpb25bXT4ge1xuICAgIHJldHVybiBbXTtcbiAgfVxuICBhc3luYyBnZXRJbnZpdGF0aW9uKGlkOiBzdHJpbmcpOiBQcm9taXNlPEludml0YXRpb24gfCB1bmRlZmluZWQ+IHtcbiAgICByZXR1cm4gdW5kZWZpbmVkO1xuICB9XG4gIGFzeW5jIGdldEludml0YXRpb25CeVRva2VuKHRva2VuOiBzdHJpbmcpOiBQcm9taXNlPEludml0YXRpb24gfCB1bmRlZmluZWQ+IHtcbiAgICByZXR1cm4gdW5kZWZpbmVkO1xuICB9XG4gIGFzeW5jIGNyZWF0ZUludml0YXRpb24oaW52aXRhdGlvbjogSW5zZXJ0SW52aXRhdGlvbik6IFByb21pc2U8SW52aXRhdGlvbj4ge1xuICAgIHRocm93IG5ldyBFcnJvcignTm90IGltcGxlbWVudGVkIGluIGZhbGxiYWNrJyk7XG4gIH1cbiAgYXN5bmMgdXBkYXRlSW52aXRhdGlvbihcbiAgICBpZDogc3RyaW5nLFxuICAgIHVwZGF0ZXM6IFBhcnRpYWw8SW52aXRhdGlvbj5cbiAgKTogUHJvbWlzZTxJbnZpdGF0aW9uIHwgdW5kZWZpbmVkPiB7XG4gICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgfVxuICBhc3luYyBkZWxldGVJbnZpdGF0aW9uKGlkOiBzdHJpbmcpOiBQcm9taXNlPGJvb2xlYW4+IHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbiAgYXN5bmMgZ2V0UGVybWlzc2lvbnMoKTogUHJvbWlzZTxQZXJtaXNzaW9uW10+IHtcbiAgICByZXR1cm4gW107XG4gIH1cbiAgYXN5bmMgZ2V0UGVybWlzc2lvbihpZDogc3RyaW5nKTogUHJvbWlzZTxQZXJtaXNzaW9uIHwgdW5kZWZpbmVkPiB7XG4gICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgfVxuICBhc3luYyBnZXRSb2xlUGVybWlzc2lvbnMocm9sZTogc3RyaW5nKTogUHJvbWlzZTxSb2xlUGVybWlzc2lvbltdPiB7XG4gICAgcmV0dXJuIFtdO1xuICB9XG4gIGFzeW5jIGdldFVzZXJQZXJtaXNzaW9ucyh1c2VySWQ6IHN0cmluZyk6IFByb21pc2U8VXNlclBlcm1pc3Npb25bXT4ge1xuICAgIHJldHVybiBbXTtcbiAgfVxuICBhc3luYyBoYXNQZXJtaXNzaW9uKHVzZXJJZDogc3RyaW5nLCBwZXJtaXNzaW9uOiBzdHJpbmcpOiBQcm9taXNlPGJvb2xlYW4+IHtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfSAvLyBBZG1pbiBmYWxsYmFja1xuICBhc3luYyBnZXRCdWdzKCk6IFByb21pc2U8QnVnW10+IHtcbiAgICByZXR1cm4gW107XG4gIH1cbiAgXG4gIGFzeW5jIGdldEJ1Z3NGb3JVc2VyKHVzZXJJZDogc3RyaW5nLCB1c2VyUm9sZTogc3RyaW5nLCBvcmdhbml6YXRpb25JZD86IHN0cmluZyk6IFByb21pc2U8QnVnW10+IHtcbiAgICByZXR1cm4gW107XG4gIH1cbiAgXG4gIGFzeW5jIGdldEJ1ZyhpZDogc3RyaW5nLCB1c2VySWQ/OiBzdHJpbmcsIHJvbGU/OiBzdHJpbmcsIG9yZ2FuaXphdGlvbklkPzogc3RyaW5nKTogUHJvbWlzZTxCdWcgfCB1bmRlZmluZWQ+IHtcbiAgICByZXR1cm4gdW5kZWZpbmVkO1xuICB9XG4gIFxuICBhc3luYyBjcmVhdGVCdWcoYnVnOiBJbnNlcnRCdWcpOiBQcm9taXNlPEJ1Zz4ge1xuICAgIHRocm93IG5ldyBFcnJvcignTm90IGltcGxlbWVudGVkIGluIGZhbGxiYWNrJyk7XG4gIH1cbiAgXG4gIGFzeW5jIHVwZGF0ZUJ1ZyhpZDogc3RyaW5nLCB1cGRhdGVzOiBQYXJ0aWFsPEJ1Zz4sIHVzZXJJZD86IHN0cmluZywgcm9sZT86IHN0cmluZyk6IFByb21pc2U8QnVnIHwgdW5kZWZpbmVkPiB7XG4gICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgfVxuICBcbiAgYXN5bmMgZGVsZXRlQnVnKGlkOiBzdHJpbmcsIHVzZXJJZDogc3RyaW5nLCByb2xlOiBzdHJpbmcpOiBQcm9taXNlPGJvb2xlYW4+IHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbiAgYXN5bmMgZ2V0RmVhdHVyZVJlcXVlc3RzKCk6IFByb21pc2U8RmVhdHVyZVJlcXVlc3RbXT4ge1xuICAgIHJldHVybiBbXTtcbiAgfVxuICBhc3luYyBnZXRGZWF0dXJlUmVxdWVzdChpZDogc3RyaW5nKTogUHJvbWlzZTxGZWF0dXJlUmVxdWVzdCB8IHVuZGVmaW5lZD4ge1xuICAgIHJldHVybiB1bmRlZmluZWQ7XG4gIH1cbiAgYXN5bmMgY3JlYXRlRmVhdHVyZVJlcXVlc3QocmVxdWVzdDogSW5zZXJ0RmVhdHVyZVJlcXVlc3QpOiBQcm9taXNlPEZlYXR1cmVSZXF1ZXN0PiB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdOb3QgaW1wbGVtZW50ZWQgaW4gZmFsbGJhY2snKTtcbiAgfVxuICBhc3luYyB1cGRhdGVGZWF0dXJlUmVxdWVzdChcbiAgICBpZDogc3RyaW5nLFxuICAgIHVwZGF0ZXM6IFBhcnRpYWw8RmVhdHVyZVJlcXVlc3Q+XG4gICk6IFByb21pc2U8RmVhdHVyZVJlcXVlc3QgfCB1bmRlZmluZWQ+IHtcbiAgICByZXR1cm4gdW5kZWZpbmVkO1xuICB9XG4gIGFzeW5jIGFkZEZlYXR1cmVSZXF1ZXN0VXB2b3RlKFxuICAgIGZlYXR1cmVSZXF1ZXN0SWQ6IHN0cmluZyxcbiAgICB1c2VySWQ6IHN0cmluZ1xuICApOiBQcm9taXNlPHsgc3VjY2VzczogYm9vbGVhbjsgbWVzc2FnZTogc3RyaW5nOyBkYXRhPzogYW55IH0+IHtcbiAgICByZXR1cm4geyBzdWNjZXNzOiB0cnVlLCBtZXNzYWdlOiAnRmFsbGJhY2sgbW9kZScgfTtcbiAgfVxuICBhc3luYyByZW1vdmVGZWF0dXJlUmVxdWVzdFVwdm90ZShcbiAgICBmZWF0dXJlUmVxdWVzdElkOiBzdHJpbmcsXG4gICAgdXNlcklkOiBzdHJpbmdcbiAgKTogUHJvbWlzZTx7IHN1Y2Nlc3M6IGJvb2xlYW47IG1lc3NhZ2U6IHN0cmluZzsgZGF0YT86IGFueSB9PiB7XG4gICAgcmV0dXJuIHsgc3VjY2VzczogdHJ1ZSwgbWVzc2FnZTogJ0ZhbGxiYWNrIG1vZGUnIH07XG4gIH1cblxuXG5cblxufVxuXG4vLyBVc2Ugb3B0aW1pemVkIGRhdGFiYXNlIHN0b3JhZ2UgZm9yIHByb2R1Y3Rpb25cbmV4cG9ydCBjb25zdCBzdG9yYWdlID0gbmV3IE9wdGltaXplZERhdGFiYXNlU3RvcmFnZSgpO1xuXG4vLyBFeHBvcnQgdGhlIE9wdGltaXplZERhdGFiYXNlU3RvcmFnZSBjbGFzcyBmb3IgZGlyZWN0IHVzYWdlXG5leHBvcnQgeyBPcHRpbWl6ZWREYXRhYmFzZVN0b3JhZ2UgfSBmcm9tICcuL29wdGltaXplZC1kYi1zdG9yYWdlJztcbiJdLCJ2ZXJzaW9uIjozfQ==