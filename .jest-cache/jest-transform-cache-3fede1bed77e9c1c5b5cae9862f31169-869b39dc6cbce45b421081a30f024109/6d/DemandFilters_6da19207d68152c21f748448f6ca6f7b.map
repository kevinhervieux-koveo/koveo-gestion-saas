{"file":"/home/runner/workspace/client/src/components/common/DemandFilters.tsx","mappings":"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","names":[],"sources":["/home/runner/workspace/client/src/components/common/DemandFilters.tsx"],"sourcesContent":["import { Search } from 'lucide-react';\nimport { Input } from '@/components/ui/input';\nimport {\n  Select,\n  SelectContent,\n  SelectItem,\n  SelectTrigger,\n  SelectValue,\n} from '@/components/ui/select';\nimport { useLanguage } from '@/hooks/use-language';\nimport type { Building } from './DemandCard';\n\n// Filter state interface\n/**\n *\n */\nexport interface FilterState {\n  searchTerm: string;\n  statusFilter: string;\n  typeFilter: string;\n  buildingFilter?: string;\n}\n\n// Filter change handlers\n/**\n *\n */\nexport interface FilterHandlers {\n  onSearchChange: (value: string) => void;\n  onStatusChange: (value: string) => void;\n  onTypeChange: (value: string) => void;\n  onBuildingChange?: (value: string) => void;\n}\n\n// Filter options for different user roles\nconst STATUS_OPTIONS = [\n  { value: 'all', label: 'All Status' },\n  { value: 'draft', label: 'Draft' },\n  { value: 'submitted', label: 'Submitted' },\n  { value: 'under_review', label: 'Under Review' },\n  { value: 'approved', label: 'Approved' },\n  { value: 'in_progress', label: 'In Progress' },\n  { value: 'completed', label: 'Completed' },\n  { value: 'rejected', label: 'Rejected' },\n  { value: 'cancelled', label: 'Cancelled' },\n] as const;\n\nconst MANAGER_STATUS_OPTIONS = [\n  { value: 'all', label: 'All Status' },\n  { value: 'submitted', label: 'Submitted' },\n  { value: 'under_review', label: 'Under Review' },\n  { value: 'approved', label: 'Approved' },\n  { value: 'in_progress', label: 'In Progress' },\n  { value: 'completed', label: 'Completed' },\n  { value: 'rejected', label: 'Rejected' },\n] as const;\n\nconst TYPE_OPTIONS = [\n  { value: 'all', label: 'All Types' },\n  { value: 'maintenance', label: 'Maintenance' },\n  { value: 'complaint', label: 'Complaint' },\n  { value: 'information', label: 'Information' },\n  { value: 'other', label: 'Other' },\n] as const;\n\n/**\n *\n */\ninterface DemandFiltersProps {\n  filters: FilterState;\n  handlers: FilterHandlers;\n  userRole?: 'manager' | 'resident';\n  buildings?: Building[];\n  searchPlaceholder?: string;\n  className?: string;\n}\n\n/**\n * Common demand filtering component\n * Supports search, status, type, and optional building filters.\n * @param root0\n * @param root0.filters\n * @param root0.handlers\n * @param root0.userRole\n * @param root0.buildings\n * @param root0.searchPlaceholder\n * @param root0.className\n */\nexport function DemandFilters({\n  filters,\n  handlers,\n  userRole = 'resident',\n  buildings = [],\n  searchPlaceholder,\n  className = '',\n}: DemandFiltersProps) {\n  const { t } = useLanguage();\n  const statusOptions = userRole === 'manager' ? MANAGER_STATUS_OPTIONS : STATUS_OPTIONS;\n  const showBuildingFilter = userRole === 'manager' && handlers.onBuildingChange;\n  const placeholder = searchPlaceholder || t('searchDemands');\n\n  return (\n    <div className={`flex items-center gap-4 flex-wrap ${className}`}>\n      {/* Search Input */}\n      <div className='relative flex-1 max-w-sm'>\n        <Search className='absolute left-3 top-3 h-4 w-4 text-muted-foreground' />\n        <Input\n          placeholder={placeholder}\n          value={filters.searchTerm}\n          onChange={(e) => handlers.onSearchChange(e.target.value)}\n          className='pl-10'\n          data-testid='search-demands'\n        />\n      </div>\n\n      {/* Status Filter */}\n      <Select value={filters.statusFilter} onValueChange={handlers.onStatusChange}>\n        <SelectTrigger className='w-40' data-testid='filter-status'>\n          <SelectValue placeholder={t('formStatus')} />\n        </SelectTrigger>\n        <SelectContent>\n          {statusOptions.map((option) => (\n            <SelectItem key={option.value} value={option.value}>\n              {option.label}\n            </SelectItem>\n          ))}\n        </SelectContent>\n      </Select>\n\n      {/* Type Filter */}\n      <Select value={filters.typeFilter} onValueChange={handlers.onTypeChange}>\n        <SelectTrigger className='w-40' data-testid='filter-type'>\n          <SelectValue placeholder={t('formType')} />\n        </SelectTrigger>\n        <SelectContent>\n          {TYPE_OPTIONS.map((option) => (\n            <SelectItem key={option.value} value={option.value}>\n              {option.label}\n            </SelectItem>\n          ))}\n        </SelectContent>\n      </Select>\n\n      {/* Building Filter (Manager only) */}\n      {showBuildingFilter && (\n        <Select value={filters.buildingFilter || 'all'} onValueChange={handlers.onBuildingChange}>\n          <SelectTrigger className='w-40' data-testid='filter-building'>\n            <SelectValue placeholder={t('building')} />\n          </SelectTrigger>\n          <SelectContent>\n            <SelectItem value='all'>{t('allBuildings')}</SelectItem>\n            {buildings.map((building) => (\n              <SelectItem key={building.id} value={building.id}>\n                {building.name}\n              </SelectItem>\n            ))}\n          </SelectContent>\n        </Select>\n      )}\n    </div>\n  );\n}\n\n// Utility function to filter demands based on filter state\n/**\n *\n * @param demands\n * @param filters\n */\nexport function filterDemands<\n  T extends {\n    description: string;\n    type: string;\n    status: string;\n    buildingId?: string;\n    submitter?: { firstName: string; lastName: string; email: string };\n  },\n>(demands: T[], filters: FilterState): T[] {\n  return demands.filter((demand) => {\n    // Search filter\n    const searchLower = filters.searchTerm.toLowerCase();\n    const matchesSearch =\n      !filters.searchTerm ||\n      demand.description.toLowerCase().includes(searchLower) ||\n      demand.type.toLowerCase().includes(searchLower) ||\n      (demand.submitter &&\n        (demand.submitter.firstName.toLowerCase().includes(searchLower) ||\n          demand.submitter.lastName.toLowerCase().includes(searchLower) ||\n          demand.submitter.email.toLowerCase().includes(searchLower)));\n\n    // Status filter\n    const matchesStatus = filters.statusFilter === 'all' || demand.status === filters.statusFilter;\n\n    // Type filter\n    const matchesType = filters.typeFilter === 'all' || demand.type === filters.typeFilter;\n\n    // Building filter (optional)\n    const matchesBuilding =\n      !filters.buildingFilter ||\n      filters.buildingFilter === 'all' ||\n      demand.buildingId === filters.buildingFilter;\n\n    return matchesSearch && matchesStatus && matchesType && matchesBuilding;\n  });\n}\n\nexport default DemandFilters;\n"],"version":3}