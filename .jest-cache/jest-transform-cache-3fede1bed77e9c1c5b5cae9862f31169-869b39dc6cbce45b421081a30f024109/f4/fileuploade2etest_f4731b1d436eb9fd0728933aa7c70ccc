acbd66e5b257a5f9258e37a5f76b1ac1
"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
const jsx_runtime_1 = require("react/jsx-runtime");
/**
 * File Upload End-to-End Test Suite
 *
 * Complete end-to-end testing of file upload workflows across all forms.
 * This test suite simulates real user interactions with file uploads:
 * 1. Full form submission workflows with files
 * 2. User interface feedback during upload
 * 3. File viewing and downloading after upload
 * 4. Error handling and user notifications
 * 5. Cross-browser compatibility scenarios
 * 6. Mobile device file selection
 */
/// <reference path="../types/jest-dom.d.ts" />
const globals_1 = require("@jest/globals");
globals_1.jest.mock('@/lib/queryClient', () => ({
    apiRequest: mockApiRequest,
}));
globals_1.jest.mock('@/hooks/use-toast', () => ({
    useToast: () => ({ toast: mockToast }),
}));
globals_1.jest.mock('@/hooks/use-auth', () => ({
    useAuth: () => ({
        user: {
            id: '123e4567-e89b-12d3-a456-426614174000',
            email: 'test@koveo.com',
            role: 'admin',
        },
        login: globals_1.jest.fn(),
        logout: globals_1.jest.fn(),
    }),
}));
const react_1 = require("@testing-library/react");
require("@testing-library/jest-dom");
const user_event_1 = __importDefault(require("@testing-library/user-event"));
const react_query_1 = require("@tanstack/react-query");
const react_2 = __importDefault(require("react"));
// Test utilities and setup
const createTestQueryClient = () => {
    return new react_query_1.QueryClient({
        defaultOptions: {
            queries: { retry: false },
            mutations: { retry: false },
        },
    });
};
const TestWrapper = ({ children }) => {
    const queryClient = createTestQueryClient();
    return ((0, jsx_runtime_1.jsx)(react_query_1.QueryClientProvider, { client: queryClient, children: children }));
};
// Mock functions
const mockApiRequest = globals_1.jest.fn();
const mockFetch = globals_1.jest.fn();
const mockToast = globals_1.jest.fn();
global.fetch = mockFetch;
// File creation utilities
const createMockFile = (name, size, type, content) => {
    const file = new File([content || 'mock content'], name, { type });
    Object.defineProperty(file, 'size', { value: size });
    return file;
};
(0, globals_1.describe)('File Upload End-to-End Workflows', () => {
    (0, globals_1.beforeEach)(() => {
        globals_1.jest.clearAllMocks();
        mockApiRequest.mockResolvedValue({ id: 'test-id', success: true });
        mockFetch.mockResolvedValue({
            ok: true,
            json: async () => ({ id: 'test-id', success: true }),
        });
    });
    (0, globals_1.afterEach)(() => {
        globals_1.jest.resetAllMocks();
    });
    (0, globals_1.describe)('Complete Bug Report Workflow with Files', () => {
        (0, globals_1.it)('should complete full bug report submission with multiple attachments', async () => {
            const BugReportPage = require('../../client/src/pages/settings/bug-reports.tsx').default;
            // Mock successful responses
            mockFetch
                .mockResolvedValueOnce({
                ok: true,
                json: async () => ({
                    id: 'bug-123',
                    title: 'Complete Bug Report',
                    attachmentCount: 3,
                    attachments: [
                        { id: 'att-1', name: 'screenshot.png', size: 50000 },
                        { id: 'att-2', name: 'error-log.txt', size: 2000 },
                        { id: 'att-3', name: 'config.json', size: 1500 }
                    ]
                })
            })
                .mockResolvedValueOnce({
                ok: true,
                json: async () => ([
                    {
                        id: 'bug-123',
                        title: 'Complete Bug Report',
                        attachmentCount: 3,
                        attachments: [
                            { id: 'att-1', name: 'screenshot.png', size: 50000 },
                            { id: 'att-2', name: 'error-log.txt', size: 2000 },
                            { id: 'att-3', name: 'config.json', size: 1500 }
                        ]
                    }
                ])
            });
            const user = user_event_1.default.setup();
            (0, react_1.render)((0, jsx_runtime_1.jsx)(TestWrapper, { children: (0, jsx_runtime_1.jsx)(BugReportPage, {}) }));
            // Step 1: Open bug report form
            const reportButton = await react_1.screen.findByTestId('button-report-bug');
            await user.click(reportButton);
            // Step 2: Fill in required form fields
            const titleInput = react_1.screen.getByLabelText(/title/i);
            const descriptionTextarea = react_1.screen.getByLabelText(/description/i);
            const pageInput = react_1.screen.getByLabelText(/page/i);
            await user.type(titleInput, 'Complete Bug Report');
            await user.type(descriptionTextarea, 'This is a comprehensive bug report with multiple file attachments including screenshots, logs, and configuration files.');
            await user.type(pageInput, 'Settings Page');
            // Step 3: Select category and priority
            const categorySelect = react_1.screen.getByLabelText(/category/i);
            const prioritySelect = react_1.screen.getByLabelText(/priority/i);
            await user.selectOptions(categorySelect, 'functionality');
            await user.selectOptions(prioritySelect, 'high');
            // Step 4: Add reproduction steps
            const stepsTextarea = react_1.screen.getByLabelText(/steps to reproduce/i);
            await user.type(stepsTextarea, 'Step 1: Navigate to Settings\nStep 2: Click on Advanced Options\nStep 3: Observe the error');
            // Step 5: Attach multiple files
            const fileInput = react_1.screen.getByRole('button', { name: /attach files/i });
            await user.click(fileInput);
            const hiddenFileInput = react_1.screen.getByRole('input', { type: 'file', hidden: true });
            const mockFiles = [
                createMockFile('screenshot.png', 50000, 'image/png'),
                createMockFile('error-log.txt', 2000, 'text/plain'),
                createMockFile('config.json', 1500, 'application/json')
            ];
            Object.defineProperty(hiddenFileInput, 'files', {
                value: mockFiles,
                writable: false,
            });
            react_1.fireEvent.change(hiddenFileInput, { target: { files: mockFiles } });
            // Step 6: Verify files are displayed
            await (0, react_1.waitFor)(() => {
                (0, globals_1.expect)(react_1.screen.getByText('screenshot.png')).toBeInTheDocument();
                (0, globals_1.expect)(react_1.screen.getByText('error-log.txt')).toBeInTheDocument();
                (0, globals_1.expect)(react_1.screen.getByText('config.json')).toBeInTheDocument();
            });
            // Step 7: Submit the form
            const submitButton = react_1.screen.getByRole('button', { name: /submit bug report/i });
            await user.click(submitButton);
            // Step 8: Verify submission with multipart form data
            await (0, react_1.waitFor)(() => {
                (0, globals_1.expect)(mockFetch).toHaveBeenCalledWith('/api/bugs', globals_1.expect.objectContaining({
                    method: 'POST',
                    body: globals_1.expect.any(FormData),
                    credentials: 'include',
                }));
            });
            // Step 9: Verify success notification
            await (0, react_1.waitFor)(() => {
                (0, globals_1.expect)(mockToast).toHaveBeenCalledWith(globals_1.expect.objectContaining({
                    title: 'Bug created',
                    description: globals_1.expect.stringContaining('successfully'),
                }));
            });
            // Step 10: Verify bug appears in list with attachment count
            await (0, react_1.waitFor)(() => {
                (0, globals_1.expect)(react_1.screen.getByText('Complete Bug Report')).toBeInTheDocument();
                (0, globals_1.expect)(react_1.screen.getByText('3 files')).toBeInTheDocument();
            });
        });
        (0, globals_1.it)('should handle upload progress feedback', async () => {
            const BugReportPage = require('../../client/src/pages/settings/bug-reports.tsx').default;
            // Mock XMLHttpRequest for progress tracking
            const mockXHR = {
                upload: {
                    addEventListener: globals_1.jest.fn((event, callback) => {
                        if (event === 'progress') {
                            setTimeout(() => callback({ loaded: 25, total: 100 }), 50);
                            setTimeout(() => callback({ loaded: 50, total: 100 }), 100);
                            setTimeout(() => callback({ loaded: 75, total: 100 }), 150);
                            setTimeout(() => callback({ loaded: 100, total: 100 }), 200);
                        }
                    }),
                },
                addEventListener: globals_1.jest.fn((event, callback) => {
                    if (event === 'load') {
                        setTimeout(() => callback({ target: { response: '{"success": true}' } }), 250);
                    }
                }),
                open: globals_1.jest.fn(),
                send: globals_1.jest.fn(),
                setRequestHeader: globals_1.jest.fn(),
                readyState: 4,
                status: 200,
            };
            global.XMLHttpRequest = globals_1.jest.fn(() => mockXHR);
            const user = user_event_1.default.setup();
            (0, react_1.render)((0, jsx_runtime_1.jsx)(TestWrapper, { children: (0, jsx_runtime_1.jsx)(BugReportPage, {}) }));
            const reportButton = await react_1.screen.findByTestId('button-report-bug');
            await user.click(reportButton);
            // Fill minimum required fields
            await user.type(react_1.screen.getByLabelText(/title/i), 'Bug with Progress');
            await user.type(react_1.screen.getByLabelText(/description/i), 'Testing upload progress feedback.');
            await user.type(react_1.screen.getByLabelText(/page/i), 'Test Page');
            // Attach a large file
            const fileInput = react_1.screen.getByRole('button', { name: /attach files/i });
            await user.click(fileInput);
            const hiddenFileInput = react_1.screen.getByRole('input', { type: 'file', hidden: true });
            const largeFile = createMockFile('large-image.png', 10 * 1024 * 1024, 'image/png'); // 10MB
            Object.defineProperty(hiddenFileInput, 'files', {
                value: [largeFile],
                writable: false,
            });
            react_1.fireEvent.change(hiddenFileInput, { target: { files: [largeFile] } });
            const submitButton = react_1.screen.getByRole('button', { name: /submit bug report/i });
            await user.click(submitButton);
            // Verify progress indicators appear
            await (0, react_1.waitFor)(() => {
                const progressIndicators = react_1.screen.queryAllByText(/uploading|progress|\d+%/i);
                (0, globals_1.expect)(progressIndicators.length).toBeGreaterThan(0);
            }, { timeout: 3000 });
        });
    });
    (0, globals_1.describe)('Feature Request with Design Files Workflow', () => {
        (0, globals_1.it)('should handle feature request with design mockups and documentation', async () => {
            const IdeaBoxPage = require('../../client/src/pages/settings/idea-box.tsx').default;
            mockFetch.mockResolvedValue({
                ok: true,
                json: async () => ({
                    id: 'feature-456',
                    title: 'UI Redesign Feature',
                    attachmentCount: 2
                })
            });
            const user = user_event_1.default.setup();
            (0, react_1.render)((0, jsx_runtime_1.jsx)(TestWrapper, { children: (0, jsx_runtime_1.jsx)(IdeaBoxPage, {}) }));
            // Open feature request form
            const requestButton = await react_1.screen.findByRole('button', { name: /request feature|suggest idea/i });
            await user.click(requestButton);
            // Fill form fields
            await user.type(react_1.screen.getByLabelText(/title/i), 'UI Redesign Feature');
            await user.type(react_1.screen.getByLabelText(/description/i), 'Complete UI overhaul with modern design patterns and improved user experience.');
            // Select category
            const categorySelect = react_1.screen.getByLabelText(/category/i);
            await user.selectOptions(categorySelect, 'ui_ux');
            // Attach design files
            const fileInput = react_1.screen.getByRole('button', { name: /attach files/i });
            await user.click(fileInput);
            const hiddenInput = react_1.screen.getByRole('input', { type: 'file', hidden: true });
            const designFiles = [
                createMockFile('mockup.png', 75000, 'image/png'),
                createMockFile('requirements.pdf', 120000, 'application/pdf')
            ];
            Object.defineProperty(hiddenInput, 'files', {
                value: designFiles,
                writable: false,
            });
            react_1.fireEvent.change(hiddenInput, { target: { files: designFiles } });
            // Submit request
            const submitButton = react_1.screen.getByRole('button', { name: /submit/i });
            await user.click(submitButton);
            await (0, react_1.waitFor)(() => {
                (0, globals_1.expect)(mockFetch).toHaveBeenCalledWith(globals_1.expect.stringMatching(/\/api\/(features|feature-requests)/), globals_1.expect.objectContaining({
                    method: 'POST',
                    body: globals_1.expect.any(FormData),
                }));
            });
            (0, globals_1.expect)(mockToast).toHaveBeenCalledWith(globals_1.expect.objectContaining({
                title: globals_1.expect.stringMatching(/created|submitted/i),
            }));
        });
    });
    (0, globals_1.describe)('Document Upload and Management Workflow', () => {
        (0, globals_1.it)('should complete document upload with categorization and permissions', async () => {
            const DocumentManager = require('../../client/src/components/common/DocumentManager.tsx').default;
            mockApiRequest.mockResolvedValue({
                id: 'doc-789',
                name: 'Policy Document',
                filePath: 'general/policy-document.pdf',
                isVisibleToTenants: true
            });
            const user = user_event_1.default.setup();
            (0, react_1.render)((0, jsx_runtime_1.jsx)(TestWrapper, { children: (0, jsx_runtime_1.jsx)(DocumentManager, {}) }));
            // Open upload dialog
            const uploadButton = react_1.screen.getByRole('button', { name: /upload|add document/i });
            await user.click(uploadButton);
            // Fill document metadata
            await user.type(react_1.screen.getByLabelText(/name/i), 'Policy Document');
            await user.type(react_1.screen.getByLabelText(/description/i), 'Company policy document for all residents');
            // Set document type
            const typeSelect = react_1.screen.getByLabelText(/type/i);
            await user.selectOptions(typeSelect, 'policy');
            // Set visibility permissions
            const visibilityCheckbox = react_1.screen.getByLabelText(/visible to tenants/i);
            await user.click(visibilityCheckbox);
            // Upload file
            const fileInput = react_1.screen.getByRole('input', { type: 'file' });
            const policyDoc = createMockFile('policy-document.pdf', 500000, 'application/pdf');
            Object.defineProperty(fileInput, 'files', {
                value: [policyDoc],
                writable: false,
            });
            react_1.fireEvent.change(fileInput, { target: { files: [policyDoc] } });
            // Submit
            const submitButton = react_1.screen.getByRole('button', { name: /upload|save/i });
            await user.click(submitButton);
            await (0, react_1.waitFor)(() => {
                (0, globals_1.expect)(mockApiRequest).toHaveBeenCalledWith('POST', '/api/documents', globals_1.expect.objectContaining({
                    name: 'Policy Document',
                    description: 'Company policy document for all residents',
                    documentType: 'policy',
                    isVisibleToTenants: true
                }));
            });
        });
        (0, globals_1.it)('should handle document viewing after upload', async () => {
            const DocumentManager = require('../../client/src/components/common/DocumentManager.tsx').default;
            // Mock document list with uploaded document
            mockApiRequest.mockResolvedValue([
                {
                    id: 'doc-123',
                    name: 'Uploaded Document',
                    filePath: 'general/uploaded-document.pdf',
                    fileName: 'uploaded-document.pdf',
                    fileSize: '250000',
                    attachments: [
                        { id: 'att-1', name: 'uploaded-document.pdf', size: 250000 }
                    ]
                }
            ]);
            const user = user_event_1.default.setup();
            (0, react_1.render)((0, jsx_runtime_1.jsx)(TestWrapper, { children: (0, jsx_runtime_1.jsx)(DocumentManager, {}) }));
            // Wait for document to appear in list
            await (0, react_1.waitFor)(() => {
                (0, globals_1.expect)(react_1.screen.getByText('Uploaded Document')).toBeInTheDocument();
            });
            // Click view button
            const viewButton = react_1.screen.getByRole('button', { name: /view/i });
            await user.click(viewButton);
            // Verify view action (opening in new tab/window)
            (0, globals_1.expect)(window.open).toHaveBeenCalledWith(globals_1.expect.stringMatching(/\/api\/documents\/doc-123\/file/), '_blank');
        });
    });
    (0, globals_1.describe)('Error Handling and Recovery', () => {
        (0, globals_1.it)('should handle network errors during upload', async () => {
            const BugReportPage = require('../../client/src/pages/settings/bug-reports.tsx').default;
            mockFetch.mockRejectedValue(new Error('Network error'));
            const user = user_event_1.default.setup();
            (0, react_1.render)((0, jsx_runtime_1.jsx)(TestWrapper, { children: (0, jsx_runtime_1.jsx)(BugReportPage, {}) }));
            const reportButton = await react_1.screen.findByTestId('button-report-bug');
            await user.click(reportButton);
            // Fill form and attach file
            await user.type(react_1.screen.getByLabelText(/title/i), 'Network Error Test');
            await user.type(react_1.screen.getByLabelText(/description/i), 'Testing network error handling.');
            await user.type(react_1.screen.getByLabelText(/page/i), 'Test Page');
            const fileInput = react_1.screen.getByRole('button', { name: /attach files/i });
            await user.click(fileInput);
            const hiddenInput = react_1.screen.getByRole('input', { type: 'file', hidden: true });
            const testFile = createMockFile('test.png', 10000, 'image/png');
            Object.defineProperty(hiddenInput, 'files', {
                value: [testFile],
                writable: false,
            });
            react_1.fireEvent.change(hiddenInput, { target: { files: [testFile] } });
            const submitButton = react_1.screen.getByRole('button', { name: /submit/i });
            await user.click(submitButton);
            // Verify error notification
            await (0, react_1.waitFor)(() => {
                (0, globals_1.expect)(mockToast).toHaveBeenCalledWith(globals_1.expect.objectContaining({
                    title: 'Error',
                    description: globals_1.expect.stringContaining('Network error'),
                    variant: 'destructive',
                }));
            });
        });
        (0, globals_1.it)('should handle file corruption detection', async () => {
            const DocumentManager = require('../../client/src/components/common/DocumentManager.tsx').default;
            mockApiRequest.mockRejectedValue({
                message: 'File appears to be corrupted or invalid format'
            });
            const user = user_event_1.default.setup();
            (0, react_1.render)((0, jsx_runtime_1.jsx)(TestWrapper, { children: (0, jsx_runtime_1.jsx)(DocumentManager, {}) }));
            const uploadButton = react_1.screen.getByRole('button', { name: /upload/i });
            await user.click(uploadButton);
            await user.type(react_1.screen.getByLabelText(/name/i), 'Corrupted File Test');
            const fileInput = react_1.screen.getByRole('input', { type: 'file' });
            const corruptedFile = createMockFile('corrupted.pdf', 50000, 'application/pdf', 'invalid pdf content');
            Object.defineProperty(fileInput, 'files', {
                value: [corruptedFile],
                writable: false,
            });
            react_1.fireEvent.change(fileInput, { target: { files: [corruptedFile] } });
            const submitButton = react_1.screen.getByRole('button', { name: /upload/i });
            await user.click(submitButton);
            await (0, react_1.waitFor)(() => {
                (0, globals_1.expect)(mockToast).toHaveBeenCalledWith(globals_1.expect.objectContaining({
                    title: 'Error',
                    description: globals_1.expect.stringContaining('corrupted'),
                    variant: 'destructive',
                }));
            });
        });
    });
    (0, globals_1.describe)('Mobile and Cross-Platform Compatibility', () => {
        (0, globals_1.it)('should handle mobile file selection', async () => {
            // Mock mobile user agent
            Object.defineProperty(navigator, 'userAgent', {
                value: 'Mozilla/5.0 (iPhone; CPU iPhone OS 14_7_1 like Mac OS X) AppleWebKit/605.1.15',
                configurable: true,
            });
            const BugReportPage = require('../../client/src/pages/settings/bug-reports.tsx').default;
            const user = user_event_1.default.setup();
            (0, react_1.render)((0, jsx_runtime_1.jsx)(TestWrapper, { children: (0, jsx_runtime_1.jsx)(BugReportPage, {}) }));
            const reportButton = await react_1.screen.findByTestId('button-report-bug');
            await user.click(reportButton);
            // Verify mobile-friendly file input
            const fileButton = react_1.screen.getByRole('button', { name: /attach files/i });
            (0, globals_1.expect)(fileButton).toHaveAttribute('accept', globals_1.expect.stringMatching(/image|pdf|text/));
            // Test camera integration on mobile
            const hiddenInput = react_1.screen.getByRole('input', { type: 'file', hidden: true });
            (0, globals_1.expect)(hiddenInput).toHaveAttribute('capture', 'environment'); // Should allow camera capture
        });
        (0, globals_1.it)('should handle drag and drop file upload', async () => {
            const DocumentManager = require('../../client/src/components/common/DocumentManager.tsx').default;
            const user = user_event_1.default.setup();
            (0, react_1.render)((0, jsx_runtime_1.jsx)(TestWrapper, { children: (0, jsx_runtime_1.jsx)(DocumentManager, {}) }));
            const uploadButton = react_1.screen.getByRole('button', { name: /upload/i });
            await user.click(uploadButton);
            // Find drag and drop area
            const dropZone = react_1.screen.getByText(/drag.*drop|drop.*files/i).closest('div');
            (0, globals_1.expect)(dropZone).toBeInTheDocument();
            // Simulate drag and drop
            const mockFile = createMockFile('dropped-file.pdf', 100000, 'application/pdf');
            const dataTransfer = new DataTransfer();
            dataTransfer.items.add(mockFile);
            react_1.fireEvent.dragOver(dropZone, { dataTransfer });
            react_1.fireEvent.drop(dropZone, { dataTransfer });
            // Verify file was added
            await (0, react_1.waitFor)(() => {
                (0, globals_1.expect)(react_1.screen.getByText('dropped-file.pdf')).toBeInTheDocument();
            });
        });
    });
    (0, globals_1.describe)('Accessibility and User Experience', () => {
        (0, globals_1.it)('should provide proper accessibility attributes for file uploads', async () => {
            const BugReportPage = require('../../client/src/pages/settings/bug-reports.tsx').default;
            (0, react_1.render)((0, jsx_runtime_1.jsx)(TestWrapper, { children: (0, jsx_runtime_1.jsx)(BugReportPage, {}) }));
            const reportButton = await react_1.screen.findByTestId('button-report-bug');
            await user_event_1.default.click(reportButton);
            const fileButton = react_1.screen.getByRole('button', { name: /attach files/i });
            // Check accessibility attributes
            (0, globals_1.expect)(fileButton).toHaveAttribute('aria-describedby');
            (0, globals_1.expect)(fileButton).toHaveAttribute('tabindex', '0');
            // Check for screen reader support
            const srText = react_1.screen.getByText(/screenshots.*error logs.*console outputs/i);
            (0, globals_1.expect)(srText).toBeInTheDocument();
        });
        (0, globals_1.it)('should provide clear upload status feedback', async () => {
            const BugReportPage = require('../../client/src/pages/settings/bug-reports.tsx').default;
            const user = user_event_1.default.setup();
            (0, react_1.render)((0, jsx_runtime_1.jsx)(TestWrapper, { children: (0, jsx_runtime_1.jsx)(BugReportPage, {}) }));
            const reportButton = await react_1.screen.findByTestId('button-report-bug');
            await user.click(reportButton);
            // Add required fields
            await user.type(react_1.screen.getByLabelText(/title/i), 'Accessibility Test');
            await user.type(react_1.screen.getByLabelText(/description/i), 'Testing upload feedback.');
            await user.type(react_1.screen.getByLabelText(/page/i), 'Test Page');
            // Attach file
            const fileButton = react_1.screen.getByRole('button', { name: /attach files/i });
            await user.click(fileButton);
            const hiddenInput = react_1.screen.getByRole('input', { type: 'file', hidden: true });
            const testFile = createMockFile('test.png', 25000, 'image/png');
            Object.defineProperty(hiddenInput, 'files', {
                value: [testFile],
                writable: false,
            });
            react_1.fireEvent.change(hiddenInput, { target: { files: [testFile] } });
            // Verify file status display
            await (0, react_1.waitFor)(() => {
                (0, globals_1.expect)(react_1.screen.getByText('Selected files (1):')).toBeInTheDocument();
                (0, globals_1.expect)(react_1.screen.getByText('test.png')).toBeInTheDocument();
            });
            // Submit and check for status updates
            const submitButton = react_1.screen.getByRole('button', { name: /submit/i });
            (0, globals_1.expect)(submitButton).not.toBeDisabled();
            await user.click(submitButton);
            // Button should show loading state
            await (0, react_1.waitFor)(() => {
                const loadingButton = react_1.screen.getByRole('button', { name: /submitting|uploading/i });
                (0, globals_1.expect)(loadingButton).toBeDisabled();
            });
        });
    });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiL2hvbWUvcnVubmVyL3dvcmtzcGFjZS90ZXN0cy9pbnRlZ3JhdGlvbi9maWxlLXVwbG9hZC1lMmUudGVzdC50c3giLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQUE7Ozs7Ozs7Ozs7O0dBV0c7QUFFSCwrQ0FBK0M7QUFDL0MsMkNBQWtGO0FBK0JsRixjQUFJLENBQUMsSUFBSSxDQUFDLG1CQUFtQixFQUFFLEdBQUcsRUFBRSxDQUFDLENBQUM7SUFDcEMsVUFBVSxFQUFFLGNBQWM7Q0FDM0IsQ0FBQyxDQUFDLENBQUM7QUFFSixjQUFJLENBQUMsSUFBSSxDQUFDLG1CQUFtQixFQUFFLEdBQUcsRUFBRSxDQUFDLENBQUM7SUFDcEMsUUFBUSxFQUFFLEdBQUcsRUFBRSxDQUFDLENBQUMsRUFBRSxLQUFLLEVBQUUsU0FBUyxFQUFFLENBQUM7Q0FDdkMsQ0FBQyxDQUFDLENBQUM7QUFFSixjQUFJLENBQUMsSUFBSSxDQUFDLGtCQUFrQixFQUFFLEdBQUcsRUFBRSxDQUFDLENBQUM7SUFDbkMsT0FBTyxFQUFFLEdBQUcsRUFBRSxDQUFDLENBQUM7UUFDZCxJQUFJLEVBQUU7WUFDSixFQUFFLEVBQUUsc0NBQXNDO1lBQzFDLEtBQUssRUFBRSxnQkFBZ0I7WUFDdkIsSUFBSSxFQUFFLE9BQU87U0FDZDtRQUNELEtBQUssRUFBRSxjQUFJLENBQUMsRUFBRSxFQUFFO1FBQ2hCLE1BQU0sRUFBRSxjQUFJLENBQUMsRUFBRSxFQUFFO0tBQ2xCLENBQUM7Q0FDSCxDQUFDLENBQUMsQ0FBQztBQWhESixrREFBNEU7QUFDNUUscUNBQW1DO0FBQ25DLDZFQUFvRDtBQUNwRCx1REFBeUU7QUFDekUsa0RBQTBCO0FBRTFCLDJCQUEyQjtBQUMzQixNQUFNLHFCQUFxQixHQUFHLEdBQUcsRUFBRTtJQUNqQyxPQUFPLElBQUkseUJBQVcsQ0FBQztRQUNyQixjQUFjLEVBQUU7WUFDZCxPQUFPLEVBQUUsRUFBRSxLQUFLLEVBQUUsS0FBSyxFQUFFO1lBQ3pCLFNBQVMsRUFBRSxFQUFFLEtBQUssRUFBRSxLQUFLLEVBQUU7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LENBQUM7QUFDTCxDQUFDLENBQUMsQ0FBQyIsIm5hbWVzIjpbXSwic291cmNlcyI6WyIvaG9tZS9ydW5uZXIvd29ya3NwYWNlL3Rlc3RzL2ludGVncmF0aW9uL2ZpbGUtdXBsb2FkLWUyZS50ZXN0LnRzeCJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIEZpbGUgVXBsb2FkIEVuZC10by1FbmQgVGVzdCBTdWl0ZVxuICogXG4gKiBDb21wbGV0ZSBlbmQtdG8tZW5kIHRlc3Rpbmcgb2YgZmlsZSB1cGxvYWQgd29ya2Zsb3dzIGFjcm9zcyBhbGwgZm9ybXMuXG4gKiBUaGlzIHRlc3Qgc3VpdGUgc2ltdWxhdGVzIHJlYWwgdXNlciBpbnRlcmFjdGlvbnMgd2l0aCBmaWxlIHVwbG9hZHM6XG4gKiAxLiBGdWxsIGZvcm0gc3VibWlzc2lvbiB3b3JrZmxvd3Mgd2l0aCBmaWxlc1xuICogMi4gVXNlciBpbnRlcmZhY2UgZmVlZGJhY2sgZHVyaW5nIHVwbG9hZFxuICogMy4gRmlsZSB2aWV3aW5nIGFuZCBkb3dubG9hZGluZyBhZnRlciB1cGxvYWRcbiAqIDQuIEVycm9yIGhhbmRsaW5nIGFuZCB1c2VyIG5vdGlmaWNhdGlvbnNcbiAqIDUuIENyb3NzLWJyb3dzZXIgY29tcGF0aWJpbGl0eSBzY2VuYXJpb3NcbiAqIDYuIE1vYmlsZSBkZXZpY2UgZmlsZSBzZWxlY3Rpb25cbiAqL1xuXG4vLy8gPHJlZmVyZW5jZSBwYXRoPVwiLi4vdHlwZXMvamVzdC1kb20uZC50c1wiIC8+XG5pbXBvcnQgeyBkZXNjcmliZSwgaXQsIGV4cGVjdCwgamVzdCwgYmVmb3JlRWFjaCwgYWZ0ZXJFYWNoIH0gZnJvbSAnQGplc3QvZ2xvYmFscyc7XG5pbXBvcnQgeyByZW5kZXIsIHNjcmVlbiwgZmlyZUV2ZW50LCB3YWl0Rm9yIH0gZnJvbSAnQHRlc3RpbmctbGlicmFyeS9yZWFjdCc7XG5pbXBvcnQgJ0B0ZXN0aW5nLWxpYnJhcnkvamVzdC1kb20nO1xuaW1wb3J0IHVzZXJFdmVudCBmcm9tICdAdGVzdGluZy1saWJyYXJ5L3VzZXItZXZlbnQnO1xuaW1wb3J0IHsgUXVlcnlDbGllbnQsIFF1ZXJ5Q2xpZW50UHJvdmlkZXIgfSBmcm9tICdAdGFuc3RhY2svcmVhY3QtcXVlcnknO1xuaW1wb3J0IFJlYWN0IGZyb20gJ3JlYWN0JztcblxuLy8gVGVzdCB1dGlsaXRpZXMgYW5kIHNldHVwXG5jb25zdCBjcmVhdGVUZXN0UXVlcnlDbGllbnQgPSAoKSA9PiB7XG4gIHJldHVybiBuZXcgUXVlcnlDbGllbnQoe1xuICAgIGRlZmF1bHRPcHRpb25zOiB7XG4gICAgICBxdWVyaWVzOiB7IHJldHJ5OiBmYWxzZSB9LFxuICAgICAgbXV0YXRpb25zOiB7IHJldHJ5OiBmYWxzZSB9LFxuICAgIH0sXG4gIH0pO1xufTtcblxuY29uc3QgVGVzdFdyYXBwZXI6IFJlYWN0LkZDPHsgY2hpbGRyZW46IFJlYWN0LlJlYWN0Tm9kZSB9PiA9ICh7IGNoaWxkcmVuIH0pID0+IHtcbiAgY29uc3QgcXVlcnlDbGllbnQgPSBjcmVhdGVUZXN0UXVlcnlDbGllbnQoKTtcbiAgcmV0dXJuIChcbiAgICA8UXVlcnlDbGllbnRQcm92aWRlciBjbGllbnQ9e3F1ZXJ5Q2xpZW50fT5cbiAgICAgIHtjaGlsZHJlbn1cbiAgICA8L1F1ZXJ5Q2xpZW50UHJvdmlkZXI+XG4gICk7XG59O1xuXG4vLyBNb2NrIGZ1bmN0aW9uc1xuY29uc3QgbW9ja0FwaVJlcXVlc3QgPSBqZXN0LmZuKCk7XG5jb25zdCBtb2NrRmV0Y2ggPSBqZXN0LmZuKCk7XG5jb25zdCBtb2NrVG9hc3QgPSBqZXN0LmZuKCk7XG5cbmplc3QubW9jaygnQC9saWIvcXVlcnlDbGllbnQnLCAoKSA9PiAoe1xuICBhcGlSZXF1ZXN0OiBtb2NrQXBpUmVxdWVzdCxcbn0pKTtcblxuamVzdC5tb2NrKCdAL2hvb2tzL3VzZS10b2FzdCcsICgpID0+ICh7XG4gIHVzZVRvYXN0OiAoKSA9PiAoeyB0b2FzdDogbW9ja1RvYXN0IH0pLFxufSkpO1xuXG5qZXN0Lm1vY2soJ0AvaG9va3MvdXNlLWF1dGgnLCAoKSA9PiAoe1xuICB1c2VBdXRoOiAoKSA9PiAoe1xuICAgIHVzZXI6IHtcbiAgICAgIGlkOiAnMTIzZTQ1NjctZTg5Yi0xMmQzLWE0NTYtNDI2NjE0MTc0MDAwJyxcbiAgICAgIGVtYWlsOiAndGVzdEBrb3Zlby5jb20nLFxuICAgICAgcm9sZTogJ2FkbWluJyxcbiAgICB9LFxuICAgIGxvZ2luOiBqZXN0LmZuKCksXG4gICAgbG9nb3V0OiBqZXN0LmZuKCksXG4gIH0pLFxufSkpO1xuXG5nbG9iYWwuZmV0Y2ggPSBtb2NrRmV0Y2g7XG5cbi8vIEZpbGUgY3JlYXRpb24gdXRpbGl0aWVzXG5jb25zdCBjcmVhdGVNb2NrRmlsZSA9IChuYW1lOiBzdHJpbmcsIHNpemU6IG51bWJlciwgdHlwZTogc3RyaW5nLCBjb250ZW50Pzogc3RyaW5nKSA9PiB7XG4gIGNvbnN0IGZpbGUgPSBuZXcgRmlsZShbY29udGVudCB8fCAnbW9jayBjb250ZW50J10sIG5hbWUsIHsgdHlwZSB9KTtcbiAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGZpbGUsICdzaXplJywgeyB2YWx1ZTogc2l6ZSB9KTtcbiAgcmV0dXJuIGZpbGU7XG59O1xuXG5kZXNjcmliZSgnRmlsZSBVcGxvYWQgRW5kLXRvLUVuZCBXb3JrZmxvd3MnLCAoKSA9PiB7XG4gIGJlZm9yZUVhY2goKCkgPT4ge1xuICAgIGplc3QuY2xlYXJBbGxNb2NrcygpO1xuICAgIG1vY2tBcGlSZXF1ZXN0Lm1vY2tSZXNvbHZlZFZhbHVlKHsgaWQ6ICd0ZXN0LWlkJywgc3VjY2VzczogdHJ1ZSB9KTtcbiAgICBtb2NrRmV0Y2gubW9ja1Jlc29sdmVkVmFsdWUoe1xuICAgICAgb2s6IHRydWUsXG4gICAgICBqc29uOiBhc3luYyAoKSA9PiAoeyBpZDogJ3Rlc3QtaWQnLCBzdWNjZXNzOiB0cnVlIH0pLFxuICAgIH0pO1xuICB9KTtcblxuICBhZnRlckVhY2goKCkgPT4ge1xuICAgIGplc3QucmVzZXRBbGxNb2NrcygpO1xuICB9KTtcblxuICBkZXNjcmliZSgnQ29tcGxldGUgQnVnIFJlcG9ydCBXb3JrZmxvdyB3aXRoIEZpbGVzJywgKCkgPT4ge1xuICAgIGl0KCdzaG91bGQgY29tcGxldGUgZnVsbCBidWcgcmVwb3J0IHN1Ym1pc3Npb24gd2l0aCBtdWx0aXBsZSBhdHRhY2htZW50cycsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IEJ1Z1JlcG9ydFBhZ2UgPSByZXF1aXJlKCcuLi8uLi9jbGllbnQvc3JjL3BhZ2VzL3NldHRpbmdzL2J1Zy1yZXBvcnRzLnRzeCcpLmRlZmF1bHQ7XG4gICAgICBcbiAgICAgIC8vIE1vY2sgc3VjY2Vzc2Z1bCByZXNwb25zZXNcbiAgICAgIG1vY2tGZXRjaFxuICAgICAgICAubW9ja1Jlc29sdmVkVmFsdWVPbmNlKHtcbiAgICAgICAgICBvazogdHJ1ZSxcbiAgICAgICAgICBqc29uOiBhc3luYyAoKSA9PiAoeyBcbiAgICAgICAgICAgIGlkOiAnYnVnLTEyMycsXG4gICAgICAgICAgICB0aXRsZTogJ0NvbXBsZXRlIEJ1ZyBSZXBvcnQnLFxuICAgICAgICAgICAgYXR0YWNobWVudENvdW50OiAzLFxuICAgICAgICAgICAgYXR0YWNobWVudHM6IFtcbiAgICAgICAgICAgICAgeyBpZDogJ2F0dC0xJywgbmFtZTogJ3NjcmVlbnNob3QucG5nJywgc2l6ZTogNTAwMDAgfSxcbiAgICAgICAgICAgICAgeyBpZDogJ2F0dC0yJywgbmFtZTogJ2Vycm9yLWxvZy50eHQnLCBzaXplOiAyMDAwIH0sXG4gICAgICAgICAgICAgIHsgaWQ6ICdhdHQtMycsIG5hbWU6ICdjb25maWcuanNvbicsIHNpemU6IDE1MDAgfVxuICAgICAgICAgICAgXVxuICAgICAgICAgIH0pXG4gICAgICAgIH0pXG4gICAgICAgIC5tb2NrUmVzb2x2ZWRWYWx1ZU9uY2Uoe1xuICAgICAgICAgIG9rOiB0cnVlLFxuICAgICAgICAgIGpzb246IGFzeW5jICgpID0+IChbXG4gICAgICAgICAgICB7IFxuICAgICAgICAgICAgICBpZDogJ2J1Zy0xMjMnLFxuICAgICAgICAgICAgICB0aXRsZTogJ0NvbXBsZXRlIEJ1ZyBSZXBvcnQnLFxuICAgICAgICAgICAgICBhdHRhY2htZW50Q291bnQ6IDMsXG4gICAgICAgICAgICAgIGF0dGFjaG1lbnRzOiBbXG4gICAgICAgICAgICAgICAgeyBpZDogJ2F0dC0xJywgbmFtZTogJ3NjcmVlbnNob3QucG5nJywgc2l6ZTogNTAwMDAgfSxcbiAgICAgICAgICAgICAgICB7IGlkOiAnYXR0LTInLCBuYW1lOiAnZXJyb3ItbG9nLnR4dCcsIHNpemU6IDIwMDAgfSxcbiAgICAgICAgICAgICAgICB7IGlkOiAnYXR0LTMnLCBuYW1lOiAnY29uZmlnLmpzb24nLCBzaXplOiAxNTAwIH1cbiAgICAgICAgICAgICAgXVxuICAgICAgICAgICAgfVxuICAgICAgICAgIF0pXG4gICAgICAgIH0pO1xuXG4gICAgICBjb25zdCB1c2VyID0gdXNlckV2ZW50LnNldHVwKCk7XG5cbiAgICAgIHJlbmRlcihcbiAgICAgICAgPFRlc3RXcmFwcGVyPlxuICAgICAgICAgIDxCdWdSZXBvcnRQYWdlIC8+XG4gICAgICAgIDwvVGVzdFdyYXBwZXI+XG4gICAgICApO1xuXG4gICAgICAvLyBTdGVwIDE6IE9wZW4gYnVnIHJlcG9ydCBmb3JtXG4gICAgICBjb25zdCByZXBvcnRCdXR0b24gPSBhd2FpdCBzY3JlZW4uZmluZEJ5VGVzdElkKCdidXR0b24tcmVwb3J0LWJ1ZycpO1xuICAgICAgYXdhaXQgdXNlci5jbGljayhyZXBvcnRCdXR0b24pO1xuXG4gICAgICAvLyBTdGVwIDI6IEZpbGwgaW4gcmVxdWlyZWQgZm9ybSBmaWVsZHNcbiAgICAgIGNvbnN0IHRpdGxlSW5wdXQgPSBzY3JlZW4uZ2V0QnlMYWJlbFRleHQoL3RpdGxlL2kpO1xuICAgICAgY29uc3QgZGVzY3JpcHRpb25UZXh0YXJlYSA9IHNjcmVlbi5nZXRCeUxhYmVsVGV4dCgvZGVzY3JpcHRpb24vaSk7XG4gICAgICBjb25zdCBwYWdlSW5wdXQgPSBzY3JlZW4uZ2V0QnlMYWJlbFRleHQoL3BhZ2UvaSk7XG4gICAgICBcbiAgICAgIGF3YWl0IHVzZXIudHlwZSh0aXRsZUlucHV0LCAnQ29tcGxldGUgQnVnIFJlcG9ydCcpO1xuICAgICAgYXdhaXQgdXNlci50eXBlKGRlc2NyaXB0aW9uVGV4dGFyZWEsICdUaGlzIGlzIGEgY29tcHJlaGVuc2l2ZSBidWcgcmVwb3J0IHdpdGggbXVsdGlwbGUgZmlsZSBhdHRhY2htZW50cyBpbmNsdWRpbmcgc2NyZWVuc2hvdHMsIGxvZ3MsIGFuZCBjb25maWd1cmF0aW9uIGZpbGVzLicpO1xuICAgICAgYXdhaXQgdXNlci50eXBlKHBhZ2VJbnB1dCwgJ1NldHRpbmdzIFBhZ2UnKTtcblxuICAgICAgLy8gU3RlcCAzOiBTZWxlY3QgY2F0ZWdvcnkgYW5kIHByaW9yaXR5XG4gICAgICBjb25zdCBjYXRlZ29yeVNlbGVjdCA9IHNjcmVlbi5nZXRCeUxhYmVsVGV4dCgvY2F0ZWdvcnkvaSk7XG4gICAgICBjb25zdCBwcmlvcml0eVNlbGVjdCA9IHNjcmVlbi5nZXRCeUxhYmVsVGV4dCgvcHJpb3JpdHkvaSk7XG4gICAgICBcbiAgICAgIGF3YWl0IHVzZXIuc2VsZWN0T3B0aW9ucyhjYXRlZ29yeVNlbGVjdCwgJ2Z1bmN0aW9uYWxpdHknKTtcbiAgICAgIGF3YWl0IHVzZXIuc2VsZWN0T3B0aW9ucyhwcmlvcml0eVNlbGVjdCwgJ2hpZ2gnKTtcblxuICAgICAgLy8gU3RlcCA0OiBBZGQgcmVwcm9kdWN0aW9uIHN0ZXBzXG4gICAgICBjb25zdCBzdGVwc1RleHRhcmVhID0gc2NyZWVuLmdldEJ5TGFiZWxUZXh0KC9zdGVwcyB0byByZXByb2R1Y2UvaSk7XG4gICAgICBhd2FpdCB1c2VyLnR5cGUoc3RlcHNUZXh0YXJlYSwgJ1N0ZXAgMTogTmF2aWdhdGUgdG8gU2V0dGluZ3NcXG5TdGVwIDI6IENsaWNrIG9uIEFkdmFuY2VkIE9wdGlvbnNcXG5TdGVwIDM6IE9ic2VydmUgdGhlIGVycm9yJyk7XG5cbiAgICAgIC8vIFN0ZXAgNTogQXR0YWNoIG11bHRpcGxlIGZpbGVzXG4gICAgICBjb25zdCBmaWxlSW5wdXQgPSBzY3JlZW4uZ2V0QnlSb2xlKCdidXR0b24nLCB7IG5hbWU6IC9hdHRhY2ggZmlsZXMvaSB9KTtcbiAgICAgIGF3YWl0IHVzZXIuY2xpY2soZmlsZUlucHV0KTtcblxuICAgICAgY29uc3QgaGlkZGVuRmlsZUlucHV0ID0gc2NyZWVuLmdldEJ5Um9sZSgnaW5wdXQnLCB7IHR5cGU6ICdmaWxlJywgaGlkZGVuOiB0cnVlIH0pO1xuICAgICAgY29uc3QgbW9ja0ZpbGVzID0gW1xuICAgICAgICBjcmVhdGVNb2NrRmlsZSgnc2NyZWVuc2hvdC5wbmcnLCA1MDAwMCwgJ2ltYWdlL3BuZycpLFxuICAgICAgICBjcmVhdGVNb2NrRmlsZSgnZXJyb3ItbG9nLnR4dCcsIDIwMDAsICd0ZXh0L3BsYWluJyksXG4gICAgICAgIGNyZWF0ZU1vY2tGaWxlKCdjb25maWcuanNvbicsIDE1MDAsICdhcHBsaWNhdGlvbi9qc29uJylcbiAgICAgIF07XG5cbiAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShoaWRkZW5GaWxlSW5wdXQsICdmaWxlcycsIHtcbiAgICAgICAgdmFsdWU6IG1vY2tGaWxlcyxcbiAgICAgICAgd3JpdGFibGU6IGZhbHNlLFxuICAgICAgfSk7XG5cbiAgICAgIGZpcmVFdmVudC5jaGFuZ2UoaGlkZGVuRmlsZUlucHV0LCB7IHRhcmdldDogeyBmaWxlczogbW9ja0ZpbGVzIH0gfSk7XG5cbiAgICAgIC8vIFN0ZXAgNjogVmVyaWZ5IGZpbGVzIGFyZSBkaXNwbGF5ZWRcbiAgICAgIGF3YWl0IHdhaXRGb3IoKCkgPT4ge1xuICAgICAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGV4dCgnc2NyZWVuc2hvdC5wbmcnKSkudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgICAgICAgZXhwZWN0KHNjcmVlbi5nZXRCeVRleHQoJ2Vycm9yLWxvZy50eHQnKSkudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgICAgICAgZXhwZWN0KHNjcmVlbi5nZXRCeVRleHQoJ2NvbmZpZy5qc29uJykpLnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgICB9KTtcblxuICAgICAgLy8gU3RlcCA3OiBTdWJtaXQgdGhlIGZvcm1cbiAgICAgIGNvbnN0IHN1Ym1pdEJ1dHRvbiA9IHNjcmVlbi5nZXRCeVJvbGUoJ2J1dHRvbicsIHsgbmFtZTogL3N1Ym1pdCBidWcgcmVwb3J0L2kgfSk7XG4gICAgICBhd2FpdCB1c2VyLmNsaWNrKHN1Ym1pdEJ1dHRvbik7XG5cbiAgICAgIC8vIFN0ZXAgODogVmVyaWZ5IHN1Ym1pc3Npb24gd2l0aCBtdWx0aXBhcnQgZm9ybSBkYXRhXG4gICAgICBhd2FpdCB3YWl0Rm9yKCgpID0+IHtcbiAgICAgICAgZXhwZWN0KG1vY2tGZXRjaCkudG9IYXZlQmVlbkNhbGxlZFdpdGgoXG4gICAgICAgICAgJy9hcGkvYnVncycsXG4gICAgICAgICAgZXhwZWN0Lm9iamVjdENvbnRhaW5pbmcoe1xuICAgICAgICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICAgICAgICBib2R5OiBleHBlY3QuYW55KEZvcm1EYXRhKSxcbiAgICAgICAgICAgIGNyZWRlbnRpYWxzOiAnaW5jbHVkZScsXG4gICAgICAgICAgfSlcbiAgICAgICAgKTtcbiAgICAgIH0pO1xuXG4gICAgICAvLyBTdGVwIDk6IFZlcmlmeSBzdWNjZXNzIG5vdGlmaWNhdGlvblxuICAgICAgYXdhaXQgd2FpdEZvcigoKSA9PiB7XG4gICAgICAgIGV4cGVjdChtb2NrVG9hc3QpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKFxuICAgICAgICAgIGV4cGVjdC5vYmplY3RDb250YWluaW5nKHtcbiAgICAgICAgICAgIHRpdGxlOiAnQnVnIGNyZWF0ZWQnLFxuICAgICAgICAgICAgZGVzY3JpcHRpb246IGV4cGVjdC5zdHJpbmdDb250YWluaW5nKCdzdWNjZXNzZnVsbHknKSxcbiAgICAgICAgICB9KVxuICAgICAgICApO1xuICAgICAgfSk7XG5cbiAgICAgIC8vIFN0ZXAgMTA6IFZlcmlmeSBidWcgYXBwZWFycyBpbiBsaXN0IHdpdGggYXR0YWNobWVudCBjb3VudFxuICAgICAgYXdhaXQgd2FpdEZvcigoKSA9PiB7XG4gICAgICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXh0KCdDb21wbGV0ZSBCdWcgUmVwb3J0JykpLnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXh0KCczIGZpbGVzJykpLnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgICB9KTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgaGFuZGxlIHVwbG9hZCBwcm9ncmVzcyBmZWVkYmFjaycsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IEJ1Z1JlcG9ydFBhZ2UgPSByZXF1aXJlKCcuLi8uLi9jbGllbnQvc3JjL3BhZ2VzL3NldHRpbmdzL2J1Zy1yZXBvcnRzLnRzeCcpLmRlZmF1bHQ7XG4gICAgICBcbiAgICAgIC8vIE1vY2sgWE1MSHR0cFJlcXVlc3QgZm9yIHByb2dyZXNzIHRyYWNraW5nXG4gICAgICBjb25zdCBtb2NrWEhSID0ge1xuICAgICAgICB1cGxvYWQ6IHtcbiAgICAgICAgICBhZGRFdmVudExpc3RlbmVyOiBqZXN0LmZuKChldmVudCwgY2FsbGJhY2spID0+IHtcbiAgICAgICAgICAgIGlmIChldmVudCA9PT0gJ3Byb2dyZXNzJykge1xuICAgICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IGNhbGxiYWNrKHsgbG9hZGVkOiAyNSwgdG90YWw6IDEwMCB9KSwgNTApO1xuICAgICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IGNhbGxiYWNrKHsgbG9hZGVkOiA1MCwgdG90YWw6IDEwMCB9KSwgMTAwKTtcbiAgICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiBjYWxsYmFjayh7IGxvYWRlZDogNzUsIHRvdGFsOiAxMDAgfSksIDE1MCk7XG4gICAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4gY2FsbGJhY2soeyBsb2FkZWQ6IDEwMCwgdG90YWw6IDEwMCB9KSwgMjAwKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KSxcbiAgICAgICAgfSxcbiAgICAgICAgYWRkRXZlbnRMaXN0ZW5lcjogamVzdC5mbigoZXZlbnQsIGNhbGxiYWNrKSA9PiB7XG4gICAgICAgICAgaWYgKGV2ZW50ID09PSAnbG9hZCcpIHtcbiAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4gY2FsbGJhY2soeyB0YXJnZXQ6IHsgcmVzcG9uc2U6ICd7XCJzdWNjZXNzXCI6IHRydWV9JyB9IH0pLCAyNTApO1xuICAgICAgICAgIH1cbiAgICAgICAgfSksXG4gICAgICAgIG9wZW46IGplc3QuZm4oKSxcbiAgICAgICAgc2VuZDogamVzdC5mbigpLFxuICAgICAgICBzZXRSZXF1ZXN0SGVhZGVyOiBqZXN0LmZuKCksXG4gICAgICAgIHJlYWR5U3RhdGU6IDQsXG4gICAgICAgIHN0YXR1czogMjAwLFxuICAgICAgfTtcblxuICAgICAgZ2xvYmFsLlhNTEh0dHBSZXF1ZXN0ID0gamVzdC5mbigoKSA9PiBtb2NrWEhSKSBhcyBhbnk7XG5cbiAgICAgIGNvbnN0IHVzZXIgPSB1c2VyRXZlbnQuc2V0dXAoKTtcblxuICAgICAgcmVuZGVyKFxuICAgICAgICA8VGVzdFdyYXBwZXI+XG4gICAgICAgICAgPEJ1Z1JlcG9ydFBhZ2UgLz5cbiAgICAgICAgPC9UZXN0V3JhcHBlcj5cbiAgICAgICk7XG5cbiAgICAgIGNvbnN0IHJlcG9ydEJ1dHRvbiA9IGF3YWl0IHNjcmVlbi5maW5kQnlUZXN0SWQoJ2J1dHRvbi1yZXBvcnQtYnVnJyk7XG4gICAgICBhd2FpdCB1c2VyLmNsaWNrKHJlcG9ydEJ1dHRvbik7XG5cbiAgICAgIC8vIEZpbGwgbWluaW11bSByZXF1aXJlZCBmaWVsZHNcbiAgICAgIGF3YWl0IHVzZXIudHlwZShzY3JlZW4uZ2V0QnlMYWJlbFRleHQoL3RpdGxlL2kpLCAnQnVnIHdpdGggUHJvZ3Jlc3MnKTtcbiAgICAgIGF3YWl0IHVzZXIudHlwZShzY3JlZW4uZ2V0QnlMYWJlbFRleHQoL2Rlc2NyaXB0aW9uL2kpLCAnVGVzdGluZyB1cGxvYWQgcHJvZ3Jlc3MgZmVlZGJhY2suJyk7XG4gICAgICBhd2FpdCB1c2VyLnR5cGUoc2NyZWVuLmdldEJ5TGFiZWxUZXh0KC9wYWdlL2kpLCAnVGVzdCBQYWdlJyk7XG5cbiAgICAgIC8vIEF0dGFjaCBhIGxhcmdlIGZpbGVcbiAgICAgIGNvbnN0IGZpbGVJbnB1dCA9IHNjcmVlbi5nZXRCeVJvbGUoJ2J1dHRvbicsIHsgbmFtZTogL2F0dGFjaCBmaWxlcy9pIH0pO1xuICAgICAgYXdhaXQgdXNlci5jbGljayhmaWxlSW5wdXQpO1xuXG4gICAgICBjb25zdCBoaWRkZW5GaWxlSW5wdXQgPSBzY3JlZW4uZ2V0QnlSb2xlKCdpbnB1dCcsIHsgdHlwZTogJ2ZpbGUnLCBoaWRkZW46IHRydWUgfSk7XG4gICAgICBjb25zdCBsYXJnZUZpbGUgPSBjcmVhdGVNb2NrRmlsZSgnbGFyZ2UtaW1hZ2UucG5nJywgMTAgKiAxMDI0ICogMTAyNCwgJ2ltYWdlL3BuZycpOyAvLyAxME1CXG5cbiAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShoaWRkZW5GaWxlSW5wdXQsICdmaWxlcycsIHtcbiAgICAgICAgdmFsdWU6IFtsYXJnZUZpbGVdLFxuICAgICAgICB3cml0YWJsZTogZmFsc2UsXG4gICAgICB9KTtcblxuICAgICAgZmlyZUV2ZW50LmNoYW5nZShoaWRkZW5GaWxlSW5wdXQsIHsgdGFyZ2V0OiB7IGZpbGVzOiBbbGFyZ2VGaWxlXSB9IH0pO1xuXG4gICAgICBjb25zdCBzdWJtaXRCdXR0b24gPSBzY3JlZW4uZ2V0QnlSb2xlKCdidXR0b24nLCB7IG5hbWU6IC9zdWJtaXQgYnVnIHJlcG9ydC9pIH0pO1xuICAgICAgYXdhaXQgdXNlci5jbGljayhzdWJtaXRCdXR0b24pO1xuXG4gICAgICAvLyBWZXJpZnkgcHJvZ3Jlc3MgaW5kaWNhdG9ycyBhcHBlYXJcbiAgICAgIGF3YWl0IHdhaXRGb3IoKCkgPT4ge1xuICAgICAgICBjb25zdCBwcm9ncmVzc0luZGljYXRvcnMgPSBzY3JlZW4ucXVlcnlBbGxCeVRleHQoL3VwbG9hZGluZ3xwcm9ncmVzc3xcXGQrJS9pKTtcbiAgICAgICAgZXhwZWN0KHByb2dyZXNzSW5kaWNhdG9ycy5sZW5ndGgpLnRvQmVHcmVhdGVyVGhhbigwKTtcbiAgICAgIH0sIHsgdGltZW91dDogMzAwMCB9KTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ0ZlYXR1cmUgUmVxdWVzdCB3aXRoIERlc2lnbiBGaWxlcyBXb3JrZmxvdycsICgpID0+IHtcbiAgICBpdCgnc2hvdWxkIGhhbmRsZSBmZWF0dXJlIHJlcXVlc3Qgd2l0aCBkZXNpZ24gbW9ja3VwcyBhbmQgZG9jdW1lbnRhdGlvbicsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IElkZWFCb3hQYWdlID0gcmVxdWlyZSgnLi4vLi4vY2xpZW50L3NyYy9wYWdlcy9zZXR0aW5ncy9pZGVhLWJveC50c3gnKS5kZWZhdWx0O1xuICAgICAgXG4gICAgICBtb2NrRmV0Y2gubW9ja1Jlc29sdmVkVmFsdWUoe1xuICAgICAgICBvazogdHJ1ZSxcbiAgICAgICAganNvbjogYXN5bmMgKCkgPT4gKHsgXG4gICAgICAgICAgaWQ6ICdmZWF0dXJlLTQ1NicsXG4gICAgICAgICAgdGl0bGU6ICdVSSBSZWRlc2lnbiBGZWF0dXJlJyxcbiAgICAgICAgICBhdHRhY2htZW50Q291bnQ6IDJcbiAgICAgICAgfSlcbiAgICAgIH0pO1xuXG4gICAgICBjb25zdCB1c2VyID0gdXNlckV2ZW50LnNldHVwKCk7XG5cbiAgICAgIHJlbmRlcihcbiAgICAgICAgPFRlc3RXcmFwcGVyPlxuICAgICAgICAgIDxJZGVhQm94UGFnZSAvPlxuICAgICAgICA8L1Rlc3RXcmFwcGVyPlxuICAgICAgKTtcblxuICAgICAgLy8gT3BlbiBmZWF0dXJlIHJlcXVlc3QgZm9ybVxuICAgICAgY29uc3QgcmVxdWVzdEJ1dHRvbiA9IGF3YWl0IHNjcmVlbi5maW5kQnlSb2xlKCdidXR0b24nLCB7IG5hbWU6IC9yZXF1ZXN0IGZlYXR1cmV8c3VnZ2VzdCBpZGVhL2kgfSk7XG4gICAgICBhd2FpdCB1c2VyLmNsaWNrKHJlcXVlc3RCdXR0b24pO1xuXG4gICAgICAvLyBGaWxsIGZvcm0gZmllbGRzXG4gICAgICBhd2FpdCB1c2VyLnR5cGUoc2NyZWVuLmdldEJ5TGFiZWxUZXh0KC90aXRsZS9pKSwgJ1VJIFJlZGVzaWduIEZlYXR1cmUnKTtcbiAgICAgIGF3YWl0IHVzZXIudHlwZShzY3JlZW4uZ2V0QnlMYWJlbFRleHQoL2Rlc2NyaXB0aW9uL2kpLCAnQ29tcGxldGUgVUkgb3ZlcmhhdWwgd2l0aCBtb2Rlcm4gZGVzaWduIHBhdHRlcm5zIGFuZCBpbXByb3ZlZCB1c2VyIGV4cGVyaWVuY2UuJyk7XG5cbiAgICAgIC8vIFNlbGVjdCBjYXRlZ29yeVxuICAgICAgY29uc3QgY2F0ZWdvcnlTZWxlY3QgPSBzY3JlZW4uZ2V0QnlMYWJlbFRleHQoL2NhdGVnb3J5L2kpO1xuICAgICAgYXdhaXQgdXNlci5zZWxlY3RPcHRpb25zKGNhdGVnb3J5U2VsZWN0LCAndWlfdXgnKTtcblxuICAgICAgLy8gQXR0YWNoIGRlc2lnbiBmaWxlc1xuICAgICAgY29uc3QgZmlsZUlucHV0ID0gc2NyZWVuLmdldEJ5Um9sZSgnYnV0dG9uJywgeyBuYW1lOiAvYXR0YWNoIGZpbGVzL2kgfSk7XG4gICAgICBhd2FpdCB1c2VyLmNsaWNrKGZpbGVJbnB1dCk7XG5cbiAgICAgIGNvbnN0IGhpZGRlbklucHV0ID0gc2NyZWVuLmdldEJ5Um9sZSgnaW5wdXQnLCB7IHR5cGU6ICdmaWxlJywgaGlkZGVuOiB0cnVlIH0pO1xuICAgICAgY29uc3QgZGVzaWduRmlsZXMgPSBbXG4gICAgICAgIGNyZWF0ZU1vY2tGaWxlKCdtb2NrdXAucG5nJywgNzUwMDAsICdpbWFnZS9wbmcnKSxcbiAgICAgICAgY3JlYXRlTW9ja0ZpbGUoJ3JlcXVpcmVtZW50cy5wZGYnLCAxMjAwMDAsICdhcHBsaWNhdGlvbi9wZGYnKVxuICAgICAgXTtcblxuICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGhpZGRlbklucHV0LCAnZmlsZXMnLCB7XG4gICAgICAgIHZhbHVlOiBkZXNpZ25GaWxlcyxcbiAgICAgICAgd3JpdGFibGU6IGZhbHNlLFxuICAgICAgfSk7XG5cbiAgICAgIGZpcmVFdmVudC5jaGFuZ2UoaGlkZGVuSW5wdXQsIHsgdGFyZ2V0OiB7IGZpbGVzOiBkZXNpZ25GaWxlcyB9IH0pO1xuXG4gICAgICAvLyBTdWJtaXQgcmVxdWVzdFxuICAgICAgY29uc3Qgc3VibWl0QnV0dG9uID0gc2NyZWVuLmdldEJ5Um9sZSgnYnV0dG9uJywgeyBuYW1lOiAvc3VibWl0L2kgfSk7XG4gICAgICBhd2FpdCB1c2VyLmNsaWNrKHN1Ym1pdEJ1dHRvbik7XG5cbiAgICAgIGF3YWl0IHdhaXRGb3IoKCkgPT4ge1xuICAgICAgICBleHBlY3QobW9ja0ZldGNoKS50b0hhdmVCZWVuQ2FsbGVkV2l0aChcbiAgICAgICAgICBleHBlY3Quc3RyaW5nTWF0Y2hpbmcoL1xcL2FwaVxcLyhmZWF0dXJlc3xmZWF0dXJlLXJlcXVlc3RzKS8pLFxuICAgICAgICAgIGV4cGVjdC5vYmplY3RDb250YWluaW5nKHtcbiAgICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgICAgICAgYm9keTogZXhwZWN0LmFueShGb3JtRGF0YSksXG4gICAgICAgICAgfSlcbiAgICAgICAgKTtcbiAgICAgIH0pO1xuXG4gICAgICBleHBlY3QobW9ja1RvYXN0KS50b0hhdmVCZWVuQ2FsbGVkV2l0aChcbiAgICAgICAgZXhwZWN0Lm9iamVjdENvbnRhaW5pbmcoe1xuICAgICAgICAgIHRpdGxlOiBleHBlY3Quc3RyaW5nTWF0Y2hpbmcoL2NyZWF0ZWR8c3VibWl0dGVkL2kpLFxuICAgICAgICB9KVxuICAgICAgKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ0RvY3VtZW50IFVwbG9hZCBhbmQgTWFuYWdlbWVudCBXb3JrZmxvdycsICgpID0+IHtcbiAgICBpdCgnc2hvdWxkIGNvbXBsZXRlIGRvY3VtZW50IHVwbG9hZCB3aXRoIGNhdGVnb3JpemF0aW9uIGFuZCBwZXJtaXNzaW9ucycsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IERvY3VtZW50TWFuYWdlciA9IHJlcXVpcmUoJy4uLy4uL2NsaWVudC9zcmMvY29tcG9uZW50cy9jb21tb24vRG9jdW1lbnRNYW5hZ2VyLnRzeCcpLmRlZmF1bHQ7XG4gICAgICBcbiAgICAgIG1vY2tBcGlSZXF1ZXN0Lm1vY2tSZXNvbHZlZFZhbHVlKHtcbiAgICAgICAgaWQ6ICdkb2MtNzg5JyxcbiAgICAgICAgbmFtZTogJ1BvbGljeSBEb2N1bWVudCcsXG4gICAgICAgIGZpbGVQYXRoOiAnZ2VuZXJhbC9wb2xpY3ktZG9jdW1lbnQucGRmJyxcbiAgICAgICAgaXNWaXNpYmxlVG9UZW5hbnRzOiB0cnVlXG4gICAgICB9KTtcblxuICAgICAgY29uc3QgdXNlciA9IHVzZXJFdmVudC5zZXR1cCgpO1xuXG4gICAgICByZW5kZXIoXG4gICAgICAgIDxUZXN0V3JhcHBlcj5cbiAgICAgICAgICA8RG9jdW1lbnRNYW5hZ2VyIC8+XG4gICAgICAgIDwvVGVzdFdyYXBwZXI+XG4gICAgICApO1xuXG4gICAgICAvLyBPcGVuIHVwbG9hZCBkaWFsb2dcbiAgICAgIGNvbnN0IHVwbG9hZEJ1dHRvbiA9IHNjcmVlbi5nZXRCeVJvbGUoJ2J1dHRvbicsIHsgbmFtZTogL3VwbG9hZHxhZGQgZG9jdW1lbnQvaSB9KTtcbiAgICAgIGF3YWl0IHVzZXIuY2xpY2sodXBsb2FkQnV0dG9uKTtcblxuICAgICAgLy8gRmlsbCBkb2N1bWVudCBtZXRhZGF0YVxuICAgICAgYXdhaXQgdXNlci50eXBlKHNjcmVlbi5nZXRCeUxhYmVsVGV4dCgvbmFtZS9pKSwgJ1BvbGljeSBEb2N1bWVudCcpO1xuICAgICAgYXdhaXQgdXNlci50eXBlKHNjcmVlbi5nZXRCeUxhYmVsVGV4dCgvZGVzY3JpcHRpb24vaSksICdDb21wYW55IHBvbGljeSBkb2N1bWVudCBmb3IgYWxsIHJlc2lkZW50cycpO1xuXG4gICAgICAvLyBTZXQgZG9jdW1lbnQgdHlwZVxuICAgICAgY29uc3QgdHlwZVNlbGVjdCA9IHNjcmVlbi5nZXRCeUxhYmVsVGV4dCgvdHlwZS9pKTtcbiAgICAgIGF3YWl0IHVzZXIuc2VsZWN0T3B0aW9ucyh0eXBlU2VsZWN0LCAncG9saWN5Jyk7XG5cbiAgICAgIC8vIFNldCB2aXNpYmlsaXR5IHBlcm1pc3Npb25zXG4gICAgICBjb25zdCB2aXNpYmlsaXR5Q2hlY2tib3ggPSBzY3JlZW4uZ2V0QnlMYWJlbFRleHQoL3Zpc2libGUgdG8gdGVuYW50cy9pKTtcbiAgICAgIGF3YWl0IHVzZXIuY2xpY2sodmlzaWJpbGl0eUNoZWNrYm94KTtcblxuICAgICAgLy8gVXBsb2FkIGZpbGVcbiAgICAgIGNvbnN0IGZpbGVJbnB1dCA9IHNjcmVlbi5nZXRCeVJvbGUoJ2lucHV0JywgeyB0eXBlOiAnZmlsZScgfSk7XG4gICAgICBjb25zdCBwb2xpY3lEb2MgPSBjcmVhdGVNb2NrRmlsZSgncG9saWN5LWRvY3VtZW50LnBkZicsIDUwMDAwMCwgJ2FwcGxpY2F0aW9uL3BkZicpO1xuXG4gICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZmlsZUlucHV0LCAnZmlsZXMnLCB7XG4gICAgICAgIHZhbHVlOiBbcG9saWN5RG9jXSxcbiAgICAgICAgd3JpdGFibGU6IGZhbHNlLFxuICAgICAgfSk7XG5cbiAgICAgIGZpcmVFdmVudC5jaGFuZ2UoZmlsZUlucHV0LCB7IHRhcmdldDogeyBmaWxlczogW3BvbGljeURvY10gfSB9KTtcblxuICAgICAgLy8gU3VibWl0XG4gICAgICBjb25zdCBzdWJtaXRCdXR0b24gPSBzY3JlZW4uZ2V0QnlSb2xlKCdidXR0b24nLCB7IG5hbWU6IC91cGxvYWR8c2F2ZS9pIH0pO1xuICAgICAgYXdhaXQgdXNlci5jbGljayhzdWJtaXRCdXR0b24pO1xuXG4gICAgICBhd2FpdCB3YWl0Rm9yKCgpID0+IHtcbiAgICAgICAgZXhwZWN0KG1vY2tBcGlSZXF1ZXN0KS50b0hhdmVCZWVuQ2FsbGVkV2l0aChcbiAgICAgICAgICAnUE9TVCcsXG4gICAgICAgICAgJy9hcGkvZG9jdW1lbnRzJyxcbiAgICAgICAgICBleHBlY3Qub2JqZWN0Q29udGFpbmluZyh7XG4gICAgICAgICAgICBuYW1lOiAnUG9saWN5IERvY3VtZW50JyxcbiAgICAgICAgICAgIGRlc2NyaXB0aW9uOiAnQ29tcGFueSBwb2xpY3kgZG9jdW1lbnQgZm9yIGFsbCByZXNpZGVudHMnLFxuICAgICAgICAgICAgZG9jdW1lbnRUeXBlOiAncG9saWN5JyxcbiAgICAgICAgICAgIGlzVmlzaWJsZVRvVGVuYW50czogdHJ1ZVxuICAgICAgICAgIH0pXG4gICAgICAgICk7XG4gICAgICB9KTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgaGFuZGxlIGRvY3VtZW50IHZpZXdpbmcgYWZ0ZXIgdXBsb2FkJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgRG9jdW1lbnRNYW5hZ2VyID0gcmVxdWlyZSgnLi4vLi4vY2xpZW50L3NyYy9jb21wb25lbnRzL2NvbW1vbi9Eb2N1bWVudE1hbmFnZXIudHN4JykuZGVmYXVsdDtcbiAgICAgIFxuICAgICAgLy8gTW9jayBkb2N1bWVudCBsaXN0IHdpdGggdXBsb2FkZWQgZG9jdW1lbnRcbiAgICAgIG1vY2tBcGlSZXF1ZXN0Lm1vY2tSZXNvbHZlZFZhbHVlKFtcbiAgICAgICAge1xuICAgICAgICAgIGlkOiAnZG9jLTEyMycsXG4gICAgICAgICAgbmFtZTogJ1VwbG9hZGVkIERvY3VtZW50JyxcbiAgICAgICAgICBmaWxlUGF0aDogJ2dlbmVyYWwvdXBsb2FkZWQtZG9jdW1lbnQucGRmJyxcbiAgICAgICAgICBmaWxlTmFtZTogJ3VwbG9hZGVkLWRvY3VtZW50LnBkZicsXG4gICAgICAgICAgZmlsZVNpemU6ICcyNTAwMDAnLFxuICAgICAgICAgIGF0dGFjaG1lbnRzOiBbXG4gICAgICAgICAgICB7IGlkOiAnYXR0LTEnLCBuYW1lOiAndXBsb2FkZWQtZG9jdW1lbnQucGRmJywgc2l6ZTogMjUwMDAwIH1cbiAgICAgICAgICBdXG4gICAgICAgIH1cbiAgICAgIF0pO1xuXG4gICAgICBjb25zdCB1c2VyID0gdXNlckV2ZW50LnNldHVwKCk7XG5cbiAgICAgIHJlbmRlcihcbiAgICAgICAgPFRlc3RXcmFwcGVyPlxuICAgICAgICAgIDxEb2N1bWVudE1hbmFnZXIgLz5cbiAgICAgICAgPC9UZXN0V3JhcHBlcj5cbiAgICAgICk7XG5cbiAgICAgIC8vIFdhaXQgZm9yIGRvY3VtZW50IHRvIGFwcGVhciBpbiBsaXN0XG4gICAgICBhd2FpdCB3YWl0Rm9yKCgpID0+IHtcbiAgICAgICAgZXhwZWN0KHNjcmVlbi5nZXRCeVRleHQoJ1VwbG9hZGVkIERvY3VtZW50JykpLnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgICB9KTtcblxuICAgICAgLy8gQ2xpY2sgdmlldyBidXR0b25cbiAgICAgIGNvbnN0IHZpZXdCdXR0b24gPSBzY3JlZW4uZ2V0QnlSb2xlKCdidXR0b24nLCB7IG5hbWU6IC92aWV3L2kgfSk7XG4gICAgICBhd2FpdCB1c2VyLmNsaWNrKHZpZXdCdXR0b24pO1xuXG4gICAgICAvLyBWZXJpZnkgdmlldyBhY3Rpb24gKG9wZW5pbmcgaW4gbmV3IHRhYi93aW5kb3cpXG4gICAgICBleHBlY3Qod2luZG93Lm9wZW4pLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKFxuICAgICAgICBleHBlY3Quc3RyaW5nTWF0Y2hpbmcoL1xcL2FwaVxcL2RvY3VtZW50c1xcL2RvYy0xMjNcXC9maWxlLyksXG4gICAgICAgICdfYmxhbmsnXG4gICAgICApO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnRXJyb3IgSGFuZGxpbmcgYW5kIFJlY292ZXJ5JywgKCkgPT4ge1xuICAgIGl0KCdzaG91bGQgaGFuZGxlIG5ldHdvcmsgZXJyb3JzIGR1cmluZyB1cGxvYWQnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBCdWdSZXBvcnRQYWdlID0gcmVxdWlyZSgnLi4vLi4vY2xpZW50L3NyYy9wYWdlcy9zZXR0aW5ncy9idWctcmVwb3J0cy50c3gnKS5kZWZhdWx0O1xuICAgICAgXG4gICAgICBtb2NrRmV0Y2gubW9ja1JlamVjdGVkVmFsdWUobmV3IEVycm9yKCdOZXR3b3JrIGVycm9yJykpO1xuXG4gICAgICBjb25zdCB1c2VyID0gdXNlckV2ZW50LnNldHVwKCk7XG5cbiAgICAgIHJlbmRlcihcbiAgICAgICAgPFRlc3RXcmFwcGVyPlxuICAgICAgICAgIDxCdWdSZXBvcnRQYWdlIC8+XG4gICAgICAgIDwvVGVzdFdyYXBwZXI+XG4gICAgICApO1xuXG4gICAgICBjb25zdCByZXBvcnRCdXR0b24gPSBhd2FpdCBzY3JlZW4uZmluZEJ5VGVzdElkKCdidXR0b24tcmVwb3J0LWJ1ZycpO1xuICAgICAgYXdhaXQgdXNlci5jbGljayhyZXBvcnRCdXR0b24pO1xuXG4gICAgICAvLyBGaWxsIGZvcm0gYW5kIGF0dGFjaCBmaWxlXG4gICAgICBhd2FpdCB1c2VyLnR5cGUoc2NyZWVuLmdldEJ5TGFiZWxUZXh0KC90aXRsZS9pKSwgJ05ldHdvcmsgRXJyb3IgVGVzdCcpO1xuICAgICAgYXdhaXQgdXNlci50eXBlKHNjcmVlbi5nZXRCeUxhYmVsVGV4dCgvZGVzY3JpcHRpb24vaSksICdUZXN0aW5nIG5ldHdvcmsgZXJyb3IgaGFuZGxpbmcuJyk7XG4gICAgICBhd2FpdCB1c2VyLnR5cGUoc2NyZWVuLmdldEJ5TGFiZWxUZXh0KC9wYWdlL2kpLCAnVGVzdCBQYWdlJyk7XG5cbiAgICAgIGNvbnN0IGZpbGVJbnB1dCA9IHNjcmVlbi5nZXRCeVJvbGUoJ2J1dHRvbicsIHsgbmFtZTogL2F0dGFjaCBmaWxlcy9pIH0pO1xuICAgICAgYXdhaXQgdXNlci5jbGljayhmaWxlSW5wdXQpO1xuXG4gICAgICBjb25zdCBoaWRkZW5JbnB1dCA9IHNjcmVlbi5nZXRCeVJvbGUoJ2lucHV0JywgeyB0eXBlOiAnZmlsZScsIGhpZGRlbjogdHJ1ZSB9KTtcbiAgICAgIGNvbnN0IHRlc3RGaWxlID0gY3JlYXRlTW9ja0ZpbGUoJ3Rlc3QucG5nJywgMTAwMDAsICdpbWFnZS9wbmcnKTtcblxuICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGhpZGRlbklucHV0LCAnZmlsZXMnLCB7XG4gICAgICAgIHZhbHVlOiBbdGVzdEZpbGVdLFxuICAgICAgICB3cml0YWJsZTogZmFsc2UsXG4gICAgICB9KTtcblxuICAgICAgZmlyZUV2ZW50LmNoYW5nZShoaWRkZW5JbnB1dCwgeyB0YXJnZXQ6IHsgZmlsZXM6IFt0ZXN0RmlsZV0gfSB9KTtcblxuICAgICAgY29uc3Qgc3VibWl0QnV0dG9uID0gc2NyZWVuLmdldEJ5Um9sZSgnYnV0dG9uJywgeyBuYW1lOiAvc3VibWl0L2kgfSk7XG4gICAgICBhd2FpdCB1c2VyLmNsaWNrKHN1Ym1pdEJ1dHRvbik7XG5cbiAgICAgIC8vIFZlcmlmeSBlcnJvciBub3RpZmljYXRpb25cbiAgICAgIGF3YWl0IHdhaXRGb3IoKCkgPT4ge1xuICAgICAgICBleHBlY3QobW9ja1RvYXN0KS50b0hhdmVCZWVuQ2FsbGVkV2l0aChcbiAgICAgICAgICBleHBlY3Qub2JqZWN0Q29udGFpbmluZyh7XG4gICAgICAgICAgICB0aXRsZTogJ0Vycm9yJyxcbiAgICAgICAgICAgIGRlc2NyaXB0aW9uOiBleHBlY3Quc3RyaW5nQ29udGFpbmluZygnTmV0d29yayBlcnJvcicpLFxuICAgICAgICAgICAgdmFyaWFudDogJ2Rlc3RydWN0aXZlJyxcbiAgICAgICAgICB9KVxuICAgICAgICApO1xuICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGhhbmRsZSBmaWxlIGNvcnJ1cHRpb24gZGV0ZWN0aW9uJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgRG9jdW1lbnRNYW5hZ2VyID0gcmVxdWlyZSgnLi4vLi4vY2xpZW50L3NyYy9jb21wb25lbnRzL2NvbW1vbi9Eb2N1bWVudE1hbmFnZXIudHN4JykuZGVmYXVsdDtcbiAgICAgIFxuICAgICAgbW9ja0FwaVJlcXVlc3QubW9ja1JlamVjdGVkVmFsdWUoe1xuICAgICAgICBtZXNzYWdlOiAnRmlsZSBhcHBlYXJzIHRvIGJlIGNvcnJ1cHRlZCBvciBpbnZhbGlkIGZvcm1hdCdcbiAgICAgIH0pO1xuXG4gICAgICBjb25zdCB1c2VyID0gdXNlckV2ZW50LnNldHVwKCk7XG5cbiAgICAgIHJlbmRlcihcbiAgICAgICAgPFRlc3RXcmFwcGVyPlxuICAgICAgICAgIDxEb2N1bWVudE1hbmFnZXIgLz5cbiAgICAgICAgPC9UZXN0V3JhcHBlcj5cbiAgICAgICk7XG5cbiAgICAgIGNvbnN0IHVwbG9hZEJ1dHRvbiA9IHNjcmVlbi5nZXRCeVJvbGUoJ2J1dHRvbicsIHsgbmFtZTogL3VwbG9hZC9pIH0pO1xuICAgICAgYXdhaXQgdXNlci5jbGljayh1cGxvYWRCdXR0b24pO1xuXG4gICAgICBhd2FpdCB1c2VyLnR5cGUoc2NyZWVuLmdldEJ5TGFiZWxUZXh0KC9uYW1lL2kpLCAnQ29ycnVwdGVkIEZpbGUgVGVzdCcpO1xuICAgICAgXG4gICAgICBjb25zdCBmaWxlSW5wdXQgPSBzY3JlZW4uZ2V0QnlSb2xlKCdpbnB1dCcsIHsgdHlwZTogJ2ZpbGUnIH0pO1xuICAgICAgY29uc3QgY29ycnVwdGVkRmlsZSA9IGNyZWF0ZU1vY2tGaWxlKCdjb3JydXB0ZWQucGRmJywgNTAwMDAsICdhcHBsaWNhdGlvbi9wZGYnLCAnaW52YWxpZCBwZGYgY29udGVudCcpO1xuXG4gICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZmlsZUlucHV0LCAnZmlsZXMnLCB7XG4gICAgICAgIHZhbHVlOiBbY29ycnVwdGVkRmlsZV0sXG4gICAgICAgIHdyaXRhYmxlOiBmYWxzZSxcbiAgICAgIH0pO1xuXG4gICAgICBmaXJlRXZlbnQuY2hhbmdlKGZpbGVJbnB1dCwgeyB0YXJnZXQ6IHsgZmlsZXM6IFtjb3JydXB0ZWRGaWxlXSB9IH0pO1xuXG4gICAgICBjb25zdCBzdWJtaXRCdXR0b24gPSBzY3JlZW4uZ2V0QnlSb2xlKCdidXR0b24nLCB7IG5hbWU6IC91cGxvYWQvaSB9KTtcbiAgICAgIGF3YWl0IHVzZXIuY2xpY2soc3VibWl0QnV0dG9uKTtcblxuICAgICAgYXdhaXQgd2FpdEZvcigoKSA9PiB7XG4gICAgICAgIGV4cGVjdChtb2NrVG9hc3QpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKFxuICAgICAgICAgIGV4cGVjdC5vYmplY3RDb250YWluaW5nKHtcbiAgICAgICAgICAgIHRpdGxlOiAnRXJyb3InLFxuICAgICAgICAgICAgZGVzY3JpcHRpb246IGV4cGVjdC5zdHJpbmdDb250YWluaW5nKCdjb3JydXB0ZWQnKSxcbiAgICAgICAgICAgIHZhcmlhbnQ6ICdkZXN0cnVjdGl2ZScsXG4gICAgICAgICAgfSlcbiAgICAgICAgKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnTW9iaWxlIGFuZCBDcm9zcy1QbGF0Zm9ybSBDb21wYXRpYmlsaXR5JywgKCkgPT4ge1xuICAgIGl0KCdzaG91bGQgaGFuZGxlIG1vYmlsZSBmaWxlIHNlbGVjdGlvbicsIGFzeW5jICgpID0+IHtcbiAgICAgIC8vIE1vY2sgbW9iaWxlIHVzZXIgYWdlbnRcbiAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShuYXZpZ2F0b3IsICd1c2VyQWdlbnQnLCB7XG4gICAgICAgIHZhbHVlOiAnTW96aWxsYS81LjAgKGlQaG9uZTsgQ1BVIGlQaG9uZSBPUyAxNF83XzEgbGlrZSBNYWMgT1MgWCkgQXBwbGVXZWJLaXQvNjA1LjEuMTUnLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICB9KTtcblxuICAgICAgY29uc3QgQnVnUmVwb3J0UGFnZSA9IHJlcXVpcmUoJy4uLy4uL2NsaWVudC9zcmMvcGFnZXMvc2V0dGluZ3MvYnVnLXJlcG9ydHMudHN4JykuZGVmYXVsdDtcblxuICAgICAgY29uc3QgdXNlciA9IHVzZXJFdmVudC5zZXR1cCgpO1xuXG4gICAgICByZW5kZXIoXG4gICAgICAgIDxUZXN0V3JhcHBlcj5cbiAgICAgICAgICA8QnVnUmVwb3J0UGFnZSAvPlxuICAgICAgICA8L1Rlc3RXcmFwcGVyPlxuICAgICAgKTtcblxuICAgICAgY29uc3QgcmVwb3J0QnV0dG9uID0gYXdhaXQgc2NyZWVuLmZpbmRCeVRlc3RJZCgnYnV0dG9uLXJlcG9ydC1idWcnKTtcbiAgICAgIGF3YWl0IHVzZXIuY2xpY2socmVwb3J0QnV0dG9uKTtcblxuICAgICAgLy8gVmVyaWZ5IG1vYmlsZS1mcmllbmRseSBmaWxlIGlucHV0XG4gICAgICBjb25zdCBmaWxlQnV0dG9uID0gc2NyZWVuLmdldEJ5Um9sZSgnYnV0dG9uJywgeyBuYW1lOiAvYXR0YWNoIGZpbGVzL2kgfSk7XG4gICAgICBleHBlY3QoZmlsZUJ1dHRvbikudG9IYXZlQXR0cmlidXRlKCdhY2NlcHQnLCBleHBlY3Quc3RyaW5nTWF0Y2hpbmcoL2ltYWdlfHBkZnx0ZXh0LykpO1xuXG4gICAgICAvLyBUZXN0IGNhbWVyYSBpbnRlZ3JhdGlvbiBvbiBtb2JpbGVcbiAgICAgIGNvbnN0IGhpZGRlbklucHV0ID0gc2NyZWVuLmdldEJ5Um9sZSgnaW5wdXQnLCB7IHR5cGU6ICdmaWxlJywgaGlkZGVuOiB0cnVlIH0pO1xuICAgICAgZXhwZWN0KGhpZGRlbklucHV0KS50b0hhdmVBdHRyaWJ1dGUoJ2NhcHR1cmUnLCAnZW52aXJvbm1lbnQnKTsgLy8gU2hvdWxkIGFsbG93IGNhbWVyYSBjYXB0dXJlXG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGhhbmRsZSBkcmFnIGFuZCBkcm9wIGZpbGUgdXBsb2FkJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgRG9jdW1lbnRNYW5hZ2VyID0gcmVxdWlyZSgnLi4vLi4vY2xpZW50L3NyYy9jb21wb25lbnRzL2NvbW1vbi9Eb2N1bWVudE1hbmFnZXIudHN4JykuZGVmYXVsdDtcblxuICAgICAgY29uc3QgdXNlciA9IHVzZXJFdmVudC5zZXR1cCgpO1xuXG4gICAgICByZW5kZXIoXG4gICAgICAgIDxUZXN0V3JhcHBlcj5cbiAgICAgICAgICA8RG9jdW1lbnRNYW5hZ2VyIC8+XG4gICAgICAgIDwvVGVzdFdyYXBwZXI+XG4gICAgICApO1xuXG4gICAgICBjb25zdCB1cGxvYWRCdXR0b24gPSBzY3JlZW4uZ2V0QnlSb2xlKCdidXR0b24nLCB7IG5hbWU6IC91cGxvYWQvaSB9KTtcbiAgICAgIGF3YWl0IHVzZXIuY2xpY2sodXBsb2FkQnV0dG9uKTtcblxuICAgICAgLy8gRmluZCBkcmFnIGFuZCBkcm9wIGFyZWFcbiAgICAgIGNvbnN0IGRyb3Bab25lID0gc2NyZWVuLmdldEJ5VGV4dCgvZHJhZy4qZHJvcHxkcm9wLipmaWxlcy9pKS5jbG9zZXN0KCdkaXYnKTtcbiAgICAgIGV4cGVjdChkcm9wWm9uZSkudG9CZUluVGhlRG9jdW1lbnQoKTtcblxuICAgICAgLy8gU2ltdWxhdGUgZHJhZyBhbmQgZHJvcFxuICAgICAgY29uc3QgbW9ja0ZpbGUgPSBjcmVhdGVNb2NrRmlsZSgnZHJvcHBlZC1maWxlLnBkZicsIDEwMDAwMCwgJ2FwcGxpY2F0aW9uL3BkZicpO1xuICAgICAgY29uc3QgZGF0YVRyYW5zZmVyID0gbmV3IERhdGFUcmFuc2ZlcigpO1xuICAgICAgZGF0YVRyYW5zZmVyLml0ZW1zLmFkZChtb2NrRmlsZSk7XG5cbiAgICAgIGZpcmVFdmVudC5kcmFnT3Zlcihkcm9wWm9uZSEsIHsgZGF0YVRyYW5zZmVyIH0pO1xuICAgICAgZmlyZUV2ZW50LmRyb3AoZHJvcFpvbmUhLCB7IGRhdGFUcmFuc2ZlciB9KTtcblxuICAgICAgLy8gVmVyaWZ5IGZpbGUgd2FzIGFkZGVkXG4gICAgICBhd2FpdCB3YWl0Rm9yKCgpID0+IHtcbiAgICAgICAgZXhwZWN0KHNjcmVlbi5nZXRCeVRleHQoJ2Ryb3BwZWQtZmlsZS5wZGYnKSkudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnQWNjZXNzaWJpbGl0eSBhbmQgVXNlciBFeHBlcmllbmNlJywgKCkgPT4ge1xuICAgIGl0KCdzaG91bGQgcHJvdmlkZSBwcm9wZXIgYWNjZXNzaWJpbGl0eSBhdHRyaWJ1dGVzIGZvciBmaWxlIHVwbG9hZHMnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBCdWdSZXBvcnRQYWdlID0gcmVxdWlyZSgnLi4vLi4vY2xpZW50L3NyYy9wYWdlcy9zZXR0aW5ncy9idWctcmVwb3J0cy50c3gnKS5kZWZhdWx0O1xuXG4gICAgICByZW5kZXIoXG4gICAgICAgIDxUZXN0V3JhcHBlcj5cbiAgICAgICAgICA8QnVnUmVwb3J0UGFnZSAvPlxuICAgICAgICA8L1Rlc3RXcmFwcGVyPlxuICAgICAgKTtcblxuICAgICAgY29uc3QgcmVwb3J0QnV0dG9uID0gYXdhaXQgc2NyZWVuLmZpbmRCeVRlc3RJZCgnYnV0dG9uLXJlcG9ydC1idWcnKTtcbiAgICAgIGF3YWl0IHVzZXJFdmVudC5jbGljayhyZXBvcnRCdXR0b24pO1xuXG4gICAgICBjb25zdCBmaWxlQnV0dG9uID0gc2NyZWVuLmdldEJ5Um9sZSgnYnV0dG9uJywgeyBuYW1lOiAvYXR0YWNoIGZpbGVzL2kgfSk7XG4gICAgICBcbiAgICAgIC8vIENoZWNrIGFjY2Vzc2liaWxpdHkgYXR0cmlidXRlc1xuICAgICAgZXhwZWN0KGZpbGVCdXR0b24pLnRvSGF2ZUF0dHJpYnV0ZSgnYXJpYS1kZXNjcmliZWRieScpO1xuICAgICAgZXhwZWN0KGZpbGVCdXR0b24pLnRvSGF2ZUF0dHJpYnV0ZSgndGFiaW5kZXgnLCAnMCcpO1xuICAgICAgXG4gICAgICAvLyBDaGVjayBmb3Igc2NyZWVuIHJlYWRlciBzdXBwb3J0XG4gICAgICBjb25zdCBzclRleHQgPSBzY3JlZW4uZ2V0QnlUZXh0KC9zY3JlZW5zaG90cy4qZXJyb3IgbG9ncy4qY29uc29sZSBvdXRwdXRzL2kpO1xuICAgICAgZXhwZWN0KHNyVGV4dCkudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgcHJvdmlkZSBjbGVhciB1cGxvYWQgc3RhdHVzIGZlZWRiYWNrJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgQnVnUmVwb3J0UGFnZSA9IHJlcXVpcmUoJy4uLy4uL2NsaWVudC9zcmMvcGFnZXMvc2V0dGluZ3MvYnVnLXJlcG9ydHMudHN4JykuZGVmYXVsdDtcblxuICAgICAgY29uc3QgdXNlciA9IHVzZXJFdmVudC5zZXR1cCgpO1xuXG4gICAgICByZW5kZXIoXG4gICAgICAgIDxUZXN0V3JhcHBlcj5cbiAgICAgICAgICA8QnVnUmVwb3J0UGFnZSAvPlxuICAgICAgICA8L1Rlc3RXcmFwcGVyPlxuICAgICAgKTtcblxuICAgICAgY29uc3QgcmVwb3J0QnV0dG9uID0gYXdhaXQgc2NyZWVuLmZpbmRCeVRlc3RJZCgnYnV0dG9uLXJlcG9ydC1idWcnKTtcbiAgICAgIGF3YWl0IHVzZXIuY2xpY2socmVwb3J0QnV0dG9uKTtcblxuICAgICAgLy8gQWRkIHJlcXVpcmVkIGZpZWxkc1xuICAgICAgYXdhaXQgdXNlci50eXBlKHNjcmVlbi5nZXRCeUxhYmVsVGV4dCgvdGl0bGUvaSksICdBY2Nlc3NpYmlsaXR5IFRlc3QnKTtcbiAgICAgIGF3YWl0IHVzZXIudHlwZShzY3JlZW4uZ2V0QnlMYWJlbFRleHQoL2Rlc2NyaXB0aW9uL2kpLCAnVGVzdGluZyB1cGxvYWQgZmVlZGJhY2suJyk7XG4gICAgICBhd2FpdCB1c2VyLnR5cGUoc2NyZWVuLmdldEJ5TGFiZWxUZXh0KC9wYWdlL2kpLCAnVGVzdCBQYWdlJyk7XG5cbiAgICAgIC8vIEF0dGFjaCBmaWxlXG4gICAgICBjb25zdCBmaWxlQnV0dG9uID0gc2NyZWVuLmdldEJ5Um9sZSgnYnV0dG9uJywgeyBuYW1lOiAvYXR0YWNoIGZpbGVzL2kgfSk7XG4gICAgICBhd2FpdCB1c2VyLmNsaWNrKGZpbGVCdXR0b24pO1xuXG4gICAgICBjb25zdCBoaWRkZW5JbnB1dCA9IHNjcmVlbi5nZXRCeVJvbGUoJ2lucHV0JywgeyB0eXBlOiAnZmlsZScsIGhpZGRlbjogdHJ1ZSB9KTtcbiAgICAgIGNvbnN0IHRlc3RGaWxlID0gY3JlYXRlTW9ja0ZpbGUoJ3Rlc3QucG5nJywgMjUwMDAsICdpbWFnZS9wbmcnKTtcblxuICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGhpZGRlbklucHV0LCAnZmlsZXMnLCB7XG4gICAgICAgIHZhbHVlOiBbdGVzdEZpbGVdLFxuICAgICAgICB3cml0YWJsZTogZmFsc2UsXG4gICAgICB9KTtcblxuICAgICAgZmlyZUV2ZW50LmNoYW5nZShoaWRkZW5JbnB1dCwgeyB0YXJnZXQ6IHsgZmlsZXM6IFt0ZXN0RmlsZV0gfSB9KTtcblxuICAgICAgLy8gVmVyaWZ5IGZpbGUgc3RhdHVzIGRpc3BsYXlcbiAgICAgIGF3YWl0IHdhaXRGb3IoKCkgPT4ge1xuICAgICAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGV4dCgnU2VsZWN0ZWQgZmlsZXMgKDEpOicpKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgICAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGV4dCgndGVzdC5wbmcnKSkudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgICAgIH0pO1xuXG4gICAgICAvLyBTdWJtaXQgYW5kIGNoZWNrIGZvciBzdGF0dXMgdXBkYXRlc1xuICAgICAgY29uc3Qgc3VibWl0QnV0dG9uID0gc2NyZWVuLmdldEJ5Um9sZSgnYnV0dG9uJywgeyBuYW1lOiAvc3VibWl0L2kgfSk7XG4gICAgICBleHBlY3Qoc3VibWl0QnV0dG9uKS5ub3QudG9CZURpc2FibGVkKCk7XG5cbiAgICAgIGF3YWl0IHVzZXIuY2xpY2soc3VibWl0QnV0dG9uKTtcblxuICAgICAgLy8gQnV0dG9uIHNob3VsZCBzaG93IGxvYWRpbmcgc3RhdGVcbiAgICAgIGF3YWl0IHdhaXRGb3IoKCkgPT4ge1xuICAgICAgICBjb25zdCBsb2FkaW5nQnV0dG9uID0gc2NyZWVuLmdldEJ5Um9sZSgnYnV0dG9uJywgeyBuYW1lOiAvc3VibWl0dGluZ3x1cGxvYWRpbmcvaSB9KTtcbiAgICAgICAgZXhwZWN0KGxvYWRpbmdCdXR0b24pLnRvQmVEaXNhYmxlZCgpO1xuICAgICAgfSk7XG4gICAgfSk7XG4gIH0pO1xufSk7Il0sInZlcnNpb24iOjN9