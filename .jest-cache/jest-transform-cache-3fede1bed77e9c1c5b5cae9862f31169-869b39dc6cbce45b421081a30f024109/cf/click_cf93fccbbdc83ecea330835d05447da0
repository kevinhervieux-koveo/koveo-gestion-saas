f690ede10de1ead34f717d666cc2f4b7
'use strict';
var isElementType = require('../../utils/misc/isElementType.js');
require('../../utils/dataTransfer/Clipboard.js');
var getWindow = require('../../utils/misc/getWindow.js');
var isFocusable = require('../../utils/focus/isFocusable.js');
var cloneEvent = require('../../utils/misc/cloneEvent.js');
var focus = require('../focus.js');
var registry = require('./registry.js');
registry.behavior.click = (event, target, instance) => {
    const context = target.closest('button,input,label,select,textarea');
    const control = context && isElementType.isElementType(context, 'label') && context.control;
    if (control && control !== target) {
        return () => {
            if (isFocusable.isFocusable(control)) {
                focus.focusElement(control);
                instance.dispatchEvent(control, cloneEvent.cloneEvent(event));
            }
        };
    }
    else if (isElementType.isElementType(target, 'input', {
        type: 'file'
    })) {
        return () => {
            // blur fires when the file selector pops up
            focus.blurElement(target);
            target.dispatchEvent(new (getWindow.getWindow(target)).Event('fileDialog'));
            // focus fires after the file selector has been closed
            focus.focusElement(target);
        };
    }
};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiL2hvbWUvcnVubmVyL3dvcmtzcGFjZS9ub2RlX21vZHVsZXMvQHRlc3RpbmctbGlicmFyeS91c2VyLWV2ZW50L2Rpc3QvY2pzL2V2ZW50L2JlaGF2aW9yL2NsaWNrLmpzIiwibWFwcGluZ3MiOiJBQUFBLFlBQVksQ0FBQztBQUViLElBQUksYUFBYSxHQUFHLE9BQU8sQ0FBQyxtQ0FBbUMsQ0FBQyxDQUFDO0FBQ2pFLE9BQU8sQ0FBQyx1Q0FBdUMsQ0FBQyxDQUFDO0FBQ2pELElBQUksU0FBUyxHQUFHLE9BQU8sQ0FBQywrQkFBK0IsQ0FBQyxDQUFDO0FBQ3pELElBQUksV0FBVyxHQUFHLE9BQU8sQ0FBQyxrQ0FBa0MsQ0FBQyxDQUFDO0FBQzlELElBQUksVUFBVSxHQUFHLE9BQU8sQ0FBQyxnQ0FBZ0MsQ0FBQyxDQUFDO0FBQzNELElBQUksS0FBSyxHQUFHLE9BQU8sQ0FBQyxhQUFhLENBQUMsQ0FBQztBQUNuQyxJQUFJLFFBQVEsR0FBRyxPQUFPLENBQUMsZUFBZSxDQUFDLENBQUM7QUFFeEMsUUFBUSxDQUFDLFFBQVEsQ0FBQyxLQUFLLEdBQUcsQ0FBQyxLQUFLLEVBQUUsTUFBTSxFQUFFLFFBQVEsRUFBQyxFQUFFO0lBQ2pELE1BQU0sT0FBTyxHQUFHLE1BQU0sQ0FBQyxPQUFPLENBQUMsb0NBQW9DLENBQUMsQ0FBQztJQUNyRSxNQUFNLE9BQU8sR0FBRyxPQUFPLElBQUksYUFBYSxDQUFDLGFBQWEsQ0FBQyxPQUFPLEVBQUUsT0FBTyxDQUFDLElBQUksT0FBTyxDQUFDLE9BQU8sQ0FBQztJQUM1RixJQUFJLE9BQU8sSUFBSSxPQUFPLEtBQUssTUFBTSxFQUFFLENBQUM7UUFDaEMsT0FBTyxHQUFFLEVBQUU7WUFDUCxJQUFJLFdBQVcsQ0FBQyxXQUFXLENBQUMsT0FBTyxDQUFDLEVBQUUsQ0FBQztnQkFDbkMsS0FBSyxDQUFDLFlBQVksQ0FBQyxPQUFPLENBQUMsQ0FBQztnQkFDNUIsUUFBUSxDQUFDLGFBQWEsQ0FBQyxPQUFPLEVBQUUsVUFBVSxDQUFDLFVBQVUsQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDO1lBQ2xFLENBQUM7UUFDTCxDQUFDLENBQUM7SUFDTixDQUFDO1NBQU0sSUFBSSxhQUFhLENBQUMsYUFBYSxDQUFDLE1BQU0sRUFBRSxPQUFPLEVBQUU7UUFDcEQsSUFBSSxFQUFFLE1BQU07S0FDZixDQUFDLEVBQUUsQ0FBQztRQUNELE9BQU8sR0FBRSxFQUFFO1lBQ1AsNENBQTRDO1lBQzVDLEtBQUssQ0FBQyxXQUFXLENBQUMsTUFBTSxDQUFDLENBQUM7WUFDMUIsTUFBTSxDQUFDLGFBQWEsQ0FBQyxJQUFJLENBQUMsU0FBUyxDQUFDLFNBQVMsQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLEtBQUssQ0FBQyxZQUFZLENBQUMsQ0FBQyxDQUFDO1lBQzVFLHNEQUFzRDtZQUN0RCxLQUFLLENBQUMsWUFBWSxDQUFDLE1BQU0sQ0FBQyxDQUFDO1FBQy9CLENBQUMsQ0FBQztJQUNOLENBQUM7QUFDTCxDQUFDLENBQUMiLCJuYW1lcyI6W10sInNvdXJjZXMiOlsiL2hvbWUvcnVubmVyL3dvcmtzcGFjZS9ub2RlX21vZHVsZXMvQHRlc3RpbmctbGlicmFyeS91c2VyLWV2ZW50L2Rpc3QvY2pzL2V2ZW50L2JlaGF2aW9yL2NsaWNrLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIid1c2Ugc3RyaWN0JztcblxudmFyIGlzRWxlbWVudFR5cGUgPSByZXF1aXJlKCcuLi8uLi91dGlscy9taXNjL2lzRWxlbWVudFR5cGUuanMnKTtcbnJlcXVpcmUoJy4uLy4uL3V0aWxzL2RhdGFUcmFuc2Zlci9DbGlwYm9hcmQuanMnKTtcbnZhciBnZXRXaW5kb3cgPSByZXF1aXJlKCcuLi8uLi91dGlscy9taXNjL2dldFdpbmRvdy5qcycpO1xudmFyIGlzRm9jdXNhYmxlID0gcmVxdWlyZSgnLi4vLi4vdXRpbHMvZm9jdXMvaXNGb2N1c2FibGUuanMnKTtcbnZhciBjbG9uZUV2ZW50ID0gcmVxdWlyZSgnLi4vLi4vdXRpbHMvbWlzYy9jbG9uZUV2ZW50LmpzJyk7XG52YXIgZm9jdXMgPSByZXF1aXJlKCcuLi9mb2N1cy5qcycpO1xudmFyIHJlZ2lzdHJ5ID0gcmVxdWlyZSgnLi9yZWdpc3RyeS5qcycpO1xuXG5yZWdpc3RyeS5iZWhhdmlvci5jbGljayA9IChldmVudCwgdGFyZ2V0LCBpbnN0YW5jZSk9PntcbiAgICBjb25zdCBjb250ZXh0ID0gdGFyZ2V0LmNsb3Nlc3QoJ2J1dHRvbixpbnB1dCxsYWJlbCxzZWxlY3QsdGV4dGFyZWEnKTtcbiAgICBjb25zdCBjb250cm9sID0gY29udGV4dCAmJiBpc0VsZW1lbnRUeXBlLmlzRWxlbWVudFR5cGUoY29udGV4dCwgJ2xhYmVsJykgJiYgY29udGV4dC5jb250cm9sO1xuICAgIGlmIChjb250cm9sICYmIGNvbnRyb2wgIT09IHRhcmdldCkge1xuICAgICAgICByZXR1cm4gKCk9PntcbiAgICAgICAgICAgIGlmIChpc0ZvY3VzYWJsZS5pc0ZvY3VzYWJsZShjb250cm9sKSkge1xuICAgICAgICAgICAgICAgIGZvY3VzLmZvY3VzRWxlbWVudChjb250cm9sKTtcbiAgICAgICAgICAgICAgICBpbnN0YW5jZS5kaXNwYXRjaEV2ZW50KGNvbnRyb2wsIGNsb25lRXZlbnQuY2xvbmVFdmVudChldmVudCkpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgIH0gZWxzZSBpZiAoaXNFbGVtZW50VHlwZS5pc0VsZW1lbnRUeXBlKHRhcmdldCwgJ2lucHV0Jywge1xuICAgICAgICB0eXBlOiAnZmlsZSdcbiAgICB9KSkge1xuICAgICAgICByZXR1cm4gKCk9PntcbiAgICAgICAgICAgIC8vIGJsdXIgZmlyZXMgd2hlbiB0aGUgZmlsZSBzZWxlY3RvciBwb3BzIHVwXG4gICAgICAgICAgICBmb2N1cy5ibHVyRWxlbWVudCh0YXJnZXQpO1xuICAgICAgICAgICAgdGFyZ2V0LmRpc3BhdGNoRXZlbnQobmV3IChnZXRXaW5kb3cuZ2V0V2luZG93KHRhcmdldCkpLkV2ZW50KCdmaWxlRGlhbG9nJykpO1xuICAgICAgICAgICAgLy8gZm9jdXMgZmlyZXMgYWZ0ZXIgdGhlIGZpbGUgc2VsZWN0b3IgaGFzIGJlZW4gY2xvc2VkXG4gICAgICAgICAgICBmb2N1cy5mb2N1c0VsZW1lbnQodGFyZ2V0KTtcbiAgICAgICAgfTtcbiAgICB9XG59O1xuIl0sInZlcnNpb24iOjN9