512814c56281f82adf40fb2c8ed8bbbb
"use strict";
var __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {
    if (k2 === undefined) k2 = k;
    var desc = Object.getOwnPropertyDescriptor(m, k);
    if (!desc || ("get" in desc ? !m.__esModule : desc.writable || desc.configurable)) {
      desc = { enumerable: true, get: function() { return m[k]; } };
    }
    Object.defineProperty(o, k2, desc);
}) : (function(o, m, k, k2) {
    if (k2 === undefined) k2 = k;
    o[k2] = m[k];
}));
var __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {
    Object.defineProperty(o, "default", { enumerable: true, value: v });
}) : function(o, v) {
    o["default"] = v;
});
var __importStar = (this && this.__importStar) || (function () {
    var ownKeys = function(o) {
        ownKeys = Object.getOwnPropertyNames || function (o) {
            var ar = [];
            for (var k in o) if (Object.prototype.hasOwnProperty.call(o, k)) ar[ar.length] = k;
            return ar;
        };
        return ownKeys(o);
    };
    return function (mod) {
        if (mod && mod.__esModule) return mod;
        var result = {};
        if (mod != null) for (var k = ownKeys(mod), i = 0; i < k.length; i++) if (k[i] !== "default") __createBinding(result, mod, k[i]);
        __setModuleDefault(result, mod);
        return result;
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
exports.STATUS_OPTIONS = exports.SCHEDULE_OPTIONS = exports.PAYMENT_TYPES = exports.BILL_CATEGORIES = void 0;
exports.BillForm = BillForm;
const jsx_runtime_1 = require("react/jsx-runtime");
const react_1 = __importStar(require("react"));
const react_hook_form_1 = require("react-hook-form");
const zod_1 = require("@hookform/resolvers/zod");
const react_query_1 = require("@tanstack/react-query");
const zod_2 = require("zod");
const button_1 = require("@/components/ui/button");
const input_1 = require("@/components/ui/input");
const textarea_1 = require("@/components/ui/textarea");
const badge_1 = require("@/components/ui/badge");
const tabs_1 = require("@/components/ui/tabs");
const form_1 = require("@/components/ui/form");
const select_1 = require("@/components/ui/select");
const lucide_react_1 = require("lucide-react");
const use_language_1 = require("@/hooks/use-language");
const file_upload_1 = require("@/components/ui/file-upload");
// Unified form schema
const billFormSchema = zod_2.z.object({
    title: zod_2.z.string().min(1, 'Bill title is required (example: Monthly Electricity Bill)').max(200, 'Title must be less than 200 characters'),
    description: zod_2.z.string().max(1000, 'Description must be less than 1000 characters').optional(),
    category: zod_2.z.enum([
        'insurance',
        'maintenance',
        'salary',
        'utilities',
        'cleaning',
        'security',
        'landscaping',
        'professional_services',
        'administration',
        'repairs',
        'supplies',
        'taxes',
        'technology',
        'reserves',
        'other',
    ]),
    vendor: zod_2.z.string().max(150, 'Vendor name must be less than 150 characters').optional(),
    paymentType: zod_2.z.enum(['unique', 'recurrent']),
    schedulePayment: zod_2.z.enum(['weekly', 'monthly', 'quarterly', 'yearly', 'custom']).optional(),
    totalAmount: zod_2.z.string().min(1, 'Amount is required and must be a valid number (example: 1250.50)').refine((val) => {
        const num = parseFloat(val);
        return !isNaN(num) && num > 0 && num <= 999999.99;
    }, 'Amount must be between $0.01 and $999,999.99 (example: 1250.50)'),
    startDate: zod_2.z.string().min(1, 'Start date is required (example: 2025-01-15)').refine((val) => {
        return !isNaN(Date.parse(val));
    }, 'Start date must be a valid date (example: 2025-01-15)'),
    endDate: zod_2.z.string().optional().refine((val) => {
        if (!val)
            return true;
        return !isNaN(Date.parse(val));
    }, 'End date must be a valid date (example: 2025-12-31)'),
    status: zod_2.z.enum(['draft', 'sent', 'overdue', 'paid', 'cancelled']),
    notes: zod_2.z.string().max(2000, 'Notes must be less than 2000 characters').optional(),
});
// Bill category options - centralized list
exports.BILL_CATEGORIES = [
    { value: 'insurance', label: 'Insurance' },
    { value: 'maintenance', label: 'Maintenance' },
    { value: 'salary', label: 'Salary' },
    { value: 'utilities', label: 'Utilities' },
    { value: 'cleaning', label: 'Cleaning' },
    { value: 'security', label: 'Security' },
    { value: 'landscaping', label: 'Landscaping' },
    { value: 'professional_services', label: 'Professional Services' },
    { value: 'administration', label: 'Administration' },
    { value: 'repairs', label: 'Repairs' },
    { value: 'supplies', label: 'Supplies' },
    { value: 'taxes', label: 'Taxes' },
    { value: 'technology', label: 'Technology' },
    { value: 'reserves', label: 'Reserves' },
    { value: 'other', label: 'Other' },
];
// Payment type options
exports.PAYMENT_TYPES = [
    { value: 'unique', label: 'One-time Payment' },
    { value: 'recurrent', label: 'Recurring Payment' },
];
// Schedule options
exports.SCHEDULE_OPTIONS = [
    { value: 'weekly', label: 'Weekly' },
    { value: 'monthly', label: 'Monthly' },
    { value: 'quarterly', label: 'Quarterly' },
    { value: 'yearly', label: 'Yearly' },
];
// Status options
exports.STATUS_OPTIONS = [
    { value: 'draft', label: 'Draft' },
    { value: 'sent', label: 'Sent' },
    { value: 'overdue', label: 'Overdue' },
    { value: 'paid', label: 'Paid' },
    { value: 'cancelled', label: 'Cancelled' },
];
/**
 * Unified bill form component for creating and editing bills.
 * Supports both manual entry and AI document analysis for creation.
 * @param root0
 * @param root0.mode
 * @param root0.buildingId
 * @param root0.bill
 * @param root0.onSuccess
 * @param root0.onCancel
 */
function BillForm({ mode, buildingId, bill, onSuccess, onCancel }) {
    const { t } = (0, use_language_1.useLanguage)();
    const [activeTab, setActiveTab] = (0, react_1.useState)('manual');
    const [uploadedFile, setUploadedFile] = (0, react_1.useState)(null);
    const [aiAnalysisData, setAiAnalysisData] = (0, react_1.useState)(null);
    const [isAnalyzing, setIsAnalyzing] = (0, react_1.useState)(false);
    const [attachedFiles, setAttachedFiles] = (0, react_1.useState)([]);
    const queryClient = (0, react_query_1.useQueryClient)();
    // Form setup with default values based on mode
    const getDefaultValues = () => {
        if (mode === 'edit' && bill) {
            return {
                title: bill.title,
                description: bill.description || '',
                category: bill.category,
                vendor: bill.vendor || '',
                paymentType: bill.paymentType,
                schedulePayment: bill.schedulePayment || 'monthly',
                totalAmount: bill.totalAmount.toString(),
                startDate: bill.startDate,
                endDate: bill.endDate || '',
                status: bill.status,
                notes: bill.notes || '',
            };
        }
        // Default values for create mode
        return {
            title: '',
            description: '',
            category: 'other',
            vendor: '',
            paymentType: 'unique',
            schedulePayment: 'monthly',
            totalAmount: '',
            startDate: new Date().toISOString().split('T')[0],
            endDate: '',
            status: 'draft',
            notes: '',
        };
    };
    const form = (0, react_hook_form_1.useForm)({
        resolver: (0, zod_1.zodResolver)(billFormSchema),
        defaultValues: getDefaultValues(),
    });
    // Update form when bill changes (for edit mode)
    (0, react_1.useEffect)(() => {
        if (mode === 'edit' && bill) {
            form.reset(getDefaultValues());
        }
    }, [mode, bill]);
    // Main mutation for create/update
    const submitMutation = (0, react_query_1.useMutation)({
        mutationFn: async (billData) => {
            const url = mode === 'create' ? '/api/bills' : `/api/bills/${bill?.id}`;
            const method = mode === 'create' ? 'POST' : 'PATCH';
            const payload = {
                ...billData,
                costs: [parseFloat(billData.totalAmount)],
                ...(mode === 'create' && { buildingId }),
            };
            const response = await fetch(url, {
                method,
                headers: {
                    'Content-Type': 'application/json',
                },
                credentials: 'include',
                body: JSON.stringify(payload),
            });
            if (!response.ok) {
                throw new Error(`Failed to ${mode} bill`);
            }
            return response.json();
        },
        onSuccess: () => {
            queryClient.invalidateQueries({ queryKey: ['/api/bills'] });
            onSuccess();
        },
    });
    // AI analysis mutation (only for create mode)
    const uploadAndAnalyzeMutation = (0, react_query_1.useMutation)({
        mutationFn: async (file) => {
            setIsAnalyzing(true);
            // First create a draft bill
            const createResponse = await fetch('/api/bills', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                },
                credentials: 'include',
                body: JSON.stringify({
                    buildingId,
                    title: 'AI Analysis Draft',
                    category: 'other',
                    paymentType: 'unique',
                    totalAmount: 0,
                    costs: [0],
                    startDate: new Date().toISOString().split('T')[0],
                    status: 'draft',
                    notes: 'Draft bill created for AI analysis',
                }),
            });
            if (!createResponse.ok) {
                throw new Error('Failed to create draft bill');
            }
            const draftBill = await createResponse.json();
            // Upload and analyze the document
            const formData = new FormData();
            formData.append('document', file);
            const uploadResponse = await fetch(`/api/bills/${draftBill.bill.id}/upload-document`, {
                method: 'POST',
                credentials: 'include',
                body: formData,
            });
            if (!uploadResponse.ok) {
                throw new Error('Failed to upload and analyze document');
            }
            const result = await uploadResponse.json();
            return { ...result, billId: draftBill.bill.id };
        },
        onSuccess: (data) => {
            setIsAnalyzing(false);
            setAiAnalysisData(data.analysisResult);
            setActiveTab('manual'); // Switch to manual tab to show populated form
        },
        onError: () => {
            setIsAnalyzing(false);
        },
    });
    // Event handlers
    const handleFileUpload = (event) => {
        const file = event.target.files?.[0];
        if (file && mode === 'create') {
            setUploadedFile(file);
            uploadAndAnalyzeMutation.mutate(file);
        }
    };
    const applyAiAnalysis = () => {
        if (aiAnalysisData) {
            form.setValue('title', aiAnalysisData.title);
            form.setValue('vendor', aiAnalysisData.vendor || '');
            form.setValue('category', aiAnalysisData.category);
            form.setValue('totalAmount', aiAnalysisData.totalAmount);
            form.setValue('description', aiAnalysisData.description || '');
            if (aiAnalysisData.issueDate) {
                form.setValue('startDate', aiAnalysisData.issueDate);
            }
            const notes = `AI-analyzed document. Original bill number: ${aiAnalysisData.billNumber || 'N/A'}. Confidence: ${(aiAnalysisData.confidence * 100).toFixed(1)}%.`;
            form.setValue('notes', notes);
        }
    };
    const onSubmit = (values) => {
        submitMutation.mutate(values);
        // TODO: Handle attached files upload after bill creation
    };
    // Handle file attachments
    const handleFilesSelect = (0, react_1.useCallback)((files) => {
        setAttachedFiles(prev => [...prev, ...files]);
    }, []);
    const handleFileRemove = (0, react_1.useCallback)((fileIndex) => {
        setAttachedFiles(prev => prev.filter((_, index) => index !== fileIndex));
    }, []);
    const renderFormFields = () => ((0, jsx_runtime_1.jsxs)(jsx_runtime_1.Fragment, { children: [(0, jsx_runtime_1.jsxs)("div", { className: 'grid grid-cols-2 gap-4', children: [(0, jsx_runtime_1.jsx)(form_1.FormField, { control: form.control, name: 'title', render: ({ field }) => ((0, jsx_runtime_1.jsxs)(form_1.FormItem, { children: [(0, jsx_runtime_1.jsxs)(form_1.FormLabel, { children: [t('title'), " *"] }), (0, jsx_runtime_1.jsx)(form_1.FormControl, { children: (0, jsx_runtime_1.jsx)(input_1.Input, { ...field, placeholder: t('billTitle'), "data-testid": 'input-title' }) }), (0, jsx_runtime_1.jsx)(form_1.FormMessage, {})] })) }), (0, jsx_runtime_1.jsx)(form_1.FormField, { control: form.control, name: 'vendor', render: ({ field }) => ((0, jsx_runtime_1.jsxs)(form_1.FormItem, { children: [(0, jsx_runtime_1.jsx)(form_1.FormLabel, { children: t('vendor') }), (0, jsx_runtime_1.jsx)(form_1.FormControl, { children: (0, jsx_runtime_1.jsx)(input_1.Input, { ...field, placeholder: t('companyOrServiceProvider'), "data-testid": 'input-vendor' }) }), (0, jsx_runtime_1.jsx)(form_1.FormMessage, {})] })) }), (0, jsx_runtime_1.jsx)(form_1.FormField, { control: form.control, name: 'category', render: ({ field }) => ((0, jsx_runtime_1.jsxs)(form_1.FormItem, { children: [(0, jsx_runtime_1.jsxs)(form_1.FormLabel, { children: [t('category'), " *"] }), (0, jsx_runtime_1.jsxs)(select_1.Select, { onValueChange: field.onChange, value: field.value, children: [(0, jsx_runtime_1.jsx)(form_1.FormControl, { children: (0, jsx_runtime_1.jsx)(select_1.SelectTrigger, { "data-testid": 'select-category', children: (0, jsx_runtime_1.jsx)(select_1.SelectValue, { placeholder: t('selectCategory') }) }) }), (0, jsx_runtime_1.jsx)(select_1.SelectContent, { children: exports.BILL_CATEGORIES.map((category) => ((0, jsx_runtime_1.jsx)(select_1.SelectItem, { value: category.value, children: category.label }, category.value))) })] }), (0, jsx_runtime_1.jsx)(form_1.FormMessage, {})] })) }), (0, jsx_runtime_1.jsx)(form_1.FormField, { control: form.control, name: 'totalAmount', render: ({ field }) => ((0, jsx_runtime_1.jsxs)(form_1.FormItem, { children: [(0, jsx_runtime_1.jsx)(form_1.FormLabel, { children: "Total Amount *" }), (0, jsx_runtime_1.jsx)(form_1.FormControl, { children: (0, jsx_runtime_1.jsx)(input_1.Input, { ...field, type: 'number', step: '0.01', placeholder: '0.00', "data-testid": 'input-amount' }) }), (0, jsx_runtime_1.jsx)(form_1.FormMessage, {})] })) }), (0, jsx_runtime_1.jsx)(form_1.FormField, { control: form.control, name: 'paymentType', render: ({ field }) => ((0, jsx_runtime_1.jsxs)(form_1.FormItem, { children: [(0, jsx_runtime_1.jsx)(form_1.FormLabel, { children: "Payment Type *" }), (0, jsx_runtime_1.jsxs)(select_1.Select, { onValueChange: field.onChange, value: field.value, children: [(0, jsx_runtime_1.jsx)(form_1.FormControl, { children: (0, jsx_runtime_1.jsx)(select_1.SelectTrigger, { "data-testid": 'select-payment-type', children: (0, jsx_runtime_1.jsx)(select_1.SelectValue, { placeholder: 'Select payment type' }) }) }), (0, jsx_runtime_1.jsx)(select_1.SelectContent, { children: exports.PAYMENT_TYPES.map((type) => ((0, jsx_runtime_1.jsx)(select_1.SelectItem, { value: type.value, children: type.label }, type.value))) })] }), (0, jsx_runtime_1.jsx)(form_1.FormMessage, {})] })) }), form.watch('paymentType') === 'recurrent' && ((0, jsx_runtime_1.jsx)(form_1.FormField, { control: form.control, name: 'schedulePayment', render: ({ field }) => ((0, jsx_runtime_1.jsxs)(form_1.FormItem, { children: [(0, jsx_runtime_1.jsx)(form_1.FormLabel, { children: "Schedule *" }), (0, jsx_runtime_1.jsxs)(select_1.Select, { onValueChange: field.onChange, value: field.value, children: [(0, jsx_runtime_1.jsx)(form_1.FormControl, { children: (0, jsx_runtime_1.jsx)(select_1.SelectTrigger, { "data-testid": 'select-schedule', children: (0, jsx_runtime_1.jsx)(select_1.SelectValue, { placeholder: 'Select schedule' }) }) }), (0, jsx_runtime_1.jsx)(select_1.SelectContent, { children: exports.SCHEDULE_OPTIONS.map((option) => ((0, jsx_runtime_1.jsx)(select_1.SelectItem, { value: option.value, children: option.label }, option.value))) })] }), (0, jsx_runtime_1.jsx)(form_1.FormMessage, {})] })) })), (0, jsx_runtime_1.jsx)(form_1.FormField, { control: form.control, name: 'startDate', render: ({ field }) => ((0, jsx_runtime_1.jsxs)(form_1.FormItem, { children: [(0, jsx_runtime_1.jsx)(form_1.FormLabel, { children: "Start Date *" }), (0, jsx_runtime_1.jsx)(form_1.FormControl, { children: (0, jsx_runtime_1.jsx)(input_1.Input, { ...field, type: 'date', "data-testid": 'input-start-date' }) }), (0, jsx_runtime_1.jsx)(form_1.FormMessage, {})] })) }), form.watch('paymentType') === 'recurrent' && ((0, jsx_runtime_1.jsx)(form_1.FormField, { control: form.control, name: 'endDate', render: ({ field }) => ((0, jsx_runtime_1.jsxs)(form_1.FormItem, { children: [(0, jsx_runtime_1.jsx)(form_1.FormLabel, { children: "End Date (Optional)" }), (0, jsx_runtime_1.jsx)(form_1.FormControl, { children: (0, jsx_runtime_1.jsx)(input_1.Input, { ...field, type: 'date', "data-testid": 'input-end-date' }) }), (0, jsx_runtime_1.jsx)(form_1.FormMessage, {})] })) })), (0, jsx_runtime_1.jsx)(form_1.FormField, { control: form.control, name: 'status', render: ({ field }) => ((0, jsx_runtime_1.jsxs)(form_1.FormItem, { children: [(0, jsx_runtime_1.jsx)(form_1.FormLabel, { children: "Status *" }), (0, jsx_runtime_1.jsxs)(select_1.Select, { onValueChange: field.onChange, value: field.value, children: [(0, jsx_runtime_1.jsx)(form_1.FormControl, { children: (0, jsx_runtime_1.jsx)(select_1.SelectTrigger, { "data-testid": 'select-status', children: (0, jsx_runtime_1.jsx)(select_1.SelectValue, { placeholder: 'Select status' }) }) }), (0, jsx_runtime_1.jsx)(select_1.SelectContent, { children: exports.STATUS_OPTIONS.map((status) => ((0, jsx_runtime_1.jsx)(select_1.SelectItem, { value: status.value, children: status.label }, status.value))) })] }), (0, jsx_runtime_1.jsx)(form_1.FormMessage, {})] })) })] }), (0, jsx_runtime_1.jsx)(form_1.FormField, { control: form.control, name: 'description', render: ({ field }) => ((0, jsx_runtime_1.jsxs)(form_1.FormItem, { children: [(0, jsx_runtime_1.jsx)(form_1.FormLabel, { children: "Description" }), (0, jsx_runtime_1.jsx)(form_1.FormControl, { children: (0, jsx_runtime_1.jsx)(textarea_1.Textarea, { ...field, placeholder: 'Bill description...', rows: 3, "data-testid": 'textarea-description' }) }), (0, jsx_runtime_1.jsx)(form_1.FormMessage, {})] })) }), (0, jsx_runtime_1.jsx)(form_1.FormField, { control: form.control, name: 'notes', render: ({ field }) => ((0, jsx_runtime_1.jsxs)(form_1.FormItem, { children: [(0, jsx_runtime_1.jsx)(form_1.FormLabel, { children: "Notes" }), (0, jsx_runtime_1.jsx)(form_1.FormControl, { children: (0, jsx_runtime_1.jsx)(textarea_1.Textarea, { ...field, placeholder: 'Additional notes...', rows: 3, "data-testid": 'textarea-notes' }) }), (0, jsx_runtime_1.jsx)(form_1.FormMessage, {})] })) }), (0, jsx_runtime_1.jsxs)("div", { className: "space-y-3", children: [(0, jsx_runtime_1.jsxs)("div", { className: "flex items-center gap-2", children: [(0, jsx_runtime_1.jsx)(lucide_react_1.Paperclip, { className: "w-4 h-4 text-gray-500" }), (0, jsx_runtime_1.jsx)("label", { className: "text-sm font-medium text-gray-700", children: "Attachments" }), (0, jsx_runtime_1.jsx)("span", { className: "text-xs text-gray-500", children: "(Optional - Screenshots, receipts, supporting documents)" })] }), (0, jsx_runtime_1.jsx)(file_upload_1.FileUpload, { onFilesSelect: handleFilesSelect, onFilesRemove: handleFileRemove, maxFiles: 5, maxSize: 10, acceptedTypes: ['image/*', '.pdf', '.doc', '.docx', '.txt'], allowPaste: true, className: "border border-gray-200 rounded-lg p-4", "data-testid": "bill-file-upload", children: (0, jsx_runtime_1.jsxs)("div", { className: "text-center py-6", children: [(0, jsx_runtime_1.jsx)(lucide_react_1.Upload, { className: "mx-auto h-8 w-8 text-gray-400 mb-2" }), (0, jsx_runtime_1.jsx)("p", { className: "text-sm text-gray-600", children: "Drop files here, click to browse, or paste screenshots" }), (0, jsx_runtime_1.jsx)("p", { className: "text-xs text-gray-500 mt-1", children: "Attach receipts, screenshots, or supporting documents" })] }) })] })] }));
    // For edit mode, render simple form
    if (mode === 'edit') {
        return ((0, jsx_runtime_1.jsx)(form_1.Form, { ...form, children: (0, jsx_runtime_1.jsxs)("form", { onSubmit: form.handleSubmit(onSubmit), className: 'space-y-6 pt-4 border-t', children: [renderFormFields(), (0, jsx_runtime_1.jsxs)("div", { className: 'flex justify-end gap-2 pt-4 border-t', children: [onCancel && ((0, jsx_runtime_1.jsx)(button_1.Button, { type: 'button', variant: 'outline', onClick: onCancel, "data-testid": 'button-cancel', children: "Cancel" })), (0, jsx_runtime_1.jsx)(button_1.Button, { type: 'submit', disabled: submitMutation.isPending, "data-testid": 'button-update', children: submitMutation.isPending ? 'Updating...' : 'Update Bill' })] })] }) }));
    }
    // For create mode, render with tabs (manual + AI upload)
    return ((0, jsx_runtime_1.jsx)("div", { className: 'space-y-6', children: (0, jsx_runtime_1.jsxs)(tabs_1.Tabs, { value: activeTab, onValueChange: setActiveTab, className: 'w-full', children: [(0, jsx_runtime_1.jsxs)(tabs_1.TabsList, { className: 'grid w-full grid-cols-2', children: [(0, jsx_runtime_1.jsxs)(tabs_1.TabsTrigger, { value: 'manual', className: 'flex items-center gap-2', "data-testid": 'tab-manual', children: [(0, jsx_runtime_1.jsx)(lucide_react_1.FileText, { className: 'w-4 h-4' }), "Create Manually"] }), (0, jsx_runtime_1.jsxs)(tabs_1.TabsTrigger, { value: 'upload', className: 'flex items-center gap-2', "data-testid": 'tab-upload', children: [(0, jsx_runtime_1.jsx)(lucide_react_1.Upload, { className: 'w-4 h-4' }), "Upload & Analyze"] })] }), (0, jsx_runtime_1.jsx)(tabs_1.TabsContent, { value: 'upload', className: 'space-y-4', children: (0, jsx_runtime_1.jsxs)("div", { className: 'p-6 text-center border-2 border-dashed border-gray-200 rounded-lg', children: [(0, jsx_runtime_1.jsx)(lucide_react_1.Upload, { className: 'w-12 h-12 mx-auto text-gray-400 mb-4' }), (0, jsx_runtime_1.jsx)("h3", { className: 'text-lg font-semibold mb-2', children: "Upload Bill Document" }), (0, jsx_runtime_1.jsx)("p", { className: 'text-gray-600 mb-4', children: "Upload an image or PDF of your bill for AI analysis" }), (0, jsx_runtime_1.jsx)(input_1.Input, { type: 'file', accept: 'image/*,.pdf', onChange: handleFileUpload, disabled: isAnalyzing, className: 'max-w-sm mx-auto', "data-testid": 'input-file-upload' }), isAnalyzing && ((0, jsx_runtime_1.jsxs)("div", { className: 'mt-4 flex items-center justify-center gap-2', "data-testid": 'loading-analysis', children: [(0, jsx_runtime_1.jsx)("div", { className: 'animate-spin w-5 h-5 border-2 border-blue-500 border-t-transparent rounded-full' }), (0, jsx_runtime_1.jsx)("span", { className: 'text-sm text-gray-600', children: "Analyzing document with AI..." })] })), aiAnalysisData && ((0, jsx_runtime_1.jsxs)("div", { className: 'mt-4 p-4 bg-blue-50 rounded-lg', "data-testid": 'ai-analysis-result', children: [(0, jsx_runtime_1.jsxs)("div", { className: 'flex items-center gap-2 mb-2', children: [(0, jsx_runtime_1.jsx)(lucide_react_1.Sparkles, { className: 'w-5 h-5 text-blue-600' }), (0, jsx_runtime_1.jsx)("span", { className: 'font-medium text-blue-800', children: "AI Analysis Complete" }), (0, jsx_runtime_1.jsxs)(badge_1.Badge, { variant: 'outline', className: 'text-xs', children: [(aiAnalysisData.confidence * 100).toFixed(1), "% confidence"] })] }), (0, jsx_runtime_1.jsxs)("div", { className: 'text-sm text-blue-700 space-y-1', children: [(0, jsx_runtime_1.jsxs)("p", { children: [(0, jsx_runtime_1.jsx)("strong", { children: "Title:" }), " ", aiAnalysisData.title] }), (0, jsx_runtime_1.jsxs)("p", { children: [(0, jsx_runtime_1.jsx)("strong", { children: "Vendor:" }), " ", aiAnalysisData.vendor] }), (0, jsx_runtime_1.jsxs)("p", { children: [(0, jsx_runtime_1.jsx)("strong", { children: "Amount:" }), " $", aiAnalysisData.totalAmount] }), (0, jsx_runtime_1.jsxs)("p", { children: [(0, jsx_runtime_1.jsx)("strong", { children: "Category:" }), " ", aiAnalysisData.category] })] }), (0, jsx_runtime_1.jsx)(button_1.Button, { onClick: applyAiAnalysis, className: 'mt-3 w-full', size: 'sm', "data-testid": 'button-apply-ai', children: "Apply to Form" })] }))] }) }), (0, jsx_runtime_1.jsx)(tabs_1.TabsContent, { value: 'manual', className: 'space-y-4', children: (0, jsx_runtime_1.jsx)(form_1.Form, { ...form, children: (0, jsx_runtime_1.jsxs)("form", { onSubmit: form.handleSubmit(onSubmit), className: 'space-y-6', children: [renderFormFields(), aiAnalysisData && ((0, jsx_runtime_1.jsxs)("div", { className: 'p-4 bg-blue-50 rounded-lg border border-blue-200', "data-testid": 'ai-info-badge', children: [(0, jsx_runtime_1.jsxs)("div", { className: 'flex items-center gap-2 mb-2', children: [(0, jsx_runtime_1.jsx)(lucide_react_1.Sparkles, { className: 'w-4 h-4 text-blue-600' }), (0, jsx_runtime_1.jsx)("span", { className: 'text-sm font-medium text-blue-800', children: "Form populated from AI analysis" }), (0, jsx_runtime_1.jsxs)(badge_1.Badge, { variant: 'outline', className: 'text-xs', children: [(aiAnalysisData.confidence * 100).toFixed(1), "% confidence"] })] }), (0, jsx_runtime_1.jsx)("p", { className: 'text-xs text-blue-600', children: "Review and modify the form as needed before creating the bill." })] })), (0, jsx_runtime_1.jsx)("div", { className: 'flex justify-end gap-2 pt-4 border-t', children: (0, jsx_runtime_1.jsx)(button_1.Button, { type: 'submit', disabled: submitMutation.isPending, className: 'min-w-[120px]', "data-testid": 'button-create', children: submitMutation.isPending ? 'Creating...' : 'Create Bill' }) })] }) }) })] }) }));
}
exports.default = BillForm;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiL2hvbWUvcnVubmVyL3dvcmtzcGFjZS9jbGllbnQvc3JjL2NvbXBvbmVudHMvY29tbW9uL0JpbGxGb3JtLnRzeCIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUF5SkEsNEJBZ21CQzs7QUF6dkJELCtDQUFnRTtBQUNoRSxxREFBMEM7QUFDMUMsaURBQXNEO0FBQ3RELHVEQUFvRTtBQUNwRSw2QkFBd0I7QUFDeEIsbURBQWdEO0FBQ2hELGlEQUE4QztBQUM5Qyx1REFBb0Q7QUFDcEQsaURBQThDO0FBQzlDLCtDQUFnRjtBQUNoRiwrQ0FPOEI7QUFDOUIsbURBTWdDO0FBQ2hDLCtDQUFxRTtBQUNyRSx1REFBbUQ7QUFFbkQsNkRBQXlEO0FBRXpELHNCQUFzQjtBQUN0QixNQUFNLGNBQWMsR0FBRyxPQUFDLENBQUMsTUFBTSxDQUFDO0lBQzlCLEtBQUssRUFBRSxPQUFDLENBQUMsTUFBTSxFQUFFLENBQUMsR0FBRyxDQUFDLENBQUMsRUFBRSw0REFBNEQsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxHQUFHLEVBQUUsd0NBQXdDLENBQUM7SUFDekksV0FBVyxFQUFFLE9BQUMsQ0FBQyxNQUFNLEVBQUUsQ0FBQyxHQUFHLENBQUMsSUFBSSxFQUFFLCtDQUErQyxDQUFDLENBQUMsUUFBUSxFQUFFO0lBQzdGLFFBQVEsRUFBRSxPQUFDLENBQUMsSUFBSSxDQUFDO1FBQ2YsV0FBVztRQUNYLGFBQWE7UUFDYixRQUFRO1FBQ1IsV0FBVztRQUNYLFVBQVU7UUFDVixVQUFVO1FBQ1YsYUFBYTtRQUNiLHVCQUF1QjtRQUN2QixnQkFBZ0I7UUFDaEIsU0FBUztRQUNULFVBQVU7UUFDVixPQUFPO1FBQ1AsWUFBWTtRQUNaLFVBQVU7UUFDVixPQUFPO0tBQ1IsQ0FBQztJQUNGLE1BQU0sRUFBRSxPQUFDLENBQUMsTUFBTSxFQUFFLENBQUMsR0FBRyxDQUFDLEdBQUcsRUFBRSw4Q0FBOEMsQ0FBQyxDQUFDLFFBQVEsRUFBRTtJQUN0RixXQUFXLEVBQUUsT0FBQyxDQUFD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IjpbXSwic291cmNlcyI6WyIvaG9tZS9ydW5uZXIvd29ya3NwYWNlL2NsaWVudC9zcmMvY29tcG9uZW50cy9jb21tb24vQmlsbEZvcm0udHN4Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBSZWFjdCwgeyB1c2VTdGF0ZSwgdXNlRWZmZWN0LCB1c2VDYWxsYmFjayB9IGZyb20gJ3JlYWN0JztcbmltcG9ydCB7IHVzZUZvcm0gfSBmcm9tICdyZWFjdC1ob29rLWZvcm0nO1xuaW1wb3J0IHsgem9kUmVzb2x2ZXIgfSBmcm9tICdAaG9va2Zvcm0vcmVzb2x2ZXJzL3pvZCc7XG5pbXBvcnQgeyB1c2VNdXRhdGlvbiwgdXNlUXVlcnlDbGllbnQgfSBmcm9tICdAdGFuc3RhY2svcmVhY3QtcXVlcnknO1xuaW1wb3J0IHsgeiB9IGZyb20gJ3pvZCc7XG5pbXBvcnQgeyBCdXR0b24gfSBmcm9tICdAL2NvbXBvbmVudHMvdWkvYnV0dG9uJztcbmltcG9ydCB7IElucHV0IH0gZnJvbSAnQC9jb21wb25lbnRzL3VpL2lucHV0JztcbmltcG9ydCB7IFRleHRhcmVhIH0gZnJvbSAnQC9jb21wb25lbnRzL3VpL3RleHRhcmVhJztcbmltcG9ydCB7IEJhZGdlIH0gZnJvbSAnQC9jb21wb25lbnRzL3VpL2JhZGdlJztcbmltcG9ydCB7IFRhYnMsIFRhYnNDb250ZW50LCBUYWJzTGlzdCwgVGFic1RyaWdnZXIgfSBmcm9tICdAL2NvbXBvbmVudHMvdWkvdGFicyc7XG5pbXBvcnQge1xuICBGb3JtLFxuICBGb3JtQ29udHJvbCxcbiAgRm9ybUZpZWxkLFxuICBGb3JtSXRlbSxcbiAgRm9ybUxhYmVsLFxuICBGb3JtTWVzc2FnZSxcbn0gZnJvbSAnQC9jb21wb25lbnRzL3VpL2Zvcm0nO1xuaW1wb3J0IHtcbiAgU2VsZWN0LFxuICBTZWxlY3RDb250ZW50LFxuICBTZWxlY3RJdGVtLFxuICBTZWxlY3RUcmlnZ2VyLFxuICBTZWxlY3RWYWx1ZSxcbn0gZnJvbSAnQC9jb21wb25lbnRzL3VpL3NlbGVjdCc7XG5pbXBvcnQgeyBGaWxlVGV4dCwgVXBsb2FkLCBTcGFya2xlcywgUGFwZXJjbGlwIH0gZnJvbSAnbHVjaWRlLXJlYWN0JztcbmltcG9ydCB7IHVzZUxhbmd1YWdlIH0gZnJvbSAnQC9ob29rcy91c2UtbGFuZ3VhZ2UnO1xuaW1wb3J0IHR5cGUgeyBCaWxsIH0gZnJvbSAnQHNoYXJlZC9zY2hlbWEnO1xuaW1wb3J0IHsgRmlsZVVwbG9hZCB9IGZyb20gJ0AvY29tcG9uZW50cy91aS9maWxlLXVwbG9hZCc7XG5cbi8vIFVuaWZpZWQgZm9ybSBzY2hlbWFcbmNvbnN0IGJpbGxGb3JtU2NoZW1hID0gei5vYmplY3Qoe1xuICB0aXRsZTogei5zdHJpbmcoKS5taW4oMSwgJ0JpbGwgdGl0bGUgaXMgcmVxdWlyZWQgKGV4YW1wbGU6IE1vbnRobHkgRWxlY3RyaWNpdHkgQmlsbCknKS5tYXgoMjAwLCAnVGl0bGUgbXVzdCBiZSBsZXNzIHRoYW4gMjAwIGNoYXJhY3RlcnMnKSxcbiAgZGVzY3JpcHRpb246IHouc3RyaW5nKCkubWF4KDEwMDAsICdEZXNjcmlwdGlvbiBtdXN0IGJlIGxlc3MgdGhhbiAxMDAwIGNoYXJhY3RlcnMnKS5vcHRpb25hbCgpLFxuICBjYXRlZ29yeTogei5lbnVtKFtcbiAgICAnaW5zdXJhbmNlJyxcbiAgICAnbWFpbnRlbmFuY2UnLFxuICAgICdzYWxhcnknLFxuICAgICd1dGlsaXRpZXMnLFxuICAgICdjbGVhbmluZycsXG4gICAgJ3NlY3VyaXR5JyxcbiAgICAnbGFuZHNjYXBpbmcnLFxuICAgICdwcm9mZXNzaW9uYWxfc2VydmljZXMnLFxuICAgICdhZG1pbmlzdHJhdGlvbicsXG4gICAgJ3JlcGFpcnMnLFxuICAgICdzdXBwbGllcycsXG4gICAgJ3RheGVzJyxcbiAgICAndGVjaG5vbG9neScsXG4gICAgJ3Jlc2VydmVzJyxcbiAgICAnb3RoZXInLFxuICBdKSxcbiAgdmVuZG9yOiB6LnN0cmluZygpLm1heCgxNTAsICdWZW5kb3IgbmFtZSBtdXN0IGJlIGxlc3MgdGhhbiAxNTAgY2hhcmFjdGVycycpLm9wdGlvbmFsKCksXG4gIHBheW1lbnRUeXBlOiB6LmVudW0oWyd1bmlxdWUnLCAncmVjdXJyZW50J10pLFxuICBzY2hlZHVsZVBheW1lbnQ6IHouZW51bShbJ3dlZWtseScsICdtb250aGx5JywgJ3F1YXJ0ZXJseScsICd5ZWFybHknLCAnY3VzdG9tJ10pLm9wdGlvbmFsKCksXG4gIHRvdGFsQW1vdW50OiB6LnN0cmluZygpLm1pbigxLCAnQW1vdW50IGlzIHJlcXVpcmVkIGFuZCBtdXN0IGJlIGEgdmFsaWQgbnVtYmVyIChleGFtcGxlOiAxMjUwLjUwKScpLnJlZmluZSgodmFsKSA9PiB7XG4gICAgY29uc3QgbnVtID0gcGFyc2VGbG9hdCh2YWwpO1xuICAgIHJldHVybiAhaXNOYU4obnVtKSAmJiBudW0gPiAwICYmIG51bSA8PSA5OTk5OTkuOTk7XG4gIH0sICdBbW91bnQgbXVzdCBiZSBiZXR3ZWVuICQwLjAxIGFuZCAkOTk5LDk5OS45OSAoZXhhbXBsZTogMTI1MC41MCknKSxcbiAgc3RhcnREYXRlOiB6LnN0cmluZygpLm1pbigxLCAnU3RhcnQgZGF0ZSBpcyByZXF1aXJlZCAoZXhhbXBsZTogMjAyNS0wMS0xNSknKS5yZWZpbmUoKHZhbCkgPT4ge1xuICAgIHJldHVybiAhaXNOYU4oRGF0ZS5wYXJzZSh2YWwpKTtcbiAgfSwgJ1N0YXJ0IGRhdGUgbXVzdCBiZSBhIHZhbGlkIGRhdGUgKGV4YW1wbGU6IDIwMjUtMDEtMTUpJyksXG4gIGVuZERhdGU6IHouc3RyaW5nKCkub3B0aW9uYWwoKS5yZWZpbmUoKHZhbCkgPT4ge1xuICAgIGlmICghdmFsKSByZXR1cm4gdHJ1ZTtcbiAgICByZXR1cm4gIWlzTmFOKERhdGUucGFyc2UodmFsKSk7XG4gIH0sICdFbmQgZGF0ZSBtdXN0IGJlIGEgdmFsaWQgZGF0ZSAoZXhhbXBsZTogMjAyNS0xMi0zMSknKSxcbiAgc3RhdHVzOiB6LmVudW0oWydkcmFmdCcsICdzZW50JywgJ292ZXJkdWUnLCAncGFpZCcsICdjYW5jZWxsZWQnXSksXG4gIG5vdGVzOiB6LnN0cmluZygpLm1heCgyMDAwLCAnTm90ZXMgbXVzdCBiZSBsZXNzIHRoYW4gMjAwMCBjaGFyYWN0ZXJzJykub3B0aW9uYWwoKSxcbn0pO1xuXG4vKipcbiAqXG4gKi9cbnR5cGUgQmlsbEZvcm1EYXRhID0gei5pbmZlcjx0eXBlb2YgYmlsbEZvcm1TY2hlbWE+O1xuXG4vLyBBSSBhbmFseXNpcyByZXN1bHQgaW50ZXJmYWNlXG4vKipcbiAqXG4gKi9cbmludGVyZmFjZSBBaUFuYWx5c2lzUmVzdWx0IHtcbiAgdGl0bGU6IHN0cmluZztcbiAgdmVuZG9yPzogc3RyaW5nO1xuICBjYXRlZ29yeTogQmlsbEZvcm1EYXRhWydjYXRlZ29yeSddO1xuICB0b3RhbEFtb3VudDogc3RyaW5nO1xuICBkZXNjcmlwdGlvbj86IHN0cmluZztcbiAgaXNzdWVEYXRlPzogc3RyaW5nO1xuICBiaWxsTnVtYmVyPzogc3RyaW5nO1xuICBjb25maWRlbmNlOiBudW1iZXI7XG59XG5cbi8vIENvbXBvbmVudCBwcm9wcyBpbnRlcmZhY2Vcbi8qKlxuICpcbiAqL1xuaW50ZXJmYWNlIEJpbGxGb3JtUHJvcHMge1xuICBtb2RlOiAnY3JlYXRlJyB8ICdlZGl0JztcbiAgYnVpbGRpbmdJZDogc3RyaW5nO1xuICBiaWxsPzogQmlsbDsgLy8gUmVxdWlyZWQgZm9yIGVkaXQgbW9kZVxuICBvblN1Y2Nlc3M6ICgpID0+IHZvaWQ7XG4gIG9uQ2FuY2VsPzogKCkgPT4gdm9pZDsgLy8gT3B0aW9uYWwgZm9yIGNyZWF0ZSBtb2RlXG59XG5cbi8vIEJpbGwgY2F0ZWdvcnkgb3B0aW9ucyAtIGNlbnRyYWxpemVkIGxpc3RcbmV4cG9ydCBjb25zdCBCSUxMX0NBVEVHT1JJRVMgPSBbXG4gIHsgdmFsdWU6ICdpbnN1cmFuY2UnLCBsYWJlbDogJ0luc3VyYW5jZScgfSxcbiAgeyB2YWx1ZTogJ21haW50ZW5hbmNlJywgbGFiZWw6ICdNYWludGVuYW5jZScgfSxcbiAgeyB2YWx1ZTogJ3NhbGFyeScsIGxhYmVsOiAnU2FsYXJ5JyB9LFxuICB7IHZhbHVlOiAndXRpbGl0aWVzJywgbGFiZWw6ICdVdGlsaXRpZXMnIH0sXG4gIHsgdmFsdWU6ICdjbGVhbmluZycsIGxhYmVsOiAnQ2xlYW5pbmcnIH0sXG4gIHsgdmFsdWU6ICdzZWN1cml0eScsIGxhYmVsOiAnU2VjdXJpdHknIH0sXG4gIHsgdmFsdWU6ICdsYW5kc2NhcGluZycsIGxhYmVsOiAnTGFuZHNjYXBpbmcnIH0sXG4gIHsgdmFsdWU6ICdwcm9mZXNzaW9uYWxfc2VydmljZXMnLCBsYWJlbDogJ1Byb2Zlc3Npb25hbCBTZXJ2aWNlcycgfSxcbiAgeyB2YWx1ZTogJ2FkbWluaXN0cmF0aW9uJywgbGFiZWw6ICdBZG1pbmlzdHJhdGlvbicgfSxcbiAgeyB2YWx1ZTogJ3JlcGFpcnMnLCBsYWJlbDogJ1JlcGFpcnMnIH0sXG4gIHsgdmFsdWU6ICdzdXBwbGllcycsIGxhYmVsOiAnU3VwcGxpZXMnIH0sXG4gIHsgdmFsdWU6ICd0YXhlcycsIGxhYmVsOiAnVGF4ZXMnIH0sXG4gIHsgdmFsdWU6ICd0ZWNobm9sb2d5JywgbGFiZWw6ICdUZWNobm9sb2d5JyB9LFxuICB7IHZhbHVlOiAncmVzZXJ2ZXMnLCBsYWJlbDogJ1Jlc2VydmVzJyB9LFxuICB7IHZhbHVlOiAnb3RoZXInLCBsYWJlbDogJ090aGVyJyB9LFxuXSBhcyBjb25zdDtcblxuLy8gUGF5bWVudCB0eXBlIG9wdGlvbnNcbmV4cG9ydCBjb25zdCBQQVlNRU5UX1RZUEVTID0gW1xuICB7IHZhbHVlOiAndW5pcXVlJywgbGFiZWw6ICdPbmUtdGltZSBQYXltZW50JyB9LFxuICB7IHZhbHVlOiAncmVjdXJyZW50JywgbGFiZWw6ICdSZWN1cnJpbmcgUGF5bWVudCcgfSxcbl0gYXMgY29uc3Q7XG5cbi8vIFNjaGVkdWxlIG9wdGlvbnNcbmV4cG9ydCBjb25zdCBTQ0hFRFVMRV9PUFRJT05TID0gW1xuICB7IHZhbHVlOiAnd2Vla2x5JywgbGFiZWw6ICdXZWVrbHknIH0sXG4gIHsgdmFsdWU6ICdtb250aGx5JywgbGFiZWw6ICdNb250aGx5JyB9LFxuICB7IHZhbHVlOiAncXVhcnRlcmx5JywgbGFiZWw6ICdRdWFydGVybHknIH0sXG4gIHsgdmFsdWU6ICd5ZWFybHknLCBsYWJlbDogJ1llYXJseScgfSxcbl0gYXMgY29uc3Q7XG5cbi8vIFN0YXR1cyBvcHRpb25zXG5leHBvcnQgY29uc3QgU1RBVFVTX09QVElPTlMgPSBbXG4gIHsgdmFsdWU6ICdkcmFmdCcsIGxhYmVsOiAnRHJhZnQnIH0sXG4gIHsgdmFsdWU6ICdzZW50JywgbGFiZWw6ICdTZW50JyB9LFxuICB7IHZhbHVlOiAnb3ZlcmR1ZScsIGxhYmVsOiAnT3ZlcmR1ZScgfSxcbiAgeyB2YWx1ZTogJ3BhaWQnLCBsYWJlbDogJ1BhaWQnIH0sXG4gIHsgdmFsdWU6ICdjYW5jZWxsZWQnLCBsYWJlbDogJ0NhbmNlbGxlZCcgfSxcbl0gYXMgY29uc3Q7XG5cbi8qKlxuICogVW5pZmllZCBiaWxsIGZvcm0gY29tcG9uZW50IGZvciBjcmVhdGluZyBhbmQgZWRpdGluZyBiaWxscy5cbiAqIFN1cHBvcnRzIGJvdGggbWFudWFsIGVudHJ5IGFuZCBBSSBkb2N1bWVudCBhbmFseXNpcyBmb3IgY3JlYXRpb24uXG4gKiBAcGFyYW0gcm9vdDBcbiAqIEBwYXJhbSByb290MC5tb2RlXG4gKiBAcGFyYW0gcm9vdDAuYnVpbGRpbmdJZFxuICogQHBhcmFtIHJvb3QwLmJpbGxcbiAqIEBwYXJhbSByb290MC5vblN1Y2Nlc3NcbiAqIEBwYXJhbSByb290MC5vbkNhbmNlbFxuICovXG5leHBvcnQgZnVuY3Rpb24gQmlsbEZvcm0oeyBtb2RlLCBidWlsZGluZ0lkLCBiaWxsLCBvblN1Y2Nlc3MsIG9uQ2FuY2VsIH06IEJpbGxGb3JtUHJvcHMpIHtcbiAgY29uc3QgeyB0IH0gPSB1c2VMYW5ndWFnZSgpO1xuICBjb25zdCBbYWN0aXZlVGFiLCBzZXRBY3RpdmVUYWJdID0gdXNlU3RhdGUoJ21hbnVhbCcpO1xuICBjb25zdCBbdXBsb2FkZWRGaWxlLCBzZXRVcGxvYWRlZEZpbGVdID0gdXNlU3RhdGU8RmlsZSB8IG51bGw+KG51bGwpO1xuICBjb25zdCBbYWlBbmFseXNpc0RhdGEsIHNldEFpQW5hbHlzaXNEYXRhXSA9IHVzZVN0YXRlPEFpQW5hbHlzaXNSZXN1bHQgfCBudWxsPihudWxsKTtcbiAgY29uc3QgW2lzQW5hbHl6aW5nLCBzZXRJc0FuYWx5emluZ10gPSB1c2VTdGF0ZShmYWxzZSk7XG4gIGNvbnN0IFthdHRhY2hlZEZpbGVzLCBzZXRBdHRhY2hlZEZpbGVzXSA9IHVzZVN0YXRlPEZpbGVbXT4oW10pO1xuXG4gIGNvbnN0IHF1ZXJ5Q2xpZW50ID0gdXNlUXVlcnlDbGllbnQoKTtcblxuICAvLyBGb3JtIHNldHVwIHdpdGggZGVmYXVsdCB2YWx1ZXMgYmFzZWQgb24gbW9kZVxuICBjb25zdCBnZXREZWZhdWx0VmFsdWVzID0gKCk6IEJpbGxGb3JtRGF0YSA9PiB7XG4gICAgaWYgKG1vZGUgPT09ICdlZGl0JyAmJiBiaWxsKSB7XG4gICAgICByZXR1cm4ge1xuICAgICAgICB0aXRsZTogYmlsbC50aXRsZSxcbiAgICAgICAgZGVzY3JpcHRpb246IGJpbGwuZGVzY3JpcHRpb24gfHwgJycsXG4gICAgICAgIGNhdGVnb3J5OiBiaWxsLmNhdGVnb3J5LFxuICAgICAgICB2ZW5kb3I6IGJpbGwudmVuZG9yIHx8ICcnLFxuICAgICAgICBwYXltZW50VHlwZTogYmlsbC5wYXltZW50VHlwZSxcbiAgICAgICAgc2NoZWR1bGVQYXltZW50OiBiaWxsLnNjaGVkdWxlUGF5bWVudCB8fCAnbW9udGhseScsXG4gICAgICAgIHRvdGFsQW1vdW50OiBiaWxsLnRvdGFsQW1vdW50LnRvU3RyaW5nKCksXG4gICAgICAgIHN0YXJ0RGF0ZTogYmlsbC5zdGFydERhdGUsXG4gICAgICAgIGVuZERhdGU6IGJpbGwuZW5kRGF0ZSB8fCAnJyxcbiAgICAgICAgc3RhdHVzOiBiaWxsLnN0YXR1cyxcbiAgICAgICAgbm90ZXM6IGJpbGwubm90ZXMgfHwgJycsXG4gICAgICB9O1xuICAgIH1cblxuICAgIC8vIERlZmF1bHQgdmFsdWVzIGZvciBjcmVhdGUgbW9kZVxuICAgIHJldHVybiB7XG4gICAgICB0aXRsZTogJycsXG4gICAgICBkZXNjcmlwdGlvbjogJycsXG4gICAgICBjYXRlZ29yeTogJ290aGVyJyxcbiAgICAgIHZlbmRvcjogJycsXG4gICAgICBwYXltZW50VHlwZTogJ3VuaXF1ZScsXG4gICAgICBzY2hlZHVsZVBheW1lbnQ6ICdtb250aGx5JyxcbiAgICAgIHRvdGFsQW1vdW50OiAnJyxcbiAgICAgIHN0YXJ0RGF0ZTogbmV3IERhdGUoKS50b0lTT1N0cmluZygpLnNwbGl0KCdUJylbMF0sXG4gICAgICBlbmREYXRlOiAnJyxcbiAgICAgIHN0YXR1czogJ2RyYWZ0JyxcbiAgICAgIG5vdGVzOiAnJyxcbiAgICB9O1xuICB9O1xuXG4gIGNvbnN0IGZvcm0gPSB1c2VGb3JtPEJpbGxGb3JtRGF0YT4oe1xuICAgIHJlc29sdmVyOiB6b2RSZXNvbHZlcihiaWxsRm9ybVNjaGVtYSksXG4gICAgZGVmYXVsdFZhbHVlczogZ2V0RGVmYXVsdFZhbHVlcygpLFxuICB9KTtcblxuICAvLyBVcGRhdGUgZm9ybSB3aGVuIGJpbGwgY2hhbmdlcyAoZm9yIGVkaXQgbW9kZSlcbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBpZiAobW9kZSA9PT0gJ2VkaXQnICYmIGJpbGwpIHtcbiAgICAgIGZvcm0ucmVzZXQoZ2V0RGVmYXVsdFZhbHVlcygpKTtcbiAgICB9XG4gIH0sIFttb2RlLCBiaWxsXSk7XG5cbiAgLy8gTWFpbiBtdXRhdGlvbiBmb3IgY3JlYXRlL3VwZGF0ZVxuICBjb25zdCBzdWJtaXRNdXRhdGlvbiA9IHVzZU11dGF0aW9uKHtcbiAgICBtdXRhdGlvbkZuOiBhc3luYyAoYmlsbERhdGE6IEJpbGxGb3JtRGF0YSkgPT4ge1xuICAgICAgY29uc3QgdXJsID0gbW9kZSA9PT0gJ2NyZWF0ZScgPyAnL2FwaS9iaWxscycgOiBgL2FwaS9iaWxscy8ke2JpbGw/LmlkfWA7XG4gICAgICBjb25zdCBtZXRob2QgPSBtb2RlID09PSAnY3JlYXRlJyA/ICdQT1NUJyA6ICdQQVRDSCc7XG5cbiAgICAgIGNvbnN0IHBheWxvYWQgPSB7XG4gICAgICAgIC4uLmJpbGxEYXRhLFxuICAgICAgICBjb3N0czogW3BhcnNlRmxvYXQoYmlsbERhdGEudG90YWxBbW91bnQpXSxcbiAgICAgICAgLi4uKG1vZGUgPT09ICdjcmVhdGUnICYmIHsgYnVpbGRpbmdJZCB9KSxcbiAgICAgIH07XG5cbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2godXJsLCB7XG4gICAgICAgIG1ldGhvZCxcbiAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICAgIH0sXG4gICAgICAgIGNyZWRlbnRpYWxzOiAnaW5jbHVkZScsXG4gICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHBheWxvYWQpLFxuICAgICAgfSk7XG5cbiAgICAgIGlmICghcmVzcG9uc2Uub2spIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBGYWlsZWQgdG8gJHttb2RlfSBiaWxsYCk7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiByZXNwb25zZS5qc29uKCk7XG4gICAgfSxcbiAgICBvblN1Y2Nlc3M6ICgpID0+IHtcbiAgICAgIHF1ZXJ5Q2xpZW50LmludmFsaWRhdGVRdWVyaWVzKHsgcXVlcnlLZXk6IFsnL2FwaS9iaWxscyddIH0pO1xuICAgICAgb25TdWNjZXNzKCk7XG4gICAgfSxcbiAgfSk7XG5cbiAgLy8gQUkgYW5hbHlzaXMgbXV0YXRpb24gKG9ubHkgZm9yIGNyZWF0ZSBtb2RlKVxuICBjb25zdCB1cGxvYWRBbmRBbmFseXplTXV0YXRpb24gPSB1c2VNdXRhdGlvbih7XG4gICAgbXV0YXRpb25GbjogYXN5bmMgKGZpbGU6IEZpbGUpID0+IHtcbiAgICAgIHNldElzQW5hbHl6aW5nKHRydWUpO1xuXG4gICAgICAvLyBGaXJzdCBjcmVhdGUgYSBkcmFmdCBiaWxsXG4gICAgICBjb25zdCBjcmVhdGVSZXNwb25zZSA9IGF3YWl0IGZldGNoKCcvYXBpL2JpbGxzJywge1xuICAgICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICAgIH0sXG4gICAgICAgIGNyZWRlbnRpYWxzOiAnaW5jbHVkZScsXG4gICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgICBidWlsZGluZ0lkLFxuICAgICAgICAgIHRpdGxlOiAnQUkgQW5hbHlzaXMgRHJhZnQnLFxuICAgICAgICAgIGNhdGVnb3J5OiAnb3RoZXInLFxuICAgICAgICAgIHBheW1lbnRUeXBlOiAndW5pcXVlJyxcbiAgICAgICAgICB0b3RhbEFtb3VudDogMCxcbiAgICAgICAgICBjb3N0czogWzBdLFxuICAgICAgICAgIHN0YXJ0RGF0ZTogbmV3IERhdGUoKS50b0lTT1N0cmluZygpLnNwbGl0KCdUJylbMF0sXG4gICAgICAgICAgc3RhdHVzOiAnZHJhZnQnLFxuICAgICAgICAgIG5vdGVzOiAnRHJhZnQgYmlsbCBjcmVhdGVkIGZvciBBSSBhbmFseXNpcycsXG4gICAgICAgIH0pLFxuICAgICAgfSk7XG5cbiAgICAgIGlmICghY3JlYXRlUmVzcG9uc2Uub2spIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdGYWlsZWQgdG8gY3JlYXRlIGRyYWZ0IGJpbGwnKTtcbiAgICAgIH1cblxuICAgICAgY29uc3QgZHJhZnRCaWxsID0gYXdhaXQgY3JlYXRlUmVzcG9uc2UuanNvbigpO1xuXG4gICAgICAvLyBVcGxvYWQgYW5kIGFuYWx5emUgdGhlIGRvY3VtZW50XG4gICAgICBjb25zdCBmb3JtRGF0YSA9IG5ldyBGb3JtRGF0YSgpO1xuICAgICAgZm9ybURhdGEuYXBwZW5kKCdkb2N1bWVudCcsIGZpbGUpO1xuXG4gICAgICBjb25zdCB1cGxvYWRSZXNwb25zZSA9IGF3YWl0IGZldGNoKGAvYXBpL2JpbGxzLyR7ZHJhZnRCaWxsLmJpbGwuaWR9L3VwbG9hZC1kb2N1bWVudGAsIHtcbiAgICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICAgIGNyZWRlbnRpYWxzOiAnaW5jbHVkZScsXG4gICAgICAgIGJvZHk6IGZvcm1EYXRhLFxuICAgICAgfSk7XG5cbiAgICAgIGlmICghdXBsb2FkUmVzcG9uc2Uub2spIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdGYWlsZWQgdG8gdXBsb2FkIGFuZCBhbmFseXplIGRvY3VtZW50Jyk7XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHVwbG9hZFJlc3BvbnNlLmpzb24oKTtcbiAgICAgIHJldHVybiB7IC4uLnJlc3VsdCwgYmlsbElkOiBkcmFmdEJpbGwuYmlsbC5pZCB9O1xuICAgIH0sXG4gICAgb25TdWNjZXNzOiAoZGF0YSkgPT4ge1xuICAgICAgc2V0SXNBbmFseXppbmcoZmFsc2UpO1xuICAgICAgc2V0QWlBbmFseXNpc0RhdGEoZGF0YS5hbmFseXNpc1Jlc3VsdCk7XG4gICAgICBzZXRBY3RpdmVUYWIoJ21hbnVhbCcpOyAvLyBTd2l0Y2ggdG8gbWFudWFsIHRhYiB0byBzaG93IHBvcHVsYXRlZCBmb3JtXG4gICAgfSxcbiAgICBvbkVycm9yOiAoKSA9PiB7XG4gICAgICBzZXRJc0FuYWx5emluZyhmYWxzZSk7XG4gICAgfSxcbiAgfSk7XG5cbiAgLy8gRXZlbnQgaGFuZGxlcnNcbiAgY29uc3QgaGFuZGxlRmlsZVVwbG9hZCA9IChldmVudDogUmVhY3QuQ2hhbmdlRXZlbnQ8SFRNTElucHV0RWxlbWVudD4pID0+IHtcbiAgICBjb25zdCBmaWxlID0gZXZlbnQudGFyZ2V0LmZpbGVzPy5bMF07XG4gICAgaWYgKGZpbGUgJiYgbW9kZSA9PT0gJ2NyZWF0ZScpIHtcbiAgICAgIHNldFVwbG9hZGVkRmlsZShmaWxlKTtcbiAgICAgIHVwbG9hZEFuZEFuYWx5emVNdXRhdGlvbi5tdXRhdGUoZmlsZSk7XG4gICAgfVxuICB9O1xuXG4gIGNvbnN0IGFwcGx5QWlBbmFseXNpcyA9ICgpID0+IHtcbiAgICBpZiAoYWlBbmFseXNpc0RhdGEpIHtcbiAgICAgIGZvcm0uc2V0VmFsdWUoJ3RpdGxlJywgYWlBbmFseXNpc0RhdGEudGl0bGUpO1xuICAgICAgZm9ybS5zZXRWYWx1ZSgndmVuZG9yJywgYWlBbmFseXNpc0RhdGEudmVuZG9yIHx8ICcnKTtcbiAgICAgIGZvcm0uc2V0VmFsdWUoJ2NhdGVnb3J5JywgYWlBbmFseXNpc0RhdGEuY2F0ZWdvcnkpO1xuICAgICAgZm9ybS5zZXRWYWx1ZSgndG90YWxBbW91bnQnLCBhaUFuYWx5c2lzRGF0YS50b3RhbEFtb3VudCk7XG4gICAgICBmb3JtLnNldFZhbHVlKCdkZXNjcmlwdGlvbicsIGFpQW5hbHlzaXNEYXRhLmRlc2NyaXB0aW9uIHx8ICcnKTtcblxuICAgICAgaWYgKGFpQW5hbHlzaXNEYXRhLmlzc3VlRGF0ZSkge1xuICAgICAgICBmb3JtLnNldFZhbHVlKCdzdGFydERhdGUnLCBhaUFuYWx5c2lzRGF0YS5pc3N1ZURhdGUpO1xuICAgICAgfVxuXG4gICAgICBjb25zdCBub3RlcyA9IGBBSS1hbmFseXplZCBkb2N1bWVudC4gT3JpZ2luYWwgYmlsbCBudW1iZXI6ICR7YWlBbmFseXNpc0RhdGEuYmlsbE51bWJlciB8fCAnTi9BJ30uIENvbmZpZGVuY2U6ICR7KGFpQW5hbHlzaXNEYXRhLmNvbmZpZGVuY2UgKiAxMDApLnRvRml4ZWQoMSl9JS5gO1xuICAgICAgZm9ybS5zZXRWYWx1ZSgnbm90ZXMnLCBub3Rlcyk7XG4gICAgfVxuICB9O1xuXG4gIGNvbnN0IG9uU3VibWl0ID0gKHZhbHVlczogQmlsbEZvcm1EYXRhKSA9PiB7XG4gICAgc3VibWl0TXV0YXRpb24ubXV0YXRlKHZhbHVlcyk7XG4gICAgLy8gVE9ETzogSGFuZGxlIGF0dGFjaGVkIGZpbGVzIHVwbG9hZCBhZnRlciBiaWxsIGNyZWF0aW9uXG4gIH07XG5cbiAgLy8gSGFuZGxlIGZpbGUgYXR0YWNobWVudHNcbiAgY29uc3QgaGFuZGxlRmlsZXNTZWxlY3QgPSB1c2VDYWxsYmFjaygoZmlsZXM6IEZpbGVbXSkgPT4ge1xuICAgIHNldEF0dGFjaGVkRmlsZXMocHJldiA9PiBbLi4ucHJldiwgLi4uZmlsZXNdKTtcbiAgfSwgW10pO1xuXG4gIGNvbnN0IGhhbmRsZUZpbGVSZW1vdmUgPSB1c2VDYWxsYmFjaygoZmlsZUluZGV4OiBudW1iZXIpID0+IHtcbiAgICBzZXRBdHRhY2hlZEZpbGVzKHByZXYgPT4gcHJldi5maWx0ZXIoKF8sIGluZGV4KSA9PiBpbmRleCAhPT0gZmlsZUluZGV4KSk7XG4gIH0sIFtdKTtcblxuICBjb25zdCByZW5kZXJGb3JtRmllbGRzID0gKCkgPT4gKFxuICAgIDw+XG4gICAgICA8ZGl2IGNsYXNzTmFtZT0nZ3JpZCBncmlkLWNvbHMtMiBnYXAtNCc+XG4gICAgICAgIHsvKiBUaXRsZSAqL31cbiAgICAgICAgPEZvcm1GaWVsZFxuICAgICAgICAgIGNvbnRyb2w9e2Zvcm0uY29udHJvbH1cbiAgICAgICAgICBuYW1lPSd0aXRsZSdcbiAgICAgICAgICByZW5kZXI9eyh7IGZpZWxkIH0pID0+IChcbiAgICAgICAgICAgIDxGb3JtSXRlbT5cbiAgICAgICAgICAgICAgPEZvcm1MYWJlbD57dCgndGl0bGUnKX0gKjwvRm9ybUxhYmVsPlxuICAgICAgICAgICAgICA8Rm9ybUNvbnRyb2w+XG4gICAgICAgICAgICAgICAgPElucHV0IHsuLi5maWVsZH0gcGxhY2Vob2xkZXI9e3QoJ2JpbGxUaXRsZScpfSBkYXRhLXRlc3RpZD0naW5wdXQtdGl0bGUnIC8+XG4gICAgICAgICAgICAgIDwvRm9ybUNvbnRyb2w+XG4gICAgICAgICAgICAgIDxGb3JtTWVzc2FnZSAvPlxuICAgICAgICAgICAgPC9Gb3JtSXRlbT5cbiAgICAgICAgICApfVxuICAgICAgICAvPlxuXG4gICAgICAgIHsvKiBWZW5kb3IgKi99XG4gICAgICAgIDxGb3JtRmllbGRcbiAgICAgICAgICBjb250cm9sPXtmb3JtLmNvbnRyb2x9XG4gICAgICAgICAgbmFtZT0ndmVuZG9yJ1xuICAgICAgICAgIHJlbmRlcj17KHsgZmllbGQgfSkgPT4gKFxuICAgICAgICAgICAgPEZvcm1JdGVtPlxuICAgICAgICAgICAgICA8Rm9ybUxhYmVsPnt0KCd2ZW5kb3InKX08L0Zvcm1MYWJlbD5cbiAgICAgICAgICAgICAgPEZvcm1Db250cm9sPlxuICAgICAgICAgICAgICAgIDxJbnB1dFxuICAgICAgICAgICAgICAgICAgey4uLmZpZWxkfVxuICAgICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI9e3QoJ2NvbXBhbnlPclNlcnZpY2VQcm92aWRlcicpfVxuICAgICAgICAgICAgICAgICAgZGF0YS10ZXN0aWQ9J2lucHV0LXZlbmRvcidcbiAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICA8L0Zvcm1Db250cm9sPlxuICAgICAgICAgICAgICA8Rm9ybU1lc3NhZ2UgLz5cbiAgICAgICAgICAgIDwvRm9ybUl0ZW0+XG4gICAgICAgICAgKX1cbiAgICAgICAgLz5cblxuICAgICAgICB7LyogQ2F0ZWdvcnkgKi99XG4gICAgICAgIDxGb3JtRmllbGRcbiAgICAgICAgICBjb250cm9sPXtmb3JtLmNvbnRyb2x9XG4gICAgICAgICAgbmFtZT0nY2F0ZWdvcnknXG4gICAgICAgICAgcmVuZGVyPXsoeyBmaWVsZCB9KSA9PiAoXG4gICAgICAgICAgICA8Rm9ybUl0ZW0+XG4gICAgICAgICAgICAgIDxGb3JtTGFiZWw+e3QoJ2NhdGVnb3J5Jyl9ICo8L0Zvcm1MYWJlbD5cbiAgICAgICAgICAgICAgPFNlbGVjdCBvblZhbHVlQ2hhbmdlPXtmaWVsZC5vbkNoYW5nZX0gdmFsdWU9e2ZpZWxkLnZhbHVlfT5cbiAgICAgICAgICAgICAgICA8Rm9ybUNvbnRyb2w+XG4gICAgICAgICAgICAgICAgICA8U2VsZWN0VHJpZ2dlciBkYXRhLXRlc3RpZD0nc2VsZWN0LWNhdGVnb3J5Jz5cbiAgICAgICAgICAgICAgICAgICAgPFNlbGVjdFZhbHVlIHBsYWNlaG9sZGVyPXt0KCdzZWxlY3RDYXRlZ29yeScpfSAvPlxuICAgICAgICAgICAgICAgICAgPC9TZWxlY3RUcmlnZ2VyPlxuICAgICAgICAgICAgICAgIDwvRm9ybUNvbnRyb2w+XG4gICAgICAgICAgICAgICAgPFNlbGVjdENvbnRlbnQ+XG4gICAgICAgICAgICAgICAgICB7QklMTF9DQVRFR09SSUVTLm1hcCgoY2F0ZWdvcnkpID0+IChcbiAgICAgICAgICAgICAgICAgICAgPFNlbGVjdEl0ZW0ga2V5PXtjYXRlZ29yeS52YWx1ZX0gdmFsdWU9e2NhdGVnb3J5LnZhbHVlfT5cbiAgICAgICAgICAgICAgICAgICAgICB7Y2F0ZWdvcnkubGFiZWx9XG4gICAgICAgICAgICAgICAgICAgIDwvU2VsZWN0SXRlbT5cbiAgICAgICAgICAgICAgICAgICkpfVxuICAgICAgICAgICAgICAgIDwvU2VsZWN0Q29udGVudD5cbiAgICAgICAgICAgICAgPC9TZWxlY3Q+XG4gICAgICAgICAgICAgIDxGb3JtTWVzc2FnZSAvPlxuICAgICAgICAgICAgPC9Gb3JtSXRlbT5cbiAgICAgICAgICApfVxuICAgICAgICAvPlxuXG4gICAgICAgIHsvKiBUb3RhbCBBbW91bnQgKi99XG4gICAgICAgIDxGb3JtRmllbGRcbiAgICAgICAgICBjb250cm9sPXtmb3JtLmNvbnRyb2x9XG4gICAgICAgICAgbmFtZT0ndG90YWxBbW91bnQnXG4gICAgICAgICAgcmVuZGVyPXsoeyBmaWVsZCB9KSA9PiAoXG4gICAgICAgICAgICA8Rm9ybUl0ZW0+XG4gICAgICAgICAgICAgIDxGb3JtTGFiZWw+VG90YWwgQW1vdW50ICo8L0Zvcm1MYWJlbD5cbiAgICAgICAgICAgICAgPEZvcm1Db250cm9sPlxuICAgICAgICAgICAgICAgIDxJbnB1dFxuICAgICAgICAgICAgICAgICAgey4uLmZpZWxkfVxuICAgICAgICAgICAgICAgICAgdHlwZT0nbnVtYmVyJ1xuICAgICAgICAgICAgICAgICAgc3RlcD0nMC4wMSdcbiAgICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyPScwLjAwJ1xuICAgICAgICAgICAgICAgICAgZGF0YS10ZXN0aWQ9J2lucHV0LWFtb3VudCdcbiAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICA8L0Zvcm1Db250cm9sPlxuICAgICAgICAgICAgICA8Rm9ybU1lc3NhZ2UgLz5cbiAgICAgICAgICAgIDwvRm9ybUl0ZW0+XG4gICAgICAgICAgKX1cbiAgICAgICAgLz5cblxuICAgICAgICB7LyogUGF5bWVudCBUeXBlICovfVxuICAgICAgICA8Rm9ybUZpZWxkXG4gICAgICAgICAgY29udHJvbD17Zm9ybS5jb250cm9sfVxuICAgICAgICAgIG5hbWU9J3BheW1lbnRUeXBlJ1xuICAgICAgICAgIHJlbmRlcj17KHsgZmllbGQgfSkgPT4gKFxuICAgICAgICAgICAgPEZvcm1JdGVtPlxuICAgICAgICAgICAgICA8Rm9ybUxhYmVsPlBheW1lbnQgVHlwZSAqPC9Gb3JtTGFiZWw+XG4gICAgICAgICAgICAgIDxTZWxlY3Qgb25WYWx1ZUNoYW5nZT17ZmllbGQub25DaGFuZ2V9IHZhbHVlPXtmaWVsZC52YWx1ZX0+XG4gICAgICAgICAgICAgICAgPEZvcm1Db250cm9sPlxuICAgICAgICAgICAgICAgICAgPFNlbGVjdFRyaWdnZXIgZGF0YS10ZXN0aWQ9J3NlbGVjdC1wYXltZW50LXR5cGUnPlxuICAgICAgICAgICAgICAgICAgICA8U2VsZWN0VmFsdWUgcGxhY2Vob2xkZXI9J1NlbGVjdCBwYXltZW50IHR5cGUnIC8+XG4gICAgICAgICAgICAgICAgICA8L1NlbGVjdFRyaWdnZXI+XG4gICAgICAgICAgICAgICAgPC9Gb3JtQ29udHJvbD5cbiAgICAgICAgICAgICAgICA8U2VsZWN0Q29udGVudD5cbiAgICAgICAgICAgICAgICAgIHtQQVlNRU5UX1RZUEVTLm1hcCgodHlwZSkgPT4gKFxuICAgICAgICAgICAgICAgICAgICA8U2VsZWN0SXRlbSBrZXk9e3R5cGUudmFsdWV9IHZhbHVlPXt0eXBlLnZhbHVlfT5cbiAgICAgICAgICAgICAgICAgICAgICB7dHlwZS5sYWJlbH1cbiAgICAgICAgICAgICAgICAgICAgPC9TZWxlY3RJdGVtPlxuICAgICAgICAgICAgICAgICAgKSl9XG4gICAgICAgICAgICAgICAgPC9TZWxlY3RDb250ZW50PlxuICAgICAgICAgICAgICA8L1NlbGVjdD5cbiAgICAgICAgICAgICAgPEZvcm1NZXNzYWdlIC8+XG4gICAgICAgICAgICA8L0Zvcm1JdGVtPlxuICAgICAgICAgICl9XG4gICAgICAgIC8+XG5cbiAgICAgICAgey8qIFNjaGVkdWxlIFBheW1lbnQgKG9ubHkgZm9yIHJlY3VycmVudCkgKi99XG4gICAgICAgIHtmb3JtLndhdGNoKCdwYXltZW50VHlwZScpID09PSAncmVjdXJyZW50JyAmJiAoXG4gICAgICAgICAgPEZvcm1GaWVsZFxuICAgICAgICAgICAgY29udHJvbD17Zm9ybS5jb250cm9sfVxuICAgICAgICAgICAgbmFtZT0nc2NoZWR1bGVQYXltZW50J1xuICAgICAgICAgICAgcmVuZGVyPXsoeyBmaWVsZCB9KSA9PiAoXG4gICAgICAgICAgICAgIDxGb3JtSXRlbT5cbiAgICAgICAgICAgICAgICA8Rm9ybUxhYmVsPlNjaGVkdWxlICo8L0Zvcm1MYWJlbD5cbiAgICAgICAgICAgICAgICA8U2VsZWN0IG9uVmFsdWVDaGFuZ2U9e2ZpZWxkLm9uQ2hhbmdlfSB2YWx1ZT17ZmllbGQudmFsdWV9PlxuICAgICAgICAgICAgICAgICAgPEZvcm1Db250cm9sPlxuICAgICAgICAgICAgICAgICAgICA8U2VsZWN0VHJpZ2dlciBkYXRhLXRlc3RpZD0nc2VsZWN0LXNjaGVkdWxlJz5cbiAgICAgICAgICAgICAgICAgICAgICA8U2VsZWN0VmFsdWUgcGxhY2Vob2xkZXI9J1NlbGVjdCBzY2hlZHVsZScgLz5cbiAgICAgICAgICAgICAgICAgICAgPC9TZWxlY3RUcmlnZ2VyPlxuICAgICAgICAgICAgICAgICAgPC9Gb3JtQ29udHJvbD5cbiAgICAgICAgICAgICAgICAgIDxTZWxlY3RDb250ZW50PlxuICAgICAgICAgICAgICAgICAgICB7U0NIRURVTEVfT1BUSU9OUy5tYXAoKG9wdGlvbikgPT4gKFxuICAgICAgICAgICAgICAgICAgICAgIDxTZWxlY3RJdGVtIGtleT17b3B0aW9uLnZhbHVlfSB2YWx1ZT17b3B0aW9uLnZhbHVlfT5cbiAgICAgICAgICAgICAgICAgICAgICAgIHtvcHRpb24ubGFiZWx9XG4gICAgICAgICAgICAgICAgICAgICAgPC9TZWxlY3RJdGVtPlxuICAgICAgICAgICAgICAgICAgICApKX1cbiAgICAgICAgICAgICAgICAgIDwvU2VsZWN0Q29udGVudD5cbiAgICAgICAgICAgICAgICA8L1NlbGVjdD5cbiAgICAgICAgICAgICAgICA8Rm9ybU1lc3NhZ2UgLz5cbiAgICAgICAgICAgICAgPC9Gb3JtSXRlbT5cbiAgICAgICAgICAgICl9XG4gICAgICAgICAgLz5cbiAgICAgICAgKX1cblxuICAgICAgICB7LyogU3RhcnQgRGF0ZSAqL31cbiAgICAgICAgPEZvcm1GaWVsZFxuICAgICAgICAgIGNvbnRyb2w9e2Zvcm0uY29udHJvbH1cbiAgICAgICAgICBuYW1lPSdzdGFydERhdGUnXG4gICAgICAgICAgcmVuZGVyPXsoeyBmaWVsZCB9KSA9PiAoXG4gICAgICAgICAgICA8Rm9ybUl0ZW0+XG4gICAgICAgICAgICAgIDxGb3JtTGFiZWw+U3RhcnQgRGF0ZSAqPC9Gb3JtTGFiZWw+XG4gICAgICAgICAgICAgIDxGb3JtQ29udHJvbD5cbiAgICAgICAgICAgICAgICA8SW5wdXQgey4uLmZpZWxkfSB0eXBlPSdkYXRlJyBkYXRhLXRlc3RpZD0naW5wdXQtc3RhcnQtZGF0ZScgLz5cbiAgICAgICAgICAgICAgPC9Gb3JtQ29udHJvbD5cbiAgICAgICAgICAgICAgPEZvcm1NZXNzYWdlIC8+XG4gICAgICAgICAgICA8L0Zvcm1JdGVtPlxuICAgICAgICAgICl9XG4gICAgICAgIC8+XG5cbiAgICAgICAgey8qIEVuZCBEYXRlIChvbmx5IGZvciByZWN1cnJlbnQpICovfVxuICAgICAgICB7Zm9ybS53YXRjaCgncGF5bWVudFR5cGUnKSA9PT0gJ3JlY3VycmVudCcgJiYgKFxuICAgICAgICAgIDxGb3JtRmllbGRcbiAgICAgICAgICAgIGNvbnRyb2w9e2Zvcm0uY29udHJvbH1cbiAgICAgICAgICAgIG5hbWU9J2VuZERhdGUnXG4gICAgICAgICAgICByZW5kZXI9eyh7IGZpZWxkIH0pID0+IChcbiAgICAgICAgICAgICAgPEZvcm1JdGVtPlxuICAgICAgICAgICAgICAgIDxGb3JtTGFiZWw+RW5kIERhdGUgKE9wdGlvbmFsKTwvRm9ybUxhYmVsPlxuICAgICAgICAgICAgICAgIDxGb3JtQ29udHJvbD5cbiAgICAgICAgICAgICAgICAgIDxJbnB1dCB7Li4uZmllbGR9IHR5cGU9J2RhdGUnIGRhdGEtdGVzdGlkPSdpbnB1dC1lbmQtZGF0ZScgLz5cbiAgICAgICAgICAgICAgICA8L0Zvcm1Db250cm9sPlxuICAgICAgICAgICAgICAgIDxGb3JtTWVzc2FnZSAvPlxuICAgICAgICAgICAgICA8L0Zvcm1JdGVtPlxuICAgICAgICAgICAgKX1cbiAgICAgICAgICAvPlxuICAgICAgICApfVxuXG4gICAgICAgIHsvKiBTdGF0dXMgKi99XG4gICAgICAgIDxGb3JtRmllbGRcbiAgICAgICAgICBjb250cm9sPXtmb3JtLmNvbnRyb2x9XG4gICAgICAgICAgbmFtZT0nc3RhdHVzJ1xuICAgICAgICAgIHJlbmRlcj17KHsgZmllbGQgfSkgPT4gKFxuICAgICAgICAgICAgPEZvcm1JdGVtPlxuICAgICAgICAgICAgICA8Rm9ybUxhYmVsPlN0YXR1cyAqPC9Gb3JtTGFiZWw+XG4gICAgICAgICAgICAgIDxTZWxlY3Qgb25WYWx1ZUNoYW5nZT17ZmllbGQub25DaGFuZ2V9IHZhbHVlPXtmaWVsZC52YWx1ZX0+XG4gICAgICAgICAgICAgICAgPEZvcm1Db250cm9sPlxuICAgICAgICAgICAgICAgICAgPFNlbGVjdFRyaWdnZXIgZGF0YS10ZXN0aWQ9J3NlbGVjdC1zdGF0dXMnPlxuICAgICAgICAgICAgICAgICAgICA8U2VsZWN0VmFsdWUgcGxhY2Vob2xkZXI9J1NlbGVjdCBzdGF0dXMnIC8+XG4gICAgICAgICAgICAgICAgICA8L1NlbGVjdFRyaWdnZXI+XG4gICAgICAgICAgICAgICAgPC9Gb3JtQ29udHJvbD5cbiAgICAgICAgICAgICAgICA8U2VsZWN0Q29udGVudD5cbiAgICAgICAgICAgICAgICAgIHtTVEFUVVNfT1BUSU9OUy5tYXAoKHN0YXR1cykgPT4gKFxuICAgICAgICAgICAgICAgICAgICA8U2VsZWN0SXRlbSBrZXk9e3N0YXR1cy52YWx1ZX0gdmFsdWU9e3N0YXR1cy52YWx1ZX0+XG4gICAgICAgICAgICAgICAgICAgICAge3N0YXR1cy5sYWJlbH1cbiAgICAgICAgICAgICAgICAgICAgPC9TZWxlY3RJdGVtPlxuICAgICAgICAgICAgICAgICAgKSl9XG4gICAgICAgICAgICAgICAgPC9TZWxlY3RDb250ZW50PlxuICAgICAgICAgICAgICA8L1NlbGVjdD5cbiAgICAgICAgICAgICAgPEZvcm1NZXNzYWdlIC8+XG4gICAgICAgICAgICA8L0Zvcm1JdGVtPlxuICAgICAgICAgICl9XG4gICAgICAgIC8+XG4gICAgICA8L2Rpdj5cblxuICAgICAgey8qIERlc2NyaXB0aW9uICovfVxuICAgICAgPEZvcm1GaWVsZFxuICAgICAgICBjb250cm9sPXtmb3JtLmNvbnRyb2x9XG4gICAgICAgIG5hbWU9J2Rlc2NyaXB0aW9uJ1xuICAgICAgICByZW5kZXI9eyh7IGZpZWxkIH0pID0+IChcbiAgICAgICAgICA8Rm9ybUl0ZW0+XG4gICAgICAgICAgICA8Rm9ybUxhYmVsPkRlc2NyaXB0aW9uPC9Gb3JtTGFiZWw+XG4gICAgICAgICAgICA8Rm9ybUNvbnRyb2w+XG4gICAgICAgICAgICAgIDxUZXh0YXJlYVxuICAgICAgICAgICAgICAgIHsuLi5maWVsZH1cbiAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcj0nQmlsbCBkZXNjcmlwdGlvbi4uLidcbiAgICAgICAgICAgICAgICByb3dzPXszfVxuICAgICAgICAgICAgICAgIGRhdGEtdGVzdGlkPSd0ZXh0YXJlYS1kZXNjcmlwdGlvbidcbiAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgIDwvRm9ybUNvbnRyb2w+XG4gICAgICAgICAgICA8Rm9ybU1lc3NhZ2UgLz5cbiAgICAgICAgICA8L0Zvcm1JdGVtPlxuICAgICAgICApfVxuICAgICAgLz5cblxuICAgICAgey8qIE5vdGVzICovfVxuICAgICAgPEZvcm1GaWVsZFxuICAgICAgICBjb250cm9sPXtmb3JtLmNvbnRyb2x9XG4gICAgICAgIG5hbWU9J25vdGVzJ1xuICAgICAgICByZW5kZXI9eyh7IGZpZWxkIH0pID0+IChcbiAgICAgICAgICA8Rm9ybUl0ZW0+XG4gICAgICAgICAgICA8Rm9ybUxhYmVsPk5vdGVzPC9Gb3JtTGFiZWw+XG4gICAgICAgICAgICA8Rm9ybUNvbnRyb2w+XG4gICAgICAgICAgICAgIDxUZXh0YXJlYVxuICAgICAgICAgICAgICAgIHsuLi5maWVsZH1cbiAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcj0nQWRkaXRpb25hbCBub3Rlcy4uLidcbiAgICAgICAgICAgICAgICByb3dzPXszfVxuICAgICAgICAgICAgICAgIGRhdGEtdGVzdGlkPSd0ZXh0YXJlYS1ub3RlcydcbiAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgIDwvRm9ybUNvbnRyb2w+XG4gICAgICAgICAgICA8Rm9ybU1lc3NhZ2UgLz5cbiAgICAgICAgICA8L0Zvcm1JdGVtPlxuICAgICAgICApfVxuICAgICAgLz5cblxuICAgICAgey8qIEZpbGUgQXR0YWNobWVudHMgKi99XG4gICAgICA8ZGl2IGNsYXNzTmFtZT1cInNwYWNlLXktM1wiPlxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggaXRlbXMtY2VudGVyIGdhcC0yXCI+XG4gICAgICAgICAgPFBhcGVyY2xpcCBjbGFzc05hbWU9XCJ3LTQgaC00IHRleHQtZ3JheS01MDBcIiAvPlxuICAgICAgICAgIDxsYWJlbCBjbGFzc05hbWU9XCJ0ZXh0LXNtIGZvbnQtbWVkaXVtIHRleHQtZ3JheS03MDBcIj5cbiAgICAgICAgICAgIEF0dGFjaG1lbnRzXG4gICAgICAgICAgPC9sYWJlbD5cbiAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9XCJ0ZXh0LXhzIHRleHQtZ3JheS01MDBcIj5cbiAgICAgICAgICAgIChPcHRpb25hbCAtIFNjcmVlbnNob3RzLCByZWNlaXB0cywgc3VwcG9ydGluZyBkb2N1bWVudHMpXG4gICAgICAgICAgPC9zcGFuPlxuICAgICAgICA8L2Rpdj5cbiAgICAgICAgPEZpbGVVcGxvYWRcbiAgICAgICAgICBvbkZpbGVzU2VsZWN0PXtoYW5kbGVGaWxlc1NlbGVjdH1cbiAgICAgICAgICBvbkZpbGVzUmVtb3ZlPXtoYW5kbGVGaWxlUmVtb3ZlfVxuICAgICAgICAgIG1heEZpbGVzPXs1fVxuICAgICAgICAgIG1heFNpemU9ezEwfVxuICAgICAgICAgIGFjY2VwdGVkVHlwZXM9e1snaW1hZ2UvKicsICcucGRmJywgJy5kb2MnLCAnLmRvY3gnLCAnLnR4dCddfVxuICAgICAgICAgIGFsbG93UGFzdGU9e3RydWV9XG4gICAgICAgICAgY2xhc3NOYW1lPVwiYm9yZGVyIGJvcmRlci1ncmF5LTIwMCByb3VuZGVkLWxnIHAtNFwiXG4gICAgICAgICAgZGF0YS10ZXN0aWQ9XCJiaWxsLWZpbGUtdXBsb2FkXCJcbiAgICAgICAgPlxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidGV4dC1jZW50ZXIgcHktNlwiPlxuICAgICAgICAgICAgPFVwbG9hZCBjbGFzc05hbWU9XCJteC1hdXRvIGgtOCB3LTggdGV4dC1ncmF5LTQwMCBtYi0yXCIgLz5cbiAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cInRleHQtc20gdGV4dC1ncmF5LTYwMFwiPlxuICAgICAgICAgICAgICBEcm9wIGZpbGVzIGhlcmUsIGNsaWNrIHRvIGJyb3dzZSwgb3IgcGFzdGUgc2NyZWVuc2hvdHNcbiAgICAgICAgICAgIDwvcD5cbiAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cInRleHQteHMgdGV4dC1ncmF5LTUwMCBtdC0xXCI+XG4gICAgICAgICAgICAgIEF0dGFjaCByZWNlaXB0cywgc2NyZWVuc2hvdHMsIG9yIHN1cHBvcnRpbmcgZG9jdW1lbnRzXG4gICAgICAgICAgICA8L3A+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgIDwvRmlsZVVwbG9hZD5cbiAgICAgIDwvZGl2PlxuICAgIDwvPlxuICApO1xuXG4gIC8vIEZvciBlZGl0IG1vZGUsIHJlbmRlciBzaW1wbGUgZm9ybVxuICBpZiAobW9kZSA9PT0gJ2VkaXQnKSB7XG4gICAgcmV0dXJuIChcbiAgICAgIDxGb3JtIHsuLi5mb3JtfT5cbiAgICAgICAgPGZvcm0gb25TdWJtaXQ9e2Zvcm0uaGFuZGxlU3VibWl0KG9uU3VibWl0KX0gY2xhc3NOYW1lPSdzcGFjZS15LTYgcHQtNCBib3JkZXItdCc+XG4gICAgICAgICAge3JlbmRlckZvcm1GaWVsZHMoKX1cblxuICAgICAgICAgIHsvKiBGb3JtIEFjdGlvbnMgKi99XG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9J2ZsZXgganVzdGlmeS1lbmQgZ2FwLTIgcHQtNCBib3JkZXItdCc+XG4gICAgICAgICAgICB7b25DYW5jZWwgJiYgKFxuICAgICAgICAgICAgICA8QnV0dG9uXG4gICAgICAgICAgICAgICAgdHlwZT0nYnV0dG9uJ1xuICAgICAgICAgICAgICAgIHZhcmlhbnQ9J291dGxpbmUnXG4gICAgICAgICAgICAgICAgb25DbGljaz17b25DYW5jZWx9XG4gICAgICAgICAgICAgICAgZGF0YS10ZXN0aWQ9J2J1dHRvbi1jYW5jZWwnXG4gICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICBDYW5jZWxcbiAgICAgICAgICAgICAgPC9CdXR0b24+XG4gICAgICAgICAgICApfVxuICAgICAgICAgICAgPEJ1dHRvbiB0eXBlPSdzdWJtaXQnIGRpc2FibGVkPXtzdWJtaXRNdXRhdGlvbi5pc1BlbmRpbmd9IGRhdGEtdGVzdGlkPSdidXR0b24tdXBkYXRlJz5cbiAgICAgICAgICAgICAge3N1Ym1pdE11dGF0aW9uLmlzUGVuZGluZyA/ICdVcGRhdGluZy4uLicgOiAnVXBkYXRlIEJpbGwnfVxuICAgICAgICAgICAgPC9CdXR0b24+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgIDwvZm9ybT5cbiAgICAgIDwvRm9ybT5cbiAgICApO1xuICB9XG5cbiAgLy8gRm9yIGNyZWF0ZSBtb2RlLCByZW5kZXIgd2l0aCB0YWJzIChtYW51YWwgKyBBSSB1cGxvYWQpXG4gIHJldHVybiAoXG4gICAgPGRpdiBjbGFzc05hbWU9J3NwYWNlLXktNic+XG4gICAgICA8VGFicyB2YWx1ZT17YWN0aXZlVGFifSBvblZhbHVlQ2hhbmdlPXtzZXRBY3RpdmVUYWJ9IGNsYXNzTmFtZT0ndy1mdWxsJz5cbiAgICAgICAgPFRhYnNMaXN0IGNsYXNzTmFtZT0nZ3JpZCB3LWZ1bGwgZ3JpZC1jb2xzLTInPlxuICAgICAgICAgIDxUYWJzVHJpZ2dlciB2YWx1ZT0nbWFudWFsJyBjbGFzc05hbWU9J2ZsZXggaXRlbXMtY2VudGVyIGdhcC0yJyBkYXRhLXRlc3RpZD0ndGFiLW1hbnVhbCc+XG4gICAgICAgICAgICA8RmlsZVRleHQgY2xhc3NOYW1lPSd3LTQgaC00JyAvPlxuICAgICAgICAgICAgQ3JlYXRlIE1hbnVhbGx5XG4gICAgICAgICAgPC9UYWJzVHJpZ2dlcj5cbiAgICAgICAgICA8VGFic1RyaWdnZXIgdmFsdWU9J3VwbG9hZCcgY2xhc3NOYW1lPSdmbGV4IGl0ZW1zLWNlbnRlciBnYXAtMicgZGF0YS10ZXN0aWQ9J3RhYi11cGxvYWQnPlxuICAgICAgICAgICAgPFVwbG9hZCBjbGFzc05hbWU9J3ctNCBoLTQnIC8+XG4gICAgICAgICAgICBVcGxvYWQgJiBBbmFseXplXG4gICAgICAgICAgPC9UYWJzVHJpZ2dlcj5cbiAgICAgICAgPC9UYWJzTGlzdD5cblxuICAgICAgICA8VGFic0NvbnRlbnQgdmFsdWU9J3VwbG9hZCcgY2xhc3NOYW1lPSdzcGFjZS15LTQnPlxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSdwLTYgdGV4dC1jZW50ZXIgYm9yZGVyLTIgYm9yZGVyLWRhc2hlZCBib3JkZXItZ3JheS0yMDAgcm91bmRlZC1sZyc+XG4gICAgICAgICAgICA8VXBsb2FkIGNsYXNzTmFtZT0ndy0xMiBoLTEyIG14LWF1dG8gdGV4dC1ncmF5LTQwMCBtYi00JyAvPlxuICAgICAgICAgICAgPGgzIGNsYXNzTmFtZT0ndGV4dC1sZyBmb250LXNlbWlib2xkIG1iLTInPlVwbG9hZCBCaWxsIERvY3VtZW50PC9oMz5cbiAgICAgICAgICAgIDxwIGNsYXNzTmFtZT0ndGV4dC1ncmF5LTYwMCBtYi00Jz5cbiAgICAgICAgICAgICAgVXBsb2FkIGFuIGltYWdlIG9yIFBERiBvZiB5b3VyIGJpbGwgZm9yIEFJIGFuYWx5c2lzXG4gICAgICAgICAgICA8L3A+XG5cbiAgICAgICAgICAgIDxJbnB1dFxuICAgICAgICAgICAgICB0eXBlPSdmaWxlJ1xuICAgICAgICAgICAgICBhY2NlcHQ9J2ltYWdlLyosLnBkZidcbiAgICAgICAgICAgICAgb25DaGFuZ2U9e2hhbmRsZUZpbGVVcGxvYWR9XG4gICAgICAgICAgICAgIGRpc2FibGVkPXtpc0FuYWx5emluZ31cbiAgICAgICAgICAgICAgY2xhc3NOYW1lPSdtYXgtdy1zbSBteC1hdXRvJ1xuICAgICAgICAgICAgICBkYXRhLXRlc3RpZD0naW5wdXQtZmlsZS11cGxvYWQnXG4gICAgICAgICAgICAvPlxuXG4gICAgICAgICAgICB7aXNBbmFseXppbmcgJiYgKFxuICAgICAgICAgICAgICA8ZGl2XG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lPSdtdC00IGZsZXggaXRlbXMtY2VudGVyIGp1c3RpZnktY2VudGVyIGdhcC0yJ1xuICAgICAgICAgICAgICAgIGRhdGEtdGVzdGlkPSdsb2FkaW5nLWFuYWx5c2lzJ1xuICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9J2FuaW1hdGUtc3BpbiB3LTUgaC01IGJvcmRlci0yIGJvcmRlci1ibHVlLTUwMCBib3JkZXItdC10cmFuc3BhcmVudCByb3VuZGVkLWZ1bGwnPjwvZGl2PlxuICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT0ndGV4dC1zbSB0ZXh0LWdyYXktNjAwJz5BbmFseXppbmcgZG9jdW1lbnQgd2l0aCBBSS4uLjwvc3Bhbj5cbiAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICApfVxuXG4gICAgICAgICAgICB7YWlBbmFseXNpc0RhdGEgJiYgKFxuICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0nbXQtNCBwLTQgYmctYmx1ZS01MCByb3VuZGVkLWxnJyBkYXRhLXRlc3RpZD0nYWktYW5hbHlzaXMtcmVzdWx0Jz5cbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0nZmxleCBpdGVtcy1jZW50ZXIgZ2FwLTIgbWItMic+XG4gICAgICAgICAgICAgICAgICA8U3BhcmtsZXMgY2xhc3NOYW1lPSd3LTUgaC01IHRleHQtYmx1ZS02MDAnIC8+XG4gICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9J2ZvbnQtbWVkaXVtIHRleHQtYmx1ZS04MDAnPkFJIEFuYWx5c2lzIENvbXBsZXRlPC9zcGFuPlxuICAgICAgICAgICAgICAgICAgPEJhZGdlIHZhcmlhbnQ9J291dGxpbmUnIGNsYXNzTmFtZT0ndGV4dC14cyc+XG4gICAgICAgICAgICAgICAgICAgIHsoYWlBbmFseXNpc0RhdGEuY29uZmlkZW5jZSAqIDEwMCkudG9GaXhlZCgxKX0lIGNvbmZpZGVuY2VcbiAgICAgICAgICAgICAgICAgIDwvQmFkZ2U+XG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9J3RleHQtc20gdGV4dC1ibHVlLTcwMCBzcGFjZS15LTEnPlxuICAgICAgICAgICAgICAgICAgPHA+XG4gICAgICAgICAgICAgICAgICAgIDxzdHJvbmc+VGl0bGU6PC9zdHJvbmc+IHthaUFuYWx5c2lzRGF0YS50aXRsZX1cbiAgICAgICAgICAgICAgICAgIDwvcD5cbiAgICAgICAgICAgICAgICAgIDxwPlxuICAgICAgICAgICAgICAgICAgICA8c3Ryb25nPlZlbmRvcjo8L3N0cm9uZz4ge2FpQW5hbHlzaXNEYXRhLnZlbmRvcn1cbiAgICAgICAgICAgICAgICAgIDwvcD5cbiAgICAgICAgICAgICAgICAgIDxwPlxuICAgICAgICAgICAgICAgICAgICA8c3Ryb25nPkFtb3VudDo8L3N0cm9uZz4gJHthaUFuYWx5c2lzRGF0YS50b3RhbEFtb3VudH1cbiAgICAgICAgICAgICAgICAgIDwvcD5cbiAgICAgICAgICAgICAgICAgIDxwPlxuICAgICAgICAgICAgICAgICAgICA8c3Ryb25nPkNhdGVnb3J5Ojwvc3Ryb25nPiB7YWlBbmFseXNpc0RhdGEuY2F0ZWdvcnl9XG4gICAgICAgICAgICAgICAgICA8L3A+XG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgPEJ1dHRvblxuICAgICAgICAgICAgICAgICAgb25DbGljaz17YXBwbHlBaUFuYWx5c2lzfVxuICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPSdtdC0zIHctZnVsbCdcbiAgICAgICAgICAgICAgICAgIHNpemU9J3NtJ1xuICAgICAgICAgICAgICAgICAgZGF0YS10ZXN0aWQ9J2J1dHRvbi1hcHBseS1haSdcbiAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICBBcHBseSB0byBGb3JtXG4gICAgICAgICAgICAgICAgPC9CdXR0b24+XG4gICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgKX1cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgPC9UYWJzQ29udGVudD5cblxuICAgICAgICA8VGFic0NvbnRlbnQgdmFsdWU9J21hbnVhbCcgY2xhc3NOYW1lPSdzcGFjZS15LTQnPlxuICAgICAgICAgIDxGb3JtIHsuLi5mb3JtfT5cbiAgICAgICAgICAgIDxmb3JtIG9uU3VibWl0PXtmb3JtLmhhbmRsZVN1Ym1pdChvblN1Ym1pdCl9IGNsYXNzTmFtZT0nc3BhY2UteS02Jz5cbiAgICAgICAgICAgICAge3JlbmRlckZvcm1GaWVsZHMoKX1cblxuICAgICAgICAgICAgICB7LyogQUkgQW5hbHlzaXMgSW5mbyAqL31cbiAgICAgICAgICAgICAge2FpQW5hbHlzaXNEYXRhICYmIChcbiAgICAgICAgICAgICAgICA8ZGl2XG4gICAgICAgICAgICAgICAgICBjbGFzc05hbWU9J3AtNCBiZy1ibHVlLTUwIHJvdW5kZWQtbGcgYm9yZGVyIGJvcmRlci1ibHVlLTIwMCdcbiAgICAgICAgICAgICAgICAgIGRhdGEtdGVzdGlkPSdhaS1pbmZvLWJhZGdlJ1xuICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSdmbGV4IGl0ZW1zLWNlbnRlciBnYXAtMiBtYi0yJz5cbiAgICAgICAgICAgICAgICAgICAgPFNwYXJrbGVzIGNsYXNzTmFtZT0ndy00IGgtNCB0ZXh0LWJsdWUtNjAwJyAvPlxuICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9J3RleHQtc20gZm9udC1tZWRpdW0gdGV4dC1ibHVlLTgwMCc+XG4gICAgICAgICAgICAgICAgICAgICAgRm9ybSBwb3B1bGF0ZWQgZnJvbSBBSSBhbmFseXNpc1xuICAgICAgICAgICAgICAgICAgICA8L3NwYW4+XG4gICAgICAgICAgICAgICAgICAgIDxCYWRnZSB2YXJpYW50PSdvdXRsaW5lJyBjbGFzc05hbWU9J3RleHQteHMnPlxuICAgICAgICAgICAgICAgICAgICAgIHsoYWlBbmFseXNpc0RhdGEuY29uZmlkZW5jZSAqIDEwMCkudG9GaXhlZCgxKX0lIGNvbmZpZGVuY2VcbiAgICAgICAgICAgICAgICAgICAgPC9CYWRnZT5cbiAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPSd0ZXh0LXhzIHRleHQtYmx1ZS02MDAnPlxuICAgICAgICAgICAgICAgICAgICBSZXZpZXcgYW5kIG1vZGlmeSB0aGUgZm9ybSBhcyBuZWVkZWQgYmVmb3JlIGNyZWF0aW5nIHRoZSBiaWxsLlxuICAgICAgICAgICAgICAgICAgPC9wPlxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICApfVxuXG4gICAgICAgICAgICAgIHsvKiBGb3JtIEFjdGlvbnMgKi99XG4gICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSdmbGV4IGp1c3RpZnktZW5kIGdhcC0yIHB0LTQgYm9yZGVyLXQnPlxuICAgICAgICAgICAgICAgIDxCdXR0b25cbiAgICAgICAgICAgICAgICAgIHR5cGU9J3N1Ym1pdCdcbiAgICAgICAgICAgICAgICAgIGRpc2FibGVkPXtzdWJtaXRNdXRhdGlvbi5pc1BlbmRpbmd9XG4gICAgICAgICAgICAgICAgICBjbGFzc05hbWU9J21pbi13LVsxMjBweF0nXG4gICAgICAgICAgICAgICAgICBkYXRhLXRlc3RpZD0nYnV0dG9uLWNyZWF0ZSdcbiAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICB7c3VibWl0TXV0YXRpb24uaXNQZW5kaW5nID8gJ0NyZWF0aW5nLi4uJyA6ICdDcmVhdGUgQmlsbCd9XG4gICAgICAgICAgICAgICAgPC9CdXR0b24+XG4gICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgPC9mb3JtPlxuICAgICAgICAgIDwvRm9ybT5cbiAgICAgICAgPC9UYWJzQ29udGVudD5cbiAgICAgIDwvVGFicz5cbiAgICA8L2Rpdj5cbiAgKTtcbn1cblxuZXhwb3J0IGRlZmF1bHQgQmlsbEZvcm07XG4iXSwidmVyc2lvbiI6M30=