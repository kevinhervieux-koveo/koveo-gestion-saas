bc871bfa6d62bc06bd94ec049feb28e0
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.InvitationManagement = InvitationManagement;
const jsx_runtime_1 = require("react/jsx-runtime");
const react_1 = require("react");
const react_query_1 = require("@tanstack/react-query");
const queryClient_1 = require("@/lib/queryClient");
const use_toast_1 = require("@/hooks/use-toast");
const button_1 = require("@/components/ui/button");
const table_1 = require("@/components/ui/table");
const alert_dialog_1 = require("@/components/ui/alert-dialog");
const card_1 = require("@/components/ui/card");
const badge_1 = require("@/components/ui/badge");
const no_data_card_1 = require("@/components/ui/no-data-card");
const use_language_1 = require("@/hooks/use-language");
const lucide_react_1 = require("lucide-react");
function InvitationManagement() {
    const { toast } = (0, use_toast_1.useToast)();
    const { t } = (0, use_language_1.useLanguage)();
    const queryClient = (0, react_query_1.useQueryClient)();
    const [deletingInvitation, setDeletingInvitation] = (0, react_1.useState)(null);
    // Fetch pending invitations with role-based filtering
    const { data: invitations = [], isLoading } = (0, react_query_1.useQuery)({
        queryKey: ['/api/invitations/pending'],
        queryFn: async () => {
            const response = await (0, queryClient_1.apiRequest)('GET', '/api/invitations/pending');
            return response.json();
        },
    });
    // Delete invitation mutation
    const deleteInvitationMutation = (0, react_query_1.useMutation)({
        mutationFn: async (invitationId) => {
            const response = await (0, queryClient_1.apiRequest)('DELETE', `/api/invitations/${invitationId}`);
            return response.json();
        },
        onSuccess: () => {
            toast({
                title: 'Success',
                description: t('invitationDeletedSuccess'),
            });
            setDeletingInvitation(null);
            queryClient.invalidateQueries({ queryKey: ['/api/invitations/pending'] });
        },
        onError: (error) => {
            toast({
                title: 'Error',
                description: t('invitationDeletedError'),
                variant: 'destructive',
            });
        },
    });
    const formatDate = (dateString) => {
        return new Date(dateString).toLocaleDateString('en-CA', {
            year: 'numeric',
            month: 'short',
            day: 'numeric',
            hour: '2-digit',
            minute: '2-digit',
        });
    };
    const isExpired = (expiresAt) => {
        return new Date(expiresAt) < new Date();
    };
    const getRoleColor = (role) => {
        switch (role) {
            case 'admin':
                return 'bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200';
            case 'manager':
                return 'bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200';
            case 'tenant':
                return 'bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200';
            case 'resident':
                return 'bg-purple-100 text-purple-800 dark:bg-purple-900 dark:text-purple-200';
            default:
                return 'bg-gray-100 text-gray-800 dark:bg-gray-900 dark:text-gray-200';
        }
    };
    if (isLoading) {
        return ((0, jsx_runtime_1.jsxs)(card_1.Card, { children: [(0, jsx_runtime_1.jsxs)(card_1.CardHeader, { children: [(0, jsx_runtime_1.jsx)(card_1.CardTitle, { children: t('pendingInvitations') }), (0, jsx_runtime_1.jsx)(card_1.CardDescription, { children: t('loadingInvitations') })] }), (0, jsx_runtime_1.jsx)(card_1.CardContent, { children: (0, jsx_runtime_1.jsx)("div", { className: "flex items-center justify-center py-8", children: (0, jsx_runtime_1.jsx)("div", { className: "animate-spin rounded-full h-8 w-8 border-b-2 border-primary" }) }) })] }));
    }
    return ((0, jsx_runtime_1.jsxs)(jsx_runtime_1.Fragment, { children: [(0, jsx_runtime_1.jsxs)(card_1.Card, { children: [(0, jsx_runtime_1.jsxs)(card_1.CardHeader, { children: [(0, jsx_runtime_1.jsxs)(card_1.CardTitle, { className: "flex items-center gap-2", children: [(0, jsx_runtime_1.jsx)(lucide_react_1.Mail, { className: "h-5 w-5" }), t('pendingInvitations')] }), (0, jsx_runtime_1.jsx)(card_1.CardDescription, { children: t('managePendingInvitations') })] }), (0, jsx_runtime_1.jsx)(card_1.CardContent, { children: invitations.length === 0 ? ((0, jsx_runtime_1.jsx)(no_data_card_1.NoDataCard, { icon: lucide_react_1.Mail, titleKey: "noInvitationsFound", descriptionKey: "noInvitationsFound", testId: "no-invitations-message", iconSize: 12 })) : ((0, jsx_runtime_1.jsx)("div", { className: "overflow-x-auto", children: (0, jsx_runtime_1.jsxs)(table_1.Table, { children: [(0, jsx_runtime_1.jsx)(table_1.TableHeader, { children: (0, jsx_runtime_1.jsxs)(table_1.TableRow, { children: [(0, jsx_runtime_1.jsx)(table_1.TableHead, { children: t('email') }), (0, jsx_runtime_1.jsx)(table_1.TableHead, { children: t('role') }), (0, jsx_runtime_1.jsx)(table_1.TableHead, { children: t('organization') }), (0, jsx_runtime_1.jsx)(table_1.TableHead, { children: t('building') }), (0, jsx_runtime_1.jsx)(table_1.TableHead, { children: t('residence') }), (0, jsx_runtime_1.jsx)(table_1.TableHead, { children: t('expires') }), (0, jsx_runtime_1.jsx)(table_1.TableHead, { children: t('status') }), (0, jsx_runtime_1.jsx)(table_1.TableHead, { className: "text-right", children: t('actions') })] }) }), (0, jsx_runtime_1.jsx)(table_1.TableBody, { children: invitations.map((invitation) => ((0, jsx_runtime_1.jsxs)(table_1.TableRow, { "data-testid": `invitation-row-${invitation.id}`, children: [(0, jsx_runtime_1.jsx)(table_1.TableCell, { className: "font-medium", children: (0, jsx_runtime_1.jsxs)("div", { className: "flex items-center gap-2", children: [(0, jsx_runtime_1.jsx)(lucide_react_1.Mail, { className: "h-4 w-4 text-gray-400" }), invitation.email] }) }), (0, jsx_runtime_1.jsx)(table_1.TableCell, { children: (0, jsx_runtime_1.jsx)(badge_1.Badge, { className: getRoleColor(invitation.role), children: invitation.role }) }), (0, jsx_runtime_1.jsx)(table_1.TableCell, { children: invitation.organizationName ? ((0, jsx_runtime_1.jsxs)("div", { className: "flex items-center gap-2", children: [(0, jsx_runtime_1.jsx)(lucide_react_1.Building2, { className: "h-4 w-4 text-gray-400" }), (0, jsx_runtime_1.jsx)("span", { className: "text-sm", children: invitation.organizationName })] })) : ((0, jsx_runtime_1.jsx)("span", { className: "text-gray-400 text-sm", children: "\u2014" })) }), (0, jsx_runtime_1.jsx)(table_1.TableCell, { children: invitation.buildingName ? ((0, jsx_runtime_1.jsxs)("div", { className: "flex items-center gap-2", children: [(0, jsx_runtime_1.jsx)(lucide_react_1.Building2, { className: "h-4 w-4 text-gray-400" }), (0, jsx_runtime_1.jsx)("span", { className: "text-sm", children: invitation.buildingName })] })) : ((0, jsx_runtime_1.jsx)("span", { className: "text-gray-400 text-sm", children: "\u2014" })) }), (0, jsx_runtime_1.jsx)(table_1.TableCell, { children: invitation.residenceUnitNumber ? ((0, jsx_runtime_1.jsxs)("div", { className: "flex items-center gap-2", children: [(0, jsx_runtime_1.jsx)(lucide_react_1.Home, { className: "h-4 w-4 text-gray-400" }), (0, jsx_runtime_1.jsxs)("span", { className: "text-sm", children: [t('unit'), " ", invitation.residenceUnitNumber] })] })) : ((0, jsx_runtime_1.jsx)("span", { className: "text-gray-400 text-sm", children: "\u2014" })) }), (0, jsx_runtime_1.jsx)(table_1.TableCell, { children: (0, jsx_runtime_1.jsxs)("div", { className: "flex items-center gap-2", children: [(0, jsx_runtime_1.jsx)(lucide_react_1.Clock, { className: "h-4 w-4 text-gray-400" }), (0, jsx_runtime_1.jsx)("span", { className: `text-sm ${isExpired(invitation.expiresAt) ? 'text-red-600' : ''}`, children: formatDate(invitation.expiresAt) })] }) }), (0, jsx_runtime_1.jsx)(table_1.TableCell, { children: (0, jsx_runtime_1.jsx)(badge_1.Badge, { variant: isExpired(invitation.expiresAt) ? 'destructive' : 'default', children: isExpired(invitation.expiresAt) ? t('expired') : t('pending') }) }), (0, jsx_runtime_1.jsx)(table_1.TableCell, { className: "text-right", children: (0, jsx_runtime_1.jsx)(button_1.Button, { variant: "outline", size: "sm", onClick: () => setDeletingInvitation(invitation), "data-testid": `button-delete-invitation-${invitation.id}`, className: "text-red-600 hover:text-red-700 hover:bg-red-50", children: (0, jsx_runtime_1.jsx)(lucide_react_1.Trash2, { className: "h-4 w-4" }) }) })] }, invitation.id))) })] }) })) })] }), (0, jsx_runtime_1.jsx)(alert_dialog_1.AlertDialog, { open: !!deletingInvitation, onOpenChange: (open) => !open && setDeletingInvitation(null), children: (0, jsx_runtime_1.jsxs)(alert_dialog_1.AlertDialogContent, { children: [(0, jsx_runtime_1.jsxs)(alert_dialog_1.AlertDialogHeader, { children: [(0, jsx_runtime_1.jsx)(alert_dialog_1.AlertDialogTitle, { children: t('deleteInvitation') }), (0, jsx_runtime_1.jsx)(alert_dialog_1.AlertDialogDescription, { children: t('deleteInvitationConfirm').replace('{email}', deletingInvitation?.email || '') })] }), (0, jsx_runtime_1.jsxs)(alert_dialog_1.AlertDialogFooter, { children: [(0, jsx_runtime_1.jsx)(alert_dialog_1.AlertDialogCancel, { disabled: deleteInvitationMutation.isPending, "data-testid": "button-cancel-delete-invitation", children: t('cancel') }), (0, jsx_runtime_1.jsx)(alert_dialog_1.AlertDialogAction, { onClick: () => {
                                        if (deletingInvitation) {
                                            deleteInvitationMutation.mutate(deletingInvitation.id);
                                        }
                                    }, disabled: deleteInvitationMutation.isPending, "data-testid": "button-confirm-delete-invitation", className: "bg-red-600 hover:bg-red-700", children: deleteInvitationMutation.isPending ? 'Deleting...' : 'Delete' })] })] }) })] }));
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiL2hvbWUvcnVubmVyL3dvcmtzcGFjZS9jbGllbnQvc3JjL2NvbXBvbmVudHMvSW52aXRhdGlvbk1hbmFnZW1lbnQudHN4IiwibWFwcGluZ3MiOiI7O0FBNkNBLG9EQTBPQzs7QUF2UkQsaUNBQWlDO0FBQ2pDLHVEQUE4RTtBQUM5RSxtREFBK0M7QUFDL0MsaURBQTZDO0FBQzdDLG1EQUFnRDtBQUNoRCxpREFPK0I7QUFDL0IsK0RBU3NDO0FBQ3RDLCtDQUFpRztBQUNqRyxpREFBOEM7QUFDOUMsK0RBQTBEO0FBQzFELHVEQUFtRDtBQUNuRCwrQ0FBb0U7QUFrQnBFLFNBQWdCLG9CQUFvQjtJQUNsQyxNQUFNLEVBQUUsS0FBSyxFQUFFLEdBQUcsSUFBQSxvQkFBUSxHQUFFLENBQUM7SUFDN0IsTUFBTSxFQUFFLENBQUMsRUFBRSxHQUFHLElBQUEsMEJBQVcsR0FBRSxDQUFDO0lBQzVCLE1BQU0sV0FBVyxHQUFHLElBQUEsNEJBQWMsR0FBRSxDQUFDO0lBQ3JDLE1BQU0sQ0FBQyxrQkFBa0IsRUFBRSxxQkFBcUIsQ0FBQyxHQUFHLElBQUEsZ0JBQVEsRUFBK0IsSUFBSSxDQUFDLENBQUM7SUFFakcsc0RBQXNEO0lBQ3RELE1BQU0sRUFBRSxJQUFJLEVBQUUsV0FBVyxHQUFHLEVBQUUsRUFBRSxTQUFTLEVBQUUsR0FBRyxJQUFBLHNCQUFRLEVBQTBCO1FBQzlFLFFBQVEsRUFBRSxDQUFDLDBCQUEwQixDQUFDO1FBQ3RDLE9BQU8sRUFBRSxLQUFLLElBQUksRUFBRTtZQUNsQixNQUFNLFFBQVEsR0FBRyxNQUFNLElBQUEsd0JBQVUsRUFBQyxLQUFLLEVBQUUsMEJBQTBCLENBQUMsQ0FBQztZQUNyRSxPQUFPLFFBQVEsQ0FBQyxJQUFJLEVBQUUsQ0FBQztRQUN6QixDQUFDO0tBQ0YsQ0FBQyxDQUFDO0lBRUgsNkJBQTZCO0lBQzdCLE1BQU0sd0JBQXdCLEdBQUcsSUFBQSx5QkFBVyxFQUFDO1FBQzNDLFVBQVUsRUFBRSxLQUFLLEVBQUUsWUFBb0IsRUFBRSxFQUFFO1lBQ3pDLE1BQU0sUUFB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QWdCLGNBQUUsQ0FBQyxDQUFDLGtCQUFrQixDQUFDLEdBQW9CLEVBQzVELHVCQUFDLHFDQUFzQixjQUNwQixDQUFDLENBQUMseUJBQXlCLENBQUMsQ0FBQyxPQUFPLENBQUMsU0FBUyxFQUFFLGtCQUFrQixFQUFFLEtBQUssSUFBSSxFQUFFLENBQUMsR0FDMUQsSUFDUCxFQUNwQix3QkFBQyxnQ0FBaUIsZUFDaEIsdUJBQUMsZ0NBQWlCLElBQ2hCLFFBQVEsRUFBRSx3QkFBd0IsQ0FBQyxTQUFTLGlCQUNoQyxpQ0FBaUMsWUFFNUMsQ0FBQyxDQUFDLFFBQVEsQ0FBQyxHQUNNLEVBQ3BCLHVCQUFDLGdDQUFpQixJQUNoQixPQUFPLEVBQUUsR0FBRyxFQUFFO3dDQUNaLElBQUksa0JBQWtCLEVBQUUsQ0FBQzs0Q0FDdkIsd0JBQXdCLENBQUMsTUFBTSxDQUFDLGtCQUFrQixDQUFDLEVBQUUsQ0FBQyxDQUFDO3dDQUN6RCxDQUFDO29DQUNILENBQUMsRUFDRCxRQUFRLEVBQUUsd0JBQXdCLENBQUMsU0FBUyxpQkFDaEMsa0NBQWtDLEVBQzlDLFNBQVMsRUFBQyw2QkFBNkIsWUFFdEMsd0JBQXdCLENBQUMsU0FBUyxDQUFDLENBQUMsQ0FBQyxhQUFhLENBQUMsQ0FBQyxDQUFDLFFBQVEsR0FDNUMsSUFDRixJQUNELEdBQ1QsSUFDYixDQUNKLENBQUM7QUFDSixDQUFDIiwibmFtZXMiOltdLCJzb3VyY2VzIjpbIi9ob21lL3J1bm5lci93b3Jrc3BhY2UvY2xpZW50L3NyYy9jb21wb25lbnRzL0ludml0YXRpb25NYW5hZ2VtZW50LnRzeCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyB1c2VTdGF0ZSB9IGZyb20gJ3JlYWN0JztcbmltcG9ydCB7IHVzZVF1ZXJ5LCB1c2VNdXRhdGlvbiwgdXNlUXVlcnlDbGllbnQgfSBmcm9tICdAdGFuc3RhY2svcmVhY3QtcXVlcnknO1xuaW1wb3J0IHsgYXBpUmVxdWVzdCB9IGZyb20gJ0AvbGliL3F1ZXJ5Q2xpZW50JztcbmltcG9ydCB7IHVzZVRvYXN0IH0gZnJvbSAnQC9ob29rcy91c2UtdG9hc3QnO1xuaW1wb3J0IHsgQnV0dG9uIH0gZnJvbSAnQC9jb21wb25lbnRzL3VpL2J1dHRvbic7XG5pbXBvcnQge1xuICBUYWJsZSxcbiAgVGFibGVCb2R5LFxuICBUYWJsZUNlbGwsXG4gIFRhYmxlSGVhZCxcbiAgVGFibGVIZWFkZXIsXG4gIFRhYmxlUm93LFxufSBmcm9tICdAL2NvbXBvbmVudHMvdWkvdGFibGUnO1xuaW1wb3J0IHtcbiAgQWxlcnREaWFsb2csXG4gIEFsZXJ0RGlhbG9nQWN0aW9uLFxuICBBbGVydERpYWxvZ0NhbmNlbCxcbiAgQWxlcnREaWFsb2dDb250ZW50LFxuICBBbGVydERpYWxvZ0Rlc2NyaXB0aW9uLFxuICBBbGVydERpYWxvZ0Zvb3RlcixcbiAgQWxlcnREaWFsb2dIZWFkZXIsXG4gIEFsZXJ0RGlhbG9nVGl0bGUsXG59IGZyb20gJ0AvY29tcG9uZW50cy91aS9hbGVydC1kaWFsb2cnO1xuaW1wb3J0IHsgQ2FyZCwgQ2FyZENvbnRlbnQsIENhcmREZXNjcmlwdGlvbiwgQ2FyZEhlYWRlciwgQ2FyZFRpdGxlIH0gZnJvbSAnQC9jb21wb25lbnRzL3VpL2NhcmQnO1xuaW1wb3J0IHsgQmFkZ2UgfSBmcm9tICdAL2NvbXBvbmVudHMvdWkvYmFkZ2UnO1xuaW1wb3J0IHsgTm9EYXRhQ2FyZCB9IGZyb20gJ0AvY29tcG9uZW50cy91aS9uby1kYXRhLWNhcmQnO1xuaW1wb3J0IHsgdXNlTGFuZ3VhZ2UgfSBmcm9tICdAL2hvb2tzL3VzZS1sYW5ndWFnZSc7XG5pbXBvcnQgeyBUcmFzaDIsIE1haWwsIENsb2NrLCBCdWlsZGluZzIsIEhvbWUgfSBmcm9tICdsdWNpZGUtcmVhY3QnO1xuXG5pbnRlcmZhY2UgSW52aXRhdGlvbldpdGhEZXRhaWxzIHtcbiAgaWQ6IHN0cmluZztcbiAgZW1haWw6IHN0cmluZztcbiAgcm9sZTogc3RyaW5nO1xuICBzdGF0dXM6IHN0cmluZztcbiAgZXhwaXJlc0F0OiBzdHJpbmc7XG4gIGNyZWF0ZWRBdDogc3RyaW5nO1xuICBvcmdhbml6YXRpb25JZDogc3RyaW5nIHwgbnVsbDtcbiAgYnVpbGRpbmdJZDogc3RyaW5nIHwgbnVsbDtcbiAgcmVzaWRlbmNlSWQ6IHN0cmluZyB8IG51bGw7XG4gIG9yZ2FuaXphdGlvbk5hbWU/OiBzdHJpbmc7XG4gIGJ1aWxkaW5nTmFtZT86IHN0cmluZztcbiAgcmVzaWRlbmNlVW5pdE51bWJlcj86IHN0cmluZztcbiAgaW52aXRlZEJ5TmFtZT86IHN0cmluZztcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIEludml0YXRpb25NYW5hZ2VtZW50KCkge1xuICBjb25zdCB7IHRvYXN0IH0gPSB1c2VUb2FzdCgpO1xuICBjb25zdCB7IHQgfSA9IHVzZUxhbmd1YWdlKCk7XG4gIGNvbnN0IHF1ZXJ5Q2xpZW50ID0gdXNlUXVlcnlDbGllbnQoKTtcbiAgY29uc3QgW2RlbGV0aW5nSW52aXRhdGlvbiwgc2V0RGVsZXRpbmdJbnZpdGF0aW9uXSA9IHVzZVN0YXRlPEludml0YXRpb25XaXRoRGV0YWlscyB8IG51bGw+KG51bGwpO1xuXG4gIC8vIEZldGNoIHBlbmRpbmcgaW52aXRhdGlvbnMgd2l0aCByb2xlLWJhc2VkIGZpbHRlcmluZ1xuICBjb25zdCB7IGRhdGE6IGludml0YXRpb25zID0gW10sIGlzTG9hZGluZyB9ID0gdXNlUXVlcnk8SW52aXRhdGlvbldpdGhEZXRhaWxzW10+KHtcbiAgICBxdWVyeUtleTogWycvYXBpL2ludml0YXRpb25zL3BlbmRpbmcnXSxcbiAgICBxdWVyeUZuOiBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGFwaVJlcXVlc3QoJ0dFVCcsICcvYXBpL2ludml0YXRpb25zL3BlbmRpbmcnKTtcbiAgICAgIHJldHVybiByZXNwb25zZS5qc29uKCk7XG4gICAgfSxcbiAgfSk7XG5cbiAgLy8gRGVsZXRlIGludml0YXRpb24gbXV0YXRpb25cbiAgY29uc3QgZGVsZXRlSW52aXRhdGlvbk11dGF0aW9uID0gdXNlTXV0YXRpb24oe1xuICAgIG11dGF0aW9uRm46IGFzeW5jIChpbnZpdGF0aW9uSWQ6IHN0cmluZykgPT4ge1xuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBhcGlSZXF1ZXN0KCdERUxFVEUnLCBgL2FwaS9pbnZpdGF0aW9ucy8ke2ludml0YXRpb25JZH1gKTtcbiAgICAgIHJldHVybiByZXNwb25zZS5qc29uKCk7XG4gICAgfSxcbiAgICBvblN1Y2Nlc3M6ICgpID0+IHtcbiAgICAgIHRvYXN0KHtcbiAgICAgICAgdGl0bGU6ICdTdWNjZXNzJyxcbiAgICAgICAgZGVzY3JpcHRpb246IHQoJ2ludml0YXRpb25EZWxldGVkU3VjY2VzcycpLFxuICAgICAgfSk7XG4gICAgICBzZXREZWxldGluZ0ludml0YXRpb24obnVsbCk7XG4gICAgICBxdWVyeUNsaWVudC5pbnZhbGlkYXRlUXVlcmllcyh7IHF1ZXJ5S2V5OiBbJy9hcGkvaW52aXRhdGlvbnMvcGVuZGluZyddIH0pO1xuICAgIH0sXG4gICAgb25FcnJvcjogKGVycm9yOiBFcnJvcikgPT4ge1xuICAgICAgdG9hc3Qoe1xuICAgICAgICB0aXRsZTogJ0Vycm9yJyxcbiAgICAgICAgZGVzY3JpcHRpb246IHQoJ2ludml0YXRpb25EZWxldGVkRXJyb3InKSxcbiAgICAgICAgdmFyaWFudDogJ2Rlc3RydWN0aXZlJyxcbiAgICAgIH0pO1xuICAgIH0sXG4gIH0pO1xuXG4gIGNvbnN0IGZvcm1hdERhdGUgPSAoZGF0ZVN0cmluZzogc3RyaW5nKSA9PiB7XG4gICAgcmV0dXJuIG5ldyBEYXRlKGRhdGVTdHJpbmcpLnRvTG9jYWxlRGF0ZVN0cmluZygnZW4tQ0EnLCB7XG4gICAgICB5ZWFyOiAnbnVtZXJpYycsXG4gICAgICBtb250aDogJ3Nob3J0JyxcbiAgICAgIGRheTogJ251bWVyaWMnLFxuICAgICAgaG91cjogJzItZGlnaXQnLFxuICAgICAgbWludXRlOiAnMi1kaWdpdCcsXG4gICAgfSk7XG4gIH07XG5cbiAgY29uc3QgaXNFeHBpcmVkID0gKGV4cGlyZXNBdDogc3RyaW5nKSA9PiB7XG4gICAgcmV0dXJuIG5ldyBEYXRlKGV4cGlyZXNBdCkgPCBuZXcgRGF0ZSgpO1xuICB9O1xuXG4gIGNvbnN0IGdldFJvbGVDb2xvciA9IChyb2xlOiBzdHJpbmcpID0+IHtcbiAgICBzd2l0Y2ggKHJvbGUpIHtcbiAgICAgIGNhc2UgJ2FkbWluJzpcbiAgICAgICAgcmV0dXJuICdiZy1yZWQtMTAwIHRleHQtcmVkLTgwMCBkYXJrOmJnLXJlZC05MDAgZGFyazp0ZXh0LXJlZC0yMDAnO1xuICAgICAgY2FzZSAnbWFuYWdlcic6XG4gICAgICAgIHJldHVybiAnYmctYmx1ZS0xMDAgdGV4dC1ibHVlLTgwMCBkYXJrOmJnLWJsdWUtOTAwIGRhcms6dGV4dC1ibHVlLTIwMCc7XG4gICAgICBjYXNlICd0ZW5hbnQnOlxuICAgICAgICByZXR1cm4gJ2JnLWdyZWVuLTEwMCB0ZXh0LWdyZWVuLTgwMCBkYXJrOmJnLWdyZWVuLTkwMCBkYXJrOnRleHQtZ3JlZW4tMjAwJztcbiAgICAgIGNhc2UgJ3Jlc2lkZW50JzpcbiAgICAgICAgcmV0dXJuICdiZy1wdXJwbGUtMTAwIHRleHQtcHVycGxlLTgwMCBkYXJrOmJnLXB1cnBsZS05MDAgZGFyazp0ZXh0LXB1cnBsZS0yMDAnO1xuICAgICAgZGVmYXVsdDpcbiAgICAgICAgcmV0dXJuICdiZy1ncmF5LTEwMCB0ZXh0LWdyYXktODAwIGRhcms6YmctZ3JheS05MDAgZGFyazp0ZXh0LWdyYXktMjAwJztcbiAgICB9XG4gIH07XG5cbiAgaWYgKGlzTG9hZGluZykge1xuICAgIHJldHVybiAoXG4gICAgICA8Q2FyZD5cbiAgICAgICAgPENhcmRIZWFkZXI+XG4gICAgICAgICAgPENhcmRUaXRsZT57dCgncGVuZGluZ0ludml0YXRpb25zJyl9PC9DYXJkVGl0bGU+XG4gICAgICAgICAgPENhcmREZXNjcmlwdGlvbj57dCgnbG9hZGluZ0ludml0YXRpb25zJyl9PC9DYXJkRGVzY3JpcHRpb24+XG4gICAgICAgIDwvQ2FyZEhlYWRlcj5cbiAgICAgICAgPENhcmRDb250ZW50PlxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBpdGVtcy1jZW50ZXIganVzdGlmeS1jZW50ZXIgcHktOFwiPlxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJhbmltYXRlLXNwaW4gcm91bmRlZC1mdWxsIGgtOCB3LTggYm9yZGVyLWItMiBib3JkZXItcHJpbWFyeVwiPjwvZGl2PlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICA8L0NhcmRDb250ZW50PlxuICAgICAgPC9DYXJkPlxuICAgICk7XG4gIH1cblxuICByZXR1cm4gKFxuICAgIDw+XG4gICAgICA8Q2FyZD5cbiAgICAgICAgPENhcmRIZWFkZXI+XG4gICAgICAgICAgPENhcmRUaXRsZSBjbGFzc05hbWU9XCJmbGV4IGl0ZW1zLWNlbnRlciBnYXAtMlwiPlxuICAgICAgICAgICAgPE1haWwgY2xhc3NOYW1lPVwiaC01IHctNVwiIC8+XG4gICAgICAgICAgICB7dCgncGVuZGluZ0ludml0YXRpb25zJyl9XG4gICAgICAgICAgPC9DYXJkVGl0bGU+XG4gICAgICAgICAgPENhcmREZXNjcmlwdGlvbj5cbiAgICAgICAgICAgIHt0KCdtYW5hZ2VQZW5kaW5nSW52aXRhdGlvbnMnKX1cbiAgICAgICAgICA8L0NhcmREZXNjcmlwdGlvbj5cbiAgICAgICAgPC9DYXJkSGVhZGVyPlxuICAgICAgICA8Q2FyZENvbnRlbnQ+XG4gICAgICAgICAge2ludml0YXRpb25zLmxlbmd0aCA9PT0gMCA/IChcbiAgICAgICAgICAgIDxOb0RhdGFDYXJkXG4gICAgICAgICAgICAgIGljb249e01haWx9XG4gICAgICAgICAgICAgIHRpdGxlS2V5PVwibm9JbnZpdGF0aW9uc0ZvdW5kXCJcbiAgICAgICAgICAgICAgZGVzY3JpcHRpb25LZXk9XCJub0ludml0YXRpb25zRm91bmRcIlxuICAgICAgICAgICAgICB0ZXN0SWQ9XCJuby1pbnZpdGF0aW9ucy1tZXNzYWdlXCJcbiAgICAgICAgICAgICAgaWNvblNpemU9ezEyfVxuICAgICAgICAgICAgLz5cbiAgICAgICAgICApIDogKFxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJvdmVyZmxvdy14LWF1dG9cIj5cbiAgICAgICAgICAgICAgPFRhYmxlPlxuICAgICAgICAgICAgICAgIDxUYWJsZUhlYWRlcj5cbiAgICAgICAgICAgICAgICAgIDxUYWJsZVJvdz5cbiAgICAgICAgICAgICAgICAgICAgPFRhYmxlSGVhZD57dCgnZW1haWwnKX08L1RhYmxlSGVhZD5cbiAgICAgICAgICAgICAgICAgICAgPFRhYmxlSGVhZD57dCgncm9sZScpfTwvVGFibGVIZWFkPlxuICAgICAgICAgICAgICAgICAgICA8VGFibGVIZWFkPnt0KCdvcmdhbml6YXRpb24nKX08L1RhYmxlSGVhZD5cbiAgICAgICAgICAgICAgICAgICAgPFRhYmxlSGVhZD57dCgnYnVpbGRpbmcnKX08L1RhYmxlSGVhZD5cbiAgICAgICAgICAgICAgICAgICAgPFRhYmxlSGVhZD57dCgncmVzaWRlbmNlJyl9PC9UYWJsZUhlYWQ+XG4gICAgICAgICAgICAgICAgICAgIDxUYWJsZUhlYWQ+e3QoJ2V4cGlyZXMnKX08L1RhYmxlSGVhZD5cbiAgICAgICAgICAgICAgICAgICAgPFRhYmxlSGVhZD57dCgnc3RhdHVzJyl9PC9UYWJsZUhlYWQ+XG4gICAgICAgICAgICAgICAgICAgIDxUYWJsZUhlYWQgY2xhc3NOYW1lPVwidGV4dC1yaWdodFwiPnt0KCdhY3Rpb25zJyl9PC9UYWJsZUhlYWQ+XG4gICAgICAgICAgICAgICAgICA8L1RhYmxlUm93PlxuICAgICAgICAgICAgICAgIDwvVGFibGVIZWFkZXI+XG4gICAgICAgICAgICAgICAgPFRhYmxlQm9keT5cbiAgICAgICAgICAgICAgICAgIHtpbnZpdGF0aW9ucy5tYXAoKGludml0YXRpb24pID0+IChcbiAgICAgICAgICAgICAgICAgICAgPFRhYmxlUm93IGtleT17aW52aXRhdGlvbi5pZH0gZGF0YS10ZXN0aWQ9e2BpbnZpdGF0aW9uLXJvdy0ke2ludml0YXRpb24uaWR9YH0+XG4gICAgICAgICAgICAgICAgICAgICAgPFRhYmxlQ2VsbCBjbGFzc05hbWU9XCJmb250LW1lZGl1bVwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGl0ZW1zLWNlbnRlciBnYXAtMlwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICA8TWFpbCBjbGFzc05hbWU9XCJoLTQgdy00IHRleHQtZ3JheS00MDBcIiAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICB7aW52aXRhdGlvbi5lbWFpbH1cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgIDwvVGFibGVDZWxsPlxuICAgICAgICAgICAgICAgICAgICAgIDxUYWJsZUNlbGw+XG4gICAgICAgICAgICAgICAgICAgICAgICA8QmFkZ2UgY2xhc3NOYW1lPXtnZXRSb2xlQ29sb3IoaW52aXRhdGlvbi5yb2xlKX0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHtpbnZpdGF0aW9uLnJvbGV9XG4gICAgICAgICAgICAgICAgICAgICAgICA8L0JhZGdlPlxuICAgICAgICAgICAgICAgICAgICAgIDwvVGFibGVDZWxsPlxuICAgICAgICAgICAgICAgICAgICAgIDxUYWJsZUNlbGw+XG4gICAgICAgICAgICAgICAgICAgICAgICB7aW52aXRhdGlvbi5vcmdhbml6YXRpb25OYW1lID8gKFxuICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggaXRlbXMtY2VudGVyIGdhcC0yXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPEJ1aWxkaW5nMiBjbGFzc05hbWU9XCJoLTQgdy00IHRleHQtZ3JheS00MDBcIiAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT1cInRleHQtc21cIj57aW52aXRhdGlvbi5vcmdhbml6YXRpb25OYW1lfTwvc3Bhbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICApIDogKFxuICAgICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9XCJ0ZXh0LWdyYXktNDAwIHRleHQtc21cIj7igJQ8L3NwYW4+XG4gICAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICAgIDwvVGFibGVDZWxsPlxuICAgICAgICAgICAgICAgICAgICAgIDxUYWJsZUNlbGw+XG4gICAgICAgICAgICAgICAgICAgICAgICB7aW52aXRhdGlvbi5idWlsZGluZ05hbWUgPyAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBpdGVtcy1jZW50ZXIgZ2FwLTJcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8QnVpbGRpbmcyIGNsYXNzTmFtZT1cImgtNCB3LTQgdGV4dC1ncmF5LTQwMFwiIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPVwidGV4dC1zbVwiPntpbnZpdGF0aW9uLmJ1aWxkaW5nTmFtZX08L3NwYW4+XG4gICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgKSA6IChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPVwidGV4dC1ncmF5LTQwMCB0ZXh0LXNtXCI+4oCUPC9zcGFuPlxuICAgICAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgICA8L1RhYmxlQ2VsbD5cbiAgICAgICAgICAgICAgICAgICAgICA8VGFibGVDZWxsPlxuICAgICAgICAgICAgICAgICAgICAgICAge2ludml0YXRpb24ucmVzaWRlbmNlVW5pdE51bWJlciA/IChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGl0ZW1zLWNlbnRlciBnYXAtMlwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxIb21lIGNsYXNzTmFtZT1cImgtNCB3LTQgdGV4dC1ncmF5LTQwMFwiIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPVwidGV4dC1zbVwiPnt0KCd1bml0Jyl9IHtpbnZpdGF0aW9uLnJlc2lkZW5jZVVuaXROdW1iZXJ9PC9zcGFuPlxuICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICkgOiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT1cInRleHQtZ3JheS00MDAgdGV4dC1zbVwiPuKAlDwvc3Bhbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgICAgPC9UYWJsZUNlbGw+XG4gICAgICAgICAgICAgICAgICAgICAgPFRhYmxlQ2VsbD5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBpdGVtcy1jZW50ZXIgZ2FwLTJcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPENsb2NrIGNsYXNzTmFtZT1cImgtNCB3LTQgdGV4dC1ncmF5LTQwMFwiIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT17YHRleHQtc20gJHtpc0V4cGlyZWQoaW52aXRhdGlvbi5leHBpcmVzQXQpID8gJ3RleHQtcmVkLTYwMCcgOiAnJ31gfT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7Zm9ybWF0RGF0ZShpbnZpdGF0aW9uLmV4cGlyZXNBdCl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgIDwvc3Bhbj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgIDwvVGFibGVDZWxsPlxuICAgICAgICAgICAgICAgICAgICAgIDxUYWJsZUNlbGw+XG4gICAgICAgICAgICAgICAgICAgICAgICA8QmFkZ2UgXG4gICAgICAgICAgICAgICAgICAgICAgICAgIHZhcmlhbnQ9e2lzRXhwaXJlZChpbnZpdGF0aW9uLmV4cGlyZXNBdCkgPyAnZGVzdHJ1Y3RpdmUnIDogJ2RlZmF1bHQnfVxuICAgICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgICB7aXNFeHBpcmVkKGludml0YXRpb24uZXhwaXJlc0F0KSA/IHQoJ2V4cGlyZWQnKSA6IHQoJ3BlbmRpbmcnKX1cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvQmFkZ2U+XG4gICAgICAgICAgICAgICAgICAgICAgPC9UYWJsZUNlbGw+XG4gICAgICAgICAgICAgICAgICAgICAgPFRhYmxlQ2VsbCBjbGFzc05hbWU9XCJ0ZXh0LXJpZ2h0XCI+XG4gICAgICAgICAgICAgICAgICAgICAgICA8QnV0dG9uXG4gICAgICAgICAgICAgICAgICAgICAgICAgIHZhcmlhbnQ9XCJvdXRsaW5lXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgc2l6ZT1cInNtXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgb25DbGljaz17KCkgPT4gc2V0RGVsZXRpbmdJbnZpdGF0aW9uKGludml0YXRpb24pfVxuICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhLXRlc3RpZD17YGJ1dHRvbi1kZWxldGUtaW52aXRhdGlvbi0ke2ludml0YXRpb24uaWR9YH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwidGV4dC1yZWQtNjAwIGhvdmVyOnRleHQtcmVkLTcwMCBob3ZlcjpiZy1yZWQtNTBcIlxuICAgICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgICA8VHJhc2gyIGNsYXNzTmFtZT1cImgtNCB3LTRcIiAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgPC9CdXR0b24+XG4gICAgICAgICAgICAgICAgICAgICAgPC9UYWJsZUNlbGw+XG4gICAgICAgICAgICAgICAgICAgIDwvVGFibGVSb3c+XG4gICAgICAgICAgICAgICAgICApKX1cbiAgICAgICAgICAgICAgICA8L1RhYmxlQm9keT5cbiAgICAgICAgICAgICAgPC9UYWJsZT5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICl9XG4gICAgICAgIDwvQ2FyZENvbnRlbnQ+XG4gICAgICA8L0NhcmQ+XG5cbiAgICAgIHsvKiBEZWxldGUgQ29uZmlybWF0aW9uIERpYWxvZyAqL31cbiAgICAgIDxBbGVydERpYWxvZyBcbiAgICAgICAgb3Blbj17ISFkZWxldGluZ0ludml0YXRpb259IFxuICAgICAgICBvbk9wZW5DaGFuZ2U9eyhvcGVuKSA9PiAhb3BlbiAmJiBzZXREZWxldGluZ0ludml0YXRpb24obnVsbCl9XG4gICAgICA+XG4gICAgICAgIDxBbGVydERpYWxvZ0NvbnRlbnQ+XG4gICAgICAgICAgPEFsZXJ0RGlhbG9nSGVhZGVyPlxuICAgICAgICAgICAgPEFsZXJ0RGlhbG9nVGl0bGU+e3QoJ2RlbGV0ZUludml0YXRpb24nKX08L0FsZXJ0RGlhbG9nVGl0bGU+XG4gICAgICAgICAgICA8QWxlcnREaWFsb2dEZXNjcmlwdGlvbj5cbiAgICAgICAgICAgICAge3QoJ2RlbGV0ZUludml0YXRpb25Db25maXJtJykucmVwbGFjZSgne2VtYWlsfScsIGRlbGV0aW5nSW52aXRhdGlvbj8uZW1haWwgfHwgJycpfVxuICAgICAgICAgICAgPC9BbGVydERpYWxvZ0Rlc2NyaXB0aW9uPlxuICAgICAgICAgIDwvQWxlcnREaWFsb2dIZWFkZXI+XG4gICAgICAgICAgPEFsZXJ0RGlhbG9nRm9vdGVyPlxuICAgICAgICAgICAgPEFsZXJ0RGlhbG9nQ2FuY2VsIFxuICAgICAgICAgICAgICBkaXNhYmxlZD17ZGVsZXRlSW52aXRhdGlvbk11dGF0aW9uLmlzUGVuZGluZ31cbiAgICAgICAgICAgICAgZGF0YS10ZXN0aWQ9XCJidXR0b24tY2FuY2VsLWRlbGV0ZS1pbnZpdGF0aW9uXCJcbiAgICAgICAgICAgID5cbiAgICAgICAgICAgICAge3QoJ2NhbmNlbCcpfVxuICAgICAgICAgICAgPC9BbGVydERpYWxvZ0NhbmNlbD5cbiAgICAgICAgICAgIDxBbGVydERpYWxvZ0FjdGlvblxuICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKGRlbGV0aW5nSW52aXRhdGlvbikge1xuICAgICAgICAgICAgICAgICAgZGVsZXRlSW52aXRhdGlvbk11dGF0aW9uLm11dGF0ZShkZWxldGluZ0ludml0YXRpb24uaWQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgZGlzYWJsZWQ9e2RlbGV0ZUludml0YXRpb25NdXRhdGlvbi5pc1BlbmRpbmd9XG4gICAgICAgICAgICAgIGRhdGEtdGVzdGlkPVwiYnV0dG9uLWNvbmZpcm0tZGVsZXRlLWludml0YXRpb25cIlxuICAgICAgICAgICAgICBjbGFzc05hbWU9XCJiZy1yZWQtNjAwIGhvdmVyOmJnLXJlZC03MDBcIlxuICAgICAgICAgICAgPlxuICAgICAgICAgICAgICB7ZGVsZXRlSW52aXRhdGlvbk11dGF0aW9uLmlzUGVuZGluZyA/ICdEZWxldGluZy4uLicgOiAnRGVsZXRlJ31cbiAgICAgICAgICAgIDwvQWxlcnREaWFsb2dBY3Rpb24+XG4gICAgICAgICAgPC9BbGVydERpYWxvZ0Zvb3Rlcj5cbiAgICAgICAgPC9BbGVydERpYWxvZ0NvbnRlbnQ+XG4gICAgICA8L0FsZXJ0RGlhbG9nPlxuICAgIDwvPlxuICApO1xufSJdLCJ2ZXJzaW9uIjozfQ==