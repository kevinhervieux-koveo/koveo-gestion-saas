{"file":"/home/runner/workspace/node_modules/@testing-library/user-event/dist/cjs/document/patchFocus.js","mappings":"AAAA,YAAY,CAAC;AAEb,IAAI,aAAa,GAAG,OAAO,CAAC,2BAA2B,CAAC,CAAC;AACzD,OAAO,CAAC,oCAAoC,CAAC,CAAC;AAC9C,IAAI,gBAAgB,GAAG,OAAO,CAAC,oCAAoC,CAAC,CAAC;AACrE,OAAO,CAAC,sBAAsB,CAAC,CAAC;AAEhC,MAAM,OAAO,GAAG,MAAM,CAAC,4BAA4B,CAAC,CAAC;AACrD,SAAS,UAAU,CAAC,WAAW;IAC3B,IAAI,WAAW,CAAC,SAAS,CAAC,OAAO,CAAC,EAAE,CAAC;QACjC,OAAO;IACX,CAAC;IACD,6DAA6D;IAC7D,MAAM,EAAE,KAAK,EAAE,IAAI,EAAE,GAAG,WAAW,CAAC,SAAS,CAAC;IAC9C,MAAM,CAAC,gBAAgB,CAAC,WAAW,CAAC,SAAS,EAAE;QAC3C,KAAK,EAAE;YACH,YAAY,EAAE,IAAI;YAClB,GAAG,EAAE,GAAE,EAAE,CAAA,YAAY;SACxB;QACD,IAAI,EAAE;YACF,YAAY,EAAE,IAAI;YAClB,GAAG,EAAE,GAAE,EAAE,CAAA,WAAW;SACvB;QACD,CAAC,OAAO,CAAC,EAAE;YACP,YAAY,EAAE,IAAI;YAClB,GAAG,EAAE,GAAE,EAAE,CAAA,CAAC;gBACF,KAAK;gBACL,IAAI;aACP,CAAC;SACT;KACJ,CAAC,CAAC;IACH,IAAI,UAAU,CAAC;IACf,SAAS,YAAY,CAAC,OAAO;QACzB,IAAI,IAAI,CAAC,aAAa,CAAC,eAAe,KAAK,QAAQ,EAAE,CAAC;YAClD,OAAO,KAAK,CAAC,IAAI,CAAC,IAAI,EAAE,OAAO,CAAC,CAAC;QACrC,CAAC;QACD,MAAM,OAAO,GAAG,eAAe,CAAC,IAAI,CAAC,aAAa,CAAC,CAAC;QACpD,IAAI,OAAO,KAAK,IAAI,EAAE,CAAC;YACnB,OAAO;QACX,CAAC;QACD,MAAM,QAAQ,GAAG,MAAM,CAAC,YAAY,CAAC,CAAC;QACtC,UAAU,GAAG,QAAQ,CAAC;QACtB,IAAI,OAAO,EAAE,CAAC;YACV,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;YACnB,aAAa,CAAC,gBAAgB,CAAC,OAAO,EAAE,MAAM,EAAE;gBAC5C,aAAa,EAAE,IAAI;aACtB,CAAC,CAAC;YACH,aAAa,CAAC,gBAAgB,CAAC,OAAO,EAAE,UAAU,EAAE;gBAChD,aAAa,EAAE,UAAU,KAAK,QAAQ,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,IAAI;aACvD,CAAC,CAAC;QACP,CAAC;QACD,IAAI,UAAU,KAAK,QAAQ,EAAE,CAAC;YAC1B,KAAK,CAAC,IAAI,CAAC,IAAI,EAAE,OAAO,CAAC,CAAC;YAC1B,aAAa,CAAC,gBAAgB,CAAC,IAAI,EAAE,OAAO,EAAE;gBAC1C,aAAa,EAAE,OAAO;aACzB,CAAC,CAAC;QACP,CAAC;QACD,IAAI,UAAU,KAAK,QAAQ,EAAE,CAAC;YAC1B,aAAa,CAAC,gBAAgB,CAAC,IAAI,EAAE,SAAS,EAAE;gBAC5C,aAAa,EAAE,OAAO;aACzB,CAAC,CAAC;QACP,CAAC;IACL,CAAC;IACD,SAAS,WAAW;QAChB,IAAI,IAAI,CAAC,aAAa,CAAC,eAAe,KAAK,QAAQ,EAAE,CAAC;YAClD,OAAO,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;QAC3B,CAAC;QACD,MAAM,OAAO,GAAG,eAAe,CAAC,IAAI,CAAC,aAAa,CAAC,CAAC;QACpD,IAAI,OAAO,KAAK,IAAI,EAAE,CAAC;YACnB,OAAO;QACX,CAAC;QACD,MAAM,QAAQ,GAAG,MAAM,CAAC,WAAW,CAAC,CAAC;QACrC,UAAU,GAAG,QAAQ,CAAC;QACtB,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;QAChB,aAAa,CAAC,gBAAgB,CAAC,OAAO,EAAE,MAAM,EAAE;YAC5C,aAAa,EAAE,IAAI;SACtB,CAAC,CAAC;QACH,aAAa,CAAC,gBAAgB,CAAC,OAAO,EAAE,UAAU,EAAE;YAChD,aAAa,EAAE,IAAI;SACtB,CAAC,CAAC;IACP,CAAC;AACL,CAAC;AACD,SAAS,eAAe,CAAC,QAAQ;IAC7B,MAAM,MAAM,GAAG,gBAAgB,CAAC,gBAAgB,CAAC,QAAQ,CAAC,CAAC;IAC3D,OAAO,CAAC,MAAM,KAAK,IAAI,IAAI,MAAM,KAAK,SAAS,CAAC,CAAC,CAAC,SAAS,CAAC,CAAC,CAAC,MAAM,CAAC,OAAO,CAAC,KAAK,MAAM,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,MAAM,CAAC;AAC7G,CAAC;AACD,SAAS,YAAY,CAAC,WAAW;IAC7B,IAAI,WAAW,CAAC,SAAS,CAAC,OAAO,CAAC,EAAE,CAAC;QACjC,MAAM,EAAE,KAAK,EAAE,IAAI,EAAE,GAAG,WAAW,CAAC,SAAS,CAAC,OAAO,CAAC,CAAC;QACvD,MAAM,CAAC,gBAAgB,CAAC,WAAW,CAAC,SAAS,EAAE;YAC3C,KAAK,EAAE;gBACH,YAAY,EAAE,IAAI;gBAClB,GAAG,EAAE,GAAE,EAAE,CAAA,KAAK;aACjB;YACD,IAAI,EAAE;gBACF,YAAY,EAAE,IAAI;gBAClB,GAAG,EAAE,GAAE,EAAE,CAAA,IAAI;aAChB;SACJ,CAAC,CAAC;IACP,CAAC;AACL,CAAC;AAED,OAAO,CAAC,UAAU,GAAG,UAAU,CAAC;AAChC,OAAO,CAAC,YAAY,GAAG,YAAY,CAAC","names":[],"sources":["/home/runner/workspace/node_modules/@testing-library/user-event/dist/cjs/document/patchFocus.js"],"sourcesContent":["'use strict';\n\nvar dispatchEvent = require('../event/dispatchEvent.js');\nrequire('../utils/dataTransfer/Clipboard.js');\nvar getActiveElement = require('../utils/focus/getActiveElement.js');\nrequire('@testing-library/dom');\n\nconst patched = Symbol('patched focus/blur methods');\nfunction patchFocus(HTMLElement) {\n    if (HTMLElement.prototype[patched]) {\n        return;\n    }\n    // eslint-disable-next-line @typescript-eslint/unbound-method\n    const { focus, blur } = HTMLElement.prototype;\n    Object.defineProperties(HTMLElement.prototype, {\n        focus: {\n            configurable: true,\n            get: ()=>patchedFocus\n        },\n        blur: {\n            configurable: true,\n            get: ()=>patchedBlur\n        },\n        [patched]: {\n            configurable: true,\n            get: ()=>({\n                    focus,\n                    blur\n                })\n        }\n    });\n    let activeCall;\n    function patchedFocus(options) {\n        if (this.ownerDocument.visibilityState !== 'hidden') {\n            return focus.call(this, options);\n        }\n        const blurred = getActiveTarget(this.ownerDocument);\n        if (blurred === this) {\n            return;\n        }\n        const thisCall = Symbol('focus call');\n        activeCall = thisCall;\n        if (blurred) {\n            blur.call(blurred);\n            dispatchEvent.dispatchDOMEvent(blurred, 'blur', {\n                relatedTarget: this\n            });\n            dispatchEvent.dispatchDOMEvent(blurred, 'focusout', {\n                relatedTarget: activeCall === thisCall ? this : null\n            });\n        }\n        if (activeCall === thisCall) {\n            focus.call(this, options);\n            dispatchEvent.dispatchDOMEvent(this, 'focus', {\n                relatedTarget: blurred\n            });\n        }\n        if (activeCall === thisCall) {\n            dispatchEvent.dispatchDOMEvent(this, 'focusin', {\n                relatedTarget: blurred\n            });\n        }\n    }\n    function patchedBlur() {\n        if (this.ownerDocument.visibilityState !== 'hidden') {\n            return blur.call(this);\n        }\n        const blurred = getActiveTarget(this.ownerDocument);\n        if (blurred !== this) {\n            return;\n        }\n        const thisCall = Symbol('blur call');\n        activeCall = thisCall;\n        blur.call(this);\n        dispatchEvent.dispatchDOMEvent(blurred, 'blur', {\n            relatedTarget: null\n        });\n        dispatchEvent.dispatchDOMEvent(blurred, 'focusout', {\n            relatedTarget: null\n        });\n    }\n}\nfunction getActiveTarget(document) {\n    const active = getActiveElement.getActiveElement(document);\n    return (active === null || active === undefined ? undefined : active.tagName) === 'BODY' ? null : active;\n}\nfunction restoreFocus(HTMLElement) {\n    if (HTMLElement.prototype[patched]) {\n        const { focus, blur } = HTMLElement.prototype[patched];\n        Object.defineProperties(HTMLElement.prototype, {\n            focus: {\n                configurable: true,\n                get: ()=>focus\n            },\n            blur: {\n                configurable: true,\n                get: ()=>blur\n            }\n        });\n    }\n}\n\nexports.patchFocus = patchFocus;\nexports.restoreFocus = restoreFocus;\n"],"version":3}