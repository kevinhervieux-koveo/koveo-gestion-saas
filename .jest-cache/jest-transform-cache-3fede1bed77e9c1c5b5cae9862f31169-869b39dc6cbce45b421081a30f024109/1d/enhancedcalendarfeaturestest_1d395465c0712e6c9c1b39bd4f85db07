9d22990e4ffdec31f76cbe366aa28ce2
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const globals_1 = require("@jest/globals");
const date_fns_1 = require("date-fns");
/**
 * Enhanced Calendar Features Unit Tests
 * Tests the new opening hours visibility and reservation functionality
 */
(0, globals_1.describe)('Enhanced Calendar Features', () => {
    // Test data structures matching the enhanced schema
    const mockCommonSpace = {
        id: '75c4f108-3ec1-437d-bdec-35d1f8e2a44d',
        name: 'Salle communautaire',
        isReservable: true,
        openingHours: [
            {
                day: 'monday',
                open: '08:00',
                close: '20:00',
                isOpen: true,
                breaks: [
                    { start: '12:00', end: '13:00', reason: 'Cleaning' }
                ]
            },
            {
                day: 'tuesday',
                open: '08:00',
                close: '20:00',
                isOpen: true,
                breaks: []
            },
            {
                day: 'wednesday',
                open: '08:00',
                close: '20:00',
                isOpen: false
            },
            {
                day: 'thursday',
                open: '10:00',
                close: '18:00',
                isOpen: true,
                breaks: []
            },
            {
                day: 'friday',
                open: '08:00',
                close: '22:00',
                isOpen: true,
                breaks: []
            },
            {
                day: 'saturday',
                open: '09:00',
                close: '17:00',
                isOpen: true,
                breaks: []
            }
            // Sunday not defined (closed)
        ],
        unavailablePeriods: [
            {
                startDate: '2025-12-24T00:00:00Z',
                endDate: '2025-12-26T23:59:59Z',
                reason: 'Holiday closure',
                recurrence: 'yearly'
            },
            {
                startDate: '2025-01-15T00:00:00Z',
                endDate: '2025-01-17T23:59:59Z',
                reason: 'Maintenance',
                recurrence: 'none'
            }
        ]
    };
    // Use a future Monday for bookings
    const getFutureMonday = () => {
        const today = new Date();
        const futureMonday = (0, date_fns_1.addDays)(today, 14);
        while (futureMonday.getDay() !== 1) { // 1 = Monday
            futureMonday.setDate(futureMonday.getDate() + 1);
        }
        return futureMonday;
    };
    const futureBookingDate = getFutureMonday();
    const mockBookings = [
        {
            id: 'booking-1',
            startTime: new Date(futureBookingDate.getFullYear(), futureBookingDate.getMonth(), futureBookingDate.getDate(), 14, 0, 0).toISOString(),
            endTime: new Date(futureBookingDate.getFullYear(), futureBookingDate.getMonth(), futureBookingDate.getDate(), 16, 0, 0).toISOString(),
            status: 'confirmed',
            userId: 'user-1'
        },
        {
            id: 'booking-2',
            startTime: new Date(futureBookingDate.getFullYear(), futureBookingDate.getMonth(), futureBookingDate.getDate(), 10, 0, 0).toISOString(),
            endTime: new Date(futureBookingDate.getFullYear(), futureBookingDate.getMonth(), futureBookingDate.getDate(), 11, 30, 0).toISOString(),
            status: 'confirmed',
            userId: 'user-2'
        }
    ];
    (0, globals_1.describe)('Opening Hours Structure Validation', () => {
        (0, globals_1.test)('should validate enhanced opening hours structure', () => {
            const { openingHours } = mockCommonSpace;
            (0, globals_1.expect)(openingHours).toBeDefined();
            (0, globals_1.expect)(Array.isArray(openingHours)).toBe(true);
            // Check Monday entry with breaks
            const mondayHours = openingHours?.find(h => h.day === 'monday');
            (0, globals_1.expect)(mondayHours).toBeDefined();
            (0, globals_1.expect)(mondayHours?.isOpen).toBe(true);
            (0, globals_1.expect)(mondayHours?.open).toBe('08:00');
            (0, globals_1.expect)(mondayHours?.close).toBe('20:00');
            (0, globals_1.expect)(mondayHours?.breaks).toBeDefined();
            (0, globals_1.expect)(Array.isArray(mondayHours?.breaks)).toBe(true);
            (0, globals_1.expect)(mondayHours?.breaks?.length).toBe(1);
            (0, globals_1.expect)(mondayHours?.breaks?.[0].start).toBe('12:00');
            (0, globals_1.expect)(mondayHours?.breaks?.[0].end).toBe('13:00');
            (0, globals_1.expect)(mondayHours?.breaks?.[0].reason).toBe('Cleaning');
            // Check Wednesday (closed day)
            const wednesdayHours = openingHours?.find(h => h.day === 'wednesday');
            (0, globals_1.expect)(wednesdayHours).toBeDefined();
            (0, globals_1.expect)(wednesdayHours?.isOpen).toBe(false);
        });
        (0, globals_1.test)('should validate unavailable periods structure', () => {
            const { unavailablePeriods } = mockCommonSpace;
            (0, globals_1.expect)(unavailablePeriods).toBeDefined();
            (0, globals_1.expect)(Array.isArray(unavailablePeriods)).toBe(true);
            (0, globals_1.expect)(unavailablePeriods?.length).toBe(2);
            // Holiday closure
            const holidayClosure = unavailablePeriods?.[0];
            (0, globals_1.expect)(holidayClosure?.startDate).toBe('2025-12-24T00:00:00Z');
            (0, globals_1.expect)(holidayClosure?.endDate).toBe('2025-12-26T23:59:59Z');
            (0, globals_1.expect)(holidayClosure?.reason).toBe('Holiday closure');
            (0, globals_1.expect)(holidayClosure?.recurrence).toBe('yearly');
            // Maintenance period
            const maintenancePeriod = unavailablePeriods?.[1];
            (0, globals_1.expect)(maintenancePeriod?.startDate).toBe('2025-01-15T00:00:00Z');
            (0, globals_1.expect)(maintenancePeriod?.endDate).toBe('2025-01-17T23:59:59Z');
            (0, globals_1.expect)(maintenancePeriod?.reason).toBe('Maintenance');
            (0, globals_1.expect)(maintenancePeriod?.recurrence).toBe('none');
        });
    });
    (0, globals_1.describe)('Day Availability Logic', () => {
        const isDayAvailable = (checkDate, space = mockCommonSpace) => {
            // Past dates are not available
            const today = new Date();
            today.setHours(0, 0, 0, 0);
            const dayToCheck = new Date(checkDate);
            dayToCheck.setHours(0, 0, 0, 0);
            if (dayToCheck < today) {
                return false;
            }
            // Check unavailable periods
            if (space.unavailablePeriods) {
                for (const period of space.unavailablePeriods) {
                    const startDate = new Date(period.startDate);
                    const endDate = new Date(period.endDate);
                    startDate.setHours(0, 0, 0, 0);
                    endDate.setHours(23, 59, 59, 999);
                    if (dayToCheck >= startDate && dayToCheck <= endDate) {
                        return false;
                    }
                }
            }
            // Check opening hours
            if (space.openingHours) {
                const dayName = checkDate.toLocaleDateString('en-US', { weekday: 'long' }).toLowerCase();
                const dayHours = space.openingHours.find(h => h.day.toLowerCase() === dayName);
                if (!dayHours || dayHours.isOpen === false) {
                    return false;
                }
            }
            return true;
        };
        (0, globals_1.test)('should correctly identify available days', () => {
            const today = new Date();
            const tomorrow = (0, date_fns_1.addDays)(today, 1);
            // Use a more future date to avoid any edge cases
            const futureMonday = (0, date_fns_1.addDays)(today, 14); // Two weeks from today, ensure it's Monday
            while (futureMonday.getDay() !== 1) { // 1 = Monday
                futureMonday.setDate(futureMonday.getDate() + 1);
            }
            (0, globals_1.expect)(isDayAvailable(tomorrow)).toBe(true);
            (0, globals_1.expect)(isDayAvailable(futureMonday)).toBe(true);
        });
        (0, globals_1.test)('should correctly identify past dates as unavailable', () => {
            const yesterday = (0, date_fns_1.addDays)(new Date(), -1);
            (0, globals_1.expect)(isDayAvailable(yesterday)).toBe(false);
        });
        (0, globals_1.test)('should correctly identify closed days as unavailable', () => {
            const today = new Date();
            // Find next Wednesday (closed day)
            const futureWednesday = (0, date_fns_1.addDays)(today, 7);
            while (futureWednesday.getDay() !== 3) { // 3 = Wednesday
                futureWednesday.setDate(futureWednesday.getDate() + 1);
            }
            // Find next Sunday (no hours defined)  
            const futureSunday = (0, date_fns_1.addDays)(today, 7);
            while (futureSunday.getDay() !== 0) { // 0 = Sunday
                futureSunday.setDate(futureSunday.getDate() + 1);
            }
            (0, globals_1.expect)(isDayAvailable(futureWednesday)).toBe(false);
            (0, globals_1.expect)(isDayAvailable(futureSunday)).toBe(false);
        });
        (0, globals_1.test)('should correctly identify unavailable periods', () => {
            const christmasEve = new Date('2025-12-24');
            const christmasDay = new Date('2025-12-25');
            const boxingDay = new Date('2025-12-26');
            const maintenanceDay = new Date('2025-01-16');
            (0, globals_1.expect)(isDayAvailable(christmasEve)).toBe(false);
            (0, globals_1.expect)(isDayAvailable(christmasDay)).toBe(false);
            (0, globals_1.expect)(isDayAvailable(boxingDay)).toBe(false);
            (0, globals_1.expect)(isDayAvailable(maintenanceDay)).toBe(false);
        });
    });
    (0, globals_1.describe)('Time Slot Availability Logic', () => {
        const isTimeSlotAvailable = (date, time, duration = 60) => {
            // Check if day is available
            if (!isDayAvailable(date)) {
                return false;
            }
            const [hour, minute] = time.split(':').map(Number);
            const slotStart = new Date(date);
            slotStart.setHours(hour, minute, 0, 0);
            const slotEnd = new Date(slotStart);
            slotEnd.setMinutes(slotEnd.getMinutes() + duration);
            // Check opening hours
            const dayName = date.toLocaleDateString('en-US', { weekday: 'long' }).toLowerCase();
            const dayHours = mockCommonSpace.openingHours?.find(h => h.day.toLowerCase() === dayName);
            if (!dayHours || dayHours.isOpen === false) {
                return false;
            }
            // Parse opening hours
            const openTime = new Date(date);
            const [openHour, openMinute] = dayHours.open.split(':').map(Number);
            openTime.setHours(openHour, openMinute, 0, 0);
            const closeTime = new Date(date);
            const [closeHour, closeMinute] = dayHours.close.split(':').map(Number);
            closeTime.setHours(closeHour, closeMinute, 0, 0);
            // Check if slot is within opening hours
            if (slotStart < openTime || slotEnd > closeTime) {
                return false;
            }
            // Check breaks
            if (dayHours.breaks) {
                for (const breakPeriod of dayHours.breaks) {
                    const breakStart = new Date(date);
                    const [breakStartHour, breakStartMinute] = breakPeriod.start.split(':').map(Number);
                    breakStart.setHours(breakStartHour, breakStartMinute, 0, 0);
                    const breakEnd = new Date(date);
                    const [breakEndHour, breakEndMinute] = breakPeriod.end.split(':').map(Number);
                    breakEnd.setHours(breakEndHour, breakEndMinute, 0, 0);
                    // Check if slot overlaps with break
                    if ((slotStart >= breakStart && slotStart < breakEnd) ||
                        (slotEnd > breakStart && slotEnd <= breakEnd) ||
                        (slotStart <= breakStart && slotEnd >= breakEnd)) {
                        return false;
                    }
                }
            }
            // Check conflicts with existing bookings
            const dayBookings = mockBookings.filter(booking => {
                const bookingDate = new Date(booking.startTime);
                return bookingDate.toDateString() === date.toDateString() && booking.status === 'confirmed';
            });
            return !dayBookings.some(booking => {
                const bookingStart = new Date(booking.startTime);
                const bookingEnd = new Date(booking.endTime);
                return ((slotStart >= bookingStart && slotStart < bookingEnd) ||
                    (slotEnd > bookingStart && slotEnd <= bookingEnd) ||
                    (slotStart <= bookingStart && slotEnd >= bookingEnd));
            });
        };
        const isDayAvailable = (checkDate) => {
            const today = new Date();
            today.setHours(0, 0, 0, 0);
            const dayToCheck = new Date(checkDate);
            dayToCheck.setHours(0, 0, 0, 0);
            if (dayToCheck < today) {
                return false;
            }
            if (mockCommonSpace.unavailablePeriods) {
                for (const period of mockCommonSpace.unavailablePeriods) {
                    const startDate = new Date(period.startDate);
                    const endDate = new Date(period.endDate);
                    startDate.setHours(0, 0, 0, 0);
                    endDate.setHours(23, 59, 59, 999);
                    if (dayToCheck >= startDate && dayToCheck <= endDate) {
                        return false;
                    }
                }
            }
            if (mockCommonSpace.openingHours) {
                const dayName = checkDate.toLocaleDateString('en-US', { weekday: 'long' }).toLowerCase();
                const dayHours = mockCommonSpace.openingHours.find(h => h.day.toLowerCase() === dayName);
                if (!dayHours || dayHours.isOpen === false) {
                    return false;
                }
            }
            return true;
        };
        (0, globals_1.test)('should allow available time slots within opening hours', () => {
            const today = new Date();
            const futureMonday = (0, date_fns_1.addDays)(today, 14);
            while (futureMonday.getDay() !== 1) { // 1 = Monday
                futureMonday.setDate(futureMonday.getDate() + 1);
            }
            (0, globals_1.expect)(isTimeSlotAvailable(futureMonday, '08:00')).toBe(true); // Opening time
            (0, globals_1.expect)(isTimeSlotAvailable(futureMonday, '09:00')).toBe(true); // Within hours
            (0, globals_1.expect)(isTimeSlotAvailable(futureMonday, '19:00')).toBe(true); // Before closing
        });
        (0, globals_1.test)('should reject time slots outside opening hours', () => {
            const today = new Date();
            const futureMonday = (0, date_fns_1.addDays)(today, 14);
            while (futureMonday.getDay() !== 1) { // 1 = Monday
                futureMonday.setDate(futureMonday.getDate() + 1);
            }
            (0, globals_1.expect)(isTimeSlotAvailable(futureMonday, '07:00')).toBe(false); // Before opening
            (0, globals_1.expect)(isTimeSlotAvailable(futureMonday, '20:00')).toBe(false); // At closing time (would end after)
            (0, globals_1.expect)(isTimeSlotAvailable(futureMonday, '21:00')).toBe(false); // After closing
        });
        (0, globals_1.test)('should reject time slots during breaks', () => {
            const today = new Date();
            const futureMonday = (0, date_fns_1.addDays)(today, 14);
            while (futureMonday.getDay() !== 1) { // 1 = Monday
                futureMonday.setDate(futureMonday.getDate() + 1);
            }
            (0, globals_1.expect)(isTimeSlotAvailable(futureMonday, '12:00')).toBe(false); // During break
            (0, globals_1.expect)(isTimeSlotAvailable(futureMonday, '12:30')).toBe(false); // During break
            (0, globals_1.expect)(isTimeSlotAvailable(futureMonday, '11:30')).toBe(false); // Would extend into break
            (0, globals_1.expect)(isTimeSlotAvailable(futureMonday, '13:00')).toBe(true); // After break
        });
        (0, globals_1.test)('should reject time slots that conflict with existing bookings', () => {
            const bookingDate = new Date(futureBookingDate); // Use the same future Monday
            // Test times that should be available (not conflicting with bookings)
            // Monday opening hours are 8:00-20:00, so these should be available
            (0, globals_1.expect)(isTimeSlotAvailable(bookingDate, '08:00')).toBe(true); // Opening time
            (0, globals_1.expect)(isTimeSlotAvailable(bookingDate, '09:00')).toBe(true); // Before first booking
            // Booking exists 10:00-11:30, these should be blocked
            (0, globals_1.expect)(isTimeSlotAvailable(bookingDate, '10:00')).toBe(false);
            (0, globals_1.expect)(isTimeSlotAvailable(bookingDate, '11:00')).toBe(false);
            // Booking exists 14:00-16:00, these should be blocked
            (0, globals_1.expect)(isTimeSlotAvailable(bookingDate, '14:00')).toBe(false);
            (0, globals_1.expect)(isTimeSlotAvailable(bookingDate, '15:00')).toBe(false);
            // Time after bookings should be available
            (0, globals_1.expect)(isTimeSlotAvailable(bookingDate, '18:00')).toBe(true); // Well after bookings
        });
    });
    (0, globals_1.describe)('Visual Indicators Logic', () => {
        (0, globals_1.test)('should correctly identify booked time slots', () => {
            const bookingDate = new Date(futureBookingDate);
            // Test that the booking detection logic works
            const bookingTimes = ['10:30', '11:00', '14:30', '15:00']; // Times within booking periods
            bookingTimes.forEach(time => {
                const hasBooking = mockBookings.some(booking => {
                    const bookingStart = new Date(booking.startTime);
                    const bookingEnd = new Date(booking.endTime);
                    const timeSlot = new Date(bookingDate);
                    const [hour, minute] = time.split(':').map(Number);
                    timeSlot.setHours(hour, minute, 0, 0);
                    return timeSlot >= bookingStart && timeSlot < bookingEnd;
                });
                (0, globals_1.expect)(hasBooking).toBe(true);
            });
        });
        (0, globals_1.test)('should correctly identify available time slots', () => {
            const bookingDate = new Date(futureBookingDate);
            const availableTimes = ['08:00', '09:00', '13:00', '17:00']; // Times outside booking periods
            availableTimes.forEach(time => {
                const hasBooking = mockBookings.some(booking => {
                    const bookingStart = new Date(booking.startTime);
                    const bookingEnd = new Date(booking.endTime);
                    const timeSlot = new Date(bookingDate);
                    const [hour, minute] = time.split(':').map(Number);
                    timeSlot.setHours(hour, minute, 0, 0);
                    return timeSlot >= bookingStart && timeSlot < bookingEnd;
                });
                (0, globals_1.expect)(hasBooking).toBe(false);
            });
        });
    });
    (0, globals_1.describe)('Calendar Display Logic', () => {
        (0, globals_1.test)('should provide correct CSS classes for different day states', () => {
            const getDateClass = (date) => {
                const today = new Date();
                const isCurrentDay = date.toDateString() === today.toDateString();
                const isAvailable = isDayAvailable(date);
                if (!isAvailable) {
                    return 'bg-red-100 text-red-600 cursor-not-allowed border border-red-200';
                }
                else if (isCurrentDay) {
                    return 'bg-blue-100 text-blue-900 hover:bg-blue-200';
                }
                else {
                    return 'hover:bg-gray-100';
                }
            };
            const today = new Date();
            const futureWednesday = new Date('2025-06-04'); // Closed day
            const futureMonday = (0, date_fns_1.addDays)(new Date(), 21); // Use a date in the future
            while (futureMonday.getDay() !== 1) { // 1 = Monday
                futureMonday.setDate(futureMonday.getDate() + 1);
            }
            (0, globals_1.expect)(getDateClass(today)).toContain('bg-blue-100'); // Today
            (0, globals_1.expect)(getDateClass(futureWednesday)).toContain('bg-red-100'); // Unavailable
            (0, globals_1.expect)(getDateClass(futureMonday)).toBe('hover:bg-gray-100'); // Available
        });
        const isDayAvailable = (checkDate) => {
            const today = new Date();
            today.setHours(0, 0, 0, 0);
            const dayToCheck = new Date(checkDate);
            dayToCheck.setHours(0, 0, 0, 0);
            if (dayToCheck < today) {
                return false;
            }
            if (mockCommonSpace.unavailablePeriods) {
                for (const period of mockCommonSpace.unavailablePeriods) {
                    const startDate = new Date(period.startDate);
                    const endDate = new Date(period.endDate);
                    startDate.setHours(0, 0, 0, 0);
                    endDate.setHours(23, 59, 59, 999);
                    if (dayToCheck >= startDate && dayToCheck <= endDate) {
                        return false;
                    }
                }
            }
            if (mockCommonSpace.openingHours) {
                const dayName = checkDate.toLocaleDateString('en-US', { weekday: 'long' }).toLowerCase();
                const dayHours = mockCommonSpace.openingHours.find(h => h.day.toLowerCase() === dayName);
                if (!dayHours || dayHours.isOpen === false) {
                    return false;
                }
            }
            return true;
        };
        (0, globals_1.test)('should show correct legend items', () => {
            const legendItems = [
                { color: 'bg-blue-600', label: 'Selected' },
                { color: 'bg-orange-500', label: 'Booked' },
                { color: 'bg-red-500', label: 'Unavailable' },
                { color: 'bg-blue-200', label: 'Today' }
            ];
            (0, globals_1.expect)(legendItems).toHaveLength(4);
            (0, globals_1.expect)(legendItems.find(item => item.label === 'Unavailable')).toBeDefined();
        });
        (0, globals_1.test)('should provide correct CSS classes for time slot buttons', () => {
            const getTimeSlotClass = (time, isAvailable, hasBooking, isSelected) => {
                if (!isAvailable) {
                    return 'bg-red-100 border-red-200 text-red-600 cursor-not-allowed';
                }
                else if (hasBooking) {
                    return 'bg-orange-100 border-orange-200 text-orange-700 cursor-not-allowed';
                }
                else if (isSelected) {
                    return 'bg-blue-500 border-blue-600 text-white font-semibold';
                }
                else {
                    return 'bg-white border-gray-200 text-gray-700 hover:bg-gray-100 hover:border-gray-300';
                }
            };
            (0, globals_1.expect)(getTimeSlotClass('09:00', true, false, false)).toBe('bg-white border-gray-200 text-gray-700 hover:bg-gray-100 hover:border-gray-300');
            (0, globals_1.expect)(getTimeSlotClass('09:00', true, false, true)).toBe('bg-blue-500 border-blue-600 text-white font-semibold');
            (0, globals_1.expect)(getTimeSlotClass('09:00', true, true, false)).toBe('bg-orange-100 border-orange-200 text-orange-700 cursor-not-allowed');
            (0, globals_1.expect)(getTimeSlotClass('09:00', false, false, false)).toBe('bg-red-100 border-red-200 text-red-600 cursor-not-allowed');
        });
    });
    (0, globals_1.describe)('New Booking Form Tests', () => {
        (0, globals_1.test)('should validate time slot grid generation', () => {
            const timeSlots = [];
            for (let hour = 6; hour <= 22; hour++) {
                timeSlots.push(`${hour.toString().padStart(2, '0')}:00`);
                timeSlots.push(`${hour.toString().padStart(2, '0')}:30`);
            }
            (0, globals_1.expect)(timeSlots).toContain('06:00');
            (0, globals_1.expect)(timeSlots).toContain('06:30');
            (0, globals_1.expect)(timeSlots).toContain('22:00');
            (0, globals_1.expect)(timeSlots).toContain('22:30');
            (0, globals_1.expect)(timeSlots.length).toBe(34); // 17 hours * 2 slots per hour
        });
        (0, globals_1.test)('should handle start and end time selection logic', () => {
            let currentStartTime = '';
            let currentEndTime = '';
            const selectTime = (time) => {
                if (!currentStartTime || (currentStartTime && currentEndTime)) {
                    // Set start time
                    currentStartTime = time;
                    currentEndTime = '';
                }
                else {
                    // Set end time if start time is already set
                    if (time > currentStartTime) {
                        currentEndTime = time;
                    }
                    else {
                        // If selected time is before start time, make it the new start time
                        currentStartTime = time;
                        currentEndTime = '';
                    }
                }
            };
            // Initial state
            (0, globals_1.expect)(currentStartTime).toBe('');
            (0, globals_1.expect)(currentEndTime).toBe('');
            // Select first time (should become start time)
            selectTime('09:00');
            (0, globals_1.expect)(currentStartTime).toBe('09:00');
            (0, globals_1.expect)(currentEndTime).toBe('');
            // Select later time (should become end time)
            selectTime('11:00');
            (0, globals_1.expect)(currentStartTime).toBe('09:00');
            (0, globals_1.expect)(currentEndTime).toBe('11:00');
            // Select another time (should reset and become new start time)
            selectTime('14:00');
            (0, globals_1.expect)(currentStartTime).toBe('14:00');
            (0, globals_1.expect)(currentEndTime).toBe('');
            // Select earlier time (should become new start time)
            selectTime('13:00');
            (0, globals_1.expect)(currentStartTime).toBe('13:00');
            (0, globals_1.expect)(currentEndTime).toBe('');
        });
        (0, globals_1.test)('should calculate booking duration correctly', () => {
            const calculateDuration = (startTime, endTime) => {
                if (!startTime || !endTime)
                    return null;
                const start = new Date(`2000-01-01T${startTime}:00`);
                const end = new Date(`2000-01-01T${endTime}:00`);
                const duration = (end.getTime() - start.getTime()) / (1000 * 60);
                return {
                    totalMinutes: duration,
                    hours: Math.floor(duration / 60),
                    minutes: duration % 60
                };
            };
            const duration1 = calculateDuration('09:00', '11:00');
            (0, globals_1.expect)(duration1?.totalMinutes).toBe(120);
            (0, globals_1.expect)(duration1?.hours).toBe(2);
            (0, globals_1.expect)(duration1?.minutes).toBe(0);
            const duration2 = calculateDuration('14:30', '16:00');
            (0, globals_1.expect)(duration2?.totalMinutes).toBe(90);
            (0, globals_1.expect)(duration2?.hours).toBe(1);
            (0, globals_1.expect)(duration2?.minutes).toBe(30);
            const noDuration = calculateDuration('09:00', '');
            (0, globals_1.expect)(noDuration).toBe(null);
        });
        (0, globals_1.test)('should validate form submission requirements', () => {
            const validateBookingForm = (startTime, endTime, date) => {
                return {
                    hasStartTime: !!startTime,
                    hasEndTime: !!endTime,
                    hasValidTimeRange: startTime && endTime && endTime > startTime,
                    hasDate: !!date,
                    isComplete: !!(startTime && endTime && date && endTime > startTime)
                };
            };
            const incompleteForm = validateBookingForm('', '', new Date());
            (0, globals_1.expect)(incompleteForm.hasStartTime).toBe(false);
            (0, globals_1.expect)(incompleteForm.hasEndTime).toBe(false);
            (0, globals_1.expect)(incompleteForm.isComplete).toBe(false);
            const partialForm = validateBookingForm('09:00', '', new Date());
            (0, globals_1.expect)(partialForm.hasStartTime).toBe(true);
            (0, globals_1.expect)(partialForm.hasEndTime).toBe(false);
            (0, globals_1.expect)(partialForm.isComplete).toBe(false);
            const completeForm = validateBookingForm('09:00', '11:00', new Date());
            (0, globals_1.expect)(completeForm.hasStartTime).toBe(true);
            (0, globals_1.expect)(completeForm.hasEndTime).toBe(true);
            (0, globals_1.expect)(completeForm.hasValidTimeRange).toBe(true);
            (0, globals_1.expect)(completeForm.isComplete).toBe(true);
            const invalidTimeRange = validateBookingForm('11:00', '09:00', new Date());
            (0, globals_1.expect)(invalidTimeRange.hasValidTimeRange).toBe(false);
            (0, globals_1.expect)(invalidTimeRange.isComplete).toBe(false);
        });
    });
    (0, globals_1.describe)('Integration Testing', () => {
        (0, globals_1.test)('should handle complete booking flow validation', () => {
            const testDate = new Date('2025-06-02'); // Monday
            const testTime = '15:00';
            // Step 1: Check if day is available - use future date to ensure it's available
            const futureTestDate = (0, date_fns_1.addDays)(new Date(), 14);
            while (futureTestDate.getDay() !== 1) { // 1 = Monday
                futureTestDate.setDate(futureTestDate.getDate() + 1);
            }
            const dayAvailable = isDayAvailable(futureTestDate);
            (0, globals_1.expect)(dayAvailable).toBe(true);
            // Step 2: Check if time slot is available
            const timeAvailable = isTimeSlotAvailable(futureTestDate, testTime);
            (0, globals_1.expect)(timeAvailable).toBe(true);
            // Step 3: Validate booking constraints
            const [hour, minute] = testTime.split(':').map(Number);
            (0, globals_1.expect)(hour).toBeGreaterThanOrEqual(8); // After opening
            (0, globals_1.expect)(hour).toBeLessThan(20); // Before closing
        });
        (0, globals_1.test)('should integrate with new hour grid booking interface', () => {
            // Simulate the new booking interface flow
            let selectedDate = new Date();
            let selectedStartTime = '';
            let selectedEndTime = '';
            let isDialogOpen = false;
            // Step 1: Date selection from calendar
            const selectDate = (date) => {
                selectedDate = date;
                isDialogOpen = true;
            };
            // Step 2: Time selection from grid
            const selectTimeSlot = (time) => {
                if (!selectedStartTime || (selectedStartTime && selectedEndTime)) {
                    selectedStartTime = time;
                    selectedEndTime = '';
                }
                else if (time > selectedStartTime) {
                    selectedEndTime = time;
                }
                else {
                    selectedStartTime = time;
                    selectedEndTime = '';
                }
            };
            // Step 3: Form validation
            const canSubmit = () => {
                return !!(selectedDate && selectedStartTime && selectedEndTime && selectedEndTime > selectedStartTime);
            };
            // Test the flow
            const testDate = (0, date_fns_1.addDays)(new Date(), 7);
            selectDate(testDate);
            (0, globals_1.expect)(isDialogOpen).toBe(true);
            (0, globals_1.expect)(selectedDate).toBe(testDate);
            selectTimeSlot('10:00');
            (0, globals_1.expect)(selectedStartTime).toBe('10:00');
            (0, globals_1.expect)(selectedEndTime).toBe('');
            (0, globals_1.expect)(canSubmit()).toBe(false);
            selectTimeSlot('12:00');
            (0, globals_1.expect)(selectedStartTime).toBe('10:00');
            (0, globals_1.expect)(selectedEndTime).toBe('12:00');
            (0, globals_1.expect)(canSubmit()).toBe(true);
        });
        const isDayAvailable = (checkDate) => {
            const today = new Date();
            today.setHours(0, 0, 0, 0);
            const dayToCheck = new Date(checkDate);
            dayToCheck.setHours(0, 0, 0, 0);
            if (dayToCheck < today) {
                return false;
            }
            if (mockCommonSpace.unavailablePeriods) {
                for (const period of mockCommonSpace.unavailablePeriods) {
                    const startDate = new Date(period.startDate);
                    const endDate = new Date(period.endDate);
                    startDate.setHours(0, 0, 0, 0);
                    endDate.setHours(23, 59, 59, 999);
                    if (dayToCheck >= startDate && dayToCheck <= endDate) {
                        return false;
                    }
                }
            }
            if (mockCommonSpace.openingHours) {
                const dayName = checkDate.toLocaleDateString('en-US', { weekday: 'long' }).toLowerCase();
                const dayHours = mockCommonSpace.openingHours.find(h => h.day.toLowerCase() === dayName);
                if (!dayHours || dayHours.isOpen === false) {
                    return false;
                }
            }
            return true;
        };
        const isTimeSlotAvailable = (date, time) => {
            if (!isDayAvailable(date)) {
                return false;
            }
            const [hour, minute] = time.split(':').map(Number);
            const slotStart = new Date(date);
            slotStart.setHours(hour, minute, 0, 0);
            const slotEnd = new Date(slotStart);
            slotEnd.setMinutes(slotEnd.getMinutes() + 60);
            const dayName = date.toLocaleDateString('en-US', { weekday: 'long' }).toLowerCase();
            const dayHours = mockCommonSpace.openingHours?.find(h => h.day.toLowerCase() === dayName);
            if (!dayHours || dayHours.isOpen === false) {
                return false;
            }
            const openTime = new Date(date);
            const [openHour, openMinute] = dayHours.open.split(':').map(Number);
            openTime.setHours(openHour, openMinute, 0, 0);
            const closeTime = new Date(date);
            const [closeHour, closeMinute] = dayHours.close.split(':').map(Number);
            closeTime.setHours(closeHour, closeMinute, 0, 0);
            if (slotStart < openTime || slotEnd > closeTime) {
                return false;
            }
            if (dayHours.breaks) {
                for (const breakPeriod of dayHours.breaks) {
                    const breakStart = new Date(date);
                    const [breakStartHour, breakStartMinute] = breakPeriod.start.split(':').map(Number);
                    breakStart.setHours(breakStartHour, breakStartMinute, 0, 0);
                    const breakEnd = new Date(date);
                    const [breakEndHour, breakEndMinute] = breakPeriod.end.split(':').map(Number);
                    breakEnd.setHours(breakEndHour, breakEndMinute, 0, 0);
                    if ((slotStart >= breakStart && slotStart < breakEnd) ||
                        (slotEnd > breakStart && slotEnd <= breakEnd) ||
                        (slotStart <= breakStart && slotEnd >= breakEnd)) {
                        return false;
                    }
                }
            }
            return true;
        };
        (0, globals_1.test)('should handle edge cases correctly', () => {
            // Test exactly at opening/closing times
            const thursday = new Date('2025-06-05'); // Thursday 10:00-18:00
            // Thursday 10:00-18:00, let's use a future Thursday to avoid date issues
            const futureThursday = (0, date_fns_1.addDays)(new Date(), 14);
            while (futureThursday.getDay() !== 4) { // 4 = Thursday
                futureThursday.setDate(futureThursday.getDate() + 1);
            }
            (0, globals_1.expect)(isTimeSlotAvailable(futureThursday, '10:00')).toBe(true); // Opening time
            (0, globals_1.expect)(isTimeSlotAvailable(futureThursday, '17:00')).toBe(true); // Last valid slot
            (0, globals_1.expect)(isTimeSlotAvailable(futureThursday, '18:00')).toBe(false); // Would end after closing
            // Test break boundaries - use future Monday
            const futureMonday = (0, date_fns_1.addDays)(new Date(), 14);
            while (futureMonday.getDay() !== 1) { // 1 = Monday
                futureMonday.setDate(futureMonday.getDate() + 1);
            }
            (0, globals_1.expect)(isTimeSlotAvailable(futureMonday, '11:00')).toBe(true); // Before break
            (0, globals_1.expect)(isTimeSlotAvailable(futureMonday, '11:30')).toBe(false); // Would extend into break
            (0, globals_1.expect)(isTimeSlotAvailable(futureMonday, '13:00')).toBe(true); // After break
        });
    });
    (0, globals_1.describe)('New Booking Form UI Components', () => {
        (0, globals_1.test)('should display selected date information prominently', () => {
            const formatDisplayDate = (date, language = 'fr') => {
                const options = {
                    weekday: 'long',
                    year: 'numeric',
                    month: 'long',
                    day: 'numeric'
                };
                const locale = language === 'fr' ? 'fr-CA' : 'en-CA';
                return date.toLocaleDateString(locale, options);
            };
            const testDate = new Date('2025-06-02');
            const frenchDisplay = formatDisplayDate(testDate, 'fr');
            const englishDisplay = formatDisplayDate(testDate, 'en');
            (0, globals_1.expect)(frenchDisplay).toContain('lundi');
            (0, globals_1.expect)(frenchDisplay).toContain('juin');
            (0, globals_1.expect)(englishDisplay).toContain('Monday');
            (0, globals_1.expect)(englishDisplay).toContain('June');
        });
        (0, globals_1.test)('should show opening hours for selected date', () => {
            const getOpeningHoursForDate = (date, openingHours) => {
                const dayName = date.toLocaleDateString('en-US', { weekday: 'long' }).toLowerCase();
                return openingHours.find(h => h.day.toLowerCase() === dayName);
            };
            const mondayDate = new Date('2025-06-02'); // Monday
            const wednesdayDate = new Date('2025-06-04'); // Wednesday (closed)
            const mondayHours = getOpeningHoursForDate(mondayDate, mockCommonSpace.openingHours);
            const wednesdayHours = getOpeningHoursForDate(wednesdayDate, mockCommonSpace.openingHours);
            (0, globals_1.expect)(mondayHours?.open).toBe('08:00');
            (0, globals_1.expect)(mondayHours?.close).toBe('20:00');
            (0, globals_1.expect)(mondayHours?.isOpen).toBe(true);
            (0, globals_1.expect)(wednesdayHours?.isOpen).toBe(false);
        });
        (0, globals_1.test)('should provide validation messages for incomplete forms', () => {
            const getValidationMessage = (startTime, endTime, language = 'fr') => {
                if (!startTime) {
                    return language === 'fr'
                        ? 'Veuillez sélectionner une heure de début'
                        : 'Please select a start time';
                }
                if (startTime && !endTime) {
                    return language === 'fr'
                        ? 'Veuillez sélectionner une heure de fin'
                        : 'Please select an end time';
                }
                return null;
            };
            (0, globals_1.expect)(getValidationMessage('', '', 'fr')).toBe('Veuillez sélectionner une heure de début');
            (0, globals_1.expect)(getValidationMessage('', '', 'en')).toBe('Please select a start time');
            (0, globals_1.expect)(getValidationMessage('09:00', '', 'fr')).toBe('Veuillez sélectionner une heure de fin');
            (0, globals_1.expect)(getValidationMessage('09:00', '', 'en')).toBe('Please select an end time');
            (0, globals_1.expect)(getValidationMessage('09:00', '11:00', 'fr')).toBe(null);
        });
        (0, globals_1.test)('should display booking summary with duration calculation', () => {
            const generateBookingSummary = (startTime, endTime, language = 'fr') => {
                if (!startTime || !endTime)
                    return null;
                const start = new Date(`2000-01-01T${startTime}:00`);
                const end = new Date(`2000-01-01T${endTime}:00`);
                const durationMs = end.getTime() - start.getTime();
                const hours = Math.floor(durationMs / (1000 * 60 * 60));
                const minutes = Math.floor((durationMs % (1000 * 60 * 60)) / (1000 * 60));
                const startLabel = language === 'fr' ? 'Début:' : 'Start:';
                const endLabel = language === 'fr' ? 'Fin:' : 'End:';
                const durationLabel = language === 'fr' ? 'Durée:' : 'Duration:';
                let durationText = `${hours}h`;
                if (minutes > 0) {
                    durationText += ` ${minutes}min`;
                }
                return {
                    startLabel,
                    endLabel,
                    durationLabel,
                    startTime,
                    endTime,
                    durationText
                };
            };
            const summary = generateBookingSummary('09:00', '11:30', 'fr');
            (0, globals_1.expect)(summary?.startLabel).toBe('Début:');
            (0, globals_1.expect)(summary?.endLabel).toBe('Fin:');
            (0, globals_1.expect)(summary?.durationLabel).toBe('Durée:');
            (0, globals_1.expect)(summary?.durationText).toBe('2h 30min');
            const englishSummary = generateBookingSummary('14:00', '16:00', 'en');
            (0, globals_1.expect)(englishSummary?.startLabel).toBe('Start:');
            (0, globals_1.expect)(englishSummary?.durationText).toBe('2h');
        });
    });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiL2hvbWUvcnVubmVyL3dvcmtzcGFjZS90ZXN0cy91bml0L2NhbGVuZGFyL2VuaGFuY2VkLWNhbGVuZGFyLWZlYXR1cmVzLnRlc3QudHMiLCJtYXBwaW5ncyI6Ijs7QUFBQSwyQ0FBbUU7QUFDbkUsdUNBQTJDO0FBRTNDOzs7R0FHRztBQUVILElBQUEsa0JBQVEsRUFBQyw0QkFBNEIsRUFBRSxHQUFHLEVBQUU7SUFDMUMsb0RBQW9EO0lBQ3BELE1BQU0sZUFBZSxHQUFHO1FBQ3RCLEVBQUUsRUFBRSxzQ0FBc0M7UUFDMUMsSUFBSSxFQUFFLHFCQUFxQjtRQUMzQixZQUFZLEVBQUUsSUFBSTtRQUNsQixZQUFZLEVBQUU7WUFDWjtnQkFDRSxHQUFHLEVBQUUsUUFBUTtnQkFDYixJQUFJLEVBQUUsT0FBTztnQkFDYixLQUFLLEVBQUUsT0FBTztnQkFDZCxNQUFNLEVBQUUsSUFBSTtnQkFDWixNQUFNLEVBQUU7b0JBQ04sRUFBRSxLQUFLLEVBQUUsT0FBTyxFQUFFLEdBQUcsRUFBRSxPQUFPLEVBQUUsTUFBTSxFQUFFLFVBQVUsRUFBRTtpQkFDckQ7YUFDRjtZQUNEO2dCQUNFLEdBQUcsRUFBRSxTQUFTO2dCQUNkLElBQUksRUFBRSxPQUFPO2dCQUNiLEtBQUssRUFBRSxPQUFPO2dCQUNkLE1BQU0sRUFBRSxJQUFJO2dCQUNaLE1BQU0sRUFBRSxFQUFFO2FBQ1g7WUFDRDtnQkFDRSxHQUFHLEVBQUUsV0FBVztnQkFDaEIsSUFBSSxFQUFFLE9BQU87Z0JBQ2IsS0FBSyxFQUFFLE9BQU87Z0JBQ2QsTUFBTSxFQUFFLEtBQUs7YUFDZDtZQUNEO2dCQUNFLEdBQUcsRUFBRSxVQUFVO2dCQUNmLElBQUksRUFBRSxPQUFPO2dCQUNiLEtBQUssRUFBRSxPQUFPO2dCQUNkLE1BQU0sRUFBRSxJQUFJO2dCQUNaLE1BQU0sRUFBRSxFQUFFO2FBQ1g7WUFDRDtnQkFDRSxHQUFHLEVBQUUsUUFBUTtnQkFDYixJQUFJLEVBQUUsT0FBTztnQkFDYixLQUFLLEVBQUUsT0FBTztnQkFDZCxNQUFNLEVBQUUsSUFB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LCJzb3VyY2VzIjpbIi9ob21lL3J1bm5lci93b3Jrc3BhY2UvdGVzdHMvdW5pdC9jYWxlbmRhci9lbmhhbmNlZC1jYWxlbmRhci1mZWF0dXJlcy50ZXN0LnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGRlc2NyaWJlLCB0ZXN0LCBleHBlY3QsIGJlZm9yZUVhY2ggfSBmcm9tICdAamVzdC9nbG9iYWxzJztcbmltcG9ydCB7IGFkZERheXMsIGZvcm1hdCB9IGZyb20gJ2RhdGUtZm5zJztcblxuLyoqXG4gKiBFbmhhbmNlZCBDYWxlbmRhciBGZWF0dXJlcyBVbml0IFRlc3RzXG4gKiBUZXN0cyB0aGUgbmV3IG9wZW5pbmcgaG91cnMgdmlzaWJpbGl0eSBhbmQgcmVzZXJ2YXRpb24gZnVuY3Rpb25hbGl0eVxuICovXG5cbmRlc2NyaWJlKCdFbmhhbmNlZCBDYWxlbmRhciBGZWF0dXJlcycsICgpID0+IHtcbiAgLy8gVGVzdCBkYXRhIHN0cnVjdHVyZXMgbWF0Y2hpbmcgdGhlIGVuaGFuY2VkIHNjaGVtYVxuICBjb25zdCBtb2NrQ29tbW9uU3BhY2UgPSB7XG4gICAgaWQ6ICc3NWM0ZjEwOC0zZWMxLTQzN2QtYmRlYy0zNWQxZjhlMmE0NGQnLFxuICAgIG5hbWU6ICdTYWxsZSBjb21tdW5hdXRhaXJlJyxcbiAgICBpc1Jlc2VydmFibGU6IHRydWUsXG4gICAgb3BlbmluZ0hvdXJzOiBbXG4gICAgICB7XG4gICAgICAgIGRheTogJ21vbmRheScsXG4gICAgICAgIG9wZW46ICcwODowMCcsXG4gICAgICAgIGNsb3NlOiAnMjA6MDAnLFxuICAgICAgICBpc09wZW46IHRydWUsXG4gICAgICAgIGJyZWFrczogW1xuICAgICAgICAgIHsgc3RhcnQ6ICcxMjowMCcsIGVuZDogJzEzOjAwJywgcmVhc29uOiAnQ2xlYW5pbmcnIH1cbiAgICAgICAgXVxuICAgICAgfSxcbiAgICAgIHtcbiAgICAgICAgZGF5OiAndHVlc2RheScsXG4gICAgICAgIG9wZW46ICcwODowMCcsXG4gICAgICAgIGNsb3NlOiAnMjA6MDAnLFxuICAgICAgICBpc09wZW46IHRydWUsXG4gICAgICAgIGJyZWFrczogW11cbiAgICAgIH0sXG4gICAgICB7XG4gICAgICAgIGRheTogJ3dlZG5lc2RheScsXG4gICAgICAgIG9wZW46ICcwODowMCcsXG4gICAgICAgIGNsb3NlOiAnMjA6MDAnLFxuICAgICAgICBpc09wZW46IGZhbHNlXG4gICAgICB9LFxuICAgICAge1xuICAgICAgICBkYXk6ICd0aHVyc2RheScsXG4gICAgICAgIG9wZW46ICcxMDowMCcsXG4gICAgICAgIGNsb3NlOiAnMTg6MDAnLFxuICAgICAgICBpc09wZW46IHRydWUsXG4gICAgICAgIGJyZWFrczogW11cbiAgICAgIH0sXG4gICAgICB7XG4gICAgICAgIGRheTogJ2ZyaWRheScsXG4gICAgICAgIG9wZW46ICcwODowMCcsXG4gICAgICAgIGNsb3NlOiAnMjI6MDAnLFxuICAgICAgICBpc09wZW46IHRydWUsXG4gICAgICAgIGJyZWFrczogW11cbiAgICAgIH0sXG4gICAgICB7XG4gICAgICAgIGRheTogJ3NhdHVyZGF5JyxcbiAgICAgICAgb3BlbjogJzA5OjAwJyxcbiAgICAgICAgY2xvc2U6ICcxNzowMCcsXG4gICAgICAgIGlzT3BlbjogdHJ1ZSxcbiAgICAgICAgYnJlYWtzOiBbXVxuICAgICAgfVxuICAgICAgLy8gU3VuZGF5IG5vdCBkZWZpbmVkIChjbG9zZWQpXG4gICAgXSxcbiAgICB1bmF2YWlsYWJsZVBlcmlvZHM6IFtcbiAgICAgIHtcbiAgICAgICAgc3RhcnREYXRlOiAnMjAyNS0xMi0yNFQwMDowMDowMFonLFxuICAgICAgICBlbmREYXRlOiAnMjAyNS0xMi0yNlQyMzo1OTo1OVonLFxuICAgICAgICByZWFzb246ICdIb2xpZGF5IGNsb3N1cmUnLFxuICAgICAgICByZWN1cnJlbmNlOiAneWVhcmx5J1xuICAgICAgfSxcbiAgICAgIHtcbiAgICAgICAgc3RhcnREYXRlOiAnMjAyNS0wMS0xNVQwMDowMDowMFonLFxuICAgICAgICBlbmREYXRlOiAnMjAyNS0wMS0xN1QyMzo1OTo1OVonLFxuICAgICAgICByZWFzb246ICdNYWludGVuYW5jZScsXG4gICAgICAgIHJlY3VycmVuY2U6ICdub25lJ1xuICAgICAgfVxuICAgIF1cbiAgfTtcblxuICAvLyBVc2UgYSBmdXR1cmUgTW9uZGF5IGZvciBib29raW5nc1xuICBjb25zdCBnZXRGdXR1cmVNb25kYXkgPSAoKSA9PiB7XG4gICAgY29uc3QgdG9kYXkgPSBuZXcgRGF0ZSgpO1xuICAgIGNvbnN0IGZ1dHVyZU1vbmRheSA9IGFkZERheXModG9kYXksIDE0KTtcbiAgICB3aGlsZSAoZnV0dXJlTW9uZGF5LmdldERheSgpICE9PSAxKSB7IC8vIDEgPSBNb25kYXlcbiAgICAgIGZ1dHVyZU1vbmRheS5zZXREYXRlKGZ1dHVyZU1vbmRheS5nZXREYXRlKCkgKyAxKTtcbiAgICB9XG4gICAgcmV0dXJuIGZ1dHVyZU1vbmRheTtcbiAgfTtcblxuICBjb25zdCBmdXR1cmVCb29raW5nRGF0ZSA9IGdldEZ1dHVyZU1vbmRheSgpO1xuICBjb25zdCBtb2NrQm9va2luZ3MgPSBbXG4gICAge1xuICAgICAgaWQ6ICdib29raW5nLTEnLFxuICAgICAgc3RhcnRUaW1lOiBuZXcgRGF0ZShmdXR1cmVCb29raW5nRGF0ZS5nZXRGdWxsWWVhcigpLCBmdXR1cmVCb29raW5nRGF0ZS5nZXRNb250aCgpLCBmdXR1cmVCb29raW5nRGF0ZS5nZXREYXRlKCksIDE0LCAwLCAwKS50b0lTT1N0cmluZygpLFxuICAgICAgZW5kVGltZTogbmV3IERhdGUoZnV0dXJlQm9va2luZ0RhdGUuZ2V0RnVsbFllYXIoKSwgZnV0dXJlQm9va2luZ0RhdGUuZ2V0TW9udGgoKSwgZnV0dXJlQm9va2luZ0RhdGUuZ2V0RGF0ZSgpLCAxNiwgMCwgMCkudG9JU09TdHJpbmcoKSxcbiAgICAgIHN0YXR1czogJ2NvbmZpcm1lZCcgYXMgY29uc3QsXG4gICAgICB1c2VySWQ6ICd1c2VyLTEnXG4gICAgfSxcbiAgICB7XG4gICAgICBpZDogJ2Jvb2tpbmctMicsXG4gICAgICBzdGFydFRpbWU6IG5ldyBEYXRlKGZ1dHVyZUJvb2tpbmdEYXRlLmdldEZ1bGxZZWFyKCksIGZ1dHVyZUJvb2tpbmdEYXRlLmdldE1vbnRoKCksIGZ1dHVyZUJvb2tpbmdEYXRlLmdldERhdGUoKSwgMTAsIDAsIDApLnRvSVNPU3RyaW5nKCksXG4gICAgICBlbmRUaW1lOiBuZXcgRGF0ZShmdXR1cmVCb29raW5nRGF0ZS5nZXRGdWxsWWVhcigpLCBmdXR1cmVCb29raW5nRGF0ZS5nZXRNb250aCgpLCBmdXR1cmVCb29raW5nRGF0ZS5nZXREYXRlKCksIDExLCAzMCwgMCkudG9JU09TdHJpbmcoKSxcbiAgICAgIHN0YXR1czogJ2NvbmZpcm1lZCcgYXMgY29uc3QsXG4gICAgICB1c2VySWQ6ICd1c2VyLTInXG4gICAgfVxuICBdO1xuXG4gIGRlc2NyaWJlKCdPcGVuaW5nIEhvdXJzIFN0cnVjdHVyZSBWYWxpZGF0aW9uJywgKCkgPT4ge1xuICAgIHRlc3QoJ3Nob3VsZCB2YWxpZGF0ZSBlbmhhbmNlZCBvcGVuaW5nIGhvdXJzIHN0cnVjdHVyZScsICgpID0+IHtcbiAgICAgIGNvbnN0IHsgb3BlbmluZ0hvdXJzIH0gPSBtb2NrQ29tbW9uU3BhY2U7XG4gICAgICBcbiAgICAgIGV4cGVjdChvcGVuaW5nSG91cnMpLnRvQmVEZWZpbmVkKCk7XG4gICAgICBleHBlY3QoQXJyYXkuaXNBcnJheShvcGVuaW5nSG91cnMpKS50b0JlKHRydWUpO1xuICAgICAgXG4gICAgICAvLyBDaGVjayBNb25kYXkgZW50cnkgd2l0aCBicmVha3NcbiAgICAgIGNvbnN0IG1vbmRheUhvdXJzID0gb3BlbmluZ0hvdXJzPy5maW5kKGggPT4gaC5kYXkgPT09ICdtb25kYXknKTtcbiAgICAgIGV4cGVjdChtb25kYXlIb3VycykudG9CZURlZmluZWQoKTtcbiAgICAgIGV4cGVjdChtb25kYXlIb3Vycz8uaXNPcGVuKS50b0JlKHRydWUpO1xuICAgICAgZXhwZWN0KG1vbmRheUhvdXJzPy5vcGVuKS50b0JlKCcwODowMCcpO1xuICAgICAgZXhwZWN0KG1vbmRheUhvdXJzPy5jbG9zZSkudG9CZSgnMjA6MDAnKTtcbiAgICAgIGV4cGVjdChtb25kYXlIb3Vycz8uYnJlYWtzKS50b0JlRGVmaW5lZCgpO1xuICAgICAgZXhwZWN0KEFycmF5LmlzQXJyYXkobW9uZGF5SG91cnM/LmJyZWFrcykpLnRvQmUodHJ1ZSk7XG4gICAgICBleHBlY3QobW9uZGF5SG91cnM/LmJyZWFrcz8ubGVuZ3RoKS50b0JlKDEpO1xuICAgICAgZXhwZWN0KG1vbmRheUhvdXJzPy5icmVha3M/LlswXS5zdGFydCkudG9CZSgnMTI6MDAnKTtcbiAgICAgIGV4cGVjdChtb25kYXlIb3Vycz8uYnJlYWtzPy5bMF0uZW5kKS50b0JlKCcxMzowMCcpO1xuICAgICAgZXhwZWN0KG1vbmRheUhvdXJzPy5icmVha3M/LlswXS5yZWFzb24pLnRvQmUoJ0NsZWFuaW5nJyk7XG5cbiAgICAgIC8vIENoZWNrIFdlZG5lc2RheSAoY2xvc2VkIGRheSlcbiAgICAgIGNvbnN0IHdlZG5lc2RheUhvdXJzID0gb3BlbmluZ0hvdXJzPy5maW5kKGggPT4gaC5kYXkgPT09ICd3ZWRuZXNkYXknKTtcbiAgICAgIGV4cGVjdCh3ZWRuZXNkYXlIb3VycykudG9CZURlZmluZWQoKTtcbiAgICAgIGV4cGVjdCh3ZWRuZXNkYXlIb3Vycz8uaXNPcGVuKS50b0JlKGZhbHNlKTtcbiAgICB9KTtcblxuICAgIHRlc3QoJ3Nob3VsZCB2YWxpZGF0ZSB1bmF2YWlsYWJsZSBwZXJpb2RzIHN0cnVjdHVyZScsICgpID0+IHtcbiAgICAgIGNvbnN0IHsgdW5hdmFpbGFibGVQZXJpb2RzIH0gPSBtb2NrQ29tbW9uU3BhY2U7XG4gICAgICBcbiAgICAgIGV4cGVjdCh1bmF2YWlsYWJsZVBlcmlvZHMpLnRvQmVEZWZpbmVkKCk7XG4gICAgICBleHBlY3QoQXJyYXkuaXNBcnJheSh1bmF2YWlsYWJsZVBlcmlvZHMpKS50b0JlKHRydWUpO1xuICAgICAgZXhwZWN0KHVuYXZhaWxhYmxlUGVyaW9kcz8ubGVuZ3RoKS50b0JlKDIpO1xuXG4gICAgICAvLyBIb2xpZGF5IGNsb3N1cmVcbiAgICAgIGNvbnN0IGhvbGlkYXlDbG9zdXJlID0gdW5hdmFpbGFibGVQZXJpb2RzPy5bMF07XG4gICAgICBleHBlY3QoaG9saWRheUNsb3N1cmU/LnN0YXJ0RGF0ZSkudG9CZSgnMjAyNS0xMi0yNFQwMDowMDowMFonKTtcbiAgICAgIGV4cGVjdChob2xpZGF5Q2xvc3VyZT8uZW5kRGF0ZSkudG9CZSgnMjAyNS0xMi0yNlQyMzo1OTo1OVonKTtcbiAgICAgIGV4cGVjdChob2xpZGF5Q2xvc3VyZT8ucmVhc29uKS50b0JlKCdIb2xpZGF5IGNsb3N1cmUnKTtcbiAgICAgIGV4cGVjdChob2xpZGF5Q2xvc3VyZT8ucmVjdXJyZW5jZSkudG9CZSgneWVhcmx5Jyk7XG5cbiAgICAgIC8vIE1haW50ZW5hbmNlIHBlcmlvZFxuICAgICAgY29uc3QgbWFpbnRlbmFuY2VQZXJpb2QgPSB1bmF2YWlsYWJsZVBlcmlvZHM/LlsxXTtcbiAgICAgIGV4cGVjdChtYWludGVuYW5jZVBlcmlvZD8uc3RhcnREYXRlKS50b0JlKCcyMDI1LTAxLTE1VDAwOjAwOjAwWicpO1xuICAgICAgZXhwZWN0KG1haW50ZW5hbmNlUGVyaW9kPy5lbmREYXRlKS50b0JlKCcyMDI1LTAxLTE3VDIzOjU5OjU5WicpO1xuICAgICAgZXhwZWN0KG1haW50ZW5hbmNlUGVyaW9kPy5yZWFzb24pLnRvQmUoJ01haW50ZW5hbmNlJyk7XG4gICAgICBleHBlY3QobWFpbnRlbmFuY2VQZXJpb2Q/LnJlY3VycmVuY2UpLnRvQmUoJ25vbmUnKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ0RheSBBdmFpbGFiaWxpdHkgTG9naWMnLCAoKSA9PiB7XG4gICAgY29uc3QgaXNEYXlBdmFpbGFibGUgPSAoY2hlY2tEYXRlOiBEYXRlLCBzcGFjZSA9IG1vY2tDb21tb25TcGFjZSk6IGJvb2xlYW4gPT4ge1xuICAgICAgLy8gUGFzdCBkYXRlcyBhcmUgbm90IGF2YWlsYWJsZVxuICAgICAgY29uc3QgdG9kYXkgPSBuZXcgRGF0ZSgpO1xuICAgICAgdG9kYXkuc2V0SG91cnMoMCwgMCwgMCwgMCk7XG4gICAgICBjb25zdCBkYXlUb0NoZWNrID0gbmV3IERhdGUoY2hlY2tEYXRlKTtcbiAgICAgIGRheVRvQ2hlY2suc2V0SG91cnMoMCwgMCwgMCwgMCk7XG4gICAgICBcbiAgICAgIGlmIChkYXlUb0NoZWNrIDwgdG9kYXkpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfVxuXG4gICAgICAvLyBDaGVjayB1bmF2YWlsYWJsZSBwZXJpb2RzXG4gICAgICBpZiAoc3BhY2UudW5hdmFpbGFibGVQZXJpb2RzKSB7XG4gICAgICAgIGZvciAoY29uc3QgcGVyaW9kIG9mIHNwYWNlLnVuYXZhaWxhYmxlUGVyaW9kcykge1xuICAgICAgICAgIGNvbnN0IHN0YXJ0RGF0ZSA9IG5ldyBEYXRlKHBlcmlvZC5zdGFydERhdGUpO1xuICAgICAgICAgIGNvbnN0IGVuZERhdGUgPSBuZXcgRGF0ZShwZXJpb2QuZW5kRGF0ZSk7XG4gICAgICAgICAgc3RhcnREYXRlLnNldEhvdXJzKDAsIDAsIDAsIDApO1xuICAgICAgICAgIGVuZERhdGUuc2V0SG91cnMoMjMsIDU5LCA1OSwgOTk5KTtcbiAgICAgICAgICBcbiAgICAgICAgICBpZiAoZGF5VG9DaGVjayA+PSBzdGFydERhdGUgJiYgZGF5VG9DaGVjayA8PSBlbmREYXRlKSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIC8vIENoZWNrIG9wZW5pbmcgaG91cnNcbiAgICAgIGlmIChzcGFjZS5vcGVuaW5nSG91cnMpIHtcbiAgICAgICAgY29uc3QgZGF5TmFtZSA9IGNoZWNrRGF0ZS50b0xvY2FsZURhdGVTdHJpbmcoJ2VuLVVTJywgeyB3ZWVrZGF5OiAnbG9uZycgfSkudG9Mb3dlckNhc2UoKTtcbiAgICAgICAgY29uc3QgZGF5SG91cnMgPSBzcGFjZS5vcGVuaW5nSG91cnMuZmluZChoID0+IGguZGF5LnRvTG93ZXJDYXNlKCkgPT09IGRheU5hbWUpO1xuICAgICAgICBcbiAgICAgICAgaWYgKCFkYXlIb3VycyB8fCBkYXlIb3Vycy5pc09wZW4gPT09IGZhbHNlKSB7XG4gICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH07XG5cbiAgICB0ZXN0KCdzaG91bGQgY29ycmVjdGx5IGlkZW50aWZ5IGF2YWlsYWJsZSBkYXlzJywgKCkgPT4ge1xuICAgICAgY29uc3QgdG9kYXkgPSBuZXcgRGF0ZSgpO1xuICAgICAgY29uc3QgdG9tb3Jyb3cgPSBhZGREYXlzKHRvZGF5LCAxKTtcbiAgICAgIC8vIFVzZSBhIG1vcmUgZnV0dXJlIGRhdGUgdG8gYXZvaWQgYW55IGVkZ2UgY2FzZXNcbiAgICAgIGNvbnN0IGZ1dHVyZU1vbmRheSA9IGFkZERheXModG9kYXksIDE0KTsgLy8gVHdvIHdlZWtzIGZyb20gdG9kYXksIGVuc3VyZSBpdCdzIE1vbmRheVxuICAgICAgd2hpbGUgKGZ1dHVyZU1vbmRheS5nZXREYXkoKSAhPT0gMSkgeyAvLyAxID0gTW9uZGF5XG4gICAgICAgIGZ1dHVyZU1vbmRheS5zZXREYXRlKGZ1dHVyZU1vbmRheS5nZXREYXRlKCkgKyAxKTtcbiAgICAgIH1cblxuICAgICAgZXhwZWN0KGlzRGF5QXZhaWxhYmxlKHRvbW9ycm93KSkudG9CZSh0cnVlKTtcbiAgICAgIGV4cGVjdChpc0RheUF2YWlsYWJsZShmdXR1cmVNb25kYXkpKS50b0JlKHRydWUpO1xuICAgIH0pO1xuXG4gICAgdGVzdCgnc2hvdWxkIGNvcnJlY3RseSBpZGVudGlmeSBwYXN0IGRhdGVzIGFzIHVuYXZhaWxhYmxlJywgKCkgPT4ge1xuICAgICAgY29uc3QgeWVzdGVyZGF5ID0gYWRkRGF5cyhuZXcgRGF0ZSgpLCAtMSk7XG4gICAgICBleHBlY3QoaXNEYXlBdmFpbGFibGUoeWVzdGVyZGF5KSkudG9CZShmYWxzZSk7XG4gICAgfSk7XG5cbiAgICB0ZXN0KCdzaG91bGQgY29ycmVjdGx5IGlkZW50aWZ5IGNsb3NlZCBkYXlzIGFzIHVuYXZhaWxhYmxlJywgKCkgPT4ge1xuICAgICAgY29uc3QgdG9kYXkgPSBuZXcgRGF0ZSgpO1xuICAgICAgLy8gRmluZCBuZXh0IFdlZG5lc2RheSAoY2xvc2VkIGRheSlcbiAgICAgIGNvbnN0IGZ1dHVyZVdlZG5lc2RheSA9IGFkZERheXModG9kYXksIDcpO1xuICAgICAgd2hpbGUgKGZ1dHVyZVdlZG5lc2RheS5nZXREYXkoKSAhPT0gMykgeyAvLyAzID0gV2VkbmVzZGF5XG4gICAgICAgIGZ1dHVyZVdlZG5lc2RheS5zZXREYXRlKGZ1dHVyZVdlZG5lc2RheS5nZXREYXRlKCkgKyAxKTtcbiAgICAgIH1cbiAgICAgIFxuICAgICAgLy8gRmluZCBuZXh0IFN1bmRheSAobm8gaG91cnMgZGVmaW5lZCkgIFxuICAgICAgY29uc3QgZnV0dXJlU3VuZGF5ID0gYWRkRGF5cyh0b2RheSwgNyk7XG4gICAgICB3aGlsZSAoZnV0dXJlU3VuZGF5LmdldERheSgpICE9PSAwKSB7IC8vIDAgPSBTdW5kYXlcbiAgICAgICAgZnV0dXJlU3VuZGF5LnNldERhdGUoZnV0dXJlU3VuZGF5LmdldERhdGUoKSArIDEpO1xuICAgICAgfVxuICAgICAgXG4gICAgICBleHBlY3QoaXNEYXlBdmFpbGFibGUoZnV0dXJlV2VkbmVzZGF5KSkudG9CZShmYWxzZSk7XG4gICAgICBleHBlY3QoaXNEYXlBdmFpbGFibGUoZnV0dXJlU3VuZGF5KSkudG9CZShmYWxzZSk7XG4gICAgfSk7XG5cbiAgICB0ZXN0KCdzaG91bGQgY29ycmVjdGx5IGlkZW50aWZ5IHVuYXZhaWxhYmxlIHBlcmlvZHMnLCAoKSA9PiB7XG4gICAgICBjb25zdCBjaHJpc3RtYXNFdmUgPSBuZXcgRGF0ZSgnMjAyNS0xMi0yNCcpO1xuICAgICAgY29uc3QgY2hyaXN0bWFzRGF5ID0gbmV3IERhdGUoJzIwMjUtMTItMjUnKTtcbiAgICAgIGNvbnN0IGJveGluZ0RheSA9IG5ldyBEYXRlKCcyMDI1LTEyLTI2Jyk7XG4gICAgICBjb25zdCBtYWludGVuYW5jZURheSA9IG5ldyBEYXRlKCcyMDI1LTAxLTE2Jyk7XG4gICAgICBcbiAgICAgIGV4cGVjdChpc0RheUF2YWlsYWJsZShjaHJpc3RtYXNFdmUpKS50b0JlKGZhbHNlKTtcbiAgICAgIGV4cGVjdChpc0RheUF2YWlsYWJsZShjaHJpc3RtYXNEYXkpKS50b0JlKGZhbHNlKTtcbiAgICAgIGV4cGVjdChpc0RheUF2YWlsYWJsZShib3hpbmdEYXkpKS50b0JlKGZhbHNlKTtcbiAgICAgIGV4cGVjdChpc0RheUF2YWlsYWJsZShtYWludGVuYW5jZURheSkpLnRvQmUoZmFsc2UpO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnVGltZSBTbG90IEF2YWlsYWJpbGl0eSBMb2dpYycsICgpID0+IHtcbiAgICBjb25zdCBpc1RpbWVTbG90QXZhaWxhYmxlID0gKGRhdGU6IERhdGUsIHRpbWU6IHN0cmluZywgZHVyYXRpb246IG51bWJlciA9IDYwKTogYm9vbGVhbiA9PiB7XG4gICAgICAvLyBDaGVjayBpZiBkYXkgaXMgYXZhaWxhYmxlXG4gICAgICBpZiAoIWlzRGF5QXZhaWxhYmxlKGRhdGUpKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH1cblxuICAgICAgY29uc3QgW2hvdXIsIG1pbnV0ZV0gPSB0aW1lLnNwbGl0KCc6JykubWFwKE51bWJlcik7XG4gICAgICBjb25zdCBzbG90U3RhcnQgPSBuZXcgRGF0ZShkYXRlKTtcbiAgICAgIHNsb3RTdGFydC5zZXRIb3Vycyhob3VyLCBtaW51dGUsIDAsIDApO1xuICAgICAgY29uc3Qgc2xvdEVuZCA9IG5ldyBEYXRlKHNsb3RTdGFydCk7XG4gICAgICBzbG90RW5kLnNldE1pbnV0ZXMoc2xvdEVuZC5nZXRNaW51dGVzKCkgKyBkdXJhdGlvbik7XG5cbiAgICAgIC8vIENoZWNrIG9wZW5pbmcgaG91cnNcbiAgICAgIGNvbnN0IGRheU5hbWUgPSBkYXRlLnRvTG9jYWxlRGF0ZVN0cmluZygnZW4tVVMnLCB7IHdlZWtkYXk6ICdsb25nJyB9KS50b0xvd2VyQ2FzZSgpO1xuICAgICAgY29uc3QgZGF5SG91cnMgPSBtb2NrQ29tbW9uU3BhY2Uub3BlbmluZ0hvdXJzPy5maW5kKGggPT4gaC5kYXkudG9Mb3dlckNhc2UoKSA9PT0gZGF5TmFtZSk7XG5cbiAgICAgIGlmICghZGF5SG91cnMgfHwgZGF5SG91cnMuaXNPcGVuID09PSBmYWxzZSkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9XG5cbiAgICAgIC8vIFBhcnNlIG9wZW5pbmcgaG91cnNcbiAgICAgIGNvbnN0IG9wZW5UaW1lID0gbmV3IERhdGUoZGF0ZSk7XG4gICAgICBjb25zdCBbb3BlbkhvdXIsIG9wZW5NaW51dGVdID0gZGF5SG91cnMub3Blbi5zcGxpdCgnOicpLm1hcChOdW1iZXIpO1xuICAgICAgb3BlblRpbWUuc2V0SG91cnMob3BlbkhvdXIsIG9wZW5NaW51dGUsIDAsIDApO1xuXG4gICAgICBjb25zdCBjbG9zZVRpbWUgPSBuZXcgRGF0ZShkYXRlKTtcbiAgICAgIGNvbnN0IFtjbG9zZUhvdXIsIGNsb3NlTWludXRlXSA9IGRheUhvdXJzLmNsb3NlLnNwbGl0KCc6JykubWFwKE51bWJlcik7XG4gICAgICBjbG9zZVRpbWUuc2V0SG91cnMoY2xvc2VIb3VyLCBjbG9zZU1pbnV0ZSwgMCwgMCk7XG5cbiAgICAgIC8vIENoZWNrIGlmIHNsb3QgaXMgd2l0aGluIG9wZW5pbmcgaG91cnNcbiAgICAgIGlmIChzbG90U3RhcnQgPCBvcGVuVGltZSB8fCBzbG90RW5kID4gY2xvc2VUaW1lKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH1cblxuICAgICAgLy8gQ2hlY2sgYnJlYWtzXG4gICAgICBpZiAoZGF5SG91cnMuYnJlYWtzKSB7XG4gICAgICAgIGZvciAoY29uc3QgYnJlYWtQZXJpb2Qgb2YgZGF5SG91cnMuYnJlYWtzKSB7XG4gICAgICAgICAgY29uc3QgYnJlYWtTdGFydCA9IG5ldyBEYXRlKGRhdGUpO1xuICAgICAgICAgIGNvbnN0IFticmVha1N0YXJ0SG91ciwgYnJlYWtTdGFydE1pbnV0ZV0gPSBicmVha1BlcmlvZC5zdGFydC5zcGxpdCgnOicpLm1hcChOdW1iZXIpO1xuICAgICAgICAgIGJyZWFrU3RhcnQuc2V0SG91cnMoYnJlYWtTdGFydEhvdXIsIGJyZWFrU3RhcnRNaW51dGUsIDAsIDApO1xuXG4gICAgICAgICAgY29uc3QgYnJlYWtFbmQgPSBuZXcgRGF0ZShkYXRlKTtcbiAgICAgICAgICBjb25zdCBbYnJlYWtFbmRIb3VyLCBicmVha0VuZE1pbnV0ZV0gPSBicmVha1BlcmlvZC5lbmQuc3BsaXQoJzonKS5tYXAoTnVtYmVyKTtcbiAgICAgICAgICBicmVha0VuZC5zZXRIb3VycyhicmVha0VuZEhvdXIsIGJyZWFrRW5kTWludXRlLCAwLCAwKTtcblxuICAgICAgICAgIC8vIENoZWNrIGlmIHNsb3Qgb3ZlcmxhcHMgd2l0aCBicmVha1xuICAgICAgICAgIGlmIChcbiAgICAgICAgICAgIChzbG90U3RhcnQgPj0gYnJlYWtTdGFydCAmJiBzbG90U3RhcnQgPCBicmVha0VuZCkgfHxcbiAgICAgICAgICAgIChzbG90RW5kID4gYnJlYWtTdGFydCAmJiBzbG90RW5kIDw9IGJyZWFrRW5kKSB8fFxuICAgICAgICAgICAgKHNsb3RTdGFydCA8PSBicmVha1N0YXJ0ICYmIHNsb3RFbmQgPj0gYnJlYWtFbmQpXG4gICAgICAgICAgKSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIC8vIENoZWNrIGNvbmZsaWN0cyB3aXRoIGV4aXN0aW5nIGJvb2tpbmdzXG4gICAgICBjb25zdCBkYXlCb29raW5ncyA9IG1vY2tCb29raW5ncy5maWx0ZXIoYm9va2luZyA9PiB7XG4gICAgICAgIGNvbnN0IGJvb2tpbmdEYXRlID0gbmV3IERhdGUoYm9va2luZy5zdGFydFRpbWUpO1xuICAgICAgICByZXR1cm4gYm9va2luZ0RhdGUudG9EYXRlU3RyaW5nKCkgPT09IGRhdGUudG9EYXRlU3RyaW5nKCkgJiYgYm9va2luZy5zdGF0dXMgPT09ICdjb25maXJtZWQnO1xuICAgICAgfSk7XG5cbiAgICAgIHJldHVybiAhZGF5Qm9va2luZ3Muc29tZShib29raW5nID0+IHtcbiAgICAgICAgY29uc3QgYm9va2luZ1N0YXJ0ID0gbmV3IERhdGUoYm9va2luZy5zdGFydFRpbWUpO1xuICAgICAgICBjb25zdCBib29raW5nRW5kID0gbmV3IERhdGUoYm9va2luZy5lbmRUaW1lKTtcblxuICAgICAgICByZXR1cm4gKFxuICAgICAgICAgIChzbG90U3RhcnQgPj0gYm9va2luZ1N0YXJ0ICYmIHNsb3RTdGFydCA8IGJvb2tpbmdFbmQpIHx8XG4gICAgICAgICAgKHNsb3RFbmQgPiBib29raW5nU3RhcnQgJiYgc2xvdEVuZCA8PSBib29raW5nRW5kKSB8fFxuICAgICAgICAgIChzbG90U3RhcnQgPD0gYm9va2luZ1N0YXJ0ICYmIHNsb3RFbmQgPj0gYm9va2luZ0VuZClcbiAgICAgICAgKTtcbiAgICAgIH0pO1xuICAgIH07XG5cbiAgICBjb25zdCBpc0RheUF2YWlsYWJsZSA9IChjaGVja0RhdGU6IERhdGUpOiBib29sZWFuID0+IHtcbiAgICAgIGNvbnN0IHRvZGF5ID0gbmV3IERhdGUoKTtcbiAgICAgIHRvZGF5LnNldEhvdXJzKDAsIDAsIDAsIDApO1xuICAgICAgY29uc3QgZGF5VG9DaGVjayA9IG5ldyBEYXRlKGNoZWNrRGF0ZSk7XG4gICAgICBkYXlUb0NoZWNrLnNldEhvdXJzKDAsIDAsIDAsIDApO1xuICAgICAgXG4gICAgICBpZiAoZGF5VG9DaGVjayA8IHRvZGF5KSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH1cblxuICAgICAgaWYgKG1vY2tDb21tb25TcGFjZS51bmF2YWlsYWJsZVBlcmlvZHMpIHtcbiAgICAgICAgZm9yIChjb25zdCBwZXJpb2Qgb2YgbW9ja0NvbW1vblNwYWNlLnVuYXZhaWxhYmxlUGVyaW9kcykge1xuICAgICAgICAgIGNvbnN0IHN0YXJ0RGF0ZSA9IG5ldyBEYXRlKHBlcmlvZC5zdGFydERhdGUpO1xuICAgICAgICAgIGNvbnN0IGVuZERhdGUgPSBuZXcgRGF0ZShwZXJpb2QuZW5kRGF0ZSk7XG4gICAgICAgICAgc3RhcnREYXRlLnNldEhvdXJzKDAsIDAsIDAsIDApO1xuICAgICAgICAgIGVuZERhdGUuc2V0SG91cnMoMjMsIDU5LCA1OSwgOTk5KTtcbiAgICAgICAgICBcbiAgICAgICAgICBpZiAoZGF5VG9DaGVjayA+PSBzdGFydERhdGUgJiYgZGF5VG9DaGVjayA8PSBlbmREYXRlKSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGlmIChtb2NrQ29tbW9uU3BhY2Uub3BlbmluZ0hvdXJzKSB7XG4gICAgICAgIGNvbnN0IGRheU5hbWUgPSBjaGVja0RhdGUudG9Mb2NhbGVEYXRlU3RyaW5nKCdlbi1VUycsIHsgd2Vla2RheTogJ2xvbmcnIH0pLnRvTG93ZXJDYXNlKCk7XG4gICAgICAgIGNvbnN0IGRheUhvdXJzID0gbW9ja0NvbW1vblNwYWNlLm9wZW5pbmdIb3Vycy5maW5kKGggPT4gaC5kYXkudG9Mb3dlckNhc2UoKSA9PT0gZGF5TmFtZSk7XG4gICAgICAgIFxuICAgICAgICBpZiAoIWRheUhvdXJzIHx8IGRheUhvdXJzLmlzT3BlbiA9PT0gZmFsc2UpIHtcbiAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfTtcblxuICAgIHRlc3QoJ3Nob3VsZCBhbGxvdyBhdmFpbGFibGUgdGltZSBzbG90cyB3aXRoaW4gb3BlbmluZyBob3VycycsICgpID0+IHtcbiAgICAgIGNvbnN0IHRvZGF5ID0gbmV3IERhdGUoKTtcbiAgICAgIGNvbnN0IGZ1dHVyZU1vbmRheSA9IGFkZERheXModG9kYXksIDE0KTtcbiAgICAgIHdoaWxlIChmdXR1cmVNb25kYXkuZ2V0RGF5KCkgIT09IDEpIHsgLy8gMSA9IE1vbmRheVxuICAgICAgICBmdXR1cmVNb25kYXkuc2V0RGF0ZShmdXR1cmVNb25kYXkuZ2V0RGF0ZSgpICsgMSk7XG4gICAgICB9XG4gICAgICBcbiAgICAgIGV4cGVjdChpc1RpbWVTbG90QXZhaWxhYmxlKGZ1dHVyZU1vbmRheSwgJzA4OjAwJykpLnRvQmUodHJ1ZSk7IC8vIE9wZW5pbmcgdGltZVxuICAgICAgZXhwZWN0KGlzVGltZVNsb3RBdmFpbGFibGUoZnV0dXJlTW9uZGF5LCAnMDk6MDAnKSkudG9CZSh0cnVlKTsgLy8gV2l0aGluIGhvdXJzXG4gICAgICBleHBlY3QoaXNUaW1lU2xvdEF2YWlsYWJsZShmdXR1cmVNb25kYXksICcxOTowMCcpKS50b0JlKHRydWUpOyAvLyBCZWZvcmUgY2xvc2luZ1xuICAgIH0pO1xuXG4gICAgdGVzdCgnc2hvdWxkIHJlamVjdCB0aW1lIHNsb3RzIG91dHNpZGUgb3BlbmluZyBob3VycycsICgpID0+IHtcbiAgICAgIGNvbnN0IHRvZGF5ID0gbmV3IERhdGUoKTtcbiAgICAgIGNvbnN0IGZ1dHVyZU1vbmRheSA9IGFkZERheXModG9kYXksIDE0KTtcbiAgICAgIHdoaWxlIChmdXR1cmVNb25kYXkuZ2V0RGF5KCkgIT09IDEpIHsgLy8gMSA9IE1vbmRheVxuICAgICAgICBmdXR1cmVNb25kYXkuc2V0RGF0ZShmdXR1cmVNb25kYXkuZ2V0RGF0ZSgpICsgMSk7XG4gICAgICB9XG4gICAgICBcbiAgICAgIGV4cGVjdChpc1RpbWVTbG90QXZhaWxhYmxlKGZ1dHVyZU1vbmRheSwgJzA3OjAwJykpLnRvQmUoZmFsc2UpOyAvLyBCZWZvcmUgb3BlbmluZ1xuICAgICAgZXhwZWN0KGlzVGltZVNsb3RBdmFpbGFibGUoZnV0dXJlTW9uZGF5LCAnMjA6MDAnKSkudG9CZShmYWxzZSk7IC8vIEF0IGNsb3NpbmcgdGltZSAod291bGQgZW5kIGFmdGVyKVxuICAgICAgZXhwZWN0KGlzVGltZVNsb3RBdmFpbGFibGUoZnV0dXJlTW9uZGF5LCAnMjE6MDAnKSkudG9CZShmYWxzZSk7IC8vIEFmdGVyIGNsb3NpbmdcbiAgICB9KTtcblxuICAgIHRlc3QoJ3Nob3VsZCByZWplY3QgdGltZSBzbG90cyBkdXJpbmcgYnJlYWtzJywgKCkgPT4ge1xuICAgICAgY29uc3QgdG9kYXkgPSBuZXcgRGF0ZSgpO1xuICAgICAgY29uc3QgZnV0dXJlTW9uZGF5ID0gYWRkRGF5cyh0b2RheSwgMTQpO1xuICAgICAgd2hpbGUgKGZ1dHVyZU1vbmRheS5nZXREYXkoKSAhPT0gMSkgeyAvLyAxID0gTW9uZGF5XG4gICAgICAgIGZ1dHVyZU1vbmRheS5zZXREYXRlKGZ1dHVyZU1vbmRheS5nZXREYXRlKCkgKyAxKTtcbiAgICAgIH1cbiAgICAgIFxuICAgICAgZXhwZWN0KGlzVGltZVNsb3RBdmFpbGFibGUoZnV0dXJlTW9uZGF5LCAnMTI6MDAnKSkudG9CZShmYWxzZSk7IC8vIER1cmluZyBicmVha1xuICAgICAgZXhwZWN0KGlzVGltZVNsb3RBdmFpbGFibGUoZnV0dXJlTW9uZGF5LCAnMTI6MzAnKSkudG9CZShmYWxzZSk7IC8vIER1cmluZyBicmVha1xuICAgICAgZXhwZWN0KGlzVGltZVNsb3RBdmFpbGFibGUoZnV0dXJlTW9uZGF5LCAnMTE6MzAnKSkudG9CZShmYWxzZSk7IC8vIFdvdWxkIGV4dGVuZCBpbnRvIGJyZWFrXG4gICAgICBleHBlY3QoaXNUaW1lU2xvdEF2YWlsYWJsZShmdXR1cmVNb25kYXksICcxMzowMCcpKS50b0JlKHRydWUpOyAvLyBBZnRlciBicmVha1xuICAgIH0pO1xuXG4gICAgdGVzdCgnc2hvdWxkIHJlamVjdCB0aW1lIHNsb3RzIHRoYXQgY29uZmxpY3Qgd2l0aCBleGlzdGluZyBib29raW5ncycsICgpID0+IHtcbiAgICAgIGNvbnN0IGJvb2tpbmdEYXRlID0gbmV3IERhdGUoZnV0dXJlQm9va2luZ0RhdGUpOyAvLyBVc2UgdGhlIHNhbWUgZnV0dXJlIE1vbmRheVxuICAgICAgXG4gICAgICAvLyBUZXN0IHRpbWVzIHRoYXQgc2hvdWxkIGJlIGF2YWlsYWJsZSAobm90IGNvbmZsaWN0aW5nIHdpdGggYm9va2luZ3MpXG4gICAgICAvLyBNb25kYXkgb3BlbmluZyBob3VycyBhcmUgODowMC0yMDowMCwgc28gdGhlc2Ugc2hvdWxkIGJlIGF2YWlsYWJsZVxuICAgICAgZXhwZWN0KGlzVGltZVNsb3RBdmFpbGFibGUoYm9va2luZ0RhdGUsICcwODowMCcpKS50b0JlKHRydWUpOyAvLyBPcGVuaW5nIHRpbWVcbiAgICAgIGV4cGVjdChpc1RpbWVTbG90QXZhaWxhYmxlKGJvb2tpbmdEYXRlLCAnMDk6MDAnKSkudG9CZSh0cnVlKTsgLy8gQmVmb3JlIGZpcnN0IGJvb2tpbmdcbiAgICAgIFxuICAgICAgLy8gQm9va2luZyBleGlzdHMgMTA6MDAtMTE6MzAsIHRoZXNlIHNob3VsZCBiZSBibG9ja2VkXG4gICAgICBleHBlY3QoaXNUaW1lU2xvdEF2YWlsYWJsZShib29raW5nRGF0ZSwgJzEwOjAwJykpLnRvQmUoZmFsc2UpO1xuICAgICAgZXhwZWN0KGlzVGltZVNsb3RBdmFpbGFibGUoYm9va2luZ0RhdGUsICcxMTowMCcpKS50b0JlKGZhbHNlKTtcbiAgICAgIFxuICAgICAgLy8gQm9va2luZyBleGlzdHMgMTQ6MDAtMTY6MDAsIHRoZXNlIHNob3VsZCBiZSBibG9ja2VkXG4gICAgICBleHBlY3QoaXNUaW1lU2xvdEF2YWlsYWJsZShib29raW5nRGF0ZSwgJzE0OjAwJykpLnRvQmUoZmFsc2UpO1xuICAgICAgZXhwZWN0KGlzVGltZVNsb3RBdmFpbGFibGUoYm9va2luZ0RhdGUsICcxNTowMCcpKS50b0JlKGZhbHNlKTtcbiAgICAgIFxuICAgICAgLy8gVGltZSBhZnRlciBib29raW5ncyBzaG91bGQgYmUgYXZhaWxhYmxlXG4gICAgICBleHBlY3QoaXNUaW1lU2xvdEF2YWlsYWJsZShib29raW5nRGF0ZSwgJzE4OjAwJykpLnRvQmUodHJ1ZSk7IC8vIFdlbGwgYWZ0ZXIgYm9va2luZ3NcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ1Zpc3VhbCBJbmRpY2F0b3JzIExvZ2ljJywgKCkgPT4ge1xuICAgIHRlc3QoJ3Nob3VsZCBjb3JyZWN0bHkgaWRlbnRpZnkgYm9va2VkIHRpbWUgc2xvdHMnLCAoKSA9PiB7XG4gICAgICBjb25zdCBib29raW5nRGF0ZSA9IG5ldyBEYXRlKGZ1dHVyZUJvb2tpbmdEYXRlKTtcbiAgICAgIC8vIFRlc3QgdGhhdCB0aGUgYm9va2luZyBkZXRlY3Rpb24gbG9naWMgd29ya3NcbiAgICAgIGNvbnN0IGJvb2tpbmdUaW1lcyA9IFsnMTA6MzAnLCAnMTE6MDAnLCAnMTQ6MzAnLCAnMTU6MDAnXTsgLy8gVGltZXMgd2l0aGluIGJvb2tpbmcgcGVyaW9kc1xuICAgICAgXG4gICAgICBib29raW5nVGltZXMuZm9yRWFjaCh0aW1lID0+IHtcbiAgICAgICAgY29uc3QgaGFzQm9va2luZyA9IG1vY2tCb29raW5ncy5zb21lKGJvb2tpbmcgPT4ge1xuICAgICAgICAgIGNvbnN0IGJvb2tpbmdTdGFydCA9IG5ldyBEYXRlKGJvb2tpbmcuc3RhcnRUaW1lKTtcbiAgICAgICAgICBjb25zdCBib29raW5nRW5kID0gbmV3IERhdGUoYm9va2luZy5lbmRUaW1lKTtcbiAgICAgICAgICBjb25zdCB0aW1lU2xvdCA9IG5ldyBEYXRlKGJvb2tpbmdEYXRlKTtcbiAgICAgICAgICBjb25zdCBbaG91ciwgbWludXRlXSA9IHRpbWUuc3BsaXQoJzonKS5tYXAoTnVtYmVyKTtcbiAgICAgICAgICB0aW1lU2xvdC5zZXRIb3Vycyhob3VyLCBtaW51dGUsIDAsIDApO1xuICAgICAgICAgIFxuICAgICAgICAgIHJldHVybiB0aW1lU2xvdCA+PSBib29raW5nU3RhcnQgJiYgdGltZVNsb3QgPCBib29raW5nRW5kO1xuICAgICAgICB9KTtcbiAgICAgICAgXG4gICAgICAgIGV4cGVjdChoYXNCb29raW5nKS50b0JlKHRydWUpO1xuICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICB0ZXN0KCdzaG91bGQgY29ycmVjdGx5IGlkZW50aWZ5IGF2YWlsYWJsZSB0aW1lIHNsb3RzJywgKCkgPT4ge1xuICAgICAgY29uc3QgYm9va2luZ0RhdGUgPSBuZXcgRGF0ZShmdXR1cmVCb29raW5nRGF0ZSk7XG4gICAgICBjb25zdCBhdmFpbGFibGVUaW1lcyA9IFsnMDg6MDAnLCAnMDk6MDAnLCAnMTM6MDAnLCAnMTc6MDAnXTsgLy8gVGltZXMgb3V0c2lkZSBib29raW5nIHBlcmlvZHNcbiAgICAgIFxuICAgICAgYXZhaWxhYmxlVGltZXMuZm9yRWFjaCh0aW1lID0+IHtcbiAgICAgICAgY29uc3QgaGFzQm9va2luZyA9IG1vY2tCb29raW5ncy5zb21lKGJvb2tpbmcgPT4ge1xuICAgICAgICAgIGNvbnN0IGJvb2tpbmdTdGFydCA9IG5ldyBEYXRlKGJvb2tpbmcuc3RhcnRUaW1lKTtcbiAgICAgICAgICBjb25zdCBib29raW5nRW5kID0gbmV3IERhdGUoYm9va2luZy5lbmRUaW1lKTtcbiAgICAgICAgICBjb25zdCB0aW1lU2xvdCA9IG5ldyBEYXRlKGJvb2tpbmdEYXRlKTtcbiAgICAgICAgICBjb25zdCBbaG91ciwgbWludXRlXSA9IHRpbWUuc3BsaXQoJzonKS5tYXAoTnVtYmVyKTtcbiAgICAgICAgICB0aW1lU2xvdC5zZXRIb3Vycyhob3VyLCBtaW51dGUsIDAsIDApO1xuICAgICAgICAgIFxuICAgICAgICAgIHJldHVybiB0aW1lU2xvdCA+PSBib29raW5nU3RhcnQgJiYgdGltZVNsb3QgPCBib29raW5nRW5kO1xuICAgICAgICB9KTtcbiAgICAgICAgXG4gICAgICAgIGV4cGVjdChoYXNCb29raW5nKS50b0JlKGZhbHNlKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnQ2FsZW5kYXIgRGlzcGxheSBMb2dpYycsICgpID0+IHtcbiAgICB0ZXN0KCdzaG91bGQgcHJvdmlkZSBjb3JyZWN0IENTUyBjbGFzc2VzIGZvciBkaWZmZXJlbnQgZGF5IHN0YXRlcycsICgpID0+IHtcbiAgICAgIGNvbnN0IGdldERhdGVDbGFzcyA9IChkYXRlOiBEYXRlKSA9PiB7XG4gICAgICAgIGNvbnN0IHRvZGF5ID0gbmV3IERhdGUoKTtcbiAgICAgICAgY29uc3QgaXNDdXJyZW50RGF5ID0gZGF0ZS50b0RhdGVTdHJpbmcoKSA9PT0gdG9kYXkudG9EYXRlU3RyaW5nKCk7XG4gICAgICAgIGNvbnN0IGlzQXZhaWxhYmxlID0gaXNEYXlBdmFpbGFibGUoZGF0ZSk7XG4gICAgICAgIFxuICAgICAgICBpZiAoIWlzQXZhaWxhYmxlKSB7XG4gICAgICAgICAgcmV0dXJuICdiZy1yZWQtMTAwIHRleHQtcmVkLTYwMCBjdXJzb3Itbm90LWFsbG93ZWQgYm9yZGVyIGJvcmRlci1yZWQtMjAwJztcbiAgICAgICAgfSBlbHNlIGlmIChpc0N1cnJlbnREYXkpIHtcbiAgICAgICAgICByZXR1cm4gJ2JnLWJsdWUtMTAwIHRleHQtYmx1ZS05MDAgaG92ZXI6YmctYmx1ZS0yMDAnO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHJldHVybiAnaG92ZXI6YmctZ3JheS0xMDAnO1xuICAgICAgICB9XG4gICAgICB9O1xuXG4gICAgICBjb25zdCB0b2RheSA9IG5ldyBEYXRlKCk7XG4gICAgICBjb25zdCBmdXR1cmVXZWRuZXNkYXkgPSBuZXcgRGF0ZSgnMjAyNS0wNi0wNCcpOyAvLyBDbG9zZWQgZGF5XG4gICAgICBjb25zdCBmdXR1cmVNb25kYXkgPSBhZGREYXlzKG5ldyBEYXRlKCksIDIxKTsgLy8gVXNlIGEgZGF0ZSBpbiB0aGUgZnV0dXJlXG4gICAgICB3aGlsZSAoZnV0dXJlTW9uZGF5LmdldERheSgpICE9PSAxKSB7IC8vIDEgPSBNb25kYXlcbiAgICAgICAgZnV0dXJlTW9uZGF5LnNldERhdGUoZnV0dXJlTW9uZGF5LmdldERhdGUoKSArIDEpO1xuICAgICAgfVxuICAgICAgXG4gICAgICBleHBlY3QoZ2V0RGF0ZUNsYXNzKHRvZGF5KSkudG9Db250YWluKCdiZy1ibHVlLTEwMCcpOyAvLyBUb2RheVxuICAgICAgZXhwZWN0KGdldERhdGVDbGFzcyhmdXR1cmVXZWRuZXNkYXkpKS50b0NvbnRhaW4oJ2JnLXJlZC0xMDAnKTsgLy8gVW5hdmFpbGFibGVcbiAgICAgIGV4cGVjdChnZXREYXRlQ2xhc3MoZnV0dXJlTW9uZGF5KSkudG9CZSgnaG92ZXI6YmctZ3JheS0xMDAnKTsgLy8gQXZhaWxhYmxlXG4gICAgfSk7XG5cbiAgICBjb25zdCBpc0RheUF2YWlsYWJsZSA9IChjaGVja0RhdGU6IERhdGUpOiBib29sZWFuID0+IHtcbiAgICAgIGNvbnN0IHRvZGF5ID0gbmV3IERhdGUoKTtcbiAgICAgIHRvZGF5LnNldEhvdXJzKDAsIDAsIDAsIDApO1xuICAgICAgY29uc3QgZGF5VG9DaGVjayA9IG5ldyBEYXRlKGNoZWNrRGF0ZSk7XG4gICAgICBkYXlUb0NoZWNrLnNldEhvdXJzKDAsIDAsIDAsIDApO1xuICAgICAgXG4gICAgICBpZiAoZGF5VG9DaGVjayA8IHRvZGF5KSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH1cblxuICAgICAgaWYgKG1vY2tDb21tb25TcGFjZS51bmF2YWlsYWJsZVBlcmlvZHMpIHtcbiAgICAgICAgZm9yIChjb25zdCBwZXJpb2Qgb2YgbW9ja0NvbW1vblNwYWNlLnVuYXZhaWxhYmxlUGVyaW9kcykge1xuICAgICAgICAgIGNvbnN0IHN0YXJ0RGF0ZSA9IG5ldyBEYXRlKHBlcmlvZC5zdGFydERhdGUpO1xuICAgICAgICAgIGNvbnN0IGVuZERhdGUgPSBuZXcgRGF0ZShwZXJpb2QuZW5kRGF0ZSk7XG4gICAgICAgICAgc3RhcnREYXRlLnNldEhvdXJzKDAsIDAsIDAsIDApO1xuICAgICAgICAgIGVuZERhdGUuc2V0SG91cnMoMjMsIDU5LCA1OSwgOTk5KTtcbiAgICAgICAgICBcbiAgICAgICAgICBpZiAoZGF5VG9DaGVjayA+PSBzdGFydERhdGUgJiYgZGF5VG9DaGVjayA8PSBlbmREYXRlKSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGlmIChtb2NrQ29tbW9uU3BhY2Uub3BlbmluZ0hvdXJzKSB7XG4gICAgICAgIGNvbnN0IGRheU5hbWUgPSBjaGVja0RhdGUudG9Mb2NhbGVEYXRlU3RyaW5nKCdlbi1VUycsIHsgd2Vla2RheTogJ2xvbmcnIH0pLnRvTG93ZXJDYXNlKCk7XG4gICAgICAgIGNvbnN0IGRheUhvdXJzID0gbW9ja0NvbW1vblNwYWNlLm9wZW5pbmdIb3Vycy5maW5kKGggPT4gaC5kYXkudG9Mb3dlckNhc2UoKSA9PT0gZGF5TmFtZSk7XG4gICAgICAgIFxuICAgICAgICBpZiAoIWRheUhvdXJzIHx8IGRheUhvdXJzLmlzT3BlbiA9PT0gZmFsc2UpIHtcbiAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfTtcblxuICAgIHRlc3QoJ3Nob3VsZCBzaG93IGNvcnJlY3QgbGVnZW5kIGl0ZW1zJywgKCkgPT4ge1xuICAgICAgY29uc3QgbGVnZW5kSXRlbXMgPSBbXG4gICAgICAgIHsgY29sb3I6ICdiZy1ibHVlLTYwMCcsIGxhYmVsOiAnU2VsZWN0ZWQnIH0sXG4gICAgICAgIHsgY29sb3I6ICdiZy1vcmFuZ2UtNTAwJywgbGFiZWw6ICdCb29rZWQnIH0sXG4gICAgICAgIHsgY29sb3I6ICdiZy1yZWQtNTAwJywgbGFiZWw6ICdVbmF2YWlsYWJsZScgfSxcbiAgICAgICAgeyBjb2xvcjogJ2JnLWJsdWUtMjAwJywgbGFiZWw6ICdUb2RheScgfVxuICAgICAgXTtcbiAgICAgIFxuICAgICAgZXhwZWN0KGxlZ2VuZEl0ZW1zKS50b0hhdmVMZW5ndGgoNCk7XG4gICAgICBleHBlY3QobGVnZW5kSXRlbXMuZmluZChpdGVtID0+IGl0ZW0ubGFiZWwgPT09ICdVbmF2YWlsYWJsZScpKS50b0JlRGVmaW5lZCgpO1xuICAgIH0pO1xuXG4gICAgdGVzdCgnc2hvdWxkIHByb3ZpZGUgY29ycmVjdCBDU1MgY2xhc3NlcyBmb3IgdGltZSBzbG90IGJ1dHRvbnMnLCAoKSA9PiB7XG4gICAgICBjb25zdCBnZXRUaW1lU2xvdENsYXNzID0gKHRpbWU6IHN0cmluZywgaXNBdmFpbGFibGU6IGJvb2xlYW4sIGhhc0Jvb2tpbmc6IGJvb2xlYW4sIGlzU2VsZWN0ZWQ6IGJvb2xlYW4pID0+IHtcbiAgICAgICAgaWYgKCFpc0F2YWlsYWJsZSkge1xuICAgICAgICAgIHJldHVybiAnYmctcmVkLTEwMCBib3JkZXItcmVkLTIwMCB0ZXh0LXJlZC02MDAgY3Vyc29yLW5vdC1hbGxvd2VkJztcbiAgICAgICAgfSBlbHNlIGlmIChoYXNCb29raW5nKSB7XG4gICAgICAgICAgcmV0dXJuICdiZy1vcmFuZ2UtMTAwIGJvcmRlci1vcmFuZ2UtMjAwIHRleHQtb3JhbmdlLTcwMCBjdXJzb3Itbm90LWFsbG93ZWQnO1xuICAgICAgICB9IGVsc2UgaWYgKGlzU2VsZWN0ZWQpIHtcbiAgICAgICAgICByZXR1cm4gJ2JnLWJsdWUtNTAwIGJvcmRlci1ibHVlLTYwMCB0ZXh0LXdoaXRlIGZvbnQtc2VtaWJvbGQnO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHJldHVybiAnYmctd2hpdGUgYm9yZGVyLWdyYXktMjAwIHRleHQtZ3JheS03MDAgaG92ZXI6YmctZ3JheS0xMDAgaG92ZXI6Ym9yZGVyLWdyYXktMzAwJztcbiAgICAgICAgfVxuICAgICAgfTtcblxuICAgICAgZXhwZWN0KGdldFRpbWVTbG90Q2xhc3MoJzA5OjAwJywgdHJ1ZSwgZmFsc2UsIGZhbHNlKSkudG9CZSgnYmctd2hpdGUgYm9yZGVyLWdyYXktMjAwIHRleHQtZ3JheS03MDAgaG92ZXI6YmctZ3JheS0xMDAgaG92ZXI6Ym9yZGVyLWdyYXktMzAwJyk7XG4gICAgICBleHBlY3QoZ2V0VGltZVNsb3RDbGFzcygnMDk6MDAnLCB0cnVlLCBmYWxzZSwgdHJ1ZSkpLnRvQmUoJ2JnLWJsdWUtNTAwIGJvcmRlci1ibHVlLTYwMCB0ZXh0LXdoaXRlIGZvbnQtc2VtaWJvbGQnKTtcbiAgICAgIGV4cGVjdChnZXRUaW1lU2xvdENsYXNzKCcwOTowMCcsIHRydWUsIHRydWUsIGZhbHNlKSkudG9CZSgnYmctb3JhbmdlLTEwMCBib3JkZXItb3JhbmdlLTIwMCB0ZXh0LW9yYW5nZS03MDAgY3Vyc29yLW5vdC1hbGxvd2VkJyk7XG4gICAgICBleHBlY3QoZ2V0VGltZVNsb3RDbGFzcygnMDk6MDAnLCBmYWxzZSwgZmFsc2UsIGZhbHNlKSkudG9CZSgnYmctcmVkLTEwMCBib3JkZXItcmVkLTIwMCB0ZXh0LXJlZC02MDAgY3Vyc29yLW5vdC1hbGxvd2VkJyk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdOZXcgQm9va2luZyBGb3JtIFRlc3RzJywgKCkgPT4ge1xuICAgIHRlc3QoJ3Nob3VsZCB2YWxpZGF0ZSB0aW1lIHNsb3QgZ3JpZCBnZW5lcmF0aW9uJywgKCkgPT4ge1xuICAgICAgY29uc3QgdGltZVNsb3RzOiBzdHJpbmdbXSA9IFtdO1xuICAgICAgZm9yIChsZXQgaG91ciA9IDY7IGhvdXIgPD0gMjI7IGhvdXIrKykge1xuICAgICAgICB0aW1lU2xvdHMucHVzaChgJHtob3VyLnRvU3RyaW5nKCkucGFkU3RhcnQoMiwgJzAnKX06MDBgKTtcbiAgICAgICAgdGltZVNsb3RzLnB1c2goYCR7aG91ci50b1N0cmluZygpLnBhZFN0YXJ0KDIsICcwJyl9OjMwYCk7XG4gICAgICB9XG4gICAgICBcbiAgICAgIGV4cGVjdCh0aW1lU2xvdHMpLnRvQ29udGFpbignMDY6MDAnKTtcbiAgICAgIGV4cGVjdCh0aW1lU2xvdHMpLnRvQ29udGFpbignMDY6MzAnKTtcbiAgICAgIGV4cGVjdCh0aW1lU2xvdHMpLnRvQ29udGFpbignMjI6MDAnKTtcbiAgICAgIGV4cGVjdCh0aW1lU2xvdHMpLnRvQ29udGFpbignMjI6MzAnKTtcbiAgICAgIGV4cGVjdCh0aW1lU2xvdHMubGVuZ3RoKS50b0JlKDM0KTsgLy8gMTcgaG91cnMgKiAyIHNsb3RzIHBlciBob3VyXG4gICAgfSk7XG5cbiAgICB0ZXN0KCdzaG91bGQgaGFuZGxlIHN0YXJ0IGFuZCBlbmQgdGltZSBzZWxlY3Rpb24gbG9naWMnLCAoKSA9PiB7XG4gICAgICBsZXQgY3VycmVudFN0YXJ0VGltZSA9ICcnO1xuICAgICAgbGV0IGN1cnJlbnRFbmRUaW1lID0gJyc7XG4gICAgICBcbiAgICAgIGNvbnN0IHNlbGVjdFRpbWUgPSAodGltZTogc3RyaW5nKSA9PiB7XG4gICAgICAgIGlmICghY3VycmVudFN0YXJ0VGltZSB8fCAoY3VycmVudFN0YXJ0VGltZSAmJiBjdXJyZW50RW5kVGltZSkpIHtcbiAgICAgICAgICAvLyBTZXQgc3RhcnQgdGltZVxuICAgICAgICAgIGN1cnJlbnRTdGFydFRpbWUgPSB0aW1lO1xuICAgICAgICAgIGN1cnJlbnRFbmRUaW1lID0gJyc7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgLy8gU2V0IGVuZCB0aW1lIGlmIHN0YXJ0IHRpbWUgaXMgYWxyZWFkeSBzZXRcbiAgICAgICAgICBpZiAodGltZSA+IGN1cnJlbnRTdGFydFRpbWUpIHtcbiAgICAgICAgICAgIGN1cnJlbnRFbmRUaW1lID0gdGltZTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgLy8gSWYgc2VsZWN0ZWQgdGltZSBpcyBiZWZvcmUgc3RhcnQgdGltZSwgbWFrZSBpdCB0aGUgbmV3IHN0YXJ0IHRpbWVcbiAgICAgICAgICAgIGN1cnJlbnRTdGFydFRpbWUgPSB0aW1lO1xuICAgICAgICAgICAgY3VycmVudEVuZFRpbWUgPSAnJztcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH07XG4gICAgICBcbiAgICAgIC8vIEluaXRpYWwgc3RhdGVcbiAgICAgIGV4cGVjdChjdXJyZW50U3RhcnRUaW1lKS50b0JlKCcnKTtcbiAgICAgIGV4cGVjdChjdXJyZW50RW5kVGltZSkudG9CZSgnJyk7XG4gICAgICBcbiAgICAgIC8vIFNlbGVjdCBmaXJzdCB0aW1lIChzaG91bGQgYmVjb21lIHN0YXJ0IHRpbWUpXG4gICAgICBzZWxlY3RUaW1lKCcwOTowMCcpO1xuICAgICAgZXhwZWN0KGN1cnJlbnRTdGFydFRpbWUpLnRvQmUoJzA5OjAwJyk7XG4gICAgICBleHBlY3QoY3VycmVudEVuZFRpbWUpLnRvQmUoJycpO1xuICAgICAgXG4gICAgICAvLyBTZWxlY3QgbGF0ZXIgdGltZSAoc2hvdWxkIGJlY29tZSBlbmQgdGltZSlcbiAgICAgIHNlbGVjdFRpbWUoJzExOjAwJyk7XG4gICAgICBleHBlY3QoY3VycmVudFN0YXJ0VGltZSkudG9CZSgnMDk6MDAnKTtcbiAgICAgIGV4cGVjdChjdXJyZW50RW5kVGltZSkudG9CZSgnMTE6MDAnKTtcbiAgICAgIFxuICAgICAgLy8gU2VsZWN0IGFub3RoZXIgdGltZSAoc2hvdWxkIHJlc2V0IGFuZCBiZWNvbWUgbmV3IHN0YXJ0IHRpbWUpXG4gICAgICBzZWxlY3RUaW1lKCcxNDowMCcpO1xuICAgICAgZXhwZWN0KGN1cnJlbnRTdGFydFRpbWUpLnRvQmUoJzE0OjAwJyk7XG4gICAgICBleHBlY3QoY3VycmVudEVuZFRpbWUpLnRvQmUoJycpO1xuICAgICAgXG4gICAgICAvLyBTZWxlY3QgZWFybGllciB0aW1lIChzaG91bGQgYmVjb21lIG5ldyBzdGFydCB0aW1lKVxuICAgICAgc2VsZWN0VGltZSgnMTM6MDAnKTtcbiAgICAgIGV4cGVjdChjdXJyZW50U3RhcnRUaW1lKS50b0JlKCcxMzowMCcpO1xuICAgICAgZXhwZWN0KGN1cnJlbnRFbmRUaW1lKS50b0JlKCcnKTtcbiAgICB9KTtcblxuICAgIHRlc3QoJ3Nob3VsZCBjYWxjdWxhdGUgYm9va2luZyBkdXJhdGlvbiBjb3JyZWN0bHknLCAoKSA9PiB7XG4gICAgICBjb25zdCBjYWxjdWxhdGVEdXJhdGlvbiA9IChzdGFydFRpbWU6IHN0cmluZywgZW5kVGltZTogc3RyaW5nKSA9PiB7XG4gICAgICAgIGlmICghc3RhcnRUaW1lIHx8ICFlbmRUaW1lKSByZXR1cm4gbnVsbDtcbiAgICAgICAgXG4gICAgICAgIGNvbnN0IHN0YXJ0ID0gbmV3IERhdGUoYDIwMDAtMDEtMDFUJHtzdGFydFRpbWV9OjAwYCk7XG4gICAgICAgIGNvbnN0IGVuZCA9IG5ldyBEYXRlKGAyMDAwLTAxLTAxVCR7ZW5kVGltZX06MDBgKTtcbiAgICAgICAgY29uc3QgZHVyYXRpb24gPSAoZW5kLmdldFRpbWUoKSAtIHN0YXJ0LmdldFRpbWUoKSkgLyAoMTAwMCAqIDYwKTtcbiAgICAgICAgXG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgdG90YWxNaW51dGVzOiBkdXJhdGlvbixcbiAgICAgICAgICBob3VyczogTWF0aC5mbG9vcihkdXJhdGlvbiAvIDYwKSxcbiAgICAgICAgICBtaW51dGVzOiBkdXJhdGlvbiAlIDYwXG4gICAgICAgIH07XG4gICAgICB9O1xuICAgICAgXG4gICAgICBjb25zdCBkdXJhdGlvbjEgPSBjYWxjdWxhdGVEdXJhdGlvbignMDk6MDAnLCAnMTE6MDAnKTtcbiAgICAgIGV4cGVjdChkdXJhdGlvbjE/LnRvdGFsTWludXRlcykudG9CZSgxMjApO1xuICAgICAgZXhwZWN0KGR1cmF0aW9uMT8uaG91cnMpLnRvQmUoMik7XG4gICAgICBleHBlY3QoZHVyYXRpb24xPy5taW51dGVzKS50b0JlKDApO1xuICAgICAgXG4gICAgICBjb25zdCBkdXJhdGlvbjIgPSBjYWxjdWxhdGVEdXJhdGlvbignMTQ6MzAnLCAnMTY6MDAnKTtcbiAgICAgIGV4cGVjdChkdXJhdGlvbjI/LnRvdGFsTWludXRlcykudG9CZSg5MCk7XG4gICAgICBleHBlY3QoZHVyYXRpb24yPy5ob3VycykudG9CZSgxKTtcbiAgICAgIGV4cGVjdChkdXJhdGlvbjI/Lm1pbnV0ZXMpLnRvQmUoMzApO1xuICAgICAgXG4gICAgICBjb25zdCBub0R1cmF0aW9uID0gY2FsY3VsYXRlRHVyYXRpb24oJzA5OjAwJywgJycpO1xuICAgICAgZXhwZWN0KG5vRHVyYXRpb24pLnRvQmUobnVsbCk7XG4gICAgfSk7XG5cbiAgICB0ZXN0KCdzaG91bGQgdmFsaWRhdGUgZm9ybSBzdWJtaXNzaW9uIHJlcXVpcmVtZW50cycsICgpID0+IHtcbiAgICAgIGNvbnN0IHZhbGlkYXRlQm9va2luZ0Zvcm0gPSAoc3RhcnRUaW1lOiBzdHJpbmcsIGVuZFRpbWU6IHN0cmluZywgZGF0ZTogRGF0ZSkgPT4ge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIGhhc1N0YXJ0VGltZTogISFzdGFydFRpbWUsXG4gICAgICAgICAgaGFzRW5kVGltZTogISFlbmRUaW1lLFxuICAgICAgICAgIGhhc1ZhbGlkVGltZVJhbmdlOiBzdGFydFRpbWUgJiYgZW5kVGltZSAmJiBlbmRUaW1lID4gc3RhcnRUaW1lLFxuICAgICAgICAgIGhhc0RhdGU6ICEhZGF0ZSxcbiAgICAgICAgICBpc0NvbXBsZXRlOiAhIShzdGFydFRpbWUgJiYgZW5kVGltZSAmJiBkYXRlICYmIGVuZFRpbWUgPiBzdGFydFRpbWUpXG4gICAgICAgIH07XG4gICAgICB9O1xuICAgICAgXG4gICAgICBjb25zdCBpbmNvbXBsZXRlRm9ybSA9IHZhbGlkYXRlQm9va2luZ0Zvcm0oJycsICcnLCBuZXcgRGF0ZSgpKTtcbiAgICAgIGV4cGVjdChpbmNvbXBsZXRlRm9ybS5oYXNTdGFydFRpbWUpLnRvQmUoZmFsc2UpO1xuICAgICAgZXhwZWN0KGluY29tcGxldGVGb3JtLmhhc0VuZFRpbWUpLnRvQmUoZmFsc2UpO1xuICAgICAgZXhwZWN0KGluY29tcGxldGVGb3JtLmlzQ29tcGxldGUpLnRvQmUoZmFsc2UpO1xuICAgICAgXG4gICAgICBjb25zdCBwYXJ0aWFsRm9ybSA9IHZhbGlkYXRlQm9va2luZ0Zvcm0oJzA5OjAwJywgJycsIG5ldyBEYXRlKCkpO1xuICAgICAgZXhwZWN0KHBhcnRpYWxGb3JtLmhhc1N0YXJ0VGltZSkudG9CZSh0cnVlKTtcbiAgICAgIGV4cGVjdChwYXJ0aWFsRm9ybS5oYXNFbmRUaW1lKS50b0JlKGZhbHNlKTtcbiAgICAgIGV4cGVjdChwYXJ0aWFsRm9ybS5pc0NvbXBsZXRlKS50b0JlKGZhbHNlKTtcbiAgICAgIFxuICAgICAgY29uc3QgY29tcGxldGVGb3JtID0gdmFsaWRhdGVCb29raW5nRm9ybSgnMDk6MDAnLCAnMTE6MDAnLCBuZXcgRGF0ZSgpKTtcbiAgICAgIGV4cGVjdChjb21wbGV0ZUZvcm0uaGFzU3RhcnRUaW1lKS50b0JlKHRydWUpO1xuICAgICAgZXhwZWN0KGNvbXBsZXRlRm9ybS5oYXNFbmRUaW1lKS50b0JlKHRydWUpO1xuICAgICAgZXhwZWN0KGNvbXBsZXRlRm9ybS5oYXNWYWxpZFRpbWVSYW5nZSkudG9CZSh0cnVlKTtcbiAgICAgIGV4cGVjdChjb21wbGV0ZUZvcm0uaXNDb21wbGV0ZSkudG9CZSh0cnVlKTtcbiAgICAgIFxuICAgICAgY29uc3QgaW52YWxpZFRpbWVSYW5nZSA9IHZhbGlkYXRlQm9va2luZ0Zvcm0oJzExOjAwJywgJzA5OjAwJywgbmV3IERhdGUoKSk7XG4gICAgICBleHBlY3QoaW52YWxpZFRpbWVSYW5nZS5oYXNWYWxpZFRpbWVSYW5nZSkudG9CZShmYWxzZSk7XG4gICAgICBleHBlY3QoaW52YWxpZFRpbWVSYW5nZS5pc0NvbXBsZXRlKS50b0JlKGZhbHNlKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ0ludGVncmF0aW9uIFRlc3RpbmcnLCAoKSA9PiB7XG4gICAgdGVzdCgnc2hvdWxkIGhhbmRsZSBjb21wbGV0ZSBib29raW5nIGZsb3cgdmFsaWRhdGlvbicsICgpID0+IHtcbiAgICAgIGNvbnN0IHRlc3REYXRlID0gbmV3IERhdGUoJzIwMjUtMDYtMDInKTsgLy8gTW9uZGF5XG4gICAgICBjb25zdCB0ZXN0VGltZSA9ICcxNTowMCc7XG4gICAgICBcbiAgICAgIC8vIFN0ZXAgMTogQ2hlY2sgaWYgZGF5IGlzIGF2YWlsYWJsZSAtIHVzZSBmdXR1cmUgZGF0ZSB0byBlbnN1cmUgaXQncyBhdmFpbGFibGVcbiAgICAgIGNvbnN0IGZ1dHVyZVRlc3REYXRlID0gYWRkRGF5cyhuZXcgRGF0ZSgpLCAxNCk7XG4gICAgICB3aGlsZSAoZnV0dXJlVGVzdERhdGUuZ2V0RGF5KCkgIT09IDEpIHsgLy8gMSA9IE1vbmRheVxuICAgICAgICBmdXR1cmVUZXN0RGF0ZS5zZXREYXRlKGZ1dHVyZVRlc3REYXRlLmdldERhdGUoKSArIDEpO1xuICAgICAgfVxuICAgICAgY29uc3QgZGF5QXZhaWxhYmxlID0gaXNEYXlBdmFpbGFibGUoZnV0dXJlVGVzdERhdGUpO1xuICAgICAgZXhwZWN0KGRheUF2YWlsYWJsZSkudG9CZSh0cnVlKTtcbiAgICAgIFxuICAgICAgLy8gU3RlcCAyOiBDaGVjayBpZiB0aW1lIHNsb3QgaXMgYXZhaWxhYmxlXG4gICAgICBjb25zdCB0aW1lQXZhaWxhYmxlID0gaXNUaW1lU2xvdEF2YWlsYWJsZShmdXR1cmVUZXN0RGF0ZSwgdGVzdFRpbWUpO1xuICAgICAgZXhwZWN0KHRpbWVBdmFpbGFibGUpLnRvQmUodHJ1ZSk7XG4gICAgICBcbiAgICAgIC8vIFN0ZXAgMzogVmFsaWRhdGUgYm9va2luZyBjb25zdHJhaW50c1xuICAgICAgY29uc3QgW2hvdXIsIG1pbnV0ZV0gPSB0ZXN0VGltZS5zcGxpdCgnOicpLm1hcChOdW1iZXIpO1xuICAgICAgZXhwZWN0KGhvdXIpLnRvQmVHcmVhdGVyVGhhbk9yRXF1YWwoOCk7IC8vIEFmdGVyIG9wZW5pbmdcbiAgICAgIGV4cGVjdChob3VyKS50b0JlTGVzc1RoYW4oMjApOyAvLyBCZWZvcmUgY2xvc2luZ1xuICAgIH0pO1xuXG4gICAgdGVzdCgnc2hvdWxkIGludGVncmF0ZSB3aXRoIG5ldyBob3VyIGdyaWQgYm9va2luZyBpbnRlcmZhY2UnLCAoKSA9PiB7XG4gICAgICAvLyBTaW11bGF0ZSB0aGUgbmV3IGJvb2tpbmcgaW50ZXJmYWNlIGZsb3dcbiAgICAgIGxldCBzZWxlY3RlZERhdGUgPSBuZXcgRGF0ZSgpO1xuICAgICAgbGV0IHNlbGVjdGVkU3RhcnRUaW1lID0gJyc7XG4gICAgICBsZXQgc2VsZWN0ZWRFbmRUaW1lID0gJyc7XG4gICAgICBsZXQgaXNEaWFsb2dPcGVuID0gZmFsc2U7XG4gICAgICBcbiAgICAgIC8vIFN0ZXAgMTogRGF0ZSBzZWxlY3Rpb24gZnJvbSBjYWxlbmRhclxuICAgICAgY29uc3Qgc2VsZWN0RGF0ZSA9IChkYXRlOiBEYXRlKSA9PiB7XG4gICAgICAgIHNlbGVjdGVkRGF0ZSA9IGRhdGU7XG4gICAgICAgIGlzRGlhbG9nT3BlbiA9IHRydWU7XG4gICAgICB9O1xuICAgICAgXG4gICAgICAvLyBTdGVwIDI6IFRpbWUgc2VsZWN0aW9uIGZyb20gZ3JpZFxuICAgICAgY29uc3Qgc2VsZWN0VGltZVNsb3QgPSAodGltZTogc3RyaW5nKSA9PiB7XG4gICAgICAgIGlmICghc2VsZWN0ZWRTdGFydFRpbWUgfHwgKHNlbGVjdGVkU3RhcnRUaW1lICYmIHNlbGVjdGVkRW5kVGltZSkpIHtcbiAgICAgICAgICBzZWxlY3RlZFN0YXJ0VGltZSA9IHRpbWU7XG4gICAgICAgICAgc2VsZWN0ZWRFbmRUaW1lID0gJyc7XG4gICAgICAgIH0gZWxzZSBpZiAodGltZSA+IHNlbGVjdGVkU3RhcnRUaW1lKSB7XG4gICAgICAgICAgc2VsZWN0ZWRFbmRUaW1lID0gdGltZTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBzZWxlY3RlZFN0YXJ0VGltZSA9IHRpbWU7XG4gICAgICAgICAgc2VsZWN0ZWRFbmRUaW1lID0gJyc7XG4gICAgICAgIH1cbiAgICAgIH07XG4gICAgICBcbiAgICAgIC8vIFN0ZXAgMzogRm9ybSB2YWxpZGF0aW9uXG4gICAgICBjb25zdCBjYW5TdWJtaXQgPSAoKSA9PiB7XG4gICAgICAgIHJldHVybiAhIShzZWxlY3RlZERhdGUgJiYgc2VsZWN0ZWRTdGFydFRpbWUgJiYgc2VsZWN0ZWRFbmRUaW1lICYmIHNlbGVjdGVkRW5kVGltZSA+IHNlbGVjdGVkU3RhcnRUaW1lKTtcbiAgICAgIH07XG4gICAgICBcbiAgICAgIC8vIFRlc3QgdGhlIGZsb3dcbiAgICAgIGNvbnN0IHRlc3REYXRlID0gYWRkRGF5cyhuZXcgRGF0ZSgpLCA3KTtcbiAgICAgIHNlbGVjdERhdGUodGVzdERhdGUpO1xuICAgICAgZXhwZWN0KGlzRGlhbG9nT3BlbikudG9CZSh0cnVlKTtcbiAgICAgIGV4cGVjdChzZWxlY3RlZERhdGUpLnRvQmUodGVzdERhdGUpO1xuICAgICAgXG4gICAgICBzZWxlY3RUaW1lU2xvdCgnMTA6MDAnKTtcbiAgICAgIGV4cGVjdChzZWxlY3RlZFN0YXJ0VGltZSkudG9CZSgnMTA6MDAnKTtcbiAgICAgIGV4cGVjdChzZWxlY3RlZEVuZFRpbWUpLnRvQmUoJycpO1xuICAgICAgZXhwZWN0KGNhblN1Ym1pdCgpKS50b0JlKGZhbHNlKTtcbiAgICAgIFxuICAgICAgc2VsZWN0VGltZVNsb3QoJzEyOjAwJyk7XG4gICAgICBleHBlY3Qoc2VsZWN0ZWRTdGFydFRpbWUpLnRvQmUoJzEwOjAwJyk7XG4gICAgICBleHBlY3Qoc2VsZWN0ZWRFbmRUaW1lKS50b0JlKCcxMjowMCcpO1xuICAgICAgZXhwZWN0KGNhblN1Ym1pdCgpKS50b0JlKHRydWUpO1xuICAgIH0pO1xuXG4gICAgY29uc3QgaXNEYXlBdmFpbGFibGUgPSAoY2hlY2tEYXRlOiBEYXRlKTogYm9vbGVhbiA9PiB7XG4gICAgICBjb25zdCB0b2RheSA9IG5ldyBEYXRlKCk7XG4gICAgICB0b2RheS5zZXRIb3VycygwLCAwLCAwLCAwKTtcbiAgICAgIGNvbnN0IGRheVRvQ2hlY2sgPSBuZXcgRGF0ZShjaGVja0RhdGUpO1xuICAgICAgZGF5VG9DaGVjay5zZXRIb3VycygwLCAwLCAwLCAwKTtcbiAgICAgIFxuICAgICAgaWYgKGRheVRvQ2hlY2sgPCB0b2RheSkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9XG5cbiAgICAgIGlmIChtb2NrQ29tbW9uU3BhY2UudW5hdmFpbGFibGVQZXJpb2RzKSB7XG4gICAgICAgIGZvciAoY29uc3QgcGVyaW9kIG9mIG1vY2tDb21tb25TcGFjZS51bmF2YWlsYWJsZVBlcmlvZHMpIHtcbiAgICAgICAgICBjb25zdCBzdGFydERhdGUgPSBuZXcgRGF0ZShwZXJpb2Quc3RhcnREYXRlKTtcbiAgICAgICAgICBjb25zdCBlbmREYXRlID0gbmV3IERhdGUocGVyaW9kLmVuZERhdGUpO1xuICAgICAgICAgIHN0YXJ0RGF0ZS5zZXRIb3VycygwLCAwLCAwLCAwKTtcbiAgICAgICAgICBlbmREYXRlLnNldEhvdXJzKDIzLCA1OSwgNTksIDk5OSk7XG4gICAgICAgICAgXG4gICAgICAgICAgaWYgKGRheVRvQ2hlY2sgPj0gc3RhcnREYXRlICYmIGRheVRvQ2hlY2sgPD0gZW5kRGF0ZSkge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBpZiAobW9ja0NvbW1vblNwYWNlLm9wZW5pbmdIb3Vycykge1xuICAgICAgICBjb25zdCBkYXlOYW1lID0gY2hlY2tEYXRlLnRvTG9jYWxlRGF0ZVN0cmluZygnZW4tVVMnLCB7IHdlZWtkYXk6ICdsb25nJyB9KS50b0xvd2VyQ2FzZSgpO1xuICAgICAgICBjb25zdCBkYXlIb3VycyA9IG1vY2tDb21tb25TcGFjZS5vcGVuaW5nSG91cnMuZmluZChoID0+IGguZGF5LnRvTG93ZXJDYXNlKCkgPT09IGRheU5hbWUpO1xuICAgICAgICBcbiAgICAgICAgaWYgKCFkYXlIb3VycyB8fCBkYXlIb3Vycy5pc09wZW4gPT09IGZhbHNlKSB7XG4gICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH07XG5cbiAgICBjb25zdCBpc1RpbWVTbG90QXZhaWxhYmxlID0gKGRhdGU6IERhdGUsIHRpbWU6IHN0cmluZyk6IGJvb2xlYW4gPT4ge1xuICAgICAgaWYgKCFpc0RheUF2YWlsYWJsZShkYXRlKSkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IFtob3VyLCBtaW51dGVdID0gdGltZS5zcGxpdCgnOicpLm1hcChOdW1iZXIpO1xuICAgICAgY29uc3Qgc2xvdFN0YXJ0ID0gbmV3IERhdGUoZGF0ZSk7XG4gICAgICBzbG90U3RhcnQuc2V0SG91cnMoaG91ciwgbWludXRlLCAwLCAwKTtcbiAgICAgIGNvbnN0IHNsb3RFbmQgPSBuZXcgRGF0ZShzbG90U3RhcnQpO1xuICAgICAgc2xvdEVuZC5zZXRNaW51dGVzKHNsb3RFbmQuZ2V0TWludXRlcygpICsgNjApO1xuXG4gICAgICBjb25zdCBkYXlOYW1lID0gZGF0ZS50b0xvY2FsZURhdGVTdHJpbmcoJ2VuLVVTJywgeyB3ZWVrZGF5OiAnbG9uZycgfSkudG9Mb3dlckNhc2UoKTtcbiAgICAgIGNvbnN0IGRheUhvdXJzID0gbW9ja0NvbW1vblNwYWNlLm9wZW5pbmdIb3Vycz8uZmluZChoID0+IGguZGF5LnRvTG93ZXJDYXNlKCkgPT09IGRheU5hbWUpO1xuXG4gICAgICBpZiAoIWRheUhvdXJzIHx8IGRheUhvdXJzLmlzT3BlbiA9PT0gZmFsc2UpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfVxuXG4gICAgICBjb25zdCBvcGVuVGltZSA9IG5ldyBEYXRlKGRhdGUpO1xuICAgICAgY29uc3QgW29wZW5Ib3VyLCBvcGVuTWludXRlXSA9IGRheUhvdXJzLm9wZW4uc3BsaXQoJzonKS5tYXAoTnVtYmVyKTtcbiAgICAgIG9wZW5UaW1lLnNldEhvdXJzKG9wZW5Ib3VyLCBvcGVuTWludXRlLCAwLCAwKTtcblxuICAgICAgY29uc3QgY2xvc2VUaW1lID0gbmV3IERhdGUoZGF0ZSk7XG4gICAgICBjb25zdCBbY2xvc2VIb3VyLCBjbG9zZU1pbnV0ZV0gPSBkYXlIb3Vycy5jbG9zZS5zcGxpdCgnOicpLm1hcChOdW1iZXIpO1xuICAgICAgY2xvc2VUaW1lLnNldEhvdXJzKGNsb3NlSG91ciwgY2xvc2VNaW51dGUsIDAsIDApO1xuXG4gICAgICBpZiAoc2xvdFN0YXJ0IDwgb3BlblRpbWUgfHwgc2xvdEVuZCA+IGNsb3NlVGltZSkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9XG5cbiAgICAgIGlmIChkYXlIb3Vycy5icmVha3MpIHtcbiAgICAgICAgZm9yIChjb25zdCBicmVha1BlcmlvZCBvZiBkYXlIb3Vycy5icmVha3MpIHtcbiAgICAgICAgICBjb25zdCBicmVha1N0YXJ0ID0gbmV3IERhdGUoZGF0ZSk7XG4gICAgICAgICAgY29uc3QgW2JyZWFrU3RhcnRIb3VyLCBicmVha1N0YXJ0TWludXRlXSA9IGJyZWFrUGVyaW9kLnN0YXJ0LnNwbGl0KCc6JykubWFwKE51bWJlcik7XG4gICAgICAgICAgYnJlYWtTdGFydC5zZXRIb3VycyhicmVha1N0YXJ0SG91ciwgYnJlYWtTdGFydE1pbnV0ZSwgMCwgMCk7XG5cbiAgICAgICAgICBjb25zdCBicmVha0VuZCA9IG5ldyBEYXRlKGRhdGUpO1xuICAgICAgICAgIGNvbnN0IFticmVha0VuZEhvdXIsIGJyZWFrRW5kTWludXRlXSA9IGJyZWFrUGVyaW9kLmVuZC5zcGxpdCgnOicpLm1hcChOdW1iZXIpO1xuICAgICAgICAgIGJyZWFrRW5kLnNldEhvdXJzKGJyZWFrRW5kSG91ciwgYnJlYWtFbmRNaW51dGUsIDAsIDApO1xuXG4gICAgICAgICAgaWYgKFxuICAgICAgICAgICAgKHNsb3RTdGFydCA+PSBicmVha1N0YXJ0ICYmIHNsb3RTdGFydCA8IGJyZWFrRW5kKSB8fFxuICAgICAgICAgICAgKHNsb3RFbmQgPiBicmVha1N0YXJ0ICYmIHNsb3RFbmQgPD0gYnJlYWtFbmQpIHx8XG4gICAgICAgICAgICAoc2xvdFN0YXJ0IDw9IGJyZWFrU3RhcnQgJiYgc2xvdEVuZCA+PSBicmVha0VuZClcbiAgICAgICAgICApIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfTtcblxuICAgIHRlc3QoJ3Nob3VsZCBoYW5kbGUgZWRnZSBjYXNlcyBjb3JyZWN0bHknLCAoKSA9PiB7XG4gICAgICAvLyBUZXN0IGV4YWN0bHkgYXQgb3BlbmluZy9jbG9zaW5nIHRpbWVzXG4gICAgICBjb25zdCB0aHVyc2RheSA9IG5ldyBEYXRlKCcyMDI1LTA2LTA1Jyk7IC8vIFRodXJzZGF5IDEwOjAwLTE4OjAwXG4gICAgICBcbiAgICAgIC8vIFRodXJzZGF5IDEwOjAwLTE4OjAwLCBsZXQncyB1c2UgYSBmdXR1cmUgVGh1cnNkYXkgdG8gYXZvaWQgZGF0ZSBpc3N1ZXNcbiAgICAgIGNvbnN0IGZ1dHVyZVRodXJzZGF5ID0gYWRkRGF5cyhuZXcgRGF0ZSgpLCAxNCk7XG4gICAgICB3aGlsZSAoZnV0dXJlVGh1cnNkYXkuZ2V0RGF5KCkgIT09IDQpIHsgLy8gNCA9IFRodXJzZGF5XG4gICAgICAgIGZ1dHVyZVRodXJzZGF5LnNldERhdGUoZnV0dXJlVGh1cnNkYXkuZ2V0RGF0ZSgpICsgMSk7XG4gICAgICB9XG4gICAgICBcbiAgICAgIGV4cGVjdChpc1RpbWVTbG90QXZhaWxhYmxlKGZ1dHVyZVRodXJzZGF5LCAnMTA6MDAnKSkudG9CZSh0cnVlKTsgLy8gT3BlbmluZyB0aW1lXG4gICAgICBleHBlY3QoaXNUaW1lU2xvdEF2YWlsYWJsZShmdXR1cmVUaHVyc2RheSwgJzE3OjAwJykpLnRvQmUodHJ1ZSk7IC8vIExhc3QgdmFsaWQgc2xvdFxuICAgICAgZXhwZWN0KGlzVGltZVNsb3RBdmFpbGFibGUoZnV0dXJlVGh1cnNkYXksICcxODowMCcpKS50b0JlKGZhbHNlKTsgLy8gV291bGQgZW5kIGFmdGVyIGNsb3NpbmdcbiAgICAgIFxuICAgICAgLy8gVGVzdCBicmVhayBib3VuZGFyaWVzIC0gdXNlIGZ1dHVyZSBNb25kYXlcbiAgICAgIGNvbnN0IGZ1dHVyZU1vbmRheSA9IGFkZERheXMobmV3IERhdGUoKSwgMTQpO1xuICAgICAgd2hpbGUgKGZ1dHVyZU1vbmRheS5nZXREYXkoKSAhPT0gMSkgeyAvLyAxID0gTW9uZGF5XG4gICAgICAgIGZ1dHVyZU1vbmRheS5zZXREYXRlKGZ1dHVyZU1vbmRheS5nZXREYXRlKCkgKyAxKTtcbiAgICAgIH1cbiAgICAgIFxuICAgICAgZXhwZWN0KGlzVGltZVNsb3RBdmFpbGFibGUoZnV0dXJlTW9uZGF5LCAnMTE6MDAnKSkudG9CZSh0cnVlKTsgLy8gQmVmb3JlIGJyZWFrXG4gICAgICBleHBlY3QoaXNUaW1lU2xvdEF2YWlsYWJsZShmdXR1cmVNb25kYXksICcxMTozMCcpKS50b0JlKGZhbHNlKTsgLy8gV291bGQgZXh0ZW5kIGludG8gYnJlYWtcbiAgICAgIGV4cGVjdChpc1RpbWVTbG90QXZhaWxhYmxlKGZ1dHVyZU1vbmRheSwgJzEzOjAwJykpLnRvQmUodHJ1ZSk7IC8vIEFmdGVyIGJyZWFrXG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdOZXcgQm9va2luZyBGb3JtIFVJIENvbXBvbmVudHMnLCAoKSA9PiB7XG4gICAgdGVzdCgnc2hvdWxkIGRpc3BsYXkgc2VsZWN0ZWQgZGF0ZSBpbmZvcm1hdGlvbiBwcm9taW5lbnRseScsICgpID0+IHtcbiAgICAgIGNvbnN0IGZvcm1hdERpc3BsYXlEYXRlID0gKGRhdGU6IERhdGUsIGxhbmd1YWdlOiBzdHJpbmcgPSAnZnInKSA9PiB7XG4gICAgICAgIGNvbnN0IG9wdGlvbnM6IEludGwuRGF0ZVRpbWVGb3JtYXRPcHRpb25zID0ge1xuICAgICAgICAgIHdlZWtkYXk6ICdsb25nJyxcbiAgICAgICAgICB5ZWFyOiAnbnVtZXJpYycsXG4gICAgICAgICAgbW9udGg6ICdsb25nJyxcbiAgICAgICAgICBkYXk6ICdudW1lcmljJ1xuICAgICAgICB9O1xuICAgICAgICBjb25zdCBsb2NhbGUgPSBsYW5ndWFnZSA9PT0gJ2ZyJyA/ICdmci1DQScgOiAnZW4tQ0EnO1xuICAgICAgICByZXR1cm4gZGF0ZS50b0xvY2FsZURhdGVTdHJpbmcobG9jYWxlLCBvcHRpb25zKTtcbiAgICAgIH07XG4gICAgICBcbiAgICAgIGNvbnN0IHRlc3REYXRlID0gbmV3IERhdGUoJzIwMjUtMDYtMDInKTtcbiAgICAgIGNvbnN0IGZyZW5jaERpc3BsYXkgPSBmb3JtYXREaXNwbGF5RGF0ZSh0ZXN0RGF0ZSwgJ2ZyJyk7XG4gICAgICBjb25zdCBlbmdsaXNoRGlzcGxheSA9IGZvcm1hdERpc3BsYXlEYXRlKHRlc3REYXRlLCAnZW4nKTtcbiAgICAgIFxuICAgICAgZXhwZWN0KGZyZW5jaERpc3BsYXkpLnRvQ29udGFpbignbHVuZGknKTtcbiAgICAgIGV4cGVjdChmcmVuY2hEaXNwbGF5KS50b0NvbnRhaW4oJ2p1aW4nKTtcbiAgICAgIGV4cGVjdChlbmdsaXNoRGlzcGxheSkudG9Db250YWluKCdNb25kYXknKTtcbiAgICAgIGV4cGVjdChlbmdsaXNoRGlzcGxheSkudG9Db250YWluKCdKdW5lJyk7XG4gICAgfSk7XG5cbiAgICB0ZXN0KCdzaG91bGQgc2hvdyBvcGVuaW5nIGhvdXJzIGZvciBzZWxlY3RlZCBkYXRlJywgKCkgPT4ge1xuICAgICAgY29uc3QgZ2V0T3BlbmluZ0hvdXJzRm9yRGF0ZSA9IChkYXRlOiBEYXRlLCBvcGVuaW5nSG91cnM6IGFueVtdKSA9PiB7XG4gICAgICAgIGNvbnN0IGRheU5hbWUgPSBkYXRlLnRvTG9jYWxlRGF0ZVN0cmluZygnZW4tVVMnLCB7IHdlZWtkYXk6ICdsb25nJyB9KS50b0xvd2VyQ2FzZSgpO1xuICAgICAgICByZXR1cm4gb3BlbmluZ0hvdXJzLmZpbmQoaCA9PiBoLmRheS50b0xvd2VyQ2FzZSgpID09PSBkYXlOYW1lKTtcbiAgICAgIH07XG4gICAgICBcbiAgICAgIGNvbnN0IG1vbmRheURhdGUgPSBuZXcgRGF0ZSgnMjAyNS0wNi0wMicpOyAvLyBNb25kYXlcbiAgICAgIGNvbnN0IHdlZG5lc2RheURhdGUgPSBuZXcgRGF0ZSgnMjAyNS0wNi0wNCcpOyAvLyBXZWRuZXNkYXkgKGNsb3NlZClcbiAgICAgIFxuICAgICAgY29uc3QgbW9uZGF5SG91cnMgPSBnZXRPcGVuaW5nSG91cnNGb3JEYXRlKG1vbmRheURhdGUsIG1vY2tDb21tb25TcGFjZS5vcGVuaW5nSG91cnMhKTtcbiAgICAgIGNvbnN0IHdlZG5lc2RheUhvdXJzID0gZ2V0T3BlbmluZ0hvdXJzRm9yRGF0ZSh3ZWRuZXNkYXlEYXRlLCBtb2NrQ29tbW9uU3BhY2Uub3BlbmluZ0hvdXJzISk7XG4gICAgICBcbiAgICAgIGV4cGVjdChtb25kYXlIb3Vycz8ub3BlbikudG9CZSgnMDg6MDAnKTtcbiAgICAgIGV4cGVjdChtb25kYXlIb3Vycz8uY2xvc2UpLnRvQmUoJzIwOjAwJyk7XG4gICAgICBleHBlY3QobW9uZGF5SG91cnM/LmlzT3BlbikudG9CZSh0cnVlKTtcbiAgICAgIFxuICAgICAgZXhwZWN0KHdlZG5lc2RheUhvdXJzPy5pc09wZW4pLnRvQmUoZmFsc2UpO1xuICAgIH0pO1xuXG4gICAgdGVzdCgnc2hvdWxkIHByb3ZpZGUgdmFsaWRhdGlvbiBtZXNzYWdlcyBmb3IgaW5jb21wbGV0ZSBmb3JtcycsICgpID0+IHtcbiAgICAgIGNvbnN0IGdldFZhbGlkYXRpb25NZXNzYWdlID0gKHN0YXJ0VGltZTogc3RyaW5nLCBlbmRUaW1lOiBzdHJpbmcsIGxhbmd1YWdlOiBzdHJpbmcgPSAnZnInKSA9PiB7XG4gICAgICAgIGlmICghc3RhcnRUaW1lKSB7XG4gICAgICAgICAgcmV0dXJuIGxhbmd1YWdlID09PSAnZnInIFxuICAgICAgICAgICAgPyAnVmV1aWxsZXogc8OpbGVjdGlvbm5lciB1bmUgaGV1cmUgZGUgZMOpYnV0J1xuICAgICAgICAgICAgOiAnUGxlYXNlIHNlbGVjdCBhIHN0YXJ0IHRpbWUnO1xuICAgICAgICB9XG4gICAgICAgIGlmIChzdGFydFRpbWUgJiYgIWVuZFRpbWUpIHtcbiAgICAgICAgICByZXR1cm4gbGFuZ3VhZ2UgPT09ICdmcicgXG4gICAgICAgICAgICA/ICdWZXVpbGxleiBzw6lsZWN0aW9ubmVyIHVuZSBoZXVyZSBkZSBmaW4nXG4gICAgICAgICAgICA6ICdQbGVhc2Ugc2VsZWN0IGFuIGVuZCB0aW1lJztcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgIH07XG4gICAgICBcbiAgICAgIGV4cGVjdChnZXRWYWxpZGF0aW9uTWVzc2FnZSgnJywgJycsICdmcicpKS50b0JlKCdWZXVpbGxleiBzw6lsZWN0aW9ubmVyIHVuZSBoZXVyZSBkZSBkw6lidXQnKTtcbiAgICAgIGV4cGVjdChnZXRWYWxpZGF0aW9uTWVzc2FnZSgnJywgJycsICdlbicpKS50b0JlKCdQbGVhc2Ugc2VsZWN0IGEgc3RhcnQgdGltZScpO1xuICAgICAgZXhwZWN0KGdldFZhbGlkYXRpb25NZXNzYWdlKCcwOTowMCcsICcnLCAnZnInKSkudG9CZSgnVmV1aWxsZXogc8OpbGVjdGlvbm5lciB1bmUgaGV1cmUgZGUgZmluJyk7XG4gICAgICBleHBlY3QoZ2V0VmFsaWRhdGlvbk1lc3NhZ2UoJzA5OjAwJywgJycsICdlbicpKS50b0JlKCdQbGVhc2Ugc2VsZWN0IGFuIGVuZCB0aW1lJyk7XG4gICAgICBleHBlY3QoZ2V0VmFsaWRhdGlvbk1lc3NhZ2UoJzA5OjAwJywgJzExOjAwJywgJ2ZyJykpLnRvQmUobnVsbCk7XG4gICAgfSk7XG5cbiAgICB0ZXN0KCdzaG91bGQgZGlzcGxheSBib29raW5nIHN1bW1hcnkgd2l0aCBkdXJhdGlvbiBjYWxjdWxhdGlvbicsICgpID0+IHtcbiAgICAgIGNvbnN0IGdlbmVyYXRlQm9va2luZ1N1bW1hcnkgPSAoc3RhcnRUaW1lOiBzdHJpbmcsIGVuZFRpbWU6IHN0cmluZywgbGFuZ3VhZ2U6IHN0cmluZyA9ICdmcicpID0+IHtcbiAgICAgICAgaWYgKCFzdGFydFRpbWUgfHwgIWVuZFRpbWUpIHJldHVybiBudWxsO1xuICAgICAgICBcbiAgICAgICAgY29uc3Qgc3RhcnQgPSBuZXcgRGF0ZShgMjAwMC0wMS0wMVQke3N0YXJ0VGltZX06MDBgKTtcbiAgICAgICAgY29uc3QgZW5kID0gbmV3IERhdGUoYDIwMDAtMDEtMDFUJHtlbmRUaW1lfTowMGApO1xuICAgICAgICBjb25zdCBkdXJhdGlvbk1zID0gZW5kLmdldFRpbWUoKSAtIHN0YXJ0LmdldFRpbWUoKTtcbiAgICAgICAgY29uc3QgaG91cnMgPSBNYXRoLmZsb29yKGR1cmF0aW9uTXMgLyAoMTAwMCAqIDYwICogNjApKTtcbiAgICAgICAgY29uc3QgbWludXRlcyA9IE1hdGguZmxvb3IoKGR1cmF0aW9uTXMgJSAoMTAwMCAqIDYwICogNjApKSAvICgxMDAwICogNjApKTtcbiAgICAgICAgXG4gICAgICAgIGNvbnN0IHN0YXJ0TGFiZWwgPSBsYW5ndWFnZSA9PT0gJ2ZyJyA/ICdEw6lidXQ6JyA6ICdTdGFydDonO1xuICAgICAgICBjb25zdCBlbmRMYWJlbCA9IGxhbmd1YWdlID09PSAnZnInID8gJ0ZpbjonIDogJ0VuZDonO1xuICAgICAgICBjb25zdCBkdXJhdGlvbkxhYmVsID0gbGFuZ3VhZ2UgPT09ICdmcicgPyAnRHVyw6llOicgOiAnRHVyYXRpb246JztcbiAgICAgICAgXG4gICAgICAgIGxldCBkdXJhdGlvblRleHQgPSBgJHtob3Vyc31oYDtcbiAgICAgICAgaWYgKG1pbnV0ZXMgPiAwKSB7XG4gICAgICAgICAgZHVyYXRpb25UZXh0ICs9IGAgJHttaW51dGVzfW1pbmA7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgc3RhcnRMYWJlbCxcbiAgICAgICAgICBlbmRMYWJlbCwgXG4gICAgICAgICAgZHVyYXRpb25MYWJlbCxcbiAgICAgICAgICBzdGFydFRpbWUsXG4gICAgICAgICAgZW5kVGltZSxcbiAgICAgICAgICBkdXJhdGlvblRleHRcbiAgICAgICAgfTtcbiAgICAgIH07XG4gICAgICBcbiAgICAgIGNvbnN0IHN1bW1hcnkgPSBnZW5lcmF0ZUJvb2tpbmdTdW1tYXJ5KCcwOTowMCcsICcxMTozMCcsICdmcicpO1xuICAgICAgZXhwZWN0KHN1bW1hcnk/LnN0YXJ0TGFiZWwpLnRvQmUoJ0TDqWJ1dDonKTtcbiAgICAgIGV4cGVjdChzdW1tYXJ5Py5lbmRMYWJlbCkudG9CZSgnRmluOicpO1xuICAgICAgZXhwZWN0KHN1bW1hcnk/LmR1cmF0aW9uTGFiZWwpLnRvQmUoJ0R1csOpZTonKTtcbiAgICAgIGV4cGVjdChzdW1tYXJ5Py5kdXJhdGlvblRleHQpLnRvQmUoJzJoIDMwbWluJyk7XG4gICAgICBcbiAgICAgIGNvbnN0IGVuZ2xpc2hTdW1tYXJ5ID0gZ2VuZXJhdGVCb29raW5nU3VtbWFyeSgnMTQ6MDAnLCAnMTY6MDAnLCAnZW4nKTtcbiAgICAgIGV4cGVjdChlbmdsaXNoU3VtbWFyeT8uc3RhcnRMYWJlbCkudG9CZSgnU3RhcnQ6Jyk7XG4gICAgICBleHBlY3QoZW5nbGlzaFN1bW1hcnk/LmR1cmF0aW9uVGV4dCkudG9CZSgnMmgnKTtcbiAgICB9KTtcbiAgfSk7XG59KTsiXSwidmVyc2lvbiI6M30=