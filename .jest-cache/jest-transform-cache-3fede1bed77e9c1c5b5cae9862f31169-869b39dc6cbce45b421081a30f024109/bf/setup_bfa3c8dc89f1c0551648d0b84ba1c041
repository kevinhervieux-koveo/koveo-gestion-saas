e3299d643dd60793f677d878f33728c9
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const globals_1 = require("@jest/globals");
// Import jest-dom matchers for React Testing Library
require("@testing-library/jest-dom");
// React 19 compatibility - configure React testing environment
const react_1 = require("@testing-library/react");
(0, react_1.configure)({
    // React 19 uses concurrent rendering by default
    // Adjust testing library to work better with React 19's concurrent features
    asyncUtilTimeout: 10000,
    // Make testing more stable
    testIdAttribute: 'data-testid',
});
// MSW Server setup - try different import methods for better compatibility
let server;
try {
    // Try different import methods for MSW server
    try {
        const mswModule = require('./mocks/server');
        server = mswModule.server;
    }
    catch (requireError) {
        // MSW server not available - tests will run without API mocking
        console.warn('MSW server setup skipped, tests will run without API mocking');
    }
}
catch (_error) {
    console.warn('MSW server setup failed, tests will run without API mocking');
}
(0, globals_1.beforeAll)(() => {
    server?.listen();
});
(0, globals_1.afterEach)(() => {
    server?.resetHandlers();
});
(0, globals_1.afterAll)(() => {
    server?.close();
});
// Mock window.matchMedia
Object.defineProperty(window, 'matchMedia', {
    writable: true,
    value: globals_1.jest.fn().mockImplementation((query) => ({
        matches: false,
        media: query,
        onchange: null,
        addListener: globals_1.jest.fn(), // deprecated
        removeListener: globals_1.jest.fn(), // deprecated
        addEventListener: globals_1.jest.fn(),
        removeEventListener: globals_1.jest.fn(),
        dispatchEvent: globals_1.jest.fn(),
    })),
});
// Mock ResizeObserver
global.ResizeObserver = globals_1.jest.fn().mockImplementation(() => ({
    observe: globals_1.jest.fn(),
    unobserve: globals_1.jest.fn(),
    disconnect: globals_1.jest.fn(),
}));
// Mock IntersectionObserver
global.IntersectionObserver = globals_1.jest.fn().mockImplementation(() => ({
    observe: globals_1.jest.fn(),
    unobserve: globals_1.jest.fn(),
    disconnect: globals_1.jest.fn(),
    root: null,
    rootMargin: '',
    thresholds: [],
}));
// Global test configuration for DOM APIs
Object.defineProperty(global, 'performance', {
    value: {
        now: () => Date.now(),
        mark: () => { },
        measure: () => { },
        getEntriesByName: () => [],
        getEntriesByType: () => [],
    },
    writable: true,
});
// Mock DOM APIs that may be missing in test environment
Object.defineProperty(global, 'File', {
    value: class MockFile {
        constructor(chunks, filename, options) {
            this.name = filename;
            this.size = 0;
            this.type = options?.type || '';
        }
    },
    writable: true,
});
Object.defineProperty(global, 'FormData', {
    value: class MockFormData {
        constructor() {
            this.data = new Map();
        }
        append(name, _value) {
            this.data.set(name, _value);
        }
        get(name) {
            return this.data.get(name);
        }
    },
    writable: true,
});
// Mock Node and Element for DOM testing
Object.defineProperty(global, 'Node', {
    value: {
        ELEMENT_NODE: 1,
        TEXT_NODE: 3,
        COMMENT_NODE: 8,
    },
    writable: true,
});
Object.defineProperty(global, 'Element', {
    value: class MockElement {
        constructor() {
            this.tagName = '';
            this.nodeType = 1;
        }
    },
    writable: true,
});
// Global error handling for tests
global.error = globals_1.jest.fn();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiL2hvbWUvcnVubmVyL3dvcmtzcGFjZS90ZXN0cy9zZXR1cC50cyIsIm1hcHBpbmdzIjoiOztBQUVBLDJDQUE2RTtBQUY3RSxxREFBcUQ7QUFDckQscUNBQW1DO0FBR25DLCtEQUErRDtBQUMvRCxrREFBbUQ7QUFFbkQsSUFBQSxpQkFBUyxFQUFDO0lBQ1IsZ0RBQWdEO0lBQ2hELDRFQUE0RTtJQUM1RSxnQkFBZ0IsRUFBRSxLQUFLO0lBQ3ZCLDJCQUEyQjtJQUMzQixlQUFlLEVBQUUsYUFBYTtDQUMvQixDQUFDLENBQUM7QUFFSCwyRUFBMkU7QUFDM0UsSUFBSSxNQUFXLENBQUM7QUFFaEIsSUFBSSxDQUFDO0lBQ0gsOENBQThDO0lBQzlDLElBQUksQ0FBQztRQUNILE1BQU0sU0FBUyxHQUFHLE9BQU8sQ0FBQyxnQkFBZ0IsQ0FBQyxDQUFDO1FBQzVDLE1BQU0sR0FBRyxTQUFTLENBQUMsTUFBTSxDQUFDO0lBQzVCLENBQUM7SUFBQyxPQUFPLFlBQVksRUFBRSxDQUFDO1FBQ3RCLGdFQUFnRTtRQUNoRSxPQUFPLENBQUMsSUFBSSxDQUFDLDhEQUE4RCxDQUFDLENBQUM7SUFDL0UsQ0FBQztBQUNILENBQUM7QUFBQyxPQUFPLE1BQU0sRUFBRSxDQUFDO0lBQ2hCLE9BQU8sQ0FBQyxJQUFJLENBQUMsNkRBQTZELENBQUMsQ0FBQztBQUM5RSxDQUFDO0FBRUQsSUFBQSxtQkFBUyxFQUFDLEdBQUcsRUFBRTtJQUNiLE1BQU0sRUFBRSxNQUFNLEVBQUUsQ0FBQztBQUNuQixDQUFDLENBQUMsQ0FBQztBQUVILElBQUEsbUJBQVMsRUFBQyxHQUFHLEVBQUU7SUFDYixNQUFNLEVBQUUsYUFBYSxFQUFFLENBQUM7QUFDMUIsQ0FBQyxDQUFDLENBQUM7QUFFSCxJQUFBLGtCQUFRLEVBQUMsR0FBRyxFQUFFO0lBQ1osTUFBTSxFQUFFLEtBQUssRUFBRSxDQUFDO0FBQ2xCLENBQUMsQ0FBQyxDQUFDO0FBRUgseUJBQXlCO0FBQ3pCLE1BQU0sQ0FBQyxjQUFjLENBQUMsTUFBTSxFQUFFLFlBQVksRUFBRTtJQUMxQyxRQUFRLEVBQUUsSUFBSTtJQUNkLEtBQUssRUFBRSxjQUFJLENBQUMsRUFBRSxFQUFFLENBQUMsa0JBQWtCLENBQUMsQ0FBQyxLQUFLLEVBQUUsRUFBRSxDQUFDLENBQUM7UUFDOUMsT0FBTyxFQUFFLEtBQUs7UUFDZCxLQUFLLEVBQUUsS0FBSztRQUNaLFFBQVEsRUFBRSxJQUFJO1FBQ2QsV0FBVyxFQUFFLGNBQUksQ0FBQyxFQUFFLEVBQUUsRUFBRSxhQUFhO1FBQ3JDLGNBQWMsRUFBRSxjQUFJLENBQUMsRUFBRSxFQUFFLEVBQUUsYUFBYTtRQUN4QyxnQkFBZ0IsRUFBRSxjQUFJLENBQUMsRUFBRSxFQUFFO1FBQzNCLG1CQUFtQixFQUFFLGNBQUksQ0FBQyxFQUFFLEVBQUU7UUFDOUIsYUFBYSxFQUFFLGNBQUksQ0FBQyxFQUFFLEVBQUU7S0FDekIsQ0FBQyxDQUFDO0NBQ0osQ0FBQyxDQUFDO0FBRUgsc0JBQXNCO0FBQ3RCLE1BQU0sQ0FBQyxjQUFjLEdBQUcsY0FBSSxDQUFDLEVBQUUsRUFBRSxDQUFDLGtCQUFrQixDQUFDLEdBQUcsRUFBRSxDQUFDLENBQUM7SUFDMUQsT0FBTyxFQUFFLGNBQUksQ0FBQyxFQUFFLEVBQUU7SUFDbEIsU0FBUyxFQUFFLGNBQUksQ0FBQyxFQUFFLEVBQUU7SUFDcEIsVUFBVSxFQUFFLGNBQUksQ0FBQyxFQUFFLEVBQUU7Q0FDdEIsQ0FBQyxDQUFRLENBQUM7QUFFWCw0QkFBNEI7QUFDNUIsTUFBTSxDQUFDLG9CQUFvQixHQUFHLGNBQUksQ0FBQyxFQUFFLEVBQUUsQ0FBQyxrQkFBa0IsQ0FBQyxHQUFHLEVBQUUsQ0FBQyxDQUFDO0lBQ2hFLE9BQU8sRUFBRSxjQUFJLENBQUMsRUFBRSxFQUFFO0lBQ2xCLFNBQVMsRUFBRSxjQUFJLENBQUMsRUFBRSxFQUFFO0lBQ3BCLFVBQVUsRUFBRSxjQUFJLENBQUMsRUFBRSxFQUFFO0lBQ3JCLElBQUksRUFBRSxJQUFJO0lBQ1YsVUFBVSxFQUFFLEVBQUU7SUFDZCxVQUFVLEVBQUUsRUFBRTtDQUNmLENBQUMsQ0FBUSxDQUFDO0FBRVgseUNBQXlDO0FBQ3pDLE1BQU0sQ0FBQyxjQUFjLENBQUMsTUFBTSxFQUFFLGFBQWEsRUFBRTtJQUMzQyxLQUFLLEVBQUU7UUFDTCxHQUFHLEVBQUUsR0FBRyxFQUFFLENBQUMsSUFBSSxDQUFDLEdBQUcsRUFBRTtRQUNyQixJQUFJLEVBQUUsR0FBRyxFQUFFLEdBQUUsQ0FBQztRQUNkLE9BQU8sRUFBRSxHQUFHLEVBQUUsR0FBRSxDQUFDO1FBQ2pCLGdCQUFnQixFQUFFLEdBQUcsRUFBRSxDQUFDLEVBQUU7UUFDMUIsZ0JBQWdCLEVBQUUsR0FBRyxFQUFFLENBQUMsRUFBRTtLQUMzQjtJQUNELFFBQVEsRUFBRSxJQUFJO0NBQ2YsQ0FBQyxDQUFDO0FBRUgsd0RBQXdEO0FBQ3hELE1BQU0sQ0FBQyxjQUFjLENBQUMsTUFBTSxFQUFFLE1BQU0sRUFBRTtJQUNwQyxLQUFLLEVBQUUsTUFBTSxRQUFRO1FBSW5CLFlBQVksTUFBa0IsRUFBRSxRQUFnQixFQUFFLE9BQXlCO1lBQ3pFLElBQUksQ0FBQyxJQUFJLEdBQUcsUUFBUSxDQUFDO1lBQ3JCLElBQUksQ0FBQyxJQUFJLEdBQUcsQ0FBQyxDQUFDO1lBQ2QsSUFBSSxDQUFDLElBQUksR0FBRyxPQUFPLEVBQUUsSUFBSSxJQUFJLEVBQUUsQ0FBQztRQUNsQyxDQUFDO0tBQ0Y7SUFDRCxRQUFRLEVBQUUsSUFBSTtDQUNmLENBQUMsQ0FBQztBQUVILE1BQU0sQ0FBQyxjQUFjLENBQUMsTUFBTSxFQUFFLFVBQVUsRUFBRTtJQUN4QyxLQUFLLEVBQUUsTUFBTSxZQUFZO1FBQWxCO1lBQ0csU0FBSSxHQUFHLElBQUksR0FBRyxFQUFtQixDQUFDO1FBTzVDLENBQUM7UUFOQyxNQUFNLENBQUMsSUFBWSxFQUFFLE1BQWU7WUFDbEMsSUFBSSxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsSUFBSSxFQUFFLE1BQU0sQ0FBQyxDQUFDO1FBQzlCLENBQUM7UUFDRCxHQUFHLENBQUMsSUFBWTtZQUNkLE9BQU8sSUFBSSxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsSUFBSSxDQUFDLENBQUM7UUFDN0IsQ0FBQztLQUNGO0lBQ0QsUUFBUSxFQUFFLElBQUk7Q0FDZixDQUFDLENBQUM7QUFFSCx3Q0FBd0M7QUFDeEMsTUFBTSxDQUFDLGNBQWMsQ0FBQyxNQUFNLEVBQUUsTUFBTSxFQUFFO0lBQ3BDLEtBQUssRUFBRTtRQUNMLFlBQVksRUFBRSxDQUFDO1FBQ2YsU0FBUyxFQUFFLENBQUM7UUFDWixZQUFZLEVBQUUsQ0FBQztLQUNoQjtJQUNELFFBQVEsRUFBRSxJQUFJO0NBQ2YsQ0FBQyxDQUFDO0FBRUgsTUFBTSxDQUFDLGNBQWMsQ0FBQyxNQUFNLEVBQUUsU0FBUyxFQUFFO0lBQ3ZDLEtBQUssRUFBRSxNQUFNLFdBQVc7UUFBakI7WUFDTCxZQUFPLEdBQVcsRUFBRSxDQUFDO1lBQ3JCLGFBQVEsR0FBVyxDQUFDLENBQUM7UUFDdkIsQ0FBQztLQUFBO0lBQ0QsUUFBUSxFQUFFLElBQUk7Q0FDZixDQUFDLENBQUM7QUFFSCxrQ0FBa0M7QUFDbEMsTUFBTSxDQUFDLEtBQUssR0FBRyxjQUFJLENBQUMsRUFBRSxFQUFFLENBQUMiLCJuYW1lcyI6W10sInNvdXJjZXMiOlsiL2hvbWUvcnVubmVyL3dvcmtzcGFjZS90ZXN0cy9zZXR1cC50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBJbXBvcnQgamVzdC1kb20gbWF0Y2hlcnMgZm9yIFJlYWN0IFRlc3RpbmcgTGlicmFyeVxuaW1wb3J0ICdAdGVzdGluZy1saWJyYXJ5L2plc3QtZG9tJztcbmltcG9ydCB7IGplc3QsIGJlZm9yZUFsbCwgYWZ0ZXJFYWNoLCBhZnRlckFsbCwgZXhwZWN0IH0gZnJvbSAnQGplc3QvZ2xvYmFscyc7XG5cbi8vIFJlYWN0IDE5IGNvbXBhdGliaWxpdHkgLSBjb25maWd1cmUgUmVhY3QgdGVzdGluZyBlbnZpcm9ubWVudFxuaW1wb3J0IHsgY29uZmlndXJlIH0gZnJvbSAnQHRlc3RpbmctbGlicmFyeS9yZWFjdCc7XG5cbmNvbmZpZ3VyZSh7XG4gIC8vIFJlYWN0IDE5IHVzZXMgY29uY3VycmVudCByZW5kZXJpbmcgYnkgZGVmYXVsdFxuICAvLyBBZGp1c3QgdGVzdGluZyBsaWJyYXJ5IHRvIHdvcmsgYmV0dGVyIHdpdGggUmVhY3QgMTkncyBjb25jdXJyZW50IGZlYXR1cmVzXG4gIGFzeW5jVXRpbFRpbWVvdXQ6IDEwMDAwLFxuICAvLyBNYWtlIHRlc3RpbmcgbW9yZSBzdGFibGVcbiAgdGVzdElkQXR0cmlidXRlOiAnZGF0YS10ZXN0aWQnLFxufSk7XG5cbi8vIE1TVyBTZXJ2ZXIgc2V0dXAgLSB0cnkgZGlmZmVyZW50IGltcG9ydCBtZXRob2RzIGZvciBiZXR0ZXIgY29tcGF0aWJpbGl0eVxubGV0IHNlcnZlcjogYW55O1xuXG50cnkge1xuICAvLyBUcnkgZGlmZmVyZW50IGltcG9ydCBtZXRob2RzIGZvciBNU1cgc2VydmVyXG4gIHRyeSB7XG4gICAgY29uc3QgbXN3TW9kdWxlID0gcmVxdWlyZSgnLi9tb2Nrcy9zZXJ2ZXInKTtcbiAgICBzZXJ2ZXIgPSBtc3dNb2R1bGUuc2VydmVyO1xuICB9IGNhdGNoIChyZXF1aXJlRXJyb3IpIHtcbiAgICAvLyBNU1cgc2VydmVyIG5vdCBhdmFpbGFibGUgLSB0ZXN0cyB3aWxsIHJ1biB3aXRob3V0IEFQSSBtb2NraW5nXG4gICAgY29uc29sZS53YXJuKCdNU1cgc2VydmVyIHNldHVwIHNraXBwZWQsIHRlc3RzIHdpbGwgcnVuIHdpdGhvdXQgQVBJIG1vY2tpbmcnKTtcbiAgfVxufSBjYXRjaCAoX2Vycm9yKSB7XG4gIGNvbnNvbGUud2FybignTVNXIHNlcnZlciBzZXR1cCBmYWlsZWQsIHRlc3RzIHdpbGwgcnVuIHdpdGhvdXQgQVBJIG1vY2tpbmcnKTtcbn1cblxuYmVmb3JlQWxsKCgpID0+IHtcbiAgc2VydmVyPy5saXN0ZW4oKTtcbn0pO1xuXG5hZnRlckVhY2goKCkgPT4ge1xuICBzZXJ2ZXI/LnJlc2V0SGFuZGxlcnMoKTtcbn0pO1xuXG5hZnRlckFsbCgoKSA9PiB7XG4gIHNlcnZlcj8uY2xvc2UoKTtcbn0pO1xuXG4vLyBNb2NrIHdpbmRvdy5tYXRjaE1lZGlhXG5PYmplY3QuZGVmaW5lUHJvcGVydHkod2luZG93LCAnbWF0Y2hNZWRpYScsIHtcbiAgd3JpdGFibGU6IHRydWUsXG4gIHZhbHVlOiBqZXN0LmZuKCkubW9ja0ltcGxlbWVudGF0aW9uKChxdWVyeSkgPT4gKHtcbiAgICBtYXRjaGVzOiBmYWxzZSxcbiAgICBtZWRpYTogcXVlcnksXG4gICAgb25jaGFuZ2U6IG51bGwsXG4gICAgYWRkTGlzdGVuZXI6IGplc3QuZm4oKSwgLy8gZGVwcmVjYXRlZFxuICAgIHJlbW92ZUxpc3RlbmVyOiBqZXN0LmZuKCksIC8vIGRlcHJlY2F0ZWRcbiAgICBhZGRFdmVudExpc3RlbmVyOiBqZXN0LmZuKCksXG4gICAgcmVtb3ZlRXZlbnRMaXN0ZW5lcjogamVzdC5mbigpLFxuICAgIGRpc3BhdGNoRXZlbnQ6IGplc3QuZm4oKSxcbiAgfSkpLFxufSk7XG5cbi8vIE1vY2sgUmVzaXplT2JzZXJ2ZXJcbmdsb2JhbC5SZXNpemVPYnNlcnZlciA9IGplc3QuZm4oKS5tb2NrSW1wbGVtZW50YXRpb24oKCkgPT4gKHtcbiAgb2JzZXJ2ZTogamVzdC5mbigpLFxuICB1bm9ic2VydmU6IGplc3QuZm4oKSxcbiAgZGlzY29ubmVjdDogamVzdC5mbigpLFxufSkpIGFzIGFueTtcblxuLy8gTW9jayBJbnRlcnNlY3Rpb25PYnNlcnZlclxuZ2xvYmFsLkludGVyc2VjdGlvbk9ic2VydmVyID0gamVzdC5mbigpLm1vY2tJbXBsZW1lbnRhdGlvbigoKSA9PiAoe1xuICBvYnNlcnZlOiBqZXN0LmZuKCksXG4gIHVub2JzZXJ2ZTogamVzdC5mbigpLFxuICBkaXNjb25uZWN0OiBqZXN0LmZuKCksXG4gIHJvb3Q6IG51bGwsXG4gIHJvb3RNYXJnaW46ICcnLFxuICB0aHJlc2hvbGRzOiBbXSxcbn0pKSBhcyBhbnk7XG5cbi8vIEdsb2JhbCB0ZXN0IGNvbmZpZ3VyYXRpb24gZm9yIERPTSBBUElzXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZ2xvYmFsLCAncGVyZm9ybWFuY2UnLCB7XG4gIHZhbHVlOiB7XG4gICAgbm93OiAoKSA9PiBEYXRlLm5vdygpLFxuICAgIG1hcms6ICgpID0+IHt9LFxuICAgIG1lYXN1cmU6ICgpID0+IHt9LFxuICAgIGdldEVudHJpZXNCeU5hbWU6ICgpID0+IFtdLFxuICAgIGdldEVudHJpZXNCeVR5cGU6ICgpID0+IFtdLFxuICB9LFxuICB3cml0YWJsZTogdHJ1ZSxcbn0pO1xuXG4vLyBNb2NrIERPTSBBUElzIHRoYXQgbWF5IGJlIG1pc3NpbmcgaW4gdGVzdCBlbnZpcm9ubWVudFxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGdsb2JhbCwgJ0ZpbGUnLCB7XG4gIHZhbHVlOiBjbGFzcyBNb2NrRmlsZSB7XG4gICAgbmFtZTogc3RyaW5nO1xuICAgIHNpemU6IG51bWJlcjtcbiAgICB0eXBlOiBzdHJpbmc7XG4gICAgY29uc3RydWN0b3IoY2h1bmtzOiBCbG9iUGFydFtdLCBmaWxlbmFtZTogc3RyaW5nLCBvcHRpb25zPzogRmlsZVByb3BlcnR5QmFnKSB7XG4gICAgICB0aGlzLm5hbWUgPSBmaWxlbmFtZTtcbiAgICAgIHRoaXMuc2l6ZSA9IDA7XG4gICAgICB0aGlzLnR5cGUgPSBvcHRpb25zPy50eXBlIHx8ICcnO1xuICAgIH1cbiAgfSxcbiAgd3JpdGFibGU6IHRydWUsXG59KTtcblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGdsb2JhbCwgJ0Zvcm1EYXRhJywge1xuICB2YWx1ZTogY2xhc3MgTW9ja0Zvcm1EYXRhIHtcbiAgICBwcml2YXRlIGRhdGEgPSBuZXcgTWFwPHN0cmluZywgdW5rbm93bj4oKTtcbiAgICBhcHBlbmQobmFtZTogc3RyaW5nLCBfdmFsdWU6IHVua25vd24pIHtcbiAgICAgIHRoaXMuZGF0YS5zZXQobmFtZSwgX3ZhbHVlKTtcbiAgICB9XG4gICAgZ2V0KG5hbWU6IHN0cmluZykge1xuICAgICAgcmV0dXJuIHRoaXMuZGF0YS5nZXQobmFtZSk7XG4gICAgfVxuICB9LFxuICB3cml0YWJsZTogdHJ1ZSxcbn0pO1xuXG4vLyBNb2NrIE5vZGUgYW5kIEVsZW1lbnQgZm9yIERPTSB0ZXN0aW5nXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZ2xvYmFsLCAnTm9kZScsIHtcbiAgdmFsdWU6IHtcbiAgICBFTEVNRU5UX05PREU6IDEsXG4gICAgVEVYVF9OT0RFOiAzLFxuICAgIENPTU1FTlRfTk9ERTogOCxcbiAgfSxcbiAgd3JpdGFibGU6IHRydWUsXG59KTtcblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGdsb2JhbCwgJ0VsZW1lbnQnLCB7XG4gIHZhbHVlOiBjbGFzcyBNb2NrRWxlbWVudCB7XG4gICAgdGFnTmFtZTogc3RyaW5nID0gJyc7XG4gICAgbm9kZVR5cGU6IG51bWJlciA9IDE7XG4gIH0sXG4gIHdyaXRhYmxlOiB0cnVlLFxufSk7XG5cbi8vIEdsb2JhbCBlcnJvciBoYW5kbGluZyBmb3IgdGVzdHNcbmdsb2JhbC5lcnJvciA9IGplc3QuZm4oKTtcbiJdLCJ2ZXJzaW9uIjozfQ==