6288b4bbdff4d68bdbab8c002e9e380e
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.PillarFramework = PillarFramework;
const jsx_runtime_1 = require("react/jsx-runtime");
const card_1 = require("@/components/ui/card");
const badge_1 = require("@/components/ui/badge");
const progress_1 = require("@/components/ui/progress");
const lucide_react_1 = require("lucide-react");
const use_language_1 = require("@/hooks/use-language");
const react_query_1 = require("@tanstack/react-query");
/**
 * Enhanced Pillar framework component that displays all five core development pillars
 * of the Koveo Gestion methodology with real-time status, metrics, and improvement suggestions.
 * @returns JSX element displaying the comprehensive pillar framework interface.
 */
function PillarFramework() {
    const { t } = (0, use_language_1.useLanguage)();
    // Fetch real-time pillar data and improvement suggestions
    const { data: suggestions, isLoading: suggestionsLoading } = (0, react_query_1.useQuery)({
        queryKey: ['/api/pillars/suggestions'],
        refetchInterval: 30000, // Refresh every 30 seconds for continuous monitoring
    });
    const { data: qualityMetrics } = (0, react_query_1.useQuery)({
        queryKey: ['/api/quality-metrics'],
        refetchInterval: 60000, // Refresh every minute
    });
    // Calculate completion percentages and health scores
    const calculatePillarHealth = (pillarName) => {
        if (!suggestions)
            return { health: 85, suggestions: 0, completedToday: 0 };
        const pillarSuggestions = Array.isArray(suggestions)
            ? suggestions.filter((s) => s.category?.toLowerCase().includes(pillarName.toLowerCase()))
            : [];
        const completedSuggestions = pillarSuggestions.filter((s) => s.status === 'Done');
        return {
            health: pillarSuggestions.length > 0
                ? Math.round((completedSuggestions.length / pillarSuggestions.length) * 100)
                : 85,
            suggestions: pillarSuggestions.length,
            completedToday: completedSuggestions.filter((s) => {
                const completedDate = new Date(s.completedAt || s.updatedAt);
                const today = new Date();
                return completedDate.toDateString() === today.toDateString();
            }).length,
        };
    };
    // Enhanced pillar configuration with all 5 pillars and real-time data
    const pillars = [
        {
            id: 1,
            title: t('validationQAPillar') || 'Validation & QA',
            description: t('coreQualityAssurance') || 'Core quality assurance and validation framework',
            status: 'in-progress',
            statusText: t('inProgress') || 'In Progress',
            icon: lucide_react_1.CheckCircle2,
            bgColor: 'bg-blue-50 dark:bg-blue-950',
            borderColor: 'border-blue-200 dark:border-blue-800',
            iconColor: 'text-blue-600 dark:text-blue-400',
            statusColor: 'text-orange-600 dark:text-orange-400',
            ...calculatePillarHealth('Quality'),
        },
        {
            id: 2,
            title: t('testingPillar') || 'Testing Framework',
            description: t('automatedTestingFramework') || 'Automated testing and validation system',
            status: 'in-progress',
            statusText: t('inProgress') || 'In Progress',
            icon: lucide_react_1.TestTube,
            bgColor: 'bg-green-50 dark:bg-green-950',
            borderColor: 'border-green-200 dark:border-green-800',
            iconColor: 'text-green-600 dark:text-green-400',
            statusColor: 'text-orange-600 dark:text-orange-400',
            ...calculatePillarHealth('Testing'),
        },
        {
            id: 3,
            title: t('securityPillar') || 'Security & Compliance',
            description: t('law25ComplianceFramework') || 'Quebec Law 25 compliance and security framework',
            status: 'in-progress',
            statusText: t('inProgress') || 'In Progress',
            icon: lucide_react_1.Shield,
            bgColor: 'bg-purple-50 dark:bg-purple-950',
            borderColor: 'border-purple-200 dark:border-purple-800',
            iconColor: 'text-purple-600 dark:text-purple-400',
            statusColor: 'text-orange-600 dark:text-orange-400',
            ...calculatePillarHealth('Security'),
        },
        {
            id: 4,
            title: t('continuousImprovementPillar') || 'Continuous Improvement',
            description: t('continuousImprovementDescription') ||
                'AI-driven metrics, analytics, and automated improvement suggestions',
            status: 'active',
            statusText: t('activePillar') || 'Active',
            icon: lucide_react_1.TrendingUp,
            bgColor: 'bg-indigo-50 dark:bg-indigo-950',
            borderColor: 'border-indigo-200 dark:border-indigo-800',
            iconColor: 'text-indigo-600 dark:text-indigo-400',
            statusColor: 'text-green-600 dark:text-green-400',
            ...calculatePillarHealth('Continuous Improvement'),
        },
        {
            id: 5,
            title: t('documentationPillar') || 'Documentation & Knowledge',
            description: t('documentationDescription') ||
                'Comprehensive documentation and knowledge management system',
            status: 'in-progress',
            statusText: t('inProgress') || 'In Progress',
            icon: lucide_react_1.FileText,
            bgColor: 'bg-amber-50 dark:bg-amber-950',
            borderColor: 'border-amber-200 dark:border-amber-800',
            iconColor: 'text-amber-600 dark:text-amber-400',
            statusColor: 'text-orange-600 dark:text-orange-400',
            ...calculatePillarHealth('Documentation'),
        },
    ];
    const overallHealth = Math.round(pillars.reduce((acc, pillar) => acc + pillar.health, 0) / pillars.length);
    const totalSuggestions = pillars.reduce((acc, pillar) => acc + pillar.suggestions, 0);
    const completedToday = pillars.reduce((acc, pillar) => acc + pillar.completedToday, 0);
    if (suggestionsLoading) {
        return ((0, jsx_runtime_1.jsxs)(card_1.Card, { children: [(0, jsx_runtime_1.jsx)(card_1.CardHeader, { children: (0, jsx_runtime_1.jsxs)(card_1.CardTitle, { className: 'flex items-center gap-2', children: [(0, jsx_runtime_1.jsx)(lucide_react_1.Columns, { className: 'text-koveo-navy', size: 20 }), t('pillarMethodology') || 'Pillar Methodology'] }) }), (0, jsx_runtime_1.jsx)(card_1.CardContent, { children: (0, jsx_runtime_1.jsx)("div", { className: 'animate-pulse space-y-4', children: [1, 2, 3, 4, 5].map((i) => ((0, jsx_runtime_1.jsx)("div", { className: 'h-16 bg-gray-200 dark:bg-gray-700 rounded-lg' }, i))) }) })] }));
    }
    return ((0, jsx_runtime_1.jsx)("div", { className: 'space-y-6', children: (0, jsx_runtime_1.jsxs)(card_1.Card, { children: [(0, jsx_runtime_1.jsx)(card_1.CardHeader, { children: (0, jsx_runtime_1.jsxs)(card_1.CardTitle, { className: 'flex items-center justify-between', children: [(0, jsx_runtime_1.jsxs)("div", { className: 'flex items-center gap-2', children: [(0, jsx_runtime_1.jsx)(lucide_react_1.Columns, { className: 'text-koveo-navy', size: 20 }), t('pillarMethodology') || 'Pillar Methodology Framework'] }), (0, jsx_runtime_1.jsxs)(badge_1.Badge, { variant: overallHealth >= 80 ? 'default' : overallHealth >= 60 ? 'secondary' : 'destructive', children: [overallHealth, "% Health"] })] }) }), (0, jsx_runtime_1.jsxs)(card_1.CardContent, { children: [(0, jsx_runtime_1.jsxs)("div", { className: 'grid grid-cols-1 md:grid-cols-3 gap-4 mb-6', children: [(0, jsx_runtime_1.jsxs)("div", { className: 'bg-blue-50 dark:bg-blue-950 p-4 rounded-lg', children: [(0, jsx_runtime_1.jsxs)("div", { className: 'flex items-center gap-2 mb-2', children: [(0, jsx_runtime_1.jsx)(lucide_react_1.TrendingUp, { className: 'text-blue-600 dark:text-blue-400', size: 16 }), (0, jsx_runtime_1.jsx)("span", { className: 'text-sm font-medium text-blue-900 dark:text-blue-100', children: "System Health" })] }), (0, jsx_runtime_1.jsxs)("div", { className: 'text-2xl font-bold text-blue-600 dark:text-blue-400', children: [overallHealth, "%"] }), (0, jsx_runtime_1.jsx)(progress_1.Progress, { value: overallHealth, className: 'mt-2' })] }), (0, jsx_runtime_1.jsxs)("div", { className: 'bg-green-50 dark:bg-green-950 p-4 rounded-lg', children: [(0, jsx_runtime_1.jsxs)("div", { className: 'flex items-center gap-2 mb-2', children: [(0, jsx_runtime_1.jsx)(lucide_react_1.CheckCircle2, { className: 'text-green-600 dark:text-green-400', size: 16 }), (0, jsx_runtime_1.jsx)("span", { className: 'text-sm font-medium text-green-900 dark:text-green-100', children: "Completed Today" })] }), (0, jsx_runtime_1.jsx)("div", { className: 'text-2xl font-bold text-green-600 dark:text-green-400', children: completedToday })] }), (0, jsx_runtime_1.jsxs)("div", { className: 'bg-purple-50 dark:bg-purple-950 p-4 rounded-lg', children: [(0, jsx_runtime_1.jsxs)("div", { className: 'flex items-center gap-2 mb-2', children: [(0, jsx_runtime_1.jsx)(lucide_react_1.AlertCircle, { className: 'text-purple-600 dark:text-purple-400', size: 16 }), (0, jsx_runtime_1.jsx)("span", { className: 'text-sm font-medium text-purple-900 dark:text-purple-100', children: "Active Suggestions" })] }), (0, jsx_runtime_1.jsx)("div", { className: 'text-2xl font-bold text-purple-600 dark:text-purple-400', children: totalSuggestions })] })] }), (0, jsx_runtime_1.jsx)("div", { className: 'space-y-4', children: pillars.map((pillar) => {
                                const Icon = pillar.icon;
                                return ((0, jsx_runtime_1.jsxs)("div", { className: `${pillar.bgColor} border ${pillar.borderColor} rounded-lg p-4 transition-all hover:shadow-md`, "data-testid": `pillar-card-${pillar.id}`, children: [(0, jsx_runtime_1.jsxs)("div", { className: 'flex items-center justify-between mb-3', children: [(0, jsx_runtime_1.jsxs)("div", { className: 'flex items-center gap-3', children: [(0, jsx_runtime_1.jsxs)("div", { className: 'flex items-center gap-2', children: [(0, jsx_runtime_1.jsx)(Icon, { className: pillar.iconColor, size: 20 }), (0, jsx_runtime_1.jsxs)("span", { className: 'font-bold text-gray-500 dark:text-gray-400', children: ["#", pillar.id] })] }), (0, jsx_runtime_1.jsxs)("div", { children: [(0, jsx_runtime_1.jsx)("h3", { className: 'font-semibold text-gray-900 dark:text-gray-100', children: pillar.title }), (0, jsx_runtime_1.jsx)("p", { className: 'text-sm text-gray-600 dark:text-gray-400', children: pillar.description })] })] }), (0, jsx_runtime_1.jsxs)("div", { className: 'text-right', children: [(0, jsx_runtime_1.jsx)(badge_1.Badge, { className: pillar.statusColor, children: pillar.statusText }), (0, jsx_runtime_1.jsxs)("div", { className: 'text-xs text-gray-500 dark:text-gray-400 mt-1', children: [pillar.health, "% healthy"] })] })] }), (0, jsx_runtime_1.jsxs)("div", { className: 'flex items-center justify-between', children: [(0, jsx_runtime_1.jsx)("div", { className: 'flex-1 mr-4', children: (0, jsx_runtime_1.jsx)(progress_1.Progress, { value: pillar.health, className: 'h-2' }) }), (0, jsx_runtime_1.jsxs)("div", { className: 'flex items-center gap-4 text-sm text-gray-600 dark:text-gray-400', children: [(0, jsx_runtime_1.jsxs)("span", { className: 'flex items-center gap-1', children: [(0, jsx_runtime_1.jsx)(lucide_react_1.AlertCircle, { size: 14 }), pillar.suggestions, " suggestions"] }), pillar.completedToday > 0 && ((0, jsx_runtime_1.jsxs)("span", { className: 'flex items-center gap-1 text-green-600 dark:text-green-400', children: [(0, jsx_runtime_1.jsx)(lucide_react_1.CheckCircle2, { size: 14 }), pillar.completedToday, " completed today"] }))] })] })] }, pillar.id));
                            }) })] })] }) }));
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiL2hvbWUvcnVubmVyL3dvcmtzcGFjZS9jbGllbnQvc3JjL2NvbXBvbmVudHMvZGFzaGJvYXJkL3BpbGxhci1mcmFtZXdvcmsudHN4IiwibWFwcGluZ3MiOiI7O0FBc0JBLDBDQThQQzs7QUFwUkQsK0NBQWdGO0FBQ2hGLGlEQUE4QztBQUM5Qyx1REFBb0Q7QUFDcEQsK0NBU3NCO0FBQ3RCLHVEQUFtRDtBQUNuRCx1REFBaUQ7QUFHakQ7Ozs7R0FJRztBQUNILFNBQWdCLGVBQWU7SUFDN0IsTUFBTSxFQUFFLENBQUMsRUFBRSxHQUFHLElBQUEsMEJBQVcsR0FBRSxDQUFDO0lBRTVCLDBEQUEwRDtJQUMxRCxNQUFNLEVBQUUsSUFBSSxFQUFFLFdBQVcsRUFBRSxTQUFTLEVBQUUsa0JBQWtCLEVBQUUsR0FBRyxJQUFBLHNCQUFRLEVBQUM7UUFDcEUsUUFBUSxFQUFFLENBQUMsMEJBQTBCLENBQUM7UUFDdEMsZUFBZSxFQUFFLEtBQUssRUFBRSxxREFBcUQ7S0FDOUUsQ0FBQyxDQUFDO0lBRUgsTUFBTSxFQUFFLElBQUksRUFBRSxjQUFjLEVBQUUsR0FBRyxJQUFBLHNCQUFRLEVBQUM7UUFDeEMsUUFBUSxFQUFFLENBQUMsc0JBQXNCLENBQUM7UUFDbEMsZUFBZSxFQUFFLEtBQUssRUFBRSx1QkFBdUI7S0FDaEQsQ0FBQyxDQUFDO0lBRUgscURBQXFEO0lBQ3JELE1BQU0scUJBQXFCLEdBQUcsQ0FBQyxVQUFrQixFQUFFLEVBQUU7UUFDbkQsSUFBSSxDQUFDLFdBQVc7WUFBRSxPQUFPLEVBQUUsTUFBTSxFQUFFLEVBQUUsRUFBRSxXQUFXLEVBQUUsQ0FBQyxFQUFFLGNBQWMsRUFBRSxDQUFDLEVBQUUsQ0FBQztRQUUzRSxNQUFNLGlCQUFpQixHQUFHLEtBQUssQ0FBQyxPQUFPLENBQUMsV0FBVyxDQUFDO1lBQ2xELENBQUMsQ0FBQyxXQUFXLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBTSxFQUFFLEVBQUUsQ0FBQyxDQUFDLENBQUMsUUFBUSxFQUFFLFdBQVcsRUFBRSxDQUFDLFFBQVEsQ0FB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dUJBQUMsMEJBQVcsSUFBQyxJQUFJLEVBQUUsRUFBRSxHQUFJLEVBQ3hCLE1BQU0sQ0FBQyxXQUFXLG9CQUNkLEVBQ04sTUFBTSxDQUFDLGNBQWMsR0FBRyxDQUFDLElBQUksQ0FDNUIsa0NBQU0sU0FBUyxFQUFDLDREQUE0RCxhQUMxRSx1QkFBQywyQkFBWSxJQUFDLElBQUksRUFBRSxFQUFFLEdBQUksRUFDekIsTUFBTSxDQUFDLGNBQWMsd0JBQ2pCLENBQ1IsSUFDRyxJQUNGLEtBN0NELE1BQU0sQ0FBQyxFQUFFLENBOENWLENBQ1AsQ0FBQzs0QkFDSixDQUFDLENBQUMsR0FDRSxJQUNNLElBQ1QsR0FDSCxDQUNQLENBQUM7QUFDSixDQUFDIiwibmFtZXMiOltdLCJzb3VyY2VzIjpbIi9ob21lL3J1bm5lci93b3Jrc3BhY2UvY2xpZW50L3NyYy9jb21wb25lbnRzL2Rhc2hib2FyZC9waWxsYXItZnJhbWV3b3JrLnRzeCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBDYXJkLCBDYXJkQ29udGVudCwgQ2FyZEhlYWRlciwgQ2FyZFRpdGxlIH0gZnJvbSAnQC9jb21wb25lbnRzL3VpL2NhcmQnO1xuaW1wb3J0IHsgQmFkZ2UgfSBmcm9tICdAL2NvbXBvbmVudHMvdWkvYmFkZ2UnO1xuaW1wb3J0IHsgUHJvZ3Jlc3MgfSBmcm9tICdAL2NvbXBvbmVudHMvdWkvcHJvZ3Jlc3MnO1xuaW1wb3J0IHtcbiAgQ29sdW1ucyxcbiAgVHJlbmRpbmdVcCxcbiAgRmlsZVRleHQsXG4gIFNoaWVsZCxcbiAgVGVzdFR1YmUsXG4gIENoZWNrQ2lyY2xlMixcbiAgQ2xvY2ssXG4gIEFsZXJ0Q2lyY2xlLFxufSBmcm9tICdsdWNpZGUtcmVhY3QnO1xuaW1wb3J0IHsgdXNlTGFuZ3VhZ2UgfSBmcm9tICdAL2hvb2tzL3VzZS1sYW5ndWFnZSc7XG5pbXBvcnQgeyB1c2VRdWVyeSB9IGZyb20gJ0B0YW5zdGFjay9yZWFjdC1xdWVyeSc7XG5pbXBvcnQgeyBCdXR0b24gfSBmcm9tICdAL2NvbXBvbmVudHMvdWkvYnV0dG9uJztcblxuLyoqXG4gKiBFbmhhbmNlZCBQaWxsYXIgZnJhbWV3b3JrIGNvbXBvbmVudCB0aGF0IGRpc3BsYXlzIGFsbCBmaXZlIGNvcmUgZGV2ZWxvcG1lbnQgcGlsbGFyc1xuICogb2YgdGhlIEtvdmVvIEdlc3Rpb24gbWV0aG9kb2xvZ3kgd2l0aCByZWFsLXRpbWUgc3RhdHVzLCBtZXRyaWNzLCBhbmQgaW1wcm92ZW1lbnQgc3VnZ2VzdGlvbnMuXG4gKiBAcmV0dXJucyBKU1ggZWxlbWVudCBkaXNwbGF5aW5nIHRoZSBjb21wcmVoZW5zaXZlIHBpbGxhciBmcmFtZXdvcmsgaW50ZXJmYWNlLlxuICovXG5leHBvcnQgZnVuY3Rpb24gUGlsbGFyRnJhbWV3b3JrKCkge1xuICBjb25zdCB7IHQgfSA9IHVzZUxhbmd1YWdlKCk7XG5cbiAgLy8gRmV0Y2ggcmVhbC10aW1lIHBpbGxhciBkYXRhIGFuZCBpbXByb3ZlbWVudCBzdWdnZXN0aW9uc1xuICBjb25zdCB7IGRhdGE6IHN1Z2dlc3Rpb25zLCBpc0xvYWRpbmc6IHN1Z2dlc3Rpb25zTG9hZGluZyB9ID0gdXNlUXVlcnkoe1xuICAgIHF1ZXJ5S2V5OiBbJy9hcGkvcGlsbGFycy9zdWdnZXN0aW9ucyddLFxuICAgIHJlZmV0Y2hJbnRlcnZhbDogMzAwMDAsIC8vIFJlZnJlc2ggZXZlcnkgMzAgc2Vjb25kcyBmb3IgY29udGludW91cyBtb25pdG9yaW5nXG4gIH0pO1xuXG4gIGNvbnN0IHsgZGF0YTogcXVhbGl0eU1ldHJpY3MgfSA9IHVzZVF1ZXJ5KHtcbiAgICBxdWVyeUtleTogWycvYXBpL3F1YWxpdHktbWV0cmljcyddLFxuICAgIHJlZmV0Y2hJbnRlcnZhbDogNjAwMDAsIC8vIFJlZnJlc2ggZXZlcnkgbWludXRlXG4gIH0pO1xuXG4gIC8vIENhbGN1bGF0ZSBjb21wbGV0aW9uIHBlcmNlbnRhZ2VzIGFuZCBoZWFsdGggc2NvcmVzXG4gIGNvbnN0IGNhbGN1bGF0ZVBpbGxhckhlYWx0aCA9IChwaWxsYXJOYW1lOiBzdHJpbmcpID0+IHtcbiAgICBpZiAoIXN1Z2dlc3Rpb25zKSByZXR1cm4geyBoZWFsdGg6IDg1LCBzdWdnZXN0aW9uczogMCwgY29tcGxldGVkVG9kYXk6IDAgfTtcblxuICAgIGNvbnN0IHBpbGxhclN1Z2dlc3Rpb25zID0gQXJyYXkuaXNBcnJheShzdWdnZXN0aW9ucylcbiAgICAgID8gc3VnZ2VzdGlvbnMuZmlsdGVyKChzOiBhbnkpID0+IHMuY2F0ZWdvcnk/LnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMocGlsbGFyTmFtZS50b0xvd2VyQ2FzZSgpKSlcbiAgICAgIDogW107XG4gICAgY29uc3QgY29tcGxldGVkU3VnZ2VzdGlvbnMgPSBwaWxsYXJTdWdnZXN0aW9ucy5maWx0ZXIoKHM6IGFueSkgPT4gcy5zdGF0dXMgPT09ICdEb25lJyk7XG5cbiAgICByZXR1cm4ge1xuICAgICAgaGVhbHRoOlxuICAgICAgICBwaWxsYXJTdWdnZXN0aW9ucy5sZW5ndGggPiAwXG4gICAgICAgICAgPyBNYXRoLnJvdW5kKChjb21wbGV0ZWRTdWdnZXN0aW9ucy5sZW5ndGggLyBwaWxsYXJTdWdnZXN0aW9ucy5sZW5ndGgpICogMTAwKVxuICAgICAgICAgIDogODUsXG4gICAgICBzdWdnZXN0aW9uczogcGlsbGFyU3VnZ2VzdGlvbnMubGVuZ3RoLFxuICAgICAgY29tcGxldGVkVG9kYXk6IGNvbXBsZXRlZFN1Z2dlc3Rpb25zLmZpbHRlcigoczogYW55KSA9PiB7XG4gICAgICAgIGNvbnN0IGNvbXBsZXRlZERhdGUgPSBuZXcgRGF0ZShzLmNvbXBsZXRlZEF0IHx8IHMudXBkYXRlZEF0KTtcbiAgICAgICAgY29uc3QgdG9kYXkgPSBuZXcgRGF0ZSgpO1xuICAgICAgICByZXR1cm4gY29tcGxldGVkRGF0ZS50b0RhdGVTdHJpbmcoKSA9PT0gdG9kYXkudG9EYXRlU3RyaW5nKCk7XG4gICAgICB9KS5sZW5ndGgsXG4gICAgfTtcbiAgfTtcblxuICAvLyBFbmhhbmNlZCBwaWxsYXIgY29uZmlndXJhdGlvbiB3aXRoIGFsbCA1IHBpbGxhcnMgYW5kIHJlYWwtdGltZSBkYXRhXG4gIGNvbnN0IHBpbGxhcnMgPSBbXG4gICAge1xuICAgICAgaWQ6IDEsXG4gICAgICB0aXRsZTogdCgndmFsaWRhdGlvblFBUGlsbGFyJykgfHwgJ1ZhbGlkYXRpb24gJiBRQScsXG4gICAgICBkZXNjcmlwdGlvbjogdCgnY29yZVF1YWxpdHlBc3N1cmFuY2UnKSB8fCAnQ29yZSBxdWFsaXR5IGFzc3VyYW5jZSBhbmQgdmFsaWRhdGlvbiBmcmFtZXdvcmsnLFxuICAgICAgc3RhdHVzOiAnaW4tcHJvZ3Jlc3MnLFxuICAgICAgc3RhdHVzVGV4dDogdCgnaW5Qcm9ncmVzcycpIHx8ICdJbiBQcm9ncmVzcycsXG4gICAgICBpY29uOiBDaGVja0NpcmNsZTIsXG4gICAgICBiZ0NvbG9yOiAnYmctYmx1ZS01MCBkYXJrOmJnLWJsdWUtOTUwJyxcbiAgICAgIGJvcmRlckNvbG9yOiAnYm9yZGVyLWJsdWUtMjAwIGRhcms6Ym9yZGVyLWJsdWUtODAwJyxcbiAgICAgIGljb25Db2xvcjogJ3RleHQtYmx1ZS02MDAgZGFyazp0ZXh0LWJsdWUtNDAwJyxcbiAgICAgIHN0YXR1c0NvbG9yOiAndGV4dC1vcmFuZ2UtNjAwIGRhcms6dGV4dC1vcmFuZ2UtNDAwJyxcbiAgICAgIC4uLmNhbGN1bGF0ZVBpbGxhckhlYWx0aCgnUXVhbGl0eScpLFxuICAgIH0sXG4gICAge1xuICAgICAgaWQ6IDIsXG4gICAgICB0aXRsZTogdCgndGVzdGluZ1BpbGxhcicpIHx8ICdUZXN0aW5nIEZyYW1ld29yaycsXG4gICAgICBkZXNjcmlwdGlvbjogdCgnYXV0b21hdGVkVGVzdGluZ0ZyYW1ld29yaycpIHx8ICdBdXRvbWF0ZWQgdGVzdGluZyBhbmQgdmFsaWRhdGlvbiBzeXN0ZW0nLFxuICAgICAgc3RhdHVzOiAnaW4tcHJvZ3Jlc3MnLFxuICAgICAgc3RhdHVzVGV4dDogdCgnaW5Qcm9ncmVzcycpIHx8ICdJbiBQcm9ncmVzcycsXG4gICAgICBpY29uOiBUZXN0VHViZSxcbiAgICAgIGJnQ29sb3I6ICdiZy1ncmVlbi01MCBkYXJrOmJnLWdyZWVuLTk1MCcsXG4gICAgICBib3JkZXJDb2xvcjogJ2JvcmRlci1ncmVlbi0yMDAgZGFyazpib3JkZXItZ3JlZW4tODAwJyxcbiAgICAgIGljb25Db2xvcjogJ3RleHQtZ3JlZW4tNjAwIGRhcms6dGV4dC1ncmVlbi00MDAnLFxuICAgICAgc3RhdHVzQ29sb3I6ICd0ZXh0LW9yYW5nZS02MDAgZGFyazp0ZXh0LW9yYW5nZS00MDAnLFxuICAgICAgLi4uY2FsY3VsYXRlUGlsbGFySGVhbHRoKCdUZXN0aW5nJyksXG4gICAgfSxcbiAgICB7XG4gICAgICBpZDogMyxcbiAgICAgIHRpdGxlOiB0KCdzZWN1cml0eVBpbGxhcicpIHx8ICdTZWN1cml0eSAmIENvbXBsaWFuY2UnLFxuICAgICAgZGVzY3JpcHRpb246XG4gICAgICAgIHQoJ2xhdzI1Q29tcGxpYW5jZUZyYW1ld29yaycpIHx8ICdRdWViZWMgTGF3IDI1IGNvbXBsaWFuY2UgYW5kIHNlY3VyaXR5IGZyYW1ld29yaycsXG4gICAgICBzdGF0dXM6ICdpbi1wcm9ncmVzcycsXG4gICAgICBzdGF0dXNUZXh0OiB0KCdpblByb2dyZXNzJykgfHwgJ0luIFByb2dyZXNzJyxcbiAgICAgIGljb246IFNoaWVsZCxcbiAgICAgIGJnQ29sb3I6ICdiZy1wdXJwbGUtNTAgZGFyazpiZy1wdXJwbGUtOTUwJyxcbiAgICAgIGJvcmRlckNvbG9yOiAnYm9yZGVyLXB1cnBsZS0yMDAgZGFyazpib3JkZXItcHVycGxlLTgwMCcsXG4gICAgICBpY29uQ29sb3I6ICd0ZXh0LXB1cnBsZS02MDAgZGFyazp0ZXh0LXB1cnBsZS00MDAnLFxuICAgICAgc3RhdHVzQ29sb3I6ICd0ZXh0LW9yYW5nZS02MDAgZGFyazp0ZXh0LW9yYW5nZS00MDAnLFxuICAgICAgLi4uY2FsY3VsYXRlUGlsbGFySGVhbHRoKCdTZWN1cml0eScpLFxuICAgIH0sXG4gICAge1xuICAgICAgaWQ6IDQsXG4gICAgICB0aXRsZTogdCgnY29udGludW91c0ltcHJvdmVtZW50UGlsbGFyJykgfHwgJ0NvbnRpbnVvdXMgSW1wcm92ZW1lbnQnLFxuICAgICAgZGVzY3JpcHRpb246XG4gICAgICAgIHQoJ2NvbnRpbnVvdXNJbXByb3ZlbWVudERlc2NyaXB0aW9uJykgfHxcbiAgICAgICAgJ0FJLWRyaXZlbiBtZXRyaWNzLCBhbmFseXRpY3MsIGFuZCBhdXRvbWF0ZWQgaW1wcm92ZW1lbnQgc3VnZ2VzdGlvbnMnLFxuICAgICAgc3RhdHVzOiAnYWN0aXZlJyxcbiAgICAgIHN0YXR1c1RleHQ6IHQoJ2FjdGl2ZVBpbGxhcicpIHx8ICdBY3RpdmUnLFxuICAgICAgaWNvbjogVHJlbmRpbmdVcCxcbiAgICAgIGJnQ29sb3I6ICdiZy1pbmRpZ28tNTAgZGFyazpiZy1pbmRpZ28tOTUwJyxcbiAgICAgIGJvcmRlckNvbG9yOiAnYm9yZGVyLWluZGlnby0yMDAgZGFyazpib3JkZXItaW5kaWdvLTgwMCcsXG4gICAgICBpY29uQ29sb3I6ICd0ZXh0LWluZGlnby02MDAgZGFyazp0ZXh0LWluZGlnby00MDAnLFxuICAgICAgc3RhdHVzQ29sb3I6ICd0ZXh0LWdyZWVuLTYwMCBkYXJrOnRleHQtZ3JlZW4tNDAwJyxcbiAgICAgIC4uLmNhbGN1bGF0ZVBpbGxhckhlYWx0aCgnQ29udGludW91cyBJbXByb3ZlbWVudCcpLFxuICAgIH0sXG4gICAge1xuICAgICAgaWQ6IDUsXG4gICAgICB0aXRsZTogdCgnZG9jdW1lbnRhdGlvblBpbGxhcicpIHx8ICdEb2N1bWVudGF0aW9uICYgS25vd2xlZGdlJyxcbiAgICAgIGRlc2NyaXB0aW9uOlxuICAgICAgICB0KCdkb2N1bWVudGF0aW9uRGVzY3JpcHRpb24nKSB8fFxuICAgICAgICAnQ29tcHJlaGVuc2l2ZSBkb2N1bWVudGF0aW9uIGFuZCBrbm93bGVkZ2UgbWFuYWdlbWVudCBzeXN0ZW0nLFxuICAgICAgc3RhdHVzOiAnaW4tcHJvZ3Jlc3MnLFxuICAgICAgc3RhdHVzVGV4dDogdCgnaW5Qcm9ncmVzcycpIHx8ICdJbiBQcm9ncmVzcycsXG4gICAgICBpY29uOiBGaWxlVGV4dCxcbiAgICAgIGJnQ29sb3I6ICdiZy1hbWJlci01MCBkYXJrOmJnLWFtYmVyLTk1MCcsXG4gICAgICBib3JkZXJDb2xvcjogJ2JvcmRlci1hbWJlci0yMDAgZGFyazpib3JkZXItYW1iZXItODAwJyxcbiAgICAgIGljb25Db2xvcjogJ3RleHQtYW1iZXItNjAwIGRhcms6dGV4dC1hbWJlci00MDAnLFxuICAgICAgc3RhdHVzQ29sb3I6ICd0ZXh0LW9yYW5nZS02MDAgZGFyazp0ZXh0LW9yYW5nZS00MDAnLFxuICAgICAgLi4uY2FsY3VsYXRlUGlsbGFySGVhbHRoKCdEb2N1bWVudGF0aW9uJyksXG4gICAgfSxcbiAgXTtcblxuICBjb25zdCBvdmVyYWxsSGVhbHRoID0gTWF0aC5yb3VuZChcbiAgICBwaWxsYXJzLnJlZHVjZSgoYWNjLCBwaWxsYXIpID0+IGFjYyArIHBpbGxhci5oZWFsdGgsIDApIC8gcGlsbGFycy5sZW5ndGhcbiAgKTtcbiAgY29uc3QgdG90YWxTdWdnZXN0aW9ucyA9IHBpbGxhcnMucmVkdWNlKChhY2MsIHBpbGxhcikgPT4gYWNjICsgcGlsbGFyLnN1Z2dlc3Rpb25zLCAwKTtcbiAgY29uc3QgY29tcGxldGVkVG9kYXkgPSBwaWxsYXJzLnJlZHVjZSgoYWNjLCBwaWxsYXIpID0+IGFjYyArIHBpbGxhci5jb21wbGV0ZWRUb2RheSwgMCk7XG5cbiAgaWYgKHN1Z2dlc3Rpb25zTG9hZGluZykge1xuICAgIHJldHVybiAoXG4gICAgICA8Q2FyZD5cbiAgICAgICAgPENhcmRIZWFkZXI+XG4gICAgICAgICAgPENhcmRUaXRsZSBjbGFzc05hbWU9J2ZsZXggaXRlbXMtY2VudGVyIGdhcC0yJz5cbiAgICAgICAgICAgIDxDb2x1bW5zIGNsYXNzTmFtZT0ndGV4dC1rb3Zlby1uYXZ5JyBzaXplPXsyMH0gLz5cbiAgICAgICAgICAgIHt0KCdwaWxsYXJNZXRob2RvbG9neScpIHx8ICdQaWxsYXIgTWV0aG9kb2xvZ3knfVxuICAgICAgICAgIDwvQ2FyZFRpdGxlPlxuICAgICAgICA8L0NhcmRIZWFkZXI+XG4gICAgICAgIDxDYXJkQ29udGVudD5cbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0nYW5pbWF0ZS1wdWxzZSBzcGFjZS15LTQnPlxuICAgICAgICAgICAge1sxLCAyLCAzLCA0LCA1XS5tYXAoKGkpID0+IChcbiAgICAgICAgICAgICAgPGRpdiBrZXk9e2l9IGNsYXNzTmFtZT0naC0xNiBiZy1ncmF5LTIwMCBkYXJrOmJnLWdyYXktNzAwIHJvdW5kZWQtbGcnPjwvZGl2PlxuICAgICAgICAgICAgKSl9XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgIDwvQ2FyZENvbnRlbnQ+XG4gICAgICA8L0NhcmQ+XG4gICAgKTtcbiAgfVxuXG4gIHJldHVybiAoXG4gICAgPGRpdiBjbGFzc05hbWU9J3NwYWNlLXktNic+XG4gICAgICB7LyogT3ZlcnZpZXcgRGFzaGJvYXJkICovfVxuICAgICAgPENhcmQ+XG4gICAgICAgIDxDYXJkSGVhZGVyPlxuICAgICAgICAgIDxDYXJkVGl0bGUgY2xhc3NOYW1lPSdmbGV4IGl0ZW1zLWNlbnRlciBqdXN0aWZ5LWJldHdlZW4nPlxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9J2ZsZXggaXRlbXMtY2VudGVyIGdhcC0yJz5cbiAgICAgICAgICAgICAgPENvbHVtbnMgY2xhc3NOYW1lPSd0ZXh0LWtvdmVvLW5hdnknIHNpemU9ezIwfSAvPlxuICAgICAgICAgICAgICB7dCgncGlsbGFyTWV0aG9kb2xvZ3knKSB8fCAnUGlsbGFyIE1ldGhvZG9sb2d5IEZyYW1ld29yayd9XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIDxCYWRnZVxuICAgICAgICAgICAgICB2YXJpYW50PXtcbiAgICAgICAgICAgICAgICBvdmVyYWxsSGVhbHRoID49IDgwID8gJ2RlZmF1bHQnIDogb3ZlcmFsbEhlYWx0aCA+PSA2MCA/ICdzZWNvbmRhcnknIDogJ2Rlc3RydWN0aXZlJ1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICA+XG4gICAgICAgICAgICAgIHtvdmVyYWxsSGVhbHRofSUgSGVhbHRoXG4gICAgICAgICAgICA8L0JhZGdlPlxuICAgICAgICAgIDwvQ2FyZFRpdGxlPlxuICAgICAgICA8L0NhcmRIZWFkZXI+XG4gICAgICAgIDxDYXJkQ29udGVudD5cbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0nZ3JpZCBncmlkLWNvbHMtMSBtZDpncmlkLWNvbHMtMyBnYXAtNCBtYi02Jz5cbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSdiZy1ibHVlLTUwIGRhcms6YmctYmx1ZS05NTAgcC00IHJvdW5kZWQtbGcnPlxuICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0nZmxleCBpdGVtcy1jZW50ZXIgZ2FwLTIgbWItMic+XG4gICAgICAgICAgICAgICAgPFRyZW5kaW5nVXAgY2xhc3NOYW1lPSd0ZXh0LWJsdWUtNjAwIGRhcms6dGV4dC1ibHVlLTQwMCcgc2l6ZT17MTZ9IC8+XG4gICAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPSd0ZXh0LXNtIGZvbnQtbWVkaXVtIHRleHQtYmx1ZS05MDAgZGFyazp0ZXh0LWJsdWUtMTAwJz5cbiAgICAgICAgICAgICAgICAgIFN5c3RlbSBIZWFsdGhcbiAgICAgICAgICAgICAgICA8L3NwYW4+XG4gICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0ndGV4dC0yeGwgZm9udC1ib2xkIHRleHQtYmx1ZS02MDAgZGFyazp0ZXh0LWJsdWUtNDAwJz5cbiAgICAgICAgICAgICAgICB7b3ZlcmFsbEhlYWx0aH0lXG4gICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICA8UHJvZ3Jlc3MgdmFsdWU9e292ZXJhbGxIZWFsdGh9IGNsYXNzTmFtZT0nbXQtMicgLz5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9J2JnLWdyZWVuLTUwIGRhcms6YmctZ3JlZW4tOTUwIHAtNCByb3VuZGVkLWxnJz5cbiAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9J2ZsZXggaXRlbXMtY2VudGVyIGdhcC0yIG1iLTInPlxuICAgICAgICAgICAgICAgIDxDaGVja0NpcmNsZTIgY2xhc3NOYW1lPSd0ZXh0LWdyZWVuLTYwMCBkYXJrOnRleHQtZ3JlZW4tNDAwJyBzaXplPXsxNn0gLz5cbiAgICAgICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9J3RleHQtc20gZm9udC1tZWRpdW0gdGV4dC1ncmVlbi05MDAgZGFyazp0ZXh0LWdyZWVuLTEwMCc+XG4gICAgICAgICAgICAgICAgICBDb21wbGV0ZWQgVG9kYXlcbiAgICAgICAgICAgICAgICA8L3NwYW4+XG4gICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0ndGV4dC0yeGwgZm9udC1ib2xkIHRleHQtZ3JlZW4tNjAwIGRhcms6dGV4dC1ncmVlbi00MDAnPlxuICAgICAgICAgICAgICAgIHtjb21wbGV0ZWRUb2RheX1cbiAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSdiZy1wdXJwbGUtNTAgZGFyazpiZy1wdXJwbGUtOTUwIHAtNCByb3VuZGVkLWxnJz5cbiAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9J2ZsZXggaXRlbXMtY2VudGVyIGdhcC0yIG1iLTInPlxuICAgICAgICAgICAgICAgIDxBbGVydENpcmNsZSBjbGFzc05hbWU9J3RleHQtcHVycGxlLTYwMCBkYXJrOnRleHQtcHVycGxlLTQwMCcgc2l6ZT17MTZ9IC8+XG4gICAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPSd0ZXh0LXNtIGZvbnQtbWVkaXVtIHRleHQtcHVycGxlLTkwMCBkYXJrOnRleHQtcHVycGxlLTEwMCc+XG4gICAgICAgICAgICAgICAgICBBY3RpdmUgU3VnZ2VzdGlvbnNcbiAgICAgICAgICAgICAgICA8L3NwYW4+XG4gICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0ndGV4dC0yeGwgZm9udC1ib2xkIHRleHQtcHVycGxlLTYwMCBkYXJrOnRleHQtcHVycGxlLTQwMCc+XG4gICAgICAgICAgICAgICAge3RvdGFsU3VnZ2VzdGlvbnN9XG4gICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgPC9kaXY+XG5cbiAgICAgICAgICB7LyogUGlsbGFyIENhcmRzICovfVxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSdzcGFjZS15LTQnPlxuICAgICAgICAgICAge3BpbGxhcnMubWFwKChwaWxsYXIpID0+IHtcbiAgICAgICAgICAgICAgY29uc3QgSWNvbiA9IHBpbGxhci5pY29uO1xuICAgICAgICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgICAgIDxkaXZcbiAgICAgICAgICAgICAgICAgIGtleT17cGlsbGFyLmlkfVxuICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPXtgJHtwaWxsYXIuYmdDb2xvcn0gYm9yZGVyICR7cGlsbGFyLmJvcmRlckNvbG9yfSByb3VuZGVkLWxnIHAtNCB0cmFuc2l0aW9uLWFsbCBob3ZlcjpzaGFkb3ctbWRgfVxuICAgICAgICAgICAgICAgICAgZGF0YS10ZXN0aWQ9e2BwaWxsYXItY2FyZC0ke3BpbGxhci5pZH1gfVxuICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSdmbGV4IGl0ZW1zLWNlbnRlciBqdXN0aWZ5LWJldHdlZW4gbWItMyc+XG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSdmbGV4IGl0ZW1zLWNlbnRlciBnYXAtMyc+XG4gICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9J2ZsZXggaXRlbXMtY2VudGVyIGdhcC0yJz5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxJY29uIGNsYXNzTmFtZT17cGlsbGFyLmljb25Db2xvcn0gc2l6ZT17MjB9IC8+XG4gICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9J2ZvbnQtYm9sZCB0ZXh0LWdyYXktNTAwIGRhcms6dGV4dC1ncmF5LTQwMCc+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICN7cGlsbGFyLmlkfVxuICAgICAgICAgICAgICAgICAgICAgICAgPC9zcGFuPlxuICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgIDxkaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICA8aDMgY2xhc3NOYW1lPSdmb250LXNlbWlib2xkIHRleHQtZ3JheS05MDAgZGFyazp0ZXh0LWdyYXktMTAwJz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAge3BpbGxhci50aXRsZX1cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvaDM+XG4gICAgICAgICAgICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9J3RleHQtc20gdGV4dC1ncmF5LTYwMCBkYXJrOnRleHQtZ3JheS00MDAnPlxuICAgICAgICAgICAgICAgICAgICAgICAgICB7cGlsbGFyLmRlc2NyaXB0aW9ufVxuICAgICAgICAgICAgICAgICAgICAgICAgPC9wPlxuICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9J3RleHQtcmlnaHQnPlxuICAgICAgICAgICAgICAgICAgICAgIDxCYWRnZSBjbGFzc05hbWU9e3BpbGxhci5zdGF0dXNDb2xvcn0+e3BpbGxhci5zdGF0dXNUZXh0fTwvQmFkZ2U+XG4gICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9J3RleHQteHMgdGV4dC1ncmF5LTUwMCBkYXJrOnRleHQtZ3JheS00MDAgbXQtMSc+XG4gICAgICAgICAgICAgICAgICAgICAgICB7cGlsbGFyLmhlYWx0aH0lIGhlYWx0aHlcbiAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICA8L2Rpdj5cblxuICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9J2ZsZXggaXRlbXMtY2VudGVyIGp1c3RpZnktYmV0d2Vlbic+XG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSdmbGV4LTEgbXItNCc+XG4gICAgICAgICAgICAgICAgICAgICAgPFByb2dyZXNzIHZhbHVlPXtwaWxsYXIuaGVhbHRofSBjbGFzc05hbWU9J2gtMicgLz5cbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSdmbGV4IGl0ZW1zLWNlbnRlciBnYXAtNCB0ZXh0LXNtIHRleHQtZ3JheS02MDAgZGFyazp0ZXh0LWdyYXktNDAwJz5cbiAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9J2ZsZXggaXRlbXMtY2VudGVyIGdhcC0xJz5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxBbGVydENpcmNsZSBzaXplPXsxNH0gLz5cbiAgICAgICAgICAgICAgICAgICAgICAgIHtwaWxsYXIuc3VnZ2VzdGlvbnN9IHN1Z2dlc3Rpb25zXG4gICAgICAgICAgICAgICAgICAgICAgPC9zcGFuPlxuICAgICAgICAgICAgICAgICAgICAgIHtwaWxsYXIuY29tcGxldGVkVG9kYXkgPiAwICYmIChcbiAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT0nZmxleCBpdGVtcy1jZW50ZXIgZ2FwLTEgdGV4dC1ncmVlbi02MDAgZGFyazp0ZXh0LWdyZWVuLTQwMCc+XG4gICAgICAgICAgICAgICAgICAgICAgICAgIDxDaGVja0NpcmNsZTIgc2l6ZT17MTR9IC8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHtwaWxsYXIuY29tcGxldGVkVG9kYXl9IGNvbXBsZXRlZCB0b2RheVxuICAgICAgICAgICAgICAgICAgICAgICAgPC9zcGFuPlxuICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICk7XG4gICAgICAgICAgICB9KX1cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgPC9DYXJkQ29udGVudD5cbiAgICAgIDwvQ2FyZD5cbiAgICA8L2Rpdj5cbiAgKTtcbn1cbiJdLCJ2ZXJzaW9uIjozfQ==