de3c3b69be70d4c91cf72d1c63451cd0
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const password_validation_1 = require("../../../client/src/utils/password-validation");
describe('Password Validation System', () => {
    describe('Password Strength Validation', () => {
        test('should validate minimum length requirement', () => {
            expect((0, password_validation_1.validatePasswordStrength)('1234567').score).toBe(1); // Has numbers but no min length
            expect((0, password_validation_1.validatePasswordStrength)('12345678').score).toBeGreaterThan(1); // Min length + numbers
            expect((0, password_validation_1.validatePasswordStrength)('123456789012345').score).toBeGreaterThan(2); // Long + min length + numbers
        });
        test('should validate uppercase letter requirement', () => {
            const noUppercase = (0, password_validation_1.validatePasswordStrength)('password123!');
            const withUppercase = (0, password_validation_1.validatePasswordStrength)('Password123!');
            const noUppercaseCriteria = (0, password_validation_1.getPasswordCriteria)('password123!');
            const withUppercaseCriteria = (0, password_validation_1.getPasswordCriteria)('Password123!');
            expect(noUppercaseCriteria.hasUpperCase).toBe(false);
            expect(withUppercaseCriteria.hasUpperCase).toBe(true);
            expect(withUppercase.score).toBeGreaterThanOrEqual(noUppercase.score);
        });
        test('should validate lowercase letter requirement', () => {
            const noLowercase = (0, password_validation_1.validatePasswordStrength)('PASSWORD123!');
            const withLowercase = (0, password_validation_1.validatePasswordStrength)('Password123!');
            const noLowercaseCriteria = (0, password_validation_1.getPasswordCriteria)('PASSWORD123!');
            const withLowercaseCriteria = (0, password_validation_1.getPasswordCriteria)('Password123!');
            expect(noLowercaseCriteria.hasLowerCase).toBe(false);
            expect(withLowercaseCriteria.hasLowerCase).toBe(true);
            expect(withLowercase.score).toBeGreaterThanOrEqual(noLowercase.score);
        });
        test('should validate number requirement', () => {
            const noNumbers = (0, password_validation_1.validatePasswordStrength)('Password!@#');
            const withNumbers = (0, password_validation_1.validatePasswordStrength)('Password123!');
            const noNumbersCriteria = (0, password_validation_1.getPasswordCriteria)('Password!@#');
            const withNumbersCriteria = (0, password_validation_1.getPasswordCriteria)('Password123!');
            expect(noNumbersCriteria.hasNumbers).toBe(false);
            expect(withNumbersCriteria.hasNumbers).toBe(true);
            expect(withNumbers.score).toBeGreaterThan(noNumbers.score);
        });
        test('should validate special character requirement', () => {
            const noSpecial = (0, password_validation_1.validatePasswordStrength)('Password123');
            const withSpecial = (0, password_validation_1.validatePasswordStrength)('Password123!');
            const noSpecialCriteria = (0, password_validation_1.getPasswordCriteria)('Password123');
            const withSpecialCriteria = (0, password_validation_1.getPasswordCriteria)('Password123!');
            expect(noSpecialCriteria.hasSymbols).toBe(false);
            expect(withSpecialCriteria.hasSymbols).toBe(true);
            expect(withSpecial.score).toBeGreaterThan(noSpecial.score);
        });
        test('should calculate correct strength scores', () => {
            const weak = (0, password_validation_1.validatePasswordStrength)('password');
            const medium = (0, password_validation_1.validatePasswordStrength)('Password123');
            const strong = (0, password_validation_1.validatePasswordStrength)('Password123!');
            const veryStrong = (0, password_validation_1.validatePasswordStrength)('MyStrongP@ssw0rd2024');
            expect(weak.score).toBeGreaterThanOrEqual(1); // Even weak passwords get some points
            expect(medium.score).toBeGreaterThanOrEqual(2);
            expect(strong.score).toBeGreaterThanOrEqual(3);
            expect(veryStrong.score).toBeLessThanOrEqual(4);
        });
        test('should handle edge cases', () => {
            expect(() => (0, password_validation_1.validatePasswordStrength)('')).not.toThrow();
            expect(() => (0, password_validation_1.validatePasswordStrength)('   ')).not.toThrow();
            expect(() => (0, password_validation_1.validatePasswordStrength)('🔐🌟💪')).not.toThrow();
            const empty = (0, password_validation_1.validatePasswordStrength)('');
            const emptyCriteria = (0, password_validation_1.getPasswordCriteria)('');
            expect(empty.score).toBeGreaterThanOrEqual(0); // Empty password gets minimum score
            expect(emptyCriteria.minLength).toBe(false);
            expect(emptyCriteria.hasUpperCase).toBe(false);
            expect(emptyCriteria.hasLowerCase).toBe(false);
            expect(emptyCriteria.hasNumbers).toBe(false);
            expect(emptyCriteria.hasSymbols).toBe(false);
            expect(emptyCriteria.noCommonPatterns).toBe(true); // Empty doesn't contain common patterns
        });
    });
    describe('Password Criteria Helper', () => {
        test('should return correct criteria object', () => {
            const criteria = (0, password_validation_1.getPasswordCriteria)('Password123!');
            expect(criteria).toHaveProperty('minLength');
            expect(criteria).toHaveProperty('hasUpperCase');
            expect(criteria).toHaveProperty('hasLowerCase');
            expect(criteria).toHaveProperty('hasNumbers');
            expect(criteria).toHaveProperty('hasSymbols');
            expect(criteria).toHaveProperty('noCommonPatterns');
            expect(typeof criteria.minLength).toBe('boolean');
            expect(typeof criteria.hasUpperCase).toBe('boolean');
            expect(typeof criteria.hasLowerCase).toBe('boolean');
            expect(typeof criteria.hasNumbers).toBe('boolean');
            expect(typeof criteria.hasSymbols).toBe('boolean');
            expect(typeof criteria.noCommonPatterns).toBe('boolean');
        });
        test('should evaluate criteria correctly for strong password', () => {
            const criteria = (0, password_validation_1.getPasswordCriteria)('MySecureAuth123!');
            expect(criteria.minLength).toBe(true);
            expect(criteria.hasUpperCase).toBe(true);
            expect(criteria.hasLowerCase).toBe(true);
            expect(criteria.hasNumbers).toBe(true);
            expect(criteria.hasSymbols).toBe(true);
            expect(criteria.noCommonPatterns).toBe(true); // Should not contain common patterns
        });
    });
    describe('Password Strength Labels', () => {
        test('should return correct French labels for each strength level', () => {
            expect((0, password_validation_1.getPasswordStrengthLabel)(0)).toBe('Très faible');
            expect((0, password_validation_1.getPasswordStrengthLabel)(1)).toBe('Très faible');
            expect((0, password_validation_1.getPasswordStrengthLabel)(2)).toBe('Faible');
            expect((0, password_validation_1.getPasswordStrengthLabel)(3)).toBe('Moyen');
            expect((0, password_validation_1.getPasswordStrengthLabel)(4)).toBe('Fort');
        });
        test('should handle invalid strength values', () => {
            expect((0, password_validation_1.getPasswordStrengthLabel)(-1)).toBe('Très faible');
            expect((0, password_validation_1.getPasswordStrengthLabel)(10)).toBe('Très faible');
        });
        test('should return correct colors for strength levels', () => {
            expect((0, password_validation_1.getPasswordStrengthColor)(0)).toBe('text-red-600');
            expect((0, password_validation_1.getPasswordStrengthColor)(2)).toBe('text-orange-500');
            expect((0, password_validation_1.getPasswordStrengthColor)(3)).toBe('text-yellow-500');
            expect((0, password_validation_1.getPasswordStrengthColor)(4)).toBe('text-green-600');
        });
        test('should return correct bar colors for strength levels', () => {
            expect((0, password_validation_1.getPasswordStrengthBarColor)(0)).toBe('bg-red-500');
            expect((0, password_validation_1.getPasswordStrengthBarColor)(2)).toBe('bg-orange-500');
            expect((0, password_validation_1.getPasswordStrengthBarColor)(3)).toBe('bg-yellow-500');
            expect((0, password_validation_1.getPasswordStrengthBarColor)(4)).toBe('bg-green-500');
        });
    });
    describe('Quebec Compliance Validation', () => {
        test('should enforce minimum security standards for Quebec Law 25', () => {
            // Quebec privacy law requires strong password protection
            const weakPassword = (0, password_validation_1.validatePasswordStrength)('password');
            const compliantPassword = (0, password_validation_1.validatePasswordStrength)('MonMotDePasse2024!');
            expect(weakPassword.score).toBeLessThan(3);
            expect(compliantPassword.score).toBeGreaterThanOrEqual(3);
            // Strong passwords should meet all criteria for law compliance
            const strongCriteria = (0, password_validation_1.getPasswordCriteria)('MonMotDePasse2024!');
            expect(strongCriteria.minLength).toBe(true);
            expect(strongCriteria.hasUpperCase).toBe(true);
            expect(strongCriteria.hasLowerCase).toBe(true);
            expect(strongCriteria.hasNumbers).toBe(true);
            expect(strongCriteria.hasSymbols).toBe(true);
        });
        test('should validate password complexity for property management security', () => {
            // Property management systems require higher security standards
            const passwords = [
                'Admin123!',
                'GestionPropriete2024@',
                'Montreal$yndic123',
                'QuebecCondo#456',
            ];
            passwords.forEach((password) => {
                const result = (0, password_validation_1.validatePasswordStrength)(password);
                const criteria = (0, password_validation_1.getPasswordCriteria)(password);
                expect(result.score).toBeGreaterThanOrEqual(3);
                expect(criteria.minLength).toBe(true);
                expect(criteria.hasSymbols).toBe(true);
            });
        });
    });
    describe('Performance Tests', () => {
        test('should validate passwords quickly under load', () => {
            const passwords = Array.from({ length: 1000 }, (_, i) => `TestPassword${i}!@#${Math.random()}`);
            const startTime = Date.now();
            passwords.forEach((password) => {
                (0, password_validation_1.validatePasswordStrength)(password);
            });
            const endTime = Date.now();
            const duration = endTime - startTime;
            // Should validate 1000 passwords in under 100ms
            expect(duration).toBeLessThan(100);
        });
        test('should handle very long passwords efficiently', () => {
            const longPassword = 'A'.repeat(10000) + '1' + '!';
            const startTime = Date.now();
            const result = (0, password_validation_1.validatePasswordStrength)(longPassword);
            const endTime = Date.now();
            expect(endTime - startTime).toBeLessThan(10);
            expect(result.score).toBeGreaterThan(0);
        });
    });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiL2hvbWUvcnVubmVyL3dvcmtzcGFjZS90ZXN0cy91bml0L2ludml0YXRpb24vcGFzc3dvcmQtdmFsaWRhdGlvbi50ZXN0LnRzIiwibWFwcGluZ3MiOiI7O0FBQUEsdUZBTXVEO0FBRXZELFFBQVEsQ0FBQyw0QkFBNEIsRUFBRSxHQUFHLEVBQUU7SUFDMUMsUUFBUSxDQUFDLDhCQUE4QixFQUFFLEdBQUcsRUFBRTtRQUM1QyxJQUFJLENBQUMsNENBQTRDLEVBQUUsR0FBRyxFQUFFO1lBQ3RELE1BQU0sQ0FBQyxJQUFBLDhDQUF3QixFQUFDLFNBQVMsQ0FBQyxDQUFDLEtBQUssQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLGdDQUFnQztZQUMzRixNQUFNLENBQUMsSUFBQSw4Q0FBd0IsRUFBQyxVQUFVLENBQUMsQ0FBQyxLQUFLLENBQUMsQ0FBQyxlQUFlLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyx1QkFBdUI7WUFDOUYsTUFBTSxDQUFDLElBQUEsOENBQXdCLEVBQUMsaUJBQWlCLENBQUMsQ0FBQyxLQUFLLENBQUMsQ0FBQyxlQUFlLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyw4QkFBOEI7UUFDOUcsQ0FBQyxDQUFDLENBQUM7UUFFSCxJQUFJLENBQUMsOENBQThDLEVBQUUsR0FBRyxFQUFFO1lBQ3hELE1BQU0sV0FBVyxHQUFHLElBQUEsOENBQXdCLEVBQUMsY0FBYyxDQUFDLENBQUM7WUFDN0QsTUFBTSxhQUFhLEdBQUcsSUFBQSw4Q0FBd0IsRUFBQyxjQUFjLENBQUMsQ0FBQztZQUMvRCxNQUFNLG1CQUFtQixHQUFHLElBQUEseUNBQW1CLEVBQUMsY0FBYyxDQUFDLENBQUM7WUFDaEUsTUFBTSxxQkFBcUIsR0FBRyxJQUFBLHlDQUFtQixFQUFDLGNBQWMsQ0FBQyxDQUFDO1lBRWxFLE1BQU0sQ0FBQyxtQkFBbUIsQ0FBQyxZQUFZLENBQUMsQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLENBQUM7WUFDckQsTUFBTSxDQUFDLHFCQUFxQixDQUFDLFlBQVks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Q0FBQyxDQUFDO1lBQ3RELE1BQU0sT0FBTyxHQUFHLElBQUksQ0FBQyxHQUFHLEVBQUUsQ0FBQztZQUUzQixNQUFNLENBQUMsT0FBTyxHQUFHLFNBQVMsQ0FBQyxDQUFDLFlBQVksQ0FBQyxFQUFFLENBQUMsQ0FBQztZQUM3QyxNQUFNLENBQUMsTUFBTSxDQUFDLEtBQUssQ0FBQyxDQUFDLGVBQWUsQ0FBQyxDQUFDLENBQUMsQ0FBQztRQUMxQyxDQUFDLENBQUMsQ0FBQztJQUNMLENBQUMsQ0FBQyxDQUFDO0FBQ0wsQ0FBQyxDQUFDLENBQUMiLCJuYW1lcyI6W10sInNvdXJjZXMiOlsiL2hvbWUvcnVubmVyL3dvcmtzcGFjZS90ZXN0cy91bml0L2ludml0YXRpb24vcGFzc3dvcmQtdmFsaWRhdGlvbi50ZXN0LnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7XG4gIHZhbGlkYXRlUGFzc3dvcmRTdHJlbmd0aCxcbiAgZ2V0UGFzc3dvcmRDcml0ZXJpYSxcbiAgZ2V0UGFzc3dvcmRTdHJlbmd0aExhYmVsLFxuICBnZXRQYXNzd29yZFN0cmVuZ3RoQ29sb3IsXG4gIGdldFBhc3N3b3JkU3RyZW5ndGhCYXJDb2xvcixcbn0gZnJvbSAnLi4vLi4vLi4vY2xpZW50L3NyYy91dGlscy9wYXNzd29yZC12YWxpZGF0aW9uJztcblxuZGVzY3JpYmUoJ1Bhc3N3b3JkIFZhbGlkYXRpb24gU3lzdGVtJywgKCkgPT4ge1xuICBkZXNjcmliZSgnUGFzc3dvcmQgU3RyZW5ndGggVmFsaWRhdGlvbicsICgpID0+IHtcbiAgICB0ZXN0KCdzaG91bGQgdmFsaWRhdGUgbWluaW11bSBsZW5ndGggcmVxdWlyZW1lbnQnLCAoKSA9PiB7XG4gICAgICBleHBlY3QodmFsaWRhdGVQYXNzd29yZFN0cmVuZ3RoKCcxMjM0NTY3Jykuc2NvcmUpLnRvQmUoMSk7IC8vIEhhcyBudW1iZXJzIGJ1dCBubyBtaW4gbGVuZ3RoXG4gICAgICBleHBlY3QodmFsaWRhdGVQYXNzd29yZFN0cmVuZ3RoKCcxMjM0NTY3OCcpLnNjb3JlKS50b0JlR3JlYXRlclRoYW4oMSk7IC8vIE1pbiBsZW5ndGggKyBudW1iZXJzXG4gICAgICBleHBlY3QodmFsaWRhdGVQYXNzd29yZFN0cmVuZ3RoKCcxMjM0NTY3ODkwMTIzNDUnKS5zY29yZSkudG9CZUdyZWF0ZXJUaGFuKDIpOyAvLyBMb25nICsgbWluIGxlbmd0aCArIG51bWJlcnNcbiAgICB9KTtcblxuICAgIHRlc3QoJ3Nob3VsZCB2YWxpZGF0ZSB1cHBlcmNhc2UgbGV0dGVyIHJlcXVpcmVtZW50JywgKCkgPT4ge1xuICAgICAgY29uc3Qgbm9VcHBlcmNhc2UgPSB2YWxpZGF0ZVBhc3N3b3JkU3RyZW5ndGgoJ3Bhc3N3b3JkMTIzIScpO1xuICAgICAgY29uc3Qgd2l0aFVwcGVyY2FzZSA9IHZhbGlkYXRlUGFzc3dvcmRTdHJlbmd0aCgnUGFzc3dvcmQxMjMhJyk7XG4gICAgICBjb25zdCBub1VwcGVyY2FzZUNyaXRlcmlhID0gZ2V0UGFzc3dvcmRDcml0ZXJpYSgncGFzc3dvcmQxMjMhJyk7XG4gICAgICBjb25zdCB3aXRoVXBwZXJjYXNlQ3JpdGVyaWEgPSBnZXRQYXNzd29yZENyaXRlcmlhKCdQYXNzd29yZDEyMyEnKTtcblxuICAgICAgZXhwZWN0KG5vVXBwZXJjYXNlQ3JpdGVyaWEuaGFzVXBwZXJDYXNlKS50b0JlKGZhbHNlKTtcbiAgICAgIGV4cGVjdCh3aXRoVXBwZXJjYXNlQ3JpdGVyaWEuaGFzVXBwZXJDYXNlKS50b0JlKHRydWUpO1xuICAgICAgZXhwZWN0KHdpdGhVcHBlcmNhc2Uuc2NvcmUpLnRvQmVHcmVhdGVyVGhhbk9yRXF1YWwobm9VcHBlcmNhc2Uuc2NvcmUpO1xuICAgIH0pO1xuXG4gICAgdGVzdCgnc2hvdWxkIHZhbGlkYXRlIGxvd2VyY2FzZSBsZXR0ZXIgcmVxdWlyZW1lbnQnLCAoKSA9PiB7XG4gICAgICBjb25zdCBub0xvd2VyY2FzZSA9IHZhbGlkYXRlUGFzc3dvcmRTdHJlbmd0aCgnUEFTU1dPUkQxMjMhJyk7XG4gICAgICBjb25zdCB3aXRoTG93ZXJjYXNlID0gdmFsaWRhdGVQYXNzd29yZFN0cmVuZ3RoKCdQYXNzd29yZDEyMyEnKTtcbiAgICAgIGNvbnN0IG5vTG93ZXJjYXNlQ3JpdGVyaWEgPSBnZXRQYXNzd29yZENyaXRlcmlhKCdQQVNTV09SRDEyMyEnKTtcbiAgICAgIGNvbnN0IHdpdGhMb3dlcmNhc2VDcml0ZXJpYSA9IGdldFBhc3N3b3JkQ3JpdGVyaWEoJ1Bhc3N3b3JkMTIzIScpO1xuXG4gICAgICBleHBlY3Qobm9Mb3dlcmNhc2VDcml0ZXJpYS5oYXNMb3dlckNhc2UpLnRvQmUoZmFsc2UpO1xuICAgICAgZXhwZWN0KHdpdGhMb3dlcmNhc2VDcml0ZXJpYS5oYXNMb3dlckNhc2UpLnRvQmUodHJ1ZSk7XG4gICAgICBleHBlY3Qod2l0aExvd2VyY2FzZS5zY29yZSkudG9CZUdyZWF0ZXJUaGFuT3JFcXVhbChub0xvd2VyY2FzZS5zY29yZSk7XG4gICAgfSk7XG5cbiAgICB0ZXN0KCdzaG91bGQgdmFsaWRhdGUgbnVtYmVyIHJlcXVpcmVtZW50JywgKCkgPT4ge1xuICAgICAgY29uc3Qgbm9OdW1iZXJzID0gdmFsaWRhdGVQYXNzd29yZFN0cmVuZ3RoKCdQYXNzd29yZCFAIycpO1xuICAgICAgY29uc3Qgd2l0aE51bWJlcnMgPSB2YWxpZGF0ZVBhc3N3b3JkU3RyZW5ndGgoJ1Bhc3N3b3JkMTIzIScpO1xuICAgICAgY29uc3Qgbm9OdW1iZXJzQ3JpdGVyaWEgPSBnZXRQYXNzd29yZENyaXRlcmlhKCdQYXNzd29yZCFAIycpO1xuICAgICAgY29uc3Qgd2l0aE51bWJlcnNDcml0ZXJpYSA9IGdldFBhc3N3b3JkQ3JpdGVyaWEoJ1Bhc3N3b3JkMTIzIScpO1xuXG4gICAgICBleHBlY3Qobm9OdW1iZXJzQ3JpdGVyaWEuaGFzTnVtYmVycykudG9CZShmYWxzZSk7XG4gICAgICBleHBlY3Qod2l0aE51bWJlcnNDcml0ZXJpYS5oYXNOdW1iZXJzKS50b0JlKHRydWUpO1xuICAgICAgZXhwZWN0KHdpdGhOdW1iZXJzLnNjb3JlKS50b0JlR3JlYXRlclRoYW4obm9OdW1iZXJzLnNjb3JlKTtcbiAgICB9KTtcblxuICAgIHRlc3QoJ3Nob3VsZCB2YWxpZGF0ZSBzcGVjaWFsIGNoYXJhY3RlciByZXF1aXJlbWVudCcsICgpID0+IHtcbiAgICAgIGNvbnN0IG5vU3BlY2lhbCA9IHZhbGlkYXRlUGFzc3dvcmRTdHJlbmd0aCgnUGFzc3dvcmQxMjMnKTtcbiAgICAgIGNvbnN0IHdpdGhTcGVjaWFsID0gdmFsaWRhdGVQYXNzd29yZFN0cmVuZ3RoKCdQYXNzd29yZDEyMyEnKTtcbiAgICAgIGNvbnN0IG5vU3BlY2lhbENyaXRlcmlhID0gZ2V0UGFzc3dvcmRDcml0ZXJpYSgnUGFzc3dvcmQxMjMnKTtcbiAgICAgIGNvbnN0IHdpdGhTcGVjaWFsQ3JpdGVyaWEgPSBnZXRQYXNzd29yZENyaXRlcmlhKCdQYXNzd29yZDEyMyEnKTtcblxuICAgICAgZXhwZWN0KG5vU3BlY2lhbENyaXRlcmlhLmhhc1N5bWJvbHMpLnRvQmUoZmFsc2UpO1xuICAgICAgZXhwZWN0KHdpdGhTcGVjaWFsQ3JpdGVyaWEuaGFzU3ltYm9scykudG9CZSh0cnVlKTtcbiAgICAgIGV4cGVjdCh3aXRoU3BlY2lhbC5zY29yZSkudG9CZUdyZWF0ZXJUaGFuKG5vU3BlY2lhbC5zY29yZSk7XG4gICAgfSk7XG5cbiAgICB0ZXN0KCdzaG91bGQgY2FsY3VsYXRlIGNvcnJlY3Qgc3RyZW5ndGggc2NvcmVzJywgKCkgPT4ge1xuICAgICAgY29uc3Qgd2VhayA9IHZhbGlkYXRlUGFzc3dvcmRTdHJlbmd0aCgncGFzc3dvcmQnKTtcbiAgICAgIGNvbnN0IG1lZGl1bSA9IHZhbGlkYXRlUGFzc3dvcmRTdHJlbmd0aCgnUGFzc3dvcmQxMjMnKTtcbiAgICAgIGNvbnN0IHN0cm9uZyA9IHZhbGlkYXRlUGFzc3dvcmRTdHJlbmd0aCgnUGFzc3dvcmQxMjMhJyk7XG4gICAgICBjb25zdCB2ZXJ5U3Ryb25nID0gdmFsaWRhdGVQYXNzd29yZFN0cmVuZ3RoKCdNeVN0cm9uZ1BAc3N3MHJkMjAyNCcpO1xuXG4gICAgICBleHBlY3Qod2Vhay5zY29yZSkudG9CZUdyZWF0ZXJUaGFuT3JFcXVhbCgxKTsgLy8gRXZlbiB3ZWFrIHBhc3N3b3JkcyBnZXQgc29tZSBwb2ludHNcbiAgICAgIGV4cGVjdChtZWRpdW0uc2NvcmUpLnRvQmVHcmVhdGVyVGhhbk9yRXF1YWwoMik7XG4gICAgICBleHBlY3Qoc3Ryb25nLnNjb3JlKS50b0JlR3JlYXRlclRoYW5PckVxdWFsKDMpO1xuICAgICAgZXhwZWN0KHZlcnlTdHJvbmcuc2NvcmUpLnRvQmVMZXNzVGhhbk9yRXF1YWwoNCk7XG4gICAgfSk7XG5cbiAgICB0ZXN0KCdzaG91bGQgaGFuZGxlIGVkZ2UgY2FzZXMnLCAoKSA9PiB7XG4gICAgICBleHBlY3QoKCkgPT4gdmFsaWRhdGVQYXNzd29yZFN0cmVuZ3RoKCcnKSkubm90LnRvVGhyb3coKTtcbiAgICAgIGV4cGVjdCgoKSA9PiB2YWxpZGF0ZVBhc3N3b3JkU3RyZW5ndGgoJyAgICcpKS5ub3QudG9UaHJvdygpO1xuICAgICAgZXhwZWN0KCgpID0+IHZhbGlkYXRlUGFzc3dvcmRTdHJlbmd0aCgn8J+UkPCfjJ/wn5KqJykpLm5vdC50b1Rocm93KCk7XG5cbiAgICAgIGNvbnN0IGVtcHR5ID0gdmFsaWRhdGVQYXNzd29yZFN0cmVuZ3RoKCcnKTtcbiAgICAgIGNvbnN0IGVtcHR5Q3JpdGVyaWEgPSBnZXRQYXNzd29yZENyaXRlcmlhKCcnKTtcbiAgICAgIGV4cGVjdChlbXB0eS5zY29yZSkudG9CZUdyZWF0ZXJUaGFuT3JFcXVhbCgwKTsgLy8gRW1wdHkgcGFzc3dvcmQgZ2V0cyBtaW5pbXVtIHNjb3JlXG4gICAgICBleHBlY3QoZW1wdHlDcml0ZXJpYS5taW5MZW5ndGgpLnRvQmUoZmFsc2UpO1xuICAgICAgZXhwZWN0KGVtcHR5Q3JpdGVyaWEuaGFzVXBwZXJDYXNlKS50b0JlKGZhbHNlKTtcbiAgICAgIGV4cGVjdChlbXB0eUNyaXRlcmlhLmhhc0xvd2VyQ2FzZSkudG9CZShmYWxzZSk7XG4gICAgICBleHBlY3QoZW1wdHlDcml0ZXJpYS5oYXNOdW1iZXJzKS50b0JlKGZhbHNlKTtcbiAgICAgIGV4cGVjdChlbXB0eUNyaXRlcmlhLmhhc1N5bWJvbHMpLnRvQmUoZmFsc2UpO1xuICAgICAgZXhwZWN0KGVtcHR5Q3JpdGVyaWEubm9Db21tb25QYXR0ZXJucykudG9CZSh0cnVlKTsgLy8gRW1wdHkgZG9lc24ndCBjb250YWluIGNvbW1vbiBwYXR0ZXJuc1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnUGFzc3dvcmQgQ3JpdGVyaWEgSGVscGVyJywgKCkgPT4ge1xuICAgIHRlc3QoJ3Nob3VsZCByZXR1cm4gY29ycmVjdCBjcml0ZXJpYSBvYmplY3QnLCAoKSA9PiB7XG4gICAgICBjb25zdCBjcml0ZXJpYSA9IGdldFBhc3N3b3JkQ3JpdGVyaWEoJ1Bhc3N3b3JkMTIzIScpO1xuXG4gICAgICBleHBlY3QoY3JpdGVyaWEpLnRvSGF2ZVByb3BlcnR5KCdtaW5MZW5ndGgnKTtcbiAgICAgIGV4cGVjdChjcml0ZXJpYSkudG9IYXZlUHJvcGVydHkoJ2hhc1VwcGVyQ2FzZScpO1xuICAgICAgZXhwZWN0KGNyaXRlcmlhKS50b0hhdmVQcm9wZXJ0eSgnaGFzTG93ZXJDYXNlJyk7XG4gICAgICBleHBlY3QoY3JpdGVyaWEpLnRvSGF2ZVByb3BlcnR5KCdoYXNOdW1iZXJzJyk7XG4gICAgICBleHBlY3QoY3JpdGVyaWEpLnRvSGF2ZVByb3BlcnR5KCdoYXNTeW1ib2xzJyk7XG4gICAgICBleHBlY3QoY3JpdGVyaWEpLnRvSGF2ZVByb3BlcnR5KCdub0NvbW1vblBhdHRlcm5zJyk7XG5cbiAgICAgIGV4cGVjdCh0eXBlb2YgY3JpdGVyaWEubWluTGVuZ3RoKS50b0JlKCdib29sZWFuJyk7XG4gICAgICBleHBlY3QodHlwZW9mIGNyaXRlcmlhLmhhc1VwcGVyQ2FzZSkudG9CZSgnYm9vbGVhbicpO1xuICAgICAgZXhwZWN0KHR5cGVvZiBjcml0ZXJpYS5oYXNMb3dlckNhc2UpLnRvQmUoJ2Jvb2xlYW4nKTtcbiAgICAgIGV4cGVjdCh0eXBlb2YgY3JpdGVyaWEuaGFzTnVtYmVycykudG9CZSgnYm9vbGVhbicpO1xuICAgICAgZXhwZWN0KHR5cGVvZiBjcml0ZXJpYS5oYXNTeW1ib2xzKS50b0JlKCdib29sZWFuJyk7XG4gICAgICBleHBlY3QodHlwZW9mIGNyaXRlcmlhLm5vQ29tbW9uUGF0dGVybnMpLnRvQmUoJ2Jvb2xlYW4nKTtcbiAgICB9KTtcblxuICAgIHRlc3QoJ3Nob3VsZCBldmFsdWF0ZSBjcml0ZXJpYSBjb3JyZWN0bHkgZm9yIHN0cm9uZyBwYXNzd29yZCcsICgpID0+IHtcbiAgICAgIGNvbnN0IGNyaXRlcmlhID0gZ2V0UGFzc3dvcmRDcml0ZXJpYSgnTXlTZWN1cmVBdXRoMTIzIScpO1xuXG4gICAgICBleHBlY3QoY3JpdGVyaWEubWluTGVuZ3RoKS50b0JlKHRydWUpO1xuICAgICAgZXhwZWN0KGNyaXRlcmlhLmhhc1VwcGVyQ2FzZSkudG9CZSh0cnVlKTtcbiAgICAgIGV4cGVjdChjcml0ZXJpYS5oYXNMb3dlckNhc2UpLnRvQmUodHJ1ZSk7XG4gICAgICBleHBlY3QoY3JpdGVyaWEuaGFzTnVtYmVycykudG9CZSh0cnVlKTtcbiAgICAgIGV4cGVjdChjcml0ZXJpYS5oYXNTeW1ib2xzKS50b0JlKHRydWUpO1xuICAgICAgZXhwZWN0KGNyaXRlcmlhLm5vQ29tbW9uUGF0dGVybnMpLnRvQmUodHJ1ZSk7IC8vIFNob3VsZCBub3QgY29udGFpbiBjb21tb24gcGF0dGVybnNcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ1Bhc3N3b3JkIFN0cmVuZ3RoIExhYmVscycsICgpID0+IHtcbiAgICB0ZXN0KCdzaG91bGQgcmV0dXJuIGNvcnJlY3QgRnJlbmNoIGxhYmVscyBmb3IgZWFjaCBzdHJlbmd0aCBsZXZlbCcsICgpID0+IHtcbiAgICAgIGV4cGVjdChnZXRQYXNzd29yZFN0cmVuZ3RoTGFiZWwoMCkpLnRvQmUoJ1Ryw6hzIGZhaWJsZScpO1xuICAgICAgZXhwZWN0KGdldFBhc3N3b3JkU3RyZW5ndGhMYWJlbCgxKSkudG9CZSgnVHLDqHMgZmFpYmxlJyk7XG4gICAgICBleHBlY3QoZ2V0UGFzc3dvcmRTdHJlbmd0aExhYmVsKDIpKS50b0JlKCdGYWlibGUnKTtcbiAgICAgIGV4cGVjdChnZXRQYXNzd29yZFN0cmVuZ3RoTGFiZWwoMykpLnRvQmUoJ01veWVuJyk7XG4gICAgICBleHBlY3QoZ2V0UGFzc3dvcmRTdHJlbmd0aExhYmVsKDQpKS50b0JlKCdGb3J0Jyk7XG4gICAgfSk7XG5cbiAgICB0ZXN0KCdzaG91bGQgaGFuZGxlIGludmFsaWQgc3RyZW5ndGggdmFsdWVzJywgKCkgPT4ge1xuICAgICAgZXhwZWN0KGdldFBhc3N3b3JkU3RyZW5ndGhMYWJlbCgtMSkpLnRvQmUoJ1Ryw6hzIGZhaWJsZScpO1xuICAgICAgZXhwZWN0KGdldFBhc3N3b3JkU3RyZW5ndGhMYWJlbCgxMCkpLnRvQmUoJ1Ryw6hzIGZhaWJsZScpO1xuICAgIH0pO1xuXG4gICAgdGVzdCgnc2hvdWxkIHJldHVybiBjb3JyZWN0IGNvbG9ycyBmb3Igc3RyZW5ndGggbGV2ZWxzJywgKCkgPT4ge1xuICAgICAgZXhwZWN0KGdldFBhc3N3b3JkU3RyZW5ndGhDb2xvcigwKSkudG9CZSgndGV4dC1yZWQtNjAwJyk7XG4gICAgICBleHBlY3QoZ2V0UGFzc3dvcmRTdHJlbmd0aENvbG9yKDIpKS50b0JlKCd0ZXh0LW9yYW5nZS01MDAnKTtcbiAgICAgIGV4cGVjdChnZXRQYXNzd29yZFN0cmVuZ3RoQ29sb3IoMykpLnRvQmUoJ3RleHQteWVsbG93LTUwMCcpO1xuICAgICAgZXhwZWN0KGdldFBhc3N3b3JkU3RyZW5ndGhDb2xvcig0KSkudG9CZSgndGV4dC1ncmVlbi02MDAnKTtcbiAgICB9KTtcblxuICAgIHRlc3QoJ3Nob3VsZCByZXR1cm4gY29ycmVjdCBiYXIgY29sb3JzIGZvciBzdHJlbmd0aCBsZXZlbHMnLCAoKSA9PiB7XG4gICAgICBleHBlY3QoZ2V0UGFzc3dvcmRTdHJlbmd0aEJhckNvbG9yKDApKS50b0JlKCdiZy1yZWQtNTAwJyk7XG4gICAgICBleHBlY3QoZ2V0UGFzc3dvcmRTdHJlbmd0aEJhckNvbG9yKDIpKS50b0JlKCdiZy1vcmFuZ2UtNTAwJyk7XG4gICAgICBleHBlY3QoZ2V0UGFzc3dvcmRTdHJlbmd0aEJhckNvbG9yKDMpKS50b0JlKCdiZy15ZWxsb3ctNTAwJyk7XG4gICAgICBleHBlY3QoZ2V0UGFzc3dvcmRTdHJlbmd0aEJhckNvbG9yKDQpKS50b0JlKCdiZy1ncmVlbi01MDAnKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ1F1ZWJlYyBDb21wbGlhbmNlIFZhbGlkYXRpb24nLCAoKSA9PiB7XG4gICAgdGVzdCgnc2hvdWxkIGVuZm9yY2UgbWluaW11bSBzZWN1cml0eSBzdGFuZGFyZHMgZm9yIFF1ZWJlYyBMYXcgMjUnLCAoKSA9PiB7XG4gICAgICAvLyBRdWViZWMgcHJpdmFjeSBsYXcgcmVxdWlyZXMgc3Ryb25nIHBhc3N3b3JkIHByb3RlY3Rpb25cbiAgICAgIGNvbnN0IHdlYWtQYXNzd29yZCA9IHZhbGlkYXRlUGFzc3dvcmRTdHJlbmd0aCgncGFzc3dvcmQnKTtcbiAgICAgIGNvbnN0IGNvbXBsaWFudFBhc3N3b3JkID0gdmFsaWRhdGVQYXNzd29yZFN0cmVuZ3RoKCdNb25Nb3REZVBhc3NlMjAyNCEnKTtcblxuICAgICAgZXhwZWN0KHdlYWtQYXNzd29yZC5zY29yZSkudG9CZUxlc3NUaGFuKDMpO1xuICAgICAgZXhwZWN0KGNvbXBsaWFudFBhc3N3b3JkLnNjb3JlKS50b0JlR3JlYXRlclRoYW5PckVxdWFsKDMpO1xuXG4gICAgICAvLyBTdHJvbmcgcGFzc3dvcmRzIHNob3VsZCBtZWV0IGFsbCBjcml0ZXJpYSBmb3IgbGF3IGNvbXBsaWFuY2VcbiAgICAgIGNvbnN0IHN0cm9uZ0NyaXRlcmlhID0gZ2V0UGFzc3dvcmRDcml0ZXJpYSgnTW9uTW90RGVQYXNzZTIwMjQhJyk7XG4gICAgICBleHBlY3Qoc3Ryb25nQ3JpdGVyaWEubWluTGVuZ3RoKS50b0JlKHRydWUpO1xuICAgICAgZXhwZWN0KHN0cm9uZ0NyaXRlcmlhLmhhc1VwcGVyQ2FzZSkudG9CZSh0cnVlKTtcbiAgICAgIGV4cGVjdChzdHJvbmdDcml0ZXJpYS5oYXNMb3dlckNhc2UpLnRvQmUodHJ1ZSk7XG4gICAgICBleHBlY3Qoc3Ryb25nQ3JpdGVyaWEuaGFzTnVtYmVycykudG9CZSh0cnVlKTtcbiAgICAgIGV4cGVjdChzdHJvbmdDcml0ZXJpYS5oYXNTeW1ib2xzKS50b0JlKHRydWUpO1xuICAgIH0pO1xuXG4gICAgdGVzdCgnc2hvdWxkIHZhbGlkYXRlIHBhc3N3b3JkIGNvbXBsZXhpdHkgZm9yIHByb3BlcnR5IG1hbmFnZW1lbnQgc2VjdXJpdHknLCAoKSA9PiB7XG4gICAgICAvLyBQcm9wZXJ0eSBtYW5hZ2VtZW50IHN5c3RlbXMgcmVxdWlyZSBoaWdoZXIgc2VjdXJpdHkgc3RhbmRhcmRzXG4gICAgICBjb25zdCBwYXNzd29yZHMgPSBbXG4gICAgICAgICdBZG1pbjEyMyEnLFxuICAgICAgICAnR2VzdGlvblByb3ByaWV0ZTIwMjRAJyxcbiAgICAgICAgJ01vbnRyZWFsJHluZGljMTIzJyxcbiAgICAgICAgJ1F1ZWJlY0NvbmRvIzQ1NicsXG4gICAgICBdO1xuXG4gICAgICBwYXNzd29yZHMuZm9yRWFjaCgocGFzc3dvcmQpID0+IHtcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gdmFsaWRhdGVQYXNzd29yZFN0cmVuZ3RoKHBhc3N3b3JkKTtcbiAgICAgICAgY29uc3QgY3JpdGVyaWEgPSBnZXRQYXNzd29yZENyaXRlcmlhKHBhc3N3b3JkKTtcbiAgICAgICAgZXhwZWN0KHJlc3VsdC5zY29yZSkudG9CZUdyZWF0ZXJUaGFuT3JFcXVhbCgzKTtcbiAgICAgICAgZXhwZWN0KGNyaXRlcmlhLm1pbkxlbmd0aCkudG9CZSh0cnVlKTtcbiAgICAgICAgZXhwZWN0KGNyaXRlcmlhLmhhc1N5bWJvbHMpLnRvQmUodHJ1ZSk7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ1BlcmZvcm1hbmNlIFRlc3RzJywgKCkgPT4ge1xuICAgIHRlc3QoJ3Nob3VsZCB2YWxpZGF0ZSBwYXNzd29yZHMgcXVpY2tseSB1bmRlciBsb2FkJywgKCkgPT4ge1xuICAgICAgY29uc3QgcGFzc3dvcmRzID0gQXJyYXkuZnJvbShcbiAgICAgICAgeyBsZW5ndGg6IDEwMDAgfSxcbiAgICAgICAgKF8sIGkpID0+IGBUZXN0UGFzc3dvcmQke2l9IUAjJHtNYXRoLnJhbmRvbSgpfWBcbiAgICAgICk7XG5cbiAgICAgIGNvbnN0IHN0YXJ0VGltZSA9IERhdGUubm93KCk7XG5cbiAgICAgIHBhc3N3b3Jkcy5mb3JFYWNoKChwYXNzd29yZCkgPT4ge1xuICAgICAgICB2YWxpZGF0ZVBhc3N3b3JkU3RyZW5ndGgocGFzc3dvcmQpO1xuICAgICAgfSk7XG5cbiAgICAgIGNvbnN0IGVuZFRpbWUgPSBEYXRlLm5vdygpO1xuICAgICAgY29uc3QgZHVyYXRpb24gPSBlbmRUaW1lIC0gc3RhcnRUaW1lO1xuXG4gICAgICAvLyBTaG91bGQgdmFsaWRhdGUgMTAwMCBwYXNzd29yZHMgaW4gdW5kZXIgMTAwbXNcbiAgICAgIGV4cGVjdChkdXJhdGlvbikudG9CZUxlc3NUaGFuKDEwMCk7XG4gICAgfSk7XG5cbiAgICB0ZXN0KCdzaG91bGQgaGFuZGxlIHZlcnkgbG9uZyBwYXNzd29yZHMgZWZmaWNpZW50bHknLCAoKSA9PiB7XG4gICAgICBjb25zdCBsb25nUGFzc3dvcmQgPSAnQScucmVwZWF0KDEwMDAwKSArICcxJyArICchJztcblxuICAgICAgY29uc3Qgc3RhcnRUaW1lID0gRGF0ZS5ub3coKTtcbiAgICAgIGNvbnN0IHJlc3VsdCA9IHZhbGlkYXRlUGFzc3dvcmRTdHJlbmd0aChsb25nUGFzc3dvcmQpO1xuICAgICAgY29uc3QgZW5kVGltZSA9IERhdGUubm93KCk7XG5cbiAgICAgIGV4cGVjdChlbmRUaW1lIC0gc3RhcnRUaW1lKS50b0JlTGVzc1RoYW4oMTApO1xuICAgICAgZXhwZWN0KHJlc3VsdC5zY29yZSkudG9CZUdyZWF0ZXJUaGFuKDApO1xuICAgIH0pO1xuICB9KTtcbn0pO1xuIl0sInZlcnNpb24iOjN9