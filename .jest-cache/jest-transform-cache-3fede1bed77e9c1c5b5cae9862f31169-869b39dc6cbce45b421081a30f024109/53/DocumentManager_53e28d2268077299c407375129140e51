4ff9cca4cee4e0af2ebe79af56ba6a3b
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.default = DocumentManager;
const jsx_runtime_1 = require("react/jsx-runtime");
const react_1 = require("react");
const react_query_1 = require("@tanstack/react-query");
const card_1 = require("@/components/ui/card");
const button_1 = require("@/components/ui/button");
const badge_1 = require("@/components/ui/badge");
const input_1 = require("@/components/ui/input");
const label_1 = require("@/components/ui/label");
const textarea_1 = require("@/components/ui/textarea");
const select_1 = require("@/components/ui/select");
const dialog_1 = require("@/components/ui/dialog");
const form_1 = require("@/components/ui/form");
const use_toast_1 = require("@/hooks/use-toast");
const react_hook_form_1 = require("react-hook-form");
const zod_1 = require("@hookform/resolvers/zod");
const zod_2 = require("zod");
const queryClient_1 = require("@/lib/queryClient");
const lucide_react_1 = require("lucide-react");
const header_1 = require("@/components/layout/header");
const wouter_1 = require("wouter");
const documents_1 = require("@/lib/documents");
const AttachedFileSection_1 = require("./AttachedFileSection");
const createDocumentSchema = (type) => {
    const documentCategories = type === 'building' ? documents_1.BUILDING_DOCUMENT_CATEGORIES : documents_1.RESIDENCE_DOCUMENT_CATEGORIES;
    const validTypes = documentCategories.map((cat) => cat._value);
    const baseSchema = {
        name: zod_2.z.string().min(1, 'Document name is required (example: Monthly Meeting Minutes - January 2025)').max(255, 'Document name must be less than 255 characters'),
        description: zod_2.z.string().max(500, 'Description must be less than 500 characters').optional(),
        documentType: zod_2.z.enum(validTypes),
        isVisibleToTenants: zod_2.z.boolean().default(false),
    };
    if (type === 'building') {
        return zod_2.z.object({
            ...baseSchema,
            buildingId: zod_2.z.string().min(1, 'Building selection is required'),
        });
    }
    else {
        return zod_2.z.object({
            ...baseSchema,
            residenceId: zod_2.z.string().min(1, 'Residence selection is required'),
        });
    }
};
function DocumentManager({ config }) {
    const { toast } = (0, use_toast_1.useToast)();
    const queryClient = (0, react_query_1.useQueryClient)();
    const [, navigate] = (0, wouter_1.useLocation)();
    // State management
    const [isUploadDialogOpen, setIsUploadDialogOpen] = (0, react_1.useState)(false);
    const [isViewDialogOpen, setIsViewDialogOpen] = (0, react_1.useState)(false);
    const [createMode, setCreateMode] = (0, react_1.useState)('file');
    const [textContent, setTextContent] = (0, react_1.useState)('');
    const [isEditMode, setIsEditMode] = (0, react_1.useState)(false);
    const [selectedDocument, setSelectedDocument] = (0, react_1.useState)(null);
    const [selectedFile, setSelectedFile] = (0, react_1.useState)(null);
    const [searchTerm, setSearchTerm] = (0, react_1.useState)('');
    const [selectedCategory, setSelectedCategory] = (0, react_1.useState)('all');
    const [selectedYear, setSelectedYear] = (0, react_1.useState)('all');
    const [currentPage, setCurrentPage] = (0, react_1.useState)(1);
    const [isTextEditorOpen, setIsTextEditorOpen] = (0, react_1.useState)(false);
    const [textEditorDocument, setTextEditorDocument] = (0, react_1.useState)(null);
    const itemsPerPage = 12;
    const documentSchema = createDocumentSchema(config.type);
    const documentCategories = config.type === 'building' ? documents_1.BUILDING_DOCUMENT_CATEGORIES : documents_1.RESIDENCE_DOCUMENT_CATEGORIES;
    // Form setup
    const form = (0, react_hook_form_1.useForm)({
        resolver: (0, zod_1.zodResolver)(documentSchema),
        defaultValues: {
            name: '',
            description: '',
            documentType: 'other',
            ...(config.type === 'building'
                ? { buildingId: config.entityId }
                : { residenceId: config.entityId }),
            isVisibleToTenants: false,
        },
    });
    // API queries and mutations
    const queryKey = config.type === 'building'
        ? [`/api/documents?buildingId=${config.entityId}`]
        : [`/api/documents?residenceId=${config.entityId}`];
    const { data: entity } = (0, react_query_1.useQuery)({
        queryKey: config.type === 'building'
            ? ['/api/manager/buildings', config.entityId]
            : ['/api/residences', config.entityId],
        enabled: !!config.entityId,
    });
    const { data: documents = [], isLoading: documentsLoading } = (0, react_query_1.useQuery)({
        queryKey,
        enabled: !!config.entityId,
        queryFn: async () => {
            const response = await fetch(queryKey[0], {
                credentials: 'include',
            });
            if (!response.ok) {
                throw new Error(`HTTP ${response.status}: ${response.statusText}`);
            }
            const data = await response.json();
            // The API returns {documents: Array, total: number, ...} but we need just the documents array
            return data.documents || [];
        },
    });
    // Filter and group documents
    const filteredDocuments = (0, react_1.useMemo)(() => {
        const filtered = documents.filter((doc) => {
            const matchesSearch = doc.name.toLowerCase().includes(searchTerm.toLowerCase());
            const matchesCategory = selectedCategory === 'all' || doc.documentType === selectedCategory;
            const matchesYear = selectedYear === 'all' || new Date(doc.createdAt).getFullYear().toString() === selectedYear;
            return matchesSearch && matchesCategory && matchesYear;
        });
        return filtered;
    }, [documents, searchTerm, selectedCategory, selectedYear]);
    const documentsByCategory = (0, react_1.useMemo)(() => {
        const grouped = {};
        documentCategories.forEach((category) => {
            grouped[category._value] = filteredDocuments.filter((doc) => doc.documentType === category._value);
        });
        return grouped;
    }, [filteredDocuments, documentCategories]);
    // Create mutation (supports both file upload and text-only)
    const createMutation = (0, react_query_1.useMutation)({
        mutationFn: async (data) => {
            if (createMode === 'file') {
                if (!selectedFile) {
                    throw new Error('No file selected');
                }
                const formData = new FormData();
                formData.append('file', selectedFile);
                formData.append('name', data.name);
                formData.append('description', data.description || '');
                formData.append('documentType', data.documentType);
                formData.append('isVisibleToTenants', data.isVisibleToTenants.toString());
                if (data.residenceId) {
                    formData.append('residenceId', data.residenceId);
                }
                if (data.buildingId) {
                    formData.append('buildingId', data.buildingId);
                }
                const response = await fetch('/api/documents/upload', {
                    method: 'POST',
                    body: formData,
                });
                if (!response.ok) {
                    throw new Error('Internal server error');
                }
                return response.json();
            }
            else {
                // Text-only document creation
                const payload = {
                    name: data.name,
                    description: data.description || '',
                    documentType: data.documentType,
                    isVisibleToTenants: data.isVisibleToTenants,
                    textContent: textContent,
                    ...(data.residenceId ? { residenceId: data.residenceId } : {}),
                    ...(data.buildingId ? { buildingId: data.buildingId } : {}),
                };
                return (0, queryClient_1.apiRequest)('POST', '/api/documents', payload);
            }
        },
        onSuccess: () => {
            toast({
                title: 'Success',
                description: createMode === 'file' ? 'Document uploaded successfully' : 'Document created successfully',
            });
            queryClient.invalidateQueries({ queryKey });
            setIsUploadDialogOpen(false);
            form.reset();
            setSelectedFile(null);
            setTextContent('');
            setCreateMode('file');
        },
        onError: (error) => {
            toast({
                title: 'Error',
                description: error.message || (createMode === 'file' ? 'Failed to upload document' : 'Failed to create document'),
                variant: 'destructive',
            });
        },
    });
    // Delete mutation
    const deleteMutation = (0, react_query_1.useMutation)({
        mutationFn: async (documentId) => {
            return (0, queryClient_1.apiRequest)('DELETE', `/api/documents/${documentId}`);
        },
        onSuccess: () => {
            toast({
                title: 'Success',
                description: 'Document deleted successfully',
            });
            queryClient.invalidateQueries({ queryKey });
        },
        onError: (error) => {
            toast({
                title: 'Error',
                description: error.message || 'Failed to delete document',
                variant: 'destructive',
            });
        },
    });
    // Event handlers
    const handleCreateDocument = async (data) => {
        await createMutation.mutateAsync(data);
    };
    const handleDeleteDocument = async (document) => {
        if (window.confirm('Are you sure you want to delete this document?')) {
            await deleteMutation.mutateAsync(document.id);
        }
    };
    const handleViewDocument = (document) => {
        setSelectedDocument(document);
        // Reset form with document values for editing
        form.reset({
            name: document.name,
            description: document.description || '',
            documentType: document.documentType,
            ...(config.type === 'building'
                ? { buildingId: document.buildingId || config.entityId }
                : { residenceId: document.residenceId || config.entityId }),
            isVisibleToTenants: document.isVisibleToTenants || false,
        });
        setIsEditMode(true);
        setIsViewDialogOpen(true);
    };
    const handleDownloadDocument = (document) => {
        if (document.filePath) {
            const link = window.document.createElement('a');
            link.href = `/api/documents/${document.id}/file?download=true`;
            link.download = document.fileName || document.name;
            window.document.body.appendChild(link);
            link.click();
            window.document.body.removeChild(link);
        }
    };
    const formatDate = (dateString) => {
        return new Date(dateString).toLocaleDateString();
    };
    const formatFileSize = (bytes) => {
        if (!bytes)
            return 'Unknown size';
        const sizes = ['Bytes', 'KB', 'MB', 'GB'];
        const i = Math.floor(Math.log(bytes) / Math.log(1024));
        return Math.round((bytes / Math.pow(1024, i)) * 100) / 100 + ' ' + sizes[i];
    };
    if (!config.entityId) {
        return ((0, jsx_runtime_1.jsxs)("div", { className: 'flex-1 flex flex-col overflow-hidden', children: [(0, jsx_runtime_1.jsx)(header_1.Header, { title: `${config.type === 'building' ? 'Building' : 'Residence'} Documents`, subtitle: 'Entity ID is required' }), (0, jsx_runtime_1.jsx)("div", { className: 'flex-1 overflow-auto p-6', children: (0, jsx_runtime_1.jsx)(card_1.Card, { children: (0, jsx_runtime_1.jsxs)(card_1.CardContent, { className: 'flex flex-col items-center justify-center py-12', children: [(0, jsx_runtime_1.jsx)(lucide_react_1.Building, { className: 'h-12 w-12 text-gray-400 mb-4' }), (0, jsx_runtime_1.jsxs)("h3", { className: 'text-lg font-medium text-gray-900 mb-2', children: [config.type === 'building' ? 'Building' : 'Residence', " ID Required"] }), (0, jsx_runtime_1.jsxs)("p", { className: 'text-gray-500', children: ["Please provide a ", config.type, " ID to view documents."] })] }) }) })] }));
    }
    const entityNotFound = config.entityId && !entity && !documentsLoading;
    if (entityNotFound) {
        return ((0, jsx_runtime_1.jsxs)("div", { className: 'flex-1 flex flex-col overflow-hidden', children: [(0, jsx_runtime_1.jsx)(header_1.Header, { title: `${config.type === 'building' ? 'Building' : 'Residence'} Not Found`, subtitle: `The ${config.type} ID provided does not exist` }), (0, jsx_runtime_1.jsx)("div", { className: 'flex-1 overflow-auto p-6', children: (0, jsx_runtime_1.jsx)(card_1.Card, { children: (0, jsx_runtime_1.jsxs)(card_1.CardContent, { className: 'flex flex-col items-center justify-center py-12', children: [(0, jsx_runtime_1.jsx)(lucide_react_1.Building, { className: 'h-12 w-12 text-gray-400 mb-4' }), (0, jsx_runtime_1.jsxs)("h3", { className: 'text-lg font-medium text-gray-900 mb-2', children: [config.type === 'building' ? 'Building' : 'Residence', " Not Found"] }), (0, jsx_runtime_1.jsxs)("p", { className: 'text-gray-500', children: ["The ", config.type, " with ID \"", config.entityId, "\" does not exist or you don't have access to it."] }), (0, jsx_runtime_1.jsxs)(button_1.Button, { variant: 'outline', className: 'mt-4', onClick: () => navigate(`/${config.userRole}s/${config.type}s`), children: ["Back to ", config.type === 'building' ? 'Buildings' : 'Residences'] })] }) }) })] }));
    }
    return ((0, jsx_runtime_1.jsxs)("div", { className: 'flex-1 flex flex-col overflow-hidden', children: [(0, jsx_runtime_1.jsx)(header_1.Header, { title: `${config.type === 'building' ? entity?.name || 'Building' : entity?.unitNumber ? `Unit ${entity.unitNumber}` : 'Residence'} Documents`, subtitle: `${config.userRole === 'manager' ? 'Manage' : 'View'} documents for ${config.type === 'building' ? entity?.name || 'this building' : entity?.unitNumber ? `Unit ${entity.unitNumber}` : 'this residence'}` }), (0, jsx_runtime_1.jsx)("div", { className: 'flex-1 overflow-auto p-6', children: (0, jsx_runtime_1.jsxs)("div", { className: 'max-w-7xl mx-auto', children: [config.userRole === 'resident' && ((0, jsx_runtime_1.jsx)("div", { className: 'mb-6', children: (0, jsx_runtime_1.jsxs)(button_1.Button, { variant: 'ghost', onClick: () => navigate(`/${config.userRole}s/${config.type}s`), className: 'flex items-center gap-2', children: [(0, jsx_runtime_1.jsx)(lucide_react_1.ArrowLeft, { className: 'w-4 h-4' }), "Back to ", config.type === 'building' ? 'Building' : 'Residence'] }) })), (0, jsx_runtime_1.jsxs)("div", { className: 'mb-6', children: [(0, jsx_runtime_1.jsxs)("div", { className: 'flex flex-col sm:flex-row gap-4 mb-4', children: [(0, jsx_runtime_1.jsxs)("div", { className: 'relative flex-1', children: [(0, jsx_runtime_1.jsx)(lucide_react_1.Search, { className: 'absolute left-3 top-3 h-4 w-4 text-gray-400' }), (0, jsx_runtime_1.jsx)(input_1.Input, { placeholder: 'Search documents...', value: searchTerm, onChange: (e) => setSearchTerm(e.target.value), className: 'pl-10', "data-testid": 'input-search' })] }), (0, jsx_runtime_1.jsxs)(select_1.Select, { value: selectedCategory, onValueChange: setSelectedCategory, children: [(0, jsx_runtime_1.jsx)(select_1.SelectTrigger, { className: 'w-full sm:w-48', "data-testid": 'select-category', children: (0, jsx_runtime_1.jsx)(select_1.SelectValue, { placeholder: 'All Categories' }) }), (0, jsx_runtime_1.jsxs)(select_1.SelectContent, { children: [(0, jsx_runtime_1.jsx)(select_1.SelectItem, { value: 'all', children: "All Categories" }), documentCategories.map((category) => ((0, jsx_runtime_1.jsx)(select_1.SelectItem, { value: category._value, children: category.label }, category._value)))] })] })] }), (config.allowUpload || config.allowCreate) && ((0, jsx_runtime_1.jsxs)("div", { className: 'flex justify-between items-center', children: [(0, jsx_runtime_1.jsx)("div", {}), (0, jsx_runtime_1.jsxs)(dialog_1.Dialog, { open: isUploadDialogOpen, onOpenChange: setIsUploadDialogOpen, children: [(0, jsx_runtime_1.jsx)(dialog_1.DialogTrigger, { asChild: true, children: (0, jsx_runtime_1.jsxs)(button_1.Button, { "data-testid": 'button-upload', children: [(0, jsx_runtime_1.jsx)(lucide_react_1.Plus, { className: 'w-4 h-4 mr-2' }), "Upload Document"] }) }), (0, jsx_runtime_1.jsxs)(dialog_1.DialogContent, { className: 'max-w-md max-h-[90vh] overflow-y-auto', children: [(0, jsx_runtime_1.jsxs)(dialog_1.DialogHeader, { children: [(0, jsx_runtime_1.jsx)(dialog_1.DialogTitle, { children: "Create New Document" }), (0, jsx_runtime_1.jsxs)(dialog_1.DialogDescription, { children: ["Add a new document to this ", config.type, ". You can attach a file or create a text-only document entry."] })] }), (0, jsx_runtime_1.jsx)(form_1.Form, { ...form, children: (0, jsx_runtime_1.jsxs)("form", { onSubmit: form.handleSubmit(handleCreateDocument), className: 'space-y-6', children: [(0, jsx_runtime_1.jsxs)("div", { className: 'space-y-4', children: [(0, jsx_runtime_1.jsx)(form_1.FormField, { control: form.control, name: 'name', render: ({ field }) => ((0, jsx_runtime_1.jsxs)(form_1.FormItem, { children: [(0, jsx_runtime_1.jsx)(form_1.FormLabel, { children: "Document Name" }), (0, jsx_runtime_1.jsx)(form_1.FormControl, { children: (0, jsx_runtime_1.jsx)(input_1.Input, { ...field, "data-testid": 'input-document-name' }) }), (0, jsx_runtime_1.jsx)(form_1.FormMessage, {})] })) }), (0, jsx_runtime_1.jsx)(form_1.FormField, { control: form.control, name: 'description', render: ({ field }) => ((0, jsx_runtime_1.jsxs)(form_1.FormItem, { children: [(0, jsx_runtime_1.jsx)(form_1.FormLabel, { children: "Description (Optional)" }), (0, jsx_runtime_1.jsx)(form_1.FormControl, { children: (0, jsx_runtime_1.jsx)(input_1.Input, { ...field, "data-testid": 'input-description' }) }), (0, jsx_runtime_1.jsx)(form_1.FormMessage, {})] })) }), (0, jsx_runtime_1.jsx)(form_1.FormField, { control: form.control, name: 'documentType', render: ({ field }) => ((0, jsx_runtime_1.jsxs)(form_1.FormItem, { children: [(0, jsx_runtime_1.jsx)(form_1.FormLabel, { children: "Document Category" }), (0, jsx_runtime_1.jsxs)(select_1.Select, { onValueChange: field.onChange, value: field.value, children: [(0, jsx_runtime_1.jsx)(form_1.FormControl, { children: (0, jsx_runtime_1.jsx)(select_1.SelectTrigger, { "data-testid": 'select-document-type', children: (0, jsx_runtime_1.jsx)(select_1.SelectValue, { placeholder: 'Select category' }) }) }), (0, jsx_runtime_1.jsx)(select_1.SelectContent, { children: documentCategories.map((category) => ((0, jsx_runtime_1.jsx)(select_1.SelectItem, { value: category._value, children: category.label }, category._value))) })] }), (0, jsx_runtime_1.jsx)(form_1.FormMessage, {})] })) }), config.showVisibilityToggle && ((0, jsx_runtime_1.jsx)(form_1.FormField, { control: form.control, name: 'isVisibleToTenants', render: ({ field }) => ((0, jsx_runtime_1.jsxs)(form_1.FormItem, { className: 'flex flex-row items-center space-x-3 space-y-0', children: [(0, jsx_runtime_1.jsx)(form_1.FormControl, { children: (0, jsx_runtime_1.jsx)("input", { type: 'checkbox', checked: field.value, onChange: (e) => field.onChange(e.target.checked), "data-testid": 'checkbox-visible-tenants' }) }), (0, jsx_runtime_1.jsxs)("div", { className: 'space-y-1 leading-none', children: [(0, jsx_runtime_1.jsx)(form_1.FormLabel, { children: "Visible to Tenants" }), (0, jsx_runtime_1.jsx)("p", { className: 'text-sm text-muted-foreground', children: "Allow tenants to view this document" })] })] })) }))] }), (0, jsx_runtime_1.jsxs)("div", { className: 'space-y-4 border-t pt-4', children: [(0, jsx_runtime_1.jsx)(label_1.Label, { className: 'text-sm font-medium', children: "Choose Document Type" }), (0, jsx_runtime_1.jsxs)("div", { className: 'flex space-x-3', children: [(0, jsx_runtime_1.jsx)("button", { type: 'button', onClick: () => setCreateMode('file'), className: `flex-1 p-3 rounded-lg border text-sm font-medium transition-colors ${createMode === 'file'
                                                                                            ? 'border-blue-500 bg-blue-50 text-blue-700'
                                                                                            : 'border-gray-200 hover:border-gray-300'}`, "data-testid": 'button-file-mode', children: "\uD83D\uDCC1 Upload File" }), (0, jsx_runtime_1.jsx)("button", { type: 'button', onClick: () => setCreateMode('text'), className: `flex-1 p-3 rounded-lg border text-sm font-medium transition-colors ${createMode === 'text'
                                                                                            ? 'border-blue-500 bg-blue-50 text-blue-700'
                                                                                            : 'border-gray-200 hover:border-gray-300'}`, "data-testid": 'button-text-mode', children: "\uD83D\uDCDD Text Document" })] }), createMode === 'file' ? ((0, jsx_runtime_1.jsxs)("div", { children: [(0, jsx_runtime_1.jsx)(label_1.Label, { htmlFor: 'file-upload', children: "Select File to Upload" }), (0, jsx_runtime_1.jsx)(input_1.Input, { id: 'file-upload', type: 'file', onChange: (e) => setSelectedFile(e.target.files?.[0] || null), className: 'mt-1', "data-testid": 'input-file' }), selectedFile && ((0, jsx_runtime_1.jsxs)("p", { className: 'text-sm text-gray-500 mt-1', children: ["Selected: ", selectedFile.name, " (", Math.round(selectedFile.size / 1024), ' ', "KB)"] }))] })) : ((0, jsx_runtime_1.jsxs)("div", { children: [(0, jsx_runtime_1.jsx)(label_1.Label, { htmlFor: 'text-content', children: "Document Content" }), (0, jsx_runtime_1.jsx)(textarea_1.Textarea, { id: 'text-content', value: textContent, onChange: (e) => setTextContent(e.target.value), placeholder: 'Enter the document content here...', className: 'mt-1 min-h-[120px]', "data-testid": 'textarea-content' }), (0, jsx_runtime_1.jsx)("p", { className: 'text-sm text-gray-500 mt-1', children: "This will create a text document that can be viewed and edited online." })] }))] }), (0, jsx_runtime_1.jsxs)(dialog_1.DialogFooter, { children: [(0, jsx_runtime_1.jsx)(button_1.Button, { type: 'button', variant: 'outline', onClick: () => setIsUploadDialogOpen(false), children: "Cancel" }), (0, jsx_runtime_1.jsx)(button_1.Button, { type: 'submit', disabled: createMutation.isPending || (createMode === 'file' && !selectedFile) || (createMode === 'text' && !textContent.trim()), "data-testid": 'button-create', children: createMutation.isPending
                                                                                    ? (createMode === 'file' ? 'Uploading...' : 'Creating...')
                                                                                    : 'Create' })] })] }) })] })] })] }))] }), documentsLoading ? ((0, jsx_runtime_1.jsx)("div", { className: 'text-center py-8', children: "Loading documents..." })) : filteredDocuments.length === 0 ? ((0, jsx_runtime_1.jsx)(card_1.Card, { children: (0, jsx_runtime_1.jsxs)(card_1.CardContent, { className: 'p-8 text-center', children: [(0, jsx_runtime_1.jsx)(lucide_react_1.FileText, { className: 'w-16 h-16 mx-auto text-gray-400 mb-4' }), (0, jsx_runtime_1.jsx)("h3", { className: 'text-lg font-semibold text-gray-600 mb-2', children: "No Documents Found" }), (0, jsx_runtime_1.jsx)("p", { className: 'text-gray-500', children: searchTerm || selectedCategory !== 'all' || selectedYear !== 'all'
                                            ? 'No documents match your current filters.'
                                            : `No documents are available for this ${config.type}.` })] }) })) : ((0, jsx_runtime_1.jsx)("div", { className: 'space-y-6', children: documentCategories.map((category) => {
                                const categoryDocuments = documentsByCategory[category._value] || [];
                                if (categoryDocuments.length === 0) {
                                    return null;
                                }
                                return ((0, jsx_runtime_1.jsxs)(card_1.Card, { "data-testid": `category-${category._value}`, children: [(0, jsx_runtime_1.jsx)(card_1.CardHeader, { children: (0, jsx_runtime_1.jsxs)(card_1.CardTitle, { className: 'flex items-center gap-2', children: [(0, jsx_runtime_1.jsx)(lucide_react_1.FileText, { className: 'h-5 w-5' }), category.label, (0, jsx_runtime_1.jsx)(badge_1.Badge, { variant: 'secondary', children: categoryDocuments.length })] }) }), (0, jsx_runtime_1.jsx)(card_1.CardContent, { children: (0, jsx_runtime_1.jsx)("div", { className: 'grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4', children: categoryDocuments.map((document) => ((0, jsx_runtime_1.jsx)(card_1.Card, { className: 'cursor-pointer hover:shadow-md transition-shadow', "data-testid": `document-card-${document.id}`, onClick: () => handleViewDocument(document), children: (0, jsx_runtime_1.jsxs)(card_1.CardContent, { className: 'p-4', children: [(0, jsx_runtime_1.jsxs)("div", { className: 'flex items-start justify-between mb-2', children: [(0, jsx_runtime_1.jsx)("h4", { className: 'font-medium text-sm truncate flex-1 mr-2', "data-testid": `document-name-${document.id}`, children: document.name }), (0, jsx_runtime_1.jsx)("div", { className: 'flex gap-1', children: config.allowEdit && ((0, jsx_runtime_1.jsx)(button_1.Button, { size: 'sm', variant: 'ghost', onClick: (e) => {
                                                                                e.stopPropagation();
                                                                                setSelectedDocument(document);
                                                                                // Reset form with document values for editing
                                                                                form.reset({
                                                                                    name: document.name,
                                                                                    description: document.description || '',
                                                                                    documentType: document.documentType,
                                                                                    ...(config.type === 'building'
                                                                                        ? { buildingId: document.buildingId || config.entityId }
                                                                                        : { residenceId: document.residenceId || config.entityId }),
                                                                                    isVisibleToTenants: document.isVisibleToTenants || false,
                                                                                });
                                                                                setIsEditMode(true);
                                                                                setIsViewDialogOpen(true);
                                                                            }, "data-testid": `button-edit-${document.id}`, children: (0, jsx_runtime_1.jsx)(lucide_react_1.Edit, { className: 'h-3 w-3' }) })) })] }), (0, jsx_runtime_1.jsx)("p", { className: 'text-xs text-gray-500 mb-2', "data-testid": `document-date-${document.id}`, children: formatDate(document.createdAt) }), document.filePath && ((0, jsx_runtime_1.jsx)(badge_1.Badge, { variant: 'outline', className: 'text-xs', children: formatFileSize(document.fileSize) }))] }) }, document.id))) }) })] }, category._value));
                            }) }))] }) }), (0, jsx_runtime_1.jsx)(dialog_1.Dialog, { open: isViewDialogOpen, onOpenChange: (open) => {
                    setIsViewDialogOpen(open);
                    if (!open) {
                        setSelectedDocument(null);
                        setIsEditMode(false);
                    }
                }, children: (0, jsx_runtime_1.jsxs)(dialog_1.DialogContent, { className: 'max-w-md max-h-[90vh] overflow-y-auto', children: [(0, jsx_runtime_1.jsxs)(dialog_1.DialogHeader, { children: [(0, jsx_runtime_1.jsx)(dialog_1.DialogTitle, { children: "Document Details" }), (0, jsx_runtime_1.jsx)(dialog_1.DialogDescription, { children: "Update the document information. Note: File content cannot be changed, only metadata." })] }), selectedDocument && ((0, jsx_runtime_1.jsx)(form_1.Form, { ...form, children: (0, jsx_runtime_1.jsxs)("form", { onSubmit: form.handleSubmit(async (data) => {
                                    try {
                                        const response = await (0, queryClient_1.apiRequest)('PUT', `/api/documents/${selectedDocument.id}`, data);
                                        toast({
                                            title: 'Success',
                                            description: 'Document updated successfully',
                                        });
                                        queryClient.invalidateQueries({ queryKey });
                                        setIsViewDialogOpen(false);
                                        setIsEditMode(false);
                                        setSelectedDocument(null);
                                    }
                                    catch (error) {
                                        toast({
                                            title: 'Error',
                                            description: error.message || 'Failed to update document',
                                            variant: 'destructive',
                                        });
                                    }
                                }), className: 'space-y-4', children: [(0, jsx_runtime_1.jsx)(form_1.FormField, { control: form.control, name: 'name', render: ({ field }) => ((0, jsx_runtime_1.jsxs)(form_1.FormItem, { children: [(0, jsx_runtime_1.jsx)(form_1.FormLabel, { children: "Document Name" }), (0, jsx_runtime_1.jsx)(form_1.FormControl, { children: (0, jsx_runtime_1.jsx)(input_1.Input, { ...field, "data-testid": 'input-edit-name' }) }), (0, jsx_runtime_1.jsx)(form_1.FormMessage, {})] })) }), (0, jsx_runtime_1.jsx)(form_1.FormField, { control: form.control, name: 'description', render: ({ field }) => ((0, jsx_runtime_1.jsxs)(form_1.FormItem, { children: [(0, jsx_runtime_1.jsx)(form_1.FormLabel, { children: "Description (Optional)" }), (0, jsx_runtime_1.jsx)(form_1.FormControl, { children: (0, jsx_runtime_1.jsx)(input_1.Input, { ...field, "data-testid": 'input-edit-description' }) }), (0, jsx_runtime_1.jsx)(form_1.FormMessage, {})] })) }), (0, jsx_runtime_1.jsx)(form_1.FormField, { control: form.control, name: 'documentType', render: ({ field }) => ((0, jsx_runtime_1.jsxs)(form_1.FormItem, { children: [(0, jsx_runtime_1.jsx)(form_1.FormLabel, { children: "Document Category" }), (0, jsx_runtime_1.jsxs)(select_1.Select, { onValueChange: field.onChange, value: field.value, children: [(0, jsx_runtime_1.jsx)(form_1.FormControl, { children: (0, jsx_runtime_1.jsx)(select_1.SelectTrigger, { "data-testid": 'select-edit-type', children: (0, jsx_runtime_1.jsx)(select_1.SelectValue, { placeholder: 'Select category' }) }) }), (0, jsx_runtime_1.jsx)(select_1.SelectContent, { children: documentCategories.map((category) => ((0, jsx_runtime_1.jsx)(select_1.SelectItem, { value: category._value, children: category.label }, category._value))) })] }), (0, jsx_runtime_1.jsx)(form_1.FormMessage, {})] })) }), (0, jsx_runtime_1.jsx)(form_1.FormField, { control: form.control, name: 'isVisibleToTenants', render: ({ field }) => ((0, jsx_runtime_1.jsxs)(form_1.FormItem, { className: 'flex flex-row items-center space-x-3 space-y-0', children: [(0, jsx_runtime_1.jsx)(form_1.FormControl, { children: (0, jsx_runtime_1.jsx)("input", { type: 'checkbox', checked: field.value, onChange: (e) => field.onChange(e.target.checked), "data-testid": 'checkbox-edit-visible-tenants' }) }), (0, jsx_runtime_1.jsxs)("div", { className: 'space-y-1 leading-none', children: [(0, jsx_runtime_1.jsx)(form_1.FormLabel, { children: "Visible to Tenants" }), (0, jsx_runtime_1.jsx)("p", { className: 'text-sm text-muted-foreground', children: "Allow tenants to view this document" })] })] })) }), (0, jsx_runtime_1.jsx)(AttachedFileSection_1.AttachedFileSection, { entityType: "document", entityId: selectedDocument?.id || '', filePath: selectedDocument?.filePath, fileName: selectedDocument?.fileName, fileSize: selectedDocument?.fileSize, fallbackName: selectedDocument?.name, className: "pt-4 border-t" }), (0, jsx_runtime_1.jsx)("div", { className: 'flex gap-2 pt-4 border-t', children: config.allowDelete && ((0, jsx_runtime_1.jsxs)(button_1.Button, { type: 'button', variant: 'outline', onClick: () => {
                                                if (selectedDocument) {
                                                    handleDeleteDocument(selectedDocument);
                                                    setIsViewDialogOpen(false);
                                                }
                                            }, className: 'text-red-600 hover:text-red-700', children: [(0, jsx_runtime_1.jsx)(lucide_react_1.Trash2, { className: 'w-4 h-4 mr-2' }), "Delete"] })) }), (0, jsx_runtime_1.jsxs)(dialog_1.DialogFooter, { children: [(0, jsx_runtime_1.jsx)(button_1.Button, { type: 'button', variant: 'outline', onClick: () => {
                                                    setIsViewDialogOpen(false);
                                                }, children: "Cancel" }), (0, jsx_runtime_1.jsx)(button_1.Button, { type: 'submit', "data-testid": 'button-save-edit', children: "Save Changes" })] })] }) }))] }) })] }));
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiL2hvbWUvcnVubmVyL3dvcmtzcGFjZS9jbGllbnQvc3JjL2NvbXBvbmVudHMvY29tbW9uL0RvY3VtZW50TWFuYWdlci50c3giLCJtYXBwaW5ncyI6Ijs7QUF1SEEsa0NBdXlCQzs7QUE5NUJELGlDQUEwQztBQUMxQyx1REFBOEU7QUFDOUUsK0NBQWdGO0FBQ2hGLG1EQUFnRDtBQUNoRCxpREFBOEM7QUFDOUMsaURBQThDO0FBQzlDLGlEQUE4QztBQUM5Qyx1REFBb0Q7QUFDcEQsbURBTWdDO0FBQ2hDLG1EQVFnQztBQUNoQywrQ0FPOEI7QUFDOUIsaURBQTZDO0FBQzdDLHFEQUEwQztBQUMxQyxpREFBc0Q7QUFDdEQsNkJBQXdCO0FBQ3hCLG1EQUErQztBQUUvQywrQ0Fhc0I7QUFDdEIsdURBQW9EO0FBQ3BELG1DQUFxQztBQUVyQywrQ0FLeUI7QUFFekIsK0RBQTREO0FBZ0M1RCxNQUFNLG9CQUFvQixHQUFHLENBQUMsSUFBOEIsRUFBRSxFQUFFO0lBQzlELE1BQU0sa0JBQWtCLEdBQ3RCLElBQUksS0FBSyxVQUFVLENBQUMsQ0FBQyxDQUFDLHdDQUE0QixDQUFDLENBQUMsQ0FBQyx5Q0FBNkIsQ0FBQztJQUNyRixNQUFNLFVBQVUsR0FBRyxrQkFBa0IsQ0FBQyxHQUFHLENBQUMsQ0FBQyxHQUFHLEVBQUUsRUFBRSxDQUFDLEdBQUcsQ0FBQyxNQUFNLENBQUMsQ0FBQztJQUUvRCxNQUFNLFVBQVUsR0FBRztRQUNqQixJQUFJLEVBQUUsT0FBQyxDQUFDLE1BQU0sRUFBRSxDQUFDLEdBQUcsQ0FBQyxDQUFDLEVBQUUsNkVBQTZFLENBQUMsQ0FBQyxHQUFHLENBQUMsR0FBRyxFQUFFLGdEQUFnRCxDQUFDO1FBQ2pLLFdBQVcsRUFBRSxPQUFDLENBQUMsTUFBTSxFQUFFLENBQUMsR0FBRyxDQUFDLEdBQUcsRUFBRSw4Q0FBOEMsQ0FBQyxDQUFDLFFBQVEsRUFBRTtRQUMzRixZQUFZLEVBQUUsT0FBQyxDQUFDLElBQUksQ0FBQyxVQUFtQyxDQUFDO1FBQ3pELGtCQUFrQixFQUFFLE9BQUMs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LFlBQ3RDLE1BQU0sQ0FBQyxXQUFXLElBQUksQ0FDckIsd0JBQUMsZUFBTSxJQUNMLElBQUksRUFBQyxRQUFRLEVBQ2IsT0FBTyxFQUFDLFNBQVMsRUFDakIsT0FBTyxFQUFFLEdBQUcsRUFBRTtnREFDWixJQUFJLGdCQUFnQixFQUFFLENBQUM7b0RBQ3JCLG9CQUFvQixDQUFDLGdCQUFnQixDQUFDLENBQUM7b0RBQ3ZDLG1CQUFtQixDQUFDLEtBQUssQ0FBQyxDQUFDO2dEQUM3QixDQUFDOzRDQUNILENBQUMsRUFDRCxTQUFTLEVBQUMsaUNBQWlDLGFBRTNDLHVCQUFDLHFCQUFNLElBQUMsU0FBUyxFQUFDLGNBQWMsR0FBRyxjQUU1QixDQUNWLEdBQ0csRUFFTix3QkFBQyxxQkFBWSxlQUNYLHVCQUFDLGVBQU0sSUFDTCxJQUFJLEVBQUMsUUFBUSxFQUNiLE9BQU8sRUFBQyxTQUFTLEVBQ2pCLE9BQU8sRUFBRSxHQUFHLEVBQUU7b0RBQ1osbUJBQW1CLENBQUMsS0FBSyxDQUFDLENBQUM7Z0RBQzdCLENBQUMsdUJBR00sRUFDVCx1QkFBQyxlQUFNLElBQUMsSUFBSSxFQUFDLFFBQVEsaUJBQWEsa0JBQWtCLDZCQUUzQyxJQUNJLElBQ1YsR0FDRixDQUNSLElBQ2EsR0FDVCxJQUNMLENBQ1AsQ0FBQztBQUNKLENBQUMiLCJuYW1lcyI6W10sInNvdXJjZXMiOlsiL2hvbWUvcnVubmVyL3dvcmtzcGFjZS9jbGllbnQvc3JjL2NvbXBvbmVudHMvY29tbW9uL0RvY3VtZW50TWFuYWdlci50c3giXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgdXNlU3RhdGUsIHVzZU1lbW8gfSBmcm9tICdyZWFjdCc7XG5pbXBvcnQgeyB1c2VRdWVyeSwgdXNlTXV0YXRpb24sIHVzZVF1ZXJ5Q2xpZW50IH0gZnJvbSAnQHRhbnN0YWNrL3JlYWN0LXF1ZXJ5JztcbmltcG9ydCB7IENhcmQsIENhcmRDb250ZW50LCBDYXJkSGVhZGVyLCBDYXJkVGl0bGUgfSBmcm9tICdAL2NvbXBvbmVudHMvdWkvY2FyZCc7XG5pbXBvcnQgeyBCdXR0b24gfSBmcm9tICdAL2NvbXBvbmVudHMvdWkvYnV0dG9uJztcbmltcG9ydCB7IEJhZGdlIH0gZnJvbSAnQC9jb21wb25lbnRzL3VpL2JhZGdlJztcbmltcG9ydCB7IElucHV0IH0gZnJvbSAnQC9jb21wb25lbnRzL3VpL2lucHV0JztcbmltcG9ydCB7IExhYmVsIH0gZnJvbSAnQC9jb21wb25lbnRzL3VpL2xhYmVsJztcbmltcG9ydCB7IFRleHRhcmVhIH0gZnJvbSAnQC9jb21wb25lbnRzL3VpL3RleHRhcmVhJztcbmltcG9ydCB7XG4gIFNlbGVjdCxcbiAgU2VsZWN0Q29udGVudCxcbiAgU2VsZWN0SXRlbSxcbiAgU2VsZWN0VHJpZ2dlcixcbiAgU2VsZWN0VmFsdWUsXG59IGZyb20gJ0AvY29tcG9uZW50cy91aS9zZWxlY3QnO1xuaW1wb3J0IHtcbiAgRGlhbG9nLFxuICBEaWFsb2dDb250ZW50LFxuICBEaWFsb2dEZXNjcmlwdGlvbixcbiAgRGlhbG9nRm9vdGVyLFxuICBEaWFsb2dIZWFkZXIsXG4gIERpYWxvZ1RpdGxlLFxuICBEaWFsb2dUcmlnZ2VyLFxufSBmcm9tICdAL2NvbXBvbmVudHMvdWkvZGlhbG9nJztcbmltcG9ydCB7XG4gIEZvcm0sXG4gIEZvcm1Db250cm9sLFxuICBGb3JtRmllbGQsXG4gIEZvcm1JdGVtLFxuICBGb3JtTGFiZWwsXG4gIEZvcm1NZXNzYWdlLFxufSBmcm9tICdAL2NvbXBvbmVudHMvdWkvZm9ybSc7XG5pbXBvcnQgeyB1c2VUb2FzdCB9IGZyb20gJ0AvaG9va3MvdXNlLXRvYXN0JztcbmltcG9ydCB7IHVzZUZvcm0gfSBmcm9tICdyZWFjdC1ob29rLWZvcm0nO1xuaW1wb3J0IHsgem9kUmVzb2x2ZXIgfSBmcm9tICdAaG9va2Zvcm0vcmVzb2x2ZXJzL3pvZCc7XG5pbXBvcnQgeyB6IH0gZnJvbSAnem9kJztcbmltcG9ydCB7IGFwaVJlcXVlc3QgfSBmcm9tICdAL2xpYi9xdWVyeUNsaWVudCc7XG5pbXBvcnQgdHlwZSB7IEJ1aWxkaW5nIGFzIEJ1aWxkaW5nVHlwZSwgUmVzaWRlbmNlIH0gZnJvbSAnQHNoYXJlZC9zY2hlbWFzL3Byb3BlcnR5JztcbmltcG9ydCB7XG4gIFVwbG9hZCxcbiAgRG93bmxvYWQsXG4gIEVkaXQsXG4gIFRyYXNoMixcbiAgRmlsZVRleHQsXG4gIFNlYXJjaCxcbiAgUGx1cyxcbiAgQnVpbGRpbmcsXG4gIENhbGVuZGFyLFxuICBBcnJvd0xlZnQsXG4gIENoZXZyb25MZWZ0LFxuICBDaGV2cm9uUmlnaHQsXG59IGZyb20gJ2x1Y2lkZS1yZWFjdCc7XG5pbXBvcnQgeyBIZWFkZXIgfSBmcm9tICdAL2NvbXBvbmVudHMvbGF5b3V0L2hlYWRlcic7XG5pbXBvcnQgeyB1c2VMb2NhdGlvbiB9IGZyb20gJ3dvdXRlcic7XG5cbmltcG9ydCB7XG4gIGdldERpc3BsYXlhYmxlRmlsZVVybCxcbiAgQlVJTERJTkdfRE9DVU1FTlRfQ0FURUdPUklFUyxcbiAgUkVTSURFTkNFX0RPQ1VNRU5UX0NBVEVHT1JJRVMsXG4gIGdldENhdGVnb3J5TGFiZWwsXG59IGZyb20gJ0AvbGliL2RvY3VtZW50cyc7XG5pbXBvcnQgVGV4dEZpbGVFZGl0b3IgZnJvbSAnLi9UZXh0RmlsZUVkaXRvcic7XG5pbXBvcnQgeyBBdHRhY2hlZEZpbGVTZWN0aW9uIH0gZnJvbSAnLi9BdHRhY2hlZEZpbGVTZWN0aW9uJztcblxuLy8gQ29tbW9uIGRvY3VtZW50IGludGVyZmFjZVxuaW50ZXJmYWNlIERvY3VtZW50IHtcbiAgaWQ6IHN0cmluZztcbiAgbmFtZTogc3RyaW5nO1xuICBkZXNjcmlwdGlvbj86IHN0cmluZztcbiAgZG9jdW1lbnRUeXBlOiBzdHJpbmc7XG4gIGRhdGVSZWZlcmVuY2U/OiBzdHJpbmc7XG4gIGJ1aWxkaW5nSWQ/OiBzdHJpbmc7XG4gIHJlc2lkZW5jZUlkPzogc3RyaW5nO1xuICBmaWxlUGF0aDogc3RyaW5nO1xuICBmaWxlTmFtZT86IHN0cmluZztcbiAgZmlsZVNpemU/OiBudW1iZXI7XG4gIGlzVmlzaWJsZVRvVGVuYW50cz86IGJvb2xlYW47XG4gIGNyZWF0ZWRBdDogc3RyaW5nO1xuICB1cGRhdGVkQXQ6IHN0cmluZztcbn1cblxuaW50ZXJmYWNlIERvY3VtZW50TWFuYWdlckNvbmZpZyB7XG4gIHR5cGU6ICdidWlsZGluZycgfCAncmVzaWRlbmNlJztcbiAgZW50aXR5SWQ6IHN0cmluZztcbiAgZW50aXR5TmFtZT86IHN0cmluZztcbiAgZW50aXR5QWRkcmVzcz86IHN0cmluZztcbiAgdXNlclJvbGU6ICdtYW5hZ2VyJyB8ICdyZXNpZGVudCc7XG4gIGFsbG93Q3JlYXRlPzogYm9vbGVhbjtcbiAgYWxsb3dFZGl0PzogYm9vbGVhbjtcbiAgYWxsb3dEZWxldGU/OiBib29sZWFuO1xuICBhbGxvd1VwbG9hZD86IGJvb2xlYW47XG4gIHNob3dWaXNpYmlsaXR5VG9nZ2xlPzogYm9vbGVhbjtcbn1cblxuY29uc3QgY3JlYXRlRG9jdW1lbnRTY2hlbWEgPSAodHlwZTogJ2J1aWxkaW5nJyB8ICdyZXNpZGVuY2UnKSA9PiB7XG4gIGNvbnN0IGRvY3VtZW50Q2F0ZWdvcmllcyA9XG4gICAgdHlwZSA9PT0gJ2J1aWxkaW5nJyA/IEJVSUxESU5HX0RPQ1VNRU5UX0NBVEVHT1JJRVMgOiBSRVNJREVOQ0VfRE9DVU1FTlRfQ0FURUdPUklFUztcbiAgY29uc3QgdmFsaWRUeXBlcyA9IGRvY3VtZW50Q2F0ZWdvcmllcy5tYXAoKGNhdCkgPT4gY2F0Ll92YWx1ZSk7XG5cbiAgY29uc3QgYmFzZVNjaGVtYSA9IHtcbiAgICBuYW1lOiB6LnN0cmluZygpLm1pbigxLCAnRG9jdW1lbnQgbmFtZSBpcyByZXF1aXJlZCAoZXhhbXBsZTogTW9udGhseSBNZWV0aW5nIE1pbnV0ZXMgLSBKYW51YXJ5IDIwMjUpJykubWF4KDI1NSwgJ0RvY3VtZW50IG5hbWUgbXVzdCBiZSBsZXNzIHRoYW4gMjU1IGNoYXJhY3RlcnMnKSxcbiAgICBkZXNjcmlwdGlvbjogei5zdHJpbmcoKS5tYXgoNTAwLCAnRGVzY3JpcHRpb24gbXVzdCBiZSBsZXNzIHRoYW4gNTAwIGNoYXJhY3RlcnMnKS5vcHRpb25hbCgpLFxuICAgIGRvY3VtZW50VHlwZTogei5lbnVtKHZhbGlkVHlwZXMgYXMgW3N0cmluZywgLi4uc3RyaW5nW11dKSxcbiAgICBpc1Zpc2libGVUb1RlbmFudHM6IHouYm9vbGVhbigpLmRlZmF1bHQoZmFsc2UpLFxuICB9O1xuXG4gIGlmICh0eXBlID09PSAnYnVpbGRpbmcnKSB7XG4gICAgcmV0dXJuIHoub2JqZWN0KHtcbiAgICAgIC4uLmJhc2VTY2hlbWEsXG4gICAgICBidWlsZGluZ0lkOiB6LnN0cmluZygpLm1pbigxLCAnQnVpbGRpbmcgc2VsZWN0aW9uIGlzIHJlcXVpcmVkJyksXG4gICAgfSk7XG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIHoub2JqZWN0KHtcbiAgICAgIC4uLmJhc2VTY2hlbWEsXG4gICAgICByZXNpZGVuY2VJZDogei5zdHJpbmcoKS5taW4oMSwgJ1Jlc2lkZW5jZSBzZWxlY3Rpb24gaXMgcmVxdWlyZWQnKSxcbiAgICB9KTtcbiAgfVxufTtcblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gRG9jdW1lbnRNYW5hZ2VyKHsgY29uZmlnIH06IHsgY29uZmlnOiBEb2N1bWVudE1hbmFnZXJDb25maWcgfSkge1xuICBjb25zdCB7IHRvYXN0IH0gPSB1c2VUb2FzdCgpO1xuICBjb25zdCBxdWVyeUNsaWVudCA9IHVzZVF1ZXJ5Q2xpZW50KCk7XG4gIGNvbnN0IFssIG5hdmlnYXRlXSA9IHVzZUxvY2F0aW9uKCk7XG5cbiAgLy8gU3RhdGUgbWFuYWdlbWVudFxuICBjb25zdCBbaXNVcGxvYWREaWFsb2dPcGVuLCBzZXRJc1VwbG9hZERpYWxvZ09wZW5dID0gdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBbaXNWaWV3RGlhbG9nT3Blbiwgc2V0SXNWaWV3RGlhbG9nT3Blbl0gPSB1c2VTdGF0ZShmYWxzZSk7XG4gIGNvbnN0IFtjcmVhdGVNb2RlLCBzZXRDcmVhdGVNb2RlXSA9IHVzZVN0YXRlPCdmaWxlJyB8ICd0ZXh0Jz4oJ2ZpbGUnKTtcbiAgY29uc3QgW3RleHRDb250ZW50LCBzZXRUZXh0Q29udGVudF0gPSB1c2VTdGF0ZSgnJyk7XG4gIGNvbnN0IFtpc0VkaXRNb2RlLCBzZXRJc0VkaXRNb2RlXSA9IHVzZVN0YXRlKGZhbHNlKTtcbiAgY29uc3QgW3NlbGVjdGVkRG9jdW1lbnQsIHNldFNlbGVjdGVkRG9jdW1lbnRdID0gdXNlU3RhdGU8RG9jdW1lbnQgfCBudWxsPihudWxsKTtcbiAgY29uc3QgW3NlbGVjdGVkRmlsZSwgc2V0U2VsZWN0ZWRGaWxlXSA9IHVzZVN0YXRlPEZpbGUgfCBudWxsPihudWxsKTtcbiAgY29uc3QgW3NlYXJjaFRlcm0sIHNldFNlYXJjaFRlcm1dID0gdXNlU3RhdGUoJycpO1xuICBjb25zdCBbc2VsZWN0ZWRDYXRlZ29yeSwgc2V0U2VsZWN0ZWRDYXRlZ29yeV0gPSB1c2VTdGF0ZSgnYWxsJyk7XG4gIGNvbnN0IFtzZWxlY3RlZFllYXIsIHNldFNlbGVjdGVkWWVhcl0gPSB1c2VTdGF0ZSgnYWxsJyk7XG4gIGNvbnN0IFtjdXJyZW50UGFnZSwgc2V0Q3VycmVudFBhZ2VdID0gdXNlU3RhdGUoMSk7XG4gIGNvbnN0IFtpc1RleHRFZGl0b3JPcGVuLCBzZXRJc1RleHRFZGl0b3JPcGVuXSA9IHVzZVN0YXRlKGZhbHNlKTtcbiAgY29uc3QgW3RleHRFZGl0b3JEb2N1bWVudCwgc2V0VGV4dEVkaXRvckRvY3VtZW50XSA9IHVzZVN0YXRlPERvY3VtZW50IHwgbnVsbD4obnVsbCk7XG5cbiAgY29uc3QgaXRlbXNQZXJQYWdlID0gMTI7XG4gIGNvbnN0IGRvY3VtZW50U2NoZW1hID0gY3JlYXRlRG9jdW1lbnRTY2hlbWEoY29uZmlnLnR5cGUpO1xuICBjb25zdCBkb2N1bWVudENhdGVnb3JpZXMgPVxuICAgIGNvbmZpZy50eXBlID09PSAnYnVpbGRpbmcnID8gQlVJTERJTkdfRE9DVU1FTlRfQ0FURUdPUklFUyA6IFJFU0lERU5DRV9ET0NVTUVOVF9DQVRFR09SSUVTO1xuXG4gIC8vIEZvcm0gc2V0dXBcbiAgY29uc3QgZm9ybSA9IHVzZUZvcm0oe1xuICAgIHJlc29sdmVyOiB6b2RSZXNvbHZlcihkb2N1bWVudFNjaGVtYSksXG4gICAgZGVmYXVsdFZhbHVlczoge1xuICAgICAgbmFtZTogJycsXG4gICAgICBkZXNjcmlwdGlvbjogJycsXG4gICAgICBkb2N1bWVudFR5cGU6ICdvdGhlcicsXG4gICAgICAuLi4oY29uZmlnLnR5cGUgPT09ICdidWlsZGluZydcbiAgICAgICAgPyB7IGJ1aWxkaW5nSWQ6IGNvbmZpZy5lbnRpdHlJZCB9XG4gICAgICAgIDogeyByZXNpZGVuY2VJZDogY29uZmlnLmVudGl0eUlkIH0pLFxuICAgICAgaXNWaXNpYmxlVG9UZW5hbnRzOiBmYWxzZSxcbiAgICB9LFxuICB9KTtcblxuICAvLyBBUEkgcXVlcmllcyBhbmQgbXV0YXRpb25zXG4gIGNvbnN0IHF1ZXJ5S2V5ID1cbiAgICBjb25maWcudHlwZSA9PT0gJ2J1aWxkaW5nJ1xuICAgICAgPyBbYC9hcGkvZG9jdW1lbnRzP2J1aWxkaW5nSWQ9JHtjb25maWcuZW50aXR5SWR9YF1cbiAgICAgIDogW2AvYXBpL2RvY3VtZW50cz9yZXNpZGVuY2VJZD0ke2NvbmZpZy5lbnRpdHlJZH1gXTtcblxuICBjb25zdCB7IGRhdGE6IGVudGl0eSB9ID0gdXNlUXVlcnk8QnVpbGRpbmdUeXBlIHwgUmVzaWRlbmNlPih7XG4gICAgcXVlcnlLZXk6XG4gICAgICBjb25maWcudHlwZSA9PT0gJ2J1aWxkaW5nJ1xuICAgICAgICA/IFsnL2FwaS9tYW5hZ2VyL2J1aWxkaW5ncycsIGNvbmZpZy5lbnRpdHlJZF1cbiAgICAgICAgOiBbJy9hcGkvcmVzaWRlbmNlcycsIGNvbmZpZy5lbnRpdHlJZF0sXG4gICAgZW5hYmxlZDogISFjb25maWcuZW50aXR5SWQsXG4gIH0pO1xuXG4gIGNvbnN0IHsgZGF0YTogZG9jdW1lbnRzID0gW10sIGlzTG9hZGluZzogZG9jdW1lbnRzTG9hZGluZyB9ID0gdXNlUXVlcnk8RG9jdW1lbnRbXT4oe1xuICAgIHF1ZXJ5S2V5LFxuICAgIGVuYWJsZWQ6ICEhY29uZmlnLmVudGl0eUlkLFxuICAgIHF1ZXJ5Rm46IGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2gocXVlcnlLZXlbMF0sIHtcbiAgICAgICAgY3JlZGVudGlhbHM6ICdpbmNsdWRlJyxcbiAgICAgIH0pO1xuXG4gICAgICBpZiAoIXJlc3BvbnNlLm9rKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihgSFRUUCAke3Jlc3BvbnNlLnN0YXR1c306ICR7cmVzcG9uc2Uuc3RhdHVzVGV4dH1gKTtcbiAgICAgIH1cblxuICAgICAgY29uc3QgZGF0YSA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcbiAgICAgIC8vIFRoZSBBUEkgcmV0dXJucyB7ZG9jdW1lbnRzOiBBcnJheSwgdG90YWw6IG51bWJlciwgLi4ufSBidXQgd2UgbmVlZCBqdXN0IHRoZSBkb2N1bWVudHMgYXJyYXlcbiAgICAgIHJldHVybiBkYXRhLmRvY3VtZW50cyB8fCBbXTtcbiAgICB9LFxuICB9KTtcblxuICAvLyBGaWx0ZXIgYW5kIGdyb3VwIGRvY3VtZW50c1xuICBjb25zdCBmaWx0ZXJlZERvY3VtZW50cyA9IHVzZU1lbW8oKCkgPT4ge1xuICAgIGNvbnN0IGZpbHRlcmVkID0gZG9jdW1lbnRzLmZpbHRlcigoZG9jOiBEb2N1bWVudCkgPT4ge1xuICAgICAgY29uc3QgbWF0Y2hlc1NlYXJjaCA9IGRvYy5uYW1lLnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMoc2VhcmNoVGVybS50b0xvd2VyQ2FzZSgpKTtcbiAgICAgIGNvbnN0IG1hdGNoZXNDYXRlZ29yeSA9IHNlbGVjdGVkQ2F0ZWdvcnkgPT09ICdhbGwnIHx8IGRvYy5kb2N1bWVudFR5cGUgPT09IHNlbGVjdGVkQ2F0ZWdvcnk7XG4gICAgICBjb25zdCBtYXRjaGVzWWVhciA9XG4gICAgICAgIHNlbGVjdGVkWWVhciA9PT0gJ2FsbCcgfHwgbmV3IERhdGUoZG9jLmNyZWF0ZWRBdCkuZ2V0RnVsbFllYXIoKS50b1N0cmluZygpID09PSBzZWxlY3RlZFllYXI7XG4gICAgICByZXR1cm4gbWF0Y2hlc1NlYXJjaCAmJiBtYXRjaGVzQ2F0ZWdvcnkgJiYgbWF0Y2hlc1llYXI7XG4gICAgfSk7XG4gICAgcmV0dXJuIGZpbHRlcmVkO1xuICB9LCBbZG9jdW1lbnRzLCBzZWFyY2hUZXJtLCBzZWxlY3RlZENhdGVnb3J5LCBzZWxlY3RlZFllYXJdKTtcblxuICBjb25zdCBkb2N1bWVudHNCeUNhdGVnb3J5ID0gdXNlTWVtbygoKSA9PiB7XG4gICAgY29uc3QgZ3JvdXBlZDogUmVjb3JkPHN0cmluZywgRG9jdW1lbnRbXT4gPSB7fTtcbiAgICBkb2N1bWVudENhdGVnb3JpZXMuZm9yRWFjaCgoY2F0ZWdvcnkpID0+IHtcbiAgICAgIGdyb3VwZWRbY2F0ZWdvcnkuX3ZhbHVlXSA9IGZpbHRlcmVkRG9jdW1lbnRzLmZpbHRlcihcbiAgICAgICAgKGRvYykgPT4gZG9jLmRvY3VtZW50VHlwZSA9PT0gY2F0ZWdvcnkuX3ZhbHVlXG4gICAgICApO1xuICAgIH0pO1xuICAgIHJldHVybiBncm91cGVkO1xuICB9LCBbZmlsdGVyZWREb2N1bWVudHMsIGRvY3VtZW50Q2F0ZWdvcmllc10pO1xuXG4gIC8vIENyZWF0ZSBtdXRhdGlvbiAoc3VwcG9ydHMgYm90aCBmaWxlIHVwbG9hZCBhbmQgdGV4dC1vbmx5KVxuICBjb25zdCBjcmVhdGVNdXRhdGlvbiA9IHVzZU11dGF0aW9uKHtcbiAgICBtdXRhdGlvbkZuOiBhc3luYyAoZGF0YTogYW55KSA9PiB7XG4gICAgICBpZiAoY3JlYXRlTW9kZSA9PT0gJ2ZpbGUnKSB7XG4gICAgICAgIGlmICghc2VsZWN0ZWRGaWxlKSB7XG4gICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdObyBmaWxlIHNlbGVjdGVkJyk7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBmb3JtRGF0YSA9IG5ldyBGb3JtRGF0YSgpO1xuICAgICAgICBmb3JtRGF0YS5hcHBlbmQoJ2ZpbGUnLCBzZWxlY3RlZEZpbGUpO1xuICAgICAgICBmb3JtRGF0YS5hcHBlbmQoJ25hbWUnLCBkYXRhLm5hbWUpO1xuICAgICAgICBmb3JtRGF0YS5hcHBlbmQoJ2Rlc2NyaXB0aW9uJywgZGF0YS5kZXNjcmlwdGlvbiB8fCAnJyk7XG4gICAgICAgIGZvcm1EYXRhLmFwcGVuZCgnZG9jdW1lbnRUeXBlJywgZGF0YS5kb2N1bWVudFR5cGUpO1xuICAgICAgICBmb3JtRGF0YS5hcHBlbmQoJ2lzVmlzaWJsZVRvVGVuYW50cycsIGRhdGEuaXNWaXNpYmxlVG9UZW5hbnRzLnRvU3RyaW5nKCkpO1xuXG4gICAgICAgIGlmIChkYXRhLnJlc2lkZW5jZUlkKSB7XG4gICAgICAgICAgZm9ybURhdGEuYXBwZW5kKCdyZXNpZGVuY2VJZCcsIGRhdGEucmVzaWRlbmNlSWQpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChkYXRhLmJ1aWxkaW5nSWQpIHtcbiAgICAgICAgICBmb3JtRGF0YS5hcHBlbmQoJ2J1aWxkaW5nSWQnLCBkYXRhLmJ1aWxkaW5nSWQpO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaCgnL2FwaS9kb2N1bWVudHMvdXBsb2FkJywge1xuICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgICAgIGJvZHk6IGZvcm1EYXRhLFxuICAgICAgICB9KTtcblxuICAgICAgICBpZiAoIXJlc3BvbnNlLm9rKSB7XG4gICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdJbnRlcm5hbCBzZXJ2ZXIgZXJyb3InKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiByZXNwb25zZS5qc29uKCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyBUZXh0LW9ubHkgZG9jdW1lbnQgY3JlYXRpb25cbiAgICAgICAgY29uc3QgcGF5bG9hZCA9IHtcbiAgICAgICAgICBuYW1lOiBkYXRhLm5hbWUsXG4gICAgICAgICAgZGVzY3JpcHRpb246IGRhdGEuZGVzY3JpcHRpb24gfHwgJycsXG4gICAgICAgICAgZG9jdW1lbnRUeXBlOiBkYXRhLmRvY3VtZW50VHlwZSxcbiAgICAgICAgICBpc1Zpc2libGVUb1RlbmFudHM6IGRhdGEuaXNWaXNpYmxlVG9UZW5hbnRzLFxuICAgICAgICAgIHRleHRDb250ZW50OiB0ZXh0Q29udGVudCxcbiAgICAgICAgICAuLi4oIGRhdGEucmVzaWRlbmNlSWQgPyB7IHJlc2lkZW5jZUlkOiBkYXRhLnJlc2lkZW5jZUlkIH0gOiB7fSksXG4gICAgICAgICAgLi4uKCBkYXRhLmJ1aWxkaW5nSWQgPyB7IGJ1aWxkaW5nSWQ6IGRhdGEuYnVpbGRpbmdJZCB9IDoge30pLFxuICAgICAgICB9O1xuXG4gICAgICAgIHJldHVybiBhcGlSZXF1ZXN0KCdQT1NUJywgJy9hcGkvZG9jdW1lbnRzJywgcGF5bG9hZCk7XG4gICAgICB9XG4gICAgfSxcbiAgICBvblN1Y2Nlc3M6ICgpID0+IHtcbiAgICAgIHRvYXN0KHtcbiAgICAgICAgdGl0bGU6ICdTdWNjZXNzJyxcbiAgICAgICAgZGVzY3JpcHRpb246IGNyZWF0ZU1vZGUgPT09ICdmaWxlJyA/ICdEb2N1bWVudCB1cGxvYWRlZCBzdWNjZXNzZnVsbHknIDogJ0RvY3VtZW50IGNyZWF0ZWQgc3VjY2Vzc2Z1bGx5JyxcbiAgICAgIH0pO1xuICAgICAgcXVlcnlDbGllbnQuaW52YWxpZGF0ZVF1ZXJpZXMoeyBxdWVyeUtleSB9KTtcbiAgICAgIHNldElzVXBsb2FkRGlhbG9nT3BlbihmYWxzZSk7XG4gICAgICBmb3JtLnJlc2V0KCk7XG4gICAgICBzZXRTZWxlY3RlZEZpbGUobnVsbCk7XG4gICAgICBzZXRUZXh0Q29udGVudCgnJyk7XG4gICAgICBzZXRDcmVhdGVNb2RlKCdmaWxlJyk7XG4gICAgfSxcbiAgICBvbkVycm9yOiAoZXJyb3I6IGFueSkgPT4ge1xuICAgICAgdG9hc3Qoe1xuICAgICAgICB0aXRsZTogJ0Vycm9yJyxcbiAgICAgICAgZGVzY3JpcHRpb246IGVycm9yLm1lc3NhZ2UgfHwgKGNyZWF0ZU1vZGUgPT09ICdmaWxlJyA/ICdGYWlsZWQgdG8gdXBsb2FkIGRvY3VtZW50JyA6ICdGYWlsZWQgdG8gY3JlYXRlIGRvY3VtZW50JyksXG4gICAgICAgIHZhcmlhbnQ6ICdkZXN0cnVjdGl2ZScsXG4gICAgICB9KTtcbiAgICB9LFxuICB9KTtcblxuICAvLyBEZWxldGUgbXV0YXRpb25cbiAgY29uc3QgZGVsZXRlTXV0YXRpb24gPSB1c2VNdXRhdGlvbih7XG4gICAgbXV0YXRpb25GbjogYXN5bmMgKGRvY3VtZW50SWQ6IHN0cmluZykgPT4ge1xuICAgICAgcmV0dXJuIGFwaVJlcXVlc3QoJ0RFTEVURScsIGAvYXBpL2RvY3VtZW50cy8ke2RvY3VtZW50SWR9YCk7XG4gICAgfSxcbiAgICBvblN1Y2Nlc3M6ICgpID0+IHtcbiAgICAgIHRvYXN0KHtcbiAgICAgICAgdGl0bGU6ICdTdWNjZXNzJyxcbiAgICAgICAgZGVzY3JpcHRpb246ICdEb2N1bWVudCBkZWxldGVkIHN1Y2Nlc3NmdWxseScsXG4gICAgICB9KTtcbiAgICAgIHF1ZXJ5Q2xpZW50LmludmFsaWRhdGVRdWVyaWVzKHsgcXVlcnlLZXkgfSk7XG4gICAgfSxcbiAgICBvbkVycm9yOiAoZXJyb3I6IGFueSkgPT4ge1xuICAgICAgdG9hc3Qoe1xuICAgICAgICB0aXRsZTogJ0Vycm9yJyxcbiAgICAgICAgZGVzY3JpcHRpb246IGVycm9yLm1lc3NhZ2UgfHwgJ0ZhaWxlZCB0byBkZWxldGUgZG9jdW1lbnQnLFxuICAgICAgICB2YXJpYW50OiAnZGVzdHJ1Y3RpdmUnLFxuICAgICAgfSk7XG4gICAgfSxcbiAgfSk7XG5cbiAgLy8gRXZlbnQgaGFuZGxlcnNcbiAgY29uc3QgaGFuZGxlQ3JlYXRlRG9jdW1lbnQgPSBhc3luYyAoZGF0YTogYW55KSA9PiB7XG4gICAgYXdhaXQgY3JlYXRlTXV0YXRpb24ubXV0YXRlQXN5bmMoZGF0YSk7XG4gIH07XG5cbiAgY29uc3QgaGFuZGxlRGVsZXRlRG9jdW1lbnQgPSBhc3luYyAoZG9jdW1lbnQ6IERvY3VtZW50KSA9PiB7XG4gICAgaWYgKHdpbmRvdy5jb25maXJtKCdBcmUgeW91IHN1cmUgeW91IHdhbnQgdG8gZGVsZXRlIHRoaXMgZG9jdW1lbnQ/JykpIHtcbiAgICAgIGF3YWl0IGRlbGV0ZU11dGF0aW9uLm11dGF0ZUFzeW5jKGRvY3VtZW50LmlkKTtcbiAgICB9XG4gIH07XG5cbiAgY29uc3QgaGFuZGxlVmlld0RvY3VtZW50ID0gKGRvY3VtZW50OiBEb2N1bWVudCkgPT4ge1xuICAgIHNldFNlbGVjdGVkRG9jdW1lbnQoZG9jdW1lbnQpO1xuICAgIC8vIFJlc2V0IGZvcm0gd2l0aCBkb2N1bWVudCB2YWx1ZXMgZm9yIGVkaXRpbmdcbiAgICBmb3JtLnJlc2V0KHtcbiAgICAgIG5hbWU6IGRvY3VtZW50Lm5hbWUsXG4gICAgICBkZXNjcmlwdGlvbjogZG9jdW1lbnQuZGVzY3JpcHRpb24gfHwgJycsXG4gICAgICBkb2N1bWVudFR5cGU6IGRvY3VtZW50LmRvY3VtZW50VHlwZSxcbiAgICAgIC4uLihjb25maWcudHlwZSA9PT0gJ2J1aWxkaW5nJ1xuICAgICAgICA/IHsgYnVpbGRpbmdJZDogZG9jdW1lbnQuYnVpbGRpbmdJZCB8fCBjb25maWcuZW50aXR5SWQgfVxuICAgICAgICA6IHsgcmVzaWRlbmNlSWQ6IGRvY3VtZW50LnJlc2lkZW5jZUlkIHx8IGNvbmZpZy5lbnRpdHlJZCB9KSxcbiAgICAgIGlzVmlzaWJsZVRvVGVuYW50czogZG9jdW1lbnQuaXNWaXNpYmxlVG9UZW5hbnRzIHx8IGZhbHNlLFxuICAgIH0pO1xuICAgIHNldElzRWRpdE1vZGUodHJ1ZSk7XG4gICAgc2V0SXNWaWV3RGlhbG9nT3Blbih0cnVlKTtcbiAgfTtcblxuICBjb25zdCBoYW5kbGVEb3dubG9hZERvY3VtZW50ID0gKGRvY3VtZW50OiBEb2N1bWVudCkgPT4ge1xuICAgIGlmIChkb2N1bWVudC5maWxlUGF0aCkge1xuICAgICAgY29uc3QgbGluayA9IHdpbmRvdy5kb2N1bWVudC5jcmVhdGVFbGVtZW50KCdhJyk7XG4gICAgICBsaW5rLmhyZWYgPSBgL2FwaS9kb2N1bWVudHMvJHtkb2N1bWVudC5pZH0vZmlsZT9kb3dubG9hZD10cnVlYDtcbiAgICAgIGxpbmsuZG93bmxvYWQgPSBkb2N1bWVudC5maWxlTmFtZSB8fCBkb2N1bWVudC5uYW1lO1xuICAgICAgd2luZG93LmRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQobGluayk7XG4gICAgICBsaW5rLmNsaWNrKCk7XG4gICAgICB3aW5kb3cuZG9jdW1lbnQuYm9keS5yZW1vdmVDaGlsZChsaW5rKTtcbiAgICB9XG4gIH07XG5cbiAgY29uc3QgZm9ybWF0RGF0ZSA9IChkYXRlU3RyaW5nOiBzdHJpbmcpID0+IHtcbiAgICByZXR1cm4gbmV3IERhdGUoZGF0ZVN0cmluZykudG9Mb2NhbGVEYXRlU3RyaW5nKCk7XG4gIH07XG5cbiAgY29uc3QgZm9ybWF0RmlsZVNpemUgPSAoYnl0ZXM/OiBudW1iZXIpID0+IHtcbiAgICBpZiAoIWJ5dGVzKSByZXR1cm4gJ1Vua25vd24gc2l6ZSc7XG4gICAgY29uc3Qgc2l6ZXMgPSBbJ0J5dGVzJywgJ0tCJywgJ01CJywgJ0dCJ107XG4gICAgY29uc3QgaSA9IE1hdGguZmxvb3IoTWF0aC5sb2coYnl0ZXMpIC8gTWF0aC5sb2coMTAyNCkpO1xuICAgIHJldHVybiBNYXRoLnJvdW5kKChieXRlcyAvIE1hdGgucG93KDEwMjQsIGkpKSAqIDEwMCkgLyAxMDAgKyAnICcgKyBzaXplc1tpXTtcbiAgfTtcblxuICBpZiAoIWNvbmZpZy5lbnRpdHlJZCkge1xuICAgIHJldHVybiAoXG4gICAgICA8ZGl2IGNsYXNzTmFtZT0nZmxleC0xIGZsZXggZmxleC1jb2wgb3ZlcmZsb3ctaGlkZGVuJz5cbiAgICAgICAgPEhlYWRlclxuICAgICAgICAgIHRpdGxlPXtgJHtjb25maWcudHlwZSA9PT0gJ2J1aWxkaW5nJyA/ICdCdWlsZGluZycgOiAnUmVzaWRlbmNlJ30gRG9jdW1lbnRzYH1cbiAgICAgICAgICBzdWJ0aXRsZT0nRW50aXR5IElEIGlzIHJlcXVpcmVkJ1xuICAgICAgICAvPlxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT0nZmxleC0xIG92ZXJmbG93LWF1dG8gcC02Jz5cbiAgICAgICAgICA8Q2FyZD5cbiAgICAgICAgICAgIDxDYXJkQ29udGVudCBjbGFzc05hbWU9J2ZsZXggZmxleC1jb2wgaXRlbXMtY2VudGVyIGp1c3RpZnktY2VudGVyIHB5LTEyJz5cbiAgICAgICAgICAgICAgPEJ1aWxkaW5nIGNsYXNzTmFtZT0naC0xMiB3LTEyIHRleHQtZ3JheS00MDAgbWItNCcgLz5cbiAgICAgICAgICAgICAgPGgzIGNsYXNzTmFtZT0ndGV4dC1sZyBmb250LW1lZGl1bSB0ZXh0LWdyYXktOTAwIG1iLTInPlxuICAgICAgICAgICAgICAgIHtjb25maWcudHlwZSA9PT0gJ2J1aWxkaW5nJyA/ICdCdWlsZGluZycgOiAnUmVzaWRlbmNlJ30gSUQgUmVxdWlyZWRcbiAgICAgICAgICAgICAgPC9oMz5cbiAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPSd0ZXh0LWdyYXktNTAwJz5QbGVhc2UgcHJvdmlkZSBhIHtjb25maWcudHlwZX0gSUQgdG8gdmlldyBkb2N1bWVudHMuPC9wPlxuICAgICAgICAgICAgPC9DYXJkQ29udGVudD5cbiAgICAgICAgICA8L0NhcmQ+XG4gICAgICAgIDwvZGl2PlxuICAgICAgPC9kaXY+XG4gICAgKTtcbiAgfVxuXG4gIGNvbnN0IGVudGl0eU5vdEZvdW5kID0gY29uZmlnLmVudGl0eUlkICYmICFlbnRpdHkgJiYgIWRvY3VtZW50c0xvYWRpbmc7XG5cbiAgaWYgKGVudGl0eU5vdEZvdW5kKSB7XG4gICAgcmV0dXJuIChcbiAgICAgIDxkaXYgY2xhc3NOYW1lPSdmbGV4LTEgZmxleCBmbGV4LWNvbCBvdmVyZmxvdy1oaWRkZW4nPlxuICAgICAgICA8SGVhZGVyXG4gICAgICAgICAgdGl0bGU9e2Ake2NvbmZpZy50eXBlID09PSAnYnVpbGRpbmcnID8gJ0J1aWxkaW5nJyA6ICdSZXNpZGVuY2UnfSBOb3QgRm91bmRgfVxuICAgICAgICAgIHN1YnRpdGxlPXtgVGhlICR7Y29uZmlnLnR5cGV9IElEIHByb3ZpZGVkIGRvZXMgbm90IGV4aXN0YH1cbiAgICAgICAgLz5cbiAgICAgICAgPGRpdiBjbGFzc05hbWU9J2ZsZXgtMSBvdmVyZmxvdy1hdXRvIHAtNic+XG4gICAgICAgICAgPENhcmQ+XG4gICAgICAgICAgICA8Q2FyZENvbnRlbnQgY2xhc3NOYW1lPSdmbGV4IGZsZXgtY29sIGl0ZW1zLWNlbnRlciBqdXN0aWZ5LWNlbnRlciBweS0xMic+XG4gICAgICAgICAgICAgIDxCdWlsZGluZyBjbGFzc05hbWU9J2gtMTIgdy0xMiB0ZXh0LWdyYXktNDAwIG1iLTQnIC8+XG4gICAgICAgICAgICAgIDxoMyBjbGFzc05hbWU9J3RleHQtbGcgZm9udC1tZWRpdW0gdGV4dC1ncmF5LTkwMCBtYi0yJz5cbiAgICAgICAgICAgICAgICB7Y29uZmlnLnR5cGUgPT09ICdidWlsZGluZycgPyAnQnVpbGRpbmcnIDogJ1Jlc2lkZW5jZSd9IE5vdCBGb3VuZFxuICAgICAgICAgICAgICA8L2gzPlxuICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9J3RleHQtZ3JheS01MDAnPlxuICAgICAgICAgICAgICAgIFRoZSB7Y29uZmlnLnR5cGV9IHdpdGggSUQgXCJ7Y29uZmlnLmVudGl0eUlkfVwiIGRvZXMgbm90IGV4aXN0IG9yIHlvdSBkb24ndCBoYXZlXG4gICAgICAgICAgICAgICAgYWNjZXNzIHRvIGl0LlxuICAgICAgICAgICAgICA8L3A+XG4gICAgICAgICAgICAgIDxCdXR0b25cbiAgICAgICAgICAgICAgICB2YXJpYW50PSdvdXRsaW5lJ1xuICAgICAgICAgICAgICAgIGNsYXNzTmFtZT0nbXQtNCdcbiAgICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiBuYXZpZ2F0ZShgLyR7Y29uZmlnLnVzZXJSb2xlfXMvJHtjb25maWcudHlwZX1zYCl9XG4gICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICBCYWNrIHRvIHtjb25maWcudHlwZSA9PT0gJ2J1aWxkaW5nJyA/ICdCdWlsZGluZ3MnIDogJ1Jlc2lkZW5jZXMnfVxuICAgICAgICAgICAgICA8L0J1dHRvbj5cbiAgICAgICAgICAgIDwvQ2FyZENvbnRlbnQ+XG4gICAgICAgICAgPC9DYXJkPlxuICAgICAgICA8L2Rpdj5cbiAgICAgIDwvZGl2PlxuICAgICk7XG4gIH1cblxuICByZXR1cm4gKFxuICAgIDxkaXYgY2xhc3NOYW1lPSdmbGV4LTEgZmxleCBmbGV4LWNvbCBvdmVyZmxvdy1oaWRkZW4nPlxuICAgICAgPEhlYWRlclxuICAgICAgICB0aXRsZT17YCR7Y29uZmlnLnR5cGUgPT09ICdidWlsZGluZycgPyAoZW50aXR5IGFzIEJ1aWxkaW5nVHlwZSk/Lm5hbWUgfHwgJ0J1aWxkaW5nJyA6IChlbnRpdHkgYXMgUmVzaWRlbmNlKT8udW5pdE51bWJlciA/IGBVbml0ICR7KGVudGl0eSBhcyBSZXNpZGVuY2UpLnVuaXROdW1iZXJ9YCA6ICdSZXNpZGVuY2UnfSBEb2N1bWVudHNgfVxuICAgICAgICBzdWJ0aXRsZT17YCR7Y29uZmlnLnVzZXJSb2xlID09PSAnbWFuYWdlcicgPyAnTWFuYWdlJyA6ICdWaWV3J30gZG9jdW1lbnRzIGZvciAke2NvbmZpZy50eXBlID09PSAnYnVpbGRpbmcnID8gKGVudGl0eSBhcyBCdWlsZGluZ1R5cGUpPy5uYW1lIHx8ICd0aGlzIGJ1aWxkaW5nJyA6IChlbnRpdHkgYXMgUmVzaWRlbmNlKT8udW5pdE51bWJlciA/IGBVbml0ICR7KGVudGl0eSBhcyBSZXNpZGVuY2UpLnVuaXROdW1iZXJ9YCA6ICd0aGlzIHJlc2lkZW5jZSd9YH1cbiAgICAgIC8+XG5cbiAgICAgIDxkaXYgY2xhc3NOYW1lPSdmbGV4LTEgb3ZlcmZsb3ctYXV0byBwLTYnPlxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT0nbWF4LXctN3hsIG14LWF1dG8nPlxuICAgICAgICAgIHsvKiBCYWNrIEJ1dHRvbiBmb3IgcmVzaWRlbnRzICovfVxuICAgICAgICAgIHtjb25maWcudXNlclJvbGUgPT09ICdyZXNpZGVudCcgJiYgKFxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9J21iLTYnPlxuICAgICAgICAgICAgICA8QnV0dG9uXG4gICAgICAgICAgICAgICAgdmFyaWFudD0nZ2hvc3QnXG4gICAgICAgICAgICAgICAgb25DbGljaz17KCkgPT4gbmF2aWdhdGUoYC8ke2NvbmZpZy51c2VyUm9sZX1zLyR7Y29uZmlnLnR5cGV9c2ApfVxuICAgICAgICAgICAgICAgIGNsYXNzTmFtZT0nZmxleCBpdGVtcy1jZW50ZXIgZ2FwLTInXG4gICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICA8QXJyb3dMZWZ0IGNsYXNzTmFtZT0ndy00IGgtNCcgLz5cbiAgICAgICAgICAgICAgICBCYWNrIHRvIHtjb25maWcudHlwZSA9PT0gJ2J1aWxkaW5nJyA/ICdCdWlsZGluZycgOiAnUmVzaWRlbmNlJ31cbiAgICAgICAgICAgICAgPC9CdXR0b24+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICApfVxuXG4gICAgICAgICAgey8qIFNlYXJjaCBhbmQgRmlsdGVyIENvbnRyb2xzICovfVxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSdtYi02Jz5cbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSdmbGV4IGZsZXgtY29sIHNtOmZsZXgtcm93IGdhcC00IG1iLTQnPlxuICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0ncmVsYXRpdmUgZmxleC0xJz5cbiAgICAgICAgICAgICAgICA8U2VhcmNoIGNsYXNzTmFtZT0nYWJzb2x1dGUgbGVmdC0zIHRvcC0zIGgtNCB3LTQgdGV4dC1ncmF5LTQwMCcgLz5cbiAgICAgICAgICAgICAgICA8SW5wdXRcbiAgICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyPSdTZWFyY2ggZG9jdW1lbnRzLi4uJ1xuICAgICAgICAgICAgICAgICAgdmFsdWU9e3NlYXJjaFRlcm19XG4gICAgICAgICAgICAgICAgICBvbkNoYW5nZT17KGUpID0+IHNldFNlYXJjaFRlcm0oZS50YXJnZXQudmFsdWUpfVxuICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPSdwbC0xMCdcbiAgICAgICAgICAgICAgICAgIGRhdGEtdGVzdGlkPSdpbnB1dC1zZWFyY2gnXG4gICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgIDxTZWxlY3QgdmFsdWU9e3NlbGVjdGVkQ2F0ZWdvcnl9IG9uVmFsdWVDaGFuZ2U9e3NldFNlbGVjdGVkQ2F0ZWdvcnl9PlxuICAgICAgICAgICAgICAgIDxTZWxlY3RUcmlnZ2VyIGNsYXNzTmFtZT0ndy1mdWxsIHNtOnctNDgnIGRhdGEtdGVzdGlkPSdzZWxlY3QtY2F0ZWdvcnknPlxuICAgICAgICAgICAgICAgICAgPFNlbGVjdFZhbHVlIHBsYWNlaG9sZGVyPSdBbGwgQ2F0ZWdvcmllcycgLz5cbiAgICAgICAgICAgICAgICA8L1NlbGVjdFRyaWdnZXI+XG4gICAgICAgICAgICAgICAgPFNlbGVjdENvbnRlbnQ+XG4gICAgICAgICAgICAgICAgICA8U2VsZWN0SXRlbSB2YWx1ZT0nYWxsJz5BbGwgQ2F0ZWdvcmllczwvU2VsZWN0SXRlbT5cbiAgICAgICAgICAgICAgICAgIHtkb2N1bWVudENhdGVnb3JpZXMubWFwKChjYXRlZ29yeSkgPT4gKFxuICAgICAgICAgICAgICAgICAgICA8U2VsZWN0SXRlbSBrZXk9e2NhdGVnb3J5Ll92YWx1ZX0gdmFsdWU9e2NhdGVnb3J5Ll92YWx1ZX0+XG4gICAgICAgICAgICAgICAgICAgICAge2NhdGVnb3J5LmxhYmVsfVxuICAgICAgICAgICAgICAgICAgICA8L1NlbGVjdEl0ZW0+XG4gICAgICAgICAgICAgICAgICApKX1cbiAgICAgICAgICAgICAgICA8L1NlbGVjdENvbnRlbnQ+XG4gICAgICAgICAgICAgIDwvU2VsZWN0PlxuICAgICAgICAgICAgPC9kaXY+XG5cbiAgICAgICAgICAgIHsvKiBVcGxvYWQgQnV0dG9uICovfVxuICAgICAgICAgICAgeyhjb25maWcuYWxsb3dVcGxvYWQgfHwgY29uZmlnLmFsbG93Q3JlYXRlKSAmJiAoXG4gICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSdmbGV4IGp1c3RpZnktYmV0d2VlbiBpdGVtcy1jZW50ZXInPlxuICAgICAgICAgICAgICAgIDxkaXY+PC9kaXY+XG4gICAgICAgICAgICAgICAgPERpYWxvZyBvcGVuPXtpc1VwbG9hZERpYWxvZ09wZW59IG9uT3BlbkNoYW5nZT17c2V0SXNVcGxvYWREaWFsb2dPcGVufT5cbiAgICAgICAgICAgICAgICAgIDxEaWFsb2dUcmlnZ2VyIGFzQ2hpbGQ+XG4gICAgICAgICAgICAgICAgICAgIDxCdXR0b24gZGF0YS10ZXN0aWQ9J2J1dHRvbi11cGxvYWQnPlxuICAgICAgICAgICAgICAgICAgICAgIDxQbHVzIGNsYXNzTmFtZT0ndy00IGgtNCBtci0yJyAvPlxuICAgICAgICAgICAgICAgICAgICAgIFVwbG9hZCBEb2N1bWVudFxuICAgICAgICAgICAgICAgICAgICA8L0J1dHRvbj5cbiAgICAgICAgICAgICAgICAgIDwvRGlhbG9nVHJpZ2dlcj5cbiAgICAgICAgICAgICAgICAgIDxEaWFsb2dDb250ZW50IGNsYXNzTmFtZT0nbWF4LXctbWQgbWF4LWgtWzkwdmhdIG92ZXJmbG93LXktYXV0byc+XG4gICAgICAgICAgICAgICAgICAgIDxEaWFsb2dIZWFkZXI+XG4gICAgICAgICAgICAgICAgICAgICAgPERpYWxvZ1RpdGxlPkNyZWF0ZSBOZXcgRG9jdW1lbnQ8L0RpYWxvZ1RpdGxlPlxuICAgICAgICAgICAgICAgICAgICAgIDxEaWFsb2dEZXNjcmlwdGlvbj5cbiAgICAgICAgICAgICAgICAgICAgICAgIEFkZCBhIG5ldyBkb2N1bWVudCB0byB0aGlzIHtjb25maWcudHlwZX0uIFlvdSBjYW4gYXR0YWNoIGEgZmlsZSBvciBjcmVhdGUgYVxuICAgICAgICAgICAgICAgICAgICAgICAgdGV4dC1vbmx5IGRvY3VtZW50IGVudHJ5LlxuICAgICAgICAgICAgICAgICAgICAgIDwvRGlhbG9nRGVzY3JpcHRpb24+XG4gICAgICAgICAgICAgICAgICAgIDwvRGlhbG9nSGVhZGVyPlxuICAgICAgICAgICAgICAgICAgICA8Rm9ybSB7Li4uZm9ybX0+XG4gICAgICAgICAgICAgICAgICAgICAgPGZvcm1cbiAgICAgICAgICAgICAgICAgICAgICAgIG9uU3VibWl0PXtmb3JtLmhhbmRsZVN1Ym1pdChoYW5kbGVDcmVhdGVEb2N1bWVudCl9XG4gICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9J3NwYWNlLXktNidcbiAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICB7LyogVE9QIFNFQ1RJT046IE1hbnVhbCBJbnB1dCBGaWVsZHMgKi99XG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0nc3BhY2UteS00Jz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPEZvcm1GaWVsZFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRyb2w9e2Zvcm0uY29udHJvbH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lPSduYW1lJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlbmRlcj17KHsgZmllbGQgfSkgPT4gKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPEZvcm1JdGVtPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8Rm9ybUxhYmVsPkRvY3VtZW50IE5hbWU8L0Zvcm1MYWJlbD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPEZvcm1Db250cm9sPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxJbnB1dCB7Li4uZmllbGR9IGRhdGEtdGVzdGlkPSdpbnB1dC1kb2N1bWVudC1uYW1lJyAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L0Zvcm1Db250cm9sPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8Rm9ybU1lc3NhZ2UgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvRm9ybUl0ZW0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cblxuICAgICAgICAgICAgICAgICAgICAgICAgICA8Rm9ybUZpZWxkXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udHJvbD17Zm9ybS5jb250cm9sfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU9J2Rlc2NyaXB0aW9uJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlbmRlcj17KHsgZmllbGQgfSkgPT4gKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPEZvcm1JdGVtPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8Rm9ybUxhYmVsPkRlc2NyaXB0aW9uIChPcHRpb25hbCk8L0Zvcm1MYWJlbD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPEZvcm1Db250cm9sPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxJbnB1dCB7Li4uZmllbGR9IGRhdGEtdGVzdGlkPSdpbnB1dC1kZXNjcmlwdGlvbicgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9Gb3JtQ29udHJvbD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPEZvcm1NZXNzYWdlIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L0Zvcm1JdGVtPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgIC8+XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPEZvcm1GaWVsZFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRyb2w9e2Zvcm0uY29udHJvbH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lPSdkb2N1bWVudFR5cGUnXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVuZGVyPXsoeyBmaWVsZCB9KSA9PiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8Rm9ybUl0ZW0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxGb3JtTGFiZWw+RG9jdW1lbnQgQ2F0ZWdvcnk8L0Zvcm1MYWJlbD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPFNlbGVjdCBvblZhbHVlQ2hhbmdlPXtmaWVsZC5vbkNoYW5nZX0gdmFsdWU9e2ZpZWxkLnZhbHVlfT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8Rm9ybUNvbnRyb2w+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8U2VsZWN0VHJpZ2dlciBkYXRhLXRlc3RpZD0nc2VsZWN0LWRvY3VtZW50LXR5cGUnPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8U2VsZWN0VmFsdWUgcGxhY2Vob2xkZXI9J1NlbGVjdCBjYXRlZ29yeScgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvU2VsZWN0VHJpZ2dlcj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L0Zvcm1Db250cm9sPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxTZWxlY3RDb250ZW50PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2RvY3VtZW50Q2F0ZWdvcmllcy5tYXAoKGNhdGVnb3J5KSA9PiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxTZWxlY3RJdGVtIGtleT17Y2F0ZWdvcnkuX3ZhbHVlfSB2YWx1ZT17Y2F0ZWdvcnkuX3ZhbHVlfT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7Y2F0ZWdvcnkubGFiZWx9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvU2VsZWN0SXRlbT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkpfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvU2VsZWN0Q29udGVudD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9TZWxlY3Q+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxGb3JtTWVzc2FnZSAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9Gb3JtSXRlbT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxuXG4gICAgICAgICAgICAgICAgICAgICAgICAgIHsvKiBWaXNpYmlsaXR5IFRvZ2dsZSAqL31cbiAgICAgICAgICAgICAgICAgICAgICAgICAge2NvbmZpZy5zaG93VmlzaWJpbGl0eVRvZ2dsZSAmJiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPEZvcm1GaWVsZFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udHJvbD17Zm9ybS5jb250cm9sfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZT0naXNWaXNpYmxlVG9UZW5hbnRzJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVuZGVyPXsoeyBmaWVsZCB9KSA9PiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxGb3JtSXRlbSBjbGFzc05hbWU9J2ZsZXggZmxleC1yb3cgaXRlbXMtY2VudGVyIHNwYWNlLXgtMyBzcGFjZS15LTAnPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxGb3JtQ29udHJvbD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxpbnB1dFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlPSdjaGVja2JveCdcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2hlY2tlZD17ZmllbGQudmFsdWV9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsoZSkgPT4gZmllbGQub25DaGFuZ2UoZS50YXJnZXQuY2hlY2tlZCl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGEtdGVzdGlkPSdjaGVja2JveC12aXNpYmxlLXRlbmFudHMnXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvRm9ybUNvbnRyb2w+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9J3NwYWNlLXktMSBsZWFkaW5nLW5vbmUnPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPEZvcm1MYWJlbD5WaXNpYmxlIHRvIFRlbmFudHM8L0Zvcm1MYWJlbD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT0ndGV4dC1zbSB0ZXh0LW11dGVkLWZvcmVncm91bmQnPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBBbGxvdyB0ZW5hbnRzIHRvIHZpZXcgdGhpcyBkb2N1bWVudFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9wPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L0Zvcm1JdGVtPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIHsvKiBCT1RUT00gU0VDVElPTjogVXBsb2FkIE1ldGhvZCBTZWxlY3Rpb24gKi99XG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0nc3BhY2UteS00IGJvcmRlci10IHB0LTQnPlxuICAgICAgICAgICAgICAgICAgICAgICAgICA8TGFiZWwgY2xhc3NOYW1lPSd0ZXh0LXNtIGZvbnQtbWVkaXVtJz5DaG9vc2UgRG9jdW1lbnQgVHlwZTwvTGFiZWw+XG4gICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSdmbGV4IHNwYWNlLXgtMyc+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGJ1dHRvblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZT0nYnV0dG9uJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DbGljaz17KCkgPT4gc2V0Q3JlYXRlTW9kZSgnZmlsZScpfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPXtgZmxleC0xIHAtMyByb3VuZGVkLWxnIGJvcmRlciB0ZXh0LXNtIGZvbnQtbWVkaXVtIHRyYW5zaXRpb24tY29sb3JzICR7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNyZWF0ZU1vZGUgPT09ICdmaWxlJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gJ2JvcmRlci1ibHVlLTUwMCBiZy1ibHVlLTUwIHRleHQtYmx1ZS03MDAnXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOiAnYm9yZGVyLWdyYXktMjAwIGhvdmVyOmJvcmRlci1ncmF5LTMwMCdcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1gfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YS10ZXN0aWQ9J2J1dHRvbi1maWxlLW1vZGUnXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg8J+TgSBVcGxvYWQgRmlsZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvYnV0dG9uPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxidXR0b25cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU9J2J1dHRvbidcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHNldENyZWF0ZU1vZGUoJ3RleHQnKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT17YGZsZXgtMSBwLTMgcm91bmRlZC1sZyBib3JkZXIgdGV4dC1zbSBmb250LW1lZGl1bSB0cmFuc2l0aW9uLWNvbG9ycyAke1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjcmVhdGVNb2RlID09PSAndGV4dCdcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA/ICdib3JkZXItYmx1ZS01MDAgYmctYmx1ZS01MCB0ZXh0LWJsdWUtNzAwJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogJ2JvcmRlci1ncmF5LTIwMCBob3Zlcjpib3JkZXItZ3JheS0zMDAnXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9YH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGEtdGVzdGlkPSdidXR0b24tdGV4dC1tb2RlJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIPCfk50gVGV4dCBEb2N1bWVudFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvYnV0dG9uPlxuICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cblxuICAgICAgICAgICAgICAgICAgICAgICAgICB7LyogRHluYW1pYyBDb250ZW50IEJhc2VkIG9uIFNlbGVjdGlvbiAqL31cbiAgICAgICAgICAgICAgICAgICAgICAgICAge2NyZWF0ZU1vZGUgPT09ICdmaWxlJyA/IChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPExhYmVsIGh0bWxGb3I9J2ZpbGUtdXBsb2FkJz5TZWxlY3QgRmlsZSB0byBVcGxvYWQ8L0xhYmVsPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPElucHV0XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkPSdmaWxlLXVwbG9hZCdcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZT0nZmlsZSdcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9eyhlKSA9PiBzZXRTZWxlY3RlZEZpbGUoZS50YXJnZXQuZmlsZXM/LlswXSB8fCBudWxsKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPSdtdC0xJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhLXRlc3RpZD0naW5wdXQtZmlsZSdcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7c2VsZWN0ZWRGaWxlICYmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPSd0ZXh0LXNtIHRleHQtZ3JheS01MDAgbXQtMSc+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgU2VsZWN0ZWQ6IHtzZWxlY3RlZEZpbGUubmFtZX0gKHtNYXRoLnJvdW5kKHNlbGVjdGVkRmlsZS5zaXplIC8gMTAyNCl9eycgJ31cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBLQilcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9wPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgKSA6IChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPExhYmVsIGh0bWxGb3I9J3RleHQtY29udGVudCc+RG9jdW1lbnQgQ29udGVudDwvTGFiZWw+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8VGV4dGFyZWFcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWQ9J3RleHQtY29udGVudCdcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU9e3RleHRDb250ZW50fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17KGUpID0+IHNldFRleHRDb250ZW50KGUudGFyZ2V0LnZhbHVlKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI9J0VudGVyIHRoZSBkb2N1bWVudCBjb250ZW50IGhlcmUuLi4nXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT0nbXQtMSBtaW4taC1bMTIwcHhdJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhLXRlc3RpZD0ndGV4dGFyZWEtY29udGVudCdcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9J3RleHQtc20gdGV4dC1ncmF5LTUwMCBtdC0xJz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgVGhpcyB3aWxsIGNyZWF0ZSBhIHRleHQgZG9jdW1lbnQgdGhhdCBjYW4gYmUgdmlld2VkIGFuZCBlZGl0ZWQgb25saW5lLlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9wPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxEaWFsb2dGb290ZXI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgIDxCdXR0b25cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlPSdidXR0b24nXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyaWFudD0nb3V0bGluZSdcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiBzZXRJc1VwbG9hZERpYWxvZ09wZW4oZmFsc2UpfVxuICAgICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgQ2FuY2VsXG4gICAgICAgICAgICAgICAgICAgICAgICAgIDwvQnV0dG9uPlxuICAgICAgICAgICAgICAgICAgICAgICAgICA8QnV0dG9uXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZT0nc3VibWl0J1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRpc2FibGVkPXtjcmVhdGVNdXRhdGlvbi5pc1BlbmRpbmcgfHwgKGNyZWF0ZU1vZGUgPT09ICdmaWxlJyAmJiAhc2VsZWN0ZWRGaWxlKSB8fCAoY3JlYXRlTW9kZSA9PT0gJ3RleHQnICYmICF0ZXh0Q29udGVudC50cmltKCkpfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGEtdGVzdGlkPSdidXR0b24tY3JlYXRlJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge2NyZWF0ZU11dGF0aW9uLmlzUGVuZGluZyBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gKGNyZWF0ZU1vZGUgPT09ICdmaWxlJyA/ICdVcGxvYWRpbmcuLi4nIDogJ0NyZWF0aW5nLi4uJykgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6ICdDcmVhdGUnfVxuICAgICAgICAgICAgICAgICAgICAgICAgICA8L0J1dHRvbj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvRGlhbG9nRm9vdGVyPlxuICAgICAgICAgICAgICAgICAgICAgIDwvZm9ybT5cbiAgICAgICAgICAgICAgICAgICAgPC9Gb3JtPlxuICAgICAgICAgICAgICAgICAgPC9EaWFsb2dDb250ZW50PlxuICAgICAgICAgICAgICAgIDwvRGlhbG9nPlxuICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICl9XG4gICAgICAgICAgPC9kaXY+XG5cbiAgICAgICAgICB7LyogRG9jdW1lbnRzIERpc3BsYXkgLSBBbHdheXMgZ3JvdXBlZCBieSBjYXRlZ29yeSAqL31cbiAgICAgICAgICB7ZG9jdW1lbnRzTG9hZGluZyA/IChcbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSd0ZXh0LWNlbnRlciBweS04Jz5Mb2FkaW5nIGRvY3VtZW50cy4uLjwvZGl2PlxuICAgICAgICAgICkgOiBmaWx0ZXJlZERvY3VtZW50cy5sZW5ndGggPT09IDAgPyAoXG4gICAgICAgICAgICA8Q2FyZD5cbiAgICAgICAgICAgICAgPENhcmRDb250ZW50IGNsYXNzTmFtZT0ncC04IHRleHQtY2VudGVyJz5cbiAgICAgICAgICAgICAgICA8RmlsZVRleHQgY2xhc3NOYW1lPSd3LTE2IGgtMTYgbXgtYXV0byB0ZXh0LWdyYXktNDAwIG1iLTQnIC8+XG4gICAgICAgICAgICAgICAgPGgzIGNsYXNzTmFtZT0ndGV4dC1sZyBmb250LXNlbWlib2xkIHRleHQtZ3JheS02MDAgbWItMic+Tm8gRG9jdW1lbnRzIEZvdW5kPC9oMz5cbiAgICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9J3RleHQtZ3JheS01MDAnPlxuICAgICAgICAgICAgICAgICAge3NlYXJjaFRlcm0gfHwgc2VsZWN0ZWRDYXRlZ29yeSAhPT0gJ2FsbCcgfHwgc2VsZWN0ZWRZZWFyICE9PSAnYWxsJ1xuICAgICAgICAgICAgICAgICAgICA/ICdObyBkb2N1bWVudHMgbWF0Y2ggeW91ciBjdXJyZW50IGZpbHRlcnMuJ1xuICAgICAgICAgICAgICAgICAgICA6IGBObyBkb2N1bWVudHMgYXJlIGF2YWlsYWJsZSBmb3IgdGhpcyAke2NvbmZpZy50eXBlfS5gfVxuICAgICAgICAgICAgICAgIDwvcD5cbiAgICAgICAgICAgICAgPC9DYXJkQ29udGVudD5cbiAgICAgICAgICAgIDwvQ2FyZD5cbiAgICAgICAgICApIDogKFxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9J3NwYWNlLXktNic+XG4gICAgICAgICAgICAgIHsvKiBDYXRlZ29yeSBWaWV3IC0gQWx3YXlzIHNob3cgZG9jdW1lbnRzIGdyb3VwZWQgYnkgY2F0ZWdvcnkgKi99XG4gICAgICAgICAgICAgIHtkb2N1bWVudENhdGVnb3JpZXMubWFwKChjYXRlZ29yeSkgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IGNhdGVnb3J5RG9jdW1lbnRzID0gZG9jdW1lbnRzQnlDYXRlZ29yeVtjYXRlZ29yeS5fdmFsdWVdIHx8IFtdO1xuICAgICAgICAgICAgICAgIGlmIChjYXRlZ29yeURvY3VtZW50cy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICAgICAgICA8Q2FyZCBrZXk9e2NhdGVnb3J5Ll92YWx1ZX0gZGF0YS10ZXN0aWQ9e2BjYXRlZ29yeS0ke2NhdGVnb3J5Ll92YWx1ZX1gfT5cbiAgICAgICAgICAgICAgICAgICAgPENhcmRIZWFkZXI+XG4gICAgICAgICAgICAgICAgICAgICAgPENhcmRUaXRsZSBjbGFzc05hbWU9J2ZsZXggaXRlbXMtY2VudGVyIGdhcC0yJz5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxGaWxlVGV4dCBjbGFzc05hbWU9J2gtNSB3LTUnIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICB7Y2F0ZWdvcnkubGFiZWx9XG4gICAgICAgICAgICAgICAgICAgICAgICA8QmFkZ2UgdmFyaWFudD0nc2Vjb25kYXJ5Jz57Y2F0ZWdvcnlEb2N1bWVudHMubGVuZ3RofTwvQmFkZ2U+XG4gICAgICAgICAgICAgICAgICAgICAgPC9DYXJkVGl0bGU+XG4gICAgICAgICAgICAgICAgICAgIDwvQ2FyZEhlYWRlcj5cbiAgICAgICAgICAgICAgICAgICAgPENhcmRDb250ZW50PlxuICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSdncmlkIGdyaWQtY29scy0xIG1kOmdyaWQtY29scy0yIGxnOmdyaWQtY29scy0zIGdhcC00Jz5cbiAgICAgICAgICAgICAgICAgICAgICAgIHtjYXRlZ29yeURvY3VtZW50cy5tYXAoKGRvY3VtZW50KSA9PiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgIDxDYXJkXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAga2V5PXtkb2N1bWVudC5pZH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9J2N1cnNvci1wb2ludGVyIGhvdmVyOnNoYWRvdy1tZCB0cmFuc2l0aW9uLXNoYWRvdydcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhLXRlc3RpZD17YGRvY3VtZW50LWNhcmQtJHtkb2N1bWVudC5pZH1gfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IGhhbmRsZVZpZXdEb2N1bWVudChkb2N1bWVudCl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8Q2FyZENvbnRlbnQgY2xhc3NOYW1lPSdwLTQnPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9J2ZsZXggaXRlbXMtc3RhcnQganVzdGlmeS1iZXR3ZWVuIG1iLTInPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aDRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9J2ZvbnQtbWVkaXVtIHRleHQtc20gdHJ1bmNhdGUgZmxleC0xIG1yLTInXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YS10ZXN0aWQ9e2Bkb2N1bWVudC1uYW1lLSR7ZG9jdW1lbnQuaWR9YH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtkb2N1bWVudC5uYW1lfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2g0PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0nZmxleCBnYXAtMSc+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2NvbmZpZy5hbGxvd0VkaXQgJiYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPEJ1dHRvblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzaXplPSdzbSdcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyaWFudD0nZ2hvc3QnXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9eyhlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRTZWxlY3RlZERvY3VtZW50KGRvY3VtZW50KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBSZXNldCBmb3JtIHdpdGggZG9jdW1lbnQgdmFsdWVzIGZvciBlZGl0aW5nXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9ybS5yZXNldCh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lOiBkb2N1bWVudC5uYW1lLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVzY3JpcHRpb246IGRvY3VtZW50LmRlc2NyaXB0aW9uIHx8ICcnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnRUeXBlOiBkb2N1bWVudC5kb2N1bWVudFR5cGUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuLi4oY29uZmlnLnR5cGUgPT09ICdidWlsZGluZydcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPyB7IGJ1aWxkaW5nSWQ6IGRvY3VtZW50LmJ1aWxkaW5nSWQgfHwgY29uZmlnLmVudGl0eUlkIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOiB7IHJlc2lkZW5jZUlkOiBkb2N1bWVudC5yZXNpZGVuY2VJZCB8fCBjb25maWcuZW50aXR5SWQgfSksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpc1Zpc2libGVUb1RlbmFudHM6IGRvY3VtZW50LmlzVmlzaWJsZVRvVGVuYW50cyB8fCBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRJc0VkaXRNb2RlKHRydWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldElzVmlld0RpYWxvZ09wZW4odHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGEtdGVzdGlkPXtgYnV0dG9uLWVkaXQtJHtkb2N1bWVudC5pZH1gfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8RWRpdCBjbGFzc05hbWU9J2gtMyB3LTMnIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L0J1dHRvbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPSd0ZXh0LXhzIHRleHQtZ3JheS01MDAgbWItMidcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YS10ZXN0aWQ9e2Bkb2N1bWVudC1kYXRlLSR7ZG9jdW1lbnQuaWR9YH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2Zvcm1hdERhdGUoZG9jdW1lbnQuY3JlYXRlZEF0KX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvcD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtkb2N1bWVudC5maWxlUGF0aCAmJiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxCYWRnZSB2YXJpYW50PSdvdXRsaW5lJyBjbGFzc05hbWU9J3RleHQteHMnPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtmb3JtYXRGaWxlU2l6ZShkb2N1bWVudC5maWxlU2l6ZSl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvQmFkZ2U+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvQ2FyZENvbnRlbnQ+XG4gICAgICAgICAgICAgICAgICAgICAgICAgIDwvQ2FyZD5cbiAgICAgICAgICAgICAgICAgICAgICAgICkpfVxuICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICA8L0NhcmRDb250ZW50PlxuICAgICAgICAgICAgICAgICAgPC9DYXJkPlxuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgIH0pfVxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgKX1cbiAgICAgICAgPC9kaXY+XG4gICAgICA8L2Rpdj5cblxuICAgICAgey8qIERvY3VtZW50IERldGFpbHMgRGlhbG9nICovfVxuICAgICAgPERpYWxvZ1xuICAgICAgICBvcGVuPXtpc1ZpZXdEaWFsb2dPcGVufVxuICAgICAgICBvbk9wZW5DaGFuZ2U9eyhvcGVuKSA9PiB7XG4gICAgICAgICAgc2V0SXNWaWV3RGlhbG9nT3BlbihvcGVuKTtcbiAgICAgICAgICBpZiAoIW9wZW4pIHtcbiAgICAgICAgICAgIHNldFNlbGVjdGVkRG9jdW1lbnQobnVsbCk7XG4gICAgICAgICAgICBzZXRJc0VkaXRNb2RlKGZhbHNlKTtcbiAgICAgICAgICB9XG4gICAgICAgIH19XG4gICAgICA+XG4gICAgICAgIDxEaWFsb2dDb250ZW50IGNsYXNzTmFtZT0nbWF4LXctbWQgbWF4LWgtWzkwdmhdIG92ZXJmbG93LXktYXV0byc+XG4gICAgICAgICAgPERpYWxvZ0hlYWRlcj5cbiAgICAgICAgICAgIDxEaWFsb2dUaXRsZT5Eb2N1bWVudCBEZXRhaWxzPC9EaWFsb2dUaXRsZT5cbiAgICAgICAgICAgIDxEaWFsb2dEZXNjcmlwdGlvbj5cbiAgICAgICAgICAgICAgVXBkYXRlIHRoZSBkb2N1bWVudCBpbmZvcm1hdGlvbi4gTm90ZTogRmlsZSBjb250ZW50IGNhbm5vdCBiZSBjaGFuZ2VkLCBvbmx5IG1ldGFkYXRhLlxuICAgICAgICAgICAgPC9EaWFsb2dEZXNjcmlwdGlvbj5cbiAgICAgICAgICA8L0RpYWxvZ0hlYWRlcj5cbiAgICAgICAgICB7c2VsZWN0ZWREb2N1bWVudCAmJiAoXG4gICAgICAgICAgICA8Rm9ybSB7Li4uZm9ybX0+XG4gICAgICAgICAgICAgIDxmb3JtXG4gICAgICAgICAgICAgICAgb25TdWJtaXQ9e2Zvcm0uaGFuZGxlU3VibWl0KGFzeW5jIChkYXRhKSA9PiB7XG4gICAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGFwaVJlcXVlc3QoJ1BVVCcsIGAvYXBpL2RvY3VtZW50cy8ke3NlbGVjdGVkRG9jdW1lbnQuaWR9YCwgZGF0YSk7XG4gICAgICAgICAgICAgICAgICAgIHRvYXN0KHtcbiAgICAgICAgICAgICAgICAgICAgICB0aXRsZTogJ1N1Y2Nlc3MnLFxuICAgICAgICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiAnRG9jdW1lbnQgdXBkYXRlZCBzdWNjZXNzZnVsbHknLFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgcXVlcnlDbGllbnQuaW52YWxpZGF0ZVF1ZXJpZXMoeyBxdWVyeUtleSB9KTtcbiAgICAgICAgICAgICAgICAgICAgc2V0SXNWaWV3RGlhbG9nT3BlbihmYWxzZSk7XG4gICAgICAgICAgICAgICAgICAgIHNldElzRWRpdE1vZGUoZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICBzZXRTZWxlY3RlZERvY3VtZW50KG51bGwpO1xuICAgICAgICAgICAgICAgICAgfSBjYXRjaCAoZXJyb3I6IGFueSkge1xuICAgICAgICAgICAgICAgICAgICB0b2FzdCh7XG4gICAgICAgICAgICAgICAgICAgICAgdGl0bGU6ICdFcnJvcicsXG4gICAgICAgICAgICAgICAgICAgICAgZGVzY3JpcHRpb246IGVycm9yLm1lc3NhZ2UgfHwgJ0ZhaWxlZCB0byB1cGRhdGUgZG9jdW1lbnQnLFxuICAgICAgICAgICAgICAgICAgICAgIHZhcmlhbnQ6ICdkZXN0cnVjdGl2ZScsXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pfVxuICAgICAgICAgICAgICAgIGNsYXNzTmFtZT0nc3BhY2UteS00J1xuICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgPEZvcm1GaWVsZFxuICAgICAgICAgICAgICAgICAgY29udHJvbD17Zm9ybS5jb250cm9sfVxuICAgICAgICAgICAgICAgICAgbmFtZT0nbmFtZSdcbiAgICAgICAgICAgICAgICAgIHJlbmRlcj17KHsgZmllbGQgfSkgPT4gKFxuICAgICAgICAgICAgICAgICAgICA8Rm9ybUl0ZW0+XG4gICAgICAgICAgICAgICAgICAgICAgPEZvcm1MYWJlbD5Eb2N1bWVudCBOYW1lPC9Gb3JtTGFiZWw+XG4gICAgICAgICAgICAgICAgICAgICAgPEZvcm1Db250cm9sPlxuICAgICAgICAgICAgICAgICAgICAgICAgPElucHV0IHsuLi5maWVsZH0gZGF0YS10ZXN0aWQ9J2lucHV0LWVkaXQtbmFtZScgLz5cbiAgICAgICAgICAgICAgICAgICAgICA8L0Zvcm1Db250cm9sPlxuICAgICAgICAgICAgICAgICAgICAgIDxGb3JtTWVzc2FnZSAvPlxuICAgICAgICAgICAgICAgICAgICA8L0Zvcm1JdGVtPlxuICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAvPlxuXG4gICAgICAgICAgICAgICAgPEZvcm1GaWVsZFxuICAgICAgICAgICAgICAgICAgY29udHJvbD17Zm9ybS5jb250cm9sfVxuICAgICAgICAgICAgICAgICAgbmFtZT0nZGVzY3JpcHRpb24nXG4gICAgICAgICAgICAgICAgICByZW5kZXI9eyh7IGZpZWxkIH0pID0+IChcbiAgICAgICAgICAgICAgICAgICAgPEZvcm1JdGVtPlxuICAgICAgICAgICAgICAgICAgICAgIDxGb3JtTGFiZWw+RGVzY3JpcHRpb24gKE9wdGlvbmFsKTwvRm9ybUxhYmVsPlxuICAgICAgICAgICAgICAgICAgICAgIDxGb3JtQ29udHJvbD5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxJbnB1dCB7Li4uZmllbGR9IGRhdGEtdGVzdGlkPSdpbnB1dC1lZGl0LWRlc2NyaXB0aW9uJyAvPlxuICAgICAgICAgICAgICAgICAgICAgIDwvRm9ybUNvbnRyb2w+XG4gICAgICAgICAgICAgICAgICAgICAgPEZvcm1NZXNzYWdlIC8+XG4gICAgICAgICAgICAgICAgICAgIDwvRm9ybUl0ZW0+XG4gICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgIC8+XG5cbiAgICAgICAgICAgICAgICA8Rm9ybUZpZWxkXG4gICAgICAgICAgICAgICAgICBjb250cm9sPXtmb3JtLmNvbnRyb2x9XG4gICAgICAgICAgICAgICAgICBuYW1lPSdkb2N1bWVudFR5cGUnXG4gICAgICAgICAgICAgICAgICByZW5kZXI9eyh7IGZpZWxkIH0pID0+IChcbiAgICAgICAgICAgICAgICAgICAgPEZvcm1JdGVtPlxuICAgICAgICAgICAgICAgICAgICAgIDxGb3JtTGFiZWw+RG9jdW1lbnQgQ2F0ZWdvcnk8L0Zvcm1MYWJlbD5cbiAgICAgICAgICAgICAgICAgICAgICA8U2VsZWN0IG9uVmFsdWVDaGFuZ2U9e2ZpZWxkLm9uQ2hhbmdlfSB2YWx1ZT17ZmllbGQudmFsdWV9PlxuICAgICAgICAgICAgICAgICAgICAgICAgPEZvcm1Db250cm9sPlxuICAgICAgICAgICAgICAgICAgICAgICAgICA8U2VsZWN0VHJpZ2dlciBkYXRhLXRlc3RpZD0nc2VsZWN0LWVkaXQtdHlwZSc+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPFNlbGVjdFZhbHVlIHBsYWNlaG9sZGVyPSdTZWxlY3QgY2F0ZWdvcnknIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgIDwvU2VsZWN0VHJpZ2dlcj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvRm9ybUNvbnRyb2w+XG4gICAgICAgICAgICAgICAgICAgICAgICA8U2VsZWN0Q29udGVudD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAge2RvY3VtZW50Q2F0ZWdvcmllcy5tYXAoKGNhdGVnb3J5KSA9PiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPFNlbGVjdEl0ZW0ga2V5PXtjYXRlZ29yeS5fdmFsdWV9IHZhbHVlPXtjYXRlZ29yeS5fdmFsdWV9PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2NhdGVnb3J5LmxhYmVsfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvU2VsZWN0SXRlbT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgKSl9XG4gICAgICAgICAgICAgICAgICAgICAgICA8L1NlbGVjdENvbnRlbnQ+XG4gICAgICAgICAgICAgICAgICAgICAgPC9TZWxlY3Q+XG4gICAgICAgICAgICAgICAgICAgICAgPEZvcm1NZXNzYWdlIC8+XG4gICAgICAgICAgICAgICAgICAgIDwvRm9ybUl0ZW0+XG4gICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgIC8+XG5cbiAgICAgICAgICAgICAgICA8Rm9ybUZpZWxkXG4gICAgICAgICAgICAgICAgICBjb250cm9sPXtmb3JtLmNvbnRyb2x9XG4gICAgICAgICAgICAgICAgICBuYW1lPSdpc1Zpc2libGVUb1RlbmFudHMnXG4gICAgICAgICAgICAgICAgICByZW5kZXI9eyh7IGZpZWxkIH0pID0+IChcbiAgICAgICAgICAgICAgICAgICAgPEZvcm1JdGVtIGNsYXNzTmFtZT0nZmxleCBmbGV4LXJvdyBpdGVtcy1jZW50ZXIgc3BhY2UteC0zIHNwYWNlLXktMCc+XG4gICAgICAgICAgICAgICAgICAgICAgPEZvcm1Db250cm9sPlxuICAgICAgICAgICAgICAgICAgICAgICAgPGlucHV0XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU9J2NoZWNrYm94J1xuICAgICAgICAgICAgICAgICAgICAgICAgICBjaGVja2VkPXtmaWVsZC52YWx1ZX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9eyhlKSA9PiBmaWVsZC5vbkNoYW5nZShlLnRhcmdldC5jaGVja2VkKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YS10ZXN0aWQ9J2NoZWNrYm94LWVkaXQtdmlzaWJsZS10ZW5hbnRzJ1xuICAgICAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgICA8L0Zvcm1Db250cm9sPlxuICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSdzcGFjZS15LTEgbGVhZGluZy1ub25lJz5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxGb3JtTGFiZWw+VmlzaWJsZSB0byBUZW5hbnRzPC9Gb3JtTGFiZWw+XG4gICAgICAgICAgICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9J3RleHQtc20gdGV4dC1tdXRlZC1mb3JlZ3JvdW5kJz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgQWxsb3cgdGVuYW50cyB0byB2aWV3IHRoaXMgZG9jdW1lbnRcbiAgICAgICAgICAgICAgICAgICAgICAgIDwvcD5cbiAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgPC9Gb3JtSXRlbT5cbiAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgLz5cblxuICAgICAgICAgICAgICAgIHsvKiBGaWxlIFZpZXdpbmcgU2VjdGlvbiAtIFVzaW5nIFNoYXJlZCBDb21wb25lbnQgKi99XG4gICAgICAgICAgICAgICAgPEF0dGFjaGVkRmlsZVNlY3Rpb25cbiAgICAgICAgICAgICAgICAgIGVudGl0eVR5cGU9XCJkb2N1bWVudFwiXG4gICAgICAgICAgICAgICAgICBlbnRpdHlJZD17c2VsZWN0ZWREb2N1bWVudD8uaWQgfHwgJyd9XG4gICAgICAgICAgICAgICAgICBmaWxlUGF0aD17c2VsZWN0ZWREb2N1bWVudD8uZmlsZVBhdGh9XG4gICAgICAgICAgICAgICAgICBmaWxlTmFtZT17c2VsZWN0ZWREb2N1bWVudD8uZmlsZU5hbWV9XG4gICAgICAgICAgICAgICAgICBmaWxlU2l6ZT17c2VsZWN0ZWREb2N1bWVudD8uZmlsZVNpemV9XG4gICAgICAgICAgICAgICAgICBmYWxsYmFja05hbWU9e3NlbGVjdGVkRG9jdW1lbnQ/Lm5hbWV9XG4gICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJwdC00IGJvcmRlci10XCJcbiAgICAgICAgICAgICAgICAvPlxuXG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9J2ZsZXggZ2FwLTIgcHQtNCBib3JkZXItdCc+XG4gICAgICAgICAgICAgICAgICB7Y29uZmlnLmFsbG93RGVsZXRlICYmIChcbiAgICAgICAgICAgICAgICAgICAgPEJ1dHRvblxuICAgICAgICAgICAgICAgICAgICAgIHR5cGU9J2J1dHRvbidcbiAgICAgICAgICAgICAgICAgICAgICB2YXJpYW50PSdvdXRsaW5lJ1xuICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzZWxlY3RlZERvY3VtZW50KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIGhhbmRsZURlbGV0ZURvY3VtZW50KHNlbGVjdGVkRG9jdW1lbnQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRJc1ZpZXdEaWFsb2dPcGVuKGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT0ndGV4dC1yZWQtNjAwIGhvdmVyOnRleHQtcmVkLTcwMCdcbiAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgIDxUcmFzaDIgY2xhc3NOYW1lPSd3LTQgaC00IG1yLTInIC8+XG4gICAgICAgICAgICAgICAgICAgICAgRGVsZXRlXG4gICAgICAgICAgICAgICAgICAgIDwvQnV0dG9uPlxuICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICA8L2Rpdj5cblxuICAgICAgICAgICAgICAgIDxEaWFsb2dGb290ZXI+XG4gICAgICAgICAgICAgICAgICA8QnV0dG9uXG4gICAgICAgICAgICAgICAgICAgIHR5cGU9J2J1dHRvbidcbiAgICAgICAgICAgICAgICAgICAgdmFyaWFudD0nb3V0bGluZSdcbiAgICAgICAgICAgICAgICAgICAgb25DbGljaz17KCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgIHNldElzVmlld0RpYWxvZ09wZW4oZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICBDYW5jZWxcbiAgICAgICAgICAgICAgICAgIDwvQnV0dG9uPlxuICAgICAgICAgICAgICAgICAgPEJ1dHRvbiB0eXBlPSdzdWJtaXQnIGRhdGEtdGVzdGlkPSdidXR0b24tc2F2ZS1lZGl0Jz5cbiAgICAgICAgICAgICAgICAgICAgU2F2ZSBDaGFuZ2VzXG4gICAgICAgICAgICAgICAgICA8L0J1dHRvbj5cbiAgICAgICAgICAgICAgICA8L0RpYWxvZ0Zvb3Rlcj5cbiAgICAgICAgICAgICAgPC9mb3JtPlxuICAgICAgICAgICAgPC9Gb3JtPlxuICAgICAgICAgICl9XG4gICAgICAgIDwvRGlhbG9nQ29udGVudD5cbiAgICAgIDwvRGlhbG9nPlxuICAgIDwvZGl2PlxuICApO1xufVxuIl0sInZlcnNpb24iOjN9