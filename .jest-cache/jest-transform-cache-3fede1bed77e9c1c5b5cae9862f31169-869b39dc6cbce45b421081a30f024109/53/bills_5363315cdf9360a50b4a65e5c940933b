e09071123ab2ac20afc54477ebd4be0a
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.default = Bills;
const jsx_runtime_1 = require("react/jsx-runtime");
const react_1 = require("react");
const header_1 = require("@/components/layout/header");
const card_1 = require("@/components/ui/card");
const badge_1 = require("@/components/ui/badge");
const button_1 = require("@/components/ui/button");
const select_1 = require("@/components/ui/select");
const input_1 = require("@/components/ui/input");
const label_1 = require("@/components/ui/label");
const dialog_1 = require("@/components/ui/dialog");
const checkbox_1 = require("@/components/ui/checkbox");
const popover_1 = require("@/components/ui/popover");
const lucide_react_1 = require("lucide-react");
const BillEditForm_1 = require("@/components/BillEditForm");
const BuildingSelectionGrid_1 = require("@/components/BuildingSelectionGrid");
const BillCreateForm_1 = require("@/components/BillCreateForm");
const react_query_1 = require("@tanstack/react-query");
const queryClient_1 = require("@/lib/queryClient");
const utils_1 = require("@/lib/utils");
const BILL_CATEGORIES = [
    'insurance',
    'maintenance',
    'salary',
    'utilities',
    'cleaning',
    'security',
    'landscaping',
    'professional_services',
    'administration',
    'repairs',
    'supplies',
    'taxes',
    'other',
];
const CATEGORY_LABELS = {
    insurance: 'Insurance',
    maintenance: 'Maintenance',
    salary: 'Salary',
    utilities: 'Utilities',
    cleaning: 'Cleaning',
    security: 'Security',
    landscaping: 'Landscaping',
    professional_services: 'Professional Services',
    administration: 'Administration',
    repairs: 'Repairs',
    supplies: 'Supplies',
    taxes: 'Taxes',
    other: 'Other',
};
const MONTHS = [
    { value: '1', label: 'January' },
    { value: '2', label: 'February' },
    { value: '3', label: 'March' },
    { value: '4', label: 'April' },
    { value: '5', label: 'May' },
    { value: '6', label: 'June' },
    { value: '7', label: 'July' },
    { value: '8', label: 'August' },
    { value: '9', label: 'September' },
    { value: '10', label: 'October' },
    { value: '11', label: 'November' },
    { value: '12', label: 'December' },
];
/**
 *
 */
function Bills() {
    const [filters, setFilters] = (0, react_1.useState)({
        buildingId: '',
        category: '',
        year: new Date().getFullYear().toString(),
        months: [],
    });
    const [showCreateDialog, setShowCreateDialog] = (0, react_1.useState)(false);
    const [showAllYears, setShowAllYears] = (0, react_1.useState)(false);
    const queryClient = (0, react_query_1.useQueryClient)();
    // Fetch buildings for filter dropdown
    const { data: buildings = [], isLoading: buildingsLoading, error: buildingsError, } = (0, react_query_1.useQuery)({
        queryKey: ['/api/buildings'],
        queryFn: async () => {
            const response = await (0, queryClient_1.apiRequest)('GET', '/api/buildings');
            return await response.json();
        },
    });
    // Fetch bills based on filters
    const { data: bills = [], isLoading } = (0, react_query_1.useQuery)({
        queryKey: ['/api/bills', filters],
        queryFn: async () => {
            const params = new URLSearchParams(); /**
             * If function.
             * @param filters.buildingId - Filters.buildingId parameter.
             */ /**
            * If function.
            * @param filters.buildingId - Filters.buildingId parameter.
            */
            if (filters.buildingId) {
                params.set('buildingId', filters.buildingId);
            } /**
             * If function.
             * @param filters.category && filters.category !== 'all' - filters.category && filters.category !== 'all' parameter.
             */ /**
            * If function.
            * @param filters.category && filters.category !== 'all' - filters.category && filters.category !== 'all' parameter.
            */
            if (filters.category && filters.category !== 'all') {
                params.set('category', filters.category);
            } /**
             * If function.
             * @param filters.year - Filters.year parameter.
             */ /**
            * If function.
            * @param filters.year - Filters.year parameter.
            */
            if (filters.year) {
                params.set('year', filters.year);
            } /**
             * If function.
             * @param filters.months.length > 0 - filters.months.length > 0 parameter.
             */ /**
            * If function.
            * @param filters.months.length > 0 - filters.months.length > 0 parameter.
            */
            if (filters.months.length > 0) {
                params.set('months', filters.months.join(','));
            }
            const url = `/api/bills${params.toString() ? '?' + params.toString() : ''}`;
            const response = await fetch(url, { credentials: 'include' }); /**
             * If function.
             * @param !response.ok - !response.ok parameter.
             */
            /**
             * If function.
             * @param !response.ok - !response.ok parameter.
             */
            /**
             * If function.
             * @param !response.ok - !response.ok parameter.
             */
            /**
             * If function.
             * @param !response.ok - !response.ok parameter.
             */ /**
            * If function.
            * @param !response.ok - !response.ok parameter.
            */
            /**
             * If function.
             * @param !response.ok - !response.ok parameter.
             */
            /**
             * If function.
             * @param !response.ok - !response.ok parameter.
             */
            /**
             * If function.
             * @param !response.ok - !response.ok parameter.
             */
            if (!response.ok) {
                throw new Error(`Failed to fetch bills: ${response.statusText}`);
            }
            return response.json();
        },
    });
    // Group bills by category
    const billsByCategory = bills.reduce((acc, bill) => {
        const category = bill.category || 'other'; /**
         * If function.
         * @param !acc[category] - !acc[category] parameter.
         */ /**
        * If function.
        * @param !acc[category] - !acc[category] parameter.
        */
        if (!acc[category]) {
            acc[category] = [];
        }
        acc[category].push(bill);
        return acc;
    }, {});
    const handleFilterChange = (key, value) => {
        setFilters((prev) => ({ ...prev, [key]: value }));
    };
    const handleMonthToggle = (monthValue) => {
        setFilters((prev) => ({
            ...prev,
            months: prev.months.includes(monthValue)
                ? prev.months.filter((m) => m !== monthValue)
                : [...prev.months, monthValue],
        }));
    };
    const handleAllMonthsToggle = () => {
        const allMonthValues = MONTHS.map((m) => m.value);
        setFilters((prev) => ({
            ...prev,
            months: prev.months.length === allMonthValues.length ? [] : allMonthValues,
        }));
    };
    const getMonthsDisplayText = () => {
        /**
         * If function.
         * @param filters.months.length === 0 - filters.months.length === 0 parameter.
         */ /**
        * If function.
        * @param filters.months.length === 0 - filters.months.length === 0 parameter.
        */
        if (filters.months.length === 0) {
            return 'All months';
        } /**
         * If function.
         * @param filters.months.length === MONTHS.length - filters.months.length === MONTHS.length parameter.
         */ /**
        * If function.
        * @param filters.months.length === MONTHS.length - filters.months.length === MONTHS.length parameter.
        */
        if (filters.months.length === MONTHS.length) {
            return 'All months';
        } /**
         * If function.
         * @param filters.months.length === 1 - filters.months.length === 1 parameter.
         */ /**
        * If function.
        * @param filters.months.length === 1 - filters.months.length === 1 parameter.
        */
        if (filters.months.length === 1) {
            const month = MONTHS.find((m) => m.value === filters.months[0]);
            return month?.label || 'All months';
        }
        return `${filters.months.length} months`;
    };
    // Get building construction year for minimum year calculation
    const selectedBuilding = Array.isArray(buildings)
        ? buildings.find((b) => b.id === filters.buildingId)
        : undefined;
    const buildingConstructionYear = selectedBuilding?.yearBuilt || new Date().getFullYear();
    const currentYear = new Date().getFullYear();
    // Generate year options based on show all years state
    const getYearOptions = () => {
        /**
         * If function.
         * @param showAllYears - ShowAllYears parameter.
         */ /**
        * If function.
        * @param showAllYears - ShowAllYears parameter.
        */
        if (showAllYears) {
            // Show all years from building construction year to 25 years forward
            const startYear = buildingConstructionYear;
            const endYear = currentYear + 25;
            const totalYears = endYear - startYear + 1;
            return Array.from({ length: totalYears }, (_, i) => startYear + i);
        }
        else {
            // Show current year Â±3 years
            const startYear = currentYear - 3;
            const endYear = currentYear + 3;
            const totalYears = endYear - startYear + 1;
            return Array.from({ length: totalYears }, (_, i) => startYear + i);
        }
    };
    // Show loading state while buildings are loading
    if (buildingsLoading) {
        return ((0, jsx_runtime_1.jsxs)("div", { className: 'flex-1 flex flex-col overflow-hidden', children: [(0, jsx_runtime_1.jsx)(header_1.Header, { title: 'Bills Management', subtitle: 'Manage building expenses and revenue tracking' }), (0, jsx_runtime_1.jsx)("div", { className: 'flex-1 flex items-center justify-center', children: (0, jsx_runtime_1.jsxs)("div", { className: 'text-center', children: [(0, jsx_runtime_1.jsx)("div", { className: 'animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto mb-4' }), (0, jsx_runtime_1.jsx)("p", { className: 'text-gray-500', children: "Loading buildings..." })] }) })] }));
    }
    // Show error state if buildings failed to load
    if (buildingsError) {
        return ((0, jsx_runtime_1.jsxs)("div", { className: 'flex-1 flex flex-col overflow-hidden', children: [(0, jsx_runtime_1.jsx)(header_1.Header, { title: 'Bills Management', subtitle: 'Manage building expenses and revenue tracking' }), (0, jsx_runtime_1.jsx)("div", { className: 'flex-1 flex items-center justify-center', children: (0, jsx_runtime_1.jsxs)("div", { className: 'text-center', children: [(0, jsx_runtime_1.jsx)("p", { className: 'text-red-500 mb-4', children: "Failed to load buildings" }), (0, jsx_runtime_1.jsx)("button", { onClick: () => window.location.reload(), className: 'px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700', children: "Retry" })] }) })] }));
    }
    return ((0, jsx_runtime_1.jsxs)("div", { className: 'flex-1 flex flex-col overflow-hidden', children: [(0, jsx_runtime_1.jsx)(header_1.Header, { title: 'Bills Management', subtitle: 'Manage building expenses and revenue tracking' }), (0, jsx_runtime_1.jsx)("div", { className: 'flex-1 overflow-auto p-6', children: (0, jsx_runtime_1.jsxs)("div", { className: 'max-w-7xl mx-auto space-y-6', children: [(0, jsx_runtime_1.jsxs)(card_1.Card, { children: [(0, jsx_runtime_1.jsx)(card_1.CardHeader, { children: (0, jsx_runtime_1.jsxs)(card_1.CardTitle, { className: 'flex items-center gap-2', children: [(0, jsx_runtime_1.jsx)(lucide_react_1.Filter, { className: 'w-5 h-5' }), "Filters"] }) }), (0, jsx_runtime_1.jsx)(card_1.CardContent, { children: (0, jsx_runtime_1.jsxs)("div", { className: 'grid grid-cols-1 md:grid-cols-5 gap-4', children: [(0, jsx_runtime_1.jsxs)("div", { className: 'space-y-2', children: [(0, jsx_runtime_1.jsxs)(label_1.Label, { htmlFor: 'building-filter', className: 'flex items-center gap-2', children: [(0, jsx_runtime_1.jsx)(lucide_react_1.Building, { className: 'w-4 h-4' }), "Building"] }), (0, jsx_runtime_1.jsxs)(select_1.Select, { value: filters.buildingId, onValueChange: (value) => handleFilterChange('buildingId', value), children: [(0, jsx_runtime_1.jsx)(select_1.SelectTrigger, { id: 'building-filter', children: (0, jsx_runtime_1.jsx)(select_1.SelectValue, { placeholder: 'Select building' }) }), (0, jsx_runtime_1.jsx)(select_1.SelectContent, { children: Array.isArray(buildings) &&
                                                                    buildings.map((building) => ((0, jsx_runtime_1.jsx)(select_1.SelectItem, { value: building.id, children: building.name }, building.id))) })] })] }), (0, jsx_runtime_1.jsxs)("div", { className: 'space-y-2', children: [(0, jsx_runtime_1.jsxs)(label_1.Label, { htmlFor: 'category-filter', className: 'flex items-center gap-2', children: [(0, jsx_runtime_1.jsx)(lucide_react_1.Tag, { className: 'w-4 h-4' }), "Category"] }), (0, jsx_runtime_1.jsxs)(select_1.Select, { value: filters.category, onValueChange: (value) => handleFilterChange('category', value), children: [(0, jsx_runtime_1.jsx)(select_1.SelectTrigger, { id: 'category-filter', children: (0, jsx_runtime_1.jsx)(select_1.SelectValue, { placeholder: 'All categories' }) }), (0, jsx_runtime_1.jsxs)(select_1.SelectContent, { children: [(0, jsx_runtime_1.jsx)(select_1.SelectItem, { value: 'all', children: "All categories" }), BILL_CATEGORIES.map((category) => ((0, jsx_runtime_1.jsx)(select_1.SelectItem, { value: category, children: CATEGORY_LABELS[category] }, category)))] })] })] }), (0, jsx_runtime_1.jsxs)("div", { className: 'space-y-2', children: [(0, jsx_runtime_1.jsxs)(label_1.Label, { htmlFor: 'year-filter', className: 'flex items-center gap-2', children: [(0, jsx_runtime_1.jsx)(lucide_react_1.Calendar, { className: 'w-4 h-4' }), "Year"] }), (0, jsx_runtime_1.jsx)("div", { className: 'space-y-2', children: (0, jsx_runtime_1.jsxs)(select_1.Select, { value: filters.year, onValueChange: (value) => handleFilterChange('year', value), children: [(0, jsx_runtime_1.jsx)(select_1.SelectTrigger, { id: 'year-filter', children: (0, jsx_runtime_1.jsx)(select_1.SelectValue, {}) }), (0, jsx_runtime_1.jsxs)(select_1.SelectContent, { className: 'max-h-[300px] overflow-y-auto', children: [getYearOptions().map((year) => ((0, jsx_runtime_1.jsxs)(select_1.SelectItem, { value: year.toString(), children: [year, year === currentYear && ((0, jsx_runtime_1.jsx)("span", { className: 'ml-2 text-xs text-blue-500', children: "(Current)" }))] }, year))), !showAllYears && ((0, jsx_runtime_1.jsx)("div", { className: 'border-t border-gray-200 mt-2 pt-2', children: (0, jsx_runtime_1.jsxs)(button_1.Button, { variant: 'ghost', size: 'sm', className: 'w-full text-left justify-start text-xs', onClick: () => setShowAllYears(true), children: ["Show more years (", buildingConstructionYear, " - ", currentYear + 25, ")"] }) })), showAllYears && ((0, jsx_runtime_1.jsx)("div", { className: 'border-t border-gray-200 mt-2 pt-2', children: (0, jsx_runtime_1.jsxs)(button_1.Button, { variant: 'ghost', size: 'sm', className: 'w-full text-left justify-start text-xs', onClick: () => setShowAllYears(false), children: ["Show fewer years (", currentYear - 3, " - ", currentYear + 3, ")"] }) }))] })] }) })] }), (0, jsx_runtime_1.jsxs)("div", { className: 'space-y-2', children: [(0, jsx_runtime_1.jsxs)(label_1.Label, { className: 'flex items-center gap-2', children: [(0, jsx_runtime_1.jsx)(lucide_react_1.Calendar, { className: 'w-4 h-4' }), "Months"] }), (0, jsx_runtime_1.jsxs)(popover_1.Popover, { children: [(0, jsx_runtime_1.jsx)(popover_1.PopoverTrigger, { asChild: true, children: (0, jsx_runtime_1.jsxs)(button_1.Button, { variant: 'outline', className: (0, utils_1.cn)('w-full justify-between', filters.months.length === 0 && 'text-muted-foreground'), children: [getMonthsDisplayText(), (0, jsx_runtime_1.jsx)(lucide_react_1.ChevronDown, { className: 'ml-2 h-4 w-4 shrink-0 opacity-50' })] }) }), (0, jsx_runtime_1.jsxs)(popover_1.PopoverContent, { className: 'w-64 p-0', align: 'start', children: [(0, jsx_runtime_1.jsx)("div", { className: 'border-b p-3', children: (0, jsx_runtime_1.jsxs)("div", { className: 'flex items-center space-x-2', children: [(0, jsx_runtime_1.jsx)(checkbox_1.Checkbox, { id: 'all-months', checked: filters.months.length === MONTHS.length, onCheckedChange: handleAllMonthsToggle }), (0, jsx_runtime_1.jsx)(label_1.Label, { htmlFor: 'all-months', className: 'text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70', children: "All Months" })] }) }), (0, jsx_runtime_1.jsx)("div", { className: 'grid grid-cols-2 gap-2 p-3', children: MONTHS.map((month) => ((0, jsx_runtime_1.jsxs)("div", { className: 'flex items-center space-x-2', children: [(0, jsx_runtime_1.jsx)(checkbox_1.Checkbox, { id: `month-${month.value}`, checked: filters.months.includes(month.value), onCheckedChange: () => handleMonthToggle(month.value) }), (0, jsx_runtime_1.jsx)(label_1.Label, { htmlFor: `month-${month.value}`, className: 'text-sm leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70', children: month.label })] }, month.value))) })] })] })] }), (0, jsx_runtime_1.jsxs)("div", { className: 'space-y-2', children: [(0, jsx_runtime_1.jsx)(label_1.Label, { className: 'invisible', children: "Actions" }), (0, jsx_runtime_1.jsxs)(dialog_1.Dialog, { open: showCreateDialog, onOpenChange: setShowCreateDialog, children: [(0, jsx_runtime_1.jsx)(dialog_1.DialogTrigger, { asChild: true, children: (0, jsx_runtime_1.jsx)(button_1.Button, { className: 'w-full', disabled: !filters.buildingId, children: "Create Bill" }) }), (0, jsx_runtime_1.jsxs)(dialog_1.DialogContent, { className: 'max-w-4xl max-h-[90vh] overflow-y-auto', children: [(0, jsx_runtime_1.jsx)(dialog_1.DialogHeader, { children: (0, jsx_runtime_1.jsx)(dialog_1.DialogTitle, { children: "Create New Bill" }) }), (0, jsx_runtime_1.jsx)(BillCreateForm_1.BillCreateForm, { buildingId: filters.buildingId, onClose: () => setShowCreateDialog(false), onSuccess: () => {
                                                                            setShowCreateDialog(false);
                                                                            queryClient.invalidateQueries({ queryKey: ['/api/bills'] });
                                                                        } })] })] })] })] }) })] }), !filters.buildingId ? ((0, jsx_runtime_1.jsx)(BuildingSelectionGrid_1.BuildingSelectionGrid, { buildings: Array.isArray(buildings) ? buildings : [], onBuildingSelect: (buildingId) => handleFilterChange('buildingId', buildingId) })) : isLoading ? ((0, jsx_runtime_1.jsx)(card_1.Card, { children: (0, jsx_runtime_1.jsxs)(card_1.CardContent, { className: 'p-8 text-center', children: [(0, jsx_runtime_1.jsx)("div", { className: 'animate-spin w-8 h-8 border-4 border-primary border-t-transparent rounded-full mx-auto mb-4' }), (0, jsx_runtime_1.jsx)("p", { className: 'text-gray-500', children: "Loading bills..." })] }) })) : Object.keys(billsByCategory).length === 0 ? ((0, jsx_runtime_1.jsx)(card_1.Card, { children: (0, jsx_runtime_1.jsxs)(card_1.CardContent, { className: 'p-8 text-center', children: [(0, jsx_runtime_1.jsx)("h3", { className: 'text-lg font-semibold text-gray-600 mb-2', children: "No Bills Found" }), (0, jsx_runtime_1.jsx)("p", { className: 'text-gray-500 mb-4', children: "No bills found for the selected filters. Create your first bill to get started." }), (0, jsx_runtime_1.jsx)(button_1.Button, { onClick: () => setShowCreateDialog(true), children: "Create First Bill" })] }) })) : ((0, jsx_runtime_1.jsx)("div", { className: 'space-y-6', children: BILL_CATEGORIES.filter((category) => (!filters.category || filters.category === category) &&
                                billsByCategory[category]?.length > 0).map((category) => ((0, jsx_runtime_1.jsx)(BillCategorySection, { category: category, bills: billsByCategory[category] || [], onBillUpdate: () => queryClient.invalidateQueries({ queryKey: ['/api/bills'] }) }, category))) }))] }) })] }));
}
// Component for displaying bills in a category
/**
 *
 * @param root0
 * @param root0.category
 * @param root0.bills
 * @param root0.onBillUpdate
 */
/**
 * BillCategorySection function.
 * @param root0
 * @param root0.category
 * @param root0.bills
 * @param root0.onBillUpdate
 * @returns Function result.
 */
function BillCategorySection({ category, bills, onBillUpdate, }) {
    return ((0, jsx_runtime_1.jsxs)(card_1.Card, { children: [(0, jsx_runtime_1.jsx)(card_1.CardHeader, { children: (0, jsx_runtime_1.jsx)(card_1.CardTitle, { className: 'flex items-center justify-between', children: (0, jsx_runtime_1.jsxs)("div", { className: 'flex items-center gap-2', children: [(0, jsx_runtime_1.jsx)(lucide_react_1.Tag, { className: 'w-5 h-5' }), CATEGORY_LABELS[category], (0, jsx_runtime_1.jsx)(badge_1.Badge, { variant: 'secondary', children: bills.length })] }) }) }), (0, jsx_runtime_1.jsx)(card_1.CardContent, { children: (0, jsx_runtime_1.jsx)("div", { className: 'grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4', children: bills.map((bill) => ((0, jsx_runtime_1.jsx)(BillCard, { bill: bill, onUpdate: onBillUpdate }, bill.id))) }) })] }));
}
// Component for individual bill cards
/**
 *
 * @param root0
 * @param root0.bill
 * @param root0.onUpdate
 */
/**
 * BillCard function.
 * @param root0
 * @param root0.bill
 * @param root0.onUpdate
 * @returns Function result.
 */
function BillCard({ bill, onUpdate }) {
    const [showDetailDialog, setShowDetailDialog] = (0, react_1.useState)(false);
    const [showEditDialog, setShowEditDialog] = (0, react_1.useState)(false);
    const statusColors = {
        draft: 'bg-gray-100 text-gray-800',
        sent: 'bg-blue-100 text-blue-800',
        overdue: 'bg-red-100 text-red-800',
        paid: 'bg-green-100 text-green-800',
        cancelled: 'bg-gray-100 text-gray-800',
    };
    return ((0, jsx_runtime_1.jsxs)(jsx_runtime_1.Fragment, { children: [(0, jsx_runtime_1.jsx)(card_1.Card, { className: 'hover:shadow-md transition-shadow cursor-pointer', onClick: () => setShowDetailDialog(true), children: (0, jsx_runtime_1.jsx)(card_1.CardContent, { className: 'p-4', children: (0, jsx_runtime_1.jsxs)("div", { className: 'space-y-3', children: [(0, jsx_runtime_1.jsxs)("div", { className: 'flex items-start justify-between', children: [(0, jsx_runtime_1.jsxs)("div", { children: [(0, jsx_runtime_1.jsx)("h4", { className: 'font-semibold text-sm', children: bill.title }), (0, jsx_runtime_1.jsxs)("p", { className: 'text-xs text-gray-500', children: ["#", bill.billNumber] })] }), (0, jsx_runtime_1.jsx)(badge_1.Badge, { className: statusColors[bill.status], children: bill.status })] }), bill.description && ((0, jsx_runtime_1.jsx)("p", { className: 'text-sm text-gray-600 line-clamp-2', children: bill.description })), (0, jsx_runtime_1.jsxs)("div", { className: 'flex items-center justify-between text-sm', children: [(0, jsx_runtime_1.jsxs)("span", { className: 'font-medium', children: ["$", Number(bill.totalAmount).toLocaleString()] }), (0, jsx_runtime_1.jsx)("span", { className: 'text-gray-500', children: bill.paymentType })] }), bill.vendor && (0, jsx_runtime_1.jsxs)("p", { className: 'text-xs text-gray-500', children: ["Vendor: ", bill.vendor] }), (0, jsx_runtime_1.jsxs)("div", { className: 'flex items-center gap-2 pt-2', children: [bill.filePath && ((0, jsx_runtime_1.jsxs)(badge_1.Badge, { variant: 'outline', className: 'text-xs', children: [(0, jsx_runtime_1.jsx)(lucide_react_1.FileText, { className: 'w-3 h-3 mr-1' }), "Document"] })), bill.isAiAnalyzed && ((0, jsx_runtime_1.jsx)(badge_1.Badge, { variant: 'outline', className: 'text-xs', children: "AI Analyzed" })), bill.notes?.includes('Auto-generated from:') && ((0, jsx_runtime_1.jsx)(badge_1.Badge, { variant: 'outline', className: 'text-xs', children: "Auto-Generated" }))] })] }) }) }), (0, jsx_runtime_1.jsx)(dialog_1.Dialog, { open: showDetailDialog, onOpenChange: setShowDetailDialog, children: (0, jsx_runtime_1.jsxs)(dialog_1.DialogContent, { className: 'max-w-2xl max-h-[95vh] overflow-y-auto', "aria-describedby": "bill-details-description", children: [(0, jsx_runtime_1.jsx)(dialog_1.DialogHeader, { children: (0, jsx_runtime_1.jsx)(dialog_1.DialogTitle, { children: "Bill Details" }) }), (0, jsx_runtime_1.jsx)(BillDetail, { bill: bill, onSuccess: () => {
                                setShowDetailDialog(false);
                                onUpdate();
                            }, onCancel: () => setShowDetailDialog(false), onEditBill: () => {
                                setShowDetailDialog(false);
                                setShowEditDialog(true);
                            } })] }) }), (0, jsx_runtime_1.jsx)(dialog_1.Dialog, { open: showEditDialog, onOpenChange: setShowEditDialog, children: (0, jsx_runtime_1.jsx)(dialog_1.DialogContent, { className: 'max-w-4xl max-h-[95vh] overflow-y-auto', "aria-describedby": "edit-bill-description", children: (0, jsx_runtime_1.jsx)(BillEditForm_1.BillEditForm, { bill: bill, onSuccess: () => {
                            setShowEditDialog(false);
                            onUpdate();
                        }, onCancel: () => setShowEditDialog(false) }) }) })] }));
}
// Bill detail component
function BillDetail({ bill, onSuccess, onCancel, onEditBill, }) {
    const queryClient = (0, react_query_1.useQueryClient)();
    // Fetch fresh bill data to ensure we have updated document information
    const { data: freshBill, error: freshBillError, isLoading: freshBillLoading } = (0, react_query_1.useQuery)({
        queryKey: ['/api/bills', bill.id],
        queryFn: async () => {
            const response = await fetch(`/api/bills/${bill.id}`, {
                credentials: 'include',
            });
            if (!response.ok) {
                throw new Error('Failed to fetch bill details');
            }
            return response.json();
        },
    });
    // Use fresh bill data if available, fallback to props bill data
    const currentBill = freshBill || bill;
    const [endDate, setEndDate] = (0, react_1.useState)(currentBill.endDate || '');
    const updateBillMutation = (0, react_query_1.useMutation)({
        mutationFn: async (updates) => {
            const response = await fetch(`/api/bills/${bill.id}`, {
                method: 'PATCH',
                headers: {
                    'Content-Type': 'application/json',
                },
                credentials: 'include',
                body: JSON.stringify(updates),
            });
            if (!response.ok) {
                throw new Error('Failed to update bill');
            }
            return response.json();
        },
        onSuccess: () => {
            queryClient.invalidateQueries({ queryKey: ['/api/bills'] });
            onSuccess();
        },
    });
    const handleSetEndDate = () => {
        if (endDate) {
            updateBillMutation.mutate({ endDate });
        }
    };
    return ((0, jsx_runtime_1.jsxs)("div", { className: 'space-y-6', children: [(0, jsx_runtime_1.jsxs)("div", { className: 'grid grid-cols-2 gap-4', children: [(0, jsx_runtime_1.jsxs)("div", { children: [(0, jsx_runtime_1.jsx)(label_1.Label, { className: 'text-sm font-medium', children: "Bill Number" }), (0, jsx_runtime_1.jsx)("p", { className: 'text-sm text-gray-600', children: currentBill.billNumber })] }), (0, jsx_runtime_1.jsxs)("div", { children: [(0, jsx_runtime_1.jsx)(label_1.Label, { className: 'text-sm font-medium', children: "Status" }), (0, jsx_runtime_1.jsx)("p", { className: 'text-sm text-gray-600 capitalize', children: currentBill.status })] }), (0, jsx_runtime_1.jsxs)("div", { children: [(0, jsx_runtime_1.jsx)(label_1.Label, { className: 'text-sm font-medium', children: "Category" }), (0, jsx_runtime_1.jsx)("p", { className: 'text-sm text-gray-600 capitalize', children: currentBill.category })] }), (0, jsx_runtime_1.jsxs)("div", { children: [(0, jsx_runtime_1.jsx)(label_1.Label, { className: 'text-sm font-medium', children: "Payment Type" }), (0, jsx_runtime_1.jsx)("p", { className: 'text-sm text-gray-600 capitalize', children: currentBill.paymentType })] }), (0, jsx_runtime_1.jsxs)("div", { children: [(0, jsx_runtime_1.jsx)(label_1.Label, { className: 'text-sm font-medium', children: "Total Amount" }), (0, jsx_runtime_1.jsxs)("p", { className: 'text-sm text-gray-600', children: ["$", Number(currentBill.totalAmount).toLocaleString()] })] }), (0, jsx_runtime_1.jsxs)("div", { children: [(0, jsx_runtime_1.jsx)(label_1.Label, { className: 'text-sm font-medium', children: "Start Date" }), (0, jsx_runtime_1.jsx)("p", { className: 'text-sm text-gray-600', children: currentBill.startDate })] })] }), (0, jsx_runtime_1.jsxs)("div", { children: [(0, jsx_runtime_1.jsx)(label_1.Label, { className: 'text-sm font-medium', children: "Title" }), (0, jsx_runtime_1.jsx)("p", { className: 'text-sm text-gray-600', children: currentBill.title })] }), currentBill.description && ((0, jsx_runtime_1.jsxs)("div", { children: [(0, jsx_runtime_1.jsx)(label_1.Label, { className: 'text-sm font-medium', children: "Description" }), (0, jsx_runtime_1.jsx)("p", { className: 'text-sm text-gray-600', children: currentBill.description })] })), currentBill.vendor && ((0, jsx_runtime_1.jsxs)("div", { children: [(0, jsx_runtime_1.jsx)(label_1.Label, { className: 'text-sm font-medium', children: "Vendor" }), (0, jsx_runtime_1.jsx)("p", { className: 'text-sm text-gray-600', children: currentBill.vendor })] })), currentBill.notes && ((0, jsx_runtime_1.jsxs)("div", { children: [(0, jsx_runtime_1.jsx)(label_1.Label, { className: 'text-sm font-medium', children: "Notes" }), (0, jsx_runtime_1.jsx)("p", { className: 'text-sm text-gray-600', children: currentBill.notes })] })), currentBill.paymentType === 'recurrent' && ((0, jsx_runtime_1.jsxs)("div", { className: 'border-t pt-4', children: [(0, jsx_runtime_1.jsx)(label_1.Label, { className: 'text-sm font-medium', children: "Recurrence End Date" }), (0, jsx_runtime_1.jsxs)("div", { className: 'flex items-center gap-2 mt-2', children: [(0, jsx_runtime_1.jsx)(input_1.Input, { type: 'date', value: endDate, onChange: (e) => setEndDate(e.target.value), className: 'w-48' }), (0, jsx_runtime_1.jsx)(button_1.Button, { onClick: handleSetEndDate, disabled: updateBillMutation.isPending, size: 'sm', children: updateBillMutation.isPending ? 'Setting...' : 'Set End Date' })] }), (0, jsx_runtime_1.jsx)("p", { className: 'text-xs text-gray-500 mt-1', children: "Setting an end date will stop auto-generation of future bills after this date." })] })), currentBill.costs && currentBill.costs.length > 1 && ((0, jsx_runtime_1.jsxs)("div", { children: [(0, jsx_runtime_1.jsx)(label_1.Label, { className: 'text-sm font-medium', children: "Payment Breakdown" }), (0, jsx_runtime_1.jsx)("div", { className: 'space-y-1 mt-1', children: currentBill.costs.map((cost, index) => ((0, jsx_runtime_1.jsxs)("div", { className: 'flex justify-between text-sm', children: [(0, jsx_runtime_1.jsxs)("span", { children: ["Payment ", index + 1, ":"] }), (0, jsx_runtime_1.jsxs)("span", { children: ["$", Number(cost).toLocaleString()] })] }, index))) })] })), currentBill.filePath && ((0, jsx_runtime_1.jsxs)("div", { className: 'border-t pt-4', children: [(0, jsx_runtime_1.jsx)(label_1.Label, { className: 'text-sm font-medium', children: "Uploaded Document" }), (0, jsx_runtime_1.jsx)("div", { className: 'mt-2', children: (0, jsx_runtime_1.jsxs)("div", { className: 'flex items-center justify-between p-3 bg-gray-50 rounded-lg', children: [(0, jsx_runtime_1.jsxs)("div", { className: 'flex items-center gap-2', children: [(0, jsx_runtime_1.jsx)(lucide_react_1.FileText, { className: 'w-4 h-4 text-blue-600' }), (0, jsx_runtime_1.jsx)("span", { className: 'text-sm', children: currentBill.fileName }), currentBill.isAiAnalyzed && ((0, jsx_runtime_1.jsx)(badge_1.Badge, { variant: 'outline', className: 'text-xs', children: "AI Analyzed" }))] }), (0, jsx_runtime_1.jsxs)(button_1.Button, { variant: 'outline', size: 'sm', onClick: () => {
                                        console.log('[DOWNLOAD] Starting download for bill:', currentBill.id);
                                        console.log('[DOWNLOAD] Document name:', currentBill.fileName);
                                        console.log('[DOWNLOAD] Document path:', currentBill.filePath);
                                        // Download the document
                                        const link = document.createElement('a');
                                        link.href = `/api/bills/${currentBill.id}/download-document`;
                                        link.download = currentBill.fileName || 'bill-document';
                                        document.body.appendChild(link);
                                        link.click();
                                        document.body.removeChild(link);
                                        console.log('[DOWNLOAD] Download link clicked');
                                    }, className: 'flex items-center gap-1', "data-testid": `button-download-document-${currentBill.id}`, children: [(0, jsx_runtime_1.jsx)(lucide_react_1.FileText, { className: 'w-3 h-3' }), "Download"] })] }) })] })), (0, jsx_runtime_1.jsx)("div", { className: 'border-t pt-4', children: (0, jsx_runtime_1.jsxs)("div", { className: 'flex items-center justify-between', children: [(0, jsx_runtime_1.jsx)(label_1.Label, { className: 'text-sm font-medium', children: "Actions" }), (0, jsx_runtime_1.jsx)(button_1.Button, { onClick: onEditBill, variant: 'outline', size: 'sm', children: "Edit Bill" })] }) }), (0, jsx_runtime_1.jsx)("div", { className: 'flex justify-end gap-2 pt-4 border-t', children: (0, jsx_runtime_1.jsx)(button_1.Button, { variant: 'outline', onClick: onCancel, children: "Close" }) })] }));
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiL2hvbWUvcnVubmVyL3dvcmtzcGFjZS9jbGllbnQvc3JjL3BhZ2VzL21hbmFnZXIvYmlsbHMudHN4IiwibWFwcGluZ3MiOiI7O0FBc0dBLHdCQW1mQzs7QUF6bEJELGlDQUE0QztBQUM1Qyx1REFBb0Q7QUFDcEQsK0NBQWdGO0FBQ2hGLGlEQUE4QztBQUM5QyxtREFBZ0Q7QUFDaEQsbURBTWdDO0FBQ2hDLGlEQUE4QztBQUM5QyxpREFBOEM7QUFDOUMsbURBTWdDO0FBRWhDLHVEQUFvRDtBQUNwRCxxREFBa0Y7QUFDbEYsK0NBU3NCO0FBQ3RCLDREQUF5RDtBQUN6RCw4RUFBMkU7QUFDM0UsZ0VBQTZEO0FBQzdELHVEQUE4RTtBQUM5RSxtREFBK0M7QUFDL0MsdUNBQWlDO0FBR2pDLE1BQU0sZUFBZSxHQUFHO0lBQ3RCLFdBQVc7SUFDWCxhQUFhO0lBQ2IsUUFBUTtJQUNSLFdBQVc7SUFDWCxVQUFVO0lBQ1YsVUFBVTtJQUNWLGFBQWE7SUFDYix1QkFBdUI7SUFDdkIsZ0JBQWdCO0lBQ2hCLFNBQVM7SUFDVCxVQUFVO0lBQ1YsT0FBTztJQUNQLE9BQU87Q0FDQyxDQUFDO0FBRVgsTUFBTSxlQUFlLEdBQTJCO0lBQzlDLFNBQVMsRUFBRSxXQUFXO0lBQ3RCLFdBQVcsRUFBRSxhQUFhO0lBQzFCLE1BQU0sRUFBRSxRQUFRO0lBQ2hCLFNBQVMsRUFBRSxXQUFXO0lBQ3RCLFFBQVEsRUFBRSxVQUFVO0lBQ3BCLFFBQVEsRUFBRSxVQUFVO0lBQ3BCLFdBQVcsRUFBRSxhQUFhO0lBQzFCLHFCQUFxQixFQUFFLHVCQUF1QjtJQUM5QyxjQUFjLEVBQUUsZ0JBQWdCO0lBQ2hDLE9BQU8sRUFBRSxTQUFTO0lBQ2xCLFFBQVEsRUFBRSxVQUFVO0lBQ3BCLEtBQUssRUFBRSxPQUFPO0lBQ2QsS0FBSyxFQUFFLE9BQU87Q0FDZixDQUFDO0FBRUYsTUFBTSxNQUFNLEdBQUc7SUFDYixFQUFFLEtBQUssRUFBRSxHQUFHLEVBQUUsS0FBSyxFQUFFLFNBQVMsRUFBRTtJQUNoQyxFQUFFLEtBQUssRUFBRSxH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Q0FBQzt3Q0FDeEQsUUFBUSxDQUFDLElBQUksQ0FBQyxXQUFXLENBQUMsSUFBSSxDQUFDLENBQUM7d0NBQ2hDLElBQUksQ0FBQyxLQUFLLEVBQUUsQ0FBQzt3Q0FDYixRQUFRLENBQUMsSUFBSSxDQUFDLFdBQVcsQ0FBQyxJQUFJLENBQUMsQ0FBQzt3Q0FFaEMsT0FBTyxDQUFDLEdBQUcsQ0FBQyxrQ0FBa0MsQ0FBQyxDQUFDO29DQUNsRCxDQUFDLEVBQ0QsU0FBUyxFQUFDLHlCQUF5QixpQkFDdEIsNEJBQTRCLFdBQVcsQ0FBQyxFQUFFLEVBQUUsYUFFekQsdUJBQUMsdUJBQVEsSUFBQyxTQUFTLEVBQUMsU0FBUyxHQUFHLGdCQUV6QixJQUNMLEdBQ0YsSUFDRixDQUNQLEVBR0QsZ0NBQUssU0FBUyxFQUFDLGVBQWUsWUFDNUIsaUNBQUssU0FBUyxFQUFDLG1DQUFtQyxhQUNoRCx1QkFBQyxhQUFLLElBQUMsU0FBUyxFQUFDLHFCQUFxQix3QkFBZ0IsRUFDdEQsdUJBQUMsZUFBTSxJQUFDLE9BQU8sRUFBRSxVQUFVLEVBQUUsT0FBTyxFQUFDLFNBQVMsRUFBQyxJQUFJLEVBQUMsSUFBSSwwQkFFL0MsSUFDTCxHQUNGLEVBR04sZ0NBQUssU0FBUyxFQUFDLHNDQUFzQyxZQUNuRCx1QkFBQyxlQUFNLElBQUMsT0FBTyxFQUFDLFNBQVMsRUFBQyxPQUFPLEVBQUUsUUFBUSxzQkFFbEMsR0FDTCxJQUNGLENBQ1AsQ0FBQztBQUNKLENBQUMiLCJuYW1lcyI6W10sInNvdXJjZXMiOlsiL2hvbWUvcnVubmVyL3dvcmtzcGFjZS9jbGllbnQvc3JjL3BhZ2VzL21hbmFnZXIvYmlsbHMudHN4Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IHVzZVN0YXRlLCB1c2VFZmZlY3QgfSBmcm9tICdyZWFjdCc7XG5pbXBvcnQgeyBIZWFkZXIgfSBmcm9tICdAL2NvbXBvbmVudHMvbGF5b3V0L2hlYWRlcic7XG5pbXBvcnQgeyBDYXJkLCBDYXJkQ29udGVudCwgQ2FyZEhlYWRlciwgQ2FyZFRpdGxlIH0gZnJvbSAnQC9jb21wb25lbnRzL3VpL2NhcmQnO1xuaW1wb3J0IHsgQmFkZ2UgfSBmcm9tICdAL2NvbXBvbmVudHMvdWkvYmFkZ2UnO1xuaW1wb3J0IHsgQnV0dG9uIH0gZnJvbSAnQC9jb21wb25lbnRzL3VpL2J1dHRvbic7XG5pbXBvcnQge1xuICBTZWxlY3QsXG4gIFNlbGVjdENvbnRlbnQsXG4gIFNlbGVjdEl0ZW0sXG4gIFNlbGVjdFRyaWdnZXIsXG4gIFNlbGVjdFZhbHVlLFxufSBmcm9tICdAL2NvbXBvbmVudHMvdWkvc2VsZWN0JztcbmltcG9ydCB7IElucHV0IH0gZnJvbSAnQC9jb21wb25lbnRzL3VpL2lucHV0JztcbmltcG9ydCB7IExhYmVsIH0gZnJvbSAnQC9jb21wb25lbnRzL3VpL2xhYmVsJztcbmltcG9ydCB7XG4gIERpYWxvZyxcbiAgRGlhbG9nQ29udGVudCxcbiAgRGlhbG9nSGVhZGVyLFxuICBEaWFsb2dUaXRsZSxcbiAgRGlhbG9nVHJpZ2dlcixcbn0gZnJvbSAnQC9jb21wb25lbnRzL3VpL2RpYWxvZyc7XG5pbXBvcnQgeyBUYWJzLCBUYWJzQ29udGVudCwgVGFic0xpc3QsIFRhYnNUcmlnZ2VyIH0gZnJvbSAnQC9jb21wb25lbnRzL3VpL3RhYnMnO1xuaW1wb3J0IHsgQ2hlY2tib3ggfSBmcm9tICdAL2NvbXBvbmVudHMvdWkvY2hlY2tib3gnO1xuaW1wb3J0IHsgUG9wb3ZlciwgUG9wb3ZlckNvbnRlbnQsIFBvcG92ZXJUcmlnZ2VyIH0gZnJvbSAnQC9jb21wb25lbnRzL3VpL3BvcG92ZXInO1xuaW1wb3J0IHtcbiAgRmlsZVRleHQsXG4gIFBsdXMsXG4gIFVwbG9hZCxcbiAgRmlsdGVyLFxuICBDYWxlbmRhcixcbiAgQnVpbGRpbmcgYXMgQnVpbGRpbmdJY29uLFxuICBUYWcsXG4gIENoZXZyb25Eb3duLFxufSBmcm9tICdsdWNpZGUtcmVhY3QnO1xuaW1wb3J0IHsgQmlsbEVkaXRGb3JtIH0gZnJvbSAnQC9jb21wb25lbnRzL0JpbGxFZGl0Rm9ybSc7XG5pbXBvcnQgeyBCdWlsZGluZ1NlbGVjdGlvbkdyaWQgfSBmcm9tICdAL2NvbXBvbmVudHMvQnVpbGRpbmdTZWxlY3Rpb25HcmlkJztcbmltcG9ydCB7IEJpbGxDcmVhdGVGb3JtIH0gZnJvbSAnQC9jb21wb25lbnRzL0JpbGxDcmVhdGVGb3JtJztcbmltcG9ydCB7IHVzZVF1ZXJ5LCB1c2VNdXRhdGlvbiwgdXNlUXVlcnlDbGllbnQgfSBmcm9tICdAdGFuc3RhY2svcmVhY3QtcXVlcnknO1xuaW1wb3J0IHsgYXBpUmVxdWVzdCB9IGZyb20gJ0AvbGliL3F1ZXJ5Q2xpZW50JztcbmltcG9ydCB7IGNuIH0gZnJvbSAnQC9saWIvdXRpbHMnO1xuaW1wb3J0IHR5cGUgeyBCdWlsZGluZywgQmlsbCB9IGZyb20gJ0BzaGFyZWQvc2NoZW1hJztcblxuY29uc3QgQklMTF9DQVRFR09SSUVTID0gW1xuICAnaW5zdXJhbmNlJyxcbiAgJ21haW50ZW5hbmNlJyxcbiAgJ3NhbGFyeScsXG4gICd1dGlsaXRpZXMnLFxuICAnY2xlYW5pbmcnLFxuICAnc2VjdXJpdHknLFxuICAnbGFuZHNjYXBpbmcnLFxuICAncHJvZmVzc2lvbmFsX3NlcnZpY2VzJyxcbiAgJ2FkbWluaXN0cmF0aW9uJyxcbiAgJ3JlcGFpcnMnLFxuICAnc3VwcGxpZXMnLFxuICAndGF4ZXMnLFxuICAnb3RoZXInLFxuXSBhcyBjb25zdDtcblxuY29uc3QgQ0FURUdPUllfTEFCRUxTOiBSZWNvcmQ8c3RyaW5nLCBzdHJpbmc+ID0ge1xuICBpbnN1cmFuY2U6ICdJbnN1cmFuY2UnLFxuICBtYWludGVuYW5jZTogJ01haW50ZW5hbmNlJyxcbiAgc2FsYXJ5OiAnU2FsYXJ5JyxcbiAgdXRpbGl0aWVzOiAnVXRpbGl0aWVzJyxcbiAgY2xlYW5pbmc6ICdDbGVhbmluZycsXG4gIHNlY3VyaXR5OiAnU2VjdXJpdHknLFxuICBsYW5kc2NhcGluZzogJ0xhbmRzY2FwaW5nJyxcbiAgcHJvZmVzc2lvbmFsX3NlcnZpY2VzOiAnUHJvZmVzc2lvbmFsIFNlcnZpY2VzJyxcbiAgYWRtaW5pc3RyYXRpb246ICdBZG1pbmlzdHJhdGlvbicsXG4gIHJlcGFpcnM6ICdSZXBhaXJzJyxcbiAgc3VwcGxpZXM6ICdTdXBwbGllcycsXG4gIHRheGVzOiAnVGF4ZXMnLFxuICBvdGhlcjogJ090aGVyJyxcbn07XG5cbmNvbnN0IE1PTlRIUyA9IFtcbiAgeyB2YWx1ZTogJzEnLCBsYWJlbDogJ0phbnVhcnknIH0sXG4gIHsgdmFsdWU6ICcyJywgbGFiZWw6ICdGZWJydWFyeScgfSxcbiAgeyB2YWx1ZTogJzMnLCBsYWJlbDogJ01hcmNoJyB9LFxuICB7IHZhbHVlOiAnNCcsIGxhYmVsOiAnQXByaWwnIH0sXG4gIHsgdmFsdWU6ICc1JywgbGFiZWw6ICdNYXknIH0sXG4gIHsgdmFsdWU6ICc2JywgbGFiZWw6ICdKdW5lJyB9LFxuICB7IHZhbHVlOiAnNycsIGxhYmVsOiAnSnVseScgfSxcbiAgeyB2YWx1ZTogJzgnLCBsYWJlbDogJ0F1Z3VzdCcgfSxcbiAgeyB2YWx1ZTogJzknLCBsYWJlbDogJ1NlcHRlbWJlcicgfSxcbiAgeyB2YWx1ZTogJzEwJywgbGFiZWw6ICdPY3RvYmVyJyB9LFxuICB7IHZhbHVlOiAnMTEnLCBsYWJlbDogJ05vdmVtYmVyJyB9LFxuICB7IHZhbHVlOiAnMTInLCBsYWJlbDogJ0RlY2VtYmVyJyB9LFxuXTtcblxuLyoqXG4gKlxuICovXG5pbnRlcmZhY2UgQmlsbEZpbHRlcnMge1xuICBidWlsZGluZ0lkOiBzdHJpbmc7XG4gIGNhdGVnb3J5OiBzdHJpbmc7XG4gIHllYXI6IHN0cmluZztcbiAgbW9udGhzOiBzdHJpbmdbXTtcbn1cblxuLyoqXG4gKlxuICovXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiAvKipcbiAqIEJpbGxzIGZ1bmN0aW9uLlxuICovIC8qKlxuICogQmlsbHMgZnVuY3Rpb24uXG4gKi9cblxuQmlsbHMoKSB7XG4gIGNvbnN0IFtmaWx0ZXJzLCBzZXRGaWx0ZXJzXSA9IHVzZVN0YXRlPEJpbGxGaWx0ZXJzPih7XG4gICAgYnVpbGRpbmdJZDogJycsXG4gICAgY2F0ZWdvcnk6ICcnLFxuICAgIHllYXI6IG5ldyBEYXRlKCkuZ2V0RnVsbFllYXIoKS50b1N0cmluZygpLFxuICAgIG1vbnRoczogW10sXG4gIH0pO1xuICBjb25zdCBbc2hvd0NyZWF0ZURpYWxvZywgc2V0U2hvd0NyZWF0ZURpYWxvZ10gPSB1c2VTdGF0ZShmYWxzZSk7XG4gIGNvbnN0IFtzaG93QWxsWWVhcnMsIHNldFNob3dBbGxZZWFyc10gPSB1c2VTdGF0ZShmYWxzZSk7XG4gIGNvbnN0IHF1ZXJ5Q2xpZW50ID0gdXNlUXVlcnlDbGllbnQoKTtcblxuICAvLyBGZXRjaCBidWlsZGluZ3MgZm9yIGZpbHRlciBkcm9wZG93blxuICBjb25zdCB7XG4gICAgZGF0YTogYnVpbGRpbmdzID0gW10sXG4gICAgaXNMb2FkaW5nOiBidWlsZGluZ3NMb2FkaW5nLFxuICAgIGVycm9yOiBidWlsZGluZ3NFcnJvcixcbiAgfSA9IHVzZVF1ZXJ5PEJ1aWxkaW5nW10+KHtcbiAgICBxdWVyeUtleTogWycvYXBpL2J1aWxkaW5ncyddLFxuICAgIHF1ZXJ5Rm46IGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgYXBpUmVxdWVzdCgnR0VUJywgJy9hcGkvYnVpbGRpbmdzJyk7XG4gICAgICByZXR1cm4gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xuICAgIH0sXG4gIH0pO1xuXG4gIC8vIEZldGNoIGJpbGxzIGJhc2VkIG9uIGZpbHRlcnNcbiAgY29uc3QgeyBkYXRhOiBiaWxscyA9IFtdLCBpc0xvYWRpbmcgfSA9IHVzZVF1ZXJ5PEJpbGxbXT4oe1xuICAgIHF1ZXJ5S2V5OiBbJy9hcGkvYmlsbHMnLCBmaWx0ZXJzXSxcbiAgICBxdWVyeUZuOiBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBwYXJhbXMgPSBuZXcgVVJMU2VhcmNoUGFyYW1zKCk7IC8qKlxuICAgICAgICogSWYgZnVuY3Rpb24uXG4gICAgICAgKiBAcGFyYW0gZmlsdGVycy5idWlsZGluZ0lkIC0gRmlsdGVycy5idWlsZGluZ0lkIHBhcmFtZXRlci5cbiAgICAgICAqLyAvKipcbiAgICAgICAqIElmIGZ1bmN0aW9uLlxuICAgICAgICogQHBhcmFtIGZpbHRlcnMuYnVpbGRpbmdJZCAtIEZpbHRlcnMuYnVpbGRpbmdJZCBwYXJhbWV0ZXIuXG4gICAgICAgKi9cblxuICAgICAgaWYgKGZpbHRlcnMuYnVpbGRpbmdJZCkge1xuICAgICAgICBwYXJhbXMuc2V0KCdidWlsZGluZ0lkJywgZmlsdGVycy5idWlsZGluZ0lkKTtcbiAgICAgIH0gLyoqXG4gICAgICAgKiBJZiBmdW5jdGlvbi5cbiAgICAgICAqIEBwYXJhbSBmaWx0ZXJzLmNhdGVnb3J5ICYmIGZpbHRlcnMuY2F0ZWdvcnkgIT09ICdhbGwnIC0gZmlsdGVycy5jYXRlZ29yeSAmJiBmaWx0ZXJzLmNhdGVnb3J5ICE9PSAnYWxsJyBwYXJhbWV0ZXIuXG4gICAgICAgKi8gLyoqXG4gICAgICAgKiBJZiBmdW5jdGlvbi5cbiAgICAgICAqIEBwYXJhbSBmaWx0ZXJzLmNhdGVnb3J5ICYmIGZpbHRlcnMuY2F0ZWdvcnkgIT09ICdhbGwnIC0gZmlsdGVycy5jYXRlZ29yeSAmJiBmaWx0ZXJzLmNhdGVnb3J5ICE9PSAnYWxsJyBwYXJhbWV0ZXIuXG4gICAgICAgKi9cblxuICAgICAgaWYgKGZpbHRlcnMuY2F0ZWdvcnkgJiYgZmlsdGVycy5jYXRlZ29yeSAhPT0gJ2FsbCcpIHtcbiAgICAgICAgcGFyYW1zLnNldCgnY2F0ZWdvcnknLCBmaWx0ZXJzLmNhdGVnb3J5KTtcbiAgICAgIH0gLyoqXG4gICAgICAgKiBJZiBmdW5jdGlvbi5cbiAgICAgICAqIEBwYXJhbSBmaWx0ZXJzLnllYXIgLSBGaWx0ZXJzLnllYXIgcGFyYW1ldGVyLlxuICAgICAgICovIC8qKlxuICAgICAgICogSWYgZnVuY3Rpb24uXG4gICAgICAgKiBAcGFyYW0gZmlsdGVycy55ZWFyIC0gRmlsdGVycy55ZWFyIHBhcmFtZXRlci5cbiAgICAgICAqL1xuXG4gICAgICBpZiAoZmlsdGVycy55ZWFyKSB7XG4gICAgICAgIHBhcmFtcy5zZXQoJ3llYXInLCBmaWx0ZXJzLnllYXIpO1xuICAgICAgfSAvKipcbiAgICAgICAqIElmIGZ1bmN0aW9uLlxuICAgICAgICogQHBhcmFtIGZpbHRlcnMubW9udGhzLmxlbmd0aCA+IDAgLSBmaWx0ZXJzLm1vbnRocy5sZW5ndGggPiAwIHBhcmFtZXRlci5cbiAgICAgICAqLyAvKipcbiAgICAgICAqIElmIGZ1bmN0aW9uLlxuICAgICAgICogQHBhcmFtIGZpbHRlcnMubW9udGhzLmxlbmd0aCA+IDAgLSBmaWx0ZXJzLm1vbnRocy5sZW5ndGggPiAwIHBhcmFtZXRlci5cbiAgICAgICAqL1xuXG4gICAgICBpZiAoZmlsdGVycy5tb250aHMubGVuZ3RoID4gMCkge1xuICAgICAgICBwYXJhbXMuc2V0KCdtb250aHMnLCBmaWx0ZXJzLm1vbnRocy5qb2luKCcsJykpO1xuICAgICAgfVxuXG4gICAgICBjb25zdCB1cmwgPSBgL2FwaS9iaWxscyR7cGFyYW1zLnRvU3RyaW5nKCkgPyAnPycgKyBwYXJhbXMudG9TdHJpbmcoKSA6ICcnfWA7XG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKHVybCwgeyBjcmVkZW50aWFsczogJ2luY2x1ZGUnIH0pOyAvKipcbiAgICAgICAqIElmIGZ1bmN0aW9uLlxuICAgICAgICogQHBhcmFtICFyZXNwb25zZS5vayAtICFyZXNwb25zZS5vayBwYXJhbWV0ZXIuXG4gICAgICAgKi9cbiAgICAgIC8qKlxuICAgICAgICogSWYgZnVuY3Rpb24uXG4gICAgICAgKiBAcGFyYW0gIXJlc3BvbnNlLm9rIC0gIXJlc3BvbnNlLm9rIHBhcmFtZXRlci5cbiAgICAgICAqL1xuICAgICAgLyoqXG4gICAgICAgKiBJZiBmdW5jdGlvbi5cbiAgICAgICAqIEBwYXJhbSAhcmVzcG9uc2Uub2sgLSAhcmVzcG9uc2Uub2sgcGFyYW1ldGVyLlxuICAgICAgICovXG4gICAgICAvKipcbiAgICAgICAqIElmIGZ1bmN0aW9uLlxuICAgICAgICogQHBhcmFtICFyZXNwb25zZS5vayAtICFyZXNwb25zZS5vayBwYXJhbWV0ZXIuXG4gICAgICAgKi8gLyoqXG4gICAgICAgKiBJZiBmdW5jdGlvbi5cbiAgICAgICAqIEBwYXJhbSAhcmVzcG9uc2Uub2sgLSAhcmVzcG9uc2Uub2sgcGFyYW1ldGVyLlxuICAgICAgICovXG5cbiAgICAgIC8qKlxuICAgICAgICogSWYgZnVuY3Rpb24uXG4gICAgICAgKiBAcGFyYW0gIXJlc3BvbnNlLm9rIC0gIXJlc3BvbnNlLm9rIHBhcmFtZXRlci5cbiAgICAgICAqL1xuICAgICAgLyoqXG4gICAgICAgKiBJZiBmdW5jdGlvbi5cbiAgICAgICAqIEBwYXJhbSAhcmVzcG9uc2Uub2sgLSAhcmVzcG9uc2Uub2sgcGFyYW1ldGVyLlxuICAgICAgICovXG4gICAgICAvKipcbiAgICAgICAqIElmIGZ1bmN0aW9uLlxuICAgICAgICogQHBhcmFtICFyZXNwb25zZS5vayAtICFyZXNwb25zZS5vayBwYXJhbWV0ZXIuXG4gICAgICAgKi9cblxuICAgICAgaWYgKCFyZXNwb25zZS5vaykge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYEZhaWxlZCB0byBmZXRjaCBiaWxsczogJHtyZXNwb25zZS5zdGF0dXNUZXh0fWApO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gcmVzcG9uc2UuanNvbigpO1xuICAgIH0sXG4gIH0pO1xuXG4gIC8vIEdyb3VwIGJpbGxzIGJ5IGNhdGVnb3J5XG4gIGNvbnN0IGJpbGxzQnlDYXRlZ29yeSA9IGJpbGxzLnJlZHVjZSgoYWNjOiBSZWNvcmQ8c3RyaW5nLCBCaWxsW10+LCBiaWxsOiBCaWxsKSA9PiB7XG4gICAgY29uc3QgY2F0ZWdvcnkgPSBiaWxsLmNhdGVnb3J5IHx8ICdvdGhlcic7IC8qKlxuICAgICAqIElmIGZ1bmN0aW9uLlxuICAgICAqIEBwYXJhbSAhYWNjW2NhdGVnb3J5XSAtICFhY2NbY2F0ZWdvcnldIHBhcmFtZXRlci5cbiAgICAgKi8gLyoqXG4gICAgICogSWYgZnVuY3Rpb24uXG4gICAgICogQHBhcmFtICFhY2NbY2F0ZWdvcnldIC0gIWFjY1tjYXRlZ29yeV0gcGFyYW1ldGVyLlxuICAgICAqL1xuXG4gICAgaWYgKCFhY2NbY2F0ZWdvcnldKSB7XG4gICAgICBhY2NbY2F0ZWdvcnldID0gW107XG4gICAgfVxuICAgIGFjY1tjYXRlZ29yeV0ucHVzaChiaWxsKTtcbiAgICByZXR1cm4gYWNjO1xuICB9LCB7fSk7XG5cbiAgY29uc3QgaGFuZGxlRmlsdGVyQ2hhbmdlID0gKGtleToga2V5b2YgQmlsbEZpbHRlcnMsIHZhbHVlOiBzdHJpbmcgfCBzdHJpbmdbXSkgPT4ge1xuICAgIHNldEZpbHRlcnMoKHByZXYpID0+ICh7IC4uLnByZXYsIFtrZXldOiB2YWx1ZSB9KSk7XG4gIH07XG5cbiAgY29uc3QgaGFuZGxlTW9udGhUb2dnbGUgPSAobW9udGhWYWx1ZTogc3RyaW5nKSA9PiB7XG4gICAgc2V0RmlsdGVycygocHJldikgPT4gKHtcbiAgICAgIC4uLnByZXYsXG4gICAgICBtb250aHM6IHByZXYubW9udGhzLmluY2x1ZGVzKG1vbnRoVmFsdWUpXG4gICAgICAgID8gcHJldi5tb250aHMuZmlsdGVyKChtKSA9PiBtICE9PSBtb250aFZhbHVlKVxuICAgICAgICA6IFsuLi5wcmV2Lm1vbnRocywgbW9udGhWYWx1ZV0sXG4gICAgfSkpO1xuICB9O1xuXG4gIGNvbnN0IGhhbmRsZUFsbE1vbnRoc1RvZ2dsZSA9ICgpID0+IHtcbiAgICBjb25zdCBhbGxNb250aFZhbHVlcyA9IE1PTlRIUy5tYXAoKG0pID0+IG0udmFsdWUpO1xuICAgIHNldEZpbHRlcnMoKHByZXYpID0+ICh7XG4gICAgICAuLi5wcmV2LFxuICAgICAgbW9udGhzOiBwcmV2Lm1vbnRocy5sZW5ndGggPT09IGFsbE1vbnRoVmFsdWVzLmxlbmd0aCA/IFtdIDogYWxsTW9udGhWYWx1ZXMsXG4gICAgfSkpO1xuICB9O1xuXG4gIGNvbnN0IGdldE1vbnRoc0Rpc3BsYXlUZXh0ID0gKCkgPT4ge1xuICAgIC8qKlxuICAgICAqIElmIGZ1bmN0aW9uLlxuICAgICAqIEBwYXJhbSBmaWx0ZXJzLm1vbnRocy5sZW5ndGggPT09IDAgLSBmaWx0ZXJzLm1vbnRocy5sZW5ndGggPT09IDAgcGFyYW1ldGVyLlxuICAgICAqLyAvKipcbiAgICAgKiBJZiBmdW5jdGlvbi5cbiAgICAgKiBAcGFyYW0gZmlsdGVycy5tb250aHMubGVuZ3RoID09PSAwIC0gZmlsdGVycy5tb250aHMubGVuZ3RoID09PSAwIHBhcmFtZXRlci5cbiAgICAgKi9cblxuICAgIGlmIChmaWx0ZXJzLm1vbnRocy5sZW5ndGggPT09IDApIHtcbiAgICAgIHJldHVybiAnQWxsIG1vbnRocyc7XG4gICAgfSAvKipcbiAgICAgKiBJZiBmdW5jdGlvbi5cbiAgICAgKiBAcGFyYW0gZmlsdGVycy5tb250aHMubGVuZ3RoID09PSBNT05USFMubGVuZ3RoIC0gZmlsdGVycy5tb250aHMubGVuZ3RoID09PSBNT05USFMubGVuZ3RoIHBhcmFtZXRlci5cbiAgICAgKi8gLyoqXG4gICAgICogSWYgZnVuY3Rpb24uXG4gICAgICogQHBhcmFtIGZpbHRlcnMubW9udGhzLmxlbmd0aCA9PT0gTU9OVEhTLmxlbmd0aCAtIGZpbHRlcnMubW9udGhzLmxlbmd0aCA9PT0gTU9OVEhTLmxlbmd0aCBwYXJhbWV0ZXIuXG4gICAgICovXG5cbiAgICBpZiAoZmlsdGVycy5tb250aHMubGVuZ3RoID09PSBNT05USFMubGVuZ3RoKSB7XG4gICAgICByZXR1cm4gJ0FsbCBtb250aHMnO1xuICAgIH0gLyoqXG4gICAgICogSWYgZnVuY3Rpb24uXG4gICAgICogQHBhcmFtIGZpbHRlcnMubW9udGhzLmxlbmd0aCA9PT0gMSAtIGZpbHRlcnMubW9udGhzLmxlbmd0aCA9PT0gMSBwYXJhbWV0ZXIuXG4gICAgICovIC8qKlxuICAgICAqIElmIGZ1bmN0aW9uLlxuICAgICAqIEBwYXJhbSBmaWx0ZXJzLm1vbnRocy5sZW5ndGggPT09IDEgLSBmaWx0ZXJzLm1vbnRocy5sZW5ndGggPT09IDEgcGFyYW1ldGVyLlxuICAgICAqL1xuXG4gICAgaWYgKGZpbHRlcnMubW9udGhzLmxlbmd0aCA9PT0gMSkge1xuICAgICAgY29uc3QgbW9udGggPSBNT05USFMuZmluZCgobSkgPT4gbS52YWx1ZSA9PT0gZmlsdGVycy5tb250aHNbMF0pO1xuICAgICAgcmV0dXJuIG1vbnRoPy5sYWJlbCB8fCAnQWxsIG1vbnRocyc7XG4gICAgfVxuICAgIHJldHVybiBgJHtmaWx0ZXJzLm1vbnRocy5sZW5ndGh9IG1vbnRoc2A7XG4gIH07XG5cbiAgLy8gR2V0IGJ1aWxkaW5nIGNvbnN0cnVjdGlvbiB5ZWFyIGZvciBtaW5pbXVtIHllYXIgY2FsY3VsYXRpb25cbiAgY29uc3Qgc2VsZWN0ZWRCdWlsZGluZyA9IEFycmF5LmlzQXJyYXkoYnVpbGRpbmdzKVxuICAgID8gYnVpbGRpbmdzLmZpbmQoKGIpID0+IGIuaWQgPT09IGZpbHRlcnMuYnVpbGRpbmdJZClcbiAgICA6IHVuZGVmaW5lZDtcbiAgY29uc3QgYnVpbGRpbmdDb25zdHJ1Y3Rpb25ZZWFyID0gc2VsZWN0ZWRCdWlsZGluZz8ueWVhckJ1aWx0IHx8IG5ldyBEYXRlKCkuZ2V0RnVsbFllYXIoKTtcbiAgY29uc3QgY3VycmVudFllYXIgPSBuZXcgRGF0ZSgpLmdldEZ1bGxZZWFyKCk7XG5cbiAgLy8gR2VuZXJhdGUgeWVhciBvcHRpb25zIGJhc2VkIG9uIHNob3cgYWxsIHllYXJzIHN0YXRlXG4gIGNvbnN0IGdldFllYXJPcHRpb25zID0gKCkgPT4ge1xuICAgIC8qKlxuICAgICAqIElmIGZ1bmN0aW9uLlxuICAgICAqIEBwYXJhbSBzaG93QWxsWWVhcnMgLSBTaG93QWxsWWVhcnMgcGFyYW1ldGVyLlxuICAgICAqLyAvKipcbiAgICAgKiBJZiBmdW5jdGlvbi5cbiAgICAgKiBAcGFyYW0gc2hvd0FsbFllYXJzIC0gU2hvd0FsbFllYXJzIHBhcmFtZXRlci5cbiAgICAgKi9cblxuICAgIGlmIChzaG93QWxsWWVhcnMpIHtcbiAgICAgIC8vIFNob3cgYWxsIHllYXJzIGZyb20gYnVpbGRpbmcgY29uc3RydWN0aW9uIHllYXIgdG8gMjUgeWVhcnMgZm9yd2FyZFxuICAgICAgY29uc3Qgc3RhcnRZZWFyID0gYnVpbGRpbmdDb25zdHJ1Y3Rpb25ZZWFyO1xuICAgICAgY29uc3QgZW5kWWVhciA9IGN1cnJlbnRZZWFyICsgMjU7XG4gICAgICBjb25zdCB0b3RhbFllYXJzID0gZW5kWWVhciAtIHN0YXJ0WWVhciArIDE7XG4gICAgICByZXR1cm4gQXJyYXkuZnJvbSh7IGxlbmd0aDogdG90YWxZZWFycyB9LCAoXywgaSkgPT4gc3RhcnRZZWFyICsgaSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIFNob3cgY3VycmVudCB5ZWFyIMKxMyB5ZWFyc1xuICAgICAgY29uc3Qgc3RhcnRZZWFyID0gY3VycmVudFllYXIgLSAzO1xuICAgICAgY29uc3QgZW5kWWVhciA9IGN1cnJlbnRZZWFyICsgMztcbiAgICAgIGNvbnN0IHRvdGFsWWVhcnMgPSBlbmRZZWFyIC0gc3RhcnRZZWFyICsgMTtcbiAgICAgIHJldHVybiBBcnJheS5mcm9tKHsgbGVuZ3RoOiB0b3RhbFllYXJzIH0sIChfLCBpKSA9PiBzdGFydFllYXIgKyBpKTtcbiAgICB9XG4gIH07XG5cbiAgLy8gU2hvdyBsb2FkaW5nIHN0YXRlIHdoaWxlIGJ1aWxkaW5ncyBhcmUgbG9hZGluZ1xuICBpZiAoYnVpbGRpbmdzTG9hZGluZykge1xuICAgIHJldHVybiAoXG4gICAgICA8ZGl2IGNsYXNzTmFtZT0nZmxleC0xIGZsZXggZmxleC1jb2wgb3ZlcmZsb3ctaGlkZGVuJz5cbiAgICAgICAgPEhlYWRlciB0aXRsZT0nQmlsbHMgTWFuYWdlbWVudCcgc3VidGl0bGU9J01hbmFnZSBidWlsZGluZyBleHBlbnNlcyBhbmQgcmV2ZW51ZSB0cmFja2luZycgLz5cbiAgICAgICAgPGRpdiBjbGFzc05hbWU9J2ZsZXgtMSBmbGV4IGl0ZW1zLWNlbnRlciBqdXN0aWZ5LWNlbnRlcic+XG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9J3RleHQtY2VudGVyJz5cbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSdhbmltYXRlLXNwaW4gcm91bmRlZC1mdWxsIGgtOCB3LTggYm9yZGVyLWItMiBib3JkZXItYmx1ZS02MDAgbXgtYXV0byBtYi00Jz48L2Rpdj5cbiAgICAgICAgICAgIDxwIGNsYXNzTmFtZT0ndGV4dC1ncmF5LTUwMCc+TG9hZGluZyBidWlsZGluZ3MuLi48L3A+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgIDwvZGl2PlxuICAgICAgPC9kaXY+XG4gICAgKTtcbiAgfVxuXG4gIC8vIFNob3cgZXJyb3Igc3RhdGUgaWYgYnVpbGRpbmdzIGZhaWxlZCB0byBsb2FkXG4gIGlmIChidWlsZGluZ3NFcnJvcikge1xuICAgIHJldHVybiAoXG4gICAgICA8ZGl2IGNsYXNzTmFtZT0nZmxleC0xIGZsZXggZmxleC1jb2wgb3ZlcmZsb3ctaGlkZGVuJz5cbiAgICAgICAgPEhlYWRlciB0aXRsZT0nQmlsbHMgTWFuYWdlbWVudCcgc3VidGl0bGU9J01hbmFnZSBidWlsZGluZyBleHBlbnNlcyBhbmQgcmV2ZW51ZSB0cmFja2luZycgLz5cbiAgICAgICAgPGRpdiBjbGFzc05hbWU9J2ZsZXgtMSBmbGV4IGl0ZW1zLWNlbnRlciBqdXN0aWZ5LWNlbnRlcic+XG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9J3RleHQtY2VudGVyJz5cbiAgICAgICAgICAgIDxwIGNsYXNzTmFtZT0ndGV4dC1yZWQtNTAwIG1iLTQnPkZhaWxlZCB0byBsb2FkIGJ1aWxkaW5nczwvcD5cbiAgICAgICAgICAgIDxidXR0b25cbiAgICAgICAgICAgICAgb25DbGljaz17KCkgPT4gd2luZG93LmxvY2F0aW9uLnJlbG9hZCgpfVxuICAgICAgICAgICAgICBjbGFzc05hbWU9J3B4LTQgcHktMiBiZy1ibHVlLTYwMCB0ZXh0LXdoaXRlIHJvdW5kZWQgaG92ZXI6YmctYmx1ZS03MDAnXG4gICAgICAgICAgICA+XG4gICAgICAgICAgICAgIFJldHJ5XG4gICAgICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgPC9kaXY+XG4gICAgICA8L2Rpdj5cbiAgICApO1xuICB9XG5cbiAgcmV0dXJuIChcbiAgICA8ZGl2IGNsYXNzTmFtZT0nZmxleC0xIGZsZXggZmxleC1jb2wgb3ZlcmZsb3ctaGlkZGVuJz5cbiAgICAgIDxIZWFkZXIgdGl0bGU9J0JpbGxzIE1hbmFnZW1lbnQnIHN1YnRpdGxlPSdNYW5hZ2UgYnVpbGRpbmcgZXhwZW5zZXMgYW5kIHJldmVudWUgdHJhY2tpbmcnIC8+XG5cbiAgICAgIDxkaXYgY2xhc3NOYW1lPSdmbGV4LTEgb3ZlcmZsb3ctYXV0byBwLTYnPlxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT0nbWF4LXctN3hsIG14LWF1dG8gc3BhY2UteS02Jz5cbiAgICAgICAgICB7LyogRmlsdGVycyBTZWN0aW9uICovfVxuICAgICAgICAgIDxDYXJkPlxuICAgICAgICAgICAgPENhcmRIZWFkZXI+XG4gICAgICAgICAgICAgIDxDYXJkVGl0bGUgY2xhc3NOYW1lPSdmbGV4IGl0ZW1zLWNlbnRlciBnYXAtMic+XG4gICAgICAgICAgICAgICAgPEZpbHRlciBjbGFzc05hbWU9J3ctNSBoLTUnIC8+XG4gICAgICAgICAgICAgICAgRmlsdGVyc1xuICAgICAgICAgICAgICA8L0NhcmRUaXRsZT5cbiAgICAgICAgICAgIDwvQ2FyZEhlYWRlcj5cbiAgICAgICAgICAgIDxDYXJkQ29udGVudD5cbiAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9J2dyaWQgZ3JpZC1jb2xzLTEgbWQ6Z3JpZC1jb2xzLTUgZ2FwLTQnPlxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSdzcGFjZS15LTInPlxuICAgICAgICAgICAgICAgICAgPExhYmVsIGh0bWxGb3I9J2J1aWxkaW5nLWZpbHRlcicgY2xhc3NOYW1lPSdmbGV4IGl0ZW1zLWNlbnRlciBnYXAtMic+XG4gICAgICAgICAgICAgICAgICAgIDxCdWlsZGluZ0ljb24gY2xhc3NOYW1lPSd3LTQgaC00JyAvPlxuICAgICAgICAgICAgICAgICAgICBCdWlsZGluZ1xuICAgICAgICAgICAgICAgICAgPC9MYWJlbD5cbiAgICAgICAgICAgICAgICAgIDxTZWxlY3RcbiAgICAgICAgICAgICAgICAgICAgdmFsdWU9e2ZpbHRlcnMuYnVpbGRpbmdJZH1cbiAgICAgICAgICAgICAgICAgICAgb25WYWx1ZUNoYW5nZT17KHZhbHVlKSA9PiBoYW5kbGVGaWx0ZXJDaGFuZ2UoJ2J1aWxkaW5nSWQnLCB2YWx1ZSl9XG4gICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgIDxTZWxlY3RUcmlnZ2VyIGlkPSdidWlsZGluZy1maWx0ZXInPlxuICAgICAgICAgICAgICAgICAgICAgIDxTZWxlY3RWYWx1ZSBwbGFjZWhvbGRlcj0nU2VsZWN0IGJ1aWxkaW5nJyAvPlxuICAgICAgICAgICAgICAgICAgICA8L1NlbGVjdFRyaWdnZXI+XG4gICAgICAgICAgICAgICAgICAgIDxTZWxlY3RDb250ZW50PlxuICAgICAgICAgICAgICAgICAgICAgIHtBcnJheS5pc0FycmF5KGJ1aWxkaW5ncykgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgIGJ1aWxkaW5ncy5tYXAoKGJ1aWxkaW5nOiBCdWlsZGluZykgPT4gKFxuICAgICAgICAgICAgICAgICAgICAgICAgICA8U2VsZWN0SXRlbSBrZXk9e2J1aWxkaW5nLmlkfSB2YWx1ZT17YnVpbGRpbmcuaWR9PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtidWlsZGluZy5uYW1lfVxuICAgICAgICAgICAgICAgICAgICAgICAgICA8L1NlbGVjdEl0ZW0+XG4gICAgICAgICAgICAgICAgICAgICAgICApKX1cbiAgICAgICAgICAgICAgICAgICAgPC9TZWxlY3RDb250ZW50PlxuICAgICAgICAgICAgICAgICAgPC9TZWxlY3Q+XG4gICAgICAgICAgICAgICAgPC9kaXY+XG5cbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0nc3BhY2UteS0yJz5cbiAgICAgICAgICAgICAgICAgIDxMYWJlbCBodG1sRm9yPSdjYXRlZ29yeS1maWx0ZXInIGNsYXNzTmFtZT0nZmxleCBpdGVtcy1jZW50ZXIgZ2FwLTInPlxuICAgICAgICAgICAgICAgICAgICA8VGFnIGNsYXNzTmFtZT0ndy00IGgtNCcgLz5cbiAgICAgICAgICAgICAgICAgICAgQ2F0ZWdvcnlcbiAgICAgICAgICAgICAgICAgIDwvTGFiZWw+XG4gICAgICAgICAgICAgICAgICA8U2VsZWN0XG4gICAgICAgICAgICAgICAgICAgIHZhbHVlPXtmaWx0ZXJzLmNhdGVnb3J5fVxuICAgICAgICAgICAgICAgICAgICBvblZhbHVlQ2hhbmdlPXsodmFsdWUpID0+IGhhbmRsZUZpbHRlckNoYW5nZSgnY2F0ZWdvcnknLCB2YWx1ZSl9XG4gICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgIDxTZWxlY3RUcmlnZ2VyIGlkPSdjYXRlZ29yeS1maWx0ZXInPlxuICAgICAgICAgICAgICAgICAgICAgIDxTZWxlY3RWYWx1ZSBwbGFjZWhvbGRlcj0nQWxsIGNhdGVnb3JpZXMnIC8+XG4gICAgICAgICAgICAgICAgICAgIDwvU2VsZWN0VHJpZ2dlcj5cbiAgICAgICAgICAgICAgICAgICAgPFNlbGVjdENvbnRlbnQ+XG4gICAgICAgICAgICAgICAgICAgICAgPFNlbGVjdEl0ZW0gdmFsdWU9J2FsbCc+QWxsIGNhdGVnb3JpZXM8L1NlbGVjdEl0ZW0+XG4gICAgICAgICAgICAgICAgICAgICAge0JJTExfQ0FURUdPUklFUy5tYXAoKGNhdGVnb3J5KSA9PiAoXG4gICAgICAgICAgICAgICAgICAgICAgICA8U2VsZWN0SXRlbSBrZXk9e2NhdGVnb3J5fSB2YWx1ZT17Y2F0ZWdvcnl9PlxuICAgICAgICAgICAgICAgICAgICAgICAgICB7Q0FURUdPUllfTEFCRUxTW2NhdGVnb3J5XX1cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvU2VsZWN0SXRlbT5cbiAgICAgICAgICAgICAgICAgICAgICApKX1cbiAgICAgICAgICAgICAgICAgICAgPC9TZWxlY3RDb250ZW50PlxuICAgICAgICAgICAgICAgICAgPC9TZWxlY3Q+XG4gICAgICAgICAgICAgICAgPC9kaXY+XG5cbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0nc3BhY2UteS0yJz5cbiAgICAgICAgICAgICAgICAgIDxMYWJlbCBodG1sRm9yPSd5ZWFyLWZpbHRlcicgY2xhc3NOYW1lPSdmbGV4IGl0ZW1zLWNlbnRlciBnYXAtMic+XG4gICAgICAgICAgICAgICAgICAgIDxDYWxlbmRhciBjbGFzc05hbWU9J3ctNCBoLTQnIC8+XG4gICAgICAgICAgICAgICAgICAgIFllYXJcbiAgICAgICAgICAgICAgICAgIDwvTGFiZWw+XG4gICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0nc3BhY2UteS0yJz5cbiAgICAgICAgICAgICAgICAgICAgPFNlbGVjdFxuICAgICAgICAgICAgICAgICAgICAgIHZhbHVlPXtmaWx0ZXJzLnllYXJ9XG4gICAgICAgICAgICAgICAgICAgICAgb25WYWx1ZUNoYW5nZT17KHZhbHVlKSA9PiBoYW5kbGVGaWx0ZXJDaGFuZ2UoJ3llYXInLCB2YWx1ZSl9XG4gICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICA8U2VsZWN0VHJpZ2dlciBpZD0neWVhci1maWx0ZXInPlxuICAgICAgICAgICAgICAgICAgICAgICAgPFNlbGVjdFZhbHVlIC8+XG4gICAgICAgICAgICAgICAgICAgICAgPC9TZWxlY3RUcmlnZ2VyPlxuICAgICAgICAgICAgICAgICAgICAgIDxTZWxlY3RDb250ZW50IGNsYXNzTmFtZT0nbWF4LWgtWzMwMHB4XSBvdmVyZmxvdy15LWF1dG8nPlxuICAgICAgICAgICAgICAgICAgICAgICAge2dldFllYXJPcHRpb25zKCkubWFwKCh5ZWFyKSA9PiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgIDxTZWxlY3RJdGVtIGtleT17eWVhcn0gdmFsdWU9e3llYXIudG9TdHJpbmcoKX0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge3llYXJ9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge3llYXIgPT09IGN1cnJlbnRZZWFyICYmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT0nbWwtMiB0ZXh0LXhzIHRleHQtYmx1ZS01MDAnPihDdXJyZW50KTwvc3Bhbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICAgICAgICA8L1NlbGVjdEl0ZW0+XG4gICAgICAgICAgICAgICAgICAgICAgICApKX1cbiAgICAgICAgICAgICAgICAgICAgICAgIHshc2hvd0FsbFllYXJzICYmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9J2JvcmRlci10IGJvcmRlci1ncmF5LTIwMCBtdC0yIHB0LTInPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxCdXR0b25cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhcmlhbnQ9J2dob3N0J1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2l6ZT0nc20nXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9J3ctZnVsbCB0ZXh0LWxlZnQganVzdGlmeS1zdGFydCB0ZXh0LXhzJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DbGljaz17KCkgPT4gc2V0U2hvd0FsbFllYXJzKHRydWUpfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFNob3cgbW9yZSB5ZWFycyAoe2J1aWxkaW5nQ29uc3RydWN0aW9uWWVhcn0gLSB7Y3VycmVudFllYXIgKyAyNX0pXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9CdXR0b24+XG4gICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgICAgIHtzaG93QWxsWWVhcnMgJiYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0nYm9yZGVyLXQgYm9yZGVyLWdyYXktMjAwIG10LTIgcHQtMic+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPEJ1dHRvblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyaWFudD0nZ2hvc3QnXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzaXplPSdzbSdcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT0ndy1mdWxsIHRleHQtbGVmdCBqdXN0aWZ5LXN0YXJ0IHRleHQteHMnXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiBzZXRTaG93QWxsWWVhcnMoZmFsc2UpfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFNob3cgZmV3ZXIgeWVhcnMgKHtjdXJyZW50WWVhciAtIDN9IC0ge2N1cnJlbnRZZWFyICsgM30pXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9CdXR0b24+XG4gICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgICA8L1NlbGVjdENvbnRlbnQ+XG4gICAgICAgICAgICAgICAgICAgIDwvU2VsZWN0PlxuICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgPC9kaXY+XG5cbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0nc3BhY2UteS0yJz5cbiAgICAgICAgICAgICAgICAgIDxMYWJlbCBjbGFzc05hbWU9J2ZsZXggaXRlbXMtY2VudGVyIGdhcC0yJz5cbiAgICAgICAgICAgICAgICAgICAgPENhbGVuZGFyIGNsYXNzTmFtZT0ndy00IGgtNCcgLz5cbiAgICAgICAgICAgICAgICAgICAgTW9udGhzXG4gICAgICAgICAgICAgICAgICA8L0xhYmVsPlxuICAgICAgICAgICAgICAgICAgPFBvcG92ZXI+XG4gICAgICAgICAgICAgICAgICAgIDxQb3BvdmVyVHJpZ2dlciBhc0NoaWxkPlxuICAgICAgICAgICAgICAgICAgICAgIDxCdXR0b25cbiAgICAgICAgICAgICAgICAgICAgICAgIHZhcmlhbnQ9J291dGxpbmUnXG4gICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9e2NuKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAndy1mdWxsIGp1c3RpZnktYmV0d2VlbicsXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGZpbHRlcnMubW9udGhzLmxlbmd0aCA9PT0gMCAmJiAndGV4dC1tdXRlZC1mb3JlZ3JvdW5kJ1xuICAgICAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICB7Z2V0TW9udGhzRGlzcGxheVRleHQoKX1cbiAgICAgICAgICAgICAgICAgICAgICAgIDxDaGV2cm9uRG93biBjbGFzc05hbWU9J21sLTIgaC00IHctNCBzaHJpbmstMCBvcGFjaXR5LTUwJyAvPlxuICAgICAgICAgICAgICAgICAgICAgIDwvQnV0dG9uPlxuICAgICAgICAgICAgICAgICAgICA8L1BvcG92ZXJUcmlnZ2VyPlxuICAgICAgICAgICAgICAgICAgICA8UG9wb3ZlckNvbnRlbnQgY2xhc3NOYW1lPSd3LTY0IHAtMCcgYWxpZ249J3N0YXJ0Jz5cbiAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0nYm9yZGVyLWIgcC0zJz5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSdmbGV4IGl0ZW1zLWNlbnRlciBzcGFjZS14LTInPlxuICAgICAgICAgICAgICAgICAgICAgICAgICA8Q2hlY2tib3hcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZD0nYWxsLW1vbnRocydcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaGVja2VkPXtmaWx0ZXJzLm1vbnRocy5sZW5ndGggPT09IE1PTlRIUy5sZW5ndGh9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGVja2VkQ2hhbmdlPXtoYW5kbGVBbGxNb250aHNUb2dnbGV9XG4gICAgICAgICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgIDxMYWJlbFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGh0bWxGb3I9J2FsbC1tb250aHMnXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPSd0ZXh0LXNtIGZvbnQtbWVkaXVtIGxlYWRpbmctbm9uZSBwZWVyLWRpc2FibGVkOmN1cnNvci1ub3QtYWxsb3dlZCBwZWVyLWRpc2FibGVkOm9wYWNpdHktNzAnXG4gICAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBBbGwgTW9udGhzXG4gICAgICAgICAgICAgICAgICAgICAgICAgIDwvTGFiZWw+XG4gICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0nZ3JpZCBncmlkLWNvbHMtMiBnYXAtMiBwLTMnPlxuICAgICAgICAgICAgICAgICAgICAgICAge01PTlRIUy5tYXAoKG1vbnRoKSA9PiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYga2V5PXttb250aC52YWx1ZX0gY2xhc3NOYW1lPSdmbGV4IGl0ZW1zLWNlbnRlciBzcGFjZS14LTInPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxDaGVja2JveFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWQ9e2Btb250aC0ke21vbnRoLnZhbHVlfWB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaGVja2VkPXtmaWx0ZXJzLm1vbnRocy5pbmNsdWRlcyhtb250aC52YWx1ZSl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNoZWNrZWRDaGFuZ2U9eygpID0+IGhhbmRsZU1vbnRoVG9nZ2xlKG1vbnRoLnZhbHVlKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxMYWJlbFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaHRtbEZvcj17YG1vbnRoLSR7bW9udGgudmFsdWV9YH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT0ndGV4dC1zbSBsZWFkaW5nLW5vbmUgcGVlci1kaXNhYmxlZDpjdXJzb3Itbm90LWFsbG93ZWQgcGVlci1kaXNhYmxlZDpvcGFjaXR5LTcwJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHttb250aC5sYWJlbH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L0xhYmVsPlxuICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICkpfVxuICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICA8L1BvcG92ZXJDb250ZW50PlxuICAgICAgICAgICAgICAgICAgPC9Qb3BvdmVyPlxuICAgICAgICAgICAgICAgIDwvZGl2PlxuXG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9J3NwYWNlLXktMic+XG4gICAgICAgICAgICAgICAgICA8TGFiZWwgY2xhc3NOYW1lPSdpbnZpc2libGUnPkFjdGlvbnM8L0xhYmVsPlxuICAgICAgICAgICAgICAgICAgPERpYWxvZyBvcGVuPXtzaG93Q3JlYXRlRGlhbG9nfSBvbk9wZW5DaGFuZ2U9e3NldFNob3dDcmVhdGVEaWFsb2d9PlxuICAgICAgICAgICAgICAgICAgICA8RGlhbG9nVHJpZ2dlciBhc0NoaWxkPlxuICAgICAgICAgICAgICAgICAgICAgIDxCdXR0b24gY2xhc3NOYW1lPSd3LWZ1bGwnIGRpc2FibGVkPXshZmlsdGVycy5idWlsZGluZ0lkfT5cbiAgICAgICAgICAgICAgICAgICAgICAgIENyZWF0ZSBCaWxsXG4gICAgICAgICAgICAgICAgICAgICAgPC9CdXR0b24+XG4gICAgICAgICAgICAgICAgICAgIDwvRGlhbG9nVHJpZ2dlcj5cbiAgICAgICAgICAgICAgICAgICAgPERpYWxvZ0NvbnRlbnQgY2xhc3NOYW1lPSdtYXgtdy00eGwgbWF4LWgtWzkwdmhdIG92ZXJmbG93LXktYXV0byc+XG4gICAgICAgICAgICAgICAgICAgICAgPERpYWxvZ0hlYWRlcj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxEaWFsb2dUaXRsZT5DcmVhdGUgTmV3IEJpbGw8L0RpYWxvZ1RpdGxlPlxuICAgICAgICAgICAgICAgICAgICAgIDwvRGlhbG9nSGVhZGVyPlxuICAgICAgICAgICAgICAgICAgICAgIDxCaWxsQ3JlYXRlRm9ybVxuICAgICAgICAgICAgICAgICAgICAgICAgYnVpbGRpbmdJZD17ZmlsdGVycy5idWlsZGluZ0lkfVxuICAgICAgICAgICAgICAgICAgICAgICAgb25DbG9zZT17KCkgPT4gc2V0U2hvd0NyZWF0ZURpYWxvZyhmYWxzZSl9XG4gICAgICAgICAgICAgICAgICAgICAgICBvblN1Y2Nlc3M9eygpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0U2hvd0NyZWF0ZURpYWxvZyhmYWxzZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHF1ZXJ5Q2xpZW50LmludmFsaWRhdGVRdWVyaWVzKHsgcXVlcnlLZXk6IFsnL2FwaS9iaWxscyddIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICA8L0RpYWxvZ0NvbnRlbnQ+XG4gICAgICAgICAgICAgICAgICA8L0RpYWxvZz5cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICA8L0NhcmRDb250ZW50PlxuICAgICAgICAgIDwvQ2FyZD5cblxuICAgICAgICAgIHsvKiBCaWxscyBEaXNwbGF5ICovfVxuICAgICAgICAgIHshZmlsdGVycy5idWlsZGluZ0lkID8gKFxuICAgICAgICAgICAgPEJ1aWxkaW5nU2VsZWN0aW9uR3JpZFxuICAgICAgICAgICAgICBidWlsZGluZ3M9e0FycmF5LmlzQXJyYXkoYnVpbGRpbmdzKSA/IGJ1aWxkaW5ncyA6IFtdfVxuICAgICAgICAgICAgICBvbkJ1aWxkaW5nU2VsZWN0PXsoYnVpbGRpbmdJZCkgPT4gaGFuZGxlRmlsdGVyQ2hhbmdlKCdidWlsZGluZ0lkJywgYnVpbGRpbmdJZCl9XG4gICAgICAgICAgICAvPlxuICAgICAgICAgICkgOiBpc0xvYWRpbmcgPyAoXG4gICAgICAgICAgICA8Q2FyZD5cbiAgICAgICAgICAgICAgPENhcmRDb250ZW50IGNsYXNzTmFtZT0ncC04IHRleHQtY2VudGVyJz5cbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0nYW5pbWF0ZS1zcGluIHctOCBoLTggYm9yZGVyLTQgYm9yZGVyLXByaW1hcnkgYm9yZGVyLXQtdHJhbnNwYXJlbnQgcm91bmRlZC1mdWxsIG14LWF1dG8gbWItNCc+PC9kaXY+XG4gICAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPSd0ZXh0LWdyYXktNTAwJz5Mb2FkaW5nIGJpbGxzLi4uPC9wPlxuICAgICAgICAgICAgICA8L0NhcmRDb250ZW50PlxuICAgICAgICAgICAgPC9DYXJkPlxuICAgICAgICAgICkgOiBPYmplY3Qua2V5cyhiaWxsc0J5Q2F0ZWdvcnkpLmxlbmd0aCA9PT0gMCA/IChcbiAgICAgICAgICAgIDxDYXJkPlxuICAgICAgICAgICAgICA8Q2FyZENvbnRlbnQgY2xhc3NOYW1lPSdwLTggdGV4dC1jZW50ZXInPlxuICAgICAgICAgICAgICAgIDxoMyBjbGFzc05hbWU9J3RleHQtbGcgZm9udC1zZW1pYm9sZCB0ZXh0LWdyYXktNjAwIG1iLTInPk5vIEJpbGxzIEZvdW5kPC9oMz5cbiAgICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9J3RleHQtZ3JheS01MDAgbWItNCc+XG4gICAgICAgICAgICAgICAgICBObyBiaWxscyBmb3VuZCBmb3IgdGhlIHNlbGVjdGVkIGZpbHRlcnMuIENyZWF0ZSB5b3VyIGZpcnN0IGJpbGwgdG8gZ2V0IHN0YXJ0ZWQuXG4gICAgICAgICAgICAgICAgPC9wPlxuICAgICAgICAgICAgICAgIDxCdXR0b24gb25DbGljaz17KCkgPT4gc2V0U2hvd0NyZWF0ZURpYWxvZyh0cnVlKX0+XG4gICAgICAgICAgICAgICAgICBDcmVhdGUgRmlyc3QgQmlsbFxuICAgICAgICAgICAgICAgIDwvQnV0dG9uPlxuICAgICAgICAgICAgICA8L0NhcmRDb250ZW50PlxuICAgICAgICAgICAgPC9DYXJkPlxuICAgICAgICAgICkgOiAoXG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0nc3BhY2UteS02Jz5cbiAgICAgICAgICAgICAge0JJTExfQ0FURUdPUklFUy5maWx0ZXIoXG4gICAgICAgICAgICAgICAgKGNhdGVnb3J5KSA9PlxuICAgICAgICAgICAgICAgICAgKCFmaWx0ZXJzLmNhdGVnb3J5IHx8IGZpbHRlcnMuY2F0ZWdvcnkgPT09IGNhdGVnb3J5KSAmJlxuICAgICAgICAgICAgICAgICAgYmlsbHNCeUNhdGVnb3J5W2NhdGVnb3J5XT8ubGVuZ3RoID4gMFxuICAgICAgICAgICAgICApLm1hcCgoY2F0ZWdvcnkpID0+IChcbiAgICAgICAgICAgICAgICA8QmlsbENhdGVnb3J5U2VjdGlvblxuICAgICAgICAgICAgICAgICAga2V5PXtjYXRlZ29yeX1cbiAgICAgICAgICAgICAgICAgIGNhdGVnb3J5PXtjYXRlZ29yeX1cbiAgICAgICAgICAgICAgICAgIGJpbGxzPXtiaWxsc0J5Q2F0ZWdvcnlbY2F0ZWdvcnldIHx8IFtdfVxuICAgICAgICAgICAgICAgICAgb25CaWxsVXBkYXRlPXsoKSA9PiBxdWVyeUNsaWVudC5pbnZhbGlkYXRlUXVlcmllcyh7IHF1ZXJ5S2V5OiBbJy9hcGkvYmlsbHMnXSB9KX1cbiAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICApKX1cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICl9XG4gICAgICAgIDwvZGl2PlxuICAgICAgPC9kaXY+XG4gICAgPC9kaXY+XG4gICk7XG59XG5cbi8vIENvbXBvbmVudCBmb3IgZGlzcGxheWluZyBiaWxscyBpbiBhIGNhdGVnb3J5XG4vKipcbiAqXG4gKiBAcGFyYW0gcm9vdDBcbiAqIEBwYXJhbSByb290MC5jYXRlZ29yeVxuICogQHBhcmFtIHJvb3QwLmJpbGxzXG4gKiBAcGFyYW0gcm9vdDAub25CaWxsVXBkYXRlXG4gKi9cbi8qKlxuICogQmlsbENhdGVnb3J5U2VjdGlvbiBmdW5jdGlvbi5cbiAqIEBwYXJhbSByb290MFxuICogQHBhcmFtIHJvb3QwLmNhdGVnb3J5XG4gKiBAcGFyYW0gcm9vdDAuYmlsbHNcbiAqIEBwYXJhbSByb290MC5vbkJpbGxVcGRhdGVcbiAqIEByZXR1cm5zIEZ1bmN0aW9uIHJlc3VsdC5cbiAqL1xuZnVuY3Rpb24gQmlsbENhdGVnb3J5U2VjdGlvbih7XG4gIGNhdGVnb3J5LFxuICBiaWxscyxcbiAgb25CaWxsVXBkYXRlLFxufToge1xuICBjYXRlZ29yeTogc3RyaW5nO1xuICBiaWxsczogQmlsbFtdO1xuICBvbkJpbGxVcGRhdGU6ICgpID0+IHZvaWQ7XG59KSB7XG4gIHJldHVybiAoXG4gICAgPENhcmQ+XG4gICAgICA8Q2FyZEhlYWRlcj5cbiAgICAgICAgPENhcmRUaXRsZSBjbGFzc05hbWU9J2ZsZXggaXRlbXMtY2VudGVyIGp1c3RpZnktYmV0d2Vlbic+XG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9J2ZsZXggaXRlbXMtY2VudGVyIGdhcC0yJz5cbiAgICAgICAgICAgIDxUYWcgY2xhc3NOYW1lPSd3LTUgaC01JyAvPlxuICAgICAgICAgICAge0NBVEVHT1JZX0xBQkVMU1tjYXRlZ29yeV19XG4gICAgICAgICAgICA8QmFkZ2UgdmFyaWFudD0nc2Vjb25kYXJ5Jz57YmlsbHMubGVuZ3RofTwvQmFkZ2U+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgIDwvQ2FyZFRpdGxlPlxuICAgICAgPC9DYXJkSGVhZGVyPlxuICAgICAgPENhcmRDb250ZW50PlxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT0nZ3JpZCBncmlkLWNvbHMtMSBtZDpncmlkLWNvbHMtMiBsZzpncmlkLWNvbHMtMyBnYXAtNCc+XG4gICAgICAgICAge2JpbGxzLm1hcCgoYmlsbCkgPT4gKFxuICAgICAgICAgICAgPEJpbGxDYXJkIGtleT17YmlsbC5pZH0gYmlsbD17YmlsbH0gb25VcGRhdGU9e29uQmlsbFVwZGF0ZX0gLz5cbiAgICAgICAgICApKX1cbiAgICAgICAgPC9kaXY+XG4gICAgICA8L0NhcmRDb250ZW50PlxuICAgIDwvQ2FyZD5cbiAgKTtcbn1cblxuLy8gQ29tcG9uZW50IGZvciBpbmRpdmlkdWFsIGJpbGwgY2FyZHNcbi8qKlxuICpcbiAqIEBwYXJhbSByb290MFxuICogQHBhcmFtIHJvb3QwLmJpbGxcbiAqIEBwYXJhbSByb290MC5vblVwZGF0ZVxuICovXG4vKipcbiAqIEJpbGxDYXJkIGZ1bmN0aW9uLlxuICogQHBhcmFtIHJvb3QwXG4gKiBAcGFyYW0gcm9vdDAuYmlsbFxuICogQHBhcmFtIHJvb3QwLm9uVXBkYXRlXG4gKiBAcmV0dXJucyBGdW5jdGlvbiByZXN1bHQuXG4gKi9cbmZ1bmN0aW9uIEJpbGxDYXJkKHsgYmlsbCwgb25VcGRhdGUgfTogeyBiaWxsOiBCaWxsOyBvblVwZGF0ZTogKCkgPT4gdm9pZCB9KSB7XG4gIGNvbnN0IFtzaG93RGV0YWlsRGlhbG9nLCBzZXRTaG93RGV0YWlsRGlhbG9nXSA9IHVzZVN0YXRlKGZhbHNlKTtcbiAgY29uc3QgW3Nob3dFZGl0RGlhbG9nLCBzZXRTaG93RWRpdERpYWxvZ10gPSB1c2VTdGF0ZShmYWxzZSk7XG5cbiAgY29uc3Qgc3RhdHVzQ29sb3JzID0ge1xuICAgIGRyYWZ0OiAnYmctZ3JheS0xMDAgdGV4dC1ncmF5LTgwMCcsXG4gICAgc2VudDogJ2JnLWJsdWUtMTAwIHRleHQtYmx1ZS04MDAnLFxuICAgIG92ZXJkdWU6ICdiZy1yZWQtMTAwIHRleHQtcmVkLTgwMCcsXG4gICAgcGFpZDogJ2JnLWdyZWVuLTEwMCB0ZXh0LWdyZWVuLTgwMCcsXG4gICAgY2FuY2VsbGVkOiAnYmctZ3JheS0xMDAgdGV4dC1ncmF5LTgwMCcsXG4gIH07XG5cbiAgcmV0dXJuIChcbiAgICA8PlxuICAgICAgPENhcmRcbiAgICAgICAgY2xhc3NOYW1lPSdob3ZlcjpzaGFkb3ctbWQgdHJhbnNpdGlvbi1zaGFkb3cgY3Vyc29yLXBvaW50ZXInXG4gICAgICAgIG9uQ2xpY2s9eygpID0+IHNldFNob3dEZXRhaWxEaWFsb2codHJ1ZSl9XG4gICAgICA+XG4gICAgICAgIDxDYXJkQ29udGVudCBjbGFzc05hbWU9J3AtNCc+XG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9J3NwYWNlLXktMyc+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0nZmxleCBpdGVtcy1zdGFydCBqdXN0aWZ5LWJldHdlZW4nPlxuICAgICAgICAgICAgICA8ZGl2PlxuICAgICAgICAgICAgICAgIDxoNCBjbGFzc05hbWU9J2ZvbnQtc2VtaWJvbGQgdGV4dC1zbSc+e2JpbGwudGl0bGV9PC9oND5cbiAgICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9J3RleHQteHMgdGV4dC1ncmF5LTUwMCc+I3tiaWxsLmJpbGxOdW1iZXJ9PC9wPlxuICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgPEJhZGdlIGNsYXNzTmFtZT17c3RhdHVzQ29sb3JzW2JpbGwuc3RhdHVzIGFzIGtleW9mIHR5cGVvZiBzdGF0dXNDb2xvcnNdfT5cbiAgICAgICAgICAgICAgICB7YmlsbC5zdGF0dXN9XG4gICAgICAgICAgICAgIDwvQmFkZ2U+XG4gICAgICAgICAgICA8L2Rpdj5cblxuICAgICAgICAgICAge2JpbGwuZGVzY3JpcHRpb24gJiYgKFxuICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9J3RleHQtc20gdGV4dC1ncmF5LTYwMCBsaW5lLWNsYW1wLTInPntiaWxsLmRlc2NyaXB0aW9ufTwvcD5cbiAgICAgICAgICAgICl9XG5cbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSdmbGV4IGl0ZW1zLWNlbnRlciBqdXN0aWZ5LWJldHdlZW4gdGV4dC1zbSc+XG4gICAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT0nZm9udC1tZWRpdW0nPiR7TnVtYmVyKGJpbGwudG90YWxBbW91bnQpLnRvTG9jYWxlU3RyaW5nKCl9PC9zcGFuPlxuICAgICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9J3RleHQtZ3JheS01MDAnPntiaWxsLnBheW1lbnRUeXBlfTwvc3Bhbj5cbiAgICAgICAgICAgIDwvZGl2PlxuXG4gICAgICAgICAgICB7YmlsbC52ZW5kb3IgJiYgPHAgY2xhc3NOYW1lPSd0ZXh0LXhzIHRleHQtZ3JheS01MDAnPlZlbmRvcjoge2JpbGwudmVuZG9yfTwvcD59XG5cbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSdmbGV4IGl0ZW1zLWNlbnRlciBnYXAtMiBwdC0yJz5cbiAgICAgICAgICAgICAge2JpbGwuZmlsZVBhdGggJiYgKFxuICAgICAgICAgICAgICAgIDxCYWRnZSB2YXJpYW50PSdvdXRsaW5lJyBjbGFzc05hbWU9J3RleHQteHMnPlxuICAgICAgICAgICAgICAgICAgPEZpbGVUZXh0IGNsYXNzTmFtZT0ndy0zIGgtMyBtci0xJyAvPlxuICAgICAgICAgICAgICAgICAgRG9jdW1lbnRcbiAgICAgICAgICAgICAgICA8L0JhZGdlPlxuICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICB7YmlsbC5pc0FpQW5hbHl6ZWQgJiYgKFxuICAgICAgICAgICAgICAgIDxCYWRnZSB2YXJpYW50PSdvdXRsaW5lJyBjbGFzc05hbWU9J3RleHQteHMnPlxuICAgICAgICAgICAgICAgICAgQUkgQW5hbHl6ZWRcbiAgICAgICAgICAgICAgICA8L0JhZGdlPlxuICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICB7YmlsbC5ub3Rlcz8uaW5jbHVkZXMoJ0F1dG8tZ2VuZXJhdGVkIGZyb206JykgJiYgKFxuICAgICAgICAgICAgICAgIDxCYWRnZSB2YXJpYW50PSdvdXRsaW5lJyBjbGFzc05hbWU9J3RleHQteHMnPlxuICAgICAgICAgICAgICAgICAgQXV0by1HZW5lcmF0ZWRcbiAgICAgICAgICAgICAgICA8L0JhZGdlPlxuICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgIDwvQ2FyZENvbnRlbnQ+XG4gICAgICA8L0NhcmQ+XG5cbiAgICAgIHsvKiBCaWxsIERldGFpbCBEaWFsb2cgKi99XG4gICAgICA8RGlhbG9nIG9wZW49e3Nob3dEZXRhaWxEaWFsb2d9IG9uT3BlbkNoYW5nZT17c2V0U2hvd0RldGFpbERpYWxvZ30+XG4gICAgICAgIDxEaWFsb2dDb250ZW50IGNsYXNzTmFtZT0nbWF4LXctMnhsIG1heC1oLVs5NXZoXSBvdmVyZmxvdy15LWF1dG8nIGFyaWEtZGVzY3JpYmVkYnk9XCJiaWxsLWRldGFpbHMtZGVzY3JpcHRpb25cIj5cbiAgICAgICAgICA8RGlhbG9nSGVhZGVyPlxuICAgICAgICAgICAgPERpYWxvZ1RpdGxlPkJpbGwgRGV0YWlsczwvRGlhbG9nVGl0bGU+XG4gICAgICAgICAgPC9EaWFsb2dIZWFkZXI+XG4gICAgICAgICAgPEJpbGxEZXRhaWxcbiAgICAgICAgICAgIGJpbGw9e2JpbGx9XG4gICAgICAgICAgICBvblN1Y2Nlc3M9eygpID0+IHtcbiAgICAgICAgICAgICAgc2V0U2hvd0RldGFpbERpYWxvZyhmYWxzZSk7XG4gICAgICAgICAgICAgIG9uVXBkYXRlKCk7XG4gICAgICAgICAgICB9fVxuICAgICAgICAgICAgb25DYW5jZWw9eygpID0+IHNldFNob3dEZXRhaWxEaWFsb2coZmFsc2UpfVxuICAgICAgICAgICAgb25FZGl0QmlsbD17KCkgPT4ge1xuICAgICAgICAgICAgICBzZXRTaG93RGV0YWlsRGlhbG9nKGZhbHNlKTtcbiAgICAgICAgICAgICAgc2V0U2hvd0VkaXREaWFsb2codHJ1ZSk7XG4gICAgICAgICAgICB9fVxuICAgICAgICAgIC8+XG4gICAgICAgIDwvRGlhbG9nQ29udGVudD5cbiAgICAgIDwvRGlhbG9nPlxuXG4gICAgICB7LyogQmlsbCBFZGl0IERpYWxvZyAqL31cbiAgICAgIDxEaWFsb2cgb3Blbj17c2hvd0VkaXREaWFsb2d9IG9uT3BlbkNoYW5nZT17c2V0U2hvd0VkaXREaWFsb2d9PlxuICAgICAgICA8RGlhbG9nQ29udGVudCBjbGFzc05hbWU9J21heC13LTR4bCBtYXgtaC1bOTV2aF0gb3ZlcmZsb3cteS1hdXRvJyBhcmlhLWRlc2NyaWJlZGJ5PVwiZWRpdC1iaWxsLWRlc2NyaXB0aW9uXCI+XG4gICAgICAgICAgPEJpbGxFZGl0Rm9ybVxuICAgICAgICAgICAgYmlsbD17YmlsbH1cbiAgICAgICAgICAgIG9uU3VjY2Vzcz17KCkgPT4ge1xuICAgICAgICAgICAgICBzZXRTaG93RWRpdERpYWxvZyhmYWxzZSk7XG4gICAgICAgICAgICAgIG9uVXBkYXRlKCk7XG4gICAgICAgICAgICB9fVxuICAgICAgICAgICAgb25DYW5jZWw9eygpID0+IHNldFNob3dFZGl0RGlhbG9nKGZhbHNlKX1cbiAgICAgICAgICAvPlxuICAgICAgICA8L0RpYWxvZ0NvbnRlbnQ+XG4gICAgICA8L0RpYWxvZz5cbiAgICA8Lz5cbiAgKTtcbn1cblxuLy8gQmlsbCBkZXRhaWwgY29tcG9uZW50XG5mdW5jdGlvbiBCaWxsRGV0YWlsKHtcbiAgYmlsbCxcbiAgb25TdWNjZXNzLFxuICBvbkNhbmNlbCxcbiAgb25FZGl0QmlsbCxcbn06IHtcbiAgYmlsbDogQmlsbDtcbiAgb25TdWNjZXNzOiAoKSA9PiB2b2lkO1xuICBvbkNhbmNlbDogKCkgPT4gdm9pZDtcbiAgb25FZGl0QmlsbDogKCkgPT4gdm9pZDtcbn0pIHtcbiAgY29uc3QgcXVlcnlDbGllbnQgPSB1c2VRdWVyeUNsaWVudCgpO1xuXG4gIC8vIEZldGNoIGZyZXNoIGJpbGwgZGF0YSB0byBlbnN1cmUgd2UgaGF2ZSB1cGRhdGVkIGRvY3VtZW50IGluZm9ybWF0aW9uXG4gIGNvbnN0IHsgZGF0YTogZnJlc2hCaWxsLCBlcnJvcjogZnJlc2hCaWxsRXJyb3IsIGlzTG9hZGluZzogZnJlc2hCaWxsTG9hZGluZyB9ID0gdXNlUXVlcnkoe1xuICAgIHF1ZXJ5S2V5OiBbJy9hcGkvYmlsbHMnLCBiaWxsLmlkXSxcbiAgICBxdWVyeUZuOiBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKGAvYXBpL2JpbGxzLyR7YmlsbC5pZH1gLCB7XG4gICAgICAgIGNyZWRlbnRpYWxzOiAnaW5jbHVkZScsXG4gICAgICB9KTtcbiAgICAgIGlmICghcmVzcG9uc2Uub2spIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdGYWlsZWQgdG8gZmV0Y2ggYmlsbCBkZXRhaWxzJyk7XG4gICAgICB9XG4gICAgICByZXR1cm4gcmVzcG9uc2UuanNvbigpO1xuICAgIH0sXG4gIH0pO1xuXG4gIC8vIFVzZSBmcmVzaCBiaWxsIGRhdGEgaWYgYXZhaWxhYmxlLCBmYWxsYmFjayB0byBwcm9wcyBiaWxsIGRhdGFcbiAgY29uc3QgY3VycmVudEJpbGwgPSBmcmVzaEJpbGwgfHwgYmlsbDtcbiAgXG4gIGNvbnN0IFtlbmREYXRlLCBzZXRFbmREYXRlXSA9IHVzZVN0YXRlKGN1cnJlbnRCaWxsLmVuZERhdGUgfHwgJycpO1xuXG4gIGNvbnN0IHVwZGF0ZUJpbGxNdXRhdGlvbiA9IHVzZU11dGF0aW9uKHtcbiAgICBtdXRhdGlvbkZuOiBhc3luYyAodXBkYXRlczogUGFydGlhbDxCaWxsPikgPT4ge1xuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaChgL2FwaS9iaWxscy8ke2JpbGwuaWR9YCwge1xuICAgICAgICBtZXRob2Q6ICdQQVRDSCcsXG4gICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nLFxuICAgICAgICB9LFxuICAgICAgICBjcmVkZW50aWFsczogJ2luY2x1ZGUnLFxuICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh1cGRhdGVzKSxcbiAgICAgIH0pO1xuXG4gICAgICBpZiAoIXJlc3BvbnNlLm9rKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignRmFpbGVkIHRvIHVwZGF0ZSBiaWxsJyk7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiByZXNwb25zZS5qc29uKCk7XG4gICAgfSxcbiAgICBvblN1Y2Nlc3M6ICgpID0+IHtcbiAgICAgIHF1ZXJ5Q2xpZW50LmludmFsaWRhdGVRdWVyaWVzKHsgcXVlcnlLZXk6IFsnL2FwaS9iaWxscyddIH0pO1xuICAgICAgb25TdWNjZXNzKCk7XG4gICAgfSxcbiAgfSk7XG5cbiAgY29uc3QgaGFuZGxlU2V0RW5kRGF0ZSA9ICgpID0+IHtcbiAgICBpZiAoZW5kRGF0ZSkge1xuICAgICAgdXBkYXRlQmlsbE11dGF0aW9uLm11dGF0ZSh7IGVuZERhdGUgfSk7XG4gICAgfVxuICB9O1xuXG5cbiAgcmV0dXJuIChcbiAgICA8ZGl2IGNsYXNzTmFtZT0nc3BhY2UteS02Jz5cbiAgICAgIHsvKiBCaWxsIEluZm9ybWF0aW9uICovfVxuICAgICAgPGRpdiBjbGFzc05hbWU9J2dyaWQgZ3JpZC1jb2xzLTIgZ2FwLTQnPlxuICAgICAgICA8ZGl2PlxuICAgICAgICAgIDxMYWJlbCBjbGFzc05hbWU9J3RleHQtc20gZm9udC1tZWRpdW0nPkJpbGwgTnVtYmVyPC9MYWJlbD5cbiAgICAgICAgICA8cCBjbGFzc05hbWU9J3RleHQtc20gdGV4dC1ncmF5LTYwMCc+e2N1cnJlbnRCaWxsLmJpbGxOdW1iZXJ9PC9wPlxuICAgICAgICA8L2Rpdj5cbiAgICAgICAgPGRpdj5cbiAgICAgICAgICA8TGFiZWwgY2xhc3NOYW1lPSd0ZXh0LXNtIGZvbnQtbWVkaXVtJz5TdGF0dXM8L0xhYmVsPlxuICAgICAgICAgIDxwIGNsYXNzTmFtZT0ndGV4dC1zbSB0ZXh0LWdyYXktNjAwIGNhcGl0YWxpemUnPntjdXJyZW50QmlsbC5zdGF0dXN9PC9wPlxuICAgICAgICA8L2Rpdj5cbiAgICAgICAgPGRpdj5cbiAgICAgICAgICA8TGFiZWwgY2xhc3NOYW1lPSd0ZXh0LXNtIGZvbnQtbWVkaXVtJz5DYXRlZ29yeTwvTGFiZWw+XG4gICAgICAgICAgPHAgY2xhc3NOYW1lPSd0ZXh0LXNtIHRleHQtZ3JheS02MDAgY2FwaXRhbGl6ZSc+e2N1cnJlbnRCaWxsLmNhdGVnb3J5fTwvcD5cbiAgICAgICAgPC9kaXY+XG4gICAgICAgIDxkaXY+XG4gICAgICAgICAgPExhYmVsIGNsYXNzTmFtZT0ndGV4dC1zbSBmb250LW1lZGl1bSc+UGF5bWVudCBUeXBlPC9MYWJlbD5cbiAgICAgICAgICA8cCBjbGFzc05hbWU9J3RleHQtc20gdGV4dC1ncmF5LTYwMCBjYXBpdGFsaXplJz57Y3VycmVudEJpbGwucGF5bWVudFR5cGV9PC9wPlxuICAgICAgICA8L2Rpdj5cbiAgICAgICAgPGRpdj5cbiAgICAgICAgICA8TGFiZWwgY2xhc3NOYW1lPSd0ZXh0LXNtIGZvbnQtbWVkaXVtJz5Ub3RhbCBBbW91bnQ8L0xhYmVsPlxuICAgICAgICAgIDxwIGNsYXNzTmFtZT0ndGV4dC1zbSB0ZXh0LWdyYXktNjAwJz4ke051bWJlcihjdXJyZW50QmlsbC50b3RhbEFtb3VudCkudG9Mb2NhbGVTdHJpbmcoKX08L3A+XG4gICAgICAgIDwvZGl2PlxuICAgICAgICA8ZGl2PlxuICAgICAgICAgIDxMYWJlbCBjbGFzc05hbWU9J3RleHQtc20gZm9udC1tZWRpdW0nPlN0YXJ0IERhdGU8L0xhYmVsPlxuICAgICAgICAgIDxwIGNsYXNzTmFtZT0ndGV4dC1zbSB0ZXh0LWdyYXktNjAwJz57Y3VycmVudEJpbGwuc3RhcnREYXRlfTwvcD5cbiAgICAgICAgPC9kaXY+XG4gICAgICA8L2Rpdj5cblxuICAgICAgey8qIFRpdGxlIGFuZCBEZXNjcmlwdGlvbiAqL31cbiAgICAgIDxkaXY+XG4gICAgICAgIDxMYWJlbCBjbGFzc05hbWU9J3RleHQtc20gZm9udC1tZWRpdW0nPlRpdGxlPC9MYWJlbD5cbiAgICAgICAgPHAgY2xhc3NOYW1lPSd0ZXh0LXNtIHRleHQtZ3JheS02MDAnPntjdXJyZW50QmlsbC50aXRsZX08L3A+XG4gICAgICA8L2Rpdj5cblxuICAgICAge2N1cnJlbnRCaWxsLmRlc2NyaXB0aW9uICYmIChcbiAgICAgICAgPGRpdj5cbiAgICAgICAgICA8TGFiZWwgY2xhc3NOYW1lPSd0ZXh0LXNtIGZvbnQtbWVkaXVtJz5EZXNjcmlwdGlvbjwvTGFiZWw+XG4gICAgICAgICAgPHAgY2xhc3NOYW1lPSd0ZXh0LXNtIHRleHQtZ3JheS02MDAnPntjdXJyZW50QmlsbC5kZXNjcmlwdGlvbn08L3A+XG4gICAgICAgIDwvZGl2PlxuICAgICAgKX1cblxuICAgICAge2N1cnJlbnRCaWxsLnZlbmRvciAmJiAoXG4gICAgICAgIDxkaXY+XG4gICAgICAgICAgPExhYmVsIGNsYXNzTmFtZT0ndGV4dC1zbSBmb250LW1lZGl1bSc+VmVuZG9yPC9MYWJlbD5cbiAgICAgICAgICA8cCBjbGFzc05hbWU9J3RleHQtc20gdGV4dC1ncmF5LTYwMCc+e2N1cnJlbnRCaWxsLnZlbmRvcn08L3A+XG4gICAgICAgIDwvZGl2PlxuICAgICAgKX1cblxuICAgICAge2N1cnJlbnRCaWxsLm5vdGVzICYmIChcbiAgICAgICAgPGRpdj5cbiAgICAgICAgICA8TGFiZWwgY2xhc3NOYW1lPSd0ZXh0LXNtIGZvbnQtbWVkaXVtJz5Ob3RlczwvTGFiZWw+XG4gICAgICAgICAgPHAgY2xhc3NOYW1lPSd0ZXh0LXNtIHRleHQtZ3JheS02MDAnPntjdXJyZW50QmlsbC5ub3Rlc308L3A+XG4gICAgICAgIDwvZGl2PlxuICAgICAgKX1cblxuICAgICAgey8qIEVuZCBEYXRlIE1hbmFnZW1lbnQgZm9yIFJlY3VycmVudCBCaWxscyAqL31cbiAgICAgIHtjdXJyZW50QmlsbC5wYXltZW50VHlwZSA9PT0gJ3JlY3VycmVudCcgJiYgKFxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT0nYm9yZGVyLXQgcHQtNCc+XG4gICAgICAgICAgPExhYmVsIGNsYXNzTmFtZT0ndGV4dC1zbSBmb250LW1lZGl1bSc+UmVjdXJyZW5jZSBFbmQgRGF0ZTwvTGFiZWw+XG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9J2ZsZXggaXRlbXMtY2VudGVyIGdhcC0yIG10LTInPlxuICAgICAgICAgICAgPElucHV0XG4gICAgICAgICAgICAgIHR5cGU9J2RhdGUnXG4gICAgICAgICAgICAgIHZhbHVlPXtlbmREYXRlfVxuICAgICAgICAgICAgICBvbkNoYW5nZT17KGUpID0+IHNldEVuZERhdGUoZS50YXJnZXQudmFsdWUpfVxuICAgICAgICAgICAgICBjbGFzc05hbWU9J3ctNDgnXG4gICAgICAgICAgICAvPlxuICAgICAgICAgICAgPEJ1dHRvbiBvbkNsaWNrPXtoYW5kbGVTZXRFbmREYXRlfSBkaXNhYmxlZD17dXBkYXRlQmlsbE11dGF0aW9uLmlzUGVuZGluZ30gc2l6ZT0nc20nPlxuICAgICAgICAgICAgICB7dXBkYXRlQmlsbE11dGF0aW9uLmlzUGVuZGluZyA/ICdTZXR0aW5nLi4uJyA6ICdTZXQgRW5kIERhdGUnfVxuICAgICAgICAgICAgPC9CdXR0b24+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgPHAgY2xhc3NOYW1lPSd0ZXh0LXhzIHRleHQtZ3JheS01MDAgbXQtMSc+XG4gICAgICAgICAgICBTZXR0aW5nIGFuIGVuZCBkYXRlIHdpbGwgc3RvcCBhdXRvLWdlbmVyYXRpb24gb2YgZnV0dXJlIGJpbGxzIGFmdGVyIHRoaXMgZGF0ZS5cbiAgICAgICAgICA8L3A+XG4gICAgICAgIDwvZGl2PlxuICAgICAgKX1cblxuICAgICAgey8qIENvc3RzIEJyZWFrZG93biAqL31cbiAgICAgIHtjdXJyZW50QmlsbC5jb3N0cyAmJiBjdXJyZW50QmlsbC5jb3N0cy5sZW5ndGggPiAxICYmIChcbiAgICAgICAgPGRpdj5cbiAgICAgICAgICA8TGFiZWwgY2xhc3NOYW1lPSd0ZXh0LXNtIGZvbnQtbWVkaXVtJz5QYXltZW50IEJyZWFrZG93bjwvTGFiZWw+XG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9J3NwYWNlLXktMSBtdC0xJz5cbiAgICAgICAgICAgIHtjdXJyZW50QmlsbC5jb3N0cy5tYXAoKGNvc3QsIGluZGV4KSA9PiAoXG4gICAgICAgICAgICAgIDxkaXYga2V5PXtpbmRleH0gY2xhc3NOYW1lPSdmbGV4IGp1c3RpZnktYmV0d2VlbiB0ZXh0LXNtJz5cbiAgICAgICAgICAgICAgICA8c3Bhbj5QYXltZW50IHtpbmRleCArIDF9Ojwvc3Bhbj5cbiAgICAgICAgICAgICAgICA8c3Bhbj4ke051bWJlcihjb3N0KS50b0xvY2FsZVN0cmluZygpfTwvc3Bhbj5cbiAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICApKX1cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgPC9kaXY+XG4gICAgICApfVxuXG4gICAgICB7LyogRG9jdW1lbnQgU2VjdGlvbiAtIE9ubHkgc2hvdyBpZiBkb2N1bWVudCBleGlzdHMgKi99XG4gICAgICB7Y3VycmVudEJpbGwuZmlsZVBhdGggJiYgKFxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT0nYm9yZGVyLXQgcHQtNCc+XG4gICAgICAgICAgPExhYmVsIGNsYXNzTmFtZT0ndGV4dC1zbSBmb250LW1lZGl1bSc+VXBsb2FkZWQgRG9jdW1lbnQ8L0xhYmVsPlxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSdtdC0yJz5cbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSdmbGV4IGl0ZW1zLWNlbnRlciBqdXN0aWZ5LWJldHdlZW4gcC0zIGJnLWdyYXktNTAgcm91bmRlZC1sZyc+XG4gICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSdmbGV4IGl0ZW1zLWNlbnRlciBnYXAtMic+XG4gICAgICAgICAgICAgICAgPEZpbGVUZXh0IGNsYXNzTmFtZT0ndy00IGgtNCB0ZXh0LWJsdWUtNjAwJyAvPlxuICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT0ndGV4dC1zbSc+e2N1cnJlbnRCaWxsLmZpbGVOYW1lfTwvc3Bhbj5cbiAgICAgICAgICAgICAgICB7Y3VycmVudEJpbGwuaXNBaUFuYWx5emVkICYmIChcbiAgICAgICAgICAgICAgICAgIDxCYWRnZSB2YXJpYW50PSdvdXRsaW5lJyBjbGFzc05hbWU9J3RleHQteHMnPlxuICAgICAgICAgICAgICAgICAgICBBSSBBbmFseXplZFxuICAgICAgICAgICAgICAgICAgPC9CYWRnZT5cbiAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgPEJ1dHRvblxuICAgICAgICAgICAgICAgIHZhcmlhbnQ9J291dGxpbmUnXG4gICAgICAgICAgICAgICAgc2l6ZT0nc20nXG4gICAgICAgICAgICAgICAgb25DbGljaz17KCkgPT4ge1xuICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ1tET1dOTE9BRF0gU3RhcnRpbmcgZG93bmxvYWQgZm9yIGJpbGw6JywgY3VycmVudEJpbGwuaWQpO1xuICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ1tET1dOTE9BRF0gRG9jdW1lbnQgbmFtZTonLCBjdXJyZW50QmlsbC5maWxlTmFtZSk7XG4gICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnW0RPV05MT0FEXSBEb2N1bWVudCBwYXRoOicsIGN1cnJlbnRCaWxsLmZpbGVQYXRoKTtcbiAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgLy8gRG93bmxvYWQgdGhlIGRvY3VtZW50XG4gICAgICAgICAgICAgICAgICBjb25zdCBsaW5rID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYScpO1xuICAgICAgICAgICAgICAgICAgbGluay5ocmVmID0gYC9hcGkvYmlsbHMvJHtjdXJyZW50QmlsbC5pZH0vZG93bmxvYWQtZG9jdW1lbnRgO1xuICAgICAgICAgICAgICAgICAgbGluay5kb3dubG9hZCA9IGN1cnJlbnRCaWxsLmZpbGVOYW1lIHx8ICdiaWxsLWRvY3VtZW50JztcbiAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQobGluayk7XG4gICAgICAgICAgICAgICAgICBsaW5rLmNsaWNrKCk7XG4gICAgICAgICAgICAgICAgICBkb2N1bWVudC5ib2R5LnJlbW92ZUNoaWxkKGxpbmspO1xuICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnW0RPV05MT0FEXSBEb3dubG9hZCBsaW5rIGNsaWNrZWQnKTtcbiAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgIGNsYXNzTmFtZT0nZmxleCBpdGVtcy1jZW50ZXIgZ2FwLTEnXG4gICAgICAgICAgICAgICAgZGF0YS10ZXN0aWQ9e2BidXR0b24tZG93bmxvYWQtZG9jdW1lbnQtJHtjdXJyZW50QmlsbC5pZH1gfVxuICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgPEZpbGVUZXh0IGNsYXNzTmFtZT0ndy0zIGgtMycgLz5cbiAgICAgICAgICAgICAgICBEb3dubG9hZFxuICAgICAgICAgICAgICA8L0J1dHRvbj5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICA8L2Rpdj5cbiAgICAgICl9XG5cbiAgICAgIHsvKiBFZGl0IE1vZGUgVG9nZ2xlICovfVxuICAgICAgPGRpdiBjbGFzc05hbWU9J2JvcmRlci10IHB0LTQnPlxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT0nZmxleCBpdGVtcy1jZW50ZXIganVzdGlmeS1iZXR3ZWVuJz5cbiAgICAgICAgICA8TGFiZWwgY2xhc3NOYW1lPSd0ZXh0LXNtIGZvbnQtbWVkaXVtJz5BY3Rpb25zPC9MYWJlbD5cbiAgICAgICAgICA8QnV0dG9uIG9uQ2xpY2s9e29uRWRpdEJpbGx9IHZhcmlhbnQ9J291dGxpbmUnIHNpemU9J3NtJz5cbiAgICAgICAgICAgIEVkaXQgQmlsbFxuICAgICAgICAgIDwvQnV0dG9uPlxuICAgICAgICA8L2Rpdj5cbiAgICAgIDwvZGl2PlxuXG4gICAgICB7LyogQWN0aW9ucyAqL31cbiAgICAgIDxkaXYgY2xhc3NOYW1lPSdmbGV4IGp1c3RpZnktZW5kIGdhcC0yIHB0LTQgYm9yZGVyLXQnPlxuICAgICAgICA8QnV0dG9uIHZhcmlhbnQ9J291dGxpbmUnIG9uQ2xpY2s9e29uQ2FuY2VsfT5cbiAgICAgICAgICBDbG9zZVxuICAgICAgICA8L0J1dHRvbj5cbiAgICAgIDwvZGl2PlxuICAgIDwvZGl2PlxuICApO1xufVxuIl0sInZlcnNpb24iOjN9