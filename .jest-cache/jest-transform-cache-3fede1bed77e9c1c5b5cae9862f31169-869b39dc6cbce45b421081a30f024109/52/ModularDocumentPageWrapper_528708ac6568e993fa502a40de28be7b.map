{"file":"/home/runner/workspace/client/src/components/common/ModularDocumentPageWrapper.tsx","mappings":"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","names":[],"sources":["/home/runner/workspace/client/src/components/common/ModularDocumentPageWrapper.tsx"],"sourcesContent":["import React, { useState } from 'react';\nimport { useQuery } from '@tanstack/react-query';\nimport { useLocation, useParams } from 'wouter';\nimport { Grid, List, ArrowLeft, Plus, Search, Filter, Building, Home, ChevronDown, ChevronRight, Eye } from 'lucide-react';\nimport { Button } from '@/components/ui/button';\nimport { Input } from '@/components/ui/input';\nimport { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card';\nimport { Badge } from '@/components/ui/badge';\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from '@/components/ui/select';\nimport { Dialog, DialogContent, DialogHeader, DialogTitle } from '@/components/ui/dialog';\nimport { Label } from '@/components/ui/label';\nimport {\n  Collapsible,\n  CollapsibleContent,\n  CollapsibleTrigger,\n} from '@/components/ui/collapsible';\nimport { Header } from '@/components/layout/header';\nimport { apiRequest, queryClient } from '@/lib/queryClient';\nimport { useLanguage } from '@/hooks/use-language';\nimport {\n  SharedUploader,\n  DocumentCard,\n  DocumentEditForm\n} from '@/components/document-management';\nimport { DocumentCreateForm } from '@/components/document-management/DocumentCreateForm';\nimport { FileText, Download } from 'lucide-react';\nimport type { DocumentWithMetadata, DocumentPermissions } from '@shared/schemas/documents';\n\n// Document View Dialog Component\ninterface DocumentViewDialogProps {\n  documentId: string;\n  isOpen: boolean;\n  onClose: () => void;\n  onEdit: () => void;\n  canEdit: boolean;\n}\n\nfunction DocumentViewDialog({ documentId, isOpen, onClose, onEdit, canEdit }: DocumentViewDialogProps) {\n  const { data: document, isLoading } = useQuery({\n    queryKey: ['/api/documents', documentId],\n    queryFn: async () => {\n      const response = await apiRequest('GET', `/api/documents/${documentId}`);\n      return response.json();\n    },\n    enabled: isOpen && !!documentId,\n  });\n\n  const handleDownload = async () => {\n    console.log('[DOWNLOAD] Starting download for document:', documentId);\n    try {\n      // Use fetch with credentials to ensure authentication\n      const response = await fetch(`/api/documents/${documentId}/file?download=true`, {\n        method: 'GET',\n        credentials: 'include', // Include authentication cookies\n      });\n\n      if (!response.ok) {\n        throw new Error(`Download failed: ${response.status} ${response.statusText}`);\n      }\n\n      // Get the filename from Content-Disposition header or use document name\n      const contentDisposition = response.headers.get('Content-Disposition');\n      let fileName = document?.name || 'document';\n      \n      if (contentDisposition) {\n        const fileNameMatch = contentDisposition.match(/filename=\"([^\"]+)\"/);\n        if (fileNameMatch) {\n          fileName = fileNameMatch[1];\n        }\n      }\n\n      // Convert response to blob and create download\n      const blob = await response.blob();\n      const url = window.URL.createObjectURL(blob);\n      \n      const link = window.document.createElement('a');\n      link.href = url;\n      link.download = fileName;\n      window.document.body.appendChild(link);\n      link.click();\n      \n      // Clean up\n      window.document.body.removeChild(link);\n      window.URL.revokeObjectURL(url);\n      \n      console.log('[DOWNLOAD] Download completed successfully');\n    } catch (error) {\n      console.error('[DOWNLOAD] Download failed:', error);\n      alert(`Download failed: ${error.message || 'Unknown error'}`);\n    }\n  };\n\n  const handleView = async () => {\n    if (document?.filePath) {\n      try {\n        console.log('[VIEW] Starting view for document:', documentId);\n        \n        // Open a new tab immediately to avoid popup blocking\n        const newTab = window.open('about:blank', '_blank');\n        if (!newTab) {\n          throw new Error('Popup blocked - please allow popups for this site');\n        }\n        \n        // Use fetch with credentials to ensure authentication\n        const response = await fetch(`/api/documents/${documentId}/file`, {\n          method: 'GET',\n          credentials: 'include', // Include authentication cookies\n        });\n\n        if (!response.ok) {\n          newTab.close();\n          throw new Error(`View failed: ${response.status} ${response.statusText}`);\n        }\n\n        // Convert response to blob and set it as the new tab's location\n        const blob = await response.blob();\n        const url = window.URL.createObjectURL(blob);\n        \n        // Set the blob URL to the opened tab\n        newTab.location.href = url;\n        \n        // Clean up the URL after a delay to allow the tab to load\n        setTimeout(() => {\n          window.URL.revokeObjectURL(url);\n        }, 3000);\n        \n        console.log('[VIEW] View completed successfully');\n        \n      } catch (error) {\n        console.error('[VIEW] View failed:', error);\n        // Show error notification if available\n        alert(`Failed to open document: ${error.message}`);\n      }\n    }\n  };\n\n  return (\n    <Dialog open={isOpen} onOpenChange={onClose}>\n      <DialogContent className=\"max-w-2xl max-h-[95vh] overflow-y-auto\">\n        <DialogHeader>\n          <DialogTitle>Document Details</DialogTitle>\n        </DialogHeader>\n        \n        {isLoading ? (\n          <div className=\"p-8 text-center\">\n            <div className=\"animate-spin w-8 h-8 border-4 border-primary border-t-transparent rounded-full mx-auto mb-4\"></div>\n            <p className=\"text-gray-500\">Loading document...</p>\n          </div>\n        ) : document ? (\n          <div className=\"space-y-6\">\n            {/* Document Information */}\n            <div className=\"grid grid-cols-2 gap-4\">\n              <div>\n                <Label className=\"text-sm font-medium\">Document Name</Label>\n                <p className=\"text-sm text-gray-600\">{document.name}</p>\n              </div>\n              <div>\n                <Label className=\"text-sm font-medium\">Category</Label>\n                <p className=\"text-sm text-gray-600 capitalize\">{document.category || document.documentType || 'Other'}</p>\n              </div>\n              <div>\n                <Label className=\"text-sm font-medium\">Upload Date</Label>\n                <p className=\"text-sm text-gray-600\">{new Date(document.createdAt).toLocaleDateString()}</p>\n              </div>\n              <div>\n                <Label className=\"text-sm font-medium\">Visible to Tenants</Label>\n                <p className=\"text-sm text-gray-600\">{document.isVisibleToTenants ? 'Yes' : 'No'}</p>\n              </div>\n            </div>\n\n            {/* Description */}\n            {document.description && (\n              <div>\n                <Label className=\"text-sm font-medium\">Description</Label>\n                <p className=\"text-sm text-gray-600\">{document.description}</p>\n              </div>\n            )}\n\n            {/* Document Actions */}\n            {document.filePath && (\n              <div className=\"border rounded-lg p-4\">\n                <div className=\"flex items-center justify-between\">\n                  <div className=\"flex items-center gap-3\">\n                    <FileText className=\"w-5 h-5 text-gray-500\" />\n                    <div>\n                      <p className=\"text-sm font-medium\">{document.fileName || document.name}</p>\n                      <p className=\"text-xs text-gray-500\">Document attachment</p>\n                    </div>\n                  </div>\n                  <div className=\"flex gap-2\">\n                    <Button\n                      variant=\"outline\"\n                      size=\"sm\"\n                      onClick={handleView}\n                      className=\"flex items-center gap-1\"\n                      data-testid=\"button-view-document-file\"\n                    >\n                      <Eye className=\"w-3 h-3\" />\n                      View\n                    </Button>\n                    <Button\n                      variant=\"outline\"\n                      size=\"sm\"\n                      onClick={handleDownload}\n                      className=\"flex items-center gap-1\"\n                      data-testid=\"button-download-document-file\"\n                    >\n                      <Download className=\"w-3 h-3\" />\n                      Download\n                    </Button>\n                  </div>\n                </div>\n              </div>\n            )}\n\n            {/* Action Buttons */}\n            <div className=\"flex gap-2 justify-end pt-4 border-t\">\n              {canEdit && (\n                <Button variant=\"outline\" onClick={onEdit}>\n                  Edit Document\n                </Button>\n              )}\n              <Button variant=\"default\" onClick={onClose}>\n                Close\n              </Button>\n            </div>\n          </div>\n        ) : (\n          <div className=\"p-8 text-center\">\n            <p className=\"text-gray-500\">Document not found</p>\n            <Button variant=\"outline\" onClick={onClose} className=\"mt-4\">\n              Close\n            </Button>\n          </div>\n        )}\n      </DialogContent>\n    </Dialog>\n  );\n}\n\n// Document Edit Dialog Component  \ninterface DocumentEditDialogProps {\n  documentId: string;\n  isOpen: boolean;\n  onClose: () => void;\n  onSuccess: () => void;\n}\n\nfunction DocumentEditDialog({ documentId, isOpen, onClose, onSuccess }: DocumentEditDialogProps) {\n  const { data: document, isLoading } = useQuery({\n    queryKey: ['/api/documents', documentId],\n    queryFn: async () => {\n      const response = await apiRequest('GET', `/api/documents/${documentId}`);\n      return response.json();\n    },\n    enabled: isOpen && !!documentId,\n  });\n\n  const handleSuccess = () => {\n    onSuccess();\n    onClose();\n  };\n\n  const handleDelete = () => {\n    onSuccess(); // Refresh the document list\n    onClose();\n  };\n\n  return (\n    <Dialog open={isOpen} onOpenChange={onClose}>\n      <DialogContent className=\"max-w-4xl max-h-[95vh] overflow-y-auto\">\n        <DialogHeader>\n          <DialogTitle>Edit Document</DialogTitle>\n        </DialogHeader>\n        \n        {isLoading ? (\n          <div className=\"p-8 text-center\">\n            <div className=\"animate-spin w-8 h-8 border-4 border-primary border-t-transparent rounded-full mx-auto mb-4\"></div>\n            <p className=\"text-gray-500\">Loading document...</p>\n          </div>\n        ) : document ? (\n          <div className=\"p-6\">\n            <DocumentEditForm\n              document={document}\n              onSuccess={handleSuccess}\n              onCancel={onClose}\n              onDelete={handleDelete}\n            />\n          </div>\n        ) : (\n          <div className=\"p-8 text-center\">\n            <p className=\"text-gray-500\">Document not found</p>\n            <Button variant=\"outline\" onClick={onClose} className=\"mt-4\">\n              Close\n            </Button>\n          </div>\n        )}\n      </DialogContent>\n    </Dialog>\n  );\n}\n\n// Document categories for filtering\nconst DOCUMENT_CATEGORIES = [\n  { value: 'all', label: 'All Categories' },\n  { value: 'bylaw', label: 'Bylaws' },\n  { value: 'financial', label: 'Financial' },\n  { value: 'maintenance', label: 'Maintenance' },\n  { value: 'legal', label: 'Legal' },\n  { value: 'meeting_minutes', label: 'Meeting Minutes' },\n  { value: 'insurance', label: 'Insurance' },\n  { value: 'contracts', label: 'Contracts' },\n  { value: 'permits', label: 'Permits' },\n  { value: 'inspection', label: 'Inspection' },\n  { value: 'other', label: 'Other' },\n] as const;\n\ninterface ModularDocumentPageWrapperProps {\n  type: 'building' | 'residence';\n  userRole: 'manager' | 'resident';\n  backPath: string;\n  backLabel?: string;\n  entityIdParam: string;\n}\n\nexport default function ModularDocumentPageWrapper({\n  type,\n  userRole,\n  backPath,\n  backLabel,\n  entityIdParam,\n}: ModularDocumentPageWrapperProps) {\n  const [, navigate] = useLocation();\n  const params = useParams();\n  const { t } = useLanguage();\n\n  // State for document interactions\n  const [isCreateDialogOpen, setIsCreateDialogOpen] = useState(false);\n  \n  // State for filtering and search\n  const [searchTerm, setSearchTerm] = useState('');\n  const [selectedCategory, setSelectedCategory] = useState('all');\n  const [viewMode, setViewMode] = useState<'grid' | 'list'>('grid');\n  \n  // State for collapsible categories (start with all categories expanded)\n  const [expandedCategories, setExpandedCategories] = useState<Set<string>>(() => {\n    // Initialize with all possible categories expanded\n    return new Set(DOCUMENT_CATEGORIES.map(cat => cat.value).filter(val => val !== 'all'));\n  });\n\n  // Toggle category expansion\n  const toggleCategory = (category: string) => {\n    const newExpanded = new Set(expandedCategories);\n    if (newExpanded.has(category)) {\n      newExpanded.delete(category);\n    } else {\n      newExpanded.add(category);\n    }\n    setExpandedCategories(newExpanded);\n  };\n\n  // Get entityId from URL (both path param and query param)\n  const urlParams = new URLSearchParams(window.location.search);\n  const entityId = (params as any)[entityIdParam] || urlParams.get(entityIdParam);\n\n  // Get current user\n  const { data: user } = useQuery({\n    queryKey: ['/api/auth/user'],\n    queryFn: () => apiRequest('GET', '/api/auth/user') as Promise<any>,\n  });\n\n  // Get entity info based on type\n  const entityApiPath = type === 'building' ? '/api/manager/buildings' : '/api/residences';\n  const { data: entity, isError: entityError, error } = useQuery({\n    queryKey: [entityApiPath, entityId],\n    queryFn: async () => {\n      if (type === 'residence') {\n        const response = await fetch(`/api/residences/${entityId}`, {\n          credentials: 'include',\n        });\n        if (!response.ok) {\n          if (response.status === 404) {\n            throw new Error('ENTITY_NOT_FOUND');\n          }\n          throw new Error(`Failed to fetch ${type}`);\n        }\n        return response.json();\n      } else {\n        return apiRequest('GET', `${entityApiPath}/${entityId}`) as Promise<any>;\n      }\n    },\n    enabled: !!entityId,\n    retry: false, // Don't retry on 404s\n  });\n\n  // Fetch documents for this entity\n  const { data: documentResponse, isLoading, error: documentsError } = useQuery({\n    queryKey: ['/api/documents', type, entityId],\n    queryFn: async () => {\n      const param = type === 'building' ? 'buildingId' : 'residenceId';\n      const response = await apiRequest('GET', `/api/documents?${param}=${entityId}`);\n      return response.json();\n    },\n    enabled: !!entityId,\n    staleTime: 0, // Always refetch\n    cacheTime: 0, // Don't cache\n  });\n\n  // Extract documents array from API response\n  const documents = Array.isArray(documentResponse?.documents) ? documentResponse.documents : [];\n\n  // Determine permissions based on user role and type\n  const isUserTenant = user?.role === 'tenant';\n  const isManager = user?.role === 'manager' || user?.role === 'admin';\n  \n  const userPermissions: DocumentPermissions = userRole === 'manager' \n    ? {\n        canView: true,\n        canDownload: true,\n        canEdit: isManager,\n        canDelete: isManager,\n        canCreate: isManager,\n      }\n    : {\n        canView: true,\n        canDownload: !isUserTenant,\n        canEdit: !isUserTenant,\n        canDelete: !isUserTenant,\n        canCreate: !isUserTenant,\n      };\n\n  // Filter and search documents\n  const filteredDocuments = Array.isArray(documents) ? documents.filter(doc => {\n    const matchesSearch = doc.name.toLowerCase().includes(searchTerm.toLowerCase()) ||\n                         doc.description?.toLowerCase().includes(searchTerm.toLowerCase());\n    \n    const matchesCategory = selectedCategory === 'all' || doc.category === selectedCategory || doc.documentType === selectedCategory;\n\n    return matchesSearch && matchesCategory;\n  }) : [];\n\n  // Group documents by category\n  const groupedDocuments = filteredDocuments.reduce((groups, doc) => {\n    const category = doc.category || doc.documentType || 'other';\n    if (!groups[category]) {\n      groups[category] = [];\n    }\n    groups[category].push(doc);\n    return groups;\n  }, {} as Record<string, typeof filteredDocuments>);\n\n  // Get category display name\n  const getCategoryDisplayName = (category: string) => {\n    const categoryLabels: Record<string, string> = {\n      bylaw: 'Bylaws',\n      financial: 'Financial Documents',\n      maintenance: 'Maintenance Records',\n      legal: 'Legal Documents',\n      meeting_minutes: 'Meeting Minutes',\n      insurance: 'Insurance Documents',\n      contracts: 'Contracts',\n      permits: 'Permits',\n      inspection: 'Inspection Reports',\n      other: 'Other Documents',\n    };\n    return categoryLabels[category] || category.replace('_', ' ').replace(/\\b\\w/g, l => l.toUpperCase());\n  };\n\n\n  // Generate entity name based on type\n  const entityName = type === 'residence' \n    ? (entity?.unitNumber || entity?.unit_number ? `Unit ${entity.unitNumber || entity.unit_number}` : 'Residence')\n    : entity?.name;\n\n  const defaultBackLabel = backLabel || (type === 'building' ? 'Back to Buildings' : t('backToResidences'));\n\n  // State for document view and edit dialogs\n  const [selectedDocumentId, setSelectedDocumentId] = useState<string | null>(null);\n  const [isViewDialogOpen, setIsViewDialogOpen] = useState(false);\n  const [isEditDialogOpen, setIsEditDialogOpen] = useState(false);\n\n  // Handle document interactions\n  const handleDocumentView = (documentId: string) => {\n    setSelectedDocumentId(documentId);\n    setIsViewDialogOpen(true);\n  };\n\n  const handleDocumentEdit = (documentId: string) => {\n    setSelectedDocumentId(documentId);\n    setIsEditDialogOpen(true);\n  };\n\n  const handleCreateDocument = () => {\n    setIsCreateDialogOpen(true);\n  };\n\n  const handleDocumentSuccess = (documentId: string) => {\n    console.log(`Document created:`, documentId);\n    // Refresh documents list will be handled by the DocumentCreateForm's cache invalidation\n  };\n\n  const clearFilters = () => {\n    setSearchTerm('');\n    setSelectedCategory('all');\n  };\n\n  if (!entityId) {\n    return (\n      <div className=\"flex-1 flex flex-col overflow-hidden\">\n        <div className=\"flex-1 flex items-center justify-center\">\n          <div className=\"text-center\">\n            <p className=\"text-gray-500 mb-4\">{type} ID is required</p>\n            <Button\n              variant=\"outline\"\n              onClick={() => navigate(backPath)}\n              data-testid=\"button-back-to-list\"\n            >\n              <ArrowLeft className=\"w-4 h-4 mr-2\" />\n              {defaultBackLabel}\n            </Button>\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  // Handle entity not found (specific to residence pages that had this logic)\n  if (entityError && error?.message === 'ENTITY_NOT_FOUND' && type === 'residence') {\n    return (\n      <div className=\"flex-1 flex flex-col overflow-hidden\">\n        <div className=\"flex-1 flex items-center justify-center\">\n          <div className=\"text-center max-w-md\">\n            <h2 className=\"text-xl font-semibold mb-4\">Residence Not Found</h2>\n            <p className=\"text-gray-500 mb-4\">\n              The residence ID \"{entityId}\" doesn't exist in the development database.\n            </p>\n            <p className=\"text-sm text-gray-400 mb-6\">\n              This might be a production database ID. Please use a valid development residence ID.\n            </p>\n            <div className=\"space-y-2\">\n              <Button\n                variant=\"default\"\n                onClick={() => navigate(backPath)}\n                data-testid=\"button-back-to-list\"\n                className=\"w-full\"\n              >\n                <ArrowLeft className=\"w-4 h-4 mr-2\" />\n                {backLabel || 'Back to Residences'}\n              </Button>\n              <Button\n                variant=\"outline\"\n                onClick={() =>\n                  navigate('/residents/residences/e27ac924-8120-4904-a791-d1e9db544d58/documents')\n                }\n                data-testid=\"button-go-to-valid-residence\"\n                className=\"w-full\"\n              >\n                Go to Unit 101 (Test Residence)\n              </Button>\n            </div>\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"flex-1 flex flex-col overflow-hidden\">\n      <Header \n        title={entityName}\n        subtitle={type === 'building' ? 'Building Documents' : 'Residence Documents'}\n      />\n\n      <div className=\"flex-1 overflow-auto p-6\">\n        <div className=\"max-w-7xl mx-auto space-y-6\">\n          {/* Back Button */}\n          <div className=\"flex items-center justify-between\">\n            <Button\n              variant=\"outline\"\n              onClick={() => navigate(backPath)}\n              data-testid=\"button-back\"\n            >\n              <ArrowLeft className=\"w-4 h-4 mr-2\" />\n              {defaultBackLabel}\n            </Button>\n            <div></div>\n          </div>\n\n          {/* Filters and Search Section */}\n          <Card>\n            <CardHeader>\n              <CardTitle className=\"flex items-center gap-2\">\n                <Filter className=\"w-5 h-5\" />\n                Search & Filters\n              </CardTitle>\n            </CardHeader>\n            <CardContent>\n              <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\n                {/* Search */}\n                <div className=\"space-y-2\">\n                  <label className=\"text-sm font-medium\">Search</label>\n                  <div className=\"relative\">\n                    <Search className=\"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground w-4 h-4\" />\n                    <Input\n                      placeholder=\"Search documents...\"\n                      value={searchTerm}\n                      onChange={(e) => setSearchTerm(e.target.value)}\n                      className=\"pl-10\"\n                      data-testid=\"input-search-documents\"\n                    />\n                  </div>\n                </div>\n\n                {/* Category Filter */}\n                <div className=\"space-y-2\">\n                  <label className=\"text-sm font-medium\">Category</label>\n                  <Select value={selectedCategory} onValueChange={setSelectedCategory}>\n                    <SelectTrigger data-testid=\"select-category-filter\">\n                      <SelectValue placeholder=\"All Categories\" />\n                    </SelectTrigger>\n                    <SelectContent>\n                      {DOCUMENT_CATEGORIES.map((category) => (\n                        <SelectItem key={category.value} value={category.value}>\n                          {category.label}\n                        </SelectItem>\n                      ))}\n                    </SelectContent>\n                  </Select>\n                </div>\n\n                {/* View Mode & Actions */}\n                <div className=\"space-y-2\">\n                  <label className=\"text-sm font-medium\">View & Actions</label>\n                  <div className=\"flex gap-2\">\n                    <div className=\"flex gap-1\">\n                      <Button\n                        variant={viewMode === 'grid' ? 'default' : 'outline'}\n                        size=\"sm\"\n                        onClick={() => setViewMode('grid')}\n                        data-testid=\"button-grid-view\"\n                      >\n                        <Grid className=\"w-4 h-4\" />\n                      </Button>\n                      <Button\n                        variant={viewMode === 'list' ? 'default' : 'outline'}\n                        size=\"sm\"\n                        onClick={() => setViewMode('list')}\n                        data-testid=\"button-list-view\"\n                      >\n                        <List className=\"w-4 h-4\" />\n                      </Button>\n                    </div>\n                    {userPermissions.canCreate && (\n                      <Button \n                        onClick={handleCreateDocument} \n                        size=\"sm\"\n                        data-testid=\"button-create-document\"\n                      >\n                        <Plus className=\"w-4 h-4 mr-2\" />\n                        Create\n                      </Button>\n                    )}\n                    <Button \n                      variant=\"outline\" \n                      size=\"sm\"\n                      onClick={clearFilters}\n                      data-testid=\"button-clear-filters\"\n                    >\n                      Clear\n                    </Button>\n                  </div>\n                </div>\n              </div>\n            </CardContent>\n          </Card>\n\n          {/* Documents Display */}\n          <div className=\"flex justify-between items-center\">\n            <div className=\"flex items-center gap-2\">\n              <span className=\"text-sm text-muted-foreground\">\n                {filteredDocuments.length} document{filteredDocuments.length !== 1 ? 's' : ''} found\n              </span>\n              {(searchTerm || selectedCategory !== 'all') && (\n                <Badge variant=\"secondary\">Filtered</Badge>\n              )}\n            </div>\n          </div>\n\n          {/* Documents Content */}\n          {isLoading ? (\n            <Card>\n              <CardContent className=\"p-8 text-center\">\n                <div className=\"animate-spin w-8 h-8 border-4 border-primary border-t-transparent rounded-full mx-auto mb-4\"></div>\n                <p className=\"text-gray-500\">Loading documents...</p>\n              </CardContent>\n            </Card>\n          ) : filteredDocuments.length === 0 ? (\n            <Card>\n              <CardContent className=\"p-8 text-center\">\n                <div className=\"text-center\">\n                  <div className=\"w-16 h-16 mx-auto mb-4 bg-muted rounded-full flex items-center justify-center\">\n                    <Search className=\"w-8 h-8 text-muted-foreground\" />\n                  </div>\n                  <h3 className=\"text-lg font-semibold text-gray-600 mb-2\">No Documents Found</h3>\n                  <p className=\"text-gray-500 mb-4\">\n                    {searchTerm || selectedCategory !== 'all'\n                      ? \"No documents match your current filters. Try adjusting your search criteria.\"\n                      : `No documents have been uploaded for this ${type} yet. Create your first document to get started.`\n                    }\n                  </p>\n                  <div className=\"flex gap-2 justify-center\">\n                    {(searchTerm || selectedCategory !== 'all') && (\n                      <Button variant=\"outline\" onClick={clearFilters}>\n                        Clear Filters\n                      </Button>\n                    )}\n                    {userPermissions.canCreate && (\n                      <Button onClick={handleCreateDocument}>\n                        <Plus className=\"w-4 h-4 mr-2\" />\n                        Create Document\n                      </Button>\n                    )}\n                  </div>\n                </div>\n              </CardContent>\n            </Card>\n          ) : (\n            <div className=\"space-y-6\">\n              {Object.entries(groupedDocuments).map(([category, categoryDocuments]) => {\n                const isExpanded = expandedCategories.has(category);\n                \n                return (\n                  <div key={category} className=\"space-y-3\">\n                    <Collapsible open={isExpanded} onOpenChange={() => toggleCategory(category)}>\n                      <CollapsibleTrigger className=\"flex items-center gap-2 p-2 w-full text-left hover:bg-gray-50 dark:hover:bg-gray-800 rounded-lg transition-colors\">\n                        {isExpanded ? (\n                          <ChevronDown className=\"h-4 w-4\" />\n                        ) : (\n                          <ChevronRight className=\"h-4 w-4\" />\n                        )}\n                        <span className=\"text-lg font-semibold\">\n                          {getCategoryDisplayName(category)}\n                        </span>\n                        <Badge variant=\"secondary\" className=\"ml-2\">\n                          {categoryDocuments.length}\n                        </Badge>\n                      </CollapsibleTrigger>\n                      \n                      <CollapsibleContent className=\"space-y-3\">\n                        <Card>\n                          <CardContent className=\"pt-6\">\n                            <div className={`grid gap-4 ${\n                              viewMode === 'grid' \n                                ? 'grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4' \n                                : 'grid-cols-1'\n                            }`}>\n                              {categoryDocuments.map((document) => (\n                                <DocumentCard\n                                  key={document.id}\n                                  documentId={document.id}\n                                  title={document.name}\n                                  documentType={document.category || document.documentType}\n                                  createdAt={document.createdAt}\n                                  onViewClick={handleDocumentView}\n                                  compact={viewMode === 'list'}\n                                />\n                              ))}\n                            </div>\n                          </CardContent>\n                        </Card>\n                      </CollapsibleContent>\n                    </Collapsible>\n                  </div>\n                );\n              })}\n            </div>\n          )}\n\n          {/* Document Creation Dialog */}\n          <DocumentCreateForm\n            isOpen={isCreateDialogOpen}\n            onClose={() => setIsCreateDialogOpen(false)}\n            onSuccess={handleDocumentSuccess}\n            entityType={type}\n            entityId={entityId}\n            entityName={entityName}\n          />\n\n          {/* Document View Dialog */}\n          {selectedDocumentId && (\n            <DocumentViewDialog\n              documentId={selectedDocumentId}\n              isOpen={isViewDialogOpen}\n              onClose={() => {\n                setIsViewDialogOpen(false);\n                setSelectedDocumentId(null);\n              }}\n              onEdit={() => {\n                setIsViewDialogOpen(false);\n                setIsEditDialogOpen(true);\n              }}\n              canEdit={userPermissions.canEdit}\n            />\n          )}\n\n          {/* Document Edit Dialog */}\n          {selectedDocumentId && (\n            <DocumentEditDialog\n              documentId={selectedDocumentId}\n              isOpen={isEditDialogOpen}\n              onClose={() => {\n                setIsEditDialogOpen(false);\n                setSelectedDocumentId(null);\n              }}\n              onSuccess={() => {\n                setIsEditDialogOpen(false);\n                setSelectedDocumentId(null);\n                // Refresh documents list\n                queryClient.invalidateQueries({\n                  queryKey: ['/api/documents', type, entityId],\n                });\n              }}\n            />\n          )}\n        </div>\n      </div>\n    </div>\n  );\n}"],"version":3}