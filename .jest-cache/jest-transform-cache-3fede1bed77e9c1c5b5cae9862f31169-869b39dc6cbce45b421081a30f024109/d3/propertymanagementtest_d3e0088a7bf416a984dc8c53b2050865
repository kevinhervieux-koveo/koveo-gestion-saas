0f8d3e599c18fae32c6a1d14a8ee50de
"use strict";
/**
 * @file Property Management Business Logic Tests.
 * @description Comprehensive tests for Quebec property management workflows,
 * including organization hierarchy, building management, and residence assignments.
 */
Object.defineProperty(exports, "__esModule", { value: true });
const globals_1 = require("@jest/globals");
// Mock database for testing
globals_1.jest.mock('../../../server/db', () => ({
    db: {
        query: {
            organizations: {
                findMany: globals_1.jest.fn(),
                findFirst: globals_1.jest.fn(),
            },
            buildings: {
                findMany: globals_1.jest.fn(),
                findFirst: globals_1.jest.fn(),
            },
            residences: {
                findMany: globals_1.jest.fn(),
                findFirst: globals_1.jest.fn(),
            },
            userOrganizations: {
                findMany: globals_1.jest.fn(),
            },
            userResidences: {
                findMany: globals_1.jest.fn(),
            },
            users: {
                findFirst: globals_1.jest.fn(),
                findMany: globals_1.jest.fn(),
            },
            bills: {
                findMany: globals_1.jest.fn(),
            },
            maintenanceRequests: {
                findMany: globals_1.jest.fn(),
            },
        },
        select: globals_1.jest.fn(),
        insert: globals_1.jest.fn(),
        update: globals_1.jest.fn(),
        delete: globals_1.jest.fn(),
    },
}));
const db_1 = require("../../../server/db");
// Test data for Quebec property management scenarios
const testData = {
    organizations: {
        demo: {
            id: 'demo-org-id',
            name: 'Demo',
            type: 'demo',
            isActive: true,
            address: '123 Demo Street, Montreal, QC',
            phone: '+1-514-555-0100',
            email: 'demo@koveo.com',
            createdAt: new Date('2024-01-01'),
            updatedAt: new Date('2024-01-01'),
        },
        koveo: {
            id: 'koveo-org-id',
            name: 'Koveo',
            type: 'corporate',
            isActive: true,
            address: '456 Corporate Blvd, Montreal, QC',
            phone: '+1-514-555-0200',
            email: 'contact@koveo.com',
            createdAt: new Date('2024-01-01'),
            updatedAt: new Date('2024-01-01'),
        },
        montreal: {
            id: 'montreal-org-id',
            name: 'Gestion Immobilière Montréal',
            type: 'property_management',
            isActive: true,
            address: '789 Rue Sherbrooke, Montreal, QC H2L 1K6',
            phone: '+1-514-555-0300',
            email: 'info@gestion-montreal.ca',
            createdAt: new Date('2024-01-01'),
            updatedAt: new Date('2024-01-01'),
        },
        quebec: {
            id: 'quebec-org-id',
            name: 'Propriétés Résidentielles Québec',
            type: 'property_management',
            isActive: true,
            address: '321 Grande Allée, Quebec, QC G1R 2J5',
            phone: '+1-418-555-0400',
            email: 'contact@proprietes-quebec.ca',
            createdAt: new Date('2024-01-01'),
            updatedAt: new Date('2024-01-01'),
        },
    },
    buildings: {
        demoBuilding: {
            id: 'demo-building-id',
            organizationId: 'demo-org-id',
            name: 'Demo Residential Complex',
            address: '100 Demo Avenue, Montreal, QC H1A 1A1',
            city: 'Montreal',
            province: 'QC',
            postalCode: 'H1A 1A1',
            buildingType: 'residential',
            yearBuilt: 2020,
            totalFloors: 5,
            totalUnits: 50,
            isActive: true,
            amenities: ['gym', 'pool', 'laundry'],
            createdAt: new Date('2024-01-01'),
            updatedAt: new Date('2024-01-01'),
        },
        montrealTower: {
            id: 'montreal-tower-id',
            organizationId: 'montreal-org-id',
            name: 'Tour Résidentielle Montréal',
            address: '200 Rue Saint-Denis, Montreal, QC H2X 3K8',
            city: 'Montreal',
            province: 'QC',
            postalCode: 'H2X 3K8',
            buildingType: 'high_rise',
            yearBuilt: 2018,
            totalFloors: 25,
            totalUnits: 200,
            isActive: true,
            amenities: ['concierge', 'gym', 'pool', 'parking', 'storage'],
            createdAt: new Date('2024-01-01'),
            updatedAt: new Date('2024-01-01'),
        },
        quebecComplex: {
            id: 'quebec-complex-id',
            organizationId: 'quebec-org-id',
            name: 'Complexe Résidentiel Vieux-Québec',
            address: '50 Rue des Remparts, Quebec, QC G1R 3R4',
            city: 'Quebec',
            province: 'QC',
            postalCode: 'G1R 3R4',
            buildingType: 'heritage',
            yearBuilt: 1950,
            totalFloors: 4,
            totalUnits: 32,
            isActive: true,
            amenities: ['heritage_features', 'courtyard', 'storage'],
            createdAt: new Date('2024-01-01'),
            updatedAt: new Date('2024-01-01'),
        },
    },
    residences: {
        demo101: {
            id: 'demo-residence-101',
            buildingId: 'demo-building-id',
            unitNumber: '101',
            floor: 1,
            squareFootage: 750,
            bedroomCount: 2,
            bathroomCount: 1,
            rentAmount: 1200.0,
            isActive: true,
            features: ['balcony', 'dishwasher'],
            createdAt: new Date('2024-01-01'),
            updatedAt: new Date('2024-01-01'),
        },
        montreal2A: {
            id: 'montreal-residence-2A',
            buildingId: 'montreal-tower-id',
            unitNumber: '2A',
            floor: 2,
            squareFootage: 950,
            bedroomCount: 2,
            bathroomCount: 2,
            rentAmount: 1800.0,
            isActive: true,
            features: ['city_view', 'parking_included', 'storage_included'],
            createdAt: new Date('2024-01-01'),
            updatedAt: new Date('2024-01-01'),
        },
        quebec15B: {
            id: 'quebec-residence-15B',
            buildingId: 'quebec-complex-id',
            unitNumber: '15B',
            floor: 4,
            squareFootage: 680,
            bedroomCount: 1,
            bathroomCount: 1,
            rentAmount: 1100.0,
            isActive: true,
            features: ['heritage_details', 'hardwood_floors'],
            createdAt: new Date('2024-01-01'),
            updatedAt: new Date('2024-01-01'),
        },
    },
    users: {
        admin: {
            id: 'admin-user-id',
            username: 'admin@koveo.com',
            email: 'admin@koveo.com',
            firstName: 'Admin',
            lastName: 'Koveo',
            role: 'admin',
            isActive: true,
            phone: '+1-514-555-0001',
            language: 'en',
        },
        manager: {
            id: 'manager-user-id',
            username: 'gestionnaire@montreal.ca',
            email: 'gestionnaire@montreal.ca',
            firstName: 'Pierre',
            lastName: 'Gestionnaire',
            role: 'manager',
            isActive: true,
            phone: '+1-514-555-0002',
            language: 'fr',
        },
        tenant: {
            id: 'tenant-user-id',
            username: 'locataire@email.com',
            email: 'locataire@email.com',
            firstName: 'Marie',
            lastName: 'Locataire',
            role: 'tenant',
            isActive: true,
            phone: '+1-514-555-0003',
            language: 'fr',
        },
    },
};
(0, globals_1.describe)('Property Management Business Logic Tests', () => {
    let mockDb;
    (0, globals_1.beforeEach)(() => {
        mockDb = db_1.db;
        globals_1.jest.clearAllMocks();
    });
    (0, globals_1.describe)('Organization Management', () => {
        (0, globals_1.it)('should retrieve active organizations with proper hierarchy', async () => {
            mockDb.query.organizations.findMany.mockResolvedValueOnce([
                testData.organizations.demo,
                testData.organizations.koveo,
                testData.organizations.montreal,
                testData.organizations.quebec,
            ]);
            const organizations = await mockDb.query.organizations.findMany({
                where: { isActive: true },
                orderBy: { name: 'asc' },
            });
            (0, globals_1.expect)(organizations).toHaveLength(4);
            (0, globals_1.expect)(organizations[0]).toMatchObject(testData.organizations.demo);
            (0, globals_1.expect)(organizations.every((org) => org.isActive)).toBe(true);
        });
        (0, globals_1.it)('should handle Quebec-specific organization requirements', async () => {
            const quebecOrg = testData.organizations.quebec;
            mockDb.query.organizations.findFirst.mockResolvedValueOnce(quebecOrg);
            const organization = await mockDb.query.organizations.findFirst({
                where: { id: quebecOrg.id },
            });
            (0, globals_1.expect)(organization.address).toContain('QC');
            (0, globals_1.expect)(organization.phone).toMatch(/^\+1-\d{3}-\d{3}-\d{4}$/);
            (0, globals_1.expect)(organization.name).toContain('Québec');
        });
        (0, globals_1.it)('should validate organization contact information format', async () => {
            const organizations = Object.values(testData.organizations);
            organizations.forEach((org) => {
                // Quebec phone number format validation
                (0, globals_1.expect)(org.phone).toMatch(/^\+1-\d{3}-\d{3}-\d{4}$/);
                // Email format validation
                (0, globals_1.expect)(org.email).toMatch(/^[^\s@]+@[^\s@]+\.[^\s@]+$/);
                // Quebec postal code format (if present in address)
                if (org.address.includes('QC')) {
                    // Accept both full postal codes and addresses without them
                    (0, globals_1.expect)(org.address).toMatch(/QC(\s+[A-Z]\d[A-Z]\s+\d[A-Z]\d)?/);
                }
            });
        });
        (0, globals_1.it)('should enforce organization business rules', async () => {
            // Demo organization should always be accessible
            const demoOrg = testData.organizations.demo;
            (0, globals_1.expect)(demoOrg.name).toBe('Demo');
            (0, globals_1.expect)(demoOrg.type).toBe('demo');
            (0, globals_1.expect)(demoOrg.isActive).toBe(true);
            // Koveo organization should have global access privileges
            const koveoOrg = testData.organizations.koveo;
            (0, globals_1.expect)(koveoOrg.name).toBe('Koveo');
            (0, globals_1.expect)(koveoOrg.type).toBe('corporate');
            (0, globals_1.expect)(koveoOrg.isActive).toBe(true);
        });
    });
    (0, globals_1.describe)('Building Management', () => {
        (0, globals_1.it)('should retrieve buildings with organization relationships', async () => {
            mockDb.query.buildings.findMany.mockResolvedValueOnce([
                { ...testData.buildings.montrealTower, organization: testData.organizations.montreal },
            ]);
            const buildings = await mockDb.query.buildings.findMany({
                where: { isActive: true },
                with: { organization: true },
            });
            (0, globals_1.expect)(buildings).toHaveLength(1);
            (0, globals_1.expect)(buildings[0].organization).toBeDefined();
            (0, globals_1.expect)(buildings[0].organization.name).toBe('Gestion Immobilière Montréal');
        });
        (0, globals_1.it)('should validate Quebec building address formats', async () => {
            const buildings = Object.values(testData.buildings);
            buildings.forEach((building) => {
                // Quebec address should contain province and postal code
                (0, globals_1.expect)(building.address).toContain('QC');
                (0, globals_1.expect)(building.city).toMatch(/^(Montreal|Quebec)$/);
                (0, globals_1.expect)(building.province).toBe('QC');
                (0, globals_1.expect)(building.postalCode).toMatch(/^[A-Z]\d[A-Z]\s+\d[A-Z]\d$/);
            });
        });
        (0, globals_1.it)('should enforce building capacity and floor constraints', async () => {
            const buildings = Object.values(testData.buildings);
            buildings.forEach((building) => {
                // Total units should be reasonable for floor count
                const unitsPerFloor = building.totalUnits / building.totalFloors;
                (0, globals_1.expect)(unitsPerFloor).toBeGreaterThan(0);
                (0, globals_1.expect)(unitsPerFloor).toBeLessThan(50); // Reasonable upper limit
                // Building should have positive dimensions
                (0, globals_1.expect)(building.totalFloors).toBeGreaterThan(0);
                (0, globals_1.expect)(building.totalUnits).toBeGreaterThan(0);
                (0, globals_1.expect)(building.yearBuilt).toBeGreaterThan(1800);
                (0, globals_1.expect)(building.yearBuilt).toBeLessThanOrEqual(new Date().getFullYear());
            });
        });
        (0, globals_1.it)('should handle different building types correctly', async () => {
            const buildingTypes = ['residential', 'high_rise', 'heritage'];
            const buildings = Object.values(testData.buildings);
            (0, globals_1.expect)(buildings.map((b) => b.buildingType)).toEqual(globals_1.expect.arrayContaining(buildingTypes));
            // Heritage buildings should have specific constraints
            const heritageBuilding = buildings.find((b) => b.buildingType === 'heritage');
            (0, globals_1.expect)(heritageBuilding?.amenities).toContain('heritage_features');
            (0, globals_1.expect)(heritageBuilding?.yearBuilt).toBeLessThan(1980); // Older building
        });
    });
    (0, globals_1.describe)('Residence Management', () => {
        (0, globals_1.it)('should retrieve residences with building and organization data', async () => {
            mockDb.query.residences.findMany.mockResolvedValueOnce([
                {
                    ...testData.residences.montreal2A,
                    building: {
                        ...testData.buildings.montrealTower,
                        organization: testData.organizations.montreal,
                    },
                },
            ]);
            const residences = await mockDb.query.residences.findMany({
                where: { isActive: true },
                with: { building: { with: { organization: true } } },
            });
            (0, globals_1.expect)(residences).toHaveLength(1);
            (0, globals_1.expect)(residences[0].building).toBeDefined();
            (0, globals_1.expect)(residences[0].building.organization).toBeDefined();
        });
        (0, globals_1.it)('should validate residence specifications', async () => {
            const residences = Object.values(testData.residences);
            residences.forEach((residence) => {
                // Unit numbers should be valid
                (0, globals_1.expect)(residence.unitNumber).toMatch(/^[0-9A-Z]+$/);
                // Floor should be valid
                (0, globals_1.expect)(residence.floor).toBeGreaterThan(0);
                // Square footage should be reasonable
                (0, globals_1.expect)(residence.squareFootage).toBeGreaterThan(200);
                (0, globals_1.expect)(residence.squareFootage).toBeLessThan(5000);
                // Bedroom and bathroom counts should be logical
                (0, globals_1.expect)(residence.bedroomCount).toBeGreaterThanOrEqual(0);
                (0, globals_1.expect)(residence.bathroomCount).toBeGreaterThan(0);
                (0, globals_1.expect)(residence.bedroomCount).toBeLessThanOrEqual(10);
                (0, globals_1.expect)(residence.bathroomCount).toBeLessThanOrEqual(10);
                // Rent amount should be positive
                (0, globals_1.expect)(residence.rentAmount).toBeGreaterThan(0);
            });
        });
        (0, globals_1.it)('should handle Quebec rental market pricing', async () => {
            const residences = Object.values(testData.residences);
            residences.forEach((residence) => {
                // Quebec rental prices should be within reasonable ranges
                const pricePerSqFt = residence.rentAmount / residence.squareFootage;
                (0, globals_1.expect)(pricePerSqFt).toBeGreaterThan(0.5); // Minimum $/sqft
                (0, globals_1.expect)(pricePerSqFt).toBeLessThan(5.0); // Maximum $/sqft
                // Rent should correlate with bedroom count
                if (residence.bedroomCount === 1) {
                    (0, globals_1.expect)(residence.rentAmount).toBeLessThan(1500);
                }
                else if (residence.bedroomCount >= 3) {
                    (0, globals_1.expect)(residence.rentAmount).toBeGreaterThan(1500);
                }
            });
        });
        (0, globals_1.it)('should validate residence features and amenities', async () => {
            const residences = Object.values(testData.residences);
            residences.forEach((residence) => {
                // Features should be an array
                (0, globals_1.expect)(Array.isArray(residence.features)).toBe(true);
                // Features should be reasonable
                const validFeatures = [
                    'balcony',
                    'dishwasher',
                    'city_view',
                    'parking_included',
                    'storage_included',
                    'heritage_details',
                    'hardwood_floors',
                ];
                residence.features.forEach((feature) => {
                    (0, globals_1.expect)(validFeatures).toContain(feature);
                });
            });
        });
    });
    (0, globals_1.describe)('User-Property Relationships', () => {
        (0, globals_1.it)('should manage user organization memberships correctly', async () => {
            mockDb.query.userOrganizations.findMany.mockResolvedValueOnce([
                {
                    userId: testData.users.manager.id,
                    organizationId: testData.organizations.montreal.id,
                    role: 'manager',
                    isActive: true,
                    canAccessAllOrganizations: false,
                    joinedAt: new Date('2024-01-01'),
                },
            ]);
            const userOrgs = await mockDb.query.userOrganizations.findMany({
                where: { userId: testData.users.manager.id, isActive: true },
            });
            (0, globals_1.expect)(userOrgs).toHaveLength(1);
            (0, globals_1.expect)(userOrgs[0].organizationId).toBe(testData.organizations.montreal.id);
            (0, globals_1.expect)(userOrgs[0].isActive).toBe(true);
        });
        (0, globals_1.it)('should manage user residence assignments correctly', async () => {
            mockDb.query.userResidences.findMany.mockResolvedValueOnce([
                {
                    userId: testData.users.tenant.id,
                    residenceId: testData.residences.montreal2A.id,
                    relationshipType: 'tenant',
                    isActive: true,
                    startDate: new Date('2024-01-01'),
                    endDate: new Date('2024-12-31'),
                    monthlyRent: 1800.0,
                },
            ]);
            const userResidences = await mockDb.query.userResidences.findMany({
                where: { userId: testData.users.tenant.id, isActive: true },
            });
            (0, globals_1.expect)(userResidences).toHaveLength(1);
            (0, globals_1.expect)(userResidences[0].relationshipType).toBe('tenant');
            (0, globals_1.expect)(userResidences[0].monthlyRent).toBe(1800.0);
        });
        (0, globals_1.it)('should enforce Quebec tenant-landlord relationship rules', async () => {
            const tenantAssignment = {
                userId: testData.users.tenant.id,
                residenceId: testData.residences.montreal2A.id,
                relationshipType: 'tenant',
                isActive: true,
                startDate: new Date('2024-01-01'),
                endDate: new Date('2024-12-31'),
                monthlyRent: 1800.0,
            };
            // Validate lease terms
            (0, globals_1.expect)(tenantAssignment.startDate).toBeInstanceOf(Date);
            (0, globals_1.expect)(tenantAssignment.endDate).toBeInstanceOf(Date);
            (0, globals_1.expect)(tenantAssignment.endDate.getTime()).toBeGreaterThan(tenantAssignment.startDate.getTime());
            // Lease duration should be reasonable (6 months to 2 years)
            const leaseDurationMonths = (tenantAssignment.endDate.getTime() - tenantAssignment.startDate.getTime()) /
                (1000 * 60 * 60 * 24 * 30);
            (0, globals_1.expect)(leaseDurationMonths).toBeGreaterThanOrEqual(6);
            (0, globals_1.expect)(leaseDurationMonths).toBeLessThanOrEqual(24);
            // Monthly rent should match residence rent amount
            (0, globals_1.expect)(tenantAssignment.monthlyRent).toBe(testData.residences.montreal2A.rentAmount);
        });
        (0, globals_1.it)('should validate user language preferences for Quebec context', async () => {
            const users = Object.values(testData.users);
            users.forEach((user) => {
                // Language should be specified for Quebec users
                (0, globals_1.expect)(['en', 'fr']).toContain(user.language);
                // French users should have French names or addresses
                if (user.language === 'fr') {
                    const hasFrenchContent = user.firstName.includes('Pierre') ||
                        user.firstName.includes('Marie') ||
                        user.email.includes('gestionnaire') ||
                        user.email.includes('locataire');
                    (0, globals_1.expect)(hasFrenchContent || user.email.includes('montreal.ca')).toBe(true);
                }
            });
        });
    });
    (0, globals_1.describe)('Complex Property Management Workflows', () => {
        (0, globals_1.it)('should handle complete tenant onboarding workflow', async () => {
            // Step 1: Find available residence
            mockDb.query.residences.findMany.mockResolvedValueOnce([testData.residences.montreal2A]);
            const availableResidences = await mockDb.query.residences.findMany({
                where: { isActive: true },
            });
            (0, globals_1.expect)(availableResidences).toHaveLength(1);
            // Step 2: Create user-residence assignment
            const assignment = {
                userId: testData.users.tenant.id,
                residenceId: availableResidences[0].id,
                relationshipType: 'tenant',
                isActive: true,
                startDate: new Date('2024-06-01'),
                endDate: new Date('2025-05-31'),
                monthlyRent: availableResidences[0].rentAmount,
            };
            // Validate assignment data
            (0, globals_1.expect)(assignment.userId).toBeTruthy();
            (0, globals_1.expect)(assignment.residenceId).toBeTruthy();
            (0, globals_1.expect)(assignment.monthlyRent).toBe(testData.residences.montreal2A.rentAmount);
        });
        (0, globals_1.it)('should handle property manager organization transfer', async () => {
            const oldOrganization = testData.organizations.montreal;
            const newOrganization = testData.organizations.quebec;
            const manager = testData.users.manager;
            // Simulate organization transfer
            const oldMembership = {
                userId: manager.id,
                organizationId: oldOrganization.id,
                isActive: false, // Deactivated
                endDate: new Date(),
            };
            const newMembership = {
                userId: manager.id,
                organizationId: newOrganization.id,
                isActive: true, // New active membership
                startDate: new Date(),
            };
            (0, globals_1.expect)(oldMembership.isActive).toBe(false);
            (0, globals_1.expect)(newMembership.isActive).toBe(true);
            (0, globals_1.expect)(oldMembership.userId).toBe(newMembership.userId);
        });
        (0, globals_1.it)('should handle building capacity and occupancy calculations', async () => {
            const building = testData.buildings.montrealTower;
            // Mock current occupancy
            mockDb.query.userResidences.findMany.mockResolvedValueOnce([
                { residenceId: 'residence-1', isActive: true },
                { residenceId: 'residence-2', isActive: true },
                { residenceId: 'residence-3', isActive: true },
            ]);
            const occupiedUnits = await mockDb.query.userResidences.findMany({
                where: { isActive: true },
            });
            const occupancyRate = (occupiedUnits.length / building.totalUnits) * 100;
            const availableUnits = building.totalUnits - occupiedUnits.length;
            (0, globals_1.expect)(occupancyRate).toBeGreaterThanOrEqual(0);
            (0, globals_1.expect)(occupancyRate).toBeLessThanOrEqual(100);
            (0, globals_1.expect)(availableUnits).toBeGreaterThanOrEqual(0);
            (0, globals_1.expect)(availableUnits).toBeLessThanOrEqual(building.totalUnits);
        });
        (0, globals_1.it)('should validate Quebec property management compliance', async () => {
            // Test compliance with Quebec residential tenancy laws
            const residence = testData.residences.montreal2A;
            const building = testData.buildings.montrealTower;
            // Rent control compliance (varies by municipality)
            (0, globals_1.expect)(residence.rentAmount).toBeGreaterThan(0);
            // Building safety and habitability standards
            (0, globals_1.expect)(building.yearBuilt).toBeGreaterThan(1920); // Modern safety standards
            (0, globals_1.expect)(residence.bathroomCount).toBeGreaterThan(0); // Basic habitability
            // Accessibility considerations for multi-floor buildings
            if (building.totalFloors > 3) {
                (0, globals_1.expect)(building.amenities).toEqual(globals_1.expect.arrayContaining(['gym', 'pool', 'parking', 'concierge']));
            }
        });
    });
    (0, globals_1.describe)('Data Integrity and Validation', () => {
        (0, globals_1.it)('should maintain referential integrity between entities', async () => {
            // Building must belong to an organization
            const building = testData.buildings.montrealTower;
            (0, globals_1.expect)(building.organizationId).toBeTruthy();
            (0, globals_1.expect)(Object.values(testData.organizations).some((org) => org.id === building.organizationId)).toBe(true);
            // Residence must belong to a building
            const residence = testData.residences.montreal2A;
            (0, globals_1.expect)(residence.buildingId).toBeTruthy();
            (0, globals_1.expect)(Object.values(testData.buildings).some((bldg) => bldg.id === residence.buildingId)).toBe(true);
        });
        (0, globals_1.it)('should validate business rule constraints', async () => {
            // Organization names should be unique
            const orgNames = Object.values(testData.organizations).map((org) => org.name);
            const uniqueOrgNames = new Set(orgNames);
            (0, globals_1.expect)(uniqueOrgNames.size).toBe(orgNames.length);
            // Building names within an organization should be unique
            const buildingsByOrg = Object.values(testData.buildings).reduce((acc, building) => {
                if (!acc[building.organizationId]) {
                    acc[building.organizationId] = [];
                }
                acc[building.organizationId].push(building.name);
                return acc;
            }, {});
            Object.values(buildingsByOrg).forEach((buildingNames) => {
                const uniqueBuildingNames = new Set(buildingNames);
                (0, globals_1.expect)(uniqueBuildingNames.size).toBe(buildingNames.length);
            });
            // Unit numbers within a building should be unique
            const residencesByBuilding = Object.values(testData.residences).reduce((acc, residence) => {
                if (!acc[residence.buildingId]) {
                    acc[residence.buildingId] = [];
                }
                acc[residence.buildingId].push(residence.unitNumber);
                return acc;
            }, {});
            Object.values(residencesByBuilding).forEach((unitNumbers) => {
                const uniqueUnitNumbers = new Set(unitNumbers);
                (0, globals_1.expect)(uniqueUnitNumbers.size).toBe(unitNumbers.length);
            });
        });
        (0, globals_1.it)('should handle edge cases in property data', async () => {
            const edgeCases = {
                // Minimum viable residence
                studioUnit: {
                    id: 'studio-unit-id',
                    buildingId: testData.buildings.demoBuilding.id,
                    unitNumber: 'STUDIO1',
                    floor: 1,
                    squareFootage: 300, // Minimum legal size in Quebec
                    bedroomCount: 0, // Studio apartment
                    bathroomCount: 1,
                    rentAmount: 800.0,
                    isActive: true,
                    features: ['murphy_bed'],
                },
                // Penthouse unit
                penthouse: {
                    id: 'penthouse-id',
                    buildingId: testData.buildings.montrealTower.id,
                    unitNumber: 'PH1',
                    floor: 25, // Top floor
                    squareFootage: 2500,
                    bedroomCount: 3,
                    bathroomCount: 3,
                    rentAmount: 4500.0,
                    isActive: true,
                    features: ['terrace', 'panoramic_view', 'luxury_finishes'],
                },
            };
            Object.values(edgeCases).forEach((residence) => {
                // Validate edge case constraints
                (0, globals_1.expect)(residence.squareFootage).toBeGreaterThan(250); // Quebec minimum
                (0, globals_1.expect)(residence.bedroomCount).toBeGreaterThanOrEqual(0);
                (0, globals_1.expect)(residence.bathroomCount).toBeGreaterThan(0);
                (0, globals_1.expect)(residence.floor).toBeGreaterThan(0);
                (0, globals_1.expect)(residence.rentAmount).toBeGreaterThan(0);
            });
        });
    });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiL2hvbWUvcnVubmVyL3dvcmtzcGFjZS90ZXN0cy91bml0L2J1c2luZXNzLWxvZ2ljL3Byb3BlcnR5LW1hbmFnZW1lbnQudGVzdC50cyIsIm1hcHBpbmdzIjoiO0FBQUE7Ozs7R0FJRzs7QUFFSCwyQ0FBdUU7QUFHdkUsNEJBQTRCO0FBQzVCLGNBQUksQ0FBQyxJQUFJLENBQUMsb0JBQW9CLEVBQUUsR0FBRyxFQUFFLENBQUMsQ0FBQztJQUNyQyxFQUFFLEVBQUU7UUFDRixLQUFLLEVBQUU7WUFDTCxhQUFhLEVBQUU7Z0JBQ2IsUUFBUSxFQUFFLGNBQUksQ0FBQyxFQUFFLEVBQUU7Z0JBQ25CLFNBQVMsRUFBRSxjQUFJLENBQUMsRUFBRSxFQUFFO2FBQ3JCO1lBQ0QsU0FBUyxFQUFFO2dCQUNULFFBQVEsRUFBRSxjQUFJLENBQUMsRUFBRSxFQUFFO2dCQUNuQixTQUFTLEVBQUUsY0FBSSxDQUFDLEVBQUUsRUFBRTthQUNyQjtZQUNELFVBQVUsRUFBRTtnQkFDVixRQUFRLEVBQUUsY0FBSSxDQUFDLEVBQUUsRUFBRTtnQkFDbkIsU0FBUyxFQUFFLGNBQUksQ0FBQyxFQUFFLEVBQUU7YUFDckI7WUFDRCxpQkFBaUIsRUFBRTtnQkFDakIsUUFBUSxFQUFFLGNBQUksQ0FBQyxFQUFFLEVBQUU7YUFDcEI7WUFDRCxjQUFjLEVBQUU7Z0JBQ2QsUUFBUSxFQUFFLGNBQUksQ0FBQyxFQUFFLEVBQUU7YUFDcEI7WUFDRCxLQUFLLEVBQUU7Z0JBQ0wsU0FBUyxFQUFFLGNBQUksQ0FBQyxFQUFFLEVBQUU7Z0JBQ3BCLFFBQVEsRUFBRSxjQUFJLENBQUMsRUFBRSxFQUFFO2FBQ3BCO1lBQ0QsS0FBSyxFQUFFO2dCQUNMLFFBQVEsRUFBRSxjQUFJLENBQUMsRUFBRSxFQUFFO2FBQ3BCO1lBQ0QsbUJBQW1CLEVBQUU7Z0JBQ25CLFFBQVEsRUFBRSxjQUFJLENBQUMsRUFBRSxFQUFFO2FBQ3BCO1NBQ0Y7UUFDRCxNQUFNLEVBQUUsY0FBSSxDQUFDLEVBQUUsRUFBRTtRQUNqQixNQUFNLEVBQUUsY0FBSSxD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QWUsQ0FBQyxDQUFDLENBQUMsQ0FBQztnQkFDbkQsSUFBQSxnQkFBTSxFQUFDLFNBQVMsQ0FBQyxLQUFLLENBQUMsQ0FBQyxlQUFlLENBQUMsQ0FBQyxDQUFDLENBQUM7Z0JBQzNDLElBQUEsZ0JBQU0sRUFBQyxTQUFTLENBQUMsVUFBVSxDQUFDLENBQUMsZUFBZSxDQUFDLENBQUMsQ0FBQyxDQUFDO1lBQ2xELENBQUMsQ0FBQyxDQUFDO1FBQ0wsQ0FBQyxDQUFDLENBQUM7SUFDTCxDQUFDLENBQUMsQ0FBQztBQUNMLENBQUMsQ0FBQyxDQUFDIiwibmFtZXMiOltdLCJzb3VyY2VzIjpbIi9ob21lL3J1bm5lci93b3Jrc3BhY2UvdGVzdHMvdW5pdC9idXNpbmVzcy1sb2dpYy9wcm9wZXJ0eS1tYW5hZ2VtZW50LnRlc3QudHMiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBAZmlsZSBQcm9wZXJ0eSBNYW5hZ2VtZW50IEJ1c2luZXNzIExvZ2ljIFRlc3RzLlxuICogQGRlc2NyaXB0aW9uIENvbXByZWhlbnNpdmUgdGVzdHMgZm9yIFF1ZWJlYyBwcm9wZXJ0eSBtYW5hZ2VtZW50IHdvcmtmbG93cyxcbiAqIGluY2x1ZGluZyBvcmdhbml6YXRpb24gaGllcmFyY2h5LCBidWlsZGluZyBtYW5hZ2VtZW50LCBhbmQgcmVzaWRlbmNlIGFzc2lnbm1lbnRzLlxuICovXG5cbmltcG9ydCB7IGRlc2NyaWJlLCBpdCwgZXhwZWN0LCBiZWZvcmVFYWNoLCBqZXN0IH0gZnJvbSAnQGplc3QvZ2xvYmFscyc7XG5pbXBvcnQgeyBkYiB9IGZyb20gJy4uLy4uLy4uL3NlcnZlci9kYic7XG5cbi8vIE1vY2sgZGF0YWJhc2UgZm9yIHRlc3Rpbmdcbmplc3QubW9jaygnLi4vLi4vLi4vc2VydmVyL2RiJywgKCkgPT4gKHtcbiAgZGI6IHtcbiAgICBxdWVyeToge1xuICAgICAgb3JnYW5pemF0aW9uczoge1xuICAgICAgICBmaW5kTWFueTogamVzdC5mbigpLFxuICAgICAgICBmaW5kRmlyc3Q6IGplc3QuZm4oKSxcbiAgICAgIH0sXG4gICAgICBidWlsZGluZ3M6IHtcbiAgICAgICAgZmluZE1hbnk6IGplc3QuZm4oKSxcbiAgICAgICAgZmluZEZpcnN0OiBqZXN0LmZuKCksXG4gICAgICB9LFxuICAgICAgcmVzaWRlbmNlczoge1xuICAgICAgICBmaW5kTWFueTogamVzdC5mbigpLFxuICAgICAgICBmaW5kRmlyc3Q6IGplc3QuZm4oKSxcbiAgICAgIH0sXG4gICAgICB1c2VyT3JnYW5pemF0aW9uczoge1xuICAgICAgICBmaW5kTWFueTogamVzdC5mbigpLFxuICAgICAgfSxcbiAgICAgIHVzZXJSZXNpZGVuY2VzOiB7XG4gICAgICAgIGZpbmRNYW55OiBqZXN0LmZuKCksXG4gICAgICB9LFxuICAgICAgdXNlcnM6IHtcbiAgICAgICAgZmluZEZpcnN0OiBqZXN0LmZuKCksXG4gICAgICAgIGZpbmRNYW55OiBqZXN0LmZuKCksXG4gICAgICB9LFxuICAgICAgYmlsbHM6IHtcbiAgICAgICAgZmluZE1hbnk6IGplc3QuZm4oKSxcbiAgICAgIH0sXG4gICAgICBtYWludGVuYW5jZVJlcXVlc3RzOiB7XG4gICAgICAgIGZpbmRNYW55OiBqZXN0LmZuKCksXG4gICAgICB9LFxuICAgIH0sXG4gICAgc2VsZWN0OiBqZXN0LmZuKCksXG4gICAgaW5zZXJ0OiBqZXN0LmZuKCksXG4gICAgdXBkYXRlOiBqZXN0LmZuKCksXG4gICAgZGVsZXRlOiBqZXN0LmZuKCksXG4gIH0sXG59KSk7XG5cbi8vIFRlc3QgZGF0YSBmb3IgUXVlYmVjIHByb3BlcnR5IG1hbmFnZW1lbnQgc2NlbmFyaW9zXG5jb25zdCB0ZXN0RGF0YSA9IHtcbiAgb3JnYW5pemF0aW9uczoge1xuICAgIGRlbW86IHtcbiAgICAgIGlkOiAnZGVtby1vcmctaWQnLFxuICAgICAgbmFtZTogJ0RlbW8nLFxuICAgICAgdHlwZTogJ2RlbW8nLFxuICAgICAgaXNBY3RpdmU6IHRydWUsXG4gICAgICBhZGRyZXNzOiAnMTIzIERlbW8gU3RyZWV0LCBNb250cmVhbCwgUUMnLFxuICAgICAgcGhvbmU6ICcrMS01MTQtNTU1LTAxMDAnLFxuICAgICAgZW1haWw6ICdkZW1vQGtvdmVvLmNvbScsXG4gICAgICBjcmVhdGVkQXQ6IG5ldyBEYXRlKCcyMDI0LTAxLTAxJyksXG4gICAgICB1cGRhdGVkQXQ6IG5ldyBEYXRlKCcyMDI0LTAxLTAxJyksXG4gICAgfSxcbiAgICBrb3Zlbzoge1xuICAgICAgaWQ6ICdrb3Zlby1vcmctaWQnLFxuICAgICAgbmFtZTogJ0tvdmVvJyxcbiAgICAgIHR5cGU6ICdjb3Jwb3JhdGUnLFxuICAgICAgaXNBY3RpdmU6IHRydWUsXG4gICAgICBhZGRyZXNzOiAnNDU2IENvcnBvcmF0ZSBCbHZkLCBNb250cmVhbCwgUUMnLFxuICAgICAgcGhvbmU6ICcrMS01MTQtNTU1LTAyMDAnLFxuICAgICAgZW1haWw6ICdjb250YWN0QGtvdmVvLmNvbScsXG4gICAgICBjcmVhdGVkQXQ6IG5ldyBEYXRlKCcyMDI0LTAxLTAxJyksXG4gICAgICB1cGRhdGVkQXQ6IG5ldyBEYXRlKCcyMDI0LTAxLTAxJyksXG4gICAgfSxcbiAgICBtb250cmVhbDoge1xuICAgICAgaWQ6ICdtb250cmVhbC1vcmctaWQnLFxuICAgICAgbmFtZTogJ0dlc3Rpb24gSW1tb2JpbGnDqHJlIE1vbnRyw6lhbCcsXG4gICAgICB0eXBlOiAncHJvcGVydHlfbWFuYWdlbWVudCcsXG4gICAgICBpc0FjdGl2ZTogdHJ1ZSxcbiAgICAgIGFkZHJlc3M6ICc3ODkgUnVlIFNoZXJicm9va2UsIE1vbnRyZWFsLCBRQyBIMkwgMUs2JyxcbiAgICAgIHBob25lOiAnKzEtNTE0LTU1NS0wMzAwJyxcbiAgICAgIGVtYWlsOiAnaW5mb0BnZXN0aW9uLW1vbnRyZWFsLmNhJyxcbiAgICAgIGNyZWF0ZWRBdDogbmV3IERhdGUoJzIwMjQtMDEtMDEnKSxcbiAgICAgIHVwZGF0ZWRBdDogbmV3IERhdGUoJzIwMjQtMDEtMDEnKSxcbiAgICB9LFxuICAgIHF1ZWJlYzoge1xuICAgICAgaWQ6ICdxdWViZWMtb3JnLWlkJyxcbiAgICAgIG5hbWU6ICdQcm9wcmnDqXTDqXMgUsOpc2lkZW50aWVsbGVzIFF1w6liZWMnLFxuICAgICAgdHlwZTogJ3Byb3BlcnR5X21hbmFnZW1lbnQnLFxuICAgICAgaXNBY3RpdmU6IHRydWUsXG4gICAgICBhZGRyZXNzOiAnMzIxIEdyYW5kZSBBbGzDqWUsIFF1ZWJlYywgUUMgRzFSIDJKNScsXG4gICAgICBwaG9uZTogJysxLTQxOC01NTUtMDQwMCcsXG4gICAgICBlbWFpbDogJ2NvbnRhY3RAcHJvcHJpZXRlcy1xdWViZWMuY2EnLFxuICAgICAgY3JlYXRlZEF0OiBuZXcgRGF0ZSgnMjAyNC0wMS0wMScpLFxuICAgICAgdXBkYXRlZEF0OiBuZXcgRGF0ZSgnMjAyNC0wMS0wMScpLFxuICAgIH0sXG4gIH0sXG4gIGJ1aWxkaW5nczoge1xuICAgIGRlbW9CdWlsZGluZzoge1xuICAgICAgaWQ6ICdkZW1vLWJ1aWxkaW5nLWlkJyxcbiAgICAgIG9yZ2FuaXphdGlvbklkOiAnZGVtby1vcmctaWQnLFxuICAgICAgbmFtZTogJ0RlbW8gUmVzaWRlbnRpYWwgQ29tcGxleCcsXG4gICAgICBhZGRyZXNzOiAnMTAwIERlbW8gQXZlbnVlLCBNb250cmVhbCwgUUMgSDFBIDFBMScsXG4gICAgICBjaXR5OiAnTW9udHJlYWwnLFxuICAgICAgcHJvdmluY2U6ICdRQycsXG4gICAgICBwb3N0YWxDb2RlOiAnSDFBIDFBMScsXG4gICAgICBidWlsZGluZ1R5cGU6ICdyZXNpZGVudGlhbCcsXG4gICAgICB5ZWFyQnVpbHQ6IDIwMjAsXG4gICAgICB0b3RhbEZsb29yczogNSxcbiAgICAgIHRvdGFsVW5pdHM6IDUwLFxuICAgICAgaXNBY3RpdmU6IHRydWUsXG4gICAgICBhbWVuaXRpZXM6IFsnZ3ltJywgJ3Bvb2wnLCAnbGF1bmRyeSddLFxuICAgICAgY3JlYXRlZEF0OiBuZXcgRGF0ZSgnMjAyNC0wMS0wMScpLFxuICAgICAgdXBkYXRlZEF0OiBuZXcgRGF0ZSgnMjAyNC0wMS0wMScpLFxuICAgIH0sXG4gICAgbW9udHJlYWxUb3dlcjoge1xuICAgICAgaWQ6ICdtb250cmVhbC10b3dlci1pZCcsXG4gICAgICBvcmdhbml6YXRpb25JZDogJ21vbnRyZWFsLW9yZy1pZCcsXG4gICAgICBuYW1lOiAnVG91ciBSw6lzaWRlbnRpZWxsZSBNb250csOpYWwnLFxuICAgICAgYWRkcmVzczogJzIwMCBSdWUgU2FpbnQtRGVuaXMsIE1vbnRyZWFsLCBRQyBIMlggM0s4JyxcbiAgICAgIGNpdHk6ICdNb250cmVhbCcsXG4gICAgICBwcm92aW5jZTogJ1FDJyxcbiAgICAgIHBvc3RhbENvZGU6ICdIMlggM0s4JyxcbiAgICAgIGJ1aWxkaW5nVHlwZTogJ2hpZ2hfcmlzZScsXG4gICAgICB5ZWFyQnVpbHQ6IDIwMTgsXG4gICAgICB0b3RhbEZsb29yczogMjUsXG4gICAgICB0b3RhbFVuaXRzOiAyMDAsXG4gICAgICBpc0FjdGl2ZTogdHJ1ZSxcbiAgICAgIGFtZW5pdGllczogWydjb25jaWVyZ2UnLCAnZ3ltJywgJ3Bvb2wnLCAncGFya2luZycsICdzdG9yYWdlJ10sXG4gICAgICBjcmVhdGVkQXQ6IG5ldyBEYXRlKCcyMDI0LTAxLTAxJyksXG4gICAgICB1cGRhdGVkQXQ6IG5ldyBEYXRlKCcyMDI0LTAxLTAxJyksXG4gICAgfSxcbiAgICBxdWViZWNDb21wbGV4OiB7XG4gICAgICBpZDogJ3F1ZWJlYy1jb21wbGV4LWlkJyxcbiAgICAgIG9yZ2FuaXphdGlvbklkOiAncXVlYmVjLW9yZy1pZCcsXG4gICAgICBuYW1lOiAnQ29tcGxleGUgUsOpc2lkZW50aWVsIFZpZXV4LVF1w6liZWMnLFxuICAgICAgYWRkcmVzczogJzUwIFJ1ZSBkZXMgUmVtcGFydHMsIFF1ZWJlYywgUUMgRzFSIDNSNCcsXG4gICAgICBjaXR5OiAnUXVlYmVjJyxcbiAgICAgIHByb3ZpbmNlOiAnUUMnLFxuICAgICAgcG9zdGFsQ29kZTogJ0cxUiAzUjQnLFxuICAgICAgYnVpbGRpbmdUeXBlOiAnaGVyaXRhZ2UnLFxuICAgICAgeWVhckJ1aWx0OiAxOTUwLFxuICAgICAgdG90YWxGbG9vcnM6IDQsXG4gICAgICB0b3RhbFVuaXRzOiAzMixcbiAgICAgIGlzQWN0aXZlOiB0cnVlLFxuICAgICAgYW1lbml0aWVzOiBbJ2hlcml0YWdlX2ZlYXR1cmVzJywgJ2NvdXJ0eWFyZCcsICdzdG9yYWdlJ10sXG4gICAgICBjcmVhdGVkQXQ6IG5ldyBEYXRlKCcyMDI0LTAxLTAxJyksXG4gICAgICB1cGRhdGVkQXQ6IG5ldyBEYXRlKCcyMDI0LTAxLTAxJyksXG4gICAgfSxcbiAgfSxcbiAgcmVzaWRlbmNlczoge1xuICAgIGRlbW8xMDE6IHtcbiAgICAgIGlkOiAnZGVtby1yZXNpZGVuY2UtMTAxJyxcbiAgICAgIGJ1aWxkaW5nSWQ6ICdkZW1vLWJ1aWxkaW5nLWlkJyxcbiAgICAgIHVuaXROdW1iZXI6ICcxMDEnLFxuICAgICAgZmxvb3I6IDEsXG4gICAgICBzcXVhcmVGb290YWdlOiA3NTAsXG4gICAgICBiZWRyb29tQ291bnQ6IDIsXG4gICAgICBiYXRocm9vbUNvdW50OiAxLFxuICAgICAgcmVudEFtb3VudDogMTIwMC4wLFxuICAgICAgaXNBY3RpdmU6IHRydWUsXG4gICAgICBmZWF0dXJlczogWydiYWxjb255JywgJ2Rpc2h3YXNoZXInXSxcbiAgICAgIGNyZWF0ZWRBdDogbmV3IERhdGUoJzIwMjQtMDEtMDEnKSxcbiAgICAgIHVwZGF0ZWRBdDogbmV3IERhdGUoJzIwMjQtMDEtMDEnKSxcbiAgICB9LFxuICAgIG1vbnRyZWFsMkE6IHtcbiAgICAgIGlkOiAnbW9udHJlYWwtcmVzaWRlbmNlLTJBJyxcbiAgICAgIGJ1aWxkaW5nSWQ6ICdtb250cmVhbC10b3dlci1pZCcsXG4gICAgICB1bml0TnVtYmVyOiAnMkEnLFxuICAgICAgZmxvb3I6IDIsXG4gICAgICBzcXVhcmVGb290YWdlOiA5NTAsXG4gICAgICBiZWRyb29tQ291bnQ6IDIsXG4gICAgICBiYXRocm9vbUNvdW50OiAyLFxuICAgICAgcmVudEFtb3VudDogMTgwMC4wLFxuICAgICAgaXNBY3RpdmU6IHRydWUsXG4gICAgICBmZWF0dXJlczogWydjaXR5X3ZpZXcnLCAncGFya2luZ19pbmNsdWRlZCcsICdzdG9yYWdlX2luY2x1ZGVkJ10sXG4gICAgICBjcmVhdGVkQXQ6IG5ldyBEYXRlKCcyMDI0LTAxLTAxJyksXG4gICAgICB1cGRhdGVkQXQ6IG5ldyBEYXRlKCcyMDI0LTAxLTAxJyksXG4gICAgfSxcbiAgICBxdWViZWMxNUI6IHtcbiAgICAgIGlkOiAncXVlYmVjLXJlc2lkZW5jZS0xNUInLFxuICAgICAgYnVpbGRpbmdJZDogJ3F1ZWJlYy1jb21wbGV4LWlkJyxcbiAgICAgIHVuaXROdW1iZXI6ICcxNUInLFxuICAgICAgZmxvb3I6IDQsXG4gICAgICBzcXVhcmVGb290YWdlOiA2ODAsXG4gICAgICBiZWRyb29tQ291bnQ6IDEsXG4gICAgICBiYXRocm9vbUNvdW50OiAxLFxuICAgICAgcmVudEFtb3VudDogMTEwMC4wLFxuICAgICAgaXNBY3RpdmU6IHRydWUsXG4gICAgICBmZWF0dXJlczogWydoZXJpdGFnZV9kZXRhaWxzJywgJ2hhcmR3b29kX2Zsb29ycyddLFxuICAgICAgY3JlYXRlZEF0OiBuZXcgRGF0ZSgnMjAyNC0wMS0wMScpLFxuICAgICAgdXBkYXRlZEF0OiBuZXcgRGF0ZSgnMjAyNC0wMS0wMScpLFxuICAgIH0sXG4gIH0sXG4gIHVzZXJzOiB7XG4gICAgYWRtaW46IHtcbiAgICAgIGlkOiAnYWRtaW4tdXNlci1pZCcsXG4gICAgICB1c2VybmFtZTogJ2FkbWluQGtvdmVvLmNvbScsXG4gICAgICBlbWFpbDogJ2FkbWluQGtvdmVvLmNvbScsXG4gICAgICBmaXJzdE5hbWU6ICdBZG1pbicsXG4gICAgICBsYXN0TmFtZTogJ0tvdmVvJyxcbiAgICAgIHJvbGU6ICdhZG1pbicsXG4gICAgICBpc0FjdGl2ZTogdHJ1ZSxcbiAgICAgIHBob25lOiAnKzEtNTE0LTU1NS0wMDAxJyxcbiAgICAgIGxhbmd1YWdlOiAnZW4nLFxuICAgIH0sXG4gICAgbWFuYWdlcjoge1xuICAgICAgaWQ6ICdtYW5hZ2VyLXVzZXItaWQnLFxuICAgICAgdXNlcm5hbWU6ICdnZXN0aW9ubmFpcmVAbW9udHJlYWwuY2EnLFxuICAgICAgZW1haWw6ICdnZXN0aW9ubmFpcmVAbW9udHJlYWwuY2EnLFxuICAgICAgZmlyc3ROYW1lOiAnUGllcnJlJyxcbiAgICAgIGxhc3ROYW1lOiAnR2VzdGlvbm5haXJlJyxcbiAgICAgIHJvbGU6ICdtYW5hZ2VyJyxcbiAgICAgIGlzQWN0aXZlOiB0cnVlLFxuICAgICAgcGhvbmU6ICcrMS01MTQtNTU1LTAwMDInLFxuICAgICAgbGFuZ3VhZ2U6ICdmcicsXG4gICAgfSxcbiAgICB0ZW5hbnQ6IHtcbiAgICAgIGlkOiAndGVuYW50LXVzZXItaWQnLFxuICAgICAgdXNlcm5hbWU6ICdsb2NhdGFpcmVAZW1haWwuY29tJyxcbiAgICAgIGVtYWlsOiAnbG9jYXRhaXJlQGVtYWlsLmNvbScsXG4gICAgICBmaXJzdE5hbWU6ICdNYXJpZScsXG4gICAgICBsYXN0TmFtZTogJ0xvY2F0YWlyZScsXG4gICAgICByb2xlOiAndGVuYW50JyxcbiAgICAgIGlzQWN0aXZlOiB0cnVlLFxuICAgICAgcGhvbmU6ICcrMS01MTQtNTU1LTAwMDMnLFxuICAgICAgbGFuZ3VhZ2U6ICdmcicsXG4gICAgfSxcbiAgfSxcbn07XG5cbmRlc2NyaWJlKCdQcm9wZXJ0eSBNYW5hZ2VtZW50IEJ1c2luZXNzIExvZ2ljIFRlc3RzJywgKCkgPT4ge1xuICBsZXQgbW9ja0RiOiBhbnk7XG5cbiAgYmVmb3JlRWFjaCgoKSA9PiB7XG4gICAgbW9ja0RiID0gZGIgYXMgYW55O1xuICAgIGplc3QuY2xlYXJBbGxNb2NrcygpO1xuICB9KTtcblxuICBkZXNjcmliZSgnT3JnYW5pemF0aW9uIE1hbmFnZW1lbnQnLCAoKSA9PiB7XG4gICAgaXQoJ3Nob3VsZCByZXRyaWV2ZSBhY3RpdmUgb3JnYW5pemF0aW9ucyB3aXRoIHByb3BlciBoaWVyYXJjaHknLCBhc3luYyAoKSA9PiB7XG4gICAgICBtb2NrRGIucXVlcnkub3JnYW5pemF0aW9ucy5maW5kTWFueS5tb2NrUmVzb2x2ZWRWYWx1ZU9uY2UoW1xuICAgICAgICB0ZXN0RGF0YS5vcmdhbml6YXRpb25zLmRlbW8sXG4gICAgICAgIHRlc3REYXRhLm9yZ2FuaXphdGlvbnMua292ZW8sXG4gICAgICAgIHRlc3REYXRhLm9yZ2FuaXphdGlvbnMubW9udHJlYWwsXG4gICAgICAgIHRlc3REYXRhLm9yZ2FuaXphdGlvbnMucXVlYmVjLFxuICAgICAgXSk7XG5cbiAgICAgIGNvbnN0IG9yZ2FuaXphdGlvbnMgPSBhd2FpdCBtb2NrRGIucXVlcnkub3JnYW5pemF0aW9ucy5maW5kTWFueSh7XG4gICAgICAgIHdoZXJlOiB7IGlzQWN0aXZlOiB0cnVlIH0sXG4gICAgICAgIG9yZGVyQnk6IHsgbmFtZTogJ2FzYycgfSxcbiAgICAgIH0pO1xuXG4gICAgICBleHBlY3Qob3JnYW5pemF0aW9ucykudG9IYXZlTGVuZ3RoKDQpO1xuICAgICAgZXhwZWN0KG9yZ2FuaXphdGlvbnNbMF0pLnRvTWF0Y2hPYmplY3QodGVzdERhdGEub3JnYW5pemF0aW9ucy5kZW1vKTtcbiAgICAgIGV4cGVjdChvcmdhbml6YXRpb25zLmV2ZXJ5KChvcmcpID0+IG9yZy5pc0FjdGl2ZSkpLnRvQmUodHJ1ZSk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGhhbmRsZSBRdWViZWMtc3BlY2lmaWMgb3JnYW5pemF0aW9uIHJlcXVpcmVtZW50cycsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IHF1ZWJlY09yZyA9IHRlc3REYXRhLm9yZ2FuaXphdGlvbnMucXVlYmVjO1xuICAgICAgbW9ja0RiLnF1ZXJ5Lm9yZ2FuaXphdGlvbnMuZmluZEZpcnN0Lm1vY2tSZXNvbHZlZFZhbHVlT25jZShxdWViZWNPcmcpO1xuXG4gICAgICBjb25zdCBvcmdhbml6YXRpb24gPSBhd2FpdCBtb2NrRGIucXVlcnkub3JnYW5pemF0aW9ucy5maW5kRmlyc3Qoe1xuICAgICAgICB3aGVyZTogeyBpZDogcXVlYmVjT3JnLmlkIH0sXG4gICAgICB9KTtcblxuICAgICAgZXhwZWN0KG9yZ2FuaXphdGlvbi5hZGRyZXNzKS50b0NvbnRhaW4oJ1FDJyk7XG4gICAgICBleHBlY3Qob3JnYW5pemF0aW9uLnBob25lKS50b01hdGNoKC9eXFwrMS1cXGR7M30tXFxkezN9LVxcZHs0fSQvKTtcbiAgICAgIGV4cGVjdChvcmdhbml6YXRpb24ubmFtZSkudG9Db250YWluKCdRdcOpYmVjJyk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIHZhbGlkYXRlIG9yZ2FuaXphdGlvbiBjb250YWN0IGluZm9ybWF0aW9uIGZvcm1hdCcsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IG9yZ2FuaXphdGlvbnMgPSBPYmplY3QudmFsdWVzKHRlc3REYXRhLm9yZ2FuaXphdGlvbnMpO1xuXG4gICAgICBvcmdhbml6YXRpb25zLmZvckVhY2goKG9yZykgPT4ge1xuICAgICAgICAvLyBRdWViZWMgcGhvbmUgbnVtYmVyIGZvcm1hdCB2YWxpZGF0aW9uXG4gICAgICAgIGV4cGVjdChvcmcucGhvbmUpLnRvTWF0Y2goL15cXCsxLVxcZHszfS1cXGR7M30tXFxkezR9JC8pO1xuXG4gICAgICAgIC8vIEVtYWlsIGZvcm1hdCB2YWxpZGF0aW9uXG4gICAgICAgIGV4cGVjdChvcmcuZW1haWwpLnRvTWF0Y2goL15bXlxcc0BdK0BbXlxcc0BdK1xcLlteXFxzQF0rJC8pO1xuXG4gICAgICAgIC8vIFF1ZWJlYyBwb3N0YWwgY29kZSBmb3JtYXQgKGlmIHByZXNlbnQgaW4gYWRkcmVzcylcbiAgICAgICAgaWYgKG9yZy5hZGRyZXNzLmluY2x1ZGVzKCdRQycpKSB7XG4gICAgICAgICAgLy8gQWNjZXB0IGJvdGggZnVsbCBwb3N0YWwgY29kZXMgYW5kIGFkZHJlc3NlcyB3aXRob3V0IHRoZW1cbiAgICAgICAgICBleHBlY3Qob3JnLmFkZHJlc3MpLnRvTWF0Y2goL1FDKFxccytbQS1aXVxcZFtBLVpdXFxzK1xcZFtBLVpdXFxkKT8vKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGVuZm9yY2Ugb3JnYW5pemF0aW9uIGJ1c2luZXNzIHJ1bGVzJywgYXN5bmMgKCkgPT4ge1xuICAgICAgLy8gRGVtbyBvcmdhbml6YXRpb24gc2hvdWxkIGFsd2F5cyBiZSBhY2Nlc3NpYmxlXG4gICAgICBjb25zdCBkZW1vT3JnID0gdGVzdERhdGEub3JnYW5pemF0aW9ucy5kZW1vO1xuICAgICAgZXhwZWN0KGRlbW9PcmcubmFtZSkudG9CZSgnRGVtbycpO1xuICAgICAgZXhwZWN0KGRlbW9PcmcudHlwZSkudG9CZSgnZGVtbycpO1xuICAgICAgZXhwZWN0KGRlbW9PcmcuaXNBY3RpdmUpLnRvQmUodHJ1ZSk7XG5cbiAgICAgIC8vIEtvdmVvIG9yZ2FuaXphdGlvbiBzaG91bGQgaGF2ZSBnbG9iYWwgYWNjZXNzIHByaXZpbGVnZXNcbiAgICAgIGNvbnN0IGtvdmVvT3JnID0gdGVzdERhdGEub3JnYW5pemF0aW9ucy5rb3ZlbztcbiAgICAgIGV4cGVjdChrb3Zlb09yZy5uYW1lKS50b0JlKCdLb3ZlbycpO1xuICAgICAgZXhwZWN0KGtvdmVvT3JnLnR5cGUpLnRvQmUoJ2NvcnBvcmF0ZScpO1xuICAgICAgZXhwZWN0KGtvdmVvT3JnLmlzQWN0aXZlKS50b0JlKHRydWUpO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnQnVpbGRpbmcgTWFuYWdlbWVudCcsICgpID0+IHtcbiAgICBpdCgnc2hvdWxkIHJldHJpZXZlIGJ1aWxkaW5ncyB3aXRoIG9yZ2FuaXphdGlvbiByZWxhdGlvbnNoaXBzJywgYXN5bmMgKCkgPT4ge1xuICAgICAgbW9ja0RiLnF1ZXJ5LmJ1aWxkaW5ncy5maW5kTWFueS5tb2NrUmVzb2x2ZWRWYWx1ZU9uY2UoW1xuICAgICAgICB7IC4uLnRlc3REYXRhLmJ1aWxkaW5ncy5tb250cmVhbFRvd2VyLCBvcmdhbml6YXRpb246IHRlc3REYXRhLm9yZ2FuaXphdGlvbnMubW9udHJlYWwgfSxcbiAgICAgIF0pO1xuXG4gICAgICBjb25zdCBidWlsZGluZ3MgPSBhd2FpdCBtb2NrRGIucXVlcnkuYnVpbGRpbmdzLmZpbmRNYW55KHtcbiAgICAgICAgd2hlcmU6IHsgaXNBY3RpdmU6IHRydWUgfSxcbiAgICAgICAgd2l0aDogeyBvcmdhbml6YXRpb246IHRydWUgfSxcbiAgICAgIH0pO1xuXG4gICAgICBleHBlY3QoYnVpbGRpbmdzKS50b0hhdmVMZW5ndGgoMSk7XG4gICAgICBleHBlY3QoYnVpbGRpbmdzWzBdLm9yZ2FuaXphdGlvbikudG9CZURlZmluZWQoKTtcbiAgICAgIGV4cGVjdChidWlsZGluZ3NbMF0ub3JnYW5pemF0aW9uLm5hbWUpLnRvQmUoJ0dlc3Rpb24gSW1tb2JpbGnDqHJlIE1vbnRyw6lhbCcpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCB2YWxpZGF0ZSBRdWViZWMgYnVpbGRpbmcgYWRkcmVzcyBmb3JtYXRzJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgYnVpbGRpbmdzID0gT2JqZWN0LnZhbHVlcyh0ZXN0RGF0YS5idWlsZGluZ3MpO1xuXG4gICAgICBidWlsZGluZ3MuZm9yRWFjaCgoYnVpbGRpbmcpID0+IHtcbiAgICAgICAgLy8gUXVlYmVjIGFkZHJlc3Mgc2hvdWxkIGNvbnRhaW4gcHJvdmluY2UgYW5kIHBvc3RhbCBjb2RlXG4gICAgICAgIGV4cGVjdChidWlsZGluZy5hZGRyZXNzKS50b0NvbnRhaW4oJ1FDJyk7XG4gICAgICAgIGV4cGVjdChidWlsZGluZy5jaXR5KS50b01hdGNoKC9eKE1vbnRyZWFsfFF1ZWJlYykkLyk7XG4gICAgICAgIGV4cGVjdChidWlsZGluZy5wcm92aW5jZSkudG9CZSgnUUMnKTtcbiAgICAgICAgZXhwZWN0KGJ1aWxkaW5nLnBvc3RhbENvZGUpLnRvTWF0Y2goL15bQS1aXVxcZFtBLVpdXFxzK1xcZFtBLVpdXFxkJC8pO1xuICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGVuZm9yY2UgYnVpbGRpbmcgY2FwYWNpdHkgYW5kIGZsb29yIGNvbnN0cmFpbnRzJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgYnVpbGRpbmdzID0gT2JqZWN0LnZhbHVlcyh0ZXN0RGF0YS5idWlsZGluZ3MpO1xuXG4gICAgICBidWlsZGluZ3MuZm9yRWFjaCgoYnVpbGRpbmcpID0+IHtcbiAgICAgICAgLy8gVG90YWwgdW5pdHMgc2hvdWxkIGJlIHJlYXNvbmFibGUgZm9yIGZsb29yIGNvdW50XG4gICAgICAgIGNvbnN0IHVuaXRzUGVyRmxvb3IgPSBidWlsZGluZy50b3RhbFVuaXRzIC8gYnVpbGRpbmcudG90YWxGbG9vcnM7XG4gICAgICAgIGV4cGVjdCh1bml0c1BlckZsb29yKS50b0JlR3JlYXRlclRoYW4oMCk7XG4gICAgICAgIGV4cGVjdCh1bml0c1BlckZsb29yKS50b0JlTGVzc1RoYW4oNTApOyAvLyBSZWFzb25hYmxlIHVwcGVyIGxpbWl0XG5cbiAgICAgICAgLy8gQnVpbGRpbmcgc2hvdWxkIGhhdmUgcG9zaXRpdmUgZGltZW5zaW9uc1xuICAgICAgICBleHBlY3QoYnVpbGRpbmcudG90YWxGbG9vcnMpLnRvQmVHcmVhdGVyVGhhbigwKTtcbiAgICAgICAgZXhwZWN0KGJ1aWxkaW5nLnRvdGFsVW5pdHMpLnRvQmVHcmVhdGVyVGhhbigwKTtcbiAgICAgICAgZXhwZWN0KGJ1aWxkaW5nLnllYXJCdWlsdCkudG9CZUdyZWF0ZXJUaGFuKDE4MDApO1xuICAgICAgICBleHBlY3QoYnVpbGRpbmcueWVhckJ1aWx0KS50b0JlTGVzc1RoYW5PckVxdWFsKG5ldyBEYXRlKCkuZ2V0RnVsbFllYXIoKSk7XG4gICAgICB9KTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgaGFuZGxlIGRpZmZlcmVudCBidWlsZGluZyB0eXBlcyBjb3JyZWN0bHknLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBidWlsZGluZ1R5cGVzID0gWydyZXNpZGVudGlhbCcsICdoaWdoX3Jpc2UnLCAnaGVyaXRhZ2UnXTtcbiAgICAgIGNvbnN0IGJ1aWxkaW5ncyA9IE9iamVjdC52YWx1ZXModGVzdERhdGEuYnVpbGRpbmdzKTtcblxuICAgICAgZXhwZWN0KGJ1aWxkaW5ncy5tYXAoKGIpID0+IGIuYnVpbGRpbmdUeXBlKSkudG9FcXVhbChleHBlY3QuYXJyYXlDb250YWluaW5nKGJ1aWxkaW5nVHlwZXMpKTtcblxuICAgICAgLy8gSGVyaXRhZ2UgYnVpbGRpbmdzIHNob3VsZCBoYXZlIHNwZWNpZmljIGNvbnN0cmFpbnRzXG4gICAgICBjb25zdCBoZXJpdGFnZUJ1aWxkaW5nID0gYnVpbGRpbmdzLmZpbmQoKGIpID0+IGIuYnVpbGRpbmdUeXBlID09PSAnaGVyaXRhZ2UnKTtcbiAgICAgIGV4cGVjdChoZXJpdGFnZUJ1aWxkaW5nPy5hbWVuaXRpZXMpLnRvQ29udGFpbignaGVyaXRhZ2VfZmVhdHVyZXMnKTtcbiAgICAgIGV4cGVjdChoZXJpdGFnZUJ1aWxkaW5nPy55ZWFyQnVpbHQpLnRvQmVMZXNzVGhhbigxOTgwKTsgLy8gT2xkZXIgYnVpbGRpbmdcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ1Jlc2lkZW5jZSBNYW5hZ2VtZW50JywgKCkgPT4ge1xuICAgIGl0KCdzaG91bGQgcmV0cmlldmUgcmVzaWRlbmNlcyB3aXRoIGJ1aWxkaW5nIGFuZCBvcmdhbml6YXRpb24gZGF0YScsIGFzeW5jICgpID0+IHtcbiAgICAgIG1vY2tEYi5xdWVyeS5yZXNpZGVuY2VzLmZpbmRNYW55Lm1vY2tSZXNvbHZlZFZhbHVlT25jZShbXG4gICAgICAgIHtcbiAgICAgICAgICAuLi50ZXN0RGF0YS5yZXNpZGVuY2VzLm1vbnRyZWFsMkEsXG4gICAgICAgICAgYnVpbGRpbmc6IHtcbiAgICAgICAgICAgIC4uLnRlc3REYXRhLmJ1aWxkaW5ncy5tb250cmVhbFRvd2VyLFxuICAgICAgICAgICAgb3JnYW5pemF0aW9uOiB0ZXN0RGF0YS5vcmdhbml6YXRpb25zLm1vbnRyZWFsLFxuICAgICAgICAgIH0sXG4gICAgICAgIH0sXG4gICAgICBdKTtcblxuICAgICAgY29uc3QgcmVzaWRlbmNlcyA9IGF3YWl0IG1vY2tEYi5xdWVyeS5yZXNpZGVuY2VzLmZpbmRNYW55KHtcbiAgICAgICAgd2hlcmU6IHsgaXNBY3RpdmU6IHRydWUgfSxcbiAgICAgICAgd2l0aDogeyBidWlsZGluZzogeyB3aXRoOiB7IG9yZ2FuaXphdGlvbjogdHJ1ZSB9IH0gfSxcbiAgICAgIH0pO1xuXG4gICAgICBleHBlY3QocmVzaWRlbmNlcykudG9IYXZlTGVuZ3RoKDEpO1xuICAgICAgZXhwZWN0KHJlc2lkZW5jZXNbMF0uYnVpbGRpbmcpLnRvQmVEZWZpbmVkKCk7XG4gICAgICBleHBlY3QocmVzaWRlbmNlc1swXS5idWlsZGluZy5vcmdhbml6YXRpb24pLnRvQmVEZWZpbmVkKCk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIHZhbGlkYXRlIHJlc2lkZW5jZSBzcGVjaWZpY2F0aW9ucycsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IHJlc2lkZW5jZXMgPSBPYmplY3QudmFsdWVzKHRlc3REYXRhLnJlc2lkZW5jZXMpO1xuXG4gICAgICByZXNpZGVuY2VzLmZvckVhY2goKHJlc2lkZW5jZSkgPT4ge1xuICAgICAgICAvLyBVbml0IG51bWJlcnMgc2hvdWxkIGJlIHZhbGlkXG4gICAgICAgIGV4cGVjdChyZXNpZGVuY2UudW5pdE51bWJlcikudG9NYXRjaCgvXlswLTlBLVpdKyQvKTtcblxuICAgICAgICAvLyBGbG9vciBzaG91bGQgYmUgdmFsaWRcbiAgICAgICAgZXhwZWN0KHJlc2lkZW5jZS5mbG9vcikudG9CZUdyZWF0ZXJUaGFuKDApO1xuXG4gICAgICAgIC8vIFNxdWFyZSBmb290YWdlIHNob3VsZCBiZSByZWFzb25hYmxlXG4gICAgICAgIGV4cGVjdChyZXNpZGVuY2Uuc3F1YXJlRm9vdGFnZSkudG9CZUdyZWF0ZXJUaGFuKDIwMCk7XG4gICAgICAgIGV4cGVjdChyZXNpZGVuY2Uuc3F1YXJlRm9vdGFnZSkudG9CZUxlc3NUaGFuKDUwMDApO1xuXG4gICAgICAgIC8vIEJlZHJvb20gYW5kIGJhdGhyb29tIGNvdW50cyBzaG91bGQgYmUgbG9naWNhbFxuICAgICAgICBleHBlY3QocmVzaWRlbmNlLmJlZHJvb21Db3VudCkudG9CZUdyZWF0ZXJUaGFuT3JFcXVhbCgwKTtcbiAgICAgICAgZXhwZWN0KHJlc2lkZW5jZS5iYXRocm9vbUNvdW50KS50b0JlR3JlYXRlclRoYW4oMCk7XG4gICAgICAgIGV4cGVjdChyZXNpZGVuY2UuYmVkcm9vbUNvdW50KS50b0JlTGVzc1RoYW5PckVxdWFsKDEwKTtcbiAgICAgICAgZXhwZWN0KHJlc2lkZW5jZS5iYXRocm9vbUNvdW50KS50b0JlTGVzc1RoYW5PckVxdWFsKDEwKTtcblxuICAgICAgICAvLyBSZW50IGFtb3VudCBzaG91bGQgYmUgcG9zaXRpdmVcbiAgICAgICAgZXhwZWN0KHJlc2lkZW5jZS5yZW50QW1vdW50KS50b0JlR3JlYXRlclRoYW4oMCk7XG4gICAgICB9KTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgaGFuZGxlIFF1ZWJlYyByZW50YWwgbWFya2V0IHByaWNpbmcnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCByZXNpZGVuY2VzID0gT2JqZWN0LnZhbHVlcyh0ZXN0RGF0YS5yZXNpZGVuY2VzKTtcblxuICAgICAgcmVzaWRlbmNlcy5mb3JFYWNoKChyZXNpZGVuY2UpID0+IHtcbiAgICAgICAgLy8gUXVlYmVjIHJlbnRhbCBwcmljZXMgc2hvdWxkIGJlIHdpdGhpbiByZWFzb25hYmxlIHJhbmdlc1xuICAgICAgICBjb25zdCBwcmljZVBlclNxRnQgPSByZXNpZGVuY2UucmVudEFtb3VudCAvIHJlc2lkZW5jZS5zcXVhcmVGb290YWdlO1xuICAgICAgICBleHBlY3QocHJpY2VQZXJTcUZ0KS50b0JlR3JlYXRlclRoYW4oMC41KTsgLy8gTWluaW11bSAkL3NxZnRcbiAgICAgICAgZXhwZWN0KHByaWNlUGVyU3FGdCkudG9CZUxlc3NUaGFuKDUuMCk7IC8vIE1heGltdW0gJC9zcWZ0XG5cbiAgICAgICAgLy8gUmVudCBzaG91bGQgY29ycmVsYXRlIHdpdGggYmVkcm9vbSBjb3VudFxuICAgICAgICBpZiAocmVzaWRlbmNlLmJlZHJvb21Db3VudCA9PT0gMSkge1xuICAgICAgICAgIGV4cGVjdChyZXNpZGVuY2UucmVudEFtb3VudCkudG9CZUxlc3NUaGFuKDE1MDApO1xuICAgICAgICB9IGVsc2UgaWYgKHJlc2lkZW5jZS5iZWRyb29tQ291bnQgPj0gMykge1xuICAgICAgICAgIGV4cGVjdChyZXNpZGVuY2UucmVudEFtb3VudCkudG9CZUdyZWF0ZXJUaGFuKDE1MDApO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgdmFsaWRhdGUgcmVzaWRlbmNlIGZlYXR1cmVzIGFuZCBhbWVuaXRpZXMnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCByZXNpZGVuY2VzID0gT2JqZWN0LnZhbHVlcyh0ZXN0RGF0YS5yZXNpZGVuY2VzKTtcblxuICAgICAgcmVzaWRlbmNlcy5mb3JFYWNoKChyZXNpZGVuY2UpID0+IHtcbiAgICAgICAgLy8gRmVhdHVyZXMgc2hvdWxkIGJlIGFuIGFycmF5XG4gICAgICAgIGV4cGVjdChBcnJheS5pc0FycmF5KHJlc2lkZW5jZS5mZWF0dXJlcykpLnRvQmUodHJ1ZSk7XG5cbiAgICAgICAgLy8gRmVhdHVyZXMgc2hvdWxkIGJlIHJlYXNvbmFibGVcbiAgICAgICAgY29uc3QgdmFsaWRGZWF0dXJlcyA9IFtcbiAgICAgICAgICAnYmFsY29ueScsXG4gICAgICAgICAgJ2Rpc2h3YXNoZXInLFxuICAgICAgICAgICdjaXR5X3ZpZXcnLFxuICAgICAgICAgICdwYXJraW5nX2luY2x1ZGVkJyxcbiAgICAgICAgICAnc3RvcmFnZV9pbmNsdWRlZCcsXG4gICAgICAgICAgJ2hlcml0YWdlX2RldGFpbHMnLFxuICAgICAgICAgICdoYXJkd29vZF9mbG9vcnMnLFxuICAgICAgICBdO1xuXG4gICAgICAgIHJlc2lkZW5jZS5mZWF0dXJlcy5mb3JFYWNoKChmZWF0dXJlKSA9PiB7XG4gICAgICAgICAgZXhwZWN0KHZhbGlkRmVhdHVyZXMpLnRvQ29udGFpbihmZWF0dXJlKTtcbiAgICAgICAgfSk7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ1VzZXItUHJvcGVydHkgUmVsYXRpb25zaGlwcycsICgpID0+IHtcbiAgICBpdCgnc2hvdWxkIG1hbmFnZSB1c2VyIG9yZ2FuaXphdGlvbiBtZW1iZXJzaGlwcyBjb3JyZWN0bHknLCBhc3luYyAoKSA9PiB7XG4gICAgICBtb2NrRGIucXVlcnkudXNlck9yZ2FuaXphdGlvbnMuZmluZE1hbnkubW9ja1Jlc29sdmVkVmFsdWVPbmNlKFtcbiAgICAgICAge1xuICAgICAgICAgIHVzZXJJZDogdGVzdERhdGEudXNlcnMubWFuYWdlci5pZCxcbiAgICAgICAgICBvcmdhbml6YXRpb25JZDogdGVzdERhdGEub3JnYW5pemF0aW9ucy5tb250cmVhbC5pZCxcbiAgICAgICAgICByb2xlOiAnbWFuYWdlcicsXG4gICAgICAgICAgaXNBY3RpdmU6IHRydWUsXG4gICAgICAgICAgY2FuQWNjZXNzQWxsT3JnYW5pemF0aW9uczogZmFsc2UsXG4gICAgICAgICAgam9pbmVkQXQ6IG5ldyBEYXRlKCcyMDI0LTAxLTAxJyksXG4gICAgICAgIH0sXG4gICAgICBdKTtcblxuICAgICAgY29uc3QgdXNlck9yZ3MgPSBhd2FpdCBtb2NrRGIucXVlcnkudXNlck9yZ2FuaXphdGlvbnMuZmluZE1hbnkoe1xuICAgICAgICB3aGVyZTogeyB1c2VySWQ6IHRlc3REYXRhLnVzZXJzLm1hbmFnZXIuaWQsIGlzQWN0aXZlOiB0cnVlIH0sXG4gICAgICB9KTtcblxuICAgICAgZXhwZWN0KHVzZXJPcmdzKS50b0hhdmVMZW5ndGgoMSk7XG4gICAgICBleHBlY3QodXNlck9yZ3NbMF0ub3JnYW5pemF0aW9uSWQpLnRvQmUodGVzdERhdGEub3JnYW5pemF0aW9ucy5tb250cmVhbC5pZCk7XG4gICAgICBleHBlY3QodXNlck9yZ3NbMF0uaXNBY3RpdmUpLnRvQmUodHJ1ZSk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIG1hbmFnZSB1c2VyIHJlc2lkZW5jZSBhc3NpZ25tZW50cyBjb3JyZWN0bHknLCBhc3luYyAoKSA9PiB7XG4gICAgICBtb2NrRGIucXVlcnkudXNlclJlc2lkZW5jZXMuZmluZE1hbnkubW9ja1Jlc29sdmVkVmFsdWVPbmNlKFtcbiAgICAgICAge1xuICAgICAgICAgIHVzZXJJZDogdGVzdERhdGEudXNlcnMudGVuYW50LmlkLFxuICAgICAgICAgIHJlc2lkZW5jZUlkOiB0ZXN0RGF0YS5yZXNpZGVuY2VzLm1vbnRyZWFsMkEuaWQsXG4gICAgICAgICAgcmVsYXRpb25zaGlwVHlwZTogJ3RlbmFudCcsXG4gICAgICAgICAgaXNBY3RpdmU6IHRydWUsXG4gICAgICAgICAgc3RhcnREYXRlOiBuZXcgRGF0ZSgnMjAyNC0wMS0wMScpLFxuICAgICAgICAgIGVuZERhdGU6IG5ldyBEYXRlKCcyMDI0LTEyLTMxJyksXG4gICAgICAgICAgbW9udGhseVJlbnQ6IDE4MDAuMCxcbiAgICAgICAgfSxcbiAgICAgIF0pO1xuXG4gICAgICBjb25zdCB1c2VyUmVzaWRlbmNlcyA9IGF3YWl0IG1vY2tEYi5xdWVyeS51c2VyUmVzaWRlbmNlcy5maW5kTWFueSh7XG4gICAgICAgIHdoZXJlOiB7IHVzZXJJZDogdGVzdERhdGEudXNlcnMudGVuYW50LmlkLCBpc0FjdGl2ZTogdHJ1ZSB9LFxuICAgICAgfSk7XG5cbiAgICAgIGV4cGVjdCh1c2VyUmVzaWRlbmNlcykudG9IYXZlTGVuZ3RoKDEpO1xuICAgICAgZXhwZWN0KHVzZXJSZXNpZGVuY2VzWzBdLnJlbGF0aW9uc2hpcFR5cGUpLnRvQmUoJ3RlbmFudCcpO1xuICAgICAgZXhwZWN0KHVzZXJSZXNpZGVuY2VzWzBdLm1vbnRobHlSZW50KS50b0JlKDE4MDAuMCk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGVuZm9yY2UgUXVlYmVjIHRlbmFudC1sYW5kbG9yZCByZWxhdGlvbnNoaXAgcnVsZXMnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCB0ZW5hbnRBc3NpZ25tZW50ID0ge1xuICAgICAgICB1c2VySWQ6IHRlc3REYXRhLnVzZXJzLnRlbmFudC5pZCxcbiAgICAgICAgcmVzaWRlbmNlSWQ6IHRlc3REYXRhLnJlc2lkZW5jZXMubW9udHJlYWwyQS5pZCxcbiAgICAgICAgcmVsYXRpb25zaGlwVHlwZTogJ3RlbmFudCcsXG4gICAgICAgIGlzQWN0aXZlOiB0cnVlLFxuICAgICAgICBzdGFydERhdGU6IG5ldyBEYXRlKCcyMDI0LTAxLTAxJyksXG4gICAgICAgIGVuZERhdGU6IG5ldyBEYXRlKCcyMDI0LTEyLTMxJyksXG4gICAgICAgIG1vbnRobHlSZW50OiAxODAwLjAsXG4gICAgICB9O1xuXG4gICAgICAvLyBWYWxpZGF0ZSBsZWFzZSB0ZXJtc1xuICAgICAgZXhwZWN0KHRlbmFudEFzc2lnbm1lbnQuc3RhcnREYXRlKS50b0JlSW5zdGFuY2VPZihEYXRlKTtcbiAgICAgIGV4cGVjdCh0ZW5hbnRBc3NpZ25tZW50LmVuZERhdGUpLnRvQmVJbnN0YW5jZU9mKERhdGUpO1xuICAgICAgZXhwZWN0KHRlbmFudEFzc2lnbm1lbnQuZW5kRGF0ZS5nZXRUaW1lKCkpLnRvQmVHcmVhdGVyVGhhbihcbiAgICAgICAgdGVuYW50QXNzaWdubWVudC5zdGFydERhdGUuZ2V0VGltZSgpXG4gICAgICApO1xuXG4gICAgICAvLyBMZWFzZSBkdXJhdGlvbiBzaG91bGQgYmUgcmVhc29uYWJsZSAoNiBtb250aHMgdG8gMiB5ZWFycylcbiAgICAgIGNvbnN0IGxlYXNlRHVyYXRpb25Nb250aHMgPVxuICAgICAgICAodGVuYW50QXNzaWdubWVudC5lbmREYXRlLmdldFRpbWUoKSAtIHRlbmFudEFzc2lnbm1lbnQuc3RhcnREYXRlLmdldFRpbWUoKSkgL1xuICAgICAgICAoMTAwMCAqIDYwICogNjAgKiAyNCAqIDMwKTtcbiAgICAgIGV4cGVjdChsZWFzZUR1cmF0aW9uTW9udGhzKS50b0JlR3JlYXRlclRoYW5PckVxdWFsKDYpO1xuICAgICAgZXhwZWN0KGxlYXNlRHVyYXRpb25Nb250aHMpLnRvQmVMZXNzVGhhbk9yRXF1YWwoMjQpO1xuXG4gICAgICAvLyBNb250aGx5IHJlbnQgc2hvdWxkIG1hdGNoIHJlc2lkZW5jZSByZW50IGFtb3VudFxuICAgICAgZXhwZWN0KHRlbmFudEFzc2lnbm1lbnQubW9udGhseVJlbnQpLnRvQmUodGVzdERhdGEucmVzaWRlbmNlcy5tb250cmVhbDJBLnJlbnRBbW91bnQpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCB2YWxpZGF0ZSB1c2VyIGxhbmd1YWdlIHByZWZlcmVuY2VzIGZvciBRdWViZWMgY29udGV4dCcsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IHVzZXJzID0gT2JqZWN0LnZhbHVlcyh0ZXN0RGF0YS51c2Vycyk7XG5cbiAgICAgIHVzZXJzLmZvckVhY2goKHVzZXIpID0+IHtcbiAgICAgICAgLy8gTGFuZ3VhZ2Ugc2hvdWxkIGJlIHNwZWNpZmllZCBmb3IgUXVlYmVjIHVzZXJzXG4gICAgICAgIGV4cGVjdChbJ2VuJywgJ2ZyJ10pLnRvQ29udGFpbih1c2VyLmxhbmd1YWdlKTtcblxuICAgICAgICAvLyBGcmVuY2ggdXNlcnMgc2hvdWxkIGhhdmUgRnJlbmNoIG5hbWVzIG9yIGFkZHJlc3Nlc1xuICAgICAgICBpZiAodXNlci5sYW5ndWFnZSA9PT0gJ2ZyJykge1xuICAgICAgICAgIGNvbnN0IGhhc0ZyZW5jaENvbnRlbnQgPVxuICAgICAgICAgICAgdXNlci5maXJzdE5hbWUuaW5jbHVkZXMoJ1BpZXJyZScpIHx8XG4gICAgICAgICAgICB1c2VyLmZpcnN0TmFtZS5pbmNsdWRlcygnTWFyaWUnKSB8fFxuICAgICAgICAgICAgdXNlci5lbWFpbC5pbmNsdWRlcygnZ2VzdGlvbm5haXJlJykgfHxcbiAgICAgICAgICAgIHVzZXIuZW1haWwuaW5jbHVkZXMoJ2xvY2F0YWlyZScpO1xuXG4gICAgICAgICAgZXhwZWN0KGhhc0ZyZW5jaENvbnRlbnQgfHwgdXNlci5lbWFpbC5pbmNsdWRlcygnbW9udHJlYWwuY2EnKSkudG9CZSh0cnVlKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdDb21wbGV4IFByb3BlcnR5IE1hbmFnZW1lbnQgV29ya2Zsb3dzJywgKCkgPT4ge1xuICAgIGl0KCdzaG91bGQgaGFuZGxlIGNvbXBsZXRlIHRlbmFudCBvbmJvYXJkaW5nIHdvcmtmbG93JywgYXN5bmMgKCkgPT4ge1xuICAgICAgLy8gU3RlcCAxOiBGaW5kIGF2YWlsYWJsZSByZXNpZGVuY2VcbiAgICAgIG1vY2tEYi5xdWVyeS5yZXNpZGVuY2VzLmZpbmRNYW55Lm1vY2tSZXNvbHZlZFZhbHVlT25jZShbdGVzdERhdGEucmVzaWRlbmNlcy5tb250cmVhbDJBXSk7XG5cbiAgICAgIGNvbnN0IGF2YWlsYWJsZVJlc2lkZW5jZXMgPSBhd2FpdCBtb2NrRGIucXVlcnkucmVzaWRlbmNlcy5maW5kTWFueSh7XG4gICAgICAgIHdoZXJlOiB7IGlzQWN0aXZlOiB0cnVlIH0sXG4gICAgICB9KTtcblxuICAgICAgZXhwZWN0KGF2YWlsYWJsZVJlc2lkZW5jZXMpLnRvSGF2ZUxlbmd0aCgxKTtcblxuICAgICAgLy8gU3RlcCAyOiBDcmVhdGUgdXNlci1yZXNpZGVuY2UgYXNzaWdubWVudFxuICAgICAgY29uc3QgYXNzaWdubWVudCA9IHtcbiAgICAgICAgdXNlcklkOiB0ZXN0RGF0YS51c2Vycy50ZW5hbnQuaWQsXG4gICAgICAgIHJlc2lkZW5jZUlkOiBhdmFpbGFibGVSZXNpZGVuY2VzWzBdLmlkLFxuICAgICAgICByZWxhdGlvbnNoaXBUeXBlOiAndGVuYW50JyxcbiAgICAgICAgaXNBY3RpdmU6IHRydWUsXG4gICAgICAgIHN0YXJ0RGF0ZTogbmV3IERhdGUoJzIwMjQtMDYtMDEnKSxcbiAgICAgICAgZW5kRGF0ZTogbmV3IERhdGUoJzIwMjUtMDUtMzEnKSxcbiAgICAgICAgbW9udGhseVJlbnQ6IGF2YWlsYWJsZVJlc2lkZW5jZXNbMF0ucmVudEFtb3VudCxcbiAgICAgIH07XG5cbiAgICAgIC8vIFZhbGlkYXRlIGFzc2lnbm1lbnQgZGF0YVxuICAgICAgZXhwZWN0KGFzc2lnbm1lbnQudXNlcklkKS50b0JlVHJ1dGh5KCk7XG4gICAgICBleHBlY3QoYXNzaWdubWVudC5yZXNpZGVuY2VJZCkudG9CZVRydXRoeSgpO1xuICAgICAgZXhwZWN0KGFzc2lnbm1lbnQubW9udGhseVJlbnQpLnRvQmUodGVzdERhdGEucmVzaWRlbmNlcy5tb250cmVhbDJBLnJlbnRBbW91bnQpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBoYW5kbGUgcHJvcGVydHkgbWFuYWdlciBvcmdhbml6YXRpb24gdHJhbnNmZXInLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBvbGRPcmdhbml6YXRpb24gPSB0ZXN0RGF0YS5vcmdhbml6YXRpb25zLm1vbnRyZWFsO1xuICAgICAgY29uc3QgbmV3T3JnYW5pemF0aW9uID0gdGVzdERhdGEub3JnYW5pemF0aW9ucy5xdWViZWM7XG4gICAgICBjb25zdCBtYW5hZ2VyID0gdGVzdERhdGEudXNlcnMubWFuYWdlcjtcblxuICAgICAgLy8gU2ltdWxhdGUgb3JnYW5pemF0aW9uIHRyYW5zZmVyXG4gICAgICBjb25zdCBvbGRNZW1iZXJzaGlwID0ge1xuICAgICAgICB1c2VySWQ6IG1hbmFnZXIuaWQsXG4gICAgICAgIG9yZ2FuaXphdGlvbklkOiBvbGRPcmdhbml6YXRpb24uaWQsXG4gICAgICAgIGlzQWN0aXZlOiBmYWxzZSwgLy8gRGVhY3RpdmF0ZWRcbiAgICAgICAgZW5kRGF0ZTogbmV3IERhdGUoKSxcbiAgICAgIH07XG5cbiAgICAgIGNvbnN0IG5ld01lbWJlcnNoaXAgPSB7XG4gICAgICAgIHVzZXJJZDogbWFuYWdlci5pZCxcbiAgICAgICAgb3JnYW5pemF0aW9uSWQ6IG5ld09yZ2FuaXphdGlvbi5pZCxcbiAgICAgICAgaXNBY3RpdmU6IHRydWUsIC8vIE5ldyBhY3RpdmUgbWVtYmVyc2hpcFxuICAgICAgICBzdGFydERhdGU6IG5ldyBEYXRlKCksXG4gICAgICB9O1xuXG4gICAgICBleHBlY3Qob2xkTWVtYmVyc2hpcC5pc0FjdGl2ZSkudG9CZShmYWxzZSk7XG4gICAgICBleHBlY3QobmV3TWVtYmVyc2hpcC5pc0FjdGl2ZSkudG9CZSh0cnVlKTtcbiAgICAgIGV4cGVjdChvbGRNZW1iZXJzaGlwLnVzZXJJZCkudG9CZShuZXdNZW1iZXJzaGlwLnVzZXJJZCk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGhhbmRsZSBidWlsZGluZyBjYXBhY2l0eSBhbmQgb2NjdXBhbmN5IGNhbGN1bGF0aW9ucycsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IGJ1aWxkaW5nID0gdGVzdERhdGEuYnVpbGRpbmdzLm1vbnRyZWFsVG93ZXI7XG5cbiAgICAgIC8vIE1vY2sgY3VycmVudCBvY2N1cGFuY3lcbiAgICAgIG1vY2tEYi5xdWVyeS51c2VyUmVzaWRlbmNlcy5maW5kTWFueS5tb2NrUmVzb2x2ZWRWYWx1ZU9uY2UoW1xuICAgICAgICB7IHJlc2lkZW5jZUlkOiAncmVzaWRlbmNlLTEnLCBpc0FjdGl2ZTogdHJ1ZSB9LFxuICAgICAgICB7IHJlc2lkZW5jZUlkOiAncmVzaWRlbmNlLTInLCBpc0FjdGl2ZTogdHJ1ZSB9LFxuICAgICAgICB7IHJlc2lkZW5jZUlkOiAncmVzaWRlbmNlLTMnLCBpc0FjdGl2ZTogdHJ1ZSB9LFxuICAgICAgXSk7XG5cbiAgICAgIGNvbnN0IG9jY3VwaWVkVW5pdHMgPSBhd2FpdCBtb2NrRGIucXVlcnkudXNlclJlc2lkZW5jZXMuZmluZE1hbnkoe1xuICAgICAgICB3aGVyZTogeyBpc0FjdGl2ZTogdHJ1ZSB9LFxuICAgICAgfSk7XG5cbiAgICAgIGNvbnN0IG9jY3VwYW5jeVJhdGUgPSAob2NjdXBpZWRVbml0cy5sZW5ndGggLyBidWlsZGluZy50b3RhbFVuaXRzKSAqIDEwMDtcbiAgICAgIGNvbnN0IGF2YWlsYWJsZVVuaXRzID0gYnVpbGRpbmcudG90YWxVbml0cyAtIG9jY3VwaWVkVW5pdHMubGVuZ3RoO1xuXG4gICAgICBleHBlY3Qob2NjdXBhbmN5UmF0ZSkudG9CZUdyZWF0ZXJUaGFuT3JFcXVhbCgwKTtcbiAgICAgIGV4cGVjdChvY2N1cGFuY3lSYXRlKS50b0JlTGVzc1RoYW5PckVxdWFsKDEwMCk7XG4gICAgICBleHBlY3QoYXZhaWxhYmxlVW5pdHMpLnRvQmVHcmVhdGVyVGhhbk9yRXF1YWwoMCk7XG4gICAgICBleHBlY3QoYXZhaWxhYmxlVW5pdHMpLnRvQmVMZXNzVGhhbk9yRXF1YWwoYnVpbGRpbmcudG90YWxVbml0cyk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIHZhbGlkYXRlIFF1ZWJlYyBwcm9wZXJ0eSBtYW5hZ2VtZW50IGNvbXBsaWFuY2UnLCBhc3luYyAoKSA9PiB7XG4gICAgICAvLyBUZXN0IGNvbXBsaWFuY2Ugd2l0aCBRdWViZWMgcmVzaWRlbnRpYWwgdGVuYW5jeSBsYXdzXG4gICAgICBjb25zdCByZXNpZGVuY2UgPSB0ZXN0RGF0YS5yZXNpZGVuY2VzLm1vbnRyZWFsMkE7XG4gICAgICBjb25zdCBidWlsZGluZyA9IHRlc3REYXRhLmJ1aWxkaW5ncy5tb250cmVhbFRvd2VyO1xuXG4gICAgICAvLyBSZW50IGNvbnRyb2wgY29tcGxpYW5jZSAodmFyaWVzIGJ5IG11bmljaXBhbGl0eSlcbiAgICAgIGV4cGVjdChyZXNpZGVuY2UucmVudEFtb3VudCkudG9CZUdyZWF0ZXJUaGFuKDApO1xuXG4gICAgICAvLyBCdWlsZGluZyBzYWZldHkgYW5kIGhhYml0YWJpbGl0eSBzdGFuZGFyZHNcbiAgICAgIGV4cGVjdChidWlsZGluZy55ZWFyQnVpbHQpLnRvQmVHcmVhdGVyVGhhbigxOTIwKTsgLy8gTW9kZXJuIHNhZmV0eSBzdGFuZGFyZHNcbiAgICAgIGV4cGVjdChyZXNpZGVuY2UuYmF0aHJvb21Db3VudCkudG9CZUdyZWF0ZXJUaGFuKDApOyAvLyBCYXNpYyBoYWJpdGFiaWxpdHlcblxuICAgICAgLy8gQWNjZXNzaWJpbGl0eSBjb25zaWRlcmF0aW9ucyBmb3IgbXVsdGktZmxvb3IgYnVpbGRpbmdzXG4gICAgICBpZiAoYnVpbGRpbmcudG90YWxGbG9vcnMgPiAzKSB7XG4gICAgICAgIGV4cGVjdChidWlsZGluZy5hbWVuaXRpZXMpLnRvRXF1YWwoXG4gICAgICAgICAgZXhwZWN0LmFycmF5Q29udGFpbmluZyhbJ2d5bScsICdwb29sJywgJ3BhcmtpbmcnLCAnY29uY2llcmdlJ10pXG4gICAgICAgICk7XG4gICAgICB9XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdEYXRhIEludGVncml0eSBhbmQgVmFsaWRhdGlvbicsICgpID0+IHtcbiAgICBpdCgnc2hvdWxkIG1haW50YWluIHJlZmVyZW50aWFsIGludGVncml0eSBiZXR3ZWVuIGVudGl0aWVzJywgYXN5bmMgKCkgPT4ge1xuICAgICAgLy8gQnVpbGRpbmcgbXVzdCBiZWxvbmcgdG8gYW4gb3JnYW5pemF0aW9uXG4gICAgICBjb25zdCBidWlsZGluZyA9IHRlc3REYXRhLmJ1aWxkaW5ncy5tb250cmVhbFRvd2VyO1xuICAgICAgZXhwZWN0KGJ1aWxkaW5nLm9yZ2FuaXphdGlvbklkKS50b0JlVHJ1dGh5KCk7XG4gICAgICBleHBlY3QoXG4gICAgICAgIE9iamVjdC52YWx1ZXModGVzdERhdGEub3JnYW5pemF0aW9ucykuc29tZSgob3JnKSA9PiBvcmcuaWQgPT09IGJ1aWxkaW5nLm9yZ2FuaXphdGlvbklkKVxuICAgICAgKS50b0JlKHRydWUpO1xuXG4gICAgICAvLyBSZXNpZGVuY2UgbXVzdCBiZWxvbmcgdG8gYSBidWlsZGluZ1xuICAgICAgY29uc3QgcmVzaWRlbmNlID0gdGVzdERhdGEucmVzaWRlbmNlcy5tb250cmVhbDJBO1xuICAgICAgZXhwZWN0KHJlc2lkZW5jZS5idWlsZGluZ0lkKS50b0JlVHJ1dGh5KCk7XG4gICAgICBleHBlY3QoXG4gICAgICAgIE9iamVjdC52YWx1ZXModGVzdERhdGEuYnVpbGRpbmdzKS5zb21lKChibGRnKSA9PiBibGRnLmlkID09PSByZXNpZGVuY2UuYnVpbGRpbmdJZClcbiAgICAgICkudG9CZSh0cnVlKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgdmFsaWRhdGUgYnVzaW5lc3MgcnVsZSBjb25zdHJhaW50cycsIGFzeW5jICgpID0+IHtcbiAgICAgIC8vIE9yZ2FuaXphdGlvbiBuYW1lcyBzaG91bGQgYmUgdW5pcXVlXG4gICAgICBjb25zdCBvcmdOYW1lcyA9IE9iamVjdC52YWx1ZXModGVzdERhdGEub3JnYW5pemF0aW9ucykubWFwKChvcmcpID0+IG9yZy5uYW1lKTtcbiAgICAgIGNvbnN0IHVuaXF1ZU9yZ05hbWVzID0gbmV3IFNldChvcmdOYW1lcyk7XG4gICAgICBleHBlY3QodW5pcXVlT3JnTmFtZXMuc2l6ZSkudG9CZShvcmdOYW1lcy5sZW5ndGgpO1xuXG4gICAgICAvLyBCdWlsZGluZyBuYW1lcyB3aXRoaW4gYW4gb3JnYW5pemF0aW9uIHNob3VsZCBiZSB1bmlxdWVcbiAgICAgIGNvbnN0IGJ1aWxkaW5nc0J5T3JnID0gT2JqZWN0LnZhbHVlcyh0ZXN0RGF0YS5idWlsZGluZ3MpLnJlZHVjZShcbiAgICAgICAgKGFjYywgYnVpbGRpbmcpID0+IHtcbiAgICAgICAgICBpZiAoIWFjY1tidWlsZGluZy5vcmdhbml6YXRpb25JZF0pIHtcbiAgICAgICAgICAgIGFjY1tidWlsZGluZy5vcmdhbml6YXRpb25JZF0gPSBbXTtcbiAgICAgICAgICB9XG4gICAgICAgICAgYWNjW2J1aWxkaW5nLm9yZ2FuaXphdGlvbklkXS5wdXNoKGJ1aWxkaW5nLm5hbWUpO1xuICAgICAgICAgIHJldHVybiBhY2M7XG4gICAgICAgIH0sXG4gICAgICAgIHt9IGFzIFJlY29yZDxzdHJpbmcsIHN0cmluZ1tdPlxuICAgICAgKTtcblxuICAgICAgT2JqZWN0LnZhbHVlcyhidWlsZGluZ3NCeU9yZykuZm9yRWFjaCgoYnVpbGRpbmdOYW1lcykgPT4ge1xuICAgICAgICBjb25zdCB1bmlxdWVCdWlsZGluZ05hbWVzID0gbmV3IFNldChidWlsZGluZ05hbWVzKTtcbiAgICAgICAgZXhwZWN0KHVuaXF1ZUJ1aWxkaW5nTmFtZXMuc2l6ZSkudG9CZShidWlsZGluZ05hbWVzLmxlbmd0aCk7XG4gICAgICB9KTtcblxuICAgICAgLy8gVW5pdCBudW1iZXJzIHdpdGhpbiBhIGJ1aWxkaW5nIHNob3VsZCBiZSB1bmlxdWVcbiAgICAgIGNvbnN0IHJlc2lkZW5jZXNCeUJ1aWxkaW5nID0gT2JqZWN0LnZhbHVlcyh0ZXN0RGF0YS5yZXNpZGVuY2VzKS5yZWR1Y2UoXG4gICAgICAgIChhY2MsIHJlc2lkZW5jZSkgPT4ge1xuICAgICAgICAgIGlmICghYWNjW3Jlc2lkZW5jZS5idWlsZGluZ0lkXSkge1xuICAgICAgICAgICAgYWNjW3Jlc2lkZW5jZS5idWlsZGluZ0lkXSA9IFtdO1xuICAgICAgICAgIH1cbiAgICAgICAgICBhY2NbcmVzaWRlbmNlLmJ1aWxkaW5nSWRdLnB1c2gocmVzaWRlbmNlLnVuaXROdW1iZXIpO1xuICAgICAgICAgIHJldHVybiBhY2M7XG4gICAgICAgIH0sXG4gICAgICAgIHt9IGFzIFJlY29yZDxzdHJpbmcsIHN0cmluZ1tdPlxuICAgICAgKTtcblxuICAgICAgT2JqZWN0LnZhbHVlcyhyZXNpZGVuY2VzQnlCdWlsZGluZykuZm9yRWFjaCgodW5pdE51bWJlcnMpID0+IHtcbiAgICAgICAgY29uc3QgdW5pcXVlVW5pdE51bWJlcnMgPSBuZXcgU2V0KHVuaXROdW1iZXJzKTtcbiAgICAgICAgZXhwZWN0KHVuaXF1ZVVuaXROdW1iZXJzLnNpemUpLnRvQmUodW5pdE51bWJlcnMubGVuZ3RoKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBoYW5kbGUgZWRnZSBjYXNlcyBpbiBwcm9wZXJ0eSBkYXRhJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgZWRnZUNhc2VzID0ge1xuICAgICAgICAvLyBNaW5pbXVtIHZpYWJsZSByZXNpZGVuY2VcbiAgICAgICAgc3R1ZGlvVW5pdDoge1xuICAgICAgICAgIGlkOiAnc3R1ZGlvLXVuaXQtaWQnLFxuICAgICAgICAgIGJ1aWxkaW5nSWQ6IHRlc3REYXRhLmJ1aWxkaW5ncy5kZW1vQnVpbGRpbmcuaWQsXG4gICAgICAgICAgdW5pdE51bWJlcjogJ1NUVURJTzEnLFxuICAgICAgICAgIGZsb29yOiAxLFxuICAgICAgICAgIHNxdWFyZUZvb3RhZ2U6IDMwMCwgLy8gTWluaW11bSBsZWdhbCBzaXplIGluIFF1ZWJlY1xuICAgICAgICAgIGJlZHJvb21Db3VudDogMCwgLy8gU3R1ZGlvIGFwYXJ0bWVudFxuICAgICAgICAgIGJhdGhyb29tQ291bnQ6IDEsXG4gICAgICAgICAgcmVudEFtb3VudDogODAwLjAsXG4gICAgICAgICAgaXNBY3RpdmU6IHRydWUsXG4gICAgICAgICAgZmVhdHVyZXM6IFsnbXVycGh5X2JlZCddLFxuICAgICAgICB9LFxuXG4gICAgICAgIC8vIFBlbnRob3VzZSB1bml0XG4gICAgICAgIHBlbnRob3VzZToge1xuICAgICAgICAgIGlkOiAncGVudGhvdXNlLWlkJyxcbiAgICAgICAgICBidWlsZGluZ0lkOiB0ZXN0RGF0YS5idWlsZGluZ3MubW9udHJlYWxUb3dlci5pZCxcbiAgICAgICAgICB1bml0TnVtYmVyOiAnUEgxJyxcbiAgICAgICAgICBmbG9vcjogMjUsIC8vIFRvcCBmbG9vclxuICAgICAgICAgIHNxdWFyZUZvb3RhZ2U6IDI1MDAsXG4gICAgICAgICAgYmVkcm9vbUNvdW50OiAzLFxuICAgICAgICAgIGJhdGhyb29tQ291bnQ6IDMsXG4gICAgICAgICAgcmVudEFtb3VudDogNDUwMC4wLFxuICAgICAgICAgIGlzQWN0aXZlOiB0cnVlLFxuICAgICAgICAgIGZlYXR1cmVzOiBbJ3RlcnJhY2UnLCAncGFub3JhbWljX3ZpZXcnLCAnbHV4dXJ5X2ZpbmlzaGVzJ10sXG4gICAgICAgIH0sXG4gICAgICB9O1xuXG4gICAgICBPYmplY3QudmFsdWVzKGVkZ2VDYXNlcykuZm9yRWFjaCgocmVzaWRlbmNlKSA9PiB7XG4gICAgICAgIC8vIFZhbGlkYXRlIGVkZ2UgY2FzZSBjb25zdHJhaW50c1xuICAgICAgICBleHBlY3QocmVzaWRlbmNlLnNxdWFyZUZvb3RhZ2UpLnRvQmVHcmVhdGVyVGhhbigyNTApOyAvLyBRdWViZWMgbWluaW11bVxuICAgICAgICBleHBlY3QocmVzaWRlbmNlLmJlZHJvb21Db3VudCkudG9CZUdyZWF0ZXJUaGFuT3JFcXVhbCgwKTtcbiAgICAgICAgZXhwZWN0KHJlc2lkZW5jZS5iYXRocm9vbUNvdW50KS50b0JlR3JlYXRlclRoYW4oMCk7XG4gICAgICAgIGV4cGVjdChyZXNpZGVuY2UuZmxvb3IpLnRvQmVHcmVhdGVyVGhhbigwKTtcbiAgICAgICAgZXhwZWN0KHJlc2lkZW5jZS5yZW50QW1vdW50KS50b0JlR3JlYXRlclRoYW4oMCk7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfSk7XG59KTtcbiJdLCJ2ZXJzaW9uIjozfQ==