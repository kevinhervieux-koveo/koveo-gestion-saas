{"file":"/home/runner/workspace/tests/unit/calendar/calendar-features.test.ts","mappings":"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","names":[],"sources":["/home/runner/workspace/tests/unit/calendar/calendar-features.test.ts"],"sourcesContent":["import { describe, test, expect } from '@jest/globals';\n\n/**\n * Calendar Features Unit Tests\n * Tests core calendar functionality using real demo users and data structures.\n */\n\ndescribe('Calendar Features Unit Tests', () => {\n  // Real demo users from the system\n  const DEMO_USERS = {\n    ADMIN: {\n      id: '222f5a0d-6bc6-4f28-9f4d-32c133eed333',\n      email: 'admin@koveo.ca',\n      role: 'admin',\n      name: 'Marie Tremblay',\n    },\n    MANAGER: {\n      id: 'cb8e5b4d-8f2a-4e8d-9c5a-1b2c3d4e5f6g',\n      email: 'manager@koveo.ca',\n      role: 'manager',\n      name: 'Jean Dupuis',\n    },\n    RESIDENT: {\n      id: '9a8b7c6d-5e4f-3a2b-1c0d-9e8f7a6b5c4d',\n      email: 'resident@demo.ca',\n      role: 'resident',\n      name: 'Sophie Martin',\n    },\n  };\n\n  const DEMO_ORGANIZATION = {\n    id: 'e98cc553-c2d7-4854-877a-7cc9eeb8c6b6',\n    name: 'Demo Organization',\n  };\n\n  const DEMO_BUILDING = {\n    id: 'f47ac10b-58cc-4372-a567-0e02b2c3d479',\n    name: 'Complexe Rivière-des-Prairies',\n  };\n\n  // Calendar data with real demo users\n  const mockCalendarData = {\n    space: {\n      id: '75c4f108-3ec1-437d-bdec-35d1f8e2a44d', // Real space ID from demo\n      name: 'Salle communautaire',\n      isReservable: true,\n    },\n    events: [\n      {\n        id: 'event-1',\n        startTime: '2024-12-15T14:00:00Z',\n        endTime: '2024-12-15T16:00:00Z',\n        status: 'confirmed',\n        userName: DEMO_USERS.RESIDENT.name, // Sophie Martin\n        userEmail: DEMO_USERS.RESIDENT.email,\n        userId: DEMO_USERS.RESIDENT.id,\n        isOwnBooking: true,\n      },\n      {\n        id: 'event-2',\n        startTime: '2024-12-16T10:00:00Z',\n        endTime: '2024-12-16T12:00:00Z',\n        status: 'confirmed',\n        userName: DEMO_USERS.MANAGER.name, // Jean Dupuis\n        userEmail: DEMO_USERS.MANAGER.email,\n        userId: DEMO_USERS.MANAGER.id,\n        isOwnBooking: false,\n      },\n    ],\n  };\n\n  describe('Calendar Data Structure', () => {\n    test('should have valid space information', () => {\n      const { space } = mockCalendarData;\n\n      expect(space.id).toBe('75c4f108-3ec1-437d-bdec-35d1f8e2a44d'); // Real demo space ID\n      expect(space.name).toBe('Salle communautaire');\n      expect(space.isReservable).toBe(true);\n      expect(typeof space.id).toBe('string');\n      expect(typeof space.name).toBe('string');\n      expect(typeof space.isReservable).toBe('boolean');\n    });\n\n    test('should have valid event data structure', () => {\n      const { events } = mockCalendarData;\n\n      expect(events).toHaveLength(2);\n\n      events.forEach((event) => {\n        expect(event).toHaveProperty('id');\n        expect(event).toHaveProperty('startTime');\n        expect(event).toHaveProperty('endTime');\n        expect(event).toHaveProperty('status');\n        expect(event).toHaveProperty('userName');\n        expect(event).toHaveProperty('isOwnBooking');\n\n        expect(typeof event.id).toBe('string');\n        expect(typeof event.startTime).toBe('string');\n        expect(typeof event.endTime).toBe('string');\n        expect(typeof event.status).toBe('string');\n        expect(typeof event.userName).toBe('string');\n        expect(typeof event.isOwnBooking).toBe('boolean');\n      });\n    });\n\n    test('should validate event time consistency', () => {\n      const { events } = mockCalendarData;\n\n      events.forEach((event) => {\n        const startTime = new Date(event.startTime);\n        const endTime = new Date(event.endTime);\n\n        expect(startTime).toBeInstanceOf(Date);\n        expect(endTime).toBeInstanceOf(Date);\n        expect(endTime.getTime()).toBeGreaterThan(startTime.getTime());\n        // Validate ISO string format (allowing for milliseconds)\n        expect(event.startTime).toMatch(/^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(\\.\\d{3})?Z$/);\n        expect(event.endTime).toMatch(/^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(\\.\\d{3})?Z$/);\n      });\n    });\n  });\n\n  describe('Calendar Linking Features', () => {\n    test('should define calendar linking options structure', () => {\n      const linkingOptions = [\n        { id: 'common-space', name: 'Espaces communs', available: true },\n        { id: 'maintenance', name: 'Réparations/Maintenance', available: false },\n        { id: 'building-events', name: 'Événements du bâtiment', available: false },\n      ];\n\n      expect(linkingOptions).toHaveLength(3);\n\n      linkingOptions.forEach((option) => {\n        expect(option).toHaveProperty('id');\n        expect(option).toHaveProperty('name');\n        expect(option).toHaveProperty('available');\n\n        expect(typeof option.id).toBe('string');\n        expect(typeof option.name).toBe('string');\n        expect(typeof option.available).toBe('boolean');\n      });\n\n      // Only common-space should be available\n      expect(linkingOptions[0].available).toBe(true);\n      expect(linkingOptions[1].available).toBe(false);\n      expect(linkingOptions[2].available).toBe(false);\n    });\n\n    test('should handle calendar linking selection state', () => {\n      let selectedOption: string | null = null;\n      let isConfirmEnabled = false;\n\n      // Initially no selection\n      expect(selectedOption).toBe(null);\n      expect(isConfirmEnabled).toBe(false);\n\n      // Select common space option\n      selectedOption = 'common-space';\n      isConfirmEnabled = selectedOption !== null;\n\n      expect(selectedOption).toBe('common-space');\n      expect(isConfirmEnabled).toBe(true);\n\n      // Reset selection\n      selectedOption = null;\n      isConfirmEnabled = selectedOption !== null;\n\n      expect(selectedOption).toBe(null);\n      expect(isConfirmEnabled).toBe(false);\n    });\n\n    test('should provide configuration details for selected options', () => {\n      const configurationText = {\n        fr: {\n          title: 'Configuration des espaces communs',\n          description:\n            'Cette option synchronisera les réservations de \"Salle communautaire\" avec votre calendrier externe.',\n        },\n        en: {\n          title: 'Common spaces configuration',\n          description:\n            'This option will sync bookings for \"Salle communautaire\" with your external calendar.',\n        },\n      };\n\n      expect(configurationText.fr.title).toBe('Configuration des espaces communs');\n      expect(configurationText.en.title).toBe('Common spaces configuration');\n      expect(configurationText.fr.description).toContain('Salle communautaire');\n      expect(configurationText.en.description).toContain('Salle communautaire');\n    });\n  });\n\n  describe('Calendar Event Management', () => {\n    test('should distinguish between own and other bookings', () => {\n      const { events } = mockCalendarData;\n\n      const ownBookings = events.filter((event) => event.isOwnBooking);\n      const otherBookings = events.filter((event) => !event.isOwnBooking);\n\n      expect(ownBookings).toHaveLength(1);\n      expect(otherBookings).toHaveLength(1);\n\n      expect(ownBookings[0].userName).toBe('Sophie Martin'); // Real demo resident\n      expect(otherBookings[0].userName).toBe('Jean Dupuis'); // Real demo manager\n    });\n\n    test('should calculate event durations correctly', () => {\n      const { events } = mockCalendarData;\n\n      events.forEach((event) => {\n        const startTime = new Date(event.startTime);\n        const endTime = new Date(event.endTime);\n        const duration = endTime.getTime() - startTime.getTime();\n        const durationHours = duration / (60 * 60 * 1000);\n\n        expect(durationHours).toBe(2); // All test events are 2 hours\n        expect(duration).toBeGreaterThan(0);\n      });\n    });\n\n    test('should handle booking validation rules', () => {\n      const validateBooking = (booking: any) => {\n        const startTime = new Date(booking.startTime);\n        const endTime = new Date(booking.endTime);\n        const now = new Date();\n\n        return {\n          isValidTimeRange: endTime > startTime,\n          isInFuture: startTime > now,\n          hasRequiredFields: !!(\n            booking.spaceId &&\n            booking.userId &&\n            booking.startTime &&\n            booking.endTime\n          ),\n          isReasonableDuration: endTime.getTime() - startTime.getTime() <= 8 * 60 * 60 * 1000, // Max 8 hours\n        };\n      };\n\n      const validBooking = {\n        spaceId: '75c4f108-3ec1-437d-bdec-35d1f8e2a44d', // Real demo space ID\n        userId: DEMO_USERS.RESIDENT.id, // Real demo user ID\n        startTime: '2025-12-20T14:00:00Z',\n        endTime: '2025-12-20T16:00:00Z',\n      };\n\n      const validation = validateBooking(validBooking);\n\n      expect(validation.isValidTimeRange).toBe(true);\n      expect(validation.isInFuture).toBe(true);\n      expect(validation.hasRequiredFields).toBe(true);\n      expect(validation.isReasonableDuration).toBe(true);\n    });\n  });\n\n  describe('Calendar Export Features', () => {\n    test('should support different export formats', () => {\n      const exportFormats = {\n        ics: {\n          mimeType: 'text/calendar',\n          extension: '.ics',\n          description: 'Standard calendar format',\n        },\n        csv: {\n          mimeType: 'text/csv',\n          extension: '.csv',\n          description: 'Spreadsheet format',\n        },\n      };\n\n      expect(exportFormats.ics.mimeType).toBe('text/calendar');\n      expect(exportFormats.csv.extension).toBe('.csv');\n      expect(Object.keys(exportFormats)).toContain('ics');\n      expect(Object.keys(exportFormats)).toContain('csv');\n    });\n\n    test('should generate proper export data structure', () => {\n      const { space, events } = mockCalendarData;\n\n      const exportData = {\n        format: 'ics',\n        spaceName: space.name,\n        events: events,\n        filename: `${space.name.toLowerCase().replace(/\\s+/g, '-')}-calendar.ics`,\n        generatedAt: new Date().toISOString(),\n      };\n\n      expect(exportData.format).toBe('ics');\n      expect(exportData.spaceName).toBe('Salle communautaire');\n      expect(exportData.events).toHaveLength(2);\n      expect(exportData.filename).toBe('salle-communautaire-calendar.ics');\n      expect(typeof exportData.generatedAt).toBe('string');\n      expect(new Date(exportData.generatedAt)).toBeInstanceOf(Date);\n    });\n  });\n\n  describe('Calendar View Modes', () => {\n    test('should support different calendar view modes', () => {\n      const viewModes = ['space', 'user', 'building'];\n      const calendarTitles = {\n        space: 'Salle communautaire',\n        user: 'Mon Calendrier',\n        building: `${DEMO_BUILDING.name} - Calendrier`,\n      };\n\n      expect(viewModes).toContain('space');\n      expect(viewModes).toContain('user');\n      expect(viewModes).toContain('building');\n      expect(calendarTitles.space).toBe('Salle communautaire');\n      expect(calendarTitles.user).toBe('Mon Calendrier');\n      expect(calendarTitles.building).toContain(DEMO_BUILDING.name);\n    });\n\n    test('should handle calendar navigation controls', () => {\n      const navigationControls = {\n        prevMonth: 'prev-month',\n        nextMonth: 'next-month',\n        currentMonth: 'current-month',\n        viewSelector: ['month', 'week'],\n      };\n\n      expect(navigationControls.viewSelector).toContain('month');\n      expect(navigationControls.viewSelector).toContain('week');\n      expect(navigationControls.prevMonth).toBe('prev-month');\n      expect(navigationControls.nextMonth).toBe('next-month');\n      expect(navigationControls.currentMonth).toBe('current-month');\n    });\n\n    test('should manage calendar loading states', () => {\n      const loadingStates = ['loading', 'loaded', 'error'];\n      const testStates = {\n        loading: { isLoading: true, data: null, error: null },\n        loaded: { isLoading: false, data: mockCalendarData, error: null },\n        error: { isLoading: false, data: null, error: 'API Error' },\n      };\n\n      expect(loadingStates).toContain('loading');\n      expect(loadingStates).toContain('loaded');\n      expect(loadingStates).toContain('error');\n\n      expect(testStates.loading.isLoading).toBe(true);\n      expect(testStates.loaded.data).toBe(mockCalendarData);\n      expect(testStates.error.error).toBe('API Error');\n    });\n  });\n\n  describe('Calendar Internationalization', () => {\n    test('should support French and English translations', () => {\n      const translations = {\n        linkButton: { fr: 'Lier calendrier', en: 'Link calendar' },\n        exportButton: { fr: 'Exporter (.ics)', en: 'Export (.ics)' },\n        bookButton: { fr: 'Réserver', en: 'Book' },\n        cancelButton: { fr: 'Annuler', en: 'Cancel' },\n        confirmButton: { fr: 'Lier calendrier', en: 'Link calendar' },\n      };\n\n      expect(translations.linkButton.fr).toBe('Lier calendrier');\n      expect(translations.linkButton.en).toBe('Link calendar');\n      expect(translations.exportButton.fr).toBe('Exporter (.ics)');\n      expect(translations.bookButton.fr).toBe('Réserver');\n      expect(translations.cancelButton.fr).toBe('Annuler');\n      expect(translations.confirmButton.fr).toBe('Lier calendrier');\n    });\n\n    test('should support Quebec-specific calendar features', () => {\n      const quebecFeatures = {\n        language: 'fr',\n        dateFormat: 'DD/MM/YYYY',\n        timeFormat: '24h',\n        firstDayOfWeek: 'monday',\n        holidays: ['Fête nationale du Québec', \"Jour de l'An\", 'Fête du Canada'],\n      };\n\n      expect(quebecFeatures.language).toBe('fr');\n      expect(quebecFeatures.timeFormat).toBe('24h');\n      expect(quebecFeatures.firstDayOfWeek).toBe('monday');\n      expect(quebecFeatures.holidays).toContain('Fête nationale du Québec');\n      expect(quebecFeatures.holidays).toContain(\"Jour de l'An\");\n      expect(quebecFeatures.holidays).toContain('Fête du Canada');\n    });\n\n    test('should handle error messages in multiple languages', () => {\n      const errorMessages = {\n        fr: {\n          loadingError: 'Erreur lors du chargement du calendrier',\n          bookingError: 'Erreur lors de la réservation',\n          conflictError: 'Conflit de réservation détecté',\n        },\n        en: {\n          loadingError: 'Error loading calendar',\n          bookingError: 'Error creating booking',\n          conflictError: 'Booking conflict detected',\n        },\n      };\n\n      expect(errorMessages.fr.loadingError).toBe('Erreur lors du chargement du calendrier');\n      expect(errorMessages.en.loadingError).toBe('Error loading calendar');\n      expect(errorMessages.fr.conflictError).toBe('Conflit de réservation détecté');\n      expect(errorMessages.en.conflictError).toBe('Booking conflict detected');\n    });\n  });\n\n  describe('Calendar Performance and Optimization', () => {\n    test('should handle large event datasets efficiently', () => {\n      const largeEventSet = Array.from({ length: 100 }, (_, i) => ({\n        id: `event-${i}`,\n        startTime: `2024-12-${String((i % 30) + 1).padStart(2, '0')}T14:00:00Z`,\n        endTime: `2024-12-${String((i % 30) + 1).padStart(2, '0')}T16:00:00Z`,\n        status: 'confirmed',\n        userName: i % 2 === 0 ? DEMO_USERS.RESIDENT.name : DEMO_USERS.MANAGER.name,\n        userId: i % 2 === 0 ? DEMO_USERS.RESIDENT.id : DEMO_USERS.MANAGER.id,\n        isOwnBooking: i % 2 === 0,\n      }));\n\n      expect(largeEventSet).toHaveLength(100);\n      expect(largeEventSet[0].id).toBe('event-0');\n      expect(largeEventSet[99].id).toBe('event-99');\n\n      // Test performance characteristics\n      const uniqueUsers = [...new Set(largeEventSet.map((e) => e.userName))].length;\n      const totalEvents = largeEventSet.length;\n      const ownBookings = largeEventSet.filter((e) => e.isOwnBooking).length;\n\n      expect(uniqueUsers).toBe(2); // Sophie Martin and Jean Dupuis\n      expect(totalEvents).toBe(100);\n      expect(ownBookings).toBe(50);\n    });\n\n    test('should calculate calendar statistics efficiently', () => {\n      const { events } = mockCalendarData;\n\n      const statistics = {\n        totalBookings: events.length,\n        totalHours: events.reduce((total, event) => {\n          const duration = new Date(event.endTime).getTime() - new Date(event.startTime).getTime();\n          return total + duration / (60 * 60 * 1000);\n        }, 0),\n        uniqueUsers: [...new Set(events.map((e) => e.userName))].length,\n        ownBookings: events.filter((e) => e.isOwnBooking).length,\n        otherBookings: events.filter((e) => !e.isOwnBooking).length,\n      };\n\n      expect(statistics.totalBookings).toBe(2);\n      expect(statistics.totalHours).toBe(4);\n      expect(statistics.uniqueUsers).toBe(2); // Sophie Martin + Jean Dupuis\n      expect(statistics.ownBookings).toBe(1);\n      expect(statistics.otherBookings).toBe(1);\n    });\n  });\n\n  describe('Calendar Accessibility and Test IDs', () => {\n    test('should define proper test IDs for calendar components', () => {\n      const testIds = {\n        calendar: ['calendar-view', 'calendar-loading', 'calendar-error'],\n        navigation: ['prev-month', 'next-month', 'current-month'],\n        events: ['calendar-event-event-1', 'calendar-event-event-2'],\n        days: ['calendar-day-2024-12-15', 'calendar-day-2024-12-16'],\n        buttons: [\n          'button-link-calendar',\n          'button-export-space-calendar',\n          'button-new-booking-inline',\n          'button-confirm-link',\n          'button-cancel-link',\n        ],\n        dialog: [\n          'option-common-space-calendar',\n          'option-maintenance-calendar',\n          'option-building-events-calendar',\n        ],\n      };\n\n      expect(testIds.calendar).toContain('calendar-view');\n      expect(testIds.navigation).toContain('prev-month');\n      expect(testIds.events).toContain('calendar-event-event-1');\n      expect(testIds.days).toContain('calendar-day-2024-12-15');\n      expect(testIds.buttons).toContain('button-link-calendar');\n      expect(testIds.dialog).toContain('option-common-space-calendar');\n\n      // Ensure all arrays have expected lengths\n      expect(testIds.calendar.length).toBeGreaterThan(0);\n      expect(testIds.navigation.length).toBeGreaterThan(0);\n      expect(testIds.events.length).toBeGreaterThan(0);\n      expect(testIds.buttons.length).toBeGreaterThan(0);\n    });\n\n    test('should provide accessibility features', () => {\n      const accessibilityFeatures = {\n        ariaLabels: ['Calendar view', 'Previous month', 'Next month', 'Current month view'],\n        legend: ['Mes réservations', 'Déjà réservé'],\n        roles: ['button', 'dialog', 'grid', 'gridcell'],\n      };\n\n      expect(accessibilityFeatures.ariaLabels).toContain('Calendar view');\n      expect(accessibilityFeatures.legend).toContain('Mes réservations');\n      expect(accessibilityFeatures.roles).toContain('button');\n      expect(accessibilityFeatures.roles).toContain('dialog');\n    });\n  });\n\n  describe('Calendar Integration Points', () => {\n    test('should integrate with booking system correctly', () => {\n      const bookingIntegration = {\n        createBooking: (spaceId: string, userId: string, startTime: string, endTime: string) => ({\n          id: 'new-booking-id',\n          spaceId,\n          userId,\n          startTime,\n          endTime,\n          status: 'confirmed',\n          createdAt: new Date().toISOString(),\n        }),\n        validateBooking: (booking: any) => {\n          return {\n            isValid: !!(\n              booking.startTime < booking.endTime &&\n              new Date(booking.startTime) > new Date() &&\n              booking.spaceId &&\n              booking.userId\n            ),\n            errors: [],\n          };\n        },\n        checkConflicts: (\n          spaceId: string,\n          startTime: string,\n          endTime: string,\n          existingBookings: any[]\n        ) => {\n          return existingBookings.some(\n            (booking) =>\n              booking.spaceId === spaceId &&\n              ((new Date(startTime) >= new Date(booking.startTime) &&\n                new Date(startTime) < new Date(booking.endTime)) ||\n                (new Date(endTime) > new Date(booking.startTime) &&\n                  new Date(endTime) <= new Date(booking.endTime)) ||\n                (new Date(startTime) <= new Date(booking.startTime) &&\n                  new Date(endTime) >= new Date(booking.endTime)))\n          );\n        },\n      };\n\n      const testBooking = bookingIntegration.createBooking(\n        '75c4f108-3ec1-437d-bdec-35d1f8e2a44d', // Real demo space ID\n        DEMO_USERS.RESIDENT.id, // Real demo user ID\n        '2025-12-25T14:00:00Z',\n        '2025-12-25T16:00:00Z'\n      );\n\n      expect(testBooking.status).toBe('confirmed');\n      expect(testBooking.id).toBe('new-booking-id');\n      expect(typeof testBooking.createdAt).toBe('string');\n\n      const validation = bookingIntegration.validateBooking(testBooking);\n      expect(validation.isValid).toBe(true);\n\n      const hasConflict = bookingIntegration.checkConflicts(\n        '75c4f108-3ec1-437d-bdec-35d1f8e2a44d', // Real demo space ID\n        '2025-12-25T15:00:00Z',\n        '2025-12-25T17:00:00Z',\n        [testBooking]\n      );\n      expect(hasConflict).toBe(true);\n    });\n\n    test('should support calendar synchronization features', () => {\n      const syncFeatures = {\n        exportToExternal: (events: any[], format: string) => {\n          if (format === 'ics') {\n            const icsContent = [\n              'BEGIN:VCALENDAR',\n              'VERSION:2.0',\n              'PRODID:-//Koveo Gestion//Calendar Export//FR',\n            ];\n\n            events.forEach((event) => {\n              icsContent.push(\n                'BEGIN:VEVENT',\n                `UID:${event.id}@koveo.ca`,\n                `DTSTART:${event.startTime.replace(/[-:]/g, '').split('.')[0]}Z`,\n                `DTEND:${event.endTime.replace(/[-:]/g, '').split('.')[0]}Z`,\n                `SUMMARY:Réservation - ${event.userName}`,\n                'END:VEVENT'\n              );\n            });\n\n            icsContent.push('END:VCALENDAR');\n            return icsContent.join('\\r\\n');\n          }\n          return null;\n        },\n        linkCalendar: (spaceId: string, calendarType: string) => {\n          return {\n            success: calendarType === 'common-space',\n            message:\n              calendarType === 'common-space'\n                ? 'Calendar linked successfully'\n                : 'Feature not yet available',\n            linkId: calendarType === 'common-space' ? `link-${spaceId}-${Date.now()}` : null,\n          };\n        },\n      };\n\n      const icsExport = syncFeatures.exportToExternal(mockCalendarData.events, 'ics');\n      expect(icsExport).toContain('BEGIN:VCALENDAR');\n      expect(icsExport).toContain('BEGIN:VEVENT');\n      expect(icsExport).toContain(DEMO_USERS.RESIDENT.name); // Sophie Martin\n\n      const linkResult = syncFeatures.linkCalendar(\n        '75c4f108-3ec1-437d-bdec-35d1f8e2a44d',\n        'common-space'\n      );\n      expect(linkResult.success).toBe(true);\n      expect(linkResult.linkId).toContain('link-75c4f108-3ec1-437d-bdec-35d1f8e2a44d');\n\n      const futureFeatureResult = syncFeatures.linkCalendar(\n        '75c4f108-3ec1-437d-bdec-35d1f8e2a44d',\n        'maintenance'\n      );\n      expect(futureFeatureResult.success).toBe(false);\n      expect(futureFeatureResult.message).toBe('Feature not yet available');\n    });\n  });\n});\n"],"version":3}