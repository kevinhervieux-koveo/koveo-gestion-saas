9f10df69170e6cb4e946f4dca526a2c1
"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
const jsx_runtime_1 = require("react/jsx-runtime");
const react_1 = require("react");
const header_1 = require("@/components/layout/header");
const card_1 = require("@/components/ui/card");
const badge_1 = require("@/components/ui/badge");
const button_1 = require("@/components/ui/button");
const select_1 = require("@/components/ui/select");
const label_1 = require("@/components/ui/label");
const dialog_1 = require("@/components/ui/dialog");
const checkbox_1 = require("@/components/ui/checkbox");
const popover_1 = require("@/components/ui/popover");
const lucide_react_1 = require("lucide-react");
const ModularBillForm_1 = __importDefault(require("@/components/bill-management/ModularBillForm"));
const react_query_1 = require("@tanstack/react-query");
const utils_1 = require("@/lib/utils");
const use_language_1 = require("@/hooks/use-language");
const withHierarchicalSelection_1 = require("@/components/hoc/withHierarchicalSelection");
const wouter_1 = require("wouter");
const BILL_CATEGORIES = [
    'insurance',
    'maintenance',
    'salary',
    'utilities',
    'cleaning',
    'security',
    'landscaping',
    'professional_services',
    'administration',
    'repairs',
    'supplies',
    'taxes',
    'other',
];
const MONTHS = [
    { value: '1', label: 'January' },
    { value: '2', label: 'February' },
    { value: '3', label: 'March' },
    { value: '4', label: 'April' },
    { value: '5', label: 'May' },
    { value: '6', label: 'June' },
    { value: '7', label: 'July' },
    { value: '8', label: 'August' },
    { value: '9', label: 'September' },
    { value: '10', label: 'October' },
    { value: '11', label: 'November' },
    { value: '12', label: 'December' },
];
// Category labels using translation keys
const getCategoryLabel = (category, t) => {
    const categoryTranslationKeys = {
        insurance: 'insurance',
        maintenance: 'maintenance',
        salary: 'salary',
        utilities: 'utilities',
        cleaning: 'cleaning',
        security: 'security',
        landscaping: 'landscaping',
        professional_services: 'professionalServices',
        administration: 'administration',
        repairs: 'repairs',
        supplies: 'supplies',
        taxes: 'taxes',
        other: 'other'
    };
    return t(categoryTranslationKeys[category] || category);
};
/**
 * Bills management component
 */
function BillsPage({ buildingId, organizationId }) {
    const { t } = (0, use_language_1.useLanguage)();
    const [, navigate] = (0, wouter_1.useLocation)();
    const handleBackToBuilding = () => {
        // Navigate back to building selection, removing buildingId from URL
        if (organizationId) {
            navigate(`/manager/bills?organization=${organizationId}`);
        }
        else {
            navigate('/manager/bills');
        }
    };
    const [filters, setFilters] = (0, react_1.useState)({
        category: '',
        year: new Date().getFullYear().toString(),
        months: [],
    });
    const [showCreateDialog, setShowCreateDialog] = (0, react_1.useState)(false);
    const [showAllYears, setShowAllYears] = (0, react_1.useState)(false);
    const queryClient = (0, react_query_1.useQueryClient)();
    // Fetch bills based on filters
    const { data: bills = [], isLoading } = (0, react_query_1.useQuery)({
        queryKey: ['/api/bills', buildingId, filters],
        queryFn: async () => {
            const params = new URLSearchParams(); /**
             * If function.
             * @param filters.buildingId - Filters.buildingId parameter.
             */ /**
            * If function.
            * @param filters.buildingId - Filters.buildingId parameter.
            */
            if (buildingId) {
                params.set('buildingId', buildingId);
            } /**
             * If function.
             * @param filters.category && filters.category !== 'all' - filters.category && filters.category !== 'all' parameter.
             */ /**
            * If function.
            * @param filters.category && filters.category !== 'all' - filters.category && filters.category !== 'all' parameter.
            */
            if (filters.category && filters.category !== 'all') {
                params.set('category', filters.category);
            } /**
             * If function.
             * @param filters.year - Filters.year parameter.
             */ /**
            * If function.
            * @param filters.year - Filters.year parameter.
            */
            if (filters.year) {
                params.set('year', filters.year);
            } /**
             * If function.
             * @param filters.months.length > 0 - filters.months.length > 0 parameter.
             */ /**
            * If function.
            * @param filters.months.length > 0 - filters.months.length > 0 parameter.
            */
            if (filters.months.length > 0) {
                params.set('months', filters.months.join(','));
            }
            const url = `/api/bills${params.toString() ? '?' + params.toString() : ''}`;
            const response = await fetch(url, { credentials: 'include' }); /**
             * If function.
             * @param !response.ok - !response.ok parameter.
             */
            /**
             * If function.
             * @param !response.ok - !response.ok parameter.
             */
            /**
             * If function.
             * @param !response.ok - !response.ok parameter.
             */
            /**
             * If function.
             * @param !response.ok - !response.ok parameter.
             */ /**
            * If function.
            * @param !response.ok - !response.ok parameter.
            */
            /**
             * If function.
             * @param !response.ok - !response.ok parameter.
             */
            /**
             * If function.
             * @param !response.ok - !response.ok parameter.
             */
            /**
             * If function.
             * @param !response.ok - !response.ok parameter.
             */
            if (!response.ok) {
                throw new Error(`Failed to fetch bills: ${response.statusText}`);
            }
            return response.json();
        },
        enabled: !!buildingId, // Only fetch when buildingId is available
    });
    // Group bills by category
    const billsByCategory = bills.reduce((acc, bill) => {
        const category = bill.category || 'other'; /**
         * If function.
         * @param !acc[category] - !acc[category] parameter.
         */ /**
        * If function.
        * @param !acc[category] - !acc[category] parameter.
        */
        if (!acc[category]) {
            acc[category] = [];
        }
        acc[category].push(bill);
        return acc;
    }, {});
    const handleFilterChange = (key, value) => {
        setFilters((prev) => ({ ...prev, [key]: value }));
    };
    const handleMonthToggle = (monthValue) => {
        setFilters((prev) => ({
            ...prev,
            months: prev.months.includes(monthValue)
                ? prev.months.filter((m) => m !== monthValue)
                : [...prev.months, monthValue],
        }));
    };
    const handleAllMonthsToggle = () => {
        const allMonthValues = MONTHS.map((m) => m.value);
        setFilters((prev) => ({
            ...prev,
            months: prev.months.length === allMonthValues.length ? [] : allMonthValues,
        }));
    };
    const getMonthsDisplayText = () => {
        /**
         * If function.
         * @param filters.months.length === 0 - filters.months.length === 0 parameter.
         */ /**
        * If function.
        * @param filters.months.length === 0 - filters.months.length === 0 parameter.
        */
        if (filters.months.length === 0) {
            return 'All months';
        } /**
         * If function.
         * @param filters.months.length === MONTHS.length - filters.months.length === MONTHS.length parameter.
         */ /**
        * If function.
        * @param filters.months.length === MONTHS.length - filters.months.length === MONTHS.length parameter.
        */
        if (filters.months.length === MONTHS.length) {
            return 'All months';
        } /**
         * If function.
         * @param filters.months.length === 1 - filters.months.length === 1 parameter.
         */ /**
        * If function.
        * @param filters.months.length === 1 - filters.months.length === 1 parameter.
        */
        if (filters.months.length === 1) {
            const month = MONTHS.find((m) => m.value === filters.months[0]);
            return month?.label || 'All months';
        }
        return `${filters.months.length} months`;
    };
    // Get current year for year calculation
    const currentYear = new Date().getFullYear();
    // Generate year options based on show all years state
    const getYearOptions = () => {
        /**
         * If function.
         * @param showAllYears - ShowAllYears parameter.
         */ /**
        * If function.
        * @param showAllYears - ShowAllYears parameter.
        */
        if (showAllYears) {
            // Show years from 2000 to 25 years forward
            const startYear = 2000;
            const endYear = currentYear + 25;
            const totalYears = endYear - startYear + 1;
            return Array.from({ length: totalYears }, (_, i) => startYear + i);
        }
        else {
            // Show current year Â±3 years
            const startYear = currentYear - 3;
            const endYear = currentYear + 3;
            const totalYears = endYear - startYear + 1;
            return Array.from({ length: totalYears }, (_, i) => startYear + i);
        }
    };
    return ((0, jsx_runtime_1.jsxs)("div", { className: 'flex-1 flex flex-col overflow-hidden', children: [(0, jsx_runtime_1.jsx)(header_1.Header, { title: t('billsManagement'), subtitle: t('billsSubtitle') }), buildingId && ((0, jsx_runtime_1.jsx)("div", { className: "p-4 border-b border-gray-200", children: (0, jsx_runtime_1.jsxs)(button_1.Button, { variant: "outline", onClick: handleBackToBuilding, className: "flex items-center gap-2", "data-testid": "button-back-to-building", children: [(0, jsx_runtime_1.jsx)(lucide_react_1.ArrowLeft, { className: "w-4 h-4" }), t('building')] }) })), (0, jsx_runtime_1.jsx)("div", { className: 'flex-1 overflow-auto p-6', children: (0, jsx_runtime_1.jsxs)("div", { className: 'max-w-7xl mx-auto space-y-6', children: [(0, jsx_runtime_1.jsxs)(card_1.Card, { children: [(0, jsx_runtime_1.jsx)(card_1.CardHeader, { children: (0, jsx_runtime_1.jsxs)(card_1.CardTitle, { className: 'flex items-center gap-2', children: [(0, jsx_runtime_1.jsx)(lucide_react_1.Filter, { className: 'w-5 h-5' }), t('filters')] }) }), (0, jsx_runtime_1.jsx)(card_1.CardContent, { children: (0, jsx_runtime_1.jsxs)("div", { className: 'grid grid-cols-1 md:grid-cols-4 gap-4', children: [(0, jsx_runtime_1.jsxs)("div", { className: 'space-y-2', children: [(0, jsx_runtime_1.jsxs)(label_1.Label, { htmlFor: 'category-filter', className: 'flex items-center gap-2', children: [(0, jsx_runtime_1.jsx)(lucide_react_1.Tag, { className: 'w-4 h-4' }), t('category')] }), (0, jsx_runtime_1.jsxs)(select_1.Select, { value: filters.category, onValueChange: (value) => handleFilterChange('category', value), children: [(0, jsx_runtime_1.jsx)(select_1.SelectTrigger, { id: 'category-filter', children: (0, jsx_runtime_1.jsx)(select_1.SelectValue, { placeholder: t('allCategories') }) }), (0, jsx_runtime_1.jsxs)(select_1.SelectContent, { children: [(0, jsx_runtime_1.jsx)(select_1.SelectItem, { value: 'all', children: t('allCategories') }), BILL_CATEGORIES.map((category) => ((0, jsx_runtime_1.jsx)(select_1.SelectItem, { value: category, children: getCategoryLabel(category, t) }, category)))] })] })] }), (0, jsx_runtime_1.jsxs)("div", { className: 'space-y-2', children: [(0, jsx_runtime_1.jsxs)(label_1.Label, { htmlFor: 'year-filter', className: 'flex items-center gap-2', children: [(0, jsx_runtime_1.jsx)(lucide_react_1.Calendar, { className: 'w-4 h-4' }), t('year')] }), (0, jsx_runtime_1.jsx)("div", { className: 'space-y-2', children: (0, jsx_runtime_1.jsxs)(select_1.Select, { value: filters.year, onValueChange: (value) => handleFilterChange('year', value), children: [(0, jsx_runtime_1.jsx)(select_1.SelectTrigger, { id: 'year-filter', children: (0, jsx_runtime_1.jsx)(select_1.SelectValue, {}) }), (0, jsx_runtime_1.jsxs)(select_1.SelectContent, { className: 'max-h-[300px] overflow-y-auto', children: [getYearOptions().map((year) => ((0, jsx_runtime_1.jsxs)(select_1.SelectItem, { value: year.toString(), children: [year, year === currentYear && ((0, jsx_runtime_1.jsx)("span", { className: 'ml-2 text-xs text-blue-500', children: "(Current)" }))] }, year))), !showAllYears && ((0, jsx_runtime_1.jsx)("div", { className: 'border-t border-gray-200 mt-2 pt-2', children: (0, jsx_runtime_1.jsxs)(button_1.Button, { variant: 'ghost', size: 'sm', className: 'w-full text-left justify-start text-xs', onClick: () => setShowAllYears(true), children: ["Show more years (2000 - ", currentYear + 25, ")"] }) })), showAllYears && ((0, jsx_runtime_1.jsx)("div", { className: 'border-t border-gray-200 mt-2 pt-2', children: (0, jsx_runtime_1.jsxs)(button_1.Button, { variant: 'ghost', size: 'sm', className: 'w-full text-left justify-start text-xs', onClick: () => setShowAllYears(false), children: ["Show fewer years (", currentYear - 3, " - ", currentYear + 3, ")"] }) }))] })] }) })] }), (0, jsx_runtime_1.jsxs)("div", { className: 'space-y-2', children: [(0, jsx_runtime_1.jsxs)(label_1.Label, { className: 'flex items-center gap-2', children: [(0, jsx_runtime_1.jsx)(lucide_react_1.Calendar, { className: 'w-4 h-4' }), t('months')] }), (0, jsx_runtime_1.jsxs)(popover_1.Popover, { children: [(0, jsx_runtime_1.jsx)(popover_1.PopoverTrigger, { asChild: true, children: (0, jsx_runtime_1.jsxs)(button_1.Button, { variant: 'outline', className: (0, utils_1.cn)('w-full justify-between', filters.months.length === 0 && 'text-muted-foreground'), children: [getMonthsDisplayText(), (0, jsx_runtime_1.jsx)(lucide_react_1.ChevronDown, { className: 'ml-2 h-4 w-4 shrink-0 opacity-50' })] }) }), (0, jsx_runtime_1.jsxs)(popover_1.PopoverContent, { className: 'w-64 p-0', align: 'start', children: [(0, jsx_runtime_1.jsx)("div", { className: 'border-b p-3', children: (0, jsx_runtime_1.jsxs)("div", { className: 'flex items-center space-x-2', children: [(0, jsx_runtime_1.jsx)(checkbox_1.Checkbox, { id: 'all-months', checked: filters.months.length === MONTHS.length, onCheckedChange: handleAllMonthsToggle }), (0, jsx_runtime_1.jsx)(label_1.Label, { htmlFor: 'all-months', className: 'text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70', children: "All Months" })] }) }), (0, jsx_runtime_1.jsx)("div", { className: 'grid grid-cols-2 gap-2 p-3', children: MONTHS.map((month) => ((0, jsx_runtime_1.jsxs)("div", { className: 'flex items-center space-x-2', children: [(0, jsx_runtime_1.jsx)(checkbox_1.Checkbox, { id: `month-${month.value}`, checked: filters.months.includes(month.value), onCheckedChange: () => handleMonthToggle(month.value) }), (0, jsx_runtime_1.jsx)(label_1.Label, { htmlFor: `month-${month.value}`, className: 'text-sm leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70', children: month.label })] }, month.value))) })] })] })] }), (0, jsx_runtime_1.jsxs)("div", { className: 'space-y-2', children: [(0, jsx_runtime_1.jsx)(label_1.Label, { className: 'invisible', children: "Actions" }), (0, jsx_runtime_1.jsxs)(dialog_1.Dialog, { open: showCreateDialog, onOpenChange: setShowCreateDialog, children: [(0, jsx_runtime_1.jsx)(dialog_1.DialogTrigger, { asChild: true, children: (0, jsx_runtime_1.jsx)(button_1.Button, { className: 'w-full', disabled: !buildingId, children: t('createBill') }) }), (0, jsx_runtime_1.jsxs)(dialog_1.DialogContent, { className: 'max-w-4xl max-h-[90vh] overflow-y-auto', children: [(0, jsx_runtime_1.jsx)(dialog_1.DialogHeader, { children: (0, jsx_runtime_1.jsx)(dialog_1.DialogTitle, { children: t('createNewBill') }) }), (0, jsx_runtime_1.jsx)(ModularBillForm_1.default, { mode: "create", buildingId: buildingId, onCancel: () => setShowCreateDialog(false), onSuccess: () => {
                                                                            setShowCreateDialog(false);
                                                                            queryClient.invalidateQueries({ queryKey: ['/api/bills'] });
                                                                        } })] })] })] })] }) })] }), isLoading ? ((0, jsx_runtime_1.jsx)(card_1.Card, { children: (0, jsx_runtime_1.jsxs)(card_1.CardContent, { className: 'p-8 text-center', children: [(0, jsx_runtime_1.jsx)("div", { className: 'animate-spin w-8 h-8 border-4 border-primary border-t-transparent rounded-full mx-auto mb-4' }), (0, jsx_runtime_1.jsx)("p", { className: 'text-gray-500', children: t('loadingBills') })] }) })) : Object.keys(billsByCategory).length === 0 ? ((0, jsx_runtime_1.jsx)(card_1.Card, { children: (0, jsx_runtime_1.jsxs)(card_1.CardContent, { className: 'p-8 text-center', children: [(0, jsx_runtime_1.jsx)("h3", { className: 'text-lg font-semibold text-gray-600 mb-2', children: t('noBillsFound') }), (0, jsx_runtime_1.jsx)("p", { className: 'text-gray-500 mb-4', children: "No bills found for the selected filters. Create your first bill to get started." }), (0, jsx_runtime_1.jsx)(button_1.Button, { onClick: () => setShowCreateDialog(true), children: "Create First Bill" })] }) })) : ((0, jsx_runtime_1.jsx)("div", { className: 'space-y-6', children: BILL_CATEGORIES.filter((category) => (!filters.category || filters.category === category) &&
                                billsByCategory[category]?.length > 0).map((category) => ((0, jsx_runtime_1.jsx)(BillCategorySection, { category: category, bills: billsByCategory[category] || [], onBillUpdate: () => queryClient.invalidateQueries({ queryKey: ['/api/bills'] }), t: t }, category))) }))] }) })] }));
}
// Component for displaying bills in a category
/**
 *
 * @param root0
 * @param root0.category
 * @param root0.bills
 * @param root0.onBillUpdate
 */
/**
 * BillCategorySection function.
 * @param root0
 * @param root0.category
 * @param root0.bills
 * @param root0.onBillUpdate
 * @returns Function result.
 */
function BillCategorySection({ category, bills, onBillUpdate, t, }) {
    return ((0, jsx_runtime_1.jsxs)(card_1.Card, { children: [(0, jsx_runtime_1.jsx)(card_1.CardHeader, { children: (0, jsx_runtime_1.jsx)(card_1.CardTitle, { className: 'flex items-center justify-between', children: (0, jsx_runtime_1.jsxs)("div", { className: 'flex items-center gap-2', children: [(0, jsx_runtime_1.jsx)(lucide_react_1.Tag, { className: 'w-5 h-5' }), getCategoryLabel(category, t), (0, jsx_runtime_1.jsx)(badge_1.Badge, { variant: 'secondary', children: bills.length })] }) }) }), (0, jsx_runtime_1.jsx)(card_1.CardContent, { children: (0, jsx_runtime_1.jsx)("div", { className: 'grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4', children: bills.map((bill) => ((0, jsx_runtime_1.jsx)(BillCard, { bill: bill, onUpdate: onBillUpdate }, bill.id))) }) })] }));
}
// Component for individual bill cards
/**
 *
 * @param root0
 * @param root0.bill
 * @param root0.onUpdate
 */
/**
 * BillCard function.
 * @param root0
 * @param root0.bill
 * @param root0.onUpdate
 * @returns Function result.
 */
function BillCard({ bill, onUpdate }) {
    const { t } = (0, use_language_1.useLanguage)();
    const [showDetailDialog, setShowDetailDialog] = (0, react_1.useState)(false);
    const [showEditDialog, setShowEditDialog] = (0, react_1.useState)(false);
    const statusColors = {
        draft: 'bg-gray-100 text-gray-800',
        sent: 'bg-blue-100 text-blue-800',
        overdue: 'bg-red-100 text-red-800',
        paid: 'bg-green-100 text-green-800',
        cancelled: 'bg-gray-100 text-gray-800',
    };
    return ((0, jsx_runtime_1.jsxs)(jsx_runtime_1.Fragment, { children: [(0, jsx_runtime_1.jsx)(card_1.Card, { className: 'hover:shadow-md transition-shadow cursor-pointer', onClick: () => setShowDetailDialog(true), children: (0, jsx_runtime_1.jsx)(card_1.CardContent, { className: 'p-4', children: (0, jsx_runtime_1.jsxs)("div", { className: 'space-y-3', children: [(0, jsx_runtime_1.jsxs)("div", { className: 'flex items-start justify-between', children: [(0, jsx_runtime_1.jsxs)("div", { children: [(0, jsx_runtime_1.jsx)("h4", { className: 'font-semibold text-sm', children: bill.title }), (0, jsx_runtime_1.jsxs)("p", { className: 'text-xs text-gray-500', children: ["#", bill.billNumber] })] }), (0, jsx_runtime_1.jsx)(badge_1.Badge, { className: statusColors[bill.status], children: bill.status })] }), bill.description && ((0, jsx_runtime_1.jsx)("p", { className: 'text-sm text-gray-600 line-clamp-2', children: bill.description })), (0, jsx_runtime_1.jsxs)("div", { className: 'flex items-center justify-between text-sm', children: [(0, jsx_runtime_1.jsxs)("span", { className: 'font-medium', children: ["$", Number(bill.totalAmount).toLocaleString()] }), (0, jsx_runtime_1.jsx)("span", { className: 'text-gray-500', children: bill.paymentType })] }), bill.vendor && (0, jsx_runtime_1.jsxs)("p", { className: 'text-xs text-gray-500', children: ["Vendor: ", bill.vendor] }), (0, jsx_runtime_1.jsxs)("div", { className: 'flex items-center gap-2 pt-2', children: [bill.filePath && ((0, jsx_runtime_1.jsxs)(badge_1.Badge, { variant: 'outline', className: 'text-xs', children: [(0, jsx_runtime_1.jsx)(lucide_react_1.FileText, { className: 'w-3 h-3 mr-1' }), "Document"] })), bill.isAiAnalyzed && ((0, jsx_runtime_1.jsx)(badge_1.Badge, { variant: 'outline', className: 'text-xs', children: "AI Analyzed" })), bill.notes?.includes('Auto-generated from:') && ((0, jsx_runtime_1.jsx)(badge_1.Badge, { variant: 'outline', className: 'text-xs', children: "Auto-Generated" }))] })] }) }) }), (0, jsx_runtime_1.jsx)(dialog_1.Dialog, { open: showDetailDialog, onOpenChange: setShowDetailDialog, children: (0, jsx_runtime_1.jsxs)(dialog_1.DialogContent, { className: 'max-w-2xl max-h-[95vh] overflow-y-auto', "aria-describedby": "bill-details-description", children: [(0, jsx_runtime_1.jsx)(dialog_1.DialogHeader, { children: (0, jsx_runtime_1.jsx)(dialog_1.DialogTitle, { children: "Bill Details" }) }), (0, jsx_runtime_1.jsx)(BillDetail, { bill: bill, onSuccess: () => {
                                setShowDetailDialog(false);
                                onUpdate();
                            }, onCancel: () => setShowDetailDialog(false), onEditBill: () => {
                                setShowDetailDialog(false);
                                setShowEditDialog(true);
                            } })] }) }), (0, jsx_runtime_1.jsx)(dialog_1.Dialog, { open: showEditDialog, onOpenChange: setShowEditDialog, children: (0, jsx_runtime_1.jsx)(dialog_1.DialogContent, { className: 'max-w-4xl max-h-[95vh] overflow-y-auto', "aria-describedby": "edit-bill-description", children: (0, jsx_runtime_1.jsx)(ModularBillForm_1.default, { mode: "edit", bill: bill, onSuccess: () => {
                            setShowEditDialog(false);
                            onUpdate();
                        }, onCancel: () => setShowEditDialog(false), buildingId: bill.buildingId }) }) })] }));
}
// Bill detail component
function BillDetail({ bill, onSuccess, onCancel, onEditBill, }) {
    const queryClient = (0, react_query_1.useQueryClient)();
    // Fetch fresh bill data to ensure we have updated document information
    const { data: freshBill, error: freshBillError, isLoading: freshBillLoading } = (0, react_query_1.useQuery)({
        queryKey: ['/api/bills', bill.id],
        queryFn: async () => {
            const response = await fetch(`/api/bills/${bill.id}`, {
                credentials: 'include',
            });
            if (!response.ok) {
                throw new Error('Failed to fetch bill details');
            }
            return response.json();
        },
    });
    // Fetch documents attached to this bill
    const { data: billDocuments = [], isLoading: documentsLoading } = (0, react_query_1.useQuery)({
        queryKey: ['/api/documents', 'bill', bill.id],
        queryFn: async () => {
            const response = await fetch(`/api/documents?attachedToType=bill&attachedToId=${bill.id}`, {
                credentials: 'include',
            });
            if (!response.ok) {
                console.error('[BILL DOCS] Failed to fetch documents:', response.status, response.statusText);
                throw new Error('Failed to fetch bill documents');
            }
            const data = await response.json();
            return data.documents || [];
        },
    });
    // Use fresh bill data if available, fallback to props bill data
    const currentBill = freshBill || bill;
    // Keep basic logging for bills
    if (billDocuments.length > 0) {
        console.log('[BILL DOCS] Found documents:', billDocuments.length, 'for bill:', currentBill.billNumber);
    }
    const updateBillMutation = (0, react_query_1.useMutation)({
        mutationFn: async (updates) => {
            const response = await fetch(`/api/bills/${bill.id}`, {
                method: 'PATCH',
                headers: {
                    'Content-Type': 'application/json',
                },
                credentials: 'include',
                body: JSON.stringify(updates),
            });
            if (!response.ok) {
                throw new Error('Failed to update bill');
            }
            return response.json();
        },
        onSuccess: () => {
            queryClient.invalidateQueries({ queryKey: ['/api/bills'] });
            onSuccess();
        },
    });
    return ((0, jsx_runtime_1.jsxs)("div", { className: 'space-y-6', children: [(0, jsx_runtime_1.jsxs)("div", { className: 'grid grid-cols-2 gap-4', children: [(0, jsx_runtime_1.jsxs)("div", { children: [(0, jsx_runtime_1.jsx)(label_1.Label, { className: 'text-sm font-medium', children: "Bill Number" }), (0, jsx_runtime_1.jsx)("p", { className: 'text-sm text-gray-600', children: currentBill.billNumber })] }), (0, jsx_runtime_1.jsxs)("div", { children: [(0, jsx_runtime_1.jsx)(label_1.Label, { className: 'text-sm font-medium', children: "Status" }), (0, jsx_runtime_1.jsx)("p", { className: 'text-sm text-gray-600 capitalize', children: currentBill.status })] }), (0, jsx_runtime_1.jsxs)("div", { children: [(0, jsx_runtime_1.jsx)(label_1.Label, { className: 'text-sm font-medium', children: "Category" }), (0, jsx_runtime_1.jsx)("p", { className: 'text-sm text-gray-600 capitalize', children: currentBill.category })] }), (0, jsx_runtime_1.jsxs)("div", { children: [(0, jsx_runtime_1.jsx)(label_1.Label, { className: 'text-sm font-medium', children: "Payment Type" }), (0, jsx_runtime_1.jsx)("p", { className: 'text-sm text-gray-600 capitalize', children: currentBill.paymentType })] }), (0, jsx_runtime_1.jsxs)("div", { children: [(0, jsx_runtime_1.jsx)(label_1.Label, { className: 'text-sm font-medium', children: "Total Amount" }), (0, jsx_runtime_1.jsxs)("p", { className: 'text-sm text-gray-600', children: ["$", Number(currentBill.totalAmount).toLocaleString()] })] }), (0, jsx_runtime_1.jsxs)("div", { children: [(0, jsx_runtime_1.jsx)(label_1.Label, { className: 'text-sm font-medium', children: "Start Date" }), (0, jsx_runtime_1.jsx)("p", { className: 'text-sm text-gray-600', children: currentBill.startDate })] })] }), (0, jsx_runtime_1.jsxs)("div", { children: [(0, jsx_runtime_1.jsx)(label_1.Label, { className: 'text-sm font-medium', children: "Title" }), (0, jsx_runtime_1.jsx)("p", { className: 'text-sm text-gray-600', children: currentBill.title })] }), currentBill.description && ((0, jsx_runtime_1.jsxs)("div", { children: [(0, jsx_runtime_1.jsx)(label_1.Label, { className: 'text-sm font-medium', children: "Description" }), (0, jsx_runtime_1.jsx)("p", { className: 'text-sm text-gray-600', children: currentBill.description })] })), currentBill.vendor && ((0, jsx_runtime_1.jsxs)("div", { children: [(0, jsx_runtime_1.jsx)(label_1.Label, { className: 'text-sm font-medium', children: "Vendor" }), (0, jsx_runtime_1.jsx)("p", { className: 'text-sm text-gray-600', children: currentBill.vendor })] })), currentBill.notes && ((0, jsx_runtime_1.jsxs)("div", { children: [(0, jsx_runtime_1.jsx)(label_1.Label, { className: 'text-sm font-medium', children: "Notes" }), (0, jsx_runtime_1.jsx)("p", { className: 'text-sm text-gray-600', children: currentBill.notes })] })), currentBill.costs && currentBill.costs.length > 1 && ((0, jsx_runtime_1.jsxs)("div", { children: [(0, jsx_runtime_1.jsx)(label_1.Label, { className: 'text-sm font-medium', children: "Payment Breakdown" }), (0, jsx_runtime_1.jsx)("div", { className: 'space-y-1 mt-1', children: currentBill.costs.map((cost, index) => ((0, jsx_runtime_1.jsxs)("div", { className: 'flex justify-between text-sm', children: [(0, jsx_runtime_1.jsxs)("span", { children: ["Payment ", index + 1, ":"] }), (0, jsx_runtime_1.jsxs)("span", { children: ["$", Number(cost).toLocaleString()] })] }, index))) })] })), (currentBill.filePath || billDocuments.length > 0) && ((0, jsx_runtime_1.jsxs)("div", { className: 'border-t pt-4', children: [(0, jsx_runtime_1.jsx)(label_1.Label, { className: 'text-sm font-medium', children: "Uploaded Documents" }), (0, jsx_runtime_1.jsxs)("div", { className: 'mt-2 space-y-2', children: [currentBill.filePath && ((0, jsx_runtime_1.jsxs)("div", { className: 'flex items-center justify-between p-3 bg-gray-50 rounded-lg', children: [(0, jsx_runtime_1.jsxs)("div", { className: 'flex items-center gap-2', children: [(0, jsx_runtime_1.jsx)(lucide_react_1.FileText, { className: 'w-4 h-4 text-blue-600' }), (0, jsx_runtime_1.jsx)("span", { className: 'text-sm', children: currentBill.fileName }), currentBill.isAiAnalyzed && ((0, jsx_runtime_1.jsx)(badge_1.Badge, { variant: 'outline', className: 'text-xs', children: "AI Analyzed" }))] }), (0, jsx_runtime_1.jsxs)("div", { className: 'flex items-center gap-2', children: [(0, jsx_runtime_1.jsxs)(button_1.Button, { variant: 'outline', size: 'sm', onClick: () => {
                                                    // View the document (open in new tab)
                                                    window.open(`/api/bills/${currentBill.id}/download-document`, '_blank');
                                                }, className: 'flex items-center gap-1', "data-testid": `button-view-document-${currentBill.id}`, children: [(0, jsx_runtime_1.jsx)(lucide_react_1.FileText, { className: 'w-3 h-3' }), "View"] }), (0, jsx_runtime_1.jsxs)(button_1.Button, { variant: 'outline', size: 'sm', onClick: () => {
                                                    // Download the document
                                                    const link = document.createElement('a');
                                                    link.href = `/api/bills/${currentBill.id}/download-document`;
                                                    link.download = currentBill.fileName || 'bill-document';
                                                    document.body.appendChild(link);
                                                    link.click();
                                                    document.body.removeChild(link);
                                                }, className: 'flex items-center gap-1', "data-testid": `button-download-document-${currentBill.id}`, children: [(0, jsx_runtime_1.jsx)(lucide_react_1.FileText, { className: 'w-3 h-3' }), "Download"] })] })] })), billDocuments.map((doc) => ((0, jsx_runtime_1.jsxs)("div", { className: 'flex items-center justify-between p-3 bg-blue-50 rounded-lg', children: [(0, jsx_runtime_1.jsxs)("div", { className: 'flex items-center gap-2', children: [(0, jsx_runtime_1.jsx)(lucide_react_1.FileText, { className: 'w-4 h-4 text-blue-600' }), (0, jsx_runtime_1.jsx)("span", { className: 'text-sm', children: doc.name }), (0, jsx_runtime_1.jsx)(badge_1.Badge, { variant: 'outline', className: 'text-xs', children: doc.documentType || 'Document' })] }), (0, jsx_runtime_1.jsxs)("div", { className: 'flex items-center gap-2', children: [(0, jsx_runtime_1.jsxs)(button_1.Button, { variant: 'outline', size: 'sm', onClick: async () => {
                                                    try {
                                                        // Use fetch with credentials to ensure authentication
                                                        const response = await fetch(`/api/documents/${doc.id}/file`, {
                                                            method: 'GET',
                                                            credentials: 'include', // Include authentication cookies
                                                        });
                                                        if (!response.ok) {
                                                            throw new Error(`View failed: ${response.status} ${response.statusText}`);
                                                        }
                                                        // Convert response to blob and open in new tab
                                                        const blob = await response.blob();
                                                        const url = window.URL.createObjectURL(blob);
                                                        // Open in new tab
                                                        window.open(url, '_blank');
                                                        // Clean up the URL after a delay to allow the tab to load
                                                        setTimeout(() => {
                                                            window.URL.revokeObjectURL(url);
                                                        }, 1000);
                                                    }
                                                    catch (error) {
                                                        console.error('View failed:', error);
                                                    }
                                                }, className: 'flex items-center gap-1', "data-testid": `button-view-document-${doc.id}`, children: [(0, jsx_runtime_1.jsx)(lucide_react_1.FileText, { className: 'w-3 h-3' }), "View"] }), (0, jsx_runtime_1.jsxs)(button_1.Button, { variant: 'outline', size: 'sm', onClick: async () => {
                                                    try {
                                                        // Use fetch with credentials to ensure authentication
                                                        const response = await fetch(`/api/documents/${doc.id}/file?download=true`, {
                                                            method: 'GET',
                                                            credentials: 'include', // Include authentication cookies
                                                        });
                                                        if (!response.ok) {
                                                            throw new Error(`Download failed: ${response.status} ${response.statusText}`);
                                                        }
                                                        // Convert response to blob and create download
                                                        const blob = await response.blob();
                                                        const url = window.URL.createObjectURL(blob);
                                                        const link = document.createElement('a');
                                                        link.href = url;
                                                        link.download = doc.fileName || doc.name || 'document';
                                                        document.body.appendChild(link);
                                                        link.click();
                                                        // Clean up
                                                        document.body.removeChild(link);
                                                        window.URL.revokeObjectURL(url);
                                                    }
                                                    catch (error) {
                                                        console.error('Download failed:', error);
                                                    }
                                                }, className: 'flex items-center gap-1', "data-testid": `button-download-document-${doc.id}`, children: [(0, jsx_runtime_1.jsx)(lucide_react_1.FileText, { className: 'w-3 h-3' }), "Download"] })] })] }, doc.id)))] })] })), (0, jsx_runtime_1.jsxs)("div", { className: 'flex justify-between items-center pt-4 border-t', children: [(0, jsx_runtime_1.jsx)(button_1.Button, { onClick: onEditBill, className: 'flex items-center gap-1', "data-testid": `button-edit-bill-${bill.id}`, children: "Edit Bill" }), (0, jsx_runtime_1.jsx)(button_1.Button, { variant: 'outline', onClick: onCancel, "data-testid": `button-close-bill-modal-${bill.id}`, children: "Close" })] })] }));
}
// Export with hierarchical selection HOC - Manager buildings page uses 2-level hierarchy
exports.default = (0, withHierarchicalSelection_1.withHierarchicalSelection)(BillsPage, {
    hierarchy: ['organization', 'building']
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiL2hvbWUvcnVubmVyL3dvcmtzcGFjZS9jbGllbnQvc3JjL3BhZ2VzL21hbmFnZXIvYmlsbHMudHN4IiwibWFwcGluZ3MiOiI7Ozs7OztBQUFBLGlDQUE0QztBQUM1Qyx1REFBb0Q7QUFDcEQsK0NBQWdGO0FBQ2hGLGlEQUE4QztBQUM5QyxtREFBZ0Q7QUFDaEQsbURBTWdDO0FBRWhDLGlEQUE4QztBQUM5QyxtREFNZ0M7QUFFaEMsdURBQW9EO0FBQ3BELHFEQUFrRjtBQUNsRiwrQ0FTc0I7QUFDdEIsbUdBQTJFO0FBQzNFLHVEQUE4RTtBQUU5RSx1Q0FBaUM7QUFDakMsdURBQW1EO0FBQ25ELDBGQUF1RjtBQUN2RixtQ0FBcUM7QUFHckMsTUFBTSxlQUFlLEdBQUc7SUFDdEIsV0FBVztJQUNYLGFBQWE7SUFDYixRQUFRO0lBQ1IsV0FBVztJQUNYLFVBQVU7SUFDVixVQUFVO0lBQ1YsYUFBYTtJQUNiLHVCQUF1QjtJQUN2QixnQkFBZ0I7SUFDaEIsU0FBUztJQUNULFVBQVU7SUFDVixPQUFPO0lBQ1AsT0FBTztDQUNDLENBQUM7QUFFWCxNQUFNLE1BQU0sR0FBRztJQUNiLEVBQUUsS0FBSyxFQUFFLEdBQUcsRUFBRSxLQUFLLEVBQUUsU0FBUyxFQUFFO0lBQ2hDLEVBQUUsS0FBSyxFQUFFLEdBQUcsRUFBRSxLQUFLLEVBQUUsVUFBVSxFQUFFO0lBQ2pDLEVBQUUsS0FBSyxFQUFFLEdBQUcsRUFBRSxLQUFLLEVBQUUsT0FBTyxFQUFFO0lBQzlCLEVBQUUsS0FBSyxFQUFFLEdBQUcsRUFBRSxLQUFLLEVBQUUsT0FBTyxFQUFFO0lBQzlCLEVBQUUsS0FBSyxFQUFFLEdBQUcsRUFBRSxLQUFLLEVBQUUsS0FBSyxFQUFFO0lBQzVCLEVBQUUsS0FBSyxFQUFFLEdBQUcsRUFBRSxLQUFLLEVBQUUsTUFBTSxFQUFFO0lBQzdCLEVBQUUsS0FBSyxFQUFFLEdBQUcsRUFBRSxLQUFLLEVBQUUsTUFBTSxFQUFFO0lBQzdCLEVBQUUsS0FBSyxFQUFFLEdBQUcsRUFBRSxLQUFLLEVBQUUsUUFBUSxFQUFF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LHlCQUF5QixpQkFDdEIsNEJBQTRCLEdBQUcsQ0FBQyxFQUFFLEVBQUUsYUFFakQsdUJBQUMsdUJBQVEsSUFBQyxTQUFTLEVBQUMsU0FBUyxHQUFHLGdCQUV6QixJQUNMLEtBckZFLEdBQUcsQ0FBQyxFQUFFLENBc0ZWLENBQ1AsQ0FBQyxJQUNFLElBQ0YsQ0FDUCxFQUdELGlDQUFLLFNBQVMsRUFBQyxpREFBaUQsYUFDOUQsdUJBQUMsZUFBTSxJQUNMLE9BQU8sRUFBRSxVQUFVLEVBQ25CLFNBQVMsRUFBQyx5QkFBeUIsaUJBQ3RCLG9CQUFvQixJQUFJLENBQUMsRUFBRSxFQUFFLDBCQUduQyxFQUNULHVCQUFDLGVBQU0sSUFBQyxPQUFPLEVBQUMsU0FBUyxFQUFDLE9BQU8sRUFBRSxRQUFRLGlCQUFlLDJCQUEyQixJQUFJLENBQUMsRUFBRSxFQUFFLHNCQUVyRixJQUNMLElBQ0YsQ0FDUCxDQUFDO0FBQ0osQ0FBQztBQUVELHlGQUF5RjtBQUN6RixrQkFBZSxJQUFBLHFEQUF5QixFQUFDLFNBQVMsRUFBRTtJQUNsRCxTQUFTLEVBQUUsQ0FBQyxjQUFjLEVBQUUsVUFBVSxDQUFDO0NBQ3hDLENBQUMsQ0FBQyIsIm5hbWVzIjpbXSwic291cmNlcyI6WyIvaG9tZS9ydW5uZXIvd29ya3NwYWNlL2NsaWVudC9zcmMvcGFnZXMvbWFuYWdlci9iaWxscy50c3giXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgdXNlU3RhdGUsIHVzZUVmZmVjdCB9IGZyb20gJ3JlYWN0JztcbmltcG9ydCB7IEhlYWRlciB9IGZyb20gJ0AvY29tcG9uZW50cy9sYXlvdXQvaGVhZGVyJztcbmltcG9ydCB7IENhcmQsIENhcmRDb250ZW50LCBDYXJkSGVhZGVyLCBDYXJkVGl0bGUgfSBmcm9tICdAL2NvbXBvbmVudHMvdWkvY2FyZCc7XG5pbXBvcnQgeyBCYWRnZSB9IGZyb20gJ0AvY29tcG9uZW50cy91aS9iYWRnZSc7XG5pbXBvcnQgeyBCdXR0b24gfSBmcm9tICdAL2NvbXBvbmVudHMvdWkvYnV0dG9uJztcbmltcG9ydCB7XG4gIFNlbGVjdCxcbiAgU2VsZWN0Q29udGVudCxcbiAgU2VsZWN0SXRlbSxcbiAgU2VsZWN0VHJpZ2dlcixcbiAgU2VsZWN0VmFsdWUsXG59IGZyb20gJ0AvY29tcG9uZW50cy91aS9zZWxlY3QnO1xuaW1wb3J0IHsgSW5wdXQgfSBmcm9tICdAL2NvbXBvbmVudHMvdWkvaW5wdXQnO1xuaW1wb3J0IHsgTGFiZWwgfSBmcm9tICdAL2NvbXBvbmVudHMvdWkvbGFiZWwnO1xuaW1wb3J0IHtcbiAgRGlhbG9nLFxuICBEaWFsb2dDb250ZW50LFxuICBEaWFsb2dIZWFkZXIsXG4gIERpYWxvZ1RpdGxlLFxuICBEaWFsb2dUcmlnZ2VyLFxufSBmcm9tICdAL2NvbXBvbmVudHMvdWkvZGlhbG9nJztcbmltcG9ydCB7IFRhYnMsIFRhYnNDb250ZW50LCBUYWJzTGlzdCwgVGFic1RyaWdnZXIgfSBmcm9tICdAL2NvbXBvbmVudHMvdWkvdGFicyc7XG5pbXBvcnQgeyBDaGVja2JveCB9IGZyb20gJ0AvY29tcG9uZW50cy91aS9jaGVja2JveCc7XG5pbXBvcnQgeyBQb3BvdmVyLCBQb3BvdmVyQ29udGVudCwgUG9wb3ZlclRyaWdnZXIgfSBmcm9tICdAL2NvbXBvbmVudHMvdWkvcG9wb3Zlcic7XG5pbXBvcnQge1xuICBGaWxlVGV4dCxcbiAgUGx1cyxcbiAgVXBsb2FkLFxuICBGaWx0ZXIsXG4gIENhbGVuZGFyLFxuICBUYWcsXG4gIENoZXZyb25Eb3duLFxuICBBcnJvd0xlZnQsXG59IGZyb20gJ2x1Y2lkZS1yZWFjdCc7XG5pbXBvcnQgTW9kdWxhckJpbGxGb3JtIGZyb20gJ0AvY29tcG9uZW50cy9iaWxsLW1hbmFnZW1lbnQvTW9kdWxhckJpbGxGb3JtJztcbmltcG9ydCB7IHVzZVF1ZXJ5LCB1c2VNdXRhdGlvbiwgdXNlUXVlcnlDbGllbnQgfSBmcm9tICdAdGFuc3RhY2svcmVhY3QtcXVlcnknO1xuaW1wb3J0IHsgYXBpUmVxdWVzdCB9IGZyb20gJ0AvbGliL3F1ZXJ5Q2xpZW50JztcbmltcG9ydCB7IGNuIH0gZnJvbSAnQC9saWIvdXRpbHMnO1xuaW1wb3J0IHsgdXNlTGFuZ3VhZ2UgfSBmcm9tICdAL2hvb2tzL3VzZS1sYW5ndWFnZSc7XG5pbXBvcnQgeyB3aXRoSGllcmFyY2hpY2FsU2VsZWN0aW9uIH0gZnJvbSAnQC9jb21wb25lbnRzL2hvYy93aXRoSGllcmFyY2hpY2FsU2VsZWN0aW9uJztcbmltcG9ydCB7IHVzZUxvY2F0aW9uIH0gZnJvbSAnd291dGVyJztcbmltcG9ydCB0eXBlIHsgQmlsbCB9IGZyb20gJ0BzaGFyZWQvc2NoZW1hJztcblxuY29uc3QgQklMTF9DQVRFR09SSUVTID0gW1xuICAnaW5zdXJhbmNlJyxcbiAgJ21haW50ZW5hbmNlJyxcbiAgJ3NhbGFyeScsXG4gICd1dGlsaXRpZXMnLFxuICAnY2xlYW5pbmcnLFxuICAnc2VjdXJpdHknLFxuICAnbGFuZHNjYXBpbmcnLFxuICAncHJvZmVzc2lvbmFsX3NlcnZpY2VzJyxcbiAgJ2FkbWluaXN0cmF0aW9uJyxcbiAgJ3JlcGFpcnMnLFxuICAnc3VwcGxpZXMnLFxuICAndGF4ZXMnLFxuICAnb3RoZXInLFxuXSBhcyBjb25zdDtcblxuY29uc3QgTU9OVEhTID0gW1xuICB7IHZhbHVlOiAnMScsIGxhYmVsOiAnSmFudWFyeScgfSxcbiAgeyB2YWx1ZTogJzInLCBsYWJlbDogJ0ZlYnJ1YXJ5JyB9LFxuICB7IHZhbHVlOiAnMycsIGxhYmVsOiAnTWFyY2gnIH0sXG4gIHsgdmFsdWU6ICc0JywgbGFiZWw6ICdBcHJpbCcgfSxcbiAgeyB2YWx1ZTogJzUnLCBsYWJlbDogJ01heScgfSxcbiAgeyB2YWx1ZTogJzYnLCBsYWJlbDogJ0p1bmUnIH0sXG4gIHsgdmFsdWU6ICc3JywgbGFiZWw6ICdKdWx5JyB9LFxuICB7IHZhbHVlOiAnOCcsIGxhYmVsOiAnQXVndXN0JyB9LFxuICB7IHZhbHVlOiAnOScsIGxhYmVsOiAnU2VwdGVtYmVyJyB9LFxuICB7IHZhbHVlOiAnMTAnLCBsYWJlbDogJ09jdG9iZXInIH0sXG4gIHsgdmFsdWU6ICcxMScsIGxhYmVsOiAnTm92ZW1iZXInIH0sXG4gIHsgdmFsdWU6ICcxMicsIGxhYmVsOiAnRGVjZW1iZXInIH0sXG5dO1xuXG4vLyBDYXRlZ29yeSBsYWJlbHMgdXNpbmcgdHJhbnNsYXRpb24ga2V5c1xuY29uc3QgZ2V0Q2F0ZWdvcnlMYWJlbCA9IChjYXRlZ29yeTogc3RyaW5nLCB0OiAoa2V5OiBzdHJpbmcpID0+IHN0cmluZykgPT4ge1xuICBjb25zdCBjYXRlZ29yeVRyYW5zbGF0aW9uS2V5czogUmVjb3JkPHN0cmluZywgc3RyaW5nPiA9IHtcbiAgICBpbnN1cmFuY2U6ICdpbnN1cmFuY2UnLFxuICAgIG1haW50ZW5hbmNlOiAnbWFpbnRlbmFuY2UnLCBcbiAgICBzYWxhcnk6ICdzYWxhcnknLFxuICAgIHV0aWxpdGllczogJ3V0aWxpdGllcycsXG4gICAgY2xlYW5pbmc6ICdjbGVhbmluZycsXG4gICAgc2VjdXJpdHk6ICdzZWN1cml0eScsXG4gICAgbGFuZHNjYXBpbmc6ICdsYW5kc2NhcGluZycsXG4gICAgcHJvZmVzc2lvbmFsX3NlcnZpY2VzOiAncHJvZmVzc2lvbmFsU2VydmljZXMnLFxuICAgIGFkbWluaXN0cmF0aW9uOiAnYWRtaW5pc3RyYXRpb24nLFxuICAgIHJlcGFpcnM6ICdyZXBhaXJzJyxcbiAgICBzdXBwbGllczogJ3N1cHBsaWVzJyxcbiAgICB0YXhlczogJ3RheGVzJyxcbiAgICBvdGhlcjogJ290aGVyJ1xuICB9O1xuICByZXR1cm4gdChjYXRlZ29yeVRyYW5zbGF0aW9uS2V5c1tjYXRlZ29yeV0gfHwgY2F0ZWdvcnkpO1xufTtcblxuLyoqXG4gKiBGaWx0ZXJzIGZvciBiaWxscyAoZXhjbHVkaW5nIGJ1aWxkaW5nSWQgd2hpY2ggY29tZXMgZnJvbSBoaWVyYXJjaGljYWwgc2VsZWN0aW9uKVxuICovXG5pbnRlcmZhY2UgQmlsbEZpbHRlcnMge1xuICBjYXRlZ29yeTogc3RyaW5nO1xuICB5ZWFyOiBzdHJpbmc7XG4gIG1vbnRoczogc3RyaW5nW107XG59XG5cbi8qKlxuICogUHJvcHMgcmVjZWl2ZWQgZnJvbSB3aXRoSGllcmFyY2hpY2FsU2VsZWN0aW9uIEhPQ1xuICovXG5pbnRlcmZhY2UgQmlsbHNQcm9wcyB7XG4gIG9yZ2FuaXphdGlvbklkPzogc3RyaW5nO1xuICBidWlsZGluZ0lkPzogc3RyaW5nO1xufVxuXG4vKipcbiAqIEJpbGxzIG1hbmFnZW1lbnQgY29tcG9uZW50XG4gKi9cbmZ1bmN0aW9uIEJpbGxzUGFnZSh7IGJ1aWxkaW5nSWQsIG9yZ2FuaXphdGlvbklkIH06IEJpbGxzUHJvcHMpIHtcbiAgY29uc3QgeyB0IH0gPSB1c2VMYW5ndWFnZSgpO1xuICBjb25zdCBbLCBuYXZpZ2F0ZV0gPSB1c2VMb2NhdGlvbigpO1xuXG4gIGNvbnN0IGhhbmRsZUJhY2tUb0J1aWxkaW5nID0gKCkgPT4ge1xuICAgIC8vIE5hdmlnYXRlIGJhY2sgdG8gYnVpbGRpbmcgc2VsZWN0aW9uLCByZW1vdmluZyBidWlsZGluZ0lkIGZyb20gVVJMXG4gICAgaWYgKG9yZ2FuaXphdGlvbklkKSB7XG4gICAgICBuYXZpZ2F0ZShgL21hbmFnZXIvYmlsbHM/b3JnYW5pemF0aW9uPSR7b3JnYW5pemF0aW9uSWR9YCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIG5hdmlnYXRlKCcvbWFuYWdlci9iaWxscycpO1xuICAgIH1cbiAgfTtcbiAgY29uc3QgW2ZpbHRlcnMsIHNldEZpbHRlcnNdID0gdXNlU3RhdGU8QmlsbEZpbHRlcnM+KHtcbiAgICBjYXRlZ29yeTogJycsXG4gICAgeWVhcjogbmV3IERhdGUoKS5nZXRGdWxsWWVhcigpLnRvU3RyaW5nKCksXG4gICAgbW9udGhzOiBbXSxcbiAgfSk7XG4gIGNvbnN0IFtzaG93Q3JlYXRlRGlhbG9nLCBzZXRTaG93Q3JlYXRlRGlhbG9nXSA9IHVzZVN0YXRlKGZhbHNlKTtcbiAgY29uc3QgW3Nob3dBbGxZZWFycywgc2V0U2hvd0FsbFllYXJzXSA9IHVzZVN0YXRlKGZhbHNlKTtcbiAgY29uc3QgcXVlcnlDbGllbnQgPSB1c2VRdWVyeUNsaWVudCgpO1xuXG4gIC8vIEZldGNoIGJpbGxzIGJhc2VkIG9uIGZpbHRlcnNcbiAgY29uc3QgeyBkYXRhOiBiaWxscyA9IFtdLCBpc0xvYWRpbmcgfSA9IHVzZVF1ZXJ5PEJpbGxbXT4oe1xuICAgIHF1ZXJ5S2V5OiBbJy9hcGkvYmlsbHMnLCBidWlsZGluZ0lkLCBmaWx0ZXJzXSxcbiAgICBxdWVyeUZuOiBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBwYXJhbXMgPSBuZXcgVVJMU2VhcmNoUGFyYW1zKCk7IC8qKlxuICAgICAgICogSWYgZnVuY3Rpb24uXG4gICAgICAgKiBAcGFyYW0gZmlsdGVycy5idWlsZGluZ0lkIC0gRmlsdGVycy5idWlsZGluZ0lkIHBhcmFtZXRlci5cbiAgICAgICAqLyAvKipcbiAgICAgICAqIElmIGZ1bmN0aW9uLlxuICAgICAgICogQHBhcmFtIGZpbHRlcnMuYnVpbGRpbmdJZCAtIEZpbHRlcnMuYnVpbGRpbmdJZCBwYXJhbWV0ZXIuXG4gICAgICAgKi9cblxuICAgICAgaWYgKGJ1aWxkaW5nSWQpIHtcbiAgICAgICAgcGFyYW1zLnNldCgnYnVpbGRpbmdJZCcsIGJ1aWxkaW5nSWQpO1xuICAgICAgfSAvKipcbiAgICAgICAqIElmIGZ1bmN0aW9uLlxuICAgICAgICogQHBhcmFtIGZpbHRlcnMuY2F0ZWdvcnkgJiYgZmlsdGVycy5jYXRlZ29yeSAhPT0gJ2FsbCcgLSBmaWx0ZXJzLmNhdGVnb3J5ICYmIGZpbHRlcnMuY2F0ZWdvcnkgIT09ICdhbGwnIHBhcmFtZXRlci5cbiAgICAgICAqLyAvKipcbiAgICAgICAqIElmIGZ1bmN0aW9uLlxuICAgICAgICogQHBhcmFtIGZpbHRlcnMuY2F0ZWdvcnkgJiYgZmlsdGVycy5jYXRlZ29yeSAhPT0gJ2FsbCcgLSBmaWx0ZXJzLmNhdGVnb3J5ICYmIGZpbHRlcnMuY2F0ZWdvcnkgIT09ICdhbGwnIHBhcmFtZXRlci5cbiAgICAgICAqL1xuXG4gICAgICBpZiAoZmlsdGVycy5jYXRlZ29yeSAmJiBmaWx0ZXJzLmNhdGVnb3J5ICE9PSAnYWxsJykge1xuICAgICAgICBwYXJhbXMuc2V0KCdjYXRlZ29yeScsIGZpbHRlcnMuY2F0ZWdvcnkpO1xuICAgICAgfSAvKipcbiAgICAgICAqIElmIGZ1bmN0aW9uLlxuICAgICAgICogQHBhcmFtIGZpbHRlcnMueWVhciAtIEZpbHRlcnMueWVhciBwYXJhbWV0ZXIuXG4gICAgICAgKi8gLyoqXG4gICAgICAgKiBJZiBmdW5jdGlvbi5cbiAgICAgICAqIEBwYXJhbSBmaWx0ZXJzLnllYXIgLSBGaWx0ZXJzLnllYXIgcGFyYW1ldGVyLlxuICAgICAgICovXG5cbiAgICAgIGlmIChmaWx0ZXJzLnllYXIpIHtcbiAgICAgICAgcGFyYW1zLnNldCgneWVhcicsIGZpbHRlcnMueWVhcik7XG4gICAgICB9IC8qKlxuICAgICAgICogSWYgZnVuY3Rpb24uXG4gICAgICAgKiBAcGFyYW0gZmlsdGVycy5tb250aHMubGVuZ3RoID4gMCAtIGZpbHRlcnMubW9udGhzLmxlbmd0aCA+IDAgcGFyYW1ldGVyLlxuICAgICAgICovIC8qKlxuICAgICAgICogSWYgZnVuY3Rpb24uXG4gICAgICAgKiBAcGFyYW0gZmlsdGVycy5tb250aHMubGVuZ3RoID4gMCAtIGZpbHRlcnMubW9udGhzLmxlbmd0aCA+IDAgcGFyYW1ldGVyLlxuICAgICAgICovXG5cbiAgICAgIGlmIChmaWx0ZXJzLm1vbnRocy5sZW5ndGggPiAwKSB7XG4gICAgICAgIHBhcmFtcy5zZXQoJ21vbnRocycsIGZpbHRlcnMubW9udGhzLmpvaW4oJywnKSk7XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IHVybCA9IGAvYXBpL2JpbGxzJHtwYXJhbXMudG9TdHJpbmcoKSA/ICc/JyArIHBhcmFtcy50b1N0cmluZygpIDogJyd9YDtcbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2godXJsLCB7IGNyZWRlbnRpYWxzOiAnaW5jbHVkZScgfSk7IC8qKlxuICAgICAgICogSWYgZnVuY3Rpb24uXG4gICAgICAgKiBAcGFyYW0gIXJlc3BvbnNlLm9rIC0gIXJlc3BvbnNlLm9rIHBhcmFtZXRlci5cbiAgICAgICAqL1xuICAgICAgLyoqXG4gICAgICAgKiBJZiBmdW5jdGlvbi5cbiAgICAgICAqIEBwYXJhbSAhcmVzcG9uc2Uub2sgLSAhcmVzcG9uc2Uub2sgcGFyYW1ldGVyLlxuICAgICAgICovXG4gICAgICAvKipcbiAgICAgICAqIElmIGZ1bmN0aW9uLlxuICAgICAgICogQHBhcmFtICFyZXNwb25zZS5vayAtICFyZXNwb25zZS5vayBwYXJhbWV0ZXIuXG4gICAgICAgKi9cbiAgICAgIC8qKlxuICAgICAgICogSWYgZnVuY3Rpb24uXG4gICAgICAgKiBAcGFyYW0gIXJlc3BvbnNlLm9rIC0gIXJlc3BvbnNlLm9rIHBhcmFtZXRlci5cbiAgICAgICAqLyAvKipcbiAgICAgICAqIElmIGZ1bmN0aW9uLlxuICAgICAgICogQHBhcmFtICFyZXNwb25zZS5vayAtICFyZXNwb25zZS5vayBwYXJhbWV0ZXIuXG4gICAgICAgKi9cblxuICAgICAgLyoqXG4gICAgICAgKiBJZiBmdW5jdGlvbi5cbiAgICAgICAqIEBwYXJhbSAhcmVzcG9uc2Uub2sgLSAhcmVzcG9uc2Uub2sgcGFyYW1ldGVyLlxuICAgICAgICovXG4gICAgICAvKipcbiAgICAgICAqIElmIGZ1bmN0aW9uLlxuICAgICAgICogQHBhcmFtICFyZXNwb25zZS5vayAtICFyZXNwb25zZS5vayBwYXJhbWV0ZXIuXG4gICAgICAgKi9cbiAgICAgIC8qKlxuICAgICAgICogSWYgZnVuY3Rpb24uXG4gICAgICAgKiBAcGFyYW0gIXJlc3BvbnNlLm9rIC0gIXJlc3BvbnNlLm9rIHBhcmFtZXRlci5cbiAgICAgICAqL1xuXG4gICAgICBpZiAoIXJlc3BvbnNlLm9rKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihgRmFpbGVkIHRvIGZldGNoIGJpbGxzOiAke3Jlc3BvbnNlLnN0YXR1c1RleHR9YCk7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiByZXNwb25zZS5qc29uKCk7XG4gICAgfSxcbiAgICBlbmFibGVkOiAhIWJ1aWxkaW5nSWQsIC8vIE9ubHkgZmV0Y2ggd2hlbiBidWlsZGluZ0lkIGlzIGF2YWlsYWJsZVxuICB9KTtcblxuICAvLyBHcm91cCBiaWxscyBieSBjYXRlZ29yeVxuICBjb25zdCBiaWxsc0J5Q2F0ZWdvcnkgPSBiaWxscy5yZWR1Y2UoKGFjYzogUmVjb3JkPHN0cmluZywgQmlsbFtdPiwgYmlsbDogQmlsbCkgPT4ge1xuICAgIGNvbnN0IGNhdGVnb3J5ID0gYmlsbC5jYXRlZ29yeSB8fCAnb3RoZXInOyAvKipcbiAgICAgKiBJZiBmdW5jdGlvbi5cbiAgICAgKiBAcGFyYW0gIWFjY1tjYXRlZ29yeV0gLSAhYWNjW2NhdGVnb3J5XSBwYXJhbWV0ZXIuXG4gICAgICovIC8qKlxuICAgICAqIElmIGZ1bmN0aW9uLlxuICAgICAqIEBwYXJhbSAhYWNjW2NhdGVnb3J5XSAtICFhY2NbY2F0ZWdvcnldIHBhcmFtZXRlci5cbiAgICAgKi9cblxuICAgIGlmICghYWNjW2NhdGVnb3J5XSkge1xuICAgICAgYWNjW2NhdGVnb3J5XSA9IFtdO1xuICAgIH1cbiAgICBhY2NbY2F0ZWdvcnldLnB1c2goYmlsbCk7XG4gICAgcmV0dXJuIGFjYztcbiAgfSwge30pO1xuXG4gIGNvbnN0IGhhbmRsZUZpbHRlckNoYW5nZSA9IChrZXk6IGtleW9mIEJpbGxGaWx0ZXJzLCB2YWx1ZTogc3RyaW5nIHwgc3RyaW5nW10pID0+IHtcbiAgICBzZXRGaWx0ZXJzKChwcmV2KSA9PiAoeyAuLi5wcmV2LCBba2V5XTogdmFsdWUgfSkpO1xuICB9O1xuXG4gIGNvbnN0IGhhbmRsZU1vbnRoVG9nZ2xlID0gKG1vbnRoVmFsdWU6IHN0cmluZykgPT4ge1xuICAgIHNldEZpbHRlcnMoKHByZXYpID0+ICh7XG4gICAgICAuLi5wcmV2LFxuICAgICAgbW9udGhzOiBwcmV2Lm1vbnRocy5pbmNsdWRlcyhtb250aFZhbHVlKVxuICAgICAgICA/IHByZXYubW9udGhzLmZpbHRlcigobSkgPT4gbSAhPT0gbW9udGhWYWx1ZSlcbiAgICAgICAgOiBbLi4ucHJldi5tb250aHMsIG1vbnRoVmFsdWVdLFxuICAgIH0pKTtcbiAgfTtcblxuICBjb25zdCBoYW5kbGVBbGxNb250aHNUb2dnbGUgPSAoKSA9PiB7XG4gICAgY29uc3QgYWxsTW9udGhWYWx1ZXMgPSBNT05USFMubWFwKChtKSA9PiBtLnZhbHVlKTtcbiAgICBzZXRGaWx0ZXJzKChwcmV2KSA9PiAoe1xuICAgICAgLi4ucHJldixcbiAgICAgIG1vbnRoczogcHJldi5tb250aHMubGVuZ3RoID09PSBhbGxNb250aFZhbHVlcy5sZW5ndGggPyBbXSA6IGFsbE1vbnRoVmFsdWVzLFxuICAgIH0pKTtcbiAgfTtcblxuICBjb25zdCBnZXRNb250aHNEaXNwbGF5VGV4dCA9ICgpID0+IHtcbiAgICAvKipcbiAgICAgKiBJZiBmdW5jdGlvbi5cbiAgICAgKiBAcGFyYW0gZmlsdGVycy5tb250aHMubGVuZ3RoID09PSAwIC0gZmlsdGVycy5tb250aHMubGVuZ3RoID09PSAwIHBhcmFtZXRlci5cbiAgICAgKi8gLyoqXG4gICAgICogSWYgZnVuY3Rpb24uXG4gICAgICogQHBhcmFtIGZpbHRlcnMubW9udGhzLmxlbmd0aCA9PT0gMCAtIGZpbHRlcnMubW9udGhzLmxlbmd0aCA9PT0gMCBwYXJhbWV0ZXIuXG4gICAgICovXG5cbiAgICBpZiAoZmlsdGVycy5tb250aHMubGVuZ3RoID09PSAwKSB7XG4gICAgICByZXR1cm4gJ0FsbCBtb250aHMnO1xuICAgIH0gLyoqXG4gICAgICogSWYgZnVuY3Rpb24uXG4gICAgICogQHBhcmFtIGZpbHRlcnMubW9udGhzLmxlbmd0aCA9PT0gTU9OVEhTLmxlbmd0aCAtIGZpbHRlcnMubW9udGhzLmxlbmd0aCA9PT0gTU9OVEhTLmxlbmd0aCBwYXJhbWV0ZXIuXG4gICAgICovIC8qKlxuICAgICAqIElmIGZ1bmN0aW9uLlxuICAgICAqIEBwYXJhbSBmaWx0ZXJzLm1vbnRocy5sZW5ndGggPT09IE1PTlRIUy5sZW5ndGggLSBmaWx0ZXJzLm1vbnRocy5sZW5ndGggPT09IE1PTlRIUy5sZW5ndGggcGFyYW1ldGVyLlxuICAgICAqL1xuXG4gICAgaWYgKGZpbHRlcnMubW9udGhzLmxlbmd0aCA9PT0gTU9OVEhTLmxlbmd0aCkge1xuICAgICAgcmV0dXJuICdBbGwgbW9udGhzJztcbiAgICB9IC8qKlxuICAgICAqIElmIGZ1bmN0aW9uLlxuICAgICAqIEBwYXJhbSBmaWx0ZXJzLm1vbnRocy5sZW5ndGggPT09IDEgLSBmaWx0ZXJzLm1vbnRocy5sZW5ndGggPT09IDEgcGFyYW1ldGVyLlxuICAgICAqLyAvKipcbiAgICAgKiBJZiBmdW5jdGlvbi5cbiAgICAgKiBAcGFyYW0gZmlsdGVycy5tb250aHMubGVuZ3RoID09PSAxIC0gZmlsdGVycy5tb250aHMubGVuZ3RoID09PSAxIHBhcmFtZXRlci5cbiAgICAgKi9cblxuICAgIGlmIChmaWx0ZXJzLm1vbnRocy5sZW5ndGggPT09IDEpIHtcbiAgICAgIGNvbnN0IG1vbnRoID0gTU9OVEhTLmZpbmQoKG0pID0+IG0udmFsdWUgPT09IGZpbHRlcnMubW9udGhzWzBdKTtcbiAgICAgIHJldHVybiBtb250aD8ubGFiZWwgfHwgJ0FsbCBtb250aHMnO1xuICAgIH1cbiAgICByZXR1cm4gYCR7ZmlsdGVycy5tb250aHMubGVuZ3RofSBtb250aHNgO1xuICB9O1xuXG4gIC8vIEdldCBjdXJyZW50IHllYXIgZm9yIHllYXIgY2FsY3VsYXRpb25cbiAgY29uc3QgY3VycmVudFllYXIgPSBuZXcgRGF0ZSgpLmdldEZ1bGxZZWFyKCk7XG5cbiAgLy8gR2VuZXJhdGUgeWVhciBvcHRpb25zIGJhc2VkIG9uIHNob3cgYWxsIHllYXJzIHN0YXRlXG4gIGNvbnN0IGdldFllYXJPcHRpb25zID0gKCkgPT4ge1xuICAgIC8qKlxuICAgICAqIElmIGZ1bmN0aW9uLlxuICAgICAqIEBwYXJhbSBzaG93QWxsWWVhcnMgLSBTaG93QWxsWWVhcnMgcGFyYW1ldGVyLlxuICAgICAqLyAvKipcbiAgICAgKiBJZiBmdW5jdGlvbi5cbiAgICAgKiBAcGFyYW0gc2hvd0FsbFllYXJzIC0gU2hvd0FsbFllYXJzIHBhcmFtZXRlci5cbiAgICAgKi9cblxuICAgIGlmIChzaG93QWxsWWVhcnMpIHtcbiAgICAgIC8vIFNob3cgeWVhcnMgZnJvbSAyMDAwIHRvIDI1IHllYXJzIGZvcndhcmRcbiAgICAgIGNvbnN0IHN0YXJ0WWVhciA9IDIwMDA7XG4gICAgICBjb25zdCBlbmRZZWFyID0gY3VycmVudFllYXIgKyAyNTtcbiAgICAgIGNvbnN0IHRvdGFsWWVhcnMgPSBlbmRZZWFyIC0gc3RhcnRZZWFyICsgMTtcbiAgICAgIHJldHVybiBBcnJheS5mcm9tKHsgbGVuZ3RoOiB0b3RhbFllYXJzIH0sIChfLCBpKSA9PiBzdGFydFllYXIgKyBpKTtcbiAgICB9IGVsc2Uge1xuICAgICAgLy8gU2hvdyBjdXJyZW50IHllYXIgwrEzIHllYXJzXG4gICAgICBjb25zdCBzdGFydFllYXIgPSBjdXJyZW50WWVhciAtIDM7XG4gICAgICBjb25zdCBlbmRZZWFyID0gY3VycmVudFllYXIgKyAzO1xuICAgICAgY29uc3QgdG90YWxZZWFycyA9IGVuZFllYXIgLSBzdGFydFllYXIgKyAxO1xuICAgICAgcmV0dXJuIEFycmF5LmZyb20oeyBsZW5ndGg6IHRvdGFsWWVhcnMgfSwgKF8sIGkpID0+IHN0YXJ0WWVhciArIGkpO1xuICAgIH1cbiAgfTtcblxuXG4gIHJldHVybiAoXG4gICAgPGRpdiBjbGFzc05hbWU9J2ZsZXgtMSBmbGV4IGZsZXgtY29sIG92ZXJmbG93LWhpZGRlbic+XG4gICAgICA8SGVhZGVyIHRpdGxlPXt0KCdiaWxsc01hbmFnZW1lbnQnKX0gc3VidGl0bGU9e3QoJ2JpbGxzU3VidGl0bGUnKX0gLz5cbiAgICAgIFxuICAgICAgey8qIEJhY2sgdG8gQnVpbGRpbmcgTmF2aWdhdGlvbiAqL31cbiAgICAgIHtidWlsZGluZ0lkICYmIChcbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJwLTQgYm9yZGVyLWIgYm9yZGVyLWdyYXktMjAwXCI+XG4gICAgICAgICAgPEJ1dHRvblxuICAgICAgICAgICAgdmFyaWFudD1cIm91dGxpbmVcIlxuICAgICAgICAgICAgb25DbGljaz17aGFuZGxlQmFja1RvQnVpbGRpbmd9XG4gICAgICAgICAgICBjbGFzc05hbWU9XCJmbGV4IGl0ZW1zLWNlbnRlciBnYXAtMlwiXG4gICAgICAgICAgICBkYXRhLXRlc3RpZD1cImJ1dHRvbi1iYWNrLXRvLWJ1aWxkaW5nXCJcbiAgICAgICAgICA+XG4gICAgICAgICAgICA8QXJyb3dMZWZ0IGNsYXNzTmFtZT1cInctNCBoLTRcIiAvPlxuICAgICAgICAgICAge3QoJ2J1aWxkaW5nJyl9XG4gICAgICAgICAgPC9CdXR0b24+XG4gICAgICAgIDwvZGl2PlxuICAgICAgKX1cblxuICAgICAgPGRpdiBjbGFzc05hbWU9J2ZsZXgtMSBvdmVyZmxvdy1hdXRvIHAtNic+XG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPSdtYXgtdy03eGwgbXgtYXV0byBzcGFjZS15LTYnPlxuICAgICAgICAgIHsvKiBGaWx0ZXJzIFNlY3Rpb24gKi99XG4gICAgICAgICAgPENhcmQ+XG4gICAgICAgICAgICA8Q2FyZEhlYWRlcj5cbiAgICAgICAgICAgICAgPENhcmRUaXRsZSBjbGFzc05hbWU9J2ZsZXggaXRlbXMtY2VudGVyIGdhcC0yJz5cbiAgICAgICAgICAgICAgICA8RmlsdGVyIGNsYXNzTmFtZT0ndy01IGgtNScgLz5cbiAgICAgICAgICAgICAgICB7dCgnZmlsdGVycycpfVxuICAgICAgICAgICAgICA8L0NhcmRUaXRsZT5cbiAgICAgICAgICAgIDwvQ2FyZEhlYWRlcj5cbiAgICAgICAgICAgIDxDYXJkQ29udGVudD5cbiAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9J2dyaWQgZ3JpZC1jb2xzLTEgbWQ6Z3JpZC1jb2xzLTQgZ2FwLTQnPlxuXG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9J3NwYWNlLXktMic+XG4gICAgICAgICAgICAgICAgICA8TGFiZWwgaHRtbEZvcj0nY2F0ZWdvcnktZmlsdGVyJyBjbGFzc05hbWU9J2ZsZXggaXRlbXMtY2VudGVyIGdhcC0yJz5cbiAgICAgICAgICAgICAgICAgICAgPFRhZyBjbGFzc05hbWU9J3ctNCBoLTQnIC8+XG4gICAgICAgICAgICAgICAgICAgIHt0KCdjYXRlZ29yeScpfVxuICAgICAgICAgICAgICAgICAgPC9MYWJlbD5cbiAgICAgICAgICAgICAgICAgIDxTZWxlY3RcbiAgICAgICAgICAgICAgICAgICAgdmFsdWU9e2ZpbHRlcnMuY2F0ZWdvcnl9XG4gICAgICAgICAgICAgICAgICAgIG9uVmFsdWVDaGFuZ2U9eyh2YWx1ZSkgPT4gaGFuZGxlRmlsdGVyQ2hhbmdlKCdjYXRlZ29yeScsIHZhbHVlKX1cbiAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgPFNlbGVjdFRyaWdnZXIgaWQ9J2NhdGVnb3J5LWZpbHRlcic+XG4gICAgICAgICAgICAgICAgICAgICAgPFNlbGVjdFZhbHVlIHBsYWNlaG9sZGVyPXt0KCdhbGxDYXRlZ29yaWVzJyl9IC8+XG4gICAgICAgICAgICAgICAgICAgIDwvU2VsZWN0VHJpZ2dlcj5cbiAgICAgICAgICAgICAgICAgICAgPFNlbGVjdENvbnRlbnQ+XG4gICAgICAgICAgICAgICAgICAgICAgPFNlbGVjdEl0ZW0gdmFsdWU9J2FsbCc+e3QoJ2FsbENhdGVnb3JpZXMnKX08L1NlbGVjdEl0ZW0+XG4gICAgICAgICAgICAgICAgICAgICAge0JJTExfQ0FURUdPUklFUy5tYXAoKGNhdGVnb3J5KSA9PiAoXG4gICAgICAgICAgICAgICAgICAgICAgICA8U2VsZWN0SXRlbSBrZXk9e2NhdGVnb3J5fSB2YWx1ZT17Y2F0ZWdvcnl9PlxuICAgICAgICAgICAgICAgICAgICAgICAgICB7Z2V0Q2F0ZWdvcnlMYWJlbChjYXRlZ29yeSwgdCl9XG4gICAgICAgICAgICAgICAgICAgICAgICA8L1NlbGVjdEl0ZW0+XG4gICAgICAgICAgICAgICAgICAgICAgKSl9XG4gICAgICAgICAgICAgICAgICAgIDwvU2VsZWN0Q29udGVudD5cbiAgICAgICAgICAgICAgICAgIDwvU2VsZWN0PlxuICAgICAgICAgICAgICAgIDwvZGl2PlxuXG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9J3NwYWNlLXktMic+XG4gICAgICAgICAgICAgICAgICA8TGFiZWwgaHRtbEZvcj0neWVhci1maWx0ZXInIGNsYXNzTmFtZT0nZmxleCBpdGVtcy1jZW50ZXIgZ2FwLTInPlxuICAgICAgICAgICAgICAgICAgICA8Q2FsZW5kYXIgY2xhc3NOYW1lPSd3LTQgaC00JyAvPlxuICAgICAgICAgICAgICAgICAgICB7dCgneWVhcicpfVxuICAgICAgICAgICAgICAgICAgPC9MYWJlbD5cbiAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSdzcGFjZS15LTInPlxuICAgICAgICAgICAgICAgICAgICA8U2VsZWN0XG4gICAgICAgICAgICAgICAgICAgICAgdmFsdWU9e2ZpbHRlcnMueWVhcn1cbiAgICAgICAgICAgICAgICAgICAgICBvblZhbHVlQ2hhbmdlPXsodmFsdWUpID0+IGhhbmRsZUZpbHRlckNoYW5nZSgneWVhcicsIHZhbHVlKX1cbiAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgIDxTZWxlY3RUcmlnZ2VyIGlkPSd5ZWFyLWZpbHRlcic+XG4gICAgICAgICAgICAgICAgICAgICAgICA8U2VsZWN0VmFsdWUgLz5cbiAgICAgICAgICAgICAgICAgICAgICA8L1NlbGVjdFRyaWdnZXI+XG4gICAgICAgICAgICAgICAgICAgICAgPFNlbGVjdENvbnRlbnQgY2xhc3NOYW1lPSdtYXgtaC1bMzAwcHhdIG92ZXJmbG93LXktYXV0byc+XG4gICAgICAgICAgICAgICAgICAgICAgICB7Z2V0WWVhck9wdGlvbnMoKS5tYXAoKHllYXIpID0+IChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgPFNlbGVjdEl0ZW0ga2V5PXt5ZWFyfSB2YWx1ZT17eWVhci50b1N0cmluZygpfT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7eWVhcn1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7eWVhciA9PT0gY3VycmVudFllYXIgJiYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPSdtbC0yIHRleHQteHMgdGV4dC1ibHVlLTUwMCc+KEN1cnJlbnQpPC9zcGFuPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgIDwvU2VsZWN0SXRlbT5cbiAgICAgICAgICAgICAgICAgICAgICAgICkpfVxuICAgICAgICAgICAgICAgICAgICAgICAgeyFzaG93QWxsWWVhcnMgJiYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0nYm9yZGVyLXQgYm9yZGVyLWdyYXktMjAwIG10LTIgcHQtMic+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPEJ1dHRvblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyaWFudD0nZ2hvc3QnXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzaXplPSdzbSdcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT0ndy1mdWxsIHRleHQtbGVmdCBqdXN0aWZ5LXN0YXJ0IHRleHQteHMnXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiBzZXRTaG93QWxsWWVhcnModHJ1ZSl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgU2hvdyBtb3JlIHllYXJzICgyMDAwIC0ge2N1cnJlbnRZZWFyICsgMjV9KVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvQnV0dG9uPlxuICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgICAgICB7c2hvd0FsbFllYXJzICYmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9J2JvcmRlci10IGJvcmRlci1ncmF5LTIwMCBtdC0yIHB0LTInPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxCdXR0b25cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhcmlhbnQ9J2dob3N0J1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2l6ZT0nc20nXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9J3ctZnVsbCB0ZXh0LWxlZnQganVzdGlmeS1zdGFydCB0ZXh0LXhzJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DbGljaz17KCkgPT4gc2V0U2hvd0FsbFllYXJzKGZhbHNlKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBTaG93IGZld2VyIHllYXJzICh7Y3VycmVudFllYXIgLSAzfSAtIHtjdXJyZW50WWVhciArIDN9KVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvQnV0dG9uPlxuICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgICAgPC9TZWxlY3RDb250ZW50PlxuICAgICAgICAgICAgICAgICAgICA8L1NlbGVjdD5cbiAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgIDwvZGl2PlxuXG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9J3NwYWNlLXktMic+XG4gICAgICAgICAgICAgICAgICA8TGFiZWwgY2xhc3NOYW1lPSdmbGV4IGl0ZW1zLWNlbnRlciBnYXAtMic+XG4gICAgICAgICAgICAgICAgICAgIDxDYWxlbmRhciBjbGFzc05hbWU9J3ctNCBoLTQnIC8+XG4gICAgICAgICAgICAgICAgICAgIHt0KCdtb250aHMnKX1cbiAgICAgICAgICAgICAgICAgIDwvTGFiZWw+XG4gICAgICAgICAgICAgICAgICA8UG9wb3Zlcj5cbiAgICAgICAgICAgICAgICAgICAgPFBvcG92ZXJUcmlnZ2VyIGFzQ2hpbGQ+XG4gICAgICAgICAgICAgICAgICAgICAgPEJ1dHRvblxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyaWFudD0nb3V0bGluZSdcbiAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT17Y24oXG4gICAgICAgICAgICAgICAgICAgICAgICAgICd3LWZ1bGwganVzdGlmeS1iZXR3ZWVuJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgZmlsdGVycy5tb250aHMubGVuZ3RoID09PSAwICYmICd0ZXh0LW11dGVkLWZvcmVncm91bmQnXG4gICAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgIHtnZXRNb250aHNEaXNwbGF5VGV4dCgpfVxuICAgICAgICAgICAgICAgICAgICAgICAgPENoZXZyb25Eb3duIGNsYXNzTmFtZT0nbWwtMiBoLTQgdy00IHNocmluay0wIG9wYWNpdHktNTAnIC8+XG4gICAgICAgICAgICAgICAgICAgICAgPC9CdXR0b24+XG4gICAgICAgICAgICAgICAgICAgIDwvUG9wb3ZlclRyaWdnZXI+XG4gICAgICAgICAgICAgICAgICAgIDxQb3BvdmVyQ29udGVudCBjbGFzc05hbWU9J3ctNjQgcC0wJyBhbGlnbj0nc3RhcnQnPlxuICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSdib3JkZXItYiBwLTMnPlxuICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9J2ZsZXggaXRlbXMtY2VudGVyIHNwYWNlLXgtMic+XG4gICAgICAgICAgICAgICAgICAgICAgICAgIDxDaGVja2JveFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkPSdhbGwtbW9udGhzJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNoZWNrZWQ9e2ZpbHRlcnMubW9udGhzLmxlbmd0aCA9PT0gTU9OVEhTLmxlbmd0aH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNoZWNrZWRDaGFuZ2U9e2hhbmRsZUFsbE1vbnRoc1RvZ2dsZX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPExhYmVsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaHRtbEZvcj0nYWxsLW1vbnRocydcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9J3RleHQtc20gZm9udC1tZWRpdW0gbGVhZGluZy1ub25lIHBlZXItZGlzYWJsZWQ6Y3Vyc29yLW5vdC1hbGxvd2VkIHBlZXItZGlzYWJsZWQ6b3BhY2l0eS03MCdcbiAgICAgICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIEFsbCBNb250aHNcbiAgICAgICAgICAgICAgICAgICAgICAgICAgPC9MYWJlbD5cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSdncmlkIGdyaWQtY29scy0yIGdhcC0yIHAtMyc+XG4gICAgICAgICAgICAgICAgICAgICAgICB7TU9OVEhTLm1hcCgobW9udGgpID0+IChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBrZXk9e21vbnRoLnZhbHVlfSBjbGFzc05hbWU9J2ZsZXggaXRlbXMtY2VudGVyIHNwYWNlLXgtMic+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPENoZWNrYm94XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZD17YG1vbnRoLSR7bW9udGgudmFsdWV9YH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNoZWNrZWQ9e2ZpbHRlcnMubW9udGhzLmluY2x1ZGVzKG1vbnRoLnZhbHVlKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hlY2tlZENoYW5nZT17KCkgPT4gaGFuZGxlTW9udGhUb2dnbGUobW9udGgudmFsdWUpfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPExhYmVsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBodG1sRm9yPXtgbW9udGgtJHttb250aC52YWx1ZX1gfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPSd0ZXh0LXNtIGxlYWRpbmctbm9uZSBwZWVyLWRpc2FibGVkOmN1cnNvci1ub3QtYWxsb3dlZCBwZWVyLWRpc2FibGVkOm9wYWNpdHktNzAnXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge21vbnRoLmxhYmVsfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvTGFiZWw+XG4gICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgKSl9XG4gICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgIDwvUG9wb3ZlckNvbnRlbnQ+XG4gICAgICAgICAgICAgICAgICA8L1BvcG92ZXI+XG4gICAgICAgICAgICAgICAgPC9kaXY+XG5cbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0nc3BhY2UteS0yJz5cbiAgICAgICAgICAgICAgICAgIDxMYWJlbCBjbGFzc05hbWU9J2ludmlzaWJsZSc+QWN0aW9uczwvTGFiZWw+XG4gICAgICAgICAgICAgICAgICA8RGlhbG9nIG9wZW49e3Nob3dDcmVhdGVEaWFsb2d9IG9uT3BlbkNoYW5nZT17c2V0U2hvd0NyZWF0ZURpYWxvZ30+XG4gICAgICAgICAgICAgICAgICAgIDxEaWFsb2dUcmlnZ2VyIGFzQ2hpbGQ+XG4gICAgICAgICAgICAgICAgICAgICAgPEJ1dHRvbiBjbGFzc05hbWU9J3ctZnVsbCcgZGlzYWJsZWQ9eyFidWlsZGluZ0lkfT5cbiAgICAgICAgICAgICAgICAgICAgICAgIHt0KCdjcmVhdGVCaWxsJyl9XG4gICAgICAgICAgICAgICAgICAgICAgPC9CdXR0b24+XG4gICAgICAgICAgICAgICAgICAgIDwvRGlhbG9nVHJpZ2dlcj5cbiAgICAgICAgICAgICAgICAgICAgPERpYWxvZ0NvbnRlbnQgY2xhc3NOYW1lPSdtYXgtdy00eGwgbWF4LWgtWzkwdmhdIG92ZXJmbG93LXktYXV0byc+XG4gICAgICAgICAgICAgICAgICAgICAgPERpYWxvZ0hlYWRlcj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxEaWFsb2dUaXRsZT57dCgnY3JlYXRlTmV3QmlsbCcpfTwvRGlhbG9nVGl0bGU+XG4gICAgICAgICAgICAgICAgICAgICAgPC9EaWFsb2dIZWFkZXI+XG4gICAgICAgICAgICAgICAgICAgICAgPE1vZHVsYXJCaWxsRm9ybVxuICAgICAgICAgICAgICAgICAgICAgICAgbW9kZT1cImNyZWF0ZVwiXG4gICAgICAgICAgICAgICAgICAgICAgICBidWlsZGluZ0lkPXtidWlsZGluZ0lkfVxuICAgICAgICAgICAgICAgICAgICAgICAgb25DYW5jZWw9eygpID0+IHNldFNob3dDcmVhdGVEaWFsb2coZmFsc2UpfVxuICAgICAgICAgICAgICAgICAgICAgICAgb25TdWNjZXNzPXsoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHNldFNob3dDcmVhdGVEaWFsb2coZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICBxdWVyeUNsaWVudC5pbnZhbGlkYXRlUXVlcmllcyh7IHF1ZXJ5S2V5OiBbJy9hcGkvYmlsbHMnXSB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgPC9EaWFsb2dDb250ZW50PlxuICAgICAgICAgICAgICAgICAgPC9EaWFsb2c+XG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgPC9DYXJkQ29udGVudD5cbiAgICAgICAgICA8L0NhcmQ+XG5cbiAgICAgICAgICB7LyogQmlsbHMgRGlzcGxheSAqL31cbiAgICAgICAgICB7aXNMb2FkaW5nID8gKFxuICAgICAgICAgICAgPENhcmQ+XG4gICAgICAgICAgICAgIDxDYXJkQ29udGVudCBjbGFzc05hbWU9J3AtOCB0ZXh0LWNlbnRlcic+XG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9J2FuaW1hdGUtc3BpbiB3LTggaC04IGJvcmRlci00IGJvcmRlci1wcmltYXJ5IGJvcmRlci10LXRyYW5zcGFyZW50IHJvdW5kZWQtZnVsbCBteC1hdXRvIG1iLTQnPjwvZGl2PlxuICAgICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT0ndGV4dC1ncmF5LTUwMCc+e3QoJ2xvYWRpbmdCaWxscycpfTwvcD5cbiAgICAgICAgICAgICAgPC9DYXJkQ29udGVudD5cbiAgICAgICAgICAgIDwvQ2FyZD5cbiAgICAgICAgICApIDogT2JqZWN0LmtleXMoYmlsbHNCeUNhdGVnb3J5KS5sZW5ndGggPT09IDAgPyAoXG4gICAgICAgICAgICA8Q2FyZD5cbiAgICAgICAgICAgICAgPENhcmRDb250ZW50IGNsYXNzTmFtZT0ncC04IHRleHQtY2VudGVyJz5cbiAgICAgICAgICAgICAgICA8aDMgY2xhc3NOYW1lPSd0ZXh0LWxnIGZvbnQtc2VtaWJvbGQgdGV4dC1ncmF5LTYwMCBtYi0yJz57dCgnbm9CaWxsc0ZvdW5kJyl9PC9oMz5cbiAgICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9J3RleHQtZ3JheS01MDAgbWItNCc+XG4gICAgICAgICAgICAgICAgICBObyBiaWxscyBmb3VuZCBmb3IgdGhlIHNlbGVjdGVkIGZpbHRlcnMuIENyZWF0ZSB5b3VyIGZpcnN0IGJpbGwgdG8gZ2V0IHN0YXJ0ZWQuXG4gICAgICAgICAgICAgICAgPC9wPlxuICAgICAgICAgICAgICAgIDxCdXR0b24gb25DbGljaz17KCkgPT4gc2V0U2hvd0NyZWF0ZURpYWxvZyh0cnVlKX0+XG4gICAgICAgICAgICAgICAgICBDcmVhdGUgRmlyc3QgQmlsbFxuICAgICAgICAgICAgICAgIDwvQnV0dG9uPlxuICAgICAgICAgICAgICA8L0NhcmRDb250ZW50PlxuICAgICAgICAgICAgPC9DYXJkPlxuICAgICAgICAgICkgOiAoXG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0nc3BhY2UteS02Jz5cbiAgICAgICAgICAgICAge0JJTExfQ0FURUdPUklFUy5maWx0ZXIoXG4gICAgICAgICAgICAgICAgKGNhdGVnb3J5KSA9PlxuICAgICAgICAgICAgICAgICAgKCFmaWx0ZXJzLmNhdGVnb3J5IHx8IGZpbHRlcnMuY2F0ZWdvcnkgPT09IGNhdGVnb3J5KSAmJlxuICAgICAgICAgICAgICAgICAgYmlsbHNCeUNhdGVnb3J5W2NhdGVnb3J5XT8ubGVuZ3RoID4gMFxuICAgICAgICAgICAgICApLm1hcCgoY2F0ZWdvcnkpID0+IChcbiAgICAgICAgICAgICAgICA8QmlsbENhdGVnb3J5U2VjdGlvblxuICAgICAgICAgICAgICAgICAga2V5PXtjYXRlZ29yeX1cbiAgICAgICAgICAgICAgICAgIGNhdGVnb3J5PXtjYXRlZ29yeX1cbiAgICAgICAgICAgICAgICAgIGJpbGxzPXtiaWxsc0J5Q2F0ZWdvcnlbY2F0ZWdvcnldIHx8IFtdfVxuICAgICAgICAgICAgICAgICAgb25CaWxsVXBkYXRlPXsoKSA9PiBxdWVyeUNsaWVudC5pbnZhbGlkYXRlUXVlcmllcyh7IHF1ZXJ5S2V5OiBbJy9hcGkvYmlsbHMnXSB9KX1cbiAgICAgICAgICAgICAgICAgIHQ9e3R9XG4gICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgKSl9XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICApfVxuICAgICAgICA8L2Rpdj5cbiAgICAgIDwvZGl2PlxuICAgIDwvZGl2PlxuICApO1xufVxuXG4vLyBDb21wb25lbnQgZm9yIGRpc3BsYXlpbmcgYmlsbHMgaW4gYSBjYXRlZ29yeVxuLyoqXG4gKlxuICogQHBhcmFtIHJvb3QwXG4gKiBAcGFyYW0gcm9vdDAuY2F0ZWdvcnlcbiAqIEBwYXJhbSByb290MC5iaWxsc1xuICogQHBhcmFtIHJvb3QwLm9uQmlsbFVwZGF0ZVxuICovXG4vKipcbiAqIEJpbGxDYXRlZ29yeVNlY3Rpb24gZnVuY3Rpb24uXG4gKiBAcGFyYW0gcm9vdDBcbiAqIEBwYXJhbSByb290MC5jYXRlZ29yeVxuICogQHBhcmFtIHJvb3QwLmJpbGxzXG4gKiBAcGFyYW0gcm9vdDAub25CaWxsVXBkYXRlXG4gKiBAcmV0dXJucyBGdW5jdGlvbiByZXN1bHQuXG4gKi9cbmZ1bmN0aW9uIEJpbGxDYXRlZ29yeVNlY3Rpb24oe1xuICBjYXRlZ29yeSxcbiAgYmlsbHMsXG4gIG9uQmlsbFVwZGF0ZSxcbiAgdCxcbn06IHtcbiAgY2F0ZWdvcnk6IHN0cmluZztcbiAgYmlsbHM6IEJpbGxbXTtcbiAgb25CaWxsVXBkYXRlOiAoKSA9PiB2b2lkO1xuICB0OiAoa2V5OiBzdHJpbmcpID0+IHN0cmluZztcbn0pIHtcbiAgcmV0dXJuIChcbiAgICA8Q2FyZD5cbiAgICAgIDxDYXJkSGVhZGVyPlxuICAgICAgICA8Q2FyZFRpdGxlIGNsYXNzTmFtZT0nZmxleCBpdGVtcy1jZW50ZXIganVzdGlmeS1iZXR3ZWVuJz5cbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0nZmxleCBpdGVtcy1jZW50ZXIgZ2FwLTInPlxuICAgICAgICAgICAgPFRhZyBjbGFzc05hbWU9J3ctNSBoLTUnIC8+XG4gICAgICAgICAgICB7Z2V0Q2F0ZWdvcnlMYWJlbChjYXRlZ29yeSwgdCl9XG4gICAgICAgICAgICA8QmFkZ2UgdmFyaWFudD0nc2Vjb25kYXJ5Jz57YmlsbHMubGVuZ3RofTwvQmFkZ2U+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgIDwvQ2FyZFRpdGxlPlxuICAgICAgPC9DYXJkSGVhZGVyPlxuICAgICAgPENhcmRDb250ZW50PlxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT0nZ3JpZCBncmlkLWNvbHMtMSBtZDpncmlkLWNvbHMtMiBsZzpncmlkLWNvbHMtMyBnYXAtNCc+XG4gICAgICAgICAge2JpbGxzLm1hcCgoYmlsbCkgPT4gKFxuICAgICAgICAgICAgPEJpbGxDYXJkIGtleT17YmlsbC5pZH0gYmlsbD17YmlsbH0gb25VcGRhdGU9e29uQmlsbFVwZGF0ZX0gLz5cbiAgICAgICAgICApKX1cbiAgICAgICAgPC9kaXY+XG4gICAgICA8L0NhcmRDb250ZW50PlxuICAgIDwvQ2FyZD5cbiAgKTtcbn1cblxuLy8gQ29tcG9uZW50IGZvciBpbmRpdmlkdWFsIGJpbGwgY2FyZHNcbi8qKlxuICpcbiAqIEBwYXJhbSByb290MFxuICogQHBhcmFtIHJvb3QwLmJpbGxcbiAqIEBwYXJhbSByb290MC5vblVwZGF0ZVxuICovXG4vKipcbiAqIEJpbGxDYXJkIGZ1bmN0aW9uLlxuICogQHBhcmFtIHJvb3QwXG4gKiBAcGFyYW0gcm9vdDAuYmlsbFxuICogQHBhcmFtIHJvb3QwLm9uVXBkYXRlXG4gKiBAcmV0dXJucyBGdW5jdGlvbiByZXN1bHQuXG4gKi9cbmZ1bmN0aW9uIEJpbGxDYXJkKHsgYmlsbCwgb25VcGRhdGUgfTogeyBiaWxsOiBCaWxsOyBvblVwZGF0ZTogKCkgPT4gdm9pZCB9KSB7XG4gIGNvbnN0IHsgdCB9ID0gdXNlTGFuZ3VhZ2UoKTtcbiAgY29uc3QgW3Nob3dEZXRhaWxEaWFsb2csIHNldFNob3dEZXRhaWxEaWFsb2ddID0gdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBbc2hvd0VkaXREaWFsb2csIHNldFNob3dFZGl0RGlhbG9nXSA9IHVzZVN0YXRlKGZhbHNlKTtcblxuICBjb25zdCBzdGF0dXNDb2xvcnMgPSB7XG4gICAgZHJhZnQ6ICdiZy1ncmF5LTEwMCB0ZXh0LWdyYXktODAwJyxcbiAgICBzZW50OiAnYmctYmx1ZS0xMDAgdGV4dC1ibHVlLTgwMCcsXG4gICAgb3ZlcmR1ZTogJ2JnLXJlZC0xMDAgdGV4dC1yZWQtODAwJyxcbiAgICBwYWlkOiAnYmctZ3JlZW4tMTAwIHRleHQtZ3JlZW4tODAwJyxcbiAgICBjYW5jZWxsZWQ6ICdiZy1ncmF5LTEwMCB0ZXh0LWdyYXktODAwJyxcbiAgfTtcblxuICByZXR1cm4gKFxuICAgIDw+XG4gICAgICA8Q2FyZFxuICAgICAgICBjbGFzc05hbWU9J2hvdmVyOnNoYWRvdy1tZCB0cmFuc2l0aW9uLXNoYWRvdyBjdXJzb3ItcG9pbnRlcidcbiAgICAgICAgb25DbGljaz17KCkgPT4gc2V0U2hvd0RldGFpbERpYWxvZyh0cnVlKX1cbiAgICAgID5cbiAgICAgICAgPENhcmRDb250ZW50IGNsYXNzTmFtZT0ncC00Jz5cbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0nc3BhY2UteS0zJz5cbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSdmbGV4IGl0ZW1zLXN0YXJ0IGp1c3RpZnktYmV0d2Vlbic+XG4gICAgICAgICAgICAgIDxkaXY+XG4gICAgICAgICAgICAgICAgPGg0IGNsYXNzTmFtZT0nZm9udC1zZW1pYm9sZCB0ZXh0LXNtJz57YmlsbC50aXRsZX08L2g0PlxuICAgICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT0ndGV4dC14cyB0ZXh0LWdyYXktNTAwJz4je2JpbGwuYmlsbE51bWJlcn08L3A+XG4gICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICA8QmFkZ2UgY2xhc3NOYW1lPXtzdGF0dXNDb2xvcnNbYmlsbC5zdGF0dXMgYXMga2V5b2YgdHlwZW9mIHN0YXR1c0NvbG9yc119PlxuICAgICAgICAgICAgICAgIHtiaWxsLnN0YXR1c31cbiAgICAgICAgICAgICAgPC9CYWRnZT5cbiAgICAgICAgICAgIDwvZGl2PlxuXG4gICAgICAgICAgICB7YmlsbC5kZXNjcmlwdGlvbiAmJiAoXG4gICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT0ndGV4dC1zbSB0ZXh0LWdyYXktNjAwIGxpbmUtY2xhbXAtMic+e2JpbGwuZGVzY3JpcHRpb259PC9wPlxuICAgICAgICAgICAgKX1cblxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9J2ZsZXggaXRlbXMtY2VudGVyIGp1c3RpZnktYmV0d2VlbiB0ZXh0LXNtJz5cbiAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPSdmb250LW1lZGl1bSc+JHtOdW1iZXIoYmlsbC50b3RhbEFtb3VudCkudG9Mb2NhbGVTdHJpbmcoKX08L3NwYW4+XG4gICAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT0ndGV4dC1ncmF5LTUwMCc+e2JpbGwucGF5bWVudFR5cGV9PC9zcGFuPlxuICAgICAgICAgICAgPC9kaXY+XG5cbiAgICAgICAgICAgIHtiaWxsLnZlbmRvciAmJiA8cCBjbGFzc05hbWU9J3RleHQteHMgdGV4dC1ncmF5LTUwMCc+VmVuZG9yOiB7YmlsbC52ZW5kb3J9PC9wPn1cblxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9J2ZsZXggaXRlbXMtY2VudGVyIGdhcC0yIHB0LTInPlxuICAgICAgICAgICAgICB7YmlsbC5maWxlUGF0aCAmJiAoXG4gICAgICAgICAgICAgICAgPEJhZGdlIHZhcmlhbnQ9J291dGxpbmUnIGNsYXNzTmFtZT0ndGV4dC14cyc+XG4gICAgICAgICAgICAgICAgICA8RmlsZVRleHQgY2xhc3NOYW1lPSd3LTMgaC0zIG1yLTEnIC8+XG4gICAgICAgICAgICAgICAgICBEb2N1bWVudFxuICAgICAgICAgICAgICAgIDwvQmFkZ2U+XG4gICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgIHtiaWxsLmlzQWlBbmFseXplZCAmJiAoXG4gICAgICAgICAgICAgICAgPEJhZGdlIHZhcmlhbnQ9J291dGxpbmUnIGNsYXNzTmFtZT0ndGV4dC14cyc+XG4gICAgICAgICAgICAgICAgICBBSSBBbmFseXplZFxuICAgICAgICAgICAgICAgIDwvQmFkZ2U+XG4gICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgIHtiaWxsLm5vdGVzPy5pbmNsdWRlcygnQXV0by1nZW5lcmF0ZWQgZnJvbTonKSAmJiAoXG4gICAgICAgICAgICAgICAgPEJhZGdlIHZhcmlhbnQ9J291dGxpbmUnIGNsYXNzTmFtZT0ndGV4dC14cyc+XG4gICAgICAgICAgICAgICAgICBBdXRvLUdlbmVyYXRlZFxuICAgICAgICAgICAgICAgIDwvQmFkZ2U+XG4gICAgICAgICAgICAgICl9XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgPC9DYXJkQ29udGVudD5cbiAgICAgIDwvQ2FyZD5cblxuICAgICAgey8qIEJpbGwgRGV0YWlsIERpYWxvZyAqL31cbiAgICAgIDxEaWFsb2cgb3Blbj17c2hvd0RldGFpbERpYWxvZ30gb25PcGVuQ2hhbmdlPXtzZXRTaG93RGV0YWlsRGlhbG9nfT5cbiAgICAgICAgPERpYWxvZ0NvbnRlbnQgY2xhc3NOYW1lPSdtYXgtdy0yeGwgbWF4LWgtWzk1dmhdIG92ZXJmbG93LXktYXV0bycgYXJpYS1kZXNjcmliZWRieT1cImJpbGwtZGV0YWlscy1kZXNjcmlwdGlvblwiPlxuICAgICAgICAgIDxEaWFsb2dIZWFkZXI+XG4gICAgICAgICAgICA8RGlhbG9nVGl0bGU+QmlsbCBEZXRhaWxzPC9EaWFsb2dUaXRsZT5cbiAgICAgICAgICA8L0RpYWxvZ0hlYWRlcj5cbiAgICAgICAgICA8QmlsbERldGFpbFxuICAgICAgICAgICAgYmlsbD17YmlsbH1cbiAgICAgICAgICAgIG9uU3VjY2Vzcz17KCkgPT4ge1xuICAgICAgICAgICAgICBzZXRTaG93RGV0YWlsRGlhbG9nKGZhbHNlKTtcbiAgICAgICAgICAgICAgb25VcGRhdGUoKTtcbiAgICAgICAgICAgIH19XG4gICAgICAgICAgICBvbkNhbmNlbD17KCkgPT4gc2V0U2hvd0RldGFpbERpYWxvZyhmYWxzZSl9XG4gICAgICAgICAgICBvbkVkaXRCaWxsPXsoKSA9PiB7XG4gICAgICAgICAgICAgIHNldFNob3dEZXRhaWxEaWFsb2coZmFsc2UpO1xuICAgICAgICAgICAgICBzZXRTaG93RWRpdERpYWxvZyh0cnVlKTtcbiAgICAgICAgICAgIH19XG4gICAgICAgICAgLz5cbiAgICAgICAgPC9EaWFsb2dDb250ZW50PlxuICAgICAgPC9EaWFsb2c+XG5cbiAgICAgIHsvKiBCaWxsIEVkaXQgRGlhbG9nICovfVxuICAgICAgPERpYWxvZyBvcGVuPXtzaG93RWRpdERpYWxvZ30gb25PcGVuQ2hhbmdlPXtzZXRTaG93RWRpdERpYWxvZ30+XG4gICAgICAgIDxEaWFsb2dDb250ZW50IGNsYXNzTmFtZT0nbWF4LXctNHhsIG1heC1oLVs5NXZoXSBvdmVyZmxvdy15LWF1dG8nIGFyaWEtZGVzY3JpYmVkYnk9XCJlZGl0LWJpbGwtZGVzY3JpcHRpb25cIj5cbiAgICAgICAgICA8TW9kdWxhckJpbGxGb3JtXG4gICAgICAgICAgICBtb2RlPVwiZWRpdFwiXG4gICAgICAgICAgICBiaWxsPXtiaWxsfVxuICAgICAgICAgICAgb25TdWNjZXNzPXsoKSA9PiB7XG4gICAgICAgICAgICAgIHNldFNob3dFZGl0RGlhbG9nKGZhbHNlKTtcbiAgICAgICAgICAgICAgb25VcGRhdGUoKTtcbiAgICAgICAgICAgIH19XG4gICAgICAgICAgICBvbkNhbmNlbD17KCkgPT4gc2V0U2hvd0VkaXREaWFsb2coZmFsc2UpfVxuICAgICAgICAgICAgYnVpbGRpbmdJZD17YmlsbC5idWlsZGluZ0lkfVxuICAgICAgICAgIC8+XG4gICAgICAgIDwvRGlhbG9nQ29udGVudD5cbiAgICAgIDwvRGlhbG9nPlxuICAgIDwvPlxuICApO1xufVxuXG4vLyBCaWxsIGRldGFpbCBjb21wb25lbnRcbmZ1bmN0aW9uIEJpbGxEZXRhaWwoe1xuICBiaWxsLFxuICBvblN1Y2Nlc3MsXG4gIG9uQ2FuY2VsLFxuICBvbkVkaXRCaWxsLFxufToge1xuICBiaWxsOiBCaWxsO1xuICBvblN1Y2Nlc3M6ICgpID0+IHZvaWQ7XG4gIG9uQ2FuY2VsOiAoKSA9PiB2b2lkO1xuICBvbkVkaXRCaWxsOiAoKSA9PiB2b2lkO1xufSkge1xuICBjb25zdCBxdWVyeUNsaWVudCA9IHVzZVF1ZXJ5Q2xpZW50KCk7XG5cbiAgLy8gRmV0Y2ggZnJlc2ggYmlsbCBkYXRhIHRvIGVuc3VyZSB3ZSBoYXZlIHVwZGF0ZWQgZG9jdW1lbnQgaW5mb3JtYXRpb25cbiAgY29uc3QgeyBkYXRhOiBmcmVzaEJpbGwsIGVycm9yOiBmcmVzaEJpbGxFcnJvciwgaXNMb2FkaW5nOiBmcmVzaEJpbGxMb2FkaW5nIH0gPSB1c2VRdWVyeSh7XG4gICAgcXVlcnlLZXk6IFsnL2FwaS9iaWxscycsIGJpbGwuaWRdLFxuICAgIHF1ZXJ5Rm46IGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2goYC9hcGkvYmlsbHMvJHtiaWxsLmlkfWAsIHtcbiAgICAgICAgY3JlZGVudGlhbHM6ICdpbmNsdWRlJyxcbiAgICAgIH0pO1xuICAgICAgaWYgKCFyZXNwb25zZS5vaykge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0ZhaWxlZCB0byBmZXRjaCBiaWxsIGRldGFpbHMnKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiByZXNwb25zZS5qc29uKCk7XG4gICAgfSxcbiAgfSk7XG5cbiAgLy8gRmV0Y2ggZG9jdW1lbnRzIGF0dGFjaGVkIHRvIHRoaXMgYmlsbFxuICBjb25zdCB7IGRhdGE6IGJpbGxEb2N1bWVudHMgPSBbXSwgaXNMb2FkaW5nOiBkb2N1bWVudHNMb2FkaW5nIH0gPSB1c2VRdWVyeSh7XG4gICAgcXVlcnlLZXk6IFsnL2FwaS9kb2N1bWVudHMnLCAnYmlsbCcsIGJpbGwuaWRdLFxuICAgIHF1ZXJ5Rm46IGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2goYC9hcGkvZG9jdW1lbnRzP2F0dGFjaGVkVG9UeXBlPWJpbGwmYXR0YWNoZWRUb0lkPSR7YmlsbC5pZH1gLCB7XG4gICAgICAgIGNyZWRlbnRpYWxzOiAnaW5jbHVkZScsXG4gICAgICB9KTtcbiAgICAgIGlmICghcmVzcG9uc2Uub2spIHtcbiAgICAgICAgY29uc29sZS5lcnJvcignW0JJTEwgRE9DU10gRmFpbGVkIHRvIGZldGNoIGRvY3VtZW50czonLCByZXNwb25zZS5zdGF0dXMsIHJlc3BvbnNlLnN0YXR1c1RleHQpO1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0ZhaWxlZCB0byBmZXRjaCBiaWxsIGRvY3VtZW50cycpO1xuICAgICAgfVxuICAgICAgY29uc3QgZGF0YSA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcbiAgICAgIHJldHVybiBkYXRhLmRvY3VtZW50cyB8fCBbXTtcbiAgICB9LFxuICB9KTtcblxuICAvLyBVc2UgZnJlc2ggYmlsbCBkYXRhIGlmIGF2YWlsYWJsZSwgZmFsbGJhY2sgdG8gcHJvcHMgYmlsbCBkYXRhXG4gIGNvbnN0IGN1cnJlbnRCaWxsID0gZnJlc2hCaWxsIHx8IGJpbGw7XG4gIFxuICAvLyBLZWVwIGJhc2ljIGxvZ2dpbmcgZm9yIGJpbGxzXG4gIGlmIChiaWxsRG9jdW1lbnRzLmxlbmd0aCA+IDApIHtcbiAgICBjb25zb2xlLmxvZygnW0JJTEwgRE9DU10gRm91bmQgZG9jdW1lbnRzOicsIGJpbGxEb2N1bWVudHMubGVuZ3RoLCAnZm9yIGJpbGw6JywgY3VycmVudEJpbGwuYmlsbE51bWJlcik7XG4gIH1cbiAgXG4gIGNvbnN0IHVwZGF0ZUJpbGxNdXRhdGlvbiA9IHVzZU11dGF0aW9uKHtcbiAgICBtdXRhdGlvbkZuOiBhc3luYyAodXBkYXRlczogUGFydGlhbDxCaWxsPikgPT4ge1xuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaChgL2FwaS9iaWxscy8ke2JpbGwuaWR9YCwge1xuICAgICAgICBtZXRob2Q6ICdQQVRDSCcsXG4gICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nLFxuICAgICAgICB9LFxuICAgICAgICBjcmVkZW50aWFsczogJ2luY2x1ZGUnLFxuICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh1cGRhdGVzKSxcbiAgICAgIH0pO1xuXG4gICAgICBpZiAoIXJlc3BvbnNlLm9rKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignRmFpbGVkIHRvIHVwZGF0ZSBiaWxsJyk7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiByZXNwb25zZS5qc29uKCk7XG4gICAgfSxcbiAgICBvblN1Y2Nlc3M6ICgpID0+IHtcbiAgICAgIHF1ZXJ5Q2xpZW50LmludmFsaWRhdGVRdWVyaWVzKHsgcXVlcnlLZXk6IFsnL2FwaS9iaWxscyddIH0pO1xuICAgICAgb25TdWNjZXNzKCk7XG4gICAgfSxcbiAgfSk7XG5cblxuXG4gIHJldHVybiAoXG4gICAgPGRpdiBjbGFzc05hbWU9J3NwYWNlLXktNic+XG4gICAgICB7LyogQmlsbCBJbmZvcm1hdGlvbiAqL31cbiAgICAgIDxkaXYgY2xhc3NOYW1lPSdncmlkIGdyaWQtY29scy0yIGdhcC00Jz5cbiAgICAgICAgPGRpdj5cbiAgICAgICAgICA8TGFiZWwgY2xhc3NOYW1lPSd0ZXh0LXNtIGZvbnQtbWVkaXVtJz5CaWxsIE51bWJlcjwvTGFiZWw+XG4gICAgICAgICAgPHAgY2xhc3NOYW1lPSd0ZXh0LXNtIHRleHQtZ3JheS02MDAnPntjdXJyZW50QmlsbC5iaWxsTnVtYmVyfTwvcD5cbiAgICAgICAgPC9kaXY+XG4gICAgICAgIDxkaXY+XG4gICAgICAgICAgPExhYmVsIGNsYXNzTmFtZT0ndGV4dC1zbSBmb250LW1lZGl1bSc+U3RhdHVzPC9MYWJlbD5cbiAgICAgICAgICA8cCBjbGFzc05hbWU9J3RleHQtc20gdGV4dC1ncmF5LTYwMCBjYXBpdGFsaXplJz57Y3VycmVudEJpbGwuc3RhdHVzfTwvcD5cbiAgICAgICAgPC9kaXY+XG4gICAgICAgIDxkaXY+XG4gICAgICAgICAgPExhYmVsIGNsYXNzTmFtZT0ndGV4dC1zbSBmb250LW1lZGl1bSc+Q2F0ZWdvcnk8L0xhYmVsPlxuICAgICAgICAgIDxwIGNsYXNzTmFtZT0ndGV4dC1zbSB0ZXh0LWdyYXktNjAwIGNhcGl0YWxpemUnPntjdXJyZW50QmlsbC5jYXRlZ29yeX08L3A+XG4gICAgICAgIDwvZGl2PlxuICAgICAgICA8ZGl2PlxuICAgICAgICAgIDxMYWJlbCBjbGFzc05hbWU9J3RleHQtc20gZm9udC1tZWRpdW0nPlBheW1lbnQgVHlwZTwvTGFiZWw+XG4gICAgICAgICAgPHAgY2xhc3NOYW1lPSd0ZXh0LXNtIHRleHQtZ3JheS02MDAgY2FwaXRhbGl6ZSc+e2N1cnJlbnRCaWxsLnBheW1lbnRUeXBlfTwvcD5cbiAgICAgICAgPC9kaXY+XG4gICAgICAgIDxkaXY+XG4gICAgICAgICAgPExhYmVsIGNsYXNzTmFtZT0ndGV4dC1zbSBmb250LW1lZGl1bSc+VG90YWwgQW1vdW50PC9MYWJlbD5cbiAgICAgICAgICA8cCBjbGFzc05hbWU9J3RleHQtc20gdGV4dC1ncmF5LTYwMCc+JHtOdW1iZXIoY3VycmVudEJpbGwudG90YWxBbW91bnQpLnRvTG9jYWxlU3RyaW5nKCl9PC9wPlxuICAgICAgICA8L2Rpdj5cbiAgICAgICAgPGRpdj5cbiAgICAgICAgICA8TGFiZWwgY2xhc3NOYW1lPSd0ZXh0LXNtIGZvbnQtbWVkaXVtJz5TdGFydCBEYXRlPC9MYWJlbD5cbiAgICAgICAgICA8cCBjbGFzc05hbWU9J3RleHQtc20gdGV4dC1ncmF5LTYwMCc+e2N1cnJlbnRCaWxsLnN0YXJ0RGF0ZX08L3A+XG4gICAgICAgIDwvZGl2PlxuICAgICAgPC9kaXY+XG5cbiAgICAgIHsvKiBUaXRsZSBhbmQgRGVzY3JpcHRpb24gKi99XG4gICAgICA8ZGl2PlxuICAgICAgICA8TGFiZWwgY2xhc3NOYW1lPSd0ZXh0LXNtIGZvbnQtbWVkaXVtJz5UaXRsZTwvTGFiZWw+XG4gICAgICAgIDxwIGNsYXNzTmFtZT0ndGV4dC1zbSB0ZXh0LWdyYXktNjAwJz57Y3VycmVudEJpbGwudGl0bGV9PC9wPlxuICAgICAgPC9kaXY+XG5cbiAgICAgIHtjdXJyZW50QmlsbC5kZXNjcmlwdGlvbiAmJiAoXG4gICAgICAgIDxkaXY+XG4gICAgICAgICAgPExhYmVsIGNsYXNzTmFtZT0ndGV4dC1zbSBmb250LW1lZGl1bSc+RGVzY3JpcHRpb248L0xhYmVsPlxuICAgICAgICAgIDxwIGNsYXNzTmFtZT0ndGV4dC1zbSB0ZXh0LWdyYXktNjAwJz57Y3VycmVudEJpbGwuZGVzY3JpcHRpb259PC9wPlxuICAgICAgICA8L2Rpdj5cbiAgICAgICl9XG5cbiAgICAgIHtjdXJyZW50QmlsbC52ZW5kb3IgJiYgKFxuICAgICAgICA8ZGl2PlxuICAgICAgICAgIDxMYWJlbCBjbGFzc05hbWU9J3RleHQtc20gZm9udC1tZWRpdW0nPlZlbmRvcjwvTGFiZWw+XG4gICAgICAgICAgPHAgY2xhc3NOYW1lPSd0ZXh0LXNtIHRleHQtZ3JheS02MDAnPntjdXJyZW50QmlsbC52ZW5kb3J9PC9wPlxuICAgICAgICA8L2Rpdj5cbiAgICAgICl9XG5cbiAgICAgIHtjdXJyZW50QmlsbC5ub3RlcyAmJiAoXG4gICAgICAgIDxkaXY+XG4gICAgICAgICAgPExhYmVsIGNsYXNzTmFtZT0ndGV4dC1zbSBmb250LW1lZGl1bSc+Tm90ZXM8L0xhYmVsPlxuICAgICAgICAgIDxwIGNsYXNzTmFtZT0ndGV4dC1zbSB0ZXh0LWdyYXktNjAwJz57Y3VycmVudEJpbGwubm90ZXN9PC9wPlxuICAgICAgICA8L2Rpdj5cbiAgICAgICl9XG5cblxuICAgICAgey8qIENvc3RzIEJyZWFrZG93biAqL31cbiAgICAgIHtjdXJyZW50QmlsbC5jb3N0cyAmJiBjdXJyZW50QmlsbC5jb3N0cy5sZW5ndGggPiAxICYmIChcbiAgICAgICAgPGRpdj5cbiAgICAgICAgICA8TGFiZWwgY2xhc3NOYW1lPSd0ZXh0LXNtIGZvbnQtbWVkaXVtJz5QYXltZW50IEJyZWFrZG93bjwvTGFiZWw+XG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9J3NwYWNlLXktMSBtdC0xJz5cbiAgICAgICAgICAgIHtjdXJyZW50QmlsbC5jb3N0cy5tYXAoKGNvc3QsIGluZGV4KSA9PiAoXG4gICAgICAgICAgICAgIDxkaXYga2V5PXtpbmRleH0gY2xhc3NOYW1lPSdmbGV4IGp1c3RpZnktYmV0d2VlbiB0ZXh0LXNtJz5cbiAgICAgICAgICAgICAgICA8c3Bhbj5QYXltZW50IHtpbmRleCArIDF9Ojwvc3Bhbj5cbiAgICAgICAgICAgICAgICA8c3Bhbj4ke051bWJlcihjb3N0KS50b0xvY2FsZVN0cmluZygpfTwvc3Bhbj5cbiAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICApKX1cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgPC9kaXY+XG4gICAgICApfVxuXG4gICAgICB7LyogVXBsb2FkZWQgRG9jdW1lbnRzIFNlY3Rpb24gKi99XG4gICAgICB7KGN1cnJlbnRCaWxsLmZpbGVQYXRoIHx8IGJpbGxEb2N1bWVudHMubGVuZ3RoID4gMCkgJiYgKFxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT0nYm9yZGVyLXQgcHQtNCc+XG4gICAgICAgICAgPExhYmVsIGNsYXNzTmFtZT0ndGV4dC1zbSBmb250LW1lZGl1bSc+VXBsb2FkZWQgRG9jdW1lbnRzPC9MYWJlbD5cbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0nbXQtMiBzcGFjZS15LTInPlxuICAgICAgICAgICAgey8qIERpcmVjdCBiaWxsIHVwbG9hZCAqL31cbiAgICAgICAgICAgIHtjdXJyZW50QmlsbC5maWxlUGF0aCAmJiAoXG4gICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSdmbGV4IGl0ZW1zLWNlbnRlciBqdXN0aWZ5LWJldHdlZW4gcC0zIGJnLWdyYXktNTAgcm91bmRlZC1sZyc+XG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9J2ZsZXggaXRlbXMtY2VudGVyIGdhcC0yJz5cbiAgICAgICAgICAgICAgICAgIDxGaWxlVGV4dCBjbGFzc05hbWU9J3ctNCBoLTQgdGV4dC1ibHVlLTYwMCcgLz5cbiAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT0ndGV4dC1zbSc+e2N1cnJlbnRCaWxsLmZpbGVOYW1lfTwvc3Bhbj5cbiAgICAgICAgICAgICAgICAgIHtjdXJyZW50QmlsbC5pc0FpQW5hbHl6ZWQgJiYgKFxuICAgICAgICAgICAgICAgICAgICA8QmFkZ2UgdmFyaWFudD0nb3V0bGluZScgY2xhc3NOYW1lPSd0ZXh0LXhzJz5cbiAgICAgICAgICAgICAgICAgICAgICBBSSBBbmFseXplZFxuICAgICAgICAgICAgICAgICAgICA8L0JhZGdlPlxuICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0nZmxleCBpdGVtcy1jZW50ZXIgZ2FwLTInPlxuICAgICAgICAgICAgICAgICAgPEJ1dHRvblxuICAgICAgICAgICAgICAgICAgICB2YXJpYW50PSdvdXRsaW5lJ1xuICAgICAgICAgICAgICAgICAgICBzaXplPSdzbSdcbiAgICAgICAgICAgICAgICAgICAgb25DbGljaz17KCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgIC8vIFZpZXcgdGhlIGRvY3VtZW50IChvcGVuIGluIG5ldyB0YWIpXG4gICAgICAgICAgICAgICAgICAgICAgd2luZG93Lm9wZW4oYC9hcGkvYmlsbHMvJHtjdXJyZW50QmlsbC5pZH0vZG93bmxvYWQtZG9jdW1lbnRgLCAnX2JsYW5rJyk7XG4gICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT0nZmxleCBpdGVtcy1jZW50ZXIgZ2FwLTEnXG4gICAgICAgICAgICAgICAgICAgIGRhdGEtdGVzdGlkPXtgYnV0dG9uLXZpZXctZG9jdW1lbnQtJHtjdXJyZW50QmlsbC5pZH1gfVxuICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICA8RmlsZVRleHQgY2xhc3NOYW1lPSd3LTMgaC0zJyAvPlxuICAgICAgICAgICAgICAgICAgICBWaWV3XG4gICAgICAgICAgICAgICAgICA8L0J1dHRvbj5cbiAgICAgICAgICAgICAgICAgIDxCdXR0b25cbiAgICAgICAgICAgICAgICAgICAgdmFyaWFudD0nb3V0bGluZSdcbiAgICAgICAgICAgICAgICAgICAgc2l6ZT0nc20nXG4gICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAvLyBEb3dubG9hZCB0aGUgZG9jdW1lbnRcbiAgICAgICAgICAgICAgICAgICAgICBjb25zdCBsaW5rID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYScpO1xuICAgICAgICAgICAgICAgICAgICAgIGxpbmsuaHJlZiA9IGAvYXBpL2JpbGxzLyR7Y3VycmVudEJpbGwuaWR9L2Rvd25sb2FkLWRvY3VtZW50YDtcbiAgICAgICAgICAgICAgICAgICAgICBsaW5rLmRvd25sb2FkID0gY3VycmVudEJpbGwuZmlsZU5hbWUgfHwgJ2JpbGwtZG9jdW1lbnQnO1xuICAgICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQobGluayk7XG4gICAgICAgICAgICAgICAgICAgICAgbGluay5jbGljaygpO1xuICAgICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmJvZHkucmVtb3ZlQ2hpbGQobGluayk7XG4gICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT0nZmxleCBpdGVtcy1jZW50ZXIgZ2FwLTEnXG4gICAgICAgICAgICAgICAgICAgIGRhdGEtdGVzdGlkPXtgYnV0dG9uLWRvd25sb2FkLWRvY3VtZW50LSR7Y3VycmVudEJpbGwuaWR9YH1cbiAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgPEZpbGVUZXh0IGNsYXNzTmFtZT0ndy0zIGgtMycgLz5cbiAgICAgICAgICAgICAgICAgICAgRG93bmxvYWRcbiAgICAgICAgICAgICAgICAgIDwvQnV0dG9uPlxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICl9XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHsvKiBBdHRhY2hlZCBkb2N1bWVudHMgZnJvbSBkb2N1bWVudHMgdGFibGUgKi99XG4gICAgICAgICAgICB7YmlsbERvY3VtZW50cy5tYXAoKGRvYzogYW55KSA9PiAoXG4gICAgICAgICAgICAgIDxkaXYga2V5PXtkb2MuaWR9IGNsYXNzTmFtZT0nZmxleCBpdGVtcy1jZW50ZXIganVzdGlmeS1iZXR3ZWVuIHAtMyBiZy1ibHVlLTUwIHJvdW5kZWQtbGcnPlxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSdmbGV4IGl0ZW1zLWNlbnRlciBnYXAtMic+XG4gICAgICAgICAgICAgICAgICA8RmlsZVRleHQgY2xhc3NOYW1lPSd3LTQgaC00IHRleHQtYmx1ZS02MDAnIC8+XG4gICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9J3RleHQtc20nPntkb2MubmFtZX08L3NwYW4+XG4gICAgICAgICAgICAgICAgICA8QmFkZ2UgdmFyaWFudD0nb3V0bGluZScgY2xhc3NOYW1lPSd0ZXh0LXhzJz5cbiAgICAgICAgICAgICAgICAgICAge2RvYy5kb2N1bWVudFR5cGUgfHwgJ0RvY3VtZW50J31cbiAgICAgICAgICAgICAgICAgIDwvQmFkZ2U+XG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9J2ZsZXggaXRlbXMtY2VudGVyIGdhcC0yJz5cbiAgICAgICAgICAgICAgICAgIDxCdXR0b25cbiAgICAgICAgICAgICAgICAgICAgdmFyaWFudD0nb3V0bGluZSdcbiAgICAgICAgICAgICAgICAgICAgc2l6ZT0nc20nXG4gICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9e2FzeW5jICgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gVXNlIGZldGNoIHdpdGggY3JlZGVudGlhbHMgdG8gZW5zdXJlIGF1dGhlbnRpY2F0aW9uXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKGAvYXBpL2RvY3VtZW50cy8ke2RvYy5pZH0vZmlsZWAsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgbWV0aG9kOiAnR0VUJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgY3JlZGVudGlhbHM6ICdpbmNsdWRlJywgLy8gSW5jbHVkZSBhdXRoZW50aWNhdGlvbiBjb29raWVzXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFyZXNwb25zZS5vaykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYFZpZXcgZmFpbGVkOiAke3Jlc3BvbnNlLnN0YXR1c30gJHtyZXNwb25zZS5zdGF0dXNUZXh0fWApO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBDb252ZXJ0IHJlc3BvbnNlIHRvIGJsb2IgYW5kIG9wZW4gaW4gbmV3IHRhYlxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgYmxvYiA9IGF3YWl0IHJlc3BvbnNlLmJsb2IoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHVybCA9IHdpbmRvdy5VUkwuY3JlYXRlT2JqZWN0VVJMKGJsb2IpO1xuICAgICAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBPcGVuIGluIG5ldyB0YWJcbiAgICAgICAgICAgICAgICAgICAgICAgIHdpbmRvdy5vcGVuKHVybCwgJ19ibGFuaycpO1xuICAgICAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBDbGVhbiB1cCB0aGUgVVJMIGFmdGVyIGEgZGVsYXkgdG8gYWxsb3cgdGhlIHRhYiB0byBsb2FkXG4gICAgICAgICAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgd2luZG93LlVSTC5yZXZva2VPYmplY3RVUkwodXJsKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sIDEwMDApO1xuICAgICAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ1ZpZXcgZmFpbGVkOicsIGVycm9yKTtcbiAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT0nZmxleCBpdGVtcy1jZW50ZXIgZ2FwLTEnXG4gICAgICAgICAgICAgICAgICAgIGRhdGEtdGVzdGlkPXtgYnV0dG9uLXZpZXctZG9jdW1lbnQtJHtkb2MuaWR9YH1cbiAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgPEZpbGVUZXh0IGNsYXNzTmFtZT0ndy0zIGgtMycgLz5cbiAgICAgICAgICAgICAgICAgICAgVmlld1xuICAgICAgICAgICAgICAgICAgPC9CdXR0b24+XG4gICAgICAgICAgICAgICAgICA8QnV0dG9uXG4gICAgICAgICAgICAgICAgICAgIHZhcmlhbnQ9J291dGxpbmUnXG4gICAgICAgICAgICAgICAgICAgIHNpemU9J3NtJ1xuICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXthc3luYyAoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFVzZSBmZXRjaCB3aXRoIGNyZWRlbnRpYWxzIHRvIGVuc3VyZSBhdXRoZW50aWNhdGlvblxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaChgL2FwaS9kb2N1bWVudHMvJHtkb2MuaWR9L2ZpbGU/ZG93bmxvYWQ9dHJ1ZWAsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgbWV0aG9kOiAnR0VUJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgY3JlZGVudGlhbHM6ICdpbmNsdWRlJywgLy8gSW5jbHVkZSBhdXRoZW50aWNhdGlvbiBjb29raWVzXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFyZXNwb25zZS5vaykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYERvd25sb2FkIGZhaWxlZDogJHtyZXNwb25zZS5zdGF0dXN9ICR7cmVzcG9uc2Uuc3RhdHVzVGV4dH1gKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gQ29udmVydCByZXNwb25zZSB0byBibG9iIGFuZCBjcmVhdGUgZG93bmxvYWRcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGJsb2IgPSBhd2FpdCByZXNwb25zZS5ibG9iKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB1cmwgPSB3aW5kb3cuVVJMLmNyZWF0ZU9iamVjdFVSTChibG9iKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgbGluayA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2EnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxpbmsuaHJlZiA9IHVybDtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxpbmsuZG93bmxvYWQgPSBkb2MuZmlsZU5hbWUgfHwgZG9jLm5hbWUgfHwgJ2RvY3VtZW50JztcbiAgICAgICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQobGluayk7XG4gICAgICAgICAgICAgICAgICAgICAgICBsaW5rLmNsaWNrKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIENsZWFuIHVwXG4gICAgICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5ib2R5LnJlbW92ZUNoaWxkKGxpbmspO1xuICAgICAgICAgICAgICAgICAgICAgICAgd2luZG93LlVSTC5yZXZva2VPYmplY3RVUkwodXJsKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKCdEb3dubG9hZCBmYWlsZWQ6JywgZXJyb3IpO1xuICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPSdmbGV4IGl0ZW1zLWNlbnRlciBnYXAtMSdcbiAgICAgICAgICAgICAgICAgICAgZGF0YS10ZXN0aWQ9e2BidXR0b24tZG93bmxvYWQtZG9jdW1lbnQtJHtkb2MuaWR9YH1cbiAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgPEZpbGVUZXh0IGNsYXNzTmFtZT0ndy0zIGgtMycgLz5cbiAgICAgICAgICAgICAgICAgICAgRG93bmxvYWRcbiAgICAgICAgICAgICAgICAgIDwvQnV0dG9uPlxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICkpfVxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICA8L2Rpdj5cbiAgICAgICl9XG5cbiAgICAgIHsvKiBBY3Rpb24gQnV0dG9ucyAqL31cbiAgICAgIDxkaXYgY2xhc3NOYW1lPSdmbGV4IGp1c3RpZnktYmV0d2VlbiBpdGVtcy1jZW50ZXIgcHQtNCBib3JkZXItdCc+XG4gICAgICAgIDxCdXR0b25cbiAgICAgICAgICBvbkNsaWNrPXtvbkVkaXRCaWxsfVxuICAgICAgICAgIGNsYXNzTmFtZT0nZmxleCBpdGVtcy1jZW50ZXIgZ2FwLTEnXG4gICAgICAgICAgZGF0YS10ZXN0aWQ9e2BidXR0b24tZWRpdC1iaWxsLSR7YmlsbC5pZH1gfVxuICAgICAgICA+XG4gICAgICAgICAgRWRpdCBCaWxsXG4gICAgICAgIDwvQnV0dG9uPlxuICAgICAgICA8QnV0dG9uIHZhcmlhbnQ9J291dGxpbmUnIG9uQ2xpY2s9e29uQ2FuY2VsfSBkYXRhLXRlc3RpZD17YGJ1dHRvbi1jbG9zZS1iaWxsLW1vZGFsLSR7YmlsbC5pZH1gfT5cbiAgICAgICAgICBDbG9zZVxuICAgICAgICA8L0J1dHRvbj5cbiAgICAgIDwvZGl2PlxuICAgIDwvZGl2PlxuICApO1xufVxuXG4vLyBFeHBvcnQgd2l0aCBoaWVyYXJjaGljYWwgc2VsZWN0aW9uIEhPQyAtIE1hbmFnZXIgYnVpbGRpbmdzIHBhZ2UgdXNlcyAyLWxldmVsIGhpZXJhcmNoeVxuZXhwb3J0IGRlZmF1bHQgd2l0aEhpZXJhcmNoaWNhbFNlbGVjdGlvbihCaWxsc1BhZ2UsIHtcbiAgaGllcmFyY2h5OiBbJ29yZ2FuaXphdGlvbicsICdidWlsZGluZyddXG59KTtcbiJdLCJ2ZXJzaW9uIjozfQ==