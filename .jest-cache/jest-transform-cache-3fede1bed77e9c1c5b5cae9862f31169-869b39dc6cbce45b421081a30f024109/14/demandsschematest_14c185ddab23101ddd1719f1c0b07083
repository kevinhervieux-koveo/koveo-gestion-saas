2f15c7b3b0ef908b49f22ddf130fa24a
"use strict";
/**
 * @file Demands Schema Validation Tests.
 * @description Tests for demand and comment schema validation using Zod schemas.
 */
Object.defineProperty(exports, "__esModule", { value: true });
const globals_1 = require("@jest/globals");
const operations_1 = require("../../../shared/schemas/operations");
(0, globals_1.describe)('Demands Schema Validation Tests', () => {
    (0, globals_1.describe)('insertDemandSchema', () => {
        (0, globals_1.it)('should validate a valid demand object', () => {
            const validDemand = {
                submitterId: '123e4567-e89b-12d3-a456-426614174000',
                type: 'maintenance',
                description: 'Faucet is leaking in the kitchen sink',
                residenceId: '223e4567-e89b-12d3-a456-426614174001',
                buildingId: '323e4567-e89b-12d3-a456-426614174002',
                assignationResidenceId: '223e4567-e89b-12d3-a456-426614174001',
                assignationBuildingId: '323e4567-e89b-12d3-a456-426614174002',
                status: 'submitted',
            };
            (0, globals_1.expect)(() => operations_1.insertDemandSchema.parse(validDemand)).not.toThrow();
        });
        (0, globals_1.it)('should validate demand with optional buildingId and residenceId', () => {
            const validDemandWithOptionalFields = {
                submitterId: '123e4567-e89b-12d3-a456-426614174000',
                type: 'maintenance',
                description: 'Faucet is leaking in the kitchen sink',
                status: 'submitted',
            };
            (0, globals_1.expect)(() => operations_1.insertDemandSchema.parse(validDemandWithOptionalFields)).not.toThrow();
        });
        (0, globals_1.it)('should validate demand with only buildingId provided', () => {
            const validDemandWithBuildingOnly = {
                submitterId: '123e4567-e89b-12d3-a456-426614174000',
                type: 'maintenance',
                description: 'Faucet is leaking in the kitchen sink',
                buildingId: '323e4567-e89b-12d3-a456-426614174002',
                status: 'submitted',
            };
            (0, globals_1.expect)(() => operations_1.insertDemandSchema.parse(validDemandWithBuildingOnly)).not.toThrow();
        });
        (0, globals_1.it)('should validate demand with only residenceId provided', () => {
            const validDemandWithResidenceOnly = {
                submitterId: '123e4567-e89b-12d3-a456-426614174000',
                type: 'maintenance',
                description: 'Faucet is leaking in the kitchen sink',
                residenceId: '223e4567-e89b-12d3-a456-426614174001',
                status: 'submitted',
            };
            (0, globals_1.expect)(() => operations_1.insertDemandSchema.parse(validDemandWithResidenceOnly)).not.toThrow();
        });
        (0, globals_1.it)('should require submitterId', () => {
            const invalidDemand = {
                type: 'maintenance',
                description: 'Test description',
                residenceId: '223e4567-e89b-12d3-a456-426614174001',
                buildingId: '323e4567-e89b-12d3-a456-426614174002',
            };
            (0, globals_1.expect)(() => operations_1.insertDemandSchema.parse(invalidDemand)).toThrow();
        });
        (0, globals_1.it)('should require only submitterId, type, and description as minimum fields', () => {
            const minimalValidDemand = {
                submitterId: '123e4567-e89b-12d3-a456-426614174000',
                type: 'maintenance',
                description: 'Minimal test description',
            };
            (0, globals_1.expect)(() => operations_1.insertDemandSchema.parse(minimalValidDemand)).not.toThrow();
        });
        (0, globals_1.it)('should validate demand type enum', () => {
            const validTypes = ['maintenance', 'complaint', 'information', 'other'];
            validTypes.forEach((type) => {
                const demand = {
                    submitterId: '123e4567-e89b-12d3-a456-426614174000',
                    type,
                    description: 'Test description',
                    residenceId: '223e4567-e89b-12d3-a456-426614174001',
                    buildingId: '323e4567-e89b-12d3-a456-426614174002',
                };
                (0, globals_1.expect)(() => operations_1.insertDemandSchema.parse(demand)).not.toThrow();
            });
        });
        (0, globals_1.it)('should reject invalid demand type', () => {
            const invalidDemand = {
                submitterId: '123e4567-e89b-12d3-a456-426614174000',
                type: 'invalid_type',
                description: 'Test description',
                residenceId: '223e4567-e89b-12d3-a456-426614174001',
                buildingId: '323e4567-e89b-12d3-a456-426614174002',
            };
            (0, globals_1.expect)(() => operations_1.insertDemandSchema.parse(invalidDemand)).toThrow();
        });
        (0, globals_1.it)('should require description', () => {
            const invalidDemand = {
                submitterId: '123e4567-e89b-12d3-a456-426614174000',
                type: 'maintenance',
                residenceId: '223e4567-e89b-12d3-a456-426614174001',
                buildingId: '323e4567-e89b-12d3-a456-426614174002',
            };
            (0, globals_1.expect)(() => operations_1.insertDemandSchema.parse(invalidDemand)).toThrow();
        });
        (0, globals_1.it)('should validate description length', () => {
            const shortDescription = 'This is a reasonable description for testing purposes';
            const longDescription = 'This is a longer description that provides more detail about the maintenance request and should still be within acceptable limits for the demand system';
            const demandWithShortDesc = {
                submitterId: '123e4567-e89b-12d3-a456-426614174000',
                type: 'maintenance',
                description: shortDescription,
                residenceId: '223e4567-e89b-12d3-a456-426614174001',
                buildingId: '323e4567-e89b-12d3-a456-426614174002',
            };
            const demandWithLongDesc = {
                submitterId: '123e4567-e89b-12d3-a456-426614174000',
                type: 'maintenance',
                description: longDescription,
                residenceId: '223e4567-e89b-12d3-a456-426614174001',
                buildingId: '323e4567-e89b-12d3-a456-426614174002',
            };
            // Both should pass with reasonable lengths
            (0, globals_1.expect)(() => operations_1.insertDemandSchema.parse(demandWithShortDesc)).not.toThrow();
            (0, globals_1.expect)(() => operations_1.insertDemandSchema.parse(demandWithLongDesc)).not.toThrow();
        });
        (0, globals_1.it)('should accept optional fields', () => {
            const demandWithOptionals = {
                submitterId: '123e4567-e89b-12d3-a456-426614174000',
                type: 'maintenance',
                description: 'Test description with optional fields',
                residenceId: '223e4567-e89b-12d3-a456-426614174001',
                buildingId: '323e4567-e89b-12d3-a456-426614174002',
                assignationResidenceId: '223e4567-e89b-12d3-a456-426614174001',
                assignationBuildingId: '323e4567-e89b-12d3-a456-426614174002',
                reviewNotes: 'Initial review notes',
            };
            (0, globals_1.expect)(() => operations_1.insertDemandSchema.parse(demandWithOptionals)).not.toThrow();
        });
    });
    (0, globals_1.describe)('insertDemandCommentSchema', () => {
        (0, globals_1.it)('should validate a valid comment object', () => {
            const validComment = {
                demandId: '423e4567-e89b-12d3-a456-426614174003',
                commenterId: '123e4567-e89b-12d3-a456-426614174000',
                commentText: 'This is a valid comment about the demand',
            };
            (0, globals_1.expect)(() => operations_1.insertDemandCommentSchema.parse(validComment)).not.toThrow();
        });
        (0, globals_1.it)('should require demandId', () => {
            const invalidComment = {
                orderIndex: 1.0,
                comment: 'Missing demand ID',
                createdBy: '123e4567-e89b-12d3-a456-426614174000',
            };
            (0, globals_1.expect)(() => operations_1.insertDemandCommentSchema.parse(invalidComment)).toThrow();
        });
        (0, globals_1.it)('should require commenterId', () => {
            const invalidComment = {
                demandId: '423e4567-e89b-12d3-a456-426614174003',
                commentText: 'Missing commenter ID',
            };
            (0, globals_1.expect)(() => operations_1.insertDemandCommentSchema.parse(invalidComment)).toThrow();
        });
        (0, globals_1.it)('should require commentText', () => {
            const invalidComment = {
                demandId: '423e4567-e89b-12d3-a456-426614174003',
                commenterId: '123e4567-e89b-12d3-a456-426614174000',
            };
            (0, globals_1.expect)(() => operations_1.insertDemandCommentSchema.parse(invalidComment)).toThrow();
        });
        (0, globals_1.it)('should validate content length', () => {
            const shortContent = 'This is a reasonable comment.';
            const longContent = 'This is a longer comment that provides more detail about the demand and includes additional context that would be helpful for understanding the issue.';
            const commentWithShortContent = {
                demandId: '423e4567-e89b-12d3-a456-426614174003',
                commenterId: '123e4567-e89b-12d3-a456-426614174000',
                commentText: shortContent,
            };
            const commentWithLongContent = {
                demandId: '423e4567-e89b-12d3-a456-426614174003',
                commenterId: '123e4567-e89b-12d3-a456-426614174000',
                commentText: longContent,
            };
            // Both should pass with reasonable lengths
            (0, globals_1.expect)(() => operations_1.insertDemandCommentSchema.parse(commentWithShortContent)).not.toThrow();
            (0, globals_1.expect)(() => operations_1.insertDemandCommentSchema.parse(commentWithLongContent)).not.toThrow();
        });
        (0, globals_1.it)('should accept valid comment data', () => {
            const comment = {
                demandId: '423e4567-e89b-12d3-a456-426614174003',
                commenterId: '123e4567-e89b-12d3-a456-426614174000',
                commentText: 'Valid comment data',
            };
            (0, globals_1.expect)(() => operations_1.insertDemandCommentSchema.parse(comment)).not.toThrow();
        });
        (0, globals_1.it)('should validate comment structure', () => {
            const validComment = {
                demandId: '423e4567-e89b-12d3-a456-426614174003',
                commenterId: '123e4567-e89b-12d3-a456-426614174000',
                commentText: 'Comment with proper structure',
            };
            const invalidComment = {
                demandId: '423e4567-e89b-12d3-a456-426614174003',
                commentText: 'Comment without commenter ID',
            };
            (0, globals_1.expect)(() => operations_1.insertDemandCommentSchema.parse(validComment)).not.toThrow();
            (0, globals_1.expect)(() => operations_1.insertDemandCommentSchema.parse(invalidComment)).toThrow();
        });
    });
    (0, globals_1.describe)('Enum Validation', () => {
        (0, globals_1.it)('should validate demand types', () => {
            const validTypes = ['maintenance', 'complaint', 'information', 'other'];
            const invalidTypes = ['invalid', 'repair', 'request', ''];
            validTypes.forEach((type) => {
                (0, globals_1.expect)(operations_1.demandTypeEnum.enumValues).toContain(type);
            });
            invalidTypes.forEach((type) => {
                (0, globals_1.expect)(operations_1.demandTypeEnum.enumValues).not.toContain(type);
            });
        });
        (0, globals_1.it)('should validate demand statuses', () => {
            const validStatuses = [
                'draft',
                'submitted',
                'under_review',
                'approved',
                'in_progress',
                'completed',
                'rejected',
                'cancelled',
            ];
            const invalidStatuses = ['pending', 'open', 'closed', 'resolved'];
            validStatuses.forEach((status) => {
                (0, globals_1.expect)(operations_1.demandStatusEnum.enumValues).toContain(status);
            });
            invalidStatuses.forEach((status) => {
                (0, globals_1.expect)(operations_1.demandStatusEnum.enumValues).not.toContain(status);
            });
        });
    });
    (0, globals_1.describe)('Edge Cases', () => {
        (0, globals_1.it)('should handle UUID validation for IDs', () => {
            const validUUID = '123e4567-e89b-12d3-a456-426614174000';
            const invalidUUIDs = ['invalid', '123', '', null, undefined];
            const validDemand = {
                submitterId: validUUID,
                type: 'maintenance',
                description: 'Test with valid UUID',
                residenceId: validUUID,
                buildingId: validUUID,
            };
            (0, globals_1.expect)(() => operations_1.insertDemandSchema.parse(validDemand)).not.toThrow();
            invalidUUIDs.forEach((invalidId) => {
                const invalidDemand = {
                    submitterId: invalidId,
                    type: 'maintenance',
                    description: 'Test with invalid UUID',
                    residenceId: validUUID,
                    buildingId: validUUID,
                };
                (0, globals_1.expect)(() => operations_1.insertDemandSchema.parse(invalidDemand)).toThrow();
            });
        });
        (0, globals_1.it)('should handle special characters in descriptions', () => {
            const descriptionsWithSpecialChars = [
                'Description with √©mojis üè† and a√ßc√©nts',
                'Description with "quotes" and apostrophe\'s',
                'Description with <tags> and &symbols;',
                'Multi-line\ndescription\nwith breaks',
                'Description with numbers 123 and symbols !@#$%^&*()',
            ];
            descriptionsWithSpecialChars.forEach((description) => {
                const demand = {
                    submitterId: '123e4567-e89b-12d3-a456-426614174000',
                    type: 'maintenance',
                    description,
                    residenceId: '223e4567-e89b-12d3-a456-426614174001',
                    buildingId: '323e4567-e89b-12d3-a456-426614174002',
                };
                (0, globals_1.expect)(() => operations_1.insertDemandSchema.parse(demand)).not.toThrow();
            });
        });
        (0, globals_1.it)('should handle boundary values for string lengths', () => {
            const minValidDescription = 'a'.repeat(10); // Minimum valid length
            const maxValidDescription = 'a'.repeat(2000); // Maximum valid length
            const belowMin = 'a'.repeat(9);
            const aboveMax = 'a'.repeat(2001);
            const demandMinValid = {
                submitterId: '123e4567-e89b-12d3-a456-426614174000',
                type: 'maintenance',
                description: minValidDescription,
                residenceId: '223e4567-e89b-12d3-a456-426614174001',
                buildingId: '323e4567-e89b-12d3-a456-426614174002',
            };
            const demandMaxValid = {
                submitterId: '123e4567-e89b-12d3-a456-426614174000',
                type: 'maintenance',
                description: maxValidDescription,
                residenceId: '223e4567-e89b-12d3-a456-426614174001',
                buildingId: '323e4567-e89b-12d3-a456-426614174002',
            };
            (0, globals_1.expect)(() => operations_1.insertDemandSchema.parse(demandMinValid)).not.toThrow();
            (0, globals_1.expect)(() => operations_1.insertDemandSchema.parse(demandMaxValid)).not.toThrow();
            const demandBelowMin = { ...demandMinValid, description: belowMin };
            const demandAboveMax = { ...demandMaxValid, description: aboveMax };
            (0, globals_1.expect)(() => operations_1.insertDemandSchema.parse(demandBelowMin)).toThrow();
            (0, globals_1.expect)(() => operations_1.insertDemandSchema.parse(demandAboveMax)).toThrow();
        });
    });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiL2hvbWUvcnVubmVyL3dvcmtzcGFjZS90ZXN0cy91bml0L2RlbWFuZHMvZGVtYW5kcy1zY2hlbWEudGVzdC50cyIsIm1hcHBpbmdzIjoiO0FBQUE7OztHQUdHOztBQUVILDJDQUFxRDtBQUNyRCxtRUFLNEM7QUFFNUMsSUFBQSxrQkFBUSxFQUFDLGlDQUFpQyxFQUFFLEdBQUcsRUFBRTtJQUMvQyxJQUFBLGtCQUFRLEVBQUMsb0JBQW9CLEVBQUUsR0FBRyxFQUFFO1FBQ2xDLElBQUEsWUFBRSxFQUFDLHVDQUF1QyxFQUFFLEdBQUcsRUFBRTtZQUMvQyxNQUFNLFdBQVcsR0FBRztnQkFDbEIsV0FBVyxFQUFFLHNDQUFzQztnQkFDbkQsSUFBSSxFQUFFLGFBQWE7Z0JBQ25CLFdBQVcsRUFBRSx1Q0FBdUM7Z0JBQ3BELFdBQVcsRUFBRSxzQ0FBc0M7Z0JBQ25ELFVBQVUsRUFBRSxzQ0FBc0M7Z0JBQ2xELHNCQUFzQixFQUFFLHNDQUFzQztnQkFDOUQscUJBQXFCLEVBQUUsc0NBQXNDO2dCQUM3RCxNQUFNLEVBQUUsV0FBVzthQUNwQixDQUFDO1lBRUYsSUFBQSxnQkFBTSxFQUFDLEdBQUcsRUFBRSxDQUFDLCtCQUFrQixDQUFDLEtBQUssQ0FBQyxXQUFXLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxPQUFPLEVBQUUsQ0FBQztRQUNwRSxDQUFDLENBQUMsQ0FBQztRQUVILElBQUEsWUFBRSxFQUFDLGlFQUFpRSxFQUFFLEdBQUcsRUFBRTtZQUN6RSxNQUFNLDZCQUE2QixHQUFHO2dCQUNwQyxXQUFXLEVBQUUsc0NBQXNDO2dCQUNuRCxJQUFJLEVBQUUsYUFBYTtnQkFDbkIsV0FBVyxFQUFFLHVDQUF1QztnQkFDcEQsTUFBTSxFQUFFLFdBQVc7YUFDcEIsQ0FBQztZQUVGLElBQUEsZ0JBQU0sRUFBQyxHQUFHLEVBQUUsQ0FBQywrQkFBa0IsQ0FBQyxLQUFLLENBQUMsNkJBQTZCLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxPQUFPLEVBQUUsQ0FBQztRQUN0RixDQUFDLENBQUMsQ0FBQztR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RSxDQUFDO1lBQ2pFLElBQUEsZ0JBQU0sRUFBQyxHQUFHLEVBQUUsQ0FBQywrQkFBa0IsQ0FBQyxLQUFLLENBQUMsY0FBYyxDQUFDLENBQUMsQ0FBQyxPQUFPLEVBQUUsQ0FBQztRQUNuRSxDQUFDLENBQUMsQ0FBQztJQUNMLENBQUMsQ0FBQyxDQUFDO0FBQ0wsQ0FBQyxDQUFDLENBQUMiLCJuYW1lcyI6W10sInNvdXJjZXMiOlsiL2hvbWUvcnVubmVyL3dvcmtzcGFjZS90ZXN0cy91bml0L2RlbWFuZHMvZGVtYW5kcy1zY2hlbWEudGVzdC50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIEBmaWxlIERlbWFuZHMgU2NoZW1hIFZhbGlkYXRpb24gVGVzdHMuXG4gKiBAZGVzY3JpcHRpb24gVGVzdHMgZm9yIGRlbWFuZCBhbmQgY29tbWVudCBzY2hlbWEgdmFsaWRhdGlvbiB1c2luZyBab2Qgc2NoZW1hcy5cbiAqL1xuXG5pbXBvcnQgeyBkZXNjcmliZSwgaXQsIGV4cGVjdCB9IGZyb20gJ0BqZXN0L2dsb2JhbHMnO1xuaW1wb3J0IHtcbiAgaW5zZXJ0RGVtYW5kU2NoZW1hLFxuICBpbnNlcnREZW1hbmRDb21tZW50U2NoZW1hLFxuICBkZW1hbmRUeXBlRW51bSxcbiAgZGVtYW5kU3RhdHVzRW51bSxcbn0gZnJvbSAnLi4vLi4vLi4vc2hhcmVkL3NjaGVtYXMvb3BlcmF0aW9ucyc7XG5cbmRlc2NyaWJlKCdEZW1hbmRzIFNjaGVtYSBWYWxpZGF0aW9uIFRlc3RzJywgKCkgPT4ge1xuICBkZXNjcmliZSgnaW5zZXJ0RGVtYW5kU2NoZW1hJywgKCkgPT4ge1xuICAgIGl0KCdzaG91bGQgdmFsaWRhdGUgYSB2YWxpZCBkZW1hbmQgb2JqZWN0JywgKCkgPT4ge1xuICAgICAgY29uc3QgdmFsaWREZW1hbmQgPSB7XG4gICAgICAgIHN1Ym1pdHRlcklkOiAnMTIzZTQ1NjctZTg5Yi0xMmQzLWE0NTYtNDI2NjE0MTc0MDAwJyxcbiAgICAgICAgdHlwZTogJ21haW50ZW5hbmNlJyxcbiAgICAgICAgZGVzY3JpcHRpb246ICdGYXVjZXQgaXMgbGVha2luZyBpbiB0aGUga2l0Y2hlbiBzaW5rJyxcbiAgICAgICAgcmVzaWRlbmNlSWQ6ICcyMjNlNDU2Ny1lODliLTEyZDMtYTQ1Ni00MjY2MTQxNzQwMDEnLFxuICAgICAgICBidWlsZGluZ0lkOiAnMzIzZTQ1NjctZTg5Yi0xMmQzLWE0NTYtNDI2NjE0MTc0MDAyJyxcbiAgICAgICAgYXNzaWduYXRpb25SZXNpZGVuY2VJZDogJzIyM2U0NTY3LWU4OWItMTJkMy1hNDU2LTQyNjYxNDE3NDAwMScsXG4gICAgICAgIGFzc2lnbmF0aW9uQnVpbGRpbmdJZDogJzMyM2U0NTY3LWU4OWItMTJkMy1hNDU2LTQyNjYxNDE3NDAwMicsXG4gICAgICAgIHN0YXR1czogJ3N1Ym1pdHRlZCcsXG4gICAgICB9O1xuXG4gICAgICBleHBlY3QoKCkgPT4gaW5zZXJ0RGVtYW5kU2NoZW1hLnBhcnNlKHZhbGlkRGVtYW5kKSkubm90LnRvVGhyb3coKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgdmFsaWRhdGUgZGVtYW5kIHdpdGggb3B0aW9uYWwgYnVpbGRpbmdJZCBhbmQgcmVzaWRlbmNlSWQnLCAoKSA9PiB7XG4gICAgICBjb25zdCB2YWxpZERlbWFuZFdpdGhPcHRpb25hbEZpZWxkcyA9IHtcbiAgICAgICAgc3VibWl0dGVySWQ6ICcxMjNlNDU2Ny1lODliLTEyZDMtYTQ1Ni00MjY2MTQxNzQwMDAnLFxuICAgICAgICB0eXBlOiAnbWFpbnRlbmFuY2UnLFxuICAgICAgICBkZXNjcmlwdGlvbjogJ0ZhdWNldCBpcyBsZWFraW5nIGluIHRoZSBraXRjaGVuIHNpbmsnLFxuICAgICAgICBzdGF0dXM6ICdzdWJtaXR0ZWQnLFxuICAgICAgfTtcblxuICAgICAgZXhwZWN0KCgpID0+IGluc2VydERlbWFuZFNjaGVtYS5wYXJzZSh2YWxpZERlbWFuZFdpdGhPcHRpb25hbEZpZWxkcykpLm5vdC50b1Rocm93KCk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIHZhbGlkYXRlIGRlbWFuZCB3aXRoIG9ubHkgYnVpbGRpbmdJZCBwcm92aWRlZCcsICgpID0+IHtcbiAgICAgIGNvbnN0IHZhbGlkRGVtYW5kV2l0aEJ1aWxkaW5nT25seSA9IHtcbiAgICAgICAgc3VibWl0dGVySWQ6ICcxMjNlNDU2Ny1lODliLTEyZDMtYTQ1Ni00MjY2MTQxNzQwMDAnLFxuICAgICAgICB0eXBlOiAnbWFpbnRlbmFuY2UnLFxuICAgICAgICBkZXNjcmlwdGlvbjogJ0ZhdWNldCBpcyBsZWFraW5nIGluIHRoZSBraXRjaGVuIHNpbmsnLFxuICAgICAgICBidWlsZGluZ0lkOiAnMzIzZTQ1NjctZTg5Yi0xMmQzLWE0NTYtNDI2NjE0MTc0MDAyJyxcbiAgICAgICAgc3RhdHVzOiAnc3VibWl0dGVkJyxcbiAgICAgIH07XG5cbiAgICAgIGV4cGVjdCgoKSA9PiBpbnNlcnREZW1hbmRTY2hlbWEucGFyc2UodmFsaWREZW1hbmRXaXRoQnVpbGRpbmdPbmx5KSkubm90LnRvVGhyb3coKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgdmFsaWRhdGUgZGVtYW5kIHdpdGggb25seSByZXNpZGVuY2VJZCBwcm92aWRlZCcsICgpID0+IHtcbiAgICAgIGNvbnN0IHZhbGlkRGVtYW5kV2l0aFJlc2lkZW5jZU9ubHkgPSB7XG4gICAgICAgIHN1Ym1pdHRlcklkOiAnMTIzZTQ1NjctZTg5Yi0xMmQzLWE0NTYtNDI2NjE0MTc0MDAwJyxcbiAgICAgICAgdHlwZTogJ21haW50ZW5hbmNlJyxcbiAgICAgICAgZGVzY3JpcHRpb246ICdGYXVjZXQgaXMgbGVha2luZyBpbiB0aGUga2l0Y2hlbiBzaW5rJyxcbiAgICAgICAgcmVzaWRlbmNlSWQ6ICcyMjNlNDU2Ny1lODliLTEyZDMtYTQ1Ni00MjY2MTQxNzQwMDEnLFxuICAgICAgICBzdGF0dXM6ICdzdWJtaXR0ZWQnLFxuICAgICAgfTtcblxuICAgICAgZXhwZWN0KCgpID0+IGluc2VydERlbWFuZFNjaGVtYS5wYXJzZSh2YWxpZERlbWFuZFdpdGhSZXNpZGVuY2VPbmx5KSkubm90LnRvVGhyb3coKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgcmVxdWlyZSBzdWJtaXR0ZXJJZCcsICgpID0+IHtcbiAgICAgIGNvbnN0IGludmFsaWREZW1hbmQgPSB7XG4gICAgICAgIHR5cGU6ICdtYWludGVuYW5jZScsXG4gICAgICAgIGRlc2NyaXB0aW9uOiAnVGVzdCBkZXNjcmlwdGlvbicsXG4gICAgICAgIHJlc2lkZW5jZUlkOiAnMjIzZTQ1NjctZTg5Yi0xMmQzLWE0NTYtNDI2NjE0MTc0MDAxJyxcbiAgICAgICAgYnVpbGRpbmdJZDogJzMyM2U0NTY3LWU4OWItMTJkMy1hNDU2LTQyNjYxNDE3NDAwMicsXG4gICAgICB9O1xuXG4gICAgICBleHBlY3QoKCkgPT4gaW5zZXJ0RGVtYW5kU2NoZW1hLnBhcnNlKGludmFsaWREZW1hbmQpKS50b1Rocm93KCk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIHJlcXVpcmUgb25seSBzdWJtaXR0ZXJJZCwgdHlwZSwgYW5kIGRlc2NyaXB0aW9uIGFzIG1pbmltdW0gZmllbGRzJywgKCkgPT4ge1xuICAgICAgY29uc3QgbWluaW1hbFZhbGlkRGVtYW5kID0ge1xuICAgICAgICBzdWJtaXR0ZXJJZDogJzEyM2U0NTY3LWU4OWItMTJkMy1hNDU2LTQyNjYxNDE3NDAwMCcsXG4gICAgICAgIHR5cGU6ICdtYWludGVuYW5jZScsXG4gICAgICAgIGRlc2NyaXB0aW9uOiAnTWluaW1hbCB0ZXN0IGRlc2NyaXB0aW9uJyxcbiAgICAgIH07XG5cbiAgICAgIGV4cGVjdCgoKSA9PiBpbnNlcnREZW1hbmRTY2hlbWEucGFyc2UobWluaW1hbFZhbGlkRGVtYW5kKSkubm90LnRvVGhyb3coKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgdmFsaWRhdGUgZGVtYW5kIHR5cGUgZW51bScsICgpID0+IHtcbiAgICAgIGNvbnN0IHZhbGlkVHlwZXMgPSBbJ21haW50ZW5hbmNlJywgJ2NvbXBsYWludCcsICdpbmZvcm1hdGlvbicsICdvdGhlciddO1xuXG4gICAgICB2YWxpZFR5cGVzLmZvckVhY2goKHR5cGUpID0+IHtcbiAgICAgICAgY29uc3QgZGVtYW5kID0ge1xuICAgICAgICAgIHN1Ym1pdHRlcklkOiAnMTIzZTQ1NjctZTg5Yi0xMmQzLWE0NTYtNDI2NjE0MTc0MDAwJyxcbiAgICAgICAgICB0eXBlLFxuICAgICAgICAgIGRlc2NyaXB0aW9uOiAnVGVzdCBkZXNjcmlwdGlvbicsXG4gICAgICAgICAgcmVzaWRlbmNlSWQ6ICcyMjNlNDU2Ny1lODliLTEyZDMtYTQ1Ni00MjY2MTQxNzQwMDEnLFxuICAgICAgICAgIGJ1aWxkaW5nSWQ6ICczMjNlNDU2Ny1lODliLTEyZDMtYTQ1Ni00MjY2MTQxNzQwMDInLFxuICAgICAgICB9O1xuXG4gICAgICAgIGV4cGVjdCgoKSA9PiBpbnNlcnREZW1hbmRTY2hlbWEucGFyc2UoZGVtYW5kKSkubm90LnRvVGhyb3coKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCByZWplY3QgaW52YWxpZCBkZW1hbmQgdHlwZScsICgpID0+IHtcbiAgICAgIGNvbnN0IGludmFsaWREZW1hbmQgPSB7XG4gICAgICAgIHN1Ym1pdHRlcklkOiAnMTIzZTQ1NjctZTg5Yi0xMmQzLWE0NTYtNDI2NjE0MTc0MDAwJyxcbiAgICAgICAgdHlwZTogJ2ludmFsaWRfdHlwZScsXG4gICAgICAgIGRlc2NyaXB0aW9uOiAnVGVzdCBkZXNjcmlwdGlvbicsXG4gICAgICAgIHJlc2lkZW5jZUlkOiAnMjIzZTQ1NjctZTg5Yi0xMmQzLWE0NTYtNDI2NjE0MTc0MDAxJyxcbiAgICAgICAgYnVpbGRpbmdJZDogJzMyM2U0NTY3LWU4OWItMTJkMy1hNDU2LTQyNjYxNDE3NDAwMicsXG4gICAgICB9O1xuXG4gICAgICBleHBlY3QoKCkgPT4gaW5zZXJ0RGVtYW5kU2NoZW1hLnBhcnNlKGludmFsaWREZW1hbmQpKS50b1Rocm93KCk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIHJlcXVpcmUgZGVzY3JpcHRpb24nLCAoKSA9PiB7XG4gICAgICBjb25zdCBpbnZhbGlkRGVtYW5kID0ge1xuICAgICAgICBzdWJtaXR0ZXJJZDogJzEyM2U0NTY3LWU4OWItMTJkMy1hNDU2LTQyNjYxNDE3NDAwMCcsXG4gICAgICAgIHR5cGU6ICdtYWludGVuYW5jZScsXG4gICAgICAgIHJlc2lkZW5jZUlkOiAnMjIzZTQ1NjctZTg5Yi0xMmQzLWE0NTYtNDI2NjE0MTc0MDAxJyxcbiAgICAgICAgYnVpbGRpbmdJZDogJzMyM2U0NTY3LWU4OWItMTJkMy1hNDU2LTQyNjYxNDE3NDAwMicsXG4gICAgICB9O1xuXG4gICAgICBleHBlY3QoKCkgPT4gaW5zZXJ0RGVtYW5kU2NoZW1hLnBhcnNlKGludmFsaWREZW1hbmQpKS50b1Rocm93KCk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIHZhbGlkYXRlIGRlc2NyaXB0aW9uIGxlbmd0aCcsICgpID0+IHtcbiAgICAgIGNvbnN0IHNob3J0RGVzY3JpcHRpb24gPSAnVGhpcyBpcyBhIHJlYXNvbmFibGUgZGVzY3JpcHRpb24gZm9yIHRlc3RpbmcgcHVycG9zZXMnO1xuICAgICAgY29uc3QgbG9uZ0Rlc2NyaXB0aW9uID1cbiAgICAgICAgJ1RoaXMgaXMgYSBsb25nZXIgZGVzY3JpcHRpb24gdGhhdCBwcm92aWRlcyBtb3JlIGRldGFpbCBhYm91dCB0aGUgbWFpbnRlbmFuY2UgcmVxdWVzdCBhbmQgc2hvdWxkIHN0aWxsIGJlIHdpdGhpbiBhY2NlcHRhYmxlIGxpbWl0cyBmb3IgdGhlIGRlbWFuZCBzeXN0ZW0nO1xuXG4gICAgICBjb25zdCBkZW1hbmRXaXRoU2hvcnREZXNjID0ge1xuICAgICAgICBzdWJtaXR0ZXJJZDogJzEyM2U0NTY3LWU4OWItMTJkMy1hNDU2LTQyNjYxNDE3NDAwMCcsXG4gICAgICAgIHR5cGU6ICdtYWludGVuYW5jZScsXG4gICAgICAgIGRlc2NyaXB0aW9uOiBzaG9ydERlc2NyaXB0aW9uLFxuICAgICAgICByZXNpZGVuY2VJZDogJzIyM2U0NTY3LWU4OWItMTJkMy1hNDU2LTQyNjYxNDE3NDAwMScsXG4gICAgICAgIGJ1aWxkaW5nSWQ6ICczMjNlNDU2Ny1lODliLTEyZDMtYTQ1Ni00MjY2MTQxNzQwMDInLFxuICAgICAgfTtcblxuICAgICAgY29uc3QgZGVtYW5kV2l0aExvbmdEZXNjID0ge1xuICAgICAgICBzdWJtaXR0ZXJJZDogJzEyM2U0NTY3LWU4OWItMTJkMy1hNDU2LTQyNjYxNDE3NDAwMCcsXG4gICAgICAgIHR5cGU6ICdtYWludGVuYW5jZScsXG4gICAgICAgIGRlc2NyaXB0aW9uOiBsb25nRGVzY3JpcHRpb24sXG4gICAgICAgIHJlc2lkZW5jZUlkOiAnMjIzZTQ1NjctZTg5Yi0xMmQzLWE0NTYtNDI2NjE0MTc0MDAxJyxcbiAgICAgICAgYnVpbGRpbmdJZDogJzMyM2U0NTY3LWU4OWItMTJkMy1hNDU2LTQyNjYxNDE3NDAwMicsXG4gICAgICB9O1xuXG4gICAgICAvLyBCb3RoIHNob3VsZCBwYXNzIHdpdGggcmVhc29uYWJsZSBsZW5ndGhzXG4gICAgICBleHBlY3QoKCkgPT4gaW5zZXJ0RGVtYW5kU2NoZW1hLnBhcnNlKGRlbWFuZFdpdGhTaG9ydERlc2MpKS5ub3QudG9UaHJvdygpO1xuICAgICAgZXhwZWN0KCgpID0+IGluc2VydERlbWFuZFNjaGVtYS5wYXJzZShkZW1hbmRXaXRoTG9uZ0Rlc2MpKS5ub3QudG9UaHJvdygpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBhY2NlcHQgb3B0aW9uYWwgZmllbGRzJywgKCkgPT4ge1xuICAgICAgY29uc3QgZGVtYW5kV2l0aE9wdGlvbmFscyA9IHtcbiAgICAgICAgc3VibWl0dGVySWQ6ICcxMjNlNDU2Ny1lODliLTEyZDMtYTQ1Ni00MjY2MTQxNzQwMDAnLFxuICAgICAgICB0eXBlOiAnbWFpbnRlbmFuY2UnLFxuICAgICAgICBkZXNjcmlwdGlvbjogJ1Rlc3QgZGVzY3JpcHRpb24gd2l0aCBvcHRpb25hbCBmaWVsZHMnLFxuICAgICAgICByZXNpZGVuY2VJZDogJzIyM2U0NTY3LWU4OWItMTJkMy1hNDU2LTQyNjYxNDE3NDAwMScsXG4gICAgICAgIGJ1aWxkaW5nSWQ6ICczMjNlNDU2Ny1lODliLTEyZDMtYTQ1Ni00MjY2MTQxNzQwMDInLFxuICAgICAgICBhc3NpZ25hdGlvblJlc2lkZW5jZUlkOiAnMjIzZTQ1NjctZTg5Yi0xMmQzLWE0NTYtNDI2NjE0MTc0MDAxJyxcbiAgICAgICAgYXNzaWduYXRpb25CdWlsZGluZ0lkOiAnMzIzZTQ1NjctZTg5Yi0xMmQzLWE0NTYtNDI2NjE0MTc0MDAyJyxcbiAgICAgICAgcmV2aWV3Tm90ZXM6ICdJbml0aWFsIHJldmlldyBub3RlcycsXG4gICAgICB9O1xuXG4gICAgICBleHBlY3QoKCkgPT4gaW5zZXJ0RGVtYW5kU2NoZW1hLnBhcnNlKGRlbWFuZFdpdGhPcHRpb25hbHMpKS5ub3QudG9UaHJvdygpO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnaW5zZXJ0RGVtYW5kQ29tbWVudFNjaGVtYScsICgpID0+IHtcbiAgICBpdCgnc2hvdWxkIHZhbGlkYXRlIGEgdmFsaWQgY29tbWVudCBvYmplY3QnLCAoKSA9PiB7XG4gICAgICBjb25zdCB2YWxpZENvbW1lbnQgPSB7XG4gICAgICAgIGRlbWFuZElkOiAnNDIzZTQ1NjctZTg5Yi0xMmQzLWE0NTYtNDI2NjE0MTc0MDAzJyxcbiAgICAgICAgY29tbWVudGVySWQ6ICcxMjNlNDU2Ny1lODliLTEyZDMtYTQ1Ni00MjY2MTQxNzQwMDAnLFxuICAgICAgICBjb21tZW50VGV4dDogJ1RoaXMgaXMgYSB2YWxpZCBjb21tZW50IGFib3V0IHRoZSBkZW1hbmQnLFxuICAgICAgfTtcblxuICAgICAgZXhwZWN0KCgpID0+IGluc2VydERlbWFuZENvbW1lbnRTY2hlbWEucGFyc2UodmFsaWRDb21tZW50KSkubm90LnRvVGhyb3coKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgcmVxdWlyZSBkZW1hbmRJZCcsICgpID0+IHtcbiAgICAgIGNvbnN0IGludmFsaWRDb21tZW50ID0ge1xuICAgICAgICBvcmRlckluZGV4OiAxLjAsXG4gICAgICAgIGNvbW1lbnQ6ICdNaXNzaW5nIGRlbWFuZCBJRCcsXG4gICAgICAgIGNyZWF0ZWRCeTogJzEyM2U0NTY3LWU4OWItMTJkMy1hNDU2LTQyNjYxNDE3NDAwMCcsXG4gICAgICB9O1xuXG4gICAgICBleHBlY3QoKCkgPT4gaW5zZXJ0RGVtYW5kQ29tbWVudFNjaGVtYS5wYXJzZShpbnZhbGlkQ29tbWVudCkpLnRvVGhyb3coKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgcmVxdWlyZSBjb21tZW50ZXJJZCcsICgpID0+IHtcbiAgICAgIGNvbnN0IGludmFsaWRDb21tZW50ID0ge1xuICAgICAgICBkZW1hbmRJZDogJzQyM2U0NTY3LWU4OWItMTJkMy1hNDU2LTQyNjYxNDE3NDAwMycsXG4gICAgICAgIGNvbW1lbnRUZXh0OiAnTWlzc2luZyBjb21tZW50ZXIgSUQnLFxuICAgICAgfTtcblxuICAgICAgZXhwZWN0KCgpID0+IGluc2VydERlbWFuZENvbW1lbnRTY2hlbWEucGFyc2UoaW52YWxpZENvbW1lbnQpKS50b1Rocm93KCk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIHJlcXVpcmUgY29tbWVudFRleHQnLCAoKSA9PiB7XG4gICAgICBjb25zdCBpbnZhbGlkQ29tbWVudCA9IHtcbiAgICAgICAgZGVtYW5kSWQ6ICc0MjNlNDU2Ny1lODliLTEyZDMtYTQ1Ni00MjY2MTQxNzQwMDMnLFxuICAgICAgICBjb21tZW50ZXJJZDogJzEyM2U0NTY3LWU4OWItMTJkMy1hNDU2LTQyNjYxNDE3NDAwMCcsXG4gICAgICB9O1xuXG4gICAgICBleHBlY3QoKCkgPT4gaW5zZXJ0RGVtYW5kQ29tbWVudFNjaGVtYS5wYXJzZShpbnZhbGlkQ29tbWVudCkpLnRvVGhyb3coKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgdmFsaWRhdGUgY29udGVudCBsZW5ndGgnLCAoKSA9PiB7XG4gICAgICBjb25zdCBzaG9ydENvbnRlbnQgPSAnVGhpcyBpcyBhIHJlYXNvbmFibGUgY29tbWVudC4nO1xuICAgICAgY29uc3QgbG9uZ0NvbnRlbnQgPVxuICAgICAgICAnVGhpcyBpcyBhIGxvbmdlciBjb21tZW50IHRoYXQgcHJvdmlkZXMgbW9yZSBkZXRhaWwgYWJvdXQgdGhlIGRlbWFuZCBhbmQgaW5jbHVkZXMgYWRkaXRpb25hbCBjb250ZXh0IHRoYXQgd291bGQgYmUgaGVscGZ1bCBmb3IgdW5kZXJzdGFuZGluZyB0aGUgaXNzdWUuJztcblxuICAgICAgY29uc3QgY29tbWVudFdpdGhTaG9ydENvbnRlbnQgPSB7XG4gICAgICAgIGRlbWFuZElkOiAnNDIzZTQ1NjctZTg5Yi0xMmQzLWE0NTYtNDI2NjE0MTc0MDAzJyxcbiAgICAgICAgY29tbWVudGVySWQ6ICcxMjNlNDU2Ny1lODliLTEyZDMtYTQ1Ni00MjY2MTQxNzQwMDAnLFxuICAgICAgICBjb21tZW50VGV4dDogc2hvcnRDb250ZW50LFxuICAgICAgfTtcblxuICAgICAgY29uc3QgY29tbWVudFdpdGhMb25nQ29udGVudCA9IHtcbiAgICAgICAgZGVtYW5kSWQ6ICc0MjNlNDU2Ny1lODliLTEyZDMtYTQ1Ni00MjY2MTQxNzQwMDMnLFxuICAgICAgICBjb21tZW50ZXJJZDogJzEyM2U0NTY3LWU4OWItMTJkMy1hNDU2LTQyNjYxNDE3NDAwMCcsXG4gICAgICAgIGNvbW1lbnRUZXh0OiBsb25nQ29udGVudCxcbiAgICAgIH07XG5cbiAgICAgIC8vIEJvdGggc2hvdWxkIHBhc3Mgd2l0aCByZWFzb25hYmxlIGxlbmd0aHNcbiAgICAgIGV4cGVjdCgoKSA9PiBpbnNlcnREZW1hbmRDb21tZW50U2NoZW1hLnBhcnNlKGNvbW1lbnRXaXRoU2hvcnRDb250ZW50KSkubm90LnRvVGhyb3coKTtcbiAgICAgIGV4cGVjdCgoKSA9PiBpbnNlcnREZW1hbmRDb21tZW50U2NoZW1hLnBhcnNlKGNvbW1lbnRXaXRoTG9uZ0NvbnRlbnQpKS5ub3QudG9UaHJvdygpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBhY2NlcHQgdmFsaWQgY29tbWVudCBkYXRhJywgKCkgPT4ge1xuICAgICAgY29uc3QgY29tbWVudCA9IHtcbiAgICAgICAgZGVtYW5kSWQ6ICc0MjNlNDU2Ny1lODliLTEyZDMtYTQ1Ni00MjY2MTQxNzQwMDMnLFxuICAgICAgICBjb21tZW50ZXJJZDogJzEyM2U0NTY3LWU4OWItMTJkMy1hNDU2LTQyNjYxNDE3NDAwMCcsXG4gICAgICAgIGNvbW1lbnRUZXh0OiAnVmFsaWQgY29tbWVudCBkYXRhJyxcbiAgICAgIH07XG5cbiAgICAgIGV4cGVjdCgoKSA9PiBpbnNlcnREZW1hbmRDb21tZW50U2NoZW1hLnBhcnNlKGNvbW1lbnQpKS5ub3QudG9UaHJvdygpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCB2YWxpZGF0ZSBjb21tZW50IHN0cnVjdHVyZScsICgpID0+IHtcbiAgICAgIGNvbnN0IHZhbGlkQ29tbWVudCA9IHtcbiAgICAgICAgZGVtYW5kSWQ6ICc0MjNlNDU2Ny1lODliLTEyZDMtYTQ1Ni00MjY2MTQxNzQwMDMnLFxuICAgICAgICBjb21tZW50ZXJJZDogJzEyM2U0NTY3LWU4OWItMTJkMy1hNDU2LTQyNjYxNDE3NDAwMCcsXG4gICAgICAgIGNvbW1lbnRUZXh0OiAnQ29tbWVudCB3aXRoIHByb3BlciBzdHJ1Y3R1cmUnLFxuICAgICAgfTtcblxuICAgICAgY29uc3QgaW52YWxpZENvbW1lbnQgPSB7XG4gICAgICAgIGRlbWFuZElkOiAnNDIzZTQ1NjctZTg5Yi0xMmQzLWE0NTYtNDI2NjE0MTc0MDAzJyxcbiAgICAgICAgY29tbWVudFRleHQ6ICdDb21tZW50IHdpdGhvdXQgY29tbWVudGVyIElEJyxcbiAgICAgIH07XG5cbiAgICAgIGV4cGVjdCgoKSA9PiBpbnNlcnREZW1hbmRDb21tZW50U2NoZW1hLnBhcnNlKHZhbGlkQ29tbWVudCkpLm5vdC50b1Rocm93KCk7XG4gICAgICBleHBlY3QoKCkgPT4gaW5zZXJ0RGVtYW5kQ29tbWVudFNjaGVtYS5wYXJzZShpbnZhbGlkQ29tbWVudCkpLnRvVGhyb3coKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ0VudW0gVmFsaWRhdGlvbicsICgpID0+IHtcbiAgICBpdCgnc2hvdWxkIHZhbGlkYXRlIGRlbWFuZCB0eXBlcycsICgpID0+IHtcbiAgICAgIGNvbnN0IHZhbGlkVHlwZXMgPSBbJ21haW50ZW5hbmNlJywgJ2NvbXBsYWludCcsICdpbmZvcm1hdGlvbicsICdvdGhlciddO1xuICAgICAgY29uc3QgaW52YWxpZFR5cGVzID0gWydpbnZhbGlkJywgJ3JlcGFpcicsICdyZXF1ZXN0JywgJyddO1xuXG4gICAgICB2YWxpZFR5cGVzLmZvckVhY2goKHR5cGUpID0+IHtcbiAgICAgICAgZXhwZWN0KGRlbWFuZFR5cGVFbnVtLmVudW1WYWx1ZXMpLnRvQ29udGFpbih0eXBlKTtcbiAgICAgIH0pO1xuXG4gICAgICBpbnZhbGlkVHlwZXMuZm9yRWFjaCgodHlwZSkgPT4ge1xuICAgICAgICBleHBlY3QoZGVtYW5kVHlwZUVudW0uZW51bVZhbHVlcykubm90LnRvQ29udGFpbih0eXBlKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCB2YWxpZGF0ZSBkZW1hbmQgc3RhdHVzZXMnLCAoKSA9PiB7XG4gICAgICBjb25zdCB2YWxpZFN0YXR1c2VzID0gW1xuICAgICAgICAnZHJhZnQnLFxuICAgICAgICAnc3VibWl0dGVkJyxcbiAgICAgICAgJ3VuZGVyX3JldmlldycsXG4gICAgICAgICdhcHByb3ZlZCcsXG4gICAgICAgICdpbl9wcm9ncmVzcycsXG4gICAgICAgICdjb21wbGV0ZWQnLFxuICAgICAgICAncmVqZWN0ZWQnLFxuICAgICAgICAnY2FuY2VsbGVkJyxcbiAgICAgIF07XG4gICAgICBjb25zdCBpbnZhbGlkU3RhdHVzZXMgPSBbJ3BlbmRpbmcnLCAnb3BlbicsICdjbG9zZWQnLCAncmVzb2x2ZWQnXTtcblxuICAgICAgdmFsaWRTdGF0dXNlcy5mb3JFYWNoKChzdGF0dXMpID0+IHtcbiAgICAgICAgZXhwZWN0KGRlbWFuZFN0YXR1c0VudW0uZW51bVZhbHVlcykudG9Db250YWluKHN0YXR1cyk7XG4gICAgICB9KTtcblxuICAgICAgaW52YWxpZFN0YXR1c2VzLmZvckVhY2goKHN0YXR1cykgPT4ge1xuICAgICAgICBleHBlY3QoZGVtYW5kU3RhdHVzRW51bS5lbnVtVmFsdWVzKS5ub3QudG9Db250YWluKHN0YXR1cyk7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ0VkZ2UgQ2FzZXMnLCAoKSA9PiB7XG4gICAgaXQoJ3Nob3VsZCBoYW5kbGUgVVVJRCB2YWxpZGF0aW9uIGZvciBJRHMnLCAoKSA9PiB7XG4gICAgICBjb25zdCB2YWxpZFVVSUQgPSAnMTIzZTQ1NjctZTg5Yi0xMmQzLWE0NTYtNDI2NjE0MTc0MDAwJztcbiAgICAgIGNvbnN0IGludmFsaWRVVUlEcyA9IFsnaW52YWxpZCcsICcxMjMnLCAnJywgbnVsbCwgdW5kZWZpbmVkXTtcblxuICAgICAgY29uc3QgdmFsaWREZW1hbmQgPSB7XG4gICAgICAgIHN1Ym1pdHRlcklkOiB2YWxpZFVVSUQsXG4gICAgICAgIHR5cGU6ICdtYWludGVuYW5jZScsXG4gICAgICAgIGRlc2NyaXB0aW9uOiAnVGVzdCB3aXRoIHZhbGlkIFVVSUQnLFxuICAgICAgICByZXNpZGVuY2VJZDogdmFsaWRVVUlELFxuICAgICAgICBidWlsZGluZ0lkOiB2YWxpZFVVSUQsXG4gICAgICB9O1xuXG4gICAgICBleHBlY3QoKCkgPT4gaW5zZXJ0RGVtYW5kU2NoZW1hLnBhcnNlKHZhbGlkRGVtYW5kKSkubm90LnRvVGhyb3coKTtcblxuICAgICAgaW52YWxpZFVVSURzLmZvckVhY2goKGludmFsaWRJZCkgPT4ge1xuICAgICAgICBjb25zdCBpbnZhbGlkRGVtYW5kID0ge1xuICAgICAgICAgIHN1Ym1pdHRlcklkOiBpbnZhbGlkSWQsXG4gICAgICAgICAgdHlwZTogJ21haW50ZW5hbmNlJyxcbiAgICAgICAgICBkZXNjcmlwdGlvbjogJ1Rlc3Qgd2l0aCBpbnZhbGlkIFVVSUQnLFxuICAgICAgICAgIHJlc2lkZW5jZUlkOiB2YWxpZFVVSUQsXG4gICAgICAgICAgYnVpbGRpbmdJZDogdmFsaWRVVUlELFxuICAgICAgICB9O1xuXG4gICAgICAgIGV4cGVjdCgoKSA9PiBpbnNlcnREZW1hbmRTY2hlbWEucGFyc2UoaW52YWxpZERlbWFuZCkpLnRvVGhyb3coKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBoYW5kbGUgc3BlY2lhbCBjaGFyYWN0ZXJzIGluIGRlc2NyaXB0aW9ucycsICgpID0+IHtcbiAgICAgIGNvbnN0IGRlc2NyaXB0aW9uc1dpdGhTcGVjaWFsQ2hhcnMgPSBbXG4gICAgICAgICdEZXNjcmlwdGlvbiB3aXRoIMOpbW9qaXMg8J+PoCBhbmQgYcOnY8OpbnRzJyxcbiAgICAgICAgJ0Rlc2NyaXB0aW9uIHdpdGggXCJxdW90ZXNcIiBhbmQgYXBvc3Ryb3BoZVxcJ3MnLFxuICAgICAgICAnRGVzY3JpcHRpb24gd2l0aCA8dGFncz4gYW5kICZzeW1ib2xzOycsXG4gICAgICAgICdNdWx0aS1saW5lXFxuZGVzY3JpcHRpb25cXG53aXRoIGJyZWFrcycsXG4gICAgICAgICdEZXNjcmlwdGlvbiB3aXRoIG51bWJlcnMgMTIzIGFuZCBzeW1ib2xzICFAIyQlXiYqKCknLFxuICAgICAgXTtcblxuICAgICAgZGVzY3JpcHRpb25zV2l0aFNwZWNpYWxDaGFycy5mb3JFYWNoKChkZXNjcmlwdGlvbikgPT4ge1xuICAgICAgICBjb25zdCBkZW1hbmQgPSB7XG4gICAgICAgICAgc3VibWl0dGVySWQ6ICcxMjNlNDU2Ny1lODliLTEyZDMtYTQ1Ni00MjY2MTQxNzQwMDAnLFxuICAgICAgICAgIHR5cGU6ICdtYWludGVuYW5jZScsXG4gICAgICAgICAgZGVzY3JpcHRpb24sXG4gICAgICAgICAgcmVzaWRlbmNlSWQ6ICcyMjNlNDU2Ny1lODliLTEyZDMtYTQ1Ni00MjY2MTQxNzQwMDEnLFxuICAgICAgICAgIGJ1aWxkaW5nSWQ6ICczMjNlNDU2Ny1lODliLTEyZDMtYTQ1Ni00MjY2MTQxNzQwMDInLFxuICAgICAgICB9O1xuXG4gICAgICAgIGV4cGVjdCgoKSA9PiBpbnNlcnREZW1hbmRTY2hlbWEucGFyc2UoZGVtYW5kKSkubm90LnRvVGhyb3coKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBoYW5kbGUgYm91bmRhcnkgdmFsdWVzIGZvciBzdHJpbmcgbGVuZ3RocycsICgpID0+IHtcbiAgICAgIGNvbnN0IG1pblZhbGlkRGVzY3JpcHRpb24gPSAnYScucmVwZWF0KDEwKTsgLy8gTWluaW11bSB2YWxpZCBsZW5ndGhcbiAgICAgIGNvbnN0IG1heFZhbGlkRGVzY3JpcHRpb24gPSAnYScucmVwZWF0KDIwMDApOyAvLyBNYXhpbXVtIHZhbGlkIGxlbmd0aFxuICAgICAgY29uc3QgYmVsb3dNaW4gPSAnYScucmVwZWF0KDkpO1xuICAgICAgY29uc3QgYWJvdmVNYXggPSAnYScucmVwZWF0KDIwMDEpO1xuXG4gICAgICBjb25zdCBkZW1hbmRNaW5WYWxpZCA9IHtcbiAgICAgICAgc3VibWl0dGVySWQ6ICcxMjNlNDU2Ny1lODliLTEyZDMtYTQ1Ni00MjY2MTQxNzQwMDAnLFxuICAgICAgICB0eXBlOiAnbWFpbnRlbmFuY2UnLFxuICAgICAgICBkZXNjcmlwdGlvbjogbWluVmFsaWREZXNjcmlwdGlvbixcbiAgICAgICAgcmVzaWRlbmNlSWQ6ICcyMjNlNDU2Ny1lODliLTEyZDMtYTQ1Ni00MjY2MTQxNzQwMDEnLFxuICAgICAgICBidWlsZGluZ0lkOiAnMzIzZTQ1NjctZTg5Yi0xMmQzLWE0NTYtNDI2NjE0MTc0MDAyJyxcbiAgICAgIH07XG5cbiAgICAgIGNvbnN0IGRlbWFuZE1heFZhbGlkID0ge1xuICAgICAgICBzdWJtaXR0ZXJJZDogJzEyM2U0NTY3LWU4OWItMTJkMy1hNDU2LTQyNjYxNDE3NDAwMCcsXG4gICAgICAgIHR5cGU6ICdtYWludGVuYW5jZScsXG4gICAgICAgIGRlc2NyaXB0aW9uOiBtYXhWYWxpZERlc2NyaXB0aW9uLFxuICAgICAgICByZXNpZGVuY2VJZDogJzIyM2U0NTY3LWU4OWItMTJkMy1hNDU2LTQyNjYxNDE3NDAwMScsXG4gICAgICAgIGJ1aWxkaW5nSWQ6ICczMjNlNDU2Ny1lODliLTEyZDMtYTQ1Ni00MjY2MTQxNzQwMDInLFxuICAgICAgfTtcblxuICAgICAgZXhwZWN0KCgpID0+IGluc2VydERlbWFuZFNjaGVtYS5wYXJzZShkZW1hbmRNaW5WYWxpZCkpLm5vdC50b1Rocm93KCk7XG4gICAgICBleHBlY3QoKCkgPT4gaW5zZXJ0RGVtYW5kU2NoZW1hLnBhcnNlKGRlbWFuZE1heFZhbGlkKSkubm90LnRvVGhyb3coKTtcblxuICAgICAgY29uc3QgZGVtYW5kQmVsb3dNaW4gPSB7IC4uLmRlbWFuZE1pblZhbGlkLCBkZXNjcmlwdGlvbjogYmVsb3dNaW4gfTtcbiAgICAgIGNvbnN0IGRlbWFuZEFib3ZlTWF4ID0geyAuLi5kZW1hbmRNYXhWYWxpZCwgZGVzY3JpcHRpb246IGFib3ZlTWF4IH07XG5cbiAgICAgIGV4cGVjdCgoKSA9PiBpbnNlcnREZW1hbmRTY2hlbWEucGFyc2UoZGVtYW5kQmVsb3dNaW4pKS50b1Rocm93KCk7XG4gICAgICBleHBlY3QoKCkgPT4gaW5zZXJ0RGVtYW5kU2NoZW1hLnBhcnNlKGRlbWFuZEFib3ZlTWF4KSkudG9UaHJvdygpO1xuICAgIH0pO1xuICB9KTtcbn0pO1xuIl0sInZlcnNpb24iOjN9