{"file":"/home/runner/workspace/client/src/components/ui/file-upload.tsx","mappings":"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","names":[],"sources":["/home/runner/workspace/client/src/components/ui/file-upload.tsx"],"sourcesContent":["import React, { useState, useRef, useCallback, useEffect } from 'react';\nimport { Upload, X, File, Image, Paperclip } from 'lucide-react';\nimport { cn } from '@/lib/utils';\n\ninterface FileUploadProps {\n  onFilesSelect: (files: File[]) => void;\n  onFilesRemove?: (fileIndex: number) => void;\n  maxFiles?: number;\n  maxSize?: number; // in MB\n  acceptedTypes?: string[];\n  className?: string;\n  disabled?: boolean;\n  allowPaste?: boolean;\n  children?: React.ReactNode;\n}\n\ninterface FilePreview {\n  file: File;\n  preview?: string;\n  type: 'image' | 'document';\n}\n\nexport function FileUpload({\n  onFilesSelect,\n  onFilesRemove,\n  maxFiles = 5,\n  maxSize = 50,\n  acceptedTypes = [\n    'image/*',\n    '.pdf',\n    '.doc',\n    '.docx',\n    '.txt',\n    '.xls',\n    '.xlsx',\n    '.ppt',\n    '.pptx'\n  ],\n  className,\n  disabled = false,\n  allowPaste = true,\n  children\n}: FileUploadProps) {\n  const [isDragOver, setIsDragOver] = useState(false);\n  const [files, setFiles] = useState<FilePreview[]>([]);\n  const fileInputRef = useRef<HTMLInputElement>(null);\n  const uploadAreaRef = useRef<HTMLDivElement>(null);\n\n  // Convert File to FilePreview\n  const processFile = useCallback((file: File): FilePreview => {\n    const isImage = file.type.startsWith('image/');\n    const filePreview: FilePreview = {\n      file,\n      type: isImage ? 'image' : 'document'\n    };\n\n    if (isImage) {\n      filePreview.preview = URL.createObjectURL(file);\n    }\n\n    return filePreview;\n  }, []);\n\n  // Validate file size and type\n  const validateFile = useCallback((file: File): string | null => {\n    // Check file size\n    if (file.size > maxSize * 1024 * 1024) {\n      return `File \"${file.name}\" is too large. Maximum size is ${maxSize}MB.`;\n    }\n\n    // Check file type\n    const fileExtension = '.' + file.name.split('.').pop()?.toLowerCase();\n    const mimeType = file.type;\n    \n    const isAccepted = acceptedTypes.some(type => {\n      if (type.includes('*')) {\n        return mimeType.startsWith(type.replace('*', ''));\n      }\n      return type === fileExtension || type === mimeType;\n    });\n\n    if (!isAccepted) {\n      return `File type \"${fileExtension}\" is not allowed.`;\n    }\n\n    return null;\n  }, [acceptedTypes, maxSize]);\n\n  // Handle file selection\n  const handleFiles = useCallback((newFiles: FileList | File[]) => {\n    const fileArray = Array.from(newFiles);\n    const validFiles: File[] = [];\n    const errors: string[] = [];\n\n    // Check if adding these files would exceed maxFiles\n    if (files.length + fileArray.length > maxFiles) {\n      errors.push(`Cannot add ${fileArray.length} files. Maximum ${maxFiles} files allowed.`);\n      return;\n    }\n\n    fileArray.forEach(file => {\n      const error = validateFile(file);\n      if (error) {\n        errors.push(error);\n      } else {\n        validFiles.push(file);\n      }\n    });\n\n    if (errors.length > 0) {\n      // In a real app, you'd want to show these errors to the user\n      console.error('File validation errors:', errors);\n      return;\n    }\n\n    if (validFiles.length > 0) {\n      const newFilePreviews = validFiles.map(processFile);\n      setFiles(prev => [...prev, ...newFilePreviews]);\n      onFilesSelect(validFiles);\n    }\n  }, [files.length, maxFiles, validateFile, processFile, onFilesSelect]);\n\n  // Handle drag and drop\n  const handleDragOver = useCallback((e: React.DragEvent) => {\n    e.preventDefault();\n    e.stopPropagation();\n    if (!disabled) {\n      setIsDragOver(true);\n    }\n  }, [disabled]);\n\n  const handleDragLeave = useCallback((e: React.DragEvent) => {\n    e.preventDefault();\n    e.stopPropagation();\n    setIsDragOver(false);\n  }, []);\n\n  const handleDrop = useCallback((e: React.DragEvent) => {\n    e.preventDefault();\n    e.stopPropagation();\n    setIsDragOver(false);\n\n    if (disabled) return;\n\n    const droppedFiles = e.dataTransfer.files;\n    if (droppedFiles.length > 0) {\n      handleFiles(droppedFiles);\n    }\n  }, [disabled, handleFiles]);\n\n  // Handle file input change\n  const handleFileInputChange = useCallback((e: React.ChangeEvent<HTMLInputElement>) => {\n    const selectedFiles = e.target.files;\n    if (selectedFiles && selectedFiles.length > 0) {\n      handleFiles(selectedFiles);\n    }\n    // Reset input value to allow selecting the same file again\n    e.target.value = '';\n  }, [handleFiles]);\n\n  // Handle paste events for screenshots\n  const handlePaste = useCallback((e: ClipboardEvent) => {\n    if (!allowPaste || disabled) return;\n\n    const items = e.clipboardData?.items;\n    if (!items) return;\n\n    const imageFiles: File[] = [];\n    \n    for (let i = 0; i < items.length; i++) {\n      const item = items[i];\n      if (item.type.indexOf('image') !== -1) {\n        const blob = item.getAsFile();\n        if (blob) {\n          // Create a filename for pasted images\n          const timestamp = new Date().toISOString().replace(/[:.]/g, '-');\n          // Use object spread to create file with proper properties\n          const file = Object.assign(blob, {\n            name: `screenshot-${timestamp}.png`\n          }) as File;\n          imageFiles.push(file);\n        }\n      }\n    }\n\n    if (imageFiles.length > 0) {\n      e.preventDefault();\n      handleFiles(imageFiles);\n    }\n  }, [allowPaste, disabled, handleFiles]);\n\n  // Set up paste event listener\n  useEffect(() => {\n    if (allowPaste && !disabled) {\n      document.addEventListener('paste', handlePaste);\n      return () => document.removeEventListener('paste', handlePaste);\n    }\n  }, [allowPaste, disabled, handlePaste]);\n\n  // Remove file\n  const handleRemoveFile = useCallback((index: number) => {\n    setFiles(prev => {\n      const newFiles = [...prev];\n      // Clean up preview URL if it exists\n      if (newFiles[index].preview) {\n        URL.revokeObjectURL(newFiles[index].preview!);\n      }\n      newFiles.splice(index, 1);\n      return newFiles;\n    });\n    \n    if (onFilesRemove) {\n      onFilesRemove(index);\n    }\n  }, [onFilesRemove]);\n\n  // Clean up preview URLs on unmount\n  useEffect(() => {\n    return () => {\n      files.forEach(file => {\n        if (file.preview) {\n          URL.revokeObjectURL(file.preview);\n        }\n      });\n    };\n  }, [files]);\n\n  const openFileDialog = () => {\n    if (!disabled && fileInputRef.current) {\n      fileInputRef.current.click();\n    }\n  };\n\n  return (\n    <div className={cn(\"w-full\", className)}>\n      {/* Hidden file input */}\n      <input\n        ref={fileInputRef}\n        type=\"file\"\n        multiple\n        accept={acceptedTypes.join(',')}\n        onChange={handleFileInputChange}\n        className=\"hidden\"\n        disabled={disabled}\n        data-testid=\"file-input\"\n      />\n\n      {/* Upload area */}\n      <div\n        ref={uploadAreaRef}\n        onDragOver={handleDragOver}\n        onDragLeave={handleDragLeave}\n        onDrop={handleDrop}\n        onClick={openFileDialog}\n        className={cn(\n          \"relative border-2 border-dashed rounded-lg p-6 text-center cursor-pointer transition-colors\",\n          isDragOver\n            ? \"border-blue-500 bg-blue-50\"\n            : \"border-gray-300 hover:border-gray-400\",\n          disabled && \"cursor-not-allowed opacity-50\",\n          className\n        )}\n        data-testid=\"upload-area\"\n      >\n        {children ? (\n          children\n        ) : (\n          <>\n            <Upload className=\"mx-auto h-12 w-12 text-gray-400 mb-4\" />\n            <div className=\"space-y-2\">\n              <p className=\"text-lg font-medium text-gray-900\">\n                Drop files here or click to browse\n              </p>\n              <p className=\"text-sm text-gray-500\">\n                {allowPaste && \"You can also paste screenshots (Ctrl+V). \"}\n                Maximum {maxFiles} files, up to {maxSize}MB each\n              </p>\n              <p className=\"text-xs text-gray-400\">\n                Supported: {acceptedTypes.join(', ')}\n              </p>\n            </div>\n          </>\n        )}\n      </div>\n\n      {/* File previews */}\n      {files.length > 0 && (\n        <div className=\"mt-4 space-y-2\">\n          <h4 className=\"text-sm font-medium text-gray-900\">\n            Selected Files ({files.length}/{maxFiles})\n          </h4>\n          <div className=\"space-y-2\">\n            {files.map((filePreview, index) => (\n              <div\n                key={index}\n                className=\"flex items-center gap-3 p-3 bg-gray-50 rounded-lg\"\n                data-testid={`file-preview-${index}`}\n              >\n                {filePreview.type === 'image' && filePreview.preview ? (\n                  <img\n                    src={filePreview.preview}\n                    alt=\"Preview\"\n                    className=\"w-10 h-10 object-cover rounded\"\n                  />\n                ) : filePreview.type === 'image' ? (\n                  <Image className=\"w-10 h-10 text-gray-400\" />\n                ) : (\n                  <File className=\"w-10 h-10 text-gray-400\" />\n                )}\n                \n                <div className=\"flex-1 min-w-0\">\n                  <p className=\"text-sm font-medium text-gray-900 truncate\">\n                    {filePreview.file.name}\n                  </p>\n                  <p className=\"text-xs text-gray-500\">\n                    {(filePreview.file.size / 1024 / 1024).toFixed(2)} MB\n                  </p>\n                </div>\n\n                <button\n                  onClick={(e) => {\n                    e.stopPropagation();\n                    handleRemoveFile(index);\n                  }}\n                  className=\"p-1 hover:bg-gray-200 rounded\"\n                  disabled={disabled}\n                  data-testid={`remove-file-${index}`}\n                >\n                  <X className=\"w-4 h-4 text-gray-500\" />\n                </button>\n              </div>\n            ))}\n          </div>\n        </div>\n      )}\n    </div>\n  );\n}\n\n// Compact version for inline use\nexport function CompactFileUpload({\n  onFilesSelect,\n  maxFiles = 3,\n  acceptedTypes = ['image/*', '.pdf', '.doc', '.docx'],\n  disabled = false,\n  className\n}: Omit<FileUploadProps, 'children' | 'onFilesRemove'>) {\n  const fileInputRef = useRef<HTMLInputElement>(null);\n\n  const handleFileChange = useCallback((e: React.ChangeEvent<HTMLInputElement>) => {\n    const files = e.target.files;\n    if (files && files.length > 0) {\n      onFilesSelect(Array.from(files));\n    }\n    e.target.value = '';\n  }, [onFilesSelect]);\n\n  return (\n    <div className={cn(\"inline-block\", className)}>\n      <input\n        ref={fileInputRef}\n        type=\"file\"\n        multiple\n        accept={acceptedTypes.join(',')}\n        onChange={handleFileChange}\n        className=\"hidden\"\n        disabled={disabled}\n        data-testid=\"compact-file-input\"\n      />\n      <button\n        type=\"button\"\n        onClick={() => fileInputRef.current?.click()}\n        disabled={disabled}\n        className={cn(\n          \"inline-flex items-center gap-2 px-3 py-2 text-sm border border-gray-300 rounded-md hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500\",\n          disabled && \"cursor-not-allowed opacity-50\"\n        )}\n        data-testid=\"compact-upload-button\"\n      >\n        <Paperclip className=\"w-4 h-4\" />\n        Attach Files\n      </button>\n    </div>\n  );\n}"],"version":3}