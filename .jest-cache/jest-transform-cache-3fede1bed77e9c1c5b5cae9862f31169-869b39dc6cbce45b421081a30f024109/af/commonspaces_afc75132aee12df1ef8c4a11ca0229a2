f5cf8c3f1d6ea3c3109567883dcd52b2
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const jsx_runtime_1 = require("react/jsx-runtime");
const react_1 = require("react");
const react_query_1 = require("@tanstack/react-query");
const date_fns_1 = require("date-fns");
const locale_1 = require("date-fns/locale");
const react_hook_form_1 = require("react-hook-form");
const zod_1 = require("@hookform/resolvers/zod");
const zod_2 = require("zod");
const header_1 = require("@/components/layout/header");
const card_1 = require("@/components/ui/card");
const badge_1 = require("@/components/ui/badge");
const button_1 = require("@/components/ui/button");
const withHierarchicalSelection_1 = require("@/components/hoc/withHierarchicalSelection");
const wouter_1 = require("wouter");
const dialog_1 = require("@/components/ui/dialog");
const form_1 = require("@/components/ui/form");
const tooltip_1 = require("@/components/ui/tooltip");
const lucide_react_1 = require("lucide-react");
const use_toast_1 = require("@/hooks/use-toast");
const use_auth_1 = require("@/hooks/use-auth");
const use_language_1 = require("@/hooks/use-language");
const queryClient_1 = require("@/lib/queryClient");
const common_space_calendar_1 = require("@/components/common-spaces/common-space-calendar");
/**
 * Booking form schema.
 */
const bookingFormSchema = zod_2.z
    .object({
    date: zod_2.z.date({
        message: 'Please select a booking date from the calendar',
    }),
    startTime: zod_2.z.string().min(1, 'Start time is required (example: 09:00)').regex(/^([0-1]?[0-9]|2[0-3]):[0-5][0-9]$/, 'Start time must be in HH:MM format (example: 09:00)'),
    endTime: zod_2.z.string().min(1, 'End time is required (example: 11:00)').regex(/^([0-1]?[0-9]|2[0-3]):[0-5][0-9]$/, 'End time must be in HH:MM format (example: 11:00)'),
})
    .refine((data) => {
    const start = (0, date_fns_1.parse)(data.startTime, 'HH:mm', new Date());
    const end = (0, date_fns_1.parse)(data.endTime, 'HH:mm', new Date());
    return end > start;
}, {
    message: 'End time must be after start time (example: start at 09:00, end at 11:00)',
    path: ['endTime'],
});
/**
 *
 * @param root0
 * @param root0.selected
 * @param root0.onSelect
 * @param root0.space
 * @param root0.bookings
 * @param root0.language
 * @param root0.'data-testid'
 */
function BookingCalendar({ selected, onSelect, space, bookings, language, 'data-testid': testId, }) {
    const [currentDate, setCurrentDate] = (0, react_1.useState)(selected || new Date());
    const monthDays = (0, react_1.useMemo)(() => {
        const start = (0, date_fns_1.startOfMonth)(currentDate);
        const end = (0, date_fns_1.endOfMonth)(currentDate);
        return (0, date_fns_1.eachDayOfInterval)({ start, end });
    }, [currentDate]);
    const getBookingsForDay = (day) => {
        return bookings.filter((booking) => (0, date_fns_1.isSameDay)((0, date_fns_1.parseISO)(booking.startTime), day) && booking.status === 'confirmed');
    };
    const isDayAvailable = (day) => {
        // Past dates are not available
        const today = new Date();
        today.setHours(0, 0, 0, 0);
        const checkDay = new Date(day);
        checkDay.setHours(0, 0, 0, 0);
        if (checkDay < today) {
            return false;
        }
        // Check if day falls within any unavailable periods
        if (space.unavailablePeriods && Array.isArray(space.unavailablePeriods)) {
            for (const period of space.unavailablePeriods) {
                const startDate = new Date(period.startDate);
                const endDate = new Date(period.endDate);
                startDate.setHours(0, 0, 0, 0);
                endDate.setHours(23, 59, 59, 999);
                if (checkDay >= startDate && checkDay <= endDate) {
                    return false;
                }
            }
        }
        // Check opening hours if available
        if (space.openingHours && Array.isArray(space.openingHours)) {
            const dayName = day.toLocaleDateString('en-US', { weekday: 'long' }).toLowerCase();
            const todayHours = space.openingHours.find((h) => h.day.toLowerCase() === dayName);
            // If no hours defined for this day, it's unavailable
            if (!todayHours) {
                return false;
            }
            // If explicitly marked as closed
            if (todayHours.isOpen === false) {
                return false;
            }
        }
        return true;
    };
    const goToPrevMonth = () => {
        setCurrentDate((prev) => {
            const newDate = new Date(prev);
            newDate.setMonth(prev.getMonth() - 1);
            return newDate;
        });
    };
    const goToNextMonth = () => {
        setCurrentDate((prev) => {
            const newDate = new Date(prev);
            newDate.setMonth(prev.getMonth() + 1);
            return newDate;
        });
    };
    return ((0, jsx_runtime_1.jsx)(tooltip_1.TooltipProvider, { children: (0, jsx_runtime_1.jsxs)("div", { className: 'border rounded-md bg-white', "data-testid": testId, children: [(0, jsx_runtime_1.jsxs)("div", { className: 'flex items-center justify-between p-3 border-b', children: [(0, jsx_runtime_1.jsx)(button_1.Button, { variant: 'outline', size: 'sm', onClick: goToPrevMonth, className: 'h-8 w-8 p-0', children: (0, jsx_runtime_1.jsx)(lucide_react_1.ChevronLeft, { className: 'h-4 w-4' }) }), (0, jsx_runtime_1.jsx)("h3", { className: 'text-sm font-semibold', children: (0, date_fns_1.format)(currentDate, 'MMMM yyyy', { locale: language === 'fr' ? locale_1.fr : undefined }) }), (0, jsx_runtime_1.jsx)(button_1.Button, { variant: 'outline', size: 'sm', onClick: goToNextMonth, className: 'h-8 w-8 p-0', children: (0, jsx_runtime_1.jsx)(lucide_react_1.ChevronRight, { className: 'h-4 w-4' }) })] }), (0, jsx_runtime_1.jsxs)("div", { className: 'p-2', children: [(0, jsx_runtime_1.jsx)("div", { className: 'grid grid-cols-7 gap-1 mb-2', children: [
                                language === 'fr' ? 'L' : 'M',
                                language === 'fr' ? 'M' : 'T',
                                language === 'fr' ? 'M' : 'W',
                                language === 'fr' ? 'J' : 'T',
                                language === 'fr' ? 'V' : 'F',
                                language === 'fr' ? 'S' : 'S',
                                language === 'fr' ? 'D' : 'S',
                            ].map((day, index) => ((0, jsx_runtime_1.jsx)("div", { className: 'p-1 text-center text-xs font-medium text-gray-500', children: day }, index))) }), (0, jsx_runtime_1.jsx)("div", { className: 'grid grid-cols-7 gap-1', children: monthDays.map((day, index) => {
                                const dayBookings = getBookingsForDay(day);
                                const isCurrentDay = (0, date_fns_1.isToday)(day);
                                const isSelected = selected && (0, date_fns_1.isSameDay)(day, selected);
                                const isAvailable = isDayAvailable(day);
                                return ((0, jsx_runtime_1.jsxs)(tooltip_1.Tooltip, { children: [(0, jsx_runtime_1.jsx)(tooltip_1.TooltipTrigger, { asChild: true, children: (0, jsx_runtime_1.jsxs)("div", { className: `
                        h-8 p-1 text-xs rounded cursor-pointer transition-colors flex items-center justify-center
                        ${!isAvailable
                                                    ? 'bg-red-100 text-red-600 cursor-not-allowed border border-red-200'
                                                    : isSelected
                                                        ? 'bg-blue-600 text-white'
                                                        : isCurrentDay
                                                            ? 'bg-blue-100 text-blue-900 hover:bg-blue-200'
                                                            : dayBookings.length > 0
                                                                ? 'bg-orange-100 text-orange-900 hover:bg-orange-200'
                                                                : 'hover:bg-gray-100'}
                      `, onClick: () => isAvailable && onSelect(day), children: [(0, jsx_runtime_1.jsx)("span", { className: 'font-medium', children: (0, date_fns_1.format)(day, 'd') }), dayBookings.length > 0 && ((0, jsx_runtime_1.jsx)("div", { className: 'absolute -mt-3 -mr-1', children: (0, jsx_runtime_1.jsx)("div", { className: 'w-1.5 h-1.5 bg-orange-500 rounded-full' }) }))] }) }), (0, jsx_runtime_1.jsx)(tooltip_1.TooltipContent, { children: (0, jsx_runtime_1.jsxs)("div", { className: 'space-y-1', children: [(0, jsx_runtime_1.jsx)("p", { className: 'font-medium', children: (0, date_fns_1.format)(day, 'EEEE, d MMMM yyyy', {
                                                            locale: language === 'fr' ? locale_1.fr : undefined,
                                                        }) }), !isAvailable && ((0, jsx_runtime_1.jsx)("p", { className: 'text-xs text-red-500', children: language === 'fr' ? 'Non disponible' : 'Not available' })), dayBookings.length > 0 && ((0, jsx_runtime_1.jsxs)("div", { className: 'text-xs', children: [(0, jsx_runtime_1.jsxs)("p", { className: 'text-orange-600', children: [dayBookings.length, ' ', language === 'fr' ? 'rÃ©servation(s)' : 'booking(s)'] }), dayBookings.slice(0, 2).map((booking, idx) => ((0, jsx_runtime_1.jsxs)("p", { className: 'text-gray-600', children: [(0, date_fns_1.format)((0, date_fns_1.parseISO)(booking.startTime), 'HH:mm'), " -", ' ', (0, date_fns_1.format)((0, date_fns_1.parseISO)(booking.endTime), 'HH:mm')] }, idx))), dayBookings.length > 2 && ((0, jsx_runtime_1.jsxs)("p", { className: 'text-gray-500', children: ["+", dayBookings.length - 2, " ", language === 'fr' ? 'autres' : 'more'] }))] }))] }) })] }, index));
                            }) }), (0, jsx_runtime_1.jsxs)("div", { className: 'flex items-center justify-center gap-4 mt-3 pt-2 border-t text-xs', children: [(0, jsx_runtime_1.jsxs)("div", { className: 'flex items-center gap-1', children: [(0, jsx_runtime_1.jsx)("div", { className: 'w-2 h-2 bg-blue-600 rounded' }), (0, jsx_runtime_1.jsx)("span", { className: 'text-gray-600', children: language === 'fr' ? 'SÃ©lectionnÃ©' : 'Selected' })] }), (0, jsx_runtime_1.jsxs)("div", { className: 'flex items-center gap-1', children: [(0, jsx_runtime_1.jsx)("div", { className: 'w-2 h-2 bg-orange-500 rounded' }), (0, jsx_runtime_1.jsx)("span", { className: 'text-gray-600', children: language === 'fr' ? 'RÃ©servÃ©' : 'Booked' })] }), (0, jsx_runtime_1.jsxs)("div", { className: 'flex items-center gap-1', children: [(0, jsx_runtime_1.jsx)("div", { className: 'w-2 h-2 bg-red-500 rounded' }), (0, jsx_runtime_1.jsx)("span", { className: 'text-gray-600', children: language === 'fr' ? 'Non disponible' : 'Unavailable' })] }), (0, jsx_runtime_1.jsxs)("div", { className: 'flex items-center gap-1', children: [(0, jsx_runtime_1.jsx)("div", { className: 'w-2 h-2 bg-blue-200 rounded' }), (0, jsx_runtime_1.jsx)("span", { className: 'text-gray-600', children: language === 'fr' ? "Aujourd'hui" : 'Today' })] })] })] })] }) }));
}
/**
 * Utility function to generate .ics calendar content.
 * @param bookings
 * @param allSpaces
 */
function generateICS(bookings, allSpaces) {
    const now = new Date();
    const icsHeader = [
        'BEGIN:VCALENDAR',
        'VERSION:2.0',
        'PRODID:-//Koveo Gestion//Common Spaces//FR',
        'CALSCALE:GREGORIAN',
        'METHOD:PUBLISH',
    ].join('\r\n');
    const icsEvents = bookings.map((booking) => {
        const startDate = new Date(booking.startTime);
        const endDate = new Date(booking.endTime);
        // Format dates for ICS (YYYYMMDDTHHMMSSZ)
        const formatICSDate = (date) => {
            return date
                .toISOString()
                .replace(/[-:]/g, '')
                .replace(/\.\d{3}/, '');
        };
        const title = allSpaces ? `RÃ©servation d'espace commun` : `Espace commun rÃ©servÃ©`;
        return [
            'BEGIN:VEVENT',
            `UID:${booking.id}@koveogestion.com`,
            `DTSTAMP:${formatICSDate(now)}`,
            `DTSTART:${formatICSDate(startDate)}`,
            `DTEND:${formatICSDate(endDate)}`,
            `SUMMARY:${title}`,
            `DESCRIPTION:RÃ©servation confirmÃ©e pour un espace commun`,
            'STATUS:CONFIRMED',
            'END:VEVENT',
        ].join('\r\n');
    });
    const icsFooter = 'END:VCALENDAR';
    return [icsHeader, ...icsEvents, icsFooter].join('\r\n');
}
/**
 * Common Spaces page component for residents.
 */
function CommonSpacesPageInner({ buildingId, showBackButton, backButtonLabel, onBack }) {
    const { user } = (0, use_auth_1.useAuth)();
    const { language } = (0, use_language_1.useLanguage)();
    const { toast } = (0, use_toast_1.useToast)();
    const queryClient = (0, react_query_1.useQueryClient)();
    const [, navigate] = (0, wouter_1.useLocation)();
    const [selectedSpace, setSelectedSpace] = (0, react_1.useState)(null);
    const [selectedDate, setSelectedDate] = (0, react_1.useState)(new Date());
    const [isBookingDialogOpen, setIsBookingDialogOpen] = (0, react_1.useState)(false);
    const [expandedSpaceId, setExpandedSpaceId] = (0, react_1.useState)(null);
    const [preSelectedDate, setPreSelectedDate] = (0, react_1.useState)(null);
    // Form for booking creation
    const form = (0, react_hook_form_1.useForm)({
        resolver: (0, zod_1.zodResolver)(bookingFormSchema),
        defaultValues: {
            date: new Date(),
            startTime: '09:00',
            endTime: '10:00',
        },
    });
    // Back navigation is now handled by the HOC
    // Fetch common spaces in user's buildings (filtered by building if provided)
    const { data: commonSpaces = [], isLoading: spacesLoading } = (0, react_query_1.useQuery)({
        queryKey: ['/api/common-spaces', buildingId],
        queryFn: async () => {
            const url = buildingId ? `/api/common-spaces?building_id=${buildingId}` : '/api/common-spaces';
            const response = await fetch(url);
            if (!response.ok) {
                throw new Error('Failed to fetch common spaces');
            }
            return response.json();
        },
        enabled: !!user && !!buildingId,
    });
    // Fetch bookings for selected space
    const { data: bookings = [], isLoading: bookingsLoading } = (0, react_query_1.useQuery)({
        queryKey: ['/api/common-spaces', selectedSpace?.id, 'bookings'],
        enabled: !!selectedSpace,
    });
    // Fetch all user's bookings for export
    const { data: userBookings = [] } = (0, react_query_1.useQuery)({
        queryKey: ['/api/common-spaces/my-bookings'],
        enabled: !!user,
    });
    // Create booking mutation
    const createBookingMutation = (0, react_query_1.useMutation)({
        mutationFn: async (data) => {
            if (!selectedSpace) {
                throw new Error('No space selected');
            }
            // More robust date handling to avoid timezone issues
            const baseDate = data.date instanceof Date ? data.date : new Date(data.date);
            // Create start time by setting the time on a date object in local timezone
            const startDateTime = new Date(baseDate.getFullYear(), baseDate.getMonth(), baseDate.getDate());
            const [startHour, startMinute] = data.startTime.split(':').map(Number);
            startDateTime.setHours(startHour, startMinute, 0, 0);
            // Create end time similarly
            const endDateTime = new Date(baseDate.getFullYear(), baseDate.getMonth(), baseDate.getDate());
            const [endHour, endMinute] = data.endTime.split(':').map(Number);
            endDateTime.setHours(endHour, endMinute, 0, 0);
            // Booking creation handling
            return (0, queryClient_1.apiRequest)('POST', `/api/common-spaces/${selectedSpace.id}/bookings`, {
                start_time: startDateTime.toISOString(),
                end_time: endDateTime.toISOString(),
            });
        },
        onSuccess: () => {
            queryClient.invalidateQueries({ queryKey: ['/api/common-spaces'] });
            toast({
                title: 'RÃ©servation confirmÃ©e',
                description: 'Votre rÃ©servation a Ã©tÃ© crÃ©Ã©e avec succÃ¨s.',
            });
            setIsBookingDialogOpen(false);
            form.reset();
        },
        onError: (error) => {
            toast({
                title: 'Erreur de rÃ©servation',
                description: error.message || 'Une erreur est survenue lors de la crÃ©ation de la rÃ©servation.',
                variant: 'destructive',
            });
        },
    });
    // Get bookings for selected date
    const bookingsForDate = (0, react_1.useMemo)(() => {
        if (!bookings || !selectedDate) {
            return [];
        }
        return bookings.filter((booking) => {
            const bookingDate = (0, date_fns_1.parseISO)(booking.startTime);
            return (0, date_fns_1.isSameDay)(bookingDate, selectedDate);
        });
    }, [bookings, selectedDate]);
    // Get time slots availability
    const timeSlots = (0, react_1.useMemo)(() => {
        const slots = [];
        for (let hour = 6; hour <= 22; hour++) {
            slots.push(`${hour.toString().padStart(2, '0')}:00`);
            slots.push(`${hour.toString().padStart(2, '0')}:30`);
        }
        return slots;
    }, []);
    // Helper function to check if a day is available (moved from BookingCalendar)
    const isDayAvailable = (day) => {
        if (!selectedSpace) {
            return false;
        }
        // Past dates are not available
        const today = new Date();
        today.setHours(0, 0, 0, 0);
        const checkDay = new Date(day);
        checkDay.setHours(0, 0, 0, 0);
        if (checkDay < today) {
            return false;
        }
        // Check if day falls within any unavailable periods
        if (selectedSpace.unavailablePeriods && Array.isArray(selectedSpace.unavailablePeriods)) {
            for (const period of selectedSpace.unavailablePeriods) {
                const startDate = new Date(period.startDate);
                const endDate = new Date(period.endDate);
                startDate.setHours(0, 0, 0, 0);
                endDate.setHours(23, 59, 59, 999);
                if (checkDay >= startDate && checkDay <= endDate) {
                    return false;
                }
            }
        }
        // Check opening hours if available
        if (selectedSpace.openingHours && Array.isArray(selectedSpace.openingHours)) {
            const dayName = day.toLocaleDateString('en-US', { weekday: 'long' }).toLowerCase();
            const todayHours = selectedSpace.openingHours.find((h) => h.day.toLowerCase() === dayName);
            // If no hours defined for this day, it's unavailable
            if (!todayHours) {
                return false;
            }
            // If explicitly marked as closed
            if (todayHours.isOpen === false) {
                return false;
            }
        }
        return true;
    };
    // Check if time slot is available
    const isTimeSlotAvailable = (time, duration = 60) => {
        if (!selectedSpace || !selectedDate) {
            return false;
        }
        const [hour, minute] = time.split(':').map(Number);
        const slotStart = new Date(selectedDate);
        slotStart.setHours(hour, minute, 0, 0);
        const slotEnd = new Date(slotStart);
        slotEnd.setMinutes(slotEnd.getMinutes() + duration);
        // Check if day is available first (uses our enhanced availability logic)
        if (!isDayAvailable(selectedDate)) {
            return false;
        }
        // Check opening hours
        if (selectedSpace.openingHours && Array.isArray(selectedSpace.openingHours)) {
            const dayName = selectedDate.toLocaleDateString('en-US', { weekday: 'long' }).toLowerCase();
            const todayHours = selectedSpace.openingHours.find((h) => h.day.toLowerCase() === dayName);
            if (!todayHours || todayHours.isOpen === false) {
                return false;
            }
            const openTime = (0, date_fns_1.parse)(todayHours.open, 'HH:mm', selectedDate);
            const closeTime = (0, date_fns_1.parse)(todayHours.close, 'HH:mm', selectedDate);
            // Check if slot is within opening hours
            if (!(0, date_fns_1.isWithinInterval)(slotStart, { start: openTime, end: closeTime }) ||
                !(0, date_fns_1.isWithinInterval)(slotEnd, { start: openTime, end: closeTime })) {
                return false;
            }
            // Check if slot conflicts with any breaks
            if (todayHours.breaks && Array.isArray(todayHours.breaks)) {
                for (const breakPeriod of todayHours.breaks) {
                    const breakStart = (0, date_fns_1.parse)(breakPeriod.start, 'HH:mm', selectedDate);
                    const breakEnd = (0, date_fns_1.parse)(breakPeriod.end, 'HH:mm', selectedDate);
                    // Check if slot overlaps with break period
                    if ((slotStart >= breakStart && slotStart < breakEnd) ||
                        (slotEnd > breakStart && slotEnd <= breakEnd) ||
                        (slotStart <= breakStart && slotEnd >= breakEnd)) {
                        return false;
                    }
                }
            }
        }
        // Check conflicts with existing bookings
        return !bookingsForDate.some((booking) => {
            const bookingStart = (0, date_fns_1.parseISO)(booking.startTime);
            const bookingEnd = (0, date_fns_1.parseISO)(booking.endTime);
            return ((slotStart >= bookingStart && slotStart < bookingEnd) ||
                (slotEnd > bookingStart && slotEnd <= bookingEnd) ||
                (slotStart <= bookingStart && slotEnd >= bookingEnd));
        });
    };
    // Export functions
    const exportMyBookings = () => {
        const icsContent = generateICS(userBookings, false);
        const blob = new Blob([icsContent], { type: 'text/calendar;charset=utf-8' });
        const link = document.createElement('a');
        link.href = URL.createObjectURL(blob);
        link.download = `mes-reservations-${(0, date_fns_1.format)(new Date(), 'yyyy-MM-dd')}.ics`;
        document.body.appendChild(link);
        link.click();
        document.body.removeChild(link);
    };
    const exportAllBookings = () => {
        if (!selectedSpace) {
            return;
        }
        const icsContent = generateICS(bookings, true);
        const blob = new Blob([icsContent], { type: 'text/calendar;charset=utf-8' });
        const link = document.createElement('a');
        link.href = URL.createObjectURL(blob);
        link.download = `agenda-${selectedSpace.name.toLowerCase().replace(/\s+/g, '-')}-${(0, date_fns_1.format)(new Date(), 'yyyy-MM-dd')}.ics`;
        document.body.appendChild(link);
        link.click();
        document.body.removeChild(link);
    };
    const onSubmit = (data) => {
        createBookingMutation.mutate(data);
    };
    const handleSpaceClick = (space) => {
        setSelectedSpace(space);
        setExpandedSpaceId(expandedSpaceId === space.id ? null : space.id);
    };
    const handleDateClick = (date) => {
        setPreSelectedDate(date);
        form.setValue('date', date);
        setIsBookingDialogOpen(true);
    };
    const handleNewBooking = (space, date) => {
        setSelectedSpace(space);
        if (date) {
            setPreSelectedDate(date);
            form.setValue('date', date);
        }
        setIsBookingDialogOpen(true);
    };
    return ((0, jsx_runtime_1.jsxs)("div", { className: 'flex-1 flex flex-col overflow-hidden', "data-testid": 'common-spaces-page', children: [(0, jsx_runtime_1.jsx)(header_1.Header, { title: language === 'fr' ? 'Espaces Communs' : 'Common Spaces', subtitle: language === 'fr' ? 'RÃ©servez vos espaces communs' : 'Book your common spaces' }), showBackButton && onBack && ((0, jsx_runtime_1.jsx)("div", { className: "px-6 pt-6 pb-0", children: (0, jsx_runtime_1.jsxs)(button_1.Button, { variant: "outline", onClick: onBack, className: "flex items-center gap-2", children: [(0, jsx_runtime_1.jsx)(lucide_react_1.ArrowLeft, { className: "w-4 h-4" }), backButtonLabel] }) })), (0, jsx_runtime_1.jsx)("div", { className: 'flex-1 overflow-auto p-6', children: (0, jsx_runtime_1.jsx)("div", { className: 'max-w-7xl mx-auto space-y-6', children: (0, jsx_runtime_1.jsxs)("div", { className: 'space-y-6', children: [(0, jsx_runtime_1.jsxs)("div", { className: 'flex items-center justify-between', children: [(0, jsx_runtime_1.jsx)("h2", { className: 'text-2xl font-bold text-gray-900', "data-testid": 'spaces-list-title', children: language === 'fr' ? 'Espaces Disponibles' : 'Available Spaces' }), (0, jsx_runtime_1.jsxs)("div", { className: 'flex items-center gap-2', children: [(0, jsx_runtime_1.jsxs)(button_1.Button, { onClick: () => window.open('https://calendar.google.com/calendar/u/0/r/settings/addbyurl', '_blank'), variant: 'outline', size: 'sm', className: 'flex items-center gap-2', "data-testid": 'button-link-calendar', children: [(0, jsx_runtime_1.jsx)(lucide_react_1.Link, { className: 'w-4 h-4' }), language === 'fr' ? 'Lier calendrier' : 'Link calendar'] }), (0, jsx_runtime_1.jsxs)(button_1.Button, { onClick: exportMyBookings, variant: 'outline', size: 'sm', className: 'flex items-center gap-2', "data-testid": 'button-export-my-bookings', children: [(0, jsx_runtime_1.jsx)(lucide_react_1.Download, { className: 'w-4 h-4' }), language === 'fr'
                                                        ? 'Exporter mes rÃ©servations (.ics)'
                                                        : 'Export my bookings (.ics)'] })] })] }), spacesLoading ? ((0, jsx_runtime_1.jsx)("div", { className: 'space-y-4', children: [...Array(3)].map((_, i) => ((0, jsx_runtime_1.jsx)("div", { className: 'h-32 bg-gray-200 rounded-lg animate-pulse' }, i))) })) : ((0, jsx_runtime_1.jsx)("div", { className: 'space-y-4', "data-testid": 'spaces-list', children: commonSpaces.map((space) => ((0, jsx_runtime_1.jsxs)("div", { children: [(0, jsx_runtime_1.jsxs)(card_1.Card, { className: `cursor-pointer transition-all duration-200 hover:shadow-md ${expandedSpaceId === space.id ? 'ring-2 ring-koveo-navy bg-koveo-light/10' : ''}`, onClick: () => handleSpaceClick(space), "data-testid": `space-card-${space.id}`, children: [(0, jsx_runtime_1.jsx)(card_1.CardHeader, { className: 'pb-3', children: (0, jsx_runtime_1.jsxs)("div", { className: 'flex items-start justify-between', children: [(0, jsx_runtime_1.jsxs)(card_1.CardTitle, { className: 'flex items-center gap-2 text-lg', children: [(0, jsx_runtime_1.jsx)(lucide_react_1.Building2, { className: 'w-5 h-5 text-koveo-navy' }), space.name, expandedSpaceId === space.id ? ((0, jsx_runtime_1.jsx)(lucide_react_1.ChevronUp, { className: 'w-4 h-4 text-gray-500' })) : ((0, jsx_runtime_1.jsx)(lucide_react_1.ChevronDown, { className: 'w-4 h-4 text-gray-500' }))] }), (0, jsx_runtime_1.jsx)("div", { className: 'flex items-center gap-2', children: space.isReservable ? ((0, jsx_runtime_1.jsx)(badge_1.Badge, { variant: 'secondary', className: 'bg-green-100 text-green-800', children: language === 'fr' ? 'RÃ©servable' : 'Bookable' })) : ((0, jsx_runtime_1.jsx)(badge_1.Badge, { variant: 'secondary', className: 'bg-gray-100 text-gray-600', children: language === 'fr' ? 'Non RÃ©servable' : 'Non Bookable' })) })] }) }), (0, jsx_runtime_1.jsxs)(card_1.CardContent, { className: 'space-y-3', children: [space.description && ((0, jsx_runtime_1.jsx)("p", { className: 'text-gray-600 text-sm', "data-testid": `space-description-${space.id}`, children: space.description })), (0, jsx_runtime_1.jsx)("div", { className: 'flex items-center gap-4 text-sm text-gray-500', children: space.capacity && ((0, jsx_runtime_1.jsxs)("div", { className: 'flex items-center gap-1', children: [(0, jsx_runtime_1.jsx)(lucide_react_1.Users, { className: 'w-4 h-4' }), (0, jsx_runtime_1.jsxs)("span", { "data-testid": `space-capacity-${space.id}`, children: [space.capacity, " ", language === 'fr' ? 'personnes max' : 'people max'] })] })) }), space.openingHours && space.openingHours.length > 0 && ((0, jsx_runtime_1.jsxs)("div", { className: 'mt-3', children: [(0, jsx_runtime_1.jsxs)("h4", { className: 'font-medium text-sm text-gray-700 mb-2 flex items-center gap-1', children: [(0, jsx_runtime_1.jsx)(lucide_react_1.Clock, { className: 'w-4 h-4' }), language === 'fr' ? "Heures d'ouverture" : 'Opening Hours'] }), (0, jsx_runtime_1.jsx)("div", { className: 'grid grid-cols-1 gap-1 text-xs text-gray-600', "data-testid": `space-hours-${space.id}`, children: space.openingHours.map((hours, idx) => ((0, jsx_runtime_1.jsxs)("div", { className: 'flex justify-between', children: [(0, jsx_runtime_1.jsx)("span", { className: 'capitalize', children: hours.day }), (0, jsx_runtime_1.jsxs)("span", { children: [hours.open, " - ", hours.close] })] }, idx))) })] })), space.bookingRules && ((0, jsx_runtime_1.jsxs)("div", { className: 'mt-3', children: [(0, jsx_runtime_1.jsxs)("h4", { className: 'font-medium text-sm text-gray-700 mb-1 flex items-center gap-1', children: [(0, jsx_runtime_1.jsx)(lucide_react_1.FileText, { className: 'w-4 h-4' }), language === 'fr' ? 'RÃ¨gles de rÃ©servation' : 'Booking Rules'] }), (0, jsx_runtime_1.jsx)("p", { className: 'text-xs text-gray-600', "data-testid": `space-rules-${space.id}`, children: space.bookingRules })] }))] })] }), expandedSpaceId === space.id && ((0, jsx_runtime_1.jsxs)(jsx_runtime_1.Fragment, { children: [(0, jsx_runtime_1.jsx)(common_space_calendar_1.CommonSpaceCalendar, { space: space, onExport: exportAllBookings, onNewBooking: (date) => handleNewBooking(space, date), className: 'mt-4' }), space.isReservable && ((0, jsx_runtime_1.jsx)(dialog_1.Dialog, { open: isBookingDialogOpen, onOpenChange: setIsBookingDialogOpen, children: (0, jsx_runtime_1.jsxs)(dialog_1.DialogContent, { className: 'max-w-lg max-h-[90vh] overflow-y-auto', "data-testid": 'booking-dialog', children: [(0, jsx_runtime_1.jsxs)(dialog_1.DialogHeader, { children: [(0, jsx_runtime_1.jsx)(dialog_1.DialogTitle, { children: language === 'fr' ? 'Nouvelle rÃ©servation' : 'New Booking' }), (0, jsx_runtime_1.jsx)(dialog_1.DialogDescription, { children: language === 'fr'
                                                                            ? `RÃ©server ${space.name}`
                                                                            : `Book ${space.name}` })] }), (0, jsx_runtime_1.jsx)(form_1.Form, { ...form, children: (0, jsx_runtime_1.jsxs)("form", { onSubmit: form.handleSubmit(onSubmit), className: 'space-y-6', children: [(0, jsx_runtime_1.jsxs)("div", { className: 'p-4 bg-blue-50 border border-blue-200 rounded-lg', children: [(0, jsx_runtime_1.jsx)("div", { className: 'text-sm font-medium text-blue-900 mb-1', children: language === 'fr' ? 'Date sÃ©lectionnÃ©e' : 'Selected Date' }), (0, jsx_runtime_1.jsx)("div", { className: 'text-lg font-semibold text-blue-800', children: (0, date_fns_1.format)(form.watch('date'), 'EEEE, d MMMM yyyy', {
                                                                                        locale: language === 'fr' ? locale_1.fr : undefined,
                                                                                    }) })] }), selectedSpace?.openingHours && Array.isArray(selectedSpace.openingHours) && ((0, jsx_runtime_1.jsxs)("div", { className: 'p-3 bg-green-50 border border-green-200 rounded-lg', children: [(0, jsx_runtime_1.jsx)("div", { className: 'text-sm font-medium text-green-900 mb-2', children: language === 'fr' ? 'Heures d\'ouverture' : 'Opening Hours' }), selectedSpace.openingHours.map((hours, index) => {
                                                                                    const dayName = form.watch('date').toLocaleDateString('en-US', { weekday: 'long' }).toLowerCase();
                                                                                    if (hours.day.toLowerCase() === dayName) {
                                                                                        return ((0, jsx_runtime_1.jsxs)("div", { className: 'text-sm text-green-800', children: [hours.open, " - ", hours.close] }, index));
                                                                                    }
                                                                                    return null;
                                                                                })] })), (0, jsx_runtime_1.jsxs)("div", { className: 'space-y-4', children: [(0, jsx_runtime_1.jsx)("div", { className: 'text-sm font-medium text-gray-900', children: language === 'fr' ? 'CrÃ©neaux horaires disponibles' : 'Available Time Slots' }), (0, jsx_runtime_1.jsx)("div", { className: 'grid grid-cols-4 gap-2 max-h-60 overflow-y-auto p-2 border rounded-lg bg-gray-50', children: timeSlots.map((time) => {
                                                                                        const isAvailable = isTimeSlotAvailable(time);
                                                                                        const hasBooking = bookingsForDate.some((booking) => {
                                                                                            const bookingStart = (0, date_fns_1.parseISO)(booking.startTime);
                                                                                            const bookingEnd = (0, date_fns_1.parseISO)(booking.endTime);
                                                                                            const timeSlot = (0, date_fns_1.parse)(time, 'HH:mm', form.watch('date'));
                                                                                            return timeSlot >= bookingStart && timeSlot < bookingEnd;
                                                                                        });
                                                                                        const currentStartTime = form.watch('startTime');
                                                                                        const currentEndTime = form.watch('endTime');
                                                                                        const isSelected = time === currentStartTime || time === currentEndTime;
                                                                                        return ((0, jsx_runtime_1.jsxs)("button", { type: 'button', disabled: !isAvailable || hasBooking, onClick: () => {
                                                                                                if (!currentStartTime || (currentStartTime && currentEndTime)) {
                                                                                                    // Set start time
                                                                                                    form.setValue('startTime', time);
                                                                                                    form.setValue('endTime', '');
                                                                                                }
                                                                                                else {
                                                                                                    // Set end time if start time is already set
                                                                                                    if (time > currentStartTime) {
                                                                                                        form.setValue('endTime', time);
                                                                                                    }
                                                                                                    else {
                                                                                                        // If selected time is before start time, make it the new start time
                                                                                                        form.setValue('startTime', time);
                                                                                                        form.setValue('endTime', '');
                                                                                                    }
                                                                                                }
                                                                                            }, className: `
                                            p-2 text-xs rounded-md border transition-colors relative
                                            ${!isAvailable
                                                                                                ? 'bg-red-100 border-red-200 text-red-600 cursor-not-allowed'
                                                                                                : hasBooking
                                                                                                    ? 'bg-orange-100 border-orange-200 text-orange-700 cursor-not-allowed'
                                                                                                    : isSelected
                                                                                                        ? 'bg-blue-500 border-blue-600 text-white font-semibold'
                                                                                                        : 'bg-white border-gray-200 text-gray-700 hover:bg-gray-100 hover:border-gray-300'}
                                          `, children: [(0, jsx_runtime_1.jsx)("div", { className: 'font-medium', children: time }), hasBooking && ((0, jsx_runtime_1.jsx)("div", { className: 'text-[10px] mt-1 text-orange-600', children: language === 'fr' ? 'RÃ©servÃ©' : 'Booked' })), !isAvailable && !hasBooking && ((0, jsx_runtime_1.jsx)("div", { className: 'text-[10px] mt-1 text-red-600', children: language === 'fr' ? 'FermÃ©' : 'Closed' })), isSelected && ((0, jsx_runtime_1.jsx)("div", { className: 'text-[10px] mt-1 text-white', children: time === currentStartTime
                                                                                                        ? (language === 'fr' ? 'DÃ©but' : 'Start')
                                                                                                        : (language === 'fr' ? 'Fin' : 'End') }))] }, time));
                                                                                    }) }), (0, jsx_runtime_1.jsxs)("div", { className: 'grid grid-cols-2 gap-4 text-xs', children: [(0, jsx_runtime_1.jsxs)("div", { className: 'space-y-2', children: [(0, jsx_runtime_1.jsxs)("div", { className: 'flex items-center gap-2', children: [(0, jsx_runtime_1.jsx)("div", { className: 'w-3 h-3 bg-white border border-gray-200 rounded' }), (0, jsx_runtime_1.jsx)("span", { children: language === 'fr' ? 'Disponible' : 'Available' })] }), (0, jsx_runtime_1.jsxs)("div", { className: 'flex items-center gap-2', children: [(0, jsx_runtime_1.jsx)("div", { className: 'w-3 h-3 bg-blue-500 rounded' }), (0, jsx_runtime_1.jsx)("span", { children: language === 'fr' ? 'SÃ©lectionnÃ©' : 'Selected' })] })] }), (0, jsx_runtime_1.jsxs)("div", { className: 'space-y-2', children: [(0, jsx_runtime_1.jsxs)("div", { className: 'flex items-center gap-2', children: [(0, jsx_runtime_1.jsx)("div", { className: 'w-3 h-3 bg-orange-100 border border-orange-200 rounded' }), (0, jsx_runtime_1.jsx)("span", { children: language === 'fr' ? 'RÃ©servÃ©' : 'Booked' })] }), (0, jsx_runtime_1.jsxs)("div", { className: 'flex items-center gap-2', children: [(0, jsx_runtime_1.jsx)("div", { className: 'w-3 h-3 bg-red-100 border border-red-200 rounded' }), (0, jsx_runtime_1.jsx)("span", { children: language === 'fr' ? 'FermÃ©' : 'Closed' })] })] })] })] }), form.watch('startTime') && ((0, jsx_runtime_1.jsxs)("div", { className: 'p-3 bg-gray-50 border border-gray-200 rounded-lg', children: [(0, jsx_runtime_1.jsx)("div", { className: 'text-sm font-medium text-gray-900 mb-1', children: language === 'fr' ? 'RÃ©servation sÃ©lectionnÃ©e' : 'Selected Booking' }), (0, jsx_runtime_1.jsxs)("div", { className: 'text-sm text-gray-700', children: [(0, jsx_runtime_1.jsx)("span", { className: 'font-medium', children: language === 'fr' ? 'DÃ©but:' : 'Start:' }), " ", form.watch('startTime'), form.watch('endTime') && ((0, jsx_runtime_1.jsxs)("span", { className: 'ml-4', children: [(0, jsx_runtime_1.jsx)("span", { className: 'font-medium', children: language === 'fr' ? 'Fin:' : 'End:' }), " ", form.watch('endTime')] }))] }), form.watch('endTime') && ((0, jsx_runtime_1.jsxs)("div", { className: 'text-xs text-gray-500 mt-1', children: [language === 'fr' ? 'DurÃ©e:' : 'Duration:', (() => {
                                                                                            const start = (0, date_fns_1.parse)(form.watch('startTime'), 'HH:mm', new Date());
                                                                                            const end = (0, date_fns_1.parse)(form.watch('endTime'), 'HH:mm', new Date());
                                                                                            const duration = (end.getTime() - start.getTime()) / (1000 * 60);
                                                                                            return `${Math.floor(duration / 60)}h ${duration % 60 > 0 ? `${duration % 60}min` : ''}`;
                                                                                        })()] }))] })), !form.watch('startTime') && ((0, jsx_runtime_1.jsx)("div", { className: 'text-sm text-amber-600 bg-amber-50 border border-amber-200 rounded-lg p-3', children: language === 'fr'
                                                                                ? 'Veuillez sÃ©lectionner une heure de dÃ©but'
                                                                                : 'Please select a start time' })), form.watch('startTime') && !form.watch('endTime') && ((0, jsx_runtime_1.jsx)("div", { className: 'text-sm text-amber-600 bg-amber-50 border border-amber-200 rounded-lg p-3', children: language === 'fr'
                                                                                ? 'Veuillez sÃ©lectionner une heure de fin'
                                                                                : 'Please select an end time' })), (0, jsx_runtime_1.jsxs)("div", { className: 'hidden', children: [(0, jsx_runtime_1.jsx)(form_1.FormField, { control: form.control, name: 'date', render: ({ field }) => ((0, jsx_runtime_1.jsxs)(form_1.FormItem, { children: [(0, jsx_runtime_1.jsx)(form_1.FormControl, { children: (0, jsx_runtime_1.jsx)("input", { ...field, value: field.value?.toISOString() || '', readOnly: true }) }), (0, jsx_runtime_1.jsx)(form_1.FormMessage, {})] })) }), (0, jsx_runtime_1.jsx)(form_1.FormField, { control: form.control, name: 'startTime', render: ({ field }) => ((0, jsx_runtime_1.jsxs)(form_1.FormItem, { children: [(0, jsx_runtime_1.jsx)(form_1.FormControl, { children: (0, jsx_runtime_1.jsx)("input", { ...field, readOnly: true }) }), (0, jsx_runtime_1.jsx)(form_1.FormMessage, {})] })) }), (0, jsx_runtime_1.jsx)(form_1.FormField, { control: form.control, name: 'endTime', render: ({ field }) => ((0, jsx_runtime_1.jsxs)(form_1.FormItem, { children: [(0, jsx_runtime_1.jsx)(form_1.FormControl, { children: (0, jsx_runtime_1.jsx)("input", { ...field, readOnly: true }) }), (0, jsx_runtime_1.jsx)(form_1.FormMessage, {})] })) })] }), (0, jsx_runtime_1.jsxs)(dialog_1.DialogFooter, { children: [(0, jsx_runtime_1.jsx)(button_1.Button, { type: 'button', variant: 'outline', onClick: () => {
                                                                                        setIsBookingDialogOpen(false);
                                                                                        form.reset();
                                                                                    }, "data-testid": 'button-cancel-booking', children: language === 'fr' ? 'Annuler' : 'Cancel' }), (0, jsx_runtime_1.jsx)(button_1.Button, { type: 'submit', disabled: createBookingMutation.isPending ||
                                                                                        !form.watch('startTime') ||
                                                                                        !form.watch('endTime'), "data-testid": 'button-confirm-booking', children: createBookingMutation.isPending
                                                                                        ? language === 'fr'
                                                                                            ? 'RÃ©servation...'
                                                                                            : 'Booking...'
                                                                                        : language === 'fr'
                                                                                            ? 'Confirmer la rÃ©servation'
                                                                                            : 'Confirm Booking' })] })] }) })] }) }))] }))] }, space.id))) }))] }) }) })] }));
}
// Wrap with hierarchical selection HOC using building hierarchy (residents only see buildings they have residences in)
const CommonSpacesPage = (0, withHierarchicalSelection_1.withHierarchicalSelection)(CommonSpacesPageInner, {
    hierarchy: ['building']
});
exports.default = CommonSpacesPage;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiL2hvbWUvcnVubmVyL3dvcmtzcGFjZS9jbGllbnQvc3JjL3BhZ2VzL3Jlc2lkZW50cy9jb21tb24tc3BhY2VzLnRzeCIsIm1hcHBpbmdzIjoiOzs7QUFBQSxpQ0FBMEM7QUFDMUMsdURBQThFO0FBQzlFLHVDQVdrQjtBQUNsQiw0Q0FBcUM7QUFDckMscURBQTBDO0FBQzFDLGlEQUFzRDtBQUN0RCw2QkFBd0I7QUFDeEIsdURBQW9EO0FBQ3BELCtDQUFnRjtBQUNoRixpREFBOEM7QUFDOUMsbURBQWdEO0FBSWhELDBGQUF1RjtBQUN2RixtQ0FBcUM7QUFRckMsbURBUWdDO0FBQ2hDLCtDQU84QjtBQUU5QixxREFBbUc7QUFDbkcsK0NBa0JzQjtBQUN0QixpREFBNkM7QUFDN0MsK0NBQTJDO0FBQzNDLHVEQUFtRDtBQUNuRCxtREFBK0M7QUFFL0MsNEZBQXVGO0FBcUR2Rjs7R0FFRztBQUNILE1BQU0saUJBQWlCLEdBQUcsT0FBQztLQUN4QixNQUFNLENBQUM7SUFDTixJQUFJLEVBQUUsT0FBQyxDQUFDLElBQUksQ0FBQztRQUNYLE9BQU8sRUFBRSxnREFBZ0Q7S0FDMUQsQ0FBQztJQUNGLFNBQVMsRUFBRSxPQUFDLENBQUMsTUFBTSxFQUFFLENBQUMsR0FBRyxDQUFDLENBQUMsRUFBRSx5Q0FBeUMsQ0FBQyxDQUFDLEtBQUssQ0FBQyxtQ0FBbUMsRUFBRSxxREFBcUQsQ0FBQztJQUN6SyxPQUFPLEVBQUUsT0FBQyxDQUFDLE1BQU0sRUFBRSxDQUFDLEdBQUcsQ0FBQyxDQUFDLEVBQUUsdUNBQXVDLENBQUMsQ0FBQyxLQUFLLENBQUMsbUNBQW1DLEVBQUUsbURBQW1ELENBQUM7Q0FDcEssQ0FBQztLQUNELE1BQU0sQ0FDTCxDQUFDLElBQUksRUFBRSxFQUFFO0lBQ1AsTUFBTSxLQUFLLEdBQUcsSUFBQSxnQkFBSyxFQUFDLElBQUksQ0FBQyxTQUFTLEVBQUUsT0FBTyxFQUFFLElBQUksSUFBSSxFQUFFLENBQUMsQ0FBQztJQUN6RCxNQUFNLEdBQUcsR0FBRyxJQUFBLGdCQUFLLEVBQUMs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Z0JBQWdCLENBQUMiLCJuYW1lcyI6W10sInNvdXJjZXMiOlsiL2hvbWUvcnVubmVyL3dvcmtzcGFjZS9jbGllbnQvc3JjL3BhZ2VzL3Jlc2lkZW50cy9jb21tb24tc3BhY2VzLnRzeCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyB1c2VTdGF0ZSwgdXNlTWVtbyB9IGZyb20gJ3JlYWN0JztcbmltcG9ydCB7IHVzZVF1ZXJ5LCB1c2VNdXRhdGlvbiwgdXNlUXVlcnlDbGllbnQgfSBmcm9tICdAdGFuc3RhY2svcmVhY3QtcXVlcnknO1xuaW1wb3J0IHtcbiAgZm9ybWF0LFxuICBhZGREYXlzLFxuICBpc1NhbWVEYXksXG4gIHBhcnNlSVNPLFxuICBpc1dpdGhpbkludGVydmFsLFxuICBwYXJzZSxcbiAgc3RhcnRPZk1vbnRoLFxuICBlbmRPZk1vbnRoLFxuICBlYWNoRGF5T2ZJbnRlcnZhbCxcbiAgaXNUb2RheSxcbn0gZnJvbSAnZGF0ZS1mbnMnO1xuaW1wb3J0IHsgZnIgfSBmcm9tICdkYXRlLWZucy9sb2NhbGUnO1xuaW1wb3J0IHsgdXNlRm9ybSB9IGZyb20gJ3JlYWN0LWhvb2stZm9ybSc7XG5pbXBvcnQgeyB6b2RSZXNvbHZlciB9IGZyb20gJ0Bob29rZm9ybS9yZXNvbHZlcnMvem9kJztcbmltcG9ydCB7IHogfSBmcm9tICd6b2QnO1xuaW1wb3J0IHsgSGVhZGVyIH0gZnJvbSAnQC9jb21wb25lbnRzL2xheW91dC9oZWFkZXInO1xuaW1wb3J0IHsgQ2FyZCwgQ2FyZENvbnRlbnQsIENhcmRIZWFkZXIsIENhcmRUaXRsZSB9IGZyb20gJ0AvY29tcG9uZW50cy91aS9jYXJkJztcbmltcG9ydCB7IEJhZGdlIH0gZnJvbSAnQC9jb21wb25lbnRzL3VpL2JhZGdlJztcbmltcG9ydCB7IEJ1dHRvbiB9IGZyb20gJ0AvY29tcG9uZW50cy91aS9idXR0b24nO1xuaW1wb3J0IHsgSW5wdXQgfSBmcm9tICdAL2NvbXBvbmVudHMvdWkvaW5wdXQnO1xuaW1wb3J0IHsgTGFiZWwgfSBmcm9tICdAL2NvbXBvbmVudHMvdWkvbGFiZWwnO1xuaW1wb3J0IHsgVGV4dGFyZWEgfSBmcm9tICdAL2NvbXBvbmVudHMvdWkvdGV4dGFyZWEnO1xuaW1wb3J0IHsgd2l0aEhpZXJhcmNoaWNhbFNlbGVjdGlvbiB9IGZyb20gJ0AvY29tcG9uZW50cy9ob2Mvd2l0aEhpZXJhcmNoaWNhbFNlbGVjdGlvbic7XG5pbXBvcnQgeyB1c2VMb2NhdGlvbiB9IGZyb20gJ3dvdXRlcic7XG5pbXBvcnQge1xuICBTZWxlY3QsXG4gIFNlbGVjdENvbnRlbnQsXG4gIFNlbGVjdEl0ZW0sXG4gIFNlbGVjdFRyaWdnZXIsXG4gIFNlbGVjdFZhbHVlLFxufSBmcm9tICdAL2NvbXBvbmVudHMvdWkvc2VsZWN0JztcbmltcG9ydCB7XG4gIERpYWxvZyxcbiAgRGlhbG9nQ29udGVudCxcbiAgRGlhbG9nSGVhZGVyLFxuICBEaWFsb2dUaXRsZSxcbiAgRGlhbG9nVHJpZ2dlcixcbiAgRGlhbG9nRGVzY3JpcHRpb24sXG4gIERpYWxvZ0Zvb3Rlcixcbn0gZnJvbSAnQC9jb21wb25lbnRzL3VpL2RpYWxvZyc7XG5pbXBvcnQge1xuICBGb3JtLFxuICBGb3JtQ29udHJvbCxcbiAgRm9ybUZpZWxkLFxuICBGb3JtSXRlbSxcbiAgRm9ybUxhYmVsLFxuICBGb3JtTWVzc2FnZSxcbn0gZnJvbSAnQC9jb21wb25lbnRzL3VpL2Zvcm0nO1xuaW1wb3J0IHsgQ2FsZW5kYXIgfSBmcm9tICdAL2NvbXBvbmVudHMvdWkvY2FsZW5kYXInO1xuaW1wb3J0IHsgVG9vbHRpcCwgVG9vbHRpcENvbnRlbnQsIFRvb2x0aXBQcm92aWRlciwgVG9vbHRpcFRyaWdnZXIgfSBmcm9tICdAL2NvbXBvbmVudHMvdWkvdG9vbHRpcCc7XG5pbXBvcnQge1xuICBCdWlsZGluZzIsXG4gIENsb2NrLFxuICBVc2VycyxcbiAgTWFwUGluLFxuICBEb3dubG9hZCxcbiAgTGluayxcbiAgQ2FsZW5kYXIgYXMgQ2FsZW5kYXJJY29uLFxuICBQbHVzLFxuICBYLFxuICBGaWxlVGV4dCxcbiAgVXNlcixcbiAgQ2FsZW5kYXJEYXlzLFxuICBDaGV2cm9uRG93bixcbiAgQ2hldnJvblVwLFxuICBDaGV2cm9uTGVmdCxcbiAgQ2hldnJvblJpZ2h0LFxuICBBcnJvd0xlZnQsXG59IGZyb20gJ2x1Y2lkZS1yZWFjdCc7XG5pbXBvcnQgeyB1c2VUb2FzdCB9IGZyb20gJ0AvaG9va3MvdXNlLXRvYXN0JztcbmltcG9ydCB7IHVzZUF1dGggfSBmcm9tICdAL2hvb2tzL3VzZS1hdXRoJztcbmltcG9ydCB7IHVzZUxhbmd1YWdlIH0gZnJvbSAnQC9ob29rcy91c2UtbGFuZ3VhZ2UnO1xuaW1wb3J0IHsgYXBpUmVxdWVzdCB9IGZyb20gJ0AvbGliL3F1ZXJ5Q2xpZW50JztcbmltcG9ydCB7IENhbGVuZGFyVmlldyB9IGZyb20gJ0AvY29tcG9uZW50cy9jb21tb24tc3BhY2VzL2NhbGVuZGFyLXZpZXcnO1xuaW1wb3J0IHsgQ29tbW9uU3BhY2VDYWxlbmRhciB9IGZyb20gJ0AvY29tcG9uZW50cy9jb21tb24tc3BhY2VzL2NvbW1vbi1zcGFjZS1jYWxlbmRhcic7XG5cbi8qKlxuICogQ29tbW9uIFNwYWNlIGludGVyZmFjZS5cbiAqL1xuaW50ZXJmYWNlIENvbW1vblNwYWNlIHtcbiAgaWQ6IHN0cmluZztcbiAgbmFtZTogc3RyaW5nO1xuICBkZXNjcmlwdGlvbj86IHN0cmluZztcbiAgYnVpbGRpbmdJZDogc3RyaW5nO1xuICBpc1Jlc2VydmFibGU6IGJvb2xlYW47XG4gIGNhcGFjaXR5PzogbnVtYmVyO1xuICBjb250YWN0UGVyc29uSWQ/OiBzdHJpbmc7XG4gIG9wZW5pbmdIb3Vycz86IEFycmF5PHtcbiAgICBkYXk6IHN0cmluZztcbiAgICBvcGVuOiBzdHJpbmc7XG4gICAgY2xvc2U6IHN0cmluZztcbiAgICBpc09wZW4/OiBib29sZWFuO1xuICAgIGJyZWFrcz86IEFycmF5PHtcbiAgICAgIHN0YXJ0OiBzdHJpbmc7XG4gICAgICBlbmQ6IHN0cmluZztcbiAgICAgIHJlYXNvbj86IHN0cmluZztcbiAgICB9PjtcbiAgfT47XG4gIHVuYXZhaWxhYmxlUGVyaW9kcz86IEFycmF5PHtcbiAgICBzdGFydERhdGU6IHN0cmluZztcbiAgICBlbmREYXRlOiBzdHJpbmc7XG4gICAgcmVhc29uPzogc3RyaW5nO1xuICAgIHJlY3VycmVuY2U/OiAnbm9uZScgfCAnd2Vla2x5JyB8ICdtb250aGx5JyB8ICd5ZWFybHknO1xuICB9PjtcbiAgYm9va2luZ1J1bGVzPzogc3RyaW5nO1xuICBjcmVhdGVkQXQ6IHN0cmluZztcbiAgdXBkYXRlZEF0OiBzdHJpbmc7XG59XG5cbi8qKlxuICogQm9va2luZyBpbnRlcmZhY2UuXG4gKi9cbmludGVyZmFjZSBCb29raW5nIHtcbiAgaWQ6IHN0cmluZztcbiAgY29tbW9uU3BhY2VJZDogc3RyaW5nO1xuICB1c2VySWQ6IHN0cmluZztcbiAgc3RhcnRUaW1lOiBzdHJpbmc7XG4gIGVuZFRpbWU6IHN0cmluZztcbiAgc3RhdHVzOiAnY29uZmlybWVkJyB8ICdjYW5jZWxsZWQnO1xuICBjcmVhdGVkQXQ6IHN0cmluZztcbiAgdXBkYXRlZEF0OiBzdHJpbmc7XG4gIHVzZXI/OiB7XG4gICAgZmlyc3ROYW1lOiBzdHJpbmc7XG4gICAgbGFzdE5hbWU6IHN0cmluZztcbiAgfTtcbn1cblxuLyoqXG4gKiBCb29raW5nIGZvcm0gc2NoZW1hLlxuICovXG5jb25zdCBib29raW5nRm9ybVNjaGVtYSA9IHpcbiAgLm9iamVjdCh7XG4gICAgZGF0ZTogei5kYXRlKHtcbiAgICAgIG1lc3NhZ2U6ICdQbGVhc2Ugc2VsZWN0IGEgYm9va2luZyBkYXRlIGZyb20gdGhlIGNhbGVuZGFyJyxcbiAgICB9KSxcbiAgICBzdGFydFRpbWU6IHouc3RyaW5nKCkubWluKDEsICdTdGFydCB0aW1lIGlzIHJlcXVpcmVkIChleGFtcGxlOiAwOTowMCknKS5yZWdleCgvXihbMC0xXT9bMC05XXwyWzAtM10pOlswLTVdWzAtOV0kLywgJ1N0YXJ0IHRpbWUgbXVzdCBiZSBpbiBISDpNTSBmb3JtYXQgKGV4YW1wbGU6IDA5OjAwKScpLFxuICAgIGVuZFRpbWU6IHouc3RyaW5nKCkubWluKDEsICdFbmQgdGltZSBpcyByZXF1aXJlZCAoZXhhbXBsZTogMTE6MDApJykucmVnZXgoL14oWzAtMV0/WzAtOV18MlswLTNdKTpbMC01XVswLTldJC8sICdFbmQgdGltZSBtdXN0IGJlIGluIEhIOk1NIGZvcm1hdCAoZXhhbXBsZTogMTE6MDApJyksXG4gIH0pXG4gIC5yZWZpbmUoXG4gICAgKGRhdGEpID0+IHtcbiAgICAgIGNvbnN0IHN0YXJ0ID0gcGFyc2UoZGF0YS5zdGFydFRpbWUsICdISDptbScsIG5ldyBEYXRlKCkpO1xuICAgICAgY29uc3QgZW5kID0gcGFyc2UoZGF0YS5lbmRUaW1lLCAnSEg6bW0nLCBuZXcgRGF0ZSgpKTtcbiAgICAgIHJldHVybiBlbmQgPiBzdGFydDtcbiAgICB9LFxuICAgIHtcbiAgICAgIG1lc3NhZ2U6ICdFbmQgdGltZSBtdXN0IGJlIGFmdGVyIHN0YXJ0IHRpbWUgKGV4YW1wbGU6IHN0YXJ0IGF0IDA5OjAwLCBlbmQgYXQgMTE6MDApJyxcbiAgICAgIHBhdGg6IFsnZW5kVGltZSddLFxuICAgIH1cbiAgKTtcblxuLyoqXG4gKlxuICovXG50eXBlIEJvb2tpbmdGb3JtRGF0YSA9IHouaW5mZXI8dHlwZW9mIGJvb2tpbmdGb3JtU2NoZW1hPjtcblxuLyoqXG4gKiBDb21wYWN0IEJvb2tpbmcgQ2FsZW5kYXIgQ29tcG9uZW50LlxuICovXG5pbnRlcmZhY2UgQm9va2luZ0NhbGVuZGFyUHJvcHMge1xuICBzZWxlY3RlZDogRGF0ZTtcbiAgb25TZWxlY3Q6IChkYXRlOiBEYXRlKSA9PiB2b2lkO1xuICBzcGFjZTogQ29tbW9uU3BhY2U7XG4gIGJvb2tpbmdzOiBCb29raW5nW107XG4gIGxhbmd1YWdlOiBzdHJpbmc7XG4gICdkYXRhLXRlc3RpZCc/OiBzdHJpbmc7XG59XG5cbi8qKlxuICpcbiAqIEBwYXJhbSByb290MFxuICogQHBhcmFtIHJvb3QwLnNlbGVjdGVkXG4gKiBAcGFyYW0gcm9vdDAub25TZWxlY3RcbiAqIEBwYXJhbSByb290MC5zcGFjZVxuICogQHBhcmFtIHJvb3QwLmJvb2tpbmdzXG4gKiBAcGFyYW0gcm9vdDAubGFuZ3VhZ2VcbiAqIEBwYXJhbSByb290MC4nZGF0YS10ZXN0aWQnXG4gKi9cbmZ1bmN0aW9uIEJvb2tpbmdDYWxlbmRhcih7XG4gIHNlbGVjdGVkLFxuICBvblNlbGVjdCxcbiAgc3BhY2UsXG4gIGJvb2tpbmdzLFxuICBsYW5ndWFnZSxcbiAgJ2RhdGEtdGVzdGlkJzogdGVzdElkLFxufTogQm9va2luZ0NhbGVuZGFyUHJvcHMpIHtcbiAgY29uc3QgW2N1cnJlbnREYXRlLCBzZXRDdXJyZW50RGF0ZV0gPSB1c2VTdGF0ZShzZWxlY3RlZCB8fCBuZXcgRGF0ZSgpKTtcblxuICBjb25zdCBtb250aERheXMgPSB1c2VNZW1vKCgpID0+IHtcbiAgICBjb25zdCBzdGFydCA9IHN0YXJ0T2ZNb250aChjdXJyZW50RGF0ZSk7XG4gICAgY29uc3QgZW5kID0gZW5kT2ZNb250aChjdXJyZW50RGF0ZSk7XG4gICAgcmV0dXJuIGVhY2hEYXlPZkludGVydmFsKHsgc3RhcnQsIGVuZCB9KTtcbiAgfSwgW2N1cnJlbnREYXRlXSk7XG5cbiAgY29uc3QgZ2V0Qm9va2luZ3NGb3JEYXkgPSAoZGF5OiBEYXRlKSA9PiB7XG4gICAgcmV0dXJuIGJvb2tpbmdzLmZpbHRlcihcbiAgICAgIChib29raW5nKSA9PiBpc1NhbWVEYXkocGFyc2VJU08oYm9va2luZy5zdGFydFRpbWUpLCBkYXkpICYmIGJvb2tpbmcuc3RhdHVzID09PSAnY29uZmlybWVkJ1xuICAgICk7XG4gIH07XG5cbiAgY29uc3QgaXNEYXlBdmFpbGFibGUgPSAoZGF5OiBEYXRlKSA9PiB7XG4gICAgLy8gUGFzdCBkYXRlcyBhcmUgbm90IGF2YWlsYWJsZVxuICAgIGNvbnN0IHRvZGF5ID0gbmV3IERhdGUoKTtcbiAgICB0b2RheS5zZXRIb3VycygwLCAwLCAwLCAwKTtcbiAgICBjb25zdCBjaGVja0RheSA9IG5ldyBEYXRlKGRheSk7XG4gICAgY2hlY2tEYXkuc2V0SG91cnMoMCwgMCwgMCwgMCk7XG4gICAgXG4gICAgaWYgKGNoZWNrRGF5IDwgdG9kYXkpIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICAvLyBDaGVjayBpZiBkYXkgZmFsbHMgd2l0aGluIGFueSB1bmF2YWlsYWJsZSBwZXJpb2RzXG4gICAgaWYgKHNwYWNlLnVuYXZhaWxhYmxlUGVyaW9kcyAmJiBBcnJheS5pc0FycmF5KHNwYWNlLnVuYXZhaWxhYmxlUGVyaW9kcykpIHtcbiAgICAgIGZvciAoY29uc3QgcGVyaW9kIG9mIHNwYWNlLnVuYXZhaWxhYmxlUGVyaW9kcykge1xuICAgICAgICBjb25zdCBzdGFydERhdGUgPSBuZXcgRGF0ZShwZXJpb2Quc3RhcnREYXRlKTtcbiAgICAgICAgY29uc3QgZW5kRGF0ZSA9IG5ldyBEYXRlKHBlcmlvZC5lbmREYXRlKTtcbiAgICAgICAgc3RhcnREYXRlLnNldEhvdXJzKDAsIDAsIDAsIDApO1xuICAgICAgICBlbmREYXRlLnNldEhvdXJzKDIzLCA1OSwgNTksIDk5OSk7XG4gICAgICAgIFxuICAgICAgICBpZiAoY2hlY2tEYXkgPj0gc3RhcnREYXRlICYmIGNoZWNrRGF5IDw9IGVuZERhdGUpIHtcbiAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBDaGVjayBvcGVuaW5nIGhvdXJzIGlmIGF2YWlsYWJsZVxuICAgIGlmIChzcGFjZS5vcGVuaW5nSG91cnMgJiYgQXJyYXkuaXNBcnJheShzcGFjZS5vcGVuaW5nSG91cnMpKSB7XG4gICAgICBjb25zdCBkYXlOYW1lID0gZGF5LnRvTG9jYWxlRGF0ZVN0cmluZygnZW4tVVMnLCB7IHdlZWtkYXk6ICdsb25nJyB9KS50b0xvd2VyQ2FzZSgpO1xuICAgICAgY29uc3QgdG9kYXlIb3VycyA9IHNwYWNlLm9wZW5pbmdIb3Vycy5maW5kKChoKSA9PiBoLmRheS50b0xvd2VyQ2FzZSgpID09PSBkYXlOYW1lKTtcbiAgICAgIFxuICAgICAgLy8gSWYgbm8gaG91cnMgZGVmaW5lZCBmb3IgdGhpcyBkYXksIGl0J3MgdW5hdmFpbGFibGVcbiAgICAgIGlmICghdG9kYXlIb3Vycykge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9XG4gICAgICBcbiAgICAgIC8vIElmIGV4cGxpY2l0bHkgbWFya2VkIGFzIGNsb3NlZFxuICAgICAgaWYgKHRvZGF5SG91cnMuaXNPcGVuID09PSBmYWxzZSkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIHRydWU7XG4gIH07XG5cbiAgY29uc3QgZ29Ub1ByZXZNb250aCA9ICgpID0+IHtcbiAgICBzZXRDdXJyZW50RGF0ZSgocHJldikgPT4ge1xuICAgICAgY29uc3QgbmV3RGF0ZSA9IG5ldyBEYXRlKHByZXYpO1xuICAgICAgbmV3RGF0ZS5zZXRNb250aChwcmV2LmdldE1vbnRoKCkgLSAxKTtcbiAgICAgIHJldHVybiBuZXdEYXRlO1xuICAgIH0pO1xuICB9O1xuXG4gIGNvbnN0IGdvVG9OZXh0TW9udGggPSAoKSA9PiB7XG4gICAgc2V0Q3VycmVudERhdGUoKHByZXYpID0+IHtcbiAgICAgIGNvbnN0IG5ld0RhdGUgPSBuZXcgRGF0ZShwcmV2KTtcbiAgICAgIG5ld0RhdGUuc2V0TW9udGgocHJldi5nZXRNb250aCgpICsgMSk7XG4gICAgICByZXR1cm4gbmV3RGF0ZTtcbiAgICB9KTtcbiAgfTtcblxuICByZXR1cm4gKFxuICAgIDxUb29sdGlwUHJvdmlkZXI+XG4gICAgICA8ZGl2IGNsYXNzTmFtZT0nYm9yZGVyIHJvdW5kZWQtbWQgYmctd2hpdGUnIGRhdGEtdGVzdGlkPXt0ZXN0SWR9PlxuICAgICAgICB7LyogQ2FsZW5kYXIgSGVhZGVyICovfVxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT0nZmxleCBpdGVtcy1jZW50ZXIganVzdGlmeS1iZXR3ZWVuIHAtMyBib3JkZXItYic+XG4gICAgICAgICAgPEJ1dHRvbiB2YXJpYW50PSdvdXRsaW5lJyBzaXplPSdzbScgb25DbGljaz17Z29Ub1ByZXZNb250aH0gY2xhc3NOYW1lPSdoLTggdy04IHAtMCc+XG4gICAgICAgICAgICA8Q2hldnJvbkxlZnQgY2xhc3NOYW1lPSdoLTQgdy00JyAvPlxuICAgICAgICAgIDwvQnV0dG9uPlxuXG4gICAgICAgICAgPGgzIGNsYXNzTmFtZT0ndGV4dC1zbSBmb250LXNlbWlib2xkJz5cbiAgICAgICAgICAgIHtmb3JtYXQoY3VycmVudERhdGUsICdNTU1NIHl5eXknLCB7IGxvY2FsZTogbGFuZ3VhZ2UgPT09ICdmcicgPyBmciA6IHVuZGVmaW5lZCB9KX1cbiAgICAgICAgICA8L2gzPlxuXG4gICAgICAgICAgPEJ1dHRvbiB2YXJpYW50PSdvdXRsaW5lJyBzaXplPSdzbScgb25DbGljaz17Z29Ub05leHRNb250aH0gY2xhc3NOYW1lPSdoLTggdy04IHAtMCc+XG4gICAgICAgICAgICA8Q2hldnJvblJpZ2h0IGNsYXNzTmFtZT0naC00IHctNCcgLz5cbiAgICAgICAgICA8L0J1dHRvbj5cbiAgICAgICAgPC9kaXY+XG5cbiAgICAgICAgey8qIENhbGVuZGFyIEdyaWQgKi99XG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPSdwLTInPlxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSdncmlkIGdyaWQtY29scy03IGdhcC0xIG1iLTInPlxuICAgICAgICAgICAgey8qIFdlZWsgZGF5IGhlYWRlcnMgKi99XG4gICAgICAgICAgICB7W1xuICAgICAgICAgICAgICBsYW5ndWFnZSA9PT0gJ2ZyJyA/ICdMJyA6ICdNJyxcbiAgICAgICAgICAgICAgbGFuZ3VhZ2UgPT09ICdmcicgPyAnTScgOiAnVCcsXG4gICAgICAgICAgICAgIGxhbmd1YWdlID09PSAnZnInID8gJ00nIDogJ1cnLFxuICAgICAgICAgICAgICBsYW5ndWFnZSA9PT0gJ2ZyJyA/ICdKJyA6ICdUJyxcbiAgICAgICAgICAgICAgbGFuZ3VhZ2UgPT09ICdmcicgPyAnVicgOiAnRicsXG4gICAgICAgICAgICAgIGxhbmd1YWdlID09PSAnZnInID8gJ1MnIDogJ1MnLFxuICAgICAgICAgICAgICBsYW5ndWFnZSA9PT0gJ2ZyJyA/ICdEJyA6ICdTJyxcbiAgICAgICAgICAgIF0ubWFwKChkYXksIGluZGV4KSA9PiAoXG4gICAgICAgICAgICAgIDxkaXYga2V5PXtpbmRleH0gY2xhc3NOYW1lPSdwLTEgdGV4dC1jZW50ZXIgdGV4dC14cyBmb250LW1lZGl1bSB0ZXh0LWdyYXktNTAwJz5cbiAgICAgICAgICAgICAgICB7ZGF5fVxuICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICkpfVxuICAgICAgICAgIDwvZGl2PlxuXG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9J2dyaWQgZ3JpZC1jb2xzLTcgZ2FwLTEnPlxuICAgICAgICAgICAge21vbnRoRGF5cy5tYXAoKGRheSwgaW5kZXgpID0+IHtcbiAgICAgICAgICAgICAgY29uc3QgZGF5Qm9va2luZ3MgPSBnZXRCb29raW5nc0ZvckRheShkYXkpO1xuICAgICAgICAgICAgICBjb25zdCBpc0N1cnJlbnREYXkgPSBpc1RvZGF5KGRheSk7XG4gICAgICAgICAgICAgIGNvbnN0IGlzU2VsZWN0ZWQgPSBzZWxlY3RlZCAmJiBpc1NhbWVEYXkoZGF5LCBzZWxlY3RlZCk7XG4gICAgICAgICAgICAgIGNvbnN0IGlzQXZhaWxhYmxlID0gaXNEYXlBdmFpbGFibGUoZGF5KTtcblxuICAgICAgICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgICAgIDxUb29sdGlwIGtleT17aW5kZXh9PlxuICAgICAgICAgICAgICAgICAgPFRvb2x0aXBUcmlnZ2VyIGFzQ2hpbGQ+XG4gICAgICAgICAgICAgICAgICAgIDxkaXZcbiAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9e2BcbiAgICAgICAgICAgICAgICAgICAgICAgIGgtOCBwLTEgdGV4dC14cyByb3VuZGVkIGN1cnNvci1wb2ludGVyIHRyYW5zaXRpb24tY29sb3JzIGZsZXggaXRlbXMtY2VudGVyIGp1c3RpZnktY2VudGVyXG4gICAgICAgICAgICAgICAgICAgICAgICAke1xuICAgICAgICAgICAgICAgICAgICAgICAgICAhaXNBdmFpbGFibGVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA/ICdiZy1yZWQtMTAwIHRleHQtcmVkLTYwMCBjdXJzb3Itbm90LWFsbG93ZWQgYm9yZGVyIGJvcmRlci1yZWQtMjAwJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogaXNTZWxlY3RlZFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPyAnYmctYmx1ZS02MDAgdGV4dC13aGl0ZSdcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogaXNDdXJyZW50RGF5XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gJ2JnLWJsdWUtMTAwIHRleHQtYmx1ZS05MDAgaG92ZXI6YmctYmx1ZS0yMDAnXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogZGF5Qm9va2luZ3MubGVuZ3RoID4gMFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gJ2JnLW9yYW5nZS0xMDAgdGV4dC1vcmFuZ2UtOTAwIGhvdmVyOmJnLW9yYW5nZS0yMDAnXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOiAnaG92ZXI6YmctZ3JheS0xMDAnXG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgYH1cbiAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiBpc0F2YWlsYWJsZSAmJiBvblNlbGVjdChkYXkpfVxuICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPSdmb250LW1lZGl1bSc+e2Zvcm1hdChkYXksICdkJyl9PC9zcGFuPlxuICAgICAgICAgICAgICAgICAgICAgIHtkYXlCb29raW5ncy5sZW5ndGggPiAwICYmIChcbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSdhYnNvbHV0ZSAtbXQtMyAtbXItMSc+XG4gICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSd3LTEuNSBoLTEuNSBiZy1vcmFuZ2UtNTAwIHJvdW5kZWQtZnVsbCc+PC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgIDwvVG9vbHRpcFRyaWdnZXI+XG4gICAgICAgICAgICAgICAgICA8VG9vbHRpcENvbnRlbnQ+XG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSdzcGFjZS15LTEnPlxuICAgICAgICAgICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT0nZm9udC1tZWRpdW0nPlxuICAgICAgICAgICAgICAgICAgICAgICAge2Zvcm1hdChkYXksICdFRUVFLCBkIE1NTU0geXl5eScsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgbG9jYWxlOiBsYW5ndWFnZSA9PT0gJ2ZyJyA/IGZyIDogdW5kZWZpbmVkLFxuICAgICAgICAgICAgICAgICAgICAgICAgfSl9XG4gICAgICAgICAgICAgICAgICAgICAgPC9wPlxuICAgICAgICAgICAgICAgICAgICAgIHshaXNBdmFpbGFibGUgJiYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPSd0ZXh0LXhzIHRleHQtcmVkLTUwMCc+XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHtsYW5ndWFnZSA9PT0gJ2ZyJyA/ICdOb24gZGlzcG9uaWJsZScgOiAnTm90IGF2YWlsYWJsZSd9XG4gICAgICAgICAgICAgICAgICAgICAgICA8L3A+XG4gICAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgICB7ZGF5Qm9va2luZ3MubGVuZ3RoID4gMCAmJiAoXG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0ndGV4dC14cyc+XG4gICAgICAgICAgICAgICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT0ndGV4dC1vcmFuZ2UtNjAwJz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7ZGF5Qm9va2luZ3MubGVuZ3RofXsnICd9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge2xhbmd1YWdlID09PSAnZnInID8gJ3LDqXNlcnZhdGlvbihzKScgOiAnYm9va2luZyhzKSd9XG4gICAgICAgICAgICAgICAgICAgICAgICAgIDwvcD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAge2RheUJvb2tpbmdzLnNsaWNlKDAsIDIpLm1hcCgoYm9va2luZywgaWR4KSA9PiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPHAga2V5PXtpZHh9IGNsYXNzTmFtZT0ndGV4dC1ncmF5LTYwMCc+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7Zm9ybWF0KHBhcnNlSVNPKGJvb2tpbmcuc3RhcnRUaW1lKSwgJ0hIOm1tJyl9IC17JyAnfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2Zvcm1hdChwYXJzZUlTTyhib29raW5nLmVuZFRpbWUpLCAnSEg6bW0nKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3A+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICkpfVxuICAgICAgICAgICAgICAgICAgICAgICAgICB7ZGF5Qm9va2luZ3MubGVuZ3RoID4gMiAmJiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPSd0ZXh0LWdyYXktNTAwJz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICt7ZGF5Qm9va2luZ3MubGVuZ3RoIC0gMn0ge2xhbmd1YWdlID09PSAnZnInID8gJ2F1dHJlcycgOiAnbW9yZSd9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9wPlxuICAgICAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICA8L1Rvb2x0aXBDb250ZW50PlxuICAgICAgICAgICAgICAgIDwvVG9vbHRpcD5cbiAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIH0pfVxuICAgICAgICAgIDwvZGl2PlxuXG4gICAgICAgICAgey8qIExlZ2VuZCAqL31cbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0nZmxleCBpdGVtcy1jZW50ZXIganVzdGlmeS1jZW50ZXIgZ2FwLTQgbXQtMyBwdC0yIGJvcmRlci10IHRleHQteHMnPlxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9J2ZsZXggaXRlbXMtY2VudGVyIGdhcC0xJz5cbiAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9J3ctMiBoLTIgYmctYmx1ZS02MDAgcm91bmRlZCc+PC9kaXY+XG4gICAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT0ndGV4dC1ncmF5LTYwMCc+XG4gICAgICAgICAgICAgICAge2xhbmd1YWdlID09PSAnZnInID8gJ1PDqWxlY3Rpb25uw6knIDogJ1NlbGVjdGVkJ31cbiAgICAgICAgICAgICAgPC9zcGFuPlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0nZmxleCBpdGVtcy1jZW50ZXIgZ2FwLTEnPlxuICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0ndy0yIGgtMiBiZy1vcmFuZ2UtNTAwIHJvdW5kZWQnPjwvZGl2PlxuICAgICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9J3RleHQtZ3JheS02MDAnPntsYW5ndWFnZSA9PT0gJ2ZyJyA/ICdSw6lzZXJ2w6knIDogJ0Jvb2tlZCd9PC9zcGFuPlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0nZmxleCBpdGVtcy1jZW50ZXIgZ2FwLTEnPlxuICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0ndy0yIGgtMiBiZy1yZWQtNTAwIHJvdW5kZWQnPjwvZGl2PlxuICAgICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9J3RleHQtZ3JheS02MDAnPntsYW5ndWFnZSA9PT0gJ2ZyJyA/ICdOb24gZGlzcG9uaWJsZScgOiAnVW5hdmFpbGFibGUnfTwvc3Bhbj5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9J2ZsZXggaXRlbXMtY2VudGVyIGdhcC0xJz5cbiAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9J3ctMiBoLTIgYmctYmx1ZS0yMDAgcm91bmRlZCc+PC9kaXY+XG4gICAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT0ndGV4dC1ncmF5LTYwMCc+e2xhbmd1YWdlID09PSAnZnInID8gXCJBdWpvdXJkJ2h1aVwiIDogJ1RvZGF5J308L3NwYW4+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgPC9kaXY+XG4gICAgICA8L2Rpdj5cbiAgICA8L1Rvb2x0aXBQcm92aWRlcj5cbiAgKTtcbn1cblxuLyoqXG4gKiBVdGlsaXR5IGZ1bmN0aW9uIHRvIGdlbmVyYXRlIC5pY3MgY2FsZW5kYXIgY29udGVudC5cbiAqIEBwYXJhbSBib29raW5nc1xuICogQHBhcmFtIGFsbFNwYWNlc1xuICovXG5mdW5jdGlvbiBnZW5lcmF0ZUlDUyhib29raW5nczogQm9va2luZ1tdLCBhbGxTcGFjZXM/OiBib29sZWFuKTogc3RyaW5nIHtcbiAgY29uc3Qgbm93ID0gbmV3IERhdGUoKTtcbiAgY29uc3QgaWNzSGVhZGVyID0gW1xuICAgICdCRUdJTjpWQ0FMRU5EQVInLFxuICAgICdWRVJTSU9OOjIuMCcsXG4gICAgJ1BST0RJRDotLy9Lb3ZlbyBHZXN0aW9uLy9Db21tb24gU3BhY2VzLy9GUicsXG4gICAgJ0NBTFNDQUxFOkdSRUdPUklBTicsXG4gICAgJ01FVEhPRDpQVUJMSVNIJyxcbiAgXS5qb2luKCdcXHJcXG4nKTtcblxuICBjb25zdCBpY3NFdmVudHMgPSBib29raW5ncy5tYXAoKGJvb2tpbmcpID0+IHtcbiAgICBjb25zdCBzdGFydERhdGUgPSBuZXcgRGF0ZShib29raW5nLnN0YXJ0VGltZSk7XG4gICAgY29uc3QgZW5kRGF0ZSA9IG5ldyBEYXRlKGJvb2tpbmcuZW5kVGltZSk7XG5cbiAgICAvLyBGb3JtYXQgZGF0ZXMgZm9yIElDUyAoWVlZWU1NRERUSEhNTVNTWilcbiAgICBjb25zdCBmb3JtYXRJQ1NEYXRlID0gKGRhdGU6IERhdGUpID0+IHtcbiAgICAgIHJldHVybiBkYXRlXG4gICAgICAgIC50b0lTT1N0cmluZygpXG4gICAgICAgIC5yZXBsYWNlKC9bLTpdL2csICcnKVxuICAgICAgICAucmVwbGFjZSgvXFwuXFxkezN9LywgJycpO1xuICAgIH07XG5cbiAgICBjb25zdCB0aXRsZSA9IGFsbFNwYWNlcyA/IGBSw6lzZXJ2YXRpb24gZCdlc3BhY2UgY29tbXVuYCA6IGBFc3BhY2UgY29tbXVuIHLDqXNlcnbDqWA7XG5cbiAgICByZXR1cm4gW1xuICAgICAgJ0JFR0lOOlZFVkVOVCcsXG4gICAgICBgVUlEOiR7Ym9va2luZy5pZH1Aa292ZW9nZXN0aW9uLmNvbWAsXG4gICAgICBgRFRTVEFNUDoke2Zvcm1hdElDU0RhdGUobm93KX1gLFxuICAgICAgYERUU1RBUlQ6JHtmb3JtYXRJQ1NEYXRlKHN0YXJ0RGF0ZSl9YCxcbiAgICAgIGBEVEVORDoke2Zvcm1hdElDU0RhdGUoZW5kRGF0ZSl9YCxcbiAgICAgIGBTVU1NQVJZOiR7dGl0bGV9YCxcbiAgICAgIGBERVNDUklQVElPTjpSw6lzZXJ2YXRpb24gY29uZmlybcOpZSBwb3VyIHVuIGVzcGFjZSBjb21tdW5gLFxuICAgICAgJ1NUQVRVUzpDT05GSVJNRUQnLFxuICAgICAgJ0VORDpWRVZFTlQnLFxuICAgIF0uam9pbignXFxyXFxuJyk7XG4gIH0pO1xuXG4gIGNvbnN0IGljc0Zvb3RlciA9ICdFTkQ6VkNBTEVOREFSJztcblxuICByZXR1cm4gW2ljc0hlYWRlciwgLi4uaWNzRXZlbnRzLCBpY3NGb290ZXJdLmpvaW4oJ1xcclxcbicpO1xufVxuXG5pbnRlcmZhY2UgQ29tbW9uU3BhY2VzUHJvcHMge1xuICBidWlsZGluZ0lkPzogc3RyaW5nO1xuICBzaG93QmFja0J1dHRvbj86IGJvb2xlYW47XG4gIGJhY2tCdXR0b25MYWJlbD86IHN0cmluZztcbiAgb25CYWNrPzogKCkgPT4gdm9pZDtcbn1cblxuLyoqXG4gKiBDb21tb24gU3BhY2VzIHBhZ2UgY29tcG9uZW50IGZvciByZXNpZGVudHMuXG4gKi9cbmZ1bmN0aW9uIENvbW1vblNwYWNlc1BhZ2VJbm5lcih7IGJ1aWxkaW5nSWQsIHNob3dCYWNrQnV0dG9uLCBiYWNrQnV0dG9uTGFiZWwsIG9uQmFjayB9OiBDb21tb25TcGFjZXNQcm9wcykge1xuICBjb25zdCB7IHVzZXIgfSA9IHVzZUF1dGgoKTtcbiAgY29uc3QgeyBsYW5ndWFnZSB9ID0gdXNlTGFuZ3VhZ2UoKTtcbiAgY29uc3QgeyB0b2FzdCB9ID0gdXNlVG9hc3QoKTtcbiAgY29uc3QgcXVlcnlDbGllbnQgPSB1c2VRdWVyeUNsaWVudCgpO1xuICBjb25zdCBbLCBuYXZpZ2F0ZV0gPSB1c2VMb2NhdGlvbigpO1xuXG5cbiAgY29uc3QgW3NlbGVjdGVkU3BhY2UsIHNldFNlbGVjdGVkU3BhY2VdID0gdXNlU3RhdGU8Q29tbW9uU3BhY2UgfCBudWxsPihudWxsKTtcbiAgY29uc3QgW3NlbGVjdGVkRGF0ZSwgc2V0U2VsZWN0ZWREYXRlXSA9IHVzZVN0YXRlPERhdGU+KG5ldyBEYXRlKCkpO1xuICBjb25zdCBbaXNCb29raW5nRGlhbG9nT3Blbiwgc2V0SXNCb29raW5nRGlhbG9nT3Blbl0gPSB1c2VTdGF0ZShmYWxzZSk7XG4gIGNvbnN0IFtleHBhbmRlZFNwYWNlSWQsIHNldEV4cGFuZGVkU3BhY2VJZF0gPSB1c2VTdGF0ZTxzdHJpbmcgfCBudWxsPihudWxsKTtcbiAgY29uc3QgW3ByZVNlbGVjdGVkRGF0ZSwgc2V0UHJlU2VsZWN0ZWREYXRlXSA9IHVzZVN0YXRlPERhdGUgfCBudWxsPihudWxsKTtcblxuICAvLyBGb3JtIGZvciBib29raW5nIGNyZWF0aW9uXG4gIGNvbnN0IGZvcm0gPSB1c2VGb3JtPEJvb2tpbmdGb3JtRGF0YT4oe1xuICAgIHJlc29sdmVyOiB6b2RSZXNvbHZlcihib29raW5nRm9ybVNjaGVtYSksXG4gICAgZGVmYXVsdFZhbHVlczoge1xuICAgICAgZGF0ZTogbmV3IERhdGUoKSxcbiAgICAgIHN0YXJ0VGltZTogJzA5OjAwJyxcbiAgICAgIGVuZFRpbWU6ICcxMDowMCcsXG4gICAgfSxcbiAgfSk7XG5cbiAgLy8gQmFjayBuYXZpZ2F0aW9uIGlzIG5vdyBoYW5kbGVkIGJ5IHRoZSBIT0NcblxuICAvLyBGZXRjaCBjb21tb24gc3BhY2VzIGluIHVzZXIncyBidWlsZGluZ3MgKGZpbHRlcmVkIGJ5IGJ1aWxkaW5nIGlmIHByb3ZpZGVkKVxuICBjb25zdCB7IGRhdGE6IGNvbW1vblNwYWNlcyA9IFtdLCBpc0xvYWRpbmc6IHNwYWNlc0xvYWRpbmcgfSA9IHVzZVF1ZXJ5PENvbW1vblNwYWNlW10+KHtcbiAgICBxdWVyeUtleTogWycvYXBpL2NvbW1vbi1zcGFjZXMnLCBidWlsZGluZ0lkXSxcbiAgICBxdWVyeUZuOiBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCB1cmwgPSBidWlsZGluZ0lkID8gYC9hcGkvY29tbW9uLXNwYWNlcz9idWlsZGluZ19pZD0ke2J1aWxkaW5nSWR9YCA6ICcvYXBpL2NvbW1vbi1zcGFjZXMnO1xuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaCh1cmwpO1xuICAgICAgaWYgKCFyZXNwb25zZS5vaykge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0ZhaWxlZCB0byBmZXRjaCBjb21tb24gc3BhY2VzJyk7XG4gICAgICB9XG4gICAgICByZXR1cm4gcmVzcG9uc2UuanNvbigpO1xuICAgIH0sXG4gICAgZW5hYmxlZDogISF1c2VyICYmICEhYnVpbGRpbmdJZCxcbiAgfSk7XG5cbiAgLy8gRmV0Y2ggYm9va2luZ3MgZm9yIHNlbGVjdGVkIHNwYWNlXG4gIGNvbnN0IHsgZGF0YTogYm9va2luZ3MgPSBbXSwgaXNMb2FkaW5nOiBib29raW5nc0xvYWRpbmcgfSA9IHVzZVF1ZXJ5PEJvb2tpbmdbXT4oe1xuICAgIHF1ZXJ5S2V5OiBbJy9hcGkvY29tbW9uLXNwYWNlcycsIHNlbGVjdGVkU3BhY2U/LmlkLCAnYm9va2luZ3MnXSxcbiAgICBlbmFibGVkOiAhIXNlbGVjdGVkU3BhY2UsXG4gIH0pO1xuXG4gIC8vIEZldGNoIGFsbCB1c2VyJ3MgYm9va2luZ3MgZm9yIGV4cG9ydFxuICBjb25zdCB7IGRhdGE6IHVzZXJCb29raW5ncyA9IFtdIH0gPSB1c2VRdWVyeTxCb29raW5nW10+KHtcbiAgICBxdWVyeUtleTogWycvYXBpL2NvbW1vbi1zcGFjZXMvbXktYm9va2luZ3MnXSxcbiAgICBlbmFibGVkOiAhIXVzZXIsXG4gIH0pO1xuXG4gIC8vIENyZWF0ZSBib29raW5nIG11dGF0aW9uXG4gIGNvbnN0IGNyZWF0ZUJvb2tpbmdNdXRhdGlvbiA9IHVzZU11dGF0aW9uKHtcbiAgICBtdXRhdGlvbkZuOiBhc3luYyAoZGF0YTogQm9va2luZ0Zvcm1EYXRhKSA9PiB7XG4gICAgICBpZiAoIXNlbGVjdGVkU3BhY2UpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdObyBzcGFjZSBzZWxlY3RlZCcpO1xuICAgICAgfVxuXG4gICAgICAvLyBNb3JlIHJvYnVzdCBkYXRlIGhhbmRsaW5nIHRvIGF2b2lkIHRpbWV6b25lIGlzc3Vlc1xuICAgICAgY29uc3QgYmFzZURhdGUgPSBkYXRhLmRhdGUgaW5zdGFuY2VvZiBEYXRlID8gZGF0YS5kYXRlIDogbmV3IERhdGUoZGF0YS5kYXRlKTtcblxuICAgICAgLy8gQ3JlYXRlIHN0YXJ0IHRpbWUgYnkgc2V0dGluZyB0aGUgdGltZSBvbiBhIGRhdGUgb2JqZWN0IGluIGxvY2FsIHRpbWV6b25lXG4gICAgICBjb25zdCBzdGFydERhdGVUaW1lID0gbmV3IERhdGUoXG4gICAgICAgIGJhc2VEYXRlLmdldEZ1bGxZZWFyKCksXG4gICAgICAgIGJhc2VEYXRlLmdldE1vbnRoKCksXG4gICAgICAgIGJhc2VEYXRlLmdldERhdGUoKVxuICAgICAgKTtcbiAgICAgIGNvbnN0IFtzdGFydEhvdXIsIHN0YXJ0TWludXRlXSA9IGRhdGEuc3RhcnRUaW1lLnNwbGl0KCc6JykubWFwKE51bWJlcik7XG4gICAgICBzdGFydERhdGVUaW1lLnNldEhvdXJzKHN0YXJ0SG91ciwgc3RhcnRNaW51dGUsIDAsIDApO1xuXG4gICAgICAvLyBDcmVhdGUgZW5kIHRpbWUgc2ltaWxhcmx5XG4gICAgICBjb25zdCBlbmREYXRlVGltZSA9IG5ldyBEYXRlKGJhc2VEYXRlLmdldEZ1bGxZZWFyKCksIGJhc2VEYXRlLmdldE1vbnRoKCksIGJhc2VEYXRlLmdldERhdGUoKSk7XG4gICAgICBjb25zdCBbZW5kSG91ciwgZW5kTWludXRlXSA9IGRhdGEuZW5kVGltZS5zcGxpdCgnOicpLm1hcChOdW1iZXIpO1xuICAgICAgZW5kRGF0ZVRpbWUuc2V0SG91cnMoZW5kSG91ciwgZW5kTWludXRlLCAwLCAwKTtcblxuICAgICAgLy8gQm9va2luZyBjcmVhdGlvbiBoYW5kbGluZ1xuXG4gICAgICByZXR1cm4gYXBpUmVxdWVzdCgnUE9TVCcsIGAvYXBpL2NvbW1vbi1zcGFjZXMvJHtzZWxlY3RlZFNwYWNlLmlkfS9ib29raW5nc2AsIHtcbiAgICAgICAgc3RhcnRfdGltZTogc3RhcnREYXRlVGltZS50b0lTT1N0cmluZygpLFxuICAgICAgICBlbmRfdGltZTogZW5kRGF0ZVRpbWUudG9JU09TdHJpbmcoKSxcbiAgICAgIH0pO1xuICAgIH0sXG4gICAgb25TdWNjZXNzOiAoKSA9PiB7XG4gICAgICBxdWVyeUNsaWVudC5pbnZhbGlkYXRlUXVlcmllcyh7IHF1ZXJ5S2V5OiBbJy9hcGkvY29tbW9uLXNwYWNlcyddIH0pO1xuICAgICAgdG9hc3Qoe1xuICAgICAgICB0aXRsZTogJ1LDqXNlcnZhdGlvbiBjb25maXJtw6llJyxcbiAgICAgICAgZGVzY3JpcHRpb246ICdWb3RyZSByw6lzZXJ2YXRpb24gYSDDqXTDqSBjcsOpw6llIGF2ZWMgc3VjY8Oocy4nLFxuICAgICAgfSk7XG4gICAgICBzZXRJc0Jvb2tpbmdEaWFsb2dPcGVuKGZhbHNlKTtcbiAgICAgIGZvcm0ucmVzZXQoKTtcbiAgICB9LFxuICAgIG9uRXJyb3I6IChlcnJvcjogYW55KSA9PiB7XG4gICAgICB0b2FzdCh7XG4gICAgICAgIHRpdGxlOiAnRXJyZXVyIGRlIHLDqXNlcnZhdGlvbicsXG4gICAgICAgIGRlc2NyaXB0aW9uOlxuICAgICAgICAgIGVycm9yLm1lc3NhZ2UgfHwgJ1VuZSBlcnJldXIgZXN0IHN1cnZlbnVlIGxvcnMgZGUgbGEgY3LDqWF0aW9uIGRlIGxhIHLDqXNlcnZhdGlvbi4nLFxuICAgICAgICB2YXJpYW50OiAnZGVzdHJ1Y3RpdmUnLFxuICAgICAgfSk7XG4gICAgfSxcbiAgfSk7XG5cbiAgLy8gR2V0IGJvb2tpbmdzIGZvciBzZWxlY3RlZCBkYXRlXG4gIGNvbnN0IGJvb2tpbmdzRm9yRGF0ZSA9IHVzZU1lbW8oKCkgPT4ge1xuICAgIGlmICghYm9va2luZ3MgfHwgIXNlbGVjdGVkRGF0ZSkge1xuICAgICAgcmV0dXJuIFtdO1xuICAgIH1cblxuICAgIHJldHVybiBib29raW5ncy5maWx0ZXIoKGJvb2tpbmc6IEJvb2tpbmcpID0+IHtcbiAgICAgIGNvbnN0IGJvb2tpbmdEYXRlID0gcGFyc2VJU08oYm9va2luZy5zdGFydFRpbWUpO1xuICAgICAgcmV0dXJuIGlzU2FtZURheShib29raW5nRGF0ZSwgc2VsZWN0ZWREYXRlKTtcbiAgICB9KTtcbiAgfSwgW2Jvb2tpbmdzLCBzZWxlY3RlZERhdGVdKTtcblxuICAvLyBHZXQgdGltZSBzbG90cyBhdmFpbGFiaWxpdHlcbiAgY29uc3QgdGltZVNsb3RzID0gdXNlTWVtbygoKSA9PiB7XG4gICAgY29uc3Qgc2xvdHMgPSBbXTtcbiAgICBmb3IgKGxldCBob3VyID0gNjsgaG91ciA8PSAyMjsgaG91cisrKSB7XG4gICAgICBzbG90cy5wdXNoKGAke2hvdXIudG9TdHJpbmcoKS5wYWRTdGFydCgyLCAnMCcpfTowMGApO1xuICAgICAgc2xvdHMucHVzaChgJHtob3VyLnRvU3RyaW5nKCkucGFkU3RhcnQoMiwgJzAnKX06MzBgKTtcbiAgICB9XG4gICAgcmV0dXJuIHNsb3RzO1xuICB9LCBbXSk7XG5cbiAgLy8gSGVscGVyIGZ1bmN0aW9uIHRvIGNoZWNrIGlmIGEgZGF5IGlzIGF2YWlsYWJsZSAobW92ZWQgZnJvbSBCb29raW5nQ2FsZW5kYXIpXG4gIGNvbnN0IGlzRGF5QXZhaWxhYmxlID0gKGRheTogRGF0ZSkgPT4ge1xuICAgIGlmICghc2VsZWN0ZWRTcGFjZSkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIC8vIFBhc3QgZGF0ZXMgYXJlIG5vdCBhdmFpbGFibGVcbiAgICBjb25zdCB0b2RheSA9IG5ldyBEYXRlKCk7XG4gICAgdG9kYXkuc2V0SG91cnMoMCwgMCwgMCwgMCk7XG4gICAgY29uc3QgY2hlY2tEYXkgPSBuZXcgRGF0ZShkYXkpO1xuICAgIGNoZWNrRGF5LnNldEhvdXJzKDAsIDAsIDAsIDApO1xuICAgIFxuICAgIGlmIChjaGVja0RheSA8IHRvZGF5KSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgLy8gQ2hlY2sgaWYgZGF5IGZhbGxzIHdpdGhpbiBhbnkgdW5hdmFpbGFibGUgcGVyaW9kc1xuICAgIGlmIChzZWxlY3RlZFNwYWNlLnVuYXZhaWxhYmxlUGVyaW9kcyAmJiBBcnJheS5pc0FycmF5KHNlbGVjdGVkU3BhY2UudW5hdmFpbGFibGVQZXJpb2RzKSkge1xuICAgICAgZm9yIChjb25zdCBwZXJpb2Qgb2Ygc2VsZWN0ZWRTcGFjZS51bmF2YWlsYWJsZVBlcmlvZHMpIHtcbiAgICAgICAgY29uc3Qgc3RhcnREYXRlID0gbmV3IERhdGUocGVyaW9kLnN0YXJ0RGF0ZSk7XG4gICAgICAgIGNvbnN0IGVuZERhdGUgPSBuZXcgRGF0ZShwZXJpb2QuZW5kRGF0ZSk7XG4gICAgICAgIHN0YXJ0RGF0ZS5zZXRIb3VycygwLCAwLCAwLCAwKTtcbiAgICAgICAgZW5kRGF0ZS5zZXRIb3VycygyMywgNTksIDU5LCA5OTkpO1xuICAgICAgICBcbiAgICAgICAgaWYgKGNoZWNrRGF5ID49IHN0YXJ0RGF0ZSAmJiBjaGVja0RheSA8PSBlbmREYXRlKSB7XG4gICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gQ2hlY2sgb3BlbmluZyBob3VycyBpZiBhdmFpbGFibGVcbiAgICBpZiAoc2VsZWN0ZWRTcGFjZS5vcGVuaW5nSG91cnMgJiYgQXJyYXkuaXNBcnJheShzZWxlY3RlZFNwYWNlLm9wZW5pbmdIb3VycykpIHtcbiAgICAgIGNvbnN0IGRheU5hbWUgPSBkYXkudG9Mb2NhbGVEYXRlU3RyaW5nKCdlbi1VUycsIHsgd2Vla2RheTogJ2xvbmcnIH0pLnRvTG93ZXJDYXNlKCk7XG4gICAgICBjb25zdCB0b2RheUhvdXJzID0gc2VsZWN0ZWRTcGFjZS5vcGVuaW5nSG91cnMuZmluZCgoaCkgPT4gaC5kYXkudG9Mb3dlckNhc2UoKSA9PT0gZGF5TmFtZSk7XG4gICAgICBcbiAgICAgIC8vIElmIG5vIGhvdXJzIGRlZmluZWQgZm9yIHRoaXMgZGF5LCBpdCdzIHVuYXZhaWxhYmxlXG4gICAgICBpZiAoIXRvZGF5SG91cnMpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfVxuICAgICAgXG4gICAgICAvLyBJZiBleHBsaWNpdGx5IG1hcmtlZCBhcyBjbG9zZWRcbiAgICAgIGlmICh0b2RheUhvdXJzLmlzT3BlbiA9PT0gZmFsc2UpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiB0cnVlO1xuICB9O1xuXG4gIC8vIENoZWNrIGlmIHRpbWUgc2xvdCBpcyBhdmFpbGFibGVcbiAgY29uc3QgaXNUaW1lU2xvdEF2YWlsYWJsZSA9ICh0aW1lOiBzdHJpbmcsIGR1cmF0aW9uOiBudW1iZXIgPSA2MCkgPT4ge1xuICAgIGlmICghc2VsZWN0ZWRTcGFjZSB8fCAhc2VsZWN0ZWREYXRlKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgY29uc3QgW2hvdXIsIG1pbnV0ZV0gPSB0aW1lLnNwbGl0KCc6JykubWFwKE51bWJlcik7XG4gICAgY29uc3Qgc2xvdFN0YXJ0ID0gbmV3IERhdGUoc2VsZWN0ZWREYXRlKTtcbiAgICBzbG90U3RhcnQuc2V0SG91cnMoaG91ciwgbWludXRlLCAwLCAwKTtcblxuICAgIGNvbnN0IHNsb3RFbmQgPSBuZXcgRGF0ZShzbG90U3RhcnQpO1xuICAgIHNsb3RFbmQuc2V0TWludXRlcyhzbG90RW5kLmdldE1pbnV0ZXMoKSArIGR1cmF0aW9uKTtcblxuICAgIC8vIENoZWNrIGlmIGRheSBpcyBhdmFpbGFibGUgZmlyc3QgKHVzZXMgb3VyIGVuaGFuY2VkIGF2YWlsYWJpbGl0eSBsb2dpYylcbiAgICBpZiAoIWlzRGF5QXZhaWxhYmxlKHNlbGVjdGVkRGF0ZSkpIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICAvLyBDaGVjayBvcGVuaW5nIGhvdXJzXG4gICAgaWYgKHNlbGVjdGVkU3BhY2Uub3BlbmluZ0hvdXJzICYmIEFycmF5LmlzQXJyYXkoc2VsZWN0ZWRTcGFjZS5vcGVuaW5nSG91cnMpKSB7XG4gICAgICBjb25zdCBkYXlOYW1lID0gc2VsZWN0ZWREYXRlLnRvTG9jYWxlRGF0ZVN0cmluZygnZW4tVVMnLCB7IHdlZWtkYXk6ICdsb25nJyB9KS50b0xvd2VyQ2FzZSgpO1xuICAgICAgY29uc3QgdG9kYXlIb3VycyA9IHNlbGVjdGVkU3BhY2Uub3BlbmluZ0hvdXJzLmZpbmQoKGgpID0+IGguZGF5LnRvTG93ZXJDYXNlKCkgPT09IGRheU5hbWUpO1xuXG4gICAgICBpZiAoIXRvZGF5SG91cnMgfHwgdG9kYXlIb3Vycy5pc09wZW4gPT09IGZhbHNlKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH1cblxuICAgICAgY29uc3Qgb3BlblRpbWUgPSBwYXJzZSh0b2RheUhvdXJzLm9wZW4sICdISDptbScsIHNlbGVjdGVkRGF0ZSk7XG4gICAgICBjb25zdCBjbG9zZVRpbWUgPSBwYXJzZSh0b2RheUhvdXJzLmNsb3NlLCAnSEg6bW0nLCBzZWxlY3RlZERhdGUpO1xuXG4gICAgICAvLyBDaGVjayBpZiBzbG90IGlzIHdpdGhpbiBvcGVuaW5nIGhvdXJzXG4gICAgICBpZiAoXG4gICAgICAgICFpc1dpdGhpbkludGVydmFsKHNsb3RTdGFydCwgeyBzdGFydDogb3BlblRpbWUsIGVuZDogY2xvc2VUaW1lIH0pIHx8XG4gICAgICAgICFpc1dpdGhpbkludGVydmFsKHNsb3RFbmQsIHsgc3RhcnQ6IG9wZW5UaW1lLCBlbmQ6IGNsb3NlVGltZSB9KVxuICAgICAgKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH1cblxuICAgICAgLy8gQ2hlY2sgaWYgc2xvdCBjb25mbGljdHMgd2l0aCBhbnkgYnJlYWtzXG4gICAgICBpZiAodG9kYXlIb3Vycy5icmVha3MgJiYgQXJyYXkuaXNBcnJheSh0b2RheUhvdXJzLmJyZWFrcykpIHtcbiAgICAgICAgZm9yIChjb25zdCBicmVha1BlcmlvZCBvZiB0b2RheUhvdXJzLmJyZWFrcykge1xuICAgICAgICAgIGNvbnN0IGJyZWFrU3RhcnQgPSBwYXJzZShicmVha1BlcmlvZC5zdGFydCwgJ0hIOm1tJywgc2VsZWN0ZWREYXRlKTtcbiAgICAgICAgICBjb25zdCBicmVha0VuZCA9IHBhcnNlKGJyZWFrUGVyaW9kLmVuZCwgJ0hIOm1tJywgc2VsZWN0ZWREYXRlKTtcblxuICAgICAgICAgIC8vIENoZWNrIGlmIHNsb3Qgb3ZlcmxhcHMgd2l0aCBicmVhayBwZXJpb2RcbiAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAoc2xvdFN0YXJ0ID49IGJyZWFrU3RhcnQgJiYgc2xvdFN0YXJ0IDwgYnJlYWtFbmQpIHx8XG4gICAgICAgICAgICAoc2xvdEVuZCA+IGJyZWFrU3RhcnQgJiYgc2xvdEVuZCA8PSBicmVha0VuZCkgfHxcbiAgICAgICAgICAgIChzbG90U3RhcnQgPD0gYnJlYWtTdGFydCAmJiBzbG90RW5kID49IGJyZWFrRW5kKVxuICAgICAgICAgICkge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIC8vIENoZWNrIGNvbmZsaWN0cyB3aXRoIGV4aXN0aW5nIGJvb2tpbmdzXG4gICAgcmV0dXJuICFib29raW5nc0ZvckRhdGUuc29tZSgoYm9va2luZzogQm9va2luZykgPT4ge1xuICAgICAgY29uc3QgYm9va2luZ1N0YXJ0ID0gcGFyc2VJU08oYm9va2luZy5zdGFydFRpbWUpO1xuICAgICAgY29uc3QgYm9va2luZ0VuZCA9IHBhcnNlSVNPKGJvb2tpbmcuZW5kVGltZSk7XG5cbiAgICAgIHJldHVybiAoXG4gICAgICAgIChzbG90U3RhcnQgPj0gYm9va2luZ1N0YXJ0ICYmIHNsb3RTdGFydCA8IGJvb2tpbmdFbmQpIHx8XG4gICAgICAgIChzbG90RW5kID4gYm9va2luZ1N0YXJ0ICYmIHNsb3RFbmQgPD0gYm9va2luZ0VuZCkgfHxcbiAgICAgICAgKHNsb3RTdGFydCA8PSBib29raW5nU3RhcnQgJiYgc2xvdEVuZCA+PSBib29raW5nRW5kKVxuICAgICAgKTtcbiAgICB9KTtcbiAgfTtcblxuICAvLyBFeHBvcnQgZnVuY3Rpb25zXG4gIGNvbnN0IGV4cG9ydE15Qm9va2luZ3MgPSAoKSA9PiB7XG4gICAgY29uc3QgaWNzQ29udGVudCA9IGdlbmVyYXRlSUNTKHVzZXJCb29raW5ncywgZmFsc2UpO1xuICAgIGNvbnN0IGJsb2IgPSBuZXcgQmxvYihbaWNzQ29udGVudF0sIHsgdHlwZTogJ3RleHQvY2FsZW5kYXI7Y2hhcnNldD11dGYtOCcgfSk7XG4gICAgY29uc3QgbGluayA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2EnKTtcbiAgICBsaW5rLmhyZWYgPSBVUkwuY3JlYXRlT2JqZWN0VVJMKGJsb2IpO1xuICAgIGxpbmsuZG93bmxvYWQgPSBgbWVzLXJlc2VydmF0aW9ucy0ke2Zvcm1hdChuZXcgRGF0ZSgpLCAneXl5eS1NTS1kZCcpfS5pY3NgO1xuICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQobGluayk7XG4gICAgbGluay5jbGljaygpO1xuICAgIGRvY3VtZW50LmJvZHkucmVtb3ZlQ2hpbGQobGluayk7XG4gIH07XG5cbiAgY29uc3QgZXhwb3J0QWxsQm9va2luZ3MgPSAoKSA9PiB7XG4gICAgaWYgKCFzZWxlY3RlZFNwYWNlKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgY29uc3QgaWNzQ29udGVudCA9IGdlbmVyYXRlSUNTKGJvb2tpbmdzLCB0cnVlKTtcbiAgICBjb25zdCBibG9iID0gbmV3IEJsb2IoW2ljc0NvbnRlbnRdLCB7IHR5cGU6ICd0ZXh0L2NhbGVuZGFyO2NoYXJzZXQ9dXRmLTgnIH0pO1xuICAgIGNvbnN0IGxpbmsgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdhJyk7XG4gICAgbGluay5ocmVmID0gVVJMLmNyZWF0ZU9iamVjdFVSTChibG9iKTtcbiAgICBsaW5rLmRvd25sb2FkID0gYGFnZW5kYS0ke3NlbGVjdGVkU3BhY2UubmFtZS50b0xvd2VyQ2FzZSgpLnJlcGxhY2UoL1xccysvZywgJy0nKX0tJHtmb3JtYXQobmV3IERhdGUoKSwgJ3l5eXktTU0tZGQnKX0uaWNzYDtcbiAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKGxpbmspO1xuICAgIGxpbmsuY2xpY2soKTtcbiAgICBkb2N1bWVudC5ib2R5LnJlbW92ZUNoaWxkKGxpbmspO1xuICB9O1xuXG4gIGNvbnN0IG9uU3VibWl0ID0gKGRhdGE6IEJvb2tpbmdGb3JtRGF0YSkgPT4ge1xuICAgIGNyZWF0ZUJvb2tpbmdNdXRhdGlvbi5tdXRhdGUoZGF0YSk7XG4gIH07XG5cbiAgY29uc3QgaGFuZGxlU3BhY2VDbGljayA9IChzcGFjZTogQ29tbW9uU3BhY2UpID0+IHtcbiAgICBzZXRTZWxlY3RlZFNwYWNlKHNwYWNlKTtcbiAgICBzZXRFeHBhbmRlZFNwYWNlSWQoZXhwYW5kZWRTcGFjZUlkID09PSBzcGFjZS5pZCA/IG51bGwgOiBzcGFjZS5pZCk7XG4gIH07XG5cbiAgY29uc3QgaGFuZGxlRGF0ZUNsaWNrID0gKGRhdGU6IERhdGUpID0+IHtcbiAgICBzZXRQcmVTZWxlY3RlZERhdGUoZGF0ZSk7XG4gICAgZm9ybS5zZXRWYWx1ZSgnZGF0ZScsIGRhdGUpO1xuICAgIHNldElzQm9va2luZ0RpYWxvZ09wZW4odHJ1ZSk7XG4gIH07XG5cbiAgY29uc3QgaGFuZGxlTmV3Qm9va2luZyA9IChzcGFjZTogQ29tbW9uU3BhY2UsIGRhdGU/OiBEYXRlKSA9PiB7XG4gICAgc2V0U2VsZWN0ZWRTcGFjZShzcGFjZSk7XG4gICAgaWYgKGRhdGUpIHtcbiAgICAgIHNldFByZVNlbGVjdGVkRGF0ZShkYXRlKTtcbiAgICAgIGZvcm0uc2V0VmFsdWUoJ2RhdGUnLCBkYXRlKTtcbiAgICB9XG4gICAgc2V0SXNCb29raW5nRGlhbG9nT3Blbih0cnVlKTtcbiAgfTtcblxuICByZXR1cm4gKFxuICAgIDxkaXYgY2xhc3NOYW1lPSdmbGV4LTEgZmxleCBmbGV4LWNvbCBvdmVyZmxvdy1oaWRkZW4nIGRhdGEtdGVzdGlkPSdjb21tb24tc3BhY2VzLXBhZ2UnPlxuICAgICAgPEhlYWRlclxuICAgICAgICB0aXRsZT17bGFuZ3VhZ2UgPT09ICdmcicgPyAnRXNwYWNlcyBDb21tdW5zJyA6ICdDb21tb24gU3BhY2VzJ31cbiAgICAgICAgc3VidGl0bGU9e2xhbmd1YWdlID09PSAnZnInID8gJ1LDqXNlcnZleiB2b3MgZXNwYWNlcyBjb21tdW5zJyA6ICdCb29rIHlvdXIgY29tbW9uIHNwYWNlcyd9XG4gICAgICAvPlxuXG4gICAgICB7LyogQmFjayBOYXZpZ2F0aW9uICovfVxuICAgICAge3Nob3dCYWNrQnV0dG9uICYmIG9uQmFjayAmJiAoXG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwicHgtNiBwdC02IHBiLTBcIj5cbiAgICAgICAgICA8QnV0dG9uIHZhcmlhbnQ9XCJvdXRsaW5lXCIgb25DbGljaz17b25CYWNrfSBjbGFzc05hbWU9XCJmbGV4IGl0ZW1zLWNlbnRlciBnYXAtMlwiPlxuICAgICAgICAgICAgPEFycm93TGVmdCBjbGFzc05hbWU9XCJ3LTQgaC00XCIgLz5cbiAgICAgICAgICAgIHtiYWNrQnV0dG9uTGFiZWx9XG4gICAgICAgICAgPC9CdXR0b24+XG4gICAgICAgIDwvZGl2PlxuICAgICAgKX1cblxuICAgICAgPGRpdiBjbGFzc05hbWU9J2ZsZXgtMSBvdmVyZmxvdy1hdXRvIHAtNic+XG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPSdtYXgtdy03eGwgbXgtYXV0byBzcGFjZS15LTYnPlxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT0nc3BhY2UteS02Jz5cbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0nZmxleCBpdGVtcy1jZW50ZXIganVzdGlmeS1iZXR3ZWVuJz5cbiAgICAgICAgICAgIDxoMiBjbGFzc05hbWU9J3RleHQtMnhsIGZvbnQtYm9sZCB0ZXh0LWdyYXktOTAwJyBkYXRhLXRlc3RpZD0nc3BhY2VzLWxpc3QtdGl0bGUnPlxuICAgICAgICAgICAgICB7bGFuZ3VhZ2UgPT09ICdmcicgPyAnRXNwYWNlcyBEaXNwb25pYmxlcycgOiAnQXZhaWxhYmxlIFNwYWNlcyd9XG4gICAgICAgICAgICA8L2gyPlxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9J2ZsZXggaXRlbXMtY2VudGVyIGdhcC0yJz5cbiAgICAgICAgICAgICAgPEJ1dHRvblxuICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+XG4gICAgICAgICAgICAgICAgICB3aW5kb3cub3BlbihcbiAgICAgICAgICAgICAgICAgICAgJ2h0dHBzOi8vY2FsZW5kYXIuZ29vZ2xlLmNvbS9jYWxlbmRhci91LzAvci9zZXR0aW5ncy9hZGRieXVybCcsXG4gICAgICAgICAgICAgICAgICAgICdfYmxhbmsnXG4gICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHZhcmlhbnQ9J291dGxpbmUnXG4gICAgICAgICAgICAgICAgc2l6ZT0nc20nXG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lPSdmbGV4IGl0ZW1zLWNlbnRlciBnYXAtMidcbiAgICAgICAgICAgICAgICBkYXRhLXRlc3RpZD0nYnV0dG9uLWxpbmstY2FsZW5kYXInXG4gICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICA8TGluayBjbGFzc05hbWU9J3ctNCBoLTQnIC8+XG4gICAgICAgICAgICAgICAge2xhbmd1YWdlID09PSAnZnInID8gJ0xpZXIgY2FsZW5kcmllcicgOiAnTGluayBjYWxlbmRhcid9XG4gICAgICAgICAgICAgIDwvQnV0dG9uPlxuICAgICAgICAgICAgICA8QnV0dG9uXG4gICAgICAgICAgICAgICAgb25DbGljaz17ZXhwb3J0TXlCb29raW5nc31cbiAgICAgICAgICAgICAgICB2YXJpYW50PSdvdXRsaW5lJ1xuICAgICAgICAgICAgICAgIHNpemU9J3NtJ1xuICAgICAgICAgICAgICAgIGNsYXNzTmFtZT0nZmxleCBpdGVtcy1jZW50ZXIgZ2FwLTInXG4gICAgICAgICAgICAgICAgZGF0YS10ZXN0aWQ9J2J1dHRvbi1leHBvcnQtbXktYm9va2luZ3MnXG4gICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICA8RG93bmxvYWQgY2xhc3NOYW1lPSd3LTQgaC00JyAvPlxuICAgICAgICAgICAgICAgIHtsYW5ndWFnZSA9PT0gJ2ZyJ1xuICAgICAgICAgICAgICAgICAgPyAnRXhwb3J0ZXIgbWVzIHLDqXNlcnZhdGlvbnMgKC5pY3MpJ1xuICAgICAgICAgICAgICAgICAgOiAnRXhwb3J0IG15IGJvb2tpbmdzICguaWNzKSd9XG4gICAgICAgICAgICAgIDwvQnV0dG9uPlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgPC9kaXY+XG5cbiAgICAgICAgICB7c3BhY2VzTG9hZGluZyA/IChcbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSdzcGFjZS15LTQnPlxuICAgICAgICAgICAgICB7Wy4uLkFycmF5KDMpXS5tYXAoKF8sIGkpID0+IChcbiAgICAgICAgICAgICAgICA8ZGl2IGtleT17aX0gY2xhc3NOYW1lPSdoLTMyIGJnLWdyYXktMjAwIHJvdW5kZWQtbGcgYW5pbWF0ZS1wdWxzZScgLz5cbiAgICAgICAgICAgICAgKSl9XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICApIDogKFxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9J3NwYWNlLXktNCcgZGF0YS10ZXN0aWQ9J3NwYWNlcy1saXN0Jz5cbiAgICAgICAgICAgICAgeyhjb21tb25TcGFjZXMgYXMgQ29tbW9uU3BhY2VbXSkubWFwKChzcGFjZTogQ29tbW9uU3BhY2UpID0+IChcbiAgICAgICAgICAgICAgICA8ZGl2IGtleT17c3BhY2UuaWR9PlxuICAgICAgICAgICAgICAgICAgPENhcmRcbiAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPXtgY3Vyc29yLXBvaW50ZXIgdHJhbnNpdGlvbi1hbGwgZHVyYXRpb24tMjAwIGhvdmVyOnNoYWRvdy1tZCAke1xuICAgICAgICAgICAgICAgICAgICAgIGV4cGFuZGVkU3BhY2VJZCA9PT0gc3BhY2UuaWQgPyAncmluZy0yIHJpbmcta292ZW8tbmF2eSBiZy1rb3Zlby1saWdodC8xMCcgOiAnJ1xuICAgICAgICAgICAgICAgICAgICB9YH1cbiAgICAgICAgICAgICAgICAgICAgb25DbGljaz17KCkgPT4gaGFuZGxlU3BhY2VDbGljayhzcGFjZSl9XG4gICAgICAgICAgICAgICAgICAgIGRhdGEtdGVzdGlkPXtgc3BhY2UtY2FyZC0ke3NwYWNlLmlkfWB9XG4gICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgIDxDYXJkSGVhZGVyIGNsYXNzTmFtZT0ncGItMyc+XG4gICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9J2ZsZXggaXRlbXMtc3RhcnQganVzdGlmeS1iZXR3ZWVuJz5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxDYXJkVGl0bGUgY2xhc3NOYW1lPSdmbGV4IGl0ZW1zLWNlbnRlciBnYXAtMiB0ZXh0LWxnJz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPEJ1aWxkaW5nMiBjbGFzc05hbWU9J3ctNSBoLTUgdGV4dC1rb3Zlby1uYXZ5JyAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICB7c3BhY2UubmFtZX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAge2V4cGFuZGVkU3BhY2VJZCA9PT0gc3BhY2UuaWQgPyAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPENoZXZyb25VcCBjbGFzc05hbWU9J3ctNCBoLTQgdGV4dC1ncmF5LTUwMCcgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgKSA6IChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8Q2hldnJvbkRvd24gY2xhc3NOYW1lPSd3LTQgaC00IHRleHQtZ3JheS01MDAnIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgICAgICA8L0NhcmRUaXRsZT5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSdmbGV4IGl0ZW1zLWNlbnRlciBnYXAtMic+XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHtzcGFjZS5pc1Jlc2VydmFibGUgPyAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPEJhZGdlIHZhcmlhbnQ9J3NlY29uZGFyeScgY2xhc3NOYW1lPSdiZy1ncmVlbi0xMDAgdGV4dC1ncmVlbi04MDAnPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2xhbmd1YWdlID09PSAnZnInID8gJ1LDqXNlcnZhYmxlJyA6ICdCb29rYWJsZSd9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9CYWRnZT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgKSA6IChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8QmFkZ2UgdmFyaWFudD0nc2Vjb25kYXJ5JyBjbGFzc05hbWU9J2JnLWdyYXktMTAwIHRleHQtZ3JheS02MDAnPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2xhbmd1YWdlID09PSAnZnInID8gJ05vbiBSw6lzZXJ2YWJsZScgOiAnTm9uIEJvb2thYmxlJ31cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L0JhZGdlPlxuICAgICAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgIDwvQ2FyZEhlYWRlcj5cblxuICAgICAgICAgICAgICAgICAgICA8Q2FyZENvbnRlbnQgY2xhc3NOYW1lPSdzcGFjZS15LTMnPlxuICAgICAgICAgICAgICAgICAgICAgIHtzcGFjZS5kZXNjcmlwdGlvbiAmJiAoXG4gICAgICAgICAgICAgICAgICAgICAgICA8cFxuICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9J3RleHQtZ3JheS02MDAgdGV4dC1zbSdcbiAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YS10ZXN0aWQ9e2BzcGFjZS1kZXNjcmlwdGlvbi0ke3NwYWNlLmlkfWB9XG4gICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHtzcGFjZS5kZXNjcmlwdGlvbn1cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvcD5cbiAgICAgICAgICAgICAgICAgICAgICApfVxuXG4gICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9J2ZsZXggaXRlbXMtY2VudGVyIGdhcC00IHRleHQtc20gdGV4dC1ncmF5LTUwMCc+XG4gICAgICAgICAgICAgICAgICAgICAgICB7c3BhY2UuY2FwYWNpdHkgJiYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0nZmxleCBpdGVtcy1jZW50ZXIgZ2FwLTEnPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxVc2VycyBjbGFzc05hbWU9J3ctNCBoLTQnIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gZGF0YS10ZXN0aWQ9e2BzcGFjZS1jYXBhY2l0eS0ke3NwYWNlLmlkfWB9PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge3NwYWNlLmNhcGFjaXR5fSB7bGFuZ3VhZ2UgPT09ICdmcicgPyAncGVyc29ubmVzIG1heCcgOiAncGVvcGxlIG1heCd9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9zcGFuPlxuICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG5cbiAgICAgICAgICAgICAgICAgICAgICB7c3BhY2Uub3BlbmluZ0hvdXJzICYmIHNwYWNlLm9wZW5pbmdIb3Vycy5sZW5ndGggPiAwICYmIChcbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSdtdC0zJz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPGg0IGNsYXNzTmFtZT0nZm9udC1tZWRpdW0gdGV4dC1zbSB0ZXh0LWdyYXktNzAwIG1iLTIgZmxleCBpdGVtcy1jZW50ZXIgZ2FwLTEnPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxDbG9jayBjbGFzc05hbWU9J3ctNCBoLTQnIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge2xhbmd1YWdlID09PSAnZnInID8gXCJIZXVyZXMgZCdvdXZlcnR1cmVcIiA6ICdPcGVuaW5nIEhvdXJzJ31cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPC9oND5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT0nZ3JpZCBncmlkLWNvbHMtMSBnYXAtMSB0ZXh0LXhzIHRleHQtZ3JheS02MDAnXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YS10ZXN0aWQ9e2BzcGFjZS1ob3Vycy0ke3NwYWNlLmlkfWB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7c3BhY2Uub3BlbmluZ0hvdXJzLm1hcCgoaG91cnMsIGlkeCkgPT4gKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBrZXk9e2lkeH0gY2xhc3NOYW1lPSdmbGV4IGp1c3RpZnktYmV0d2Vlbic+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT0nY2FwaXRhbGl6ZSc+e2hvdXJzLmRheX08L3NwYW4+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtob3Vycy5vcGVufSAtIHtob3Vycy5jbG9zZX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9zcGFuPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKSl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgKX1cblxuICAgICAgICAgICAgICAgICAgICAgIHtzcGFjZS5ib29raW5nUnVsZXMgJiYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9J210LTMnPlxuICAgICAgICAgICAgICAgICAgICAgICAgICA8aDQgY2xhc3NOYW1lPSdmb250LW1lZGl1bSB0ZXh0LXNtIHRleHQtZ3JheS03MDAgbWItMSBmbGV4IGl0ZW1zLWNlbnRlciBnYXAtMSc+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPEZpbGVUZXh0IGNsYXNzTmFtZT0ndy00IGgtNCcgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7bGFuZ3VhZ2UgPT09ICdmcicgPyAnUsOoZ2xlcyBkZSByw6lzZXJ2YXRpb24nIDogJ0Jvb2tpbmcgUnVsZXMnfVxuICAgICAgICAgICAgICAgICAgICAgICAgICA8L2g0PlxuICAgICAgICAgICAgICAgICAgICAgICAgICA8cFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT0ndGV4dC14cyB0ZXh0LWdyYXktNjAwJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGEtdGVzdGlkPXtgc3BhY2UtcnVsZXMtJHtzcGFjZS5pZH1gfVxuICAgICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge3NwYWNlLmJvb2tpbmdSdWxlc31cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPC9wPlxuICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgPC9DYXJkQ29udGVudD5cbiAgICAgICAgICAgICAgICAgIDwvQ2FyZD5cblxuICAgICAgICAgICAgICAgICAgey8qIElubGluZSBDYWxlbmRhciAqL31cbiAgICAgICAgICAgICAgICAgIHtleHBhbmRlZFNwYWNlSWQgPT09IHNwYWNlLmlkICYmIChcbiAgICAgICAgICAgICAgICAgICAgPD5cbiAgICAgICAgICAgICAgICAgICAgICA8Q29tbW9uU3BhY2VDYWxlbmRhclxuICAgICAgICAgICAgICAgICAgICAgICAgc3BhY2U9e3NwYWNlfVxuICAgICAgICAgICAgICAgICAgICAgICAgb25FeHBvcnQ9e2V4cG9ydEFsbEJvb2tpbmdzfVxuICAgICAgICAgICAgICAgICAgICAgICAgb25OZXdCb29raW5nPXsoZGF0ZSkgPT4gaGFuZGxlTmV3Qm9va2luZyhzcGFjZSwgZGF0ZSl9XG4gICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9J210LTQnXG4gICAgICAgICAgICAgICAgICAgICAgLz5cblxuICAgICAgICAgICAgICAgICAgICAgIHsvKiBCb29raW5nIERpYWxvZyAqL31cbiAgICAgICAgICAgICAgICAgICAgICB7c3BhY2UuaXNSZXNlcnZhYmxlICYmIChcbiAgICAgICAgICAgICAgICAgICAgICAgIDxEaWFsb2cgb3Blbj17aXNCb29raW5nRGlhbG9nT3Blbn0gb25PcGVuQ2hhbmdlPXtzZXRJc0Jvb2tpbmdEaWFsb2dPcGVufT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPERpYWxvZ0NvbnRlbnRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9J21heC13LWxnIG1heC1oLVs5MHZoXSBvdmVyZmxvdy15LWF1dG8nXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YS10ZXN0aWQ9J2Jvb2tpbmctZGlhbG9nJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPERpYWxvZ0hlYWRlcj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxEaWFsb2dUaXRsZT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2xhbmd1YWdlID09PSAnZnInID8gJ05vdXZlbGxlIHLDqXNlcnZhdGlvbicgOiAnTmV3IEJvb2tpbmcnfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9EaWFsb2dUaXRsZT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxEaWFsb2dEZXNjcmlwdGlvbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2xhbmd1YWdlID09PSAnZnInXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPyBgUsOpc2VydmVyICR7c3BhY2UubmFtZX1gXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOiBgQm9vayAke3NwYWNlLm5hbWV9YH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvRGlhbG9nRGVzY3JpcHRpb24+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9EaWFsb2dIZWFkZXI+XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8Rm9ybSB7Li4uZm9ybX0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8Zm9ybSBvblN1Ym1pdD17Zm9ybS5oYW5kbGVTdWJtaXQob25TdWJtaXQpfSBjbGFzc05hbWU9J3NwYWNlLXktNic+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsvKiBTZWxlY3RlZCBEYXRlIERpc3BsYXkgKi99XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSdwLTQgYmctYmx1ZS01MCBib3JkZXIgYm9yZGVyLWJsdWUtMjAwIHJvdW5kZWQtbGcnPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSd0ZXh0LXNtIGZvbnQtbWVkaXVtIHRleHQtYmx1ZS05MDAgbWItMSc+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7bGFuZ3VhZ2UgPT09ICdmcicgPyAnRGF0ZSBzw6lsZWN0aW9ubsOpZScgOiAnU2VsZWN0ZWQgRGF0ZSd9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9J3RleHQtbGcgZm9udC1zZW1pYm9sZCB0ZXh0LWJsdWUtODAwJz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtmb3JtYXQoZm9ybS53YXRjaCgnZGF0ZScpLCAnRUVFRSwgZCBNTU1NIHl5eXknLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvY2FsZTogbGFuZ3VhZ2UgPT09ICdmcicgPyBmciA6IHVuZGVmaW5lZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7LyogT3BlbmluZyBIb3VycyBEaXNwbGF5ICovfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7c2VsZWN0ZWRTcGFjZT8ub3BlbmluZ0hvdXJzICYmIEFycmF5LmlzQXJyYXkoc2VsZWN0ZWRTcGFjZS5vcGVuaW5nSG91cnMpICYmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0ncC0zIGJnLWdyZWVuLTUwIGJvcmRlciBib3JkZXItZ3JlZW4tMjAwIHJvdW5kZWQtbGcnPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9J3RleHQtc20gZm9udC1tZWRpdW0gdGV4dC1ncmVlbi05MDAgbWItMic+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtsYW5ndWFnZSA9PT0gJ2ZyJyA/ICdIZXVyZXMgZFxcJ291dmVydHVyZScgOiAnT3BlbmluZyBIb3Vycyd9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtzZWxlY3RlZFNwYWNlLm9wZW5pbmdIb3Vycy5tYXAoKGhvdXJzLCBpbmRleCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBkYXlOYW1lID0gZm9ybS53YXRjaCgnZGF0ZScpLnRvTG9jYWxlRGF0ZVN0cmluZygnZW4tVVMnLCB7IHdlZWtkYXk6ICdsb25nJyB9KS50b0xvd2VyQ2FzZSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoaG91cnMuZGF5LnRvTG93ZXJDYXNlKCkgPT09IGRheU5hbWUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBrZXk9e2luZGV4fSBjbGFzc05hbWU9J3RleHQtc20gdGV4dC1ncmVlbi04MDAnPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7aG91cnMub3Blbn0gLSB7aG91cnMuY2xvc2V9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgey8qIFRpbWUgU2xvdHMgR3JpZCAqL31cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9J3NwYWNlLXktNCc+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9J3RleHQtc20gZm9udC1tZWRpdW0gdGV4dC1ncmF5LTkwMCc+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7bGFuZ3VhZ2UgPT09ICdmcicgPyAnQ3LDqW5lYXV4IGhvcmFpcmVzIGRpc3BvbmlibGVzJyA6ICdBdmFpbGFibGUgVGltZSBTbG90cyd9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9J2dyaWQgZ3JpZC1jb2xzLTQgZ2FwLTIgbWF4LWgtNjAgb3ZlcmZsb3cteS1hdXRvIHAtMiBib3JkZXIgcm91bmRlZC1sZyBiZy1ncmF5LTUwJz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHt0aW1lU2xvdHMubWFwKCh0aW1lKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGlzQXZhaWxhYmxlID0gaXNUaW1lU2xvdEF2YWlsYWJsZSh0aW1lKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgaGFzQm9va2luZyA9IGJvb2tpbmdzRm9yRGF0ZS5zb21lKChib29raW5nOiBCb29raW5nKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgYm9va2luZ1N0YXJ0ID0gcGFyc2VJU08oYm9va2luZy5zdGFydFRpbWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGJvb2tpbmdFbmQgPSBwYXJzZUlTTyhib29raW5nLmVuZFRpbWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHRpbWVTbG90ID0gcGFyc2UodGltZSwgJ0hIOm1tJywgZm9ybS53YXRjaCgnZGF0ZScpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGltZVNsb3QgPj0gYm9va2luZ1N0YXJ0ICYmIHRpbWVTbG90IDwgYm9va2luZ0VuZDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBjdXJyZW50U3RhcnRUaW1lID0gZm9ybS53YXRjaCgnc3RhcnRUaW1lJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGN1cnJlbnRFbmRUaW1lID0gZm9ybS53YXRjaCgnZW5kVGltZScpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBpc1NlbGVjdGVkID0gdGltZSA9PT0gY3VycmVudFN0YXJ0VGltZSB8fCB0aW1lID09PSBjdXJyZW50RW5kVGltZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGJ1dHRvblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAga2V5PXt0aW1lfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZT0nYnV0dG9uJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGlzYWJsZWQ9eyFpc0F2YWlsYWJsZSB8fCBoYXNCb29raW5nfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DbGljaz17KCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWN1cnJlbnRTdGFydFRpbWUgfHwgKGN1cnJlbnRTdGFydFRpbWUgJiYgY3VycmVudEVuZFRpbWUpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gU2V0IHN0YXJ0IHRpbWVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3JtLnNldFZhbHVlKCdzdGFydFRpbWUnLCB0aW1lKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3JtLnNldFZhbHVlKCdlbmRUaW1lJywgJycpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFNldCBlbmQgdGltZSBpZiBzdGFydCB0aW1lIGlzIGFscmVhZHkgc2V0XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRpbWUgPiBjdXJyZW50U3RhcnRUaW1lKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3JtLnNldFZhbHVlKCdlbmRUaW1lJywgdGltZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIElmIHNlbGVjdGVkIHRpbWUgaXMgYmVmb3JlIHN0YXJ0IHRpbWUsIG1ha2UgaXQgdGhlIG5ldyBzdGFydCB0aW1lXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3JtLnNldFZhbHVlKCdzdGFydFRpbWUnLCB0aW1lKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvcm0uc2V0VmFsdWUoJ2VuZFRpbWUnLCAnJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPXtgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHAtMiB0ZXh0LXhzIHJvdW5kZWQtbWQgYm9yZGVyIHRyYW5zaXRpb24tY29sb3JzIHJlbGF0aXZlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICR7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIWlzQXZhaWxhYmxlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA/ICdiZy1yZWQtMTAwIGJvcmRlci1yZWQtMjAwIHRleHQtcmVkLTYwMCBjdXJzb3Itbm90LWFsbG93ZWQnXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IGhhc0Jvb2tpbmdcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPyAnYmctb3JhbmdlLTEwMCBib3JkZXItb3JhbmdlLTIwMCB0ZXh0LW9yYW5nZS03MDAgY3Vyc29yLW5vdC1hbGxvd2VkJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IGlzU2VsZWN0ZWRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA/ICdiZy1ibHVlLTUwMCBib3JkZXItYmx1ZS02MDAgdGV4dC13aGl0ZSBmb250LXNlbWlib2xkJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogJ2JnLXdoaXRlIGJvcmRlci1ncmF5LTIwMCB0ZXh0LWdyYXktNzAwIGhvdmVyOmJnLWdyYXktMTAwIGhvdmVyOmJvcmRlci1ncmF5LTMwMCdcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0nZm9udC1tZWRpdW0nPnt0aW1lfTwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2hhc0Jvb2tpbmcgJiYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0ndGV4dC1bMTBweF0gbXQtMSB0ZXh0LW9yYW5nZS02MDAnPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtsYW5ndWFnZSA9PT0gJ2ZyJyA/ICdSw6lzZXJ2w6knIDogJ0Jvb2tlZCd9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHshaXNBdmFpbGFibGUgJiYgIWhhc0Jvb2tpbmcgJiYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0ndGV4dC1bMTBweF0gbXQtMSB0ZXh0LXJlZC02MDAnPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtsYW5ndWFnZSA9PT0gJ2ZyJyA/ICdGZXJtw6knIDogJ0Nsb3NlZCd9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtpc1NlbGVjdGVkICYmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9J3RleHQtWzEwcHhdIG10LTEgdGV4dC13aGl0ZSc+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge3RpbWUgPT09IGN1cnJlbnRTdGFydFRpbWUgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA/IChsYW5ndWFnZSA9PT0gJ2ZyJyA/ICdEw6lidXQnIDogJ1N0YXJ0JylcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogKGxhbmd1YWdlID09PSAnZnInID8gJ0ZpbicgOiAnRW5kJylcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgey8qIExlZ2VuZCAqL31cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0nZ3JpZCBncmlkLWNvbHMtMiBnYXAtNCB0ZXh0LXhzJz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSdzcGFjZS15LTInPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0nZmxleCBpdGVtcy1jZW50ZXIgZ2FwLTInPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSd3LTMgaC0zIGJnLXdoaXRlIGJvcmRlciBib3JkZXItZ3JheS0yMDAgcm91bmRlZCc+PC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4+e2xhbmd1YWdlID09PSAnZnInID8gJ0Rpc3BvbmlibGUnIDogJ0F2YWlsYWJsZSd9PC9zcGFuPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9J2ZsZXggaXRlbXMtY2VudGVyIGdhcC0yJz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0ndy0zIGgtMyBiZy1ibHVlLTUwMCByb3VuZGVkJz48L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3Bhbj57bGFuZ3VhZ2UgPT09ICdmcicgPyAnU8OpbGVjdGlvbm7DqScgOiAnU2VsZWN0ZWQnfTwvc3Bhbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSdzcGFjZS15LTInPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0nZmxleCBpdGVtcy1jZW50ZXIgZ2FwLTInPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSd3LTMgaC0zIGJnLW9yYW5nZS0xMDAgYm9yZGVyIGJvcmRlci1vcmFuZ2UtMjAwIHJvdW5kZWQnPjwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuPntsYW5ndWFnZSA9PT0gJ2ZyJyA/ICdSw6lzZXJ2w6knIDogJ0Jvb2tlZCd9PC9zcGFuPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9J2ZsZXggaXRlbXMtY2VudGVyIGdhcC0yJz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0ndy0zIGgtMyBiZy1yZWQtMTAwIGJvcmRlciBib3JkZXItcmVkLTIwMCByb3VuZGVkJz48L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3Bhbj57bGFuZ3VhZ2UgPT09ICdmcicgPyAnRmVybcOpJyA6ICdDbG9zZWQnfTwvc3Bhbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgey8qIFNlbGVjdGVkIFRpbWUgU3VtbWFyeSAqL31cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2Zvcm0ud2F0Y2goJ3N0YXJ0VGltZScpICYmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0ncC0zIGJnLWdyYXktNTAgYm9yZGVyIGJvcmRlci1ncmF5LTIwMCByb3VuZGVkLWxnJz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSd0ZXh0LXNtIGZvbnQtbWVkaXVtIHRleHQtZ3JheS05MDAgbWItMSc+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtsYW5ndWFnZSA9PT0gJ2ZyJyA/ICdSw6lzZXJ2YXRpb24gc8OpbGVjdGlvbm7DqWUnIDogJ1NlbGVjdGVkIEJvb2tpbmcnfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0ndGV4dC1zbSB0ZXh0LWdyYXktNzAwJz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPSdmb250LW1lZGl1bSc+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2xhbmd1YWdlID09PSAnZnInID8gJ0TDqWJ1dDonIDogJ1N0YXJ0Oid9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvc3Bhbj4ge2Zvcm0ud2F0Y2goJ3N0YXJ0VGltZScpfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7Zm9ybS53YXRjaCgnZW5kVGltZScpICYmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9J21sLTQnPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPSdmb250LW1lZGl1bSc+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtsYW5ndWFnZSA9PT0gJ2ZyJyA/ICdGaW46JyA6ICdFbmQ6J31cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvc3Bhbj4ge2Zvcm0ud2F0Y2goJ2VuZFRpbWUnKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3NwYW4+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtmb3JtLndhdGNoKCdlbmRUaW1lJykgJiYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0ndGV4dC14cyB0ZXh0LWdyYXktNTAwIG10LTEnPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtsYW5ndWFnZSA9PT0gJ2ZyJyA/ICdEdXLDqWU6JyA6ICdEdXJhdGlvbjonfSBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7KCgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHN0YXJ0ID0gcGFyc2UoZm9ybS53YXRjaCgnc3RhcnRUaW1lJyksICdISDptbScsIG5ldyBEYXRlKCkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZW5kID0gcGFyc2UoZm9ybS53YXRjaCgnZW5kVGltZScpLCAnSEg6bW0nLCBuZXcgRGF0ZSgpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGR1cmF0aW9uID0gKGVuZC5nZXRUaW1lKCkgLSBzdGFydC5nZXRUaW1lKCkpIC8gKDEwMDAgKiA2MCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gYCR7TWF0aC5mbG9vcihkdXJhdGlvbiAvIDYwKX1oICR7ZHVyYXRpb24gJSA2MCA+IDAgPyBgJHtkdXJhdGlvbiAlIDYwfW1pbmAgOiAnJ31gO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pKCl9IFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgey8qIFZhbGlkYXRpb24gTWVzc2FnZXMgKi99XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHshZm9ybS53YXRjaCgnc3RhcnRUaW1lJykgJiYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSd0ZXh0LXNtIHRleHQtYW1iZXItNjAwIGJnLWFtYmVyLTUwIGJvcmRlciBib3JkZXItYW1iZXItMjAwIHJvdW5kZWQtbGcgcC0zJz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtsYW5ndWFnZSA9PT0gJ2ZyJyBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPyAnVmV1aWxsZXogc8OpbGVjdGlvbm5lciB1bmUgaGV1cmUgZGUgZMOpYnV0J1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6ICdQbGVhc2Ugc2VsZWN0IGEgc3RhcnQgdGltZSd9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtmb3JtLndhdGNoKCdzdGFydFRpbWUnKSAmJiAhZm9ybS53YXRjaCgnZW5kVGltZScpICYmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0ndGV4dC1zbSB0ZXh0LWFtYmVyLTYwMCBiZy1hbWJlci01MCBib3JkZXIgYm9yZGVyLWFtYmVyLTIwMCByb3VuZGVkLWxnIHAtMyc+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7bGFuZ3VhZ2UgPT09ICdmcicgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gJ1ZldWlsbGV6IHPDqWxlY3Rpb25uZXIgdW5lIGhldXJlIGRlIGZpbidcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOiAnUGxlYXNlIHNlbGVjdCBhbiBlbmQgdGltZSd9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgey8qIEhpZGRlbiBmb3JtIGZpZWxkcyB0byBtYWludGFpbiBmb3JtIHZhbGlkYXRpb24gKi99XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSdoaWRkZW4nPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxGb3JtRmllbGRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRyb2w9e2Zvcm0uY29udHJvbH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU9J2RhdGUnXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZW5kZXI9eyh7IGZpZWxkIH0pID0+IChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPEZvcm1JdGVtPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxGb3JtQ29udHJvbD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxpbnB1dCB7Li4uZmllbGR9IHZhbHVlPXtmaWVsZC52YWx1ZT8udG9JU09TdHJpbmcoKSB8fCAnJ30gcmVhZE9ubHkgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L0Zvcm1Db250cm9sPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxGb3JtTWVzc2FnZSAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L0Zvcm1JdGVtPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxGb3JtRmllbGRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRyb2w9e2Zvcm0uY29udHJvbH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU9J3N0YXJ0VGltZSdcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlbmRlcj17KHsgZmllbGQgfSkgPT4gKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8Rm9ybUl0ZW0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPEZvcm1Db250cm9sPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGlucHV0IHsuLi5maWVsZH0gcmVhZE9ubHkgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L0Zvcm1Db250cm9sPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxGb3JtTWVzc2FnZSAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L0Zvcm1JdGVtPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxGb3JtRmllbGRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRyb2w9e2Zvcm0uY29udHJvbH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU9J2VuZFRpbWUnXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZW5kZXI9eyh7IGZpZWxkIH0pID0+IChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPEZvcm1JdGVtPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxGb3JtQ29udHJvbD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxpbnB1dCB7Li4uZmllbGR9IHJlYWRPbmx5IC8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9Gb3JtQ29udHJvbD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8Rm9ybU1lc3NhZ2UgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9Gb3JtSXRlbT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPERpYWxvZ0Zvb3Rlcj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8QnV0dG9uXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlPSdidXR0b24nXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXJpYW50PSdvdXRsaW5lJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DbGljaz17KCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRJc0Jvb2tpbmdEaWFsb2dPcGVuKGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9ybS5yZXNldCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGEtdGVzdGlkPSdidXR0b24tY2FuY2VsLWJvb2tpbmcnXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2xhbmd1YWdlID09PSAnZnInID8gJ0FubnVsZXInIDogJ0NhbmNlbCd9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9CdXR0b24+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPEJ1dHRvblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZT0nc3VibWl0J1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGlzYWJsZWQ9e1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjcmVhdGVCb29raW5nTXV0YXRpb24uaXNQZW5kaW5nIHx8IFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAhZm9ybS53YXRjaCgnc3RhcnRUaW1lJykgfHwgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICFmb3JtLndhdGNoKCdlbmRUaW1lJylcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGEtdGVzdGlkPSdidXR0b24tY29uZmlybS1ib29raW5nJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtjcmVhdGVCb29raW5nTXV0YXRpb24uaXNQZW5kaW5nXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gbGFuZ3VhZ2UgPT09ICdmcidcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA/ICdSw6lzZXJ2YXRpb24uLi4nXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOiAnQm9va2luZy4uLidcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOiBsYW5ndWFnZSA9PT0gJ2ZyJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gJ0NvbmZpcm1lciBsYSByw6lzZXJ2YXRpb24nXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOiAnQ29uZmlybSBCb29raW5nJ31cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L0J1dHRvbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9EaWFsb2dGb290ZXI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Zvcm0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9Gb3JtPlxuICAgICAgICAgICAgICAgICAgICAgICAgICA8L0RpYWxvZ0NvbnRlbnQ+XG4gICAgICAgICAgICAgICAgICAgICAgICA8L0RpYWxvZz5cbiAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICA8Lz5cbiAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICkpfVxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgKX1cbiAgICAgICAgPC9kaXY+XG4gICAgICAgIDwvZGl2PlxuICAgICAgPC9kaXY+XG4gICAgPC9kaXY+XG4gICk7XG59XG5cbi8vIFdyYXAgd2l0aCBoaWVyYXJjaGljYWwgc2VsZWN0aW9uIEhPQyB1c2luZyBidWlsZGluZyBoaWVyYXJjaHkgKHJlc2lkZW50cyBvbmx5IHNlZSBidWlsZGluZ3MgdGhleSBoYXZlIHJlc2lkZW5jZXMgaW4pXG5jb25zdCBDb21tb25TcGFjZXNQYWdlID0gd2l0aEhpZXJhcmNoaWNhbFNlbGVjdGlvbihDb21tb25TcGFjZXNQYWdlSW5uZXIsIHtcbiAgaGllcmFyY2h5OiBbJ2J1aWxkaW5nJ11cbn0pO1xuXG5leHBvcnQgZGVmYXVsdCBDb21tb25TcGFjZXNQYWdlO1xuIl0sInZlcnNpb24iOjN9