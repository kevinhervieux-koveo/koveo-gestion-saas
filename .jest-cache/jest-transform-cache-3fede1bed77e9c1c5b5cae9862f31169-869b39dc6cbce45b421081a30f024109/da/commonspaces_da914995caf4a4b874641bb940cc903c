dc3b45cf04a2e9e344b6c5076a8087ea
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.default = CommonSpacesPage;
const jsx_runtime_1 = require("react/jsx-runtime");
const react_1 = require("react");
const react_query_1 = require("@tanstack/react-query");
const date_fns_1 = require("date-fns");
const locale_1 = require("date-fns/locale");
const react_hook_form_1 = require("react-hook-form");
const zod_1 = require("@hookform/resolvers/zod");
const zod_2 = require("zod");
const header_1 = require("@/components/layout/header");
const card_1 = require("@/components/ui/card");
const badge_1 = require("@/components/ui/badge");
const button_1 = require("@/components/ui/button");
const dialog_1 = require("@/components/ui/dialog");
const form_1 = require("@/components/ui/form");
const tooltip_1 = require("@/components/ui/tooltip");
const lucide_react_1 = require("lucide-react");
const use_toast_1 = require("@/hooks/use-toast");
const use_auth_1 = require("@/hooks/use-auth");
const use_language_1 = require("@/hooks/use-language");
const queryClient_1 = require("@/lib/queryClient");
const common_space_calendar_1 = require("@/components/common-spaces/common-space-calendar");
/**
 * Booking form schema.
 */
const bookingFormSchema = zod_2.z
    .object({
    date: zod_2.z.date({
        message: 'Please select a booking date from the calendar',
    }),
    startTime: zod_2.z.string().min(1, 'Start time is required (example: 09:00)').regex(/^([0-1]?[0-9]|2[0-3]):[0-5][0-9]$/, 'Start time must be in HH:MM format (example: 09:00)'),
    endTime: zod_2.z.string().min(1, 'End time is required (example: 11:00)').regex(/^([0-1]?[0-9]|2[0-3]):[0-5][0-9]$/, 'End time must be in HH:MM format (example: 11:00)'),
})
    .refine((data) => {
    const start = (0, date_fns_1.parse)(data.startTime, 'HH:mm', new Date());
    const end = (0, date_fns_1.parse)(data.endTime, 'HH:mm', new Date());
    return end > start;
}, {
    message: 'End time must be after start time (example: start at 09:00, end at 11:00)',
    path: ['endTime'],
});
/**
 *
 * @param root0
 * @param root0.selected
 * @param root0.onSelect
 * @param root0.space
 * @param root0.bookings
 * @param root0.language
 * @param root0.'data-testid'
 */
function BookingCalendar({ selected, onSelect, space, bookings, language, 'data-testid': testId, }) {
    const [currentDate, setCurrentDate] = (0, react_1.useState)(selected || new Date());
    const monthDays = (0, react_1.useMemo)(() => {
        const start = (0, date_fns_1.startOfMonth)(currentDate);
        const end = (0, date_fns_1.endOfMonth)(currentDate);
        return (0, date_fns_1.eachDayOfInterval)({ start, end });
    }, [currentDate]);
    const getBookingsForDay = (day) => {
        return bookings.filter((booking) => (0, date_fns_1.isSameDay)((0, date_fns_1.parseISO)(booking.startTime), day) && booking.status === 'confirmed');
    };
    const isDayAvailable = (day) => {
        // Past dates are not available
        const today = new Date();
        today.setHours(0, 0, 0, 0);
        const checkDay = new Date(day);
        checkDay.setHours(0, 0, 0, 0);
        if (checkDay < today) {
            return false;
        }
        // Check if day falls within any unavailable periods
        if (space.unavailablePeriods && Array.isArray(space.unavailablePeriods)) {
            for (const period of space.unavailablePeriods) {
                const startDate = new Date(period.startDate);
                const endDate = new Date(period.endDate);
                startDate.setHours(0, 0, 0, 0);
                endDate.setHours(23, 59, 59, 999);
                if (checkDay >= startDate && checkDay <= endDate) {
                    return false;
                }
            }
        }
        // Check opening hours if available
        if (space.openingHours && Array.isArray(space.openingHours)) {
            const dayName = day.toLocaleDateString('en-US', { weekday: 'long' }).toLowerCase();
            const todayHours = space.openingHours.find((h) => h.day.toLowerCase() === dayName);
            // If no hours defined for this day, it's unavailable
            if (!todayHours) {
                return false;
            }
            // If explicitly marked as closed
            if (todayHours.isOpen === false) {
                return false;
            }
        }
        return true;
    };
    const goToPrevMonth = () => {
        setCurrentDate((prev) => {
            const newDate = new Date(prev);
            newDate.setMonth(prev.getMonth() - 1);
            return newDate;
        });
    };
    const goToNextMonth = () => {
        setCurrentDate((prev) => {
            const newDate = new Date(prev);
            newDate.setMonth(prev.getMonth() + 1);
            return newDate;
        });
    };
    return ((0, jsx_runtime_1.jsx)(tooltip_1.TooltipProvider, { children: (0, jsx_runtime_1.jsxs)("div", { className: 'border rounded-md bg-white', "data-testid": testId, children: [(0, jsx_runtime_1.jsxs)("div", { className: 'flex items-center justify-between p-3 border-b', children: [(0, jsx_runtime_1.jsx)(button_1.Button, { variant: 'outline', size: 'sm', onClick: goToPrevMonth, className: 'h-8 w-8 p-0', children: (0, jsx_runtime_1.jsx)(lucide_react_1.ChevronLeft, { className: 'h-4 w-4' }) }), (0, jsx_runtime_1.jsx)("h3", { className: 'text-sm font-semibold', children: (0, date_fns_1.format)(currentDate, 'MMMM yyyy', { locale: language === 'fr' ? locale_1.fr : undefined }) }), (0, jsx_runtime_1.jsx)(button_1.Button, { variant: 'outline', size: 'sm', onClick: goToNextMonth, className: 'h-8 w-8 p-0', children: (0, jsx_runtime_1.jsx)(lucide_react_1.ChevronRight, { className: 'h-4 w-4' }) })] }), (0, jsx_runtime_1.jsxs)("div", { className: 'p-2', children: [(0, jsx_runtime_1.jsx)("div", { className: 'grid grid-cols-7 gap-1 mb-2', children: [
                                language === 'fr' ? 'L' : 'M',
                                language === 'fr' ? 'M' : 'T',
                                language === 'fr' ? 'M' : 'W',
                                language === 'fr' ? 'J' : 'T',
                                language === 'fr' ? 'V' : 'F',
                                language === 'fr' ? 'S' : 'S',
                                language === 'fr' ? 'D' : 'S',
                            ].map((day, index) => ((0, jsx_runtime_1.jsx)("div", { className: 'p-1 text-center text-xs font-medium text-gray-500', children: day }, index))) }), (0, jsx_runtime_1.jsx)("div", { className: 'grid grid-cols-7 gap-1', children: monthDays.map((day, index) => {
                                const dayBookings = getBookingsForDay(day);
                                const isCurrentDay = (0, date_fns_1.isToday)(day);
                                const isSelected = selected && (0, date_fns_1.isSameDay)(day, selected);
                                const isAvailable = isDayAvailable(day);
                                return ((0, jsx_runtime_1.jsxs)(tooltip_1.Tooltip, { children: [(0, jsx_runtime_1.jsx)(tooltip_1.TooltipTrigger, { asChild: true, children: (0, jsx_runtime_1.jsxs)("div", { className: `
                        h-8 p-1 text-xs rounded cursor-pointer transition-colors flex items-center justify-center
                        ${!isAvailable
                                                    ? 'bg-red-100 text-red-600 cursor-not-allowed border border-red-200'
                                                    : isSelected
                                                        ? 'bg-blue-600 text-white'
                                                        : isCurrentDay
                                                            ? 'bg-blue-100 text-blue-900 hover:bg-blue-200'
                                                            : dayBookings.length > 0
                                                                ? 'bg-orange-100 text-orange-900 hover:bg-orange-200'
                                                                : 'hover:bg-gray-100'}
                      `, onClick: () => isAvailable && onSelect(day), children: [(0, jsx_runtime_1.jsx)("span", { className: 'font-medium', children: (0, date_fns_1.format)(day, 'd') }), dayBookings.length > 0 && ((0, jsx_runtime_1.jsx)("div", { className: 'absolute -mt-3 -mr-1', children: (0, jsx_runtime_1.jsx)("div", { className: 'w-1.5 h-1.5 bg-orange-500 rounded-full' }) }))] }) }), (0, jsx_runtime_1.jsx)(tooltip_1.TooltipContent, { children: (0, jsx_runtime_1.jsxs)("div", { className: 'space-y-1', children: [(0, jsx_runtime_1.jsx)("p", { className: 'font-medium', children: (0, date_fns_1.format)(day, 'EEEE, d MMMM yyyy', {
                                                            locale: language === 'fr' ? locale_1.fr : undefined,
                                                        }) }), !isAvailable && ((0, jsx_runtime_1.jsx)("p", { className: 'text-xs text-red-500', children: language === 'fr' ? 'Non disponible' : 'Not available' })), dayBookings.length > 0 && ((0, jsx_runtime_1.jsxs)("div", { className: 'text-xs', children: [(0, jsx_runtime_1.jsxs)("p", { className: 'text-orange-600', children: [dayBookings.length, ' ', language === 'fr' ? 'rÃ©servation(s)' : 'booking(s)'] }), dayBookings.slice(0, 2).map((booking, idx) => ((0, jsx_runtime_1.jsxs)("p", { className: 'text-gray-600', children: [(0, date_fns_1.format)((0, date_fns_1.parseISO)(booking.startTime), 'HH:mm'), " -", ' ', (0, date_fns_1.format)((0, date_fns_1.parseISO)(booking.endTime), 'HH:mm')] }, idx))), dayBookings.length > 2 && ((0, jsx_runtime_1.jsxs)("p", { className: 'text-gray-500', children: ["+", dayBookings.length - 2, " ", language === 'fr' ? 'autres' : 'more'] }))] }))] }) })] }, index));
                            }) }), (0, jsx_runtime_1.jsxs)("div", { className: 'flex items-center justify-center gap-4 mt-3 pt-2 border-t text-xs', children: [(0, jsx_runtime_1.jsxs)("div", { className: 'flex items-center gap-1', children: [(0, jsx_runtime_1.jsx)("div", { className: 'w-2 h-2 bg-blue-600 rounded' }), (0, jsx_runtime_1.jsx)("span", { className: 'text-gray-600', children: language === 'fr' ? 'SÃ©lectionnÃ©' : 'Selected' })] }), (0, jsx_runtime_1.jsxs)("div", { className: 'flex items-center gap-1', children: [(0, jsx_runtime_1.jsx)("div", { className: 'w-2 h-2 bg-orange-500 rounded' }), (0, jsx_runtime_1.jsx)("span", { className: 'text-gray-600', children: language === 'fr' ? 'RÃ©servÃ©' : 'Booked' })] }), (0, jsx_runtime_1.jsxs)("div", { className: 'flex items-center gap-1', children: [(0, jsx_runtime_1.jsx)("div", { className: 'w-2 h-2 bg-red-500 rounded' }), (0, jsx_runtime_1.jsx)("span", { className: 'text-gray-600', children: language === 'fr' ? 'Non disponible' : 'Unavailable' })] }), (0, jsx_runtime_1.jsxs)("div", { className: 'flex items-center gap-1', children: [(0, jsx_runtime_1.jsx)("div", { className: 'w-2 h-2 bg-blue-200 rounded' }), (0, jsx_runtime_1.jsx)("span", { className: 'text-gray-600', children: language === 'fr' ? "Aujourd'hui" : 'Today' })] })] })] })] }) }));
}
/**
 * Utility function to generate .ics calendar content.
 * @param bookings
 * @param allSpaces
 */
function generateICS(bookings, allSpaces) {
    const now = new Date();
    const icsHeader = [
        'BEGIN:VCALENDAR',
        'VERSION:2.0',
        'PRODID:-//Koveo Gestion//Common Spaces//FR',
        'CALSCALE:GREGORIAN',
        'METHOD:PUBLISH',
    ].join('\r\n');
    const icsEvents = bookings.map((booking) => {
        const startDate = new Date(booking.startTime);
        const endDate = new Date(booking.endTime);
        // Format dates for ICS (YYYYMMDDTHHMMSSZ)
        const formatICSDate = (date) => {
            return date
                .toISOString()
                .replace(/[-:]/g, '')
                .replace(/\.\d{3}/, '');
        };
        const title = allSpaces ? `RÃ©servation d'espace commun` : `Espace commun rÃ©servÃ©`;
        return [
            'BEGIN:VEVENT',
            `UID:${booking.id}@koveogestion.com`,
            `DTSTAMP:${formatICSDate(now)}`,
            `DTSTART:${formatICSDate(startDate)}`,
            `DTEND:${formatICSDate(endDate)}`,
            `SUMMARY:${title}`,
            `DESCRIPTION:RÃ©servation confirmÃ©e pour un espace commun`,
            'STATUS:CONFIRMED',
            'END:VEVENT',
        ].join('\r\n');
    });
    const icsFooter = 'END:VCALENDAR';
    return [icsHeader, ...icsEvents, icsFooter].join('\r\n');
}
/**
 * Common Spaces page component for residents.
 */
function CommonSpacesPage() {
    const { user } = (0, use_auth_1.useAuth)();
    const { language } = (0, use_language_1.useLanguage)();
    const { toast } = (0, use_toast_1.useToast)();
    const queryClient = (0, react_query_1.useQueryClient)();
    const [selectedSpace, setSelectedSpace] = (0, react_1.useState)(null);
    const [selectedDate, setSelectedDate] = (0, react_1.useState)(new Date());
    const [isBookingDialogOpen, setIsBookingDialogOpen] = (0, react_1.useState)(false);
    const [expandedSpaceId, setExpandedSpaceId] = (0, react_1.useState)(null);
    const [preSelectedDate, setPreSelectedDate] = (0, react_1.useState)(null);
    // Form for booking creation
    const form = (0, react_hook_form_1.useForm)({
        resolver: (0, zod_1.zodResolver)(bookingFormSchema),
        defaultValues: {
            date: new Date(),
            startTime: '09:00',
            endTime: '10:00',
        },
    });
    // Fetch common spaces in user's buildings
    const { data: commonSpaces = [], isLoading: spacesLoading } = (0, react_query_1.useQuery)({
        queryKey: ['/api/common-spaces'],
        enabled: !!user,
    });
    // Fetch bookings for selected space
    const { data: bookings = [], isLoading: bookingsLoading } = (0, react_query_1.useQuery)({
        queryKey: ['/api/common-spaces', selectedSpace?.id, 'bookings'],
        enabled: !!selectedSpace,
    });
    // Fetch all user's bookings for export
    const { data: userBookings = [] } = (0, react_query_1.useQuery)({
        queryKey: ['/api/common-spaces/my-bookings'],
        enabled: !!user,
    });
    // Create booking mutation
    const createBookingMutation = (0, react_query_1.useMutation)({
        mutationFn: async (data) => {
            if (!selectedSpace) {
                throw new Error('No space selected');
            }
            // More robust date handling to avoid timezone issues
            const baseDate = data.date instanceof Date ? data.date : new Date(data.date);
            // Create start time by setting the time on a date object in local timezone
            const startDateTime = new Date(baseDate.getFullYear(), baseDate.getMonth(), baseDate.getDate());
            const [startHour, startMinute] = data.startTime.split(':').map(Number);
            startDateTime.setHours(startHour, startMinute, 0, 0);
            // Create end time similarly
            const endDateTime = new Date(baseDate.getFullYear(), baseDate.getMonth(), baseDate.getDate());
            const [endHour, endMinute] = data.endTime.split(':').map(Number);
            endDateTime.setHours(endHour, endMinute, 0, 0);
            // Booking creation handling
            return (0, queryClient_1.apiRequest)('POST', `/api/common-spaces/${selectedSpace.id}/bookings`, {
                start_time: startDateTime.toISOString(),
                end_time: endDateTime.toISOString(),
            });
        },
        onSuccess: () => {
            queryClient.invalidateQueries({ queryKey: ['/api/common-spaces'] });
            toast({
                title: 'RÃ©servation confirmÃ©e',
                description: 'Votre rÃ©servation a Ã©tÃ© crÃ©Ã©e avec succÃ¨s.',
            });
            setIsBookingDialogOpen(false);
            form.reset();
        },
        onError: (error) => {
            toast({
                title: 'Erreur de rÃ©servation',
                description: error.message || 'Une erreur est survenue lors de la crÃ©ation de la rÃ©servation.',
                variant: 'destructive',
            });
        },
    });
    // Get bookings for selected date
    const bookingsForDate = (0, react_1.useMemo)(() => {
        if (!bookings || !selectedDate) {
            return [];
        }
        return bookings.filter((booking) => {
            const bookingDate = (0, date_fns_1.parseISO)(booking.startTime);
            return (0, date_fns_1.isSameDay)(bookingDate, selectedDate);
        });
    }, [bookings, selectedDate]);
    // Get time slots availability
    const timeSlots = (0, react_1.useMemo)(() => {
        const slots = [];
        for (let hour = 6; hour <= 22; hour++) {
            slots.push(`${hour.toString().padStart(2, '0')}:00`);
            slots.push(`${hour.toString().padStart(2, '0')}:30`);
        }
        return slots;
    }, []);
    // Helper function to check if a day is available (moved from BookingCalendar)
    const isDayAvailable = (day) => {
        if (!selectedSpace) {
            return false;
        }
        // Past dates are not available
        const today = new Date();
        today.setHours(0, 0, 0, 0);
        const checkDay = new Date(day);
        checkDay.setHours(0, 0, 0, 0);
        if (checkDay < today) {
            return false;
        }
        // Check if day falls within any unavailable periods
        if (selectedSpace.unavailablePeriods && Array.isArray(selectedSpace.unavailablePeriods)) {
            for (const period of selectedSpace.unavailablePeriods) {
                const startDate = new Date(period.startDate);
                const endDate = new Date(period.endDate);
                startDate.setHours(0, 0, 0, 0);
                endDate.setHours(23, 59, 59, 999);
                if (checkDay >= startDate && checkDay <= endDate) {
                    return false;
                }
            }
        }
        // Check opening hours if available
        if (selectedSpace.openingHours && Array.isArray(selectedSpace.openingHours)) {
            const dayName = day.toLocaleDateString('en-US', { weekday: 'long' }).toLowerCase();
            const todayHours = selectedSpace.openingHours.find((h) => h.day.toLowerCase() === dayName);
            // If no hours defined for this day, it's unavailable
            if (!todayHours) {
                return false;
            }
            // If explicitly marked as closed
            if (todayHours.isOpen === false) {
                return false;
            }
        }
        return true;
    };
    // Check if time slot is available
    const isTimeSlotAvailable = (time, duration = 60) => {
        if (!selectedSpace || !selectedDate) {
            return false;
        }
        const [hour, minute] = time.split(':').map(Number);
        const slotStart = new Date(selectedDate);
        slotStart.setHours(hour, minute, 0, 0);
        const slotEnd = new Date(slotStart);
        slotEnd.setMinutes(slotEnd.getMinutes() + duration);
        // Check if day is available first (uses our enhanced availability logic)
        if (!isDayAvailable(selectedDate)) {
            return false;
        }
        // Check opening hours
        if (selectedSpace.openingHours && Array.isArray(selectedSpace.openingHours)) {
            const dayName = selectedDate.toLocaleDateString('en-US', { weekday: 'long' }).toLowerCase();
            const todayHours = selectedSpace.openingHours.find((h) => h.day.toLowerCase() === dayName);
            if (!todayHours || todayHours.isOpen === false) {
                return false;
            }
            const openTime = (0, date_fns_1.parse)(todayHours.open, 'HH:mm', selectedDate);
            const closeTime = (0, date_fns_1.parse)(todayHours.close, 'HH:mm', selectedDate);
            // Check if slot is within opening hours
            if (!(0, date_fns_1.isWithinInterval)(slotStart, { start: openTime, end: closeTime }) ||
                !(0, date_fns_1.isWithinInterval)(slotEnd, { start: openTime, end: closeTime })) {
                return false;
            }
            // Check if slot conflicts with any breaks
            if (todayHours.breaks && Array.isArray(todayHours.breaks)) {
                for (const breakPeriod of todayHours.breaks) {
                    const breakStart = (0, date_fns_1.parse)(breakPeriod.start, 'HH:mm', selectedDate);
                    const breakEnd = (0, date_fns_1.parse)(breakPeriod.end, 'HH:mm', selectedDate);
                    // Check if slot overlaps with break period
                    if ((slotStart >= breakStart && slotStart < breakEnd) ||
                        (slotEnd > breakStart && slotEnd <= breakEnd) ||
                        (slotStart <= breakStart && slotEnd >= breakEnd)) {
                        return false;
                    }
                }
            }
        }
        // Check conflicts with existing bookings
        return !bookingsForDate.some((booking) => {
            const bookingStart = (0, date_fns_1.parseISO)(booking.startTime);
            const bookingEnd = (0, date_fns_1.parseISO)(booking.endTime);
            return ((slotStart >= bookingStart && slotStart < bookingEnd) ||
                (slotEnd > bookingStart && slotEnd <= bookingEnd) ||
                (slotStart <= bookingStart && slotEnd >= bookingEnd));
        });
    };
    // Export functions
    const exportMyBookings = () => {
        const icsContent = generateICS(userBookings, false);
        const blob = new Blob([icsContent], { type: 'text/calendar;charset=utf-8' });
        const link = document.createElement('a');
        link.href = URL.createObjectURL(blob);
        link.download = `mes-reservations-${(0, date_fns_1.format)(new Date(), 'yyyy-MM-dd')}.ics`;
        document.body.appendChild(link);
        link.click();
        document.body.removeChild(link);
    };
    const exportAllBookings = () => {
        if (!selectedSpace) {
            return;
        }
        const icsContent = generateICS(bookings, true);
        const blob = new Blob([icsContent], { type: 'text/calendar;charset=utf-8' });
        const link = document.createElement('a');
        link.href = URL.createObjectURL(blob);
        link.download = `agenda-${selectedSpace.name.toLowerCase().replace(/\s+/g, '-')}-${(0, date_fns_1.format)(new Date(), 'yyyy-MM-dd')}.ics`;
        document.body.appendChild(link);
        link.click();
        document.body.removeChild(link);
    };
    const onSubmit = (data) => {
        createBookingMutation.mutate(data);
    };
    const handleSpaceClick = (space) => {
        setSelectedSpace(space);
        setExpandedSpaceId(expandedSpaceId === space.id ? null : space.id);
    };
    const handleDateClick = (date) => {
        setPreSelectedDate(date);
        form.setValue('date', date);
        setIsBookingDialogOpen(true);
    };
    const handleNewBooking = (space, date) => {
        setSelectedSpace(space);
        if (date) {
            setPreSelectedDate(date);
            form.setValue('date', date);
        }
        setIsBookingDialogOpen(true);
    };
    return ((0, jsx_runtime_1.jsxs)("div", { className: 'flex-1 flex flex-col overflow-hidden', "data-testid": 'common-spaces-page', children: [(0, jsx_runtime_1.jsx)(header_1.Header, { title: language === 'fr' ? 'Espaces Communs' : 'Common Spaces', subtitle: language === 'fr' ? 'RÃ©servez vos espaces communs' : 'Book your common spaces' }), (0, jsx_runtime_1.jsx)("div", { className: 'flex-1 overflow-auto p-6', children: (0, jsx_runtime_1.jsx)("div", { className: 'max-w-7xl mx-auto space-y-6', children: (0, jsx_runtime_1.jsxs)("div", { className: 'space-y-6', children: [(0, jsx_runtime_1.jsxs)("div", { className: 'flex items-center justify-between', children: [(0, jsx_runtime_1.jsx)("h2", { className: 'text-2xl font-bold text-gray-900', "data-testid": 'spaces-list-title', children: language === 'fr' ? 'Espaces Disponibles' : 'Available Spaces' }), (0, jsx_runtime_1.jsxs)("div", { className: 'flex items-center gap-2', children: [(0, jsx_runtime_1.jsxs)(button_1.Button, { onClick: () => window.open('https://calendar.google.com/calendar/u/0/r/settings/addbyurl', '_blank'), variant: 'outline', size: 'sm', className: 'flex items-center gap-2', "data-testid": 'button-link-calendar', children: [(0, jsx_runtime_1.jsx)(lucide_react_1.Link, { className: 'w-4 h-4' }), language === 'fr' ? 'Lier calendrier' : 'Link calendar'] }), (0, jsx_runtime_1.jsxs)(button_1.Button, { onClick: exportMyBookings, variant: 'outline', size: 'sm', className: 'flex items-center gap-2', "data-testid": 'button-export-my-bookings', children: [(0, jsx_runtime_1.jsx)(lucide_react_1.Download, { className: 'w-4 h-4' }), language === 'fr'
                                                        ? 'Exporter mes rÃ©servations (.ics)'
                                                        : 'Export my bookings (.ics)'] })] })] }), spacesLoading ? ((0, jsx_runtime_1.jsx)("div", { className: 'space-y-4', children: [...Array(3)].map((_, i) => ((0, jsx_runtime_1.jsx)("div", { className: 'h-32 bg-gray-200 rounded-lg animate-pulse' }, i))) })) : ((0, jsx_runtime_1.jsx)("div", { className: 'space-y-4', "data-testid": 'spaces-list', children: commonSpaces.map((space) => ((0, jsx_runtime_1.jsxs)("div", { children: [(0, jsx_runtime_1.jsxs)(card_1.Card, { className: `cursor-pointer transition-all duration-200 hover:shadow-md ${expandedSpaceId === space.id ? 'ring-2 ring-koveo-navy bg-koveo-light/10' : ''}`, onClick: () => handleSpaceClick(space), "data-testid": `space-card-${space.id}`, children: [(0, jsx_runtime_1.jsx)(card_1.CardHeader, { className: 'pb-3', children: (0, jsx_runtime_1.jsxs)("div", { className: 'flex items-start justify-between', children: [(0, jsx_runtime_1.jsxs)(card_1.CardTitle, { className: 'flex items-center gap-2 text-lg', children: [(0, jsx_runtime_1.jsx)(lucide_react_1.Building2, { className: 'w-5 h-5 text-koveo-navy' }), space.name, expandedSpaceId === space.id ? ((0, jsx_runtime_1.jsx)(lucide_react_1.ChevronUp, { className: 'w-4 h-4 text-gray-500' })) : ((0, jsx_runtime_1.jsx)(lucide_react_1.ChevronDown, { className: 'w-4 h-4 text-gray-500' }))] }), (0, jsx_runtime_1.jsx)("div", { className: 'flex items-center gap-2', children: space.isReservable ? ((0, jsx_runtime_1.jsx)(badge_1.Badge, { variant: 'secondary', className: 'bg-green-100 text-green-800', children: language === 'fr' ? 'RÃ©servable' : 'Bookable' })) : ((0, jsx_runtime_1.jsx)(badge_1.Badge, { variant: 'secondary', className: 'bg-gray-100 text-gray-600', children: language === 'fr' ? 'Non RÃ©servable' : 'Non Bookable' })) })] }) }), (0, jsx_runtime_1.jsxs)(card_1.CardContent, { className: 'space-y-3', children: [space.description && ((0, jsx_runtime_1.jsx)("p", { className: 'text-gray-600 text-sm', "data-testid": `space-description-${space.id}`, children: space.description })), (0, jsx_runtime_1.jsx)("div", { className: 'flex items-center gap-4 text-sm text-gray-500', children: space.capacity && ((0, jsx_runtime_1.jsxs)("div", { className: 'flex items-center gap-1', children: [(0, jsx_runtime_1.jsx)(lucide_react_1.Users, { className: 'w-4 h-4' }), (0, jsx_runtime_1.jsxs)("span", { "data-testid": `space-capacity-${space.id}`, children: [space.capacity, " ", language === 'fr' ? 'personnes max' : 'people max'] })] })) }), space.openingHours && space.openingHours.length > 0 && ((0, jsx_runtime_1.jsxs)("div", { className: 'mt-3', children: [(0, jsx_runtime_1.jsxs)("h4", { className: 'font-medium text-sm text-gray-700 mb-2 flex items-center gap-1', children: [(0, jsx_runtime_1.jsx)(lucide_react_1.Clock, { className: 'w-4 h-4' }), language === 'fr' ? "Heures d'ouverture" : 'Opening Hours'] }), (0, jsx_runtime_1.jsx)("div", { className: 'grid grid-cols-1 gap-1 text-xs text-gray-600', "data-testid": `space-hours-${space.id}`, children: space.openingHours.map((hours, idx) => ((0, jsx_runtime_1.jsxs)("div", { className: 'flex justify-between', children: [(0, jsx_runtime_1.jsx)("span", { className: 'capitalize', children: hours.day }), (0, jsx_runtime_1.jsxs)("span", { children: [hours.open, " - ", hours.close] })] }, idx))) })] })), space.bookingRules && ((0, jsx_runtime_1.jsxs)("div", { className: 'mt-3', children: [(0, jsx_runtime_1.jsxs)("h4", { className: 'font-medium text-sm text-gray-700 mb-1 flex items-center gap-1', children: [(0, jsx_runtime_1.jsx)(lucide_react_1.FileText, { className: 'w-4 h-4' }), language === 'fr' ? 'RÃ¨gles de rÃ©servation' : 'Booking Rules'] }), (0, jsx_runtime_1.jsx)("p", { className: 'text-xs text-gray-600', "data-testid": `space-rules-${space.id}`, children: space.bookingRules })] }))] })] }), expandedSpaceId === space.id && ((0, jsx_runtime_1.jsxs)(jsx_runtime_1.Fragment, { children: [(0, jsx_runtime_1.jsx)(common_space_calendar_1.CommonSpaceCalendar, { space: space, onExport: exportAllBookings, onNewBooking: (date) => handleNewBooking(space, date), className: 'mt-4' }), space.isReservable && ((0, jsx_runtime_1.jsx)(dialog_1.Dialog, { open: isBookingDialogOpen, onOpenChange: setIsBookingDialogOpen, children: (0, jsx_runtime_1.jsxs)(dialog_1.DialogContent, { className: 'max-w-lg max-h-[90vh] overflow-y-auto', "data-testid": 'booking-dialog', children: [(0, jsx_runtime_1.jsxs)(dialog_1.DialogHeader, { children: [(0, jsx_runtime_1.jsx)(dialog_1.DialogTitle, { children: language === 'fr' ? 'Nouvelle rÃ©servation' : 'New Booking' }), (0, jsx_runtime_1.jsx)(dialog_1.DialogDescription, { children: language === 'fr'
                                                                            ? `RÃ©server ${space.name}`
                                                                            : `Book ${space.name}` })] }), (0, jsx_runtime_1.jsx)(form_1.Form, { ...form, children: (0, jsx_runtime_1.jsxs)("form", { onSubmit: form.handleSubmit(onSubmit), className: 'space-y-6', children: [(0, jsx_runtime_1.jsxs)("div", { className: 'p-4 bg-blue-50 border border-blue-200 rounded-lg', children: [(0, jsx_runtime_1.jsx)("div", { className: 'text-sm font-medium text-blue-900 mb-1', children: language === 'fr' ? 'Date sÃ©lectionnÃ©e' : 'Selected Date' }), (0, jsx_runtime_1.jsx)("div", { className: 'text-lg font-semibold text-blue-800', children: (0, date_fns_1.format)(form.watch('date'), 'EEEE, d MMMM yyyy', {
                                                                                        locale: language === 'fr' ? locale_1.fr : undefined,
                                                                                    }) })] }), selectedSpace?.openingHours && Array.isArray(selectedSpace.openingHours) && ((0, jsx_runtime_1.jsxs)("div", { className: 'p-3 bg-green-50 border border-green-200 rounded-lg', children: [(0, jsx_runtime_1.jsx)("div", { className: 'text-sm font-medium text-green-900 mb-2', children: language === 'fr' ? 'Heures d\'ouverture' : 'Opening Hours' }), selectedSpace.openingHours.map((hours, index) => {
                                                                                    const dayName = form.watch('date').toLocaleDateString('en-US', { weekday: 'long' }).toLowerCase();
                                                                                    if (hours.day.toLowerCase() === dayName) {
                                                                                        return ((0, jsx_runtime_1.jsxs)("div", { className: 'text-sm text-green-800', children: [hours.open, " - ", hours.close] }, index));
                                                                                    }
                                                                                    return null;
                                                                                })] })), (0, jsx_runtime_1.jsxs)("div", { className: 'space-y-4', children: [(0, jsx_runtime_1.jsx)("div", { className: 'text-sm font-medium text-gray-900', children: language === 'fr' ? 'CrÃ©neaux horaires disponibles' : 'Available Time Slots' }), (0, jsx_runtime_1.jsx)("div", { className: 'grid grid-cols-4 gap-2 max-h-60 overflow-y-auto p-2 border rounded-lg bg-gray-50', children: timeSlots.map((time) => {
                                                                                        const isAvailable = isTimeSlotAvailable(time);
                                                                                        const hasBooking = bookingsForDate.some((booking) => {
                                                                                            const bookingStart = (0, date_fns_1.parseISO)(booking.startTime);
                                                                                            const bookingEnd = (0, date_fns_1.parseISO)(booking.endTime);
                                                                                            const timeSlot = (0, date_fns_1.parse)(time, 'HH:mm', form.watch('date'));
                                                                                            return timeSlot >= bookingStart && timeSlot < bookingEnd;
                                                                                        });
                                                                                        const currentStartTime = form.watch('startTime');
                                                                                        const currentEndTime = form.watch('endTime');
                                                                                        const isSelected = time === currentStartTime || time === currentEndTime;
                                                                                        return ((0, jsx_runtime_1.jsxs)("button", { type: 'button', disabled: !isAvailable || hasBooking, onClick: () => {
                                                                                                if (!currentStartTime || (currentStartTime && currentEndTime)) {
                                                                                                    // Set start time
                                                                                                    form.setValue('startTime', time);
                                                                                                    form.setValue('endTime', '');
                                                                                                }
                                                                                                else {
                                                                                                    // Set end time if start time is already set
                                                                                                    if (time > currentStartTime) {
                                                                                                        form.setValue('endTime', time);
                                                                                                    }
                                                                                                    else {
                                                                                                        // If selected time is before start time, make it the new start time
                                                                                                        form.setValue('startTime', time);
                                                                                                        form.setValue('endTime', '');
                                                                                                    }
                                                                                                }
                                                                                            }, className: `
                                            p-2 text-xs rounded-md border transition-colors relative
                                            ${!isAvailable
                                                                                                ? 'bg-red-100 border-red-200 text-red-600 cursor-not-allowed'
                                                                                                : hasBooking
                                                                                                    ? 'bg-orange-100 border-orange-200 text-orange-700 cursor-not-allowed'
                                                                                                    : isSelected
                                                                                                        ? 'bg-blue-500 border-blue-600 text-white font-semibold'
                                                                                                        : 'bg-white border-gray-200 text-gray-700 hover:bg-gray-100 hover:border-gray-300'}
                                          `, children: [(0, jsx_runtime_1.jsx)("div", { className: 'font-medium', children: time }), hasBooking && ((0, jsx_runtime_1.jsx)("div", { className: 'text-[10px] mt-1 text-orange-600', children: language === 'fr' ? 'RÃ©servÃ©' : 'Booked' })), !isAvailable && !hasBooking && ((0, jsx_runtime_1.jsx)("div", { className: 'text-[10px] mt-1 text-red-600', children: language === 'fr' ? 'FermÃ©' : 'Closed' })), isSelected && ((0, jsx_runtime_1.jsx)("div", { className: 'text-[10px] mt-1 text-white', children: time === currentStartTime
                                                                                                        ? (language === 'fr' ? 'DÃ©but' : 'Start')
                                                                                                        : (language === 'fr' ? 'Fin' : 'End') }))] }, time));
                                                                                    }) }), (0, jsx_runtime_1.jsxs)("div", { className: 'grid grid-cols-2 gap-4 text-xs', children: [(0, jsx_runtime_1.jsxs)("div", { className: 'space-y-2', children: [(0, jsx_runtime_1.jsxs)("div", { className: 'flex items-center gap-2', children: [(0, jsx_runtime_1.jsx)("div", { className: 'w-3 h-3 bg-white border border-gray-200 rounded' }), (0, jsx_runtime_1.jsx)("span", { children: language === 'fr' ? 'Disponible' : 'Available' })] }), (0, jsx_runtime_1.jsxs)("div", { className: 'flex items-center gap-2', children: [(0, jsx_runtime_1.jsx)("div", { className: 'w-3 h-3 bg-blue-500 rounded' }), (0, jsx_runtime_1.jsx)("span", { children: language === 'fr' ? 'SÃ©lectionnÃ©' : 'Selected' })] })] }), (0, jsx_runtime_1.jsxs)("div", { className: 'space-y-2', children: [(0, jsx_runtime_1.jsxs)("div", { className: 'flex items-center gap-2', children: [(0, jsx_runtime_1.jsx)("div", { className: 'w-3 h-3 bg-orange-100 border border-orange-200 rounded' }), (0, jsx_runtime_1.jsx)("span", { children: language === 'fr' ? 'RÃ©servÃ©' : 'Booked' })] }), (0, jsx_runtime_1.jsxs)("div", { className: 'flex items-center gap-2', children: [(0, jsx_runtime_1.jsx)("div", { className: 'w-3 h-3 bg-red-100 border border-red-200 rounded' }), (0, jsx_runtime_1.jsx)("span", { children: language === 'fr' ? 'FermÃ©' : 'Closed' })] })] })] })] }), form.watch('startTime') && ((0, jsx_runtime_1.jsxs)("div", { className: 'p-3 bg-gray-50 border border-gray-200 rounded-lg', children: [(0, jsx_runtime_1.jsx)("div", { className: 'text-sm font-medium text-gray-900 mb-1', children: language === 'fr' ? 'RÃ©servation sÃ©lectionnÃ©e' : 'Selected Booking' }), (0, jsx_runtime_1.jsxs)("div", { className: 'text-sm text-gray-700', children: [(0, jsx_runtime_1.jsx)("span", { className: 'font-medium', children: language === 'fr' ? 'DÃ©but:' : 'Start:' }), " ", form.watch('startTime'), form.watch('endTime') && ((0, jsx_runtime_1.jsxs)("span", { className: 'ml-4', children: [(0, jsx_runtime_1.jsx)("span", { className: 'font-medium', children: language === 'fr' ? 'Fin:' : 'End:' }), " ", form.watch('endTime')] }))] }), form.watch('endTime') && ((0, jsx_runtime_1.jsxs)("div", { className: 'text-xs text-gray-500 mt-1', children: [language === 'fr' ? 'DurÃ©e:' : 'Duration:', (() => {
                                                                                            const start = (0, date_fns_1.parse)(form.watch('startTime'), 'HH:mm', new Date());
                                                                                            const end = (0, date_fns_1.parse)(form.watch('endTime'), 'HH:mm', new Date());
                                                                                            const duration = (end.getTime() - start.getTime()) / (1000 * 60);
                                                                                            return `${Math.floor(duration / 60)}h ${duration % 60 > 0 ? `${duration % 60}min` : ''}`;
                                                                                        })()] }))] })), !form.watch('startTime') && ((0, jsx_runtime_1.jsx)("div", { className: 'text-sm text-amber-600 bg-amber-50 border border-amber-200 rounded-lg p-3', children: language === 'fr'
                                                                                ? 'Veuillez sÃ©lectionner une heure de dÃ©but'
                                                                                : 'Please select a start time' })), form.watch('startTime') && !form.watch('endTime') && ((0, jsx_runtime_1.jsx)("div", { className: 'text-sm text-amber-600 bg-amber-50 border border-amber-200 rounded-lg p-3', children: language === 'fr'
                                                                                ? 'Veuillez sÃ©lectionner une heure de fin'
                                                                                : 'Please select an end time' })), (0, jsx_runtime_1.jsxs)("div", { className: 'hidden', children: [(0, jsx_runtime_1.jsx)(form_1.FormField, { control: form.control, name: 'date', render: ({ field }) => ((0, jsx_runtime_1.jsxs)(form_1.FormItem, { children: [(0, jsx_runtime_1.jsx)(form_1.FormControl, { children: (0, jsx_runtime_1.jsx)("input", { ...field, value: field.value?.toISOString() || '', readOnly: true }) }), (0, jsx_runtime_1.jsx)(form_1.FormMessage, {})] })) }), (0, jsx_runtime_1.jsx)(form_1.FormField, { control: form.control, name: 'startTime', render: ({ field }) => ((0, jsx_runtime_1.jsxs)(form_1.FormItem, { children: [(0, jsx_runtime_1.jsx)(form_1.FormControl, { children: (0, jsx_runtime_1.jsx)("input", { ...field, readOnly: true }) }), (0, jsx_runtime_1.jsx)(form_1.FormMessage, {})] })) }), (0, jsx_runtime_1.jsx)(form_1.FormField, { control: form.control, name: 'endTime', render: ({ field }) => ((0, jsx_runtime_1.jsxs)(form_1.FormItem, { children: [(0, jsx_runtime_1.jsx)(form_1.FormControl, { children: (0, jsx_runtime_1.jsx)("input", { ...field, readOnly: true }) }), (0, jsx_runtime_1.jsx)(form_1.FormMessage, {})] })) })] }), (0, jsx_runtime_1.jsxs)(dialog_1.DialogFooter, { children: [(0, jsx_runtime_1.jsx)(button_1.Button, { type: 'button', variant: 'outline', onClick: () => {
                                                                                        setIsBookingDialogOpen(false);
                                                                                        form.reset();
                                                                                    }, "data-testid": 'button-cancel-booking', children: language === 'fr' ? 'Annuler' : 'Cancel' }), (0, jsx_runtime_1.jsx)(button_1.Button, { type: 'submit', disabled: createBookingMutation.isPending ||
                                                                                        !form.watch('startTime') ||
                                                                                        !form.watch('endTime'), "data-testid": 'button-confirm-booking', children: createBookingMutation.isPending
                                                                                        ? language === 'fr'
                                                                                            ? 'RÃ©servation...'
                                                                                            : 'Booking...'
                                                                                        : language === 'fr'
                                                                                            ? 'Confirmer la rÃ©servation'
                                                                                            : 'Confirm Booking' })] })] }) })] }) }))] }))] }, space.id))) }))] }) }) })] }));
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiL2hvbWUvcnVubmVyL3dvcmtzcGFjZS9jbGllbnQvc3JjL3BhZ2VzL3Jlc2lkZW50cy9jb21tb24tc3BhY2VzLnRzeCIsIm1hcHBpbmdzIjoiOztBQThiQSxtQ0F1dEJDOztBQXJwQ0QsaUNBQTBDO0FBQzFDLHVEQUE4RTtBQUM5RSx1Q0FXa0I7QUFDbEIsNENBQXFDO0FBQ3JDLHFEQUEwQztBQUMxQyxpREFBc0Q7QUFDdEQsNkJBQXdCO0FBQ3hCLHVEQUFvRDtBQUNwRCwrQ0FBZ0Y7QUFDaEYsaURBQThDO0FBQzlDLG1EQUFnRDtBQVdoRCxtREFRZ0M7QUFDaEMsK0NBTzhCO0FBRTlCLHFEQUFtRztBQUNuRywrQ0FpQnNCO0FBQ3RCLGlEQUE2QztBQUM3QywrQ0FBMkM7QUFDM0MsdURBQW1EO0FBQ25ELG1EQUErQztBQUUvQyw0RkFBdUY7QUFxRHZGOztHQUVHO0FBQ0gsTUFBTSxpQkFBaUIsR0FBRyxPQUFDO0tBQ3hCLE1BQU0sQ0FBQztJQUNOLElBQUksRUFBRSxPQUFDLENBQUMsSUFBSSxDQUFDO1FBQ1gsT0FBTyxFQUFFLGdEQUFnRDtLQUMxRCxDQUFDO0lBQ0YsU0FBUyxFQUFFLE9BQUMsQ0FBQyxNQUFNLEVBQUUsQ0FBQyxHQUFHLENBQUMsQ0FBQyxFQUFFLHlDQUF5QyxDQUFDLENBQUMsS0FBSyxDQUFDLG1DQUFtQyxFQUFFLHFEQUFxRCxDQUFDO0lBQ3pLLE9BQU8sRUFBRSxPQUFDLENBQUMsTUFBTSxFQUFFLENBQUMsR0FBRyxDQUFDLENBQUMsRUFBRSx1Q0FBdUMsQ0FBQyxDQUFDLEtBQUssQ0FBQyxtQ0FBbUMsRUFBRSxtREFBbUQsQ0FBQztDQUNwSyxDQUFDO0tBQ0QsTUFBTSxDQUNMLENBQUMsSUFBSSxFQUFFLEVBQUU7SUFDUCxNQUFNLEtBQUssR0FBRyxJQUFBLGdCQUFLLEVBQUMsSUFBSSxDQUFDLFNBQVMsRUFBRSxPQUFPLEVBQUUsSUFBSSxJQUFJLEVBQUUsQ0FBQyxDQUFDO0lBQ3pELE1BQU0sR0FBRyxHQUFHLElBQUEsZ0JBQUssRUFBQyxJQUFJLENBQUMs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LEdBQ1QsQ0FDVixJQUNBLENBQ0osS0E5WE8sS0FBSyxDQUFDLEVBQUUsQ0ErWFosQ0FDUCxDQUFDLEdBQ0UsQ0FDUCxJQUNHLEdBQ0EsR0FDRixJQUNGLENBQ1AsQ0FBQztBQUNKLENBQUMiLCJuYW1lcyI6W10sInNvdXJjZXMiOlsiL2hvbWUvcnVubmVyL3dvcmtzcGFjZS9jbGllbnQvc3JjL3BhZ2VzL3Jlc2lkZW50cy9jb21tb24tc3BhY2VzLnRzeCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyB1c2VTdGF0ZSwgdXNlTWVtbyB9IGZyb20gJ3JlYWN0JztcbmltcG9ydCB7IHVzZVF1ZXJ5LCB1c2VNdXRhdGlvbiwgdXNlUXVlcnlDbGllbnQgfSBmcm9tICdAdGFuc3RhY2svcmVhY3QtcXVlcnknO1xuaW1wb3J0IHtcbiAgZm9ybWF0LFxuICBhZGREYXlzLFxuICBpc1NhbWVEYXksXG4gIHBhcnNlSVNPLFxuICBpc1dpdGhpbkludGVydmFsLFxuICBwYXJzZSxcbiAgc3RhcnRPZk1vbnRoLFxuICBlbmRPZk1vbnRoLFxuICBlYWNoRGF5T2ZJbnRlcnZhbCxcbiAgaXNUb2RheSxcbn0gZnJvbSAnZGF0ZS1mbnMnO1xuaW1wb3J0IHsgZnIgfSBmcm9tICdkYXRlLWZucy9sb2NhbGUnO1xuaW1wb3J0IHsgdXNlRm9ybSB9IGZyb20gJ3JlYWN0LWhvb2stZm9ybSc7XG5pbXBvcnQgeyB6b2RSZXNvbHZlciB9IGZyb20gJ0Bob29rZm9ybS9yZXNvbHZlcnMvem9kJztcbmltcG9ydCB7IHogfSBmcm9tICd6b2QnO1xuaW1wb3J0IHsgSGVhZGVyIH0gZnJvbSAnQC9jb21wb25lbnRzL2xheW91dC9oZWFkZXInO1xuaW1wb3J0IHsgQ2FyZCwgQ2FyZENvbnRlbnQsIENhcmRIZWFkZXIsIENhcmRUaXRsZSB9IGZyb20gJ0AvY29tcG9uZW50cy91aS9jYXJkJztcbmltcG9ydCB7IEJhZGdlIH0gZnJvbSAnQC9jb21wb25lbnRzL3VpL2JhZGdlJztcbmltcG9ydCB7IEJ1dHRvbiB9IGZyb20gJ0AvY29tcG9uZW50cy91aS9idXR0b24nO1xuaW1wb3J0IHsgSW5wdXQgfSBmcm9tICdAL2NvbXBvbmVudHMvdWkvaW5wdXQnO1xuaW1wb3J0IHsgTGFiZWwgfSBmcm9tICdAL2NvbXBvbmVudHMvdWkvbGFiZWwnO1xuaW1wb3J0IHsgVGV4dGFyZWEgfSBmcm9tICdAL2NvbXBvbmVudHMvdWkvdGV4dGFyZWEnO1xuaW1wb3J0IHtcbiAgU2VsZWN0LFxuICBTZWxlY3RDb250ZW50LFxuICBTZWxlY3RJdGVtLFxuICBTZWxlY3RUcmlnZ2VyLFxuICBTZWxlY3RWYWx1ZSxcbn0gZnJvbSAnQC9jb21wb25lbnRzL3VpL3NlbGVjdCc7XG5pbXBvcnQge1xuICBEaWFsb2csXG4gIERpYWxvZ0NvbnRlbnQsXG4gIERpYWxvZ0hlYWRlcixcbiAgRGlhbG9nVGl0bGUsXG4gIERpYWxvZ1RyaWdnZXIsXG4gIERpYWxvZ0Rlc2NyaXB0aW9uLFxuICBEaWFsb2dGb290ZXIsXG59IGZyb20gJ0AvY29tcG9uZW50cy91aS9kaWFsb2cnO1xuaW1wb3J0IHtcbiAgRm9ybSxcbiAgRm9ybUNvbnRyb2wsXG4gIEZvcm1GaWVsZCxcbiAgRm9ybUl0ZW0sXG4gIEZvcm1MYWJlbCxcbiAgRm9ybU1lc3NhZ2UsXG59IGZyb20gJ0AvY29tcG9uZW50cy91aS9mb3JtJztcbmltcG9ydCB7IENhbGVuZGFyIH0gZnJvbSAnQC9jb21wb25lbnRzL3VpL2NhbGVuZGFyJztcbmltcG9ydCB7IFRvb2x0aXAsIFRvb2x0aXBDb250ZW50LCBUb29sdGlwUHJvdmlkZXIsIFRvb2x0aXBUcmlnZ2VyIH0gZnJvbSAnQC9jb21wb25lbnRzL3VpL3Rvb2x0aXAnO1xuaW1wb3J0IHtcbiAgQnVpbGRpbmcyLFxuICBDbG9jayxcbiAgVXNlcnMsXG4gIE1hcFBpbixcbiAgRG93bmxvYWQsXG4gIExpbmssXG4gIENhbGVuZGFyIGFzIENhbGVuZGFySWNvbixcbiAgUGx1cyxcbiAgWCxcbiAgRmlsZVRleHQsXG4gIFVzZXIsXG4gIENhbGVuZGFyRGF5cyxcbiAgQ2hldnJvbkRvd24sXG4gIENoZXZyb25VcCxcbiAgQ2hldnJvbkxlZnQsXG4gIENoZXZyb25SaWdodCxcbn0gZnJvbSAnbHVjaWRlLXJlYWN0JztcbmltcG9ydCB7IHVzZVRvYXN0IH0gZnJvbSAnQC9ob29rcy91c2UtdG9hc3QnO1xuaW1wb3J0IHsgdXNlQXV0aCB9IGZyb20gJ0AvaG9va3MvdXNlLWF1dGgnO1xuaW1wb3J0IHsgdXNlTGFuZ3VhZ2UgfSBmcm9tICdAL2hvb2tzL3VzZS1sYW5ndWFnZSc7XG5pbXBvcnQgeyBhcGlSZXF1ZXN0IH0gZnJvbSAnQC9saWIvcXVlcnlDbGllbnQnO1xuaW1wb3J0IHsgQ2FsZW5kYXJWaWV3IH0gZnJvbSAnQC9jb21wb25lbnRzL2NvbW1vbi1zcGFjZXMvY2FsZW5kYXItdmlldyc7XG5pbXBvcnQgeyBDb21tb25TcGFjZUNhbGVuZGFyIH0gZnJvbSAnQC9jb21wb25lbnRzL2NvbW1vbi1zcGFjZXMvY29tbW9uLXNwYWNlLWNhbGVuZGFyJztcblxuLyoqXG4gKiBDb21tb24gU3BhY2UgaW50ZXJmYWNlLlxuICovXG5pbnRlcmZhY2UgQ29tbW9uU3BhY2Uge1xuICBpZDogc3RyaW5nO1xuICBuYW1lOiBzdHJpbmc7XG4gIGRlc2NyaXB0aW9uPzogc3RyaW5nO1xuICBidWlsZGluZ0lkOiBzdHJpbmc7XG4gIGlzUmVzZXJ2YWJsZTogYm9vbGVhbjtcbiAgY2FwYWNpdHk/OiBudW1iZXI7XG4gIGNvbnRhY3RQZXJzb25JZD86IHN0cmluZztcbiAgb3BlbmluZ0hvdXJzPzogQXJyYXk8e1xuICAgIGRheTogc3RyaW5nO1xuICAgIG9wZW46IHN0cmluZztcbiAgICBjbG9zZTogc3RyaW5nO1xuICAgIGlzT3Blbj86IGJvb2xlYW47XG4gICAgYnJlYWtzPzogQXJyYXk8e1xuICAgICAgc3RhcnQ6IHN0cmluZztcbiAgICAgIGVuZDogc3RyaW5nO1xuICAgICAgcmVhc29uPzogc3RyaW5nO1xuICAgIH0+O1xuICB9PjtcbiAgdW5hdmFpbGFibGVQZXJpb2RzPzogQXJyYXk8e1xuICAgIHN0YXJ0RGF0ZTogc3RyaW5nO1xuICAgIGVuZERhdGU6IHN0cmluZztcbiAgICByZWFzb24/OiBzdHJpbmc7XG4gICAgcmVjdXJyZW5jZT86ICdub25lJyB8ICd3ZWVrbHknIHwgJ21vbnRobHknIHwgJ3llYXJseSc7XG4gIH0+O1xuICBib29raW5nUnVsZXM/OiBzdHJpbmc7XG4gIGNyZWF0ZWRBdDogc3RyaW5nO1xuICB1cGRhdGVkQXQ6IHN0cmluZztcbn1cblxuLyoqXG4gKiBCb29raW5nIGludGVyZmFjZS5cbiAqL1xuaW50ZXJmYWNlIEJvb2tpbmcge1xuICBpZDogc3RyaW5nO1xuICBjb21tb25TcGFjZUlkOiBzdHJpbmc7XG4gIHVzZXJJZDogc3RyaW5nO1xuICBzdGFydFRpbWU6IHN0cmluZztcbiAgZW5kVGltZTogc3RyaW5nO1xuICBzdGF0dXM6ICdjb25maXJtZWQnIHwgJ2NhbmNlbGxlZCc7XG4gIGNyZWF0ZWRBdDogc3RyaW5nO1xuICB1cGRhdGVkQXQ6IHN0cmluZztcbiAgdXNlcj86IHtcbiAgICBmaXJzdE5hbWU6IHN0cmluZztcbiAgICBsYXN0TmFtZTogc3RyaW5nO1xuICB9O1xufVxuXG4vKipcbiAqIEJvb2tpbmcgZm9ybSBzY2hlbWEuXG4gKi9cbmNvbnN0IGJvb2tpbmdGb3JtU2NoZW1hID0gelxuICAub2JqZWN0KHtcbiAgICBkYXRlOiB6LmRhdGUoe1xuICAgICAgbWVzc2FnZTogJ1BsZWFzZSBzZWxlY3QgYSBib29raW5nIGRhdGUgZnJvbSB0aGUgY2FsZW5kYXInLFxuICAgIH0pLFxuICAgIHN0YXJ0VGltZTogei5zdHJpbmcoKS5taW4oMSwgJ1N0YXJ0IHRpbWUgaXMgcmVxdWlyZWQgKGV4YW1wbGU6IDA5OjAwKScpLnJlZ2V4KC9eKFswLTFdP1swLTldfDJbMC0zXSk6WzAtNV1bMC05XSQvLCAnU3RhcnQgdGltZSBtdXN0IGJlIGluIEhIOk1NIGZvcm1hdCAoZXhhbXBsZTogMDk6MDApJyksXG4gICAgZW5kVGltZTogei5zdHJpbmcoKS5taW4oMSwgJ0VuZCB0aW1lIGlzIHJlcXVpcmVkIChleGFtcGxlOiAxMTowMCknKS5yZWdleCgvXihbMC0xXT9bMC05XXwyWzAtM10pOlswLTVdWzAtOV0kLywgJ0VuZCB0aW1lIG11c3QgYmUgaW4gSEg6TU0gZm9ybWF0IChleGFtcGxlOiAxMTowMCknKSxcbiAgfSlcbiAgLnJlZmluZShcbiAgICAoZGF0YSkgPT4ge1xuICAgICAgY29uc3Qgc3RhcnQgPSBwYXJzZShkYXRhLnN0YXJ0VGltZSwgJ0hIOm1tJywgbmV3IERhdGUoKSk7XG4gICAgICBjb25zdCBlbmQgPSBwYXJzZShkYXRhLmVuZFRpbWUsICdISDptbScsIG5ldyBEYXRlKCkpO1xuICAgICAgcmV0dXJuIGVuZCA+IHN0YXJ0O1xuICAgIH0sXG4gICAge1xuICAgICAgbWVzc2FnZTogJ0VuZCB0aW1lIG11c3QgYmUgYWZ0ZXIgc3RhcnQgdGltZSAoZXhhbXBsZTogc3RhcnQgYXQgMDk6MDAsIGVuZCBhdCAxMTowMCknLFxuICAgICAgcGF0aDogWydlbmRUaW1lJ10sXG4gICAgfVxuICApO1xuXG4vKipcbiAqXG4gKi9cbnR5cGUgQm9va2luZ0Zvcm1EYXRhID0gei5pbmZlcjx0eXBlb2YgYm9va2luZ0Zvcm1TY2hlbWE+O1xuXG4vKipcbiAqIENvbXBhY3QgQm9va2luZyBDYWxlbmRhciBDb21wb25lbnQuXG4gKi9cbmludGVyZmFjZSBCb29raW5nQ2FsZW5kYXJQcm9wcyB7XG4gIHNlbGVjdGVkOiBEYXRlO1xuICBvblNlbGVjdDogKGRhdGU6IERhdGUpID0+IHZvaWQ7XG4gIHNwYWNlOiBDb21tb25TcGFjZTtcbiAgYm9va2luZ3M6IEJvb2tpbmdbXTtcbiAgbGFuZ3VhZ2U6IHN0cmluZztcbiAgJ2RhdGEtdGVzdGlkJz86IHN0cmluZztcbn1cblxuLyoqXG4gKlxuICogQHBhcmFtIHJvb3QwXG4gKiBAcGFyYW0gcm9vdDAuc2VsZWN0ZWRcbiAqIEBwYXJhbSByb290MC5vblNlbGVjdFxuICogQHBhcmFtIHJvb3QwLnNwYWNlXG4gKiBAcGFyYW0gcm9vdDAuYm9va2luZ3NcbiAqIEBwYXJhbSByb290MC5sYW5ndWFnZVxuICogQHBhcmFtIHJvb3QwLidkYXRhLXRlc3RpZCdcbiAqL1xuZnVuY3Rpb24gQm9va2luZ0NhbGVuZGFyKHtcbiAgc2VsZWN0ZWQsXG4gIG9uU2VsZWN0LFxuICBzcGFjZSxcbiAgYm9va2luZ3MsXG4gIGxhbmd1YWdlLFxuICAnZGF0YS10ZXN0aWQnOiB0ZXN0SWQsXG59OiBCb29raW5nQ2FsZW5kYXJQcm9wcykge1xuICBjb25zdCBbY3VycmVudERhdGUsIHNldEN1cnJlbnREYXRlXSA9IHVzZVN0YXRlKHNlbGVjdGVkIHx8IG5ldyBEYXRlKCkpO1xuXG4gIGNvbnN0IG1vbnRoRGF5cyA9IHVzZU1lbW8oKCkgPT4ge1xuICAgIGNvbnN0IHN0YXJ0ID0gc3RhcnRPZk1vbnRoKGN1cnJlbnREYXRlKTtcbiAgICBjb25zdCBlbmQgPSBlbmRPZk1vbnRoKGN1cnJlbnREYXRlKTtcbiAgICByZXR1cm4gZWFjaERheU9mSW50ZXJ2YWwoeyBzdGFydCwgZW5kIH0pO1xuICB9LCBbY3VycmVudERhdGVdKTtcblxuICBjb25zdCBnZXRCb29raW5nc0ZvckRheSA9IChkYXk6IERhdGUpID0+IHtcbiAgICByZXR1cm4gYm9va2luZ3MuZmlsdGVyKFxuICAgICAgKGJvb2tpbmcpID0+IGlzU2FtZURheShwYXJzZUlTTyhib29raW5nLnN0YXJ0VGltZSksIGRheSkgJiYgYm9va2luZy5zdGF0dXMgPT09ICdjb25maXJtZWQnXG4gICAgKTtcbiAgfTtcblxuICBjb25zdCBpc0RheUF2YWlsYWJsZSA9IChkYXk6IERhdGUpID0+IHtcbiAgICAvLyBQYXN0IGRhdGVzIGFyZSBub3QgYXZhaWxhYmxlXG4gICAgY29uc3QgdG9kYXkgPSBuZXcgRGF0ZSgpO1xuICAgIHRvZGF5LnNldEhvdXJzKDAsIDAsIDAsIDApO1xuICAgIGNvbnN0IGNoZWNrRGF5ID0gbmV3IERhdGUoZGF5KTtcbiAgICBjaGVja0RheS5zZXRIb3VycygwLCAwLCAwLCAwKTtcbiAgICBcbiAgICBpZiAoY2hlY2tEYXkgPCB0b2RheSkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIC8vIENoZWNrIGlmIGRheSBmYWxscyB3aXRoaW4gYW55IHVuYXZhaWxhYmxlIHBlcmlvZHNcbiAgICBpZiAoc3BhY2UudW5hdmFpbGFibGVQZXJpb2RzICYmIEFycmF5LmlzQXJyYXkoc3BhY2UudW5hdmFpbGFibGVQZXJpb2RzKSkge1xuICAgICAgZm9yIChjb25zdCBwZXJpb2Qgb2Ygc3BhY2UudW5hdmFpbGFibGVQZXJpb2RzKSB7XG4gICAgICAgIGNvbnN0IHN0YXJ0RGF0ZSA9IG5ldyBEYXRlKHBlcmlvZC5zdGFydERhdGUpO1xuICAgICAgICBjb25zdCBlbmREYXRlID0gbmV3IERhdGUocGVyaW9kLmVuZERhdGUpO1xuICAgICAgICBzdGFydERhdGUuc2V0SG91cnMoMCwgMCwgMCwgMCk7XG4gICAgICAgIGVuZERhdGUuc2V0SG91cnMoMjMsIDU5LCA1OSwgOTk5KTtcbiAgICAgICAgXG4gICAgICAgIGlmIChjaGVja0RheSA+PSBzdGFydERhdGUgJiYgY2hlY2tEYXkgPD0gZW5kRGF0ZSkge1xuICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIC8vIENoZWNrIG9wZW5pbmcgaG91cnMgaWYgYXZhaWxhYmxlXG4gICAgaWYgKHNwYWNlLm9wZW5pbmdIb3VycyAmJiBBcnJheS5pc0FycmF5KHNwYWNlLm9wZW5pbmdIb3VycykpIHtcbiAgICAgIGNvbnN0IGRheU5hbWUgPSBkYXkudG9Mb2NhbGVEYXRlU3RyaW5nKCdlbi1VUycsIHsgd2Vla2RheTogJ2xvbmcnIH0pLnRvTG93ZXJDYXNlKCk7XG4gICAgICBjb25zdCB0b2RheUhvdXJzID0gc3BhY2Uub3BlbmluZ0hvdXJzLmZpbmQoKGgpID0+IGguZGF5LnRvTG93ZXJDYXNlKCkgPT09IGRheU5hbWUpO1xuICAgICAgXG4gICAgICAvLyBJZiBubyBob3VycyBkZWZpbmVkIGZvciB0aGlzIGRheSwgaXQncyB1bmF2YWlsYWJsZVxuICAgICAgaWYgKCF0b2RheUhvdXJzKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH1cbiAgICAgIFxuICAgICAgLy8gSWYgZXhwbGljaXRseSBtYXJrZWQgYXMgY2xvc2VkXG4gICAgICBpZiAodG9kYXlIb3Vycy5pc09wZW4gPT09IGZhbHNlKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gdHJ1ZTtcbiAgfTtcblxuICBjb25zdCBnb1RvUHJldk1vbnRoID0gKCkgPT4ge1xuICAgIHNldEN1cnJlbnREYXRlKChwcmV2KSA9PiB7XG4gICAgICBjb25zdCBuZXdEYXRlID0gbmV3IERhdGUocHJldik7XG4gICAgICBuZXdEYXRlLnNldE1vbnRoKHByZXYuZ2V0TW9udGgoKSAtIDEpO1xuICAgICAgcmV0dXJuIG5ld0RhdGU7XG4gICAgfSk7XG4gIH07XG5cbiAgY29uc3QgZ29Ub05leHRNb250aCA9ICgpID0+IHtcbiAgICBzZXRDdXJyZW50RGF0ZSgocHJldikgPT4ge1xuICAgICAgY29uc3QgbmV3RGF0ZSA9IG5ldyBEYXRlKHByZXYpO1xuICAgICAgbmV3RGF0ZS5zZXRNb250aChwcmV2LmdldE1vbnRoKCkgKyAxKTtcbiAgICAgIHJldHVybiBuZXdEYXRlO1xuICAgIH0pO1xuICB9O1xuXG4gIHJldHVybiAoXG4gICAgPFRvb2x0aXBQcm92aWRlcj5cbiAgICAgIDxkaXYgY2xhc3NOYW1lPSdib3JkZXIgcm91bmRlZC1tZCBiZy13aGl0ZScgZGF0YS10ZXN0aWQ9e3Rlc3RJZH0+XG4gICAgICAgIHsvKiBDYWxlbmRhciBIZWFkZXIgKi99XG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPSdmbGV4IGl0ZW1zLWNlbnRlciBqdXN0aWZ5LWJldHdlZW4gcC0zIGJvcmRlci1iJz5cbiAgICAgICAgICA8QnV0dG9uIHZhcmlhbnQ9J291dGxpbmUnIHNpemU9J3NtJyBvbkNsaWNrPXtnb1RvUHJldk1vbnRofSBjbGFzc05hbWU9J2gtOCB3LTggcC0wJz5cbiAgICAgICAgICAgIDxDaGV2cm9uTGVmdCBjbGFzc05hbWU9J2gtNCB3LTQnIC8+XG4gICAgICAgICAgPC9CdXR0b24+XG5cbiAgICAgICAgICA8aDMgY2xhc3NOYW1lPSd0ZXh0LXNtIGZvbnQtc2VtaWJvbGQnPlxuICAgICAgICAgICAge2Zvcm1hdChjdXJyZW50RGF0ZSwgJ01NTU0geXl5eScsIHsgbG9jYWxlOiBsYW5ndWFnZSA9PT0gJ2ZyJyA/IGZyIDogdW5kZWZpbmVkIH0pfVxuICAgICAgICAgIDwvaDM+XG5cbiAgICAgICAgICA8QnV0dG9uIHZhcmlhbnQ9J291dGxpbmUnIHNpemU9J3NtJyBvbkNsaWNrPXtnb1RvTmV4dE1vbnRofSBjbGFzc05hbWU9J2gtOCB3LTggcC0wJz5cbiAgICAgICAgICAgIDxDaGV2cm9uUmlnaHQgY2xhc3NOYW1lPSdoLTQgdy00JyAvPlxuICAgICAgICAgIDwvQnV0dG9uPlxuICAgICAgICA8L2Rpdj5cblxuICAgICAgICB7LyogQ2FsZW5kYXIgR3JpZCAqL31cbiAgICAgICAgPGRpdiBjbGFzc05hbWU9J3AtMic+XG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9J2dyaWQgZ3JpZC1jb2xzLTcgZ2FwLTEgbWItMic+XG4gICAgICAgICAgICB7LyogV2VlayBkYXkgaGVhZGVycyAqL31cbiAgICAgICAgICAgIHtbXG4gICAgICAgICAgICAgIGxhbmd1YWdlID09PSAnZnInID8gJ0wnIDogJ00nLFxuICAgICAgICAgICAgICBsYW5ndWFnZSA9PT0gJ2ZyJyA/ICdNJyA6ICdUJyxcbiAgICAgICAgICAgICAgbGFuZ3VhZ2UgPT09ICdmcicgPyAnTScgOiAnVycsXG4gICAgICAgICAgICAgIGxhbmd1YWdlID09PSAnZnInID8gJ0onIDogJ1QnLFxuICAgICAgICAgICAgICBsYW5ndWFnZSA9PT0gJ2ZyJyA/ICdWJyA6ICdGJyxcbiAgICAgICAgICAgICAgbGFuZ3VhZ2UgPT09ICdmcicgPyAnUycgOiAnUycsXG4gICAgICAgICAgICAgIGxhbmd1YWdlID09PSAnZnInID8gJ0QnIDogJ1MnLFxuICAgICAgICAgICAgXS5tYXAoKGRheSwgaW5kZXgpID0+IChcbiAgICAgICAgICAgICAgPGRpdiBrZXk9e2luZGV4fSBjbGFzc05hbWU9J3AtMSB0ZXh0LWNlbnRlciB0ZXh0LXhzIGZvbnQtbWVkaXVtIHRleHQtZ3JheS01MDAnPlxuICAgICAgICAgICAgICAgIHtkYXl9XG4gICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgKSl9XG4gICAgICAgICAgPC9kaXY+XG5cbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0nZ3JpZCBncmlkLWNvbHMtNyBnYXAtMSc+XG4gICAgICAgICAgICB7bW9udGhEYXlzLm1hcCgoZGF5LCBpbmRleCkgPT4ge1xuICAgICAgICAgICAgICBjb25zdCBkYXlCb29raW5ncyA9IGdldEJvb2tpbmdzRm9yRGF5KGRheSk7XG4gICAgICAgICAgICAgIGNvbnN0IGlzQ3VycmVudERheSA9IGlzVG9kYXkoZGF5KTtcbiAgICAgICAgICAgICAgY29uc3QgaXNTZWxlY3RlZCA9IHNlbGVjdGVkICYmIGlzU2FtZURheShkYXksIHNlbGVjdGVkKTtcbiAgICAgICAgICAgICAgY29uc3QgaXNBdmFpbGFibGUgPSBpc0RheUF2YWlsYWJsZShkYXkpO1xuXG4gICAgICAgICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICAgICAgPFRvb2x0aXAga2V5PXtpbmRleH0+XG4gICAgICAgICAgICAgICAgICA8VG9vbHRpcFRyaWdnZXIgYXNDaGlsZD5cbiAgICAgICAgICAgICAgICAgICAgPGRpdlxuICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT17YFxuICAgICAgICAgICAgICAgICAgICAgICAgaC04IHAtMSB0ZXh0LXhzIHJvdW5kZWQgY3Vyc29yLXBvaW50ZXIgdHJhbnNpdGlvbi1jb2xvcnMgZmxleCBpdGVtcy1jZW50ZXIganVzdGlmeS1jZW50ZXJcbiAgICAgICAgICAgICAgICAgICAgICAgICR7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICFpc0F2YWlsYWJsZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gJ2JnLXJlZC0xMDAgdGV4dC1yZWQtNjAwIGN1cnNvci1ub3QtYWxsb3dlZCBib3JkZXIgYm9yZGVyLXJlZC0yMDAnXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgOiBpc1NlbGVjdGVkXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA/ICdiZy1ibHVlLTYwMCB0ZXh0LXdoaXRlJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOiBpc0N1cnJlbnREYXlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPyAnYmctYmx1ZS0xMDAgdGV4dC1ibHVlLTkwMCBob3ZlcjpiZy1ibHVlLTIwMCdcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOiBkYXlCb29raW5ncy5sZW5ndGggPiAwXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPyAnYmctb3JhbmdlLTEwMCB0ZXh0LW9yYW5nZS05MDAgaG92ZXI6Ymctb3JhbmdlLTIwMCdcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6ICdob3ZlcjpiZy1ncmF5LTEwMCdcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICBgfVxuICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IGlzQXZhaWxhYmxlICYmIG9uU2VsZWN0KGRheSl9XG4gICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9J2ZvbnQtbWVkaXVtJz57Zm9ybWF0KGRheSwgJ2QnKX08L3NwYW4+XG4gICAgICAgICAgICAgICAgICAgICAge2RheUJvb2tpbmdzLmxlbmd0aCA+IDAgJiYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9J2Fic29sdXRlIC1tdC0zIC1tci0xJz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9J3ctMS41IGgtMS41IGJnLW9yYW5nZS01MDAgcm91bmRlZC1mdWxsJz48L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgPC9Ub29sdGlwVHJpZ2dlcj5cbiAgICAgICAgICAgICAgICAgIDxUb29sdGlwQ29udGVudD5cbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9J3NwYWNlLXktMSc+XG4gICAgICAgICAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPSdmb250LW1lZGl1bSc+XG4gICAgICAgICAgICAgICAgICAgICAgICB7Zm9ybWF0KGRheSwgJ0VFRUUsIGQgTU1NTSB5eXl5Jywge1xuICAgICAgICAgICAgICAgICAgICAgICAgICBsb2NhbGU6IGxhbmd1YWdlID09PSAnZnInID8gZnIgOiB1bmRlZmluZWQsXG4gICAgICAgICAgICAgICAgICAgICAgICB9KX1cbiAgICAgICAgICAgICAgICAgICAgICA8L3A+XG4gICAgICAgICAgICAgICAgICAgICAgeyFpc0F2YWlsYWJsZSAmJiAoXG4gICAgICAgICAgICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9J3RleHQteHMgdGV4dC1yZWQtNTAwJz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAge2xhbmd1YWdlID09PSAnZnInID8gJ05vbiBkaXNwb25pYmxlJyA6ICdOb3QgYXZhaWxhYmxlJ31cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvcD5cbiAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICAgIHtkYXlCb29raW5ncy5sZW5ndGggPiAwICYmIChcbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSd0ZXh0LXhzJz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPSd0ZXh0LW9yYW5nZS02MDAnPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtkYXlCb29raW5ncy5sZW5ndGh9eycgJ31cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7bGFuZ3VhZ2UgPT09ICdmcicgPyAncsOpc2VydmF0aW9uKHMpJyA6ICdib29raW5nKHMpJ31cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPC9wPlxuICAgICAgICAgICAgICAgICAgICAgICAgICB7ZGF5Qm9va2luZ3Muc2xpY2UoMCwgMikubWFwKChib29raW5nLCBpZHgpID0+IChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cCBrZXk9e2lkeH0gY2xhc3NOYW1lPSd0ZXh0LWdyYXktNjAwJz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtmb3JtYXQocGFyc2VJU08oYm9va2luZy5zdGFydFRpbWUpLCAnSEg6bW0nKX0gLXsnICd9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7Zm9ybWF0KHBhcnNlSVNPKGJvb2tpbmcuZW5kVGltZSksICdISDptbScpfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvcD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgKSl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHtkYXlCb29raW5ncy5sZW5ndGggPiAyICYmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9J3RleHQtZ3JheS01MDAnPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgK3tkYXlCb29raW5ncy5sZW5ndGggLSAyfSB7bGFuZ3VhZ2UgPT09ICdmcicgPyAnYXV0cmVzJyA6ICdtb3JlJ31cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3A+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgIDwvVG9vbHRpcENvbnRlbnQ+XG4gICAgICAgICAgICAgICAgPC9Ub29sdGlwPlxuICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgfSl9XG4gICAgICAgICAgPC9kaXY+XG5cbiAgICAgICAgICB7LyogTGVnZW5kICovfVxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSdmbGV4IGl0ZW1zLWNlbnRlciBqdXN0aWZ5LWNlbnRlciBnYXAtNCBtdC0zIHB0LTIgYm9yZGVyLXQgdGV4dC14cyc+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0nZmxleCBpdGVtcy1jZW50ZXIgZ2FwLTEnPlxuICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0ndy0yIGgtMiBiZy1ibHVlLTYwMCByb3VuZGVkJz48L2Rpdj5cbiAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPSd0ZXh0LWdyYXktNjAwJz5cbiAgICAgICAgICAgICAgICB7bGFuZ3VhZ2UgPT09ICdmcicgPyAnU8OpbGVjdGlvbm7DqScgOiAnU2VsZWN0ZWQnfVxuICAgICAgICAgICAgICA8L3NwYW4+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSdmbGV4IGl0ZW1zLWNlbnRlciBnYXAtMSc+XG4gICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSd3LTIgaC0yIGJnLW9yYW5nZS01MDAgcm91bmRlZCc+PC9kaXY+XG4gICAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT0ndGV4dC1ncmF5LTYwMCc+e2xhbmd1YWdlID09PSAnZnInID8gJ1LDqXNlcnbDqScgOiAnQm9va2VkJ308L3NwYW4+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSdmbGV4IGl0ZW1zLWNlbnRlciBnYXAtMSc+XG4gICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSd3LTIgaC0yIGJnLXJlZC01MDAgcm91bmRlZCc+PC9kaXY+XG4gICAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT0ndGV4dC1ncmF5LTYwMCc+e2xhbmd1YWdlID09PSAnZnInID8gJ05vbiBkaXNwb25pYmxlJyA6ICdVbmF2YWlsYWJsZSd9PC9zcGFuPlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0nZmxleCBpdGVtcy1jZW50ZXIgZ2FwLTEnPlxuICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0ndy0yIGgtMiBiZy1ibHVlLTIwMCByb3VuZGVkJz48L2Rpdj5cbiAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPSd0ZXh0LWdyYXktNjAwJz57bGFuZ3VhZ2UgPT09ICdmcicgPyBcIkF1am91cmQnaHVpXCIgOiAnVG9kYXknfTwvc3Bhbj5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICA8L2Rpdj5cbiAgICAgIDwvZGl2PlxuICAgIDwvVG9vbHRpcFByb3ZpZGVyPlxuICApO1xufVxuXG4vKipcbiAqIFV0aWxpdHkgZnVuY3Rpb24gdG8gZ2VuZXJhdGUgLmljcyBjYWxlbmRhciBjb250ZW50LlxuICogQHBhcmFtIGJvb2tpbmdzXG4gKiBAcGFyYW0gYWxsU3BhY2VzXG4gKi9cbmZ1bmN0aW9uIGdlbmVyYXRlSUNTKGJvb2tpbmdzOiBCb29raW5nW10sIGFsbFNwYWNlcz86IGJvb2xlYW4pOiBzdHJpbmcge1xuICBjb25zdCBub3cgPSBuZXcgRGF0ZSgpO1xuICBjb25zdCBpY3NIZWFkZXIgPSBbXG4gICAgJ0JFR0lOOlZDQUxFTkRBUicsXG4gICAgJ1ZFUlNJT046Mi4wJyxcbiAgICAnUFJPRElEOi0vL0tvdmVvIEdlc3Rpb24vL0NvbW1vbiBTcGFjZXMvL0ZSJyxcbiAgICAnQ0FMU0NBTEU6R1JFR09SSUFOJyxcbiAgICAnTUVUSE9EOlBVQkxJU0gnLFxuICBdLmpvaW4oJ1xcclxcbicpO1xuXG4gIGNvbnN0IGljc0V2ZW50cyA9IGJvb2tpbmdzLm1hcCgoYm9va2luZykgPT4ge1xuICAgIGNvbnN0IHN0YXJ0RGF0ZSA9IG5ldyBEYXRlKGJvb2tpbmcuc3RhcnRUaW1lKTtcbiAgICBjb25zdCBlbmREYXRlID0gbmV3IERhdGUoYm9va2luZy5lbmRUaW1lKTtcblxuICAgIC8vIEZvcm1hdCBkYXRlcyBmb3IgSUNTIChZWVlZTU1ERFRISE1NU1NaKVxuICAgIGNvbnN0IGZvcm1hdElDU0RhdGUgPSAoZGF0ZTogRGF0ZSkgPT4ge1xuICAgICAgcmV0dXJuIGRhdGVcbiAgICAgICAgLnRvSVNPU3RyaW5nKClcbiAgICAgICAgLnJlcGxhY2UoL1stOl0vZywgJycpXG4gICAgICAgIC5yZXBsYWNlKC9cXC5cXGR7M30vLCAnJyk7XG4gICAgfTtcblxuICAgIGNvbnN0IHRpdGxlID0gYWxsU3BhY2VzID8gYFLDqXNlcnZhdGlvbiBkJ2VzcGFjZSBjb21tdW5gIDogYEVzcGFjZSBjb21tdW4gcsOpc2VydsOpYDtcblxuICAgIHJldHVybiBbXG4gICAgICAnQkVHSU46VkVWRU5UJyxcbiAgICAgIGBVSUQ6JHtib29raW5nLmlkfUBrb3Zlb2dlc3Rpb24uY29tYCxcbiAgICAgIGBEVFNUQU1QOiR7Zm9ybWF0SUNTRGF0ZShub3cpfWAsXG4gICAgICBgRFRTVEFSVDoke2Zvcm1hdElDU0RhdGUoc3RhcnREYXRlKX1gLFxuICAgICAgYERURU5EOiR7Zm9ybWF0SUNTRGF0ZShlbmREYXRlKX1gLFxuICAgICAgYFNVTU1BUlk6JHt0aXRsZX1gLFxuICAgICAgYERFU0NSSVBUSU9OOlLDqXNlcnZhdGlvbiBjb25maXJtw6llIHBvdXIgdW4gZXNwYWNlIGNvbW11bmAsXG4gICAgICAnU1RBVFVTOkNPTkZJUk1FRCcsXG4gICAgICAnRU5EOlZFVkVOVCcsXG4gICAgXS5qb2luKCdcXHJcXG4nKTtcbiAgfSk7XG5cbiAgY29uc3QgaWNzRm9vdGVyID0gJ0VORDpWQ0FMRU5EQVInO1xuXG4gIHJldHVybiBbaWNzSGVhZGVyLCAuLi5pY3NFdmVudHMsIGljc0Zvb3Rlcl0uam9pbignXFxyXFxuJyk7XG59XG5cbi8qKlxuICogQ29tbW9uIFNwYWNlcyBwYWdlIGNvbXBvbmVudCBmb3IgcmVzaWRlbnRzLlxuICovXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBDb21tb25TcGFjZXNQYWdlKCkge1xuICBjb25zdCB7IHVzZXIgfSA9IHVzZUF1dGgoKTtcbiAgY29uc3QgeyBsYW5ndWFnZSB9ID0gdXNlTGFuZ3VhZ2UoKTtcbiAgY29uc3QgeyB0b2FzdCB9ID0gdXNlVG9hc3QoKTtcbiAgY29uc3QgcXVlcnlDbGllbnQgPSB1c2VRdWVyeUNsaWVudCgpO1xuXG4gIGNvbnN0IFtzZWxlY3RlZFNwYWNlLCBzZXRTZWxlY3RlZFNwYWNlXSA9IHVzZVN0YXRlPENvbW1vblNwYWNlIHwgbnVsbD4obnVsbCk7XG4gIGNvbnN0IFtzZWxlY3RlZERhdGUsIHNldFNlbGVjdGVkRGF0ZV0gPSB1c2VTdGF0ZTxEYXRlPihuZXcgRGF0ZSgpKTtcbiAgY29uc3QgW2lzQm9va2luZ0RpYWxvZ09wZW4sIHNldElzQm9va2luZ0RpYWxvZ09wZW5dID0gdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBbZXhwYW5kZWRTcGFjZUlkLCBzZXRFeHBhbmRlZFNwYWNlSWRdID0gdXNlU3RhdGU8c3RyaW5nIHwgbnVsbD4obnVsbCk7XG4gIGNvbnN0IFtwcmVTZWxlY3RlZERhdGUsIHNldFByZVNlbGVjdGVkRGF0ZV0gPSB1c2VTdGF0ZTxEYXRlIHwgbnVsbD4obnVsbCk7XG5cbiAgLy8gRm9ybSBmb3IgYm9va2luZyBjcmVhdGlvblxuICBjb25zdCBmb3JtID0gdXNlRm9ybTxCb29raW5nRm9ybURhdGE+KHtcbiAgICByZXNvbHZlcjogem9kUmVzb2x2ZXIoYm9va2luZ0Zvcm1TY2hlbWEpLFxuICAgIGRlZmF1bHRWYWx1ZXM6IHtcbiAgICAgIGRhdGU6IG5ldyBEYXRlKCksXG4gICAgICBzdGFydFRpbWU6ICcwOTowMCcsXG4gICAgICBlbmRUaW1lOiAnMTA6MDAnLFxuICAgIH0sXG4gIH0pO1xuXG4gIC8vIEZldGNoIGNvbW1vbiBzcGFjZXMgaW4gdXNlcidzIGJ1aWxkaW5nc1xuICBjb25zdCB7IGRhdGE6IGNvbW1vblNwYWNlcyA9IFtdLCBpc0xvYWRpbmc6IHNwYWNlc0xvYWRpbmcgfSA9IHVzZVF1ZXJ5PENvbW1vblNwYWNlW10+KHtcbiAgICBxdWVyeUtleTogWycvYXBpL2NvbW1vbi1zcGFjZXMnXSxcbiAgICBlbmFibGVkOiAhIXVzZXIsXG4gIH0pO1xuXG4gIC8vIEZldGNoIGJvb2tpbmdzIGZvciBzZWxlY3RlZCBzcGFjZVxuICBjb25zdCB7IGRhdGE6IGJvb2tpbmdzID0gW10sIGlzTG9hZGluZzogYm9va2luZ3NMb2FkaW5nIH0gPSB1c2VRdWVyeTxCb29raW5nW10+KHtcbiAgICBxdWVyeUtleTogWycvYXBpL2NvbW1vbi1zcGFjZXMnLCBzZWxlY3RlZFNwYWNlPy5pZCwgJ2Jvb2tpbmdzJ10sXG4gICAgZW5hYmxlZDogISFzZWxlY3RlZFNwYWNlLFxuICB9KTtcblxuICAvLyBGZXRjaCBhbGwgdXNlcidzIGJvb2tpbmdzIGZvciBleHBvcnRcbiAgY29uc3QgeyBkYXRhOiB1c2VyQm9va2luZ3MgPSBbXSB9ID0gdXNlUXVlcnk8Qm9va2luZ1tdPih7XG4gICAgcXVlcnlLZXk6IFsnL2FwaS9jb21tb24tc3BhY2VzL215LWJvb2tpbmdzJ10sXG4gICAgZW5hYmxlZDogISF1c2VyLFxuICB9KTtcblxuICAvLyBDcmVhdGUgYm9va2luZyBtdXRhdGlvblxuICBjb25zdCBjcmVhdGVCb29raW5nTXV0YXRpb24gPSB1c2VNdXRhdGlvbih7XG4gICAgbXV0YXRpb25GbjogYXN5bmMgKGRhdGE6IEJvb2tpbmdGb3JtRGF0YSkgPT4ge1xuICAgICAgaWYgKCFzZWxlY3RlZFNwYWNlKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignTm8gc3BhY2Ugc2VsZWN0ZWQnKTtcbiAgICAgIH1cblxuICAgICAgLy8gTW9yZSByb2J1c3QgZGF0ZSBoYW5kbGluZyB0byBhdm9pZCB0aW1lem9uZSBpc3N1ZXNcbiAgICAgIGNvbnN0IGJhc2VEYXRlID0gZGF0YS5kYXRlIGluc3RhbmNlb2YgRGF0ZSA/IGRhdGEuZGF0ZSA6IG5ldyBEYXRlKGRhdGEuZGF0ZSk7XG5cbiAgICAgIC8vIENyZWF0ZSBzdGFydCB0aW1lIGJ5IHNldHRpbmcgdGhlIHRpbWUgb24gYSBkYXRlIG9iamVjdCBpbiBsb2NhbCB0aW1lem9uZVxuICAgICAgY29uc3Qgc3RhcnREYXRlVGltZSA9IG5ldyBEYXRlKFxuICAgICAgICBiYXNlRGF0ZS5nZXRGdWxsWWVhcigpLFxuICAgICAgICBiYXNlRGF0ZS5nZXRNb250aCgpLFxuICAgICAgICBiYXNlRGF0ZS5nZXREYXRlKClcbiAgICAgICk7XG4gICAgICBjb25zdCBbc3RhcnRIb3VyLCBzdGFydE1pbnV0ZV0gPSBkYXRhLnN0YXJ0VGltZS5zcGxpdCgnOicpLm1hcChOdW1iZXIpO1xuICAgICAgc3RhcnREYXRlVGltZS5zZXRIb3VycyhzdGFydEhvdXIsIHN0YXJ0TWludXRlLCAwLCAwKTtcblxuICAgICAgLy8gQ3JlYXRlIGVuZCB0aW1lIHNpbWlsYXJseVxuICAgICAgY29uc3QgZW5kRGF0ZVRpbWUgPSBuZXcgRGF0ZShiYXNlRGF0ZS5nZXRGdWxsWWVhcigpLCBiYXNlRGF0ZS5nZXRNb250aCgpLCBiYXNlRGF0ZS5nZXREYXRlKCkpO1xuICAgICAgY29uc3QgW2VuZEhvdXIsIGVuZE1pbnV0ZV0gPSBkYXRhLmVuZFRpbWUuc3BsaXQoJzonKS5tYXAoTnVtYmVyKTtcbiAgICAgIGVuZERhdGVUaW1lLnNldEhvdXJzKGVuZEhvdXIsIGVuZE1pbnV0ZSwgMCwgMCk7XG5cbiAgICAgIC8vIEJvb2tpbmcgY3JlYXRpb24gaGFuZGxpbmdcblxuICAgICAgcmV0dXJuIGFwaVJlcXVlc3QoJ1BPU1QnLCBgL2FwaS9jb21tb24tc3BhY2VzLyR7c2VsZWN0ZWRTcGFjZS5pZH0vYm9va2luZ3NgLCB7XG4gICAgICAgIHN0YXJ0X3RpbWU6IHN0YXJ0RGF0ZVRpbWUudG9JU09TdHJpbmcoKSxcbiAgICAgICAgZW5kX3RpbWU6IGVuZERhdGVUaW1lLnRvSVNPU3RyaW5nKCksXG4gICAgICB9KTtcbiAgICB9LFxuICAgIG9uU3VjY2VzczogKCkgPT4ge1xuICAgICAgcXVlcnlDbGllbnQuaW52YWxpZGF0ZVF1ZXJpZXMoeyBxdWVyeUtleTogWycvYXBpL2NvbW1vbi1zcGFjZXMnXSB9KTtcbiAgICAgIHRvYXN0KHtcbiAgICAgICAgdGl0bGU6ICdSw6lzZXJ2YXRpb24gY29uZmlybcOpZScsXG4gICAgICAgIGRlc2NyaXB0aW9uOiAnVm90cmUgcsOpc2VydmF0aW9uIGEgw6l0w6kgY3LDqcOpZSBhdmVjIHN1Y2PDqHMuJyxcbiAgICAgIH0pO1xuICAgICAgc2V0SXNCb29raW5nRGlhbG9nT3BlbihmYWxzZSk7XG4gICAgICBmb3JtLnJlc2V0KCk7XG4gICAgfSxcbiAgICBvbkVycm9yOiAoZXJyb3I6IGFueSkgPT4ge1xuICAgICAgdG9hc3Qoe1xuICAgICAgICB0aXRsZTogJ0VycmV1ciBkZSByw6lzZXJ2YXRpb24nLFxuICAgICAgICBkZXNjcmlwdGlvbjpcbiAgICAgICAgICBlcnJvci5tZXNzYWdlIHx8ICdVbmUgZXJyZXVyIGVzdCBzdXJ2ZW51ZSBsb3JzIGRlIGxhIGNyw6lhdGlvbiBkZSBsYSByw6lzZXJ2YXRpb24uJyxcbiAgICAgICAgdmFyaWFudDogJ2Rlc3RydWN0aXZlJyxcbiAgICAgIH0pO1xuICAgIH0sXG4gIH0pO1xuXG4gIC8vIEdldCBib29raW5ncyBmb3Igc2VsZWN0ZWQgZGF0ZVxuICBjb25zdCBib29raW5nc0ZvckRhdGUgPSB1c2VNZW1vKCgpID0+IHtcbiAgICBpZiAoIWJvb2tpbmdzIHx8ICFzZWxlY3RlZERhdGUpIHtcbiAgICAgIHJldHVybiBbXTtcbiAgICB9XG5cbiAgICByZXR1cm4gYm9va2luZ3MuZmlsdGVyKChib29raW5nOiBCb29raW5nKSA9PiB7XG4gICAgICBjb25zdCBib29raW5nRGF0ZSA9IHBhcnNlSVNPKGJvb2tpbmcuc3RhcnRUaW1lKTtcbiAgICAgIHJldHVybiBpc1NhbWVEYXkoYm9va2luZ0RhdGUsIHNlbGVjdGVkRGF0ZSk7XG4gICAgfSk7XG4gIH0sIFtib29raW5ncywgc2VsZWN0ZWREYXRlXSk7XG5cbiAgLy8gR2V0IHRpbWUgc2xvdHMgYXZhaWxhYmlsaXR5XG4gIGNvbnN0IHRpbWVTbG90cyA9IHVzZU1lbW8oKCkgPT4ge1xuICAgIGNvbnN0IHNsb3RzID0gW107XG4gICAgZm9yIChsZXQgaG91ciA9IDY7IGhvdXIgPD0gMjI7IGhvdXIrKykge1xuICAgICAgc2xvdHMucHVzaChgJHtob3VyLnRvU3RyaW5nKCkucGFkU3RhcnQoMiwgJzAnKX06MDBgKTtcbiAgICAgIHNsb3RzLnB1c2goYCR7aG91ci50b1N0cmluZygpLnBhZFN0YXJ0KDIsICcwJyl9OjMwYCk7XG4gICAgfVxuICAgIHJldHVybiBzbG90cztcbiAgfSwgW10pO1xuXG4gIC8vIEhlbHBlciBmdW5jdGlvbiB0byBjaGVjayBpZiBhIGRheSBpcyBhdmFpbGFibGUgKG1vdmVkIGZyb20gQm9va2luZ0NhbGVuZGFyKVxuICBjb25zdCBpc0RheUF2YWlsYWJsZSA9IChkYXk6IERhdGUpID0+IHtcbiAgICBpZiAoIXNlbGVjdGVkU3BhY2UpIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICAvLyBQYXN0IGRhdGVzIGFyZSBub3QgYXZhaWxhYmxlXG4gICAgY29uc3QgdG9kYXkgPSBuZXcgRGF0ZSgpO1xuICAgIHRvZGF5LnNldEhvdXJzKDAsIDAsIDAsIDApO1xuICAgIGNvbnN0IGNoZWNrRGF5ID0gbmV3IERhdGUoZGF5KTtcbiAgICBjaGVja0RheS5zZXRIb3VycygwLCAwLCAwLCAwKTtcbiAgICBcbiAgICBpZiAoY2hlY2tEYXkgPCB0b2RheSkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIC8vIENoZWNrIGlmIGRheSBmYWxscyB3aXRoaW4gYW55IHVuYXZhaWxhYmxlIHBlcmlvZHNcbiAgICBpZiAoc2VsZWN0ZWRTcGFjZS51bmF2YWlsYWJsZVBlcmlvZHMgJiYgQXJyYXkuaXNBcnJheShzZWxlY3RlZFNwYWNlLnVuYXZhaWxhYmxlUGVyaW9kcykpIHtcbiAgICAgIGZvciAoY29uc3QgcGVyaW9kIG9mIHNlbGVjdGVkU3BhY2UudW5hdmFpbGFibGVQZXJpb2RzKSB7XG4gICAgICAgIGNvbnN0IHN0YXJ0RGF0ZSA9IG5ldyBEYXRlKHBlcmlvZC5zdGFydERhdGUpO1xuICAgICAgICBjb25zdCBlbmREYXRlID0gbmV3IERhdGUocGVyaW9kLmVuZERhdGUpO1xuICAgICAgICBzdGFydERhdGUuc2V0SG91cnMoMCwgMCwgMCwgMCk7XG4gICAgICAgIGVuZERhdGUuc2V0SG91cnMoMjMsIDU5LCA1OSwgOTk5KTtcbiAgICAgICAgXG4gICAgICAgIGlmIChjaGVja0RheSA+PSBzdGFydERhdGUgJiYgY2hlY2tEYXkgPD0gZW5kRGF0ZSkge1xuICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIC8vIENoZWNrIG9wZW5pbmcgaG91cnMgaWYgYXZhaWxhYmxlXG4gICAgaWYgKHNlbGVjdGVkU3BhY2Uub3BlbmluZ0hvdXJzICYmIEFycmF5LmlzQXJyYXkoc2VsZWN0ZWRTcGFjZS5vcGVuaW5nSG91cnMpKSB7XG4gICAgICBjb25zdCBkYXlOYW1lID0gZGF5LnRvTG9jYWxlRGF0ZVN0cmluZygnZW4tVVMnLCB7IHdlZWtkYXk6ICdsb25nJyB9KS50b0xvd2VyQ2FzZSgpO1xuICAgICAgY29uc3QgdG9kYXlIb3VycyA9IHNlbGVjdGVkU3BhY2Uub3BlbmluZ0hvdXJzLmZpbmQoKGgpID0+IGguZGF5LnRvTG93ZXJDYXNlKCkgPT09IGRheU5hbWUpO1xuICAgICAgXG4gICAgICAvLyBJZiBubyBob3VycyBkZWZpbmVkIGZvciB0aGlzIGRheSwgaXQncyB1bmF2YWlsYWJsZVxuICAgICAgaWYgKCF0b2RheUhvdXJzKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH1cbiAgICAgIFxuICAgICAgLy8gSWYgZXhwbGljaXRseSBtYXJrZWQgYXMgY2xvc2VkXG4gICAgICBpZiAodG9kYXlIb3Vycy5pc09wZW4gPT09IGZhbHNlKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gdHJ1ZTtcbiAgfTtcblxuICAvLyBDaGVjayBpZiB0aW1lIHNsb3QgaXMgYXZhaWxhYmxlXG4gIGNvbnN0IGlzVGltZVNsb3RBdmFpbGFibGUgPSAodGltZTogc3RyaW5nLCBkdXJhdGlvbjogbnVtYmVyID0gNjApID0+IHtcbiAgICBpZiAoIXNlbGVjdGVkU3BhY2UgfHwgIXNlbGVjdGVkRGF0ZSkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIGNvbnN0IFtob3VyLCBtaW51dGVdID0gdGltZS5zcGxpdCgnOicpLm1hcChOdW1iZXIpO1xuICAgIGNvbnN0IHNsb3RTdGFydCA9IG5ldyBEYXRlKHNlbGVjdGVkRGF0ZSk7XG4gICAgc2xvdFN0YXJ0LnNldEhvdXJzKGhvdXIsIG1pbnV0ZSwgMCwgMCk7XG5cbiAgICBjb25zdCBzbG90RW5kID0gbmV3IERhdGUoc2xvdFN0YXJ0KTtcbiAgICBzbG90RW5kLnNldE1pbnV0ZXMoc2xvdEVuZC5nZXRNaW51dGVzKCkgKyBkdXJhdGlvbik7XG5cbiAgICAvLyBDaGVjayBpZiBkYXkgaXMgYXZhaWxhYmxlIGZpcnN0ICh1c2VzIG91ciBlbmhhbmNlZCBhdmFpbGFiaWxpdHkgbG9naWMpXG4gICAgaWYgKCFpc0RheUF2YWlsYWJsZShzZWxlY3RlZERhdGUpKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgLy8gQ2hlY2sgb3BlbmluZyBob3Vyc1xuICAgIGlmIChzZWxlY3RlZFNwYWNlLm9wZW5pbmdIb3VycyAmJiBBcnJheS5pc0FycmF5KHNlbGVjdGVkU3BhY2Uub3BlbmluZ0hvdXJzKSkge1xuICAgICAgY29uc3QgZGF5TmFtZSA9IHNlbGVjdGVkRGF0ZS50b0xvY2FsZURhdGVTdHJpbmcoJ2VuLVVTJywgeyB3ZWVrZGF5OiAnbG9uZycgfSkudG9Mb3dlckNhc2UoKTtcbiAgICAgIGNvbnN0IHRvZGF5SG91cnMgPSBzZWxlY3RlZFNwYWNlLm9wZW5pbmdIb3Vycy5maW5kKChoKSA9PiBoLmRheS50b0xvd2VyQ2FzZSgpID09PSBkYXlOYW1lKTtcblxuICAgICAgaWYgKCF0b2RheUhvdXJzIHx8IHRvZGF5SG91cnMuaXNPcGVuID09PSBmYWxzZSkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IG9wZW5UaW1lID0gcGFyc2UodG9kYXlIb3Vycy5vcGVuLCAnSEg6bW0nLCBzZWxlY3RlZERhdGUpO1xuICAgICAgY29uc3QgY2xvc2VUaW1lID0gcGFyc2UodG9kYXlIb3Vycy5jbG9zZSwgJ0hIOm1tJywgc2VsZWN0ZWREYXRlKTtcblxuICAgICAgLy8gQ2hlY2sgaWYgc2xvdCBpcyB3aXRoaW4gb3BlbmluZyBob3Vyc1xuICAgICAgaWYgKFxuICAgICAgICAhaXNXaXRoaW5JbnRlcnZhbChzbG90U3RhcnQsIHsgc3RhcnQ6IG9wZW5UaW1lLCBlbmQ6IGNsb3NlVGltZSB9KSB8fFxuICAgICAgICAhaXNXaXRoaW5JbnRlcnZhbChzbG90RW5kLCB7IHN0YXJ0OiBvcGVuVGltZSwgZW5kOiBjbG9zZVRpbWUgfSlcbiAgICAgICkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9XG5cbiAgICAgIC8vIENoZWNrIGlmIHNsb3QgY29uZmxpY3RzIHdpdGggYW55IGJyZWFrc1xuICAgICAgaWYgKHRvZGF5SG91cnMuYnJlYWtzICYmIEFycmF5LmlzQXJyYXkodG9kYXlIb3Vycy5icmVha3MpKSB7XG4gICAgICAgIGZvciAoY29uc3QgYnJlYWtQZXJpb2Qgb2YgdG9kYXlIb3Vycy5icmVha3MpIHtcbiAgICAgICAgICBjb25zdCBicmVha1N0YXJ0ID0gcGFyc2UoYnJlYWtQZXJpb2Quc3RhcnQsICdISDptbScsIHNlbGVjdGVkRGF0ZSk7XG4gICAgICAgICAgY29uc3QgYnJlYWtFbmQgPSBwYXJzZShicmVha1BlcmlvZC5lbmQsICdISDptbScsIHNlbGVjdGVkRGF0ZSk7XG5cbiAgICAgICAgICAvLyBDaGVjayBpZiBzbG90IG92ZXJsYXBzIHdpdGggYnJlYWsgcGVyaW9kXG4gICAgICAgICAgaWYgKFxuICAgICAgICAgICAgKHNsb3RTdGFydCA+PSBicmVha1N0YXJ0ICYmIHNsb3RTdGFydCA8IGJyZWFrRW5kKSB8fFxuICAgICAgICAgICAgKHNsb3RFbmQgPiBicmVha1N0YXJ0ICYmIHNsb3RFbmQgPD0gYnJlYWtFbmQpIHx8XG4gICAgICAgICAgICAoc2xvdFN0YXJ0IDw9IGJyZWFrU3RhcnQgJiYgc2xvdEVuZCA+PSBicmVha0VuZClcbiAgICAgICAgICApIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBDaGVjayBjb25mbGljdHMgd2l0aCBleGlzdGluZyBib29raW5nc1xuICAgIHJldHVybiAhYm9va2luZ3NGb3JEYXRlLnNvbWUoKGJvb2tpbmc6IEJvb2tpbmcpID0+IHtcbiAgICAgIGNvbnN0IGJvb2tpbmdTdGFydCA9IHBhcnNlSVNPKGJvb2tpbmcuc3RhcnRUaW1lKTtcbiAgICAgIGNvbnN0IGJvb2tpbmdFbmQgPSBwYXJzZUlTTyhib29raW5nLmVuZFRpbWUpO1xuXG4gICAgICByZXR1cm4gKFxuICAgICAgICAoc2xvdFN0YXJ0ID49IGJvb2tpbmdTdGFydCAmJiBzbG90U3RhcnQgPCBib29raW5nRW5kKSB8fFxuICAgICAgICAoc2xvdEVuZCA+IGJvb2tpbmdTdGFydCAmJiBzbG90RW5kIDw9IGJvb2tpbmdFbmQpIHx8XG4gICAgICAgIChzbG90U3RhcnQgPD0gYm9va2luZ1N0YXJ0ICYmIHNsb3RFbmQgPj0gYm9va2luZ0VuZClcbiAgICAgICk7XG4gICAgfSk7XG4gIH07XG5cbiAgLy8gRXhwb3J0IGZ1bmN0aW9uc1xuICBjb25zdCBleHBvcnRNeUJvb2tpbmdzID0gKCkgPT4ge1xuICAgIGNvbnN0IGljc0NvbnRlbnQgPSBnZW5lcmF0ZUlDUyh1c2VyQm9va2luZ3MsIGZhbHNlKTtcbiAgICBjb25zdCBibG9iID0gbmV3IEJsb2IoW2ljc0NvbnRlbnRdLCB7IHR5cGU6ICd0ZXh0L2NhbGVuZGFyO2NoYXJzZXQ9dXRmLTgnIH0pO1xuICAgIGNvbnN0IGxpbmsgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdhJyk7XG4gICAgbGluay5ocmVmID0gVVJMLmNyZWF0ZU9iamVjdFVSTChibG9iKTtcbiAgICBsaW5rLmRvd25sb2FkID0gYG1lcy1yZXNlcnZhdGlvbnMtJHtmb3JtYXQobmV3IERhdGUoKSwgJ3l5eXktTU0tZGQnKX0uaWNzYDtcbiAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKGxpbmspO1xuICAgIGxpbmsuY2xpY2soKTtcbiAgICBkb2N1bWVudC5ib2R5LnJlbW92ZUNoaWxkKGxpbmspO1xuICB9O1xuXG4gIGNvbnN0IGV4cG9ydEFsbEJvb2tpbmdzID0gKCkgPT4ge1xuICAgIGlmICghc2VsZWN0ZWRTcGFjZSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGNvbnN0IGljc0NvbnRlbnQgPSBnZW5lcmF0ZUlDUyhib29raW5ncywgdHJ1ZSk7XG4gICAgY29uc3QgYmxvYiA9IG5ldyBCbG9iKFtpY3NDb250ZW50XSwgeyB0eXBlOiAndGV4dC9jYWxlbmRhcjtjaGFyc2V0PXV0Zi04JyB9KTtcbiAgICBjb25zdCBsaW5rID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYScpO1xuICAgIGxpbmsuaHJlZiA9IFVSTC5jcmVhdGVPYmplY3RVUkwoYmxvYik7XG4gICAgbGluay5kb3dubG9hZCA9IGBhZ2VuZGEtJHtzZWxlY3RlZFNwYWNlLm5hbWUudG9Mb3dlckNhc2UoKS5yZXBsYWNlKC9cXHMrL2csICctJyl9LSR7Zm9ybWF0KG5ldyBEYXRlKCksICd5eXl5LU1NLWRkJyl9Lmljc2A7XG4gICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChsaW5rKTtcbiAgICBsaW5rLmNsaWNrKCk7XG4gICAgZG9jdW1lbnQuYm9keS5yZW1vdmVDaGlsZChsaW5rKTtcbiAgfTtcblxuICBjb25zdCBvblN1Ym1pdCA9IChkYXRhOiBCb29raW5nRm9ybURhdGEpID0+IHtcbiAgICBjcmVhdGVCb29raW5nTXV0YXRpb24ubXV0YXRlKGRhdGEpO1xuICB9O1xuXG4gIGNvbnN0IGhhbmRsZVNwYWNlQ2xpY2sgPSAoc3BhY2U6IENvbW1vblNwYWNlKSA9PiB7XG4gICAgc2V0U2VsZWN0ZWRTcGFjZShzcGFjZSk7XG4gICAgc2V0RXhwYW5kZWRTcGFjZUlkKGV4cGFuZGVkU3BhY2VJZCA9PT0gc3BhY2UuaWQgPyBudWxsIDogc3BhY2UuaWQpO1xuICB9O1xuXG4gIGNvbnN0IGhhbmRsZURhdGVDbGljayA9IChkYXRlOiBEYXRlKSA9PiB7XG4gICAgc2V0UHJlU2VsZWN0ZWREYXRlKGRhdGUpO1xuICAgIGZvcm0uc2V0VmFsdWUoJ2RhdGUnLCBkYXRlKTtcbiAgICBzZXRJc0Jvb2tpbmdEaWFsb2dPcGVuKHRydWUpO1xuICB9O1xuXG4gIGNvbnN0IGhhbmRsZU5ld0Jvb2tpbmcgPSAoc3BhY2U6IENvbW1vblNwYWNlLCBkYXRlPzogRGF0ZSkgPT4ge1xuICAgIHNldFNlbGVjdGVkU3BhY2Uoc3BhY2UpO1xuICAgIGlmIChkYXRlKSB7XG4gICAgICBzZXRQcmVTZWxlY3RlZERhdGUoZGF0ZSk7XG4gICAgICBmb3JtLnNldFZhbHVlKCdkYXRlJywgZGF0ZSk7XG4gICAgfVxuICAgIHNldElzQm9va2luZ0RpYWxvZ09wZW4odHJ1ZSk7XG4gIH07XG5cbiAgcmV0dXJuIChcbiAgICA8ZGl2IGNsYXNzTmFtZT0nZmxleC0xIGZsZXggZmxleC1jb2wgb3ZlcmZsb3ctaGlkZGVuJyBkYXRhLXRlc3RpZD0nY29tbW9uLXNwYWNlcy1wYWdlJz5cbiAgICAgIDxIZWFkZXJcbiAgICAgICAgdGl0bGU9e2xhbmd1YWdlID09PSAnZnInID8gJ0VzcGFjZXMgQ29tbXVucycgOiAnQ29tbW9uIFNwYWNlcyd9XG4gICAgICAgIHN1YnRpdGxlPXtsYW5ndWFnZSA9PT0gJ2ZyJyA/ICdSw6lzZXJ2ZXogdm9zIGVzcGFjZXMgY29tbXVucycgOiAnQm9vayB5b3VyIGNvbW1vbiBzcGFjZXMnfVxuICAgICAgLz5cblxuICAgICAgPGRpdiBjbGFzc05hbWU9J2ZsZXgtMSBvdmVyZmxvdy1hdXRvIHAtNic+XG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPSdtYXgtdy03eGwgbXgtYXV0byBzcGFjZS15LTYnPlxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT0nc3BhY2UteS02Jz5cbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0nZmxleCBpdGVtcy1jZW50ZXIganVzdGlmeS1iZXR3ZWVuJz5cbiAgICAgICAgICAgIDxoMiBjbGFzc05hbWU9J3RleHQtMnhsIGZvbnQtYm9sZCB0ZXh0LWdyYXktOTAwJyBkYXRhLXRlc3RpZD0nc3BhY2VzLWxpc3QtdGl0bGUnPlxuICAgICAgICAgICAgICB7bGFuZ3VhZ2UgPT09ICdmcicgPyAnRXNwYWNlcyBEaXNwb25pYmxlcycgOiAnQXZhaWxhYmxlIFNwYWNlcyd9XG4gICAgICAgICAgICA8L2gyPlxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9J2ZsZXggaXRlbXMtY2VudGVyIGdhcC0yJz5cbiAgICAgICAgICAgICAgPEJ1dHRvblxuICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+XG4gICAgICAgICAgICAgICAgICB3aW5kb3cub3BlbihcbiAgICAgICAgICAgICAgICAgICAgJ2h0dHBzOi8vY2FsZW5kYXIuZ29vZ2xlLmNvbS9jYWxlbmRhci91LzAvci9zZXR0aW5ncy9hZGRieXVybCcsXG4gICAgICAgICAgICAgICAgICAgICdfYmxhbmsnXG4gICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHZhcmlhbnQ9J291dGxpbmUnXG4gICAgICAgICAgICAgICAgc2l6ZT0nc20nXG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lPSdmbGV4IGl0ZW1zLWNlbnRlciBnYXAtMidcbiAgICAgICAgICAgICAgICBkYXRhLXRlc3RpZD0nYnV0dG9uLWxpbmstY2FsZW5kYXInXG4gICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICA8TGluayBjbGFzc05hbWU9J3ctNCBoLTQnIC8+XG4gICAgICAgICAgICAgICAge2xhbmd1YWdlID09PSAnZnInID8gJ0xpZXIgY2FsZW5kcmllcicgOiAnTGluayBjYWxlbmRhcid9XG4gICAgICAgICAgICAgIDwvQnV0dG9uPlxuICAgICAgICAgICAgICA8QnV0dG9uXG4gICAgICAgICAgICAgICAgb25DbGljaz17ZXhwb3J0TXlCb29raW5nc31cbiAgICAgICAgICAgICAgICB2YXJpYW50PSdvdXRsaW5lJ1xuICAgICAgICAgICAgICAgIHNpemU9J3NtJ1xuICAgICAgICAgICAgICAgIGNsYXNzTmFtZT0nZmxleCBpdGVtcy1jZW50ZXIgZ2FwLTInXG4gICAgICAgICAgICAgICAgZGF0YS10ZXN0aWQ9J2J1dHRvbi1leHBvcnQtbXktYm9va2luZ3MnXG4gICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICA8RG93bmxvYWQgY2xhc3NOYW1lPSd3LTQgaC00JyAvPlxuICAgICAgICAgICAgICAgIHtsYW5ndWFnZSA9PT0gJ2ZyJ1xuICAgICAgICAgICAgICAgICAgPyAnRXhwb3J0ZXIgbWVzIHLDqXNlcnZhdGlvbnMgKC5pY3MpJ1xuICAgICAgICAgICAgICAgICAgOiAnRXhwb3J0IG15IGJvb2tpbmdzICguaWNzKSd9XG4gICAgICAgICAgICAgIDwvQnV0dG9uPlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgPC9kaXY+XG5cbiAgICAgICAgICB7c3BhY2VzTG9hZGluZyA/IChcbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSdzcGFjZS15LTQnPlxuICAgICAgICAgICAgICB7Wy4uLkFycmF5KDMpXS5tYXAoKF8sIGkpID0+IChcbiAgICAgICAgICAgICAgICA8ZGl2IGtleT17aX0gY2xhc3NOYW1lPSdoLTMyIGJnLWdyYXktMjAwIHJvdW5kZWQtbGcgYW5pbWF0ZS1wdWxzZScgLz5cbiAgICAgICAgICAgICAgKSl9XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICApIDogKFxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9J3NwYWNlLXktNCcgZGF0YS10ZXN0aWQ9J3NwYWNlcy1saXN0Jz5cbiAgICAgICAgICAgICAgeyhjb21tb25TcGFjZXMgYXMgQ29tbW9uU3BhY2VbXSkubWFwKChzcGFjZTogQ29tbW9uU3BhY2UpID0+IChcbiAgICAgICAgICAgICAgICA8ZGl2IGtleT17c3BhY2UuaWR9PlxuICAgICAgICAgICAgICAgICAgPENhcmRcbiAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPXtgY3Vyc29yLXBvaW50ZXIgdHJhbnNpdGlvbi1hbGwgZHVyYXRpb24tMjAwIGhvdmVyOnNoYWRvdy1tZCAke1xuICAgICAgICAgICAgICAgICAgICAgIGV4cGFuZGVkU3BhY2VJZCA9PT0gc3BhY2UuaWQgPyAncmluZy0yIHJpbmcta292ZW8tbmF2eSBiZy1rb3Zlby1saWdodC8xMCcgOiAnJ1xuICAgICAgICAgICAgICAgICAgICB9YH1cbiAgICAgICAgICAgICAgICAgICAgb25DbGljaz17KCkgPT4gaGFuZGxlU3BhY2VDbGljayhzcGFjZSl9XG4gICAgICAgICAgICAgICAgICAgIGRhdGEtdGVzdGlkPXtgc3BhY2UtY2FyZC0ke3NwYWNlLmlkfWB9XG4gICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgIDxDYXJkSGVhZGVyIGNsYXNzTmFtZT0ncGItMyc+XG4gICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9J2ZsZXggaXRlbXMtc3RhcnQganVzdGlmeS1iZXR3ZWVuJz5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxDYXJkVGl0bGUgY2xhc3NOYW1lPSdmbGV4IGl0ZW1zLWNlbnRlciBnYXAtMiB0ZXh0LWxnJz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPEJ1aWxkaW5nMiBjbGFzc05hbWU9J3ctNSBoLTUgdGV4dC1rb3Zlby1uYXZ5JyAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICB7c3BhY2UubmFtZX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAge2V4cGFuZGVkU3BhY2VJZCA9PT0gc3BhY2UuaWQgPyAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPENoZXZyb25VcCBjbGFzc05hbWU9J3ctNCBoLTQgdGV4dC1ncmF5LTUwMCcgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgKSA6IChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8Q2hldnJvbkRvd24gY2xhc3NOYW1lPSd3LTQgaC00IHRleHQtZ3JheS01MDAnIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgICAgICA8L0NhcmRUaXRsZT5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSdmbGV4IGl0ZW1zLWNlbnRlciBnYXAtMic+XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHtzcGFjZS5pc1Jlc2VydmFibGUgPyAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPEJhZGdlIHZhcmlhbnQ9J3NlY29uZGFyeScgY2xhc3NOYW1lPSdiZy1ncmVlbi0xMDAgdGV4dC1ncmVlbi04MDAnPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2xhbmd1YWdlID09PSAnZnInID8gJ1LDqXNlcnZhYmxlJyA6ICdCb29rYWJsZSd9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9CYWRnZT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgKSA6IChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8QmFkZ2UgdmFyaWFudD0nc2Vjb25kYXJ5JyBjbGFzc05hbWU9J2JnLWdyYXktMTAwIHRleHQtZ3JheS02MDAnPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2xhbmd1YWdlID09PSAnZnInID8gJ05vbiBSw6lzZXJ2YWJsZScgOiAnTm9uIEJvb2thYmxlJ31cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L0JhZGdlPlxuICAgICAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgIDwvQ2FyZEhlYWRlcj5cblxuICAgICAgICAgICAgICAgICAgICA8Q2FyZENvbnRlbnQgY2xhc3NOYW1lPSdzcGFjZS15LTMnPlxuICAgICAgICAgICAgICAgICAgICAgIHtzcGFjZS5kZXNjcmlwdGlvbiAmJiAoXG4gICAgICAgICAgICAgICAgICAgICAgICA8cFxuICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9J3RleHQtZ3JheS02MDAgdGV4dC1zbSdcbiAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YS10ZXN0aWQ9e2BzcGFjZS1kZXNjcmlwdGlvbi0ke3NwYWNlLmlkfWB9XG4gICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHtzcGFjZS5kZXNjcmlwdGlvbn1cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvcD5cbiAgICAgICAgICAgICAgICAgICAgICApfVxuXG4gICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9J2ZsZXggaXRlbXMtY2VudGVyIGdhcC00IHRleHQtc20gdGV4dC1ncmF5LTUwMCc+XG4gICAgICAgICAgICAgICAgICAgICAgICB7c3BhY2UuY2FwYWNpdHkgJiYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0nZmxleCBpdGVtcy1jZW50ZXIgZ2FwLTEnPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxVc2VycyBjbGFzc05hbWU9J3ctNCBoLTQnIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gZGF0YS10ZXN0aWQ9e2BzcGFjZS1jYXBhY2l0eS0ke3NwYWNlLmlkfWB9PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge3NwYWNlLmNhcGFjaXR5fSB7bGFuZ3VhZ2UgPT09ICdmcicgPyAncGVyc29ubmVzIG1heCcgOiAncGVvcGxlIG1heCd9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9zcGFuPlxuICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG5cbiAgICAgICAgICAgICAgICAgICAgICB7c3BhY2Uub3BlbmluZ0hvdXJzICYmIHNwYWNlLm9wZW5pbmdIb3Vycy5sZW5ndGggPiAwICYmIChcbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSdtdC0zJz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPGg0IGNsYXNzTmFtZT0nZm9udC1tZWRpdW0gdGV4dC1zbSB0ZXh0LWdyYXktNzAwIG1iLTIgZmxleCBpdGVtcy1jZW50ZXIgZ2FwLTEnPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxDbG9jayBjbGFzc05hbWU9J3ctNCBoLTQnIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge2xhbmd1YWdlID09PSAnZnInID8gXCJIZXVyZXMgZCdvdXZlcnR1cmVcIiA6ICdPcGVuaW5nIEhvdXJzJ31cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPC9oND5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT0nZ3JpZCBncmlkLWNvbHMtMSBnYXAtMSB0ZXh0LXhzIHRleHQtZ3JheS02MDAnXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YS10ZXN0aWQ9e2BzcGFjZS1ob3Vycy0ke3NwYWNlLmlkfWB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7c3BhY2Uub3BlbmluZ0hvdXJzLm1hcCgoaG91cnMsIGlkeCkgPT4gKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBrZXk9e2lkeH0gY2xhc3NOYW1lPSdmbGV4IGp1c3RpZnktYmV0d2Vlbic+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT0nY2FwaXRhbGl6ZSc+e2hvdXJzLmRheX08L3NwYW4+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtob3Vycy5vcGVufSAtIHtob3Vycy5jbG9zZX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9zcGFuPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKSl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgKX1cblxuICAgICAgICAgICAgICAgICAgICAgIHtzcGFjZS5ib29raW5nUnVsZXMgJiYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9J210LTMnPlxuICAgICAgICAgICAgICAgICAgICAgICAgICA8aDQgY2xhc3NOYW1lPSdmb250LW1lZGl1bSB0ZXh0LXNtIHRleHQtZ3JheS03MDAgbWItMSBmbGV4IGl0ZW1zLWNlbnRlciBnYXAtMSc+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPEZpbGVUZXh0IGNsYXNzTmFtZT0ndy00IGgtNCcgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7bGFuZ3VhZ2UgPT09ICdmcicgPyAnUsOoZ2xlcyBkZSByw6lzZXJ2YXRpb24nIDogJ0Jvb2tpbmcgUnVsZXMnfVxuICAgICAgICAgICAgICAgICAgICAgICAgICA8L2g0PlxuICAgICAgICAgICAgICAgICAgICAgICAgICA8cFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT0ndGV4dC14cyB0ZXh0LWdyYXktNjAwJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGEtdGVzdGlkPXtgc3BhY2UtcnVsZXMtJHtzcGFjZS5pZH1gfVxuICAgICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge3NwYWNlLmJvb2tpbmdSdWxlc31cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPC9wPlxuICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgPC9DYXJkQ29udGVudD5cbiAgICAgICAgICAgICAgICAgIDwvQ2FyZD5cblxuICAgICAgICAgICAgICAgICAgey8qIElubGluZSBDYWxlbmRhciAqL31cbiAgICAgICAgICAgICAgICAgIHtleHBhbmRlZFNwYWNlSWQgPT09IHNwYWNlLmlkICYmIChcbiAgICAgICAgICAgICAgICAgICAgPD5cbiAgICAgICAgICAgICAgICAgICAgICA8Q29tbW9uU3BhY2VDYWxlbmRhclxuICAgICAgICAgICAgICAgICAgICAgICAgc3BhY2U9e3NwYWNlfVxuICAgICAgICAgICAgICAgICAgICAgICAgb25FeHBvcnQ9e2V4cG9ydEFsbEJvb2tpbmdzfVxuICAgICAgICAgICAgICAgICAgICAgICAgb25OZXdCb29raW5nPXsoZGF0ZSkgPT4gaGFuZGxlTmV3Qm9va2luZyhzcGFjZSwgZGF0ZSl9XG4gICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9J210LTQnXG4gICAgICAgICAgICAgICAgICAgICAgLz5cblxuICAgICAgICAgICAgICAgICAgICAgIHsvKiBCb29raW5nIERpYWxvZyAqL31cbiAgICAgICAgICAgICAgICAgICAgICB7c3BhY2UuaXNSZXNlcnZhYmxlICYmIChcbiAgICAgICAgICAgICAgICAgICAgICAgIDxEaWFsb2cgb3Blbj17aXNCb29raW5nRGlhbG9nT3Blbn0gb25PcGVuQ2hhbmdlPXtzZXRJc0Jvb2tpbmdEaWFsb2dPcGVufT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPERpYWxvZ0NvbnRlbnRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9J21heC13LWxnIG1heC1oLVs5MHZoXSBvdmVyZmxvdy15LWF1dG8nXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YS10ZXN0aWQ9J2Jvb2tpbmctZGlhbG9nJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPERpYWxvZ0hlYWRlcj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxEaWFsb2dUaXRsZT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2xhbmd1YWdlID09PSAnZnInID8gJ05vdXZlbGxlIHLDqXNlcnZhdGlvbicgOiAnTmV3IEJvb2tpbmcnfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9EaWFsb2dUaXRsZT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxEaWFsb2dEZXNjcmlwdGlvbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2xhbmd1YWdlID09PSAnZnInXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPyBgUsOpc2VydmVyICR7c3BhY2UubmFtZX1gXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOiBgQm9vayAke3NwYWNlLm5hbWV9YH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvRGlhbG9nRGVzY3JpcHRpb24+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9EaWFsb2dIZWFkZXI+XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8Rm9ybSB7Li4uZm9ybX0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8Zm9ybSBvblN1Ym1pdD17Zm9ybS5oYW5kbGVTdWJtaXQob25TdWJtaXQpfSBjbGFzc05hbWU9J3NwYWNlLXktNic+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsvKiBTZWxlY3RlZCBEYXRlIERpc3BsYXkgKi99XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSdwLTQgYmctYmx1ZS01MCBib3JkZXIgYm9yZGVyLWJsdWUtMjAwIHJvdW5kZWQtbGcnPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSd0ZXh0LXNtIGZvbnQtbWVkaXVtIHRleHQtYmx1ZS05MDAgbWItMSc+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7bGFuZ3VhZ2UgPT09ICdmcicgPyAnRGF0ZSBzw6lsZWN0aW9ubsOpZScgOiAnU2VsZWN0ZWQgRGF0ZSd9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9J3RleHQtbGcgZm9udC1zZW1pYm9sZCB0ZXh0LWJsdWUtODAwJz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtmb3JtYXQoZm9ybS53YXRjaCgnZGF0ZScpLCAnRUVFRSwgZCBNTU1NIHl5eXknLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvY2FsZTogbGFuZ3VhZ2UgPT09ICdmcicgPyBmciA6IHVuZGVmaW5lZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7LyogT3BlbmluZyBIb3VycyBEaXNwbGF5ICovfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7c2VsZWN0ZWRTcGFjZT8ub3BlbmluZ0hvdXJzICYmIEFycmF5LmlzQXJyYXkoc2VsZWN0ZWRTcGFjZS5vcGVuaW5nSG91cnMpICYmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0ncC0zIGJnLWdyZWVuLTUwIGJvcmRlciBib3JkZXItZ3JlZW4tMjAwIHJvdW5kZWQtbGcnPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9J3RleHQtc20gZm9udC1tZWRpdW0gdGV4dC1ncmVlbi05MDAgbWItMic+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtsYW5ndWFnZSA9PT0gJ2ZyJyA/ICdIZXVyZXMgZFxcJ291dmVydHVyZScgOiAnT3BlbmluZyBIb3Vycyd9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtzZWxlY3RlZFNwYWNlLm9wZW5pbmdIb3Vycy5tYXAoKGhvdXJzLCBpbmRleCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBkYXlOYW1lID0gZm9ybS53YXRjaCgnZGF0ZScpLnRvTG9jYWxlRGF0ZVN0cmluZygnZW4tVVMnLCB7IHdlZWtkYXk6ICdsb25nJyB9KS50b0xvd2VyQ2FzZSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoaG91cnMuZGF5LnRvTG93ZXJDYXNlKCkgPT09IGRheU5hbWUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBrZXk9e2luZGV4fSBjbGFzc05hbWU9J3RleHQtc20gdGV4dC1ncmVlbi04MDAnPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7aG91cnMub3Blbn0gLSB7aG91cnMuY2xvc2V9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgey8qIFRpbWUgU2xvdHMgR3JpZCAqL31cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9J3NwYWNlLXktNCc+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9J3RleHQtc20gZm9udC1tZWRpdW0gdGV4dC1ncmF5LTkwMCc+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7bGFuZ3VhZ2UgPT09ICdmcicgPyAnQ3LDqW5lYXV4IGhvcmFpcmVzIGRpc3BvbmlibGVzJyA6ICdBdmFpbGFibGUgVGltZSBTbG90cyd9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9J2dyaWQgZ3JpZC1jb2xzLTQgZ2FwLTIgbWF4LWgtNjAgb3ZlcmZsb3cteS1hdXRvIHAtMiBib3JkZXIgcm91bmRlZC1sZyBiZy1ncmF5LTUwJz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHt0aW1lU2xvdHMubWFwKCh0aW1lKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGlzQXZhaWxhYmxlID0gaXNUaW1lU2xvdEF2YWlsYWJsZSh0aW1lKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgaGFzQm9va2luZyA9IGJvb2tpbmdzRm9yRGF0ZS5zb21lKChib29raW5nOiBCb29raW5nKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgYm9va2luZ1N0YXJ0ID0gcGFyc2VJU08oYm9va2luZy5zdGFydFRpbWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGJvb2tpbmdFbmQgPSBwYXJzZUlTTyhib29raW5nLmVuZFRpbWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHRpbWVTbG90ID0gcGFyc2UodGltZSwgJ0hIOm1tJywgZm9ybS53YXRjaCgnZGF0ZScpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGltZVNsb3QgPj0gYm9va2luZ1N0YXJ0ICYmIHRpbWVTbG90IDwgYm9va2luZ0VuZDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBjdXJyZW50U3RhcnRUaW1lID0gZm9ybS53YXRjaCgnc3RhcnRUaW1lJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGN1cnJlbnRFbmRUaW1lID0gZm9ybS53YXRjaCgnZW5kVGltZScpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBpc1NlbGVjdGVkID0gdGltZSA9PT0gY3VycmVudFN0YXJ0VGltZSB8fCB0aW1lID09PSBjdXJyZW50RW5kVGltZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGJ1dHRvblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAga2V5PXt0aW1lfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZT0nYnV0dG9uJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGlzYWJsZWQ9eyFpc0F2YWlsYWJsZSB8fCBoYXNCb29raW5nfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DbGljaz17KCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWN1cnJlbnRTdGFydFRpbWUgfHwgKGN1cnJlbnRTdGFydFRpbWUgJiYgY3VycmVudEVuZFRpbWUpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gU2V0IHN0YXJ0IHRpbWVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3JtLnNldFZhbHVlKCdzdGFydFRpbWUnLCB0aW1lKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3JtLnNldFZhbHVlKCdlbmRUaW1lJywgJycpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFNldCBlbmQgdGltZSBpZiBzdGFydCB0aW1lIGlzIGFscmVhZHkgc2V0XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRpbWUgPiBjdXJyZW50U3RhcnRUaW1lKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3JtLnNldFZhbHVlKCdlbmRUaW1lJywgdGltZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIElmIHNlbGVjdGVkIHRpbWUgaXMgYmVmb3JlIHN0YXJ0IHRpbWUsIG1ha2UgaXQgdGhlIG5ldyBzdGFydCB0aW1lXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3JtLnNldFZhbHVlKCdzdGFydFRpbWUnLCB0aW1lKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvcm0uc2V0VmFsdWUoJ2VuZFRpbWUnLCAnJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPXtgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHAtMiB0ZXh0LXhzIHJvdW5kZWQtbWQgYm9yZGVyIHRyYW5zaXRpb24tY29sb3JzIHJlbGF0aXZlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICR7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIWlzQXZhaWxhYmxlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA/ICdiZy1yZWQtMTAwIGJvcmRlci1yZWQtMjAwIHRleHQtcmVkLTYwMCBjdXJzb3Itbm90LWFsbG93ZWQnXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IGhhc0Jvb2tpbmdcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPyAnYmctb3JhbmdlLTEwMCBib3JkZXItb3JhbmdlLTIwMCB0ZXh0LW9yYW5nZS03MDAgY3Vyc29yLW5vdC1hbGxvd2VkJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IGlzU2VsZWN0ZWRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA/ICdiZy1ibHVlLTUwMCBib3JkZXItYmx1ZS02MDAgdGV4dC13aGl0ZSBmb250LXNlbWlib2xkJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogJ2JnLXdoaXRlIGJvcmRlci1ncmF5LTIwMCB0ZXh0LWdyYXktNzAwIGhvdmVyOmJnLWdyYXktMTAwIGhvdmVyOmJvcmRlci1ncmF5LTMwMCdcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0nZm9udC1tZWRpdW0nPnt0aW1lfTwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2hhc0Jvb2tpbmcgJiYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0ndGV4dC1bMTBweF0gbXQtMSB0ZXh0LW9yYW5nZS02MDAnPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtsYW5ndWFnZSA9PT0gJ2ZyJyA/ICdSw6lzZXJ2w6knIDogJ0Jvb2tlZCd9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHshaXNBdmFpbGFibGUgJiYgIWhhc0Jvb2tpbmcgJiYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0ndGV4dC1bMTBweF0gbXQtMSB0ZXh0LXJlZC02MDAnPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtsYW5ndWFnZSA9PT0gJ2ZyJyA/ICdGZXJtw6knIDogJ0Nsb3NlZCd9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtpc1NlbGVjdGVkICYmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9J3RleHQtWzEwcHhdIG10LTEgdGV4dC13aGl0ZSc+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge3RpbWUgPT09IGN1cnJlbnRTdGFydFRpbWUgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA/IChsYW5ndWFnZSA9PT0gJ2ZyJyA/ICdEw6lidXQnIDogJ1N0YXJ0JylcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogKGxhbmd1YWdlID09PSAnZnInID8gJ0ZpbicgOiAnRW5kJylcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgey8qIExlZ2VuZCAqL31cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0nZ3JpZCBncmlkLWNvbHMtMiBnYXAtNCB0ZXh0LXhzJz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSdzcGFjZS15LTInPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0nZmxleCBpdGVtcy1jZW50ZXIgZ2FwLTInPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSd3LTMgaC0zIGJnLXdoaXRlIGJvcmRlciBib3JkZXItZ3JheS0yMDAgcm91bmRlZCc+PC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4+e2xhbmd1YWdlID09PSAnZnInID8gJ0Rpc3BvbmlibGUnIDogJ0F2YWlsYWJsZSd9PC9zcGFuPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9J2ZsZXggaXRlbXMtY2VudGVyIGdhcC0yJz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0ndy0zIGgtMyBiZy1ibHVlLTUwMCByb3VuZGVkJz48L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3Bhbj57bGFuZ3VhZ2UgPT09ICdmcicgPyAnU8OpbGVjdGlvbm7DqScgOiAnU2VsZWN0ZWQnfTwvc3Bhbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSdzcGFjZS15LTInPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0nZmxleCBpdGVtcy1jZW50ZXIgZ2FwLTInPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSd3LTMgaC0zIGJnLW9yYW5nZS0xMDAgYm9yZGVyIGJvcmRlci1vcmFuZ2UtMjAwIHJvdW5kZWQnPjwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuPntsYW5ndWFnZSA9PT0gJ2ZyJyA/ICdSw6lzZXJ2w6knIDogJ0Jvb2tlZCd9PC9zcGFuPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9J2ZsZXggaXRlbXMtY2VudGVyIGdhcC0yJz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0ndy0zIGgtMyBiZy1yZWQtMTAwIGJvcmRlciBib3JkZXItcmVkLTIwMCByb3VuZGVkJz48L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3Bhbj57bGFuZ3VhZ2UgPT09ICdmcicgPyAnRmVybcOpJyA6ICdDbG9zZWQnfTwvc3Bhbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgey8qIFNlbGVjdGVkIFRpbWUgU3VtbWFyeSAqL31cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2Zvcm0ud2F0Y2goJ3N0YXJ0VGltZScpICYmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0ncC0zIGJnLWdyYXktNTAgYm9yZGVyIGJvcmRlci1ncmF5LTIwMCByb3VuZGVkLWxnJz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSd0ZXh0LXNtIGZvbnQtbWVkaXVtIHRleHQtZ3JheS05MDAgbWItMSc+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtsYW5ndWFnZSA9PT0gJ2ZyJyA/ICdSw6lzZXJ2YXRpb24gc8OpbGVjdGlvbm7DqWUnIDogJ1NlbGVjdGVkIEJvb2tpbmcnfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0ndGV4dC1zbSB0ZXh0LWdyYXktNzAwJz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPSdmb250LW1lZGl1bSc+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2xhbmd1YWdlID09PSAnZnInID8gJ0TDqWJ1dDonIDogJ1N0YXJ0Oid9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvc3Bhbj4ge2Zvcm0ud2F0Y2goJ3N0YXJ0VGltZScpfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7Zm9ybS53YXRjaCgnZW5kVGltZScpICYmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9J21sLTQnPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPSdmb250LW1lZGl1bSc+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtsYW5ndWFnZSA9PT0gJ2ZyJyA/ICdGaW46JyA6ICdFbmQ6J31cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvc3Bhbj4ge2Zvcm0ud2F0Y2goJ2VuZFRpbWUnKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3NwYW4+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtmb3JtLndhdGNoKCdlbmRUaW1lJykgJiYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0ndGV4dC14cyB0ZXh0LWdyYXktNTAwIG10LTEnPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtsYW5ndWFnZSA9PT0gJ2ZyJyA/ICdEdXLDqWU6JyA6ICdEdXJhdGlvbjonfSBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7KCgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHN0YXJ0ID0gcGFyc2UoZm9ybS53YXRjaCgnc3RhcnRUaW1lJyksICdISDptbScsIG5ldyBEYXRlKCkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZW5kID0gcGFyc2UoZm9ybS53YXRjaCgnZW5kVGltZScpLCAnSEg6bW0nLCBuZXcgRGF0ZSgpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGR1cmF0aW9uID0gKGVuZC5nZXRUaW1lKCkgLSBzdGFydC5nZXRUaW1lKCkpIC8gKDEwMDAgKiA2MCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gYCR7TWF0aC5mbG9vcihkdXJhdGlvbiAvIDYwKX1oICR7ZHVyYXRpb24gJSA2MCA+IDAgPyBgJHtkdXJhdGlvbiAlIDYwfW1pbmAgOiAnJ31gO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pKCl9IFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgey8qIFZhbGlkYXRpb24gTWVzc2FnZXMgKi99XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHshZm9ybS53YXRjaCgnc3RhcnRUaW1lJykgJiYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSd0ZXh0LXNtIHRleHQtYW1iZXItNjAwIGJnLWFtYmVyLTUwIGJvcmRlciBib3JkZXItYW1iZXItMjAwIHJvdW5kZWQtbGcgcC0zJz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtsYW5ndWFnZSA9PT0gJ2ZyJyBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPyAnVmV1aWxsZXogc8OpbGVjdGlvbm5lciB1bmUgaGV1cmUgZGUgZMOpYnV0J1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6ICdQbGVhc2Ugc2VsZWN0IGEgc3RhcnQgdGltZSd9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtmb3JtLndhdGNoKCdzdGFydFRpbWUnKSAmJiAhZm9ybS53YXRjaCgnZW5kVGltZScpICYmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0ndGV4dC1zbSB0ZXh0LWFtYmVyLTYwMCBiZy1hbWJlci01MCBib3JkZXIgYm9yZGVyLWFtYmVyLTIwMCByb3VuZGVkLWxnIHAtMyc+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7bGFuZ3VhZ2UgPT09ICdmcicgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gJ1ZldWlsbGV6IHPDqWxlY3Rpb25uZXIgdW5lIGhldXJlIGRlIGZpbidcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOiAnUGxlYXNlIHNlbGVjdCBhbiBlbmQgdGltZSd9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgey8qIEhpZGRlbiBmb3JtIGZpZWxkcyB0byBtYWludGFpbiBmb3JtIHZhbGlkYXRpb24gKi99XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSdoaWRkZW4nPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxGb3JtRmllbGRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRyb2w9e2Zvcm0uY29udHJvbH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU9J2RhdGUnXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZW5kZXI9eyh7IGZpZWxkIH0pID0+IChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPEZvcm1JdGVtPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxGb3JtQ29udHJvbD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxpbnB1dCB7Li4uZmllbGR9IHZhbHVlPXtmaWVsZC52YWx1ZT8udG9JU09TdHJpbmcoKSB8fCAnJ30gcmVhZE9ubHkgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L0Zvcm1Db250cm9sPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxGb3JtTWVzc2FnZSAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L0Zvcm1JdGVtPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxGb3JtRmllbGRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRyb2w9e2Zvcm0uY29udHJvbH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU9J3N0YXJ0VGltZSdcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlbmRlcj17KHsgZmllbGQgfSkgPT4gKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8Rm9ybUl0ZW0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPEZvcm1Db250cm9sPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGlucHV0IHsuLi5maWVsZH0gcmVhZE9ubHkgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L0Zvcm1Db250cm9sPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxGb3JtTWVzc2FnZSAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L0Zvcm1JdGVtPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxGb3JtRmllbGRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRyb2w9e2Zvcm0uY29udHJvbH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU9J2VuZFRpbWUnXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZW5kZXI9eyh7IGZpZWxkIH0pID0+IChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPEZvcm1JdGVtPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxGb3JtQ29udHJvbD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxpbnB1dCB7Li4uZmllbGR9IHJlYWRPbmx5IC8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9Gb3JtQ29udHJvbD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8Rm9ybU1lc3NhZ2UgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9Gb3JtSXRlbT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPERpYWxvZ0Zvb3Rlcj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8QnV0dG9uXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlPSdidXR0b24nXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXJpYW50PSdvdXRsaW5lJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DbGljaz17KCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRJc0Jvb2tpbmdEaWFsb2dPcGVuKGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9ybS5yZXNldCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGEtdGVzdGlkPSdidXR0b24tY2FuY2VsLWJvb2tpbmcnXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2xhbmd1YWdlID09PSAnZnInID8gJ0FubnVsZXInIDogJ0NhbmNlbCd9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9CdXR0b24+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPEJ1dHRvblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZT0nc3VibWl0J1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGlzYWJsZWQ9e1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjcmVhdGVCb29raW5nTXV0YXRpb24uaXNQZW5kaW5nIHx8IFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAhZm9ybS53YXRjaCgnc3RhcnRUaW1lJykgfHwgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICFmb3JtLndhdGNoKCdlbmRUaW1lJylcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGEtdGVzdGlkPSdidXR0b24tY29uZmlybS1ib29raW5nJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtjcmVhdGVCb29raW5nTXV0YXRpb24uaXNQZW5kaW5nXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gbGFuZ3VhZ2UgPT09ICdmcidcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA/ICdSw6lzZXJ2YXRpb24uLi4nXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOiAnQm9va2luZy4uLidcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOiBsYW5ndWFnZSA9PT0gJ2ZyJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gJ0NvbmZpcm1lciBsYSByw6lzZXJ2YXRpb24nXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOiAnQ29uZmlybSBCb29raW5nJ31cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L0J1dHRvbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9EaWFsb2dGb290ZXI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Zvcm0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9Gb3JtPlxuICAgICAgICAgICAgICAgICAgICAgICAgICA8L0RpYWxvZ0NvbnRlbnQ+XG4gICAgICAgICAgICAgICAgICAgICAgICA8L0RpYWxvZz5cbiAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICA8Lz5cbiAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICkpfVxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgKX1cbiAgICAgICAgPC9kaXY+XG4gICAgICAgIDwvZGl2PlxuICAgICAgPC9kaXY+XG4gICAgPC9kaXY+XG4gICk7XG59XG4iXSwidmVyc2lvbiI6M30=