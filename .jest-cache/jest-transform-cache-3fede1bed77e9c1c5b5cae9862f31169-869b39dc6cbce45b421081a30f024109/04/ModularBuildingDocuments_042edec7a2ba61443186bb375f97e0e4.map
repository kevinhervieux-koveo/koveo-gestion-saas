{"file":"/home/runner/workspace/client/src/pages/manager/ModularBuildingDocuments.tsx","mappings":"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","names":[],"sources":["/home/runner/workspace/client/src/pages/manager/ModularBuildingDocuments.tsx"],"sourcesContent":["import React, { useState } from 'react';\nimport { useQuery, useQueryClient } from '@tanstack/react-query';\nimport { useParams, useLocation } from 'wouter';\nimport { Grid, List, ArrowLeft, Plus } from 'lucide-react';\nimport { Button } from '@/components/ui/button';\nimport { Input } from '@/components/ui/input';\nimport { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card';\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from '@/components/ui/tabs';\nimport { Badge } from '@/components/ui/badge';\nimport { apiRequest } from '@/lib/queryClient';\nimport {\n  SharedUploader,\n  DocumentCard,\n  DocumentViewModal,\n  DocumentEditModal\n} from '@/components/document-management';\nimport type { DocumentWithMetadata, DocumentPermissions } from '@shared/schemas/documents';\n\n/**\n * ModularBuildingDocuments - Example integration of new modular document components\n * Demonstrates how to use the new reusable components instead of the monolithic DocumentManager\n */\nexport default function ModularBuildingDocuments() {\n  const [, navigate] = useLocation();\n  const params = useParams();\n  const buildingId = (params as any).buildingId;\n  const queryClient = useQueryClient();\n\n  // State for modals and interactions\n  const [isViewModalOpen, setIsViewModalOpen] = useState(false);\n  const [isEditModalOpen, setIsEditModalOpen] = useState(false);\n  const [selectedDocumentId, setSelectedDocumentId] = useState<string | null>(null);\n  const [isCreating, setIsCreating] = useState(false);\n  const [searchTerm, setSearchTerm] = useState('');\n  const [viewMode, setViewMode] = useState<'grid' | 'list'>('grid');\n\n  // Fetch building info\n  const { data: building } = useQuery({\n    queryKey: ['/api/manager/buildings', buildingId],\n    enabled: !!buildingId,\n  });\n\n  // Fetch documents for this building\n  const { data: documentResponse, isLoading } = useQuery({\n    queryKey: ['/api/documents', 'building', buildingId],\n    queryFn: async () => {\n      const response = await apiRequest('GET', `/api/documents?buildingId=${buildingId}`);\n      return response.json();\n    },\n    enabled: !!buildingId,\n  });\n\n  // Extract documents array from API response\n  const documents = Array.isArray(documentResponse?.documents) ? documentResponse.documents : [];\n\n  // Get current user for permissions\n  const { data: user } = useQuery({\n    queryKey: ['/api/auth/user'],\n    queryFn: () => apiRequest('GET', '/api/auth/user'),\n  });\n\n  // Determine user permissions based on role\n  const userPermissions: DocumentPermissions = {\n    canView: true,\n    canDownload: true,\n    canEdit: user?.role === 'manager' || user?.role === 'admin',\n    canDelete: user?.role === 'manager' || user?.role === 'admin',\n    canCreate: user?.role === 'manager' || user?.role === 'admin',\n  };\n\n  // Filter documents based on search\n  const filteredDocuments = Array.isArray(documents) ? documents.filter(doc =>\n    doc.name.toLowerCase().includes(searchTerm.toLowerCase()) ||\n    doc.description?.toLowerCase().includes(searchTerm.toLowerCase())\n  ) : [];\n\n\n  // Handle document interactions\n  const handleDocumentView = (documentId: string) => {\n    setSelectedDocumentId(documentId);\n    setIsViewModalOpen(true);\n  };\n\n  const handleDocumentEdit = (documentId: string) => {\n    setSelectedDocumentId(documentId);\n    setIsEditModalOpen(true);\n    setIsViewModalOpen(false);\n  };\n\n  const handleCreateDocument = () => {\n    setSelectedDocumentId(null);\n    setIsCreating(true);\n    setIsEditModalOpen(true);\n  };\n\n  const handleDocumentSuccess = (documentId: string, action: 'created' | 'updated' | 'deleted') => {\n    console.log(`Document ${action}:`, documentId);\n    setIsEditModalOpen(false);\n    setIsViewModalOpen(false);\n    setIsCreating(false);\n    setSelectedDocumentId(null);\n    \n    // Refresh the document list to show the new/updated document\n    queryClient.invalidateQueries({\n      queryKey: ['/api/documents', 'building', buildingId],\n    });\n    \n    // Also invalidate general documents cache\n    queryClient.invalidateQueries({\n      queryKey: ['/api/documents'],\n    });\n  };\n\n  const handleBack = () => {\n    navigate('/manager/buildings');\n  };\n\n  if (!buildingId) {\n    return (\n      <div className=\"flex-1 flex items-center justify-center\">\n        <div className=\"text-center\">\n          <p className=\"text-gray-500 mb-4\">Building ID is required</p>\n          <Button variant=\"outline\" onClick={handleBack}>\n            <ArrowLeft className=\"w-4 h-4 mr-2\" />\n            Back to Buildings\n          </Button>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"flex-1 flex flex-col overflow-hidden p-6\">\n      {/* Header */}\n      <div className=\"flex flex-col space-y-4 mb-6\">\n        <div className=\"flex items-center justify-between\">\n          <Button variant=\"outline\" onClick={handleBack}>\n            <ArrowLeft className=\"w-4 h-4 mr-2\" />\n            Back to Buildings\n          </Button>\n          \n          {userPermissions.canCreate && (\n            <Button onClick={handleCreateDocument} data-testid=\"button-create-document\">\n              <Plus className=\"w-4 h-4 mr-2\" />\n              Add Document\n            </Button>\n          )}\n        </div>\n\n        <div>\n          <h1 className=\"text-2xl font-bold\">\n            {building?.name || 'Building'} Documents\n          </h1>\n          <p className=\"text-gray-600 dark:text-gray-400\">\n            Manage documents for {building?.name || 'this building'}\n          </p>\n        </div>\n      </div>\n\n      {/* Search and View Controls */}\n      <div className=\"flex flex-col sm:flex-row gap-4 mb-6\">\n        <div className=\"flex-1\">\n          <Input\n            placeholder=\"Search documents...\"\n            value={searchTerm}\n            onChange={(e) => setSearchTerm(e.target.value)}\n            data-testid=\"input-search-documents\"\n          />\n        </div>\n        \n        <div className=\"flex gap-2\">\n          <Button\n            variant={viewMode === 'grid' ? 'default' : 'outline'}\n            size=\"sm\"\n            onClick={() => setViewMode('grid')}\n            data-testid=\"button-grid-view\"\n          >\n            <Grid className=\"w-4 h-4\" />\n          </Button>\n          <Button\n            variant={viewMode === 'list' ? 'default' : 'outline'}\n            size=\"sm\"\n            onClick={() => setViewMode('list')}\n            data-testid=\"button-list-view\"\n          >\n            <List className=\"w-4 h-4\" />\n          </Button>\n        </div>\n      </div>\n\n      {/* Documents Display */}\n      <div className=\"flex-1 overflow-auto\">\n        {isLoading ? (\n          <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4\">\n            {[...Array(6)].map((_, i) => (\n              <Card key={i} className=\"animate-pulse\">\n                <CardHeader>\n                  <div className=\"h-4 bg-gray-200 dark:bg-gray-700 rounded w-3/4\"></div>\n                </CardHeader>\n                <CardContent>\n                  <div className=\"h-3 bg-gray-200 dark:bg-gray-700 rounded w-1/2\"></div>\n                </CardContent>\n              </Card>\n            ))}\n          </div>\n        ) : filteredDocuments.length === 0 ? (\n          <Card>\n            <CardContent className=\"flex flex-col items-center justify-center py-12\">\n              <div className=\"text-center\">\n                <h3 className=\"text-lg font-medium mb-2\">No documents found</h3>\n                <p className=\"text-gray-500 mb-4\">\n                  {searchTerm ? 'No documents match your search.' : 'No documents have been uploaded yet.'}\n                </p>\n                {userPermissions.canCreate && !searchTerm && (\n                  <Button onClick={handleCreateDocument}>\n                    <Plus className=\"w-4 h-4 mr-2\" />\n                    Add First Document\n                  </Button>\n                )}\n              </div>\n            </CardContent>\n          </Card>\n        ) : (\n          <div className={viewMode === 'grid' \n            ? \"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4\"\n            : \"space-y-4\"\n          }>\n            {filteredDocuments.map((document) => (\n              <DocumentCard\n                key={document.id}\n                title={document.name}\n                documentId={document.id}\n                onViewClick={handleDocumentView}\n                documentType={document.documentType}\n                description={document.description}\n                createdAt={document.createdAt}\n                fileSize={document.fileSize ? Number(document.fileSize) : undefined}\n                mimeType={document.mimeType}\n                uploadedBy={document.uploadedBy?.firstName && document.uploadedBy?.lastName \n                  ? `${document.uploadedBy.firstName} ${document.uploadedBy.lastName}`\n                  : document.uploadedBy?.email\n                }\n                isVisibleToTenants={document.isVisibleToTenants}\n                compact={viewMode === 'list'}\n                showMetadata={true}\n                data-testid={`document-card-${document.id}`}\n              />\n            ))}\n          </div>\n        )}\n      </div>\n\n      {/* Statistics */}\n      {filteredDocuments.length > 0 && (\n        <div className=\"flex justify-between items-center mt-6 pt-4 border-t\">\n          <p className=\"text-sm text-gray-500\">\n            Showing {filteredDocuments.length} of {Array.isArray(documents) ? documents.length : 0} documents\n          </p>\n          <div className=\"flex gap-2\">\n            <Badge variant=\"outline\">\n              {Array.isArray(documents) ? documents.filter(d => d.isVisibleToTenants).length : 0} visible to tenants\n            </Badge>\n            <Badge variant=\"outline\">\n              {Array.isArray(documents) ? documents.filter(d => d.documentType === 'bylaw').length : 0} bylaws\n            </Badge>\n          </div>\n        </div>\n      )}\n\n      {/* Modals */}\n      <DocumentViewModal\n        documentId={selectedDocumentId || ''}\n        userPermissions={userPermissions}\n        onEditClick={handleDocumentEdit}\n        isOpen={isViewModalOpen}\n        onOpenChange={setIsViewModalOpen}\n      />\n\n      <DocumentEditModal\n        documentId={isCreating ? undefined : selectedDocumentId || undefined}\n        entityType=\"building\"\n        entityId={buildingId}\n        isOpen={isEditModalOpen}\n        onOpenChange={setIsEditModalOpen}\n        onSuccess={handleDocumentSuccess}\n      />\n    </div>\n  );\n}"],"version":3}