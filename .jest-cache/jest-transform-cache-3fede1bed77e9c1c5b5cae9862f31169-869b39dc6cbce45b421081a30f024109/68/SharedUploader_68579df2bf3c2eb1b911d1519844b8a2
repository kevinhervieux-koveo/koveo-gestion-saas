6b2fa84be1137292ca421c9dff4ee255
"use strict";
var __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {
    if (k2 === undefined) k2 = k;
    var desc = Object.getOwnPropertyDescriptor(m, k);
    if (!desc || ("get" in desc ? !m.__esModule : desc.writable || desc.configurable)) {
      desc = { enumerable: true, get: function() { return m[k]; } };
    }
    Object.defineProperty(o, k2, desc);
}) : (function(o, m, k, k2) {
    if (k2 === undefined) k2 = k;
    o[k2] = m[k];
}));
var __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {
    Object.defineProperty(o, "default", { enumerable: true, value: v });
}) : function(o, v) {
    o["default"] = v;
});
var __importStar = (this && this.__importStar) || (function () {
    var ownKeys = function(o) {
        ownKeys = Object.getOwnPropertyNames || function (o) {
            var ar = [];
            for (var k in o) if (Object.prototype.hasOwnProperty.call(o, k)) ar[ar.length] = k;
            return ar;
        };
        return ownKeys(o);
    };
    return function (mod) {
        if (mod && mod.__esModule) return mod;
        var result = {};
        if (mod != null) for (var k = ownKeys(mod), i = 0; i < k.length; i++) if (k[i] !== "default") __createBinding(result, mod, k[i]);
        __setModuleDefault(result, mod);
        return result;
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
exports.SharedUploader = SharedUploader;
const jsx_runtime_1 = require("react/jsx-runtime");
const react_1 = __importStar(require("react"));
const lucide_react_1 = require("lucide-react");
const utils_1 = require("@/lib/utils");
const tabs_1 = require("@/components/ui/tabs");
const textarea_1 = require("@/components/ui/textarea");
const label_1 = require("@/components/ui/label");
const upload_config_1 = require("@shared/config/upload-config");
const DEFAULT_ALLOWED_TYPES = [
    'application/pdf',
    'application/msword',
    'application/vnd.openxmlformats-officedocument.wordprocessingml.document',
    'application/vnd.ms-excel',
    'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet',
    'image/jpeg',
    'image/jpg',
    'image/png'
];
/**
 * SharedUploader - A reusable component for file uploads and text creation
 * Features mobile camera integration, drag-and-drop, clipboard paste, and text input
 */
function SharedUploader({ onDocumentChange, allowedFileTypes, maxFileSize, disabled = false, className, defaultTab = 'file', 
// AI Enhancement Props
formType = 'documents', uploadContext, aiAnalysisEnabled: propAiEnabled, onAiToggle, onAiAnalysisComplete, showAiToggle = true, contextFields }) {
    // Get configuration from upload config
    const config = (0, upload_config_1.getUploadConfig)(formType);
    const finalAllowedTypes = allowedFileTypes || config.allowedFileTypes;
    const finalMaxFileSize = maxFileSize || config.maxFileSize;
    const finalAiEnabled = propAiEnabled ?? config.aiAnalysisEnabled;
    // State management
    const [activeTab, setActiveTab] = (0, react_1.useState)(defaultTab);
    const [isDragOver, setIsDragOver] = (0, react_1.useState)(false);
    const [selectedFile, setSelectedFile] = (0, react_1.useState)(null);
    const [textContent, setTextContent] = (0, react_1.useState)('');
    const [validationError, setValidationError] = (0, react_1.useState)(null);
    const [aiEnabled, setAiEnabled] = (0, react_1.useState)(finalAiEnabled);
    const [isAnalyzing, setIsAnalyzing] = (0, react_1.useState)(false);
    // Refs
    const fileInputRef = (0, react_1.useRef)(null);
    const uploadAreaRef = (0, react_1.useRef)(null);
    // Handle AI toggle
    const handleAiToggle = (0, react_1.useCallback)((enabled) => {
        setAiEnabled(enabled);
        onAiToggle?.(enabled);
    }, [onAiToggle]);
    // File validation function
    const validateFile = (0, react_1.useCallback)((file) => {
        // Check file size
        if (file.size > finalMaxFileSize * 1024 * 1024) {
            return `File size exceeds ${finalMaxFileSize}MB limit`;
        }
        // Check file type
        const isAllowed = finalAllowedTypes.some(type => {
            if (type.includes('*')) {
                return file.type.startsWith(type.replace('*', ''));
            }
            return file.type === type;
        });
        if (!isAllowed) {
            return `File type "${file.type}" is not supported`;
        }
        // Check filename for security
        if (file.name.includes('..') || file.name.includes('/') || file.name.includes('\\')) {
            return 'Invalid filename detected';
        }
        return null;
    }, [finalAllowedTypes, finalMaxFileSize]);
    // AI Analysis function
    const performAiAnalysis = (0, react_1.useCallback)(async (file) => {
        if (!aiEnabled || !onAiAnalysisComplete)
            return;
        setIsAnalyzing(true);
        try {
            // Create FormData for AI analysis
            const formData = new FormData();
            formData.append('document', file);
            formData.append('formType', formType);
            if (uploadContext) {
                formData.append('uploadContext', JSON.stringify(uploadContext));
            }
            // Make AI analysis request
            const response = await fetch('/api/ai/analyze-document', {
                method: 'POST',
                body: formData,
                credentials: 'include'
            });
            if (response.ok) {
                const result = await response.json();
                onAiAnalysisComplete(result);
            }
        }
        catch (error) {
            console.error('AI analysis failed:', error);
        }
        finally {
            setIsAnalyzing(false);
        }
    }, [aiEnabled, onAiAnalysisComplete, formType, uploadContext]);
    // Process and validate file
    const processFile = (0, react_1.useCallback)((file) => {
        const error = validateFile(file);
        if (error) {
            setValidationError(error);
            return;
        }
        setValidationError(null);
        const isImage = file.type.startsWith('image/');
        const filePreview = {
            file,
            type: isImage ? 'image' : 'document'
        };
        if (isImage) {
            filePreview.preview = URL.createObjectURL(file);
        }
        setSelectedFile(filePreview);
        onDocumentChange(file, null);
        // Trigger AI analysis if enabled
        if (aiEnabled) {
            performAiAnalysis(file);
        }
    }, [validateFile, onDocumentChange, aiEnabled, performAiAnalysis]);
    // Handle file selection from input
    const handleFileSelect = (0, react_1.useCallback)((e) => {
        const file = e.target.files?.[0];
        if (file) {
            processFile(file);
        }
        // Reset input to allow selecting the same file again
        e.target.value = '';
    }, [processFile]);
    // Handle drag and drop
    const handleDragOver = (0, react_1.useCallback)((e) => {
        e.preventDefault();
        e.stopPropagation();
        if (!disabled) {
            setIsDragOver(true);
        }
    }, [disabled]);
    const handleDragLeave = (0, react_1.useCallback)((e) => {
        e.preventDefault();
        e.stopPropagation();
        setIsDragOver(false);
    }, []);
    const handleDrop = (0, react_1.useCallback)((e) => {
        e.preventDefault();
        e.stopPropagation();
        setIsDragOver(false);
        if (disabled)
            return;
        const files = Array.from(e.dataTransfer.files);
        if (files.length > 0) {
            processFile(files[0]); // Only handle first file
        }
    }, [disabled, processFile]);
    // Handle clipboard paste for screenshots
    const handlePaste = (0, react_1.useCallback)((e) => {
        if (disabled || activeTab !== 'file')
            return;
        const items = e.clipboardData?.items;
        if (!items)
            return;
        for (let i = 0; i < items.length; i++) {
            const item = items[i];
            if (item.type.indexOf('image') !== -1) {
                const blob = item.getAsFile();
                if (blob) {
                    e.preventDefault();
                    // Create proper File object for pasted images
                    const timestamp = new Date().toISOString().replace(/[:.]/g, '-');
                    const file = new lucide_react_1.File([blob], `screenshot-${timestamp}.png`, {
                        type: 'image/png'
                    });
                    processFile(file);
                    break;
                }
            }
        }
    }, [disabled, activeTab, processFile]);
    // Set up paste event listener
    (0, react_1.useEffect)(() => {
        if (activeTab === 'file' && !disabled) {
            document.addEventListener('paste', handlePaste);
            return () => document.removeEventListener('paste', handlePaste);
        }
    }, [activeTab, disabled, handlePaste]);
    // Handle text content changes
    const handleTextChange = (0, react_1.useCallback)((e) => {
        const text = e.target.value;
        setTextContent(text);
        onDocumentChange(null, text || null);
    }, [onDocumentChange]);
    // Remove selected file
    const handleRemoveFile = (0, react_1.useCallback)(() => {
        if (selectedFile?.preview) {
            URL.revokeObjectURL(selectedFile.preview);
        }
        setSelectedFile(null);
        setValidationError(null);
        onDocumentChange(null, null);
    }, [selectedFile, onDocumentChange]);
    // Open file dialog
    const openFileDialog = (0, react_1.useCallback)(() => {
        if (!disabled && fileInputRef.current) {
            fileInputRef.current.click();
        }
    }, [disabled]);
    // Tab change handler
    const handleTabChange = (0, react_1.useCallback)((value) => {
        setActiveTab(value);
        // Clear current selection when switching tabs
        if (selectedFile) {
            handleRemoveFile();
        }
        if (textContent) {
            setTextContent('');
            onDocumentChange(null, null);
        }
    }, [selectedFile, textContent, handleRemoveFile, onDocumentChange]);
    // Clean up preview URLs on unmount
    (0, react_1.useEffect)(() => {
        return () => {
            if (selectedFile?.preview) {
                URL.revokeObjectURL(selectedFile.preview);
            }
        };
    }, [selectedFile]);
    const formatFileSize = (bytes) => {
        const kb = bytes / 1024;
        if (kb < 1024)
            return `${kb.toFixed(1)} KB`;
        const mb = kb / 1024;
        return `${mb.toFixed(1)} MB`;
    };
    return ((0, jsx_runtime_1.jsxs)("div", { className: (0, utils_1.cn)("w-full", className), children: [isAnalyzing && ((0, jsx_runtime_1.jsxs)("div", { className: "flex items-center gap-2 p-3 bg-blue-50 dark:bg-blue-950 rounded-lg mb-4", children: [(0, jsx_runtime_1.jsx)("div", { className: "animate-spin rounded-full h-3 w-3 border-b-2 border-blue-600" }), (0, jsx_runtime_1.jsx)("span", { className: "text-sm text-blue-600 dark:text-blue-400", children: "AI analyzing document..." })] })), (0, jsx_runtime_1.jsxs)(tabs_1.Tabs, { value: activeTab, onValueChange: handleTabChange, className: "w-full", children: [(0, jsx_runtime_1.jsxs)(tabs_1.TabsList, { className: "grid w-full grid-cols-2", children: [(0, jsx_runtime_1.jsx)(tabs_1.TabsTrigger, { value: "file", "data-testid": "tab-upload-file", children: "\uD83D\uDCC1 Upload File" }), (0, jsx_runtime_1.jsx)(tabs_1.TabsTrigger, { value: "text", "data-testid": "tab-text-document", children: "\uD83D\uDCDD Text Document" })] }), (0, jsx_runtime_1.jsxs)(tabs_1.TabsContent, { value: "file", className: "space-y-4", children: [(0, jsx_runtime_1.jsx)("input", { ref: fileInputRef, type: "file", accept: finalAllowedTypes.join(','), capture: "environment" // Mobile camera integration for rear camera
                                , onChange: handleFileSelect, className: "hidden", disabled: disabled, "data-testid": "file-input-mobile" }), (0, jsx_runtime_1.jsx)("div", { ref: uploadAreaRef, onDragOver: handleDragOver, onDragLeave: handleDragLeave, onDrop: handleDrop, onClick: openFileDialog, className: (0, utils_1.cn)("relative border-2 border-dashed rounded-lg p-6 text-center cursor-pointer transition-colors min-h-[120px] flex flex-col justify-center items-center", isDragOver
                                    ? "border-blue-500 bg-blue-50 dark:bg-blue-950"
                                    : "border-gray-300 hover:border-gray-400 dark:border-gray-600 dark:hover:border-gray-500", disabled && "cursor-not-allowed opacity-50"), "data-testid": "upload-area", children: selectedFile ? (
                                // File preview
                                (0, jsx_runtime_1.jsxs)("div", { className: "w-full space-y-3", children: [(0, jsx_runtime_1.jsxs)("div", { className: "flex items-center gap-3 p-3 bg-gray-50 dark:bg-gray-800 rounded-lg", children: [selectedFile.type === 'image' && selectedFile.preview ? ((0, jsx_runtime_1.jsx)("img", { src: selectedFile.preview, alt: "Preview", className: "w-12 h-12 object-cover rounded" })) : selectedFile.type === 'image' ? ((0, jsx_runtime_1.jsx)(lucide_react_1.Image, { className: "w-12 h-12 text-gray-400" })) : ((0, jsx_runtime_1.jsx)(lucide_react_1.File, { className: "w-12 h-12 text-gray-400" })), (0, jsx_runtime_1.jsxs)("div", { className: "flex-1 min-w-0 text-left", children: [(0, jsx_runtime_1.jsx)("p", { className: "text-sm font-medium text-gray-900 dark:text-gray-100 truncate", children: selectedFile.file.name }), (0, jsx_runtime_1.jsx)("p", { className: "text-xs text-gray-500 dark:text-gray-400", children: formatFileSize(selectedFile.file.size) })] }), (0, jsx_runtime_1.jsx)("button", { onClick: (e) => {
                                                        e.stopPropagation();
                                                        handleRemoveFile();
                                                    }, className: "p-1 hover:bg-gray-200 dark:hover:bg-gray-700 rounded", disabled: disabled, "data-testid": "remove-file-button", children: (0, jsx_runtime_1.jsx)(lucide_react_1.X, { className: "w-4 h-4 text-gray-500" }) })] }), (0, jsx_runtime_1.jsx)("p", { className: "text-xs text-green-600 dark:text-green-400", children: "\u2713 File ready for upload" })] })) : (
                                // Upload prompt
                                (0, jsx_runtime_1.jsxs)(jsx_runtime_1.Fragment, { children: [(0, jsx_runtime_1.jsxs)("div", { className: "flex items-center justify-center space-x-2 mb-3", children: [(0, jsx_runtime_1.jsx)(lucide_react_1.Upload, { className: "h-8 w-8 text-gray-400" }), (0, jsx_runtime_1.jsx)(lucide_react_1.Camera, { className: "h-6 w-6 text-blue-500" })] }), (0, jsx_runtime_1.jsxs)("div", { className: "space-y-2", children: [(0, jsx_runtime_1.jsx)("p", { className: "text-lg font-medium text-gray-900 dark:text-gray-100", children: "Drop files here or click to browse" }), (0, jsx_runtime_1.jsx)("p", { className: "text-sm text-gray-500 dark:text-gray-400", children: "\uD83D\uDCF1 On mobile: Tap to use camera or select from gallery" }), (0, jsx_runtime_1.jsx)("p", { className: "text-sm text-gray-500 dark:text-gray-400", children: "\uD83D\uDCBB On desktop: Drag & drop, click to browse, or paste screenshots (Ctrl+V)" }), (0, jsx_runtime_1.jsxs)("p", { className: "text-xs text-gray-400 dark:text-gray-500", children: ["Maximum ", finalMaxFileSize, "MB \u2022 ", finalAllowedTypes.map(type => {
                                                            if (type.includes('image'))
                                                                return 'Images';
                                                            if (type.includes('pdf'))
                                                                return 'PDF';
                                                            if (type.includes('word'))
                                                                return 'DOCX';
                                                            if (type.includes('excel') || type.includes('sheet'))
                                                                return 'XLSX';
                                                            return type.split('/').pop()?.toUpperCase();
                                                        }).filter(Boolean).join(', ')] }), aiEnabled && ((0, jsx_runtime_1.jsx)("p", { className: "text-xs text-purple-500 dark:text-purple-400 mt-1", children: "\u2728 AI analysis will extract key information automatically" }))] })] })) }), validationError && ((0, jsx_runtime_1.jsx)("div", { className: "p-3 bg-red-50 dark:bg-red-950 border border-red-200 dark:border-red-800 rounded-lg", children: (0, jsx_runtime_1.jsxs)("p", { className: "text-sm text-red-600 dark:text-red-400", children: ["\u274C ", validationError] }) }))] }), (0, jsx_runtime_1.jsx)(tabs_1.TabsContent, { value: "text", className: "space-y-4", children: (0, jsx_runtime_1.jsxs)("div", { className: "space-y-2", children: [(0, jsx_runtime_1.jsx)(label_1.Label, { htmlFor: "text-content", className: "text-sm font-medium", children: "Document Content" }), (0, jsx_runtime_1.jsx)(textarea_1.Textarea, { id: "text-content", placeholder: "Enter your document content here...", value: textContent, onChange: handleTextChange, disabled: disabled, rows: 8, className: "resize-none", "data-testid": "textarea-document-content" }), (0, jsx_runtime_1.jsx)("p", { className: "text-xs text-gray-500 dark:text-gray-400", children: "Create a text-only document entry. You can add formatting and additional details later." })] }) })] })] }));
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiL2hvbWUvcnVubmVyL3dvcmtzcGFjZS9jbGllbnQvc3JjL2NvbXBvbmVudHMvZG9jdW1lbnQtbWFuYWdlbWVudC9TaGFyZWRVcGxvYWRlci50c3giLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFnREEsd0NBZ2FDOztBQWhkRCwrQ0FBd0U7QUFDeEUsK0NBQWtGO0FBQ2xGLHVDQUFpQztBQUNqQywrQ0FBZ0Y7QUFDaEYsdURBQW9EO0FBQ3BELGlEQUE4QztBQUc5QyxnRUFBd0c7QUF5QnhHLE1BQU0scUJBQXFCLEdBQUc7SUFDNUIsaUJBQWlCO0lBQ2pCLG9CQUFvQjtJQUNwQix5RUFBeUU7SUFDekUsMEJBQTBCO0lBQzFCLG1FQUFtRTtJQUNuRSxZQUFZO0lBQ1osV0FBVztJQUNYLFdBQVc7Q0FDWixDQUFDO0FBRUY7OztHQUdHO0FBQ0gsU0FBZ0IsY0FBYyxDQUFDLEVBQzdCLGdCQUFnQixFQUNoQixnQkFBZ0IsRUFDaEIsV0FBVyxFQUNYLFFBQVEsR0FBRyxLQUFLLEVBQ2hCLFNBQVMsRUFDVCxVQUFVLEdBQUcsTUFBTTtBQUNuQix1QkFBdUI7QUFDdkIsUUFBUSxHQUFHLFdBQVcsRUFDdEIsYUFBYSxFQUNiLGlCQUFpQixFQUFFLGFBQWEsRUFDaEMsVUFBVSxFQUNWLG9CQUFvQixFQUNwQixZQUFZLEdBQUcsSUFBSSxFQUNuQixhQUFhLEVBQ087SUFDcEIsdUNBQXVDO0lBQ3ZDLE1BQU0sTUFBTSxHQUFHLElBQUEsK0JBQWUsRUFBQyxRQUFRLENBQUMsQ0FBQztJQUN6QyxNQUFNLGlCQUFpQixHQUFHLGdCQUFnQixJQUFJLE1BQU0sQ0FBQyxnQkFBZ0IsQ0FBQztJQUN0RSxNQUFNLGdCQUFnQixHQUFHLFdBQVcsSUFBSSxNQUFNLENBQUMsV0FBVyxDQUFDO0lBQzNELE1BQU0sY0FBYyxHQUFHLGFBQWEsSUFBSSxNQUFNLENBQUMsaUJBQWlCLENBQUM7SUFFakUsbUJBQW1CO0lBQ25CLE1BQU0sQ0FBQyxTQUFTLEVBQUUsWUFBWSxDQUFD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LGVBQWUsSUFBSSxDQUNsQixnQ0FBSyxTQUFTLEVBQUMsb0ZBQW9GLFlBQ2pHLCtCQUFHLFNBQVMsRUFBQyx3Q0FBd0Msd0JBQUksZUFBZSxJQUFLLEdBQ3pFLENBQ1AsSUFDVyxFQUdkLHVCQUFDLGtCQUFXLElBQUMsS0FBSyxFQUFDLE1BQU0sRUFBQyxTQUFTLEVBQUMsV0FBVyxZQUM3QyxpQ0FBSyxTQUFTLEVBQUMsV0FBVyxhQUN4Qix1QkFBQyxhQUFLLElBQUMsT0FBTyxFQUFDLGNBQWMsRUFBQyxTQUFTLEVBQUMscUJBQXFCLGlDQUVyRCxFQUNSLHVCQUFDLG1CQUFRLElBQ1AsRUFBRSxFQUFDLGNBQWMsRUFDakIsV0FBVyxFQUFDLHFDQUFxQyxFQUNqRCxLQUFLLEVBQUUsV0FBVyxFQUNsQixRQUFRLEVBQUUsZ0JBQWdCLEVBQzFCLFFBQVEsRUFBRSxRQUFRLEVBQ2xCLElBQUksRUFBRSxDQUFDLEVBQ1AsU0FBUyxFQUFDLGFBQWEsaUJBQ1gsMkJBQTJCLEdBQ3ZDLEVBQ0YsOEJBQUcsU0FBUyxFQUFDLDBDQUEwQyx3R0FFbkQsSUFDQSxHQUNNLElBQ1QsSUFDSCxDQUNQLENBQUM7QUFDSixDQUFDIiwibmFtZXMiOltdLCJzb3VyY2VzIjpbIi9ob21lL3J1bm5lci93b3Jrc3BhY2UvY2xpZW50L3NyYy9jb21wb25lbnRzL2RvY3VtZW50LW1hbmFnZW1lbnQvU2hhcmVkVXBsb2FkZXIudHN4Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBSZWFjdCwgeyB1c2VTdGF0ZSwgdXNlUmVmLCB1c2VDYWxsYmFjaywgdXNlRWZmZWN0IH0gZnJvbSAncmVhY3QnO1xuaW1wb3J0IHsgVXBsb2FkLCBYLCBGaWxlLCBJbWFnZSwgRmlsZVRleHQsIENhbWVyYSwgU3BhcmtsZXMgfSBmcm9tICdsdWNpZGUtcmVhY3QnO1xuaW1wb3J0IHsgY24gfSBmcm9tICdAL2xpYi91dGlscyc7XG5pbXBvcnQgeyBUYWJzLCBUYWJzQ29udGVudCwgVGFic0xpc3QsIFRhYnNUcmlnZ2VyIH0gZnJvbSAnQC9jb21wb25lbnRzL3VpL3RhYnMnO1xuaW1wb3J0IHsgVGV4dGFyZWEgfSBmcm9tICdAL2NvbXBvbmVudHMvdWkvdGV4dGFyZWEnO1xuaW1wb3J0IHsgTGFiZWwgfSBmcm9tICdAL2NvbXBvbmVudHMvdWkvbGFiZWwnO1xuaW1wb3J0IHsgU3dpdGNoIH0gZnJvbSAnQC9jb21wb25lbnRzL3VpL3N3aXRjaCc7XG5pbXBvcnQgeyBCYWRnZSB9IGZyb20gJ0AvY29tcG9uZW50cy91aS9iYWRnZSc7XG5pbXBvcnQgeyBnZXRVcGxvYWRDb25maWcsIGlzQWlBbmFseXNpc0VuYWJsZWQsIHR5cGUgVXBsb2FkQ29udGV4dCB9IGZyb20gJ0BzaGFyZWQvY29uZmlnL3VwbG9hZC1jb25maWcnO1xuXG5pbnRlcmZhY2UgU2hhcmVkVXBsb2FkZXJQcm9wcyB7XG4gIG9uRG9jdW1lbnRDaGFuZ2U6IChmaWxlOiBGaWxlIHwgbnVsbCwgdGV4dDogc3RyaW5nIHwgbnVsbCkgPT4gdm9pZDtcbiAgYWxsb3dlZEZpbGVUeXBlcz86IHN0cmluZ1tdO1xuICBtYXhGaWxlU2l6ZT86IG51bWJlcjsgLy8gaW4gTUJcbiAgZGlzYWJsZWQ/OiBib29sZWFuO1xuICBjbGFzc05hbWU/OiBzdHJpbmc7XG4gIGRlZmF1bHRUYWI/OiAnZmlsZScgfCAndGV4dCc7XG4gIC8vIEFJIEVuaGFuY2VtZW50IFByb3BzXG4gIGZvcm1UeXBlPzogc3RyaW5nO1xuICB1cGxvYWRDb250ZXh0PzogVXBsb2FkQ29udGV4dDtcbiAgYWlBbmFseXNpc0VuYWJsZWQ/OiBib29sZWFuO1xuICBvbkFpVG9nZ2xlPzogKGVuYWJsZWQ6IGJvb2xlYW4pID0+IHZvaWQ7XG4gIG9uQWlBbmFseXNpc0NvbXBsZXRlPzogKGRhdGE6IGFueSkgPT4gdm9pZDtcbiAgc2hvd0FpVG9nZ2xlPzogYm9vbGVhbjtcbiAgY29udGV4dEZpZWxkcz86IFJlY29yZDxzdHJpbmcsIGFueT47XG59XG5cbmludGVyZmFjZSBGaWxlUHJldmlldyB7XG4gIGZpbGU6IEZpbGU7XG4gIHByZXZpZXc/OiBzdHJpbmc7XG4gIHR5cGU6ICdpbWFnZScgfCAnZG9jdW1lbnQnO1xufVxuXG5jb25zdCBERUZBVUxUX0FMTE9XRURfVFlQRVMgPSBbXG4gICdhcHBsaWNhdGlvbi9wZGYnLFxuICAnYXBwbGljYXRpb24vbXN3b3JkJyxcbiAgJ2FwcGxpY2F0aW9uL3ZuZC5vcGVueG1sZm9ybWF0cy1vZmZpY2Vkb2N1bWVudC53b3JkcHJvY2Vzc2luZ21sLmRvY3VtZW50JyxcbiAgJ2FwcGxpY2F0aW9uL3ZuZC5tcy1leGNlbCcsXG4gICdhcHBsaWNhdGlvbi92bmQub3BlbnhtbGZvcm1hdHMtb2ZmaWNlZG9jdW1lbnQuc3ByZWFkc2hlZXRtbC5zaGVldCcsXG4gICdpbWFnZS9qcGVnJyxcbiAgJ2ltYWdlL2pwZycsXG4gICdpbWFnZS9wbmcnXG5dO1xuXG4vKipcbiAqIFNoYXJlZFVwbG9hZGVyIC0gQSByZXVzYWJsZSBjb21wb25lbnQgZm9yIGZpbGUgdXBsb2FkcyBhbmQgdGV4dCBjcmVhdGlvblxuICogRmVhdHVyZXMgbW9iaWxlIGNhbWVyYSBpbnRlZ3JhdGlvbiwgZHJhZy1hbmQtZHJvcCwgY2xpcGJvYXJkIHBhc3RlLCBhbmQgdGV4dCBpbnB1dFxuICovXG5leHBvcnQgZnVuY3Rpb24gU2hhcmVkVXBsb2FkZXIoe1xuICBvbkRvY3VtZW50Q2hhbmdlLFxuICBhbGxvd2VkRmlsZVR5cGVzLFxuICBtYXhGaWxlU2l6ZSxcbiAgZGlzYWJsZWQgPSBmYWxzZSxcbiAgY2xhc3NOYW1lLFxuICBkZWZhdWx0VGFiID0gJ2ZpbGUnLFxuICAvLyBBSSBFbmhhbmNlbWVudCBQcm9wc1xuICBmb3JtVHlwZSA9ICdkb2N1bWVudHMnLFxuICB1cGxvYWRDb250ZXh0LFxuICBhaUFuYWx5c2lzRW5hYmxlZDogcHJvcEFpRW5hYmxlZCxcbiAgb25BaVRvZ2dsZSxcbiAgb25BaUFuYWx5c2lzQ29tcGxldGUsXG4gIHNob3dBaVRvZ2dsZSA9IHRydWUsXG4gIGNvbnRleHRGaWVsZHNcbn06IFNoYXJlZFVwbG9hZGVyUHJvcHMpIHtcbiAgLy8gR2V0IGNvbmZpZ3VyYXRpb24gZnJvbSB1cGxvYWQgY29uZmlnXG4gIGNvbnN0IGNvbmZpZyA9IGdldFVwbG9hZENvbmZpZyhmb3JtVHlwZSk7XG4gIGNvbnN0IGZpbmFsQWxsb3dlZFR5cGVzID0gYWxsb3dlZEZpbGVUeXBlcyB8fCBjb25maWcuYWxsb3dlZEZpbGVUeXBlcztcbiAgY29uc3QgZmluYWxNYXhGaWxlU2l6ZSA9IG1heEZpbGVTaXplIHx8IGNvbmZpZy5tYXhGaWxlU2l6ZTtcbiAgY29uc3QgZmluYWxBaUVuYWJsZWQgPSBwcm9wQWlFbmFibGVkID8/IGNvbmZpZy5haUFuYWx5c2lzRW5hYmxlZDtcblxuICAvLyBTdGF0ZSBtYW5hZ2VtZW50XG4gIGNvbnN0IFthY3RpdmVUYWIsIHNldEFjdGl2ZVRhYl0gPSB1c2VTdGF0ZShkZWZhdWx0VGFiKTtcbiAgY29uc3QgW2lzRHJhZ092ZXIsIHNldElzRHJhZ092ZXJdID0gdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBbc2VsZWN0ZWRGaWxlLCBzZXRTZWxlY3RlZEZpbGVdID0gdXNlU3RhdGU8RmlsZVByZXZpZXcgfCBudWxsPihudWxsKTtcbiAgY29uc3QgW3RleHRDb250ZW50LCBzZXRUZXh0Q29udGVudF0gPSB1c2VTdGF0ZSgnJyk7XG4gIGNvbnN0IFt2YWxpZGF0aW9uRXJyb3IsIHNldFZhbGlkYXRpb25FcnJvcl0gPSB1c2VTdGF0ZTxzdHJpbmcgfCBudWxsPihudWxsKTtcbiAgY29uc3QgW2FpRW5hYmxlZCwgc2V0QWlFbmFibGVkXSA9IHVzZVN0YXRlKGZpbmFsQWlFbmFibGVkKTtcbiAgY29uc3QgW2lzQW5hbHl6aW5nLCBzZXRJc0FuYWx5emluZ10gPSB1c2VTdGF0ZShmYWxzZSk7XG5cbiAgLy8gUmVmc1xuICBjb25zdCBmaWxlSW5wdXRSZWYgPSB1c2VSZWY8SFRNTElucHV0RWxlbWVudD4obnVsbCk7XG4gIGNvbnN0IHVwbG9hZEFyZWFSZWYgPSB1c2VSZWY8SFRNTERpdkVsZW1lbnQ+KG51bGwpO1xuXG4gIC8vIEhhbmRsZSBBSSB0b2dnbGVcbiAgY29uc3QgaGFuZGxlQWlUb2dnbGUgPSB1c2VDYWxsYmFjaygoZW5hYmxlZDogYm9vbGVhbikgPT4ge1xuICAgIHNldEFpRW5hYmxlZChlbmFibGVkKTtcbiAgICBvbkFpVG9nZ2xlPy4oZW5hYmxlZCk7XG4gIH0sIFtvbkFpVG9nZ2xlXSk7XG5cbiAgLy8gRmlsZSB2YWxpZGF0aW9uIGZ1bmN0aW9uXG4gIGNvbnN0IHZhbGlkYXRlRmlsZSA9IHVzZUNhbGxiYWNrKChmaWxlOiBGaWxlKTogc3RyaW5nIHwgbnVsbCA9PiB7XG4gICAgLy8gQ2hlY2sgZmlsZSBzaXplXG4gICAgaWYgKGZpbGUuc2l6ZSA+IGZpbmFsTWF4RmlsZVNpemUgKiAxMDI0ICogMTAyNCkge1xuICAgICAgcmV0dXJuIGBGaWxlIHNpemUgZXhjZWVkcyAke2ZpbmFsTWF4RmlsZVNpemV9TUIgbGltaXRgO1xuICAgIH1cblxuICAgIC8vIENoZWNrIGZpbGUgdHlwZVxuICAgIGNvbnN0IGlzQWxsb3dlZCA9IGZpbmFsQWxsb3dlZFR5cGVzLnNvbWUodHlwZSA9PiB7XG4gICAgICBpZiAodHlwZS5pbmNsdWRlcygnKicpKSB7XG4gICAgICAgIHJldHVybiBmaWxlLnR5cGUuc3RhcnRzV2l0aCh0eXBlLnJlcGxhY2UoJyonLCAnJykpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIGZpbGUudHlwZSA9PT0gdHlwZTtcbiAgICB9KTtcblxuICAgIGlmICghaXNBbGxvd2VkKSB7XG4gICAgICByZXR1cm4gYEZpbGUgdHlwZSBcIiR7ZmlsZS50eXBlfVwiIGlzIG5vdCBzdXBwb3J0ZWRgO1xuICAgIH1cblxuICAgIC8vIENoZWNrIGZpbGVuYW1lIGZvciBzZWN1cml0eVxuICAgIGlmIChmaWxlLm5hbWUuaW5jbHVkZXMoJy4uJykgfHwgZmlsZS5uYW1lLmluY2x1ZGVzKCcvJykgfHwgZmlsZS5uYW1lLmluY2x1ZGVzKCdcXFxcJykpIHtcbiAgICAgIHJldHVybiAnSW52YWxpZCBmaWxlbmFtZSBkZXRlY3RlZCc7XG4gICAgfVxuXG4gICAgcmV0dXJuIG51bGw7XG4gIH0sIFtmaW5hbEFsbG93ZWRUeXBlcywgZmluYWxNYXhGaWxlU2l6ZV0pO1xuXG4gIC8vIEFJIEFuYWx5c2lzIGZ1bmN0aW9uXG4gIGNvbnN0IHBlcmZvcm1BaUFuYWx5c2lzID0gdXNlQ2FsbGJhY2soYXN5bmMgKGZpbGU6IEZpbGUpID0+IHtcbiAgICBpZiAoIWFpRW5hYmxlZCB8fCAhb25BaUFuYWx5c2lzQ29tcGxldGUpIHJldHVybjtcbiAgICBcbiAgICBzZXRJc0FuYWx5emluZyh0cnVlKTtcbiAgICB0cnkge1xuICAgICAgLy8gQ3JlYXRlIEZvcm1EYXRhIGZvciBBSSBhbmFseXNpc1xuICAgICAgY29uc3QgZm9ybURhdGEgPSBuZXcgRm9ybURhdGEoKTtcbiAgICAgIGZvcm1EYXRhLmFwcGVuZCgnZG9jdW1lbnQnLCBmaWxlKTtcbiAgICAgIGZvcm1EYXRhLmFwcGVuZCgnZm9ybVR5cGUnLCBmb3JtVHlwZSk7XG4gICAgICBcbiAgICAgIGlmICh1cGxvYWRDb250ZXh0KSB7XG4gICAgICAgIGZvcm1EYXRhLmFwcGVuZCgndXBsb2FkQ29udGV4dCcsIEpTT04uc3RyaW5naWZ5KHVwbG9hZENvbnRleHQpKTtcbiAgICAgIH1cbiAgICAgIFxuICAgICAgLy8gTWFrZSBBSSBhbmFseXNpcyByZXF1ZXN0XG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKCcvYXBpL2FpL2FuYWx5emUtZG9jdW1lbnQnLCB7XG4gICAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgICBib2R5OiBmb3JtRGF0YSxcbiAgICAgICAgY3JlZGVudGlhbHM6ICdpbmNsdWRlJ1xuICAgICAgfSk7XG4gICAgICBcbiAgICAgIGlmIChyZXNwb25zZS5vaykge1xuICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCByZXNwb25zZS5qc29uKCk7XG4gICAgICAgIG9uQWlBbmFseXNpc0NvbXBsZXRlKHJlc3VsdCk7XG4gICAgICB9XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0FJIGFuYWx5c2lzIGZhaWxlZDonLCBlcnJvcik7XG4gICAgfSBmaW5hbGx5IHtcbiAgICAgIHNldElzQW5hbHl6aW5nKGZhbHNlKTtcbiAgICB9XG4gIH0sIFthaUVuYWJsZWQsIG9uQWlBbmFseXNpc0NvbXBsZXRlLCBmb3JtVHlwZSwgdXBsb2FkQ29udGV4dF0pO1xuXG4gIC8vIFByb2Nlc3MgYW5kIHZhbGlkYXRlIGZpbGVcbiAgY29uc3QgcHJvY2Vzc0ZpbGUgPSB1c2VDYWxsYmFjaygoZmlsZTogRmlsZSk6IHZvaWQgPT4ge1xuICAgIGNvbnN0IGVycm9yID0gdmFsaWRhdGVGaWxlKGZpbGUpO1xuICAgIGlmIChlcnJvcikge1xuICAgICAgc2V0VmFsaWRhdGlvbkVycm9yKGVycm9yKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBzZXRWYWxpZGF0aW9uRXJyb3IobnVsbCk7XG4gICAgY29uc3QgaXNJbWFnZSA9IGZpbGUudHlwZS5zdGFydHNXaXRoKCdpbWFnZS8nKTtcbiAgICBcbiAgICBjb25zdCBmaWxlUHJldmlldzogRmlsZVByZXZpZXcgPSB7XG4gICAgICBmaWxlLFxuICAgICAgdHlwZTogaXNJbWFnZSA/ICdpbWFnZScgOiAnZG9jdW1lbnQnXG4gICAgfTtcblxuICAgIGlmIChpc0ltYWdlKSB7XG4gICAgICBmaWxlUHJldmlldy5wcmV2aWV3ID0gVVJMLmNyZWF0ZU9iamVjdFVSTChmaWxlKTtcbiAgICB9XG5cbiAgICBzZXRTZWxlY3RlZEZpbGUoZmlsZVByZXZpZXcpO1xuICAgIG9uRG9jdW1lbnRDaGFuZ2UoZmlsZSwgbnVsbCk7XG4gICAgXG4gICAgLy8gVHJpZ2dlciBBSSBhbmFseXNpcyBpZiBlbmFibGVkXG4gICAgaWYgKGFpRW5hYmxlZCkge1xuICAgICAgcGVyZm9ybUFpQW5hbHlzaXMoZmlsZSk7XG4gICAgfVxuICB9LCBbdmFsaWRhdGVGaWxlLCBvbkRvY3VtZW50Q2hhbmdlLCBhaUVuYWJsZWQsIHBlcmZvcm1BaUFuYWx5c2lzXSk7XG5cbiAgLy8gSGFuZGxlIGZpbGUgc2VsZWN0aW9uIGZyb20gaW5wdXRcbiAgY29uc3QgaGFuZGxlRmlsZVNlbGVjdCA9IHVzZUNhbGxiYWNrKChlOiBSZWFjdC5DaGFuZ2VFdmVudDxIVE1MSW5wdXRFbGVtZW50PikgPT4ge1xuICAgIGNvbnN0IGZpbGUgPSBlLnRhcmdldC5maWxlcz8uWzBdO1xuICAgIGlmIChmaWxlKSB7XG4gICAgICBwcm9jZXNzRmlsZShmaWxlKTtcbiAgICB9XG4gICAgLy8gUmVzZXQgaW5wdXQgdG8gYWxsb3cgc2VsZWN0aW5nIHRoZSBzYW1lIGZpbGUgYWdhaW5cbiAgICBlLnRhcmdldC52YWx1ZSA9ICcnO1xuICB9LCBbcHJvY2Vzc0ZpbGVdKTtcblxuICAvLyBIYW5kbGUgZHJhZyBhbmQgZHJvcFxuICBjb25zdCBoYW5kbGVEcmFnT3ZlciA9IHVzZUNhbGxiYWNrKChlOiBSZWFjdC5EcmFnRXZlbnQpID0+IHtcbiAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICBpZiAoIWRpc2FibGVkKSB7XG4gICAgICBzZXRJc0RyYWdPdmVyKHRydWUpO1xuICAgIH1cbiAgfSwgW2Rpc2FibGVkXSk7XG5cbiAgY29uc3QgaGFuZGxlRHJhZ0xlYXZlID0gdXNlQ2FsbGJhY2soKGU6IFJlYWN0LkRyYWdFdmVudCkgPT4ge1xuICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xuICAgIHNldElzRHJhZ092ZXIoZmFsc2UpO1xuICB9LCBbXSk7XG5cbiAgY29uc3QgaGFuZGxlRHJvcCA9IHVzZUNhbGxiYWNrKChlOiBSZWFjdC5EcmFnRXZlbnQpID0+IHtcbiAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICBzZXRJc0RyYWdPdmVyKGZhbHNlKTtcblxuICAgIGlmIChkaXNhYmxlZCkgcmV0dXJuO1xuXG4gICAgY29uc3QgZmlsZXMgPSBBcnJheS5mcm9tKGUuZGF0YVRyYW5zZmVyLmZpbGVzKTtcbiAgICBpZiAoZmlsZXMubGVuZ3RoID4gMCkge1xuICAgICAgcHJvY2Vzc0ZpbGUoZmlsZXNbMF0pOyAvLyBPbmx5IGhhbmRsZSBmaXJzdCBmaWxlXG4gICAgfVxuICB9LCBbZGlzYWJsZWQsIHByb2Nlc3NGaWxlXSk7XG5cbiAgLy8gSGFuZGxlIGNsaXBib2FyZCBwYXN0ZSBmb3Igc2NyZWVuc2hvdHNcbiAgY29uc3QgaGFuZGxlUGFzdGUgPSB1c2VDYWxsYmFjaygoZTogQ2xpcGJvYXJkRXZlbnQpID0+IHtcbiAgICBpZiAoZGlzYWJsZWQgfHwgYWN0aXZlVGFiICE9PSAnZmlsZScpIHJldHVybjtcblxuICAgIGNvbnN0IGl0ZW1zID0gZS5jbGlwYm9hcmREYXRhPy5pdGVtcztcbiAgICBpZiAoIWl0ZW1zKSByZXR1cm47XG5cbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGl0ZW1zLmxlbmd0aDsgaSsrKSB7XG4gICAgICBjb25zdCBpdGVtID0gaXRlbXNbaV07XG4gICAgICBpZiAoaXRlbS50eXBlLmluZGV4T2YoJ2ltYWdlJykgIT09IC0xKSB7XG4gICAgICAgIGNvbnN0IGJsb2IgPSBpdGVtLmdldEFzRmlsZSgpO1xuICAgICAgICBpZiAoYmxvYikge1xuICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAvLyBDcmVhdGUgcHJvcGVyIEZpbGUgb2JqZWN0IGZvciBwYXN0ZWQgaW1hZ2VzXG4gICAgICAgICAgY29uc3QgdGltZXN0YW1wID0gbmV3IERhdGUoKS50b0lTT1N0cmluZygpLnJlcGxhY2UoL1s6Ll0vZywgJy0nKTtcbiAgICAgICAgICBjb25zdCBmaWxlID0gbmV3IEZpbGUoW2Jsb2JdLCBgc2NyZWVuc2hvdC0ke3RpbWVzdGFtcH0ucG5nYCwge1xuICAgICAgICAgICAgdHlwZTogJ2ltYWdlL3BuZydcbiAgICAgICAgICB9KTtcbiAgICAgICAgICBwcm9jZXNzRmlsZShmaWxlKTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfSwgW2Rpc2FibGVkLCBhY3RpdmVUYWIsIHByb2Nlc3NGaWxlXSk7XG5cbiAgLy8gU2V0IHVwIHBhc3RlIGV2ZW50IGxpc3RlbmVyXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgaWYgKGFjdGl2ZVRhYiA9PT0gJ2ZpbGUnICYmICFkaXNhYmxlZCkge1xuICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigncGFzdGUnLCBoYW5kbGVQYXN0ZSk7XG4gICAgICByZXR1cm4gKCkgPT4gZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcigncGFzdGUnLCBoYW5kbGVQYXN0ZSk7XG4gICAgfVxuICB9LCBbYWN0aXZlVGFiLCBkaXNhYmxlZCwgaGFuZGxlUGFzdGVdKTtcblxuICAvLyBIYW5kbGUgdGV4dCBjb250ZW50IGNoYW5nZXNcbiAgY29uc3QgaGFuZGxlVGV4dENoYW5nZSA9IHVzZUNhbGxiYWNrKChlOiBSZWFjdC5DaGFuZ2VFdmVudDxIVE1MVGV4dEFyZWFFbGVtZW50PikgPT4ge1xuICAgIGNvbnN0IHRleHQgPSBlLnRhcmdldC52YWx1ZTtcbiAgICBzZXRUZXh0Q29udGVudCh0ZXh0KTtcbiAgICBvbkRvY3VtZW50Q2hhbmdlKG51bGwsIHRleHQgfHwgbnVsbCk7XG4gIH0sIFtvbkRvY3VtZW50Q2hhbmdlXSk7XG5cbiAgLy8gUmVtb3ZlIHNlbGVjdGVkIGZpbGVcbiAgY29uc3QgaGFuZGxlUmVtb3ZlRmlsZSA9IHVzZUNhbGxiYWNrKCgpID0+IHtcbiAgICBpZiAoc2VsZWN0ZWRGaWxlPy5wcmV2aWV3KSB7XG4gICAgICBVUkwucmV2b2tlT2JqZWN0VVJMKHNlbGVjdGVkRmlsZS5wcmV2aWV3KTtcbiAgICB9XG4gICAgc2V0U2VsZWN0ZWRGaWxlKG51bGwpO1xuICAgIHNldFZhbGlkYXRpb25FcnJvcihudWxsKTtcbiAgICBvbkRvY3VtZW50Q2hhbmdlKG51bGwsIG51bGwpO1xuICB9LCBbc2VsZWN0ZWRGaWxlLCBvbkRvY3VtZW50Q2hhbmdlXSk7XG5cbiAgLy8gT3BlbiBmaWxlIGRpYWxvZ1xuICBjb25zdCBvcGVuRmlsZURpYWxvZyA9IHVzZUNhbGxiYWNrKCgpID0+IHtcbiAgICBpZiAoIWRpc2FibGVkICYmIGZpbGVJbnB1dFJlZi5jdXJyZW50KSB7XG4gICAgICBmaWxlSW5wdXRSZWYuY3VycmVudC5jbGljaygpO1xuICAgIH1cbiAgfSwgW2Rpc2FibGVkXSk7XG5cbiAgLy8gVGFiIGNoYW5nZSBoYW5kbGVyXG4gIGNvbnN0IGhhbmRsZVRhYkNoYW5nZSA9IHVzZUNhbGxiYWNrKCh2YWx1ZTogc3RyaW5nKSA9PiB7XG4gICAgc2V0QWN0aXZlVGFiKHZhbHVlIGFzICdmaWxlJyB8ICd0ZXh0Jyk7XG4gICAgXG4gICAgLy8gQ2xlYXIgY3VycmVudCBzZWxlY3Rpb24gd2hlbiBzd2l0Y2hpbmcgdGFic1xuICAgIGlmIChzZWxlY3RlZEZpbGUpIHtcbiAgICAgIGhhbmRsZVJlbW92ZUZpbGUoKTtcbiAgICB9XG4gICAgaWYgKHRleHRDb250ZW50KSB7XG4gICAgICBzZXRUZXh0Q29udGVudCgnJyk7XG4gICAgICBvbkRvY3VtZW50Q2hhbmdlKG51bGwsIG51bGwpO1xuICAgIH1cbiAgfSwgW3NlbGVjdGVkRmlsZSwgdGV4dENvbnRlbnQsIGhhbmRsZVJlbW92ZUZpbGUsIG9uRG9jdW1lbnRDaGFuZ2VdKTtcblxuICAvLyBDbGVhbiB1cCBwcmV2aWV3IFVSTHMgb24gdW5tb3VudFxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIHJldHVybiAoKSA9PiB7XG4gICAgICBpZiAoc2VsZWN0ZWRGaWxlPy5wcmV2aWV3KSB7XG4gICAgICAgIFVSTC5yZXZva2VPYmplY3RVUkwoc2VsZWN0ZWRGaWxlLnByZXZpZXcpO1xuICAgICAgfVxuICAgIH07XG4gIH0sIFtzZWxlY3RlZEZpbGVdKTtcblxuICBjb25zdCBmb3JtYXRGaWxlU2l6ZSA9IChieXRlczogbnVtYmVyKSA9PiB7XG4gICAgY29uc3Qga2IgPSBieXRlcyAvIDEwMjQ7XG4gICAgaWYgKGtiIDwgMTAyNCkgcmV0dXJuIGAke2tiLnRvRml4ZWQoMSl9IEtCYDtcbiAgICBjb25zdCBtYiA9IGtiIC8gMTAyNDtcbiAgICByZXR1cm4gYCR7bWIudG9GaXhlZCgxKX0gTUJgO1xuICB9O1xuXG4gIHJldHVybiAoXG4gICAgPGRpdiBjbGFzc05hbWU9e2NuKFwidy1mdWxsXCIsIGNsYXNzTmFtZSl9PlxuICAgICAgey8qIEFJIEFuYWx5c2lzIFN0YXR1cyAob25seSBzaG93IHdoZW4gYW5hbHl6aW5nLCBubyB0b2dnbGUpICovfVxuICAgICAge2lzQW5hbHl6aW5nICYmIChcbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGl0ZW1zLWNlbnRlciBnYXAtMiBwLTMgYmctYmx1ZS01MCBkYXJrOmJnLWJsdWUtOTUwIHJvdW5kZWQtbGcgbWItNFwiPlxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiYW5pbWF0ZS1zcGluIHJvdW5kZWQtZnVsbCBoLTMgdy0zIGJvcmRlci1iLTIgYm9yZGVyLWJsdWUtNjAwXCI+PC9kaXY+XG4gICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPVwidGV4dC1zbSB0ZXh0LWJsdWUtNjAwIGRhcms6dGV4dC1ibHVlLTQwMFwiPlxuICAgICAgICAgICAgQUkgYW5hbHl6aW5nIGRvY3VtZW50Li4uXG4gICAgICAgICAgPC9zcGFuPlxuICAgICAgICA8L2Rpdj5cbiAgICAgICl9XG5cbiAgICAgIDxUYWJzIHZhbHVlPXthY3RpdmVUYWJ9IG9uVmFsdWVDaGFuZ2U9e2hhbmRsZVRhYkNoYW5nZX0gY2xhc3NOYW1lPVwidy1mdWxsXCI+XG4gICAgICAgIDxUYWJzTGlzdCBjbGFzc05hbWU9XCJncmlkIHctZnVsbCBncmlkLWNvbHMtMlwiPlxuICAgICAgICAgIDxUYWJzVHJpZ2dlciB2YWx1ZT1cImZpbGVcIiBkYXRhLXRlc3RpZD1cInRhYi11cGxvYWQtZmlsZVwiPlxuICAgICAgICAgICAg8J+TgSBVcGxvYWQgRmlsZVxuICAgICAgICAgIDwvVGFic1RyaWdnZXI+XG4gICAgICAgICAgPFRhYnNUcmlnZ2VyIHZhbHVlPVwidGV4dFwiIGRhdGEtdGVzdGlkPVwidGFiLXRleHQtZG9jdW1lbnRcIj5cbiAgICAgICAgICAgIPCfk50gVGV4dCBEb2N1bWVudFxuICAgICAgICAgIDwvVGFic1RyaWdnZXI+XG4gICAgICAgIDwvVGFic0xpc3Q+XG5cbiAgICAgICAgey8qIEZpbGUgVXBsb2FkIFRhYiAqL31cbiAgICAgICAgPFRhYnNDb250ZW50IHZhbHVlPVwiZmlsZVwiIGNsYXNzTmFtZT1cInNwYWNlLXktNFwiPlxuICAgICAgICAgIHsvKiBIaWRkZW4gZmlsZSBpbnB1dCB3aXRoIG1vYmlsZSBjYW1lcmEgaW50ZWdyYXRpb24gKi99XG4gICAgICAgICAgPGlucHV0XG4gICAgICAgICAgICByZWY9e2ZpbGVJbnB1dFJlZn1cbiAgICAgICAgICAgIHR5cGU9XCJmaWxlXCJcbiAgICAgICAgICAgIGFjY2VwdD17ZmluYWxBbGxvd2VkVHlwZXMuam9pbignLCcpfVxuICAgICAgICAgICAgY2FwdHVyZT1cImVudmlyb25tZW50XCIgLy8gTW9iaWxlIGNhbWVyYSBpbnRlZ3JhdGlvbiBmb3IgcmVhciBjYW1lcmFcbiAgICAgICAgICAgIG9uQ2hhbmdlPXtoYW5kbGVGaWxlU2VsZWN0fVxuICAgICAgICAgICAgY2xhc3NOYW1lPVwiaGlkZGVuXCJcbiAgICAgICAgICAgIGRpc2FibGVkPXtkaXNhYmxlZH1cbiAgICAgICAgICAgIGRhdGEtdGVzdGlkPVwiZmlsZS1pbnB1dC1tb2JpbGVcIlxuICAgICAgICAgIC8+XG5cbiAgICAgICAgICB7LyogVXBsb2FkIGFyZWEgd2l0aCBkcmFnLWFuZC1kcm9wICovfVxuICAgICAgICAgIDxkaXZcbiAgICAgICAgICAgIHJlZj17dXBsb2FkQXJlYVJlZn1cbiAgICAgICAgICAgIG9uRHJhZ092ZXI9e2hhbmRsZURyYWdPdmVyfVxuICAgICAgICAgICAgb25EcmFnTGVhdmU9e2hhbmRsZURyYWdMZWF2ZX1cbiAgICAgICAgICAgIG9uRHJvcD17aGFuZGxlRHJvcH1cbiAgICAgICAgICAgIG9uQ2xpY2s9e29wZW5GaWxlRGlhbG9nfVxuICAgICAgICAgICAgY2xhc3NOYW1lPXtjbihcbiAgICAgICAgICAgICAgXCJyZWxhdGl2ZSBib3JkZXItMiBib3JkZXItZGFzaGVkIHJvdW5kZWQtbGcgcC02IHRleHQtY2VudGVyIGN1cnNvci1wb2ludGVyIHRyYW5zaXRpb24tY29sb3JzIG1pbi1oLVsxMjBweF0gZmxleCBmbGV4LWNvbCBqdXN0aWZ5LWNlbnRlciBpdGVtcy1jZW50ZXJcIixcbiAgICAgICAgICAgICAgaXNEcmFnT3ZlclxuICAgICAgICAgICAgICAgID8gXCJib3JkZXItYmx1ZS01MDAgYmctYmx1ZS01MCBkYXJrOmJnLWJsdWUtOTUwXCJcbiAgICAgICAgICAgICAgICA6IFwiYm9yZGVyLWdyYXktMzAwIGhvdmVyOmJvcmRlci1ncmF5LTQwMCBkYXJrOmJvcmRlci1ncmF5LTYwMCBkYXJrOmhvdmVyOmJvcmRlci1ncmF5LTUwMFwiLFxuICAgICAgICAgICAgICBkaXNhYmxlZCAmJiBcImN1cnNvci1ub3QtYWxsb3dlZCBvcGFjaXR5LTUwXCJcbiAgICAgICAgICAgICl9XG4gICAgICAgICAgICBkYXRhLXRlc3RpZD1cInVwbG9hZC1hcmVhXCJcbiAgICAgICAgICA+XG4gICAgICAgICAgICB7c2VsZWN0ZWRGaWxlID8gKFxuICAgICAgICAgICAgICAvLyBGaWxlIHByZXZpZXdcbiAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ3LWZ1bGwgc3BhY2UteS0zXCI+XG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGl0ZW1zLWNlbnRlciBnYXAtMyBwLTMgYmctZ3JheS01MCBkYXJrOmJnLWdyYXktODAwIHJvdW5kZWQtbGdcIj5cbiAgICAgICAgICAgICAgICAgIHtzZWxlY3RlZEZpbGUudHlwZSA9PT0gJ2ltYWdlJyAmJiBzZWxlY3RlZEZpbGUucHJldmlldyA/IChcbiAgICAgICAgICAgICAgICAgICAgPGltZ1xuICAgICAgICAgICAgICAgICAgICAgIHNyYz17c2VsZWN0ZWRGaWxlLnByZXZpZXd9XG4gICAgICAgICAgICAgICAgICAgICAgYWx0PVwiUHJldmlld1wiXG4gICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwidy0xMiBoLTEyIG9iamVjdC1jb3ZlciByb3VuZGVkXCJcbiAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICkgOiBzZWxlY3RlZEZpbGUudHlwZSA9PT0gJ2ltYWdlJyA/IChcbiAgICAgICAgICAgICAgICAgICAgPEltYWdlIGNsYXNzTmFtZT1cInctMTIgaC0xMiB0ZXh0LWdyYXktNDAwXCIgLz5cbiAgICAgICAgICAgICAgICAgICkgOiAoXG4gICAgICAgICAgICAgICAgICAgIDxGaWxlIGNsYXNzTmFtZT1cInctMTIgaC0xMiB0ZXh0LWdyYXktNDAwXCIgLz5cbiAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleC0xIG1pbi13LTAgdGV4dC1sZWZ0XCI+XG4gICAgICAgICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cInRleHQtc20gZm9udC1tZWRpdW0gdGV4dC1ncmF5LTkwMCBkYXJrOnRleHQtZ3JheS0xMDAgdHJ1bmNhdGVcIj5cbiAgICAgICAgICAgICAgICAgICAgICB7c2VsZWN0ZWRGaWxlLmZpbGUubmFtZX1cbiAgICAgICAgICAgICAgICAgICAgPC9wPlxuICAgICAgICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJ0ZXh0LXhzIHRleHQtZ3JheS01MDAgZGFyazp0ZXh0LWdyYXktNDAwXCI+XG4gICAgICAgICAgICAgICAgICAgICAge2Zvcm1hdEZpbGVTaXplKHNlbGVjdGVkRmlsZS5maWxlLnNpemUpfVxuICAgICAgICAgICAgICAgICAgICA8L3A+XG4gICAgICAgICAgICAgICAgICA8L2Rpdj5cblxuICAgICAgICAgICAgICAgICAgPGJ1dHRvblxuICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXsoZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgICAgICAgICAgICAgICAgICAgaGFuZGxlUmVtb3ZlRmlsZSgpO1xuICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJwLTEgaG92ZXI6YmctZ3JheS0yMDAgZGFyazpob3ZlcjpiZy1ncmF5LTcwMCByb3VuZGVkXCJcbiAgICAgICAgICAgICAgICAgICAgZGlzYWJsZWQ9e2Rpc2FibGVkfVxuICAgICAgICAgICAgICAgICAgICBkYXRhLXRlc3RpZD1cInJlbW92ZS1maWxlLWJ1dHRvblwiXG4gICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgIDxYIGNsYXNzTmFtZT1cInctNCBoLTQgdGV4dC1ncmF5LTUwMFwiIC8+XG4gICAgICAgICAgICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJ0ZXh0LXhzIHRleHQtZ3JlZW4tNjAwIGRhcms6dGV4dC1ncmVlbi00MDBcIj5cbiAgICAgICAgICAgICAgICAgIOKckyBGaWxlIHJlYWR5IGZvciB1cGxvYWRcbiAgICAgICAgICAgICAgICA8L3A+XG4gICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgKSA6IChcbiAgICAgICAgICAgICAgLy8gVXBsb2FkIHByb21wdFxuICAgICAgICAgICAgICA8PlxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBpdGVtcy1jZW50ZXIganVzdGlmeS1jZW50ZXIgc3BhY2UteC0yIG1iLTNcIj5cbiAgICAgICAgICAgICAgICAgIDxVcGxvYWQgY2xhc3NOYW1lPVwiaC04IHctOCB0ZXh0LWdyYXktNDAwXCIgLz5cbiAgICAgICAgICAgICAgICAgIDxDYW1lcmEgY2xhc3NOYW1lPVwiaC02IHctNiB0ZXh0LWJsdWUtNTAwXCIgLz5cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInNwYWNlLXktMlwiPlxuICAgICAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwidGV4dC1sZyBmb250LW1lZGl1bSB0ZXh0LWdyYXktOTAwIGRhcms6dGV4dC1ncmF5LTEwMFwiPlxuICAgICAgICAgICAgICAgICAgICBEcm9wIGZpbGVzIGhlcmUgb3IgY2xpY2sgdG8gYnJvd3NlXG4gICAgICAgICAgICAgICAgICA8L3A+XG4gICAgICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJ0ZXh0LXNtIHRleHQtZ3JheS01MDAgZGFyazp0ZXh0LWdyYXktNDAwXCI+XG4gICAgICAgICAgICAgICAgICAgIPCfk7EgT24gbW9iaWxlOiBUYXAgdG8gdXNlIGNhbWVyYSBvciBzZWxlY3QgZnJvbSBnYWxsZXJ5XG4gICAgICAgICAgICAgICAgICA8L3A+XG4gICAgICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJ0ZXh0LXNtIHRleHQtZ3JheS01MDAgZGFyazp0ZXh0LWdyYXktNDAwXCI+XG4gICAgICAgICAgICAgICAgICAgIPCfkrsgT24gZGVza3RvcDogRHJhZyAmIGRyb3AsIGNsaWNrIHRvIGJyb3dzZSwgb3IgcGFzdGUgc2NyZWVuc2hvdHMgKEN0cmwrVilcbiAgICAgICAgICAgICAgICAgIDwvcD5cbiAgICAgICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cInRleHQteHMgdGV4dC1ncmF5LTQwMCBkYXJrOnRleHQtZ3JheS01MDBcIj5cbiAgICAgICAgICAgICAgICAgICAgTWF4aW11bSB7ZmluYWxNYXhGaWxlU2l6ZX1NQiDigKIge2ZpbmFsQWxsb3dlZFR5cGVzLm1hcCh0eXBlID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICBpZiAodHlwZS5pbmNsdWRlcygnaW1hZ2UnKSkgcmV0dXJuICdJbWFnZXMnO1xuICAgICAgICAgICAgICAgICAgICAgIGlmICh0eXBlLmluY2x1ZGVzKCdwZGYnKSkgcmV0dXJuICdQREYnO1xuICAgICAgICAgICAgICAgICAgICAgIGlmICh0eXBlLmluY2x1ZGVzKCd3b3JkJykpIHJldHVybiAnRE9DWCc7XG4gICAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGUuaW5jbHVkZXMoJ2V4Y2VsJykgfHwgdHlwZS5pbmNsdWRlcygnc2hlZXQnKSkgcmV0dXJuICdYTFNYJztcbiAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHlwZS5zcGxpdCgnLycpLnBvcCgpPy50b1VwcGVyQ2FzZSgpO1xuICAgICAgICAgICAgICAgICAgICB9KS5maWx0ZXIoQm9vbGVhbikuam9pbignLCAnKX1cbiAgICAgICAgICAgICAgICAgIDwvcD5cbiAgICAgICAgICAgICAgICAgIHthaUVuYWJsZWQgJiYgKFxuICAgICAgICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJ0ZXh0LXhzIHRleHQtcHVycGxlLTUwMCBkYXJrOnRleHQtcHVycGxlLTQwMCBtdC0xXCI+XG4gICAgICAgICAgICAgICAgICAgICAg4pyoIEFJIGFuYWx5c2lzIHdpbGwgZXh0cmFjdCBrZXkgaW5mb3JtYXRpb24gYXV0b21hdGljYWxseVxuICAgICAgICAgICAgICAgICAgICA8L3A+XG4gICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICA8Lz5cbiAgICAgICAgICAgICl9XG4gICAgICAgICAgPC9kaXY+XG5cbiAgICAgICAgICB7LyogVmFsaWRhdGlvbiBlcnJvciAqL31cbiAgICAgICAgICB7dmFsaWRhdGlvbkVycm9yICYmIChcbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwicC0zIGJnLXJlZC01MCBkYXJrOmJnLXJlZC05NTAgYm9yZGVyIGJvcmRlci1yZWQtMjAwIGRhcms6Ym9yZGVyLXJlZC04MDAgcm91bmRlZC1sZ1wiPlxuICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJ0ZXh0LXNtIHRleHQtcmVkLTYwMCBkYXJrOnRleHQtcmVkLTQwMFwiPuKdjCB7dmFsaWRhdGlvbkVycm9yfTwvcD5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICl9XG4gICAgICAgIDwvVGFic0NvbnRlbnQ+XG5cbiAgICAgICAgey8qIFRleHQgRG9jdW1lbnQgVGFiICovfVxuICAgICAgICA8VGFic0NvbnRlbnQgdmFsdWU9XCJ0ZXh0XCIgY2xhc3NOYW1lPVwic3BhY2UteS00XCI+XG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJzcGFjZS15LTJcIj5cbiAgICAgICAgICAgIDxMYWJlbCBodG1sRm9yPVwidGV4dC1jb250ZW50XCIgY2xhc3NOYW1lPVwidGV4dC1zbSBmb250LW1lZGl1bVwiPlxuICAgICAgICAgICAgICBEb2N1bWVudCBDb250ZW50XG4gICAgICAgICAgICA8L0xhYmVsPlxuICAgICAgICAgICAgPFRleHRhcmVhXG4gICAgICAgICAgICAgIGlkPVwidGV4dC1jb250ZW50XCJcbiAgICAgICAgICAgICAgcGxhY2Vob2xkZXI9XCJFbnRlciB5b3VyIGRvY3VtZW50IGNvbnRlbnQgaGVyZS4uLlwiXG4gICAgICAgICAgICAgIHZhbHVlPXt0ZXh0Q29udGVudH1cbiAgICAgICAgICAgICAgb25DaGFuZ2U9e2hhbmRsZVRleHRDaGFuZ2V9XG4gICAgICAgICAgICAgIGRpc2FibGVkPXtkaXNhYmxlZH1cbiAgICAgICAgICAgICAgcm93cz17OH1cbiAgICAgICAgICAgICAgY2xhc3NOYW1lPVwicmVzaXplLW5vbmVcIlxuICAgICAgICAgICAgICBkYXRhLXRlc3RpZD1cInRleHRhcmVhLWRvY3VtZW50LWNvbnRlbnRcIlxuICAgICAgICAgICAgLz5cbiAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cInRleHQteHMgdGV4dC1ncmF5LTUwMCBkYXJrOnRleHQtZ3JheS00MDBcIj5cbiAgICAgICAgICAgICAgQ3JlYXRlIGEgdGV4dC1vbmx5IGRvY3VtZW50IGVudHJ5LiBZb3UgY2FuIGFkZCBmb3JtYXR0aW5nIGFuZCBhZGRpdGlvbmFsIGRldGFpbHMgbGF0ZXIuXG4gICAgICAgICAgICA8L3A+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgIDwvVGFic0NvbnRlbnQ+XG4gICAgICA8L1RhYnM+XG4gICAgPC9kaXY+XG4gICk7XG59Il0sInZlcnNpb24iOjN9