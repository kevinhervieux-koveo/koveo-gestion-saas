08c1ba68662e5a02a8a9734a42fc3c9c
"use strict";
/**
 * File Upload API Integration Tests
 *
 * Tests the server-side handling of file uploads for all submission forms.
 * This test suite validates:
 * 1. Multipart form data processing
 * 2. File storage and database record creation
 * 3. Enhanced file validation on the server side (NEW)
 * 4. Error handling for upload failures
 * 5. File serving and download functionality
 * 6. Proper cleanup of temporary files
 * 7. Rate limiting enforcement (NEW - 10 files per hour)
 * 8. Security audit logging (NEW)
 * 9. Path traversal protection (NEW)
 * 10. File size limits (NEW - 25MB max)
 */
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
const globals_1 = require("@jest/globals");
globals_1.jest.mock('../server/optimized-db-storage', () => ({
    OptimizedDatabaseStorage: globals_1.jest.fn(() => mockStorage)
}));
// Mock authentication middleware
globals_1.jest.mock('../server/middleware/auth', () => ({
    isAuthenticated: (req, res, next) => {
        req.user = {
            id: '123e4567-e89b-12d3-a456-426614174000',
            email: 'test@koveo.com',
            role: 'admin'
        };
        next();
    }
}));
const supertest_1 = __importDefault(require("supertest"));
const fs_1 = __importDefault(require("fs"));
const path_1 = __importDefault(require("path"));
// Mock the database and storage
const mockStorage = {
    createBug: globals_1.jest.fn(),
    createFeatureRequest: globals_1.jest.fn(),
    createDocument: globals_1.jest.fn(),
    createBill: globals_1.jest.fn(),
    getUserById: globals_1.jest.fn(),
    getUser: globals_1.jest.fn(),
};
// Import after mocking
const app = require('../server/index').app;
(0, globals_1.describe)('File Upload API Integration Tests', () => {
    const testFilesDir = path_1.default.join(__dirname, 'test-files');
    const uploadDir = path_1.default.join(__dirname, '../../uploads');
    // Mock security audit log
    const mockAuditLog = [];
    const logSecurityEvent = globals_1.jest.fn((event, user, success, details) => {
        mockAuditLog.push({
            timestamp: new Date().toISOString(),
            event,
            userId: user?.id,
            success,
            details
        });
    });
    // Mock rate limiting
    const mockRateLimitStore = new Map();
    const checkRateLimit = globals_1.jest.fn((userId) => {
        const uploads = mockRateLimitStore.get(userId) || [];
        return uploads.length < 10; // 10 uploads per hour limit
    });
    (0, globals_1.beforeEach)(() => {
        globals_1.jest.clearAllMocks();
        // Create test files directory
        if (!fs_1.default.existsSync(testFilesDir)) {
            fs_1.default.mkdirSync(testFilesDir, { recursive: true });
        }
        // Create test files
        fs_1.default.writeFileSync(path_1.default.join(testFilesDir, 'test-image.png'), 'mock png content');
        fs_1.default.writeFileSync(path_1.default.join(testFilesDir, 'test-document.pdf'), 'mock pdf content');
        fs_1.default.writeFileSync(path_1.default.join(testFilesDir, 'test-receipt.jpg'), 'mock jpg content');
        fs_1.default.writeFileSync(path_1.default.join(testFilesDir, 'error-log.txt'), 'mock error log content');
        // Mock storage methods
        mockStorage.createBug.mockResolvedValue({
            id: 'bug-123',
            title: 'Test Bug',
            attachmentCount: 1
        });
        mockStorage.createFeatureRequest.mockResolvedValue({
            id: 'feature-123',
            title: 'Test Feature',
            attachmentCount: 1
        });
        mockStorage.createDocument.mockResolvedValue({
            id: 'doc-123',
            name: 'Test Document',
            filePath: 'general/test-file.pdf'
        });
        mockStorage.createBill.mockResolvedValue({
            id: 'bill-123',
            title: 'Test Bill',
            attachmentCount: 1
        });
        mockStorage.getUser.mockResolvedValue({
            id: '123e4567-e89b-12d3-a456-426614174000',
            email: 'test@koveo.com',
            role: 'admin'
        });
    });
    (0, globals_1.afterEach)(() => {
        // Clean up test files
        if (fs_1.default.existsSync(testFilesDir)) {
            fs_1.default.rmSync(testFilesDir, { recursive: true, force: true });
        }
        // Clean up upload directory
        if (fs_1.default.existsSync(uploadDir)) {
            const files = fs_1.default.readdirSync(uploadDir);
            files.forEach(file => {
                if (file.startsWith('test-') || file.includes('mock')) {
                    fs_1.default.unlinkSync(path_1.default.join(uploadDir, file));
                }
            });
        }
    });
    (0, globals_1.describe)('Bug Report File Uploads', () => {
        (0, globals_1.it)('should handle bug report with single file attachment', async () => {
            const response = await (0, supertest_1.default)(app)
                .post('/api/bugs')
                .field('title', 'Bug with Screenshot')
                .field('description', 'This is a test bug report with file attachment.')
                .field('category', 'ui_ux')
                .field('page', 'Test Page')
                .field('priority', 'medium')
                .field('reproductionSteps', 'Step 1: Open app\nStep 2: Click button\nStep 3: See error')
                .attach('attachments', path_1.default.join(testFilesDir, 'test-image.png'))
                .expect(201);
            (0, globals_1.expect)(response.body).toMatchObject({
                id: globals_1.expect.any(String),
                title: 'Bug with Screenshot',
                attachmentCount: globals_1.expect.any(Number)
            });
            (0, globals_1.expect)(mockStorage.createBug).toHaveBeenCalledWith(globals_1.expect.objectContaining({
                title: 'Bug with Screenshot',
                description: 'This is a test bug report with file attachment.',
                category: 'ui_ux',
                page: 'Test Page',
                priority: 'medium'
            }));
            (0, globals_1.expect)(mockStorage.createDocument).toHaveBeenCalledWith(globals_1.expect.objectContaining({
                name: 'test-image.png',
                documentType: 'attachment',
                fileName: 'test-image.png',
                attachedToType: 'bug',
                uploadedById: '123e4567-e89b-12d3-a456-426614174000'
            }));
        });
        (0, globals_1.it)('should handle bug report with multiple file attachments', async () => {
            const response = await (0, supertest_1.default)(app)
                .post('/api/bugs')
                .field('title', 'Bug with Multiple Files')
                .field('description', 'Bug report with multiple attachments.')
                .field('category', 'functionality')
                .field('page', 'Dashboard')
                .field('priority', 'high')
                .attach('attachments', path_1.default.join(testFilesDir, 'test-image.png'))
                .attach('attachments', path_1.default.join(testFilesDir, 'test-document.pdf'))
                .attach('attachments', path_1.default.join(testFilesDir, 'error-log.txt'))
                .expect(201);
            (0, globals_1.expect)(response.body).toMatchObject({
                id: globals_1.expect.any(String),
                title: 'Bug with Multiple Files'
            });
            // Should create document for each attachment
            (0, globals_1.expect)(mockStorage.createDocument).toHaveBeenCalledTimes(3);
            (0, globals_1.expect)(mockStorage.createDocument).toHaveBeenCalledWith(globals_1.expect.objectContaining({
                name: 'test-image.png',
                attachedToType: 'bug'
            }));
            (0, globals_1.expect)(mockStorage.createDocument).toHaveBeenCalledWith(globals_1.expect.objectContaining({
                name: 'test-document.pdf',
                attachedToType: 'bug'
            }));
            (0, globals_1.expect)(mockStorage.createDocument).toHaveBeenCalledWith(globals_1.expect.objectContaining({
                name: 'error-log.txt',
                attachedToType: 'bug'
            }));
        });
        (0, globals_1.it)('should reject oversized files in bug reports', async () => {
            // Create a large file (over 10MB limit)
            const largeFile = path_1.default.join(testFilesDir, 'large-file.png');
            const largeContent = Buffer.alloc(11 * 1024 * 1024, 'x'); // 11MB
            fs_1.default.writeFileSync(largeFile, largeContent);
            const response = await (0, supertest_1.default)(app)
                .post('/api/bugs')
                .field('title', 'Bug with Large File')
                .field('description', 'Testing file size limits.')
                .field('category', 'ui_ux')
                .field('page', 'Test Page')
                .field('priority', 'medium')
                .attach('attachments', largeFile)
                .expect(400);
            (0, globals_1.expect)(response.body).toMatchObject({
                error: globals_1.expect.stringMatching(/file.*too large|size.*limit/i)
            });
            (0, globals_1.expect)(mockStorage.createBug).not.toHaveBeenCalled();
            (0, globals_1.expect)(mockStorage.createDocument).not.toHaveBeenCalled();
        });
        (0, globals_1.it)('should reject invalid file types in bug reports', async () => {
            // Create an executable file
            const execFile = path_1.default.join(testFilesDir, 'malicious.exe');
            fs_1.default.writeFileSync(execFile, 'fake executable content');
            const response = await (0, supertest_1.default)(app)
                .post('/api/bugs')
                .field('title', 'Bug with Invalid File')
                .field('description', 'Testing file type validation.')
                .field('category', 'security')
                .field('page', 'Test Page')
                .field('priority', 'critical')
                .attach('attachments', execFile)
                .expect(400);
            (0, globals_1.expect)(response.body).toMatchObject({
                error: globals_1.expect.stringMatching(/file.*type.*not.*allowed|invalid.*file.*type/i)
            });
            (0, globals_1.expect)(mockStorage.createBug).not.toHaveBeenCalled();
            (0, globals_1.expect)(mockStorage.createDocument).not.toHaveBeenCalled();
        });
    });
    (0, globals_1.describe)('Feature Request File Uploads', () => {
        (0, globals_1.it)('should handle feature request with design mockups', async () => {
            const response = await (0, supertest_1.default)(app)
                .post('/api/feature-requests')
                .field('title', 'New UI Feature')
                .field('description', 'Feature request with design mockups.')
                .field('category', 'ui_ux')
                .field('priority', 'medium')
                .attach('attachments', path_1.default.join(testFilesDir, 'test-image.png'))
                .attach('attachments', path_1.default.join(testFilesDir, 'test-document.pdf'))
                .expect(201);
            (0, globals_1.expect)(response.body).toMatchObject({
                id: globals_1.expect.any(String),
                title: 'New UI Feature'
            });
            (0, globals_1.expect)(mockStorage.createFeatureRequest).toHaveBeenCalledWith(globals_1.expect.objectContaining({
                title: 'New UI Feature',
                description: 'Feature request with design mockups.',
                category: 'ui_ux',
                priority: 'medium'
            }));
            (0, globals_1.expect)(mockStorage.createDocument).toHaveBeenCalledTimes(2);
        });
        (0, globals_1.it)('should validate feature request file types', async () => {
            const scriptFile = path_1.default.join(testFilesDir, 'script.js');
            fs_1.default.writeFileSync(scriptFile, 'console.log("potentially dangerous");');
            const response = await (0, supertest_1.default)(app)
                .post('/api/feature-requests')
                .field('title', 'Feature with Script')
                .field('description', 'Testing script file upload.')
                .field('category', 'functionality')
                .field('priority', 'low')
                .attach('attachments', scriptFile)
                .expect(400);
            (0, globals_1.expect)(response.body).toMatchObject({
                error: globals_1.expect.stringMatching(/file.*type.*not.*allowed/i)
            });
        });
    });
    (0, globals_1.describe)('Document Upload API', () => {
        (0, globals_1.it)('should handle document upload with metadata', async () => {
            const response = await (0, supertest_1.default)(app)
                .post('/api/documents')
                .field('name', 'Legal Contract')
                .field('description', 'Important legal document')
                .field('documentType', 'contract')
                .field('isVisibleToTenants', 'false')
                .attach('file', path_1.default.join(testFilesDir, 'test-document.pdf'))
                .expect(201);
            (0, globals_1.expect)(response.body).toMatchObject({
                id: globals_1.expect.any(String),
                name: 'Legal Contract',
                filePath: globals_1.expect.stringMatching(/general\/.*\.pdf$/)
            });
            (0, globals_1.expect)(mockStorage.createDocument).toHaveBeenCalledWith(globals_1.expect.objectContaining({
                name: 'Legal Contract',
                description: 'Important legal document',
                documentType: 'contract',
                fileName: 'test-document.pdf',
                isVisibleToTenants: false,
                uploadedById: '123e4567-e89b-12d3-a456-426614174000'
            }));
        });
        (0, globals_1.it)('should serve uploaded documents', async () => {
            // First upload a document
            const uploadResponse = await (0, supertest_1.default)(app)
                .post('/api/documents')
                .field('name', 'Test Document')
                .field('documentType', 'general')
                .attach('file', path_1.default.join(testFilesDir, 'test-document.pdf'))
                .expect(201);
            const documentId = uploadResponse.body.id;
            // Mock the document retrieval
            mockStorage.getDocument = globals_1.jest.fn().mockResolvedValue({
                id: documentId,
                name: 'Test Document',
                filePath: 'general/test-document.pdf',
                fileName: 'test-document.pdf',
                mimeType: 'application/pdf'
            });
            // Then try to access the document
            const accessResponse = await (0, supertest_1.default)(app)
                .get(`/api/documents/${documentId}/file`)
                .expect(200);
            (0, globals_1.expect)(accessResponse.headers['content-type']).toMatch(/application\/pdf/);
        });
        (0, globals_1.it)('should validate document access permissions', async () => {
            // Mock unauthorized user
            globals_1.jest.clearAllMocks();
            const response = await (0, supertest_1.default)(app)
                .get('/api/documents/unauthorized-doc/file')
                .expect(404);
            (0, globals_1.expect)(response.body).toMatchObject({
                error: globals_1.expect.any(String)
            });
        });
    });
    (0, globals_1.describe)('Bill Receipt Uploads', () => {
        (0, globals_1.it)('should handle bill creation with receipt attachment', async () => {
            const response = await (0, supertest_1.default)(app)
                .post('/api/bills')
                .field('title', 'Electricity Bill - January 2025')
                .field('amount', '150.75')
                .field('dueDate', '2025-02-15')
                .field('category', 'utilities')
                .attach('receipts', path_1.default.join(testFilesDir, 'test-receipt.jpg'))
                .expect(201);
            (0, globals_1.expect)(response.body).toMatchObject({
                id: globals_1.expect.any(String),
                title: 'Electricity Bill - January 2025',
                amount: 150.75
            });
            (0, globals_1.expect)(mockStorage.createBill).toHaveBeenCalledWith(globals_1.expect.objectContaining({
                title: 'Electricity Bill - January 2025',
                amount: 150.75,
                category: 'utilities'
            }));
            (0, globals_1.expect)(mockStorage.createDocument).toHaveBeenCalledWith(globals_1.expect.objectContaining({
                name: 'test-receipt.jpg',
                documentType: 'receipt',
                attachedToType: 'bill'
            }));
        });
        (0, globals_1.it)('should validate receipt file formats', async () => {
            const invalidReceiptFile = path_1.default.join(testFilesDir, 'receipt.txt');
            fs_1.default.writeFileSync(invalidReceiptFile, 'This is not an image receipt');
            const response = await (0, supertest_1.default)(app)
                .post('/api/bills')
                .field('title', 'Bill with Invalid Receipt')
                .field('amount', '100.00')
                .field('dueDate', '2025-03-01')
                .field('category', 'maintenance')
                .attach('receipts', invalidReceiptFile)
                .expect(400);
            (0, globals_1.expect)(response.body).toMatchObject({
                error: globals_1.expect.stringMatching(/receipt.*must.*be.*image|invalid.*receipt.*format/i)
            });
        });
    });
    (0, globals_1.describe)('File Storage and Cleanup', () => {
        (0, globals_1.it)('should clean up temporary files on upload failure', async () => {
            // Mock a storage failure
            mockStorage.createBug.mockRejectedValue(new Error('Database error'));
            const response = await (0, supertest_1.default)(app)
                .post('/api/bugs')
                .field('title', 'Bug that will fail')
                .field('description', 'This should trigger cleanup.')
                .field('category', 'ui_ux')
                .field('page', 'Test Page')
                .field('priority', 'medium')
                .attach('attachments', path_1.default.join(testFilesDir, 'test-image.png'))
                .expect(500);
            (0, globals_1.expect)(response.body).toMatchObject({
                error: globals_1.expect.any(String)
            });
            // Verify temporary files were cleaned up
            const tempFiles = fs_1.default.readdirSync(uploadDir).filter(file => file.includes('test-image') || file.includes('temp'));
            (0, globals_1.expect)(tempFiles).toHaveLength(0);
        });
        (0, globals_1.it)('should handle concurrent file uploads', async () => {
            const uploadPromises = Array.from({ length: 5 }, (_, i) => (0, supertest_1.default)(app)
                .post('/api/bugs')
                .field('title', `Concurrent Bug ${i + 1}`)
                .field('description', `Concurrent upload test ${i + 1}`)
                .field('category', 'performance')
                .field('page', 'Test Page')
                .field('priority', 'low')
                .attach('attachments', path_1.default.join(testFilesDir, 'test-image.png')));
            const responses = await Promise.all(uploadPromises);
            responses.forEach((response, i) => {
                (0, globals_1.expect)(response.status).toBe(201);
                (0, globals_1.expect)(response.body).toMatchObject({
                    id: globals_1.expect.any(String),
                    title: `Concurrent Bug ${i + 1}`
                });
            });
            (0, globals_1.expect)(mockStorage.createBug).toHaveBeenCalledTimes(5);
            (0, globals_1.expect)(mockStorage.createDocument).toHaveBeenCalledTimes(5);
        });
    });
    (0, globals_1.describe)('File Validation Edge Cases', () => {
        (0, globals_1.it)('should handle empty files', async () => {
            const emptyFile = path_1.default.join(testFilesDir, 'empty.png');
            fs_1.default.writeFileSync(emptyFile, '');
            const response = await (0, supertest_1.default)(app)
                .post('/api/bugs')
                .field('title', 'Bug with Empty File')
                .field('description', 'Testing empty file handling.')
                .field('category', 'ui_ux')
                .field('page', 'Test Page')
                .field('priority', 'medium')
                .attach('attachments', emptyFile)
                .expect(400);
            (0, globals_1.expect)(response.body).toMatchObject({
                error: globals_1.expect.stringMatching(/file.*empty|invalid.*file.*size/i)
            });
        });
        (0, globals_1.it)('should handle corrupted files', async () => {
            const corruptedFile = path_1.default.join(testFilesDir, 'corrupted.pdf');
            fs_1.default.writeFileSync(corruptedFile, 'This is not a valid PDF content but claims to be');
            const response = await (0, supertest_1.default)(app)
                .post('/api/documents')
                .field('name', 'Corrupted Document')
                .field('documentType', 'general')
                .attach('file', corruptedFile)
                .expect(400);
            (0, globals_1.expect)(response.body).toMatchObject({
                error: globals_1.expect.stringMatching(/invalid.*file.*format|corrupted.*file/i)
            });
        });
        (0, globals_1.it)('should handle filename with special characters', async () => {
            const specialNameFile = path_1.default.join(testFilesDir, 'file with spaces & símböls.pdf');
            fs_1.default.writeFileSync(specialNameFile, 'mock pdf content');
            const response = await (0, supertest_1.default)(app)
                .post('/api/documents')
                .field('name', 'Document with Special Filename')
                .field('documentType', 'general')
                .attach('file', specialNameFile)
                .expect(201);
            (0, globals_1.expect)(response.body).toMatchObject({
                id: globals_1.expect.any(String),
                name: 'Document with Special Filename'
            });
            (0, globals_1.expect)(mockStorage.createDocument).toHaveBeenCalledWith(globals_1.expect.objectContaining({
                name: 'Document with Special Filename',
                fileName: globals_1.expect.stringMatching(/^[a-zA-Z0-9_-]+\.pdf$/), // Should be sanitized
                filePath: globals_1.expect.stringMatching(/general\/.*\.pdf$/)
            }));
        });
        (0, globals_1.it)('should handle maximum total upload size limit', async () => {
            // Create multiple large files that exceed total limit
            const largeFiles = [];
            for (let i = 0; i < 3; i++) {
                const fileName = `large-file-${i}.png`;
                const filePath = path_1.default.join(testFilesDir, fileName);
                const content = Buffer.alloc(5 * 1024 * 1024, 'x'); // 5MB each
                fs_1.default.writeFileSync(filePath, content);
                largeFiles.push(filePath);
            }
            const request_builder = (0, supertest_1.default)(app)
                .post('/api/bugs')
                .field('title', 'Bug with Multiple Large Files')
                .field('description', 'Testing total size limits.')
                .field('category', 'performance')
                .field('page', 'Test Page')
                .field('priority', 'medium');
            // Attach all large files
            largeFiles.forEach(filePath => {
                request_builder.attach('attachments', filePath);
            });
            const response = await request_builder.expect(400);
            (0, globals_1.expect)(response.body).toMatchObject({
                error: globals_1.expect.stringMatching(/total.*size.*exceeded|too many.*large.*files/i)
            });
        });
    });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiL2hvbWUvcnVubmVyL3dvcmtzcGFjZS90ZXN0cy9pbnRlZ3JhdGlvbi9maWxlLXVwbG9hZC1hcGkudGVzdC50cyIsIm1hcHBpbmdzIjoiO0FBQUE7Ozs7Ozs7Ozs7Ozs7OztHQWVHOzs7OztBQUVILDJDQUFrRjtBQWVsRixjQUFJLENBQUMsSUFBSSxDQUFDLGdDQUFnQyxFQUFFLEdBQUcsRUFBRSxDQUFDLENBQUM7SUFDakQsd0JBQXdCLEVBQUUsY0FBSSxDQUFDLEVBQUUsQ0FBQyxHQUFHLEVBQUUsQ0FBQyxXQUFXLENBQUM7Q0FDckQsQ0FBQyxDQUFDLENBQUM7QUFFSixpQ0FBaUM7QUFDakMsY0FBSSxDQUFDLElBQUksQ0FBQywyQkFBMkIsRUFBRSxHQUFHLEVBQUUsQ0FBQyxDQUFDO0lBQzVDLGVBQWUsRUFBRSxDQUFDLEdBQVEsRUFBRSxHQUFRLEVBQUUsSUFBUyxFQUFFLEVBQUU7UUFDakQsR0FBRyxDQUFDLElBQUksR0FBRztZQUNULEVBQUUsRUFBRSxzQ0FBc0M7WUFDMUMsS0FBSyxFQUFFLGdCQUFnQjtZQUN2QixJQUFJLEVBQUUsT0FBTztTQUNkLENBQUM7UUFDRixJQUFJLEVBQUUsQ0FBQztJQUNULENBQUM7Q0FDRixDQUFDLENBQUMsQ0FBQztBQTVCSiwwREFBZ0M7QUFDaEMsNENBQW9CO0FBQ3BCLGdEQUF3QjtBQUV4QixnQ0FBZ0M7QUFDaEMsTUFBTSxXQUFXLEdBQUc7SUFDbEIsU0FBUyxFQUFFLGNBQUksQ0FBQyxFQUFFLEVBQUU7SUFDcEIsb0JBQW9CLEVBQUUsY0FBSSxDQUFDLEVBQUUsRUFBRTtJQUMvQixjQUFjLEVBQUUsY0FBSSxDQUFDLEVBQUUsRUFBRTtJQUN6QixVQUFVLEVBQUUsY0FBSSxDQUFDLEVBQUUsRUFBRTtJQUNyQixXQUFXLEVBQUUsY0FBSSxDQUFDLEVBQUUsRUFBRTtJQUN0QixPQUFPLEVBQUUsY0FBSSxDQUFDLEVBQUUsRUFBRTtDQUNuQixDQUFDO0FBa0JGLHVCQUF1QjtBQUN2QixNQUFNLEdBQUcsR0FBRyxPQUFPLENBQUMsaUJBQWlC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ci93b3Jrc3BhY2UvdGVzdHMvaW50ZWdyYXRpb24vZmlsZS11cGxvYWQtYXBpLnRlc3QudHMiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBGaWxlIFVwbG9hZCBBUEkgSW50ZWdyYXRpb24gVGVzdHNcbiAqIFxuICogVGVzdHMgdGhlIHNlcnZlci1zaWRlIGhhbmRsaW5nIG9mIGZpbGUgdXBsb2FkcyBmb3IgYWxsIHN1Ym1pc3Npb24gZm9ybXMuXG4gKiBUaGlzIHRlc3Qgc3VpdGUgdmFsaWRhdGVzOlxuICogMS4gTXVsdGlwYXJ0IGZvcm0gZGF0YSBwcm9jZXNzaW5nXG4gKiAyLiBGaWxlIHN0b3JhZ2UgYW5kIGRhdGFiYXNlIHJlY29yZCBjcmVhdGlvblxuICogMy4gRW5oYW5jZWQgZmlsZSB2YWxpZGF0aW9uIG9uIHRoZSBzZXJ2ZXIgc2lkZSAoTkVXKVxuICogNC4gRXJyb3IgaGFuZGxpbmcgZm9yIHVwbG9hZCBmYWlsdXJlc1xuICogNS4gRmlsZSBzZXJ2aW5nIGFuZCBkb3dubG9hZCBmdW5jdGlvbmFsaXR5XG4gKiA2LiBQcm9wZXIgY2xlYW51cCBvZiB0ZW1wb3JhcnkgZmlsZXNcbiAqIDcuIFJhdGUgbGltaXRpbmcgZW5mb3JjZW1lbnQgKE5FVyAtIDEwIGZpbGVzIHBlciBob3VyKVxuICogOC4gU2VjdXJpdHkgYXVkaXQgbG9nZ2luZyAoTkVXKVxuICogOS4gUGF0aCB0cmF2ZXJzYWwgcHJvdGVjdGlvbiAoTkVXKVxuICogMTAuIEZpbGUgc2l6ZSBsaW1pdHMgKE5FVyAtIDI1TUIgbWF4KVxuICovXG5cbmltcG9ydCB7IGRlc2NyaWJlLCBpdCwgZXhwZWN0LCBiZWZvcmVFYWNoLCBhZnRlckVhY2gsIGplc3QgfSBmcm9tICdAamVzdC9nbG9iYWxzJztcbmltcG9ydCByZXF1ZXN0IGZyb20gJ3N1cGVydGVzdCc7XG5pbXBvcnQgZnMgZnJvbSAnZnMnO1xuaW1wb3J0IHBhdGggZnJvbSAncGF0aCc7XG5cbi8vIE1vY2sgdGhlIGRhdGFiYXNlIGFuZCBzdG9yYWdlXG5jb25zdCBtb2NrU3RvcmFnZSA9IHtcbiAgY3JlYXRlQnVnOiBqZXN0LmZuKCksXG4gIGNyZWF0ZUZlYXR1cmVSZXF1ZXN0OiBqZXN0LmZuKCksXG4gIGNyZWF0ZURvY3VtZW50OiBqZXN0LmZuKCksXG4gIGNyZWF0ZUJpbGw6IGplc3QuZm4oKSxcbiAgZ2V0VXNlckJ5SWQ6IGplc3QuZm4oKSxcbiAgZ2V0VXNlcjogamVzdC5mbigpLFxufTtcblxuamVzdC5tb2NrKCcuLi9zZXJ2ZXIvb3B0aW1pemVkLWRiLXN0b3JhZ2UnLCAoKSA9PiAoe1xuICBPcHRpbWl6ZWREYXRhYmFzZVN0b3JhZ2U6IGplc3QuZm4oKCkgPT4gbW9ja1N0b3JhZ2UpXG59KSk7XG5cbi8vIE1vY2sgYXV0aGVudGljYXRpb24gbWlkZGxld2FyZVxuamVzdC5tb2NrKCcuLi9zZXJ2ZXIvbWlkZGxld2FyZS9hdXRoJywgKCkgPT4gKHtcbiAgaXNBdXRoZW50aWNhdGVkOiAocmVxOiBhbnksIHJlczogYW55LCBuZXh0OiBhbnkpID0+IHtcbiAgICByZXEudXNlciA9IHtcbiAgICAgIGlkOiAnMTIzZTQ1NjctZTg5Yi0xMmQzLWE0NTYtNDI2NjE0MTc0MDAwJyxcbiAgICAgIGVtYWlsOiAndGVzdEBrb3Zlby5jb20nLFxuICAgICAgcm9sZTogJ2FkbWluJ1xuICAgIH07XG4gICAgbmV4dCgpO1xuICB9XG59KSk7XG5cbi8vIEltcG9ydCBhZnRlciBtb2NraW5nXG5jb25zdCBhcHAgPSByZXF1aXJlKCcuLi9zZXJ2ZXIvaW5kZXgnKS5hcHA7XG5cbmRlc2NyaWJlKCdGaWxlIFVwbG9hZCBBUEkgSW50ZWdyYXRpb24gVGVzdHMnLCAoKSA9PiB7XG4gIGNvbnN0IHRlc3RGaWxlc0RpciA9IHBhdGguam9pbihfX2Rpcm5hbWUsICd0ZXN0LWZpbGVzJyk7XG4gIGNvbnN0IHVwbG9hZERpciA9IHBhdGguam9pbihfX2Rpcm5hbWUsICcuLi8uLi91cGxvYWRzJyk7XG4gIFxuICAvLyBNb2NrIHNlY3VyaXR5IGF1ZGl0IGxvZ1xuICBjb25zdCBtb2NrQXVkaXRMb2c6IGFueVtdID0gW107XG4gIGNvbnN0IGxvZ1NlY3VyaXR5RXZlbnQgPSBqZXN0LmZuKChldmVudCwgdXNlciwgc3VjY2VzcywgZGV0YWlscykgPT4ge1xuICAgIG1vY2tBdWRpdExvZy5wdXNoKHtcbiAgICAgIHRpbWVzdGFtcDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpLFxuICAgICAgZXZlbnQsXG4gICAgICB1c2VySWQ6IHVzZXI/LmlkLFxuICAgICAgc3VjY2VzcyxcbiAgICAgIGRldGFpbHNcbiAgICB9KTtcbiAgfSk7XG4gIFxuICAvLyBNb2NrIHJhdGUgbGltaXRpbmdcbiAgY29uc3QgbW9ja1JhdGVMaW1pdFN0b3JlID0gbmV3IE1hcCgpO1xuICBjb25zdCBjaGVja1JhdGVMaW1pdCA9IGplc3QuZm4oKHVzZXJJZCkgPT4ge1xuICAgIGNvbnN0IHVwbG9hZHMgPSBtb2NrUmF0ZUxpbWl0U3RvcmUuZ2V0KHVzZXJJZCkgfHwgW107XG4gICAgcmV0dXJuIHVwbG9hZHMubGVuZ3RoIDwgMTA7IC8vIDEwIHVwbG9hZHMgcGVyIGhvdXIgbGltaXRcbiAgfSk7XG5cbiAgYmVmb3JlRWFjaCgoKSA9PiB7XG4gICAgamVzdC5jbGVhckFsbE1vY2tzKCk7XG4gICAgXG4gICAgLy8gQ3JlYXRlIHRlc3QgZmlsZXMgZGlyZWN0b3J5XG4gICAgaWYgKCFmcy5leGlzdHNTeW5jKHRlc3RGaWxlc0RpcikpIHtcbiAgICAgIGZzLm1rZGlyU3luYyh0ZXN0RmlsZXNEaXIsIHsgcmVjdXJzaXZlOiB0cnVlIH0pO1xuICAgIH1cblxuICAgIC8vIENyZWF0ZSB0ZXN0IGZpbGVzXG4gICAgZnMud3JpdGVGaWxlU3luYyhwYXRoLmpvaW4odGVzdEZpbGVzRGlyLCAndGVzdC1pbWFnZS5wbmcnKSwgJ21vY2sgcG5nIGNvbnRlbnQnKTtcbiAgICBmcy53cml0ZUZpbGVTeW5jKHBhdGguam9pbih0ZXN0RmlsZXNEaXIsICd0ZXN0LWRvY3VtZW50LnBkZicpLCAnbW9jayBwZGYgY29udGVudCcpO1xuICAgIGZzLndyaXRlRmlsZVN5bmMocGF0aC5qb2luKHRlc3RGaWxlc0RpciwgJ3Rlc3QtcmVjZWlwdC5qcGcnKSwgJ21vY2sganBnIGNvbnRlbnQnKTtcbiAgICBmcy53cml0ZUZpbGVTeW5jKHBhdGguam9pbih0ZXN0RmlsZXNEaXIsICdlcnJvci1sb2cudHh0JyksICdtb2NrIGVycm9yIGxvZyBjb250ZW50Jyk7XG5cbiAgICAvLyBNb2NrIHN0b3JhZ2UgbWV0aG9kc1xuICAgIG1vY2tTdG9yYWdlLmNyZWF0ZUJ1Zy5tb2NrUmVzb2x2ZWRWYWx1ZSh7IFxuICAgICAgaWQ6ICdidWctMTIzJyxcbiAgICAgIHRpdGxlOiAnVGVzdCBCdWcnLFxuICAgICAgYXR0YWNobWVudENvdW50OiAxIFxuICAgIH0pO1xuICAgIFxuICAgIG1vY2tTdG9yYWdlLmNyZWF0ZUZlYXR1cmVSZXF1ZXN0Lm1vY2tSZXNvbHZlZFZhbHVlKHsgXG4gICAgICBpZDogJ2ZlYXR1cmUtMTIzJyxcbiAgICAgIHRpdGxlOiAnVGVzdCBGZWF0dXJlJyxcbiAgICAgIGF0dGFjaG1lbnRDb3VudDogMSBcbiAgICB9KTtcbiAgICBcbiAgICBtb2NrU3RvcmFnZS5jcmVhdGVEb2N1bWVudC5tb2NrUmVzb2x2ZWRWYWx1ZSh7IFxuICAgICAgaWQ6ICdkb2MtMTIzJyxcbiAgICAgIG5hbWU6ICdUZXN0IERvY3VtZW50JyxcbiAgICAgIGZpbGVQYXRoOiAnZ2VuZXJhbC90ZXN0LWZpbGUucGRmJ1xuICAgIH0pO1xuICAgIFxuICAgIG1vY2tTdG9yYWdlLmNyZWF0ZUJpbGwubW9ja1Jlc29sdmVkVmFsdWUoeyBcbiAgICAgIGlkOiAnYmlsbC0xMjMnLFxuICAgICAgdGl0bGU6ICdUZXN0IEJpbGwnLFxuICAgICAgYXR0YWNobWVudENvdW50OiAxIFxuICAgIH0pO1xuXG4gICAgbW9ja1N0b3JhZ2UuZ2V0VXNlci5tb2NrUmVzb2x2ZWRWYWx1ZSh7XG4gICAgICBpZDogJzEyM2U0NTY3LWU4OWItMTJkMy1hNDU2LTQyNjYxNDE3NDAwMCcsXG4gICAgICBlbWFpbDogJ3Rlc3RAa292ZW8uY29tJyxcbiAgICAgIHJvbGU6ICdhZG1pbidcbiAgICB9KTtcbiAgfSk7XG5cbiAgYWZ0ZXJFYWNoKCgpID0+IHtcbiAgICAvLyBDbGVhbiB1cCB0ZXN0IGZpbGVzXG4gICAgaWYgKGZzLmV4aXN0c1N5bmModGVzdEZpbGVzRGlyKSkge1xuICAgICAgZnMucm1TeW5jKHRlc3RGaWxlc0RpciwgeyByZWN1cnNpdmU6IHRydWUsIGZvcmNlOiB0cnVlIH0pO1xuICAgIH1cbiAgICBcbiAgICAvLyBDbGVhbiB1cCB1cGxvYWQgZGlyZWN0b3J5XG4gICAgaWYgKGZzLmV4aXN0c1N5bmModXBsb2FkRGlyKSkge1xuICAgICAgY29uc3QgZmlsZXMgPSBmcy5yZWFkZGlyU3luYyh1cGxvYWREaXIpO1xuICAgICAgZmlsZXMuZm9yRWFjaChmaWxlID0+IHtcbiAgICAgICAgaWYgKGZpbGUuc3RhcnRzV2l0aCgndGVzdC0nKSB8fCBmaWxlLmluY2x1ZGVzKCdtb2NrJykpIHtcbiAgICAgICAgICBmcy51bmxpbmtTeW5jKHBhdGguam9pbih1cGxvYWREaXIsIGZpbGUpKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfVxuICB9KTtcblxuICBkZXNjcmliZSgnQnVnIFJlcG9ydCBGaWxlIFVwbG9hZHMnLCAoKSA9PiB7XG4gICAgaXQoJ3Nob3VsZCBoYW5kbGUgYnVnIHJlcG9ydCB3aXRoIHNpbmdsZSBmaWxlIGF0dGFjaG1lbnQnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHJlcXVlc3QoYXBwKVxuICAgICAgICAucG9zdCgnL2FwaS9idWdzJylcbiAgICAgICAgLmZpZWxkKCd0aXRsZScsICdCdWcgd2l0aCBTY3JlZW5zaG90JylcbiAgICAgICAgLmZpZWxkKCdkZXNjcmlwdGlvbicsICdUaGlzIGlzIGEgdGVzdCBidWcgcmVwb3J0IHdpdGggZmlsZSBhdHRhY2htZW50LicpXG4gICAgICAgIC5maWVsZCgnY2F0ZWdvcnknLCAndWlfdXgnKVxuICAgICAgICAuZmllbGQoJ3BhZ2UnLCAnVGVzdCBQYWdlJylcbiAgICAgICAgLmZpZWxkKCdwcmlvcml0eScsICdtZWRpdW0nKVxuICAgICAgICAuZmllbGQoJ3JlcHJvZHVjdGlvblN0ZXBzJywgJ1N0ZXAgMTogT3BlbiBhcHBcXG5TdGVwIDI6IENsaWNrIGJ1dHRvblxcblN0ZXAgMzogU2VlIGVycm9yJylcbiAgICAgICAgLmF0dGFjaCgnYXR0YWNobWVudHMnLCBwYXRoLmpvaW4odGVzdEZpbGVzRGlyLCAndGVzdC1pbWFnZS5wbmcnKSlcbiAgICAgICAgLmV4cGVjdCgyMDEpO1xuXG4gICAgICBleHBlY3QocmVzcG9uc2UuYm9keSkudG9NYXRjaE9iamVjdCh7XG4gICAgICAgIGlkOiBleHBlY3QuYW55KFN0cmluZyksXG4gICAgICAgIHRpdGxlOiAnQnVnIHdpdGggU2NyZWVuc2hvdCcsXG4gICAgICAgIGF0dGFjaG1lbnRDb3VudDogZXhwZWN0LmFueShOdW1iZXIpXG4gICAgICB9KTtcblxuICAgICAgZXhwZWN0KG1vY2tTdG9yYWdlLmNyZWF0ZUJ1ZykudG9IYXZlQmVlbkNhbGxlZFdpdGgoXG4gICAgICAgIGV4cGVjdC5vYmplY3RDb250YWluaW5nKHtcbiAgICAgICAgICB0aXRsZTogJ0J1ZyB3aXRoIFNjcmVlbnNob3QnLFxuICAgICAgICAgIGRlc2NyaXB0aW9uOiAnVGhpcyBpcyBhIHRlc3QgYnVnIHJlcG9ydCB3aXRoIGZpbGUgYXR0YWNobWVudC4nLFxuICAgICAgICAgIGNhdGVnb3J5OiAndWlfdXgnLFxuICAgICAgICAgIHBhZ2U6ICdUZXN0IFBhZ2UnLFxuICAgICAgICAgIHByaW9yaXR5OiAnbWVkaXVtJ1xuICAgICAgICB9KVxuICAgICAgKTtcblxuICAgICAgZXhwZWN0KG1vY2tTdG9yYWdlLmNyZWF0ZURvY3VtZW50KS50b0hhdmVCZWVuQ2FsbGVkV2l0aChcbiAgICAgICAgZXhwZWN0Lm9iamVjdENvbnRhaW5pbmcoe1xuICAgICAgICAgIG5hbWU6ICd0ZXN0LWltYWdlLnBuZycsXG4gICAgICAgICAgZG9jdW1lbnRUeXBlOiAnYXR0YWNobWVudCcsXG4gICAgICAgICAgZmlsZU5hbWU6ICd0ZXN0LWltYWdlLnBuZycsXG4gICAgICAgICAgYXR0YWNoZWRUb1R5cGU6ICdidWcnLFxuICAgICAgICAgIHVwbG9hZGVkQnlJZDogJzEyM2U0NTY3LWU4OWItMTJkMy1hNDU2LTQyNjYxNDE3NDAwMCdcbiAgICAgICAgfSlcbiAgICAgICk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGhhbmRsZSBidWcgcmVwb3J0IHdpdGggbXVsdGlwbGUgZmlsZSBhdHRhY2htZW50cycsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgcmVxdWVzdChhcHApXG4gICAgICAgIC5wb3N0KCcvYXBpL2J1Z3MnKVxuICAgICAgICAuZmllbGQoJ3RpdGxlJywgJ0J1ZyB3aXRoIE11bHRpcGxlIEZpbGVzJylcbiAgICAgICAgLmZpZWxkKCdkZXNjcmlwdGlvbicsICdCdWcgcmVwb3J0IHdpdGggbXVsdGlwbGUgYXR0YWNobWVudHMuJylcbiAgICAgICAgLmZpZWxkKCdjYXRlZ29yeScsICdmdW5jdGlvbmFsaXR5JylcbiAgICAgICAgLmZpZWxkKCdwYWdlJywgJ0Rhc2hib2FyZCcpXG4gICAgICAgIC5maWVsZCgncHJpb3JpdHknLCAnaGlnaCcpXG4gICAgICAgIC5hdHRhY2goJ2F0dGFjaG1lbnRzJywgcGF0aC5qb2luKHRlc3RGaWxlc0RpciwgJ3Rlc3QtaW1hZ2UucG5nJykpXG4gICAgICAgIC5hdHRhY2goJ2F0dGFjaG1lbnRzJywgcGF0aC5qb2luKHRlc3RGaWxlc0RpciwgJ3Rlc3QtZG9jdW1lbnQucGRmJykpXG4gICAgICAgIC5hdHRhY2goJ2F0dGFjaG1lbnRzJywgcGF0aC5qb2luKHRlc3RGaWxlc0RpciwgJ2Vycm9yLWxvZy50eHQnKSlcbiAgICAgICAgLmV4cGVjdCgyMDEpO1xuXG4gICAgICBleHBlY3QocmVzcG9uc2UuYm9keSkudG9NYXRjaE9iamVjdCh7XG4gICAgICAgIGlkOiBleHBlY3QuYW55KFN0cmluZyksXG4gICAgICAgIHRpdGxlOiAnQnVnIHdpdGggTXVsdGlwbGUgRmlsZXMnXG4gICAgICB9KTtcblxuICAgICAgLy8gU2hvdWxkIGNyZWF0ZSBkb2N1bWVudCBmb3IgZWFjaCBhdHRhY2htZW50XG4gICAgICBleHBlY3QobW9ja1N0b3JhZ2UuY3JlYXRlRG9jdW1lbnQpLnRvSGF2ZUJlZW5DYWxsZWRUaW1lcygzKTtcbiAgICAgIGV4cGVjdChtb2NrU3RvcmFnZS5jcmVhdGVEb2N1bWVudCkudG9IYXZlQmVlbkNhbGxlZFdpdGgoXG4gICAgICAgIGV4cGVjdC5vYmplY3RDb250YWluaW5nKHtcbiAgICAgICAgICBuYW1lOiAndGVzdC1pbWFnZS5wbmcnLFxuICAgICAgICAgIGF0dGFjaGVkVG9UeXBlOiAnYnVnJ1xuICAgICAgICB9KVxuICAgICAgKTtcbiAgICAgIGV4cGVjdChtb2NrU3RvcmFnZS5jcmVhdGVEb2N1bWVudCkudG9IYXZlQmVlbkNhbGxlZFdpdGgoXG4gICAgICAgIGV4cGVjdC5vYmplY3RDb250YWluaW5nKHtcbiAgICAgICAgICBuYW1lOiAndGVzdC1kb2N1bWVudC5wZGYnLFxuICAgICAgICAgIGF0dGFjaGVkVG9UeXBlOiAnYnVnJ1xuICAgICAgICB9KVxuICAgICAgKTtcbiAgICAgIGV4cGVjdChtb2NrU3RvcmFnZS5jcmVhdGVEb2N1bWVudCkudG9IYXZlQmVlbkNhbGxlZFdpdGgoXG4gICAgICAgIGV4cGVjdC5vYmplY3RDb250YWluaW5nKHtcbiAgICAgICAgICBuYW1lOiAnZXJyb3ItbG9nLnR4dCcsXG4gICAgICAgICAgYXR0YWNoZWRUb1R5cGU6ICdidWcnXG4gICAgICAgIH0pXG4gICAgICApO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCByZWplY3Qgb3ZlcnNpemVkIGZpbGVzIGluIGJ1ZyByZXBvcnRzJywgYXN5bmMgKCkgPT4ge1xuICAgICAgLy8gQ3JlYXRlIGEgbGFyZ2UgZmlsZSAob3ZlciAxME1CIGxpbWl0KVxuICAgICAgY29uc3QgbGFyZ2VGaWxlID0gcGF0aC5qb2luKHRlc3RGaWxlc0RpciwgJ2xhcmdlLWZpbGUucG5nJyk7XG4gICAgICBjb25zdCBsYXJnZUNvbnRlbnQgPSBCdWZmZXIuYWxsb2MoMTEgKiAxMDI0ICogMTAyNCwgJ3gnKTsgLy8gMTFNQlxuICAgICAgZnMud3JpdGVGaWxlU3luYyhsYXJnZUZpbGUsIGxhcmdlQ29udGVudCk7XG5cbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgcmVxdWVzdChhcHApXG4gICAgICAgIC5wb3N0KCcvYXBpL2J1Z3MnKVxuICAgICAgICAuZmllbGQoJ3RpdGxlJywgJ0J1ZyB3aXRoIExhcmdlIEZpbGUnKVxuICAgICAgICAuZmllbGQoJ2Rlc2NyaXB0aW9uJywgJ1Rlc3RpbmcgZmlsZSBzaXplIGxpbWl0cy4nKVxuICAgICAgICAuZmllbGQoJ2NhdGVnb3J5JywgJ3VpX3V4JylcbiAgICAgICAgLmZpZWxkKCdwYWdlJywgJ1Rlc3QgUGFnZScpXG4gICAgICAgIC5maWVsZCgncHJpb3JpdHknLCAnbWVkaXVtJylcbiAgICAgICAgLmF0dGFjaCgnYXR0YWNobWVudHMnLCBsYXJnZUZpbGUpXG4gICAgICAgIC5leHBlY3QoNDAwKTtcblxuICAgICAgZXhwZWN0KHJlc3BvbnNlLmJvZHkpLnRvTWF0Y2hPYmplY3Qoe1xuICAgICAgICBlcnJvcjogZXhwZWN0LnN0cmluZ01hdGNoaW5nKC9maWxlLip0b28gbGFyZ2V8c2l6ZS4qbGltaXQvaSlcbiAgICAgIH0pO1xuXG4gICAgICBleHBlY3QobW9ja1N0b3JhZ2UuY3JlYXRlQnVnKS5ub3QudG9IYXZlQmVlbkNhbGxlZCgpO1xuICAgICAgZXhwZWN0KG1vY2tTdG9yYWdlLmNyZWF0ZURvY3VtZW50KS5ub3QudG9IYXZlQmVlbkNhbGxlZCgpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCByZWplY3QgaW52YWxpZCBmaWxlIHR5cGVzIGluIGJ1ZyByZXBvcnRzJywgYXN5bmMgKCkgPT4ge1xuICAgICAgLy8gQ3JlYXRlIGFuIGV4ZWN1dGFibGUgZmlsZVxuICAgICAgY29uc3QgZXhlY0ZpbGUgPSBwYXRoLmpvaW4odGVzdEZpbGVzRGlyLCAnbWFsaWNpb3VzLmV4ZScpO1xuICAgICAgZnMud3JpdGVGaWxlU3luYyhleGVjRmlsZSwgJ2Zha2UgZXhlY3V0YWJsZSBjb250ZW50Jyk7XG5cbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgcmVxdWVzdChhcHApXG4gICAgICAgIC5wb3N0KCcvYXBpL2J1Z3MnKVxuICAgICAgICAuZmllbGQoJ3RpdGxlJywgJ0J1ZyB3aXRoIEludmFsaWQgRmlsZScpXG4gICAgICAgIC5maWVsZCgnZGVzY3JpcHRpb24nLCAnVGVzdGluZyBmaWxlIHR5cGUgdmFsaWRhdGlvbi4nKVxuICAgICAgICAuZmllbGQoJ2NhdGVnb3J5JywgJ3NlY3VyaXR5JylcbiAgICAgICAgLmZpZWxkKCdwYWdlJywgJ1Rlc3QgUGFnZScpXG4gICAgICAgIC5maWVsZCgncHJpb3JpdHknLCAnY3JpdGljYWwnKVxuICAgICAgICAuYXR0YWNoKCdhdHRhY2htZW50cycsIGV4ZWNGaWxlKVxuICAgICAgICAuZXhwZWN0KDQwMCk7XG5cbiAgICAgIGV4cGVjdChyZXNwb25zZS5ib2R5KS50b01hdGNoT2JqZWN0KHtcbiAgICAgICAgZXJyb3I6IGV4cGVjdC5zdHJpbmdNYXRjaGluZygvZmlsZS4qdHlwZS4qbm90LiphbGxvd2VkfGludmFsaWQuKmZpbGUuKnR5cGUvaSlcbiAgICAgIH0pO1xuXG4gICAgICBleHBlY3QobW9ja1N0b3JhZ2UuY3JlYXRlQnVnKS5ub3QudG9IYXZlQmVlbkNhbGxlZCgpO1xuICAgICAgZXhwZWN0KG1vY2tTdG9yYWdlLmNyZWF0ZURvY3VtZW50KS5ub3QudG9IYXZlQmVlbkNhbGxlZCgpO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnRmVhdHVyZSBSZXF1ZXN0IEZpbGUgVXBsb2FkcycsICgpID0+IHtcbiAgICBpdCgnc2hvdWxkIGhhbmRsZSBmZWF0dXJlIHJlcXVlc3Qgd2l0aCBkZXNpZ24gbW9ja3VwcycsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgcmVxdWVzdChhcHApXG4gICAgICAgIC5wb3N0KCcvYXBpL2ZlYXR1cmUtcmVxdWVzdHMnKVxuICAgICAgICAuZmllbGQoJ3RpdGxlJywgJ05ldyBVSSBGZWF0dXJlJylcbiAgICAgICAgLmZpZWxkKCdkZXNjcmlwdGlvbicsICdGZWF0dXJlIHJlcXVlc3Qgd2l0aCBkZXNpZ24gbW9ja3Vwcy4nKVxuICAgICAgICAuZmllbGQoJ2NhdGVnb3J5JywgJ3VpX3V4JylcbiAgICAgICAgLmZpZWxkKCdwcmlvcml0eScsICdtZWRpdW0nKVxuICAgICAgICAuYXR0YWNoKCdhdHRhY2htZW50cycsIHBhdGguam9pbih0ZXN0RmlsZXNEaXIsICd0ZXN0LWltYWdlLnBuZycpKVxuICAgICAgICAuYXR0YWNoKCdhdHRhY2htZW50cycsIHBhdGguam9pbih0ZXN0RmlsZXNEaXIsICd0ZXN0LWRvY3VtZW50LnBkZicpKVxuICAgICAgICAuZXhwZWN0KDIwMSk7XG5cbiAgICAgIGV4cGVjdChyZXNwb25zZS5ib2R5KS50b01hdGNoT2JqZWN0KHtcbiAgICAgICAgaWQ6IGV4cGVjdC5hbnkoU3RyaW5nKSxcbiAgICAgICAgdGl0bGU6ICdOZXcgVUkgRmVhdHVyZSdcbiAgICAgIH0pO1xuXG4gICAgICBleHBlY3QobW9ja1N0b3JhZ2UuY3JlYXRlRmVhdHVyZVJlcXVlc3QpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKFxuICAgICAgICBleHBlY3Qub2JqZWN0Q29udGFpbmluZyh7XG4gICAgICAgICAgdGl0bGU6ICdOZXcgVUkgRmVhdHVyZScsXG4gICAgICAgICAgZGVzY3JpcHRpb246ICdGZWF0dXJlIHJlcXVlc3Qgd2l0aCBkZXNpZ24gbW9ja3Vwcy4nLFxuICAgICAgICAgIGNhdGVnb3J5OiAndWlfdXgnLFxuICAgICAgICAgIHByaW9yaXR5OiAnbWVkaXVtJ1xuICAgICAgICB9KVxuICAgICAgKTtcblxuICAgICAgZXhwZWN0KG1vY2tTdG9yYWdlLmNyZWF0ZURvY3VtZW50KS50b0hhdmVCZWVuQ2FsbGVkVGltZXMoMik7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIHZhbGlkYXRlIGZlYXR1cmUgcmVxdWVzdCBmaWxlIHR5cGVzJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3Qgc2NyaXB0RmlsZSA9IHBhdGguam9pbih0ZXN0RmlsZXNEaXIsICdzY3JpcHQuanMnKTtcbiAgICAgIGZzLndyaXRlRmlsZVN5bmMoc2NyaXB0RmlsZSwgJ2NvbnNvbGUubG9nKFwicG90ZW50aWFsbHkgZGFuZ2Vyb3VzXCIpOycpO1xuXG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHJlcXVlc3QoYXBwKVxuICAgICAgICAucG9zdCgnL2FwaS9mZWF0dXJlLXJlcXVlc3RzJylcbiAgICAgICAgLmZpZWxkKCd0aXRsZScsICdGZWF0dXJlIHdpdGggU2NyaXB0JylcbiAgICAgICAgLmZpZWxkKCdkZXNjcmlwdGlvbicsICdUZXN0aW5nIHNjcmlwdCBmaWxlIHVwbG9hZC4nKVxuICAgICAgICAuZmllbGQoJ2NhdGVnb3J5JywgJ2Z1bmN0aW9uYWxpdHknKVxuICAgICAgICAuZmllbGQoJ3ByaW9yaXR5JywgJ2xvdycpXG4gICAgICAgIC5hdHRhY2goJ2F0dGFjaG1lbnRzJywgc2NyaXB0RmlsZSlcbiAgICAgICAgLmV4cGVjdCg0MDApO1xuXG4gICAgICBleHBlY3QocmVzcG9uc2UuYm9keSkudG9NYXRjaE9iamVjdCh7XG4gICAgICAgIGVycm9yOiBleHBlY3Quc3RyaW5nTWF0Y2hpbmcoL2ZpbGUuKnR5cGUuKm5vdC4qYWxsb3dlZC9pKVxuICAgICAgfSk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdEb2N1bWVudCBVcGxvYWQgQVBJJywgKCkgPT4ge1xuICAgIGl0KCdzaG91bGQgaGFuZGxlIGRvY3VtZW50IHVwbG9hZCB3aXRoIG1ldGFkYXRhJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCByZXF1ZXN0KGFwcClcbiAgICAgICAgLnBvc3QoJy9hcGkvZG9jdW1lbnRzJylcbiAgICAgICAgLmZpZWxkKCduYW1lJywgJ0xlZ2FsIENvbnRyYWN0JylcbiAgICAgICAgLmZpZWxkKCdkZXNjcmlwdGlvbicsICdJbXBvcnRhbnQgbGVnYWwgZG9jdW1lbnQnKVxuICAgICAgICAuZmllbGQoJ2RvY3VtZW50VHlwZScsICdjb250cmFjdCcpXG4gICAgICAgIC5maWVsZCgnaXNWaXNpYmxlVG9UZW5hbnRzJywgJ2ZhbHNlJylcbiAgICAgICAgLmF0dGFjaCgnZmlsZScsIHBhdGguam9pbih0ZXN0RmlsZXNEaXIsICd0ZXN0LWRvY3VtZW50LnBkZicpKVxuICAgICAgICAuZXhwZWN0KDIwMSk7XG5cbiAgICAgIGV4cGVjdChyZXNwb25zZS5ib2R5KS50b01hdGNoT2JqZWN0KHtcbiAgICAgICAgaWQ6IGV4cGVjdC5hbnkoU3RyaW5nKSxcbiAgICAgICAgbmFtZTogJ0xlZ2FsIENvbnRyYWN0JyxcbiAgICAgICAgZmlsZVBhdGg6IGV4cGVjdC5zdHJpbmdNYXRjaGluZygvZ2VuZXJhbFxcLy4qXFwucGRmJC8pXG4gICAgICB9KTtcblxuICAgICAgZXhwZWN0KG1vY2tTdG9yYWdlLmNyZWF0ZURvY3VtZW50KS50b0hhdmVCZWVuQ2FsbGVkV2l0aChcbiAgICAgICAgZXhwZWN0Lm9iamVjdENvbnRhaW5pbmcoe1xuICAgICAgICAgIG5hbWU6ICdMZWdhbCBDb250cmFjdCcsXG4gICAgICAgICAgZGVzY3JpcHRpb246ICdJbXBvcnRhbnQgbGVnYWwgZG9jdW1lbnQnLFxuICAgICAgICAgIGRvY3VtZW50VHlwZTogJ2NvbnRyYWN0JyxcbiAgICAgICAgICBmaWxlTmFtZTogJ3Rlc3QtZG9jdW1lbnQucGRmJyxcbiAgICAgICAgICBpc1Zpc2libGVUb1RlbmFudHM6IGZhbHNlLFxuICAgICAgICAgIHVwbG9hZGVkQnlJZDogJzEyM2U0NTY3LWU4OWItMTJkMy1hNDU2LTQyNjYxNDE3NDAwMCdcbiAgICAgICAgfSlcbiAgICAgICk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIHNlcnZlIHVwbG9hZGVkIGRvY3VtZW50cycsIGFzeW5jICgpID0+IHtcbiAgICAgIC8vIEZpcnN0IHVwbG9hZCBhIGRvY3VtZW50XG4gICAgICBjb25zdCB1cGxvYWRSZXNwb25zZSA9IGF3YWl0IHJlcXVlc3QoYXBwKVxuICAgICAgICAucG9zdCgnL2FwaS9kb2N1bWVudHMnKVxuICAgICAgICAuZmllbGQoJ25hbWUnLCAnVGVzdCBEb2N1bWVudCcpXG4gICAgICAgIC5maWVsZCgnZG9jdW1lbnRUeXBlJywgJ2dlbmVyYWwnKVxuICAgICAgICAuYXR0YWNoKCdmaWxlJywgcGF0aC5qb2luKHRlc3RGaWxlc0RpciwgJ3Rlc3QtZG9jdW1lbnQucGRmJykpXG4gICAgICAgIC5leHBlY3QoMjAxKTtcblxuICAgICAgY29uc3QgZG9jdW1lbnRJZCA9IHVwbG9hZFJlc3BvbnNlLmJvZHkuaWQ7XG5cbiAgICAgIC8vIE1vY2sgdGhlIGRvY3VtZW50IHJldHJpZXZhbFxuICAgICAgbW9ja1N0b3JhZ2UuZ2V0RG9jdW1lbnQgPSBqZXN0LmZuKCkubW9ja1Jlc29sdmVkVmFsdWUoe1xuICAgICAgICBpZDogZG9jdW1lbnRJZCxcbiAgICAgICAgbmFtZTogJ1Rlc3QgRG9jdW1lbnQnLFxuICAgICAgICBmaWxlUGF0aDogJ2dlbmVyYWwvdGVzdC1kb2N1bWVudC5wZGYnLFxuICAgICAgICBmaWxlTmFtZTogJ3Rlc3QtZG9jdW1lbnQucGRmJyxcbiAgICAgICAgbWltZVR5cGU6ICdhcHBsaWNhdGlvbi9wZGYnXG4gICAgICB9KTtcblxuICAgICAgLy8gVGhlbiB0cnkgdG8gYWNjZXNzIHRoZSBkb2N1bWVudFxuICAgICAgY29uc3QgYWNjZXNzUmVzcG9uc2UgPSBhd2FpdCByZXF1ZXN0KGFwcClcbiAgICAgICAgLmdldChgL2FwaS9kb2N1bWVudHMvJHtkb2N1bWVudElkfS9maWxlYClcbiAgICAgICAgLmV4cGVjdCgyMDApO1xuXG4gICAgICBleHBlY3QoYWNjZXNzUmVzcG9uc2UuaGVhZGVyc1snY29udGVudC10eXBlJ10pLnRvTWF0Y2goL2FwcGxpY2F0aW9uXFwvcGRmLyk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIHZhbGlkYXRlIGRvY3VtZW50IGFjY2VzcyBwZXJtaXNzaW9ucycsIGFzeW5jICgpID0+IHtcbiAgICAgIC8vIE1vY2sgdW5hdXRob3JpemVkIHVzZXJcbiAgICAgIGplc3QuY2xlYXJBbGxNb2NrcygpO1xuICAgICAgXG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHJlcXVlc3QoYXBwKVxuICAgICAgICAuZ2V0KCcvYXBpL2RvY3VtZW50cy91bmF1dGhvcml6ZWQtZG9jL2ZpbGUnKVxuICAgICAgICAuZXhwZWN0KDQwNCk7XG5cbiAgICAgIGV4cGVjdChyZXNwb25zZS5ib2R5KS50b01hdGNoT2JqZWN0KHtcbiAgICAgICAgZXJyb3I6IGV4cGVjdC5hbnkoU3RyaW5nKVxuICAgICAgfSk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdCaWxsIFJlY2VpcHQgVXBsb2FkcycsICgpID0+IHtcbiAgICBpdCgnc2hvdWxkIGhhbmRsZSBiaWxsIGNyZWF0aW9uIHdpdGggcmVjZWlwdCBhdHRhY2htZW50JywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCByZXF1ZXN0KGFwcClcbiAgICAgICAgLnBvc3QoJy9hcGkvYmlsbHMnKVxuICAgICAgICAuZmllbGQoJ3RpdGxlJywgJ0VsZWN0cmljaXR5IEJpbGwgLSBKYW51YXJ5IDIwMjUnKVxuICAgICAgICAuZmllbGQoJ2Ftb3VudCcsICcxNTAuNzUnKVxuICAgICAgICAuZmllbGQoJ2R1ZURhdGUnLCAnMjAyNS0wMi0xNScpXG4gICAgICAgIC5maWVsZCgnY2F0ZWdvcnknLCAndXRpbGl0aWVzJylcbiAgICAgICAgLmF0dGFjaCgncmVjZWlwdHMnLCBwYXRoLmpvaW4odGVzdEZpbGVzRGlyLCAndGVzdC1yZWNlaXB0LmpwZycpKVxuICAgICAgICAuZXhwZWN0KDIwMSk7XG5cbiAgICAgIGV4cGVjdChyZXNwb25zZS5ib2R5KS50b01hdGNoT2JqZWN0KHtcbiAgICAgICAgaWQ6IGV4cGVjdC5hbnkoU3RyaW5nKSxcbiAgICAgICAgdGl0bGU6ICdFbGVjdHJpY2l0eSBCaWxsIC0gSmFudWFyeSAyMDI1JyxcbiAgICAgICAgYW1vdW50OiAxNTAuNzVcbiAgICAgIH0pO1xuXG4gICAgICBleHBlY3QobW9ja1N0b3JhZ2UuY3JlYXRlQmlsbCkudG9IYXZlQmVlbkNhbGxlZFdpdGgoXG4gICAgICAgIGV4cGVjdC5vYmplY3RDb250YWluaW5nKHtcbiAgICAgICAgICB0aXRsZTogJ0VsZWN0cmljaXR5IEJpbGwgLSBKYW51YXJ5IDIwMjUnLFxuICAgICAgICAgIGFtb3VudDogMTUwLjc1LFxuICAgICAgICAgIGNhdGVnb3J5OiAndXRpbGl0aWVzJ1xuICAgICAgICB9KVxuICAgICAgKTtcblxuICAgICAgZXhwZWN0KG1vY2tTdG9yYWdlLmNyZWF0ZURvY3VtZW50KS50b0hhdmVCZWVuQ2FsbGVkV2l0aChcbiAgICAgICAgZXhwZWN0Lm9iamVjdENvbnRhaW5pbmcoe1xuICAgICAgICAgIG5hbWU6ICd0ZXN0LXJlY2VpcHQuanBnJyxcbiAgICAgICAgICBkb2N1bWVudFR5cGU6ICdyZWNlaXB0JyxcbiAgICAgICAgICBhdHRhY2hlZFRvVHlwZTogJ2JpbGwnXG4gICAgICAgIH0pXG4gICAgICApO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCB2YWxpZGF0ZSByZWNlaXB0IGZpbGUgZm9ybWF0cycsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IGludmFsaWRSZWNlaXB0RmlsZSA9IHBhdGguam9pbih0ZXN0RmlsZXNEaXIsICdyZWNlaXB0LnR4dCcpO1xuICAgICAgZnMud3JpdGVGaWxlU3luYyhpbnZhbGlkUmVjZWlwdEZpbGUsICdUaGlzIGlzIG5vdCBhbiBpbWFnZSByZWNlaXB0Jyk7XG5cbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgcmVxdWVzdChhcHApXG4gICAgICAgIC5wb3N0KCcvYXBpL2JpbGxzJylcbiAgICAgICAgLmZpZWxkKCd0aXRsZScsICdCaWxsIHdpdGggSW52YWxpZCBSZWNlaXB0JylcbiAgICAgICAgLmZpZWxkKCdhbW91bnQnLCAnMTAwLjAwJylcbiAgICAgICAgLmZpZWxkKCdkdWVEYXRlJywgJzIwMjUtMDMtMDEnKVxuICAgICAgICAuZmllbGQoJ2NhdGVnb3J5JywgJ21haW50ZW5hbmNlJylcbiAgICAgICAgLmF0dGFjaCgncmVjZWlwdHMnLCBpbnZhbGlkUmVjZWlwdEZpbGUpXG4gICAgICAgIC5leHBlY3QoNDAwKTtcblxuICAgICAgZXhwZWN0KHJlc3BvbnNlLmJvZHkpLnRvTWF0Y2hPYmplY3Qoe1xuICAgICAgICBlcnJvcjogZXhwZWN0LnN0cmluZ01hdGNoaW5nKC9yZWNlaXB0LiptdXN0LipiZS4qaW1hZ2V8aW52YWxpZC4qcmVjZWlwdC4qZm9ybWF0L2kpXG4gICAgICB9KTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ0ZpbGUgU3RvcmFnZSBhbmQgQ2xlYW51cCcsICgpID0+IHtcbiAgICBpdCgnc2hvdWxkIGNsZWFuIHVwIHRlbXBvcmFyeSBmaWxlcyBvbiB1cGxvYWQgZmFpbHVyZScsIGFzeW5jICgpID0+IHtcbiAgICAgIC8vIE1vY2sgYSBzdG9yYWdlIGZhaWx1cmVcbiAgICAgIG1vY2tTdG9yYWdlLmNyZWF0ZUJ1Zy5tb2NrUmVqZWN0ZWRWYWx1ZShuZXcgRXJyb3IoJ0RhdGFiYXNlIGVycm9yJykpO1xuXG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHJlcXVlc3QoYXBwKVxuICAgICAgICAucG9zdCgnL2FwaS9idWdzJylcbiAgICAgICAgLmZpZWxkKCd0aXRsZScsICdCdWcgdGhhdCB3aWxsIGZhaWwnKVxuICAgICAgICAuZmllbGQoJ2Rlc2NyaXB0aW9uJywgJ1RoaXMgc2hvdWxkIHRyaWdnZXIgY2xlYW51cC4nKVxuICAgICAgICAuZmllbGQoJ2NhdGVnb3J5JywgJ3VpX3V4JylcbiAgICAgICAgLmZpZWxkKCdwYWdlJywgJ1Rlc3QgUGFnZScpXG4gICAgICAgIC5maWVsZCgncHJpb3JpdHknLCAnbWVkaXVtJylcbiAgICAgICAgLmF0dGFjaCgnYXR0YWNobWVudHMnLCBwYXRoLmpvaW4odGVzdEZpbGVzRGlyLCAndGVzdC1pbWFnZS5wbmcnKSlcbiAgICAgICAgLmV4cGVjdCg1MDApO1xuXG4gICAgICBleHBlY3QocmVzcG9uc2UuYm9keSkudG9NYXRjaE9iamVjdCh7XG4gICAgICAgIGVycm9yOiBleHBlY3QuYW55KFN0cmluZylcbiAgICAgIH0pO1xuXG4gICAgICAvLyBWZXJpZnkgdGVtcG9yYXJ5IGZpbGVzIHdlcmUgY2xlYW5lZCB1cFxuICAgICAgY29uc3QgdGVtcEZpbGVzID0gZnMucmVhZGRpclN5bmModXBsb2FkRGlyKS5maWx0ZXIoZmlsZSA9PiBcbiAgICAgICAgZmlsZS5pbmNsdWRlcygndGVzdC1pbWFnZScpIHx8IGZpbGUuaW5jbHVkZXMoJ3RlbXAnKVxuICAgICAgKTtcbiAgICAgIGV4cGVjdCh0ZW1wRmlsZXMpLnRvSGF2ZUxlbmd0aCgwKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgaGFuZGxlIGNvbmN1cnJlbnQgZmlsZSB1cGxvYWRzJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgdXBsb2FkUHJvbWlzZXMgPSBBcnJheS5mcm9tKHsgbGVuZ3RoOiA1IH0sIChfLCBpKSA9PiBcbiAgICAgICAgcmVxdWVzdChhcHApXG4gICAgICAgICAgLnBvc3QoJy9hcGkvYnVncycpXG4gICAgICAgICAgLmZpZWxkKCd0aXRsZScsIGBDb25jdXJyZW50IEJ1ZyAke2kgKyAxfWApXG4gICAgICAgICAgLmZpZWxkKCdkZXNjcmlwdGlvbicsIGBDb25jdXJyZW50IHVwbG9hZCB0ZXN0ICR7aSArIDF9YClcbiAgICAgICAgICAuZmllbGQoJ2NhdGVnb3J5JywgJ3BlcmZvcm1hbmNlJylcbiAgICAgICAgICAuZmllbGQoJ3BhZ2UnLCAnVGVzdCBQYWdlJylcbiAgICAgICAgICAuZmllbGQoJ3ByaW9yaXR5JywgJ2xvdycpXG4gICAgICAgICAgLmF0dGFjaCgnYXR0YWNobWVudHMnLCBwYXRoLmpvaW4odGVzdEZpbGVzRGlyLCAndGVzdC1pbWFnZS5wbmcnKSlcbiAgICAgICk7XG5cbiAgICAgIGNvbnN0IHJlc3BvbnNlcyA9IGF3YWl0IFByb21pc2UuYWxsKHVwbG9hZFByb21pc2VzKTtcblxuICAgICAgcmVzcG9uc2VzLmZvckVhY2goKHJlc3BvbnNlLCBpKSA9PiB7XG4gICAgICAgIGV4cGVjdChyZXNwb25zZS5zdGF0dXMpLnRvQmUoMjAxKTtcbiAgICAgICAgZXhwZWN0KHJlc3BvbnNlLmJvZHkpLnRvTWF0Y2hPYmplY3Qoe1xuICAgICAgICAgIGlkOiBleHBlY3QuYW55KFN0cmluZyksXG4gICAgICAgICAgdGl0bGU6IGBDb25jdXJyZW50IEJ1ZyAke2kgKyAxfWBcbiAgICAgICAgfSk7XG4gICAgICB9KTtcblxuICAgICAgZXhwZWN0KG1vY2tTdG9yYWdlLmNyZWF0ZUJ1ZykudG9IYXZlQmVlbkNhbGxlZFRpbWVzKDUpO1xuICAgICAgZXhwZWN0KG1vY2tTdG9yYWdlLmNyZWF0ZURvY3VtZW50KS50b0hhdmVCZWVuQ2FsbGVkVGltZXMoNSk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdGaWxlIFZhbGlkYXRpb24gRWRnZSBDYXNlcycsICgpID0+IHtcbiAgICBpdCgnc2hvdWxkIGhhbmRsZSBlbXB0eSBmaWxlcycsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IGVtcHR5RmlsZSA9IHBhdGguam9pbih0ZXN0RmlsZXNEaXIsICdlbXB0eS5wbmcnKTtcbiAgICAgIGZzLndyaXRlRmlsZVN5bmMoZW1wdHlGaWxlLCAnJyk7XG5cbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgcmVxdWVzdChhcHApXG4gICAgICAgIC5wb3N0KCcvYXBpL2J1Z3MnKVxuICAgICAgICAuZmllbGQoJ3RpdGxlJywgJ0J1ZyB3aXRoIEVtcHR5IEZpbGUnKVxuICAgICAgICAuZmllbGQoJ2Rlc2NyaXB0aW9uJywgJ1Rlc3RpbmcgZW1wdHkgZmlsZSBoYW5kbGluZy4nKVxuICAgICAgICAuZmllbGQoJ2NhdGVnb3J5JywgJ3VpX3V4JylcbiAgICAgICAgLmZpZWxkKCdwYWdlJywgJ1Rlc3QgUGFnZScpXG4gICAgICAgIC5maWVsZCgncHJpb3JpdHknLCAnbWVkaXVtJylcbiAgICAgICAgLmF0dGFjaCgnYXR0YWNobWVudHMnLCBlbXB0eUZpbGUpXG4gICAgICAgIC5leHBlY3QoNDAwKTtcblxuICAgICAgZXhwZWN0KHJlc3BvbnNlLmJvZHkpLnRvTWF0Y2hPYmplY3Qoe1xuICAgICAgICBlcnJvcjogZXhwZWN0LnN0cmluZ01hdGNoaW5nKC9maWxlLiplbXB0eXxpbnZhbGlkLipmaWxlLipzaXplL2kpXG4gICAgICB9KTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgaGFuZGxlIGNvcnJ1cHRlZCBmaWxlcycsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IGNvcnJ1cHRlZEZpbGUgPSBwYXRoLmpvaW4odGVzdEZpbGVzRGlyLCAnY29ycnVwdGVkLnBkZicpO1xuICAgICAgZnMud3JpdGVGaWxlU3luYyhjb3JydXB0ZWRGaWxlLCAnVGhpcyBpcyBub3QgYSB2YWxpZCBQREYgY29udGVudCBidXQgY2xhaW1zIHRvIGJlJyk7XG5cbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgcmVxdWVzdChhcHApXG4gICAgICAgIC5wb3N0KCcvYXBpL2RvY3VtZW50cycpXG4gICAgICAgIC5maWVsZCgnbmFtZScsICdDb3JydXB0ZWQgRG9jdW1lbnQnKVxuICAgICAgICAuZmllbGQoJ2RvY3VtZW50VHlwZScsICdnZW5lcmFsJylcbiAgICAgICAgLmF0dGFjaCgnZmlsZScsIGNvcnJ1cHRlZEZpbGUpXG4gICAgICAgIC5leHBlY3QoNDAwKTtcblxuICAgICAgZXhwZWN0KHJlc3BvbnNlLmJvZHkpLnRvTWF0Y2hPYmplY3Qoe1xuICAgICAgICBlcnJvcjogZXhwZWN0LnN0cmluZ01hdGNoaW5nKC9pbnZhbGlkLipmaWxlLipmb3JtYXR8Y29ycnVwdGVkLipmaWxlL2kpXG4gICAgICB9KTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgaGFuZGxlIGZpbGVuYW1lIHdpdGggc3BlY2lhbCBjaGFyYWN0ZXJzJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3Qgc3BlY2lhbE5hbWVGaWxlID0gcGF0aC5qb2luKHRlc3RGaWxlc0RpciwgJ2ZpbGUgd2l0aCBzcGFjZXMgJiBzw61tYsO2bHMucGRmJyk7XG4gICAgICBmcy53cml0ZUZpbGVTeW5jKHNwZWNpYWxOYW1lRmlsZSwgJ21vY2sgcGRmIGNvbnRlbnQnKTtcblxuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCByZXF1ZXN0KGFwcClcbiAgICAgICAgLnBvc3QoJy9hcGkvZG9jdW1lbnRzJylcbiAgICAgICAgLmZpZWxkKCduYW1lJywgJ0RvY3VtZW50IHdpdGggU3BlY2lhbCBGaWxlbmFtZScpXG4gICAgICAgIC5maWVsZCgnZG9jdW1lbnRUeXBlJywgJ2dlbmVyYWwnKVxuICAgICAgICAuYXR0YWNoKCdmaWxlJywgc3BlY2lhbE5hbWVGaWxlKVxuICAgICAgICAuZXhwZWN0KDIwMSk7XG5cbiAgICAgIGV4cGVjdChyZXNwb25zZS5ib2R5KS50b01hdGNoT2JqZWN0KHtcbiAgICAgICAgaWQ6IGV4cGVjdC5hbnkoU3RyaW5nKSxcbiAgICAgICAgbmFtZTogJ0RvY3VtZW50IHdpdGggU3BlY2lhbCBGaWxlbmFtZSdcbiAgICAgIH0pO1xuXG4gICAgICBleHBlY3QobW9ja1N0b3JhZ2UuY3JlYXRlRG9jdW1lbnQpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKFxuICAgICAgICBleHBlY3Qub2JqZWN0Q29udGFpbmluZyh7XG4gICAgICAgICAgbmFtZTogJ0RvY3VtZW50IHdpdGggU3BlY2lhbCBGaWxlbmFtZScsXG4gICAgICAgICAgZmlsZU5hbWU6IGV4cGVjdC5zdHJpbmdNYXRjaGluZygvXlthLXpBLVowLTlfLV0rXFwucGRmJC8pLCAvLyBTaG91bGQgYmUgc2FuaXRpemVkXG4gICAgICAgICAgZmlsZVBhdGg6IGV4cGVjdC5zdHJpbmdNYXRjaGluZygvZ2VuZXJhbFxcLy4qXFwucGRmJC8pXG4gICAgICAgIH0pXG4gICAgICApO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBoYW5kbGUgbWF4aW11bSB0b3RhbCB1cGxvYWQgc2l6ZSBsaW1pdCcsIGFzeW5jICgpID0+IHtcbiAgICAgIC8vIENyZWF0ZSBtdWx0aXBsZSBsYXJnZSBmaWxlcyB0aGF0IGV4Y2VlZCB0b3RhbCBsaW1pdFxuICAgICAgY29uc3QgbGFyZ2VGaWxlcyA9IFtdO1xuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCAzOyBpKyspIHtcbiAgICAgICAgY29uc3QgZmlsZU5hbWUgPSBgbGFyZ2UtZmlsZS0ke2l9LnBuZ2A7XG4gICAgICAgIGNvbnN0IGZpbGVQYXRoID0gcGF0aC5qb2luKHRlc3RGaWxlc0RpciwgZmlsZU5hbWUpO1xuICAgICAgICBjb25zdCBjb250ZW50ID0gQnVmZmVyLmFsbG9jKDUgKiAxMDI0ICogMTAyNCwgJ3gnKTsgLy8gNU1CIGVhY2hcbiAgICAgICAgZnMud3JpdGVGaWxlU3luYyhmaWxlUGF0aCwgY29udGVudCk7XG4gICAgICAgIGxhcmdlRmlsZXMucHVzaChmaWxlUGF0aCk7XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IHJlcXVlc3RfYnVpbGRlciA9IHJlcXVlc3QoYXBwKVxuICAgICAgICAucG9zdCgnL2FwaS9idWdzJylcbiAgICAgICAgLmZpZWxkKCd0aXRsZScsICdCdWcgd2l0aCBNdWx0aXBsZSBMYXJnZSBGaWxlcycpXG4gICAgICAgIC5maWVsZCgnZGVzY3JpcHRpb24nLCAnVGVzdGluZyB0b3RhbCBzaXplIGxpbWl0cy4nKVxuICAgICAgICAuZmllbGQoJ2NhdGVnb3J5JywgJ3BlcmZvcm1hbmNlJylcbiAgICAgICAgLmZpZWxkKCdwYWdlJywgJ1Rlc3QgUGFnZScpXG4gICAgICAgIC5maWVsZCgncHJpb3JpdHknLCAnbWVkaXVtJyk7XG5cbiAgICAgIC8vIEF0dGFjaCBhbGwgbGFyZ2UgZmlsZXNcbiAgICAgIGxhcmdlRmlsZXMuZm9yRWFjaChmaWxlUGF0aCA9PiB7XG4gICAgICAgIHJlcXVlc3RfYnVpbGRlci5hdHRhY2goJ2F0dGFjaG1lbnRzJywgZmlsZVBhdGgpO1xuICAgICAgfSk7XG5cbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgcmVxdWVzdF9idWlsZGVyLmV4cGVjdCg0MDApO1xuXG4gICAgICBleHBlY3QocmVzcG9uc2UuYm9keSkudG9NYXRjaE9iamVjdCh7XG4gICAgICAgIGVycm9yOiBleHBlY3Quc3RyaW5nTWF0Y2hpbmcoL3RvdGFsLipzaXplLipleGNlZWRlZHx0b28gbWFueS4qbGFyZ2UuKmZpbGVzL2kpXG4gICAgICB9KTtcbiAgICB9KTtcbiAgfSk7XG59KTsiXSwidmVyc2lvbiI6M30=