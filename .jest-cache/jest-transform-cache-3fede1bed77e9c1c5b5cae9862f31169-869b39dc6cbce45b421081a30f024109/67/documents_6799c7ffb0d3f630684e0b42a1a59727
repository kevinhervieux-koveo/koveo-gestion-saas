8b5285f6b893bdaa7f39a9d55e81f8b2
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.ATTACHABLE_ENTITY_TYPES = exports.DOCUMENT_TYPES = exports.attachDocumentSchema = exports.insertDocumentSchema = exports.documents = void 0;
const drizzle_orm_1 = require("drizzle-orm");
const pg_core_1 = require("drizzle-orm/pg-core");
const zod_1 = require("zod");
const property_1 = require("./property");
// Unified documents table
/**
 * Unified documents table for all document types across the system.
 * Stores documents that can be associated with either residences, buildings, or neither.
 * Enhanced with file metadata, content type, and attachment relationships.
 */
exports.documents = (0, pg_core_1.pgTable)('documents', {
    id: (0, pg_core_1.varchar)('id')
        .primaryKey()
        .default((0, drizzle_orm_1.sql) `gen_random_uuid()`),
    name: (0, pg_core_1.text)('name').notNull(),
    description: (0, pg_core_1.text)('description'),
    documentType: (0, pg_core_1.text)('document_type').notNull(),
    filePath: (0, pg_core_1.text)('file_path').notNull().unique(),
    fileName: (0, pg_core_1.text)('file_name'), // Original filename
    fileSize: (0, pg_core_1.varchar)('file_size'), // File size in bytes
    mimeType: (0, pg_core_1.text)('mime_type'), // MIME type for proper handling
    isVisibleToTenants: (0, pg_core_1.boolean)('is_visible_to_tenants').default(false).notNull(),
    residenceId: (0, pg_core_1.varchar)('residence_id').references(() => property_1.residences.id),
    buildingId: (0, pg_core_1.varchar)('building_id').references(() => property_1.buildings.id),
    uploadedById: (0, pg_core_1.varchar)('uploaded_by_id').notNull(),
    // Support for document attachments to forms
    attachedToType: (0, pg_core_1.text)('attached_to_type'), // 'bill', 'feature_request', 'bug_report', etc.
    attachedToId: (0, pg_core_1.varchar)('attached_to_id'), // ID of the entity this document is attached to
    createdAt: (0, pg_core_1.timestamp)('created_at').defaultNow().notNull(),
    updatedAt: (0, pg_core_1.timestamp)('updated_at').defaultNow().notNull(),
});
// Enhanced document schema with file metadata
exports.insertDocumentSchema = zod_1.z.object({
    name: zod_1.z.string().min(1, 'Document name is required'),
    description: zod_1.z.string().optional(),
    documentType: zod_1.z.string().min(1, 'Document type is required'),
    filePath: zod_1.z.string().min(1, 'File path is required'),
    fileName: zod_1.z.string().optional(),
    fileSize: zod_1.z.string().optional(),
    mimeType: zod_1.z.string().optional(),
    isVisibleToTenants: zod_1.z.boolean().default(false),
    residenceId: zod_1.z.string().uuid().optional(),
    buildingId: zod_1.z.string().uuid().optional(),
    uploadedById: zod_1.z.string().uuid().min(1, 'Uploaded by user ID is required'),
    attachedToType: zod_1.z.string().optional(),
    attachedToId: zod_1.z.string().uuid().optional(),
});
// Schema for form-attached documents
exports.attachDocumentSchema = zod_1.z.object({
    name: zod_1.z.string().min(1, 'Document name is required'),
    description: zod_1.z.string().optional(),
    documentType: zod_1.z.enum(['attachment', 'screenshot', 'evidence', 'supporting_document']).default('attachment'),
    fileName: zod_1.z.string().min(1, 'File name is required'),
    fileSize: zod_1.z.string().optional(),
    mimeType: zod_1.z.string().optional(),
    attachedToType: zod_1.z.enum(['bill', 'feature_request', 'bug_report', 'maintenance_request']),
    attachedToId: zod_1.z.string().uuid().min(1, 'Attached entity ID is required'),
    uploadedById: zod_1.z.string().uuid().min(1, 'Uploaded by user ID is required'),
});
// Document type constants for consistency
exports.DOCUMENT_TYPES = {
    // Building/Residence documents
    BYLAW: 'bylaw',
    FINANCIAL: 'financial',
    MAINTENANCE: 'maintenance',
    LEGAL: 'legal',
    MEETING_MINUTES: 'meeting_minutes',
    INSURANCE: 'insurance',
    CONTRACTS: 'contracts',
    PERMITS: 'permits',
    INSPECTION: 'inspection',
    LEASE: 'lease',
    CORRESPONDENCE: 'correspondence',
    UTILITIES: 'utilities',
    OTHER: 'other',
    // Form attachments
    ATTACHMENT: 'attachment',
    SCREENSHOT: 'screenshot',
    EVIDENCE: 'evidence',
    SUPPORTING_DOCUMENT: 'supporting_document'
};
// Entity types that can have attached documents
exports.ATTACHABLE_ENTITY_TYPES = {
    BILL: 'bill',
    FEATURE_REQUEST: 'feature_request',
    BUG_REPORT: 'bug_report',
    MAINTENANCE_REQUEST: 'maintenance_request'
};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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LE1BQU0sRUFBRSxpQkFBaUIsRUFBRSxZQUFZLEVBQUUscUJBQXFCLENBQUMsQ0FBQztJQUN4RixZQUFZLEVBQUUsT0FBQyxDQUFDLE1BQU0sRUFBRSxDQUFDLElBQUksRUFBRSxDQUFDLEdBQUcsQ0FBQyxDQUFDLEVBQUUsZ0NBQWdDLENBQUM7SUFDeEUsWUFBWSxFQUFFLE9BQUMsQ0FBQyxNQUFNLEVBQUUsQ0FBQyxJQUFJLEVBQUUsQ0FBQyxHQUFHLENBQUMsQ0FBQyxFQUFFLGlDQUFpQyxDQUFDO0NBQzFFLENBQUMsQ0FBQztBQWlCSCwwQ0FBMEM7QUFDN0IsUUFBQSxjQUFjLEdBQUc7SUFDNUIsK0JBQStCO0lBQy9CLEtBQUssRUFBRSxPQUFPO0lBQ2QsU0FBUyxFQUFFLFdBQVc7SUFDdEIsV0FBVyxFQUFFLGFBQWE7SUFDMUIsS0FBSyxFQUFFLE9BQU87SUFDZCxlQUFlLEVBQUUsaUJBQWlCO0lBQ2xDLFNBQVMsRUFBRSxXQUFXO0lBQ3RCLFNBQVMsRUFBRSxXQUFXO0lBQ3RCLE9BQU8sRUFBRSxTQUFTO0lBQ2xCLFVBQVUsRUFBRSxZQUFZO0lBQ3hCLEtBQUssRUFBRSxPQUFPO0lBQ2QsY0FBYyxFQUFFLGdCQUFnQjtJQUNoQyxTQUFTLEVBQUUsV0FBVztJQUN0QixLQUFLLEVBQUUsT0FBTztJQUVkLG1CQUFtQjtJQUNuQixVQUFVLEVBQUUsWUFBWTtJQUN4QixVQUFVLEVBQUUsWUFBWTtJQUN4QixRQUFRLEVBQUUsVUFBVTtJQUNwQixtQkFBbUIsRUFBRSxxQkFBcUI7Q0FDbEMsQ0FBQztBQUVYLGdEQUFnRDtBQUNuQyxRQUFBLHVCQUF1QixHQUFHO0lBQ3JDLElBQUksRUFBRSxNQUFNO0lBQ1osZUFBZSxFQUFFLGlCQUFpQjtJQUNsQyxVQUFVLEVBQUUsWUFBWTtJQUN4QixtQkFBbUIsRUFBRSxxQkFBcUI7Q0FDbEMsQ0FBQyIsIm5hbWVzIjpbXSwic291cmNlcyI6WyIvaG9tZS9ydW5uZXIvd29ya3NwYWNlL3NoYXJlZC9zY2hlbWFzL2RvY3VtZW50cy50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBzcWwgfSBmcm9tICdkcml6emxlLW9ybSc7XG5pbXBvcnQgeyBwZ1RhYmxlLCB0ZXh0LCB0aW1lc3RhbXAsIGJvb2xlYW4sIHZhcmNoYXIsIHV1aWQgfSBmcm9tICdkcml6emxlLW9ybS9wZy1jb3JlJztcbmltcG9ydCB7IGNyZWF0ZUluc2VydFNjaGVtYSB9IGZyb20gJ2RyaXp6bGUtem9kJztcbmltcG9ydCB7IHogfSBmcm9tICd6b2QnO1xuaW1wb3J0IHsgYnVpbGRpbmdzLCByZXNpZGVuY2VzIH0gZnJvbSAnLi9wcm9wZXJ0eSc7XG5cblxuLy8gVW5pZmllZCBkb2N1bWVudHMgdGFibGVcbi8qKlxuICogVW5pZmllZCBkb2N1bWVudHMgdGFibGUgZm9yIGFsbCBkb2N1bWVudCB0eXBlcyBhY3Jvc3MgdGhlIHN5c3RlbS5cbiAqIFN0b3JlcyBkb2N1bWVudHMgdGhhdCBjYW4gYmUgYXNzb2NpYXRlZCB3aXRoIGVpdGhlciByZXNpZGVuY2VzLCBidWlsZGluZ3MsIG9yIG5laXRoZXIuXG4gKiBFbmhhbmNlZCB3aXRoIGZpbGUgbWV0YWRhdGEsIGNvbnRlbnQgdHlwZSwgYW5kIGF0dGFjaG1lbnQgcmVsYXRpb25zaGlwcy5cbiAqL1xuZXhwb3J0IGNvbnN0IGRvY3VtZW50cyA9IHBnVGFibGUoJ2RvY3VtZW50cycsIHtcbiAgaWQ6IHZhcmNoYXIoJ2lkJylcbiAgICAucHJpbWFyeUtleSgpXG4gICAgLmRlZmF1bHQoc3FsYGdlbl9yYW5kb21fdXVpZCgpYCksXG4gIG5hbWU6IHRleHQoJ25hbWUnKS5ub3ROdWxsKCksXG4gIGRlc2NyaXB0aW9uOiB0ZXh0KCdkZXNjcmlwdGlvbicpLFxuICBkb2N1bWVudFR5cGU6IHRleHQoJ2RvY3VtZW50X3R5cGUnKS5ub3ROdWxsKCksXG4gIGZpbGVQYXRoOiB0ZXh0KCdmaWxlX3BhdGgnKS5ub3ROdWxsKCkudW5pcXVlKCksXG4gIGZpbGVOYW1lOiB0ZXh0KCdmaWxlX25hbWUnKSwgLy8gT3JpZ2luYWwgZmlsZW5hbWVcbiAgZmlsZVNpemU6IHZhcmNoYXIoJ2ZpbGVfc2l6ZScpLCAvLyBGaWxlIHNpemUgaW4gYnl0ZXNcbiAgbWltZVR5cGU6IHRleHQoJ21pbWVfdHlwZScpLCAvLyBNSU1FIHR5cGUgZm9yIHByb3BlciBoYW5kbGluZ1xuICBpc1Zpc2libGVUb1RlbmFudHM6IGJvb2xlYW4oJ2lzX3Zpc2libGVfdG9fdGVuYW50cycpLmRlZmF1bHQoZmFsc2UpLm5vdE51bGwoKSxcbiAgcmVzaWRlbmNlSWQ6IHZhcmNoYXIoJ3Jlc2lkZW5jZV9pZCcpLnJlZmVyZW5jZXMoKCkgPT4gcmVzaWRlbmNlcy5pZCksXG4gIGJ1aWxkaW5nSWQ6IHZhcmNoYXIoJ2J1aWxkaW5nX2lkJykucmVmZXJlbmNlcygoKSA9PiBidWlsZGluZ3MuaWQpLFxuICB1cGxvYWRlZEJ5SWQ6IHZhcmNoYXIoJ3VwbG9hZGVkX2J5X2lkJykubm90TnVsbCgpLFxuICAvLyBTdXBwb3J0IGZvciBkb2N1bWVudCBhdHRhY2htZW50cyB0byBmb3Jtc1xuICBhdHRhY2hlZFRvVHlwZTogdGV4dCgnYXR0YWNoZWRfdG9fdHlwZScpLCAvLyAnYmlsbCcsICdmZWF0dXJlX3JlcXVlc3QnLCAnYnVnX3JlcG9ydCcsIGV0Yy5cbiAgYXR0YWNoZWRUb0lkOiB2YXJjaGFyKCdhdHRhY2hlZF90b19pZCcpLCAvLyBJRCBvZiB0aGUgZW50aXR5IHRoaXMgZG9jdW1lbnQgaXMgYXR0YWNoZWQgdG9cbiAgY3JlYXRlZEF0OiB0aW1lc3RhbXAoJ2NyZWF0ZWRfYXQnKS5kZWZhdWx0Tm93KCkubm90TnVsbCgpLFxuICB1cGRhdGVkQXQ6IHRpbWVzdGFtcCgndXBkYXRlZF9hdCcpLmRlZmF1bHROb3coKS5ub3ROdWxsKCksXG59KTtcblxuLy8gRW5oYW5jZWQgZG9jdW1lbnQgc2NoZW1hIHdpdGggZmlsZSBtZXRhZGF0YVxuZXhwb3J0IGNvbnN0IGluc2VydERvY3VtZW50U2NoZW1hID0gei5vYmplY3Qoe1xuICBuYW1lOiB6LnN0cmluZygpLm1pbigxLCAnRG9jdW1lbnQgbmFtZSBpcyByZXF1aXJlZCcpLFxuICBkZXNjcmlwdGlvbjogei5zdHJpbmcoKS5vcHRpb25hbCgpLFxuICBkb2N1bWVudFR5cGU6IHouc3RyaW5nKCkubWluKDEsICdEb2N1bWVudCB0eXBlIGlzIHJlcXVpcmVkJyksXG4gIGZpbGVQYXRoOiB6LnN0cmluZygpLm1pbigxLCAnRmlsZSBwYXRoIGlzIHJlcXVpcmVkJyksXG4gIGZpbGVOYW1lOiB6LnN0cmluZygpLm9wdGlvbmFsKCksXG4gIGZpbGVTaXplOiB6LnN0cmluZygpLm9wdGlvbmFsKCksXG4gIG1pbWVUeXBlOiB6LnN0cmluZygpLm9wdGlvbmFsKCksXG4gIGlzVmlzaWJsZVRvVGVuYW50czogei5ib29sZWFuKCkuZGVmYXVsdChmYWxzZSksXG4gIHJlc2lkZW5jZUlkOiB6LnN0cmluZygpLnV1aWQoKS5vcHRpb25hbCgpLFxuICBidWlsZGluZ0lkOiB6LnN0cmluZygpLnV1aWQoKS5vcHRpb25hbCgpLFxuICB1cGxvYWRlZEJ5SWQ6IHouc3RyaW5nKCkudXVpZCgpLm1pbigxLCAnVXBsb2FkZWQgYnkgdXNlciBJRCBpcyByZXF1aXJlZCcpLFxuICBhdHRhY2hlZFRvVHlwZTogei5zdHJpbmcoKS5vcHRpb25hbCgpLFxuICBhdHRhY2hlZFRvSWQ6IHouc3RyaW5nKCkudXVpZCgpLm9wdGlvbmFsKCksXG59KTtcblxuLy8gU2NoZW1hIGZvciBmb3JtLWF0dGFjaGVkIGRvY3VtZW50c1xuZXhwb3J0IGNvbnN0IGF0dGFjaERvY3VtZW50U2NoZW1hID0gei5vYmplY3Qoe1xuICBuYW1lOiB6LnN0cmluZygpLm1pbigxLCAnRG9jdW1lbnQgbmFtZSBpcyByZXF1aXJlZCcpLFxuICBkZXNjcmlwdGlvbjogei5zdHJpbmcoKS5vcHRpb25hbCgpLFxuICBkb2N1bWVudFR5cGU6IHouZW51bShbJ2F0dGFjaG1lbnQnLCAnc2NyZWVuc2hvdCcsICdldmlkZW5jZScsICdzdXBwb3J0aW5nX2RvY3VtZW50J10pLmRlZmF1bHQoJ2F0dGFjaG1lbnQnKSxcbiAgZmlsZU5hbWU6IHouc3RyaW5nKCkubWluKDEsICdGaWxlIG5hbWUgaXMgcmVxdWlyZWQnKSxcbiAgZmlsZVNpemU6IHouc3RyaW5nKCkub3B0aW9uYWwoKSxcbiAgbWltZVR5cGU6IHouc3RyaW5nKCkub3B0aW9uYWwoKSxcbiAgYXR0YWNoZWRUb1R5cGU6IHouZW51bShbJ2JpbGwnLCAnZmVhdHVyZV9yZXF1ZXN0JywgJ2J1Z19yZXBvcnQnLCAnbWFpbnRlbmFuY2VfcmVxdWVzdCddKSxcbiAgYXR0YWNoZWRUb0lkOiB6LnN0cmluZygpLnV1aWQoKS5taW4oMSwgJ0F0dGFjaGVkIGVudGl0eSBJRCBpcyByZXF1aXJlZCcpLFxuICB1cGxvYWRlZEJ5SWQ6IHouc3RyaW5nKCkudXVpZCgpLm1pbigxLCAnVXBsb2FkZWQgYnkgdXNlciBJRCBpcyByZXF1aXJlZCcpLFxufSk7XG5cbi8qKlxuICogSW5zZXJ0IHR5cGUgZm9yIHVuaWZpZWQgZG9jdW1lbnRzXG4gKi9cbmV4cG9ydCB0eXBlIEluc2VydERvY3VtZW50ID0gei5pbmZlcjx0eXBlb2YgaW5zZXJ0RG9jdW1lbnRTY2hlbWE+O1xuXG4vKipcbiAqIEluc2VydCB0eXBlIGZvciBmb3JtLWF0dGFjaGVkIGRvY3VtZW50c1xuICovXG5leHBvcnQgdHlwZSBBdHRhY2hEb2N1bWVudCA9IHouaW5mZXI8dHlwZW9mIGF0dGFjaERvY3VtZW50U2NoZW1hPjtcblxuLyoqXG4gKiBTZWxlY3QgdHlwZSBmb3IgdW5pZmllZCBkb2N1bWVudHNcbiAqL1xuZXhwb3J0IHR5cGUgRG9jdW1lbnQgPSB0eXBlb2YgZG9jdW1lbnRzLiRpbmZlclNlbGVjdDtcblxuLy8gRG9jdW1lbnQgdHlwZSBjb25zdGFudHMgZm9yIGNvbnNpc3RlbmN5XG5leHBvcnQgY29uc3QgRE9DVU1FTlRfVFlQRVMgPSB7XG4gIC8vIEJ1aWxkaW5nL1Jlc2lkZW5jZSBkb2N1bWVudHNcbiAgQllMQVc6ICdieWxhdycsXG4gIEZJTkFOQ0lBTDogJ2ZpbmFuY2lhbCcsIFxuICBNQUlOVEVOQU5DRTogJ21haW50ZW5hbmNlJyxcbiAgTEVHQUw6ICdsZWdhbCcsXG4gIE1FRVRJTkdfTUlOVVRFUzogJ21lZXRpbmdfbWludXRlcycsXG4gIElOU1VSQU5DRTogJ2luc3VyYW5jZScsXG4gIENPTlRSQUNUUzogJ2NvbnRyYWN0cycsXG4gIFBFUk1JVFM6ICdwZXJtaXRzJyxcbiAgSU5TUEVDVElPTjogJ2luc3BlY3Rpb24nLFxuICBMRUFTRTogJ2xlYXNlJyxcbiAgQ09SUkVTUE9OREVOQ0U6ICdjb3JyZXNwb25kZW5jZScsXG4gIFVUSUxJVElFUzogJ3V0aWxpdGllcycsXG4gIE9USEVSOiAnb3RoZXInLFxuICBcbiAgLy8gRm9ybSBhdHRhY2htZW50c1xuICBBVFRBQ0hNRU5UOiAnYXR0YWNobWVudCcsXG4gIFNDUkVFTlNIT1Q6ICdzY3JlZW5zaG90JywgXG4gIEVWSURFTkNFOiAnZXZpZGVuY2UnLFxuICBTVVBQT1JUSU5HX0RPQ1VNRU5UOiAnc3VwcG9ydGluZ19kb2N1bWVudCdcbn0gYXMgY29uc3Q7XG5cbi8vIEVudGl0eSB0eXBlcyB0aGF0IGNhbiBoYXZlIGF0dGFjaGVkIGRvY3VtZW50c1xuZXhwb3J0IGNvbnN0IEFUVEFDSEFCTEVfRU5USVRZX1RZUEVTID0ge1xuICBCSUxMOiAnYmlsbCcsXG4gIEZFQVRVUkVfUkVRVUVTVDogJ2ZlYXR1cmVfcmVxdWVzdCcsXG4gIEJVR19SRVBPUlQ6ICdidWdfcmVwb3J0JywgXG4gIE1BSU5URU5BTkNFX1JFUVVFU1Q6ICdtYWludGVuYW5jZV9yZXF1ZXN0J1xufSBhcyBjb25zdDtcbiJdLCJ2ZXJzaW9uIjozfQ==