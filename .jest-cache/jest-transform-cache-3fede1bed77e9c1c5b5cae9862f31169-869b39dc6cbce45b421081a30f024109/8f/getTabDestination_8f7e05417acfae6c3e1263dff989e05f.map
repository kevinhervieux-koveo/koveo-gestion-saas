{"file":"/home/runner/workspace/node_modules/@testing-library/user-event/dist/cjs/utils/focus/getTabDestination.js","mappings":"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","names":[],"sources":["/home/runner/workspace/node_modules/@testing-library/user-event/dist/cjs/utils/focus/getTabDestination.js"],"sourcesContent":["'use strict';\n\nvar isDisabled = require('../misc/isDisabled.js');\nvar isElementType = require('../misc/isElementType.js');\nvar isVisible = require('../misc/isVisible.js');\nvar selector = require('./selector.js');\n\nfunction getTabDestination(activeElement, shift) {\n    const document = activeElement.ownerDocument;\n    const focusableElements = document.querySelectorAll(selector.FOCUSABLE_SELECTOR);\n    const enabledElements = Array.from(focusableElements).filter((el)=>el === activeElement || !(Number(el.getAttribute('tabindex')) < 0 || isDisabled.isDisabled(el)));\n    // tabindex has no effect if the active element has negative tabindex\n    if (Number(activeElement.getAttribute('tabindex')) >= 0) {\n        enabledElements.sort((a, b)=>{\n            const i = Number(a.getAttribute('tabindex'));\n            const j = Number(b.getAttribute('tabindex'));\n            if (i === j) {\n                return 0;\n            } else if (i === 0) {\n                return 1;\n            } else if (j === 0) {\n                return -1;\n            }\n            return i - j;\n        });\n    }\n    const checkedRadio = {};\n    let prunedElements = [\n        document.body\n    ];\n    const activeRadioGroup = isElementType.isElementType(activeElement, 'input', {\n        type: 'radio'\n    }) ? activeElement.name : undefined;\n    enabledElements.forEach((currentElement)=>{\n        const el = currentElement;\n        // For radio groups keep only the active radio\n        // If there is no active radio, keep only the checked radio\n        // If there is no checked radio, treat like everything else\n        if (isElementType.isElementType(el, 'input', {\n            type: 'radio'\n        }) && el.name) {\n            // If the active element is part of the group, add only that\n            if (el === activeElement) {\n                prunedElements.push(el);\n                return;\n            } else if (el.name === activeRadioGroup) {\n                return;\n            }\n            // If we stumble upon a checked radio, remove the others\n            if (el.checked) {\n                prunedElements = prunedElements.filter((e)=>!isElementType.isElementType(e, 'input', {\n                        type: 'radio',\n                        name: el.name\n                    }));\n                prunedElements.push(el);\n                checkedRadio[el.name] = el;\n                return;\n            }\n            // If we already found the checked one, skip\n            if (typeof checkedRadio[el.name] !== 'undefined') {\n                return;\n            }\n        }\n        prunedElements.push(el);\n    });\n    for(let index = prunedElements.findIndex((el)=>el === activeElement);;){\n        index += shift ? -1 : 1;\n        // loop at overflow\n        if (index === prunedElements.length) {\n            index = 0;\n        } else if (index === -1) {\n            index = prunedElements.length - 1;\n        }\n        if (prunedElements[index] === activeElement || prunedElements[index] === document.body || isVisible.isVisible(prunedElements[index])) {\n            return prunedElements[index];\n        }\n    }\n}\n\nexports.getTabDestination = getTabDestination;\n"],"version":3}