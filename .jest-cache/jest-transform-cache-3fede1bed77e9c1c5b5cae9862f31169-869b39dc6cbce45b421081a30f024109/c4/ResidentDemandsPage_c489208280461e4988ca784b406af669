9510f831241ac9f88e9193661beab791
"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
exports.default = ResidentDemandsPage;
const jsx_runtime_1 = require("react/jsx-runtime");
const react_1 = require("react");
const react_query_1 = require("@tanstack/react-query");
const lucide_react_1 = require("lucide-react");
const button_1 = require("@/components/ui/button");
const card_1 = require("@/components/ui/card");
const badge_1 = require("@/components/ui/badge");
const select_1 = require("@/components/ui/select");
const dialog_1 = require("@/components/ui/dialog");
const textarea_1 = require("@/components/ui/textarea");
const react_hook_form_1 = require("react-hook-form");
const zod_1 = require("@hookform/resolvers/zod");
const form_1 = require("@/components/ui/form");
const queryClient_1 = require("@/lib/queryClient");
const use_toast_1 = require("@/hooks/use-toast");
const toastUtils_1 = require("@/lib/toastUtils");
const header_1 = require("@/components/layout/header");
const demand_details_popup_1 = __importDefault(require("@/components/demands/demand-details-popup"));
const DemandFilters_1 = require("@/components/common/DemandFilters");
const document_management_1 = require("@/components/document-management");
const use_language_1 = require("@/hooks/use-language");
const validations_1 = require("@/lib/validations");
// Form schemas
const demandSchema = validations_1.schemas.demand;
const statusColors = {
    submitted: 'bg-blue-100 text-blue-800',
    under_review: 'bg-yellow-100 text-yellow-800',
    approved: 'bg-green-100 text-green-800',
    rejected: 'bg-red-100 text-red-800',
    in_progress: 'bg-purple-100 text-purple-800',
    completed: 'bg-emerald-100 text-emerald-800',
    cancelled: 'bg-gray-100 text-gray-800',
};
const typeLabels = {
    maintenance: 'Maintenance',
    complaint: 'Complaint',
    information: 'Information',
    other: 'Other',
};
/**
 *
 */
function ResidentDemandsPage() {
    const { t } = (0, use_language_1.useLanguage)();
    const { toast } = (0, use_toast_1.useToast)();
    const [searchTerm, setSearchTerm] = (0, react_1.useState)('');
    const [statusFilter, setStatusFilter] = (0, react_1.useState)('all');
    const [typeFilter, setTypeFilter] = (0, react_1.useState)('all');
    const [selectedDemand, setSelectedDemand] = (0, react_1.useState)(null);
    const [isNewDemandOpen, setIsNewDemandOpen] = (0, react_1.useState)(false);
    const [isDetailsOpen, setIsDetailsOpen] = (0, react_1.useState)(false);
    const [currentPage, setCurrentPage] = (0, react_1.useState)(1);
    const [selectedFiles, setSelectedFiles] = (0, react_1.useState)([]);
    // Upload context for secure storage
    const uploadContext = {
        type: 'demands',
        organizationId: 'default',
        userRole: user?.role || 'resident',
        userId: user?.id
    };
    const [uploadedAttachments, setUploadedAttachments] = (0, react_1.useState)([]);
    const itemsPerPage = 10;
    // Fetch demands
    const { data: demands = [], isLoading } = (0, react_query_1.useQuery)({
        queryKey: ['/api/demands'],
        refetchInterval: 30000, // Refresh every 30 seconds
    });
    // Fetch buildings
    const { data: buildings = [] } = (0, react_query_1.useQuery)({
        queryKey: ['/api/manager/buildings'],
        select: (data) => data?.buildings || [],
    });
    // Fetch residences
    const { data: residences = [] } = (0, react_query_1.useQuery)({
        queryKey: ['/api/residences'],
    });
    // Fetch current user
    const { data: currentUser } = (0, react_query_1.useQuery)({
        queryKey: ['/api/auth/user'],
    });
    // Provide default user to prevent type errors
    const defaultUser = currentUser &&
        typeof currentUser === 'object' &&
        'id' in currentUser &&
        'role' in currentUser &&
        'email' in currentUser
        ? currentUser
        : { id: '', role: 'tenant', email: '' };
    // File upload helper function
    const uploadFiles = async (files) => {
        if (files.length === 0)
            return [];
        const formData = new FormData();
        files.forEach((file) => {
            formData.append('file', file);
        });
        const response = await fetch('/api/upload', {
            method: 'POST',
            body: formData,
        });
        if (!response.ok) {
            throw new Error('Failed to upload files');
        }
        const result = await response.json();
        return result.fileUrls || [];
    };
    // Create demand mutation
    const createDemandMutation = (0, react_query_1.useMutation)({
        mutationFn: async (data) => {
            // Upload files first if any are selected
            const attachments = selectedFiles.length > 0 ? await uploadFiles(selectedFiles) : [];
            const response = await fetch('/api/demands', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify({
                    ...data,
                    attachments,
                    status: 'submitted',
                    // Convert empty strings to undefined for optional UUID fields
                    buildingId: data.buildingId || undefined,
                    residenceId: data.residenceId || undefined,
                    assignationBuildingId: data.assignationBuildingId || undefined,
                    assignationResidenceId: data.assignationResidenceId || undefined,
                }),
            });
            if (!response.ok) {
                throw new Error('Failed to create demand');
            }
            return response.json();
        },
        onSuccess: () => {
            queryClient_1.queryClient.invalidateQueries({ queryKey: ['/api/demands'] });
            setIsNewDemandOpen(false);
            newDemandForm.reset();
            setSelectedFiles([]);
            setUploadedAttachments([]);
            toastUtils_1.toastUtils.createSuccess('Demand');
        },
        onError: () => {
            toastUtils_1.toastUtils.createError('demand');
        },
    });
    // Forms
    const newDemandForm = (0, react_hook_form_1.useForm)({
        resolver: (0, zod_1.zodResolver)(demandSchema),
        defaultValues: {
            type: 'maintenance',
            description: '',
            buildingId: undefined,
            residenceId: undefined,
            assignationBuildingId: undefined,
            assignationResidenceId: undefined,
        },
    });
    // Filter demands
    const filteredDemands = demands.filter((demand) => {
        const matchesSearch = demand.description.toLowerCase().includes(searchTerm.toLowerCase()) ||
            typeLabels[demand.type].toLowerCase().includes(searchTerm.toLowerCase());
        const matchesStatus = statusFilter === 'all' || demand.status === statusFilter;
        const matchesType = typeFilter === 'all' || demand.type === typeFilter;
        return matchesSearch && matchesStatus && matchesType;
    });
    // Group demands by status (no draft demands since we removed draft logic)
    const activeDemands = filteredDemands.filter((d) => ['submitted', 'under_review', 'approved', 'in_progress'].includes(d.status));
    const completedDemands = filteredDemands.filter((d) => ['completed', 'rejected', 'cancelled'].includes(d.status));
    // Pagination calculations
    const totalPages = Math.ceil(filteredDemands.length / itemsPerPage);
    const startIndex = (currentPage - 1) * itemsPerPage;
    const endIndex = startIndex + itemsPerPage;
    const currentDemands = filteredDemands.slice(startIndex, endIndex);
    const handlePreviousPage = () => {
        setCurrentPage((prev) => Math.max(1, prev - 1));
    };
    const handleNextPage = () => {
        setCurrentPage((prev) => Math.min(totalPages, prev + 1));
    };
    const handlePageClick = (page) => {
        setCurrentPage(page);
    };
    const handleCreateDemand = (data) => {
        // Create demand directly as submitted (no draft logic)
        createDemandMutation.mutate(data);
    };
    const handleDemandClick = (demand) => {
        setSelectedDemand(demand);
        setIsDetailsOpen(true);
    };
    const handleDemandUpdated = () => {
        queryClient_1.queryClient.invalidateQueries({ queryKey: ['/api/demands'] });
    };
    const DemandCard = ({ demand }) => {
        const building = buildings.find((b) => b.id === demand.buildingId);
        const residence = residences.find((r) => r.id === demand.residenceId);
        return ((0, jsx_runtime_1.jsxs)(card_1.Card, { className: 'cursor-pointer hover:shadow-md transition-shadow', onClick: () => handleDemandClick(demand), children: [(0, jsx_runtime_1.jsxs)(card_1.CardHeader, { className: 'pb-3', children: [(0, jsx_runtime_1.jsx)("div", { className: 'flex items-center justify-between', children: (0, jsx_runtime_1.jsxs)("div", { className: 'flex items-center gap-2', children: [(0, jsx_runtime_1.jsx)(badge_1.Badge, { variant: 'outline', children: typeLabels[demand.type] }), (0, jsx_runtime_1.jsx)(badge_1.Badge, { className: statusColors[demand.status], children: demand.status.replace('_', ' ') })] }) }), (0, jsx_runtime_1.jsxs)(card_1.CardTitle, { className: 'text-base line-clamp-2', children: [demand.description.substring(0, 100), demand.description.length > 100 && '...'] })] }), (0, jsx_runtime_1.jsx)(card_1.CardContent, { className: 'pt-0', children: (0, jsx_runtime_1.jsxs)("div", { className: 'text-sm text-muted-foreground space-y-1', children: [(0, jsx_runtime_1.jsxs)("p", { children: [(0, jsx_runtime_1.jsx)("strong", { children: "Building:" }), " ", building?.name || 'Unknown'] }), residence && ((0, jsx_runtime_1.jsxs)("p", { children: [(0, jsx_runtime_1.jsx)("strong", { children: "Residence:" }), " ", residence.name] })), (0, jsx_runtime_1.jsxs)("p", { children: [(0, jsx_runtime_1.jsx)("strong", { children: "Created:" }), " ", new Date(demand.createdAt).toLocaleDateString()] })] }) })] }));
    }; /**
     * If function.
     * @param isLoading - IsLoading parameter.
     */ /**
    * If function.
    * @param isLoading - IsLoading parameter.
    */
    if (isLoading) {
        return ((0, jsx_runtime_1.jsxs)("div", { className: 'flex-1 flex flex-col overflow-hidden', children: [(0, jsx_runtime_1.jsx)(header_1.Header, { title: t('myDemands'), subtitle: t('submitAndTrackRequests') }), (0, jsx_runtime_1.jsx)("div", { className: 'flex-1 overflow-auto p-6', children: (0, jsx_runtime_1.jsx)("div", { className: 'flex items-center justify-center h-64', children: (0, jsx_runtime_1.jsx)("div", { className: 'text-center', children: "Loading demands..." }) }) })] }));
    }
    return ((0, jsx_runtime_1.jsxs)("div", { className: 'flex-1 flex flex-col overflow-hidden', children: [(0, jsx_runtime_1.jsx)(header_1.Header, { title: t('myDemands'), subtitle: t('submitAndTrackRequests') }), (0, jsx_runtime_1.jsx)("div", { className: 'flex-1 overflow-auto p-6', children: (0, jsx_runtime_1.jsxs)("div", { className: 'max-w-7xl mx-auto space-y-6', children: [(0, jsx_runtime_1.jsx)("div", { className: 'flex items-center justify-end', children: (0, jsx_runtime_1.jsxs)(dialog_1.Dialog, { open: isNewDemandOpen, onOpenChange: setIsNewDemandOpen, children: [(0, jsx_runtime_1.jsx)(dialog_1.DialogTrigger, { asChild: true, children: (0, jsx_runtime_1.jsxs)(button_1.Button, { children: [(0, jsx_runtime_1.jsx)(lucide_react_1.Plus, { className: 'h-4 w-4 mr-2' }), t('newDemand')] }) }), (0, jsx_runtime_1.jsxs)(dialog_1.DialogContent, { className: 'max-w-lg max-h-[90vh] overflow-y-auto', children: [(0, jsx_runtime_1.jsxs)(dialog_1.DialogHeader, { children: [(0, jsx_runtime_1.jsx)(dialog_1.DialogTitle, { children: t('createNewDemand') }), (0, jsx_runtime_1.jsx)(dialog_1.DialogDescription, { children: "Submit a new request or complaint" })] }), (0, jsx_runtime_1.jsx)(form_1.Form, { ...newDemandForm, children: (0, jsx_runtime_1.jsxs)("form", { onSubmit: newDemandForm.handleSubmit(handleCreateDemand), className: 'space-y-4', children: [(0, jsx_runtime_1.jsx)(form_1.FormField, { control: newDemandForm.control, name: 'type', render: ({ field }) => ((0, jsx_runtime_1.jsxs)(form_1.FormItem, { children: [(0, jsx_runtime_1.jsx)(form_1.FormLabel, { children: "Type" }), (0, jsx_runtime_1.jsxs)(select_1.Select, { onValueChange: field.onChange, value: field.value, children: [(0, jsx_runtime_1.jsx)(form_1.FormControl, { children: (0, jsx_runtime_1.jsx)(select_1.SelectTrigger, { children: (0, jsx_runtime_1.jsx)(select_1.SelectValue, { placeholder: t('selectType') }) }) }), (0, jsx_runtime_1.jsxs)(select_1.SelectContent, { children: [(0, jsx_runtime_1.jsx)(select_1.SelectItem, { value: 'maintenance', children: "Maintenance" }), (0, jsx_runtime_1.jsx)(select_1.SelectItem, { value: 'complaint', children: "Complaint" }), (0, jsx_runtime_1.jsx)(select_1.SelectItem, { value: 'information', children: "Information" }), (0, jsx_runtime_1.jsx)(select_1.SelectItem, { value: 'other', children: "Other" })] })] }), (0, jsx_runtime_1.jsx)(form_1.FormMessage, {})] })) }), (0, jsx_runtime_1.jsx)(form_1.FormField, { control: newDemandForm.control, name: 'buildingId', render: ({ field }) => ((0, jsx_runtime_1.jsxs)(form_1.FormItem, { children: [(0, jsx_runtime_1.jsx)(form_1.FormLabel, { children: "Building" }), (0, jsx_runtime_1.jsxs)(select_1.Select, { onValueChange: field.onChange, value: field.value, children: [(0, jsx_runtime_1.jsx)(form_1.FormControl, { children: (0, jsx_runtime_1.jsx)(select_1.SelectTrigger, { children: (0, jsx_runtime_1.jsx)(select_1.SelectValue, { placeholder: t('selectBuilding') }) }) }), (0, jsx_runtime_1.jsx)(select_1.SelectContent, { children: buildings.map((building) => ((0, jsx_runtime_1.jsx)(select_1.SelectItem, { value: building.id, children: building.name }, building.id))) })] }), (0, jsx_runtime_1.jsx)(form_1.FormMessage, {})] })) }), (0, jsx_runtime_1.jsx)(form_1.FormField, { control: newDemandForm.control, name: 'description', render: ({ field }) => ((0, jsx_runtime_1.jsxs)(form_1.FormItem, { children: [(0, jsx_runtime_1.jsx)(form_1.FormLabel, { children: "Description" }), (0, jsx_runtime_1.jsx)(form_1.FormControl, { children: (0, jsx_runtime_1.jsx)(textarea_1.Textarea, { placeholder: t('describeRequestDetail'), className: 'min-h-[100px]', ...field, value: field.value }) }), (0, jsx_runtime_1.jsx)(form_1.FormMessage, {})] })) }), (0, jsx_runtime_1.jsxs)("div", { className: 'space-y-2', children: [(0, jsx_runtime_1.jsx)("label", { className: 'text-sm font-medium', children: "Attachments (Optional)" }), (0, jsx_runtime_1.jsx)(document_management_1.SharedUploader, { onDocumentChange: (file, extractedText) => {
                                                                        if (file) {
                                                                            setSelectedFiles([file]);
                                                                        }
                                                                    }, formType: "demands", uploadContext: uploadContext, showAiToggle: false, allowedFileTypes: ['image/*', 'application/pdf', '.doc', '.docx', '.txt'], maxFileSize: 10 }), (0, jsx_runtime_1.jsx)("p", { className: 'text-xs text-muted-foreground', children: "Upload photos, documents, or screenshots. Camera supported for mobile. Max 10MB per file." })] }), (0, jsx_runtime_1.jsx)(dialog_1.DialogFooter, { children: (0, jsx_runtime_1.jsx)(button_1.Button, { type: 'submit', disabled: createDemandMutation.isPending, "data-testid": "button-create-demand", children: createDemandMutation.isPending ? 'Creating...' : 'Create Demand' }) })] }) })] })] }) }), (0, jsx_runtime_1.jsx)(DemandFilters_1.DemandFilters, { filters: {
                                searchTerm,
                                statusFilter,
                                typeFilter,
                            }, handlers: {
                                onSearchChange: setSearchTerm,
                                onStatusChange: setStatusFilter,
                                onTypeChange: setTypeFilter,
                            }, userRole: 'resident' }), (0, jsx_runtime_1.jsxs)("div", { className: 'space-y-6', children: [totalPages > 1 && ((0, jsx_runtime_1.jsxs)("div", { className: 'flex items-center justify-center gap-2', children: [(0, jsx_runtime_1.jsxs)(button_1.Button, { variant: 'outline', size: 'sm', onClick: handlePreviousPage, disabled: currentPage === 1, children: [(0, jsx_runtime_1.jsx)(lucide_react_1.ChevronLeft, { className: 'h-4 w-4' }), "Previous"] }), (0, jsx_runtime_1.jsx)("div", { className: 'flex gap-1', children: Array.from({ length: Math.min(5, totalPages) }, (_, i) => {
                                                let pageNum;
                                                if (totalPages <= 5) {
                                                    pageNum = i + 1;
                                                }
                                                else if (currentPage <= 3) {
                                                    pageNum = i + 1;
                                                }
                                                else if (currentPage >= totalPages - 2) {
                                                    pageNum = totalPages - 4 + i;
                                                }
                                                else {
                                                    pageNum = currentPage - 2 + i;
                                                }
                                                return ((0, jsx_runtime_1.jsx)(button_1.Button, { variant: currentPage === pageNum ? 'default' : 'outline', size: 'sm', onClick: () => handlePageClick(pageNum), children: pageNum }, pageNum));
                                            }) }), (0, jsx_runtime_1.jsxs)(button_1.Button, { variant: 'outline', size: 'sm', onClick: handleNextPage, disabled: currentPage === totalPages, children: ["Next", (0, jsx_runtime_1.jsx)(lucide_react_1.ChevronRight, { className: 'h-4 w-4' })] })] })), filteredDemands.length > 0 && ((0, jsx_runtime_1.jsxs)("div", { className: 'text-center text-sm text-muted-foreground', children: ["Showing ", startIndex + 1, " to ", Math.min(endIndex, filteredDemands.length), " of", ' ', filteredDemands.length, " demands"] })), currentDemands.length === 0 ? ((0, jsx_runtime_1.jsx)(card_1.Card, { children: (0, jsx_runtime_1.jsx)(card_1.CardContent, { className: 'p-6 text-center', children: (0, jsx_runtime_1.jsx)("p", { className: 'text-muted-foreground', children: t('noDemandsFound') }) }) })) : ((0, jsx_runtime_1.jsx)("div", { className: 'grid gap-4 md:grid-cols-2 lg:grid-cols-3', children: currentDemands.map((demand) => ((0, jsx_runtime_1.jsx)(DemandCard, { demand: demand }, demand.id))) }))] }), (0, jsx_runtime_1.jsx)(demand_details_popup_1.default, { demand: selectedDemand, isOpen: isDetailsOpen, onClose: () => setIsDetailsOpen(false), user: defaultUser, onDemandUpdated: handleDemandUpdated })] }) })] }));
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiL2hvbWUvcnVubmVyL3dvcmtzcGFjZS9jbGllbnQvc3JjL3BhZ2VzL1Jlc2lkZW50RGVtYW5kc1BhZ2UudHN4IiwibWFwcGluZ3MiOiI7Ozs7O0FBeUlBLHNDQXFlQzs7QUE5bUJELGlDQUFpQztBQUNqQyx1REFBOEQ7QUFDOUQsK0NBQXVFO0FBQ3ZFLG1EQUFnRDtBQUVoRCwrQ0FBZ0Y7QUFDaEYsaURBQThDO0FBRTlDLG1EQU1nQztBQUNoQyxtREFRZ0M7QUFDaEMsdURBQW9EO0FBQ3BELHFEQUEwQztBQUMxQyxpREFBc0Q7QUFFdEQsK0NBTzhCO0FBQzlCLG1EQUFnRDtBQUNoRCxpREFBNkM7QUFDN0MsaURBQThDO0FBQzlDLHVEQUFvRDtBQUNwRCxxR0FBMkU7QUFJM0UscUVBQWtFO0FBQ2xFLDBFQUFrRTtBQUVsRSx1REFBbUQ7QUFDbkQsbURBQXdEO0FBNkR4RCxlQUFlO0FBQ2YsTUFBTSxZQUFZLEdBQUcscUJBQU8sQ0FBQyxNQUFNLENBQUM7QUFPcEMsTUFBTSxZQUFZLEdBQUc7SUFDbkIsU0FBUyxFQUFFLDJCQUEyQjtJQUN0QyxZQUFZLEVBQUUsK0JBQStCO0lBQzdDLFFBQVEsRUFBRSw2QkFBNkI7SUFDdkMsUUFBUSxFQUFFLHlCQUF5QjtJQUNuQyxXQUFXLEVBQUUsK0JBQStCO0lBQzVDLFNBQVMsRUFBRSxpQ0FBaUM7SUFDNUMsU0FBUyxFQUFFLDJCQUEyQjtDQUN2QyxDQUFDO0FBRUYsTUFBTSxVQUFVLEdBQUc7SUFDakIsV0FBVyxFQUFFLGFBQWE7SUFDMUIsU0FBUyxFQUFFLFdBQVc7SUFDdEIsV0FBVyxFQUFFLGFBQWE7SUFDMUIsS0FBSyxFQUFFLE9BQU87Q0FDZixDQUFDO0FBRUY7O0dBRUc7QUFDSCxTQU1BLG1CQUFtQjtJQUNqQixNQUFNLEVBQUUsQ0FBQyxFQUFFLEdBQUcsSUFBQSwwQkFBVyxHQUFFLENBQUM7SUFDNUIsTUFBTSxFQUFFLEtBQUssRUFBRSxHQUFHLElBQUEsb0JBQVEsR0FBRSxDQUFDO0lBQzdCLE1BQU0sQ0FBQyxVQUFVLEVBQUUsYUFB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SixDQUFDIiwibmFtZXMiOltdLCJzb3VyY2VzIjpbIi9ob21lL3J1bm5lci93b3Jrc3BhY2UvY2xpZW50L3NyYy9wYWdlcy9SZXNpZGVudERlbWFuZHNQYWdlLnRzeCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyB1c2VTdGF0ZSB9IGZyb20gJ3JlYWN0JztcbmltcG9ydCB7IHVzZVF1ZXJ5LCB1c2VNdXRhdGlvbiB9IGZyb20gJ0B0YW5zdGFjay9yZWFjdC1xdWVyeSc7XG5pbXBvcnQgeyBQbHVzLCBTZWFyY2gsIENoZXZyb25MZWZ0LCBDaGV2cm9uUmlnaHQgfSBmcm9tICdsdWNpZGUtcmVhY3QnO1xuaW1wb3J0IHsgQnV0dG9uIH0gZnJvbSAnQC9jb21wb25lbnRzL3VpL2J1dHRvbic7XG5pbXBvcnQgeyBJbnB1dCB9IGZyb20gJ0AvY29tcG9uZW50cy91aS9pbnB1dCc7XG5pbXBvcnQgeyBDYXJkLCBDYXJkQ29udGVudCwgQ2FyZEhlYWRlciwgQ2FyZFRpdGxlIH0gZnJvbSAnQC9jb21wb25lbnRzL3VpL2NhcmQnO1xuaW1wb3J0IHsgQmFkZ2UgfSBmcm9tICdAL2NvbXBvbmVudHMvdWkvYmFkZ2UnO1xuaW1wb3J0IHsgVGFicywgVGFic0NvbnRlbnQsIFRhYnNMaXN0LCBUYWJzVHJpZ2dlciB9IGZyb20gJ0AvY29tcG9uZW50cy91aS90YWJzJztcbmltcG9ydCB7XG4gIFNlbGVjdCxcbiAgU2VsZWN0Q29udGVudCxcbiAgU2VsZWN0SXRlbSxcbiAgU2VsZWN0VHJpZ2dlcixcbiAgU2VsZWN0VmFsdWUsXG59IGZyb20gJ0AvY29tcG9uZW50cy91aS9zZWxlY3QnO1xuaW1wb3J0IHtcbiAgRGlhbG9nLFxuICBEaWFsb2dDb250ZW50LFxuICBEaWFsb2dEZXNjcmlwdGlvbixcbiAgRGlhbG9nRm9vdGVyLFxuICBEaWFsb2dIZWFkZXIsXG4gIERpYWxvZ1RpdGxlLFxuICBEaWFsb2dUcmlnZ2VyLFxufSBmcm9tICdAL2NvbXBvbmVudHMvdWkvZGlhbG9nJztcbmltcG9ydCB7IFRleHRhcmVhIH0gZnJvbSAnQC9jb21wb25lbnRzL3VpL3RleHRhcmVhJztcbmltcG9ydCB7IHVzZUZvcm0gfSBmcm9tICdyZWFjdC1ob29rLWZvcm0nO1xuaW1wb3J0IHsgem9kUmVzb2x2ZXIgfSBmcm9tICdAaG9va2Zvcm0vcmVzb2x2ZXJzL3pvZCc7XG5pbXBvcnQgeyB6IH0gZnJvbSAnem9kJztcbmltcG9ydCB7XG4gIEZvcm0sXG4gIEZvcm1Db250cm9sLFxuICBGb3JtRmllbGQsXG4gIEZvcm1JdGVtLFxuICBGb3JtTGFiZWwsXG4gIEZvcm1NZXNzYWdlLFxufSBmcm9tICdAL2NvbXBvbmVudHMvdWkvZm9ybSc7XG5pbXBvcnQgeyBxdWVyeUNsaWVudCB9IGZyb20gJ0AvbGliL3F1ZXJ5Q2xpZW50JztcbmltcG9ydCB7IHVzZVRvYXN0IH0gZnJvbSAnQC9ob29rcy91c2UtdG9hc3QnO1xuaW1wb3J0IHsgdG9hc3RVdGlscyB9IGZyb20gJ0AvbGliL3RvYXN0VXRpbHMnO1xuaW1wb3J0IHsgSGVhZGVyIH0gZnJvbSAnQC9jb21wb25lbnRzL2xheW91dC9oZWFkZXInO1xuaW1wb3J0IERlbWFuZERldGFpbHNQb3B1cCBmcm9tICdAL2NvbXBvbmVudHMvZGVtYW5kcy9kZW1hbmQtZGV0YWlscy1wb3B1cCc7XG5pbXBvcnQgeyBTZWFyY2hJbnB1dCB9IGZyb20gJ0AvY29tcG9uZW50cy9jb21tb24vU2VhcmNoSW5wdXQnO1xuaW1wb3J0IHsgRmlsdGVyRHJvcGRvd24gfSBmcm9tICdAL2NvbXBvbmVudHMvY29tbW9uL0ZpbHRlckRyb3Bkb3duJztcbmltcG9ydCB7IERlbWFuZENhcmQgfSBmcm9tICdAL2NvbXBvbmVudHMvY29tbW9uL0RlbWFuZENhcmQnO1xuaW1wb3J0IHsgRGVtYW5kRmlsdGVycyB9IGZyb20gJ0AvY29tcG9uZW50cy9jb21tb24vRGVtYW5kRmlsdGVycyc7XG5pbXBvcnQgeyBTaGFyZWRVcGxvYWRlciB9IGZyb20gJ0AvY29tcG9uZW50cy9kb2N1bWVudC1tYW5hZ2VtZW50JztcbmltcG9ydCB0eXBlIHsgVXBsb2FkQ29udGV4dCB9IGZyb20gJ0BzaGFyZWQvY29uZmlnL3VwbG9hZC1jb25maWcnO1xuaW1wb3J0IHsgdXNlTGFuZ3VhZ2UgfSBmcm9tICdAL2hvb2tzL3VzZS1sYW5ndWFnZSc7XG5pbXBvcnQgeyBzY2hlbWFzLCBlbnVtRmllbGRzIH0gZnJvbSAnQC9saWIvdmFsaWRhdGlvbnMnO1xuXG4vLyBUeXBlc1xuLyoqXG4gKlxuICovXG5pbnRlcmZhY2UgRGVtYW5kIHtcbiAgaWQ6IHN0cmluZztcbiAgdHlwZTogJ21haW50ZW5hbmNlJyB8ICdjb21wbGFpbnQnIHwgJ2luZm9ybWF0aW9uJyB8ICdvdGhlcic7XG4gIGRlc2NyaXB0aW9uOiBzdHJpbmc7XG4gIHN0YXR1czpcbiAgICB8ICdzdWJtaXR0ZWQnXG4gICAgfCAndW5kZXJfcmV2aWV3J1xuICAgIHwgJ2FwcHJvdmVkJ1xuICAgIHwgJ3JlamVjdGVkJ1xuICAgIHwgJ2luX3Byb2dyZXNzJ1xuICAgIHwgJ2NvbXBsZXRlZCdcbiAgICB8ICdjYW5jZWxsZWQnO1xuICBzdWJtaXR0ZXJJZDogc3RyaW5nO1xuICBidWlsZGluZ0lkOiBzdHJpbmc7XG4gIHJlc2lkZW5jZUlkPzogc3RyaW5nO1xuICBhc3NpZ25hdGlvbkJ1aWxkaW5nSWQ/OiBzdHJpbmc7XG4gIGFzc2lnbmF0aW9uUmVzaWRlbmNlSWQ/OiBzdHJpbmc7XG4gIGNyZWF0ZWRBdDogc3RyaW5nO1xuICB1cGRhdGVkQXQ6IHN0cmluZztcbiAgcmV2aWV3Tm90ZXM/OiBzdHJpbmc7XG4gIHN1Ym1pdHRlcj86IHtcbiAgICBpZDogc3RyaW5nO1xuICAgIGZpcnN0TmFtZTogc3RyaW5nO1xuICAgIGxhc3ROYW1lOiBzdHJpbmc7XG4gICAgZW1haWw6IHN0cmluZztcbiAgfTtcbiAgcmVzaWRlbmNlPzoge1xuICAgIGlkOiBzdHJpbmc7XG4gICAgdW5pdE51bWJlcjogc3RyaW5nO1xuICAgIGJ1aWxkaW5nSWQ6IHN0cmluZztcbiAgfTtcbiAgYnVpbGRpbmc/OiB7XG4gICAgaWQ6IHN0cmluZztcbiAgICBuYW1lOiBzdHJpbmc7XG4gICAgYWRkcmVzczogc3RyaW5nO1xuICB9O1xufVxuXG4vKipcbiAqXG4gKi9cbmludGVyZmFjZSBCdWlsZGluZyB7XG4gIGlkOiBzdHJpbmc7XG4gIG5hbWU6IHN0cmluZztcbn1cblxuLyoqXG4gKlxuICovXG5pbnRlcmZhY2UgUmVzaWRlbmNlIHtcbiAgaWQ6IHN0cmluZztcbiAgbmFtZTogc3RyaW5nO1xuICBidWlsZGluZ0lkOiBzdHJpbmc7XG59XG5cbi8vIEZvcm0gc2NoZW1hc1xuY29uc3QgZGVtYW5kU2NoZW1hID0gc2NoZW1hcy5kZW1hbmQ7XG5cbi8qKlxuICpcbiAqL1xudHlwZSBEZW1hbmRGb3JtRGF0YSA9IHouaW5mZXI8dHlwZW9mIGRlbWFuZFNjaGVtYT47XG5cbmNvbnN0IHN0YXR1c0NvbG9ycyA9IHtcbiAgc3VibWl0dGVkOiAnYmctYmx1ZS0xMDAgdGV4dC1ibHVlLTgwMCcsXG4gIHVuZGVyX3JldmlldzogJ2JnLXllbGxvdy0xMDAgdGV4dC15ZWxsb3ctODAwJyxcbiAgYXBwcm92ZWQ6ICdiZy1ncmVlbi0xMDAgdGV4dC1ncmVlbi04MDAnLFxuICByZWplY3RlZDogJ2JnLXJlZC0xMDAgdGV4dC1yZWQtODAwJyxcbiAgaW5fcHJvZ3Jlc3M6ICdiZy1wdXJwbGUtMTAwIHRleHQtcHVycGxlLTgwMCcsXG4gIGNvbXBsZXRlZDogJ2JnLWVtZXJhbGQtMTAwIHRleHQtZW1lcmFsZC04MDAnLFxuICBjYW5jZWxsZWQ6ICdiZy1ncmF5LTEwMCB0ZXh0LWdyYXktODAwJyxcbn07XG5cbmNvbnN0IHR5cGVMYWJlbHMgPSB7XG4gIG1haW50ZW5hbmNlOiAnTWFpbnRlbmFuY2UnLFxuICBjb21wbGFpbnQ6ICdDb21wbGFpbnQnLFxuICBpbmZvcm1hdGlvbjogJ0luZm9ybWF0aW9uJyxcbiAgb3RoZXI6ICdPdGhlcicsXG59O1xuXG4vKipcbiAqXG4gKi9cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIC8qKlxuICogUmVzaWRlbnQgZGVtYW5kcyBwYWdlIGZ1bmN0aW9uLlxuICovIC8qKlxuICogUmVzaWRlbnQgZGVtYW5kcyBwYWdlIGZ1bmN0aW9uLlxuICovXG5cblJlc2lkZW50RGVtYW5kc1BhZ2UoKSB7XG4gIGNvbnN0IHsgdCB9ID0gdXNlTGFuZ3VhZ2UoKTtcbiAgY29uc3QgeyB0b2FzdCB9ID0gdXNlVG9hc3QoKTtcbiAgY29uc3QgW3NlYXJjaFRlcm0sIHNldFNlYXJjaFRlcm1dID0gdXNlU3RhdGUoJycpO1xuICBjb25zdCBbc3RhdHVzRmlsdGVyLCBzZXRTdGF0dXNGaWx0ZXJdID0gdXNlU3RhdGU8c3RyaW5nPignYWxsJyk7XG4gIGNvbnN0IFt0eXBlRmlsdGVyLCBzZXRUeXBlRmlsdGVyXSA9IHVzZVN0YXRlPHN0cmluZz4oJ2FsbCcpO1xuICBjb25zdCBbc2VsZWN0ZWREZW1hbmQsIHNldFNlbGVjdGVkRGVtYW5kXSA9IHVzZVN0YXRlPERlbWFuZCB8IG51bGw+KG51bGwpO1xuICBjb25zdCBbaXNOZXdEZW1hbmRPcGVuLCBzZXRJc05ld0RlbWFuZE9wZW5dID0gdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBbaXNEZXRhaWxzT3Blbiwgc2V0SXNEZXRhaWxzT3Blbl0gPSB1c2VTdGF0ZShmYWxzZSk7XG4gIGNvbnN0IFtjdXJyZW50UGFnZSwgc2V0Q3VycmVudFBhZ2VdID0gdXNlU3RhdGUoMSk7XG4gIGNvbnN0IFtzZWxlY3RlZEZpbGVzLCBzZXRTZWxlY3RlZEZpbGVzXSA9IHVzZVN0YXRlPEZpbGVbXT4oW10pO1xuICBcbiAgLy8gVXBsb2FkIGNvbnRleHQgZm9yIHNlY3VyZSBzdG9yYWdlXG4gIGNvbnN0IHVwbG9hZENvbnRleHQ6IFVwbG9hZENvbnRleHQgPSB7XG4gICAgdHlwZTogJ2RlbWFuZHMnLFxuICAgIG9yZ2FuaXphdGlvbklkOiAnZGVmYXVsdCcsXG4gICAgdXNlclJvbGU6IHVzZXI/LnJvbGUgfHwgJ3Jlc2lkZW50JyxcbiAgICB1c2VySWQ6IHVzZXI/LmlkXG4gIH07XG4gIGNvbnN0IFt1cGxvYWRlZEF0dGFjaG1lbnRzLCBzZXRVcGxvYWRlZEF0dGFjaG1lbnRzXSA9IHVzZVN0YXRlPHN0cmluZ1tdPihbXSk7XG4gIGNvbnN0IGl0ZW1zUGVyUGFnZSA9IDEwO1xuXG4gIC8vIEZldGNoIGRlbWFuZHNcbiAgY29uc3QgeyBkYXRhOiBkZW1hbmRzID0gW10sIGlzTG9hZGluZyB9ID0gdXNlUXVlcnkoe1xuICAgIHF1ZXJ5S2V5OiBbJy9hcGkvZGVtYW5kcyddLFxuICAgIHJlZmV0Y2hJbnRlcnZhbDogMzAwMDAsIC8vIFJlZnJlc2ggZXZlcnkgMzAgc2Vjb25kc1xuICB9KTtcblxuICAvLyBGZXRjaCBidWlsZGluZ3NcbiAgY29uc3QgeyBkYXRhOiBidWlsZGluZ3MgPSBbXSB9ID0gdXNlUXVlcnk8QnVpbGRpbmdbXT4oe1xuICAgIHF1ZXJ5S2V5OiBbJy9hcGkvbWFuYWdlci9idWlsZGluZ3MnXSxcbiAgICBzZWxlY3Q6IChkYXRhOiBhbnkpID0+IGRhdGE/LmJ1aWxkaW5ncyB8fCBbXSxcbiAgfSk7XG5cbiAgLy8gRmV0Y2ggcmVzaWRlbmNlc1xuICBjb25zdCB7IGRhdGE6IHJlc2lkZW5jZXMgPSBbXSB9ID0gdXNlUXVlcnk8UmVzaWRlbmNlW10+KHtcbiAgICBxdWVyeUtleTogWycvYXBpL3Jlc2lkZW5jZXMnXSxcbiAgfSk7XG5cbiAgLy8gRmV0Y2ggY3VycmVudCB1c2VyXG4gIGNvbnN0IHsgZGF0YTogY3VycmVudFVzZXIgfSA9IHVzZVF1ZXJ5KHtcbiAgICBxdWVyeUtleTogWycvYXBpL2F1dGgvdXNlciddLFxuICB9KTtcblxuICAvLyBQcm92aWRlIGRlZmF1bHQgdXNlciB0byBwcmV2ZW50IHR5cGUgZXJyb3JzXG4gIGNvbnN0IGRlZmF1bHRVc2VyOiB7XG4gICAgaWQ6IHN0cmluZztcbiAgICByb2xlOiBzdHJpbmc7XG4gICAgZW1haWw6IHN0cmluZztcbiAgICBmaXJzdE5hbWU/OiBzdHJpbmc7XG4gICAgbGFzdE5hbWU/OiBzdHJpbmc7XG4gIH0gPVxuICAgIGN1cnJlbnRVc2VyICYmXG4gICAgdHlwZW9mIGN1cnJlbnRVc2VyID09PSAnb2JqZWN0JyAmJlxuICAgICdpZCcgaW4gY3VycmVudFVzZXIgJiZcbiAgICAncm9sZScgaW4gY3VycmVudFVzZXIgJiZcbiAgICAnZW1haWwnIGluIGN1cnJlbnRVc2VyXG4gICAgICA/IChjdXJyZW50VXNlciBhcyB7XG4gICAgICAgICAgaWQ6IHN0cmluZztcbiAgICAgICAgICByb2xlOiBzdHJpbmc7XG4gICAgICAgICAgZW1haWw6IHN0cmluZztcbiAgICAgICAgICBmaXJzdE5hbWU/OiBzdHJpbmc7XG4gICAgICAgICAgbGFzdE5hbWU/OiBzdHJpbmc7XG4gICAgICAgIH0pXG4gICAgICA6IHsgaWQ6ICcnLCByb2xlOiAndGVuYW50JywgZW1haWw6ICcnIH07XG5cbiAgLy8gRmlsZSB1cGxvYWQgaGVscGVyIGZ1bmN0aW9uXG4gIGNvbnN0IHVwbG9hZEZpbGVzID0gYXN5bmMgKGZpbGVzOiBGaWxlW10pOiBQcm9taXNlPHN0cmluZ1tdPiA9PiB7XG4gICAgaWYgKGZpbGVzLmxlbmd0aCA9PT0gMCkgcmV0dXJuIFtdO1xuICAgIFxuICAgIGNvbnN0IGZvcm1EYXRhID0gbmV3IEZvcm1EYXRhKCk7XG4gICAgZmlsZXMuZm9yRWFjaCgoZmlsZSkgPT4ge1xuICAgICAgZm9ybURhdGEuYXBwZW5kKCdmaWxlJywgZmlsZSk7XG4gICAgfSk7XG4gICAgXG4gICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaCgnL2FwaS91cGxvYWQnLCB7XG4gICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgIGJvZHk6IGZvcm1EYXRhLFxuICAgIH0pO1xuICAgIFxuICAgIGlmICghcmVzcG9uc2Uub2spIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignRmFpbGVkIHRvIHVwbG9hZCBmaWxlcycpO1xuICAgIH1cbiAgICBcbiAgICBjb25zdCByZXN1bHQgPSBhd2FpdCByZXNwb25zZS5qc29uKCk7XG4gICAgcmV0dXJuIHJlc3VsdC5maWxlVXJscyB8fCBbXTtcbiAgfTtcblxuICAvLyBDcmVhdGUgZGVtYW5kIG11dGF0aW9uXG4gIGNvbnN0IGNyZWF0ZURlbWFuZE11dGF0aW9uID0gdXNlTXV0YXRpb24oe1xuICAgIG11dGF0aW9uRm46IGFzeW5jIChkYXRhOiBEZW1hbmRGb3JtRGF0YSkgPT4ge1xuICAgICAgLy8gVXBsb2FkIGZpbGVzIGZpcnN0IGlmIGFueSBhcmUgc2VsZWN0ZWRcbiAgICAgIGNvbnN0IGF0dGFjaG1lbnRzID0gc2VsZWN0ZWRGaWxlcy5sZW5ndGggPiAwID8gYXdhaXQgdXBsb2FkRmlsZXMoc2VsZWN0ZWRGaWxlcykgOiBbXTtcbiAgICAgIFxuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaCgnL2FwaS9kZW1hbmRzJywge1xuICAgICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICAgIH0sXG4gICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgICAuLi5kYXRhLFxuICAgICAgICAgIGF0dGFjaG1lbnRzLFxuICAgICAgICAgIHN0YXR1czogJ3N1Ym1pdHRlZCcsXG4gICAgICAgICAgLy8gQ29udmVydCBlbXB0eSBzdHJpbmdzIHRvIHVuZGVmaW5lZCBmb3Igb3B0aW9uYWwgVVVJRCBmaWVsZHNcbiAgICAgICAgICBidWlsZGluZ0lkOiBkYXRhLmJ1aWxkaW5nSWQgfHwgdW5kZWZpbmVkLFxuICAgICAgICAgIHJlc2lkZW5jZUlkOiBkYXRhLnJlc2lkZW5jZUlkIHx8IHVuZGVmaW5lZCxcbiAgICAgICAgICBhc3NpZ25hdGlvbkJ1aWxkaW5nSWQ6IGRhdGEuYXNzaWduYXRpb25CdWlsZGluZ0lkIHx8IHVuZGVmaW5lZCxcbiAgICAgICAgICBhc3NpZ25hdGlvblJlc2lkZW5jZUlkOiBkYXRhLmFzc2lnbmF0aW9uUmVzaWRlbmNlSWQgfHwgdW5kZWZpbmVkLFxuICAgICAgICB9KSxcbiAgICAgIH0pO1xuXG4gICAgICBpZiAoIXJlc3BvbnNlLm9rKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignRmFpbGVkIHRvIGNyZWF0ZSBkZW1hbmQnKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiByZXNwb25zZS5qc29uKCk7XG4gICAgfSxcbiAgICBvblN1Y2Nlc3M6ICgpID0+IHtcbiAgICAgIHF1ZXJ5Q2xpZW50LmludmFsaWRhdGVRdWVyaWVzKHsgcXVlcnlLZXk6IFsnL2FwaS9kZW1hbmRzJ10gfSk7XG4gICAgICBzZXRJc05ld0RlbWFuZE9wZW4oZmFsc2UpO1xuICAgICAgbmV3RGVtYW5kRm9ybS5yZXNldCgpO1xuICAgICAgc2V0U2VsZWN0ZWRGaWxlcyhbXSk7XG4gICAgICBzZXRVcGxvYWRlZEF0dGFjaG1lbnRzKFtdKTtcbiAgICAgIHRvYXN0VXRpbHMuY3JlYXRlU3VjY2VzcygnRGVtYW5kJyk7XG4gICAgfSxcbiAgICBvbkVycm9yOiAoKSA9PiB7XG4gICAgICB0b2FzdFV0aWxzLmNyZWF0ZUVycm9yKCdkZW1hbmQnKTtcbiAgICB9LFxuICB9KTtcblxuICAvLyBGb3Jtc1xuICBjb25zdCBuZXdEZW1hbmRGb3JtID0gdXNlRm9ybTxEZW1hbmRGb3JtRGF0YT4oe1xuICAgIHJlc29sdmVyOiB6b2RSZXNvbHZlcihkZW1hbmRTY2hlbWEpLFxuICAgIGRlZmF1bHRWYWx1ZXM6IHtcbiAgICAgIHR5cGU6ICdtYWludGVuYW5jZScsXG4gICAgICBkZXNjcmlwdGlvbjogJycsXG4gICAgICBidWlsZGluZ0lkOiB1bmRlZmluZWQsXG4gICAgICByZXNpZGVuY2VJZDogdW5kZWZpbmVkLFxuICAgICAgYXNzaWduYXRpb25CdWlsZGluZ0lkOiB1bmRlZmluZWQsXG4gICAgICBhc3NpZ25hdGlvblJlc2lkZW5jZUlkOiB1bmRlZmluZWQsXG4gICAgfSxcbiAgfSk7XG5cbiAgLy8gRmlsdGVyIGRlbWFuZHNcbiAgY29uc3QgZmlsdGVyZWREZW1hbmRzID0gKGRlbWFuZHMgYXMgRGVtYW5kW10pLmZpbHRlcigoZGVtYW5kOiBEZW1hbmQpID0+IHtcbiAgICBjb25zdCBtYXRjaGVzU2VhcmNoID1cbiAgICAgIGRlbWFuZC5kZXNjcmlwdGlvbi50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKHNlYXJjaFRlcm0udG9Mb3dlckNhc2UoKSkgfHxcbiAgICAgIHR5cGVMYWJlbHNbZGVtYW5kLnR5cGVdLnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMoc2VhcmNoVGVybS50b0xvd2VyQ2FzZSgpKTtcbiAgICBjb25zdCBtYXRjaGVzU3RhdHVzID0gc3RhdHVzRmlsdGVyID09PSAnYWxsJyB8fCBkZW1hbmQuc3RhdHVzID09PSBzdGF0dXNGaWx0ZXI7XG4gICAgY29uc3QgbWF0Y2hlc1R5cGUgPSB0eXBlRmlsdGVyID09PSAnYWxsJyB8fCBkZW1hbmQudHlwZSA9PT0gdHlwZUZpbHRlcjtcblxuICAgIHJldHVybiBtYXRjaGVzU2VhcmNoICYmIG1hdGNoZXNTdGF0dXMgJiYgbWF0Y2hlc1R5cGU7XG4gIH0pO1xuXG4gIC8vIEdyb3VwIGRlbWFuZHMgYnkgc3RhdHVzIChubyBkcmFmdCBkZW1hbmRzIHNpbmNlIHdlIHJlbW92ZWQgZHJhZnQgbG9naWMpXG4gIGNvbnN0IGFjdGl2ZURlbWFuZHMgPSBmaWx0ZXJlZERlbWFuZHMuZmlsdGVyKChkOiBEZW1hbmQpID0+XG4gICAgWydzdWJtaXR0ZWQnLCAndW5kZXJfcmV2aWV3JywgJ2FwcHJvdmVkJywgJ2luX3Byb2dyZXNzJ10uaW5jbHVkZXMoZC5zdGF0dXMpXG4gICk7XG4gIGNvbnN0IGNvbXBsZXRlZERlbWFuZHMgPSBmaWx0ZXJlZERlbWFuZHMuZmlsdGVyKChkOiBEZW1hbmQpID0+XG4gICAgWydjb21wbGV0ZWQnLCAncmVqZWN0ZWQnLCAnY2FuY2VsbGVkJ10uaW5jbHVkZXMoZC5zdGF0dXMpXG4gICk7XG5cbiAgLy8gUGFnaW5hdGlvbiBjYWxjdWxhdGlvbnNcbiAgY29uc3QgdG90YWxQYWdlcyA9IE1hdGguY2VpbChmaWx0ZXJlZERlbWFuZHMubGVuZ3RoIC8gaXRlbXNQZXJQYWdlKTtcbiAgY29uc3Qgc3RhcnRJbmRleCA9IChjdXJyZW50UGFnZSAtIDEpICogaXRlbXNQZXJQYWdlO1xuICBjb25zdCBlbmRJbmRleCA9IHN0YXJ0SW5kZXggKyBpdGVtc1BlclBhZ2U7XG4gIGNvbnN0IGN1cnJlbnREZW1hbmRzID0gZmlsdGVyZWREZW1hbmRzLnNsaWNlKHN0YXJ0SW5kZXgsIGVuZEluZGV4KTtcblxuICBjb25zdCBoYW5kbGVQcmV2aW91c1BhZ2UgPSAoKSA9PiB7XG4gICAgc2V0Q3VycmVudFBhZ2UoKHByZXYpID0+IE1hdGgubWF4KDEsIHByZXYgLSAxKSk7XG4gIH07XG5cbiAgY29uc3QgaGFuZGxlTmV4dFBhZ2UgPSAoKSA9PiB7XG4gICAgc2V0Q3VycmVudFBhZ2UoKHByZXYpID0+IE1hdGgubWluKHRvdGFsUGFnZXMsIHByZXYgKyAxKSk7XG4gIH07XG5cbiAgY29uc3QgaGFuZGxlUGFnZUNsaWNrID0gKHBhZ2U6IG51bWJlcikgPT4ge1xuICAgIHNldEN1cnJlbnRQYWdlKHBhZ2UpO1xuICB9O1xuXG4gIGNvbnN0IGhhbmRsZUNyZWF0ZURlbWFuZCA9IChkYXRhOiBEZW1hbmRGb3JtRGF0YSkgPT4ge1xuICAgIC8vIENyZWF0ZSBkZW1hbmQgZGlyZWN0bHkgYXMgc3VibWl0dGVkIChubyBkcmFmdCBsb2dpYylcbiAgICBjcmVhdGVEZW1hbmRNdXRhdGlvbi5tdXRhdGUoZGF0YSk7XG4gIH07XG5cbiAgY29uc3QgaGFuZGxlRGVtYW5kQ2xpY2sgPSAoZGVtYW5kOiBEZW1hbmQpID0+IHtcbiAgICBzZXRTZWxlY3RlZERlbWFuZChkZW1hbmQpO1xuICAgIHNldElzRGV0YWlsc09wZW4odHJ1ZSk7XG4gIH07XG5cbiAgY29uc3QgaGFuZGxlRGVtYW5kVXBkYXRlZCA9ICgpID0+IHtcbiAgICBxdWVyeUNsaWVudC5pbnZhbGlkYXRlUXVlcmllcyh7IHF1ZXJ5S2V5OiBbJy9hcGkvZGVtYW5kcyddIH0pO1xuICB9O1xuXG4gIGNvbnN0IERlbWFuZENhcmQgPSAoeyBkZW1hbmQgfTogeyBkZW1hbmQ6IERlbWFuZCB9KSA9PiB7XG4gICAgY29uc3QgYnVpbGRpbmcgPSBidWlsZGluZ3MuZmluZCgoYikgPT4gYi5pZCA9PT0gZGVtYW5kLmJ1aWxkaW5nSWQpO1xuICAgIGNvbnN0IHJlc2lkZW5jZSA9IHJlc2lkZW5jZXMuZmluZCgocikgPT4gci5pZCA9PT0gZGVtYW5kLnJlc2lkZW5jZUlkKTtcblxuICAgIHJldHVybiAoXG4gICAgICA8Q2FyZFxuICAgICAgICBjbGFzc05hbWU9J2N1cnNvci1wb2ludGVyIGhvdmVyOnNoYWRvdy1tZCB0cmFuc2l0aW9uLXNoYWRvdydcbiAgICAgICAgb25DbGljaz17KCkgPT4gaGFuZGxlRGVtYW5kQ2xpY2soZGVtYW5kKX1cbiAgICAgID5cbiAgICAgICAgPENhcmRIZWFkZXIgY2xhc3NOYW1lPSdwYi0zJz5cbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0nZmxleCBpdGVtcy1jZW50ZXIganVzdGlmeS1iZXR3ZWVuJz5cbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSdmbGV4IGl0ZW1zLWNlbnRlciBnYXAtMic+XG4gICAgICAgICAgICAgIDxCYWRnZSB2YXJpYW50PSdvdXRsaW5lJz57dHlwZUxhYmVsc1tkZW1hbmQudHlwZV19PC9CYWRnZT5cbiAgICAgICAgICAgICAgPEJhZGdlIGNsYXNzTmFtZT17c3RhdHVzQ29sb3JzW2RlbWFuZC5zdGF0dXNdfT5cbiAgICAgICAgICAgICAgICB7ZGVtYW5kLnN0YXR1cy5yZXBsYWNlKCdfJywgJyAnKX1cbiAgICAgICAgICAgICAgPC9CYWRnZT5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIDxDYXJkVGl0bGUgY2xhc3NOYW1lPSd0ZXh0LWJhc2UgbGluZS1jbGFtcC0yJz5cbiAgICAgICAgICAgIHtkZW1hbmQuZGVzY3JpcHRpb24uc3Vic3RyaW5nKDAsIDEwMCl9XG4gICAgICAgICAgICB7ZGVtYW5kLmRlc2NyaXB0aW9uLmxlbmd0aCA+IDEwMCAmJiAnLi4uJ31cbiAgICAgICAgICA8L0NhcmRUaXRsZT5cbiAgICAgICAgPC9DYXJkSGVhZGVyPlxuICAgICAgICA8Q2FyZENvbnRlbnQgY2xhc3NOYW1lPSdwdC0wJz5cbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0ndGV4dC1zbSB0ZXh0LW11dGVkLWZvcmVncm91bmQgc3BhY2UteS0xJz5cbiAgICAgICAgICAgIDxwPlxuICAgICAgICAgICAgICA8c3Ryb25nPkJ1aWxkaW5nOjwvc3Ryb25nPiB7YnVpbGRpbmc/Lm5hbWUgfHwgJ1Vua25vd24nfVxuICAgICAgICAgICAgPC9wPlxuICAgICAgICAgICAge3Jlc2lkZW5jZSAmJiAoXG4gICAgICAgICAgICAgIDxwPlxuICAgICAgICAgICAgICAgIDxzdHJvbmc+UmVzaWRlbmNlOjwvc3Ryb25nPiB7cmVzaWRlbmNlLm5hbWV9XG4gICAgICAgICAgICAgIDwvcD5cbiAgICAgICAgICAgICl9XG4gICAgICAgICAgICA8cD5cbiAgICAgICAgICAgICAgPHN0cm9uZz5DcmVhdGVkOjwvc3Ryb25nPiB7bmV3IERhdGUoZGVtYW5kLmNyZWF0ZWRBdCkudG9Mb2NhbGVEYXRlU3RyaW5nKCl9XG4gICAgICAgICAgICA8L3A+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgIDwvQ2FyZENvbnRlbnQ+XG4gICAgICA8L0NhcmQ+XG4gICAgKTtcbiAgfTsgLyoqXG4gICAqIElmIGZ1bmN0aW9uLlxuICAgKiBAcGFyYW0gaXNMb2FkaW5nIC0gSXNMb2FkaW5nIHBhcmFtZXRlci5cbiAgICovIC8qKlxuICAgKiBJZiBmdW5jdGlvbi5cbiAgICogQHBhcmFtIGlzTG9hZGluZyAtIElzTG9hZGluZyBwYXJhbWV0ZXIuXG4gICAqL1xuXG4gIGlmIChpc0xvYWRpbmcpIHtcbiAgICByZXR1cm4gKFxuICAgICAgPGRpdiBjbGFzc05hbWU9J2ZsZXgtMSBmbGV4IGZsZXgtY29sIG92ZXJmbG93LWhpZGRlbic+XG4gICAgICAgIDxIZWFkZXIgdGl0bGU9e3QoJ215RGVtYW5kcycpfSBzdWJ0aXRsZT17dCgnc3VibWl0QW5kVHJhY2tSZXF1ZXN0cycpfSAvPlxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT0nZmxleC0xIG92ZXJmbG93LWF1dG8gcC02Jz5cbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0nZmxleCBpdGVtcy1jZW50ZXIganVzdGlmeS1jZW50ZXIgaC02NCc+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0ndGV4dC1jZW50ZXInPkxvYWRpbmcgZGVtYW5kcy4uLjwvZGl2PlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICA8L2Rpdj5cbiAgICAgIDwvZGl2PlxuICAgICk7XG4gIH1cblxuICByZXR1cm4gKFxuICAgIDxkaXYgY2xhc3NOYW1lPSdmbGV4LTEgZmxleCBmbGV4LWNvbCBvdmVyZmxvdy1oaWRkZW4nPlxuICAgICAgPEhlYWRlciB0aXRsZT17dCgnbXlEZW1hbmRzJyl9IHN1YnRpdGxlPXt0KCdzdWJtaXRBbmRUcmFja1JlcXVlc3RzJyl9IC8+XG5cbiAgICAgIDxkaXYgY2xhc3NOYW1lPSdmbGV4LTEgb3ZlcmZsb3ctYXV0byBwLTYnPlxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT0nbWF4LXctN3hsIG14LWF1dG8gc3BhY2UteS02Jz5cbiAgICAgICAgICB7LyogSGVhZGVyIEFjdGlvbnMgKi99XG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9J2ZsZXggaXRlbXMtY2VudGVyIGp1c3RpZnktZW5kJz5cbiAgICAgICAgICAgIDxEaWFsb2cgb3Blbj17aXNOZXdEZW1hbmRPcGVufSBvbk9wZW5DaGFuZ2U9e3NldElzTmV3RGVtYW5kT3Blbn0+XG4gICAgICAgICAgICAgIDxEaWFsb2dUcmlnZ2VyIGFzQ2hpbGQ+XG4gICAgICAgICAgICAgICAgPEJ1dHRvbj5cbiAgICAgICAgICAgICAgICAgIDxQbHVzIGNsYXNzTmFtZT0naC00IHctNCBtci0yJyAvPlxuICAgICAgICAgICAgICAgICAge3QoJ25ld0RlbWFuZCcpfVxuICAgICAgICAgICAgICAgIDwvQnV0dG9uPlxuICAgICAgICAgICAgICA8L0RpYWxvZ1RyaWdnZXI+XG5cbiAgICAgICAgICAgICAgPERpYWxvZ0NvbnRlbnQgY2xhc3NOYW1lPSdtYXgtdy1sZyBtYXgtaC1bOTB2aF0gb3ZlcmZsb3cteS1hdXRvJz5cbiAgICAgICAgICAgICAgICA8RGlhbG9nSGVhZGVyPlxuICAgICAgICAgICAgICAgICAgPERpYWxvZ1RpdGxlPnt0KCdjcmVhdGVOZXdEZW1hbmQnKX08L0RpYWxvZ1RpdGxlPlxuICAgICAgICAgICAgICAgICAgPERpYWxvZ0Rlc2NyaXB0aW9uPlN1Ym1pdCBhIG5ldyByZXF1ZXN0IG9yIGNvbXBsYWludDwvRGlhbG9nRGVzY3JpcHRpb24+XG4gICAgICAgICAgICAgICAgPC9EaWFsb2dIZWFkZXI+XG4gICAgICAgICAgICAgICAgPEZvcm0gey4uLm5ld0RlbWFuZEZvcm19PlxuICAgICAgICAgICAgICAgICAgPGZvcm0gb25TdWJtaXQ9e25ld0RlbWFuZEZvcm0uaGFuZGxlU3VibWl0KGhhbmRsZUNyZWF0ZURlbWFuZCl9IGNsYXNzTmFtZT0nc3BhY2UteS00Jz5cbiAgICAgICAgICAgICAgICAgICAgPEZvcm1GaWVsZFxuICAgICAgICAgICAgICAgICAgICAgIGNvbnRyb2w9e25ld0RlbWFuZEZvcm0uY29udHJvbH1cbiAgICAgICAgICAgICAgICAgICAgICBuYW1lPSd0eXBlJ1xuICAgICAgICAgICAgICAgICAgICAgIHJlbmRlcj17KHsgZmllbGQgfSkgPT4gKFxuICAgICAgICAgICAgICAgICAgICAgICAgPEZvcm1JdGVtPlxuICAgICAgICAgICAgICAgICAgICAgICAgICA8Rm9ybUxhYmVsPlR5cGU8L0Zvcm1MYWJlbD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPFNlbGVjdCBvblZhbHVlQ2hhbmdlPXtmaWVsZC5vbkNoYW5nZX0gdmFsdWU9e2ZpZWxkLnZhbHVlIGFzIHN0cmluZ30+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPEZvcm1Db250cm9sPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPFNlbGVjdFRyaWdnZXI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxTZWxlY3RWYWx1ZSBwbGFjZWhvbGRlcj17dCgnc2VsZWN0VHlwZScpfSAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9TZWxlY3RUcmlnZ2VyPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvRm9ybUNvbnRyb2w+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPFNlbGVjdENvbnRlbnQ+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8U2VsZWN0SXRlbSB2YWx1ZT0nbWFpbnRlbmFuY2UnPk1haW50ZW5hbmNlPC9TZWxlY3RJdGVtPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPFNlbGVjdEl0ZW0gdmFsdWU9J2NvbXBsYWludCc+Q29tcGxhaW50PC9TZWxlY3RJdGVtPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPFNlbGVjdEl0ZW0gdmFsdWU9J2luZm9ybWF0aW9uJz5JbmZvcm1hdGlvbjwvU2VsZWN0SXRlbT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxTZWxlY3RJdGVtIHZhbHVlPSdvdGhlcic+T3RoZXI8L1NlbGVjdEl0ZW0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9TZWxlY3RDb250ZW50PlxuICAgICAgICAgICAgICAgICAgICAgICAgICA8L1NlbGVjdD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPEZvcm1NZXNzYWdlIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICA8L0Zvcm1JdGVtPlxuICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgIDxGb3JtRmllbGRcbiAgICAgICAgICAgICAgICAgICAgICBjb250cm9sPXtuZXdEZW1hbmRGb3JtLmNvbnRyb2x9XG4gICAgICAgICAgICAgICAgICAgICAgbmFtZT0nYnVpbGRpbmdJZCdcbiAgICAgICAgICAgICAgICAgICAgICByZW5kZXI9eyh7IGZpZWxkIH0pID0+IChcbiAgICAgICAgICAgICAgICAgICAgICAgIDxGb3JtSXRlbT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPEZvcm1MYWJlbD5CdWlsZGluZzwvRm9ybUxhYmVsPlxuICAgICAgICAgICAgICAgICAgICAgICAgICA8U2VsZWN0IG9uVmFsdWVDaGFuZ2U9e2ZpZWxkLm9uQ2hhbmdlfSB2YWx1ZT17ZmllbGQudmFsdWUgYXMgc3RyaW5nfT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8Rm9ybUNvbnRyb2w+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8U2VsZWN0VHJpZ2dlcj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPFNlbGVjdFZhbHVlIHBsYWNlaG9sZGVyPXt0KCdzZWxlY3RCdWlsZGluZycpfSAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9TZWxlY3RUcmlnZ2VyPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvRm9ybUNvbnRyb2w+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPFNlbGVjdENvbnRlbnQ+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7YnVpbGRpbmdzLm1hcCgoYnVpbGRpbmcpID0+IChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPFNlbGVjdEl0ZW0ga2V5PXtidWlsZGluZy5pZH0gdmFsdWU9e2J1aWxkaW5nLmlkfT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7YnVpbGRpbmcubmFtZX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9TZWxlY3RJdGVtPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9TZWxlY3RDb250ZW50PlxuICAgICAgICAgICAgICAgICAgICAgICAgICA8L1NlbGVjdD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPEZvcm1NZXNzYWdlIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICA8L0Zvcm1JdGVtPlxuICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgIDxGb3JtRmllbGRcbiAgICAgICAgICAgICAgICAgICAgICBjb250cm9sPXtuZXdEZW1hbmRGb3JtLmNvbnRyb2x9XG4gICAgICAgICAgICAgICAgICAgICAgbmFtZT0nZGVzY3JpcHRpb24nXG4gICAgICAgICAgICAgICAgICAgICAgcmVuZGVyPXsoeyBmaWVsZCB9KSA9PiAoXG4gICAgICAgICAgICAgICAgICAgICAgICA8Rm9ybUl0ZW0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgIDxGb3JtTGFiZWw+RGVzY3JpcHRpb248L0Zvcm1MYWJlbD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPEZvcm1Db250cm9sPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxUZXh0YXJlYVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI9e3QoJ2Rlc2NyaWJlUmVxdWVzdERldGFpbCcpfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPSdtaW4taC1bMTAwcHhdJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgey4uLmZpZWxkfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU9e2ZpZWxkLnZhbHVlIGFzIHN0cmluZ31cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICA8L0Zvcm1Db250cm9sPlxuICAgICAgICAgICAgICAgICAgICAgICAgICA8Rm9ybU1lc3NhZ2UgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvRm9ybUl0ZW0+XG4gICAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9J3NwYWNlLXktMic+XG4gICAgICAgICAgICAgICAgICAgICAgPGxhYmVsIGNsYXNzTmFtZT0ndGV4dC1zbSBmb250LW1lZGl1bSc+QXR0YWNobWVudHMgKE9wdGlvbmFsKTwvbGFiZWw+XG4gICAgICAgICAgICAgICAgICAgICAgPFNoYXJlZFVwbG9hZGVyXG4gICAgICAgICAgICAgICAgICAgICAgICBvbkRvY3VtZW50Q2hhbmdlPXsoZmlsZSwgZXh0cmFjdGVkVGV4dCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZmlsZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldFNlbGVjdGVkRmlsZXMoW2ZpbGVdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgIGZvcm1UeXBlPVwiZGVtYW5kc1wiXG4gICAgICAgICAgICAgICAgICAgICAgICB1cGxvYWRDb250ZXh0PXt1cGxvYWRDb250ZXh0fVxuICAgICAgICAgICAgICAgICAgICAgICAgc2hvd0FpVG9nZ2xlPXtmYWxzZX0gLy8gTm8gdG9nZ2xlLCB1c2UgY29uZmlnLWJhc2VkIEFJIGVuYWJsZW1lbnRcbiAgICAgICAgICAgICAgICAgICAgICAgIGFsbG93ZWRGaWxlVHlwZXM9e1snaW1hZ2UvKicsICdhcHBsaWNhdGlvbi9wZGYnLCAnLmRvYycsICcuZG9jeCcsICcudHh0J119XG4gICAgICAgICAgICAgICAgICAgICAgICBtYXhGaWxlU2l6ZT17MTB9XG4gICAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9J3RleHQteHMgdGV4dC1tdXRlZC1mb3JlZ3JvdW5kJz5cbiAgICAgICAgICAgICAgICAgICAgICAgIFVwbG9hZCBwaG90b3MsIGRvY3VtZW50cywgb3Igc2NyZWVuc2hvdHMuIENhbWVyYSBzdXBwb3J0ZWQgZm9yIG1vYmlsZS4gTWF4IDEwTUIgcGVyIGZpbGUuXG4gICAgICAgICAgICAgICAgICAgICAgPC9wPlxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgPERpYWxvZ0Zvb3Rlcj5cbiAgICAgICAgICAgICAgICAgICAgICA8QnV0dG9uIFxuICAgICAgICAgICAgICAgICAgICAgICAgdHlwZT0nc3VibWl0JyBcbiAgICAgICAgICAgICAgICAgICAgICAgIGRpc2FibGVkPXtjcmVhdGVEZW1hbmRNdXRhdGlvbi5pc1BlbmRpbmd9XG4gICAgICAgICAgICAgICAgICAgICAgICBkYXRhLXRlc3RpZD1cImJ1dHRvbi1jcmVhdGUtZGVtYW5kXCJcbiAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICB7Y3JlYXRlRGVtYW5kTXV0YXRpb24uaXNQZW5kaW5nID8gJ0NyZWF0aW5nLi4uJyA6ICdDcmVhdGUgRGVtYW5kJ31cbiAgICAgICAgICAgICAgICAgICAgICA8L0J1dHRvbj5cbiAgICAgICAgICAgICAgICAgICAgPC9EaWFsb2dGb290ZXI+XG4gICAgICAgICAgICAgICAgICA8L2Zvcm0+XG4gICAgICAgICAgICAgICAgPC9Gb3JtPlxuICAgICAgICAgICAgICA8L0RpYWxvZ0NvbnRlbnQ+XG4gICAgICAgICAgICA8L0RpYWxvZz5cbiAgICAgICAgICA8L2Rpdj5cblxuICAgICAgICAgIHsvKiBGaWx0ZXJzICovfVxuICAgICAgICAgIDxEZW1hbmRGaWx0ZXJzXG4gICAgICAgICAgICBmaWx0ZXJzPXt7XG4gICAgICAgICAgICAgIHNlYXJjaFRlcm0sXG4gICAgICAgICAgICAgIHN0YXR1c0ZpbHRlcixcbiAgICAgICAgICAgICAgdHlwZUZpbHRlcixcbiAgICAgICAgICAgIH19XG4gICAgICAgICAgICBoYW5kbGVycz17e1xuICAgICAgICAgICAgICBvblNlYXJjaENoYW5nZTogc2V0U2VhcmNoVGVybSxcbiAgICAgICAgICAgICAgb25TdGF0dXNDaGFuZ2U6IHNldFN0YXR1c0ZpbHRlcixcbiAgICAgICAgICAgICAgb25UeXBlQ2hhbmdlOiBzZXRUeXBlRmlsdGVyLFxuICAgICAgICAgICAgfX1cbiAgICAgICAgICAgIHVzZXJSb2xlPSdyZXNpZGVudCdcbiAgICAgICAgICAvPlxuXG4gICAgICAgICAgey8qIERlbWFuZHMgTGlzdCAqL31cbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0nc3BhY2UteS02Jz5cbiAgICAgICAgICAgIHsvKiBQYWdpbmF0aW9uICovfVxuICAgICAgICAgICAge3RvdGFsUGFnZXMgPiAxICYmIChcbiAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9J2ZsZXggaXRlbXMtY2VudGVyIGp1c3RpZnktY2VudGVyIGdhcC0yJz5cbiAgICAgICAgICAgICAgICA8QnV0dG9uXG4gICAgICAgICAgICAgICAgICB2YXJpYW50PSdvdXRsaW5lJ1xuICAgICAgICAgICAgICAgICAgc2l6ZT0nc20nXG4gICAgICAgICAgICAgICAgICBvbkNsaWNrPXtoYW5kbGVQcmV2aW91c1BhZ2V9XG4gICAgICAgICAgICAgICAgICBkaXNhYmxlZD17Y3VycmVudFBhZ2UgPT09IDF9XG4gICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgPENoZXZyb25MZWZ0IGNsYXNzTmFtZT0naC00IHctNCcgLz5cbiAgICAgICAgICAgICAgICAgIFByZXZpb3VzXG4gICAgICAgICAgICAgICAgPC9CdXR0b24+XG5cbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0nZmxleCBnYXAtMSc+XG4gICAgICAgICAgICAgICAgICB7QXJyYXkuZnJvbSh7IGxlbmd0aDogTWF0aC5taW4oNSwgdG90YWxQYWdlcykgfSwgKF8sIGkpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgbGV0IHBhZ2VOdW07XG4gICAgICAgICAgICAgICAgICAgIGlmICh0b3RhbFBhZ2VzIDw9IDUpIHtcbiAgICAgICAgICAgICAgICAgICAgICBwYWdlTnVtID0gaSArIDE7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoY3VycmVudFBhZ2UgPD0gMykge1xuICAgICAgICAgICAgICAgICAgICAgIHBhZ2VOdW0gPSBpICsgMTtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChjdXJyZW50UGFnZSA+PSB0b3RhbFBhZ2VzIC0gMikge1xuICAgICAgICAgICAgICAgICAgICAgIHBhZ2VOdW0gPSB0b3RhbFBhZ2VzIC0gNCArIGk7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgcGFnZU51bSA9IGN1cnJlbnRQYWdlIC0gMiArIGk7XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgICAgICAgICAgIDxCdXR0b25cbiAgICAgICAgICAgICAgICAgICAgICAgIGtleT17cGFnZU51bX1cbiAgICAgICAgICAgICAgICAgICAgICAgIHZhcmlhbnQ9e2N1cnJlbnRQYWdlID09PSBwYWdlTnVtID8gJ2RlZmF1bHQnIDogJ291dGxpbmUnfVxuICAgICAgICAgICAgICAgICAgICAgICAgc2l6ZT0nc20nXG4gICAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiBoYW5kbGVQYWdlQ2xpY2socGFnZU51bSl9XG4gICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAge3BhZ2VOdW19XG4gICAgICAgICAgICAgICAgICAgICAgPC9CdXR0b24+XG4gICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgICB9KX1cbiAgICAgICAgICAgICAgICA8L2Rpdj5cblxuICAgICAgICAgICAgICAgIDxCdXR0b25cbiAgICAgICAgICAgICAgICAgIHZhcmlhbnQ9J291dGxpbmUnXG4gICAgICAgICAgICAgICAgICBzaXplPSdzbSdcbiAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9e2hhbmRsZU5leHRQYWdlfVxuICAgICAgICAgICAgICAgICAgZGlzYWJsZWQ9e2N1cnJlbnRQYWdlID09PSB0b3RhbFBhZ2VzfVxuICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgIE5leHRcbiAgICAgICAgICAgICAgICAgIDxDaGV2cm9uUmlnaHQgY2xhc3NOYW1lPSdoLTQgdy00JyAvPlxuICAgICAgICAgICAgICAgIDwvQnV0dG9uPlxuICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICl9XG5cbiAgICAgICAgICAgIHsvKiBQYWdlIGluZm8gKi99XG4gICAgICAgICAgICB7ZmlsdGVyZWREZW1hbmRzLmxlbmd0aCA+IDAgJiYgKFxuICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0ndGV4dC1jZW50ZXIgdGV4dC1zbSB0ZXh0LW11dGVkLWZvcmVncm91bmQnPlxuICAgICAgICAgICAgICAgIFNob3dpbmcge3N0YXJ0SW5kZXggKyAxfSB0byB7TWF0aC5taW4oZW5kSW5kZXgsIGZpbHRlcmVkRGVtYW5kcy5sZW5ndGgpfSBvZnsnICd9XG4gICAgICAgICAgICAgICAge2ZpbHRlcmVkRGVtYW5kcy5sZW5ndGh9IGRlbWFuZHNcbiAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICApfVxuXG4gICAgICAgICAgICB7LyogQ3VycmVudCBwYWdlIGRlbWFuZHMgKi99XG4gICAgICAgICAgICB7Y3VycmVudERlbWFuZHMubGVuZ3RoID09PSAwID8gKFxuICAgICAgICAgICAgICA8Q2FyZD5cbiAgICAgICAgICAgICAgICA8Q2FyZENvbnRlbnQgY2xhc3NOYW1lPSdwLTYgdGV4dC1jZW50ZXInPlxuICAgICAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPSd0ZXh0LW11dGVkLWZvcmVncm91bmQnPnt0KCdub0RlbWFuZHNGb3VuZCcpfTwvcD5cbiAgICAgICAgICAgICAgICA8L0NhcmRDb250ZW50PlxuICAgICAgICAgICAgICA8L0NhcmQ+XG4gICAgICAgICAgICApIDogKFxuICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0nZ3JpZCBnYXAtNCBtZDpncmlkLWNvbHMtMiBsZzpncmlkLWNvbHMtMyc+XG4gICAgICAgICAgICAgICAge2N1cnJlbnREZW1hbmRzLm1hcCgoZGVtYW5kOiBEZW1hbmQpID0+IChcbiAgICAgICAgICAgICAgICAgIDxEZW1hbmRDYXJkIGtleT17ZGVtYW5kLmlkfSBkZW1hbmQ9e2RlbWFuZH0gLz5cbiAgICAgICAgICAgICAgICApKX1cbiAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICApfVxuICAgICAgICAgIDwvZGl2PlxuXG4gICAgICAgICAgey8qIERlbWFuZCBEZXRhaWxzIFBvcHVwICovfVxuICAgICAgICAgIDxEZW1hbmREZXRhaWxzUG9wdXBcbiAgICAgICAgICAgIGRlbWFuZD17c2VsZWN0ZWREZW1hbmR9XG4gICAgICAgICAgICBpc09wZW49e2lzRGV0YWlsc09wZW59XG4gICAgICAgICAgICBvbkNsb3NlPXsoKSA9PiBzZXRJc0RldGFpbHNPcGVuKGZhbHNlKX1cbiAgICAgICAgICAgIHVzZXI9e2RlZmF1bHRVc2VyfVxuICAgICAgICAgICAgb25EZW1hbmRVcGRhdGVkPXtoYW5kbGVEZW1hbmRVcGRhdGVkfVxuICAgICAgICAgIC8+XG4gICAgICAgIDwvZGl2PlxuICAgICAgPC9kaXY+XG4gICAgPC9kaXY+XG4gICk7XG59XG4iXSwidmVyc2lvbiI6M30=