ac51a5eedf0151a5eed606ef0314bbfb
'use strict';
var DataTransfer = require('../utils/dataTransfer/DataTransfer.js');
require('../utils/dataTransfer/Clipboard.js');
var getWindow = require('../utils/misc/getWindow.js');
var selection = require('../utils/focus/selection.js');
var UI = require('./UI.js');
function copySelection(target) {
    const data = selection.hasOwnSelection(target) ? {
        'text/plain': readSelectedValueFromInput(target)
    } : {
        'text/plain': String(target.ownerDocument.getSelection())
    };
    const dt = DataTransfer.createDataTransfer(getWindow.getWindow(target));
    for (const type in data) {
        if (data[type]) {
            dt.setData(type, data[type]);
        }
    }
    return dt;
}
function readSelectedValueFromInput(target) {
    const sel = UI.getUISelection(target);
    const val = UI.getUIValue(target);
    return val.substring(sel.startOffset, sel.endOffset);
}
exports.copySelection = copySelection;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiL2hvbWUvcnVubmVyL3dvcmtzcGFjZS9ub2RlX21vZHVsZXMvQHRlc3RpbmctbGlicmFyeS91c2VyLWV2ZW50L2Rpc3QvY2pzL2RvY3VtZW50L2NvcHlTZWxlY3Rpb24uanMiLCJtYXBwaW5ncyI6IkFBQUEsWUFBWSxDQUFDO0FBRWIsSUFBSSxZQUFZLEdBQUcsT0FBTyxDQUFDLHVDQUF1QyxDQUFDLENBQUM7QUFDcEUsT0FBTyxDQUFDLG9DQUFvQyxDQUFDLENBQUM7QUFDOUMsSUFBSSxTQUFTLEdBQUcsT0FBTyxDQUFDLDRCQUE0QixDQUFDLENBQUM7QUFDdEQsSUFBSSxTQUFTLEdBQUcsT0FBTyxDQUFDLDZCQUE2QixDQUFDLENBQUM7QUFDdkQsSUFBSSxFQUFFLEdBQUcsT0FBTyxDQUFDLFNBQVMsQ0FBQyxDQUFDO0FBRTVCLFNBQVMsYUFBYSxDQUFDLE1BQU07SUFDekIsTUFBTSxJQUFJLEdBQUcsU0FBUyxDQUFDLGVBQWUsQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLENBQUM7UUFDN0MsWUFBWSxFQUFFLDBCQUEwQixDQUFDLE1BQU0sQ0FBQztLQUNuRCxDQUFDLENBQUMsQ0FBQztRQUNBLFlBQVksRUFBRSxNQUFNLENBQUMsTUFBTSxDQUFDLGFBQWEsQ0FBQyxZQUFZLEVBQUUsQ0FBQztLQUM1RCxDQUFDO0lBQ0YsTUFBTSxFQUFFLEdBQUcsWUFBWSxDQUFDLGtCQUFrQixDQUFDLFNBQVMsQ0FBQyxTQUFTLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQztJQUN4RSxLQUFJLE1BQU0sSUFBSSxJQUFJLElBQUksRUFBQyxDQUFDO1FBQ3BCLElBQUksSUFBSSxDQUFDLElBQUksQ0FBQyxFQUFFLENBQUM7WUFDYixFQUFFLENBQUMsT0FBTyxDQUFDLElBQUksRUFBRSxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQztRQUNqQyxDQUFDO0lBQ0wsQ0FBQztJQUNELE9BQU8sRUFBRSxDQUFDO0FBQ2QsQ0FBQztBQUNELFNBQVMsMEJBQTBCLENBQUMsTUFBTTtJQUN0QyxNQUFNLEdBQUcsR0FBRyxFQUFFLENBQUMsY0FBYyxDQUFDLE1BQU0sQ0FBQyxDQUFDO0lBQ3RDLE1BQU0sR0FBRyxHQUFHLEVBQUUsQ0FBQyxVQUFVLENBQUMsTUFBTSxDQUFDLENBQUM7SUFDbEMsT0FBTyxHQUFHLENBQUMsU0FBUyxDQUFDLEdBQUcsQ0FBQyxXQUFXLEVBQUUsR0FBRyxDQUFDLFNBQVMsQ0FBQyxDQUFDO0FBQ3pELENBQUM7QUFFRCxPQUFPLENBQUMsYUFBYSxHQUFHLGFBQWEsQ0FBQyIsIm5hbWVzIjpbXSwic291cmNlcyI6WyIvaG9tZS9ydW5uZXIvd29ya3NwYWNlL25vZGVfbW9kdWxlcy9AdGVzdGluZy1saWJyYXJ5L3VzZXItZXZlbnQvZGlzdC9janMvZG9jdW1lbnQvY29weVNlbGVjdGlvbi5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIndXNlIHN0cmljdCc7XG5cbnZhciBEYXRhVHJhbnNmZXIgPSByZXF1aXJlKCcuLi91dGlscy9kYXRhVHJhbnNmZXIvRGF0YVRyYW5zZmVyLmpzJyk7XG5yZXF1aXJlKCcuLi91dGlscy9kYXRhVHJhbnNmZXIvQ2xpcGJvYXJkLmpzJyk7XG52YXIgZ2V0V2luZG93ID0gcmVxdWlyZSgnLi4vdXRpbHMvbWlzYy9nZXRXaW5kb3cuanMnKTtcbnZhciBzZWxlY3Rpb24gPSByZXF1aXJlKCcuLi91dGlscy9mb2N1cy9zZWxlY3Rpb24uanMnKTtcbnZhciBVSSA9IHJlcXVpcmUoJy4vVUkuanMnKTtcblxuZnVuY3Rpb24gY29weVNlbGVjdGlvbih0YXJnZXQpIHtcbiAgICBjb25zdCBkYXRhID0gc2VsZWN0aW9uLmhhc093blNlbGVjdGlvbih0YXJnZXQpID8ge1xuICAgICAgICAndGV4dC9wbGFpbic6IHJlYWRTZWxlY3RlZFZhbHVlRnJvbUlucHV0KHRhcmdldClcbiAgICB9IDoge1xuICAgICAgICAndGV4dC9wbGFpbic6IFN0cmluZyh0YXJnZXQub3duZXJEb2N1bWVudC5nZXRTZWxlY3Rpb24oKSlcbiAgICB9O1xuICAgIGNvbnN0IGR0ID0gRGF0YVRyYW5zZmVyLmNyZWF0ZURhdGFUcmFuc2ZlcihnZXRXaW5kb3cuZ2V0V2luZG93KHRhcmdldCkpO1xuICAgIGZvcihjb25zdCB0eXBlIGluIGRhdGEpe1xuICAgICAgICBpZiAoZGF0YVt0eXBlXSkge1xuICAgICAgICAgICAgZHQuc2V0RGF0YSh0eXBlLCBkYXRhW3R5cGVdKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gZHQ7XG59XG5mdW5jdGlvbiByZWFkU2VsZWN0ZWRWYWx1ZUZyb21JbnB1dCh0YXJnZXQpIHtcbiAgICBjb25zdCBzZWwgPSBVSS5nZXRVSVNlbGVjdGlvbih0YXJnZXQpO1xuICAgIGNvbnN0IHZhbCA9IFVJLmdldFVJVmFsdWUodGFyZ2V0KTtcbiAgICByZXR1cm4gdmFsLnN1YnN0cmluZyhzZWwuc3RhcnRPZmZzZXQsIHNlbC5lbmRPZmZzZXQpO1xufVxuXG5leHBvcnRzLmNvcHlTZWxlY3Rpb24gPSBjb3B5U2VsZWN0aW9uO1xuIl0sInZlcnNpb24iOjN9