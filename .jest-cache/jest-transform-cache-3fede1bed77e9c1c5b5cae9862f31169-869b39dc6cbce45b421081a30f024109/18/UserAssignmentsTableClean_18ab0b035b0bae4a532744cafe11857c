d9b870d9d7f3f323012e47fd87f6bec8
"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
exports.UserAssignmentsTable = UserAssignmentsTable;
const jsx_runtime_1 = require("react/jsx-runtime");
const react_1 = __importDefault(require("react"));
function UserAssignmentsTable({ users, isLoading, onEditUser, onEditOrganizations, onEditResidences, onDeleteUser, canEditOrganizations = false, canEditResidences = false, canDeleteUsers = false }) {
    if (isLoading) {
        return ((0, jsx_runtime_1.jsx)("div", { className: "flex justify-center items-center py-8", "data-testid": "loading-users", children: (0, jsx_runtime_1.jsx)("div", { className: "text-gray-500", children: "Loading users..." }) }));
    }
    if (!users || users.length === 0) {
        return ((0, jsx_runtime_1.jsx)("div", { className: "text-center py-8 text-gray-500", "data-testid": "no-users", children: "No users found" }));
    }
    return ((0, jsx_runtime_1.jsx)("div", { className: "overflow-x-auto", children: (0, jsx_runtime_1.jsxs)("table", { className: "w-full border-collapse border border-gray-300", "data-testid": "users-table", children: [(0, jsx_runtime_1.jsx)("thead", { children: (0, jsx_runtime_1.jsxs)("tr", { className: "bg-gray-50", children: [(0, jsx_runtime_1.jsx)("th", { className: "border border-gray-300 px-4 py-2 text-left", "data-testid": "header-name", children: "Name" }), (0, jsx_runtime_1.jsx)("th", { className: "border border-gray-300 px-4 py-2 text-left", "data-testid": "header-email", children: "Email" }), (0, jsx_runtime_1.jsx)("th", { className: "border border-gray-300 px-4 py-2 text-left", "data-testid": "header-role", children: "Role" }), (0, jsx_runtime_1.jsx)("th", { className: "border border-gray-300 px-4 py-2 text-left", "data-testid": "header-status", children: "Status" }), (0, jsx_runtime_1.jsx)("th", { className: "border border-gray-300 px-4 py-2 text-left", "data-testid": "header-organizations", children: "Organizations" }), (0, jsx_runtime_1.jsx)("th", { className: "border border-gray-300 px-4 py-2 text-left", "data-testid": "header-buildings", children: "Buildings" }), (0, jsx_runtime_1.jsx)("th", { className: "border border-gray-300 px-4 py-2 text-left", "data-testid": "header-residences", children: "Residences" }), (0, jsx_runtime_1.jsx)("th", { className: "border border-gray-300 px-4 py-2 text-left", "data-testid": "header-actions", children: "Actions" })] }) }), (0, jsx_runtime_1.jsx)("tbody", { children: users.map((user) => ((0, jsx_runtime_1.jsxs)("tr", { className: "hover:bg-gray-50", "data-testid": `user-row-${user.id}`, children: [(0, jsx_runtime_1.jsxs)("td", { className: "border border-gray-300 px-4 py-2", "data-testid": `name-${user.id}`, children: [user.firstName, " ", user.lastName] }), (0, jsx_runtime_1.jsx)("td", { className: "border border-gray-300 px-4 py-2", "data-testid": `email-${user.id}`, children: user.email }), (0, jsx_runtime_1.jsx)("td", { className: "border border-gray-300 px-4 py-2", "data-testid": `role-${user.id}`, children: (0, jsx_runtime_1.jsx)("span", { className: `px-2 py-1 rounded text-xs ${user.role === 'admin'
                                        ? 'bg-red-100 text-red-800'
                                        : user.role === 'manager'
                                            ? 'bg-blue-100 text-blue-800'
                                            : 'bg-green-100 text-green-800'}`, children: user.role }) }), (0, jsx_runtime_1.jsx)("td", { className: "border border-gray-300 px-4 py-2", "data-testid": `status-${user.id}`, children: (0, jsx_runtime_1.jsx)("span", { className: `px-2 py-1 rounded text-xs ${user.isActive
                                        ? 'bg-green-100 text-green-800'
                                        : 'bg-gray-100 text-gray-800'}`, children: user.isActive ? 'Active' : 'Inactive' }) }), (0, jsx_runtime_1.jsx)("td", { className: "border border-gray-300 px-4 py-2", "data-testid": `organizations-${user.id}`, children: (0, jsx_runtime_1.jsx)("div", { className: "space-y-1", children: Array.isArray(user.organizations) && user.organizations.length > 0 ? (user.organizations.map((org, idx) => ((0, jsx_runtime_1.jsx)("div", { className: "text-xs bg-blue-50 px-2 py-1 rounded", "data-testid": `org-${user.id}-${idx}`, children: org.name }, org.id || idx)))) : ((0, jsx_runtime_1.jsx)("div", { className: "text-gray-400 text-xs", "data-testid": `no-orgs-${user.id}`, children: "No organizations" })) }) }), (0, jsx_runtime_1.jsx)("td", { className: "border border-gray-300 px-4 py-2", "data-testid": `buildings-${user.id}`, children: (0, jsx_runtime_1.jsxs)("div", { className: "space-y-1", children: [Array.isArray(user.buildings) && user.buildings.length > 0 ? (user.buildings.slice(0, 3).map((building, idx) => ((0, jsx_runtime_1.jsx)("div", { className: "text-xs bg-purple-50 px-2 py-1 rounded", "data-testid": `building-${user.id}-${idx}`, children: building.name }, building.id || idx)))) : ((0, jsx_runtime_1.jsx)("div", { className: "text-gray-400 text-xs", "data-testid": `no-buildings-${user.id}`, children: "No buildings" })), Array.isArray(user.buildings) && user.buildings.length > 3 && ((0, jsx_runtime_1.jsxs)("div", { className: "text-xs text-gray-500", "data-testid": `more-buildings-${user.id}`, children: ["+", user.buildings.length - 3, " more"] }))] }) }), (0, jsx_runtime_1.jsx)("td", { className: "border border-gray-300 px-4 py-2", "data-testid": `residences-${user.id}`, children: (0, jsx_runtime_1.jsxs)("div", { className: "space-y-1", children: [Array.isArray(user.residences) && user.residences.length > 0 ? (user.residences.slice(0, 3).map((residence, idx) => ((0, jsx_runtime_1.jsxs)("div", { className: "text-xs bg-yellow-50 px-2 py-1 rounded", "data-testid": `residence-${user.id}-${idx}`, children: ["Unit ", residence.unitNumber] }, residence.id || idx)))) : ((0, jsx_runtime_1.jsx)("div", { className: "text-gray-400 text-xs", "data-testid": `no-residences-${user.id}`, children: "No residences" })), Array.isArray(user.residences) && user.residences.length > 3 && ((0, jsx_runtime_1.jsxs)("div", { className: "text-xs text-gray-500", "data-testid": `more-residences-${user.id}`, children: ["+", user.residences.length - 3, " more"] }))] }) }), (0, jsx_runtime_1.jsx)("td", { className: "border border-gray-300 px-4 py-2", "data-testid": `actions-${user.id}`, children: (0, jsx_runtime_1.jsxs)("div", { className: "flex gap-2 flex-wrap", children: [onEditUser && ((0, jsx_runtime_1.jsx)("button", { onClick: () => onEditUser(user), className: "px-2 py-1 text-xs bg-blue-50 text-blue-700 rounded hover:bg-blue-100", "data-testid": `edit-user-${user.id}`, children: "Edit User" })), canDeleteUsers && onDeleteUser && ((0, jsx_runtime_1.jsx)("button", { onClick: () => onDeleteUser(user), className: "px-2 py-1 text-xs bg-red-50 text-red-700 rounded hover:bg-red-100", "data-testid": `delete-user-${user.id}`, children: "Delete" }))] }) })] }, user.id))) })] }) }));
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiL2hvbWUvcnVubmVyL3dvcmtzcGFjZS9jbGllbnQvc3JjL2NvbXBvbmVudHMvVXNlckFzc2lnbm1lbnRzVGFibGVDbGVhbi50c3giLCJtYXBwaW5ncyI6Ijs7Ozs7QUFlQSxvREF1TUM7O0FBdE5ELGtEQUEwQjtBQWUxQixTQUFnQixvQkFBb0IsQ0FBQyxFQUNuQyxLQUFLLEVBQ0wsU0FBUyxFQUNULFVBQVUsRUFDVixtQkFBbUIsRUFDbkIsZ0JBQWdCLEVBQ2hCLFlBQVksRUFDWixvQkFBb0IsR0FBRyxLQUFLLEVBQzVCLGlCQUFpQixHQUFHLEtBQUssRUFDekIsY0FBYyxHQUFHLEtBQUssRUFDSTtJQUUxQixJQUFJLFNBQVMsRUFBRSxDQUFDO1FBQ2QsT0FBTyxDQUNMLGdDQUFLLFNBQVMsRUFBQyx1Q0FBdUMsaUJBQWEsZUFBZSxZQUNoRixnQ0FBSyxTQUFTLEVBQUMsZUFBZSxpQ0FBdUIsR0FDakQsQ0FDUCxDQUFDO0lBQ0osQ0FBQztJQUVELElBQUksQ0FBQyxLQUFLLElBQUksS0FBSyxDQUFDLE1BQU0sS0FBSyxDQUFDLEVBQUUsQ0FBQztRQUNqQyxPQUFPLENBQ0wsZ0NBQUssU0FBUyxFQUFDLGdDQUFnQyxpQkFBYSxVQUFVLCtCQUVoRSxDQUNQLENBQUM7SUFDSixDQUFDO0lBRUQsT0FBTyxDQUNMLGdDQUFLLFNBQVMsRUFBQyxpQkFBaUIsWUFDOUIsbUNBQU8sU0FBUyxFQUFDLCtDQUErQyxpQkFBYSxhQUFhLGFBQ3hGLDRDQUNFLGdDQUFJLFNBQVMsRUFBQyxZQUFZLGFBQ3hCLCtCQUFJLFNBQVMsRUFBQyw0Q0FBNEMsaUJBQWEsYUFBYSxxQkFFL0UsRUFDTCwrQkFBSSxTQUFTLEVBQUMsNENBQTRDLGlCQUFhLGNBQWMsc0JBRWhGLEVBQ0wsK0JBQUksU0FBUyxFQUFDLDRDQUE0QyxpQkFBYSxhQUFhLHFCQUUvRSxFQUNMLCtCQUFJLFNBQVMsRUFBQyw0Q0FBNEMsaUJBQWEsZUFBZSx1QkFFakYsRUFDTCwrQkFBSSxTQUFTLEVBQUMsNENBQTRDLGlCQUFhLHNCQUFzQiw4QkFFeEYsRUFDTCwrQkFBSSxTQUFTLEVBQUMsNENBQTRDLGlCQUFhLGtCQUFrQiwwQkFFcEYsRUFDTCwrQkFBSSxTQUFTLEVBQUMsNENBQTRDLGlCQUFhLG1CQUFtQiwyQkFFckYsRUFDTCwrQkFBSSxTQUFTLEVBQUMsNENBQTRDLGlCQUFhLGdCQUFnQix3QkFFbEYsSUFDRixHQUNDLEVBQ1IsNENBQ0csS0FBSyxDQUFDLEdBQUcsQ0FBQyxDQUFDLElBQUksRUFBRSxFQUFFLENBQUMsQ0FDbkIsZ0NBQWtCLFNBQVMsRUFBQyxrQkFBa0IsaUJBQWMsWUFBWSxJQUFJLENBQUMsRUFBRSxFQUFFLGFBRS9FLGdDQUFJLFNBQVMsRUFBQyxrQ0FBa0MsaUJBQWMsUUFBUSxJQUFJLENBQUMsRUFBRSxFQUFFLGFBQzVFLElBQUksQ0FBQyxTQUFTLE9BQUcsSUFBSSxDQUFDLFFBQVEsSUFDNUIsRUFHTCwrQkFBSSxTQUFTLEVBQUMsa0NBQWtDLGlCQUFjLFNBQVMsSUFBSSxDQUFDLEVBQUUsRUFBRSxZQUM3RSxJQUFJLENBQUMsS0FBSyxHQUNSLEVBR0wsK0JBQUksU0FBUyxFQUFDLGtDQUFrQyxpQkFBYyxRQUFRLElBQUksQ0FBQyxFQUFFLEVBQUUsWUFDN0UsaUNBQU0sU0FBUyxFQUFFLDZCQUNmLElBQUksQ0FBQyxJQUFJLEtBQUssT0FBTzt3Q0FDbkIsQ0FBQyxDQUFDLHlCQUF5Qjt3Q0FDM0IsQ0FBQyxDQUFDLElBQUksQ0FBQyxJQUFJLEtBQUssU0FBUzs0Q0FDekIsQ0FBQyxDQUFDLDJCQUEyQjs0Q0FDN0IsQ0FBQyxDQUFDLDZCQUNOLEVBQUUsWUFDQyxJQUFJLENBQUMsSUFBSSxHQUNMLEdBQ0osRUFHTCwrQkFBSSxTQUFTLEVBQUMsa0NBQWtDLGlCQUFjLFVBQVUsSUFBSSxDQUFDLEVBQUUsRUFBRSxZQUMvRSxpQ0FBTSxTQUFTLEVBQUUsNkJBQ2YsSUFBSSxDQUFDLFFBQVE7d0NBQ1gsQ0FBQyxDQUFDLDZCQUE2Qjt3Q0FDL0IsQ0FBQyxDQUFDLDJCQUNOLEVBQUUsWUFDQyxJQUFJLENBQUMsUUFBUSxDQUFDLENBQUMsQ0FBQyxRQUFRLENBQUMsQ0FBQyxDQUFDLFVBQVUsR0FDakMsR0FDSixFQUdMLCtCQUFJLFNBQVMsRUFBQyxrQ0FBa0MsaUJBQWMsaUJBQWlCLElBQUksQ0FBQyxFQUFFLEVBQUUsWUFDdEYsZ0NBQUssU0FBUyxFQUFDLFdBQVcsWUFDdkIsS0FBSyxDQUFDLE9BQU8sQ0FBQyxJQUFJLENBQUMsYUFBYSxDQUFDLElBQUksSUFBSSxDQUFDLGFBQWEsQ0FBQyxNQUFNLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUNwRSxJQUFJLENBQUMsYUFBYSxDQUFDLEdBQUcsQ0FBQyxDQUFDLEdBQUcsRUFBRSxHQUFHLEVBQUUsRUFBRSxDQUFDLENBQ25DLGdDQUVFLFNBQVMsRUFBQyxzQ0FBc0MsaUJBQ25DLE9BQU8sSUFBSSxDQUFDLEVBQUUsSUFBSSxHQUFHLEVBQUUsWUFFbkMsR0FBRyxDQUFDLElBQUksSUFKSixHQUFHLENBQUMsRUFBRSxJQUFJLEdBQUcsQ0FLZCxDQUNQLENBQUMsQ0FDSCxDQUFDLENBQUMsQ0FBQyxDQUNGLGdDQUFLLFNBQVMsRUFBQyx1QkFBdUIsaUJBQWMsV0FBVyxJQUFJLENBQUMsRUFBRSxFQUFFLGlDQUVsRSxDQUNQLEdBQ0csR0FDSCxFQUdMLCtCQUFJLFNBQVMsRUFBQyxrQ0FBa0MsaUJBQWMsYUFBYSxJQUFJLENBQUMsRUFBRSxFQUFFLFlBQ2xGLGlDQUFLLFNBQVMsRUFBQyxXQUFXLGFBQ3ZCLEtBQUssQ0FBQyxPQUFPLENBQUMsSUFBSSxDQUFDLFNBQVMsQ0FBQyxJQUFJLElBQUksQ0FBQyxTQUFTLENBQUMsTUFBTSxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FDNUQsSUFBSSxDQUFDLFNBQVMsQ0FBQyxLQUFLLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLFFBQVEsRUFBRSxHQUFHLEVBQUUsRUFBRSxDQUFDLENBQ2hELGdDQUVFLFNBQVMsRUFBQyx3Q0FBd0MsaUJBQ3JDLFlBQVksSUFBSSxDQUFDLEVBQUUsSUFBSSxHQUFHLEVBQUUsWUFFeEMsUUFBUSxDQUFDLElBQUksSUFKVCxRQUFRLENBQUMsRUFBRSxJQUFJLEdBQUcsQ0FLbkIsQ0FDUCxDQUFDLENBQ0gsQ0FBQyxDQUFDLENBQUMsQ0FDRixnQ0FBSyxTQUFTLEVBQUMsdUJBQXVCLGlCQUFjLGdCQUFnQixJQUFJLENBQUMsRUFBRSxFQUFFLDZCQUV2RSxDQUNQLEVBQ0EsS0FBSyxDQUFDLE9BQU8sQ0FBQyxJQUFJLENBQUMsU0FBUyxDQUFDLElBQUksSUFBSSxDQUFDLFNBQVMsQ0FBQyxNQUFNLEdBQUcsQ0FBQyxJQUFJLENBQzdELGlDQUFLLFNBQVMsRUFBQyx1QkFBdUIsaUJBQWMsa0JBQWtCLElBQUksQ0FBQyxFQUFFLEVBQUUsa0JBQzNFLElBQUksQ0FBQyxTQUFTLENBQUMsTUFBTSxHQUFHLENBQUMsYUFDdkIsQ0FDUCxJQUNHLEdBQ0gsRUFHTCwrQkFBSSxTQUFTLEVBQUMsa0NBQWtDLGlCQUFjLGNBQWMsSUFBSSxDQUFDLEVBQUUsRUFBRSxZQUNuRixpQ0FBSyxTQUFTLEVBQUMsV0FBVyxhQUN2QixLQUFLLENBQUMsT0FBTyxDQUFDLElBQUksQ0FBQyxVQUFVLENBQUMsSUFBSSxJQUFJLENBQUMsVUFBVSxDQUFDLE1BQU0sR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQzlELElBQUksQ0FBQyxVQUFVLENBQUMsS0FBSyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxTQUFTLEVBQUUsR0FBRyxFQUFFLEVBQUUsQ0FBQyxDQUNsRCxpQ0FFRSxTQUFTLEVBQUMsd0NBQXdDLGlCQUNyQyxhQUFhLElBQUksQ0FBQyxFQUFFLElBQUksR0FBRyxFQUFFLHNCQUVwQyxTQUFTLENBQUMsVUFBVSxLQUpyQixTQUFTLENBQUMsRUFBRSxJQUFJLEdBQUcsQ0FLcEIsQ0FDUCxDQUFDLENBQ0gsQ0FBQyxDQUFDLENBQUMsQ0FDRixnQ0FBSyxTQUFTLEVBQUMsdUJBQXVCLGlCQUFjLGlCQUFpQixJQUFJLENBQUMsRUFBRSxFQUFFLDhCQUV4RSxDQUNQLEVBQ0EsS0FBSyxDQUFDLE9BQU8sQ0FBQyxJQUFJLENBQUMsVUFBVSxDQUFDLElBQUksSUFBSSxDQUFDLFVBQVUsQ0FBQyxNQUFNLEdBQUcsQ0FBQyxJQUFJLENBQy9ELGlDQUFLLFNBQVMsRUFBQyx1QkFBdUIsaUJBQWMsbUJBQW1CLElBQUksQ0FBQyxFQUFFLEVBQUUsa0JBQzVFLElBQUksQ0FBQyxVQUFVLENBQUMsTUFBTSxHQUFHLENBQUMsYUFDeEIsQ0FDUCxJQUNHLEdBQ0gsRUFHTCwrQkFBSSxTQUFTLEVBQUMsa0NBQWtDLGlCQUFjLFdBQVcsSUFBSSxDQUFDLEVBQUUsRUFBRSxZQUNoRixpQ0FBSyxTQUFTLEVBQUMsc0JBQXNCLGFBQ2xDLFVBQVUsSUFBSSxDQUNiLG1DQUNFLE9BQU8sRUFBRSxHQUFHLEVBQUUsQ0FBQyxVQUFVLENBQUMsSUFBSSxDQUFDLEVBQy9CLFNBQVMsRUFBQyxzRUFBc0UsaUJBQ25FLGFBQWEsSUFBSSxDQUFDLEVBQUUsRUFBRSwwQkFHNUIsQ0FDVixFQUVBLGNBQWMsSUFBSSxZQUFZLElBQUksQ0FDakMsbUNBQ0UsT0FBTyxFQUFFLEdBQUcsRUFBRSxDQUFDLFlBQVksQ0FBQyxJQUFJLENBQUMsRUFDakMsU0FBUyxFQUFDLG1FQUFtRSxpQkFDaEUsZUFBZSxJQUFJLENBQUMsRUFBRSxFQUFFLHVCQUc5QixDQUNWLElBQ0csR0FDSCxLQW5JRSxJQUFJLENBQUMsRUFBRSxDQW9JWCxDQUNOLENBQUMsR0FDSSxJQUNGLEdBQ0osQ0FDUCxDQUFDO0FBQ0osQ0FBQyIsIm5hbWVzIjpbXSwic291cmNlcyI6WyIvaG9tZS9ydW5uZXIvd29ya3NwYWNlL2NsaWVudC9zcmMvY29tcG9uZW50cy9Vc2VyQXNzaWdubWVudHNUYWJsZUNsZWFuLnRzeCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgUmVhY3QgZnJvbSAncmVhY3QnO1xuaW1wb3J0IHR5cGUgeyBVc2VyV2l0aEFzc2lnbm1lbnRzIH0gZnJvbSAnQHNoYXJlZC9zY2hlbWEnO1xuXG5pbnRlcmZhY2UgVXNlckFzc2lnbm1lbnRzVGFibGVQcm9wcyB7XG4gIHVzZXJzOiBVc2VyV2l0aEFzc2lnbm1lbnRzW107XG4gIGlzTG9hZGluZzogYm9vbGVhbjtcbiAgb25FZGl0VXNlcj86ICh1c2VyOiBVc2VyV2l0aEFzc2lnbm1lbnRzKSA9PiB2b2lkO1xuICBvbkVkaXRPcmdhbml6YXRpb25zPzogKHVzZXI6IFVzZXJXaXRoQXNzaWdubWVudHMpID0+IHZvaWQ7XG4gIG9uRWRpdFJlc2lkZW5jZXM/OiAodXNlcjogVXNlcldpdGhBc3NpZ25tZW50cykgPT4gdm9pZDtcbiAgb25EZWxldGVVc2VyPzogKHVzZXI6IFVzZXJXaXRoQXNzaWdubWVudHMpID0+IHZvaWQ7XG4gIGNhbkVkaXRPcmdhbml6YXRpb25zPzogYm9vbGVhbjtcbiAgY2FuRWRpdFJlc2lkZW5jZXM/OiBib29sZWFuO1xuICBjYW5EZWxldGVVc2Vycz86IGJvb2xlYW47XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBVc2VyQXNzaWdubWVudHNUYWJsZSh7IFxuICB1c2VycywgXG4gIGlzTG9hZGluZywgXG4gIG9uRWRpdFVzZXIsXG4gIG9uRWRpdE9yZ2FuaXphdGlvbnMsXG4gIG9uRWRpdFJlc2lkZW5jZXMsXG4gIG9uRGVsZXRlVXNlcixcbiAgY2FuRWRpdE9yZ2FuaXphdGlvbnMgPSBmYWxzZSxcbiAgY2FuRWRpdFJlc2lkZW5jZXMgPSBmYWxzZSxcbiAgY2FuRGVsZXRlVXNlcnMgPSBmYWxzZVxufTogVXNlckFzc2lnbm1lbnRzVGFibGVQcm9wcykge1xuXG4gIGlmIChpc0xvYWRpbmcpIHtcbiAgICByZXR1cm4gKFxuICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGp1c3RpZnktY2VudGVyIGl0ZW1zLWNlbnRlciBweS04XCIgZGF0YS10ZXN0aWQ9XCJsb2FkaW5nLXVzZXJzXCI+XG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidGV4dC1ncmF5LTUwMFwiPkxvYWRpbmcgdXNlcnMuLi48L2Rpdj5cbiAgICAgIDwvZGl2PlxuICAgICk7XG4gIH1cblxuICBpZiAoIXVzZXJzIHx8IHVzZXJzLmxlbmd0aCA9PT0gMCkge1xuICAgIHJldHVybiAoXG4gICAgICA8ZGl2IGNsYXNzTmFtZT1cInRleHQtY2VudGVyIHB5LTggdGV4dC1ncmF5LTUwMFwiIGRhdGEtdGVzdGlkPVwibm8tdXNlcnNcIj5cbiAgICAgICAgTm8gdXNlcnMgZm91bmRcbiAgICAgIDwvZGl2PlxuICAgICk7XG4gIH1cblxuICByZXR1cm4gKFxuICAgIDxkaXYgY2xhc3NOYW1lPVwib3ZlcmZsb3cteC1hdXRvXCI+XG4gICAgICA8dGFibGUgY2xhc3NOYW1lPVwidy1mdWxsIGJvcmRlci1jb2xsYXBzZSBib3JkZXIgYm9yZGVyLWdyYXktMzAwXCIgZGF0YS10ZXN0aWQ9XCJ1c2Vycy10YWJsZVwiPlxuICAgICAgICA8dGhlYWQ+XG4gICAgICAgICAgPHRyIGNsYXNzTmFtZT1cImJnLWdyYXktNTBcIj5cbiAgICAgICAgICAgIDx0aCBjbGFzc05hbWU9XCJib3JkZXIgYm9yZGVyLWdyYXktMzAwIHB4LTQgcHktMiB0ZXh0LWxlZnRcIiBkYXRhLXRlc3RpZD1cImhlYWRlci1uYW1lXCI+XG4gICAgICAgICAgICAgIE5hbWVcbiAgICAgICAgICAgIDwvdGg+XG4gICAgICAgICAgICA8dGggY2xhc3NOYW1lPVwiYm9yZGVyIGJvcmRlci1ncmF5LTMwMCBweC00IHB5LTIgdGV4dC1sZWZ0XCIgZGF0YS10ZXN0aWQ9XCJoZWFkZXItZW1haWxcIj5cbiAgICAgICAgICAgICAgRW1haWxcbiAgICAgICAgICAgIDwvdGg+XG4gICAgICAgICAgICA8dGggY2xhc3NOYW1lPVwiYm9yZGVyIGJvcmRlci1ncmF5LTMwMCBweC00IHB5LTIgdGV4dC1sZWZ0XCIgZGF0YS10ZXN0aWQ9XCJoZWFkZXItcm9sZVwiPlxuICAgICAgICAgICAgICBSb2xlXG4gICAgICAgICAgICA8L3RoPlxuICAgICAgICAgICAgPHRoIGNsYXNzTmFtZT1cImJvcmRlciBib3JkZXItZ3JheS0zMDAgcHgtNCBweS0yIHRleHQtbGVmdFwiIGRhdGEtdGVzdGlkPVwiaGVhZGVyLXN0YXR1c1wiPlxuICAgICAgICAgICAgICBTdGF0dXNcbiAgICAgICAgICAgIDwvdGg+XG4gICAgICAgICAgICA8dGggY2xhc3NOYW1lPVwiYm9yZGVyIGJvcmRlci1ncmF5LTMwMCBweC00IHB5LTIgdGV4dC1sZWZ0XCIgZGF0YS10ZXN0aWQ9XCJoZWFkZXItb3JnYW5pemF0aW9uc1wiPlxuICAgICAgICAgICAgICBPcmdhbml6YXRpb25zXG4gICAgICAgICAgICA8L3RoPlxuICAgICAgICAgICAgPHRoIGNsYXNzTmFtZT1cImJvcmRlciBib3JkZXItZ3JheS0zMDAgcHgtNCBweS0yIHRleHQtbGVmdFwiIGRhdGEtdGVzdGlkPVwiaGVhZGVyLWJ1aWxkaW5nc1wiPlxuICAgICAgICAgICAgICBCdWlsZGluZ3NcbiAgICAgICAgICAgIDwvdGg+XG4gICAgICAgICAgICA8dGggY2xhc3NOYW1lPVwiYm9yZGVyIGJvcmRlci1ncmF5LTMwMCBweC00IHB5LTIgdGV4dC1sZWZ0XCIgZGF0YS10ZXN0aWQ9XCJoZWFkZXItcmVzaWRlbmNlc1wiPlxuICAgICAgICAgICAgICBSZXNpZGVuY2VzXG4gICAgICAgICAgICA8L3RoPlxuICAgICAgICAgICAgPHRoIGNsYXNzTmFtZT1cImJvcmRlciBib3JkZXItZ3JheS0zMDAgcHgtNCBweS0yIHRleHQtbGVmdFwiIGRhdGEtdGVzdGlkPVwiaGVhZGVyLWFjdGlvbnNcIj5cbiAgICAgICAgICAgICAgQWN0aW9uc1xuICAgICAgICAgICAgPC90aD5cbiAgICAgICAgICA8L3RyPlxuICAgICAgICA8L3RoZWFkPlxuICAgICAgICA8dGJvZHk+XG4gICAgICAgICAge3VzZXJzLm1hcCgodXNlcikgPT4gKFxuICAgICAgICAgICAgPHRyIGtleT17dXNlci5pZH0gY2xhc3NOYW1lPVwiaG92ZXI6YmctZ3JheS01MFwiIGRhdGEtdGVzdGlkPXtgdXNlci1yb3ctJHt1c2VyLmlkfWB9PlxuICAgICAgICAgICAgICB7LyogTmFtZSAqL31cbiAgICAgICAgICAgICAgPHRkIGNsYXNzTmFtZT1cImJvcmRlciBib3JkZXItZ3JheS0zMDAgcHgtNCBweS0yXCIgZGF0YS10ZXN0aWQ9e2BuYW1lLSR7dXNlci5pZH1gfT5cbiAgICAgICAgICAgICAgICB7dXNlci5maXJzdE5hbWV9IHt1c2VyLmxhc3ROYW1lfVxuICAgICAgICAgICAgICA8L3RkPlxuICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgey8qIEVtYWlsICovfVxuICAgICAgICAgICAgICA8dGQgY2xhc3NOYW1lPVwiYm9yZGVyIGJvcmRlci1ncmF5LTMwMCBweC00IHB5LTJcIiBkYXRhLXRlc3RpZD17YGVtYWlsLSR7dXNlci5pZH1gfT5cbiAgICAgICAgICAgICAgICB7dXNlci5lbWFpbH1cbiAgICAgICAgICAgICAgPC90ZD5cbiAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgIHsvKiBSb2xlICovfVxuICAgICAgICAgICAgICA8dGQgY2xhc3NOYW1lPVwiYm9yZGVyIGJvcmRlci1ncmF5LTMwMCBweC00IHB5LTJcIiBkYXRhLXRlc3RpZD17YHJvbGUtJHt1c2VyLmlkfWB9PlxuICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT17YHB4LTIgcHktMSByb3VuZGVkIHRleHQteHMgJHtcbiAgICAgICAgICAgICAgICAgIHVzZXIucm9sZSA9PT0gJ2FkbWluJyBcbiAgICAgICAgICAgICAgICAgICAgPyAnYmctcmVkLTEwMCB0ZXh0LXJlZC04MDAnXG4gICAgICAgICAgICAgICAgICAgIDogdXNlci5yb2xlID09PSAnbWFuYWdlcidcbiAgICAgICAgICAgICAgICAgICAgPyAnYmctYmx1ZS0xMDAgdGV4dC1ibHVlLTgwMCdcbiAgICAgICAgICAgICAgICAgICAgOiAnYmctZ3JlZW4tMTAwIHRleHQtZ3JlZW4tODAwJ1xuICAgICAgICAgICAgICAgIH1gfT5cbiAgICAgICAgICAgICAgICAgIHt1c2VyLnJvbGV9XG4gICAgICAgICAgICAgICAgPC9zcGFuPlxuICAgICAgICAgICAgICA8L3RkPlxuICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgey8qIFN0YXR1cyAqL31cbiAgICAgICAgICAgICAgPHRkIGNsYXNzTmFtZT1cImJvcmRlciBib3JkZXItZ3JheS0zMDAgcHgtNCBweS0yXCIgZGF0YS10ZXN0aWQ9e2BzdGF0dXMtJHt1c2VyLmlkfWB9PlxuICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT17YHB4LTIgcHktMSByb3VuZGVkIHRleHQteHMgJHtcbiAgICAgICAgICAgICAgICAgIHVzZXIuaXNBY3RpdmVcbiAgICAgICAgICAgICAgICAgICAgPyAnYmctZ3JlZW4tMTAwIHRleHQtZ3JlZW4tODAwJ1xuICAgICAgICAgICAgICAgICAgICA6ICdiZy1ncmF5LTEwMCB0ZXh0LWdyYXktODAwJ1xuICAgICAgICAgICAgICAgIH1gfT5cbiAgICAgICAgICAgICAgICAgIHt1c2VyLmlzQWN0aXZlID8gJ0FjdGl2ZScgOiAnSW5hY3RpdmUnfVxuICAgICAgICAgICAgICAgIDwvc3Bhbj5cbiAgICAgICAgICAgICAgPC90ZD5cbiAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgIHsvKiBPcmdhbml6YXRpb25zICovfVxuICAgICAgICAgICAgICA8dGQgY2xhc3NOYW1lPVwiYm9yZGVyIGJvcmRlci1ncmF5LTMwMCBweC00IHB5LTJcIiBkYXRhLXRlc3RpZD17YG9yZ2FuaXphdGlvbnMtJHt1c2VyLmlkfWB9PlxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwic3BhY2UteS0xXCI+XG4gICAgICAgICAgICAgICAgICB7QXJyYXkuaXNBcnJheSh1c2VyLm9yZ2FuaXphdGlvbnMpICYmIHVzZXIub3JnYW5pemF0aW9ucy5sZW5ndGggPiAwID8gKFxuICAgICAgICAgICAgICAgICAgICB1c2VyLm9yZ2FuaXphdGlvbnMubWFwKChvcmcsIGlkeCkgPT4gKFxuICAgICAgICAgICAgICAgICAgICAgIDxkaXZcbiAgICAgICAgICAgICAgICAgICAgICAgIGtleT17b3JnLmlkIHx8IGlkeH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cInRleHQteHMgYmctYmx1ZS01MCBweC0yIHB5LTEgcm91bmRlZFwiXG4gICAgICAgICAgICAgICAgICAgICAgICBkYXRhLXRlc3RpZD17YG9yZy0ke3VzZXIuaWR9LSR7aWR4fWB9XG4gICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAge29yZy5uYW1lfVxuICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICApKVxuICAgICAgICAgICAgICAgICAgKSA6IChcbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ0ZXh0LWdyYXktNDAwIHRleHQteHNcIiBkYXRhLXRlc3RpZD17YG5vLW9yZ3MtJHt1c2VyLmlkfWB9PlxuICAgICAgICAgICAgICAgICAgICAgIE5vIG9yZ2FuaXphdGlvbnNcbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICA8L3RkPlxuICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgey8qIEJ1aWxkaW5ncyAqL31cbiAgICAgICAgICAgICAgPHRkIGNsYXNzTmFtZT1cImJvcmRlciBib3JkZXItZ3JheS0zMDAgcHgtNCBweS0yXCIgZGF0YS10ZXN0aWQ9e2BidWlsZGluZ3MtJHt1c2VyLmlkfWB9PlxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwic3BhY2UteS0xXCI+XG4gICAgICAgICAgICAgICAgICB7QXJyYXkuaXNBcnJheSh1c2VyLmJ1aWxkaW5ncykgJiYgdXNlci5idWlsZGluZ3MubGVuZ3RoID4gMCA/IChcbiAgICAgICAgICAgICAgICAgICAgdXNlci5idWlsZGluZ3Muc2xpY2UoMCwgMykubWFwKChidWlsZGluZywgaWR4KSA9PiAoXG4gICAgICAgICAgICAgICAgICAgICAgPGRpdlxuICAgICAgICAgICAgICAgICAgICAgICAga2V5PXtidWlsZGluZy5pZCB8fCBpZHh9XG4gICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJ0ZXh0LXhzIGJnLXB1cnBsZS01MCBweC0yIHB5LTEgcm91bmRlZFwiXG4gICAgICAgICAgICAgICAgICAgICAgICBkYXRhLXRlc3RpZD17YGJ1aWxkaW5nLSR7dXNlci5pZH0tJHtpZHh9YH1cbiAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICB7YnVpbGRpbmcubmFtZX1cbiAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgKSlcbiAgICAgICAgICAgICAgICAgICkgOiAoXG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidGV4dC1ncmF5LTQwMCB0ZXh0LXhzXCIgZGF0YS10ZXN0aWQ9e2Buby1idWlsZGluZ3MtJHt1c2VyLmlkfWB9PlxuICAgICAgICAgICAgICAgICAgICAgIE5vIGJ1aWxkaW5nc1xuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICB7QXJyYXkuaXNBcnJheSh1c2VyLmJ1aWxkaW5ncykgJiYgdXNlci5idWlsZGluZ3MubGVuZ3RoID4gMyAmJiAoXG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidGV4dC14cyB0ZXh0LWdyYXktNTAwXCIgZGF0YS10ZXN0aWQ9e2Btb3JlLWJ1aWxkaW5ncy0ke3VzZXIuaWR9YH0+XG4gICAgICAgICAgICAgICAgICAgICAgK3t1c2VyLmJ1aWxkaW5ncy5sZW5ndGggLSAzfSBtb3JlXG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgPC90ZD5cbiAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgIHsvKiBSZXNpZGVuY2VzICovfVxuICAgICAgICAgICAgICA8dGQgY2xhc3NOYW1lPVwiYm9yZGVyIGJvcmRlci1ncmF5LTMwMCBweC00IHB5LTJcIiBkYXRhLXRlc3RpZD17YHJlc2lkZW5jZXMtJHt1c2VyLmlkfWB9PlxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwic3BhY2UteS0xXCI+XG4gICAgICAgICAgICAgICAgICB7QXJyYXkuaXNBcnJheSh1c2VyLnJlc2lkZW5jZXMpICYmIHVzZXIucmVzaWRlbmNlcy5sZW5ndGggPiAwID8gKFxuICAgICAgICAgICAgICAgICAgICB1c2VyLnJlc2lkZW5jZXMuc2xpY2UoMCwgMykubWFwKChyZXNpZGVuY2UsIGlkeCkgPT4gKFxuICAgICAgICAgICAgICAgICAgICAgIDxkaXZcbiAgICAgICAgICAgICAgICAgICAgICAgIGtleT17cmVzaWRlbmNlLmlkIHx8IGlkeH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cInRleHQteHMgYmcteWVsbG93LTUwIHB4LTIgcHktMSByb3VuZGVkXCJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGEtdGVzdGlkPXtgcmVzaWRlbmNlLSR7dXNlci5pZH0tJHtpZHh9YH1cbiAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICBVbml0IHtyZXNpZGVuY2UudW5pdE51bWJlcn1cbiAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgKSlcbiAgICAgICAgICAgICAgICAgICkgOiAoXG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidGV4dC1ncmF5LTQwMCB0ZXh0LXhzXCIgZGF0YS10ZXN0aWQ9e2Buby1yZXNpZGVuY2VzLSR7dXNlci5pZH1gfT5cbiAgICAgICAgICAgICAgICAgICAgICBObyByZXNpZGVuY2VzXG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgIHtBcnJheS5pc0FycmF5KHVzZXIucmVzaWRlbmNlcykgJiYgdXNlci5yZXNpZGVuY2VzLmxlbmd0aCA+IDMgJiYgKFxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInRleHQteHMgdGV4dC1ncmF5LTUwMFwiIGRhdGEtdGVzdGlkPXtgbW9yZS1yZXNpZGVuY2VzLSR7dXNlci5pZH1gfT5cbiAgICAgICAgICAgICAgICAgICAgICAre3VzZXIucmVzaWRlbmNlcy5sZW5ndGggLSAzfSBtb3JlXG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgPC90ZD5cbiAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgIHsvKiBBY3Rpb25zICovfVxuICAgICAgICAgICAgICA8dGQgY2xhc3NOYW1lPVwiYm9yZGVyIGJvcmRlci1ncmF5LTMwMCBweC00IHB5LTJcIiBkYXRhLXRlc3RpZD17YGFjdGlvbnMtJHt1c2VyLmlkfWB9PlxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBnYXAtMiBmbGV4LXdyYXBcIj5cbiAgICAgICAgICAgICAgICAgIHtvbkVkaXRVc2VyICYmIChcbiAgICAgICAgICAgICAgICAgICAgPGJ1dHRvblxuICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IG9uRWRpdFVzZXIodXNlcil9XG4gICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwicHgtMiBweS0xIHRleHQteHMgYmctYmx1ZS01MCB0ZXh0LWJsdWUtNzAwIHJvdW5kZWQgaG92ZXI6YmctYmx1ZS0xMDBcIlxuICAgICAgICAgICAgICAgICAgICAgIGRhdGEtdGVzdGlkPXtgZWRpdC11c2VyLSR7dXNlci5pZH1gfVxuICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgRWRpdCBVc2VyXG4gICAgICAgICAgICAgICAgICAgIDwvYnV0dG9uPlxuICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAge2NhbkRlbGV0ZVVzZXJzICYmIG9uRGVsZXRlVXNlciAmJiAoXG4gICAgICAgICAgICAgICAgICAgIDxidXR0b25cbiAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiBvbkRlbGV0ZVVzZXIodXNlcil9XG4gICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwicHgtMiBweS0xIHRleHQteHMgYmctcmVkLTUwIHRleHQtcmVkLTcwMCByb3VuZGVkIGhvdmVyOmJnLXJlZC0xMDBcIlxuICAgICAgICAgICAgICAgICAgICAgIGRhdGEtdGVzdGlkPXtgZGVsZXRlLXVzZXItJHt1c2VyLmlkfWB9XG4gICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICBEZWxldGVcbiAgICAgICAgICAgICAgICAgICAgPC9idXR0b24+XG4gICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICA8L3RkPlxuICAgICAgICAgICAgPC90cj5cbiAgICAgICAgICApKX1cbiAgICAgICAgPC90Ym9keT5cbiAgICAgIDwvdGFibGU+XG4gICAgPC9kaXY+XG4gICk7XG59Il0sInZlcnNpb24iOjN9