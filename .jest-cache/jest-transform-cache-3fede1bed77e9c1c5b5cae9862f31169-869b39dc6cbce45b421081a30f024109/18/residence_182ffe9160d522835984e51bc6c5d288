45ba35d3f8739616cd14625ec3f0dac2
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.default = Residence;
const jsx_runtime_1 = require("react/jsx-runtime");
const react_1 = require("react");
const react_query_1 = require("@tanstack/react-query");
const header_1 = require("@/components/layout/header");
const card_1 = require("@/components/ui/card");
const no_data_card_1 = require("@/components/ui/no-data-card");
const button_1 = require("@/components/ui/button");
const label_1 = require("@/components/ui/label");
const select_1 = require("@/components/ui/select");
const lucide_react_1 = require("lucide-react");
const react_hook_form_1 = require("react-hook-form");
const zod_1 = require("@hookform/resolvers/zod");
const zod_2 = require("zod");
const use_toast_1 = require("@/hooks/use-toast");
const use_language_1 = require("@/hooks/use-language");
const queryClient_1 = require("@/lib/queryClient");
const wouter_1 = require("wouter");
// Contact form schema
const contactFormSchema = zod_2.z.object({
    firstName: zod_2.z.string().min(1, 'First name is required'),
    lastName: zod_2.z.string().min(1, 'Last name is required'),
    email: zod_2.z.string().email('Invalid email address'),
    phone: zod_2.z.string().optional(),
    type: zod_2.z.enum(['primary', 'emergency', 'other']),
});
/**
 *
 */
function Residence() {
    const { toast } = (0, use_toast_1.useToast)();
    const { t } = (0, use_language_1.useLanguage)();
    const queryClient = (0, react_query_1.useQueryClient)();
    const [selectedBuildingId, setSelectedBuildingId] = (0, react_1.useState)('');
    const [selectedResidenceId, setSelectedResidenceId] = (0, react_1.useState)('');
    const [isContactDialogOpen, setIsContactDialogOpen] = (0, react_1.useState)(false);
    const [editingContact, setEditingContact] = (0, react_1.useState)(null);
    const [currentPage, setCurrentPage] = (0, react_1.useState)(1);
    const itemsPerPage = 10;
    // Form for contact management
    const contactForm = (0, react_hook_form_1.useForm)({
        resolver: (0, zod_1.zodResolver)(contactFormSchema),
        defaultValues: {
            firstName: '',
            lastName: '',
            email: '',
            phone: '',
            type: 'primary',
        },
    });
    // Fetch current user
    const { data: user } = (0, react_query_1.useQuery)({
        queryKey: ['/api/auth/user'],
        queryFn: () => (0, queryClient_1.apiRequest)('GET', '/api/auth/user'),
    });
    // All users see only their assigned residences
    const { data: accessibleResidences = [], isLoading, error: residencesError, refetch: refetchResidences, } = (0, react_query_1.useQuery)({
        queryKey: ['/api/users/residences', user?.id],
        queryFn: async () => {
            if (!user?.id) {
                return [];
            }
            // All users (including admin/manager) see only their assigned residences
            const url = `/api/users/${user.id}/residences`;
            const response = await fetch(url, {
                credentials: 'include',
                headers: {
                    'Cache-Control': 'no-cache',
                },
            });
            if (!response.ok) {
                throw new Error('Failed to fetch residences');
            }
            return response.json();
        },
        enabled: !!user?.id,
        refetchOnMount: true,
        staleTime: 0,
    });
    // Ensure accessibleResidences is always an array
    const safeAccessibleResidences = Array.isArray(accessibleResidences) ? accessibleResidences : [];
    // Extract buildings from user's residences for filtering
    const buildings = (0, react_1.useMemo)(() => {
        const buildingMap = new Map();
        safeAccessibleResidences.forEach((residence) => {
            if (residence.building && !buildingMap.has(residence.building.id)) {
                buildingMap.set(residence.building.id, residence.building);
            }
        });
        return Array.from(buildingMap.values());
    }, [safeAccessibleResidences]);
    // Filter residences based on selected building (if multiple residences exist)
    const filteredResidences = (0, react_1.useMemo)(() => {
        // If no building filter is selected, return all residences
        if (!selectedBuildingId) {
            return safeAccessibleResidences;
        }
        // Filter by selected building
        return safeAccessibleResidences.filter((r) => r.buildingId === selectedBuildingId);
    }, [safeAccessibleResidences, selectedBuildingId]);
    // Pagination calculations
    const totalPages = Math.ceil(filteredResidences.length / itemsPerPage);
    const startIndex = (currentPage - 1) * itemsPerPage;
    const endIndex = startIndex + itemsPerPage;
    const currentResidences = filteredResidences.slice(startIndex, endIndex);
    const handlePreviousPage = () => {
        setCurrentPage((prev) => Math.max(1, prev - 1));
    };
    const handleNextPage = () => {
        setCurrentPage((prev) => Math.min(totalPages, prev + 1));
    };
    const handlePageClick = (page) => {
        setCurrentPage(page);
    };
    // Reset pagination when filters change
    const resetToFirstPage = () => {
        setCurrentPage(1);
    };
    // Select first residence by default
    const selectedResidence = (0, react_1.useMemo)(() => {
        if (!selectedResidenceId && filteredResidences.length > 0) {
            setSelectedResidenceId(filteredResidences[0].id);
            return filteredResidences[0];
        }
        return filteredResidences.find((r) => r.id === selectedResidenceId) || null;
    }, [selectedResidenceId, filteredResidences]);
    // Fetch contacts for selected residence
    const { data: contacts = [], isLoading: contactsLoading } = (0, react_query_1.useQuery)({
        queryKey: ['/api/contacts', selectedResidenceId],
        queryFn: async () => {
            if (!selectedResidenceId) {
                return [];
            }
            const response = await (0, queryClient_1.apiRequest)('GET', `/api/contacts?entity=residence&entityId=${selectedResidenceId}`);
            return Array.isArray(response) ? response : [];
        },
        enabled: !!selectedResidenceId,
    });
    // Fetch building contacts (read-only for residents)
    const { data: buildingContacts = [], isLoading: buildingContactsLoading } = (0, react_query_1.useQuery)({
        queryKey: ['/api/contacts', 'building', selectedResidence?.buildingId],
        queryFn: async () => {
            if (!selectedResidence?.buildingId) {
                return [];
            }
            const response = await (0, queryClient_1.apiRequest)('GET', `/api/contacts?entity=building&entityId=${selectedResidence.buildingId}`);
            return Array.isArray(response) ? response : [];
        },
        enabled: !!selectedResidence?.buildingId,
    });
    // Mutations for contact management
    const addContactMutation = (0, react_query_1.useMutation)({
        mutationFn: (data) => (0, queryClient_1.apiRequest)('POST', '/api/contacts', {
            ...data,
            residenceId: selectedResidenceId,
        }),
        onSuccess: () => {
            queryClient.invalidateQueries({ queryKey: ['/api/contacts', selectedResidenceId] });
            setIsContactDialogOpen(false);
            setEditingContact(null);
            contactForm.reset();
            toast({
                title: 'Contact added successfully',
                description: 'The new contact has been added to this residence.',
            });
        },
        onError: (error) => {
            toast({
                title: 'Failed to add contact',
                description: error.message || 'Something went wrong',
                variant: 'destructive',
            });
        },
    });
    const updateContactMutation = (0, react_query_1.useMutation)({
        mutationFn: (data) => (0, queryClient_1.apiRequest)('PATCH', `/api/contacts/${editingContact?.id}`, data),
        onSuccess: () => {
            queryClient.invalidateQueries({ queryKey: ['/api/contacts', selectedResidenceId] });
            setIsContactDialogOpen(false);
            setEditingContact(null);
            contactForm.reset();
            toast({
                title: 'Contact updated successfully',
                description: 'The contact information has been updated.',
            });
        },
        onError: (error) => {
            toast({
                title: 'Failed to update contact',
                description: error.message || 'Something went wrong',
                variant: 'destructive',
            });
        },
    });
    const deleteContactMutation = (0, react_query_1.useMutation)({
        mutationFn: (contactId) => (0, queryClient_1.apiRequest)('DELETE', `/api/contacts/${contactId}`),
        onSuccess: () => {
            queryClient.invalidateQueries({ queryKey: ['/api/contacts', selectedResidenceId] });
            toast({
                title: 'Contact deleted successfully',
                description: 'The contact has been removed.',
            });
        },
        onError: (error) => {
            toast({
                title: 'Failed to delete contact',
                description: error.message || 'Something went wrong',
                variant: 'destructive',
            });
        },
    });
    const handleAddContact = (data) => {
        if (editingContact) {
            updateContactMutation.mutate(data);
        }
        else {
            addContactMutation.mutate(data);
        }
    };
    const handleEditContact = (contact) => {
        setEditingContact(contact);
        contactForm.reset({
            firstName: contact.firstName,
            lastName: contact.lastName,
            email: contact.email,
            phone: contact.phone || '',
            type: contact.type,
        });
        setIsContactDialogOpen(true);
    };
    const handleDeleteContact = (contact) => {
        if (confirm('Are you sure you want to delete this contact?')) {
            deleteContactMutation.mutate(contact.id);
        }
    };
    if (isLoading) {
        return ((0, jsx_runtime_1.jsxs)("div", { className: 'flex-1 flex flex-col overflow-hidden', children: [(0, jsx_runtime_1.jsx)(header_1.Header, { title: t('myResidence'), subtitle: t('viewResidenceInfo') }), (0, jsx_runtime_1.jsx)("div", { className: 'flex-1 flex items-center justify-center', children: (0, jsx_runtime_1.jsxs)("div", { className: 'text-center', children: [(0, jsx_runtime_1.jsx)("div", { className: 'animate-spin rounded-full h-8 w-8 border-b-2 border-gray-900 mx-auto mb-4' }), (0, jsx_runtime_1.jsx)("p", { className: 'text-gray-600', children: t('loading') })] }) })] }));
    }
    if (filteredResidences.length === 0) {
        return ((0, jsx_runtime_1.jsxs)("div", { className: 'flex-1 flex flex-col overflow-hidden', children: [(0, jsx_runtime_1.jsx)(header_1.Header, { title: t('myResidence'), subtitle: t('viewResidenceInfo') }), (0, jsx_runtime_1.jsx)("div", { className: 'flex-1 flex items-center justify-center p-6', children: (0, jsx_runtime_1.jsx)(no_data_card_1.NoDataCard, { icon: lucide_react_1.Home, titleKey: "noResidencesFound", descriptionKey: user?.role && ['admin', 'manager'].includes(user.role)
                            ? 'noResidencesFoundOrg'
                            : 'notAssignedResidences', testId: "no-residences-message" }) })] }));
    }
    return ((0, jsx_runtime_1.jsxs)("div", { className: 'flex-1 flex flex-col overflow-hidden', children: [(0, jsx_runtime_1.jsx)(header_1.Header, { title: t('myResidence'), subtitle: t('myResidenceInfo') }), (0, jsx_runtime_1.jsx)("div", { className: 'flex-1 overflow-auto p-6', children: (0, jsx_runtime_1.jsxs)("div", { className: 'max-w-7xl mx-auto space-y-6', children: [(buildings.length > 1 || filteredResidences.length > 1) && ((0, jsx_runtime_1.jsxs)(card_1.Card, { children: [(0, jsx_runtime_1.jsx)(card_1.CardHeader, { children: (0, jsx_runtime_1.jsxs)(card_1.CardTitle, { className: 'flex items-center gap-2', children: [(0, jsx_runtime_1.jsx)(lucide_react_1.Home, { className: 'w-5 h-5' }), "Select Residence"] }) }), (0, jsx_runtime_1.jsx)(card_1.CardContent, { children: (0, jsx_runtime_1.jsxs)("div", { className: 'flex flex-col md:flex-row gap-4', children: [buildings.length > 1 && ((0, jsx_runtime_1.jsxs)("div", { className: 'flex-1', children: [(0, jsx_runtime_1.jsx)(label_1.Label, { className: 'text-sm font-medium mb-2 block', children: t('building2') }), (0, jsx_runtime_1.jsxs)(select_1.Select, { value: selectedBuildingId, onValueChange: (value) => {
                                                            setSelectedBuildingId(value);
                                                            setSelectedResidenceId(''); // Reset residence selection when building changes
                                                        }, children: [(0, jsx_runtime_1.jsx)(select_1.SelectTrigger, { className: 'w-full', children: (0, jsx_runtime_1.jsx)(select_1.SelectValue, { placeholder: t('selectABuilding') }) }), (0, jsx_runtime_1.jsxs)(select_1.SelectContent, { children: [(0, jsx_runtime_1.jsx)(select_1.SelectItem, { value: "all", children: t('allBuildings') }), buildings.map((building) => ((0, jsx_runtime_1.jsxs)(select_1.SelectItem, { value: building.id, children: [building.name, " - ", building.address] }, building.id)))] })] })] })), filteredResidences.length > 1 && ((0, jsx_runtime_1.jsxs)("div", { className: 'flex-1', children: [(0, jsx_runtime_1.jsx)(label_1.Label, { className: 'text-sm font-medium mb-2 block', children: t('selectResidence') }), (0, jsx_runtime_1.jsxs)(select_1.Select, { value: selectedResidenceId, onValueChange: setSelectedResidenceId, children: [(0, jsx_runtime_1.jsx)(select_1.SelectTrigger, { className: 'w-full', children: (0, jsx_runtime_1.jsx)(select_1.SelectValue, { placeholder: t('selectAResidence') }) }), (0, jsx_runtime_1.jsx)(select_1.SelectContent, { children: filteredResidences.map((residence) => ((0, jsx_runtime_1.jsxs)(select_1.SelectItem, { value: residence.id, children: [t('unit'), " ", residence.unitNumber, " - ", residence.building?.name || 'N/A'] }, residence.id))) })] })] }))] }) })] })), currentResidences.length > 0 && ((0, jsx_runtime_1.jsx)("div", { className: 'grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6', children: currentResidences.map((residence) => ((0, jsx_runtime_1.jsxs)(card_1.Card, { className: 'hover:shadow-lg transition-shadow', children: [(0, jsx_runtime_1.jsxs)(card_1.CardHeader, { children: [(0, jsx_runtime_1.jsxs)(card_1.CardTitle, { className: 'flex items-center gap-2', children: [(0, jsx_runtime_1.jsx)(lucide_react_1.Home, { className: 'w-5 h-5' }), t('unit'), " ", residence.unitNumber] }), (0, jsx_runtime_1.jsx)("div", { className: 'text-sm text-gray-600', children: residence.building?.name || t('buildingInfoUnavailable') })] }), (0, jsx_runtime_1.jsxs)(card_1.CardContent, { className: 'space-y-4', children: [(0, jsx_runtime_1.jsxs)("div", { className: 'grid grid-cols-1 gap-3', children: [(0, jsx_runtime_1.jsxs)("div", { children: [(0, jsx_runtime_1.jsx)(label_1.Label, { className: 'text-xs font-medium text-gray-500', children: t('address') }), (0, jsx_runtime_1.jsx)("p", { className: 'text-sm text-gray-700', children: residence.building?.address || t('addressUnavailable') }), (0, jsx_runtime_1.jsxs)("p", { className: 'text-sm text-gray-700', children: [residence.building?.city || 'N/A', ",", ' ', residence.building?.province || 'N/A', ' ', residence.building?.postalCode || ''] })] }), (0, jsx_runtime_1.jsxs)("div", { className: 'grid grid-cols-2 gap-3', children: [residence.floor && ((0, jsx_runtime_1.jsxs)("div", { children: [(0, jsx_runtime_1.jsx)(label_1.Label, { className: 'text-xs font-medium text-gray-500', children: t('floor') }), (0, jsx_runtime_1.jsx)("p", { className: 'text-sm text-gray-700', children: residence.floor })] })), residence.squareFootage && ((0, jsx_runtime_1.jsxs)("div", { children: [(0, jsx_runtime_1.jsx)(label_1.Label, { className: 'text-xs font-medium text-gray-500', children: t('sqFt') }), (0, jsx_runtime_1.jsx)("p", { className: 'text-sm text-gray-700', children: residence.squareFootage })] })), residence.bedrooms && ((0, jsx_runtime_1.jsxs)("div", { children: [(0, jsx_runtime_1.jsx)(label_1.Label, { className: 'text-xs font-medium text-gray-500', children: t('bedrooms') }), (0, jsx_runtime_1.jsxs)("div", { className: 'flex items-center gap-1', children: [(0, jsx_runtime_1.jsx)(lucide_react_1.Bed, { className: 'w-3 h-3' }), (0, jsx_runtime_1.jsx)("span", { className: 'text-sm text-gray-700', children: residence.bedrooms })] })] })), residence.bathrooms && ((0, jsx_runtime_1.jsxs)("div", { children: [(0, jsx_runtime_1.jsx)(label_1.Label, { className: 'text-xs font-medium text-gray-500', children: t('bathrooms') }), (0, jsx_runtime_1.jsxs)("div", { className: 'flex items-center gap-1', children: [(0, jsx_runtime_1.jsx)(lucide_react_1.Bath, { className: 'w-3 h-3' }), (0, jsx_runtime_1.jsx)("span", { className: 'text-sm text-gray-700', children: residence.bathrooms })] })] }))] }), residence.parkingSpaceNumbers &&
                                                        residence.parkingSpaceNumbers.length > 0 && ((0, jsx_runtime_1.jsxs)("div", { children: [(0, jsx_runtime_1.jsx)(label_1.Label, { className: 'text-xs font-medium text-gray-500', children: t('parking') }), (0, jsx_runtime_1.jsxs)("div", { className: 'flex items-center gap-1', children: [(0, jsx_runtime_1.jsx)(lucide_react_1.Car, { className: 'w-3 h-3' }), (0, jsx_runtime_1.jsx)("span", { className: 'text-sm text-gray-700', children: residence.parkingSpaceNumbers.join(', ') })] })] })), residence.storageSpaceNumbers &&
                                                        residence.storageSpaceNumbers.length > 0 && ((0, jsx_runtime_1.jsxs)("div", { children: [(0, jsx_runtime_1.jsx)(label_1.Label, { className: 'text-xs font-medium text-gray-500', children: t('storage') }), (0, jsx_runtime_1.jsxs)("div", { className: 'flex items-center gap-1', children: [(0, jsx_runtime_1.jsx)(lucide_react_1.Package, { className: 'w-3 h-3' }), (0, jsx_runtime_1.jsx)("span", { className: 'text-sm text-gray-700', children: residence.storageSpaceNumbers.join(', ') })] })] }))] }), (0, jsx_runtime_1.jsxs)("div", { className: 'flex flex-col gap-2 pt-4 border-t', children: [(0, jsx_runtime_1.jsx)(wouter_1.Link, { href: `/residents/residences/${residence.id}/documents`, children: (0, jsx_runtime_1.jsxs)(button_1.Button, { variant: 'outline', size: 'sm', className: 'w-full justify-start', children: [(0, jsx_runtime_1.jsx)(lucide_react_1.FileText, { className: 'w-4 h-4 mr-2' }), t('residenceDocumentsButton')] }) }), (0, jsx_runtime_1.jsx)(wouter_1.Link, { href: `/residents/buildings/${residence.buildingId}/documents`, children: (0, jsx_runtime_1.jsxs)(button_1.Button, { variant: 'outline', size: 'sm', className: 'w-full justify-start', children: [(0, jsx_runtime_1.jsx)(lucide_react_1.Building, { className: 'w-4 h-4 mr-2' }), t('buildingDocumentsButton')] }) })] })] })] }, residence.id))) })), totalPages > 1 && ((0, jsx_runtime_1.jsxs)("div", { className: 'flex items-center justify-center gap-2 mt-8', children: [(0, jsx_runtime_1.jsxs)(button_1.Button, { variant: 'outline', size: 'sm', onClick: handlePreviousPage, disabled: currentPage === 1, children: [(0, jsx_runtime_1.jsx)(lucide_react_1.ChevronLeft, { className: 'h-4 w-4' }), t('previous')] }), (0, jsx_runtime_1.jsx)("div", { className: 'flex gap-1', children: Array.from({ length: Math.min(5, totalPages) }, (_, i) => {
                                        let pageNum;
                                        if (totalPages <= 5) {
                                            pageNum = i + 1;
                                        }
                                        else if (currentPage <= 3) {
                                            pageNum = i + 1;
                                        }
                                        else if (currentPage >= totalPages - 2) {
                                            pageNum = totalPages - 4 + i;
                                        }
                                        else {
                                            pageNum = currentPage - 2 + i;
                                        }
                                        return ((0, jsx_runtime_1.jsx)(button_1.Button, { variant: currentPage === pageNum ? 'default' : 'outline', size: 'sm', onClick: () => handlePageClick(pageNum), children: pageNum }, pageNum));
                                    }) }), (0, jsx_runtime_1.jsxs)(button_1.Button, { variant: 'outline', size: 'sm', onClick: handleNextPage, disabled: currentPage === totalPages, children: [t('next'), (0, jsx_runtime_1.jsx)(lucide_react_1.ChevronRight, { className: 'h-4 w-4' })] })] })), filteredResidences.length > 0 && ((0, jsx_runtime_1.jsxs)("div", { className: 'text-center text-sm text-muted-foreground mt-4', children: [t('showing'), " ", startIndex + 1, " to ", Math.min(endIndex, filteredResidences.length), " of", ' ', filteredResidences.length, " ", t('residences')] }))] }) })] }));
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiL2hvbWUvcnVubmVyL3dvcmtzcGFjZS9jbGllbnQvc3JjL3BhZ2VzL3Jlc2lkZW50cy9yZXNpZGVuY2UudHN4IiwibWFwcGluZ3MiOiI7O0FBbUhBLDRCQTRnQkM7O0FBL25CRCxpQ0FBMEM7QUFDMUMsdURBQThFO0FBQzlFLHVEQUFvRDtBQUNwRCwrQ0FBZ0Y7QUFFaEYsK0RBQTBEO0FBQzFELG1EQUFnRDtBQUVoRCxpREFBOEM7QUFDOUMsbURBTWdDO0FBa0JoQywrQ0FtQnNCO0FBQ3RCLHFEQUEwQztBQUMxQyxpREFBc0Q7QUFDdEQsNkJBQXdCO0FBQ3hCLGlEQUE2QztBQUM3Qyx1REFBbUQ7QUFDbkQsbURBQStDO0FBQy9DLG1DQUE4QjtBQXVDOUIsc0JBQXNCO0FBQ3RCLE1BQU0saUJBQWlCLEdBQUcsT0FBQyxDQUFDLE1BQU0sQ0FBQztJQUNqQyxTQUFTLEVBQUUsT0FBQyxDQUFDLE1BQU0sRUFBRSxDQUFDLEdBQUcsQ0FBQyxDQUFDLEVBQUUsd0JBQXdCLENBQUM7SUFDdEQsUUFBUSxFQUFFLE9BQUMsQ0FBQyxNQUFNLEVBQUUsQ0FBQyxHQUFHLENBQUMsQ0FBQyxFQUFFLHVCQUF1QixDQUFDO0lBQ3BELEtBQUssRUFBRSxPQUFDLENBQUMsTUFBTSxFQUFFLENBQUMsS0FBSyxDQUFDLHVCQUF1QixDQUFDO0lBQ2hELEtBQUssRUFBRSxPQUFDLENBQUMsTUFBTSxFQUFFLENBQUMsUUFBUSxFQUFFO0lBQzVCLElBQUksRUFBRSxPQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsU0FBUyxFQUFFLFdBQVcsRUFBRSxPQUFPLENBQUMsQ0FBQztDQUNoRCxDQUFDLENBQUM7QUFPSDs7R0FFRztBQUNILFNBQXdCLFNBQVM7SUFDL0IsTUFBTSxFQUFFLEtBQUssRUFBRSxHQUFHLElBQUEsb0JBQVEsR0FBRSxDQUFDO0lBQzdCLE1BQU0sRUFBRSxDQUFDLEVBQUUsR0FBRyxJQUFBLDBCQUFXLEdBQUUsQ0FBQztJQUM1QixNQUFNLFdBQVcsR0FBRyxJQUFBLDRCQUFjLEdBQUUsQ0FBQztJQUVy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QkFBWSxJQUFDLFNBQVMsRUFBQyxTQUFTLEdBQUcsSUFDN0IsSUFDTCxDQUNQLEVBR0Esa0JBQWtCLENBQUMsTUFBTSxHQUFHLENBQUMsSUFBSSxDQUNoQyxpQ0FBSyxTQUFTLEVBQUMsZ0RBQWdELGFBQzVELENBQUMsQ0FBQyxTQUFTLENBQUMsT0FBRyxVQUFVLEdBQUcsQ0FBQyxVQUFNLElBQUksQ0FBQyxHQUFHLENBQUMsUUFBUSxFQUFFLGtCQUFrQixDQUFDLE1BQU0sQ0FBQyxTQUFLLEdBQUcsRUFDeEYsa0JBQWtCLENBQUMsTUFBTSxPQUFHLENBQUMsQ0FBQyxZQUFZLENBQUMsSUFDeEMsQ0FDUCxJQUNHLEdBQ0YsSUFDRixDQUNQLENBQUM7QUFDSixDQUFDIiwibmFtZXMiOltdLCJzb3VyY2VzIjpbIi9ob21lL3J1bm5lci93b3Jrc3BhY2UvY2xpZW50L3NyYy9wYWdlcy9yZXNpZGVudHMvcmVzaWRlbmNlLnRzeCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyB1c2VTdGF0ZSwgdXNlTWVtbyB9IGZyb20gJ3JlYWN0JztcbmltcG9ydCB7IHVzZVF1ZXJ5LCB1c2VNdXRhdGlvbiwgdXNlUXVlcnlDbGllbnQgfSBmcm9tICdAdGFuc3RhY2svcmVhY3QtcXVlcnknO1xuaW1wb3J0IHsgSGVhZGVyIH0gZnJvbSAnQC9jb21wb25lbnRzL2xheW91dC9oZWFkZXInO1xuaW1wb3J0IHsgQ2FyZCwgQ2FyZENvbnRlbnQsIENhcmRIZWFkZXIsIENhcmRUaXRsZSB9IGZyb20gJ0AvY29tcG9uZW50cy91aS9jYXJkJztcbmltcG9ydCB7IEJhZGdlIH0gZnJvbSAnQC9jb21wb25lbnRzL3VpL2JhZGdlJztcbmltcG9ydCB7IE5vRGF0YUNhcmQgfSBmcm9tICdAL2NvbXBvbmVudHMvdWkvbm8tZGF0YS1jYXJkJztcbmltcG9ydCB7IEJ1dHRvbiB9IGZyb20gJ0AvY29tcG9uZW50cy91aS9idXR0b24nO1xuaW1wb3J0IHsgSW5wdXQgfSBmcm9tICdAL2NvbXBvbmVudHMvdWkvaW5wdXQnO1xuaW1wb3J0IHsgTGFiZWwgfSBmcm9tICdAL2NvbXBvbmVudHMvdWkvbGFiZWwnO1xuaW1wb3J0IHtcbiAgU2VsZWN0LFxuICBTZWxlY3RDb250ZW50LFxuICBTZWxlY3RJdGVtLFxuICBTZWxlY3RUcmlnZ2VyLFxuICBTZWxlY3RWYWx1ZSxcbn0gZnJvbSAnQC9jb21wb25lbnRzL3VpL3NlbGVjdCc7XG5pbXBvcnQge1xuICBEaWFsb2csXG4gIERpYWxvZ0NvbnRlbnQsXG4gIERpYWxvZ0hlYWRlcixcbiAgRGlhbG9nVGl0bGUsXG4gIERpYWxvZ1RyaWdnZXIsXG4gIERpYWxvZ0Rlc2NyaXB0aW9uLFxuICBEaWFsb2dGb290ZXIsXG59IGZyb20gJ0AvY29tcG9uZW50cy91aS9kaWFsb2cnO1xuaW1wb3J0IHtcbiAgRm9ybSxcbiAgRm9ybUNvbnRyb2wsXG4gIEZvcm1GaWVsZCxcbiAgRm9ybUl0ZW0sXG4gIEZvcm1MYWJlbCxcbiAgRm9ybU1lc3NhZ2UsXG59IGZyb20gJ0AvY29tcG9uZW50cy91aS9mb3JtJztcbmltcG9ydCB7XG4gIEhvbWUsXG4gIEJ1aWxkaW5nLFxuICBNYXBQaW4sXG4gIEJlZCxcbiAgQmF0aCxcbiAgQ2FyLFxuICBQYWNrYWdlLFxuICBQaG9uZSxcbiAgTWFpbCxcbiAgVXNlcixcbiAgRWRpdCxcbiAgUGx1cyxcbiAgVHJhc2gyLFxuICBGaWxlVGV4dCxcbiAgRG93bmxvYWQsXG4gIENhbGVuZGFyLFxuICBDaGV2cm9uTGVmdCxcbiAgQ2hldnJvblJpZ2h0LFxufSBmcm9tICdsdWNpZGUtcmVhY3QnO1xuaW1wb3J0IHsgdXNlRm9ybSB9IGZyb20gJ3JlYWN0LWhvb2stZm9ybSc7XG5pbXBvcnQgeyB6b2RSZXNvbHZlciB9IGZyb20gJ0Bob29rZm9ybS9yZXNvbHZlcnMvem9kJztcbmltcG9ydCB7IHogfSBmcm9tICd6b2QnO1xuaW1wb3J0IHsgdXNlVG9hc3QgfSBmcm9tICdAL2hvb2tzL3VzZS10b2FzdCc7XG5pbXBvcnQgeyB1c2VMYW5ndWFnZSB9IGZyb20gJ0AvaG9va3MvdXNlLWxhbmd1YWdlJztcbmltcG9ydCB7IGFwaVJlcXVlc3QgfSBmcm9tICdAL2xpYi9xdWVyeUNsaWVudCc7XG5pbXBvcnQgeyBMaW5rIH0gZnJvbSAnd291dGVyJztcblxuLyoqXG4gKlxuICovXG5pbnRlcmZhY2UgUmVzaWRlbmNlIHtcbiAgaWQ6IHN0cmluZztcbiAgdW5pdE51bWJlcjogc3RyaW5nO1xuICBmbG9vcj86IG51bWJlcjtcbiAgc3F1YXJlRm9vdGFnZT86IHN0cmluZztcbiAgYmVkcm9vbXM/OiBudW1iZXI7XG4gIGJhdGhyb29tcz86IHN0cmluZztcbiAgYmFsY29ueT86IGJvb2xlYW47XG4gIHBhcmtpbmdTcGFjZU51bWJlcnM/OiBzdHJpbmdbXTtcbiAgc3RvcmFnZVNwYWNlTnVtYmVycz86IHN0cmluZ1tdO1xuICBpc0FjdGl2ZTogYm9vbGVhbjtcbiAgYnVpbGRpbmdJZDogc3RyaW5nO1xuICBidWlsZGluZzoge1xuICAgIGlkOiBzdHJpbmc7XG4gICAgbmFtZTogc3RyaW5nO1xuICAgIGFkZHJlc3M6IHN0cmluZztcbiAgICBjaXR5OiBzdHJpbmc7XG4gICAgcHJvdmluY2U6IHN0cmluZztcbiAgICBwb3N0YWxDb2RlOiBzdHJpbmc7XG4gIH07XG59XG5cbi8qKlxuICpcbiAqL1xuaW50ZXJmYWNlIENvbnRhY3Qge1xuICBpZDogc3RyaW5nO1xuICBmaXJzdE5hbWU6IHN0cmluZztcbiAgbGFzdE5hbWU6IHN0cmluZztcbiAgZW1haWw6IHN0cmluZztcbiAgcGhvbmU/OiBzdHJpbmc7XG4gIHR5cGU6IHN0cmluZztcbn1cblxuLy8gQ29udGFjdCBmb3JtIHNjaGVtYVxuY29uc3QgY29udGFjdEZvcm1TY2hlbWEgPSB6Lm9iamVjdCh7XG4gIGZpcnN0TmFtZTogei5zdHJpbmcoKS5taW4oMSwgJ0ZpcnN0IG5hbWUgaXMgcmVxdWlyZWQnKSxcbiAgbGFzdE5hbWU6IHouc3RyaW5nKCkubWluKDEsICdMYXN0IG5hbWUgaXMgcmVxdWlyZWQnKSxcbiAgZW1haWw6IHouc3RyaW5nKCkuZW1haWwoJ0ludmFsaWQgZW1haWwgYWRkcmVzcycpLFxuICBwaG9uZTogei5zdHJpbmcoKS5vcHRpb25hbCgpLFxuICB0eXBlOiB6LmVudW0oWydwcmltYXJ5JywgJ2VtZXJnZW5jeScsICdvdGhlciddKSxcbn0pO1xuXG4vKipcbiAqXG4gKi9cbnR5cGUgQ29udGFjdEZvcm1EYXRhID0gei5pbmZlcjx0eXBlb2YgY29udGFjdEZvcm1TY2hlbWE+O1xuXG4vKipcbiAqXG4gKi9cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIFJlc2lkZW5jZSgpIHtcbiAgY29uc3QgeyB0b2FzdCB9ID0gdXNlVG9hc3QoKTtcbiAgY29uc3QgeyB0IH0gPSB1c2VMYW5ndWFnZSgpO1xuICBjb25zdCBxdWVyeUNsaWVudCA9IHVzZVF1ZXJ5Q2xpZW50KCk7XG5cbiAgY29uc3QgW3NlbGVjdGVkQnVpbGRpbmdJZCwgc2V0U2VsZWN0ZWRCdWlsZGluZ0lkXSA9IHVzZVN0YXRlPHN0cmluZz4oJycpO1xuICBjb25zdCBbc2VsZWN0ZWRSZXNpZGVuY2VJZCwgc2V0U2VsZWN0ZWRSZXNpZGVuY2VJZF0gPSB1c2VTdGF0ZTxzdHJpbmc+KCcnKTtcbiAgY29uc3QgW2lzQ29udGFjdERpYWxvZ09wZW4sIHNldElzQ29udGFjdERpYWxvZ09wZW5dID0gdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBbZWRpdGluZ0NvbnRhY3QsIHNldEVkaXRpbmdDb250YWN0XSA9IHVzZVN0YXRlPENvbnRhY3QgfCBudWxsPihudWxsKTtcbiAgY29uc3QgW2N1cnJlbnRQYWdlLCBzZXRDdXJyZW50UGFnZV0gPSB1c2VTdGF0ZSgxKTtcbiAgY29uc3QgaXRlbXNQZXJQYWdlID0gMTA7XG5cbiAgLy8gRm9ybSBmb3IgY29udGFjdCBtYW5hZ2VtZW50XG4gIGNvbnN0IGNvbnRhY3RGb3JtID0gdXNlRm9ybTxDb250YWN0Rm9ybURhdGE+KHtcbiAgICByZXNvbHZlcjogem9kUmVzb2x2ZXIoY29udGFjdEZvcm1TY2hlbWEpLFxuICAgIGRlZmF1bHRWYWx1ZXM6IHtcbiAgICAgIGZpcnN0TmFtZTogJycsXG4gICAgICBsYXN0TmFtZTogJycsXG4gICAgICBlbWFpbDogJycsXG4gICAgICBwaG9uZTogJycsXG4gICAgICB0eXBlOiAncHJpbWFyeScsXG4gICAgfSxcbiAgfSk7XG5cbiAgLy8gRmV0Y2ggY3VycmVudCB1c2VyXG4gIGNvbnN0IHsgZGF0YTogdXNlciB9ID0gdXNlUXVlcnkoe1xuICAgIHF1ZXJ5S2V5OiBbJy9hcGkvYXV0aC91c2VyJ10sXG4gICAgcXVlcnlGbjogKCkgPT4gYXBpUmVxdWVzdCgnR0VUJywgJy9hcGkvYXV0aC91c2VyJykgYXMgUHJvbWlzZTxhbnk+LFxuICB9KTtcblxuICAvLyBBbGwgdXNlcnMgc2VlIG9ubHkgdGhlaXIgYXNzaWduZWQgcmVzaWRlbmNlc1xuICBjb25zdCB7XG4gICAgZGF0YTogYWNjZXNzaWJsZVJlc2lkZW5jZXMgPSBbXSxcbiAgICBpc0xvYWRpbmcsXG4gICAgZXJyb3I6IHJlc2lkZW5jZXNFcnJvcixcbiAgICByZWZldGNoOiByZWZldGNoUmVzaWRlbmNlcyxcbiAgfSA9IHVzZVF1ZXJ5KHtcbiAgICBxdWVyeUtleTogWycvYXBpL3VzZXJzL3Jlc2lkZW5jZXMnLCB1c2VyPy5pZF0sXG4gICAgcXVlcnlGbjogYXN5bmMgKCkgPT4ge1xuICAgICAgaWYgKCF1c2VyPy5pZCkge1xuICAgICAgICByZXR1cm4gW107XG4gICAgICB9XG5cbiAgICAgIC8vIEFsbCB1c2VycyAoaW5jbHVkaW5nIGFkbWluL21hbmFnZXIpIHNlZSBvbmx5IHRoZWlyIGFzc2lnbmVkIHJlc2lkZW5jZXNcbiAgICAgIGNvbnN0IHVybCA9IGAvYXBpL3VzZXJzLyR7dXNlci5pZH0vcmVzaWRlbmNlc2A7XG5cbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2godXJsLCB7XG4gICAgICAgIGNyZWRlbnRpYWxzOiAnaW5jbHVkZScsXG4gICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAnQ2FjaGUtQ29udHJvbCc6ICduby1jYWNoZScsXG4gICAgICAgIH0sXG4gICAgICB9KTtcbiAgICAgIGlmICghcmVzcG9uc2Uub2spIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdGYWlsZWQgdG8gZmV0Y2ggcmVzaWRlbmNlcycpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHJlc3BvbnNlLmpzb24oKTtcbiAgICB9LFxuICAgIGVuYWJsZWQ6ICEhdXNlcj8uaWQsXG4gICAgcmVmZXRjaE9uTW91bnQ6IHRydWUsXG4gICAgc3RhbGVUaW1lOiAwLFxuICB9KTtcblxuICAvLyBFbnN1cmUgYWNjZXNzaWJsZVJlc2lkZW5jZXMgaXMgYWx3YXlzIGFuIGFycmF5XG4gIGNvbnN0IHNhZmVBY2Nlc3NpYmxlUmVzaWRlbmNlcyA9IEFycmF5LmlzQXJyYXkoYWNjZXNzaWJsZVJlc2lkZW5jZXMpID8gYWNjZXNzaWJsZVJlc2lkZW5jZXMgOiBbXTtcblxuICAvLyBFeHRyYWN0IGJ1aWxkaW5ncyBmcm9tIHVzZXIncyByZXNpZGVuY2VzIGZvciBmaWx0ZXJpbmdcbiAgY29uc3QgYnVpbGRpbmdzID0gdXNlTWVtbygoKSA9PiB7XG4gICAgY29uc3QgYnVpbGRpbmdNYXAgPSBuZXcgTWFwKCk7XG4gICAgc2FmZUFjY2Vzc2libGVSZXNpZGVuY2VzLmZvckVhY2goKHJlc2lkZW5jZSkgPT4ge1xuICAgICAgaWYgKHJlc2lkZW5jZS5idWlsZGluZyAmJiAhYnVpbGRpbmdNYXAuaGFzKHJlc2lkZW5jZS5idWlsZGluZy5pZCkpIHtcbiAgICAgICAgYnVpbGRpbmdNYXAuc2V0KHJlc2lkZW5jZS5idWlsZGluZy5pZCwgcmVzaWRlbmNlLmJ1aWxkaW5nKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgICByZXR1cm4gQXJyYXkuZnJvbShidWlsZGluZ01hcC52YWx1ZXMoKSk7XG4gIH0sIFtzYWZlQWNjZXNzaWJsZVJlc2lkZW5jZXNdKTtcblxuICAvLyBGaWx0ZXIgcmVzaWRlbmNlcyBiYXNlZCBvbiBzZWxlY3RlZCBidWlsZGluZyAoaWYgbXVsdGlwbGUgcmVzaWRlbmNlcyBleGlzdClcbiAgY29uc3QgZmlsdGVyZWRSZXNpZGVuY2VzID0gdXNlTWVtbygoKSA9PiB7XG4gICAgLy8gSWYgbm8gYnVpbGRpbmcgZmlsdGVyIGlzIHNlbGVjdGVkLCByZXR1cm4gYWxsIHJlc2lkZW5jZXNcbiAgICBpZiAoIXNlbGVjdGVkQnVpbGRpbmdJZCkge1xuICAgICAgcmV0dXJuIHNhZmVBY2Nlc3NpYmxlUmVzaWRlbmNlcztcbiAgICB9XG5cbiAgICAvLyBGaWx0ZXIgYnkgc2VsZWN0ZWQgYnVpbGRpbmdcbiAgICByZXR1cm4gc2FmZUFjY2Vzc2libGVSZXNpZGVuY2VzLmZpbHRlcigocikgPT4gci5idWlsZGluZ0lkID09PSBzZWxlY3RlZEJ1aWxkaW5nSWQpO1xuICB9LCBbc2FmZUFjY2Vzc2libGVSZXNpZGVuY2VzLCBzZWxlY3RlZEJ1aWxkaW5nSWRdKTtcblxuICAvLyBQYWdpbmF0aW9uIGNhbGN1bGF0aW9uc1xuICBjb25zdCB0b3RhbFBhZ2VzID0gTWF0aC5jZWlsKGZpbHRlcmVkUmVzaWRlbmNlcy5sZW5ndGggLyBpdGVtc1BlclBhZ2UpO1xuICBjb25zdCBzdGFydEluZGV4ID0gKGN1cnJlbnRQYWdlIC0gMSkgKiBpdGVtc1BlclBhZ2U7XG4gIGNvbnN0IGVuZEluZGV4ID0gc3RhcnRJbmRleCArIGl0ZW1zUGVyUGFnZTtcbiAgY29uc3QgY3VycmVudFJlc2lkZW5jZXMgPSBmaWx0ZXJlZFJlc2lkZW5jZXMuc2xpY2Uoc3RhcnRJbmRleCwgZW5kSW5kZXgpO1xuXG4gIGNvbnN0IGhhbmRsZVByZXZpb3VzUGFnZSA9ICgpID0+IHtcbiAgICBzZXRDdXJyZW50UGFnZSgocHJldikgPT4gTWF0aC5tYXgoMSwgcHJldiAtIDEpKTtcbiAgfTtcblxuICBjb25zdCBoYW5kbGVOZXh0UGFnZSA9ICgpID0+IHtcbiAgICBzZXRDdXJyZW50UGFnZSgocHJldikgPT4gTWF0aC5taW4odG90YWxQYWdlcywgcHJldiArIDEpKTtcbiAgfTtcblxuICBjb25zdCBoYW5kbGVQYWdlQ2xpY2sgPSAocGFnZTogbnVtYmVyKSA9PiB7XG4gICAgc2V0Q3VycmVudFBhZ2UocGFnZSk7XG4gIH07XG5cbiAgLy8gUmVzZXQgcGFnaW5hdGlvbiB3aGVuIGZpbHRlcnMgY2hhbmdlXG4gIGNvbnN0IHJlc2V0VG9GaXJzdFBhZ2UgPSAoKSA9PiB7XG4gICAgc2V0Q3VycmVudFBhZ2UoMSk7XG4gIH07XG5cbiAgLy8gU2VsZWN0IGZpcnN0IHJlc2lkZW5jZSBieSBkZWZhdWx0XG4gIGNvbnN0IHNlbGVjdGVkUmVzaWRlbmNlID0gdXNlTWVtbygoKSA9PiB7XG4gICAgaWYgKCFzZWxlY3RlZFJlc2lkZW5jZUlkICYmIGZpbHRlcmVkUmVzaWRlbmNlcy5sZW5ndGggPiAwKSB7XG4gICAgICBzZXRTZWxlY3RlZFJlc2lkZW5jZUlkKGZpbHRlcmVkUmVzaWRlbmNlc1swXS5pZCk7XG4gICAgICByZXR1cm4gZmlsdGVyZWRSZXNpZGVuY2VzWzBdO1xuICAgIH1cbiAgICByZXR1cm4gZmlsdGVyZWRSZXNpZGVuY2VzLmZpbmQoKHIpID0+IHIuaWQgPT09IHNlbGVjdGVkUmVzaWRlbmNlSWQpIHx8IG51bGw7XG4gIH0sIFtzZWxlY3RlZFJlc2lkZW5jZUlkLCBmaWx0ZXJlZFJlc2lkZW5jZXNdKTtcblxuICAvLyBGZXRjaCBjb250YWN0cyBmb3Igc2VsZWN0ZWQgcmVzaWRlbmNlXG4gIGNvbnN0IHsgZGF0YTogY29udGFjdHMgPSBbXSwgaXNMb2FkaW5nOiBjb250YWN0c0xvYWRpbmcgfSA9IHVzZVF1ZXJ5KHtcbiAgICBxdWVyeUtleTogWycvYXBpL2NvbnRhY3RzJywgc2VsZWN0ZWRSZXNpZGVuY2VJZF0sXG4gICAgcXVlcnlGbjogYXN5bmMgKCkgPT4ge1xuICAgICAgaWYgKCFzZWxlY3RlZFJlc2lkZW5jZUlkKSB7XG4gICAgICAgIHJldHVybiBbXTtcbiAgICAgIH1cbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgYXBpUmVxdWVzdChcbiAgICAgICAgJ0dFVCcsXG4gICAgICAgIGAvYXBpL2NvbnRhY3RzP2VudGl0eT1yZXNpZGVuY2UmZW50aXR5SWQ9JHtzZWxlY3RlZFJlc2lkZW5jZUlkfWBcbiAgICAgICk7XG4gICAgICByZXR1cm4gQXJyYXkuaXNBcnJheShyZXNwb25zZSkgPyByZXNwb25zZSA6IFtdO1xuICAgIH0sXG4gICAgZW5hYmxlZDogISFzZWxlY3RlZFJlc2lkZW5jZUlkLFxuICB9KTtcblxuICAvLyBGZXRjaCBidWlsZGluZyBjb250YWN0cyAocmVhZC1vbmx5IGZvciByZXNpZGVudHMpXG4gIGNvbnN0IHsgZGF0YTogYnVpbGRpbmdDb250YWN0cyA9IFtdLCBpc0xvYWRpbmc6IGJ1aWxkaW5nQ29udGFjdHNMb2FkaW5nIH0gPSB1c2VRdWVyeSh7XG4gICAgcXVlcnlLZXk6IFsnL2FwaS9jb250YWN0cycsICdidWlsZGluZycsIHNlbGVjdGVkUmVzaWRlbmNlPy5idWlsZGluZ0lkXSxcbiAgICBxdWVyeUZuOiBhc3luYyAoKSA9PiB7XG4gICAgICBpZiAoIXNlbGVjdGVkUmVzaWRlbmNlPy5idWlsZGluZ0lkKSB7XG4gICAgICAgIHJldHVybiBbXTtcbiAgICAgIH1cbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgYXBpUmVxdWVzdChcbiAgICAgICAgJ0dFVCcsXG4gICAgICAgIGAvYXBpL2NvbnRhY3RzP2VudGl0eT1idWlsZGluZyZlbnRpdHlJZD0ke3NlbGVjdGVkUmVzaWRlbmNlLmJ1aWxkaW5nSWR9YFxuICAgICAgKTtcbiAgICAgIHJldHVybiBBcnJheS5pc0FycmF5KHJlc3BvbnNlKSA/IHJlc3BvbnNlIDogW107XG4gICAgfSxcbiAgICBlbmFibGVkOiAhIXNlbGVjdGVkUmVzaWRlbmNlPy5idWlsZGluZ0lkLFxuICB9KTtcblxuICAvLyBNdXRhdGlvbnMgZm9yIGNvbnRhY3QgbWFuYWdlbWVudFxuICBjb25zdCBhZGRDb250YWN0TXV0YXRpb24gPSB1c2VNdXRhdGlvbih7XG4gICAgbXV0YXRpb25GbjogKGRhdGE6IENvbnRhY3RGb3JtRGF0YSkgPT5cbiAgICAgIGFwaVJlcXVlc3QoJ1BPU1QnLCAnL2FwaS9jb250YWN0cycsIHtcbiAgICAgICAgLi4uZGF0YSxcbiAgICAgICAgcmVzaWRlbmNlSWQ6IHNlbGVjdGVkUmVzaWRlbmNlSWQsXG4gICAgICB9KSxcbiAgICBvblN1Y2Nlc3M6ICgpID0+IHtcbiAgICAgIHF1ZXJ5Q2xpZW50LmludmFsaWRhdGVRdWVyaWVzKHsgcXVlcnlLZXk6IFsnL2FwaS9jb250YWN0cycsIHNlbGVjdGVkUmVzaWRlbmNlSWRdIH0pO1xuICAgICAgc2V0SXNDb250YWN0RGlhbG9nT3BlbihmYWxzZSk7XG4gICAgICBzZXRFZGl0aW5nQ29udGFjdChudWxsKTtcbiAgICAgIGNvbnRhY3RGb3JtLnJlc2V0KCk7XG4gICAgICB0b2FzdCh7XG4gICAgICAgIHRpdGxlOiAnQ29udGFjdCBhZGRlZCBzdWNjZXNzZnVsbHknLFxuICAgICAgICBkZXNjcmlwdGlvbjogJ1RoZSBuZXcgY29udGFjdCBoYXMgYmVlbiBhZGRlZCB0byB0aGlzIHJlc2lkZW5jZS4nLFxuICAgICAgfSk7XG4gICAgfSxcbiAgICBvbkVycm9yOiAoZXJyb3I6IGFueSkgPT4ge1xuICAgICAgdG9hc3Qoe1xuICAgICAgICB0aXRsZTogJ0ZhaWxlZCB0byBhZGQgY29udGFjdCcsXG4gICAgICAgIGRlc2NyaXB0aW9uOiBlcnJvci5tZXNzYWdlIHx8ICdTb21ldGhpbmcgd2VudCB3cm9uZycsXG4gICAgICAgIHZhcmlhbnQ6ICdkZXN0cnVjdGl2ZScsXG4gICAgICB9KTtcbiAgICB9LFxuICB9KTtcblxuICBjb25zdCB1cGRhdGVDb250YWN0TXV0YXRpb24gPSB1c2VNdXRhdGlvbih7XG4gICAgbXV0YXRpb25GbjogKGRhdGE6IENvbnRhY3RGb3JtRGF0YSkgPT5cbiAgICAgIGFwaVJlcXVlc3QoJ1BBVENIJywgYC9hcGkvY29udGFjdHMvJHtlZGl0aW5nQ29udGFjdD8uaWR9YCwgZGF0YSksXG4gICAgb25TdWNjZXNzOiAoKSA9PiB7XG4gICAgICBxdWVyeUNsaWVudC5pbnZhbGlkYXRlUXVlcmllcyh7IHF1ZXJ5S2V5OiBbJy9hcGkvY29udGFjdHMnLCBzZWxlY3RlZFJlc2lkZW5jZUlkXSB9KTtcbiAgICAgIHNldElzQ29udGFjdERpYWxvZ09wZW4oZmFsc2UpO1xuICAgICAgc2V0RWRpdGluZ0NvbnRhY3QobnVsbCk7XG4gICAgICBjb250YWN0Rm9ybS5yZXNldCgpO1xuICAgICAgdG9hc3Qoe1xuICAgICAgICB0aXRsZTogJ0NvbnRhY3QgdXBkYXRlZCBzdWNjZXNzZnVsbHknLFxuICAgICAgICBkZXNjcmlwdGlvbjogJ1RoZSBjb250YWN0IGluZm9ybWF0aW9uIGhhcyBiZWVuIHVwZGF0ZWQuJyxcbiAgICAgIH0pO1xuICAgIH0sXG4gICAgb25FcnJvcjogKGVycm9yOiBhbnkpID0+IHtcbiAgICAgIHRvYXN0KHtcbiAgICAgICAgdGl0bGU6ICdGYWlsZWQgdG8gdXBkYXRlIGNvbnRhY3QnLFxuICAgICAgICBkZXNjcmlwdGlvbjogZXJyb3IubWVzc2FnZSB8fCAnU29tZXRoaW5nIHdlbnQgd3JvbmcnLFxuICAgICAgICB2YXJpYW50OiAnZGVzdHJ1Y3RpdmUnLFxuICAgICAgfSk7XG4gICAgfSxcbiAgfSk7XG5cbiAgY29uc3QgZGVsZXRlQ29udGFjdE11dGF0aW9uID0gdXNlTXV0YXRpb24oe1xuICAgIG11dGF0aW9uRm46IChjb250YWN0SWQ6IHN0cmluZykgPT4gYXBpUmVxdWVzdCgnREVMRVRFJywgYC9hcGkvY29udGFjdHMvJHtjb250YWN0SWR9YCksXG4gICAgb25TdWNjZXNzOiAoKSA9PiB7XG4gICAgICBxdWVyeUNsaWVudC5pbnZhbGlkYXRlUXVlcmllcyh7IHF1ZXJ5S2V5OiBbJy9hcGkvY29udGFjdHMnLCBzZWxlY3RlZFJlc2lkZW5jZUlkXSB9KTtcbiAgICAgIHRvYXN0KHtcbiAgICAgICAgdGl0bGU6ICdDb250YWN0IGRlbGV0ZWQgc3VjY2Vzc2Z1bGx5JyxcbiAgICAgICAgZGVzY3JpcHRpb246ICdUaGUgY29udGFjdCBoYXMgYmVlbiByZW1vdmVkLicsXG4gICAgICB9KTtcbiAgICB9LFxuICAgIG9uRXJyb3I6IChlcnJvcjogYW55KSA9PiB7XG4gICAgICB0b2FzdCh7XG4gICAgICAgIHRpdGxlOiAnRmFpbGVkIHRvIGRlbGV0ZSBjb250YWN0JyxcbiAgICAgICAgZGVzY3JpcHRpb246IGVycm9yLm1lc3NhZ2UgfHwgJ1NvbWV0aGluZyB3ZW50IHdyb25nJyxcbiAgICAgICAgdmFyaWFudDogJ2Rlc3RydWN0aXZlJyxcbiAgICAgIH0pO1xuICAgIH0sXG4gIH0pO1xuXG4gIGNvbnN0IGhhbmRsZUFkZENvbnRhY3QgPSAoZGF0YTogQ29udGFjdEZvcm1EYXRhKSA9PiB7XG4gICAgaWYgKGVkaXRpbmdDb250YWN0KSB7XG4gICAgICB1cGRhdGVDb250YWN0TXV0YXRpb24ubXV0YXRlKGRhdGEpO1xuICAgIH0gZWxzZSB7XG4gICAgICBhZGRDb250YWN0TXV0YXRpb24ubXV0YXRlKGRhdGEpO1xuICAgIH1cbiAgfTtcblxuICBjb25zdCBoYW5kbGVFZGl0Q29udGFjdCA9IChjb250YWN0OiBDb250YWN0KSA9PiB7XG4gICAgc2V0RWRpdGluZ0NvbnRhY3QoY29udGFjdCk7XG4gICAgY29udGFjdEZvcm0ucmVzZXQoe1xuICAgICAgZmlyc3ROYW1lOiBjb250YWN0LmZpcnN0TmFtZSxcbiAgICAgIGxhc3ROYW1lOiBjb250YWN0Lmxhc3ROYW1lLFxuICAgICAgZW1haWw6IGNvbnRhY3QuZW1haWwsXG4gICAgICBwaG9uZTogY29udGFjdC5waG9uZSB8fCAnJyxcbiAgICAgIHR5cGU6IGNvbnRhY3QudHlwZSBhcyBhbnksXG4gICAgfSk7XG4gICAgc2V0SXNDb250YWN0RGlhbG9nT3Blbih0cnVlKTtcbiAgfTtcblxuICBjb25zdCBoYW5kbGVEZWxldGVDb250YWN0ID0gKGNvbnRhY3Q6IENvbnRhY3QpID0+IHtcbiAgICBpZiAoY29uZmlybSgnQXJlIHlvdSBzdXJlIHlvdSB3YW50IHRvIGRlbGV0ZSB0aGlzIGNvbnRhY3Q/JykpIHtcbiAgICAgIGRlbGV0ZUNvbnRhY3RNdXRhdGlvbi5tdXRhdGUoY29udGFjdC5pZCk7XG4gICAgfVxuICB9O1xuXG4gIGlmIChpc0xvYWRpbmcpIHtcbiAgICByZXR1cm4gKFxuICAgICAgPGRpdiBjbGFzc05hbWU9J2ZsZXgtMSBmbGV4IGZsZXgtY29sIG92ZXJmbG93LWhpZGRlbic+XG4gICAgICAgIDxIZWFkZXJcbiAgICAgICAgICB0aXRsZT17dCgnbXlSZXNpZGVuY2UnKX1cbiAgICAgICAgICBzdWJ0aXRsZT17dCgndmlld1Jlc2lkZW5jZUluZm8nKX1cbiAgICAgICAgLz5cblxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT0nZmxleC0xIGZsZXggaXRlbXMtY2VudGVyIGp1c3RpZnktY2VudGVyJz5cbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0ndGV4dC1jZW50ZXInPlxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9J2FuaW1hdGUtc3BpbiByb3VuZGVkLWZ1bGwgaC04IHctOCBib3JkZXItYi0yIGJvcmRlci1ncmF5LTkwMCBteC1hdXRvIG1iLTQnPjwvZGl2PlxuICAgICAgICAgICAgPHAgY2xhc3NOYW1lPSd0ZXh0LWdyYXktNjAwJz57dCgnbG9hZGluZycpfTwvcD5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgPC9kaXY+XG4gICAgICA8L2Rpdj5cbiAgICApO1xuICB9XG5cbiAgaWYgKGZpbHRlcmVkUmVzaWRlbmNlcy5sZW5ndGggPT09IDApIHtcbiAgICByZXR1cm4gKFxuICAgICAgPGRpdiBjbGFzc05hbWU9J2ZsZXgtMSBmbGV4IGZsZXgtY29sIG92ZXJmbG93LWhpZGRlbic+XG4gICAgICAgIDxIZWFkZXJcbiAgICAgICAgICB0aXRsZT17dCgnbXlSZXNpZGVuY2UnKX1cbiAgICAgICAgICBzdWJ0aXRsZT17dCgndmlld1Jlc2lkZW5jZUluZm8nKX1cbiAgICAgICAgLz5cblxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT0nZmxleC0xIGZsZXggaXRlbXMtY2VudGVyIGp1c3RpZnktY2VudGVyIHAtNic+XG4gICAgICAgICAgPE5vRGF0YUNhcmRcbiAgICAgICAgICAgIGljb249e0hvbWV9XG4gICAgICAgICAgICB0aXRsZUtleT1cIm5vUmVzaWRlbmNlc0ZvdW5kXCJcbiAgICAgICAgICAgIGRlc2NyaXB0aW9uS2V5PXt1c2VyPy5yb2xlICYmIFsnYWRtaW4nLCAnbWFuYWdlciddLmluY2x1ZGVzKHVzZXIucm9sZSlcbiAgICAgICAgICAgICAgPyAnbm9SZXNpZGVuY2VzRm91bmRPcmcnXG4gICAgICAgICAgICAgIDogJ25vdEFzc2lnbmVkUmVzaWRlbmNlcyd9XG4gICAgICAgICAgICB0ZXN0SWQ9XCJuby1yZXNpZGVuY2VzLW1lc3NhZ2VcIlxuICAgICAgICAgIC8+XG4gICAgICAgIDwvZGl2PlxuICAgICAgPC9kaXY+XG4gICAgKTtcbiAgfVxuXG4gIHJldHVybiAoXG4gICAgPGRpdiBjbGFzc05hbWU9J2ZsZXgtMSBmbGV4IGZsZXgtY29sIG92ZXJmbG93LWhpZGRlbic+XG4gICAgICA8SGVhZGVyXG4gICAgICAgIHRpdGxlPXt0KCdteVJlc2lkZW5jZScpfVxuICAgICAgICBzdWJ0aXRsZT17dCgnbXlSZXNpZGVuY2VJbmZvJyl9XG4gICAgICAvPlxuXG4gICAgICA8ZGl2IGNsYXNzTmFtZT0nZmxleC0xIG92ZXJmbG93LWF1dG8gcC02Jz5cbiAgICAgICAgPGRpdiBjbGFzc05hbWU9J21heC13LTd4bCBteC1hdXRvIHNwYWNlLXktNic+XG4gICAgICAgICAgey8qIEJ1aWxkaW5nIGFuZCBSZXNpZGVuY2UgRmlsdGVycyAqL31cbiAgICAgICAgICB7KGJ1aWxkaW5ncy5sZW5ndGggPiAxIHx8IGZpbHRlcmVkUmVzaWRlbmNlcy5sZW5ndGggPiAxKSAmJiAoXG4gICAgICAgICAgICA8Q2FyZD5cbiAgICAgICAgICAgICAgPENhcmRIZWFkZXI+XG4gICAgICAgICAgICAgICAgPENhcmRUaXRsZSBjbGFzc05hbWU9J2ZsZXggaXRlbXMtY2VudGVyIGdhcC0yJz5cbiAgICAgICAgICAgICAgICAgIDxIb21lIGNsYXNzTmFtZT0ndy01IGgtNScgLz5cbiAgICAgICAgICAgICAgICAgIFNlbGVjdCBSZXNpZGVuY2VcbiAgICAgICAgICAgICAgICA8L0NhcmRUaXRsZT5cbiAgICAgICAgICAgICAgPC9DYXJkSGVhZGVyPlxuICAgICAgICAgICAgICA8Q2FyZENvbnRlbnQ+XG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9J2ZsZXggZmxleC1jb2wgbWQ6ZmxleC1yb3cgZ2FwLTQnPlxuICAgICAgICAgICAgICAgICAgey8qIEJ1aWxkaW5nIEZpbHRlciAoaWYgdXNlciBoYXMgbXVsdGlwbGUgYnVpbGRpbmdzKSAqL31cbiAgICAgICAgICAgICAgICAgIHtidWlsZGluZ3MubGVuZ3RoID4gMSAmJiAoXG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSdmbGV4LTEnPlxuICAgICAgICAgICAgICAgICAgICAgIDxMYWJlbCBjbGFzc05hbWU9J3RleHQtc20gZm9udC1tZWRpdW0gbWItMiBibG9jayc+e3QoJ2J1aWxkaW5nMicpfTwvTGFiZWw+XG4gICAgICAgICAgICAgICAgICAgICAgPFNlbGVjdFxuICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU9e3NlbGVjdGVkQnVpbGRpbmdJZH1cbiAgICAgICAgICAgICAgICAgICAgICAgIG9uVmFsdWVDaGFuZ2U9eyh2YWx1ZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRTZWxlY3RlZEJ1aWxkaW5nSWQodmFsdWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRTZWxlY3RlZFJlc2lkZW5jZUlkKCcnKTsgLy8gUmVzZXQgcmVzaWRlbmNlIHNlbGVjdGlvbiB3aGVuIGJ1aWxkaW5nIGNoYW5nZXNcbiAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgPFNlbGVjdFRyaWdnZXIgY2xhc3NOYW1lPSd3LWZ1bGwnPlxuICAgICAgICAgICAgICAgICAgICAgICAgICA8U2VsZWN0VmFsdWUgcGxhY2Vob2xkZXI9e3QoJ3NlbGVjdEFCdWlsZGluZycpfSAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgPC9TZWxlY3RUcmlnZ2VyPlxuICAgICAgICAgICAgICAgICAgICAgICAgPFNlbGVjdENvbnRlbnQ+XG4gICAgICAgICAgICAgICAgICAgICAgICAgIDxTZWxlY3RJdGVtIHZhbHVlPVwiYWxsXCI+e3QoJ2FsbEJ1aWxkaW5ncycpfTwvU2VsZWN0SXRlbT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAge2J1aWxkaW5ncy5tYXAoKGJ1aWxkaW5nOiBhbnkpID0+IChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8U2VsZWN0SXRlbSBrZXk9e2J1aWxkaW5nLmlkfSB2YWx1ZT17YnVpbGRpbmcuaWR9PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2J1aWxkaW5nLm5hbWV9IC0ge2J1aWxkaW5nLmFkZHJlc3N9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9TZWxlY3RJdGVtPlxuICAgICAgICAgICAgICAgICAgICAgICAgICApKX1cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvU2VsZWN0Q29udGVudD5cbiAgICAgICAgICAgICAgICAgICAgICA8L1NlbGVjdD5cbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICApfVxuXG4gICAgICAgICAgICAgICAgICB7LyogUmVzaWRlbmNlIEZpbHRlciAqL31cbiAgICAgICAgICAgICAgICAgIHtmaWx0ZXJlZFJlc2lkZW5jZXMubGVuZ3RoID4gMSAmJiAoXG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSdmbGV4LTEnPlxuICAgICAgICAgICAgICAgICAgICAgIDxMYWJlbCBjbGFzc05hbWU9J3RleHQtc20gZm9udC1tZWRpdW0gbWItMiBibG9jayc+XG4gICAgICAgICAgICAgICAgICAgICAgICB7dCgnc2VsZWN0UmVzaWRlbmNlJyl9XG4gICAgICAgICAgICAgICAgICAgICAgPC9MYWJlbD5cbiAgICAgICAgICAgICAgICAgICAgICA8U2VsZWN0IHZhbHVlPXtzZWxlY3RlZFJlc2lkZW5jZUlkfSBvblZhbHVlQ2hhbmdlPXtzZXRTZWxlY3RlZFJlc2lkZW5jZUlkfT5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxTZWxlY3RUcmlnZ2VyIGNsYXNzTmFtZT0ndy1mdWxsJz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPFNlbGVjdFZhbHVlIHBsYWNlaG9sZGVyPXt0KCdzZWxlY3RBUmVzaWRlbmNlJyl9IC8+XG4gICAgICAgICAgICAgICAgICAgICAgICA8L1NlbGVjdFRyaWdnZXI+XG4gICAgICAgICAgICAgICAgICAgICAgICA8U2VsZWN0Q29udGVudD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAge2ZpbHRlcmVkUmVzaWRlbmNlcy5tYXAoKHJlc2lkZW5jZSkgPT4gKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxTZWxlY3RJdGVtIGtleT17cmVzaWRlbmNlLmlkfSB2YWx1ZT17cmVzaWRlbmNlLmlkfT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHt0KCd1bml0Jyl9IHtyZXNpZGVuY2UudW5pdE51bWJlcn0gLSB7cmVzaWRlbmNlLmJ1aWxkaW5nPy5uYW1lIHx8ICdOL0EnfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvU2VsZWN0SXRlbT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgKSl9XG4gICAgICAgICAgICAgICAgICAgICAgICA8L1NlbGVjdENvbnRlbnQ+XG4gICAgICAgICAgICAgICAgICAgICAgPC9TZWxlY3Q+XG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgPC9DYXJkQ29udGVudD5cbiAgICAgICAgICAgIDwvQ2FyZD5cbiAgICAgICAgICApfVxuXG4gICAgICAgICAgey8qIFJlc2lkZW5jZSBDYXJkcyAqL31cbiAgICAgICAgICB7Y3VycmVudFJlc2lkZW5jZXMubGVuZ3RoID4gMCAmJiAoXG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0nZ3JpZCBncmlkLWNvbHMtMSBtZDpncmlkLWNvbHMtMiBsZzpncmlkLWNvbHMtMyBnYXAtNic+XG4gICAgICAgICAgICAgIHtjdXJyZW50UmVzaWRlbmNlcy5tYXAoKHJlc2lkZW5jZSkgPT4gKFxuICAgICAgICAgICAgICAgIDxDYXJkIGtleT17cmVzaWRlbmNlLmlkfSBjbGFzc05hbWU9J2hvdmVyOnNoYWRvdy1sZyB0cmFuc2l0aW9uLXNoYWRvdyc+XG4gICAgICAgICAgICAgICAgICA8Q2FyZEhlYWRlcj5cbiAgICAgICAgICAgICAgICAgICAgPENhcmRUaXRsZSBjbGFzc05hbWU9J2ZsZXggaXRlbXMtY2VudGVyIGdhcC0yJz5cbiAgICAgICAgICAgICAgICAgICAgICA8SG9tZSBjbGFzc05hbWU9J3ctNSBoLTUnIC8+XG4gICAgICAgICAgICAgICAgICAgICAge3QoJ3VuaXQnKX0ge3Jlc2lkZW5jZS51bml0TnVtYmVyfVxuICAgICAgICAgICAgICAgICAgICA8L0NhcmRUaXRsZT5cbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9J3RleHQtc20gdGV4dC1ncmF5LTYwMCc+XG4gICAgICAgICAgICAgICAgICAgICAge3Jlc2lkZW5jZS5idWlsZGluZz8ubmFtZSB8fCB0KCdidWlsZGluZ0luZm9VbmF2YWlsYWJsZScpfVxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgIDwvQ2FyZEhlYWRlcj5cbiAgICAgICAgICAgICAgICAgIDxDYXJkQ29udGVudCBjbGFzc05hbWU9J3NwYWNlLXktNCc+XG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSdncmlkIGdyaWQtY29scy0xIGdhcC0zJz5cbiAgICAgICAgICAgICAgICAgICAgICA8ZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgPExhYmVsIGNsYXNzTmFtZT0ndGV4dC14cyBmb250LW1lZGl1bSB0ZXh0LWdyYXktNTAwJz57dCgnYWRkcmVzcycpfTwvTGFiZWw+XG4gICAgICAgICAgICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9J3RleHQtc20gdGV4dC1ncmF5LTcwMCc+XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHtyZXNpZGVuY2UuYnVpbGRpbmc/LmFkZHJlc3MgfHwgdCgnYWRkcmVzc1VuYXZhaWxhYmxlJyl9XG4gICAgICAgICAgICAgICAgICAgICAgICA8L3A+XG4gICAgICAgICAgICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9J3RleHQtc20gdGV4dC1ncmF5LTcwMCc+XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHtyZXNpZGVuY2UuYnVpbGRpbmc/LmNpdHkgfHwgJ04vQSd9LHsnICd9XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHtyZXNpZGVuY2UuYnVpbGRpbmc/LnByb3ZpbmNlIHx8ICdOL0EnfXsnICd9XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHtyZXNpZGVuY2UuYnVpbGRpbmc/LnBvc3RhbENvZGUgfHwgJyd9XG4gICAgICAgICAgICAgICAgICAgICAgICA8L3A+XG4gICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG5cbiAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0nZ3JpZCBncmlkLWNvbHMtMiBnYXAtMyc+XG4gICAgICAgICAgICAgICAgICAgICAgICB7cmVzaWRlbmNlLmZsb29yICYmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8TGFiZWwgY2xhc3NOYW1lPSd0ZXh0LXhzIGZvbnQtbWVkaXVtIHRleHQtZ3JheS01MDAnPnt0KCdmbG9vcicpfTwvTGFiZWw+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPSd0ZXh0LXNtIHRleHQtZ3JheS03MDAnPntyZXNpZGVuY2UuZmxvb3J9PC9wPlxuICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgICAgICB7cmVzaWRlbmNlLnNxdWFyZUZvb3RhZ2UgJiYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxMYWJlbCBjbGFzc05hbWU9J3RleHQteHMgZm9udC1tZWRpdW0gdGV4dC1ncmF5LTUwMCc+e3QoJ3NxRnQnKX08L0xhYmVsPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT0ndGV4dC1zbSB0ZXh0LWdyYXktNzAwJz57cmVzaWRlbmNlLnNxdWFyZUZvb3RhZ2V9PC9wPlxuICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgICAgICB7cmVzaWRlbmNlLmJlZHJvb21zICYmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8TGFiZWwgY2xhc3NOYW1lPSd0ZXh0LXhzIGZvbnQtbWVkaXVtIHRleHQtZ3JheS01MDAnPnt0KCdiZWRyb29tcycpfTwvTGFiZWw+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9J2ZsZXggaXRlbXMtY2VudGVyIGdhcC0xJz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxCZWQgY2xhc3NOYW1lPSd3LTMgaC0zJyAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPSd0ZXh0LXNtIHRleHQtZ3JheS03MDAnPntyZXNpZGVuY2UuYmVkcm9vbXN9PC9zcGFuPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgICAgICB7cmVzaWRlbmNlLmJhdGhyb29tcyAmJiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPExhYmVsIGNsYXNzTmFtZT0ndGV4dC14cyBmb250LW1lZGl1bSB0ZXh0LWdyYXktNTAwJz57dCgnYmF0aHJvb21zJyl9PC9MYWJlbD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0nZmxleCBpdGVtcy1jZW50ZXIgZ2FwLTEnPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPEJhdGggY2xhc3NOYW1lPSd3LTMgaC0zJyAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPSd0ZXh0LXNtIHRleHQtZ3JheS03MDAnPntyZXNpZGVuY2UuYmF0aHJvb21zfTwvc3Bhbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuXG4gICAgICAgICAgICAgICAgICAgICAge3Jlc2lkZW5jZS5wYXJraW5nU3BhY2VOdW1iZXJzICYmXG4gICAgICAgICAgICAgICAgICAgICAgICByZXNpZGVuY2UucGFya2luZ1NwYWNlTnVtYmVycy5sZW5ndGggPiAwICYmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8TGFiZWwgY2xhc3NOYW1lPSd0ZXh0LXhzIGZvbnQtbWVkaXVtIHRleHQtZ3JheS01MDAnPnt0KCdwYXJraW5nJyl9PC9MYWJlbD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0nZmxleCBpdGVtcy1jZW50ZXIgZ2FwLTEnPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPENhciBjbGFzc05hbWU9J3ctMyBoLTMnIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9J3RleHQtc20gdGV4dC1ncmF5LTcwMCc+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtyZXNpZGVuY2UucGFya2luZ1NwYWNlTnVtYmVycy5qb2luKCcsICcpfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9zcGFuPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICl9XG5cbiAgICAgICAgICAgICAgICAgICAgICB7cmVzaWRlbmNlLnN0b3JhZ2VTcGFjZU51bWJlcnMgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc2lkZW5jZS5zdG9yYWdlU3BhY2VOdW1iZXJzLmxlbmd0aCA+IDAgJiYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxMYWJlbCBjbGFzc05hbWU9J3RleHQteHMgZm9udC1tZWRpdW0gdGV4dC1ncmF5LTUwMCc+e3QoJ3N0b3JhZ2UnKX08L0xhYmVsPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSdmbGV4IGl0ZW1zLWNlbnRlciBnYXAtMSc+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8UGFja2FnZSBjbGFzc05hbWU9J3ctMyBoLTMnIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9J3RleHQtc20gdGV4dC1ncmF5LTcwMCc+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtyZXNpZGVuY2Uuc3RvcmFnZVNwYWNlTnVtYmVycy5qb2luKCcsICcpfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9zcGFuPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuXG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSdmbGV4IGZsZXgtY29sIGdhcC0yIHB0LTQgYm9yZGVyLXQnPlxuICAgICAgICAgICAgICAgICAgICAgIDxMaW5rIGhyZWY9e2AvcmVzaWRlbnRzL3Jlc2lkZW5jZXMvJHtyZXNpZGVuY2UuaWR9L2RvY3VtZW50c2B9PlxuICAgICAgICAgICAgICAgICAgICAgICAgPEJ1dHRvbiB2YXJpYW50PSdvdXRsaW5lJyBzaXplPSdzbScgY2xhc3NOYW1lPSd3LWZ1bGwganVzdGlmeS1zdGFydCc+XG4gICAgICAgICAgICAgICAgICAgICAgICAgIDxGaWxlVGV4dCBjbGFzc05hbWU9J3ctNCBoLTQgbXItMicgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAge3QoJ3Jlc2lkZW5jZURvY3VtZW50c0J1dHRvbicpfVxuICAgICAgICAgICAgICAgICAgICAgICAgPC9CdXR0b24+XG4gICAgICAgICAgICAgICAgICAgICAgPC9MaW5rPlxuICAgICAgICAgICAgICAgICAgICAgIDxMaW5rIGhyZWY9e2AvcmVzaWRlbnRzL2J1aWxkaW5ncy8ke3Jlc2lkZW5jZS5idWlsZGluZ0lkfS9kb2N1bWVudHNgfT5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxCdXR0b24gdmFyaWFudD0nb3V0bGluZScgc2l6ZT0nc20nIGNsYXNzTmFtZT0ndy1mdWxsIGp1c3RpZnktc3RhcnQnPlxuICAgICAgICAgICAgICAgICAgICAgICAgICA8QnVpbGRpbmcgY2xhc3NOYW1lPSd3LTQgaC00IG1yLTInIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHt0KCdidWlsZGluZ0RvY3VtZW50c0J1dHRvbicpfVxuICAgICAgICAgICAgICAgICAgICAgICAgPC9CdXR0b24+XG4gICAgICAgICAgICAgICAgICAgICAgPC9MaW5rPlxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgIDwvQ2FyZENvbnRlbnQ+XG4gICAgICAgICAgICAgICAgPC9DYXJkPlxuICAgICAgICAgICAgICApKX1cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICl9XG5cbiAgICAgICAgICB7LyogUGFnaW5hdGlvbiAqL31cbiAgICAgICAgICB7dG90YWxQYWdlcyA+IDEgJiYgKFxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9J2ZsZXggaXRlbXMtY2VudGVyIGp1c3RpZnktY2VudGVyIGdhcC0yIG10LTgnPlxuICAgICAgICAgICAgICA8QnV0dG9uXG4gICAgICAgICAgICAgICAgdmFyaWFudD0nb3V0bGluZSdcbiAgICAgICAgICAgICAgICBzaXplPSdzbSdcbiAgICAgICAgICAgICAgICBvbkNsaWNrPXtoYW5kbGVQcmV2aW91c1BhZ2V9XG4gICAgICAgICAgICAgICAgZGlzYWJsZWQ9e2N1cnJlbnRQYWdlID09PSAxfVxuICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgPENoZXZyb25MZWZ0IGNsYXNzTmFtZT0naC00IHctNCcgLz5cbiAgICAgICAgICAgICAgICB7dCgncHJldmlvdXMnKX1cbiAgICAgICAgICAgICAgPC9CdXR0b24+XG5cbiAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9J2ZsZXggZ2FwLTEnPlxuICAgICAgICAgICAgICAgIHtBcnJheS5mcm9tKHsgbGVuZ3RoOiBNYXRoLm1pbig1LCB0b3RhbFBhZ2VzKSB9LCAoXywgaSkgPT4ge1xuICAgICAgICAgICAgICAgICAgbGV0IHBhZ2VOdW07XG4gICAgICAgICAgICAgICAgICBpZiAodG90YWxQYWdlcyA8PSA1KSB7XG4gICAgICAgICAgICAgICAgICAgIHBhZ2VOdW0gPSBpICsgMTtcbiAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoY3VycmVudFBhZ2UgPD0gMykge1xuICAgICAgICAgICAgICAgICAgICBwYWdlTnVtID0gaSArIDE7XG4gICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGN1cnJlbnRQYWdlID49IHRvdGFsUGFnZXMgLSAyKSB7XG4gICAgICAgICAgICAgICAgICAgIHBhZ2VOdW0gPSB0b3RhbFBhZ2VzIC0gNCArIGk7XG4gICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBwYWdlTnVtID0gY3VycmVudFBhZ2UgLSAyICsgaTtcbiAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgICAgICAgICAgPEJ1dHRvblxuICAgICAgICAgICAgICAgICAgICAgIGtleT17cGFnZU51bX1cbiAgICAgICAgICAgICAgICAgICAgICB2YXJpYW50PXtjdXJyZW50UGFnZSA9PT0gcGFnZU51bSA/ICdkZWZhdWx0JyA6ICdvdXRsaW5lJ31cbiAgICAgICAgICAgICAgICAgICAgICBzaXplPSdzbSdcbiAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiBoYW5kbGVQYWdlQ2xpY2socGFnZU51bSl9XG4gICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICB7cGFnZU51bX1cbiAgICAgICAgICAgICAgICAgICAgPC9CdXR0b24+XG4gICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgIH0pfVxuICAgICAgICAgICAgICA8L2Rpdj5cblxuICAgICAgICAgICAgICA8QnV0dG9uXG4gICAgICAgICAgICAgICAgdmFyaWFudD0nb3V0bGluZSdcbiAgICAgICAgICAgICAgICBzaXplPSdzbSdcbiAgICAgICAgICAgICAgICBvbkNsaWNrPXtoYW5kbGVOZXh0UGFnZX1cbiAgICAgICAgICAgICAgICBkaXNhYmxlZD17Y3VycmVudFBhZ2UgPT09IHRvdGFsUGFnZXN9XG4gICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICB7dCgnbmV4dCcpfVxuICAgICAgICAgICAgICAgIDxDaGV2cm9uUmlnaHQgY2xhc3NOYW1lPSdoLTQgdy00JyAvPlxuICAgICAgICAgICAgICA8L0J1dHRvbj5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICl9XG5cbiAgICAgICAgICB7LyogUGFnZSBpbmZvICovfVxuICAgICAgICAgIHtmaWx0ZXJlZFJlc2lkZW5jZXMubGVuZ3RoID4gMCAmJiAoXG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0ndGV4dC1jZW50ZXIgdGV4dC1zbSB0ZXh0LW11dGVkLWZvcmVncm91bmQgbXQtNCc+XG4gICAgICAgICAgICAgIHt0KCdzaG93aW5nJyl9IHtzdGFydEluZGV4ICsgMX0gdG8ge01hdGgubWluKGVuZEluZGV4LCBmaWx0ZXJlZFJlc2lkZW5jZXMubGVuZ3RoKX0gb2Z7JyAnfVxuICAgICAgICAgICAgICB7ZmlsdGVyZWRSZXNpZGVuY2VzLmxlbmd0aH0ge3QoJ3Jlc2lkZW5jZXMnKX1cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICl9XG4gICAgICAgIDwvZGl2PlxuICAgICAgPC9kaXY+XG4gICAgPC9kaXY+XG4gICk7XG59XG4iXSwidmVyc2lvbiI6M30=