ef86d4664f129f1862d71ca5f39abbc9
"use strict";
var __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {
    if (k2 === undefined) k2 = k;
    var desc = Object.getOwnPropertyDescriptor(m, k);
    if (!desc || ("get" in desc ? !m.__esModule : desc.writable || desc.configurable)) {
      desc = { enumerable: true, get: function() { return m[k]; } };
    }
    Object.defineProperty(o, k2, desc);
}) : (function(o, m, k, k2) {
    if (k2 === undefined) k2 = k;
    o[k2] = m[k];
}));
var __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {
    Object.defineProperty(o, "default", { enumerable: true, value: v });
}) : function(o, v) {
    o["default"] = v;
});
var __importStar = (this && this.__importStar) || (function () {
    var ownKeys = function(o) {
        ownKeys = Object.getOwnPropertyNames || function (o) {
            var ar = [];
            for (var k in o) if (Object.prototype.hasOwnProperty.call(o, k)) ar[ar.length] = k;
            return ar;
        };
        return ownKeys(o);
    };
    return function (mod) {
        if (mod && mod.__esModule) return mod;
        var result = {};
        if (mod != null) for (var k = ownKeys(mod), i = 0; i < k.length; i++) if (k[i] !== "default") __createBinding(result, mod, k[i]);
        __setModuleDefault(result, mod);
        return result;
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
exports.DocumentEditForm = DocumentEditForm;
const jsx_runtime_1 = require("react/jsx-runtime");
const react_1 = __importStar(require("react"));
const react_hook_form_1 = require("react-hook-form");
const zod_1 = require("@hookform/resolvers/zod");
const react_query_1 = require("@tanstack/react-query");
const zod_2 = require("zod");
const button_1 = require("@/components/ui/button");
const input_1 = require("@/components/ui/input");
const textarea_1 = require("@/components/ui/textarea");
const label_1 = require("@/components/ui/label");
const switch_1 = require("@/components/ui/switch");
const form_1 = require("@/components/ui/form");
const select_1 = require("@/components/ui/select");
const card_1 = require("@/components/ui/card");
const lucide_react_1 = require("lucide-react");
const use_toast_1 = require("@/hooks/use-toast");
const queryClient_1 = require("@/lib/queryClient");
const SharedUploader_1 = require("./SharedUploader");
// Document categories matching the ones used in DocumentCreateForm
const DOCUMENT_CATEGORIES = [
    { value: 'bylaw', label: 'Bylaws' },
    { value: 'financial', label: 'Financial' },
    { value: 'maintenance', label: 'Maintenance' },
    { value: 'legal', label: 'Legal' },
    { value: 'meeting_minutes', label: 'Meeting Minutes' },
    { value: 'insurance', label: 'Insurance' },
    { value: 'contracts', label: 'Contracts' },
    { value: 'permits', label: 'Permits' },
    { value: 'inspection', label: 'Inspection' },
    { value: 'other', label: 'Other' },
];
// Form schema for document editing
const documentEditSchema = zod_2.z.object({
    name: zod_2.z.string().min(1, 'Document name is required').max(255, 'Name must be less than 255 characters'),
    description: zod_2.z.string().max(1000, 'Description must be less than 1000 characters').optional(),
    category: zod_2.z.enum([
        'bylaw',
        'financial',
        'maintenance',
        'legal',
        'meeting_minutes',
        'insurance',
        'contracts',
        'permits',
        'inspection',
        'other'
    ]),
    isVisibleToTenants: zod_2.z.boolean().optional(),
});
function DocumentEditForm({ document, onSuccess, onCancel, }) {
    const { toast } = (0, use_toast_1.useToast)();
    const queryClient = (0, react_query_1.useQueryClient)();
    // State for file replacement
    const [selectedFile, setSelectedFile] = (0, react_1.useState)(null);
    const [textContent, setTextContent] = (0, react_1.useState)(null);
    const [isReplaceFile, setIsReplaceFile] = (0, react_1.useState)(false);
    // Upload context for secure storage
    const uploadContext = {
        type: document.buildingId ? 'buildings' : 'residences',
        buildingId: document.buildingId || undefined,
        residenceId: document.residenceId || undefined,
        userRole: 'admin', // This would be dynamic based on current user
        userId: 'current-user' // This would be dynamic based on current user
    };
    // Form setup with existing document data
    const form = (0, react_hook_form_1.useForm)({
        resolver: (0, zod_1.zodResolver)(documentEditSchema),
        defaultValues: {
            name: document.name || '',
            description: document.description || '',
            category: document.documentType || document.category || 'other',
            isVisibleToTenants: document.isVisibleToTenants || false,
        }
    });
    // Update document mutation
    const updateDocumentMutation = (0, react_query_1.useMutation)({
        mutationFn: async (data) => {
            const formData = new FormData();
            // Add document metadata
            formData.append('name', data.name);
            formData.append('documentType', data.category);
            if (data.description) {
                formData.append('description', data.description);
            }
            formData.append('isVisibleToTenants', data.isVisibleToTenants ? 'true' : 'false');
            // Add entity associations
            if (document.buildingId) {
                formData.append('buildingId', document.buildingId);
            }
            if (document.residenceId) {
                formData.append('residenceId', document.residenceId);
            }
            // Add file if replacing
            if (isReplaceFile && selectedFile) {
                formData.append('file', selectedFile);
            }
            else if (isReplaceFile && textContent) {
                // Handle text content creation
                const textBlob = new Blob([textContent], { type: 'text/plain' });
                const textFile = new File([textBlob], `${data.name}.txt`, { type: 'text/plain' });
                formData.append('file', textFile);
            }
            const response = await (0, queryClient_1.apiRequest)('PUT', `/api/documents/${document.id}`, {
                body: formData,
            });
            if (!response.ok) {
                const error = await response.json().catch(() => ({ message: 'Unknown error' }));
                throw new Error(error.message || 'Failed to update document');
            }
            return response.json();
        },
        onSuccess: (data) => {
            toast({
                title: 'Document updated',
                description: 'The document has been successfully updated.',
            });
            // Invalidate relevant queries
            queryClient.invalidateQueries({ queryKey: ['/api/documents'] });
            queryClient.invalidateQueries({ queryKey: ['/api/documents', document.id] });
            onSuccess();
        },
        onError: (error) => {
            toast({
                title: 'Update failed',
                description: error.message || 'Failed to update document. Please try again.',
                variant: 'destructive',
            });
        },
    });
    const onSubmit = (data) => {
        updateDocumentMutation.mutate(data);
    };
    const handleFileUpload = (file, textContent) => {
        setSelectedFile(file);
        setTextContent(textContent);
    };
    return ((0, jsx_runtime_1.jsxs)("div", { className: "max-w-2xl mx-auto space-y-6", children: [(0, jsx_runtime_1.jsxs)("div", { className: "flex items-center justify-between", children: [(0, jsx_runtime_1.jsxs)("div", { className: "flex items-center gap-2", children: [(0, jsx_runtime_1.jsx)(lucide_react_1.FileText, { className: "w-5 h-5 text-primary" }), (0, jsx_runtime_1.jsx)("h2", { className: "text-xl font-semibold", children: "Edit Document" })] }), (0, jsx_runtime_1.jsx)(button_1.Button, { variant: "ghost", size: "sm", onClick: onCancel, "data-testid": "button-cancel-edit", children: (0, jsx_runtime_1.jsx)(lucide_react_1.X, { className: "w-4 h-4" }) })] }), (0, jsx_runtime_1.jsx)(form_1.Form, { ...form, children: (0, jsx_runtime_1.jsxs)("form", { onSubmit: form.handleSubmit(onSubmit), className: "space-y-6", children: [(0, jsx_runtime_1.jsxs)(card_1.Card, { children: [(0, jsx_runtime_1.jsx)(card_1.CardHeader, { children: (0, jsx_runtime_1.jsx)(card_1.CardTitle, { className: "text-lg", children: "Document Information" }) }), (0, jsx_runtime_1.jsxs)(card_1.CardContent, { className: "space-y-4", children: [(0, jsx_runtime_1.jsx)(form_1.FormField, { control: form.control, name: "name", render: ({ field }) => ((0, jsx_runtime_1.jsxs)(form_1.FormItem, { children: [(0, jsx_runtime_1.jsx)(form_1.FormLabel, { children: "Document Name *" }), (0, jsx_runtime_1.jsx)(form_1.FormControl, { children: (0, jsx_runtime_1.jsx)(input_1.Input, { placeholder: "Enter document name", ...field, "data-testid": "input-document-name" }) }), (0, jsx_runtime_1.jsx)(form_1.FormMessage, {})] })) }), (0, jsx_runtime_1.jsx)(form_1.FormField, { control: form.control, name: "category", render: ({ field }) => ((0, jsx_runtime_1.jsxs)(form_1.FormItem, { children: [(0, jsx_runtime_1.jsx)(form_1.FormLabel, { children: "Category *" }), (0, jsx_runtime_1.jsxs)(select_1.Select, { onValueChange: field.onChange, value: field.value, children: [(0, jsx_runtime_1.jsx)(form_1.FormControl, { children: (0, jsx_runtime_1.jsx)(select_1.SelectTrigger, { "data-testid": "select-document-category", children: (0, jsx_runtime_1.jsx)(select_1.SelectValue, { placeholder: "Select a category" }) }) }), (0, jsx_runtime_1.jsx)(select_1.SelectContent, { children: DOCUMENT_CATEGORIES.map((category) => ((0, jsx_runtime_1.jsx)(select_1.SelectItem, { value: category.value, children: category.label }, category.value))) })] }), (0, jsx_runtime_1.jsx)(form_1.FormMessage, {})] })) }), (0, jsx_runtime_1.jsx)(form_1.FormField, { control: form.control, name: "description", render: ({ field }) => ((0, jsx_runtime_1.jsxs)(form_1.FormItem, { children: [(0, jsx_runtime_1.jsx)(form_1.FormLabel, { children: "Description" }), (0, jsx_runtime_1.jsx)(form_1.FormControl, { children: (0, jsx_runtime_1.jsx)(textarea_1.Textarea, { placeholder: "Enter document description (optional)", className: "resize-none", rows: 3, ...field, "data-testid": "input-document-description" }) }), (0, jsx_runtime_1.jsx)(form_1.FormDescription, { children: "Provide additional details about this document" }), (0, jsx_runtime_1.jsx)(form_1.FormMessage, {})] })) }), (0, jsx_runtime_1.jsx)(form_1.FormField, { control: form.control, name: "isVisibleToTenants", render: ({ field }) => ((0, jsx_runtime_1.jsxs)(form_1.FormItem, { className: "flex flex-row items-center justify-between rounded-lg border p-3 shadow-sm", children: [(0, jsx_runtime_1.jsxs)("div", { className: "space-y-0.5", children: [(0, jsx_runtime_1.jsx)(form_1.FormLabel, { className: "text-base", children: "Visible to Tenants" }), (0, jsx_runtime_1.jsx)(form_1.FormDescription, { children: "Allow tenants to view and download this document" })] }), (0, jsx_runtime_1.jsx)(form_1.FormControl, { children: (0, jsx_runtime_1.jsx)(switch_1.Switch, { checked: field.value || false, onCheckedChange: field.onChange, "data-testid": "switch-visible-to-tenants" }) })] })) })] })] }), (0, jsx_runtime_1.jsxs)(card_1.Card, { children: [(0, jsx_runtime_1.jsx)(card_1.CardHeader, { children: (0, jsx_runtime_1.jsx)(card_1.CardTitle, { className: "text-lg", children: "File Management" }) }), (0, jsx_runtime_1.jsxs)(card_1.CardContent, { className: "space-y-4", children: [document.filePath && ((0, jsx_runtime_1.jsx)("div", { className: "bg-gray-50 p-3 rounded-lg", children: (0, jsx_runtime_1.jsx)("div", { className: "flex items-center justify-between", children: (0, jsx_runtime_1.jsxs)("div", { children: [(0, jsx_runtime_1.jsx)("p", { className: "text-sm font-medium", children: "Current File" }), (0, jsx_runtime_1.jsx)("p", { className: "text-xs text-gray-600", children: document.fileName || document.name })] }) }) })), (0, jsx_runtime_1.jsxs)("div", { className: "flex items-center space-x-2", children: [(0, jsx_runtime_1.jsx)("input", { type: "checkbox", id: "replace-file", checked: isReplaceFile, onChange: (e) => setIsReplaceFile(e.target.checked), className: "rounded", "data-testid": "checkbox-replace-file" }), (0, jsx_runtime_1.jsx)(label_1.Label, { htmlFor: "replace-file", children: "Replace file" })] }), isReplaceFile && ((0, jsx_runtime_1.jsx)("div", { children: (0, jsx_runtime_1.jsx)(SharedUploader_1.SharedUploader, { context: uploadContext, onFileSelect: handleFileUpload, maxFiles: 1, "data-testid": "uploader-replace-file" }) }))] })] }), (0, jsx_runtime_1.jsxs)("div", { className: "flex justify-end gap-3 pt-4", children: [(0, jsx_runtime_1.jsx)(button_1.Button, { type: "button", variant: "outline", onClick: onCancel, disabled: updateDocumentMutation.isPending, "data-testid": "button-cancel", children: "Cancel" }), (0, jsx_runtime_1.jsx)(button_1.Button, { type: "submit", disabled: updateDocumentMutation.isPending, "data-testid": "button-save-document", children: updateDocumentMutation.isPending ? ((0, jsx_runtime_1.jsxs)(jsx_runtime_1.Fragment, { children: [(0, jsx_runtime_1.jsx)(lucide_react_1.Upload, { className: "w-4 h-4 mr-2 animate-spin" }), "Saving..."] })) : ((0, jsx_runtime_1.jsxs)(jsx_runtime_1.Fragment, { children: [(0, jsx_runtime_1.jsx)(lucide_react_1.Save, { className: "w-4 h-4 mr-2" }), "Save Changes"] })) })] })] }) })] }));
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiL2hvbWUvcnVubmVyL3dvcmtzcGFjZS9jbGllbnQvc3JjL2NvbXBvbmVudHMvZG9jdW1lbnQtbWFuYWdlbWVudC9Eb2N1bWVudEVkaXRGb3JtLnRzeCIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQTJFQSw0Q0FnVEM7O0FBM1hELCtDQUFtRDtBQUNuRCxxREFBMEM7QUFDMUMsaURBQXNEO0FBQ3RELHVEQUFvRTtBQUNwRSw2QkFBd0I7QUFDeEIsbURBQWdEO0FBQ2hELGlEQUE4QztBQUM5Qyx1REFBb0Q7QUFDcEQsaURBQThDO0FBQzlDLG1EQUFnRDtBQUNoRCwrQ0FROEI7QUFDOUIsbURBTWdDO0FBQ2hDLCtDQUFnRjtBQUNoRiwrQ0FBeUQ7QUFDekQsaURBQTZDO0FBQzdDLG1EQUErQztBQUMvQyxxREFBa0Q7QUFJbEQsbUVBQW1FO0FBQ25FLE1BQU0sbUJBQW1CLEdBQUc7SUFDMUIsRUFBRSxLQUFLLEVBQUUsT0FBTyxFQUFFLEtBQUssRUFBRSxRQUFRLEVBQUU7SUFDbkMsRUFBRSxLQUFLLEVBQUUsV0FBVyxFQUFFLEtBQUssRUFBRSxXQUFXLEVBQUU7SUFDMUMsRUFBRSxLQUFLLEVBQUUsYUFBYSxFQUFFLEtBQUssRUFBRSxhQUFhLEVBQUU7SUFDOUMsRUFBRSxLQUFLLEVBQUUsT0FBTyxFQUFFLEtBQUssRUFBRSxPQUFPLEVBQUU7SUFDbEMsRUFBRSxLQUFLLEVBQUUsaUJBQWlCLEVBQUUsS0FBSyxFQUFFLGlCQUFpQixFQUFFO0lBQ3RELEVBQUUsS0FBSyxFQUFFLFdBQVcsRUFBRSxLQUFLLEVBQUUsV0FBVyxFQUFFO0lBQzFDLEVBQUUsS0FBSyxFQUFFLFdBQVcsRUFBRSxLQUFLLEVBQUUsV0FBVyxFQUFFO0lBQzFDLEVBQUUsS0FBSyxFQUFFLFNBQVMsRUFBRSxLQUFLLEVBQUUsU0FBUyxFQUFFO0lBQ3RDLEVBQUUsS0FBSyxFQUFFLFlBQVksRUFBRSxLQUFLLEVBQUUsWUFBWSxFQUFFO0lBQzVDLEVBQUUsS0FBSyxFQUFFLE9B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c3JjL2NvbXBvbmVudHMvZG9jdW1lbnQtbWFuYWdlbWVudC9Eb2N1bWVudEVkaXRGb3JtLnRzeCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgUmVhY3QsIHsgdXNlU3RhdGUsIHVzZUVmZmVjdCB9IGZyb20gJ3JlYWN0JztcbmltcG9ydCB7IHVzZUZvcm0gfSBmcm9tICdyZWFjdC1ob29rLWZvcm0nO1xuaW1wb3J0IHsgem9kUmVzb2x2ZXIgfSBmcm9tICdAaG9va2Zvcm0vcmVzb2x2ZXJzL3pvZCc7XG5pbXBvcnQgeyB1c2VNdXRhdGlvbiwgdXNlUXVlcnlDbGllbnQgfSBmcm9tICdAdGFuc3RhY2svcmVhY3QtcXVlcnknO1xuaW1wb3J0IHsgeiB9IGZyb20gJ3pvZCc7XG5pbXBvcnQgeyBCdXR0b24gfSBmcm9tICdAL2NvbXBvbmVudHMvdWkvYnV0dG9uJztcbmltcG9ydCB7IElucHV0IH0gZnJvbSAnQC9jb21wb25lbnRzL3VpL2lucHV0JztcbmltcG9ydCB7IFRleHRhcmVhIH0gZnJvbSAnQC9jb21wb25lbnRzL3VpL3RleHRhcmVhJztcbmltcG9ydCB7IExhYmVsIH0gZnJvbSAnQC9jb21wb25lbnRzL3VpL2xhYmVsJztcbmltcG9ydCB7IFN3aXRjaCB9IGZyb20gJ0AvY29tcG9uZW50cy91aS9zd2l0Y2gnO1xuaW1wb3J0IHtcbiAgRm9ybSxcbiAgRm9ybUNvbnRyb2wsXG4gIEZvcm1GaWVsZCxcbiAgRm9ybUl0ZW0sXG4gIEZvcm1MYWJlbCxcbiAgRm9ybU1lc3NhZ2UsXG4gIEZvcm1EZXNjcmlwdGlvbixcbn0gZnJvbSAnQC9jb21wb25lbnRzL3VpL2Zvcm0nO1xuaW1wb3J0IHtcbiAgU2VsZWN0LFxuICBTZWxlY3RDb250ZW50LFxuICBTZWxlY3RJdGVtLFxuICBTZWxlY3RUcmlnZ2VyLFxuICBTZWxlY3RWYWx1ZSxcbn0gZnJvbSAnQC9jb21wb25lbnRzL3VpL3NlbGVjdCc7XG5pbXBvcnQgeyBDYXJkLCBDYXJkQ29udGVudCwgQ2FyZEhlYWRlciwgQ2FyZFRpdGxlIH0gZnJvbSAnQC9jb21wb25lbnRzL3VpL2NhcmQnO1xuaW1wb3J0IHsgRmlsZVRleHQsIFVwbG9hZCwgU2F2ZSwgWCB9IGZyb20gJ2x1Y2lkZS1yZWFjdCc7XG5pbXBvcnQgeyB1c2VUb2FzdCB9IGZyb20gJ0AvaG9va3MvdXNlLXRvYXN0JztcbmltcG9ydCB7IGFwaVJlcXVlc3QgfSBmcm9tICdAL2xpYi9xdWVyeUNsaWVudCc7XG5pbXBvcnQgeyBTaGFyZWRVcGxvYWRlciB9IGZyb20gJy4vU2hhcmVkVXBsb2FkZXInO1xuaW1wb3J0IHR5cGUgeyBEb2N1bWVudCB9IGZyb20gJ0BzaGFyZWQvc2NoZW1hJztcbmltcG9ydCB0eXBlIHsgVXBsb2FkQ29udGV4dCB9IGZyb20gJ0BzaGFyZWQvY29uZmlnL3VwbG9hZC1jb25maWcnO1xuXG4vLyBEb2N1bWVudCBjYXRlZ29yaWVzIG1hdGNoaW5nIHRoZSBvbmVzIHVzZWQgaW4gRG9jdW1lbnRDcmVhdGVGb3JtXG5jb25zdCBET0NVTUVOVF9DQVRFR09SSUVTID0gW1xuICB7IHZhbHVlOiAnYnlsYXcnLCBsYWJlbDogJ0J5bGF3cycgfSxcbiAgeyB2YWx1ZTogJ2ZpbmFuY2lhbCcsIGxhYmVsOiAnRmluYW5jaWFsJyB9LFxuICB7IHZhbHVlOiAnbWFpbnRlbmFuY2UnLCBsYWJlbDogJ01haW50ZW5hbmNlJyB9LFxuICB7IHZhbHVlOiAnbGVnYWwnLCBsYWJlbDogJ0xlZ2FsJyB9LFxuICB7IHZhbHVlOiAnbWVldGluZ19taW51dGVzJywgbGFiZWw6ICdNZWV0aW5nIE1pbnV0ZXMnIH0sXG4gIHsgdmFsdWU6ICdpbnN1cmFuY2UnLCBsYWJlbDogJ0luc3VyYW5jZScgfSxcbiAgeyB2YWx1ZTogJ2NvbnRyYWN0cycsIGxhYmVsOiAnQ29udHJhY3RzJyB9LFxuICB7IHZhbHVlOiAncGVybWl0cycsIGxhYmVsOiAnUGVybWl0cycgfSxcbiAgeyB2YWx1ZTogJ2luc3BlY3Rpb24nLCBsYWJlbDogJ0luc3BlY3Rpb24nIH0sXG4gIHsgdmFsdWU6ICdvdGhlcicsIGxhYmVsOiAnT3RoZXInIH0sXG5dO1xuXG4vLyBGb3JtIHNjaGVtYSBmb3IgZG9jdW1lbnQgZWRpdGluZ1xuY29uc3QgZG9jdW1lbnRFZGl0U2NoZW1hID0gei5vYmplY3Qoe1xuICBuYW1lOiB6LnN0cmluZygpLm1pbigxLCAnRG9jdW1lbnQgbmFtZSBpcyByZXF1aXJlZCcpLm1heCgyNTUsICdOYW1lIG11c3QgYmUgbGVzcyB0aGFuIDI1NSBjaGFyYWN0ZXJzJyksXG4gIGRlc2NyaXB0aW9uOiB6LnN0cmluZygpLm1heCgxMDAwLCAnRGVzY3JpcHRpb24gbXVzdCBiZSBsZXNzIHRoYW4gMTAwMCBjaGFyYWN0ZXJzJykub3B0aW9uYWwoKSxcbiAgY2F0ZWdvcnk6IHouZW51bShbXG4gICAgJ2J5bGF3JyxcbiAgICAnZmluYW5jaWFsJywgXG4gICAgJ21haW50ZW5hbmNlJyxcbiAgICAnbGVnYWwnLFxuICAgICdtZWV0aW5nX21pbnV0ZXMnLFxuICAgICdpbnN1cmFuY2UnLFxuICAgICdjb250cmFjdHMnLFxuICAgICdwZXJtaXRzJyxcbiAgICAnaW5zcGVjdGlvbicsXG4gICAgJ290aGVyJ1xuICBdKSxcbiAgaXNWaXNpYmxlVG9UZW5hbnRzOiB6LmJvb2xlYW4oKS5vcHRpb25hbCgpLFxufSk7XG5cbnR5cGUgRG9jdW1lbnRFZGl0RGF0YSA9IHouaW5mZXI8dHlwZW9mIGRvY3VtZW50RWRpdFNjaGVtYT47XG5cbmludGVyZmFjZSBEb2N1bWVudEVkaXRGb3JtUHJvcHMge1xuICBkb2N1bWVudDogRG9jdW1lbnQ7XG4gIG9uU3VjY2VzczogKCkgPT4gdm9pZDtcbiAgb25DYW5jZWw6ICgpID0+IHZvaWQ7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBEb2N1bWVudEVkaXRGb3JtKHtcbiAgZG9jdW1lbnQsXG4gIG9uU3VjY2VzcyxcbiAgb25DYW5jZWwsXG59OiBEb2N1bWVudEVkaXRGb3JtUHJvcHMpIHtcbiAgY29uc3QgeyB0b2FzdCB9ID0gdXNlVG9hc3QoKTtcbiAgY29uc3QgcXVlcnlDbGllbnQgPSB1c2VRdWVyeUNsaWVudCgpO1xuICBcbiAgLy8gU3RhdGUgZm9yIGZpbGUgcmVwbGFjZW1lbnRcbiAgY29uc3QgW3NlbGVjdGVkRmlsZSwgc2V0U2VsZWN0ZWRGaWxlXSA9IHVzZVN0YXRlPEZpbGUgfCBudWxsPihudWxsKTtcbiAgY29uc3QgW3RleHRDb250ZW50LCBzZXRUZXh0Q29udGVudF0gPSB1c2VTdGF0ZTxzdHJpbmcgfCBudWxsPihudWxsKTtcbiAgY29uc3QgW2lzUmVwbGFjZUZpbGUsIHNldElzUmVwbGFjZUZpbGVdID0gdXNlU3RhdGUoZmFsc2UpO1xuXG4gIC8vIFVwbG9hZCBjb250ZXh0IGZvciBzZWN1cmUgc3RvcmFnZVxuICBjb25zdCB1cGxvYWRDb250ZXh0OiBVcGxvYWRDb250ZXh0ID0ge1xuICAgIHR5cGU6IGRvY3VtZW50LmJ1aWxkaW5nSWQgPyAnYnVpbGRpbmdzJyA6ICdyZXNpZGVuY2VzJyxcbiAgICBidWlsZGluZ0lkOiBkb2N1bWVudC5idWlsZGluZ0lkIHx8IHVuZGVmaW5lZCxcbiAgICByZXNpZGVuY2VJZDogZG9jdW1lbnQucmVzaWRlbmNlSWQgfHwgdW5kZWZpbmVkLFxuICAgIHVzZXJSb2xlOiAnYWRtaW4nLCAvLyBUaGlzIHdvdWxkIGJlIGR5bmFtaWMgYmFzZWQgb24gY3VycmVudCB1c2VyXG4gICAgdXNlcklkOiAnY3VycmVudC11c2VyJyAvLyBUaGlzIHdvdWxkIGJlIGR5bmFtaWMgYmFzZWQgb24gY3VycmVudCB1c2VyXG4gIH07XG5cbiAgLy8gRm9ybSBzZXR1cCB3aXRoIGV4aXN0aW5nIGRvY3VtZW50IGRhdGFcbiAgY29uc3QgZm9ybSA9IHVzZUZvcm08RG9jdW1lbnRFZGl0RGF0YT4oe1xuICAgIHJlc29sdmVyOiB6b2RSZXNvbHZlcihkb2N1bWVudEVkaXRTY2hlbWEpLFxuICAgIGRlZmF1bHRWYWx1ZXM6IHtcbiAgICAgIG5hbWU6IGRvY3VtZW50Lm5hbWUgfHwgJycsXG4gICAgICBkZXNjcmlwdGlvbjogZG9jdW1lbnQuZGVzY3JpcHRpb24gfHwgJycsXG4gICAgICBjYXRlZ29yeTogKGRvY3VtZW50LmRvY3VtZW50VHlwZSBhcyBhbnkpIHx8IGRvY3VtZW50LmNhdGVnb3J5IHx8ICdvdGhlcicsXG4gICAgICBpc1Zpc2libGVUb1RlbmFudHM6IGRvY3VtZW50LmlzVmlzaWJsZVRvVGVuYW50cyB8fCBmYWxzZSxcbiAgICB9XG4gIH0pO1xuXG4gIC8vIFVwZGF0ZSBkb2N1bWVudCBtdXRhdGlvblxuICBjb25zdCB1cGRhdGVEb2N1bWVudE11dGF0aW9uID0gdXNlTXV0YXRpb24oe1xuICAgIG11dGF0aW9uRm46IGFzeW5jIChkYXRhOiBEb2N1bWVudEVkaXREYXRhKSA9PiB7XG4gICAgICBjb25zdCBmb3JtRGF0YSA9IG5ldyBGb3JtRGF0YSgpO1xuICAgICAgXG4gICAgICAvLyBBZGQgZG9jdW1lbnQgbWV0YWRhdGFcbiAgICAgIGZvcm1EYXRhLmFwcGVuZCgnbmFtZScsIGRhdGEubmFtZSk7XG4gICAgICBmb3JtRGF0YS5hcHBlbmQoJ2RvY3VtZW50VHlwZScsIGRhdGEuY2F0ZWdvcnkpO1xuICAgICAgaWYgKGRhdGEuZGVzY3JpcHRpb24pIHtcbiAgICAgICAgZm9ybURhdGEuYXBwZW5kKCdkZXNjcmlwdGlvbicsIGRhdGEuZGVzY3JpcHRpb24pO1xuICAgICAgfVxuICAgICAgZm9ybURhdGEuYXBwZW5kKCdpc1Zpc2libGVUb1RlbmFudHMnLCBkYXRhLmlzVmlzaWJsZVRvVGVuYW50cyA/ICd0cnVlJyA6ICdmYWxzZScpO1xuICAgICAgXG4gICAgICAvLyBBZGQgZW50aXR5IGFzc29jaWF0aW9uc1xuICAgICAgaWYgKGRvY3VtZW50LmJ1aWxkaW5nSWQpIHtcbiAgICAgICAgZm9ybURhdGEuYXBwZW5kKCdidWlsZGluZ0lkJywgZG9jdW1lbnQuYnVpbGRpbmdJZCk7XG4gICAgICB9XG4gICAgICBpZiAoZG9jdW1lbnQucmVzaWRlbmNlSWQpIHtcbiAgICAgICAgZm9ybURhdGEuYXBwZW5kKCdyZXNpZGVuY2VJZCcsIGRvY3VtZW50LnJlc2lkZW5jZUlkKTtcbiAgICAgIH1cblxuICAgICAgLy8gQWRkIGZpbGUgaWYgcmVwbGFjaW5nXG4gICAgICBpZiAoaXNSZXBsYWNlRmlsZSAmJiBzZWxlY3RlZEZpbGUpIHtcbiAgICAgICAgZm9ybURhdGEuYXBwZW5kKCdmaWxlJywgc2VsZWN0ZWRGaWxlKTtcbiAgICAgIH0gZWxzZSBpZiAoaXNSZXBsYWNlRmlsZSAmJiB0ZXh0Q29udGVudCkge1xuICAgICAgICAvLyBIYW5kbGUgdGV4dCBjb250ZW50IGNyZWF0aW9uXG4gICAgICAgIGNvbnN0IHRleHRCbG9iID0gbmV3IEJsb2IoW3RleHRDb250ZW50XSwgeyB0eXBlOiAndGV4dC9wbGFpbicgfSk7XG4gICAgICAgIGNvbnN0IHRleHRGaWxlID0gbmV3IEZpbGUoW3RleHRCbG9iXSwgYCR7ZGF0YS5uYW1lfS50eHRgLCB7IHR5cGU6ICd0ZXh0L3BsYWluJyB9KTtcbiAgICAgICAgZm9ybURhdGEuYXBwZW5kKCdmaWxlJywgdGV4dEZpbGUpO1xuICAgICAgfVxuICAgICAgXG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGFwaVJlcXVlc3QoJ1BVVCcsIGAvYXBpL2RvY3VtZW50cy8ke2RvY3VtZW50LmlkfWAsIHtcbiAgICAgICAgYm9keTogZm9ybURhdGEsXG4gICAgICB9KTtcbiAgICAgIFxuICAgICAgaWYgKCFyZXNwb25zZS5vaykge1xuICAgICAgICBjb25zdCBlcnJvciA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKS5jYXRjaCgoKSA9PiAoeyBtZXNzYWdlOiAnVW5rbm93biBlcnJvcicgfSkpO1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoZXJyb3IubWVzc2FnZSB8fCAnRmFpbGVkIHRvIHVwZGF0ZSBkb2N1bWVudCcpO1xuICAgICAgfVxuICAgICAgXG4gICAgICByZXR1cm4gcmVzcG9uc2UuanNvbigpO1xuICAgIH0sXG4gICAgb25TdWNjZXNzOiAoZGF0YSkgPT4ge1xuICAgICAgdG9hc3Qoe1xuICAgICAgICB0aXRsZTogJ0RvY3VtZW50IHVwZGF0ZWQnLFxuICAgICAgICBkZXNjcmlwdGlvbjogJ1RoZSBkb2N1bWVudCBoYXMgYmVlbiBzdWNjZXNzZnVsbHkgdXBkYXRlZC4nLFxuICAgICAgfSk7XG4gICAgICBcbiAgICAgIC8vIEludmFsaWRhdGUgcmVsZXZhbnQgcXVlcmllc1xuICAgICAgcXVlcnlDbGllbnQuaW52YWxpZGF0ZVF1ZXJpZXMoeyBxdWVyeUtleTogWycvYXBpL2RvY3VtZW50cyddIH0pO1xuICAgICAgcXVlcnlDbGllbnQuaW52YWxpZGF0ZVF1ZXJpZXMoeyBxdWVyeUtleTogWycvYXBpL2RvY3VtZW50cycsIGRvY3VtZW50LmlkXSB9KTtcbiAgICAgIFxuICAgICAgb25TdWNjZXNzKCk7XG4gICAgfSxcbiAgICBvbkVycm9yOiAoZXJyb3I6IEVycm9yKSA9PiB7XG4gICAgICB0b2FzdCh7XG4gICAgICAgIHRpdGxlOiAnVXBkYXRlIGZhaWxlZCcsXG4gICAgICAgIGRlc2NyaXB0aW9uOiBlcnJvci5tZXNzYWdlIHx8ICdGYWlsZWQgdG8gdXBkYXRlIGRvY3VtZW50LiBQbGVhc2UgdHJ5IGFnYWluLicsXG4gICAgICAgIHZhcmlhbnQ6ICdkZXN0cnVjdGl2ZScsXG4gICAgICB9KTtcbiAgICB9LFxuICB9KTtcblxuICBjb25zdCBvblN1Ym1pdCA9IChkYXRhOiBEb2N1bWVudEVkaXREYXRhKSA9PiB7XG4gICAgdXBkYXRlRG9jdW1lbnRNdXRhdGlvbi5tdXRhdGUoZGF0YSk7XG4gIH07XG5cbiAgY29uc3QgaGFuZGxlRmlsZVVwbG9hZCA9IChmaWxlOiBGaWxlIHwgbnVsbCwgdGV4dENvbnRlbnQ6IHN0cmluZyB8IG51bGwpID0+IHtcbiAgICBzZXRTZWxlY3RlZEZpbGUoZmlsZSk7XG4gICAgc2V0VGV4dENvbnRlbnQodGV4dENvbnRlbnQpO1xuICB9O1xuXG4gIHJldHVybiAoXG4gICAgPGRpdiBjbGFzc05hbWU9XCJtYXgtdy0yeGwgbXgtYXV0byBzcGFjZS15LTZcIj5cbiAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBpdGVtcy1jZW50ZXIganVzdGlmeS1iZXR3ZWVuXCI+XG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBpdGVtcy1jZW50ZXIgZ2FwLTJcIj5cbiAgICAgICAgICA8RmlsZVRleHQgY2xhc3NOYW1lPVwidy01IGgtNSB0ZXh0LXByaW1hcnlcIiAvPlxuICAgICAgICAgIDxoMiBjbGFzc05hbWU9XCJ0ZXh0LXhsIGZvbnQtc2VtaWJvbGRcIj5FZGl0IERvY3VtZW50PC9oMj5cbiAgICAgICAgPC9kaXY+XG4gICAgICAgIDxCdXR0b25cbiAgICAgICAgICB2YXJpYW50PVwiZ2hvc3RcIlxuICAgICAgICAgIHNpemU9XCJzbVwiXG4gICAgICAgICAgb25DbGljaz17b25DYW5jZWx9XG4gICAgICAgICAgZGF0YS10ZXN0aWQ9XCJidXR0b24tY2FuY2VsLWVkaXRcIlxuICAgICAgICA+XG4gICAgICAgICAgPFggY2xhc3NOYW1lPVwidy00IGgtNFwiIC8+XG4gICAgICAgIDwvQnV0dG9uPlxuICAgICAgPC9kaXY+XG5cbiAgICAgIDxGb3JtIHsuLi5mb3JtfT5cbiAgICAgICAgPGZvcm0gb25TdWJtaXQ9e2Zvcm0uaGFuZGxlU3VibWl0KG9uU3VibWl0KX0gY2xhc3NOYW1lPVwic3BhY2UteS02XCI+XG4gICAgICAgICAgey8qIERvY3VtZW50IEluZm9ybWF0aW9uIENhcmQgKi99XG4gICAgICAgICAgPENhcmQ+XG4gICAgICAgICAgICA8Q2FyZEhlYWRlcj5cbiAgICAgICAgICAgICAgPENhcmRUaXRsZSBjbGFzc05hbWU9XCJ0ZXh0LWxnXCI+RG9jdW1lbnQgSW5mb3JtYXRpb248L0NhcmRUaXRsZT5cbiAgICAgICAgICAgIDwvQ2FyZEhlYWRlcj5cbiAgICAgICAgICAgIDxDYXJkQ29udGVudCBjbGFzc05hbWU9XCJzcGFjZS15LTRcIj5cbiAgICAgICAgICAgICAgey8qIERvY3VtZW50IE5hbWUgKi99XG4gICAgICAgICAgICAgIDxGb3JtRmllbGRcbiAgICAgICAgICAgICAgICBjb250cm9sPXtmb3JtLmNvbnRyb2x9XG4gICAgICAgICAgICAgICAgbmFtZT1cIm5hbWVcIlxuICAgICAgICAgICAgICAgIHJlbmRlcj17KHsgZmllbGQgfSkgPT4gKFxuICAgICAgICAgICAgICAgICAgPEZvcm1JdGVtPlxuICAgICAgICAgICAgICAgICAgICA8Rm9ybUxhYmVsPkRvY3VtZW50IE5hbWUgKjwvRm9ybUxhYmVsPlxuICAgICAgICAgICAgICAgICAgICA8Rm9ybUNvbnRyb2w+XG4gICAgICAgICAgICAgICAgICAgICAgPElucHV0XG4gICAgICAgICAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcj1cIkVudGVyIGRvY3VtZW50IG5hbWVcIlxuICAgICAgICAgICAgICAgICAgICAgICAgey4uLmZpZWxkfVxuICAgICAgICAgICAgICAgICAgICAgICAgZGF0YS10ZXN0aWQ9XCJpbnB1dC1kb2N1bWVudC1uYW1lXCJcbiAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICA8L0Zvcm1Db250cm9sPlxuICAgICAgICAgICAgICAgICAgICA8Rm9ybU1lc3NhZ2UgLz5cbiAgICAgICAgICAgICAgICAgIDwvRm9ybUl0ZW0+XG4gICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgLz5cblxuICAgICAgICAgICAgICB7LyogQ2F0ZWdvcnkgKi99XG4gICAgICAgICAgICAgIDxGb3JtRmllbGRcbiAgICAgICAgICAgICAgICBjb250cm9sPXtmb3JtLmNvbnRyb2x9XG4gICAgICAgICAgICAgICAgbmFtZT1cImNhdGVnb3J5XCJcbiAgICAgICAgICAgICAgICByZW5kZXI9eyh7IGZpZWxkIH0pID0+IChcbiAgICAgICAgICAgICAgICAgIDxGb3JtSXRlbT5cbiAgICAgICAgICAgICAgICAgICAgPEZvcm1MYWJlbD5DYXRlZ29yeSAqPC9Gb3JtTGFiZWw+XG4gICAgICAgICAgICAgICAgICAgIDxTZWxlY3Qgb25WYWx1ZUNoYW5nZT17ZmllbGQub25DaGFuZ2V9IHZhbHVlPXtmaWVsZC52YWx1ZX0+XG4gICAgICAgICAgICAgICAgICAgICAgPEZvcm1Db250cm9sPlxuICAgICAgICAgICAgICAgICAgICAgICAgPFNlbGVjdFRyaWdnZXIgZGF0YS10ZXN0aWQ9XCJzZWxlY3QtZG9jdW1lbnQtY2F0ZWdvcnlcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPFNlbGVjdFZhbHVlIHBsYWNlaG9sZGVyPVwiU2VsZWN0IGEgY2F0ZWdvcnlcIiAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgPC9TZWxlY3RUcmlnZ2VyPlxuICAgICAgICAgICAgICAgICAgICAgIDwvRm9ybUNvbnRyb2w+XG4gICAgICAgICAgICAgICAgICAgICAgPFNlbGVjdENvbnRlbnQ+XG4gICAgICAgICAgICAgICAgICAgICAgICB7RE9DVU1FTlRfQ0FURUdPUklFUy5tYXAoKGNhdGVnb3J5KSA9PiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgIDxTZWxlY3RJdGVtIGtleT17Y2F0ZWdvcnkudmFsdWV9IHZhbHVlPXtjYXRlZ29yeS52YWx1ZX0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge2NhdGVnb3J5LmxhYmVsfVxuICAgICAgICAgICAgICAgICAgICAgICAgICA8L1NlbGVjdEl0ZW0+XG4gICAgICAgICAgICAgICAgICAgICAgICApKX1cbiAgICAgICAgICAgICAgICAgICAgICA8L1NlbGVjdENvbnRlbnQ+XG4gICAgICAgICAgICAgICAgICAgIDwvU2VsZWN0PlxuICAgICAgICAgICAgICAgICAgICA8Rm9ybU1lc3NhZ2UgLz5cbiAgICAgICAgICAgICAgICAgIDwvRm9ybUl0ZW0+XG4gICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgLz5cblxuICAgICAgICAgICAgICB7LyogRGVzY3JpcHRpb24gKi99XG4gICAgICAgICAgICAgIDxGb3JtRmllbGRcbiAgICAgICAgICAgICAgICBjb250cm9sPXtmb3JtLmNvbnRyb2x9XG4gICAgICAgICAgICAgICAgbmFtZT1cImRlc2NyaXB0aW9uXCJcbiAgICAgICAgICAgICAgICByZW5kZXI9eyh7IGZpZWxkIH0pID0+IChcbiAgICAgICAgICAgICAgICAgIDxGb3JtSXRlbT5cbiAgICAgICAgICAgICAgICAgICAgPEZvcm1MYWJlbD5EZXNjcmlwdGlvbjwvRm9ybUxhYmVsPlxuICAgICAgICAgICAgICAgICAgICA8Rm9ybUNvbnRyb2w+XG4gICAgICAgICAgICAgICAgICAgICAgPFRleHRhcmVhXG4gICAgICAgICAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcj1cIkVudGVyIGRvY3VtZW50IGRlc2NyaXB0aW9uIChvcHRpb25hbClcIlxuICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwicmVzaXplLW5vbmVcIlxuICAgICAgICAgICAgICAgICAgICAgICAgcm93cz17M31cbiAgICAgICAgICAgICAgICAgICAgICAgIHsuLi5maWVsZH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGEtdGVzdGlkPVwiaW5wdXQtZG9jdW1lbnQtZGVzY3JpcHRpb25cIlxuICAgICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgIDwvRm9ybUNvbnRyb2w+XG4gICAgICAgICAgICAgICAgICAgIDxGb3JtRGVzY3JpcHRpb24+XG4gICAgICAgICAgICAgICAgICAgICAgUHJvdmlkZSBhZGRpdGlvbmFsIGRldGFpbHMgYWJvdXQgdGhpcyBkb2N1bWVudFxuICAgICAgICAgICAgICAgICAgICA8L0Zvcm1EZXNjcmlwdGlvbj5cbiAgICAgICAgICAgICAgICAgICAgPEZvcm1NZXNzYWdlIC8+XG4gICAgICAgICAgICAgICAgICA8L0Zvcm1JdGVtPlxuICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgIC8+XG5cbiAgICAgICAgICAgICAgey8qIFZpc2liaWxpdHkgdG8gVGVuYW50cyAqL31cbiAgICAgICAgICAgICAgPEZvcm1GaWVsZFxuICAgICAgICAgICAgICAgIGNvbnRyb2w9e2Zvcm0uY29udHJvbH1cbiAgICAgICAgICAgICAgICBuYW1lPVwiaXNWaXNpYmxlVG9UZW5hbnRzXCJcbiAgICAgICAgICAgICAgICByZW5kZXI9eyh7IGZpZWxkIH0pID0+IChcbiAgICAgICAgICAgICAgICAgIDxGb3JtSXRlbSBjbGFzc05hbWU9XCJmbGV4IGZsZXgtcm93IGl0ZW1zLWNlbnRlciBqdXN0aWZ5LWJldHdlZW4gcm91bmRlZC1sZyBib3JkZXIgcC0zIHNoYWRvdy1zbVwiPlxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInNwYWNlLXktMC41XCI+XG4gICAgICAgICAgICAgICAgICAgICAgPEZvcm1MYWJlbCBjbGFzc05hbWU9XCJ0ZXh0LWJhc2VcIj5WaXNpYmxlIHRvIFRlbmFudHM8L0Zvcm1MYWJlbD5cbiAgICAgICAgICAgICAgICAgICAgICA8Rm9ybURlc2NyaXB0aW9uPlxuICAgICAgICAgICAgICAgICAgICAgICAgQWxsb3cgdGVuYW50cyB0byB2aWV3IGFuZCBkb3dubG9hZCB0aGlzIGRvY3VtZW50XG4gICAgICAgICAgICAgICAgICAgICAgPC9Gb3JtRGVzY3JpcHRpb24+XG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICA8Rm9ybUNvbnRyb2w+XG4gICAgICAgICAgICAgICAgICAgICAgPFN3aXRjaFxuICAgICAgICAgICAgICAgICAgICAgICAgY2hlY2tlZD17ZmllbGQudmFsdWUgfHwgZmFsc2V9XG4gICAgICAgICAgICAgICAgICAgICAgICBvbkNoZWNrZWRDaGFuZ2U9e2ZpZWxkLm9uQ2hhbmdlfVxuICAgICAgICAgICAgICAgICAgICAgICAgZGF0YS10ZXN0aWQ9XCJzd2l0Y2gtdmlzaWJsZS10by10ZW5hbnRzXCJcbiAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICA8L0Zvcm1Db250cm9sPlxuICAgICAgICAgICAgICAgICAgPC9Gb3JtSXRlbT5cbiAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgPC9DYXJkQ29udGVudD5cbiAgICAgICAgICA8L0NhcmQ+XG5cbiAgICAgICAgICB7LyogRmlsZSBNYW5hZ2VtZW50IENhcmQgKi99XG4gICAgICAgICAgPENhcmQ+XG4gICAgICAgICAgICA8Q2FyZEhlYWRlcj5cbiAgICAgICAgICAgICAgPENhcmRUaXRsZSBjbGFzc05hbWU9XCJ0ZXh0LWxnXCI+RmlsZSBNYW5hZ2VtZW50PC9DYXJkVGl0bGU+XG4gICAgICAgICAgICA8L0NhcmRIZWFkZXI+XG4gICAgICAgICAgICA8Q2FyZENvbnRlbnQgY2xhc3NOYW1lPVwic3BhY2UteS00XCI+XG4gICAgICAgICAgICAgIHsvKiBDdXJyZW50IEZpbGUgSW5mbyAqL31cbiAgICAgICAgICAgICAge2RvY3VtZW50LmZpbGVQYXRoICYmIChcbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImJnLWdyYXktNTAgcC0zIHJvdW5kZWQtbGdcIj5cbiAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBpdGVtcy1jZW50ZXIganVzdGlmeS1iZXR3ZWVuXCI+XG4gICAgICAgICAgICAgICAgICAgIDxkaXY+XG4gICAgICAgICAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwidGV4dC1zbSBmb250LW1lZGl1bVwiPkN1cnJlbnQgRmlsZTwvcD5cbiAgICAgICAgICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJ0ZXh0LXhzIHRleHQtZ3JheS02MDBcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgIHsoZG9jdW1lbnQgYXMgYW55KS5maWxlTmFtZSB8fCBkb2N1bWVudC5uYW1lfVxuICAgICAgICAgICAgICAgICAgICAgIDwvcD5cbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgKX1cblxuICAgICAgICAgICAgICB7LyogUmVwbGFjZSBGaWxlIE9wdGlvbiAqL31cbiAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGl0ZW1zLWNlbnRlciBzcGFjZS14LTJcIj5cbiAgICAgICAgICAgICAgICA8aW5wdXRcbiAgICAgICAgICAgICAgICAgIHR5cGU9XCJjaGVja2JveFwiXG4gICAgICAgICAgICAgICAgICBpZD1cInJlcGxhY2UtZmlsZVwiXG4gICAgICAgICAgICAgICAgICBjaGVja2VkPXtpc1JlcGxhY2VGaWxlfVxuICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9eyhlKSA9PiBzZXRJc1JlcGxhY2VGaWxlKGUudGFyZ2V0LmNoZWNrZWQpfVxuICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwicm91bmRlZFwiXG4gICAgICAgICAgICAgICAgICBkYXRhLXRlc3RpZD1cImNoZWNrYm94LXJlcGxhY2UtZmlsZVwiXG4gICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICA8TGFiZWwgaHRtbEZvcj1cInJlcGxhY2UtZmlsZVwiPlJlcGxhY2UgZmlsZTwvTGFiZWw+XG4gICAgICAgICAgICAgIDwvZGl2PlxuXG4gICAgICAgICAgICAgIHsvKiBGaWxlIFVwbG9hZCAob25seSBpZiByZXBsYWNpbmcpICovfVxuICAgICAgICAgICAgICB7aXNSZXBsYWNlRmlsZSAmJiAoXG4gICAgICAgICAgICAgICAgPGRpdj5cbiAgICAgICAgICAgICAgICAgIDxTaGFyZWRVcGxvYWRlclxuICAgICAgICAgICAgICAgICAgICBjb250ZXh0PXt1cGxvYWRDb250ZXh0fVxuICAgICAgICAgICAgICAgICAgICBvbkZpbGVTZWxlY3Q9e2hhbmRsZUZpbGVVcGxvYWR9XG4gICAgICAgICAgICAgICAgICAgIG1heEZpbGVzPXsxfVxuICAgICAgICAgICAgICAgICAgICBkYXRhLXRlc3RpZD1cInVwbG9hZGVyLXJlcGxhY2UtZmlsZVwiXG4gICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgPC9DYXJkQ29udGVudD5cbiAgICAgICAgICA8L0NhcmQ+XG5cbiAgICAgICAgICB7LyogQWN0aW9uIEJ1dHRvbnMgKi99XG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGp1c3RpZnktZW5kIGdhcC0zIHB0LTRcIj5cbiAgICAgICAgICAgIDxCdXR0b25cbiAgICAgICAgICAgICAgdHlwZT1cImJ1dHRvblwiXG4gICAgICAgICAgICAgIHZhcmlhbnQ9XCJvdXRsaW5lXCJcbiAgICAgICAgICAgICAgb25DbGljaz17b25DYW5jZWx9XG4gICAgICAgICAgICAgIGRpc2FibGVkPXt1cGRhdGVEb2N1bWVudE11dGF0aW9uLmlzUGVuZGluZ31cbiAgICAgICAgICAgICAgZGF0YS10ZXN0aWQ9XCJidXR0b24tY2FuY2VsXCJcbiAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgQ2FuY2VsXG4gICAgICAgICAgICA8L0J1dHRvbj5cbiAgICAgICAgICAgIDxCdXR0b25cbiAgICAgICAgICAgICAgdHlwZT1cInN1Ym1pdFwiXG4gICAgICAgICAgICAgIGRpc2FibGVkPXt1cGRhdGVEb2N1bWVudE11dGF0aW9uLmlzUGVuZGluZ31cbiAgICAgICAgICAgICAgZGF0YS10ZXN0aWQ9XCJidXR0b24tc2F2ZS1kb2N1bWVudFwiXG4gICAgICAgICAgICA+XG4gICAgICAgICAgICAgIHt1cGRhdGVEb2N1bWVudE11dGF0aW9uLmlzUGVuZGluZyA/IChcbiAgICAgICAgICAgICAgICA8PlxuICAgICAgICAgICAgICAgICAgPFVwbG9hZCBjbGFzc05hbWU9XCJ3LTQgaC00IG1yLTIgYW5pbWF0ZS1zcGluXCIgLz5cbiAgICAgICAgICAgICAgICAgIFNhdmluZy4uLlxuICAgICAgICAgICAgICAgIDwvPlxuICAgICAgICAgICAgICApIDogKFxuICAgICAgICAgICAgICAgIDw+XG4gICAgICAgICAgICAgICAgICA8U2F2ZSBjbGFzc05hbWU9XCJ3LTQgaC00IG1yLTJcIiAvPlxuICAgICAgICAgICAgICAgICAgU2F2ZSBDaGFuZ2VzXG4gICAgICAgICAgICAgICAgPC8+XG4gICAgICAgICAgICAgICl9XG4gICAgICAgICAgICA8L0J1dHRvbj5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgPC9mb3JtPlxuICAgICAgPC9Gb3JtPlxuICAgIDwvZGl2PlxuICApO1xufSJdLCJ2ZXJzaW9uIjozfQ==