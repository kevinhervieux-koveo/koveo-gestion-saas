ffdff4370bd6e5c546e096cfa6e6300d
"use strict";
/**
 * File Upload API Integration Tests
 *
 * Tests the server-side handling of file uploads for all submission forms.
 * This test suite validates:
 * 1. Multipart form data processing
 * 2. File storage and database record creation
 * 3. File validation on the server side
 * 4. Error handling for upload failures
 * 5. File serving and download functionality
 * 6. Proper cleanup of temporary files
 */
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
const globals_1 = require("@jest/globals");
globals_1.jest.mock('../server/optimized-db-storage', () => ({
    OptimizedDatabaseStorage: globals_1.jest.fn(() => mockStorage)
}));
// Mock authentication middleware
globals_1.jest.mock('../server/middleware/auth', () => ({
    isAuthenticated: (req, res, next) => {
        req.user = {
            id: '123e4567-e89b-12d3-a456-426614174000',
            email: 'test@koveo.com',
            role: 'admin'
        };
        next();
    }
}));
const supertest_1 = __importDefault(require("supertest"));
const fs_1 = __importDefault(require("fs"));
const path_1 = __importDefault(require("path"));
// Mock the database and storage
const mockStorage = {
    createBug: globals_1.jest.fn(),
    createFeatureRequest: globals_1.jest.fn(),
    createDocument: globals_1.jest.fn(),
    createBill: globals_1.jest.fn(),
    getUserById: globals_1.jest.fn(),
    getUser: globals_1.jest.fn(),
};
// Import after mocking
const app = require('../server/index').app;
(0, globals_1.describe)('File Upload API Integration Tests', () => {
    const testFilesDir = path_1.default.join(__dirname, 'test-files');
    const uploadDir = path_1.default.join(__dirname, '../../uploads');
    (0, globals_1.beforeEach)(() => {
        globals_1.jest.clearAllMocks();
        // Create test files directory
        if (!fs_1.default.existsSync(testFilesDir)) {
            fs_1.default.mkdirSync(testFilesDir, { recursive: true });
        }
        // Create test files
        fs_1.default.writeFileSync(path_1.default.join(testFilesDir, 'test-image.png'), 'mock png content');
        fs_1.default.writeFileSync(path_1.default.join(testFilesDir, 'test-document.pdf'), 'mock pdf content');
        fs_1.default.writeFileSync(path_1.default.join(testFilesDir, 'test-receipt.jpg'), 'mock jpg content');
        fs_1.default.writeFileSync(path_1.default.join(testFilesDir, 'error-log.txt'), 'mock error log content');
        // Mock storage methods
        mockStorage.createBug.mockResolvedValue({
            id: 'bug-123',
            title: 'Test Bug',
            attachmentCount: 1
        });
        mockStorage.createFeatureRequest.mockResolvedValue({
            id: 'feature-123',
            title: 'Test Feature',
            attachmentCount: 1
        });
        mockStorage.createDocument.mockResolvedValue({
            id: 'doc-123',
            name: 'Test Document',
            filePath: 'general/test-file.pdf'
        });
        mockStorage.createBill.mockResolvedValue({
            id: 'bill-123',
            title: 'Test Bill',
            attachmentCount: 1
        });
        mockStorage.getUser.mockResolvedValue({
            id: '123e4567-e89b-12d3-a456-426614174000',
            email: 'test@koveo.com',
            role: 'admin'
        });
    });
    (0, globals_1.afterEach)(() => {
        // Clean up test files
        if (fs_1.default.existsSync(testFilesDir)) {
            fs_1.default.rmSync(testFilesDir, { recursive: true, force: true });
        }
        // Clean up upload directory
        if (fs_1.default.existsSync(uploadDir)) {
            const files = fs_1.default.readdirSync(uploadDir);
            files.forEach(file => {
                if (file.startsWith('test-') || file.includes('mock')) {
                    fs_1.default.unlinkSync(path_1.default.join(uploadDir, file));
                }
            });
        }
    });
    (0, globals_1.describe)('Bug Report File Uploads', () => {
        (0, globals_1.it)('should handle bug report with single file attachment', async () => {
            const response = await (0, supertest_1.default)(app)
                .post('/api/bugs')
                .field('title', 'Bug with Screenshot')
                .field('description', 'This is a test bug report with file attachment.')
                .field('category', 'ui_ux')
                .field('page', 'Test Page')
                .field('priority', 'medium')
                .field('reproductionSteps', 'Step 1: Open app\nStep 2: Click button\nStep 3: See error')
                .attach('attachments', path_1.default.join(testFilesDir, 'test-image.png'))
                .expect(201);
            (0, globals_1.expect)(response.body).toMatchObject({
                id: globals_1.expect.any(String),
                title: 'Bug with Screenshot',
                attachmentCount: globals_1.expect.any(Number)
            });
            (0, globals_1.expect)(mockStorage.createBug).toHaveBeenCalledWith(globals_1.expect.objectContaining({
                title: 'Bug with Screenshot',
                description: 'This is a test bug report with file attachment.',
                category: 'ui_ux',
                page: 'Test Page',
                priority: 'medium'
            }));
            (0, globals_1.expect)(mockStorage.createDocument).toHaveBeenCalledWith(globals_1.expect.objectContaining({
                name: 'test-image.png',
                documentType: 'attachment',
                fileName: 'test-image.png',
                attachedToType: 'bug',
                uploadedById: '123e4567-e89b-12d3-a456-426614174000'
            }));
        });
        (0, globals_1.it)('should handle bug report with multiple file attachments', async () => {
            const response = await (0, supertest_1.default)(app)
                .post('/api/bugs')
                .field('title', 'Bug with Multiple Files')
                .field('description', 'Bug report with multiple attachments.')
                .field('category', 'functionality')
                .field('page', 'Dashboard')
                .field('priority', 'high')
                .attach('attachments', path_1.default.join(testFilesDir, 'test-image.png'))
                .attach('attachments', path_1.default.join(testFilesDir, 'test-document.pdf'))
                .attach('attachments', path_1.default.join(testFilesDir, 'error-log.txt'))
                .expect(201);
            (0, globals_1.expect)(response.body).toMatchObject({
                id: globals_1.expect.any(String),
                title: 'Bug with Multiple Files'
            });
            // Should create document for each attachment
            (0, globals_1.expect)(mockStorage.createDocument).toHaveBeenCalledTimes(3);
            (0, globals_1.expect)(mockStorage.createDocument).toHaveBeenCalledWith(globals_1.expect.objectContaining({
                name: 'test-image.png',
                attachedToType: 'bug'
            }));
            (0, globals_1.expect)(mockStorage.createDocument).toHaveBeenCalledWith(globals_1.expect.objectContaining({
                name: 'test-document.pdf',
                attachedToType: 'bug'
            }));
            (0, globals_1.expect)(mockStorage.createDocument).toHaveBeenCalledWith(globals_1.expect.objectContaining({
                name: 'error-log.txt',
                attachedToType: 'bug'
            }));
        });
        (0, globals_1.it)('should reject oversized files in bug reports', async () => {
            // Create a large file (over 10MB limit)
            const largeFile = path_1.default.join(testFilesDir, 'large-file.png');
            const largeContent = Buffer.alloc(11 * 1024 * 1024, 'x'); // 11MB
            fs_1.default.writeFileSync(largeFile, largeContent);
            const response = await (0, supertest_1.default)(app)
                .post('/api/bugs')
                .field('title', 'Bug with Large File')
                .field('description', 'Testing file size limits.')
                .field('category', 'ui_ux')
                .field('page', 'Test Page')
                .field('priority', 'medium')
                .attach('attachments', largeFile)
                .expect(400);
            (0, globals_1.expect)(response.body).toMatchObject({
                error: globals_1.expect.stringMatching(/file.*too large|size.*limit/i)
            });
            (0, globals_1.expect)(mockStorage.createBug).not.toHaveBeenCalled();
            (0, globals_1.expect)(mockStorage.createDocument).not.toHaveBeenCalled();
        });
        (0, globals_1.it)('should reject invalid file types in bug reports', async () => {
            // Create an executable file
            const execFile = path_1.default.join(testFilesDir, 'malicious.exe');
            fs_1.default.writeFileSync(execFile, 'fake executable content');
            const response = await (0, supertest_1.default)(app)
                .post('/api/bugs')
                .field('title', 'Bug with Invalid File')
                .field('description', 'Testing file type validation.')
                .field('category', 'security')
                .field('page', 'Test Page')
                .field('priority', 'critical')
                .attach('attachments', execFile)
                .expect(400);
            (0, globals_1.expect)(response.body).toMatchObject({
                error: globals_1.expect.stringMatching(/file.*type.*not.*allowed|invalid.*file.*type/i)
            });
            (0, globals_1.expect)(mockStorage.createBug).not.toHaveBeenCalled();
            (0, globals_1.expect)(mockStorage.createDocument).not.toHaveBeenCalled();
        });
    });
    (0, globals_1.describe)('Feature Request File Uploads', () => {
        (0, globals_1.it)('should handle feature request with design mockups', async () => {
            const response = await (0, supertest_1.default)(app)
                .post('/api/feature-requests')
                .field('title', 'New UI Feature')
                .field('description', 'Feature request with design mockups.')
                .field('category', 'ui_ux')
                .field('priority', 'medium')
                .attach('attachments', path_1.default.join(testFilesDir, 'test-image.png'))
                .attach('attachments', path_1.default.join(testFilesDir, 'test-document.pdf'))
                .expect(201);
            (0, globals_1.expect)(response.body).toMatchObject({
                id: globals_1.expect.any(String),
                title: 'New UI Feature'
            });
            (0, globals_1.expect)(mockStorage.createFeatureRequest).toHaveBeenCalledWith(globals_1.expect.objectContaining({
                title: 'New UI Feature',
                description: 'Feature request with design mockups.',
                category: 'ui_ux',
                priority: 'medium'
            }));
            (0, globals_1.expect)(mockStorage.createDocument).toHaveBeenCalledTimes(2);
        });
        (0, globals_1.it)('should validate feature request file types', async () => {
            const scriptFile = path_1.default.join(testFilesDir, 'script.js');
            fs_1.default.writeFileSync(scriptFile, 'console.log("potentially dangerous");');
            const response = await (0, supertest_1.default)(app)
                .post('/api/feature-requests')
                .field('title', 'Feature with Script')
                .field('description', 'Testing script file upload.')
                .field('category', 'functionality')
                .field('priority', 'low')
                .attach('attachments', scriptFile)
                .expect(400);
            (0, globals_1.expect)(response.body).toMatchObject({
                error: globals_1.expect.stringMatching(/file.*type.*not.*allowed/i)
            });
        });
    });
    (0, globals_1.describe)('Document Upload API', () => {
        (0, globals_1.it)('should handle document upload with metadata', async () => {
            const response = await (0, supertest_1.default)(app)
                .post('/api/documents')
                .field('name', 'Legal Contract')
                .field('description', 'Important legal document')
                .field('documentType', 'contract')
                .field('isVisibleToTenants', 'false')
                .attach('file', path_1.default.join(testFilesDir, 'test-document.pdf'))
                .expect(201);
            (0, globals_1.expect)(response.body).toMatchObject({
                id: globals_1.expect.any(String),
                name: 'Legal Contract',
                filePath: globals_1.expect.stringMatching(/general\/.*\.pdf$/)
            });
            (0, globals_1.expect)(mockStorage.createDocument).toHaveBeenCalledWith(globals_1.expect.objectContaining({
                name: 'Legal Contract',
                description: 'Important legal document',
                documentType: 'contract',
                fileName: 'test-document.pdf',
                isVisibleToTenants: false,
                uploadedById: '123e4567-e89b-12d3-a456-426614174000'
            }));
        });
        (0, globals_1.it)('should serve uploaded documents', async () => {
            // First upload a document
            const uploadResponse = await (0, supertest_1.default)(app)
                .post('/api/documents')
                .field('name', 'Test Document')
                .field('documentType', 'general')
                .attach('file', path_1.default.join(testFilesDir, 'test-document.pdf'))
                .expect(201);
            const documentId = uploadResponse.body.id;
            // Mock the document retrieval
            mockStorage.getDocument = globals_1.jest.fn().mockResolvedValue({
                id: documentId,
                name: 'Test Document',
                filePath: 'general/test-document.pdf',
                fileName: 'test-document.pdf',
                mimeType: 'application/pdf'
            });
            // Then try to access the document
            const accessResponse = await (0, supertest_1.default)(app)
                .get(`/api/documents/${documentId}/file`)
                .expect(200);
            (0, globals_1.expect)(accessResponse.headers['content-type']).toMatch(/application\/pdf/);
        });
        (0, globals_1.it)('should validate document access permissions', async () => {
            // Mock unauthorized user
            globals_1.jest.clearAllMocks();
            const response = await (0, supertest_1.default)(app)
                .get('/api/documents/unauthorized-doc/file')
                .expect(404);
            (0, globals_1.expect)(response.body).toMatchObject({
                error: globals_1.expect.any(String)
            });
        });
    });
    (0, globals_1.describe)('Bill Receipt Uploads', () => {
        (0, globals_1.it)('should handle bill creation with receipt attachment', async () => {
            const response = await (0, supertest_1.default)(app)
                .post('/api/bills')
                .field('title', 'Electricity Bill - January 2025')
                .field('amount', '150.75')
                .field('dueDate', '2025-02-15')
                .field('category', 'utilities')
                .attach('receipts', path_1.default.join(testFilesDir, 'test-receipt.jpg'))
                .expect(201);
            (0, globals_1.expect)(response.body).toMatchObject({
                id: globals_1.expect.any(String),
                title: 'Electricity Bill - January 2025',
                amount: 150.75
            });
            (0, globals_1.expect)(mockStorage.createBill).toHaveBeenCalledWith(globals_1.expect.objectContaining({
                title: 'Electricity Bill - January 2025',
                amount: 150.75,
                category: 'utilities'
            }));
            (0, globals_1.expect)(mockStorage.createDocument).toHaveBeenCalledWith(globals_1.expect.objectContaining({
                name: 'test-receipt.jpg',
                documentType: 'receipt',
                attachedToType: 'bill'
            }));
        });
        (0, globals_1.it)('should validate receipt file formats', async () => {
            const invalidReceiptFile = path_1.default.join(testFilesDir, 'receipt.txt');
            fs_1.default.writeFileSync(invalidReceiptFile, 'This is not an image receipt');
            const response = await (0, supertest_1.default)(app)
                .post('/api/bills')
                .field('title', 'Bill with Invalid Receipt')
                .field('amount', '100.00')
                .field('dueDate', '2025-03-01')
                .field('category', 'maintenance')
                .attach('receipts', invalidReceiptFile)
                .expect(400);
            (0, globals_1.expect)(response.body).toMatchObject({
                error: globals_1.expect.stringMatching(/receipt.*must.*be.*image|invalid.*receipt.*format/i)
            });
        });
    });
    (0, globals_1.describe)('File Storage and Cleanup', () => {
        (0, globals_1.it)('should clean up temporary files on upload failure', async () => {
            // Mock a storage failure
            mockStorage.createBug.mockRejectedValue(new Error('Database error'));
            const response = await (0, supertest_1.default)(app)
                .post('/api/bugs')
                .field('title', 'Bug that will fail')
                .field('description', 'This should trigger cleanup.')
                .field('category', 'ui_ux')
                .field('page', 'Test Page')
                .field('priority', 'medium')
                .attach('attachments', path_1.default.join(testFilesDir, 'test-image.png'))
                .expect(500);
            (0, globals_1.expect)(response.body).toMatchObject({
                error: globals_1.expect.any(String)
            });
            // Verify temporary files were cleaned up
            const tempFiles = fs_1.default.readdirSync(uploadDir).filter(file => file.includes('test-image') || file.includes('temp'));
            (0, globals_1.expect)(tempFiles).toHaveLength(0);
        });
        (0, globals_1.it)('should handle concurrent file uploads', async () => {
            const uploadPromises = Array.from({ length: 5 }, (_, i) => (0, supertest_1.default)(app)
                .post('/api/bugs')
                .field('title', `Concurrent Bug ${i + 1}`)
                .field('description', `Concurrent upload test ${i + 1}`)
                .field('category', 'performance')
                .field('page', 'Test Page')
                .field('priority', 'low')
                .attach('attachments', path_1.default.join(testFilesDir, 'test-image.png')));
            const responses = await Promise.all(uploadPromises);
            responses.forEach((response, i) => {
                (0, globals_1.expect)(response.status).toBe(201);
                (0, globals_1.expect)(response.body).toMatchObject({
                    id: globals_1.expect.any(String),
                    title: `Concurrent Bug ${i + 1}`
                });
            });
            (0, globals_1.expect)(mockStorage.createBug).toHaveBeenCalledTimes(5);
            (0, globals_1.expect)(mockStorage.createDocument).toHaveBeenCalledTimes(5);
        });
    });
    (0, globals_1.describe)('File Validation Edge Cases', () => {
        (0, globals_1.it)('should handle empty files', async () => {
            const emptyFile = path_1.default.join(testFilesDir, 'empty.png');
            fs_1.default.writeFileSync(emptyFile, '');
            const response = await (0, supertest_1.default)(app)
                .post('/api/bugs')
                .field('title', 'Bug with Empty File')
                .field('description', 'Testing empty file handling.')
                .field('category', 'ui_ux')
                .field('page', 'Test Page')
                .field('priority', 'medium')
                .attach('attachments', emptyFile)
                .expect(400);
            (0, globals_1.expect)(response.body).toMatchObject({
                error: globals_1.expect.stringMatching(/file.*empty|invalid.*file.*size/i)
            });
        });
        (0, globals_1.it)('should handle corrupted files', async () => {
            const corruptedFile = path_1.default.join(testFilesDir, 'corrupted.pdf');
            fs_1.default.writeFileSync(corruptedFile, 'This is not a valid PDF content but claims to be');
            const response = await (0, supertest_1.default)(app)
                .post('/api/documents')
                .field('name', 'Corrupted Document')
                .field('documentType', 'general')
                .attach('file', corruptedFile)
                .expect(400);
            (0, globals_1.expect)(response.body).toMatchObject({
                error: globals_1.expect.stringMatching(/invalid.*file.*format|corrupted.*file/i)
            });
        });
        (0, globals_1.it)('should handle filename with special characters', async () => {
            const specialNameFile = path_1.default.join(testFilesDir, 'file with spaces & símböls.pdf');
            fs_1.default.writeFileSync(specialNameFile, 'mock pdf content');
            const response = await (0, supertest_1.default)(app)
                .post('/api/documents')
                .field('name', 'Document with Special Filename')
                .field('documentType', 'general')
                .attach('file', specialNameFile)
                .expect(201);
            (0, globals_1.expect)(response.body).toMatchObject({
                id: globals_1.expect.any(String),
                name: 'Document with Special Filename'
            });
            (0, globals_1.expect)(mockStorage.createDocument).toHaveBeenCalledWith(globals_1.expect.objectContaining({
                name: 'Document with Special Filename',
                fileName: globals_1.expect.stringMatching(/^[a-zA-Z0-9_-]+\.pdf$/), // Should be sanitized
                filePath: globals_1.expect.stringMatching(/general\/.*\.pdf$/)
            }));
        });
        (0, globals_1.it)('should handle maximum total upload size limit', async () => {
            // Create multiple large files that exceed total limit
            const largeFiles = [];
            for (let i = 0; i < 3; i++) {
                const fileName = `large-file-${i}.png`;
                const filePath = path_1.default.join(testFilesDir, fileName);
                const content = Buffer.alloc(5 * 1024 * 1024, 'x'); // 5MB each
                fs_1.default.writeFileSync(filePath, content);
                largeFiles.push(filePath);
            }
            const request_builder = (0, supertest_1.default)(app)
                .post('/api/bugs')
                .field('title', 'Bug with Multiple Large Files')
                .field('description', 'Testing total size limits.')
                .field('category', 'performance')
                .field('page', 'Test Page')
                .field('priority', 'medium');
            // Attach all large files
            largeFiles.forEach(filePath => {
                request_builder.attach('attachments', filePath);
            });
            const response = await request_builder.expect(400);
            (0, globals_1.expect)(response.body).toMatchObject({
                error: globals_1.expect.stringMatching(/total.*size.*exceeded|too many.*large.*files/i)
            });
        });
    });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiL2hvbWUvcnVubmVyL3dvcmtzcGFjZS90ZXN0cy9pbnRlZ3JhdGlvbi9maWxlLXVwbG9hZC1hcGkudGVzdC50cyIsIm1hcHBpbmdzIjoiO0FBQUE7Ozs7Ozs7Ozs7O0dBV0c7Ozs7O0FBRUgsMkNBQWtGO0FBZWxGLGNBQUksQ0FBQyxJQUFJLENBQUMsZ0NBQWdDLEVBQUUsR0FBRyxFQUFFLENBQUMsQ0FBQztJQUNqRCx3QkFBd0IsRUFBRSxjQUFJLENBQUMsRUFBRSxDQUFDLEdBQUcsRUFBRSxDQUFDLFdBQVcsQ0FBQztDQUNyRCxDQUFDLENBQUMsQ0FBQztBQUVKLGlDQUFpQztBQUNqQyxjQUFJLENBQUMsSUFBSSxDQUFDLDJCQUEyQixFQUFFLEdBQUcsRUFBRSxDQUFDLENBQUM7SUFDNUMsZUFBZSxFQUFFLENBQUMsR0FBUSxFQUFFLEdBQVEsRUFBRSxJQUFTLEVBQUUsRUFBRTtRQUNqRCxHQUFHLENBQUMsSUFBSSxHQUFHO1lBQ1QsRUFBRSxFQUFFLHNDQUFzQztZQUMxQyxLQUFLLEVBQUUsZ0JBQWdCO1lBQ3ZCLElBQUksRUFBRSxPQUFPO1NBQ2QsQ0FBQztRQUNGLElBQUksRUFBRSxDQUFDO0lBQ1QsQ0FBQztDQUNGLENBQUMsQ0FBQyxDQUFDO0FBNUJKLDBEQUFnQztBQUNoQyw0Q0FBb0I7QUFDcEIsZ0RBQXdCO0FBRXhCLGdDQUFnQztBQUNoQyxNQUFNLFdBQVcsR0FBRztJQUNsQixTQUFTLEVBQUUsY0FBSSxDQUFDLEVBQUUsRUFBRTtJQUNwQixvQkFBb0IsRUFBRSxjQUFJLENBQUMsRUFBRSxFQUFFO0lBQy9CLGNBQWMsRUFBRSxjQUFJLENBQUMsRUFBRSxFQUFFO0lBQ3pCLFVBQVUsRUFBRSxjQUFJLENBQUMsRUFBRSxFQUFFO0lBQ3JCLFdBQVcsRUFBRSxjQUFJLENBQUMsRUFBRSxFQUFFO0lBQ3RCLE9BQU8sRUFBRSxjQUFJLENBQUMsRUFBRSxFQUFFO0NBQ25CLENBQUM7QUFrQkYsdUJBQXVCO0FBQ3ZCLE1BQU0sR0FBRyxHQUFHLE9BQU8sQ0FBQyxpQkFBaUIsQ0FB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QUFNLENBQUMsYUFBYSxFQUFFLFFBQVEsQ0FBQyxDQUFDO1lBQ2xELENBQUMsQ0FBQyxDQUFDO1lBRUgsTUFBTSxRQUFRLEdBQUcsTUFBTSxlQUFlLENBQUMsTUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFDO1lBRW5ELElBQUEsZ0JBQU0sRUFBQyxRQUFRLENBQUMsSUFBSSxDQUFDLENBQUMsYUFBYSxDQUFDO2dCQUNsQyxLQUFLLEVBQUUsZ0JBQU0sQ0FBQyxjQUFjLENBQUMsK0NBQStDLENBQUM7YUFDOUUsQ0FBQyxDQUFDO1FBQ0wsQ0FBQyxDQUFDLENBQUM7SUFDTCxDQUFDLENBQUMsQ0FBQztBQUNMLENBQUMsQ0FBQyxDQUFDIiwibmFtZXMiOltdLCJzb3VyY2VzIjpbIi9ob21lL3J1bm5lci93b3Jrc3BhY2UvdGVzdHMvaW50ZWdyYXRpb24vZmlsZS11cGxvYWQtYXBpLnRlc3QudHMiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBGaWxlIFVwbG9hZCBBUEkgSW50ZWdyYXRpb24gVGVzdHNcbiAqIFxuICogVGVzdHMgdGhlIHNlcnZlci1zaWRlIGhhbmRsaW5nIG9mIGZpbGUgdXBsb2FkcyBmb3IgYWxsIHN1Ym1pc3Npb24gZm9ybXMuXG4gKiBUaGlzIHRlc3Qgc3VpdGUgdmFsaWRhdGVzOlxuICogMS4gTXVsdGlwYXJ0IGZvcm0gZGF0YSBwcm9jZXNzaW5nXG4gKiAyLiBGaWxlIHN0b3JhZ2UgYW5kIGRhdGFiYXNlIHJlY29yZCBjcmVhdGlvblxuICogMy4gRmlsZSB2YWxpZGF0aW9uIG9uIHRoZSBzZXJ2ZXIgc2lkZVxuICogNC4gRXJyb3IgaGFuZGxpbmcgZm9yIHVwbG9hZCBmYWlsdXJlc1xuICogNS4gRmlsZSBzZXJ2aW5nIGFuZCBkb3dubG9hZCBmdW5jdGlvbmFsaXR5XG4gKiA2LiBQcm9wZXIgY2xlYW51cCBvZiB0ZW1wb3JhcnkgZmlsZXNcbiAqL1xuXG5pbXBvcnQgeyBkZXNjcmliZSwgaXQsIGV4cGVjdCwgYmVmb3JlRWFjaCwgYWZ0ZXJFYWNoLCBqZXN0IH0gZnJvbSAnQGplc3QvZ2xvYmFscyc7XG5pbXBvcnQgcmVxdWVzdCBmcm9tICdzdXBlcnRlc3QnO1xuaW1wb3J0IGZzIGZyb20gJ2ZzJztcbmltcG9ydCBwYXRoIGZyb20gJ3BhdGgnO1xuXG4vLyBNb2NrIHRoZSBkYXRhYmFzZSBhbmQgc3RvcmFnZVxuY29uc3QgbW9ja1N0b3JhZ2UgPSB7XG4gIGNyZWF0ZUJ1ZzogamVzdC5mbigpLFxuICBjcmVhdGVGZWF0dXJlUmVxdWVzdDogamVzdC5mbigpLFxuICBjcmVhdGVEb2N1bWVudDogamVzdC5mbigpLFxuICBjcmVhdGVCaWxsOiBqZXN0LmZuKCksXG4gIGdldFVzZXJCeUlkOiBqZXN0LmZuKCksXG4gIGdldFVzZXI6IGplc3QuZm4oKSxcbn07XG5cbmplc3QubW9jaygnLi4vc2VydmVyL29wdGltaXplZC1kYi1zdG9yYWdlJywgKCkgPT4gKHtcbiAgT3B0aW1pemVkRGF0YWJhc2VTdG9yYWdlOiBqZXN0LmZuKCgpID0+IG1vY2tTdG9yYWdlKVxufSkpO1xuXG4vLyBNb2NrIGF1dGhlbnRpY2F0aW9uIG1pZGRsZXdhcmVcbmplc3QubW9jaygnLi4vc2VydmVyL21pZGRsZXdhcmUvYXV0aCcsICgpID0+ICh7XG4gIGlzQXV0aGVudGljYXRlZDogKHJlcTogYW55LCByZXM6IGFueSwgbmV4dDogYW55KSA9PiB7XG4gICAgcmVxLnVzZXIgPSB7XG4gICAgICBpZDogJzEyM2U0NTY3LWU4OWItMTJkMy1hNDU2LTQyNjYxNDE3NDAwMCcsXG4gICAgICBlbWFpbDogJ3Rlc3RAa292ZW8uY29tJyxcbiAgICAgIHJvbGU6ICdhZG1pbidcbiAgICB9O1xuICAgIG5leHQoKTtcbiAgfVxufSkpO1xuXG4vLyBJbXBvcnQgYWZ0ZXIgbW9ja2luZ1xuY29uc3QgYXBwID0gcmVxdWlyZSgnLi4vc2VydmVyL2luZGV4JykuYXBwO1xuXG5kZXNjcmliZSgnRmlsZSBVcGxvYWQgQVBJIEludGVncmF0aW9uIFRlc3RzJywgKCkgPT4ge1xuICBjb25zdCB0ZXN0RmlsZXNEaXIgPSBwYXRoLmpvaW4oX19kaXJuYW1lLCAndGVzdC1maWxlcycpO1xuICBjb25zdCB1cGxvYWREaXIgPSBwYXRoLmpvaW4oX19kaXJuYW1lLCAnLi4vLi4vdXBsb2FkcycpO1xuXG4gIGJlZm9yZUVhY2goKCkgPT4ge1xuICAgIGplc3QuY2xlYXJBbGxNb2NrcygpO1xuICAgIFxuICAgIC8vIENyZWF0ZSB0ZXN0IGZpbGVzIGRpcmVjdG9yeVxuICAgIGlmICghZnMuZXhpc3RzU3luYyh0ZXN0RmlsZXNEaXIpKSB7XG4gICAgICBmcy5ta2RpclN5bmModGVzdEZpbGVzRGlyLCB7IHJlY3Vyc2l2ZTogdHJ1ZSB9KTtcbiAgICB9XG5cbiAgICAvLyBDcmVhdGUgdGVzdCBmaWxlc1xuICAgIGZzLndyaXRlRmlsZVN5bmMocGF0aC5qb2luKHRlc3RGaWxlc0RpciwgJ3Rlc3QtaW1hZ2UucG5nJyksICdtb2NrIHBuZyBjb250ZW50Jyk7XG4gICAgZnMud3JpdGVGaWxlU3luYyhwYXRoLmpvaW4odGVzdEZpbGVzRGlyLCAndGVzdC1kb2N1bWVudC5wZGYnKSwgJ21vY2sgcGRmIGNvbnRlbnQnKTtcbiAgICBmcy53cml0ZUZpbGVTeW5jKHBhdGguam9pbih0ZXN0RmlsZXNEaXIsICd0ZXN0LXJlY2VpcHQuanBnJyksICdtb2NrIGpwZyBjb250ZW50Jyk7XG4gICAgZnMud3JpdGVGaWxlU3luYyhwYXRoLmpvaW4odGVzdEZpbGVzRGlyLCAnZXJyb3ItbG9nLnR4dCcpLCAnbW9jayBlcnJvciBsb2cgY29udGVudCcpO1xuXG4gICAgLy8gTW9jayBzdG9yYWdlIG1ldGhvZHNcbiAgICBtb2NrU3RvcmFnZS5jcmVhdGVCdWcubW9ja1Jlc29sdmVkVmFsdWUoeyBcbiAgICAgIGlkOiAnYnVnLTEyMycsXG4gICAgICB0aXRsZTogJ1Rlc3QgQnVnJyxcbiAgICAgIGF0dGFjaG1lbnRDb3VudDogMSBcbiAgICB9KTtcbiAgICBcbiAgICBtb2NrU3RvcmFnZS5jcmVhdGVGZWF0dXJlUmVxdWVzdC5tb2NrUmVzb2x2ZWRWYWx1ZSh7IFxuICAgICAgaWQ6ICdmZWF0dXJlLTEyMycsXG4gICAgICB0aXRsZTogJ1Rlc3QgRmVhdHVyZScsXG4gICAgICBhdHRhY2htZW50Q291bnQ6IDEgXG4gICAgfSk7XG4gICAgXG4gICAgbW9ja1N0b3JhZ2UuY3JlYXRlRG9jdW1lbnQubW9ja1Jlc29sdmVkVmFsdWUoeyBcbiAgICAgIGlkOiAnZG9jLTEyMycsXG4gICAgICBuYW1lOiAnVGVzdCBEb2N1bWVudCcsXG4gICAgICBmaWxlUGF0aDogJ2dlbmVyYWwvdGVzdC1maWxlLnBkZidcbiAgICB9KTtcbiAgICBcbiAgICBtb2NrU3RvcmFnZS5jcmVhdGVCaWxsLm1vY2tSZXNvbHZlZFZhbHVlKHsgXG4gICAgICBpZDogJ2JpbGwtMTIzJyxcbiAgICAgIHRpdGxlOiAnVGVzdCBCaWxsJyxcbiAgICAgIGF0dGFjaG1lbnRDb3VudDogMSBcbiAgICB9KTtcblxuICAgIG1vY2tTdG9yYWdlLmdldFVzZXIubW9ja1Jlc29sdmVkVmFsdWUoe1xuICAgICAgaWQ6ICcxMjNlNDU2Ny1lODliLTEyZDMtYTQ1Ni00MjY2MTQxNzQwMDAnLFxuICAgICAgZW1haWw6ICd0ZXN0QGtvdmVvLmNvbScsXG4gICAgICByb2xlOiAnYWRtaW4nXG4gICAgfSk7XG4gIH0pO1xuXG4gIGFmdGVyRWFjaCgoKSA9PiB7XG4gICAgLy8gQ2xlYW4gdXAgdGVzdCBmaWxlc1xuICAgIGlmIChmcy5leGlzdHNTeW5jKHRlc3RGaWxlc0RpcikpIHtcbiAgICAgIGZzLnJtU3luYyh0ZXN0RmlsZXNEaXIsIHsgcmVjdXJzaXZlOiB0cnVlLCBmb3JjZTogdHJ1ZSB9KTtcbiAgICB9XG4gICAgXG4gICAgLy8gQ2xlYW4gdXAgdXBsb2FkIGRpcmVjdG9yeVxuICAgIGlmIChmcy5leGlzdHNTeW5jKHVwbG9hZERpcikpIHtcbiAgICAgIGNvbnN0IGZpbGVzID0gZnMucmVhZGRpclN5bmModXBsb2FkRGlyKTtcbiAgICAgIGZpbGVzLmZvckVhY2goZmlsZSA9PiB7XG4gICAgICAgIGlmIChmaWxlLnN0YXJ0c1dpdGgoJ3Rlc3QtJykgfHwgZmlsZS5pbmNsdWRlcygnbW9jaycpKSB7XG4gICAgICAgICAgZnMudW5saW5rU3luYyhwYXRoLmpvaW4odXBsb2FkRGlyLCBmaWxlKSk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH1cbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ0J1ZyBSZXBvcnQgRmlsZSBVcGxvYWRzJywgKCkgPT4ge1xuICAgIGl0KCdzaG91bGQgaGFuZGxlIGJ1ZyByZXBvcnQgd2l0aCBzaW5nbGUgZmlsZSBhdHRhY2htZW50JywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCByZXF1ZXN0KGFwcClcbiAgICAgICAgLnBvc3QoJy9hcGkvYnVncycpXG4gICAgICAgIC5maWVsZCgndGl0bGUnLCAnQnVnIHdpdGggU2NyZWVuc2hvdCcpXG4gICAgICAgIC5maWVsZCgnZGVzY3JpcHRpb24nLCAnVGhpcyBpcyBhIHRlc3QgYnVnIHJlcG9ydCB3aXRoIGZpbGUgYXR0YWNobWVudC4nKVxuICAgICAgICAuZmllbGQoJ2NhdGVnb3J5JywgJ3VpX3V4JylcbiAgICAgICAgLmZpZWxkKCdwYWdlJywgJ1Rlc3QgUGFnZScpXG4gICAgICAgIC5maWVsZCgncHJpb3JpdHknLCAnbWVkaXVtJylcbiAgICAgICAgLmZpZWxkKCdyZXByb2R1Y3Rpb25TdGVwcycsICdTdGVwIDE6IE9wZW4gYXBwXFxuU3RlcCAyOiBDbGljayBidXR0b25cXG5TdGVwIDM6IFNlZSBlcnJvcicpXG4gICAgICAgIC5hdHRhY2goJ2F0dGFjaG1lbnRzJywgcGF0aC5qb2luKHRlc3RGaWxlc0RpciwgJ3Rlc3QtaW1hZ2UucG5nJykpXG4gICAgICAgIC5leHBlY3QoMjAxKTtcblxuICAgICAgZXhwZWN0KHJlc3BvbnNlLmJvZHkpLnRvTWF0Y2hPYmplY3Qoe1xuICAgICAgICBpZDogZXhwZWN0LmFueShTdHJpbmcpLFxuICAgICAgICB0aXRsZTogJ0J1ZyB3aXRoIFNjcmVlbnNob3QnLFxuICAgICAgICBhdHRhY2htZW50Q291bnQ6IGV4cGVjdC5hbnkoTnVtYmVyKVxuICAgICAgfSk7XG5cbiAgICAgIGV4cGVjdChtb2NrU3RvcmFnZS5jcmVhdGVCdWcpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKFxuICAgICAgICBleHBlY3Qub2JqZWN0Q29udGFpbmluZyh7XG4gICAgICAgICAgdGl0bGU6ICdCdWcgd2l0aCBTY3JlZW5zaG90JyxcbiAgICAgICAgICBkZXNjcmlwdGlvbjogJ1RoaXMgaXMgYSB0ZXN0IGJ1ZyByZXBvcnQgd2l0aCBmaWxlIGF0dGFjaG1lbnQuJyxcbiAgICAgICAgICBjYXRlZ29yeTogJ3VpX3V4JyxcbiAgICAgICAgICBwYWdlOiAnVGVzdCBQYWdlJyxcbiAgICAgICAgICBwcmlvcml0eTogJ21lZGl1bSdcbiAgICAgICAgfSlcbiAgICAgICk7XG5cbiAgICAgIGV4cGVjdChtb2NrU3RvcmFnZS5jcmVhdGVEb2N1bWVudCkudG9IYXZlQmVlbkNhbGxlZFdpdGgoXG4gICAgICAgIGV4cGVjdC5vYmplY3RDb250YWluaW5nKHtcbiAgICAgICAgICBuYW1lOiAndGVzdC1pbWFnZS5wbmcnLFxuICAgICAgICAgIGRvY3VtZW50VHlwZTogJ2F0dGFjaG1lbnQnLFxuICAgICAgICAgIGZpbGVOYW1lOiAndGVzdC1pbWFnZS5wbmcnLFxuICAgICAgICAgIGF0dGFjaGVkVG9UeXBlOiAnYnVnJyxcbiAgICAgICAgICB1cGxvYWRlZEJ5SWQ6ICcxMjNlNDU2Ny1lODliLTEyZDMtYTQ1Ni00MjY2MTQxNzQwMDAnXG4gICAgICAgIH0pXG4gICAgICApO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBoYW5kbGUgYnVnIHJlcG9ydCB3aXRoIG11bHRpcGxlIGZpbGUgYXR0YWNobWVudHMnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHJlcXVlc3QoYXBwKVxuICAgICAgICAucG9zdCgnL2FwaS9idWdzJylcbiAgICAgICAgLmZpZWxkKCd0aXRsZScsICdCdWcgd2l0aCBNdWx0aXBsZSBGaWxlcycpXG4gICAgICAgIC5maWVsZCgnZGVzY3JpcHRpb24nLCAnQnVnIHJlcG9ydCB3aXRoIG11bHRpcGxlIGF0dGFjaG1lbnRzLicpXG4gICAgICAgIC5maWVsZCgnY2F0ZWdvcnknLCAnZnVuY3Rpb25hbGl0eScpXG4gICAgICAgIC5maWVsZCgncGFnZScsICdEYXNoYm9hcmQnKVxuICAgICAgICAuZmllbGQoJ3ByaW9yaXR5JywgJ2hpZ2gnKVxuICAgICAgICAuYXR0YWNoKCdhdHRhY2htZW50cycsIHBhdGguam9pbih0ZXN0RmlsZXNEaXIsICd0ZXN0LWltYWdlLnBuZycpKVxuICAgICAgICAuYXR0YWNoKCdhdHRhY2htZW50cycsIHBhdGguam9pbih0ZXN0RmlsZXNEaXIsICd0ZXN0LWRvY3VtZW50LnBkZicpKVxuICAgICAgICAuYXR0YWNoKCdhdHRhY2htZW50cycsIHBhdGguam9pbih0ZXN0RmlsZXNEaXIsICdlcnJvci1sb2cudHh0JykpXG4gICAgICAgIC5leHBlY3QoMjAxKTtcblxuICAgICAgZXhwZWN0KHJlc3BvbnNlLmJvZHkpLnRvTWF0Y2hPYmplY3Qoe1xuICAgICAgICBpZDogZXhwZWN0LmFueShTdHJpbmcpLFxuICAgICAgICB0aXRsZTogJ0J1ZyB3aXRoIE11bHRpcGxlIEZpbGVzJ1xuICAgICAgfSk7XG5cbiAgICAgIC8vIFNob3VsZCBjcmVhdGUgZG9jdW1lbnQgZm9yIGVhY2ggYXR0YWNobWVudFxuICAgICAgZXhwZWN0KG1vY2tTdG9yYWdlLmNyZWF0ZURvY3VtZW50KS50b0hhdmVCZWVuQ2FsbGVkVGltZXMoMyk7XG4gICAgICBleHBlY3QobW9ja1N0b3JhZ2UuY3JlYXRlRG9jdW1lbnQpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKFxuICAgICAgICBleHBlY3Qub2JqZWN0Q29udGFpbmluZyh7XG4gICAgICAgICAgbmFtZTogJ3Rlc3QtaW1hZ2UucG5nJyxcbiAgICAgICAgICBhdHRhY2hlZFRvVHlwZTogJ2J1ZydcbiAgICAgICAgfSlcbiAgICAgICk7XG4gICAgICBleHBlY3QobW9ja1N0b3JhZ2UuY3JlYXRlRG9jdW1lbnQpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKFxuICAgICAgICBleHBlY3Qub2JqZWN0Q29udGFpbmluZyh7XG4gICAgICAgICAgbmFtZTogJ3Rlc3QtZG9jdW1lbnQucGRmJyxcbiAgICAgICAgICBhdHRhY2hlZFRvVHlwZTogJ2J1ZydcbiAgICAgICAgfSlcbiAgICAgICk7XG4gICAgICBleHBlY3QobW9ja1N0b3JhZ2UuY3JlYXRlRG9jdW1lbnQpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKFxuICAgICAgICBleHBlY3Qub2JqZWN0Q29udGFpbmluZyh7XG4gICAgICAgICAgbmFtZTogJ2Vycm9yLWxvZy50eHQnLFxuICAgICAgICAgIGF0dGFjaGVkVG9UeXBlOiAnYnVnJ1xuICAgICAgICB9KVxuICAgICAgKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgcmVqZWN0IG92ZXJzaXplZCBmaWxlcyBpbiBidWcgcmVwb3J0cycsIGFzeW5jICgpID0+IHtcbiAgICAgIC8vIENyZWF0ZSBhIGxhcmdlIGZpbGUgKG92ZXIgMTBNQiBsaW1pdClcbiAgICAgIGNvbnN0IGxhcmdlRmlsZSA9IHBhdGguam9pbih0ZXN0RmlsZXNEaXIsICdsYXJnZS1maWxlLnBuZycpO1xuICAgICAgY29uc3QgbGFyZ2VDb250ZW50ID0gQnVmZmVyLmFsbG9jKDExICogMTAyNCAqIDEwMjQsICd4Jyk7IC8vIDExTUJcbiAgICAgIGZzLndyaXRlRmlsZVN5bmMobGFyZ2VGaWxlLCBsYXJnZUNvbnRlbnQpO1xuXG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHJlcXVlc3QoYXBwKVxuICAgICAgICAucG9zdCgnL2FwaS9idWdzJylcbiAgICAgICAgLmZpZWxkKCd0aXRsZScsICdCdWcgd2l0aCBMYXJnZSBGaWxlJylcbiAgICAgICAgLmZpZWxkKCdkZXNjcmlwdGlvbicsICdUZXN0aW5nIGZpbGUgc2l6ZSBsaW1pdHMuJylcbiAgICAgICAgLmZpZWxkKCdjYXRlZ29yeScsICd1aV91eCcpXG4gICAgICAgIC5maWVsZCgncGFnZScsICdUZXN0IFBhZ2UnKVxuICAgICAgICAuZmllbGQoJ3ByaW9yaXR5JywgJ21lZGl1bScpXG4gICAgICAgIC5hdHRhY2goJ2F0dGFjaG1lbnRzJywgbGFyZ2VGaWxlKVxuICAgICAgICAuZXhwZWN0KDQwMCk7XG5cbiAgICAgIGV4cGVjdChyZXNwb25zZS5ib2R5KS50b01hdGNoT2JqZWN0KHtcbiAgICAgICAgZXJyb3I6IGV4cGVjdC5zdHJpbmdNYXRjaGluZygvZmlsZS4qdG9vIGxhcmdlfHNpemUuKmxpbWl0L2kpXG4gICAgICB9KTtcblxuICAgICAgZXhwZWN0KG1vY2tTdG9yYWdlLmNyZWF0ZUJ1Zykubm90LnRvSGF2ZUJlZW5DYWxsZWQoKTtcbiAgICAgIGV4cGVjdChtb2NrU3RvcmFnZS5jcmVhdGVEb2N1bWVudCkubm90LnRvSGF2ZUJlZW5DYWxsZWQoKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgcmVqZWN0IGludmFsaWQgZmlsZSB0eXBlcyBpbiBidWcgcmVwb3J0cycsIGFzeW5jICgpID0+IHtcbiAgICAgIC8vIENyZWF0ZSBhbiBleGVjdXRhYmxlIGZpbGVcbiAgICAgIGNvbnN0IGV4ZWNGaWxlID0gcGF0aC5qb2luKHRlc3RGaWxlc0RpciwgJ21hbGljaW91cy5leGUnKTtcbiAgICAgIGZzLndyaXRlRmlsZVN5bmMoZXhlY0ZpbGUsICdmYWtlIGV4ZWN1dGFibGUgY29udGVudCcpO1xuXG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHJlcXVlc3QoYXBwKVxuICAgICAgICAucG9zdCgnL2FwaS9idWdzJylcbiAgICAgICAgLmZpZWxkKCd0aXRsZScsICdCdWcgd2l0aCBJbnZhbGlkIEZpbGUnKVxuICAgICAgICAuZmllbGQoJ2Rlc2NyaXB0aW9uJywgJ1Rlc3RpbmcgZmlsZSB0eXBlIHZhbGlkYXRpb24uJylcbiAgICAgICAgLmZpZWxkKCdjYXRlZ29yeScsICdzZWN1cml0eScpXG4gICAgICAgIC5maWVsZCgncGFnZScsICdUZXN0IFBhZ2UnKVxuICAgICAgICAuZmllbGQoJ3ByaW9yaXR5JywgJ2NyaXRpY2FsJylcbiAgICAgICAgLmF0dGFjaCgnYXR0YWNobWVudHMnLCBleGVjRmlsZSlcbiAgICAgICAgLmV4cGVjdCg0MDApO1xuXG4gICAgICBleHBlY3QocmVzcG9uc2UuYm9keSkudG9NYXRjaE9iamVjdCh7XG4gICAgICAgIGVycm9yOiBleHBlY3Quc3RyaW5nTWF0Y2hpbmcoL2ZpbGUuKnR5cGUuKm5vdC4qYWxsb3dlZHxpbnZhbGlkLipmaWxlLip0eXBlL2kpXG4gICAgICB9KTtcblxuICAgICAgZXhwZWN0KG1vY2tTdG9yYWdlLmNyZWF0ZUJ1Zykubm90LnRvSGF2ZUJlZW5DYWxsZWQoKTtcbiAgICAgIGV4cGVjdChtb2NrU3RvcmFnZS5jcmVhdGVEb2N1bWVudCkubm90LnRvSGF2ZUJlZW5DYWxsZWQoKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ0ZlYXR1cmUgUmVxdWVzdCBGaWxlIFVwbG9hZHMnLCAoKSA9PiB7XG4gICAgaXQoJ3Nob3VsZCBoYW5kbGUgZmVhdHVyZSByZXF1ZXN0IHdpdGggZGVzaWduIG1vY2t1cHMnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHJlcXVlc3QoYXBwKVxuICAgICAgICAucG9zdCgnL2FwaS9mZWF0dXJlLXJlcXVlc3RzJylcbiAgICAgICAgLmZpZWxkKCd0aXRsZScsICdOZXcgVUkgRmVhdHVyZScpXG4gICAgICAgIC5maWVsZCgnZGVzY3JpcHRpb24nLCAnRmVhdHVyZSByZXF1ZXN0IHdpdGggZGVzaWduIG1vY2t1cHMuJylcbiAgICAgICAgLmZpZWxkKCdjYXRlZ29yeScsICd1aV91eCcpXG4gICAgICAgIC5maWVsZCgncHJpb3JpdHknLCAnbWVkaXVtJylcbiAgICAgICAgLmF0dGFjaCgnYXR0YWNobWVudHMnLCBwYXRoLmpvaW4odGVzdEZpbGVzRGlyLCAndGVzdC1pbWFnZS5wbmcnKSlcbiAgICAgICAgLmF0dGFjaCgnYXR0YWNobWVudHMnLCBwYXRoLmpvaW4odGVzdEZpbGVzRGlyLCAndGVzdC1kb2N1bWVudC5wZGYnKSlcbiAgICAgICAgLmV4cGVjdCgyMDEpO1xuXG4gICAgICBleHBlY3QocmVzcG9uc2UuYm9keSkudG9NYXRjaE9iamVjdCh7XG4gICAgICAgIGlkOiBleHBlY3QuYW55KFN0cmluZyksXG4gICAgICAgIHRpdGxlOiAnTmV3IFVJIEZlYXR1cmUnXG4gICAgICB9KTtcblxuICAgICAgZXhwZWN0KG1vY2tTdG9yYWdlLmNyZWF0ZUZlYXR1cmVSZXF1ZXN0KS50b0hhdmVCZWVuQ2FsbGVkV2l0aChcbiAgICAgICAgZXhwZWN0Lm9iamVjdENvbnRhaW5pbmcoe1xuICAgICAgICAgIHRpdGxlOiAnTmV3IFVJIEZlYXR1cmUnLFxuICAgICAgICAgIGRlc2NyaXB0aW9uOiAnRmVhdHVyZSByZXF1ZXN0IHdpdGggZGVzaWduIG1vY2t1cHMuJyxcbiAgICAgICAgICBjYXRlZ29yeTogJ3VpX3V4JyxcbiAgICAgICAgICBwcmlvcml0eTogJ21lZGl1bSdcbiAgICAgICAgfSlcbiAgICAgICk7XG5cbiAgICAgIGV4cGVjdChtb2NrU3RvcmFnZS5jcmVhdGVEb2N1bWVudCkudG9IYXZlQmVlbkNhbGxlZFRpbWVzKDIpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCB2YWxpZGF0ZSBmZWF0dXJlIHJlcXVlc3QgZmlsZSB0eXBlcycsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IHNjcmlwdEZpbGUgPSBwYXRoLmpvaW4odGVzdEZpbGVzRGlyLCAnc2NyaXB0LmpzJyk7XG4gICAgICBmcy53cml0ZUZpbGVTeW5jKHNjcmlwdEZpbGUsICdjb25zb2xlLmxvZyhcInBvdGVudGlhbGx5IGRhbmdlcm91c1wiKTsnKTtcblxuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCByZXF1ZXN0KGFwcClcbiAgICAgICAgLnBvc3QoJy9hcGkvZmVhdHVyZS1yZXF1ZXN0cycpXG4gICAgICAgIC5maWVsZCgndGl0bGUnLCAnRmVhdHVyZSB3aXRoIFNjcmlwdCcpXG4gICAgICAgIC5maWVsZCgnZGVzY3JpcHRpb24nLCAnVGVzdGluZyBzY3JpcHQgZmlsZSB1cGxvYWQuJylcbiAgICAgICAgLmZpZWxkKCdjYXRlZ29yeScsICdmdW5jdGlvbmFsaXR5JylcbiAgICAgICAgLmZpZWxkKCdwcmlvcml0eScsICdsb3cnKVxuICAgICAgICAuYXR0YWNoKCdhdHRhY2htZW50cycsIHNjcmlwdEZpbGUpXG4gICAgICAgIC5leHBlY3QoNDAwKTtcblxuICAgICAgZXhwZWN0KHJlc3BvbnNlLmJvZHkpLnRvTWF0Y2hPYmplY3Qoe1xuICAgICAgICBlcnJvcjogZXhwZWN0LnN0cmluZ01hdGNoaW5nKC9maWxlLip0eXBlLipub3QuKmFsbG93ZWQvaSlcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnRG9jdW1lbnQgVXBsb2FkIEFQSScsICgpID0+IHtcbiAgICBpdCgnc2hvdWxkIGhhbmRsZSBkb2N1bWVudCB1cGxvYWQgd2l0aCBtZXRhZGF0YScsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgcmVxdWVzdChhcHApXG4gICAgICAgIC5wb3N0KCcvYXBpL2RvY3VtZW50cycpXG4gICAgICAgIC5maWVsZCgnbmFtZScsICdMZWdhbCBDb250cmFjdCcpXG4gICAgICAgIC5maWVsZCgnZGVzY3JpcHRpb24nLCAnSW1wb3J0YW50IGxlZ2FsIGRvY3VtZW50JylcbiAgICAgICAgLmZpZWxkKCdkb2N1bWVudFR5cGUnLCAnY29udHJhY3QnKVxuICAgICAgICAuZmllbGQoJ2lzVmlzaWJsZVRvVGVuYW50cycsICdmYWxzZScpXG4gICAgICAgIC5hdHRhY2goJ2ZpbGUnLCBwYXRoLmpvaW4odGVzdEZpbGVzRGlyLCAndGVzdC1kb2N1bWVudC5wZGYnKSlcbiAgICAgICAgLmV4cGVjdCgyMDEpO1xuXG4gICAgICBleHBlY3QocmVzcG9uc2UuYm9keSkudG9NYXRjaE9iamVjdCh7XG4gICAgICAgIGlkOiBleHBlY3QuYW55KFN0cmluZyksXG4gICAgICAgIG5hbWU6ICdMZWdhbCBDb250cmFjdCcsXG4gICAgICAgIGZpbGVQYXRoOiBleHBlY3Quc3RyaW5nTWF0Y2hpbmcoL2dlbmVyYWxcXC8uKlxcLnBkZiQvKVxuICAgICAgfSk7XG5cbiAgICAgIGV4cGVjdChtb2NrU3RvcmFnZS5jcmVhdGVEb2N1bWVudCkudG9IYXZlQmVlbkNhbGxlZFdpdGgoXG4gICAgICAgIGV4cGVjdC5vYmplY3RDb250YWluaW5nKHtcbiAgICAgICAgICBuYW1lOiAnTGVnYWwgQ29udHJhY3QnLFxuICAgICAgICAgIGRlc2NyaXB0aW9uOiAnSW1wb3J0YW50IGxlZ2FsIGRvY3VtZW50JyxcbiAgICAgICAgICBkb2N1bWVudFR5cGU6ICdjb250cmFjdCcsXG4gICAgICAgICAgZmlsZU5hbWU6ICd0ZXN0LWRvY3VtZW50LnBkZicsXG4gICAgICAgICAgaXNWaXNpYmxlVG9UZW5hbnRzOiBmYWxzZSxcbiAgICAgICAgICB1cGxvYWRlZEJ5SWQ6ICcxMjNlNDU2Ny1lODliLTEyZDMtYTQ1Ni00MjY2MTQxNzQwMDAnXG4gICAgICAgIH0pXG4gICAgICApO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBzZXJ2ZSB1cGxvYWRlZCBkb2N1bWVudHMnLCBhc3luYyAoKSA9PiB7XG4gICAgICAvLyBGaXJzdCB1cGxvYWQgYSBkb2N1bWVudFxuICAgICAgY29uc3QgdXBsb2FkUmVzcG9uc2UgPSBhd2FpdCByZXF1ZXN0KGFwcClcbiAgICAgICAgLnBvc3QoJy9hcGkvZG9jdW1lbnRzJylcbiAgICAgICAgLmZpZWxkKCduYW1lJywgJ1Rlc3QgRG9jdW1lbnQnKVxuICAgICAgICAuZmllbGQoJ2RvY3VtZW50VHlwZScsICdnZW5lcmFsJylcbiAgICAgICAgLmF0dGFjaCgnZmlsZScsIHBhdGguam9pbih0ZXN0RmlsZXNEaXIsICd0ZXN0LWRvY3VtZW50LnBkZicpKVxuICAgICAgICAuZXhwZWN0KDIwMSk7XG5cbiAgICAgIGNvbnN0IGRvY3VtZW50SWQgPSB1cGxvYWRSZXNwb25zZS5ib2R5LmlkO1xuXG4gICAgICAvLyBNb2NrIHRoZSBkb2N1bWVudCByZXRyaWV2YWxcbiAgICAgIG1vY2tTdG9yYWdlLmdldERvY3VtZW50ID0gamVzdC5mbigpLm1vY2tSZXNvbHZlZFZhbHVlKHtcbiAgICAgICAgaWQ6IGRvY3VtZW50SWQsXG4gICAgICAgIG5hbWU6ICdUZXN0IERvY3VtZW50JyxcbiAgICAgICAgZmlsZVBhdGg6ICdnZW5lcmFsL3Rlc3QtZG9jdW1lbnQucGRmJyxcbiAgICAgICAgZmlsZU5hbWU6ICd0ZXN0LWRvY3VtZW50LnBkZicsXG4gICAgICAgIG1pbWVUeXBlOiAnYXBwbGljYXRpb24vcGRmJ1xuICAgICAgfSk7XG5cbiAgICAgIC8vIFRoZW4gdHJ5IHRvIGFjY2VzcyB0aGUgZG9jdW1lbnRcbiAgICAgIGNvbnN0IGFjY2Vzc1Jlc3BvbnNlID0gYXdhaXQgcmVxdWVzdChhcHApXG4gICAgICAgIC5nZXQoYC9hcGkvZG9jdW1lbnRzLyR7ZG9jdW1lbnRJZH0vZmlsZWApXG4gICAgICAgIC5leHBlY3QoMjAwKTtcblxuICAgICAgZXhwZWN0KGFjY2Vzc1Jlc3BvbnNlLmhlYWRlcnNbJ2NvbnRlbnQtdHlwZSddKS50b01hdGNoKC9hcHBsaWNhdGlvblxcL3BkZi8pO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCB2YWxpZGF0ZSBkb2N1bWVudCBhY2Nlc3MgcGVybWlzc2lvbnMnLCBhc3luYyAoKSA9PiB7XG4gICAgICAvLyBNb2NrIHVuYXV0aG9yaXplZCB1c2VyXG4gICAgICBqZXN0LmNsZWFyQWxsTW9ja3MoKTtcbiAgICAgIFxuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCByZXF1ZXN0KGFwcClcbiAgICAgICAgLmdldCgnL2FwaS9kb2N1bWVudHMvdW5hdXRob3JpemVkLWRvYy9maWxlJylcbiAgICAgICAgLmV4cGVjdCg0MDQpO1xuXG4gICAgICBleHBlY3QocmVzcG9uc2UuYm9keSkudG9NYXRjaE9iamVjdCh7XG4gICAgICAgIGVycm9yOiBleHBlY3QuYW55KFN0cmluZylcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnQmlsbCBSZWNlaXB0IFVwbG9hZHMnLCAoKSA9PiB7XG4gICAgaXQoJ3Nob3VsZCBoYW5kbGUgYmlsbCBjcmVhdGlvbiB3aXRoIHJlY2VpcHQgYXR0YWNobWVudCcsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgcmVxdWVzdChhcHApXG4gICAgICAgIC5wb3N0KCcvYXBpL2JpbGxzJylcbiAgICAgICAgLmZpZWxkKCd0aXRsZScsICdFbGVjdHJpY2l0eSBCaWxsIC0gSmFudWFyeSAyMDI1JylcbiAgICAgICAgLmZpZWxkKCdhbW91bnQnLCAnMTUwLjc1JylcbiAgICAgICAgLmZpZWxkKCdkdWVEYXRlJywgJzIwMjUtMDItMTUnKVxuICAgICAgICAuZmllbGQoJ2NhdGVnb3J5JywgJ3V0aWxpdGllcycpXG4gICAgICAgIC5hdHRhY2goJ3JlY2VpcHRzJywgcGF0aC5qb2luKHRlc3RGaWxlc0RpciwgJ3Rlc3QtcmVjZWlwdC5qcGcnKSlcbiAgICAgICAgLmV4cGVjdCgyMDEpO1xuXG4gICAgICBleHBlY3QocmVzcG9uc2UuYm9keSkudG9NYXRjaE9iamVjdCh7XG4gICAgICAgIGlkOiBleHBlY3QuYW55KFN0cmluZyksXG4gICAgICAgIHRpdGxlOiAnRWxlY3RyaWNpdHkgQmlsbCAtIEphbnVhcnkgMjAyNScsXG4gICAgICAgIGFtb3VudDogMTUwLjc1XG4gICAgICB9KTtcblxuICAgICAgZXhwZWN0KG1vY2tTdG9yYWdlLmNyZWF0ZUJpbGwpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKFxuICAgICAgICBleHBlY3Qub2JqZWN0Q29udGFpbmluZyh7XG4gICAgICAgICAgdGl0bGU6ICdFbGVjdHJpY2l0eSBCaWxsIC0gSmFudWFyeSAyMDI1JyxcbiAgICAgICAgICBhbW91bnQ6IDE1MC43NSxcbiAgICAgICAgICBjYXRlZ29yeTogJ3V0aWxpdGllcydcbiAgICAgICAgfSlcbiAgICAgICk7XG5cbiAgICAgIGV4cGVjdChtb2NrU3RvcmFnZS5jcmVhdGVEb2N1bWVudCkudG9IYXZlQmVlbkNhbGxlZFdpdGgoXG4gICAgICAgIGV4cGVjdC5vYmplY3RDb250YWluaW5nKHtcbiAgICAgICAgICBuYW1lOiAndGVzdC1yZWNlaXB0LmpwZycsXG4gICAgICAgICAgZG9jdW1lbnRUeXBlOiAncmVjZWlwdCcsXG4gICAgICAgICAgYXR0YWNoZWRUb1R5cGU6ICdiaWxsJ1xuICAgICAgICB9KVxuICAgICAgKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgdmFsaWRhdGUgcmVjZWlwdCBmaWxlIGZvcm1hdHMnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBpbnZhbGlkUmVjZWlwdEZpbGUgPSBwYXRoLmpvaW4odGVzdEZpbGVzRGlyLCAncmVjZWlwdC50eHQnKTtcbiAgICAgIGZzLndyaXRlRmlsZVN5bmMoaW52YWxpZFJlY2VpcHRGaWxlLCAnVGhpcyBpcyBub3QgYW4gaW1hZ2UgcmVjZWlwdCcpO1xuXG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHJlcXVlc3QoYXBwKVxuICAgICAgICAucG9zdCgnL2FwaS9iaWxscycpXG4gICAgICAgIC5maWVsZCgndGl0bGUnLCAnQmlsbCB3aXRoIEludmFsaWQgUmVjZWlwdCcpXG4gICAgICAgIC5maWVsZCgnYW1vdW50JywgJzEwMC4wMCcpXG4gICAgICAgIC5maWVsZCgnZHVlRGF0ZScsICcyMDI1LTAzLTAxJylcbiAgICAgICAgLmZpZWxkKCdjYXRlZ29yeScsICdtYWludGVuYW5jZScpXG4gICAgICAgIC5hdHRhY2goJ3JlY2VpcHRzJywgaW52YWxpZFJlY2VpcHRGaWxlKVxuICAgICAgICAuZXhwZWN0KDQwMCk7XG5cbiAgICAgIGV4cGVjdChyZXNwb25zZS5ib2R5KS50b01hdGNoT2JqZWN0KHtcbiAgICAgICAgZXJyb3I6IGV4cGVjdC5zdHJpbmdNYXRjaGluZygvcmVjZWlwdC4qbXVzdC4qYmUuKmltYWdlfGludmFsaWQuKnJlY2VpcHQuKmZvcm1hdC9pKVxuICAgICAgfSk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdGaWxlIFN0b3JhZ2UgYW5kIENsZWFudXAnLCAoKSA9PiB7XG4gICAgaXQoJ3Nob3VsZCBjbGVhbiB1cCB0ZW1wb3JhcnkgZmlsZXMgb24gdXBsb2FkIGZhaWx1cmUnLCBhc3luYyAoKSA9PiB7XG4gICAgICAvLyBNb2NrIGEgc3RvcmFnZSBmYWlsdXJlXG4gICAgICBtb2NrU3RvcmFnZS5jcmVhdGVCdWcubW9ja1JlamVjdGVkVmFsdWUobmV3IEVycm9yKCdEYXRhYmFzZSBlcnJvcicpKTtcblxuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCByZXF1ZXN0KGFwcClcbiAgICAgICAgLnBvc3QoJy9hcGkvYnVncycpXG4gICAgICAgIC5maWVsZCgndGl0bGUnLCAnQnVnIHRoYXQgd2lsbCBmYWlsJylcbiAgICAgICAgLmZpZWxkKCdkZXNjcmlwdGlvbicsICdUaGlzIHNob3VsZCB0cmlnZ2VyIGNsZWFudXAuJylcbiAgICAgICAgLmZpZWxkKCdjYXRlZ29yeScsICd1aV91eCcpXG4gICAgICAgIC5maWVsZCgncGFnZScsICdUZXN0IFBhZ2UnKVxuICAgICAgICAuZmllbGQoJ3ByaW9yaXR5JywgJ21lZGl1bScpXG4gICAgICAgIC5hdHRhY2goJ2F0dGFjaG1lbnRzJywgcGF0aC5qb2luKHRlc3RGaWxlc0RpciwgJ3Rlc3QtaW1hZ2UucG5nJykpXG4gICAgICAgIC5leHBlY3QoNTAwKTtcblxuICAgICAgZXhwZWN0KHJlc3BvbnNlLmJvZHkpLnRvTWF0Y2hPYmplY3Qoe1xuICAgICAgICBlcnJvcjogZXhwZWN0LmFueShTdHJpbmcpXG4gICAgICB9KTtcblxuICAgICAgLy8gVmVyaWZ5IHRlbXBvcmFyeSBmaWxlcyB3ZXJlIGNsZWFuZWQgdXBcbiAgICAgIGNvbnN0IHRlbXBGaWxlcyA9IGZzLnJlYWRkaXJTeW5jKHVwbG9hZERpcikuZmlsdGVyKGZpbGUgPT4gXG4gICAgICAgIGZpbGUuaW5jbHVkZXMoJ3Rlc3QtaW1hZ2UnKSB8fCBmaWxlLmluY2x1ZGVzKCd0ZW1wJylcbiAgICAgICk7XG4gICAgICBleHBlY3QodGVtcEZpbGVzKS50b0hhdmVMZW5ndGgoMCk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGhhbmRsZSBjb25jdXJyZW50IGZpbGUgdXBsb2FkcycsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IHVwbG9hZFByb21pc2VzID0gQXJyYXkuZnJvbSh7IGxlbmd0aDogNSB9LCAoXywgaSkgPT4gXG4gICAgICAgIHJlcXVlc3QoYXBwKVxuICAgICAgICAgIC5wb3N0KCcvYXBpL2J1Z3MnKVxuICAgICAgICAgIC5maWVsZCgndGl0bGUnLCBgQ29uY3VycmVudCBCdWcgJHtpICsgMX1gKVxuICAgICAgICAgIC5maWVsZCgnZGVzY3JpcHRpb24nLCBgQ29uY3VycmVudCB1cGxvYWQgdGVzdCAke2kgKyAxfWApXG4gICAgICAgICAgLmZpZWxkKCdjYXRlZ29yeScsICdwZXJmb3JtYW5jZScpXG4gICAgICAgICAgLmZpZWxkKCdwYWdlJywgJ1Rlc3QgUGFnZScpXG4gICAgICAgICAgLmZpZWxkKCdwcmlvcml0eScsICdsb3cnKVxuICAgICAgICAgIC5hdHRhY2goJ2F0dGFjaG1lbnRzJywgcGF0aC5qb2luKHRlc3RGaWxlc0RpciwgJ3Rlc3QtaW1hZ2UucG5nJykpXG4gICAgICApO1xuXG4gICAgICBjb25zdCByZXNwb25zZXMgPSBhd2FpdCBQcm9taXNlLmFsbCh1cGxvYWRQcm9taXNlcyk7XG5cbiAgICAgIHJlc3BvbnNlcy5mb3JFYWNoKChyZXNwb25zZSwgaSkgPT4ge1xuICAgICAgICBleHBlY3QocmVzcG9uc2Uuc3RhdHVzKS50b0JlKDIwMSk7XG4gICAgICAgIGV4cGVjdChyZXNwb25zZS5ib2R5KS50b01hdGNoT2JqZWN0KHtcbiAgICAgICAgICBpZDogZXhwZWN0LmFueShTdHJpbmcpLFxuICAgICAgICAgIHRpdGxlOiBgQ29uY3VycmVudCBCdWcgJHtpICsgMX1gXG4gICAgICAgIH0pO1xuICAgICAgfSk7XG5cbiAgICAgIGV4cGVjdChtb2NrU3RvcmFnZS5jcmVhdGVCdWcpLnRvSGF2ZUJlZW5DYWxsZWRUaW1lcyg1KTtcbiAgICAgIGV4cGVjdChtb2NrU3RvcmFnZS5jcmVhdGVEb2N1bWVudCkudG9IYXZlQmVlbkNhbGxlZFRpbWVzKDUpO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnRmlsZSBWYWxpZGF0aW9uIEVkZ2UgQ2FzZXMnLCAoKSA9PiB7XG4gICAgaXQoJ3Nob3VsZCBoYW5kbGUgZW1wdHkgZmlsZXMnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBlbXB0eUZpbGUgPSBwYXRoLmpvaW4odGVzdEZpbGVzRGlyLCAnZW1wdHkucG5nJyk7XG4gICAgICBmcy53cml0ZUZpbGVTeW5jKGVtcHR5RmlsZSwgJycpO1xuXG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHJlcXVlc3QoYXBwKVxuICAgICAgICAucG9zdCgnL2FwaS9idWdzJylcbiAgICAgICAgLmZpZWxkKCd0aXRsZScsICdCdWcgd2l0aCBFbXB0eSBGaWxlJylcbiAgICAgICAgLmZpZWxkKCdkZXNjcmlwdGlvbicsICdUZXN0aW5nIGVtcHR5IGZpbGUgaGFuZGxpbmcuJylcbiAgICAgICAgLmZpZWxkKCdjYXRlZ29yeScsICd1aV91eCcpXG4gICAgICAgIC5maWVsZCgncGFnZScsICdUZXN0IFBhZ2UnKVxuICAgICAgICAuZmllbGQoJ3ByaW9yaXR5JywgJ21lZGl1bScpXG4gICAgICAgIC5hdHRhY2goJ2F0dGFjaG1lbnRzJywgZW1wdHlGaWxlKVxuICAgICAgICAuZXhwZWN0KDQwMCk7XG5cbiAgICAgIGV4cGVjdChyZXNwb25zZS5ib2R5KS50b01hdGNoT2JqZWN0KHtcbiAgICAgICAgZXJyb3I6IGV4cGVjdC5zdHJpbmdNYXRjaGluZygvZmlsZS4qZW1wdHl8aW52YWxpZC4qZmlsZS4qc2l6ZS9pKVxuICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGhhbmRsZSBjb3JydXB0ZWQgZmlsZXMnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBjb3JydXB0ZWRGaWxlID0gcGF0aC5qb2luKHRlc3RGaWxlc0RpciwgJ2NvcnJ1cHRlZC5wZGYnKTtcbiAgICAgIGZzLndyaXRlRmlsZVN5bmMoY29ycnVwdGVkRmlsZSwgJ1RoaXMgaXMgbm90IGEgdmFsaWQgUERGIGNvbnRlbnQgYnV0IGNsYWltcyB0byBiZScpO1xuXG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHJlcXVlc3QoYXBwKVxuICAgICAgICAucG9zdCgnL2FwaS9kb2N1bWVudHMnKVxuICAgICAgICAuZmllbGQoJ25hbWUnLCAnQ29ycnVwdGVkIERvY3VtZW50JylcbiAgICAgICAgLmZpZWxkKCdkb2N1bWVudFR5cGUnLCAnZ2VuZXJhbCcpXG4gICAgICAgIC5hdHRhY2goJ2ZpbGUnLCBjb3JydXB0ZWRGaWxlKVxuICAgICAgICAuZXhwZWN0KDQwMCk7XG5cbiAgICAgIGV4cGVjdChyZXNwb25zZS5ib2R5KS50b01hdGNoT2JqZWN0KHtcbiAgICAgICAgZXJyb3I6IGV4cGVjdC5zdHJpbmdNYXRjaGluZygvaW52YWxpZC4qZmlsZS4qZm9ybWF0fGNvcnJ1cHRlZC4qZmlsZS9pKVxuICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGhhbmRsZSBmaWxlbmFtZSB3aXRoIHNwZWNpYWwgY2hhcmFjdGVycycsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IHNwZWNpYWxOYW1lRmlsZSA9IHBhdGguam9pbih0ZXN0RmlsZXNEaXIsICdmaWxlIHdpdGggc3BhY2VzICYgc8OtbWLDtmxzLnBkZicpO1xuICAgICAgZnMud3JpdGVGaWxlU3luYyhzcGVjaWFsTmFtZUZpbGUsICdtb2NrIHBkZiBjb250ZW50Jyk7XG5cbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgcmVxdWVzdChhcHApXG4gICAgICAgIC5wb3N0KCcvYXBpL2RvY3VtZW50cycpXG4gICAgICAgIC5maWVsZCgnbmFtZScsICdEb2N1bWVudCB3aXRoIFNwZWNpYWwgRmlsZW5hbWUnKVxuICAgICAgICAuZmllbGQoJ2RvY3VtZW50VHlwZScsICdnZW5lcmFsJylcbiAgICAgICAgLmF0dGFjaCgnZmlsZScsIHNwZWNpYWxOYW1lRmlsZSlcbiAgICAgICAgLmV4cGVjdCgyMDEpO1xuXG4gICAgICBleHBlY3QocmVzcG9uc2UuYm9keSkudG9NYXRjaE9iamVjdCh7XG4gICAgICAgIGlkOiBleHBlY3QuYW55KFN0cmluZyksXG4gICAgICAgIG5hbWU6ICdEb2N1bWVudCB3aXRoIFNwZWNpYWwgRmlsZW5hbWUnXG4gICAgICB9KTtcblxuICAgICAgZXhwZWN0KG1vY2tTdG9yYWdlLmNyZWF0ZURvY3VtZW50KS50b0hhdmVCZWVuQ2FsbGVkV2l0aChcbiAgICAgICAgZXhwZWN0Lm9iamVjdENvbnRhaW5pbmcoe1xuICAgICAgICAgIG5hbWU6ICdEb2N1bWVudCB3aXRoIFNwZWNpYWwgRmlsZW5hbWUnLFxuICAgICAgICAgIGZpbGVOYW1lOiBleHBlY3Quc3RyaW5nTWF0Y2hpbmcoL15bYS16QS1aMC05Xy1dK1xcLnBkZiQvKSwgLy8gU2hvdWxkIGJlIHNhbml0aXplZFxuICAgICAgICAgIGZpbGVQYXRoOiBleHBlY3Quc3RyaW5nTWF0Y2hpbmcoL2dlbmVyYWxcXC8uKlxcLnBkZiQvKVxuICAgICAgICB9KVxuICAgICAgKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgaGFuZGxlIG1heGltdW0gdG90YWwgdXBsb2FkIHNpemUgbGltaXQnLCBhc3luYyAoKSA9PiB7XG4gICAgICAvLyBDcmVhdGUgbXVsdGlwbGUgbGFyZ2UgZmlsZXMgdGhhdCBleGNlZWQgdG90YWwgbGltaXRcbiAgICAgIGNvbnN0IGxhcmdlRmlsZXMgPSBbXTtcbiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgMzsgaSsrKSB7XG4gICAgICAgIGNvbnN0IGZpbGVOYW1lID0gYGxhcmdlLWZpbGUtJHtpfS5wbmdgO1xuICAgICAgICBjb25zdCBmaWxlUGF0aCA9IHBhdGguam9pbih0ZXN0RmlsZXNEaXIsIGZpbGVOYW1lKTtcbiAgICAgICAgY29uc3QgY29udGVudCA9IEJ1ZmZlci5hbGxvYyg1ICogMTAyNCAqIDEwMjQsICd4Jyk7IC8vIDVNQiBlYWNoXG4gICAgICAgIGZzLndyaXRlRmlsZVN5bmMoZmlsZVBhdGgsIGNvbnRlbnQpO1xuICAgICAgICBsYXJnZUZpbGVzLnB1c2goZmlsZVBhdGgpO1xuICAgICAgfVxuXG4gICAgICBjb25zdCByZXF1ZXN0X2J1aWxkZXIgPSByZXF1ZXN0KGFwcClcbiAgICAgICAgLnBvc3QoJy9hcGkvYnVncycpXG4gICAgICAgIC5maWVsZCgndGl0bGUnLCAnQnVnIHdpdGggTXVsdGlwbGUgTGFyZ2UgRmlsZXMnKVxuICAgICAgICAuZmllbGQoJ2Rlc2NyaXB0aW9uJywgJ1Rlc3RpbmcgdG90YWwgc2l6ZSBsaW1pdHMuJylcbiAgICAgICAgLmZpZWxkKCdjYXRlZ29yeScsICdwZXJmb3JtYW5jZScpXG4gICAgICAgIC5maWVsZCgncGFnZScsICdUZXN0IFBhZ2UnKVxuICAgICAgICAuZmllbGQoJ3ByaW9yaXR5JywgJ21lZGl1bScpO1xuXG4gICAgICAvLyBBdHRhY2ggYWxsIGxhcmdlIGZpbGVzXG4gICAgICBsYXJnZUZpbGVzLmZvckVhY2goZmlsZVBhdGggPT4ge1xuICAgICAgICByZXF1ZXN0X2J1aWxkZXIuYXR0YWNoKCdhdHRhY2htZW50cycsIGZpbGVQYXRoKTtcbiAgICAgIH0pO1xuXG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHJlcXVlc3RfYnVpbGRlci5leHBlY3QoNDAwKTtcblxuICAgICAgZXhwZWN0KHJlc3BvbnNlLmJvZHkpLnRvTWF0Y2hPYmplY3Qoe1xuICAgICAgICBlcnJvcjogZXhwZWN0LnN0cmluZ01hdGNoaW5nKC90b3RhbC4qc2l6ZS4qZXhjZWVkZWR8dG9vIG1hbnkuKmxhcmdlLipmaWxlcy9pKVxuICAgICAgfSk7XG4gICAgfSk7XG4gIH0pO1xufSk7Il0sInZlcnNpb24iOjN9