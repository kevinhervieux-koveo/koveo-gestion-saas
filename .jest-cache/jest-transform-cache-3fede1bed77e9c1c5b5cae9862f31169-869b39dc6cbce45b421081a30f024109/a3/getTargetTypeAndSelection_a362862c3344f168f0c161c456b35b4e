186e415d028e027856cde60b44c5de27
'use strict';
var UI = require('../../document/UI.js');
require('../../utils/dataTransfer/Clipboard.js');
var isContentEditable = require('../../utils/edit/isContentEditable.js');
var selection = require('../../utils/focus/selection.js');
/**
 * Determine which selection logic and selection ranges to consider.
 */ function getTargetTypeAndSelection(node) {
    const element = getElement(node);
    if (element && selection.hasOwnSelection(element)) {
        return {
            type: 'input',
            selection: UI.getUISelection(element)
        };
    }
    const selection$1 = element === null || element === undefined ? undefined : element.ownerDocument.getSelection();
    // It is possible to extend a single-range selection into a contenteditable.
    // This results in the range acting like a range outside of contenteditable.
    const isCE = isContentEditable.getContentEditable(node) && (selection$1 === null || selection$1 === undefined ? undefined : selection$1.anchorNode) && isContentEditable.getContentEditable(selection$1.anchorNode);
    return {
        type: isCE ? 'contenteditable' : 'default',
        selection: selection$1
    };
}
function getElement(node) {
    return node.nodeType === 1 ? node : node.parentElement;
}
exports.getTargetTypeAndSelection = getTargetTypeAndSelection;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiL2hvbWUvcnVubmVyL3dvcmtzcGFjZS9ub2RlX21vZHVsZXMvQHRlc3RpbmctbGlicmFyeS91c2VyLWV2ZW50L2Rpc3QvY2pzL2V2ZW50L3NlbGVjdGlvbi9nZXRUYXJnZXRUeXBlQW5kU2VsZWN0aW9uLmpzIiwibWFwcGluZ3MiOiJBQUFBLFlBQVksQ0FBQztBQUViLElBQUksRUFBRSxHQUFHLE9BQU8sQ0FBQyxzQkFBc0IsQ0FBQyxDQUFDO0FBQ3pDLE9BQU8sQ0FBQyx1Q0FBdUMsQ0FBQyxDQUFDO0FBQ2pELElBQUksaUJBQWlCLEdBQUcsT0FBTyxDQUFDLHVDQUF1QyxDQUFDLENBQUM7QUFDekUsSUFBSSxTQUFTLEdBQUcsT0FBTyxDQUFDLGdDQUFnQyxDQUFDLENBQUM7QUFFMUQ7O0dBRUcsQ0FBQyxTQUFTLHlCQUF5QixDQUFDLElBQUk7SUFDdkMsTUFBTSxPQUFPLEdBQUcsVUFBVSxDQUFDLElBQUksQ0FBQyxDQUFDO0lBQ2pDLElBQUksT0FBTyxJQUFJLFNBQVMsQ0FBQyxlQUFlLENBQUMsT0FBTyxDQUFDLEVBQUUsQ0FBQztRQUNoRCxPQUFPO1lBQ0gsSUFBSSxFQUFFLE9BQU87WUFDYixTQUFTLEVBQUUsRUFBRSxDQUFDLGNBQWMsQ0FBQyxPQUFPLENBQUM7U0FDeEMsQ0FBQztJQUNOLENBQUM7SUFDRCxNQUFNLFdBQVcsR0FBRyxPQUFPLEtBQUssSUFBSSxJQUFJLE9BQU8sS0FBSyxTQUFTLENBQUMsQ0FBQyxDQUFDLFNBQVMsQ0FBQyxDQUFDLENBQUMsT0FBTyxDQUFDLGFBQWEsQ0FBQyxZQUFZLEVBQUUsQ0FBQztJQUNqSCw0RUFBNEU7SUFDNUUsNEVBQTRFO0lBQzVFLE1BQU0sSUFBSSxHQUFHLGlCQUFpQixDQUFDLGtCQUFrQixDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsV0FBVyxLQUFLLElBQUksSUFBSSxXQUFXLEtBQUssU0FBUyxDQUFDLENBQUMsQ0FBQyxTQUFTLENBQUMsQ0FBQyxDQUFDLFdBQVcsQ0FBQyxVQUFVLENBQUMsSUFBSSxpQkFBaUIsQ0FBQyxrQkFBa0IsQ0FBQyxXQUFXLENBQUMsVUFBVSxDQUFDLENBQUM7SUFDcE4sT0FBTztRQUNILElBQUksRUFBRSxJQUFJLENBQUMsQ0FBQyxDQUFDLGlCQUFpQixDQUFDLENBQUMsQ0FBQyxTQUFTO1FBQzFDLFNBQVMsRUFBRSxXQUFXO0tBQ3pCLENBQUM7QUFDTixDQUFDO0FBQ0QsU0FBUyxVQUFVLENBQUMsSUFBSTtJQUNwQixPQUFPLElBQUksQ0FBQyxRQUFRLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxhQUFhLENBQUM7QUFDM0QsQ0FBQztBQUVELE9BQU8sQ0FBQyx5QkFBeUIsR0FBRyx5QkFBeUIsQ0FBQyIsIm5hbWVzIjpbXSwic291cmNlcyI6WyIvaG9tZS9ydW5uZXIvd29ya3NwYWNlL25vZGVfbW9kdWxlcy9AdGVzdGluZy1saWJyYXJ5L3VzZXItZXZlbnQvZGlzdC9janMvZXZlbnQvc2VsZWN0aW9uL2dldFRhcmdldFR5cGVBbmRTZWxlY3Rpb24uanMiXSwic291cmNlc0NvbnRlbnQiOlsiJ3VzZSBzdHJpY3QnO1xuXG52YXIgVUkgPSByZXF1aXJlKCcuLi8uLi9kb2N1bWVudC9VSS5qcycpO1xucmVxdWlyZSgnLi4vLi4vdXRpbHMvZGF0YVRyYW5zZmVyL0NsaXBib2FyZC5qcycpO1xudmFyIGlzQ29udGVudEVkaXRhYmxlID0gcmVxdWlyZSgnLi4vLi4vdXRpbHMvZWRpdC9pc0NvbnRlbnRFZGl0YWJsZS5qcycpO1xudmFyIHNlbGVjdGlvbiA9IHJlcXVpcmUoJy4uLy4uL3V0aWxzL2ZvY3VzL3NlbGVjdGlvbi5qcycpO1xuXG4vKipcbiAqIERldGVybWluZSB3aGljaCBzZWxlY3Rpb24gbG9naWMgYW5kIHNlbGVjdGlvbiByYW5nZXMgdG8gY29uc2lkZXIuXG4gKi8gZnVuY3Rpb24gZ2V0VGFyZ2V0VHlwZUFuZFNlbGVjdGlvbihub2RlKSB7XG4gICAgY29uc3QgZWxlbWVudCA9IGdldEVsZW1lbnQobm9kZSk7XG4gICAgaWYgKGVsZW1lbnQgJiYgc2VsZWN0aW9uLmhhc093blNlbGVjdGlvbihlbGVtZW50KSkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgdHlwZTogJ2lucHV0JyxcbiAgICAgICAgICAgIHNlbGVjdGlvbjogVUkuZ2V0VUlTZWxlY3Rpb24oZWxlbWVudClcbiAgICAgICAgfTtcbiAgICB9XG4gICAgY29uc3Qgc2VsZWN0aW9uJDEgPSBlbGVtZW50ID09PSBudWxsIHx8IGVsZW1lbnQgPT09IHVuZGVmaW5lZCA/IHVuZGVmaW5lZCA6IGVsZW1lbnQub3duZXJEb2N1bWVudC5nZXRTZWxlY3Rpb24oKTtcbiAgICAvLyBJdCBpcyBwb3NzaWJsZSB0byBleHRlbmQgYSBzaW5nbGUtcmFuZ2Ugc2VsZWN0aW9uIGludG8gYSBjb250ZW50ZWRpdGFibGUuXG4gICAgLy8gVGhpcyByZXN1bHRzIGluIHRoZSByYW5nZSBhY3RpbmcgbGlrZSBhIHJhbmdlIG91dHNpZGUgb2YgY29udGVudGVkaXRhYmxlLlxuICAgIGNvbnN0IGlzQ0UgPSBpc0NvbnRlbnRFZGl0YWJsZS5nZXRDb250ZW50RWRpdGFibGUobm9kZSkgJiYgKHNlbGVjdGlvbiQxID09PSBudWxsIHx8IHNlbGVjdGlvbiQxID09PSB1bmRlZmluZWQgPyB1bmRlZmluZWQgOiBzZWxlY3Rpb24kMS5hbmNob3JOb2RlKSAmJiBpc0NvbnRlbnRFZGl0YWJsZS5nZXRDb250ZW50RWRpdGFibGUoc2VsZWN0aW9uJDEuYW5jaG9yTm9kZSk7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgdHlwZTogaXNDRSA/ICdjb250ZW50ZWRpdGFibGUnIDogJ2RlZmF1bHQnLFxuICAgICAgICBzZWxlY3Rpb246IHNlbGVjdGlvbiQxXG4gICAgfTtcbn1cbmZ1bmN0aW9uIGdldEVsZW1lbnQobm9kZSkge1xuICAgIHJldHVybiBub2RlLm5vZGVUeXBlID09PSAxID8gbm9kZSA6IG5vZGUucGFyZW50RWxlbWVudDtcbn1cblxuZXhwb3J0cy5nZXRUYXJnZXRUeXBlQW5kU2VsZWN0aW9uID0gZ2V0VGFyZ2V0VHlwZUFuZFNlbGVjdGlvbjtcbiJdLCJ2ZXJzaW9uIjozfQ==