{"file":"/home/runner/workspace/client/src/pages/admin/permissions.tsx","mappings":"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","names":[],"sources":["/home/runner/workspace/client/src/pages/admin/permissions.tsx"],"sourcesContent":["import { Header } from '@/components/layout/header';\nimport { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card';\nimport { Badge } from '@/components/ui/badge';\nimport { Button } from '@/components/ui/button';\nimport {\n  Table,\n  TableBody,\n  TableCell,\n  TableHead,\n  TableHeader,\n  TableRow,\n} from '@/components/ui/table';\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from '@/components/ui/tabs';\nimport {\n  Select,\n  SelectContent,\n  SelectItem,\n  SelectTrigger,\n  SelectValue,\n} from '@/components/ui/select';\nimport { Input } from '@/components/ui/input';\nimport { Label } from '@/components/ui/label';\nimport { Switch } from '@/components/ui/switch';\nimport { useQuery, useMutation } from '@tanstack/react-query';\nimport { useLanguage } from '@/hooks/use-language';\nimport {\n  Shield,\n  Users,\n  Settings,\n  Plus,\n  Search,\n  Filter,\n  Edit,\n  Save,\n  X,\n  Check,\n  AlertTriangle,\n} from 'lucide-react';\nimport { useState, useEffect } from 'react';\nimport { queryClient, apiRequest } from '@/lib/queryClient';\nimport { useToast } from '@/hooks/use-toast';\n\n// Permissions config reference for display purposes\nconst permissionsConfig = {\n  admin: { length: 148 },\n  manager: { length: 70 },\n  tenant: { length: 9 },\n  resident: { length: 9 },\n};\n\n/**\n *\n */\ninterface Permission {\n  id: string;\n  name: string;\n  displayName: string;\n  description: string;\n  resourceType: string;\n  action: string;\n  isActive: boolean;\n  createdAt: string;\n}\n\n/**\n *\n */\ninterface RolePermission {\n  id: string;\n  role: string;\n  permissionId: string;\n  permission?: Permission;\n  grantedBy: string;\n  grantedAt: string;\n}\n\n/**\n *\n */\ninterface UserPermission {\n  id: string;\n  userId: string;\n  permissionId: string;\n  permission?: Permission;\n  granted: boolean;\n  grantedBy: string;\n  reason?: string;\n  grantedAt: string;\n}\n\n/**\n *\n */\ninterface User {\n  id: string;\n  email: string;\n  firstName: string;\n  lastName: string;\n  role: string;\n  isActive: boolean;\n}\n\n/**\n * RBAC Permissions Management Page\n * Shows actual permissions being used in the platform and provides management capabilities.\n */\nexport default function Permissions() {\n  const { t } = useLanguage();\n  const { toast } = useToast();\n  const [activeTab, setActiveTab] = useState('users');\n  const [searchQuery, setSearchQuery] = useState('');\n  const [filterRole, setFilterRole] = useState('all');\n  const [editingUser, setEditingUser] = useState<string | null>(null);\n  const [showNewPermissionForm, setShowNewPermissionForm] = useState(false);\n  const [selectedCategory, setSelectedCategory] = useState('all');\n  const [currentPage, setCurrentPage] = useState(1);\n  const itemsPerPage = 5;\n  // Additional filters\n  const [filterUserStatus, setFilterUserStatus] = useState('all'); // active, inactive, all\n  const [filterPermissionStatus, setFilterPermissionStatus] = useState('all'); // granted, revoked, all\n  const [permissionSearchQuery, setPermissionSearchQuery] = useState('');\n  const [filterActionType, setFilterActionType] = useState('all'); // read, write, delete, all\n  const [sortBy, setSortBy] = useState('name'); // name, resource, action, date\n\n  // Fetch permissions matrix (includes all permission data grouped by resource)\n  const { data: permissionsMatrix, isLoading: matrixLoading } = useQuery<{\n    permissionsByResource: Record<string, Permission[]>;\n    roleMatrix: Record<string, string[]>;\n    permissions: Permission[];\n    rolePermissions: RolePermission[];\n  }>({\n    queryKey: ['/api/permissions-matrix'],\n  });\n\n  // Fetch user permissions\n  const { data: userPermissions, isLoading: userPermissionsLoading } = useQuery<UserPermission[]>({\n    queryKey: ['/api/user-permissions'],\n  });\n\n  // Fetch users\n  const { data: users, isLoading: usersLoading } = useQuery<User[]>({\n    queryKey: ['/api/users'],\n  });\n\n  const isLoading = matrixLoading || userPermissionsLoading || usersLoading;\n\n  // Extract data from matrix\n  const permissions = permissionsMatrix?.permissions || [];\n  const rolePermissions = permissionsMatrix?.rolePermissions || [];\n  const permissionsByResource = permissionsMatrix?.permissionsByResource || {};\n  const roleMatrix = permissionsMatrix?.roleMatrix || {};\n\n  // Group permissions by role for backward compatibility\n  const permissionsByRole = rolePermissions.reduce(\n    (acc, rp) => {\n      if (!acc[rp.role]) {\n        acc[rp.role] = [];\n      }\n      acc[rp.role].push(rp);\n      return acc;\n    },\n    {} as Record<string, RolePermission[]>\n  );\n\n  // Available roles (now from actual RBAC system)\n  const roles = ['admin', 'manager', 'tenant', 'resident'];\n\n  // Fetch permission categories for filtering\n  const { data: permissionCategories } = useQuery<any[]>({\n    queryKey: ['/api/permission-categories'],\n  });\n\n  // Get unique categories from permissions\n  const categories = permissionCategories?.map((cat) => cat.name) || [];\n\n  // Filter users based on search, role, and status\n  const filteredUsers =\n    users?.filter((user) => {\n      const matchesSearch =\n        searchQuery === '' ||\n        user.email.toLowerCase().includes(searchQuery.toLowerCase()) ||\n        `${user.firstName} ${user.lastName}`.toLowerCase().includes(searchQuery.toLowerCase());\n      const matchesRole = filterRole === 'all' || user.role === filterRole;\n      const matchesStatus =\n        filterUserStatus === 'all' ||\n        (filterUserStatus === 'active' && user.isActive) ||\n        (filterUserStatus === 'inactive' && !user.isActive);\n\n      // Filter by permission status if specified\n      if (filterPermissionStatus !== 'all') {\n        const userSpecificPermissions =\n          userPermissions?.filter((up) => up.userId === user.id) || [];\n        const hasGrantedPermissions = userSpecificPermissions.some((up) => up.granted);\n        const hasRevokedPermissions = userSpecificPermissions.some((up) => !up.granted);\n\n        if (filterPermissionStatus === 'granted' && !hasGrantedPermissions) {\n          return false;\n        }\n        if (filterPermissionStatus === 'revoked' && !hasRevokedPermissions) {\n          return false;\n        }\n      }\n\n      return matchesSearch && matchesRole && matchesStatus;\n    }) || [];\n\n  // Pagination calculations\n  const totalUsers = filteredUsers.length;\n  const totalPages = Math.ceil(totalUsers / itemsPerPage);\n  const startIndex = (currentPage - 1) * itemsPerPage;\n  const endIndex = startIndex + itemsPerPage;\n  const currentUsers = filteredUsers.slice(startIndex, endIndex);\n\n  // Reset page when filters change\n  const handleSearchChange = (value: string) => {\n    setSearchQuery(value);\n    setCurrentPage(1);\n  };\n\n  const handleRoleChange = (value: string) => {\n    setFilterRole(value);\n    setCurrentPage(1);\n  };\n\n  // Set default category to first available category if none selected\n  useEffect(() => {\n    const availableCategories = Object.keys(permissionsByResource);\n    if (!selectedCategory && availableCategories.length > 0) {\n      setSelectedCategory(availableCategories[0]);\n    }\n  }, [permissionsByResource, selectedCategory]);\n\n  // Filter permissions by category, search, and action type\n  const filteredPermissions =\n    permissions?.filter((permission) => {\n      // Category filter\n      if (selectedCategory !== 'all' && permission.resourceType !== selectedCategory) {\n        return false;\n      }\n\n      // Search filter\n      if (permissionSearchQuery) {\n        const searchLower = permissionSearchQuery.toLowerCase();\n        const matchesSearch =\n          permission.name.toLowerCase().includes(searchLower) ||\n          permission.displayName.toLowerCase().includes(searchLower) ||\n          permission.description.toLowerCase().includes(searchLower) ||\n          permission.resourceType.toLowerCase().includes(searchLower);\n        if (!matchesSearch) {\n          return false;\n        }\n      }\n\n      // Action type filter\n      if (filterActionType !== 'all') {\n        const actionMatches = permission.action\n          .toLowerCase()\n          .includes(filterActionType.toLowerCase());\n        if (!actionMatches) {\n          return false;\n        }\n      }\n\n      return true;\n    }) || [];\n\n  // Sort permissions\n  const sortedPermissions = [...filteredPermissions].sort((a, b) => {\n    switch (sortBy) {\n      case 'name':\n        return a.displayName.localeCompare(b.displayName);\n      case 'resource':\n        return a.resourceType.localeCompare(b.resourceType);\n      case 'action':\n        return a.action.localeCompare(b.action);\n      case 'date':\n        return new Date(b.createdAt).getTime() - new Date(a.createdAt).getTime();\n      default:\n        return 0;\n    }\n  });\n\n  // Get unique action types for filter\n  const actionTypes = [...new Set(permissions?.map((p) => p.action) || [])];\n\n  // Reset filters functions\n  const resetUserFilters = () => {\n    setSearchQuery('');\n    setFilterRole('all');\n    setFilterUserStatus('all');\n    setFilterPermissionStatus('all');\n    setCurrentPage(1);\n  };\n\n  const resetPermissionFilters = () => {\n    setPermissionSearchQuery('');\n    setSelectedCategory('all');\n    setFilterActionType('all');\n    setSortBy('name');\n  };\n\n  // Mutations for managing permissions\n  const grantUserPermissionMutation = useMutation({\n    mutationFn: (data: { userId: string; permissionId: string; reason?: string }) =>\n      apiRequest('POST', '/api/user-permissions', data),\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: ['/api/user-permissions'] });\n      toast({\n        title: 'Permission Granted',\n        description: 'User permission has been successfully granted.',\n      });\n    },\n    onError: (error: any) => {\n      toast({\n        title: 'Error',\n        description: error.response?.data?.message || 'Failed to grant permission',\n        variant: 'destructive',\n      });\n    },\n  });\n\n  const validatePermissionMutation = useMutation({\n    mutationFn: (permission: string) =>\n      apiRequest('POST', '/api/permissions/validate', { permission }),\n    onSuccess: (data: any) => {\n      toast({\n        title: 'Permission Validation',\n        description: `${data.message} for role: ${data.role}`,\n        variant: data.hasPermission ? 'default' : 'destructive',\n      });\n    },\n  });\n\n  return (\n    <div className='flex-1 flex flex-col overflow-hidden'>\n      <Header\n        title='RBAC Permissions'\n        subtitle='Manage role-based access control and user permissions'\n      />\n\n      <div className='flex-1 overflow-auto p-6'>\n        <div className='max-w-7xl mx-auto space-y-6'>\n          {/* Overview Cards */}\n          <div className='grid grid-cols-1 md:grid-cols-4 gap-6'>\n            <Card\n              className='hover:shadow-md transition-shadow cursor-pointer'\n              onClick={() => setActiveTab('permissions')}\n            >\n              <CardContent className='p-6'>\n                <div className='flex items-center justify-between'>\n                  <div>\n                    <p className='text-sm font-medium text-gray-600'>System Permissions</p>\n                    <p className='text-2xl font-bold text-koveo-navy'>{permissions?.length || 0}</p>\n                    <p className='text-xs text-gray-500 mt-1'>Active permissions</p>\n                  </div>\n                  <Shield className='h-8 w-8 text-koveo-navy' />\n                </div>\n              </CardContent>\n            </Card>\n\n            <Card\n              className='hover:shadow-md transition-shadow cursor-pointer'\n              onClick={() => setActiveTab('permissions')}\n            >\n              <CardContent className='p-6'>\n                <div className='flex items-center justify-between'>\n                  <div>\n                    <p className='text-sm font-medium text-gray-600'>Role Hierarchy</p>\n                    <p className='text-2xl font-bold text-koveo-navy'>{roles.length}</p>\n                    <p className='text-xs text-gray-500 mt-1'>\n                      Admin → Manager → Resident → Tenant\n                    </p>\n                  </div>\n                  <Users className='h-8 w-8 text-koveo-navy' />\n                </div>\n              </CardContent>\n            </Card>\n\n            <Card\n              className='hover:shadow-md transition-shadow cursor-pointer'\n              onClick={() => setActiveTab('permissions')}\n            >\n              <CardContent className='p-6'>\n                <div className='flex items-center justify-between'>\n                  <div>\n                    <p className='text-sm font-medium text-gray-600'>Permission Matrix</p>\n                    <p className='text-2xl font-bold text-koveo-navy'>12</p>\n                    <p className='text-xs text-gray-500 mt-1'>Permission categories</p>\n                  </div>\n                  <Settings className='h-8 w-8 text-koveo-navy' />\n                </div>\n              </CardContent>\n            </Card>\n\n            <Card\n              className='hover:shadow-md transition-shadow cursor-pointer'\n              onClick={() => setActiveTab('users')}\n            >\n              <CardContent className='p-6'>\n                <div className='flex items-center justify-between'>\n                  <div>\n                    <p className='text-sm font-medium text-gray-600'>User Overrides</p>\n                    <p className='text-2xl font-bold text-koveo-navy'>\n                      {userPermissions?.length || 0}\n                    </p>\n                    <p className='text-xs text-gray-500 mt-1'>\n                      {userPermissions?.length === 0 ? 'Role-based only' : 'Custom permissions'}\n                    </p>\n                  </div>\n                  <Shield className='h-8 w-8 text-koveo-navy' />\n                </div>\n              </CardContent>\n            </Card>\n          </div>\n\n          {/* Main Content Tabs */}\n          <Tabs value={activeTab} onValueChange={setActiveTab} className='w-full'>\n            <TabsList className='grid w-full grid-cols-2'>\n              <TabsTrigger value='users'>User Permissions</TabsTrigger>\n              <TabsTrigger value='permissions'>All Permissions</TabsTrigger>\n            </TabsList>\n\n            {/* User Permissions Tab */}\n            <TabsContent value='users' className='space-y-6'>\n              <Card>\n                <CardHeader>\n                  <CardTitle className='flex items-center gap-2'>\n                    <Shield className='h-5 w-5' />\n                    User-Specific Permissions\n                  </CardTitle>\n                </CardHeader>\n                <CardContent>\n                  {/* Enhanced Search and Filter Controls */}\n                  <div className='space-y-4 mb-6'>\n                    {/* Primary filters row */}\n                    <div className='flex gap-4'>\n                      <div className='flex-1'>\n                        <div className='relative'>\n                          <Search className='absolute left-3 top-3 h-4 w-4 text-gray-400' />\n                          <Input\n                            placeholder='Search users by name or email...'\n                            value={searchQuery}\n                            onChange={(e) => handleSearchChange(e.target.value)}\n                            className='pl-10'\n                            data-testid='input-user-search'\n                          />\n                        </div>\n                      </div>\n                      <Select value={filterRole} onValueChange={handleRoleChange}>\n                        <SelectTrigger className='w-40' data-testid='select-role-filter'>\n                          <SelectValue placeholder='Filter by role' />\n                        </SelectTrigger>\n                        <SelectContent>\n                          <SelectItem value='all'>All Roles</SelectItem>\n                          {roles.map((role) => (\n                            <SelectItem key={role} value={role}>\n                              {role.charAt(0).toUpperCase() + role.slice(1)}\n                            </SelectItem>\n                          ))}\n                        </SelectContent>\n                      </Select>\n                    </div>\n\n                    {/* Secondary filters row */}\n                    <div className='flex gap-4 items-center'>\n                      <Select value={filterUserStatus} onValueChange={setFilterUserStatus}>\n                        <SelectTrigger className='w-40' data-testid='select-user-status-filter'>\n                          <SelectValue placeholder='User status' />\n                        </SelectTrigger>\n                        <SelectContent>\n                          <SelectItem value='all'>All Users</SelectItem>\n                          <SelectItem value='active'>Active Only</SelectItem>\n                          <SelectItem value='inactive'>Inactive Only</SelectItem>\n                        </SelectContent>\n                      </Select>\n\n                      <Select\n                        value={filterPermissionStatus}\n                        onValueChange={setFilterPermissionStatus}\n                      >\n                        <SelectTrigger\n                          className='w-48'\n                          data-testid='select-permission-status-filter'\n                        >\n                          <SelectValue placeholder='Permission status' />\n                        </SelectTrigger>\n                        <SelectContent>\n                          <SelectItem value='all'>All Permission Types</SelectItem>\n                          <SelectItem value='granted'>Has Granted Permissions</SelectItem>\n                          <SelectItem value='revoked'>Has Revoked Permissions</SelectItem>\n                        </SelectContent>\n                      </Select>\n\n                      <Button\n                        variant='outline'\n                        size='sm'\n                        onClick={resetUserFilters}\n                        className='flex items-center gap-2'\n                        data-testid='button-reset-user-filters'\n                      >\n                        <X className='h-4 w-4' />\n                        Reset Filters\n                      </Button>\n                    </div>\n\n                    {/* Filter summary */}\n                    <div className='flex items-center gap-4 text-sm text-gray-600'>\n                      <span>\n                        Showing {filteredUsers.length} of {users?.length || 0} users\n                      </span>\n                      {(searchQuery ||\n                        filterRole !== 'all' ||\n                        filterUserStatus !== 'all' ||\n                        filterPermissionStatus !== 'all') && (\n                        <div className='flex items-center gap-2'>\n                          <Filter className='h-4 w-4' />\n                          <span>Filters active</span>\n                        </div>\n                      )}\n                    </div>\n                  </div>\n\n                  {isLoading ? (\n                    <div className='flex justify-center items-center py-8'>\n                      <div className='animate-spin rounded-full h-8 w-8 border-b-2 border-koveo-navy'></div>\n                    </div>\n                  ) : (\n                    <>\n                      <div className='space-y-4'>\n                        {currentUsers.map((user) => {\n                          const userSpecificPermissions =\n                            userPermissions?.filter((up) => up.userId === user.id) || [];\n                          const rolePermissionsCount = permissionsByRole[user.role]?.length || 0;\n                          const totalPermissions =\n                            rolePermissionsCount +\n                            userSpecificPermissions.filter((up) => up.granted).length;\n\n                          return (\n                            <div\n                              key={user.id}\n                              className='border rounded-lg p-6 hover:shadow-md transition-shadow'\n                            >\n                              <div className='flex items-center justify-between mb-4'>\n                                <div className='flex items-center space-x-3'>\n                                  <div className='w-10 h-10 bg-koveo-navy rounded-full flex items-center justify-center'>\n                                    <span className='text-white text-sm font-medium'>\n                                      {user.firstName?.charAt(0)}\n                                      {user.lastName?.charAt(0)}\n                                    </span>\n                                  </div>\n                                  <div>\n                                    <h4 className='font-semibold text-gray-900'>\n                                      {user.firstName} {user.lastName}\n                                    </h4>\n                                    <p className='text-sm text-gray-600'>{user.email}</p>\n                                  </div>\n                                </div>\n                                <div className='flex items-center gap-2'>\n                                  <Badge variant='outline' className='capitalize font-medium'>\n                                    {user.role}\n                                  </Badge>\n                                  <Badge variant={user.isActive ? 'default' : 'secondary'}>\n                                    {user.isActive ? 'Active' : 'Inactive'}\n                                  </Badge>\n                                </div>\n                              </div>\n\n                              {/* Permission Summary */}\n                              <div className='grid grid-cols-3 gap-4 mb-4 p-3 bg-gray-50 rounded-lg'>\n                                <div className='text-center'>\n                                  <p className='text-2xl font-bold text-koveo-navy'>\n                                    {rolePermissionsCount}\n                                  </p>\n                                  <p className='text-xs text-gray-600'>Role Permissions</p>\n                                </div>\n                                <div className='text-center'>\n                                  <p className='text-2xl font-bold text-blue-600'>\n                                    {userSpecificPermissions.length}\n                                  </p>\n                                  <p className='text-xs text-gray-600'>User Overrides</p>\n                                </div>\n                                <div className='text-center'>\n                                  <p className='text-2xl font-bold text-green-600'>\n                                    {totalPermissions}\n                                  </p>\n                                  <p className='text-xs text-gray-600'>Total Permissions</p>\n                                </div>\n                              </div>\n\n                              {/* User-specific permissions */}\n                              {userSpecificPermissions.length > 0 ? (\n                                <div className='space-y-2'>\n                                  <h5 className='font-medium text-gray-900 flex items-center gap-2'>\n                                    <Settings className='h-4 w-4' />\n                                    User-Specific Permissions ({userSpecificPermissions.length})\n                                  </h5>\n                                  <div className='grid grid-cols-1 md:grid-cols-2 gap-2'>\n                                    {userSpecificPermissions.map((up) => (\n                                      <div\n                                        key={up.id}\n                                        className={`text-sm px-3 py-2 rounded-lg border flex items-center justify-between ${\n                                          up.granted\n                                            ? 'bg-green-50 border-green-200 text-green-800'\n                                            : 'bg-red-50 border-red-200 text-red-800'\n                                        }`}\n                                      >\n                                        <div className='flex-1'>\n                                          <p className='font-medium'>\n                                            {up.permission?.displayName || up.permissionId}\n                                          </p>\n                                          {up.reason && (\n                                            <p className='text-xs opacity-75 mt-1'>{up.reason}</p>\n                                          )}\n                                        </div>\n                                        <div className='flex items-center gap-2'>\n                                          <Badge\n                                            variant={up.granted ? 'default' : 'destructive'}\n                                            className='text-xs'\n                                          >\n                                            {up.granted ? 'Granted' : 'Revoked'}\n                                          </Badge>\n                                        </div>\n                                      </div>\n                                    ))}\n                                  </div>\n                                  <div className='text-xs text-gray-500 mt-2'>\n                                    Last modified:{' '}\n                                    {new Date(\n                                      userSpecificPermissions[0]?.grantedAt\n                                    ).toLocaleDateString()}\n                                  </div>\n                                </div>\n                              ) : (\n                                <div className='text-center py-4 text-gray-500'>\n                                  <Shield className='w-8 h-8 mx-auto mb-2 text-gray-400' />\n                                  <p className='text-sm'>No user-specific permission overrides</p>\n                                  <p className='text-xs text-gray-400'>\n                                    User inherits all permissions from {user.role} role\n                                  </p>\n                                </div>\n                              )}\n\n                              {/* Action buttons */}\n                              <div className='flex gap-2 mt-4 pt-4 border-t'>\n                                <Button\n                                  variant='outline'\n                                  size='sm'\n                                  onClick={() =>\n                                    setEditingUser(editingUser === user.id ? null : user.id)\n                                  }\n                                >\n                                  <Edit className='h-4 w-4 mr-2' />\n                                  {editingUser === user.id ? 'Cancel' : 'Manage Permissions'}\n                                </Button>\n                                <Button\n                                  variant='ghost'\n                                  size='sm'\n                                  onClick={() => {\n                                    // View detailed permissions for this user\n                                    toast({\n                                      title: 'User Details',\n                                      description: `${user.firstName} ${user.lastName} has ${totalPermissions} total permissions`,\n                                    });\n                                  }}\n                                >\n                                  <Users className='h-4 w-4 mr-2' />\n                                  View Details\n                                </Button>\n                              </div>\n\n                              {/* Expandable permission management form */}\n                              {editingUser === user.id && (\n                                <div className='mt-4 p-4 bg-blue-50 rounded-lg border border-blue-200'>\n                                  <h6 className='font-medium text-blue-900 mb-3'>\n                                    Manage User Permissions\n                                  </h6>\n                                  <div className='space-y-3'>\n                                    <Select\n                                      onValueChange={(permissionId) => {\n                                        grantUserPermissionMutation.mutate({\n                                          userId: user.id,\n                                          permissionId,\n                                          reason: 'Admin granted via permissions page',\n                                        });\n                                      }}\n                                    >\n                                      <SelectTrigger>\n                                        <SelectValue placeholder='Grant a new permission...' />\n                                      </SelectTrigger>\n                                      <SelectContent>\n                                        {permissions\n                                          .filter(\n                                            (p) =>\n                                              !userSpecificPermissions.some(\n                                                (up) => up.permissionId === p.id\n                                              )\n                                          )\n                                          .map((permission) => (\n                                            <SelectItem key={permission.id} value={permission.id}>\n                                              {permission.displayName} ({permission.resourceType})\n                                            </SelectItem>\n                                          ))}\n                                      </SelectContent>\n                                    </Select>\n                                    <div className='flex gap-2'>\n                                      <Button\n                                        variant='outline'\n                                        size='sm'\n                                        onClick={() => setEditingUser(null)}\n                                      >\n                                        Cancel\n                                      </Button>\n                                      <Button variant='ghost' size='sm' disabled>\n                                        <Badge variant='secondary'>Future: Bulk Actions</Badge>\n                                      </Button>\n                                    </div>\n                                  </div>\n                                </div>\n                              )}\n                            </div>\n                          );\n                        })}\n\n                        {filteredUsers.length === 0 && (\n                          <div className='text-center py-8 text-gray-500'>\n                            <Users className='w-12 h-12 mx-auto mb-4 text-gray-400' />\n                            <p>No users found matching your search criteria.</p>\n                          </div>\n                        )}\n                      </div>\n\n                      {/* Pagination Controls */}\n                      {totalPages > 1 && (\n                        <div className='flex justify-center items-center gap-4 mt-6'>\n                          <Button\n                            variant='outline'\n                            size='sm'\n                            onClick={() => setCurrentPage((prev) => Math.max(prev - 1, 1))}\n                            disabled={currentPage === 1}\n                          >\n                            Previous\n                          </Button>\n\n                          <div className='flex items-center gap-2'>\n                            <span className='text-sm text-gray-600'>Page</span>\n                            <Input\n                              type='number'\n                              min='1'\n                              max={totalPages}\n                              value={currentPage}\n                              onChange={(e) => {\n                                const page = parseInt(e.target.value);\n                                if (page >= 1 && page <= totalPages) {\n                                  setCurrentPage(page);\n                                }\n                              }}\n                              onBlur={(e) => {\n                                const page = parseInt(e.target.value);\n                                if (isNaN(page) || page < 1) {\n                                  setCurrentPage(1);\n                                } else if (page > totalPages) {\n                                  setCurrentPage(totalPages);\n                                }\n                              }}\n                              className='w-16 text-center'\n                            />\n                            <span className='text-sm text-gray-600'>of {totalPages}</span>\n                          </div>\n\n                          <Button\n                            variant='outline'\n                            size='sm'\n                            onClick={() => setCurrentPage((prev) => Math.min(prev + 1, totalPages))}\n                            disabled={currentPage === totalPages}\n                          >\n                            Next\n                          </Button>\n\n                          <div className='text-sm text-gray-600'>\n                            Showing {startIndex + 1}-{Math.min(endIndex, totalUsers)} of{' '}\n                            {totalUsers} users\n                          </div>\n                        </div>\n                      )}\n                    </>\n                  )}\n                </CardContent>\n              </Card>\n            </TabsContent>\n\n            {/* All Permissions Tab */}\n            <TabsContent value='permissions' className='space-y-6'>\n              <Card>\n                <CardHeader>\n                  <CardTitle className='flex items-center gap-2'>\n                    <Shield className='h-5 w-5' />\n                    All Permissions\n                  </CardTitle>\n                  <p className='text-sm text-gray-600'>\n                    Complete system permissions table with detailed information about each\n                    permission.\n                  </p>\n                </CardHeader>\n                <CardContent>\n                  {/* Enhanced Search and Filter for permissions */}\n                  <div className='space-y-4 mb-6'>\n                    {/* Primary filters row */}\n                    <div className='flex gap-4'>\n                      <div className='flex-1'>\n                        <div className='relative'>\n                          <Search className='absolute left-3 top-3 h-4 w-4 text-gray-400' />\n                          <Input\n                            placeholder='Search permissions by name, description, or resource type...'\n                            value={permissionSearchQuery}\n                            onChange={(e) => setPermissionSearchQuery(e.target.value)}\n                            className='pl-10'\n                            data-testid='input-permission-search'\n                          />\n                        </div>\n                      </div>\n                      <Select value={selectedCategory} onValueChange={setSelectedCategory}>\n                        <SelectTrigger className='w-48' data-testid='select-category-filter'>\n                          <SelectValue placeholder='Filter by category' />\n                        </SelectTrigger>\n                        <SelectContent>\n                          <SelectItem value='all'>All Categories</SelectItem>\n                          {Object.keys(permissionsByResource).map((category) => (\n                            <SelectItem key={category} value={category}>\n                              {category.charAt(0).toUpperCase() +\n                                category.slice(1).replace(/[_-]/g, ' ')}\n                            </SelectItem>\n                          ))}\n                        </SelectContent>\n                      </Select>\n                    </div>\n\n                    {/* Secondary filters row */}\n                    <div className='flex gap-4 items-center'>\n                      <Select value={filterActionType} onValueChange={setFilterActionType}>\n                        <SelectTrigger className='w-40' data-testid='select-action-filter'>\n                          <SelectValue placeholder='Action type' />\n                        </SelectTrigger>\n                        <SelectContent>\n                          <SelectItem value='all'>All Actions</SelectItem>\n                          {actionTypes.map((action) => (\n                            <SelectItem key={action} value={action}>\n                              {action.toUpperCase()}\n                            </SelectItem>\n                          ))}\n                        </SelectContent>\n                      </Select>\n\n                      <Select value={sortBy} onValueChange={setSortBy}>\n                        <SelectTrigger className='w-40' data-testid='select-sort-by'>\n                          <SelectValue placeholder='Sort by' />\n                        </SelectTrigger>\n                        <SelectContent>\n                          <SelectItem value='name'>Sort by Name</SelectItem>\n                          <SelectItem value='resource'>Sort by Resource</SelectItem>\n                          <SelectItem value='action'>Sort by Action</SelectItem>\n                          <SelectItem value='date'>Sort by Date</SelectItem>\n                        </SelectContent>\n                      </Select>\n\n                      <Button\n                        variant='outline'\n                        size='sm'\n                        onClick={resetPermissionFilters}\n                        className='flex items-center gap-2'\n                        data-testid='button-reset-permission-filters'\n                      >\n                        <X className='h-4 w-4' />\n                        Reset Filters\n                      </Button>\n                    </div>\n\n                    {/* Filter summary */}\n                    <div className='flex items-center gap-4 text-sm text-gray-600'>\n                      <span>\n                        Showing {sortedPermissions.length} of {permissions?.length || 0} permissions\n                      </span>\n                      {(permissionSearchQuery ||\n                        selectedCategory !== 'all' ||\n                        filterActionType !== 'all' ||\n                        sortBy !== 'name') && (\n                        <div className='flex items-center gap-2'>\n                          <Filter className='h-4 w-4' />\n                          <span>Filters active</span>\n                        </div>\n                      )}\n                    </div>\n                  </div>\n\n                  {isLoading ? (\n                    <div className='flex justify-center items-center py-8'>\n                      <div className='animate-spin rounded-full h-8 w-8 border-b-2 border-koveo-navy'></div>\n                    </div>\n                  ) : (\n                    <div className='overflow-x-auto'>\n                      <Table>\n                        <TableHeader>\n                          <TableRow className='bg-gray-50'>\n                            <TableHead className='font-semibold text-gray-900'>\n                              Permission ID\n                            </TableHead>\n                            <TableHead className='font-semibold text-gray-900'>\n                              Display Name\n                            </TableHead>\n                            <TableHead className='font-semibold text-gray-900'>\n                              Resource Type\n                            </TableHead>\n                            <TableHead className='font-semibold text-gray-900'>Action</TableHead>\n                            <TableHead className='text-center font-semibold text-gray-900'>\n                              Status\n                            </TableHead>\n                            <TableHead className='font-semibold text-gray-900'>\n                              Description\n                            </TableHead>\n                            <TableHead className='text-center font-semibold text-gray-900'>\n                              Roles\n                            </TableHead>\n                          </TableRow>\n                        </TableHeader>\n                        <TableBody>\n                          {sortedPermissions.map((permission) => {\n                            const rolesWithPermission = roles.filter((role) =>\n                              roleMatrix[role]?.includes(permission.id)\n                            );\n\n                            return (\n                              <TableRow key={permission.id} className='hover:bg-gray-50'>\n                                <TableCell className='font-mono text-xs text-gray-600'>\n                                  {permission.id}\n                                </TableCell>\n                                <TableCell className='font-medium text-gray-900'>\n                                  {permission.displayName}\n                                </TableCell>\n                                <TableCell className='capitalize'>\n                                  <Badge variant='outline'>\n                                    {permission.resourceType.replace('_', ' ')}\n                                  </Badge>\n                                </TableCell>\n                                <TableCell className='text-blue-600 font-medium uppercase'>\n                                  {permission.action}\n                                </TableCell>\n                                <TableCell className='text-center'>\n                                  <Badge variant={permission.isActive ? 'default' : 'secondary'}>\n                                    {permission.isActive ? 'Active' : 'Inactive'}\n                                  </Badge>\n                                </TableCell>\n                                <TableCell className='text-sm text-gray-600 max-w-md'>\n                                  {permission.description}\n                                </TableCell>\n                                <TableCell className='text-center'>\n                                  <div className='flex flex-wrap gap-1 justify-center'>\n                                    {rolesWithPermission.map((role) => (\n                                      <Badge key={role} variant='secondary' className='text-xs'>\n                                        {role.charAt(0).toUpperCase() + role.slice(1)}\n                                      </Badge>\n                                    ))}\n                                    {rolesWithPermission.length === 0 && (\n                                      <span className='text-xs text-gray-400'>None</span>\n                                    )}\n                                  </div>\n                                </TableCell>\n                              </TableRow>\n                            );\n                          })}\n                        </TableBody>\n                      </Table>\n\n                      {sortedPermissions.length === 0 && (\n                        <div className='text-center py-8 text-gray-500'>\n                          <Shield className='w-12 h-12 mx-auto mb-4 text-gray-400' />\n                          <p>No permissions found matching your search criteria.</p>\n                        </div>\n                      )}\n                    </div>\n                  )}\n                </CardContent>\n              </Card>\n            </TabsContent>\n          </Tabs>\n        </div>\n      </div>\n    </div>\n  );\n}\n"],"version":3}