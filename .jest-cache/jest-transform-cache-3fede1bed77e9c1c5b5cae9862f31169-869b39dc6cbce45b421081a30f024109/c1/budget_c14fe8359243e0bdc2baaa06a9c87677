ea7a24d366e384a341947afe88b5a76d
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const jsx_runtime_1 = require("react/jsx-runtime");
const header_1 = require("@/components/layout/header");
const use_language_1 = require("@/hooks/use-language");
const card_1 = require("@/components/ui/card");
const badge_1 = require("@/components/ui/badge");
const button_1 = require("@/components/ui/button");
const withHierarchicalSelection_1 = require("@/components/hoc/withHierarchicalSelection");
const wouter_1 = require("wouter");
const lucide_react_1 = require("lucide-react");
function BudgetInner({ organizationId, buildingId }) {
    const { t } = (0, use_language_1.useLanguage)();
    const [, navigate] = (0, wouter_1.useLocation)();
    const handleBackToOrganization = () => {
        navigate('/manager/budget');
    };
    const handleBackToBuilding = () => {
        navigate(`/manager/budget?organization=${organizationId}`);
    };
    return ((0, jsx_runtime_1.jsxs)("div", { className: 'flex-1 flex flex-col overflow-hidden', children: [(0, jsx_runtime_1.jsx)(header_1.Header, { title: t('budgetDashboard'), subtitle: t('budgetSubtitle') }), (organizationId || buildingId) && ((0, jsx_runtime_1.jsx)("div", { className: "p-4 border-b border-gray-200", children: (0, jsx_runtime_1.jsxs)(button_1.Button, { variant: "outline", onClick: buildingId ? handleBackToBuilding : handleBackToOrganization, className: "flex items-center gap-2", "data-testid": buildingId ? "button-back-to-building" : "button-back-to-organization", children: [(0, jsx_runtime_1.jsx)(lucide_react_1.ArrowLeft, { className: "w-4 h-4" }), buildingId ? t('building') : t('organization')] }) })), (0, jsx_runtime_1.jsx)("div", { className: 'flex-1 overflow-auto p-6', children: (0, jsx_runtime_1.jsxs)("div", { className: 'max-w-7xl mx-auto space-y-6', children: [(0, jsx_runtime_1.jsxs)("div", { className: 'grid grid-cols-1 md:grid-cols-4 gap-6', children: [(0, jsx_runtime_1.jsxs)(card_1.Card, { children: [(0, jsx_runtime_1.jsxs)(card_1.CardHeader, { className: 'flex flex-row items-center justify-between space-y-0 pb-2', children: [(0, jsx_runtime_1.jsx)(card_1.CardTitle, { className: 'text-sm font-medium', children: t('totalBudget') }), (0, jsx_runtime_1.jsx)(lucide_react_1.DollarSign, { className: 'h-4 w-4 text-muted-foreground' })] }), (0, jsx_runtime_1.jsxs)(card_1.CardContent, { children: [(0, jsx_runtime_1.jsx)("div", { className: 'text-2xl font-bold', children: "$125,000" }), (0, jsx_runtime_1.jsxs)("p", { className: 'text-xs text-muted-foreground', children: [(0, jsx_runtime_1.jsx)("span", { className: 'text-green-600', children: "+2.1%" }), " ", t('fromLastYear')] })] })] }), (0, jsx_runtime_1.jsxs)(card_1.Card, { children: [(0, jsx_runtime_1.jsxs)(card_1.CardHeader, { className: 'flex flex-row items-center justify-between space-y-0 pb-2', children: [(0, jsx_runtime_1.jsx)(card_1.CardTitle, { className: 'text-sm font-medium', children: t('usedBudget') }), (0, jsx_runtime_1.jsx)(lucide_react_1.Calculator, { className: 'h-4 w-4 text-muted-foreground' })] }), (0, jsx_runtime_1.jsxs)(card_1.CardContent, { children: [(0, jsx_runtime_1.jsx)("div", { className: 'text-2xl font-bold', children: "$87,500" }), (0, jsx_runtime_1.jsxs)("p", { className: 'text-xs text-muted-foreground', children: ["70% ", t('ofTotalBudget')] })] })] }), (0, jsx_runtime_1.jsxs)(card_1.Card, { children: [(0, jsx_runtime_1.jsxs)(card_1.CardHeader, { className: 'flex flex-row items-center justify-between space-y-0 pb-2', children: [(0, jsx_runtime_1.jsx)(card_1.CardTitle, { className: 'text-sm font-medium', children: t('remaining') }), (0, jsx_runtime_1.jsx)(lucide_react_1.TrendingUp, { className: 'h-4 w-4 text-muted-foreground' })] }), (0, jsx_runtime_1.jsxs)(card_1.CardContent, { children: [(0, jsx_runtime_1.jsx)("div", { className: 'text-2xl font-bold', children: "$37,500" }), (0, jsx_runtime_1.jsxs)("p", { className: 'text-xs text-muted-foreground', children: ["30% ", t('percentRemaining')] })] })] }), (0, jsx_runtime_1.jsxs)(card_1.Card, { children: [(0, jsx_runtime_1.jsxs)(card_1.CardHeader, { className: 'flex flex-row items-center justify-between space-y-0 pb-2', children: [(0, jsx_runtime_1.jsx)(card_1.CardTitle, { className: 'text-sm font-medium', children: t('variance') }), (0, jsx_runtime_1.jsx)(lucide_react_1.TrendingDown, { className: 'h-4 w-4 text-muted-foreground' })] }), (0, jsx_runtime_1.jsxs)(card_1.CardContent, { children: [(0, jsx_runtime_1.jsx)("div", { className: 'text-2xl font-bold text-green-600', children: "-$2,500" }), (0, jsx_runtime_1.jsx)("p", { className: 'text-xs text-muted-foreground', children: t('underBudget') })] })] })] }), (0, jsx_runtime_1.jsxs)(card_1.Card, { children: [(0, jsx_runtime_1.jsx)(card_1.CardHeader, { children: (0, jsx_runtime_1.jsxs)(card_1.CardTitle, { className: 'flex items-center gap-2', children: [(0, jsx_runtime_1.jsx)(lucide_react_1.PieChart, { className: 'w-5 h-5' }), t('budgetCategories')] }) }), (0, jsx_runtime_1.jsx)(card_1.CardContent, { children: (0, jsx_runtime_1.jsx)("div", { className: 'space-y-4', children: [
                                            { category: t('maintenance'), budget: 45000, used: 32000, color: 'bg-blue-500' },
                                            { category: t('utilities'), budget: 30000, used: 28000, color: 'bg-green-500' },
                                            { category: t('insurance'), budget: 25000, used: 15000, color: 'bg-purple-500' },
                                            { category: t('administration'), budget: 15000, used: 8500, color: 'bg-orange-500' },
                                            { category: t('cleaning'), budget: 10000, used: 4000, color: 'bg-red-500' },
                                        ].map((item) => ((0, jsx_runtime_1.jsxs)("div", { className: 'flex items-center justify-between p-4 border rounded-lg', children: [(0, jsx_runtime_1.jsxs)("div", { className: 'flex items-center gap-3', children: [(0, jsx_runtime_1.jsx)("div", { className: `w-4 h-4 rounded-full ${item.color}` }), (0, jsx_runtime_1.jsxs)("div", { children: [(0, jsx_runtime_1.jsx)("h3", { className: 'font-semibold', children: item.category }), (0, jsx_runtime_1.jsxs)("p", { className: 'text-sm text-gray-600', children: ["$", item.used.toLocaleString(), " / $", item.budget.toLocaleString()] })] })] }), (0, jsx_runtime_1.jsxs)(badge_1.Badge, { variant: item.used > item.budget ? 'destructive' : 'secondary', children: [Math.round((item.used / item.budget) * 100), "%"] })] }, item.category))) }) })] }), (0, jsx_runtime_1.jsxs)(card_1.Card, { children: [(0, jsx_runtime_1.jsx)(card_1.CardHeader, { children: (0, jsx_runtime_1.jsxs)(card_1.CardTitle, { className: 'flex items-center gap-2', children: [(0, jsx_runtime_1.jsx)(lucide_react_1.BarChart, { className: 'w-5 h-5' }), t('monthlySpendingTrend')] }) }), (0, jsx_runtime_1.jsx)(card_1.CardContent, { children: (0, jsx_runtime_1.jsx)("div", { className: 'h-64 flex items-center justify-center text-gray-500', children: (0, jsx_runtime_1.jsxs)("div", { className: 'text-center', children: [(0, jsx_runtime_1.jsx)(lucide_react_1.BarChart, { className: 'w-12 h-12 mx-auto mb-4 text-gray-300' }), (0, jsx_runtime_1.jsx)("p", { children: t('budgetAnalyticsChart') })] }) }) })] })] }) })] }));
}
// Wrap with hierarchical selection HOC using 2-level hierarchy (organization â†’ building)
const Budget = (0, withHierarchicalSelection_1.withHierarchicalSelection)(BudgetInner, {
    hierarchy: ['organization', 'building']
});
exports.default = Budget;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiL2hvbWUvcnVubmVyL3dvcmtzcGFjZS9jbGllbnQvc3JjL3BhZ2VzL21hbmFnZXIvYnVkZ2V0LnRzeCIsIm1hcHBpbmdzIjoiOzs7QUFBQSx1REFBb0Q7QUFDcEQsdURBQW1EO0FBQ25ELCtDQUFnRjtBQUNoRixpREFBOEM7QUFDOUMsbURBQWdEO0FBQ2hELDBGQUF1RjtBQUN2RixtQ0FBcUM7QUFDckMsK0NBUXNCO0FBT3RCLFNBQVMsV0FBVyxDQUFDLEVBQUUsY0FBYyxFQUFFLFVBQVUsRUFBZTtJQUM5RCxNQUFNLEVBQUUsQ0FBQyxFQUFFLEdBQUcsSUFBQSwwQkFBVyxHQUFFLENBQUM7SUFDNUIsTUFBTSxDQUFDLEVBQUUsUUFBUSxDQUFDLEdBQUcsSUFBQSxvQkFBVyxHQUFFLENBQUM7SUFFbkMsTUFBTSx3QkFBd0IsR0FBRyxHQUFHLEVBQUU7UUFDcEMsUUFBUSxDQUFDLGlCQUFpQixDQUFDLENBQUM7SUFDOUIsQ0FBQyxDQUFDO0lBRUYsTUFBTSxvQkFBb0IsR0FBRyxHQUFHLEVBQUU7UUFDaEMsUUFBUSxDQUFDLGdDQUFnQyxjQUFjLEVBQUUsQ0FBQyxDQUFDO0lBQzdELENBQUMsQ0FBQztJQUVGLE9BQU8sQ0FDTCxpQ0FBSyxTQUFTLEVBQUMsc0NBQXNDLGFBQ25ELHVCQUFDLGVBQU0sSUFBQyxLQUFLLEVBQUUsQ0FBQyxDQUFDLGlCQUFpQixDQUFDLEVBQUUsUUFBUSxFQUFFLENBQUMsQ0FBQyxnQkFBZ0IsQ0FBQyxHQUFJLEVBR3JFLENBQUMsY0FBYyxJQUFJLFVBQVUsQ0FBQyxJQUFJLENBQ2pDLGdDQUFLLFNBQVMsRUFBQyw4QkFBOEIsWUFDM0Msd0JBQUMsZUFBTSxJQUNMLE9BQU8sRUFBQyxTQUFTLEVBQ2pCLE9BQU8sRUFBRSxVQUFVLENBQUMsQ0FBQyxDQUFDLG9CQUFvQixDQUFDLENBQUMsQ0FBQyx3QkFBd0IsRUFDckUsU0FBUyxFQUFDLHlCQUF5QixpQkFDdEIsVUFBVSxDQUFDLENBQUMsQ0FBQyx5QkFBeUIsQ0FBQyxDQUFDLENBQUMsNkJBQTZCLGFBRW5G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Q0FBQyxHQUFHLEdBQUcsQ0FBQyxTQUN0QyxLQVpBLElBQUksQ0FBQyxRQUFRLENBYWpCLENBQ1AsQ0FBQyxHQUNFLEdBQ00sSUFDVCxFQUdQLHdCQUFDLFdBQUksZUFDSCx1QkFBQyxpQkFBVSxjQUNULHdCQUFDLGdCQUFTLElBQUMsU0FBUyxFQUFDLHlCQUF5QixhQUM1Qyx1QkFBQyx1QkFBUSxJQUFDLFNBQVMsRUFBQyxTQUFTLEdBQUcsRUFDL0IsQ0FBQyxDQUFDLHNCQUFzQixDQUFDLElBQ2hCLEdBQ0QsRUFDYix1QkFBQyxrQkFBVyxjQUNWLGdDQUFLLFNBQVMsRUFBQyxxREFBcUQsWUFDbEUsaUNBQUssU0FBUyxFQUFDLGFBQWEsYUFDMUIsdUJBQUMsdUJBQVEsSUFBQyxTQUFTLEVBQUMsc0NBQXNDLEdBQUcsRUFDN0Qsd0NBQUksQ0FBQyxDQUFDLHNCQUFzQixDQUFDLEdBQUssSUFDOUIsR0FDRixHQUNNLElBQ1QsSUFDSCxHQUNGLElBQ0YsQ0FDUCxDQUFDO0FBQ0osQ0FBQztBQUVELHlGQUF5RjtBQUN6RixNQUFNLE1BQU0sR0FBRyxJQUFBLHFEQUF5QixFQUFDLFdBQVcsRUFBRTtJQUNwRCxTQUFTLEVBQUUsQ0FBQyxjQUFjLEVBQUUsVUFBVSxDQUFDO0NBQ3hDLENBQUMsQ0FBQztBQUVILGtCQUFlLE1BQU0sQ0FBQyIsIm5hbWVzIjpbXSwic291cmNlcyI6WyIvaG9tZS9ydW5uZXIvd29ya3NwYWNlL2NsaWVudC9zcmMvcGFnZXMvbWFuYWdlci9idWRnZXQudHN4Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEhlYWRlciB9IGZyb20gJ0AvY29tcG9uZW50cy9sYXlvdXQvaGVhZGVyJztcbmltcG9ydCB7IHVzZUxhbmd1YWdlIH0gZnJvbSAnQC9ob29rcy91c2UtbGFuZ3VhZ2UnO1xuaW1wb3J0IHsgQ2FyZCwgQ2FyZENvbnRlbnQsIENhcmRIZWFkZXIsIENhcmRUaXRsZSB9IGZyb20gJ0AvY29tcG9uZW50cy91aS9jYXJkJztcbmltcG9ydCB7IEJhZGdlIH0gZnJvbSAnQC9jb21wb25lbnRzL3VpL2JhZGdlJztcbmltcG9ydCB7IEJ1dHRvbiB9IGZyb20gJ0AvY29tcG9uZW50cy91aS9idXR0b24nO1xuaW1wb3J0IHsgd2l0aEhpZXJhcmNoaWNhbFNlbGVjdGlvbiB9IGZyb20gJ0AvY29tcG9uZW50cy9ob2Mvd2l0aEhpZXJhcmNoaWNhbFNlbGVjdGlvbic7XG5pbXBvcnQgeyB1c2VMb2NhdGlvbiB9IGZyb20gJ3dvdXRlcic7XG5pbXBvcnQgeyBcbiAgUGllQ2hhcnQsIFxuICBCYXJDaGFydCwgXG4gIFRyZW5kaW5nVXAsIFxuICBUcmVuZGluZ0Rvd24sIFxuICBEb2xsYXJTaWduLFxuICBDYWxjdWxhdG9yLFxuICBBcnJvd0xlZnRcbn0gZnJvbSAnbHVjaWRlLXJlYWN0JztcblxuaW50ZXJmYWNlIEJ1ZGdldFByb3BzIHtcbiAgb3JnYW5pemF0aW9uSWQ/OiBzdHJpbmc7XG4gIGJ1aWxkaW5nSWQ/OiBzdHJpbmc7XG59XG5cbmZ1bmN0aW9uIEJ1ZGdldElubmVyKHsgb3JnYW5pemF0aW9uSWQsIGJ1aWxkaW5nSWQgfTogQnVkZ2V0UHJvcHMpIHtcbiAgY29uc3QgeyB0IH0gPSB1c2VMYW5ndWFnZSgpO1xuICBjb25zdCBbLCBuYXZpZ2F0ZV0gPSB1c2VMb2NhdGlvbigpO1xuXG4gIGNvbnN0IGhhbmRsZUJhY2tUb09yZ2FuaXphdGlvbiA9ICgpID0+IHtcbiAgICBuYXZpZ2F0ZSgnL21hbmFnZXIvYnVkZ2V0Jyk7XG4gIH07XG5cbiAgY29uc3QgaGFuZGxlQmFja1RvQnVpbGRpbmcgPSAoKSA9PiB7XG4gICAgbmF2aWdhdGUoYC9tYW5hZ2VyL2J1ZGdldD9vcmdhbml6YXRpb249JHtvcmdhbml6YXRpb25JZH1gKTtcbiAgfTtcblxuICByZXR1cm4gKFxuICAgIDxkaXYgY2xhc3NOYW1lPSdmbGV4LTEgZmxleCBmbGV4LWNvbCBvdmVyZmxvdy1oaWRkZW4nPlxuICAgICAgPEhlYWRlciB0aXRsZT17dCgnYnVkZ2V0RGFzaGJvYXJkJyl9IHN1YnRpdGxlPXt0KCdidWRnZXRTdWJ0aXRsZScpfSAvPlxuICAgICAgXG4gICAgICB7LyogQmFjayBOYXZpZ2F0aW9uICovfVxuICAgICAgeyhvcmdhbml6YXRpb25JZCB8fCBidWlsZGluZ0lkKSAmJiAoXG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwicC00IGJvcmRlci1iIGJvcmRlci1ncmF5LTIwMFwiPlxuICAgICAgICAgIDxCdXR0b25cbiAgICAgICAgICAgIHZhcmlhbnQ9XCJvdXRsaW5lXCJcbiAgICAgICAgICAgIG9uQ2xpY2s9e2J1aWxkaW5nSWQgPyBoYW5kbGVCYWNrVG9CdWlsZGluZyA6IGhhbmRsZUJhY2tUb09yZ2FuaXphdGlvbn1cbiAgICAgICAgICAgIGNsYXNzTmFtZT1cImZsZXggaXRlbXMtY2VudGVyIGdhcC0yXCJcbiAgICAgICAgICAgIGRhdGEtdGVzdGlkPXtidWlsZGluZ0lkID8gXCJidXR0b24tYmFjay10by1idWlsZGluZ1wiIDogXCJidXR0b24tYmFjay10by1vcmdhbml6YXRpb25cIn1cbiAgICAgICAgICA+XG4gICAgICAgICAgICA8QXJyb3dMZWZ0IGNsYXNzTmFtZT1cInctNCBoLTRcIiAvPlxuICAgICAgICAgICAge2J1aWxkaW5nSWQgPyB0KCdidWlsZGluZycpIDogdCgnb3JnYW5pemF0aW9uJyl9XG4gICAgICAgICAgPC9CdXR0b24+XG4gICAgICAgIDwvZGl2PlxuICAgICAgKX1cbiAgICAgIFxuICAgICAgPGRpdiBjbGFzc05hbWU9J2ZsZXgtMSBvdmVyZmxvdy1hdXRvIHAtNic+XG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPSdtYXgtdy03eGwgbXgtYXV0byBzcGFjZS15LTYnPlxuICAgICAgICAgIHsvKiBTdW1tYXJ5IENhcmRzICovfVxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSdncmlkIGdyaWQtY29scy0xIG1kOmdyaWQtY29scy00IGdhcC02Jz5cbiAgICAgICAgICAgIDxDYXJkPlxuICAgICAgICAgICAgICA8Q2FyZEhlYWRlciBjbGFzc05hbWU9J2ZsZXggZmxleC1yb3cgaXRlbXMtY2VudGVyIGp1c3RpZnktYmV0d2VlbiBzcGFjZS15LTAgcGItMic+XG4gICAgICAgICAgICAgICAgPENhcmRUaXRsZSBjbGFzc05hbWU9J3RleHQtc20gZm9udC1tZWRpdW0nPnt0KCd0b3RhbEJ1ZGdldCcpfTwvQ2FyZFRpdGxlPlxuICAgICAgICAgICAgICAgIDxEb2xsYXJTaWduIGNsYXNzTmFtZT0naC00IHctNCB0ZXh0LW11dGVkLWZvcmVncm91bmQnIC8+XG4gICAgICAgICAgICAgIDwvQ2FyZEhlYWRlcj5cbiAgICAgICAgICAgICAgPENhcmRDb250ZW50PlxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSd0ZXh0LTJ4bCBmb250LWJvbGQnPiQxMjUsMDAwPC9kaXY+XG4gICAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPSd0ZXh0LXhzIHRleHQtbXV0ZWQtZm9yZWdyb3VuZCc+XG4gICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9J3RleHQtZ3JlZW4tNjAwJz4rMi4xJTwvc3Bhbj4ge3QoJ2Zyb21MYXN0WWVhcicpfVxuICAgICAgICAgICAgICAgIDwvcD5cbiAgICAgICAgICAgICAgPC9DYXJkQ29udGVudD5cbiAgICAgICAgICAgIDwvQ2FyZD5cbiAgICAgICAgICAgIFxuICAgICAgICAgICAgPENhcmQ+XG4gICAgICAgICAgICAgIDxDYXJkSGVhZGVyIGNsYXNzTmFtZT0nZmxleCBmbGV4LXJvdyBpdGVtcy1jZW50ZXIganVzdGlmeS1iZXR3ZWVuIHNwYWNlLXktMCBwYi0yJz5cbiAgICAgICAgICAgICAgICA8Q2FyZFRpdGxlIGNsYXNzTmFtZT0ndGV4dC1zbSBmb250LW1lZGl1bSc+e3QoJ3VzZWRCdWRnZXQnKX08L0NhcmRUaXRsZT5cbiAgICAgICAgICAgICAgICA8Q2FsY3VsYXRvciBjbGFzc05hbWU9J2gtNCB3LTQgdGV4dC1tdXRlZC1mb3JlZ3JvdW5kJyAvPlxuICAgICAgICAgICAgICA8L0NhcmRIZWFkZXI+XG4gICAgICAgICAgICAgIDxDYXJkQ29udGVudD5cbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0ndGV4dC0yeGwgZm9udC1ib2xkJz4kODcsNTAwPC9kaXY+XG4gICAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPSd0ZXh0LXhzIHRleHQtbXV0ZWQtZm9yZWdyb3VuZCc+XG4gICAgICAgICAgICAgICAgICA3MCUge3QoJ29mVG90YWxCdWRnZXQnKX1cbiAgICAgICAgICAgICAgICA8L3A+XG4gICAgICAgICAgICAgIDwvQ2FyZENvbnRlbnQ+XG4gICAgICAgICAgICA8L0NhcmQ+XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIDxDYXJkPlxuICAgICAgICAgICAgICA8Q2FyZEhlYWRlciBjbGFzc05hbWU9J2ZsZXggZmxleC1yb3cgaXRlbXMtY2VudGVyIGp1c3RpZnktYmV0d2VlbiBzcGFjZS15LTAgcGItMic+XG4gICAgICAgICAgICAgICAgPENhcmRUaXRsZSBjbGFzc05hbWU9J3RleHQtc20gZm9udC1tZWRpdW0nPnt0KCdyZW1haW5pbmcnKX08L0NhcmRUaXRsZT5cbiAgICAgICAgICAgICAgICA8VHJlbmRpbmdVcCBjbGFzc05hbWU9J2gtNCB3LTQgdGV4dC1tdXRlZC1mb3JlZ3JvdW5kJyAvPlxuICAgICAgICAgICAgICA8L0NhcmRIZWFkZXI+XG4gICAgICAgICAgICAgIDxDYXJkQ29udGVudD5cbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0ndGV4dC0yeGwgZm9udC1ib2xkJz4kMzcsNTAwPC9kaXY+XG4gICAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPSd0ZXh0LXhzIHRleHQtbXV0ZWQtZm9yZWdyb3VuZCc+XG4gICAgICAgICAgICAgICAgICAzMCUge3QoJ3BlcmNlbnRSZW1haW5pbmcnKX1cbiAgICAgICAgICAgICAgICA8L3A+XG4gICAgICAgICAgICAgIDwvQ2FyZENvbnRlbnQ+XG4gICAgICAgICAgICA8L0NhcmQ+XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIDxDYXJkPlxuICAgICAgICAgICAgICA8Q2FyZEhlYWRlciBjbGFzc05hbWU9J2ZsZXggZmxleC1yb3cgaXRlbXMtY2VudGVyIGp1c3RpZnktYmV0d2VlbiBzcGFjZS15LTAgcGItMic+XG4gICAgICAgICAgICAgICAgPENhcmRUaXRsZSBjbGFzc05hbWU9J3RleHQtc20gZm9udC1tZWRpdW0nPnt0KCd2YXJpYW5jZScpfTwvQ2FyZFRpdGxlPlxuICAgICAgICAgICAgICAgIDxUcmVuZGluZ0Rvd24gY2xhc3NOYW1lPSdoLTQgdy00IHRleHQtbXV0ZWQtZm9yZWdyb3VuZCcgLz5cbiAgICAgICAgICAgICAgPC9DYXJkSGVhZGVyPlxuICAgICAgICAgICAgICA8Q2FyZENvbnRlbnQ+XG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9J3RleHQtMnhsIGZvbnQtYm9sZCB0ZXh0LWdyZWVuLTYwMCc+LSQyLDUwMDwvZGl2PlxuICAgICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT0ndGV4dC14cyB0ZXh0LW11dGVkLWZvcmVncm91bmQnPlxuICAgICAgICAgICAgICAgICAge3QoJ3VuZGVyQnVkZ2V0Jyl9XG4gICAgICAgICAgICAgICAgPC9wPlxuICAgICAgICAgICAgICA8L0NhcmRDb250ZW50PlxuICAgICAgICAgICAgPC9DYXJkPlxuICAgICAgICAgIDwvZGl2PlxuXG4gICAgICAgICAgey8qIEJ1ZGdldCBDYXRlZ29yaWVzICovfVxuICAgICAgICAgIDxDYXJkPlxuICAgICAgICAgICAgPENhcmRIZWFkZXI+XG4gICAgICAgICAgICAgIDxDYXJkVGl0bGUgY2xhc3NOYW1lPSdmbGV4IGl0ZW1zLWNlbnRlciBnYXAtMic+XG4gICAgICAgICAgICAgICAgPFBpZUNoYXJ0IGNsYXNzTmFtZT0ndy01IGgtNScgLz5cbiAgICAgICAgICAgICAgICB7dCgnYnVkZ2V0Q2F0ZWdvcmllcycpfVxuICAgICAgICAgICAgICA8L0NhcmRUaXRsZT5cbiAgICAgICAgICAgIDwvQ2FyZEhlYWRlcj5cbiAgICAgICAgICAgIDxDYXJkQ29udGVudD5cbiAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9J3NwYWNlLXktNCc+XG4gICAgICAgICAgICAgICAge1tcbiAgICAgICAgICAgICAgICAgIHsgY2F0ZWdvcnk6IHQoJ21haW50ZW5hbmNlJyksIGJ1ZGdldDogNDUwMDAsIHVzZWQ6IDMyMDAwLCBjb2xvcjogJ2JnLWJsdWUtNTAwJyB9LFxuICAgICAgICAgICAgICAgICAgeyBjYXRlZ29yeTogdCgndXRpbGl0aWVzJyksIGJ1ZGdldDogMzAwMDAsIHVzZWQ6IDI4MDAwLCBjb2xvcjogJ2JnLWdyZWVuLTUwMCcgfSxcbiAgICAgICAgICAgICAgICAgIHsgY2F0ZWdvcnk6IHQoJ2luc3VyYW5jZScpLCBidWRnZXQ6IDI1MDAwLCB1c2VkOiAxNTAwMCwgY29sb3I6ICdiZy1wdXJwbGUtNTAwJyB9LFxuICAgICAgICAgICAgICAgICAgeyBjYXRlZ29yeTogdCgnYWRtaW5pc3RyYXRpb24nKSwgYnVkZ2V0OiAxNTAwMCwgdXNlZDogODUwMCwgY29sb3I6ICdiZy1vcmFuZ2UtNTAwJyB9LFxuICAgICAgICAgICAgICAgICAgeyBjYXRlZ29yeTogdCgnY2xlYW5pbmcnKSwgYnVkZ2V0OiAxMDAwMCwgdXNlZDogNDAwMCwgY29sb3I6ICdiZy1yZWQtNTAwJyB9LFxuICAgICAgICAgICAgICAgIF0ubWFwKChpdGVtKSA9PiAoXG4gICAgICAgICAgICAgICAgICA8ZGl2IGtleT17aXRlbS5jYXRlZ29yeX0gY2xhc3NOYW1lPSdmbGV4IGl0ZW1zLWNlbnRlciBqdXN0aWZ5LWJldHdlZW4gcC00IGJvcmRlciByb3VuZGVkLWxnJz5cbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9J2ZsZXggaXRlbXMtY2VudGVyIGdhcC0zJz5cbiAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT17YHctNCBoLTQgcm91bmRlZC1mdWxsICR7aXRlbS5jb2xvcn1gfT48L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICA8ZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgPGgzIGNsYXNzTmFtZT0nZm9udC1zZW1pYm9sZCc+e2l0ZW0uY2F0ZWdvcnl9PC9oMz5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT0ndGV4dC1zbSB0ZXh0LWdyYXktNjAwJz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgJHtpdGVtLnVzZWQudG9Mb2NhbGVTdHJpbmcoKX0gLyAke2l0ZW0uYnVkZ2V0LnRvTG9jYWxlU3RyaW5nKCl9XG4gICAgICAgICAgICAgICAgICAgICAgICA8L3A+XG4gICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICA8QmFkZ2UgdmFyaWFudD17aXRlbS51c2VkID4gaXRlbS5idWRnZXQgPyAnZGVzdHJ1Y3RpdmUnIDogJ3NlY29uZGFyeSd9PlxuICAgICAgICAgICAgICAgICAgICAgIHtNYXRoLnJvdW5kKChpdGVtLnVzZWQgLyBpdGVtLmJ1ZGdldCkgKiAxMDApfSVcbiAgICAgICAgICAgICAgICAgICAgPC9CYWRnZT5cbiAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICkpfVxuICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIDwvQ2FyZENvbnRlbnQ+XG4gICAgICAgICAgPC9DYXJkPlxuXG4gICAgICAgICAgey8qIE1vbnRobHkgU3BlbmRpbmcgKi99XG4gICAgICAgICAgPENhcmQ+XG4gICAgICAgICAgICA8Q2FyZEhlYWRlcj5cbiAgICAgICAgICAgICAgPENhcmRUaXRsZSBjbGFzc05hbWU9J2ZsZXggaXRlbXMtY2VudGVyIGdhcC0yJz5cbiAgICAgICAgICAgICAgICA8QmFyQ2hhcnQgY2xhc3NOYW1lPSd3LTUgaC01JyAvPlxuICAgICAgICAgICAgICAgIHt0KCdtb250aGx5U3BlbmRpbmdUcmVuZCcpfVxuICAgICAgICAgICAgICA8L0NhcmRUaXRsZT5cbiAgICAgICAgICAgIDwvQ2FyZEhlYWRlcj5cbiAgICAgICAgICAgIDxDYXJkQ29udGVudD5cbiAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9J2gtNjQgZmxleCBpdGVtcy1jZW50ZXIganVzdGlmeS1jZW50ZXIgdGV4dC1ncmF5LTUwMCc+XG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9J3RleHQtY2VudGVyJz5cbiAgICAgICAgICAgICAgICAgIDxCYXJDaGFydCBjbGFzc05hbWU9J3ctMTIgaC0xMiBteC1hdXRvIG1iLTQgdGV4dC1ncmF5LTMwMCcgLz5cbiAgICAgICAgICAgICAgICAgIDxwPnt0KCdidWRnZXRBbmFseXRpY3NDaGFydCcpfTwvcD5cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICA8L0NhcmRDb250ZW50PlxuICAgICAgICAgIDwvQ2FyZD5cbiAgICAgICAgPC9kaXY+XG4gICAgICA8L2Rpdj5cbiAgICA8L2Rpdj5cbiAgKTtcbn1cblxuLy8gV3JhcCB3aXRoIGhpZXJhcmNoaWNhbCBzZWxlY3Rpb24gSE9DIHVzaW5nIDItbGV2ZWwgaGllcmFyY2h5IChvcmdhbml6YXRpb24g4oaSIGJ1aWxkaW5nKVxuY29uc3QgQnVkZ2V0ID0gd2l0aEhpZXJhcmNoaWNhbFNlbGVjdGlvbihCdWRnZXRJbm5lciwge1xuICBoaWVyYXJjaHk6IFsnb3JnYW5pemF0aW9uJywgJ2J1aWxkaW5nJ11cbn0pO1xuXG5leHBvcnQgZGVmYXVsdCBCdWRnZXQ7Il0sInZlcnNpb24iOjN9