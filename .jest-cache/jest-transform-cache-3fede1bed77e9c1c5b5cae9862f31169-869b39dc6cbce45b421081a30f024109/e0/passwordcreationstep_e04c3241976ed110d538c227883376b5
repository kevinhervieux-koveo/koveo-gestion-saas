5c7cd1706ea85e85a0c232054d5f458e
"use strict";
var __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {
    if (k2 === undefined) k2 = k;
    var desc = Object.getOwnPropertyDescriptor(m, k);
    if (!desc || ("get" in desc ? !m.__esModule : desc.writable || desc.configurable)) {
      desc = { enumerable: true, get: function() { return m[k]; } };
    }
    Object.defineProperty(o, k2, desc);
}) : (function(o, m, k, k2) {
    if (k2 === undefined) k2 = k;
    o[k2] = m[k];
}));
var __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {
    Object.defineProperty(o, "default", { enumerable: true, value: v });
}) : function(o, v) {
    o["default"] = v;
});
var __importStar = (this && this.__importStar) || (function () {
    var ownKeys = function(o) {
        ownKeys = Object.getOwnPropertyNames || function (o) {
            var ar = [];
            for (var k in o) if (Object.prototype.hasOwnProperty.call(o, k)) ar[ar.length] = k;
            return ar;
        };
        return ownKeys(o);
    };
    return function (mod) {
        if (mod && mod.__esModule) return mod;
        var result = {};
        if (mod != null) for (var k = ownKeys(mod), i = 0; i < k.length; i++) if (k[i] !== "default") __createBinding(result, mod, k[i]);
        __setModuleDefault(result, mod);
        return result;
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
exports.PasswordCreationStep = PasswordCreationStep;
const jsx_runtime_1 = require("react/jsx-runtime");
const react_1 = __importStar(require("react"));
const card_1 = require("@/components/ui/card");
const input_1 = require("@/components/ui/input");
const label_1 = require("@/components/ui/label");
const button_1 = require("@/components/ui/button");
const alert_1 = require("@/components/ui/alert");
const lucide_react_1 = require("lucide-react");
const use_language_1 = require("@/hooks/use-language");
const password_strength_indicator_1 = require("../password-strength-indicator");
const password_validation_1 = require("@/utils/password-validation");
/**
 * Password Creation Step Component.
 *
 * Secure password creation with strength validation and confirmation.
 * Implements Quebec-compliant security standards for property management.
 * @param root0 - The wizard step props.
 * @param root0.data - Current step data.
 * @param root0.onDataChange - Callback when step data changes.
 * @param root0.onValidationChange - Callback when validation status changes.
 * @returns JSX element for the password creation step.
 */
/**
 * PasswordCreationStep function.
 * @param root0
 * @param root0.data
 * @param root0.onDataChange
 * @param root0.onValidationChange
 * @param root0._data
 * @returns Function result.
 */
function PasswordCreationStep({ _data, onDataChange, onValidationChange }) {
    const { t: _t } = (0, use_language_1.useLanguage)();
    const [formData, setFormData] = (0, react_1.useState)({
        password: '',
        confirmPassword: '',
        isValid: false,
        ..._data,
    });
    const [showPassword, setShowPassword] = (0, react_1.useState)(false);
    const [showConfirmPassword, setShowConfirmPassword] = (0, react_1.useState)(false);
    const [touched, setTouched] = (0, react_1.useState)({
        password: false,
        confirmPassword: false,
    });
    // Validate form whenever password fields change
    (0, react_1.useEffect)(() => {
        const passwordStrength = (0, password_validation_1.validatePasswordStrength)(formData.password);
        const passwordsMatch = formData.password === formData.confirmPassword;
        const hasPassword = formData.password.length > 0;
        const hasConfirmPassword = formData.confirmPassword.length > 0;
        const isValid = passwordStrength.isValid && passwordsMatch && hasPassword && hasConfirmPassword;
        // Only update if validation state actually changed
        if (formData.isValid !== isValid) {
            const updatedData = { ...formData, isValid };
            onDataChange(updatedData);
            onValidationChange(isValid);
        }
    }, [formData.password, formData.confirmPassword, formData.isValid]);
    const handlePasswordChange = (_value) => {
        setFormData((prev) => ({
            ...prev,
            password: _value,
            _error: undefined,
        }));
    };
    const handleConfirmPasswordChange = (_value) => {
        setFormData((prev) => ({
            ...prev,
            confirmPassword: _value,
            _error: undefined,
        }));
    };
    const handleBlur = (field) => {
        setTouched((prev) => ({ ...prev, [field]: true }));
    };
    const getPasswordMatchError = () => {
        if (!touched.confirmPassword || !formData.confirmPassword) {
            return null;
        }
        if (formData.password !== formData.confirmPassword) {
            return 'Les mots de passe ne correspondent pas';
        }
        return null;
    };
    const passwordStrength = (0, password_validation_1.validatePasswordStrength)(formData.password);
    const passwordMatchError = getPasswordMatchError();
    const hasPasswordError = touched.password && !passwordStrength.isValid && formData.password.length > 0;
    return ((0, jsx_runtime_1.jsxs)("div", { className: 'space-y-6 max-w-2xl mx-auto', children: [(0, jsx_runtime_1.jsxs)(alert_1.Alert, { className: 'border-blue-200 bg-blue-50', children: [(0, jsx_runtime_1.jsx)(lucide_react_1.Shield, { className: 'h-4 w-4 text-blue-600' }), (0, jsx_runtime_1.jsxs)(alert_1.AlertDescription, { className: 'text-blue-800', children: [(0, jsx_runtime_1.jsx)("strong", { children: "S\u00E9curit\u00E9 renforc\u00E9e:" }), " Cr\u00E9ez un mot de passe s\u00E9curis\u00E9 pour prot\u00E9ger votre compte et respecter les standards de s\u00E9curit\u00E9 qu\u00E9b\u00E9cois."] })] }), (0, jsx_runtime_1.jsx)(card_1.Card, { children: (0, jsx_runtime_1.jsxs)(card_1.CardContent, { className: 'pt-6 space-y-6', children: [(0, jsx_runtime_1.jsxs)("div", { className: 'space-y-2', children: [(0, jsx_runtime_1.jsx)(label_1.Label, { htmlFor: 'password', className: 'text-sm font-medium text-gray-700', children: "Mot de passe *" }), (0, jsx_runtime_1.jsxs)("div", { className: 'relative', children: [(0, jsx_runtime_1.jsx)(lucide_react_1.Lock, { className: 'absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4' }), (0, jsx_runtime_1.jsx)(input_1.Input, { id: 'password', type: showPassword ? 'text' : 'password', value: formData.password, onChange: (e) => handlePasswordChange(e.target.value), onBlur: () => handleBlur('password'), placeholder: 'Entrez votre mot de passe', className: `pl-10 pr-10 ${hasPasswordError ? 'border-red-500 focus:border-red-500' : ''}`, "aria-describedby": 'password-requirements', "data-testid": 'input-password' }), (0, jsx_runtime_1.jsxs)(button_1.Button, { type: 'button', variant: 'ghost', size: 'sm', className: 'absolute right-0 top-0 h-full px-3 py-2 hover:bg-transparent', onClick: () => setShowPassword(!showPassword), "data-testid": 'button-toggle-password', children: [showPassword ? ((0, jsx_runtime_1.jsx)(lucide_react_1.EyeOff, { className: 'h-4 w-4 text-gray-400' })) : ((0, jsx_runtime_1.jsx)(lucide_react_1.Eye, { className: 'h-4 w-4 text-gray-400' })), (0, jsx_runtime_1.jsx)("span", { className: 'sr-only', children: showPassword ? 'Masquer le mot de passe' : 'Afficher le mot de passe' })] })] }), (0, jsx_runtime_1.jsx)(password_strength_indicator_1.PasswordStrengthIndicator, { password: formData.password, showPassword: showPassword, onToggleVisibility: () => setShowPassword(!showPassword), className: 'mt-3' }), hasPasswordError && ((0, jsx_runtime_1.jsxs)(alert_1.Alert, { variant: 'destructive', children: [(0, jsx_runtime_1.jsx)(lucide_react_1.AlertTriangle, { className: 'h-4 w-4' }), (0, jsx_runtime_1.jsx)(alert_1.AlertDescription, { children: "Le mot de passe ne respecte pas les exigences de s\u00E9curit\u00E9." })] }))] }), (0, jsx_runtime_1.jsxs)("div", { className: 'space-y-2', children: [(0, jsx_runtime_1.jsx)(label_1.Label, { htmlFor: 'confirmPassword', className: 'text-sm font-medium text-gray-700', children: "Confirmer le mot de passe *" }), (0, jsx_runtime_1.jsxs)("div", { className: 'relative', children: [(0, jsx_runtime_1.jsx)(lucide_react_1.Lock, { className: 'absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4' }), (0, jsx_runtime_1.jsx)(input_1.Input, { id: 'confirmPassword', type: showConfirmPassword ? 'text' : 'password', value: formData.confirmPassword, onChange: (e) => handleConfirmPasswordChange(e.target.value), onBlur: () => handleBlur('confirmPassword'), placeholder: 'Confirmez votre mot de passe', className: `pl-10 pr-10 ${passwordMatchError ? 'border-red-500 focus:border-red-500' : ''}`, "data-testid": 'input-confirm-password' }), (0, jsx_runtime_1.jsxs)(button_1.Button, { type: 'button', variant: 'ghost', size: 'sm', className: 'absolute right-0 top-0 h-full px-3 py-2 hover:bg-transparent', onClick: () => setShowConfirmPassword(!showConfirmPassword), "data-testid": 'button-toggle-confirm-password', children: [showConfirmPassword ? ((0, jsx_runtime_1.jsx)(lucide_react_1.EyeOff, { className: 'h-4 w-4 text-gray-400' })) : ((0, jsx_runtime_1.jsx)(lucide_react_1.Eye, { className: 'h-4 w-4 text-gray-400' })), (0, jsx_runtime_1.jsx)("span", { className: 'sr-only', children: showConfirmPassword ? 'Masquer le mot de passe' : 'Afficher le mot de passe' })] })] }), formData.confirmPassword && formData.password === formData.confirmPassword && ((0, jsx_runtime_1.jsxs)("div", { className: 'flex items-center text-sm text-green-600', children: [(0, jsx_runtime_1.jsx)(lucide_react_1.Shield, { className: 'h-4 w-4 mr-1' }), "Les mots de passe correspondent"] })), passwordMatchError && ((0, jsx_runtime_1.jsxs)(alert_1.Alert, { variant: 'destructive', children: [(0, jsx_runtime_1.jsx)(lucide_react_1.AlertTriangle, { className: 'h-4 w-4' }), (0, jsx_runtime_1.jsx)(alert_1.AlertDescription, { children: passwordMatchError })] }))] }), (0, jsx_runtime_1.jsxs)("div", { className: 'bg-gray-50 p-4 rounded-lg', children: [(0, jsx_runtime_1.jsx)("h4", { className: 'text-sm font-medium text-gray-900 mb-2', children: "\uD83D\uDCA1 Conseils de s\u00E9curit\u00E9" }), (0, jsx_runtime_1.jsxs)("ul", { className: 'text-xs text-gray-600 space-y-1', children: [(0, jsx_runtime_1.jsx)("li", { children: "\u2022 Utilisez une combinaison unique de lettres, chiffres et symboles" }), (0, jsx_runtime_1.jsx)("li", { children: "\u2022 \u00C9vitez les informations personnelles (nom, date de naissance)" }), (0, jsx_runtime_1.jsx)("li", { children: "\u2022 Ne r\u00E9utilisez pas un mot de passe d'un autre compte" }), (0, jsx_runtime_1.jsx)("li", { children: "\u2022 Consid\u00E9rez l'utilisation d'un gestionnaire de mots de passe" })] })] }), (0, jsx_runtime_1.jsxs)("div", { className: 'bg-blue-50 border border-blue-200 p-4 rounded-lg', children: [(0, jsx_runtime_1.jsx)("h4", { className: 'text-sm font-medium text-blue-900 mb-2', children: "\uD83D\uDEE1\uFE0F Conformit\u00E9 Qu\u00E9b\u00E9coise - S\u00E9curit\u00E9 des donn\u00E9es" }), (0, jsx_runtime_1.jsx)("p", { className: 'text-xs text-blue-800', children: "Votre mot de passe est chiffr\u00E9 selon les standards de l'industrie et stock\u00E9 de mani\u00E8re s\u00E9curis\u00E9e conform\u00E9ment \u00E0 la Loi 25 du Qu\u00E9bec. Nous ne pouvons pas voir votre mot de passe une fois qu'il est enregistr\u00E9." })] })] }) })] }));
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiL2hvbWUvcnVubmVyL3dvcmtzcGFjZS9jbGllbnQvc3JjL2NvbXBvbmVudHMvYXV0aC9zdGVwcy9wYXNzd29yZC1jcmVhdGlvbi1zdGVwLnRzeCIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQTJDQSxvREFvTkM7O0FBL1BELCtDQUFtRDtBQUNuRCwrQ0FBeUQ7QUFDekQsaURBQThDO0FBQzlDLGlEQUE4QztBQUM5QyxtREFBZ0Q7QUFDaEQsaURBQWdFO0FBQ2hFLCtDQUF3RTtBQUN4RSx1REFBbUQ7QUFDbkQsZ0ZBQTJFO0FBQzNFLHFFQUF1RTtBQWN2RTs7Ozs7Ozs7OztHQVVHO0FBQ0g7Ozs7Ozs7O0dBUUc7QUFDSCxTQUFnQixvQkFBb0IsQ0FBQyxFQUFFLEtBQUssRUFBRSxZQUFZLEVBQUUsa0JBQWtCLEVBQW1CO0lBQy9GLE1BQU0sRUFBRSxDQUFDLEVBQUUsRUFBRSxFQUFFLEdBQUcsSUFBQSwwQkFBVyxHQUFFLENBQUM7SUFDaEMsTUFBTSxDQUFDLFFBQVEsRUFBRSxXQUFXLENBQUMsR0FBRyxJQUFBLGdCQUFRLEVBQXVCO1FBQzdELFFBQVEsRUFBRSxFQUFFO1FBQ1osZUFBZSxFQUFFLEVBQUU7UUFDbkIsT0FBTyxFQUFFLEtBQUs7UUFDZCxHQUFHLEtBQUs7S0FDVCxDQUFDLENBQUM7SUFDSCxNQUFNLENBQUMsWUFBWSxFQUFFLGVBQWUsQ0FBQyxHQUFHLElBQUEsZ0JBQVEsRUFBQyxLQUFLLENBQUMsQ0FBQztJQUN4RCxNQUFNLENBQUMsbUJBQW1CLEVBQUUsc0JBQXNCLENBQUMsR0FBRyxJQUFBLGdCQUFRLEVBQUMsS0FBSyxDQUFDLENBQUM7SUFDdEUsTUFBTSxDQUFDLE9BQU8sRUFBRSxVQUFVLENBQUMsR0FBRyxJQUFBLGdCQUFRLEVBQUM7UUFDckMsUUFBUSxFQUFFLEtBQUs7UUFDZixlQUFlLEVBQUUsS0FBSztLQUN2QixDQUFDLENBQUM7SUFFSCxnREFBZ0Q7SUFDaEQsSUFBQSxpQkFBUyxFQUFDLEdBQUcsRUFBRTtR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QzlELHFIQUFzRSxJQUNuRSxJQUNELEVBR04saUNBQUssU0FBUyxFQUFDLGtEQUFrRCxhQUMvRCwrQkFBSSxTQUFTLEVBQUMsd0NBQXdDLDhHQUVqRCxFQUNMLDhCQUFHLFNBQVMsRUFBQyx1QkFBdUIsNlFBSWhDLElBQ0EsSUFDTSxHQUNULElBQ0gsQ0FDUCxDQUFDO0FBQ0osQ0FBQyIsIm5hbWVzIjpbXSwic291cmNlcyI6WyIvaG9tZS9ydW5uZXIvd29ya3NwYWNlL2NsaWVudC9zcmMvY29tcG9uZW50cy9hdXRoL3N0ZXBzL3Bhc3N3b3JkLWNyZWF0aW9uLXN0ZXAudHN4Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBSZWFjdCwgeyB1c2VTdGF0ZSwgdXNlRWZmZWN0IH0gZnJvbSAncmVhY3QnO1xuaW1wb3J0IHsgQ2FyZCwgQ2FyZENvbnRlbnQgfSBmcm9tICdAL2NvbXBvbmVudHMvdWkvY2FyZCc7XG5pbXBvcnQgeyBJbnB1dCB9IGZyb20gJ0AvY29tcG9uZW50cy91aS9pbnB1dCc7XG5pbXBvcnQgeyBMYWJlbCB9IGZyb20gJ0AvY29tcG9uZW50cy91aS9sYWJlbCc7XG5pbXBvcnQgeyBCdXR0b24gfSBmcm9tICdAL2NvbXBvbmVudHMvdWkvYnV0dG9uJztcbmltcG9ydCB7IEFsZXJ0LCBBbGVydERlc2NyaXB0aW9uIH0gZnJvbSAnQC9jb21wb25lbnRzL3VpL2FsZXJ0JztcbmltcG9ydCB7IFNoaWVsZCwgTG9jaywgQWxlcnRUcmlhbmdsZSwgRXllLCBFeWVPZmYgfSBmcm9tICdsdWNpZGUtcmVhY3QnO1xuaW1wb3J0IHsgdXNlTGFuZ3VhZ2UgfSBmcm9tICdAL2hvb2tzL3VzZS1sYW5ndWFnZSc7XG5pbXBvcnQgeyBQYXNzd29yZFN0cmVuZ3RoSW5kaWNhdG9yIH0gZnJvbSAnLi4vcGFzc3dvcmQtc3RyZW5ndGgtaW5kaWNhdG9yJztcbmltcG9ydCB7IHZhbGlkYXRlUGFzc3dvcmRTdHJlbmd0aCB9IGZyb20gJ0AvdXRpbHMvcGFzc3dvcmQtdmFsaWRhdGlvbic7XG5pbXBvcnQgdHlwZSB7IFdpemFyZFN0ZXBQcm9wcyB9IGZyb20gJy4uL3JlZ2lzdHJhdGlvbi13aXphcmQnO1xuXG4vKipcbiAqIEludGVyZmFjZSBmb3IgcGFzc3dvcmQgY3JlYXRpb24gc3RlcCBkYXRhLlxuICogQ29udGFpbnMgcGFzc3dvcmQgdmFsaWRhdGlvbiBhbmQgY29uZmlybWF0aW9uIGZpZWxkcy5cbiAqL1xuaW50ZXJmYWNlIFBhc3N3b3JkQ3JlYXRpb25EYXRhIHtcbiAgcGFzc3dvcmQ6IHN0cmluZztcbiAgY29uZmlybVBhc3N3b3JkOiBzdHJpbmc7XG4gIGlzVmFsaWQ6IGJvb2xlYW47XG4gIGVycm9yPzogc3RyaW5nO1xufVxuXG4vKipcbiAqIFBhc3N3b3JkIENyZWF0aW9uIFN0ZXAgQ29tcG9uZW50LlxuICpcbiAqIFNlY3VyZSBwYXNzd29yZCBjcmVhdGlvbiB3aXRoIHN0cmVuZ3RoIHZhbGlkYXRpb24gYW5kIGNvbmZpcm1hdGlvbi5cbiAqIEltcGxlbWVudHMgUXVlYmVjLWNvbXBsaWFudCBzZWN1cml0eSBzdGFuZGFyZHMgZm9yIHByb3BlcnR5IG1hbmFnZW1lbnQuXG4gKiBAcGFyYW0gcm9vdDAgLSBUaGUgd2l6YXJkIHN0ZXAgcHJvcHMuXG4gKiBAcGFyYW0gcm9vdDAuZGF0YSAtIEN1cnJlbnQgc3RlcCBkYXRhLlxuICogQHBhcmFtIHJvb3QwLm9uRGF0YUNoYW5nZSAtIENhbGxiYWNrIHdoZW4gc3RlcCBkYXRhIGNoYW5nZXMuXG4gKiBAcGFyYW0gcm9vdDAub25WYWxpZGF0aW9uQ2hhbmdlIC0gQ2FsbGJhY2sgd2hlbiB2YWxpZGF0aW9uIHN0YXR1cyBjaGFuZ2VzLlxuICogQHJldHVybnMgSlNYIGVsZW1lbnQgZm9yIHRoZSBwYXNzd29yZCBjcmVhdGlvbiBzdGVwLlxuICovXG4vKipcbiAqIFBhc3N3b3JkQ3JlYXRpb25TdGVwIGZ1bmN0aW9uLlxuICogQHBhcmFtIHJvb3QwXG4gKiBAcGFyYW0gcm9vdDAuZGF0YVxuICogQHBhcmFtIHJvb3QwLm9uRGF0YUNoYW5nZVxuICogQHBhcmFtIHJvb3QwLm9uVmFsaWRhdGlvbkNoYW5nZVxuICogQHBhcmFtIHJvb3QwLl9kYXRhXG4gKiBAcmV0dXJucyBGdW5jdGlvbiByZXN1bHQuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBQYXNzd29yZENyZWF0aW9uU3RlcCh7IF9kYXRhLCBvbkRhdGFDaGFuZ2UsIG9uVmFsaWRhdGlvbkNoYW5nZSB9OiBXaXphcmRTdGVwUHJvcHMpIHtcbiAgY29uc3QgeyB0OiBfdCB9ID0gdXNlTGFuZ3VhZ2UoKTtcbiAgY29uc3QgW2Zvcm1EYXRhLCBzZXRGb3JtRGF0YV0gPSB1c2VTdGF0ZTxQYXNzd29yZENyZWF0aW9uRGF0YT4oe1xuICAgIHBhc3N3b3JkOiAnJyxcbiAgICBjb25maXJtUGFzc3dvcmQ6ICcnLFxuICAgIGlzVmFsaWQ6IGZhbHNlLFxuICAgIC4uLl9kYXRhLFxuICB9KTtcbiAgY29uc3QgW3Nob3dQYXNzd29yZCwgc2V0U2hvd1Bhc3N3b3JkXSA9IHVzZVN0YXRlKGZhbHNlKTtcbiAgY29uc3QgW3Nob3dDb25maXJtUGFzc3dvcmQsIHNldFNob3dDb25maXJtUGFzc3dvcmRdID0gdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBbdG91Y2hlZCwgc2V0VG91Y2hlZF0gPSB1c2VTdGF0ZSh7XG4gICAgcGFzc3dvcmQ6IGZhbHNlLFxuICAgIGNvbmZpcm1QYXNzd29yZDogZmFsc2UsXG4gIH0pO1xuXG4gIC8vIFZhbGlkYXRlIGZvcm0gd2hlbmV2ZXIgcGFzc3dvcmQgZmllbGRzIGNoYW5nZVxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGNvbnN0IHBhc3N3b3JkU3RyZW5ndGggPSB2YWxpZGF0ZVBhc3N3b3JkU3RyZW5ndGgoZm9ybURhdGEucGFzc3dvcmQpO1xuICAgIGNvbnN0IHBhc3N3b3Jkc01hdGNoID0gZm9ybURhdGEucGFzc3dvcmQgPT09IGZvcm1EYXRhLmNvbmZpcm1QYXNzd29yZDtcbiAgICBjb25zdCBoYXNQYXNzd29yZCA9IGZvcm1EYXRhLnBhc3N3b3JkLmxlbmd0aCA+IDA7XG4gICAgY29uc3QgaGFzQ29uZmlybVBhc3N3b3JkID0gZm9ybURhdGEuY29uZmlybVBhc3N3b3JkLmxlbmd0aCA+IDA7XG4gICAgY29uc3QgaXNWYWxpZCA9IHBhc3N3b3JkU3RyZW5ndGguaXNWYWxpZCAmJiBwYXNzd29yZHNNYXRjaCAmJiBoYXNQYXNzd29yZCAmJiBoYXNDb25maXJtUGFzc3dvcmQ7XG5cbiAgICAvLyBPbmx5IHVwZGF0ZSBpZiB2YWxpZGF0aW9uIHN0YXRlIGFjdHVhbGx5IGNoYW5nZWRcbiAgICBpZiAoZm9ybURhdGEuaXNWYWxpZCAhPT0gaXNWYWxpZCkge1xuICAgICAgY29uc3QgdXBkYXRlZERhdGEgPSB7IC4uLmZvcm1EYXRhLCBpc1ZhbGlkIH07XG4gICAgICBvbkRhdGFDaGFuZ2UodXBkYXRlZERhdGEpO1xuICAgICAgb25WYWxpZGF0aW9uQ2hhbmdlKGlzVmFsaWQpO1xuICAgIH1cbiAgfSwgW2Zvcm1EYXRhLnBhc3N3b3JkLCBmb3JtRGF0YS5jb25maXJtUGFzc3dvcmQsIGZvcm1EYXRhLmlzVmFsaWRdKTtcblxuICBjb25zdCBoYW5kbGVQYXNzd29yZENoYW5nZSA9IChfdmFsdWU6IHN0cmluZykgPT4ge1xuICAgIHNldEZvcm1EYXRhKChwcmV2KSA9PiAoe1xuICAgICAgLi4ucHJldixcbiAgICAgIHBhc3N3b3JkOiBfdmFsdWUsXG4gICAgICBfZXJyb3I6IHVuZGVmaW5lZCxcbiAgICB9KSk7XG4gIH07XG5cbiAgY29uc3QgaGFuZGxlQ29uZmlybVBhc3N3b3JkQ2hhbmdlID0gKF92YWx1ZTogc3RyaW5nKSA9PiB7XG4gICAgc2V0Rm9ybURhdGEoKHByZXYpID0+ICh7XG4gICAgICAuLi5wcmV2LFxuICAgICAgY29uZmlybVBhc3N3b3JkOiBfdmFsdWUsXG4gICAgICBfZXJyb3I6IHVuZGVmaW5lZCxcbiAgICB9KSk7XG4gIH07XG5cbiAgY29uc3QgaGFuZGxlQmx1ciA9IChmaWVsZDogJ3Bhc3N3b3JkJyB8ICdjb25maXJtUGFzc3dvcmQnKSA9PiB7XG4gICAgc2V0VG91Y2hlZCgocHJldikgPT4gKHsgLi4ucHJldiwgW2ZpZWxkXTogdHJ1ZSB9KSk7XG4gIH07XG5cbiAgY29uc3QgZ2V0UGFzc3dvcmRNYXRjaEVycm9yID0gKCkgPT4ge1xuICAgIGlmICghdG91Y2hlZC5jb25maXJtUGFzc3dvcmQgfHwgIWZvcm1EYXRhLmNvbmZpcm1QYXNzd29yZCkge1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuXG4gICAgaWYgKGZvcm1EYXRhLnBhc3N3b3JkICE9PSBmb3JtRGF0YS5jb25maXJtUGFzc3dvcmQpIHtcbiAgICAgIHJldHVybiAnTGVzIG1vdHMgZGUgcGFzc2UgbmUgY29ycmVzcG9uZGVudCBwYXMnO1xuICAgIH1cbiAgICByZXR1cm4gbnVsbDtcbiAgfTtcblxuICBjb25zdCBwYXNzd29yZFN0cmVuZ3RoID0gdmFsaWRhdGVQYXNzd29yZFN0cmVuZ3RoKGZvcm1EYXRhLnBhc3N3b3JkKTtcbiAgY29uc3QgcGFzc3dvcmRNYXRjaEVycm9yID0gZ2V0UGFzc3dvcmRNYXRjaEVycm9yKCk7XG4gIGNvbnN0IGhhc1Bhc3N3b3JkRXJyb3IgPVxuICAgIHRvdWNoZWQucGFzc3dvcmQgJiYgIXBhc3N3b3JkU3RyZW5ndGguaXNWYWxpZCAmJiBmb3JtRGF0YS5wYXNzd29yZC5sZW5ndGggPiAwO1xuXG4gIHJldHVybiAoXG4gICAgPGRpdiBjbGFzc05hbWU9J3NwYWNlLXktNiBtYXgtdy0yeGwgbXgtYXV0byc+XG4gICAgICB7LyogU2VjdXJpdHkgTm90aWNlICovfVxuICAgICAgPEFsZXJ0IGNsYXNzTmFtZT0nYm9yZGVyLWJsdWUtMjAwIGJnLWJsdWUtNTAnPlxuICAgICAgICA8U2hpZWxkIGNsYXNzTmFtZT0naC00IHctNCB0ZXh0LWJsdWUtNjAwJyAvPlxuICAgICAgICA8QWxlcnREZXNjcmlwdGlvbiBjbGFzc05hbWU9J3RleHQtYmx1ZS04MDAnPlxuICAgICAgICAgIDxzdHJvbmc+U8OpY3VyaXTDqSByZW5mb3Jjw6llOjwvc3Ryb25nPiBDcsOpZXogdW4gbW90IGRlIHBhc3NlIHPDqWN1cmlzw6kgcG91ciBwcm90w6lnZXIgdm90cmVcbiAgICAgICAgICBjb21wdGUgZXQgcmVzcGVjdGVyIGxlcyBzdGFuZGFyZHMgZGUgc8OpY3VyaXTDqSBxdcOpYsOpY29pcy5cbiAgICAgICAgPC9BbGVydERlc2NyaXB0aW9uPlxuICAgICAgPC9BbGVydD5cblxuICAgICAgPENhcmQ+XG4gICAgICAgIDxDYXJkQ29udGVudCBjbGFzc05hbWU9J3B0LTYgc3BhY2UteS02Jz5cbiAgICAgICAgICB7LyogUGFzc3dvcmQgRmllbGQgKi99XG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9J3NwYWNlLXktMic+XG4gICAgICAgICAgICA8TGFiZWwgaHRtbEZvcj0ncGFzc3dvcmQnIGNsYXNzTmFtZT0ndGV4dC1zbSBmb250LW1lZGl1bSB0ZXh0LWdyYXktNzAwJz5cbiAgICAgICAgICAgICAgTW90IGRlIHBhc3NlICpcbiAgICAgICAgICAgIDwvTGFiZWw+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0ncmVsYXRpdmUnPlxuICAgICAgICAgICAgICA8TG9jayBjbGFzc05hbWU9J2Fic29sdXRlIGxlZnQtMyB0b3AtMS8yIHRyYW5zZm9ybSAtdHJhbnNsYXRlLXktMS8yIHRleHQtZ3JheS00MDAgaC00IHctNCcgLz5cbiAgICAgICAgICAgICAgPElucHV0XG4gICAgICAgICAgICAgICAgaWQ9J3Bhc3N3b3JkJ1xuICAgICAgICAgICAgICAgIHR5cGU9e3Nob3dQYXNzd29yZCA/ICd0ZXh0JyA6ICdwYXNzd29yZCd9XG4gICAgICAgICAgICAgICAgdmFsdWU9e2Zvcm1EYXRhLnBhc3N3b3JkfVxuICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsoZSkgPT4gaGFuZGxlUGFzc3dvcmRDaGFuZ2UoZS50YXJnZXQudmFsdWUpfVxuICAgICAgICAgICAgICAgIG9uQmx1cj17KCkgPT4gaGFuZGxlQmx1cigncGFzc3dvcmQnKX1cbiAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcj0nRW50cmV6IHZvdHJlIG1vdCBkZSBwYXNzZSdcbiAgICAgICAgICAgICAgICBjbGFzc05hbWU9e2BwbC0xMCBwci0xMCAke2hhc1Bhc3N3b3JkRXJyb3IgPyAnYm9yZGVyLXJlZC01MDAgZm9jdXM6Ym9yZGVyLXJlZC01MDAnIDogJyd9YH1cbiAgICAgICAgICAgICAgICBhcmlhLWRlc2NyaWJlZGJ5PSdwYXNzd29yZC1yZXF1aXJlbWVudHMnXG4gICAgICAgICAgICAgICAgZGF0YS10ZXN0aWQ9J2lucHV0LXBhc3N3b3JkJ1xuICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICA8QnV0dG9uXG4gICAgICAgICAgICAgICAgdHlwZT0nYnV0dG9uJ1xuICAgICAgICAgICAgICAgIHZhcmlhbnQ9J2dob3N0J1xuICAgICAgICAgICAgICAgIHNpemU9J3NtJ1xuICAgICAgICAgICAgICAgIGNsYXNzTmFtZT0nYWJzb2x1dGUgcmlnaHQtMCB0b3AtMCBoLWZ1bGwgcHgtMyBweS0yIGhvdmVyOmJnLXRyYW5zcGFyZW50J1xuICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHNldFNob3dQYXNzd29yZCghc2hvd1Bhc3N3b3JkKX1cbiAgICAgICAgICAgICAgICBkYXRhLXRlc3RpZD0nYnV0dG9uLXRvZ2dsZS1wYXNzd29yZCdcbiAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgIHtzaG93UGFzc3dvcmQgPyAoXG4gICAgICAgICAgICAgICAgICA8RXllT2ZmIGNsYXNzTmFtZT0naC00IHctNCB0ZXh0LWdyYXktNDAwJyAvPlxuICAgICAgICAgICAgICAgICkgOiAoXG4gICAgICAgICAgICAgICAgICA8RXllIGNsYXNzTmFtZT0naC00IHctNCB0ZXh0LWdyYXktNDAwJyAvPlxuICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPSdzci1vbmx5Jz5cbiAgICAgICAgICAgICAgICAgIHtzaG93UGFzc3dvcmQgPyAnTWFzcXVlciBsZSBtb3QgZGUgcGFzc2UnIDogJ0FmZmljaGVyIGxlIG1vdCBkZSBwYXNzZSd9XG4gICAgICAgICAgICAgICAgPC9zcGFuPlxuICAgICAgICAgICAgICA8L0J1dHRvbj5cbiAgICAgICAgICAgIDwvZGl2PlxuXG4gICAgICAgICAgICB7LyogUGFzc3dvcmQgU3RyZW5ndGggSW5kaWNhdG9yICovfVxuICAgICAgICAgICAgPFBhc3N3b3JkU3RyZW5ndGhJbmRpY2F0b3JcbiAgICAgICAgICAgICAgcGFzc3dvcmQ9e2Zvcm1EYXRhLnBhc3N3b3JkfVxuICAgICAgICAgICAgICBzaG93UGFzc3dvcmQ9e3Nob3dQYXNzd29yZH1cbiAgICAgICAgICAgICAgb25Ub2dnbGVWaXNpYmlsaXR5PXsoKSA9PiBzZXRTaG93UGFzc3dvcmQoIXNob3dQYXNzd29yZCl9XG4gICAgICAgICAgICAgIGNsYXNzTmFtZT0nbXQtMydcbiAgICAgICAgICAgIC8+XG5cbiAgICAgICAgICAgIHtoYXNQYXNzd29yZEVycm9yICYmIChcbiAgICAgICAgICAgICAgPEFsZXJ0IHZhcmlhbnQ9J2Rlc3RydWN0aXZlJz5cbiAgICAgICAgICAgICAgICA8QWxlcnRUcmlhbmdsZSBjbGFzc05hbWU9J2gtNCB3LTQnIC8+XG4gICAgICAgICAgICAgICAgPEFsZXJ0RGVzY3JpcHRpb24+XG4gICAgICAgICAgICAgICAgICBMZSBtb3QgZGUgcGFzc2UgbmUgcmVzcGVjdGUgcGFzIGxlcyBleGlnZW5jZXMgZGUgc8OpY3VyaXTDqS5cbiAgICAgICAgICAgICAgICA8L0FsZXJ0RGVzY3JpcHRpb24+XG4gICAgICAgICAgICAgIDwvQWxlcnQ+XG4gICAgICAgICAgICApfVxuICAgICAgICAgIDwvZGl2PlxuXG4gICAgICAgICAgey8qIENvbmZpcm0gUGFzc3dvcmQgRmllbGQgKi99XG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9J3NwYWNlLXktMic+XG4gICAgICAgICAgICA8TGFiZWwgaHRtbEZvcj0nY29uZmlybVBhc3N3b3JkJyBjbGFzc05hbWU9J3RleHQtc20gZm9udC1tZWRpdW0gdGV4dC1ncmF5LTcwMCc+XG4gICAgICAgICAgICAgIENvbmZpcm1lciBsZSBtb3QgZGUgcGFzc2UgKlxuICAgICAgICAgICAgPC9MYWJlbD5cbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSdyZWxhdGl2ZSc+XG4gICAgICAgICAgICAgIDxMb2NrIGNsYXNzTmFtZT0nYWJzb2x1dGUgbGVmdC0zIHRvcC0xLzIgdHJhbnNmb3JtIC10cmFuc2xhdGUteS0xLzIgdGV4dC1ncmF5LTQwMCBoLTQgdy00JyAvPlxuICAgICAgICAgICAgICA8SW5wdXRcbiAgICAgICAgICAgICAgICBpZD0nY29uZmlybVBhc3N3b3JkJ1xuICAgICAgICAgICAgICAgIHR5cGU9e3Nob3dDb25maXJtUGFzc3dvcmQgPyAndGV4dCcgOiAncGFzc3dvcmQnfVxuICAgICAgICAgICAgICAgIHZhbHVlPXtmb3JtRGF0YS5jb25maXJtUGFzc3dvcmR9XG4gICAgICAgICAgICAgICAgb25DaGFuZ2U9eyhlKSA9PiBoYW5kbGVDb25maXJtUGFzc3dvcmRDaGFuZ2UoZS50YXJnZXQudmFsdWUpfVxuICAgICAgICAgICAgICAgIG9uQmx1cj17KCkgPT4gaGFuZGxlQmx1cignY29uZmlybVBhc3N3b3JkJyl9XG4gICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI9J0NvbmZpcm1leiB2b3RyZSBtb3QgZGUgcGFzc2UnXG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lPXtgcGwtMTAgcHItMTAgJHtwYXNzd29yZE1hdGNoRXJyb3IgPyAnYm9yZGVyLXJlZC01MDAgZm9jdXM6Ym9yZGVyLXJlZC01MDAnIDogJyd9YH1cbiAgICAgICAgICAgICAgICBkYXRhLXRlc3RpZD0naW5wdXQtY29uZmlybS1wYXNzd29yZCdcbiAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgPEJ1dHRvblxuICAgICAgICAgICAgICAgIHR5cGU9J2J1dHRvbidcbiAgICAgICAgICAgICAgICB2YXJpYW50PSdnaG9zdCdcbiAgICAgICAgICAgICAgICBzaXplPSdzbSdcbiAgICAgICAgICAgICAgICBjbGFzc05hbWU9J2Fic29sdXRlIHJpZ2h0LTAgdG9wLTAgaC1mdWxsIHB4LTMgcHktMiBob3ZlcjpiZy10cmFuc3BhcmVudCdcbiAgICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiBzZXRTaG93Q29uZmlybVBhc3N3b3JkKCFzaG93Q29uZmlybVBhc3N3b3JkKX1cbiAgICAgICAgICAgICAgICBkYXRhLXRlc3RpZD0nYnV0dG9uLXRvZ2dsZS1jb25maXJtLXBhc3N3b3JkJ1xuICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAge3Nob3dDb25maXJtUGFzc3dvcmQgPyAoXG4gICAgICAgICAgICAgICAgICA8RXllT2ZmIGNsYXNzTmFtZT0naC00IHctNCB0ZXh0LWdyYXktNDAwJyAvPlxuICAgICAgICAgICAgICAgICkgOiAoXG4gICAgICAgICAgICAgICAgICA8RXllIGNsYXNzTmFtZT0naC00IHctNCB0ZXh0LWdyYXktNDAwJyAvPlxuICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPSdzci1vbmx5Jz5cbiAgICAgICAgICAgICAgICAgIHtzaG93Q29uZmlybVBhc3N3b3JkID8gJ01hc3F1ZXIgbGUgbW90IGRlIHBhc3NlJyA6ICdBZmZpY2hlciBsZSBtb3QgZGUgcGFzc2UnfVxuICAgICAgICAgICAgICAgIDwvc3Bhbj5cbiAgICAgICAgICAgICAgPC9CdXR0b24+XG4gICAgICAgICAgICA8L2Rpdj5cblxuICAgICAgICAgICAge2Zvcm1EYXRhLmNvbmZpcm1QYXNzd29yZCAmJiBmb3JtRGF0YS5wYXNzd29yZCA9PT0gZm9ybURhdGEuY29uZmlybVBhc3N3b3JkICYmIChcbiAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9J2ZsZXggaXRlbXMtY2VudGVyIHRleHQtc20gdGV4dC1ncmVlbi02MDAnPlxuICAgICAgICAgICAgICAgIDxTaGllbGQgY2xhc3NOYW1lPSdoLTQgdy00IG1yLTEnIC8+XG4gICAgICAgICAgICAgICAgTGVzIG1vdHMgZGUgcGFzc2UgY29ycmVzcG9uZGVudFxuICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICl9XG5cbiAgICAgICAgICAgIHtwYXNzd29yZE1hdGNoRXJyb3IgJiYgKFxuICAgICAgICAgICAgICA8QWxlcnQgdmFyaWFudD0nZGVzdHJ1Y3RpdmUnPlxuICAgICAgICAgICAgICAgIDxBbGVydFRyaWFuZ2xlIGNsYXNzTmFtZT0naC00IHctNCcgLz5cbiAgICAgICAgICAgICAgICA8QWxlcnREZXNjcmlwdGlvbj57cGFzc3dvcmRNYXRjaEVycm9yfTwvQWxlcnREZXNjcmlwdGlvbj5cbiAgICAgICAgICAgICAgPC9BbGVydD5cbiAgICAgICAgICAgICl9XG4gICAgICAgICAgPC9kaXY+XG5cbiAgICAgICAgICB7LyogU2VjdXJpdHkgR3VpZGVsaW5lcyAqL31cbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0nYmctZ3JheS01MCBwLTQgcm91bmRlZC1sZyc+XG4gICAgICAgICAgICA8aDQgY2xhc3NOYW1lPSd0ZXh0LXNtIGZvbnQtbWVkaXVtIHRleHQtZ3JheS05MDAgbWItMic+8J+SoSBDb25zZWlscyBkZSBzw6ljdXJpdMOpPC9oND5cbiAgICAgICAgICAgIDx1bCBjbGFzc05hbWU9J3RleHQteHMgdGV4dC1ncmF5LTYwMCBzcGFjZS15LTEnPlxuICAgICAgICAgICAgICA8bGk+4oCiIFV0aWxpc2V6IHVuZSBjb21iaW5haXNvbiB1bmlxdWUgZGUgbGV0dHJlcywgY2hpZmZyZXMgZXQgc3ltYm9sZXM8L2xpPlxuICAgICAgICAgICAgICA8bGk+4oCiIMOJdml0ZXogbGVzIGluZm9ybWF0aW9ucyBwZXJzb25uZWxsZXMgKG5vbSwgZGF0ZSBkZSBuYWlzc2FuY2UpPC9saT5cbiAgICAgICAgICAgICAgPGxpPuKAoiBOZSByw6l1dGlsaXNleiBwYXMgdW4gbW90IGRlIHBhc3NlIGQndW4gYXV0cmUgY29tcHRlPC9saT5cbiAgICAgICAgICAgICAgPGxpPuKAoiBDb25zaWTDqXJleiBsJ3V0aWxpc2F0aW9uIGQndW4gZ2VzdGlvbm5haXJlIGRlIG1vdHMgZGUgcGFzc2U8L2xpPlxuICAgICAgICAgICAgPC91bD5cbiAgICAgICAgICA8L2Rpdj5cblxuICAgICAgICAgIHsvKiBRdWViZWMgQ29tcGxpYW5jZSBOb3RpY2UgKi99XG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9J2JnLWJsdWUtNTAgYm9yZGVyIGJvcmRlci1ibHVlLTIwMCBwLTQgcm91bmRlZC1sZyc+XG4gICAgICAgICAgICA8aDQgY2xhc3NOYW1lPSd0ZXh0LXNtIGZvbnQtbWVkaXVtIHRleHQtYmx1ZS05MDAgbWItMic+XG4gICAgICAgICAgICAgIPCfm6HvuI8gQ29uZm9ybWl0w6kgUXXDqWLDqWNvaXNlIC0gU8OpY3VyaXTDqSBkZXMgZG9ubsOpZXNcbiAgICAgICAgICAgIDwvaDQ+XG4gICAgICAgICAgICA8cCBjbGFzc05hbWU9J3RleHQteHMgdGV4dC1ibHVlLTgwMCc+XG4gICAgICAgICAgICAgIFZvdHJlIG1vdCBkZSBwYXNzZSBlc3QgY2hpZmZyw6kgc2Vsb24gbGVzIHN0YW5kYXJkcyBkZSBsJ2luZHVzdHJpZSBldCBzdG9ja8OpIGRlIG1hbmnDqHJlXG4gICAgICAgICAgICAgIHPDqWN1cmlzw6llIGNvbmZvcm3DqW1lbnQgw6AgbGEgTG9pIDI1IGR1IFF1w6liZWMuIE5vdXMgbmUgcG91dm9ucyBwYXMgdm9pciB2b3RyZSBtb3QgZGVcbiAgICAgICAgICAgICAgcGFzc2UgdW5lIGZvaXMgcXUnaWwgZXN0IGVucmVnaXN0csOpLlxuICAgICAgICAgICAgPC9wPlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICA8L0NhcmRDb250ZW50PlxuICAgICAgPC9DYXJkPlxuICAgIDwvZGl2PlxuICApO1xufVxuIl0sInZlcnNpb24iOjN9