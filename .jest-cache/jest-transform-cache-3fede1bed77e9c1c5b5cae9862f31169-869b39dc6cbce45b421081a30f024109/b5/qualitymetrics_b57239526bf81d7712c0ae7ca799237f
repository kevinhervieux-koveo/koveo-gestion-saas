b3dbce7b05f0040a103b3ce67ab6be93
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.QualityMetrics = QualityMetrics;
const jsx_runtime_1 = require("react/jsx-runtime");
const card_1 = require("@/components/ui/card");
const lucide_react_1 = require("lucide-react");
const use_language_1 = require("@/hooks/use-language");
const react_query_1 = require("@tanstack/react-query");
const skeleton_1 = require("@/components/ui/skeleton");
/**
 * Quality metrics component that displays comprehensive development quality indicators
 * including code coverage, complexity, performance metrics, and compliance scores.
 * @returns JSX element displaying the quality metrics dashboard.
 */
/**
 * QualityMetrics function.
 * @returns Function result.
 */
function QualityMetrics() {
    const { t } = (0, use_language_1.useLanguage)();
    const { data: metricsData, isLoading } = (0, react_query_1.useQuery)({
        queryKey: ['/api/quality-metrics'],
        queryFn: () => fetch('/api/quality-metrics').then(res => res.json()),
        staleTime: 5 * 60 * 1000, // 5 minutes
        refetchInterval: 5 * 60 * 1000, // Refetch every 5 minutes
    });
    const getColorByValue = (label, _value) => {
        if (label === t('codeCoverage')) {
            const coverage = parseInt(_value);
            if (coverage >= 80) {
                return { bg: 'bg-green-50', text: 'text-green-600' };
            }
            if (coverage >= 60) {
                return { bg: 'bg-yellow-50', text: 'text-yellow-600' };
            }
            return { bg: 'bg-red-50', text: 'text-red-600' };
        }
        if (label === t('translationCoverage')) {
            const coverage = parseInt(_value);
            if (coverage >= 95) {
                return { bg: 'bg-green-50', text: 'text-green-600' };
            }
            if (coverage >= 80) {
                return { bg: 'bg-blue-50', text: 'text-blue-600' };
            }
            if (coverage >= 60) {
                return { bg: 'bg-yellow-50', text: 'text-yellow-600' };
            }
            return { bg: 'bg-red-50', text: 'text-red-600' };
        }
        if (label === t('codeQuality')) {
            if (['A+', 'A'].includes(_value)) {
                return { bg: 'bg-green-50', text: 'text-green-600' };
            }
            if (['B+', 'B'].includes(_value)) {
                return { bg: 'bg-blue-50', text: 'text-blue-600' };
            }
            return { bg: 'bg-yellow-50', text: 'text-yellow-600' };
        }
        if (label === t('securityIssues')) {
            const issues = parseInt(_value);
            if (issues === 0) {
                return { bg: 'bg-green-50', text: 'text-green-600' };
            }
            if (issues <= 5) {
                return { bg: 'bg-yellow-50', text: 'text-yellow-600' };
            }
            return { bg: 'bg-red-50', text: 'text-red-600' };
        }
        // Performance metrics color coding with null safety
        if (label === t('responseTime')) {
            const timeMs = parseInt((_value || '0ms').replace('ms', ''));
            if (timeMs <= 100) {
                return { bg: 'bg-green-50', text: 'text-green-600' };
            }
            if (timeMs <= 200) {
                return { bg: 'bg-yellow-50', text: 'text-yellow-600' };
            }
            return { bg: 'bg-red-50', text: 'text-red-600' };
        }
        if (label === t('memoryUsage')) {
            const memoryMB = parseInt((_value || '0MB').replace('MB', ''));
            if (memoryMB <= 50) {
                return { bg: 'bg-green-50', text: 'text-green-600' };
            }
            if (memoryMB <= 100) {
                return { bg: 'bg-yellow-50', text: 'text-yellow-600' };
            }
            return { bg: 'bg-red-50', text: 'text-red-600' };
        }
        if (label === t('bundleSize')) {
            const sizeMB = parseFloat((_value || '0MB').replace('MB', ''));
            if (sizeMB <= 2) {
                return { bg: 'bg-green-50', text: 'text-green-600' };
            }
            if (sizeMB <= 5) {
                return { bg: 'bg-yellow-50', text: 'text-yellow-600' };
            }
            return { bg: 'bg-red-50', text: 'text-red-600' };
        }
        if (label === t('dbQueryTime')) {
            const queryMs = parseInt((_value || '0ms').replace('ms', ''));
            if (queryMs <= 50) {
                return { bg: 'bg-green-50', text: 'text-green-600' };
            }
            if (queryMs <= 100) {
                return { bg: 'bg-yellow-50', text: 'text-yellow-600' };
            }
            return { bg: 'bg-red-50', text: 'text-red-600' };
        }
        if (label === t('pageLoadTime')) {
            const loadMs = parseInt((_value || '0ms').replace('ms', ''));
            if (loadMs <= 1000) {
                return { bg: 'bg-green-50', text: 'text-green-600' };
            }
            if (loadMs <= 2000) {
                return { bg: 'bg-yellow-50', text: 'text-yellow-600' };
            }
            return { bg: 'bg-red-50', text: 'text-red-600' };
        }
        return { bg: 'bg-orange-50', text: 'text-orange-600' };
    };
    const metrics = metricsData
        ? [
            {
                _value: metricsData.coverage,
                label: t('codeCoverage'),
                ...getColorByValue(t('codeCoverage'), metricsData.coverage),
            },
            {
                _value: metricsData.codeQuality,
                label: t('codeQuality'),
                ...getColorByValue(t('codeQuality'), metricsData.codeQuality),
            },
            {
                _value: metricsData.securityIssues,
                label: t('securityIssues'),
                ...getColorByValue(t('securityIssues'), metricsData.securityIssues),
            },
            {
                _value: metricsData.buildTime,
                label: t('buildTime'),
                ...getColorByValue(t('buildTime'), metricsData.buildTime),
            },
            {
                _value: metricsData.translationCoverage,
                label: t('translationCoverage'),
                ...getColorByValue(t('translationCoverage'), metricsData.translationCoverage),
            },
            // Performance metrics with null safety
            {
                _value: metricsData.responseTime || 'N/A',
                label: t('responseTime'),
                ...getColorByValue(t('responseTime'), metricsData.responseTime || '0ms'),
            },
            {
                _value: metricsData.memoryUsage || 'N/A',
                label: t('memoryUsage'),
                ...getColorByValue(t('memoryUsage'), metricsData.memoryUsage || '0MB'),
            },
            {
                _value: metricsData.bundleSize || 'N/A',
                label: t('bundleSize'),
                ...getColorByValue(t('bundleSize'), metricsData.bundleSize || '0MB'),
            },
            {
                _value: metricsData.dbQueryTime || 'N/A',
                label: t('dbQueryTime'),
                ...getColorByValue(t('dbQueryTime'), metricsData.dbQueryTime || '0ms'),
            },
            {
                _value: metricsData.pageLoadTime || 'N/A',
                label: t('pageLoadTime'),
                ...getColorByValue(t('pageLoadTime'), metricsData.pageLoadTime || '0ms'),
            },
        ]
        : [];
    return ((0, jsx_runtime_1.jsx)(card_1.Card, { children: (0, jsx_runtime_1.jsxs)(card_1.CardContent, { className: 'p-6', children: [(0, jsx_runtime_1.jsxs)("h3", { className: 'text-lg font-semibold text-gray-900 mb-4 flex items-center', children: [(0, jsx_runtime_1.jsx)(lucide_react_1.TrendingUp, { className: 'text-koveo-navy mr-3', size: 20 }), t('qualityMetrics')] }), (0, jsx_runtime_1.jsx)("div", { className: 'grid grid-cols-2 lg:grid-cols-5 xl:grid-cols-10 gap-4', children: isLoading
                        ? // Loading skeleton
                            Array.from({ length: 10 }).map((_, _index) => ((0, jsx_runtime_1.jsxs)("div", { className: 'text-center p-4 bg-gray-50 rounded-lg', children: [(0, jsx_runtime_1.jsx)(skeleton_1.Skeleton, { className: 'h-8 w-16 mx-auto mb-2' }), (0, jsx_runtime_1.jsx)(skeleton_1.Skeleton, { className: 'h-4 w-20 mx-auto' })] }, `skeleton-${_index}`)))
                        : metrics.map((metric) => ((0, jsx_runtime_1.jsxs)("div", { className: `text-center p-4 ${metric.bg} rounded-lg`, children: [(0, jsx_runtime_1.jsx)("div", { className: `text-2xl font-bold ${metric.text}`, children: metric._value }), (0, jsx_runtime_1.jsx)("div", { className: 'text-sm text-gray-600', children: metric.label })] }, metric.label))) })] }) }));
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiL2hvbWUvcnVubmVyL3dvcmtzcGFjZS9jbGllbnQvc3JjL2NvbXBvbmVudHMvZGFzaGJvYXJkL3F1YWxpdHktbWV0cmljcy50c3giLCJtYXBwaW5ncyI6Ijs7QUFnQ0Esd0NBdU1DOztBQXZPRCwrQ0FBeUQ7QUFDekQsK0NBQTBDO0FBQzFDLHVEQUFtRDtBQUNuRCx1REFBaUQ7QUFDakQsdURBQW9EO0FBbUJwRDs7OztHQUlHO0FBQ0g7OztHQUdHO0FBQ0gsU0FBZ0IsY0FBYztJQUM1QixNQUFNLEVBQUUsQ0FBQyxFQUFFLEdBQUcsSUFBQSwwQkFBVyxHQUFFLENBQUM7SUFFNUIsTUFBTSxFQUFFLElBQUksRUFBRSxXQUFXLEVBQUUsU0FBUyxFQUFFLEdBQUcsSUFBQSxzQkFBUSxFQUFxQjtRQUNwRSxRQUFRLEVBQUUsQ0FBQyxzQkFBc0IsQ0FBQztRQUNsQyxPQUFPLEVBQUUsR0FBRyxFQUFFLENBQUMsS0FBSyxDQUFDLHNCQUFzQixDQUFDLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUMsR0FBRyxDQUFDLElBQUksRUFBRSxDQUFDO1FBQ3BFLFNBQVMsRUFBRSxDQUFDLEdBQUcsRUFBRSxHQUFHLElBQUksRUFBRSxZQUFZO1FBQ3RDLGVBQWUsRUFBRSxDQUFDLEdBQUcsRUFBRSxHQUFHLElBQUksRUFBRSwwQkFBMEI7S0FDM0QsQ0FBQyxDQUFDO0lBRUgsTUFBTSxlQUFlLEdBQUcsQ0FBQyxLQUFhLEVBQUUsTUFBYyxFQUFFLEVBQUU7UUFDeEQsSUFBSSxLQUFLLEtBQUssQ0FBQyxDQUFDLGNBQWMsQ0FBQyxFQUFFLENBQUM7WUFDaEMsTUFBTSxRQUFRLEdBQUcsUUFBUSxDQUFDLE1BQU0sQ0FBQyxDQUFDO1lBQ2xDLElBQUksUUFBUSxJQUFJLEVBQUUsRUFBRSxDQUFDO2dCQUNuQixPQUFPLEVBQUUsRUFBRSxFQUFFLGFBQWEsRUFBRSxJQUFJLEVBQUUsZ0JBQWdCLEVBQUUsQ0FBQztZQUN2RCxDQUFDO1lBQ0QsSUFBSSxRQUFRLElBQUksRUFBRSxFQUFFLENBQUM7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ZW50cy9kYXNoYm9hcmQvcXVhbGl0eS1tZXRyaWNzLnRzeCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBDYXJkLCBDYXJkQ29udGVudCB9IGZyb20gJ0AvY29tcG9uZW50cy91aS9jYXJkJztcbmltcG9ydCB7IFRyZW5kaW5nVXAgfSBmcm9tICdsdWNpZGUtcmVhY3QnO1xuaW1wb3J0IHsgdXNlTGFuZ3VhZ2UgfSBmcm9tICdAL2hvb2tzL3VzZS1sYW5ndWFnZSc7XG5pbXBvcnQgeyB1c2VRdWVyeSB9IGZyb20gJ0B0YW5zdGFjay9yZWFjdC1xdWVyeSc7XG5pbXBvcnQgeyBTa2VsZXRvbiB9IGZyb20gJ0AvY29tcG9uZW50cy91aS9za2VsZXRvbic7XG5cbi8qKlxuICogSW50ZXJmYWNlIGZvciBxdWFsaXR5IG1ldHJpY3MgZGF0YSBmcm9tIHRoZSBBUEkgaW5jbHVkaW5nIHBlcmZvcm1hbmNlIG1ldHJpY3MuXG4gKi9cbmludGVyZmFjZSBRdWFsaXR5TWV0cmljc0RhdGEge1xuICBjb3ZlcmFnZTogc3RyaW5nO1xuICBjb2RlUXVhbGl0eTogc3RyaW5nO1xuICBzZWN1cml0eUlzc3Vlczogc3RyaW5nO1xuICBidWlsZFRpbWU6IHN0cmluZztcbiAgdHJhbnNsYXRpb25Db3ZlcmFnZTogc3RyaW5nO1xuICAvLyBQZXJmb3JtYW5jZSBtZXRyaWNzXG4gIHJlc3BvbnNlVGltZTogc3RyaW5nO1xuICBtZW1vcnlVc2FnZTogc3RyaW5nO1xuICBidW5kbGVTaXplOiBzdHJpbmc7XG4gIGRiUXVlcnlUaW1lOiBzdHJpbmc7XG4gIHBhZ2VMb2FkVGltZTogc3RyaW5nO1xufVxuXG4vKipcbiAqIFF1YWxpdHkgbWV0cmljcyBjb21wb25lbnQgdGhhdCBkaXNwbGF5cyBjb21wcmVoZW5zaXZlIGRldmVsb3BtZW50IHF1YWxpdHkgaW5kaWNhdG9yc1xuICogaW5jbHVkaW5nIGNvZGUgY292ZXJhZ2UsIGNvbXBsZXhpdHksIHBlcmZvcm1hbmNlIG1ldHJpY3MsIGFuZCBjb21wbGlhbmNlIHNjb3Jlcy5cbiAqIEByZXR1cm5zIEpTWCBlbGVtZW50IGRpc3BsYXlpbmcgdGhlIHF1YWxpdHkgbWV0cmljcyBkYXNoYm9hcmQuXG4gKi9cbi8qKlxuICogUXVhbGl0eU1ldHJpY3MgZnVuY3Rpb24uXG4gKiBAcmV0dXJucyBGdW5jdGlvbiByZXN1bHQuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBRdWFsaXR5TWV0cmljcygpIHtcbiAgY29uc3QgeyB0IH0gPSB1c2VMYW5ndWFnZSgpO1xuXG4gIGNvbnN0IHsgZGF0YTogbWV0cmljc0RhdGEsIGlzTG9hZGluZyB9ID0gdXNlUXVlcnk8UXVhbGl0eU1ldHJpY3NEYXRhPih7XG4gICAgcXVlcnlLZXk6IFsnL2FwaS9xdWFsaXR5LW1ldHJpY3MnXSxcbiAgICBxdWVyeUZuOiAoKSA9PiBmZXRjaCgnL2FwaS9xdWFsaXR5LW1ldHJpY3MnKS50aGVuKHJlcyA9PiByZXMuanNvbigpKSxcbiAgICBzdGFsZVRpbWU6IDUgKiA2MCAqIDEwMDAsIC8vIDUgbWludXRlc1xuICAgIHJlZmV0Y2hJbnRlcnZhbDogNSAqIDYwICogMTAwMCwgLy8gUmVmZXRjaCBldmVyeSA1IG1pbnV0ZXNcbiAgfSk7XG5cbiAgY29uc3QgZ2V0Q29sb3JCeVZhbHVlID0gKGxhYmVsOiBzdHJpbmcsIF92YWx1ZTogc3RyaW5nKSA9PiB7XG4gICAgaWYgKGxhYmVsID09PSB0KCdjb2RlQ292ZXJhZ2UnKSkge1xuICAgICAgY29uc3QgY292ZXJhZ2UgPSBwYXJzZUludChfdmFsdWUpO1xuICAgICAgaWYgKGNvdmVyYWdlID49IDgwKSB7XG4gICAgICAgIHJldHVybiB7IGJnOiAnYmctZ3JlZW4tNTAnLCB0ZXh0OiAndGV4dC1ncmVlbi02MDAnIH07XG4gICAgICB9XG4gICAgICBpZiAoY292ZXJhZ2UgPj0gNjApIHtcbiAgICAgICAgcmV0dXJuIHsgYmc6ICdiZy15ZWxsb3ctNTAnLCB0ZXh0OiAndGV4dC15ZWxsb3ctNjAwJyB9O1xuICAgICAgfVxuICAgICAgcmV0dXJuIHsgYmc6ICdiZy1yZWQtNTAnLCB0ZXh0OiAndGV4dC1yZWQtNjAwJyB9O1xuICAgIH1cblxuICAgIGlmIChsYWJlbCA9PT0gdCgndHJhbnNsYXRpb25Db3ZlcmFnZScpKSB7XG4gICAgICBjb25zdCBjb3ZlcmFnZSA9IHBhcnNlSW50KF92YWx1ZSk7XG4gICAgICBpZiAoY292ZXJhZ2UgPj0gOTUpIHtcbiAgICAgICAgcmV0dXJuIHsgYmc6ICdiZy1ncmVlbi01MCcsIHRleHQ6ICd0ZXh0LWdyZWVuLTYwMCcgfTtcbiAgICAgIH1cbiAgICAgIGlmIChjb3ZlcmFnZSA+PSA4MCkge1xuICAgICAgICByZXR1cm4geyBiZzogJ2JnLWJsdWUtNTAnLCB0ZXh0OiAndGV4dC1ibHVlLTYwMCcgfTtcbiAgICAgIH1cbiAgICAgIGlmIChjb3ZlcmFnZSA+PSA2MCkge1xuICAgICAgICByZXR1cm4geyBiZzogJ2JnLXllbGxvdy01MCcsIHRleHQ6ICd0ZXh0LXllbGxvdy02MDAnIH07XG4gICAgICB9XG4gICAgICByZXR1cm4geyBiZzogJ2JnLXJlZC01MCcsIHRleHQ6ICd0ZXh0LXJlZC02MDAnIH07XG4gICAgfVxuXG4gICAgaWYgKGxhYmVsID09PSB0KCdjb2RlUXVhbGl0eScpKSB7XG4gICAgICBpZiAoWydBKycsICdBJ10uaW5jbHVkZXMoX3ZhbHVlKSkge1xuICAgICAgICByZXR1cm4geyBiZzogJ2JnLWdyZWVuLTUwJywgdGV4dDogJ3RleHQtZ3JlZW4tNjAwJyB9O1xuICAgICAgfVxuICAgICAgaWYgKFsnQisnLCAnQiddLmluY2x1ZGVzKF92YWx1ZSkpIHtcbiAgICAgICAgcmV0dXJuIHsgYmc6ICdiZy1ibHVlLTUwJywgdGV4dDogJ3RleHQtYmx1ZS02MDAnIH07XG4gICAgICB9XG4gICAgICByZXR1cm4geyBiZzogJ2JnLXllbGxvdy01MCcsIHRleHQ6ICd0ZXh0LXllbGxvdy02MDAnIH07XG4gICAgfVxuXG4gICAgaWYgKGxhYmVsID09PSB0KCdzZWN1cml0eUlzc3VlcycpKSB7XG4gICAgICBjb25zdCBpc3N1ZXMgPSBwYXJzZUludChfdmFsdWUpO1xuICAgICAgaWYgKGlzc3VlcyA9PT0gMCkge1xuICAgICAgICByZXR1cm4geyBiZzogJ2JnLWdyZWVuLTUwJywgdGV4dDogJ3RleHQtZ3JlZW4tNjAwJyB9O1xuICAgICAgfVxuICAgICAgaWYgKGlzc3VlcyA8PSA1KSB7XG4gICAgICAgIHJldHVybiB7IGJnOiAnYmcteWVsbG93LTUwJywgdGV4dDogJ3RleHQteWVsbG93LTYwMCcgfTtcbiAgICAgIH1cbiAgICAgIHJldHVybiB7IGJnOiAnYmctcmVkLTUwJywgdGV4dDogJ3RleHQtcmVkLTYwMCcgfTtcbiAgICB9XG5cbiAgICAvLyBQZXJmb3JtYW5jZSBtZXRyaWNzIGNvbG9yIGNvZGluZyB3aXRoIG51bGwgc2FmZXR5XG4gICAgaWYgKGxhYmVsID09PSB0KCdyZXNwb25zZVRpbWUnKSkge1xuICAgICAgY29uc3QgdGltZU1zID0gcGFyc2VJbnQoKF92YWx1ZSB8fCAnMG1zJykucmVwbGFjZSgnbXMnLCAnJykpO1xuICAgICAgaWYgKHRpbWVNcyA8PSAxMDApIHtcbiAgICAgICAgcmV0dXJuIHsgYmc6ICdiZy1ncmVlbi01MCcsIHRleHQ6ICd0ZXh0LWdyZWVuLTYwMCcgfTtcbiAgICAgIH1cbiAgICAgIGlmICh0aW1lTXMgPD0gMjAwKSB7XG4gICAgICAgIHJldHVybiB7IGJnOiAnYmcteWVsbG93LTUwJywgdGV4dDogJ3RleHQteWVsbG93LTYwMCcgfTtcbiAgICAgIH1cbiAgICAgIHJldHVybiB7IGJnOiAnYmctcmVkLTUwJywgdGV4dDogJ3RleHQtcmVkLTYwMCcgfTtcbiAgICB9XG5cbiAgICBpZiAobGFiZWwgPT09IHQoJ21lbW9yeVVzYWdlJykpIHtcbiAgICAgIGNvbnN0IG1lbW9yeU1CID0gcGFyc2VJbnQoKF92YWx1ZSB8fCAnME1CJykucmVwbGFjZSgnTUInLCAnJykpO1xuICAgICAgaWYgKG1lbW9yeU1CIDw9IDUwKSB7XG4gICAgICAgIHJldHVybiB7IGJnOiAnYmctZ3JlZW4tNTAnLCB0ZXh0OiAndGV4dC1ncmVlbi02MDAnIH07XG4gICAgICB9XG4gICAgICBpZiAobWVtb3J5TUIgPD0gMTAwKSB7XG4gICAgICAgIHJldHVybiB7IGJnOiAnYmcteWVsbG93LTUwJywgdGV4dDogJ3RleHQteWVsbG93LTYwMCcgfTtcbiAgICAgIH1cbiAgICAgIHJldHVybiB7IGJnOiAnYmctcmVkLTUwJywgdGV4dDogJ3RleHQtcmVkLTYwMCcgfTtcbiAgICB9XG5cbiAgICBpZiAobGFiZWwgPT09IHQoJ2J1bmRsZVNpemUnKSkge1xuICAgICAgY29uc3Qgc2l6ZU1CID0gcGFyc2VGbG9hdCgoX3ZhbHVlIHx8ICcwTUInKS5yZXBsYWNlKCdNQicsICcnKSk7XG4gICAgICBpZiAoc2l6ZU1CIDw9IDIpIHtcbiAgICAgICAgcmV0dXJuIHsgYmc6ICdiZy1ncmVlbi01MCcsIHRleHQ6ICd0ZXh0LWdyZWVuLTYwMCcgfTtcbiAgICAgIH1cbiAgICAgIGlmIChzaXplTUIgPD0gNSkge1xuICAgICAgICByZXR1cm4geyBiZzogJ2JnLXllbGxvdy01MCcsIHRleHQ6ICd0ZXh0LXllbGxvdy02MDAnIH07XG4gICAgICB9XG4gICAgICByZXR1cm4geyBiZzogJ2JnLXJlZC01MCcsIHRleHQ6ICd0ZXh0LXJlZC02MDAnIH07XG4gICAgfVxuXG4gICAgaWYgKGxhYmVsID09PSB0KCdkYlF1ZXJ5VGltZScpKSB7XG4gICAgICBjb25zdCBxdWVyeU1zID0gcGFyc2VJbnQoKF92YWx1ZSB8fCAnMG1zJykucmVwbGFjZSgnbXMnLCAnJykpO1xuICAgICAgaWYgKHF1ZXJ5TXMgPD0gNTApIHtcbiAgICAgICAgcmV0dXJuIHsgYmc6ICdiZy1ncmVlbi01MCcsIHRleHQ6ICd0ZXh0LWdyZWVuLTYwMCcgfTtcbiAgICAgIH1cbiAgICAgIGlmIChxdWVyeU1zIDw9IDEwMCkge1xuICAgICAgICByZXR1cm4geyBiZzogJ2JnLXllbGxvdy01MCcsIHRleHQ6ICd0ZXh0LXllbGxvdy02MDAnIH07XG4gICAgICB9XG4gICAgICByZXR1cm4geyBiZzogJ2JnLXJlZC01MCcsIHRleHQ6ICd0ZXh0LXJlZC02MDAnIH07XG4gICAgfVxuXG4gICAgaWYgKGxhYmVsID09PSB0KCdwYWdlTG9hZFRpbWUnKSkge1xuICAgICAgY29uc3QgbG9hZE1zID0gcGFyc2VJbnQoKF92YWx1ZSB8fCAnMG1zJykucmVwbGFjZSgnbXMnLCAnJykpO1xuICAgICAgaWYgKGxvYWRNcyA8PSAxMDAwKSB7XG4gICAgICAgIHJldHVybiB7IGJnOiAnYmctZ3JlZW4tNTAnLCB0ZXh0OiAndGV4dC1ncmVlbi02MDAnIH07XG4gICAgICB9XG4gICAgICBpZiAobG9hZE1zIDw9IDIwMDApIHtcbiAgICAgICAgcmV0dXJuIHsgYmc6ICdiZy15ZWxsb3ctNTAnLCB0ZXh0OiAndGV4dC15ZWxsb3ctNjAwJyB9O1xuICAgICAgfVxuICAgICAgcmV0dXJuIHsgYmc6ICdiZy1yZWQtNTAnLCB0ZXh0OiAndGV4dC1yZWQtNjAwJyB9O1xuICAgIH1cblxuICAgIHJldHVybiB7IGJnOiAnYmctb3JhbmdlLTUwJywgdGV4dDogJ3RleHQtb3JhbmdlLTYwMCcgfTtcbiAgfTtcblxuICBjb25zdCBtZXRyaWNzID0gbWV0cmljc0RhdGFcbiAgICA/IFtcbiAgICAgICAge1xuICAgICAgICAgIF92YWx1ZTogbWV0cmljc0RhdGEuY292ZXJhZ2UsXG4gICAgICAgICAgbGFiZWw6IHQoJ2NvZGVDb3ZlcmFnZScpLFxuICAgICAgICAgIC4uLmdldENvbG9yQnlWYWx1ZSh0KCdjb2RlQ292ZXJhZ2UnKSwgbWV0cmljc0RhdGEuY292ZXJhZ2UpLFxuICAgICAgICB9LFxuICAgICAgICB7XG4gICAgICAgICAgX3ZhbHVlOiBtZXRyaWNzRGF0YS5jb2RlUXVhbGl0eSxcbiAgICAgICAgICBsYWJlbDogdCgnY29kZVF1YWxpdHknKSxcbiAgICAgICAgICAuLi5nZXRDb2xvckJ5VmFsdWUodCgnY29kZVF1YWxpdHknKSwgbWV0cmljc0RhdGEuY29kZVF1YWxpdHkpLFxuICAgICAgICB9LFxuICAgICAgICB7XG4gICAgICAgICAgX3ZhbHVlOiBtZXRyaWNzRGF0YS5zZWN1cml0eUlzc3VlcyxcbiAgICAgICAgICBsYWJlbDogdCgnc2VjdXJpdHlJc3N1ZXMnKSxcbiAgICAgICAgICAuLi5nZXRDb2xvckJ5VmFsdWUodCgnc2VjdXJpdHlJc3N1ZXMnKSwgbWV0cmljc0RhdGEuc2VjdXJpdHlJc3N1ZXMpLFxuICAgICAgICB9LFxuICAgICAgICB7XG4gICAgICAgICAgX3ZhbHVlOiBtZXRyaWNzRGF0YS5idWlsZFRpbWUsXG4gICAgICAgICAgbGFiZWw6IHQoJ2J1aWxkVGltZScpLFxuICAgICAgICAgIC4uLmdldENvbG9yQnlWYWx1ZSh0KCdidWlsZFRpbWUnKSwgbWV0cmljc0RhdGEuYnVpbGRUaW1lKSxcbiAgICAgICAgfSxcbiAgICAgICAge1xuICAgICAgICAgIF92YWx1ZTogbWV0cmljc0RhdGEudHJhbnNsYXRpb25Db3ZlcmFnZSxcbiAgICAgICAgICBsYWJlbDogdCgndHJhbnNsYXRpb25Db3ZlcmFnZScpLFxuICAgICAgICAgIC4uLmdldENvbG9yQnlWYWx1ZSh0KCd0cmFuc2xhdGlvbkNvdmVyYWdlJyksIG1ldHJpY3NEYXRhLnRyYW5zbGF0aW9uQ292ZXJhZ2UpLFxuICAgICAgICB9LFxuICAgICAgICAvLyBQZXJmb3JtYW5jZSBtZXRyaWNzIHdpdGggbnVsbCBzYWZldHlcbiAgICAgICAge1xuICAgICAgICAgIF92YWx1ZTogbWV0cmljc0RhdGEucmVzcG9uc2VUaW1lIHx8ICdOL0EnLFxuICAgICAgICAgIGxhYmVsOiB0KCdyZXNwb25zZVRpbWUnKSxcbiAgICAgICAgICAuLi5nZXRDb2xvckJ5VmFsdWUodCgncmVzcG9uc2VUaW1lJyksIG1ldHJpY3NEYXRhLnJlc3BvbnNlVGltZSB8fCAnMG1zJyksXG4gICAgICAgIH0sXG4gICAgICAgIHtcbiAgICAgICAgICBfdmFsdWU6IG1ldHJpY3NEYXRhLm1lbW9yeVVzYWdlIHx8ICdOL0EnLFxuICAgICAgICAgIGxhYmVsOiB0KCdtZW1vcnlVc2FnZScpLFxuICAgICAgICAgIC4uLmdldENvbG9yQnlWYWx1ZSh0KCdtZW1vcnlVc2FnZScpLCBtZXRyaWNzRGF0YS5tZW1vcnlVc2FnZSB8fCAnME1CJyksXG4gICAgICAgIH0sXG4gICAgICAgIHtcbiAgICAgICAgICBfdmFsdWU6IG1ldHJpY3NEYXRhLmJ1bmRsZVNpemUgfHwgJ04vQScsXG4gICAgICAgICAgbGFiZWw6IHQoJ2J1bmRsZVNpemUnKSxcbiAgICAgICAgICAuLi5nZXRDb2xvckJ5VmFsdWUodCgnYnVuZGxlU2l6ZScpLCBtZXRyaWNzRGF0YS5idW5kbGVTaXplIHx8ICcwTUInKSxcbiAgICAgICAgfSxcbiAgICAgICAge1xuICAgICAgICAgIF92YWx1ZTogbWV0cmljc0RhdGEuZGJRdWVyeVRpbWUgfHwgJ04vQScsXG4gICAgICAgICAgbGFiZWw6IHQoJ2RiUXVlcnlUaW1lJyksXG4gICAgICAgICAgLi4uZ2V0Q29sb3JCeVZhbHVlKHQoJ2RiUXVlcnlUaW1lJyksIG1ldHJpY3NEYXRhLmRiUXVlcnlUaW1lIHx8ICcwbXMnKSxcbiAgICAgICAgfSxcbiAgICAgICAge1xuICAgICAgICAgIF92YWx1ZTogbWV0cmljc0RhdGEucGFnZUxvYWRUaW1lIHx8ICdOL0EnLFxuICAgICAgICAgIGxhYmVsOiB0KCdwYWdlTG9hZFRpbWUnKSxcbiAgICAgICAgICAuLi5nZXRDb2xvckJ5VmFsdWUodCgncGFnZUxvYWRUaW1lJyksIG1ldHJpY3NEYXRhLnBhZ2VMb2FkVGltZSB8fCAnMG1zJyksXG4gICAgICAgIH0sXG4gICAgICBdXG4gICAgOiBbXTtcblxuICByZXR1cm4gKFxuICAgIDxDYXJkPlxuICAgICAgPENhcmRDb250ZW50IGNsYXNzTmFtZT0ncC02Jz5cbiAgICAgICAgPGgzIGNsYXNzTmFtZT0ndGV4dC1sZyBmb250LXNlbWlib2xkIHRleHQtZ3JheS05MDAgbWItNCBmbGV4IGl0ZW1zLWNlbnRlcic+XG4gICAgICAgICAgPFRyZW5kaW5nVXAgY2xhc3NOYW1lPSd0ZXh0LWtvdmVvLW5hdnkgbXItMycgc2l6ZT17MjB9IC8+XG4gICAgICAgICAge3QoJ3F1YWxpdHlNZXRyaWNzJyl9XG4gICAgICAgIDwvaDM+XG5cbiAgICAgICAgPGRpdiBjbGFzc05hbWU9J2dyaWQgZ3JpZC1jb2xzLTIgbGc6Z3JpZC1jb2xzLTUgeGw6Z3JpZC1jb2xzLTEwIGdhcC00Jz5cbiAgICAgICAgICB7aXNMb2FkaW5nXG4gICAgICAgICAgICA/IC8vIExvYWRpbmcgc2tlbGV0b25cbiAgICAgICAgICAgICAgQXJyYXkuZnJvbSh7IGxlbmd0aDogMTAgfSkubWFwKChfLCBfaW5kZXgpID0+IChcbiAgICAgICAgICAgICAgICA8ZGl2IGtleT17YHNrZWxldG9uLSR7X2luZGV4fWB9IGNsYXNzTmFtZT0ndGV4dC1jZW50ZXIgcC00IGJnLWdyYXktNTAgcm91bmRlZC1sZyc+XG4gICAgICAgICAgICAgICAgICA8U2tlbGV0b24gY2xhc3NOYW1lPSdoLTggdy0xNiBteC1hdXRvIG1iLTInIC8+XG4gICAgICAgICAgICAgICAgICA8U2tlbGV0b24gY2xhc3NOYW1lPSdoLTQgdy0yMCBteC1hdXRvJyAvPlxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICApKVxuICAgICAgICAgICAgOiBtZXRyaWNzLm1hcCgobWV0cmljKSA9PiAoXG4gICAgICAgICAgICAgICAgPGRpdiBrZXk9e21ldHJpYy5sYWJlbH0gY2xhc3NOYW1lPXtgdGV4dC1jZW50ZXIgcC00ICR7bWV0cmljLmJnfSByb3VuZGVkLWxnYH0+XG4gICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT17YHRleHQtMnhsIGZvbnQtYm9sZCAke21ldHJpYy50ZXh0fWB9PnttZXRyaWMuX3ZhbHVlfTwvZGl2PlxuICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9J3RleHQtc20gdGV4dC1ncmF5LTYwMCc+e21ldHJpYy5sYWJlbH08L2Rpdj5cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgKSl9XG4gICAgICAgIDwvZGl2PlxuICAgICAgPC9DYXJkQ29udGVudD5cbiAgICA8L0NhcmQ+XG4gICk7XG59XG4iXSwidmVyc2lvbiI6M30=