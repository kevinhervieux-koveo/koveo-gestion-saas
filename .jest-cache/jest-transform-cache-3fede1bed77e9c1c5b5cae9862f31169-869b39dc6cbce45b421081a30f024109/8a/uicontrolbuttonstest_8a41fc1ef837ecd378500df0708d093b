e6f4728639a6b4c78ae01754b43972c1
"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
const jsx_runtime_1 = require("react/jsx-runtime");
/**
 * UI Control Button Functionality Tests
 * Tests all UI control buttons (pagination, calendar navigation, filters, etc.)
 */
const react_1 = __importDefault(require("react"));
const react_2 = require("@testing-library/react");
const react_query_1 = require("@tanstack/react-query");
require("@testing-library/jest-dom");
const user_event_1 = __importDefault(require("@testing-library/user-event"));
describe('UI Control Buttons Functionality', () => {
    let queryClient;
    let user;
    beforeEach(() => {
        queryClient = new react_query_1.QueryClient({
            defaultOptions: {
                queries: { retry: false },
                mutations: { retry: false },
            },
        });
        user = user_event_1.default.setup();
        jest.clearAllMocks();
    });
    const renderWithProvider = (component) => {
        return (0, react_2.render)((0, jsx_runtime_1.jsx)(react_query_1.QueryClientProvider, { client: queryClient, children: component }));
    };
    describe('Pagination Control Buttons', () => {
        it('should handle pagination navigation', async () => {
            const mockSetPage = jest.fn();
            const currentPage = 2;
            const totalPages = 5;
            const MockPagination = () => ((0, jsx_runtime_1.jsxs)("div", { children: [(0, jsx_runtime_1.jsx)("button", { "data-testid": "button-previous-page", onClick: () => mockSetPage(currentPage - 1), disabled: currentPage <= 1, children: "Previous" }), [1, 2, 3, 4, 5].map(pageNum => ((0, jsx_runtime_1.jsx)("button", { "data-testid": `button-page-${pageNum}`, onClick: () => mockSetPage(pageNum), className: pageNum === currentPage ? 'active' : '', children: pageNum }, pageNum))), (0, jsx_runtime_1.jsx)("button", { "data-testid": "button-next-page", onClick: () => mockSetPage(currentPage + 1), disabled: currentPage >= totalPages, children: "Next" })] }));
            renderWithProvider((0, jsx_runtime_1.jsx)(MockPagination, {}));
            const prevButton = react_2.screen.getByTestId('button-previous-page');
            const nextButton = react_2.screen.getByTestId('button-next-page');
            const page3Button = react_2.screen.getByTestId('button-page-3');
            expect(prevButton).toBeInTheDocument();
            expect(nextButton).toBeInTheDocument();
            expect(page3Button).toBeInTheDocument();
            await user.click(prevButton);
            expect(mockSetPage).toHaveBeenCalledWith(1);
            await user.click(nextButton);
            expect(mockSetPage).toHaveBeenCalledWith(3);
            await user.click(page3Button);
            expect(mockSetPage).toHaveBeenCalledWith(3);
        });
    });
    describe('Calendar Navigation Buttons', () => {
        it('should handle month navigation in calendar', async () => {
            const mockGoToPrevMonth = jest.fn();
            const mockGoToNextMonth = jest.fn();
            const MockCalendarNav = () => ((0, jsx_runtime_1.jsxs)("div", { children: [(0, jsx_runtime_1.jsx)("button", { "data-testid": "prev-month", onClick: mockGoToPrevMonth, children: "Previous Month" }), (0, jsx_runtime_1.jsx)("button", { "data-testid": "next-month", onClick: mockGoToNextMonth, children: "Next Month" })] }));
            renderWithProvider((0, jsx_runtime_1.jsx)(MockCalendarNav, {}));
            const prevMonthButton = react_2.screen.getByTestId('prev-month');
            const nextMonthButton = react_2.screen.getByTestId('next-month');
            expect(prevMonthButton).toBeInTheDocument();
            expect(nextMonthButton).toBeInTheDocument();
            await user.click(prevMonthButton);
            expect(mockGoToPrevMonth).toHaveBeenCalled();
            await user.click(nextMonthButton);
            expect(mockGoToNextMonth).toHaveBeenCalled();
        });
    });
    describe('Calendar Feature Buttons', () => {
        it('should handle calendar linking and export functionality', async () => {
            const mockLinkCalendar = jest.fn();
            const mockExportCalendar = jest.fn();
            const mockCancelLink = jest.fn();
            const mockNextStep = jest.fn();
            const MockCalendarFeatures = () => {
                const [isLinking, setIsLinking] = react_1.default.useState(false);
                return ((0, jsx_runtime_1.jsxs)("div", { children: [(0, jsx_runtime_1.jsx)("button", { "data-testid": "button-link-calendar", onClick: () => {
                                mockLinkCalendar();
                                setIsLinking(true);
                            }, children: "Link Calendar" }), (0, jsx_runtime_1.jsx)("button", { "data-testid": "button-export-calendar", onClick: mockExportCalendar, children: "Export Calendar" }), isLinking && ((0, jsx_runtime_1.jsxs)("div", { children: [(0, jsx_runtime_1.jsx)("button", { "data-testid": "button-cancel-link", onClick: () => {
                                        mockCancelLink();
                                        setIsLinking(false);
                                    }, children: "Cancel Link" }), (0, jsx_runtime_1.jsx)("button", { "data-testid": "button-next-step", onClick: mockNextStep, children: "Next Step" }), (0, jsx_runtime_1.jsx)("button", { "data-testid": "button-back-step", onClick: () => console.log('Back step'), children: "Back Step" }), (0, jsx_runtime_1.jsx)("button", { "data-testid": "button-cancel-provider", onClick: () => setIsLinking(false), children: "Cancel Provider" }), (0, jsx_runtime_1.jsx)("button", { "data-testid": "button-confirm-final-link", onClick: () => {
                                        console.log('Confirming link');
                                        setIsLinking(false);
                                    }, children: "Confirm Link" })] }))] }));
            };
            renderWithProvider((0, jsx_runtime_1.jsx)(MockCalendarFeatures, {}));
            const linkButton = react_2.screen.getByTestId('button-link-calendar');
            const exportButton = react_2.screen.getByTestId('button-export-calendar');
            expect(linkButton).toBeInTheDocument();
            expect(exportButton).toBeInTheDocument();
            await user.click(exportButton);
            expect(mockExportCalendar).toHaveBeenCalled();
            await user.click(linkButton);
            expect(mockLinkCalendar).toHaveBeenCalled();
            await (0, react_2.waitFor)(() => {
                const cancelButton = react_2.screen.getByTestId('button-cancel-link');
                const nextButton = react_2.screen.getByTestId('button-next-step');
                expect(cancelButton).toBeInTheDocument();
                expect(nextButton).toBeInTheDocument();
            });
            const nextButton = react_2.screen.getByTestId('button-next-step');
            await user.click(nextButton);
            expect(mockNextStep).toHaveBeenCalled();
        });
    });
    describe('Filter and Reset Buttons', () => {
        it('should handle filter reset functionality', async () => {
            const mockResetUserFilters = jest.fn();
            const mockResetPermissionFilters = jest.fn();
            const MockFilterControls = () => ((0, jsx_runtime_1.jsxs)("div", { children: [(0, jsx_runtime_1.jsx)("button", { "data-testid": "button-reset-user-filters", onClick: mockResetUserFilters, children: "Reset User Filters" }), (0, jsx_runtime_1.jsx)("button", { "data-testid": "button-reset-permission-filters", onClick: mockResetPermissionFilters, children: "Reset Permission Filters" })] }));
            renderWithProvider((0, jsx_runtime_1.jsx)(MockFilterControls, {}));
            const resetUserButton = react_2.screen.getByTestId('button-reset-user-filters');
            const resetPermissionButton = react_2.screen.getByTestId('button-reset-permission-filters');
            expect(resetUserButton).toBeInTheDocument();
            expect(resetPermissionButton).toBeInTheDocument();
            await user.click(resetUserButton);
            expect(mockResetUserFilters).toHaveBeenCalled();
            await user.click(resetPermissionButton);
            expect(mockResetPermissionFilters).toHaveBeenCalled();
        });
    });
    describe('Show/Hide Toggle Buttons', () => {
        it('should handle show all and hide all functionality', async () => {
            const mockShowAll = jest.fn();
            const mockHideAll = jest.fn();
            const MockToggleButtons = () => ((0, jsx_runtime_1.jsxs)("div", { children: [(0, jsx_runtime_1.jsx)("button", { "data-testid": "button-show-all", onClick: mockShowAll, children: "Show All" }), (0, jsx_runtime_1.jsx)("button", { "data-testid": "button-hide-all", onClick: mockHideAll, children: "Hide All" }), (0, jsx_runtime_1.jsx)("button", { "data-testid": "button-show-all-bottom", onClick: mockShowAll, children: "Show All Bottom" })] }));
            renderWithProvider((0, jsx_runtime_1.jsx)(MockToggleButtons, {}));
            const showAllButton = react_2.screen.getByTestId('button-show-all');
            const hideAllButton = react_2.screen.getByTestId('button-hide-all');
            const showAllBottomButton = react_2.screen.getByTestId('button-show-all-bottom');
            expect(showAllButton).toBeInTheDocument();
            expect(hideAllButton).toBeInTheDocument();
            expect(showAllBottomButton).toBeInTheDocument();
            await user.click(showAllButton);
            expect(mockShowAll).toHaveBeenCalled();
            await user.click(hideAllButton);
            expect(mockHideAll).toHaveBeenCalled();
            await user.click(showAllBottomButton);
            expect(mockShowAll).toHaveBeenCalledTimes(2);
        });
    });
    describe('Fullscreen Toggle Buttons', () => {
        it('should handle fullscreen toggle functionality', async () => {
            const mockToggleFullscreen = jest.fn();
            const MockFullscreenToggle = () => ((0, jsx_runtime_1.jsx)("button", { "data-testid": "button-fullscreen-toggle", onClick: mockToggleFullscreen, children: "Toggle Fullscreen" }));
            renderWithProvider((0, jsx_runtime_1.jsx)(MockFullscreenToggle, {}));
            const fullscreenButton = react_2.screen.getByTestId('button-fullscreen-toggle');
            expect(fullscreenButton).toBeInTheDocument();
            await user.click(fullscreenButton);
            expect(mockToggleFullscreen).toHaveBeenCalled();
        });
    });
    describe('Menu Control Buttons', () => {
        it('should handle hamburger menu functionality', async () => {
            const MockHamburgerMenu = () => {
                const [isOpen, setIsOpen] = react_1.default.useState(false);
                return ((0, jsx_runtime_1.jsxs)("div", { children: [(0, jsx_runtime_1.jsx)("button", { "data-testid": "hamburger-button", onClick: () => setIsOpen(!isOpen), children: "Menu" }), isOpen && ((0, jsx_runtime_1.jsx)("button", { "data-testid": "menu-close-button", onClick: () => setIsOpen(false), children: "Close Menu" }))] }));
            };
            renderWithProvider((0, jsx_runtime_1.jsx)(MockHamburgerMenu, {}));
            const hamburgerButton = react_2.screen.getByTestId('hamburger-button');
            expect(hamburgerButton).toBeInTheDocument();
            await user.click(hamburgerButton);
            await (0, react_2.waitFor)(() => {
                const closeButton = react_2.screen.getByTestId('menu-close-button');
                expect(closeButton).toBeInTheDocument();
            });
            const closeButton = react_2.screen.getByTestId('menu-close-button');
            await user.click(closeButton);
            await (0, react_2.waitFor)(() => {
                expect(react_2.screen.queryByTestId('menu-close-button')).not.toBeInTheDocument();
            });
        });
    });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiL2hvbWUvcnVubmVyL3dvcmtzcGFjZS90ZXN0cy91bml0L2J1dHRvbi1mdW5jdGlvbmFsaXR5L3VpLWNvbnRyb2wtYnV0dG9ucy50ZXN0LnRzeCIsIm1hcHBpbmdzIjoiOzs7Ozs7QUFBQTs7O0dBR0c7QUFFSCxrREFBMEI7QUFDMUIsa0RBQTRFO0FBQzVFLHVEQUF5RTtBQUN6RSxxQ0FBbUM7QUFDbkMsNkVBQW9EO0FBRXBELFFBQVEsQ0FBQyxrQ0FBa0MsRUFBRSxHQUFHLEVBQUU7SUFDaEQsSUFBSSxXQUF3QixDQUFDO0lBQzdCLElBQUksSUFBUyxDQUFDO0lBRWQsVUFBVSxDQUFDLEdBQUcsRUFBRTtRQUNkLFdBQVcsR0FBRyxJQUFJLHlCQUFXLENBQUM7WUFDNUIsY0FBYyxFQUFFO2dCQUNkLE9BQU8sRUFBRSxFQUFFLEtBQUssRUFBRSxLQUFLLEVBQUU7Z0JBQ3pCLFNBQVMsRUFBRSxFQUFFLEtBQUssRUFBRSxLQUFLLEVBQUU7YUFDNUI7U0FDRixDQUFDLENBQUM7UUFDSCxJQUFJLEdBQUcsb0JBQVMsQ0FBQyxLQUFLLEVBQUUsQ0FBQztRQUN6QixJQUFJLENBQUMsYUFBYSxFQUFFLENBQUM7SUFDdkIsQ0FBQyxDQUFDLENBQUM7SUFFSCxNQUFNLGtCQUFrQixHQUFHLENBQUMsU0FBNkIsRUFBRSxFQUFFO1FBQzNELE9BQU8sSUFBQSxjQUFNLEVBQ1gsdUJBQUMsaUNBQW1CLElBQUMsTUFBTSxFQUFFLFdBQVcsWUFDckMsU0FBUyxHQUNVLENBQ3ZCLENBQUM7SUFDSixDQUFDLENBQUM7SUFFRixRQUFRLENBQUMsNEJBQTRCLEVBQUUsR0FBRyxFQUFFO1FBQzFDLEVBQUUsQ0FBQyxxQ0FBcUMsRUFBRSxLQUFLLElBQUksRUFBRTtZQUNuRCxNQUFNLFdBQVcsR0FBRyxJQUFJLENBQUMsRUFBRSxFQUFFLENBQUM7WUFDOUIsTUFBTSxXQUFXLEdBQUcsQ0FBQyxDQUFDO1lBQ3RCLE1BQU0sVUFBVSxHQUFHLENBQUMsQ0FBQztZQUVyQixNQUFNLGNBQWMsR0FBRyxHQUFHLEVBQUUsQ0FBQyxDQUMzQiw0Q0FDRSxrREFDYyxzQkFBc0IsRUFDbEMsT0FBTyxFQUFFLEdBQUcsRUFBRSxDQUFDLFdBQVcsQ0FBQyxXQUFXLEdBQUcsQ0FBQyxDQUFDLEVBQzNDLFFBQVEsRUFBRSxXQUFXLElBQUksQ0FBQyx5QkFHbkIsRUFFUixDQUFDLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsT0FBTyxDQUFDLEVBQUUsQ0FBQyxDQUM5QixrREFFZSxlQUFlLE9BQU8sRUFBRSxFQUNyQyxPQUFPLEVBQUUsR0FBRyxFQUFFLENBQUMsV0FBVyxDQUFDLE9BQU8sQ0FBQyxFQUNuQyxTQUFTLEVBQUUsT0FBTyxLQUFLLFdBQVcsQ0FBQyxDQUFDLENBQUMsUUFBUSxDQUFDLENBQUMsQ0FBQyxFQUFFLFlBRWpELE9BQU8sSUFMSCxPQUFPLENBTUwsQ0FDVixDQUFDLEVBRUYsa0RBQ2Msa0JBQWtCLEVBQzlCLE9BQU8sRUFBRSxHQUFHLEVBQUUsQ0FBQyxXQUFXLENBQUMsV0FBVyxHQUFHLENBQUMsQ0FBQyxFQUMzQyxRQUFRLEVBQUUsV0FBVyxJQUFJLFVBQVUscUJBRzVCLElBQ0wsQ0FDUCxDQUFDO1lBRUYsa0JBQWtCLENBQUMsdUJBQUMsY0FBYyxLQUFHLENBQUMsQ0FBQztZQUV2QyxNQUFNLFVBQVUsR0FBRyxjQUFNLENBQUMsV0FBVyxDQUFDLHNCQUFzQixDQUFDLENBQUM7WUFDOUQsTUFBTSxVQUFVLEdBQUcsY0FBTSxDQUFDLFdBQVcsQ0FBQyxrQkFBa0IsQ0FBQyxDQUFDO1lBQzFELE1BQU0sV0FBVyxHQUFHLGNBQU0sQ0FBQyxXQUFXLENBQUMsZUFBZSxDQUFDLENBQUM7WUFFeEQsTUFBTSxDQUFDLFVBQVUsQ0FBQyxDQUFDLGlCQUFpQixFQUFFLENBQUM7WUFDdkMsTUFBTSxDQUFDLFVBQVUsQ0FBQyxDQUFDLGlCQUFpQixFQUFFLENBQUM7WUFDdkMsTUFBTSxDQUFDLFdBQVcsQ0FBQyxDQUFDLGlCQUFpQixFQUFFLENBQUM7WUFFeEMsTUFBTSxJQUFJLENBQUMsS0FBSyxDQUFDLFVBQVUsQ0FBQyxDQUFDO1lBQzdCLE1BQU0sQ0FBQyxXQUFXLENBQUMsQ0FBQyxvQkFBb0IsQ0FBQyxDQUFDLENBQUMsQ0FBQztZQUU1QyxNQUFNLElBQUksQ0FBQyxLQUFLLENBQUMsVUFBVSxDQUFDLENBQUM7WUFDN0IsTUFBTSxDQUFDLFdBQVcsQ0FBQyxDQUFDLG9CQUFvQixDQUFDLENBQUMsQ0FBQyxDQUFDO1lBRTVDLE1BQU0sSUFBSSxDQUFDLEtBQUssQ0FBQyxXQUFXLENBQUMsQ0FBQztZQUM5QixNQUFNLENBQUMsV0FBVyxDQUFDLENBQUMsb0JBQW9CLENBQUMsQ0FBQyxDQUFDLENBQUM7UUFDOUMsQ0FBQyxDQUFDLENBQUM7SUFDTCxDQUFDLENBQUMsQ0FBQztJQUVILFFBQVEsQ0FBQyw2QkFBNkIsRUFBRSxHQUFHLEVBQUU7UUFDM0MsRUFBRSxDQUFDLDRDQUE0QyxFQUFFLEtBQUssSUFBSSxFQUFFO1lBQzFELE1BQU0saUJBQWlCLEdBQUcsSUFBSSxDQUFDLEVBQUUsRUFBRSxDQUFDO1lBQ3BDLE1BQU0saUJBQWlCLEdBQUcsSUFBSSxDQUFDLEVBQUUsRUFBRSxDQUFDO1lBRXBDLE1BQU0sZUFBZSxHQUFHLEdBQUcsRUFBRSxDQUFDLENBQzVCLDRDQUNFLGtEQUNjLFlBQVksRUFDeEIsT0FBTyxFQUFFLGlCQUFpQiwrQkFHbkIsRUFDVCxrREFDYyxZQUFZLEVBQ3hCLE9BQU8sRUFBRSxpQkFBaUIsMkJBR25CLElBQ0wsQ0FDUCxDQUFDO1lBRUYsa0JBQWtCLENBQUMsdUJBQUMsZUFBZSxLQUFHLENBQUMsQ0FBQztZQUV4QyxNQUFNLGVBQWUsR0FBRyxjQUFNLENBQUMsV0FBVyxDQUFDLFlBQVksQ0FBQyxDQUFDO1lBQ3pELE1BQU0sZUFBZSxHQUFHLGNBQU0sQ0FBQyxXQUFXLENBQUMsWUFBWSxDQUFDLENBQUM7WUFFekQsTUFBTSxDQUFDLGVBQWUsQ0FBQyxDQUFDLGlCQUFpQixFQUFFLENBQUM7WUFDNUMsTUFBTSxDQUFDLGVBQWUsQ0FBQyxDQUFDLGlCQUFpQixFQUFFLENBQUM7WUFFNUMsTUFBTSxJQUFJLENBQUMsS0FBSyxDQUFDLGVBQWUsQ0FBQyxDQUFDO1lBQ2xDLE1BQU0sQ0FBQyxpQkFBaUIsQ0FBQyxDQUFDLGdCQUFnQixFQUFFLENBQUM7WUFFN0MsTUFBTSxJQUFJLENBQUMsS0FBSyxDQUFDLGVBQWUsQ0FBQyxDQUFDO1lBQ2xDLE1BQU0sQ0FBQyxpQkFBaUIsQ0FBQyxDQUFDLGdCQUFnQixFQUFFLENBQUM7UUFDL0MsQ0FBQyxDQUFDLENBQUM7SUFDTCxDQUFDLENBQUMsQ0FBQztJQUVILFFBQVEsQ0FBQywwQkFBMEIsRUFBRSxHQUFHLEVBQUU7UUFDeEMsRUFBRSxDQUFDLHlEQUF5RCxFQUFFLEtBQUssSUFBSSxFQUFFO1lBQ3ZFLE1BQU0sZ0JBQWdCLEdBQUcsSUFBSSxDQUFDLEVBQUUsRUFBRSxDQUFDO1lBQ25DLE1BQU0sa0JBQWtCLEdBQUcsSUFBSSxDQUFDLEVBQUUsRUFBRSxDQUFDO1lBQ3JDLE1BQU0sY0FBYyxHQUFHLElBQUksQ0FBQyxFQUFFLEVBQUUsQ0FBQztZQUNqQyxNQUFNLFlBQVksR0FBRyxJQUFJLENBQUMsRUFBRSxFQUFFLENBQUM7WUFFL0IsTUFBTSxvQkFBb0IsR0FBRyxHQUFHLEVBQUU7Z0JBQ2hDLE1BQU0sQ0FBQyxTQUFTLEVBQUUsWUFBWSxDQUFDLEdBQUcsZUFBSyxDQUFDLFFBQVEsQ0FBQyxLQUFLLENBQUMsQ0FBQztnQkFFeEQsT0FBTyxDQUNMLDRDQUNFLGtEQUNjLHNCQUFzQixFQUNsQyxPQUFPLEVBQUUsR0FBRyxFQUFFO2dDQUNaLGdCQUFnQixFQUFFLENBQUM7Z0NBQ25CLFlBQVksQ0FBQyxJQUFJLENBQUMsQ0FBQzs0QkFDckIsQ0FBQyw4QkFHTSxFQUVULGtEQUNjLHdCQUF3QixFQUNwQyxPQUFPLEVBQUUsa0JBQWtCLGdDQUdwQixFQUVSLFNBQVMsSUFBSSxDQUNaLDRDQUNFLGtEQUNjLG9CQUFvQixFQUNoQyxPQUFPLEVBQUUsR0FBRyxFQUFFO3dDQUNaLGNBQWMsRUFBRSxDQUFDO3dDQUNqQixZQUFZLENBQUMsS0FBSyxDQUFDLENBQUM7b0NBQ3RCLENBQUMsNEJBR00sRUFDVCxrREFDYyxrQkFBa0IsRUFDOUIsT0FBTyxFQUFFLFlBQVksMEJBR2QsRUFDVCxrREFDYyxrQkFBa0IsRUFDOUIsT0FBTyxFQUFFLEdBQUcsRUFBRSxDQUFDLE9BQU8sQ0FBQyxHQUFHLENBQUMsV0FBVyxDQUFDLDBCQUdoQyxFQUNULGtEQUNjLHdCQUF3QixFQUNwQyxPQUFPLEVBQUUsR0FBRyxFQUFFLENBQUMsWUFBWSxDQUFDLEtBQUssQ0FBQyxnQ0FHM0IsRUFDVCxrREFDYywyQkFBMkIsRUFDdkMsT0FBTyxFQUFFLEdBQUcsRUFBRTt3Q0FDWixPQUFPLENBQUMsR0FBRyxDQUFDLGlCQUFpQixDQUFDLENBQUM7d0NBQy9CLFlBQVksQ0FBQyxLQUFLLENBQUMsQ0FBQztvQ0FDdEIsQ0FBQyw2QkFHTSxJQUNMLENBQ1AsSUFDRyxDQUNQLENBQUM7WUFDSixDQUFDLENBQUM7WUFFRixrQkFBa0IsQ0FBQyx1QkFBQyxvQkFBb0IsS0FBRyxDQUFDLENBQUM7WUFFN0MsTUFBTSxVQUFVLEdBQUcsY0FBTSxDQUFDLFdBQVcsQ0FBQyxzQkFBc0IsQ0FBQyxDQUFDO1lBQzlELE1BQU0sWUFBWSxHQUFHLGNBQU0sQ0FBQyxXQUFXLENBQUMsd0JBQXdCLENBQUMsQ0FBQztZQUVsRSxNQUFNLENBQUMsVUFBVSxDQUFDLENBQUMsaUJBQWlCLEVBQUUsQ0FBQztZQUN2QyxNQUFNLENBQUMsWUFBWSxDQUFDLENBQUMsaUJBQWlCLEVBQUUsQ0FBQztZQUV6QyxNQUFNLElBQUksQ0FBQyxLQUFLLENBQUMsWUFBWSxDQUFDLENBQUM7WUFDL0IsTUFBTSxDQUFDLGtCQUFrQixDQUFDLENBQUMsZ0JBQWdCLEVBQUUsQ0FBQztZQUU5QyxNQUFNLElBQUksQ0FBQyxLQUFLLENBQUMsVUFBVSxDQUFDLENBQUM7WUFDN0IsTUFBTSxDQUFDLGdCQUFnQixDQUFDLENBQUMsZ0JBQWdCLEVBQUUsQ0FBQztZQUU1QyxNQUFNLElBQUEsZUFBTyxFQUFDLEdBQUcsRUFBRTtnQkFDakIsTUFBTSxZQUFZLEdBQUcsY0FBTSxDQUFDLFdBQVcsQ0FBQyxvQkFBb0IsQ0FBQyxDQUFDO2dCQUM5RCxNQUFNLFVBQVUsR0FBRyxjQUFNLENBQUMsV0FBVyxDQUFDLGtCQUFrQixDQUFDLENBQUM7Z0JBRTFELE1BQU0sQ0FBQyxZQUFZLENBQUMsQ0FBQyxpQkFBaUIsRUFBRSxDQUFDO2dCQUN6QyxNQUFNLENBQUMsVUFBVSxDQUFDLENBQUMsaUJBQWlCLEVBQUUsQ0FBQztZQUN6QyxDQUFDLENBQUMsQ0FBQztZQUVILE1BQU0sVUFBVSxHQUFHLGNBQU0sQ0FBQyxXQUFXLENBQUMsa0JBQWtCLENBQUMsQ0FBQztZQUMxRCxNQUFNLElBQUksQ0FBQyxLQUFLLENBQUMsVUFBVSxDQUFDLENBQUM7WUFDN0IsTUFBTSxDQUFDLFlBQVksQ0FBQyxDQUFDLGdCQUFnQixFQUFFLENBQUM7UUFDMUMsQ0FBQyxDQUFDLENBQUM7SUFDTCxDQUFDLENBQUMsQ0FBQztJQUVILFFBQVEsQ0FBQywwQkFBMEIsRUFBRSxHQUFHLEVBQUU7UUFDeEMsRUFBRSxDQUFDLDBDQUEwQyxFQUFFLEtBQUssSUFBSSxFQUFFO1lBQ3hELE1BQU0sb0JBQW9CLEdBQUcsSUFBSSxDQUFDLEVBQUUsRUFBRSxDQUFDO1lBQ3ZDLE1BQU0sMEJBQTBCLEdBQUcsSUFBSSxDQUFDLEVBQUUsRUFBRSxDQUFDO1lBRTdDLE1BQU0sa0JBQWtCLEdBQUcsR0FBRyxFQUFFLENBQUMsQ0FDL0IsNENBQ0Usa0RBQ2MsMkJBQTJCLEVBQ3ZDLE9BQU8sRUFBRSxvQkFBb0IsbUNBR3RCLEVBQ1Qsa0RBQ2MsaUNBQWlDLEVBQzdDLE9BQU8sRUFBRSwwQkFBMEIseUNBRzVCLElBQ0wsQ0FDUCxDQUFDO1lBRUYsa0JBQWtCLENBQUMsdUJBQUMsa0JBQWtCLEtBQUcsQ0FBQyxDQUFDO1lBRTNDLE1BQU0sZUFBZSxHQUFHLGNBQU0sQ0FBQyxXQUFXLENBQUMsMkJBQTJCLENBQUMsQ0FBQztZQUN4RSxNQUFNLHFCQUFxQixHQUFHLGNBQU0sQ0FBQyxXQUFXLENBQUMsaUNBQWlDLENBQUMsQ0FBQztZQUVwRixNQUFNLENBQUMsZUFBZSxDQUFDLENBQUMsaUJBQWlCLEVBQUUsQ0FBQztZQUM1QyxNQUFNLENBQUMscUJBQXFCLENBQUMsQ0FBQyxpQkFBaUIsRUFBRSxDQUFDO1lBRWxELE1BQU0sSUFBSSxDQUFDLEtBQUssQ0FBQyxlQUFlLENBQUMsQ0FBQztZQUNsQyxNQUFNLENBQUMsb0JBQW9CLENBQUMsQ0FBQyxnQkFBZ0IsRUFBRSxDQUFDO1lBRWhELE1BQU0sSUFBSSxDQUFDLEtBQUssQ0FBQyxxQkFBcUIsQ0FBQyxDQUFDO1lBQ3hDLE1BQU0sQ0FBQywwQkFBMEIsQ0FBQyxDQUFDLGdCQUFnQixFQUFFLENBQUM7UUFDeEQsQ0FBQyxDQUFDLENBQUM7SUFDTCxDQUFDLENBQUMsQ0FBQztJQUVILFFBQVEsQ0FBQywwQkFBMEIsRUFBRSxHQUFHLEVBQUU7UUFDeEMsRUFBRSxDQUFDLG1EQUFtRCxFQUFFLEtBQUssSUFBSSxFQUFFO1lBQ2pFLE1BQU0sV0FBVyxHQUFHLElBQUksQ0FBQyxFQUFFLEVBQUUsQ0FBQztZQUM5QixNQUFNLFdBQVcsR0FBRyxJQUFJLENBQUMsRUFBRSxFQUFFLENBQUM7WUFFOUIsTUFBTSxpQkFBaUIsR0FBRyxHQUFHLEVBQUUsQ0FBQyxDQUM5Qiw0Q0FDRSxrREFDYyxpQkFBaUIsRUFDN0IsT0FBTyxFQUFFLFdBQVcseUJBR2IsRUFDVCxrREFDYyxpQkFBaUIsRUFDN0IsT0FBTyxFQUFFLFdBQVcseUJBR2IsRUFDVCxrREFDYyx3QkFBd0IsRUFDcEMsT0FBTyxFQUFFLFdBQVcsZ0NBR2IsSUFDTCxDQUNQLENBQUM7WUFFRixrQkFBa0IsQ0FBQyx1QkFBQyxpQkFBaUIsS0FBRyxDQUFDLENBQUM7WUFFMUMsTUFBTSxhQUFhLEdBQUcsY0FBTSxDQUFDLFdBQVcsQ0FBQyxpQkFBaUIsQ0FBQyxDQUFDO1lBQzVELE1BQU0sYUFBYSxHQUFHLGNBQU0sQ0FBQyxXQUFXLENBQUMsaUJBQWlCLENBQUMsQ0FBQztZQUM1RCxNQUFNLG1CQUFtQixHQUFHLGNBQU0sQ0FBQyxXQUFXLENBQUMsd0JBQXdCLENBQUMsQ0FBQztZQUV6RSxNQUFNLENBQUMsYUFBYSxDQUFDLENBQUMsaUJBQWlCLEVBQUUsQ0FBQztZQUMxQyxNQUFNLENBQUMsYUFBYSxDQUFDLENBQUMsaUJBQWlCLEVBQUUsQ0FBQztZQUMxQyxNQUFNLENBQUMsbUJBQW1CLENBQUMsQ0FBQyxpQkFBaUIsRUFBRSxDQUFDO1lBRWhELE1BQU0sSUFBSSxDQUFDLEtBQUssQ0FBQyxhQUFhLENBQUMsQ0FBQztZQUNoQyxNQUFNLENBQUMsV0FBVyxDQUFDLENBQUMsZ0JBQWdCLEVBQUUsQ0FBQztZQUV2QyxNQUFNLElBQUksQ0FBQyxLQUFLLENBQUMsYUFBYSxDQUFDLENBQUM7WUFDaEMsTUFBTSxDQUFDLFdBQVcsQ0FBQyxDQUFDLGdCQUFnQixFQUFFLENBQUM7WUFFdkMsTUFBTSxJQUFJLENBQUMsS0FBSyxDQUFDLG1CQUFtQixDQUFDLENBQUM7WUFDdEMsTUFBTSxDQUFDLFdBQVcsQ0FBQyxDQUFDLHFCQUFxQixDQUFDLENBQUMsQ0FBQyxDQUFDO1FBQy9DLENBQUMsQ0FBQyxDQUFDO0lBQ0wsQ0FBQyxDQUFDLENBQUM7SUFFSCxRQUFRLENBQUMsMkJBQTJCLEVBQUUsR0FBRyxFQUFFO1FBQ3pDLEVBQUUsQ0FBQywrQ0FBK0MsRUFBRSxLQUFLLElBQUksRUFBRTtZQUM3RCxNQUFNLG9CQUFvQixHQUFHLElBQUksQ0FBQyxFQUFFLEVBQUUsQ0FBQztZQUV2QyxNQUFNLG9CQUFvQixHQUFHLEdBQUcsRUFBRSxDQUFDLENBQ2pDLGtEQUNjLDBCQUEwQixFQUN0QyxPQUFPLEVBQUUsb0JBQW9CLGtDQUd0QixDQUNWLENBQUM7WUFFRixrQkFBa0IsQ0FBQyx1QkFBQyxvQkFBb0IsS0FBRyxDQUFDLENBQUM7WUFFN0MsTUFBTSxnQkFBZ0IsR0FBRyxjQUFNLENBQUMsV0FBVyxDQUFDLDBCQUEwQixDQUFDLENBQUM7WUFDeEUsTUFBTSxDQUFDLGdCQUFnQixDQUFDLENBQUMsaUJBQWlCLEVBQUUsQ0FBQztZQUU3QyxNQUFNLElBQUksQ0FBQyxLQUFLLENBQUMsZ0JBQWdCLENBQUMsQ0FBQztZQUNuQyxNQUFNLENBQUMsb0JBQW9CLENBQUMsQ0FBQyxnQkFBZ0IsRUFBRSxDQUFDO1FBQ2xELENBQUMsQ0FBQyxDQUFDO0lBQ0wsQ0FBQyxDQUFDLENBQUM7SUFFSCxRQUFRLENBQUMsc0JBQXNCLEVBQUUsR0FBRyxFQUFFO1FBQ3BDLEVBQUUsQ0FBQyw0Q0FBNEMsRUFBRSxLQUFLLElBQUksRUFBRTtZQUMxRCxNQUFNLGlCQUFpQixHQUFHLEdBQUcsRUFBRTtnQkFDN0IsTUFBTSxDQUFDLE1BQU0sRUFBRSxTQUFTLENBQUMsR0FBRyxlQUFLLENBQUMsUUFBUSxDQUFDLEtBQUssQ0FBQyxDQUFDO2dCQUVsRCxPQUFPLENBQ0wsNENBQ0Usa0RBQ2Msa0JBQWtCLEVBQzlCLE9BQU8sRUFBRSxHQUFHLEVBQUUsQ0FBQyxTQUFTLENBQUMsQ0FBQyxNQUFNLENBQUMscUJBRzFCLEVBRVIsTUFBTSxJQUFJLENBQ1Qsa0RBQ2MsbUJBQW1CLEVBQy9CLE9BQU8sRUFBRSxHQUFHLEVBQUUsQ0FBQyxTQUFTLENBQUMsS0FBSyxDQUFDLDJCQUd4QixDQUNWLElBQ0csQ0FDUCxDQUFDO1lBQ0osQ0FBQyxDQUFDO1lBRUYsa0JBQWtCLENBQUMsdUJBQUMsaUJBQWlCLEtBQUcsQ0FBQyxDQUFDO1lBRTFDLE1BQU0sZUFBZSxHQUFHLGNBQU0sQ0FBQyxXQUFXLENBQUMsa0JBQWtCLENBQUMsQ0FBQztZQUMvRCxNQUFNLENBQUMsZUFBZSxDQUFDLENBQUMsaUJBQWlCLEVBQUUsQ0FBQztZQUU1QyxNQUFNLElBQUksQ0FBQyxLQUFLLENBQUMsZUFBZSxDQUFDLENBQUM7WUFFbEMsTUFBTSxJQUFBLGVBQU8sRUFBQyxHQUFHLEVBQUU7Z0JBQ2pCLE1BQU0sV0FBVyxHQUFHLGNBQU0sQ0FBQyxXQUFXLENBQUMsbUJBQW1CLENBQUMsQ0FBQztnQkFDNUQsTUFBTSxDQUFDLFdBQVcsQ0FBQyxDQUFDLGlCQUFpQixFQUFFLENBQUM7WUFDMUMsQ0FBQyxDQUFDLENBQUM7WUFFSCxNQUFNLFdBQVcsR0FBRyxjQUFNLENBQUMsV0FBVyxDQUFDLG1CQUFtQixDQUFDLENBQUM7WUFDNUQsTUFBTSxJQUFJLENBQUMsS0FBSyxDQUFDLFdBQVcsQ0FBQyxDQUFDO1lBRTlCLE1BQU0sSUFBQSxlQUFPLEVBQUMsR0FBRyxFQUFFO2dCQUNqQixNQUFNLENBQUMsY0FBTSxDQUFDLGFBQWEsQ0FBQyxtQkFBbUIsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLGlCQUFpQixFQUFFLENBQUM7WUFDNUUsQ0FBQyxDQUFDLENBQUM7UUFDTCxDQUFDLENBQUMsQ0FBQztJQUNMLENBQUMsQ0FBQyxDQUFDO0FBQ0wsQ0FBQyxDQUFDLENBQUMiLCJuYW1lcyI6W10sInNvdXJjZXMiOlsiL2hvbWUvcnVubmVyL3dvcmtzcGFjZS90ZXN0cy91bml0L2J1dHRvbi1mdW5jdGlvbmFsaXR5L3VpLWNvbnRyb2wtYnV0dG9ucy50ZXN0LnRzeCJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIFVJIENvbnRyb2wgQnV0dG9uIEZ1bmN0aW9uYWxpdHkgVGVzdHNcbiAqIFRlc3RzIGFsbCBVSSBjb250cm9sIGJ1dHRvbnMgKHBhZ2luYXRpb24sIGNhbGVuZGFyIG5hdmlnYXRpb24sIGZpbHRlcnMsIGV0Yy4pXG4gKi9cblxuaW1wb3J0IFJlYWN0IGZyb20gJ3JlYWN0JztcbmltcG9ydCB7IHJlbmRlciwgc2NyZWVuLCBmaXJlRXZlbnQsIHdhaXRGb3IgfSBmcm9tICdAdGVzdGluZy1saWJyYXJ5L3JlYWN0JztcbmltcG9ydCB7IFF1ZXJ5Q2xpZW50LCBRdWVyeUNsaWVudFByb3ZpZGVyIH0gZnJvbSAnQHRhbnN0YWNrL3JlYWN0LXF1ZXJ5JztcbmltcG9ydCAnQHRlc3RpbmctbGlicmFyeS9qZXN0LWRvbSc7XG5pbXBvcnQgdXNlckV2ZW50IGZyb20gJ0B0ZXN0aW5nLWxpYnJhcnkvdXNlci1ldmVudCc7XG5cbmRlc2NyaWJlKCdVSSBDb250cm9sIEJ1dHRvbnMgRnVuY3Rpb25hbGl0eScsICgpID0+IHtcbiAgbGV0IHF1ZXJ5Q2xpZW50OiBRdWVyeUNsaWVudDtcbiAgbGV0IHVzZXI6IGFueTtcblxuICBiZWZvcmVFYWNoKCgpID0+IHtcbiAgICBxdWVyeUNsaWVudCA9IG5ldyBRdWVyeUNsaWVudCh7XG4gICAgICBkZWZhdWx0T3B0aW9uczoge1xuICAgICAgICBxdWVyaWVzOiB7IHJldHJ5OiBmYWxzZSB9LFxuICAgICAgICBtdXRhdGlvbnM6IHsgcmV0cnk6IGZhbHNlIH0sXG4gICAgICB9LFxuICAgIH0pO1xuICAgIHVzZXIgPSB1c2VyRXZlbnQuc2V0dXAoKTtcbiAgICBqZXN0LmNsZWFyQWxsTW9ja3MoKTtcbiAgfSk7XG5cbiAgY29uc3QgcmVuZGVyV2l0aFByb3ZpZGVyID0gKGNvbXBvbmVudDogUmVhY3QuUmVhY3RFbGVtZW50KSA9PiB7XG4gICAgcmV0dXJuIHJlbmRlcihcbiAgICAgIDxRdWVyeUNsaWVudFByb3ZpZGVyIGNsaWVudD17cXVlcnlDbGllbnR9PlxuICAgICAgICB7Y29tcG9uZW50fVxuICAgICAgPC9RdWVyeUNsaWVudFByb3ZpZGVyPlxuICAgICk7XG4gIH07XG5cbiAgZGVzY3JpYmUoJ1BhZ2luYXRpb24gQ29udHJvbCBCdXR0b25zJywgKCkgPT4ge1xuICAgIGl0KCdzaG91bGQgaGFuZGxlIHBhZ2luYXRpb24gbmF2aWdhdGlvbicsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IG1vY2tTZXRQYWdlID0gamVzdC5mbigpO1xuICAgICAgY29uc3QgY3VycmVudFBhZ2UgPSAyO1xuICAgICAgY29uc3QgdG90YWxQYWdlcyA9IDU7XG4gICAgICBcbiAgICAgIGNvbnN0IE1vY2tQYWdpbmF0aW9uID0gKCkgPT4gKFxuICAgICAgICA8ZGl2PlxuICAgICAgICAgIDxidXR0b24gXG4gICAgICAgICAgICBkYXRhLXRlc3RpZD1cImJ1dHRvbi1wcmV2aW91cy1wYWdlXCJcbiAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IG1vY2tTZXRQYWdlKGN1cnJlbnRQYWdlIC0gMSl9XG4gICAgICAgICAgICBkaXNhYmxlZD17Y3VycmVudFBhZ2UgPD0gMX1cbiAgICAgICAgICA+XG4gICAgICAgICAgICBQcmV2aW91c1xuICAgICAgICAgIDwvYnV0dG9uPlxuICAgICAgICAgIFxuICAgICAgICAgIHtbMSwgMiwgMywgNCwgNV0ubWFwKHBhZ2VOdW0gPT4gKFxuICAgICAgICAgICAgPGJ1dHRvbiBcbiAgICAgICAgICAgICAga2V5PXtwYWdlTnVtfVxuICAgICAgICAgICAgICBkYXRhLXRlc3RpZD17YGJ1dHRvbi1wYWdlLSR7cGFnZU51bX1gfVxuICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiBtb2NrU2V0UGFnZShwYWdlTnVtKX1cbiAgICAgICAgICAgICAgY2xhc3NOYW1lPXtwYWdlTnVtID09PSBjdXJyZW50UGFnZSA/ICdhY3RpdmUnIDogJyd9XG4gICAgICAgICAgICA+XG4gICAgICAgICAgICAgIHtwYWdlTnVtfVxuICAgICAgICAgICAgPC9idXR0b24+XG4gICAgICAgICAgKSl9XG4gICAgICAgICAgXG4gICAgICAgICAgPGJ1dHRvbiBcbiAgICAgICAgICAgIGRhdGEtdGVzdGlkPVwiYnV0dG9uLW5leHQtcGFnZVwiXG4gICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiBtb2NrU2V0UGFnZShjdXJyZW50UGFnZSArIDEpfVxuICAgICAgICAgICAgZGlzYWJsZWQ9e2N1cnJlbnRQYWdlID49IHRvdGFsUGFnZXN9XG4gICAgICAgICAgPlxuICAgICAgICAgICAgTmV4dFxuICAgICAgICAgIDwvYnV0dG9uPlxuICAgICAgICA8L2Rpdj5cbiAgICAgICk7XG5cbiAgICAgIHJlbmRlcldpdGhQcm92aWRlcig8TW9ja1BhZ2luYXRpb24gLz4pO1xuICAgICAgXG4gICAgICBjb25zdCBwcmV2QnV0dG9uID0gc2NyZWVuLmdldEJ5VGVzdElkKCdidXR0b24tcHJldmlvdXMtcGFnZScpO1xuICAgICAgY29uc3QgbmV4dEJ1dHRvbiA9IHNjcmVlbi5nZXRCeVRlc3RJZCgnYnV0dG9uLW5leHQtcGFnZScpO1xuICAgICAgY29uc3QgcGFnZTNCdXR0b24gPSBzY3JlZW4uZ2V0QnlUZXN0SWQoJ2J1dHRvbi1wYWdlLTMnKTtcbiAgICAgIFxuICAgICAgZXhwZWN0KHByZXZCdXR0b24pLnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgICBleHBlY3QobmV4dEJ1dHRvbikudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgICAgIGV4cGVjdChwYWdlM0J1dHRvbikudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgICAgIFxuICAgICAgYXdhaXQgdXNlci5jbGljayhwcmV2QnV0dG9uKTtcbiAgICAgIGV4cGVjdChtb2NrU2V0UGFnZSkudG9IYXZlQmVlbkNhbGxlZFdpdGgoMSk7XG4gICAgICBcbiAgICAgIGF3YWl0IHVzZXIuY2xpY2sobmV4dEJ1dHRvbik7XG4gICAgICBleHBlY3QobW9ja1NldFBhZ2UpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKDMpO1xuICAgICAgXG4gICAgICBhd2FpdCB1c2VyLmNsaWNrKHBhZ2UzQnV0dG9uKTtcbiAgICAgIGV4cGVjdChtb2NrU2V0UGFnZSkudG9IYXZlQmVlbkNhbGxlZFdpdGgoMyk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdDYWxlbmRhciBOYXZpZ2F0aW9uIEJ1dHRvbnMnLCAoKSA9PiB7XG4gICAgaXQoJ3Nob3VsZCBoYW5kbGUgbW9udGggbmF2aWdhdGlvbiBpbiBjYWxlbmRhcicsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IG1vY2tHb1RvUHJldk1vbnRoID0gamVzdC5mbigpO1xuICAgICAgY29uc3QgbW9ja0dvVG9OZXh0TW9udGggPSBqZXN0LmZuKCk7XG4gICAgICBcbiAgICAgIGNvbnN0IE1vY2tDYWxlbmRhck5hdiA9ICgpID0+IChcbiAgICAgICAgPGRpdj5cbiAgICAgICAgICA8YnV0dG9uIFxuICAgICAgICAgICAgZGF0YS10ZXN0aWQ9XCJwcmV2LW1vbnRoXCJcbiAgICAgICAgICAgIG9uQ2xpY2s9e21vY2tHb1RvUHJldk1vbnRofVxuICAgICAgICAgID5cbiAgICAgICAgICAgIFByZXZpb3VzIE1vbnRoXG4gICAgICAgICAgPC9idXR0b24+XG4gICAgICAgICAgPGJ1dHRvbiBcbiAgICAgICAgICAgIGRhdGEtdGVzdGlkPVwibmV4dC1tb250aFwiXG4gICAgICAgICAgICBvbkNsaWNrPXttb2NrR29Ub05leHRNb250aH1cbiAgICAgICAgICA+XG4gICAgICAgICAgICBOZXh0IE1vbnRoXG4gICAgICAgICAgPC9idXR0b24+XG4gICAgICAgIDwvZGl2PlxuICAgICAgKTtcblxuICAgICAgcmVuZGVyV2l0aFByb3ZpZGVyKDxNb2NrQ2FsZW5kYXJOYXYgLz4pO1xuICAgICAgXG4gICAgICBjb25zdCBwcmV2TW9udGhCdXR0b24gPSBzY3JlZW4uZ2V0QnlUZXN0SWQoJ3ByZXYtbW9udGgnKTtcbiAgICAgIGNvbnN0IG5leHRNb250aEJ1dHRvbiA9IHNjcmVlbi5nZXRCeVRlc3RJZCgnbmV4dC1tb250aCcpO1xuICAgICAgXG4gICAgICBleHBlY3QocHJldk1vbnRoQnV0dG9uKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgICAgZXhwZWN0KG5leHRNb250aEJ1dHRvbikudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgICAgIFxuICAgICAgYXdhaXQgdXNlci5jbGljayhwcmV2TW9udGhCdXR0b24pO1xuICAgICAgZXhwZWN0KG1vY2tHb1RvUHJldk1vbnRoKS50b0hhdmVCZWVuQ2FsbGVkKCk7XG4gICAgICBcbiAgICAgIGF3YWl0IHVzZXIuY2xpY2sobmV4dE1vbnRoQnV0dG9uKTtcbiAgICAgIGV4cGVjdChtb2NrR29Ub05leHRNb250aCkudG9IYXZlQmVlbkNhbGxlZCgpO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnQ2FsZW5kYXIgRmVhdHVyZSBCdXR0b25zJywgKCkgPT4ge1xuICAgIGl0KCdzaG91bGQgaGFuZGxlIGNhbGVuZGFyIGxpbmtpbmcgYW5kIGV4cG9ydCBmdW5jdGlvbmFsaXR5JywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgbW9ja0xpbmtDYWxlbmRhciA9IGplc3QuZm4oKTtcbiAgICAgIGNvbnN0IG1vY2tFeHBvcnRDYWxlbmRhciA9IGplc3QuZm4oKTtcbiAgICAgIGNvbnN0IG1vY2tDYW5jZWxMaW5rID0gamVzdC5mbigpO1xuICAgICAgY29uc3QgbW9ja05leHRTdGVwID0gamVzdC5mbigpO1xuICAgICAgXG4gICAgICBjb25zdCBNb2NrQ2FsZW5kYXJGZWF0dXJlcyA9ICgpID0+IHtcbiAgICAgICAgY29uc3QgW2lzTGlua2luZywgc2V0SXNMaW5raW5nXSA9IFJlYWN0LnVzZVN0YXRlKGZhbHNlKTtcbiAgICAgICAgXG4gICAgICAgIHJldHVybiAoXG4gICAgICAgICAgPGRpdj5cbiAgICAgICAgICAgIDxidXR0b24gXG4gICAgICAgICAgICAgIGRhdGEtdGVzdGlkPVwiYnV0dG9uLWxpbmstY2FsZW5kYXJcIlxuICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiB7XG4gICAgICAgICAgICAgICAgbW9ja0xpbmtDYWxlbmRhcigpO1xuICAgICAgICAgICAgICAgIHNldElzTGlua2luZyh0cnVlKTtcbiAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgTGluayBDYWxlbmRhclxuICAgICAgICAgICAgPC9idXR0b24+XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIDxidXR0b24gXG4gICAgICAgICAgICAgIGRhdGEtdGVzdGlkPVwiYnV0dG9uLWV4cG9ydC1jYWxlbmRhclwiXG4gICAgICAgICAgICAgIG9uQ2xpY2s9e21vY2tFeHBvcnRDYWxlbmRhcn1cbiAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgRXhwb3J0IENhbGVuZGFyXG4gICAgICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgICAgIFxuICAgICAgICAgICAge2lzTGlua2luZyAmJiAoXG4gICAgICAgICAgICAgIDxkaXY+XG4gICAgICAgICAgICAgICAgPGJ1dHRvbiBcbiAgICAgICAgICAgICAgICAgIGRhdGEtdGVzdGlkPVwiYnV0dG9uLWNhbmNlbC1saW5rXCJcbiAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgbW9ja0NhbmNlbExpbmsoKTtcbiAgICAgICAgICAgICAgICAgICAgc2V0SXNMaW5raW5nKGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgQ2FuY2VsIExpbmtcbiAgICAgICAgICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgICAgICAgICA8YnV0dG9uIFxuICAgICAgICAgICAgICAgICAgZGF0YS10ZXN0aWQ9XCJidXR0b24tbmV4dC1zdGVwXCJcbiAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9e21vY2tOZXh0U3RlcH1cbiAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICBOZXh0IFN0ZXBcbiAgICAgICAgICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgICAgICAgICA8YnV0dG9uIFxuICAgICAgICAgICAgICAgICAgZGF0YS10ZXN0aWQ9XCJidXR0b24tYmFjay1zdGVwXCJcbiAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IGNvbnNvbGUubG9nKCdCYWNrIHN0ZXAnKX1cbiAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICBCYWNrIFN0ZXBcbiAgICAgICAgICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgICAgICAgICA8YnV0dG9uIFxuICAgICAgICAgICAgICAgICAgZGF0YS10ZXN0aWQ9XCJidXR0b24tY2FuY2VsLXByb3ZpZGVyXCJcbiAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHNldElzTGlua2luZyhmYWxzZSl9XG4gICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgQ2FuY2VsIFByb3ZpZGVyXG4gICAgICAgICAgICAgICAgPC9idXR0b24+XG4gICAgICAgICAgICAgICAgPGJ1dHRvbiBcbiAgICAgICAgICAgICAgICAgIGRhdGEtdGVzdGlkPVwiYnV0dG9uLWNvbmZpcm0tZmluYWwtbGlua1wiXG4gICAgICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdDb25maXJtaW5nIGxpbmsnKTtcbiAgICAgICAgICAgICAgICAgICAgc2V0SXNMaW5raW5nKGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgQ29uZmlybSBMaW5rXG4gICAgICAgICAgICAgICAgPC9idXR0b24+XG4gICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgKX1cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgKTtcbiAgICAgIH07XG5cbiAgICAgIHJlbmRlcldpdGhQcm92aWRlcig8TW9ja0NhbGVuZGFyRmVhdHVyZXMgLz4pO1xuICAgICAgXG4gICAgICBjb25zdCBsaW5rQnV0dG9uID0gc2NyZWVuLmdldEJ5VGVzdElkKCdidXR0b24tbGluay1jYWxlbmRhcicpO1xuICAgICAgY29uc3QgZXhwb3J0QnV0dG9uID0gc2NyZWVuLmdldEJ5VGVzdElkKCdidXR0b24tZXhwb3J0LWNhbGVuZGFyJyk7XG4gICAgICBcbiAgICAgIGV4cGVjdChsaW5rQnV0dG9uKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgICAgZXhwZWN0KGV4cG9ydEJ1dHRvbikudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgICAgIFxuICAgICAgYXdhaXQgdXNlci5jbGljayhleHBvcnRCdXR0b24pO1xuICAgICAgZXhwZWN0KG1vY2tFeHBvcnRDYWxlbmRhcikudG9IYXZlQmVlbkNhbGxlZCgpO1xuICAgICAgXG4gICAgICBhd2FpdCB1c2VyLmNsaWNrKGxpbmtCdXR0b24pO1xuICAgICAgZXhwZWN0KG1vY2tMaW5rQ2FsZW5kYXIpLnRvSGF2ZUJlZW5DYWxsZWQoKTtcbiAgICAgIFxuICAgICAgYXdhaXQgd2FpdEZvcigoKSA9PiB7XG4gICAgICAgIGNvbnN0IGNhbmNlbEJ1dHRvbiA9IHNjcmVlbi5nZXRCeVRlc3RJZCgnYnV0dG9uLWNhbmNlbC1saW5rJyk7XG4gICAgICAgIGNvbnN0IG5leHRCdXR0b24gPSBzY3JlZW4uZ2V0QnlUZXN0SWQoJ2J1dHRvbi1uZXh0LXN0ZXAnKTtcbiAgICAgICAgXG4gICAgICAgIGV4cGVjdChjYW5jZWxCdXR0b24pLnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgICAgIGV4cGVjdChuZXh0QnV0dG9uKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgICAgfSk7XG4gICAgICBcbiAgICAgIGNvbnN0IG5leHRCdXR0b24gPSBzY3JlZW4uZ2V0QnlUZXN0SWQoJ2J1dHRvbi1uZXh0LXN0ZXAnKTtcbiAgICAgIGF3YWl0IHVzZXIuY2xpY2sobmV4dEJ1dHRvbik7XG4gICAgICBleHBlY3QobW9ja05leHRTdGVwKS50b0hhdmVCZWVuQ2FsbGVkKCk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdGaWx0ZXIgYW5kIFJlc2V0IEJ1dHRvbnMnLCAoKSA9PiB7XG4gICAgaXQoJ3Nob3VsZCBoYW5kbGUgZmlsdGVyIHJlc2V0IGZ1bmN0aW9uYWxpdHknLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBtb2NrUmVzZXRVc2VyRmlsdGVycyA9IGplc3QuZm4oKTtcbiAgICAgIGNvbnN0IG1vY2tSZXNldFBlcm1pc3Npb25GaWx0ZXJzID0gamVzdC5mbigpO1xuICAgICAgXG4gICAgICBjb25zdCBNb2NrRmlsdGVyQ29udHJvbHMgPSAoKSA9PiAoXG4gICAgICAgIDxkaXY+XG4gICAgICAgICAgPGJ1dHRvbiBcbiAgICAgICAgICAgIGRhdGEtdGVzdGlkPVwiYnV0dG9uLXJlc2V0LXVzZXItZmlsdGVyc1wiXG4gICAgICAgICAgICBvbkNsaWNrPXttb2NrUmVzZXRVc2VyRmlsdGVyc31cbiAgICAgICAgICA+XG4gICAgICAgICAgICBSZXNldCBVc2VyIEZpbHRlcnNcbiAgICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgICA8YnV0dG9uIFxuICAgICAgICAgICAgZGF0YS10ZXN0aWQ9XCJidXR0b24tcmVzZXQtcGVybWlzc2lvbi1maWx0ZXJzXCJcbiAgICAgICAgICAgIG9uQ2xpY2s9e21vY2tSZXNldFBlcm1pc3Npb25GaWx0ZXJzfVxuICAgICAgICAgID5cbiAgICAgICAgICAgIFJlc2V0IFBlcm1pc3Npb24gRmlsdGVyc1xuICAgICAgICAgIDwvYnV0dG9uPlxuICAgICAgICA8L2Rpdj5cbiAgICAgICk7XG5cbiAgICAgIHJlbmRlcldpdGhQcm92aWRlcig8TW9ja0ZpbHRlckNvbnRyb2xzIC8+KTtcbiAgICAgIFxuICAgICAgY29uc3QgcmVzZXRVc2VyQnV0dG9uID0gc2NyZWVuLmdldEJ5VGVzdElkKCdidXR0b24tcmVzZXQtdXNlci1maWx0ZXJzJyk7XG4gICAgICBjb25zdCByZXNldFBlcm1pc3Npb25CdXR0b24gPSBzY3JlZW4uZ2V0QnlUZXN0SWQoJ2J1dHRvbi1yZXNldC1wZXJtaXNzaW9uLWZpbHRlcnMnKTtcbiAgICAgIFxuICAgICAgZXhwZWN0KHJlc2V0VXNlckJ1dHRvbikudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgICAgIGV4cGVjdChyZXNldFBlcm1pc3Npb25CdXR0b24pLnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgICBcbiAgICAgIGF3YWl0IHVzZXIuY2xpY2socmVzZXRVc2VyQnV0dG9uKTtcbiAgICAgIGV4cGVjdChtb2NrUmVzZXRVc2VyRmlsdGVycykudG9IYXZlQmVlbkNhbGxlZCgpO1xuICAgICAgXG4gICAgICBhd2FpdCB1c2VyLmNsaWNrKHJlc2V0UGVybWlzc2lvbkJ1dHRvbik7XG4gICAgICBleHBlY3QobW9ja1Jlc2V0UGVybWlzc2lvbkZpbHRlcnMpLnRvSGF2ZUJlZW5DYWxsZWQoKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ1Nob3cvSGlkZSBUb2dnbGUgQnV0dG9ucycsICgpID0+IHtcbiAgICBpdCgnc2hvdWxkIGhhbmRsZSBzaG93IGFsbCBhbmQgaGlkZSBhbGwgZnVuY3Rpb25hbGl0eScsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IG1vY2tTaG93QWxsID0gamVzdC5mbigpO1xuICAgICAgY29uc3QgbW9ja0hpZGVBbGwgPSBqZXN0LmZuKCk7XG4gICAgICBcbiAgICAgIGNvbnN0IE1vY2tUb2dnbGVCdXR0b25zID0gKCkgPT4gKFxuICAgICAgICA8ZGl2PlxuICAgICAgICAgIDxidXR0b24gXG4gICAgICAgICAgICBkYXRhLXRlc3RpZD1cImJ1dHRvbi1zaG93LWFsbFwiXG4gICAgICAgICAgICBvbkNsaWNrPXttb2NrU2hvd0FsbH1cbiAgICAgICAgICA+XG4gICAgICAgICAgICBTaG93IEFsbFxuICAgICAgICAgIDwvYnV0dG9uPlxuICAgICAgICAgIDxidXR0b24gXG4gICAgICAgICAgICBkYXRhLXRlc3RpZD1cImJ1dHRvbi1oaWRlLWFsbFwiXG4gICAgICAgICAgICBvbkNsaWNrPXttb2NrSGlkZUFsbH1cbiAgICAgICAgICA+XG4gICAgICAgICAgICBIaWRlIEFsbFxuICAgICAgICAgIDwvYnV0dG9uPlxuICAgICAgICAgIDxidXR0b24gXG4gICAgICAgICAgICBkYXRhLXRlc3RpZD1cImJ1dHRvbi1zaG93LWFsbC1ib3R0b21cIlxuICAgICAgICAgICAgb25DbGljaz17bW9ja1Nob3dBbGx9XG4gICAgICAgICAgPlxuICAgICAgICAgICAgU2hvdyBBbGwgQm90dG9tXG4gICAgICAgICAgPC9idXR0b24+XG4gICAgICAgIDwvZGl2PlxuICAgICAgKTtcblxuICAgICAgcmVuZGVyV2l0aFByb3ZpZGVyKDxNb2NrVG9nZ2xlQnV0dG9ucyAvPik7XG4gICAgICBcbiAgICAgIGNvbnN0IHNob3dBbGxCdXR0b24gPSBzY3JlZW4uZ2V0QnlUZXN0SWQoJ2J1dHRvbi1zaG93LWFsbCcpO1xuICAgICAgY29uc3QgaGlkZUFsbEJ1dHRvbiA9IHNjcmVlbi5nZXRCeVRlc3RJZCgnYnV0dG9uLWhpZGUtYWxsJyk7XG4gICAgICBjb25zdCBzaG93QWxsQm90dG9tQnV0dG9uID0gc2NyZWVuLmdldEJ5VGVzdElkKCdidXR0b24tc2hvdy1hbGwtYm90dG9tJyk7XG4gICAgICBcbiAgICAgIGV4cGVjdChzaG93QWxsQnV0dG9uKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgICAgZXhwZWN0KGhpZGVBbGxCdXR0b24pLnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgICBleHBlY3Qoc2hvd0FsbEJvdHRvbUJ1dHRvbikudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgICAgIFxuICAgICAgYXdhaXQgdXNlci5jbGljayhzaG93QWxsQnV0dG9uKTtcbiAgICAgIGV4cGVjdChtb2NrU2hvd0FsbCkudG9IYXZlQmVlbkNhbGxlZCgpO1xuICAgICAgXG4gICAgICBhd2FpdCB1c2VyLmNsaWNrKGhpZGVBbGxCdXR0b24pO1xuICAgICAgZXhwZWN0KG1vY2tIaWRlQWxsKS50b0hhdmVCZWVuQ2FsbGVkKCk7XG4gICAgICBcbiAgICAgIGF3YWl0IHVzZXIuY2xpY2soc2hvd0FsbEJvdHRvbUJ1dHRvbik7XG4gICAgICBleHBlY3QobW9ja1Nob3dBbGwpLnRvSGF2ZUJlZW5DYWxsZWRUaW1lcygyKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ0Z1bGxzY3JlZW4gVG9nZ2xlIEJ1dHRvbnMnLCAoKSA9PiB7XG4gICAgaXQoJ3Nob3VsZCBoYW5kbGUgZnVsbHNjcmVlbiB0b2dnbGUgZnVuY3Rpb25hbGl0eScsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IG1vY2tUb2dnbGVGdWxsc2NyZWVuID0gamVzdC5mbigpO1xuICAgICAgXG4gICAgICBjb25zdCBNb2NrRnVsbHNjcmVlblRvZ2dsZSA9ICgpID0+IChcbiAgICAgICAgPGJ1dHRvbiBcbiAgICAgICAgICBkYXRhLXRlc3RpZD1cImJ1dHRvbi1mdWxsc2NyZWVuLXRvZ2dsZVwiXG4gICAgICAgICAgb25DbGljaz17bW9ja1RvZ2dsZUZ1bGxzY3JlZW59XG4gICAgICAgID5cbiAgICAgICAgICBUb2dnbGUgRnVsbHNjcmVlblxuICAgICAgICA8L2J1dHRvbj5cbiAgICAgICk7XG5cbiAgICAgIHJlbmRlcldpdGhQcm92aWRlcig8TW9ja0Z1bGxzY3JlZW5Ub2dnbGUgLz4pO1xuICAgICAgXG4gICAgICBjb25zdCBmdWxsc2NyZWVuQnV0dG9uID0gc2NyZWVuLmdldEJ5VGVzdElkKCdidXR0b24tZnVsbHNjcmVlbi10b2dnbGUnKTtcbiAgICAgIGV4cGVjdChmdWxsc2NyZWVuQnV0dG9uKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgICAgXG4gICAgICBhd2FpdCB1c2VyLmNsaWNrKGZ1bGxzY3JlZW5CdXR0b24pO1xuICAgICAgZXhwZWN0KG1vY2tUb2dnbGVGdWxsc2NyZWVuKS50b0hhdmVCZWVuQ2FsbGVkKCk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdNZW51IENvbnRyb2wgQnV0dG9ucycsICgpID0+IHtcbiAgICBpdCgnc2hvdWxkIGhhbmRsZSBoYW1idXJnZXIgbWVudSBmdW5jdGlvbmFsaXR5JywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgTW9ja0hhbWJ1cmdlck1lbnUgPSAoKSA9PiB7XG4gICAgICAgIGNvbnN0IFtpc09wZW4sIHNldElzT3Blbl0gPSBSZWFjdC51c2VTdGF0ZShmYWxzZSk7XG4gICAgICAgIFxuICAgICAgICByZXR1cm4gKFxuICAgICAgICAgIDxkaXY+XG4gICAgICAgICAgICA8YnV0dG9uIFxuICAgICAgICAgICAgICBkYXRhLXRlc3RpZD1cImhhbWJ1cmdlci1idXR0b25cIlxuICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiBzZXRJc09wZW4oIWlzT3Blbil9XG4gICAgICAgICAgICA+XG4gICAgICAgICAgICAgIE1lbnVcbiAgICAgICAgICAgIDwvYnV0dG9uPlxuICAgICAgICAgICAgXG4gICAgICAgICAgICB7aXNPcGVuICYmIChcbiAgICAgICAgICAgICAgPGJ1dHRvbiBcbiAgICAgICAgICAgICAgICBkYXRhLXRlc3RpZD1cIm1lbnUtY2xvc2UtYnV0dG9uXCJcbiAgICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiBzZXRJc09wZW4oZmFsc2UpfVxuICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgQ2xvc2UgTWVudVxuICAgICAgICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgICAgICl9XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgICk7XG4gICAgICB9O1xuXG4gICAgICByZW5kZXJXaXRoUHJvdmlkZXIoPE1vY2tIYW1idXJnZXJNZW51IC8+KTtcbiAgICAgIFxuICAgICAgY29uc3QgaGFtYnVyZ2VyQnV0dG9uID0gc2NyZWVuLmdldEJ5VGVzdElkKCdoYW1idXJnZXItYnV0dG9uJyk7XG4gICAgICBleHBlY3QoaGFtYnVyZ2VyQnV0dG9uKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgICAgXG4gICAgICBhd2FpdCB1c2VyLmNsaWNrKGhhbWJ1cmdlckJ1dHRvbik7XG4gICAgICBcbiAgICAgIGF3YWl0IHdhaXRGb3IoKCkgPT4ge1xuICAgICAgICBjb25zdCBjbG9zZUJ1dHRvbiA9IHNjcmVlbi5nZXRCeVRlc3RJZCgnbWVudS1jbG9zZS1idXR0b24nKTtcbiAgICAgICAgZXhwZWN0KGNsb3NlQnV0dG9uKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgICAgfSk7XG4gICAgICBcbiAgICAgIGNvbnN0IGNsb3NlQnV0dG9uID0gc2NyZWVuLmdldEJ5VGVzdElkKCdtZW51LWNsb3NlLWJ1dHRvbicpO1xuICAgICAgYXdhaXQgdXNlci5jbGljayhjbG9zZUJ1dHRvbik7XG4gICAgICBcbiAgICAgIGF3YWl0IHdhaXRGb3IoKCkgPT4ge1xuICAgICAgICBleHBlY3Qoc2NyZWVuLnF1ZXJ5QnlUZXN0SWQoJ21lbnUtY2xvc2UtYnV0dG9uJykpLm5vdC50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgICAgfSk7XG4gICAgfSk7XG4gIH0pO1xufSk7Il0sInZlcnNpb24iOjN9