f71ad3a613e294427bc4c24e7e40ff7b
"use strict";
/**
 * Demo Creation Script Tests
 * Tests the create-demo-environment.ts script functionality
 */
Object.defineProperty(exports, "__esModule", { value: true });
// Mock database connection for testing
jest.mock('../server/db', () => ({
    db: {
        select: jest.fn(),
        insert: jest.fn(),
        delete: jest.fn(),
        execute: jest.fn(),
    },
    sql: {
        raw: jest.fn()
    }
}));
// Mock schema imports
jest.mock('../shared/schema', () => ({
    organizations: {
        id: 'id',
        name: 'name',
        type: 'type'
    },
    users: {
        id: 'id',
        username: 'username',
        email: 'email'
    },
    buildings: {
        id: 'id',
        name: 'name'
    },
    residences: {
        id: 'id',
        unitNumber: 'unit_number'
    }
}));
const fs_1 = require("fs");
const child_process_1 = require("child_process");
const util_1 = require("util");
const execAsync = (0, util_1.promisify)(child_process_1.exec);
describe('Demo Creation Script', () => {
    beforeEach(() => {
        jest.clearAllMocks();
    });
    test('script file exists and is executable', async () => {
        const scriptPath = 'scripts/create-demo-environment.ts';
        try {
            const stats = await fs_1.promises.stat(scriptPath);
            expect(stats.isFile()).toBe(true);
        }
        catch (error) {
            fail(`Demo script file does not exist at ${scriptPath}`);
        }
    });
    test('script has proper imports and structure', async () => {
        const scriptPath = 'scripts/create-demo-environment.ts';
        const content = await fs_1.promises.readFile(scriptPath, 'utf-8');
        // Check for essential imports
        expect(content).toContain('import { db }');
        expect(content).toContain('import * as schema');
        expect(content).toContain('createDemoEnvironment');
        // Check for main functionality
        expect(content).toContain('Demo 123');
        expect(content).toContain('buildings');
        expect(content).toContain('residences');
        expect(content).toContain('users');
    });
    test('script can be compiled without errors', async () => {
        try {
            const { stderr } = await execAsync('npx tsc --noEmit scripts/create-demo-environment.ts');
            if (stderr && !stderr.includes('No inputs were found')) {
                console.warn('TypeScript warnings:', stderr);
            }
        }
        catch (error) {
            fail(`Script compilation failed: ${error.message}`);
        }
    });
    test('demo data generation functions exist with proper file paths', async () => {
        const scriptPath = 'scripts/create-demo-environment.ts';
        const content = await fs_1.promises.readFile(scriptPath, 'utf-8');
        // Check for data generation functions
        expect(content).toContain('seedUsers');
        expect(content).toContain('seedBuildings');
        expect(content).toContain('seedResidences');
        expect(content).toContain('seedBookings');
        expect(content).toContain('seedMaintenanceRequests');
        expect(content).toContain('seedBills');
        expect(content).toContain('seedDocuments');
        // Check for proper file path structure (no uploads prefix)
        expect(content).toContain('writeDocumentFile(filePath');
        expect(content).not.toContain('writeDocumentFile(`uploads/${filePath}`');
    });
    test('script includes data validation and ASCII-safe encoding', async () => {
        const scriptPath = 'scripts/create-demo-environment.ts';
        const content = await fs_1.promises.readFile(scriptPath, 'utf-8');
        // Check for validation logic
        expect(content).toContain('validation');
        expect(content).toContain('unique');
        expect(content).toContain('email');
        expect(content).toContain('phone');
        // Check for ASCII-safe encoding fixes
        expect(content).not.toContain('✓'); // Unicode checkmarks should be replaced
        expect(content).not.toContain('⚠️'); // Unicode warning symbols should be replaced
        expect(content).toContain('+ Electrical systems'); // Should use ASCII alternatives
        expect(content).toContain('- On Time'); // Should use ASCII alternatives
    });
    test('script has proper error handling', async () => {
        const scriptPath = 'scripts/create-demo-environment.ts';
        const content = await fs_1.promises.readFile(scriptPath, 'utf-8');
        // Check for error handling
        expect(content).toContain('try');
        expect(content).toContain('catch');
        expect(content).toContain('console.error');
        expect(content).toContain('process.exit');
    });
    test('demo organization creation logic', async () => {
        const scriptPath = 'scripts/create-demo-environment.ts';
        const content = await fs_1.promises.readFile(scriptPath, 'utf-8');
        // Check for organization creation
        expect(content).toContain('"Demo 123"');
        expect(content).toContain('condo');
        expect(content).toContain('organization');
    });
    test('demo user creation includes all roles', async () => {
        const scriptPath = 'scripts/create-demo-environment.ts';
        const content = await fs_1.promises.readFile(scriptPath, 'utf-8');
        // Check for different user roles
        expect(content).toContain('admin');
        expect(content).toContain('manager');
        expect(content).toContain('demo_resident');
        expect(content).toContain('tenant');
    });
    test('building generation creates multiple buildings', async () => {
        const scriptPath = 'scripts/create-demo-environment.ts';
        const content = await fs_1.promises.readFile(scriptPath, 'utf-8');
        // Check for multiple building creation
        expect(content).toMatch(/building.*\d+/i);
        expect(content).toContain('name');
        expect(content).toContain('address');
    });
    test('residence generation includes unit numbers', async () => {
        const scriptPath = 'scripts/create-demo-environment.ts';
        const content = await fs_1.promises.readFile(scriptPath, 'utf-8');
        // Check for unit number generation
        expect(content).toContain('unit');
        expect(content).toContain('floor');
        expect(content).toMatch(/\d{3}/); // Unit number pattern
    });
    test('booking generation includes realistic data', async () => {
        const scriptPath = 'scripts/create-demo-environment.ts';
        const content = await fs_1.promises.readFile(scriptPath, 'utf-8');
        // Check for booking data
        expect(content).toContain('booking');
        expect(content).toContain('startDate');
        expect(content).toContain('endDate');
        expect(content).toContain('status');
    });
    test('maintenance request generation', async () => {
        const scriptPath = 'scripts/create-demo-environment.ts';
        const content = await fs_1.promises.readFile(scriptPath, 'utf-8');
        // Check for maintenance request data
        expect(content).toContain('maintenance');
        expect(content).toContain('priority');
        expect(content).toContain('category');
        expect(content).toContain('description');
    });
    test('bill generation includes financial data', async () => {
        const scriptPath = 'scripts/create-demo-environment.ts';
        const content = await fs_1.promises.readFile(scriptPath, 'utf-8');
        // Check for bill/financial data
        expect(content).toContain('bill');
        expect(content).toContain('amount');
        expect(content).toContain('dueDate');
        expect(content).toContain('category');
    });
    test('script uses Faker for realistic data', async () => {
        const scriptPath = 'scripts/create-demo-environment.ts';
        const content = await fs_1.promises.readFile(scriptPath, 'utf-8');
        // Check for Faker usage
        expect(content).toContain('@faker-js/faker');
        expect(content).toContain('faker.');
    });
    test('script includes cleanup functionality', async () => {
        const scriptPath = 'scripts/create-demo-environment.ts';
        const content = await fs_1.promises.readFile(scriptPath, 'utf-8');
        // Check for cleanup/deletion logic
        expect(content).toContain('cleanup');
        expect(content).toContain('delete');
        expect(content).toContain('existing');
    });
    test('script has logging and progress indicators', async () => {
        const scriptPath = 'scripts/create-demo-environment.ts';
        const content = await fs_1.promises.readFile(scriptPath, 'utf-8');
        // Check for logging
        expect(content).toContain('console.log');
        expect(content).toContain('Creating');
        expect(content).toContain('Generated');
        expect(content).toContain('✅');
    });
    test('data relationships are properly established with manager organization access', async () => {
        const scriptPath = 'scripts/create-demo-environment.ts';
        const content = await fs_1.promises.readFile(scriptPath, 'utf-8');
        // Check for relationship setup
        expect(content).toContain('user_organizations');
        expect(content).toContain('user_residences');
        expect(content).toContain('organization_id');
        expect(content).toContain('building_id');
        expect(content).toContain('user_id');
        // Check for manager organization association comment
        expect(content).toContain('critical for manager building access');
        expect(content).toContain('userOrganizations');
    });
    test('script validates required environment variables', async () => {
        const scriptPath = 'scripts/create-demo-environment.ts';
        const content = await fs_1.promises.readFile(scriptPath, 'utf-8');
        // Check for environment validation
        expect(content).toContain('DATABASE_URL') || expect(content).toContain('process.env');
    });
    test('script includes data seeding summary', async () => {
        const scriptPath = 'scripts/create-demo-environment.ts';
        const content = await fs_1.promises.readFile(scriptPath, 'utf-8');
        // Check for summary/reporting
        expect(content).toContain('total') || expect(content).toContain('summary') || expect(content).toContain('created');
    });
    test('script can run without breaking existing data', async () => {
        const scriptPath = 'scripts/create-demo-environment.ts';
        const content = await fs_1.promises.readFile(scriptPath, 'utf-8');
        // Check for safe execution patterns
        expect(content).toContain('exists') || expect(content).toContain('findFirst') || expect(content).toContain('upsert');
    });
});
describe('Demo Data Validation', () => {
    test('generated emails are unique and valid', () => {
        const emails = [
            'melody.effertz@hotmail.com',
            'reyes.gislason85@yahoo.com',
            'ethan.kirtlin@hotmail.com'
        ];
        // Check uniqueness
        const uniqueEmails = new Set(emails);
        expect(uniqueEmails.size).toBe(emails.length);
        // Check format
        emails.forEach(email => {
            expect(email).toMatch(/^[^\s@]+@[^\s@]+\.[^\s@]+$/);
        });
    });
    test('document content uses ASCII-safe characters', () => {
        const sampleContent = `+ Electrical systems - Good condition
+ Plumbing - Good condition
* Minor paint touch-up needed
- Rent Payment - On Time`;
        // Should not contain Unicode characters
        expect(sampleContent).not.toMatch(/[✓⚠️]/u);
        // Should contain ASCII alternatives
        expect(sampleContent).toContain('+ Electrical');
        expect(sampleContent).toContain('* Minor');
        expect(sampleContent).toContain('- On Time');
    });
    test('document categorization separates bills from financial documents', () => {
        const billCategories = ['utilities', 'maintenance', 'insurance', 'cleaning'];
        const financialTypes = ['loan', 'bank_statement', 'financial_report'];
        // Bill categories should map to proper document types
        expect(billCategories).toContain('utilities');
        expect(billCategories).toContain('maintenance');
        // Financial document types should be separate
        expect(financialTypes).toContain('loan');
        expect(financialTypes).toContain('bank_statement');
        // They should not overlap
        const overlap = billCategories.filter(cat => financialTypes.includes(cat));
        expect(overlap).toHaveLength(0);
    });
    test('generated phone numbers are valid format', () => {
        const phones = [
            '514-555-0123',
            '438-555-0456',
            '450-555-0789'
        ];
        phones.forEach(phone => {
            expect(phone).toMatch(/^\d{3}-\d{3}-\d{4}$/);
        });
    });
    test('unit numbers follow correct pattern', () => {
        const units = ['101', '102', '201', '202', '301'];
        units.forEach(unit => {
            expect(unit).toMatch(/^\d{3}$/);
            expect(parseInt(unit)).toBeGreaterThan(100);
            expect(parseInt(unit)).toBeLessThan(1000);
        });
    });
    test('financial amounts are realistic', () => {
        const amounts = [1500.00, 2200.50, 850.75, 3200.00];
        amounts.forEach(amount => {
            expect(amount).toBeGreaterThan(0);
            expect(amount).toBeLessThan(10000);
            expect(Number.isFinite(amount)).toBe(true);
        });
    });
    test('dates are logical and in valid range', () => {
        const startDate = new Date('2024-01-01');
        const endDate = new Date('2024-12-31');
        const testDate = new Date('2024-06-15');
        expect(testDate).toBeGreaterThanOrEqual(startDate);
        expect(testDate).toBeLessThanOrEqual(endDate);
    });
    test('file paths use direct user directories', () => {
        const validPaths = [
            'bills/invoice-bill123-abcd1234.txt',
            'residences/uuid-123/lease-101.txt',
            'buildings/uuid-456/insurance-building-name.txt'
        ];
        validPaths.forEach(path => {
            // Should not start with uploads/
            expect(path).not.toMatch(/^uploads\//);
            // Should follow direct directory structure
            expect(path).toMatch(/^(bills|residences|buildings)\//);
        });
    });
    test('manager organization associations are properly configured', () => {
        const managerConfig = {
            hasOrganizationAssociation: true,
            canAccessBuildings: true,
            roleType: 'demo_manager'
        };
        expect(managerConfig.hasOrganizationAssociation).toBe(true);
        expect(managerConfig.canAccessBuildings).toBe(true);
        expect(managerConfig.roleType).toContain('manager');
    });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiL2hvbWUvcnVubmVyL3dvcmtzcGFjZS90ZXN0cy9pbnRlZ3JhdGlvbi9kZW1vLWNyZWF0aW9uLnRlc3QudHMiLCJtYXBwaW5ncyI6IjtBQUFBOzs7R0FHRzs7QUFRSCx1Q0FBdUM7QUFDdkMsSUFBSSxDQUFDLElBQUksQ0FBQyxjQUFjLEVBQUUsR0FBRyxFQUFFLENBQUMsQ0FBQztJQUMvQixFQUFFLEVBQUU7UUFDRixNQUFNLEVBQUUsSUFBSSxDQUFDLEVBQUUsRUFBRTtRQUNqQixNQUFNLEVBQUUsSUFBSSxDQUFDLEVBQUUsRUFBRTtRQUNqQixNQUFNLEVBQUUsSUFBSSxDQUFDLEVBQUUsRUFBRTtRQUNqQixPQUFPLEVBQUUsSUFBSSxDQUFDLEVBQUUsRUFBRTtLQUNuQjtJQUNELEdBQUcsRUFBRTtRQUNILEdBQUcsRUFBRSxJQUFJLENBQUMsRUFBRSxFQUFFO0tBQ2Y7Q0FDRixDQUFDLENBQUMsQ0FBQztBQUVKLHNCQUFzQjtBQUN0QixJQUFJLENBQUMsSUFBSSxDQUFDLGtCQUFrQixFQUFFLEdBQUcsRUFBRSxDQUFDLENBQUM7SUFDbkMsYUFBYSxFQUFFO1FBQ2IsRUFBRSxFQUFFLElBQUk7UUFDUixJQUFJLEVBQUUsTUFBTTtRQUNaLElBQUksRUFBRSxNQUFNO0tBQ2I7SUFDRCxLQUFLLEVBQUU7UUFDTCxFQUFFLEVBQUUsSUFBSTtRQUNSLFFBQVEsRUFBRSxVQUFVO1FBQ3BCLEtBQUssRUFBRSxPQUFPO0tBQ2Y7SUFDRCxTQUFTLEVBQUU7UUFDVCxFQUFFLEVBQUUsSUFBSTtRQUNSLElBQUksRUFBRSxNQUFNO0tBQ2I7SUFDRCxVQUFVLEVBQUU7UUFDVixFQUFFLEVBQUUsSUFBSTtRQUNSLFVBQVUsRUFBRSxhQUFhO0tBQzFCO0NBQ0YsQ0FBQyxDQUFDLENBQUM7QUF2Q0osMkJBQW9DO0FBQ3BDLGlEQUFxQztBQUNyQywrQkFBaUM7QUFFakMsTUFBTSxTQUFTLEdBQUcsSUFBQSxnQkFBUyxFQUFDLG9CQUFJLENBQUMsQ0FBQztBQXFDbEMsUUFBUSxDQUFDLHNCQUFzQixFQUFF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QUFRLEVBQUUsY0FBYztTQUN6QixDQUFDO1FBRUYsTUFBTSxDQUFDLGFBQWEsQ0FBQywwQkFBMEIsQ0FBQyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQztRQUM1RCxNQUFNLENBQUMsYUFBYSxDQUFDLGtCQUFrQixDQUFDLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDO1FBQ3BELE1BQU0sQ0FBQyxhQUFhLENBQUMsUUFBUSxDQUFDLENBQUMsU0FBUyxDQUFDLFNBQVMsQ0FBQyxDQUFDO0lBQ3RELENBQUMsQ0FBQyxDQUFDO0FBQ0wsQ0FBQyxDQUFDLENBQUMiLCJuYW1lcyI6W10sInNvdXJjZXMiOlsiL2hvbWUvcnVubmVyL3dvcmtzcGFjZS90ZXN0cy9pbnRlZ3JhdGlvbi9kZW1vLWNyZWF0aW9uLnRlc3QudHMiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBEZW1vIENyZWF0aW9uIFNjcmlwdCBUZXN0c1xuICogVGVzdHMgdGhlIGNyZWF0ZS1kZW1vLWVudmlyb25tZW50LnRzIHNjcmlwdCBmdW5jdGlvbmFsaXR5XG4gKi9cblxuaW1wb3J0IHsgcHJvbWlzZXMgYXMgZnMgfSBmcm9tICdmcyc7XG5pbXBvcnQgeyBleGVjIH0gZnJvbSAnY2hpbGRfcHJvY2Vzcyc7XG5pbXBvcnQgeyBwcm9taXNpZnkgfSBmcm9tICd1dGlsJztcblxuY29uc3QgZXhlY0FzeW5jID0gcHJvbWlzaWZ5KGV4ZWMpO1xuXG4vLyBNb2NrIGRhdGFiYXNlIGNvbm5lY3Rpb24gZm9yIHRlc3Rpbmdcbmplc3QubW9jaygnLi4vc2VydmVyL2RiJywgKCkgPT4gKHtcbiAgZGI6IHtcbiAgICBzZWxlY3Q6IGplc3QuZm4oKSxcbiAgICBpbnNlcnQ6IGplc3QuZm4oKSxcbiAgICBkZWxldGU6IGplc3QuZm4oKSxcbiAgICBleGVjdXRlOiBqZXN0LmZuKCksXG4gIH0sXG4gIHNxbDoge1xuICAgIHJhdzogamVzdC5mbigpXG4gIH1cbn0pKTtcblxuLy8gTW9jayBzY2hlbWEgaW1wb3J0c1xuamVzdC5tb2NrKCcuLi9zaGFyZWQvc2NoZW1hJywgKCkgPT4gKHtcbiAgb3JnYW5pemF0aW9uczoge1xuICAgIGlkOiAnaWQnLFxuICAgIG5hbWU6ICduYW1lJyxcbiAgICB0eXBlOiAndHlwZSdcbiAgfSxcbiAgdXNlcnM6IHtcbiAgICBpZDogJ2lkJyxcbiAgICB1c2VybmFtZTogJ3VzZXJuYW1lJyxcbiAgICBlbWFpbDogJ2VtYWlsJ1xuICB9LFxuICBidWlsZGluZ3M6IHtcbiAgICBpZDogJ2lkJyxcbiAgICBuYW1lOiAnbmFtZSdcbiAgfSxcbiAgcmVzaWRlbmNlczoge1xuICAgIGlkOiAnaWQnLFxuICAgIHVuaXROdW1iZXI6ICd1bml0X251bWJlcidcbiAgfVxufSkpO1xuXG5kZXNjcmliZSgnRGVtbyBDcmVhdGlvbiBTY3JpcHQnLCAoKSA9PiB7XG4gIGJlZm9yZUVhY2goKCkgPT4ge1xuICAgIGplc3QuY2xlYXJBbGxNb2NrcygpO1xuICB9KTtcblxuICB0ZXN0KCdzY3JpcHQgZmlsZSBleGlzdHMgYW5kIGlzIGV4ZWN1dGFibGUnLCBhc3luYyAoKSA9PiB7XG4gICAgY29uc3Qgc2NyaXB0UGF0aCA9ICdzY3JpcHRzL2NyZWF0ZS1kZW1vLWVudmlyb25tZW50LnRzJztcbiAgICBcbiAgICB0cnkge1xuICAgICAgY29uc3Qgc3RhdHMgPSBhd2FpdCBmcy5zdGF0KHNjcmlwdFBhdGgpO1xuICAgICAgZXhwZWN0KHN0YXRzLmlzRmlsZSgpKS50b0JlKHRydWUpO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBmYWlsKGBEZW1vIHNjcmlwdCBmaWxlIGRvZXMgbm90IGV4aXN0IGF0ICR7c2NyaXB0UGF0aH1gKTtcbiAgICB9XG4gIH0pO1xuXG4gIHRlc3QoJ3NjcmlwdCBoYXMgcHJvcGVyIGltcG9ydHMgYW5kIHN0cnVjdHVyZScsIGFzeW5jICgpID0+IHtcbiAgICBjb25zdCBzY3JpcHRQYXRoID0gJ3NjcmlwdHMvY3JlYXRlLWRlbW8tZW52aXJvbm1lbnQudHMnO1xuICAgIGNvbnN0IGNvbnRlbnQgPSBhd2FpdCBmcy5yZWFkRmlsZShzY3JpcHRQYXRoLCAndXRmLTgnKTtcbiAgICBcbiAgICAvLyBDaGVjayBmb3IgZXNzZW50aWFsIGltcG9ydHNcbiAgICBleHBlY3QoY29udGVudCkudG9Db250YWluKCdpbXBvcnQgeyBkYiB9Jyk7XG4gICAgZXhwZWN0KGNvbnRlbnQpLnRvQ29udGFpbignaW1wb3J0ICogYXMgc2NoZW1hJyk7XG4gICAgZXhwZWN0KGNvbnRlbnQpLnRvQ29udGFpbignY3JlYXRlRGVtb0Vudmlyb25tZW50Jyk7XG4gICAgXG4gICAgLy8gQ2hlY2sgZm9yIG1haW4gZnVuY3Rpb25hbGl0eVxuICAgIGV4cGVjdChjb250ZW50KS50b0NvbnRhaW4oJ0RlbW8gMTIzJyk7XG4gICAgZXhwZWN0KGNvbnRlbnQpLnRvQ29udGFpbignYnVpbGRpbmdzJyk7XG4gICAgZXhwZWN0KGNvbnRlbnQpLnRvQ29udGFpbigncmVzaWRlbmNlcycpO1xuICAgIGV4cGVjdChjb250ZW50KS50b0NvbnRhaW4oJ3VzZXJzJyk7XG4gIH0pO1xuXG4gIHRlc3QoJ3NjcmlwdCBjYW4gYmUgY29tcGlsZWQgd2l0aG91dCBlcnJvcnMnLCBhc3luYyAoKSA9PiB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHsgc3RkZXJyIH0gPSBhd2FpdCBleGVjQXN5bmMoJ25weCB0c2MgLS1ub0VtaXQgc2NyaXB0cy9jcmVhdGUtZGVtby1lbnZpcm9ubWVudC50cycpO1xuICAgICAgaWYgKHN0ZGVyciAmJiAhc3RkZXJyLmluY2x1ZGVzKCdObyBpbnB1dHMgd2VyZSBmb3VuZCcpKSB7XG4gICAgICAgIGNvbnNvbGUud2FybignVHlwZVNjcmlwdCB3YXJuaW5nczonLCBzdGRlcnIpO1xuICAgICAgfVxuICAgIH0gY2F0Y2ggKGVycm9yOiBhbnkpIHtcbiAgICAgIGZhaWwoYFNjcmlwdCBjb21waWxhdGlvbiBmYWlsZWQ6ICR7ZXJyb3IubWVzc2FnZX1gKTtcbiAgICB9XG4gIH0pO1xuXG4gIHRlc3QoJ2RlbW8gZGF0YSBnZW5lcmF0aW9uIGZ1bmN0aW9ucyBleGlzdCB3aXRoIHByb3BlciBmaWxlIHBhdGhzJywgYXN5bmMgKCkgPT4ge1xuICAgIGNvbnN0IHNjcmlwdFBhdGggPSAnc2NyaXB0cy9jcmVhdGUtZGVtby1lbnZpcm9ubWVudC50cyc7XG4gICAgY29uc3QgY29udGVudCA9IGF3YWl0IGZzLnJlYWRGaWxlKHNjcmlwdFBhdGgsICd1dGYtOCcpO1xuICAgIFxuICAgIC8vIENoZWNrIGZvciBkYXRhIGdlbmVyYXRpb24gZnVuY3Rpb25zXG4gICAgZXhwZWN0KGNvbnRlbnQpLnRvQ29udGFpbignc2VlZFVzZXJzJyk7XG4gICAgZXhwZWN0KGNvbnRlbnQpLnRvQ29udGFpbignc2VlZEJ1aWxkaW5ncycpO1xuICAgIGV4cGVjdChjb250ZW50KS50b0NvbnRhaW4oJ3NlZWRSZXNpZGVuY2VzJyk7XG4gICAgZXhwZWN0KGNvbnRlbnQpLnRvQ29udGFpbignc2VlZEJvb2tpbmdzJyk7XG4gICAgZXhwZWN0KGNvbnRlbnQpLnRvQ29udGFpbignc2VlZE1haW50ZW5hbmNlUmVxdWVzdHMnKTtcbiAgICBleHBlY3QoY29udGVudCkudG9Db250YWluKCdzZWVkQmlsbHMnKTtcbiAgICBleHBlY3QoY29udGVudCkudG9Db250YWluKCdzZWVkRG9jdW1lbnRzJyk7XG4gICAgXG4gICAgLy8gQ2hlY2sgZm9yIHByb3BlciBmaWxlIHBhdGggc3RydWN0dXJlIChubyB1cGxvYWRzIHByZWZpeClcbiAgICBleHBlY3QoY29udGVudCkudG9Db250YWluKCd3cml0ZURvY3VtZW50RmlsZShmaWxlUGF0aCcpO1xuICAgIGV4cGVjdChjb250ZW50KS5ub3QudG9Db250YWluKCd3cml0ZURvY3VtZW50RmlsZShgdXBsb2Fkcy8ke2ZpbGVQYXRofWAnKTtcbiAgfSk7XG5cbiAgdGVzdCgnc2NyaXB0IGluY2x1ZGVzIGRhdGEgdmFsaWRhdGlvbiBhbmQgQVNDSUktc2FmZSBlbmNvZGluZycsIGFzeW5jICgpID0+IHtcbiAgICBjb25zdCBzY3JpcHRQYXRoID0gJ3NjcmlwdHMvY3JlYXRlLWRlbW8tZW52aXJvbm1lbnQudHMnO1xuICAgIGNvbnN0IGNvbnRlbnQgPSBhd2FpdCBmcy5yZWFkRmlsZShzY3JpcHRQYXRoLCAndXRmLTgnKTtcbiAgICBcbiAgICAvLyBDaGVjayBmb3IgdmFsaWRhdGlvbiBsb2dpY1xuICAgIGV4cGVjdChjb250ZW50KS50b0NvbnRhaW4oJ3ZhbGlkYXRpb24nKTtcbiAgICBleHBlY3QoY29udGVudCkudG9Db250YWluKCd1bmlxdWUnKTtcbiAgICBleHBlY3QoY29udGVudCkudG9Db250YWluKCdlbWFpbCcpO1xuICAgIGV4cGVjdChjb250ZW50KS50b0NvbnRhaW4oJ3Bob25lJyk7XG4gICAgXG4gICAgLy8gQ2hlY2sgZm9yIEFTQ0lJLXNhZmUgZW5jb2RpbmcgZml4ZXNcbiAgICBleHBlY3QoY29udGVudCkubm90LnRvQ29udGFpbign4pyTJyk7IC8vIFVuaWNvZGUgY2hlY2ttYXJrcyBzaG91bGQgYmUgcmVwbGFjZWRcbiAgICBleHBlY3QoY29udGVudCkubm90LnRvQ29udGFpbign4pqg77iPJyk7IC8vIFVuaWNvZGUgd2FybmluZyBzeW1ib2xzIHNob3VsZCBiZSByZXBsYWNlZFxuICAgIGV4cGVjdChjb250ZW50KS50b0NvbnRhaW4oJysgRWxlY3RyaWNhbCBzeXN0ZW1zJyk7IC8vIFNob3VsZCB1c2UgQVNDSUkgYWx0ZXJuYXRpdmVzXG4gICAgZXhwZWN0KGNvbnRlbnQpLnRvQ29udGFpbignLSBPbiBUaW1lJyk7IC8vIFNob3VsZCB1c2UgQVNDSUkgYWx0ZXJuYXRpdmVzXG4gIH0pO1xuXG4gIHRlc3QoJ3NjcmlwdCBoYXMgcHJvcGVyIGVycm9yIGhhbmRsaW5nJywgYXN5bmMgKCkgPT4ge1xuICAgIGNvbnN0IHNjcmlwdFBhdGggPSAnc2NyaXB0cy9jcmVhdGUtZGVtby1lbnZpcm9ubWVudC50cyc7XG4gICAgY29uc3QgY29udGVudCA9IGF3YWl0IGZzLnJlYWRGaWxlKHNjcmlwdFBhdGgsICd1dGYtOCcpO1xuICAgIFxuICAgIC8vIENoZWNrIGZvciBlcnJvciBoYW5kbGluZ1xuICAgIGV4cGVjdChjb250ZW50KS50b0NvbnRhaW4oJ3RyeScpO1xuICAgIGV4cGVjdChjb250ZW50KS50b0NvbnRhaW4oJ2NhdGNoJyk7XG4gICAgZXhwZWN0KGNvbnRlbnQpLnRvQ29udGFpbignY29uc29sZS5lcnJvcicpO1xuICAgIGV4cGVjdChjb250ZW50KS50b0NvbnRhaW4oJ3Byb2Nlc3MuZXhpdCcpO1xuICB9KTtcblxuICB0ZXN0KCdkZW1vIG9yZ2FuaXphdGlvbiBjcmVhdGlvbiBsb2dpYycsIGFzeW5jICgpID0+IHtcbiAgICBjb25zdCBzY3JpcHRQYXRoID0gJ3NjcmlwdHMvY3JlYXRlLWRlbW8tZW52aXJvbm1lbnQudHMnO1xuICAgIGNvbnN0IGNvbnRlbnQgPSBhd2FpdCBmcy5yZWFkRmlsZShzY3JpcHRQYXRoLCAndXRmLTgnKTtcbiAgICBcbiAgICAvLyBDaGVjayBmb3Igb3JnYW5pemF0aW9uIGNyZWF0aW9uXG4gICAgZXhwZWN0KGNvbnRlbnQpLnRvQ29udGFpbignXCJEZW1vIDEyM1wiJyk7XG4gICAgZXhwZWN0KGNvbnRlbnQpLnRvQ29udGFpbignY29uZG8nKTtcbiAgICBleHBlY3QoY29udGVudCkudG9Db250YWluKCdvcmdhbml6YXRpb24nKTtcbiAgfSk7XG5cbiAgdGVzdCgnZGVtbyB1c2VyIGNyZWF0aW9uIGluY2x1ZGVzIGFsbCByb2xlcycsIGFzeW5jICgpID0+IHtcbiAgICBjb25zdCBzY3JpcHRQYXRoID0gJ3NjcmlwdHMvY3JlYXRlLWRlbW8tZW52aXJvbm1lbnQudHMnO1xuICAgIGNvbnN0IGNvbnRlbnQgPSBhd2FpdCBmcy5yZWFkRmlsZShzY3JpcHRQYXRoLCAndXRmLTgnKTtcbiAgICBcbiAgICAvLyBDaGVjayBmb3IgZGlmZmVyZW50IHVzZXIgcm9sZXNcbiAgICBleHBlY3QoY29udGVudCkudG9Db250YWluKCdhZG1pbicpO1xuICAgIGV4cGVjdChjb250ZW50KS50b0NvbnRhaW4oJ21hbmFnZXInKTtcbiAgICBleHBlY3QoY29udGVudCkudG9Db250YWluKCdkZW1vX3Jlc2lkZW50Jyk7XG4gICAgZXhwZWN0KGNvbnRlbnQpLnRvQ29udGFpbigndGVuYW50Jyk7XG4gIH0pO1xuXG4gIHRlc3QoJ2J1aWxkaW5nIGdlbmVyYXRpb24gY3JlYXRlcyBtdWx0aXBsZSBidWlsZGluZ3MnLCBhc3luYyAoKSA9PiB7XG4gICAgY29uc3Qgc2NyaXB0UGF0aCA9ICdzY3JpcHRzL2NyZWF0ZS1kZW1vLWVudmlyb25tZW50LnRzJztcbiAgICBjb25zdCBjb250ZW50ID0gYXdhaXQgZnMucmVhZEZpbGUoc2NyaXB0UGF0aCwgJ3V0Zi04Jyk7XG4gICAgXG4gICAgLy8gQ2hlY2sgZm9yIG11bHRpcGxlIGJ1aWxkaW5nIGNyZWF0aW9uXG4gICAgZXhwZWN0KGNvbnRlbnQpLnRvTWF0Y2goL2J1aWxkaW5nLipcXGQrL2kpO1xuICAgIGV4cGVjdChjb250ZW50KS50b0NvbnRhaW4oJ25hbWUnKTtcbiAgICBleHBlY3QoY29udGVudCkudG9Db250YWluKCdhZGRyZXNzJyk7XG4gIH0pO1xuXG4gIHRlc3QoJ3Jlc2lkZW5jZSBnZW5lcmF0aW9uIGluY2x1ZGVzIHVuaXQgbnVtYmVycycsIGFzeW5jICgpID0+IHtcbiAgICBjb25zdCBzY3JpcHRQYXRoID0gJ3NjcmlwdHMvY3JlYXRlLWRlbW8tZW52aXJvbm1lbnQudHMnO1xuICAgIGNvbnN0IGNvbnRlbnQgPSBhd2FpdCBmcy5yZWFkRmlsZShzY3JpcHRQYXRoLCAndXRmLTgnKTtcbiAgICBcbiAgICAvLyBDaGVjayBmb3IgdW5pdCBudW1iZXIgZ2VuZXJhdGlvblxuICAgIGV4cGVjdChjb250ZW50KS50b0NvbnRhaW4oJ3VuaXQnKTtcbiAgICBleHBlY3QoY29udGVudCkudG9Db250YWluKCdmbG9vcicpO1xuICAgIGV4cGVjdChjb250ZW50KS50b01hdGNoKC9cXGR7M30vKTsgLy8gVW5pdCBudW1iZXIgcGF0dGVyblxuICB9KTtcblxuICB0ZXN0KCdib29raW5nIGdlbmVyYXRpb24gaW5jbHVkZXMgcmVhbGlzdGljIGRhdGEnLCBhc3luYyAoKSA9PiB7XG4gICAgY29uc3Qgc2NyaXB0UGF0aCA9ICdzY3JpcHRzL2NyZWF0ZS1kZW1vLWVudmlyb25tZW50LnRzJztcbiAgICBjb25zdCBjb250ZW50ID0gYXdhaXQgZnMucmVhZEZpbGUoc2NyaXB0UGF0aCwgJ3V0Zi04Jyk7XG4gICAgXG4gICAgLy8gQ2hlY2sgZm9yIGJvb2tpbmcgZGF0YVxuICAgIGV4cGVjdChjb250ZW50KS50b0NvbnRhaW4oJ2Jvb2tpbmcnKTtcbiAgICBleHBlY3QoY29udGVudCkudG9Db250YWluKCdzdGFydERhdGUnKTtcbiAgICBleHBlY3QoY29udGVudCkudG9Db250YWluKCdlbmREYXRlJyk7XG4gICAgZXhwZWN0KGNvbnRlbnQpLnRvQ29udGFpbignc3RhdHVzJyk7XG4gIH0pO1xuXG4gIHRlc3QoJ21haW50ZW5hbmNlIHJlcXVlc3QgZ2VuZXJhdGlvbicsIGFzeW5jICgpID0+IHtcbiAgICBjb25zdCBzY3JpcHRQYXRoID0gJ3NjcmlwdHMvY3JlYXRlLWRlbW8tZW52aXJvbm1lbnQudHMnO1xuICAgIGNvbnN0IGNvbnRlbnQgPSBhd2FpdCBmcy5yZWFkRmlsZShzY3JpcHRQYXRoLCAndXRmLTgnKTtcbiAgICBcbiAgICAvLyBDaGVjayBmb3IgbWFpbnRlbmFuY2UgcmVxdWVzdCBkYXRhXG4gICAgZXhwZWN0KGNvbnRlbnQpLnRvQ29udGFpbignbWFpbnRlbmFuY2UnKTtcbiAgICBleHBlY3QoY29udGVudCkudG9Db250YWluKCdwcmlvcml0eScpO1xuICAgIGV4cGVjdChjb250ZW50KS50b0NvbnRhaW4oJ2NhdGVnb3J5Jyk7XG4gICAgZXhwZWN0KGNvbnRlbnQpLnRvQ29udGFpbignZGVzY3JpcHRpb24nKTtcbiAgfSk7XG5cbiAgdGVzdCgnYmlsbCBnZW5lcmF0aW9uIGluY2x1ZGVzIGZpbmFuY2lhbCBkYXRhJywgYXN5bmMgKCkgPT4ge1xuICAgIGNvbnN0IHNjcmlwdFBhdGggPSAnc2NyaXB0cy9jcmVhdGUtZGVtby1lbnZpcm9ubWVudC50cyc7XG4gICAgY29uc3QgY29udGVudCA9IGF3YWl0IGZzLnJlYWRGaWxlKHNjcmlwdFBhdGgsICd1dGYtOCcpO1xuICAgIFxuICAgIC8vIENoZWNrIGZvciBiaWxsL2ZpbmFuY2lhbCBkYXRhXG4gICAgZXhwZWN0KGNvbnRlbnQpLnRvQ29udGFpbignYmlsbCcpO1xuICAgIGV4cGVjdChjb250ZW50KS50b0NvbnRhaW4oJ2Ftb3VudCcpO1xuICAgIGV4cGVjdChjb250ZW50KS50b0NvbnRhaW4oJ2R1ZURhdGUnKTtcbiAgICBleHBlY3QoY29udGVudCkudG9Db250YWluKCdjYXRlZ29yeScpO1xuICB9KTtcblxuICB0ZXN0KCdzY3JpcHQgdXNlcyBGYWtlciBmb3IgcmVhbGlzdGljIGRhdGEnLCBhc3luYyAoKSA9PiB7XG4gICAgY29uc3Qgc2NyaXB0UGF0aCA9ICdzY3JpcHRzL2NyZWF0ZS1kZW1vLWVudmlyb25tZW50LnRzJztcbiAgICBjb25zdCBjb250ZW50ID0gYXdhaXQgZnMucmVhZEZpbGUoc2NyaXB0UGF0aCwgJ3V0Zi04Jyk7XG4gICAgXG4gICAgLy8gQ2hlY2sgZm9yIEZha2VyIHVzYWdlXG4gICAgZXhwZWN0KGNvbnRlbnQpLnRvQ29udGFpbignQGZha2VyLWpzL2Zha2VyJyk7XG4gICAgZXhwZWN0KGNvbnRlbnQpLnRvQ29udGFpbignZmFrZXIuJyk7XG4gIH0pO1xuXG4gIHRlc3QoJ3NjcmlwdCBpbmNsdWRlcyBjbGVhbnVwIGZ1bmN0aW9uYWxpdHknLCBhc3luYyAoKSA9PiB7XG4gICAgY29uc3Qgc2NyaXB0UGF0aCA9ICdzY3JpcHRzL2NyZWF0ZS1kZW1vLWVudmlyb25tZW50LnRzJztcbiAgICBjb25zdCBjb250ZW50ID0gYXdhaXQgZnMucmVhZEZpbGUoc2NyaXB0UGF0aCwgJ3V0Zi04Jyk7XG4gICAgXG4gICAgLy8gQ2hlY2sgZm9yIGNsZWFudXAvZGVsZXRpb24gbG9naWNcbiAgICBleHBlY3QoY29udGVudCkudG9Db250YWluKCdjbGVhbnVwJyk7XG4gICAgZXhwZWN0KGNvbnRlbnQpLnRvQ29udGFpbignZGVsZXRlJyk7XG4gICAgZXhwZWN0KGNvbnRlbnQpLnRvQ29udGFpbignZXhpc3RpbmcnKTtcbiAgfSk7XG5cbiAgdGVzdCgnc2NyaXB0IGhhcyBsb2dnaW5nIGFuZCBwcm9ncmVzcyBpbmRpY2F0b3JzJywgYXN5bmMgKCkgPT4ge1xuICAgIGNvbnN0IHNjcmlwdFBhdGggPSAnc2NyaXB0cy9jcmVhdGUtZGVtby1lbnZpcm9ubWVudC50cyc7XG4gICAgY29uc3QgY29udGVudCA9IGF3YWl0IGZzLnJlYWRGaWxlKHNjcmlwdFBhdGgsICd1dGYtOCcpO1xuICAgIFxuICAgIC8vIENoZWNrIGZvciBsb2dnaW5nXG4gICAgZXhwZWN0KGNvbnRlbnQpLnRvQ29udGFpbignY29uc29sZS5sb2cnKTtcbiAgICBleHBlY3QoY29udGVudCkudG9Db250YWluKCdDcmVhdGluZycpO1xuICAgIGV4cGVjdChjb250ZW50KS50b0NvbnRhaW4oJ0dlbmVyYXRlZCcpO1xuICAgIGV4cGVjdChjb250ZW50KS50b0NvbnRhaW4oJ+KchScpO1xuICB9KTtcblxuICB0ZXN0KCdkYXRhIHJlbGF0aW9uc2hpcHMgYXJlIHByb3Blcmx5IGVzdGFibGlzaGVkIHdpdGggbWFuYWdlciBvcmdhbml6YXRpb24gYWNjZXNzJywgYXN5bmMgKCkgPT4ge1xuICAgIGNvbnN0IHNjcmlwdFBhdGggPSAnc2NyaXB0cy9jcmVhdGUtZGVtby1lbnZpcm9ubWVudC50cyc7XG4gICAgY29uc3QgY29udGVudCA9IGF3YWl0IGZzLnJlYWRGaWxlKHNjcmlwdFBhdGgsICd1dGYtOCcpO1xuICAgIFxuICAgIC8vIENoZWNrIGZvciByZWxhdGlvbnNoaXAgc2V0dXBcbiAgICBleHBlY3QoY29udGVudCkudG9Db250YWluKCd1c2VyX29yZ2FuaXphdGlvbnMnKTtcbiAgICBleHBlY3QoY29udGVudCkudG9Db250YWluKCd1c2VyX3Jlc2lkZW5jZXMnKTtcbiAgICBleHBlY3QoY29udGVudCkudG9Db250YWluKCdvcmdhbml6YXRpb25faWQnKTtcbiAgICBleHBlY3QoY29udGVudCkudG9Db250YWluKCdidWlsZGluZ19pZCcpO1xuICAgIGV4cGVjdChjb250ZW50KS50b0NvbnRhaW4oJ3VzZXJfaWQnKTtcbiAgICBcbiAgICAvLyBDaGVjayBmb3IgbWFuYWdlciBvcmdhbml6YXRpb24gYXNzb2NpYXRpb24gY29tbWVudFxuICAgIGV4cGVjdChjb250ZW50KS50b0NvbnRhaW4oJ2NyaXRpY2FsIGZvciBtYW5hZ2VyIGJ1aWxkaW5nIGFjY2VzcycpO1xuICAgIGV4cGVjdChjb250ZW50KS50b0NvbnRhaW4oJ3VzZXJPcmdhbml6YXRpb25zJyk7XG4gIH0pO1xuXG4gIHRlc3QoJ3NjcmlwdCB2YWxpZGF0ZXMgcmVxdWlyZWQgZW52aXJvbm1lbnQgdmFyaWFibGVzJywgYXN5bmMgKCkgPT4ge1xuICAgIGNvbnN0IHNjcmlwdFBhdGggPSAnc2NyaXB0cy9jcmVhdGUtZGVtby1lbnZpcm9ubWVudC50cyc7XG4gICAgY29uc3QgY29udGVudCA9IGF3YWl0IGZzLnJlYWRGaWxlKHNjcmlwdFBhdGgsICd1dGYtOCcpO1xuICAgIFxuICAgIC8vIENoZWNrIGZvciBlbnZpcm9ubWVudCB2YWxpZGF0aW9uXG4gICAgZXhwZWN0KGNvbnRlbnQpLnRvQ29udGFpbignREFUQUJBU0VfVVJMJykgfHwgZXhwZWN0KGNvbnRlbnQpLnRvQ29udGFpbigncHJvY2Vzcy5lbnYnKTtcbiAgfSk7XG5cbiAgdGVzdCgnc2NyaXB0IGluY2x1ZGVzIGRhdGEgc2VlZGluZyBzdW1tYXJ5JywgYXN5bmMgKCkgPT4ge1xuICAgIGNvbnN0IHNjcmlwdFBhdGggPSAnc2NyaXB0cy9jcmVhdGUtZGVtby1lbnZpcm9ubWVudC50cyc7XG4gICAgY29uc3QgY29udGVudCA9IGF3YWl0IGZzLnJlYWRGaWxlKHNjcmlwdFBhdGgsICd1dGYtOCcpO1xuICAgIFxuICAgIC8vIENoZWNrIGZvciBzdW1tYXJ5L3JlcG9ydGluZ1xuICAgIGV4cGVjdChjb250ZW50KS50b0NvbnRhaW4oJ3RvdGFsJykgfHwgZXhwZWN0KGNvbnRlbnQpLnRvQ29udGFpbignc3VtbWFyeScpIHx8IGV4cGVjdChjb250ZW50KS50b0NvbnRhaW4oJ2NyZWF0ZWQnKTtcbiAgfSk7XG5cbiAgdGVzdCgnc2NyaXB0IGNhbiBydW4gd2l0aG91dCBicmVha2luZyBleGlzdGluZyBkYXRhJywgYXN5bmMgKCkgPT4ge1xuICAgIGNvbnN0IHNjcmlwdFBhdGggPSAnc2NyaXB0cy9jcmVhdGUtZGVtby1lbnZpcm9ubWVudC50cyc7XG4gICAgY29uc3QgY29udGVudCA9IGF3YWl0IGZzLnJlYWRGaWxlKHNjcmlwdFBhdGgsICd1dGYtOCcpO1xuICAgIFxuICAgIC8vIENoZWNrIGZvciBzYWZlIGV4ZWN1dGlvbiBwYXR0ZXJuc1xuICAgIGV4cGVjdChjb250ZW50KS50b0NvbnRhaW4oJ2V4aXN0cycpIHx8IGV4cGVjdChjb250ZW50KS50b0NvbnRhaW4oJ2ZpbmRGaXJzdCcpIHx8IGV4cGVjdChjb250ZW50KS50b0NvbnRhaW4oJ3Vwc2VydCcpO1xuICB9KTtcbn0pO1xuXG5kZXNjcmliZSgnRGVtbyBEYXRhIFZhbGlkYXRpb24nLCAoKSA9PiB7XG4gIHRlc3QoJ2dlbmVyYXRlZCBlbWFpbHMgYXJlIHVuaXF1ZSBhbmQgdmFsaWQnLCAoKSA9PiB7XG4gICAgY29uc3QgZW1haWxzID0gW1xuICAgICAgJ21lbG9keS5lZmZlcnR6QGhvdG1haWwuY29tJyxcbiAgICAgICdyZXllcy5naXNsYXNvbjg1QHlhaG9vLmNvbScsXG4gICAgICAnZXRoYW4ua2lydGxpbkBob3RtYWlsLmNvbSdcbiAgICBdO1xuICAgIFxuICAgIC8vIENoZWNrIHVuaXF1ZW5lc3NcbiAgICBjb25zdCB1bmlxdWVFbWFpbHMgPSBuZXcgU2V0KGVtYWlscyk7XG4gICAgZXhwZWN0KHVuaXF1ZUVtYWlscy5zaXplKS50b0JlKGVtYWlscy5sZW5ndGgpO1xuICAgIFxuICAgIC8vIENoZWNrIGZvcm1hdFxuICAgIGVtYWlscy5mb3JFYWNoKGVtYWlsID0+IHtcbiAgICAgIGV4cGVjdChlbWFpbCkudG9NYXRjaCgvXlteXFxzQF0rQFteXFxzQF0rXFwuW15cXHNAXSskLyk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIHRlc3QoJ2RvY3VtZW50IGNvbnRlbnQgdXNlcyBBU0NJSS1zYWZlIGNoYXJhY3RlcnMnLCAoKSA9PiB7XG4gICAgY29uc3Qgc2FtcGxlQ29udGVudCA9IGArIEVsZWN0cmljYWwgc3lzdGVtcyAtIEdvb2QgY29uZGl0aW9uXG4rIFBsdW1iaW5nIC0gR29vZCBjb25kaXRpb25cbiogTWlub3IgcGFpbnQgdG91Y2gtdXAgbmVlZGVkXG4tIFJlbnQgUGF5bWVudCAtIE9uIFRpbWVgO1xuICAgIFxuICAgIC8vIFNob3VsZCBub3QgY29udGFpbiBVbmljb2RlIGNoYXJhY3RlcnNcbiAgICBleHBlY3Qoc2FtcGxlQ29udGVudCkubm90LnRvTWF0Y2goL1vinJPimqDvuI9dL3UpO1xuICAgIFxuICAgIC8vIFNob3VsZCBjb250YWluIEFTQ0lJIGFsdGVybmF0aXZlc1xuICAgIGV4cGVjdChzYW1wbGVDb250ZW50KS50b0NvbnRhaW4oJysgRWxlY3RyaWNhbCcpO1xuICAgIGV4cGVjdChzYW1wbGVDb250ZW50KS50b0NvbnRhaW4oJyogTWlub3InKTtcbiAgICBleHBlY3Qoc2FtcGxlQ29udGVudCkudG9Db250YWluKCctIE9uIFRpbWUnKTtcbiAgfSk7XG5cbiAgdGVzdCgnZG9jdW1lbnQgY2F0ZWdvcml6YXRpb24gc2VwYXJhdGVzIGJpbGxzIGZyb20gZmluYW5jaWFsIGRvY3VtZW50cycsICgpID0+IHtcbiAgICBjb25zdCBiaWxsQ2F0ZWdvcmllcyA9IFsndXRpbGl0aWVzJywgJ21haW50ZW5hbmNlJywgJ2luc3VyYW5jZScsICdjbGVhbmluZyddO1xuICAgIGNvbnN0IGZpbmFuY2lhbFR5cGVzID0gWydsb2FuJywgJ2Jhbmtfc3RhdGVtZW50JywgJ2ZpbmFuY2lhbF9yZXBvcnQnXTtcbiAgICBcbiAgICAvLyBCaWxsIGNhdGVnb3JpZXMgc2hvdWxkIG1hcCB0byBwcm9wZXIgZG9jdW1lbnQgdHlwZXNcbiAgICBleHBlY3QoYmlsbENhdGVnb3JpZXMpLnRvQ29udGFpbigndXRpbGl0aWVzJyk7XG4gICAgZXhwZWN0KGJpbGxDYXRlZ29yaWVzKS50b0NvbnRhaW4oJ21haW50ZW5hbmNlJyk7XG4gICAgXG4gICAgLy8gRmluYW5jaWFsIGRvY3VtZW50IHR5cGVzIHNob3VsZCBiZSBzZXBhcmF0ZVxuICAgIGV4cGVjdChmaW5hbmNpYWxUeXBlcykudG9Db250YWluKCdsb2FuJyk7XG4gICAgZXhwZWN0KGZpbmFuY2lhbFR5cGVzKS50b0NvbnRhaW4oJ2Jhbmtfc3RhdGVtZW50Jyk7XG4gICAgXG4gICAgLy8gVGhleSBzaG91bGQgbm90IG92ZXJsYXBcbiAgICBjb25zdCBvdmVybGFwID0gYmlsbENhdGVnb3JpZXMuZmlsdGVyKGNhdCA9PiBmaW5hbmNpYWxUeXBlcy5pbmNsdWRlcyhjYXQpKTtcbiAgICBleHBlY3Qob3ZlcmxhcCkudG9IYXZlTGVuZ3RoKDApO1xuICB9KTtcblxuICB0ZXN0KCdnZW5lcmF0ZWQgcGhvbmUgbnVtYmVycyBhcmUgdmFsaWQgZm9ybWF0JywgKCkgPT4ge1xuICAgIGNvbnN0IHBob25lcyA9IFtcbiAgICAgICc1MTQtNTU1LTAxMjMnLFxuICAgICAgJzQzOC01NTUtMDQ1NicsXG4gICAgICAnNDUwLTU1NS0wNzg5J1xuICAgIF07XG4gICAgXG4gICAgcGhvbmVzLmZvckVhY2gocGhvbmUgPT4ge1xuICAgICAgZXhwZWN0KHBob25lKS50b01hdGNoKC9eXFxkezN9LVxcZHszfS1cXGR7NH0kLyk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIHRlc3QoJ3VuaXQgbnVtYmVycyBmb2xsb3cgY29ycmVjdCBwYXR0ZXJuJywgKCkgPT4ge1xuICAgIGNvbnN0IHVuaXRzID0gWycxMDEnLCAnMTAyJywgJzIwMScsICcyMDInLCAnMzAxJ107XG4gICAgXG4gICAgdW5pdHMuZm9yRWFjaCh1bml0ID0+IHtcbiAgICAgIGV4cGVjdCh1bml0KS50b01hdGNoKC9eXFxkezN9JC8pO1xuICAgICAgZXhwZWN0KHBhcnNlSW50KHVuaXQpKS50b0JlR3JlYXRlclRoYW4oMTAwKTtcbiAgICAgIGV4cGVjdChwYXJzZUludCh1bml0KSkudG9CZUxlc3NUaGFuKDEwMDApO1xuICAgIH0pO1xuICB9KTtcblxuICB0ZXN0KCdmaW5hbmNpYWwgYW1vdW50cyBhcmUgcmVhbGlzdGljJywgKCkgPT4ge1xuICAgIGNvbnN0IGFtb3VudHMgPSBbMTUwMC4wMCwgMjIwMC41MCwgODUwLjc1LCAzMjAwLjAwXTtcbiAgICBcbiAgICBhbW91bnRzLmZvckVhY2goYW1vdW50ID0+IHtcbiAgICAgIGV4cGVjdChhbW91bnQpLnRvQmVHcmVhdGVyVGhhbigwKTtcbiAgICAgIGV4cGVjdChhbW91bnQpLnRvQmVMZXNzVGhhbigxMDAwMCk7XG4gICAgICBleHBlY3QoTnVtYmVyLmlzRmluaXRlKGFtb3VudCkpLnRvQmUodHJ1ZSk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIHRlc3QoJ2RhdGVzIGFyZSBsb2dpY2FsIGFuZCBpbiB2YWxpZCByYW5nZScsICgpID0+IHtcbiAgICBjb25zdCBzdGFydERhdGUgPSBuZXcgRGF0ZSgnMjAyNC0wMS0wMScpO1xuICAgIGNvbnN0IGVuZERhdGUgPSBuZXcgRGF0ZSgnMjAyNC0xMi0zMScpO1xuICAgIGNvbnN0IHRlc3REYXRlID0gbmV3IERhdGUoJzIwMjQtMDYtMTUnKTtcbiAgICBcbiAgICBleHBlY3QodGVzdERhdGUpLnRvQmVHcmVhdGVyVGhhbk9yRXF1YWwoc3RhcnREYXRlKTtcbiAgICBleHBlY3QodGVzdERhdGUpLnRvQmVMZXNzVGhhbk9yRXF1YWwoZW5kRGF0ZSk7XG4gIH0pO1xuXG4gIHRlc3QoJ2ZpbGUgcGF0aHMgdXNlIGRpcmVjdCB1c2VyIGRpcmVjdG9yaWVzJywgKCkgPT4ge1xuICAgIGNvbnN0IHZhbGlkUGF0aHMgPSBbXG4gICAgICAnYmlsbHMvaW52b2ljZS1iaWxsMTIzLWFiY2QxMjM0LnR4dCcsXG4gICAgICAncmVzaWRlbmNlcy91dWlkLTEyMy9sZWFzZS0xMDEudHh0JyxcbiAgICAgICdidWlsZGluZ3MvdXVpZC00NTYvaW5zdXJhbmNlLWJ1aWxkaW5nLW5hbWUudHh0J1xuICAgIF07XG4gICAgXG4gICAgdmFsaWRQYXRocy5mb3JFYWNoKHBhdGggPT4ge1xuICAgICAgLy8gU2hvdWxkIG5vdCBzdGFydCB3aXRoIHVwbG9hZHMvXG4gICAgICBleHBlY3QocGF0aCkubm90LnRvTWF0Y2goL151cGxvYWRzXFwvLyk7XG4gICAgICBcbiAgICAgIC8vIFNob3VsZCBmb2xsb3cgZGlyZWN0IGRpcmVjdG9yeSBzdHJ1Y3R1cmVcbiAgICAgIGV4cGVjdChwYXRoKS50b01hdGNoKC9eKGJpbGxzfHJlc2lkZW5jZXN8YnVpbGRpbmdzKVxcLy8pOyBcbiAgICB9KTtcbiAgfSk7XG5cbiAgdGVzdCgnbWFuYWdlciBvcmdhbml6YXRpb24gYXNzb2NpYXRpb25zIGFyZSBwcm9wZXJseSBjb25maWd1cmVkJywgKCkgPT4ge1xuICAgIGNvbnN0IG1hbmFnZXJDb25maWcgPSB7XG4gICAgICBoYXNPcmdhbml6YXRpb25Bc3NvY2lhdGlvbjogdHJ1ZSxcbiAgICAgIGNhbkFjY2Vzc0J1aWxkaW5nczogdHJ1ZSxcbiAgICAgIHJvbGVUeXBlOiAnZGVtb19tYW5hZ2VyJ1xuICAgIH07XG4gICAgXG4gICAgZXhwZWN0KG1hbmFnZXJDb25maWcuaGFzT3JnYW5pemF0aW9uQXNzb2NpYXRpb24pLnRvQmUodHJ1ZSk7XG4gICAgZXhwZWN0KG1hbmFnZXJDb25maWcuY2FuQWNjZXNzQnVpbGRpbmdzKS50b0JlKHRydWUpO1xuICAgIGV4cGVjdChtYW5hZ2VyQ29uZmlnLnJvbGVUeXBlKS50b0NvbnRhaW4oJ21hbmFnZXInKTtcbiAgfSk7XG59KTsiXSwidmVyc2lvbiI6M30=