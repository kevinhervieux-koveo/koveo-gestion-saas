5d4e87fc4993c89a88467ca5c90dcfdf
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.default = Bills;
const jsx_runtime_1 = require("react/jsx-runtime");
const react_1 = require("react");
const header_1 = require("@/components/layout/header");
const card_1 = require("@/components/ui/card");
const badge_1 = require("@/components/ui/badge");
const button_1 = require("@/components/ui/button");
const select_1 = require("@/components/ui/select");
const input_1 = require("@/components/ui/input");
const label_1 = require("@/components/ui/label");
const dialog_1 = require("@/components/ui/dialog");
const checkbox_1 = require("@/components/ui/checkbox");
const popover_1 = require("@/components/ui/popover");
const lucide_react_1 = require("lucide-react");
const BillEditForm_1 = require("@/components/BillEditForm");
const BuildingSelectionGrid_1 = require("@/components/BuildingSelectionGrid");
const BillCreateForm_1 = require("@/components/BillCreateForm");
const react_query_1 = require("@tanstack/react-query");
const queryClient_1 = require("@/lib/queryClient");
const utils_1 = require("@/lib/utils");
const BILL_CATEGORIES = [
    'insurance',
    'maintenance',
    'salary',
    'utilities',
    'cleaning',
    'security',
    'landscaping',
    'professional_services',
    'administration',
    'repairs',
    'supplies',
    'taxes',
    'other',
];
const CATEGORY_LABELS = {
    insurance: 'Insurance',
    maintenance: 'Maintenance',
    salary: 'Salary',
    utilities: 'Utilities',
    cleaning: 'Cleaning',
    security: 'Security',
    landscaping: 'Landscaping',
    professional_services: 'Professional Services',
    administration: 'Administration',
    repairs: 'Repairs',
    supplies: 'Supplies',
    taxes: 'Taxes',
    other: 'Other',
};
const MONTHS = [
    { value: '1', label: 'January' },
    { value: '2', label: 'February' },
    { value: '3', label: 'March' },
    { value: '4', label: 'April' },
    { value: '5', label: 'May' },
    { value: '6', label: 'June' },
    { value: '7', label: 'July' },
    { value: '8', label: 'August' },
    { value: '9', label: 'September' },
    { value: '10', label: 'October' },
    { value: '11', label: 'November' },
    { value: '12', label: 'December' },
];
/**
 *
 */
function Bills() {
    const [filters, setFilters] = (0, react_1.useState)({
        buildingId: '',
        category: '',
        year: new Date().getFullYear().toString(),
        months: [],
    });
    const [showCreateDialog, setShowCreateDialog] = (0, react_1.useState)(false);
    const [showAllYears, setShowAllYears] = (0, react_1.useState)(false);
    const queryClient = (0, react_query_1.useQueryClient)();
    // Fetch buildings for filter dropdown
    const { data: buildings = [], isLoading: buildingsLoading, error: buildingsError, } = (0, react_query_1.useQuery)({
        queryKey: ['/api/buildings'],
        queryFn: async () => {
            const response = await (0, queryClient_1.apiRequest)('GET', '/api/buildings');
            return await response.json();
        },
    });
    // Fetch bills based on filters
    const { data: bills = [], isLoading } = (0, react_query_1.useQuery)({
        queryKey: ['/api/bills', filters],
        queryFn: async () => {
            const params = new URLSearchParams(); /**
             * If function.
             * @param filters.buildingId - Filters.buildingId parameter.
             */ /**
            * If function.
            * @param filters.buildingId - Filters.buildingId parameter.
            */
            if (filters.buildingId) {
                params.set('buildingId', filters.buildingId);
            } /**
             * If function.
             * @param filters.category && filters.category !== 'all' - filters.category && filters.category !== 'all' parameter.
             */ /**
            * If function.
            * @param filters.category && filters.category !== 'all' - filters.category && filters.category !== 'all' parameter.
            */
            if (filters.category && filters.category !== 'all') {
                params.set('category', filters.category);
            } /**
             * If function.
             * @param filters.year - Filters.year parameter.
             */ /**
            * If function.
            * @param filters.year - Filters.year parameter.
            */
            if (filters.year) {
                params.set('year', filters.year);
            } /**
             * If function.
             * @param filters.months.length > 0 - filters.months.length > 0 parameter.
             */ /**
            * If function.
            * @param filters.months.length > 0 - filters.months.length > 0 parameter.
            */
            if (filters.months.length > 0) {
                params.set('months', filters.months.join(','));
            }
            const url = `/api/bills${params.toString() ? '?' + params.toString() : ''}`;
            const response = await fetch(url, { credentials: 'include' }); /**
             * If function.
             * @param !response.ok - !response.ok parameter.
             */
            /**
             * If function.
             * @param !response.ok - !response.ok parameter.
             */
            /**
             * If function.
             * @param !response.ok - !response.ok parameter.
             */
            /**
             * If function.
             * @param !response.ok - !response.ok parameter.
             */ /**
            * If function.
            * @param !response.ok - !response.ok parameter.
            */
            /**
             * If function.
             * @param !response.ok - !response.ok parameter.
             */
            /**
             * If function.
             * @param !response.ok - !response.ok parameter.
             */
            /**
             * If function.
             * @param !response.ok - !response.ok parameter.
             */
            if (!response.ok) {
                throw new Error(`Failed to fetch bills: ${response.statusText}`);
            }
            return response.json();
        },
    });
    // Group bills by category
    const billsByCategory = bills.reduce((acc, bill) => {
        const category = bill.category || 'other'; /**
         * If function.
         * @param !acc[category] - !acc[category] parameter.
         */ /**
        * If function.
        * @param !acc[category] - !acc[category] parameter.
        */
        if (!acc[category]) {
            acc[category] = [];
        }
        acc[category].push(bill);
        return acc;
    }, {});
    const handleFilterChange = (key, value) => {
        setFilters((prev) => ({ ...prev, [key]: value }));
    };
    const handleMonthToggle = (monthValue) => {
        setFilters((prev) => ({
            ...prev,
            months: prev.months.includes(monthValue)
                ? prev.months.filter((m) => m !== monthValue)
                : [...prev.months, monthValue],
        }));
    };
    const handleAllMonthsToggle = () => {
        const allMonthValues = MONTHS.map((m) => m.value);
        setFilters((prev) => ({
            ...prev,
            months: prev.months.length === allMonthValues.length ? [] : allMonthValues,
        }));
    };
    const getMonthsDisplayText = () => {
        /**
         * If function.
         * @param filters.months.length === 0 - filters.months.length === 0 parameter.
         */ /**
        * If function.
        * @param filters.months.length === 0 - filters.months.length === 0 parameter.
        */
        if (filters.months.length === 0) {
            return 'All months';
        } /**
         * If function.
         * @param filters.months.length === MONTHS.length - filters.months.length === MONTHS.length parameter.
         */ /**
        * If function.
        * @param filters.months.length === MONTHS.length - filters.months.length === MONTHS.length parameter.
        */
        if (filters.months.length === MONTHS.length) {
            return 'All months';
        } /**
         * If function.
         * @param filters.months.length === 1 - filters.months.length === 1 parameter.
         */ /**
        * If function.
        * @param filters.months.length === 1 - filters.months.length === 1 parameter.
        */
        if (filters.months.length === 1) {
            const month = MONTHS.find((m) => m.value === filters.months[0]);
            return month?.label || 'All months';
        }
        return `${filters.months.length} months`;
    };
    // Get building construction year for minimum year calculation
    const selectedBuilding = Array.isArray(buildings)
        ? buildings.find((b) => b.id === filters.buildingId)
        : undefined;
    const buildingConstructionYear = selectedBuilding?.yearBuilt || new Date().getFullYear();
    const currentYear = new Date().getFullYear();
    // Generate year options based on show all years state
    const getYearOptions = () => {
        /**
         * If function.
         * @param showAllYears - ShowAllYears parameter.
         */ /**
        * If function.
        * @param showAllYears - ShowAllYears parameter.
        */
        if (showAllYears) {
            // Show all years from building construction year to 25 years forward
            const startYear = buildingConstructionYear;
            const endYear = currentYear + 25;
            const totalYears = endYear - startYear + 1;
            return Array.from({ length: totalYears }, (_, i) => startYear + i);
        }
        else {
            // Show current year Â±3 years
            const startYear = currentYear - 3;
            const endYear = currentYear + 3;
            const totalYears = endYear - startYear + 1;
            return Array.from({ length: totalYears }, (_, i) => startYear + i);
        }
    };
    // Show loading state while buildings are loading
    if (buildingsLoading) {
        return ((0, jsx_runtime_1.jsxs)("div", { className: 'flex-1 flex flex-col overflow-hidden', children: [(0, jsx_runtime_1.jsx)(header_1.Header, { title: 'Bills Management', subtitle: 'Manage building expenses and revenue tracking' }), (0, jsx_runtime_1.jsx)("div", { className: 'flex-1 flex items-center justify-center', children: (0, jsx_runtime_1.jsxs)("div", { className: 'text-center', children: [(0, jsx_runtime_1.jsx)("div", { className: 'animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto mb-4' }), (0, jsx_runtime_1.jsx)("p", { className: 'text-gray-500', children: "Loading buildings..." })] }) })] }));
    }
    // Show error state if buildings failed to load
    if (buildingsError) {
        return ((0, jsx_runtime_1.jsxs)("div", { className: 'flex-1 flex flex-col overflow-hidden', children: [(0, jsx_runtime_1.jsx)(header_1.Header, { title: 'Bills Management', subtitle: 'Manage building expenses and revenue tracking' }), (0, jsx_runtime_1.jsx)("div", { className: 'flex-1 flex items-center justify-center', children: (0, jsx_runtime_1.jsxs)("div", { className: 'text-center', children: [(0, jsx_runtime_1.jsx)("p", { className: 'text-red-500 mb-4', children: "Failed to load buildings" }), (0, jsx_runtime_1.jsx)("button", { onClick: () => window.location.reload(), className: 'px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700', children: "Retry" })] }) })] }));
    }
    return ((0, jsx_runtime_1.jsxs)("div", { className: 'flex-1 flex flex-col overflow-hidden', children: [(0, jsx_runtime_1.jsx)(header_1.Header, { title: 'Bills Management', subtitle: 'Manage building expenses and revenue tracking' }), (0, jsx_runtime_1.jsx)("div", { className: 'flex-1 overflow-auto p-6', children: (0, jsx_runtime_1.jsxs)("div", { className: 'max-w-7xl mx-auto space-y-6', children: [(0, jsx_runtime_1.jsxs)(card_1.Card, { children: [(0, jsx_runtime_1.jsx)(card_1.CardHeader, { children: (0, jsx_runtime_1.jsxs)(card_1.CardTitle, { className: 'flex items-center gap-2', children: [(0, jsx_runtime_1.jsx)(lucide_react_1.Filter, { className: 'w-5 h-5' }), "Filters"] }) }), (0, jsx_runtime_1.jsx)(card_1.CardContent, { children: (0, jsx_runtime_1.jsxs)("div", { className: 'grid grid-cols-1 md:grid-cols-5 gap-4', children: [(0, jsx_runtime_1.jsxs)("div", { className: 'space-y-2', children: [(0, jsx_runtime_1.jsxs)(label_1.Label, { htmlFor: 'building-filter', className: 'flex items-center gap-2', children: [(0, jsx_runtime_1.jsx)(lucide_react_1.Building, { className: 'w-4 h-4' }), "Building"] }), (0, jsx_runtime_1.jsxs)(select_1.Select, { value: filters.buildingId, onValueChange: (value) => handleFilterChange('buildingId', value), children: [(0, jsx_runtime_1.jsx)(select_1.SelectTrigger, { id: 'building-filter', children: (0, jsx_runtime_1.jsx)(select_1.SelectValue, { placeholder: 'Select building' }) }), (0, jsx_runtime_1.jsx)(select_1.SelectContent, { children: Array.isArray(buildings) &&
                                                                    buildings.map((building) => ((0, jsx_runtime_1.jsx)(select_1.SelectItem, { value: building.id, children: building.name }, building.id))) })] })] }), (0, jsx_runtime_1.jsxs)("div", { className: 'space-y-2', children: [(0, jsx_runtime_1.jsxs)(label_1.Label, { htmlFor: 'category-filter', className: 'flex items-center gap-2', children: [(0, jsx_runtime_1.jsx)(lucide_react_1.Tag, { className: 'w-4 h-4' }), "Category"] }), (0, jsx_runtime_1.jsxs)(select_1.Select, { value: filters.category, onValueChange: (value) => handleFilterChange('category', value), children: [(0, jsx_runtime_1.jsx)(select_1.SelectTrigger, { id: 'category-filter', children: (0, jsx_runtime_1.jsx)(select_1.SelectValue, { placeholder: 'All categories' }) }), (0, jsx_runtime_1.jsxs)(select_1.SelectContent, { children: [(0, jsx_runtime_1.jsx)(select_1.SelectItem, { value: 'all', children: "All categories" }), BILL_CATEGORIES.map((category) => ((0, jsx_runtime_1.jsx)(select_1.SelectItem, { value: category, children: CATEGORY_LABELS[category] }, category)))] })] })] }), (0, jsx_runtime_1.jsxs)("div", { className: 'space-y-2', children: [(0, jsx_runtime_1.jsxs)(label_1.Label, { htmlFor: 'year-filter', className: 'flex items-center gap-2', children: [(0, jsx_runtime_1.jsx)(lucide_react_1.Calendar, { className: 'w-4 h-4' }), "Year"] }), (0, jsx_runtime_1.jsx)("div", { className: 'space-y-2', children: (0, jsx_runtime_1.jsxs)(select_1.Select, { value: filters.year, onValueChange: (value) => handleFilterChange('year', value), children: [(0, jsx_runtime_1.jsx)(select_1.SelectTrigger, { id: 'year-filter', children: (0, jsx_runtime_1.jsx)(select_1.SelectValue, {}) }), (0, jsx_runtime_1.jsxs)(select_1.SelectContent, { className: 'max-h-[300px] overflow-y-auto', children: [getYearOptions().map((year) => ((0, jsx_runtime_1.jsxs)(select_1.SelectItem, { value: year.toString(), children: [year, year === currentYear && ((0, jsx_runtime_1.jsx)("span", { className: 'ml-2 text-xs text-blue-500', children: "(Current)" }))] }, year))), !showAllYears && ((0, jsx_runtime_1.jsx)("div", { className: 'border-t border-gray-200 mt-2 pt-2', children: (0, jsx_runtime_1.jsxs)(button_1.Button, { variant: 'ghost', size: 'sm', className: 'w-full text-left justify-start text-xs', onClick: () => setShowAllYears(true), children: ["Show more years (", buildingConstructionYear, " - ", currentYear + 25, ")"] }) })), showAllYears && ((0, jsx_runtime_1.jsx)("div", { className: 'border-t border-gray-200 mt-2 pt-2', children: (0, jsx_runtime_1.jsxs)(button_1.Button, { variant: 'ghost', size: 'sm', className: 'w-full text-left justify-start text-xs', onClick: () => setShowAllYears(false), children: ["Show fewer years (", currentYear - 3, " - ", currentYear + 3, ")"] }) }))] })] }) })] }), (0, jsx_runtime_1.jsxs)("div", { className: 'space-y-2', children: [(0, jsx_runtime_1.jsxs)(label_1.Label, { className: 'flex items-center gap-2', children: [(0, jsx_runtime_1.jsx)(lucide_react_1.Calendar, { className: 'w-4 h-4' }), "Months"] }), (0, jsx_runtime_1.jsxs)(popover_1.Popover, { children: [(0, jsx_runtime_1.jsx)(popover_1.PopoverTrigger, { asChild: true, children: (0, jsx_runtime_1.jsxs)(button_1.Button, { variant: 'outline', className: (0, utils_1.cn)('w-full justify-between', filters.months.length === 0 && 'text-muted-foreground'), children: [getMonthsDisplayText(), (0, jsx_runtime_1.jsx)(lucide_react_1.ChevronDown, { className: 'ml-2 h-4 w-4 shrink-0 opacity-50' })] }) }), (0, jsx_runtime_1.jsxs)(popover_1.PopoverContent, { className: 'w-64 p-0', align: 'start', children: [(0, jsx_runtime_1.jsx)("div", { className: 'border-b p-3', children: (0, jsx_runtime_1.jsxs)("div", { className: 'flex items-center space-x-2', children: [(0, jsx_runtime_1.jsx)(checkbox_1.Checkbox, { id: 'all-months', checked: filters.months.length === MONTHS.length, onCheckedChange: handleAllMonthsToggle }), (0, jsx_runtime_1.jsx)(label_1.Label, { htmlFor: 'all-months', className: 'text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70', children: "All Months" })] }) }), (0, jsx_runtime_1.jsx)("div", { className: 'grid grid-cols-2 gap-2 p-3', children: MONTHS.map((month) => ((0, jsx_runtime_1.jsxs)("div", { className: 'flex items-center space-x-2', children: [(0, jsx_runtime_1.jsx)(checkbox_1.Checkbox, { id: `month-${month.value}`, checked: filters.months.includes(month.value), onCheckedChange: () => handleMonthToggle(month.value) }), (0, jsx_runtime_1.jsx)(label_1.Label, { htmlFor: `month-${month.value}`, className: 'text-sm leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70', children: month.label })] }, month.value))) })] })] })] }), (0, jsx_runtime_1.jsxs)("div", { className: 'space-y-2', children: [(0, jsx_runtime_1.jsx)(label_1.Label, { className: 'invisible', children: "Actions" }), (0, jsx_runtime_1.jsxs)(dialog_1.Dialog, { open: showCreateDialog, onOpenChange: setShowCreateDialog, children: [(0, jsx_runtime_1.jsx)(dialog_1.DialogTrigger, { asChild: true, children: (0, jsx_runtime_1.jsxs)(button_1.Button, { className: 'w-full', disabled: !filters.buildingId, children: [(0, jsx_runtime_1.jsx)(lucide_react_1.Plus, { className: 'w-4 h-4 mr-2' }), "Create Bill"] }) }), (0, jsx_runtime_1.jsxs)(dialog_1.DialogContent, { className: 'max-w-4xl max-h-[90vh] overflow-y-auto', children: [(0, jsx_runtime_1.jsx)(dialog_1.DialogHeader, { children: (0, jsx_runtime_1.jsx)(dialog_1.DialogTitle, { children: "Create New Bill" }) }), (0, jsx_runtime_1.jsx)(BillCreateForm_1.BillCreateForm, { buildingId: filters.buildingId, onClose: () => setShowCreateDialog(false), onSuccess: () => {
                                                                            setShowCreateDialog(false);
                                                                            queryClient.invalidateQueries({ queryKey: ['/api/bills'] });
                                                                        } })] })] })] })] }) })] }), !filters.buildingId ? ((0, jsx_runtime_1.jsx)(BuildingSelectionGrid_1.BuildingSelectionGrid, { buildings: Array.isArray(buildings) ? buildings : [], onBuildingSelect: (buildingId) => handleFilterChange('buildingId', buildingId) })) : isLoading ? ((0, jsx_runtime_1.jsx)(card_1.Card, { children: (0, jsx_runtime_1.jsxs)(card_1.CardContent, { className: 'p-8 text-center', children: [(0, jsx_runtime_1.jsx)("div", { className: 'animate-spin w-8 h-8 border-4 border-primary border-t-transparent rounded-full mx-auto mb-4' }), (0, jsx_runtime_1.jsx)("p", { className: 'text-gray-500', children: "Loading bills..." })] }) })) : Object.keys(billsByCategory).length === 0 ? ((0, jsx_runtime_1.jsx)(card_1.Card, { children: (0, jsx_runtime_1.jsxs)(card_1.CardContent, { className: 'p-8 text-center', children: [(0, jsx_runtime_1.jsx)(lucide_react_1.FileText, { className: 'w-16 h-16 mx-auto text-gray-400 mb-4' }), (0, jsx_runtime_1.jsx)("h3", { className: 'text-lg font-semibold text-gray-600 mb-2', children: "No Bills Found" }), (0, jsx_runtime_1.jsx)("p", { className: 'text-gray-500 mb-4', children: "No bills found for the selected filters. Create your first bill to get started." }), (0, jsx_runtime_1.jsxs)(button_1.Button, { onClick: () => setShowCreateDialog(true), children: [(0, jsx_runtime_1.jsx)(lucide_react_1.Plus, { className: 'w-4 h-4 mr-2' }), "Create First Bill"] })] }) })) : ((0, jsx_runtime_1.jsx)("div", { className: 'space-y-6', children: BILL_CATEGORIES.filter((category) => (!filters.category || filters.category === category) &&
                                billsByCategory[category]?.length > 0).map((category) => ((0, jsx_runtime_1.jsx)(BillCategorySection, { category: category, bills: billsByCategory[category] || [], onBillUpdate: () => queryClient.invalidateQueries({ queryKey: ['/api/bills'] }) }, category))) }))] }) })] }));
}
// Component for displaying bills in a category
/**
 *
 * @param root0
 * @param root0.category
 * @param root0.bills
 * @param root0.onBillUpdate
 */
/**
 * BillCategorySection function.
 * @param root0
 * @param root0.category
 * @param root0.bills
 * @param root0.onBillUpdate
 * @returns Function result.
 */
function BillCategorySection({ category, bills, onBillUpdate, }) {
    return ((0, jsx_runtime_1.jsxs)(card_1.Card, { children: [(0, jsx_runtime_1.jsx)(card_1.CardHeader, { children: (0, jsx_runtime_1.jsx)(card_1.CardTitle, { className: 'flex items-center justify-between', children: (0, jsx_runtime_1.jsxs)("div", { className: 'flex items-center gap-2', children: [(0, jsx_runtime_1.jsx)(lucide_react_1.Tag, { className: 'w-5 h-5' }), CATEGORY_LABELS[category], (0, jsx_runtime_1.jsx)(badge_1.Badge, { variant: 'secondary', children: bills.length })] }) }) }), (0, jsx_runtime_1.jsx)(card_1.CardContent, { children: (0, jsx_runtime_1.jsx)("div", { className: 'grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4', children: bills.map((bill) => ((0, jsx_runtime_1.jsx)(BillCard, { bill: bill, onUpdate: onBillUpdate }, bill.id))) }) })] }));
}
// Component for individual bill cards
/**
 *
 * @param root0
 * @param root0.bill
 * @param root0.onUpdate
 */
/**
 * BillCard function.
 * @param root0
 * @param root0.bill
 * @param root0.onUpdate
 * @returns Function result.
 */
function BillCard({ bill, onUpdate }) {
    const [showDetailDialog, setShowDetailDialog] = (0, react_1.useState)(false);
    const statusColors = {
        draft: 'bg-gray-100 text-gray-800',
        sent: 'bg-blue-100 text-blue-800',
        overdue: 'bg-red-100 text-red-800',
        paid: 'bg-green-100 text-green-800',
        cancelled: 'bg-gray-100 text-gray-800',
    };
    return ((0, jsx_runtime_1.jsxs)(jsx_runtime_1.Fragment, { children: [(0, jsx_runtime_1.jsx)(card_1.Card, { className: 'hover:shadow-md transition-shadow cursor-pointer', onClick: () => setShowDetailDialog(true), children: (0, jsx_runtime_1.jsx)(card_1.CardContent, { className: 'p-4', children: (0, jsx_runtime_1.jsxs)("div", { className: 'space-y-3', children: [(0, jsx_runtime_1.jsxs)("div", { className: 'flex items-start justify-between', children: [(0, jsx_runtime_1.jsxs)("div", { children: [(0, jsx_runtime_1.jsx)("h4", { className: 'font-semibold text-sm', children: bill.title }), (0, jsx_runtime_1.jsxs)("p", { className: 'text-xs text-gray-500', children: ["#", bill.billNumber] })] }), (0, jsx_runtime_1.jsx)(badge_1.Badge, { className: statusColors[bill.status], children: bill.status })] }), bill.description && ((0, jsx_runtime_1.jsx)("p", { className: 'text-sm text-gray-600 line-clamp-2', children: bill.description })), (0, jsx_runtime_1.jsxs)("div", { className: 'flex items-center justify-between text-sm', children: [(0, jsx_runtime_1.jsxs)("span", { className: 'font-medium', children: ["$", Number(bill.totalAmount).toLocaleString()] }), (0, jsx_runtime_1.jsx)("span", { className: 'text-gray-500', children: bill.paymentType })] }), bill.vendor && (0, jsx_runtime_1.jsxs)("p", { className: 'text-xs text-gray-500', children: ["Vendor: ", bill.vendor] }), (0, jsx_runtime_1.jsxs)("div", { className: 'flex items-center gap-2 pt-2', children: [bill.documentPath && ((0, jsx_runtime_1.jsxs)(badge_1.Badge, { variant: 'outline', className: 'text-xs', children: [(0, jsx_runtime_1.jsx)(lucide_react_1.FileText, { className: 'w-3 h-3 mr-1' }), "Document"] })), bill.isAiAnalyzed && ((0, jsx_runtime_1.jsx)(badge_1.Badge, { variant: 'outline', className: 'text-xs', children: "AI Analyzed" })), bill.notes?.includes('Auto-generated from:') && ((0, jsx_runtime_1.jsx)(badge_1.Badge, { variant: 'outline', className: 'text-xs', children: "Auto-Generated" }))] })] }) }) }), (0, jsx_runtime_1.jsx)(dialog_1.Dialog, { open: showDetailDialog, onOpenChange: setShowDetailDialog, children: (0, jsx_runtime_1.jsxs)(dialog_1.DialogContent, { className: 'max-w-2xl max-h-[90vh] overflow-y-auto', children: [(0, jsx_runtime_1.jsx)(dialog_1.DialogHeader, { children: (0, jsx_runtime_1.jsx)(dialog_1.DialogTitle, { children: "Bill Details" }) }), (0, jsx_runtime_1.jsx)(BillDetail, { bill: bill, onSuccess: () => {
                                setShowDetailDialog(false);
                                onUpdate();
                            }, onCancel: () => setShowDetailDialog(false) })] }) })] }));
}
// Bill detail and edit form
/**
 *
 * @param root0
 * @param root0.bill
 * @param root0.onSuccess
 * @param root0.onCancel
 */
/**
 * BillDetail function.
 * @param root0
 * @param root0.bill
 * @param root0.onSuccess
 * @param root0.onCancel
 * @returns Function result.
 */
function BillDetail({ bill, onSuccess, onCancel, }) {
    const [isEditing, setIsEditing] = (0, react_1.useState)(false);
    const [endDate, setEndDate] = (0, react_1.useState)(bill.endDate || '');
    const [uploadedFile, setUploadedFile] = (0, react_1.useState)(null);
    const [isAnalyzing, setIsAnalyzing] = (0, react_1.useState)(false);
    const queryClient = (0, react_query_1.useQueryClient)();
    const updateBillMutation = (0, react_query_1.useMutation)({
        mutationFn: async (updates) => {
            const response = await fetch(`/api/bills/${bill.id}`, {
                method: 'PATCH',
                headers: {
                    'Content-Type': 'application/json',
                },
                credentials: 'include',
                body: JSON.stringify(updates),
            });
            if (!response.ok) {
                throw new Error('Failed to update bill');
            }
            return response.json();
        },
        onSuccess: () => {
            queryClient.invalidateQueries({ queryKey: ['/api/bills'] });
            onSuccess();
        },
    });
    const handleSetEndDate = () => {
        /**
         * If function.
         * @param endDate - EndDate parameter.
         */ /**
        * If function.
        * @param endDate - EndDate parameter.
        */
        if (endDate) {
            updateBillMutation.mutate({ endDate });
        }
    };
    const uploadDocumentMutation = (0, react_query_1.useMutation)({
        mutationFn: async (file) => {
            const formData = new FormData();
            formData.append('document', file);
            const response = await fetch(`/api/bills/${bill.id}/upload-document`, {
                method: 'POST',
                credentials: 'include',
                body: formData,
            });
            if (!response.ok) {
                throw new Error('Failed to upload document');
            }
            return response.json();
        },
        onSuccess: (_data) => {
            queryClient.invalidateQueries({ queryKey: ['/api/bills'] });
            setUploadedFile(null);
            onSuccess();
        },
    });
    const applyAiAnalysisMutation = (0, react_query_1.useMutation)({
        mutationFn: async () => {
            const response = await fetch(`/api/bills/${bill.id}/apply-ai-analysis`, {
                method: 'POST',
                credentials: 'include',
                headers: {
                    'Content-Type': 'application/json',
                },
            });
            if (!response.ok) {
                throw new Error('Failed to apply AI analysis');
            }
            return response.json();
        },
        onSuccess: () => {
            queryClient.invalidateQueries({ queryKey: ['/api/bills'] });
            onSuccess();
        },
    });
    const handleFileUpload = (event) => {
        const file = event.target.files?.[0]; /**
         * If function.
         * @param file - File parameter.
         */ /**
        * If function.
        * @param file - File parameter.
        */
        if (file) {
            setUploadedFile(file);
            setIsAnalyzing(true);
            uploadDocumentMutation.mutate(file);
        }
    };
    const handleApplyAiAnalysis = () => {
        applyAiAnalysisMutation.mutate();
    };
    return ((0, jsx_runtime_1.jsxs)("div", { className: 'space-y-6', children: [(0, jsx_runtime_1.jsxs)("div", { className: 'grid grid-cols-2 gap-4', children: [(0, jsx_runtime_1.jsxs)("div", { children: [(0, jsx_runtime_1.jsx)(label_1.Label, { className: 'text-sm font-medium', children: "Bill Number" }), (0, jsx_runtime_1.jsx)("p", { className: 'text-sm text-gray-600', children: bill.billNumber })] }), (0, jsx_runtime_1.jsxs)("div", { children: [(0, jsx_runtime_1.jsx)(label_1.Label, { className: 'text-sm font-medium', children: "Status" }), (0, jsx_runtime_1.jsx)("p", { className: 'text-sm text-gray-600 capitalize', children: bill.status })] }), (0, jsx_runtime_1.jsxs)("div", { children: [(0, jsx_runtime_1.jsx)(label_1.Label, { className: 'text-sm font-medium', children: "Category" }), (0, jsx_runtime_1.jsx)("p", { className: 'text-sm text-gray-600 capitalize', children: bill.category })] }), (0, jsx_runtime_1.jsxs)("div", { children: [(0, jsx_runtime_1.jsx)(label_1.Label, { className: 'text-sm font-medium', children: "Payment Type" }), (0, jsx_runtime_1.jsx)("p", { className: 'text-sm text-gray-600 capitalize', children: bill.paymentType })] }), (0, jsx_runtime_1.jsxs)("div", { children: [(0, jsx_runtime_1.jsx)(label_1.Label, { className: 'text-sm font-medium', children: "Total Amount" }), (0, jsx_runtime_1.jsxs)("p", { className: 'text-sm text-gray-600', children: ["$", Number(bill.totalAmount).toLocaleString()] })] }), (0, jsx_runtime_1.jsxs)("div", { children: [(0, jsx_runtime_1.jsx)(label_1.Label, { className: 'text-sm font-medium', children: "Start Date" }), (0, jsx_runtime_1.jsx)("p", { className: 'text-sm text-gray-600', children: bill.startDate })] })] }), (0, jsx_runtime_1.jsxs)("div", { children: [(0, jsx_runtime_1.jsx)(label_1.Label, { className: 'text-sm font-medium', children: "Title" }), (0, jsx_runtime_1.jsx)("p", { className: 'text-sm text-gray-600', children: bill.title })] }), bill.description && ((0, jsx_runtime_1.jsxs)("div", { children: [(0, jsx_runtime_1.jsx)(label_1.Label, { className: 'text-sm font-medium', children: "Description" }), (0, jsx_runtime_1.jsx)("p", { className: 'text-sm text-gray-600', children: bill.description })] })), bill.vendor && ((0, jsx_runtime_1.jsxs)("div", { children: [(0, jsx_runtime_1.jsx)(label_1.Label, { className: 'text-sm font-medium', children: "Vendor" }), (0, jsx_runtime_1.jsx)("p", { className: 'text-sm text-gray-600', children: bill.vendor })] })), bill.notes && ((0, jsx_runtime_1.jsxs)("div", { children: [(0, jsx_runtime_1.jsx)(label_1.Label, { className: 'text-sm font-medium', children: "Notes" }), (0, jsx_runtime_1.jsx)("p", { className: 'text-sm text-gray-600', children: bill.notes })] })), bill.paymentType === 'recurrent' && ((0, jsx_runtime_1.jsxs)("div", { className: 'border-t pt-4', children: [(0, jsx_runtime_1.jsx)(label_1.Label, { className: 'text-sm font-medium', children: "Recurrence End Date" }), (0, jsx_runtime_1.jsxs)("div", { className: 'flex items-center gap-2 mt-2', children: [(0, jsx_runtime_1.jsx)(input_1.Input, { type: 'date', value: endDate, onChange: (e) => setEndDate(e.target.value), className: 'w-48' }), (0, jsx_runtime_1.jsx)(button_1.Button, { onClick: handleSetEndDate, disabled: updateBillMutation.isPending, size: 'sm', children: updateBillMutation.isPending ? 'Setting...' : 'Set End Date' })] }), (0, jsx_runtime_1.jsx)("p", { className: 'text-xs text-gray-500 mt-1', children: "Setting an end date will stop auto-generation of future bills after this date." })] })), bill.costs && bill.costs.length > 1 && ((0, jsx_runtime_1.jsxs)("div", { children: [(0, jsx_runtime_1.jsx)(label_1.Label, { className: 'text-sm font-medium', children: "Payment Breakdown" }), (0, jsx_runtime_1.jsx)("div", { className: 'space-y-1 mt-1', children: bill.costs.map((cost, index) => ((0, jsx_runtime_1.jsxs)("div", { className: 'flex justify-between text-sm', children: [(0, jsx_runtime_1.jsxs)("span", { children: ["Payment ", index + 1, ":"] }), (0, jsx_runtime_1.jsxs)("span", { children: ["$", Number(cost).toLocaleString()] })] }, index))) })] })), (0, jsx_runtime_1.jsxs)("div", { className: 'border-t pt-4', children: [(0, jsx_runtime_1.jsx)(label_1.Label, { className: 'text-sm font-medium', children: "Document Upload & AI Analysis" }), (0, jsx_runtime_1.jsxs)("div", { className: 'mt-2 space-y-3', children: [bill.documentPath && ((0, jsx_runtime_1.jsxs)("div", { className: 'flex items-center gap-2 p-3 bg-gray-50 rounded-lg', children: [(0, jsx_runtime_1.jsx)(lucide_react_1.FileText, { className: 'w-4 h-4 text-blue-600' }), (0, jsx_runtime_1.jsx)("span", { className: 'text-sm', children: bill.documentName }), bill.isAiAnalyzed && ((0, jsx_runtime_1.jsx)(badge_1.Badge, { variant: 'outline', className: 'text-xs', children: "AI Analyzed" }))] })), (0, jsx_runtime_1.jsxs)("div", { className: 'flex items-center gap-2', children: [(0, jsx_runtime_1.jsx)(input_1.Input, { type: 'file', accept: 'image/*,.pdf', onChange: handleFileUpload, disabled: uploadDocumentMutation.isPending, className: 'flex-1' }), uploadDocumentMutation.isPending && ((0, jsx_runtime_1.jsx)("div", { className: 'text-sm text-gray-500', children: "Uploading & analyzing..." }))] }), bill.isAiAnalyzed && bill.aiAnalysisData && ((0, jsx_runtime_1.jsxs)("div", { className: 'space-y-2', children: [(0, jsx_runtime_1.jsxs)("div", { className: 'p-3 bg-blue-50 rounded-lg', children: [(0, jsx_runtime_1.jsx)("div", { className: 'text-sm font-medium text-blue-800', children: "AI Analysis Available" }), (0, jsx_runtime_1.jsxs)("div", { className: 'text-xs text-blue-600 mt-1', children: ["Confidence: ", (bill.aiAnalysisData.confidence * 100).toFixed(1), "%"] })] }), (0, jsx_runtime_1.jsx)(button_1.Button, { onClick: handleApplyAiAnalysis, disabled: applyAiAnalysisMutation.isPending, variant: 'outline', size: 'sm', className: 'w-full', children: applyAiAnalysisMutation.isPending ? 'Applying...' : 'Apply AI Analysis to Form' })] }))] })] }), (0, jsx_runtime_1.jsx)("div", { className: 'border-t pt-4', children: (0, jsx_runtime_1.jsxs)("div", { className: 'flex items-center justify-between', children: [(0, jsx_runtime_1.jsx)(label_1.Label, { className: 'text-sm font-medium', children: "Edit Bill Information" }), (0, jsx_runtime_1.jsx)(button_1.Button, { onClick: () => setIsEditing(!isEditing), variant: 'outline', size: 'sm', children: isEditing ? 'Cancel Edit' : 'Edit Bill' })] }) }), isEditing && ((0, jsx_runtime_1.jsx)(BillEditForm_1.BillEditForm, { bill: bill, onSuccess: () => {
                    setIsEditing(false);
                    onSuccess();
                }, onCancel: () => setIsEditing(false) })), (0, jsx_runtime_1.jsx)("div", { className: 'flex justify-end gap-2 pt-4 border-t', children: (0, jsx_runtime_1.jsx)(button_1.Button, { variant: 'outline', onClick: onCancel, children: "Close" }) })] }));
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiL2hvbWUvcnVubmVyL3dvcmtzcGFjZS9jbGllbnQvc3JjL3BhZ2VzL21hbmFnZXIvYmlsbHMudHN4IiwibWFwcGluZ3MiOiI7O0FBc0dBLHdCQXNmQzs7QUE1bEJELGlDQUE0QztBQUM1Qyx1REFBb0Q7QUFDcEQsK0NBQWdGO0FBQ2hGLGlEQUE4QztBQUM5QyxtREFBZ0Q7QUFDaEQsbURBTWdDO0FBQ2hDLGlEQUE4QztBQUM5QyxpREFBOEM7QUFDOUMsbURBTWdDO0FBRWhDLHVEQUFvRDtBQUNwRCxxREFBa0Y7QUFDbEYsK0NBU3NCO0FBQ3RCLDREQUF5RDtBQUN6RCw4RUFBMkU7QUFDM0UsZ0VBQTZEO0FBQzdELHVEQUE4RTtBQUM5RSxtREFBK0M7QUFDL0MsdUNBQWlDO0FBR2pDLE1BQU0sZUFBZSxHQUFHO0lBQ3RCLFdBQVc7SUFDWCxhQUFhO0lBQ2IsUUFBUTtJQUNSLFdBQVc7SUFDWCxVQUFVO0lBQ1YsVUFBVTtJQUNWLGFBQWE7SUFDYix1QkFBdUI7SUFDdkIsZ0JBQWdCO0lBQ2hCLFNBQVM7SUFDVCxVQUFVO0lBQ1YsT0FBTztJQUNQLE9BQU87Q0FDQyxDQUFDO0FBRVgsTUFBTSxlQUFlLEdBQTJCO0lBQzlDLFNBQVMsRUFBRSxXQUFXO0lBQ3RCLFdBQVcsRUFBRSxhQUFhO0lBQzFCLE1BQU0sRUFBRSxRQUFRO0lBQ2hCLFNBQVMsRUFBRSxXQUFXO0lBQ3RCLFFBQVEsRUFBRSxVQUFVO0lBQ3BCLFFBQVEsRUFBRSxVQUFVO0lBQ3BCLFdBQVcsRUFBRSxhQUFhO0lBQzFCLHFCQUFxQixFQUFFLHVCQUF1QjtJQUM5QyxjQUFjLEVBQUUsZ0JBQWdCO0lBQ2hDLE9BQU8sRUFBRSxTQUFTO0lBQ2xCLFFBQVEsRUFBRSxVQUFVO0lBQ3BCLEtBQUssRUFBRSxPQUFPO0lBQ2QsS0FBSyxFQUFFLE9BQU87Q0FDZixDQUFDO0FBRUYsTUFBTSxNQUFNLEdBQUc7SUFDYixFQUFFLEtBQUssRUFBRSxHQUFHLEVBQUUsS0FBSyxFQUFFLFNBQVMsRUFBRTtJQUNoQyxFQUFFLEtBQUssRUFBRSxH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L2hvbWUvcnVubmVyL3dvcmtzcGFjZS9jbGllbnQvc3JjL3BhZ2VzL21hbmFnZXIvYmlsbHMudHN4Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IHVzZVN0YXRlLCB1c2VFZmZlY3QgfSBmcm9tICdyZWFjdCc7XG5pbXBvcnQgeyBIZWFkZXIgfSBmcm9tICdAL2NvbXBvbmVudHMvbGF5b3V0L2hlYWRlcic7XG5pbXBvcnQgeyBDYXJkLCBDYXJkQ29udGVudCwgQ2FyZEhlYWRlciwgQ2FyZFRpdGxlIH0gZnJvbSAnQC9jb21wb25lbnRzL3VpL2NhcmQnO1xuaW1wb3J0IHsgQmFkZ2UgfSBmcm9tICdAL2NvbXBvbmVudHMvdWkvYmFkZ2UnO1xuaW1wb3J0IHsgQnV0dG9uIH0gZnJvbSAnQC9jb21wb25lbnRzL3VpL2J1dHRvbic7XG5pbXBvcnQge1xuICBTZWxlY3QsXG4gIFNlbGVjdENvbnRlbnQsXG4gIFNlbGVjdEl0ZW0sXG4gIFNlbGVjdFRyaWdnZXIsXG4gIFNlbGVjdFZhbHVlLFxufSBmcm9tICdAL2NvbXBvbmVudHMvdWkvc2VsZWN0JztcbmltcG9ydCB7IElucHV0IH0gZnJvbSAnQC9jb21wb25lbnRzL3VpL2lucHV0JztcbmltcG9ydCB7IExhYmVsIH0gZnJvbSAnQC9jb21wb25lbnRzL3VpL2xhYmVsJztcbmltcG9ydCB7XG4gIERpYWxvZyxcbiAgRGlhbG9nQ29udGVudCxcbiAgRGlhbG9nSGVhZGVyLFxuICBEaWFsb2dUaXRsZSxcbiAgRGlhbG9nVHJpZ2dlcixcbn0gZnJvbSAnQC9jb21wb25lbnRzL3VpL2RpYWxvZyc7XG5pbXBvcnQgeyBUYWJzLCBUYWJzQ29udGVudCwgVGFic0xpc3QsIFRhYnNUcmlnZ2VyIH0gZnJvbSAnQC9jb21wb25lbnRzL3VpL3RhYnMnO1xuaW1wb3J0IHsgQ2hlY2tib3ggfSBmcm9tICdAL2NvbXBvbmVudHMvdWkvY2hlY2tib3gnO1xuaW1wb3J0IHsgUG9wb3ZlciwgUG9wb3ZlckNvbnRlbnQsIFBvcG92ZXJUcmlnZ2VyIH0gZnJvbSAnQC9jb21wb25lbnRzL3VpL3BvcG92ZXInO1xuaW1wb3J0IHtcbiAgRmlsZVRleHQsXG4gIFBsdXMsXG4gIFVwbG9hZCxcbiAgRmlsdGVyLFxuICBDYWxlbmRhcixcbiAgQnVpbGRpbmcgYXMgQnVpbGRpbmdJY29uLFxuICBUYWcsXG4gIENoZXZyb25Eb3duLFxufSBmcm9tICdsdWNpZGUtcmVhY3QnO1xuaW1wb3J0IHsgQmlsbEVkaXRGb3JtIH0gZnJvbSAnQC9jb21wb25lbnRzL0JpbGxFZGl0Rm9ybSc7XG5pbXBvcnQgeyBCdWlsZGluZ1NlbGVjdGlvbkdyaWQgfSBmcm9tICdAL2NvbXBvbmVudHMvQnVpbGRpbmdTZWxlY3Rpb25HcmlkJztcbmltcG9ydCB7IEJpbGxDcmVhdGVGb3JtIH0gZnJvbSAnQC9jb21wb25lbnRzL0JpbGxDcmVhdGVGb3JtJztcbmltcG9ydCB7IHVzZVF1ZXJ5LCB1c2VNdXRhdGlvbiwgdXNlUXVlcnlDbGllbnQgfSBmcm9tICdAdGFuc3RhY2svcmVhY3QtcXVlcnknO1xuaW1wb3J0IHsgYXBpUmVxdWVzdCB9IGZyb20gJ0AvbGliL3F1ZXJ5Q2xpZW50JztcbmltcG9ydCB7IGNuIH0gZnJvbSAnQC9saWIvdXRpbHMnO1xuaW1wb3J0IHR5cGUgeyBCdWlsZGluZywgQmlsbCB9IGZyb20gJ0BzaGFyZWQvc2NoZW1hJztcblxuY29uc3QgQklMTF9DQVRFR09SSUVTID0gW1xuICAnaW5zdXJhbmNlJyxcbiAgJ21haW50ZW5hbmNlJyxcbiAgJ3NhbGFyeScsXG4gICd1dGlsaXRpZXMnLFxuICAnY2xlYW5pbmcnLFxuICAnc2VjdXJpdHknLFxuICAnbGFuZHNjYXBpbmcnLFxuICAncHJvZmVzc2lvbmFsX3NlcnZpY2VzJyxcbiAgJ2FkbWluaXN0cmF0aW9uJyxcbiAgJ3JlcGFpcnMnLFxuICAnc3VwcGxpZXMnLFxuICAndGF4ZXMnLFxuICAnb3RoZXInLFxuXSBhcyBjb25zdDtcblxuY29uc3QgQ0FURUdPUllfTEFCRUxTOiBSZWNvcmQ8c3RyaW5nLCBzdHJpbmc+ID0ge1xuICBpbnN1cmFuY2U6ICdJbnN1cmFuY2UnLFxuICBtYWludGVuYW5jZTogJ01haW50ZW5hbmNlJyxcbiAgc2FsYXJ5OiAnU2FsYXJ5JyxcbiAgdXRpbGl0aWVzOiAnVXRpbGl0aWVzJyxcbiAgY2xlYW5pbmc6ICdDbGVhbmluZycsXG4gIHNlY3VyaXR5OiAnU2VjdXJpdHknLFxuICBsYW5kc2NhcGluZzogJ0xhbmRzY2FwaW5nJyxcbiAgcHJvZmVzc2lvbmFsX3NlcnZpY2VzOiAnUHJvZmVzc2lvbmFsIFNlcnZpY2VzJyxcbiAgYWRtaW5pc3RyYXRpb246ICdBZG1pbmlzdHJhdGlvbicsXG4gIHJlcGFpcnM6ICdSZXBhaXJzJyxcbiAgc3VwcGxpZXM6ICdTdXBwbGllcycsXG4gIHRheGVzOiAnVGF4ZXMnLFxuICBvdGhlcjogJ090aGVyJyxcbn07XG5cbmNvbnN0IE1PTlRIUyA9IFtcbiAgeyB2YWx1ZTogJzEnLCBsYWJlbDogJ0phbnVhcnknIH0sXG4gIHsgdmFsdWU6ICcyJywgbGFiZWw6ICdGZWJydWFyeScgfSxcbiAgeyB2YWx1ZTogJzMnLCBsYWJlbDogJ01hcmNoJyB9LFxuICB7IHZhbHVlOiAnNCcsIGxhYmVsOiAnQXByaWwnIH0sXG4gIHsgdmFsdWU6ICc1JywgbGFiZWw6ICdNYXknIH0sXG4gIHsgdmFsdWU6ICc2JywgbGFiZWw6ICdKdW5lJyB9LFxuICB7IHZhbHVlOiAnNycsIGxhYmVsOiAnSnVseScgfSxcbiAgeyB2YWx1ZTogJzgnLCBsYWJlbDogJ0F1Z3VzdCcgfSxcbiAgeyB2YWx1ZTogJzknLCBsYWJlbDogJ1NlcHRlbWJlcicgfSxcbiAgeyB2YWx1ZTogJzEwJywgbGFiZWw6ICdPY3RvYmVyJyB9LFxuICB7IHZhbHVlOiAnMTEnLCBsYWJlbDogJ05vdmVtYmVyJyB9LFxuICB7IHZhbHVlOiAnMTInLCBsYWJlbDogJ0RlY2VtYmVyJyB9LFxuXTtcblxuLyoqXG4gKlxuICovXG5pbnRlcmZhY2UgQmlsbEZpbHRlcnMge1xuICBidWlsZGluZ0lkOiBzdHJpbmc7XG4gIGNhdGVnb3J5OiBzdHJpbmc7XG4gIHllYXI6IHN0cmluZztcbiAgbW9udGhzOiBzdHJpbmdbXTtcbn1cblxuLyoqXG4gKlxuICovXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiAvKipcbiAqIEJpbGxzIGZ1bmN0aW9uLlxuICovIC8qKlxuICogQmlsbHMgZnVuY3Rpb24uXG4gKi9cblxuQmlsbHMoKSB7XG4gIGNvbnN0IFtmaWx0ZXJzLCBzZXRGaWx0ZXJzXSA9IHVzZVN0YXRlPEJpbGxGaWx0ZXJzPih7XG4gICAgYnVpbGRpbmdJZDogJycsXG4gICAgY2F0ZWdvcnk6ICcnLFxuICAgIHllYXI6IG5ldyBEYXRlKCkuZ2V0RnVsbFllYXIoKS50b1N0cmluZygpLFxuICAgIG1vbnRoczogW10sXG4gIH0pO1xuICBjb25zdCBbc2hvd0NyZWF0ZURpYWxvZywgc2V0U2hvd0NyZWF0ZURpYWxvZ10gPSB1c2VTdGF0ZShmYWxzZSk7XG4gIGNvbnN0IFtzaG93QWxsWWVhcnMsIHNldFNob3dBbGxZZWFyc10gPSB1c2VTdGF0ZShmYWxzZSk7XG4gIGNvbnN0IHF1ZXJ5Q2xpZW50ID0gdXNlUXVlcnlDbGllbnQoKTtcblxuICAvLyBGZXRjaCBidWlsZGluZ3MgZm9yIGZpbHRlciBkcm9wZG93blxuICBjb25zdCB7XG4gICAgZGF0YTogYnVpbGRpbmdzID0gW10sXG4gICAgaXNMb2FkaW5nOiBidWlsZGluZ3NMb2FkaW5nLFxuICAgIGVycm9yOiBidWlsZGluZ3NFcnJvcixcbiAgfSA9IHVzZVF1ZXJ5PEJ1aWxkaW5nW10+KHtcbiAgICBxdWVyeUtleTogWycvYXBpL2J1aWxkaW5ncyddLFxuICAgIHF1ZXJ5Rm46IGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgYXBpUmVxdWVzdCgnR0VUJywgJy9hcGkvYnVpbGRpbmdzJyk7XG4gICAgICByZXR1cm4gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xuICAgIH0sXG4gIH0pO1xuXG4gIC8vIEZldGNoIGJpbGxzIGJhc2VkIG9uIGZpbHRlcnNcbiAgY29uc3QgeyBkYXRhOiBiaWxscyA9IFtdLCBpc0xvYWRpbmcgfSA9IHVzZVF1ZXJ5PEJpbGxbXT4oe1xuICAgIHF1ZXJ5S2V5OiBbJy9hcGkvYmlsbHMnLCBmaWx0ZXJzXSxcbiAgICBxdWVyeUZuOiBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBwYXJhbXMgPSBuZXcgVVJMU2VhcmNoUGFyYW1zKCk7IC8qKlxuICAgICAgICogSWYgZnVuY3Rpb24uXG4gICAgICAgKiBAcGFyYW0gZmlsdGVycy5idWlsZGluZ0lkIC0gRmlsdGVycy5idWlsZGluZ0lkIHBhcmFtZXRlci5cbiAgICAgICAqLyAvKipcbiAgICAgICAqIElmIGZ1bmN0aW9uLlxuICAgICAgICogQHBhcmFtIGZpbHRlcnMuYnVpbGRpbmdJZCAtIEZpbHRlcnMuYnVpbGRpbmdJZCBwYXJhbWV0ZXIuXG4gICAgICAgKi9cblxuICAgICAgaWYgKGZpbHRlcnMuYnVpbGRpbmdJZCkge1xuICAgICAgICBwYXJhbXMuc2V0KCdidWlsZGluZ0lkJywgZmlsdGVycy5idWlsZGluZ0lkKTtcbiAgICAgIH0gLyoqXG4gICAgICAgKiBJZiBmdW5jdGlvbi5cbiAgICAgICAqIEBwYXJhbSBmaWx0ZXJzLmNhdGVnb3J5ICYmIGZpbHRlcnMuY2F0ZWdvcnkgIT09ICdhbGwnIC0gZmlsdGVycy5jYXRlZ29yeSAmJiBmaWx0ZXJzLmNhdGVnb3J5ICE9PSAnYWxsJyBwYXJhbWV0ZXIuXG4gICAgICAgKi8gLyoqXG4gICAgICAgKiBJZiBmdW5jdGlvbi5cbiAgICAgICAqIEBwYXJhbSBmaWx0ZXJzLmNhdGVnb3J5ICYmIGZpbHRlcnMuY2F0ZWdvcnkgIT09ICdhbGwnIC0gZmlsdGVycy5jYXRlZ29yeSAmJiBmaWx0ZXJzLmNhdGVnb3J5ICE9PSAnYWxsJyBwYXJhbWV0ZXIuXG4gICAgICAgKi9cblxuICAgICAgaWYgKGZpbHRlcnMuY2F0ZWdvcnkgJiYgZmlsdGVycy5jYXRlZ29yeSAhPT0gJ2FsbCcpIHtcbiAgICAgICAgcGFyYW1zLnNldCgnY2F0ZWdvcnknLCBmaWx0ZXJzLmNhdGVnb3J5KTtcbiAgICAgIH0gLyoqXG4gICAgICAgKiBJZiBmdW5jdGlvbi5cbiAgICAgICAqIEBwYXJhbSBmaWx0ZXJzLnllYXIgLSBGaWx0ZXJzLnllYXIgcGFyYW1ldGVyLlxuICAgICAgICovIC8qKlxuICAgICAgICogSWYgZnVuY3Rpb24uXG4gICAgICAgKiBAcGFyYW0gZmlsdGVycy55ZWFyIC0gRmlsdGVycy55ZWFyIHBhcmFtZXRlci5cbiAgICAgICAqL1xuXG4gICAgICBpZiAoZmlsdGVycy55ZWFyKSB7XG4gICAgICAgIHBhcmFtcy5zZXQoJ3llYXInLCBmaWx0ZXJzLnllYXIpO1xuICAgICAgfSAvKipcbiAgICAgICAqIElmIGZ1bmN0aW9uLlxuICAgICAgICogQHBhcmFtIGZpbHRlcnMubW9udGhzLmxlbmd0aCA+IDAgLSBmaWx0ZXJzLm1vbnRocy5sZW5ndGggPiAwIHBhcmFtZXRlci5cbiAgICAgICAqLyAvKipcbiAgICAgICAqIElmIGZ1bmN0aW9uLlxuICAgICAgICogQHBhcmFtIGZpbHRlcnMubW9udGhzLmxlbmd0aCA+IDAgLSBmaWx0ZXJzLm1vbnRocy5sZW5ndGggPiAwIHBhcmFtZXRlci5cbiAgICAgICAqL1xuXG4gICAgICBpZiAoZmlsdGVycy5tb250aHMubGVuZ3RoID4gMCkge1xuICAgICAgICBwYXJhbXMuc2V0KCdtb250aHMnLCBmaWx0ZXJzLm1vbnRocy5qb2luKCcsJykpO1xuICAgICAgfVxuXG4gICAgICBjb25zdCB1cmwgPSBgL2FwaS9iaWxscyR7cGFyYW1zLnRvU3RyaW5nKCkgPyAnPycgKyBwYXJhbXMudG9TdHJpbmcoKSA6ICcnfWA7XG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKHVybCwgeyBjcmVkZW50aWFsczogJ2luY2x1ZGUnIH0pOyAvKipcbiAgICAgICAqIElmIGZ1bmN0aW9uLlxuICAgICAgICogQHBhcmFtICFyZXNwb25zZS5vayAtICFyZXNwb25zZS5vayBwYXJhbWV0ZXIuXG4gICAgICAgKi9cbiAgICAgIC8qKlxuICAgICAgICogSWYgZnVuY3Rpb24uXG4gICAgICAgKiBAcGFyYW0gIXJlc3BvbnNlLm9rIC0gIXJlc3BvbnNlLm9rIHBhcmFtZXRlci5cbiAgICAgICAqL1xuICAgICAgLyoqXG4gICAgICAgKiBJZiBmdW5jdGlvbi5cbiAgICAgICAqIEBwYXJhbSAhcmVzcG9uc2Uub2sgLSAhcmVzcG9uc2Uub2sgcGFyYW1ldGVyLlxuICAgICAgICovXG4gICAgICAvKipcbiAgICAgICAqIElmIGZ1bmN0aW9uLlxuICAgICAgICogQHBhcmFtICFyZXNwb25zZS5vayAtICFyZXNwb25zZS5vayBwYXJhbWV0ZXIuXG4gICAgICAgKi8gLyoqXG4gICAgICAgKiBJZiBmdW5jdGlvbi5cbiAgICAgICAqIEBwYXJhbSAhcmVzcG9uc2Uub2sgLSAhcmVzcG9uc2Uub2sgcGFyYW1ldGVyLlxuICAgICAgICovXG5cbiAgICAgIC8qKlxuICAgICAgICogSWYgZnVuY3Rpb24uXG4gICAgICAgKiBAcGFyYW0gIXJlc3BvbnNlLm9rIC0gIXJlc3BvbnNlLm9rIHBhcmFtZXRlci5cbiAgICAgICAqL1xuICAgICAgLyoqXG4gICAgICAgKiBJZiBmdW5jdGlvbi5cbiAgICAgICAqIEBwYXJhbSAhcmVzcG9uc2Uub2sgLSAhcmVzcG9uc2Uub2sgcGFyYW1ldGVyLlxuICAgICAgICovXG4gICAgICAvKipcbiAgICAgICAqIElmIGZ1bmN0aW9uLlxuICAgICAgICogQHBhcmFtICFyZXNwb25zZS5vayAtICFyZXNwb25zZS5vayBwYXJhbWV0ZXIuXG4gICAgICAgKi9cblxuICAgICAgaWYgKCFyZXNwb25zZS5vaykge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYEZhaWxlZCB0byBmZXRjaCBiaWxsczogJHtyZXNwb25zZS5zdGF0dXNUZXh0fWApO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gcmVzcG9uc2UuanNvbigpO1xuICAgIH0sXG4gIH0pO1xuXG4gIC8vIEdyb3VwIGJpbGxzIGJ5IGNhdGVnb3J5XG4gIGNvbnN0IGJpbGxzQnlDYXRlZ29yeSA9IGJpbGxzLnJlZHVjZSgoYWNjOiBSZWNvcmQ8c3RyaW5nLCBCaWxsW10+LCBiaWxsOiBCaWxsKSA9PiB7XG4gICAgY29uc3QgY2F0ZWdvcnkgPSBiaWxsLmNhdGVnb3J5IHx8ICdvdGhlcic7IC8qKlxuICAgICAqIElmIGZ1bmN0aW9uLlxuICAgICAqIEBwYXJhbSAhYWNjW2NhdGVnb3J5XSAtICFhY2NbY2F0ZWdvcnldIHBhcmFtZXRlci5cbiAgICAgKi8gLyoqXG4gICAgICogSWYgZnVuY3Rpb24uXG4gICAgICogQHBhcmFtICFhY2NbY2F0ZWdvcnldIC0gIWFjY1tjYXRlZ29yeV0gcGFyYW1ldGVyLlxuICAgICAqL1xuXG4gICAgaWYgKCFhY2NbY2F0ZWdvcnldKSB7XG4gICAgICBhY2NbY2F0ZWdvcnldID0gW107XG4gICAgfVxuICAgIGFjY1tjYXRlZ29yeV0ucHVzaChiaWxsKTtcbiAgICByZXR1cm4gYWNjO1xuICB9LCB7fSk7XG5cbiAgY29uc3QgaGFuZGxlRmlsdGVyQ2hhbmdlID0gKGtleToga2V5b2YgQmlsbEZpbHRlcnMsIHZhbHVlOiBzdHJpbmcgfCBzdHJpbmdbXSkgPT4ge1xuICAgIHNldEZpbHRlcnMoKHByZXYpID0+ICh7IC4uLnByZXYsIFtrZXldOiB2YWx1ZSB9KSk7XG4gIH07XG5cbiAgY29uc3QgaGFuZGxlTW9udGhUb2dnbGUgPSAobW9udGhWYWx1ZTogc3RyaW5nKSA9PiB7XG4gICAgc2V0RmlsdGVycygocHJldikgPT4gKHtcbiAgICAgIC4uLnByZXYsXG4gICAgICBtb250aHM6IHByZXYubW9udGhzLmluY2x1ZGVzKG1vbnRoVmFsdWUpXG4gICAgICAgID8gcHJldi5tb250aHMuZmlsdGVyKChtKSA9PiBtICE9PSBtb250aFZhbHVlKVxuICAgICAgICA6IFsuLi5wcmV2Lm1vbnRocywgbW9udGhWYWx1ZV0sXG4gICAgfSkpO1xuICB9O1xuXG4gIGNvbnN0IGhhbmRsZUFsbE1vbnRoc1RvZ2dsZSA9ICgpID0+IHtcbiAgICBjb25zdCBhbGxNb250aFZhbHVlcyA9IE1PTlRIUy5tYXAoKG0pID0+IG0udmFsdWUpO1xuICAgIHNldEZpbHRlcnMoKHByZXYpID0+ICh7XG4gICAgICAuLi5wcmV2LFxuICAgICAgbW9udGhzOiBwcmV2Lm1vbnRocy5sZW5ndGggPT09IGFsbE1vbnRoVmFsdWVzLmxlbmd0aCA/IFtdIDogYWxsTW9udGhWYWx1ZXMsXG4gICAgfSkpO1xuICB9O1xuXG4gIGNvbnN0IGdldE1vbnRoc0Rpc3BsYXlUZXh0ID0gKCkgPT4ge1xuICAgIC8qKlxuICAgICAqIElmIGZ1bmN0aW9uLlxuICAgICAqIEBwYXJhbSBmaWx0ZXJzLm1vbnRocy5sZW5ndGggPT09IDAgLSBmaWx0ZXJzLm1vbnRocy5sZW5ndGggPT09IDAgcGFyYW1ldGVyLlxuICAgICAqLyAvKipcbiAgICAgKiBJZiBmdW5jdGlvbi5cbiAgICAgKiBAcGFyYW0gZmlsdGVycy5tb250aHMubGVuZ3RoID09PSAwIC0gZmlsdGVycy5tb250aHMubGVuZ3RoID09PSAwIHBhcmFtZXRlci5cbiAgICAgKi9cblxuICAgIGlmIChmaWx0ZXJzLm1vbnRocy5sZW5ndGggPT09IDApIHtcbiAgICAgIHJldHVybiAnQWxsIG1vbnRocyc7XG4gICAgfSAvKipcbiAgICAgKiBJZiBmdW5jdGlvbi5cbiAgICAgKiBAcGFyYW0gZmlsdGVycy5tb250aHMubGVuZ3RoID09PSBNT05USFMubGVuZ3RoIC0gZmlsdGVycy5tb250aHMubGVuZ3RoID09PSBNT05USFMubGVuZ3RoIHBhcmFtZXRlci5cbiAgICAgKi8gLyoqXG4gICAgICogSWYgZnVuY3Rpb24uXG4gICAgICogQHBhcmFtIGZpbHRlcnMubW9udGhzLmxlbmd0aCA9PT0gTU9OVEhTLmxlbmd0aCAtIGZpbHRlcnMubW9udGhzLmxlbmd0aCA9PT0gTU9OVEhTLmxlbmd0aCBwYXJhbWV0ZXIuXG4gICAgICovXG5cbiAgICBpZiAoZmlsdGVycy5tb250aHMubGVuZ3RoID09PSBNT05USFMubGVuZ3RoKSB7XG4gICAgICByZXR1cm4gJ0FsbCBtb250aHMnO1xuICAgIH0gLyoqXG4gICAgICogSWYgZnVuY3Rpb24uXG4gICAgICogQHBhcmFtIGZpbHRlcnMubW9udGhzLmxlbmd0aCA9PT0gMSAtIGZpbHRlcnMubW9udGhzLmxlbmd0aCA9PT0gMSBwYXJhbWV0ZXIuXG4gICAgICovIC8qKlxuICAgICAqIElmIGZ1bmN0aW9uLlxuICAgICAqIEBwYXJhbSBmaWx0ZXJzLm1vbnRocy5sZW5ndGggPT09IDEgLSBmaWx0ZXJzLm1vbnRocy5sZW5ndGggPT09IDEgcGFyYW1ldGVyLlxuICAgICAqL1xuXG4gICAgaWYgKGZpbHRlcnMubW9udGhzLmxlbmd0aCA9PT0gMSkge1xuICAgICAgY29uc3QgbW9udGggPSBNT05USFMuZmluZCgobSkgPT4gbS52YWx1ZSA9PT0gZmlsdGVycy5tb250aHNbMF0pO1xuICAgICAgcmV0dXJuIG1vbnRoPy5sYWJlbCB8fCAnQWxsIG1vbnRocyc7XG4gICAgfVxuICAgIHJldHVybiBgJHtmaWx0ZXJzLm1vbnRocy5sZW5ndGh9IG1vbnRoc2A7XG4gIH07XG5cbiAgLy8gR2V0IGJ1aWxkaW5nIGNvbnN0cnVjdGlvbiB5ZWFyIGZvciBtaW5pbXVtIHllYXIgY2FsY3VsYXRpb25cbiAgY29uc3Qgc2VsZWN0ZWRCdWlsZGluZyA9IEFycmF5LmlzQXJyYXkoYnVpbGRpbmdzKVxuICAgID8gYnVpbGRpbmdzLmZpbmQoKGIpID0+IGIuaWQgPT09IGZpbHRlcnMuYnVpbGRpbmdJZClcbiAgICA6IHVuZGVmaW5lZDtcbiAgY29uc3QgYnVpbGRpbmdDb25zdHJ1Y3Rpb25ZZWFyID0gc2VsZWN0ZWRCdWlsZGluZz8ueWVhckJ1aWx0IHx8IG5ldyBEYXRlKCkuZ2V0RnVsbFllYXIoKTtcbiAgY29uc3QgY3VycmVudFllYXIgPSBuZXcgRGF0ZSgpLmdldEZ1bGxZZWFyKCk7XG5cbiAgLy8gR2VuZXJhdGUgeWVhciBvcHRpb25zIGJhc2VkIG9uIHNob3cgYWxsIHllYXJzIHN0YXRlXG4gIGNvbnN0IGdldFllYXJPcHRpb25zID0gKCkgPT4ge1xuICAgIC8qKlxuICAgICAqIElmIGZ1bmN0aW9uLlxuICAgICAqIEBwYXJhbSBzaG93QWxsWWVhcnMgLSBTaG93QWxsWWVhcnMgcGFyYW1ldGVyLlxuICAgICAqLyAvKipcbiAgICAgKiBJZiBmdW5jdGlvbi5cbiAgICAgKiBAcGFyYW0gc2hvd0FsbFllYXJzIC0gU2hvd0FsbFllYXJzIHBhcmFtZXRlci5cbiAgICAgKi9cblxuICAgIGlmIChzaG93QWxsWWVhcnMpIHtcbiAgICAgIC8vIFNob3cgYWxsIHllYXJzIGZyb20gYnVpbGRpbmcgY29uc3RydWN0aW9uIHllYXIgdG8gMjUgeWVhcnMgZm9yd2FyZFxuICAgICAgY29uc3Qgc3RhcnRZZWFyID0gYnVpbGRpbmdDb25zdHJ1Y3Rpb25ZZWFyO1xuICAgICAgY29uc3QgZW5kWWVhciA9IGN1cnJlbnRZZWFyICsgMjU7XG4gICAgICBjb25zdCB0b3RhbFllYXJzID0gZW5kWWVhciAtIHN0YXJ0WWVhciArIDE7XG4gICAgICByZXR1cm4gQXJyYXkuZnJvbSh7IGxlbmd0aDogdG90YWxZZWFycyB9LCAoXywgaSkgPT4gc3RhcnRZZWFyICsgaSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIFNob3cgY3VycmVudCB5ZWFyIMKxMyB5ZWFyc1xuICAgICAgY29uc3Qgc3RhcnRZZWFyID0gY3VycmVudFllYXIgLSAzO1xuICAgICAgY29uc3QgZW5kWWVhciA9IGN1cnJlbnRZZWFyICsgMztcbiAgICAgIGNvbnN0IHRvdGFsWWVhcnMgPSBlbmRZZWFyIC0gc3RhcnRZZWFyICsgMTtcbiAgICAgIHJldHVybiBBcnJheS5mcm9tKHsgbGVuZ3RoOiB0b3RhbFllYXJzIH0sIChfLCBpKSA9PiBzdGFydFllYXIgKyBpKTtcbiAgICB9XG4gIH07XG5cbiAgLy8gU2hvdyBsb2FkaW5nIHN0YXRlIHdoaWxlIGJ1aWxkaW5ncyBhcmUgbG9hZGluZ1xuICBpZiAoYnVpbGRpbmdzTG9hZGluZykge1xuICAgIHJldHVybiAoXG4gICAgICA8ZGl2IGNsYXNzTmFtZT0nZmxleC0xIGZsZXggZmxleC1jb2wgb3ZlcmZsb3ctaGlkZGVuJz5cbiAgICAgICAgPEhlYWRlciB0aXRsZT0nQmlsbHMgTWFuYWdlbWVudCcgc3VidGl0bGU9J01hbmFnZSBidWlsZGluZyBleHBlbnNlcyBhbmQgcmV2ZW51ZSB0cmFja2luZycgLz5cbiAgICAgICAgPGRpdiBjbGFzc05hbWU9J2ZsZXgtMSBmbGV4IGl0ZW1zLWNlbnRlciBqdXN0aWZ5LWNlbnRlcic+XG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9J3RleHQtY2VudGVyJz5cbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSdhbmltYXRlLXNwaW4gcm91bmRlZC1mdWxsIGgtOCB3LTggYm9yZGVyLWItMiBib3JkZXItYmx1ZS02MDAgbXgtYXV0byBtYi00Jz48L2Rpdj5cbiAgICAgICAgICAgIDxwIGNsYXNzTmFtZT0ndGV4dC1ncmF5LTUwMCc+TG9hZGluZyBidWlsZGluZ3MuLi48L3A+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgIDwvZGl2PlxuICAgICAgPC9kaXY+XG4gICAgKTtcbiAgfVxuXG4gIC8vIFNob3cgZXJyb3Igc3RhdGUgaWYgYnVpbGRpbmdzIGZhaWxlZCB0byBsb2FkXG4gIGlmIChidWlsZGluZ3NFcnJvcikge1xuICAgIHJldHVybiAoXG4gICAgICA8ZGl2IGNsYXNzTmFtZT0nZmxleC0xIGZsZXggZmxleC1jb2wgb3ZlcmZsb3ctaGlkZGVuJz5cbiAgICAgICAgPEhlYWRlciB0aXRsZT0nQmlsbHMgTWFuYWdlbWVudCcgc3VidGl0bGU9J01hbmFnZSBidWlsZGluZyBleHBlbnNlcyBhbmQgcmV2ZW51ZSB0cmFja2luZycgLz5cbiAgICAgICAgPGRpdiBjbGFzc05hbWU9J2ZsZXgtMSBmbGV4IGl0ZW1zLWNlbnRlciBqdXN0aWZ5LWNlbnRlcic+XG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9J3RleHQtY2VudGVyJz5cbiAgICAgICAgICAgIDxwIGNsYXNzTmFtZT0ndGV4dC1yZWQtNTAwIG1iLTQnPkZhaWxlZCB0byBsb2FkIGJ1aWxkaW5nczwvcD5cbiAgICAgICAgICAgIDxidXR0b25cbiAgICAgICAgICAgICAgb25DbGljaz17KCkgPT4gd2luZG93LmxvY2F0aW9uLnJlbG9hZCgpfVxuICAgICAgICAgICAgICBjbGFzc05hbWU9J3B4LTQgcHktMiBiZy1ibHVlLTYwMCB0ZXh0LXdoaXRlIHJvdW5kZWQgaG92ZXI6YmctYmx1ZS03MDAnXG4gICAgICAgICAgICA+XG4gICAgICAgICAgICAgIFJldHJ5XG4gICAgICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgPC9kaXY+XG4gICAgICA8L2Rpdj5cbiAgICApO1xuICB9XG5cbiAgcmV0dXJuIChcbiAgICA8ZGl2IGNsYXNzTmFtZT0nZmxleC0xIGZsZXggZmxleC1jb2wgb3ZlcmZsb3ctaGlkZGVuJz5cbiAgICAgIDxIZWFkZXIgdGl0bGU9J0JpbGxzIE1hbmFnZW1lbnQnIHN1YnRpdGxlPSdNYW5hZ2UgYnVpbGRpbmcgZXhwZW5zZXMgYW5kIHJldmVudWUgdHJhY2tpbmcnIC8+XG5cbiAgICAgIDxkaXYgY2xhc3NOYW1lPSdmbGV4LTEgb3ZlcmZsb3ctYXV0byBwLTYnPlxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT0nbWF4LXctN3hsIG14LWF1dG8gc3BhY2UteS02Jz5cbiAgICAgICAgICB7LyogRmlsdGVycyBTZWN0aW9uICovfVxuICAgICAgICAgIDxDYXJkPlxuICAgICAgICAgICAgPENhcmRIZWFkZXI+XG4gICAgICAgICAgICAgIDxDYXJkVGl0bGUgY2xhc3NOYW1lPSdmbGV4IGl0ZW1zLWNlbnRlciBnYXAtMic+XG4gICAgICAgICAgICAgICAgPEZpbHRlciBjbGFzc05hbWU9J3ctNSBoLTUnIC8+XG4gICAgICAgICAgICAgICAgRmlsdGVyc1xuICAgICAgICAgICAgICA8L0NhcmRUaXRsZT5cbiAgICAgICAgICAgIDwvQ2FyZEhlYWRlcj5cbiAgICAgICAgICAgIDxDYXJkQ29udGVudD5cbiAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9J2dyaWQgZ3JpZC1jb2xzLTEgbWQ6Z3JpZC1jb2xzLTUgZ2FwLTQnPlxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSdzcGFjZS15LTInPlxuICAgICAgICAgICAgICAgICAgPExhYmVsIGh0bWxGb3I9J2J1aWxkaW5nLWZpbHRlcicgY2xhc3NOYW1lPSdmbGV4IGl0ZW1zLWNlbnRlciBnYXAtMic+XG4gICAgICAgICAgICAgICAgICAgIDxCdWlsZGluZ0ljb24gY2xhc3NOYW1lPSd3LTQgaC00JyAvPlxuICAgICAgICAgICAgICAgICAgICBCdWlsZGluZ1xuICAgICAgICAgICAgICAgICAgPC9MYWJlbD5cbiAgICAgICAgICAgICAgICAgIDxTZWxlY3RcbiAgICAgICAgICAgICAgICAgICAgdmFsdWU9e2ZpbHRlcnMuYnVpbGRpbmdJZH1cbiAgICAgICAgICAgICAgICAgICAgb25WYWx1ZUNoYW5nZT17KHZhbHVlKSA9PiBoYW5kbGVGaWx0ZXJDaGFuZ2UoJ2J1aWxkaW5nSWQnLCB2YWx1ZSl9XG4gICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgIDxTZWxlY3RUcmlnZ2VyIGlkPSdidWlsZGluZy1maWx0ZXInPlxuICAgICAgICAgICAgICAgICAgICAgIDxTZWxlY3RWYWx1ZSBwbGFjZWhvbGRlcj0nU2VsZWN0IGJ1aWxkaW5nJyAvPlxuICAgICAgICAgICAgICAgICAgICA8L1NlbGVjdFRyaWdnZXI+XG4gICAgICAgICAgICAgICAgICAgIDxTZWxlY3RDb250ZW50PlxuICAgICAgICAgICAgICAgICAgICAgIHtBcnJheS5pc0FycmF5KGJ1aWxkaW5ncykgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgIGJ1aWxkaW5ncy5tYXAoKGJ1aWxkaW5nOiBCdWlsZGluZykgPT4gKFxuICAgICAgICAgICAgICAgICAgICAgICAgICA8U2VsZWN0SXRlbSBrZXk9e2J1aWxkaW5nLmlkfSB2YWx1ZT17YnVpbGRpbmcuaWR9PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtidWlsZGluZy5uYW1lfVxuICAgICAgICAgICAgICAgICAgICAgICAgICA8L1NlbGVjdEl0ZW0+XG4gICAgICAgICAgICAgICAgICAgICAgICApKX1cbiAgICAgICAgICAgICAgICAgICAgPC9TZWxlY3RDb250ZW50PlxuICAgICAgICAgICAgICAgICAgPC9TZWxlY3Q+XG4gICAgICAgICAgICAgICAgPC9kaXY+XG5cbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0nc3BhY2UteS0yJz5cbiAgICAgICAgICAgICAgICAgIDxMYWJlbCBodG1sRm9yPSdjYXRlZ29yeS1maWx0ZXInIGNsYXNzTmFtZT0nZmxleCBpdGVtcy1jZW50ZXIgZ2FwLTInPlxuICAgICAgICAgICAgICAgICAgICA8VGFnIGNsYXNzTmFtZT0ndy00IGgtNCcgLz5cbiAgICAgICAgICAgICAgICAgICAgQ2F0ZWdvcnlcbiAgICAgICAgICAgICAgICAgIDwvTGFiZWw+XG4gICAgICAgICAgICAgICAgICA8U2VsZWN0XG4gICAgICAgICAgICAgICAgICAgIHZhbHVlPXtmaWx0ZXJzLmNhdGVnb3J5fVxuICAgICAgICAgICAgICAgICAgICBvblZhbHVlQ2hhbmdlPXsodmFsdWUpID0+IGhhbmRsZUZpbHRlckNoYW5nZSgnY2F0ZWdvcnknLCB2YWx1ZSl9XG4gICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgIDxTZWxlY3RUcmlnZ2VyIGlkPSdjYXRlZ29yeS1maWx0ZXInPlxuICAgICAgICAgICAgICAgICAgICAgIDxTZWxlY3RWYWx1ZSBwbGFjZWhvbGRlcj0nQWxsIGNhdGVnb3JpZXMnIC8+XG4gICAgICAgICAgICAgICAgICAgIDwvU2VsZWN0VHJpZ2dlcj5cbiAgICAgICAgICAgICAgICAgICAgPFNlbGVjdENvbnRlbnQ+XG4gICAgICAgICAgICAgICAgICAgICAgPFNlbGVjdEl0ZW0gdmFsdWU9J2FsbCc+QWxsIGNhdGVnb3JpZXM8L1NlbGVjdEl0ZW0+XG4gICAgICAgICAgICAgICAgICAgICAge0JJTExfQ0FURUdPUklFUy5tYXAoKGNhdGVnb3J5KSA9PiAoXG4gICAgICAgICAgICAgICAgICAgICAgICA8U2VsZWN0SXRlbSBrZXk9e2NhdGVnb3J5fSB2YWx1ZT17Y2F0ZWdvcnl9PlxuICAgICAgICAgICAgICAgICAgICAgICAgICB7Q0FURUdPUllfTEFCRUxTW2NhdGVnb3J5XX1cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvU2VsZWN0SXRlbT5cbiAgICAgICAgICAgICAgICAgICAgICApKX1cbiAgICAgICAgICAgICAgICAgICAgPC9TZWxlY3RDb250ZW50PlxuICAgICAgICAgICAgICAgICAgPC9TZWxlY3Q+XG4gICAgICAgICAgICAgICAgPC9kaXY+XG5cbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0nc3BhY2UteS0yJz5cbiAgICAgICAgICAgICAgICAgIDxMYWJlbCBodG1sRm9yPSd5ZWFyLWZpbHRlcicgY2xhc3NOYW1lPSdmbGV4IGl0ZW1zLWNlbnRlciBnYXAtMic+XG4gICAgICAgICAgICAgICAgICAgIDxDYWxlbmRhciBjbGFzc05hbWU9J3ctNCBoLTQnIC8+XG4gICAgICAgICAgICAgICAgICAgIFllYXJcbiAgICAgICAgICAgICAgICAgIDwvTGFiZWw+XG4gICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0nc3BhY2UteS0yJz5cbiAgICAgICAgICAgICAgICAgICAgPFNlbGVjdFxuICAgICAgICAgICAgICAgICAgICAgIHZhbHVlPXtmaWx0ZXJzLnllYXJ9XG4gICAgICAgICAgICAgICAgICAgICAgb25WYWx1ZUNoYW5nZT17KHZhbHVlKSA9PiBoYW5kbGVGaWx0ZXJDaGFuZ2UoJ3llYXInLCB2YWx1ZSl9XG4gICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICA8U2VsZWN0VHJpZ2dlciBpZD0neWVhci1maWx0ZXInPlxuICAgICAgICAgICAgICAgICAgICAgICAgPFNlbGVjdFZhbHVlIC8+XG4gICAgICAgICAgICAgICAgICAgICAgPC9TZWxlY3RUcmlnZ2VyPlxuICAgICAgICAgICAgICAgICAgICAgIDxTZWxlY3RDb250ZW50IGNsYXNzTmFtZT0nbWF4LWgtWzMwMHB4XSBvdmVyZmxvdy15LWF1dG8nPlxuICAgICAgICAgICAgICAgICAgICAgICAge2dldFllYXJPcHRpb25zKCkubWFwKCh5ZWFyKSA9PiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgIDxTZWxlY3RJdGVtIGtleT17eWVhcn0gdmFsdWU9e3llYXIudG9TdHJpbmcoKX0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge3llYXJ9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge3llYXIgPT09IGN1cnJlbnRZZWFyICYmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT0nbWwtMiB0ZXh0LXhzIHRleHQtYmx1ZS01MDAnPihDdXJyZW50KTwvc3Bhbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICAgICAgICA8L1NlbGVjdEl0ZW0+XG4gICAgICAgICAgICAgICAgICAgICAgICApKX1cbiAgICAgICAgICAgICAgICAgICAgICAgIHshc2hvd0FsbFllYXJzICYmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9J2JvcmRlci10IGJvcmRlci1ncmF5LTIwMCBtdC0yIHB0LTInPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxCdXR0b25cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhcmlhbnQ9J2dob3N0J1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2l6ZT0nc20nXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9J3ctZnVsbCB0ZXh0LWxlZnQganVzdGlmeS1zdGFydCB0ZXh0LXhzJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DbGljaz17KCkgPT4gc2V0U2hvd0FsbFllYXJzKHRydWUpfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFNob3cgbW9yZSB5ZWFycyAoe2J1aWxkaW5nQ29uc3RydWN0aW9uWWVhcn0gLSB7Y3VycmVudFllYXIgKyAyNX0pXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9CdXR0b24+XG4gICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgICAgIHtzaG93QWxsWWVhcnMgJiYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0nYm9yZGVyLXQgYm9yZGVyLWdyYXktMjAwIG10LTIgcHQtMic+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPEJ1dHRvblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyaWFudD0nZ2hvc3QnXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzaXplPSdzbSdcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT0ndy1mdWxsIHRleHQtbGVmdCBqdXN0aWZ5LXN0YXJ0IHRleHQteHMnXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiBzZXRTaG93QWxsWWVhcnMoZmFsc2UpfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFNob3cgZmV3ZXIgeWVhcnMgKHtjdXJyZW50WWVhciAtIDN9IC0ge2N1cnJlbnRZZWFyICsgM30pXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9CdXR0b24+XG4gICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgICA8L1NlbGVjdENvbnRlbnQ+XG4gICAgICAgICAgICAgICAgICAgIDwvU2VsZWN0PlxuICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgPC9kaXY+XG5cbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0nc3BhY2UteS0yJz5cbiAgICAgICAgICAgICAgICAgIDxMYWJlbCBjbGFzc05hbWU9J2ZsZXggaXRlbXMtY2VudGVyIGdhcC0yJz5cbiAgICAgICAgICAgICAgICAgICAgPENhbGVuZGFyIGNsYXNzTmFtZT0ndy00IGgtNCcgLz5cbiAgICAgICAgICAgICAgICAgICAgTW9udGhzXG4gICAgICAgICAgICAgICAgICA8L0xhYmVsPlxuICAgICAgICAgICAgICAgICAgPFBvcG92ZXI+XG4gICAgICAgICAgICAgICAgICAgIDxQb3BvdmVyVHJpZ2dlciBhc0NoaWxkPlxuICAgICAgICAgICAgICAgICAgICAgIDxCdXR0b25cbiAgICAgICAgICAgICAgICAgICAgICAgIHZhcmlhbnQ9J291dGxpbmUnXG4gICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9e2NuKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAndy1mdWxsIGp1c3RpZnktYmV0d2VlbicsXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGZpbHRlcnMubW9udGhzLmxlbmd0aCA9PT0gMCAmJiAndGV4dC1tdXRlZC1mb3JlZ3JvdW5kJ1xuICAgICAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICB7Z2V0TW9udGhzRGlzcGxheVRleHQoKX1cbiAgICAgICAgICAgICAgICAgICAgICAgIDxDaGV2cm9uRG93biBjbGFzc05hbWU9J21sLTIgaC00IHctNCBzaHJpbmstMCBvcGFjaXR5LTUwJyAvPlxuICAgICAgICAgICAgICAgICAgICAgIDwvQnV0dG9uPlxuICAgICAgICAgICAgICAgICAgICA8L1BvcG92ZXJUcmlnZ2VyPlxuICAgICAgICAgICAgICAgICAgICA8UG9wb3ZlckNvbnRlbnQgY2xhc3NOYW1lPSd3LTY0IHAtMCcgYWxpZ249J3N0YXJ0Jz5cbiAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0nYm9yZGVyLWIgcC0zJz5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSdmbGV4IGl0ZW1zLWNlbnRlciBzcGFjZS14LTInPlxuICAgICAgICAgICAgICAgICAgICAgICAgICA8Q2hlY2tib3hcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZD0nYWxsLW1vbnRocydcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaGVja2VkPXtmaWx0ZXJzLm1vbnRocy5sZW5ndGggPT09IE1PTlRIUy5sZW5ndGh9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGVja2VkQ2hhbmdlPXtoYW5kbGVBbGxNb250aHNUb2dnbGV9XG4gICAgICAgICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgIDxMYWJlbFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGh0bWxGb3I9J2FsbC1tb250aHMnXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPSd0ZXh0LXNtIGZvbnQtbWVkaXVtIGxlYWRpbmctbm9uZSBwZWVyLWRpc2FibGVkOmN1cnNvci1ub3QtYWxsb3dlZCBwZWVyLWRpc2FibGVkOm9wYWNpdHktNzAnXG4gICAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBBbGwgTW9udGhzXG4gICAgICAgICAgICAgICAgICAgICAgICAgIDwvTGFiZWw+XG4gICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0nZ3JpZCBncmlkLWNvbHMtMiBnYXAtMiBwLTMnPlxuICAgICAgICAgICAgICAgICAgICAgICAge01PTlRIUy5tYXAoKG1vbnRoKSA9PiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYga2V5PXttb250aC52YWx1ZX0gY2xhc3NOYW1lPSdmbGV4IGl0ZW1zLWNlbnRlciBzcGFjZS14LTInPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxDaGVja2JveFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWQ9e2Btb250aC0ke21vbnRoLnZhbHVlfWB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaGVja2VkPXtmaWx0ZXJzLm1vbnRocy5pbmNsdWRlcyhtb250aC52YWx1ZSl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNoZWNrZWRDaGFuZ2U9eygpID0+IGhhbmRsZU1vbnRoVG9nZ2xlKG1vbnRoLnZhbHVlKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxMYWJlbFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaHRtbEZvcj17YG1vbnRoLSR7bW9udGgudmFsdWV9YH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT0ndGV4dC1zbSBsZWFkaW5nLW5vbmUgcGVlci1kaXNhYmxlZDpjdXJzb3Itbm90LWFsbG93ZWQgcGVlci1kaXNhYmxlZDpvcGFjaXR5LTcwJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHttb250aC5sYWJlbH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L0xhYmVsPlxuICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICkpfVxuICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICA8L1BvcG92ZXJDb250ZW50PlxuICAgICAgICAgICAgICAgICAgPC9Qb3BvdmVyPlxuICAgICAgICAgICAgICAgIDwvZGl2PlxuXG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9J3NwYWNlLXktMic+XG4gICAgICAgICAgICAgICAgICA8TGFiZWwgY2xhc3NOYW1lPSdpbnZpc2libGUnPkFjdGlvbnM8L0xhYmVsPlxuICAgICAgICAgICAgICAgICAgPERpYWxvZyBvcGVuPXtzaG93Q3JlYXRlRGlhbG9nfSBvbk9wZW5DaGFuZ2U9e3NldFNob3dDcmVhdGVEaWFsb2d9PlxuICAgICAgICAgICAgICAgICAgICA8RGlhbG9nVHJpZ2dlciBhc0NoaWxkPlxuICAgICAgICAgICAgICAgICAgICAgIDxCdXR0b24gY2xhc3NOYW1lPSd3LWZ1bGwnIGRpc2FibGVkPXshZmlsdGVycy5idWlsZGluZ0lkfT5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxQbHVzIGNsYXNzTmFtZT0ndy00IGgtNCBtci0yJyAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgQ3JlYXRlIEJpbGxcbiAgICAgICAgICAgICAgICAgICAgICA8L0J1dHRvbj5cbiAgICAgICAgICAgICAgICAgICAgPC9EaWFsb2dUcmlnZ2VyPlxuICAgICAgICAgICAgICAgICAgICA8RGlhbG9nQ29udGVudCBjbGFzc05hbWU9J21heC13LTR4bCBtYXgtaC1bOTB2aF0gb3ZlcmZsb3cteS1hdXRvJz5cbiAgICAgICAgICAgICAgICAgICAgICA8RGlhbG9nSGVhZGVyPlxuICAgICAgICAgICAgICAgICAgICAgICAgPERpYWxvZ1RpdGxlPkNyZWF0ZSBOZXcgQmlsbDwvRGlhbG9nVGl0bGU+XG4gICAgICAgICAgICAgICAgICAgICAgPC9EaWFsb2dIZWFkZXI+XG4gICAgICAgICAgICAgICAgICAgICAgPEJpbGxDcmVhdGVGb3JtXG4gICAgICAgICAgICAgICAgICAgICAgICBidWlsZGluZ0lkPXtmaWx0ZXJzLmJ1aWxkaW5nSWR9XG4gICAgICAgICAgICAgICAgICAgICAgICBvbkNsb3NlPXsoKSA9PiBzZXRTaG93Q3JlYXRlRGlhbG9nKGZhbHNlKX1cbiAgICAgICAgICAgICAgICAgICAgICAgIG9uU3VjY2Vzcz17KCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRTaG93Q3JlYXRlRGlhbG9nKGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgcXVlcnlDbGllbnQuaW52YWxpZGF0ZVF1ZXJpZXMoeyBxdWVyeUtleTogWycvYXBpL2JpbGxzJ10gfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgIDwvRGlhbG9nQ29udGVudD5cbiAgICAgICAgICAgICAgICAgIDwvRGlhbG9nPlxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIDwvQ2FyZENvbnRlbnQ+XG4gICAgICAgICAgPC9DYXJkPlxuXG4gICAgICAgICAgey8qIEJpbGxzIERpc3BsYXkgKi99XG4gICAgICAgICAgeyFmaWx0ZXJzLmJ1aWxkaW5nSWQgPyAoXG4gICAgICAgICAgICA8QnVpbGRpbmdTZWxlY3Rpb25HcmlkXG4gICAgICAgICAgICAgIGJ1aWxkaW5ncz17QXJyYXkuaXNBcnJheShidWlsZGluZ3MpID8gYnVpbGRpbmdzIDogW119XG4gICAgICAgICAgICAgIG9uQnVpbGRpbmdTZWxlY3Q9eyhidWlsZGluZ0lkKSA9PiBoYW5kbGVGaWx0ZXJDaGFuZ2UoJ2J1aWxkaW5nSWQnLCBidWlsZGluZ0lkKX1cbiAgICAgICAgICAgIC8+XG4gICAgICAgICAgKSA6IGlzTG9hZGluZyA/IChcbiAgICAgICAgICAgIDxDYXJkPlxuICAgICAgICAgICAgICA8Q2FyZENvbnRlbnQgY2xhc3NOYW1lPSdwLTggdGV4dC1jZW50ZXInPlxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSdhbmltYXRlLXNwaW4gdy04IGgtOCBib3JkZXItNCBib3JkZXItcHJpbWFyeSBib3JkZXItdC10cmFuc3BhcmVudCByb3VuZGVkLWZ1bGwgbXgtYXV0byBtYi00Jz48L2Rpdj5cbiAgICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9J3RleHQtZ3JheS01MDAnPkxvYWRpbmcgYmlsbHMuLi48L3A+XG4gICAgICAgICAgICAgIDwvQ2FyZENvbnRlbnQ+XG4gICAgICAgICAgICA8L0NhcmQ+XG4gICAgICAgICAgKSA6IE9iamVjdC5rZXlzKGJpbGxzQnlDYXRlZ29yeSkubGVuZ3RoID09PSAwID8gKFxuICAgICAgICAgICAgPENhcmQ+XG4gICAgICAgICAgICAgIDxDYXJkQ29udGVudCBjbGFzc05hbWU9J3AtOCB0ZXh0LWNlbnRlcic+XG4gICAgICAgICAgICAgICAgPEZpbGVUZXh0IGNsYXNzTmFtZT0ndy0xNiBoLTE2IG14LWF1dG8gdGV4dC1ncmF5LTQwMCBtYi00JyAvPlxuICAgICAgICAgICAgICAgIDxoMyBjbGFzc05hbWU9J3RleHQtbGcgZm9udC1zZW1pYm9sZCB0ZXh0LWdyYXktNjAwIG1iLTInPk5vIEJpbGxzIEZvdW5kPC9oMz5cbiAgICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9J3RleHQtZ3JheS01MDAgbWItNCc+XG4gICAgICAgICAgICAgICAgICBObyBiaWxscyBmb3VuZCBmb3IgdGhlIHNlbGVjdGVkIGZpbHRlcnMuIENyZWF0ZSB5b3VyIGZpcnN0IGJpbGwgdG8gZ2V0IHN0YXJ0ZWQuXG4gICAgICAgICAgICAgICAgPC9wPlxuICAgICAgICAgICAgICAgIDxCdXR0b24gb25DbGljaz17KCkgPT4gc2V0U2hvd0NyZWF0ZURpYWxvZyh0cnVlKX0+XG4gICAgICAgICAgICAgICAgICA8UGx1cyBjbGFzc05hbWU9J3ctNCBoLTQgbXItMicgLz5cbiAgICAgICAgICAgICAgICAgIENyZWF0ZSBGaXJzdCBCaWxsXG4gICAgICAgICAgICAgICAgPC9CdXR0b24+XG4gICAgICAgICAgICAgIDwvQ2FyZENvbnRlbnQ+XG4gICAgICAgICAgICA8L0NhcmQ+XG4gICAgICAgICAgKSA6IChcbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSdzcGFjZS15LTYnPlxuICAgICAgICAgICAgICB7QklMTF9DQVRFR09SSUVTLmZpbHRlcihcbiAgICAgICAgICAgICAgICAoY2F0ZWdvcnkpID0+XG4gICAgICAgICAgICAgICAgICAoIWZpbHRlcnMuY2F0ZWdvcnkgfHwgZmlsdGVycy5jYXRlZ29yeSA9PT0gY2F0ZWdvcnkpICYmXG4gICAgICAgICAgICAgICAgICBiaWxsc0J5Q2F0ZWdvcnlbY2F0ZWdvcnldPy5sZW5ndGggPiAwXG4gICAgICAgICAgICAgICkubWFwKChjYXRlZ29yeSkgPT4gKFxuICAgICAgICAgICAgICAgIDxCaWxsQ2F0ZWdvcnlTZWN0aW9uXG4gICAgICAgICAgICAgICAgICBrZXk9e2NhdGVnb3J5fVxuICAgICAgICAgICAgICAgICAgY2F0ZWdvcnk9e2NhdGVnb3J5fVxuICAgICAgICAgICAgICAgICAgYmlsbHM9e2JpbGxzQnlDYXRlZ29yeVtjYXRlZ29yeV0gfHwgW119XG4gICAgICAgICAgICAgICAgICBvbkJpbGxVcGRhdGU9eygpID0+IHF1ZXJ5Q2xpZW50LmludmFsaWRhdGVRdWVyaWVzKHsgcXVlcnlLZXk6IFsnL2FwaS9iaWxscyddIH0pfVxuICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICkpfVxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgKX1cbiAgICAgICAgPC9kaXY+XG4gICAgICA8L2Rpdj5cbiAgICA8L2Rpdj5cbiAgKTtcbn1cblxuLy8gQ29tcG9uZW50IGZvciBkaXNwbGF5aW5nIGJpbGxzIGluIGEgY2F0ZWdvcnlcbi8qKlxuICpcbiAqIEBwYXJhbSByb290MFxuICogQHBhcmFtIHJvb3QwLmNhdGVnb3J5XG4gKiBAcGFyYW0gcm9vdDAuYmlsbHNcbiAqIEBwYXJhbSByb290MC5vbkJpbGxVcGRhdGVcbiAqL1xuLyoqXG4gKiBCaWxsQ2F0ZWdvcnlTZWN0aW9uIGZ1bmN0aW9uLlxuICogQHBhcmFtIHJvb3QwXG4gKiBAcGFyYW0gcm9vdDAuY2F0ZWdvcnlcbiAqIEBwYXJhbSByb290MC5iaWxsc1xuICogQHBhcmFtIHJvb3QwLm9uQmlsbFVwZGF0ZVxuICogQHJldHVybnMgRnVuY3Rpb24gcmVzdWx0LlxuICovXG5mdW5jdGlvbiBCaWxsQ2F0ZWdvcnlTZWN0aW9uKHtcbiAgY2F0ZWdvcnksXG4gIGJpbGxzLFxuICBvbkJpbGxVcGRhdGUsXG59OiB7XG4gIGNhdGVnb3J5OiBzdHJpbmc7XG4gIGJpbGxzOiBCaWxsW107XG4gIG9uQmlsbFVwZGF0ZTogKCkgPT4gdm9pZDtcbn0pIHtcbiAgcmV0dXJuIChcbiAgICA8Q2FyZD5cbiAgICAgIDxDYXJkSGVhZGVyPlxuICAgICAgICA8Q2FyZFRpdGxlIGNsYXNzTmFtZT0nZmxleCBpdGVtcy1jZW50ZXIganVzdGlmeS1iZXR3ZWVuJz5cbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0nZmxleCBpdGVtcy1jZW50ZXIgZ2FwLTInPlxuICAgICAgICAgICAgPFRhZyBjbGFzc05hbWU9J3ctNSBoLTUnIC8+XG4gICAgICAgICAgICB7Q0FURUdPUllfTEFCRUxTW2NhdGVnb3J5XX1cbiAgICAgICAgICAgIDxCYWRnZSB2YXJpYW50PSdzZWNvbmRhcnknPntiaWxscy5sZW5ndGh9PC9CYWRnZT5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgPC9DYXJkVGl0bGU+XG4gICAgICA8L0NhcmRIZWFkZXI+XG4gICAgICA8Q2FyZENvbnRlbnQ+XG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPSdncmlkIGdyaWQtY29scy0xIG1kOmdyaWQtY29scy0yIGxnOmdyaWQtY29scy0zIGdhcC00Jz5cbiAgICAgICAgICB7YmlsbHMubWFwKChiaWxsKSA9PiAoXG4gICAgICAgICAgICA8QmlsbENhcmQga2V5PXtiaWxsLmlkfSBiaWxsPXtiaWxsfSBvblVwZGF0ZT17b25CaWxsVXBkYXRlfSAvPlxuICAgICAgICAgICkpfVxuICAgICAgICA8L2Rpdj5cbiAgICAgIDwvQ2FyZENvbnRlbnQ+XG4gICAgPC9DYXJkPlxuICApO1xufVxuXG4vLyBDb21wb25lbnQgZm9yIGluZGl2aWR1YWwgYmlsbCBjYXJkc1xuLyoqXG4gKlxuICogQHBhcmFtIHJvb3QwXG4gKiBAcGFyYW0gcm9vdDAuYmlsbFxuICogQHBhcmFtIHJvb3QwLm9uVXBkYXRlXG4gKi9cbi8qKlxuICogQmlsbENhcmQgZnVuY3Rpb24uXG4gKiBAcGFyYW0gcm9vdDBcbiAqIEBwYXJhbSByb290MC5iaWxsXG4gKiBAcGFyYW0gcm9vdDAub25VcGRhdGVcbiAqIEByZXR1cm5zIEZ1bmN0aW9uIHJlc3VsdC5cbiAqL1xuZnVuY3Rpb24gQmlsbENhcmQoeyBiaWxsLCBvblVwZGF0ZSB9OiB7IGJpbGw6IEJpbGw7IG9uVXBkYXRlOiAoKSA9PiB2b2lkIH0pIHtcbiAgY29uc3QgW3Nob3dEZXRhaWxEaWFsb2csIHNldFNob3dEZXRhaWxEaWFsb2ddID0gdXNlU3RhdGUoZmFsc2UpO1xuXG4gIGNvbnN0IHN0YXR1c0NvbG9ycyA9IHtcbiAgICBkcmFmdDogJ2JnLWdyYXktMTAwIHRleHQtZ3JheS04MDAnLFxuICAgIHNlbnQ6ICdiZy1ibHVlLTEwMCB0ZXh0LWJsdWUtODAwJyxcbiAgICBvdmVyZHVlOiAnYmctcmVkLTEwMCB0ZXh0LXJlZC04MDAnLFxuICAgIHBhaWQ6ICdiZy1ncmVlbi0xMDAgdGV4dC1ncmVlbi04MDAnLFxuICAgIGNhbmNlbGxlZDogJ2JnLWdyYXktMTAwIHRleHQtZ3JheS04MDAnLFxuICB9O1xuXG4gIHJldHVybiAoXG4gICAgPD5cbiAgICAgIDxDYXJkXG4gICAgICAgIGNsYXNzTmFtZT0naG92ZXI6c2hhZG93LW1kIHRyYW5zaXRpb24tc2hhZG93IGN1cnNvci1wb2ludGVyJ1xuICAgICAgICBvbkNsaWNrPXsoKSA9PiBzZXRTaG93RGV0YWlsRGlhbG9nKHRydWUpfVxuICAgICAgPlxuICAgICAgICA8Q2FyZENvbnRlbnQgY2xhc3NOYW1lPSdwLTQnPlxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSdzcGFjZS15LTMnPlxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9J2ZsZXggaXRlbXMtc3RhcnQganVzdGlmeS1iZXR3ZWVuJz5cbiAgICAgICAgICAgICAgPGRpdj5cbiAgICAgICAgICAgICAgICA8aDQgY2xhc3NOYW1lPSdmb250LXNlbWlib2xkIHRleHQtc20nPntiaWxsLnRpdGxlfTwvaDQ+XG4gICAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPSd0ZXh0LXhzIHRleHQtZ3JheS01MDAnPiN7YmlsbC5iaWxsTnVtYmVyfTwvcD5cbiAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgIDxCYWRnZSBjbGFzc05hbWU9e3N0YXR1c0NvbG9yc1tiaWxsLnN0YXR1cyBhcyBrZXlvZiB0eXBlb2Ygc3RhdHVzQ29sb3JzXX0+XG4gICAgICAgICAgICAgICAge2JpbGwuc3RhdHVzfVxuICAgICAgICAgICAgICA8L0JhZGdlPlxuICAgICAgICAgICAgPC9kaXY+XG5cbiAgICAgICAgICAgIHtiaWxsLmRlc2NyaXB0aW9uICYmIChcbiAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPSd0ZXh0LXNtIHRleHQtZ3JheS02MDAgbGluZS1jbGFtcC0yJz57YmlsbC5kZXNjcmlwdGlvbn08L3A+XG4gICAgICAgICAgICApfVxuXG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0nZmxleCBpdGVtcy1jZW50ZXIganVzdGlmeS1iZXR3ZWVuIHRleHQtc20nPlxuICAgICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9J2ZvbnQtbWVkaXVtJz4ke051bWJlcihiaWxsLnRvdGFsQW1vdW50KS50b0xvY2FsZVN0cmluZygpfTwvc3Bhbj5cbiAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPSd0ZXh0LWdyYXktNTAwJz57YmlsbC5wYXltZW50VHlwZX08L3NwYW4+XG4gICAgICAgICAgICA8L2Rpdj5cblxuICAgICAgICAgICAge2JpbGwudmVuZG9yICYmIDxwIGNsYXNzTmFtZT0ndGV4dC14cyB0ZXh0LWdyYXktNTAwJz5WZW5kb3I6IHtiaWxsLnZlbmRvcn08L3A+fVxuXG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0nZmxleCBpdGVtcy1jZW50ZXIgZ2FwLTIgcHQtMic+XG4gICAgICAgICAgICAgIHtiaWxsLmRvY3VtZW50UGF0aCAmJiAoXG4gICAgICAgICAgICAgICAgPEJhZGdlIHZhcmlhbnQ9J291dGxpbmUnIGNsYXNzTmFtZT0ndGV4dC14cyc+XG4gICAgICAgICAgICAgICAgICA8RmlsZVRleHQgY2xhc3NOYW1lPSd3LTMgaC0zIG1yLTEnIC8+XG4gICAgICAgICAgICAgICAgICBEb2N1bWVudFxuICAgICAgICAgICAgICAgIDwvQmFkZ2U+XG4gICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgIHtiaWxsLmlzQWlBbmFseXplZCAmJiAoXG4gICAgICAgICAgICAgICAgPEJhZGdlIHZhcmlhbnQ9J291dGxpbmUnIGNsYXNzTmFtZT0ndGV4dC14cyc+XG4gICAgICAgICAgICAgICAgICBBSSBBbmFseXplZFxuICAgICAgICAgICAgICAgIDwvQmFkZ2U+XG4gICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgIHtiaWxsLm5vdGVzPy5pbmNsdWRlcygnQXV0by1nZW5lcmF0ZWQgZnJvbTonKSAmJiAoXG4gICAgICAgICAgICAgICAgPEJhZGdlIHZhcmlhbnQ9J291dGxpbmUnIGNsYXNzTmFtZT0ndGV4dC14cyc+XG4gICAgICAgICAgICAgICAgICBBdXRvLUdlbmVyYXRlZFxuICAgICAgICAgICAgICAgIDwvQmFkZ2U+XG4gICAgICAgICAgICAgICl9XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgPC9DYXJkQ29udGVudD5cbiAgICAgIDwvQ2FyZD5cblxuICAgICAgey8qIEJpbGwgRGV0YWlsIERpYWxvZyAqL31cbiAgICAgIDxEaWFsb2cgb3Blbj17c2hvd0RldGFpbERpYWxvZ30gb25PcGVuQ2hhbmdlPXtzZXRTaG93RGV0YWlsRGlhbG9nfT5cbiAgICAgICAgPERpYWxvZ0NvbnRlbnQgY2xhc3NOYW1lPSdtYXgtdy0yeGwgbWF4LWgtWzkwdmhdIG92ZXJmbG93LXktYXV0byc+XG4gICAgICAgICAgPERpYWxvZ0hlYWRlcj5cbiAgICAgICAgICAgIDxEaWFsb2dUaXRsZT5CaWxsIERldGFpbHM8L0RpYWxvZ1RpdGxlPlxuICAgICAgICAgIDwvRGlhbG9nSGVhZGVyPlxuICAgICAgICAgIDxCaWxsRGV0YWlsXG4gICAgICAgICAgICBiaWxsPXtiaWxsfVxuICAgICAgICAgICAgb25TdWNjZXNzPXsoKSA9PiB7XG4gICAgICAgICAgICAgIHNldFNob3dEZXRhaWxEaWFsb2coZmFsc2UpO1xuICAgICAgICAgICAgICBvblVwZGF0ZSgpO1xuICAgICAgICAgICAgfX1cbiAgICAgICAgICAgIG9uQ2FuY2VsPXsoKSA9PiBzZXRTaG93RGV0YWlsRGlhbG9nKGZhbHNlKX1cbiAgICAgICAgICAvPlxuICAgICAgICA8L0RpYWxvZ0NvbnRlbnQ+XG4gICAgICA8L0RpYWxvZz5cbiAgICA8Lz5cbiAgKTtcbn1cblxuLy8gQmlsbCBkZXRhaWwgYW5kIGVkaXQgZm9ybVxuLyoqXG4gKlxuICogQHBhcmFtIHJvb3QwXG4gKiBAcGFyYW0gcm9vdDAuYmlsbFxuICogQHBhcmFtIHJvb3QwLm9uU3VjY2Vzc1xuICogQHBhcmFtIHJvb3QwLm9uQ2FuY2VsXG4gKi9cbi8qKlxuICogQmlsbERldGFpbCBmdW5jdGlvbi5cbiAqIEBwYXJhbSByb290MFxuICogQHBhcmFtIHJvb3QwLmJpbGxcbiAqIEBwYXJhbSByb290MC5vblN1Y2Nlc3NcbiAqIEBwYXJhbSByb290MC5vbkNhbmNlbFxuICogQHJldHVybnMgRnVuY3Rpb24gcmVzdWx0LlxuICovXG5mdW5jdGlvbiBCaWxsRGV0YWlsKHtcbiAgYmlsbCxcbiAgb25TdWNjZXNzLFxuICBvbkNhbmNlbCxcbn06IHtcbiAgYmlsbDogQmlsbDtcbiAgb25TdWNjZXNzOiAoKSA9PiB2b2lkO1xuICBvbkNhbmNlbDogKCkgPT4gdm9pZDtcbn0pIHtcbiAgY29uc3QgW2lzRWRpdGluZywgc2V0SXNFZGl0aW5nXSA9IHVzZVN0YXRlKGZhbHNlKTtcbiAgY29uc3QgW2VuZERhdGUsIHNldEVuZERhdGVdID0gdXNlU3RhdGUoYmlsbC5lbmREYXRlIHx8ICcnKTtcbiAgY29uc3QgW3VwbG9hZGVkRmlsZSwgc2V0VXBsb2FkZWRGaWxlXSA9IHVzZVN0YXRlPEZpbGUgfCBudWxsPihudWxsKTtcbiAgY29uc3QgW2lzQW5hbHl6aW5nLCBzZXRJc0FuYWx5emluZ10gPSB1c2VTdGF0ZShmYWxzZSk7XG4gIGNvbnN0IHF1ZXJ5Q2xpZW50ID0gdXNlUXVlcnlDbGllbnQoKTtcblxuICBjb25zdCB1cGRhdGVCaWxsTXV0YXRpb24gPSB1c2VNdXRhdGlvbih7XG4gICAgbXV0YXRpb25GbjogYXN5bmMgKHVwZGF0ZXM6IFBhcnRpYWw8QmlsbD4pID0+IHtcbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2goYC9hcGkvYmlsbHMvJHtiaWxsLmlkfWAsIHtcbiAgICAgICAgbWV0aG9kOiAnUEFUQ0gnLFxuICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyxcbiAgICAgICAgfSxcbiAgICAgICAgY3JlZGVudGlhbHM6ICdpbmNsdWRlJyxcbiAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkodXBkYXRlcyksXG4gICAgICB9KTtcblxuICAgICAgaWYgKCFyZXNwb25zZS5vaykge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0ZhaWxlZCB0byB1cGRhdGUgYmlsbCcpO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gcmVzcG9uc2UuanNvbigpO1xuICAgIH0sXG4gICAgb25TdWNjZXNzOiAoKSA9PiB7XG4gICAgICBxdWVyeUNsaWVudC5pbnZhbGlkYXRlUXVlcmllcyh7IHF1ZXJ5S2V5OiBbJy9hcGkvYmlsbHMnXSB9KTtcbiAgICAgIG9uU3VjY2VzcygpO1xuICAgIH0sXG4gIH0pO1xuXG4gIGNvbnN0IGhhbmRsZVNldEVuZERhdGUgPSAoKSA9PiB7XG4gICAgLyoqXG4gICAgICogSWYgZnVuY3Rpb24uXG4gICAgICogQHBhcmFtIGVuZERhdGUgLSBFbmREYXRlIHBhcmFtZXRlci5cbiAgICAgKi8gLyoqXG4gICAgICogSWYgZnVuY3Rpb24uXG4gICAgICogQHBhcmFtIGVuZERhdGUgLSBFbmREYXRlIHBhcmFtZXRlci5cbiAgICAgKi9cblxuICAgIGlmIChlbmREYXRlKSB7XG4gICAgICB1cGRhdGVCaWxsTXV0YXRpb24ubXV0YXRlKHsgZW5kRGF0ZSB9KTtcbiAgICB9XG4gIH07XG5cbiAgY29uc3QgdXBsb2FkRG9jdW1lbnRNdXRhdGlvbiA9IHVzZU11dGF0aW9uKHtcbiAgICBtdXRhdGlvbkZuOiBhc3luYyAoZmlsZTogRmlsZSkgPT4ge1xuICAgICAgY29uc3QgZm9ybURhdGEgPSBuZXcgRm9ybURhdGEoKTtcbiAgICAgIGZvcm1EYXRhLmFwcGVuZCgnZG9jdW1lbnQnLCBmaWxlKTtcblxuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaChgL2FwaS9iaWxscy8ke2JpbGwuaWR9L3VwbG9hZC1kb2N1bWVudGAsIHtcbiAgICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICAgIGNyZWRlbnRpYWxzOiAnaW5jbHVkZScsXG4gICAgICAgIGJvZHk6IGZvcm1EYXRhLFxuICAgICAgfSk7XG5cbiAgICAgIGlmICghcmVzcG9uc2Uub2spIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdGYWlsZWQgdG8gdXBsb2FkIGRvY3VtZW50Jyk7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiByZXNwb25zZS5qc29uKCk7XG4gICAgfSxcbiAgICBvblN1Y2Nlc3M6IChfZGF0YSkgPT4ge1xuICAgICAgcXVlcnlDbGllbnQuaW52YWxpZGF0ZVF1ZXJpZXMoeyBxdWVyeUtleTogWycvYXBpL2JpbGxzJ10gfSk7XG4gICAgICBzZXRVcGxvYWRlZEZpbGUobnVsbCk7XG4gICAgICBvblN1Y2Nlc3MoKTtcbiAgICB9LFxuICB9KTtcblxuICBjb25zdCBhcHBseUFpQW5hbHlzaXNNdXRhdGlvbiA9IHVzZU11dGF0aW9uKHtcbiAgICBtdXRhdGlvbkZuOiBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKGAvYXBpL2JpbGxzLyR7YmlsbC5pZH0vYXBwbHktYWktYW5hbHlzaXNgLCB7XG4gICAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgICBjcmVkZW50aWFsczogJ2luY2x1ZGUnLFxuICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyxcbiAgICAgICAgfSxcbiAgICAgIH0pO1xuXG4gICAgICBpZiAoIXJlc3BvbnNlLm9rKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignRmFpbGVkIHRvIGFwcGx5IEFJIGFuYWx5c2lzJyk7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiByZXNwb25zZS5qc29uKCk7XG4gICAgfSxcbiAgICBvblN1Y2Nlc3M6ICgpID0+IHtcbiAgICAgIHF1ZXJ5Q2xpZW50LmludmFsaWRhdGVRdWVyaWVzKHsgcXVlcnlLZXk6IFsnL2FwaS9iaWxscyddIH0pO1xuICAgICAgb25TdWNjZXNzKCk7XG4gICAgfSxcbiAgfSk7XG5cbiAgY29uc3QgaGFuZGxlRmlsZVVwbG9hZCA9IChldmVudDogUmVhY3QuQ2hhbmdlRXZlbnQ8SFRNTElucHV0RWxlbWVudD4pID0+IHtcbiAgICBjb25zdCBmaWxlID0gZXZlbnQudGFyZ2V0LmZpbGVzPy5bMF07IC8qKlxuICAgICAqIElmIGZ1bmN0aW9uLlxuICAgICAqIEBwYXJhbSBmaWxlIC0gRmlsZSBwYXJhbWV0ZXIuXG4gICAgICovIC8qKlxuICAgICAqIElmIGZ1bmN0aW9uLlxuICAgICAqIEBwYXJhbSBmaWxlIC0gRmlsZSBwYXJhbWV0ZXIuXG4gICAgICovXG5cbiAgICBpZiAoZmlsZSkge1xuICAgICAgc2V0VXBsb2FkZWRGaWxlKGZpbGUpO1xuICAgICAgc2V0SXNBbmFseXppbmcodHJ1ZSk7XG4gICAgICB1cGxvYWREb2N1bWVudE11dGF0aW9uLm11dGF0ZShmaWxlKTtcbiAgICB9XG4gIH07XG5cbiAgY29uc3QgaGFuZGxlQXBwbHlBaUFuYWx5c2lzID0gKCkgPT4ge1xuICAgIGFwcGx5QWlBbmFseXNpc011dGF0aW9uLm11dGF0ZSgpO1xuICB9O1xuXG4gIHJldHVybiAoXG4gICAgPGRpdiBjbGFzc05hbWU9J3NwYWNlLXktNic+XG4gICAgICB7LyogQmlsbCBJbmZvcm1hdGlvbiAqL31cbiAgICAgIDxkaXYgY2xhc3NOYW1lPSdncmlkIGdyaWQtY29scy0yIGdhcC00Jz5cbiAgICAgICAgPGRpdj5cbiAgICAgICAgICA8TGFiZWwgY2xhc3NOYW1lPSd0ZXh0LXNtIGZvbnQtbWVkaXVtJz5CaWxsIE51bWJlcjwvTGFiZWw+XG4gICAgICAgICAgPHAgY2xhc3NOYW1lPSd0ZXh0LXNtIHRleHQtZ3JheS02MDAnPntiaWxsLmJpbGxOdW1iZXJ9PC9wPlxuICAgICAgICA8L2Rpdj5cbiAgICAgICAgPGRpdj5cbiAgICAgICAgICA8TGFiZWwgY2xhc3NOYW1lPSd0ZXh0LXNtIGZvbnQtbWVkaXVtJz5TdGF0dXM8L0xhYmVsPlxuICAgICAgICAgIDxwIGNsYXNzTmFtZT0ndGV4dC1zbSB0ZXh0LWdyYXktNjAwIGNhcGl0YWxpemUnPntiaWxsLnN0YXR1c308L3A+XG4gICAgICAgIDwvZGl2PlxuICAgICAgICA8ZGl2PlxuICAgICAgICAgIDxMYWJlbCBjbGFzc05hbWU9J3RleHQtc20gZm9udC1tZWRpdW0nPkNhdGVnb3J5PC9MYWJlbD5cbiAgICAgICAgICA8cCBjbGFzc05hbWU9J3RleHQtc20gdGV4dC1ncmF5LTYwMCBjYXBpdGFsaXplJz57YmlsbC5jYXRlZ29yeX08L3A+XG4gICAgICAgIDwvZGl2PlxuICAgICAgICA8ZGl2PlxuICAgICAgICAgIDxMYWJlbCBjbGFzc05hbWU9J3RleHQtc20gZm9udC1tZWRpdW0nPlBheW1lbnQgVHlwZTwvTGFiZWw+XG4gICAgICAgICAgPHAgY2xhc3NOYW1lPSd0ZXh0LXNtIHRleHQtZ3JheS02MDAgY2FwaXRhbGl6ZSc+e2JpbGwucGF5bWVudFR5cGV9PC9wPlxuICAgICAgICA8L2Rpdj5cbiAgICAgICAgPGRpdj5cbiAgICAgICAgICA8TGFiZWwgY2xhc3NOYW1lPSd0ZXh0LXNtIGZvbnQtbWVkaXVtJz5Ub3RhbCBBbW91bnQ8L0xhYmVsPlxuICAgICAgICAgIDxwIGNsYXNzTmFtZT0ndGV4dC1zbSB0ZXh0LWdyYXktNjAwJz4ke051bWJlcihiaWxsLnRvdGFsQW1vdW50KS50b0xvY2FsZVN0cmluZygpfTwvcD5cbiAgICAgICAgPC9kaXY+XG4gICAgICAgIDxkaXY+XG4gICAgICAgICAgPExhYmVsIGNsYXNzTmFtZT0ndGV4dC1zbSBmb250LW1lZGl1bSc+U3RhcnQgRGF0ZTwvTGFiZWw+XG4gICAgICAgICAgPHAgY2xhc3NOYW1lPSd0ZXh0LXNtIHRleHQtZ3JheS02MDAnPntiaWxsLnN0YXJ0RGF0ZX08L3A+XG4gICAgICAgIDwvZGl2PlxuICAgICAgPC9kaXY+XG5cbiAgICAgIHsvKiBUaXRsZSBhbmQgRGVzY3JpcHRpb24gKi99XG4gICAgICA8ZGl2PlxuICAgICAgICA8TGFiZWwgY2xhc3NOYW1lPSd0ZXh0LXNtIGZvbnQtbWVkaXVtJz5UaXRsZTwvTGFiZWw+XG4gICAgICAgIDxwIGNsYXNzTmFtZT0ndGV4dC1zbSB0ZXh0LWdyYXktNjAwJz57YmlsbC50aXRsZX08L3A+XG4gICAgICA8L2Rpdj5cblxuICAgICAge2JpbGwuZGVzY3JpcHRpb24gJiYgKFxuICAgICAgICA8ZGl2PlxuICAgICAgICAgIDxMYWJlbCBjbGFzc05hbWU9J3RleHQtc20gZm9udC1tZWRpdW0nPkRlc2NyaXB0aW9uPC9MYWJlbD5cbiAgICAgICAgICA8cCBjbGFzc05hbWU9J3RleHQtc20gdGV4dC1ncmF5LTYwMCc+e2JpbGwuZGVzY3JpcHRpb259PC9wPlxuICAgICAgICA8L2Rpdj5cbiAgICAgICl9XG5cbiAgICAgIHtiaWxsLnZlbmRvciAmJiAoXG4gICAgICAgIDxkaXY+XG4gICAgICAgICAgPExhYmVsIGNsYXNzTmFtZT0ndGV4dC1zbSBmb250LW1lZGl1bSc+VmVuZG9yPC9MYWJlbD5cbiAgICAgICAgICA8cCBjbGFzc05hbWU9J3RleHQtc20gdGV4dC1ncmF5LTYwMCc+e2JpbGwudmVuZG9yfTwvcD5cbiAgICAgICAgPC9kaXY+XG4gICAgICApfVxuXG4gICAgICB7YmlsbC5ub3RlcyAmJiAoXG4gICAgICAgIDxkaXY+XG4gICAgICAgICAgPExhYmVsIGNsYXNzTmFtZT0ndGV4dC1zbSBmb250LW1lZGl1bSc+Tm90ZXM8L0xhYmVsPlxuICAgICAgICAgIDxwIGNsYXNzTmFtZT0ndGV4dC1zbSB0ZXh0LWdyYXktNjAwJz57YmlsbC5ub3Rlc308L3A+XG4gICAgICAgIDwvZGl2PlxuICAgICAgKX1cblxuICAgICAgey8qIEVuZCBEYXRlIE1hbmFnZW1lbnQgZm9yIFJlY3VycmVudCBCaWxscyAqL31cbiAgICAgIHtiaWxsLnBheW1lbnRUeXBlID09PSAncmVjdXJyZW50JyAmJiAoXG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPSdib3JkZXItdCBwdC00Jz5cbiAgICAgICAgICA8TGFiZWwgY2xhc3NOYW1lPSd0ZXh0LXNtIGZvbnQtbWVkaXVtJz5SZWN1cnJlbmNlIEVuZCBEYXRlPC9MYWJlbD5cbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0nZmxleCBpdGVtcy1jZW50ZXIgZ2FwLTIgbXQtMic+XG4gICAgICAgICAgICA8SW5wdXRcbiAgICAgICAgICAgICAgdHlwZT0nZGF0ZSdcbiAgICAgICAgICAgICAgdmFsdWU9e2VuZERhdGV9XG4gICAgICAgICAgICAgIG9uQ2hhbmdlPXsoZSkgPT4gc2V0RW5kRGF0ZShlLnRhcmdldC52YWx1ZSl9XG4gICAgICAgICAgICAgIGNsYXNzTmFtZT0ndy00OCdcbiAgICAgICAgICAgIC8+XG4gICAgICAgICAgICA8QnV0dG9uIG9uQ2xpY2s9e2hhbmRsZVNldEVuZERhdGV9IGRpc2FibGVkPXt1cGRhdGVCaWxsTXV0YXRpb24uaXNQZW5kaW5nfSBzaXplPSdzbSc+XG4gICAgICAgICAgICAgIHt1cGRhdGVCaWxsTXV0YXRpb24uaXNQZW5kaW5nID8gJ1NldHRpbmcuLi4nIDogJ1NldCBFbmQgRGF0ZSd9XG4gICAgICAgICAgICA8L0J1dHRvbj5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICA8cCBjbGFzc05hbWU9J3RleHQteHMgdGV4dC1ncmF5LTUwMCBtdC0xJz5cbiAgICAgICAgICAgIFNldHRpbmcgYW4gZW5kIGRhdGUgd2lsbCBzdG9wIGF1dG8tZ2VuZXJhdGlvbiBvZiBmdXR1cmUgYmlsbHMgYWZ0ZXIgdGhpcyBkYXRlLlxuICAgICAgICAgIDwvcD5cbiAgICAgICAgPC9kaXY+XG4gICAgICApfVxuXG4gICAgICB7LyogQ29zdHMgQnJlYWtkb3duICovfVxuICAgICAge2JpbGwuY29zdHMgJiYgYmlsbC5jb3N0cy5sZW5ndGggPiAxICYmIChcbiAgICAgICAgPGRpdj5cbiAgICAgICAgICA8TGFiZWwgY2xhc3NOYW1lPSd0ZXh0LXNtIGZvbnQtbWVkaXVtJz5QYXltZW50IEJyZWFrZG93bjwvTGFiZWw+XG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9J3NwYWNlLXktMSBtdC0xJz5cbiAgICAgICAgICAgIHtiaWxsLmNvc3RzLm1hcCgoY29zdCwgaW5kZXgpID0+IChcbiAgICAgICAgICAgICAgPGRpdiBrZXk9e2luZGV4fSBjbGFzc05hbWU9J2ZsZXgganVzdGlmeS1iZXR3ZWVuIHRleHQtc20nPlxuICAgICAgICAgICAgICAgIDxzcGFuPlBheW1lbnQge2luZGV4ICsgMX06PC9zcGFuPlxuICAgICAgICAgICAgICAgIDxzcGFuPiR7TnVtYmVyKGNvc3QpLnRvTG9jYWxlU3RyaW5nKCl9PC9zcGFuPlxuICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICkpfVxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICA8L2Rpdj5cbiAgICAgICl9XG5cbiAgICAgIHsvKiBEb2N1bWVudCBVcGxvYWQgU2VjdGlvbiAqL31cbiAgICAgIDxkaXYgY2xhc3NOYW1lPSdib3JkZXItdCBwdC00Jz5cbiAgICAgICAgPExhYmVsIGNsYXNzTmFtZT0ndGV4dC1zbSBmb250LW1lZGl1bSc+RG9jdW1lbnQgVXBsb2FkICYgQUkgQW5hbHlzaXM8L0xhYmVsPlxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT0nbXQtMiBzcGFjZS15LTMnPlxuICAgICAgICAgIHsvKiBDdXJyZW50IGRvY3VtZW50IGluZm8gKi99XG4gICAgICAgICAge2JpbGwuZG9jdW1lbnRQYXRoICYmIChcbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSdmbGV4IGl0ZW1zLWNlbnRlciBnYXAtMiBwLTMgYmctZ3JheS01MCByb3VuZGVkLWxnJz5cbiAgICAgICAgICAgICAgPEZpbGVUZXh0IGNsYXNzTmFtZT0ndy00IGgtNCB0ZXh0LWJsdWUtNjAwJyAvPlxuICAgICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9J3RleHQtc20nPntiaWxsLmRvY3VtZW50TmFtZX08L3NwYW4+XG4gICAgICAgICAgICAgIHtiaWxsLmlzQWlBbmFseXplZCAmJiAoXG4gICAgICAgICAgICAgICAgPEJhZGdlIHZhcmlhbnQ9J291dGxpbmUnIGNsYXNzTmFtZT0ndGV4dC14cyc+XG4gICAgICAgICAgICAgICAgICBBSSBBbmFseXplZFxuICAgICAgICAgICAgICAgIDwvQmFkZ2U+XG4gICAgICAgICAgICAgICl9XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICApfVxuXG4gICAgICAgICAgey8qIEZpbGUgdXBsb2FkICovfVxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSdmbGV4IGl0ZW1zLWNlbnRlciBnYXAtMic+XG4gICAgICAgICAgICA8SW5wdXRcbiAgICAgICAgICAgICAgdHlwZT0nZmlsZSdcbiAgICAgICAgICAgICAgYWNjZXB0PSdpbWFnZS8qLC5wZGYnXG4gICAgICAgICAgICAgIG9uQ2hhbmdlPXtoYW5kbGVGaWxlVXBsb2FkfVxuICAgICAgICAgICAgICBkaXNhYmxlZD17dXBsb2FkRG9jdW1lbnRNdXRhdGlvbi5pc1BlbmRpbmd9XG4gICAgICAgICAgICAgIGNsYXNzTmFtZT0nZmxleC0xJ1xuICAgICAgICAgICAgLz5cbiAgICAgICAgICAgIHt1cGxvYWREb2N1bWVudE11dGF0aW9uLmlzUGVuZGluZyAmJiAoXG4gICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSd0ZXh0LXNtIHRleHQtZ3JheS01MDAnPlVwbG9hZGluZyAmIGFuYWx5emluZy4uLjwvZGl2PlxuICAgICAgICAgICAgKX1cbiAgICAgICAgICA8L2Rpdj5cblxuICAgICAgICAgIHsvKiBBSSBBbmFseXNpcyBBY3Rpb25zICovfVxuICAgICAgICAgIHtiaWxsLmlzQWlBbmFseXplZCAmJiBiaWxsLmFpQW5hbHlzaXNEYXRhICYmIChcbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSdzcGFjZS15LTInPlxuICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0ncC0zIGJnLWJsdWUtNTAgcm91bmRlZC1sZyc+XG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9J3RleHQtc20gZm9udC1tZWRpdW0gdGV4dC1ibHVlLTgwMCc+QUkgQW5hbHlzaXMgQXZhaWxhYmxlPC9kaXY+XG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9J3RleHQteHMgdGV4dC1ibHVlLTYwMCBtdC0xJz5cbiAgICAgICAgICAgICAgICAgIENvbmZpZGVuY2U6IHsoKGJpbGwuYWlBbmFseXNpc0RhdGEgYXMgYW55KS5jb25maWRlbmNlICogMTAwKS50b0ZpeGVkKDEpfSVcbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgIDxCdXR0b25cbiAgICAgICAgICAgICAgICBvbkNsaWNrPXtoYW5kbGVBcHBseUFpQW5hbHlzaXN9XG4gICAgICAgICAgICAgICAgZGlzYWJsZWQ9e2FwcGx5QWlBbmFseXNpc011dGF0aW9uLmlzUGVuZGluZ31cbiAgICAgICAgICAgICAgICB2YXJpYW50PSdvdXRsaW5lJ1xuICAgICAgICAgICAgICAgIHNpemU9J3NtJ1xuICAgICAgICAgICAgICAgIGNsYXNzTmFtZT0ndy1mdWxsJ1xuICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAge2FwcGx5QWlBbmFseXNpc011dGF0aW9uLmlzUGVuZGluZyA/ICdBcHBseWluZy4uLicgOiAnQXBwbHkgQUkgQW5hbHlzaXMgdG8gRm9ybSd9XG4gICAgICAgICAgICAgIDwvQnV0dG9uPlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgKX1cbiAgICAgICAgPC9kaXY+XG4gICAgICA8L2Rpdj5cblxuICAgICAgey8qIEVkaXQgTW9kZSBUb2dnbGUgKi99XG4gICAgICA8ZGl2IGNsYXNzTmFtZT0nYm9yZGVyLXQgcHQtNCc+XG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPSdmbGV4IGl0ZW1zLWNlbnRlciBqdXN0aWZ5LWJldHdlZW4nPlxuICAgICAgICAgIDxMYWJlbCBjbGFzc05hbWU9J3RleHQtc20gZm9udC1tZWRpdW0nPkVkaXQgQmlsbCBJbmZvcm1hdGlvbjwvTGFiZWw+XG4gICAgICAgICAgPEJ1dHRvbiBvbkNsaWNrPXsoKSA9PiBzZXRJc0VkaXRpbmcoIWlzRWRpdGluZyl9IHZhcmlhbnQ9J291dGxpbmUnIHNpemU9J3NtJz5cbiAgICAgICAgICAgIHtpc0VkaXRpbmcgPyAnQ2FuY2VsIEVkaXQnIDogJ0VkaXQgQmlsbCd9XG4gICAgICAgICAgPC9CdXR0b24+XG4gICAgICAgIDwvZGl2PlxuICAgICAgPC9kaXY+XG5cbiAgICAgIHsvKiBGdWxsIEVkaXQgRm9ybSAqL31cbiAgICAgIHtpc0VkaXRpbmcgJiYgKFxuICAgICAgICA8QmlsbEVkaXRGb3JtXG4gICAgICAgICAgYmlsbD17YmlsbH1cbiAgICAgICAgICBvblN1Y2Nlc3M9eygpID0+IHtcbiAgICAgICAgICAgIHNldElzRWRpdGluZyhmYWxzZSk7XG4gICAgICAgICAgICBvblN1Y2Nlc3MoKTtcbiAgICAgICAgICB9fVxuICAgICAgICAgIG9uQ2FuY2VsPXsoKSA9PiBzZXRJc0VkaXRpbmcoZmFsc2UpfVxuICAgICAgICAvPlxuICAgICAgKX1cblxuICAgICAgey8qIEFjdGlvbnMgKi99XG4gICAgICA8ZGl2IGNsYXNzTmFtZT0nZmxleCBqdXN0aWZ5LWVuZCBnYXAtMiBwdC00IGJvcmRlci10Jz5cbiAgICAgICAgPEJ1dHRvbiB2YXJpYW50PSdvdXRsaW5lJyBvbkNsaWNrPXtvbkNhbmNlbH0+XG4gICAgICAgICAgQ2xvc2VcbiAgICAgICAgPC9CdXR0b24+XG4gICAgICA8L2Rpdj5cbiAgICA8L2Rpdj5cbiAgKTtcbn1cbiJdLCJ2ZXJzaW9uIjozfQ==