3296bd4ca44f9dc10d41bfa4075105cf
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const globals_1 = require("@jest/globals");
const zod_1 = require("zod");
// Bill validation schemas (would normally be imported from the API)
const billCategorySchema = zod_1.z.enum([
    'insurance',
    'maintenance',
    'salary',
    'utilities',
    'cleaning',
    'security',
    'landscaping',
    'professional_services',
    'administration',
    'repairs',
    'supplies',
    'taxes',
    'other',
]);
const paymentTypeSchema = zod_1.z.enum(['unique', 'recurrent']);
const schedulePaymentSchema = zod_1.z.enum(['weekly', 'monthly', 'quarterly', 'yearly', 'custom']);
const billStatusSchema = zod_1.z.enum(['draft', 'sent', 'overdue', 'paid', 'cancelled']);
const createBillSchema = zod_1.z.object({
    buildingId: zod_1.z.string().uuid(),
    title: zod_1.z.string().min(1),
    description: zod_1.z.string().optional(),
    category: billCategorySchema,
    vendor: zod_1.z.string().optional(),
    paymentType: paymentTypeSchema,
    schedulePayment: schedulePaymentSchema.optional(),
    scheduleCustom: zod_1.z.array(zod_1.z.string()).optional(),
    costs: zod_1.z.array(zod_1.z.number().positive()).min(1),
    totalAmount: zod_1.z.number().positive(),
    startDate: zod_1.z.string(),
    endDate: zod_1.z.string().optional(),
    status: billStatusSchema.optional(),
    notes: zod_1.z.string().optional(),
});
const billFilterSchema = zod_1.z.object({
    buildingId: zod_1.z.string().uuid(),
    category: zod_1.z.string().optional(),
    year: zod_1.z.string().optional(),
    status: billStatusSchema.optional(),
});
(0, globals_1.describe)('Bills Validation Tests', () => {
    (0, globals_1.describe)('Bill Category Validation', () => {
        (0, globals_1.it)('should accept all valid bill categories', () => {
            const validCategories = [
                'insurance',
                'maintenance',
                'salary',
                'utilities',
                'cleaning',
                'security',
                'landscaping',
                'professional_services',
                'administration',
                'repairs',
                'supplies',
                'taxes',
                'other',
            ];
            validCategories.forEach((category) => {
                const result = billCategorySchema.safeParse(category);
                (0, globals_1.expect)(result.success).toBe(true);
                if (result.success) {
                    (0, globals_1.expect)(result.data).toBe(category);
                }
            });
        });
        (0, globals_1.it)('should reject invalid bill categories', () => {
            const invalidCategories = [
                'invalid_category',
                'INSURANCE', // wrong case
                'misc',
                '',
                null,
                undefined,
                123,
            ];
            invalidCategories.forEach((category) => {
                const result = billCategorySchema.safeParse(category);
                (0, globals_1.expect)(result.success).toBe(false);
            });
        });
    });
    (0, globals_1.describe)('Payment Type Validation', () => {
        (0, globals_1.it)('should accept valid payment types', () => {
            const validTypes = ['unique', 'recurrent'];
            validTypes.forEach((type) => {
                const result = paymentTypeSchema.safeParse(type);
                (0, globals_1.expect)(result.success).toBe(true);
                if (result.success) {
                    (0, globals_1.expect)(result.data).toBe(type);
                }
            });
        });
        (0, globals_1.it)('should reject invalid payment types', () => {
            const invalidTypes = ['one_time', 'recurring', 'UNIQUE', '', null, undefined];
            invalidTypes.forEach((type) => {
                const result = paymentTypeSchema.safeParse(type);
                (0, globals_1.expect)(result.success).toBe(false);
            });
        });
    });
    (0, globals_1.describe)('Schedule Payment Validation', () => {
        (0, globals_1.it)('should accept valid schedule payment options', () => {
            const validSchedules = ['weekly', 'monthly', 'quarterly', 'yearly', 'custom'];
            validSchedules.forEach((schedule) => {
                const result = schedulePaymentSchema.safeParse(schedule);
                (0, globals_1.expect)(result.success).toBe(true);
                if (result.success) {
                    (0, globals_1.expect)(result.data).toBe(schedule);
                }
            });
        });
        (0, globals_1.it)('should reject invalid schedule payment options', () => {
            const invalidSchedules = ['daily', 'biweekly', 'annually', 'MONTHLY', '', null];
            invalidSchedules.forEach((schedule) => {
                const result = schedulePaymentSchema.safeParse(schedule);
                (0, globals_1.expect)(result.success).toBe(false);
            });
        });
    });
    (0, globals_1.describe)('Bill Status Validation', () => {
        (0, globals_1.it)('should accept valid bill statuses', () => {
            const validStatuses = ['draft', 'sent', 'overdue', 'paid', 'cancelled'];
            validStatuses.forEach((status) => {
                const result = billStatusSchema.safeParse(status);
                (0, globals_1.expect)(result.success).toBe(true);
                if (result.success) {
                    (0, globals_1.expect)(result.data).toBe(status);
                }
            });
        });
        (0, globals_1.it)('should reject invalid bill statuses', () => {
            const invalidStatuses = ['pending', 'completed', 'PAID', 'active', '', null];
            invalidStatuses.forEach((status) => {
                const result = billStatusSchema.safeParse(status);
                (0, globals_1.expect)(result.success).toBe(false);
            });
        });
    });
    (0, globals_1.describe)('Create Bill Schema Validation', () => {
        const validBillData = {
            buildingId: '123e4567-e89b-12d3-a456-426614174000',
            title: 'Test Bill',
            description: 'Test description',
            category: 'maintenance',
            vendor: 'Test Vendor',
            paymentType: 'unique',
            costs: [100.5],
            totalAmount: 100.5,
            startDate: '2024-01-01',
            status: 'draft',
        };
        (0, globals_1.it)('should accept valid bill data', () => {
            const result = createBillSchema.safeParse(validBillData);
            (0, globals_1.expect)(result.success).toBe(true);
            if (result.success) {
                (0, globals_1.expect)(result.data.title).toBe('Test Bill');
                (0, globals_1.expect)(result.data.category).toBe('maintenance');
            }
        });
        (0, globals_1.it)('should require buildingId to be a valid UUID', () => {
            const invalidData = { ...validBillData, buildingId: 'invalid-uuid' };
            const result = createBillSchema.safeParse(invalidData);
            (0, globals_1.expect)(result.success).toBe(false);
        });
        (0, globals_1.it)('should require title to be non-empty', () => {
            const invalidData = { ...validBillData, title: '' };
            const result = createBillSchema.safeParse(invalidData);
            (0, globals_1.expect)(result.success).toBe(false);
        });
        (0, globals_1.it)('should require costs to be positive numbers', () => {
            const invalidData = { ...validBillData, costs: [-100, 0] };
            const result = createBillSchema.safeParse(invalidData);
            (0, globals_1.expect)(result.success).toBe(false);
        });
        (0, globals_1.it)('should require totalAmount to be positive', () => {
            const invalidData = { ...validBillData, totalAmount: -100 };
            const result = createBillSchema.safeParse(invalidData);
            (0, globals_1.expect)(result.success).toBe(false);
        });
        (0, globals_1.it)('should accept optional fields', () => {
            const minimalData = {
                buildingId: '123e4567-e89b-12d3-a456-426614174000',
                title: 'Minimal Bill',
                category: 'other',
                paymentType: 'unique',
                costs: [50],
                totalAmount: 50,
                startDate: '2024-01-01',
            };
            const result = createBillSchema.safeParse(minimalData);
            (0, globals_1.expect)(result.success).toBe(true);
        });
        (0, globals_1.it)('should validate recurrent bill with schedule', () => {
            const recurrentData = {
                ...validBillData,
                paymentType: 'recurrent',
                schedulePayment: 'monthly',
                endDate: '2024-12-31',
            };
            const result = createBillSchema.safeParse(recurrentData);
            (0, globals_1.expect)(result.success).toBe(true);
        });
        (0, globals_1.it)('should validate custom schedule with dates array', () => {
            const customData = {
                ...validBillData,
                paymentType: 'recurrent',
                schedulePayment: 'custom',
                scheduleCustom: ['2024-01-15', '2024-04-15', '2024-07-15', '2024-10-15'],
            };
            const result = createBillSchema.safeParse(customData);
            (0, globals_1.expect)(result.success).toBe(true);
        });
    });
    (0, globals_1.describe)('Bill Filter Schema Validation', () => {
        (0, globals_1.it)('should accept valid filter data', () => {
            const validFilters = {
                buildingId: '123e4567-e89b-12d3-a456-426614174000',
                category: 'insurance',
                year: '2024',
                status: 'paid',
            };
            const result = billFilterSchema.safeParse(validFilters);
            (0, globals_1.expect)(result.success).toBe(true);
        });
        (0, globals_1.it)('should require buildingId to be UUID', () => {
            const invalidFilters = {
                buildingId: 'invalid-uuid',
                category: 'insurance',
            };
            const result = billFilterSchema.safeParse(invalidFilters);
            (0, globals_1.expect)(result.success).toBe(false);
        });
        (0, globals_1.it)('should accept minimal filter with only buildingId', () => {
            const minimalFilters = {
                buildingId: '123e4567-e89b-12d3-a456-426614174000',
            };
            const result = billFilterSchema.safeParse(minimalFilters);
            (0, globals_1.expect)(result.success).toBe(true);
        });
        (0, globals_1.it)('should reject invalid status in filters', () => {
            const invalidFilters = {
                buildingId: '123e4567-e89b-12d3-a456-426614174000',
                status: 'invalid_status',
            };
            const result = billFilterSchema.safeParse(invalidFilters);
            (0, globals_1.expect)(result.success).toBe(false);
        });
    });
    (0, globals_1.describe)('Edge Cases and Data Integrity', () => {
        (0, globals_1.it)('should handle very large cost amounts', () => {
            const largeCostData = {
                buildingId: '123e4567-e89b-12d3-a456-426614174000',
                title: 'Large Cost Bill',
                category: 'other',
                paymentType: 'unique',
                costs: [999999.99],
                totalAmount: 999999.99,
                startDate: '2024-01-01',
            };
            const result = createBillSchema.safeParse(largeCostData);
            (0, globals_1.expect)(result.success).toBe(true);
        });
        (0, globals_1.it)('should handle multiple costs in array', () => {
            const multiCostData = {
                buildingId: '123e4567-e89b-12d3-a456-426614174000',
                title: 'Multi-Cost Bill',
                category: 'maintenance',
                paymentType: 'recurrent',
                schedulePayment: 'quarterly',
                costs: [500, 600, 700, 800],
                totalAmount: 2600,
                startDate: '2024-01-01',
            };
            const result = createBillSchema.safeParse(multiCostData);
            (0, globals_1.expect)(result.success).toBe(true);
        });
        (0, globals_1.it)('should reject empty costs array', () => {
            const emptyCostsData = {
                buildingId: '123e4567-e89b-12d3-a456-426614174000',
                title: 'Empty Costs Bill',
                category: 'other',
                paymentType: 'unique',
                costs: [],
                totalAmount: 100,
                startDate: '2024-01-01',
            };
            const result = createBillSchema.safeParse(emptyCostsData);
            (0, globals_1.expect)(result.success).toBe(false);
        });
        (0, globals_1.it)('should handle very long title and description', () => {
            const longTextData = {
                buildingId: '123e4567-e89b-12d3-a456-426614174000',
                title: 'A'.repeat(1000), // Very long title
                description: 'B'.repeat(5000), // Very long description
                category: 'other',
                paymentType: 'unique',
                costs: [100],
                totalAmount: 100,
                startDate: '2024-01-01',
            };
            const result = createBillSchema.safeParse(longTextData);
            (0, globals_1.expect)(result.success).toBe(true); // Schema doesn't enforce max length currently
        });
    });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiL2hvbWUvcnVubmVyL3dvcmtzcGFjZS90ZXN0cy91bml0L2JpbGxzLXZhbGlkYXRpb24udGVzdC50cyIsIm1hcHBpbmdzIjoiOztBQUFBLDJDQUFxRDtBQUNyRCw2QkFBd0I7QUFFeEIsb0VBQW9FO0FBQ3BFLE1BQU0sa0JBQWtCLEdBQUcsT0FBQyxDQUFDLElBQUksQ0FBQztJQUNoQyxXQUFXO0lBQ1gsYUFBYTtJQUNiLFFBQVE7SUFDUixXQUFXO0lBQ1gsVUFBVTtJQUNWLFVBQVU7SUFDVixhQUFhO0lBQ2IsdUJBQXVCO0lBQ3ZCLGdCQUFnQjtJQUNoQixTQUFTO0lBQ1QsVUFBVTtJQUNWLE9BQU87SUFDUCxPQUFPO0NBQ1IsQ0FBQyxDQUFDO0FBRUgsTUFBTSxpQkFBaUIsR0FBRyxPQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsUUFBUSxFQUFFLFdBQVcsQ0FBQyxDQUFDLENBQUM7QUFFMUQsTUFBTSxxQkFBcUIsR0FBRyxPQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsUUFBUSxFQUFFLFNBQVMsRUFBRSxXQUFXLEVBQUUsUUFBUSxFQUFFLFFBQVEsQ0FBQyxDQUFDLENBQUM7QUFFN0YsTUFBTSxnQkFBZ0IsR0FBRyxPQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsT0FBTyxFQUFFLE1BQU0sRUFBRSxTQUFTLEVBQUUsTUFBTSxFQUFFLFdBQVcsQ0FBQyxDQUFDLENBQUM7QUFFbkYsTUFBTSxnQkFBZ0IsR0FBRyxPQUFDLENBQUMsTUFBTSxDQUFDO0lBQ2hDLFVBQVUsRUFBRSxPQUFDLENBQUMsTUFBTSxFQUFFLENBQUMsSUFBSSxFQUFFO0lBQzdCLEtBQUssRUFBRSxPQUFDLENBQUMsTUFBTSxFQUFFLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQztJQUN4QixXQUFXLEVBQUUsT0FBQyxDQUFDLE1BQU0sRUFBRSxDQUFDLFFBQVEsRUFBRTtJQUNsQyxRQUFRLEVBQUUsa0JBQWtCO0lBQzVCLE1BQU0sRUFBRSxPQUFDLENBQUMsTUFBTSxFQUFFLENBQUMsUUFBUSxFQUFFO0lBQzdCLFdBQVcs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RUFBRSxRQUFpQjtnQkFDOUIsS0FBSyxFQUFFLENBQUMsR0FBRyxDQUFDO2dCQUNaLFdBQVcsRUFBRSxHQUFHO2dCQUNoQixTQUFTLEVBQUUsWUFBWTthQUN4QixDQUFDO1lBRUYsTUFBTSxNQUFNLEdBQUcsZ0JBQWdCLENBQUMsU0FBUyxDQUFDLFlBQVksQ0FBQyxDQUFDO1lBQ3hELElBQUEsZ0JBQU0sRUFBQyxNQUFNLENBQUMsT0FBTyxDQUFDLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsOENBQThDO1FBQ25GLENBQUMsQ0FBQyxDQUFDO0lBQ0wsQ0FBQyxDQUFDLENBQUM7QUFDTCxDQUFDLENBQUMsQ0FBQyIsIm5hbWVzIjpbXSwic291cmNlcyI6WyIvaG9tZS9ydW5uZXIvd29ya3NwYWNlL3Rlc3RzL3VuaXQvYmlsbHMtdmFsaWRhdGlvbi50ZXN0LnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGRlc2NyaWJlLCBpdCwgZXhwZWN0IH0gZnJvbSAnQGplc3QvZ2xvYmFscyc7XG5pbXBvcnQgeyB6IH0gZnJvbSAnem9kJztcblxuLy8gQmlsbCB2YWxpZGF0aW9uIHNjaGVtYXMgKHdvdWxkIG5vcm1hbGx5IGJlIGltcG9ydGVkIGZyb20gdGhlIEFQSSlcbmNvbnN0IGJpbGxDYXRlZ29yeVNjaGVtYSA9IHouZW51bShbXG4gICdpbnN1cmFuY2UnLFxuICAnbWFpbnRlbmFuY2UnLFxuICAnc2FsYXJ5JyxcbiAgJ3V0aWxpdGllcycsXG4gICdjbGVhbmluZycsXG4gICdzZWN1cml0eScsXG4gICdsYW5kc2NhcGluZycsXG4gICdwcm9mZXNzaW9uYWxfc2VydmljZXMnLFxuICAnYWRtaW5pc3RyYXRpb24nLFxuICAncmVwYWlycycsXG4gICdzdXBwbGllcycsXG4gICd0YXhlcycsXG4gICdvdGhlcicsXG5dKTtcblxuY29uc3QgcGF5bWVudFR5cGVTY2hlbWEgPSB6LmVudW0oWyd1bmlxdWUnLCAncmVjdXJyZW50J10pO1xuXG5jb25zdCBzY2hlZHVsZVBheW1lbnRTY2hlbWEgPSB6LmVudW0oWyd3ZWVrbHknLCAnbW9udGhseScsICdxdWFydGVybHknLCAneWVhcmx5JywgJ2N1c3RvbSddKTtcblxuY29uc3QgYmlsbFN0YXR1c1NjaGVtYSA9IHouZW51bShbJ2RyYWZ0JywgJ3NlbnQnLCAnb3ZlcmR1ZScsICdwYWlkJywgJ2NhbmNlbGxlZCddKTtcblxuY29uc3QgY3JlYXRlQmlsbFNjaGVtYSA9IHoub2JqZWN0KHtcbiAgYnVpbGRpbmdJZDogei5zdHJpbmcoKS51dWlkKCksXG4gIHRpdGxlOiB6LnN0cmluZygpLm1pbigxKSxcbiAgZGVzY3JpcHRpb246IHouc3RyaW5nKCkub3B0aW9uYWwoKSxcbiAgY2F0ZWdvcnk6IGJpbGxDYXRlZ29yeVNjaGVtYSxcbiAgdmVuZG9yOiB6LnN0cmluZygpLm9wdGlvbmFsKCksXG4gIHBheW1lbnRUeXBlOiBwYXltZW50VHlwZVNjaGVtYSxcbiAgc2NoZWR1bGVQYXltZW50OiBzY2hlZHVsZVBheW1lbnRTY2hlbWEub3B0aW9uYWwoKSxcbiAgc2NoZWR1bGVDdXN0b206IHouYXJyYXkoei5zdHJpbmcoKSkub3B0aW9uYWwoKSxcbiAgY29zdHM6IHouYXJyYXkoei5udW1iZXIoKS5wb3NpdGl2ZSgpKS5taW4oMSksXG4gIHRvdGFsQW1vdW50OiB6Lm51bWJlcigpLnBvc2l0aXZlKCksXG4gIHN0YXJ0RGF0ZTogei5zdHJpbmcoKSxcbiAgZW5kRGF0ZTogei5zdHJpbmcoKS5vcHRpb25hbCgpLFxuICBzdGF0dXM6IGJpbGxTdGF0dXNTY2hlbWEub3B0aW9uYWwoKSxcbiAgbm90ZXM6IHouc3RyaW5nKCkub3B0aW9uYWwoKSxcbn0pO1xuXG5jb25zdCBiaWxsRmlsdGVyU2NoZW1hID0gei5vYmplY3Qoe1xuICBidWlsZGluZ0lkOiB6LnN0cmluZygpLnV1aWQoKSxcbiAgY2F0ZWdvcnk6IHouc3RyaW5nKCkub3B0aW9uYWwoKSxcbiAgeWVhcjogei5zdHJpbmcoKS5vcHRpb25hbCgpLFxuICBzdGF0dXM6IGJpbGxTdGF0dXNTY2hlbWEub3B0aW9uYWwoKSxcbn0pO1xuXG5kZXNjcmliZSgnQmlsbHMgVmFsaWRhdGlvbiBUZXN0cycsICgpID0+IHtcbiAgZGVzY3JpYmUoJ0JpbGwgQ2F0ZWdvcnkgVmFsaWRhdGlvbicsICgpID0+IHtcbiAgICBpdCgnc2hvdWxkIGFjY2VwdCBhbGwgdmFsaWQgYmlsbCBjYXRlZ29yaWVzJywgKCkgPT4ge1xuICAgICAgY29uc3QgdmFsaWRDYXRlZ29yaWVzID0gW1xuICAgICAgICAnaW5zdXJhbmNlJyxcbiAgICAgICAgJ21haW50ZW5hbmNlJyxcbiAgICAgICAgJ3NhbGFyeScsXG4gICAgICAgICd1dGlsaXRpZXMnLFxuICAgICAgICAnY2xlYW5pbmcnLFxuICAgICAgICAnc2VjdXJpdHknLFxuICAgICAgICAnbGFuZHNjYXBpbmcnLFxuICAgICAgICAncHJvZmVzc2lvbmFsX3NlcnZpY2VzJyxcbiAgICAgICAgJ2FkbWluaXN0cmF0aW9uJyxcbiAgICAgICAgJ3JlcGFpcnMnLFxuICAgICAgICAnc3VwcGxpZXMnLFxuICAgICAgICAndGF4ZXMnLFxuICAgICAgICAnb3RoZXInLFxuICAgICAgXTtcblxuICAgICAgdmFsaWRDYXRlZ29yaWVzLmZvckVhY2goKGNhdGVnb3J5KSA9PiB7XG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IGJpbGxDYXRlZ29yeVNjaGVtYS5zYWZlUGFyc2UoY2F0ZWdvcnkpO1xuICAgICAgICBleHBlY3QocmVzdWx0LnN1Y2Nlc3MpLnRvQmUodHJ1ZSk7XG4gICAgICAgIGlmIChyZXN1bHQuc3VjY2Vzcykge1xuICAgICAgICAgIGV4cGVjdChyZXN1bHQuZGF0YSkudG9CZShjYXRlZ29yeSk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCByZWplY3QgaW52YWxpZCBiaWxsIGNhdGVnb3JpZXMnLCAoKSA9PiB7XG4gICAgICBjb25zdCBpbnZhbGlkQ2F0ZWdvcmllcyA9IFtcbiAgICAgICAgJ2ludmFsaWRfY2F0ZWdvcnknLFxuICAgICAgICAnSU5TVVJBTkNFJywgLy8gd3JvbmcgY2FzZVxuICAgICAgICAnbWlzYycsXG4gICAgICAgICcnLFxuICAgICAgICBudWxsLFxuICAgICAgICB1bmRlZmluZWQsXG4gICAgICAgIDEyMyxcbiAgICAgIF07XG5cbiAgICAgIGludmFsaWRDYXRlZ29yaWVzLmZvckVhY2goKGNhdGVnb3J5KSA9PiB7XG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IGJpbGxDYXRlZ29yeVNjaGVtYS5zYWZlUGFyc2UoY2F0ZWdvcnkpO1xuICAgICAgICBleHBlY3QocmVzdWx0LnN1Y2Nlc3MpLnRvQmUoZmFsc2UpO1xuICAgICAgfSk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdQYXltZW50IFR5cGUgVmFsaWRhdGlvbicsICgpID0+IHtcbiAgICBpdCgnc2hvdWxkIGFjY2VwdCB2YWxpZCBwYXltZW50IHR5cGVzJywgKCkgPT4ge1xuICAgICAgY29uc3QgdmFsaWRUeXBlcyA9IFsndW5pcXVlJywgJ3JlY3VycmVudCddO1xuXG4gICAgICB2YWxpZFR5cGVzLmZvckVhY2goKHR5cGUpID0+IHtcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gcGF5bWVudFR5cGVTY2hlbWEuc2FmZVBhcnNlKHR5cGUpO1xuICAgICAgICBleHBlY3QocmVzdWx0LnN1Y2Nlc3MpLnRvQmUodHJ1ZSk7XG4gICAgICAgIGlmIChyZXN1bHQuc3VjY2Vzcykge1xuICAgICAgICAgIGV4cGVjdChyZXN1bHQuZGF0YSkudG9CZSh0eXBlKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIHJlamVjdCBpbnZhbGlkIHBheW1lbnQgdHlwZXMnLCAoKSA9PiB7XG4gICAgICBjb25zdCBpbnZhbGlkVHlwZXMgPSBbJ29uZV90aW1lJywgJ3JlY3VycmluZycsICdVTklRVUUnLCAnJywgbnVsbCwgdW5kZWZpbmVkXTtcblxuICAgICAgaW52YWxpZFR5cGVzLmZvckVhY2goKHR5cGUpID0+IHtcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gcGF5bWVudFR5cGVTY2hlbWEuc2FmZVBhcnNlKHR5cGUpO1xuICAgICAgICBleHBlY3QocmVzdWx0LnN1Y2Nlc3MpLnRvQmUoZmFsc2UpO1xuICAgICAgfSk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdTY2hlZHVsZSBQYXltZW50IFZhbGlkYXRpb24nLCAoKSA9PiB7XG4gICAgaXQoJ3Nob3VsZCBhY2NlcHQgdmFsaWQgc2NoZWR1bGUgcGF5bWVudCBvcHRpb25zJywgKCkgPT4ge1xuICAgICAgY29uc3QgdmFsaWRTY2hlZHVsZXMgPSBbJ3dlZWtseScsICdtb250aGx5JywgJ3F1YXJ0ZXJseScsICd5ZWFybHknLCAnY3VzdG9tJ107XG5cbiAgICAgIHZhbGlkU2NoZWR1bGVzLmZvckVhY2goKHNjaGVkdWxlKSA9PiB7XG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IHNjaGVkdWxlUGF5bWVudFNjaGVtYS5zYWZlUGFyc2Uoc2NoZWR1bGUpO1xuICAgICAgICBleHBlY3QocmVzdWx0LnN1Y2Nlc3MpLnRvQmUodHJ1ZSk7XG4gICAgICAgIGlmIChyZXN1bHQuc3VjY2Vzcykge1xuICAgICAgICAgIGV4cGVjdChyZXN1bHQuZGF0YSkudG9CZShzY2hlZHVsZSk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCByZWplY3QgaW52YWxpZCBzY2hlZHVsZSBwYXltZW50IG9wdGlvbnMnLCAoKSA9PiB7XG4gICAgICBjb25zdCBpbnZhbGlkU2NoZWR1bGVzID0gWydkYWlseScsICdiaXdlZWtseScsICdhbm51YWxseScsICdNT05USExZJywgJycsIG51bGxdO1xuXG4gICAgICBpbnZhbGlkU2NoZWR1bGVzLmZvckVhY2goKHNjaGVkdWxlKSA9PiB7XG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IHNjaGVkdWxlUGF5bWVudFNjaGVtYS5zYWZlUGFyc2Uoc2NoZWR1bGUpO1xuICAgICAgICBleHBlY3QocmVzdWx0LnN1Y2Nlc3MpLnRvQmUoZmFsc2UpO1xuICAgICAgfSk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdCaWxsIFN0YXR1cyBWYWxpZGF0aW9uJywgKCkgPT4ge1xuICAgIGl0KCdzaG91bGQgYWNjZXB0IHZhbGlkIGJpbGwgc3RhdHVzZXMnLCAoKSA9PiB7XG4gICAgICBjb25zdCB2YWxpZFN0YXR1c2VzID0gWydkcmFmdCcsICdzZW50JywgJ292ZXJkdWUnLCAncGFpZCcsICdjYW5jZWxsZWQnXTtcblxuICAgICAgdmFsaWRTdGF0dXNlcy5mb3JFYWNoKChzdGF0dXMpID0+IHtcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gYmlsbFN0YXR1c1NjaGVtYS5zYWZlUGFyc2Uoc3RhdHVzKTtcbiAgICAgICAgZXhwZWN0KHJlc3VsdC5zdWNjZXNzKS50b0JlKHRydWUpO1xuICAgICAgICBpZiAocmVzdWx0LnN1Y2Nlc3MpIHtcbiAgICAgICAgICBleHBlY3QocmVzdWx0LmRhdGEpLnRvQmUoc3RhdHVzKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIHJlamVjdCBpbnZhbGlkIGJpbGwgc3RhdHVzZXMnLCAoKSA9PiB7XG4gICAgICBjb25zdCBpbnZhbGlkU3RhdHVzZXMgPSBbJ3BlbmRpbmcnLCAnY29tcGxldGVkJywgJ1BBSUQnLCAnYWN0aXZlJywgJycsIG51bGxdO1xuXG4gICAgICBpbnZhbGlkU3RhdHVzZXMuZm9yRWFjaCgoc3RhdHVzKSA9PiB7XG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IGJpbGxTdGF0dXNTY2hlbWEuc2FmZVBhcnNlKHN0YXR1cyk7XG4gICAgICAgIGV4cGVjdChyZXN1bHQuc3VjY2VzcykudG9CZShmYWxzZSk7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ0NyZWF0ZSBCaWxsIFNjaGVtYSBWYWxpZGF0aW9uJywgKCkgPT4ge1xuICAgIGNvbnN0IHZhbGlkQmlsbERhdGEgPSB7XG4gICAgICBidWlsZGluZ0lkOiAnMTIzZTQ1NjctZTg5Yi0xMmQzLWE0NTYtNDI2NjE0MTc0MDAwJyxcbiAgICAgIHRpdGxlOiAnVGVzdCBCaWxsJyxcbiAgICAgIGRlc2NyaXB0aW9uOiAnVGVzdCBkZXNjcmlwdGlvbicsXG4gICAgICBjYXRlZ29yeTogJ21haW50ZW5hbmNlJyBhcyBjb25zdCxcbiAgICAgIHZlbmRvcjogJ1Rlc3QgVmVuZG9yJyxcbiAgICAgIHBheW1lbnRUeXBlOiAndW5pcXVlJyBhcyBjb25zdCxcbiAgICAgIGNvc3RzOiBbMTAwLjVdLFxuICAgICAgdG90YWxBbW91bnQ6IDEwMC41LFxuICAgICAgc3RhcnREYXRlOiAnMjAyNC0wMS0wMScsXG4gICAgICBzdGF0dXM6ICdkcmFmdCcgYXMgY29uc3QsXG4gICAgfTtcblxuICAgIGl0KCdzaG91bGQgYWNjZXB0IHZhbGlkIGJpbGwgZGF0YScsICgpID0+IHtcbiAgICAgIGNvbnN0IHJlc3VsdCA9IGNyZWF0ZUJpbGxTY2hlbWEuc2FmZVBhcnNlKHZhbGlkQmlsbERhdGEpO1xuICAgICAgZXhwZWN0KHJlc3VsdC5zdWNjZXNzKS50b0JlKHRydWUpO1xuICAgICAgaWYgKHJlc3VsdC5zdWNjZXNzKSB7XG4gICAgICAgIGV4cGVjdChyZXN1bHQuZGF0YS50aXRsZSkudG9CZSgnVGVzdCBCaWxsJyk7XG4gICAgICAgIGV4cGVjdChyZXN1bHQuZGF0YS5jYXRlZ29yeSkudG9CZSgnbWFpbnRlbmFuY2UnKTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgcmVxdWlyZSBidWlsZGluZ0lkIHRvIGJlIGEgdmFsaWQgVVVJRCcsICgpID0+IHtcbiAgICAgIGNvbnN0IGludmFsaWREYXRhID0geyAuLi52YWxpZEJpbGxEYXRhLCBidWlsZGluZ0lkOiAnaW52YWxpZC11dWlkJyB9O1xuICAgICAgY29uc3QgcmVzdWx0ID0gY3JlYXRlQmlsbFNjaGVtYS5zYWZlUGFyc2UoaW52YWxpZERhdGEpO1xuICAgICAgZXhwZWN0KHJlc3VsdC5zdWNjZXNzKS50b0JlKGZhbHNlKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgcmVxdWlyZSB0aXRsZSB0byBiZSBub24tZW1wdHknLCAoKSA9PiB7XG4gICAgICBjb25zdCBpbnZhbGlkRGF0YSA9IHsgLi4udmFsaWRCaWxsRGF0YSwgdGl0bGU6ICcnIH07XG4gICAgICBjb25zdCByZXN1bHQgPSBjcmVhdGVCaWxsU2NoZW1hLnNhZmVQYXJzZShpbnZhbGlkRGF0YSk7XG4gICAgICBleHBlY3QocmVzdWx0LnN1Y2Nlc3MpLnRvQmUoZmFsc2UpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCByZXF1aXJlIGNvc3RzIHRvIGJlIHBvc2l0aXZlIG51bWJlcnMnLCAoKSA9PiB7XG4gICAgICBjb25zdCBpbnZhbGlkRGF0YSA9IHsgLi4udmFsaWRCaWxsRGF0YSwgY29zdHM6IFstMTAwLCAwXSB9O1xuICAgICAgY29uc3QgcmVzdWx0ID0gY3JlYXRlQmlsbFNjaGVtYS5zYWZlUGFyc2UoaW52YWxpZERhdGEpO1xuICAgICAgZXhwZWN0KHJlc3VsdC5zdWNjZXNzKS50b0JlKGZhbHNlKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgcmVxdWlyZSB0b3RhbEFtb3VudCB0byBiZSBwb3NpdGl2ZScsICgpID0+IHtcbiAgICAgIGNvbnN0IGludmFsaWREYXRhID0geyAuLi52YWxpZEJpbGxEYXRhLCB0b3RhbEFtb3VudDogLTEwMCB9O1xuICAgICAgY29uc3QgcmVzdWx0ID0gY3JlYXRlQmlsbFNjaGVtYS5zYWZlUGFyc2UoaW52YWxpZERhdGEpO1xuICAgICAgZXhwZWN0KHJlc3VsdC5zdWNjZXNzKS50b0JlKGZhbHNlKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgYWNjZXB0IG9wdGlvbmFsIGZpZWxkcycsICgpID0+IHtcbiAgICAgIGNvbnN0IG1pbmltYWxEYXRhID0ge1xuICAgICAgICBidWlsZGluZ0lkOiAnMTIzZTQ1NjctZTg5Yi0xMmQzLWE0NTYtNDI2NjE0MTc0MDAwJyxcbiAgICAgICAgdGl0bGU6ICdNaW5pbWFsIEJpbGwnLFxuICAgICAgICBjYXRlZ29yeTogJ290aGVyJyBhcyBjb25zdCxcbiAgICAgICAgcGF5bWVudFR5cGU6ICd1bmlxdWUnIGFzIGNvbnN0LFxuICAgICAgICBjb3N0czogWzUwXSxcbiAgICAgICAgdG90YWxBbW91bnQ6IDUwLFxuICAgICAgICBzdGFydERhdGU6ICcyMDI0LTAxLTAxJyxcbiAgICAgIH07XG5cbiAgICAgIGNvbnN0IHJlc3VsdCA9IGNyZWF0ZUJpbGxTY2hlbWEuc2FmZVBhcnNlKG1pbmltYWxEYXRhKTtcbiAgICAgIGV4cGVjdChyZXN1bHQuc3VjY2VzcykudG9CZSh0cnVlKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgdmFsaWRhdGUgcmVjdXJyZW50IGJpbGwgd2l0aCBzY2hlZHVsZScsICgpID0+IHtcbiAgICAgIGNvbnN0IHJlY3VycmVudERhdGEgPSB7XG4gICAgICAgIC4uLnZhbGlkQmlsbERhdGEsXG4gICAgICAgIHBheW1lbnRUeXBlOiAncmVjdXJyZW50JyBhcyBjb25zdCxcbiAgICAgICAgc2NoZWR1bGVQYXltZW50OiAnbW9udGhseScgYXMgY29uc3QsXG4gICAgICAgIGVuZERhdGU6ICcyMDI0LTEyLTMxJyxcbiAgICAgIH07XG5cbiAgICAgIGNvbnN0IHJlc3VsdCA9IGNyZWF0ZUJpbGxTY2hlbWEuc2FmZVBhcnNlKHJlY3VycmVudERhdGEpO1xuICAgICAgZXhwZWN0KHJlc3VsdC5zdWNjZXNzKS50b0JlKHRydWUpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCB2YWxpZGF0ZSBjdXN0b20gc2NoZWR1bGUgd2l0aCBkYXRlcyBhcnJheScsICgpID0+IHtcbiAgICAgIGNvbnN0IGN1c3RvbURhdGEgPSB7XG4gICAgICAgIC4uLnZhbGlkQmlsbERhdGEsXG4gICAgICAgIHBheW1lbnRUeXBlOiAncmVjdXJyZW50JyBhcyBjb25zdCxcbiAgICAgICAgc2NoZWR1bGVQYXltZW50OiAnY3VzdG9tJyBhcyBjb25zdCxcbiAgICAgICAgc2NoZWR1bGVDdXN0b206IFsnMjAyNC0wMS0xNScsICcyMDI0LTA0LTE1JywgJzIwMjQtMDctMTUnLCAnMjAyNC0xMC0xNSddLFxuICAgICAgfTtcblxuICAgICAgY29uc3QgcmVzdWx0ID0gY3JlYXRlQmlsbFNjaGVtYS5zYWZlUGFyc2UoY3VzdG9tRGF0YSk7XG4gICAgICBleHBlY3QocmVzdWx0LnN1Y2Nlc3MpLnRvQmUodHJ1ZSk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdCaWxsIEZpbHRlciBTY2hlbWEgVmFsaWRhdGlvbicsICgpID0+IHtcbiAgICBpdCgnc2hvdWxkIGFjY2VwdCB2YWxpZCBmaWx0ZXIgZGF0YScsICgpID0+IHtcbiAgICAgIGNvbnN0IHZhbGlkRmlsdGVycyA9IHtcbiAgICAgICAgYnVpbGRpbmdJZDogJzEyM2U0NTY3LWU4OWItMTJkMy1hNDU2LTQyNjYxNDE3NDAwMCcsXG4gICAgICAgIGNhdGVnb3J5OiAnaW5zdXJhbmNlJyxcbiAgICAgICAgeWVhcjogJzIwMjQnLFxuICAgICAgICBzdGF0dXM6ICdwYWlkJyBhcyBjb25zdCxcbiAgICAgIH07XG5cbiAgICAgIGNvbnN0IHJlc3VsdCA9IGJpbGxGaWx0ZXJTY2hlbWEuc2FmZVBhcnNlKHZhbGlkRmlsdGVycyk7XG4gICAgICBleHBlY3QocmVzdWx0LnN1Y2Nlc3MpLnRvQmUodHJ1ZSk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIHJlcXVpcmUgYnVpbGRpbmdJZCB0byBiZSBVVUlEJywgKCkgPT4ge1xuICAgICAgY29uc3QgaW52YWxpZEZpbHRlcnMgPSB7XG4gICAgICAgIGJ1aWxkaW5nSWQ6ICdpbnZhbGlkLXV1aWQnLFxuICAgICAgICBjYXRlZ29yeTogJ2luc3VyYW5jZScsXG4gICAgICB9O1xuXG4gICAgICBjb25zdCByZXN1bHQgPSBiaWxsRmlsdGVyU2NoZW1hLnNhZmVQYXJzZShpbnZhbGlkRmlsdGVycyk7XG4gICAgICBleHBlY3QocmVzdWx0LnN1Y2Nlc3MpLnRvQmUoZmFsc2UpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBhY2NlcHQgbWluaW1hbCBmaWx0ZXIgd2l0aCBvbmx5IGJ1aWxkaW5nSWQnLCAoKSA9PiB7XG4gICAgICBjb25zdCBtaW5pbWFsRmlsdGVycyA9IHtcbiAgICAgICAgYnVpbGRpbmdJZDogJzEyM2U0NTY3LWU4OWItMTJkMy1hNDU2LTQyNjYxNDE3NDAwMCcsXG4gICAgICB9O1xuXG4gICAgICBjb25zdCByZXN1bHQgPSBiaWxsRmlsdGVyU2NoZW1hLnNhZmVQYXJzZShtaW5pbWFsRmlsdGVycyk7XG4gICAgICBleHBlY3QocmVzdWx0LnN1Y2Nlc3MpLnRvQmUodHJ1ZSk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIHJlamVjdCBpbnZhbGlkIHN0YXR1cyBpbiBmaWx0ZXJzJywgKCkgPT4ge1xuICAgICAgY29uc3QgaW52YWxpZEZpbHRlcnMgPSB7XG4gICAgICAgIGJ1aWxkaW5nSWQ6ICcxMjNlNDU2Ny1lODliLTEyZDMtYTQ1Ni00MjY2MTQxNzQwMDAnLFxuICAgICAgICBzdGF0dXM6ICdpbnZhbGlkX3N0YXR1cycsXG4gICAgICB9O1xuXG4gICAgICBjb25zdCByZXN1bHQgPSBiaWxsRmlsdGVyU2NoZW1hLnNhZmVQYXJzZShpbnZhbGlkRmlsdGVycyk7XG4gICAgICBleHBlY3QocmVzdWx0LnN1Y2Nlc3MpLnRvQmUoZmFsc2UpO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnRWRnZSBDYXNlcyBhbmQgRGF0YSBJbnRlZ3JpdHknLCAoKSA9PiB7XG4gICAgaXQoJ3Nob3VsZCBoYW5kbGUgdmVyeSBsYXJnZSBjb3N0IGFtb3VudHMnLCAoKSA9PiB7XG4gICAgICBjb25zdCBsYXJnZUNvc3REYXRhID0ge1xuICAgICAgICBidWlsZGluZ0lkOiAnMTIzZTQ1NjctZTg5Yi0xMmQzLWE0NTYtNDI2NjE0MTc0MDAwJyxcbiAgICAgICAgdGl0bGU6ICdMYXJnZSBDb3N0IEJpbGwnLFxuICAgICAgICBjYXRlZ29yeTogJ290aGVyJyBhcyBjb25zdCxcbiAgICAgICAgcGF5bWVudFR5cGU6ICd1bmlxdWUnIGFzIGNvbnN0LFxuICAgICAgICBjb3N0czogWzk5OTk5OS45OV0sXG4gICAgICAgIHRvdGFsQW1vdW50OiA5OTk5OTkuOTksXG4gICAgICAgIHN0YXJ0RGF0ZTogJzIwMjQtMDEtMDEnLFxuICAgICAgfTtcblxuICAgICAgY29uc3QgcmVzdWx0ID0gY3JlYXRlQmlsbFNjaGVtYS5zYWZlUGFyc2UobGFyZ2VDb3N0RGF0YSk7XG4gICAgICBleHBlY3QocmVzdWx0LnN1Y2Nlc3MpLnRvQmUodHJ1ZSk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGhhbmRsZSBtdWx0aXBsZSBjb3N0cyBpbiBhcnJheScsICgpID0+IHtcbiAgICAgIGNvbnN0IG11bHRpQ29zdERhdGEgPSB7XG4gICAgICAgIGJ1aWxkaW5nSWQ6ICcxMjNlNDU2Ny1lODliLTEyZDMtYTQ1Ni00MjY2MTQxNzQwMDAnLFxuICAgICAgICB0aXRsZTogJ011bHRpLUNvc3QgQmlsbCcsXG4gICAgICAgIGNhdGVnb3J5OiAnbWFpbnRlbmFuY2UnIGFzIGNvbnN0LFxuICAgICAgICBwYXltZW50VHlwZTogJ3JlY3VycmVudCcgYXMgY29uc3QsXG4gICAgICAgIHNjaGVkdWxlUGF5bWVudDogJ3F1YXJ0ZXJseScgYXMgY29uc3QsXG4gICAgICAgIGNvc3RzOiBbNTAwLCA2MDAsIDcwMCwgODAwXSxcbiAgICAgICAgdG90YWxBbW91bnQ6IDI2MDAsXG4gICAgICAgIHN0YXJ0RGF0ZTogJzIwMjQtMDEtMDEnLFxuICAgICAgfTtcblxuICAgICAgY29uc3QgcmVzdWx0ID0gY3JlYXRlQmlsbFNjaGVtYS5zYWZlUGFyc2UobXVsdGlDb3N0RGF0YSk7XG4gICAgICBleHBlY3QocmVzdWx0LnN1Y2Nlc3MpLnRvQmUodHJ1ZSk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIHJlamVjdCBlbXB0eSBjb3N0cyBhcnJheScsICgpID0+IHtcbiAgICAgIGNvbnN0IGVtcHR5Q29zdHNEYXRhID0ge1xuICAgICAgICBidWlsZGluZ0lkOiAnMTIzZTQ1NjctZTg5Yi0xMmQzLWE0NTYtNDI2NjE0MTc0MDAwJyxcbiAgICAgICAgdGl0bGU6ICdFbXB0eSBDb3N0cyBCaWxsJyxcbiAgICAgICAgY2F0ZWdvcnk6ICdvdGhlcicgYXMgY29uc3QsXG4gICAgICAgIHBheW1lbnRUeXBlOiAndW5pcXVlJyBhcyBjb25zdCxcbiAgICAgICAgY29zdHM6IFtdLFxuICAgICAgICB0b3RhbEFtb3VudDogMTAwLFxuICAgICAgICBzdGFydERhdGU6ICcyMDI0LTAxLTAxJyxcbiAgICAgIH07XG5cbiAgICAgIGNvbnN0IHJlc3VsdCA9IGNyZWF0ZUJpbGxTY2hlbWEuc2FmZVBhcnNlKGVtcHR5Q29zdHNEYXRhKTtcbiAgICAgIGV4cGVjdChyZXN1bHQuc3VjY2VzcykudG9CZShmYWxzZSk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGhhbmRsZSB2ZXJ5IGxvbmcgdGl0bGUgYW5kIGRlc2NyaXB0aW9uJywgKCkgPT4ge1xuICAgICAgY29uc3QgbG9uZ1RleHREYXRhID0ge1xuICAgICAgICBidWlsZGluZ0lkOiAnMTIzZTQ1NjctZTg5Yi0xMmQzLWE0NTYtNDI2NjE0MTc0MDAwJyxcbiAgICAgICAgdGl0bGU6ICdBJy5yZXBlYXQoMTAwMCksIC8vIFZlcnkgbG9uZyB0aXRsZVxuICAgICAgICBkZXNjcmlwdGlvbjogJ0InLnJlcGVhdCg1MDAwKSwgLy8gVmVyeSBsb25nIGRlc2NyaXB0aW9uXG4gICAgICAgIGNhdGVnb3J5OiAnb3RoZXInIGFzIGNvbnN0LFxuICAgICAgICBwYXltZW50VHlwZTogJ3VuaXF1ZScgYXMgY29uc3QsXG4gICAgICAgIGNvc3RzOiBbMTAwXSxcbiAgICAgICAgdG90YWxBbW91bnQ6IDEwMCxcbiAgICAgICAgc3RhcnREYXRlOiAnMjAyNC0wMS0wMScsXG4gICAgICB9O1xuXG4gICAgICBjb25zdCByZXN1bHQgPSBjcmVhdGVCaWxsU2NoZW1hLnNhZmVQYXJzZShsb25nVGV4dERhdGEpO1xuICAgICAgZXhwZWN0KHJlc3VsdC5zdWNjZXNzKS50b0JlKHRydWUpOyAvLyBTY2hlbWEgZG9lc24ndCBlbmZvcmNlIG1heCBsZW5ndGggY3VycmVudGx5XG4gICAgfSk7XG4gIH0pO1xufSk7XG4iXSwidmVyc2lvbiI6M30=