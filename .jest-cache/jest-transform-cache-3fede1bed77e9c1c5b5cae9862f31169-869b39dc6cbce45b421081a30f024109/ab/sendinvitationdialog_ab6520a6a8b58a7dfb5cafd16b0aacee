2259bd4a1e0de442e41c458254941fa7
"use strict";
var __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {
    if (k2 === undefined) k2 = k;
    var desc = Object.getOwnPropertyDescriptor(m, k);
    if (!desc || ("get" in desc ? !m.__esModule : desc.writable || desc.configurable)) {
      desc = { enumerable: true, get: function() { return m[k]; } };
    }
    Object.defineProperty(o, k2, desc);
}) : (function(o, m, k, k2) {
    if (k2 === undefined) k2 = k;
    o[k2] = m[k];
}));
var __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {
    Object.defineProperty(o, "default", { enumerable: true, value: v });
}) : function(o, v) {
    o["default"] = v;
});
var __importStar = (this && this.__importStar) || (function () {
    var ownKeys = function(o) {
        ownKeys = Object.getOwnPropertyNames || function (o) {
            var ar = [];
            for (var k in o) if (Object.prototype.hasOwnProperty.call(o, k)) ar[ar.length] = k;
            return ar;
        };
        return ownKeys(o);
    };
    return function (mod) {
        if (mod && mod.__esModule) return mod;
        var result = {};
        if (mod != null) for (var k = ownKeys(mod), i = 0; i < k.length; i++) if (k[i] !== "default") __createBinding(result, mod, k[i]);
        __setModuleDefault(result, mod);
        return result;
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
exports.SendInvitationDialog = SendInvitationDialog;
const jsx_runtime_1 = require("react/jsx-runtime");
const react_1 = __importStar(require("react"));
const react_query_1 = require("@tanstack/react-query");
const queryClient_1 = require("@/lib/queryClient");
const use_language_1 = require("@/hooks/use-language");
const use_auth_1 = require("@/hooks/use-auth");
const react_hook_form_1 = require("react-hook-form");
const zod_1 = require("@hookform/resolvers/zod");
const zod_2 = require("zod");
const dialog_1 = require("@/components/ui/dialog");
const button_1 = require("@/components/ui/button");
const input_1 = require("@/components/ui/input");
const textarea_1 = require("@/components/ui/textarea");
const select_1 = require("@/components/ui/select");
const form_1 = require("@/components/ui/form");
const lucide_react_1 = require("lucide-react");
const use_toast_1 = require("@/hooks/use-toast");
// Form validation schema
const invitationSchema = zod_2.z
    .object({
    email: zod_2.z.string().email('invalidEmailFormat').optional(),
    firstName: zod_2.z.string().max(50, 'firstNameTooLong').regex(/^[a-zA-ZÀ-ÿ\s'-]*$/, 'firstNameInvalidCharacters').optional(),
    lastName: zod_2.z.string().max(50, 'lastNameTooLong').regex(/^[a-zA-ZÀ-ÿ\s'-]*$/, 'lastNameInvalidCharacters').optional(),
    role: zod_2.z.enum([
        'admin',
        'manager',
        'tenant',
        'resident',
        'demo_manager',
        'demo_tenant',
        'demo_resident',
    ]),
    organizationId: zod_2.z.string().min(1, 'organizationRequired'),
    buildingId: zod_2.z.string().optional(),
    residenceId: zod_2.z.string().optional(),
    personalMessage: zod_2.z.string().max(500, 'personalMessageTooLong').optional(),
    expiryDays: zod_2.z.number().min(1, 'expiryDaysInvalid').max(30, 'expiryDaysInvalid'),
})
    .refine((data) => {
    // For demo roles, first and last name are required instead of email
    if (['demo_manager', 'demo_tenant', 'demo_resident'].includes(data.role)) {
        return !!data.firstName && !!data.lastName;
    }
    // For regular roles, email is required
    return !!data.email;
}, {
    message: 'Email address is required for regular invitations (example: user@domain.com). For demo users, provide first and last name instead.',
    path: ['email'],
})
    .refine((data) => {
    // If role is tenant or resident and a specific building is selected, residence must be assigned
    if (['tenant', 'resident', 'demo_tenant', 'demo_resident'].includes(data.role) &&
        data.buildingId &&
        data.buildingId !== 'none' &&
        data.buildingId !== '') {
        return !!data.residenceId && data.residenceId !== '';
    }
    return true;
}, {
    message: 'Please select a specific residence unit for tenants and residents when a building is selected',
    path: ['residenceId'],
});
/**
 * Send Invitation Dialog Component.
 *
 * Allows sending single invitations with comprehensive options
 * including role selection, organization/building assignment, and custom messages.
 * @param props - Component props.
 * @param props.open - Whether dialog is open.
 * @param props.onOpenChange - Handler for dialog open state changes.
 * @param props.onSuccess - Handler called when invitation is sent successfully.
 * @returns JSX element for the invitation dialog.
 */
function SendInvitationDialog({ open, onOpenChange, onSuccess }) {
    const { t } = (0, use_language_1.useLanguage)();
    const { user: currentUser, hasRole } = (0, use_auth_1.useAuth)();
    const { toast } = (0, use_toast_1.useToast)();
    const [selectedOrgType, setSelectedOrgType] = (0, react_1.useState)('');
    // Single invitation form
    const form = (0, react_hook_form_1.useForm)({
        resolver: (0, zod_1.zodResolver)(invitationSchema),
        defaultValues: {
            email: '',
            firstName: '',
            lastName: '',
            role: 'tenant',
            organizationId: '',
            buildingId: '',
            residenceId: '',
            expiryDays: 7,
            personalMessage: '',
        },
    });
    // Fetch organizations (filtered by user access)
    const { data: organizations } = (0, react_query_1.useQuery)({
        queryKey: ['/api/organizations'],
        queryFn: async () => {
            const response = await (0, queryClient_1.apiRequest)('GET', '/api/organizations');
            return response.json();
        },
        enabled: open,
    });
    // Fetch buildings
    const { data: buildings, error: buildingsError, isLoading: buildingsLoading } = (0, react_query_1.useQuery)({
        queryKey: ['/api/manager/buildings'],
        queryFn: async () => {
            const response = await (0, queryClient_1.apiRequest)('GET', '/api/manager/buildings');
            const data = await response.json();
            // The API returns { buildings: [...], meta: {...} } but we need just the buildings array
            return data.buildings || data;
        },
        enabled: open,
    });
    // Fetch residences  
    const { data: residences } = (0, react_query_1.useQuery)({
        queryKey: ['/api/residences'],
        queryFn: async () => {
            const response = await (0, queryClient_1.apiRequest)('GET', '/api/residences');
            const data = await response.json();
            // Handle both direct array and wrapped response formats
            return data.residences || data;
        },
        enabled: open,
    });
    // Helper functions for filtering data based on selections
    const getFilteredOrganizations = () => {
        if (!organizations || !Array.isArray(organizations)) {
            return [];
        }
        // Filter out any invalid organizations with detailed logging
        const validOrgs = organizations.filter((org) => {
            const isValid = org &&
                typeof org === 'object' &&
                org.id &&
                typeof org.id === 'string' &&
                org.id.trim() !== '' &&
                org.name &&
                typeof org.name === 'string' &&
                org.name.trim() !== '';
            return isValid;
        });
        if (currentUser?.role === 'admin') {
            // Admins can add users to any organization
            return validOrgs;
        }
        else if (currentUser?.role === 'manager') {
            // Managers can only add users to their own organization
            return validOrgs;
        }
        // Default: show all valid organizations for now
        return validOrgs;
    };
    // Check if user can access a specific organization for invitations
    const canInviteToOrganization = (orgId) => {
        if (!orgId || !organizations) {
            return false;
        }
        const targetOrg = organizations.find((org) => org.id === orgId);
        const currentUserOrg = organizations[0]; // Use first organization for access control
        // Organization filtering for user access control
        if (targetOrg?.name?.toLowerCase() === 'demo') {
            return currentUser?.role === 'admin';
        }
        // Koveo organization users can add to any organization (override all restrictions)
        if (currentUserOrg?.name?.toLowerCase() === 'koveo') {
            return true;
        }
        // Simplified access control for now
        // Admins can add to organizations they have access to
        if (currentUser?.role === 'admin') {
            return true;
        }
        // Others can only add to their own organization - simplified for now
        return true;
    };
    const getFilteredBuildings = (selectedOrgId) => {
        if (!buildings || !selectedOrgId) {
            return [];
        }
        return buildings.filter((building) => building.organizationId === selectedOrgId);
    };
    const getFilteredResidences = (selectedBuildingId, selectedOrgId) => {
        if (!residences) {
            return [];
        }
        // If a specific building is selected, show only residences from that building
        if (selectedBuildingId && selectedBuildingId !== 'none') {
            return residences.filter((residence) => residence.buildingId === selectedBuildingId);
        }
        // If no building selected but organization is selected, show all residences from that organization
        if (selectedOrgId && (!selectedBuildingId || selectedBuildingId === 'none')) {
            const orgBuildings = buildings?.filter(building => building.organizationId === selectedOrgId) || [];
            const orgBuildingIds = orgBuildings.map(building => building.id);
            return residences.filter((residence) => orgBuildingIds.includes(residence.buildingId));
        }
        return [];
    };
    // Single invitation mutation
    const invitationMutation = (0, react_query_1.useMutation)({
        mutationFn: async (data) => {
            const expiresAt = new Date();
            expiresAt.setDate(expiresAt.getDate() + data.expiryDays);
            // For demo roles, create user directly instead of sending invitation
            if (['demo_manager', 'demo_tenant', 'demo_resident'].includes(data.role)) {
                const response = await (0, queryClient_1.apiRequest)('POST', '/api/users/demo', {
                    firstName: data.firstName,
                    lastName: data.lastName,
                    role: data.role,
                    organizationId: data.organizationId,
                    residenceId: data.residenceId || null,
                });
                return response.json();
            }
            // Regular invitation flow
            const response = await (0, queryClient_1.apiRequest)('POST', '/api/invitations', {
                organizationId: data.organizationId,
                residenceId: data.residenceId || null,
                email: data.email,
                role: data.role,
                invitedByUserId: currentUser?.id,
                expiresAt: expiresAt.toISOString(),
                personalMessage: data.personalMessage || null,
            });
            return response.json();
        },
        onSuccess: (_, variables) => {
            const isDemoRole = ['demo_manager', 'demo_tenant', 'demo_resident'].includes(variables.role);
            toast({
                title: isDemoRole ? 'Demo User Created' : t('invitationSent'),
                description: isDemoRole
                    ? 'Demo user has been created successfully'
                    : t('invitationSentSuccessfully'),
            });
            form.reset();
            onSuccess();
            onOpenChange(false);
        },
        onError: (error) => {
            toast({
                title: 'Error',
                description: error.message,
                variant: 'destructive',
            });
        },
    });
    const onSubmit = (_data) => {
        invitationMutation.mutate(_data);
    };
    const canInviteRole = (role) => {
        if (hasRole(['admin'])) {
            // Only admin can invite an admin, admin can invite to any organization
            return true;
        }
        if (hasRole(['manager'])) {
            // Manager can invite regular and demo roles (but not admin)
            if (['resident', 'tenant', 'manager', 'demo_manager', 'demo_tenant', 'demo_resident'].includes(role)) {
                return true;
            }
        }
        // Residents and tenants cannot invite anyone
        return false;
    };
    // Get available roles based on organization type using useMemo for proper reactivity
    const organizationId = form.watch('organizationId');
    const availableRoles = (0, react_1.useMemo)(() => {
        // Return empty array if no organization is selected
        if (!organizationId) {
            return [];
        }
        const selectedOrg = organizations?.find((org) => org.id === organizationId);
        const isDemoOrg = selectedOrg?.type === 'demo';
        if (isDemoOrg) {
            // For demo organizations, allow both demo roles and regular roles
            const roles = ['admin', 'manager', 'tenant', 'resident', 'demo_manager', 'demo_tenant', 'demo_resident'].filter(canInviteRole);
            return roles;
        }
        const roles = ['admin', 'manager', 'tenant', 'resident'].filter(canInviteRole);
        return roles;
    }, [organizationId, organizations, hasRole]);
    return ((0, jsx_runtime_1.jsx)(dialog_1.Dialog, { open: open, onOpenChange: onOpenChange, children: (0, jsx_runtime_1.jsxs)(dialog_1.DialogContent, { className: 'max-w-2xl max-h-[90vh] overflow-y-auto', children: [(0, jsx_runtime_1.jsxs)(dialog_1.DialogHeader, { children: [(0, jsx_runtime_1.jsxs)(dialog_1.DialogTitle, { className: 'flex items-center gap-2', children: [(0, jsx_runtime_1.jsx)(lucide_react_1.UserPlus, { className: 'h-5 w-5' }), t('inviteUser')] }), (0, jsx_runtime_1.jsx)(dialog_1.DialogDescription, { children: t('inviteUserDescription') })] }), (0, jsx_runtime_1.jsx)("div", { className: 'space-y-4', children: (0, jsx_runtime_1.jsx)(form_1.Form, { ...form, children: (0, jsx_runtime_1.jsxs)("form", { onSubmit: form.handleSubmit(onSubmit), className: 'space-y-4', children: [(0, jsx_runtime_1.jsx)(form_1.FormField, { control: form.control, name: 'organizationId', render: ({ field }) => ((0, jsx_runtime_1.jsxs)(form_1.FormItem, { children: [(0, jsx_runtime_1.jsxs)(form_1.FormLabel, { children: [t('organization'), " *"] }), (0, jsx_runtime_1.jsx)(form_1.FormControl, { children: (0, jsx_runtime_1.jsxs)("select", { ...field, onChange: (e) => {
                                                        field.onChange(e.target.value);
                                                        const selectedOrg = organizations?.find((org) => org.id === e.target.value);
                                                        setSelectedOrgType(selectedOrg?.type || '');
                                                        // Reset building and residence when organization changes
                                                        form.setValue('buildingId', '');
                                                        form.setValue('residenceId', '');
                                                        // Reset role when switching between demo and regular orgs
                                                        form.setValue('role', selectedOrg?.type === 'demo' ? 'demo_tenant' : 'tenant');
                                                    }, disabled: currentUser?.role === 'manager', className: 'flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50', children: [(0, jsx_runtime_1.jsx)("option", { value: '', children: t('selectOrganization') }), getFilteredOrganizations().map((org) => {
                                                            if (!org?.id || !org?.name) {
                                                                return null;
                                                            }
                                                            const canInvite = canInviteToOrganization(org.id);
                                                            return ((0, jsx_runtime_1.jsxs)("option", { value: org.id, disabled: !canInvite, children: [org.name, " ", org.type === 'demo' ? '(Demo)' : ''] }, org.id));
                                                        })] }) }), (0, jsx_runtime_1.jsx)(form_1.FormDescription, { children: currentUser?.role === 'manager'
                                                    ? 'Managers can only invite to their organization'
                                                    : 'Select target organization' }), (0, jsx_runtime_1.jsx)(form_1.FormMessage, {})] })) }), (0, jsx_runtime_1.jsx)(form_1.FormField, { control: form.control, name: 'role', render: ({ field }) => ((0, jsx_runtime_1.jsxs)(form_1.FormItem, { children: [(0, jsx_runtime_1.jsx)(form_1.FormLabel, { children: t('role') }), (0, jsx_runtime_1.jsxs)(select_1.Select, { onValueChange: field.onChange, value: field.value, disabled: !organizationId, children: [(0, jsx_runtime_1.jsx)(form_1.FormControl, { children: (0, jsx_runtime_1.jsx)(select_1.SelectTrigger, { children: (0, jsx_runtime_1.jsx)(select_1.SelectValue, { placeholder: t('selectRole') }) }) }), (0, jsx_runtime_1.jsx)(select_1.SelectContent, { children: organizationId ? availableRoles.map((role) => ((0, jsx_runtime_1.jsx)(select_1.SelectItem, { value: role, children: (0, jsx_runtime_1.jsxs)("div", { className: 'flex items-center gap-2', children: [(0, jsx_runtime_1.jsx)(lucide_react_1.Shield, { className: 'h-4 w-4' }), role === 'admin'
                                                                        ? t('admin')
                                                                        : role === 'manager'
                                                                            ? t('manager')
                                                                            : role === 'resident'
                                                                                ? t('resident')
                                                                                : role === 'tenant'
                                                                                    ? t('tenant')
                                                                                    : role === 'demo_manager'
                                                                                        ? 'Demo Manager'
                                                                                        : role === 'demo_tenant'
                                                                                            ? 'Demo Tenant'
                                                                                            : 'Demo Resident'] }) }, role))) : ((0, jsx_runtime_1.jsx)(select_1.SelectItem, { value: "no-organization", disabled: true, children: "Please select an organization first" })) })] }, `role-select-${organizationId}`), (0, jsx_runtime_1.jsx)(form_1.FormMessage, {})] })) }), ['demo_manager', 'demo_tenant', 'demo_resident'].includes(form.watch('role')) ? ((0, jsx_runtime_1.jsxs)(jsx_runtime_1.Fragment, { children: [(0, jsx_runtime_1.jsx)(form_1.FormField, { control: form.control, name: 'firstName', render: ({ field }) => ((0, jsx_runtime_1.jsxs)(form_1.FormItem, { children: [(0, jsx_runtime_1.jsx)(form_1.FormLabel, { children: "First Name *" }), (0, jsx_runtime_1.jsx)(form_1.FormControl, { children: (0, jsx_runtime_1.jsx)(input_1.Input, { placeholder: 'Enter first name', ...field }) }), (0, jsx_runtime_1.jsx)(form_1.FormMessage, {})] })) }), (0, jsx_runtime_1.jsx)(form_1.FormField, { control: form.control, name: 'lastName', render: ({ field }) => ((0, jsx_runtime_1.jsxs)(form_1.FormItem, { children: [(0, jsx_runtime_1.jsx)(form_1.FormLabel, { children: "Last Name *" }), (0, jsx_runtime_1.jsx)(form_1.FormControl, { children: (0, jsx_runtime_1.jsx)(input_1.Input, { placeholder: 'Enter last name', ...field }) }), (0, jsx_runtime_1.jsx)(form_1.FormMessage, {})] })) })] })) : ((0, jsx_runtime_1.jsx)(form_1.FormField, { control: form.control, name: 'email', render: ({ field }) => ((0, jsx_runtime_1.jsxs)(form_1.FormItem, { children: [(0, jsx_runtime_1.jsxs)(form_1.FormLabel, { children: [t('emailAddress'), " *"] }), (0, jsx_runtime_1.jsx)(form_1.FormControl, { children: (0, jsx_runtime_1.jsx)(input_1.Input, { placeholder: t('enterEmailAddress'), type: 'email', ...field }) }), (0, jsx_runtime_1.jsx)(form_1.FormMessage, {})] })) })), form.watch('organizationId') && ((0, jsx_runtime_1.jsx)(form_1.FormField, { control: form.control, name: 'buildingId', render: ({ field }) => ((0, jsx_runtime_1.jsxs)(form_1.FormItem, { children: [(0, jsx_runtime_1.jsxs)(form_1.FormLabel, { children: ['Building', " (", t('optional'), ")"] }), (0, jsx_runtime_1.jsx)(form_1.FormControl, { children: (0, jsx_runtime_1.jsxs)("select", { ...field, onChange: (e) => {
                                                        field.onChange(e.target.value);
                                                        // Reset residence when building changes
                                                        form.setValue('residenceId', '');
                                                    }, className: 'flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50', children: [(0, jsx_runtime_1.jsx)("option", { value: '', children: 'Select building' }), (0, jsx_runtime_1.jsx)("option", { value: 'none', children: 'No specific building' }), getFilteredBuildings(form.watch('organizationId')).map((building) => ((0, jsx_runtime_1.jsxs)("option", { value: building.id, children: [building.name, " - ", building.address] }, building.id)))] }) }), (0, jsx_runtime_1.jsx)(form_1.FormMessage, {})] })) })), ['tenant', 'resident', 'demo_tenant', 'demo_resident'].includes(form.watch('role')) &&
                                    form.watch('buildingId') &&
                                    form.watch('buildingId') !== 'none' && ((0, jsx_runtime_1.jsx)(form_1.FormField, { control: form.control, name: 'residenceId', render: ({ field }) => ((0, jsx_runtime_1.jsxs)(form_1.FormItem, { children: [(0, jsx_runtime_1.jsxs)(form_1.FormLabel, { children: ['Residence', " *"] }), (0, jsx_runtime_1.jsx)(form_1.FormControl, { children: (0, jsx_runtime_1.jsxs)("select", { ...field, onChange: field.onChange, className: 'flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50', children: [(0, jsx_runtime_1.jsx)("option", { value: '', children: 'Select residence' }), getFilteredResidences(form.watch('buildingId'), form.watch('organizationId')).map((residence) => ((0, jsx_runtime_1.jsxs)("option", { value: residence.id, children: ['Unit', " ", residence.unitNumber, residence.floor && ` - ${'Floor'} ${residence.floor}`] }, residence.id)))] }) }), (0, jsx_runtime_1.jsx)(form_1.FormDescription, { children: 'Residence required for tenants and residents' }), (0, jsx_runtime_1.jsx)(form_1.FormMessage, {})] })) })), !['demo_manager', 'demo_tenant', 'demo_resident'].includes(form.watch('role')) && ((0, jsx_runtime_1.jsx)(form_1.FormField, { control: form.control, name: 'expiryDays', render: ({ field }) => ((0, jsx_runtime_1.jsxs)(form_1.FormItem, { children: [(0, jsx_runtime_1.jsx)(form_1.FormLabel, { children: t('expiresIn') }), (0, jsx_runtime_1.jsx)(form_1.FormControl, { children: (0, jsx_runtime_1.jsxs)("select", { ...field, onChange: (e) => field.onChange(parseInt(e.target.value)), value: field.value.toString(), className: 'flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50', children: [(0, jsx_runtime_1.jsxs)("option", { value: '1', children: ["1 ", t('day')] }), (0, jsx_runtime_1.jsxs)("option", { value: '3', children: ["3 ", t('days')] }), (0, jsx_runtime_1.jsxs)("option", { value: '7', children: ["7 ", t('days')] }), (0, jsx_runtime_1.jsxs)("option", { value: '14', children: ["14 ", t('days')] }), (0, jsx_runtime_1.jsxs)("option", { value: '30', children: ["30 ", t('days')] })] }) }), (0, jsx_runtime_1.jsx)(form_1.FormMessage, {})] })) })), !['demo_manager', 'demo_tenant', 'demo_resident'].includes(form.watch('role')) && ((0, jsx_runtime_1.jsx)(form_1.FormField, { control: form.control, name: 'personalMessage', render: ({ field }) => ((0, jsx_runtime_1.jsxs)(form_1.FormItem, { children: [(0, jsx_runtime_1.jsxs)(form_1.FormLabel, { children: [t('personalMessage'), " (", t('optional'), ")"] }), (0, jsx_runtime_1.jsx)(form_1.FormControl, { children: (0, jsx_runtime_1.jsx)(textarea_1.Textarea, { placeholder: t('personalMessagePlaceholder'), className: 'min-h-[80px]', ...field }) }), (0, jsx_runtime_1.jsx)(form_1.FormDescription, { children: t('personalMessageDescription') }), (0, jsx_runtime_1.jsx)(form_1.FormMessage, {})] })) })), (0, jsx_runtime_1.jsxs)(dialog_1.DialogFooter, { children: [(0, jsx_runtime_1.jsx)(button_1.Button, { type: 'button', variant: 'outline', onClick: () => onOpenChange(false), children: t('cancel') }), (0, jsx_runtime_1.jsx)(button_1.Button, { type: 'submit', disabled: invitationMutation.isPending, children: invitationMutation.isPending
                                                ? selectedOrgType === 'Demo'
                                                    ? 'Creating User...'
                                                    : t('sending')
                                                : selectedOrgType === 'Demo'
                                                    ? 'Create Demo User'
                                                    : t('sendInvitation') })] })] }) }) })] }) }));
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiL2hvbWUvcnVubmVyL3dvcmtzcGFjZS9jbGllbnQvc3JjL2NvbXBvbmVudHMvYWRtaW4vc2VuZC1pbnZpdGF0aW9uLWRpYWxvZy50c3giLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFvTEEsb0RBZ2pCQzs7QUFwdUJELCtDQUFpRDtBQUNqRCx1REFBOEQ7QUFDOUQsbURBQStDO0FBQy9DLHVEQUFtRDtBQUNuRCwrQ0FBMkM7QUFDM0MscURBQTBDO0FBQzFDLGlEQUFzRDtBQUN0RCw2QkFBd0I7QUFDeEIsbURBT2dDO0FBQ2hDLG1EQUFnRDtBQUNoRCxpREFBOEM7QUFDOUMsdURBQW9EO0FBQ3BELG1EQU1nQztBQUNoQywrQ0FROEI7QUFDOUIsK0NBQWdEO0FBRWhELGlEQUE2QztBQUU3Qyx5QkFBeUI7QUFDekIsTUFBTSxnQkFBZ0IsR0FBRyxPQUFDO0tBQ3ZCLE1BQU0sQ0FBQztJQUNOLEtBQUssRUFBRSxPQUFDLENBQUMsTUFBTSxFQUFFLENBQUMsS0FBSyxDQUFDLG9CQUFvQixDQUFDLENBQUMsUUFBUSxFQUFFO0lBQ3hELFNBQVMsRUFBRSxPQUFDLENBQUMsTUFBTSxFQUFFLENBQUMsR0FBRyxDQUFDLEVBQUUsRUFBRSxrQkFBa0IsQ0FBQyxDQUFDLEtBQUssQ0FBQyxvQkFBb0IsRUFBRSw0QkFBNEIsQ0FBQyxDQUFDLFFBQVEsRUFBRTtJQUN0SCxRQUFRLEVBQUUsT0FBQyxDQUFDLE1BQU0sRUFBRSxDQUFDLEdBQUcsQ0FBQyxFQUFFLEVBQUUsaUJBQWlCLENBQUMsQ0FBQyxLQUFLLENBQUMsb0JBQW9CLEVBQUUsMkJBQTJCLENBQUMsQ0FBQyxRQUFRLEVBQUU7SUFDbkgsSUFBSSxFQUFFLE9BQUMsQ0FBQyxJQUFJLENBQUM7UUFDWCxPQUFPO1FBQ1AsU0FBUztRQUNULFFBQVE7UUFDUixVQUFVO1FBQ1YsY0FBYztRQUNkLGFBQWE7UUFDYixlQUFlO0tBQ2hCLENBQUM7SUFDRixjQUFjLEVBQUUsT0FBQyxDQUFDLE1BQU0sRUFBRSxD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QzNCLENBQUMsQ0FBQyxlQUFlLEtBQUssTUFBTTtvREFDMUIsQ0FBQyxDQUFDLGtCQUFrQjtvREFDcEIsQ0FBQyxDQUFDLENBQUMsQ0FBQyxTQUFTLENBQUM7Z0RBQ2hCLENBQUMsQ0FBQyxlQUFlLEtBQUssTUFBTTtvREFDMUIsQ0FBQyxDQUFDLGtCQUFrQjtvREFDcEIsQ0FBQyxDQUFDLENBQUMsQ0FBQyxnQkFBZ0IsQ0FBQyxHQUNsQixJQUNJLElBQ1YsR0FDRixHQUNILElBRVEsR0FDVCxDQUNWLENBQUM7QUFDSixDQUFDIiwibmFtZXMiOltdLCJzb3VyY2VzIjpbIi9ob21lL3J1bm5lci93b3Jrc3BhY2UvY2xpZW50L3NyYy9jb21wb25lbnRzL2FkbWluL3NlbmQtaW52aXRhdGlvbi1kaWFsb2cudHN4Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBSZWFjdCwgeyB1c2VTdGF0ZSwgdXNlTWVtbyB9IGZyb20gJ3JlYWN0JztcbmltcG9ydCB7IHVzZU11dGF0aW9uLCB1c2VRdWVyeSB9IGZyb20gJ0B0YW5zdGFjay9yZWFjdC1xdWVyeSc7XG5pbXBvcnQgeyBhcGlSZXF1ZXN0IH0gZnJvbSAnQC9saWIvcXVlcnlDbGllbnQnO1xuaW1wb3J0IHsgdXNlTGFuZ3VhZ2UgfSBmcm9tICdAL2hvb2tzL3VzZS1sYW5ndWFnZSc7XG5pbXBvcnQgeyB1c2VBdXRoIH0gZnJvbSAnQC9ob29rcy91c2UtYXV0aCc7XG5pbXBvcnQgeyB1c2VGb3JtIH0gZnJvbSAncmVhY3QtaG9vay1mb3JtJztcbmltcG9ydCB7IHpvZFJlc29sdmVyIH0gZnJvbSAnQGhvb2tmb3JtL3Jlc29sdmVycy96b2QnO1xuaW1wb3J0IHsgeiB9IGZyb20gJ3pvZCc7XG5pbXBvcnQge1xuICBEaWFsb2csXG4gIERpYWxvZ0NvbnRlbnQsXG4gIERpYWxvZ0Rlc2NyaXB0aW9uLFxuICBEaWFsb2dGb290ZXIsXG4gIERpYWxvZ0hlYWRlcixcbiAgRGlhbG9nVGl0bGUsXG59IGZyb20gJ0AvY29tcG9uZW50cy91aS9kaWFsb2cnO1xuaW1wb3J0IHsgQnV0dG9uIH0gZnJvbSAnQC9jb21wb25lbnRzL3VpL2J1dHRvbic7XG5pbXBvcnQgeyBJbnB1dCB9IGZyb20gJ0AvY29tcG9uZW50cy91aS9pbnB1dCc7XG5pbXBvcnQgeyBUZXh0YXJlYSB9IGZyb20gJ0AvY29tcG9uZW50cy91aS90ZXh0YXJlYSc7XG5pbXBvcnQge1xuICBTZWxlY3QsXG4gIFNlbGVjdENvbnRlbnQsXG4gIFNlbGVjdEl0ZW0sXG4gIFNlbGVjdFRyaWdnZXIsXG4gIFNlbGVjdFZhbHVlLFxufSBmcm9tICdAL2NvbXBvbmVudHMvdWkvc2VsZWN0JztcbmltcG9ydCB7XG4gIEZvcm0sXG4gIEZvcm1Db250cm9sLFxuICBGb3JtRGVzY3JpcHRpb24sXG4gIEZvcm1GaWVsZCxcbiAgRm9ybUl0ZW0sXG4gIEZvcm1MYWJlbCxcbiAgRm9ybU1lc3NhZ2UsXG59IGZyb20gJ0AvY29tcG9uZW50cy91aS9mb3JtJztcbmltcG9ydCB7IFVzZXJQbHVzLCBTaGllbGQgfSBmcm9tICdsdWNpZGUtcmVhY3QnO1xuXG5pbXBvcnQgeyB1c2VUb2FzdCB9IGZyb20gJ0AvaG9va3MvdXNlLXRvYXN0JztcblxuLy8gRm9ybSB2YWxpZGF0aW9uIHNjaGVtYVxuY29uc3QgaW52aXRhdGlvblNjaGVtYSA9IHpcbiAgLm9iamVjdCh7XG4gICAgZW1haWw6IHouc3RyaW5nKCkuZW1haWwoJ2ludmFsaWRFbWFpbEZvcm1hdCcpLm9wdGlvbmFsKCksXG4gICAgZmlyc3ROYW1lOiB6LnN0cmluZygpLm1heCg1MCwgJ2ZpcnN0TmFtZVRvb0xvbmcnKS5yZWdleCgvXlthLXpBLVrDgC3Dv1xccyctXSokLywgJ2ZpcnN0TmFtZUludmFsaWRDaGFyYWN0ZXJzJykub3B0aW9uYWwoKSxcbiAgICBsYXN0TmFtZTogei5zdHJpbmcoKS5tYXgoNTAsICdsYXN0TmFtZVRvb0xvbmcnKS5yZWdleCgvXlthLXpBLVrDgC3Dv1xccyctXSokLywgJ2xhc3ROYW1lSW52YWxpZENoYXJhY3RlcnMnKS5vcHRpb25hbCgpLFxuICAgIHJvbGU6IHouZW51bShbXG4gICAgICAnYWRtaW4nLFxuICAgICAgJ21hbmFnZXInLFxuICAgICAgJ3RlbmFudCcsXG4gICAgICAncmVzaWRlbnQnLFxuICAgICAgJ2RlbW9fbWFuYWdlcicsXG4gICAgICAnZGVtb190ZW5hbnQnLFxuICAgICAgJ2RlbW9fcmVzaWRlbnQnLFxuICAgIF0pLFxuICAgIG9yZ2FuaXphdGlvbklkOiB6LnN0cmluZygpLm1pbigxLCAnb3JnYW5pemF0aW9uUmVxdWlyZWQnKSxcbiAgICBidWlsZGluZ0lkOiB6LnN0cmluZygpLm9wdGlvbmFsKCksXG4gICAgcmVzaWRlbmNlSWQ6IHouc3RyaW5nKCkub3B0aW9uYWwoKSxcbiAgICBwZXJzb25hbE1lc3NhZ2U6IHouc3RyaW5nKCkubWF4KDUwMCwgJ3BlcnNvbmFsTWVzc2FnZVRvb0xvbmcnKS5vcHRpb25hbCgpLFxuICAgIGV4cGlyeURheXM6IHoubnVtYmVyKCkubWluKDEsICdleHBpcnlEYXlzSW52YWxpZCcpLm1heCgzMCwgJ2V4cGlyeURheXNJbnZhbGlkJyksXG4gIH0pXG4gIC5yZWZpbmUoXG4gICAgKGRhdGEpID0+IHtcblxuICAgICAgLy8gRm9yIGRlbW8gcm9sZXMsIGZpcnN0IGFuZCBsYXN0IG5hbWUgYXJlIHJlcXVpcmVkIGluc3RlYWQgb2YgZW1haWxcbiAgICAgIGlmIChbJ2RlbW9fbWFuYWdlcicsICdkZW1vX3RlbmFudCcsICdkZW1vX3Jlc2lkZW50J10uaW5jbHVkZXMoZGF0YS5yb2xlKSkge1xuICAgICAgICByZXR1cm4gISFkYXRhLmZpcnN0TmFtZSAmJiAhIWRhdGEubGFzdE5hbWU7XG5cbiAgICAgIH1cbiAgICAgIC8vIEZvciByZWd1bGFyIHJvbGVzLCBlbWFpbCBpcyByZXF1aXJlZFxuICAgICAgcmV0dXJuICEhZGF0YS5lbWFpbDtcbiAgICB9LFxuICAgIHtcbiAgICAgIG1lc3NhZ2U6ICdFbWFpbCBhZGRyZXNzIGlzIHJlcXVpcmVkIGZvciByZWd1bGFyIGludml0YXRpb25zIChleGFtcGxlOiB1c2VyQGRvbWFpbi5jb20pLiBGb3IgZGVtbyB1c2VycywgcHJvdmlkZSBmaXJzdCBhbmQgbGFzdCBuYW1lIGluc3RlYWQuJyxcbiAgICAgIHBhdGg6IFsnZW1haWwnXSxcbiAgICB9XG4gIClcbiAgLnJlZmluZShcbiAgICAoZGF0YSkgPT4ge1xuICAgICAgLy8gSWYgcm9sZSBpcyB0ZW5hbnQgb3IgcmVzaWRlbnQgYW5kIGEgc3BlY2lmaWMgYnVpbGRpbmcgaXMgc2VsZWN0ZWQsIHJlc2lkZW5jZSBtdXN0IGJlIGFzc2lnbmVkXG4gICAgICBpZiAoXG4gICAgICAgIFsndGVuYW50JywgJ3Jlc2lkZW50JywgJ2RlbW9fdGVuYW50JywgJ2RlbW9fcmVzaWRlbnQnXS5pbmNsdWRlcyhkYXRhLnJvbGUpICYmXG4gICAgICAgIGRhdGEuYnVpbGRpbmdJZCAmJlxuICAgICAgICBkYXRhLmJ1aWxkaW5nSWQgIT09ICdub25lJyAmJlxuICAgICAgICBkYXRhLmJ1aWxkaW5nSWQgIT09ICcnXG4gICAgICApIHtcbiAgICAgICAgcmV0dXJuICEhZGF0YS5yZXNpZGVuY2VJZCAmJiBkYXRhLnJlc2lkZW5jZUlkICE9PSAnJztcbiAgICAgIH1cbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH0sXG4gICAge1xuICAgICAgbWVzc2FnZTogJ1BsZWFzZSBzZWxlY3QgYSBzcGVjaWZpYyByZXNpZGVuY2UgdW5pdCBmb3IgdGVuYW50cyBhbmQgcmVzaWRlbnRzIHdoZW4gYSBidWlsZGluZyBpcyBzZWxlY3RlZCcsXG4gICAgICBwYXRoOiBbJ3Jlc2lkZW5jZUlkJ10sXG4gICAgfVxuICApO1xuXG4vKipcbiAqIEZvcm0gZGF0YSB0eXBlIGZvciBzaW5nbGUgaW52aXRhdGlvbi5cbiAqIEluZmVycmVkIGZyb20gdGhlIGludml0YXRpb24gWm9kIHNjaGVtYS5cbiAqL1xudHlwZSBJbnZpdGF0aW9uRm9ybURhdGEgPSB6LmluZmVyPHR5cGVvZiBpbnZpdGF0aW9uU2NoZW1hPjtcblxuLyoqXG4gKiBQcm9wcyBmb3IgdGhlIFNlbmRJbnZpdGF0aW9uRGlhbG9nIGNvbXBvbmVudC5cbiAqIENvbnRyb2xzIGRpYWxvZyB2aXNpYmlsaXR5IGFuZCBzdWNjZXNzIGhhbmRsaW5nLlxuICovXG5pbnRlcmZhY2UgU2VuZEludml0YXRpb25EaWFsb2dQcm9wcyB7XG4gIG9wZW46IGJvb2xlYW47XG4gIG9uT3BlbkNoYW5nZTogKF9vcGVuOiBib29sZWFuKSA9PiB2b2lkO1xuICBvblN1Y2Nlc3M6ICgpID0+IHZvaWQ7XG59XG5cbi8qKlxuICogT3JnYW5pemF0aW9uIGludGVyZmFjZSBmb3Igb3JnYW5pemF0aW9uIHNlbGVjdGlvbi5cbiAqIENvbnRhaW5zIGJhc2ljIG9yZ2FuaXphdGlvbiBpbmZvcm1hdGlvbi5cbiAqL1xuaW50ZXJmYWNlIE9yZ2FuaXphdGlvbiB7XG4gIGlkOiBzdHJpbmc7XG4gIG5hbWU6IHN0cmluZztcbiAgdHlwZTogc3RyaW5nO1xufVxuXG4vKipcbiAqIEJ1aWxkaW5nIGludGVyZmFjZSBmcm9tIHNjaGVtYS5cbiAqL1xuaW50ZXJmYWNlIEJ1aWxkaW5nVHlwZSB7XG4gIGlkOiBzdHJpbmc7XG4gIG9yZ2FuaXphdGlvbklkOiBzdHJpbmc7XG4gIG5hbWU6IHN0cmluZztcbiAgYWRkcmVzczogc3RyaW5nO1xuICBjaXR5OiBzdHJpbmc7XG4gIHByb3ZpbmNlOiBzdHJpbmc7XG4gIHBvc3RhbENvZGU6IHN0cmluZztcbiAgYnVpbGRpbmdUeXBlOiAnY29uZG8nIHwgJ3JlbnRhbCc7XG4gIHllYXJCdWlsdDogbnVtYmVyIHwgbnVsbDtcbiAgdG90YWxVbml0czogbnVtYmVyO1xuICB0b3RhbEZsb29yczogbnVtYmVyIHwgbnVsbDtcbiAgcGFya2luZ1NwYWNlczogbnVtYmVyIHwgbnVsbDtcbiAgc3RvcmFnZVNwYWNlczogbnVtYmVyIHwgbnVsbDtcbiAgYW1lbml0aWVzOiB1bmtub3duO1xuICBtYW5hZ2VtZW50Q29tcGFueTogc3RyaW5nIHwgbnVsbDtcbiAgaXNBY3RpdmU6IGJvb2xlYW47XG4gIGNyZWF0ZWRBdDogRGF0ZSB8IG51bGw7XG4gIHVwZGF0ZWRBdDogRGF0ZSB8IG51bGw7XG59XG5cbi8qKlxuICogUmVzaWRlbmNlIGludGVyZmFjZSBmb3IgcmVzaWRlbmNlIHNlbGVjdGlvbi5cbiAqL1xuaW50ZXJmYWNlIFJlc2lkZW5jZSB7XG4gIGlkOiBzdHJpbmc7XG4gIGJ1aWxkaW5nSWQ6IHN0cmluZztcbiAgdW5pdE51bWJlcjogc3RyaW5nO1xuICBmbG9vcjogbnVtYmVyIHwgbnVsbDtcbiAgc3F1YXJlRm9vdGFnZTogbnVtYmVyIHwgbnVsbDtcbiAgYmVkcm9vbXM6IG51bWJlciB8IG51bGw7XG4gIGJhdGhyb29tczogbnVtYmVyIHwgbnVsbDtcbiAgcmVzaWRlbmNlVHlwZTogJ2FwYXJ0bWVudCcgfCAnY29uZG8nIHwgJ2hvdXNlJyB8ICd0b3duaG91c2UnIHwgJ290aGVyJztcbiAgaXNBY3RpdmU6IGJvb2xlYW47XG4gIGJ1aWxkaW5nOiB7XG4gICAgaWQ6IHN0cmluZztcbiAgICBuYW1lOiBzdHJpbmc7XG4gICAgb3JnYW5pemF0aW9uSWQ6IHN0cmluZztcbiAgICBvcmdhbml6YXRpb246IHtcbiAgICAgIGlkOiBzdHJpbmc7XG4gICAgICBuYW1lOiBzdHJpbmc7XG4gICAgfTtcbiAgfTtcbn1cblxuLyoqXG4gKiBTZW5kIEludml0YXRpb24gRGlhbG9nIENvbXBvbmVudC5cbiAqXG4gKiBBbGxvd3Mgc2VuZGluZyBzaW5nbGUgaW52aXRhdGlvbnMgd2l0aCBjb21wcmVoZW5zaXZlIG9wdGlvbnNcbiAqIGluY2x1ZGluZyByb2xlIHNlbGVjdGlvbiwgb3JnYW5pemF0aW9uL2J1aWxkaW5nIGFzc2lnbm1lbnQsIGFuZCBjdXN0b20gbWVzc2FnZXMuXG4gKiBAcGFyYW0gcHJvcHMgLSBDb21wb25lbnQgcHJvcHMuXG4gKiBAcGFyYW0gcHJvcHMub3BlbiAtIFdoZXRoZXIgZGlhbG9nIGlzIG9wZW4uXG4gKiBAcGFyYW0gcHJvcHMub25PcGVuQ2hhbmdlIC0gSGFuZGxlciBmb3IgZGlhbG9nIG9wZW4gc3RhdGUgY2hhbmdlcy5cbiAqIEBwYXJhbSBwcm9wcy5vblN1Y2Nlc3MgLSBIYW5kbGVyIGNhbGxlZCB3aGVuIGludml0YXRpb24gaXMgc2VudCBzdWNjZXNzZnVsbHkuXG4gKiBAcmV0dXJucyBKU1ggZWxlbWVudCBmb3IgdGhlIGludml0YXRpb24gZGlhbG9nLlxuICovXG5leHBvcnQgZnVuY3Rpb24gU2VuZEludml0YXRpb25EaWFsb2coeyBvcGVuLCBvbk9wZW5DaGFuZ2UsIG9uU3VjY2VzcyB9OiBTZW5kSW52aXRhdGlvbkRpYWxvZ1Byb3BzKSB7XG4gIGNvbnN0IHsgdCB9ID0gdXNlTGFuZ3VhZ2UoKTtcbiAgY29uc3QgeyB1c2VyOiBjdXJyZW50VXNlciwgaGFzUm9sZSB9ID0gdXNlQXV0aCgpO1xuICBjb25zdCB7IHRvYXN0IH0gPSB1c2VUb2FzdCgpO1xuXG4gIGNvbnN0IFtzZWxlY3RlZE9yZ1R5cGUsIHNldFNlbGVjdGVkT3JnVHlwZV0gPSB1c2VTdGF0ZTxzdHJpbmc+KCcnKTtcblxuXG4gIC8vIFNpbmdsZSBpbnZpdGF0aW9uIGZvcm1cbiAgY29uc3QgZm9ybSA9IHVzZUZvcm08SW52aXRhdGlvbkZvcm1EYXRhPih7XG4gICAgcmVzb2x2ZXI6IHpvZFJlc29sdmVyKGludml0YXRpb25TY2hlbWEpLFxuICAgIGRlZmF1bHRWYWx1ZXM6IHtcbiAgICAgIGVtYWlsOiAnJyxcblxuICAgICAgZmlyc3ROYW1lOiAnJyxcbiAgICAgIGxhc3ROYW1lOiAnJyxcbiAgICAgIHJvbGU6ICd0ZW5hbnQnLFxuICAgICAgb3JnYW5pemF0aW9uSWQ6ICcnLFxuICAgICAgYnVpbGRpbmdJZDogJycsXG4gICAgICByZXNpZGVuY2VJZDogJycsXG4gICAgICBleHBpcnlEYXlzOiA3LFxuICAgICAgcGVyc29uYWxNZXNzYWdlOiAnJyxcbiAgICB9LFxuICB9KTtcblxuICAvLyBGZXRjaCBvcmdhbml6YXRpb25zIChmaWx0ZXJlZCBieSB1c2VyIGFjY2VzcylcbiAgY29uc3QgeyBkYXRhOiBvcmdhbml6YXRpb25zIH0gPSB1c2VRdWVyeTxPcmdhbml6YXRpb25bXT4oe1xuICAgIHF1ZXJ5S2V5OiBbJy9hcGkvb3JnYW5pemF0aW9ucyddLFxuICAgIHF1ZXJ5Rm46IGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgYXBpUmVxdWVzdCgnR0VUJywgJy9hcGkvb3JnYW5pemF0aW9ucycpO1xuICAgICAgcmV0dXJuIHJlc3BvbnNlLmpzb24oKTtcbiAgICB9LFxuICAgIGVuYWJsZWQ6IG9wZW4sXG4gIH0pO1xuXG4gIC8vIEZldGNoIGJ1aWxkaW5nc1xuICBjb25zdCB7IGRhdGE6IGJ1aWxkaW5ncywgZXJyb3I6IGJ1aWxkaW5nc0Vycm9yLCBpc0xvYWRpbmc6IGJ1aWxkaW5nc0xvYWRpbmcgfSA9IHVzZVF1ZXJ5PEJ1aWxkaW5nVHlwZVtdPih7XG4gICAgcXVlcnlLZXk6IFsnL2FwaS9tYW5hZ2VyL2J1aWxkaW5ncyddLFxuICAgIHF1ZXJ5Rm46IGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgYXBpUmVxdWVzdCgnR0VUJywgJy9hcGkvbWFuYWdlci9idWlsZGluZ3MnKTtcbiAgICAgIGNvbnN0IGRhdGEgPSBhd2FpdCByZXNwb25zZS5qc29uKCk7XG4gICAgICAvLyBUaGUgQVBJIHJldHVybnMgeyBidWlsZGluZ3M6IFsuLi5dLCBtZXRhOiB7Li4ufSB9IGJ1dCB3ZSBuZWVkIGp1c3QgdGhlIGJ1aWxkaW5ncyBhcnJheVxuICAgICAgcmV0dXJuIGRhdGEuYnVpbGRpbmdzIHx8IGRhdGE7XG4gICAgfSxcbiAgICBlbmFibGVkOiBvcGVuLFxuICB9KTtcblxuXG4gIC8vIEZldGNoIHJlc2lkZW5jZXMgIFxuICBjb25zdCB7IGRhdGE6IHJlc2lkZW5jZXMgfSA9IHVzZVF1ZXJ5PFJlc2lkZW5jZVtdPih7XG4gICAgcXVlcnlLZXk6IFsnL2FwaS9yZXNpZGVuY2VzJ10sXG4gICAgcXVlcnlGbjogYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBhcGlSZXF1ZXN0KCdHRVQnLCAnL2FwaS9yZXNpZGVuY2VzJyk7XG4gICAgICBjb25zdCBkYXRhID0gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xuICAgICAgLy8gSGFuZGxlIGJvdGggZGlyZWN0IGFycmF5IGFuZCB3cmFwcGVkIHJlc3BvbnNlIGZvcm1hdHNcbiAgICAgIHJldHVybiBkYXRhLnJlc2lkZW5jZXMgfHwgZGF0YTtcbiAgICB9LFxuICAgIGVuYWJsZWQ6IG9wZW4sXG4gIH0pO1xuXG4gIC8vIEhlbHBlciBmdW5jdGlvbnMgZm9yIGZpbHRlcmluZyBkYXRhIGJhc2VkIG9uIHNlbGVjdGlvbnNcbiAgY29uc3QgZ2V0RmlsdGVyZWRPcmdhbml6YXRpb25zID0gKCkgPT4ge1xuICAgIGlmICghb3JnYW5pemF0aW9ucyB8fCAhQXJyYXkuaXNBcnJheShvcmdhbml6YXRpb25zKSkge1xuICAgICAgcmV0dXJuIFtdO1xuICAgIH1cblxuICAgIC8vIEZpbHRlciBvdXQgYW55IGludmFsaWQgb3JnYW5pemF0aW9ucyB3aXRoIGRldGFpbGVkIGxvZ2dpbmdcbiAgICBjb25zdCB2YWxpZE9yZ3MgPSBvcmdhbml6YXRpb25zLmZpbHRlcigob3JnKSA9PiB7XG4gICAgICBjb25zdCBpc1ZhbGlkID1cbiAgICAgICAgb3JnICYmXG4gICAgICAgIHR5cGVvZiBvcmcgPT09ICdvYmplY3QnICYmXG4gICAgICAgIG9yZy5pZCAmJlxuICAgICAgICB0eXBlb2Ygb3JnLmlkID09PSAnc3RyaW5nJyAmJlxuICAgICAgICBvcmcuaWQudHJpbSgpICE9PSAnJyAmJlxuICAgICAgICBvcmcubmFtZSAmJlxuICAgICAgICB0eXBlb2Ygb3JnLm5hbWUgPT09ICdzdHJpbmcnICYmXG4gICAgICAgIG9yZy5uYW1lLnRyaW0oKSAhPT0gJyc7XG5cbiAgICAgIHJldHVybiBpc1ZhbGlkO1xuICAgIH0pO1xuXG4gICAgaWYgKGN1cnJlbnRVc2VyPy5yb2xlID09PSAnYWRtaW4nKSB7XG4gICAgICAvLyBBZG1pbnMgY2FuIGFkZCB1c2VycyB0byBhbnkgb3JnYW5pemF0aW9uXG4gICAgICByZXR1cm4gdmFsaWRPcmdzO1xuICAgIH0gZWxzZSBpZiAoY3VycmVudFVzZXI/LnJvbGUgPT09ICdtYW5hZ2VyJykge1xuICAgICAgLy8gTWFuYWdlcnMgY2FuIG9ubHkgYWRkIHVzZXJzIHRvIHRoZWlyIG93biBvcmdhbml6YXRpb25cbiAgICAgIHJldHVybiB2YWxpZE9yZ3M7XG4gICAgfVxuXG4gICAgLy8gRGVmYXVsdDogc2hvdyBhbGwgdmFsaWQgb3JnYW5pemF0aW9ucyBmb3Igbm93XG4gICAgcmV0dXJuIHZhbGlkT3JncztcbiAgfTtcblxuICAvLyBDaGVjayBpZiB1c2VyIGNhbiBhY2Nlc3MgYSBzcGVjaWZpYyBvcmdhbml6YXRpb24gZm9yIGludml0YXRpb25zXG4gIGNvbnN0IGNhbkludml0ZVRvT3JnYW5pemF0aW9uID0gKG9yZ0lkOiBzdHJpbmcpID0+IHtcbiAgICBpZiAoIW9yZ0lkIHx8ICFvcmdhbml6YXRpb25zKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgY29uc3QgdGFyZ2V0T3JnID0gb3JnYW5pemF0aW9ucy5maW5kKChvcmcpID0+IG9yZy5pZCA9PT0gb3JnSWQpO1xuICAgIGNvbnN0IGN1cnJlbnRVc2VyT3JnID0gb3JnYW5pemF0aW9uc1swXTsgLy8gVXNlIGZpcnN0IG9yZ2FuaXphdGlvbiBmb3IgYWNjZXNzIGNvbnRyb2xcblxuICAgIC8vIE9yZ2FuaXphdGlvbiBmaWx0ZXJpbmcgZm9yIHVzZXIgYWNjZXNzIGNvbnRyb2xcbiAgICBpZiAodGFyZ2V0T3JnPy5uYW1lPy50b0xvd2VyQ2FzZSgpID09PSAnZGVtbycpIHtcbiAgICAgIHJldHVybiBjdXJyZW50VXNlcj8ucm9sZSA9PT0gJ2FkbWluJztcbiAgICB9XG5cbiAgICAvLyBLb3ZlbyBvcmdhbml6YXRpb24gdXNlcnMgY2FuIGFkZCB0byBhbnkgb3JnYW5pemF0aW9uIChvdmVycmlkZSBhbGwgcmVzdHJpY3Rpb25zKVxuICAgIGlmIChjdXJyZW50VXNlck9yZz8ubmFtZT8udG9Mb3dlckNhc2UoKSA9PT0gJ2tvdmVvJykge1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuXG4gICAgLy8gU2ltcGxpZmllZCBhY2Nlc3MgY29udHJvbCBmb3Igbm93XG5cbiAgICAvLyBBZG1pbnMgY2FuIGFkZCB0byBvcmdhbml6YXRpb25zIHRoZXkgaGF2ZSBhY2Nlc3MgdG9cbiAgICBpZiAoY3VycmVudFVzZXI/LnJvbGUgPT09ICdhZG1pbicpIHtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cblxuICAgIC8vIE90aGVycyBjYW4gb25seSBhZGQgdG8gdGhlaXIgb3duIG9yZ2FuaXphdGlvbiAtIHNpbXBsaWZpZWQgZm9yIG5vd1xuICAgIHJldHVybiB0cnVlO1xuICB9O1xuXG4gIGNvbnN0IGdldEZpbHRlcmVkQnVpbGRpbmdzID0gKHNlbGVjdGVkT3JnSWQ6IHN0cmluZykgPT4ge1xuICAgIGlmICghYnVpbGRpbmdzIHx8ICFzZWxlY3RlZE9yZ0lkKSB7XG4gICAgICByZXR1cm4gW107XG4gICAgfVxuICAgIHJldHVybiBidWlsZGluZ3MuZmlsdGVyKChidWlsZGluZykgPT4gYnVpbGRpbmcub3JnYW5pemF0aW9uSWQgPT09IHNlbGVjdGVkT3JnSWQpO1xuICB9O1xuXG4gIGNvbnN0IGdldEZpbHRlcmVkUmVzaWRlbmNlcyA9IChzZWxlY3RlZEJ1aWxkaW5nSWQ6IHN0cmluZywgc2VsZWN0ZWRPcmdJZDogc3RyaW5nKSA9PiB7XG4gICAgaWYgKCFyZXNpZGVuY2VzKSB7XG4gICAgICByZXR1cm4gW107XG4gICAgfVxuICAgIFxuICAgIC8vIElmIGEgc3BlY2lmaWMgYnVpbGRpbmcgaXMgc2VsZWN0ZWQsIHNob3cgb25seSByZXNpZGVuY2VzIGZyb20gdGhhdCBidWlsZGluZ1xuICAgIGlmIChzZWxlY3RlZEJ1aWxkaW5nSWQgJiYgc2VsZWN0ZWRCdWlsZGluZ0lkICE9PSAnbm9uZScpIHtcbiAgICAgIHJldHVybiByZXNpZGVuY2VzLmZpbHRlcigocmVzaWRlbmNlKSA9PiByZXNpZGVuY2UuYnVpbGRpbmdJZCA9PT0gc2VsZWN0ZWRCdWlsZGluZ0lkKTtcbiAgICB9XG4gICAgXG4gICAgLy8gSWYgbm8gYnVpbGRpbmcgc2VsZWN0ZWQgYnV0IG9yZ2FuaXphdGlvbiBpcyBzZWxlY3RlZCwgc2hvdyBhbGwgcmVzaWRlbmNlcyBmcm9tIHRoYXQgb3JnYW5pemF0aW9uXG4gICAgaWYgKHNlbGVjdGVkT3JnSWQgJiYgKCFzZWxlY3RlZEJ1aWxkaW5nSWQgfHwgc2VsZWN0ZWRCdWlsZGluZ0lkID09PSAnbm9uZScpKSB7XG4gICAgICBjb25zdCBvcmdCdWlsZGluZ3MgPSBidWlsZGluZ3M/LmZpbHRlcihidWlsZGluZyA9PiBidWlsZGluZy5vcmdhbml6YXRpb25JZCA9PT0gc2VsZWN0ZWRPcmdJZCkgfHwgW107XG4gICAgICBjb25zdCBvcmdCdWlsZGluZ0lkcyA9IG9yZ0J1aWxkaW5ncy5tYXAoYnVpbGRpbmcgPT4gYnVpbGRpbmcuaWQpO1xuICAgICAgcmV0dXJuIHJlc2lkZW5jZXMuZmlsdGVyKChyZXNpZGVuY2UpID0+IG9yZ0J1aWxkaW5nSWRzLmluY2x1ZGVzKHJlc2lkZW5jZS5idWlsZGluZ0lkKSk7XG4gICAgfVxuICAgIFxuICAgIHJldHVybiBbXTtcbiAgfTtcblxuICAvLyBTaW5nbGUgaW52aXRhdGlvbiBtdXRhdGlvblxuICBjb25zdCBpbnZpdGF0aW9uTXV0YXRpb24gPSB1c2VNdXRhdGlvbih7XG4gICAgbXV0YXRpb25GbjogYXN5bmMgKGRhdGE6IEludml0YXRpb25Gb3JtRGF0YSkgPT4ge1xuICAgICAgY29uc3QgZXhwaXJlc0F0ID0gbmV3IERhdGUoKTtcbiAgICAgIGV4cGlyZXNBdC5zZXREYXRlKGV4cGlyZXNBdC5nZXREYXRlKCkgKyBkYXRhLmV4cGlyeURheXMpO1xuXG4gICAgICAvLyBGb3IgZGVtbyByb2xlcywgY3JlYXRlIHVzZXIgZGlyZWN0bHkgaW5zdGVhZCBvZiBzZW5kaW5nIGludml0YXRpb25cbiAgICAgIGlmIChbJ2RlbW9fbWFuYWdlcicsICdkZW1vX3RlbmFudCcsICdkZW1vX3Jlc2lkZW50J10uaW5jbHVkZXMoZGF0YS5yb2xlKSkge1xuICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGFwaVJlcXVlc3QoJ1BPU1QnLCAnL2FwaS91c2Vycy9kZW1vJywge1xuICAgICAgICAgIGZpcnN0TmFtZTogZGF0YS5maXJzdE5hbWUsXG4gICAgICAgICAgbGFzdE5hbWU6IGRhdGEubGFzdE5hbWUsXG4gICAgICAgICAgcm9sZTogZGF0YS5yb2xlLFxuICAgICAgICAgIG9yZ2FuaXphdGlvbklkOiBkYXRhLm9yZ2FuaXphdGlvbklkLFxuICAgICAgICAgIHJlc2lkZW5jZUlkOiBkYXRhLnJlc2lkZW5jZUlkIHx8IG51bGwsXG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gcmVzcG9uc2UuanNvbigpO1xuICAgICAgfVxuXG4gICAgICAvLyBSZWd1bGFyIGludml0YXRpb24gZmxvd1xuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBhcGlSZXF1ZXN0KCdQT1NUJywgJy9hcGkvaW52aXRhdGlvbnMnLCB7XG4gICAgICAgIG9yZ2FuaXphdGlvbklkOiBkYXRhLm9yZ2FuaXphdGlvbklkLFxuICAgICAgICByZXNpZGVuY2VJZDogZGF0YS5yZXNpZGVuY2VJZCB8fCBudWxsLFxuICAgICAgICBlbWFpbDogZGF0YS5lbWFpbCxcbiAgICAgICAgcm9sZTogZGF0YS5yb2xlLFxuICAgICAgICBpbnZpdGVkQnlVc2VySWQ6IGN1cnJlbnRVc2VyPy5pZCxcbiAgICAgICAgZXhwaXJlc0F0OiBleHBpcmVzQXQudG9JU09TdHJpbmcoKSxcbiAgICAgICAgcGVyc29uYWxNZXNzYWdlOiBkYXRhLnBlcnNvbmFsTWVzc2FnZSB8fCBudWxsLFxuICAgICAgfSk7XG4gICAgICByZXR1cm4gcmVzcG9uc2UuanNvbigpO1xuICAgIH0sXG4gICAgb25TdWNjZXNzOiAoXywgdmFyaWFibGVzKSA9PiB7XG4gICAgICBjb25zdCBpc0RlbW9Sb2xlID0gWydkZW1vX21hbmFnZXInLCAnZGVtb190ZW5hbnQnLCAnZGVtb19yZXNpZGVudCddLmluY2x1ZGVzKHZhcmlhYmxlcy5yb2xlKTtcbiAgICAgIHRvYXN0KHtcbiAgICAgICAgdGl0bGU6IGlzRGVtb1JvbGUgPyAnRGVtbyBVc2VyIENyZWF0ZWQnIDogdCgnaW52aXRhdGlvblNlbnQnKSxcbiAgICAgICAgZGVzY3JpcHRpb246IGlzRGVtb1JvbGVcbiAgICAgICAgICA/ICdEZW1vIHVzZXIgaGFzIGJlZW4gY3JlYXRlZCBzdWNjZXNzZnVsbHknXG4gICAgICAgICAgOiB0KCdpbnZpdGF0aW9uU2VudFN1Y2Nlc3NmdWxseScpLFxuICAgICAgfSk7XG4gICAgICBmb3JtLnJlc2V0KCk7XG4gICAgICBvblN1Y2Nlc3MoKTtcbiAgICAgIG9uT3BlbkNoYW5nZShmYWxzZSk7XG4gICAgfSxcbiAgICBvbkVycm9yOiAoZXJyb3I6IEVycm9yKSA9PiB7XG4gICAgICB0b2FzdCh7XG4gICAgICAgIHRpdGxlOiAnRXJyb3InLFxuICAgICAgICBkZXNjcmlwdGlvbjogZXJyb3IubWVzc2FnZSxcbiAgICAgICAgdmFyaWFudDogJ2Rlc3RydWN0aXZlJyxcbiAgICAgIH0pO1xuICAgIH0sXG4gIH0pO1xuXG4gIGNvbnN0IG9uU3VibWl0ID0gKF9kYXRhOiBJbnZpdGF0aW9uRm9ybURhdGEpID0+IHtcbiAgICBpbnZpdGF0aW9uTXV0YXRpb24ubXV0YXRlKF9kYXRhKTtcblxuICB9O1xuXG4gIGNvbnN0IGNhbkludml0ZVJvbGUgPSAocm9sZTogc3RyaW5nKSA9PiB7XG4gICAgaWYgKGhhc1JvbGUoWydhZG1pbiddKSkge1xuICAgICAgLy8gT25seSBhZG1pbiBjYW4gaW52aXRlIGFuIGFkbWluLCBhZG1pbiBjYW4gaW52aXRlIHRvIGFueSBvcmdhbml6YXRpb25cbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICBpZiAoaGFzUm9sZShbJ21hbmFnZXInXSkpIHtcbiAgICAgIC8vIE1hbmFnZXIgY2FuIGludml0ZSByZWd1bGFyIGFuZCBkZW1vIHJvbGVzIChidXQgbm90IGFkbWluKVxuICAgICAgaWYgKFxuICAgICAgICBbJ3Jlc2lkZW50JywgJ3RlbmFudCcsICdtYW5hZ2VyJywgJ2RlbW9fbWFuYWdlcicsICdkZW1vX3RlbmFudCcsICdkZW1vX3Jlc2lkZW50J10uaW5jbHVkZXMoXG4gICAgICAgICAgcm9sZVxuICAgICAgICApXG4gICAgICApIHtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICB9XG4gICAgfVxuICAgIC8vIFJlc2lkZW50cyBhbmQgdGVuYW50cyBjYW5ub3QgaW52aXRlIGFueW9uZVxuICAgIHJldHVybiBmYWxzZTtcbiAgfTtcblxuICAvLyBHZXQgYXZhaWxhYmxlIHJvbGVzIGJhc2VkIG9uIG9yZ2FuaXphdGlvbiB0eXBlIHVzaW5nIHVzZU1lbW8gZm9yIHByb3BlciByZWFjdGl2aXR5XG4gIGNvbnN0IG9yZ2FuaXphdGlvbklkID0gZm9ybS53YXRjaCgnb3JnYW5pemF0aW9uSWQnKTtcbiAgXG4gIGNvbnN0IGF2YWlsYWJsZVJvbGVzID0gdXNlTWVtbygoKSA9PiB7XG4gICAgLy8gUmV0dXJuIGVtcHR5IGFycmF5IGlmIG5vIG9yZ2FuaXphdGlvbiBpcyBzZWxlY3RlZFxuICAgIGlmICghb3JnYW5pemF0aW9uSWQpIHtcbiAgICAgICAgcmV0dXJuIFtdO1xuICAgIH1cblxuICAgIGNvbnN0IHNlbGVjdGVkT3JnID0gb3JnYW5pemF0aW9ucz8uZmluZCgob3JnKSA9PiBvcmcuaWQgPT09IG9yZ2FuaXphdGlvbklkKTtcbiAgICBjb25zdCBpc0RlbW9PcmcgPSBzZWxlY3RlZE9yZz8udHlwZSA9PT0gJ2RlbW8nO1xuXG5cbiAgICBpZiAoaXNEZW1vT3JnKSB7XG4gICAgICAvLyBGb3IgZGVtbyBvcmdhbml6YXRpb25zLCBhbGxvdyBib3RoIGRlbW8gcm9sZXMgYW5kIHJlZ3VsYXIgcm9sZXNcbiAgICAgIGNvbnN0IHJvbGVzID0gWydhZG1pbicsICdtYW5hZ2VyJywgJ3RlbmFudCcsICdyZXNpZGVudCcsICdkZW1vX21hbmFnZXInLCAnZGVtb190ZW5hbnQnLCAnZGVtb19yZXNpZGVudCddLmZpbHRlcihjYW5JbnZpdGVSb2xlKTtcbiAgICAgIHJldHVybiByb2xlcztcbiAgICB9XG5cbiAgICBjb25zdCByb2xlcyA9IFsnYWRtaW4nLCAnbWFuYWdlcicsICd0ZW5hbnQnLCAncmVzaWRlbnQnXS5maWx0ZXIoY2FuSW52aXRlUm9sZSk7XG4gICAgcmV0dXJuIHJvbGVzO1xuICB9LCBbb3JnYW5pemF0aW9uSWQsIG9yZ2FuaXphdGlvbnMsIGhhc1JvbGVdKTtcblxuICByZXR1cm4gKFxuICAgIDxEaWFsb2cgb3Blbj17b3Blbn0gb25PcGVuQ2hhbmdlPXtvbk9wZW5DaGFuZ2V9PlxuICAgICAgPERpYWxvZ0NvbnRlbnQgY2xhc3NOYW1lPSdtYXgtdy0yeGwgbWF4LWgtWzkwdmhdIG92ZXJmbG93LXktYXV0byc+XG4gICAgICAgIDxEaWFsb2dIZWFkZXI+XG4gICAgICAgICAgPERpYWxvZ1RpdGxlIGNsYXNzTmFtZT0nZmxleCBpdGVtcy1jZW50ZXIgZ2FwLTInPlxuICAgICAgICAgICAgPFVzZXJQbHVzIGNsYXNzTmFtZT0naC01IHctNScgLz5cbiAgICAgICAgICAgIHt0KCdpbnZpdGVVc2VyJyl9XG4gICAgICAgICAgPC9EaWFsb2dUaXRsZT5cbiAgICAgICAgICA8RGlhbG9nRGVzY3JpcHRpb24+e3QoJ2ludml0ZVVzZXJEZXNjcmlwdGlvbicpfTwvRGlhbG9nRGVzY3JpcHRpb24+XG4gICAgICAgIDwvRGlhbG9nSGVhZGVyPlxuXG5cbiAgICAgICAgPGRpdiBjbGFzc05hbWU9J3NwYWNlLXktNCc+XG4gICAgICAgICAgPEZvcm0gey4uLmZvcm19PlxuICAgICAgICAgICAgPGZvcm0gb25TdWJtaXQ9e2Zvcm0uaGFuZGxlU3VibWl0KG9uU3VibWl0KX0gY2xhc3NOYW1lPSdzcGFjZS15LTQnPlxuICAgICAgICAgICAgICA8Rm9ybUZpZWxkXG4gICAgICAgICAgICAgICAgY29udHJvbD17Zm9ybS5jb250cm9sfVxuICAgICAgICAgICAgICAgIG5hbWU9J29yZ2FuaXphdGlvbklkJ1xuICAgICAgICAgICAgICAgIHJlbmRlcj17KHsgZmllbGQgfSkgPT4gKFxuICAgICAgICAgICAgICAgICAgPEZvcm1JdGVtPlxuICAgICAgICAgICAgICAgICAgICA8Rm9ybUxhYmVsPnt0KCdvcmdhbml6YXRpb24nKX0gKjwvRm9ybUxhYmVsPlxuXG4gICAgICAgICAgICAgICAgICAgIDxGb3JtQ29udHJvbD5cbiAgICAgICAgICAgICAgICAgICAgICA8c2VsZWN0XG4gICAgICAgICAgICAgICAgICAgICAgICB7Li4uZmllbGR9XG4gICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17KGUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgZmllbGQub25DaGFuZ2UoZS50YXJnZXQudmFsdWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBzZWxlY3RlZE9yZyA9IG9yZ2FuaXphdGlvbnM/LmZpbmQoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKG9yZykgPT4gb3JnLmlkID09PSBlLnRhcmdldC52YWx1ZVxuICAgICAgICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRTZWxlY3RlZE9yZ1R5cGUoc2VsZWN0ZWRPcmc/LnR5cGUgfHwgJycpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBSZXNldCBidWlsZGluZyBhbmQgcmVzaWRlbmNlIHdoZW4gb3JnYW5pemF0aW9uIGNoYW5nZXNcbiAgICAgICAgICAgICAgICAgICAgICAgICAgZm9ybS5zZXRWYWx1ZSgnYnVpbGRpbmdJZCcsICcnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgZm9ybS5zZXRWYWx1ZSgncmVzaWRlbmNlSWQnLCAnJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFJlc2V0IHJvbGUgd2hlbiBzd2l0Y2hpbmcgYmV0d2VlbiBkZW1vIGFuZCByZWd1bGFyIG9yZ3NcbiAgICAgICAgICAgICAgICAgICAgICAgICAgZm9ybS5zZXRWYWx1ZShcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAncm9sZScsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZWN0ZWRPcmc/LnR5cGUgPT09ICdkZW1vJyA/ICdkZW1vX3RlbmFudCcgOiAndGVuYW50J1xuICAgICAgICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgIGRpc2FibGVkPXtjdXJyZW50VXNlcj8ucm9sZSA9PT0gJ21hbmFnZXInfVxuICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPSdmbGV4IGgtMTAgdy1mdWxsIHJvdW5kZWQtbWQgYm9yZGVyIGJvcmRlci1pbnB1dCBiZy1iYWNrZ3JvdW5kIHB4LTMgcHktMiB0ZXh0LXNtIHJpbmctb2Zmc2V0LWJhY2tncm91bmQgZmlsZTpib3JkZXItMCBmaWxlOmJnLXRyYW5zcGFyZW50IGZpbGU6dGV4dC1zbSBmaWxlOmZvbnQtbWVkaXVtIHBsYWNlaG9sZGVyOnRleHQtbXV0ZWQtZm9yZWdyb3VuZCBmb2N1cy12aXNpYmxlOm91dGxpbmUtbm9uZSBmb2N1cy12aXNpYmxlOnJpbmctMiBmb2N1cy12aXNpYmxlOnJpbmctcmluZyBmb2N1cy12aXNpYmxlOnJpbmctb2Zmc2V0LTIgZGlzYWJsZWQ6Y3Vyc29yLW5vdC1hbGxvd2VkIGRpc2FibGVkOm9wYWNpdHktNTAnXG4gICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT0nJz57dCgnc2VsZWN0T3JnYW5pemF0aW9uJyl9PC9vcHRpb24+XG4gICAgICAgICAgICAgICAgICAgICAgICB7Z2V0RmlsdGVyZWRPcmdhbml6YXRpb25zKCkubWFwKChvcmcpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFvcmc/LmlkIHx8ICFvcmc/Lm5hbWUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGNhbkludml0ZSA9IGNhbkludml0ZVRvT3JnYW5pemF0aW9uKG9yZy5pZCk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8b3B0aW9uIGtleT17b3JnLmlkfSB2YWx1ZT17b3JnLmlkfSBkaXNhYmxlZD17IWNhbkludml0ZX0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7b3JnLm5hbWV9IHtvcmcudHlwZSA9PT0gJ2RlbW8nID8gJyhEZW1vKScgOiAnJ31cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L29wdGlvbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pfVxuICAgICAgICAgICAgICAgICAgICAgIDwvc2VsZWN0PlxuICAgICAgICAgICAgICAgICAgICA8L0Zvcm1Db250cm9sPlxuICAgICAgICAgICAgICAgICAgICA8Rm9ybURlc2NyaXB0aW9uPlxuICAgICAgICAgICAgICAgICAgICAgIHtjdXJyZW50VXNlcj8ucm9sZSA9PT0gJ21hbmFnZXInXG4gICAgICAgICAgICAgICAgICAgICAgICA/ICdNYW5hZ2VycyBjYW4gb25seSBpbnZpdGUgdG8gdGhlaXIgb3JnYW5pemF0aW9uJ1xuICAgICAgICAgICAgICAgICAgICAgICAgOiAnU2VsZWN0IHRhcmdldCBvcmdhbml6YXRpb24nfVxuICAgICAgICAgICAgICAgICAgICA8L0Zvcm1EZXNjcmlwdGlvbj5cblxuICAgICAgICAgICAgICAgICAgICA8Rm9ybU1lc3NhZ2UgLz5cbiAgICAgICAgICAgICAgICAgIDwvRm9ybUl0ZW0+XG4gICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgLz5cblxuICAgICAgICAgICAgICA8Rm9ybUZpZWxkXG4gICAgICAgICAgICAgICAgY29udHJvbD17Zm9ybS5jb250cm9sfVxuICAgICAgICAgICAgICAgIG5hbWU9J3JvbGUnXG4gICAgICAgICAgICAgICAgcmVuZGVyPXsoeyBmaWVsZCB9KSA9PiAoXG4gICAgICAgICAgICAgICAgICA8Rm9ybUl0ZW0+XG4gICAgICAgICAgICAgICAgICAgIDxGb3JtTGFiZWw+e3QoJ3JvbGUnKX08L0Zvcm1MYWJlbD5cbiAgICAgICAgICAgICAgICAgICAgPFNlbGVjdCBcbiAgICAgICAgICAgICAgICAgICAgICBrZXk9e2Byb2xlLXNlbGVjdC0ke29yZ2FuaXphdGlvbklkfWB9XG4gICAgICAgICAgICAgICAgICAgICAgb25WYWx1ZUNoYW5nZT17ZmllbGQub25DaGFuZ2V9IFxuICAgICAgICAgICAgICAgICAgICAgIHZhbHVlPXtmaWVsZC52YWx1ZX1cbiAgICAgICAgICAgICAgICAgICAgICBkaXNhYmxlZD17IW9yZ2FuaXphdGlvbklkfVxuICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgPEZvcm1Db250cm9sPlxuICAgICAgICAgICAgICAgICAgICAgICAgPFNlbGVjdFRyaWdnZXI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgIDxTZWxlY3RWYWx1ZSBwbGFjZWhvbGRlcj17dCgnc2VsZWN0Um9sZScpfSAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgPC9TZWxlY3RUcmlnZ2VyPlxuICAgICAgICAgICAgICAgICAgICAgIDwvRm9ybUNvbnRyb2w+XG4gICAgICAgICAgICAgICAgICAgICAgPFNlbGVjdENvbnRlbnQ+XG4gICAgICAgICAgICAgICAgICAgICAgICB7b3JnYW5pemF0aW9uSWQgPyBhdmFpbGFibGVSb2xlcy5tYXAoKHJvbGUpID0+IChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgPFNlbGVjdEl0ZW0ga2V5PXtyb2xlfSB2YWx1ZT17cm9sZX0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9J2ZsZXggaXRlbXMtY2VudGVyIGdhcC0yJz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxTaGllbGQgY2xhc3NOYW1lPSdoLTQgdy00JyAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge3JvbGUgPT09ICdhZG1pbidcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPyB0KCdhZG1pbicpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogcm9sZSA9PT0gJ21hbmFnZXInXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPyB0KCdtYW5hZ2VyJylcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IHJvbGUgPT09ICdyZXNpZGVudCdcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gdCgncmVzaWRlbnQnKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOiByb2xlID09PSAndGVuYW50J1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA/IHQoJ3RlbmFudCcpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogcm9sZSA9PT0gJ2RlbW9fbWFuYWdlcidcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA/ICdEZW1vIE1hbmFnZXInXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOiByb2xlID09PSAnZGVtb190ZW5hbnQnXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA/ICdEZW1vIFRlbmFudCdcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogJ0RlbW8gUmVzaWRlbnQnfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICA8L1NlbGVjdEl0ZW0+XG4gICAgICAgICAgICAgICAgICAgICAgICApKSA6IChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgPFNlbGVjdEl0ZW0gdmFsdWU9XCJuby1vcmdhbml6YXRpb25cIiBkaXNhYmxlZD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBQbGVhc2Ugc2VsZWN0IGFuIG9yZ2FuaXphdGlvbiBmaXJzdFxuICAgICAgICAgICAgICAgICAgICAgICAgICA8L1NlbGVjdEl0ZW0+XG4gICAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICAgIDwvU2VsZWN0Q29udGVudD5cbiAgICAgICAgICAgICAgICAgICAgPC9TZWxlY3Q+XG4gICAgICAgICAgICAgICAgICAgIDxGb3JtTWVzc2FnZSAvPlxuICAgICAgICAgICAgICAgICAgPC9Gb3JtSXRlbT5cbiAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAvPlxuXG4gICAgICAgICAgICAgIHsvKiBDb25kaXRpb25hbCBmaWVsZHMgYmFzZWQgb24gcm9sZSB0eXBlICovfVxuICAgICAgICAgICAgICB7WydkZW1vX21hbmFnZXInLCAnZGVtb190ZW5hbnQnLCAnZGVtb19yZXNpZGVudCddLmluY2x1ZGVzKGZvcm0ud2F0Y2goJ3JvbGUnKSkgPyAoXG4gICAgICAgICAgICAgICAgPD5cbiAgICAgICAgICAgICAgICAgIDxGb3JtRmllbGRcbiAgICAgICAgICAgICAgICAgICAgY29udHJvbD17Zm9ybS5jb250cm9sfVxuICAgICAgICAgICAgICAgICAgICBuYW1lPSdmaXJzdE5hbWUnXG4gICAgICAgICAgICAgICAgICAgIHJlbmRlcj17KHsgZmllbGQgfSkgPT4gKFxuICAgICAgICAgICAgICAgICAgICAgIDxGb3JtSXRlbT5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxGb3JtTGFiZWw+Rmlyc3QgTmFtZSAqPC9Gb3JtTGFiZWw+XG4gICAgICAgICAgICAgICAgICAgICAgICA8Rm9ybUNvbnRyb2w+XG4gICAgICAgICAgICAgICAgICAgICAgICAgIDxJbnB1dCBwbGFjZWhvbGRlcj0nRW50ZXIgZmlyc3QgbmFtZScgey4uLmZpZWxkfSAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgPC9Gb3JtQ29udHJvbD5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxGb3JtTWVzc2FnZSAvPlxuICAgICAgICAgICAgICAgICAgICAgIDwvRm9ybUl0ZW0+XG4gICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAvPlxuXG4gICAgICAgICAgICAgICAgICA8Rm9ybUZpZWxkXG4gICAgICAgICAgICAgICAgICAgIGNvbnRyb2w9e2Zvcm0uY29udHJvbH1cbiAgICAgICAgICAgICAgICAgICAgbmFtZT0nbGFzdE5hbWUnXG4gICAgICAgICAgICAgICAgICAgIHJlbmRlcj17KHsgZmllbGQgfSkgPT4gKFxuICAgICAgICAgICAgICAgICAgICAgIDxGb3JtSXRlbT5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxGb3JtTGFiZWw+TGFzdCBOYW1lICo8L0Zvcm1MYWJlbD5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxGb3JtQ29udHJvbD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPElucHV0IHBsYWNlaG9sZGVyPSdFbnRlciBsYXN0IG5hbWUnIHsuLi5maWVsZH0gLz5cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvRm9ybUNvbnRyb2w+XG4gICAgICAgICAgICAgICAgICAgICAgICA8Rm9ybU1lc3NhZ2UgLz5cbiAgICAgICAgICAgICAgICAgICAgICA8L0Zvcm1JdGVtPlxuICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICA8Lz5cbiAgICAgICAgICAgICAgKSA6IChcbiAgICAgICAgICAgICAgICA8Rm9ybUZpZWxkXG4gICAgICAgICAgICAgICAgICBjb250cm9sPXtmb3JtLmNvbnRyb2x9XG4gICAgICAgICAgICAgICAgICBuYW1lPSdlbWFpbCdcbiAgICAgICAgICAgICAgICAgIHJlbmRlcj17KHsgZmllbGQgfSkgPT4gKFxuICAgICAgICAgICAgICAgICAgICA8Rm9ybUl0ZW0+XG4gICAgICAgICAgICAgICAgICAgICAgPEZvcm1MYWJlbD57dCgnZW1haWxBZGRyZXNzJyl9ICo8L0Zvcm1MYWJlbD5cbiAgICAgICAgICAgICAgICAgICAgICA8Rm9ybUNvbnRyb2w+XG4gICAgICAgICAgICAgICAgICAgICAgICA8SW5wdXQgcGxhY2Vob2xkZXI9e3QoJ2VudGVyRW1haWxBZGRyZXNzJyl9IHR5cGU9J2VtYWlsJyB7Li4uZmllbGR9IC8+XG4gICAgICAgICAgICAgICAgICAgICAgPC9Gb3JtQ29udHJvbD5cbiAgICAgICAgICAgICAgICAgICAgICA8Rm9ybU1lc3NhZ2UgLz5cbiAgICAgICAgICAgICAgICAgICAgPC9Gb3JtSXRlbT5cbiAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgKX1cblxuICAgICAgICAgICAgICB7Zm9ybS53YXRjaCgnb3JnYW5pemF0aW9uSWQnKSAmJiAoXG4gICAgICAgICAgICAgICAgPEZvcm1GaWVsZFxuICAgICAgICAgICAgICAgICAgY29udHJvbD17Zm9ybS5jb250cm9sfVxuICAgICAgICAgICAgICAgICAgbmFtZT0nYnVpbGRpbmdJZCdcbiAgICAgICAgICAgICAgICAgIHJlbmRlcj17KHsgZmllbGQgfSkgPT4gKFxuICAgICAgICAgICAgICAgICAgICA8Rm9ybUl0ZW0+XG4gICAgICAgICAgICAgICAgICAgICAgPEZvcm1MYWJlbD5cbiAgICAgICAgICAgICAgICAgICAgICAgIHsnQnVpbGRpbmcnfSAoe3QoJ29wdGlvbmFsJyl9KVxuICAgICAgICAgICAgICAgICAgICAgIDwvRm9ybUxhYmVsPlxuICAgICAgICAgICAgICAgICAgICAgIDxGb3JtQ29udHJvbD5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxzZWxlY3RcbiAgICAgICAgICAgICAgICAgICAgICAgICAgey4uLmZpZWxkfVxuICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17KGUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaWVsZC5vbkNoYW5nZShlLnRhcmdldC52YWx1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gUmVzZXQgcmVzaWRlbmNlIHdoZW4gYnVpbGRpbmcgY2hhbmdlc1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvcm0uc2V0VmFsdWUoJ3Jlc2lkZW5jZUlkJywgJycpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9J2ZsZXggaC0xMCB3LWZ1bGwgcm91bmRlZC1tZCBib3JkZXIgYm9yZGVyLWlucHV0IGJnLWJhY2tncm91bmQgcHgtMyBweS0yIHRleHQtc20gcmluZy1vZmZzZXQtYmFja2dyb3VuZCBmaWxlOmJvcmRlci0wIGZpbGU6YmctdHJhbnNwYXJlbnQgZmlsZTp0ZXh0LXNtIGZpbGU6Zm9udC1tZWRpdW0gcGxhY2Vob2xkZXI6dGV4dC1tdXRlZC1mb3JlZ3JvdW5kIGZvY3VzLXZpc2libGU6b3V0bGluZS1ub25lIGZvY3VzLXZpc2libGU6cmluZy0yIGZvY3VzLXZpc2libGU6cmluZy1yaW5nIGZvY3VzLXZpc2libGU6cmluZy1vZmZzZXQtMiBkaXNhYmxlZDpjdXJzb3Itbm90LWFsbG93ZWQgZGlzYWJsZWQ6b3BhY2l0eS01MCdcbiAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT0nJz57J1NlbGVjdCBidWlsZGluZyd9PC9vcHRpb24+XG4gICAgICAgICAgICAgICAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9J25vbmUnPnsnTm8gc3BlY2lmaWMgYnVpbGRpbmcnfTwvb3B0aW9uPlxuICAgICAgICAgICAgICAgICAgICAgICAgICB7Z2V0RmlsdGVyZWRCdWlsZGluZ3MoZm9ybS53YXRjaCgnb3JnYW5pemF0aW9uSWQnKSkubWFwKChidWlsZGluZykgPT4gKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxvcHRpb24ga2V5PXtidWlsZGluZy5pZH0gdmFsdWU9e2J1aWxkaW5nLmlkfT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtidWlsZGluZy5uYW1lfSAtIHtidWlsZGluZy5hZGRyZXNzfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvb3B0aW9uPlxuICAgICAgICAgICAgICAgICAgICAgICAgICApKX1cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvc2VsZWN0PlxuICAgICAgICAgICAgICAgICAgICAgIDwvRm9ybUNvbnRyb2w+XG5cbiAgICAgICAgICAgICAgICAgICAgICA8Rm9ybU1lc3NhZ2UgLz5cbiAgICAgICAgICAgICAgICAgICAgPC9Gb3JtSXRlbT5cbiAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgKX1cblxuICAgICAgICAgICAgICB7Wyd0ZW5hbnQnLCAncmVzaWRlbnQnLCAnZGVtb190ZW5hbnQnLCAnZGVtb19yZXNpZGVudCddLmluY2x1ZGVzKFxuICAgICAgICAgICAgICAgIGZvcm0ud2F0Y2goJ3JvbGUnKVxuICAgICAgICAgICAgICApICYmXG4gICAgICAgICAgICAgICAgZm9ybS53YXRjaCgnYnVpbGRpbmdJZCcpICYmXG4gICAgICAgICAgICAgICAgZm9ybS53YXRjaCgnYnVpbGRpbmdJZCcpICE9PSAnbm9uZScgJiYgKFxuICAgICAgICAgICAgICAgICAgPEZvcm1GaWVsZFxuICAgICAgICAgICAgICAgICAgICBjb250cm9sPXtmb3JtLmNvbnRyb2x9XG4gICAgICAgICAgICAgICAgICAgIG5hbWU9J3Jlc2lkZW5jZUlkJ1xuICAgICAgICAgICAgICAgICAgICByZW5kZXI9eyh7IGZpZWxkIH0pID0+IChcbiAgICAgICAgICAgICAgICAgICAgICA8Rm9ybUl0ZW0+XG4gICAgICAgICAgICAgICAgICAgICAgICA8Rm9ybUxhYmVsPnsnUmVzaWRlbmNlJ30gKjwvRm9ybUxhYmVsPlxuICAgICAgICAgICAgICAgICAgICAgICAgPEZvcm1Db250cm9sPlxuICAgICAgICAgICAgICAgICAgICAgICAgICA8c2VsZWN0XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgey4uLmZpZWxkfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXtmaWVsZC5vbkNoYW5nZX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9J2ZsZXggaC0xMCB3LWZ1bGwgcm91bmRlZC1tZCBib3JkZXIgYm9yZGVyLWlucHV0IGJnLWJhY2tncm91bmQgcHgtMyBweS0yIHRleHQtc20gcmluZy1vZmZzZXQtYmFja2dyb3VuZCBmaWxlOmJvcmRlci0wIGZpbGU6YmctdHJhbnNwYXJlbnQgZmlsZTp0ZXh0LXNtIGZpbGU6Zm9udC1tZWRpdW0gcGxhY2Vob2xkZXI6dGV4dC1tdXRlZC1mb3JlZ3JvdW5kIGZvY3VzLXZpc2libGU6b3V0bGluZS1ub25lIGZvY3VzLXZpc2libGU6cmluZy0yIGZvY3VzLXZpc2libGU6cmluZy1yaW5nIGZvY3VzLXZpc2libGU6cmluZy1vZmZzZXQtMiBkaXNhYmxlZDpjdXJzb3Itbm90LWFsbG93ZWQgZGlzYWJsZWQ6b3BhY2l0eS01MCdcbiAgICAgICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9Jyc+eydTZWxlY3QgcmVzaWRlbmNlJ308L29wdGlvbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7Z2V0RmlsdGVyZWRSZXNpZGVuY2VzKGZvcm0ud2F0Y2goJ2J1aWxkaW5nSWQnKSwgZm9ybS53YXRjaCgnb3JnYW5pemF0aW9uSWQnKSkubWFwKChyZXNpZGVuY2UpID0+IChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxvcHRpb24ga2V5PXtyZXNpZGVuY2UuaWR9IHZhbHVlPXtyZXNpZGVuY2UuaWR9PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7J1VuaXQnfSB7cmVzaWRlbmNlLnVuaXROdW1iZXJ9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtyZXNpZGVuY2UuZmxvb3IgJiYgYCAtICR7J0Zsb29yJ30gJHtyZXNpZGVuY2UuZmxvb3J9YH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvb3B0aW9uPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICkpfVxuICAgICAgICAgICAgICAgICAgICAgICAgICA8L3NlbGVjdD5cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvRm9ybUNvbnRyb2w+XG4gICAgICAgICAgICAgICAgICAgICAgICA8Rm9ybURlc2NyaXB0aW9uPlxuICAgICAgICAgICAgICAgICAgICAgICAgICB7J1Jlc2lkZW5jZSByZXF1aXJlZCBmb3IgdGVuYW50cyBhbmQgcmVzaWRlbnRzJ31cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvRm9ybURlc2NyaXB0aW9uPlxuICAgICAgICAgICAgICAgICAgICAgICAgPEZvcm1NZXNzYWdlIC8+XG4gICAgICAgICAgICAgICAgICAgICAgPC9Gb3JtSXRlbT5cbiAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgKX1cblxuICAgICAgICAgICAgICB7LyogT25seSBzaG93IGV4cGlyeSBmb3IgcmVndWxhciBpbnZpdGF0aW9ucywgbm90IGRlbW8gdXNlcnMgKi99XG4gICAgICAgICAgICAgIHshWydkZW1vX21hbmFnZXInLCAnZGVtb190ZW5hbnQnLCAnZGVtb19yZXNpZGVudCddLmluY2x1ZGVzKGZvcm0ud2F0Y2goJ3JvbGUnKSkgJiYgKFxuICAgICAgICAgICAgICAgIDxGb3JtRmllbGRcbiAgICAgICAgICAgICAgICAgIGNvbnRyb2w9e2Zvcm0uY29udHJvbH1cbiAgICAgICAgICAgICAgICAgIG5hbWU9J2V4cGlyeURheXMnXG4gICAgICAgICAgICAgICAgICByZW5kZXI9eyh7IGZpZWxkIH0pID0+IChcbiAgICAgICAgICAgICAgICAgICAgPEZvcm1JdGVtPlxuICAgICAgICAgICAgICAgICAgICAgIDxGb3JtTGFiZWw+e3QoJ2V4cGlyZXNJbicpfTwvRm9ybUxhYmVsPlxuICAgICAgICAgICAgICAgICAgICAgIDxGb3JtQ29udHJvbD5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxzZWxlY3RcbiAgICAgICAgICAgICAgICAgICAgICAgICAgey4uLmZpZWxkfVxuICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17KGUpID0+IGZpZWxkLm9uQ2hhbmdlKHBhcnNlSW50KGUudGFyZ2V0LnZhbHVlKSl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlPXtmaWVsZC52YWx1ZS50b1N0cmluZygpfVxuICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9J2ZsZXggaC0xMCB3LWZ1bGwgcm91bmRlZC1tZCBib3JkZXIgYm9yZGVyLWlucHV0IGJnLWJhY2tncm91bmQgcHgtMyBweS0yIHRleHQtc20gcmluZy1vZmZzZXQtYmFja2dyb3VuZCBmaWxlOmJvcmRlci0wIGZpbGU6YmctdHJhbnNwYXJlbnQgZmlsZTp0ZXh0LXNtIGZpbGU6Zm9udC1tZWRpdW0gcGxhY2Vob2xkZXI6dGV4dC1tdXRlZC1mb3JlZ3JvdW5kIGZvY3VzLXZpc2libGU6b3V0bGluZS1ub25lIGZvY3VzLXZpc2libGU6cmluZy0yIGZvY3VzLXZpc2libGU6cmluZy1yaW5nIGZvY3VzLXZpc2libGU6cmluZy1vZmZzZXQtMiBkaXNhYmxlZDpjdXJzb3Itbm90LWFsbG93ZWQgZGlzYWJsZWQ6b3BhY2l0eS01MCdcbiAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT0nMSc+MSB7dCgnZGF5Jyl9PC9vcHRpb24+XG4gICAgICAgICAgICAgICAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9JzMnPjMge3QoJ2RheXMnKX08L29wdGlvbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT0nNyc+NyB7dCgnZGF5cycpfTwvb3B0aW9uPlxuICAgICAgICAgICAgICAgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPScxNCc+MTQge3QoJ2RheXMnKX08L29wdGlvbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT0nMzAnPjMwIHt0KCdkYXlzJyl9PC9vcHRpb24+XG4gICAgICAgICAgICAgICAgICAgICAgICA8L3NlbGVjdD5cbiAgICAgICAgICAgICAgICAgICAgICA8L0Zvcm1Db250cm9sPlxuICAgICAgICAgICAgICAgICAgICAgIDxGb3JtTWVzc2FnZSAvPlxuICAgICAgICAgICAgICAgICAgICA8L0Zvcm1JdGVtPlxuICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICApfVxuXG4gICAgICAgICAgICAgIHsvKiBPbmx5IHNob3cgcGVyc29uYWwgbWVzc2FnZSBmb3IgcmVndWxhciBpbnZpdGF0aW9ucywgbm90IGRlbW8gdXNlcnMgKi99XG4gICAgICAgICAgICAgIHshWydkZW1vX21hbmFnZXInLCAnZGVtb190ZW5hbnQnLCAnZGVtb19yZXNpZGVudCddLmluY2x1ZGVzKGZvcm0ud2F0Y2goJ3JvbGUnKSkgJiYgKFxuICAgICAgICAgICAgICAgIDxGb3JtRmllbGRcbiAgICAgICAgICAgICAgICAgIGNvbnRyb2w9e2Zvcm0uY29udHJvbH1cbiAgICAgICAgICAgICAgICAgIG5hbWU9J3BlcnNvbmFsTWVzc2FnZSdcbiAgICAgICAgICAgICAgICAgIHJlbmRlcj17KHsgZmllbGQgfSkgPT4gKFxuICAgICAgICAgICAgICAgICAgICA8Rm9ybUl0ZW0+XG4gICAgICAgICAgICAgICAgICAgICAgPEZvcm1MYWJlbD5cbiAgICAgICAgICAgICAgICAgICAgICAgIHt0KCdwZXJzb25hbE1lc3NhZ2UnKX0gKHt0KCdvcHRpb25hbCcpfSlcbiAgICAgICAgICAgICAgICAgICAgICA8L0Zvcm1MYWJlbD5cbiAgICAgICAgICAgICAgICAgICAgICA8Rm9ybUNvbnRyb2w+XG4gICAgICAgICAgICAgICAgICAgICAgICA8VGV4dGFyZWFcbiAgICAgICAgICAgICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI9e3QoJ3BlcnNvbmFsTWVzc2FnZVBsYWNlaG9sZGVyJyl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT0nbWluLWgtWzgwcHhdJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICB7Li4uZmllbGR9XG4gICAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICAgIDwvRm9ybUNvbnRyb2w+XG4gICAgICAgICAgICAgICAgICAgICAgPEZvcm1EZXNjcmlwdGlvbj57dCgncGVyc29uYWxNZXNzYWdlRGVzY3JpcHRpb24nKX08L0Zvcm1EZXNjcmlwdGlvbj5cbiAgICAgICAgICAgICAgICAgICAgICA8Rm9ybU1lc3NhZ2UgLz5cbiAgICAgICAgICAgICAgICAgICAgPC9Gb3JtSXRlbT5cbiAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgKX1cblxuICAgICAgICAgICAgICA8RGlhbG9nRm9vdGVyPlxuICAgICAgICAgICAgICAgIDxCdXR0b24gdHlwZT0nYnV0dG9uJyB2YXJpYW50PSdvdXRsaW5lJyBvbkNsaWNrPXsoKSA9PiBvbk9wZW5DaGFuZ2UoZmFsc2UpfT5cbiAgICAgICAgICAgICAgICAgIHt0KCdjYW5jZWwnKX1cbiAgICAgICAgICAgICAgICA8L0J1dHRvbj5cbiAgICAgICAgICAgICAgICA8QnV0dG9uIFxuICAgICAgICAgICAgICAgICAgdHlwZT0nc3VibWl0JyBcbiAgICAgICAgICAgICAgICAgIGRpc2FibGVkPXtpbnZpdGF0aW9uTXV0YXRpb24uaXNQZW5kaW5nfVxuICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgIHtpbnZpdGF0aW9uTXV0YXRpb24uaXNQZW5kaW5nXG4gICAgICAgICAgICAgICAgICAgID8gc2VsZWN0ZWRPcmdUeXBlID09PSAnRGVtbydcbiAgICAgICAgICAgICAgICAgICAgICA/ICdDcmVhdGluZyBVc2VyLi4uJ1xuICAgICAgICAgICAgICAgICAgICAgIDogdCgnc2VuZGluZycpXG4gICAgICAgICAgICAgICAgICAgIDogc2VsZWN0ZWRPcmdUeXBlID09PSAnRGVtbydcbiAgICAgICAgICAgICAgICAgICAgICA/ICdDcmVhdGUgRGVtbyBVc2VyJ1xuICAgICAgICAgICAgICAgICAgICAgIDogdCgnc2VuZEludml0YXRpb24nKX1cbiAgICAgICAgICAgICAgICA8L0J1dHRvbj5cbiAgICAgICAgICAgICAgPC9EaWFsb2dGb290ZXI+XG4gICAgICAgICAgICA8L2Zvcm0+XG4gICAgICAgICAgPC9Gb3JtPlxuICAgICAgICA8L2Rpdj5cblxuICAgICAgPC9EaWFsb2dDb250ZW50PlxuICAgIDwvRGlhbG9nPlxuICApO1xufSJdLCJ2ZXJzaW9uIjozfQ==