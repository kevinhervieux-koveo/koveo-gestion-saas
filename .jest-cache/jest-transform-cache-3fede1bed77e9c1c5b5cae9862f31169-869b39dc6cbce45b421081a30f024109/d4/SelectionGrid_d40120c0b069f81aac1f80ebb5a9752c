4e3c02b2242c50d177cfd91e87afe668
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.SelectionGrid = SelectionGrid;
const jsx_runtime_1 = require("react/jsx-runtime");
const lucide_react_1 = require("lucide-react");
const card_1 = require("@/components/ui/card");
const button_1 = require("@/components/ui/button");
const loading_spinner_1 = require("@/components/ui/loading-spinner");
const no_data_card_1 = require("@/components/ui/no-data-card");
const use_language_1 = require("@/hooks/use-language");
/**
 * Get appropriate icon for item type
 */
function getIconForType(type) {
    switch (type) {
        case 'organization':
            return lucide_react_1.Users;
        case 'building':
            return lucide_react_1.Building;
        case 'residence':
            return lucide_react_1.Home;
        default:
            return lucide_react_1.Building;
    }
}
/**
 * SelectionGrid component - displays a grid of selectable cards for hierarchical navigation
 * Used for Organization â†’ Building â†’ Residence selection flows
 */
function SelectionGrid({ title, items, onSelectItem, onBack, backButtonText = 'back', isLoading }) {
    const { t } = (0, use_language_1.useLanguage)();
    // Show loading state
    if (isLoading) {
        return (0, jsx_runtime_1.jsx)(loading_spinner_1.LoadingSpinner, {});
    }
    // Show no data state
    if (items.length === 0) {
        return ((0, jsx_runtime_1.jsxs)("div", { className: "flex flex-col h-full", children: [onBack && ((0, jsx_runtime_1.jsxs)("div", { className: "flex justify-between items-center mb-6", children: [(0, jsx_runtime_1.jsx)("h2", { className: "text-2xl font-bold text-gray-900", "data-testid": "selection-title", children: title }), (0, jsx_runtime_1.jsxs)(button_1.Button, { variant: "outline", onClick: onBack, className: "flex items-center gap-2", "data-testid": "button-back", children: [(0, jsx_runtime_1.jsx)(lucide_react_1.ArrowLeft, { className: "w-4 h-4" }), backButtonText] })] })), (0, jsx_runtime_1.jsx)(no_data_card_1.NoDataCard, { icon: lucide_react_1.Building, titleKey: "noItemsFound", descriptionKey: "noItemsMessage", badgeKey: "noData", testId: "no-items-message" })] }));
    }
    return ((0, jsx_runtime_1.jsxs)("div", { className: "flex flex-col h-full", children: [(title && title.trim() !== '') || onBack ? ((0, jsx_runtime_1.jsxs)("div", { className: "flex justify-between items-center mb-6", children: [title && title.trim() !== '' && ((0, jsx_runtime_1.jsx)("h2", { className: "text-2xl font-bold text-gray-900", "data-testid": "selection-title", children: title })), onBack && ((0, jsx_runtime_1.jsxs)(button_1.Button, { variant: "outline", onClick: onBack, className: "flex items-center gap-2", "data-testid": "button-back", children: [(0, jsx_runtime_1.jsx)(lucide_react_1.ArrowLeft, { className: "w-4 h-4" }), backButtonText] }))] })) : null, (0, jsx_runtime_1.jsx)("div", { className: "grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4", children: items.map((item) => {
                    const Icon = getIconForType(item.type);
                    const isDisabled = item.disabled || false;
                    return ((0, jsx_runtime_1.jsxs)(card_1.Card, { className: `transition-shadow ${isDisabled ? 'opacity-60 cursor-not-allowed' : 'hover:shadow-md cursor-pointer'}`, "data-testid": `card-${item.type}-${item.id}`, children: [(0, jsx_runtime_1.jsx)(card_1.CardHeader, { className: "pb-3", children: (0, jsx_runtime_1.jsxs)("div", { className: "flex items-center gap-3", children: [(0, jsx_runtime_1.jsx)(Icon, { className: `w-5 h-5 ${isDisabled ? 'text-gray-400' : 'text-blue-600'}` }), (0, jsx_runtime_1.jsx)(card_1.CardTitle, { className: `text-lg ${isDisabled ? 'text-gray-500' : ''}`, "data-testid": `text-name-${item.id}`, children: item.name })] }) }), (0, jsx_runtime_1.jsxs)(card_1.CardContent, { className: "space-y-4", children: [(0, jsx_runtime_1.jsx)("p", { className: `text-sm ${isDisabled ? 'text-gray-400' : 'text-gray-600'}`, "data-testid": `text-details-${item.id}`, children: item.details }), (0, jsx_runtime_1.jsx)(button_1.Button, { onClick: () => {
                                            if (!isDisabled) {
                                                console.log('ðŸŽ¯ [SELECTION GRID DEBUG] Button clicked:', { itemId: item.id, itemName: item.name });
                                                onSelectItem(item.id);
                                            }
                                        }, disabled: isDisabled, className: "w-full", variant: isDisabled ? "secondary" : "default", "data-testid": `button-select-${item.id}`, children: isDisabled && item.disabledReason ? item.disabledReason : t('select') })] })] }, item.id));
                }) })] }));
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiL2hvbWUvcnVubmVyL3dvcmtzcGFjZS9jbGllbnQvc3JjL2NvbXBvbmVudHMvY29tbW9uL1NlbGVjdGlvbkdyaWQudHN4IiwibWFwcGluZ3MiOiI7O0FBMEVBLHNDQTBIQzs7QUFwTUQsK0NBQWdFO0FBQ2hFLCtDQUFnRjtBQUNoRixtREFBZ0Q7QUFDaEQscUVBQWlFO0FBQ2pFLCtEQUEwRDtBQUMxRCx1REFBbUQ7QUFpRG5EOztHQUVHO0FBQ0gsU0FBUyxjQUFjLENBQUMsSUFBK0I7SUFDckQsUUFBUSxJQUFJLEVBQUUsQ0FBQztRQUNiLEtBQUssY0FBYztZQUNqQixPQUFPLG9CQUFLLENBQUM7UUFDZixLQUFLLFVBQVU7WUFDYixPQUFPLHVCQUFRLENBQUM7UUFDbEIsS0FBSyxXQUFXO1lBQ2QsT0FBTyxtQkFBSSxDQUFDO1FBQ2Q7WUFDRSxPQUFPLHVCQUFRLENBQUM7SUFDcEIsQ0FBQztBQUNILENBQUM7QUFFRDs7O0dBR0c7QUFDSCxTQUFnQixhQUFhLENBQUMsRUFDNUIsS0FBSyxFQUNMLEtBQUssRUFDTCxZQUFZLEVBQ1osTUFBTSxFQUNOLGNBQWMsR0FBRyxNQUFNLEVBQ3ZCLFNBQVMsRUFDVTtJQUNuQixNQUFNLEVBQUUsQ0FBQyxFQUFFLEdBQUcsSUFBQSwwQkFBVyxHQUFFLENBQUM7SUFFNUIscUJBQXFCO0lBQ3JCLElBQUksU0FBUyxFQUFFLENBQUM7UUFDZCxPQUFPLHVCQUFDLGdDQUFjLEtBQUcsQ0FBQztJQUM1QixDQUFDO0lBRUQscUJBQXFCO0lBQ3JCLElBQUksS0FBSyxDQUFDLE1BQU0sS0FBSyxDQUFDLEVBQUUsQ0FBQztRQUN2QixPQUFPLENBQ0wsaUNBQUssU0FBUyxFQUFDLHNCQUFzQixhQUNsQyxNQUFNLElBQUksQ0FDVCxpQ0FBSyxTQUFTLEVBQUMsd0NBQXdDLGFBQ3JELCtCQUFJLFNBQVMsRUFBQyxrQ0FBa0MsaUJBQWEsaUJBQWlCLFlBQzNFLEtBQUssR0FDSCxFQUNMLHdCQUFDLGVBQU0sSUFDTCxPQUFPLEVBQUMsU0FBUyxFQUNqQixPQUFPLEVB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SCxDQUFDLEVBQ0QsUUFBUSxFQUFFLFVBQVUsRUFDcEIsU0FBUyxFQUFDLFFBQVEsRUFDbEIsT0FBTyxFQUFFLFVBQVUsQ0FBQyxDQUFDLENBQUMsV0FBVyxDQUFDLENBQUMsQ0FBQyxTQUFTLGlCQUNoQyxpQkFBaUIsSUFBSSxDQUFDLEVBQUUsRUFBRSxZQUV0QyxVQUFVLElBQUksSUFBSSxDQUFDLGNBQWMsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLGNBQWMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLFFBQWUsQ0FBQyxHQUN0RSxJQUNHLEtBbkNULElBQUksQ0FBQyxFQUFFLENBb0NQLENBQ1IsQ0FBQztnQkFDSixDQUFDLENBQUMsR0FDRSxJQUNGLENBQ1AsQ0FBQztBQUNKLENBQUMiLCJuYW1lcyI6W10sInNvdXJjZXMiOlsiL2hvbWUvcnVubmVyL3dvcmtzcGFjZS9jbGllbnQvc3JjL2NvbXBvbmVudHMvY29tbW9uL1NlbGVjdGlvbkdyaWQudHN4Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEJ1aWxkaW5nLCBIb21lLCBVc2VycywgQXJyb3dMZWZ0IH0gZnJvbSAnbHVjaWRlLXJlYWN0JztcbmltcG9ydCB7IENhcmQsIENhcmRDb250ZW50LCBDYXJkSGVhZGVyLCBDYXJkVGl0bGUgfSBmcm9tICdAL2NvbXBvbmVudHMvdWkvY2FyZCc7XG5pbXBvcnQgeyBCdXR0b24gfSBmcm9tICdAL2NvbXBvbmVudHMvdWkvYnV0dG9uJztcbmltcG9ydCB7IExvYWRpbmdTcGlubmVyIH0gZnJvbSAnQC9jb21wb25lbnRzL3VpL2xvYWRpbmctc3Bpbm5lcic7XG5pbXBvcnQgeyBOb0RhdGFDYXJkIH0gZnJvbSAnQC9jb21wb25lbnRzL3VpL25vLWRhdGEtY2FyZCc7XG5pbXBvcnQgeyB1c2VMYW5ndWFnZSB9IGZyb20gJ0AvaG9va3MvdXNlLWxhbmd1YWdlJztcblxuLyoqXG4gKiBJdGVtIHR5cGUgZm9yIHNlbGVjdGlvbiBncmlkXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgU2VsZWN0aW9uR3JpZEl0ZW0ge1xuICBpZDogc3RyaW5nO1xuICBuYW1lOiBzdHJpbmc7XG4gIGRldGFpbHM6IHN0cmluZztcbiAgdHlwZTogJ29yZ2FuaXphdGlvbicgfCAnYnVpbGRpbmcnIHwgJ3Jlc2lkZW5jZSc7XG4gIGRpc2FibGVkPzogYm9vbGVhbjtcbiAgZGlzYWJsZWRSZWFzb24/OiBzdHJpbmc7XG59XG5cbi8qKlxuICogUHJvcHMgZm9yIFNlbGVjdGlvbkdyaWQgY29tcG9uZW50XG4gKi9cbmludGVyZmFjZSBTZWxlY3Rpb25HcmlkUHJvcHMge1xuICAvKipcbiAgICogVGl0bGUgdG8gZGlzcGxheSBhYm92ZSB0aGUgZ3JpZFxuICAgKi9cbiAgdGl0bGU6IHN0cmluZztcbiAgXG4gIC8qKlxuICAgKiBBcnJheSBvZiBpdGVtcyB0byBkaXNwbGF5IGFzIGNhcmRzXG4gICAqL1xuICBpdGVtczogU2VsZWN0aW9uR3JpZEl0ZW1bXTtcbiAgXG4gIC8qKlxuICAgKiBDYWxsYmFjayB3aGVuIGFuIGl0ZW0gaXMgc2VsZWN0ZWRcbiAgICovXG4gIG9uU2VsZWN0SXRlbTogKGlkOiBzdHJpbmcpID0+IHZvaWQ7XG4gIFxuICAvKipcbiAgICogT3B0aW9uYWwgY2FsbGJhY2sgZm9yIGJhY2sgbmF2aWdhdGlvblxuICAgKi9cbiAgb25CYWNrOiAoKCkgPT4gdm9pZCkgfCBudWxsO1xuICBcbiAgLyoqXG4gICAqIEN1c3RvbSB0ZXh0IGZvciBiYWNrIGJ1dHRvbiAoZGVmYXVsdHMgdG8gJ2JhY2snKVxuICAgKi9cbiAgYmFja0J1dHRvblRleHQ/OiBzdHJpbmc7XG4gIFxuICAvKipcbiAgICogTG9hZGluZyBzdGF0ZSBmbGFnXG4gICAqL1xuICBpc0xvYWRpbmc6IGJvb2xlYW47XG59XG5cbi8qKlxuICogR2V0IGFwcHJvcHJpYXRlIGljb24gZm9yIGl0ZW0gdHlwZVxuICovXG5mdW5jdGlvbiBnZXRJY29uRm9yVHlwZSh0eXBlOiBTZWxlY3Rpb25HcmlkSXRlbVsndHlwZSddKSB7XG4gIHN3aXRjaCAodHlwZSkge1xuICAgIGNhc2UgJ29yZ2FuaXphdGlvbic6XG4gICAgICByZXR1cm4gVXNlcnM7XG4gICAgY2FzZSAnYnVpbGRpbmcnOlxuICAgICAgcmV0dXJuIEJ1aWxkaW5nO1xuICAgIGNhc2UgJ3Jlc2lkZW5jZSc6XG4gICAgICByZXR1cm4gSG9tZTtcbiAgICBkZWZhdWx0OlxuICAgICAgcmV0dXJuIEJ1aWxkaW5nO1xuICB9XG59XG5cbi8qKlxuICogU2VsZWN0aW9uR3JpZCBjb21wb25lbnQgLSBkaXNwbGF5cyBhIGdyaWQgb2Ygc2VsZWN0YWJsZSBjYXJkcyBmb3IgaGllcmFyY2hpY2FsIG5hdmlnYXRpb25cbiAqIFVzZWQgZm9yIE9yZ2FuaXphdGlvbiDihpIgQnVpbGRpbmcg4oaSIFJlc2lkZW5jZSBzZWxlY3Rpb24gZmxvd3NcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIFNlbGVjdGlvbkdyaWQoeyBcbiAgdGl0bGUsIFxuICBpdGVtcywgXG4gIG9uU2VsZWN0SXRlbSwgXG4gIG9uQmFjaywgXG4gIGJhY2tCdXR0b25UZXh0ID0gJ2JhY2snLFxuICBpc0xvYWRpbmcgXG59OiBTZWxlY3Rpb25HcmlkUHJvcHMpIHtcbiAgY29uc3QgeyB0IH0gPSB1c2VMYW5ndWFnZSgpO1xuXG4gIC8vIFNob3cgbG9hZGluZyBzdGF0ZVxuICBpZiAoaXNMb2FkaW5nKSB7XG4gICAgcmV0dXJuIDxMb2FkaW5nU3Bpbm5lciAvPjtcbiAgfVxuXG4gIC8vIFNob3cgbm8gZGF0YSBzdGF0ZVxuICBpZiAoaXRlbXMubGVuZ3RoID09PSAwKSB7XG4gICAgcmV0dXJuIChcbiAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBmbGV4LWNvbCBoLWZ1bGxcIj5cbiAgICAgICAge29uQmFjayAmJiAoXG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGp1c3RpZnktYmV0d2VlbiBpdGVtcy1jZW50ZXIgbWItNlwiPlxuICAgICAgICAgICAgPGgyIGNsYXNzTmFtZT1cInRleHQtMnhsIGZvbnQtYm9sZCB0ZXh0LWdyYXktOTAwXCIgZGF0YS10ZXN0aWQ9XCJzZWxlY3Rpb24tdGl0bGVcIj5cbiAgICAgICAgICAgICAge3RpdGxlfVxuICAgICAgICAgICAgPC9oMj5cbiAgICAgICAgICAgIDxCdXR0b25cbiAgICAgICAgICAgICAgdmFyaWFudD1cIm91dGxpbmVcIlxuICAgICAgICAgICAgICBvbkNsaWNrPXtvbkJhY2t9XG4gICAgICAgICAgICAgIGNsYXNzTmFtZT1cImZsZXggaXRlbXMtY2VudGVyIGdhcC0yXCJcbiAgICAgICAgICAgICAgZGF0YS10ZXN0aWQ9XCJidXR0b24tYmFja1wiXG4gICAgICAgICAgICA+XG4gICAgICAgICAgICAgIDxBcnJvd0xlZnQgY2xhc3NOYW1lPVwidy00IGgtNFwiIC8+XG4gICAgICAgICAgICAgIHtiYWNrQnV0dG9uVGV4dH1cbiAgICAgICAgICAgIDwvQnV0dG9uPlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICApfVxuICAgICAgICBcbiAgICAgICAgPE5vRGF0YUNhcmRcbiAgICAgICAgICBpY29uPXtCdWlsZGluZ31cbiAgICAgICAgICB0aXRsZUtleT1cIm5vSXRlbXNGb3VuZFwiXG4gICAgICAgICAgZGVzY3JpcHRpb25LZXk9XCJub0l0ZW1zTWVzc2FnZVwiXG4gICAgICAgICAgYmFkZ2VLZXk9XCJub0RhdGFcIlxuICAgICAgICAgIHRlc3RJZD1cIm5vLWl0ZW1zLW1lc3NhZ2VcIlxuICAgICAgICAvPlxuICAgICAgPC9kaXY+XG4gICAgKTtcbiAgfVxuXG4gIHJldHVybiAoXG4gICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGZsZXgtY29sIGgtZnVsbFwiPlxuICAgICAgey8qIEhlYWRlciB3aXRoIHRpdGxlIGFuZCBvcHRpb25hbCBiYWNrIGJ1dHRvbiAtIG9ubHkgc2hvdyBpZiB0aXRsZSBleGlzdHMgb3IgYmFjayBidXR0b24gaXMgbmVlZGVkICovfVxuICAgICAgeyh0aXRsZSAmJiB0aXRsZS50cmltKCkgIT09ICcnKSB8fCBvbkJhY2sgPyAoXG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBqdXN0aWZ5LWJldHdlZW4gaXRlbXMtY2VudGVyIG1iLTZcIj5cbiAgICAgICAgICB7dGl0bGUgJiYgdGl0bGUudHJpbSgpICE9PSAnJyAmJiAoXG4gICAgICAgICAgICA8aDIgY2xhc3NOYW1lPVwidGV4dC0yeGwgZm9udC1ib2xkIHRleHQtZ3JheS05MDBcIiBkYXRhLXRlc3RpZD1cInNlbGVjdGlvbi10aXRsZVwiPlxuICAgICAgICAgICAgICB7dGl0bGV9XG4gICAgICAgICAgICA8L2gyPlxuICAgICAgICAgICl9XG4gICAgICAgICAgXG4gICAgICAgICAge29uQmFjayAmJiAoXG4gICAgICAgICAgICA8QnV0dG9uXG4gICAgICAgICAgICAgIHZhcmlhbnQ9XCJvdXRsaW5lXCJcbiAgICAgICAgICAgICAgb25DbGljaz17b25CYWNrfVxuICAgICAgICAgICAgICBjbGFzc05hbWU9XCJmbGV4IGl0ZW1zLWNlbnRlciBnYXAtMlwiXG4gICAgICAgICAgICAgIGRhdGEtdGVzdGlkPVwiYnV0dG9uLWJhY2tcIlxuICAgICAgICAgICAgPlxuICAgICAgICAgICAgICA8QXJyb3dMZWZ0IGNsYXNzTmFtZT1cInctNCBoLTRcIiAvPlxuICAgICAgICAgICAgICB7YmFja0J1dHRvblRleHR9XG4gICAgICAgICAgICA8L0J1dHRvbj5cbiAgICAgICAgICApfVxuICAgICAgICA8L2Rpdj5cbiAgICAgICkgOiBudWxsfVxuXG4gICAgICB7LyogR3JpZCBvZiBzZWxlY3Rpb24gY2FyZHMgKi99XG4gICAgICA8ZGl2IGNsYXNzTmFtZT1cImdyaWQgZ3JpZC1jb2xzLTEgbWQ6Z3JpZC1jb2xzLTIgbGc6Z3JpZC1jb2xzLTMgZ2FwLTRcIj5cbiAgICAgICAge2l0ZW1zLm1hcCgoaXRlbSkgPT4ge1xuICAgICAgICAgIGNvbnN0IEljb24gPSBnZXRJY29uRm9yVHlwZShpdGVtLnR5cGUpO1xuICAgICAgICAgIGNvbnN0IGlzRGlzYWJsZWQgPSBpdGVtLmRpc2FibGVkIHx8IGZhbHNlO1xuICAgICAgICAgIFxuICAgICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICA8Q2FyZCBcbiAgICAgICAgICAgICAga2V5PXtpdGVtLmlkfSBcbiAgICAgICAgICAgICAgY2xhc3NOYW1lPXtgdHJhbnNpdGlvbi1zaGFkb3cgJHtpc0Rpc2FibGVkID8gJ29wYWNpdHktNjAgY3Vyc29yLW5vdC1hbGxvd2VkJyA6ICdob3ZlcjpzaGFkb3ctbWQgY3Vyc29yLXBvaW50ZXInfWB9XG4gICAgICAgICAgICAgIGRhdGEtdGVzdGlkPXtgY2FyZC0ke2l0ZW0udHlwZX0tJHtpdGVtLmlkfWB9XG4gICAgICAgICAgICA+XG4gICAgICAgICAgICAgIDxDYXJkSGVhZGVyIGNsYXNzTmFtZT1cInBiLTNcIj5cbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggaXRlbXMtY2VudGVyIGdhcC0zXCI+XG4gICAgICAgICAgICAgICAgICA8SWNvbiBjbGFzc05hbWU9e2B3LTUgaC01ICR7aXNEaXNhYmxlZCA/ICd0ZXh0LWdyYXktNDAwJyA6ICd0ZXh0LWJsdWUtNjAwJ31gfSAvPlxuICAgICAgICAgICAgICAgICAgPENhcmRUaXRsZSBjbGFzc05hbWU9e2B0ZXh0LWxnICR7aXNEaXNhYmxlZCA/ICd0ZXh0LWdyYXktNTAwJyA6ICcnfWB9IGRhdGEtdGVzdGlkPXtgdGV4dC1uYW1lLSR7aXRlbS5pZH1gfT5cbiAgICAgICAgICAgICAgICAgICAge2l0ZW0ubmFtZX1cbiAgICAgICAgICAgICAgICAgIDwvQ2FyZFRpdGxlPlxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICA8L0NhcmRIZWFkZXI+XG4gICAgICAgICAgICAgIFxuICAgICAgICAgICAgICA8Q2FyZENvbnRlbnQgY2xhc3NOYW1lPVwic3BhY2UteS00XCI+XG4gICAgICAgICAgICAgICAgPHAgXG4gICAgICAgICAgICAgICAgICBjbGFzc05hbWU9e2B0ZXh0LXNtICR7aXNEaXNhYmxlZCA/ICd0ZXh0LWdyYXktNDAwJyA6ICd0ZXh0LWdyYXktNjAwJ31gfVxuICAgICAgICAgICAgICAgICAgZGF0YS10ZXN0aWQ9e2B0ZXh0LWRldGFpbHMtJHtpdGVtLmlkfWB9XG4gICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAge2l0ZW0uZGV0YWlsc31cbiAgICAgICAgICAgICAgICA8L3A+XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgPEJ1dHRvblxuICAgICAgICAgICAgICAgICAgb25DbGljaz17KCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBpZiAoIWlzRGlzYWJsZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygn8J+OryBbU0VMRUNUSU9OIEdSSUQgREVCVUddIEJ1dHRvbiBjbGlja2VkOicsIHsgaXRlbUlkOiBpdGVtLmlkLCBpdGVtTmFtZTogaXRlbS5uYW1lIH0pO1xuICAgICAgICAgICAgICAgICAgICAgIG9uU2VsZWN0SXRlbShpdGVtLmlkKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgIGRpc2FibGVkPXtpc0Rpc2FibGVkfVxuICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwidy1mdWxsXCJcbiAgICAgICAgICAgICAgICAgIHZhcmlhbnQ9e2lzRGlzYWJsZWQgPyBcInNlY29uZGFyeVwiIDogXCJkZWZhdWx0XCJ9XG4gICAgICAgICAgICAgICAgICBkYXRhLXRlc3RpZD17YGJ1dHRvbi1zZWxlY3QtJHtpdGVtLmlkfWB9XG4gICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAge2lzRGlzYWJsZWQgJiYgaXRlbS5kaXNhYmxlZFJlYXNvbiA/IGl0ZW0uZGlzYWJsZWRSZWFzb24gOiB0KCdzZWxlY3QnIGFzIGFueSl9XG4gICAgICAgICAgICAgICAgPC9CdXR0b24+XG4gICAgICAgICAgICAgIDwvQ2FyZENvbnRlbnQ+XG4gICAgICAgICAgICA8L0NhcmQ+XG4gICAgICAgICAgKTtcbiAgICAgICAgfSl9XG4gICAgICA8L2Rpdj5cbiAgICA8L2Rpdj5cbiAgKTtcbn0iXSwidmVyc2lvbiI6M30=