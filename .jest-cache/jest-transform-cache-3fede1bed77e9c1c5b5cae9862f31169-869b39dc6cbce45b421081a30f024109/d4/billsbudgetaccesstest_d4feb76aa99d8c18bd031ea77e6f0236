c52d80db97366bd785e58402489ec520
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const globals_1 = require("@jest/globals");
// Role-based permission mapping for Quebec property management
const ROLE_PERMISSIONS = {
    admin: [
        'building:view',
        'building:manage',
        'building:create',
        'building:delete',
        'budget:view',
        'budget:manage',
        'budget:create',
        'budget:delete',
        'bill:view',
        'bill:manage',
        'bill:create',
        'bill:delete',
        'finance:view',
        'finance:export',
    ],
    manager: [
        'building:view',
        'building:manage',
        'building:create',
        'budget:view',
        'budget:manage',
        'budget:create',
        'bill:view',
        'bill:manage',
        'bill:create',
        'finance:view',
    ],
    tenant: [
        'bill:own_view', // Only view their own bills
    ],
    resident: [
        'bill:own_view', // Only view their own bills
    ],
};
// Helper functions for testing access control
function hasPermission(role, permission) {
    return ROLE_PERMISSIONS[role]?.includes(permission) || false;
}
function canAccessResource(user, resourceType, resourceId, organizationId) {
    // Admin with global access can access everything
    if (user.role === 'admin' && user.canAccessAllOrganizations) {
        return true;
    }
    // Users can only access resources from their organizations
    if (user.organizations && user.organizations.includes(organizationId)) {
        return (hasPermission(user.role, `${resourceType}:view`) ||
            hasPermission(user.role, `${resourceType}:manage`));
    }
    return false;
}
(0, globals_1.describe)('Bills and Budget Pages Access Control', () => {
    // Test data setup
    const adminUser = {
        id: 'admin-test-id',
        role: 'admin',
        organizations: [],
        canAccessAllOrganizations: true,
    };
    const managerUser = {
        id: 'manager-test-id',
        role: 'manager',
        organizations: ['test-org-id'],
        canAccessAllOrganizations: false,
    };
    const tenantUser = {
        id: 'tenant-test-id',
        role: 'tenant',
        organizations: [],
        canAccessAllOrganizations: false,
    };
    const residentUser = {
        id: 'resident-test-id',
        role: 'resident',
        organizations: [],
        canAccessAllOrganizations: false,
    };
    const koveoBuilding = {
        id: 'koveo-building-id',
        organizationId: 'koveo-org-id',
        name: 'Koveo Test Building',
    };
    const testBuilding = {
        id: 'test-building-id',
        organizationId: 'test-org-id',
        name: 'Test Organization Building',
    };
    (0, globals_1.describe)('Buildings Access Control for Bills and Budget Pages', () => {
        (0, globals_1.it)('should allow admin to access all buildings', () => {
            // Admin should have permission to view buildings
            (0, globals_1.expect)(hasPermission(adminUser.role, 'building:view')).toBe(true);
            (0, globals_1.expect)(hasPermission(adminUser.role, 'building:manage')).toBe(true);
            // Admin should be able to access any building resource
            (0, globals_1.expect)(canAccessResource(adminUser, 'building', koveoBuilding.id, koveoBuilding.organizationId)).toBe(true);
            (0, globals_1.expect)(canAccessResource(adminUser, 'building', testBuilding.id, testBuilding.organizationId)).toBe(true);
        });
        (0, globals_1.it)('should allow manager to access only their organization buildings', () => {
            // Manager should have permission to view buildings
            (0, globals_1.expect)(hasPermission(managerUser.role, 'building:view')).toBe(true);
            (0, globals_1.expect)(hasPermission(managerUser.role, 'building:manage')).toBe(true);
            // Manager should be able to access buildings from their organization
            (0, globals_1.expect)(canAccessResource(managerUser, 'building', testBuilding.id, testBuilding.organizationId)).toBe(true);
            // Manager should NOT be able to access buildings from other organizations
            (0, globals_1.expect)(canAccessResource(managerUser, 'building', koveoBuilding.id, koveoBuilding.organizationId)).toBe(false);
        });
        (0, globals_1.it)('should deny tenant access to building management', () => {
            // Tenant should NOT have permission to view or manage buildings list
            (0, globals_1.expect)(hasPermission(tenantUser.role, 'building:view')).toBe(false);
            (0, globals_1.expect)(hasPermission(tenantUser.role, 'building:manage')).toBe(false);
            // Tenant should NOT be able to access building resources for bills/budget
            (0, globals_1.expect)(canAccessResource(tenantUser, 'building', koveoBuilding.id, koveoBuilding.organizationId)).toBe(false);
            (0, globals_1.expect)(canAccessResource(tenantUser, 'building', testBuilding.id, testBuilding.organizationId)).toBe(false);
        });
        (0, globals_1.it)('should deny resident access to building management', () => {
            // Resident should NOT have permission to view or manage buildings list
            (0, globals_1.expect)(hasPermission(residentUser.role, 'building:view')).toBe(false);
            (0, globals_1.expect)(hasPermission(residentUser.role, 'building:manage')).toBe(false);
            // Resident should NOT be able to access building resources for bills/budget
            (0, globals_1.expect)(canAccessResource(residentUser, 'building', koveoBuilding.id, koveoBuilding.organizationId)).toBe(false);
            (0, globals_1.expect)(canAccessResource(residentUser, 'building', testBuilding.id, testBuilding.organizationId)).toBe(false);
        });
    });
    (0, globals_1.describe)('Budget Access Control for Budget Pages', () => {
        (0, globals_1.it)('should allow admin to access budget data for any building', () => {
            // Admin should have permission to view and manage budgets
            (0, globals_1.expect)(hasPermission(adminUser.role, 'budget:view')).toBe(true);
            (0, globals_1.expect)(hasPermission(adminUser.role, 'budget:manage')).toBe(true);
            // Admin should be able to access budget resources from any organization
            (0, globals_1.expect)(canAccessResource(adminUser, 'budget', koveoBuilding.id, koveoBuilding.organizationId)).toBe(true);
            (0, globals_1.expect)(canAccessResource(adminUser, 'budget', testBuilding.id, testBuilding.organizationId)).toBe(true);
        });
        (0, globals_1.it)('should allow manager to access budget only for their organization buildings', () => {
            // Manager should have permission to view and manage budgets
            (0, globals_1.expect)(hasPermission(managerUser.role, 'budget:view')).toBe(true);
            (0, globals_1.expect)(hasPermission(managerUser.role, 'budget:manage')).toBe(true);
            // Manager should be able to access budgets from their organization
            (0, globals_1.expect)(canAccessResource(managerUser, 'budget', testBuilding.id, testBuilding.organizationId)).toBe(true);
            // Manager should NOT be able to access budgets from other organizations
            (0, globals_1.expect)(canAccessResource(managerUser, 'budget', koveoBuilding.id, koveoBuilding.organizationId)).toBe(false);
        });
        (0, globals_1.it)('should deny tenant access to budget data', () => {
            // Tenant should NOT have permission to view or manage budgets
            (0, globals_1.expect)(hasPermission(tenantUser.role, 'budget:view')).toBe(false);
            (0, globals_1.expect)(hasPermission(tenantUser.role, 'budget:manage')).toBe(false);
            // Tenant should NOT be able to access budget resources
            (0, globals_1.expect)(canAccessResource(tenantUser, 'budget', koveoBuilding.id, koveoBuilding.organizationId)).toBe(false);
            (0, globals_1.expect)(canAccessResource(tenantUser, 'budget', testBuilding.id, testBuilding.organizationId)).toBe(false);
        });
        (0, globals_1.it)('should deny resident access to budget data', () => {
            // Resident should NOT have permission to view or manage budgets
            (0, globals_1.expect)(hasPermission(residentUser.role, 'budget:view')).toBe(false);
            (0, globals_1.expect)(hasPermission(residentUser.role, 'budget:manage')).toBe(false);
            // Resident should NOT be able to access budget resources
            (0, globals_1.expect)(canAccessResource(residentUser, 'budget', koveoBuilding.id, koveoBuilding.organizationId)).toBe(false);
            (0, globals_1.expect)(canAccessResource(residentUser, 'budget', testBuilding.id, testBuilding.organizationId)).toBe(false);
        });
    });
    (0, globals_1.describe)('Bills Access Control for Bills Pages', () => {
        (0, globals_1.it)('should allow admin to access bills data for any building', () => {
            // Admin should have permission to view and manage bills
            (0, globals_1.expect)(hasPermission(adminUser.role, 'bill:view')).toBe(true);
            (0, globals_1.expect)(hasPermission(adminUser.role, 'bill:manage')).toBe(true);
            // Admin should be able to access bill resources from any organization
            (0, globals_1.expect)(canAccessResource(adminUser, 'bill', koveoBuilding.id, koveoBuilding.organizationId)).toBe(true);
            (0, globals_1.expect)(canAccessResource(adminUser, 'bill', testBuilding.id, testBuilding.organizationId)).toBe(true);
        });
        (0, globals_1.it)('should allow manager to access bills only for their organization buildings', () => {
            // Manager should have permission to view and manage bills
            (0, globals_1.expect)(hasPermission(managerUser.role, 'bill:view')).toBe(true);
            (0, globals_1.expect)(hasPermission(managerUser.role, 'bill:manage')).toBe(true);
            // Manager should be able to access bills from their organization
            (0, globals_1.expect)(canAccessResource(managerUser, 'bill', testBuilding.id, testBuilding.organizationId)).toBe(true);
            // Manager should NOT be able to access bills from other organizations
            (0, globals_1.expect)(canAccessResource(managerUser, 'bill', koveoBuilding.id, koveoBuilding.organizationId)).toBe(false);
        });
        (0, globals_1.it)('should prevent unauthorized users from accessing bills data', () => {
            // Tenant should NOT have permission to view or manage bills
            (0, globals_1.expect)(hasPermission(tenantUser.role, 'bill:view')).toBe(false);
            (0, globals_1.expect)(hasPermission(tenantUser.role, 'bill:manage')).toBe(false);
            // Resident should NOT have permission to view or manage bills
            (0, globals_1.expect)(hasPermission(residentUser.role, 'bill:view')).toBe(false);
            (0, globals_1.expect)(hasPermission(residentUser.role, 'bill:manage')).toBe(false);
            // Both should NOT be able to access bill resources
            (0, globals_1.expect)(canAccessResource(tenantUser, 'bill', koveoBuilding.id, koveoBuilding.organizationId)).toBe(false);
            (0, globals_1.expect)(canAccessResource(residentUser, 'bill', testBuilding.id, testBuilding.organizationId)).toBe(false);
        });
    });
    (0, globals_1.describe)('Quebec Law 25 Compliance for Bills and Budget Access', () => {
        (0, globals_1.it)('should properly restrict financial data access based on user role', () => {
            // Admin should have full access to financial data for compliance reporting
            (0, globals_1.expect)(hasPermission(adminUser.role, 'finance:view')).toBe(true);
            (0, globals_1.expect)(hasPermission(adminUser.role, 'finance:export')).toBe(true);
            // Manager should have limited financial access within their organization
            (0, globals_1.expect)(hasPermission(managerUser.role, 'finance:view')).toBe(true);
            (0, globals_1.expect)(hasPermission(managerUser.role, 'finance:export')).toBe(false); // Limited export rights
            // Tenant and Resident should not have access to financial management data
            (0, globals_1.expect)(hasPermission(tenantUser.role, 'finance:view')).toBe(false);
            (0, globals_1.expect)(hasPermission(tenantUser.role, 'finance:export')).toBe(false);
            (0, globals_1.expect)(hasPermission(residentUser.role, 'finance:view')).toBe(false);
            (0, globals_1.expect)(hasPermission(residentUser.role, 'finance:export')).toBe(false);
        });
        (0, globals_1.it)('should enforce data minimization principles for budget and bill access', () => {
            // Verify that permissions follow Quebec Law 25 data minimization principles
            // Only admin and manager roles should access financial data
            const financialRoles = ['admin', 'manager'];
            const nonFinancialRoles = ['tenant', 'resident'];
            financialRoles.forEach((role) => {
                (0, globals_1.expect)(hasPermission(role, 'budget:view')).toBe(true);
                (0, globals_1.expect)(hasPermission(role, 'bill:view')).toBe(true);
            });
            nonFinancialRoles.forEach((role) => {
                (0, globals_1.expect)(hasPermission(role, 'budget:view')).toBe(false);
                (0, globals_1.expect)(hasPermission(role, 'bill:view')).toBe(false);
            });
        });
    });
    (0, globals_1.describe)('Manager Organization Boundary Tests', () => {
        (0, globals_1.it)('should strictly enforce organization boundaries for managers', () => {
            // Manager with no organizations should not be able to access any resources
            const isolatedManager = {
                id: 'isolated-manager-id',
                role: 'manager',
                organizations: [], // No organizations
                canAccessAllOrganizations: false,
            };
            // Should not be able to access any building resources
            (0, globals_1.expect)(canAccessResource(isolatedManager, 'building', koveoBuilding.id, koveoBuilding.organizationId)).toBe(false);
            (0, globals_1.expect)(canAccessResource(isolatedManager, 'building', testBuilding.id, testBuilding.organizationId)).toBe(false);
            // Should not be able to access any financial resources
            (0, globals_1.expect)(canAccessResource(isolatedManager, 'budget', koveoBuilding.id, koveoBuilding.organizationId)).toBe(false);
            (0, globals_1.expect)(canAccessResource(isolatedManager, 'bill', testBuilding.id, testBuilding.organizationId)).toBe(false);
        });
        (0, globals_1.it)('should allow managers to access only their specific organization resources', () => {
            // Manager should only access resources from their assigned organization
            (0, globals_1.expect)(canAccessResource(managerUser, 'building', testBuilding.id, testBuilding.organizationId)).toBe(true);
            (0, globals_1.expect)(canAccessResource(managerUser, 'budget', testBuilding.id, testBuilding.organizationId)).toBe(true);
            (0, globals_1.expect)(canAccessResource(managerUser, 'bill', testBuilding.id, testBuilding.organizationId)).toBe(true);
            // Should not access resources from other organizations
            (0, globals_1.expect)(canAccessResource(managerUser, 'building', koveoBuilding.id, koveoBuilding.organizationId)).toBe(false);
            (0, globals_1.expect)(canAccessResource(managerUser, 'budget', koveoBuilding.id, koveoBuilding.organizationId)).toBe(false);
            (0, globals_1.expect)(canAccessResource(managerUser, 'bill', koveoBuilding.id, koveoBuilding.organizationId)).toBe(false);
            // Test with a hypothetical third organization
            const extraOrgId = 'extra-org-id';
            (0, globals_1.expect)(canAccessResource(managerUser, 'building', 'extra-building-id', extraOrgId)).toBe(false);
            (0, globals_1.expect)(canAccessResource(managerUser, 'budget', 'extra-building-id', extraOrgId)).toBe(false);
            (0, globals_1.expect)(canAccessResource(managerUser, 'bill', 'extra-building-id', extraOrgId)).toBe(false);
        });
        (0, globals_1.it)('should validate cross-organizational access patterns', () => {
            // Create a multi-organization manager
            const multiOrgManager = {
                id: 'multi-org-manager-id',
                role: 'manager',
                organizations: ['test-org-id', 'second-org-id'],
                canAccessAllOrganizations: false,
            };
            // Should access resources from both assigned organizations
            (0, globals_1.expect)(canAccessResource(multiOrgManager, 'building', testBuilding.id, testBuilding.organizationId)).toBe(true);
            (0, globals_1.expect)(canAccessResource(multiOrgManager, 'building', 'second-building-id', 'second-org-id')).toBe(true);
            // Should NOT access resources from unassigned organizations
            (0, globals_1.expect)(canAccessResource(multiOrgManager, 'building', koveoBuilding.id, koveoBuilding.organizationId)).toBe(false);
        });
    });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiL2hvbWUvcnVubmVyL3dvcmtzcGFjZS90ZXN0cy91bml0L2FjY2Vzcy1jb250cm9sL2JpbGxzLWJ1ZGdldC1hY2Nlc3MudGVzdC50cyIsIm1hcHBpbmdzIjoiOztBQUFBLDJDQUFxRDtBQUVyRCwrREFBK0Q7QUFDL0QsTUFBTSxnQkFBZ0IsR0FBNkI7SUFDakQsS0FBSyxFQUFFO1FBQ0wsZUFBZTtRQUNmLGlCQUFpQjtRQUNqQixpQkFBaUI7UUFDakIsaUJBQWlCO1FBQ2pCLGFBQWE7UUFDYixlQUFlO1FBQ2YsZUFBZTtRQUNmLGVBQWU7UUFDZixXQUFXO1FBQ1gsYUFBYTtRQUNiLGFBQWE7UUFDYixhQUFhO1FBQ2IsY0FBYztRQUNkLGdCQUFnQjtLQUNqQjtJQUNELE9BQU8sRUFBRTtRQUNQLGVBQWU7UUFDZixpQkFBaUI7UUFDakIsaUJBQWlCO1FBQ2pCLGFBQWE7UUFDYixlQUFlO1FBQ2YsZUFBZTtRQUNmLFdBQVc7UUFDWCxhQUFhO1FBQ2IsYUFBYTtRQUNiLGNBQWM7S0FDZjtJQUNELE1BQU0sRUFBRTtRQUNOLGVBQWUsRUFBRSw0QkFBNEI7S0FDOUM7SUFDRCxRQUFRLEVBQUU7UUFDUixlQUFlLEVBQUUsNEJBQTRCO0tBQzlDO0NBQ0YsQ0FBQztBQUVGLDhDQUE4QztBQUM5QyxTQUFTLGFBQWEsQ0FBQyxJQUFZLEVBQUUsVUFBa0I7SUFDckQsT0FBTyxnQkFBZ0IsQ0FBQyxJQUFJLENBQUMsRUFBRSxRQUFRLENBQUMsVUFBVSxDQUFDLElBQUksS0FBSyxDQUFDO0FBQy9ELENBQUM7QUFFRCxTQUFTLGlCQUFpQixDQUN4QixJQUFTLEVBQ1QsWUFBb0IsRUFDcEIsVUFBa0IsRUFDbEIsY0FBc0I7SUFFdEIsaURBQWlEO0lBQ2pELElBQUksSUFBSSxDQUFDLElBQUksS0FBSyxPQUFPLElBQUksSUFBSSxDQUFDLHlCQUF5QixFQUFFLENBQUM7UUFDNUQsT0FBTyxJQUFJLENBQUM7SUFDZCxDQUFDO0lBRUQsMkRBQTJEO0lBQzNELElBQUksSUFBSSxDQUFDLGFBQWEsSUFBSSxJQUFJ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QUMiLCJuYW1lcyI6W10sInNvdXJjZXMiOlsiL2hvbWUvcnVubmVyL3dvcmtzcGFjZS90ZXN0cy91bml0L2FjY2Vzcy1jb250cm9sL2JpbGxzLWJ1ZGdldC1hY2Nlc3MudGVzdC50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBkZXNjcmliZSwgaXQsIGV4cGVjdCB9IGZyb20gJ0BqZXN0L2dsb2JhbHMnO1xuXG4vLyBSb2xlLWJhc2VkIHBlcm1pc3Npb24gbWFwcGluZyBmb3IgUXVlYmVjIHByb3BlcnR5IG1hbmFnZW1lbnRcbmNvbnN0IFJPTEVfUEVSTUlTU0lPTlM6IFJlY29yZDxzdHJpbmcsIHN0cmluZ1tdPiA9IHtcbiAgYWRtaW46IFtcbiAgICAnYnVpbGRpbmc6dmlldycsXG4gICAgJ2J1aWxkaW5nOm1hbmFnZScsXG4gICAgJ2J1aWxkaW5nOmNyZWF0ZScsXG4gICAgJ2J1aWxkaW5nOmRlbGV0ZScsXG4gICAgJ2J1ZGdldDp2aWV3JyxcbiAgICAnYnVkZ2V0Om1hbmFnZScsXG4gICAgJ2J1ZGdldDpjcmVhdGUnLFxuICAgICdidWRnZXQ6ZGVsZXRlJyxcbiAgICAnYmlsbDp2aWV3JyxcbiAgICAnYmlsbDptYW5hZ2UnLFxuICAgICdiaWxsOmNyZWF0ZScsXG4gICAgJ2JpbGw6ZGVsZXRlJyxcbiAgICAnZmluYW5jZTp2aWV3JyxcbiAgICAnZmluYW5jZTpleHBvcnQnLFxuICBdLFxuICBtYW5hZ2VyOiBbXG4gICAgJ2J1aWxkaW5nOnZpZXcnLFxuICAgICdidWlsZGluZzptYW5hZ2UnLFxuICAgICdidWlsZGluZzpjcmVhdGUnLFxuICAgICdidWRnZXQ6dmlldycsXG4gICAgJ2J1ZGdldDptYW5hZ2UnLFxuICAgICdidWRnZXQ6Y3JlYXRlJyxcbiAgICAnYmlsbDp2aWV3JyxcbiAgICAnYmlsbDptYW5hZ2UnLFxuICAgICdiaWxsOmNyZWF0ZScsXG4gICAgJ2ZpbmFuY2U6dmlldycsXG4gIF0sXG4gIHRlbmFudDogW1xuICAgICdiaWxsOm93bl92aWV3JywgLy8gT25seSB2aWV3IHRoZWlyIG93biBiaWxsc1xuICBdLFxuICByZXNpZGVudDogW1xuICAgICdiaWxsOm93bl92aWV3JywgLy8gT25seSB2aWV3IHRoZWlyIG93biBiaWxsc1xuICBdLFxufTtcblxuLy8gSGVscGVyIGZ1bmN0aW9ucyBmb3IgdGVzdGluZyBhY2Nlc3MgY29udHJvbFxuZnVuY3Rpb24gaGFzUGVybWlzc2lvbihyb2xlOiBzdHJpbmcsIHBlcm1pc3Npb246IHN0cmluZyk6IGJvb2xlYW4ge1xuICByZXR1cm4gUk9MRV9QRVJNSVNTSU9OU1tyb2xlXT8uaW5jbHVkZXMocGVybWlzc2lvbikgfHwgZmFsc2U7XG59XG5cbmZ1bmN0aW9uIGNhbkFjY2Vzc1Jlc291cmNlKFxuICB1c2VyOiBhbnksXG4gIHJlc291cmNlVHlwZTogc3RyaW5nLFxuICByZXNvdXJjZUlkOiBzdHJpbmcsXG4gIG9yZ2FuaXphdGlvbklkOiBzdHJpbmdcbik6IGJvb2xlYW4ge1xuICAvLyBBZG1pbiB3aXRoIGdsb2JhbCBhY2Nlc3MgY2FuIGFjY2VzcyBldmVyeXRoaW5nXG4gIGlmICh1c2VyLnJvbGUgPT09ICdhZG1pbicgJiYgdXNlci5jYW5BY2Nlc3NBbGxPcmdhbml6YXRpb25zKSB7XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cblxuICAvLyBVc2VycyBjYW4gb25seSBhY2Nlc3MgcmVzb3VyY2VzIGZyb20gdGhlaXIgb3JnYW5pemF0aW9uc1xuICBpZiAodXNlci5vcmdhbml6YXRpb25zICYmIHVzZXIub3JnYW5pemF0aW9ucy5pbmNsdWRlcyhvcmdhbml6YXRpb25JZCkpIHtcbiAgICByZXR1cm4gKFxuICAgICAgaGFzUGVybWlzc2lvbih1c2VyLnJvbGUsIGAke3Jlc291cmNlVHlwZX06dmlld2ApIHx8XG4gICAgICBoYXNQZXJtaXNzaW9uKHVzZXIucm9sZSwgYCR7cmVzb3VyY2VUeXBlfTptYW5hZ2VgKVxuICAgICk7XG4gIH1cblxuICByZXR1cm4gZmFsc2U7XG59XG5cbmRlc2NyaWJlKCdCaWxscyBhbmQgQnVkZ2V0IFBhZ2VzIEFjY2VzcyBDb250cm9sJywgKCkgPT4ge1xuICAvLyBUZXN0IGRhdGEgc2V0dXBcbiAgY29uc3QgYWRtaW5Vc2VyID0ge1xuICAgIGlkOiAnYWRtaW4tdGVzdC1pZCcsXG4gICAgcm9sZTogJ2FkbWluJyBhcyBjb25zdCxcbiAgICBvcmdhbml6YXRpb25zOiBbXSxcbiAgICBjYW5BY2Nlc3NBbGxPcmdhbml6YXRpb25zOiB0cnVlLFxuICB9O1xuXG4gIGNvbnN0IG1hbmFnZXJVc2VyID0ge1xuICAgIGlkOiAnbWFuYWdlci10ZXN0LWlkJyxcbiAgICByb2xlOiAnbWFuYWdlcicgYXMgY29uc3QsXG4gICAgb3JnYW5pemF0aW9uczogWyd0ZXN0LW9yZy1pZCddLFxuICAgIGNhbkFjY2Vzc0FsbE9yZ2FuaXphdGlvbnM6IGZhbHNlLFxuICB9O1xuXG4gIGNvbnN0IHRlbmFudFVzZXIgPSB7XG4gICAgaWQ6ICd0ZW5hbnQtdGVzdC1pZCcsXG4gICAgcm9sZTogJ3RlbmFudCcgYXMgY29uc3QsXG4gICAgb3JnYW5pemF0aW9uczogW10sXG4gICAgY2FuQWNjZXNzQWxsT3JnYW5pemF0aW9uczogZmFsc2UsXG4gIH07XG5cbiAgY29uc3QgcmVzaWRlbnRVc2VyID0ge1xuICAgIGlkOiAncmVzaWRlbnQtdGVzdC1pZCcsXG4gICAgcm9sZTogJ3Jlc2lkZW50JyBhcyBjb25zdCxcbiAgICBvcmdhbml6YXRpb25zOiBbXSxcbiAgICBjYW5BY2Nlc3NBbGxPcmdhbml6YXRpb25zOiBmYWxzZSxcbiAgfTtcblxuICBjb25zdCBrb3Zlb0J1aWxkaW5nID0ge1xuICAgIGlkOiAna292ZW8tYnVpbGRpbmctaWQnLFxuICAgIG9yZ2FuaXphdGlvbklkOiAna292ZW8tb3JnLWlkJyxcbiAgICBuYW1lOiAnS292ZW8gVGVzdCBCdWlsZGluZycsXG4gIH07XG5cbiAgY29uc3QgdGVzdEJ1aWxkaW5nID0ge1xuICAgIGlkOiAndGVzdC1idWlsZGluZy1pZCcsXG4gICAgb3JnYW5pemF0aW9uSWQ6ICd0ZXN0LW9yZy1pZCcsXG4gICAgbmFtZTogJ1Rlc3QgT3JnYW5pemF0aW9uIEJ1aWxkaW5nJyxcbiAgfTtcblxuICBkZXNjcmliZSgnQnVpbGRpbmdzIEFjY2VzcyBDb250cm9sIGZvciBCaWxscyBhbmQgQnVkZ2V0IFBhZ2VzJywgKCkgPT4ge1xuICAgIGl0KCdzaG91bGQgYWxsb3cgYWRtaW4gdG8gYWNjZXNzIGFsbCBidWlsZGluZ3MnLCAoKSA9PiB7XG4gICAgICAvLyBBZG1pbiBzaG91bGQgaGF2ZSBwZXJtaXNzaW9uIHRvIHZpZXcgYnVpbGRpbmdzXG4gICAgICBleHBlY3QoaGFzUGVybWlzc2lvbihhZG1pblVzZXIucm9sZSwgJ2J1aWxkaW5nOnZpZXcnKSkudG9CZSh0cnVlKTtcbiAgICAgIGV4cGVjdChoYXNQZXJtaXNzaW9uKGFkbWluVXNlci5yb2xlLCAnYnVpbGRpbmc6bWFuYWdlJykpLnRvQmUodHJ1ZSk7XG5cbiAgICAgIC8vIEFkbWluIHNob3VsZCBiZSBhYmxlIHRvIGFjY2VzcyBhbnkgYnVpbGRpbmcgcmVzb3VyY2VcbiAgICAgIGV4cGVjdChcbiAgICAgICAgY2FuQWNjZXNzUmVzb3VyY2UoYWRtaW5Vc2VyLCAnYnVpbGRpbmcnLCBrb3Zlb0J1aWxkaW5nLmlkLCBrb3Zlb0J1aWxkaW5nLm9yZ2FuaXphdGlvbklkKVxuICAgICAgKS50b0JlKHRydWUpO1xuICAgICAgZXhwZWN0KFxuICAgICAgICBjYW5BY2Nlc3NSZXNvdXJjZShhZG1pblVzZXIsICdidWlsZGluZycsIHRlc3RCdWlsZGluZy5pZCwgdGVzdEJ1aWxkaW5nLm9yZ2FuaXphdGlvbklkKVxuICAgICAgKS50b0JlKHRydWUpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBhbGxvdyBtYW5hZ2VyIHRvIGFjY2VzcyBvbmx5IHRoZWlyIG9yZ2FuaXphdGlvbiBidWlsZGluZ3MnLCAoKSA9PiB7XG4gICAgICAvLyBNYW5hZ2VyIHNob3VsZCBoYXZlIHBlcm1pc3Npb24gdG8gdmlldyBidWlsZGluZ3NcbiAgICAgIGV4cGVjdChoYXNQZXJtaXNzaW9uKG1hbmFnZXJVc2VyLnJvbGUsICdidWlsZGluZzp2aWV3JykpLnRvQmUodHJ1ZSk7XG4gICAgICBleHBlY3QoaGFzUGVybWlzc2lvbihtYW5hZ2VyVXNlci5yb2xlLCAnYnVpbGRpbmc6bWFuYWdlJykpLnRvQmUodHJ1ZSk7XG5cbiAgICAgIC8vIE1hbmFnZXIgc2hvdWxkIGJlIGFibGUgdG8gYWNjZXNzIGJ1aWxkaW5ncyBmcm9tIHRoZWlyIG9yZ2FuaXphdGlvblxuICAgICAgZXhwZWN0KFxuICAgICAgICBjYW5BY2Nlc3NSZXNvdXJjZShtYW5hZ2VyVXNlciwgJ2J1aWxkaW5nJywgdGVzdEJ1aWxkaW5nLmlkLCB0ZXN0QnVpbGRpbmcub3JnYW5pemF0aW9uSWQpXG4gICAgICApLnRvQmUodHJ1ZSk7XG5cbiAgICAgIC8vIE1hbmFnZXIgc2hvdWxkIE5PVCBiZSBhYmxlIHRvIGFjY2VzcyBidWlsZGluZ3MgZnJvbSBvdGhlciBvcmdhbml6YXRpb25zXG4gICAgICBleHBlY3QoXG4gICAgICAgIGNhbkFjY2Vzc1Jlc291cmNlKG1hbmFnZXJVc2VyLCAnYnVpbGRpbmcnLCBrb3Zlb0J1aWxkaW5nLmlkLCBrb3Zlb0J1aWxkaW5nLm9yZ2FuaXphdGlvbklkKVxuICAgICAgKS50b0JlKGZhbHNlKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgZGVueSB0ZW5hbnQgYWNjZXNzIHRvIGJ1aWxkaW5nIG1hbmFnZW1lbnQnLCAoKSA9PiB7XG4gICAgICAvLyBUZW5hbnQgc2hvdWxkIE5PVCBoYXZlIHBlcm1pc3Npb24gdG8gdmlldyBvciBtYW5hZ2UgYnVpbGRpbmdzIGxpc3RcbiAgICAgIGV4cGVjdChoYXNQZXJtaXNzaW9uKHRlbmFudFVzZXIucm9sZSwgJ2J1aWxkaW5nOnZpZXcnKSkudG9CZShmYWxzZSk7XG4gICAgICBleHBlY3QoaGFzUGVybWlzc2lvbih0ZW5hbnRVc2VyLnJvbGUsICdidWlsZGluZzptYW5hZ2UnKSkudG9CZShmYWxzZSk7XG5cbiAgICAgIC8vIFRlbmFudCBzaG91bGQgTk9UIGJlIGFibGUgdG8gYWNjZXNzIGJ1aWxkaW5nIHJlc291cmNlcyBmb3IgYmlsbHMvYnVkZ2V0XG4gICAgICBleHBlY3QoXG4gICAgICAgIGNhbkFjY2Vzc1Jlc291cmNlKHRlbmFudFVzZXIsICdidWlsZGluZycsIGtvdmVvQnVpbGRpbmcuaWQsIGtvdmVvQnVpbGRpbmcub3JnYW5pemF0aW9uSWQpXG4gICAgICApLnRvQmUoZmFsc2UpO1xuICAgICAgZXhwZWN0KFxuICAgICAgICBjYW5BY2Nlc3NSZXNvdXJjZSh0ZW5hbnRVc2VyLCAnYnVpbGRpbmcnLCB0ZXN0QnVpbGRpbmcuaWQsIHRlc3RCdWlsZGluZy5vcmdhbml6YXRpb25JZClcbiAgICAgICkudG9CZShmYWxzZSk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGRlbnkgcmVzaWRlbnQgYWNjZXNzIHRvIGJ1aWxkaW5nIG1hbmFnZW1lbnQnLCAoKSA9PiB7XG4gICAgICAvLyBSZXNpZGVudCBzaG91bGQgTk9UIGhhdmUgcGVybWlzc2lvbiB0byB2aWV3IG9yIG1hbmFnZSBidWlsZGluZ3MgbGlzdFxuICAgICAgZXhwZWN0KGhhc1Blcm1pc3Npb24ocmVzaWRlbnRVc2VyLnJvbGUsICdidWlsZGluZzp2aWV3JykpLnRvQmUoZmFsc2UpO1xuICAgICAgZXhwZWN0KGhhc1Blcm1pc3Npb24ocmVzaWRlbnRVc2VyLnJvbGUsICdidWlsZGluZzptYW5hZ2UnKSkudG9CZShmYWxzZSk7XG5cbiAgICAgIC8vIFJlc2lkZW50IHNob3VsZCBOT1QgYmUgYWJsZSB0byBhY2Nlc3MgYnVpbGRpbmcgcmVzb3VyY2VzIGZvciBiaWxscy9idWRnZXRcbiAgICAgIGV4cGVjdChcbiAgICAgICAgY2FuQWNjZXNzUmVzb3VyY2UocmVzaWRlbnRVc2VyLCAnYnVpbGRpbmcnLCBrb3Zlb0J1aWxkaW5nLmlkLCBrb3Zlb0J1aWxkaW5nLm9yZ2FuaXphdGlvbklkKVxuICAgICAgKS50b0JlKGZhbHNlKTtcbiAgICAgIGV4cGVjdChcbiAgICAgICAgY2FuQWNjZXNzUmVzb3VyY2UocmVzaWRlbnRVc2VyLCAnYnVpbGRpbmcnLCB0ZXN0QnVpbGRpbmcuaWQsIHRlc3RCdWlsZGluZy5vcmdhbml6YXRpb25JZClcbiAgICAgICkudG9CZShmYWxzZSk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdCdWRnZXQgQWNjZXNzIENvbnRyb2wgZm9yIEJ1ZGdldCBQYWdlcycsICgpID0+IHtcbiAgICBpdCgnc2hvdWxkIGFsbG93IGFkbWluIHRvIGFjY2VzcyBidWRnZXQgZGF0YSBmb3IgYW55IGJ1aWxkaW5nJywgKCkgPT4ge1xuICAgICAgLy8gQWRtaW4gc2hvdWxkIGhhdmUgcGVybWlzc2lvbiB0byB2aWV3IGFuZCBtYW5hZ2UgYnVkZ2V0c1xuICAgICAgZXhwZWN0KGhhc1Blcm1pc3Npb24oYWRtaW5Vc2VyLnJvbGUsICdidWRnZXQ6dmlldycpKS50b0JlKHRydWUpO1xuICAgICAgZXhwZWN0KGhhc1Blcm1pc3Npb24oYWRtaW5Vc2VyLnJvbGUsICdidWRnZXQ6bWFuYWdlJykpLnRvQmUodHJ1ZSk7XG5cbiAgICAgIC8vIEFkbWluIHNob3VsZCBiZSBhYmxlIHRvIGFjY2VzcyBidWRnZXQgcmVzb3VyY2VzIGZyb20gYW55IG9yZ2FuaXphdGlvblxuICAgICAgZXhwZWN0KFxuICAgICAgICBjYW5BY2Nlc3NSZXNvdXJjZShhZG1pblVzZXIsICdidWRnZXQnLCBrb3Zlb0J1aWxkaW5nLmlkLCBrb3Zlb0J1aWxkaW5nLm9yZ2FuaXphdGlvbklkKVxuICAgICAgKS50b0JlKHRydWUpO1xuICAgICAgZXhwZWN0KFxuICAgICAgICBjYW5BY2Nlc3NSZXNvdXJjZShhZG1pblVzZXIsICdidWRnZXQnLCB0ZXN0QnVpbGRpbmcuaWQsIHRlc3RCdWlsZGluZy5vcmdhbml6YXRpb25JZClcbiAgICAgICkudG9CZSh0cnVlKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgYWxsb3cgbWFuYWdlciB0byBhY2Nlc3MgYnVkZ2V0IG9ubHkgZm9yIHRoZWlyIG9yZ2FuaXphdGlvbiBidWlsZGluZ3MnLCAoKSA9PiB7XG4gICAgICAvLyBNYW5hZ2VyIHNob3VsZCBoYXZlIHBlcm1pc3Npb24gdG8gdmlldyBhbmQgbWFuYWdlIGJ1ZGdldHNcbiAgICAgIGV4cGVjdChoYXNQZXJtaXNzaW9uKG1hbmFnZXJVc2VyLnJvbGUsICdidWRnZXQ6dmlldycpKS50b0JlKHRydWUpO1xuICAgICAgZXhwZWN0KGhhc1Blcm1pc3Npb24obWFuYWdlclVzZXIucm9sZSwgJ2J1ZGdldDptYW5hZ2UnKSkudG9CZSh0cnVlKTtcblxuICAgICAgLy8gTWFuYWdlciBzaG91bGQgYmUgYWJsZSB0byBhY2Nlc3MgYnVkZ2V0cyBmcm9tIHRoZWlyIG9yZ2FuaXphdGlvblxuICAgICAgZXhwZWN0KFxuICAgICAgICBjYW5BY2Nlc3NSZXNvdXJjZShtYW5hZ2VyVXNlciwgJ2J1ZGdldCcsIHRlc3RCdWlsZGluZy5pZCwgdGVzdEJ1aWxkaW5nLm9yZ2FuaXphdGlvbklkKVxuICAgICAgKS50b0JlKHRydWUpO1xuXG4gICAgICAvLyBNYW5hZ2VyIHNob3VsZCBOT1QgYmUgYWJsZSB0byBhY2Nlc3MgYnVkZ2V0cyBmcm9tIG90aGVyIG9yZ2FuaXphdGlvbnNcbiAgICAgIGV4cGVjdChcbiAgICAgICAgY2FuQWNjZXNzUmVzb3VyY2UobWFuYWdlclVzZXIsICdidWRnZXQnLCBrb3Zlb0J1aWxkaW5nLmlkLCBrb3Zlb0J1aWxkaW5nLm9yZ2FuaXphdGlvbklkKVxuICAgICAgKS50b0JlKGZhbHNlKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgZGVueSB0ZW5hbnQgYWNjZXNzIHRvIGJ1ZGdldCBkYXRhJywgKCkgPT4ge1xuICAgICAgLy8gVGVuYW50IHNob3VsZCBOT1QgaGF2ZSBwZXJtaXNzaW9uIHRvIHZpZXcgb3IgbWFuYWdlIGJ1ZGdldHNcbiAgICAgIGV4cGVjdChoYXNQZXJtaXNzaW9uKHRlbmFudFVzZXIucm9sZSwgJ2J1ZGdldDp2aWV3JykpLnRvQmUoZmFsc2UpO1xuICAgICAgZXhwZWN0KGhhc1Blcm1pc3Npb24odGVuYW50VXNlci5yb2xlLCAnYnVkZ2V0Om1hbmFnZScpKS50b0JlKGZhbHNlKTtcblxuICAgICAgLy8gVGVuYW50IHNob3VsZCBOT1QgYmUgYWJsZSB0byBhY2Nlc3MgYnVkZ2V0IHJlc291cmNlc1xuICAgICAgZXhwZWN0KFxuICAgICAgICBjYW5BY2Nlc3NSZXNvdXJjZSh0ZW5hbnRVc2VyLCAnYnVkZ2V0Jywga292ZW9CdWlsZGluZy5pZCwga292ZW9CdWlsZGluZy5vcmdhbml6YXRpb25JZClcbiAgICAgICkudG9CZShmYWxzZSk7XG4gICAgICBleHBlY3QoXG4gICAgICAgIGNhbkFjY2Vzc1Jlc291cmNlKHRlbmFudFVzZXIsICdidWRnZXQnLCB0ZXN0QnVpbGRpbmcuaWQsIHRlc3RCdWlsZGluZy5vcmdhbml6YXRpb25JZClcbiAgICAgICkudG9CZShmYWxzZSk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGRlbnkgcmVzaWRlbnQgYWNjZXNzIHRvIGJ1ZGdldCBkYXRhJywgKCkgPT4ge1xuICAgICAgLy8gUmVzaWRlbnQgc2hvdWxkIE5PVCBoYXZlIHBlcm1pc3Npb24gdG8gdmlldyBvciBtYW5hZ2UgYnVkZ2V0c1xuICAgICAgZXhwZWN0KGhhc1Blcm1pc3Npb24ocmVzaWRlbnRVc2VyLnJvbGUsICdidWRnZXQ6dmlldycpKS50b0JlKGZhbHNlKTtcbiAgICAgIGV4cGVjdChoYXNQZXJtaXNzaW9uKHJlc2lkZW50VXNlci5yb2xlLCAnYnVkZ2V0Om1hbmFnZScpKS50b0JlKGZhbHNlKTtcblxuICAgICAgLy8gUmVzaWRlbnQgc2hvdWxkIE5PVCBiZSBhYmxlIHRvIGFjY2VzcyBidWRnZXQgcmVzb3VyY2VzXG4gICAgICBleHBlY3QoXG4gICAgICAgIGNhbkFjY2Vzc1Jlc291cmNlKHJlc2lkZW50VXNlciwgJ2J1ZGdldCcsIGtvdmVvQnVpbGRpbmcuaWQsIGtvdmVvQnVpbGRpbmcub3JnYW5pemF0aW9uSWQpXG4gICAgICApLnRvQmUoZmFsc2UpO1xuICAgICAgZXhwZWN0KFxuICAgICAgICBjYW5BY2Nlc3NSZXNvdXJjZShyZXNpZGVudFVzZXIsICdidWRnZXQnLCB0ZXN0QnVpbGRpbmcuaWQsIHRlc3RCdWlsZGluZy5vcmdhbml6YXRpb25JZClcbiAgICAgICkudG9CZShmYWxzZSk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdCaWxscyBBY2Nlc3MgQ29udHJvbCBmb3IgQmlsbHMgUGFnZXMnLCAoKSA9PiB7XG4gICAgaXQoJ3Nob3VsZCBhbGxvdyBhZG1pbiB0byBhY2Nlc3MgYmlsbHMgZGF0YSBmb3IgYW55IGJ1aWxkaW5nJywgKCkgPT4ge1xuICAgICAgLy8gQWRtaW4gc2hvdWxkIGhhdmUgcGVybWlzc2lvbiB0byB2aWV3IGFuZCBtYW5hZ2UgYmlsbHNcbiAgICAgIGV4cGVjdChoYXNQZXJtaXNzaW9uKGFkbWluVXNlci5yb2xlLCAnYmlsbDp2aWV3JykpLnRvQmUodHJ1ZSk7XG4gICAgICBleHBlY3QoaGFzUGVybWlzc2lvbihhZG1pblVzZXIucm9sZSwgJ2JpbGw6bWFuYWdlJykpLnRvQmUodHJ1ZSk7XG5cbiAgICAgIC8vIEFkbWluIHNob3VsZCBiZSBhYmxlIHRvIGFjY2VzcyBiaWxsIHJlc291cmNlcyBmcm9tIGFueSBvcmdhbml6YXRpb25cbiAgICAgIGV4cGVjdChcbiAgICAgICAgY2FuQWNjZXNzUmVzb3VyY2UoYWRtaW5Vc2VyLCAnYmlsbCcsIGtvdmVvQnVpbGRpbmcuaWQsIGtvdmVvQnVpbGRpbmcub3JnYW5pemF0aW9uSWQpXG4gICAgICApLnRvQmUodHJ1ZSk7XG4gICAgICBleHBlY3QoXG4gICAgICAgIGNhbkFjY2Vzc1Jlc291cmNlKGFkbWluVXNlciwgJ2JpbGwnLCB0ZXN0QnVpbGRpbmcuaWQsIHRlc3RCdWlsZGluZy5vcmdhbml6YXRpb25JZClcbiAgICAgICkudG9CZSh0cnVlKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgYWxsb3cgbWFuYWdlciB0byBhY2Nlc3MgYmlsbHMgb25seSBmb3IgdGhlaXIgb3JnYW5pemF0aW9uIGJ1aWxkaW5ncycsICgpID0+IHtcbiAgICAgIC8vIE1hbmFnZXIgc2hvdWxkIGhhdmUgcGVybWlzc2lvbiB0byB2aWV3IGFuZCBtYW5hZ2UgYmlsbHNcbiAgICAgIGV4cGVjdChoYXNQZXJtaXNzaW9uKG1hbmFnZXJVc2VyLnJvbGUsICdiaWxsOnZpZXcnKSkudG9CZSh0cnVlKTtcbiAgICAgIGV4cGVjdChoYXNQZXJtaXNzaW9uKG1hbmFnZXJVc2VyLnJvbGUsICdiaWxsOm1hbmFnZScpKS50b0JlKHRydWUpO1xuXG4gICAgICAvLyBNYW5hZ2VyIHNob3VsZCBiZSBhYmxlIHRvIGFjY2VzcyBiaWxscyBmcm9tIHRoZWlyIG9yZ2FuaXphdGlvblxuICAgICAgZXhwZWN0KFxuICAgICAgICBjYW5BY2Nlc3NSZXNvdXJjZShtYW5hZ2VyVXNlciwgJ2JpbGwnLCB0ZXN0QnVpbGRpbmcuaWQsIHRlc3RCdWlsZGluZy5vcmdhbml6YXRpb25JZClcbiAgICAgICkudG9CZSh0cnVlKTtcblxuICAgICAgLy8gTWFuYWdlciBzaG91bGQgTk9UIGJlIGFibGUgdG8gYWNjZXNzIGJpbGxzIGZyb20gb3RoZXIgb3JnYW5pemF0aW9uc1xuICAgICAgZXhwZWN0KFxuICAgICAgICBjYW5BY2Nlc3NSZXNvdXJjZShtYW5hZ2VyVXNlciwgJ2JpbGwnLCBrb3Zlb0J1aWxkaW5nLmlkLCBrb3Zlb0J1aWxkaW5nLm9yZ2FuaXphdGlvbklkKVxuICAgICAgKS50b0JlKGZhbHNlKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgcHJldmVudCB1bmF1dGhvcml6ZWQgdXNlcnMgZnJvbSBhY2Nlc3NpbmcgYmlsbHMgZGF0YScsICgpID0+IHtcbiAgICAgIC8vIFRlbmFudCBzaG91bGQgTk9UIGhhdmUgcGVybWlzc2lvbiB0byB2aWV3IG9yIG1hbmFnZSBiaWxsc1xuICAgICAgZXhwZWN0KGhhc1Blcm1pc3Npb24odGVuYW50VXNlci5yb2xlLCAnYmlsbDp2aWV3JykpLnRvQmUoZmFsc2UpO1xuICAgICAgZXhwZWN0KGhhc1Blcm1pc3Npb24odGVuYW50VXNlci5yb2xlLCAnYmlsbDptYW5hZ2UnKSkudG9CZShmYWxzZSk7XG5cbiAgICAgIC8vIFJlc2lkZW50IHNob3VsZCBOT1QgaGF2ZSBwZXJtaXNzaW9uIHRvIHZpZXcgb3IgbWFuYWdlIGJpbGxzXG4gICAgICBleHBlY3QoaGFzUGVybWlzc2lvbihyZXNpZGVudFVzZXIucm9sZSwgJ2JpbGw6dmlldycpKS50b0JlKGZhbHNlKTtcbiAgICAgIGV4cGVjdChoYXNQZXJtaXNzaW9uKHJlc2lkZW50VXNlci5yb2xlLCAnYmlsbDptYW5hZ2UnKSkudG9CZShmYWxzZSk7XG5cbiAgICAgIC8vIEJvdGggc2hvdWxkIE5PVCBiZSBhYmxlIHRvIGFjY2VzcyBiaWxsIHJlc291cmNlc1xuICAgICAgZXhwZWN0KFxuICAgICAgICBjYW5BY2Nlc3NSZXNvdXJjZSh0ZW5hbnRVc2VyLCAnYmlsbCcsIGtvdmVvQnVpbGRpbmcuaWQsIGtvdmVvQnVpbGRpbmcub3JnYW5pemF0aW9uSWQpXG4gICAgICApLnRvQmUoZmFsc2UpO1xuICAgICAgZXhwZWN0KFxuICAgICAgICBjYW5BY2Nlc3NSZXNvdXJjZShyZXNpZGVudFVzZXIsICdiaWxsJywgdGVzdEJ1aWxkaW5nLmlkLCB0ZXN0QnVpbGRpbmcub3JnYW5pemF0aW9uSWQpXG4gICAgICApLnRvQmUoZmFsc2UpO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnUXVlYmVjIExhdyAyNSBDb21wbGlhbmNlIGZvciBCaWxscyBhbmQgQnVkZ2V0IEFjY2VzcycsICgpID0+IHtcbiAgICBpdCgnc2hvdWxkIHByb3Blcmx5IHJlc3RyaWN0IGZpbmFuY2lhbCBkYXRhIGFjY2VzcyBiYXNlZCBvbiB1c2VyIHJvbGUnLCAoKSA9PiB7XG4gICAgICAvLyBBZG1pbiBzaG91bGQgaGF2ZSBmdWxsIGFjY2VzcyB0byBmaW5hbmNpYWwgZGF0YSBmb3IgY29tcGxpYW5jZSByZXBvcnRpbmdcbiAgICAgIGV4cGVjdChoYXNQZXJtaXNzaW9uKGFkbWluVXNlci5yb2xlLCAnZmluYW5jZTp2aWV3JykpLnRvQmUodHJ1ZSk7XG4gICAgICBleHBlY3QoaGFzUGVybWlzc2lvbihhZG1pblVzZXIucm9sZSwgJ2ZpbmFuY2U6ZXhwb3J0JykpLnRvQmUodHJ1ZSk7XG5cbiAgICAgIC8vIE1hbmFnZXIgc2hvdWxkIGhhdmUgbGltaXRlZCBmaW5hbmNpYWwgYWNjZXNzIHdpdGhpbiB0aGVpciBvcmdhbml6YXRpb25cbiAgICAgIGV4cGVjdChoYXNQZXJtaXNzaW9uKG1hbmFnZXJVc2VyLnJvbGUsICdmaW5hbmNlOnZpZXcnKSkudG9CZSh0cnVlKTtcbiAgICAgIGV4cGVjdChoYXNQZXJtaXNzaW9uKG1hbmFnZXJVc2VyLnJvbGUsICdmaW5hbmNlOmV4cG9ydCcpKS50b0JlKGZhbHNlKTsgLy8gTGltaXRlZCBleHBvcnQgcmlnaHRzXG5cbiAgICAgIC8vIFRlbmFudCBhbmQgUmVzaWRlbnQgc2hvdWxkIG5vdCBoYXZlIGFjY2VzcyB0byBmaW5hbmNpYWwgbWFuYWdlbWVudCBkYXRhXG4gICAgICBleHBlY3QoaGFzUGVybWlzc2lvbih0ZW5hbnRVc2VyLnJvbGUsICdmaW5hbmNlOnZpZXcnKSkudG9CZShmYWxzZSk7XG4gICAgICBleHBlY3QoaGFzUGVybWlzc2lvbih0ZW5hbnRVc2VyLnJvbGUsICdmaW5hbmNlOmV4cG9ydCcpKS50b0JlKGZhbHNlKTtcbiAgICAgIGV4cGVjdChoYXNQZXJtaXNzaW9uKHJlc2lkZW50VXNlci5yb2xlLCAnZmluYW5jZTp2aWV3JykpLnRvQmUoZmFsc2UpO1xuICAgICAgZXhwZWN0KGhhc1Blcm1pc3Npb24ocmVzaWRlbnRVc2VyLnJvbGUsICdmaW5hbmNlOmV4cG9ydCcpKS50b0JlKGZhbHNlKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgZW5mb3JjZSBkYXRhIG1pbmltaXphdGlvbiBwcmluY2lwbGVzIGZvciBidWRnZXQgYW5kIGJpbGwgYWNjZXNzJywgKCkgPT4ge1xuICAgICAgLy8gVmVyaWZ5IHRoYXQgcGVybWlzc2lvbnMgZm9sbG93IFF1ZWJlYyBMYXcgMjUgZGF0YSBtaW5pbWl6YXRpb24gcHJpbmNpcGxlc1xuXG4gICAgICAvLyBPbmx5IGFkbWluIGFuZCBtYW5hZ2VyIHJvbGVzIHNob3VsZCBhY2Nlc3MgZmluYW5jaWFsIGRhdGFcbiAgICAgIGNvbnN0IGZpbmFuY2lhbFJvbGVzID0gWydhZG1pbicsICdtYW5hZ2VyJ107XG4gICAgICBjb25zdCBub25GaW5hbmNpYWxSb2xlcyA9IFsndGVuYW50JywgJ3Jlc2lkZW50J107XG5cbiAgICAgIGZpbmFuY2lhbFJvbGVzLmZvckVhY2goKHJvbGUpID0+IHtcbiAgICAgICAgZXhwZWN0KGhhc1Blcm1pc3Npb24ocm9sZSBhcyBhbnksICdidWRnZXQ6dmlldycpKS50b0JlKHRydWUpO1xuICAgICAgICBleHBlY3QoaGFzUGVybWlzc2lvbihyb2xlIGFzIGFueSwgJ2JpbGw6dmlldycpKS50b0JlKHRydWUpO1xuICAgICAgfSk7XG5cbiAgICAgIG5vbkZpbmFuY2lhbFJvbGVzLmZvckVhY2goKHJvbGUpID0+IHtcbiAgICAgICAgZXhwZWN0KGhhc1Blcm1pc3Npb24ocm9sZSBhcyBhbnksICdidWRnZXQ6dmlldycpKS50b0JlKGZhbHNlKTtcbiAgICAgICAgZXhwZWN0KGhhc1Blcm1pc3Npb24ocm9sZSBhcyBhbnksICdiaWxsOnZpZXcnKSkudG9CZShmYWxzZSk7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ01hbmFnZXIgT3JnYW5pemF0aW9uIEJvdW5kYXJ5IFRlc3RzJywgKCkgPT4ge1xuICAgIGl0KCdzaG91bGQgc3RyaWN0bHkgZW5mb3JjZSBvcmdhbml6YXRpb24gYm91bmRhcmllcyBmb3IgbWFuYWdlcnMnLCAoKSA9PiB7XG4gICAgICAvLyBNYW5hZ2VyIHdpdGggbm8gb3JnYW5pemF0aW9ucyBzaG91bGQgbm90IGJlIGFibGUgdG8gYWNjZXNzIGFueSByZXNvdXJjZXNcbiAgICAgIGNvbnN0IGlzb2xhdGVkTWFuYWdlciA9IHtcbiAgICAgICAgaWQ6ICdpc29sYXRlZC1tYW5hZ2VyLWlkJyxcbiAgICAgICAgcm9sZTogJ21hbmFnZXInIGFzIGNvbnN0LFxuICAgICAgICBvcmdhbml6YXRpb25zOiBbXSwgLy8gTm8gb3JnYW5pemF0aW9uc1xuICAgICAgICBjYW5BY2Nlc3NBbGxPcmdhbml6YXRpb25zOiBmYWxzZSxcbiAgICAgIH07XG5cbiAgICAgIC8vIFNob3VsZCBub3QgYmUgYWJsZSB0byBhY2Nlc3MgYW55IGJ1aWxkaW5nIHJlc291cmNlc1xuICAgICAgZXhwZWN0KFxuICAgICAgICBjYW5BY2Nlc3NSZXNvdXJjZShcbiAgICAgICAgICBpc29sYXRlZE1hbmFnZXIsXG4gICAgICAgICAgJ2J1aWxkaW5nJyxcbiAgICAgICAgICBrb3Zlb0J1aWxkaW5nLmlkLFxuICAgICAgICAgIGtvdmVvQnVpbGRpbmcub3JnYW5pemF0aW9uSWRcbiAgICAgICAgKVxuICAgICAgKS50b0JlKGZhbHNlKTtcbiAgICAgIGV4cGVjdChcbiAgICAgICAgY2FuQWNjZXNzUmVzb3VyY2UoaXNvbGF0ZWRNYW5hZ2VyLCAnYnVpbGRpbmcnLCB0ZXN0QnVpbGRpbmcuaWQsIHRlc3RCdWlsZGluZy5vcmdhbml6YXRpb25JZClcbiAgICAgICkudG9CZShmYWxzZSk7XG5cbiAgICAgIC8vIFNob3VsZCBub3QgYmUgYWJsZSB0byBhY2Nlc3MgYW55IGZpbmFuY2lhbCByZXNvdXJjZXNcbiAgICAgIGV4cGVjdChcbiAgICAgICAgY2FuQWNjZXNzUmVzb3VyY2UoaXNvbGF0ZWRNYW5hZ2VyLCAnYnVkZ2V0Jywga292ZW9CdWlsZGluZy5pZCwga292ZW9CdWlsZGluZy5vcmdhbml6YXRpb25JZClcbiAgICAgICkudG9CZShmYWxzZSk7XG4gICAgICBleHBlY3QoXG4gICAgICAgIGNhbkFjY2Vzc1Jlc291cmNlKGlzb2xhdGVkTWFuYWdlciwgJ2JpbGwnLCB0ZXN0QnVpbGRpbmcuaWQsIHRlc3RCdWlsZGluZy5vcmdhbml6YXRpb25JZClcbiAgICAgICkudG9CZShmYWxzZSk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGFsbG93IG1hbmFnZXJzIHRvIGFjY2VzcyBvbmx5IHRoZWlyIHNwZWNpZmljIG9yZ2FuaXphdGlvbiByZXNvdXJjZXMnLCAoKSA9PiB7XG4gICAgICAvLyBNYW5hZ2VyIHNob3VsZCBvbmx5IGFjY2VzcyByZXNvdXJjZXMgZnJvbSB0aGVpciBhc3NpZ25lZCBvcmdhbml6YXRpb25cbiAgICAgIGV4cGVjdChcbiAgICAgICAgY2FuQWNjZXNzUmVzb3VyY2UobWFuYWdlclVzZXIsICdidWlsZGluZycsIHRlc3RCdWlsZGluZy5pZCwgdGVzdEJ1aWxkaW5nLm9yZ2FuaXphdGlvbklkKVxuICAgICAgKS50b0JlKHRydWUpO1xuICAgICAgZXhwZWN0KFxuICAgICAgICBjYW5BY2Nlc3NSZXNvdXJjZShtYW5hZ2VyVXNlciwgJ2J1ZGdldCcsIHRlc3RCdWlsZGluZy5pZCwgdGVzdEJ1aWxkaW5nLm9yZ2FuaXphdGlvbklkKVxuICAgICAgKS50b0JlKHRydWUpO1xuICAgICAgZXhwZWN0KFxuICAgICAgICBjYW5BY2Nlc3NSZXNvdXJjZShtYW5hZ2VyVXNlciwgJ2JpbGwnLCB0ZXN0QnVpbGRpbmcuaWQsIHRlc3RCdWlsZGluZy5vcmdhbml6YXRpb25JZClcbiAgICAgICkudG9CZSh0cnVlKTtcblxuICAgICAgLy8gU2hvdWxkIG5vdCBhY2Nlc3MgcmVzb3VyY2VzIGZyb20gb3RoZXIgb3JnYW5pemF0aW9uc1xuICAgICAgZXhwZWN0KFxuICAgICAgICBjYW5BY2Nlc3NSZXNvdXJjZShtYW5hZ2VyVXNlciwgJ2J1aWxkaW5nJywga292ZW9CdWlsZGluZy5pZCwga292ZW9CdWlsZGluZy5vcmdhbml6YXRpb25JZClcbiAgICAgICkudG9CZShmYWxzZSk7XG4gICAgICBleHBlY3QoXG4gICAgICAgIGNhbkFjY2Vzc1Jlc291cmNlKG1hbmFnZXJVc2VyLCAnYnVkZ2V0Jywga292ZW9CdWlsZGluZy5pZCwga292ZW9CdWlsZGluZy5vcmdhbml6YXRpb25JZClcbiAgICAgICkudG9CZShmYWxzZSk7XG4gICAgICBleHBlY3QoXG4gICAgICAgIGNhbkFjY2Vzc1Jlc291cmNlKG1hbmFnZXJVc2VyLCAnYmlsbCcsIGtvdmVvQnVpbGRpbmcuaWQsIGtvdmVvQnVpbGRpbmcub3JnYW5pemF0aW9uSWQpXG4gICAgICApLnRvQmUoZmFsc2UpO1xuXG4gICAgICAvLyBUZXN0IHdpdGggYSBoeXBvdGhldGljYWwgdGhpcmQgb3JnYW5pemF0aW9uXG4gICAgICBjb25zdCBleHRyYU9yZ0lkID0gJ2V4dHJhLW9yZy1pZCc7XG4gICAgICBleHBlY3QoY2FuQWNjZXNzUmVzb3VyY2UobWFuYWdlclVzZXIsICdidWlsZGluZycsICdleHRyYS1idWlsZGluZy1pZCcsIGV4dHJhT3JnSWQpKS50b0JlKFxuICAgICAgICBmYWxzZVxuICAgICAgKTtcbiAgICAgIGV4cGVjdChjYW5BY2Nlc3NSZXNvdXJjZShtYW5hZ2VyVXNlciwgJ2J1ZGdldCcsICdleHRyYS1idWlsZGluZy1pZCcsIGV4dHJhT3JnSWQpKS50b0JlKGZhbHNlKTtcbiAgICAgIGV4cGVjdChjYW5BY2Nlc3NSZXNvdXJjZShtYW5hZ2VyVXNlciwgJ2JpbGwnLCAnZXh0cmEtYnVpbGRpbmctaWQnLCBleHRyYU9yZ0lkKSkudG9CZShmYWxzZSk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIHZhbGlkYXRlIGNyb3NzLW9yZ2FuaXphdGlvbmFsIGFjY2VzcyBwYXR0ZXJucycsICgpID0+IHtcbiAgICAgIC8vIENyZWF0ZSBhIG11bHRpLW9yZ2FuaXphdGlvbiBtYW5hZ2VyXG4gICAgICBjb25zdCBtdWx0aU9yZ01hbmFnZXIgPSB7XG4gICAgICAgIGlkOiAnbXVsdGktb3JnLW1hbmFnZXItaWQnLFxuICAgICAgICByb2xlOiAnbWFuYWdlcicgYXMgY29uc3QsXG4gICAgICAgIG9yZ2FuaXphdGlvbnM6IFsndGVzdC1vcmctaWQnLCAnc2Vjb25kLW9yZy1pZCddLFxuICAgICAgICBjYW5BY2Nlc3NBbGxPcmdhbml6YXRpb25zOiBmYWxzZSxcbiAgICAgIH07XG5cbiAgICAgIC8vIFNob3VsZCBhY2Nlc3MgcmVzb3VyY2VzIGZyb20gYm90aCBhc3NpZ25lZCBvcmdhbml6YXRpb25zXG4gICAgICBleHBlY3QoXG4gICAgICAgIGNhbkFjY2Vzc1Jlc291cmNlKG11bHRpT3JnTWFuYWdlciwgJ2J1aWxkaW5nJywgdGVzdEJ1aWxkaW5nLmlkLCB0ZXN0QnVpbGRpbmcub3JnYW5pemF0aW9uSWQpXG4gICAgICApLnRvQmUodHJ1ZSk7XG4gICAgICBleHBlY3QoXG4gICAgICAgIGNhbkFjY2Vzc1Jlc291cmNlKG11bHRpT3JnTWFuYWdlciwgJ2J1aWxkaW5nJywgJ3NlY29uZC1idWlsZGluZy1pZCcsICdzZWNvbmQtb3JnLWlkJylcbiAgICAgICkudG9CZSh0cnVlKTtcblxuICAgICAgLy8gU2hvdWxkIE5PVCBhY2Nlc3MgcmVzb3VyY2VzIGZyb20gdW5hc3NpZ25lZCBvcmdhbml6YXRpb25zXG4gICAgICBleHBlY3QoXG4gICAgICAgIGNhbkFjY2Vzc1Jlc291cmNlKFxuICAgICAgICAgIG11bHRpT3JnTWFuYWdlcixcbiAgICAgICAgICAnYnVpbGRpbmcnLFxuICAgICAgICAgIGtvdmVvQnVpbGRpbmcuaWQsXG4gICAgICAgICAga292ZW9CdWlsZGluZy5vcmdhbml6YXRpb25JZFxuICAgICAgICApXG4gICAgICApLnRvQmUoZmFsc2UpO1xuICAgIH0pO1xuICB9KTtcbn0pO1xuIl0sInZlcnNpb24iOjN9