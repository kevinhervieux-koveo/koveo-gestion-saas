f0e8edcdc679504fe7b2e1f523840227
"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
exports.StandardFormField = StandardFormField;
exports.StandardSubmitButton = StandardSubmitButton;
exports.FormSection = FormSection;
const jsx_runtime_1 = require("react/jsx-runtime");
const react_1 = __importDefault(require("react"));
const form_1 = require("@/components/ui/form");
const input_1 = require("@/components/ui/input");
const textarea_1 = require("@/components/ui/textarea");
const select_1 = require("@/components/ui/select");
const checkbox_1 = require("@/components/ui/checkbox");
const utils_1 = require("@/lib/utils");
const form_validation_helpers_1 = require("@/utils/form-validation-helpers");
/**
 * Standardized form field component that follows all Quebec compliance
 * and accessibility standards. Automatically generates test IDs and
 * applies consistent styling patterns.
 *
 * @param props - Configuration for the form field
 */
function StandardFormField({ control, name, label, type = 'text', placeholder, description, required = false, disabled = false, className = '', options = [], rows = 3, formName = 'form', autoComplete, min, max, step, maxLength, 'data-testid': explicitTestId, }) {
    // Auto-generate test ID following standards or use explicit override
    const testId = explicitTestId || form_validation_helpers_1.FormQuality.generateTestId(formName, name, ['select'].includes(type) ? 'select' : 'input');
    // Render the appropriate input component based on type
    const renderInput = (field) => {
        const baseProps = {
            ...field,
            placeholder,
            disabled,
            autoComplete,
            'data-testid': testId,
            className: (0, utils_1.cn)(
            // Standard styling for all inputs
            'transition-colors focus:ring-2 focus:ring-blue-500', 
            // Error state styling  
            field.error && 'border-red-500 focus:border-red-500', className),
        };
        switch (type) {
            case 'textarea':
                return ((0, jsx_runtime_1.jsx)(textarea_1.Textarea, { ...baseProps, rows: rows, maxLength: maxLength, className: (0, utils_1.cn)('min-h-[80px] resize-y', baseProps.className) }));
            case 'select':
                return ((0, jsx_runtime_1.jsxs)(select_1.Select, { onValueChange: field.onChange, defaultValue: field.value, disabled: disabled, children: [(0, jsx_runtime_1.jsx)(select_1.SelectTrigger, { "data-testid": testId, className: baseProps.className, children: (0, jsx_runtime_1.jsx)(select_1.SelectValue, { placeholder: placeholder || `Select ${label.toLowerCase()}` }) }), (0, jsx_runtime_1.jsx)(select_1.SelectContent, { children: options.map((option) => ((0, jsx_runtime_1.jsx)(select_1.SelectItem, { value: option.value, disabled: option.disabled, "data-testid": `${testId}-option-${option.value}`, children: option.label }, option.value))) })] }));
            case 'checkbox':
                return ((0, jsx_runtime_1.jsxs)("div", { className: "flex items-center space-x-2", children: [(0, jsx_runtime_1.jsx)(checkbox_1.Checkbox, { checked: field.value, onCheckedChange: field.onChange, disabled: disabled, "data-testid": testId, className: baseProps.className }), (0, jsx_runtime_1.jsx)("span", { className: "text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70", children: label })] }));
            case 'number':
                return ((0, jsx_runtime_1.jsx)(input_1.Input, { ...baseProps, type: "number", min: min, max: max, step: step }));
            default:
                return ((0, jsx_runtime_1.jsx)(input_1.Input, { ...baseProps, type: type, min: min, max: max, step: step, maxLength: maxLength }));
        }
    };
    return ((0, jsx_runtime_1.jsx)(form_1.FormField, { control: control, name: name, render: ({ field, fieldState }) => ((0, jsx_runtime_1.jsxs)(form_1.FormItem, { className: (0, utils_1.cn)('space-y-2', className), children: [type !== 'checkbox' && ((0, jsx_runtime_1.jsx)(form_1.FormLabel, { className: (0, utils_1.cn)('text-sm font-medium leading-none', required && 'after:content-["*"] after:ml-0.5 after:text-red-500', fieldState.error && 'text-red-600'), children: label })), (0, jsx_runtime_1.jsx)(form_1.FormControl, { children: renderInput({ ...field, error: fieldState.error }) }), description && ((0, jsx_runtime_1.jsx)(form_1.FormDescription, { className: "text-sm text-muted-foreground", children: description })), (0, jsx_runtime_1.jsx)(form_1.FormMessage, { className: "text-sm text-red-600" })] })) }));
}
function StandardSubmitButton({ isLoading = false, loadingText = 'Submitting...', children, disabled = false, formName = 'form', className = '', variant = 'default', }) {
    const testId = form_validation_helpers_1.FormQuality.generateTestId(formName, 'submit', 'button');
    return ((0, jsx_runtime_1.jsx)("button", { type: "submit", disabled: disabled || isLoading, "data-testid": testId, className: (0, utils_1.cn)('inline-flex items-center justify-center px-4 py-2 text-sm font-medium rounded-md', 'transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2', variant === 'default' && 'bg-blue-600 text-white hover:bg-blue-700 focus:ring-blue-500', variant === 'destructive' && 'bg-red-600 text-white hover:bg-red-700 focus:ring-red-500', variant === 'outline' && 'border border-gray-300 bg-white text-gray-700 hover:bg-gray-50 focus:ring-blue-500', (disabled || isLoading) && 'opacity-50 cursor-not-allowed', className), children: isLoading ? ((0, jsx_runtime_1.jsxs)(jsx_runtime_1.Fragment, { children: [(0, jsx_runtime_1.jsxs)("svg", { className: "w-4 h-4 mr-2 animate-spin", viewBox: "0 0 24 24", children: [(0, jsx_runtime_1.jsx)("circle", { className: "opacity-25", cx: "12", cy: "12", r: "10", stroke: "currentColor", strokeWidth: "4", fill: "none" }), (0, jsx_runtime_1.jsx)("path", { className: "opacity-75", fill: "currentColor", d: "M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z" })] }), loadingText] })) : (children) }));
}
function FormSection({ title, description, children, className = '', collapsible = false, defaultOpen = true, }) {
    const [isOpen, setIsOpen] = react_1.default.useState(defaultOpen);
    const toggleSection = () => {
        if (collapsible) {
            setIsOpen(!isOpen);
        }
    };
    return ((0, jsx_runtime_1.jsxs)("div", { className: (0, utils_1.cn)('space-y-4', className), children: [title && ((0, jsx_runtime_1.jsxs)("div", { className: "border-b border-gray-200 pb-2", children: [(0, jsx_runtime_1.jsxs)("div", { className: (0, utils_1.cn)('flex items-center justify-between', collapsible && 'cursor-pointer hover:text-blue-600'), onClick: toggleSection, children: [(0, jsx_runtime_1.jsx)("h3", { className: "text-lg font-medium text-gray-900", children: title }), collapsible && ((0, jsx_runtime_1.jsx)("svg", { className: (0, utils_1.cn)('w-5 h-5 transition-transform', isOpen && 'rotate-180'), fill: "none", stroke: "currentColor", viewBox: "0 0 24 24", children: (0, jsx_runtime_1.jsx)("path", { strokeLinecap: "round", strokeLinejoin: "round", strokeWidth: 2, d: "M19 9l-7 7-7-7" }) }))] }), description && ((0, jsx_runtime_1.jsx)("p", { className: "mt-1 text-sm text-gray-600", children: description }))] })), (!collapsible || isOpen) && ((0, jsx_runtime_1.jsx)("div", { className: "space-y-4", children: children }))] }));
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiL2hvbWUvcnVubmVyL3dvcmtzcGFjZS9jbGllbnQvc3JjL2NvbXBvbmVudHMvZm9ybXMvU3RhbmRhcmRGb3JtRmllbGQudHN4IiwibWFwcGluZ3MiOiI7Ozs7O0FBaUVBLDhDQXdKQztBQWVELG9EQW1EQztBQWNELGtDQW9EQzs7QUE3VkQsa0RBQTBCO0FBRTFCLCtDQUFpSDtBQUNqSCxpREFBOEM7QUFDOUMsdURBQW9EO0FBQ3BELG1EQUF1RztBQUN2Ryx1REFBb0Q7QUFDcEQsdUNBQWlDO0FBQ2pDLDZFQUE4RDtBQWtEOUQ7Ozs7OztHQU1HO0FBQ0gsU0FBZ0IsaUJBQWlCLENBQXdCLEVBQ3ZELE9BQU8sRUFDUCxJQUFJLEVBQ0osS0FBSyxFQUNMLElBQUksR0FBRyxNQUFNLEVBQ2IsV0FBVyxFQUNYLFdBQVcsRUFDWCxRQUFRLEdBQUcsS0FBSyxFQUNoQixRQUFRLEdBQUcsS0FBSyxFQUNoQixTQUFTLEdBQUcsRUFBRSxFQUNkLE9BQU8sR0FBRyxFQUFFLEVBQ1osSUFBSSxHQUFHLENBQUMsRUFDUixRQUFRLEdBQUcsTUFBTSxFQUNqQixZQUFZLEVBQ1osR0FBRyxFQUNILEdBQUcsRUFDSCxJQUFJLEVBQ0osU0FBUyxFQUNULGFBQWEsRUFBRSxjQUFjLEdBQ0g7SUFDMUIscUVBQXFFO0lBQ3JFLE1BQU0sTUFBTSxHQUFHLGNBQWMsSUFBSSxxQ0FBVyxDQUFDLGNBQWMsQ0FBQyxRQUFRLEVBQUUsSUFBYyxFQUNsRixDQUFDLFFBQVEsQ0FBQyxDQUFDLFFBQVEsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsUUFBUSxDQUFDLENBQUMsQ0FBQyxPQUFPLENBQUMsQ0FBQztJQUVsRCx1REFBdUQ7SUFDdkQsTUFBTSxXQUFXLEdBQUcsQ0FBQyxLQUFVLEVBQUUsRUFBRTtRQUNqQyxNQUFNLFNBQVMsR0FBRztZQUNoQixHQUFHLEtBQUs7WUFDUixXQUFXO1lBQ1gsUUFBUTtZQUNSLFlBQVk7WUFDWixhQUFhLEVBQUUsTUFBTTtZQUNyQixTQUFTLEVBQUUsSUFBQSxVQUFFO1lBQ1gsa0NBQWtDO1lBQ2xDLG9EQUFvRDtZQUNwRCx3QkFBd0I7WUFDeEIsS0FBSyxDQUFDLEtBQUssSUFBSSxxQ0FBcUMsRUFDcEQsU0FBUyxDQUNWO1NBQ0YsQ0FBQztRQUVGLFFBQVEsSUFBSSxFQUFFLENBQUM7WUFDYixLQUFLLFVBQVU7Z0JBQ2IsT0FBTyxDQUNMLHVCQUFDLG1CQUFRLE9BQ0gsU0FBUyxFQUNiLElBQUksRUFBRSxJQUFJLEVBQ1YsU0FBUyxFQUFFLFNBQVMsRUFDcEIsU0FBUyxFQUFFLElBQUEsVUFBRSxFQUNYLHVCQUF1QixFQUN2QixTQUFTLENBQUMsU0FBUyxDQUNwQixHQUNELENBQ0gsQ0FBQztZQUVKLEtBQUssUUFBUTtnQkFDWCxPQUFPLENBQ0wsd0JBQUMsZUFBTSxJQUNMLGFBQWEsRUFBRSxLQUFLLENBQUMsUUFBUSxFQUM3QixZQUFZLEVBQUUsS0FBSyxDQUFDLEtBQUssRUFDekIsUUFBUSxFQUFFLFFBQVEsYUFFbEIsdUJBQUMsc0JBQWEsbUJBQWMsTUFBTSxFQUFFLFNBQVMsRUFBRSxTQUFTLENBQUMsU0FBUyxZQUNoRSx1QkFBQyxvQkFBVyxJQUFDLFdBQVcsRUFBRSxXQUFXLElBQUksVUFBVSxLQUFLLENBQUMsV0FBVyxFQUFFLEVBQUUsR0FBSSxHQUM5RCxFQUNoQix1QkFBQyxzQkFBYSxjQUNYLE9BQU8sQ0FBQyxHQUFHLENBQUMsQ0FBQyxNQUFNLEVBQUUsRUFBRSxDQUFDLENBQ3ZCLHVCQUFDLG1CQUFVLElBRVQsS0FBSyxFQUFFLE1BQU0sQ0FBQyxLQUFLLEVBQ25CLFFBQVEsRUFBRSxNQUFNLENBQUMsUUFBUSxpQkFDWixHQUFHLE1BQU0sV0FBVyxNQUFNLENBQUMsS0FBSyxFQUFFLFlBRTlDLE1BQU0sQ0FBQyxLQUFLLElBTFIsTUFBTSxDQUFDLEtBQUssQ0FNTixDQUNkLENBQUMsR0FDWSxJQUNULENBQ1YsQ0FBQztZQUVKLEtBQUssVUFBVTtnQkFDYixPQUFPLENBQ0wsaUNBQUssU0FBUyxFQUFDLDZCQUE2QixhQUMxQyx1QkFBQyxtQkFBUSxJQUNQLE9BQU8sRUFBRSxLQUFLLENBQUMsS0FBSyxFQUNwQixlQUFlLEVBQUUsS0FBSyxDQUFDLFFBQVEsRUFDL0IsUUFBUSxFQUFFLFFBQVEsaUJBQ0wsTUFBTSxFQUNuQixTQUFTLEVBQUUsU0FBUyxDQUFDLFNBQVMsR0FDOUIsRUFDRixpQ0FBTSxTQUFTLEVBQUMsNEZBQTRGLFlBQ3pHLEtBQUssR0FDRCxJQUNILENBQ1AsQ0FBQztZQUVKLEtBQUssUUFBUTtnQkFDWCxPQUFPLENBQ0wsdUJBQUMsYUFBSyxPQUNBLFNBQVMsRUFDYixJQUFJLEVBQUMsUUFBUSxFQUNiLEdBQUcsRUFBRSxHQUFHLEVBQ1IsR0FBRyxFQUFFLEdBQUcsRUFDUixJQUFJLEVBQUUsSUFBSSxHQUNWLENBQ0gsQ0FBQztZQUVKO2dCQUNFLE9BQU8sQ0FDTCx1QkFBQyxhQUFLLE9BQ0EsU0FBUyxFQUNiLElBQUksRUFBRSxJQUFJLEVBQ1YsR0FBRyxFQUFFLEdBQUcsRUFDUixHQUFHLEVBQUUsR0FBRyxFQUNSLElBQUksRUFBRSxJQUFJLEVBQ1YsU0FBUyxFQUFFLFNBQVMsR0FDcEIsQ0FDSCxDQUFDO1FBQ04sQ0FBQztJQUNILENBQUMsQ0FBQztJQUVGLE9BQU8sQ0FDTCx1QkFBQyxnQkFBUyxJQUNSLE9BQU8sRUFBRSxPQUFPLEVBQ2hCLElBQUksRUFBRSxJQUFJLEVBQ1YsTUFBTSxFQUFFLENBQUMsRUFBRSxLQUFLLEVBQUUsVUFBVSxFQUFFLEVBQUUsRUFBRSxDQUFDLENBQ2pDLHdCQUFDLGVBQVEsSUFBQyxTQUFTLEVBQUUsSUFBQSxVQUFFLEVBQUMsV0FBVyxFQUFFLFNBQVMsQ0FBQyxhQUM1QyxJQUFJLEtBQUssVUFBVSxJQUFJLENBQ3RCLHVCQUFDLGdCQUFTLElBQUMsU0FBUyxFQUFFLElBQUEsVUFBRSxFQUN0QixrQ0FBa0MsRUFDbEMsUUFBUSxJQUFJLHFEQUFxRCxFQUNqRSxVQUFVLENBQUMsS0FBSyxJQUFJLGNBQWMsQ0FDbkMsWUFDRSxLQUFLLEdBQ0ksQ0FDYixFQUVELHVCQUFDLGtCQUFXLGNBQ1QsV0FBVyxDQUFDLEVBQUUsR0FBRyxLQUFLLEVBQUUsS0FBSyxFQUFFLFVBQVUsQ0FBQyxLQUFLLEVBQUUsQ0FBQyxHQUN2QyxFQUViLFdBQVcsSUFBSSxDQUNkLHVCQUFDLHNCQUFlLElBQUMsU0FBUyxFQUFDLCtCQUErQixZQUN2RCxXQUFXLEdBQ0ksQ0FDbkIsRUFFRCx1QkFBQyxrQkFBVyxJQUFDLFNBQVMsRUFBQyxzQkFBc0IsR0FBRyxJQUN2QyxDQUNaLEdBQ0QsQ0FDSCxDQUFDO0FBQ0osQ0FBQztBQWVELFNBQWdCLG9CQUFvQixDQUFDLEVBQ25DLFNBQVMsR0FBRyxLQUFLLEVBQ2pCLFdBQVcsR0FBRyxlQUFlLEVBQzdCLFFBQVEsRUFDUixRQUFRLEdBQUcsS0FBSyxFQUNoQixRQUFRLEdBQUcsTUFBTSxFQUNqQixTQUFTLEdBQUcsRUFBRSxFQUNkLE9BQU8sR0FBRyxTQUFTLEdBQ087SUFDMUIsTUFBTSxNQUFNLEdBQUcscUNBQVcsQ0FBQyxjQUFjLENBQUMsUUFBUSxFQUFFLFFBQVEsRUFBRSxRQUFRLENBQUMsQ0FBQztJQUV4RSxPQUFPLENBQ0wsbUNBQ0UsSUFBSSxFQUFDLFFBQVEsRUFDYixRQUFRLEVBQUUsUUFBUSxJQUFJLFNBQVMsaUJBQ2xCLE1BQU0sRUFDbkIsU0FBUyxFQUFFLElBQUEsVUFBRSxFQUNYLGtGQUFrRixFQUNsRix1RUFBdUUsRUFDdkUsT0FBTyxLQUFLLFNBQVMsSUFBSSw4REFBOEQsRUFDdkYsT0FBTyxLQUFLLGFBQWEsSUFBSSwyREFBMkQsRUFDeEYsT0FBTyxLQUFLLFNBQVMsSUFBSSxvRkFBb0YsRUFDN0csQ0FBQyxRQUFRLElBQUksU0FBUyxDQUFDLElBQUksK0JBQStCLEVBQzFELFNBQVMsQ0FDVixZQUVBLFNBQVMsQ0FBQyxDQUFDLENBQUMsQ0FDWCw2REFDRSxpQ0FBSyxTQUFTLEVBQUMsMkJBQTJCLEVBQUMsT0FBTyxFQUFDLFdBQVcsYUFDNUQsbUNBQ0UsU0FBUyxFQUFDLFlBQVksRUFDdEIsRUFBRSxFQUFDLElBQUksRUFDUCxFQUFFLEVBQUMsSUFBSSxFQUNQLENBQUMsRUFBQyxJQUFJLEVBQ04sTUFBTSxFQUFDLGNBQWMsRUFDckIsV0FBVyxFQUFDLEdBQUcsRUFDZixJQUFJLEVBQUMsTUFBTSxHQUNYLEVBQ0YsaUNBQ0UsU0FBUyxFQUFDLFlBQVksRUFDdEIsSUFBSSxFQUFDLGNBQWMsRUFDbkIsQ0FBQyxFQUFDLGlIQUFpSCxHQUNuSCxJQUNFLEVBQ0wsV0FBVyxJQUNYLENBQ0osQ0FBQyxDQUFDLENBQUMsQ0FDRixRQUFRLENBQ1QsR0FDTSxDQUNWLENBQUM7QUFDSixDQUFDO0FBY0QsU0FBZ0IsV0FBVyxDQUFDLEVBQzFCLEtBQUssRUFDTCxXQUFXLEVBQ1gsUUFBUSxFQUNSLFNBQVMsR0FBRyxFQUFFLEVBQ2QsV0FBVyxHQUFHLEtBQUssRUFDbkIsV0FBVyxHQUFHLElBQUksR0FDRDtJQUNqQixNQUFNLENBQUMsTUFBTSxFQUFFLFNBQVMsQ0FBQyxHQUFHLGVBQUssQ0FBQyxRQUFRLENBQUMsV0FBVyxDQUFDLENBQUM7SUFFeEQsTUFBTSxhQUFhLEdBQUcsR0FBRyxFQUFFO1FBQ3pCLElBQUksV0FBVyxFQUFFLENBQUM7WUFDaEIsU0FBUyxDQUFDLENBQUMsTUFBTSxDQUFDLENBQUM7UUFDckIsQ0FBQztJQUNILENBQUMsQ0FBQztJQUVGLE9BQU8sQ0FDTCxpQ0FBSyxTQUFTLEVBQUUsSUFBQSxVQUFFLEVBQUMsV0FBVyxFQUFFLFNBQVMsQ0FBQyxhQUN2QyxLQUFLLElBQUksQ0FDUixpQ0FBSyxTQUFTLEVBQUMsK0JBQStCLGFBQzVDLGlDQUNFLFNBQVMsRUFBRSxJQUFBLFVBQUUsRUFDWCxtQ0FBbUMsRUFDbkMsV0FBVyxJQUFJLG9DQUFvQyxDQUNwRCxFQUNELE9BQU8sRUFBRSxhQUFhLGFBRXRCLCtCQUFJLFNBQVMsRUFBQyxtQ0FBbUMsWUFBRSxLQUFLLEdBQU0sRUFDN0QsV0FBVyxJQUFJLENBQ2QsZ0NBQ0UsU0FBUyxFQUFFLElBQUEsVUFBRSxFQUFDLDhCQUE4QixFQUFFLE1BQU0sSUFBSSxZQUFZLENBQUMsRUFDckUsSUFBSSxFQUFDLE1BQU0sRUFDWCxNQUFNLEVBQUMsY0FBYyxFQUNyQixPQUFPLEVBQUMsV0FBVyxZQUVuQixpQ0FBTSxhQUFhLEVBQUMsT0FBTyxFQUFDLGNBQWMsRUFBQyxPQUFPLEVBQUMsV0FBVyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUMsZ0JBQWdCLEdBQUcsR0FDcEYsQ0FDUCxJQUNHLEVBQ0wsV0FBVyxJQUFJLENBQ2QsOEJBQUcsU0FBUyxFQUFDLDRCQUE0QixZQUFFLFdBQVcsR0FBSyxDQUM1RCxJQUNHLENBQ1AsRUFFQSxDQUFDLENBQUMsV0FBVyxJQUFJLE1BQU0sQ0FBQyxJQUFJLENBQzNCLGdDQUFLLFNBQVMsRUFBQyxXQUFXLFlBQ3ZCLFFBQVEsR0FDTCxDQUNQLElBQ0csQ0FDUCxDQUFDO0FBQ0osQ0FBQyIsIm5hbWVzIjpbXSwic291cmNlcyI6WyIvaG9tZS9ydW5uZXIvd29ya3NwYWNlL2NsaWVudC9zcmMvY29tcG9uZW50cy9mb3Jtcy9TdGFuZGFyZEZvcm1GaWVsZC50c3giXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IFJlYWN0IGZyb20gJ3JlYWN0JztcbmltcG9ydCB7IENvbnRyb2wsIEZpZWxkUGF0aCwgRmllbGRWYWx1ZXMgfSBmcm9tICdyZWFjdC1ob29rLWZvcm0nO1xuaW1wb3J0IHsgRm9ybUZpZWxkLCBGb3JtSXRlbSwgRm9ybUxhYmVsLCBGb3JtQ29udHJvbCwgRm9ybU1lc3NhZ2UsIEZvcm1EZXNjcmlwdGlvbiB9IGZyb20gJ0AvY29tcG9uZW50cy91aS9mb3JtJztcbmltcG9ydCB7IElucHV0IH0gZnJvbSAnQC9jb21wb25lbnRzL3VpL2lucHV0JztcbmltcG9ydCB7IFRleHRhcmVhIH0gZnJvbSAnQC9jb21wb25lbnRzL3VpL3RleHRhcmVhJztcbmltcG9ydCB7IFNlbGVjdCwgU2VsZWN0Q29udGVudCwgU2VsZWN0SXRlbSwgU2VsZWN0VHJpZ2dlciwgU2VsZWN0VmFsdWUgfSBmcm9tICdAL2NvbXBvbmVudHMvdWkvc2VsZWN0JztcbmltcG9ydCB7IENoZWNrYm94IH0gZnJvbSAnQC9jb21wb25lbnRzL3VpL2NoZWNrYm94JztcbmltcG9ydCB7IGNuIH0gZnJvbSAnQC9saWIvdXRpbHMnO1xuaW1wb3J0IHsgRm9ybVF1YWxpdHkgfSBmcm9tICdAL3V0aWxzL2Zvcm0tdmFsaWRhdGlvbi1oZWxwZXJzJztcblxuLyoqXG4gKiBTdGFuZGFyZGl6ZWQgZm9ybSBmaWVsZCB0eXBlcyBmb3IgY29uc2lzdGVudCBmb3JtIGJ1aWxkaW5nXG4gKi9cbmV4cG9ydCB0eXBlIFN0YW5kYXJkRmllbGRUeXBlID0gXG4gIHwgJ3RleHQnIFxuICB8ICdlbWFpbCcgXG4gIHwgJ3Bhc3N3b3JkJyBcbiAgfCAndGV4dGFyZWEnIFxuICB8ICdzZWxlY3QnIFxuICB8ICdjaGVja2JveCcgXG4gIHwgJ251bWJlcidcbiAgfCAndGVsJ1xuICB8ICd1cmwnXG4gIHwgJ2RhdGUnO1xuXG4vKipcbiAqIE9wdGlvbiBpbnRlcmZhY2UgZm9yIHNlbGVjdCBmaWVsZHNcbiAqL1xuZXhwb3J0IGludGVyZmFjZSBGaWVsZE9wdGlvbiB7XG4gIHZhbHVlOiBzdHJpbmc7XG4gIGxhYmVsOiBzdHJpbmc7XG4gIGRpc2FibGVkPzogYm9vbGVhbjtcbn1cblxuLyoqXG4gKiBQcm9wcyBmb3IgdGhlIHN0YW5kYXJkaXplZCBmb3JtIGZpZWxkIGNvbXBvbmVudFxuICovXG5pbnRlcmZhY2UgU3RhbmRhcmRGb3JtRmllbGRQcm9wczxUIGV4dGVuZHMgRmllbGRWYWx1ZXM+IHtcbiAgY29udHJvbDogQ29udHJvbDxUPjtcbiAgbmFtZTogRmllbGRQYXRoPFQ+O1xuICBsYWJlbDogc3RyaW5nO1xuICB0eXBlPzogU3RhbmRhcmRGaWVsZFR5cGU7XG4gIHBsYWNlaG9sZGVyPzogc3RyaW5nO1xuICBkZXNjcmlwdGlvbj86IHN0cmluZztcbiAgcmVxdWlyZWQ/OiBib29sZWFuO1xuICBkaXNhYmxlZD86IGJvb2xlYW47XG4gIGNsYXNzTmFtZT86IHN0cmluZztcbiAgb3B0aW9ucz86IEZpZWxkT3B0aW9uW107IC8vIEZvciBzZWxlY3QgZmllbGRzXG4gIHJvd3M/OiBudW1iZXI7IC8vIEZvciB0ZXh0YXJlYSBmaWVsZHNcbiAgZm9ybU5hbWU/OiBzdHJpbmc7IC8vIEZvciBhdXRvLWdlbmVyYXRpbmcgdGVzdCBJRHNcbiAgYXV0b0NvbXBsZXRlPzogc3RyaW5nO1xuICBtaW4/OiBzdHJpbmcgfCBudW1iZXI7XG4gIG1heD86IHN0cmluZyB8IG51bWJlcjtcbiAgc3RlcD86IHN0cmluZyB8IG51bWJlcjtcbiAgbWF4TGVuZ3RoPzogbnVtYmVyOyAvLyBGb3IgdGV4dCBpbnB1dHMgYW5kIHRleHRhcmVhc1xuICAnZGF0YS10ZXN0aWQnPzogc3RyaW5nOyAvLyBBbGxvdyBleHBsaWNpdCB0ZXN0IElEIG92ZXJyaWRlXG59XG5cbi8qKlxuICogU3RhbmRhcmRpemVkIGZvcm0gZmllbGQgY29tcG9uZW50IHRoYXQgZm9sbG93cyBhbGwgUXVlYmVjIGNvbXBsaWFuY2UgXG4gKiBhbmQgYWNjZXNzaWJpbGl0eSBzdGFuZGFyZHMuIEF1dG9tYXRpY2FsbHkgZ2VuZXJhdGVzIHRlc3QgSURzIGFuZCBcbiAqIGFwcGxpZXMgY29uc2lzdGVudCBzdHlsaW5nIHBhdHRlcm5zLlxuICogXG4gKiBAcGFyYW0gcHJvcHMgLSBDb25maWd1cmF0aW9uIGZvciB0aGUgZm9ybSBmaWVsZFxuICovXG5leHBvcnQgZnVuY3Rpb24gU3RhbmRhcmRGb3JtRmllbGQ8VCBleHRlbmRzIEZpZWxkVmFsdWVzPih7XG4gIGNvbnRyb2wsXG4gIG5hbWUsXG4gIGxhYmVsLFxuICB0eXBlID0gJ3RleHQnLFxuICBwbGFjZWhvbGRlcixcbiAgZGVzY3JpcHRpb24sXG4gIHJlcXVpcmVkID0gZmFsc2UsXG4gIGRpc2FibGVkID0gZmFsc2UsXG4gIGNsYXNzTmFtZSA9ICcnLFxuICBvcHRpb25zID0gW10sXG4gIHJvd3MgPSAzLFxuICBmb3JtTmFtZSA9ICdmb3JtJyxcbiAgYXV0b0NvbXBsZXRlLFxuICBtaW4sXG4gIG1heCxcbiAgc3RlcCxcbiAgbWF4TGVuZ3RoLFxuICAnZGF0YS10ZXN0aWQnOiBleHBsaWNpdFRlc3RJZCxcbn06IFN0YW5kYXJkRm9ybUZpZWxkUHJvcHM8VD4pIHtcbiAgLy8gQXV0by1nZW5lcmF0ZSB0ZXN0IElEIGZvbGxvd2luZyBzdGFuZGFyZHMgb3IgdXNlIGV4cGxpY2l0IG92ZXJyaWRlXG4gIGNvbnN0IHRlc3RJZCA9IGV4cGxpY2l0VGVzdElkIHx8IEZvcm1RdWFsaXR5LmdlbmVyYXRlVGVzdElkKGZvcm1OYW1lLCBuYW1lIGFzIHN0cmluZywgXG4gICAgWydzZWxlY3QnXS5pbmNsdWRlcyh0eXBlKSA/ICdzZWxlY3QnIDogJ2lucHV0Jyk7XG5cbiAgLy8gUmVuZGVyIHRoZSBhcHByb3ByaWF0ZSBpbnB1dCBjb21wb25lbnQgYmFzZWQgb24gdHlwZVxuICBjb25zdCByZW5kZXJJbnB1dCA9IChmaWVsZDogYW55KSA9PiB7XG4gICAgY29uc3QgYmFzZVByb3BzID0ge1xuICAgICAgLi4uZmllbGQsXG4gICAgICBwbGFjZWhvbGRlcixcbiAgICAgIGRpc2FibGVkLFxuICAgICAgYXV0b0NvbXBsZXRlLFxuICAgICAgJ2RhdGEtdGVzdGlkJzogdGVzdElkLFxuICAgICAgY2xhc3NOYW1lOiBjbihcbiAgICAgICAgLy8gU3RhbmRhcmQgc3R5bGluZyBmb3IgYWxsIGlucHV0c1xuICAgICAgICAndHJhbnNpdGlvbi1jb2xvcnMgZm9jdXM6cmluZy0yIGZvY3VzOnJpbmctYmx1ZS01MDAnLFxuICAgICAgICAvLyBFcnJvciBzdGF0ZSBzdHlsaW5nICBcbiAgICAgICAgZmllbGQuZXJyb3IgJiYgJ2JvcmRlci1yZWQtNTAwIGZvY3VzOmJvcmRlci1yZWQtNTAwJyxcbiAgICAgICAgY2xhc3NOYW1lXG4gICAgICApLFxuICAgIH07XG5cbiAgICBzd2l0Y2ggKHR5cGUpIHtcbiAgICAgIGNhc2UgJ3RleHRhcmVhJzpcbiAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICA8VGV4dGFyZWFcbiAgICAgICAgICAgIHsuLi5iYXNlUHJvcHN9XG4gICAgICAgICAgICByb3dzPXtyb3dzfVxuICAgICAgICAgICAgbWF4TGVuZ3RoPXttYXhMZW5ndGh9XG4gICAgICAgICAgICBjbGFzc05hbWU9e2NuKFxuICAgICAgICAgICAgICAnbWluLWgtWzgwcHhdIHJlc2l6ZS15JyxcbiAgICAgICAgICAgICAgYmFzZVByb3BzLmNsYXNzTmFtZVxuICAgICAgICAgICAgKX1cbiAgICAgICAgICAvPlxuICAgICAgICApO1xuXG4gICAgICBjYXNlICdzZWxlY3QnOlxuICAgICAgICByZXR1cm4gKFxuICAgICAgICAgIDxTZWxlY3RcbiAgICAgICAgICAgIG9uVmFsdWVDaGFuZ2U9e2ZpZWxkLm9uQ2hhbmdlfVxuICAgICAgICAgICAgZGVmYXVsdFZhbHVlPXtmaWVsZC52YWx1ZX1cbiAgICAgICAgICAgIGRpc2FibGVkPXtkaXNhYmxlZH1cbiAgICAgICAgICA+XG4gICAgICAgICAgICA8U2VsZWN0VHJpZ2dlciBkYXRhLXRlc3RpZD17dGVzdElkfSBjbGFzc05hbWU9e2Jhc2VQcm9wcy5jbGFzc05hbWV9PlxuICAgICAgICAgICAgICA8U2VsZWN0VmFsdWUgcGxhY2Vob2xkZXI9e3BsYWNlaG9sZGVyIHx8IGBTZWxlY3QgJHtsYWJlbC50b0xvd2VyQ2FzZSgpfWB9IC8+XG4gICAgICAgICAgICA8L1NlbGVjdFRyaWdnZXI+XG4gICAgICAgICAgICA8U2VsZWN0Q29udGVudD5cbiAgICAgICAgICAgICAge29wdGlvbnMubWFwKChvcHRpb24pID0+IChcbiAgICAgICAgICAgICAgICA8U2VsZWN0SXRlbVxuICAgICAgICAgICAgICAgICAga2V5PXtvcHRpb24udmFsdWV9XG4gICAgICAgICAgICAgICAgICB2YWx1ZT17b3B0aW9uLnZhbHVlfVxuICAgICAgICAgICAgICAgICAgZGlzYWJsZWQ9e29wdGlvbi5kaXNhYmxlZH1cbiAgICAgICAgICAgICAgICAgIGRhdGEtdGVzdGlkPXtgJHt0ZXN0SWR9LW9wdGlvbi0ke29wdGlvbi52YWx1ZX1gfVxuICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgIHtvcHRpb24ubGFiZWx9XG4gICAgICAgICAgICAgICAgPC9TZWxlY3RJdGVtPlxuICAgICAgICAgICAgICApKX1cbiAgICAgICAgICAgIDwvU2VsZWN0Q29udGVudD5cbiAgICAgICAgICA8L1NlbGVjdD5cbiAgICAgICAgKTtcblxuICAgICAgY2FzZSAnY2hlY2tib3gnOlxuICAgICAgICByZXR1cm4gKFxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBpdGVtcy1jZW50ZXIgc3BhY2UteC0yXCI+XG4gICAgICAgICAgICA8Q2hlY2tib3hcbiAgICAgICAgICAgICAgY2hlY2tlZD17ZmllbGQudmFsdWV9XG4gICAgICAgICAgICAgIG9uQ2hlY2tlZENoYW5nZT17ZmllbGQub25DaGFuZ2V9XG4gICAgICAgICAgICAgIGRpc2FibGVkPXtkaXNhYmxlZH1cbiAgICAgICAgICAgICAgZGF0YS10ZXN0aWQ9e3Rlc3RJZH1cbiAgICAgICAgICAgICAgY2xhc3NOYW1lPXtiYXNlUHJvcHMuY2xhc3NOYW1lfVxuICAgICAgICAgICAgLz5cbiAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT1cInRleHQtc20gZm9udC1tZWRpdW0gbGVhZGluZy1ub25lIHBlZXItZGlzYWJsZWQ6Y3Vyc29yLW5vdC1hbGxvd2VkIHBlZXItZGlzYWJsZWQ6b3BhY2l0eS03MFwiPlxuICAgICAgICAgICAgICB7bGFiZWx9XG4gICAgICAgICAgICA8L3NwYW4+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgICk7XG5cbiAgICAgIGNhc2UgJ251bWJlcic6XG4gICAgICAgIHJldHVybiAoXG4gICAgICAgICAgPElucHV0XG4gICAgICAgICAgICB7Li4uYmFzZVByb3BzfVxuICAgICAgICAgICAgdHlwZT1cIm51bWJlclwiXG4gICAgICAgICAgICBtaW49e21pbn1cbiAgICAgICAgICAgIG1heD17bWF4fVxuICAgICAgICAgICAgc3RlcD17c3RlcH1cbiAgICAgICAgICAvPlxuICAgICAgICApO1xuXG4gICAgICBkZWZhdWx0OlxuICAgICAgICByZXR1cm4gKFxuICAgICAgICAgIDxJbnB1dFxuICAgICAgICAgICAgey4uLmJhc2VQcm9wc31cbiAgICAgICAgICAgIHR5cGU9e3R5cGV9XG4gICAgICAgICAgICBtaW49e21pbn1cbiAgICAgICAgICAgIG1heD17bWF4fVxuICAgICAgICAgICAgc3RlcD17c3RlcH1cbiAgICAgICAgICAgIG1heExlbmd0aD17bWF4TGVuZ3RofVxuICAgICAgICAgIC8+XG4gICAgICAgICk7XG4gICAgfVxuICB9O1xuXG4gIHJldHVybiAoXG4gICAgPEZvcm1GaWVsZFxuICAgICAgY29udHJvbD17Y29udHJvbH1cbiAgICAgIG5hbWU9e25hbWV9XG4gICAgICByZW5kZXI9eyh7IGZpZWxkLCBmaWVsZFN0YXRlIH0pID0+IChcbiAgICAgICAgPEZvcm1JdGVtIGNsYXNzTmFtZT17Y24oJ3NwYWNlLXktMicsIGNsYXNzTmFtZSl9PlxuICAgICAgICAgIHt0eXBlICE9PSAnY2hlY2tib3gnICYmIChcbiAgICAgICAgICAgIDxGb3JtTGFiZWwgY2xhc3NOYW1lPXtjbihcbiAgICAgICAgICAgICAgJ3RleHQtc20gZm9udC1tZWRpdW0gbGVhZGluZy1ub25lJyxcbiAgICAgICAgICAgICAgcmVxdWlyZWQgJiYgJ2FmdGVyOmNvbnRlbnQtW1wiKlwiXSBhZnRlcjptbC0wLjUgYWZ0ZXI6dGV4dC1yZWQtNTAwJyxcbiAgICAgICAgICAgICAgZmllbGRTdGF0ZS5lcnJvciAmJiAndGV4dC1yZWQtNjAwJ1xuICAgICAgICAgICAgKX0+XG4gICAgICAgICAgICAgIHtsYWJlbH1cbiAgICAgICAgICAgIDwvRm9ybUxhYmVsPlxuICAgICAgICAgICl9XG4gICAgICAgICAgXG4gICAgICAgICAgPEZvcm1Db250cm9sPlxuICAgICAgICAgICAge3JlbmRlcklucHV0KHsgLi4uZmllbGQsIGVycm9yOiBmaWVsZFN0YXRlLmVycm9yIH0pfVxuICAgICAgICAgIDwvRm9ybUNvbnRyb2w+XG4gICAgICAgICAgXG4gICAgICAgICAge2Rlc2NyaXB0aW9uICYmIChcbiAgICAgICAgICAgIDxGb3JtRGVzY3JpcHRpb24gY2xhc3NOYW1lPVwidGV4dC1zbSB0ZXh0LW11dGVkLWZvcmVncm91bmRcIj5cbiAgICAgICAgICAgICAge2Rlc2NyaXB0aW9ufVxuICAgICAgICAgICAgPC9Gb3JtRGVzY3JpcHRpb24+XG4gICAgICAgICAgKX1cbiAgICAgICAgICBcbiAgICAgICAgICA8Rm9ybU1lc3NhZ2UgY2xhc3NOYW1lPVwidGV4dC1zbSB0ZXh0LXJlZC02MDBcIiAvPlxuICAgICAgICA8L0Zvcm1JdGVtPlxuICAgICAgKX1cbiAgICAvPlxuICApO1xufVxuXG4vKipcbiAqIFN0YW5kYXJkIGZvcm0gc3VibWl0IGJ1dHRvbiB3aXRoIGNvbnNpc3RlbnQgc3R5bGluZyBhbmQgdGVzdCBJRFxuICovXG5pbnRlcmZhY2UgU3RhbmRhcmRTdWJtaXRCdXR0b25Qcm9wcyB7XG4gIGlzTG9hZGluZz86IGJvb2xlYW47XG4gIGxvYWRpbmdUZXh0Pzogc3RyaW5nO1xuICBjaGlsZHJlbjogUmVhY3QuUmVhY3ROb2RlO1xuICBkaXNhYmxlZD86IGJvb2xlYW47XG4gIGZvcm1OYW1lPzogc3RyaW5nO1xuICBjbGFzc05hbWU/OiBzdHJpbmc7XG4gIHZhcmlhbnQ/OiAnZGVmYXVsdCcgfCAnZGVzdHJ1Y3RpdmUnIHwgJ291dGxpbmUnIHwgJ3NlY29uZGFyeScgfCAnZ2hvc3QnIHwgJ2xpbmsnO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gU3RhbmRhcmRTdWJtaXRCdXR0b24oe1xuICBpc0xvYWRpbmcgPSBmYWxzZSxcbiAgbG9hZGluZ1RleHQgPSAnU3VibWl0dGluZy4uLicsXG4gIGNoaWxkcmVuLFxuICBkaXNhYmxlZCA9IGZhbHNlLFxuICBmb3JtTmFtZSA9ICdmb3JtJyxcbiAgY2xhc3NOYW1lID0gJycsXG4gIHZhcmlhbnQgPSAnZGVmYXVsdCcsXG59OiBTdGFuZGFyZFN1Ym1pdEJ1dHRvblByb3BzKSB7XG4gIGNvbnN0IHRlc3RJZCA9IEZvcm1RdWFsaXR5LmdlbmVyYXRlVGVzdElkKGZvcm1OYW1lLCAnc3VibWl0JywgJ2J1dHRvbicpO1xuXG4gIHJldHVybiAoXG4gICAgPGJ1dHRvblxuICAgICAgdHlwZT1cInN1Ym1pdFwiXG4gICAgICBkaXNhYmxlZD17ZGlzYWJsZWQgfHwgaXNMb2FkaW5nfVxuICAgICAgZGF0YS10ZXN0aWQ9e3Rlc3RJZH1cbiAgICAgIGNsYXNzTmFtZT17Y24oXG4gICAgICAgICdpbmxpbmUtZmxleCBpdGVtcy1jZW50ZXIganVzdGlmeS1jZW50ZXIgcHgtNCBweS0yIHRleHQtc20gZm9udC1tZWRpdW0gcm91bmRlZC1tZCcsXG4gICAgICAgICd0cmFuc2l0aW9uLWNvbG9ycyBmb2N1czpvdXRsaW5lLW5vbmUgZm9jdXM6cmluZy0yIGZvY3VzOnJpbmctb2Zmc2V0LTInLFxuICAgICAgICB2YXJpYW50ID09PSAnZGVmYXVsdCcgJiYgJ2JnLWJsdWUtNjAwIHRleHQtd2hpdGUgaG92ZXI6YmctYmx1ZS03MDAgZm9jdXM6cmluZy1ibHVlLTUwMCcsXG4gICAgICAgIHZhcmlhbnQgPT09ICdkZXN0cnVjdGl2ZScgJiYgJ2JnLXJlZC02MDAgdGV4dC13aGl0ZSBob3ZlcjpiZy1yZWQtNzAwIGZvY3VzOnJpbmctcmVkLTUwMCcsXG4gICAgICAgIHZhcmlhbnQgPT09ICdvdXRsaW5lJyAmJiAnYm9yZGVyIGJvcmRlci1ncmF5LTMwMCBiZy13aGl0ZSB0ZXh0LWdyYXktNzAwIGhvdmVyOmJnLWdyYXktNTAgZm9jdXM6cmluZy1ibHVlLTUwMCcsXG4gICAgICAgIChkaXNhYmxlZCB8fCBpc0xvYWRpbmcpICYmICdvcGFjaXR5LTUwIGN1cnNvci1ub3QtYWxsb3dlZCcsXG4gICAgICAgIGNsYXNzTmFtZVxuICAgICAgKX1cbiAgICA+XG4gICAgICB7aXNMb2FkaW5nID8gKFxuICAgICAgICA8PlxuICAgICAgICAgIDxzdmcgY2xhc3NOYW1lPVwidy00IGgtNCBtci0yIGFuaW1hdGUtc3BpblwiIHZpZXdCb3g9XCIwIDAgMjQgMjRcIj5cbiAgICAgICAgICAgIDxjaXJjbGUgXG4gICAgICAgICAgICAgIGNsYXNzTmFtZT1cIm9wYWNpdHktMjVcIiBcbiAgICAgICAgICAgICAgY3g9XCIxMlwiIFxuICAgICAgICAgICAgICBjeT1cIjEyXCIgXG4gICAgICAgICAgICAgIHI9XCIxMFwiIFxuICAgICAgICAgICAgICBzdHJva2U9XCJjdXJyZW50Q29sb3JcIiBcbiAgICAgICAgICAgICAgc3Ryb2tlV2lkdGg9XCI0XCJcbiAgICAgICAgICAgICAgZmlsbD1cIm5vbmVcIlxuICAgICAgICAgICAgLz5cbiAgICAgICAgICAgIDxwYXRoIFxuICAgICAgICAgICAgICBjbGFzc05hbWU9XCJvcGFjaXR5LTc1XCIgXG4gICAgICAgICAgICAgIGZpbGw9XCJjdXJyZW50Q29sb3JcIiBcbiAgICAgICAgICAgICAgZD1cIk00IDEyYTggOCAwIDAxOC04VjBDNS4zNzMgMCAwIDUuMzczIDAgMTJoNHptMiA1LjI5MUE3Ljk2MiA3Ljk2MiAwIDAxNCAxMkgwYzAgMy4wNDIgMS4xMzUgNS44MjQgMyA3LjkzOGwzLTIuNjQ3elwiXG4gICAgICAgICAgICAvPlxuICAgICAgICAgIDwvc3ZnPlxuICAgICAgICAgIHtsb2FkaW5nVGV4dH1cbiAgICAgICAgPC8+XG4gICAgICApIDogKFxuICAgICAgICBjaGlsZHJlblxuICAgICAgKX1cbiAgICA8L2J1dHRvbj5cbiAgKTtcbn1cblxuLyoqXG4gKiBGb3JtIHNlY3Rpb24gd3JhcHBlciBmb3Igb3JnYW5pemluZyBjb21wbGV4IGZvcm1zXG4gKi9cbmludGVyZmFjZSBGb3JtU2VjdGlvblByb3BzIHtcbiAgdGl0bGU/OiBzdHJpbmc7XG4gIGRlc2NyaXB0aW9uPzogc3RyaW5nO1xuICBjaGlsZHJlbjogUmVhY3QuUmVhY3ROb2RlO1xuICBjbGFzc05hbWU/OiBzdHJpbmc7XG4gIGNvbGxhcHNpYmxlPzogYm9vbGVhbjtcbiAgZGVmYXVsdE9wZW4/OiBib29sZWFuO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gRm9ybVNlY3Rpb24oe1xuICB0aXRsZSxcbiAgZGVzY3JpcHRpb24sXG4gIGNoaWxkcmVuLFxuICBjbGFzc05hbWUgPSAnJyxcbiAgY29sbGFwc2libGUgPSBmYWxzZSxcbiAgZGVmYXVsdE9wZW4gPSB0cnVlLFxufTogRm9ybVNlY3Rpb25Qcm9wcykge1xuICBjb25zdCBbaXNPcGVuLCBzZXRJc09wZW5dID0gUmVhY3QudXNlU3RhdGUoZGVmYXVsdE9wZW4pO1xuXG4gIGNvbnN0IHRvZ2dsZVNlY3Rpb24gPSAoKSA9PiB7XG4gICAgaWYgKGNvbGxhcHNpYmxlKSB7XG4gICAgICBzZXRJc09wZW4oIWlzT3Blbik7XG4gICAgfVxuICB9O1xuXG4gIHJldHVybiAoXG4gICAgPGRpdiBjbGFzc05hbWU9e2NuKCdzcGFjZS15LTQnLCBjbGFzc05hbWUpfT5cbiAgICAgIHt0aXRsZSAmJiAoXG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiYm9yZGVyLWIgYm9yZGVyLWdyYXktMjAwIHBiLTJcIj5cbiAgICAgICAgICA8ZGl2IFxuICAgICAgICAgICAgY2xhc3NOYW1lPXtjbihcbiAgICAgICAgICAgICAgJ2ZsZXggaXRlbXMtY2VudGVyIGp1c3RpZnktYmV0d2VlbicsXG4gICAgICAgICAgICAgIGNvbGxhcHNpYmxlICYmICdjdXJzb3ItcG9pbnRlciBob3Zlcjp0ZXh0LWJsdWUtNjAwJ1xuICAgICAgICAgICAgKX1cbiAgICAgICAgICAgIG9uQ2xpY2s9e3RvZ2dsZVNlY3Rpb259XG4gICAgICAgICAgPlxuICAgICAgICAgICAgPGgzIGNsYXNzTmFtZT1cInRleHQtbGcgZm9udC1tZWRpdW0gdGV4dC1ncmF5LTkwMFwiPnt0aXRsZX08L2gzPlxuICAgICAgICAgICAge2NvbGxhcHNpYmxlICYmIChcbiAgICAgICAgICAgICAgPHN2ZyBcbiAgICAgICAgICAgICAgICBjbGFzc05hbWU9e2NuKCd3LTUgaC01IHRyYW5zaXRpb24tdHJhbnNmb3JtJywgaXNPcGVuICYmICdyb3RhdGUtMTgwJyl9XG4gICAgICAgICAgICAgICAgZmlsbD1cIm5vbmVcIiBcbiAgICAgICAgICAgICAgICBzdHJva2U9XCJjdXJyZW50Q29sb3JcIiBcbiAgICAgICAgICAgICAgICB2aWV3Qm94PVwiMCAwIDI0IDI0XCJcbiAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgIDxwYXRoIHN0cm9rZUxpbmVjYXA9XCJyb3VuZFwiIHN0cm9rZUxpbmVqb2luPVwicm91bmRcIiBzdHJva2VXaWR0aD17Mn0gZD1cIk0xOSA5bC03IDctNy03XCIgLz5cbiAgICAgICAgICAgICAgPC9zdmc+XG4gICAgICAgICAgICApfVxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIHtkZXNjcmlwdGlvbiAmJiAoXG4gICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJtdC0xIHRleHQtc20gdGV4dC1ncmF5LTYwMFwiPntkZXNjcmlwdGlvbn08L3A+XG4gICAgICAgICAgKX1cbiAgICAgICAgPC9kaXY+XG4gICAgICApfVxuICAgICAgXG4gICAgICB7KCFjb2xsYXBzaWJsZSB8fCBpc09wZW4pICYmIChcbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJzcGFjZS15LTRcIj5cbiAgICAgICAgICB7Y2hpbGRyZW59XG4gICAgICAgIDwvZGl2PlxuICAgICAgKX1cbiAgICA8L2Rpdj5cbiAgKTtcbn0iXSwidmVyc2lvbiI6M30=