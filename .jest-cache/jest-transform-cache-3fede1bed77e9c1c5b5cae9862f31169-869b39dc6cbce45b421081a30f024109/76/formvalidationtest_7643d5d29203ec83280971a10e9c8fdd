12600d2de78dfb98dc4d8199b125f2d0
"use strict";
/**
 * Comprehensive Form Validation Test Suite
 * Tests all form validation rules and ensures consistency across the application
 */
Object.defineProperty(exports, "__esModule", { value: true });
const globals_1 = require("@jest/globals");
const zod_1 = require("zod");
(0, globals_1.describe)('Form Validation Rules Compliance', () => {
    (0, globals_1.describe)('Error Message Quality Standards', () => {
        (0, globals_1.test)('should require detailed error messages with examples for string fields', () => {
            // Test that error messages are descriptive and include examples
            const emailSchema = zod_1.z.string().email('Please enter a valid email address (example: user@domain.com)');
            const nameSchema = zod_1.z.string().min(1, 'First name is required (example: Jean)');
            const phoneSchema = zod_1.z.string().regex(/^(\+1\s?)?(\(\d{3}\)|\d{3})[\s.-]?\d{3}[\s.-]?\d{4}$/, 'Phone number must be a valid North American format (example: (514) 123-4567)');
            // Test valid inputs
            (0, globals_1.expect)(() => emailSchema.parse('user@domain.com')).not.toThrow();
            (0, globals_1.expect)(() => nameSchema.parse('Jean')).not.toThrow();
            (0, globals_1.expect)(() => phoneSchema.parse('(514) 123-4567')).not.toThrow();
            // Test invalid inputs return detailed error messages
            const emailResult = emailSchema.safeParse('invalid-email');
            const nameResult = nameSchema.safeParse('');
            const phoneResult = phoneSchema.safeParse('123');
            (0, globals_1.expect)(emailResult.success).toBe(false);
            (0, globals_1.expect)(nameResult.success).toBe(false);
            (0, globals_1.expect)(phoneResult.success).toBe(false);
            if (!emailResult.success) {
                (0, globals_1.expect)(emailResult.error.issues[0].message).toContain('example:');
                (0, globals_1.expect)(emailResult.error.issues[0].message).toContain('@');
            }
            if (!nameResult.success) {
                (0, globals_1.expect)(nameResult.error.issues[0].message).toContain('example:');
            }
            if (!phoneResult.success) {
                (0, globals_1.expect)(phoneResult.error.issues[0].message).toContain('example:');
                (0, globals_1.expect)(phoneResult.error.issues[0].message).toContain('(514)');
            }
        });
        (0, globals_1.test)('should enforce length limits with clear error messages', () => {
            const titleSchema = zod_1.z.string().min(1, 'Title is required (example: Monthly Meeting Minutes)').max(200, 'Title must be less than 200 characters');
            const descriptionSchema = zod_1.z.string().max(1000, 'Description must be less than 1000 characters');
            // Test length violations
            const longTitle = 'A'.repeat(201);
            const longDescription = 'A'.repeat(1001);
            const titleResult = titleSchema.safeParse(longTitle);
            const descriptionResult = descriptionSchema.safeParse(longDescription);
            (0, globals_1.expect)(titleResult.success).toBe(false);
            (0, globals_1.expect)(descriptionResult.success).toBe(false);
            if (!titleResult.success) {
                (0, globals_1.expect)(titleResult.error.issues[0].message).toContain('less than');
                (0, globals_1.expect)(titleResult.error.issues[0].message).toContain('200');
            }
            if (!descriptionResult.success) {
                (0, globals_1.expect)(descriptionResult.error.issues[0].message).toContain('less than');
                (0, globals_1.expect)(descriptionResult.error.issues[0].message).toContain('1000');
            }
        });
        (0, globals_1.test)('should validate Quebec-specific formats', () => {
            const postalCodeSchema = zod_1.z.string().regex(/^[A-Z]\d[A-Z]\s?\d[A-Z]\d$/, 'Postal code must follow Canadian format (example: H1A 1B1)');
            const citySchema = zod_1.z.string().regex(/^[a-zA-ZÀ-ÿ\s'-]+$/, 'City name can only contain letters, spaces, apostrophes and hyphens');
            // Test valid Quebec formats
            (0, globals_1.expect)(() => postalCodeSchema.parse('H1A 1B1')).not.toThrow();
            (0, globals_1.expect)(() => postalCodeSchema.parse('H1A1B1')).not.toThrow();
            (0, globals_1.expect)(() => citySchema.parse('Montréal')).not.toThrow();
            (0, globals_1.expect)(() => citySchema.parse("Saint-Jean-sur-Richelieu")).not.toThrow();
            // Test invalid formats
            const postalResult = postalCodeSchema.safeParse('12345');
            const cityResult = citySchema.safeParse('City123');
            (0, globals_1.expect)(postalResult.success).toBe(false);
            (0, globals_1.expect)(cityResult.success).toBe(false);
            if (!postalResult.success) {
                (0, globals_1.expect)(postalResult.error.issues[0].message).toContain('Canadian format');
                (0, globals_1.expect)(postalResult.error.issues[0].message).toContain('H1A 1B1');
            }
            if (!cityResult.success) {
                (0, globals_1.expect)(cityResult.error.issues[0].message).toContain('letters, spaces, apostrophes');
            }
        });
    });
    (0, globals_1.describe)('Numeric Field Validation Standards', () => {
        (0, globals_1.test)('should validate numeric ranges with clear bounds', () => {
            const ageSchema = zod_1.z.number().min(18, 'Age must be between 18 and 120 years').max(120, 'Age must be between 18 and 120 years');
            const amountSchema = zod_1.z.string().regex(/^\d+(\.\d{1,2})?$/, 'Amount must be a valid number with up to 2 decimal places (example: 125.50)');
            const capacitySchema = zod_1.z.number().min(1, 'Capacity must be between 1 and 500 people').max(500, 'Capacity must be between 1 and 500 people');
            // Test valid ranges
            (0, globals_1.expect)(() => ageSchema.parse(25)).not.toThrow();
            (0, globals_1.expect)(() => amountSchema.parse('125.50')).not.toThrow();
            (0, globals_1.expect)(() => capacitySchema.parse(50)).not.toThrow();
            // Test boundary violations
            const ageResult = ageSchema.safeParse(17);
            const amountResult = amountSchema.safeParse('125.555');
            const capacityResult = capacitySchema.safeParse(501);
            (0, globals_1.expect)(ageResult.success).toBe(false);
            (0, globals_1.expect)(amountResult.success).toBe(false);
            (0, globals_1.expect)(capacityResult.success).toBe(false);
            if (!ageResult.success) {
                (0, globals_1.expect)(ageResult.error.issues[0].message).toContain('between');
            }
            if (!amountResult.success) {
                (0, globals_1.expect)(amountResult.error.issues[0].message).toContain('decimal places');
                (0, globals_1.expect)(amountResult.error.issues[0].message).toContain('example:');
            }
        });
    });
    (0, globals_1.describe)('Required Field Validation', () => {
        (0, globals_1.test)('should provide clear guidance for required selections', () => {
            const organizationSchema = zod_1.z.string().min(1, 'Please select an organization from the dropdown');
            const roleSchema = zod_1.z.string().min(1, 'Please select a user role');
            const typeSchema = zod_1.z.string().min(1, 'Please select an organization type from the dropdown');
            const orgResult = organizationSchema.safeParse('');
            const roleResult = roleSchema.safeParse('');
            const typeResult = typeSchema.safeParse('');
            (0, globals_1.expect)(orgResult.success).toBe(false);
            (0, globals_1.expect)(roleResult.success).toBe(false);
            (0, globals_1.expect)(typeResult.success).toBe(false);
            if (!orgResult.success) {
                (0, globals_1.expect)(orgResult.error.issues[0].message).toContain('select');
                (0, globals_1.expect)(orgResult.error.issues[0].message).toContain('dropdown');
            }
            if (!roleResult.success) {
                (0, globals_1.expect)(roleResult.error.issues[0].message).toContain('select');
            }
        });
    });
    (0, globals_1.describe)('Quebec Law 25 Compliance Validation', () => {
        (0, globals_1.test)('should enforce privacy-compliant field validation', () => {
            // Personal information fields must have enhanced protection
            const firstNameSchema = zod_1.z.string().min(1, 'First name is required (example: Jean)').max(50, 'First name must be less than 50 characters').regex(/^[a-zA-ZÀ-ÿ\s'-]+$/, 'First name can only contain letters, spaces, apostrophes and hyphens');
            const lastNameSchema = zod_1.z.string().min(1, 'Last name is required (example: Dupont)').max(50, 'Last name must be less than 50 characters').regex(/^[a-zA-ZÀ-ÿ\s'-]+$/, 'Last name can only contain letters, spaces, apostrophes and hyphens');
            // Test valid Quebec names
            (0, globals_1.expect)(() => firstNameSchema.parse('Jean-Baptiste')).not.toThrow();
            (0, globals_1.expect)(() => firstNameSchema.parse('Marie-Ève')).not.toThrow();
            (0, globals_1.expect)(() => lastNameSchema.parse("O'Connor")).not.toThrow();
            (0, globals_1.expect)(() => lastNameSchema.parse('Lafleur-Dufresne')).not.toThrow();
            // Test invalid inputs
            const invalidFirst = firstNameSchema.safeParse('Jean123');
            const invalidLast = lastNameSchema.safeParse('');
            (0, globals_1.expect)(invalidFirst.success).toBe(false);
            (0, globals_1.expect)(invalidLast.success).toBe(false);
            if (!invalidFirst.success) {
                (0, globals_1.expect)(invalidFirst.error.issues[0].message).toContain('letters, spaces, apostrophes');
            }
            if (!invalidLast.success) {
                (0, globals_1.expect)(invalidLast.error.issues[0].message).toContain('example:');
            }
        });
        (0, globals_1.test)('should validate password security requirements', () => {
            const passwordSchema = zod_1.z.string()
                .min(8, 'Password must be at least 8 characters long (example: MonNouveauMotDePasse123!)')
                .max(100, 'Password must be less than 100 characters')
                .regex(/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)/, 'Password must contain at least one lowercase letter, one uppercase letter, and one number');
            // Test valid passwords
            (0, globals_1.expect)(() => passwordSchema.parse('MonMotDePasse123!')).not.toThrow();
            (0, globals_1.expect)(() => passwordSchema.parse('SecurePass123')).not.toThrow();
            // Test invalid passwords
            const shortResult = passwordSchema.safeParse('short');
            const noUpperResult = passwordSchema.safeParse('password123');
            const noNumberResult = passwordSchema.safeParse('Password');
            (0, globals_1.expect)(shortResult.success).toBe(false);
            (0, globals_1.expect)(noUpperResult.success).toBe(false);
            (0, globals_1.expect)(noNumberResult.success).toBe(false);
            if (!shortResult.success) {
                (0, globals_1.expect)(shortResult.error.issues[0].message).toContain('at least 8');
                (0, globals_1.expect)(shortResult.error.issues[0].message).toContain('example:');
            }
        });
    });
    (0, globals_1.describe)('Time and Date Validation', () => {
        (0, globals_1.test)('should validate time formats with clear examples', () => {
            const timeSchema = zod_1.z.string().regex(/^([0-1]?[0-9]|2[0-3]):[0-5][0-9]$/, 'Time must be in HH:MM format (example: 09:00)');
            const dateSchema = zod_1.z.string().min(1, 'Date is required (select from calendar)');
            // Test valid times
            (0, globals_1.expect)(() => timeSchema.parse('09:00')).not.toThrow();
            (0, globals_1.expect)(() => timeSchema.parse('23:59')).not.toThrow();
            (0, globals_1.expect)(() => timeSchema.parse('00:00')).not.toThrow();
            // Test invalid times
            const invalidTime = timeSchema.safeParse('25:00');
            const invalidFormat = timeSchema.safeParse('9:0');
            (0, globals_1.expect)(invalidTime.success).toBe(false);
            (0, globals_1.expect)(invalidFormat.success).toBe(false);
            if (!invalidTime.success) {
                (0, globals_1.expect)(invalidTime.error.issues[0].message).toContain('HH:MM');
                (0, globals_1.expect)(invalidTime.error.issues[0].message).toContain('example:');
            }
        });
    });
    (0, globals_1.describe)('Business Logic Validation', () => {
        (0, globals_1.test)('should validate refinements with helpful error messages', () => {
            const timeRangeSchema = zod_1.z
                .object({
                startTime: zod_1.z.string().regex(/^([0-1]?[0-9]|2[0-3]):[0-5][0-9]$/, 'Start time must be in HH:MM format (example: 09:00)'),
                endTime: zod_1.z.string().regex(/^([0-1]?[0-9]|2[0-3]):[0-5][0-9]$/, 'End time must be in HH:MM format (example: 11:00)'),
            })
                .refine((data) => {
                const [startHour, startMin] = data.startTime.split(':').map(Number);
                const [endHour, endMin] = data.endTime.split(':').map(Number);
                const startMinutes = startHour * 60 + startMin;
                const endMinutes = endHour * 60 + endMin;
                return endMinutes > startMinutes;
            }, {
                message: 'End time must be after start time (example: start at 09:00, end at 11:00)',
                path: ['endTime'],
            });
            // Test valid time range
            (0, globals_1.expect)(() => timeRangeSchema.parse({ startTime: '09:00', endTime: '11:00' })).not.toThrow();
            // Test invalid time range
            const result = timeRangeSchema.safeParse({ startTime: '11:00', endTime: '09:00' });
            (0, globals_1.expect)(result.success).toBe(false);
            if (!result.success) {
                (0, globals_1.expect)(result.error.issues[0].message).toContain('after start time');
                (0, globals_1.expect)(result.error.issues[0].message).toContain('example:');
            }
        });
        (0, globals_1.test)('should validate password confirmation with clear messaging', () => {
            const passwordSchema = zod_1.z
                .object({
                newPassword: zod_1.z.string().min(8, 'New password must be at least 8 characters long (example: MonNouveauMotDePasse123!)'),
                confirmPassword: zod_1.z.string().min(1, 'Please confirm your new password by typing it again'),
            })
                .refine((data) => data.newPassword === data.confirmPassword, {
                message: "Passwords don't match - please enter the same password in both fields",
                path: ['confirmPassword'],
            });
            // Test valid password confirmation
            (0, globals_1.expect)(() => passwordSchema.parse({
                newPassword: 'TestPassword123!',
                confirmPassword: 'TestPassword123!'
            })).not.toThrow();
            // Test password mismatch
            const result = passwordSchema.safeParse({
                newPassword: 'TestPassword123!',
                confirmPassword: 'DifferentPassword123!'
            });
            (0, globals_1.expect)(result.success).toBe(false);
            if (!result.success) {
                (0, globals_1.expect)(result.error.issues[0].message).toContain("don't match");
                (0, globals_1.expect)(result.error.issues[0].message).toContain('same password');
            }
        });
    });
    (0, globals_1.describe)('Validation Pattern Enforcement', () => {
        (0, globals_1.test)('should enforce minimum character requirements for text fields', () => {
            // All meaningful text fields should have minimum length requirements
            const shortDescriptionSchema = zod_1.z.string().min(10, 'Description must be at least 10 characters long (example: Detailed explanation of the issue)');
            const titleSchema = zod_1.z.string().min(1, 'Title is required (example: Document Title)');
            const shortResult = shortDescriptionSchema.safeParse('short');
            const emptyResult = titleSchema.safeParse('');
            (0, globals_1.expect)(shortResult.success).toBe(false);
            (0, globals_1.expect)(emptyResult.success).toBe(false);
            if (!shortResult.success) {
                (0, globals_1.expect)(shortResult.error.issues[0].message).toContain('at least');
                (0, globals_1.expect)(shortResult.error.issues[0].message).toContain('example:');
            }
        });
        (0, globals_1.test)('should validate selection fields with guidance', () => {
            const categorySchema = zod_1.z.enum(['maintenance', 'complaint', 'information', 'other']);
            const organizationSchema = zod_1.z.string().min(1, 'Please select an organization from the dropdown');
            // Test empty selection
            const orgResult = organizationSchema.safeParse('');
            (0, globals_1.expect)(orgResult.success).toBe(false);
            if (!orgResult.success) {
                (0, globals_1.expect)(orgResult.error.issues[0].message).toContain('select');
                (0, globals_1.expect)(orgResult.error.issues[0].message).toContain('dropdown');
            }
        });
    });
    (0, globals_1.describe)('Bilingual Support Validation', () => {
        (0, globals_1.test)('should support both English and French error messages', () => {
            // Some forms may use French error messages for Quebec compliance
            const frenchDateSchema = zod_1.z.date({ message: 'Please select a booking date from the calendar' });
            const englishEmailSchema = zod_1.z.string().email('Please enter a valid email address (example: user@domain.com)');
            // Both should work and provide clear guidance
            const dateResult = frenchDateSchema.safeParse('invalid-date');
            const emailResult = englishEmailSchema.safeParse('invalid-email');
            (0, globals_1.expect)(dateResult.success).toBe(false);
            (0, globals_1.expect)(emailResult.success).toBe(false);
            if (!dateResult.success) {
                (0, globals_1.expect)(dateResult.error.issues[0].message).toContain('select');
                (0, globals_1.expect)(dateResult.error.issues[0].message).toContain('calendar');
            }
            if (!emailResult.success) {
                (0, globals_1.expect)(emailResult.error.issues[0].message).toContain('valid email');
                (0, globals_1.expect)(emailResult.error.issues[0].message).toContain('example:');
            }
        });
    });
    (0, globals_1.describe)('Form Consistency Standards', () => {
        (0, globals_1.test)('should enforce consistent error message patterns', () => {
            // Test that all error messages follow consistent patterns:
            // 1. Clear explanation of what's wrong
            // 2. Include examples where helpful
            // 3. Specify valid ranges/formats
            // 4. Use friendly, helpful language
            const patterns = [
                {
                    schema: zod_1.z.string().min(1, 'Email address is required').email('Please enter a valid email address (example: user@domain.com)'),
                    invalidInput: 'invalid-email',
                    shouldContain: ['valid email', 'example:', '@']
                },
                {
                    schema: zod_1.z.string().min(1, 'First name is required (example: Jean)').regex(/^[a-zA-ZÀ-ÿ\s'-]+$/, 'First name can only contain letters, spaces, apostrophes and hyphens'),
                    invalidInput: 'John123',
                    shouldContain: ['can only contain', 'letters, spaces']
                },
                {
                    schema: zod_1.z.string().regex(/^\d+(\.\d{1,2})?$/, 'Amount must be a valid number with up to 2 decimal places (example: 125.50)'),
                    invalidInput: '125.555',
                    shouldContain: ['valid number', 'decimal places', 'example:']
                }
            ];
            patterns.forEach(({ schema, invalidInput, shouldContain }) => {
                const result = schema.safeParse(invalidInput);
                (0, globals_1.expect)(result.success).toBe(false);
                if (!result.success) {
                    const errorMessage = result.error.issues[0].message;
                    shouldContain.forEach(pattern => {
                        (0, globals_1.expect)(errorMessage).toContain(pattern);
                    });
                }
            });
        });
        (0, globals_1.test)('should validate that all forms use proper character limits', () => {
            // Standard character limits across the application
            const limits = {
                title: { max: 200, min: 1 },
                description: { max: 1000, min: 10 },
                shortText: { max: 100, min: 1 },
                longText: { max: 2000, min: 10 },
                name: { max: 50, min: 1 }
            };
            Object.entries(limits).forEach(([fieldType, { max, min }]) => {
                const schema = zod_1.z.string()
                    .min(min, `${fieldType} must be at least ${min} characters`)
                    .max(max, `${fieldType} must be less than ${max} characters`);
                // Test boundary conditions
                const tooShort = 'a'.repeat(min - 1);
                const tooLong = 'a'.repeat(max + 1);
                const justRight = 'a'.repeat(min);
                (0, globals_1.expect)(schema.safeParse(tooShort).success).toBe(false);
                (0, globals_1.expect)(schema.safeParse(tooLong).success).toBe(false);
                (0, globals_1.expect)(schema.safeParse(justRight).success).toBe(true);
            });
        });
    });
    (0, globals_1.describe)('Security Validation Standards', () => {
        (0, globals_1.test)('should validate email confirmation for destructive actions', () => {
            const deleteConfirmSchema = zod_1.z.object({
                confirmEmail: zod_1.z.string().min(1, 'Email confirmation is required to delete account').email('Please enter a valid email address that matches your account'),
                reason: zod_1.z.string().max(500, 'Reason must be less than 500 characters').optional(),
            });
            const validResult = deleteConfirmSchema.safeParse({
                confirmEmail: 'user@domain.com',
                reason: 'No longer needed'
            });
            const invalidResult = deleteConfirmSchema.safeParse({
                confirmEmail: '',
                reason: 'a'.repeat(501)
            });
            (0, globals_1.expect)(validResult.success).toBe(true);
            (0, globals_1.expect)(invalidResult.success).toBe(false);
            if (!invalidResult.success) {
                const errors = invalidResult.error.issues;
                (0, globals_1.expect)(errors.some(e => e.message.includes('Email confirmation is required'))).toBe(true);
                (0, globals_1.expect)(errors.some(e => e.message.includes('less than 500 characters'))).toBe(true);
            }
        });
    });
    (0, globals_1.describe)('Future Form Compliance Validation', () => {
        (0, globals_1.test)('should provide template for future form validation schemas', () => {
            // Template that all future forms should follow
            const futureFormTemplate = zod_1.z.object({
                // Required text field with example
                title: zod_1.z.string()
                    .min(1, 'Title is required (example: Descriptive Title)')
                    .max(200, 'Title must be less than 200 characters'),
                // Optional text field with validation
                description: zod_1.z.string()
                    .max(1000, 'Description must be less than 1000 characters')
                    .optional(),
                // Email field with format example
                email: zod_1.z.string()
                    .min(1, 'Email address is required')
                    .email('Please enter a valid email address (example: user@domain.com)'),
                // Quebec-specific phone number
                phone: zod_1.z.string()
                    .regex(/^(\+1\s?)?(\(\d{3}\)|\d{3})[\s.-]?\d{3}[\s.-]?\d{4}$/, 'Phone number must be a valid North American format (example: (514) 123-4567)')
                    .optional(),
                // Numeric field with range
                amount: zod_1.z.string()
                    .min(1, 'Amount is required (example: 125.50)')
                    .regex(/^\d+(\.\d{1,2})?$/, 'Amount must be a valid number with up to 2 decimal places (example: 125.50)'),
                // Selection field
                category: zod_1.z.string()
                    .min(1, 'Please select a category from the dropdown')
            });
            // Test the template works correctly
            const validData = {
                title: 'Test Document',
                description: 'This is a test description',
                email: 'test@example.com',
                phone: '(514) 123-4567',
                amount: '125.50',
                category: 'test'
            };
            const invalidData = {
                title: '',
                description: 'a'.repeat(1001),
                email: 'invalid-email',
                phone: '123',
                amount: '125.555',
                category: ''
            };
            (0, globals_1.expect)(futureFormTemplate.safeParse(validData).success).toBe(true);
            const result = futureFormTemplate.safeParse(invalidData);
            (0, globals_1.expect)(result.success).toBe(false);
            if (!result.success) {
                const messages = result.error.issues.map(i => i.message);
                (0, globals_1.expect)(messages.some(m => m.includes('example:'))).toBe(true);
                (0, globals_1.expect)(messages.some(m => m.includes('valid email'))).toBe(true);
                (0, globals_1.expect)(messages.some(m => m.includes('select'))).toBe(true);
            }
        });
    });
});
/**
 * Validation Rules Enforcement Tests
 * Tests to ensure all forms follow the established validation patterns
 */
(0, globals_1.describe)('Validation Rules Enforcement', () => {
    (0, globals_1.describe)('Error Message Quality Checks', () => {
        (0, globals_1.test)('should validate error messages contain examples where appropriate', () => {
            const fieldsRequiringExamples = [
                'email',
                'phone',
                'postalCode',
                'amount',
                'time',
                'name',
                'title',
                'password'
            ];
            // Mock schema validation that should include examples
            fieldsRequiringExamples.forEach(fieldType => {
                // Each field type should have validation that includes examples
                switch (fieldType) {
                    case 'email':
                        const emailSchema = zod_1.z.string().email('Please enter a valid email address (example: user@domain.com)');
                        const emailResult = emailSchema.safeParse('invalid');
                        (0, globals_1.expect)(emailResult.success).toBe(false);
                        if (!emailResult.success) {
                            (0, globals_1.expect)(emailResult.error.issues[0].message).toContain('example:');
                        }
                        break;
                    case 'phone':
                        const phoneSchema = zod_1.z.string().regex(/phone-regex/, 'Phone number must be a valid North American format (example: (514) 123-4567)');
                        const phoneResult = phoneSchema.safeParse('invalid');
                        (0, globals_1.expect)(phoneResult.success).toBe(false);
                        if (!phoneResult.success) {
                            (0, globals_1.expect)(phoneResult.error.issues[0].message).toContain('example:');
                        }
                        break;
                }
            });
        });
        (0, globals_1.test)('should enforce consistent language and tone', () => {
            // Error messages should be:
            // - Polite and helpful
            // - Clear about what's wrong
            // - Provide guidance on how to fix
            // - Use consistent language patterns
            const goodMessagePatterns = [
                /please enter/i,
                /must be/i,
                /should be/i,
                /example:/i,
                /between \d+ and \d+/i,
                /valid .+ format/i
            ];
            const badMessagePatterns = [
                /invalid/i, // Too vague without explanation
                /error/i, // Doesn't help user understand what to do
                /wrong/i, // Negative tone
            ];
            // Test that good patterns are used appropriately
            const emailMessage = 'Please enter a valid email address (example: user@domain.com)';
            const nameMessage = 'First name is required (example: Jean)';
            const rangeMessage = 'Age must be between 18 and 120 years';
            (0, globals_1.expect)(goodMessagePatterns.some(pattern => pattern.test(emailMessage))).toBe(true);
            (0, globals_1.expect)(goodMessagePatterns.some(pattern => pattern.test(nameMessage))).toBe(true);
            (0, globals_1.expect)(goodMessagePatterns.some(pattern => pattern.test(rangeMessage))).toBe(true);
        });
    });
    (0, globals_1.describe)('Field-Specific Validation Standards', () => {
        (0, globals_1.test)('should validate Quebec-specific field requirements', () => {
            // Quebec-specific validations should be properly handled
            const quebecFields = {
                postalCode: zod_1.z.string().regex(/^[A-Z]\d[A-Z]\s?\d[A-Z]\d$/, 'Postal code must follow Canadian format (example: H1A 1B1)'),
                city: zod_1.z.string().regex(/^[a-zA-ZÀ-ÿ\s'-]+$/, 'City name can only contain letters, spaces, apostrophes and hyphens'),
                phone: zod_1.z.string().regex(/^(\+1\s?)?(\(\d{3}\)|\d{3})[\s.-]?\d{3}[\s.-]?\d{4}$/, 'Phone number must be a valid North American format (example: (514) 123-4567)')
            };
            // Test valid Quebec formats
            (0, globals_1.expect)(quebecFields.postalCode.safeParse('H1A 1B1').success).toBe(true);
            (0, globals_1.expect)(quebecFields.city.safeParse('Montréal').success).toBe(true);
            (0, globals_1.expect)(quebecFields.phone.safeParse('(514) 123-4567').success).toBe(true);
            // Test invalid formats have helpful messages
            const testInvalidInputs = {
                postalCode: '12345',
                city: 'City123',
                phone: '123'
            };
            Object.entries(quebecFields).forEach(([fieldName, schema]) => {
                const invalidInput = testInvalidInputs[fieldName];
                const result = schema.safeParse(invalidInput);
                (0, globals_1.expect)(result.success).toBe(false);
                if (!result.success) {
                    // Only postal code and phone need examples, city field explains character restrictions
                    if (fieldName === 'postalCode' || fieldName === 'phone') {
                        (0, globals_1.expect)(result.error.issues[0].message).toContain('example:');
                    }
                    else {
                        (0, globals_1.expect)(result.error.issues[0].message).toContain('can only contain');
                    }
                }
            });
        });
        (0, globals_1.test)('should validate numeric fields have proper constraints', () => {
            const numericValidations = [
                {
                    name: 'amount',
                    schema: zod_1.z.string().regex(/^\d+(\.\d{1,2})?$/, 'Amount must be a valid number with up to 2 decimal places (example: 125.50)'),
                    valid: ['125.50', '0.99', '1000'],
                    invalid: ['125.555', 'abc', '']
                },
                {
                    name: 'capacity',
                    schema: zod_1.z.number().min(1, 'Capacity must be between 1 and 500 people').max(500, 'Capacity must be between 1 and 500 people'),
                    valid: [1, 50, 500],
                    invalid: [0, 501, -1]
                }
            ];
            numericValidations.forEach(({ name, schema, valid, invalid }) => {
                // Test valid inputs
                valid.forEach(input => {
                    (0, globals_1.expect)(schema.safeParse(input).success).toBe(true);
                });
                // Test invalid inputs have helpful messages
                invalid.forEach(input => {
                    const result = schema.safeParse(input);
                    (0, globals_1.expect)(result.success).toBe(false);
                    if (!result.success && name === 'amount') {
                        (0, globals_1.expect)(result.error.issues[0].message).toContain('example:');
                    }
                });
            });
        });
    });
});
/**
 * Future Form Compliance Guard
 * Utility functions to ensure new forms follow validation standards
 */
(0, globals_1.describe)('Future Form Compliance Guards', () => {
    (0, globals_1.describe)('Validation Schema Checkers', () => {
        (0, globals_1.test)('should validate that schema has proper error messages', () => {
            const validateSchemaCompliance = (schema, fieldName) => {
                // Test with both empty and invalid format to check all validation messages
                const emptyResult = schema.safeParse('');
                const invalidResult = schema.safeParse('invalid-format');
                // Check both results for compliance
                const results = [emptyResult, invalidResult].filter(r => !r.success);
                if (results.length > 0) {
                    // Check if any error message is compliant
                    const hasCompliantMessage = results.some(result => {
                        if (!result.success) {
                            const errorMessage = result.error.issues[0].message;
                            const hasGuidance = errorMessage.includes('must be') || errorMessage.includes('should be') || errorMessage.includes('please') || errorMessage.includes('required');
                            const isNotVague = !errorMessage.match(/^(invalid|error|wrong)$/i);
                            return hasGuidance && isNotVague;
                        }
                        return false;
                    });
                    return {
                        hasGuidance: hasCompliantMessage,
                        isNotVague: hasCompliantMessage,
                        errorMessage: results[0].success ? '' : results[0].error.issues[0].message,
                        compliance: hasCompliantMessage
                    };
                }
                return { compliance: true };
            };
            // Test with compliant schema - test with invalid email format to get email validation message
            const goodSchema = zod_1.z.string().min(1, 'Email address is required').email('Please enter a valid email address (example: user@domain.com)');
            const goodResult = validateSchemaCompliance(goodSchema, 'email');
            // The compliance should be true because it has guidance and is not vague
            (0, globals_1.expect)(goodResult.compliance).toBe(true);
            // Test with non-compliant schema
            const badSchema = zod_1.z.string().email('Invalid email');
            const badResult = validateSchemaCompliance(badSchema, 'email');
            (0, globals_1.expect)(badResult.compliance).toBe(false);
        });
    });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiL2hvbWUvcnVubmVyL3dvcmtzcGFjZS90ZXN0cy91bml0L2Zvcm0tdmFsaWRhdGlvbi50ZXN0LnRzIiwibWFwcGluZ3MiOiI7QUFBQTs7O0dBR0c7O0FBR0gsMkNBQXVEO0FBRHZELDZCQUF3QjtBQUd4QixJQUFBLGtCQUFRLEVBQUMsa0NBQWtDLEVBQUUsR0FBRyxFQUFFO0lBQ2hELElBQUEsa0JBQVEsRUFBQyxpQ0FBaUMsRUFBRSxHQUFHLEVBQUU7UUFDL0MsSUFBQSxjQUFJLEVBQUMsd0VBQXdFLEVBQUUsR0FBRyxFQUFFO1lBQ2xGLGdFQUFnRTtZQUNoRSxNQUFNLFdBQVcsR0FBRyxPQUFDLENBQUMsTUFBTSxFQUFFLENBQUMsS0FBSyxDQUFDLCtEQUErRCxDQUFDLENBQUM7WUFDdEcsTUFBTSxVQUFVLEdBQUcsT0FBQyxDQUFDLE1BQU0sRUFBRSxDQUFDLEdBQUcsQ0FBQyxDQUFDLEVBQUUsd0NBQXdDLENBQUMsQ0FBQztZQUMvRSxNQUFNLFdBQVcsR0FBRyxPQUFDLENBQUMsTUFBTSxFQUFFLENBQUMsS0FBSyxDQUFDLHNEQUFzRCxFQUFFLDhFQUE4RSxDQUFDLENBQUM7WUFFN0ssb0JBQW9CO1lBQ3BCLElBQUEsZ0JBQU0sRUFBQyxHQUFHLEVBQUUsQ0FBQyxXQUFXLENBQUMsS0FBSyxDQUFDLGlCQUFpQixDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsT0FBTyxFQUFFLENBQUM7WUFDakUsSUFBQSxnQkFBTSxFQUFDLEdBQUcsRUFBRSxDQUFDLFVBQVUsQ0FBQyxLQUFLLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsT0FBTyxFQUFFLENBQUM7WUFDckQsSUFBQSxnQkFBTSxFQUFDLEdBQUcsRUFBRSxDQUFDLFdBQVcsQ0FBQyxLQUFLLENBQUMsZ0JBQWdCLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxPQUFPLEVBQUUsQ0FBQztZQUVoRSxxREFBcUQ7WUFDckQsTUFBTSxXQUFXLEdBQUcsV0FBVyxDQUFDLFNBQVMsQ0FBQyxlQUFlLENBQUMsQ0FBQztZQUMzRCxNQUFNLFVBQVUsR0FBRyxVQUFVLENBQUMsU0FBUyxDQUFDLEVBQUUsQ0FBQyxDQUFDO1lBQzVDLE1BQU0sV0FBVyxHQUFHLFdBQVcsQ0FBQyxTQUFTLENBQUMsS0FBSyxDQUFDLENBQUM7WUFFakQsSUFBQSxnQkFBTSxFQUFDLFdBQVcsQ0FBQyxPQUFPLENBQUMsQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLENBQUM7WUFDeEMsSUFBQSxnQkFBTSxFQUFDLFVBQVUsQ0FBQyxPQUFPLENBQUMsQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLENBQUM7WUFDdkMsSUFBQSxnQkFBTSxFQUFDLFdBQVcsQ0FBQyxPQUFPLENBQUMsQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLENBQUM7WUFFeEMsSUFBSSxDQUFDLFdBQVcsQ0FBQyxPQUFPLEVBQUUsQ0FBQztnQkFDekIsSUFBQSxnQkFBTSxFQUFDLFdBQVcsQ0FBQyxLQUFLLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxDQUFDLFNBQVMsQ0FBQyxVQUFVLENBQUMsQ0FBQztnQkFDbEUsSUFBQSxnQkFBTSxFQUFDLFdBQVcsQ0FBQyxLQUFLLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxDQUFDLFNBQVMsQ0FBQyxHQUFHLENBQUMsQ0FBQztZQUM3RCxDQUFDO1lBQ0QsSUFBSSxDQUFDLFVBQVUsQ0FBQyxPQUFPLEVBQUUsQ0FBQztnQkFDeEIsSUFBQSxnQkFBTSxFQUFDLFVBQVUsQ0FBQyxLQUFLLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxDQUFDLFNBQVMsQ0FBQyxVQUFVLENBQUMsQ0FBQztZQUNuRSxDQUFDO1lBQ0QsSUFBSSxDQUFDLFdBQVcsQ0FBQyxPQUFPLEVBQUUsQ0FBQztnQkFDekIsSUFBQSxnQkFBTSxFQUFDLFdBQVcsQ0FBQyxLQUFLLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxDQUFDLFNBQVMsQ0FBQyxVQUFVLENBQUMsQ0FBQztnQkFDbEUsSUFBQSxnQkFBTSxFQUFDLFdBQVcsQ0FBQyxLQUFLLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxDQUFDLFNBQVMsQ0FBQyxPQUFPLENBQUMsQ0FBQztZQUNqRSxDQUFDO1FBQ0gsQ0FBQyxDQUFDLENBQUM7UUFFSCxJQUFBLGNBQUksRUFBQyx3REFBd0QsRUFBRSxHQUFHLEVBQUU7WUFDbEUsTUFBTSxXQUFXLEdBQUcsT0FBQyxDQUFDLE1BQU0sRUFBRSxDQUFDLEdBQUcsQ0FBQyxDQUFDLEVBQUUsc0RBQXNELENBQUMsQ0FBQyxHQUFHLENBQUMsR0FBRyxFQUFFLHdDQUF3QyxDQUFDLENBQUM7WUFDakosTUFBTSxpQkFBaUIsR0FBRyxPQUFDLENBQUMsTUFBTSxFQUFFLENBQUMsR0FBRyxDQUFDLElBQUksRUFBRSwrQ0FBK0MsQ0FBQyxDQUFDO1lBRWhHLHlCQUF5QjtZQUN6QixNQUFNLFNBQVMsR0FBRyxHQUFHLENBQUMsTUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFDO1lBQ2xDLE1BQU0sZUFBZSxHQUFHLEdBQUcsQ0FBQyxNQUFNLENBQUMsSUFBSSxDQUFDLENBQUM7WUFFekMsTUFBTSxXQUFXLEdBQUcsV0FBVyxDQUFDLFNBQVMsQ0FBQyxTQUFTLENBQUMsQ0FBQztZQUNyRCxNQUFNLGlCQUFpQixHQUFHLGlCQUFpQixDQUFDLFNBQVMsQ0FBQyxlQUFlLENBQUMsQ0FBQztZQUV2RSxJQUFBLGdCQUFNLEVBQUMsV0FBVyxDQUFDLE9BQU8sQ0FBQyxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQztZQUN4QyxJQUFBLGdCQUFNLEVBQUMsaUJBQWlCLENBQUMsT0FBTyxDQUFDLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxDQUFDO1lBRTlDLElBQUksQ0FBQyxXQUFXLENBQUMsT0FBTyxFQUFFLENBQUM7Z0JBQ3pCLElBQUEsZ0JBQU0sRUFBQyxXQUFXLENBQUMsS0FBSyxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsQ0FBQyxPQUFPLENBQUMsQ0FBQyxTQUFTLENBQUMsV0FBVyxDQUFDLENBQUM7Z0JBQ25FLElBQUEsZ0JBQU0sRUFBQyxXQUFXLENBQUMsS0FBSyxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsQ0FBQyxPQUFPLENBQUMsQ0FBQyxTQUFTLENBQUMsS0FBSyxDQUFDLENBQUM7WUFDL0QsQ0FBQztZQUNELElBQUksQ0FBQyxpQkFBaUIsQ0FBQyxPQUFPLEVBQUUsQ0FBQztnQkFDL0IsSUFBQSxnQkFBTSxFQUFDLGlCQUFpQixDQUFDLEtBQUssQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLENBQUMsT0FBTyxDQUFDLENBQUMsU0FBUyxDQUFDLFdBQVcsQ0FBQyxDQUFDO2dCQUN6RSxJQUFBLGdCQUFNLEVBQUMsaUJBQWlCLENBQUMsS0FBSyxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsQ0FBQyxPQUFPLENBQUMsQ0FBQyxTQUFTLENBQUMsTUFBTSxDQUFDLENBQUM7WUFDdEUsQ0FBQztRQUNILENBQUMsQ0FBQyxDQUFDO1FBRUgsSUFBQSxjQUFJLEVBQUMseUNBQXlDLEVBQUUsR0FBRyxFQUFFO1lBQ25ELE1BQU0sZ0JBQWdCLEdBQUcsT0FBQyxDQUFDLE1BQU0sRUFBRSxDQUFDLEtBQUssQ0FBQyw0QkFBNEIsRUFBRSw0REFBNEQsQ0FBQyxDQUFDO1lBQ3RJLE1BQU0sVUFBVSxHQUFHLE9BQUMsQ0FBQyxNQUFNLEVBQUUsQ0FBQyxLQUFLLENBQUMsb0JBQW9CLEVBQUUscUVBQXFFLENBQUMsQ0FBQztZQUVqSSw0QkFBNEI7WUFDNUIsSUFBQSxnQkFBTSxFQUFDLEdBQUcsRUFBRSxDQUFDLGdCQUFnQixDQUFDLEtBQUssQ0FBQyxTQUFTLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxPQUFPLEVBQUUsQ0FBQztZQUM5RCxJQUFBLGdCQUFNLEVBQUMsR0FBRyxFQUFFLENBQUMsZ0JBQWdCLENBQUMsS0FBSyxDQUFDLFFBQVEsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLE9BQU8sRUFBRSxDQUFDO1lBQzdELElBQUEsZ0JBQU0sRUFBQyxHQUFHLEVBQUUsQ0FBQyxVQUFVLENBQUMsS0FBSyxDQUFDLFVBQVUsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLE9BQU8sRUFBRSxDQUFDO1lBQ3pELElBQUEsZ0JBQU0sRUFBQyxHQUFHLEVBQUUsQ0FBQyxVQUFVLENBQUMsS0FBSyxDQUFDLDBCQUEwQixDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsT0FBTyxFQUFFLENBQUM7WUFFekUsdUJBQXVCO1lBQ3ZCLE1BQU0sWUFBWSxHQUFHLGdCQUFnQixDQUFDLFNBQVMsQ0FBQyxPQUFPLENBQUMsQ0FBQztZQUN6RCxNQUFNLFVBQVUsR0FBRyxVQUFVLENBQUMsU0FBUyxDQUFDLFNBQVMsQ0FBQyxDQUFDO1lBRW5ELElBQUEsZ0JBQU0sRUFBQyxZQUFZLENBQUMsT0FBTyxDQUFDLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxDQUFDO1lBQ3pDLElBQUEsZ0JBQU0sRUFBQyxVQUFVLENBQUMsT0FBTyxDQUFDLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxDQUFDO1lBRXZDLElBQUksQ0FBQyxZQUFZLENBQUMsT0FBTyxFQUFFLENBQUM7Z0JBQzFCLElBQUEsZ0JBQU0sRUFBQyxZQUFZLENBQUMsS0FBSyxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsQ0FBQyxPQUFPLENBQUMsQ0FBQyxTQUFTLENBQUMsaUJBQWlCLENBQUMsQ0FBQztnQkFDMUUsSUFBQSxnQkFBTSxFQUFDLFlBQVksQ0FBQyxLQUFLLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxDQUFDLFNBQVMsQ0FBQyxTQUFTLENBQUMsQ0FBQztZQUNwRSxDQUFDO1lBQ0QsSUFBSSxDQUFDLFVBQVUsQ0FBQyxPQUFPLEVBQUUsQ0FBQztnQkFDeEIsSUFBQSxnQkFBTSxFQUFDLFVBQVUsQ0FBQyxLQUFLLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxDQUFDLFNBQVMsQ0FBQyw4QkFBOEIsQ0FBQyxDQUFDO1lBQ3ZGLENBQUM7UUFDSCxDQUFDLENBQUMsQ0FBQztJQUNMLENBQUMsQ0FBQyxDQUFDO0lBRUgsSUFBQSxrQkFBUSxFQUFDLG9DQUFvQyxFQUFFLEdBQUcsRUFBRTtRQUNsRCxJQUFBLGNBQUksRUFBQyxrREFBa0QsRUFBRSxHQUFHLEVBQUU7WUFDNUQsTUFBTSxTQUFTLEdBQUcsT0FBQyxDQUFDLE1BQU0sRUFBRSxDQUFDLEdBQUcsQ0FBQyxFQUFFLEVBQUUsc0NBQXNDLENBQUMsQ0FBQyxHQUFHLENBQUMsR0FBRyxFQUFFLHNDQUFzQyxDQUFDLENBQUM7WUFDOUgsTUFBTSxZQUFZLEdBQUcsT0FBQyxDQUFDLE1BQU0sRUFBRSxDQUFDLEtBQUssQ0FBQyxtQkFBbUIsRUFBRSw2RUFBNkUsQ0FBQyxDQUFDO1lBQzFJLE1BQU0sY0FBYyxHQUFHLE9BQUMsQ0FBQyxNQUFNLEVBQUUsQ0FBQyxHQUFHLENBQUMsQ0FBQyxFQUFFLDJDQUEyQyxDQUFDLENBQUMsR0FBRyxDQUFDLEdBQUcsRUFBRSwyQ0FBMkMsQ0FBQyxDQUFDO1lBRTVJLG9CQUFvQjtZQUNwQixJQUFBLGdCQUFNLEVBQUMsR0FBRyxFQUFFLENBQUMsU0FBUyxDQUFDLEtBQUssQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxPQUFPLEVBQUUsQ0FBQztZQUNoRCxJQUFBLGdCQUFNLEVBQUMsR0FBRyxFQUFFLENBQUMsWUFBWSxDQUFDLEtBQUssQ0FBQyxRQUFRLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxPQUFPLEVBQUUsQ0FBQztZQUN6RCxJQUFBLGdCQUFNLEVBQUMsR0FBRyxFQUFFLENBQUMsY0FBYyxDQUFDLEtBQUssQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxPQUFPLEVBQUUsQ0FBQztZQUVyRCwyQkFBMkI7WUFDM0IsTUFBTSxTQUFTLEdBQUcsU0FBUyxDQUFDLFNBQVMsQ0FBQyxFQUFFLENBQUMsQ0FBQztZQUMxQyxNQUFNLFlBQVksR0FBRyxZQUFZLENBQUMsU0FBUyxDQUFDLFNBQVMsQ0FBQyxDQUFDO1lBQ3ZELE1BQU0sY0FBYyxHQUFHLGNBQWMsQ0FBQyxTQUFTLENBQUMsR0FBRyxDQUFDLENBQUM7WUFFckQsSUFBQSxnQkFBTSxFQUFDLFNBQVMsQ0FBQyxPQUFPLENBQUMsQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLENBQUM7WUFDdEMsSUFBQSxnQkFBTSxFQUFDLFlBQVksQ0FBQyxPQUFPLENBQUMsQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLENBQUM7WUFDekMsSUFBQSxnQkFBTSxFQUFDLGNBQWMsQ0FBQyxPQUFPLENBQUMsQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLENBQUM7WUFFM0MsSUFBSSxDQUFDLFNBQVMsQ0FBQyxPQUFPLEVBQUUsQ0FBQztnQkFDdkIsSUFBQSxnQkFBTSxFQUFDLFNBQVMsQ0FBQyxLQUFLLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxDQUFDLFNBQVMsQ0FBQyxTQUFTLENBQUMsQ0FBQztZQUNqRSxDQUFDO1lBQ0QsSUFBSSxDQUFDLFlBQVksQ0FBQyxPQUFPLEVBQUUsQ0FBQztnQkFDMUIsSUFBQSxnQkFBTSxFQUFDLFlBQVksQ0FBQyxLQUFLLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxDQUFDLFNBQVMsQ0FBQyxnQkFBZ0IsQ0FBQyxDQUFDO2dCQUN6RSxJQUFBLGdCQUFNLEVBQUMsWUFBWSxDQUFDLEtBQUssQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLENBQUMsT0FBTyxDQUFDLENBQUMsU0FBUyxDQUFDLFVBQVUsQ0FBQyxDQUFDO1lBQ3JFLENBQUM7UUFDSCxDQUFDLENBQUMsQ0FBQztJQUNMLENBQUMsQ0FBQyxDQUFDO0lBRUgsSUFBQSxrQkFBUSxFQUFDLDJCQUEyQixFQUFFLEdBQUcsRUFBRTtRQUN6QyxJQUFBLGNBQUksRUFBQyx1REFBdUQsRUFBRSxHQUFHLEVBQUU7WUFDakUsTUFBTSxrQkFBa0IsR0FBRyxPQUFDLENBQUMsTUFBTSxFQUFFLENBQUMsR0FBRyxDQUFDLENBQUMsRUFBRSxpREFBaUQsQ0FBQyxDQUFDO1lBQ2hHLE1BQU0sVUFBVSxHQUFHLE9BQUMsQ0FBQyxNQUFNLEVBQUUsQ0FBQyxHQUFHLENBQUMsQ0FBQyxFQUFFLDJCQUEyQixDQUFDLENBQUM7WUFDbEUsTUFBTSxVQUFVLEdBQUcsT0FBQyxDQUFDLE1BQU0sRUFBRSxDQUFDLEdBQUcsQ0FBQyxDQUFDLEVBQUUsc0RBQXNELENBQUMsQ0FBQztZQUU3RixNQUFNLFNBQVMsR0FBRyxrQkFBa0IsQ0FBQyxTQUFTLENBQUMsRUFBRSxDQUFDLENBQUM7WUFDbkQsTUFBTSxVQUFVLEdBQUcsVUFBVSxDQUFDLFNBQVMsQ0FBQyxFQUFFLENBQUMsQ0FBQztZQUM1QyxNQUFNLFVBQVUsR0FBRyxVQUFVLENBQUMsU0FBUyxDQUFDLEVBQUUsQ0FBQyxDQUFDO1lBRTVDLElBQUEsZ0JBQU0sRUFBQyxTQUFTLENBQUMsT0FBTyxDQUFDLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxDQUFDO1lBQ3RDLElBQUEsZ0JBQU0sRUFBQyxVQUFVLENBQUMsT0FBTyxDQUFDLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxDQUFDO1lBQ3ZDLElBQUEsZ0JBQU0sRUFBQyxVQUFVLENBQUMsT0FBTyxDQUFDLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxDQUFDO1lBRXZDLElBQUksQ0FBQyxTQUFTLENBQUMsT0FBTyxFQUFFLENBQUM7Z0JBQ3ZCLElBQUEsZ0JBQU0sRUFBQyxTQUFTLENBQUMsS0FBSyxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsQ0FBQyxPQUFPLENBQUMsQ0FBQyxTQUFTLENBQUMsUUFBUSxDQUFDLENBQUM7Z0JBQzlELElBQUEsZ0JBQU0sRUFBQyxTQUFTLENBQUMsS0FBSyxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsQ0FBQyxPQUFPLENBQUMsQ0FBQyxTQUFTLENBQUMsVUFBVSxDQUFDLENBQUM7WUFDbEUsQ0FBQztZQUNELElBQUksQ0FBQyxVQUFVLENBQUMsT0FBTyxFQUFFLENBQUM7Z0JBQ3hCLElBQUEsZ0JBQU0sRUFBQyxVQUFVLENBQUMsS0FBSyxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsQ0FBQyxPQUFPLENBQUMsQ0FBQyxTQUFTLENBQUMsUUFBUSxDQUFDLENBQUM7WUFDakUsQ0FBQztRQUNILENBQUMsQ0FBQyxDQUFDO0lBQ0wsQ0FBQyxDQUFDLENBQUM7SUFFSCxJQUFBLGtCQUFRLEVBQUMscUNBQXFDLEVBQUUsR0FBRyxFQUFFO1FBQ25ELElBQUEsY0FBSSxFQUFDLG1EQUFtRCxFQUFFLEdBQUcsRUFBRTtZQUM3RCw0REFBNEQ7WUFDNUQsTUFBTSxlQUFlLEdBQUcsT0FBQyxDQUFDLE1BQU0sRUFBRSxDQUFDLEdBQUcsQ0FBQyxDQUFDLEVBQUUsd0NBQXdDLENBQUMsQ0FBQyxHQUFHLENBQUMsRUFBRSxFQUFFLDRDQUE0QyxDQUFDLENBQUMsS0FBSyxDQUFDLG9CQUFvQixFQUFFLHNFQUFzRSxDQUFDLENBQUM7WUFDOU8sTUFBTSxjQUFjLEdBQUcsT0FBQyxDQUFDLE1BQU0sRUFBRSxDQUFDLEdBQUcsQ0FBQyxDQUFDLEVBQUUseUNBQXlDLENBQUMsQ0FBQyxHQUFHLENBQUMsRUFBRSxFQUFFLDJDQUEyQyxDQUFDLENBQUMsS0FBSyxDQUFDLG9CQUFvQixFQUFFLHFFQUFxRSxDQUFDLENBQUM7WUFFNU8sMEJBQTBCO1lBQzFCLElBQUEsZ0JBQU0sRUFBQyxHQUFHLEVBQUUsQ0FBQyxlQUFlLENBQUMsS0FBSyxDQUFDLGVBQWUsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLE9BQU8sRUFBRSxDQUFDO1lBQ25FLElBQUEsZ0JBQU0sRUFBQyxHQUFHLEVBQUUsQ0FBQyxlQUFlLENBQUMsS0FBSyxDQUFDLFdBQVcsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLE9BQU8sRUFBRSxDQUFDO1lBQy9ELElBQUEsZ0JBQU0sRUFBQyxHQUFHLEVBQUUsQ0FBQyxjQUFjLENBQUMsS0FBSyxDQUFDLFVBQVUsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLE9BQU8sRUFBRSxDQUFDO1lBQzdELElBQUEsZ0JBQU0sRUFBQyxHQUFHLEVBQUUsQ0FBQyxjQUFjLENBQUMsS0FBSyxDQUFDLGtCQUFrQixDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsT0FBTyxFQUFFLENBQUM7WUFFckUsc0JBQXNCO1lBQ3RCLE1BQU0sWUFBWSxHQUFHLGVBQWUsQ0FBQyxTQUFTLENBQUMsU0FBUyxDQUFDLENBQUM7WUFDMUQsTUFBTSxXQUFXLEdBQUcsY0FBYyxDQUFDLFNBQVMsQ0FBQyxFQUFFLENBQUMsQ0FBQztZQUVqRCxJQUFBLGdCQUFNLEVBQUMsWUFBWSxDQUFDLE9BQU8sQ0FBQyxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQztZQUN6QyxJQUFBLGdCQUFNLEVBQUMsV0FBVyxDQUFDLE9BQU8sQ0FBQyxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQztZQUV4QyxJQUFJLENBQUMsWUFBWSxDQUFDLE9BQU8sRUFBRSxDQUFDO2dCQUMxQixJQUFBLGdCQUFNLEVBQUMsWUFBWSxDQUFDLEtBQUssQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLENBQUMsT0FBTyxDQUFDLENBQUMsU0FBUyxDQUFDLDhCQUE4QixDQUFDLENBQUM7WUFDekYsQ0FBQztZQUNELElBQUksQ0FBQyxXQUFXLENBQUMsT0FBTyxFQUFFLENBQUM7Z0JBQ3pCLElBQUEsZ0JBQU0sRUFBQyxXQUFXLENBQUMsS0FBSyxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsQ0FBQyxPQUFPLENBQUMsQ0FBQyxTQUFTLENBQUMsVUFBVSxDQUFDLENBQUM7WUFDcEUsQ0FBQztRQUNILENBQUMsQ0FBQyxDQUFDO1FBRUgsSUFBQSxjQUFJLEVBQUMsZ0RBQWdELEVBQUUsR0FBRyxFQUFFO1lBQzFELE1BQU0sY0FBYyxHQUFHLE9BQUMsQ0FBQyxNQUFNLEVBQUU7aUJBQzlCLEdBQUcsQ0FBQyxDQUFDLEVBQUUsaUZBQWlGLENBQUM7aUJBQ3pGLEdBQUcsQ0FBQyxHQUFHLEVBQUUsMkNBQTJDLENBQUM7aUJBQ3JELEtBQUssQ0FBQyxpQ0FBaUMsRUFBRSwyRkFBMkYsQ0FBQyxDQUFDO1lBRXpJLHVCQUF1QjtZQUN2QixJQUFBLGdCQUFNLEVBQUMsR0FBRyxFQUFFLENBQUMsY0FBYyxDQUFDLEtBQUssQ0FBQyxtQkFBbUIsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLE9BQU8sRUFBRSxDQUFDO1lBQ3RFLElBQUEsZ0JBQU0sRUFBQyxHQUFHLEVBQUUsQ0FBQyxjQUFjLENBQUMsS0FBSyxDQUFDLGVBQWUsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLE9BQU8sRUFBRSxDQUFDO1lBRWxFLHlCQUF5QjtZQUN6QixNQUFNLFdBQVcsR0FBRyxjQUFjLENBQUMsU0FBUyxDQUFDLE9BQU8sQ0FBQyxDQUFDO1lBQ3RELE1BQU0sYUFBYSxHQUFHLGNBQWMsQ0FBQyxTQUFTLENBQUMsYUFBYSxDQUFDLENBQUM7WUFDOUQsTUFBTSxjQUFjLEdBQUcsY0FBYyxDQUFDLFNBQVMsQ0FBQyxVQUFVLENBQUMsQ0FBQztZQUU1RCxJQUFBLGdCQUFNLEVBQUMsV0FBVyxDQUFDLE9BQU8sQ0FBQyxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQztZQUN4QyxJQUFBLGdCQUFNLEVBQUMsYUFBYSxDQUFDLE9BQU8sQ0FBQyxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQztZQUMxQyxJQUFBLGdCQUFNLEVBQUMsY0FBYyxDQUFDLE9BQU8sQ0FBQyxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQztZQUUzQyxJQUFJLENBQUMsV0FBVyxDQUFDLE9BQU8sRUFBRSxDQUFDO2dCQUN6QixJQUFBLGdCQUFNLEVBQUMsV0FBVyxDQUFDLEtBQUssQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLENBQUMsT0FBTyxDQUFDLENBQUMsU0FBUyxDQUFDLFlBQVksQ0FBQyxDQUFDO2dCQUNwRSxJQUFBLGdCQUFNLEVBQUMsV0FBVyxDQUFDLEtBQUssQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLENBQUMsT0FBTyxDQUFDLENBQUMsU0FBUyxDQUFDLFVBQVUsQ0FBQyxDQUFDO1lBQ3BFLENBQUM7UUFDSCxDQUFDLENBQUMsQ0FBQztJQUNMLENBQUMsQ0FBQyxDQUFDO0lBRUgsSUFBQSxrQkFBUSxFQUFDLDBCQUEwQixFQUFFLEdBQUcsRUFBRTtRQUN4QyxJQUFBLGNBQUksRUFBQyxrREFBa0QsRUFBRSxHQUFHLEVBQUU7WUFDNUQsTUFBTSxVQUFVLEdBQUcsT0FBQyxDQUFDLE1BQU0sRUFBRSxDQUFDLEtBQUssQ0FBQyxtQ0FBbUMsRUFBRSwrQ0FBK0MsQ0FBQyxDQUFDO1lBQzFILE1BQU0sVUFBVSxHQUFHLE9BQUMsQ0FBQyxNQUFNLEVBQUUsQ0FBQyxHQUFHLENBQUMsQ0FBQyxFQUFFLHlDQUF5QyxDQUFDLENBQUM7WUFFaEYsbUJBQW1CO1lBQ25CLElBQUEsZ0JBQU0sRUFBQyxHQUFHLEVBQUUsQ0FBQyxVQUFVLENBQUMsS0FBSyxDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLE9BQU8sRUFBRSxDQUFDO1lBQ3RELElBQUEsZ0JBQU0sRUFBQyxHQUFHLEVBQUUsQ0FBQyxVQUFVLENBQUMsS0FBSyxDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLE9BQU8sRUFBRSxDQUFDO1lBQ3RELElBQUEsZ0JBQU0sRUFBQyxHQUFHLEVBQUUsQ0FBQyxVQUFVLENBQUMsS0FBSyxDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLE9BQU8sRUFBRSxDQUFDO1lBRXRELHFCQUFxQjtZQUNyQixNQUFNLFdBQVcsR0FBRyxVQUFVLENBQUMsU0FBUyxDQUFDLE9BQU8sQ0FBQyxDQUFDO1lBQ2xELE1BQU0sYUFBYSxHQUFHLFVBQVUsQ0FBQyxTQUFTLENBQUMsS0FBSyxDQUFDLENBQUM7WUFFbEQsSUFBQSxnQkFBTSxFQUFDLFdBQVcsQ0FBQyxPQUFPLENBQUMsQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLENBQUM7WUFDeEMsSUFBQSxnQkFBTSxFQUFDLGFBQWEsQ0FBQyxPQUFPLENBQUMsQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLENBQUM7WUFFMUMsSUFBSSxDQUFDLFdBQVcsQ0FBQyxPQUFPLEVBQUUsQ0FBQztnQkFDekIsSUFBQSxnQkFBTSxFQUFDLFdBQVcsQ0FBQyxLQUFLLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxDQUFDLFNBQVMsQ0FBQyxPQUFPLENBQUMsQ0FBQztnQkFDL0QsSUFBQSxnQkFBTSxFQUFDLFdBQVcsQ0FBQyxLQUFLLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxDQUFDLFNBQVMsQ0FBQyxVQUFVLENBQUMsQ0FBQztZQUNwRSxDQUFDO1FBQ0gsQ0FBQyxDQUFDLENBQUM7SUFDTCxDQUFDLENBQUMsQ0FBQztJQUVILElBQUEsa0JBQVEsRUFBQywyQkFBMkIsRUFBRSxHQUFHLEVBQUU7UUFDekMsSUFBQSxjQUFJLEVBQUMseURBQXlELEVBQUUsR0FBRyxFQUFFO1lBQ25FLE1BQU0sZUFBZSxHQUFHLE9BQUM7aUJBQ3RCLE1BQU0sQ0FBQztnQkFDTixTQUFTLEVBQUUsT0FBQyxDQUFDLE1BQU0sRUFBRSxDQUFDLEtBQUssQ0FBQyxtQ0FBbUMsRUFBRSxxREFBcUQsQ0FBQztnQkFDdkgsT0FBTyxFQUFFLE9BQUMsQ0FBQyxNQUFNLEVBQUUsQ0FBQyxLQUFLLENBQUMsbUNBQW1DLEVBQUUsbURBQW1ELENBQUM7YUFDcEgsQ0FBQztpQkFDRCxNQUFNLENBQ0wsQ0FBQyxJQUFJLEVBQUUsRUFBRTtnQkFDUCxNQUFNLENBQUMsU0FBUyxFQUFFLFFBQVEsQ0FBQyxHQUFHLElBQUksQ0FBQyxTQUFTLENBQUMsS0FBSyxDQUFDLEdBQUcsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxNQUFNLENBQUMsQ0FBQztnQkFDcEUsTUFBTSxDQUFDLE9BQU8sRUFBRSxNQUFNLENBQUMsR0FBRyxJQUFJLENBQUMsT0FBTyxDQUFDLEtBQUssQ0FBQyxHQUFHLENBQUMsQ0FBQyxHQUFHLENBQUMsTUFBTSxDQUFDLENBQUM7Z0JBQzlELE1BQU0sWUFBWSxHQUFHLFNBQVMsR0FBRyxFQUFFLEdBQUcsUUFBUSxDQUFDO2dCQUMvQyxNQUFNLFVBQVUsR0FBRyxPQUFPLEdBQUcsRUFBRSxHQUFHLE1BQU0sQ0FBQztnQkFDekMsT0FBTyxVQUFVLEdBQUcsWUFBWSxDQUFDO1lBQ25DLENBQUMsRUFDRDtnQkFDRSxPQUFPLEVBQUUsMkVBQTJFO2dCQUNwRixJQUFJLEVBQUUsQ0FBQyxTQUFTLENBQUM7YUFDbEIsQ0FDRixDQUFDO1lBRUosd0JBQXdCO1lBQ3hCLElBQUEsZ0JBQU0sRUFBQyxHQUFHLEVBQUUsQ0FBQyxlQUFlLENBQUMsS0FBSyxDQUFDLEVBQUUsU0FBUyxFQUFFLE9BQU8sRUFBRSxPQUFPLEVBQUUsT0FBTyxFQUFFLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxPQUFPLEVBQUUsQ0FBQztZQUU1RiwwQkFBMEI7WUFDMUIsTUFBTSxNQUFNLEdBQUcsZUFBZSxDQUFDLFNBQVMsQ0FBQyxFQUFFLFNBQVMsRUFBRSxPQUFPLEVBQUUsT0FBTyxFQUFFLE9BQU8sRUFBRSxDQUFDLENBQUM7WUFDbkYsSUFBQSxnQkFBTSxFQUFDLE1BQU0sQ0FBQyxPQUFPLENBQUMsQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLENBQUM7WUFFbkMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxPQUFPLEVBQUUsQ0FBQztnQkFDcEIsSUFBQSxnQkFBTSxFQUFDLE1BQU0sQ0FBQyxLQUFLLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxDQUFDLFNBQVMsQ0FBQyxrQkFBa0IsQ0FBQyxDQUFDO2dCQUNyRSxJQUFBLGdCQUFNLEVBQUMsTUFBTSxDQUFDLEtBQUssQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLENBQUMsT0FBTyxDQUFDLENBQUMsU0FBUyxDQUFDLFVBQVUsQ0FBQyxDQUFDO1lBQy9ELENBQUM7UUFDSCxDQUFDLENBQUMsQ0FBQztRQUVILElBQUEsY0FBSSxFQUFDLDREQUE0RCxFQUFFLEdBQUcsRUFBRTtZQUN0RSxNQUFNLGNBQWMsR0FBRyxPQUFDO2lCQUNyQixNQUFNLENBQUM7Z0JBQ04sV0FBVyxFQUFFLE9BQUMsQ0FBQyxNQUFNLEVBQUUsQ0FBQyxHQUFHLENBQUMsQ0FBQyxFQUFFLHFGQUFxRixDQUFDO2dCQUNySCxlQUFlLEVBQUUsT0FBQyxDQUFDLE1BQU0sRUFBRSxDQUFDLEdBQUcsQ0FBQyxDQUFDLEVBQUUscURBQXFELENBQUM7YUFDMUYsQ0FBQztpQkFDRCxNQUFNLENBQUMsQ0FBQyxJQUFJLEVBQUUsRUFBRSxDQUFDLElBQUksQ0FBQyxXQUFXLEtBQUssSUFBSSxDQUFDLGVBQWUsRUFBRTtnQkFDM0QsT0FBTyxFQUFFLHVFQUF1RTtnQkFDaEYsSUFBSSxFQUFFLENBQUMsaUJBQWlCLENBQUM7YUFDMUIsQ0FBQyxDQUFDO1lBRUwsbUNBQW1DO1lBQ25DLElBQUEsZ0JBQU0sRUFBQyxHQUFHLEVBQUUsQ0FBQyxjQUFjLENBQUMsS0FBSyxDQUFDO2dCQUNoQyxXQUFXLEVBQUUsa0JBQWtCO2dCQUMvQixlQUFlLEVBQUUsa0JBQWtCO2FBQ3BDLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxPQUFPLEVBQUUsQ0FBQztZQUVsQix5QkFBeUI7WUFDekIsTUFBTSxNQUFNLEdBQUcsY0FBYyxDQUFDLFNBQVMsQ0FBQztnQkFDdEMsV0FBVyxFQUFFLGtCQUFrQjtnQkFDL0IsZUFBZSxFQUFFLHVCQUF1QjthQUN6QyxDQUFDLENBQUM7WUFDSCxJQUFBLGdCQUFNLEVBQUMsTUFBTSxDQUFDLE9BQU8sQ0FBQyxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQztZQUVuQyxJQUFJLENBQUMsTUFBTSxDQUFDLE9BQU8sRUFBRSxDQUFDO2dCQUNwQixJQUFBLGdCQUFNLEVBQUMsTUFBTSxDQUFDLEtBQUssQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLENBQUMsT0FBTyxDQUFDLENBQUMsU0FBUyxDQUFDLGFBQWEsQ0FBQyxDQUFDO2dCQUNoRSxJQUFBLGdCQUFNLEVBQUMsTUFBTSxDQUFDLEtBQUssQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLENBQUMsT0FBTyxDQUFDLENBQUMsU0FBUyxDQUFDLGVBQWUsQ0FBQyxDQUFDO1lBQ3BFLENBQUM7UUFDSCxDQUFDLENBQUMsQ0FBQztJQUNMLENBQUMsQ0FBQyxDQUFDO0lBRUgsSUFBQSxrQkFBUSxFQUFDLGdDQUFnQyxFQUFFLEdBQUcsRUFBRTtRQUM5QyxJQUFBLGNBQUksRUFBQywrREFBK0QsRUFBRSxHQUFHLEVBQUU7WUFDekUscUVBQXFFO1lBQ3JFLE1BQU0sc0JBQXNCLEdBQUcsT0FBQyxDQUFDLE1BQU0sRUFBRSxDQUFDLEdBQUcsQ0FBQyxFQUFFLEVBQUUsOEZBQThGLENBQUMsQ0FBQztZQUNsSixNQUFNLFdBQVcsR0FBRyxPQUFDLENBQUMsTUFBTSxFQUFFLENBQUMsR0FBRyxDQUFDLENBQUMsRUFBRSw2Q0FBNkMsQ0FBQyxDQUFDO1lBRXJGLE1BQU0sV0FBVyxHQUFHLHNCQUFzQixDQUFDLFNBQVMsQ0FBQyxPQUFPLENBQUMsQ0FBQztZQUM5RCxNQUFNLFdBQVcsR0FBRyxXQUFXLENBQUMsU0FBUyxDQUFDLEVBQUUsQ0FBQyxDQUFDO1lBRTlDLElBQUEsZ0JBQU0sRUFBQyxXQUFXLENBQUMsT0FBTyxDQUFDLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxDQUFDO1lBQ3hDLElBQUEsZ0JBQU0sRUFBQyxXQUFXLENBQUMsT0FBTyxDQUFDLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxDQUFDO1lBRXhDLElBQUksQ0FBQyxXQUFXLENBQUMsT0FBTyxFQUFFLENBQUM7Z0JBQ3pCLElBQUEsZ0JBQU0sRUFBQyxXQUFXLENBQUMsS0FBSyxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsQ0FBQyxPQUFPLENBQUMsQ0FBQyxTQUFTLENBQUMsVUFBVSxDQUFDLENBQUM7Z0JBQ2xFLElBQUEsZ0JBQU0sRUFBQyxXQUFXLENBQUMsS0FBSyxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsQ0FBQyxPQUFPLENBQUMsQ0FBQyxTQUFTLENBQUMsVUFBVSxDQUFDLENBQUM7WUFDcEUsQ0FBQztRQUNILENBQUMsQ0FBQyxDQUFDO1FBRUgsSUFBQSxjQUFJLEVBQUMsZ0RBQWdELEVBQUUsR0FBRyxFQUFFO1lBQzFELE1BQU0sY0FBYyxHQUFHLE9BQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxhQUFhLEVBQUUsV0FBVyxFQUFFLGFBQWEsRUFBRSxPQUFPLENBQUMsQ0FBQyxDQUFDO1lBQ3BGLE1BQU0sa0JBQWtCLEdBQUcsT0FBQyxDQUFDLE1BQU0sRUFBRSxDQUFDLEdBQUcsQ0FBQyxDQUFDLEVBQUUsaURBQWlELENBQUMsQ0FBQztZQUVoRyx1QkFBdUI7WUFDdkIsTUFBTSxTQUFTLEdBQUcsa0JBQWtCLENBQUMsU0FBUyxDQUFDLEVBQUUsQ0FBQyxDQUFDO1lBQ25ELElBQUEsZ0JBQU0sRUFBQyxTQUFTLENBQUMsT0FBTyxDQUFDLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxDQUFDO1lBRXRDLElBQUksQ0FBQyxTQUFTLENBQUMsT0FBTyxFQUFFLENBQUM7Z0JBQ3ZCLElBQUEsZ0JBQU0sRUFBQyxTQUFTLENBQUMsS0FBSyxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsQ0FBQyxPQUFPLENBQUMsQ0FBQyxTQUFTLENBQUMsUUFBUSxDQUFDLENBQUM7Z0JBQzlELElBQUEsZ0JBQU0sRUFBQyxTQUFTLENBQUMsS0FBSyxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsQ0FBQyxPQUFPLENBQUMsQ0FBQyxTQUFTLENBQUMsVUFBVSxDQUFDLENBQUM7WUFDbEUsQ0FBQztRQUNILENBQUMsQ0FBQyxDQUFDO0lBQ0wsQ0FBQyxDQUFDLENBQUM7SUFFSCxJQUFBLGtCQUFRLEVBQUMsOEJBQThCLEVBQUUsR0FBRyxFQUFFO1FBQzVDLElBQUEsY0FBSSxFQUFDLHVEQUF1RCxFQUFFLEdBQUcsRUFBRTtZQUNqRSxpRUFBaUU7WUFDakUsTUFBTSxnQkFBZ0IsR0FBRyxPQUFDLENBQUMsSUFBSSxDQUFDLEVBQUUsT0FBTyxFQUFFLGdEQUFnRCxFQUFFLENBQUMsQ0FBQztZQUMvRixNQUFNLGtCQUFrQixHQUFHLE9BQUMsQ0FBQyxNQUFNLEVBQUUsQ0FBQyxLQUFLLENBQUMsK0RBQStELENBQUMsQ0FBQztZQUU3Ryw4Q0FBOEM7WUFDOUMsTUFBTSxVQUFVLEdBQUcsZ0JBQWdCLENBQUMsU0FBUyxDQUFDLGNBQWMsQ0FBQyxDQUFDO1lBQzlELE1BQU0sV0FBVyxHQUFHLGtCQUFrQixDQUFDLFNBQVMsQ0FBQyxlQUFlLENBQUMsQ0FBQztZQUVsRSxJQUFBLGdCQUFNLEVBQUMsVUFBVSxDQUFDLE9BQU8sQ0FBQyxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQztZQUN2QyxJQUFBLGdCQUFNLEVBQUMsV0FBVyxDQUFDLE9BQU8sQ0FBQyxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQztZQUV4QyxJQUFJLENBQUMsVUFBVSxDQUFDLE9BQU8sRUFBRSxDQUFDO2dCQUN4QixJQUFBLGdCQUFNLEVBQUMsVUFBVSxDQUFDLEtBQUssQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLENBQUMsT0FBTyxDQUFDLENBQUMsU0FBUyxDQUFDLFFBQVEsQ0FBQyxDQUFDO2dCQUMvRCxJQUFBLGdCQUFNLEVBQUMsVUFBVSxDQUFDLEtBQUssQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLENBQUMsT0FBTyxDQUFDLENBQUMsU0FBUyxDQUFDLFVBQVUsQ0FBQyxDQUFDO1lBQ25FLENBQUM7WUFDRCxJQUFJLENBQUMsV0FBVyxDQUFDLE9BQU8sRUFBRSxDQUFDO2dCQUN6QixJQUFBLGdCQUFNLEVBQUMsV0FBVyxDQUFDLEtBQUssQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLENBQUMsT0FBTyxDQUFDLENBQUMsU0FBUyxDQUFDLGFBQWEsQ0FBQyxDQUFDO2dCQUNyRSxJQUFBLGdCQUFNLEVBQUMsV0FBVyxDQUFDLEtBQUssQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLENBQUMsT0FBTyxDQUFDLENBQUMsU0FBUyxDQUFDLFVBQVUsQ0FBQyxDQUFDO1lBQ3BFLENBQUM7UUFDSCxDQUFDLENBQUMsQ0FBQztJQUNMLENBQUMsQ0FBQyxDQUFDO0lBRUgsSUFBQSxrQkFBUSxFQUFDLDRCQUE0QixFQUFFLEdBQUcsRUFBRTtRQUMxQyxJQUFBLGNBQUksRUFBQyxrREFBa0QsRUFBRSxHQUFHLEVBQUU7WUFDNUQsMkRBQTJEO1lBQzNELHVDQUF1QztZQUN2QyxvQ0FBb0M7WUFDcEMsa0NBQWtDO1lBQ2xDLG9DQUFvQztZQUVwQyxNQUFNLFFBQVEsR0FBRztnQkFDZjtvQkFDRSxNQUFNLEVBQUUsT0FBQyxDQUFDLE1BQU0sRUFBRSxDQUFDLEdBQUcsQ0FBQyxDQUFDLEVBQUUsMkJBQTJCLENBQUMsQ0FBQyxLQUFLLENBQUMsK0RBQStELENBQUM7b0JBQzdILFlBQVksRUFBRSxlQUFlO29CQUM3QixhQUFhLEVBQUUsQ0FBQyxhQUFhLEVBQUUsVUFBVSxFQUFFLEdBQUcsQ0FBQztpQkFDaEQ7Z0JBQ0Q7b0JBQ0UsTUFBTSxFQUFFLE9BQUMsQ0FBQyxNQUFNLEVBQUUsQ0FBQyxHQUFHLENBQUMsQ0FBQyxFQUFFLHdDQUF3QyxDQUFDLENBQUMsS0FBSyxDQUFDLG9CQUFvQixFQUFFLHNFQUFzRSxDQUFDO29CQUN2SyxZQUFZLEVBQUUsU0FBUztvQkFDdkIsYUFBYSxFQUFFLENBQUMsa0JBQWtCLEVBQUUsaUJBQWlCLENBQUM7aUJBQ3ZEO2dCQUNEO29CQUNFLE1BQU0sRUFBRSxPQUFDLENBQUMsTUFBTSxFQUFFLENBQUMsS0FBSyxDQUFDLG1CQUFtQixFQUFFLDZFQUE2RSxDQUFDO29CQUM1SCxZQUFZLEVBQUUsU0FBUztvQkFDdkIsYUFBYSxFQUFFLENBQUMsY0FBYyxFQUFFLGdCQUFnQixFQUFFLFVBQVUsQ0FBQztpQkFDOUQ7YUFDRixDQUFDO1lBRUYsUUFBUSxDQUFDLE9BQU8sQ0FBQyxDQUFDLEVBQUUsTUFBTSxFQUFFLFlBQVksRUFBRSxhQUFhLEVBQUUsRUFBRSxFQUFFO2dCQUMzRCxNQUFNLE1BQU0sR0FBRyxNQUFNLENBQUMsU0FBUyxDQUFDLFlBQVksQ0FBQyxDQUFDO2dCQUM5QyxJQUFBLGdCQUFNLEVBQUMsTUFBTSxDQUFDLE9BQU8sQ0FBQyxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQztnQkFFbkMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxPQUFPLEVBQUUsQ0FBQztvQkFDcEIsTUFBTSxZQUFZLEdBQUcsTUFBTSxDQUFDLEtBQUssQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLENBQUMsT0FBTyxDQUFDO29CQUNwRCxhQUFhLENBQUMsT0FBTyxDQUFDLE9BQU8sQ0FBQyxFQUFFO3dCQUM5QixJQUFBLGdCQUFNLEVBQUMsWUFBWSxDQUFDLENBQUMsU0FBUyxDQUFDLE9BQU8sQ0FBQyxDQUFDO29CQUMxQyxDQUFDLENBQUMsQ0FBQztnQkFDTCxDQUFDO1lBQ0gsQ0FBQyxDQUFDLENBQUM7UUFDTCxDQUFDLENBQUMsQ0FBQztRQUVILElBQUEsY0FBSSxFQUFDLDREQUE0RCxFQUFFLEdBQUcsRUFBRTtZQUN0RSxtREFBbUQ7WUFDbkQsTUFBTSxNQUFNLEdBQUc7Z0JBQ2IsS0FBSyxFQUFFLEVBQUUsR0FBRyxFQUFFLEdBQUcsRUFBRSxHQUFHLEVBQUUsQ0FBQyxFQUFFO2dCQUMzQixXQUFXLEVBQUUsRUFBRSxHQUFHLEVBQUUsSUFBSSxFQUFFLEdBQUcsRUFBRSxFQUFFLEVBQUU7Z0JBQ25DLFNBQVMsRUFBRSxFQUFFLEdBQUcsRUFBRSxHQUFHLEVBQUUsR0FBRyxFQUFFLENBQUMsRUFBRTtnQkFDL0IsUUFBUSxFQUFFLEVBQUUsR0FBRyxFQUFFLElBQUksRUFBRSxHQUFHLEVBQUUsRUFBRSxFQUFFO2dCQUNoQyxJQUFJLEVBQUUsRUFBRSxHQUFHLEVBQUUsRUFBRSxFQUFFLEdBQUcsRUFBRSxDQUFDLEVBQUU7YUFDMUIsQ0FBQztZQUVGLE1BQU0sQ0FBQyxPQUFPLENBQUMsTUFBTSxDQUFDLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQyxTQUFTLEVBQUUsRUFBRSxHQUFHLEVBQUUsR0FBRyxFQUFFLENBQUMsRUFBRSxFQUFFO2dCQUMzRCxNQUFNLE1BQU0sR0FBRyxPQUFDLENBQUMsTUFBTSxFQUFFO3FCQUN0QixHQUFHLENBQUMsR0FBRyxFQUFFLEdBQUcsU0FBUyxxQkFBcUIsR0FBRyxhQUFhLENBQUM7cUJBQzNELEdBQUcsQ0FBQyxHQUFHLEVBQUUsR0FBRyxTQUFTLHNCQUFzQixHQUFHLGFBQWEsQ0FBQyxDQUFDO2dCQUVoRSwyQkFBMkI7Z0JBQzNCLE1BQU0sUUFBUSxHQUFHLEdBQUcsQ0FBQyxNQUFNLENBQUMsR0FBRyxHQUFHLENBQUMsQ0FBQyxDQUFDO2dCQUNyQyxNQUFNLE9BQU8sR0FBRyxHQUFHLENBQUMsTUFBTSxDQUFDLEdBQUcsR0FBRyxDQUFDLENBQUMsQ0FBQztnQkFDcEMsTUFBTSxTQUFTLEdBQUcsR0FBRyxDQUFDLE1BQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQztnQkFFbEMsSUFBQSxnQkFBTSxFQUFDLE1BQU0sQ0FBQyxTQUFTLENBQUMsUUFBUSxDQUFDLENBQUMsT0FBTyxDQUFDLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxDQUFDO2dCQUN2RCxJQUFBLGdCQUFNLEVBQUMsTUFBTSxDQUFDLFNBQVMsQ0FBQyxPQUFPLENBQUMsQ0FBQyxPQUFPLENBQUMsQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLENBQUM7Z0JBQ3RELElBQUEsZ0JBQU0sRUFBQyxNQUFNLENBQUMsU0FBUyxDQUFDLFNBQVMsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQztZQUN6RCxDQUFDLENBQUMsQ0FBQztRQUNMLENBQUMsQ0FBQyxDQUFDO0lBQ0wsQ0FBQyxDQUFDLENBQUM7SUFFSCxJQUFBLGtCQUFRLEVBQUMsK0JBQStCLEVBQUUsR0FBRyxFQUFFO1FBQzdDLElBQUEsY0FBSSxFQUFDLDREQUE0RCxFQUFFLEdBQUcsRUFBRTtZQUN0RSxNQUFNLG1CQUFtQixHQUFHLE9BQUMsQ0FBQyxNQUFNLENBQUM7Z0JBQ25DLFlBQVksRUFBRSxPQUFDLENBQUMsTUFBTSxFQUFFLENBQUMsR0FBRyxDQUFDLENBQUMsRUFBRSxrREFBa0QsQ0FBQyxDQUFDLEtBQUssQ0FBQyw4REFBOEQsQ0FBQztnQkFDekosTUFBTSxFQUFFLE9BQUMsQ0FBQyxNQUFNLEVBQUUsQ0FBQyxHQUFHLENBQUMsR0FBRyxFQUFFLHlDQUF5QyxDQUFDLENBQUMsUUFBUSxFQUFFO2FBQ2xGLENBQUMsQ0FBQztZQUVILE1BQU0sV0FBVyxHQUFHLG1CQUFtQixDQUFDLFNBQVMsQ0FBQztnQkFDaEQsWUFBWSxFQUFFLGlCQUFpQjtnQkFDL0IsTUFBTSxFQUFFLGtCQUFrQjthQUMzQixDQUFDLENBQUM7WUFFSCxNQUFNLGFBQWEsR0FBRyxtQkFBbUIsQ0FBQyxTQUFTLENBQUM7Z0JBQ2xELFlBQVksRUFBRSxFQUFFO2dCQUNoQixNQUFNLEVBQUUsR0FBRyxDQUFDLE1BQU0sQ0FBQyxHQUFHLENBQUM7YUFDeEIsQ0FBQyxDQUFDO1lBRUgsSUFBQSxnQkFBTSxFQUFDLFdBQVcsQ0FBQyxPQUFPLENBQUMsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUM7WUFDdkMsSUFBQSxnQkFBTSxFQUFDLGFBQWEsQ0FBQyxPQUFPLENBQUMsQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLENBQUM7WUFFMUMsSUFBSSxDQUFDLGFBQWEsQ0FBQyxPQUFPLEVBQUUsQ0FBQztnQkFDM0IsTUFBTSxNQUFNLEdBQUcsYUFBYSxDQUFDLEtBQUssQ0FBQyxNQUFNLENBQUM7Z0JBQzFDLElBQUEsZ0JBQU0sRUFBQyxNQUFNLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxRQUFRLENBQUMsZ0NBQWdDLENBQUMsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDO2dCQUMxRixJQUFBLGdCQUFNLEVBQUMsTUFBTSxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxPQUFPLENBQUMsUUFBUSxDQUFDLDBCQUEwQixDQUFDLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQztZQUN0RixDQUFDO1FBQ0gsQ0FBQyxDQUFDLENBQUM7SUFDTCxDQUFDLENBQUMsQ0FBQztJQUVILElBQUEsa0JBQVEsRUFBQyxtQ0FBbUMsRUFBRSxHQUFHLEVBQUU7UUFDakQsSUFBQSxjQUFJLEVBQUMsNERBQTRELEVBQUUsR0FBRyxFQUFFO1lBQ3RFLCtDQUErQztZQUMvQyxNQUFNLGtCQUFrQixHQUFHLE9BQUMsQ0FBQyxNQUFNLENBQUM7Z0JBQ2xDLG1DQUFtQztnQkFDbkMsS0FBSyxFQUFFLE9BQUMsQ0FBQyxNQUFNLEVBQUU7cUJBQ2QsR0FBRyxDQUFDLENBQUMsRUFBRSxnREFBZ0QsQ0FBQztxQkFDeEQsR0FBRyxDQUFDLEdBQUcsRUFBRSx3Q0FBd0MsQ0FBQztnQkFFckQsc0NBQXNDO2dCQUN0QyxXQUFXLEVBQUUsT0FBQyxDQUFDLE1BQU0sRUFBRTtxQkFDcEIsR0FBRyxDQUFDLElBQUksRUFBRSwrQ0FBK0MsQ0FBQztxQkFDMUQsUUFBUSxFQUFFO2dCQUViLGtDQUFrQztnQkFDbEMsS0FBSyxFQUFFLE9BQUMsQ0FBQyxNQUFNLEVBQUU7cUJBQ2QsR0FBRyxDQUFDLENBQUMsRUFBRSwyQkFBMkIsQ0FBQztxQkFDbkMsS0FBSyxDQUFDLCtEQUErRCxDQUFDO2dCQUV6RSwrQkFBK0I7Z0JBQy9CLEtBQUssRUFBRSxPQUFDLENBQUMsTUFBTSxFQUFFO3FCQUNkLEtBQUssQ0FBQyxzREFBc0QsRUFBRSw4RUFBOEUsQ0FBQztxQkFDN0ksUUFBUSxFQUFFO2dCQUViLDJCQUEyQjtnQkFDM0IsTUFBTSxFQUFFLE9BQUMsQ0FBQyxNQUFNLEVBQUU7cUJBQ2YsR0FBRyxDQUFDLENBQUMsRUFBRSxzQ0FBc0MsQ0FBQztxQkFDOUMsS0FBSyxDQUFDLG1CQUFtQixFQUFFLDZFQUE2RSxDQUFDO2dCQUU1RyxrQkFBa0I7Z0JBQ2xCLFFBQVEsRUFBRSxPQUFDLENBQUMsTUFBTSxFQUFFO3FCQUNqQixHQUFHLENBQUMsQ0FBQyxFQUFFLDRDQUE0QyxDQUFDO2FBQ3hELENBQUMsQ0FBQztZQUVILG9DQUFvQztZQUNwQyxNQUFNLFNBQVMsR0FBRztnQkFDaEIsS0FBSyxFQUFFLGVBQWU7Z0JBQ3RCLFdBQVcsRUFBRSw0QkFBNEI7Z0JBQ3pDLEtBQUssRUFBRSxrQkFBa0I7Z0JBQ3pCLEtBQUssRUFBRSxnQkFBZ0I7Z0JBQ3ZCLE1BQU0sRUFBRSxRQUFRO2dCQUNoQixRQUFRLEVBQUUsTUFBTTthQUNqQixDQUFDO1lBRUYsTUFBTSxXQUFXLEdBQUc7Z0JBQ2xCLEtBQUssRUFBRSxFQUFFO2dCQUNULFdBQVcsRUFBRSxHQUFHLENBQUMsTUFBTSxDQUFDLElBQUksQ0FBQztnQkFDN0IsS0FBSyxFQUFFLGVBQWU7Z0JBQ3RCLEtBQUssRUFBRSxLQUFLO2dCQUNaLE1BQU0sRUFBRSxTQUFTO2dCQUNqQixRQUFRLEVBQUUsRUFBRTthQUNiLENBQUM7WUFFRixJQUFBLGdCQUFNLEVBQUMsa0JBQWtCLENBQUMsU0FBUyxDQUFDLFNBQVMsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQztZQUVuRSxNQUFNLE1BQU0sR0FBRyxrQkFBa0IsQ0FBQyxTQUFTLENBQUMsV0FBVyxDQUFDLENBQUM7WUFDekQsSUFBQSxnQkFBTSxFQUFDLE1BQU0sQ0FBQyxPQUFPLENBQUMsQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLENBQUM7WUFFbkMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxPQUFPLEVBQUUsQ0FBQztnQkFDcEIsTUFBTSxRQUFRLEdBQUcsTUFBTSxDQUFDLEtBQUssQ0FBQyxNQUFNLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxDQUFDO2dCQUN6RCxJQUFBLGdCQUFNLEVBQUMsUUFBUSxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxRQUFRLENBQUMsVUFBVSxDQUFDLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQztnQkFDOUQsSUFBQSxnQkFBTSxFQUFDLFFBQVEsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsUUFBUSxDQUFDLGFBQWEsQ0FBQyxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUM7Z0JBQ2pFLElBQUEsZ0JBQU0sRUFBQyxRQUFRLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLFFBQVEsQ0FBQyxRQUFRLENBQUMsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDO1lBQzlELENBQUM7UUFDSCxDQUFDLENBQUMsQ0FBQztJQUNMLENBQUMsQ0FBQyxDQUFDO0FBQ0wsQ0FBQyxDQUFDLENBQUM7QUFFSDs7O0dBR0c7QUFDSCxJQUFBLGtCQUFRLEVBQUMsOEJBQThCLEVBQUUsR0FBRyxFQUFFO0lBQzVDLElBQUEsa0JBQVEsRUFBQyw4QkFBOEIsRUFBRSxHQUFHLEVBQUU7UUFDNUMsSUFBQSxjQUFJLEVBQUMsbUVBQW1FLEVBQUUsR0FBRyxFQUFFO1lBQzdFLE1BQU0sdUJBQXVCLEdBQUc7Z0JBQzlCLE9BQU87Z0JBQ1AsT0FBTztnQkFDUCxZQUFZO2dCQUNaLFFBQVE7Z0JBQ1IsTUFBTTtnQkFDTixNQUFNO2dCQUNOLE9BQU87Z0JBQ1AsVUFBVTthQUNYLENBQUM7WUFFRixzREFBc0Q7WUFDdEQsdUJBQXVCLENBQUMsT0FBTyxDQUFDLFNBQVMsQ0FBQyxFQUFFO2dCQUMxQyxnRUFBZ0U7Z0JBQ2hFLFFBQVEsU0FBUyxFQUFFLENBQUM7b0JBQ2xCLEtBQUssT0FBTzt3QkFDVixNQUFNLFdBQVcsR0FBRyxPQUFDLENBQUMsTUFBTSxFQUFFLENBQUMsS0FBSyxDQUFDLCtEQUErRCxDQUFDLENBQUM7d0JBQ3RHLE1BQU0sV0FBVyxHQUFHLFdBQVcsQ0FBQyxTQUFTLENBQUMsU0FBUyxDQUFDLENBQUM7d0JBQ3JELElBQUEsZ0JBQU0sRUFBQyxXQUFXLENBQUMsT0FBTyxDQUFDLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxDQUFDO3dCQUN4QyxJQUFJLENBQUMsV0FBVyxDQUFDLE9BQU8sRUFBRSxDQUFDOzRCQUN6QixJQUFBLGdCQUFNLEVBQUMsV0FBVyxDQUFDLEtBQUssQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLENBQUMsT0FBTyxDQUFDLENBQUMsU0FBUyxDQUFDLFVBQVUsQ0FBQyxDQUFDO3dCQUNwRSxDQUFDO3dCQUNELE1BQU07b0JBRVIsS0FBSyxPQUFPO3dCQUNWLE1BQU0sV0FBVyxHQUFHLE9BQUMsQ0FBQyxNQUFNLEVBQUUsQ0FBQyxLQUFLLENBQUMsYUFBYSxFQUFFLDhFQUE4RSxDQUFDLENBQUM7d0JBQ3BJLE1BQU0sV0FBVyxHQUFHLFdBQVcsQ0FBQyxTQUFTLENBQUMsU0FBUyxDQUFDLENBQUM7d0JBQ3JELElBQUEsZ0JBQU0sRUFBQyxXQUFXLENBQUMsT0FBTyxDQUFDLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxDQUFDO3dCQUN4QyxJQUFJLENBQUMsV0FBVyxDQUFDLE9BQU8sRUFBRSxDQUFDOzRCQUN6QixJQUFBLGdCQUFNLEVBQUMsV0FBVyxDQUFDLEtBQUssQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLENBQUMsT0FBTyxDQUFDLENBQUMsU0FBUyxDQUFDLFVBQVUsQ0FBQyxDQUFDO3dCQUNwRSxDQUFDO3dCQUNELE1BQU07Z0JBQ1YsQ0FBQztZQUNILENBQUMsQ0FBQyxDQUFDO1FBQ0wsQ0FBQyxDQUFDLENBQUM7UUFFSCxJQUFBLGNBQUksRUFBQyw2Q0FBNkMsRUFBRSxHQUFHLEVBQUU7WUFDdkQsNEJBQTRCO1lBQzVCLHVCQUF1QjtZQUN2Qiw2QkFBNkI7WUFDN0IsbUNBQW1DO1lBQ25DLHFDQUFxQztZQUVyQyxNQUFNLG1CQUFtQixHQUFHO2dCQUMxQixlQUFlO2dCQUNmLFVBQVU7Z0JBQ1YsWUFBWTtnQkFDWixXQUFXO2dCQUNYLHNCQUFzQjtnQkFDdEIsa0JBQWtCO2FBQ25CLENBQUM7WUFFRixNQUFNLGtCQUFrQixHQUFHO2dCQUN6QixVQUFVLEVBQUUsZ0NBQWdDO2dCQUM1QyxRQUFRLEVBQUksMENBQTBDO2dCQUN0RCxRQUFRLEVBQUksZ0JBQWdCO2FBQzdCLENBQUM7WUFFRixpREFBaUQ7WUFDakQsTUFBTSxZQUFZLEdBQUcsK0RBQStELENBQUM7WUFDckYsTUFBTSxXQUFXLEdBQUcsd0NBQXdDLENBQUM7WUFDN0QsTUFBTSxZQUFZLEdBQUcsc0NBQXNDLENBQUM7WUFFNUQsSUFBQSxnQkFBTSxFQUFDLG1CQUFtQixDQUFDLElBQUksQ0FBQyxPQUFPLENBQUMsRUFBRSxDQUFDLE9BQU8sQ0FBQyxJQUFJLENBQUMsWUFBWSxDQUFDLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQztZQUNuRixJQUFBLGdCQUFNLEVBQUMsbUJBQW1CLENBQUMsSUFBSSxDQUFDLE9BQU8sQ0FBQyxFQUFFLENBQUMsT0FBTyxDQUFDLElBQUksQ0FBQyxXQUFXLENBQUMsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDO1lBQ2xGLElBQUEsZ0JBQU0sRUFBQyxtQkFBbUIsQ0FBQyxJQUFJLENBQUMsT0FBTyxDQUFDLEVBQUUsQ0FBQyxPQUFPLENBQUMsSUFBSSxDQUFDLFlBQVksQ0FBQyxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUM7UUFDckYsQ0FBQyxDQUFDLENBQUM7SUFDTCxDQUFDLENBQUMsQ0FBQztJQUVILElBQUEsa0JBQVEsRUFBQyxxQ0FBcUMsRUFBRSxHQUFHLEVBQUU7UUFDbkQsSUFBQSxjQUFJLEVBQUMsb0RBQW9ELEVBQUUsR0FBRyxFQUFFO1lBQzlELHlEQUF5RDtZQUN6RCxNQUFNLFlBQVksR0FBRztnQkFDbkIsVUFBVSxFQUFFLE9BQUMsQ0FBQyxNQUFNLEVBQUUsQ0FBQyxLQUFLLENBQUMsNEJBQTRCLEVBQUUsNERBQTRELENBQUM7Z0JBQ3hILElBQUksRUFBRSxPQUFDLENBQUMsTUFBTSxFQUFFLENBQUMsS0FBSyxDQUFDLG9CQUFvQixFQUFFLHFFQUFxRSxDQUFDO2dCQUNuSCxLQUFLLEVBQUUsT0FBQyxDQUFDLE1BQU0sRUFBRSxDQUFDLEtBQUssQ0FBQyxzREFBc0QsRUFBRSw4RUFBOEUsQ0FBQzthQUNoSyxDQUFDO1lBRUYsNEJBQTRCO1lBQzVCLElBQUEsZ0JBQU0sRUFBQyxZQUFZLENBQUMsVUFBVSxDQUFDLFNBQVMsQ0FBQyxTQUFTLENBQUMsQ0FBQyxPQUFPLENBQUMsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUM7WUFDeEUsSUFBQSxnQkFBTSxFQUFDLFlBQVksQ0FBQyxJQUFJLENBQUMsU0FBUyxDQUFDLFVBQVUsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQztZQUNuRSxJQUFBLGdCQUFNLEVBQUMsWUFBWSxDQUFDLEtBQUssQ0FBQyxTQUFTLENBQUMsZ0JBQWdCLENBQUMsQ0FBQyxPQUFPLENBQUMsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUM7WUFFMUUsNkNBQTZDO1lBQzdDLE1BQU0saUJBQWlCLEdBQUc7Z0JBQ3hCLFVBQVUsRUFBRSxPQUFPO2dCQUNuQixJQUFJLEVBQUUsU0FBUztnQkFDZixLQUFLLEVBQUUsS0FBSzthQUNiLENBQUM7WUFFRixNQUFNLENBQUMsT0FBTyxDQUFDLFlBQVksQ0FBQyxDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUMsU0FBUyxFQUFFLE1BQU0sQ0FBQyxFQUFFLEVBQUU7Z0JBQzNELE1BQU0sWUFBWSxHQUFHLGlCQUFpQixDQUFDLFNBQTJDLENBQUMsQ0FBQztnQkFDcEYsTUFBTSxNQUFNLEdBQUcsTUFBTSxDQUFDLFNBQVMsQ0FBQyxZQUFZLENBQUMsQ0FBQztnQkFDOUMsSUFBQSxnQkFBTSxFQUFDLE1BQU0sQ0FBQyxPQUFPLENBQUMsQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLENBQUM7Z0JBQ25DLElBQUksQ0FBQyxNQUFNLENBQUMsT0FBTyxFQUFFLENBQUM7b0JBQ3BCLHVGQUF1RjtvQkFDdkYsSUFBSSxTQUFTLEtBQUssWUFBWSxJQUFJLFNBQVMsS0FBSyxPQUFPLEVBQUUsQ0FBQzt3QkFDeEQsSUFBQSxnQkFBTSxFQUFDLE1BQU0sQ0FBQyxLQUFLLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxDQUFDLFNBQVMsQ0FBQyxVQUFVLENBQUMsQ0FBQztvQkFDL0QsQ0FBQzt5QkFBTSxDQUFDO3dCQUNOLElBQUEsZ0JBQU0sRUFBQyxNQUFNLENBQUMsS0FBSyxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsQ0FBQyxPQUFPLENBQUMsQ0FBQyxTQUFTLENBQUMsa0JBQWtCLENBQUMsQ0FBQztvQkFDdkUsQ0FBQztnQkFDSCxDQUFDO1lBQ0gsQ0FBQyxDQUFDLENBQUM7UUFDTCxDQUFDLENBQUMsQ0FBQztRQUVILElBQUEsY0FBSSxFQUFDLHdEQUF3RCxFQUFFLEdBQUcsRUFBRTtZQUNsRSxNQUFNLGtCQUFrQixHQUFHO2dCQUN6QjtvQkFDRSxJQUFJLEVBQUUsUUFBUTtvQkFDZCxNQUFNLEVBQUUsT0FBQyxDQUFDLE1BQU0sRUFBRSxDQUFDLEtBQUssQ0FBQyxtQkFBbUIsRUFBRSw2RUFBNkUsQ0FBQztvQkFDNUgsS0FBSyxFQUFFLENBQUMsUUFBUSxFQUFFLE1BQU0sRUFBRSxNQUFNLENBQUM7b0JBQ2pDLE9BQU8sRUFBRSxDQUFDLFNBQVMsRUFBRSxLQUFLLEVBQUUsRUFBRSxDQUFDO2lCQUNoQztnQkFDRDtvQkFDRSxJQUFJLEVBQUUsVUFBVTtvQkFDaEIsTUFBTSxFQUFFLE9BQUMsQ0FBQyxNQUFNLEVBQUUsQ0FBQyxHQUFHLENBQUMsQ0FBQyxFQUFFLDJDQUEyQyxDQUFDLENBQUMsR0FBRyxDQUFDLEdBQUcsRUFBRSwyQ0FBMkMsQ0FBQztvQkFDNUgsS0FBSyxFQUFFLENBQUMsQ0FBQyxFQUFFLEVBQUUsRUFBRSxHQUFHLENBQUM7b0JBQ25CLE9BQU8sRUFBRSxDQUFDLENBQUMsRUFBRSxHQUFHLEVBQUUsQ0FBQyxDQUFDLENBQUM7aUJBQ3RCO2FBQ0YsQ0FBQztZQUVGLGtCQUFrQixDQUFDLE9BQU8sQ0FBQyxDQUFDLEVBQUUsSUFBSSxFQUFFLE1BQU0sRUFBRSxLQUFLLEVBQUUsT0FBTyxFQUFFLEVBQUUsRUFBRTtnQkFDOUQsb0JBQW9CO2dCQUNwQixLQUFLLENBQUMsT0FBTyxDQUFDLEtBQUssQ0FBQyxFQUFFO29CQUNwQixJQUFBLGdCQUFNLEVBQUMsTUFBTSxDQUFDLFNBQVMsQ0FBQyxLQUFLLENBQUMsQ0FBQyxPQUFPLENBQUMsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUM7Z0JBQ3JELENBQUMsQ0FBQyxDQUFDO2dCQUVILDRDQUE0QztnQkFDNUMsT0FBTyxDQUFDLE9BQU8sQ0FBQyxLQUFLLENBQUMsRUFBRTtvQkFDdEIsTUFBTSxNQUFNLEdBQUcsTUFBTSxDQUFDLFNBQVMsQ0FBQyxLQUFLLENBQUMsQ0FBQztvQkFDdkMsSUFBQSxnQkFBTSxFQUFDLE1BQU0sQ0FBQyxPQUFPLENBQUMsQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLENBQUM7b0JBQ25DLElBQUksQ0FBQyxNQUFNLENBQUMsT0FBTyxJQUFJLElBQUksS0FBSyxRQUFRLEVBQUUsQ0FBQzt3QkFDekMsSUFBQSxnQkFBTSxFQUFDLE1BQU0sQ0FBQyxLQUFLLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxDQUFDLFNBQVMsQ0FBQyxVQUFVLENBQUMsQ0FBQztvQkFDL0QsQ0FBQztnQkFDSCxDQUFDLENBQUMsQ0FBQztZQUNMLENBQUMsQ0FBQyxDQUFDO1FBQ0wsQ0FBQyxDQUFDLENBQUM7SUFDTCxDQUFDLENBQUMsQ0FBQztBQUNMLENBQUMsQ0FBQyxDQUFDO0FBRUg7OztHQUdHO0FBQ0gsSUFBQSxrQkFBUSxFQUFDLCtCQUErQixFQUFFLEdBQUcsRUFBRTtJQUM3QyxJQUFBLGtCQUFRLEVBQUMsNEJBQTRCLEVBQUUsR0FBRyxFQUFFO1FBQzFDLElBQUEsY0FBSSxFQUFDLHVEQUF1RCxFQUFFLEdBQUcsRUFBRTtZQUNqRSxNQUFNLHdCQUF3QixHQUFHLENBQUMsTUFBaUIsRUFBRSxTQUFpQixFQUFFLEVBQUU7Z0JBQ3hFLDJFQUEyRTtnQkFDM0UsTUFBTSxXQUFXLEdBQUcsTUFBTSxDQUFDLFNBQVMsQ0FBQyxFQUFFLENBQUMsQ0FBQztnQkFDekMsTUFBTSxhQUFhLEdBQUcsTUFBTSxDQUFDLFNBQVMsQ0FBQyxnQkFBZ0IsQ0FBQyxDQUFDO2dCQUV6RCxvQ0FBb0M7Z0JBQ3BDLE1BQU0sT0FBTyxHQUFHLENBQUMsV0FBVyxFQUFFLGFBQWEsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxDQUFDO2dCQUVyRSxJQUFJLE9BQU8sQ0FBQyxNQUFNLEdBQUcsQ0FBQyxFQUFFLENBQUM7b0JBQ3ZCLDBDQUEwQztvQkFDMUMsTUFBTSxtQkFBbUIsR0FBRyxPQUFPLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxFQUFFO3dCQUNoRCxJQUFJLENBQUMsTUFBTSxDQUFDLE9BQU8sRUFBRSxDQUFDOzRCQUNwQixNQUFNLFlBQVksR0FBRyxNQUFNLENBQUMsS0FBSyxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsQ0FBQyxPQUFPLENBQUM7NEJBQ3BELE1BQU0sV0FBVyxHQUFHLFlBQVksQ0FBQyxRQUFRLENBQUMsU0FBUyxDQUFDLElBQUksWUFBWSxDQUFDLFFBQVEsQ0FBQyxXQUFXLENBQUMsSUFBSSxZQUFZLENBQUMsUUFBUSxDQUFDLFFBQVEsQ0FBQyxJQUFJLFlBQVksQ0FBQyxRQUFRLENBQUMsVUFBVSxDQUFDLENBQUM7NEJBQ25LLE1BQU0sVUFBVSxHQUFHLENBQUMsWUFBWSxDQUFDLEtBQUssQ0FBQywwQkFBMEIsQ0FBQyxDQUFDOzRCQUNuRSxPQUFPLFdBQVcsSUFBSSxVQUFVLENBQUM7d0JBQ25DLENBQUM7d0JBQ0QsT0FBTyxLQUFLLENBQUM7b0JBQ2YsQ0FBQyxDQUFDLENBQUM7b0JBRUgsT0FBTzt3QkFDTCxXQUFXLEVBQUUsbUJBQW1CO3dCQUNoQyxVQUFVLEVBQUUsbUJBQW1CO3dCQUMvQixZQUFZLEVBQUUsT0FBTyxDQUFDLENBQUMsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDLENBQUMsS0FBSyxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsQ0FBQyxPQUFPO3dCQUMxRSxVQUFVLEVBQUUsbUJBQW1CO3FCQUNoQyxDQUFDO2dCQUNKLENBQUM7Z0JBQ0QsT0FBTyxFQUFFLFVBQVUsRUFBRSxJQUFJLEVBQUUsQ0FBQztZQUM5QixDQUFDLENBQUM7WUFFRiw4RkFBOEY7WUFDOUYsTUFBTSxVQUFVLEdBQUcsT0FBQyxDQUFDLE1BQU0sRUFBRSxDQUFDLEdBQUcsQ0FBQyxDQUFDLEVBQUUsMkJBQTJCLENBQUMsQ0FBQyxLQUFLLENBQUMsK0RBQStELENBQUMsQ0FBQztZQUN6SSxNQUFNLFVBQVUsR0FBRyx3QkFBd0IsQ0FBQyxVQUFVLEVBQUUsT0FBTyxDQUFDLENBQUM7WUFDakUseUVBQXlFO1lBQ3pFLElBQUEsZ0JBQU0sRUFBQyxVQUFVLENBQUMsVUFBVSxDQUFDLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDO1lBRXpDLGlDQUFpQztZQUNqQyxNQUFNLFNBQVMsR0FBRyxPQUFDLENBQUMsTUFBTSxFQUFFLENBQUMsS0FBSyxDQUFDLGVBQWUsQ0FBQyxDQUFDO1lBQ3BELE1BQU0sU0FBUyxHQUFHLHdCQUF3QixDQUFDLFNBQVMsRUFBRSxPQUFPLENBQUMsQ0FBQztZQUMvRCxJQUFBLGdCQUFNLEVBQUMsU0FBUyxDQUFDLFVBQVUsQ0FBQyxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQztRQUMzQyxDQUFDLENBQUMsQ0FBQztJQUNMLENBQUMsQ0FBQyxDQUFDO0FBQ0wsQ0FBQyxDQUFDLENBQUMiLCJuYW1lcyI6W10sInNvdXJjZXMiOlsiL2hvbWUvcnVubmVyL3dvcmtzcGFjZS90ZXN0cy91bml0L2Zvcm0tdmFsaWRhdGlvbi50ZXN0LnRzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogQ29tcHJlaGVuc2l2ZSBGb3JtIFZhbGlkYXRpb24gVGVzdCBTdWl0ZVxuICogVGVzdHMgYWxsIGZvcm0gdmFsaWRhdGlvbiBydWxlcyBhbmQgZW5zdXJlcyBjb25zaXN0ZW5jeSBhY3Jvc3MgdGhlIGFwcGxpY2F0aW9uXG4gKi9cblxuaW1wb3J0IHsgeiB9IGZyb20gJ3pvZCc7XG5pbXBvcnQgeyBkZXNjcmliZSwgdGVzdCwgZXhwZWN0IH0gZnJvbSAnQGplc3QvZ2xvYmFscyc7XG5cbmRlc2NyaWJlKCdGb3JtIFZhbGlkYXRpb24gUnVsZXMgQ29tcGxpYW5jZScsICgpID0+IHtcbiAgZGVzY3JpYmUoJ0Vycm9yIE1lc3NhZ2UgUXVhbGl0eSBTdGFuZGFyZHMnLCAoKSA9PiB7XG4gICAgdGVzdCgnc2hvdWxkIHJlcXVpcmUgZGV0YWlsZWQgZXJyb3IgbWVzc2FnZXMgd2l0aCBleGFtcGxlcyBmb3Igc3RyaW5nIGZpZWxkcycsICgpID0+IHtcbiAgICAgIC8vIFRlc3QgdGhhdCBlcnJvciBtZXNzYWdlcyBhcmUgZGVzY3JpcHRpdmUgYW5kIGluY2x1ZGUgZXhhbXBsZXNcbiAgICAgIGNvbnN0IGVtYWlsU2NoZW1hID0gei5zdHJpbmcoKS5lbWFpbCgnUGxlYXNlIGVudGVyIGEgdmFsaWQgZW1haWwgYWRkcmVzcyAoZXhhbXBsZTogdXNlckBkb21haW4uY29tKScpO1xuICAgICAgY29uc3QgbmFtZVNjaGVtYSA9IHouc3RyaW5nKCkubWluKDEsICdGaXJzdCBuYW1lIGlzIHJlcXVpcmVkIChleGFtcGxlOiBKZWFuKScpO1xuICAgICAgY29uc3QgcGhvbmVTY2hlbWEgPSB6LnN0cmluZygpLnJlZ2V4KC9eKFxcKzFcXHM/KT8oXFwoXFxkezN9XFwpfFxcZHszfSlbXFxzLi1dP1xcZHszfVtcXHMuLV0/XFxkezR9JC8sICdQaG9uZSBudW1iZXIgbXVzdCBiZSBhIHZhbGlkIE5vcnRoIEFtZXJpY2FuIGZvcm1hdCAoZXhhbXBsZTogKDUxNCkgMTIzLTQ1NjcpJyk7XG5cbiAgICAgIC8vIFRlc3QgdmFsaWQgaW5wdXRzXG4gICAgICBleHBlY3QoKCkgPT4gZW1haWxTY2hlbWEucGFyc2UoJ3VzZXJAZG9tYWluLmNvbScpKS5ub3QudG9UaHJvdygpO1xuICAgICAgZXhwZWN0KCgpID0+IG5hbWVTY2hlbWEucGFyc2UoJ0plYW4nKSkubm90LnRvVGhyb3coKTtcbiAgICAgIGV4cGVjdCgoKSA9PiBwaG9uZVNjaGVtYS5wYXJzZSgnKDUxNCkgMTIzLTQ1NjcnKSkubm90LnRvVGhyb3coKTtcblxuICAgICAgLy8gVGVzdCBpbnZhbGlkIGlucHV0cyByZXR1cm4gZGV0YWlsZWQgZXJyb3IgbWVzc2FnZXNcbiAgICAgIGNvbnN0IGVtYWlsUmVzdWx0ID0gZW1haWxTY2hlbWEuc2FmZVBhcnNlKCdpbnZhbGlkLWVtYWlsJyk7XG4gICAgICBjb25zdCBuYW1lUmVzdWx0ID0gbmFtZVNjaGVtYS5zYWZlUGFyc2UoJycpO1xuICAgICAgY29uc3QgcGhvbmVSZXN1bHQgPSBwaG9uZVNjaGVtYS5zYWZlUGFyc2UoJzEyMycpO1xuXG4gICAgICBleHBlY3QoZW1haWxSZXN1bHQuc3VjY2VzcykudG9CZShmYWxzZSk7XG4gICAgICBleHBlY3QobmFtZVJlc3VsdC5zdWNjZXNzKS50b0JlKGZhbHNlKTtcbiAgICAgIGV4cGVjdChwaG9uZVJlc3VsdC5zdWNjZXNzKS50b0JlKGZhbHNlKTtcblxuICAgICAgaWYgKCFlbWFpbFJlc3VsdC5zdWNjZXNzKSB7XG4gICAgICAgIGV4cGVjdChlbWFpbFJlc3VsdC5lcnJvci5pc3N1ZXNbMF0ubWVzc2FnZSkudG9Db250YWluKCdleGFtcGxlOicpO1xuICAgICAgICBleHBlY3QoZW1haWxSZXN1bHQuZXJyb3IuaXNzdWVzWzBdLm1lc3NhZ2UpLnRvQ29udGFpbignQCcpO1xuICAgICAgfVxuICAgICAgaWYgKCFuYW1lUmVzdWx0LnN1Y2Nlc3MpIHtcbiAgICAgICAgZXhwZWN0KG5hbWVSZXN1bHQuZXJyb3IuaXNzdWVzWzBdLm1lc3NhZ2UpLnRvQ29udGFpbignZXhhbXBsZTonKTtcbiAgICAgIH1cbiAgICAgIGlmICghcGhvbmVSZXN1bHQuc3VjY2Vzcykge1xuICAgICAgICBleHBlY3QocGhvbmVSZXN1bHQuZXJyb3IuaXNzdWVzWzBdLm1lc3NhZ2UpLnRvQ29udGFpbignZXhhbXBsZTonKTtcbiAgICAgICAgZXhwZWN0KHBob25lUmVzdWx0LmVycm9yLmlzc3Vlc1swXS5tZXNzYWdlKS50b0NvbnRhaW4oJyg1MTQpJyk7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICB0ZXN0KCdzaG91bGQgZW5mb3JjZSBsZW5ndGggbGltaXRzIHdpdGggY2xlYXIgZXJyb3IgbWVzc2FnZXMnLCAoKSA9PiB7XG4gICAgICBjb25zdCB0aXRsZVNjaGVtYSA9IHouc3RyaW5nKCkubWluKDEsICdUaXRsZSBpcyByZXF1aXJlZCAoZXhhbXBsZTogTW9udGhseSBNZWV0aW5nIE1pbnV0ZXMpJykubWF4KDIwMCwgJ1RpdGxlIG11c3QgYmUgbGVzcyB0aGFuIDIwMCBjaGFyYWN0ZXJzJyk7XG4gICAgICBjb25zdCBkZXNjcmlwdGlvblNjaGVtYSA9IHouc3RyaW5nKCkubWF4KDEwMDAsICdEZXNjcmlwdGlvbiBtdXN0IGJlIGxlc3MgdGhhbiAxMDAwIGNoYXJhY3RlcnMnKTtcblxuICAgICAgLy8gVGVzdCBsZW5ndGggdmlvbGF0aW9uc1xuICAgICAgY29uc3QgbG9uZ1RpdGxlID0gJ0EnLnJlcGVhdCgyMDEpO1xuICAgICAgY29uc3QgbG9uZ0Rlc2NyaXB0aW9uID0gJ0EnLnJlcGVhdCgxMDAxKTtcblxuICAgICAgY29uc3QgdGl0bGVSZXN1bHQgPSB0aXRsZVNjaGVtYS5zYWZlUGFyc2UobG9uZ1RpdGxlKTtcbiAgICAgIGNvbnN0IGRlc2NyaXB0aW9uUmVzdWx0ID0gZGVzY3JpcHRpb25TY2hlbWEuc2FmZVBhcnNlKGxvbmdEZXNjcmlwdGlvbik7XG5cbiAgICAgIGV4cGVjdCh0aXRsZVJlc3VsdC5zdWNjZXNzKS50b0JlKGZhbHNlKTtcbiAgICAgIGV4cGVjdChkZXNjcmlwdGlvblJlc3VsdC5zdWNjZXNzKS50b0JlKGZhbHNlKTtcblxuICAgICAgaWYgKCF0aXRsZVJlc3VsdC5zdWNjZXNzKSB7XG4gICAgICAgIGV4cGVjdCh0aXRsZVJlc3VsdC5lcnJvci5pc3N1ZXNbMF0ubWVzc2FnZSkudG9Db250YWluKCdsZXNzIHRoYW4nKTtcbiAgICAgICAgZXhwZWN0KHRpdGxlUmVzdWx0LmVycm9yLmlzc3Vlc1swXS5tZXNzYWdlKS50b0NvbnRhaW4oJzIwMCcpO1xuICAgICAgfVxuICAgICAgaWYgKCFkZXNjcmlwdGlvblJlc3VsdC5zdWNjZXNzKSB7XG4gICAgICAgIGV4cGVjdChkZXNjcmlwdGlvblJlc3VsdC5lcnJvci5pc3N1ZXNbMF0ubWVzc2FnZSkudG9Db250YWluKCdsZXNzIHRoYW4nKTtcbiAgICAgICAgZXhwZWN0KGRlc2NyaXB0aW9uUmVzdWx0LmVycm9yLmlzc3Vlc1swXS5tZXNzYWdlKS50b0NvbnRhaW4oJzEwMDAnKTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIHRlc3QoJ3Nob3VsZCB2YWxpZGF0ZSBRdWViZWMtc3BlY2lmaWMgZm9ybWF0cycsICgpID0+IHtcbiAgICAgIGNvbnN0IHBvc3RhbENvZGVTY2hlbWEgPSB6LnN0cmluZygpLnJlZ2V4KC9eW0EtWl1cXGRbQS1aXVxccz9cXGRbQS1aXVxcZCQvLCAnUG9zdGFsIGNvZGUgbXVzdCBmb2xsb3cgQ2FuYWRpYW4gZm9ybWF0IChleGFtcGxlOiBIMUEgMUIxKScpO1xuICAgICAgY29uc3QgY2l0eVNjaGVtYSA9IHouc3RyaW5nKCkucmVnZXgoL15bYS16QS1aw4Atw79cXHMnLV0rJC8sICdDaXR5IG5hbWUgY2FuIG9ubHkgY29udGFpbiBsZXR0ZXJzLCBzcGFjZXMsIGFwb3N0cm9waGVzIGFuZCBoeXBoZW5zJyk7XG5cbiAgICAgIC8vIFRlc3QgdmFsaWQgUXVlYmVjIGZvcm1hdHNcbiAgICAgIGV4cGVjdCgoKSA9PiBwb3N0YWxDb2RlU2NoZW1hLnBhcnNlKCdIMUEgMUIxJykpLm5vdC50b1Rocm93KCk7XG4gICAgICBleHBlY3QoKCkgPT4gcG9zdGFsQ29kZVNjaGVtYS5wYXJzZSgnSDFBMUIxJykpLm5vdC50b1Rocm93KCk7XG4gICAgICBleHBlY3QoKCkgPT4gY2l0eVNjaGVtYS5wYXJzZSgnTW9udHLDqWFsJykpLm5vdC50b1Rocm93KCk7XG4gICAgICBleHBlY3QoKCkgPT4gY2l0eVNjaGVtYS5wYXJzZShcIlNhaW50LUplYW4tc3VyLVJpY2hlbGlldVwiKSkubm90LnRvVGhyb3coKTtcblxuICAgICAgLy8gVGVzdCBpbnZhbGlkIGZvcm1hdHNcbiAgICAgIGNvbnN0IHBvc3RhbFJlc3VsdCA9IHBvc3RhbENvZGVTY2hlbWEuc2FmZVBhcnNlKCcxMjM0NScpO1xuICAgICAgY29uc3QgY2l0eVJlc3VsdCA9IGNpdHlTY2hlbWEuc2FmZVBhcnNlKCdDaXR5MTIzJyk7XG5cbiAgICAgIGV4cGVjdChwb3N0YWxSZXN1bHQuc3VjY2VzcykudG9CZShmYWxzZSk7XG4gICAgICBleHBlY3QoY2l0eVJlc3VsdC5zdWNjZXNzKS50b0JlKGZhbHNlKTtcblxuICAgICAgaWYgKCFwb3N0YWxSZXN1bHQuc3VjY2Vzcykge1xuICAgICAgICBleHBlY3QocG9zdGFsUmVzdWx0LmVycm9yLmlzc3Vlc1swXS5tZXNzYWdlKS50b0NvbnRhaW4oJ0NhbmFkaWFuIGZvcm1hdCcpO1xuICAgICAgICBleHBlY3QocG9zdGFsUmVzdWx0LmVycm9yLmlzc3Vlc1swXS5tZXNzYWdlKS50b0NvbnRhaW4oJ0gxQSAxQjEnKTtcbiAgICAgIH1cbiAgICAgIGlmICghY2l0eVJlc3VsdC5zdWNjZXNzKSB7XG4gICAgICAgIGV4cGVjdChjaXR5UmVzdWx0LmVycm9yLmlzc3Vlc1swXS5tZXNzYWdlKS50b0NvbnRhaW4oJ2xldHRlcnMsIHNwYWNlcywgYXBvc3Ryb3BoZXMnKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ051bWVyaWMgRmllbGQgVmFsaWRhdGlvbiBTdGFuZGFyZHMnLCAoKSA9PiB7XG4gICAgdGVzdCgnc2hvdWxkIHZhbGlkYXRlIG51bWVyaWMgcmFuZ2VzIHdpdGggY2xlYXIgYm91bmRzJywgKCkgPT4ge1xuICAgICAgY29uc3QgYWdlU2NoZW1hID0gei5udW1iZXIoKS5taW4oMTgsICdBZ2UgbXVzdCBiZSBiZXR3ZWVuIDE4IGFuZCAxMjAgeWVhcnMnKS5tYXgoMTIwLCAnQWdlIG11c3QgYmUgYmV0d2VlbiAxOCBhbmQgMTIwIHllYXJzJyk7XG4gICAgICBjb25zdCBhbW91bnRTY2hlbWEgPSB6LnN0cmluZygpLnJlZ2V4KC9eXFxkKyhcXC5cXGR7MSwyfSk/JC8sICdBbW91bnQgbXVzdCBiZSBhIHZhbGlkIG51bWJlciB3aXRoIHVwIHRvIDIgZGVjaW1hbCBwbGFjZXMgKGV4YW1wbGU6IDEyNS41MCknKTtcbiAgICAgIGNvbnN0IGNhcGFjaXR5U2NoZW1hID0gei5udW1iZXIoKS5taW4oMSwgJ0NhcGFjaXR5IG11c3QgYmUgYmV0d2VlbiAxIGFuZCA1MDAgcGVvcGxlJykubWF4KDUwMCwgJ0NhcGFjaXR5IG11c3QgYmUgYmV0d2VlbiAxIGFuZCA1MDAgcGVvcGxlJyk7XG5cbiAgICAgIC8vIFRlc3QgdmFsaWQgcmFuZ2VzXG4gICAgICBleHBlY3QoKCkgPT4gYWdlU2NoZW1hLnBhcnNlKDI1KSkubm90LnRvVGhyb3coKTtcbiAgICAgIGV4cGVjdCgoKSA9PiBhbW91bnRTY2hlbWEucGFyc2UoJzEyNS41MCcpKS5ub3QudG9UaHJvdygpO1xuICAgICAgZXhwZWN0KCgpID0+IGNhcGFjaXR5U2NoZW1hLnBhcnNlKDUwKSkubm90LnRvVGhyb3coKTtcblxuICAgICAgLy8gVGVzdCBib3VuZGFyeSB2aW9sYXRpb25zXG4gICAgICBjb25zdCBhZ2VSZXN1bHQgPSBhZ2VTY2hlbWEuc2FmZVBhcnNlKDE3KTtcbiAgICAgIGNvbnN0IGFtb3VudFJlc3VsdCA9IGFtb3VudFNjaGVtYS5zYWZlUGFyc2UoJzEyNS41NTUnKTtcbiAgICAgIGNvbnN0IGNhcGFjaXR5UmVzdWx0ID0gY2FwYWNpdHlTY2hlbWEuc2FmZVBhcnNlKDUwMSk7XG5cbiAgICAgIGV4cGVjdChhZ2VSZXN1bHQuc3VjY2VzcykudG9CZShmYWxzZSk7XG4gICAgICBleHBlY3QoYW1vdW50UmVzdWx0LnN1Y2Nlc3MpLnRvQmUoZmFsc2UpO1xuICAgICAgZXhwZWN0KGNhcGFjaXR5UmVzdWx0LnN1Y2Nlc3MpLnRvQmUoZmFsc2UpO1xuXG4gICAgICBpZiAoIWFnZVJlc3VsdC5zdWNjZXNzKSB7XG4gICAgICAgIGV4cGVjdChhZ2VSZXN1bHQuZXJyb3IuaXNzdWVzWzBdLm1lc3NhZ2UpLnRvQ29udGFpbignYmV0d2VlbicpO1xuICAgICAgfVxuICAgICAgaWYgKCFhbW91bnRSZXN1bHQuc3VjY2Vzcykge1xuICAgICAgICBleHBlY3QoYW1vdW50UmVzdWx0LmVycm9yLmlzc3Vlc1swXS5tZXNzYWdlKS50b0NvbnRhaW4oJ2RlY2ltYWwgcGxhY2VzJyk7XG4gICAgICAgIGV4cGVjdChhbW91bnRSZXN1bHQuZXJyb3IuaXNzdWVzWzBdLm1lc3NhZ2UpLnRvQ29udGFpbignZXhhbXBsZTonKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ1JlcXVpcmVkIEZpZWxkIFZhbGlkYXRpb24nLCAoKSA9PiB7XG4gICAgdGVzdCgnc2hvdWxkIHByb3ZpZGUgY2xlYXIgZ3VpZGFuY2UgZm9yIHJlcXVpcmVkIHNlbGVjdGlvbnMnLCAoKSA9PiB7XG4gICAgICBjb25zdCBvcmdhbml6YXRpb25TY2hlbWEgPSB6LnN0cmluZygpLm1pbigxLCAnUGxlYXNlIHNlbGVjdCBhbiBvcmdhbml6YXRpb24gZnJvbSB0aGUgZHJvcGRvd24nKTtcbiAgICAgIGNvbnN0IHJvbGVTY2hlbWEgPSB6LnN0cmluZygpLm1pbigxLCAnUGxlYXNlIHNlbGVjdCBhIHVzZXIgcm9sZScpO1xuICAgICAgY29uc3QgdHlwZVNjaGVtYSA9IHouc3RyaW5nKCkubWluKDEsICdQbGVhc2Ugc2VsZWN0IGFuIG9yZ2FuaXphdGlvbiB0eXBlIGZyb20gdGhlIGRyb3Bkb3duJyk7XG5cbiAgICAgIGNvbnN0IG9yZ1Jlc3VsdCA9IG9yZ2FuaXphdGlvblNjaGVtYS5zYWZlUGFyc2UoJycpO1xuICAgICAgY29uc3Qgcm9sZVJlc3VsdCA9IHJvbGVTY2hlbWEuc2FmZVBhcnNlKCcnKTtcbiAgICAgIGNvbnN0IHR5cGVSZXN1bHQgPSB0eXBlU2NoZW1hLnNhZmVQYXJzZSgnJyk7XG5cbiAgICAgIGV4cGVjdChvcmdSZXN1bHQuc3VjY2VzcykudG9CZShmYWxzZSk7XG4gICAgICBleHBlY3Qocm9sZVJlc3VsdC5zdWNjZXNzKS50b0JlKGZhbHNlKTtcbiAgICAgIGV4cGVjdCh0eXBlUmVzdWx0LnN1Y2Nlc3MpLnRvQmUoZmFsc2UpO1xuXG4gICAgICBpZiAoIW9yZ1Jlc3VsdC5zdWNjZXNzKSB7XG4gICAgICAgIGV4cGVjdChvcmdSZXN1bHQuZXJyb3IuaXNzdWVzWzBdLm1lc3NhZ2UpLnRvQ29udGFpbignc2VsZWN0Jyk7XG4gICAgICAgIGV4cGVjdChvcmdSZXN1bHQuZXJyb3IuaXNzdWVzWzBdLm1lc3NhZ2UpLnRvQ29udGFpbignZHJvcGRvd24nKTtcbiAgICAgIH1cbiAgICAgIGlmICghcm9sZVJlc3VsdC5zdWNjZXNzKSB7XG4gICAgICAgIGV4cGVjdChyb2xlUmVzdWx0LmVycm9yLmlzc3Vlc1swXS5tZXNzYWdlKS50b0NvbnRhaW4oJ3NlbGVjdCcpO1xuICAgICAgfVxuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnUXVlYmVjIExhdyAyNSBDb21wbGlhbmNlIFZhbGlkYXRpb24nLCAoKSA9PiB7XG4gICAgdGVzdCgnc2hvdWxkIGVuZm9yY2UgcHJpdmFjeS1jb21wbGlhbnQgZmllbGQgdmFsaWRhdGlvbicsICgpID0+IHtcbiAgICAgIC8vIFBlcnNvbmFsIGluZm9ybWF0aW9uIGZpZWxkcyBtdXN0IGhhdmUgZW5oYW5jZWQgcHJvdGVjdGlvblxuICAgICAgY29uc3QgZmlyc3ROYW1lU2NoZW1hID0gei5zdHJpbmcoKS5taW4oMSwgJ0ZpcnN0IG5hbWUgaXMgcmVxdWlyZWQgKGV4YW1wbGU6IEplYW4pJykubWF4KDUwLCAnRmlyc3QgbmFtZSBtdXN0IGJlIGxlc3MgdGhhbiA1MCBjaGFyYWN0ZXJzJykucmVnZXgoL15bYS16QS1aw4Atw79cXHMnLV0rJC8sICdGaXJzdCBuYW1lIGNhbiBvbmx5IGNvbnRhaW4gbGV0dGVycywgc3BhY2VzLCBhcG9zdHJvcGhlcyBhbmQgaHlwaGVucycpO1xuICAgICAgY29uc3QgbGFzdE5hbWVTY2hlbWEgPSB6LnN0cmluZygpLm1pbigxLCAnTGFzdCBuYW1lIGlzIHJlcXVpcmVkIChleGFtcGxlOiBEdXBvbnQpJykubWF4KDUwLCAnTGFzdCBuYW1lIG11c3QgYmUgbGVzcyB0aGFuIDUwIGNoYXJhY3RlcnMnKS5yZWdleCgvXlthLXpBLVrDgC3Dv1xccyctXSskLywgJ0xhc3QgbmFtZSBjYW4gb25seSBjb250YWluIGxldHRlcnMsIHNwYWNlcywgYXBvc3Ryb3BoZXMgYW5kIGh5cGhlbnMnKTtcblxuICAgICAgLy8gVGVzdCB2YWxpZCBRdWViZWMgbmFtZXNcbiAgICAgIGV4cGVjdCgoKSA9PiBmaXJzdE5hbWVTY2hlbWEucGFyc2UoJ0plYW4tQmFwdGlzdGUnKSkubm90LnRvVGhyb3coKTtcbiAgICAgIGV4cGVjdCgoKSA9PiBmaXJzdE5hbWVTY2hlbWEucGFyc2UoJ01hcmllLcOIdmUnKSkubm90LnRvVGhyb3coKTtcbiAgICAgIGV4cGVjdCgoKSA9PiBsYXN0TmFtZVNjaGVtYS5wYXJzZShcIk8nQ29ubm9yXCIpKS5ub3QudG9UaHJvdygpO1xuICAgICAgZXhwZWN0KCgpID0+IGxhc3ROYW1lU2NoZW1hLnBhcnNlKCdMYWZsZXVyLUR1ZnJlc25lJykpLm5vdC50b1Rocm93KCk7XG5cbiAgICAgIC8vIFRlc3QgaW52YWxpZCBpbnB1dHNcbiAgICAgIGNvbnN0IGludmFsaWRGaXJzdCA9IGZpcnN0TmFtZVNjaGVtYS5zYWZlUGFyc2UoJ0plYW4xMjMnKTtcbiAgICAgIGNvbnN0IGludmFsaWRMYXN0ID0gbGFzdE5hbWVTY2hlbWEuc2FmZVBhcnNlKCcnKTtcblxuICAgICAgZXhwZWN0KGludmFsaWRGaXJzdC5zdWNjZXNzKS50b0JlKGZhbHNlKTtcbiAgICAgIGV4cGVjdChpbnZhbGlkTGFzdC5zdWNjZXNzKS50b0JlKGZhbHNlKTtcblxuICAgICAgaWYgKCFpbnZhbGlkRmlyc3Quc3VjY2Vzcykge1xuICAgICAgICBleHBlY3QoaW52YWxpZEZpcnN0LmVycm9yLmlzc3Vlc1swXS5tZXNzYWdlKS50b0NvbnRhaW4oJ2xldHRlcnMsIHNwYWNlcywgYXBvc3Ryb3BoZXMnKTtcbiAgICAgIH1cbiAgICAgIGlmICghaW52YWxpZExhc3Quc3VjY2Vzcykge1xuICAgICAgICBleHBlY3QoaW52YWxpZExhc3QuZXJyb3IuaXNzdWVzWzBdLm1lc3NhZ2UpLnRvQ29udGFpbignZXhhbXBsZTonKTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIHRlc3QoJ3Nob3VsZCB2YWxpZGF0ZSBwYXNzd29yZCBzZWN1cml0eSByZXF1aXJlbWVudHMnLCAoKSA9PiB7XG4gICAgICBjb25zdCBwYXNzd29yZFNjaGVtYSA9IHouc3RyaW5nKClcbiAgICAgICAgLm1pbig4LCAnUGFzc3dvcmQgbXVzdCBiZSBhdCBsZWFzdCA4IGNoYXJhY3RlcnMgbG9uZyAoZXhhbXBsZTogTW9uTm91dmVhdU1vdERlUGFzc2UxMjMhKScpXG4gICAgICAgIC5tYXgoMTAwLCAnUGFzc3dvcmQgbXVzdCBiZSBsZXNzIHRoYW4gMTAwIGNoYXJhY3RlcnMnKVxuICAgICAgICAucmVnZXgoL14oPz0uKlthLXpdKSg/PS4qW0EtWl0pKD89LipcXGQpLywgJ1Bhc3N3b3JkIG11c3QgY29udGFpbiBhdCBsZWFzdCBvbmUgbG93ZXJjYXNlIGxldHRlciwgb25lIHVwcGVyY2FzZSBsZXR0ZXIsIGFuZCBvbmUgbnVtYmVyJyk7XG5cbiAgICAgIC8vIFRlc3QgdmFsaWQgcGFzc3dvcmRzXG4gICAgICBleHBlY3QoKCkgPT4gcGFzc3dvcmRTY2hlbWEucGFyc2UoJ01vbk1vdERlUGFzc2UxMjMhJykpLm5vdC50b1Rocm93KCk7XG4gICAgICBleHBlY3QoKCkgPT4gcGFzc3dvcmRTY2hlbWEucGFyc2UoJ1NlY3VyZVBhc3MxMjMnKSkubm90LnRvVGhyb3coKTtcblxuICAgICAgLy8gVGVzdCBpbnZhbGlkIHBhc3N3b3Jkc1xuICAgICAgY29uc3Qgc2hvcnRSZXN1bHQgPSBwYXNzd29yZFNjaGVtYS5zYWZlUGFyc2UoJ3Nob3J0Jyk7XG4gICAgICBjb25zdCBub1VwcGVyUmVzdWx0ID0gcGFzc3dvcmRTY2hlbWEuc2FmZVBhcnNlKCdwYXNzd29yZDEyMycpO1xuICAgICAgY29uc3Qgbm9OdW1iZXJSZXN1bHQgPSBwYXNzd29yZFNjaGVtYS5zYWZlUGFyc2UoJ1Bhc3N3b3JkJyk7XG5cbiAgICAgIGV4cGVjdChzaG9ydFJlc3VsdC5zdWNjZXNzKS50b0JlKGZhbHNlKTtcbiAgICAgIGV4cGVjdChub1VwcGVyUmVzdWx0LnN1Y2Nlc3MpLnRvQmUoZmFsc2UpO1xuICAgICAgZXhwZWN0KG5vTnVtYmVyUmVzdWx0LnN1Y2Nlc3MpLnRvQmUoZmFsc2UpO1xuXG4gICAgICBpZiAoIXNob3J0UmVzdWx0LnN1Y2Nlc3MpIHtcbiAgICAgICAgZXhwZWN0KHNob3J0UmVzdWx0LmVycm9yLmlzc3Vlc1swXS5tZXNzYWdlKS50b0NvbnRhaW4oJ2F0IGxlYXN0IDgnKTtcbiAgICAgICAgZXhwZWN0KHNob3J0UmVzdWx0LmVycm9yLmlzc3Vlc1swXS5tZXNzYWdlKS50b0NvbnRhaW4oJ2V4YW1wbGU6Jyk7XG4gICAgICB9XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdUaW1lIGFuZCBEYXRlIFZhbGlkYXRpb24nLCAoKSA9PiB7XG4gICAgdGVzdCgnc2hvdWxkIHZhbGlkYXRlIHRpbWUgZm9ybWF0cyB3aXRoIGNsZWFyIGV4YW1wbGVzJywgKCkgPT4ge1xuICAgICAgY29uc3QgdGltZVNjaGVtYSA9IHouc3RyaW5nKCkucmVnZXgoL14oWzAtMV0/WzAtOV18MlswLTNdKTpbMC01XVswLTldJC8sICdUaW1lIG11c3QgYmUgaW4gSEg6TU0gZm9ybWF0IChleGFtcGxlOiAwOTowMCknKTtcbiAgICAgIGNvbnN0IGRhdGVTY2hlbWEgPSB6LnN0cmluZygpLm1pbigxLCAnRGF0ZSBpcyByZXF1aXJlZCAoc2VsZWN0IGZyb20gY2FsZW5kYXIpJyk7XG5cbiAgICAgIC8vIFRlc3QgdmFsaWQgdGltZXNcbiAgICAgIGV4cGVjdCgoKSA9PiB0aW1lU2NoZW1hLnBhcnNlKCcwOTowMCcpKS5ub3QudG9UaHJvdygpO1xuICAgICAgZXhwZWN0KCgpID0+IHRpbWVTY2hlbWEucGFyc2UoJzIzOjU5JykpLm5vdC50b1Rocm93KCk7XG4gICAgICBleHBlY3QoKCkgPT4gdGltZVNjaGVtYS5wYXJzZSgnMDA6MDAnKSkubm90LnRvVGhyb3coKTtcblxuICAgICAgLy8gVGVzdCBpbnZhbGlkIHRpbWVzXG4gICAgICBjb25zdCBpbnZhbGlkVGltZSA9IHRpbWVTY2hlbWEuc2FmZVBhcnNlKCcyNTowMCcpO1xuICAgICAgY29uc3QgaW52YWxpZEZvcm1hdCA9IHRpbWVTY2hlbWEuc2FmZVBhcnNlKCc5OjAnKTtcblxuICAgICAgZXhwZWN0KGludmFsaWRUaW1lLnN1Y2Nlc3MpLnRvQmUoZmFsc2UpO1xuICAgICAgZXhwZWN0KGludmFsaWRGb3JtYXQuc3VjY2VzcykudG9CZShmYWxzZSk7XG5cbiAgICAgIGlmICghaW52YWxpZFRpbWUuc3VjY2Vzcykge1xuICAgICAgICBleHBlY3QoaW52YWxpZFRpbWUuZXJyb3IuaXNzdWVzWzBdLm1lc3NhZ2UpLnRvQ29udGFpbignSEg6TU0nKTtcbiAgICAgICAgZXhwZWN0KGludmFsaWRUaW1lLmVycm9yLmlzc3Vlc1swXS5tZXNzYWdlKS50b0NvbnRhaW4oJ2V4YW1wbGU6Jyk7XG4gICAgICB9XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdCdXNpbmVzcyBMb2dpYyBWYWxpZGF0aW9uJywgKCkgPT4ge1xuICAgIHRlc3QoJ3Nob3VsZCB2YWxpZGF0ZSByZWZpbmVtZW50cyB3aXRoIGhlbHBmdWwgZXJyb3IgbWVzc2FnZXMnLCAoKSA9PiB7XG4gICAgICBjb25zdCB0aW1lUmFuZ2VTY2hlbWEgPSB6XG4gICAgICAgIC5vYmplY3Qoe1xuICAgICAgICAgIHN0YXJ0VGltZTogei5zdHJpbmcoKS5yZWdleCgvXihbMC0xXT9bMC05XXwyWzAtM10pOlswLTVdWzAtOV0kLywgJ1N0YXJ0IHRpbWUgbXVzdCBiZSBpbiBISDpNTSBmb3JtYXQgKGV4YW1wbGU6IDA5OjAwKScpLFxuICAgICAgICAgIGVuZFRpbWU6IHouc3RyaW5nKCkucmVnZXgoL14oWzAtMV0/WzAtOV18MlswLTNdKTpbMC01XVswLTldJC8sICdFbmQgdGltZSBtdXN0IGJlIGluIEhIOk1NIGZvcm1hdCAoZXhhbXBsZTogMTE6MDApJyksXG4gICAgICAgIH0pXG4gICAgICAgIC5yZWZpbmUoXG4gICAgICAgICAgKGRhdGEpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IFtzdGFydEhvdXIsIHN0YXJ0TWluXSA9IGRhdGEuc3RhcnRUaW1lLnNwbGl0KCc6JykubWFwKE51bWJlcik7XG4gICAgICAgICAgICBjb25zdCBbZW5kSG91ciwgZW5kTWluXSA9IGRhdGEuZW5kVGltZS5zcGxpdCgnOicpLm1hcChOdW1iZXIpO1xuICAgICAgICAgICAgY29uc3Qgc3RhcnRNaW51dGVzID0gc3RhcnRIb3VyICogNjAgKyBzdGFydE1pbjtcbiAgICAgICAgICAgIGNvbnN0IGVuZE1pbnV0ZXMgPSBlbmRIb3VyICogNjAgKyBlbmRNaW47XG4gICAgICAgICAgICByZXR1cm4gZW5kTWludXRlcyA+IHN0YXJ0TWludXRlcztcbiAgICAgICAgICB9LFxuICAgICAgICAgIHtcbiAgICAgICAgICAgIG1lc3NhZ2U6ICdFbmQgdGltZSBtdXN0IGJlIGFmdGVyIHN0YXJ0IHRpbWUgKGV4YW1wbGU6IHN0YXJ0IGF0IDA5OjAwLCBlbmQgYXQgMTE6MDApJyxcbiAgICAgICAgICAgIHBhdGg6IFsnZW5kVGltZSddLFxuICAgICAgICAgIH1cbiAgICAgICAgKTtcblxuICAgICAgLy8gVGVzdCB2YWxpZCB0aW1lIHJhbmdlXG4gICAgICBleHBlY3QoKCkgPT4gdGltZVJhbmdlU2NoZW1hLnBhcnNlKHsgc3RhcnRUaW1lOiAnMDk6MDAnLCBlbmRUaW1lOiAnMTE6MDAnIH0pKS5ub3QudG9UaHJvdygpO1xuXG4gICAgICAvLyBUZXN0IGludmFsaWQgdGltZSByYW5nZVxuICAgICAgY29uc3QgcmVzdWx0ID0gdGltZVJhbmdlU2NoZW1hLnNhZmVQYXJzZSh7IHN0YXJ0VGltZTogJzExOjAwJywgZW5kVGltZTogJzA5OjAwJyB9KTtcbiAgICAgIGV4cGVjdChyZXN1bHQuc3VjY2VzcykudG9CZShmYWxzZSk7XG5cbiAgICAgIGlmICghcmVzdWx0LnN1Y2Nlc3MpIHtcbiAgICAgICAgZXhwZWN0KHJlc3VsdC5lcnJvci5pc3N1ZXNbMF0ubWVzc2FnZSkudG9Db250YWluKCdhZnRlciBzdGFydCB0aW1lJyk7XG4gICAgICAgIGV4cGVjdChyZXN1bHQuZXJyb3IuaXNzdWVzWzBdLm1lc3NhZ2UpLnRvQ29udGFpbignZXhhbXBsZTonKTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIHRlc3QoJ3Nob3VsZCB2YWxpZGF0ZSBwYXNzd29yZCBjb25maXJtYXRpb24gd2l0aCBjbGVhciBtZXNzYWdpbmcnLCAoKSA9PiB7XG4gICAgICBjb25zdCBwYXNzd29yZFNjaGVtYSA9IHpcbiAgICAgICAgLm9iamVjdCh7XG4gICAgICAgICAgbmV3UGFzc3dvcmQ6IHouc3RyaW5nKCkubWluKDgsICdOZXcgcGFzc3dvcmQgbXVzdCBiZSBhdCBsZWFzdCA4IGNoYXJhY3RlcnMgbG9uZyAoZXhhbXBsZTogTW9uTm91dmVhdU1vdERlUGFzc2UxMjMhKScpLFxuICAgICAgICAgIGNvbmZpcm1QYXNzd29yZDogei5zdHJpbmcoKS5taW4oMSwgJ1BsZWFzZSBjb25maXJtIHlvdXIgbmV3IHBhc3N3b3JkIGJ5IHR5cGluZyBpdCBhZ2FpbicpLFxuICAgICAgICB9KVxuICAgICAgICAucmVmaW5lKChkYXRhKSA9PiBkYXRhLm5ld1Bhc3N3b3JkID09PSBkYXRhLmNvbmZpcm1QYXNzd29yZCwge1xuICAgICAgICAgIG1lc3NhZ2U6IFwiUGFzc3dvcmRzIGRvbid0IG1hdGNoIC0gcGxlYXNlIGVudGVyIHRoZSBzYW1lIHBhc3N3b3JkIGluIGJvdGggZmllbGRzXCIsXG4gICAgICAgICAgcGF0aDogWydjb25maXJtUGFzc3dvcmQnXSxcbiAgICAgICAgfSk7XG5cbiAgICAgIC8vIFRlc3QgdmFsaWQgcGFzc3dvcmQgY29uZmlybWF0aW9uXG4gICAgICBleHBlY3QoKCkgPT4gcGFzc3dvcmRTY2hlbWEucGFyc2UoeyBcbiAgICAgICAgbmV3UGFzc3dvcmQ6ICdUZXN0UGFzc3dvcmQxMjMhJywgXG4gICAgICAgIGNvbmZpcm1QYXNzd29yZDogJ1Rlc3RQYXNzd29yZDEyMyEnIFxuICAgICAgfSkpLm5vdC50b1Rocm93KCk7XG5cbiAgICAgIC8vIFRlc3QgcGFzc3dvcmQgbWlzbWF0Y2hcbiAgICAgIGNvbnN0IHJlc3VsdCA9IHBhc3N3b3JkU2NoZW1hLnNhZmVQYXJzZSh7IFxuICAgICAgICBuZXdQYXNzd29yZDogJ1Rlc3RQYXNzd29yZDEyMyEnLCBcbiAgICAgICAgY29uZmlybVBhc3N3b3JkOiAnRGlmZmVyZW50UGFzc3dvcmQxMjMhJyBcbiAgICAgIH0pO1xuICAgICAgZXhwZWN0KHJlc3VsdC5zdWNjZXNzKS50b0JlKGZhbHNlKTtcblxuICAgICAgaWYgKCFyZXN1bHQuc3VjY2Vzcykge1xuICAgICAgICBleHBlY3QocmVzdWx0LmVycm9yLmlzc3Vlc1swXS5tZXNzYWdlKS50b0NvbnRhaW4oXCJkb24ndCBtYXRjaFwiKTtcbiAgICAgICAgZXhwZWN0KHJlc3VsdC5lcnJvci5pc3N1ZXNbMF0ubWVzc2FnZSkudG9Db250YWluKCdzYW1lIHBhc3N3b3JkJyk7XG4gICAgICB9XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdWYWxpZGF0aW9uIFBhdHRlcm4gRW5mb3JjZW1lbnQnLCAoKSA9PiB7XG4gICAgdGVzdCgnc2hvdWxkIGVuZm9yY2UgbWluaW11bSBjaGFyYWN0ZXIgcmVxdWlyZW1lbnRzIGZvciB0ZXh0IGZpZWxkcycsICgpID0+IHtcbiAgICAgIC8vIEFsbCBtZWFuaW5nZnVsIHRleHQgZmllbGRzIHNob3VsZCBoYXZlIG1pbmltdW0gbGVuZ3RoIHJlcXVpcmVtZW50c1xuICAgICAgY29uc3Qgc2hvcnREZXNjcmlwdGlvblNjaGVtYSA9IHouc3RyaW5nKCkubWluKDEwLCAnRGVzY3JpcHRpb24gbXVzdCBiZSBhdCBsZWFzdCAxMCBjaGFyYWN0ZXJzIGxvbmcgKGV4YW1wbGU6IERldGFpbGVkIGV4cGxhbmF0aW9uIG9mIHRoZSBpc3N1ZSknKTtcbiAgICAgIGNvbnN0IHRpdGxlU2NoZW1hID0gei5zdHJpbmcoKS5taW4oMSwgJ1RpdGxlIGlzIHJlcXVpcmVkIChleGFtcGxlOiBEb2N1bWVudCBUaXRsZSknKTtcblxuICAgICAgY29uc3Qgc2hvcnRSZXN1bHQgPSBzaG9ydERlc2NyaXB0aW9uU2NoZW1hLnNhZmVQYXJzZSgnc2hvcnQnKTtcbiAgICAgIGNvbnN0IGVtcHR5UmVzdWx0ID0gdGl0bGVTY2hlbWEuc2FmZVBhcnNlKCcnKTtcblxuICAgICAgZXhwZWN0KHNob3J0UmVzdWx0LnN1Y2Nlc3MpLnRvQmUoZmFsc2UpO1xuICAgICAgZXhwZWN0KGVtcHR5UmVzdWx0LnN1Y2Nlc3MpLnRvQmUoZmFsc2UpO1xuXG4gICAgICBpZiAoIXNob3J0UmVzdWx0LnN1Y2Nlc3MpIHtcbiAgICAgICAgZXhwZWN0KHNob3J0UmVzdWx0LmVycm9yLmlzc3Vlc1swXS5tZXNzYWdlKS50b0NvbnRhaW4oJ2F0IGxlYXN0Jyk7XG4gICAgICAgIGV4cGVjdChzaG9ydFJlc3VsdC5lcnJvci5pc3N1ZXNbMF0ubWVzc2FnZSkudG9Db250YWluKCdleGFtcGxlOicpO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgdGVzdCgnc2hvdWxkIHZhbGlkYXRlIHNlbGVjdGlvbiBmaWVsZHMgd2l0aCBndWlkYW5jZScsICgpID0+IHtcbiAgICAgIGNvbnN0IGNhdGVnb3J5U2NoZW1hID0gei5lbnVtKFsnbWFpbnRlbmFuY2UnLCAnY29tcGxhaW50JywgJ2luZm9ybWF0aW9uJywgJ290aGVyJ10pO1xuICAgICAgY29uc3Qgb3JnYW5pemF0aW9uU2NoZW1hID0gei5zdHJpbmcoKS5taW4oMSwgJ1BsZWFzZSBzZWxlY3QgYW4gb3JnYW5pemF0aW9uIGZyb20gdGhlIGRyb3Bkb3duJyk7XG5cbiAgICAgIC8vIFRlc3QgZW1wdHkgc2VsZWN0aW9uXG4gICAgICBjb25zdCBvcmdSZXN1bHQgPSBvcmdhbml6YXRpb25TY2hlbWEuc2FmZVBhcnNlKCcnKTtcbiAgICAgIGV4cGVjdChvcmdSZXN1bHQuc3VjY2VzcykudG9CZShmYWxzZSk7XG5cbiAgICAgIGlmICghb3JnUmVzdWx0LnN1Y2Nlc3MpIHtcbiAgICAgICAgZXhwZWN0KG9yZ1Jlc3VsdC5lcnJvci5pc3N1ZXNbMF0ubWVzc2FnZSkudG9Db250YWluKCdzZWxlY3QnKTtcbiAgICAgICAgZXhwZWN0KG9yZ1Jlc3VsdC5lcnJvci5pc3N1ZXNbMF0ubWVzc2FnZSkudG9Db250YWluKCdkcm9wZG93bicpO1xuICAgICAgfVxuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnQmlsaW5ndWFsIFN1cHBvcnQgVmFsaWRhdGlvbicsICgpID0+IHtcbiAgICB0ZXN0KCdzaG91bGQgc3VwcG9ydCBib3RoIEVuZ2xpc2ggYW5kIEZyZW5jaCBlcnJvciBtZXNzYWdlcycsICgpID0+IHtcbiAgICAgIC8vIFNvbWUgZm9ybXMgbWF5IHVzZSBGcmVuY2ggZXJyb3IgbWVzc2FnZXMgZm9yIFF1ZWJlYyBjb21wbGlhbmNlXG4gICAgICBjb25zdCBmcmVuY2hEYXRlU2NoZW1hID0gei5kYXRlKHsgbWVzc2FnZTogJ1BsZWFzZSBzZWxlY3QgYSBib29raW5nIGRhdGUgZnJvbSB0aGUgY2FsZW5kYXInIH0pO1xuICAgICAgY29uc3QgZW5nbGlzaEVtYWlsU2NoZW1hID0gei5zdHJpbmcoKS5lbWFpbCgnUGxlYXNlIGVudGVyIGEgdmFsaWQgZW1haWwgYWRkcmVzcyAoZXhhbXBsZTogdXNlckBkb21haW4uY29tKScpO1xuXG4gICAgICAvLyBCb3RoIHNob3VsZCB3b3JrIGFuZCBwcm92aWRlIGNsZWFyIGd1aWRhbmNlXG4gICAgICBjb25zdCBkYXRlUmVzdWx0ID0gZnJlbmNoRGF0ZVNjaGVtYS5zYWZlUGFyc2UoJ2ludmFsaWQtZGF0ZScpO1xuICAgICAgY29uc3QgZW1haWxSZXN1bHQgPSBlbmdsaXNoRW1haWxTY2hlbWEuc2FmZVBhcnNlKCdpbnZhbGlkLWVtYWlsJyk7XG5cbiAgICAgIGV4cGVjdChkYXRlUmVzdWx0LnN1Y2Nlc3MpLnRvQmUoZmFsc2UpO1xuICAgICAgZXhwZWN0KGVtYWlsUmVzdWx0LnN1Y2Nlc3MpLnRvQmUoZmFsc2UpO1xuXG4gICAgICBpZiAoIWRhdGVSZXN1bHQuc3VjY2Vzcykge1xuICAgICAgICBleHBlY3QoZGF0ZVJlc3VsdC5lcnJvci5pc3N1ZXNbMF0ubWVzc2FnZSkudG9Db250YWluKCdzZWxlY3QnKTtcbiAgICAgICAgZXhwZWN0KGRhdGVSZXN1bHQuZXJyb3IuaXNzdWVzWzBdLm1lc3NhZ2UpLnRvQ29udGFpbignY2FsZW5kYXInKTtcbiAgICAgIH1cbiAgICAgIGlmICghZW1haWxSZXN1bHQuc3VjY2Vzcykge1xuICAgICAgICBleHBlY3QoZW1haWxSZXN1bHQuZXJyb3IuaXNzdWVzWzBdLm1lc3NhZ2UpLnRvQ29udGFpbigndmFsaWQgZW1haWwnKTtcbiAgICAgICAgZXhwZWN0KGVtYWlsUmVzdWx0LmVycm9yLmlzc3Vlc1swXS5tZXNzYWdlKS50b0NvbnRhaW4oJ2V4YW1wbGU6Jyk7XG4gICAgICB9XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdGb3JtIENvbnNpc3RlbmN5IFN0YW5kYXJkcycsICgpID0+IHtcbiAgICB0ZXN0KCdzaG91bGQgZW5mb3JjZSBjb25zaXN0ZW50IGVycm9yIG1lc3NhZ2UgcGF0dGVybnMnLCAoKSA9PiB7XG4gICAgICAvLyBUZXN0IHRoYXQgYWxsIGVycm9yIG1lc3NhZ2VzIGZvbGxvdyBjb25zaXN0ZW50IHBhdHRlcm5zOlxuICAgICAgLy8gMS4gQ2xlYXIgZXhwbGFuYXRpb24gb2Ygd2hhdCdzIHdyb25nXG4gICAgICAvLyAyLiBJbmNsdWRlIGV4YW1wbGVzIHdoZXJlIGhlbHBmdWxcbiAgICAgIC8vIDMuIFNwZWNpZnkgdmFsaWQgcmFuZ2VzL2Zvcm1hdHNcbiAgICAgIC8vIDQuIFVzZSBmcmllbmRseSwgaGVscGZ1bCBsYW5ndWFnZVxuXG4gICAgICBjb25zdCBwYXR0ZXJucyA9IFtcbiAgICAgICAge1xuICAgICAgICAgIHNjaGVtYTogei5zdHJpbmcoKS5taW4oMSwgJ0VtYWlsIGFkZHJlc3MgaXMgcmVxdWlyZWQnKS5lbWFpbCgnUGxlYXNlIGVudGVyIGEgdmFsaWQgZW1haWwgYWRkcmVzcyAoZXhhbXBsZTogdXNlckBkb21haW4uY29tKScpLFxuICAgICAgICAgIGludmFsaWRJbnB1dDogJ2ludmFsaWQtZW1haWwnLFxuICAgICAgICAgIHNob3VsZENvbnRhaW46IFsndmFsaWQgZW1haWwnLCAnZXhhbXBsZTonLCAnQCddXG4gICAgICAgIH0sXG4gICAgICAgIHtcbiAgICAgICAgICBzY2hlbWE6IHouc3RyaW5nKCkubWluKDEsICdGaXJzdCBuYW1lIGlzIHJlcXVpcmVkIChleGFtcGxlOiBKZWFuKScpLnJlZ2V4KC9eW2EtekEtWsOALcO/XFxzJy1dKyQvLCAnRmlyc3QgbmFtZSBjYW4gb25seSBjb250YWluIGxldHRlcnMsIHNwYWNlcywgYXBvc3Ryb3BoZXMgYW5kIGh5cGhlbnMnKSxcbiAgICAgICAgICBpbnZhbGlkSW5wdXQ6ICdKb2huMTIzJyxcbiAgICAgICAgICBzaG91bGRDb250YWluOiBbJ2NhbiBvbmx5IGNvbnRhaW4nLCAnbGV0dGVycywgc3BhY2VzJ11cbiAgICAgICAgfSxcbiAgICAgICAge1xuICAgICAgICAgIHNjaGVtYTogei5zdHJpbmcoKS5yZWdleCgvXlxcZCsoXFwuXFxkezEsMn0pPyQvLCAnQW1vdW50IG11c3QgYmUgYSB2YWxpZCBudW1iZXIgd2l0aCB1cCB0byAyIGRlY2ltYWwgcGxhY2VzIChleGFtcGxlOiAxMjUuNTApJyksXG4gICAgICAgICAgaW52YWxpZElucHV0OiAnMTI1LjU1NScsXG4gICAgICAgICAgc2hvdWxkQ29udGFpbjogWyd2YWxpZCBudW1iZXInLCAnZGVjaW1hbCBwbGFjZXMnLCAnZXhhbXBsZTonXVxuICAgICAgICB9XG4gICAgICBdO1xuXG4gICAgICBwYXR0ZXJucy5mb3JFYWNoKCh7IHNjaGVtYSwgaW52YWxpZElucHV0LCBzaG91bGRDb250YWluIH0pID0+IHtcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gc2NoZW1hLnNhZmVQYXJzZShpbnZhbGlkSW5wdXQpO1xuICAgICAgICBleHBlY3QocmVzdWx0LnN1Y2Nlc3MpLnRvQmUoZmFsc2UpO1xuXG4gICAgICAgIGlmICghcmVzdWx0LnN1Y2Nlc3MpIHtcbiAgICAgICAgICBjb25zdCBlcnJvck1lc3NhZ2UgPSByZXN1bHQuZXJyb3IuaXNzdWVzWzBdLm1lc3NhZ2U7XG4gICAgICAgICAgc2hvdWxkQ29udGFpbi5mb3JFYWNoKHBhdHRlcm4gPT4ge1xuICAgICAgICAgICAgZXhwZWN0KGVycm9yTWVzc2FnZSkudG9Db250YWluKHBhdHRlcm4pO1xuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9KTtcblxuICAgIHRlc3QoJ3Nob3VsZCB2YWxpZGF0ZSB0aGF0IGFsbCBmb3JtcyB1c2UgcHJvcGVyIGNoYXJhY3RlciBsaW1pdHMnLCAoKSA9PiB7XG4gICAgICAvLyBTdGFuZGFyZCBjaGFyYWN0ZXIgbGltaXRzIGFjcm9zcyB0aGUgYXBwbGljYXRpb25cbiAgICAgIGNvbnN0IGxpbWl0cyA9IHtcbiAgICAgICAgdGl0bGU6IHsgbWF4OiAyMDAsIG1pbjogMSB9LFxuICAgICAgICBkZXNjcmlwdGlvbjogeyBtYXg6IDEwMDAsIG1pbjogMTAgfSxcbiAgICAgICAgc2hvcnRUZXh0OiB7IG1heDogMTAwLCBtaW46IDEgfSxcbiAgICAgICAgbG9uZ1RleHQ6IHsgbWF4OiAyMDAwLCBtaW46IDEwIH0sXG4gICAgICAgIG5hbWU6IHsgbWF4OiA1MCwgbWluOiAxIH1cbiAgICAgIH07XG5cbiAgICAgIE9iamVjdC5lbnRyaWVzKGxpbWl0cykuZm9yRWFjaCgoW2ZpZWxkVHlwZSwgeyBtYXgsIG1pbiB9XSkgPT4ge1xuICAgICAgICBjb25zdCBzY2hlbWEgPSB6LnN0cmluZygpXG4gICAgICAgICAgLm1pbihtaW4sIGAke2ZpZWxkVHlwZX0gbXVzdCBiZSBhdCBsZWFzdCAke21pbn0gY2hhcmFjdGVyc2ApXG4gICAgICAgICAgLm1heChtYXgsIGAke2ZpZWxkVHlwZX0gbXVzdCBiZSBsZXNzIHRoYW4gJHttYXh9IGNoYXJhY3RlcnNgKTtcblxuICAgICAgICAvLyBUZXN0IGJvdW5kYXJ5IGNvbmRpdGlvbnNcbiAgICAgICAgY29uc3QgdG9vU2hvcnQgPSAnYScucmVwZWF0KG1pbiAtIDEpO1xuICAgICAgICBjb25zdCB0b29Mb25nID0gJ2EnLnJlcGVhdChtYXggKyAxKTtcbiAgICAgICAgY29uc3QganVzdFJpZ2h0ID0gJ2EnLnJlcGVhdChtaW4pO1xuXG4gICAgICAgIGV4cGVjdChzY2hlbWEuc2FmZVBhcnNlKHRvb1Nob3J0KS5zdWNjZXNzKS50b0JlKGZhbHNlKTtcbiAgICAgICAgZXhwZWN0KHNjaGVtYS5zYWZlUGFyc2UodG9vTG9uZykuc3VjY2VzcykudG9CZShmYWxzZSk7XG4gICAgICAgIGV4cGVjdChzY2hlbWEuc2FmZVBhcnNlKGp1c3RSaWdodCkuc3VjY2VzcykudG9CZSh0cnVlKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnU2VjdXJpdHkgVmFsaWRhdGlvbiBTdGFuZGFyZHMnLCAoKSA9PiB7XG4gICAgdGVzdCgnc2hvdWxkIHZhbGlkYXRlIGVtYWlsIGNvbmZpcm1hdGlvbiBmb3IgZGVzdHJ1Y3RpdmUgYWN0aW9ucycsICgpID0+IHtcbiAgICAgIGNvbnN0IGRlbGV0ZUNvbmZpcm1TY2hlbWEgPSB6Lm9iamVjdCh7XG4gICAgICAgIGNvbmZpcm1FbWFpbDogei5zdHJpbmcoKS5taW4oMSwgJ0VtYWlsIGNvbmZpcm1hdGlvbiBpcyByZXF1aXJlZCB0byBkZWxldGUgYWNjb3VudCcpLmVtYWlsKCdQbGVhc2UgZW50ZXIgYSB2YWxpZCBlbWFpbCBhZGRyZXNzIHRoYXQgbWF0Y2hlcyB5b3VyIGFjY291bnQnKSxcbiAgICAgICAgcmVhc29uOiB6LnN0cmluZygpLm1heCg1MDAsICdSZWFzb24gbXVzdCBiZSBsZXNzIHRoYW4gNTAwIGNoYXJhY3RlcnMnKS5vcHRpb25hbCgpLFxuICAgICAgfSk7XG5cbiAgICAgIGNvbnN0IHZhbGlkUmVzdWx0ID0gZGVsZXRlQ29uZmlybVNjaGVtYS5zYWZlUGFyc2Uoe1xuICAgICAgICBjb25maXJtRW1haWw6ICd1c2VyQGRvbWFpbi5jb20nLFxuICAgICAgICByZWFzb246ICdObyBsb25nZXIgbmVlZGVkJ1xuICAgICAgfSk7XG5cbiAgICAgIGNvbnN0IGludmFsaWRSZXN1bHQgPSBkZWxldGVDb25maXJtU2NoZW1hLnNhZmVQYXJzZSh7XG4gICAgICAgIGNvbmZpcm1FbWFpbDogJycsXG4gICAgICAgIHJlYXNvbjogJ2EnLnJlcGVhdCg1MDEpXG4gICAgICB9KTtcblxuICAgICAgZXhwZWN0KHZhbGlkUmVzdWx0LnN1Y2Nlc3MpLnRvQmUodHJ1ZSk7XG4gICAgICBleHBlY3QoaW52YWxpZFJlc3VsdC5zdWNjZXNzKS50b0JlKGZhbHNlKTtcblxuICAgICAgaWYgKCFpbnZhbGlkUmVzdWx0LnN1Y2Nlc3MpIHtcbiAgICAgICAgY29uc3QgZXJyb3JzID0gaW52YWxpZFJlc3VsdC5lcnJvci5pc3N1ZXM7XG4gICAgICAgIGV4cGVjdChlcnJvcnMuc29tZShlID0+IGUubWVzc2FnZS5pbmNsdWRlcygnRW1haWwgY29uZmlybWF0aW9uIGlzIHJlcXVpcmVkJykpKS50b0JlKHRydWUpO1xuICAgICAgICBleHBlY3QoZXJyb3JzLnNvbWUoZSA9PiBlLm1lc3NhZ2UuaW5jbHVkZXMoJ2xlc3MgdGhhbiA1MDAgY2hhcmFjdGVycycpKSkudG9CZSh0cnVlKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ0Z1dHVyZSBGb3JtIENvbXBsaWFuY2UgVmFsaWRhdGlvbicsICgpID0+IHtcbiAgICB0ZXN0KCdzaG91bGQgcHJvdmlkZSB0ZW1wbGF0ZSBmb3IgZnV0dXJlIGZvcm0gdmFsaWRhdGlvbiBzY2hlbWFzJywgKCkgPT4ge1xuICAgICAgLy8gVGVtcGxhdGUgdGhhdCBhbGwgZnV0dXJlIGZvcm1zIHNob3VsZCBmb2xsb3dcbiAgICAgIGNvbnN0IGZ1dHVyZUZvcm1UZW1wbGF0ZSA9IHoub2JqZWN0KHtcbiAgICAgICAgLy8gUmVxdWlyZWQgdGV4dCBmaWVsZCB3aXRoIGV4YW1wbGVcbiAgICAgICAgdGl0bGU6IHouc3RyaW5nKClcbiAgICAgICAgICAubWluKDEsICdUaXRsZSBpcyByZXF1aXJlZCAoZXhhbXBsZTogRGVzY3JpcHRpdmUgVGl0bGUpJylcbiAgICAgICAgICAubWF4KDIwMCwgJ1RpdGxlIG11c3QgYmUgbGVzcyB0aGFuIDIwMCBjaGFyYWN0ZXJzJyksXG4gICAgICAgIFxuICAgICAgICAvLyBPcHRpb25hbCB0ZXh0IGZpZWxkIHdpdGggdmFsaWRhdGlvblxuICAgICAgICBkZXNjcmlwdGlvbjogei5zdHJpbmcoKVxuICAgICAgICAgIC5tYXgoMTAwMCwgJ0Rlc2NyaXB0aW9uIG11c3QgYmUgbGVzcyB0aGFuIDEwMDAgY2hhcmFjdGVycycpXG4gICAgICAgICAgLm9wdGlvbmFsKCksXG4gICAgICAgIFxuICAgICAgICAvLyBFbWFpbCBmaWVsZCB3aXRoIGZvcm1hdCBleGFtcGxlXG4gICAgICAgIGVtYWlsOiB6LnN0cmluZygpXG4gICAgICAgICAgLm1pbigxLCAnRW1haWwgYWRkcmVzcyBpcyByZXF1aXJlZCcpXG4gICAgICAgICAgLmVtYWlsKCdQbGVhc2UgZW50ZXIgYSB2YWxpZCBlbWFpbCBhZGRyZXNzIChleGFtcGxlOiB1c2VyQGRvbWFpbi5jb20pJyksXG4gICAgICAgIFxuICAgICAgICAvLyBRdWViZWMtc3BlY2lmaWMgcGhvbmUgbnVtYmVyXG4gICAgICAgIHBob25lOiB6LnN0cmluZygpXG4gICAgICAgICAgLnJlZ2V4KC9eKFxcKzFcXHM/KT8oXFwoXFxkezN9XFwpfFxcZHszfSlbXFxzLi1dP1xcZHszfVtcXHMuLV0/XFxkezR9JC8sICdQaG9uZSBudW1iZXIgbXVzdCBiZSBhIHZhbGlkIE5vcnRoIEFtZXJpY2FuIGZvcm1hdCAoZXhhbXBsZTogKDUxNCkgMTIzLTQ1NjcpJylcbiAgICAgICAgICAub3B0aW9uYWwoKSxcbiAgICAgICAgXG4gICAgICAgIC8vIE51bWVyaWMgZmllbGQgd2l0aCByYW5nZVxuICAgICAgICBhbW91bnQ6IHouc3RyaW5nKClcbiAgICAgICAgICAubWluKDEsICdBbW91bnQgaXMgcmVxdWlyZWQgKGV4YW1wbGU6IDEyNS41MCknKVxuICAgICAgICAgIC5yZWdleCgvXlxcZCsoXFwuXFxkezEsMn0pPyQvLCAnQW1vdW50IG11c3QgYmUgYSB2YWxpZCBudW1iZXIgd2l0aCB1cCB0byAyIGRlY2ltYWwgcGxhY2VzIChleGFtcGxlOiAxMjUuNTApJyksXG4gICAgICAgIFxuICAgICAgICAvLyBTZWxlY3Rpb24gZmllbGRcbiAgICAgICAgY2F0ZWdvcnk6IHouc3RyaW5nKClcbiAgICAgICAgICAubWluKDEsICdQbGVhc2Ugc2VsZWN0IGEgY2F0ZWdvcnkgZnJvbSB0aGUgZHJvcGRvd24nKVxuICAgICAgfSk7XG5cbiAgICAgIC8vIFRlc3QgdGhlIHRlbXBsYXRlIHdvcmtzIGNvcnJlY3RseVxuICAgICAgY29uc3QgdmFsaWREYXRhID0ge1xuICAgICAgICB0aXRsZTogJ1Rlc3QgRG9jdW1lbnQnLFxuICAgICAgICBkZXNjcmlwdGlvbjogJ1RoaXMgaXMgYSB0ZXN0IGRlc2NyaXB0aW9uJyxcbiAgICAgICAgZW1haWw6ICd0ZXN0QGV4YW1wbGUuY29tJyxcbiAgICAgICAgcGhvbmU6ICcoNTE0KSAxMjMtNDU2NycsXG4gICAgICAgIGFtb3VudDogJzEyNS41MCcsXG4gICAgICAgIGNhdGVnb3J5OiAndGVzdCdcbiAgICAgIH07XG5cbiAgICAgIGNvbnN0IGludmFsaWREYXRhID0ge1xuICAgICAgICB0aXRsZTogJycsXG4gICAgICAgIGRlc2NyaXB0aW9uOiAnYScucmVwZWF0KDEwMDEpLFxuICAgICAgICBlbWFpbDogJ2ludmFsaWQtZW1haWwnLFxuICAgICAgICBwaG9uZTogJzEyMycsXG4gICAgICAgIGFtb3VudDogJzEyNS41NTUnLFxuICAgICAgICBjYXRlZ29yeTogJydcbiAgICAgIH07XG5cbiAgICAgIGV4cGVjdChmdXR1cmVGb3JtVGVtcGxhdGUuc2FmZVBhcnNlKHZhbGlkRGF0YSkuc3VjY2VzcykudG9CZSh0cnVlKTtcbiAgICAgIFxuICAgICAgY29uc3QgcmVzdWx0ID0gZnV0dXJlRm9ybVRlbXBsYXRlLnNhZmVQYXJzZShpbnZhbGlkRGF0YSk7XG4gICAgICBleHBlY3QocmVzdWx0LnN1Y2Nlc3MpLnRvQmUoZmFsc2UpO1xuXG4gICAgICBpZiAoIXJlc3VsdC5zdWNjZXNzKSB7XG4gICAgICAgIGNvbnN0IG1lc3NhZ2VzID0gcmVzdWx0LmVycm9yLmlzc3Vlcy5tYXAoaSA9PiBpLm1lc3NhZ2UpO1xuICAgICAgICBleHBlY3QobWVzc2FnZXMuc29tZShtID0+IG0uaW5jbHVkZXMoJ2V4YW1wbGU6JykpKS50b0JlKHRydWUpO1xuICAgICAgICBleHBlY3QobWVzc2FnZXMuc29tZShtID0+IG0uaW5jbHVkZXMoJ3ZhbGlkIGVtYWlsJykpKS50b0JlKHRydWUpO1xuICAgICAgICBleHBlY3QobWVzc2FnZXMuc29tZShtID0+IG0uaW5jbHVkZXMoJ3NlbGVjdCcpKSkudG9CZSh0cnVlKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfSk7XG59KTtcblxuLyoqXG4gKiBWYWxpZGF0aW9uIFJ1bGVzIEVuZm9yY2VtZW50IFRlc3RzXG4gKiBUZXN0cyB0byBlbnN1cmUgYWxsIGZvcm1zIGZvbGxvdyB0aGUgZXN0YWJsaXNoZWQgdmFsaWRhdGlvbiBwYXR0ZXJuc1xuICovXG5kZXNjcmliZSgnVmFsaWRhdGlvbiBSdWxlcyBFbmZvcmNlbWVudCcsICgpID0+IHtcbiAgZGVzY3JpYmUoJ0Vycm9yIE1lc3NhZ2UgUXVhbGl0eSBDaGVja3MnLCAoKSA9PiB7XG4gICAgdGVzdCgnc2hvdWxkIHZhbGlkYXRlIGVycm9yIG1lc3NhZ2VzIGNvbnRhaW4gZXhhbXBsZXMgd2hlcmUgYXBwcm9wcmlhdGUnLCAoKSA9PiB7XG4gICAgICBjb25zdCBmaWVsZHNSZXF1aXJpbmdFeGFtcGxlcyA9IFtcbiAgICAgICAgJ2VtYWlsJyxcbiAgICAgICAgJ3Bob25lJyxcbiAgICAgICAgJ3Bvc3RhbENvZGUnLCBcbiAgICAgICAgJ2Ftb3VudCcsXG4gICAgICAgICd0aW1lJyxcbiAgICAgICAgJ25hbWUnLFxuICAgICAgICAndGl0bGUnLFxuICAgICAgICAncGFzc3dvcmQnXG4gICAgICBdO1xuXG4gICAgICAvLyBNb2NrIHNjaGVtYSB2YWxpZGF0aW9uIHRoYXQgc2hvdWxkIGluY2x1ZGUgZXhhbXBsZXNcbiAgICAgIGZpZWxkc1JlcXVpcmluZ0V4YW1wbGVzLmZvckVhY2goZmllbGRUeXBlID0+IHtcbiAgICAgICAgLy8gRWFjaCBmaWVsZCB0eXBlIHNob3VsZCBoYXZlIHZhbGlkYXRpb24gdGhhdCBpbmNsdWRlcyBleGFtcGxlc1xuICAgICAgICBzd2l0Y2ggKGZpZWxkVHlwZSkge1xuICAgICAgICAgIGNhc2UgJ2VtYWlsJzpcbiAgICAgICAgICAgIGNvbnN0IGVtYWlsU2NoZW1hID0gei5zdHJpbmcoKS5lbWFpbCgnUGxlYXNlIGVudGVyIGEgdmFsaWQgZW1haWwgYWRkcmVzcyAoZXhhbXBsZTogdXNlckBkb21haW4uY29tKScpO1xuICAgICAgICAgICAgY29uc3QgZW1haWxSZXN1bHQgPSBlbWFpbFNjaGVtYS5zYWZlUGFyc2UoJ2ludmFsaWQnKTtcbiAgICAgICAgICAgIGV4cGVjdChlbWFpbFJlc3VsdC5zdWNjZXNzKS50b0JlKGZhbHNlKTtcbiAgICAgICAgICAgIGlmICghZW1haWxSZXN1bHQuc3VjY2Vzcykge1xuICAgICAgICAgICAgICBleHBlY3QoZW1haWxSZXN1bHQuZXJyb3IuaXNzdWVzWzBdLm1lc3NhZ2UpLnRvQ29udGFpbignZXhhbXBsZTonKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIFxuICAgICAgICAgIGNhc2UgJ3Bob25lJzpcbiAgICAgICAgICAgIGNvbnN0IHBob25lU2NoZW1hID0gei5zdHJpbmcoKS5yZWdleCgvcGhvbmUtcmVnZXgvLCAnUGhvbmUgbnVtYmVyIG11c3QgYmUgYSB2YWxpZCBOb3J0aCBBbWVyaWNhbiBmb3JtYXQgKGV4YW1wbGU6ICg1MTQpIDEyMy00NTY3KScpO1xuICAgICAgICAgICAgY29uc3QgcGhvbmVSZXN1bHQgPSBwaG9uZVNjaGVtYS5zYWZlUGFyc2UoJ2ludmFsaWQnKTtcbiAgICAgICAgICAgIGV4cGVjdChwaG9uZVJlc3VsdC5zdWNjZXNzKS50b0JlKGZhbHNlKTtcbiAgICAgICAgICAgIGlmICghcGhvbmVSZXN1bHQuc3VjY2Vzcykge1xuICAgICAgICAgICAgICBleHBlY3QocGhvbmVSZXN1bHQuZXJyb3IuaXNzdWVzWzBdLm1lc3NhZ2UpLnRvQ29udGFpbignZXhhbXBsZTonKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9KTtcblxuICAgIHRlc3QoJ3Nob3VsZCBlbmZvcmNlIGNvbnNpc3RlbnQgbGFuZ3VhZ2UgYW5kIHRvbmUnLCAoKSA9PiB7XG4gICAgICAvLyBFcnJvciBtZXNzYWdlcyBzaG91bGQgYmU6XG4gICAgICAvLyAtIFBvbGl0ZSBhbmQgaGVscGZ1bFxuICAgICAgLy8gLSBDbGVhciBhYm91dCB3aGF0J3Mgd3JvbmdcbiAgICAgIC8vIC0gUHJvdmlkZSBndWlkYW5jZSBvbiBob3cgdG8gZml4XG4gICAgICAvLyAtIFVzZSBjb25zaXN0ZW50IGxhbmd1YWdlIHBhdHRlcm5zXG5cbiAgICAgIGNvbnN0IGdvb2RNZXNzYWdlUGF0dGVybnMgPSBbXG4gICAgICAgIC9wbGVhc2UgZW50ZXIvaSxcbiAgICAgICAgL211c3QgYmUvaSxcbiAgICAgICAgL3Nob3VsZCBiZS9pLFxuICAgICAgICAvZXhhbXBsZTovaSxcbiAgICAgICAgL2JldHdlZW4gXFxkKyBhbmQgXFxkKy9pLFxuICAgICAgICAvdmFsaWQgLisgZm9ybWF0L2lcbiAgICAgIF07XG5cbiAgICAgIGNvbnN0IGJhZE1lc3NhZ2VQYXR0ZXJucyA9IFtcbiAgICAgICAgL2ludmFsaWQvaSwgLy8gVG9vIHZhZ3VlIHdpdGhvdXQgZXhwbGFuYXRpb25cbiAgICAgICAgL2Vycm9yL2ksICAgLy8gRG9lc24ndCBoZWxwIHVzZXIgdW5kZXJzdGFuZCB3aGF0IHRvIGRvXG4gICAgICAgIC93cm9uZy9pLCAgIC8vIE5lZ2F0aXZlIHRvbmVcbiAgICAgIF07XG5cbiAgICAgIC8vIFRlc3QgdGhhdCBnb29kIHBhdHRlcm5zIGFyZSB1c2VkIGFwcHJvcHJpYXRlbHlcbiAgICAgIGNvbnN0IGVtYWlsTWVzc2FnZSA9ICdQbGVhc2UgZW50ZXIgYSB2YWxpZCBlbWFpbCBhZGRyZXNzIChleGFtcGxlOiB1c2VyQGRvbWFpbi5jb20pJztcbiAgICAgIGNvbnN0IG5hbWVNZXNzYWdlID0gJ0ZpcnN0IG5hbWUgaXMgcmVxdWlyZWQgKGV4YW1wbGU6IEplYW4pJztcbiAgICAgIGNvbnN0IHJhbmdlTWVzc2FnZSA9ICdBZ2UgbXVzdCBiZSBiZXR3ZWVuIDE4IGFuZCAxMjAgeWVhcnMnO1xuXG4gICAgICBleHBlY3QoZ29vZE1lc3NhZ2VQYXR0ZXJucy5zb21lKHBhdHRlcm4gPT4gcGF0dGVybi50ZXN0KGVtYWlsTWVzc2FnZSkpKS50b0JlKHRydWUpO1xuICAgICAgZXhwZWN0KGdvb2RNZXNzYWdlUGF0dGVybnMuc29tZShwYXR0ZXJuID0+IHBhdHRlcm4udGVzdChuYW1lTWVzc2FnZSkpKS50b0JlKHRydWUpO1xuICAgICAgZXhwZWN0KGdvb2RNZXNzYWdlUGF0dGVybnMuc29tZShwYXR0ZXJuID0+IHBhdHRlcm4udGVzdChyYW5nZU1lc3NhZ2UpKSkudG9CZSh0cnVlKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ0ZpZWxkLVNwZWNpZmljIFZhbGlkYXRpb24gU3RhbmRhcmRzJywgKCkgPT4ge1xuICAgIHRlc3QoJ3Nob3VsZCB2YWxpZGF0ZSBRdWViZWMtc3BlY2lmaWMgZmllbGQgcmVxdWlyZW1lbnRzJywgKCkgPT4ge1xuICAgICAgLy8gUXVlYmVjLXNwZWNpZmljIHZhbGlkYXRpb25zIHNob3VsZCBiZSBwcm9wZXJseSBoYW5kbGVkXG4gICAgICBjb25zdCBxdWViZWNGaWVsZHMgPSB7XG4gICAgICAgIHBvc3RhbENvZGU6IHouc3RyaW5nKCkucmVnZXgoL15bQS1aXVxcZFtBLVpdXFxzP1xcZFtBLVpdXFxkJC8sICdQb3N0YWwgY29kZSBtdXN0IGZvbGxvdyBDYW5hZGlhbiBmb3JtYXQgKGV4YW1wbGU6IEgxQSAxQjEpJyksXG4gICAgICAgIGNpdHk6IHouc3RyaW5nKCkucmVnZXgoL15bYS16QS1aw4Atw79cXHMnLV0rJC8sICdDaXR5IG5hbWUgY2FuIG9ubHkgY29udGFpbiBsZXR0ZXJzLCBzcGFjZXMsIGFwb3N0cm9waGVzIGFuZCBoeXBoZW5zJyksXG4gICAgICAgIHBob25lOiB6LnN0cmluZygpLnJlZ2V4KC9eKFxcKzFcXHM/KT8oXFwoXFxkezN9XFwpfFxcZHszfSlbXFxzLi1dP1xcZHszfVtcXHMuLV0/XFxkezR9JC8sICdQaG9uZSBudW1iZXIgbXVzdCBiZSBhIHZhbGlkIE5vcnRoIEFtZXJpY2FuIGZvcm1hdCAoZXhhbXBsZTogKDUxNCkgMTIzLTQ1NjcpJylcbiAgICAgIH07XG5cbiAgICAgIC8vIFRlc3QgdmFsaWQgUXVlYmVjIGZvcm1hdHNcbiAgICAgIGV4cGVjdChxdWViZWNGaWVsZHMucG9zdGFsQ29kZS5zYWZlUGFyc2UoJ0gxQSAxQjEnKS5zdWNjZXNzKS50b0JlKHRydWUpO1xuICAgICAgZXhwZWN0KHF1ZWJlY0ZpZWxkcy5jaXR5LnNhZmVQYXJzZSgnTW9udHLDqWFsJykuc3VjY2VzcykudG9CZSh0cnVlKTtcbiAgICAgIGV4cGVjdChxdWViZWNGaWVsZHMucGhvbmUuc2FmZVBhcnNlKCcoNTE0KSAxMjMtNDU2NycpLnN1Y2Nlc3MpLnRvQmUodHJ1ZSk7XG5cbiAgICAgIC8vIFRlc3QgaW52YWxpZCBmb3JtYXRzIGhhdmUgaGVscGZ1bCBtZXNzYWdlc1xuICAgICAgY29uc3QgdGVzdEludmFsaWRJbnB1dHMgPSB7XG4gICAgICAgIHBvc3RhbENvZGU6ICcxMjM0NScsXG4gICAgICAgIGNpdHk6ICdDaXR5MTIzJyxcbiAgICAgICAgcGhvbmU6ICcxMjMnXG4gICAgICB9O1xuXG4gICAgICBPYmplY3QuZW50cmllcyhxdWViZWNGaWVsZHMpLmZvckVhY2goKFtmaWVsZE5hbWUsIHNjaGVtYV0pID0+IHtcbiAgICAgICAgY29uc3QgaW52YWxpZElucHV0ID0gdGVzdEludmFsaWRJbnB1dHNbZmllbGROYW1lIGFzIGtleW9mIHR5cGVvZiB0ZXN0SW52YWxpZElucHV0c107XG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IHNjaGVtYS5zYWZlUGFyc2UoaW52YWxpZElucHV0KTtcbiAgICAgICAgZXhwZWN0KHJlc3VsdC5zdWNjZXNzKS50b0JlKGZhbHNlKTtcbiAgICAgICAgaWYgKCFyZXN1bHQuc3VjY2Vzcykge1xuICAgICAgICAgIC8vIE9ubHkgcG9zdGFsIGNvZGUgYW5kIHBob25lIG5lZWQgZXhhbXBsZXMsIGNpdHkgZmllbGQgZXhwbGFpbnMgY2hhcmFjdGVyIHJlc3RyaWN0aW9uc1xuICAgICAgICAgIGlmIChmaWVsZE5hbWUgPT09ICdwb3N0YWxDb2RlJyB8fCBmaWVsZE5hbWUgPT09ICdwaG9uZScpIHtcbiAgICAgICAgICAgIGV4cGVjdChyZXN1bHQuZXJyb3IuaXNzdWVzWzBdLm1lc3NhZ2UpLnRvQ29udGFpbignZXhhbXBsZTonKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgZXhwZWN0KHJlc3VsdC5lcnJvci5pc3N1ZXNbMF0ubWVzc2FnZSkudG9Db250YWluKCdjYW4gb25seSBjb250YWluJyk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9KTtcblxuICAgIHRlc3QoJ3Nob3VsZCB2YWxpZGF0ZSBudW1lcmljIGZpZWxkcyBoYXZlIHByb3BlciBjb25zdHJhaW50cycsICgpID0+IHtcbiAgICAgIGNvbnN0IG51bWVyaWNWYWxpZGF0aW9ucyA9IFtcbiAgICAgICAge1xuICAgICAgICAgIG5hbWU6ICdhbW91bnQnLFxuICAgICAgICAgIHNjaGVtYTogei5zdHJpbmcoKS5yZWdleCgvXlxcZCsoXFwuXFxkezEsMn0pPyQvLCAnQW1vdW50IG11c3QgYmUgYSB2YWxpZCBudW1iZXIgd2l0aCB1cCB0byAyIGRlY2ltYWwgcGxhY2VzIChleGFtcGxlOiAxMjUuNTApJyksXG4gICAgICAgICAgdmFsaWQ6IFsnMTI1LjUwJywgJzAuOTknLCAnMTAwMCddLFxuICAgICAgICAgIGludmFsaWQ6IFsnMTI1LjU1NScsICdhYmMnLCAnJ11cbiAgICAgICAgfSxcbiAgICAgICAge1xuICAgICAgICAgIG5hbWU6ICdjYXBhY2l0eScsXG4gICAgICAgICAgc2NoZW1hOiB6Lm51bWJlcigpLm1pbigxLCAnQ2FwYWNpdHkgbXVzdCBiZSBiZXR3ZWVuIDEgYW5kIDUwMCBwZW9wbGUnKS5tYXgoNTAwLCAnQ2FwYWNpdHkgbXVzdCBiZSBiZXR3ZWVuIDEgYW5kIDUwMCBwZW9wbGUnKSxcbiAgICAgICAgICB2YWxpZDogWzEsIDUwLCA1MDBdLFxuICAgICAgICAgIGludmFsaWQ6IFswLCA1MDEsIC0xXVxuICAgICAgICB9XG4gICAgICBdO1xuXG4gICAgICBudW1lcmljVmFsaWRhdGlvbnMuZm9yRWFjaCgoeyBuYW1lLCBzY2hlbWEsIHZhbGlkLCBpbnZhbGlkIH0pID0+IHtcbiAgICAgICAgLy8gVGVzdCB2YWxpZCBpbnB1dHNcbiAgICAgICAgdmFsaWQuZm9yRWFjaChpbnB1dCA9PiB7XG4gICAgICAgICAgZXhwZWN0KHNjaGVtYS5zYWZlUGFyc2UoaW5wdXQpLnN1Y2Nlc3MpLnRvQmUodHJ1ZSk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8vIFRlc3QgaW52YWxpZCBpbnB1dHMgaGF2ZSBoZWxwZnVsIG1lc3NhZ2VzXG4gICAgICAgIGludmFsaWQuZm9yRWFjaChpbnB1dCA9PiB7XG4gICAgICAgICAgY29uc3QgcmVzdWx0ID0gc2NoZW1hLnNhZmVQYXJzZShpbnB1dCk7XG4gICAgICAgICAgZXhwZWN0KHJlc3VsdC5zdWNjZXNzKS50b0JlKGZhbHNlKTtcbiAgICAgICAgICBpZiAoIXJlc3VsdC5zdWNjZXNzICYmIG5hbWUgPT09ICdhbW91bnQnKSB7XG4gICAgICAgICAgICBleHBlY3QocmVzdWx0LmVycm9yLmlzc3Vlc1swXS5tZXNzYWdlKS50b0NvbnRhaW4oJ2V4YW1wbGU6Jyk7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9KTtcbn0pO1xuXG4vKipcbiAqIEZ1dHVyZSBGb3JtIENvbXBsaWFuY2UgR3VhcmRcbiAqIFV0aWxpdHkgZnVuY3Rpb25zIHRvIGVuc3VyZSBuZXcgZm9ybXMgZm9sbG93IHZhbGlkYXRpb24gc3RhbmRhcmRzXG4gKi9cbmRlc2NyaWJlKCdGdXR1cmUgRm9ybSBDb21wbGlhbmNlIEd1YXJkcycsICgpID0+IHtcbiAgZGVzY3JpYmUoJ1ZhbGlkYXRpb24gU2NoZW1hIENoZWNrZXJzJywgKCkgPT4ge1xuICAgIHRlc3QoJ3Nob3VsZCB2YWxpZGF0ZSB0aGF0IHNjaGVtYSBoYXMgcHJvcGVyIGVycm9yIG1lc3NhZ2VzJywgKCkgPT4ge1xuICAgICAgY29uc3QgdmFsaWRhdGVTY2hlbWFDb21wbGlhbmNlID0gKHNjaGVtYTogei5ab2RUeXBlLCBmaWVsZE5hbWU6IHN0cmluZykgPT4ge1xuICAgICAgICAvLyBUZXN0IHdpdGggYm90aCBlbXB0eSBhbmQgaW52YWxpZCBmb3JtYXQgdG8gY2hlY2sgYWxsIHZhbGlkYXRpb24gbWVzc2FnZXNcbiAgICAgICAgY29uc3QgZW1wdHlSZXN1bHQgPSBzY2hlbWEuc2FmZVBhcnNlKCcnKTtcbiAgICAgICAgY29uc3QgaW52YWxpZFJlc3VsdCA9IHNjaGVtYS5zYWZlUGFyc2UoJ2ludmFsaWQtZm9ybWF0Jyk7XG4gICAgICAgIFxuICAgICAgICAvLyBDaGVjayBib3RoIHJlc3VsdHMgZm9yIGNvbXBsaWFuY2VcbiAgICAgICAgY29uc3QgcmVzdWx0cyA9IFtlbXB0eVJlc3VsdCwgaW52YWxpZFJlc3VsdF0uZmlsdGVyKHIgPT4gIXIuc3VjY2Vzcyk7XG4gICAgICAgIFxuICAgICAgICBpZiAocmVzdWx0cy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgLy8gQ2hlY2sgaWYgYW55IGVycm9yIG1lc3NhZ2UgaXMgY29tcGxpYW50XG4gICAgICAgICAgY29uc3QgaGFzQ29tcGxpYW50TWVzc2FnZSA9IHJlc3VsdHMuc29tZShyZXN1bHQgPT4ge1xuICAgICAgICAgICAgaWYgKCFyZXN1bHQuc3VjY2Vzcykge1xuICAgICAgICAgICAgICBjb25zdCBlcnJvck1lc3NhZ2UgPSByZXN1bHQuZXJyb3IuaXNzdWVzWzBdLm1lc3NhZ2U7XG4gICAgICAgICAgICAgIGNvbnN0IGhhc0d1aWRhbmNlID0gZXJyb3JNZXNzYWdlLmluY2x1ZGVzKCdtdXN0IGJlJykgfHwgZXJyb3JNZXNzYWdlLmluY2x1ZGVzKCdzaG91bGQgYmUnKSB8fCBlcnJvck1lc3NhZ2UuaW5jbHVkZXMoJ3BsZWFzZScpIHx8IGVycm9yTWVzc2FnZS5pbmNsdWRlcygncmVxdWlyZWQnKTtcbiAgICAgICAgICAgICAgY29uc3QgaXNOb3RWYWd1ZSA9ICFlcnJvck1lc3NhZ2UubWF0Y2goL14oaW52YWxpZHxlcnJvcnx3cm9uZykkL2kpO1xuICAgICAgICAgICAgICByZXR1cm4gaGFzR3VpZGFuY2UgJiYgaXNOb3RWYWd1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICB9KTtcblxuICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBoYXNHdWlkYW5jZTogaGFzQ29tcGxpYW50TWVzc2FnZSxcbiAgICAgICAgICAgIGlzTm90VmFndWU6IGhhc0NvbXBsaWFudE1lc3NhZ2UsXG4gICAgICAgICAgICBlcnJvck1lc3NhZ2U6IHJlc3VsdHNbMF0uc3VjY2VzcyA/ICcnIDogcmVzdWx0c1swXS5lcnJvci5pc3N1ZXNbMF0ubWVzc2FnZSxcbiAgICAgICAgICAgIGNvbXBsaWFuY2U6IGhhc0NvbXBsaWFudE1lc3NhZ2VcbiAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB7IGNvbXBsaWFuY2U6IHRydWUgfTtcbiAgICAgIH07XG5cbiAgICAgIC8vIFRlc3Qgd2l0aCBjb21wbGlhbnQgc2NoZW1hIC0gdGVzdCB3aXRoIGludmFsaWQgZW1haWwgZm9ybWF0IHRvIGdldCBlbWFpbCB2YWxpZGF0aW9uIG1lc3NhZ2VcbiAgICAgIGNvbnN0IGdvb2RTY2hlbWEgPSB6LnN0cmluZygpLm1pbigxLCAnRW1haWwgYWRkcmVzcyBpcyByZXF1aXJlZCcpLmVtYWlsKCdQbGVhc2UgZW50ZXIgYSB2YWxpZCBlbWFpbCBhZGRyZXNzIChleGFtcGxlOiB1c2VyQGRvbWFpbi5jb20pJyk7XG4gICAgICBjb25zdCBnb29kUmVzdWx0ID0gdmFsaWRhdGVTY2hlbWFDb21wbGlhbmNlKGdvb2RTY2hlbWEsICdlbWFpbCcpO1xuICAgICAgLy8gVGhlIGNvbXBsaWFuY2Ugc2hvdWxkIGJlIHRydWUgYmVjYXVzZSBpdCBoYXMgZ3VpZGFuY2UgYW5kIGlzIG5vdCB2YWd1ZVxuICAgICAgZXhwZWN0KGdvb2RSZXN1bHQuY29tcGxpYW5jZSkudG9CZSh0cnVlKTtcblxuICAgICAgLy8gVGVzdCB3aXRoIG5vbi1jb21wbGlhbnQgc2NoZW1hXG4gICAgICBjb25zdCBiYWRTY2hlbWEgPSB6LnN0cmluZygpLmVtYWlsKCdJbnZhbGlkIGVtYWlsJyk7XG4gICAgICBjb25zdCBiYWRSZXN1bHQgPSB2YWxpZGF0ZVNjaGVtYUNvbXBsaWFuY2UoYmFkU2NoZW1hLCAnZW1haWwnKTtcbiAgICAgIGV4cGVjdChiYWRSZXN1bHQuY29tcGxpYW5jZSkudG9CZShmYWxzZSk7XG4gICAgfSk7XG4gIH0pO1xufSk7Il0sInZlcnNpb24iOjN9