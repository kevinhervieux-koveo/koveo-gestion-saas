e2e240126823ee73f0cddcc445608c91
"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
const jsx_runtime_1 = require("react/jsx-runtime");
jest.mock('../../client/src/lib/queryClient', () => ({
    apiRequest: (...args) => mockApiRequest(...args),
    queryClient: {
        invalidateQueries: jest.fn(),
        setQueryData: jest.fn(),
    },
}));
jest.mock('../../client/src/hooks/use-auth', () => ({
    useAuth: () => mockUseAuth(),
    AuthProvider: ({ children }) => (0, jsx_runtime_1.jsx)("div", { children: children }),
}));
jest.mock('../../client/src/hooks/use-toast', () => ({
    useToast: () => ({
        toast: jest.fn(),
    }),
}));
// Mock wouter navigation
jest.mock('wouter', () => {
    const mockNavigate = jest.fn();
    return {
        useLocation: jest.fn(() => ['/', mockNavigate]),
        useRoute: jest.fn(() => [true, {}]),
        useRouter: jest.fn(() => ({ navigate: mockNavigate })),
        Router: ({ children }) => (0, jsx_runtime_1.jsx)("div", { "data-testid": "mock-router", children: children }),
        Route: ({ children }) => (0, jsx_runtime_1.jsx)("div", { "data-testid": "mock-route", children: children }),
        Link: ({ children, href, ...props }) => ((0, jsx_runtime_1.jsx)("a", { href: href, "data-testid": "mock-link", ...props, children: children })),
    };
});
const react_1 = require("@testing-library/react");
const user_event_1 = __importDefault(require("@testing-library/user-event"));
require("@testing-library/jest-dom");
const react_query_1 = require("@tanstack/react-query");
const react_2 = __importDefault(require("react"));
// Mock window methods that wouter uses
const mockPushState = jest.fn();
const mockReplaceState = jest.fn();
const mockNavigate = jest.fn();
Object.defineProperty(window.history, 'pushState', { value: mockPushState, writable: true });
Object.defineProperty(window.history, 'replaceState', { value: mockReplaceState, writable: true });
// Components to test
const ResidenceDocuments_1 = __importDefault(require("../../client/src/pages/residents/ResidenceDocuments"));
const BuildingDocuments_1 = __importDefault(require("../../client/src/pages/residents/BuildingDocuments"));
const BuildingDocuments_2 = __importDefault(require("../../client/src/pages/manager/BuildingDocuments"));
const ResidenceDocuments_2 = __importDefault(require("../../client/src/pages/manager/ResidenceDocuments"));
// Mock API requests
const mockApiRequest = jest.fn();
// Mock hooks
const mockUseAuth = jest.fn();
// Demo test data
const demoTenantUser = {
    id: 'tenant-demo-123',
    email: 'tenant@demo.com',
    firstName: 'Demo',
    lastName: 'Tenant',
    role: 'tenant',
};
const demoManagerUser = {
    id: 'manager-demo-456',
    email: 'manager@demo.com',
    firstName: 'Demo',
    lastName: 'Manager',
    role: 'manager',
};
const demoBuildingData = {
    id: 'building-demo-789',
    name: 'Demo Building',
    address: '123 Test Street',
    city: 'Demo City',
    province: 'QC',
    organizationId: 'org-demo-123',
};
const demoResidenceData = {
    id: 'residence-demo-101',
    unitNumber: '101',
    buildingId: 'building-demo-789',
    bedrooms: 2,
    bathrooms: 1,
    squareFootage: 850,
};
const demoBuildingDocuments = [
    {
        id: 'doc-building-1',
        name: 'Building Rules and Regulations',
        type: 'policies',
        uploadDate: '2024-01-15T10:00:00Z',
        fileName: 'building-rules.pdf',
        fileUrl: 'https://demo-storage/building-rules.pdf',
        fileSize: '2.5 MB',
        mimeType: 'application/pdf',
        uploadedBy: 'manager-demo-456',
        isVisibleToTenants: true,
        documentCategory: 'policies',
        entityType: 'building',
        entityId: 'building-demo-789',
    },
    {
        id: 'doc-building-2',
        name: 'Building Financial Report',
        type: 'financial',
        uploadDate: '2024-02-01T14:30:00Z',
        fileName: 'financial-report-2024.pdf',
        fileUrl: 'https://demo-storage/financial-report.pdf',
        fileSize: '1.2 MB',
        mimeType: 'application/pdf',
        uploadedBy: 'manager-demo-456',
        isVisibleToTenants: false,
        documentCategory: 'financial',
        entityType: 'building',
        entityId: 'building-demo-789',
    },
];
const demoResidenceDocuments = [
    {
        id: 'doc-residence-1',
        name: 'Lease Agreement',
        type: 'lease',
        uploadDate: '2024-01-10T09:00:00Z',
        fileName: 'lease-agreement-101.pdf',
        fileUrl: 'https://demo-storage/lease-101.pdf',
        fileSize: '3.1 MB',
        mimeType: 'application/pdf',
        uploadedBy: 'manager-demo-456',
        isVisibleToTenants: true,
        documentCategory: 'lease',
        entityType: 'residence',
        entityId: 'residence-demo-101',
    },
    {
        id: 'doc-residence-2',
        name: 'Maintenance History',
        type: 'maintenance',
        uploadDate: '2024-02-15T11:15:00Z',
        fileName: 'maintenance-log-101.pdf',
        fileUrl: 'https://demo-storage/maintenance-101.pdf',
        fileSize: '0.8 MB',
        mimeType: 'application/pdf',
        uploadedBy: 'manager-demo-456',
        isVisibleToTenants: false,
        documentCategory: 'maintenance',
        entityType: 'residence',
        entityId: 'residence-demo-101',
    },
];
// Import providers
const use_language_1 = require("../../client/src/hooks/use-language");
const use_auth_1 = require("../../client/src/hooks/use-auth");
const use_mobile_menu_1 = require("../../client/src/hooks/use-mobile-menu");
// Test providers wrapper
function TestProviders({ children, userRole = 'tenant', }) {
    const queryClient = new react_query_1.QueryClient({
        defaultOptions: {
            queries: {
                retry: false,
            },
            mutations: {
                retry: false,
            },
        },
    });
    return ((0, jsx_runtime_1.jsx)(react_query_1.QueryClientProvider, { client: queryClient, children: (0, jsx_runtime_1.jsx)(use_language_1.LanguageProvider, { children: (0, jsx_runtime_1.jsx)(use_mobile_menu_1.MobileMenuProvider, { children: (0, jsx_runtime_1.jsx)("div", { "data-testid": "mock-router", children: (0, jsx_runtime_1.jsx)(use_auth_1.AuthProvider, { children: children }) }) }) }) }));
}
describe('Document Management - Comprehensive Testing with Demo Users', () => {
    const user = user_event_1.default.setup();
    beforeEach(() => {
        jest.clearAllMocks();
        // Mock window.confirm for delete operations
        global.confirm = jest.fn(() => true);
        // Mock window.open for downloads
        global.open = jest.fn();
        // Mock URL search params
        delete window.location;
        window.location = {
            search: '?residenceId=residence-demo-101',
            pathname: '/residents/residence/documents',
        };
        // Set default auth mock
        mockUseAuth.mockReturnValue({
            user: demoTenantUser,
            isLoading: false,
        });
    });
    afterEach(() => {
        jest.restoreAllMocks();
    });
    describe('Tenant User - Residents Residence Documents Page', () => {
        it('should display only tenant-visible documents for demo tenant user', async () => {
            // Set tenant user
            mockUseAuth.mockReturnValue({
                user: demoTenantUser,
                isLoading: false,
            });
            // Mock API calls
            mockApiRequest
                .mockResolvedValueOnce(demoTenantUser) // auth/user
                .mockResolvedValueOnce(demoResidenceData) // residence data
                .mockResolvedValueOnce({ documents: demoResidenceDocuments }); // documents
            (0, react_1.render)((0, jsx_runtime_1.jsx)(TestProviders, { userRole: 'tenant', children: (0, jsx_runtime_1.jsx)(ResidenceDocuments_1.default, {}) }));
            // Wait for loading to complete
            await (0, react_1.waitFor)(() => {
                expect(react_1.screen.getByTestId('text-documents-title')).toBeInTheDocument();
            });
            // Should show only documents visible to tenants
            expect(react_1.screen.getByText('Lease Agreement')).toBeInTheDocument();
            expect(react_1.screen.queryByText('Maintenance History')).not.toBeInTheDocument();
            // Should display correct subtitle for tenants
            expect(react_1.screen.getByText('Documents available to tenants')).toBeInTheDocument();
            // Should not show Add Document button for tenants
            expect(react_1.screen.queryByTestId('button-add-document')).not.toBeInTheDocument();
        });
        it('should allow tenant to download visible documents', async () => {
            // Set tenant user
            mockUseAuth.mockReturnValue({
                user: demoTenantUser,
                isLoading: false,
            });
            mockApiRequest
                .mockResolvedValueOnce(demoTenantUser)
                .mockResolvedValueOnce(demoResidenceData)
                .mockResolvedValueOnce({ documents: demoResidenceDocuments });
            (0, react_1.render)((0, jsx_runtime_1.jsx)(TestProviders, { userRole: 'tenant', children: (0, jsx_runtime_1.jsx)(ResidenceDocuments_1.default, {}) }));
            await (0, react_1.waitFor)(() => {
                expect(react_1.screen.getByText('Lease Agreement')).toBeInTheDocument();
            });
            // Click download button
            const downloadButton = react_1.screen.getByTestId('button-download-doc-residence-1');
            await user.click(downloadButton);
            // Should open document URL
            expect(global.open).toHaveBeenCalledWith('https://demo-storage/lease-101.pdf', '_blank');
        });
        it('should show appropriate message when no documents are available to tenants', async () => {
            mockApiRequest
                .mockResolvedValueOnce(demoTenantUser)
                .mockResolvedValueOnce(demoResidenceData)
                .mockResolvedValueOnce({ documents: [] });
            (0, react_1.render)((0, jsx_runtime_1.jsx)(TestProviders, { userRole: 'tenant', children: (0, jsx_runtime_1.jsx)(ResidenceDocuments_1.default, {}) }));
            await (0, react_1.waitFor)(() => {
                expect(react_1.screen.getByText('No Documents Found')).toBeInTheDocument();
            });
            expect(react_1.screen.getByText('No documents are currently available to tenants for this residence.')).toBeInTheDocument();
        });
    });
    describe('Tenant User - Residents Building Documents Page', () => {
        it('should display building documents visible to tenants', async () => {
            mockApiRequest
                .mockResolvedValueOnce(demoTenantUser)
                .mockResolvedValueOnce({ buildings: [demoBuildingData] })
                .mockResolvedValueOnce({ documents: demoBuildingDocuments });
            (0, react_1.render)((0, jsx_runtime_1.jsx)(TestProviders, { userRole: 'tenant', children: (0, jsx_runtime_1.jsx)(BuildingDocuments_1.default, {}) }));
            await (0, react_1.waitFor)(() => {
                expect(react_1.screen.getByText('Building Rules and Regulations')).toBeInTheDocument();
            });
            // Should show only tenant-visible documents
            expect(react_1.screen.getByText('Building Rules and Regulations')).toBeInTheDocument();
            expect(react_1.screen.queryByText('Building Financial Report')).not.toBeInTheDocument();
        });
        it('should allow filtering documents by category', async () => {
            mockApiRequest
                .mockResolvedValueOnce(demoTenantUser)
                .mockResolvedValueOnce({ buildings: [demoBuildingData] })
                .mockResolvedValueOnce({ documents: demoBuildingDocuments });
            (0, react_1.render)((0, jsx_runtime_1.jsx)(TestProviders, { userRole: 'tenant', children: (0, jsx_runtime_1.jsx)(BuildingDocuments_1.default, {}) }));
            await (0, react_1.waitFor)(() => {
                expect(react_1.screen.getByTestId('select-document-category')).toBeInTheDocument();
            });
            // Test category filtering
            const categorySelect = react_1.screen.getByTestId('select-document-category');
            await user.selectOptions(categorySelect, 'policies');
            // Should still show the document since it matches the filter
            expect(react_1.screen.getByText('Building Rules and Regulations')).toBeInTheDocument();
        });
        it('should allow searching documents by name', async () => {
            mockApiRequest
                .mockResolvedValueOnce(demoTenantUser)
                .mockResolvedValueOnce({ buildings: [demoBuildingData] })
                .mockResolvedValueOnce({ documents: demoBuildingDocuments });
            (0, react_1.render)((0, jsx_runtime_1.jsx)(TestProviders, { userRole: 'tenant', children: (0, jsx_runtime_1.jsx)(BuildingDocuments_1.default, {}) }));
            await (0, react_1.waitFor)(() => {
                expect(react_1.screen.getByTestId('input-search-documents')).toBeInTheDocument();
            });
            // Test search functionality
            const searchInput = react_1.screen.getByTestId('input-search-documents');
            await user.type(searchInput, 'Rules');
            // Should show matching document
            expect(react_1.screen.getByText('Building Rules and Regulations')).toBeInTheDocument();
        });
    });
    describe('Manager User - Manager Building Documents Page', () => {
        it('should display all documents for manager with full controls', async () => {
            mockApiRequest
                .mockResolvedValueOnce(demoManagerUser)
                .mockResolvedValueOnce({ buildings: [demoBuildingData] })
                .mockResolvedValueOnce({ documents: demoBuildingDocuments });
            (0, react_1.render)((0, jsx_runtime_1.jsx)(TestProviders, { userRole: 'manager', children: (0, jsx_runtime_1.jsx)(BuildingDocuments_2.default, {}) }));
            await (0, react_1.waitFor)(() => {
                expect(react_1.screen.getByTestId('text-documents-title')).toBeInTheDocument();
            });
            // Should show all documents including manager-only ones
            expect(react_1.screen.getByText('Building Rules and Regulations')).toBeInTheDocument();
            expect(react_1.screen.getByText('Building Financial Report')).toBeInTheDocument();
            // Should show Add Document button for managers
            expect(react_1.screen.getByTestId('button-add-document')).toBeInTheDocument();
            // Should show edit and delete buttons
            expect(react_1.screen.getByTestId('button-edit-doc-building-1')).toBeInTheDocument();
            expect(react_1.screen.getByTestId('button-delete-doc-building-1')).toBeInTheDocument();
        });
        it('should allow manager to create new document', async () => {
            const newDocument = {
                id: 'doc-new-123',
                name: 'New Building Policy',
                type: 'policies',
                uploadDate: '2024-03-01T10:00:00Z',
                isVisibleToTenants: true,
                documentCategory: 'policies',
                entityType: 'building',
                entityId: 'building-demo-789',
            };
            mockApiRequest
                .mockResolvedValueOnce(demoManagerUser)
                .mockResolvedValueOnce({ buildings: [demoBuildingData] })
                .mockResolvedValueOnce({ documents: demoBuildingDocuments })
                .mockResolvedValueOnce(newDocument); // Create document response
            (0, react_1.render)((0, jsx_runtime_1.jsx)(TestProviders, { userRole: 'manager', children: (0, jsx_runtime_1.jsx)(BuildingDocuments_2.default, {}) }));
            await (0, react_1.waitFor)(() => {
                expect(react_1.screen.getByTestId('button-add-document')).toBeInTheDocument();
            });
            // Click Add Document button
            await user.click(react_1.screen.getByTestId('button-add-document'));
            // Fill out the form
            await user.type(react_1.screen.getByTestId('input-document-name'), 'New Building Policy');
            await user.selectOptions(react_1.screen.getByTestId('select-document-type'), 'policies');
            await user.type(react_1.screen.getByTestId('textarea-document-description'), 'New policy document for the building');
            await user.click(react_1.screen.getByTestId('checkbox-visible-to-tenants'));
            // Submit the form
            await user.click(react_1.screen.getByTestId('button-submit-document'));
            // Verify API call was made
            await (0, react_1.waitFor)(() => {
                expect(mockApiRequest).toHaveBeenCalledWith('POST', '/api/documents', {
                    name: 'New Building Policy',
                    type: 'policies',
                    description: 'New policy document for the building',
                    isVisibleToTenants: true,
                    documentType: 'building',
                    buildingId: 'building-demo-789',
                    uploadedBy: 'manager-demo-456',
                });
            });
        });
        it('should allow manager to upload file with document', async () => {
            mockApiRequest
                .mockResolvedValueOnce(demoManagerUser)
                .mockResolvedValueOnce({ buildings: [demoBuildingData] })
                .mockResolvedValueOnce({ documents: demoBuildingDocuments })
                .mockResolvedValueOnce({ id: 'doc-new-123' })
                .mockResolvedValueOnce({}); // File upload response
            (0, react_1.render)((0, jsx_runtime_1.jsx)(TestProviders, { userRole: 'manager', children: (0, jsx_runtime_1.jsx)(BuildingDocuments_2.default, {}) }));
            await (0, react_1.waitFor)(() => {
                expect(react_1.screen.getByTestId('button-add-document')).toBeInTheDocument();
            });
            // Click Add Document button
            await user.click(react_1.screen.getByTestId('button-add-document'));
            // Create a mock file
            const file = new File(['test content'], 'test-policy.pdf', { type: 'application/pdf' });
            // Fill out the form
            await user.type(react_1.screen.getByTestId('input-document-name'), 'Test Policy Document');
            await user.selectOptions(react_1.screen.getByTestId('select-document-type'), 'policies');
            await user.upload(react_1.screen.getByTestId('input-file-upload'), file);
            // Submit the form
            await user.click(react_1.screen.getByTestId('button-submit-document'));
            // Verify document creation and file upload API calls
            await (0, react_1.waitFor)(() => {
                expect(mockApiRequest).toHaveBeenCalledWith('POST', '/api/documents', expect.any(Object));
                expect(mockApiRequest).toHaveBeenCalledWith('POST', '/api/documents/doc-new-123/upload', expect.any(FormData));
            });
        });
        it('should allow manager to edit document', async () => {
            mockApiRequest
                .mockResolvedValueOnce(demoManagerUser)
                .mockResolvedValueOnce({ buildings: [demoBuildingData] })
                .mockResolvedValueOnce({ documents: demoBuildingDocuments })
                .mockResolvedValueOnce({ ...demoBuildingDocuments[0], name: 'Updated Building Rules' });
            (0, react_1.render)((0, jsx_runtime_1.jsx)(TestProviders, { userRole: 'manager', children: (0, jsx_runtime_1.jsx)(BuildingDocuments_2.default, {}) }));
            await (0, react_1.waitFor)(() => {
                expect(react_1.screen.getByTestId('button-edit-doc-building-1')).toBeInTheDocument();
            });
            // Click edit button
            await user.click(react_1.screen.getByTestId('button-edit-doc-building-1'));
            // Modify the document name
            const nameInput = react_1.screen.getByTestId('input-edit-document-name');
            await user.clear(nameInput);
            await user.type(nameInput, 'Updated Building Rules');
            // Change visibility
            await user.click(react_1.screen.getByTestId('checkbox-edit-visible-to-tenants'));
            // Submit the changes
            await user.click(react_1.screen.getByTestId('button-update-document'));
            // Verify API call was made
            await (0, react_1.waitFor)(() => {
                expect(mockApiRequest).toHaveBeenCalledWith('PUT', '/api/documents/doc-building-1', {
                    name: 'Updated Building Rules',
                    type: 'policies',
                    isVisibleToTenants: false,
                });
            });
        });
        it('should allow manager to delete document', async () => {
            mockApiRequest
                .mockResolvedValueOnce(demoManagerUser)
                .mockResolvedValueOnce({ buildings: [demoBuildingData] })
                .mockResolvedValueOnce({ documents: demoBuildingDocuments })
                .mockResolvedValueOnce({}); // Delete response
            (0, react_1.render)((0, jsx_runtime_1.jsx)(TestProviders, { userRole: 'manager', children: (0, jsx_runtime_1.jsx)(BuildingDocuments_2.default, {}) }));
            await (0, react_1.waitFor)(() => {
                expect(react_1.screen.getByTestId('button-delete-doc-building-1')).toBeInTheDocument();
            });
            // Click delete button
            await user.click(react_1.screen.getByTestId('button-delete-doc-building-1'));
            // Verify confirmation dialog and API call
            await (0, react_1.waitFor)(() => {
                expect(global.confirm).toHaveBeenCalledWith('Are you sure you want to delete this document?');
                expect(mockApiRequest).toHaveBeenCalledWith('DELETE', '/api/documents/doc-building-1?type=building');
            });
        });
    });
    describe('Manager User - Manager Residence Documents Page', () => {
        it('should display residence documents with full management controls', async () => {
            mockApiRequest
                .mockResolvedValueOnce(demoManagerUser)
                .mockResolvedValueOnce(demoResidenceData)
                .mockResolvedValueOnce({ buildings: [demoBuildingData] })
                .mockResolvedValueOnce({ documents: demoResidenceDocuments });
            // Mock URL params for residence ID
            window.location = {
                search: '?residenceId=residence-demo-101',
                pathname: '/manager/residences/documents',
            };
            (0, react_1.render)((0, jsx_runtime_1.jsx)(TestProviders, { userRole: 'manager', children: (0, jsx_runtime_1.jsx)(ResidenceDocuments_2.default, {}) }));
            await (0, react_1.waitFor)(() => {
                expect(react_1.screen.getByText('Unit 101 Documents')).toBeInTheDocument();
            });
            // Should show all documents including private ones
            expect(react_1.screen.getByText('Lease Agreement')).toBeInTheDocument();
            expect(react_1.screen.getByText('Maintenance History')).toBeInTheDocument();
            // Should show management controls
            expect(react_1.screen.getByTestId('button-add-document')).toBeInTheDocument();
            expect(react_1.screen.getByTestId('button-edit-doc-residence-1')).toBeInTheDocument();
            expect(react_1.screen.getByTestId('button-delete-doc-residence-1')).toBeInTheDocument();
        });
        it('should show building context information', async () => {
            mockApiRequest
                .mockResolvedValueOnce(demoManagerUser)
                .mockResolvedValueOnce(demoResidenceData)
                .mockResolvedValueOnce({ buildings: [demoBuildingData] })
                .mockResolvedValueOnce({ documents: demoResidenceDocuments });
            (0, react_1.render)((0, jsx_runtime_1.jsx)(TestProviders, { userRole: 'manager', children: (0, jsx_runtime_1.jsx)(ResidenceDocuments_2.default, {}) }));
            await (0, react_1.waitFor)(() => {
                expect(react_1.screen.getByText('Unit 101')).toBeInTheDocument();
            });
            // Should show building information
            expect(react_1.screen.getByText('Demo Building')).toBeInTheDocument();
            expect(react_1.screen.getByText('123 Test Street, Demo City, QC')).toBeInTheDocument();
            expect(react_1.screen.getByText('2 bedrooms • 1 bathrooms • 850 sq ft')).toBeInTheDocument();
        });
        it('should allow manager to create residence-specific document', async () => {
            const newResidenceDocument = {
                id: 'doc-residence-new',
                name: 'Move-in Inspection',
                type: 'inspection',
                isVisibleToTenants: true,
            };
            mockApiRequest
                .mockResolvedValueOnce(demoManagerUser)
                .mockResolvedValueOnce(demoResidenceData)
                .mockResolvedValueOnce({ buildings: [demoBuildingData] })
                .mockResolvedValueOnce({ documents: demoResidenceDocuments })
                .mockResolvedValueOnce(newResidenceDocument);
            (0, react_1.render)((0, jsx_runtime_1.jsx)(TestProviders, { userRole: 'manager', children: (0, jsx_runtime_1.jsx)(ResidenceDocuments_2.default, {}) }));
            await (0, react_1.waitFor)(() => {
                expect(react_1.screen.getByTestId('button-add-document')).toBeInTheDocument();
            });
            // Click Add Document button
            await user.click(react_1.screen.getByTestId('button-add-document'));
            // Fill out the form
            await user.type(react_1.screen.getByTestId('input-document-name'), 'Move-in Inspection');
            await user.selectOptions(react_1.screen.getByTestId('select-document-type'), 'inspection');
            await user.click(react_1.screen.getByTestId('checkbox-visible-to-tenants'));
            // Submit the form
            await user.click(react_1.screen.getByTestId('button-submit-document'));
            // Verify API call was made with residence-specific data
            await (0, react_1.waitFor)(() => {
                expect(mockApiRequest).toHaveBeenCalledWith('POST', '/api/documents', {
                    name: 'Move-in Inspection',
                    type: 'inspection',
                    isVisibleToTenants: true,
                    documentType: 'resident',
                    residenceId: 'residence-demo-101',
                    uploadedBy: 'manager-demo-456',
                });
            });
        });
        it('should navigate back to residences list', async () => {
            mockApiRequest
                .mockResolvedValueOnce(demoManagerUser)
                .mockResolvedValueOnce(demoResidenceData)
                .mockResolvedValueOnce({ buildings: [demoBuildingData] })
                .mockResolvedValueOnce({ documents: demoResidenceDocuments });
            (0, react_1.render)((0, jsx_runtime_1.jsx)(TestProviders, { userRole: 'manager', children: (0, jsx_runtime_1.jsx)(ResidenceDocuments_2.default, {}) }));
            await (0, react_1.waitFor)(() => {
                expect(react_1.screen.getByTestId('button-back')).toBeInTheDocument();
            });
            // Click back button
            await user.click(react_1.screen.getByTestId('button-back'));
            // Note: mockNavigate is defined in the wouter mock scope
            // Verify navigation functionality is available
            expect(react_1.screen.getByTestId('button-back')).toHaveBeenCalled;
        });
    });
    describe('Error Handling and Edge Cases', () => {
        it('should handle API errors gracefully', async () => {
            mockApiRequest.mockRejectedValueOnce(new Error('Network error'));
            (0, react_1.render)((0, jsx_runtime_1.jsx)(TestProviders, { userRole: 'tenant', children: (0, jsx_runtime_1.jsx)(ResidenceDocuments_1.default, {}) }));
            // Should still render the component without crashing
            await (0, react_1.waitFor)(() => {
                expect(react_1.screen.getByText('Loading documents...')).toBeInTheDocument();
            });
        });
        it('should handle missing residence ID', async () => {
            // Clear URL params
            window.location = {
                search: '',
                pathname: '/manager/residences/documents',
            };
            (0, react_1.render)((0, jsx_runtime_1.jsx)(TestProviders, { userRole: 'manager', children: (0, jsx_runtime_1.jsx)(ResidenceDocuments_2.default, {}) }));
            await (0, react_1.waitFor)(() => {
                expect(react_1.screen.getByText('Residence ID Required')).toBeInTheDocument();
            });
            expect(react_1.screen.getByText('Please provide a residence ID to view documents.')).toBeInTheDocument();
        });
        it('should validate required fields in document creation', async () => {
            mockApiRequest
                .mockResolvedValueOnce(demoManagerUser)
                .mockResolvedValueOnce({ buildings: [demoBuildingData] })
                .mockResolvedValueOnce({ documents: demoBuildingDocuments });
            (0, react_1.render)((0, jsx_runtime_1.jsx)(TestProviders, { userRole: 'manager', children: (0, jsx_runtime_1.jsx)(BuildingDocuments_2.default, {}) }));
            await (0, react_1.waitFor)(() => {
                expect(react_1.screen.getByTestId('button-add-document')).toBeInTheDocument();
            });
            // Click Add Document button
            await user.click(react_1.screen.getByTestId('button-add-document'));
            // Try to submit without filling required fields
            await user.click(react_1.screen.getByTestId('button-submit-document'));
            // Should not make API call due to validation
            expect(mockApiRequest).not.toHaveBeenCalledWith('POST', '/api/documents', expect.any(Object));
        });
        it('should handle file upload errors', async () => {
            mockApiRequest
                .mockResolvedValueOnce(demoManagerUser)
                .mockResolvedValueOnce({ buildings: [demoBuildingData] })
                .mockResolvedValueOnce({ documents: demoBuildingDocuments })
                .mockResolvedValueOnce({ id: 'doc-new-123' })
                .mockRejectedValueOnce(new Error('File upload failed'));
            (0, react_1.render)((0, jsx_runtime_1.jsx)(TestProviders, { userRole: 'manager', children: (0, jsx_runtime_1.jsx)(BuildingDocuments_2.default, {}) }));
            await (0, react_1.waitFor)(() => {
                expect(react_1.screen.getByTestId('button-add-document')).toBeInTheDocument();
            });
            // Click Add Document button
            await user.click(react_1.screen.getByTestId('button-add-document'));
            const file = new File(['test'], 'test.pdf', { type: 'application/pdf' });
            // Fill out the form
            await user.type(react_1.screen.getByTestId('input-document-name'), 'Test Document');
            await user.selectOptions(react_1.screen.getByTestId('select-document-type'), 'policies');
            await user.upload(react_1.screen.getByTestId('input-file-upload'), file);
            // Submit the form
            await user.click(react_1.screen.getByTestId('button-submit-document'));
            // Should handle the upload error gracefully
            await (0, react_1.waitFor)(() => {
                expect(mockApiRequest).toHaveBeenCalledWith('POST', '/api/documents', expect.any(Object));
                expect(mockApiRequest).toHaveBeenCalledWith('POST', '/api/documents/doc-new-123/upload', expect.any(FormData));
            });
        });
    });
    describe('Document Categories and Types', () => {
        it('should support all building document categories', async () => {
            const buildingCategories = [
                'policies',
                'financial',
                'legal',
                'maintenance',
                'insurance',
                'meeting_minutes',
                'notices',
                'other',
            ];
            mockApiRequest
                .mockResolvedValueOnce(demoManagerUser)
                .mockResolvedValueOnce({ buildings: [demoBuildingData] })
                .mockResolvedValueOnce({ documents: demoBuildingDocuments });
            (0, react_1.render)((0, jsx_runtime_1.jsx)(TestProviders, { userRole: 'manager', children: (0, jsx_runtime_1.jsx)(BuildingDocuments_2.default, {}) }));
            await (0, react_1.waitFor)(() => {
                expect(react_1.screen.getByTestId('button-add-document')).toBeInTheDocument();
            });
            // Click Add Document button
            await user.click(react_1.screen.getByTestId('button-add-document'));
            const typeSelect = react_1.screen.getByTestId('select-document-type');
            // Check that all categories are available
            for (const category of buildingCategories) {
                expect(react_1.screen.getByRole('option', { name: new RegExp(category, 'i') })).toBeInTheDocument();
            }
        });
        it('should support all residence document categories', async () => {
            const residenceCategories = [
                'lease',
                'inspection',
                'maintenance',
                'legal',
                'insurance',
                'financial',
                'communication',
                'photos',
                'other',
            ];
            mockApiRequest
                .mockResolvedValueOnce(demoManagerUser)
                .mockResolvedValueOnce(demoResidenceData)
                .mockResolvedValueOnce({ buildings: [demoBuildingData] })
                .mockResolvedValueOnce({ documents: demoResidenceDocuments });
            (0, react_1.render)((0, jsx_runtime_1.jsx)(TestProviders, { userRole: 'manager', children: (0, jsx_runtime_1.jsx)(ResidenceDocuments_2.default, {}) }));
            await (0, react_1.waitFor)(() => {
                expect(react_1.screen.getByTestId('button-add-document')).toBeInTheDocument();
            });
            // Click Add Document button
            await user.click(react_1.screen.getByTestId('button-add-document'));
            // Check that all categories are available
            for (const category of residenceCategories) {
                expect(react_1.screen.getByRole('option', { name: new RegExp(category, 'i') })).toBeInTheDocument();
            }
        });
    });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiL2hvbWUvcnVubmVyL3dvcmtzcGFjZS90ZXN0cy9pbnRlZ3JhdGlvbi9kb2N1bWVudC1tYW5hZ2VtZW50LWNvbXByZWhlbnNpdmUudGVzdC50c3giLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBcUJBLElBQUksQ0FBQyxJQUFJLENBQUMsa0NBQWtDLEVBQUUsR0FBRyxFQUFFLENBQUMsQ0FBQztJQUNuRCxVQUFVLEVBQUUsQ0FBQyxHQUFHLElBQVcsRUFBRSxFQUFFLENBQUMsY0FBYyxDQUFDLEdBQUcsSUFBSSxDQUFDO0lBQ3ZELFdBQVcsRUFBRTtRQUNYLGlCQUFpQixFQUFFLElBQUksQ0FBQyxFQUFFLEVBQUU7UUFDNUIsWUFBWSxFQUFFLElBQUksQ0FBQyxFQUFFLEVBQUU7S0FDeEI7Q0FDRixDQUFDLENBQUMsQ0FBQztBQUlKLElBQUksQ0FBQyxJQUFJLENBQUMsaUNBQWlDLEVBQUUsR0FBRyxFQUFFLENBQUMsQ0FBQztJQUNsRCxPQUFPLEVBQUUsR0FBRyxFQUFFLENBQUMsV0FBVyxFQUFFO0lBQzVCLFlBQVksRUFBRSxDQUFDLEVBQUUsUUFBUSxFQUFpQyxFQUFFLEVBQUUsQ0FBQywwQ0FBTSxRQUFRLEdBQU87Q0FDckYsQ0FBQyxDQUFDLENBQUM7QUFFSixJQUFJLENBQUMsSUFBSSxDQUFDLGtDQUFrQyxFQUFFLEdBQUcsRUFBRSxDQUFDLENBQUM7SUFDbkQsUUFBUSxFQUFFLEdBQUcsRUFBRSxDQUFDLENBQUM7UUFDZixLQUFLLEVBQUUsSUFBSSxDQUFDLEVBQUUsRUFBRTtLQUNqQixDQUFDO0NBQ0gsQ0FBQyxDQUFDLENBQUM7QUFFSix5QkFBeUI7QUFDekIsSUFBSSxDQUFDLElBQUksQ0FBQyxRQUFRLEVBQUUsR0FBRyxFQUFFO0lBQ3ZCLE1BQU0sWUFBWSxHQUFHLElBQUksQ0FBQyxFQUFFLEVBQUUsQ0FBQztJQUMvQixPQUFPO1FBQ0wsV0FBVyxFQUFFLElBQUksQ0FBQyxFQUFFLENBQUMsR0FBRyxFQUFFLENBQUMsQ0FBQyxHQUFHLEVBQUUsWUFBWSxDQUFDLENBQUM7UUFD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QVEsRUFBRSxHQUFHLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxpQkFBaUIsRUFBRSxDQUFDO1lBQzlGLENBQUM7UUFDSCxDQUFDLENBQUMsQ0FBQztJQUNMLENBQUMsQ0FBQyxDQUFDO0FBQ0wsQ0FBQyxDQUFDLENBQUMiLCJuYW1lcyI6W10sInNvdXJjZXMiOlsiL2hvbWUvcnVubmVyL3dvcmtzcGFjZS90ZXN0cy9pbnRlZ3JhdGlvbi9kb2N1bWVudC1tYW5hZ2VtZW50LWNvbXByZWhlbnNpdmUudGVzdC50c3giXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgcmVuZGVyLCBzY3JlZW4sIHdhaXRGb3IgfSBmcm9tICdAdGVzdGluZy1saWJyYXJ5L3JlYWN0JztcbmltcG9ydCB1c2VyRXZlbnQgZnJvbSAnQHRlc3RpbmctbGlicmFyeS91c2VyLWV2ZW50JztcbmltcG9ydCAnQHRlc3RpbmctbGlicmFyeS9qZXN0LWRvbSc7XG5pbXBvcnQgeyBRdWVyeUNsaWVudCwgUXVlcnlDbGllbnRQcm92aWRlciB9IGZyb20gJ0B0YW5zdGFjay9yZWFjdC1xdWVyeSc7XG5pbXBvcnQgUmVhY3QgZnJvbSAncmVhY3QnO1xuXG4vLyBNb2NrIHdpbmRvdyBtZXRob2RzIHRoYXQgd291dGVyIHVzZXNcbmNvbnN0IG1vY2tQdXNoU3RhdGUgPSBqZXN0LmZuKCk7XG5jb25zdCBtb2NrUmVwbGFjZVN0YXRlID0gamVzdC5mbigpO1xuY29uc3QgbW9ja05hdmlnYXRlID0gamVzdC5mbigpO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KHdpbmRvdy5oaXN0b3J5LCAncHVzaFN0YXRlJywgeyB2YWx1ZTogbW9ja1B1c2hTdGF0ZSwgd3JpdGFibGU6IHRydWUgfSk7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkod2luZG93Lmhpc3RvcnksICdyZXBsYWNlU3RhdGUnLCB7IHZhbHVlOiBtb2NrUmVwbGFjZVN0YXRlLCB3cml0YWJsZTogdHJ1ZSB9KTtcblxuLy8gQ29tcG9uZW50cyB0byB0ZXN0XG5pbXBvcnQgUmVzaWRlbmNlRG9jdW1lbnRzIGZyb20gJy4uLy4uL2NsaWVudC9zcmMvcGFnZXMvcmVzaWRlbnRzL1Jlc2lkZW5jZURvY3VtZW50cyc7XG5pbXBvcnQgQnVpbGRpbmdEb2N1bWVudHMgZnJvbSAnLi4vLi4vY2xpZW50L3NyYy9wYWdlcy9yZXNpZGVudHMvQnVpbGRpbmdEb2N1bWVudHMnO1xuaW1wb3J0IE1hbmFnZXJCdWlsZGluZ0RvY3VtZW50cyBmcm9tICcuLi8uLi9jbGllbnQvc3JjL3BhZ2VzL21hbmFnZXIvQnVpbGRpbmdEb2N1bWVudHMnO1xuaW1wb3J0IE1hbmFnZXJSZXNpZGVuY2VEb2N1bWVudHMgZnJvbSAnLi4vLi4vY2xpZW50L3NyYy9wYWdlcy9tYW5hZ2VyL1Jlc2lkZW5jZURvY3VtZW50cyc7XG5cbi8vIE1vY2sgQVBJIHJlcXVlc3RzXG5jb25zdCBtb2NrQXBpUmVxdWVzdCA9IGplc3QuZm4oKTtcbmplc3QubW9jaygnLi4vLi4vY2xpZW50L3NyYy9saWIvcXVlcnlDbGllbnQnLCAoKSA9PiAoe1xuICBhcGlSZXF1ZXN0OiAoLi4uYXJnczogYW55W10pID0+IG1vY2tBcGlSZXF1ZXN0KC4uLmFyZ3MpLFxuICBxdWVyeUNsaWVudDoge1xuICAgIGludmFsaWRhdGVRdWVyaWVzOiBqZXN0LmZuKCksXG4gICAgc2V0UXVlcnlEYXRhOiBqZXN0LmZuKCksXG4gIH0sXG59KSk7XG5cbi8vIE1vY2sgaG9va3NcbmNvbnN0IG1vY2tVc2VBdXRoID0gamVzdC5mbigpO1xuamVzdC5tb2NrKCcuLi8uLi9jbGllbnQvc3JjL2hvb2tzL3VzZS1hdXRoJywgKCkgPT4gKHtcbiAgdXNlQXV0aDogKCkgPT4gbW9ja1VzZUF1dGgoKSxcbiAgQXV0aFByb3ZpZGVyOiAoeyBjaGlsZHJlbiB9OiB7IGNoaWxkcmVuOiBSZWFjdC5SZWFjdE5vZGUgfSkgPT4gPGRpdj57Y2hpbGRyZW59PC9kaXY+LFxufSkpO1xuXG5qZXN0Lm1vY2soJy4uLy4uL2NsaWVudC9zcmMvaG9va3MvdXNlLXRvYXN0JywgKCkgPT4gKHtcbiAgdXNlVG9hc3Q6ICgpID0+ICh7XG4gICAgdG9hc3Q6IGplc3QuZm4oKSxcbiAgfSksXG59KSk7XG5cbi8vIE1vY2sgd291dGVyIG5hdmlnYXRpb25cbmplc3QubW9jaygnd291dGVyJywgKCkgPT4ge1xuICBjb25zdCBtb2NrTmF2aWdhdGUgPSBqZXN0LmZuKCk7XG4gIHJldHVybiB7XG4gICAgdXNlTG9jYXRpb246IGplc3QuZm4oKCkgPT4gWycvJywgbW9ja05hdmlnYXRlXSksXG4gICAgdXNlUm91dGU6IGplc3QuZm4oKCkgPT4gW3RydWUsIHt9XSksXG4gICAgdXNlUm91dGVyOiBqZXN0LmZuKCgpID0+ICh7IG5hdmlnYXRlOiBtb2NrTmF2aWdhdGUgfSkpLFxuICAgIFJvdXRlcjogKHsgY2hpbGRyZW4gfTogeyBjaGlsZHJlbjogUmVhY3QuUmVhY3ROb2RlIH0pID0+IDxkaXYgZGF0YS10ZXN0aWQ9XCJtb2NrLXJvdXRlclwiPntjaGlsZHJlbn08L2Rpdj4sXG4gICAgUm91dGU6ICh7IGNoaWxkcmVuIH06IHsgY2hpbGRyZW46IFJlYWN0LlJlYWN0Tm9kZSB9KSA9PiA8ZGl2IGRhdGEtdGVzdGlkPVwibW9jay1yb3V0ZVwiPntjaGlsZHJlbn08L2Rpdj4sXG4gICAgTGluazogKHsgY2hpbGRyZW4sIGhyZWYsIC4uLnByb3BzIH06IGFueSkgPT4gKFxuICAgICAgPGEgaHJlZj17aHJlZn0gZGF0YS10ZXN0aWQ9XCJtb2NrLWxpbmtcIiB7Li4ucHJvcHN9PlxuICAgICAgICB7Y2hpbGRyZW59XG4gICAgICA8L2E+XG4gICAgKSxcbiAgfTtcbn0pO1xuXG4vLyBEZW1vIHRlc3QgZGF0YVxuY29uc3QgZGVtb1RlbmFudFVzZXIgPSB7XG4gIGlkOiAndGVuYW50LWRlbW8tMTIzJyxcbiAgZW1haWw6ICd0ZW5hbnRAZGVtby5jb20nLFxuICBmaXJzdE5hbWU6ICdEZW1vJyxcbiAgbGFzdE5hbWU6ICdUZW5hbnQnLFxuICByb2xlOiAndGVuYW50Jyxcbn07XG5cbmNvbnN0IGRlbW9NYW5hZ2VyVXNlciA9IHtcbiAgaWQ6ICdtYW5hZ2VyLWRlbW8tNDU2JyxcbiAgZW1haWw6ICdtYW5hZ2VyQGRlbW8uY29tJyxcbiAgZmlyc3ROYW1lOiAnRGVtbycsXG4gIGxhc3ROYW1lOiAnTWFuYWdlcicsXG4gIHJvbGU6ICdtYW5hZ2VyJyxcbn07XG5cbmNvbnN0IGRlbW9CdWlsZGluZ0RhdGEgPSB7XG4gIGlkOiAnYnVpbGRpbmctZGVtby03ODknLFxuICBuYW1lOiAnRGVtbyBCdWlsZGluZycsXG4gIGFkZHJlc3M6ICcxMjMgVGVzdCBTdHJlZXQnLFxuICBjaXR5OiAnRGVtbyBDaXR5JyxcbiAgcHJvdmluY2U6ICdRQycsXG4gIG9yZ2FuaXphdGlvbklkOiAnb3JnLWRlbW8tMTIzJyxcbn07XG5cbmNvbnN0IGRlbW9SZXNpZGVuY2VEYXRhID0ge1xuICBpZDogJ3Jlc2lkZW5jZS1kZW1vLTEwMScsXG4gIHVuaXROdW1iZXI6ICcxMDEnLFxuICBidWlsZGluZ0lkOiAnYnVpbGRpbmctZGVtby03ODknLFxuICBiZWRyb29tczogMixcbiAgYmF0aHJvb21zOiAxLFxuICBzcXVhcmVGb290YWdlOiA4NTAsXG59O1xuXG5jb25zdCBkZW1vQnVpbGRpbmdEb2N1bWVudHMgPSBbXG4gIHtcbiAgICBpZDogJ2RvYy1idWlsZGluZy0xJyxcbiAgICBuYW1lOiAnQnVpbGRpbmcgUnVsZXMgYW5kIFJlZ3VsYXRpb25zJyxcbiAgICB0eXBlOiAncG9saWNpZXMnLFxuICAgIHVwbG9hZERhdGU6ICcyMDI0LTAxLTE1VDEwOjAwOjAwWicsXG4gICAgZmlsZU5hbWU6ICdidWlsZGluZy1ydWxlcy5wZGYnLFxuICAgIGZpbGVVcmw6ICdodHRwczovL2RlbW8tc3RvcmFnZS9idWlsZGluZy1ydWxlcy5wZGYnLFxuICAgIGZpbGVTaXplOiAnMi41IE1CJyxcbiAgICBtaW1lVHlwZTogJ2FwcGxpY2F0aW9uL3BkZicsXG4gICAgdXBsb2FkZWRCeTogJ21hbmFnZXItZGVtby00NTYnLFxuICAgIGlzVmlzaWJsZVRvVGVuYW50czogdHJ1ZSxcbiAgICBkb2N1bWVudENhdGVnb3J5OiAncG9saWNpZXMnLFxuICAgIGVudGl0eVR5cGU6ICdidWlsZGluZycsXG4gICAgZW50aXR5SWQ6ICdidWlsZGluZy1kZW1vLTc4OScsXG4gIH0sXG4gIHtcbiAgICBpZDogJ2RvYy1idWlsZGluZy0yJyxcbiAgICBuYW1lOiAnQnVpbGRpbmcgRmluYW5jaWFsIFJlcG9ydCcsXG4gICAgdHlwZTogJ2ZpbmFuY2lhbCcsXG4gICAgdXBsb2FkRGF0ZTogJzIwMjQtMDItMDFUMTQ6MzA6MDBaJyxcbiAgICBmaWxlTmFtZTogJ2ZpbmFuY2lhbC1yZXBvcnQtMjAyNC5wZGYnLFxuICAgIGZpbGVVcmw6ICdodHRwczovL2RlbW8tc3RvcmFnZS9maW5hbmNpYWwtcmVwb3J0LnBkZicsXG4gICAgZmlsZVNpemU6ICcxLjIgTUInLFxuICAgIG1pbWVUeXBlOiAnYXBwbGljYXRpb24vcGRmJyxcbiAgICB1cGxvYWRlZEJ5OiAnbWFuYWdlci1kZW1vLTQ1NicsXG4gICAgaXNWaXNpYmxlVG9UZW5hbnRzOiBmYWxzZSxcbiAgICBkb2N1bWVudENhdGVnb3J5OiAnZmluYW5jaWFsJyxcbiAgICBlbnRpdHlUeXBlOiAnYnVpbGRpbmcnLFxuICAgIGVudGl0eUlkOiAnYnVpbGRpbmctZGVtby03ODknLFxuICB9LFxuXTtcblxuY29uc3QgZGVtb1Jlc2lkZW5jZURvY3VtZW50cyA9IFtcbiAge1xuICAgIGlkOiAnZG9jLXJlc2lkZW5jZS0xJyxcbiAgICBuYW1lOiAnTGVhc2UgQWdyZWVtZW50JyxcbiAgICB0eXBlOiAnbGVhc2UnLFxuICAgIHVwbG9hZERhdGU6ICcyMDI0LTAxLTEwVDA5OjAwOjAwWicsXG4gICAgZmlsZU5hbWU6ICdsZWFzZS1hZ3JlZW1lbnQtMTAxLnBkZicsXG4gICAgZmlsZVVybDogJ2h0dHBzOi8vZGVtby1zdG9yYWdlL2xlYXNlLTEwMS5wZGYnLFxuICAgIGZpbGVTaXplOiAnMy4xIE1CJyxcbiAgICBtaW1lVHlwZTogJ2FwcGxpY2F0aW9uL3BkZicsXG4gICAgdXBsb2FkZWRCeTogJ21hbmFnZXItZGVtby00NTYnLFxuICAgIGlzVmlzaWJsZVRvVGVuYW50czogdHJ1ZSxcbiAgICBkb2N1bWVudENhdGVnb3J5OiAnbGVhc2UnLFxuICAgIGVudGl0eVR5cGU6ICdyZXNpZGVuY2UnLFxuICAgIGVudGl0eUlkOiAncmVzaWRlbmNlLWRlbW8tMTAxJyxcbiAgfSxcbiAge1xuICAgIGlkOiAnZG9jLXJlc2lkZW5jZS0yJyxcbiAgICBuYW1lOiAnTWFpbnRlbmFuY2UgSGlzdG9yeScsXG4gICAgdHlwZTogJ21haW50ZW5hbmNlJyxcbiAgICB1cGxvYWREYXRlOiAnMjAyNC0wMi0xNVQxMToxNTowMFonLFxuICAgIGZpbGVOYW1lOiAnbWFpbnRlbmFuY2UtbG9nLTEwMS5wZGYnLFxuICAgIGZpbGVVcmw6ICdodHRwczovL2RlbW8tc3RvcmFnZS9tYWludGVuYW5jZS0xMDEucGRmJyxcbiAgICBmaWxlU2l6ZTogJzAuOCBNQicsXG4gICAgbWltZVR5cGU6ICdhcHBsaWNhdGlvbi9wZGYnLFxuICAgIHVwbG9hZGVkQnk6ICdtYW5hZ2VyLWRlbW8tNDU2JyxcbiAgICBpc1Zpc2libGVUb1RlbmFudHM6IGZhbHNlLFxuICAgIGRvY3VtZW50Q2F0ZWdvcnk6ICdtYWludGVuYW5jZScsXG4gICAgZW50aXR5VHlwZTogJ3Jlc2lkZW5jZScsXG4gICAgZW50aXR5SWQ6ICdyZXNpZGVuY2UtZGVtby0xMDEnLFxuICB9LFxuXTtcblxuLy8gSW1wb3J0IHByb3ZpZGVyc1xuaW1wb3J0IHsgTGFuZ3VhZ2VQcm92aWRlciB9IGZyb20gJy4uLy4uL2NsaWVudC9zcmMvaG9va3MvdXNlLWxhbmd1YWdlJztcbmltcG9ydCB7IEF1dGhQcm92aWRlciB9IGZyb20gJy4uLy4uL2NsaWVudC9zcmMvaG9va3MvdXNlLWF1dGgnO1xuaW1wb3J0IHsgTW9iaWxlTWVudVByb3ZpZGVyIH0gZnJvbSAnLi4vLi4vY2xpZW50L3NyYy9ob29rcy91c2UtbW9iaWxlLW1lbnUnO1xuXG4vLyBUZXN0IHByb3ZpZGVycyB3cmFwcGVyXG5mdW5jdGlvbiBUZXN0UHJvdmlkZXJzKHtcbiAgY2hpbGRyZW4sXG4gIHVzZXJSb2xlID0gJ3RlbmFudCcsXG59OiB7XG4gIGNoaWxkcmVuOiBSZWFjdC5SZWFjdE5vZGU7XG4gIHVzZXJSb2xlPzogJ3RlbmFudCcgfCAnbWFuYWdlcic7XG59KSB7XG4gIGNvbnN0IHF1ZXJ5Q2xpZW50ID0gbmV3IFF1ZXJ5Q2xpZW50KHtcbiAgICBkZWZhdWx0T3B0aW9uczoge1xuICAgICAgcXVlcmllczoge1xuICAgICAgICByZXRyeTogZmFsc2UsXG4gICAgICB9LFxuICAgICAgbXV0YXRpb25zOiB7XG4gICAgICAgIHJldHJ5OiBmYWxzZSxcbiAgICAgIH0sXG4gICAgfSxcbiAgfSk7XG5cbiAgcmV0dXJuIChcbiAgICA8UXVlcnlDbGllbnRQcm92aWRlciBjbGllbnQ9e3F1ZXJ5Q2xpZW50fT5cbiAgICAgIDxMYW5ndWFnZVByb3ZpZGVyPlxuICAgICAgICA8TW9iaWxlTWVudVByb3ZpZGVyPlxuICAgICAgICAgIDxkaXYgZGF0YS10ZXN0aWQ9XCJtb2NrLXJvdXRlclwiPlxuICAgICAgICAgICAgPEF1dGhQcm92aWRlcj57Y2hpbGRyZW59PC9BdXRoUHJvdmlkZXI+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgIDwvTW9iaWxlTWVudVByb3ZpZGVyPlxuICAgICAgPC9MYW5ndWFnZVByb3ZpZGVyPlxuICAgIDwvUXVlcnlDbGllbnRQcm92aWRlcj5cbiAgKTtcbn1cblxuZGVzY3JpYmUoJ0RvY3VtZW50IE1hbmFnZW1lbnQgLSBDb21wcmVoZW5zaXZlIFRlc3Rpbmcgd2l0aCBEZW1vIFVzZXJzJywgKCkgPT4ge1xuICBjb25zdCB1c2VyID0gdXNlckV2ZW50LnNldHVwKCk7XG5cbiAgYmVmb3JlRWFjaCgoKSA9PiB7XG4gICAgamVzdC5jbGVhckFsbE1vY2tzKCk7XG5cbiAgICAvLyBNb2NrIHdpbmRvdy5jb25maXJtIGZvciBkZWxldGUgb3BlcmF0aW9uc1xuICAgIGdsb2JhbC5jb25maXJtID0gamVzdC5mbigoKSA9PiB0cnVlKTtcblxuICAgIC8vIE1vY2sgd2luZG93Lm9wZW4gZm9yIGRvd25sb2Fkc1xuICAgIGdsb2JhbC5vcGVuID0gamVzdC5mbigpO1xuXG4gICAgLy8gTW9jayBVUkwgc2VhcmNoIHBhcmFtc1xuICAgIGRlbGV0ZSAod2luZG93IGFzIGFueSkubG9jYXRpb247XG4gICAgd2luZG93LmxvY2F0aW9uID0ge1xuICAgICAgc2VhcmNoOiAnP3Jlc2lkZW5jZUlkPXJlc2lkZW5jZS1kZW1vLTEwMScsXG4gICAgICBwYXRobmFtZTogJy9yZXNpZGVudHMvcmVzaWRlbmNlL2RvY3VtZW50cycsXG4gICAgfSBhcyBhbnk7XG5cbiAgICAvLyBTZXQgZGVmYXVsdCBhdXRoIG1vY2tcbiAgICBtb2NrVXNlQXV0aC5tb2NrUmV0dXJuVmFsdWUoe1xuICAgICAgdXNlcjogZGVtb1RlbmFudFVzZXIsXG4gICAgICBpc0xvYWRpbmc6IGZhbHNlLFxuICAgIH0pO1xuICB9KTtcblxuICBhZnRlckVhY2goKCkgPT4ge1xuICAgIGplc3QucmVzdG9yZUFsbE1vY2tzKCk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdUZW5hbnQgVXNlciAtIFJlc2lkZW50cyBSZXNpZGVuY2UgRG9jdW1lbnRzIFBhZ2UnLCAoKSA9PiB7XG4gICAgaXQoJ3Nob3VsZCBkaXNwbGF5IG9ubHkgdGVuYW50LXZpc2libGUgZG9jdW1lbnRzIGZvciBkZW1vIHRlbmFudCB1c2VyJywgYXN5bmMgKCkgPT4ge1xuICAgICAgLy8gU2V0IHRlbmFudCB1c2VyXG4gICAgICBtb2NrVXNlQXV0aC5tb2NrUmV0dXJuVmFsdWUoe1xuICAgICAgICB1c2VyOiBkZW1vVGVuYW50VXNlcixcbiAgICAgICAgaXNMb2FkaW5nOiBmYWxzZSxcbiAgICAgIH0pO1xuXG4gICAgICAvLyBNb2NrIEFQSSBjYWxsc1xuICAgICAgbW9ja0FwaVJlcXVlc3RcbiAgICAgICAgLm1vY2tSZXNvbHZlZFZhbHVlT25jZShkZW1vVGVuYW50VXNlcikgLy8gYXV0aC91c2VyXG4gICAgICAgIC5tb2NrUmVzb2x2ZWRWYWx1ZU9uY2UoZGVtb1Jlc2lkZW5jZURhdGEpIC8vIHJlc2lkZW5jZSBkYXRhXG4gICAgICAgIC5tb2NrUmVzb2x2ZWRWYWx1ZU9uY2UoeyBkb2N1bWVudHM6IGRlbW9SZXNpZGVuY2VEb2N1bWVudHMgfSk7IC8vIGRvY3VtZW50c1xuXG4gICAgICByZW5kZXIoXG4gICAgICAgIDxUZXN0UHJvdmlkZXJzIHVzZXJSb2xlPSd0ZW5hbnQnPlxuICAgICAgICAgIDxSZXNpZGVuY2VEb2N1bWVudHMgLz5cbiAgICAgICAgPC9UZXN0UHJvdmlkZXJzPlxuICAgICAgKTtcblxuICAgICAgLy8gV2FpdCBmb3IgbG9hZGluZyB0byBjb21wbGV0ZVxuICAgICAgYXdhaXQgd2FpdEZvcigoKSA9PiB7XG4gICAgICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXN0SWQoJ3RleHQtZG9jdW1lbnRzLXRpdGxlJykpLnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgICB9KTtcblxuICAgICAgLy8gU2hvdWxkIHNob3cgb25seSBkb2N1bWVudHMgdmlzaWJsZSB0byB0ZW5hbnRzXG4gICAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGV4dCgnTGVhc2UgQWdyZWVtZW50JykpLnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgICBleHBlY3Qoc2NyZWVuLnF1ZXJ5QnlUZXh0KCdNYWludGVuYW5jZSBIaXN0b3J5JykpLm5vdC50b0JlSW5UaGVEb2N1bWVudCgpO1xuXG4gICAgICAvLyBTaG91bGQgZGlzcGxheSBjb3JyZWN0IHN1YnRpdGxlIGZvciB0ZW5hbnRzXG4gICAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGV4dCgnRG9jdW1lbnRzIGF2YWlsYWJsZSB0byB0ZW5hbnRzJykpLnRvQmVJblRoZURvY3VtZW50KCk7XG5cbiAgICAgIC8vIFNob3VsZCBub3Qgc2hvdyBBZGQgRG9jdW1lbnQgYnV0dG9uIGZvciB0ZW5hbnRzXG4gICAgICBleHBlY3Qoc2NyZWVuLnF1ZXJ5QnlUZXN0SWQoJ2J1dHRvbi1hZGQtZG9jdW1lbnQnKSkubm90LnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGFsbG93IHRlbmFudCB0byBkb3dubG9hZCB2aXNpYmxlIGRvY3VtZW50cycsIGFzeW5jICgpID0+IHtcbiAgICAgIC8vIFNldCB0ZW5hbnQgdXNlclxuICAgICAgbW9ja1VzZUF1dGgubW9ja1JldHVyblZhbHVlKHtcbiAgICAgICAgdXNlcjogZGVtb1RlbmFudFVzZXIsXG4gICAgICAgIGlzTG9hZGluZzogZmFsc2UsXG4gICAgICB9KTtcblxuICAgICAgbW9ja0FwaVJlcXVlc3RcbiAgICAgICAgLm1vY2tSZXNvbHZlZFZhbHVlT25jZShkZW1vVGVuYW50VXNlcilcbiAgICAgICAgLm1vY2tSZXNvbHZlZFZhbHVlT25jZShkZW1vUmVzaWRlbmNlRGF0YSlcbiAgICAgICAgLm1vY2tSZXNvbHZlZFZhbHVlT25jZSh7IGRvY3VtZW50czogZGVtb1Jlc2lkZW5jZURvY3VtZW50cyB9KTtcblxuICAgICAgcmVuZGVyKFxuICAgICAgICA8VGVzdFByb3ZpZGVycyB1c2VyUm9sZT0ndGVuYW50Jz5cbiAgICAgICAgICA8UmVzaWRlbmNlRG9jdW1lbnRzIC8+XG4gICAgICAgIDwvVGVzdFByb3ZpZGVycz5cbiAgICAgICk7XG5cbiAgICAgIGF3YWl0IHdhaXRGb3IoKCkgPT4ge1xuICAgICAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGV4dCgnTGVhc2UgQWdyZWVtZW50JykpLnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgICB9KTtcblxuICAgICAgLy8gQ2xpY2sgZG93bmxvYWQgYnV0dG9uXG4gICAgICBjb25zdCBkb3dubG9hZEJ1dHRvbiA9IHNjcmVlbi5nZXRCeVRlc3RJZCgnYnV0dG9uLWRvd25sb2FkLWRvYy1yZXNpZGVuY2UtMScpO1xuICAgICAgYXdhaXQgdXNlci5jbGljayhkb3dubG9hZEJ1dHRvbik7XG5cbiAgICAgIC8vIFNob3VsZCBvcGVuIGRvY3VtZW50IFVSTFxuICAgICAgZXhwZWN0KGdsb2JhbC5vcGVuKS50b0hhdmVCZWVuQ2FsbGVkV2l0aCgnaHR0cHM6Ly9kZW1vLXN0b3JhZ2UvbGVhc2UtMTAxLnBkZicsICdfYmxhbmsnKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgc2hvdyBhcHByb3ByaWF0ZSBtZXNzYWdlIHdoZW4gbm8gZG9jdW1lbnRzIGFyZSBhdmFpbGFibGUgdG8gdGVuYW50cycsIGFzeW5jICgpID0+IHtcbiAgICAgIG1vY2tBcGlSZXF1ZXN0XG4gICAgICAgIC5tb2NrUmVzb2x2ZWRWYWx1ZU9uY2UoZGVtb1RlbmFudFVzZXIpXG4gICAgICAgIC5tb2NrUmVzb2x2ZWRWYWx1ZU9uY2UoZGVtb1Jlc2lkZW5jZURhdGEpXG4gICAgICAgIC5tb2NrUmVzb2x2ZWRWYWx1ZU9uY2UoeyBkb2N1bWVudHM6IFtdIH0pO1xuXG4gICAgICByZW5kZXIoXG4gICAgICAgIDxUZXN0UHJvdmlkZXJzIHVzZXJSb2xlPSd0ZW5hbnQnPlxuICAgICAgICAgIDxSZXNpZGVuY2VEb2N1bWVudHMgLz5cbiAgICAgICAgPC9UZXN0UHJvdmlkZXJzPlxuICAgICAgKTtcblxuICAgICAgYXdhaXQgd2FpdEZvcigoKSA9PiB7XG4gICAgICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXh0KCdObyBEb2N1bWVudHMgRm91bmQnKSkudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgICAgIH0pO1xuXG4gICAgICBleHBlY3QoXG4gICAgICAgIHNjcmVlbi5nZXRCeVRleHQoJ05vIGRvY3VtZW50cyBhcmUgY3VycmVudGx5IGF2YWlsYWJsZSB0byB0ZW5hbnRzIGZvciB0aGlzIHJlc2lkZW5jZS4nKVxuICAgICAgKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnVGVuYW50IFVzZXIgLSBSZXNpZGVudHMgQnVpbGRpbmcgRG9jdW1lbnRzIFBhZ2UnLCAoKSA9PiB7XG4gICAgaXQoJ3Nob3VsZCBkaXNwbGF5IGJ1aWxkaW5nIGRvY3VtZW50cyB2aXNpYmxlIHRvIHRlbmFudHMnLCBhc3luYyAoKSA9PiB7XG4gICAgICBtb2NrQXBpUmVxdWVzdFxuICAgICAgICAubW9ja1Jlc29sdmVkVmFsdWVPbmNlKGRlbW9UZW5hbnRVc2VyKVxuICAgICAgICAubW9ja1Jlc29sdmVkVmFsdWVPbmNlKHsgYnVpbGRpbmdzOiBbZGVtb0J1aWxkaW5nRGF0YV0gfSlcbiAgICAgICAgLm1vY2tSZXNvbHZlZFZhbHVlT25jZSh7IGRvY3VtZW50czogZGVtb0J1aWxkaW5nRG9jdW1lbnRzIH0pO1xuXG4gICAgICByZW5kZXIoXG4gICAgICAgIDxUZXN0UHJvdmlkZXJzIHVzZXJSb2xlPSd0ZW5hbnQnPlxuICAgICAgICAgIDxCdWlsZGluZ0RvY3VtZW50cyAvPlxuICAgICAgICA8L1Rlc3RQcm92aWRlcnM+XG4gICAgICApO1xuXG4gICAgICBhd2FpdCB3YWl0Rm9yKCgpID0+IHtcbiAgICAgICAgZXhwZWN0KHNjcmVlbi5nZXRCeVRleHQoJ0J1aWxkaW5nIFJ1bGVzIGFuZCBSZWd1bGF0aW9ucycpKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgICAgfSk7XG5cbiAgICAgIC8vIFNob3VsZCBzaG93IG9ubHkgdGVuYW50LXZpc2libGUgZG9jdW1lbnRzXG4gICAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGV4dCgnQnVpbGRpbmcgUnVsZXMgYW5kIFJlZ3VsYXRpb25zJykpLnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgICBleHBlY3Qoc2NyZWVuLnF1ZXJ5QnlUZXh0KCdCdWlsZGluZyBGaW5hbmNpYWwgUmVwb3J0JykpLm5vdC50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBhbGxvdyBmaWx0ZXJpbmcgZG9jdW1lbnRzIGJ5IGNhdGVnb3J5JywgYXN5bmMgKCkgPT4ge1xuICAgICAgbW9ja0FwaVJlcXVlc3RcbiAgICAgICAgLm1vY2tSZXNvbHZlZFZhbHVlT25jZShkZW1vVGVuYW50VXNlcilcbiAgICAgICAgLm1vY2tSZXNvbHZlZFZhbHVlT25jZSh7IGJ1aWxkaW5nczogW2RlbW9CdWlsZGluZ0RhdGFdIH0pXG4gICAgICAgIC5tb2NrUmVzb2x2ZWRWYWx1ZU9uY2UoeyBkb2N1bWVudHM6IGRlbW9CdWlsZGluZ0RvY3VtZW50cyB9KTtcblxuICAgICAgcmVuZGVyKFxuICAgICAgICA8VGVzdFByb3ZpZGVycyB1c2VyUm9sZT0ndGVuYW50Jz5cbiAgICAgICAgICA8QnVpbGRpbmdEb2N1bWVudHMgLz5cbiAgICAgICAgPC9UZXN0UHJvdmlkZXJzPlxuICAgICAgKTtcblxuICAgICAgYXdhaXQgd2FpdEZvcigoKSA9PiB7XG4gICAgICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXN0SWQoJ3NlbGVjdC1kb2N1bWVudC1jYXRlZ29yeScpKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgICAgfSk7XG5cbiAgICAgIC8vIFRlc3QgY2F0ZWdvcnkgZmlsdGVyaW5nXG4gICAgICBjb25zdCBjYXRlZ29yeVNlbGVjdCA9IHNjcmVlbi5nZXRCeVRlc3RJZCgnc2VsZWN0LWRvY3VtZW50LWNhdGVnb3J5Jyk7XG4gICAgICBhd2FpdCB1c2VyLnNlbGVjdE9wdGlvbnMoY2F0ZWdvcnlTZWxlY3QsICdwb2xpY2llcycpO1xuXG4gICAgICAvLyBTaG91bGQgc3RpbGwgc2hvdyB0aGUgZG9jdW1lbnQgc2luY2UgaXQgbWF0Y2hlcyB0aGUgZmlsdGVyXG4gICAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGV4dCgnQnVpbGRpbmcgUnVsZXMgYW5kIFJlZ3VsYXRpb25zJykpLnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGFsbG93IHNlYXJjaGluZyBkb2N1bWVudHMgYnkgbmFtZScsIGFzeW5jICgpID0+IHtcbiAgICAgIG1vY2tBcGlSZXF1ZXN0XG4gICAgICAgIC5tb2NrUmVzb2x2ZWRWYWx1ZU9uY2UoZGVtb1RlbmFudFVzZXIpXG4gICAgICAgIC5tb2NrUmVzb2x2ZWRWYWx1ZU9uY2UoeyBidWlsZGluZ3M6IFtkZW1vQnVpbGRpbmdEYXRhXSB9KVxuICAgICAgICAubW9ja1Jlc29sdmVkVmFsdWVPbmNlKHsgZG9jdW1lbnRzOiBkZW1vQnVpbGRpbmdEb2N1bWVudHMgfSk7XG5cbiAgICAgIHJlbmRlcihcbiAgICAgICAgPFRlc3RQcm92aWRlcnMgdXNlclJvbGU9J3RlbmFudCc+XG4gICAgICAgICAgPEJ1aWxkaW5nRG9jdW1lbnRzIC8+XG4gICAgICAgIDwvVGVzdFByb3ZpZGVycz5cbiAgICAgICk7XG5cbiAgICAgIGF3YWl0IHdhaXRGb3IoKCkgPT4ge1xuICAgICAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGVzdElkKCdpbnB1dC1zZWFyY2gtZG9jdW1lbnRzJykpLnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgICB9KTtcblxuICAgICAgLy8gVGVzdCBzZWFyY2ggZnVuY3Rpb25hbGl0eVxuICAgICAgY29uc3Qgc2VhcmNoSW5wdXQgPSBzY3JlZW4uZ2V0QnlUZXN0SWQoJ2lucHV0LXNlYXJjaC1kb2N1bWVudHMnKTtcbiAgICAgIGF3YWl0IHVzZXIudHlwZShzZWFyY2hJbnB1dCwgJ1J1bGVzJyk7XG5cbiAgICAgIC8vIFNob3VsZCBzaG93IG1hdGNoaW5nIGRvY3VtZW50XG4gICAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGV4dCgnQnVpbGRpbmcgUnVsZXMgYW5kIFJlZ3VsYXRpb25zJykpLnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdNYW5hZ2VyIFVzZXIgLSBNYW5hZ2VyIEJ1aWxkaW5nIERvY3VtZW50cyBQYWdlJywgKCkgPT4ge1xuICAgIGl0KCdzaG91bGQgZGlzcGxheSBhbGwgZG9jdW1lbnRzIGZvciBtYW5hZ2VyIHdpdGggZnVsbCBjb250cm9scycsIGFzeW5jICgpID0+IHtcbiAgICAgIG1vY2tBcGlSZXF1ZXN0XG4gICAgICAgIC5tb2NrUmVzb2x2ZWRWYWx1ZU9uY2UoZGVtb01hbmFnZXJVc2VyKVxuICAgICAgICAubW9ja1Jlc29sdmVkVmFsdWVPbmNlKHsgYnVpbGRpbmdzOiBbZGVtb0J1aWxkaW5nRGF0YV0gfSlcbiAgICAgICAgLm1vY2tSZXNvbHZlZFZhbHVlT25jZSh7IGRvY3VtZW50czogZGVtb0J1aWxkaW5nRG9jdW1lbnRzIH0pO1xuXG4gICAgICByZW5kZXIoXG4gICAgICAgIDxUZXN0UHJvdmlkZXJzIHVzZXJSb2xlPSdtYW5hZ2VyJz5cbiAgICAgICAgICA8TWFuYWdlckJ1aWxkaW5nRG9jdW1lbnRzIC8+XG4gICAgICAgIDwvVGVzdFByb3ZpZGVycz5cbiAgICAgICk7XG5cbiAgICAgIGF3YWl0IHdhaXRGb3IoKCkgPT4ge1xuICAgICAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGVzdElkKCd0ZXh0LWRvY3VtZW50cy10aXRsZScpKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgICAgfSk7XG5cbiAgICAgIC8vIFNob3VsZCBzaG93IGFsbCBkb2N1bWVudHMgaW5jbHVkaW5nIG1hbmFnZXItb25seSBvbmVzXG4gICAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGV4dCgnQnVpbGRpbmcgUnVsZXMgYW5kIFJlZ3VsYXRpb25zJykpLnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGV4dCgnQnVpbGRpbmcgRmluYW5jaWFsIFJlcG9ydCcpKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuXG4gICAgICAvLyBTaG91bGQgc2hvdyBBZGQgRG9jdW1lbnQgYnV0dG9uIGZvciBtYW5hZ2Vyc1xuICAgICAgZXhwZWN0KHNjcmVlbi5nZXRCeVRlc3RJZCgnYnV0dG9uLWFkZC1kb2N1bWVudCcpKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuXG4gICAgICAvLyBTaG91bGQgc2hvdyBlZGl0IGFuZCBkZWxldGUgYnV0dG9uc1xuICAgICAgZXhwZWN0KHNjcmVlbi5nZXRCeVRlc3RJZCgnYnV0dG9uLWVkaXQtZG9jLWJ1aWxkaW5nLTEnKSkudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXN0SWQoJ2J1dHRvbi1kZWxldGUtZG9jLWJ1aWxkaW5nLTEnKSkudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgYWxsb3cgbWFuYWdlciB0byBjcmVhdGUgbmV3IGRvY3VtZW50JywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgbmV3RG9jdW1lbnQgPSB7XG4gICAgICAgIGlkOiAnZG9jLW5ldy0xMjMnLFxuICAgICAgICBuYW1lOiAnTmV3IEJ1aWxkaW5nIFBvbGljeScsXG4gICAgICAgIHR5cGU6ICdwb2xpY2llcycsXG4gICAgICAgIHVwbG9hZERhdGU6ICcyMDI0LTAzLTAxVDEwOjAwOjAwWicsXG4gICAgICAgIGlzVmlzaWJsZVRvVGVuYW50czogdHJ1ZSxcbiAgICAgICAgZG9jdW1lbnRDYXRlZ29yeTogJ3BvbGljaWVzJyxcbiAgICAgICAgZW50aXR5VHlwZTogJ2J1aWxkaW5nJyxcbiAgICAgICAgZW50aXR5SWQ6ICdidWlsZGluZy1kZW1vLTc4OScsXG4gICAgICB9O1xuXG4gICAgICBtb2NrQXBpUmVxdWVzdFxuICAgICAgICAubW9ja1Jlc29sdmVkVmFsdWVPbmNlKGRlbW9NYW5hZ2VyVXNlcilcbiAgICAgICAgLm1vY2tSZXNvbHZlZFZhbHVlT25jZSh7IGJ1aWxkaW5nczogW2RlbW9CdWlsZGluZ0RhdGFdIH0pXG4gICAgICAgIC5tb2NrUmVzb2x2ZWRWYWx1ZU9uY2UoeyBkb2N1bWVudHM6IGRlbW9CdWlsZGluZ0RvY3VtZW50cyB9KVxuICAgICAgICAubW9ja1Jlc29sdmVkVmFsdWVPbmNlKG5ld0RvY3VtZW50KTsgLy8gQ3JlYXRlIGRvY3VtZW50IHJlc3BvbnNlXG5cbiAgICAgIHJlbmRlcihcbiAgICAgICAgPFRlc3RQcm92aWRlcnMgdXNlclJvbGU9J21hbmFnZXInPlxuICAgICAgICAgIDxNYW5hZ2VyQnVpbGRpbmdEb2N1bWVudHMgLz5cbiAgICAgICAgPC9UZXN0UHJvdmlkZXJzPlxuICAgICAgKTtcblxuICAgICAgYXdhaXQgd2FpdEZvcigoKSA9PiB7XG4gICAgICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXN0SWQoJ2J1dHRvbi1hZGQtZG9jdW1lbnQnKSkudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgICAgIH0pO1xuXG4gICAgICAvLyBDbGljayBBZGQgRG9jdW1lbnQgYnV0dG9uXG4gICAgICBhd2FpdCB1c2VyLmNsaWNrKHNjcmVlbi5nZXRCeVRlc3RJZCgnYnV0dG9uLWFkZC1kb2N1bWVudCcpKTtcblxuICAgICAgLy8gRmlsbCBvdXQgdGhlIGZvcm1cbiAgICAgIGF3YWl0IHVzZXIudHlwZShzY3JlZW4uZ2V0QnlUZXN0SWQoJ2lucHV0LWRvY3VtZW50LW5hbWUnKSwgJ05ldyBCdWlsZGluZyBQb2xpY3knKTtcbiAgICAgIGF3YWl0IHVzZXIuc2VsZWN0T3B0aW9ucyhzY3JlZW4uZ2V0QnlUZXN0SWQoJ3NlbGVjdC1kb2N1bWVudC10eXBlJyksICdwb2xpY2llcycpO1xuICAgICAgYXdhaXQgdXNlci50eXBlKFxuICAgICAgICBzY3JlZW4uZ2V0QnlUZXN0SWQoJ3RleHRhcmVhLWRvY3VtZW50LWRlc2NyaXB0aW9uJyksXG4gICAgICAgICdOZXcgcG9saWN5IGRvY3VtZW50IGZvciB0aGUgYnVpbGRpbmcnXG4gICAgICApO1xuICAgICAgYXdhaXQgdXNlci5jbGljayhzY3JlZW4uZ2V0QnlUZXN0SWQoJ2NoZWNrYm94LXZpc2libGUtdG8tdGVuYW50cycpKTtcblxuICAgICAgLy8gU3VibWl0IHRoZSBmb3JtXG4gICAgICBhd2FpdCB1c2VyLmNsaWNrKHNjcmVlbi5nZXRCeVRlc3RJZCgnYnV0dG9uLXN1Ym1pdC1kb2N1bWVudCcpKTtcblxuICAgICAgLy8gVmVyaWZ5IEFQSSBjYWxsIHdhcyBtYWRlXG4gICAgICBhd2FpdCB3YWl0Rm9yKCgpID0+IHtcbiAgICAgICAgZXhwZWN0KG1vY2tBcGlSZXF1ZXN0KS50b0hhdmVCZWVuQ2FsbGVkV2l0aCgnUE9TVCcsICcvYXBpL2RvY3VtZW50cycsIHtcbiAgICAgICAgICBuYW1lOiAnTmV3IEJ1aWxkaW5nIFBvbGljeScsXG4gICAgICAgICAgdHlwZTogJ3BvbGljaWVzJyxcbiAgICAgICAgICBkZXNjcmlwdGlvbjogJ05ldyBwb2xpY3kgZG9jdW1lbnQgZm9yIHRoZSBidWlsZGluZycsXG4gICAgICAgICAgaXNWaXNpYmxlVG9UZW5hbnRzOiB0cnVlLFxuICAgICAgICAgIGRvY3VtZW50VHlwZTogJ2J1aWxkaW5nJyxcbiAgICAgICAgICBidWlsZGluZ0lkOiAnYnVpbGRpbmctZGVtby03ODknLFxuICAgICAgICAgIHVwbG9hZGVkQnk6ICdtYW5hZ2VyLWRlbW8tNDU2JyxcbiAgICAgICAgfSk7XG4gICAgICB9KTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgYWxsb3cgbWFuYWdlciB0byB1cGxvYWQgZmlsZSB3aXRoIGRvY3VtZW50JywgYXN5bmMgKCkgPT4ge1xuICAgICAgbW9ja0FwaVJlcXVlc3RcbiAgICAgICAgLm1vY2tSZXNvbHZlZFZhbHVlT25jZShkZW1vTWFuYWdlclVzZXIpXG4gICAgICAgIC5tb2NrUmVzb2x2ZWRWYWx1ZU9uY2UoeyBidWlsZGluZ3M6IFtkZW1vQnVpbGRpbmdEYXRhXSB9KVxuICAgICAgICAubW9ja1Jlc29sdmVkVmFsdWVPbmNlKHsgZG9jdW1lbnRzOiBkZW1vQnVpbGRpbmdEb2N1bWVudHMgfSlcbiAgICAgICAgLm1vY2tSZXNvbHZlZFZhbHVlT25jZSh7IGlkOiAnZG9jLW5ldy0xMjMnIH0pXG4gICAgICAgIC5tb2NrUmVzb2x2ZWRWYWx1ZU9uY2Uoe30pOyAvLyBGaWxlIHVwbG9hZCByZXNwb25zZVxuXG4gICAgICByZW5kZXIoXG4gICAgICAgIDxUZXN0UHJvdmlkZXJzIHVzZXJSb2xlPSdtYW5hZ2VyJz5cbiAgICAgICAgICA8TWFuYWdlckJ1aWxkaW5nRG9jdW1lbnRzIC8+XG4gICAgICAgIDwvVGVzdFByb3ZpZGVycz5cbiAgICAgICk7XG5cbiAgICAgIGF3YWl0IHdhaXRGb3IoKCkgPT4ge1xuICAgICAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGVzdElkKCdidXR0b24tYWRkLWRvY3VtZW50JykpLnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgICB9KTtcblxuICAgICAgLy8gQ2xpY2sgQWRkIERvY3VtZW50IGJ1dHRvblxuICAgICAgYXdhaXQgdXNlci5jbGljayhzY3JlZW4uZ2V0QnlUZXN0SWQoJ2J1dHRvbi1hZGQtZG9jdW1lbnQnKSk7XG5cbiAgICAgIC8vIENyZWF0ZSBhIG1vY2sgZmlsZVxuICAgICAgY29uc3QgZmlsZSA9IG5ldyBGaWxlKFsndGVzdCBjb250ZW50J10sICd0ZXN0LXBvbGljeS5wZGYnLCB7IHR5cGU6ICdhcHBsaWNhdGlvbi9wZGYnIH0pO1xuXG4gICAgICAvLyBGaWxsIG91dCB0aGUgZm9ybVxuICAgICAgYXdhaXQgdXNlci50eXBlKHNjcmVlbi5nZXRCeVRlc3RJZCgnaW5wdXQtZG9jdW1lbnQtbmFtZScpLCAnVGVzdCBQb2xpY3kgRG9jdW1lbnQnKTtcbiAgICAgIGF3YWl0IHVzZXIuc2VsZWN0T3B0aW9ucyhzY3JlZW4uZ2V0QnlUZXN0SWQoJ3NlbGVjdC1kb2N1bWVudC10eXBlJyksICdwb2xpY2llcycpO1xuICAgICAgYXdhaXQgdXNlci51cGxvYWQoc2NyZWVuLmdldEJ5VGVzdElkKCdpbnB1dC1maWxlLXVwbG9hZCcpLCBmaWxlKTtcblxuICAgICAgLy8gU3VibWl0IHRoZSBmb3JtXG4gICAgICBhd2FpdCB1c2VyLmNsaWNrKHNjcmVlbi5nZXRCeVRlc3RJZCgnYnV0dG9uLXN1Ym1pdC1kb2N1bWVudCcpKTtcblxuICAgICAgLy8gVmVyaWZ5IGRvY3VtZW50IGNyZWF0aW9uIGFuZCBmaWxlIHVwbG9hZCBBUEkgY2FsbHNcbiAgICAgIGF3YWl0IHdhaXRGb3IoKCkgPT4ge1xuICAgICAgICBleHBlY3QobW9ja0FwaVJlcXVlc3QpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKCdQT1NUJywgJy9hcGkvZG9jdW1lbnRzJywgZXhwZWN0LmFueShPYmplY3QpKTtcbiAgICAgICAgZXhwZWN0KG1vY2tBcGlSZXF1ZXN0KS50b0hhdmVCZWVuQ2FsbGVkV2l0aChcbiAgICAgICAgICAnUE9TVCcsXG4gICAgICAgICAgJy9hcGkvZG9jdW1lbnRzL2RvYy1uZXctMTIzL3VwbG9hZCcsXG4gICAgICAgICAgZXhwZWN0LmFueShGb3JtRGF0YSlcbiAgICAgICAgKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBhbGxvdyBtYW5hZ2VyIHRvIGVkaXQgZG9jdW1lbnQnLCBhc3luYyAoKSA9PiB7XG4gICAgICBtb2NrQXBpUmVxdWVzdFxuICAgICAgICAubW9ja1Jlc29sdmVkVmFsdWVPbmNlKGRlbW9NYW5hZ2VyVXNlcilcbiAgICAgICAgLm1vY2tSZXNvbHZlZFZhbHVlT25jZSh7IGJ1aWxkaW5nczogW2RlbW9CdWlsZGluZ0RhdGFdIH0pXG4gICAgICAgIC5tb2NrUmVzb2x2ZWRWYWx1ZU9uY2UoeyBkb2N1bWVudHM6IGRlbW9CdWlsZGluZ0RvY3VtZW50cyB9KVxuICAgICAgICAubW9ja1Jlc29sdmVkVmFsdWVPbmNlKHsgLi4uZGVtb0J1aWxkaW5nRG9jdW1lbnRzWzBdLCBuYW1lOiAnVXBkYXRlZCBCdWlsZGluZyBSdWxlcycgfSk7XG5cbiAgICAgIHJlbmRlcihcbiAgICAgICAgPFRlc3RQcm92aWRlcnMgdXNlclJvbGU9J21hbmFnZXInPlxuICAgICAgICAgIDxNYW5hZ2VyQnVpbGRpbmdEb2N1bWVudHMgLz5cbiAgICAgICAgPC9UZXN0UHJvdmlkZXJzPlxuICAgICAgKTtcblxuICAgICAgYXdhaXQgd2FpdEZvcigoKSA9PiB7XG4gICAgICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXN0SWQoJ2J1dHRvbi1lZGl0LWRvYy1idWlsZGluZy0xJykpLnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgICB9KTtcblxuICAgICAgLy8gQ2xpY2sgZWRpdCBidXR0b25cbiAgICAgIGF3YWl0IHVzZXIuY2xpY2soc2NyZWVuLmdldEJ5VGVzdElkKCdidXR0b24tZWRpdC1kb2MtYnVpbGRpbmctMScpKTtcblxuICAgICAgLy8gTW9kaWZ5IHRoZSBkb2N1bWVudCBuYW1lXG4gICAgICBjb25zdCBuYW1lSW5wdXQgPSBzY3JlZW4uZ2V0QnlUZXN0SWQoJ2lucHV0LWVkaXQtZG9jdW1lbnQtbmFtZScpO1xuICAgICAgYXdhaXQgdXNlci5jbGVhcihuYW1lSW5wdXQpO1xuICAgICAgYXdhaXQgdXNlci50eXBlKG5hbWVJbnB1dCwgJ1VwZGF0ZWQgQnVpbGRpbmcgUnVsZXMnKTtcblxuICAgICAgLy8gQ2hhbmdlIHZpc2liaWxpdHlcbiAgICAgIGF3YWl0IHVzZXIuY2xpY2soc2NyZWVuLmdldEJ5VGVzdElkKCdjaGVja2JveC1lZGl0LXZpc2libGUtdG8tdGVuYW50cycpKTtcblxuICAgICAgLy8gU3VibWl0IHRoZSBjaGFuZ2VzXG4gICAgICBhd2FpdCB1c2VyLmNsaWNrKHNjcmVlbi5nZXRCeVRlc3RJZCgnYnV0dG9uLXVwZGF0ZS1kb2N1bWVudCcpKTtcblxuICAgICAgLy8gVmVyaWZ5IEFQSSBjYWxsIHdhcyBtYWRlXG4gICAgICBhd2FpdCB3YWl0Rm9yKCgpID0+IHtcbiAgICAgICAgZXhwZWN0KG1vY2tBcGlSZXF1ZXN0KS50b0hhdmVCZWVuQ2FsbGVkV2l0aCgnUFVUJywgJy9hcGkvZG9jdW1lbnRzL2RvYy1idWlsZGluZy0xJywge1xuICAgICAgICAgIG5hbWU6ICdVcGRhdGVkIEJ1aWxkaW5nIFJ1bGVzJyxcbiAgICAgICAgICB0eXBlOiAncG9saWNpZXMnLFxuICAgICAgICAgIGlzVmlzaWJsZVRvVGVuYW50czogZmFsc2UsXG4gICAgICAgIH0pO1xuICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGFsbG93IG1hbmFnZXIgdG8gZGVsZXRlIGRvY3VtZW50JywgYXN5bmMgKCkgPT4ge1xuICAgICAgbW9ja0FwaVJlcXVlc3RcbiAgICAgICAgLm1vY2tSZXNvbHZlZFZhbHVlT25jZShkZW1vTWFuYWdlclVzZXIpXG4gICAgICAgIC5tb2NrUmVzb2x2ZWRWYWx1ZU9uY2UoeyBidWlsZGluZ3M6IFtkZW1vQnVpbGRpbmdEYXRhXSB9KVxuICAgICAgICAubW9ja1Jlc29sdmVkVmFsdWVPbmNlKHsgZG9jdW1lbnRzOiBkZW1vQnVpbGRpbmdEb2N1bWVudHMgfSlcbiAgICAgICAgLm1vY2tSZXNvbHZlZFZhbHVlT25jZSh7fSk7IC8vIERlbGV0ZSByZXNwb25zZVxuXG4gICAgICByZW5kZXIoXG4gICAgICAgIDxUZXN0UHJvdmlkZXJzIHVzZXJSb2xlPSdtYW5hZ2VyJz5cbiAgICAgICAgICA8TWFuYWdlckJ1aWxkaW5nRG9jdW1lbnRzIC8+XG4gICAgICAgIDwvVGVzdFByb3ZpZGVycz5cbiAgICAgICk7XG5cbiAgICAgIGF3YWl0IHdhaXRGb3IoKCkgPT4ge1xuICAgICAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGVzdElkKCdidXR0b24tZGVsZXRlLWRvYy1idWlsZGluZy0xJykpLnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgICB9KTtcblxuICAgICAgLy8gQ2xpY2sgZGVsZXRlIGJ1dHRvblxuICAgICAgYXdhaXQgdXNlci5jbGljayhzY3JlZW4uZ2V0QnlUZXN0SWQoJ2J1dHRvbi1kZWxldGUtZG9jLWJ1aWxkaW5nLTEnKSk7XG5cbiAgICAgIC8vIFZlcmlmeSBjb25maXJtYXRpb24gZGlhbG9nIGFuZCBBUEkgY2FsbFxuICAgICAgYXdhaXQgd2FpdEZvcigoKSA9PiB7XG4gICAgICAgIGV4cGVjdChnbG9iYWwuY29uZmlybSkudG9IYXZlQmVlbkNhbGxlZFdpdGgoXG4gICAgICAgICAgJ0FyZSB5b3Ugc3VyZSB5b3Ugd2FudCB0byBkZWxldGUgdGhpcyBkb2N1bWVudD8nXG4gICAgICAgICk7XG4gICAgICAgIGV4cGVjdChtb2NrQXBpUmVxdWVzdCkudG9IYXZlQmVlbkNhbGxlZFdpdGgoXG4gICAgICAgICAgJ0RFTEVURScsXG4gICAgICAgICAgJy9hcGkvZG9jdW1lbnRzL2RvYy1idWlsZGluZy0xP3R5cGU9YnVpbGRpbmcnXG4gICAgICAgICk7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ01hbmFnZXIgVXNlciAtIE1hbmFnZXIgUmVzaWRlbmNlIERvY3VtZW50cyBQYWdlJywgKCkgPT4ge1xuICAgIGl0KCdzaG91bGQgZGlzcGxheSByZXNpZGVuY2UgZG9jdW1lbnRzIHdpdGggZnVsbCBtYW5hZ2VtZW50IGNvbnRyb2xzJywgYXN5bmMgKCkgPT4ge1xuICAgICAgbW9ja0FwaVJlcXVlc3RcbiAgICAgICAgLm1vY2tSZXNvbHZlZFZhbHVlT25jZShkZW1vTWFuYWdlclVzZXIpXG4gICAgICAgIC5tb2NrUmVzb2x2ZWRWYWx1ZU9uY2UoZGVtb1Jlc2lkZW5jZURhdGEpXG4gICAgICAgIC5tb2NrUmVzb2x2ZWRWYWx1ZU9uY2UoeyBidWlsZGluZ3M6IFtkZW1vQnVpbGRpbmdEYXRhXSB9KVxuICAgICAgICAubW9ja1Jlc29sdmVkVmFsdWVPbmNlKHsgZG9jdW1lbnRzOiBkZW1vUmVzaWRlbmNlRG9jdW1lbnRzIH0pO1xuXG4gICAgICAvLyBNb2NrIFVSTCBwYXJhbXMgZm9yIHJlc2lkZW5jZSBJRFxuICAgICAgd2luZG93LmxvY2F0aW9uID0ge1xuICAgICAgICBzZWFyY2g6ICc/cmVzaWRlbmNlSWQ9cmVzaWRlbmNlLWRlbW8tMTAxJyxcbiAgICAgICAgcGF0aG5hbWU6ICcvbWFuYWdlci9yZXNpZGVuY2VzL2RvY3VtZW50cycsXG4gICAgICB9IGFzIGFueTtcblxuICAgICAgcmVuZGVyKFxuICAgICAgICA8VGVzdFByb3ZpZGVycyB1c2VyUm9sZT0nbWFuYWdlcic+XG4gICAgICAgICAgPE1hbmFnZXJSZXNpZGVuY2VEb2N1bWVudHMgLz5cbiAgICAgICAgPC9UZXN0UHJvdmlkZXJzPlxuICAgICAgKTtcblxuICAgICAgYXdhaXQgd2FpdEZvcigoKSA9PiB7XG4gICAgICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXh0KCdVbml0IDEwMSBEb2N1bWVudHMnKSkudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgICAgIH0pO1xuXG4gICAgICAvLyBTaG91bGQgc2hvdyBhbGwgZG9jdW1lbnRzIGluY2x1ZGluZyBwcml2YXRlIG9uZXNcbiAgICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXh0KCdMZWFzZSBBZ3JlZW1lbnQnKSkudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXh0KCdNYWludGVuYW5jZSBIaXN0b3J5JykpLnRvQmVJblRoZURvY3VtZW50KCk7XG5cbiAgICAgIC8vIFNob3VsZCBzaG93IG1hbmFnZW1lbnQgY29udHJvbHNcbiAgICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXN0SWQoJ2J1dHRvbi1hZGQtZG9jdW1lbnQnKSkudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXN0SWQoJ2J1dHRvbi1lZGl0LWRvYy1yZXNpZGVuY2UtMScpKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgICAgZXhwZWN0KHNjcmVlbi5nZXRCeVRlc3RJZCgnYnV0dG9uLWRlbGV0ZS1kb2MtcmVzaWRlbmNlLTEnKSkudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgc2hvdyBidWlsZGluZyBjb250ZXh0IGluZm9ybWF0aW9uJywgYXN5bmMgKCkgPT4ge1xuICAgICAgbW9ja0FwaVJlcXVlc3RcbiAgICAgICAgLm1vY2tSZXNvbHZlZFZhbHVlT25jZShkZW1vTWFuYWdlclVzZXIpXG4gICAgICAgIC5tb2NrUmVzb2x2ZWRWYWx1ZU9uY2UoZGVtb1Jlc2lkZW5jZURhdGEpXG4gICAgICAgIC5tb2NrUmVzb2x2ZWRWYWx1ZU9uY2UoeyBidWlsZGluZ3M6IFtkZW1vQnVpbGRpbmdEYXRhXSB9KVxuICAgICAgICAubW9ja1Jlc29sdmVkVmFsdWVPbmNlKHsgZG9jdW1lbnRzOiBkZW1vUmVzaWRlbmNlRG9jdW1lbnRzIH0pO1xuXG4gICAgICByZW5kZXIoXG4gICAgICAgIDxUZXN0UHJvdmlkZXJzIHVzZXJSb2xlPSdtYW5hZ2VyJz5cbiAgICAgICAgICA8TWFuYWdlclJlc2lkZW5jZURvY3VtZW50cyAvPlxuICAgICAgICA8L1Rlc3RQcm92aWRlcnM+XG4gICAgICApO1xuXG4gICAgICBhd2FpdCB3YWl0Rm9yKCgpID0+IHtcbiAgICAgICAgZXhwZWN0KHNjcmVlbi5nZXRCeVRleHQoJ1VuaXQgMTAxJykpLnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgICB9KTtcblxuICAgICAgLy8gU2hvdWxkIHNob3cgYnVpbGRpbmcgaW5mb3JtYXRpb25cbiAgICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXh0KCdEZW1vIEJ1aWxkaW5nJykpLnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGV4dCgnMTIzIFRlc3QgU3RyZWV0LCBEZW1vIENpdHksIFFDJykpLnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGV4dCgnMiBiZWRyb29tcyDigKIgMSBiYXRocm9vbXMg4oCiIDg1MCBzcSBmdCcpKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBhbGxvdyBtYW5hZ2VyIHRvIGNyZWF0ZSByZXNpZGVuY2Utc3BlY2lmaWMgZG9jdW1lbnQnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBuZXdSZXNpZGVuY2VEb2N1bWVudCA9IHtcbiAgICAgICAgaWQ6ICdkb2MtcmVzaWRlbmNlLW5ldycsXG4gICAgICAgIG5hbWU6ICdNb3ZlLWluIEluc3BlY3Rpb24nLFxuICAgICAgICB0eXBlOiAnaW5zcGVjdGlvbicsXG4gICAgICAgIGlzVmlzaWJsZVRvVGVuYW50czogdHJ1ZSxcbiAgICAgIH07XG5cbiAgICAgIG1vY2tBcGlSZXF1ZXN0XG4gICAgICAgIC5tb2NrUmVzb2x2ZWRWYWx1ZU9uY2UoZGVtb01hbmFnZXJVc2VyKVxuICAgICAgICAubW9ja1Jlc29sdmVkVmFsdWVPbmNlKGRlbW9SZXNpZGVuY2VEYXRhKVxuICAgICAgICAubW9ja1Jlc29sdmVkVmFsdWVPbmNlKHsgYnVpbGRpbmdzOiBbZGVtb0J1aWxkaW5nRGF0YV0gfSlcbiAgICAgICAgLm1vY2tSZXNvbHZlZFZhbHVlT25jZSh7IGRvY3VtZW50czogZGVtb1Jlc2lkZW5jZURvY3VtZW50cyB9KVxuICAgICAgICAubW9ja1Jlc29sdmVkVmFsdWVPbmNlKG5ld1Jlc2lkZW5jZURvY3VtZW50KTtcblxuICAgICAgcmVuZGVyKFxuICAgICAgICA8VGVzdFByb3ZpZGVycyB1c2VyUm9sZT0nbWFuYWdlcic+XG4gICAgICAgICAgPE1hbmFnZXJSZXNpZGVuY2VEb2N1bWVudHMgLz5cbiAgICAgICAgPC9UZXN0UHJvdmlkZXJzPlxuICAgICAgKTtcblxuICAgICAgYXdhaXQgd2FpdEZvcigoKSA9PiB7XG4gICAgICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXN0SWQoJ2J1dHRvbi1hZGQtZG9jdW1lbnQnKSkudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgICAgIH0pO1xuXG4gICAgICAvLyBDbGljayBBZGQgRG9jdW1lbnQgYnV0dG9uXG4gICAgICBhd2FpdCB1c2VyLmNsaWNrKHNjcmVlbi5nZXRCeVRlc3RJZCgnYnV0dG9uLWFkZC1kb2N1bWVudCcpKTtcblxuICAgICAgLy8gRmlsbCBvdXQgdGhlIGZvcm1cbiAgICAgIGF3YWl0IHVzZXIudHlwZShzY3JlZW4uZ2V0QnlUZXN0SWQoJ2lucHV0LWRvY3VtZW50LW5hbWUnKSwgJ01vdmUtaW4gSW5zcGVjdGlvbicpO1xuICAgICAgYXdhaXQgdXNlci5zZWxlY3RPcHRpb25zKHNjcmVlbi5nZXRCeVRlc3RJZCgnc2VsZWN0LWRvY3VtZW50LXR5cGUnKSwgJ2luc3BlY3Rpb24nKTtcbiAgICAgIGF3YWl0IHVzZXIuY2xpY2soc2NyZWVuLmdldEJ5VGVzdElkKCdjaGVja2JveC12aXNpYmxlLXRvLXRlbmFudHMnKSk7XG5cbiAgICAgIC8vIFN1Ym1pdCB0aGUgZm9ybVxuICAgICAgYXdhaXQgdXNlci5jbGljayhzY3JlZW4uZ2V0QnlUZXN0SWQoJ2J1dHRvbi1zdWJtaXQtZG9jdW1lbnQnKSk7XG5cbiAgICAgIC8vIFZlcmlmeSBBUEkgY2FsbCB3YXMgbWFkZSB3aXRoIHJlc2lkZW5jZS1zcGVjaWZpYyBkYXRhXG4gICAgICBhd2FpdCB3YWl0Rm9yKCgpID0+IHtcbiAgICAgICAgZXhwZWN0KG1vY2tBcGlSZXF1ZXN0KS50b0hhdmVCZWVuQ2FsbGVkV2l0aCgnUE9TVCcsICcvYXBpL2RvY3VtZW50cycsIHtcbiAgICAgICAgICBuYW1lOiAnTW92ZS1pbiBJbnNwZWN0aW9uJyxcbiAgICAgICAgICB0eXBlOiAnaW5zcGVjdGlvbicsXG4gICAgICAgICAgaXNWaXNpYmxlVG9UZW5hbnRzOiB0cnVlLFxuICAgICAgICAgIGRvY3VtZW50VHlwZTogJ3Jlc2lkZW50JyxcbiAgICAgICAgICByZXNpZGVuY2VJZDogJ3Jlc2lkZW5jZS1kZW1vLTEwMScsXG4gICAgICAgICAgdXBsb2FkZWRCeTogJ21hbmFnZXItZGVtby00NTYnLFxuICAgICAgICB9KTtcbiAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBuYXZpZ2F0ZSBiYWNrIHRvIHJlc2lkZW5jZXMgbGlzdCcsIGFzeW5jICgpID0+IHtcbiAgICAgIG1vY2tBcGlSZXF1ZXN0XG4gICAgICAgIC5tb2NrUmVzb2x2ZWRWYWx1ZU9uY2UoZGVtb01hbmFnZXJVc2VyKVxuICAgICAgICAubW9ja1Jlc29sdmVkVmFsdWVPbmNlKGRlbW9SZXNpZGVuY2VEYXRhKVxuICAgICAgICAubW9ja1Jlc29sdmVkVmFsdWVPbmNlKHsgYnVpbGRpbmdzOiBbZGVtb0J1aWxkaW5nRGF0YV0gfSlcbiAgICAgICAgLm1vY2tSZXNvbHZlZFZhbHVlT25jZSh7IGRvY3VtZW50czogZGVtb1Jlc2lkZW5jZURvY3VtZW50cyB9KTtcblxuICAgICAgcmVuZGVyKFxuICAgICAgICA8VGVzdFByb3ZpZGVycyB1c2VyUm9sZT0nbWFuYWdlcic+XG4gICAgICAgICAgPE1hbmFnZXJSZXNpZGVuY2VEb2N1bWVudHMgLz5cbiAgICAgICAgPC9UZXN0UHJvdmlkZXJzPlxuICAgICAgKTtcblxuICAgICAgYXdhaXQgd2FpdEZvcigoKSA9PiB7XG4gICAgICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXN0SWQoJ2J1dHRvbi1iYWNrJykpLnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgICB9KTtcblxuICAgICAgLy8gQ2xpY2sgYmFjayBidXR0b25cbiAgICAgIGF3YWl0IHVzZXIuY2xpY2soc2NyZWVuLmdldEJ5VGVzdElkKCdidXR0b24tYmFjaycpKTtcblxuICAgICAgLy8gTm90ZTogbW9ja05hdmlnYXRlIGlzIGRlZmluZWQgaW4gdGhlIHdvdXRlciBtb2NrIHNjb3BlXG4gICAgICAvLyBWZXJpZnkgbmF2aWdhdGlvbiBmdW5jdGlvbmFsaXR5IGlzIGF2YWlsYWJsZVxuICAgICAgZXhwZWN0KHNjcmVlbi5nZXRCeVRlc3RJZCgnYnV0dG9uLWJhY2snKSkudG9IYXZlQmVlbkNhbGxlZDtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ0Vycm9yIEhhbmRsaW5nIGFuZCBFZGdlIENhc2VzJywgKCkgPT4ge1xuICAgIGl0KCdzaG91bGQgaGFuZGxlIEFQSSBlcnJvcnMgZ3JhY2VmdWxseScsIGFzeW5jICgpID0+IHtcbiAgICAgIG1vY2tBcGlSZXF1ZXN0Lm1vY2tSZWplY3RlZFZhbHVlT25jZShuZXcgRXJyb3IoJ05ldHdvcmsgZXJyb3InKSk7XG5cbiAgICAgIHJlbmRlcihcbiAgICAgICAgPFRlc3RQcm92aWRlcnMgdXNlclJvbGU9J3RlbmFudCc+XG4gICAgICAgICAgPFJlc2lkZW5jZURvY3VtZW50cyAvPlxuICAgICAgICA8L1Rlc3RQcm92aWRlcnM+XG4gICAgICApO1xuXG4gICAgICAvLyBTaG91bGQgc3RpbGwgcmVuZGVyIHRoZSBjb21wb25lbnQgd2l0aG91dCBjcmFzaGluZ1xuICAgICAgYXdhaXQgd2FpdEZvcigoKSA9PiB7XG4gICAgICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXh0KCdMb2FkaW5nIGRvY3VtZW50cy4uLicpKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGhhbmRsZSBtaXNzaW5nIHJlc2lkZW5jZSBJRCcsIGFzeW5jICgpID0+IHtcbiAgICAgIC8vIENsZWFyIFVSTCBwYXJhbXNcbiAgICAgIHdpbmRvdy5sb2NhdGlvbiA9IHtcbiAgICAgICAgc2VhcmNoOiAnJyxcbiAgICAgICAgcGF0aG5hbWU6ICcvbWFuYWdlci9yZXNpZGVuY2VzL2RvY3VtZW50cycsXG4gICAgICB9IGFzIGFueTtcblxuICAgICAgcmVuZGVyKFxuICAgICAgICA8VGVzdFByb3ZpZGVycyB1c2VyUm9sZT0nbWFuYWdlcic+XG4gICAgICAgICAgPE1hbmFnZXJSZXNpZGVuY2VEb2N1bWVudHMgLz5cbiAgICAgICAgPC9UZXN0UHJvdmlkZXJzPlxuICAgICAgKTtcblxuICAgICAgYXdhaXQgd2FpdEZvcigoKSA9PiB7XG4gICAgICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXh0KCdSZXNpZGVuY2UgSUQgUmVxdWlyZWQnKSkudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgICAgIH0pO1xuXG4gICAgICBleHBlY3QoXG4gICAgICAgIHNjcmVlbi5nZXRCeVRleHQoJ1BsZWFzZSBwcm92aWRlIGEgcmVzaWRlbmNlIElEIHRvIHZpZXcgZG9jdW1lbnRzLicpXG4gICAgICApLnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIHZhbGlkYXRlIHJlcXVpcmVkIGZpZWxkcyBpbiBkb2N1bWVudCBjcmVhdGlvbicsIGFzeW5jICgpID0+IHtcbiAgICAgIG1vY2tBcGlSZXF1ZXN0XG4gICAgICAgIC5tb2NrUmVzb2x2ZWRWYWx1ZU9uY2UoZGVtb01hbmFnZXJVc2VyKVxuICAgICAgICAubW9ja1Jlc29sdmVkVmFsdWVPbmNlKHsgYnVpbGRpbmdzOiBbZGVtb0J1aWxkaW5nRGF0YV0gfSlcbiAgICAgICAgLm1vY2tSZXNvbHZlZFZhbHVlT25jZSh7IGRvY3VtZW50czogZGVtb0J1aWxkaW5nRG9jdW1lbnRzIH0pO1xuXG4gICAgICByZW5kZXIoXG4gICAgICAgIDxUZXN0UHJvdmlkZXJzIHVzZXJSb2xlPSdtYW5hZ2VyJz5cbiAgICAgICAgICA8TWFuYWdlckJ1aWxkaW5nRG9jdW1lbnRzIC8+XG4gICAgICAgIDwvVGVzdFByb3ZpZGVycz5cbiAgICAgICk7XG5cbiAgICAgIGF3YWl0IHdhaXRGb3IoKCkgPT4ge1xuICAgICAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGVzdElkKCdidXR0b24tYWRkLWRvY3VtZW50JykpLnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgICB9KTtcblxuICAgICAgLy8gQ2xpY2sgQWRkIERvY3VtZW50IGJ1dHRvblxuICAgICAgYXdhaXQgdXNlci5jbGljayhzY3JlZW4uZ2V0QnlUZXN0SWQoJ2J1dHRvbi1hZGQtZG9jdW1lbnQnKSk7XG5cbiAgICAgIC8vIFRyeSB0byBzdWJtaXQgd2l0aG91dCBmaWxsaW5nIHJlcXVpcmVkIGZpZWxkc1xuICAgICAgYXdhaXQgdXNlci5jbGljayhzY3JlZW4uZ2V0QnlUZXN0SWQoJ2J1dHRvbi1zdWJtaXQtZG9jdW1lbnQnKSk7XG5cbiAgICAgIC8vIFNob3VsZCBub3QgbWFrZSBBUEkgY2FsbCBkdWUgdG8gdmFsaWRhdGlvblxuICAgICAgZXhwZWN0KG1vY2tBcGlSZXF1ZXN0KS5ub3QudG9IYXZlQmVlbkNhbGxlZFdpdGgoJ1BPU1QnLCAnL2FwaS9kb2N1bWVudHMnLCBleHBlY3QuYW55KE9iamVjdCkpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBoYW5kbGUgZmlsZSB1cGxvYWQgZXJyb3JzJywgYXN5bmMgKCkgPT4ge1xuICAgICAgbW9ja0FwaVJlcXVlc3RcbiAgICAgICAgLm1vY2tSZXNvbHZlZFZhbHVlT25jZShkZW1vTWFuYWdlclVzZXIpXG4gICAgICAgIC5tb2NrUmVzb2x2ZWRWYWx1ZU9uY2UoeyBidWlsZGluZ3M6IFtkZW1vQnVpbGRpbmdEYXRhXSB9KVxuICAgICAgICAubW9ja1Jlc29sdmVkVmFsdWVPbmNlKHsgZG9jdW1lbnRzOiBkZW1vQnVpbGRpbmdEb2N1bWVudHMgfSlcbiAgICAgICAgLm1vY2tSZXNvbHZlZFZhbHVlT25jZSh7IGlkOiAnZG9jLW5ldy0xMjMnIH0pXG4gICAgICAgIC5tb2NrUmVqZWN0ZWRWYWx1ZU9uY2UobmV3IEVycm9yKCdGaWxlIHVwbG9hZCBmYWlsZWQnKSk7XG5cbiAgICAgIHJlbmRlcihcbiAgICAgICAgPFRlc3RQcm92aWRlcnMgdXNlclJvbGU9J21hbmFnZXInPlxuICAgICAgICAgIDxNYW5hZ2VyQnVpbGRpbmdEb2N1bWVudHMgLz5cbiAgICAgICAgPC9UZXN0UHJvdmlkZXJzPlxuICAgICAgKTtcblxuICAgICAgYXdhaXQgd2FpdEZvcigoKSA9PiB7XG4gICAgICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXN0SWQoJ2J1dHRvbi1hZGQtZG9jdW1lbnQnKSkudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgICAgIH0pO1xuXG4gICAgICAvLyBDbGljayBBZGQgRG9jdW1lbnQgYnV0dG9uXG4gICAgICBhd2FpdCB1c2VyLmNsaWNrKHNjcmVlbi5nZXRCeVRlc3RJZCgnYnV0dG9uLWFkZC1kb2N1bWVudCcpKTtcblxuICAgICAgY29uc3QgZmlsZSA9IG5ldyBGaWxlKFsndGVzdCddLCAndGVzdC5wZGYnLCB7IHR5cGU6ICdhcHBsaWNhdGlvbi9wZGYnIH0pO1xuXG4gICAgICAvLyBGaWxsIG91dCB0aGUgZm9ybVxuICAgICAgYXdhaXQgdXNlci50eXBlKHNjcmVlbi5nZXRCeVRlc3RJZCgnaW5wdXQtZG9jdW1lbnQtbmFtZScpLCAnVGVzdCBEb2N1bWVudCcpO1xuICAgICAgYXdhaXQgdXNlci5zZWxlY3RPcHRpb25zKHNjcmVlbi5nZXRCeVRlc3RJZCgnc2VsZWN0LWRvY3VtZW50LXR5cGUnKSwgJ3BvbGljaWVzJyk7XG4gICAgICBhd2FpdCB1c2VyLnVwbG9hZChzY3JlZW4uZ2V0QnlUZXN0SWQoJ2lucHV0LWZpbGUtdXBsb2FkJyksIGZpbGUpO1xuXG4gICAgICAvLyBTdWJtaXQgdGhlIGZvcm1cbiAgICAgIGF3YWl0IHVzZXIuY2xpY2soc2NyZWVuLmdldEJ5VGVzdElkKCdidXR0b24tc3VibWl0LWRvY3VtZW50JykpO1xuXG4gICAgICAvLyBTaG91bGQgaGFuZGxlIHRoZSB1cGxvYWQgZXJyb3IgZ3JhY2VmdWxseVxuICAgICAgYXdhaXQgd2FpdEZvcigoKSA9PiB7XG4gICAgICAgIGV4cGVjdChtb2NrQXBpUmVxdWVzdCkudG9IYXZlQmVlbkNhbGxlZFdpdGgoJ1BPU1QnLCAnL2FwaS9kb2N1bWVudHMnLCBleHBlY3QuYW55KE9iamVjdCkpO1xuICAgICAgICBleHBlY3QobW9ja0FwaVJlcXVlc3QpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKFxuICAgICAgICAgICdQT1NUJyxcbiAgICAgICAgICAnL2FwaS9kb2N1bWVudHMvZG9jLW5ldy0xMjMvdXBsb2FkJyxcbiAgICAgICAgICBleHBlY3QuYW55KEZvcm1EYXRhKVxuICAgICAgICApO1xuICAgICAgfSk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdEb2N1bWVudCBDYXRlZ29yaWVzIGFuZCBUeXBlcycsICgpID0+IHtcbiAgICBpdCgnc2hvdWxkIHN1cHBvcnQgYWxsIGJ1aWxkaW5nIGRvY3VtZW50IGNhdGVnb3JpZXMnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBidWlsZGluZ0NhdGVnb3JpZXMgPSBbXG4gICAgICAgICdwb2xpY2llcycsXG4gICAgICAgICdmaW5hbmNpYWwnLFxuICAgICAgICAnbGVnYWwnLFxuICAgICAgICAnbWFpbnRlbmFuY2UnLFxuICAgICAgICAnaW5zdXJhbmNlJyxcbiAgICAgICAgJ21lZXRpbmdfbWludXRlcycsXG4gICAgICAgICdub3RpY2VzJyxcbiAgICAgICAgJ290aGVyJyxcbiAgICAgIF07XG5cbiAgICAgIG1vY2tBcGlSZXF1ZXN0XG4gICAgICAgIC5tb2NrUmVzb2x2ZWRWYWx1ZU9uY2UoZGVtb01hbmFnZXJVc2VyKVxuICAgICAgICAubW9ja1Jlc29sdmVkVmFsdWVPbmNlKHsgYnVpbGRpbmdzOiBbZGVtb0J1aWxkaW5nRGF0YV0gfSlcbiAgICAgICAgLm1vY2tSZXNvbHZlZFZhbHVlT25jZSh7IGRvY3VtZW50czogZGVtb0J1aWxkaW5nRG9jdW1lbnRzIH0pO1xuXG4gICAgICByZW5kZXIoXG4gICAgICAgIDxUZXN0UHJvdmlkZXJzIHVzZXJSb2xlPSdtYW5hZ2VyJz5cbiAgICAgICAgICA8TWFuYWdlckJ1aWxkaW5nRG9jdW1lbnRzIC8+XG4gICAgICAgIDwvVGVzdFByb3ZpZGVycz5cbiAgICAgICk7XG5cbiAgICAgIGF3YWl0IHdhaXRGb3IoKCkgPT4ge1xuICAgICAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGVzdElkKCdidXR0b24tYWRkLWRvY3VtZW50JykpLnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgICB9KTtcblxuICAgICAgLy8gQ2xpY2sgQWRkIERvY3VtZW50IGJ1dHRvblxuICAgICAgYXdhaXQgdXNlci5jbGljayhzY3JlZW4uZ2V0QnlUZXN0SWQoJ2J1dHRvbi1hZGQtZG9jdW1lbnQnKSk7XG5cbiAgICAgIGNvbnN0IHR5cGVTZWxlY3QgPSBzY3JlZW4uZ2V0QnlUZXN0SWQoJ3NlbGVjdC1kb2N1bWVudC10eXBlJyk7XG5cbiAgICAgIC8vIENoZWNrIHRoYXQgYWxsIGNhdGVnb3JpZXMgYXJlIGF2YWlsYWJsZVxuICAgICAgZm9yIChjb25zdCBjYXRlZ29yeSBvZiBidWlsZGluZ0NhdGVnb3JpZXMpIHtcbiAgICAgICAgZXhwZWN0KHNjcmVlbi5nZXRCeVJvbGUoJ29wdGlvbicsIHsgbmFtZTogbmV3IFJlZ0V4cChjYXRlZ29yeSwgJ2knKSB9KSkudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgc3VwcG9ydCBhbGwgcmVzaWRlbmNlIGRvY3VtZW50IGNhdGVnb3JpZXMnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCByZXNpZGVuY2VDYXRlZ29yaWVzID0gW1xuICAgICAgICAnbGVhc2UnLFxuICAgICAgICAnaW5zcGVjdGlvbicsXG4gICAgICAgICdtYWludGVuYW5jZScsXG4gICAgICAgICdsZWdhbCcsXG4gICAgICAgICdpbnN1cmFuY2UnLFxuICAgICAgICAnZmluYW5jaWFsJyxcbiAgICAgICAgJ2NvbW11bmljYXRpb24nLFxuICAgICAgICAncGhvdG9zJyxcbiAgICAgICAgJ290aGVyJyxcbiAgICAgIF07XG5cbiAgICAgIG1vY2tBcGlSZXF1ZXN0XG4gICAgICAgIC5tb2NrUmVzb2x2ZWRWYWx1ZU9uY2UoZGVtb01hbmFnZXJVc2VyKVxuICAgICAgICAubW9ja1Jlc29sdmVkVmFsdWVPbmNlKGRlbW9SZXNpZGVuY2VEYXRhKVxuICAgICAgICAubW9ja1Jlc29sdmVkVmFsdWVPbmNlKHsgYnVpbGRpbmdzOiBbZGVtb0J1aWxkaW5nRGF0YV0gfSlcbiAgICAgICAgLm1vY2tSZXNvbHZlZFZhbHVlT25jZSh7IGRvY3VtZW50czogZGVtb1Jlc2lkZW5jZURvY3VtZW50cyB9KTtcblxuICAgICAgcmVuZGVyKFxuICAgICAgICA8VGVzdFByb3ZpZGVycyB1c2VyUm9sZT0nbWFuYWdlcic+XG4gICAgICAgICAgPE1hbmFnZXJSZXNpZGVuY2VEb2N1bWVudHMgLz5cbiAgICAgICAgPC9UZXN0UHJvdmlkZXJzPlxuICAgICAgKTtcblxuICAgICAgYXdhaXQgd2FpdEZvcigoKSA9PiB7XG4gICAgICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXN0SWQoJ2J1dHRvbi1hZGQtZG9jdW1lbnQnKSkudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgICAgIH0pO1xuXG4gICAgICAvLyBDbGljayBBZGQgRG9jdW1lbnQgYnV0dG9uXG4gICAgICBhd2FpdCB1c2VyLmNsaWNrKHNjcmVlbi5nZXRCeVRlc3RJZCgnYnV0dG9uLWFkZC1kb2N1bWVudCcpKTtcblxuICAgICAgLy8gQ2hlY2sgdGhhdCBhbGwgY2F0ZWdvcmllcyBhcmUgYXZhaWxhYmxlXG4gICAgICBmb3IgKGNvbnN0IGNhdGVnb3J5IG9mIHJlc2lkZW5jZUNhdGVnb3JpZXMpIHtcbiAgICAgICAgZXhwZWN0KHNjcmVlbi5nZXRCeVJvbGUoJ29wdGlvbicsIHsgbmFtZTogbmV3IFJlZ0V4cChjYXRlZ29yeSwgJ2knKSB9KSkudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfSk7XG59KTtcbiJdLCJ2ZXJzaW9uIjozfQ==