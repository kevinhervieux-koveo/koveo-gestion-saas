b67fdcaa6faff0d6680b6b7c6cb60b32
"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
const jsx_runtime_1 = require("react/jsx-runtime");
/**
 * Comprehensive Form Submission Test Suite
 *
 * This test suite validates that ALL forms in the Koveo Gestion application
 * submit correctly with proper data handling, error management, and API integration.
 *
 * Forms tested for actual submission behavior:
 * 1. Authentication Forms (login, password reset)
 * 2. User Management Forms (invitations, profile updates)
 * 3. Property Management Forms (buildings, residences)
 * 4. Financial Forms (bills, payments)
 * 5. Document Forms (upload, categorization)
 * 6. Maintenance Forms (demands, bug reports)
 */
const globals_1 = require("@jest/globals");
globals_1.jest.mock('@/lib/queryClient', () => ({
    apiRequest: mockApiRequest,
}));
globals_1.jest.mock('@/hooks/use-auth', () => ({
    useAuth: () => mockAuth,
}));
globals_1.jest.mock('@/hooks/use-toast', () => ({
    useToast: () => ({ toast: mockToast }),
}));
// Mock useLocation hook
globals_1.jest.mock('wouter', () => ({
    useLocation: () => ['/', globals_1.jest.fn()],
    Link: ({ children, href }) => ((0, jsx_runtime_1.jsx)("a", { href: href, children: children })),
}));
// Mock language hook
globals_1.jest.mock('@/hooks/use-language', () => ({
    useLanguage: () => ({
        language: 'en',
        t: (key) => key,
        changeLanguage: globals_1.jest.fn(),
    }),
}));
const react_1 = require("@testing-library/react");
const user_event_1 = __importDefault(require("@testing-library/user-event"));
const react_query_1 = require("@tanstack/react-query");
const react_2 = __importDefault(require("react"));
// Test utilities
const createTestQueryClient = () => {
    return new react_query_1.QueryClient({
        defaultOptions: {
            queries: {
                retry: false,
            },
            mutations: {
                retry: false,
            },
        },
    });
};
const TestWrapper = ({ children }) => {
    const queryClient = createTestQueryClient();
    return ((0, jsx_runtime_1.jsx)(react_query_1.QueryClientProvider, { client: queryClient, children: children }));
};
// Mock API request function
const mockApiRequest = globals_1.jest.fn();
// Mock authentication hook
const mockAuth = {
    user: {
        id: '123e4567-e89b-12d3-a456-426614174000',
        email: 'test@example.com',
        role: 'admin',
        organizationId: '123e4567-e89b-12d3-a456-426614174001'
    },
    login: globals_1.jest.fn(),
    logout: globals_1.jest.fn(),
};
// Mock toast hook
const mockToast = globals_1.jest.fn();
(0, globals_1.describe)('Comprehensive Form Submission Tests', () => {
    (0, globals_1.beforeEach)(() => {
        globals_1.jest.clearAllMocks();
        mockApiRequest.mockResolvedValue({ success: true });
    });
    (0, globals_1.describe)('Authentication Form Submissions', () => {
        (0, globals_1.it)('should submit login form with correct credentials', async () => {
            // Mock login component
            const LoginForm = () => {
                const [email, setEmail] = react_2.default.useState('');
                const [password, setPassword] = react_2.default.useState('');
                const [isSubmitting, setIsSubmitting] = react_2.default.useState(false);
                const handleSubmit = async (e) => {
                    e.preventDefault();
                    setIsSubmitting(true);
                    try {
                        await mockApiRequest('POST', '/api/auth/login', { email, password });
                        mockAuth.login({ email, password });
                    }
                    finally {
                        setIsSubmitting(false);
                    }
                };
                return ((0, jsx_runtime_1.jsxs)("form", { onSubmit: handleSubmit, "data-testid": "login-form", children: [(0, jsx_runtime_1.jsx)("input", { "data-testid": "email-input", type: "email", value: email, onChange: (e) => setEmail(e.target.value), placeholder: "Email" }), (0, jsx_runtime_1.jsx)("input", { "data-testid": "password-input", type: "password", value: password, onChange: (e) => setPassword(e.target.value), placeholder: "Password" }), (0, jsx_runtime_1.jsx)("button", { "data-testid": "login-submit", type: "submit", disabled: isSubmitting, children: isSubmitting ? 'Logging in...' : 'Login' })] }));
            };
            (0, react_1.render)((0, jsx_runtime_1.jsx)(LoginForm, {}), { wrapper: TestWrapper });
            const emailInput = react_1.screen.getByTestId('email-input');
            const passwordInput = react_1.screen.getByTestId('password-input');
            const submitButton = react_1.screen.getByTestId('login-submit');
            await user_event_1.default.type(emailInput, 'test@example.com');
            await user_event_1.default.type(passwordInput, 'validPassword123');
            await user_event_1.default.click(submitButton);
            await (0, react_1.waitFor)(() => {
                (0, globals_1.expect)(mockApiRequest).toHaveBeenCalledWith('POST', '/api/auth/login', {
                    email: 'test@example.com',
                    password: 'validPassword123'
                });
            });
            (0, globals_1.expect)(mockAuth.login).toHaveBeenCalledWith({
                email: 'test@example.com',
                password: 'validPassword123'
            });
        });
        (0, globals_1.it)('should handle login form validation errors', async () => {
            mockApiRequest.mockRejectedValue(new Error('Invalid credentials'));
            const LoginForm = () => {
                const [email, setEmail] = react_2.default.useState('');
                const [password, setPassword] = react_2.default.useState('');
                const [error, setError] = react_2.default.useState('');
                const handleSubmit = async (e) => {
                    e.preventDefault();
                    try {
                        await mockApiRequest('POST', '/api/auth/login', { email, password });
                    }
                    catch (err) {
                        setError(err.message);
                    }
                };
                return ((0, jsx_runtime_1.jsxs)("form", { onSubmit: handleSubmit, "data-testid": "login-form", children: [(0, jsx_runtime_1.jsx)("input", { "data-testid": "email-input", type: "email", value: email, onChange: (e) => setEmail(e.target.value) }), (0, jsx_runtime_1.jsx)("input", { "data-testid": "password-input", type: "password", value: password, onChange: (e) => setPassword(e.target.value) }), (0, jsx_runtime_1.jsx)("button", { "data-testid": "login-submit", type: "submit", children: "Login" }), error && (0, jsx_runtime_1.jsx)("div", { "data-testid": "error-message", children: error })] }));
            };
            (0, react_1.render)((0, jsx_runtime_1.jsx)(LoginForm, {}), { wrapper: TestWrapper });
            const emailInput = react_1.screen.getByTestId('email-input');
            const passwordInput = react_1.screen.getByTestId('password-input');
            const submitButton = react_1.screen.getByTestId('login-submit');
            await user_event_1.default.type(emailInput, 'wrong@example.com');
            await user_event_1.default.type(passwordInput, 'wrongpassword');
            await user_event_1.default.click(submitButton);
            await (0, react_1.waitFor)(() => {
                (0, globals_1.expect)(react_1.screen.getByTestId('error-message')).toHaveTextContent('Invalid credentials');
            });
        });
    });
    (0, globals_1.describe)('Property Management Form Submissions', () => {
        (0, globals_1.it)('should submit building creation form with valid data', async () => {
            const BuildingForm = () => {
                const [formData, setFormData] = react_2.default.useState({
                    name: '',
                    organizationId: '',
                    address: '',
                    city: '',
                    province: 'QC',
                    postalCode: '',
                    buildingType: 'condo',
                    totalUnits: 0
                });
                const handleSubmit = async (e) => {
                    e.preventDefault();
                    await mockApiRequest('POST', '/api/buildings', formData);
                    mockToast({ title: 'Building created successfully' });
                };
                const handleChange = (field, value) => {
                    setFormData(prev => ({ ...prev, [field]: value }));
                };
                return ((0, jsx_runtime_1.jsxs)("form", { onSubmit: handleSubmit, "data-testid": "building-form", children: [(0, jsx_runtime_1.jsx)("input", { "data-testid": "building-name", value: formData.name, onChange: (e) => handleChange('name', e.target.value), placeholder: "Building Name" }), (0, jsx_runtime_1.jsxs)("select", { "data-testid": "organization-select", value: formData.organizationId, onChange: (e) => handleChange('organizationId', e.target.value), children: [(0, jsx_runtime_1.jsx)("option", { value: "", children: "Select Organization" }), (0, jsx_runtime_1.jsx)("option", { value: "123e4567-e89b-12d3-a456-426614174001", children: "Test Org" })] }), (0, jsx_runtime_1.jsx)("input", { "data-testid": "building-address", value: formData.address, onChange: (e) => handleChange('address', e.target.value), placeholder: "Address" }), (0, jsx_runtime_1.jsx)("input", { "data-testid": "building-city", value: formData.city, onChange: (e) => handleChange('city', e.target.value), placeholder: "City" }), (0, jsx_runtime_1.jsx)("input", { "data-testid": "building-postalcode", value: formData.postalCode, onChange: (e) => handleChange('postalCode', e.target.value), placeholder: "Postal Code" }), (0, jsx_runtime_1.jsx)("input", { "data-testid": "building-units", type: "number", value: formData.totalUnits, onChange: (e) => handleChange('totalUnits', parseInt(e.target.value) || 0), placeholder: "Total Units" }), (0, jsx_runtime_1.jsx)("button", { "data-testid": "building-submit", type: "submit", children: "Create Building" })] }));
            };
            (0, react_1.render)((0, jsx_runtime_1.jsx)(BuildingForm, {}), { wrapper: TestWrapper });
            // Fill out the form
            await user_event_1.default.type(react_1.screen.getByTestId('building-name'), 'Sunset Towers');
            await user_event_1.default.selectOptions(react_1.screen.getByTestId('organization-select'), '123e4567-e89b-12d3-a456-426614174001');
            await user_event_1.default.type(react_1.screen.getByTestId('building-address'), '456 Main Street');
            await user_event_1.default.type(react_1.screen.getByTestId('building-city'), 'Montreal');
            await user_event_1.default.type(react_1.screen.getByTestId('building-postalcode'), 'H3A 1B1');
            await user_event_1.default.clear(react_1.screen.getByTestId('building-units'));
            await user_event_1.default.type(react_1.screen.getByTestId('building-units'), '50');
            await user_event_1.default.click(react_1.screen.getByTestId('building-submit'));
            await (0, react_1.waitFor)(() => {
                (0, globals_1.expect)(mockApiRequest).toHaveBeenCalledWith('POST', '/api/buildings', {
                    name: 'Sunset Towers',
                    organizationId: '123e4567-e89b-12d3-a456-426614174001',
                    address: '456 Main Street',
                    city: 'Montreal',
                    province: 'QC',
                    postalCode: 'H3A 1B1',
                    buildingType: 'condo',
                    totalUnits: 50
                });
            });
            (0, globals_1.expect)(mockToast).toHaveBeenCalledWith({ title: 'Building created successfully' });
        });
    });
    (0, globals_1.describe)('Financial Form Submissions', () => {
        (0, globals_1.it)('should submit bill creation form with proper amount validation', async () => {
            const BillForm = () => {
                const [formData, setFormData] = react_2.default.useState({
                    title: '',
                    category: 'utilities',
                    paymentType: 'unique',
                    totalAmount: '',
                    startDate: '',
                    status: 'draft'
                });
                const handleSubmit = async (e) => {
                    e.preventDefault();
                    // Validate amount
                    const amount = parseFloat(formData.totalAmount);
                    if (isNaN(amount) || amount <= 0) {
                        mockToast({ title: 'Invalid amount', variant: 'destructive' });
                        return;
                    }
                    await mockApiRequest('POST', '/api/bills', formData);
                    mockToast({ title: 'Bill created successfully' });
                };
                const handleChange = (field, value) => {
                    setFormData(prev => ({ ...prev, [field]: value }));
                };
                return ((0, jsx_runtime_1.jsxs)("form", { onSubmit: handleSubmit, "data-testid": "bill-form", children: [(0, jsx_runtime_1.jsx)("input", { "data-testid": "bill-title", value: formData.title, onChange: (e) => handleChange('title', e.target.value), placeholder: "Bill Title" }), (0, jsx_runtime_1.jsx)("input", { "data-testid": "bill-amount", value: formData.totalAmount, onChange: (e) => handleChange('totalAmount', e.target.value), placeholder: "Amount" }), (0, jsx_runtime_1.jsx)("input", { "data-testid": "bill-date", type: "date", value: formData.startDate, onChange: (e) => handleChange('startDate', e.target.value) }), (0, jsx_runtime_1.jsx)("button", { "data-testid": "bill-submit", type: "submit", children: "Create Bill" })] }));
            };
            (0, react_1.render)((0, jsx_runtime_1.jsx)(BillForm, {}), { wrapper: TestWrapper });
            // Test valid submission
            await user_event_1.default.type(react_1.screen.getByTestId('bill-title'), 'Monthly Electricity');
            await user_event_1.default.type(react_1.screen.getByTestId('bill-amount'), '150.75');
            await user_event_1.default.type(react_1.screen.getByTestId('bill-date'), '2025-01-01');
            await user_event_1.default.click(react_1.screen.getByTestId('bill-submit'));
            await (0, react_1.waitFor)(() => {
                (0, globals_1.expect)(mockApiRequest).toHaveBeenCalledWith('POST', '/api/bills', {
                    title: 'Monthly Electricity',
                    category: 'utilities',
                    paymentType: 'unique',
                    totalAmount: '150.75',
                    startDate: '2025-01-01',
                    status: 'draft'
                });
            });
            (0, globals_1.expect)(mockToast).toHaveBeenCalledWith({ title: 'Bill created successfully' });
        });
        (0, globals_1.it)('should handle invalid bill amount submission', async () => {
            const BillForm = () => {
                const [formData, setFormData] = react_2.default.useState({
                    title: 'Test Bill',
                    totalAmount: ''
                });
                const handleSubmit = async (e) => {
                    e.preventDefault();
                    const amount = parseFloat(formData.totalAmount);
                    if (isNaN(amount) || amount <= 0) {
                        mockToast({ title: 'Invalid amount', variant: 'destructive' });
                        return;
                    }
                    await mockApiRequest('POST', '/api/bills', formData);
                };
                return ((0, jsx_runtime_1.jsxs)("form", { onSubmit: handleSubmit, "data-testid": "bill-form", children: [(0, jsx_runtime_1.jsx)("input", { "data-testid": "bill-amount", value: formData.totalAmount, onChange: (e) => setFormData(prev => ({ ...prev, totalAmount: e.target.value })), placeholder: "Amount" }), (0, jsx_runtime_1.jsx)("button", { "data-testid": "bill-submit", type: "submit", children: "Create Bill" })] }));
            };
            (0, react_1.render)((0, jsx_runtime_1.jsx)(BillForm, {}), { wrapper: TestWrapper });
            // Test invalid amount
            await user_event_1.default.type(react_1.screen.getByTestId('bill-amount'), '-50');
            await user_event_1.default.click(react_1.screen.getByTestId('bill-submit'));
            await (0, react_1.waitFor)(() => {
                (0, globals_1.expect)(mockToast).toHaveBeenCalledWith({
                    title: 'Invalid amount',
                    variant: 'destructive'
                });
            });
            (0, globals_1.expect)(mockApiRequest).not.toHaveBeenCalled();
        });
    });
    (0, globals_1.describe)('Maintenance Form Submissions', () => {
        (0, globals_1.it)('should submit demand creation form with UUID handling', async () => {
            const DemandForm = () => {
                const [formData, setFormData] = react_2.default.useState({
                    type: 'maintenance',
                    description: '',
                    buildingId: '',
                    residenceId: ''
                });
                const handleSubmit = async (e) => {
                    e.preventDefault();
                    // Convert empty strings to undefined for optional UUID fields
                    const submissionData = {
                        ...formData,
                        buildingId: formData.buildingId || undefined,
                        residenceId: formData.residenceId || undefined
                    };
                    await mockApiRequest('POST', '/api/demands', submissionData);
                    mockToast({ title: 'Demand created successfully' });
                };
                const handleChange = (field, value) => {
                    setFormData(prev => ({ ...prev, [field]: value }));
                };
                return ((0, jsx_runtime_1.jsxs)("form", { onSubmit: handleSubmit, "data-testid": "demand-form", children: [(0, jsx_runtime_1.jsxs)("select", { "data-testid": "demand-type", value: formData.type, onChange: (e) => handleChange('type', e.target.value), children: [(0, jsx_runtime_1.jsx)("option", { value: "maintenance", children: "Maintenance" }), (0, jsx_runtime_1.jsx)("option", { value: "complaint", children: "Complaint" }), (0, jsx_runtime_1.jsx)("option", { value: "information", children: "Information" }), (0, jsx_runtime_1.jsx)("option", { value: "other", children: "Other" })] }), (0, jsx_runtime_1.jsx)("textarea", { "data-testid": "demand-description", value: formData.description, onChange: (e) => handleChange('description', e.target.value), placeholder: "Description" }), (0, jsx_runtime_1.jsxs)("select", { "data-testid": "demand-building", value: formData.buildingId, onChange: (e) => handleChange('buildingId', e.target.value), children: [(0, jsx_runtime_1.jsx)("option", { value: "", children: "Select Building (Optional)" }), (0, jsx_runtime_1.jsx)("option", { value: "123e4567-e89b-12d3-a456-426614174000", children: "Building A" })] }), (0, jsx_runtime_1.jsx)("button", { "data-testid": "demand-submit", type: "submit", children: "Submit Demand" })] }));
            };
            (0, react_1.render)((0, jsx_runtime_1.jsx)(DemandForm, {}), { wrapper: TestWrapper });
            // Fill out form with optional building ID
            await user_event_1.default.selectOptions(react_1.screen.getByTestId('demand-type'), 'maintenance');
            await user_event_1.default.type(react_1.screen.getByTestId('demand-description'), 'The heating system needs repair urgently.');
            await user_event_1.default.selectOptions(react_1.screen.getByTestId('demand-building'), '123e4567-e89b-12d3-a456-426614174000');
            await user_event_1.default.click(react_1.screen.getByTestId('demand-submit'));
            await (0, react_1.waitFor)(() => {
                (0, globals_1.expect)(mockApiRequest).toHaveBeenCalledWith('POST', '/api/demands', {
                    type: 'maintenance',
                    description: 'The heating system needs repair urgently.',
                    buildingId: '123e4567-e89b-12d3-a456-426614174000',
                    residenceId: undefined
                });
            });
            (0, globals_1.expect)(mockToast).toHaveBeenCalledWith({ title: 'Demand created successfully' });
        });
        (0, globals_1.it)('should submit demand without optional UUID fields', async () => {
            const DemandForm = () => {
                const [formData, setFormData] = react_2.default.useState({
                    type: 'information',
                    description: 'General inquiry about building policies.'
                });
                const handleSubmit = async (e) => {
                    e.preventDefault();
                    await mockApiRequest('POST', '/api/demands', formData);
                };
                return ((0, jsx_runtime_1.jsxs)("form", { onSubmit: handleSubmit, "data-testid": "demand-form", children: [(0, jsx_runtime_1.jsx)("textarea", { "data-testid": "demand-description", value: formData.description, readOnly: true }), (0, jsx_runtime_1.jsx)("button", { "data-testid": "demand-submit", type: "submit", children: "Submit" })] }));
            };
            (0, react_1.render)((0, jsx_runtime_1.jsx)(DemandForm, {}), { wrapper: TestWrapper });
            await user_event_1.default.click(react_1.screen.getByTestId('demand-submit'));
            await (0, react_1.waitFor)(() => {
                (0, globals_1.expect)(mockApiRequest).toHaveBeenCalledWith('POST', '/api/demands', {
                    type: 'information',
                    description: 'General inquiry about building policies.'
                });
            });
        });
    });
    (0, globals_1.describe)('Document Management Form Submissions', () => {
        (0, globals_1.it)('should submit document upload form with file handling', async () => {
            const DocumentForm = () => {
                const [formData, setFormData] = react_2.default.useState({
                    name: '',
                    type: 'financial',
                    dateReference: '',
                    isVisibleToTenants: true
                });
                const [file, setFile] = react_2.default.useState(null);
                const handleSubmit = async (e) => {
                    e.preventDefault();
                    if (!file) {
                        mockToast({ title: 'Please select a file', variant: 'destructive' });
                        return;
                    }
                    const formDataWithFile = new FormData();
                    Object.entries(formData).forEach(([key, value]) => {
                        formDataWithFile.append(key, value.toString());
                    });
                    formDataWithFile.append('file', file);
                    await mockApiRequest('POST', '/api/documents', formDataWithFile);
                    mockToast({ title: 'Document uploaded successfully' });
                };
                const handleFileChange = (e) => {
                    const selectedFile = e.target.files?.[0] || null;
                    setFile(selectedFile);
                };
                const handleChange = (field, value) => {
                    setFormData(prev => ({ ...prev, [field]: value }));
                };
                return ((0, jsx_runtime_1.jsxs)("form", { onSubmit: handleSubmit, "data-testid": "document-form", children: [(0, jsx_runtime_1.jsx)("input", { "data-testid": "document-name", value: formData.name, onChange: (e) => handleChange('name', e.target.value), placeholder: "Document Name" }), (0, jsx_runtime_1.jsx)("input", { "data-testid": "document-date", type: "date", value: formData.dateReference, onChange: (e) => handleChange('dateReference', e.target.value) }), (0, jsx_runtime_1.jsx)("input", { "data-testid": "document-file", type: "file", onChange: handleFileChange, accept: ".pdf,.doc,.docx,.jpg,.png" }), (0, jsx_runtime_1.jsx)("button", { "data-testid": "document-submit", type: "submit", children: "Upload Document" })] }));
            };
            (0, react_1.render)((0, jsx_runtime_1.jsx)(DocumentForm, {}), { wrapper: TestWrapper });
            const file = new File(['dummy content'], 'test-document.pdf', { type: 'application/pdf' });
            await user_event_1.default.type(react_1.screen.getByTestId('document-name'), 'Annual Financial Report');
            await user_event_1.default.type(react_1.screen.getByTestId('document-date'), '2024-12-31');
            await user_event_1.default.upload(react_1.screen.getByTestId('document-file'), file);
            await user_event_1.default.click(react_1.screen.getByTestId('document-submit'));
            await (0, react_1.waitFor)(() => {
                (0, globals_1.expect)(mockApiRequest).toHaveBeenCalledWith('POST', '/api/documents', globals_1.expect.any(FormData));
            });
            (0, globals_1.expect)(mockToast).toHaveBeenCalledWith({ title: 'Document uploaded successfully' });
        });
    });
    (0, globals_1.describe)('Edge Cases and Error Handling', () => {
        (0, globals_1.it)('should handle network errors gracefully', async () => {
            mockApiRequest.mockRejectedValue(new Error('Network error'));
            const TestForm = () => {
                const [error, setError] = react_2.default.useState('');
                const handleSubmit = async (e) => {
                    e.preventDefault();
                    try {
                        await mockApiRequest('POST', '/api/test', { data: 'test' });
                    }
                    catch (err) {
                        setError(err.message);
                    }
                };
                return ((0, jsx_runtime_1.jsxs)("form", { onSubmit: handleSubmit, "data-testid": "test-form", children: [(0, jsx_runtime_1.jsx)("button", { "data-testid": "submit-button", type: "submit", children: "Submit" }), error && (0, jsx_runtime_1.jsx)("div", { "data-testid": "error-display", children: error })] }));
            };
            (0, react_1.render)((0, jsx_runtime_1.jsx)(TestForm, {}), { wrapper: TestWrapper });
            await user_event_1.default.click(react_1.screen.getByTestId('submit-button'));
            await (0, react_1.waitFor)(() => {
                (0, globals_1.expect)(react_1.screen.getByTestId('error-display')).toHaveTextContent('Network error');
            });
        });
        (0, globals_1.it)('should prevent multiple submissions', async () => {
            let submitCount = 0;
            mockApiRequest.mockImplementation(() => {
                submitCount++;
                return new Promise(resolve => setTimeout(resolve, 100));
            });
            const TestForm = () => {
                const [isSubmitting, setIsSubmitting] = react_2.default.useState(false);
                const handleSubmit = async (e) => {
                    e.preventDefault();
                    if (isSubmitting)
                        return;
                    setIsSubmitting(true);
                    try {
                        await mockApiRequest('POST', '/api/test', { data: 'test' });
                    }
                    finally {
                        setIsSubmitting(false);
                    }
                };
                return ((0, jsx_runtime_1.jsx)("form", { onSubmit: handleSubmit, "data-testid": "test-form", children: (0, jsx_runtime_1.jsx)("button", { "data-testid": "submit-button", type: "submit", disabled: isSubmitting, children: isSubmitting ? 'Submitting...' : 'Submit' }) }));
            };
            (0, react_1.render)((0, jsx_runtime_1.jsx)(TestForm, {}), { wrapper: TestWrapper });
            const submitButton = react_1.screen.getByTestId('submit-button');
            // Click multiple times rapidly
            await user_event_1.default.click(submitButton);
            await user_event_1.default.click(submitButton);
            await user_event_1.default.click(submitButton);
            await (0, react_1.waitFor)(() => {
                (0, globals_1.expect)(submitCount).toBe(1);
            });
        });
        (0, globals_1.it)('should handle form reset after successful submission', async () => {
            const TestForm = () => {
                const [value, setValue] = react_2.default.useState('');
                const [submitted, setSubmitted] = react_2.default.useState(false);
                const handleSubmit = async (e) => {
                    e.preventDefault();
                    await mockApiRequest('POST', '/api/test', { value });
                    setValue(''); // Reset form
                    setSubmitted(true);
                };
                return ((0, jsx_runtime_1.jsxs)("form", { onSubmit: handleSubmit, "data-testid": "test-form", children: [(0, jsx_runtime_1.jsx)("input", { "data-testid": "test-input", value: value, onChange: (e) => setValue(e.target.value) }), (0, jsx_runtime_1.jsx)("button", { "data-testid": "submit-button", type: "submit", children: "Submit" }), submitted && (0, jsx_runtime_1.jsx)("div", { "data-testid": "success-message", children: "Form submitted!" })] }));
            };
            (0, react_1.render)((0, jsx_runtime_1.jsx)(TestForm, {}), { wrapper: TestWrapper });
            const input = react_1.screen.getByTestId('test-input');
            const submitButton = react_1.screen.getByTestId('submit-button');
            await user_event_1.default.type(input, 'test value');
            (0, globals_1.expect)(input).toHaveValue('test value');
            await user_event_1.default.click(submitButton);
            await (0, react_1.waitFor)(() => {
                (0, globals_1.expect)(react_1.screen.getByTestId('success-message')).toBeInTheDocument();
                (0, globals_1.expect)(input).toHaveValue(''); // Form should be reset
            });
        });
    });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiL2hvbWUvcnVubmVyL3dvcmtzcGFjZS90ZXN0cy91bml0L2NvbXByZWhlbnNpdmUtZm9ybS1zdWJtaXNzaW9uLXRlc3RzLnRlc3QudHN4IiwibWFwcGluZ3MiOiI7Ozs7OztBQUFBOzs7Ozs7Ozs7Ozs7O0dBYUc7QUFFSCwyQ0FBdUU7QUErQnZFLGNBQUksQ0FBQyxJQUFJLENBQUMsbUJBQW1CLEVBQUUsR0FBRyxFQUFFLENBQUMsQ0FBQztJQUNwQyxVQUFVLEVBQUUsY0FBYztDQUMzQixDQUFDLENBQUMsQ0FBQztBQWNKLGNBQUksQ0FBQyxJQUFJLENBQUMsa0JBQWtCLEVBQUUsR0FBRyxFQUFFLENBQUMsQ0FBQztJQUNuQyxPQUFPLEVBQUUsR0FBRyxFQUFFLENBQUMsUUFBUTtDQUN4QixDQUFDLENBQUMsQ0FBQztBQUlKLGNBQUksQ0FBQyxJQUFJLENBQUMsbUJBQW1CLEVBQUUsR0FBRyxFQUFFLENBQUMsQ0FBQztJQUNwQyxRQUFRLEVBQUUsR0FBRyxFQUFFLENBQUMsQ0FBQyxFQUFFLEtBQUssRUFBRSxTQUFTLEVBQUUsQ0FBQztDQUN2QyxDQUFDLENBQUMsQ0FBQztBQUVKLHdCQUF3QjtBQUN4QixjQUFJLENBQUMsSUFBSSxDQUFDLFFBQVEsRUFBRSxHQUFHLEVBQUUsQ0FBQyxDQUFDO0lBQ3pCLFdBQVcsRUFBRSxHQUFHLEVBQUUsQ0FBQyxDQUFDLEdBQUcsRUFBRSxjQUFJLENBQUMsRUFBRSxFQUFFLENBQUM7SUFDbkMsSUFBSSxFQUFFLENBQUMsRUFBRSxRQUFRLEVBQUUsSUFBSSxFQUErQyxFQUFFLEVBQUUsQ0FBQyxDQUN6RSw4QkFBRyxJQUFJLEVBQUUsSUFBSSxZQUFHLFFBQVEsR0FBSyxDQUM5QjtDQUNGLENBQUMsQ0FBQyxDQUFDO0FBRUoscUJBQXFCO0FBQ3JCLGNBQUksQ0FBQyxJQUFJLENBQUMsc0JBQXNCLEVBQUUsR0FBRyxFQUFFLENBQUMsQ0FBQztJQUN2QyxXQUFXLEVBQUUsR0FBRyxFQUFFLENBQUMsQ0FBQztRQUNsQixRQUFRLEVBQUUsSUFBSTtRQUNk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LElBQ2pFLENBQ1IsQ0FBQztZQUNKLENBQUMsQ0FBQztZQUVGLElBQUEsY0FBTSxFQUFDLHVCQUFDLFFBQVEsS0FBRyxFQUFFLEVBQUUsT0FBTyxFQUFFLFdBQVcsRUFBRSxDQUFDLENBQUM7WUFFL0MsTUFBTSxLQUFLLEdBQUcsY0FBTSxDQUFDLFdBQVcsQ0FBQyxZQUFZLENBQUMsQ0FBQztZQUMvQyxNQUFNLFlBQVksR0FBRyxjQUFNLENBQUMsV0FBVyxDQUFDLGVBQWUsQ0FBQyxDQUFDO1lBRXpELE1BQU0sb0JBQVMsQ0FBQyxJQUFJLENBQUMsS0FBSyxFQUFFLFlBQVksQ0FBQyxDQUFDO1lBQzFDLElBQUEsZ0JBQU0sRUFBQyxLQUFLLENBQUMsQ0FBQyxXQUFXLENBQUMsWUFBWSxDQUFDLENBQUM7WUFFeEMsTUFBTSxvQkFBUyxDQUFDLEtBQUssQ0FBQyxZQUFZLENBQUMsQ0FBQztZQUVwQyxNQUFNLElBQUEsZUFBTyxFQUFDLEdBQUcsRUFBRTtnQkFDakIsSUFBQSxnQkFBTSxFQUFDLGNBQU0sQ0FBQyxXQUFXLENBQUMsaUJBQWlCLENBQUMsQ0FBQyxDQUFDLGlCQUFpQixFQUFFLENBQUM7Z0JBQ2xFLElBQUEsZ0JBQU0sRUFBQyxLQUFLLENBQUMsQ0FBQyxXQUFXLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyx1QkFBdUI7WUFDeEQsQ0FBQyxDQUFDLENBQUM7UUFDTCxDQUFDLENBQUMsQ0FBQztJQUNMLENBQUMsQ0FBQyxDQUFDO0FBQ0wsQ0FBQyxDQUFDLENBQUMiLCJuYW1lcyI6W10sInNvdXJjZXMiOlsiL2hvbWUvcnVubmVyL3dvcmtzcGFjZS90ZXN0cy91bml0L2NvbXByZWhlbnNpdmUtZm9ybS1zdWJtaXNzaW9uLXRlc3RzLnRlc3QudHN4Il0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogQ29tcHJlaGVuc2l2ZSBGb3JtIFN1Ym1pc3Npb24gVGVzdCBTdWl0ZVxuICogXG4gKiBUaGlzIHRlc3Qgc3VpdGUgdmFsaWRhdGVzIHRoYXQgQUxMIGZvcm1zIGluIHRoZSBLb3ZlbyBHZXN0aW9uIGFwcGxpY2F0aW9uXG4gKiBzdWJtaXQgY29ycmVjdGx5IHdpdGggcHJvcGVyIGRhdGEgaGFuZGxpbmcsIGVycm9yIG1hbmFnZW1lbnQsIGFuZCBBUEkgaW50ZWdyYXRpb24uXG4gKiBcbiAqIEZvcm1zIHRlc3RlZCBmb3IgYWN0dWFsIHN1Ym1pc3Npb24gYmVoYXZpb3I6XG4gKiAxLiBBdXRoZW50aWNhdGlvbiBGb3JtcyAobG9naW4sIHBhc3N3b3JkIHJlc2V0KVxuICogMi4gVXNlciBNYW5hZ2VtZW50IEZvcm1zIChpbnZpdGF0aW9ucywgcHJvZmlsZSB1cGRhdGVzKVxuICogMy4gUHJvcGVydHkgTWFuYWdlbWVudCBGb3JtcyAoYnVpbGRpbmdzLCByZXNpZGVuY2VzKVxuICogNC4gRmluYW5jaWFsIEZvcm1zIChiaWxscywgcGF5bWVudHMpXG4gKiA1LiBEb2N1bWVudCBGb3JtcyAodXBsb2FkLCBjYXRlZ29yaXphdGlvbilcbiAqIDYuIE1haW50ZW5hbmNlIEZvcm1zIChkZW1hbmRzLCBidWcgcmVwb3J0cylcbiAqL1xuXG5pbXBvcnQgeyBkZXNjcmliZSwgaXQsIGV4cGVjdCwgamVzdCwgYmVmb3JlRWFjaCB9IGZyb20gJ0BqZXN0L2dsb2JhbHMnO1xuaW1wb3J0IHsgcmVuZGVyLCBzY3JlZW4sIGZpcmVFdmVudCwgd2FpdEZvciB9IGZyb20gJ0B0ZXN0aW5nLWxpYnJhcnkvcmVhY3QnO1xuaW1wb3J0IHVzZXJFdmVudCBmcm9tICdAdGVzdGluZy1saWJyYXJ5L3VzZXItZXZlbnQnO1xuaW1wb3J0IHsgUXVlcnlDbGllbnQsIFF1ZXJ5Q2xpZW50UHJvdmlkZXIgfSBmcm9tICdAdGFuc3RhY2svcmVhY3QtcXVlcnknO1xuaW1wb3J0IFJlYWN0IGZyb20gJ3JlYWN0JztcblxuLy8gVGVzdCB1dGlsaXRpZXNcbmNvbnN0IGNyZWF0ZVRlc3RRdWVyeUNsaWVudCA9ICgpID0+IHtcbiAgcmV0dXJuIG5ldyBRdWVyeUNsaWVudCh7XG4gICAgZGVmYXVsdE9wdGlvbnM6IHtcbiAgICAgIHF1ZXJpZXM6IHtcbiAgICAgICAgcmV0cnk6IGZhbHNlLFxuICAgICAgfSxcbiAgICAgIG11dGF0aW9uczoge1xuICAgICAgICByZXRyeTogZmFsc2UsXG4gICAgICB9LFxuICAgIH0sXG4gIH0pO1xufTtcblxuY29uc3QgVGVzdFdyYXBwZXI6IFJlYWN0LkZDPHsgY2hpbGRyZW46IFJlYWN0LlJlYWN0Tm9kZSB9PiA9ICh7IGNoaWxkcmVuIH0pID0+IHtcbiAgY29uc3QgcXVlcnlDbGllbnQgPSBjcmVhdGVUZXN0UXVlcnlDbGllbnQoKTtcbiAgcmV0dXJuIChcbiAgICA8UXVlcnlDbGllbnRQcm92aWRlciBjbGllbnQ9e3F1ZXJ5Q2xpZW50fT5cbiAgICAgIHtjaGlsZHJlbn1cbiAgICA8L1F1ZXJ5Q2xpZW50UHJvdmlkZXI+XG4gICk7XG59O1xuXG4vLyBNb2NrIEFQSSByZXF1ZXN0IGZ1bmN0aW9uXG5jb25zdCBtb2NrQXBpUmVxdWVzdCA9IGplc3QuZm4oKTtcbmplc3QubW9jaygnQC9saWIvcXVlcnlDbGllbnQnLCAoKSA9PiAoe1xuICBhcGlSZXF1ZXN0OiBtb2NrQXBpUmVxdWVzdCxcbn0pKTtcblxuLy8gTW9jayBhdXRoZW50aWNhdGlvbiBob29rXG5jb25zdCBtb2NrQXV0aCA9IHtcbiAgdXNlcjoge1xuICAgIGlkOiAnMTIzZTQ1NjctZTg5Yi0xMmQzLWE0NTYtNDI2NjE0MTc0MDAwJyxcbiAgICBlbWFpbDogJ3Rlc3RAZXhhbXBsZS5jb20nLFxuICAgIHJvbGU6ICdhZG1pbicsXG4gICAgb3JnYW5pemF0aW9uSWQ6ICcxMjNlNDU2Ny1lODliLTEyZDMtYTQ1Ni00MjY2MTQxNzQwMDEnXG4gIH0sXG4gIGxvZ2luOiBqZXN0LmZuKCksXG4gIGxvZ291dDogamVzdC5mbigpLFxufTtcblxuamVzdC5tb2NrKCdAL2hvb2tzL3VzZS1hdXRoJywgKCkgPT4gKHtcbiAgdXNlQXV0aDogKCkgPT4gbW9ja0F1dGgsXG59KSk7XG5cbi8vIE1vY2sgdG9hc3QgaG9va1xuY29uc3QgbW9ja1RvYXN0ID0gamVzdC5mbigpO1xuamVzdC5tb2NrKCdAL2hvb2tzL3VzZS10b2FzdCcsICgpID0+ICh7XG4gIHVzZVRvYXN0OiAoKSA9PiAoeyB0b2FzdDogbW9ja1RvYXN0IH0pLFxufSkpO1xuXG4vLyBNb2NrIHVzZUxvY2F0aW9uIGhvb2tcbmplc3QubW9jaygnd291dGVyJywgKCkgPT4gKHtcbiAgdXNlTG9jYXRpb246ICgpID0+IFsnLycsIGplc3QuZm4oKV0sXG4gIExpbms6ICh7IGNoaWxkcmVuLCBocmVmIH06IHsgY2hpbGRyZW46IFJlYWN0LlJlYWN0Tm9kZTsgaHJlZjogc3RyaW5nIH0pID0+IChcbiAgICA8YSBocmVmPXtocmVmfT57Y2hpbGRyZW59PC9hPlxuICApLFxufSkpO1xuXG4vLyBNb2NrIGxhbmd1YWdlIGhvb2tcbmplc3QubW9jaygnQC9ob29rcy91c2UtbGFuZ3VhZ2UnLCAoKSA9PiAoe1xuICB1c2VMYW5ndWFnZTogKCkgPT4gKHtcbiAgICBsYW5ndWFnZTogJ2VuJyxcbiAgICB0OiAoa2V5OiBzdHJpbmcpID0+IGtleSxcbiAgICBjaGFuZ2VMYW5ndWFnZTogamVzdC5mbigpLFxuICB9KSxcbn0pKTtcblxuZGVzY3JpYmUoJ0NvbXByZWhlbnNpdmUgRm9ybSBTdWJtaXNzaW9uIFRlc3RzJywgKCkgPT4ge1xuICBiZWZvcmVFYWNoKCgpID0+IHtcbiAgICBqZXN0LmNsZWFyQWxsTW9ja3MoKTtcbiAgICBtb2NrQXBpUmVxdWVzdC5tb2NrUmVzb2x2ZWRWYWx1ZSh7IHN1Y2Nlc3M6IHRydWUgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdBdXRoZW50aWNhdGlvbiBGb3JtIFN1Ym1pc3Npb25zJywgKCkgPT4ge1xuICAgIGl0KCdzaG91bGQgc3VibWl0IGxvZ2luIGZvcm0gd2l0aCBjb3JyZWN0IGNyZWRlbnRpYWxzJywgYXN5bmMgKCkgPT4ge1xuICAgICAgLy8gTW9jayBsb2dpbiBjb21wb25lbnRcbiAgICAgIGNvbnN0IExvZ2luRm9ybSA9ICgpID0+IHtcbiAgICAgICAgY29uc3QgW2VtYWlsLCBzZXRFbWFpbF0gPSBSZWFjdC51c2VTdGF0ZSgnJyk7XG4gICAgICAgIGNvbnN0IFtwYXNzd29yZCwgc2V0UGFzc3dvcmRdID0gUmVhY3QudXNlU3RhdGUoJycpO1xuICAgICAgICBjb25zdCBbaXNTdWJtaXR0aW5nLCBzZXRJc1N1Ym1pdHRpbmddID0gUmVhY3QudXNlU3RhdGUoZmFsc2UpO1xuXG4gICAgICAgIGNvbnN0IGhhbmRsZVN1Ym1pdCA9IGFzeW5jIChlOiBSZWFjdC5Gb3JtRXZlbnQpID0+IHtcbiAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgc2V0SXNTdWJtaXR0aW5nKHRydWUpO1xuICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICBhd2FpdCBtb2NrQXBpUmVxdWVzdCgnUE9TVCcsICcvYXBpL2F1dGgvbG9naW4nLCB7IGVtYWlsLCBwYXNzd29yZCB9KTtcbiAgICAgICAgICAgIG1vY2tBdXRoLmxvZ2luKHsgZW1haWwsIHBhc3N3b3JkIH0pO1xuICAgICAgICAgIH0gZmluYWxseSB7XG4gICAgICAgICAgICBzZXRJc1N1Ym1pdHRpbmcoZmFsc2UpO1xuICAgICAgICAgIH1cbiAgICAgICAgfTtcblxuICAgICAgICByZXR1cm4gKFxuICAgICAgICAgIDxmb3JtIG9uU3VibWl0PXtoYW5kbGVTdWJtaXR9IGRhdGEtdGVzdGlkPVwibG9naW4tZm9ybVwiPlxuICAgICAgICAgICAgPGlucHV0XG4gICAgICAgICAgICAgIGRhdGEtdGVzdGlkPVwiZW1haWwtaW5wdXRcIlxuICAgICAgICAgICAgICB0eXBlPVwiZW1haWxcIlxuICAgICAgICAgICAgICB2YWx1ZT17ZW1haWx9XG4gICAgICAgICAgICAgIG9uQ2hhbmdlPXsoZSkgPT4gc2V0RW1haWwoZS50YXJnZXQudmFsdWUpfVxuICAgICAgICAgICAgICBwbGFjZWhvbGRlcj1cIkVtYWlsXCJcbiAgICAgICAgICAgIC8+XG4gICAgICAgICAgICA8aW5wdXRcbiAgICAgICAgICAgICAgZGF0YS10ZXN0aWQ9XCJwYXNzd29yZC1pbnB1dFwiXG4gICAgICAgICAgICAgIHR5cGU9XCJwYXNzd29yZFwiXG4gICAgICAgICAgICAgIHZhbHVlPXtwYXNzd29yZH1cbiAgICAgICAgICAgICAgb25DaGFuZ2U9eyhlKSA9PiBzZXRQYXNzd29yZChlLnRhcmdldC52YWx1ZSl9XG4gICAgICAgICAgICAgIHBsYWNlaG9sZGVyPVwiUGFzc3dvcmRcIlxuICAgICAgICAgICAgLz5cbiAgICAgICAgICAgIDxidXR0b25cbiAgICAgICAgICAgICAgZGF0YS10ZXN0aWQ9XCJsb2dpbi1zdWJtaXRcIlxuICAgICAgICAgICAgICB0eXBlPVwic3VibWl0XCJcbiAgICAgICAgICAgICAgZGlzYWJsZWQ9e2lzU3VibWl0dGluZ31cbiAgICAgICAgICAgID5cbiAgICAgICAgICAgICAge2lzU3VibWl0dGluZyA/ICdMb2dnaW5nIGluLi4uJyA6ICdMb2dpbid9XG4gICAgICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgICA8L2Zvcm0+XG4gICAgICAgICk7XG4gICAgICB9O1xuXG4gICAgICByZW5kZXIoPExvZ2luRm9ybSAvPiwgeyB3cmFwcGVyOiBUZXN0V3JhcHBlciB9KTtcblxuICAgICAgY29uc3QgZW1haWxJbnB1dCA9IHNjcmVlbi5nZXRCeVRlc3RJZCgnZW1haWwtaW5wdXQnKTtcbiAgICAgIGNvbnN0IHBhc3N3b3JkSW5wdXQgPSBzY3JlZW4uZ2V0QnlUZXN0SWQoJ3Bhc3N3b3JkLWlucHV0Jyk7XG4gICAgICBjb25zdCBzdWJtaXRCdXR0b24gPSBzY3JlZW4uZ2V0QnlUZXN0SWQoJ2xvZ2luLXN1Ym1pdCcpO1xuXG4gICAgICBhd2FpdCB1c2VyRXZlbnQudHlwZShlbWFpbElucHV0LCAndGVzdEBleGFtcGxlLmNvbScpO1xuICAgICAgYXdhaXQgdXNlckV2ZW50LnR5cGUocGFzc3dvcmRJbnB1dCwgJ3ZhbGlkUGFzc3dvcmQxMjMnKTtcbiAgICAgIGF3YWl0IHVzZXJFdmVudC5jbGljayhzdWJtaXRCdXR0b24pO1xuXG4gICAgICBhd2FpdCB3YWl0Rm9yKCgpID0+IHtcbiAgICAgICAgZXhwZWN0KG1vY2tBcGlSZXF1ZXN0KS50b0hhdmVCZWVuQ2FsbGVkV2l0aCgnUE9TVCcsICcvYXBpL2F1dGgvbG9naW4nLCB7XG4gICAgICAgICAgZW1haWw6ICd0ZXN0QGV4YW1wbGUuY29tJyxcbiAgICAgICAgICBwYXNzd29yZDogJ3ZhbGlkUGFzc3dvcmQxMjMnXG4gICAgICAgIH0pO1xuICAgICAgfSk7XG5cbiAgICAgIGV4cGVjdChtb2NrQXV0aC5sb2dpbikudG9IYXZlQmVlbkNhbGxlZFdpdGgoe1xuICAgICAgICBlbWFpbDogJ3Rlc3RAZXhhbXBsZS5jb20nLFxuICAgICAgICBwYXNzd29yZDogJ3ZhbGlkUGFzc3dvcmQxMjMnXG4gICAgICB9KTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgaGFuZGxlIGxvZ2luIGZvcm0gdmFsaWRhdGlvbiBlcnJvcnMnLCBhc3luYyAoKSA9PiB7XG4gICAgICBtb2NrQXBpUmVxdWVzdC5tb2NrUmVqZWN0ZWRWYWx1ZShuZXcgRXJyb3IoJ0ludmFsaWQgY3JlZGVudGlhbHMnKSk7XG5cbiAgICAgIGNvbnN0IExvZ2luRm9ybSA9ICgpID0+IHtcbiAgICAgICAgY29uc3QgW2VtYWlsLCBzZXRFbWFpbF0gPSBSZWFjdC51c2VTdGF0ZSgnJyk7XG4gICAgICAgIGNvbnN0IFtwYXNzd29yZCwgc2V0UGFzc3dvcmRdID0gUmVhY3QudXNlU3RhdGUoJycpO1xuICAgICAgICBjb25zdCBbZXJyb3IsIHNldEVycm9yXSA9IFJlYWN0LnVzZVN0YXRlKCcnKTtcblxuICAgICAgICBjb25zdCBoYW5kbGVTdWJtaXQgPSBhc3luYyAoZTogUmVhY3QuRm9ybUV2ZW50KSA9PiB7XG4gICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICBhd2FpdCBtb2NrQXBpUmVxdWVzdCgnUE9TVCcsICcvYXBpL2F1dGgvbG9naW4nLCB7IGVtYWlsLCBwYXNzd29yZCB9KTtcbiAgICAgICAgICB9IGNhdGNoIChlcnI6IGFueSkge1xuICAgICAgICAgICAgc2V0RXJyb3IoZXJyLm1lc3NhZ2UpO1xuICAgICAgICAgIH1cbiAgICAgICAgfTtcblxuICAgICAgICByZXR1cm4gKFxuICAgICAgICAgIDxmb3JtIG9uU3VibWl0PXtoYW5kbGVTdWJtaXR9IGRhdGEtdGVzdGlkPVwibG9naW4tZm9ybVwiPlxuICAgICAgICAgICAgPGlucHV0XG4gICAgICAgICAgICAgIGRhdGEtdGVzdGlkPVwiZW1haWwtaW5wdXRcIlxuICAgICAgICAgICAgICB0eXBlPVwiZW1haWxcIlxuICAgICAgICAgICAgICB2YWx1ZT17ZW1haWx9XG4gICAgICAgICAgICAgIG9uQ2hhbmdlPXsoZSkgPT4gc2V0RW1haWwoZS50YXJnZXQudmFsdWUpfVxuICAgICAgICAgICAgLz5cbiAgICAgICAgICAgIDxpbnB1dFxuICAgICAgICAgICAgICBkYXRhLXRlc3RpZD1cInBhc3N3b3JkLWlucHV0XCJcbiAgICAgICAgICAgICAgdHlwZT1cInBhc3N3b3JkXCJcbiAgICAgICAgICAgICAgdmFsdWU9e3Bhc3N3b3JkfVxuICAgICAgICAgICAgICBvbkNoYW5nZT17KGUpID0+IHNldFBhc3N3b3JkKGUudGFyZ2V0LnZhbHVlKX1cbiAgICAgICAgICAgIC8+XG4gICAgICAgICAgICA8YnV0dG9uIGRhdGEtdGVzdGlkPVwibG9naW4tc3VibWl0XCIgdHlwZT1cInN1Ym1pdFwiPlxuICAgICAgICAgICAgICBMb2dpblxuICAgICAgICAgICAgPC9idXR0b24+XG4gICAgICAgICAgICB7ZXJyb3IgJiYgPGRpdiBkYXRhLXRlc3RpZD1cImVycm9yLW1lc3NhZ2VcIj57ZXJyb3J9PC9kaXY+fVxuICAgICAgICAgIDwvZm9ybT5cbiAgICAgICAgKTtcbiAgICAgIH07XG5cbiAgICAgIHJlbmRlcig8TG9naW5Gb3JtIC8+LCB7IHdyYXBwZXI6IFRlc3RXcmFwcGVyIH0pO1xuXG4gICAgICBjb25zdCBlbWFpbElucHV0ID0gc2NyZWVuLmdldEJ5VGVzdElkKCdlbWFpbC1pbnB1dCcpO1xuICAgICAgY29uc3QgcGFzc3dvcmRJbnB1dCA9IHNjcmVlbi5nZXRCeVRlc3RJZCgncGFzc3dvcmQtaW5wdXQnKTtcbiAgICAgIGNvbnN0IHN1Ym1pdEJ1dHRvbiA9IHNjcmVlbi5nZXRCeVRlc3RJZCgnbG9naW4tc3VibWl0Jyk7XG5cbiAgICAgIGF3YWl0IHVzZXJFdmVudC50eXBlKGVtYWlsSW5wdXQsICd3cm9uZ0BleGFtcGxlLmNvbScpO1xuICAgICAgYXdhaXQgdXNlckV2ZW50LnR5cGUocGFzc3dvcmRJbnB1dCwgJ3dyb25ncGFzc3dvcmQnKTtcbiAgICAgIGF3YWl0IHVzZXJFdmVudC5jbGljayhzdWJtaXRCdXR0b24pO1xuXG4gICAgICBhd2FpdCB3YWl0Rm9yKCgpID0+IHtcbiAgICAgICAgZXhwZWN0KHNjcmVlbi5nZXRCeVRlc3RJZCgnZXJyb3ItbWVzc2FnZScpKS50b0hhdmVUZXh0Q29udGVudCgnSW52YWxpZCBjcmVkZW50aWFscycpO1xuICAgICAgfSk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdQcm9wZXJ0eSBNYW5hZ2VtZW50IEZvcm0gU3VibWlzc2lvbnMnLCAoKSA9PiB7XG4gICAgaXQoJ3Nob3VsZCBzdWJtaXQgYnVpbGRpbmcgY3JlYXRpb24gZm9ybSB3aXRoIHZhbGlkIGRhdGEnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBCdWlsZGluZ0Zvcm0gPSAoKSA9PiB7XG4gICAgICAgIGNvbnN0IFtmb3JtRGF0YSwgc2V0Rm9ybURhdGFdID0gUmVhY3QudXNlU3RhdGUoe1xuICAgICAgICAgIG5hbWU6ICcnLFxuICAgICAgICAgIG9yZ2FuaXphdGlvbklkOiAnJyxcbiAgICAgICAgICBhZGRyZXNzOiAnJyxcbiAgICAgICAgICBjaXR5OiAnJyxcbiAgICAgICAgICBwcm92aW5jZTogJ1FDJyxcbiAgICAgICAgICBwb3N0YWxDb2RlOiAnJyxcbiAgICAgICAgICBidWlsZGluZ1R5cGU6ICdjb25kbycsXG4gICAgICAgICAgdG90YWxVbml0czogMFxuICAgICAgICB9KTtcblxuICAgICAgICBjb25zdCBoYW5kbGVTdWJtaXQgPSBhc3luYyAoZTogUmVhY3QuRm9ybUV2ZW50KSA9PiB7XG4gICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgIGF3YWl0IG1vY2tBcGlSZXF1ZXN0KCdQT1NUJywgJy9hcGkvYnVpbGRpbmdzJywgZm9ybURhdGEpO1xuICAgICAgICAgIG1vY2tUb2FzdCh7IHRpdGxlOiAnQnVpbGRpbmcgY3JlYXRlZCBzdWNjZXNzZnVsbHknIH0pO1xuICAgICAgICB9O1xuXG4gICAgICAgIGNvbnN0IGhhbmRsZUNoYW5nZSA9IChmaWVsZDogc3RyaW5nLCB2YWx1ZTogYW55KSA9PiB7XG4gICAgICAgICAgc2V0Rm9ybURhdGEocHJldiA9PiAoeyAuLi5wcmV2LCBbZmllbGRdOiB2YWx1ZSB9KSk7XG4gICAgICAgIH07XG5cbiAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICA8Zm9ybSBvblN1Ym1pdD17aGFuZGxlU3VibWl0fSBkYXRhLXRlc3RpZD1cImJ1aWxkaW5nLWZvcm1cIj5cbiAgICAgICAgICAgIDxpbnB1dFxuICAgICAgICAgICAgICBkYXRhLXRlc3RpZD1cImJ1aWxkaW5nLW5hbWVcIlxuICAgICAgICAgICAgICB2YWx1ZT17Zm9ybURhdGEubmFtZX1cbiAgICAgICAgICAgICAgb25DaGFuZ2U9eyhlKSA9PiBoYW5kbGVDaGFuZ2UoJ25hbWUnLCBlLnRhcmdldC52YWx1ZSl9XG4gICAgICAgICAgICAgIHBsYWNlaG9sZGVyPVwiQnVpbGRpbmcgTmFtZVwiXG4gICAgICAgICAgICAvPlxuICAgICAgICAgICAgPHNlbGVjdFxuICAgICAgICAgICAgICBkYXRhLXRlc3RpZD1cIm9yZ2FuaXphdGlvbi1zZWxlY3RcIlxuICAgICAgICAgICAgICB2YWx1ZT17Zm9ybURhdGEub3JnYW5pemF0aW9uSWR9XG4gICAgICAgICAgICAgIG9uQ2hhbmdlPXsoZSkgPT4gaGFuZGxlQ2hhbmdlKCdvcmdhbml6YXRpb25JZCcsIGUudGFyZ2V0LnZhbHVlKX1cbiAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT1cIlwiPlNlbGVjdCBPcmdhbml6YXRpb248L29wdGlvbj5cbiAgICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT1cIjEyM2U0NTY3LWU4OWItMTJkMy1hNDU2LTQyNjYxNDE3NDAwMVwiPlRlc3QgT3JnPC9vcHRpb24+XG4gICAgICAgICAgICA8L3NlbGVjdD5cbiAgICAgICAgICAgIDxpbnB1dFxuICAgICAgICAgICAgICBkYXRhLXRlc3RpZD1cImJ1aWxkaW5nLWFkZHJlc3NcIlxuICAgICAgICAgICAgICB2YWx1ZT17Zm9ybURhdGEuYWRkcmVzc31cbiAgICAgICAgICAgICAgb25DaGFuZ2U9eyhlKSA9PiBoYW5kbGVDaGFuZ2UoJ2FkZHJlc3MnLCBlLnRhcmdldC52YWx1ZSl9XG4gICAgICAgICAgICAgIHBsYWNlaG9sZGVyPVwiQWRkcmVzc1wiXG4gICAgICAgICAgICAvPlxuICAgICAgICAgICAgPGlucHV0XG4gICAgICAgICAgICAgIGRhdGEtdGVzdGlkPVwiYnVpbGRpbmctY2l0eVwiXG4gICAgICAgICAgICAgIHZhbHVlPXtmb3JtRGF0YS5jaXR5fVxuICAgICAgICAgICAgICBvbkNoYW5nZT17KGUpID0+IGhhbmRsZUNoYW5nZSgnY2l0eScsIGUudGFyZ2V0LnZhbHVlKX1cbiAgICAgICAgICAgICAgcGxhY2Vob2xkZXI9XCJDaXR5XCJcbiAgICAgICAgICAgIC8+XG4gICAgICAgICAgICA8aW5wdXRcbiAgICAgICAgICAgICAgZGF0YS10ZXN0aWQ9XCJidWlsZGluZy1wb3N0YWxjb2RlXCJcbiAgICAgICAgICAgICAgdmFsdWU9e2Zvcm1EYXRhLnBvc3RhbENvZGV9XG4gICAgICAgICAgICAgIG9uQ2hhbmdlPXsoZSkgPT4gaGFuZGxlQ2hhbmdlKCdwb3N0YWxDb2RlJywgZS50YXJnZXQudmFsdWUpfVxuICAgICAgICAgICAgICBwbGFjZWhvbGRlcj1cIlBvc3RhbCBDb2RlXCJcbiAgICAgICAgICAgIC8+XG4gICAgICAgICAgICA8aW5wdXRcbiAgICAgICAgICAgICAgZGF0YS10ZXN0aWQ9XCJidWlsZGluZy11bml0c1wiXG4gICAgICAgICAgICAgIHR5cGU9XCJudW1iZXJcIlxuICAgICAgICAgICAgICB2YWx1ZT17Zm9ybURhdGEudG90YWxVbml0c31cbiAgICAgICAgICAgICAgb25DaGFuZ2U9eyhlKSA9PiBoYW5kbGVDaGFuZ2UoJ3RvdGFsVW5pdHMnLCBwYXJzZUludChlLnRhcmdldC52YWx1ZSkgfHwgMCl9XG4gICAgICAgICAgICAgIHBsYWNlaG9sZGVyPVwiVG90YWwgVW5pdHNcIlxuICAgICAgICAgICAgLz5cbiAgICAgICAgICAgIDxidXR0b24gZGF0YS10ZXN0aWQ9XCJidWlsZGluZy1zdWJtaXRcIiB0eXBlPVwic3VibWl0XCI+XG4gICAgICAgICAgICAgIENyZWF0ZSBCdWlsZGluZ1xuICAgICAgICAgICAgPC9idXR0b24+XG4gICAgICAgICAgPC9mb3JtPlxuICAgICAgICApO1xuICAgICAgfTtcblxuICAgICAgcmVuZGVyKDxCdWlsZGluZ0Zvcm0gLz4sIHsgd3JhcHBlcjogVGVzdFdyYXBwZXIgfSk7XG5cbiAgICAgIC8vIEZpbGwgb3V0IHRoZSBmb3JtXG4gICAgICBhd2FpdCB1c2VyRXZlbnQudHlwZShzY3JlZW4uZ2V0QnlUZXN0SWQoJ2J1aWxkaW5nLW5hbWUnKSwgJ1N1bnNldCBUb3dlcnMnKTtcbiAgICAgIGF3YWl0IHVzZXJFdmVudC5zZWxlY3RPcHRpb25zKHNjcmVlbi5nZXRCeVRlc3RJZCgnb3JnYW5pemF0aW9uLXNlbGVjdCcpLCAnMTIzZTQ1NjctZTg5Yi0xMmQzLWE0NTYtNDI2NjE0MTc0MDAxJyk7XG4gICAgICBhd2FpdCB1c2VyRXZlbnQudHlwZShzY3JlZW4uZ2V0QnlUZXN0SWQoJ2J1aWxkaW5nLWFkZHJlc3MnKSwgJzQ1NiBNYWluIFN0cmVldCcpO1xuICAgICAgYXdhaXQgdXNlckV2ZW50LnR5cGUoc2NyZWVuLmdldEJ5VGVzdElkKCdidWlsZGluZy1jaXR5JyksICdNb250cmVhbCcpO1xuICAgICAgYXdhaXQgdXNlckV2ZW50LnR5cGUoc2NyZWVuLmdldEJ5VGVzdElkKCdidWlsZGluZy1wb3N0YWxjb2RlJyksICdIM0EgMUIxJyk7XG4gICAgICBhd2FpdCB1c2VyRXZlbnQuY2xlYXIoc2NyZWVuLmdldEJ5VGVzdElkKCdidWlsZGluZy11bml0cycpKTtcbiAgICAgIGF3YWl0IHVzZXJFdmVudC50eXBlKHNjcmVlbi5nZXRCeVRlc3RJZCgnYnVpbGRpbmctdW5pdHMnKSwgJzUwJyk7XG5cbiAgICAgIGF3YWl0IHVzZXJFdmVudC5jbGljayhzY3JlZW4uZ2V0QnlUZXN0SWQoJ2J1aWxkaW5nLXN1Ym1pdCcpKTtcblxuICAgICAgYXdhaXQgd2FpdEZvcigoKSA9PiB7XG4gICAgICAgIGV4cGVjdChtb2NrQXBpUmVxdWVzdCkudG9IYXZlQmVlbkNhbGxlZFdpdGgoJ1BPU1QnLCAnL2FwaS9idWlsZGluZ3MnLCB7XG4gICAgICAgICAgbmFtZTogJ1N1bnNldCBUb3dlcnMnLFxuICAgICAgICAgIG9yZ2FuaXphdGlvbklkOiAnMTIzZTQ1NjctZTg5Yi0xMmQzLWE0NTYtNDI2NjE0MTc0MDAxJyxcbiAgICAgICAgICBhZGRyZXNzOiAnNDU2IE1haW4gU3RyZWV0JyxcbiAgICAgICAgICBjaXR5OiAnTW9udHJlYWwnLFxuICAgICAgICAgIHByb3ZpbmNlOiAnUUMnLFxuICAgICAgICAgIHBvc3RhbENvZGU6ICdIM0EgMUIxJyxcbiAgICAgICAgICBidWlsZGluZ1R5cGU6ICdjb25kbycsXG4gICAgICAgICAgdG90YWxVbml0czogNTBcbiAgICAgICAgfSk7XG4gICAgICB9KTtcblxuICAgICAgZXhwZWN0KG1vY2tUb2FzdCkudG9IYXZlQmVlbkNhbGxlZFdpdGgoeyB0aXRsZTogJ0J1aWxkaW5nIGNyZWF0ZWQgc3VjY2Vzc2Z1bGx5JyB9KTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ0ZpbmFuY2lhbCBGb3JtIFN1Ym1pc3Npb25zJywgKCkgPT4ge1xuICAgIGl0KCdzaG91bGQgc3VibWl0IGJpbGwgY3JlYXRpb24gZm9ybSB3aXRoIHByb3BlciBhbW91bnQgdmFsaWRhdGlvbicsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IEJpbGxGb3JtID0gKCkgPT4ge1xuICAgICAgICBjb25zdCBbZm9ybURhdGEsIHNldEZvcm1EYXRhXSA9IFJlYWN0LnVzZVN0YXRlKHtcbiAgICAgICAgICB0aXRsZTogJycsXG4gICAgICAgICAgY2F0ZWdvcnk6ICd1dGlsaXRpZXMnLFxuICAgICAgICAgIHBheW1lbnRUeXBlOiAndW5pcXVlJyxcbiAgICAgICAgICB0b3RhbEFtb3VudDogJycsXG4gICAgICAgICAgc3RhcnREYXRlOiAnJyxcbiAgICAgICAgICBzdGF0dXM6ICdkcmFmdCdcbiAgICAgICAgfSk7XG5cbiAgICAgICAgY29uc3QgaGFuZGxlU3VibWl0ID0gYXN5bmMgKGU6IFJlYWN0LkZvcm1FdmVudCkgPT4ge1xuICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICBcbiAgICAgICAgICAvLyBWYWxpZGF0ZSBhbW91bnRcbiAgICAgICAgICBjb25zdCBhbW91bnQgPSBwYXJzZUZsb2F0KGZvcm1EYXRhLnRvdGFsQW1vdW50KTtcbiAgICAgICAgICBpZiAoaXNOYU4oYW1vdW50KSB8fCBhbW91bnQgPD0gMCkge1xuICAgICAgICAgICAgbW9ja1RvYXN0KHsgdGl0bGU6ICdJbnZhbGlkIGFtb3VudCcsIHZhcmlhbnQ6ICdkZXN0cnVjdGl2ZScgfSk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgYXdhaXQgbW9ja0FwaVJlcXVlc3QoJ1BPU1QnLCAnL2FwaS9iaWxscycsIGZvcm1EYXRhKTtcbiAgICAgICAgICBtb2NrVG9hc3QoeyB0aXRsZTogJ0JpbGwgY3JlYXRlZCBzdWNjZXNzZnVsbHknIH0pO1xuICAgICAgICB9O1xuXG4gICAgICAgIGNvbnN0IGhhbmRsZUNoYW5nZSA9IChmaWVsZDogc3RyaW5nLCB2YWx1ZTogYW55KSA9PiB7XG4gICAgICAgICAgc2V0Rm9ybURhdGEocHJldiA9PiAoeyAuLi5wcmV2LCBbZmllbGRdOiB2YWx1ZSB9KSk7XG4gICAgICAgIH07XG5cbiAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICA8Zm9ybSBvblN1Ym1pdD17aGFuZGxlU3VibWl0fSBkYXRhLXRlc3RpZD1cImJpbGwtZm9ybVwiPlxuICAgICAgICAgICAgPGlucHV0XG4gICAgICAgICAgICAgIGRhdGEtdGVzdGlkPVwiYmlsbC10aXRsZVwiXG4gICAgICAgICAgICAgIHZhbHVlPXtmb3JtRGF0YS50aXRsZX1cbiAgICAgICAgICAgICAgb25DaGFuZ2U9eyhlKSA9PiBoYW5kbGVDaGFuZ2UoJ3RpdGxlJywgZS50YXJnZXQudmFsdWUpfVxuICAgICAgICAgICAgICBwbGFjZWhvbGRlcj1cIkJpbGwgVGl0bGVcIlxuICAgICAgICAgICAgLz5cbiAgICAgICAgICAgIDxpbnB1dFxuICAgICAgICAgICAgICBkYXRhLXRlc3RpZD1cImJpbGwtYW1vdW50XCJcbiAgICAgICAgICAgICAgdmFsdWU9e2Zvcm1EYXRhLnRvdGFsQW1vdW50fVxuICAgICAgICAgICAgICBvbkNoYW5nZT17KGUpID0+IGhhbmRsZUNoYW5nZSgndG90YWxBbW91bnQnLCBlLnRhcmdldC52YWx1ZSl9XG4gICAgICAgICAgICAgIHBsYWNlaG9sZGVyPVwiQW1vdW50XCJcbiAgICAgICAgICAgIC8+XG4gICAgICAgICAgICA8aW5wdXRcbiAgICAgICAgICAgICAgZGF0YS10ZXN0aWQ9XCJiaWxsLWRhdGVcIlxuICAgICAgICAgICAgICB0eXBlPVwiZGF0ZVwiXG4gICAgICAgICAgICAgIHZhbHVlPXtmb3JtRGF0YS5zdGFydERhdGV9XG4gICAgICAgICAgICAgIG9uQ2hhbmdlPXsoZSkgPT4gaGFuZGxlQ2hhbmdlKCdzdGFydERhdGUnLCBlLnRhcmdldC52YWx1ZSl9XG4gICAgICAgICAgICAvPlxuICAgICAgICAgICAgPGJ1dHRvbiBkYXRhLXRlc3RpZD1cImJpbGwtc3VibWl0XCIgdHlwZT1cInN1Ym1pdFwiPlxuICAgICAgICAgICAgICBDcmVhdGUgQmlsbFxuICAgICAgICAgICAgPC9idXR0b24+XG4gICAgICAgICAgPC9mb3JtPlxuICAgICAgICApO1xuICAgICAgfTtcblxuICAgICAgcmVuZGVyKDxCaWxsRm9ybSAvPiwgeyB3cmFwcGVyOiBUZXN0V3JhcHBlciB9KTtcblxuICAgICAgLy8gVGVzdCB2YWxpZCBzdWJtaXNzaW9uXG4gICAgICBhd2FpdCB1c2VyRXZlbnQudHlwZShzY3JlZW4uZ2V0QnlUZXN0SWQoJ2JpbGwtdGl0bGUnKSwgJ01vbnRobHkgRWxlY3RyaWNpdHknKTtcbiAgICAgIGF3YWl0IHVzZXJFdmVudC50eXBlKHNjcmVlbi5nZXRCeVRlc3RJZCgnYmlsbC1hbW91bnQnKSwgJzE1MC43NScpO1xuICAgICAgYXdhaXQgdXNlckV2ZW50LnR5cGUoc2NyZWVuLmdldEJ5VGVzdElkKCdiaWxsLWRhdGUnKSwgJzIwMjUtMDEtMDEnKTtcblxuICAgICAgYXdhaXQgdXNlckV2ZW50LmNsaWNrKHNjcmVlbi5nZXRCeVRlc3RJZCgnYmlsbC1zdWJtaXQnKSk7XG5cbiAgICAgIGF3YWl0IHdhaXRGb3IoKCkgPT4ge1xuICAgICAgICBleHBlY3QobW9ja0FwaVJlcXVlc3QpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKCdQT1NUJywgJy9hcGkvYmlsbHMnLCB7XG4gICAgICAgICAgdGl0bGU6ICdNb250aGx5IEVsZWN0cmljaXR5JyxcbiAgICAgICAgICBjYXRlZ29yeTogJ3V0aWxpdGllcycsXG4gICAgICAgICAgcGF5bWVudFR5cGU6ICd1bmlxdWUnLFxuICAgICAgICAgIHRvdGFsQW1vdW50OiAnMTUwLjc1JyxcbiAgICAgICAgICBzdGFydERhdGU6ICcyMDI1LTAxLTAxJyxcbiAgICAgICAgICBzdGF0dXM6ICdkcmFmdCdcbiAgICAgICAgfSk7XG4gICAgICB9KTtcblxuICAgICAgZXhwZWN0KG1vY2tUb2FzdCkudG9IYXZlQmVlbkNhbGxlZFdpdGgoeyB0aXRsZTogJ0JpbGwgY3JlYXRlZCBzdWNjZXNzZnVsbHknIH0pO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBoYW5kbGUgaW52YWxpZCBiaWxsIGFtb3VudCBzdWJtaXNzaW9uJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgQmlsbEZvcm0gPSAoKSA9PiB7XG4gICAgICAgIGNvbnN0IFtmb3JtRGF0YSwgc2V0Rm9ybURhdGFdID0gUmVhY3QudXNlU3RhdGUoe1xuICAgICAgICAgIHRpdGxlOiAnVGVzdCBCaWxsJyxcbiAgICAgICAgICB0b3RhbEFtb3VudDogJydcbiAgICAgICAgfSk7XG5cbiAgICAgICAgY29uc3QgaGFuZGxlU3VibWl0ID0gYXN5bmMgKGU6IFJlYWN0LkZvcm1FdmVudCkgPT4ge1xuICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICBcbiAgICAgICAgICBjb25zdCBhbW91bnQgPSBwYXJzZUZsb2F0KGZvcm1EYXRhLnRvdGFsQW1vdW50KTtcbiAgICAgICAgICBpZiAoaXNOYU4oYW1vdW50KSB8fCBhbW91bnQgPD0gMCkge1xuICAgICAgICAgICAgbW9ja1RvYXN0KHsgdGl0bGU6ICdJbnZhbGlkIGFtb3VudCcsIHZhcmlhbnQ6ICdkZXN0cnVjdGl2ZScgfSk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgYXdhaXQgbW9ja0FwaVJlcXVlc3QoJ1BPU1QnLCAnL2FwaS9iaWxscycsIGZvcm1EYXRhKTtcbiAgICAgICAgfTtcblxuICAgICAgICByZXR1cm4gKFxuICAgICAgICAgIDxmb3JtIG9uU3VibWl0PXtoYW5kbGVTdWJtaXR9IGRhdGEtdGVzdGlkPVwiYmlsbC1mb3JtXCI+XG4gICAgICAgICAgICA8aW5wdXRcbiAgICAgICAgICAgICAgZGF0YS10ZXN0aWQ9XCJiaWxsLWFtb3VudFwiXG4gICAgICAgICAgICAgIHZhbHVlPXtmb3JtRGF0YS50b3RhbEFtb3VudH1cbiAgICAgICAgICAgICAgb25DaGFuZ2U9eyhlKSA9PiBzZXRGb3JtRGF0YShwcmV2ID0+ICh7IC4uLnByZXYsIHRvdGFsQW1vdW50OiBlLnRhcmdldC52YWx1ZSB9KSl9XG4gICAgICAgICAgICAgIHBsYWNlaG9sZGVyPVwiQW1vdW50XCJcbiAgICAgICAgICAgIC8+XG4gICAgICAgICAgICA8YnV0dG9uIGRhdGEtdGVzdGlkPVwiYmlsbC1zdWJtaXRcIiB0eXBlPVwic3VibWl0XCI+XG4gICAgICAgICAgICAgIENyZWF0ZSBCaWxsXG4gICAgICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgICA8L2Zvcm0+XG4gICAgICAgICk7XG4gICAgICB9O1xuXG4gICAgICByZW5kZXIoPEJpbGxGb3JtIC8+LCB7IHdyYXBwZXI6IFRlc3RXcmFwcGVyIH0pO1xuXG4gICAgICAvLyBUZXN0IGludmFsaWQgYW1vdW50XG4gICAgICBhd2FpdCB1c2VyRXZlbnQudHlwZShzY3JlZW4uZ2V0QnlUZXN0SWQoJ2JpbGwtYW1vdW50JyksICctNTAnKTtcbiAgICAgIGF3YWl0IHVzZXJFdmVudC5jbGljayhzY3JlZW4uZ2V0QnlUZXN0SWQoJ2JpbGwtc3VibWl0JykpO1xuXG4gICAgICBhd2FpdCB3YWl0Rm9yKCgpID0+IHtcbiAgICAgICAgZXhwZWN0KG1vY2tUb2FzdCkudG9IYXZlQmVlbkNhbGxlZFdpdGgoeyBcbiAgICAgICAgICB0aXRsZTogJ0ludmFsaWQgYW1vdW50JywgXG4gICAgICAgICAgdmFyaWFudDogJ2Rlc3RydWN0aXZlJyBcbiAgICAgICAgfSk7XG4gICAgICB9KTtcblxuICAgICAgZXhwZWN0KG1vY2tBcGlSZXF1ZXN0KS5ub3QudG9IYXZlQmVlbkNhbGxlZCgpO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnTWFpbnRlbmFuY2UgRm9ybSBTdWJtaXNzaW9ucycsICgpID0+IHtcbiAgICBpdCgnc2hvdWxkIHN1Ym1pdCBkZW1hbmQgY3JlYXRpb24gZm9ybSB3aXRoIFVVSUQgaGFuZGxpbmcnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBEZW1hbmRGb3JtID0gKCkgPT4ge1xuICAgICAgICBjb25zdCBbZm9ybURhdGEsIHNldEZvcm1EYXRhXSA9IFJlYWN0LnVzZVN0YXRlKHtcbiAgICAgICAgICB0eXBlOiAnbWFpbnRlbmFuY2UnLFxuICAgICAgICAgIGRlc2NyaXB0aW9uOiAnJyxcbiAgICAgICAgICBidWlsZGluZ0lkOiAnJyxcbiAgICAgICAgICByZXNpZGVuY2VJZDogJydcbiAgICAgICAgfSk7XG5cbiAgICAgICAgY29uc3QgaGFuZGxlU3VibWl0ID0gYXN5bmMgKGU6IFJlYWN0LkZvcm1FdmVudCkgPT4ge1xuICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICBcbiAgICAgICAgICAvLyBDb252ZXJ0IGVtcHR5IHN0cmluZ3MgdG8gdW5kZWZpbmVkIGZvciBvcHRpb25hbCBVVUlEIGZpZWxkc1xuICAgICAgICAgIGNvbnN0IHN1Ym1pc3Npb25EYXRhID0ge1xuICAgICAgICAgICAgLi4uZm9ybURhdGEsXG4gICAgICAgICAgICBidWlsZGluZ0lkOiBmb3JtRGF0YS5idWlsZGluZ0lkIHx8IHVuZGVmaW5lZCxcbiAgICAgICAgICAgIHJlc2lkZW5jZUlkOiBmb3JtRGF0YS5yZXNpZGVuY2VJZCB8fCB1bmRlZmluZWRcbiAgICAgICAgICB9O1xuXG4gICAgICAgICAgYXdhaXQgbW9ja0FwaVJlcXVlc3QoJ1BPU1QnLCAnL2FwaS9kZW1hbmRzJywgc3VibWlzc2lvbkRhdGEpO1xuICAgICAgICAgIG1vY2tUb2FzdCh7IHRpdGxlOiAnRGVtYW5kIGNyZWF0ZWQgc3VjY2Vzc2Z1bGx5JyB9KTtcbiAgICAgICAgfTtcblxuICAgICAgICBjb25zdCBoYW5kbGVDaGFuZ2UgPSAoZmllbGQ6IHN0cmluZywgdmFsdWU6IGFueSkgPT4ge1xuICAgICAgICAgIHNldEZvcm1EYXRhKHByZXYgPT4gKHsgLi4ucHJldiwgW2ZpZWxkXTogdmFsdWUgfSkpO1xuICAgICAgICB9O1xuXG4gICAgICAgIHJldHVybiAoXG4gICAgICAgICAgPGZvcm0gb25TdWJtaXQ9e2hhbmRsZVN1Ym1pdH0gZGF0YS10ZXN0aWQ9XCJkZW1hbmQtZm9ybVwiPlxuICAgICAgICAgICAgPHNlbGVjdFxuICAgICAgICAgICAgICBkYXRhLXRlc3RpZD1cImRlbWFuZC10eXBlXCJcbiAgICAgICAgICAgICAgdmFsdWU9e2Zvcm1EYXRhLnR5cGV9XG4gICAgICAgICAgICAgIG9uQ2hhbmdlPXsoZSkgPT4gaGFuZGxlQ2hhbmdlKCd0eXBlJywgZS50YXJnZXQudmFsdWUpfVxuICAgICAgICAgICAgPlxuICAgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPVwibWFpbnRlbmFuY2VcIj5NYWludGVuYW5jZTwvb3B0aW9uPlxuICAgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPVwiY29tcGxhaW50XCI+Q29tcGxhaW50PC9vcHRpb24+XG4gICAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9XCJpbmZvcm1hdGlvblwiPkluZm9ybWF0aW9uPC9vcHRpb24+XG4gICAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9XCJvdGhlclwiPk90aGVyPC9vcHRpb24+XG4gICAgICAgICAgICA8L3NlbGVjdD5cbiAgICAgICAgICAgIDx0ZXh0YXJlYVxuICAgICAgICAgICAgICBkYXRhLXRlc3RpZD1cImRlbWFuZC1kZXNjcmlwdGlvblwiXG4gICAgICAgICAgICAgIHZhbHVlPXtmb3JtRGF0YS5kZXNjcmlwdGlvbn1cbiAgICAgICAgICAgICAgb25DaGFuZ2U9eyhlKSA9PiBoYW5kbGVDaGFuZ2UoJ2Rlc2NyaXB0aW9uJywgZS50YXJnZXQudmFsdWUpfVxuICAgICAgICAgICAgICBwbGFjZWhvbGRlcj1cIkRlc2NyaXB0aW9uXCJcbiAgICAgICAgICAgIC8+XG4gICAgICAgICAgICA8c2VsZWN0XG4gICAgICAgICAgICAgIGRhdGEtdGVzdGlkPVwiZGVtYW5kLWJ1aWxkaW5nXCJcbiAgICAgICAgICAgICAgdmFsdWU9e2Zvcm1EYXRhLmJ1aWxkaW5nSWR9XG4gICAgICAgICAgICAgIG9uQ2hhbmdlPXsoZSkgPT4gaGFuZGxlQ2hhbmdlKCdidWlsZGluZ0lkJywgZS50YXJnZXQudmFsdWUpfVxuICAgICAgICAgICAgPlxuICAgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPVwiXCI+U2VsZWN0IEJ1aWxkaW5nIChPcHRpb25hbCk8L29wdGlvbj5cbiAgICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT1cIjEyM2U0NTY3LWU4OWItMTJkMy1hNDU2LTQyNjYxNDE3NDAwMFwiPkJ1aWxkaW5nIEE8L29wdGlvbj5cbiAgICAgICAgICAgIDwvc2VsZWN0PlxuICAgICAgICAgICAgPGJ1dHRvbiBkYXRhLXRlc3RpZD1cImRlbWFuZC1zdWJtaXRcIiB0eXBlPVwic3VibWl0XCI+XG4gICAgICAgICAgICAgIFN1Ym1pdCBEZW1hbmRcbiAgICAgICAgICAgIDwvYnV0dG9uPlxuICAgICAgICAgIDwvZm9ybT5cbiAgICAgICAgKTtcbiAgICAgIH07XG5cbiAgICAgIHJlbmRlcig8RGVtYW5kRm9ybSAvPiwgeyB3cmFwcGVyOiBUZXN0V3JhcHBlciB9KTtcblxuICAgICAgLy8gRmlsbCBvdXQgZm9ybSB3aXRoIG9wdGlvbmFsIGJ1aWxkaW5nIElEXG4gICAgICBhd2FpdCB1c2VyRXZlbnQuc2VsZWN0T3B0aW9ucyhzY3JlZW4uZ2V0QnlUZXN0SWQoJ2RlbWFuZC10eXBlJyksICdtYWludGVuYW5jZScpO1xuICAgICAgYXdhaXQgdXNlckV2ZW50LnR5cGUoc2NyZWVuLmdldEJ5VGVzdElkKCdkZW1hbmQtZGVzY3JpcHRpb24nKSwgJ1RoZSBoZWF0aW5nIHN5c3RlbSBuZWVkcyByZXBhaXIgdXJnZW50bHkuJyk7XG4gICAgICBhd2FpdCB1c2VyRXZlbnQuc2VsZWN0T3B0aW9ucyhzY3JlZW4uZ2V0QnlUZXN0SWQoJ2RlbWFuZC1idWlsZGluZycpLCAnMTIzZTQ1NjctZTg5Yi0xMmQzLWE0NTYtNDI2NjE0MTc0MDAwJyk7XG5cbiAgICAgIGF3YWl0IHVzZXJFdmVudC5jbGljayhzY3JlZW4uZ2V0QnlUZXN0SWQoJ2RlbWFuZC1zdWJtaXQnKSk7XG5cbiAgICAgIGF3YWl0IHdhaXRGb3IoKCkgPT4ge1xuICAgICAgICBleHBlY3QobW9ja0FwaVJlcXVlc3QpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKCdQT1NUJywgJy9hcGkvZGVtYW5kcycsIHtcbiAgICAgICAgICB0eXBlOiAnbWFpbnRlbmFuY2UnLFxuICAgICAgICAgIGRlc2NyaXB0aW9uOiAnVGhlIGhlYXRpbmcgc3lzdGVtIG5lZWRzIHJlcGFpciB1cmdlbnRseS4nLFxuICAgICAgICAgIGJ1aWxkaW5nSWQ6ICcxMjNlNDU2Ny1lODliLTEyZDMtYTQ1Ni00MjY2MTQxNzQwMDAnLFxuICAgICAgICAgIHJlc2lkZW5jZUlkOiB1bmRlZmluZWRcbiAgICAgICAgfSk7XG4gICAgICB9KTtcblxuICAgICAgZXhwZWN0KG1vY2tUb2FzdCkudG9IYXZlQmVlbkNhbGxlZFdpdGgoeyB0aXRsZTogJ0RlbWFuZCBjcmVhdGVkIHN1Y2Nlc3NmdWxseScgfSk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIHN1Ym1pdCBkZW1hbmQgd2l0aG91dCBvcHRpb25hbCBVVUlEIGZpZWxkcycsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IERlbWFuZEZvcm0gPSAoKSA9PiB7XG4gICAgICAgIGNvbnN0IFtmb3JtRGF0YSwgc2V0Rm9ybURhdGFdID0gUmVhY3QudXNlU3RhdGUoe1xuICAgICAgICAgIHR5cGU6ICdpbmZvcm1hdGlvbicsXG4gICAgICAgICAgZGVzY3JpcHRpb246ICdHZW5lcmFsIGlucXVpcnkgYWJvdXQgYnVpbGRpbmcgcG9saWNpZXMuJ1xuICAgICAgICB9KTtcblxuICAgICAgICBjb25zdCBoYW5kbGVTdWJtaXQgPSBhc3luYyAoZTogUmVhY3QuRm9ybUV2ZW50KSA9PiB7XG4gICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgIGF3YWl0IG1vY2tBcGlSZXF1ZXN0KCdQT1NUJywgJy9hcGkvZGVtYW5kcycsIGZvcm1EYXRhKTtcbiAgICAgICAgfTtcblxuICAgICAgICByZXR1cm4gKFxuICAgICAgICAgIDxmb3JtIG9uU3VibWl0PXtoYW5kbGVTdWJtaXR9IGRhdGEtdGVzdGlkPVwiZGVtYW5kLWZvcm1cIj5cbiAgICAgICAgICAgIDx0ZXh0YXJlYVxuICAgICAgICAgICAgICBkYXRhLXRlc3RpZD1cImRlbWFuZC1kZXNjcmlwdGlvblwiXG4gICAgICAgICAgICAgIHZhbHVlPXtmb3JtRGF0YS5kZXNjcmlwdGlvbn1cbiAgICAgICAgICAgICAgcmVhZE9ubHlcbiAgICAgICAgICAgIC8+XG4gICAgICAgICAgICA8YnV0dG9uIGRhdGEtdGVzdGlkPVwiZGVtYW5kLXN1Ym1pdFwiIHR5cGU9XCJzdWJtaXRcIj5cbiAgICAgICAgICAgICAgU3VibWl0XG4gICAgICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgICA8L2Zvcm0+XG4gICAgICAgICk7XG4gICAgICB9O1xuXG4gICAgICByZW5kZXIoPERlbWFuZEZvcm0gLz4sIHsgd3JhcHBlcjogVGVzdFdyYXBwZXIgfSk7XG5cbiAgICAgIGF3YWl0IHVzZXJFdmVudC5jbGljayhzY3JlZW4uZ2V0QnlUZXN0SWQoJ2RlbWFuZC1zdWJtaXQnKSk7XG5cbiAgICAgIGF3YWl0IHdhaXRGb3IoKCkgPT4ge1xuICAgICAgICBleHBlY3QobW9ja0FwaVJlcXVlc3QpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKCdQT1NUJywgJy9hcGkvZGVtYW5kcycsIHtcbiAgICAgICAgICB0eXBlOiAnaW5mb3JtYXRpb24nLFxuICAgICAgICAgIGRlc2NyaXB0aW9uOiAnR2VuZXJhbCBpbnF1aXJ5IGFib3V0IGJ1aWxkaW5nIHBvbGljaWVzLidcbiAgICAgICAgfSk7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ0RvY3VtZW50IE1hbmFnZW1lbnQgRm9ybSBTdWJtaXNzaW9ucycsICgpID0+IHtcbiAgICBpdCgnc2hvdWxkIHN1Ym1pdCBkb2N1bWVudCB1cGxvYWQgZm9ybSB3aXRoIGZpbGUgaGFuZGxpbmcnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBEb2N1bWVudEZvcm0gPSAoKSA9PiB7XG4gICAgICAgIGNvbnN0IFtmb3JtRGF0YSwgc2V0Rm9ybURhdGFdID0gUmVhY3QudXNlU3RhdGUoe1xuICAgICAgICAgIG5hbWU6ICcnLFxuICAgICAgICAgIHR5cGU6ICdmaW5hbmNpYWwnLFxuICAgICAgICAgIGRhdGVSZWZlcmVuY2U6ICcnLFxuICAgICAgICAgIGlzVmlzaWJsZVRvVGVuYW50czogdHJ1ZVxuICAgICAgICB9KTtcbiAgICAgICAgY29uc3QgW2ZpbGUsIHNldEZpbGVdID0gUmVhY3QudXNlU3RhdGU8RmlsZSB8IG51bGw+KG51bGwpO1xuXG4gICAgICAgIGNvbnN0IGhhbmRsZVN1Ym1pdCA9IGFzeW5jIChlOiBSZWFjdC5Gb3JtRXZlbnQpID0+IHtcbiAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgXG4gICAgICAgICAgaWYgKCFmaWxlKSB7XG4gICAgICAgICAgICBtb2NrVG9hc3QoeyB0aXRsZTogJ1BsZWFzZSBzZWxlY3QgYSBmaWxlJywgdmFyaWFudDogJ2Rlc3RydWN0aXZlJyB9KTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBjb25zdCBmb3JtRGF0YVdpdGhGaWxlID0gbmV3IEZvcm1EYXRhKCk7XG4gICAgICAgICAgT2JqZWN0LmVudHJpZXMoZm9ybURhdGEpLmZvckVhY2goKFtrZXksIHZhbHVlXSkgPT4ge1xuICAgICAgICAgICAgZm9ybURhdGFXaXRoRmlsZS5hcHBlbmQoa2V5LCB2YWx1ZS50b1N0cmluZygpKTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgICBmb3JtRGF0YVdpdGhGaWxlLmFwcGVuZCgnZmlsZScsIGZpbGUpO1xuXG4gICAgICAgICAgYXdhaXQgbW9ja0FwaVJlcXVlc3QoJ1BPU1QnLCAnL2FwaS9kb2N1bWVudHMnLCBmb3JtRGF0YVdpdGhGaWxlKTtcbiAgICAgICAgICBtb2NrVG9hc3QoeyB0aXRsZTogJ0RvY3VtZW50IHVwbG9hZGVkIHN1Y2Nlc3NmdWxseScgfSk7XG4gICAgICAgIH07XG5cbiAgICAgICAgY29uc3QgaGFuZGxlRmlsZUNoYW5nZSA9IChlOiBSZWFjdC5DaGFuZ2VFdmVudDxIVE1MSW5wdXRFbGVtZW50PikgPT4ge1xuICAgICAgICAgIGNvbnN0IHNlbGVjdGVkRmlsZSA9IGUudGFyZ2V0LmZpbGVzPy5bMF0gfHwgbnVsbDtcbiAgICAgICAgICBzZXRGaWxlKHNlbGVjdGVkRmlsZSk7XG4gICAgICAgIH07XG5cbiAgICAgICAgY29uc3QgaGFuZGxlQ2hhbmdlID0gKGZpZWxkOiBzdHJpbmcsIHZhbHVlOiBhbnkpID0+IHtcbiAgICAgICAgICBzZXRGb3JtRGF0YShwcmV2ID0+ICh7IC4uLnByZXYsIFtmaWVsZF06IHZhbHVlIH0pKTtcbiAgICAgICAgfTtcblxuICAgICAgICByZXR1cm4gKFxuICAgICAgICAgIDxmb3JtIG9uU3VibWl0PXtoYW5kbGVTdWJtaXR9IGRhdGEtdGVzdGlkPVwiZG9jdW1lbnQtZm9ybVwiPlxuICAgICAgICAgICAgPGlucHV0XG4gICAgICAgICAgICAgIGRhdGEtdGVzdGlkPVwiZG9jdW1lbnQtbmFtZVwiXG4gICAgICAgICAgICAgIHZhbHVlPXtmb3JtRGF0YS5uYW1lfVxuICAgICAgICAgICAgICBvbkNoYW5nZT17KGUpID0+IGhhbmRsZUNoYW5nZSgnbmFtZScsIGUudGFyZ2V0LnZhbHVlKX1cbiAgICAgICAgICAgICAgcGxhY2Vob2xkZXI9XCJEb2N1bWVudCBOYW1lXCJcbiAgICAgICAgICAgIC8+XG4gICAgICAgICAgICA8aW5wdXRcbiAgICAgICAgICAgICAgZGF0YS10ZXN0aWQ9XCJkb2N1bWVudC1kYXRlXCJcbiAgICAgICAgICAgICAgdHlwZT1cImRhdGVcIlxuICAgICAgICAgICAgICB2YWx1ZT17Zm9ybURhdGEuZGF0ZVJlZmVyZW5jZX1cbiAgICAgICAgICAgICAgb25DaGFuZ2U9eyhlKSA9PiBoYW5kbGVDaGFuZ2UoJ2RhdGVSZWZlcmVuY2UnLCBlLnRhcmdldC52YWx1ZSl9XG4gICAgICAgICAgICAvPlxuICAgICAgICAgICAgPGlucHV0XG4gICAgICAgICAgICAgIGRhdGEtdGVzdGlkPVwiZG9jdW1lbnQtZmlsZVwiXG4gICAgICAgICAgICAgIHR5cGU9XCJmaWxlXCJcbiAgICAgICAgICAgICAgb25DaGFuZ2U9e2hhbmRsZUZpbGVDaGFuZ2V9XG4gICAgICAgICAgICAgIGFjY2VwdD1cIi5wZGYsLmRvYywuZG9jeCwuanBnLC5wbmdcIlxuICAgICAgICAgICAgLz5cbiAgICAgICAgICAgIDxidXR0b24gZGF0YS10ZXN0aWQ9XCJkb2N1bWVudC1zdWJtaXRcIiB0eXBlPVwic3VibWl0XCI+XG4gICAgICAgICAgICAgIFVwbG9hZCBEb2N1bWVudFxuICAgICAgICAgICAgPC9idXR0b24+XG4gICAgICAgICAgPC9mb3JtPlxuICAgICAgICApO1xuICAgICAgfTtcblxuICAgICAgcmVuZGVyKDxEb2N1bWVudEZvcm0gLz4sIHsgd3JhcHBlcjogVGVzdFdyYXBwZXIgfSk7XG5cbiAgICAgIGNvbnN0IGZpbGUgPSBuZXcgRmlsZShbJ2R1bW15IGNvbnRlbnQnXSwgJ3Rlc3QtZG9jdW1lbnQucGRmJywgeyB0eXBlOiAnYXBwbGljYXRpb24vcGRmJyB9KTtcblxuICAgICAgYXdhaXQgdXNlckV2ZW50LnR5cGUoc2NyZWVuLmdldEJ5VGVzdElkKCdkb2N1bWVudC1uYW1lJyksICdBbm51YWwgRmluYW5jaWFsIFJlcG9ydCcpO1xuICAgICAgYXdhaXQgdXNlckV2ZW50LnR5cGUoc2NyZWVuLmdldEJ5VGVzdElkKCdkb2N1bWVudC1kYXRlJyksICcyMDI0LTEyLTMxJyk7XG4gICAgICBhd2FpdCB1c2VyRXZlbnQudXBsb2FkKHNjcmVlbi5nZXRCeVRlc3RJZCgnZG9jdW1lbnQtZmlsZScpLCBmaWxlKTtcblxuICAgICAgYXdhaXQgdXNlckV2ZW50LmNsaWNrKHNjcmVlbi5nZXRCeVRlc3RJZCgnZG9jdW1lbnQtc3VibWl0JykpO1xuXG4gICAgICBhd2FpdCB3YWl0Rm9yKCgpID0+IHtcbiAgICAgICAgZXhwZWN0KG1vY2tBcGlSZXF1ZXN0KS50b0hhdmVCZWVuQ2FsbGVkV2l0aCgnUE9TVCcsICcvYXBpL2RvY3VtZW50cycsIGV4cGVjdC5hbnkoRm9ybURhdGEpKTtcbiAgICAgIH0pO1xuXG4gICAgICBleHBlY3QobW9ja1RvYXN0KS50b0hhdmVCZWVuQ2FsbGVkV2l0aCh7IHRpdGxlOiAnRG9jdW1lbnQgdXBsb2FkZWQgc3VjY2Vzc2Z1bGx5JyB9KTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ0VkZ2UgQ2FzZXMgYW5kIEVycm9yIEhhbmRsaW5nJywgKCkgPT4ge1xuICAgIGl0KCdzaG91bGQgaGFuZGxlIG5ldHdvcmsgZXJyb3JzIGdyYWNlZnVsbHknLCBhc3luYyAoKSA9PiB7XG4gICAgICBtb2NrQXBpUmVxdWVzdC5tb2NrUmVqZWN0ZWRWYWx1ZShuZXcgRXJyb3IoJ05ldHdvcmsgZXJyb3InKSk7XG5cbiAgICAgIGNvbnN0IFRlc3RGb3JtID0gKCkgPT4ge1xuICAgICAgICBjb25zdCBbZXJyb3IsIHNldEVycm9yXSA9IFJlYWN0LnVzZVN0YXRlKCcnKTtcblxuICAgICAgICBjb25zdCBoYW5kbGVTdWJtaXQgPSBhc3luYyAoZTogUmVhY3QuRm9ybUV2ZW50KSA9PiB7XG4gICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICBhd2FpdCBtb2NrQXBpUmVxdWVzdCgnUE9TVCcsICcvYXBpL3Rlc3QnLCB7IGRhdGE6ICd0ZXN0JyB9KTtcbiAgICAgICAgICB9IGNhdGNoIChlcnI6IGFueSkge1xuICAgICAgICAgICAgc2V0RXJyb3IoZXJyLm1lc3NhZ2UpO1xuICAgICAgICAgIH1cbiAgICAgICAgfTtcblxuICAgICAgICByZXR1cm4gKFxuICAgICAgICAgIDxmb3JtIG9uU3VibWl0PXtoYW5kbGVTdWJtaXR9IGRhdGEtdGVzdGlkPVwidGVzdC1mb3JtXCI+XG4gICAgICAgICAgICA8YnV0dG9uIGRhdGEtdGVzdGlkPVwic3VibWl0LWJ1dHRvblwiIHR5cGU9XCJzdWJtaXRcIj5cbiAgICAgICAgICAgICAgU3VibWl0XG4gICAgICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgICAgIHtlcnJvciAmJiA8ZGl2IGRhdGEtdGVzdGlkPVwiZXJyb3ItZGlzcGxheVwiPntlcnJvcn08L2Rpdj59XG4gICAgICAgICAgPC9mb3JtPlxuICAgICAgICApO1xuICAgICAgfTtcblxuICAgICAgcmVuZGVyKDxUZXN0Rm9ybSAvPiwgeyB3cmFwcGVyOiBUZXN0V3JhcHBlciB9KTtcblxuICAgICAgYXdhaXQgdXNlckV2ZW50LmNsaWNrKHNjcmVlbi5nZXRCeVRlc3RJZCgnc3VibWl0LWJ1dHRvbicpKTtcblxuICAgICAgYXdhaXQgd2FpdEZvcigoKSA9PiB7XG4gICAgICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXN0SWQoJ2Vycm9yLWRpc3BsYXknKSkudG9IYXZlVGV4dENvbnRlbnQoJ05ldHdvcmsgZXJyb3InKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBwcmV2ZW50IG11bHRpcGxlIHN1Ym1pc3Npb25zJywgYXN5bmMgKCkgPT4ge1xuICAgICAgbGV0IHN1Ym1pdENvdW50ID0gMDtcbiAgICAgIG1vY2tBcGlSZXF1ZXN0Lm1vY2tJbXBsZW1lbnRhdGlvbigoKSA9PiB7XG4gICAgICAgIHN1Ym1pdENvdW50Kys7XG4gICAgICAgIHJldHVybiBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHNldFRpbWVvdXQocmVzb2x2ZSwgMTAwKSk7XG4gICAgICB9KTtcblxuICAgICAgY29uc3QgVGVzdEZvcm0gPSAoKSA9PiB7XG4gICAgICAgIGNvbnN0IFtpc1N1Ym1pdHRpbmcsIHNldElzU3VibWl0dGluZ10gPSBSZWFjdC51c2VTdGF0ZShmYWxzZSk7XG5cbiAgICAgICAgY29uc3QgaGFuZGxlU3VibWl0ID0gYXN5bmMgKGU6IFJlYWN0LkZvcm1FdmVudCkgPT4ge1xuICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICBpZiAoaXNTdWJtaXR0aW5nKSByZXR1cm47XG4gICAgICAgICAgXG4gICAgICAgICAgc2V0SXNTdWJtaXR0aW5nKHRydWUpO1xuICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICBhd2FpdCBtb2NrQXBpUmVxdWVzdCgnUE9TVCcsICcvYXBpL3Rlc3QnLCB7IGRhdGE6ICd0ZXN0JyB9KTtcbiAgICAgICAgICB9IGZpbmFsbHkge1xuICAgICAgICAgICAgc2V0SXNTdWJtaXR0aW5nKGZhbHNlKTtcbiAgICAgICAgICB9XG4gICAgICAgIH07XG5cbiAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICA8Zm9ybSBvblN1Ym1pdD17aGFuZGxlU3VibWl0fSBkYXRhLXRlc3RpZD1cInRlc3QtZm9ybVwiPlxuICAgICAgICAgICAgPGJ1dHRvblxuICAgICAgICAgICAgICBkYXRhLXRlc3RpZD1cInN1Ym1pdC1idXR0b25cIlxuICAgICAgICAgICAgICB0eXBlPVwic3VibWl0XCJcbiAgICAgICAgICAgICAgZGlzYWJsZWQ9e2lzU3VibWl0dGluZ31cbiAgICAgICAgICAgID5cbiAgICAgICAgICAgICAge2lzU3VibWl0dGluZyA/ICdTdWJtaXR0aW5nLi4uJyA6ICdTdWJtaXQnfVxuICAgICAgICAgICAgPC9idXR0b24+XG4gICAgICAgICAgPC9mb3JtPlxuICAgICAgICApO1xuICAgICAgfTtcblxuICAgICAgcmVuZGVyKDxUZXN0Rm9ybSAvPiwgeyB3cmFwcGVyOiBUZXN0V3JhcHBlciB9KTtcblxuICAgICAgY29uc3Qgc3VibWl0QnV0dG9uID0gc2NyZWVuLmdldEJ5VGVzdElkKCdzdWJtaXQtYnV0dG9uJyk7XG4gICAgICBcbiAgICAgIC8vIENsaWNrIG11bHRpcGxlIHRpbWVzIHJhcGlkbHlcbiAgICAgIGF3YWl0IHVzZXJFdmVudC5jbGljayhzdWJtaXRCdXR0b24pO1xuICAgICAgYXdhaXQgdXNlckV2ZW50LmNsaWNrKHN1Ym1pdEJ1dHRvbik7XG4gICAgICBhd2FpdCB1c2VyRXZlbnQuY2xpY2soc3VibWl0QnV0dG9uKTtcblxuICAgICAgYXdhaXQgd2FpdEZvcigoKSA9PiB7XG4gICAgICAgIGV4cGVjdChzdWJtaXRDb3VudCkudG9CZSgxKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBoYW5kbGUgZm9ybSByZXNldCBhZnRlciBzdWNjZXNzZnVsIHN1Ym1pc3Npb24nLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBUZXN0Rm9ybSA9ICgpID0+IHtcbiAgICAgICAgY29uc3QgW3ZhbHVlLCBzZXRWYWx1ZV0gPSBSZWFjdC51c2VTdGF0ZSgnJyk7XG4gICAgICAgIGNvbnN0IFtzdWJtaXR0ZWQsIHNldFN1Ym1pdHRlZF0gPSBSZWFjdC51c2VTdGF0ZShmYWxzZSk7XG5cbiAgICAgICAgY29uc3QgaGFuZGxlU3VibWl0ID0gYXN5bmMgKGU6IFJlYWN0LkZvcm1FdmVudCkgPT4ge1xuICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICBhd2FpdCBtb2NrQXBpUmVxdWVzdCgnUE9TVCcsICcvYXBpL3Rlc3QnLCB7IHZhbHVlIH0pO1xuICAgICAgICAgIHNldFZhbHVlKCcnKTsgLy8gUmVzZXQgZm9ybVxuICAgICAgICAgIHNldFN1Ym1pdHRlZCh0cnVlKTtcbiAgICAgICAgfTtcblxuICAgICAgICByZXR1cm4gKFxuICAgICAgICAgIDxmb3JtIG9uU3VibWl0PXtoYW5kbGVTdWJtaXR9IGRhdGEtdGVzdGlkPVwidGVzdC1mb3JtXCI+XG4gICAgICAgICAgICA8aW5wdXRcbiAgICAgICAgICAgICAgZGF0YS10ZXN0aWQ9XCJ0ZXN0LWlucHV0XCJcbiAgICAgICAgICAgICAgdmFsdWU9e3ZhbHVlfVxuICAgICAgICAgICAgICBvbkNoYW5nZT17KGUpID0+IHNldFZhbHVlKGUudGFyZ2V0LnZhbHVlKX1cbiAgICAgICAgICAgIC8+XG4gICAgICAgICAgICA8YnV0dG9uIGRhdGEtdGVzdGlkPVwic3VibWl0LWJ1dHRvblwiIHR5cGU9XCJzdWJtaXRcIj5cbiAgICAgICAgICAgICAgU3VibWl0XG4gICAgICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgICAgIHtzdWJtaXR0ZWQgJiYgPGRpdiBkYXRhLXRlc3RpZD1cInN1Y2Nlc3MtbWVzc2FnZVwiPkZvcm0gc3VibWl0dGVkITwvZGl2Pn1cbiAgICAgICAgICA8L2Zvcm0+XG4gICAgICAgICk7XG4gICAgICB9O1xuXG4gICAgICByZW5kZXIoPFRlc3RGb3JtIC8+LCB7IHdyYXBwZXI6IFRlc3RXcmFwcGVyIH0pO1xuXG4gICAgICBjb25zdCBpbnB1dCA9IHNjcmVlbi5nZXRCeVRlc3RJZCgndGVzdC1pbnB1dCcpO1xuICAgICAgY29uc3Qgc3VibWl0QnV0dG9uID0gc2NyZWVuLmdldEJ5VGVzdElkKCdzdWJtaXQtYnV0dG9uJyk7XG5cbiAgICAgIGF3YWl0IHVzZXJFdmVudC50eXBlKGlucHV0LCAndGVzdCB2YWx1ZScpO1xuICAgICAgZXhwZWN0KGlucHV0KS50b0hhdmVWYWx1ZSgndGVzdCB2YWx1ZScpO1xuXG4gICAgICBhd2FpdCB1c2VyRXZlbnQuY2xpY2soc3VibWl0QnV0dG9uKTtcblxuICAgICAgYXdhaXQgd2FpdEZvcigoKSA9PiB7XG4gICAgICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXN0SWQoJ3N1Y2Nlc3MtbWVzc2FnZScpKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgICAgICBleHBlY3QoaW5wdXQpLnRvSGF2ZVZhbHVlKCcnKTsgLy8gRm9ybSBzaG91bGQgYmUgcmVzZXRcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9KTtcbn0pO1xuIl0sInZlcnNpb24iOjN9