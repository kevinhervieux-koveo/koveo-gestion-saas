826de650be1cb1e5053931d4cfff9801
"use strict";
/**
 * Form Validation Helper Utilities
 * Utility functions to enforce validation standards across all forms
 */
Object.defineProperty(exports, "__esModule", { value: true });
exports.DevValidationChecker = exports.FormValidationStandards = exports.QuebecValidationPatterns = exports.ValidationQualityCheckers = exports.ValidationTemplates = void 0;
const zod_1 = require("zod");
/**
 * Validation Templates for Common Field Types
 * Use these templates to ensure consistency across all forms
 */
exports.ValidationTemplates = {
    /**
     * Email field validation with format example
     */
    email: () => zod_1.z.string()
        .min(1, 'Email address is required')
        .email('Please enter a valid email address (example: user@domain.com)'),
    /**
     * Quebec-compliant name field validation with French character support
     */
    quebecName: (fieldName, example) => zod_1.z.string()
        .min(1, `${fieldName} is required (example: ${example})`)
        .max(50, `${fieldName} must be less than 50 characters`)
        .regex(/^[a-zA-ZÀ-ÿ\s'-]+$/, `${fieldName} can only contain letters, spaces, apostrophes and hyphens`),
    /**
     * North American phone number validation
     */
    phone: () => zod_1.z.string()
        .regex(/^(\+1\s?)?(\(\d{3}\)|\d{3})[\s.-]?\d{3}[\s.-]?\d{4}$/, 'Phone number must be a valid North American format (example: (514) 123-4567)')
        .optional(),
    /**
     * Monetary amount validation with decimal support
     */
    amount: (fieldName = 'Amount') => zod_1.z.string()
        .min(1, `${fieldName} is required (example: 125.50)`)
        .regex(/^\d+(\.\d{1,2})?$/, `${fieldName} must be a valid number with up to 2 decimal places (example: 125.50)`),
    /**
     * Canadian postal code validation
     */
    postalCode: () => zod_1.z.string()
        .regex(/^[A-Z]\d[A-Z]\s?\d[A-Z]\d$/, 'Postal code must follow Canadian format (example: H1A 1B1)'),
    /**
     * Selection field validation with dropdown guidance
     */
    selection: (fieldName) => zod_1.z.string()
        .min(1, `Please select ${fieldName} from the dropdown`),
    /**
     * Text description field with character limits
     */
    description: (maxLength = 1000, minLength = 0) => {
        let schema = zod_1.z.string().max(maxLength, `Description must be less than ${maxLength} characters`);
        if (minLength > 0) {
            schema = schema.min(minLength, 'Description must be at least 10 characters long (example: Detailed explanation of the issue)');
        }
        return schema;
    },
    /**
     * Title field validation with example
     */
    title: (fieldName = 'Title', example = 'Descriptive Title', maxLength = 200) => zod_1.z.string()
        .min(1, `${fieldName} is required (example: ${example})`)
        .max(maxLength, `${fieldName} must be less than ${maxLength} characters`),
    /**
     * Password validation with security requirements
     */
    password: (fieldName = 'Password') => zod_1.z.string()
        .min(8, `${fieldName} must be at least 8 characters long (example: MonNouveauMotDePasse123!)`)
        .max(100, `${fieldName} must be less than 100 characters`)
        .regex(/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)/, `${fieldName} must contain at least one lowercase letter, one uppercase letter, and one number`),
    /**
     * Numeric range validation
     */
    numericRange: (fieldName, min, max) => zod_1.z.number()
        .min(min, `${fieldName} must be between ${min} and ${max}`)
        .max(max, `${fieldName} must be between ${min} and ${max}`),
    /**
     * Time format validation
     */
    time: () => zod_1.z.string()
        .regex(/^([0-1]?[0-9]|2[0-3]):[0-5][0-9]$/, 'Time must be in HH:MM format (example: 09:00)')
};
/**
 * Validation Quality Checkers
 * Functions to check if validation messages meet quality standards
 */
exports.ValidationQualityCheckers = {
    /**
     * Check if an error message meets quality standards
     */
    checkErrorMessageQuality: (message, fieldType) => {
        const issues = [];
        // Check message length
        if (message.length < 15) {
            issues.push('Error message too short - should be at least 15 characters');
        }
        if (message.length > 200) {
            issues.push('Error message too long - should be less than 200 characters');
        }
        // Check for helpful language
        if (!/please|must be|should be|required/i.test(message)) {
            issues.push('Error message should use helpful language (please, must be, required, etc.)');
        }
        // Check for examples where needed
        const needsExample = ['email', 'phone', 'postal', 'amount', 'time', 'name', 'password'].includes(fieldType.toLowerCase());
        if (needsExample && !message.includes('example:')) {
            issues.push(`${fieldType} field should include format example in error message`);
        }
        // Check for vague language
        if (/^(invalid|error|wrong|bad)$/i.test(message)) {
            issues.push('Error message too vague - provide specific guidance');
        }
        // Check for actionable guidance
        if (!/enter|select|choose|type|provide|format|between|at least|less than/i.test(message)) {
            issues.push('Error message should provide actionable guidance on how to fix the error');
        }
        return {
            isCompliant: issues.length === 0,
            issues,
            message
        };
    },
    /**
     * Check if a Zod schema follows validation standards
     */
    checkSchemaCompliance: (schema, fieldType) => {
        const issues = [];
        try {
            // Test schema with empty string to trigger validation
            const result = schema.safeParse('');
            if (!result.success && result.error.issues.length > 0) {
                const errorMessage = result.error.issues[0].message;
                const messageCheck = exports.ValidationQualityCheckers.checkErrorMessageQuality(errorMessage, fieldType);
                if (!messageCheck.isCompliant) {
                    issues.push(...messageCheck.issues);
                }
            }
            // Additional schema structure checks
            if (fieldType === 'email' && schema._def && 'typeName' in schema._def && schema._def.typeName !== 'ZodString') {
                issues.push('Email fields should use string schema with email validation');
            }
        }
        catch (error) {
            issues.push('Schema validation check failed - invalid schema structure');
        }
        return {
            isCompliant: issues.length === 0,
            issues
        };
    },
    /**
     * Check if form component follows UI standards
     */
    checkFormComponentCompliance: (componentStructure) => {
        const issues = [];
        if (!componentStructure.hasFormLabel) {
            issues.push('Form should use FormLabel component for consistent styling');
        }
        if (!componentStructure.hasFormMessage) {
            issues.push('Form should use FormMessage component to display validation errors');
        }
        if (!componentStructure.hasDataTestIds) {
            issues.push('Form elements should have data-testid attributes for testing');
        }
        if (!componentStructure.hasProperStyling) {
            issues.push('Form should follow responsive design patterns with proper styling');
        }
        return {
            isCompliant: issues.length === 0,
            issues
        };
    }
};
/**
 * Quebec-Specific Validation Patterns
 * Validation patterns specific to Quebec compliance requirements
 */
exports.QuebecValidationPatterns = {
    /**
     * Quebec name validation supporting French characters
     */
    quebecName: /^[a-zA-ZÀ-ÿ\s'-]+$/,
    /**
     * Canadian postal code format
     */
    canadianPostalCode: /^[A-Z]\d[A-Z]\s?\d[A-Z]\d$/,
    /**
     * North American phone number format
     */
    northAmericanPhone: /^(\+1\s?)?(\(\d{3}\)|\d{3})[\s.-]?\d{3}[\s.-]?\d{4}$/,
    /**
     * Quebec city name validation
     */
    quebecCity: /^[a-zA-ZÀ-ÿ\s'-]+$/
};
/**
 * Form Validation Standards Enforcement
 * Functions to ensure forms meet all validation requirements
 */
exports.FormValidationStandards = {
    /**
     * Validate that a form schema meets all requirements
     */
    validateFormSchema: (schema, formName) => {
        const issues = [];
        const recommendations = [];
        // Check each field in the schema
        Object.entries(schema).forEach(([fieldName, fieldSchema]) => {
            const fieldType = detectFieldType(fieldName);
            const compliance = exports.ValidationQualityCheckers.checkSchemaCompliance(fieldSchema, fieldType);
            if (!compliance.isCompliant) {
                issues.push(`Field '${fieldName}': ${compliance.issues.join(', ')}`);
            }
            // Add recommendations based on field type
            if (fieldType === 'email' && !fieldName.includes('confirm')) {
                recommendations.push(`Consider adding email confirmation field for ${fieldName} in security-sensitive forms`);
            }
            if (fieldType === 'password') {
                recommendations.push(`Ensure ${fieldName} has proper strength indicators in the UI`);
            }
        });
        return {
            isCompliant: issues.length === 0,
            issues,
            recommendations
        };
    },
    /**
     * Generate validation report for development team
     */
    generateValidationReport: (formFiles) => {
        const compliantForms = [];
        const nonCompliantForms = [];
        // For demo purposes, assume all listed forms are compliant
        // In real implementation, this would analyze actual form files
        formFiles.forEach(file => {
            compliantForms.push(file);
        });
        return {
            compliantForms,
            nonCompliantForms,
            totalForms: formFiles.length,
            compliancePercentage: (compliantForms.length / formFiles.length) * 100
        };
    }
};
/**
 * Helper function to detect field type from field name
 */
function detectFieldType(fieldName) {
    const name = fieldName.toLowerCase();
    if (name.includes('email'))
        return 'email';
    if (name.includes('phone') || name.includes('telephone'))
        return 'phone';
    if (name.includes('postal') || name.includes('zipcode'))
        return 'postal';
    if (name.includes('amount') || name.includes('price') || name.includes('cost'))
        return 'amount';
    if (name.includes('time') || name.includes('hour'))
        return 'time';
    if (name.includes('password') || name.includes('pwd'))
        return 'password';
    if (name.includes('name') || name.includes('nom'))
        return 'name';
    if (name.includes('description') || name.includes('note'))
        return 'description';
    if (name.includes('title') || name.includes('titre'))
        return 'title';
    if (name.includes('date'))
        return 'date';
    if (name.includes('select') || name.includes('choice') || name.includes('option'))
        return 'selection';
    return 'text';
}
/**
 * Runtime validation checker for development
 * Use in development to ensure new forms follow standards
 */
exports.DevValidationChecker = {
    /**
     * Check if a form follows all validation standards
     * Call this during development to validate form compliance
     */
    checkFormCompliance: (formSchema, formName) => {
        if (process.env.NODE_ENV === 'development') {
            const validation = exports.FormValidationStandards.validateFormSchema(formSchema, formName);
            if (!validation.isCompliant) {
                console.warn(`⚠️  Form validation compliance issues in ${formName}:`);
                validation.issues.forEach(issue => {
                    console.warn(`  - ${issue}`);
                });
            }
            if (validation.recommendations.length > 0) {
                console.info(`💡 Form validation recommendations for ${formName}:`);
                validation.recommendations.forEach(rec => {
                    console.info(`  - ${rec}`);
                });
            }
            if (validation.isCompliant) {
                console.log(`✅ Form ${formName} meets all validation standards`);
            }
        }
    }
};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiL2hvbWUvcnVubmVyL3dvcmtzcGFjZS9jbGllbnQvc3JjL3V0aWxzL2Zvcm0tdmFsaWRhdGlvbi1oZWxwZXJzLnRzIiwibWFwcGluZ3MiOiI7QUFBQTs7O0dBR0c7OztBQUVILDZCQUF3QjtBQUV4Qjs7O0dBR0c7QUFDVSxRQUFBLG1CQUFtQixHQUFHO0lBQ2pDOztPQUVHO0lBQ0gsS0FBSyxFQUFFLEdBQUcsRUFBRSxDQUFDLE9BQUMsQ0FBQyxNQUFNLEVBQUU7U0FDcEIsR0FBRyxDQUFDLENBQUMsRUFBRSwyQkFBMkIsQ0FBQztTQUNuQyxLQUFLLENBQUMsK0RBQStELENBQUM7SUFFekU7O09BRUc7SUFDSCxVQUFVLEVBQUUsQ0FBQyxTQUFpQixFQUFFLE9BQWUsRUFBRSxFQUFFLENBQUMsT0FBQyxDQUFDLE1BQU0sRUFBRTtTQUMzRCxHQUFHLENBQUMsQ0FBQyxFQUFFLEdBQUcsU0FBUywwQkFBMEIsT0FBTyxHQUFHLENBQUM7U0FDeEQsR0FBRyxDQUFDLEVBQUUsRUFBRSxHQUFHLFNBQVMsa0NBQWtDLENBQUM7U0FDdkQsS0FBSyxDQUFDLG9CQUFvQixFQUFFLEdBQUcsU0FBUyw0REFBNEQsQ0FBQztJQUV4Rzs7T0FFRztJQUNILEtBQUssRUFBRSxHQUFHLEVBQUUsQ0FBQyxPQUFDLENBQUMsTUFBTSxFQUFFO1NBQ3BCLEtBQUssQ0FBQyxzREFBc0QsRUFBRSw4RUFBOEUsQ0FBQztTQUM3SSxRQUFRLEVBQUU7SUFFYjs7T0FFRztJQUNILE1BQU0sRUFBRSxDQUFDLFlBQW9CLFFBQVEsRUFBRSxFQUFFLENBQUMsT0FBQyxDQUFDLE1BQU0sRUFBRTtTQUNqRCxHQUFHLENBQUMsQ0FBQyxFQUFFLEdBQUcsU0FBUyxnQ0FBZ0MsQ0FBQztTQUNwRCxLQUFLLENBQUMsbUJBQW1CLEVBQUUsR0FBRyxTQUFTLHVFQUF1RSxDQUFDO0lBRWxIOztPQUVHO0lBQ0gsVUFBVSxFQUFFLEdBQUcsRUFBRSxDQUFDLE9BQUMsQ0FBQyxNQUFNLEVBQUU7U0FDekIsS0FBSyxDQUFDLDRCQUE0QixFQUFF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M0MsSUFBSSxJQUFJLENBQUMsUUFBUSxDQUFDLE9BQU8sQ0FBQyxJQUFJLElBQUksQ0FBQyxRQUFRLENBQUMsV0FBVyxDQUFDO1FBQUUsT0FBTyxPQUFPLENBQUM7SUFDekUsSUFBSSxJQUFJLENBQUMsUUFBUSxDQUFDLFFBQVEsQ0FBQyxJQUFJLElBQUksQ0FBQyxRQUFRLENBQUMsU0FBUyxDQUFDO1FBQUUsT0FBTyxRQUFRLENBQUM7SUFDekUsSUFBSSxJQUFJLENBQUMsUUFBUSxDQUFDLFFBQVEsQ0FBQyxJQUFJLElBQUksQ0FBQyxRQUFRLENBQUMsT0FBTyxDQUFDLElBQUksSUFBSSxDQUFDLFFBQVEsQ0FBQyxNQUFNLENBQUM7UUFBRSxPQUFPLFFBQVEsQ0FBQztJQUNoRyxJQUFJLElBQUksQ0FBQyxRQUFRLENBQUMsTUFBTSxDQUFDLElBQUksSUFBSSxDQUFDLFFBQVEsQ0FBQyxNQUFNLENBQUM7UUFBRSxPQUFPLE1BQU0sQ0FBQztJQUNsRSxJQUFJLElBQUksQ0FBQyxRQUFRLENBQUMsVUFBVSxDQUFDLElBQUksSUFBSSxDQUFDLFFBQVEsQ0FBQyxLQUFLLENBQUM7UUFBRSxPQUFPLFVBQVUsQ0FBQztJQUN6RSxJQUFJLElBQUksQ0FBQyxRQUFRLENBQUMsTUFBTSxDQUFDLElBQUksSUFBSSxDQUFDLFFBQVEsQ0FBQyxLQUFLLENBQUM7UUFBRSxPQUFPLE1BQU0sQ0FBQztJQUNqRSxJQUFJLElBQUksQ0FBQyxRQUFRLENBQUMsYUFBYSxDQUFDLElBQUksSUFBSSxDQUFDLFFBQVEsQ0FBQyxNQUFNLENBQUM7UUFBRSxPQUFPLGFBQWEsQ0FBQztJQUNoRixJQUFJLElBQUksQ0FBQyxRQUFRLENBQUMsT0FBTyxDQUFDLElBQUksSUFBSSxDQUFDLFFBQVEsQ0FBQyxPQUFPLENBQUM7UUFBRSxPQUFPLE9BQU8sQ0FBQztJQUNyRSxJQUFJLElBQUksQ0FBQyxRQUFRLENBQUMsTUFBTSxDQUFDO1FBQUUsT0FBTyxNQUFNLENBQUM7SUFDekMsSUFBSSxJQUFJLENBQUMsUUFBUSxDQUFDLFFBQVEsQ0FBQyxJQUFJLElBQUksQ0FBQyxRQUFRLENBQUMsUUFBUSxDQUFDLElBQUksSUFBSSxDQUFDLFFBQVEsQ0FBQyxRQUFRLENBQUM7UUFBRSxPQUFPLFdBQVcsQ0FBQztJQUV0RyxPQUFPLE1BQU0sQ0FBQztBQUNoQixDQUFDO0FBRUQ7OztHQUdHO0FBQ1UsUUFBQSxvQkFBb0IsR0FBRztJQUNsQzs7O09BR0c7SUFDSCxtQkFBbUIsRUFBRSxDQUNuQixVQUFxQyxFQUNyQyxRQUFnQixFQUNWLEVBQUU7UUFDUixJQUFJLE9BQU8sQ0FBQyxHQUFHLENBQUMsUUFBUSxLQUFLLGFBQWEsRUFBRSxDQUFDO1lBQzNDLE1BQU0sVUFBVSxHQUFHLCtCQUF1QixDQUFDLGtCQUFrQixDQUFDLFVBQVUsRUFBRSxRQUFRLENBQUMsQ0FBQztZQUVwRixJQUFJLENBQUMsVUFBVSxDQUFDLFdBQVcsRUFBRSxDQUFDO2dCQUM1QixPQUFPLENBQUMsSUFBSSxDQUFDLDRDQUE0QyxRQUFRLEdBQUcsQ0FBQyxDQUFDO2dCQUN0RSxVQUFVLENBQUMsTUFBTSxDQUFDLE9BQU8sQ0FBQyxLQUFLLENBQUMsRUFBRTtvQkFDaEMsT0FBTyxDQUFDLElBQUksQ0FBQyxPQUFPLEtBQUssRUFBRSxDQUFDLENBQUM7Z0JBQy9CLENBQUMsQ0FBQyxDQUFDO1lBQ0wsQ0FBQztZQUVELElBQUksVUFBVSxDQUFDLGVBQWUsQ0FBQyxNQUFNLEdBQUcsQ0FBQyxFQUFFLENBQUM7Z0JBQzFDLE9BQU8sQ0FBQyxJQUFJLENBQUMsMENBQTBDLFFBQVEsR0FBRyxDQUFDLENBQUM7Z0JBQ3BFLFVBQVUsQ0FBQyxlQUFlLENBQUMsT0FBTyxDQUFDLEdBQUcsQ0FBQyxFQUFFO29CQUN2QyxPQUFPLENBQUMsSUFBSSxDQUFDLE9BQU8sR0FBRyxFQUFFLENBQUMsQ0FBQztnQkFDN0IsQ0FBQyxDQUFDLENBQUM7WUFDTCxDQUFDO1lBRUQsSUFBSSxVQUFVLENBQUMsV0FBVyxFQUFFLENBQUM7Z0JBQzNCLE9BQU8sQ0FBQyxHQUFHLENBQUMsVUFBVSxRQUFRLGlDQUFpQyxDQUFDLENBQUM7WUFDbkUsQ0FBQztRQUNILENBQUM7SUFDSCxDQUFDO0NBQ0YsQ0FBQyIsIm5hbWVzIjpbXSwic291cmNlcyI6WyIvaG9tZS9ydW5uZXIvd29ya3NwYWNlL2NsaWVudC9zcmMvdXRpbHMvZm9ybS12YWxpZGF0aW9uLWhlbHBlcnMudHMiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBGb3JtIFZhbGlkYXRpb24gSGVscGVyIFV0aWxpdGllc1xuICogVXRpbGl0eSBmdW5jdGlvbnMgdG8gZW5mb3JjZSB2YWxpZGF0aW9uIHN0YW5kYXJkcyBhY3Jvc3MgYWxsIGZvcm1zXG4gKi9cblxuaW1wb3J0IHsgeiB9IGZyb20gJ3pvZCc7XG5cbi8qKlxuICogVmFsaWRhdGlvbiBUZW1wbGF0ZXMgZm9yIENvbW1vbiBGaWVsZCBUeXBlc1xuICogVXNlIHRoZXNlIHRlbXBsYXRlcyB0byBlbnN1cmUgY29uc2lzdGVuY3kgYWNyb3NzIGFsbCBmb3Jtc1xuICovXG5leHBvcnQgY29uc3QgVmFsaWRhdGlvblRlbXBsYXRlcyA9IHtcbiAgLyoqXG4gICAqIEVtYWlsIGZpZWxkIHZhbGlkYXRpb24gd2l0aCBmb3JtYXQgZXhhbXBsZVxuICAgKi9cbiAgZW1haWw6ICgpID0+IHouc3RyaW5nKClcbiAgICAubWluKDEsICdFbWFpbCBhZGRyZXNzIGlzIHJlcXVpcmVkJylcbiAgICAuZW1haWwoJ1BsZWFzZSBlbnRlciBhIHZhbGlkIGVtYWlsIGFkZHJlc3MgKGV4YW1wbGU6IHVzZXJAZG9tYWluLmNvbSknKSxcblxuICAvKipcbiAgICogUXVlYmVjLWNvbXBsaWFudCBuYW1lIGZpZWxkIHZhbGlkYXRpb24gd2l0aCBGcmVuY2ggY2hhcmFjdGVyIHN1cHBvcnRcbiAgICovXG4gIHF1ZWJlY05hbWU6IChmaWVsZE5hbWU6IHN0cmluZywgZXhhbXBsZTogc3RyaW5nKSA9PiB6LnN0cmluZygpXG4gICAgLm1pbigxLCBgJHtmaWVsZE5hbWV9IGlzIHJlcXVpcmVkIChleGFtcGxlOiAke2V4YW1wbGV9KWApXG4gICAgLm1heCg1MCwgYCR7ZmllbGROYW1lfSBtdXN0IGJlIGxlc3MgdGhhbiA1MCBjaGFyYWN0ZXJzYClcbiAgICAucmVnZXgoL15bYS16QS1aw4Atw79cXHMnLV0rJC8sIGAke2ZpZWxkTmFtZX0gY2FuIG9ubHkgY29udGFpbiBsZXR0ZXJzLCBzcGFjZXMsIGFwb3N0cm9waGVzIGFuZCBoeXBoZW5zYCksXG5cbiAgLyoqXG4gICAqIE5vcnRoIEFtZXJpY2FuIHBob25lIG51bWJlciB2YWxpZGF0aW9uXG4gICAqL1xuICBwaG9uZTogKCkgPT4gei5zdHJpbmcoKVxuICAgIC5yZWdleCgvXihcXCsxXFxzPyk/KFxcKFxcZHszfVxcKXxcXGR7M30pW1xccy4tXT9cXGR7M31bXFxzLi1dP1xcZHs0fSQvLCAnUGhvbmUgbnVtYmVyIG11c3QgYmUgYSB2YWxpZCBOb3J0aCBBbWVyaWNhbiBmb3JtYXQgKGV4YW1wbGU6ICg1MTQpIDEyMy00NTY3KScpXG4gICAgLm9wdGlvbmFsKCksXG5cbiAgLyoqXG4gICAqIE1vbmV0YXJ5IGFtb3VudCB2YWxpZGF0aW9uIHdpdGggZGVjaW1hbCBzdXBwb3J0XG4gICAqL1xuICBhbW91bnQ6IChmaWVsZE5hbWU6IHN0cmluZyA9ICdBbW91bnQnKSA9PiB6LnN0cmluZygpXG4gICAgLm1pbigxLCBgJHtmaWVsZE5hbWV9IGlzIHJlcXVpcmVkIChleGFtcGxlOiAxMjUuNTApYClcbiAgICAucmVnZXgoL15cXGQrKFxcLlxcZHsxLDJ9KT8kLywgYCR7ZmllbGROYW1lfSBtdXN0IGJlIGEgdmFsaWQgbnVtYmVyIHdpdGggdXAgdG8gMiBkZWNpbWFsIHBsYWNlcyAoZXhhbXBsZTogMTI1LjUwKWApLFxuXG4gIC8qKlxuICAgKiBDYW5hZGlhbiBwb3N0YWwgY29kZSB2YWxpZGF0aW9uXG4gICAqL1xuICBwb3N0YWxDb2RlOiAoKSA9PiB6LnN0cmluZygpXG4gICAgLnJlZ2V4KC9eW0EtWl1cXGRbQS1aXVxccz9cXGRbQS1aXVxcZCQvLCAnUG9zdGFsIGNvZGUgbXVzdCBmb2xsb3cgQ2FuYWRpYW4gZm9ybWF0IChleGFtcGxlOiBIMUEgMUIxKScpLFxuXG4gIC8qKlxuICAgKiBTZWxlY3Rpb24gZmllbGQgdmFsaWRhdGlvbiB3aXRoIGRyb3Bkb3duIGd1aWRhbmNlXG4gICAqL1xuICBzZWxlY3Rpb246IChmaWVsZE5hbWU6IHN0cmluZykgPT4gei5zdHJpbmcoKVxuICAgIC5taW4oMSwgYFBsZWFzZSBzZWxlY3QgJHtmaWVsZE5hbWV9IGZyb20gdGhlIGRyb3Bkb3duYCksXG5cbiAgLyoqXG4gICAqIFRleHQgZGVzY3JpcHRpb24gZmllbGQgd2l0aCBjaGFyYWN0ZXIgbGltaXRzXG4gICAqL1xuICBkZXNjcmlwdGlvbjogKG1heExlbmd0aDogbnVtYmVyID0gMTAwMCwgbWluTGVuZ3RoOiBudW1iZXIgPSAwKSA9PiB7XG4gICAgbGV0IHNjaGVtYSA9IHouc3RyaW5nKCkubWF4KG1heExlbmd0aCwgYERlc2NyaXB0aW9uIG11c3QgYmUgbGVzcyB0aGFuICR7bWF4TGVuZ3RofSBjaGFyYWN0ZXJzYCk7XG4gICAgaWYgKG1pbkxlbmd0aCA+IDApIHtcbiAgICAgIHNjaGVtYSA9IHNjaGVtYS5taW4obWluTGVuZ3RoLCAnRGVzY3JpcHRpb24gbXVzdCBiZSBhdCBsZWFzdCAxMCBjaGFyYWN0ZXJzIGxvbmcgKGV4YW1wbGU6IERldGFpbGVkIGV4cGxhbmF0aW9uIG9mIHRoZSBpc3N1ZSknKTtcbiAgICB9XG4gICAgcmV0dXJuIHNjaGVtYTtcbiAgfSxcblxuICAvKipcbiAgICogVGl0bGUgZmllbGQgdmFsaWRhdGlvbiB3aXRoIGV4YW1wbGVcbiAgICovXG4gIHRpdGxlOiAoZmllbGROYW1lOiBzdHJpbmcgPSAnVGl0bGUnLCBleGFtcGxlOiBzdHJpbmcgPSAnRGVzY3JpcHRpdmUgVGl0bGUnLCBtYXhMZW5ndGg6IG51bWJlciA9IDIwMCkgPT4gei5zdHJpbmcoKVxuICAgIC5taW4oMSwgYCR7ZmllbGROYW1lfSBpcyByZXF1aXJlZCAoZXhhbXBsZTogJHtleGFtcGxlfSlgKVxuICAgIC5tYXgobWF4TGVuZ3RoLCBgJHtmaWVsZE5hbWV9IG11c3QgYmUgbGVzcyB0aGFuICR7bWF4TGVuZ3RofSBjaGFyYWN0ZXJzYCksXG5cbiAgLyoqXG4gICAqIFBhc3N3b3JkIHZhbGlkYXRpb24gd2l0aCBzZWN1cml0eSByZXF1aXJlbWVudHNcbiAgICovXG4gIHBhc3N3b3JkOiAoZmllbGROYW1lOiBzdHJpbmcgPSAnUGFzc3dvcmQnKSA9PiB6LnN0cmluZygpXG4gICAgLm1pbig4LCBgJHtmaWVsZE5hbWV9IG11c3QgYmUgYXQgbGVhc3QgOCBjaGFyYWN0ZXJzIGxvbmcgKGV4YW1wbGU6IE1vbk5vdXZlYXVNb3REZVBhc3NlMTIzISlgKVxuICAgIC5tYXgoMTAwLCBgJHtmaWVsZE5hbWV9IG11c3QgYmUgbGVzcyB0aGFuIDEwMCBjaGFyYWN0ZXJzYClcbiAgICAucmVnZXgoL14oPz0uKlthLXpdKSg/PS4qW0EtWl0pKD89LipcXGQpLywgYCR7ZmllbGROYW1lfSBtdXN0IGNvbnRhaW4gYXQgbGVhc3Qgb25lIGxvd2VyY2FzZSBsZXR0ZXIsIG9uZSB1cHBlcmNhc2UgbGV0dGVyLCBhbmQgb25lIG51bWJlcmApLFxuXG4gIC8qKlxuICAgKiBOdW1lcmljIHJhbmdlIHZhbGlkYXRpb25cbiAgICovXG4gIG51bWVyaWNSYW5nZTogKGZpZWxkTmFtZTogc3RyaW5nLCBtaW46IG51bWJlciwgbWF4OiBudW1iZXIpID0+IHoubnVtYmVyKClcbiAgICAubWluKG1pbiwgYCR7ZmllbGROYW1lfSBtdXN0IGJlIGJldHdlZW4gJHttaW59IGFuZCAke21heH1gKVxuICAgIC5tYXgobWF4LCBgJHtmaWVsZE5hbWV9IG11c3QgYmUgYmV0d2VlbiAke21pbn0gYW5kICR7bWF4fWApLFxuXG4gIC8qKlxuICAgKiBUaW1lIGZvcm1hdCB2YWxpZGF0aW9uXG4gICAqL1xuICB0aW1lOiAoKSA9PiB6LnN0cmluZygpXG4gICAgLnJlZ2V4KC9eKFswLTFdP1swLTldfDJbMC0zXSk6WzAtNV1bMC05XSQvLCAnVGltZSBtdXN0IGJlIGluIEhIOk1NIGZvcm1hdCAoZXhhbXBsZTogMDk6MDApJylcbn07XG5cbi8qKlxuICogVmFsaWRhdGlvbiBRdWFsaXR5IENoZWNrZXJzXG4gKiBGdW5jdGlvbnMgdG8gY2hlY2sgaWYgdmFsaWRhdGlvbiBtZXNzYWdlcyBtZWV0IHF1YWxpdHkgc3RhbmRhcmRzXG4gKi9cbmV4cG9ydCBjb25zdCBWYWxpZGF0aW9uUXVhbGl0eUNoZWNrZXJzID0ge1xuICAvKipcbiAgICogQ2hlY2sgaWYgYW4gZXJyb3IgbWVzc2FnZSBtZWV0cyBxdWFsaXR5IHN0YW5kYXJkc1xuICAgKi9cbiAgY2hlY2tFcnJvck1lc3NhZ2VRdWFsaXR5OiAobWVzc2FnZTogc3RyaW5nLCBmaWVsZFR5cGU6IHN0cmluZyk6IHtcbiAgICBpc0NvbXBsaWFudDogYm9vbGVhbjtcbiAgICBpc3N1ZXM6IHN0cmluZ1tdO1xuICAgIG1lc3NhZ2U6IHN0cmluZztcbiAgfSA9PiB7XG4gICAgY29uc3QgaXNzdWVzOiBzdHJpbmdbXSA9IFtdO1xuXG4gICAgLy8gQ2hlY2sgbWVzc2FnZSBsZW5ndGhcbiAgICBpZiAobWVzc2FnZS5sZW5ndGggPCAxNSkge1xuICAgICAgaXNzdWVzLnB1c2goJ0Vycm9yIG1lc3NhZ2UgdG9vIHNob3J0IC0gc2hvdWxkIGJlIGF0IGxlYXN0IDE1IGNoYXJhY3RlcnMnKTtcbiAgICB9XG4gICAgaWYgKG1lc3NhZ2UubGVuZ3RoID4gMjAwKSB7XG4gICAgICBpc3N1ZXMucHVzaCgnRXJyb3IgbWVzc2FnZSB0b28gbG9uZyAtIHNob3VsZCBiZSBsZXNzIHRoYW4gMjAwIGNoYXJhY3RlcnMnKTtcbiAgICB9XG5cbiAgICAvLyBDaGVjayBmb3IgaGVscGZ1bCBsYW5ndWFnZVxuICAgIGlmICghL3BsZWFzZXxtdXN0IGJlfHNob3VsZCBiZXxyZXF1aXJlZC9pLnRlc3QobWVzc2FnZSkpIHtcbiAgICAgIGlzc3Vlcy5wdXNoKCdFcnJvciBtZXNzYWdlIHNob3VsZCB1c2UgaGVscGZ1bCBsYW5ndWFnZSAocGxlYXNlLCBtdXN0IGJlLCByZXF1aXJlZCwgZXRjLiknKTtcbiAgICB9XG5cbiAgICAvLyBDaGVjayBmb3IgZXhhbXBsZXMgd2hlcmUgbmVlZGVkXG4gICAgY29uc3QgbmVlZHNFeGFtcGxlID0gWydlbWFpbCcsICdwaG9uZScsICdwb3N0YWwnLCAnYW1vdW50JywgJ3RpbWUnLCAnbmFtZScsICdwYXNzd29yZCddLmluY2x1ZGVzKGZpZWxkVHlwZS50b0xvd2VyQ2FzZSgpKTtcbiAgICBpZiAobmVlZHNFeGFtcGxlICYmICFtZXNzYWdlLmluY2x1ZGVzKCdleGFtcGxlOicpKSB7XG4gICAgICBpc3N1ZXMucHVzaChgJHtmaWVsZFR5cGV9IGZpZWxkIHNob3VsZCBpbmNsdWRlIGZvcm1hdCBleGFtcGxlIGluIGVycm9yIG1lc3NhZ2VgKTtcbiAgICB9XG5cbiAgICAvLyBDaGVjayBmb3IgdmFndWUgbGFuZ3VhZ2VcbiAgICBpZiAoL14oaW52YWxpZHxlcnJvcnx3cm9uZ3xiYWQpJC9pLnRlc3QobWVzc2FnZSkpIHtcbiAgICAgIGlzc3Vlcy5wdXNoKCdFcnJvciBtZXNzYWdlIHRvbyB2YWd1ZSAtIHByb3ZpZGUgc3BlY2lmaWMgZ3VpZGFuY2UnKTtcbiAgICB9XG5cbiAgICAvLyBDaGVjayBmb3IgYWN0aW9uYWJsZSBndWlkYW5jZVxuICAgIGlmICghL2VudGVyfHNlbGVjdHxjaG9vc2V8dHlwZXxwcm92aWRlfGZvcm1hdHxiZXR3ZWVufGF0IGxlYXN0fGxlc3MgdGhhbi9pLnRlc3QobWVzc2FnZSkpIHtcbiAgICAgIGlzc3Vlcy5wdXNoKCdFcnJvciBtZXNzYWdlIHNob3VsZCBwcm92aWRlIGFjdGlvbmFibGUgZ3VpZGFuY2Ugb24gaG93IHRvIGZpeCB0aGUgZXJyb3InKTtcbiAgICB9XG5cbiAgICByZXR1cm4ge1xuICAgICAgaXNDb21wbGlhbnQ6IGlzc3Vlcy5sZW5ndGggPT09IDAsXG4gICAgICBpc3N1ZXMsXG4gICAgICBtZXNzYWdlXG4gICAgfTtcbiAgfSxcblxuICAvKipcbiAgICogQ2hlY2sgaWYgYSBab2Qgc2NoZW1hIGZvbGxvd3MgdmFsaWRhdGlvbiBzdGFuZGFyZHNcbiAgICovXG4gIGNoZWNrU2NoZW1hQ29tcGxpYW5jZTogKHNjaGVtYTogei5ab2RUeXBlLCBmaWVsZFR5cGU6IHN0cmluZyk6IHtcbiAgICBpc0NvbXBsaWFudDogYm9vbGVhbjtcbiAgICBpc3N1ZXM6IHN0cmluZ1tdO1xuICB9ID0+IHtcbiAgICBjb25zdCBpc3N1ZXM6IHN0cmluZ1tdID0gW107XG5cbiAgICB0cnkge1xuICAgICAgLy8gVGVzdCBzY2hlbWEgd2l0aCBlbXB0eSBzdHJpbmcgdG8gdHJpZ2dlciB2YWxpZGF0aW9uXG4gICAgICBjb25zdCByZXN1bHQgPSBzY2hlbWEuc2FmZVBhcnNlKCcnKTtcbiAgICAgIGlmICghcmVzdWx0LnN1Y2Nlc3MgJiYgcmVzdWx0LmVycm9yLmlzc3Vlcy5sZW5ndGggPiAwKSB7XG4gICAgICAgIGNvbnN0IGVycm9yTWVzc2FnZSA9IHJlc3VsdC5lcnJvci5pc3N1ZXNbMF0ubWVzc2FnZTtcbiAgICAgICAgY29uc3QgbWVzc2FnZUNoZWNrID0gVmFsaWRhdGlvblF1YWxpdHlDaGVja2Vycy5jaGVja0Vycm9yTWVzc2FnZVF1YWxpdHkoZXJyb3JNZXNzYWdlLCBmaWVsZFR5cGUpO1xuICAgICAgICBcbiAgICAgICAgaWYgKCFtZXNzYWdlQ2hlY2suaXNDb21wbGlhbnQpIHtcbiAgICAgICAgICBpc3N1ZXMucHVzaCguLi5tZXNzYWdlQ2hlY2suaXNzdWVzKTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICAvLyBBZGRpdGlvbmFsIHNjaGVtYSBzdHJ1Y3R1cmUgY2hlY2tzXG4gICAgICBpZiAoZmllbGRUeXBlID09PSAnZW1haWwnICYmIHNjaGVtYS5fZGVmICYmICd0eXBlTmFtZScgaW4gc2NoZW1hLl9kZWYgJiYgc2NoZW1hLl9kZWYudHlwZU5hbWUgIT09ICdab2RTdHJpbmcnKSB7XG4gICAgICAgIGlzc3Vlcy5wdXNoKCdFbWFpbCBmaWVsZHMgc2hvdWxkIHVzZSBzdHJpbmcgc2NoZW1hIHdpdGggZW1haWwgdmFsaWRhdGlvbicpO1xuICAgICAgfVxuXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGlzc3Vlcy5wdXNoKCdTY2hlbWEgdmFsaWRhdGlvbiBjaGVjayBmYWlsZWQgLSBpbnZhbGlkIHNjaGVtYSBzdHJ1Y3R1cmUnKTtcbiAgICB9XG5cbiAgICByZXR1cm4ge1xuICAgICAgaXNDb21wbGlhbnQ6IGlzc3Vlcy5sZW5ndGggPT09IDAsXG4gICAgICBpc3N1ZXNcbiAgICB9O1xuICB9LFxuXG4gIC8qKlxuICAgKiBDaGVjayBpZiBmb3JtIGNvbXBvbmVudCBmb2xsb3dzIFVJIHN0YW5kYXJkc1xuICAgKi9cbiAgY2hlY2tGb3JtQ29tcG9uZW50Q29tcGxpYW5jZTogKGNvbXBvbmVudFN0cnVjdHVyZToge1xuICAgIGhhc0Zvcm1MYWJlbDogYm9vbGVhbjtcbiAgICBoYXNGb3JtTWVzc2FnZTogYm9vbGVhbjtcbiAgICBoYXNEYXRhVGVzdElkczogYm9vbGVhbjtcbiAgICBoYXNQcm9wZXJTdHlsaW5nOiBib29sZWFuO1xuICB9KToge1xuICAgIGlzQ29tcGxpYW50OiBib29sZWFuO1xuICAgIGlzc3Vlczogc3RyaW5nW107XG4gIH0gPT4ge1xuICAgIGNvbnN0IGlzc3Vlczogc3RyaW5nW10gPSBbXTtcblxuICAgIGlmICghY29tcG9uZW50U3RydWN0dXJlLmhhc0Zvcm1MYWJlbCkge1xuICAgICAgaXNzdWVzLnB1c2goJ0Zvcm0gc2hvdWxkIHVzZSBGb3JtTGFiZWwgY29tcG9uZW50IGZvciBjb25zaXN0ZW50IHN0eWxpbmcnKTtcbiAgICB9XG4gICAgaWYgKCFjb21wb25lbnRTdHJ1Y3R1cmUuaGFzRm9ybU1lc3NhZ2UpIHtcbiAgICAgIGlzc3Vlcy5wdXNoKCdGb3JtIHNob3VsZCB1c2UgRm9ybU1lc3NhZ2UgY29tcG9uZW50IHRvIGRpc3BsYXkgdmFsaWRhdGlvbiBlcnJvcnMnKTtcbiAgICB9XG4gICAgaWYgKCFjb21wb25lbnRTdHJ1Y3R1cmUuaGFzRGF0YVRlc3RJZHMpIHtcbiAgICAgIGlzc3Vlcy5wdXNoKCdGb3JtIGVsZW1lbnRzIHNob3VsZCBoYXZlIGRhdGEtdGVzdGlkIGF0dHJpYnV0ZXMgZm9yIHRlc3RpbmcnKTtcbiAgICB9XG4gICAgaWYgKCFjb21wb25lbnRTdHJ1Y3R1cmUuaGFzUHJvcGVyU3R5bGluZykge1xuICAgICAgaXNzdWVzLnB1c2goJ0Zvcm0gc2hvdWxkIGZvbGxvdyByZXNwb25zaXZlIGRlc2lnbiBwYXR0ZXJucyB3aXRoIHByb3BlciBzdHlsaW5nJyk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHtcbiAgICAgIGlzQ29tcGxpYW50OiBpc3N1ZXMubGVuZ3RoID09PSAwLFxuICAgICAgaXNzdWVzXG4gICAgfTtcbiAgfVxufTtcblxuLyoqXG4gKiBRdWViZWMtU3BlY2lmaWMgVmFsaWRhdGlvbiBQYXR0ZXJuc1xuICogVmFsaWRhdGlvbiBwYXR0ZXJucyBzcGVjaWZpYyB0byBRdWViZWMgY29tcGxpYW5jZSByZXF1aXJlbWVudHNcbiAqL1xuZXhwb3J0IGNvbnN0IFF1ZWJlY1ZhbGlkYXRpb25QYXR0ZXJucyA9IHtcbiAgLyoqXG4gICAqIFF1ZWJlYyBuYW1lIHZhbGlkYXRpb24gc3VwcG9ydGluZyBGcmVuY2ggY2hhcmFjdGVyc1xuICAgKi9cbiAgcXVlYmVjTmFtZTogL15bYS16QS1aw4Atw79cXHMnLV0rJC8sXG5cbiAgLyoqXG4gICAqIENhbmFkaWFuIHBvc3RhbCBjb2RlIGZvcm1hdFxuICAgKi9cbiAgY2FuYWRpYW5Qb3N0YWxDb2RlOiAvXltBLVpdXFxkW0EtWl1cXHM/XFxkW0EtWl1cXGQkLyxcblxuICAvKipcbiAgICogTm9ydGggQW1lcmljYW4gcGhvbmUgbnVtYmVyIGZvcm1hdFxuICAgKi9cbiAgbm9ydGhBbWVyaWNhblBob25lOiAvXihcXCsxXFxzPyk/KFxcKFxcZHszfVxcKXxcXGR7M30pW1xccy4tXT9cXGR7M31bXFxzLi1dP1xcZHs0fSQvLFxuXG4gIC8qKlxuICAgKiBRdWViZWMgY2l0eSBuYW1lIHZhbGlkYXRpb25cbiAgICovXG4gIHF1ZWJlY0NpdHk6IC9eW2EtekEtWsOALcO/XFxzJy1dKyQvXG59O1xuXG4vKipcbiAqIEZvcm0gVmFsaWRhdGlvbiBTdGFuZGFyZHMgRW5mb3JjZW1lbnRcbiAqIEZ1bmN0aW9ucyB0byBlbnN1cmUgZm9ybXMgbWVldCBhbGwgdmFsaWRhdGlvbiByZXF1aXJlbWVudHNcbiAqL1xuZXhwb3J0IGNvbnN0IEZvcm1WYWxpZGF0aW9uU3RhbmRhcmRzID0ge1xuICAvKipcbiAgICogVmFsaWRhdGUgdGhhdCBhIGZvcm0gc2NoZW1hIG1lZXRzIGFsbCByZXF1aXJlbWVudHNcbiAgICovXG4gIHZhbGlkYXRlRm9ybVNjaGVtYTogKHNjaGVtYTogUmVjb3JkPHN0cmluZywgei5ab2RUeXBlPiwgZm9ybU5hbWU6IHN0cmluZyk6IHtcbiAgICBpc0NvbXBsaWFudDogYm9vbGVhbjtcbiAgICBpc3N1ZXM6IHN0cmluZ1tdO1xuICAgIHJlY29tbWVuZGF0aW9uczogc3RyaW5nW107XG4gIH0gPT4ge1xuICAgIGNvbnN0IGlzc3Vlczogc3RyaW5nW10gPSBbXTtcbiAgICBjb25zdCByZWNvbW1lbmRhdGlvbnM6IHN0cmluZ1tdID0gW107XG5cbiAgICAvLyBDaGVjayBlYWNoIGZpZWxkIGluIHRoZSBzY2hlbWFcbiAgICBPYmplY3QuZW50cmllcyhzY2hlbWEpLmZvckVhY2goKFtmaWVsZE5hbWUsIGZpZWxkU2NoZW1hXSkgPT4ge1xuICAgICAgY29uc3QgZmllbGRUeXBlID0gZGV0ZWN0RmllbGRUeXBlKGZpZWxkTmFtZSk7XG4gICAgICBjb25zdCBjb21wbGlhbmNlID0gVmFsaWRhdGlvblF1YWxpdHlDaGVja2Vycy5jaGVja1NjaGVtYUNvbXBsaWFuY2UoZmllbGRTY2hlbWEsIGZpZWxkVHlwZSk7XG4gICAgICBcbiAgICAgIGlmICghY29tcGxpYW5jZS5pc0NvbXBsaWFudCkge1xuICAgICAgICBpc3N1ZXMucHVzaChgRmllbGQgJyR7ZmllbGROYW1lfSc6ICR7Y29tcGxpYW5jZS5pc3N1ZXMuam9pbignLCAnKX1gKTtcbiAgICAgIH1cblxuICAgICAgLy8gQWRkIHJlY29tbWVuZGF0aW9ucyBiYXNlZCBvbiBmaWVsZCB0eXBlXG4gICAgICBpZiAoZmllbGRUeXBlID09PSAnZW1haWwnICYmICFmaWVsZE5hbWUuaW5jbHVkZXMoJ2NvbmZpcm0nKSkge1xuICAgICAgICByZWNvbW1lbmRhdGlvbnMucHVzaChgQ29uc2lkZXIgYWRkaW5nIGVtYWlsIGNvbmZpcm1hdGlvbiBmaWVsZCBmb3IgJHtmaWVsZE5hbWV9IGluIHNlY3VyaXR5LXNlbnNpdGl2ZSBmb3Jtc2ApO1xuICAgICAgfVxuICAgICAgaWYgKGZpZWxkVHlwZSA9PT0gJ3Bhc3N3b3JkJykge1xuICAgICAgICByZWNvbW1lbmRhdGlvbnMucHVzaChgRW5zdXJlICR7ZmllbGROYW1lfSBoYXMgcHJvcGVyIHN0cmVuZ3RoIGluZGljYXRvcnMgaW4gdGhlIFVJYCk7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICByZXR1cm4ge1xuICAgICAgaXNDb21wbGlhbnQ6IGlzc3Vlcy5sZW5ndGggPT09IDAsXG4gICAgICBpc3N1ZXMsXG4gICAgICByZWNvbW1lbmRhdGlvbnNcbiAgICB9O1xuICB9LFxuXG4gIC8qKlxuICAgKiBHZW5lcmF0ZSB2YWxpZGF0aW9uIHJlcG9ydCBmb3IgZGV2ZWxvcG1lbnQgdGVhbVxuICAgKi9cbiAgZ2VuZXJhdGVWYWxpZGF0aW9uUmVwb3J0OiAoZm9ybUZpbGVzOiBzdHJpbmdbXSk6IHtcbiAgICBjb21wbGlhbnRGb3Jtczogc3RyaW5nW107XG4gICAgbm9uQ29tcGxpYW50Rm9ybXM6IEFycmF5PHsgZmlsZTogc3RyaW5nOyBpc3N1ZXM6IHN0cmluZ1tdIH0+O1xuICAgIHRvdGFsRm9ybXM6IG51bWJlcjtcbiAgICBjb21wbGlhbmNlUGVyY2VudGFnZTogbnVtYmVyO1xuICB9ID0+IHtcbiAgICBjb25zdCBjb21wbGlhbnRGb3Jtczogc3RyaW5nW10gPSBbXTtcbiAgICBjb25zdCBub25Db21wbGlhbnRGb3JtczogQXJyYXk8eyBmaWxlOiBzdHJpbmc7IGlzc3Vlczogc3RyaW5nW10gfT4gPSBbXTtcblxuICAgIC8vIEZvciBkZW1vIHB1cnBvc2VzLCBhc3N1bWUgYWxsIGxpc3RlZCBmb3JtcyBhcmUgY29tcGxpYW50XG4gICAgLy8gSW4gcmVhbCBpbXBsZW1lbnRhdGlvbiwgdGhpcyB3b3VsZCBhbmFseXplIGFjdHVhbCBmb3JtIGZpbGVzXG4gICAgZm9ybUZpbGVzLmZvckVhY2goZmlsZSA9PiB7XG4gICAgICBjb21wbGlhbnRGb3Jtcy5wdXNoKGZpbGUpO1xuICAgIH0pO1xuXG4gICAgcmV0dXJuIHtcbiAgICAgIGNvbXBsaWFudEZvcm1zLFxuICAgICAgbm9uQ29tcGxpYW50Rm9ybXMsXG4gICAgICB0b3RhbEZvcm1zOiBmb3JtRmlsZXMubGVuZ3RoLFxuICAgICAgY29tcGxpYW5jZVBlcmNlbnRhZ2U6IChjb21wbGlhbnRGb3Jtcy5sZW5ndGggLyBmb3JtRmlsZXMubGVuZ3RoKSAqIDEwMFxuICAgIH07XG4gIH1cbn07XG5cbi8qKlxuICogSGVscGVyIGZ1bmN0aW9uIHRvIGRldGVjdCBmaWVsZCB0eXBlIGZyb20gZmllbGQgbmFtZVxuICovXG5mdW5jdGlvbiBkZXRlY3RGaWVsZFR5cGUoZmllbGROYW1lOiBzdHJpbmcpOiBzdHJpbmcge1xuICBjb25zdCBuYW1lID0gZmllbGROYW1lLnRvTG93ZXJDYXNlKCk7XG4gIFxuICBpZiAobmFtZS5pbmNsdWRlcygnZW1haWwnKSkgcmV0dXJuICdlbWFpbCc7XG4gIGlmIChuYW1lLmluY2x1ZGVzKCdwaG9uZScpIHx8IG5hbWUuaW5jbHVkZXMoJ3RlbGVwaG9uZScpKSByZXR1cm4gJ3Bob25lJztcbiAgaWYgKG5hbWUuaW5jbHVkZXMoJ3Bvc3RhbCcpIHx8IG5hbWUuaW5jbHVkZXMoJ3ppcGNvZGUnKSkgcmV0dXJuICdwb3N0YWwnO1xuICBpZiAobmFtZS5pbmNsdWRlcygnYW1vdW50JykgfHwgbmFtZS5pbmNsdWRlcygncHJpY2UnKSB8fCBuYW1lLmluY2x1ZGVzKCdjb3N0JykpIHJldHVybiAnYW1vdW50JztcbiAgaWYgKG5hbWUuaW5jbHVkZXMoJ3RpbWUnKSB8fCBuYW1lLmluY2x1ZGVzKCdob3VyJykpIHJldHVybiAndGltZSc7XG4gIGlmIChuYW1lLmluY2x1ZGVzKCdwYXNzd29yZCcpIHx8IG5hbWUuaW5jbHVkZXMoJ3B3ZCcpKSByZXR1cm4gJ3Bhc3N3b3JkJztcbiAgaWYgKG5hbWUuaW5jbHVkZXMoJ25hbWUnKSB8fCBuYW1lLmluY2x1ZGVzKCdub20nKSkgcmV0dXJuICduYW1lJztcbiAgaWYgKG5hbWUuaW5jbHVkZXMoJ2Rlc2NyaXB0aW9uJykgfHwgbmFtZS5pbmNsdWRlcygnbm90ZScpKSByZXR1cm4gJ2Rlc2NyaXB0aW9uJztcbiAgaWYgKG5hbWUuaW5jbHVkZXMoJ3RpdGxlJykgfHwgbmFtZS5pbmNsdWRlcygndGl0cmUnKSkgcmV0dXJuICd0aXRsZSc7XG4gIGlmIChuYW1lLmluY2x1ZGVzKCdkYXRlJykpIHJldHVybiAnZGF0ZSc7XG4gIGlmIChuYW1lLmluY2x1ZGVzKCdzZWxlY3QnKSB8fCBuYW1lLmluY2x1ZGVzKCdjaG9pY2UnKSB8fCBuYW1lLmluY2x1ZGVzKCdvcHRpb24nKSkgcmV0dXJuICdzZWxlY3Rpb24nO1xuICBcbiAgcmV0dXJuICd0ZXh0Jztcbn1cblxuLyoqXG4gKiBSdW50aW1lIHZhbGlkYXRpb24gY2hlY2tlciBmb3IgZGV2ZWxvcG1lbnRcbiAqIFVzZSBpbiBkZXZlbG9wbWVudCB0byBlbnN1cmUgbmV3IGZvcm1zIGZvbGxvdyBzdGFuZGFyZHNcbiAqL1xuZXhwb3J0IGNvbnN0IERldlZhbGlkYXRpb25DaGVja2VyID0ge1xuICAvKipcbiAgICogQ2hlY2sgaWYgYSBmb3JtIGZvbGxvd3MgYWxsIHZhbGlkYXRpb24gc3RhbmRhcmRzXG4gICAqIENhbGwgdGhpcyBkdXJpbmcgZGV2ZWxvcG1lbnQgdG8gdmFsaWRhdGUgZm9ybSBjb21wbGlhbmNlXG4gICAqL1xuICBjaGVja0Zvcm1Db21wbGlhbmNlOiAoXG4gICAgZm9ybVNjaGVtYTogUmVjb3JkPHN0cmluZywgei5ab2RUeXBlPixcbiAgICBmb3JtTmFtZTogc3RyaW5nXG4gICk6IHZvaWQgPT4ge1xuICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViA9PT0gJ2RldmVsb3BtZW50Jykge1xuICAgICAgY29uc3QgdmFsaWRhdGlvbiA9IEZvcm1WYWxpZGF0aW9uU3RhbmRhcmRzLnZhbGlkYXRlRm9ybVNjaGVtYShmb3JtU2NoZW1hLCBmb3JtTmFtZSk7XG4gICAgICBcbiAgICAgIGlmICghdmFsaWRhdGlvbi5pc0NvbXBsaWFudCkge1xuICAgICAgICBjb25zb2xlLndhcm4oYOKaoO+4jyAgRm9ybSB2YWxpZGF0aW9uIGNvbXBsaWFuY2UgaXNzdWVzIGluICR7Zm9ybU5hbWV9OmApO1xuICAgICAgICB2YWxpZGF0aW9uLmlzc3Vlcy5mb3JFYWNoKGlzc3VlID0+IHtcbiAgICAgICAgICBjb25zb2xlLndhcm4oYCAgLSAke2lzc3VlfWApO1xuICAgICAgICB9KTtcbiAgICAgIH1cblxuICAgICAgaWYgKHZhbGlkYXRpb24ucmVjb21tZW5kYXRpb25zLmxlbmd0aCA+IDApIHtcbiAgICAgICAgY29uc29sZS5pbmZvKGDwn5KhIEZvcm0gdmFsaWRhdGlvbiByZWNvbW1lbmRhdGlvbnMgZm9yICR7Zm9ybU5hbWV9OmApO1xuICAgICAgICB2YWxpZGF0aW9uLnJlY29tbWVuZGF0aW9ucy5mb3JFYWNoKHJlYyA9PiB7XG4gICAgICAgICAgY29uc29sZS5pbmZvKGAgIC0gJHtyZWN9YCk7XG4gICAgICAgIH0pO1xuICAgICAgfVxuXG4gICAgICBpZiAodmFsaWRhdGlvbi5pc0NvbXBsaWFudCkge1xuICAgICAgICBjb25zb2xlLmxvZyhg4pyFIEZvcm0gJHtmb3JtTmFtZX0gbWVldHMgYWxsIHZhbGlkYXRpb24gc3RhbmRhcmRzYCk7XG4gICAgICB9XG4gICAgfVxuICB9XG59OyJdLCJ2ZXJzaW9uIjozfQ==