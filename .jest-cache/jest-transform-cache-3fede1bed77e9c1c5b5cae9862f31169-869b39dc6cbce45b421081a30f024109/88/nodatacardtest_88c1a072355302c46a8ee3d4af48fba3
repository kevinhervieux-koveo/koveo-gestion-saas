a216f4c7eea8ab2a85060356ba5b986c
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const jsx_runtime_1 = require("react/jsx-runtime");
const globals_1 = require("@jest/globals");
const react_1 = require("@testing-library/react");
const lucide_react_1 = require("lucide-react");
const no_data_card_1 = require("@/components/ui/no-data-card");
const use_language_1 = require("@/hooks/use-language");
// Mock component for testing
const TestWrapper = ({ children }) => ((0, jsx_runtime_1.jsx)(use_language_1.LanguageProvider, { children: children }));
(0, globals_1.describe)('NoDataCard Component', () => {
    (0, globals_1.beforeEach)(() => {
        // Clear any existing DOM
        document.body.innerHTML = '';
    });
    (0, globals_1.describe)('Basic Functionality', () => {
        (0, globals_1.it)('should render with required props', () => {
            (0, react_1.render)((0, jsx_runtime_1.jsx)(TestWrapper, { children: (0, jsx_runtime_1.jsx)(no_data_card_1.NoDataCard, { icon: lucide_react_1.Building, titleKey: "noBuildingsFound", descriptionKey: "noBuildingsAdminMessage", testId: "test-no-data" }) }));
            (0, globals_1.expect)(react_1.screen.getByTestId('test-no-data')).toBeInTheDocument();
            (0, globals_1.expect)(react_1.screen.getByTestId('test-no-data-title')).toBeInTheDocument();
            (0, globals_1.expect)(react_1.screen.getByTestId('test-no-data-description')).toBeInTheDocument();
        });
        (0, globals_1.it)('should render with different icons', () => {
            const { rerender } = (0, react_1.render)((0, jsx_runtime_1.jsx)(TestWrapper, { children: (0, jsx_runtime_1.jsx)(no_data_card_1.NoDataCard, { icon: lucide_react_1.Building, titleKey: "noBuildingsFound", descriptionKey: "noBuildingsAdminMessage", testId: "test-building" }) }));
            (0, globals_1.expect)(react_1.screen.getByTestId('test-building')).toBeInTheDocument();
            rerender((0, jsx_runtime_1.jsx)(TestWrapper, { children: (0, jsx_runtime_1.jsx)(no_data_card_1.NoDataCard, { icon: lucide_react_1.Home, titleKey: "noResidencesFound", descriptionKey: "notAssignedResidences", testId: "test-home" }) }));
            (0, globals_1.expect)(react_1.screen.getByTestId('test-home')).toBeInTheDocument();
        });
        (0, globals_1.it)('should render with badge when badgeKey is provided', () => {
            (0, react_1.render)((0, jsx_runtime_1.jsx)(TestWrapper, { children: (0, jsx_runtime_1.jsx)(no_data_card_1.NoDataCard, { icon: lucide_react_1.Building, titleKey: "noBuildingsFound", descriptionKey: "noBuildingsAdminMessage", badgeKey: "noData", testId: "test-with-badge" }) }));
            (0, globals_1.expect)(react_1.screen.getByTestId('test-with-badge-badge')).toBeInTheDocument();
        });
        (0, globals_1.it)('should not render badge when badgeKey is not provided', () => {
            (0, react_1.render)((0, jsx_runtime_1.jsx)(TestWrapper, { children: (0, jsx_runtime_1.jsx)(no_data_card_1.NoDataCard, { icon: lucide_react_1.Building, titleKey: "noBuildingsFound", descriptionKey: "noBuildingsAdminMessage", testId: "test-no-badge" }) }));
            (0, globals_1.expect)(react_1.screen.queryByTestId('test-no-badge-badge')).not.toBeInTheDocument();
        });
    });
    (0, globals_1.describe)('Translation Coverage', () => {
        (0, globals_1.it)('should render French translations correctly', () => {
            // Note: In a real test, we'd mock the language context to return French
            (0, react_1.render)((0, jsx_runtime_1.jsx)(TestWrapper, { children: (0, jsx_runtime_1.jsx)(no_data_card_1.NoDataCard, { icon: lucide_react_1.Building, titleKey: "noBuildingsFound", descriptionKey: "noBuildingsAdminMessage", badgeKey: "noData", testId: "test-french" }) }));
            const title = react_1.screen.getByTestId('test-french-title');
            const description = react_1.screen.getByTestId('test-french-description');
            const badge = react_1.screen.getByTestId('test-french-badge');
            // These should contain the actual translated text when language is set
            (0, globals_1.expect)(title).toBeInTheDocument();
            (0, globals_1.expect)(description).toBeInTheDocument();
            (0, globals_1.expect)(badge).toBeInTheDocument();
        });
        (0, globals_1.it)('should handle all common no data translation keys', () => {
            const testCases = [
                {
                    titleKey: 'noBuildingsFound',
                    descriptionKey: 'noBuildingsAdminMessage',
                    testId: 'buildings-test',
                },
                {
                    titleKey: 'noResidencesFound',
                    descriptionKey: 'noResidencesFoundOrg',
                    testId: 'residences-test',
                },
                {
                    titleKey: 'noDataAvailable',
                    descriptionKey: 'noBookingsFoundMessage',
                    testId: 'bookings-test',
                },
                {
                    titleKey: 'selectCommonSpace',
                    descriptionKey: 'selectCommonSpaceMessage',
                    testId: 'select-space-test',
                },
            ];
            testCases.forEach(({ titleKey, descriptionKey, testId }) => {
                (0, react_1.render)((0, jsx_runtime_1.jsx)(TestWrapper, { children: (0, jsx_runtime_1.jsx)(no_data_card_1.NoDataCard, { icon: lucide_react_1.Building, titleKey: titleKey, descriptionKey: descriptionKey, testId: testId }) }));
                (0, globals_1.expect)(react_1.screen.getByTestId(testId)).toBeInTheDocument();
                (0, globals_1.expect)(react_1.screen.getByTestId(`${testId}-title`)).toBeInTheDocument();
                (0, globals_1.expect)(react_1.screen.getByTestId(`${testId}-description`)).toBeInTheDocument();
                // Clean up for next test
                document.body.innerHTML = '';
            });
        });
    });
    (0, globals_1.describe)('Customization Options', () => {
        (0, globals_1.it)('should apply custom CSS classes', () => {
            (0, react_1.render)((0, jsx_runtime_1.jsx)(TestWrapper, { children: (0, jsx_runtime_1.jsx)(no_data_card_1.NoDataCard, { icon: lucide_react_1.Building, titleKey: "noBuildingsFound", descriptionKey: "noBuildingsAdminMessage", className: "custom-card-class", contentClassName: "custom-content-class", testId: "test-custom-classes" }) }));
            const card = react_1.screen.getByTestId('test-custom-classes');
            (0, globals_1.expect)(card).toHaveClass('custom-card-class');
        });
        (0, globals_1.it)('should render custom children', () => {
            (0, react_1.render)((0, jsx_runtime_1.jsx)(TestWrapper, { children: (0, jsx_runtime_1.jsx)(no_data_card_1.NoDataCard, { icon: lucide_react_1.Building, titleKey: "noBuildingsFound", descriptionKey: "noBuildingsAdminMessage", testId: "test-with-children", children: (0, jsx_runtime_1.jsx)("div", { "data-testid": "custom-child", children: "Custom content" }) }) }));
            (0, globals_1.expect)(react_1.screen.getByTestId('custom-child')).toBeInTheDocument();
            (0, globals_1.expect)(react_1.screen.getByText('Custom content')).toBeInTheDocument();
        });
        (0, globals_1.it)('should handle different icon sizes', () => {
            const { rerender } = (0, react_1.render)((0, jsx_runtime_1.jsx)(TestWrapper, { children: (0, jsx_runtime_1.jsx)(no_data_card_1.NoDataCard, { icon: lucide_react_1.Building, titleKey: "noBuildingsFound", descriptionKey: "noBuildingsAdminMessage", iconSize: 12, testId: "test-small-icon" }) }));
            (0, globals_1.expect)(react_1.screen.getByTestId('test-small-icon')).toBeInTheDocument();
            rerender((0, jsx_runtime_1.jsx)(TestWrapper, { children: (0, jsx_runtime_1.jsx)(no_data_card_1.NoDataCard, { icon: lucide_react_1.Building, titleKey: "noBuildingsFound", descriptionKey: "noBuildingsAdminMessage", iconSize: 20, testId: "test-large-icon" }) }));
            (0, globals_1.expect)(react_1.screen.getByTestId('test-large-icon')).toBeInTheDocument();
        });
    });
    (0, globals_1.describe)('Accessibility', () => {
        (0, globals_1.it)('should have proper test IDs for screen readers', () => {
            (0, react_1.render)((0, jsx_runtime_1.jsx)(TestWrapper, { children: (0, jsx_runtime_1.jsx)(no_data_card_1.NoDataCard, { icon: lucide_react_1.TrendingUp, titleKey: "noDataAvailable", descriptionKey: "noBookingsFoundMessage", badgeKey: "noData", testId: "accessibility-test" }) }));
            (0, globals_1.expect)(react_1.screen.getByTestId('accessibility-test')).toBeInTheDocument();
            (0, globals_1.expect)(react_1.screen.getByTestId('accessibility-test-title')).toBeInTheDocument();
            (0, globals_1.expect)(react_1.screen.getByTestId('accessibility-test-description')).toBeInTheDocument();
            (0, globals_1.expect)(react_1.screen.getByTestId('accessibility-test-badge')).toBeInTheDocument();
        });
        (0, globals_1.it)('should maintain semantic structure', () => {
            (0, react_1.render)((0, jsx_runtime_1.jsx)(TestWrapper, { children: (0, jsx_runtime_1.jsx)(no_data_card_1.NoDataCard, { icon: lucide_react_1.Building, titleKey: "noBuildingsFound", descriptionKey: "noBuildingsAdminMessage", testId: "semantic-test" }) }));
            const title = react_1.screen.getByTestId('semantic-test-title');
            const description = react_1.screen.getByTestId('semantic-test-description');
            (0, globals_1.expect)(title.tagName.toLowerCase()).toBe('h3');
            (0, globals_1.expect)(description.tagName.toLowerCase()).toBe('p');
        });
    });
    (0, globals_1.describe)('Error Handling', () => {
        (0, globals_1.it)('should handle missing translation keys gracefully', () => {
            (0, react_1.render)((0, jsx_runtime_1.jsx)(TestWrapper, { children: (0, jsx_runtime_1.jsx)(no_data_card_1.NoDataCard, { icon: lucide_react_1.Building, titleKey: "nonExistentKey", as: true, any: true, descriptionKey: "anotherNonExistentKey", as: true, any: true, testId: "error-handling-test" }) }));
            (0, globals_1.expect)(react_1.screen.getByTestId('error-handling-test')).toBeInTheDocument();
            (0, globals_1.expect)(react_1.screen.getByTestId('error-handling-test-title')).toBeInTheDocument();
            (0, globals_1.expect)(react_1.screen.getByTestId('error-handling-test-description')).toBeInTheDocument();
        });
    });
    (0, globals_1.describe)('Common Use Cases', () => {
        (0, globals_1.it)('should render buildings no data scenario correctly', () => {
            (0, react_1.render)((0, jsx_runtime_1.jsx)(TestWrapper, { children: (0, jsx_runtime_1.jsx)(no_data_card_1.NoDataCard, { icon: lucide_react_1.Building, titleKey: "noBuildingsFound", descriptionKey: "noBuildingsAdminMessage", badgeKey: "noData", testId: "buildings-scenario" }) }));
            (0, globals_1.expect)(react_1.screen.getByTestId('buildings-scenario')).toBeInTheDocument();
        });
        (0, globals_1.it)('should render residences no data scenario correctly', () => {
            (0, react_1.render)((0, jsx_runtime_1.jsx)(TestWrapper, { children: (0, jsx_runtime_1.jsx)(no_data_card_1.NoDataCard, { icon: lucide_react_1.Home, titleKey: "noResidencesFound", descriptionKey: "notAssignedResidences", testId: "residences-scenario" }) }));
            (0, globals_1.expect)(react_1.screen.getByTestId('residences-scenario')).toBeInTheDocument();
        });
        (0, globals_1.it)('should render common spaces stats no data scenario correctly', () => {
            (0, react_1.render)((0, jsx_runtime_1.jsx)(TestWrapper, { children: (0, jsx_runtime_1.jsx)(no_data_card_1.NoDataCard, { icon: lucide_react_1.TrendingUp, titleKey: "noDataAvailable", descriptionKey: "noBookingsFoundMessage", testId: "stats-scenario", iconSize: 12 }) }));
            (0, globals_1.expect)(react_1.screen.getByTestId('stats-scenario')).toBeInTheDocument();
        });
    });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiL2hvbWUvcnVubmVyL3dvcmtzcGFjZS90ZXN0cy91bml0L25vLWRhdGEtY2FyZC50ZXN0LnRzeCIsIm1hcHBpbmdzIjoiOzs7QUFDQSwyQ0FBaUU7QUFEakUsa0RBQXdEO0FBRXhELCtDQUEwRDtBQUMxRCwrREFBMEQ7QUFDMUQsdURBQXdEO0FBRXhELDZCQUE2QjtBQUM3QixNQUFNLFdBQVcsR0FBNEMsQ0FBQyxFQUFFLFFBQVEsRUFBRSxFQUFFLEVBQUUsQ0FBQyxDQUM3RSx1QkFBQywrQkFBZ0IsY0FBRSxRQUFRLEdBQW9CLENBQ2hELENBQUM7QUFFRixJQUFBLGtCQUFRLEVBQUMsc0JBQXNCLEVBQUUsR0FBRyxFQUFFO0lBQ3BDLElBQUEsb0JBQVUsRUFBQyxHQUFHLEVBQUU7UUFDZCx5QkFBeUI7UUFDekIsUUFBUSxDQUFDLElBQUksQ0FBQyxTQUFTLEdBQUcsRUFBRSxDQUFDO0lBQy9CLENBQUMsQ0FBQyxDQUFDO0lBRUgsSUFBQSxrQkFBUSxFQUFDLHFCQUFxQixFQUFFLEdBQUcsRUFBRTtRQUNuQyxJQUFBLFlBQUUsRUFBQyxtQ0FBbUMsRUFBRSxHQUFHLEVBQUU7WUFDM0MsSUFBQSxjQUFNLEVBQ0osdUJBQUMsV0FBVyxjQUNWLHVCQUFDLHlCQUFVLElBQ1QsSUFBSSxFQUFFLHVCQUFRLEVBQ2QsUUFBUSxFQUFDLGtCQUFrQixFQUMzQixjQUFjLEVBQUMseUJBQXlCLEVBQ3hDLE1BQU0sRUFBQyxjQUFjLEdBQ3JCLEdBQ1UsQ0FDZixDQUFDO1lBRUYsSUFBQSxnQkFBTSxFQUFDLGNBQU0sQ0FBQyxXQUFXLENBQUMsY0FBYyxDQUFDLENBQUMsQ0FBQyxpQkFBaUIsRUFBRSxDQUFDO1lBQy9ELElBQUEsZ0JBQU0sRUFBQyxjQUFNLENBQUMsV0FBVyxDQUFDLG9CQUFvQixDQUFDLENBQUMsQ0FBQyxpQkFBaUIsRUFBRSxDQUFDO1lBQ3JFLElBQUEsZ0JBQU0sRUFBQyxjQUFNLENBQUMsV0FBVyxDQUFDLDBCQUEwQixDQUFDLENBQUMsQ0FBQyxpQkFBaUIsRUFBRSxDQUFDO1FB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b0IsR0FDM0IsR0FDVSxDQUNmLENBQUM7WUFFRixJQUFBLGdCQUFNLEVBQUMsY0FBTSxDQUFDLFdBQVcsQ0FBQyxvQkFBb0IsQ0FBQyxDQUFDLENBQUMsaUJBQWlCLEVBQUUsQ0FBQztRQUN2RSxDQUFDLENBQUMsQ0FBQztRQUVILElBQUEsWUFBRSxFQUFDLHFEQUFxRCxFQUFFLEdBQUcsRUFBRTtZQUM3RCxJQUFBLGNBQU0sRUFDSix1QkFBQyxXQUFXLGNBQ1YsdUJBQUMseUJBQVUsSUFDVCxJQUFJLEVBQUUsbUJBQUksRUFDVixRQUFRLEVBQUMsbUJBQW1CLEVBQzVCLGNBQWMsRUFBQyx1QkFBdUIsRUFDdEMsTUFBTSxFQUFDLHFCQUFxQixHQUM1QixHQUNVLENBQ2YsQ0FBQztZQUVGLElBQUEsZ0JBQU0sRUFBQyxjQUFNLENBQUMsV0FBVyxDQUFDLHFCQUFxQixDQUFDLENBQUMsQ0FBQyxpQkFBaUIsRUFBRSxDQUFDO1FBQ3hFLENBQUMsQ0FBQyxDQUFDO1FBRUgsSUFBQSxZQUFFLEVBQUMsOERBQThELEVBQUUsR0FBRyxFQUFFO1lBQ3RFLElBQUEsY0FBTSxFQUNKLHVCQUFDLFdBQVcsY0FDVix1QkFBQyx5QkFBVSxJQUNULElBQUksRUFBRSx5QkFBVSxFQUNoQixRQUFRLEVBQUMsaUJBQWlCLEVBQzFCLGNBQWMsRUFBQyx3QkFBd0IsRUFDdkMsTUFBTSxFQUFDLGdCQUFnQixFQUN2QixRQUFRLEVBQUUsRUFBRSxHQUNaLEdBQ1UsQ0FDZixDQUFDO1lBRUYsSUFBQSxnQkFBTSxFQUFDLGNBQU0sQ0FBQyxXQUFXLENBQUMsZ0JBQWdCLENBQUMsQ0FBQyxDQUFDLGlCQUFpQixFQUFFLENBQUM7UUFDbkUsQ0FBQyxDQUFDLENBQUM7SUFDTCxDQUFDLENBQUMsQ0FBQztBQUNMLENBQUMsQ0FBQyxDQUFDIiwibmFtZXMiOltdLCJzb3VyY2VzIjpbIi9ob21lL3J1bm5lci93b3Jrc3BhY2UvdGVzdHMvdW5pdC9uby1kYXRhLWNhcmQudGVzdC50c3giXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgcmVuZGVyLCBzY3JlZW4gfSBmcm9tICdAdGVzdGluZy1saWJyYXJ5L3JlYWN0JztcbmltcG9ydCB7IGRlc2NyaWJlLCBpdCwgZXhwZWN0LCBiZWZvcmVFYWNoIH0gZnJvbSAnQGplc3QvZ2xvYmFscyc7XG5pbXBvcnQgeyBCdWlsZGluZywgSG9tZSwgVHJlbmRpbmdVcCB9IGZyb20gJ2x1Y2lkZS1yZWFjdCc7XG5pbXBvcnQgeyBOb0RhdGFDYXJkIH0gZnJvbSAnQC9jb21wb25lbnRzL3VpL25vLWRhdGEtY2FyZCc7XG5pbXBvcnQgeyBMYW5ndWFnZVByb3ZpZGVyIH0gZnJvbSAnQC9ob29rcy91c2UtbGFuZ3VhZ2UnO1xuXG4vLyBNb2NrIGNvbXBvbmVudCBmb3IgdGVzdGluZ1xuY29uc3QgVGVzdFdyYXBwZXI6IFJlYWN0LkZDPHsgY2hpbGRyZW46IFJlYWN0LlJlYWN0Tm9kZSB9PiA9ICh7IGNoaWxkcmVuIH0pID0+IChcbiAgPExhbmd1YWdlUHJvdmlkZXI+e2NoaWxkcmVufTwvTGFuZ3VhZ2VQcm92aWRlcj5cbik7XG5cbmRlc2NyaWJlKCdOb0RhdGFDYXJkIENvbXBvbmVudCcsICgpID0+IHtcbiAgYmVmb3JlRWFjaCgoKSA9PiB7XG4gICAgLy8gQ2xlYXIgYW55IGV4aXN0aW5nIERPTVxuICAgIGRvY3VtZW50LmJvZHkuaW5uZXJIVE1MID0gJyc7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdCYXNpYyBGdW5jdGlvbmFsaXR5JywgKCkgPT4ge1xuICAgIGl0KCdzaG91bGQgcmVuZGVyIHdpdGggcmVxdWlyZWQgcHJvcHMnLCAoKSA9PiB7XG4gICAgICByZW5kZXIoXG4gICAgICAgIDxUZXN0V3JhcHBlcj5cbiAgICAgICAgICA8Tm9EYXRhQ2FyZFxuICAgICAgICAgICAgaWNvbj17QnVpbGRpbmd9XG4gICAgICAgICAgICB0aXRsZUtleT1cIm5vQnVpbGRpbmdzRm91bmRcIlxuICAgICAgICAgICAgZGVzY3JpcHRpb25LZXk9XCJub0J1aWxkaW5nc0FkbWluTWVzc2FnZVwiXG4gICAgICAgICAgICB0ZXN0SWQ9XCJ0ZXN0LW5vLWRhdGFcIlxuICAgICAgICAgIC8+XG4gICAgICAgIDwvVGVzdFdyYXBwZXI+XG4gICAgICApO1xuXG4gICAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGVzdElkKCd0ZXN0LW5vLWRhdGEnKSkudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXN0SWQoJ3Rlc3Qtbm8tZGF0YS10aXRsZScpKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgICAgZXhwZWN0KHNjcmVlbi5nZXRCeVRlc3RJZCgndGVzdC1uby1kYXRhLWRlc2NyaXB0aW9uJykpLnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIHJlbmRlciB3aXRoIGRpZmZlcmVudCBpY29ucycsICgpID0+IHtcbiAgICAgIGNvbnN0IHsgcmVyZW5kZXIgfSA9IHJlbmRlcihcbiAgICAgICAgPFRlc3RXcmFwcGVyPlxuICAgICAgICAgIDxOb0RhdGFDYXJkXG4gICAgICAgICAgICBpY29uPXtCdWlsZGluZ31cbiAgICAgICAgICAgIHRpdGxlS2V5PVwibm9CdWlsZGluZ3NGb3VuZFwiXG4gICAgICAgICAgICBkZXNjcmlwdGlvbktleT1cIm5vQnVpbGRpbmdzQWRtaW5NZXNzYWdlXCJcbiAgICAgICAgICAgIHRlc3RJZD1cInRlc3QtYnVpbGRpbmdcIlxuICAgICAgICAgIC8+XG4gICAgICAgIDwvVGVzdFdyYXBwZXI+XG4gICAgICApO1xuXG4gICAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGVzdElkKCd0ZXN0LWJ1aWxkaW5nJykpLnRvQmVJblRoZURvY3VtZW50KCk7XG5cbiAgICAgIHJlcmVuZGVyKFxuICAgICAgICA8VGVzdFdyYXBwZXI+XG4gICAgICAgICAgPE5vRGF0YUNhcmRcbiAgICAgICAgICAgIGljb249e0hvbWV9XG4gICAgICAgICAgICB0aXRsZUtleT1cIm5vUmVzaWRlbmNlc0ZvdW5kXCJcbiAgICAgICAgICAgIGRlc2NyaXB0aW9uS2V5PVwibm90QXNzaWduZWRSZXNpZGVuY2VzXCJcbiAgICAgICAgICAgIHRlc3RJZD1cInRlc3QtaG9tZVwiXG4gICAgICAgICAgLz5cbiAgICAgICAgPC9UZXN0V3JhcHBlcj5cbiAgICAgICk7XG5cbiAgICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXN0SWQoJ3Rlc3QtaG9tZScpKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCByZW5kZXIgd2l0aCBiYWRnZSB3aGVuIGJhZGdlS2V5IGlzIHByb3ZpZGVkJywgKCkgPT4ge1xuICAgICAgcmVuZGVyKFxuICAgICAgICA8VGVzdFdyYXBwZXI+XG4gICAgICAgICAgPE5vRGF0YUNhcmRcbiAgICAgICAgICAgIGljb249e0J1aWxkaW5nfVxuICAgICAgICAgICAgdGl0bGVLZXk9XCJub0J1aWxkaW5nc0ZvdW5kXCJcbiAgICAgICAgICAgIGRlc2NyaXB0aW9uS2V5PVwibm9CdWlsZGluZ3NBZG1pbk1lc3NhZ2VcIlxuICAgICAgICAgICAgYmFkZ2VLZXk9XCJub0RhdGFcIlxuICAgICAgICAgICAgdGVzdElkPVwidGVzdC13aXRoLWJhZGdlXCJcbiAgICAgICAgICAvPlxuICAgICAgICA8L1Rlc3RXcmFwcGVyPlxuICAgICAgKTtcblxuICAgICAgZXhwZWN0KHNjcmVlbi5nZXRCeVRlc3RJZCgndGVzdC13aXRoLWJhZGdlLWJhZGdlJykpLnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIG5vdCByZW5kZXIgYmFkZ2Ugd2hlbiBiYWRnZUtleSBpcyBub3QgcHJvdmlkZWQnLCAoKSA9PiB7XG4gICAgICByZW5kZXIoXG4gICAgICAgIDxUZXN0V3JhcHBlcj5cbiAgICAgICAgICA8Tm9EYXRhQ2FyZFxuICAgICAgICAgICAgaWNvbj17QnVpbGRpbmd9XG4gICAgICAgICAgICB0aXRsZUtleT1cIm5vQnVpbGRpbmdzRm91bmRcIlxuICAgICAgICAgICAgZGVzY3JpcHRpb25LZXk9XCJub0J1aWxkaW5nc0FkbWluTWVzc2FnZVwiXG4gICAgICAgICAgICB0ZXN0SWQ9XCJ0ZXN0LW5vLWJhZGdlXCJcbiAgICAgICAgICAvPlxuICAgICAgICA8L1Rlc3RXcmFwcGVyPlxuICAgICAgKTtcblxuICAgICAgZXhwZWN0KHNjcmVlbi5xdWVyeUJ5VGVzdElkKCd0ZXN0LW5vLWJhZGdlLWJhZGdlJykpLm5vdC50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnVHJhbnNsYXRpb24gQ292ZXJhZ2UnLCAoKSA9PiB7XG4gICAgaXQoJ3Nob3VsZCByZW5kZXIgRnJlbmNoIHRyYW5zbGF0aW9ucyBjb3JyZWN0bHknLCAoKSA9PiB7XG4gICAgICAvLyBOb3RlOiBJbiBhIHJlYWwgdGVzdCwgd2UnZCBtb2NrIHRoZSBsYW5ndWFnZSBjb250ZXh0IHRvIHJldHVybiBGcmVuY2hcbiAgICAgIHJlbmRlcihcbiAgICAgICAgPFRlc3RXcmFwcGVyPlxuICAgICAgICAgIDxOb0RhdGFDYXJkXG4gICAgICAgICAgICBpY29uPXtCdWlsZGluZ31cbiAgICAgICAgICAgIHRpdGxlS2V5PVwibm9CdWlsZGluZ3NGb3VuZFwiXG4gICAgICAgICAgICBkZXNjcmlwdGlvbktleT1cIm5vQnVpbGRpbmdzQWRtaW5NZXNzYWdlXCJcbiAgICAgICAgICAgIGJhZGdlS2V5PVwibm9EYXRhXCJcbiAgICAgICAgICAgIHRlc3RJZD1cInRlc3QtZnJlbmNoXCJcbiAgICAgICAgICAvPlxuICAgICAgICA8L1Rlc3RXcmFwcGVyPlxuICAgICAgKTtcblxuICAgICAgY29uc3QgdGl0bGUgPSBzY3JlZW4uZ2V0QnlUZXN0SWQoJ3Rlc3QtZnJlbmNoLXRpdGxlJyk7XG4gICAgICBjb25zdCBkZXNjcmlwdGlvbiA9IHNjcmVlbi5nZXRCeVRlc3RJZCgndGVzdC1mcmVuY2gtZGVzY3JpcHRpb24nKTtcbiAgICAgIGNvbnN0IGJhZGdlID0gc2NyZWVuLmdldEJ5VGVzdElkKCd0ZXN0LWZyZW5jaC1iYWRnZScpO1xuXG4gICAgICAvLyBUaGVzZSBzaG91bGQgY29udGFpbiB0aGUgYWN0dWFsIHRyYW5zbGF0ZWQgdGV4dCB3aGVuIGxhbmd1YWdlIGlzIHNldFxuICAgICAgZXhwZWN0KHRpdGxlKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgICAgZXhwZWN0KGRlc2NyaXB0aW9uKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgICAgZXhwZWN0KGJhZGdlKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBoYW5kbGUgYWxsIGNvbW1vbiBubyBkYXRhIHRyYW5zbGF0aW9uIGtleXMnLCAoKSA9PiB7XG4gICAgICBjb25zdCB0ZXN0Q2FzZXMgPSBbXG4gICAgICAgIHtcbiAgICAgICAgICB0aXRsZUtleTogJ25vQnVpbGRpbmdzRm91bmQnLFxuICAgICAgICAgIGRlc2NyaXB0aW9uS2V5OiAnbm9CdWlsZGluZ3NBZG1pbk1lc3NhZ2UnLFxuICAgICAgICAgIHRlc3RJZDogJ2J1aWxkaW5ncy10ZXN0JyxcbiAgICAgICAgfSxcbiAgICAgICAge1xuICAgICAgICAgIHRpdGxlS2V5OiAnbm9SZXNpZGVuY2VzRm91bmQnLFxuICAgICAgICAgIGRlc2NyaXB0aW9uS2V5OiAnbm9SZXNpZGVuY2VzRm91bmRPcmcnLFxuICAgICAgICAgIHRlc3RJZDogJ3Jlc2lkZW5jZXMtdGVzdCcsXG4gICAgICAgIH0sXG4gICAgICAgIHtcbiAgICAgICAgICB0aXRsZUtleTogJ25vRGF0YUF2YWlsYWJsZScsXG4gICAgICAgICAgZGVzY3JpcHRpb25LZXk6ICdub0Jvb2tpbmdzRm91bmRNZXNzYWdlJyxcbiAgICAgICAgICB0ZXN0SWQ6ICdib29raW5ncy10ZXN0JyxcbiAgICAgICAgfSxcbiAgICAgICAge1xuICAgICAgICAgIHRpdGxlS2V5OiAnc2VsZWN0Q29tbW9uU3BhY2UnLFxuICAgICAgICAgIGRlc2NyaXB0aW9uS2V5OiAnc2VsZWN0Q29tbW9uU3BhY2VNZXNzYWdlJyxcbiAgICAgICAgICB0ZXN0SWQ6ICdzZWxlY3Qtc3BhY2UtdGVzdCcsXG4gICAgICAgIH0sXG4gICAgICBdO1xuXG4gICAgICB0ZXN0Q2FzZXMuZm9yRWFjaCgoeyB0aXRsZUtleSwgZGVzY3JpcHRpb25LZXksIHRlc3RJZCB9KSA9PiB7XG4gICAgICAgIHJlbmRlcihcbiAgICAgICAgICA8VGVzdFdyYXBwZXI+XG4gICAgICAgICAgICA8Tm9EYXRhQ2FyZFxuICAgICAgICAgICAgICBpY29uPXtCdWlsZGluZ31cbiAgICAgICAgICAgICAgdGl0bGVLZXk9e3RpdGxlS2V5fVxuICAgICAgICAgICAgICBkZXNjcmlwdGlvbktleT17ZGVzY3JpcHRpb25LZXl9XG4gICAgICAgICAgICAgIHRlc3RJZD17dGVzdElkfVxuICAgICAgICAgICAgLz5cbiAgICAgICAgICA8L1Rlc3RXcmFwcGVyPlxuICAgICAgICApO1xuXG4gICAgICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXN0SWQodGVzdElkKSkudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgICAgICAgZXhwZWN0KHNjcmVlbi5nZXRCeVRlc3RJZChgJHt0ZXN0SWR9LXRpdGxlYCkpLnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXN0SWQoYCR7dGVzdElkfS1kZXNjcmlwdGlvbmApKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuXG4gICAgICAgIC8vIENsZWFuIHVwIGZvciBuZXh0IHRlc3RcbiAgICAgICAgZG9jdW1lbnQuYm9keS5pbm5lckhUTUwgPSAnJztcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnQ3VzdG9taXphdGlvbiBPcHRpb25zJywgKCkgPT4ge1xuICAgIGl0KCdzaG91bGQgYXBwbHkgY3VzdG9tIENTUyBjbGFzc2VzJywgKCkgPT4ge1xuICAgICAgcmVuZGVyKFxuICAgICAgICA8VGVzdFdyYXBwZXI+XG4gICAgICAgICAgPE5vRGF0YUNhcmRcbiAgICAgICAgICAgIGljb249e0J1aWxkaW5nfVxuICAgICAgICAgICAgdGl0bGVLZXk9XCJub0J1aWxkaW5nc0ZvdW5kXCJcbiAgICAgICAgICAgIGRlc2NyaXB0aW9uS2V5PVwibm9CdWlsZGluZ3NBZG1pbk1lc3NhZ2VcIlxuICAgICAgICAgICAgY2xhc3NOYW1lPVwiY3VzdG9tLWNhcmQtY2xhc3NcIlxuICAgICAgICAgICAgY29udGVudENsYXNzTmFtZT1cImN1c3RvbS1jb250ZW50LWNsYXNzXCJcbiAgICAgICAgICAgIHRlc3RJZD1cInRlc3QtY3VzdG9tLWNsYXNzZXNcIlxuICAgICAgICAgIC8+XG4gICAgICAgIDwvVGVzdFdyYXBwZXI+XG4gICAgICApO1xuXG4gICAgICBjb25zdCBjYXJkID0gc2NyZWVuLmdldEJ5VGVzdElkKCd0ZXN0LWN1c3RvbS1jbGFzc2VzJyk7XG4gICAgICBleHBlY3QoY2FyZCkudG9IYXZlQ2xhc3MoJ2N1c3RvbS1jYXJkLWNsYXNzJyk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIHJlbmRlciBjdXN0b20gY2hpbGRyZW4nLCAoKSA9PiB7XG4gICAgICByZW5kZXIoXG4gICAgICAgIDxUZXN0V3JhcHBlcj5cbiAgICAgICAgICA8Tm9EYXRhQ2FyZFxuICAgICAgICAgICAgaWNvbj17QnVpbGRpbmd9XG4gICAgICAgICAgICB0aXRsZUtleT1cIm5vQnVpbGRpbmdzRm91bmRcIlxuICAgICAgICAgICAgZGVzY3JpcHRpb25LZXk9XCJub0J1aWxkaW5nc0FkbWluTWVzc2FnZVwiXG4gICAgICAgICAgICB0ZXN0SWQ9XCJ0ZXN0LXdpdGgtY2hpbGRyZW5cIlxuICAgICAgICAgID5cbiAgICAgICAgICAgIDxkaXYgZGF0YS10ZXN0aWQ9XCJjdXN0b20tY2hpbGRcIj5DdXN0b20gY29udGVudDwvZGl2PlxuICAgICAgICAgIDwvTm9EYXRhQ2FyZD5cbiAgICAgICAgPC9UZXN0V3JhcHBlcj5cbiAgICAgICk7XG5cbiAgICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXN0SWQoJ2N1c3RvbS1jaGlsZCcpKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgICAgZXhwZWN0KHNjcmVlbi5nZXRCeVRleHQoJ0N1c3RvbSBjb250ZW50JykpLnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGhhbmRsZSBkaWZmZXJlbnQgaWNvbiBzaXplcycsICgpID0+IHtcbiAgICAgIGNvbnN0IHsgcmVyZW5kZXIgfSA9IHJlbmRlcihcbiAgICAgICAgPFRlc3RXcmFwcGVyPlxuICAgICAgICAgIDxOb0RhdGFDYXJkXG4gICAgICAgICAgICBpY29uPXtCdWlsZGluZ31cbiAgICAgICAgICAgIHRpdGxlS2V5PVwibm9CdWlsZGluZ3NGb3VuZFwiXG4gICAgICAgICAgICBkZXNjcmlwdGlvbktleT1cIm5vQnVpbGRpbmdzQWRtaW5NZXNzYWdlXCJcbiAgICAgICAgICAgIGljb25TaXplPXsxMn1cbiAgICAgICAgICAgIHRlc3RJZD1cInRlc3Qtc21hbGwtaWNvblwiXG4gICAgICAgICAgLz5cbiAgICAgICAgPC9UZXN0V3JhcHBlcj5cbiAgICAgICk7XG5cbiAgICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXN0SWQoJ3Rlc3Qtc21hbGwtaWNvbicpKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuXG4gICAgICByZXJlbmRlcihcbiAgICAgICAgPFRlc3RXcmFwcGVyPlxuICAgICAgICAgIDxOb0RhdGFDYXJkXG4gICAgICAgICAgICBpY29uPXtCdWlsZGluZ31cbiAgICAgICAgICAgIHRpdGxlS2V5PVwibm9CdWlsZGluZ3NGb3VuZFwiXG4gICAgICAgICAgICBkZXNjcmlwdGlvbktleT1cIm5vQnVpbGRpbmdzQWRtaW5NZXNzYWdlXCJcbiAgICAgICAgICAgIGljb25TaXplPXsyMH1cbiAgICAgICAgICAgIHRlc3RJZD1cInRlc3QtbGFyZ2UtaWNvblwiXG4gICAgICAgICAgLz5cbiAgICAgICAgPC9UZXN0V3JhcHBlcj5cbiAgICAgICk7XG5cbiAgICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXN0SWQoJ3Rlc3QtbGFyZ2UtaWNvbicpKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnQWNjZXNzaWJpbGl0eScsICgpID0+IHtcbiAgICBpdCgnc2hvdWxkIGhhdmUgcHJvcGVyIHRlc3QgSURzIGZvciBzY3JlZW4gcmVhZGVycycsICgpID0+IHtcbiAgICAgIHJlbmRlcihcbiAgICAgICAgPFRlc3RXcmFwcGVyPlxuICAgICAgICAgIDxOb0RhdGFDYXJkXG4gICAgICAgICAgICBpY29uPXtUcmVuZGluZ1VwfVxuICAgICAgICAgICAgdGl0bGVLZXk9XCJub0RhdGFBdmFpbGFibGVcIlxuICAgICAgICAgICAgZGVzY3JpcHRpb25LZXk9XCJub0Jvb2tpbmdzRm91bmRNZXNzYWdlXCJcbiAgICAgICAgICAgIGJhZGdlS2V5PVwibm9EYXRhXCJcbiAgICAgICAgICAgIHRlc3RJZD1cImFjY2Vzc2liaWxpdHktdGVzdFwiXG4gICAgICAgICAgLz5cbiAgICAgICAgPC9UZXN0V3JhcHBlcj5cbiAgICAgICk7XG5cbiAgICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXN0SWQoJ2FjY2Vzc2liaWxpdHktdGVzdCcpKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgICAgZXhwZWN0KHNjcmVlbi5nZXRCeVRlc3RJZCgnYWNjZXNzaWJpbGl0eS10ZXN0LXRpdGxlJykpLnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGVzdElkKCdhY2Nlc3NpYmlsaXR5LXRlc3QtZGVzY3JpcHRpb24nKSkudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXN0SWQoJ2FjY2Vzc2liaWxpdHktdGVzdC1iYWRnZScpKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBtYWludGFpbiBzZW1hbnRpYyBzdHJ1Y3R1cmUnLCAoKSA9PiB7XG4gICAgICByZW5kZXIoXG4gICAgICAgIDxUZXN0V3JhcHBlcj5cbiAgICAgICAgICA8Tm9EYXRhQ2FyZFxuICAgICAgICAgICAgaWNvbj17QnVpbGRpbmd9XG4gICAgICAgICAgICB0aXRsZUtleT1cIm5vQnVpbGRpbmdzRm91bmRcIlxuICAgICAgICAgICAgZGVzY3JpcHRpb25LZXk9XCJub0J1aWxkaW5nc0FkbWluTWVzc2FnZVwiXG4gICAgICAgICAgICB0ZXN0SWQ9XCJzZW1hbnRpYy10ZXN0XCJcbiAgICAgICAgICAvPlxuICAgICAgICA8L1Rlc3RXcmFwcGVyPlxuICAgICAgKTtcblxuICAgICAgY29uc3QgdGl0bGUgPSBzY3JlZW4uZ2V0QnlUZXN0SWQoJ3NlbWFudGljLXRlc3QtdGl0bGUnKTtcbiAgICAgIGNvbnN0IGRlc2NyaXB0aW9uID0gc2NyZWVuLmdldEJ5VGVzdElkKCdzZW1hbnRpYy10ZXN0LWRlc2NyaXB0aW9uJyk7XG5cbiAgICAgIGV4cGVjdCh0aXRsZS50YWdOYW1lLnRvTG93ZXJDYXNlKCkpLnRvQmUoJ2gzJyk7XG4gICAgICBleHBlY3QoZGVzY3JpcHRpb24udGFnTmFtZS50b0xvd2VyQ2FzZSgpKS50b0JlKCdwJyk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdFcnJvciBIYW5kbGluZycsICgpID0+IHtcbiAgICBpdCgnc2hvdWxkIGhhbmRsZSBtaXNzaW5nIHRyYW5zbGF0aW9uIGtleXMgZ3JhY2VmdWxseScsICgpID0+IHtcbiAgICAgIHJlbmRlcihcbiAgICAgICAgPFRlc3RXcmFwcGVyPlxuICAgICAgICAgIDxOb0RhdGFDYXJkXG4gICAgICAgICAgICBpY29uPXtCdWlsZGluZ31cbiAgICAgICAgICAgIHRpdGxlS2V5PVwibm9uRXhpc3RlbnRLZXlcIiBhcyBhbnlcbiAgICAgICAgICAgIGRlc2NyaXB0aW9uS2V5PVwiYW5vdGhlck5vbkV4aXN0ZW50S2V5XCIgYXMgYW55XG4gICAgICAgICAgICB0ZXN0SWQ9XCJlcnJvci1oYW5kbGluZy10ZXN0XCJcbiAgICAgICAgICAvPlxuICAgICAgICA8L1Rlc3RXcmFwcGVyPlxuICAgICAgKTtcblxuICAgICAgZXhwZWN0KHNjcmVlbi5nZXRCeVRlc3RJZCgnZXJyb3ItaGFuZGxpbmctdGVzdCcpKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgICAgZXhwZWN0KHNjcmVlbi5nZXRCeVRlc3RJZCgnZXJyb3ItaGFuZGxpbmctdGVzdC10aXRsZScpKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgICAgZXhwZWN0KHNjcmVlbi5nZXRCeVRlc3RJZCgnZXJyb3ItaGFuZGxpbmctdGVzdC1kZXNjcmlwdGlvbicpKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnQ29tbW9uIFVzZSBDYXNlcycsICgpID0+IHtcbiAgICBpdCgnc2hvdWxkIHJlbmRlciBidWlsZGluZ3Mgbm8gZGF0YSBzY2VuYXJpbyBjb3JyZWN0bHknLCAoKSA9PiB7XG4gICAgICByZW5kZXIoXG4gICAgICAgIDxUZXN0V3JhcHBlcj5cbiAgICAgICAgICA8Tm9EYXRhQ2FyZFxuICAgICAgICAgICAgaWNvbj17QnVpbGRpbmd9XG4gICAgICAgICAgICB0aXRsZUtleT1cIm5vQnVpbGRpbmdzRm91bmRcIlxuICAgICAgICAgICAgZGVzY3JpcHRpb25LZXk9XCJub0J1aWxkaW5nc0FkbWluTWVzc2FnZVwiXG4gICAgICAgICAgICBiYWRnZUtleT1cIm5vRGF0YVwiXG4gICAgICAgICAgICB0ZXN0SWQ9XCJidWlsZGluZ3Mtc2NlbmFyaW9cIlxuICAgICAgICAgIC8+XG4gICAgICAgIDwvVGVzdFdyYXBwZXI+XG4gICAgICApO1xuXG4gICAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGVzdElkKCdidWlsZGluZ3Mtc2NlbmFyaW8nKSkudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgcmVuZGVyIHJlc2lkZW5jZXMgbm8gZGF0YSBzY2VuYXJpbyBjb3JyZWN0bHknLCAoKSA9PiB7XG4gICAgICByZW5kZXIoXG4gICAgICAgIDxUZXN0V3JhcHBlcj5cbiAgICAgICAgICA8Tm9EYXRhQ2FyZFxuICAgICAgICAgICAgaWNvbj17SG9tZX1cbiAgICAgICAgICAgIHRpdGxlS2V5PVwibm9SZXNpZGVuY2VzRm91bmRcIlxuICAgICAgICAgICAgZGVzY3JpcHRpb25LZXk9XCJub3RBc3NpZ25lZFJlc2lkZW5jZXNcIlxuICAgICAgICAgICAgdGVzdElkPVwicmVzaWRlbmNlcy1zY2VuYXJpb1wiXG4gICAgICAgICAgLz5cbiAgICAgICAgPC9UZXN0V3JhcHBlcj5cbiAgICAgICk7XG5cbiAgICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXN0SWQoJ3Jlc2lkZW5jZXMtc2NlbmFyaW8nKSkudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgcmVuZGVyIGNvbW1vbiBzcGFjZXMgc3RhdHMgbm8gZGF0YSBzY2VuYXJpbyBjb3JyZWN0bHknLCAoKSA9PiB7XG4gICAgICByZW5kZXIoXG4gICAgICAgIDxUZXN0V3JhcHBlcj5cbiAgICAgICAgICA8Tm9EYXRhQ2FyZFxuICAgICAgICAgICAgaWNvbj17VHJlbmRpbmdVcH1cbiAgICAgICAgICAgIHRpdGxlS2V5PVwibm9EYXRhQXZhaWxhYmxlXCJcbiAgICAgICAgICAgIGRlc2NyaXB0aW9uS2V5PVwibm9Cb29raW5nc0ZvdW5kTWVzc2FnZVwiXG4gICAgICAgICAgICB0ZXN0SWQ9XCJzdGF0cy1zY2VuYXJpb1wiXG4gICAgICAgICAgICBpY29uU2l6ZT17MTJ9XG4gICAgICAgICAgLz5cbiAgICAgICAgPC9UZXN0V3JhcHBlcj5cbiAgICAgICk7XG5cbiAgICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXN0SWQoJ3N0YXRzLXNjZW5hcmlvJykpLnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgfSk7XG4gIH0pO1xufSk7Il0sInZlcnNpb24iOjN9